<!DOCTYPE html>
<!DOCTYPE html><html class="split chapter" lang="en-US-x-hixie"><title>7.9 Drag and drop &mdash; HTML5</title><link href="/style/specification" rel="stylesheet"><link href="/images/icon" rel="icon"><style>
   .proposal { border: blue solid; padding: 1em; }
   .bad, .bad *:not(.XXX) { color: gray; border-color: gray; background: transparent; }
   #updatesStatus { display: none; }
   #updatesStatus.relevant { display: block; position: fixed; right: 1em; top: 1em; padding: 0.5em; font: bold small sans-serif; min-width: 25em; width: 30%; max-width: 40em; height: auto; border: ridge 4px gray; background: #EEEEEE; color: black; }
   div.head .logo { width: 11em; margin-bottom: 20em; }
   #configUI { position: absolute; z-index: 20; top: 10em; right: 1em; width: 11em; font-size: small; }
   #configUI p { margin: 0.5em 0; padding: 0.3em; background: #EEEEEE; color: black; border: inset thin; }
   #configUI p label { display: block; }
   #configUI #updateUI, #configUI .loginUI { text-align: center; }
   #configUI input[type=button] { display: block; margin: auto; }
   #reviewer { position: fixed; bottom: 0; right: 0; white-space: nowrap; border: thin; border-style: inset none none inset; background: #EEEEEE; color: black; overflow: hidden; z-index: 30; }
   #reviewer * { font-size: small; }
   #reviewer.off > :not(:first-child) { display: none; }
   @media print { #configUI { display: none; } }
   .rfc2119 { font-variant: small-caps; text-shadow: 0 0 0.5em yellow; position: static; }
   .rfc2119::after { position: absolute; left: 0; width: 25px; text-align: center; color: yellow; text-shadow: 0.075em 0.075em 0.2em black; }
   .rfc2119.m\ust::after { content: '\2605'; }
   .rfc2119.s\hould::after { content: '\2606'; }
   [hidden] { display: none; }
  </style><style type="text/css">

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies tbody th { whitespace: nowrap; }
   .applies td { text-align: center; }
   .applies .yes { background: yellow; }

   .matrix, .matrix td { border: none; text-align: right; }
   .matrix { margin-left: 2em; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

  </style><link href="data:text/css," id="complete" rel="stylesheet" title="Complete specification"><link href="data:text/css,.impl%20{%20display:%20none;%20}" id="author" rel="alternate stylesheet" title="Author documentation only"><link href="data:text/css,.impl%20{%20background:%20%23FFEEEE;%20}" id="highlight" rel="alternate stylesheet" title="Highlight implementation requirements"><script>
   var loadTimer = new Date();
   var current_revision = "r" + "$Revision: 4372 $".substr(11);
   current_revision = current_revision.substr(0, current_revision.length - 2);
   var last_known_revision = current_revision;
   function getCookie(name) {
     var params = location.search.substr(1).split("&");
     for (var index = 0; index < params.length; index++) {
       if (params[index] == name)
         return "1";
       var data = params[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     var cookies = document.cookie.split("; ");
     for (var index = 0; index < cookies.length; index++) {
       var data = cookies[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     return null;
   }
   function load(script) {
     var e = document.createElement('script');
     e.setAttribute('src', script);
     document.body.appendChild(e);
   }
   function init() {
     if (location.search == '?slow-browser')
       return;
     var configUI = document.createElement('div');
     configUI.id = 'configUI';
     document.body.appendChild(configUI);
     if (document.documentElement.className == "" || document.documentElement.className == "split index")
       load('toc.js');
     load('styler.js');
     if (document.documentElement.className == "")
       load('dfn.js');
     if (getCookie('profile') == '1')
       document.getElementsByTagName('h2')[0].textContent += '; load: ' + (new Date() - loadTimer) + 'ms';
   }
  </script>
  <script src="link-fixup.js"></script>
  <link href="editing.html" rel="prev" title="7 User Interaction">
  <link href="index.html#contents" rel="index" title="Table of contents">
  <link href="comms.html" rel="next" title="8 Communication">
  <body class="cfc" onload="fixBrokenLink(); init()">
  <style scoped>
   * { color: gray ! important; background: none ! important; border-color: silver ! important; }
   img, object, iframe { filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); -webkit-filter: grayscale(100%); }
   .obsolete { border: double thick red ! important; background: yellow ! important; margin: 4em auto 0 auto; max-width: 50em; width: 70%; text-align: center; position: fixed;  z-index: 10000; top: 0; left: 0; right: 0; }
   .obsolete a { color: blue ! important; }
   .obsolete p { font: 900 2em sans-serif; color: red ! important; margin: 1em 1.5em ! important; }
  </style>
  <div class=obsolete>
   <p>This is a snapshot of an early working draft and has therefore
   been superseded by the <a href="http://whatwg.org/html">HTML
   standard</a>.</p>
   <p>This document will not be further updated.</p>
  </div>
<header class="head"><p><a class="logo" href="http://www.whatwg.org/" rel="home"><img alt="WHATWG" src="/images/logo"></a></p>
   <hgroup><h1>HTML5</h1>
    <h2 class="no-num no-toc">Draft Standard &mdash; Call For Comments &mdash; 27 October 2009</h2>
   </hgroup></header><nav>
   <a href="editing.html">&larr; 7 User Interaction</a> &ndash;
   <a href="index.html#contents">Table of contents</a> &ndash;
   <a href="comms.html">8 Communication &rarr;</a>
  <ol class="toc"><li><ol><li><a href="dnd.html#dnd"><span class="secno">7.9 </span>Drag and drop</a>
    <ol><li><a href="dnd.html#introduction-4"><span class="secno">7.9.1 </span>Introduction</a><li><a href="dnd.html#the-dragevent-and-datatransfer-interfaces"><span class="secno">7.9.2 </span>The <code>DragEvent</code> and <code>DataTransfer</code> interfaces</a><li><a href="dnd.html#dndevents"><span class="secno">7.9.3 </span>Events fired during a drag-and-drop action</a><li><a href="dnd.html#drag-and-drop-processing-model"><span class="secno">7.9.4 </span>Drag-and-drop processing model</a>
      <ol><li><a href="dnd.html#when-the-drag-and-drop-operation-starts-or-ends-in-another-document"><span class="secno">7.9.4.1 </span>When the drag-and-drop operation starts or ends in another
  document</a><li><a href="dnd.html#when-the-drag-and-drop-operation-starts-or-ends-in-another-application"><span class="secno">7.9.4.2 </span>When the drag-and-drop operation starts or ends in another
  application</a></ol><li><a href="dnd.html#the-draggable-attribute"><span class="secno">7.9.5 </span>The <code>draggable</code> attribute</a><li><a href="dnd.html#copy-and-paste"><span class="secno">7.9.6 </span>Copy and paste</a>
      <ol><li><a href="dnd.html#copy-to-clipboard"><span class="secno">7.9.6.1 </span>Copy to clipboard</a><li><a href="dnd.html#cut-to-clipboard"><span class="secno">7.9.6.2 </span>Cut to clipboard</a><li><a href="dnd.html#paste-from-clipboard"><span class="secno">7.9.6.3 </span>Paste from clipboard</a><li><a href="dnd.html#paste-from-selection"><span class="secno">7.9.6.4 </span>Paste from selection</a></ol><li><a href="dnd.html#security-risks-in-the-drag-and-drop-model"><span class="secno">7.9.7 </span>Security risks in the drag-and-drop model</a></ol><li><a href="dnd.html#undo"><span class="secno">7.10 </span>Undo history</a>
    <ol><li><a href="dnd.html#definitions-2"><span class="secno">7.10.1 </span>Definitions</a><li><a href="dnd.html#the-undomanager-interface"><span class="secno">7.10.2 </span>The <code>UndoManager</code> interface</a><li><a href="dnd.html#undo:-moving-back-in-the-undo-transaction-history"><span class="secno">7.10.3 </span>Undo: moving back in the undo transaction history</a><li><a href="dnd.html#redo:-moving-forward-in-the-undo-transaction-history"><span class="secno">7.10.4 </span>Redo: moving forward in the undo transaction history</a><li><a href="dnd.html#the-undomanagerevent-interface-and-the-undo-and-redo-events"><span class="secno">7.10.5 </span>The <code>UndoManagerEvent</code> interface and the <code title="event-undo">undo</code> and <code title="event-redo">redo</code> events</a><li><a href="dnd.html#implementation-notes"><span class="secno">7.10.6 </span>Implementation notes</a></ol><li><a href="dnd.html#editing-apis"><span class="secno">7.11 </span>Editing APIs</a></ol></ol></nav>

  <h3 id="dnd"><span class="secno">7.9 </span><dfn>Drag and drop</dfn></h3>

<!-- v2 ideas for drag and drop:

     * being able to animate a drop target:

       > To implement this with simple interface I've proposed, events
       > should be handled either by existing elements (like list
       > items that compare their size and position of dragged element
       > to decide whether element should be dropped before or after)
       > or handled by container that would probably need to calculate
       > positions of it's children and create new element to show
       > drop target. Smooth Mac-like drag'n'drop can be implemented
       > by animating drop target's padding/margin. So that's quite a
       > bit of code that's going to be reinvented each time someone
       > implements reordering.

       <hyatt> :droptarget
       <hyatt> or something
       <hyatt> we don't support a pseudo-class for the drop target but that's a great idea
       <Hixie_> yeah, thinking about that too
       <Hixie_> :drop-target, :drop-target(above), :drop-target(below) and having ondragover be able to say "not on me, but next to me maybe"

     * We should let drop targets communicate back to drag sources if
       they want to communicate. (e.g. expose Window, and thus
       postMessage(), on the dataTransfer object on drop.)

       We should let drag sources provide a set of options via a
       context menu when the drop happens. (So that, e.g., the source
       can know whether a capabilities URI that it is passing along is
       supposed to be read-write access or read-only access to the
       object being dragged.)

       We should let potential drop targets see the types (but not the
       contents!) of dragged data so they can establish if they care
       or not. (dataTransfer.hasType())

       Ack: Ben Laurie (@g)

-->

  <p>This section defines an event-based drag-and-drop mechanism.</p>

  <p>This specification does not define exactly what a
  <em>drag-and-drop operation</em> actually is.</p>

  <p>On a visual medium with a pointing device, a drag operation could
  be the default action of a <code title="event-mousedown">mousedown</code> event that is followed by a
  series of <code title="event-mousemove">mousemove</code> events, and
  the drop could be triggered by the mouse being released.</p>

  <p>On media without a pointing device, the user would probably have
  to explicitly indicate his intention to perform a drag-and-drop
  operation, stating what he wishes to drag and what he wishes to
  drop, respectively.</p>

  <div class="impl">

  <p>However it is implemented, drag-and-drop operations must have a
  starting point (e.g. where the mouse was clicked, or the start of
  <a href="editing.html#the-selection">the selection</a> or element that was selected for the
  drag), may have any number of intermediate steps (elements that the
  mouse moves over during a drag, or elements that the user picks as
  possible drop points as he cycles through possibilities), and must
  either have an end point (the element above which the mouse button
  was released, or the element that was finally selected), or be
  canceled. The end point must be the last element selected as a
  possible drop point before the drop occurs (so if the operation is
  not canceled, there must be at least one element in the middle
  step).</p>

  </div>


  <h4 id="introduction-4"><span class="secno">7.9.1 </span>Introduction</h4>

  <p><i>This section is non-normative.</i></p>

  <p>To make an element draggable is simple: give the element a <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> attribute, and set an event
  listener for <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> that
  stores the data being dragged.</p>

  <p>The event handler typically needs to check that it's not a text
  selection that is being dragged, and then needs to store data into
  the <code><a href="#datatransfer">DataTransfer</a></code> object and set the allowed effects
  (copy, move, link, or some combination).</p>

  <p>For example:</p>

  <pre>&lt;p&gt;What fruits do you like?&lt;/p&gt;
&lt;ol ondragstart="dragStartHandler(event)"&gt;
 &lt;li draggable data-value="fruit-apple"&gt;Apples&lt;/li&gt;
 &lt;li draggable data-value="fruit-orange"&gt;Oranges&lt;/li&gt;
 &lt;li draggable data-value="fruit-pear"&gt;Pears&lt;/li&gt;
&lt;/ol&gt;
&lt;script&gt;
  var internalDNDType = 'text/x-example'; // set this to something specific to your site
  function dragStartHandler(event) {
    if (event.target instanceof HTMLLIElement) {
      // use the element's data-value="" attribute as the value to be moving:
      event.dataTransfer.setData(internalDNDType, event.target.dataset.value);
      event.effectAllowed = 'move'; // only allow moves
    } else {
      event.preventDefault(); // don't allow selection to be dragged
    }
  }
&lt;/script&gt;</pre>

  <hr><p>To accept a drop, the drop target has to listen to at least three
  events. First, the <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code>
  event, which is used to determine whether or not the drop target is
  to accept the drop. If the drop is to be accepted, then this event
  has to be canceled. Second, the <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event, which is used to
  determine what feedback is to be shown to the user. If the event is
  canceled, then the feedback (typically the cursor) is updated based
  on the <code title="dom-DataTransfer-DropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code>
  attribute's value, as set by the event handler; otherwise, the
  default behavior (typically to do nothing) is used instead. Finally,
  the <code title="event-drop"><a href="#event-drop">drop</a></code> event, which allows the
  actual drop to be performed. This event also needs to be canceled,
  so that the <code title="dom-DataTransfer-DropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute's
  value can be used by the source (otherwise it's reset).</p>

  <p>For example:</p>

  <pre>&lt;p&gt;Drop your favourite fruits below:&lt;/p&gt;
&lt;ol class="dropzone"
    ondragenter="dragEnterHandler(event)"
    ondragover="dragOverHandler(event)"
    ondrop="dropHandler(event)"&gt;
&lt;/ol&gt;
&lt;script&gt;
  var internalDNDType = 'text/x-example'; // set this to something specific to your site
  function dragEnterHandler(event) {
    // cancel the event if the drag contains data of our type
    if (event.dataTransfer.types.contains(internalDNDType))
      event.preventDefault();
  }
  function dragOverHandler(event) {
    event.dataTransfer.dropEffect = 'move';
    event.preventDefault();
  }
  function dropHandler(event) {
    // drop the data
    var li = document.createElement('li');
    var data = event.dataTransfer.getData(internalDNDType);
    if (data == 'fruit-apple') {
      li.textContent = 'Apples';
    } else if (data == 'fruit-orange') {
      li.textContent = 'Oranges';
    } else if (data == 'fruit-pear') {
      li.textContent = 'Pears';
    } else {
      li.textContent = 'Unknown Fruit';
    }
    event.target.appendChild(li);
  }
&lt;/script&gt;</pre>

  <hr><p>To remove the original element (the one that was dragged) from
  the display, the <code title="event-dragend"><a href="#event-dragend">dragend</a></code> event
  can be used.</p>

  <p>For our example here, that means updating the original markup to
  handle that event:</p>


  <pre>&lt;p&gt;What fruits do you like?&lt;/p&gt;
&lt;ol ondragstart="dragStartHandler(event)" ondragend="dragEndHandler(event)"&gt;
 <em>...as before...</em>
&lt;/ol&gt;
&lt;script&gt;
  function dragStartHandler(event) {
    // <em>...as before...</em>
  }
  function dragEndHandler(event) {
    // remove the dragged element
    event.target.parentNode.removeChild(event.target);
  }
&lt;/script&gt;</pre>




  <h4 id="the-dragevent-and-datatransfer-interfaces"><span class="secno">7.9.2 </span>The <code><a href="#dragevent">DragEvent</a></code> and <code><a href="#datatransfer">DataTransfer</a></code> interfaces</h4>

  <p>The drag-and-drop processing model involves several events. They
  all use the <code><a href="#dragevent">DragEvent</a></code> interface.</p>

  <pre class="idl">interface <dfn id="dragevent">DragEvent</dfn> : <span>MouseEvent</span> {
  readonly attribute <a href="#datatransfer">DataTransfer</a> <a href="#dom-dragevent-datatransfer" title="dom-DragEvent-dataTransfer">dataTransfer</a>;

  void <a href="#dom-dragevent-initdragevent" title="dom-DragEvent-initDragEvent">initDragEvent</a>(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in <span>AbstractView</span> viewArg, in long detailArg, in long screenXArg, in long screenYArg, in long clientXArg, in long clientYArg, in boolean ctrlKeyArg, in boolean altKeyArg, in boolean shiftKeyArg, in boolean metaKeyArg, in unsigned short buttonArg, in EventTarget relatedTargetArg, in <a href="#datatransfer">DataTransfer</a> dataTransferArg);
};</pre>

  <dl class="domintro"><dt><var title="">event</var> . <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code></dt>

   <dd>

    <p>Returns the <code><a href="#datatransfer">DataTransfer</a></code> object for the event.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-dragevent-initdragevent" title="dom-DragEvent-initDragEvent"><code>initDragEvent()</code></dfn>
  method must initialize the event in a manner analogous to the
  similarly-named method in the DOM Events interfaces. <a href="references.html#refsDOMEVENTS">[DOMEVENTS]</a></p>

  <p>The <dfn id="dom-dragevent-datatransfer" title="dom-DragEvent-dataTransfer"><code>dataTransfer</code></dfn>
  attribute of the <code><a href="#dragevent">DragEvent</a></code> interface represents the
  context information for the event.</p>

  </div>

  <pre class="idl">interface <dfn id="datatransfer">DataTransfer</dfn> {
           attribute DOMString <a href="#dom-datatransfer-dropeffect" title="dom-DataTransfer-dropEffect">dropEffect</a>;
           attribute DOMString <a href="#dom-datatransfer-effectallowed" title="dom-DataTransfer-effectAllowed">effectAllowed</a>;

  readonly attribute DOMStringList <a href="#dom-datatransfer-types" title="dom-DataTransfer-types">types</a>;
  void <a href="#dom-datatransfer-cleardata" title="dom-DataTransfer-clearData">clearData</a>(in optional DOMString format);
  void <a href="#dom-datatransfer-setdata" title="dom-DataTransfer-setData">setData</a>(in DOMString format, in DOMString data);
  DOMString <a href="#dom-datatransfer-getdata" title="dom-DataTransfer-getData">getData</a>(in DOMString format);
  readonly attribute <span>FileList</span> <a href="#dom-datatransfer-files" title="dom-DataTransfer-files">files</a>;

  void <a href="#dom-datatransfer-setdragimage" title="dom-DataTransfer-setDragImage">setDragImage</a>(in Element image, in long x, in long y);
  void <a href="#dom-datatransfer-addelement" title="dom-DataTransfer-addElement">addElement</a>(in Element element);
};</pre>

  <p><code><a href="#datatransfer">DataTransfer</a></code> objects can hold pieces of data, each
  associated with a unique format. Formats are generally given by
  <a href="infrastructure.html#mime-type" title="MIME type">MIME types</a>, with some values
  special-cased for legacy reasons. For the purposes of this API,
  however, the format strings are opaque, <a href="infrastructure.html#case-sensitive">case-sensitive</a>,
  strings, and the empty string is a valid format string.</p>

  <dl class="domintro"><dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the kind of operation that is currently selected. If
    the kind of operation isn't one of those that is allowed by the
    <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
    attribute, then the operation will fail.</p>

    <p>Can be set, to change the selected operation.</p>

    <p>The possible values are <code title="">none</code>, <code title="">copy</code>, <code title="">link</code>, and <code title="">move</code>.</p>

   </dd>

   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the kinds of operations that are to be allowed.</p>

    <p>Can be set, to change the allowed operations.</p>

    <p>The possible values are <code title="">none</code>, <code title="">copy</code>, <code title="">copyLink</code>, <code title="">copyMove</code>, <code title="">link</code>, <code title="">linkMove</code>, <code title="">move</code>, <code title="">all</code>, and <code title="">uninitialized</code>,</p>

   </dd>

   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-types"><a href="#dom-datatransfer-types">types</a></code></dt>

   <dd>

    <p>Returns a <code>DOMStringList</code> listing the formats that
    were set in the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code>
    event. In addition, if any files are being dragged, then one of
    the types will be the string "<code title="">Files</code>".</p>

   </dd>

   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-clearData"><a href="#dom-datatransfer-cleardata">clearData</a></code>( [ <var title="">format</var> ] )</dt>

   <dd>

    <p>Removes the data of the specified formats. Removes all data if
    the argument is omitted.</p>

   </dd>

   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-setData"><a href="#dom-datatransfer-setdata">setData</a></code>(<var title="">format</var>, <var title="">data</var>)</dt>

   <dd>

    <p>Adds the specified data.</p>

   </dd>

   <dt><var title="">data</var> = <var title="">dataTransfer</var> . <code title="dom-DataTransfer-getData"><a href="#dom-datatransfer-getdata">getData</a></code>(<var title="">format</var>)</dt>

   <dd>

    <p>Returns the specified data. If there is no such data, returns the empty string.</p>

   </dd>

   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-files"><a href="#dom-datatransfer-files">files</a></code></dt>

   <dd>

    <p>Returns a <code>FileList</code> of the files being dragged, if any.</p>

   </dd>

   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-setDragImage"><a href="#dom-datatransfer-setdragimage">setDragImage</a></code>(<var title="">element</var>, <var title="">x</var>, <var title="">y</var>)</dt>

   <dd>

    <p>Uses the given element to update the drag feedback, replacing any previously specified feedback.</p>

   </dd>

   <dt><var title="">dataTransfer</var> . <code title="dom-DataTransfer-addElement"><a href="#dom-datatransfer-addelement">addElement</a></code>(<var title="">element</var>)</dt>

   <dd>

    <p>Adds the given element to the list of elements used to render the drag feedback.</p>

   </dd>

  </dl><div class="impl">

  <p>When a <code><a href="#datatransfer">DataTransfer</a></code> object is created, it must be
  initialized as follows:</p>

  <ul><li>The <code><a href="#datatransfer">DataTransfer</a></code> object must initially contain no
   data, no elements, and have no associated image.</li>

   <li>The <code><a href="#datatransfer">DataTransfer</a></code> object's <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
   attribute must be set to "<code title="">uninitialized</code>".</li>

   <li>The <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code>
   attribute must be set to "<code title="">none</code>".</li>

  </ul><p>The <dfn id="dom-datatransfer-dropeffect" title="dom-DataTransfer-dropEffect"><code>dropEffect</code></dfn>
  attribute controls the drag-and-drop feedback that the user is given
  during a drag-and-drop operation.</p>

  <p>The attribute must ignore any attempts to set it to a value other
  than <code title="">none</code>, <code title="">copy</code>, <code title="">link</code>, and <code title="">move</code>. On getting,
  the attribute must return the last of those four values that it was
  set to.</p>

  <p>The <dfn id="dom-datatransfer-effectallowed" title="dom-DataTransfer-effectAllowed"><code>effectAllowed</code></dfn>
  attribute is used in the drag-and-drop processing model to
  initialize the <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute
  during the <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> and <code title="event-dragover"><a href="#event-dragover">dragover</a></code> events.</p>

  <p>The attribute must ignore any attempts to set it to a value other
  than <code title="">none</code>, <code title="">copy</code>, <code title="">copyLink</code>, <code title="">copyMove</code>, <code title="">link</code>, <code title="">linkMove</code>, <code title="">move</code>, <code title="">all</code>, and <code title="">uninitialized</code>. On getting, the attribute must return
  the last of those values that it was set to.</p>

  <p>The <dfn id="dom-datatransfer-types" title="dom-DataTransfer-types"><code>types</code></dfn>
  attribute must return a live <code>DOMStringList</code> that
  contains the list of formats that were added to the
  <code><a href="#datatransfer">DataTransfer</a></code> object in the corresponding <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event. If any files were
  included in the drag, then the <code>DOMStringList</code> object
  must in addition include the string "<code title="">Files</code>".</p>

  <p class="note">If the <code title="dom-DataTransfer-setData"><a href="#dom-datatransfer-setdata">setData()</a></code> method is invoked
  with the string "<code title="">Files</code>", and some files were
  included in the drag, then the string "<code title="">Files</code>"
  will appear twice in the <code title="dom-DataTransfer-types"><a href="#dom-datatransfer-types">types</a></code> attribute's list.</p>

  <p>The <dfn id="dom-datatransfer-cleardata" title="dom-DataTransfer-clearData"><code>clearData()</code></dfn>
  method, when called with no arguments, must clear the
  <code><a href="#datatransfer">DataTransfer</a></code> object of all data (for all formats).</p>

  <p class="note">The <code title="dom-DataTransfer-clearData"><a href="#dom-datatransfer-cleardata">clearData()</a></code> method does
  not affect whether any files were included in the drag, so the <code title="dom-DataTransfer-types"><a href="#dom-datatransfer-types">types</a></code> attribute's list might
  still not be empty after calling <code title="dom-DataTransfer-clearData"><a href="#dom-datatransfer-cleardata">clearData()</a></code> (it would
  still contain the "<code title="">Files</code>" string if any files
  were included in the drag).</p>

  <p>When called with an argument, the <code title="dom-DataTransfer-clearData"><a href="#dom-datatransfer-cleardata">clearData(<var title="">format</var>)</a></code> method must clear the
  <code><a href="#datatransfer">DataTransfer</a></code> object of any data associated with the
  given <var title="">format</var>. If <var title="">format</var> is
  the value "<code title="">Text</code>", then it must be treated as
  "<code title="">text/plain</code>". If the <var title="">format</var> is "<code title="">URL</code>", then it must
  be treated as "<code title="">text/uri-list</code>".</p>

  <p>The <dfn id="dom-datatransfer-setdata" title="dom-DataTransfer-setData"><code>setData(<var title="">format</var>, <var title="">data</var>)</code></dfn> method
  must add <var title="">data</var> to the data stored in the
  <code><a href="#datatransfer">DataTransfer</a></code> object, labeled as being of the type <var title="">format</var>. This must replace any previous data that had
  been set for that format. If <var title="">format</var> is the value
  "<code title="">Text</code>", then it must be treated as "<code title="">text/plain</code>". If the <var title="">format</var> is
  "<code title="">URL</code>", then it must be treated as "<code title="">text/uri-list</code>".</p>

  <p>The <dfn id="dom-datatransfer-getdata" title="dom-DataTransfer-getData"><code>getData(<var title="">format</var>)</code></dfn> method must return the data that
  is associated with the type <var title="">format</var>, if any, and
  must return the empty string otherwise. If <var title="">format</var> is the value "<code title="">Text</code>",
  then it must be treated as "<code title="">text/plain</code>". If
  the <var title="">format</var> is "<code title="">URL</code>", then
  the data associated with the "<code title="">text/uri-list</code>"
  format must be parsed as appropriate for <code title="">text/uri-list</code> data, and the first URL from the list
  must be returned. If there is no data with that format, or if there
  is but it has no URLs, then the method must return the empty
  string. <a href="references.html#refsRFC2483">[RFC2483]</a></p>

  <p>The <dfn id="dom-datatransfer-files" title="dom-DataTransfer-files"><code>files</code></dfn>
  attribute must return the <code>FileList</code> object that contains
  the files that are stored in the <code><a href="#datatransfer">DataTransfer</a></code>
  object. There is one such object per <code><a href="#datatransfer">DataTransfer</a></code>
  object.</p>

  <p>The <dfn id="dom-datatransfer-setdragimage" title="dom-DataTransfer-setDragImage"><code>setDragImage(<var title="">element</var>, <var title="">x</var>, <var title="">y</var>)</code></dfn> method sets which element to use <a href="#base-dnd-feedback">to generate the drag feedback</a>. The
  <var title="">element</var> argument can be any
  <code>Element</code>; if it is an <code><a href="embedded-content-1.html#the-img-element">img</a></code> element, then the
  user agent should use the element's image (at its intrinsic size) to
  generate the feedback, otherwise the user agent should base the
  feedback on the given element (but the exact mechanism for doing so
  is not specified).</p>

  <p>The <dfn id="dom-datatransfer-addelement" title="dom-DataTransfer-addElement"><code>addElement(<var title="">element</var>)</code></dfn> method is an alternative way of
  specifying how the user agent is to <a href="#base-dnd-feedback">render the drag feedback</a>. It adds an
  element to the <code><a href="#datatransfer">DataTransfer</a></code> object.</p>

  <p class="note">The difference between <code title="dom-DataTransfer-setDragImage"><a href="#dom-datatransfer-setdragimage">setDragImage()</a></code> and
  <code title="dom-DataTransfer-addElement"><a href="#dom-datatransfer-addelement">addElement()</a></code> is
  that the latter automatically generates the image based on the
  current rendering of the elements added, whereas the former uses the
  exact specified image.</p>

  </div>


  <h4 id="dndevents"><span class="secno">7.9.3 </span>Events fired during a drag-and-drop action</h4>

  <p>The following events are involved in the drag-and-drop
  model.</p>

  <div class="impl">

  <p>Whenever the processing model described
  below causes one of these events to be fired, the event fired must
  use the <code><a href="#dragevent">DragEvent</a></code> interface defined above, must have
  the bubbling and cancelable behaviors given in the table below, and
  must have the context information set up as described after the
  table, with the <code title="dom-UIEvent-view">view</code> attribute
  set to the view with which the user interacted to trigger the
  drag-and-drop event, the <code title="dom-UIEvent-detail">detail</code> attribute set to zero, the
  mouse and key attributes set according to the state of the input
  devices as they would be for user interaction events, and the <code title="">relatedTarget</code> attribute set to null.</p>

  <p>If there is no relevant pointing device, the object must have its
  <code title="">screenX</code>, <code title="">screenY</code>, <code title="">clientX</code>, <code title="">clientY</code>, and <code title="">button</code> attributes set to 0.</p>

  <!-- interaction event spec point -->

  </div>

  <table><thead><tr><th> Event Name </th>
     <th> Target </th>
     <th> Bubbles? </th>
     <th> Cancelable? </th>
     <th> <code title="dom-DataTransfer-dataTransfer">dataTransfer</code> </th>
     <th> <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code> </th>
     <th> <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> </th>
     <th> Default Action </th>
    <tbody><tr><td><dfn id="event-dragstart" title="event-dragstart"><code>dragstart</code></dfn></td>
     <td><a href="#source-node">Source node</a></td>
     <td>&#10003; Bubbles</td>
     <td>&#10003; Cancelable</td>
     <td>Contains <a href="#source-node">source node</a> unless a selection is being dragged, in which case it is empty; <code title="dom-datatransfer-files"><a href="#dom-datatransfer-files">files</a></code> returns any files included in the drag operation</td>
     <td><code title="">uninitialized</code></td>
     <td><code title="">none</code></td>
     <td>Initiate the drag-and-drop operation</td>
    <tr><td><dfn id="event-drag" title="event-drag"><code>drag</code></dfn></td>
     <td><a href="#source-node">Source node</a></td>
     <td>&#10003; Bubbles</td>
     <td>&#10003; Cancelable</td>
     <td>Empty</td>
     <td><a href="#effectAllowed-initialization">Same as last event</a></td>
     <td><code title="">none</code></td>
     <td>Continue the drag-and-drop operation</td>
    <tr><td><dfn id="event-dragenter" title="event-dragenter"><code>dragenter</code></dfn></td>
     <td><a href="#immediate-user-selection">Immediate user selection</a> or <a href="dom.html#the-body-element">the body element</a></td>
     <td>&#10003; Bubbles</td>
     <td>&#10003; Cancelable</td>
     <td>Empty</td>
     <td><a href="#effectAllowed-initialization">Same as last event</a></td>
     <td><a href="#dropEffect-initialization">Based on <code>effectAllowed</code> value</a></td>
     <td>Reject <a href="#immediate-user-selection">immediate user selection</a> as potential <a href="#current-target-element" title="current target element">target element</a></td>
    <tr><td><dfn id="event-dragleave" title="event-dragleave"><code>dragleave</code></dfn></td>
     <td><a href="#current-target-element" title="current target element">Previous target element</a></td>
     <td>&#10003; Bubbles</td>
     <td>&mdash;</td>
     <td>Empty</td>
     <td><a href="#effectAllowed-initialization">Same as last event</a></td>
     <td><code title="">none</code></td>
     <td>None</td>
    <tr><td><dfn id="event-dragover" title="event-dragover"><code>dragover</code></dfn></td>
     <td><a href="#current-target-element">Current target element</a></td>
     <td>&#10003; Bubbles</td>
     <td>&#10003; Cancelable</td>
     <td>Empty</td>
     <td><a href="#effectAllowed-initialization">Same as last event</a></td>
     <td><a href="#dropEffect-initialization">Based on <code>effectAllowed</code> value</a></td>
     <td>Reset the <a href="#current-drag-operation">current drag operation</a> to "none"</td>
    <tr><td><dfn id="event-drop" title="event-drop"><code>drop</code></dfn></td>
     <td><a href="#current-target-element">Current target element</a></td>
     <td>&#10003; Bubbles</td>
     <td>&#10003; Cancelable</td>
     <td><code title="dom-datatransfer-getdata"><a href="#dom-datatransfer-getdata">getData()</a></code> returns data set in <code title="dom-dragstart">dragstart</code> event; <code title="dom-datatransfer-files"><a href="#dom-datatransfer-files">files</a></code> returns any files included in the drag operation</td>
     <td><a href="#effectAllowed-initialization">Same as last event</a></td>
     <td><a href="#current-drag-operation">Current drag operation</a></td>
     <td>Varies</td>
    <tr><td><dfn id="event-dragend" title="event-dragend"><code>dragend</code></dfn></td>
     <td><a href="#source-node">Source node</a></td>
     <td>&#10003; Bubbles</td>
     <td>&mdash;</td>
     <td>Empty</td>
     <td><a href="#effectAllowed-initialization">Same as last event</a></td>
     <td><a href="#current-drag-operation">Current drag operation</a></td>
     <td>Varies</td>
    </table><div class="impl">

  <p>The <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code>
  object's contents are empty except for <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> events and <code title="event-drop"><a href="#event-drop">drop</a></code> events, for which the contents are
  set as described in the processing model, below.</p>

  <p id="effectAllowed-initialization">The <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
  attribute must be set to "<code title="">uninitialized</code>" for
  <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> events, and to
  whatever value the field had after the last drag-and-drop event was
  fired for all other events (only counting events fired by the user
  agent for the purposes of the drag-and-drop model described
  below).</p>

  <p id="dropEffect-initialization">The <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute must
  be set to "<code title="">none</code>" for <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code>, <code title="event-drag"><a href="#event-drag">drag</a></code>, and <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code> events (except when stated
  otherwise in the algorithms given in the sections below), to the
  value corresponding to the <a href="#current-drag-operation">current drag operation</a> for
  <code title="event-drop"><a href="#event-drop">drop</a></code> and <code title="event-dragend"><a href="#event-dragend">dragend</a></code> events, and to a value based on
  the <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>
  attribute's value and to the drag-and-drop source, as given by the
  following table, for the remaining events (<code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> and <code title="event-dragover"><a href="#event-dragover">dragover</a></code>):</p>

  <table><thead><tr><th><code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code></th>
     <th><code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code></th>
    </thead><tr><td><code title="">none</code></td>
    <td><code title="">none</code></td>
   <tr><td><code title="">copy</code>, <code title="">copyLink</code>, <code title="">copyMove</code>, <code title="">all</code></td>
    <td><code title="">copy</code></td>
   <tr><td><code title="">link</code>, <code title="">linkMove</code></td>
    <td><code title="">link</code></td>
   <tr><td><code title="">move</code></td>
    <td><code title="">move</code></td>
   <tr><td><code title="">uninitialized</code> when what is being dragged is a selection from a text field</td>
    <td><code title="">move</code></td>
   <tr><td><code title="">uninitialized</code> when what is being dragged is a selection</td>
    <td><code title="">copy</code></td>
   <tr><td><code title="">uninitialized</code> when what is being dragged is an <code><a href="text-level-semantics.html#the-a-element">a</a></code> element with an <code>href</code> attribute</td>
    <td><code title="">link</code></td>
   <tr><td>Any other case</td>
    <td><code title="">copy</code></td>
   </table></div>


  <div class="impl">

  <h4 id="drag-and-drop-processing-model"><span class="secno">7.9.4 </span>Drag-and-drop processing model</h4>

  <p>When the user attempts to begin a drag operation, the user agent
  must first determine what is being dragged. If the drag operation
  was invoked on a selection, then it is the selection that is being
  dragged. Otherwise, it is the first element, going up the ancestor
  chain, starting at the node that the user tried to drag, that has
  the IDL attribute <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> set
  to true. If there is no such element, then nothing is being dragged,
  the drag-and-drop operation is never started, and the user agent
  must not continue with this algorithm.</p>

  <p class="note"><code><a href="embedded-content-1.html#the-img-element">img</a></code> elements and <code><a href="text-level-semantics.html#the-a-element">a</a></code>
  elements with an <code title="attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code>
  attribute have their <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code>
  attribute set to true by default.</p>

  <p>If the user agent determines that something can be dragged, a
  <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event must then be
  fired at the <a href="#source-node">source node</a>.</p>

  <p>The <dfn id="source-node">source node</dfn> depends on the kind of drag and how it
  was initiated. If it is a selection that is being dragged, then the
  <a href="#source-node">source node</a> is the text node that the user started the
  drag on (typically the text node that the user originally
  clicked). If the user did not specify a particular node, for example
  if the user just told the user agent to begin a drag of "the
  selection", then the <a href="#source-node">source node</a> is the first text node
  containing a part of the selection. If it is not a selection that is
  being dragged, then the <a href="#source-node">source node</a> is the element that
  is being dragged.</p>

  <p>Multiple events are fired on the <a href="#source-node">source node</a> during
  the course of the drag-and-drop operation.</p>

  <hr><p>The <dfn id="list-of-dragged-nodes">list of dragged nodes</dfn> also depends on the kind of
  drag. If it is a selection that is being dragged, then the
  <a href="#list-of-dragged-nodes">list of dragged nodes</a> contains, in <a href="infrastructure.html#tree-order">tree
  order</a>, every node that is partially or completely included in
  the selection (including all their ancestors). Otherwise, the
  <a href="#list-of-dragged-nodes">list of dragged nodes</a> contains only the <a href="#source-node">source
  node</a>.</p>

  <hr><p>If it is a selection that is being dragged, the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> member of the
  event must be created with no nodes. Otherwise, it must be created
  containing just the <a href="#source-node">source node</a>. Script can use the
  <code title="dom-DataTransfer-addElement"><a href="#dom-datatransfer-addelement">addElement()</a></code> method
  to add further elements to the list of what is being dragged. (This
  list is only used for rendering the drag feedback.)</p>

  <p>The <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code>
  member of the event also has data added to it, as follows:</p>

  <ul><li>

    <p>If it is a selection that is being dragged, then the user agent
    must add the text of the selection to the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> member,
    associated with the <code title="">text/plain</code> format.</p>

   </li>

   <li>

    <p>If files are being dragged, then the user agent must add the
    files to the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> member's
    <code title="dom-datatransfer-files"><a href="#dom-datatransfer-files">files</a></code> attribute's
    <code>FileList</code> object. (Dragging files can only happen from
    outside a <a href="browsers.html#browsing-context">browsing context</a>, for example from a file
    system manager application, and thus the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event is actually implied
    in this case.)</p>

   </li>

   <li>

    <p>The user agent must take the <a href="#list-of-dragged-nodes">list of dragged nodes</a>
    and <a href="converting-html-to-other-formats.html#extracting-json" title="extracting JSON">extract the microdata from those
    nodes into a JSON form</a>, and then must add the resulting
    string to the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> member,
    associated with the <code title="">application/microdata+json</code> format.</p>

   </li>

<!-- v2: deal with multiple vCards -->
<!--
   <li>

    <p>The user agent must take the <span>list of dragged nodes</span>
    and <span title="extracting a vCard">extract the vCard data from
    those nodes</span>, and then must add the resulting string to the
    <code title="dom-DragEvent-dataTransfer">dataTransfer</code>
    member, associated with the <code
    title="">text/directory;profile=vcard</code> format.</p>

   </li>

   <li>

    <p>The user agent must take the <span>list of dragged nodes</span>
    and <span title="extracting vEvent data">extract the vEvent data
    from those nodes</span>, and then must add the resulting string to
    the <code title="dom-DragEvent-dataTransfer">dataTransfer</code>
    member, associated with the <code
    title="">text/calendar;component=vevent</code> format.</p>

   </li>
-->

   <!-- v2: text/html -->

   <li>

    <p>The user agent must run the following steps:</p>

    <ol><li><p>Let <var title="">urls</var> be an empty list of <a href="urls.html#absolute-url" title="absolute URL">absolute URLs</a>.</li>

     <li>

      <p>For each <var title="">node</var> in <var title="">nodes</var>:</p>

      <dl><dt>If the node is an <code><a href="text-level-semantics.html#the-a-element">a</a></code> element with an <code title="attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code></dt>

       <dd>Add to <var title="">urls</var> the result of <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> the element's <code title="attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code> content attribute relative to
       the element.</dd>

       <dt>If the node is an <code><a href="embedded-content-1.html#the-img-element">img</a></code> element with an <code title="attr-img-src"><a href="embedded-content-1.html#attr-img-src">src</a></code></dt>

       <dd>Add to <var title="">urls</var> the result of <a href="urls.html#resolve-a-url" title="resolve a url">resolving</a> the element's <code title="attr-img-src"><a href="embedded-content-1.html#attr-img-src">src</a></code> content attribute relative to the
       element.</dd>

       <!-- v2: more -->

      </dl></li>

     <li><p>If <var title="">urls</var> is still empty, abort these
     steps.</li>

     <li><p>Let <var title="">url string</var> be the result of
     concatenating the strings in <var title="">urls</var>, in the
     order they were added, separated by a U+000D CARRIAGE RETURN
     U+000A LINE FEED character pair (CRLF).</li>

     <li><p>Add <var title="">url string</var> to the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> member,
     associated with the <code title="">text/uri-list</code>
     format.</li>

    </ol></li>

  </ul><hr><p>If the event is canceled, then the drag-and-drop operation must
  not occur; the user agent must not continue with this algorithm.</p>

  <p>If it is not canceled, then the drag-and-drop operation must be
  initiated.</p>

  <p class="note">Since events with no event listeners registered are,
  almost by definition, never canceled, drag-and-drop is always
  available to the user if the author does not specifically prevent
  it.</p>

  <p id="base-dnd-feedback">The drag-and-drop feedback must be
  generated from the first of the following sources that is
  available:</p>

  <ol><li>The element specified in the last call to the <code title="dom-DataTransfer-setDragImage"><a href="#dom-datatransfer-setdragimage">setDragImage()</a></code> method
   of the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code>
   object of the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event,
   if the method was called. In visual media, if this is used, the
   <var title="">x</var> and <var title="">y</var> arguments that were
   passed to that method should be used as hints for where to put the
   cursor relative to the resulting image. The values are expressed as
   distances in CSS pixels from the left side and from the top side of
   the image respectively. <a href="references.html#refsCSS">[CSS]</a></li>

   <li>The elements that were added to the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> object, both
   before the event was fired, and during the handling of the event
   using the <code title="dom-DataTransfer-addElement"><a href="#dom-datatransfer-addelement">addElement()</a></code>
   method, if any such elements were indeed added.</li>

   <li>The selection that the user is dragging.</li>

  </ol><p>The user agent must take a note of <a href="#dom-datatransfer-setdata" title="dom-DataTransfer-setData">the data that was placed</a> in
  the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code>
  object. This data will be made available again when the <code title="event-drop"><a href="#event-drop">drop</a></code> event is fired.</p>

  <p>From this point until the end of the drag-and-drop operation,
  device input events (e.g. mouse and keyboard events) must be
  suppressed. In addition, the user agent must track all DOM changes
  made during the drag-and-drop operation, and add them to its <a href="#undo">undo history</a> as one atomic operation once the
  drag-and-drop operation has ended.</p>

  <p>During the drag operation, the element directly indicated by the
  user as the drop target is called the <dfn id="immediate-user-selection">immediate user
  selection</dfn>. (Only elements can be selected by the user; other
  nodes must not be made available as drop targets.)

  However, the <a href="#immediate-user-selection">immediate user selection</a> is not
  necessarily the <dfn id="current-target-element">current target element</dfn>, which is the
  element currently selected for the drop part of the drag-and-drop
  operation.

  The <a href="#immediate-user-selection">immediate user selection</a> changes as the user
  selects different elements (either by pointing at them with a
  pointing device, or by selecting them in some other way). The
  <a href="#current-target-element">current target element</a> changes when the <a href="#immediate-user-selection">immediate
  user selection</a> changes, based on the results of event
  listeners in the document, as described below.</p>

  <p>Both the <a href="#current-target-element">current target element</a> and the
  <a href="#immediate-user-selection">immediate user selection</a> can be null, which means no
  target element is selected. They can also both be elements in other
  (DOM-based) documents, or other (non-Web) programs altogether. (For
  example, a user could drag text to a word-processor.) The
  <a href="#current-target-element">current target element</a> is initially null.</p>

  <p>In addition, there is also a <dfn id="current-drag-operation">current drag operation</dfn>,
  which can take on the values "none", "copy", "link", and "move".
  Initially, it has the value "none". It is updated by the user agent
  as described in the steps below.</p>

  <p>User agents must, every 350ms (&plusmn;200ms), perform the
  following steps in sequence. (If the user agent is still performing
  the previous iteration of the sequence when the next iteration
  becomes due, the user agent must not execute the overdue iteration,
  effectively "skipping missed frames" of the drag-and-drop
  operation.)</p>

  <ol><li>

    <p>First, the user agent must fire a <code title="event-drag"><a href="#event-drag">drag</a></code> event at the <a href="#source-node">source
    node</a>. If this event is canceled, the user agent must set
    the <a href="#current-drag-operation">current drag operation</a> to none (no drag
    operation).</p>

   </li>

   <li>

    <p>Next, if the <code title="event-drag"><a href="#event-drag">drag</a></code> event was not
    canceled and the user has not ended the drag-and-drop operation,
    the user agent must check the state of the drag-and-drop
    operation, as follows:</p>

    <ol><li>

      <p>First, if the user is indicating a different <a href="#immediate-user-selection">immediate
      user selection</a> than during the last iteration (or if this
      is the first iteration), and if this <a href="#immediate-user-selection">immediate user
      selection</a> is not the same as the <a href="#current-target-element">current target
      element</a>, then the <a href="#current-target-element">current target element</a> must
      be updated, as follows:</p>

      <dl class="switch"><dt>If the new <a href="#immediate-user-selection">immediate user selection</a> is null, or
       is in a non-DOM document or application</dt>

       <dd><p>The user agent must set the <a href="#current-target-element">current target
       element</a> to the same value.</dd>

       <dt>Otherwise</dt>

       <dd>

        <p>The user agent must fire a <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> event at the
        <a href="#immediate-user-selection">immediate user selection</a>.</p>

        <p>If the event is canceled, then the <a href="#current-target-element">current target
        element</a> must be set to the <a href="#immediate-user-selection">immediate user
        selection</a>.</p>

        <p>Otherwise, the user agent must act as follows:</p>

        <dl class="switch"><dt>If the <a href="#current-target-element">current target element</a> is a text
         field (e.g. <code><a href="the-button-element.html#the-textarea-element">textarea</a></code>, or an <code><a href="the-input-element.html#the-input-element">input</a></code>
         element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code>
         attribute is in the <a href="states-of-the-type-attribute.html#text-state-and-search-state" title="attr-input-type-text">Text</a> state) or an
         <a href="editing.html#editable">editable</a> element</dt>

         <dd><p>The <a href="#current-target-element">current target element</a> must be set to
         the <a href="#immediate-user-selection">immediate user selection</a> anyway.</dd>

         <dt>If the <a href="#current-target-element">current target element</a> is 
         <a href="dom.html#the-body-element">the body element</a></dt>

         <dd><p>The <a href="#current-target-element">current target element</a> is left
         unchanged.</dd>

         <dt>Otherwise</dt>
         
         <dd><p>The user agent must fire a <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code> event at <a href="dom.html#the-body-element">the
         body element</a>, and the <a href="#current-target-element">current target
         element</a> must be set to <a href="dom.html#the-body-element">the body element</a>,
         regardless of whether that event was canceled or not. (If
         <a href="dom.html#the-body-element">the body element</a> is null, then the <a href="#current-target-element">current
         target element</a> would be set to null too in this case,
         it wouldn't be set to the <code>Document</code>
         object.)</dd>

        </dl></dd>

      </dl></li>

     <li>

      <p>If the previous step caused the <a href="#current-target-element">current target
      element</a> to change, and if the previous target element was
      not null or a part of a non-DOM document, the user agent must fire
      a <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code> event at the
      previous target element.</p>

     </li>

     <li>

      <p>If the <a href="#current-target-element">current target element</a> is a DOM element,
      the user agent must fire a <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event at this <a href="#current-target-element">current
      target element</a>.</p>

      <p>If the <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event is
      not canceled, the user agent must act as follows:</p>

      <dl class="switch"><dt>If the <a href="#current-target-element">current target element</a> is a text field
       (e.g. <code><a href="the-button-element.html#the-textarea-element">textarea</a></code>, or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
       whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
       the <a href="states-of-the-type-attribute.html#text-state-and-search-state" title="attr-input-type-text">Text</a> state) or an
       <a href="editing.html#editable">editable</a> element</dt>

       <dd><p>The user agent must set the <a href="#current-drag-operation">current drag
       operation</a> to either "copy" or "move", as appropriate
       given the platform conventions.</dd>

       <dt>Otherwise</dt>

       <dd><p>The user agent must reset the <a href="#current-drag-operation">current drag
       operation</a> to "none".</dd>

      </dl><p>Otherwise (if the <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event <em>is</em>
      canceled), the <a href="#current-drag-operation">current drag operation</a> must be set
      based on the values the <code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code> and
      <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code>
      attributes of the <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> object
      had after the event was handled, as per the following table:</p>

      <table><thead><tr><th><code title="dom-DataTransfer-effectAllowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code></th>
         <th><code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code></th>
         <th>Drag operation</th>
        </thead><tr><td><code title="">uninitialized</code>, <code title="">copy</code>, <code title="">copyLink</code>, <code title="">copyMove</code>, or <code title="">all</code></td>
        <td><code title="">copy</code></td>
        <td>"copy"</td>
       <tr><td><code title="">uninitialized</code>, <code title="">link</code>, <code title="">copyLink</code>, <code title="">linkMove</code>, or <code title="">all</code></td>
        <td><code title="">link</code></td>
        <td>"link"</td>
       <tr><td><code title="">uninitialized</code>, <code title="">move</code>, <code title="">copyMove</code>, <code title="">linkMove</code>, or <code title="">all</code></td>
        <td><code title="">move</code></td>
        <td>"move"</td>
       <tr><td colspan="2">Any other case</td>
        <td>"none"</td>
       </table><p>Then, regardless of whether the <code title="event-dragover"><a href="#event-dragover">dragover</a></code> event was canceled or
      not, the drag feedback (e.g. the mouse cursor) must be updated
      to match the <a href="#current-drag-operation">current drag operation</a>, as
      follows:</p>

      <table><thead><tr><th>Drag operation</th>
         <th>Feedback</th>
        </thead><tr><td>"copy"</td>
        <td>Data will be copied if dropped here.</td>
       <tr><td>"link"</td>
        <td>Data will be linked if dropped here.</td>
       <tr><td>"move"</td>
        <td>Data will be moved if dropped here.</td>
       <tr><td>"none"</td>
        <td>No operation allowed, dropping here will cancel the drag-and-drop operation.</td>
       </table></li>

     <li>

      <p>Otherwise, if the <a href="#current-target-element">current target element</a> is not a
      DOM element, the user agent must use platform-specific mechanisms
      to determine what drag operation is being performed (none, copy,
      link, or move). This sets the <em>current drag operation</em>.</p>

     </li>

    </ol></li>

   <li>

    <p>Otherwise, if the user ended the drag-and-drop operation (e.g.
    by releasing the mouse button in a mouse-driven drag-and-drop
    interface), or if the <code title="event-drag"><a href="#event-drag">drag</a></code> event
    was canceled, then this will be the last iteration. The user agent
    must execute the following steps, then stop looping.</p>

    <ol><li>

      <p>If the <a href="#current-drag-operation">current drag operation</a> is none (no drag
      operation), or, if the user ended the drag-and-drop operation by
      canceling it (e.g. by hitting the <kbd>Escape</kbd> key), or if
      the <a href="#current-target-element">current target element</a> is null, then the drag
      operation failed. If the <a href="#current-target-element">current target element</a> is
      a DOM element, the user agent must fire a <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code> event at it; otherwise,
      if it is not null, it must use platform-specific conventions for
      drag cancellation.</p>

     </li>

     <li>

      <p>Otherwise, the drag operation was as success. If the
      <a href="#current-target-element">current target element</a> is a DOM element, the user
      agent must fire a <code title="event-drop"><a href="#event-drop">drop</a></code> event at
      it; otherwise, it must use platform-specific conventions for
      indicating a drop.</p>

      <p>When the target is a DOM element, the <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute
      of the event's <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> object
      must be given the value representing the <a href="#current-drag-operation">current drag
      operation</a> (<code title="">copy</code>, <code title="">link</code>, or <code title="">move</code>), and the
      object must be set up so that the <code title="dom-DataTransfer-getData"><a href="#dom-datatransfer-getdata">getData()</a></code> method will
      return the data that was added during the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event, and the <code title="dom-datatransfer-files"><a href="#dom-datatransfer-files">files</a></code> attribute will
      return a <code>FileList</code> object with any files that were
      dragged.</p>

      <p>If the event is canceled, the <a href="#current-drag-operation">current drag
      operation</a> must be set to the value of the <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute
      of the event's <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> object as
      it stood after the event was handled.</p>

      <p>Otherwise, the event is not canceled, and the user agent must
      perform the event's default action, which depends on the exact
      target as follows:</p>

      <dl class="switch"><dt>If the <a href="#current-target-element">current target element</a> is a text field
       (e.g. <code><a href="the-button-element.html#the-textarea-element">textarea</a></code>, or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
       whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
       the <a href="states-of-the-type-attribute.html#text-state-and-search-state" title="attr-input-type-text">Text</a> state) or an
       <a href="editing.html#editable">editable</a> element</dt>

       <dd>The user agent must insert the data associated with the
       <code>text/plain</code> format, if any, into the text field or
       <a href="editing.html#editable">editable</a> element in a manner consistent with
       platform-specific conventions (e.g. inserting it at the current
       mouse cursor position, or inserting it at the end of the
       field).</dd>

       <dt>Otherwise</dt>

       <dd>Reset the <a href="#current-drag-operation">current drag operation</a> to
       "none".</dd>

      </dl></li>

     <li>

      <p>Finally, the user agent must fire a <code title="event-dragend"><a href="#event-dragend">dragend</a></code> event at the <a href="#source-node">source
      node</a>, with the <code title="dom-DataTransfer-dropEffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code> attribute
      of the event's <code title="dom-DragEvent-dataTransfer"><a href="#dom-dragevent-datatransfer">dataTransfer</a></code> object
      being set to the value corresponding to the <a href="#current-drag-operation">current drag
      operation</a>.</p>

      <p class="note">The <a href="#current-drag-operation">current drag operation</a> can
      change during the processing of the <code title="event-drop"><a href="#event-drop">drop</a></code> event, if one was fired.</p>

      <p>The event is not cancelable. After the event has been
      handled, the user agent must act as follows:</p>

      <dl class="switch"><dt>If the <a href="#current-target-element">current target element</a> is a text field
       (e.g. <code><a href="the-button-element.html#the-textarea-element">textarea</a></code>, or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
       whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
       the <a href="states-of-the-type-attribute.html#text-state-and-search-state" title="attr-input-type-text">Text</a> state), and
       a <code title="event-drop"><a href="#event-drop">drop</a></code> event was fired in the
       previous step, and the <a href="#current-drag-operation">current drag operation</a> is
       "move", and the source of the drag-and-drop operation is a
       selection in the DOM</dt>

       <dd>The user agent should delete the range representing the
       dragged selection from the DOM.</dd>

       <dt>If the <a href="#current-target-element">current target element</a> is a text field
       (e.g. <code><a href="the-button-element.html#the-textarea-element">textarea</a></code>, or an <code><a href="the-input-element.html#the-input-element">input</a></code> element
       whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in
       the <a href="states-of-the-type-attribute.html#text-state-and-search-state" title="attr-input-type-text">Text</a> state), and
       a <code title="event-drop"><a href="#event-drop">drop</a></code> event was fired in the
       previous step, and the <a href="#current-drag-operation">current drag operation</a> is
       "move", and the source of the drag-and-drop operation is a
       selection in a text field</dt>

       <dd>The user agent should delete the dragged selection from the
       relevant text field.</dd>

       <dt>Otherwise</dt>

       <dd>The event has no default action.</dd>

      </dl></li>

    </ol></li>

  </ol></div>


  <div class="impl">

  <h5 id="when-the-drag-and-drop-operation-starts-or-ends-in-another-document"><span class="secno">7.9.4.1 </span>When the drag-and-drop operation starts or ends in another
  document</h5>

  <p>The model described above is independent of which
  <code>Document</code> object the nodes involved are from; the events
  must be fired as described above and the rest of the processing
  model must be followed as described above, irrespective of how many
  documents are involved in the operation.</p>

  <!-- should we mention that you shouldn't include the view from the
  source in the events to the target, or is that obvious enough from
  the requirements in the event section above? -->

  </div>



  <div class="impl">

  <h5 id="when-the-drag-and-drop-operation-starts-or-ends-in-another-application"><span class="secno">7.9.4.2 </span>When the drag-and-drop operation starts or ends in another
  application</h5>

  <p>If the drag is initiated in another application, the <a href="#source-node">source
  node</a> is not a DOM node, and the user agent must use
  platform-specific conventions instead when the requirements above
  involve the source node. User agents in this situation must act as
  if the dragged data had been added to the <code><a href="#datatransfer">DataTransfer</a></code>
  object when the drag started, even though no <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event was actually fired;
  user agents must similarly use platform-specific conventions when
  deciding on what drag feedback to use.</p>

  <p>If a drag is started in a document but ends in another
  application, then the user agent must instead replace the parts of
  the processing model relating to handling the <em>target</em>
  according to platform-specific conventions.</p>

  <p>In any case, scripts running in the context of the document must
  not be able to distinguish the case of a drag-and-drop operation
  being started or ended in another application from the case of a
  drag-and-drop operation being started or ended in another document
  from another domain.</p>

  </div>


  <h4 id="the-draggable-attribute"><span class="secno">7.9.5 </span>The <dfn title="attr-draggable"><code>draggable</code></dfn> attribute</h4>

  <p>All <a href="infrastructure.html#html-elements">HTML elements</a> may have the <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute set. The
  <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> attribute is an
  <a href="common-microsyntaxes.html#enumerated-attribute">enumerated attribute</a>. It has three states. The first
  state is <i>true</i> and it has the keyword <code title="">true</code>. The second state is <i>false</i> and it has
  the keyword <code title="">false</code>. The third state is
  <i>auto</i>; it has no keywords but it is the <i>missing value
  default</i>.</p>

  <p>The <i>true</i> state means the element is draggable; the
  <i>false</i> state means that it is not. The <i>auto</i> state
  uses the default behavior of the user agent.</p>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns true if the element is draggable; otherwise, returns
    false.</p>

    <p>Can be set, to override the default and set the <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-draggable" title="dom-draggable"><code>draggable</code></dfn> IDL
  attribute, whose value depends on the content attribute's in the way
  described below, controls whether or not the element is
  draggable. Generally, only text selections are draggable, but
  elements whose <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL
  attribute is true become draggable as well.</p>

  <p>If an element's <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code>
  content attribute has the state <i>true</i>, the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute must return
  true.</p>

  <p>Otherwise, if the element's <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute has the
  state <i>false</i>, the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute must return
  false.</p>

  <p>Otherwise, the element's <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute has the
  state <i>auto</i>. If the element is an <code><a href="embedded-content-1.html#the-img-element">img</a></code> element,
  or, if the element is an <code><a href="text-level-semantics.html#the-a-element">a</a></code> element with an <code title="attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code> content attribute, the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute must return
  true.</p>

  <p>Otherwise, the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> DOM
  must return false.</p>

  <p>If the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute
  is set to the value false, the <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code> content attribute must be
  set to the literal value <code title="">false</code>. If the <code title="dom-draggable"><a href="#dom-draggable">draggable</a></code> IDL attribute is set to the
  value true, the <code title="attr-draggable"><a href="#the-draggable-attribute">draggable</a></code>
  content attribute must be set to the literal value <code title="">true</code>.</p>

  </div>



  <h4 id="copy-and-paste"><span class="secno">7.9.6 </span>Copy and paste</h4>

  <p>Copy-and-paste is a form of drag-and-drop: the "copy" part is
  equivalent to dragging content to another application (the
  "clipboard"), and the "paste" part is equivalent to dragging content
  <em>from</em> another application.</p>

  <p>Select-and-paste (a model used by mouse operations in the X
  Window System) is equivalent to a drag-and-drop operation where the
  source is the selection.</p>


  <div class="impl">

  <h5 id="copy-to-clipboard"><span class="secno">7.9.6.1 </span>Copy to clipboard</h5>

  <p>When the user invokes a copy operation, the user agent must act
  as if the user had invoked a drag on the current selection. If the
  drag-and-drop operation initiates, then the user agent must act as
  if the user had indicated (as the <a href="#immediate-user-selection">immediate user
  selection</a>) a hypothetical application representing the
  clipboard. Then, the user agent must act as if the user had ended
  the drag-and-drop operation without canceling it. If the
  drag-and-drop operation didn't get canceled, the user agent should
  then follow the relevant platform-specific conventions for copy
  operations (e.g. updating the clipboard).</p>

  <p>The events involved in this process are the <code title="event-drag"><a href="#event-drag">drag</a></code>, <code title="event-dragend"><a href="#event-dragend">dragend</a></code>, and <code title="event-drop"><a href="#event-drop">drop</a></code> events.</p>


  <h5 id="cut-to-clipboard"><span class="secno">7.9.6.2 </span>Cut to clipboard</h5>

  <p>When the user invokes a cut operation, the user agent must act as
  if the user had invoked a copy operation (see the previous section),
  followed, if the copy was completed successfully, by <a href="editing.html#contenteditable-delete">a selection delete operation</a>.</p>

  <p>The events involved in this process are the <code title="event-drag"><a href="#event-drag">drag</a></code>, <code title="event-dragend"><a href="#event-dragend">dragend</a></code>, and <code title="event-drop"><a href="#event-drop">drop</a></code> events.</p>


  <h5 id="paste-from-clipboard"><span class="secno">7.9.6.3 </span>Paste from clipboard</h5>

  <p>When the user invokes a clipboard paste operation, the user agent
  must act as if the user had invoked a drag on a hypothetical
  application representing the clipboard, setting the data associated
  with the drag as the content on the clipboard (in whatever formats
  are available).</p>

  <p>Then, the user agent must act as if the user had indicated (as
  the <a href="#immediate-user-selection">immediate user selection</a>) the element with the
  keyboard focus, and then ended the drag-and-drop operation without
  canceling it.</p>

  <p>The events involved in this process are the <code title="event-dragenter"><a href="#event-dragenter">dragenter</a></code>, <code title="event-dragover"><a href="#event-dragover">dragover</a></code>, <code title="event-dragleave"><a href="#event-dragleave">dragleave</a></code>, and <code title="event-drop"><a href="#event-drop">drop</a></code> events.</p>


  <h5 id="paste-from-selection"><span class="secno">7.9.6.4 </span>Paste from selection</h5>

  <p>When the user invokes a selection paste operation, the user agent
  must act as if the user had invoked a drag on the current selection,
  then indicated (as the <a href="#immediate-user-selection">immediate user selection</a>) the
  element with the keyboard focus, and then ended the drag-and-drop
  operation without canceling it.</p>

  <p>All the drag-and-drop events can be involved in this process.</p>

  </div>



  <div class="impl">

  <h4 id="security-risks-in-the-drag-and-drop-model"><span class="secno">7.9.7 </span>Security risks in the drag-and-drop model</h4>

  <p>User agents must not make the data added to the
  <code><a href="#datatransfer">DataTransfer</a></code> object during the <code title="event-dragstart"><a href="#event-dragstart">dragstart</a></code> event available to scripts
  until the <code title="event-drop"><a href="#event-drop">drop</a></code> event, because
  otherwise, if a user were to drag sensitive information from one
  document to a second document, crossing a hostile third document in
  the process, the hostile document could intercept the data.</p>

  <p>For the same reason, user agents must consider a drop to be
  successful only if the user specifically ended the drag operation
  &mdash; if any scripts end the drag operation, it must be considered
  unsuccessful (canceled) and the <code title="event-drop"><a href="#event-drop">drop</a></code>
  event must not be fired.</p>

  <p>User agents should take care to not start drag-and-drop
  operations in response to script actions. For example, in a
  mouse-and-window environment, if a script moves a window while the
  user has his mouse button depressed, the UA would not consider that
  to start a drag. This is important because otherwise UAs could cause
  data to be dragged from sensitive sources and dropped into hostile
  documents without the user's consent.</p>

  </div>


  <h3 id="undo"><span class="secno">7.10 </span><dfn>Undo history</dfn></h3>

  <div class="impl">

  <h4 id="definitions-2"><span class="secno">7.10.1 </span>Definitions</h4>

  <p>The user agent must associate an <dfn id="undo-transaction-history">undo transaction
  history</dfn> with each <code><a href="dom.html#htmldocument">HTMLDocument</a></code> object.</p>

  <p>The <a href="#undo-transaction-history">undo transaction history</a> is a list of
  entries. The entries are of two types: <a href="#dom-changes">DOM changes</a> and
  <a href="#undo-object" title="undo object">undo objects</a>.</p>

  <p>Each <dfn id="dom-changes">DOM changes</dfn> entry in the <a href="#undo-transaction-history">undo transaction
  history</a> consists of batches of one or more of the
  following:</p>

  <ul><li>Changes to the content attributes of an <code>Element</code>
   node.</li>

   <li>Changes to the DOM hierarchy of nodes that are descendants of
   the <code><a href="dom.html#htmldocument">HTMLDocument</a></code> object (<code>parentNode</code>,
   <code>childNodes</code>).</li>

   <li>Changes to internal state, such as a form control's <a href="association-of-controls-and-forms.html#concept-fe-value" title="concept-fe-value">value</a> or <a href="the-input-element.html#concept-input-checked-dirty-flag" title="concept-input-checked-dirty-flag">dirty checkedness
   flag</a>.</li>

  </ul><p><dfn id="undo-object">Undo object</dfn> entries consist of objects representing
  state that scripts running in the document are managing. For
  example, a Web mail application could use an <a href="#undo-object">undo
  object</a> to keep track of the fact that a user has moved an
  e-mail to a particular folder, so that the user can undo the
  action and have the e-mail return to its former location.</p>

  <p>Broadly speaking, <a href="#dom-changes">DOM changes</a> entries are handled by
  the UA in response to user edits of form controls and <a href="editing.html#editing-host" title="editing host">editing hosts</a> on the page, and
  <a href="#undo-object">undo object</a> entries are handled by script in response
  to higher-level user actions (such as interactions with server-side
  state, or in the implementation of a drawing tool).</p>

  </div>


  <h4 id="the-undomanager-interface"><span class="secno">7.10.2 </span>The <code><a href="#undomanager">UndoManager</a></code> interface</h4>

  <p>To manage <a href="#undo-object">undo object</a> entries in the <a href="#undo-transaction-history">undo
  transaction history</a>, the <code><a href="#undomanager">UndoManager</a></code>
  interface can be used:</p>

  <pre class="idl">interface <dfn id="undomanager">UndoManager</dfn> {
  readonly attribute unsigned long <a href="#dom-undomanager-length" title="dom-UndoManager-length">length</a>;
  getter any <a href="#dom-undomanager-item" title="dom-UndoManager-item">item</a>(in unsigned long index);
  readonly attribute unsigned long <a href="#dom-undomanager-position" title="dom-UndoManager-position">position</a>;
  unsigned long <a href="#dom-undomanager-add" title="dom-UndoManager-add">add</a>(in any data, in DOMString title);
  void <a href="#dom-undomanager-remove" title="dom-UndoManager-remove">remove</a>(in unsigned long index);
  void <a href="#dom-undomanager-clearundo" title="dom-UndoManager-clearUndo">clearUndo</a>();
  void <a href="#dom-undomanager-clearredo" title="dom-UndoManager-clearRedo">clearRedo</a>();
};</pre>

  <dl class="domintro"><dt><var title="">window</var> . <code title="dom-undoManager"><a href="#dom-undomanager">undoManager</a></code></dt>

   <dd>

    <p>Returns the <code><a href="#undomanager">UndoManager</a></code> object.</p>

   </dd>

   <dt><var title="">undoManager</var> . <code title="dom-UndoManager-length"><a href="#dom-undomanager-length">length</a></code></dt>
   <dd>

    <p>Returns the number of entries in the undo history.</p>

   </dd>

   <dt><var title="">data</var> = <var title="">undoManager</var> . <code title="dom-UndoManager-item"><a href="#dom-undomanager-item">item</a></code>(<var title="">index</var>)</dt>
   <dt><var title="">undoManager</var>[<var title="">index</var>]</dt>
   <dd>

    <p>Returns the entry with index <var title="">index</var> in the undo history.</p>

    <p>Returns null if <var title="">index</var> is out of range.</p>

   </dd>

   <dt><var title="">undoManager</var> . <code title="dom-UndoManager-position"><a href="#dom-undomanager-position">position</a></code></dt>
   <dd>

    <p>Returns the number of the current entry in the undo history. (Entries at and past this point are <em>redo</em> entries.)</p>

   </dd>

   <dt><var title="">undoManager</var> . <code title="dom-UndoManager-add"><a href="#dom-undomanager-add">add</a></code>(<var title="">data</var>, <var title="">title</var>)</dt>
   <dd>

    <p>Adds the specified entry to the undo history.</p>

   </dd>

   <dt><var title="">undoManager</var> . <code title="dom-UndoManager-remove"><a href="#dom-undomanager-remove">remove</a></code>(<var title="">index</var>)</dt>
   <dd>

    <p>Removes the specified entry to the undo history.</p>

    <p>Throws an <code><a href="urls.html#index_size_err">INDEX_SIZE_ERR</a></code> exception if the given index is out of range.</p>

   </dd>

   <dt><var title="">undoManager</var> . <code title="dom-UndoManager-clearUndo"><a href="#dom-undomanager-clearundo">clearUndo</a></code>()</dt>
   <dd>

    <p>Removes all entries before the current position in the undo history.</p>

   </dd>

   <dt><var title="">undoManager</var> . <code title="dom-UndoManager-clearRedo"><a href="#dom-undomanager-clearredo">clearRedo</a></code>()</dt>
   <dd>

    <p>Removes all entries at and after the current position in the undo history.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-undomanager" title="dom-undoManager"><code>undoManager</code></dfn>
  attribute of the <code><a href="browsers.html#window">Window</a></code> interface must return the
  object implementing the <code><a href="#undomanager">UndoManager</a></code> interface for that
  <code><a href="browsers.html#window">Window</a></code> object's associated
  <code><a href="dom.html#htmldocument">HTMLDocument</a></code> object.</p>

  <p><code><a href="#undomanager">UndoManager</a></code> objects represent their document's
  <a href="#undo-transaction-history">undo transaction history</a>. Only <a href="#undo-object">undo object</a>
  entries are visible with this API, but this does not mean that
  <a href="#dom-changes">DOM changes</a> entries are absent from the <a href="#undo-transaction-history">undo
  transaction history</a>.</p>

  <p>The <dfn id="dom-undomanager-length" title="dom-UndoManager-length"><code>length</code></dfn>
  attribute must return the number of <a href="#undo-object">undo object</a> entries
  in the <a href="#undo-transaction-history">undo transaction history</a>. This is the <var title="dom-UndoManager-length"><a href="#dom-undomanager-length">length</a></var>.</p>

  <p>The object's <span>indices of the supported indexed
  properties</span> are the numbers in the range zero to <span title=""><var title="dom-UndoManager-length"><a href="#dom-undomanager-length">length</a></var>-1</span>, unless the
  <var title="dom-UndoManager-length"><a href="#dom-undomanager-length">length</a></var> is zero, in which
  case there are no <span>supported indexed properties</span>.</p>

  <p>The <dfn id="dom-undomanager-item" title="dom-UndoManager-item"><code>item(<var title="">n</var>)</code></dfn> method must return the <var title="">n</var>th <a href="#undo-object">undo object</a> entry in the <a href="#undo-transaction-history">undo
  transaction history</a>, if there is one, or null otherwise.</p>

  <p>The <a href="#undo-transaction-history">undo transaction history</a> has a <dfn id="undo-position" title="undo
  position">current position</dfn>. This is the position between two
  entries in the <a href="#undo-transaction-history">undo transaction history</a>'s list where
  the previous entry represents what needs to happen if the user
  invokes the "undo" command (the "undo" side, lower numbers), and the
  next entry represents what needs to happen if the user invokes the
  "redo" command (the "redo" side, higher numbers).</p>

  <p>The <dfn id="dom-undomanager-position" title="dom-UndoManager-position"><code>position</code></dfn>
  attribute must return the index of the <a href="#undo-object">undo object</a>
  entry nearest to the <a href="#undo-position">undo position</a>, on the "redo"
  side. If there are no <a href="#undo-object">undo object</a> entries on the "redo"
  side, then the attribute must return the same as the <code title="dom-UndoManager-length"><a href="#dom-undomanager-length">length</a></code> attribute. If there are
  no <a href="#undo-object">undo object</a> entries on the "undo" side of the
  <a href="#undo-position">undo position</a>, the <code title="dom-UndoManager-position"><a href="#dom-undomanager-position">position</a></code> attribute returns
  zero.</p>

  <p class="note">Since the <a href="#undo-transaction-history">undo transaction history</a>
  contains both <a href="#undo-object">undo object</a> entries and <a href="#dom-changes">DOM
  changes</a> entries, but the <code title="dom-UndoManager-position"><a href="#dom-undomanager-position">position</a></code> attribute only
  returns indices relative to <a href="#undo-object">undo object</a> entries, it is
  possible for several "undo" or "redo" actions to be performed
  without the value of the <code title="dom-UndoManager-position"><a href="#dom-undomanager-position">position</a></code> attribute
  changing.</p>

  <p>The <dfn id="dom-undomanager-add" title="dom-UndoManager-add"><code>add(<var title="">data</var>,
  <var title="">title</var>)</code></dfn> method's behavior depends on the
  current state. Normally, it must insert the <var title="">data</var> object
  passed as an argument into the <a href="#undo-transaction-history">undo transaction history</a>
  immediately before the <a href="#undo-position">undo position</a>, optionally
  remembering the given <var title="">title</var> to use in the UI. If the
  method is called <a href="#undo:-moving-back-in-the-undo-transaction-history" title="do-undo">during an undo
  operation</a>, however, the object must instead be added
  immediately <em>after</em> the <a href="#undo-position">undo position</a>.</p>

  <p>If the method is called and there is neither <a href="#undo:-moving-back-in-the-undo-transaction-history" title="do-undo">an undo operation in progress</a> nor <a href="#redo:-moving-forward-in-the-undo-transaction-history" title="do-redo">a redo operation in progress</a> then any entries
  in the <a href="#undo-transaction-history">undo transaction history</a> after the <a href="#undo-position">undo
  position</a> must be removed (as if <code title="dom-UndoManager-clearRedo"><a href="#dom-undomanager-clearredo">clearRedo()</a></code> had been
  called).</p>

  <p>The <dfn id="dom-undomanager-remove" title="dom-UndoManager-remove"><code>remove(<var title="">index</var>)</code></dfn> method must remove the <a href="#undo-object">undo
  object</a> entry with the specified <var title="">index</var>. If
  the index is less than zero or greater than or equal to <code title="dom-UndoManager-length"><a href="#dom-undomanager-length">length</a></code> then the method must
  raise an <code><a href="urls.html#index_size_err">INDEX_SIZE_ERR</a></code> exception. <a href="#dom-changes">DOM
  changes</a> entries are unaffected by this method.</p>

  <p>The <dfn id="dom-undomanager-clearundo" title="dom-UndoManager-clearUndo"><code>clearUndo()</code></dfn>
  method must remove all entries in the <a href="#undo-transaction-history">undo transaction
  history</a> before the <a href="#undo-position">undo position</a>, be they
  <a href="#dom-changes">DOM changes</a> entries or <a href="#undo-object">undo object</a>
  entries.</p>

  <p>The <dfn id="dom-undomanager-clearredo" title="dom-UndoManager-clearRedo"><code>clearRedo()</code></dfn>
  method must remove all entries in the <a href="#undo-transaction-history">undo transaction
  history</a> after the <a href="#undo-position">undo position</a>, be they
  <a href="#dom-changes">DOM changes</a> entries or <a href="#undo-object">undo object</a>
  entries.</p>

  </div>


  <div class="impl">

  <h4 id="undo:-moving-back-in-the-undo-transaction-history"><span class="secno">7.10.3 </span><dfn title="do-undo">Undo: moving back in the undo transaction history</dfn></h4>

  <p>When the user invokes an undo operation, or when the <code title="dom-document-execCommand"><a href="#execCommand">execCommand()</a></code> method is
  called with the <code title="command-undo"><a href="#command-undo">undo</a></code> command, the
  user agent must perform an undo operation.</p>

  <p>If the <a href="#undo-position">undo position</a> is at the start of the
  <a href="#undo-transaction-history">undo transaction history</a>, then the user agent must do
  nothing.</p>

  <p>If the entry immediately before the <a href="#undo-position">undo position</a> is
  a <a href="#dom-changes">DOM changes</a> entry, then the user agent must remove
  that <a href="#dom-changes">DOM changes</a> entry, reverse the DOM changes that
  were listed in that entry, and, if the changes were reversed with no
  problems, add a new <a href="#dom-changes">DOM changes</a> entry (consisting of
  the opposite of those DOM changes) to the <a href="#undo-transaction-history">undo transaction
  history</a> on the other side of the <a href="#undo-position">undo
  position</a>.</p>

  <p>If the DOM changes cannot be undone (e.g. because the DOM state
  is no longer consistent with the changes represented in the entry),
  then the user agent must simply remove the <a href="#dom-changes">DOM changes</a>
  entry, without doing anything else.</p>

  <p>If the entry immediately before the <a href="#undo-position">undo position</a> is
  an <a href="#undo-object">undo object</a> entry, then the user agent must first
  remove that <a href="#undo-object">undo object</a> entry from the <a href="#undo-transaction-history">undo
  transaction history</a>, and then must fire an <code title="event-undo"><a href="#event-undo">undo</a></code> event at the <code><a href="browsers.html#window">Window</a></code>
  object, using the <a href="#undo-object">undo object</a> entry's associated undo
  object as the event's data.</p>

  <p>Any calls to <code title="dom-undoManager-add"><a href="#dom-undomanager-add">add()</a></code> while
  the event is being handled will be used to populate the redo
  history, and will then be used if the user invokes the "redo"
  command to undo his undo.</p>


  <h4 id="redo:-moving-forward-in-the-undo-transaction-history"><span class="secno">7.10.4 </span><dfn title="do-redo">Redo: moving forward in the undo transaction history</dfn></h4>

  <p>When the user invokes a redo operation, or when the <code title="dom-document-execCommand"><a href="#execCommand">execCommand()</a></code> method is
  called with the <code title="command-redo"><a href="#command-redo">redo</a></code> command, the
  user agent must perform a redo operation.</p>

  <p>This is mostly the opposite of an <a href="#undo:-moving-back-in-the-undo-transaction-history" title="do-undo">undo
  operation</a>, but the full definition is included here for
  completeness.</p>

  <p>If the <a href="#undo-position">undo position</a> is at the end of the <a href="#undo-transaction-history">undo
  transaction history</a>, then the user agent must do nothing.</p>

  <p>If the entry immediately after the <a href="#undo-position">undo position</a> is
  a <a href="#dom-changes">DOM changes</a> entry, then the user agent must remove
  that <a href="#dom-changes">DOM changes</a> entry, reverse the DOM changes that
  were listed in that entry, and, if the changes were reversed with no
  problems, add a new <a href="#dom-changes">DOM changes</a> entry (consisting of
  the opposite of those DOM changes) to the <a href="#undo-transaction-history">undo transaction
  history</a> on the other side of the <a href="#undo-position">undo
  position</a>.</p>

  <p>If the DOM changes cannot be redone (e.g. because the DOM state
  is no longer consistent with the changes represented in the entry),
  then the user agent must simply remove the <a href="#dom-changes">DOM changes</a>
  entry, without doing anything else.</p>

  <p>If the entry immediately after the <a href="#undo-position">undo position</a> is
  an <a href="#undo-object">undo object</a> entry, then the user agent must first
  remove that <a href="#undo-object">undo object</a> entry from the <a href="#undo-transaction-history">undo
  transaction history</a>, and then must fire a <code title="event-redo"><a href="#event-redo">redo</a></code> event at the <code><a href="browsers.html#window">Window</a></code>
  object, using the <a href="#undo-object">undo object</a> entry's associated undo
  object as the event's data.</p>

  </div>


  <h4 id="the-undomanagerevent-interface-and-the-undo-and-redo-events"><span class="secno">7.10.5 </span>The <code><a href="#undomanagerevent">UndoManagerEvent</a></code> interface and the <code title="event-undo"><a href="#event-undo">undo</a></code> and <code title="event-redo"><a href="#event-redo">redo</a></code> events</h4>

  <pre class="idl">interface <dfn id="undomanagerevent">UndoManagerEvent</dfn> : Event {
  readonly attribute any <a href="#dom-undomanagerevent-data" title="dom-UndoManagerEvent-data">data</a>;
  void <a href="#dom-undomanagerevent-initundomanagerevent" title="dom-UndoManagerEvent-initUndoManagerEvent">initUndoManagerEvent</a>(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg);
};</pre>

  <dl class="domintro"><dt><var title="">event</var>  . <code title="dom-UndoManagerEvent-data"><a href="#dom-undomanagerevent-data">data</a></code></dt>

   <dd>

    <p>Returns the data that was passed to the <code title="dom-undomanager-add"><a href="#dom-undomanager-add">add()</a></code> method.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-undomanagerevent-initundomanagerevent" title="dom-UndoManagerEvent-initUndoManagerEvent"><code>initUndoManagerEvent()</code></dfn>
  method must initialize the event in a manner analogous to the
  similarly-named method in the DOM Events interfaces. <a href="references.html#refsDOMEVENTS">[DOMEVENTS]</a></p>

  <p>The <dfn id="dom-undomanagerevent-data" title="dom-UndoManagerEvent-data"><code>data</code></dfn>
  attribute represents the <a href="#undo-object">undo object</a> for the event.</p>

  <p>The <dfn id="event-undo" title="event-undo"><code>undo</code></dfn> and <dfn id="event-redo" title="event-redo"><code>redo</code></dfn> events do not bubble,
  cannot be canceled, and have no default action. When the user agent
  fires one of these events it must use the
  <code><a href="#undomanagerevent">UndoManagerEvent</a></code> interface, with the <code title="dom-UndoManagerEvent-data"><a href="#dom-undomanagerevent-data">data</a></code> field containing the
  relevant <a href="#undo-object">undo object</a>.</p>

  </div>


  <div class="impl">

  <h4 id="implementation-notes"><span class="secno">7.10.6 </span>Implementation notes</h4>

  <p>How user agents present the above conceptual model to the user is
  not defined. The undo interface could be a filtered view of the
  <a href="#undo-transaction-history">undo transaction history</a>, it could manipulate the
  <a href="#undo-transaction-history">undo transaction history</a> in ways not described above,
  and so forth. For example, it is possible to design a UA that
  appears to have separate <a href="#undo-transaction-history" title="undo transaction history">undo
  transaction histories</a> for each form control; similarly, it is
  possible to design systems where the user has access to more undo
  information than is present in the official (as described above)
  <a href="#undo-transaction-history">undo transaction history</a> (such as providing a
  tree-based approach to document state). Such UI models should be
  based upon the single <a href="#undo-transaction-history">undo transaction history</a>
  described in this section, however, such that to a script there is
  no detectable difference.</p>

  </div>





  <h3 id="editing-apis"><span class="secno">7.11 </span>Editing APIs</h3>

  <dl class="domintro"><dt><var title="">document</var> . <code title="dom-document-execCommand"><a href="#execCommand">execCommand</a></code>(<var title="">commandId</var> [, <var title="">showUI</var> [, <var title="">value</var> ] ] )</dt>

   <dd>

    <p>Runs the action specified by the first argument, as described
    in the list below. The second and third arguments sometimes affect
    the action. (If they don't they are ignored.)</p>

   </dd>

   <dt><var title="">document</var> . <code title="dom-document-queryCommandEnabled"><a href="#dom-document-querycommandenabled">queryCommandEnabled</a></code>(<var title="">commandId</var>)</dt>

   <dd>

    <p>Returns whether the given command is enabled, as described in the list below.</p>

   </dd>

   <dt><var title="">document</var> . <code title="dom-document-queryCommandIndeterm"><a href="#dom-document-querycommandindeterm">queryCommandIndeterm</a></code>(<var title="">commandId</var>)</dt>

   <dd>

    <p>Returns whether the given command is indeterminate, as described in the list below.</p>

   </dd>

   <dt><var title="">document</var> . <code title="dom-document-queryCommandState"><a href="#dom-document-querycommandstate">queryCommandState</a></code>(<var title="">commandId</var>)</dt>

   <dd>

    <p>Returns the state of the command, as described in the list below.</p>

   </dd>

   <dt><var title="">document</var> . <code title="dom-document-queryCommandSupported"><a href="#dom-document-querycommandsupported">queryCommandSupported</a></code>(<var title="">commandId</var>)</dt>

   <dd>

    <p>Returns true if the command is supported; otherwise, returns false.</p>

   </dd>

   <dt><var title="">document</var> . <code title="dom-document-queryCommandValue"><a href="#dom-document-querycommandvalue">queryCommandValue</a></code>(<var title="">commandId</var>)</dt>

   <dd>

    <p>Returns the value of the command, as described in the list below.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="execCommand" title="dom-document-execCommand"><code>execCommand(<var title="">commandId</var>, <var title="">showUI</var>, <var title="">value</var>)</code></dfn> method on the
  <code><a href="dom.html#htmldocument">HTMLDocument</a></code> interface allows scripts to perform
  actions on the <a href="editing.html#the-selection" title="the selection">current selection</a>
  or at the current caret position. Generally, these commands would be
  used to implement editor UI, for example having a "delete" button on
  a toolbar.</p>

  <p>There are three variants to this method, with one, two, and three
  arguments respectively. The <var title="">showUI</var> and <var title="">value</var> parameters, even if specified, are ignored
  except where otherwise stated.</p>

  <p>When <code title="dom-document-execCommand"><a href="#execCommand">execCommand()</a></code>
  is invoked, the user agent must follow the following steps:</p>

  <ol><li>If the given <var title="">commandId</var> maps to an entry in
   the list below whose "Enabled When" entry has a condition that is
   currently false, do nothing; abort these steps.</li>

   <li>Otherwise, execute the "Action" listed below for the given <var title="">commandId</var>.</li>

  </ol></div>

  <p>A document is <dfn id="ready-for-editing-host-commands">ready for editing host commands</dfn> if it
  has a selection that is entirely within an <a href="editing.html#editing-host">editing
  host</a>, or if it has no selection but its caret is inside an
  <a href="editing.html#editing-host">editing host</a>.</p>

  <div class="impl">

  <p>The <dfn id="dom-document-querycommandenabled" title="dom-document-queryCommandEnabled"><code>queryCommandEnabled(<var title="">commandId</var>)</code></dfn> method, when invoked, must
  return true if the condition listed below under "Enabled When" for
  the given <var title="">commandId</var> is true, and false
  otherwise.</p>

  <p>The <dfn id="dom-document-querycommandindeterm" title="dom-document-queryCommandIndeterm"><code>queryCommandIndeterm(<var title="">commandId</var>)</code></dfn> method, when invoked, must
  return true if the condition listed below under "Indeterminate When"
  for the given <var title="">commandId</var> is true, and false
  otherwise.</p>

  <p>The <dfn id="dom-document-querycommandstate" title="dom-document-queryCommandState"><code>queryCommandState(<var title="">commandId</var>)</code></dfn> method, when invoked, must
  return the value expressed below under "State" for the given <var title="">commandId</var>.</p>

  <p>The <dfn id="dom-document-querycommandsupported" title="dom-document-queryCommandSupported"><code>queryCommandSupported(<var title="">commandId</var>)</code></dfn> method, when invoked, must
  return true if the given <var title="">commandId</var> is in the
  list below, and false otherwise.</p>

  <p>The <dfn id="dom-document-querycommandvalue" title="dom-document-queryCommandValue"><code>queryCommandValue(<var title="">commandId</var>)</code></dfn> method, when invoked, must
  return the value expressed below under "Value" for the given <var title="">commandId</var>.</p>

  </div>

  <p>The possible values for <var title="">commandId</var>, and their
  corresponding meanings, are as follows. <span class="impl">These
  values must be compared to the argument in an <a href="infrastructure.html#ascii-case-insensitive">ASCII
  case-insensitive</a> manner.</span></p>

  <dl><dt><dfn id="command-bold" title="command-bold"><code>bold</code></dfn></dt>
   <dd><strong>Summary</strong>: Toggles whether the selection is bold.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had requested that the selection <a href="editing.html#contenteditable-wrapSemantic">be wrapped in the
   semantics</a> of the <em><code><a href="text-level-semantics.html#the-b-element">b</a></code></em> element (or, again,
   unwrapped, or have that semantic inserted or removed, as defined by
   the UA).</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: True if the selection, or the caret, if
   there is no selection, is, or is contained within, a
   <code><a href="text-level-semantics.html#the-b-element">b</a></code> element. False otherwise.</dd>
   <dd><strong>Value</strong>: The string "<code title="">true</code>"
   if the expression given for the "State" above is true, the string
   "<code title="">false</code>" otherwise.</dd>

   <dt><dfn id="command-createlink" title="command-createLink"><code>createLink</code></dfn></dt>
   <dd><strong>Summary</strong>: Toggles whether the selection is a
   link or not. If the second argument is true, and a link is to be
   added, the user agent will ask the user for the address. Otherwise,
   the third argument will be used as the address.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had requested that the selection <a href="editing.html#contenteditable-wrapSemantic">be wrapped in the
   semantics</a> of the <em><code><a href="text-level-semantics.html#the-a-element">a</a></code></em> element (or, again,
   unwrapped, or have that semantic inserted or removed, as defined by
   the UA). If the user agent creates an <code><a href="text-level-semantics.html#the-a-element">a</a></code> element or
   modifies an existing <code><a href="text-level-semantics.html#the-a-element">a</a></code> element, then if the <var title="">showUI</var> argument is present and has the value false,
   then the value of the <var title="">value</var> argument must be
   used as the <a href="urls.html#url">URL</a> of the link. Otherwise, the user agent
   should prompt the user for the URL of the link.</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-delete" title="command-delete"><code>delete</code></dfn></dt>
   <dd><strong>Summary</strong>: Deletes the selection or the
   character before the cursor.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had performed <a href="editing.html#contenteditable-delete">a backspace
   operation</a>.</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-formatblock" title="command-formatBlock"><code>formatBlock</code></dfn></dt>
   <dd><strong>Summary</strong>: Wraps the selection in the element
   given by the second argument. If the second argument doesn't
   specify an element that is a <dfn id="formatblock-candidate"><code title="">formatBlock</code>
   candidate</dfn>, does nothing.</dd>
   <dd class="impl">
    <p><strong>Action</strong>: The user agent must run the following
    steps:</p>
    <ol><li><p>If the <var title="">value</var> argument wasn't
     specified, abort these steps without doing anything.</li>
     <li><p>If the <var title="">value</var> argument has a leading
     U+003C LESS-THAN SIGN character (&lt;) and a trailing U+003E
     GREATER-THAN SIGN character (&gt;), then remove the first and last
     characters from <var title="">value</var>.</li>
     <li>
      <p>If <var title="">value</var> is (now) an <a href="infrastructure.html#ascii-case-insensitive">ASCII
      case-insensitive</a> match for the tag name of an element
      defined by this specification that is defined to be a
      <a href="#formatblock-candidate"><code title="">formatBlock</code> candidate</a>, then,
      for every position in the selection, take the nearest
      <a href="#formatblock-candidate"><code title="">formatBlock</code> candidate</a>
      ancestor element of that position that contains only
      <a href="content-models.html#phrasing-content">phrasing content</a>, and, if that element is
      <a href="editing.html#editable">editable</a>, is not an <a href="editing.html#editing-host">editing host</a>, and
      has a parent element whose content model allows that parent to
      contain any <a href="content-models.html#flow-content">flow content</a>, replace it with an
      element in the HTML namespace whose name is <var title="">value</var>, and move all the children that were in it
      to the new element, and copy all the attributes that were on it
      to the new element.</p>
      <p>If there is no selection, then, where in the description
      above refers to the selection, the user agent must act as if the
      selection was an empty range (with just one position) at the
      caret position.</p>
     </li>
    </ol></dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-forwarddelete" title="command-forwardDelete"><code>forwardDelete</code></dfn></dt>
   <dd><strong>Summary</strong>: Deletes the selection or the
   character after the cursor.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had performed <a href="editing.html#contenteditable-delete">a forward delete
   operation</a>.</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-insertimage" title="command-insertImage"><code>insertImage</code></dfn></dt>
   <dd><strong>Summary</strong>: Toggles whether the selection is an
   image or not. If the second argument is true, and an image is to be
   added, the user agent will ask the user for the address. Otherwise,
   the third argument will be used as the address.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act
   as if the user had requested that the selection <a href="editing.html#contenteditable-wrapSemantic">be wrapped in the
   semantics</a> of the <em><code><a href="embedded-content-1.html#the-img-element">img</a></code></em> element (or, again,
   unwrapped, or have that semantic inserted or removed, as defined by
   the UA). If the user agent creates an <code><a href="embedded-content-1.html#the-img-element">img</a></code> element or
   modifies an existing <code><a href="embedded-content-1.html#the-img-element">img</a></code> element, then if the <var title="">showUI</var> argument is present and has the value false,
   then the value of the <var title="">value</var> argument must be
   used as the <a href="urls.html#url">URL</a> of the image. Otherwise, the user
   agent should prompt the user for the URL of the image.</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-inserthtml" title="command-insertHTML"><code>insertHTML</code></dfn></dt>
   <dd><strong>Summary</strong>: Replaces the selection with the value
   of the third argument parsed as HTML.</dd>
   <dd class="impl">
    <p><strong>Action</strong>: The user agent must run the following
    steps:</p>
    <ol><li><p>If the document is an <a href="dom.html#xml-documents" title="XML documents">XML
     document</a>, then throw an <code><a href="urls.html#invalid_access_err">INVALID_ACCESS_ERR</a></code>
     exception and abort these steps.</li><!-- v2 support XML? -->
     <li><p>If the <var title="">value</var> argument wasn't
     specified, abort these steps without doing anything.</li>
     <li><p>If there is a selection, act as if the user had requested
     that <a href="editing.html#contenteditable-delete">the selection be
     deleted</a>.</li>
     <li><p>Invoke the <a href="the-end.html#html-fragment-parsing-algorithm">HTML fragment parsing algorithm</a>
     with an arbitrary orphan <code><a href="sections.html#the-body-element-0">body</a></code> element owned by the
     same <code>Document</code> as the <i><a href="the-canvas-element.html#context">context</a></i> element and with
     the <var title="">value</var> argument as <i><a href="the-input-element.html#the-input-element">input</a></i>.</li>
     <li><p>Insert the nodes returned by the previous step into the
     document at the location of the caret, firing any mutation events
     as appropriate.</li>
    </ol></dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-insertlinebreak" title="command-insertLineBreak"><code>insertLineBreak</code></dfn></dt>
   <dd><strong>Summary</strong>: Inserts a line break.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had <a href="editing.html#contenteditable-br">requested a line
   separator</a>.</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-insertorderedlist" title="command-insertOrderedList"><code>insertOrderedList</code></dfn></dt>
   <dd><strong>Summary</strong>: Toggles whether the selection is an ordered list.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had requested that the selection <a href="editing.html#contenteditable-wrapSemantic">be wrapped in the
   semantics</a> of the <code><a href="grouping-content.html#the-ol-element">ol</a></code> element (or unwrapped, or, if
   there is no selection, have that semantic inserted or removed
   &mdash; the exact behavior is UA-defined).</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-insertunorderedlist" title="command-insertUnorderedList"><code>insertUnorderedList</code></dfn></dt>
   <dd><strong>Summary</strong>: Toggles whether the selection is an unordered list.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had requested that the selection <a href="editing.html#contenteditable-wrapSemantic">be wrapped in the
   semantics</a> of the <code><a href="grouping-content.html#the-ul-element">ul</a></code> element (or unwrapped, or, if
   there is no selection, have that semantic inserted or removed
   &mdash; the exact behavior is UA-defined).</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-insertparagraph" title="command-insertParagraph"><code>insertParagraph</code></dfn></dt>
   <dd><strong>Summary</strong>: Inserts a paragraph break.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had performed a <a href="editing.html#contenteditable-breakBlock">break
   block</a> editing action.</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-inserttext" title="command-insertText"><code>insertText</code></dfn></dt>
   <dd><strong>Summary</strong>: Inserts the text given in the third parameter.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had <a href="editing.html#contenteditable-insertText">inserted text</a>
   corresponding to the <var title="">value</var> parameter.</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-italic" title="command-italic"><code>italic</code></dfn></dt>
   <dd><strong>Summary</strong>: Toggles whether the selection is italic.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had requested that the selection <a href="editing.html#contenteditable-wrapSemantic">be wrapped in the
   semantics</a> of the <em><code><a href="text-level-semantics.html#the-i-element">i</a></code></em> element (or, again,
   unwrapped, or have that semantic inserted or removed, as defined by
   the UA).</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: True if the selection, or the caret, if
   there is no selection, is, or is contained within, a
   <code><a href="text-level-semantics.html#the-i-element">i</a></code> element. False otherwise.</dd>
   <dd><strong>Value</strong>: The string "<code title="">true</code>"
   if the expression given for the "State" above is true, the string
   "<code title="">false</code>" otherwise.</dd>

   <dt><dfn id="command-redo" title="command-redo"><code>redo</code></dfn></dt>
   <dd><strong>Summary</strong>: Acts as if the user had requested a redo.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must <a href="#redo:-moving-forward-in-the-undo-transaction-history" title="do-redo">move forward one step</a> in its <a href="#undo-transaction-history">undo
   transaction history</a>, restoring the associated state. If the
   <a href="#undo-position">undo position</a> is at the end of the <a href="#undo-transaction-history">undo
   transaction history</a>, the user agent must do nothing. See the
   <a href="#undo">undo history</a>.</dd>
   <dd><strong>Enabled When</strong>: The <a href="#undo-position">undo position</a>
   is not at the end of the <a href="#undo-transaction-history">undo transaction
   history</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-selectall" title="command-selectAll"><code>selectAll</code></dfn></dt>
   <dd><strong>Summary</strong>: Selects all the editable content.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must change the
   selection so that all the content in the currently focused
   <a href="editing.html#editing-host">editing host</a> is selected. If no <a href="editing.html#editing-host">editing
   host</a> is focused, then the content of the entire document
   must be selected.</dd>
   <dd><strong>Enabled When</strong>: Always.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-subscript" title="command-subscript"><code>subscript</code></dfn></dt>
   <dd><strong>Summary</strong>: Toggles whether the selection is subscripted.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had requested that the selection <a href="editing.html#contenteditable-wrapSemantic">be wrapped in the
   semantics</a> of the <em><code><a href="text-level-semantics.html#the-sub-and-sup-elements">sub</a></code></em> element (or, again,
   unwrapped, or have that semantic inserted or removed, as defined by
   the UA).</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: True if the selection, or the caret, if
   there is no selection, is, or is contained within, a
   <code><a href="text-level-semantics.html#the-sub-and-sup-elements">sub</a></code> element. False otherwise.</dd>
   <dd><strong>Value</strong>: The string "<code title="">true</code>"
   if the expression given for the "State" above is true, the string
   "<code title="">false</code>" otherwise.</dd>

   <dt><dfn id="command-superscript" title="command-superscript"><code>superscript</code></dfn></dt>
   <dd><strong>Summary</strong>: Toggles whether the selection is superscripted.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must act as if the user
   had requested that the selection <a href="editing.html#contenteditable-wrapSemantic">be wrapped in the
   semantics</a> of the <code><a href="text-level-semantics.html#the-sub-and-sup-elements">sup</a></code> element (or unwrapped, or, if
   there is no selection, have that semantic inserted or removed
   &mdash; the exact behavior is UA-defined).</dd>
   <dd><strong>Enabled When</strong>: The document is <a href="#ready-for-editing-host-commands">ready for
   editing host commands</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: True if the selection, or the caret, if
   there is no selection, is, or is contained within, a
   <code><a href="text-level-semantics.html#the-sub-and-sup-elements">sup</a></code> element. False otherwise.</dd>
   <dd><strong>Value</strong>: The string "<code title="">true</code>"
   if the expression given for the "State" above is true, the string
   "<code title="">false</code>" otherwise.</dd>

   <dt><dfn id="command-undo" title="command-undo"><code>undo</code></dfn></dt>
   <dd><strong>Summary</strong>: Acts as if the user had requested an undo.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must <a href="#undo:-moving-back-in-the-undo-transaction-history" title="do-undo">move back one step</a> in its <a href="#undo-transaction-history">undo
   transaction history</a>, restoring the associated state. If the
   <a href="#undo-position">undo position</a> is at the start of the <a href="#undo-transaction-history">undo
   transaction history</a>, the user agent must do nothing. See the
   <a href="#undo">undo history</a>.</dd>
   <dd><strong>Enabled When</strong>: The <a href="#undo-position">undo position</a>
   is not at the start of the <a href="#undo-transaction-history">undo transaction
   history</a>.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-unlink" title="command-unlink"><code>unlink</code></dfn></dt>
   <dd><strong>Summary</strong>: Removes all links from the selection.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must remove all
   <code><a href="text-level-semantics.html#the-a-element">a</a></code> elements that have <code title="attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code> attributes and that are partially
   or completely included in the current selection.</dd>
   <dd><strong>Enabled When</strong>: The document has a selection
   that is entirely within an <a href="editing.html#editing-host">editing host</a> and that
   contains (either partially or completely) at least one
   <code><a href="text-level-semantics.html#the-a-element">a</a></code> element that has an <code title="attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code> attribute.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt><dfn id="command-unselect" title="command-unselect"><code>unselect</code></dfn></dt>
   <dd><strong>Summary</strong>: Unselects everything.</dd>
   <dd class="impl"><strong>Action</strong>: The user agent must change the
   selection so that nothing is selected.</dd>
   <dd><strong>Enabled When</strong>: Always.</dd>
   <dd><strong>Indeterminate When</strong>: Never.</dd>
   <dd><strong>State</strong>: Always false.</dd>
   <dd><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

   <dt class="impl"><code><var title="">vendorID</var>-<var title="">customCommandID</var></code></dt>
   <dd class="impl"><strong>Action</strong>: User agents may implement
   vendor-specific extensions to this API. Vendor-specific extensions
   to the list of commands should use the syntax <code><var title="">vendorID</var>-<var title="">customCommandID</var></code>
   so as to prevent clashes between extensions from different vendors
   and future additions to this specification.</dd>
   <dd class="impl"><strong>Enabled When</strong>: UA-defined.</dd>
   <dd class="impl"><strong>Indeterminate When</strong>: UA-defined.</dd>
   <dd class="impl"><strong>State</strong>: UA-defined.</dd>
   <dd class="impl"><strong>Value</strong>: UA-defined.</dd>

   <dt class="impl">Anything else</dt>
   <dd class="impl"><strong>Action</strong>: User agents must do nothing.</dd>
   <dd class="impl"><strong>Enabled When</strong>: Never.</dd>
   <dd class="impl"><strong>Indeterminate When</strong>: Never.</dd>
   <dd class="impl"><strong>State</strong>: Always false.</dd>
   <dd class="impl"><strong>Value</strong>: Always the string "<code title="">false</code>".</dd>

  </dl><!--
v2 (well, really v0):
 "forecolor", "hilitecolor", "fontname", "fontsize", "justifyleft",
 "justifycenter", "justifyright", "justifyfull", "indent", "outdent"
-->
