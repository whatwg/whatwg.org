<!DOCTYPE html>
<!DOCTYPE html><html class="split chapter" lang="en-US-x-hixie"><title>4.10.14 Association of controls and forms &mdash; HTML5</title><link href="/style/specification" rel="stylesheet"><link href="/images/icon" rel="icon"><style>
   .proposal { border: blue solid; padding: 1em; }
   .bad, .bad *:not(.XXX) { color: gray; border-color: gray; background: transparent; }
   #updatesStatus { display: none; }
   #updatesStatus.relevant { display: block; position: fixed; right: 1em; top: 1em; padding: 0.5em; font: bold small sans-serif; min-width: 25em; width: 30%; max-width: 40em; height: auto; border: ridge 4px gray; background: #EEEEEE; color: black; }
   div.head .logo { width: 11em; margin-bottom: 20em; }
   #configUI { position: absolute; z-index: 20; top: 10em; right: 1em; width: 11em; font-size: small; }
   #configUI p { margin: 0.5em 0; padding: 0.3em; background: #EEEEEE; color: black; border: inset thin; }
   #configUI p label { display: block; }
   #configUI #updateUI, #configUI .loginUI { text-align: center; }
   #configUI input[type=button] { display: block; margin: auto; }
   #reviewer { position: fixed; bottom: 0; right: 0; white-space: nowrap; border: thin; border-style: inset none none inset; background: #EEEEEE; color: black; overflow: hidden; z-index: 30; }
   #reviewer * { font-size: small; }
   #reviewer.off > :not(:first-child) { display: none; }
   @media print { #configUI { display: none; } }
   .rfc2119 { font-variant: small-caps; text-shadow: 0 0 0.5em yellow; position: static; }
   .rfc2119::after { position: absolute; left: 0; width: 25px; text-align: center; color: yellow; text-shadow: 0.075em 0.075em 0.2em black; }
   .rfc2119.m\ust::after { content: '\2605'; }
   .rfc2119.s\hould::after { content: '\2606'; }
   [hidden] { display: none; }
  </style><style type="text/css">

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies tbody th { whitespace: nowrap; }
   .applies td { text-align: center; }
   .applies .yes { background: yellow; }

   .matrix, .matrix td { border: none; text-align: right; }
   .matrix { margin-left: 2em; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

  </style><link href="data:text/css," id="complete" rel="stylesheet" title="Complete specification"><link href="data:text/css,.impl%20{%20display:%20none;%20}" id="author" rel="alternate stylesheet" title="Author documentation only"><link href="data:text/css,.impl%20{%20background:%20%23FFEEEE;%20}" id="highlight" rel="alternate stylesheet" title="Highlight implementation requirements"><script>
   var loadTimer = new Date();
   var current_revision = "r" + "$Revision: 4372 $".substr(11);
   current_revision = current_revision.substr(0, current_revision.length - 2);
   var last_known_revision = current_revision;
   function getCookie(name) {
     var params = location.search.substr(1).split("&");
     for (var index = 0; index < params.length; index++) {
       if (params[index] == name)
         return "1";
       var data = params[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     var cookies = document.cookie.split("; ");
     for (var index = 0; index < cookies.length; index++) {
       var data = cookies[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     return null;
   }
   function load(script) {
     var e = document.createElement('script');
     e.setAttribute('src', script);
     document.body.appendChild(e);
   }
   function init() {
     if (location.search == '?slow-browser')
       return;
     var configUI = document.createElement('div');
     configUI.id = 'configUI';
     document.body.appendChild(configUI);
     if (document.documentElement.className == "" || document.documentElement.className == "split index")
       load('toc.js');
     load('styler.js');
     if (document.documentElement.className == "")
       load('dfn.js');
     if (getCookie('profile') == '1')
       document.getElementsByTagName('h2')[0].textContent += '; load: ' + (new Date() - loadTimer) + 'ms';
   }
  </script>
  <script src="link-fixup.js"></script>
  <link href="the-button-element.html" rel="prev" title="4.10.6 The button element">
  <link href="index.html#contents" rel="index" title="Table of contents">
  <link href="interactive-elements.html" rel="next" title="4.11 Interactive elements">
  <body class="cfc" onload="fixBrokenLink(); init()">
  <style scoped>
   * { color: gray ! important; background: none ! important; border-color: silver ! important; }
   img, object, iframe { filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); -webkit-filter: grayscale(100%); }
   .obsolete { border: double thick red ! important; background: yellow ! important; margin: 4em auto 0 auto; max-width: 50em; width: 70%; text-align: center; position: fixed;  z-index: 10000; top: 0; left: 0; right: 0; }
   .obsolete a { color: blue ! important; }
   .obsolete p { font: 900 2em sans-serif; color: red ! important; margin: 1em 1.5em ! important; }
  </style>
  <div class=obsolete>
   <p>This is a snapshot of an early working draft and has therefore
   been superseded by the <a href="http://whatwg.org/html">HTML
   standard</a>.</p>
   <p>This document will not be further updated.</p>
  </div>
<header class="head"><p><a class="logo" href="http://www.whatwg.org/" rel="home"><img alt="WHATWG" src="/images/logo"></a></p>
   <hgroup><h1>HTML5</h1>
    <h2 class="no-num no-toc">Draft Standard &mdash; Call For Comments &mdash; 27 October 2009</h2>
   </hgroup></header><nav>
   <a href="the-button-element.html">&larr; 4.10.6 The button element</a> &ndash;
   <a href="index.html#contents">Table of contents</a> &ndash;
   <a href="interactive-elements.html">4.11 Interactive elements &rarr;</a>
  <ol class="toc"><li><ol><li><ol><li><a href="association-of-controls-and-forms.html#association-of-controls-and-forms"><span class="secno">4.10.14 </span>Association of controls and forms</a><li><a href="association-of-controls-and-forms.html#attributes-common-to-form-controls"><span class="secno">4.10.15 </span>Attributes common to form controls</a>
      <ol><li><a href="association-of-controls-and-forms.html#naming-form-controls"><span class="secno">4.10.15.1 </span>Naming form controls</a><li><a href="association-of-controls-and-forms.html#enabling-and-disabling-form-controls"><span class="secno">4.10.15.2 </span>Enabling and disabling form controls</a><li><a href="association-of-controls-and-forms.html#a-form-control's-value"><span class="secno">4.10.15.3 </span>A form control's value</a><li><a href="association-of-controls-and-forms.html#autofocusing-a-form-control"><span class="secno">4.10.15.4 </span>Autofocusing a form control</a><li><a href="association-of-controls-and-forms.html#limiting-user-input-length"><span class="secno">4.10.15.5 </span>Limiting user input length</a><li><a href="association-of-controls-and-forms.html#form-submission-0"><span class="secno">4.10.15.6 </span>Form submission</a></ol><li><a href="association-of-controls-and-forms.html#constraints"><span class="secno">4.10.16 </span>Constraints</a>
      <ol><li><a href="association-of-controls-and-forms.html#definitions"><span class="secno">4.10.16.1 </span>Definitions</a><li><a href="association-of-controls-and-forms.html#constraint-validation"><span class="secno">4.10.16.2 </span>Constraint validation</a><li><a href="association-of-controls-and-forms.html#the-constraint-validation-api"><span class="secno">4.10.16.3 </span>The constraint validation API</a><li><a href="association-of-controls-and-forms.html#security-0"><span class="secno">4.10.16.4 </span>Security</a></ol><li><a href="association-of-controls-and-forms.html#form-submission"><span class="secno">4.10.17 </span>Form submission</a>
      <ol><li><a href="association-of-controls-and-forms.html#introduction-0"><span class="secno">4.10.17.1 </span>Introduction</a><li><a href="association-of-controls-and-forms.html#implicit-submission"><span class="secno">4.10.17.2 </span>Implicit submission</a><li><a href="association-of-controls-and-forms.html#form-submission-algorithm"><span class="secno">4.10.17.3 </span>Form submission algorithm</a><li><a href="association-of-controls-and-forms.html#url-encoded-form-data"><span class="secno">4.10.17.4 </span>URL-encoded form data</a><li><a href="association-of-controls-and-forms.html#multipart-form-data"><span class="secno">4.10.17.5 </span>Multipart form data</a><li><a href="association-of-controls-and-forms.html#plain-text-form-data"><span class="secno">4.10.17.6 </span>Plain text form data</a></ol><li><a href="association-of-controls-and-forms.html#resetting-a-form"><span class="secno">4.10.18 </span>Resetting a form</a><li><a href="association-of-controls-and-forms.html#event-dispatch"><span class="secno">4.10.19 </span>Event dispatch</a></ol></ol></ol></nav>

  <h4 id="association-of-controls-and-forms"><span class="secno">4.10.14 </span>Association of controls and forms</h4>

  <p>A <a href="forms.html#form-associated-element">form-associated element</a> can have a relationship
  with a <code><a href="forms.html#the-form-element">form</a></code> element, which is called the element's
  <dfn id="form-owner">form owner</dfn>. If a <a href="forms.html#form-associated-element">form-associated element</a> is
  not associated with a <code><a href="forms.html#the-form-element">form</a></code> element, its <a href="#form-owner">form
  owner</a> is said to be null.</p>

  <p>A <a href="forms.html#form-associated-element">form-associated element</a> is, by default, associated
  with its nearest ancestor <code><a href="forms.html#the-form-element">form</a></code> element<span class="impl"> (as described below)</span>, but may have a <dfn id="attr-fae-form" title="attr-fae-form"><code>form</code></dfn> attribute specified to
  override this.</p>

  <p>If a <a href="forms.html#form-associated-element">form-associated element</a> has a <code title="attr-fae-form"><a href="#attr-fae-form">form</a></code> attribute specified, then its
  value must be the ID of a <code><a href="forms.html#the-form-element">form</a></code> element in the element's
  owner <code>Document</code>.</p>

  <div class="impl">

  <p>When a <a href="forms.html#form-associated-element">form-associated element</a> is created, its
  <a href="#form-owner">form owner</a> must be initialized to null (no owner).</p>

  <p>When a <a href="forms.html#form-associated-element">form-associated element</a> is to be <dfn id="concept-form-association" title="concept-form-association">associated</dfn> with a form, its
  <a href="#form-owner">form owner</a> must be set to that form.</p>

  <p>When a <a href="forms.html#form-associated-element">form-associated element</a>'s ancestor chain
  changes, e.g. because it or one of its ancestors was <a href="infrastructure.html#insert-an-element-into-a-document" title="insert an element into a document">inserted</a> or <a href="infrastructure.html#remove-an-element-from-a-document" title="remove an element from a document">removed</a> from a
  <code>Document</code>, then the user agent must <a href="#reset-the-form-owner">reset the form
  owner</a> of that element.</p>

  <p>When a <a href="forms.html#form-associated-element">form-associated element</a>'s <code title="attr-fae-form"><a href="#attr-fae-form">form</a></code> attribute is added, removed, or
  has its value changed, then the user agent must <a href="#reset-the-form-owner">reset the form
  owner</a> of that element.</p>

  <p>When a <a href="forms.html#form-associated-element">form-associated element</a> has a <code title="attr-fae-form"><a href="#attr-fae-form">form</a></code> attribute and the ID of any of the
  <code><a href="forms.html#the-form-element">form</a></code> elements in the <code>Document</code> changes,
  then the user agent must <a href="#reset-the-form-owner">reset the form owner</a> of that
  <a href="forms.html#form-associated-element">form-associated element</a>.</p>

  <p>When the user agent is to <dfn id="reset-the-form-owner">reset the form owner</dfn> of a
  <a href="forms.html#form-associated-element">form-associated element</a>, it must run the following
  steps:</p>

  <ol><li><p>If the element's <a href="#form-owner">form owner</a> is not null, and
   the element's <code title="attr-fae-form"><a href="#attr-fae-form">form</a></code> content
   attribute is not present, and the element's <a href="#form-owner">form owner</a>
   is one of the ancestors of the element after the change to the
   ancestor chain, then do nothing, and abort these steps.</li>

   <li><p>Let the element's <a href="#form-owner">form owner</a> be null.</li>

   <li>

    <p>If the element has a <code title="attr-fae-form"><a href="#attr-fae-form">form</a></code>
    content attribute, then run these substeps:</p>

    <ol><!-- note that this ignores the name="" attribute and is
     unaffected by quirks mode (it's always case sensitive) --><li><p>If the first element in the <code>Document</code> to have
     an ID that is <a href="infrastructure.html#case-sensitive" title="case-sensitive">case-sensitively</a> equal to the
     element's <code title="attr-fae-form"><a href="#attr-fae-form">form</a></code> content
     attribute's value is a <code><a href="forms.html#the-form-element">form</a></code> element, then <a href="#concept-form-association" title="concept-form-association">associate</a> the
     <a href="forms.html#form-associated-element">form-associated element</a> with that <code><a href="forms.html#the-form-element">form</a></code>
     element.</li>

     <li><p>Abort the "reset the form owner" steps.</li>

    </ol></li>

   <li><p>Otherwise, if the <a href="forms.html#form-associated-element">form-associated element</a> in
   question has an ancestor <code><a href="forms.html#the-form-element">form</a></code> element, then <a href="#concept-form-association" title="concept-form-association">associate</a> the
   <a href="forms.html#form-associated-element">form-associated element</a> with the nearest such ancestor
   <code><a href="forms.html#the-form-element">form</a></code> element.</li>

   <li><p>Otherwise, the element is left unassociated.</li>

  </ol><div class="example">

   <p>In the following non-conforming snippet:</p>

   <pre class="bad">...
 &lt;form id="a"&gt;
  &lt;div id="b"&gt;&lt;/div&gt;
 &lt;/form&gt;
 &lt;script&gt;
  document.getElementById('b').innerHTML =
     '&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;form id="c"&gt;&lt;input id="d"&gt;&lt;/table&gt;' +
     '&lt;input id="e"&gt;';
 &lt;/script&gt;
...</pre>

   <p>The <a href="#form-owner">form owner</a> of "d" would be the inner nested
   form "c", while the <a href="#form-owner">form owner</a> of "e" would be the
   outer form "a".</p>

   <p>This is because despite the association of "e" with "c" in the
   <a href="parsing.html#html-parser">HTML parser</a>, when the <code title="dom-innerHTML"><a href="apis-in-html-documents.html#dom-innerhtml">innerHTML</a></code> algorithm moves the nodes
   from the temporary document to the "b" element, the nodes see their
   ancestor chain change, and thus all the "magic" associations done
   by the parser are reset to normal ancestor associations.</p>

   <p>This example is a non-conforming document, though, as it is a
   violation of the content models to nest <code><a href="forms.html#the-form-element">form</a></code>
   elements.</p>

  </div>

  </div>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-fae-form"><a href="#dom-fae-form">form</a></code></dt>

   <dd>

    <p>Returns the element's <a href="#form-owner">form owner</a>.</p>

    <p>Returns null if there isn't one.</p>

   </dd>

  </dl><div class="impl">

  <p><a href="forms.html#form-associated-element" title="form-associated element">Form-associated
  elements</a> have a <dfn id="dom-fae-form" title="dom-fae-form"><code>form</code></dfn> IDL attribute, which,
  on getting, must return the element's <a href="#form-owner">form owner</a>, or
  null if there isn't one.</p>

  <p><strong>Constraint validation</strong>: If an element has no
  <a href="#form-owner">form owner</a>, it is <a href="#barred-from-constraint-validation">barred from constraint
  validation</a>.</p>

  </div>



  <h4 id="attributes-common-to-form-controls"><span class="secno">4.10.15 </span><dfn>Attributes common to form controls</dfn></h4>

  <h5 id="naming-form-controls"><span class="secno">4.10.15.1 </span>Naming form controls</h5>

  <p>The <dfn id="attr-fe-name" title="attr-fe-name"><code>name</code></dfn> content
  attribute gives the name of the form control, as used in <a href="#form-submission">form
  submission</a> and in the <code><a href="forms.html#the-form-element">form</a></code> element's <code title="dom-form-elements"><a href="forms.html#dom-form-elements">elements</a></code> object. If the attribute
  is specified, its value must not be the empty string.</p>

  <div class="impl">

  <p><strong>Constraint validation</strong>: If an element does not
  have a <code title="attr-fe-name"><a href="#attr-fe-name">name</a></code> attribute specified,
  or its <code title="attr-fe-name"><a href="#attr-fe-name">name</a></code> attribute's value is
  the empty string, then it is <a href="#barred-from-constraint-validation">barred from constraint
  validation</a>.</p>

  <p>The <dfn id="dom-fe-name" title="dom-fe-name"><code>name</code></dfn> IDL
  attribute must <a href="urls.html#reflect">reflect</a> the <code title="attr-fe-name"><a href="#attr-fe-name">name</a></code> content attribute.</p>

  </div>


  <h5 id="enabling-and-disabling-form-controls"><span class="secno">4.10.15.2 </span>Enabling and disabling form controls</h5>

  <p>The <dfn id="attr-fe-disabled" title="attr-fe-disabled"><code>disabled</code></dfn>
  content attribute is a <a href="common-microsyntaxes.html#boolean-attribute">boolean attribute</a>.</p>

  <p>A form control is <dfn id="concept-fe-disabled" title="concept-fe-disabled">disabled</dfn>
  if its <code title="attr-fe-disabled"><a href="#attr-fe-disabled">disabled</a></code> attribute is
  set, or if it is a descendant of a <code><a href="forms.html#the-fieldset-element">fieldset</a></code> element
  whose <code title="attr-fieldset-disabled"><a href="forms.html#attr-fieldset-disabled">disabled</a></code> attribute
  is set and is <em>not</em> a descendant of that
  <code><a href="forms.html#the-fieldset-element">fieldset</a></code> element's first <code><a href="forms.html#the-legend-element">legend</a></code> element
  child, if any.</p>

  <div class="impl">

  <p>A form control that is <a href="#concept-fe-disabled" title="concept-fe-disabled">disabled</a> must prevent any <code title="event-click">click</code> events that are <a href="origin-0.html#queue-a-task" title="queue
  a task">queued</a> on the <a href="origin-0.html#user-interaction-task-source">user interaction task
  source</a> from being dispatched on the element.</p>

  <p><strong>Constraint validation</strong>: If an element is <a href="#concept-fe-disabled" title="concept-fe-disabled">disabled</a>, it is <a href="#barred-from-constraint-validation">barred from
  constraint validation</a>.</p>

  <p>The <dfn id="dom-fe-disabled" title="dom-fe-disabled"><code>disabled</code></dfn> IDL
  attribute must <a href="urls.html#reflect">reflect</a> the <code title="attr-fe-disabled"><a href="#attr-fe-disabled">disabled</a></code> content attribute.</p>

  </div>



  <div class="impl">

  <h5 id="a-form-control's-value"><span class="secno">4.10.15.3 </span>A form control's value</h5>

  <p>Form controls have a <dfn id="concept-fe-value" title="concept-fe-value">value</dfn>
  and a <dfn id="concept-fe-checked" title="concept-fe-checked">checkedness</dfn>. (The latter
  is only used by <code><a href="the-input-element.html#the-input-element">input</a></code> elements.) These are used to
  describe how the user interacts with the control.</p>

  </div>



  <h5 id="autofocusing-a-form-control"><span class="secno">4.10.15.4 </span>Autofocusing a form control</h5>

  <!-- v2: Apply this to contentEditable elements -->

  <p>The <dfn id="attr-fe-autofocus" title="attr-fe-autofocus"><code>autofocus</code></dfn>
  content attribute allows the user to indicate that a control is to
  be focused as soon as the page is loaded, allowing the user to just
  start typing without having to manually focus the main control.</p>

  <p>The <code title="attr-fe-autofocus"><a href="#attr-fe-autofocus">autofocus</a></code> attribute is
  a <a href="common-microsyntaxes.html#boolean-attribute">boolean attribute</a>.</p>

  <p>There must not be more than one element in the document with the
  <code title="attr-fe-autofocus"><a href="#attr-fe-autofocus">autofocus</a></code> attribute
  specified.</p>

  <div class="impl">

  <p>Whenever an element with the <code title="attr-fe-autofocus"><a href="#attr-fe-autofocus">autofocus</a></code> attribute specified is
  <a href="infrastructure.html#insert-an-element-into-a-document" title="insert an element into a document">inserted into a
  document</a>, the user agent should <a href="origin-0.html#queue-a-task">queue a task</a>
  that checks to see if the element is <a href="editing.html#focusable">focusable</a>, and if
  so, runs the <a href="editing.html#focusing-steps">focusing steps</a> for that element. User
  agents may also change the scrolling position of the document, or
  perform some other action that brings the element to the user's
  attention. The <a href="origin-0.html#task-source">task source</a> for this task is the
  <a href="origin-0.html#dom-manipulation-task-source">DOM manipulation task source</a>.</p>

  <p>User agents may ignore this attribute if the user has indicated
  (for example, by starting to type in a form control) that he does
  not wish focus to be changed.</p>

  <p class="note">Focusing the control does not imply that the user
  agent must focus the browser window if it has lost focus.</p>

  <p>The <dfn id="dom-fe-autofocus" title="dom-fe-autofocus"><code>autofocus</code></dfn>
  IDL attribute must <a href="urls.html#reflect">reflect</a> the content attribute of the
  same name.</p>

  </div>

  <div class="example">
   <p>In the following snippet, the text control would be focused when
   the document was loaded.</p>
   <pre>&lt;input maxlength="256" name="q" value="" autofocus&gt;
&lt;input type="submit" value="Search"&gt;</pre>
  </div>


  <h5 id="limiting-user-input-length"><span class="secno">4.10.15.5 </span>Limiting user input length</h5>

  <p>A <dfn id="attr-fe-maxlength" title="attr-fe-maxlength">form control <code title="">maxlength</code> attribute</dfn>, controlled by a <var title="">dirty value flag</var> declares a limit on the number of
  characters a user can input.</p>

  <p>If an element has its <a href="#attr-fe-maxlength" title="attr-fe-maxlength">form
  control <code title="">maxlength</code> attribute</a> specified,
  the attribute's value must be a <a href="common-microsyntaxes.html#valid-non-negative-integer">valid non-negative
  integer</a>. If the attribute is specified and applying the
  <a href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative integers</a> to its value
  results in a number, then that number is the element's <dfn id="maximum-allowed-value-length">maximum
  allowed value length</dfn>. If the attribute is omitted or parsing
  its value results in an error, then there is no <a href="#maximum-allowed-value-length">maximum
  allowed value length</a>.</p>

  <div class="impl">

  <p><strong>Constraint validation</strong>: If an element has a
  <a href="#maximum-allowed-value-length">maximum allowed value length</a>, and its <var title="">dirty value flag</var> is true, and the <a href="common-microsyntaxes.html#code-point-length">code-point
  length</a> of the element's <a href="#concept-fe-value" title="concept-fe-value">value</a> is greater than the element's
  <a href="#maximum-allowed-value-length">maximum allowed value length</a>, then the element is
  <a href="#suffering-from-being-too-long">suffering from being too long</a>.</p>

  <p>User agents may prevent the user from causing the element's <a href="#concept-fe-value" title="concept-fe-value">value</a> to be set to a value whose
  <a href="common-microsyntaxes.html#code-point-length">code-point length</a> is greater than the element's
  <a href="#maximum-allowed-value-length">maximum allowed value length</a>.</p>

  </div>



  <h5 id="form-submission-0"><span class="secno">4.10.15.6 </span>Form submission</h5>

  <p><dfn id="attributes-for-form-submission">Attributes for form submission</dfn> can be specified both
  on <code><a href="forms.html#the-form-element">form</a></code> elements and on <a href="forms.html#concept-submit-button" title="concept-submit-button">submit buttons</a> (elements that
  represent buttons that submit forms, e.g. an <code><a href="the-input-element.html#the-input-element">input</a></code>
  element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is
  in the <a href="number-state.html#submit-button-state" title="attr-input-type-submit">Submit Button</a>
  state).

  <p>The <a href="#attributes-for-form-submission">attributes for form submission</a> that may be
  specified on <code><a href="forms.html#the-form-element">form</a></code> elements are <code title="attr-fs-action"><a href="#attr-fs-action">action</a></code>, <code title="attr-fs-enctype"><a href="#attr-fs-enctype">enctype</a></code>, <code title="attr-fs-method"><a href="#attr-fs-method">method</a></code>, <code title="attr-fs-novalidate"><a href="#attr-fs-novalidate">novalidate</a></code>, and <code title="attr-fs-target"><a href="#attr-fs-target">target</a></code>.</p>

  <p>The corresponding <a href="#attributes-for-form-submission">attributes for form submission</a>
  that may be specified on <a href="forms.html#concept-submit-button" title="concept-submit-button">submit
  buttons</a> are <code title="attr-fs-formaction"><a href="#attr-fs-formaction">formaction</a></code>, <code title="attr-fs-formenctype"><a href="#attr-fs-formenctype">formenctype</a></code>, <code title="attr-fs-formmethod"><a href="#attr-fs-formmethod">formmethod</a></code>, <code title="attr-fs-formnovalidate"><a href="#attr-fs-formnovalidate">formnovalidate</a></code>, and <code title="attr-fs-formtarget"><a href="#attr-fs-formtarget">formtarget</a></code>. When omitted, they
  default to the values given on the corresponding attributes on the
  <code><a href="forms.html#the-form-element">form</a></code> element.</p>

  <hr><p>The <dfn id="attr-fs-action" title="attr-fs-action"><code>action</code></dfn> and
  <dfn id="attr-fs-formaction" title="attr-fs-formaction"><code>formaction</code></dfn>
  content attributes, if specified, must have a value that is a
  <a href="urls.html#valid-url">valid URL</a>.</p>

  <p>The <dfn id="concept-fs-action" title="concept-fs-action">action</dfn> of an element is
  the value of the element's <code title="attr-fs-formaction"><a href="#attr-fs-formaction">formaction</a></code> attribute, if the
  element is a <a href="forms.html#concept-submit-button" title="concept-submit-button">submit
  button</a> and has such an attribute, or the value of its
  <a href="#form-owner">form owner</a>'s <code title="attr-fs-action"><a href="#attr-fs-action">action</a></code>
  attribute, if <em>it</em> has one, or else the empty string.</p>

  <hr><p>The <dfn id="attr-fs-method" title="attr-fs-method"><code>method</code></dfn> and
  <dfn id="attr-fs-formmethod" title="attr-fs-formmethod"><code>formmethod</code></dfn>
  content attributes are <a href="common-microsyntaxes.html#enumerated-attribute" title="enumerated attribute">enumerated
  attributes</a> with the following keywords and states:</p>

  <ul><li>The keyword <dfn id="attr-fs-method-get-keyword" title="attr-fs-method-GET-keyword"><code>GET</code></dfn>, mapping
   to the state <dfn id="attr-fs-method-get" title="attr-fs-method-GET">GET</dfn>, indicating
   the HTTP GET method.</li>

   <li>The keyword <dfn id="attr-fs-method-post-keyword" title="attr-fs-method-POST-keyword"><code>POST</code></dfn>, mapping
   to the state <dfn id="attr-fs-method-post" title="attr-fs-method-POST">POST</dfn>, indicating
   the HTTP POST method.</li>

   <li>The keyword <dfn id="attr-fs-method-put-keyword" title="attr-fs-method-PUT-keyword"><code>PUT</code></dfn>, mapping
   to the state <dfn id="attr-fs-method-put" title="attr-fs-method-PUT">PUT</dfn>, indicating
   the HTTP PUT method.</li>

   <li>The keyword <dfn id="attr-fs-method-delete-keyword" title="attr-fs-method-DELETE-keyword"><code>DELETE</code></dfn>, mapping
   to the state <dfn id="attr-fs-method-delete" title="attr-fs-method-DELETE">DELETE</dfn>, indicating
   the HTTP DELETE method.</li>

  </ul><p>The <i>missing value default</i> for these attributes is the
  <a href="#attr-fs-method-get" title="attr-fs-method-GET">GET</a> state.</p>

  <p>The <dfn id="concept-fs-method" title="concept-fs-method">method</dfn> of an element is
  one of those four states. If the element is a <a href="forms.html#concept-submit-button" title="concept-submit-button">submit button</a> and has a <code title="attr-fs-formmethod"><a href="#attr-fs-formmethod">formmethod</a></code> attribute, then the
  element's <a href="#concept-fs-method" title="concept-fs-method">method</a> is that
  attribute's state; otherwise, it is the <a href="#form-owner">form owner</a>'s
  <code title="attr-fs-method"><a href="#attr-fs-method">method</a></code> attribute's state.</p>

  <hr><p>The <dfn id="attr-fs-enctype" title="attr-fs-enctype"><code>enctype</code></dfn> and
  <dfn id="attr-fs-formenctype" title="attr-fs-formenctype"><code>formenctype</code></dfn>
  content attributes are <a href="common-microsyntaxes.html#enumerated-attribute" title="enumerated attribute">enumerated
  attributes</a> with the following keywords and states:</p>

  <ul><li>The "<dfn id="attr-fs-enctype-urlencoded" title="attr-fs-enctype-urlencoded"><code>application/x-www-form-urlencoded</code></dfn>" keyword and corresponding state.</li>
   <li>The "<dfn id="attr-fs-enctype-formdata" title="attr-fs-enctype-formdata"><code>multipart/form-data</code></dfn>" keyword and corresponding state.</li>
   <li>The "<dfn id="attr-fs-enctype-text" title="attr-fs-enctype-text"><code>text/plain</code></dfn>" keyword and corresponding state.</li>
  </ul><p>The <i>missing value default</i> for these attributes is the
  <code title="attr-fs-enctype-urlencoded"><a href="#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code>
  state.</p>

  <p>The <dfn id="concept-fs-enctype" title="concept-fs-enctype">enctype</dfn> of an element
  is one of those three states. If the element is a <a href="forms.html#concept-submit-button" title="concept-submit-button">submit button</a> and has a <code title="attr-fs-formenctype"><a href="#attr-fs-formenctype">formenctype</a></code> attribute, then the
  element's <a href="#concept-fs-enctype" title="concept-fs-enctype">enctype</a> is that
  attribute's state; otherwise, it is the <a href="#form-owner">form owner</a>'s
  <code title="attr-fs-enctype"><a href="#attr-fs-enctype">enctype</a></code> attribute's state.</p>

  <hr><p>The <dfn id="attr-fs-target" title="attr-fs-target"><code>target</code></dfn> and
  <dfn id="attr-fs-formtarget" title="attr-fs-formtarget"><code>formtarget</code></dfn>
  content attributes, if specified, must have values that are <a href="browsers.html#valid-browsing-context-name-or-keyword" title="valid browsing context name or keyword">valid browsing
  context names or keywords</a>.</p>

  <p>The <dfn id="concept-fs-target" title="concept-fs-target">target</dfn> of an element is
  the value of the element's <code title="attr-fs-formtarget"><a href="#attr-fs-formtarget">formtarget</a></code> attribute, if the
  element is a <a href="forms.html#concept-submit-button" title="concept-submit-button">submit
  button</a> and has such an attribute; or the value of its
  <a href="#form-owner">form owner</a>'s <code title="attr-fs-target"><a href="#attr-fs-target">target</a></code>
  attribute, if <em>it</em> has such an attribute; or, if one of the
  child nodes of <a href="dom.html#the-head-element">the <code>head</code> element</a> is a
  <code><a href="semantics.html#the-base-element">base</a></code> element with a <code title="attr-base-target"><a href="semantics.html#attr-base-target">target</a></code> attribute, then the value of
  the <code title="attr-base-target"><a href="semantics.html#attr-base-target">target</a></code> attribute of the
  first such <code><a href="semantics.html#the-base-element">base</a></code> element; or, if there is no such
  element, the empty string.</p> <!-- c.f. hyperlink following -->

  <hr><p>The <dfn id="attr-fs-novalidate" title="attr-fs-novalidate"><code>novalidate</code></dfn>
  and <dfn id="attr-fs-formnovalidate" title="attr-fs-formnovalidate"><code>formnovalidate</code></dfn>
  content attributes are <a href="common-microsyntaxes.html#boolean-attribute" title="boolean attribute">boolean
  attributes</a>. If present, they indicate that the form is not to
  be validated during submission.</p>

  <p>The <dfn id="concept-fs-novalidate" title="concept-fs-novalidate">no-validate state</dfn> of
  an element is true if the element is a <a href="forms.html#concept-submit-button" title="concept-submit-button">submit button</a> and the element's
  <code title="attr-fs-formnovalidate"><a href="#attr-fs-formnovalidate">formnovalidate</a></code> attribute
  is present, or if the element's <a href="#form-owner">form owner</a>'s <code title="attr-fs-novalidate"><a href="#attr-fs-novalidate">novalidate</a></code> attribute is present,
  and false otherwise.</p>

  <div class="example">

   <p>This attribute is useful to include "save" buttons on forms that
   have validation constraints, to allow users to save their progress
   even though they haven't fully entered the data in the form. The
   following example shows a simple form that has two required
   fields. There are three buttons: one to submit the form, which
   requires both fields to be filled in; one to save the form so that
   the user can come back and fill it in later; and one to cancel the
   form altogether.</p>

   <pre>&lt;form action="editor.cgi" method="post"&gt;
 &lt;p&gt;&lt;label&gt;Name: &lt;input required name=fn&gt;&lt;/label&gt;&lt;/p&gt;
 &lt;p&gt;&lt;label&gt;Essay: &lt;textarea name=essay&gt;&lt;/textarea&gt;&lt;/label&gt;&lt;/p&gt;
 &lt;p&gt;&lt;input type=submit name=submit value="Submit essay"&gt;&lt;/p&gt;
 &lt;p&gt;&lt;input type=submit formnovalidate name=save value="Save essay"&gt;&lt;/p&gt;
 &lt;p&gt;&lt;input type=submit formnovalidate name=cancel value="Cancel"&gt;&lt;/p&gt;
&lt;/form&gt;</pre>

  </div>

  <div class="impl">

  <hr><p>The <dfn id="dom-fs-action" title="dom-fs-action"><code>action</code></dfn>, <dfn id="dom-fs-method" title="dom-fs-method"><code>method</code></dfn>, <dfn id="dom-fs-enctype" title="dom-fs-enctype"><code>enctype</code></dfn>, and <dfn id="dom-fs-target" title="dom-fs-target"><code>target</code></dfn> IDL attributes must
  <a href="urls.html#reflect">reflect</a> the respective content attributes of the same
  name. The <dfn id="dom-fs-novalidate" title="dom-fs-noValidate"><code>noValidate</code></dfn> IDL
  attribute must reflect the <code title="attr-fs-novalidate"><a href="#attr-fs-novalidate">novalidate</a></code> content attribute.  The
  <dfn id="dom-fs-formaction" title="dom-fs-formAction"><code>formAction</code></dfn> IDL
  attribute must reflect the <code title="attr-fs-formaction"><a href="#attr-fs-formaction">formaction</a></code> content attribute. The
  <dfn id="dom-fs-formenctype" title="dom-fs-formEnctype"><code>formEnctype</code></dfn> IDL
  attribute must reflect the <code title="attr-fs-formenctype"><a href="#attr-fs-formenctype">formenctype</a></code> content attribute.
  The <dfn id="dom-fs-formmethod" title="dom-fs-formMethod"><code>formMethod</code></dfn> IDL
  attribute must reflect the <code title="attr-fs-formmethod"><a href="#attr-fs-formmethod">formmethod</a></code> content attribute. The
  <dfn id="dom-fs-formnovalidate" title="dom-fs-formNoValidate"><code>formNoValidate</code></dfn>
  IDL attribute must reflect the <code title="attr-fs-formnovalidate"><a href="#attr-fs-formnovalidate">formnovalidate</a></code> content
  attribute. The <dfn id="dom-fs-formtarget" title="dom-fs-formTarget"><code>formTarget</code></dfn> IDL
  attribute must reflect the <code title="attr-fs-formtarget"><a href="#attr-fs-formtarget">formtarget</a></code> content attribute.

  </div>



  <h4 id="constraints"><span class="secno">4.10.16 </span>Constraints</h4>

  <h5 id="definitions"><span class="secno">4.10.16.1 </span>Definitions</h5>

  <div class="impl">

  <p>A <a href="forms.html#category-listed" title="category-listed">listed form-associated
  element</a> is a <dfn id="candidate-for-constraint-validation">candidate for constraint validation</dfn>
  except when a condition has <dfn id="barred-from-constraint-validation" title="barred from constraint
  validation">barred the element from constraint
  validation</dfn>. (For example, an element is <a href="#barred-from-constraint-validation">barred from
  constraint validation</a> if it is an <code><a href="the-button-element.html#the-output-element">output</a></code> or
  <code><a href="forms.html#the-fieldset-element">fieldset</a></code> element.)</p>

  <p>An element can have a <dfn id="custom-validity-error-message">custom validity error message</dfn>
  defined. Initially, an element must have its <a href="#custom-validity-error-message">custom validity
  error message</a> set to the empty string. When its value is not
  the empty string, the element is <a href="#suffering-from-a-custom-error">suffering from a custom
  error</a>. It can be set using the <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code>
  method. The user agent should use the <a href="#custom-validity-error-message">custom validity error
  message</a> when alerting the user to the problem with the
  control.</p>

  <p>An element can be constrained in various ways. The following is
  the list of <dfn id="validity-states">validity states</dfn> that a form control can be
  in, making the control invalid for the purposes of constraint
  validation. (The definitions below are non-normative; other parts of
  this specification define more precisely when each state applies or
  does not.)</p>

  <dl><dt> <dfn id="suffering-from-being-missing">Suffering from being missing</dfn> </dt>

   <dd> <p>When a control has no <a href="#concept-fe-value" title="concept-fe-value">value</a> but has a <code title="">required</code> attribute (<code><a href="the-input-element.html#the-input-element">input</a></code> <code title="attr-input-required"><a href="common-input-element-attributes.html#attr-input-required">required</a></code>, <code><a href="the-button-element.html#the-textarea-element">textarea</a></code>
   <code title="attr-textarea-required"><a href="the-button-element.html#attr-textarea-required">required</a></code>). </dd>

   <dt> <dfn id="suffering-from-a-type-mismatch">Suffering from a type mismatch</dfn> </dt>

   <dd> <p>When a control that allows arbitrary user
   input has a <a href="#concept-fe-value" title="concept-fe-value">value</a> that is not
   in the correct syntax (<a href="states-of-the-type-attribute.html#e-mail-state" title="attr-input-type-email">E-mail</a>, <a href="states-of-the-type-attribute.html#url-state" title="attr-input-type-url">URL</a>). </dd>

   <dt> <dfn id="suffering-from-a-pattern-mismatch">Suffering from a pattern mismatch</dfn> </dt>

   <dd> <p>When a control has a <a href="#concept-fe-value" title="concept-fe-value">value</a> that doesn't satisfy the
   <code title="attr-input-pattern"><a href="common-input-element-attributes.html#attr-input-pattern">pattern</a></code> attribute.</dd>

   <dt> <dfn id="suffering-from-being-too-long">Suffering from being too long</dfn> </dt>

   <dd> <p>When a control has a <a href="#concept-fe-value" title="concept-fe-value">value</a> that is too long for the
   <a href="#attr-fe-maxlength" title="attr-fe-maxlength">form control <code title="">maxlength</code> attribute</a> (<code><a href="the-input-element.html#the-input-element">input</a></code>
   <code title="attr-input-maxlength"><a href="common-input-element-attributes.html#attr-input-maxlength">maxlength</a></code>,
   <code><a href="the-button-element.html#the-textarea-element">textarea</a></code> <code title="attr-textarea-maxlength"><a href="the-button-element.html#attr-textarea-maxlength">maxlength</a></code>). </dd>

   <dt> <dfn id="suffering-from-an-underflow">Suffering from an underflow</dfn> </dt>

   <dd> <p>When a control has a <a href="#concept-fe-value" title="concept-fe-value">value</a> that is too low for the <code title="attr-input-min"><a href="common-input-element-attributes.html#attr-input-min">min</a></code> attribute.</dd>

   <dt> <dfn id="suffering-from-an-overflow">Suffering from an overflow</dfn> </dt>

   <dd> <p>When a control has a <a href="#concept-fe-value" title="concept-fe-value">value</a> that is too high for the
   <code title="attr-input-max"><a href="common-input-element-attributes.html#attr-input-max">max</a></code> attribute.</dd>

   <dt> <dfn id="suffering-from-a-step-mismatch">Suffering from a step mismatch</dfn> </dt>

   <dd> <p>When a control has a <a href="#concept-fe-value" title="concept-fe-value">value</a> that doesn't fit the rules
   given by the <code title="attr-input-step"><a href="common-input-element-attributes.html#attr-input-step">step</a></code>
   attribute.</dd>

   <dt> <dfn id="suffering-from-a-custom-error">Suffering from a custom error</dfn> </dt>

   <dd> <p>When a control's <a href="#custom-validity-error-message">custom validity error
   message</a> (as set by the element's <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code>
   method) is not the empty string.</p> </dd>

  </dl><p class="note">An element can still suffer from these states even
  when the element is <a href="#concept-fe-disabled" title="concept-fe-disabled">disabled</a>; thus these states can
  be represented in the DOM even if validating the form during
  submission wouldn't indicate a problem to the user.</p>

  <p>An element <dfn id="concept-fv-valid" title="concept-fv-valid">satisfies its
  constraints</dfn> if it is not suffering from any of the above
  <a href="#validity-states">validity states</a>.</p>

  </div>



  <div class="impl">

  <h5 id="constraint-validation"><span class="secno">4.10.16.2 </span>Constraint validation</h5>

  <p>When the user agent is required to <dfn id="statically-validate-the-constraints">statically validate the
  constraints</dfn> of <code><a href="forms.html#the-form-element">form</a></code> element <var title="">form</var>, it must run the following steps, which return
  either a <i>positive</i> result (all the controls in the form are
  valid) or a <i>negative</i> result (there are invalid controls)
  along with a (possibly empty) list of elements that are invalid and
  for which no script has claimed responsibility:</p>

  <ol><li><p>Let <var title="">controls</var> be a list of all the <a href="forms.html#category-submit" title="category-submit">submittable</a> elements whose
   <a href="#form-owner">form owner</a> is <var title="">form</var>, in <a href="infrastructure.html#tree-order">tree
   order</a>.</li>

   <li><p>Let <var title="">invalid controls</var> be an initially
   empty list of elements.</li>

   <li>

    <p>For each element <var title="">field</var> in <var title="">controls</var>, in <a href="infrastructure.html#tree-order">tree order</a>, run the
    following substeps:</p>

    <ol><li><p>If <var title="">field</var> is not a <a href="#candidate-for-constraint-validation">candidate for
     constraint validation</a>, then move on to the next
     element.</li>

     <li><p>Otherwise, if <var title="">field</var> <a href="#concept-fv-valid" title="concept-fv-valid">satisfies its constraints</a>, then
     move on to the next element.</li>

     <li><p>Otherwise, add <var title="">field</var> to <var title="">invalid controls</var>.</li>

    </ol></li>

   <li><p>If <var title="">invalid controls</var> is empty, then
   return a <i>positive</i> result and abort these steps.</li>

   <li><p>Let <var title="">unhandled invalid controls</var> be an
   initially empty list of elements.</li>

   <li>

    <p>For each element <var title="">field</var> in <var title="">invalid controls</var>, if any, in <a href="infrastructure.html#tree-order">tree
    order</a>, run the following substeps:</p>

    <ol><li><p><a href="origin-0.html#fire-a-simple-event">Fire a simple event</a> named <code title="event-invalid">invalid</code> that is cancelable at <var title="">field</var>.</li>

     <li><p>If the event was not canceled, then add <var title="">field</var> to <var title="">unhandled invalid
     controls</var>.</li>

    </ol></li>

   <li><p>Return a <i>negative</i> result with the list of elements in
   the <var title="">unhandled invalid controls</var> list.</li>

  </ol><p>If a user agent is to <dfn id="interactively-validate-the-constraints">interactively validate the
  constraints</dfn> of <code><a href="forms.html#the-form-element">form</a></code> element <var title="">form</var>, then the user agent must run the following
  steps:</p>

  <ol><li><p><a href="#statically-validate-the-constraints">Statically validate the constraints</a> of <var title="">form</var>, and let <var title="">unhandled invalid
   controls</var> be the list of elements returned if the result was
   <i>negative</i>.</li>

   <li><p>If the result was <i>positive</i>, then return that result
   and abort these steps.</li>

   <li><p>Report the problems with the constraints of at least one of
   the elements given in <var title="">unhandled invalid
   controls</var> to the user. User agents may focus one of those
   elements in the process, by running the <a href="editing.html#focusing-steps">focusing steps</a>
   for that element, and may change the scrolling position of the
   document, or perform some other action that brings the element to
   the user's attention. User agents may report more than one
   constraint violation. User agents may coalesce related constraint
   violation reports if appropriate (e.g. if multiple radio buttons in
   a <a href="number-state.html#radio-button-group" title="radio button group">group</a> are marked as
   required, only one error need be reported). If one of the controls
   is not <a href="rendering.html#being-rendered">being rendered</a> (e.g. it has the <code title="attr-hidden"><a href="editing.html#the-hidden-attribute">hidden</a></code> attribute set) then user agents
   may report a script error.</li>

   <li><p>Return a <i>negative</i> result.</li>

  </ol></div>



  <h5 id="the-constraint-validation-api"><span class="secno">4.10.16.3 </span>The <dfn>constraint validation API</dfn></h5>

  <dl class="domintro"><dt><var title="">element</var> . <code title="dom-cva-willValidate"><a href="#dom-cva-willvalidate">willValidate</a></code></dt>

   <dd>

    <p>Returns true if the element will be validated when the form is submitted; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity</a></code>(<var title="">message</var>)</dt>

   <dd>

    <p>Sets a custom error, so that the element would fail to
    validate. The given message is the message to be shown to the user
    when reporting the problem to the user.</p>

    <p>If the argument is the empty string, clears the custom error.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-valueMissing"><a href="#dom-validitystate-valuemissing">valueMissing</a></code></dt>

   <dd>

    <p>Returns true if the element has no value but is a required field; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-typeMismatch"><a href="#dom-validitystate-typemismatch">typeMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value is not in the correct syntax; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-patternMismatch"><a href="#dom-validitystate-patternmismatch">patternMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value doesn't match the provided pattern; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-tooLong"><a href="#dom-validitystate-toolong">tooLong</a></code></dt>

   <dd>

    <p>Returns true if the element's value is longer than the provided maximum length; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-rangeUnderflow"><a href="#dom-validitystate-rangeunderflow">rangeUnderflow</a></code></dt>

   <dd>

    <p>Returns true if the element's value is lower than the provided minimum; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-rangeOverflow"><a href="#dom-validitystate-rangeoverflow">rangeOverflow</a></code></dt>

   <dd>

    <p>Returns true if the element's value is higher than the provided maximum; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-stepMismatch"><a href="#dom-validitystate-stepmismatch">stepMismatch</a></code></dt>

   <dd>

    <p>Returns true if the element's value doesn't fit the rules given by the <code title="attr-input-step"><a href="common-input-element-attributes.html#attr-input-step">step</a></code> attribute; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-customError"><a href="#dom-validitystate-customerror">customError</a></code></dt>

   <dd>

    <p>Returns true if the element has a custom error; false otherwise.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> . <code title="dom-validitystate-valid"><a href="#dom-validitystate-valid">valid</a></code></dt>

   <dd>

    <p>Returns true if the element's value has no validity problems; false otherwise.</p>

   </dd>

   <dt><var title="">valid</var> = <var title="">element</var> . <code title="dom-cva-checkValidatity"><a href="#dom-cva-checkvalidatity">checkValidity</a></code>()</dt>

   <dd>

    <p>Returns true if the element's value has no validity problems;
    false otherwise. Fires an <code title="event-invalid">invalid</code> event at the element in the
    latter case.</p>

   </dd>

   <dt><var title="">element</var> . <code title="dom-cva-validationMessage"><a href="#dom-cva-validationmessage">validationMessage</a></code></dt>

   <dd>

    <p>Returns the error message that would be shown to the user if
    the element was to be checked for validity.</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn id="dom-cva-willvalidate" title="dom-cva-willValidate"><code>willValidate</code></dfn>
  attribute must return true if an element is a <a href="#candidate-for-constraint-validation">candidate for
  constraint validation</a>, and false otherwise (i.e. false if any
  conditions are <a href="#barred-from-constraint-validation" title="barred from constraint
  validation">barring it from constraint validation</a>).</p>

  <p>The <dfn id="dom-cva-setcustomvalidity" title="dom-cva-setCustomValidity"><code>setCustomValidity(<var title="">message</var>)</code></dfn>, when invoked, must set the
  <a href="#custom-validity-error-message">custom validity error message</a> to the value of the given
  <var title="">message</var> argument.</p>

  </div>

  <div class="example">

   <p>In the following example, a script checks the value of a form
   control each time it is edited, and whenever it is not a valid
   value, uses the <code title="dom-cva-setCustomValidity"><a href="#dom-cva-setcustomvalidity">setCustomValidity()</a></code> method
   to set an appropriate message.</p>

   <pre>&lt;label&gt;Feeling: &lt;input name=f type="text" oninput="check(this)"&gt;&lt;/label&gt;
&lt;script&gt;
 function check(input) {
   if (input.value == "good" ||
       input.value == "fine" ||
       input.value == "tired") {
     input.setCustomValidity('"' + input.value + '" is not a feeling.');
<!--   } else if (input.value == "...") {
     input.setCustomValidity('...');
-->   } else {
     // input is fine -- reset the error message
     input.setCustomValidity('');
   }
 }
&lt;/script&gt;</pre>

  </div>

  <div class="impl">

  <p>The <dfn id="dom-cva-validity" title="dom-cva-validity"><code>validity</code></dfn>
  attribute must return a <code><a href="#validitystate">ValidityState</a></code> object that
  represents the <a href="#validity-states">validity states</a> of the element. This
  object is live, and the same object must be returned each time the
  element's <code title="dom-cva-validity"><a href="#dom-cva-validity">validity</a></code> attribute
  is retrieved.</p>

<pre class="idl">interface <dfn id="validitystate">ValidityState</dfn> {
  readonly attribute boolean <a href="#dom-validitystate-valuemissing" title="dom-ValidityState-valueMissing">valueMissing</a>;
  readonly attribute boolean <a href="#dom-validitystate-typemismatch" title="dom-ValidityState-typeMismatch">typeMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-patternmismatch" title="dom-ValidityState-patternMismatch">patternMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-toolong" title="dom-ValidityState-tooLong">tooLong</a>;
  readonly attribute boolean <a href="#dom-validitystate-rangeunderflow" title="dom-ValidityState-rangeUnderflow">rangeUnderflow</a>;
  readonly attribute boolean <a href="#dom-validitystate-rangeoverflow" title="dom-ValidityState-rangeOverflow">rangeOverflow</a>;
  readonly attribute boolean <a href="#dom-validitystate-stepmismatch" title="dom-ValidityState-stepMismatch">stepMismatch</a>;
  readonly attribute boolean <a href="#dom-validitystate-customerror" title="dom-ValidityState-customError">customError</a>;
  readonly attribute boolean <a href="#dom-validitystate-valid" title="dom-ValidityState-valid">valid</a>;
};</pre>

  <p>A <code><a href="#validitystate">ValidityState</a></code> object has the following
  attributes. On getting, they must return true if the corresponding
  condition given in the following list is true, and false
  otherwise.</p>

  <dl><dt><dfn id="dom-validitystate-valuemissing" title="dom-ValidityState-valueMissing"><code>valueMissing</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-being-missing">suffering from being missing</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-typemismatch" title="dom-ValidityState-typeMismatch"><code>typeMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-type-mismatch">suffering from a type mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-patternmismatch" title="dom-ValidityState-patternMismatch"><code>patternMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-pattern-mismatch">suffering from a pattern mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-toolong" title="dom-ValidityState-tooLong"><code>tooLong</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-being-too-long">suffering from being too long</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-rangeunderflow" title="dom-ValidityState-rangeUnderflow"><code>rangeUnderflow</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-an-underflow">suffering from an underflow</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-rangeoverflow" title="dom-ValidityState-rangeOverflow"><code>rangeOverflow</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-an-overflow">suffering from an overflow</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-stepmismatch" title="dom-ValidityState-stepMismatch"><code>stepMismatch</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-step-mismatch">suffering from a step mismatch</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-customerror" title="dom-ValidityState-customError"><code>customError</code></dfn></dt>
   <dd> <p>The control is <a href="#suffering-from-a-custom-error">suffering from a custom error</a>.</p> </dd>

   <dt><dfn id="dom-validitystate-valid" title="dom-ValidityState-valid"><code>valid</code></dfn></dt>
   <dd> <p>None of the other conditions are true.</p> </dd>

  </dl><p>When the <dfn id="dom-cva-checkvalidatity" title="dom-cva-checkValidatity"><code>checkValidity()</code></dfn>
  method is invoked, if the element is a <a href="#candidate-for-constraint-validation">candidate for
  constraint validation</a> and does not <a href="#concept-fv-valid" title="concept-fv-valid">satisfy its constraints</a>, the user
  agent must <a href="origin-0.html#fire-a-simple-event">fire a simple event</a> named <code title="event-invalid">invalid</code> that is cancelable (but in this
  case has no default action) at the element and return
  false. Otherwise, it must only return true without doing anything
  else.</p>

  <p>The <dfn id="dom-cva-validationmessage" title="dom-cva-validationMessage"><code>validationMessage</code></dfn>
  attribute must return the empty string if the element is not a
  <a href="#candidate-for-constraint-validation">candidate for constraint validation</a> or if it is one but
  it <a href="#concept-fv-valid" title="concept-fv-valid">satisfies its constraints</a>;
  otherwise, it must return a suitably localized message that the user
  agent would show the user if this were the only form with a validity
  constraint problem. If the element is a <a href="#candidate-for-constraint-validation">candidate for
  constraint validation</a> and is <a href="#suffering-from-a-custom-error">suffering from a custom
  error</a>, then the <a href="#custom-validity-error-message">custom validity error message</a>
  should be present in the return value.</p>

  </div>


  <div class="impl">

  <h5 id="security-0"><span class="secno">4.10.16.4 </span>Security</h5>

  <p>Servers should not rely on client-side validation. Client-side
  validation can be intentionally bypassed by hostile users, and
  unintentionally bypassed by users of older user agents or automated
  tools that do not implement these features. The constraint
  validation features are only intended to improve the user
  experience, not to provide any kind of security mechanism.</p>

  </div>




  <h4 id="form-submission"><span class="secno">4.10.17 </span><dfn>Form submission</dfn></h4>

  <div class="impl">

  <h5 id="introduction-0"><span class="secno">4.10.17.1 </span>Introduction</h5>

  </div>

  <p><i>This section is non-normative.</i></p>

  <p>When forms are submitted, the data in the form is converted into
  the form specified by the <a href="#concept-fs-enctype" title="concept-fs-enctype">enctype</a>, and then sent to the
  destination specified by the <a href="#concept-fs-action" title="concept-fs-action">action</a> using the given <a href="#concept-fs-method" title="concept-fs-method">method</a>.</p>

  <p>For example, take the following form:</p>

  <pre>&lt;form action="/find.cgi" method=get&gt;
 &lt;input type=text name=t&gt;
 &lt;input type=search name=q&gt;
 &lt;input type=submit&gt;
&lt;/form&gt;</pre>

  <p>If the user types in "cats" in the first field and "fur" in the
  second, and then hits the submit button, then the user agent will
  load <code title="">/find.cgi?t=cats&amp;q=fur</code>.</p>

  <p>On the other hand, consider this form:</p>

  <pre>&lt;form action="/find.cgi" method=post enctype="multipart/form-data"&gt;
 &lt;input type=text name=t&gt;
 &lt;input type=search name=q&gt;
 &lt;input type=submit&gt;
&lt;/form&gt;</pre>

  <p>Given the same user input, the result on submission is quite
  different: the user agent instead does an HTTP POST to the given
  URL, with as the entity body something like the following text:</p>

  <pre>------kYFrd4jNJEgCervE
Content-Disposition: form-data; name="t"

cats
------kYFrd4jNJEgCervE
Content-Disposition: form-data; name="q"

fur
------kYFrd4jNJEgCervE--</pre>



  <div class="impl">

  <h5 id="implicit-submission"><span class="secno">4.10.17.2 </span>Implicit submission</h5>

  <p>User agents may establish a <a href="forms.html#concept-button" title="concept-button">button</a> in each form as being the
  form's <dfn id="default-button">default button</dfn>. This should be the first <a href="forms.html#concept-submit-button" title="concept-submit-button">submit button</a> in <a href="infrastructure.html#tree-order">tree
  order</a> whose <a href="#form-owner">form owner</a> is that <code><a href="forms.html#the-form-element">form</a></code>
  element, but user agents may pick another button if another would be
  more appropriate for the platform. If the platform supports letting
  the user submit a form implicitly (for example, on some platforms
  hitting the "enter" key while a text field is focused implicitly
  submits the form), then doing so must cause the form's <a href="#default-button">default
  button</a>'s <a href="content-models.html#activation-behavior">activation behavior</a>, if any, to be
  run.</p>

  <p class="note">Consequently, if the <a href="#default-button">default button</a> is
  <a href="#concept-fe-disabled" title="concept-fe-disabled">disabled</a>, the form is not
  submitted when such an implicit submission mechanism is used. (A
  button has no <a href="content-models.html#activation-behavior">activation behavior</a> when disabled.)</p>

  <p>If the form has no <a href="forms.html#concept-submit-button" title="concept-submit-button">submit
  button</a>, then the implicit submission mechanism must just
  <a href="#concept-form-submit" title="concept-form-submit">submit</a> the
  <code><a href="forms.html#the-form-element">form</a></code> element from the <code><a href="forms.html#the-form-element">form</a></code> element
  itself.</p>

  </div>


  <div class="impl">

  <h5 id="form-submission-algorithm"><span class="secno">4.10.17.3 </span>Form submission algorithm</h5>

  <p>When a form <var title="">form</var> is <dfn id="concept-form-submit" title="concept-form-submit">submitted</dfn> from an element <var title="">submitter</var> (typically a button), optionally with a
  <var title="">scripted-submit</var> flag set, the user agent must
  run the following steps:</p>

  <ol><li id="sandboxSubmitBlocked"><p>If <var title="">form</var> is in
   a <code>Document</code> that has no associated <a href="browsers.html#browsing-context">browsing
   context</a> or whose <a href="browsers.html#browsing-context">browsing context</a> has its
   <a href="the-iframe-element.html#sandboxed-forms-browsing-context-flag">sandboxed forms browsing context flag</a> set, then abort
   these steps without doing anything.</li>

   <li><p>If <var title="">form</var> is already being submitted
   (i.e. the form was <a href="#concept-form-submit" title="concept-form-submit">submitted</a> again while processing
   the events fired from the next two steps, probably from a script
   redundantly calling the <code title="dom-form-submit"><a href="forms.html#dom-form-submit">submit()</a></code> method on <var title="">form</var>), then abort these steps. This doesn't affect
   the earlier instance of this algorithm.</li>

   <!-- lock (implicit in previous step) -->

   <li><p>If the <var title="">scripted-submit</var> flag is not set,
   and the <var title="">submitter</var> element's <a href="#concept-fs-novalidate" title="concept-fs-novalidate">no-validate state</a> is false,
   then <a href="#interactively-validate-the-constraints">interactively validate the constraints</a> of <var title="">form</var> and examine the result: if the result is
   negative (the constraint validation concluded that there were
   invalid fields and probably informed the user of this) then abort
   these steps.</li>

   <li><p>If the <var title="">scripted-submit</var> flag is not set,
   then <a href="origin-0.html#fire-a-simple-event">fire a simple event</a> that is cancelable named
   <code title="event-submit">submit</code>, at <var title="">form</var>. If the event's default action is prevented
   (i.e. if the event is canceled) then abort these steps. Otherwise,
   continue (effectively the default action is to perform the
   submission).</li>

   <!-- if you add any steps between the "lock" and "unlock" lines,
   make sure to update the step immediately before the "lock" line -->

   <!-- unlock -->

   <li><p>Let <var title="">controls</var> be a list of all the <a href="forms.html#category-submit" title="category-submit">submittable</a> elements whose
   <a href="#form-owner">form owner</a> is <var title="">form</var>, in <a href="infrastructure.html#tree-order">tree
   order</a>.</li>

   <li><p>Let the <var title="">form data set</var> be a list of
   name-value-type tuples, initially empty.</li>

   <li id="constructing-form-data-set">

    <p><strong>Constructing the form data set</strong>. For each
    element <var title="">field</var> in <var title="">controls</var>,
    in <a href="infrastructure.html#tree-order">tree order</a>, run the following substeps:</p>

    <ol><li>

      <p>If any of the following conditions are met, then skip these
      substeps for this element:</p>

      <ul><li>The <var title="">field</var> element has a
       <code><a href="the-button-element.html#the-datalist-element">datalist</a></code> element ancestor.</li>

       <li>The <var title="">field</var> element is <a href="#concept-fe-disabled" title="concept-fe-disabled">disabled</a>.</li>

       <li>The <var title="">field</var> element is a <a href="forms.html#concept-button" title="concept-button">button</a> but it is not <var title="">submitter</var>.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="number-state.html#checkbox-state" title="attr-input-type-checkbox">Checkbox</a> state and
       whose <a href="#concept-fe-checked" title="concept-fe-checked">checkedness</a> is
       false.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="number-state.html#radio-button-state" title="attr-input-type-radio">Radio Button</a> state and
       whose <a href="#concept-fe-checked" title="concept-fe-checked">checkedness</a> is
       false.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="number-state.html#file-upload-state" title="attr-input-type-file">File Upload</a> state but
       the control does not have any files selected.</li>

       <li>The <var title="">field</var> element is an
       <code><a href="the-iframe-element.html#the-object-element">object</a></code> element that is not using a
       <a href="infrastructure.html#plugin">plugin</a>.</li>

      </ul><p>Otherwise, process <var title="">field</var> as follows:</p>

     </li>

     <li><p>Let <var title="">type</var> be the value of the <code title="">type</code> IDL attribute of <var title="">field</var>.</li> <!-- if the field is an <object>
     element, this will get ignored. -->

     <li>

      <p>If the <var title="">field</var> element is an
      <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="number-state.html#image-button-state" title="attr-input-type-image">Image Button</a> state,
      then run these further nested substeps:</p>

      <ol><li><p>If the <var title="">field</var> element has an <code title="attr-fe-name"><a href="#attr-fe-name">name</a></code> attribute specified and value
       is not the empty string, let <var title="">name</var> be that
       value followed by a single U+002E FULL STOP character
       (.). Otherwise, let <var title="">name</var> be the empty
       string.</li>

       <li><p>Let <var title="">name<sub title="">x</sub></var> be the
       string consisting of the concatenation of <var title="">name</var> and a single U+0078 LATIN SMALL LETTER X
       character (x).</li>

       <li><p>Let <var title="">name<sub title="">y</sub></var> be the
       string consisting of the concatenation of <var title="">name</var> and a single U+0079 LATIN SMALL LETTER Y
       character (y).</li>

       <li><p>The <var title="">field</var> element is <var title="">submitter</var>, and before this algorithm was invoked
       the user <a href="number-state.html#concept-input-type-image-coordinate" title="concept-input-type-image-coordinate">indicated a
       coordinate</a>. Let <var title="">x</var> be the <var title="">x</var>-component of the coordinate selected by the
       user, and let <var title="">y</var> be the <var title="">y</var>-component of the coordinate selected by the
       user.</li>

       <li><p>Append an entry in the <var title="">form data set</var>
       with the name <var title="">name<sub title="">x</sub></var>,
       the value <var title="">x</var>, and the type <var title="">type</var>.</li>

       <li><p>Append an entry in the <var title="">form data set</var>
       with the name <var title="">name<sub title="">y</sub></var> and
       the value <var title="">y</var>, and the type <var title="">type</var>.</li>

       <li><p>Skip the remaining substeps for this element: if there
       are any more elements in <var title="">controls</var>, return
       to the top of the <a href="#constructing-form-data-set">constructing the form data
       set</a> step, otherwise, jump to the next step in the overall
       form submission algorithm.</li>

      </ol></li>

     <li><p>If the <var title="">field</var> element does not have a
     <code title="attr-fe-name"><a href="#attr-fe-name">name</a></code> attribute specified, or
     its <code title="attr-fe-name"><a href="#attr-fe-name">name</a></code> attribute's value is
     the empty string, skip these substeps for this element: if there
     are any more elements in <var title="">controls</var>, return to
     the top of the <a href="#constructing-form-data-set">constructing
     the form data set</a> step, otherwise, jump to the next step in
     the overall form submission algorithm.</li>

     <li><p>Let <var title="">name</var> be the value of the <var title="">field</var> element's <code title="attr-fe-name"><a href="#attr-fe-name">name</a></code> attribute.</li>

     <li><p>If the <var title="">field</var> element is a
     <code><a href="the-button-element.html#the-select-element">select</a></code> element, then for each <code><a href="the-button-element.html#the-option-element">option</a></code>
     element in the <code><a href="the-button-element.html#the-select-element">select</a></code> element whose <a href="the-button-element.html#concept-option-selectedness" title="concept-option-selectedness">selectedness</a> is true,
     append an entry in the <var title="">form data set</var> with the
     <var title="">name</var> as the name, the <a href="the-button-element.html#concept-option-value" title="concept-option-value">value</a> of the
     <code><a href="the-button-element.html#the-option-element">option</a></code> element as the value, and <var title="">type</var> as the type.</li>

     <li>

      <p>Otherwise, if the <var title="">field</var> element is an
      <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="number-state.html#checkbox-state" title="attr-input-type-checkbox">Checkbox</a> state or the
      <a href="number-state.html#radio-button-state" title="attr-input-type-radio">Radio Button</a> state,
      then run these further nested substeps:</p>

      <ol><li><p>If the <var title="">field</var> element has a <code title="attr-input-value"><a href="the-input-element.html#attr-input-value">value</a></code> attribute specified, then
       let <var title="">value</var> be the value of that attribute;
       otherwise, let <var title="">value</var> be the string
       "<code title="">on</code>".</li>

       <li><p>Append an entry in the <var title="">form data set</var>
       with <var title="">name</var> as the name, <var title="">value</var> as the value, and <var title="">type</var>
       as the type.</li>

      </ol></li>

     <li><p>Otherwise, if the <var title="">field</var> element is an
     <code><a href="the-input-element.html#the-input-element">input</a></code> element whose <code title="attr-input-type"><a href="the-input-element.html#attr-input-type">type</a></code> attribute is in the <a href="number-state.html#file-upload-state" title="attr-input-type-file">File Upload</a> state, then for
     each file <a href="number-state.html#concept-input-type-file-selected" title="concept-input-type-file-selected">selected</a> in the
     <code><a href="the-input-element.html#the-input-element">input</a></code> element, append an entry in the <var title="">form data set</var> with the <var title="">name</var> as
     the name, the file (consisting of the name, the type, and the
     body) as the value, and <var title="">type</var> as the
     type.</li>

     <li><p>Otherwise, if the <var title="">field</var> element is an
     <code><a href="the-iframe-element.html#the-object-element">object</a></code> element: try to obtain a form submission
     value from the <a href="infrastructure.html#plugin">plugin</a><!-- using NPAPI's
     NPP_GetValue() entry point with the NPPVformValue variable -->,
     and if that is successful, append an entry in the <var title="">form data set</var> with <var title="">name</var> as the
     name, the returned form submission value as the value, and the
     string "<code title="">object</code>" as the type.</li>

     <li><p>Otherwise, append an entry in the <var title="">form data
     set</var> with <var title="">name</var> as the name, the <a href="#concept-fe-value" title="concept-fe-value">value</a> of the <var title="">field</var> element as the value, and <var title="">type</var> as the type.</li>

    </ol></li>

   <li><p>Let <var title="">action</var> be the <var title="">submitter</var> element's <a href="#concept-fs-action" title="concept-fs-action">action</a>.</li>

   <li>

    <p>If <var title="">action</var> is the empty string, let <var title="">action</var> be <a href="dom.html#the-document's-address">the document's address</a>.</p>

    <p class="note">This step is a <a href="introduction.html#willful-violation">willful violation</a> of
    RFC 3986, which would require base URL processing here. This
    violation is motivated by a desire for compatibility with legacy
    content. <a href="references.html#refsRFC3986">[RFC3986]</a></p>

    <!-- Don't ask me why. But that's what IE does. It even treats
    action="" differently from action=" " or action="#" (the latter
    two resolve to the base URL, the first one resolves to the doc
    URL). And other browsers concur. It is even required, see e.g.
      http://bugs.webkit.org/show_bug.cgi?id=7763
      https://bugzilla.mozilla.org/show_bug.cgi?id=297761
    -->

   </li>

   <li><p><a href="urls.html#resolve-a-url" title="resolve a url">Resolve</a> the
   <a href="urls.html#url">URL</a> <var title="">action</var>, relative to the <var title="">submitter</var> element. If this fails, abort these
   steps. Otherwise, let <var title="">action</var> be the resulting
   <a href="urls.html#absolute-url">absolute URL</a>.</li>

   <li><p>Let <var title="">scheme</var> be the <a href="urls.html#url-scheme" title="url-scheme">&lt;scheme&gt;</a> of the resulting
   <a href="urls.html#absolute-url">absolute URL</a>.</li>

   <li><p>Let <var title="">enctype</var> be the <var title="">submitter</var> element's <a href="#concept-fs-enctype" title="concept-fs-enctype">enctype</a>.</li>

   <li><p>Let <var title="">method</var> be the <var title="">submitter</var> element's <a href="#concept-fs-method" title="concept-fs-method">method</a>.</li>

   <li><p>Let <var title="">target</var> be the <var title="">submitter</var> element's <a href="#concept-fs-target" title="concept-fs-target">target</a>.</li>

   <li>

    <p>Select the appropriate row in the table below based on the
    value of <var title="">scheme</var> as given by the first cell of
    each row. Then, select the appropriate cell on that row based on
    the value of <var title="">method</var> as given in the first cell
    of each column. Then, jump to the steps named in that cell and
    defined below the table.</p>

    <table><thead><tr><td>
      <th> <a href="#attr-fs-method-get" title="attr-fs-method-GET">GET</a>
      <th> <a href="#attr-fs-method-post" title="attr-fs-method-POST">POST</a>
      <th> <a href="#attr-fs-method-put" title="attr-fs-method-PUT">PUT</a>
      <th> <a href="#attr-fs-method-delete" title="attr-fs-method-DELETE">DELETE</a>
     <tbody><tr><th> <code title="">http</code>
      <td> <a href="#submit-mutate-action" title="submit-mutate-action">Mutate action</a>
      <td> <a href="#submit-body" title="submit-body">Submit as entity body</a>
      <td> <a href="#submit-body" title="submit-body">Submit as entity body</a>
      <td> <a href="#submit-delete-action" title="submit-delete-action">Delete action</a>
     <tr><th> <code title="">https</code>
      <td> <a href="#submit-mutate-action" title="submit-mutate-action">Mutate action</a>
      <td> <a href="#submit-body" title="submit-body">Submit as entity body</a>
      <td> <a href="#submit-body" title="submit-body">Submit as entity body</a>
      <td> <a href="#submit-delete-action" title="submit-delete-action">Delete action</a>
     <tr><th> <code title="">ftp</code>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
     <tr><th> <code title="">javascript</code>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
     <tr><th> <code title="">data</code>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
      <td> <a href="#submit-data-post" title="submit-data-post">Post to data:</a>
      <td> <a href="#submit-data-put" title="submit-data-put">Put to data:</a>
      <td> <a href="#submit-get-action" title="submit-get-action">Get action</a>
     <tr><th> <code title="">mailto</code>
      <td> <a href="#submit-mailto-headers" title="submit-mailto-headers">Mail with headers</a>
      <td> <a href="#submit-mailto-body" title="submit-mailto-body">Mail as body</a>
      <td> <a href="#submit-mailto-headers" title="submit-mailto-headers">Mail with headers</a>
      <td> <a href="#submit-mailto-headers" title="submit-mailto-headers">Mail with headers</a>
    </table><p>If <var title="">scheme</var> is not one of those listed in
    this table, then the behavior is not defined by this
    specification. User agents should, in the absence of another
    specification defining this, act in a manner analogous to that
    defined in this specification for similar schemes.</p>

    <p>The behaviors are as follows:</p>

    <dl><dt><dfn id="submit-mutate-action" title="submit-mutate-action">Mutate action</dfn>
     <dd>

      <p>Let <var title="">query</var> be the result of encoding the
      <var title="">form data set</var> using the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
      algorithm</a>, interpreted as a US-ASCII string.</p>

      <p>Let <var title="">destination</var> be a new <a href="urls.html#url">URL</a>
      that is equal to the <var title="">action</var> except that its
      <a href="urls.html#url-query" title="url-query">&lt;query&gt;</a> component is
      replaced by <var title="">query</var> (adding a U+003F QUESTION
      MARK character (?) if appropriate).</p>

      <p>Let <var title="">target browsing context</var> be <a href="#the-form-submission-target-browsing-context">the
      form submission target browsing context</a>.</p>

      <p><a href="history.html#navigate">Navigate</a> <var title="">target browsing
      context</var> to <var title="">destination</var>. If <var title="">target browsing context</var> was newly created for
      this purpose by the steps above, then it must be navigated with
      <a href="history.html#replacement-enabled">replacement enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-body" title="submit-body">Submit as entity body</dfn>
     <dd>

      <p>Let <var title="">entity body</var> be the result of encoding
      the <var title="">form data set</var> using the
      <a href="#appropriate-form-encoding-algorithm">appropriate form encoding algorithm</a>.</p>

      <p>Let <var title="">target browsing context</var> be <a href="#the-form-submission-target-browsing-context">the
      form submission target browsing context</a>.</p>

      <p>Let <var title="">MIME type</var> be determined as
      follows:</p>

      <dl><dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-urlencoded"><a href="#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">application/x-www-form-urlencoded</code>".</dd>

       <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-formdata"><a href="#attr-fs-enctype-formdata">multipart/form-data</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">multipart/form-data</code>".</dd>

       <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-text"><a href="#attr-fs-enctype-text">text/plain</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">text/plain</code>".</dd>

      </dl><p>If <var title="">method</var> is anything but GET or POST,
      and the <a href="origin-0.html#origin">origin</a> of <var title="">action</var> is not
      the <a href="origin-0.html#same-origin">same origin</a> as that of the <code><a href="forms.html#the-form-element">form</a></code>
      element's <code>Document</code>, then abort these steps.</p>
      <!-- CORS, one day -->

      <p>Otherwise, <a href="history.html#navigate">navigate</a> <var title="">target
      browsing context</var> to <var title="">action</var> using the
      HTTP method given by <var title="">method</var> and with <var title="">entity body</var> as the entity body, of type <var title="">MIME type</var>. If <var title="">target browsing
      context</var> was newly created for this purpose by the steps
      above, then it must be navigated with <a href="history.html#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-delete-action" title="submit-delete-action">Delete action</dfn>
     <dd>

      <p>Let <var title="">target browsing context</var> be <a href="#the-form-submission-target-browsing-context">the
      form submission target browsing context</a>.</p>

      <p>If the <a href="origin-0.html#origin">origin</a> of <var title="">action</var> is
      not the <a href="origin-0.html#same-origin">same origin</a> as that of the
      <code><a href="forms.html#the-form-element">form</a></code> element's <code>Document</code>, then abort
      these steps.</p> <!-- CORS, one day -->

      <p>Otherwise, <a href="history.html#navigate">navigate</a> <var title="">target
      browsing context</var> to <var title="">action</var> using the
      DELETE method. If <var title="">target browsing context</var>
      was newly created for this purpose by the steps above, then it
      must be navigated with <a href="history.html#replacement-enabled">replacement enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-get-action" title="submit-get-action">Get action</dfn>
     <dd>

      <p>Let <var title="">target browsing context</var> be <a href="#the-form-submission-target-browsing-context">the
      form submission target browsing context</a>.</p>

      <p><a href="history.html#navigate">Navigate</a> <var title="">target browsing
      context</var> to <var title="">action</var>. If <var title="">target browsing context</var> was newly created for
      this purpose by the steps above, then it must be navigated with
      <a href="history.html#replacement-enabled">replacement enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-data-post" title="submit-data-post">Post to data:</dfn>
     <dd>

      <p>Let <var title="">data</var> be the result of encoding the
      <var title="">form data set</var> using the <a href="#appropriate-form-encoding-algorithm">appropriate
      form encoding algorithm</a>.</p>

      <p>If <var title="">action</var> contains the string "<code title="">%%%%</code>" (four U+0025 PERCENT SIGN characters),
      then %-escape all bytes in <var title="">data</var> that, if
      interpreted as US-ASCII, do not match the <code title="">unreserved</code> production in the URI Generic Syntax,
      and then, treating the result as a US-ASCII string, further
      %-escape all the U+0025 PERCENT SIGN characters in the resulting
      string and replace the first occurrence of "<code title="">%%%%</code>" in <var title="">action</var> with the
      resulting double-escaped string. <a href="references.html#refsRFC3986">[RFC3986]</a></p>

      <p>Otherwise, if <var title="">action</var> contains the string
      "<code title="">%%</code>" (two U+0025 PERCENT SIGN characters
      in a row, but not four), then %-escape all characters in <var title="">data</var> that, if interpreted as US-ASCII, do not
      match the <code title="">unreserved</code> production in the URI
      Generic Syntax, and then, treating the result as a US-ASCII
      string, replace the first occurrence of "<code title="">%%</code>" in <var title="">action</var> with the
      resulting escaped string. <a href="references.html#refsRFC3986">[RFC3986]</a></p>

      <p>Let <var title="">target browsing context</var> be <a href="#the-form-submission-target-browsing-context">the
      form submission target browsing context</a>.</p>

      <p><a href="history.html#navigate">Navigate</a> <var title="">target browsing
      context</var> to the potentially modified <var title="">action</var>. If <var title="">target browsing
      context</var> was newly created for this purpose by the steps
      above, then it must be navigated with <a href="history.html#replacement-enabled">replacement
      enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-data-put" title="submit-data-put">Put to data:</dfn>
     <dd>

      <p>Let <var title="">data</var> be the result of encoding the
      <var title="">form data set</var> using the <a href="#appropriate-form-encoding-algorithm">appropriate
      form encoding algorithm</a>.</p>

      <p>Let <var title="">MIME type</var> be determined as
      follows:</p>

      <dl><dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-urlencoded"><a href="#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">application/x-www-form-urlencoded</code>".</dd>

       <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-formdata"><a href="#attr-fs-enctype-formdata">multipart/form-data</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">multipart/form-data</code>".</dd>

       <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-text"><a href="#attr-fs-enctype-text">text/plain</a></code></dt>

       <dd>Let <var title="">MIME type</var> be "<code title="">text/plain</code>".</dd>

      </dl><p>Let <var title="">destination</var> be the result of
      concatenating the following:</p>

      <ol class="brief"><li>The string "<code title="">data:</code>".</li>

       <li>The value of <var title="">MIME type</var>.</li>

       <li>The string "<code title="">;base64,</code>".</li>

       <li>A base-64 encoded representation of <var title="">data</var>. <a href="references.html#refsRFC2045">[RFC2045]</a></li>

      </ol><p>Let <var title="">target browsing context</var> be <a href="#the-form-submission-target-browsing-context">the
      form submission target browsing context</a>.</p>

      <p><a href="history.html#navigate">Navigate</a> <var title="">target browsing
      context</var> to <var title="">destination</var>. If <var title="">target browsing context</var> was newly created for
      this purpose by the steps above, then it must be navigated with
      <a href="history.html#replacement-enabled">replacement enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-mailto-headers" title="submit-mailto-headers">Mail with headers</dfn>
     <dd>

      <p>Let <var title="">headers</var> be the resulting encoding the
      <var title="">form data set</var> using the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
      algorithm</a>, interpreted as a US-ASCII string.</p>

      <p>Replace occurrences of U+002B PLUS SIGN characters (+) in
      <var title="">headers</var> with the string "<code title="">%20</code>".</p>

      <p>Let <var title="">destination</var> consist of all the
      characters from the first character in <var title="">action</var> to the character immediately before the
      first U+003F QUESTION MARK character (?), if any, or the end of
      the string if there are none.</p>

      <p>Append a single U+003F QUESTION MARK character (?) to <var title="">destination</var>.</p>

      <p>Append <var title="">headers</var> to <var title="">destination</var>.</p>

      <p>Let <var title="">target browsing context</var> be <a href="#the-form-submission-target-browsing-context">the
      form submission target browsing context</a>.</p>

      <p><a href="history.html#navigate">Navigate</a> <var title="">target browsing
      context</var> to <var title="">destination</var>. If <var title="">target browsing context</var> was newly created for
      this purpose by the steps above, then it must be navigated with
      <a href="history.html#replacement-enabled">replacement enabled</a>.</p>

     </dd>

     <dt><dfn id="submit-mailto-body" title="submit-mailto-body">Mail as body</dfn>
     <dd>

      <p>Let <var title="">body</var> be the resulting encoding the
      <var title="">form data set</var> using the <a href="#appropriate-form-encoding-algorithm">appropriate
      form encoding algorithm</a> and then %-escaping all the bytes
      in the resulting byte string that, when interpreted as US-ASCII,
      do not match the <code title="">unreserved</code> production in
      the URI Generic Syntax. <a href="references.html#refsRFC3986">[RFC3986]</a></p>

      <p>Let <var title="">destination</var> have the same value as
      <var title="">action</var>.</p>

      <p>If <var title="">destination</var> does not contain a U+003F
      QUESTION MARK character (?), append a single U+003F QUESTION
      MARK character (?) to <var title="">destination</var>. Otherwise, append a single U+0026
      AMPERSAND character (&amp;).</p>

      <p>Append the string "<code title="">body=</code>" to <var title="">destination</var>.</p>

      <p>Append <var title="">body</var>, interpreted as a US-ASCII
      string, to <var title="">destination</var>.</p>

      <p>Let <var title="">target browsing context</var> be <a href="#the-form-submission-target-browsing-context">the
      form submission target browsing context</a>.</p>

      <p><a href="history.html#navigate">Navigate</a> <var title="">target browsing
      context</var> to <var title="">destination</var>. If <var title="">target browsing context</var> was newly created for
      this purpose by the steps above, then it must be navigated with
      <a href="history.html#replacement-enabled">replacement enabled</a>.</p>

     </dd>

    </dl><p><dfn id="the-form-submission-target-browsing-context">The form submission target browsing context</dfn> is
    obtained, when needed by the behaviors described above, as
    follows: If the user indicated a specific <a href="browsers.html#browsing-context">browsing
    context</a> to use when submitting the form, then that is the
    target browsing context. Otherwise, apply <a href="browsers.html#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for
    choosing a browsing context given a browsing context name</a>
    using <var title="">target</var> as the name and the
    <a href="browsers.html#browsing-context">browsing context</a> of <var title="">form</var> as the
    context in which the algorithm is executed; the resulting
    <a href="browsers.html#browsing-context">browsing context</a> is the target browsing context.</p>

    <p>The <dfn id="appropriate-form-encoding-algorithm">appropriate form encoding algorithm</dfn> is
    determined as follows:</p>

    <dl><dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-urlencoded"><a href="#attr-fs-enctype-urlencoded">application/x-www-form-urlencoded</a></code></dt>

     <dd>Use the <a href="#application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
     algorithm</a>.</dd>

     <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-formdata"><a href="#attr-fs-enctype-formdata">multipart/form-data</a></code></dt>

     <dd>Use the <a href="#multipart/form-data-encoding-algorithm"><code title="">multipart/form-data</code> encoding
     algorithm</a>.</dd>

     <dt>If <var title="">enctype</var> is <code title="attr-fs-enctype-text"><a href="#attr-fs-enctype-text">text/plain</a></code></dt>

     <dd>Use the <a href="#text/plain-encoding-algorithm"><code title="">text/plain</code> encoding
     algorithm</a>.</dd>

    </dl></li>

  </ol></div>


  <div class="impl">

  <h5 id="url-encoded-form-data"><span class="secno">4.10.17.4 </span>URL-encoded form data</h5>

  <p>The <dfn id="application/x-www-form-urlencoded-encoding-algorithm"><code title="">application/x-www-form-urlencoded</code> encoding
  algorithm</dfn> is as follows:</p>

  <ol><li><p>Let <var title="">result</var> be the empty string.</li>

   <li>

    <p>If the <code><a href="forms.html#the-form-element">form</a></code> element has an <code title="attr-form-accept-charset"><a href="forms.html#attr-form-accept-charset">accept-charset</a></code> attribute,
    then, taking into account the characters found in the <var title="">form data set</var>'s names and values, and the character
    encodings supported by the user agent, select a character encoding
    from the list given in the <code><a href="forms.html#the-form-element">form</a></code>'s <code title="attr-form-accept-charset"><a href="forms.html#attr-form-accept-charset">accept-charset</a></code> attribute
    that is an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>. If
    none of the encodings are supported, then let the selected
    character encoding be UTF-8.</p>

    <p>Otherwise, if the <a href="dom.html#document's-character-encoding">document's character encoding</a> is
    an <a href="infrastructure.html#ascii-compatible-character-encoding">ASCII-compatible character encoding</a>, then that is
    the selected character encoding.</p>

    <p>Otherwise, let the selected character encoding be UTF-8.</p>

   </li>

   <li><p>Let <var title="">charset</var> be the <a href="infrastructure.html#preferred-mime-name">preferred MIME
   name</a> of the selected character encoding.</li>

   <li>

    <p>For each entry in the <var title="">form data set</var>,
    perform these substeps:</p>

    <ol><li><p>If the entry's name is "<code title="">_charset_</code>"
     and its type is "<code title="">hidden</code>", replace its value
     with <var title="">charset</var>.</li>

     <li><p>If the entry's type is "<code title="">file</code>",
     replace its value with the file's filename only.</li>

     <li><p>For each character in the entry's name and value that
     cannot be expressed using the selected character encoding,
     replace the character by a string consisting of a U+0026
     AMPERSAND character (&amp;), a U+0023 NUMBER SIGN character (#),
     one or more characters in the range U+0030 DIGIT ZERO (0) to
     U+0039 DIGIT NINE (9) representing the Unicode code point of the
     character in base ten, and finally a U+003B SEMICOLON character
     (;).</li><!-- we should say it should be the shortest
     possible string, no leading zeros. this whole step as asinine,
     though, so... -->

     <li>

      <p>For each character in the entry's name and value, apply the
      following subsubsteps:</p>

      <ol><!-- * - . _ 0-9 a-z A-Z --><li><p>If the character isn't in the range U+0020, U+002A,
       U+002D, U+002E, U+0030 to U+0039, U+0041 to U+005A, U+005F,
       U+0061 to U+007A then replace the character with a string
       formed as follows: Start with the empty string, and then,
       taking each byte of the character when expressed in the
       selected character encoding in turn, append to the string a
       U+0025 PERCENT SIGN character (%) followed by two characters in
       the ranges U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9) and
       U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN CAPITAL LETTER F
       representing the hexadecimal value of the byte (zero-padded if
       necessary).</li>

       <li><p>If the character is a U+0020 SPACE character, replace it
       with a single U+002B PLUS SIGN character (+).</li>

      </ol></li>

     <li><p>If the entry's name is "<code title="">isindex</code>",
     its type is "<code title="">text</code>", and this is the first
     entry in the <var title="">form data set</var>, then append the
     value to <var title="">result</var> and skip the rest of the
     substeps for this entry, moving on to the next entry, if any, or
     the next step in the overall algorithm otherwise.</li>

     <li><p>If this is not the first entry, append a single U+0026
     AMPERSAND character (&amp;) to <var title="">result</var>.</li>

     <li><p>Append the entry's name to <var title="">result</var>.</li>

     <li><p>Append a single U+003D EQUALS SIGN character (=) to <var title="">result</var>.</li>

     <li><p>Append the entry's value to <var title="">result</var>.</li>

    </ol></li>

   <li><p>Encode <var title="">result</var> as US-ASCII and return the
   resulting byte stream.</li>

  </ol></div>



  <div class="impl">

  <h5 id="multipart-form-data"><span class="secno">4.10.17.5 </span>Multipart form data</h5>

  <p>The <dfn id="multipart/form-data-encoding-algorithm"><code title="">multipart/form-data</code> encoding
  algorithm</dfn> is to encode the <var title="">form data set</var>
  using the rules described by RFC2388, <cite>Returning Values from
  Forms: <code title="">multipart/form-data</code></cite>, and return
  the resulting byte stream. <a href="references.html#refsRFC2388">[RFC2388]</a></p>

  <p>Each entry in the <var title="">form data set</var> is a
  <i>field</i>, the name of the entry is the <i>field name</i> and the
  value of the entry is the <i>field value</i>.</p>

  <p>The order of parts must be the same as the order of fields in the
  <var title="">form data set</var>. Multiple entries with the same
  name must be treated as distinct fields.</p>

  </div>



  <div class="impl">

  <h5 id="plain-text-form-data"><span class="secno">4.10.17.6 </span>Plain text form data</h5>

  <p>The <dfn id="text/plain-encoding-algorithm"><code title="">text/plain</code> encoding
  algorithm</dfn> is as follows:</p>

  <ol><li><p>Let <var title="">result</var> be the empty string.</li>

   <li>

    <!-- this is different from application/x-www-form-urlencoded in
    that it isn't limited to ASCII-compatible encodings -->

    <p>If the <code><a href="forms.html#the-form-element">form</a></code> element has an <code title="attr-form-accept-charset"><a href="forms.html#attr-form-accept-charset">accept-charset</a></code> attribute,
    then, taking into account the characters found in the <var title="">form data set</var>'s names and values, and the character
    encodings supported by the user agent, select a character encoding
    from the list given in the <code><a href="forms.html#the-form-element">form</a></code>'s <code title="attr-form-accept-charset"><a href="forms.html#attr-form-accept-charset">accept-charset</a></code>
    attribute. If none of the encodings are supported, then let the
    selected character encoding be UTF-8.</p>

    <p>Otherwise, the selected character encoding is the
    <a href="dom.html#document's-character-encoding">document's character encoding</a>.</p>

   </li>

   <li><p>Let <var title="">charset</var> be the <a href="infrastructure.html#preferred-mime-name">preferred MIME
   name</a> of the selected character encoding.</li>

   <li><p>If the entry's name is "<code title="">_charset_</code>" and
   its type is "<code title="">hidden</code>", replace its value with
   <var title="">charset</var>.</li>

   <li><p>If the entry's type is "<code title="">file</code>", replace
   its value with the file's filename only.</li>

   <li>

    <p>For each entry in the <var title="">form data set</var>,
    perform these substeps:</p>

    <ol><li><p>Append the entry's name to <var title="">result</var>.</li>

     <li><p>Append a single U+003D EQUALS SIGN character (=) to <var title="">result</var>.</li>

     <li><p>Append the entry's value to <var title="">result</var>.</li>

     <li><p>Append a U+000D CARRIAGE RETURN (CR) U+000A LINE FEED (LF)
     character pair to <var title="">result</var>.</li>

    </ol></li>

   <li><p>Encode <var title="">result</var> using the selected
   character encoding and return the resulting byte stream.</li>

  </ol></div>



  <div class="impl">

  <h4 id="resetting-a-form"><span class="secno">4.10.18 </span>Resetting a form</h4>

  <p>When a form <var title="">form</var> is <dfn id="concept-form-reset" title="concept-form-reset">reset</dfn>, the user agent must
  <a href="origin-0.html#fire-a-simple-event">fire a simple event</a> named <code title="event-reset">reset</code>, that is cancelable, at <var title="">form</var>, and then, if that event is not canceled, must
  invoke the <a href="#concept-form-reset-control" title="concept-form-reset-control">reset
  algorithm</a> of each <a href="forms.html#category-reset" title="category-reset">resettable</a> elements whose <a href="#form-owner">form
  owner</a> is <var title="">form</var>, and <a href="#broadcast-formchange-events">broadcast <code title="event-formchange">formchange</code> events</a> from <var title="">form</var>.</p>

  <p>Each <a href="forms.html#category-reset" title="category-reset">resettable</a> element
  defines its own <dfn id="concept-form-reset-control" title="concept-form-reset-control">reset
  algorithm</dfn>. Changes made to form controls as part of these
  algorithms do not count as changes caused by the user (and thus,
  e.g., do not cause <code title="event-input">input</code> events to
  fire).</p>

  </div>



  <div class="impl">

  <h4 id="event-dispatch"><span class="secno">4.10.19 </span>Event dispatch</h4>

  <p>When the user agent is to <dfn id="broadcast-forminput-events">broadcast <code title="event-forminput">forminput</code> events</dfn> or
  <dfn id="broadcast-formchange-events">broadcast <code title="event-formchange">formchange</code>
  events</dfn> from a <code><a href="forms.html#the-form-element">form</a></code> element <var title="">form</var>, it must run the following steps:</p>

  <ol><li><p>Let <var title="">controls</var> be a list of all the <a href="forms.html#category-reset" title="category-reset">resettable</a> elements whose <a href="#form-owner">form
   owner</a> is <var title="">form</var>.</li>

   <li>If the user agent was to <a href="#broadcast-forminput-events">broadcast <code title="event-forminput">forminput</code> events</a>, let <var title="">event name</var> be <code title="event-forminput">forminput</code>. Otherwise the user agent
   was to <a href="#broadcast-formchange-events">broadcast <code title="event-formchange">formchange</code> events</a>; let <var title="">event name</var> be <code title="event-formchange">formchange</code>.</li>

   <li><p>For each element in <var title="">controls</var>, in
   <a href="infrastructure.html#tree-order">tree order</a>, <a href="origin-0.html#fire-a-simple-event">fire a simple event</a> named
   <var title="">event name</var> at the element.</li>

  </ol></div>


  
