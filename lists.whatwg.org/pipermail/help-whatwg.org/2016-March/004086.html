<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] XHR Questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20XHR%20Questions&In-Reply-To=%3C078d01d181a8%24abfa9530%2403efbf90%24%40gomert-consulting.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004085.html">
   <LINK REL="Next"  HREF="004087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] XHR Questions</H1>
<!--htdig_noindex-->
    <B>Gomer Thomas</B> 
    <A HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20XHR%20Questions&In-Reply-To=%3C078d01d181a8%24abfa9530%2403efbf90%24%40gomert-consulting.com%3E"
       TITLE="[html5] XHR Questions">gomer at gomert-consulting.com
       </A><BR>
    <I>Fri Mar 18 23:29:20 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004085.html">[html5] XHR Questions
</A></li>
        <LI>Next message: <A HREF="004087.html">[html5] XHR Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4086">[ date ]</a>
              <a href="thread.html#4086">[ thread ]</a>
              <a href="subject.html#4086">[ subject ]</a>
              <a href="author.html#4086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>       Dear Anne,
       Thanks for your response. 
       I apologize if I am misusing the term &quot;blob&quot;. The application I am trying to support makes sequential requests to a remote HTTP server for binary objects (ISO BMFF files, in fact). Because of the way the objects are generated, each object is delivered in chunked mode, with the delivery spread over time. I want the application to be able to consume the chunks of each response as they arrive, rather than waiting for the entire response to arrive before consuming any of it. 
       In the August 2009 version of the XMLHttpRequest() specification, this was possible. The responseBody arrived as a ByteArray, and the application could access the ByteArray at any time (with a partial response if the status is LOADING, and with the full response when the status is DONE). 
       For some reason, which I still don't understand, this capability was taken out by the time of the August 2011 version. In that version incremental consumption was only enabled for &quot;text&quot; type responses, not for &quot;document&quot; or &quot;any&quot; type responses. 
       When I first raised this question on <A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">help at lists.whatwg.org</A>, someone suggested that Streams would be a better alternative. I looked into that and found that (a) there would be a pretty steep learning curve in order to use Streams, (b) quite a few definitions would be required to set up the Streams framework on the client side, and (c) whereas XMLHttpRequest() is pretty mature and well supported by all the major browsers at this point, Streams are not. 
       Since no one seems to know why the XMLHttpRequest() specification was changed to take away the incremental consumption capability for binary files, it seems unlikely it will be changed back any time soon, if at all (even though the current situation is a violation of the spirit of the specifications regarding support for chunked encoding in RFC 7230).  Therefore, it appears that a proprietary solution based on a WebSocket will need to be implemented for the next couple of years at least, until Streams are mature and well supported. 
       In fact, even then a proprietary solution to get Streams from a remote server to an application's browser context might be required. The Streams specification appears to assume that everything is happening locally. I guess one could put a local &quot;Streams&quot; wrapper around the WebSocket interface, but the advantages of that over a pure proprietary solution are not clear. 
               Best regards, Gomer Thomas
              --
              Gomer Thomas Consulting, LLC
              9810 132nd St NE
              Arlington, WA 98223
              Cell: 425-309-9933
              
              
              -----Original Message-----
       From: Anne van Kesteren [mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">annevk at annevk.nl</A>] 
       Sent: Friday, March 18, 2016 12:28 AM
       To: Gomer Thomas &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">gomer at gomert-consulting.com</A>&gt;
       Cc: Domenic Denicola &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">d at domenic.me</A>&gt;; <A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">help at lists.whatwg.org</A>
       Subject: Re: [html5] XHR Questions
              
              On Thu, Mar 17, 2016 at 9:15 PM, Gomer Thomas &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">gomer at gomert-consulting.com</A>&gt; wrote:
              &gt;        Hi Domenic,
              &gt;        By the way, the question is not why support for chunked 
              &gt; responses to HTTP requests was not added in the first place for blobs. 
              &gt; That capability was included in the August 2009 specification of 
              &gt; XMLHttpRequest(). Thus, the question is why was it taken out later?
              
              Blobs are fixed size. Allocating a new blob each time the server transmits a bit more data would be quite bad design. Streams is what we want here.
              
              (Not sure if I'm subscribed to help so this might not make it to the list.)
              
              
              --
              <A HREF="https://annevankesteren.nl/">https://annevankesteren.nl/</A>

</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004085.html">[html5] XHR Questions
</A></li>
	<LI>Next message: <A HREF="004087.html">[html5] XHR Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4086">[ date ]</a>
              <a href="thread.html#4086">[ thread ]</a>
              <a href="subject.html#4086">[ subject ]</a>
              <a href="author.html#4086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">More information about the Help
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
