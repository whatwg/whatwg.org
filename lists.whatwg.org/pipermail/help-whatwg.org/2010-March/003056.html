<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] Proposal for a hair width/line property when using	&lt;canvas&gt;	tag
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20Proposal%20for%20a%20hair%20width/line%20property%20when%20using%0A%09%3Ccanvas%3E%09tag&In-Reply-To=%3C51D4FEBC56BC4CAC962FC1D8B121E65C%40urbanjsPC%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001739.html">
   <LINK REL="Next"  HREF="003058.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] Proposal for a hair width/line property when using	&lt;canvas&gt;	tag</H1>
<!--htdig_noindex-->
    <B>John S. Urban</B> 
    <A HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20Proposal%20for%20a%20hair%20width/line%20property%20when%20using%0A%09%3Ccanvas%3E%09tag&In-Reply-To=%3C51D4FEBC56BC4CAC962FC1D8B121E65C%40urbanjsPC%3E"
       TITLE="[html5] Proposal for a hair width/line property when using	&lt;canvas&gt;	tag">urbanjost at comcast.net
       </A><BR>
    <I>Sat Mar 13 01:27:37 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001739.html">[html5] Proposal for a hair width/line property when using &lt;canvas&gt;	tag
</A></li>
        <LI>Next message: <A HREF="003058.html">[html5] Proposal for a hair width/line property when using	&lt;canvas&gt; tag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3056">[ date ]</a>
              <a href="thread.html#3056">[ thread ]</a>
              <a href="subject.html#3056">[ subject ]</a>
              <a href="author.html#3056">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I had a similiar problem. Depending on the complexity of your drawing, you 
may find the following pages useful
as a work-around. I am assuming you are using a C or Fortran program to 
convert some autocad drawing, such
as an ADI file to the format you require. The links show a simple library 
callable from C or Fortran that will create
a vector file as a VML (For IE), HTML5 CANVAS, SVG, or PDF file. The key is 
that the CANVAS file is actually
a JavaScript file that draws into a CANVAS element. The functions can easily 
be made to specify a specific line
thickness regardless of the scale. A more advanced version of this theme, 
which I unfortunately am not able to make
public, calls functions that create VML or CANVAS directives depending on 
which browser is being used, and
allow for easy panning and zooming, and even allow you to select &quot;layers&quot; 
and write the data back out as simple text
in a metafile that can be read back into a VOGLE program and put back out in 
another format. The graphics library
can be found at:
<A HREF="http://home.comcast.net/~urbanjost/enter.html">http://home.comcast.net/~urbanjost/enter.html</A> under &quot;VOGLE&quot; graphics (there 
is even a CALCOMP interface there,
which AutoCad used to provide a skeleton program for, but I know longer know 
if they do. It is probably just interesting for historical reasons).
An example output file can be found at:
<A HREF="http://home.comcast.net/~urbanjost/canvas/vogle4.html">http://home.comcast.net/~urbanjost/canvas/vogle4.html</A>
If you are not comfortable with making programming changes to the driver to 
change the line thickness behavior, etc.
this might not be of use. If you are, you will find the library is very 
portable. If you want to develop on a PC, I would
recommend deactivating the X11 driver and using Cygwin for development if it 
is allowed (MinGW is a good alternative). This software was written before 
&quot;hardware&quot; text was available in CANVAS
elements, and before a Fortran compiler was readily available that supported 
the C/Fortran interface now in the Fortran (f2003+) standard, but is has 
been used on Solaris/HPUX/Linux/*BSD/Cygwin/AIX/Ultrix/Tru64/... .

I am not able to make the &quot;browser&quot; driver available (which has ECMAScript 
routines that write the multiple formats
described above); but I hope a clear path is available if you look at 
&quot;merging&quot; the VML and SVG drivers into the
CANVAS driver's functions. Note that I have not checked recently, but that 
VML worked fine in IE; but broke
the other MSW products that read it (Word, in particular) if the drawing had 
more than a few thousand vectors. I am
a fan of VML, but support has deteriorated significantly for it as far as I 
can see -- although I was initially thrilled to have a relatively open 
format that was importable into almost all MSW products.

This approach (JavaScript/ECMAScript) let me handle CANVAS-related issues 
with text, dashed codes, zero-length vectors, different browser capabilities 
(much
less of an issue now if you avoid IE -- the standard has now been 
implemented more consistently) , and so on.

This is certainly not a &quot;pure HTML5&quot; solution, but it has worked out well 
for my needs. I haven't been heavily involved in working with engineering 
drawings since my ICEMDDN/Anvil days (It's likely you don't go back far 
enough to even recognize the references, I realize);  but I think this could 
work for you with some reasonable effort.  There was a day when the world 
thought
all CAD/CAM  metafile problems were solved, what with IGES and CGM (anyone 
else remember those?)!

<A HREF="http://home.comcast.net/~urbanjost/CANVAS/LINETHICKNESS/plot2.html">http://home.comcast.net/~urbanjost/CANVAS/LINETHICKNESS/plot2.html</A> shows a 
file that keeps line thickness
constant (hand edited); &quot;plot1.html&quot; from the same location is the original 
file as written by the VOGLE library to give
you a head start.

----- Original Message ----- 
From: &quot;Ian Hickson&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">ian at hixie.ch</A>&gt;
To: &quot;Shaun Morris&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">shaunwithanau at gmail.com</A>&gt;
Cc: &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">help at lists.whatwg.org</A>&gt;
Sent: Thursday, March 11, 2010 8:06 PM
Subject: Re: [html5] Proposal for a hair width/line property when using 
&lt;canvas&gt; tag


&gt;<i> On Thu, 4 Feb 2010, Shaun Morris wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am working for a company who is currently trying to reproduce
</I>&gt;&gt;<i> engineering drawings made in AutoCad within the canvas tag as a way to
</I>&gt;&gt;<i> step away from the legacy way of doing it using Java and being stuck in
</I>&gt;&gt;<i> IE.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> These drawings like many engineering drawings or mapping applications
</I>&gt;&gt;<i> have to be scaled considerably and the current problem is that after
</I>&gt;&gt;<i> scaling a line with a lineWidth of 1 after being scaled 5x's has a
</I>&gt;&gt;<i> lineWidth of 5.
</I>&gt;<i>
</I>&gt;<i> Yeah, currently this requires only using square zooms (not different x and
</I>&gt;<i> y scaling factors) and &quot;un&quot;zooming the lineWidth accordingly.
</I>&gt;<i>
</I>&gt;<i> I've noted this idea for addition to &lt;canvas&gt; at a future date. I haven't
</I>&gt;<i> added it yet, since browser vendors haven't caught up with what we _have_
</I>&gt;<i> added yet! We don't want to get too far ahead of them.
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Help mailing list
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">Help at lists.whatwg.org</A>
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">http://lists.whatwg.org/listinfo.cgi/help-whatwg.org</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001739.html">[html5] Proposal for a hair width/line property when using &lt;canvas&gt;	tag
</A></li>
	<LI>Next message: <A HREF="003058.html">[html5] Proposal for a hair width/line property when using	&lt;canvas&gt; tag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3056">[ date ]</a>
              <a href="thread.html#3056">[ thread ]</a>
              <a href="subject.html#3056">[ subject ]</a>
              <a href="author.html#3056">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">More information about the Help
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
