<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] Newbie question about SharedWorkers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20Newbie%20question%20about%20SharedWorkers&In-Reply-To=%3C9D711CA3-2398-4F6F-BA17-AB0C1B1EB95F%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003171.html">
   <LINK REL="Next"  HREF="003170.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] Newbie question about SharedWorkers</H1>
<!--htdig_noindex-->
    <B>David John Burrowes</B> 
    <A HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20Newbie%20question%20about%20SharedWorkers&In-Reply-To=%3C9D711CA3-2398-4F6F-BA17-AB0C1B1EB95F%40gmail.com%3E"
       TITLE="[html5] Newbie question about SharedWorkers">davidjohnburrowes at gmail.com
       </A><BR>
    <I>Fri Jun  4 09:45:27 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003171.html">[html5] Body copy
</A></li>
        <LI>Next message: <A HREF="003170.html">[html5] Newbie question about SharedWorkers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1860">[ date ]</a>
              <a href="thread.html#1860">[ thread ]</a>
              <a href="subject.html#1860">[ subject ]</a>
              <a href="author.html#1860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Thank you very much for your thoughts, Dmitry!

I'm sure one can use the iframe approach you mention. Would you agree, though, that this is not a very elegant way of solving this problem?

I also completely agree that a timeout would be a bad idea here (unreliable in so many ways it gives me hives)

However, I feel like I don't understand your point about redirects being difficult/unreliable.  Sounds like there's something I don't understand.  Can you explain more?

Thanks!

David


On 2010/6/4, at &#19978;&#21320;9:25, Dmitry Titov wrote:

&gt;<i> Hi David,
</I>&gt;<i> 
</I>&gt;<i> Yes, the shared worker will not survive this transition. One way to keep it alive is to use more complex page with nested iframe (and navigate the iframe, keeping parent alive).
</I>&gt;<i> 
</I>&gt;<i> Theoretically, the spec could prescribe keeping the worker alive for a certain period of time, or when navigating to another page in the same origin, but all those methods are somewhat unreliable (timeouts are arbitrary, redirects are difficult etc).
</I>&gt;<i> 
</I>&gt;<i> Dmitry
</I>&gt;<i>  
</I>&gt;<i> ---------- Forwarded message ----------
</I>&gt;<i> From: David John Burrowes &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">davidjohnburrowes at gmail.com</A>&gt;
</I>&gt;<i> Date: Thu, May 27, 2010 at 5:53 PM
</I>&gt;<i> Subject: [html5] Newbie question about SharedWorkers
</I>&gt;<i> To: <A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">help at lists.whatwg.org</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hello all,
</I>&gt;<i> 
</I>&gt;<i> I'm making my way through the spec about Workers, and have a question about SharedWorkers.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The spec makes various references to shared workers being used by multiple pages in parallel.  My question is can a shared worker be used by two sequentially accessed pages?  My reading of the spec says &quot;no&quot;, but my intuition about what behavior I would &quot;expect&quot; says I should be able to.  Is my reading of the spec right?
</I>&gt;<i> 
</I>&gt;<i> Here's an example:
</I>&gt;<i>        We have two pages: P1 and P2 (from the same origin etc)
</I>&gt;<i>        P1 has a link to P2 on it (&lt;a href=&quot;P2&quot;&gt;)
</I>&gt;<i> 
</I>&gt;<i>        Both P1 and P2 reference a shared worker SW
</I>&gt;<i> 
</I>&gt;<i>        When the user gets page P1, then SW is created.
</I>&gt;<i>        User then clicks on the link to P2
</I>&gt;<i> 
</I>&gt;<i> My interpretation of the spec says that when this link is clicked, P1 will be made no longer active, so it will be removed from SW's list of Documents.  This will leave SW's list empty, which will make it no longer a permissable worker. It's closing flag will be set to true, and presumably there's a chance it will be destroyed before P2 can be loaded and access SW.  So, P2 will need to re-create SW.
</I>&gt;<i> 
</I>&gt;<i> It seems desirable to me that if a page transition is being made between pages with compatible origins, that a shared worker would be preserved across them, allowing complex calculations being done by the worker to be shared by the pages (obviously, the worker could be storing its work in a database, and then reloading that when it is created.  But, that seems like overkill)
</I>&gt;<i> 
</I>&gt;<i> Thoughts?
</I>&gt;<i> 
</I>&gt;<i> David
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Help mailing list
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">Help at lists.whatwg.org</A>
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">http://lists.whatwg.org/listinfo.cgi/help-whatwg.org</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/help-whatwg.org/attachments/20100604/a7c04e45/attachment-0002.htm">http://lists.whatwg.org/pipermail/help-whatwg.org/attachments/20100604/a7c04e45/attachment-0002.htm</A>&gt;
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003171.html">[html5] Body copy
</A></li>
	<LI>Next message: <A HREF="003170.html">[html5] Newbie question about SharedWorkers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1860">[ date ]</a>
              <a href="thread.html#1860">[ thread ]</a>
              <a href="subject.html#1860">[ subject ]</a>
              <a href="author.html#1860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">More information about the Help
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
