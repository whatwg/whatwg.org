<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [HTML5] [whatwg] Scripting and WF2 repetition model?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5BHTML5%5D%20%5Bwhatwg%5D%20Scripting%20and%20WF2%20repetition%20model%3F&In-Reply-To=%3CPine.LNX.4.62.0703151446430.26307%40dhalsim.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002641.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[HTML5] [whatwg] Scripting and WF2 repetition model?</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5BHTML5%5D%20%5Bwhatwg%5D%20Scripting%20and%20WF2%20repetition%20model%3F&In-Reply-To=%3CPine.LNX.4.62.0703151446430.26307%40dhalsim.dreamhost.com%3E"
       TITLE="[HTML5] [whatwg] Scripting and WF2 repetition model?">ian at hixie.ch
       </A><BR>
    <I>Thu Mar 15 07:53:04 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002641.html">[HTML5] xml:base
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1334">[ date ]</a>
              <a href="thread.html#1334">[ thread ]</a>
              <a href="subject.html#1334">[ subject ]</a>
              <a href="author.html#1334">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 15 Mar 2007, Dave Raggett wrote:
&gt;<i> 
</I>&gt;<i> Thanks for the helpful reply. Unfortunately, Opera 9 (Linux) reports a 
</I>&gt;<i> type error on calling getElementsByName(&quot;row1.quantity&quot;).
</I>
Oh, try invoking that on the document instead of the element, that should 
do it. My bad.


&gt;<i> By using alert and innerHTML, I see that row1 has the following content:
</I>&gt;<i> 
</I>&gt;<i> &lt;TD&gt;&lt;INPUT name=&quot;row1.item&quot; type=&quot;text&quot; title=&quot;product name&quot;&gt;&lt;/TD&gt;
</I>&gt;<i> &lt;TD&gt;&lt;INPUT name=&quot;row1.quantity&quot; type=&quot;number&quot; title=&quot;number purchased&quot;&gt;&lt;/TD&gt;
</I>&gt;<i> &lt;TD&gt;&lt;INPUT name=&quot;row1.unitprice&quot; type=&quot;number&quot; title=&quot;price per unit&quot;&gt;&lt;/TD&gt;
</I>&gt;<i> 
</I>&gt;<i> A work around would be to use getElementsByTagName on the input elements 
</I>&gt;<i> for the row, as the position of the fields of interest within the row is 
</I>&gt;<i> known in advance. That works when it comes to getting the requisite 
</I>&gt;<i> fields for quantity and unitprice, but mysteriously their value property 
</I>&gt;<i> is always blank despite evidence to the contrary on the browser 
</I>&gt;<i> rendering of the page.
</I>
Sounds like a bug in Opera.


&gt;<i> I have to admit to a certain amount of puzzlement over the WF2 choice of 
</I>&gt;<i> name syntax for repeating fields. It would have been a lot simpler to 
</I>&gt;<i> avoid the period, so that the name was consistent with ECMAScript, HTML4 
</I>&gt;<i> and DOM1.
</I>
There is no name syntax for repeating fields in WF2. You can use whatever 
syntax you like. All that's going on is that the template name is being 
prefilled. For example, you could do:

   &lt;input name=&quot;row-number-[row]&quot; value=&quot;this is the row number #[row]&quot;&gt;

...and it'll still do the substitution.

I agree that better JS shortcuts could make life easier. It's not clear 
how to provide those while still providing real DOM support. (XForms, 
e.g., gets around this by not providing real DOM support.)


&gt;<i> It also seems that DOM1 only defines getElementsByName on the document 
</I>&gt;<i> object and not on every element. So it is not a big suprise when it 
</I>&gt;<i> didn't work in Opera on the tr (row) element.
</I>
Indeed. Change it to the document and my script should work, in theory, 
notwithstanding any bugs.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002641.html">[HTML5] xml:base
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1334">[ date ]</a>
              <a href="thread.html#1334">[ thread ]</a>
              <a href="subject.html#1334">[ subject ]</a>
              <a href="author.html#1334">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">More information about the Help
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
