<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] Web Workers: Race-Condition setting onmessage handler?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20Web%20Workers%3A%20Race-Condition%20setting%20onmessage%20handler%3F&In-Reply-To=%3CAANLkTi%3DC9o6hVKroNFj4xonU9C5Z2N2KYpHBcGw1ywnr%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003214.html">
   <LINK REL="Next"  HREF="003218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] Web Workers: Race-Condition setting onmessage handler?</H1>
<!--htdig_noindex-->
    <B>Drew Wilson</B> 
    <A HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20Web%20Workers%3A%20Race-Condition%20setting%20onmessage%20handler%3F&In-Reply-To=%3CAANLkTi%3DC9o6hVKroNFj4xonU9C5Z2N2KYpHBcGw1ywnr%40mail.gmail.com%3E"
       TITLE="[html5] Web Workers: Race-Condition setting onmessage handler?">atwilson at chromium.org
       </A><BR>
    <I>Tue Aug  3 08:57:42 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003214.html">[html5] Web Workers: Race-Condition setting onmessage handler?
</A></li>
        <LI>Next message: <A HREF="003218.html">[html5] Web Workers: Race-Condition setting onmessage handler?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3216">[ date ]</a>
              <a href="thread.html#3216">[ thread ]</a>
              <a href="subject.html#3216">[ subject ]</a>
              <a href="author.html#3216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Aug 3, 2010 at 4:21 AM, Tobias Sauerwein &lt;
<A HREF="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">tobias.sauerwein at camptocamp.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> And then the message from the main script is never received by the web
</I>&gt;<i> worker and it won't start its work.
</I>&gt;<i>
</I>&gt;<i> Could that happen? From what you have said, I think it could.
</I>&gt;<i>
</I>&gt;<i> Tobias
</I>&gt;<i>
</I>
The portions of the spec I quoted should ensure that this does not happen,
because the MessagePort for the worker is not enabled until the initial
worker script finishes running (so events posted to the port are queued and
not delivered until after the initial worker script returns).

Furthermore, even if the port were enabled, the events related to messages
queued on that port can't be delivered (and so can't be dropped) until the
worker script returns to the event loop. So it should not be possible for
events to be dropped in the case you suggest.

-atw
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/help-whatwg.org/attachments/20100803/ca49587b/attachment-0002.htm">http://lists.whatwg.org/pipermail/help-whatwg.org/attachments/20100803/ca49587b/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003214.html">[html5] Web Workers: Race-Condition setting onmessage handler?
</A></li>
	<LI>Next message: <A HREF="003218.html">[html5] Web Workers: Race-Condition setting onmessage handler?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3216">[ date ]</a>
              <a href="thread.html#3216">[ thread ]</a>
              <a href="subject.html#3216">[ subject ]</a>
              <a href="author.html#3216">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">More information about the Help
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
