<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] Measure tons of text in a fast way
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20Measure%20tons%20of%20text%20in%20a%20fast%20way&In-Reply-To=%3CAANLkTinyJsAosHXwS_XFWENHLp2ZQqKBkjmVm%2BPKgf8O%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003333.html">
   <LINK REL="Next"  HREF="002025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] Measure tons of text in a fast way</H1>
<!--htdig_noindex-->
    <B>Sebastian Werner</B> 
    <A HREF="mailto:help%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20Measure%20tons%20of%20text%20in%20a%20fast%20way&In-Reply-To=%3CAANLkTinyJsAosHXwS_XFWENHLp2ZQqKBkjmVm%2BPKgf8O%40mail.gmail.com%3E"
       TITLE="[html5] Measure tons of text in a fast way">wpbasti at gmail.com
       </A><BR>
    <I>Tue Jan 18 04:36:31 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003333.html">[html5] Living Standard
</A></li>
        <LI>Next message: <A HREF="002025.html">[html5] Event capture/bubbling question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2023">[ date ]</a>
              <a href="thread.html#2023">[ thread ]</a>
              <a href="subject.html#2023">[ subject ]</a>
              <a href="author.html#2023">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi!

I am looking for a way to measure text. In qooxdoo's layout system
(where we also plan to use parts from in Unify) we compute positions
of all things on our own to make use of the advanced layouting system.

What we need would be a method to measure text. The text only have
basic font formatting (font-family, line-height, font-size,
font-style, etc.) and all styles which should be respected are locally
applied or can be given through a method.

I think a practical interface might look like:

document.getComputedTextSize(&quot;Text&quot;, styles, maxWidth); =&gt; {width: 28,
height: 12}

The optional maxWidth parameter might be used to control the text flow
from the layouting system e.g. in cases where the available space in
only 200px, but the text would like to have a width of 340px.

All values are in pixels like in offsetWidth or getBoundingClientRect().

I am basically asking for a special routine as we practically do this
step 1000+ times during app initialization and also a lot while it's
running. In newer browser it got dramatically better, but is still one
of the slowest parts of the framework. I am especially interested in
supporting it on mobile devices like Smartphones/Tablets.

Currently we place a specialized DIV element directly in the BODY.
Positioned absolute to -1000px coordinates. And it still takes a few
milliseconds each time to measure it out. If we would have a method
which do not influence reflow or browser layouting but just computes
the text size it might be possible to make it way faster.

Alexander (&quot;bga_&quot; on Twitter) already suggested to use
Canvas.measureText, but this does not support any of the CSS font
styles which are important for my use case.

For all people doing custom layouting I would think that this would be
quite a helpful method.

Would be really nice to discuss on this requirement with you.

Regards,
Sebastian

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003333.html">[html5] Living Standard
</A></li>
	<LI>Next message: <A HREF="002025.html">[html5] Event capture/bubbling question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2023">[ date ]</a>
              <a href="thread.html#2023">[ thread ]</a>
              <a href="subject.html#2023">[ subject ]</a>
              <a href="author.html#2023">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/help-whatwg.org">More information about the Help
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
