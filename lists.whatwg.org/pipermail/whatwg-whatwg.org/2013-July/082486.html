<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Blurry lines in 2D Canvas (and SVG)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Blurry%20lines%20in%202D%20Canvas%20%28and%20SVG%29&In-Reply-To=%3C004501ce881a%24fb8aade0%24f2a009a0%24%40net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082485.html">
   <LINK REL="Next"  HREF="082483.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Blurry lines in 2D Canvas (and SVG)</H1>
<!--htdig_noindex-->
    <B>David Dailey</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Blurry%20lines%20in%202D%20Canvas%20%28and%20SVG%29&In-Reply-To=%3C004501ce881a%24fb8aade0%24f2a009a0%24%40net%3E"
       TITLE="[whatwg] Blurry lines in 2D Canvas (and SVG)">ddailey at zoominternet.net
       </A><BR>
    <I>Tue Jul 23 20:07:50 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082485.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
        <LI>Next message: <A HREF="082483.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82486">[ date ]</a>
              <a href="thread.html#82486">[ thread ]</a>
              <a href="subject.html#82486">[ subject ]</a>
              <a href="author.html#82486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Seeing what Kornel wrote about a solution to the problem for canvas, makes persuasive support, to me, for Glenn Maynard's argument that [concerning SVG and canvas]
&quot; I think they should be two separate discussions.&quot;

One of the intentions (at least historically) of SVG is to allow declarative rather than scripted solutions. As I read this conversation from a declarative perspective (trying to transcode script into markup) I am seeing a dozen little flag-attributes that all interact with one another in a grand logical hyperplane. Sorry, for what might be a flawed metaphor, but I've been stuck in a logical hyperplane for the past few days and I am cursing it! 

Cheers
D
(Lie algebra is even worse than Lie geometry!  -- <A HREF="https://en.wikipedia.org/wiki/Sophus_Lie">https://en.wikipedia.org/wiki/Sophus_Lie</A> )

-----Original Message-----
From: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A> [mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A>] On Behalf Of Kornel Lesinski
Sent: Tuesday, July 23, 2013 10:09 PM
To: Rik Cabanier
Cc: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at lists.whatwg.org</A>
Subject: Re: [whatwg] Blurry lines in 2D Canvas (and SVG)

On Wed, 24 Jul 2013 02:13:19 +0100, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt;
wrote:

&gt;&gt;<i> It's not intuitive. It's a pretty common pitfall, but it's logical.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For 1-pixel lines it could be fixed by allowing authors to specify 
</I>&gt;&gt;<i> that path should be stroked with lines aligned to inside/outside of 
</I>&gt;&gt;<i> the path (which is a useful feature on its own).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sure, but how can we fix this?
</I>&gt;<i> It's not very intuitive that I have to keep track of the 
</I>&gt;<i> devicePixelRatio (and the current CTM?) to get crisp lines.
</I>
To what extent does it need to be &quot;fixed&quot;?

&quot;Manually&quot; snapping lines to canvas pixels isn't too hard, e.g.  
subtracting 0.5 from x/y and adding 1 to width/height to get pixel-aligned rectangle outside the box. It does get trickier with transforms indeed :(


Is it enough to snap to canvas pixels? (future of &quot;HD&quot; canvas is uncertain, so authors may need to resize canvas to match devicePixelRatio anyway).

Is it enough if there was strokeOutside()/strokeInside() that makes untransformed lines pixel-aligned? Or is it necessary to have snapping for odd-width lines that are stroked centered on a path?

Do authors expect lines in canvas with non-integer transforms to be crisp?

Should arc() and bezier curves also be snapped? What if you want a line that touches the curve?


&gt;<i> What we need is that artwork 'snaps' to the native pixels while still 
</I>&gt;<i> being antialiased.
</I>
How should snapping be done?

If fill() of a 2x2 rect draws:

  XX
  XX

how would stroke() look like?

....
.XX.
.XX.
....

or

  ..
  ..

or

  ...
  .X.
  ...


If you have path that is 2.5 device pixels wide, is it going to be snapped to different width depending whether you draw it at (0, 0) or (0.1, 0)?  
Would that also make circles ellipses?


Snapping makes animated slow movement choppy, so authors may also want ability to disable it for selected paths/drawing operations or even for each axis separately (e.g. to smoothly animate horizontal movement while object is snapped to pixels vertically, etc.)

--
regards, Kornel



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082485.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
	<LI>Next message: <A HREF="082483.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82486">[ date ]</a>
              <a href="thread.html#82486">[ thread ]</a>
              <a href="subject.html#82486">[ subject ]</a>
              <a href="author.html#82486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
