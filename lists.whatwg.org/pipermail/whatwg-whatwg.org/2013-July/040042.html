<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] scrdoc and session history don't play along in the spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20scrdoc%20and%20session%20history%20don%27t%20play%20along%20in%20the%20spec&In-Reply-To=%3Calpine.DEB.2.00.1307121914050.15729%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082450.html">
   <LINK REL="Next"  HREF="082320.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] scrdoc and session history don't play along in the spec</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20scrdoc%20and%20session%20history%20don%27t%20play%20along%20in%20the%20spec&In-Reply-To=%3Calpine.DEB.2.00.1307121914050.15729%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] scrdoc and session history don't play along in the spec">ian at hixie.ch
       </A><BR>
    <I>Fri Jul 12 12:39:41 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082450.html">[whatwg] img loading events - can load &amp; error fire for the	same image?
</A></li>
        <LI>Next message: <A HREF="082320.html">[whatwg] scrdoc and session history don't play along in the spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40042">[ date ]</a>
              <a href="thread.html#40042">[ thread ]</a>
              <a href="subject.html#40042">[ subject ]</a>
              <a href="author.html#40042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, 5 Apr 2013, Boris Zbarsky wrote:
&gt;<i>
</I>&gt;<i> The session history algorithm in the spec navigates to urls.
</I>
That wasn't the intent. I've tried to clarify it.


&gt;<i> As far as I can tell, on the face of it, this means that this testcase:
</I>&gt;<i> 
</I>&gt;<i>   &lt;iframe name=&quot;x&quot; srcdoc=&quot;aaa&quot;&gt;&lt;/iframe&gt;
</I>&gt;<i>   &lt;a target=&quot;x&quot; href=&quot;<A HREF="http://web.mit.edu">http://web.mit.edu</A>&quot;&gt;
</I>&gt;<i>     Click me, then later hit back
</I>&gt;<i>   &lt;/a&gt;
</I>&gt;<i> 
</I>&gt;<i> should fail to go back.
</I>
It should load the original resource.


&gt;<i> Again, as far as I can tell; actually telling anything for sure about 
</I>&gt;<i> the navigation/shistory part of the spec is impossible.  :(
</I>
You know, it's disheartening to work on something and have you continually 
insult it like this. Please stick to positive feedback, which you are 
quite good at providing, and avoid the non-constructive negative commentary.

Thanks.


On Sat, 22 Jun 2013, Adam Barth wrote:
&gt;<i> 
</I>&gt;<i> One tricky case here is what happens if you modify the srcdoc attribute:
</I>&gt;<i> 
</I>&gt;<i> &lt;iframe id=&quot;foo&quot; srcdoc=&quot;aaa&quot;&gt;&lt;/iframe&gt;
</I>&gt;<i> 
</I>&gt;<i> &lt;script&gt;
</I>&gt;<i> [...] // Wait for the iframe to finish loading.
</I>&gt;<i> document.getElementById(&quot;foo&quot;).srcdoc = &quot;bbb&quot;;
</I>&gt;<i> [...] // Wait for the iframe to finish loading.
</I>&gt;<i> document.getElementById(&quot;foo&quot;).contentWindow.document.body.innerHTML = &quot;ccc&quot;;
</I>&gt;<i> &lt;/script&gt;
</I>&gt;<i> 
</I>&gt;<i> What happens if you click the back button now?  I believe that in WebKit 
</I>&gt;<i> and Blink, you'll get &quot;bbb&quot;.  That's because we navigated back in the 
</I>&gt;<i> history to &quot;about:srcdoc&quot;, which then looked at the srcdoc property and 
</I>&gt;<i> saw &quot;bbb&quot; even though the srcdoc property had &quot;aaa&quot; when that history 
</I>&gt;<i> entry was created.
</I>
If I'm not mistaken, the spec requires it to be &quot;aaa&quot;, since that's what 
resource was loaded for the first session history item.

I don't see anything in the spec that allows &quot;bbb&quot; to be shown.


On Sun, 23 Jun 2013, Adam Barth wrote:
&gt;<i> 
</I>&gt;<i> I guess it depends on what you mean by &quot;rely&quot;.  We just treat the 
</I>&gt;<i> about:srcdoc URL as something that, when fetched, retrieves the value 
</I>&gt;<i> currently stored in the srcdoc attribute.
</I>
That doesn't seem defensible per the spec. In fact, the spec explicitly 
says that about:srcdoc is &quot;unresolvable&quot;.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>
















































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082450.html">[whatwg] img loading events - can load &amp; error fire for the	same image?
</A></li>
	<LI>Next message: <A HREF="082320.html">[whatwg] scrdoc and session history don't play along in the spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40042">[ date ]</a>
              <a href="thread.html#40042">[ thread ]</a>
              <a href="subject.html#40042">[ subject ]</a>
              <a href="author.html#40042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
