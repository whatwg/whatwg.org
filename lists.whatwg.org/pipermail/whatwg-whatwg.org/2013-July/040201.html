<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;menu&gt; and friends
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cmenu%3E%20and%20friends&In-Reply-To=%3Calpine.DEB.2.00.1307232033110.9685%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040197.html">
   <LINK REL="Next"  HREF="082490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;menu&gt; and friends</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cmenu%3E%20and%20friends&In-Reply-To=%3Calpine.DEB.2.00.1307232033110.9685%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] &lt;menu&gt; and friends">ian at hixie.ch
       </A><BR>
    <I>Tue Jul 23 15:45:37 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040197.html">[whatwg] iframe sandbox and allow-scripts
</A></li>
        <LI>Next message: <A HREF="082490.html">[whatwg] &lt;menu&gt; and friends
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40201">[ date ]</a>
              <a href="thread.html#40201">[ thread ]</a>
              <a href="subject.html#40201">[ subject ]</a>
              <a href="author.html#40201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, 31 Dec 2012, Jonas Sicking wrote:
&gt;<i> On Fri, Dec 28, 2012 at 11:07 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; On Fri, 28 Dec 2012, Jonas Sicking wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I don't think it's a good solution to leave it undefined if 
</I>&gt;<i> &gt;&gt; all/none/some of the UA menuitems are displayed by default. While it 
</I>&gt;<i> &gt;&gt; on an API level won't break anything, authors consider as &quot;breaking&quot; 
</I>&gt;<i> &gt;&gt; a lot more things than APIs not behaving as expected.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm happy to give guidance that happens to match what the browser 
</I>&gt;<i> &gt; vendors want to do anyway, but I don't think it makes sense to make a 
</I>&gt;<i> &gt; page- undetectable UI detail like this a conformance requirement.
</I>&gt;<i> 
</I>&gt;<i> I agree that defining exact UI is a bad idea. However I think we should 
</I>&gt;<i> define the semantic meaning of the context menu. If the semantics are 
</I>&gt;<i> that the context menu provided by the page is intended to be additional 
</I>&gt;<i> context actions, or alternative context actions.
</I>
I've tried to add more text to the spec to encourage UAs to not show the 
UA menu items as prominently. Is that sufficient? We're constrained in 
what we can do, given that this is UI stuff.


&gt;<i> &gt;&gt; So are you proposing that the default should be that no UA menu 
</I>&gt;<i> &gt;&gt; options are displayed. I.e. the default being as if nodefault was 
</I>&gt;<i> &gt;&gt; set?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; As a user, I would hate that. But if you as a browser vendor are 
</I>&gt;<i> &gt; telling me as a spec writer that this is what would be needed to 
</I>&gt;<i> &gt; convince authors to not use &lt;div&gt;s for context menus, then yes.
</I>&gt;<i> 
</I>&gt;<i> What I was saying as a browser vendor is that I don't think that authors 
</I>&gt;<i> are going to use this feature unless it provide the ability to replace 
</I>&gt;<i> the existing context menu. Or at least almost entirely replace it.
</I>
Sure. Honestly, though, I think the bigger blocker right now is that 
there's only one implementation (and it doesn't match the spec).


&gt;<i> You are the one that is requesting that we only have a single mode.
</I>
Well, I think in general it's pretty uncontroversial that, all other 
things being equal, APIs are better if they have less surface area. So 
sure, I'd rather we not have multiple modes if we don't need them.


&gt;<i> If we are to fulfill both these requirements then yes, we end up with 
</I>&gt;<i> something that both you and I would hate in many cases.
</I>&gt;<i> 
</I>&gt;<i> The alternative that I have proposed, but that you so far have rejected, 
</I>&gt;<i> is the ability for the author to select mode, i.e. select if he/she 
</I>&gt;<i> wants to replace or add to the existing menu.
</I>
If the options are:

 - authors never use the feature
 - users lose their control over their browser
 - the feature has a complicated API

...then we're stuck in a bad place, certainly. But I don't think those are 
the only options; what about these, for instance:

 - authors use the feature anyway, and like that it gives users power
 - browsers default to showing mainly the author's menuitems, but offer
   a discoverable way for users to find more options if they need them

Ok, the first of these two might be too optimistic, but the second should 
be workable, no? That's what the spec now suggests. I've added an example 
that shows how this could work:

Before (only the author's commands):
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/images/contextmenu-collapsed.png">http://www.whatwg.org/specs/web-apps/current-work/images/contextmenu-collapsed.png</A>

After (the user having clicked a disclosure widget):
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/images/contextmenu-expanded.png">http://www.whatwg.org/specs/web-apps/current-work/images/contextmenu-expanded.png</A>


&gt;<i> &gt; As a user, what I would like to be the behaviour, without the ability 
</I>&gt;<i> &gt; for the author to override it, is for the context menu to have the 
</I>&gt;<i> &gt; author's context menu items plus the context-sensitive items that 
</I>&gt;<i> &gt; cannot be accessed via the regular menus (e.g. Inspect Element, View 
</I>&gt;<i> &gt; Image, Copy Link Location, that kind of thing).
</I>&gt;<i> 
</I>&gt;<i> The ability to override the authors request of replacing the context 
</I>&gt;<i> menu seems like a quality of implementation issue. For example I would 
</I>&gt;<i> imagine that Firefox would hook up the already existing &quot;allow authors 
</I>&gt;<i> to replace context menu&quot; UI option to control whether the nodefault 
</I>&gt;<i> attribute was honored.
</I>&gt;<i> 
</I>&gt;<i> Likewise chrome could supply an extension to do the same thing.
</I>
Personally, I don't want to prevent authors from providing me with 
features. I just want to prevent them from removing features. What I want 
is the union of the site's features and the browser's features. Firefox's 
&quot;allow authors to replace context menu&quot; UI option is IMHO insufficient.


&gt;<i> &gt;&gt; I guess I could live with that as long as there was a way for the 
</I>&gt;<i> &gt;&gt; page to opt in to displaying items. It would allow adding more 
</I>&gt;<i> &gt;&gt; finegrained control over which categories of menu items are turned 
</I>&gt;<i> &gt;&gt; backed on which could be neat.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm very skeptical about adding any kind of control here before we 
</I>&gt;<i> &gt; have broader implementation experience. Once we do, then it will be 
</I>&gt;<i> &gt; revisited anyway, since we have this bug on file:
</I>&gt;<i> 
</I>&gt;<i> I doubt that I can change your mind on this. But I'll note that that 
</I>&gt;<i> means that that likely means that we'll have to make the default 
</I>&gt;<i> behavior the behavior that you like less.
</I>
I think it's possible to have a default behaviour that both does what 
authors want, and gives users full access to the browser commands.


&gt;<i> &gt; What items are there that it sometimes makes sense to expose but 
</I>&gt;<i> &gt; othertimes does not make sense to expose?
</I>&gt;<i> 
</I>&gt;<i> I'm not sure I understand the question.
</I>
If we allow authors to replace the menu entirely, then that means we think 
that there are times where there are context menu items that shouldn't be 
shown, which would have been shown, if the author hadn't replaced the 
menu. I'm asking, what are those menu items? What commands are there that 
we sometimes think are important enough to expose (that's why they're in 
the context menu), but other times think they are unimportant enough that 
we can just prevent access to them (that's why we let the author replace 
them)? It seems weird to me that we'd have any such commands.


On Fri, 4 Jan 2013, Tab Atkins Jr. wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; I agree that it's an awful experience, especially because it turns the 
</I>&gt;<i> &gt; user's habits against them.  If the Nth item in the menu is ordinarily 
</I>&gt;<i> &gt; the UA's &quot;Copy Link Location&quot; and an app removes or re-orders items so 
</I>&gt;<i> &gt; that the Nth item changes to &quot;Rotate&quot;, &quot;Share&quot;, or &quot;Delete,&quot; then 
</I>&gt;<i> &gt; users are in for a surprise when they make the automatic &quot;Copy Link 
</I>&gt;<i> &gt; Location&quot; gesture.
</I>&gt;<i> 
</I>&gt;<i> Gah, strongly agree.  Simple example - I use &quot;Back&quot; constantly in the 
</I>&gt;<i> context menu, and would be really pissed if pages could easily kill 
</I>&gt;<i> that.  I already get angry when I accidentally right-click a link and 
</I>&gt;<i> just select the first option without looking closely.
</I>
I don't know what we can do about that. Authors definitely won't want 
their UI items to be below &quot;Back&quot;. That would imply that leaving their 
site is more important than using their site's features.


&gt;<i> On Mon, Dec 31, 2012 at 12:54 AM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; 
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; What I was saying as a browser vendor is that I don't think that 
</I>&gt;<i> &gt; authors are going to use this feature unless it provide the ability to 
</I>&gt;<i> &gt; replace the existing context menu. Or at least almost entirely replace 
</I>&gt;<i> &gt; it.
</I>&gt;<i> 
</I>&gt;<i> I don't think I can agree with this.
</I>
Well certainly if browsers don't implement it at all, they'll have a much 
bigger reason not to use it. :-)


&gt;<i> This argument would be more believable if authors currently used 
</I>&gt;<i> pile-of-divs for context menus a lot, but I only rarely actually see it.  
</I>&gt;<i> I think this is because it's just plain *hard* to do it even 
</I>&gt;<i> half-decently.  The extreme ease with which authors will be able to 
</I>&gt;<i> create high-quality context menus with &lt;menu&gt; will, I think, override a 
</I>&gt;<i> lot of the concerns.
</I>
I see these kinds of context menus more and more, in particular in Web apps.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>


















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040197.html">[whatwg] iframe sandbox and allow-scripts
</A></li>
	<LI>Next message: <A HREF="082490.html">[whatwg] &lt;menu&gt; and friends
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40201">[ date ]</a>
              <a href="thread.html#40201">[ thread ]</a>
              <a href="subject.html#40201">[ subject ]</a>
              <a href="author.html#40201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
