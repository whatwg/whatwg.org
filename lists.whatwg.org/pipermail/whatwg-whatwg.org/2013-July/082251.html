<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] URL resolution of fragment urls in html5 webapps
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20URL%20resolution%20of%20fragment%20urls%20in%20html5%20webapps&In-Reply-To=%3CCANr5HFXkxQuiy%2Bn1jDkd%3DjP92Wz%3DE0_BrGbo40A0xxjpbAw2dQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039967.html">
   <LINK REL="Next"  HREF="082252.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] URL resolution of fragment urls in html5 webapps</H1>
<!--htdig_noindex-->
    <B>Alex Russell</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20URL%20resolution%20of%20fragment%20urls%20in%20html5%20webapps&In-Reply-To=%3CCANr5HFXkxQuiy%2Bn1jDkd%3DjP92Wz%3DE0_BrGbo40A0xxjpbAw2dQ%40mail.gmail.com%3E"
       TITLE="[whatwg] URL resolution of fragment urls in html5 webapps">slightlyoff at google.com
       </A><BR>
    <I>Wed Jul 10 10:24:42 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="039967.html">[whatwg] URL resolution of fragment urls in html5 webapps
</A></li>
        <LI>Next message: <A HREF="082252.html">[whatwg] URL resolution of fragment urls in html5 webapps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82251">[ date ]</a>
              <a href="thread.html#82251">[ thread ]</a>
              <a href="subject.html#82251">[ subject ]</a>
              <a href="author.html#82251">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>hey Igor,

Was just discussing this with Rafael, and it seems like the core issue
you're flagging is that if a document has a &lt;base&gt; element, all #anchor
navigations (which would otherwise be document relative) are now full-page
navigations to the URL specified in the &lt;base&gt;, not the document's
&quot;natural&quot; URL. Is that right?

If so, we might be able give you some control over this in the Navigation
Controller (although it's not currently scoped as many folks didn't want to
contemplate in-document navigation for the time being).

But perhaps we don't need to do that: is the current behavior the same
across browsers? If it's not, we might be able to change the spec. If it
is, it'll be harder.

Regards


On Wed, Jul 10, 2013 at 7:11 AM, Igor Minar &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">iminar at google.com</A>&gt; wrote:

&gt;<i> The current url resolution as
</I>&gt;<i> described&lt;
</I>&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#resolving-urls">http://www.whatwg.org/specs/web-apps/current-work/#resolving-urls</A>&gt;in
</I>&gt;<i> the spec results in some unhelpful behavior when the following
</I>&gt;<i> combination of web technologies are used in a client-side web app:
</I>&gt;<i>
</I>&gt;<i> - a combination of path-relative urls (&lt;a
</I>&gt;<i> href=&quot;relative/url/to/somewhere&quot;&gt;link&lt;/a&gt;) and fragment/anchor urls (&lt;a
</I>&gt;<i> href=&quot;#anchorUrl&quot;&gt;link&lt;/a&gt;)
</I>&gt;<i> - history.pushState - used for deep-linking
</I>&gt;<i> - base[href] - used to properly resolve the relative urls to the root of
</I>&gt;<i> the application in various deployment environments
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Once history.pushState is used to change location.href, the path-relative
</I>&gt;<i> urls resolve correctly as expected against the base[href], but anchor urls
</I>&gt;<i> that are only useful if resolved against the current document.baseURI also
</I>&gt;<i> unsurprisingly resolve against the base[href]. This behavior makes them
</I>&gt;<i> unsuitable for this kind of applications which is a big loss in developers
</I>&gt;<i> toolbox and in fact breaks existing web features like svg that depend on
</I>&gt;<i> anchor urls to reference nodes in the current document.
</I>&gt;<i>
</I>&gt;<i> Does anyone have thoughts on how one could build a client-side app that can
</I>&gt;<i> be deployed in various contexts without any special server-side templating
</I>&gt;<i> or build-time pre-processing?
</I>&gt;<i>
</I>&gt;<i> The base element looks like a perfect solution for this, if only it didn't
</I>&gt;<i> break anchor urls.
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039967.html">[whatwg] URL resolution of fragment urls in html5 webapps
</A></li>
	<LI>Next message: <A HREF="082252.html">[whatwg] URL resolution of fragment urls in html5 webapps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82251">[ date ]</a>
              <a href="thread.html#82251">[ thread ]</a>
              <a href="subject.html#82251">[ subject ]</a>
              <a href="author.html#82251">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
