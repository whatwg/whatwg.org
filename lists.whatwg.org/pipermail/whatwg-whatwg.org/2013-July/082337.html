<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Script preloading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading&In-Reply-To=%3CCABbusAJb-aK7J_DCuA0g4EWeCEi%3DZumHTSMe1R4TFiHsnsfrZw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082282.html">
   <LINK REL="Next"  HREF="082349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Script preloading</H1>
<!--htdig_noindex-->
    <B>Andy Davies</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading&In-Reply-To=%3CCABbusAJb-aK7J_DCuA0g4EWeCEi%3DZumHTSMe1R4TFiHsnsfrZw%40mail.gmail.com%3E"
       TITLE="[whatwg] Script preloading">dajdavies at gmail.com
       </A><BR>
    <I>Sat Jul 13 05:55:42 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082282.html">[whatwg] Script preloading
</A></li>
        <LI>Next message: <A HREF="082349.html">[whatwg] Script preloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82337">[ date ]</a>
              <a href="thread.html#82337">[ thread ]</a>
              <a href="subject.html#82337">[ subject ]</a>
              <a href="author.html#82337">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 12 July 2013 01:25, Bruno Racineux &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruno at hexanet.net</A>&gt; wrote:

&gt;<i> On browser preloading:
</I>&gt;<i>
</I>&gt;<i> There seems to an inherent conflict between 'indiscriminate' Pre-parsers/
</I>&gt;<i> PreloadScanner and &quot;responsive design&quot; for mobile. Responsive designs
</I>&gt;<i> mostly implies that everything needed for a full screen desktop is
</I>&gt;<i> provided in markup to all devices.
</I>&gt;<i>
</I>&gt;<i>
</I>The pre-loader is a tradeoff, it's aiming to increase network utilisation
by speculatively downloading resources it can discover.

Some of the resources downloaded may be not be used but with good design
and mobile first approaches hopefully this number can be minimised.

Even if some unused resources get downloaded how much it matter?

By starting the downloads earlier, connections will be opened sooner, and
the TCP congestion window to grow sooner. Of course this has to be balanced
against visitors who might be paying to download those unused bytes, and
whether the unused resources are blocking something on the critical path
from being downloaded (believe some preloaders can re-prioritise resources
if they need them before the preloader has downloaded them)

Although we talk about *the preloader*, it's worth remembering different
browsers (and versions) have different preloading approaches - compare the
connection view charts (at bottom of page) for www.channel4.com in Chrome,
Firefox and IE10 and you'll see subtle differences:

Chrome <A HREF="http://www.webpagetest.org/result/130713_0J_PC1/1/details/">http://www.webpagetest.org/result/130713_0J_PC1/1/details/</A>
Firefox <A HREF="http://www.webpagetest.org/result/130713_P2_PBZ/1/details/">http://www.webpagetest.org/result/130713_P2_PBZ/1/details/</A>
IE10 <A HREF="http://www.webpagetest.org/result/130713_9A_PBW/1/details/">http://www.webpagetest.org/result/130713_9A_PBW/1/details/</A>



&gt;<i> Isn't the Pre-parsers/PreloadScanner's inability to take into account the
</I>&gt;<i> display[none:yes] factor be a potential significant blow to 'mobile'
</I>&gt;<i> performance.
</I>
Use case: What if I have a set of images in an element set as
&gt;<i> display:none; only designated to be show on desktop or tablet screens and
</I>&gt;<i> not on mobile phone?
</I>&gt;<i>
</I>&gt;<i> What if I have an inline script in that node?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Isn't the PreloadScanner loading a lot more than I need, a problem here?
</I>&gt;<i>
</I>
Challenge with this approach is the browser has to build the render tree
before it can decide whether to download a resource i.e. download HTML,
parse it, build a DOM, download CSS, parse it, build CSSOM, then build
render tree.



&gt;<i>
</I>&gt;<i> In addition to the need to preload, with responsive design taken into
</I>&gt;<i> consideration, and for lack of not being able to remove part of the &lt;body&gt;
</I>&gt;<i> before the browser parses the document. I see an increasing potential need
</I>&gt;<i> for the ability to indicate to the browser not to load selective assets
</I>&gt;<i> before DOMReady and suppress such preload.
</I>&gt;<i>
</I>&gt;<i>
</I>The proposed lazyload attribute should help here
<A HREF="https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/ResourcePriorities/Overview.html">https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/ResourcePriorities/Overview.html</A>


Yoav Weiss has raised the idea of being able to use media queries with
scripts and other resources too.

Responsive design is young, I think we still have a lot to learn and it's
going to take a while before we really understand what features we need.

Cheers

Andy

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082282.html">[whatwg] Script preloading
</A></li>
	<LI>Next message: <A HREF="082349.html">[whatwg] Script preloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82337">[ date ]</a>
              <a href="thread.html#82337">[ thread ]</a>
              <a href="subject.html#82337">[ subject ]</a>
              <a href="author.html#82337">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
