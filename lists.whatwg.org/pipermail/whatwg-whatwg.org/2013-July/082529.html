<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML: A DOM attribute that returns the language of a node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%3A%20A%20DOM%20attribute%20that%20returns%20the%20language%20of%20a%0A%20node&In-Reply-To=%3Calpine.DEB.2.00.1307261816520.27623%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082504.html">
   <LINK REL="Next"  HREF="040046.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML: A DOM attribute that returns the language of a node</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%3A%20A%20DOM%20attribute%20that%20returns%20the%20language%20of%20a%0A%20node&In-Reply-To=%3Calpine.DEB.2.00.1307261816520.27623%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] HTML: A DOM attribute that returns the language of a node">ian at hixie.ch
       </A><BR>
    <I>Fri Jul 26 11:20:29 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082504.html">[whatwg] HTML: A DOM attribute that returns the language of a	node
</A></li>
        <LI>Next message: <A HREF="040046.html">[whatwg] Alignment of empty buttons
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82529">[ date ]</a>
              <a href="thread.html#82529">[ thread ]</a>
              <a href="subject.html#82529">[ subject ]</a>
              <a href="author.html#82529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 24 Jul 2013, Ryosuke Niwa wrote:
&gt;<i> On Jul 16, 2013, at 11:25 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; On Tue, 16 Jul 2013, Takayoshi Kochi (&#27827;&#20869; &#38534;&#20161;) wrote:
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; IIUC WebKit uses internally node's language to determine which font 
</I>&gt;<i> &gt;&gt; to use to render text, e.g for Han unification 
</I>&gt;<i> &gt;&gt; (<A HREF="https://en.wikipedia.org/wiki/Han_unification">https://en.wikipedia.org/wiki/Han_unification</A>) WebKit has to choose 
</I>&gt;<i> &gt;&gt; a proper glyph depending on its lang attribute for the same Unicode 
</I>&gt;<i> &gt;&gt; codepoint.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Sure, but internal UA uses aren't use cases for the Web.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The use cases Peter gave over the weekend are valid, though.
</I>&gt;<i> 
</I>&gt;<i> The fact browsers use the &quot;effective&quot; language for font selection is 
</I>&gt;<i> very relevant in HTML editing. For example, consider the following 
</I>&gt;<i> document:
</I>&gt;<i> 
</I>&gt;<i> &lt;!DOCTYPE html&gt;
</I>&gt;<i> &lt;html lang=&quot;ja&gt;
</I>&gt;<i> &lt;html&gt;
</I>&gt;<i> &lt;body&gt;
</I>&gt;<i> &lt;section lang=&quot;zh&quot;&gt;
</I>&gt;<i> &lt;p id=&quot;source&quot;&gt;&#20711;&#24272;&#22505;&lt;/p&gt;
</I>&gt;<i> &lt;/section&gt;
</I>&gt;<i> &lt;blockquote&gt;
</I>&gt;<i> &lt;p id=&quot;destination&quot;&gt;&lt;/p&gt;
</I>&gt;<i> &lt;/blockquote&gt;
</I>&gt;<i> &lt;/body&gt;
</I>&gt;<i> &lt;/html&gt;
</I>&gt;<i> 
</I>&gt;<i> If you were to get the innerHTML of #source and insert it into 
</I>&gt;<i> #destination, the effective language changes from Chinese and Japanese 
</I>&gt;<i> and the three characters transform their shapes because browsers will 
</I>&gt;<i> use different fallback fonts.
</I>
It's unclear to me what use case you are describing here.

Are you saying that for HTML contenteditable-based editors that want to 
support drag-and-drop editing, they need to be able to annotate the 
outgoing HTML fragment with the effective language so that when it's 
embedded somewhere, the right fonts get used?

This seems like something that browsers should just do automatically for 
copy-and-paste and drag-and-drop, I wouldn't want to require that every 
contenteditable-based editor have to reimplement this. That seems like a 
lot of redundant work, and in particular, seems to be work that most 
editor implementors would forget. If the browsers just did the annotation 
automatically, then this would work even in editors whose implementors 
didn't worry about i18n.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082504.html">[whatwg] HTML: A DOM attribute that returns the language of a	node
</A></li>
	<LI>Next message: <A HREF="040046.html">[whatwg] Alignment of empty buttons
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82529">[ date ]</a>
              <a href="thread.html#82529">[ thread ]</a>
              <a href="subject.html#82529">[ subject ]</a>
              <a href="author.html#82529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
