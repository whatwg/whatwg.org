<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20createImageBitmap%20should%20return%20a%20%22Promise%22%0A%20instead%20of%20using%20a%20callback&In-Reply-To=%3CCAHp8n2kjHjLbFqixTDC8VGOhf-kO9vduC4aS-bz%2Buu_dwQDKKA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082396.html">
   <LINK REL="Next"  HREF="082400.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback</H1>
<!--htdig_noindex-->
    <B>Silvia Pfeiffer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20createImageBitmap%20should%20return%20a%20%22Promise%22%0A%20instead%20of%20using%20a%20callback&In-Reply-To=%3CCAHp8n2kjHjLbFqixTDC8VGOhf-kO9vduC4aS-bz%2Buu_dwQDKKA%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback">silviapfeiffer1 at gmail.com
       </A><BR>
    <I>Wed Jul 17 17:22:41 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082396.html">[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
</A></li>
        <LI>Next message: <A HREF="082400.html">[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82398">[ date ]</a>
              <a href="thread.html#82398">[ thread ]</a>
              <a href="subject.html#82398">[ subject ]</a>
              <a href="author.html#82398">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Jul 18, 2013 at 10:00 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Wed, 17 Jul 2013, Justin Novosad wrote:
</I>&gt;&gt;<i> On Wed, Jul 17, 2013 at 6:54 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; On Thu, 18 Jul 2013, Silvia Pfeiffer wrote:
</I>&gt;&gt;<i> &gt; &gt; At the same time, I think we should follow a clear pattern for
</I>&gt;&gt;<i> &gt; &gt; introducing a Promise based API, which the .create() approach would
</I>&gt;&gt;<i> &gt; &gt; provide.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I don't understand what that means.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think the concern is about the case where we end up with legacy
</I>&gt;&gt;<i> callback Factory methods that co-exist new with Promise-based flavors of
</I>&gt;&gt;<i> the factory methods. There's no technical obstacle to having the two
</I>&gt;&gt;<i> co-exist with the same name, it's just an overload.
</I>
Yes, that's my concern.


&gt;<i> I guess I don't understand what methods we're talking about here. Can we
</I>&gt;<i> be more concrete? I am very much in favour of not having redundant APIs,
</I>&gt;<i> not having lots of different kinds of APIs. But I'm not aware of this
</I>&gt;<i> problem existing here. We have constructors and synchronous factory
</I>&gt;<i> methods, have had for over a decade, and we're slowly adding constructors
</I>&gt;<i> where it makes sense and not adding new synchronous factory methods. But
</I>&gt;<i> in the case of ImageData, we need an asynchronous factory. This is unusual
</I>&gt;<i> in the Web; mostly we have instead returned incomplete objects. In this
</I>&gt;<i> case, the whole point of the API is to avoid this. This means we need a
</I>&gt;<i> callback mechanism; Promises are a good, non-invasive way to do this.
</I>
We have the same issues with WebRTC, which already has a callback
based API, but there is a suggestion to replace/augment with a Promise
based API, so I just wanted to understand the motivation, potential
complications and implications.

One issue is the change in API paradigm that we use. People have got
used to wrapping the callback API with a Promise style API when they
need it. Now they have to do both: wrap the browser API for a Promise
style API and wrap it for a callback style API.

It may well be that Promises are the right way to go for
createImageBitmap(), but we are blazing a new trail here and need to
be careful about the implications. For example, here is an interesting
discussion thread with a statement that node.js originally used
Promises, but moved away from them for several reasons, not least
because they created a 20% performance degradation with v8:
<A HREF="https://github.com/gladiusjs/gladius-core/issues/127#issuecomment-5212272">https://github.com/gladiusjs/gladius-core/issues/127#issuecomment-5212272</A>
.

I just want us to be clear about the situations in which we should
take this step and where we should avoid it.

Silvia.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082396.html">[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
</A></li>
	<LI>Next message: <A HREF="082400.html">[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82398">[ date ]</a>
              <a href="thread.html#82398">[ thread ]</a>
              <a href="subject.html#82398">[ subject ]</a>
              <a href="author.html#82398">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
