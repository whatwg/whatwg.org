<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Script preloading, ES6 modules
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading%2C%20ES6%20modules&In-Reply-To=%3Cop.wz9qe70pte2ec8%40aimac%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082342.html">
   <LINK REL="Next"  HREF="082453.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Script preloading, ES6 modules</H1>
<!--htdig_noindex-->
    <B>Kornel Lesi&#324;ski</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading%2C%20ES6%20modules&In-Reply-To=%3Cop.wz9qe70pte2ec8%40aimac%3E"
       TITLE="[whatwg] Script preloading, ES6 modules">kornel at geekhood.net
       </A><BR>
    <I>Mon Jul 15 07:55:45 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082342.html">[whatwg] Script preloading
</A></li>
        <LI>Next message: <A HREF="082453.html">[whatwg] Script preloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82353">[ date ]</a>
              <a href="thread.html#82353">[ thread ]</a>
              <a href="subject.html#82353">[ subject ]</a>
              <a href="author.html#82353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
ES6 modules[1] have a script loader API[2].

That API is pretty powerful to the point it can emulate other script  
loaders, load files that are not ES6 modules, and even load text files  
that aren't JS (intended for compilation of coffeescript-like languages,  
but could be abused for anything):

<A HREF="https://gist.github.com/wycats/51c96e3adcdb3a68cbc3#using-existing-libraries-as-modules">https://gist.github.com/wycats/51c96e3adcdb3a68cbc3#using-existing-libraries-as-modules</A>


There's a very high overlap between module dependencies and &lt;script  
dependencies&gt; proposal. I think at very least it would be useful to define  
&lt;script dependencies&gt; in terms of ES6 modules, or even abandon markup  
solution to avoid duplicating features.


ES6 modules however do not solve the performance problem. In fact they  
would benefit from UA having a list of all dependencies up front  
(otherwise file's dependencies can only be discovered after that file is  
loaded, which costs as many RTTs as the height of the dependency tree).

So I think that eventually ES6 modules + link[rel=subresource] could be  
the answer. The &lt;link&gt; would expose URLs to (pre)load for performance, but  
modules would handle actual loading/execution for flexibility and  
reliability.

-- 
regards, Kornel

[1] <A HREF="http://wiki.ecmascript.org/doku.php?id=harmony:modules">http://wiki.ecmascript.org/doku.php?id=harmony:modules</A>
[2] <A HREF="http://wiki.ecmascript.org/doku.php?id=harmony:module_loaders">http://wiki.ecmascript.org/doku.php?id=harmony:module_loaders</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082342.html">[whatwg] Script preloading
</A></li>
	<LI>Next message: <A HREF="082453.html">[whatwg] Script preloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82353">[ date ]</a>
              <a href="thread.html#82353">[ thread ]</a>
              <a href="subject.html#82353">[ subject ]</a>
              <a href="author.html#82353">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
