<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Script preloading: Browser Pre-compiled Scripts Cache?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading%3A%20Browser%20Pre-compiled%20Scripts%20Cache%3F&In-Reply-To=%3CCE09C122.6D1A1%25bruno%40hexanet.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082360.html">
   <LINK REL="Next"  HREF="082364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?</H1>
<!--htdig_noindex-->
    <B>Bruno Racineux</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading%3A%20Browser%20Pre-compiled%20Scripts%20Cache%3F&In-Reply-To=%3CCE09C122.6D1A1%25bruno%40hexanet.net%3E"
       TITLE="[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?">bruno at hexanet.net
       </A><BR>
    <I>Mon Jul 15 16:28:51 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082360.html">[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?
</A></li>
        <LI>Next message: <A HREF="082364.html">[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82362">[ date ]</a>
              <a href="thread.html#82362">[ thread ]</a>
              <a href="subject.html#82362">[ subject ]</a>
              <a href="author.html#82362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>

On 7/15/13 3:02 PM, &quot;Yoav Weiss&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">yoav at yoav.ws</A>&gt; wrote:

&gt;&gt;<i>
</I>&gt;&gt;<i> It goes beyond frameworks if based on pure 'access frequency'.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For example, a site backend you use daily or you favorite web app would
</I>&gt;&gt;<i>be
</I>&gt;&gt;<i> also benefit.
</I>&gt;&gt;<i> Including the G+, Twitter and Facebook site's scripts, Map APIs, Google
</I>&gt;&gt;<i> News, or whatever you access most frequently from your machine.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>For scripts that are always delivered through a single URL, no standard
</I>&gt;<i>change is needed in order to make this optimization happen. As Boris
</I>&gt;<i>pointed out, this is already done in Firefox [1]
</I>Nods, I think I get what Boris said for the most part, reading the links
afterwards.


&gt;<i>
</I>&gt;&gt;<i> And I am not thinking 'installation' or 'packages' in the sense that you
</I>&gt;&gt;<i> expressed.
</I>&gt;&gt;<i> That was my early thinking too, but say Google providing jQuery and all
</I>&gt;&gt;<i> the hosted APIs preloaded in Chrome seems too difficult to handle, due
</I>&gt;&gt;<i>to
</I>&gt;&gt;<i> versioning aspects as well as limited scope.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To be truly worth, it needs to be broad, based on access frequency by
</I>&gt;&gt;<i>urls.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Unfortunately, for framework caching, using only URLs for caching purposes
</I>&gt;<i>have proven to be insufficient, resulting in very little code reuse across
</I>&gt;<i>sites, because of multiple CDNS and versioning [2]
</I>
Well just to be clear, my suggested approach rely on URL 'access
frequency' beyond browser sessions, and beyond libraries.
i.e. The compiled cache only gets recycled for frequently accessed scripts.

If the most frequently accessed scripts turn out to be jquery 1.8.2 and
1.10.2 and 2.0.3, then all three are cached of even 10 versions is that's
the case.
Then possibly put to disk on browser shutdown and back to memory on start.
And say reserve a sticky cache of up to XMB of ram for those.
They oviously have to be re-cached as per given cache expiration.

But in that it doesn't really care about a particular library, it's
popularity or even it's code. It's code agnostics and mostly concerned
that the script you access every day are pre-compiled and never
re-downloaded until cache expiry. That's the idea.

&gt;<i>
</I>&gt;<i>[1] <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=883154">https://bugzilla.mozilla.org/show_bug.cgi?id=883154</A>
</I>
The outline there suggest: &quot;- When compiling a lazy script with no inner
functions, do a table lookup for a script with the same source location
(filename, lineno, column, source begin/end&quot;

I am no going that far with the overhead. My suggestion is to be only
interested in the unique URL hash (not line no, column, or source
begin/end). Just how many times that script has been accessed in the last
day, week or month.

Perhaps I am wrongly thinking of whole scripts vs thinking of &quot;script&quot; as
a &quot;function body&quot; like Boris suggested. I am not a browser-dev or c coder,
and only relying on php opcode as limited basis for my though process...

Or the &quot;fundamental unit of compilation&quot; for JS is incompatible with my
approach. IDK

&gt;<i>[2] <A HREF="http://statichtml.com/2011/google-ajax-libraries-caching.html">http://statichtml.com/2011/google-ajax-libraries-caching.html</A>
</I>



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082360.html">[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?
</A></li>
	<LI>Next message: <A HREF="082364.html">[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82362">[ date ]</a>
              <a href="thread.html#82362">[ thread ]</a>
              <a href="subject.html#82362">[ subject ]</a>
              <a href="author.html#82362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
