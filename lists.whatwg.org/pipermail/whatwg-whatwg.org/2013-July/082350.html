<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Script preloading: Browser Pre-compiled Scripts Cache?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading%3A%20Browser%20Pre-compiled%20Scripts%20Cache%3F&In-Reply-To=%3CCE08D379.6CCC1%25bruno%40hexanet.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082349.html">
   <LINK REL="Next"  HREF="082351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?</H1>
<!--htdig_noindex-->
    <B>Bruno Racineux</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading%3A%20Browser%20Pre-compiled%20Scripts%20Cache%3F&In-Reply-To=%3CCE08D379.6CCC1%25bruno%40hexanet.net%3E"
       TITLE="[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?">bruno at hexanet.net
       </A><BR>
    <I>Mon Jul 15 00:42:54 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082349.html">[whatwg] Script preloading
</A></li>
        <LI>Next message: <A HREF="082351.html">[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82350">[ date ]</a>
              <a href="thread.html#82350">[ thread ]</a>
              <a href="subject.html#82350">[ subject ]</a>
              <a href="author.html#82350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Taking about &quot;executing script as quickly as possible&quot; (threads from 1012
which I missed and tried to glanced through just get better educated about
previous conversations).

Wouldn't browsers be able to store &quot;pre-parsed/compiled' scripts in a
separate &quot;byte code&quot; cache,
with scripts promoted to the sticky cache based on their access frequency
(up to cache expiration)?
Say similarly to the way Fusion Drives or Seagate Adaptive Memory SSHDs
work.

i.e. Why do we have to keep re-parsing and re-evaluating the very same
scripts, especially CDN libraries and social apis largely shared among
websites, over and over?

If javascript can't be as truly fast a native apps:
<A HREF="http://sealedabstract.com/rants/why-mobile-web-apps-are-slow/">http://sealedabstract.com/rants/why-mobile-web-apps-are-slow/</A>
It seems that for frequently visited sites and frequently accessed libraries
across websites, the whole parse/evaluation time, could be cut 'partially',
yet very significantly, just like opcode does for php.
And make CDN libraries even more useful and relevant that way. Or is this
wildly nuts? In which case no need to answer.

Bruno



From:  Andy Davies &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">dajdavies at gmail.com</A>&gt;
Date:  Saturday, July 13, 2013 5:55 AM
To:  Bruno Racineux &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruno at hexanet.net</A>&gt;, WHATWG List &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at whatwg.org</A>&gt;
Subject:  Re: [whatwg] Script preloading

&gt;<i> On 12 July 2013 01:25, Bruno Racineux &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruno at hexanet.net</A>&gt; wrote:
</I>&gt;&gt;<i> On browser preloading:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> There seems to an inherent conflict between 'indiscriminate' Pre-parsers/
</I>&gt;&gt;<i> PreloadScanner and &quot;responsive design&quot; for mobile. Responsive designs
</I>&gt;&gt;<i> mostly implies that everything needed for a full screen desktop is
</I>&gt;&gt;<i> provided in markup to all devices.
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The pre-loader is a tradeoff, it's aiming to increase network utilisation by
</I>&gt;<i> speculatively downloading resources it can discover.
</I>&gt;<i> 
</I>&gt;<i> Some of the resources downloaded may be not be used but with good design and
</I>&gt;<i> mobile first approaches hopefully this number can be minimised.
</I>&gt;<i> 
</I>&gt;<i> Even if some unused resources get downloaded how much it matter?
</I>&gt;<i> 
</I>&gt;<i> By starting the downloads earlier, connections will be opened sooner, and the
</I>&gt;<i> TCP congestion window to grow sooner. Of course this has to be balanced
</I>&gt;<i> against visitors who might be paying to download those unused bytes, and
</I>&gt;<i> whether the unused resources are blocking something on the critical path from
</I>&gt;<i> being downloaded (believe some preloaders can re-prioritise resources if they
</I>&gt;<i> need them before the preloader has downloaded them)
</I>&gt;<i> 
</I>&gt;<i> Although we talk about *the preloader*, it's worth remembering different
</I>&gt;<i> browsers (and versions) have different preloading approaches - compare the
</I>&gt;<i> connection view charts (at bottom of page) for www.channel4.com
</I>&gt;<i> &lt;<A HREF="http://www.channel4.com">http://www.channel4.com</A>&gt;  in Chrome, Firefox and IE10 and you'll see subtle
</I>&gt;<i> differences:
</I>&gt;<i> 
</I>&gt;<i> Chrome <A HREF="http://www.webpagetest.org/result/130713_0J_PC1/1/details/">http://www.webpagetest.org/result/130713_0J_PC1/1/details/</A>
</I>&gt;<i> Firefox <A HREF="http://www.webpagetest.org/result/130713_P2_PBZ/1/details/">http://www.webpagetest.org/result/130713_P2_PBZ/1/details/</A>
</I>&gt;<i> IE10 <A HREF="http://www.webpagetest.org/result/130713_9A_PBW/1/details/">http://www.webpagetest.org/result/130713_9A_PBW/1/details/</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Isn't the Pre-parsers/PreloadScanner's inability to take into account the
</I>&gt;&gt;<i> display[none:yes] factor be a potential significant blow to 'mobile'
</I>&gt;&gt;<i> performance.
</I>&gt;&gt;<i> Use case: What if I have a set of images in an element set as
</I>&gt;&gt;<i> display:none; only designated to be show on desktop or tablet screens and
</I>&gt;&gt;<i> not on mobile phone?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> What if I have an inline script in that node?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Isn't the PreloadScanner loading a lot more than I need, a problem here?
</I>&gt;<i> 
</I>&gt;<i> Challenge with this approach is the browser has to build the render tree
</I>&gt;<i> before it can decide whether to download a resource i.e. download HTML, parse
</I>&gt;<i> it, build a DOM, download CSS, parse it, build CSSOM, then build render tree.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> In addition to the need to preload, with responsive design taken into
</I>&gt;&gt;<i> consideration, and for lack of not being able to remove part of the &lt;body&gt;
</I>&gt;&gt;<i> before the browser parses the document. I see an increasing potential need
</I>&gt;&gt;<i> for the ability to indicate to the browser not to load selective assets
</I>&gt;&gt;<i> before DOMReady and suppress such preload.
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The proposed lazyload attribute should help here
</I>&gt;<i> <A HREF="https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/ResourcePriorities/Overview.">https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/ResourcePriorities/Overview.</A>
</I>&gt;<i> html 
</I>&gt;<i> 
</I>&gt;<i> Yoav Weiss has raised the idea of being able to use media queries with scripts
</I>&gt;<i> and other resources too.
</I>&gt;<i> 
</I>&gt;<i> Responsive design is young, I think we still have a lot to learn and it's
</I>&gt;<i> going to take a while before we really understand what features we need.
</I>&gt;<i> 
</I>&gt;<i> Cheers
</I>&gt;<i> 
</I>&gt;<i> Andy
</I>


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082349.html">[whatwg] Script preloading
</A></li>
	<LI>Next message: <A HREF="082351.html">[whatwg] Script preloading: Browser Pre-compiled Scripts Cache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82350">[ date ]</a>
              <a href="thread.html#82350">[ thread ]</a>
              <a href="subject.html#82350">[ subject ]</a>
              <a href="author.html#82350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
