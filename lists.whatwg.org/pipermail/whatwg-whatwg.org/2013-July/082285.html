<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Script preloading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading&In-Reply-To=%3CCE05023C.6B8B6%25bruno%40hexanet.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082280.html">
   <LINK REL="Next"  HREF="082255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Script preloading</H1>
<!--htdig_noindex-->
    <B>Bruno Racineux</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading&In-Reply-To=%3CCE05023C.6B8B6%25bruno%40hexanet.net%3E"
       TITLE="[whatwg] Script preloading">bruno at hexanet.net
       </A><BR>
    <I>Fri Jul 12 02:18:54 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082280.html">[whatwg] Script preloading
</A></li>
        <LI>Next message: <A HREF="082255.html">[whatwg] Script preloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82285">[ date ]</a>
              <a href="thread.html#82285">[ thread ]</a>
              <a href="subject.html#82285">[ subject ]</a>
              <a href="author.html#82285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>

On 7/11/13 6:00 AM, &quot;Jake Archibald&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jaffathecake at gmail.com</A>&gt; wrote:

&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>&lt;link rel=&quot;subresource&quot;&gt;&#138; almost 50% of scripts &#138; sent without proper
</I>&gt;&gt;<i>caching headers. If the browser is doing what it should do, it won't
</I>&gt;&gt;<i>cache those
</I>&gt;<i>
</I>&gt;<i>This is not how link[rel=subresource] should work, the first request
</I>&gt;<i>for the subresource should pick up from where the link left off. If it
</I>&gt;<i>doesn't do that, let's fix it, then we get the feature working
</I>&gt;<i>properly for more than just scripts.
</I>&gt;&gt;<i>6. Use-case: I want to preload a script which is hosted somewhere that I
</I>&gt;&gt;<i>don't control caching headers, and to my dismay, I discover that they
</I>&gt;&gt;<i>are serving the script with incorrect/busted/missing caching headers. If
</I>&gt;&gt;<i>I use a cache-preload technique, it will fail to work as I had hoped. I
</I>&gt;&gt;<i>will pay the double-download penalty because the browser didn't actually
</I>&gt;&gt;<i>cache it the first time, and my user will pay the extra UX penalty of
</I>&gt;&gt;<i>having to wait longer for the second load, when my whole goal was to
</I>&gt;&gt;<i>remove that UX visible delay.
</I>&gt;<i>
</I>&gt;<i>Use-case: (as above) I should be able to preload scripts served by a
</I>&gt;<i>third party with no cache headers
</I>&gt;<i>
</I>&gt;<i>link[rel=subresource] has you covered and should be fixed if it isn't
</I>&gt;<i>working.
</I>
Kyle, on the caching I don't think its legit to cache a file that is not
sent to be cached, as bad or involuntary as it might be from the provider.



Jake, now I that I am more familiarized with link[rel=subresource] it
seems to indeed solve some the &quot;preloading without executing&quot; side of
things. And good for performance especially if they can be provided in the
HEADER.

Is there a benefit from having a 'subresource' in the HEADER with the same
blocking script in the &lt;head&gt;?

I am thinking jQuery and the main css for example. It seems like css and
jQuery could be partially or even already available by the time &lt;/head&gt; is
received. Assuming the HEADER is received and processed before the &lt;head&gt;
start downloading (I am mot sure if this is the case).


It'd be useful that a broader scope of link[rel=subresource] be specified,
or pre-formalized. There is little documentation other than the chromium
page right now, and no reference on:
<A HREF="http://wiki.whatwg.org/wiki/RelExtensions,">http://wiki.whatwg.org/wiki/RelExtensions,</A> where it has a proposal status.

A couple question I would have right about it, based on its current
implementation are:

Can multiple subresource(s) be specified in the HEADER?


If specified in the HEADER can the Request send 'current' cookies?

Does the Response of a link[rel=subresource] from the HEADER set cookies
normally?

One issue, I am seeing right now in Opera/Blink is that the script seem to
download twice if requested with XHR. That shouldn't be.
 



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082280.html">[whatwg] Script preloading
</A></li>
	<LI>Next message: <A HREF="082255.html">[whatwg] Script preloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82285">[ date ]</a>
              <a href="thread.html#82285">[ thread ]</a>
              <a href="subject.html#82285">[ subject ]</a>
              <a href="author.html#82285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
