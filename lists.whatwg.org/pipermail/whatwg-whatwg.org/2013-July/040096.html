<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: location.parentOrigin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20location.parentOrigin&In-Reply-To=%3Calpine.DEB.2.00.1307161751130.31051%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082417.html">
   <LINK REL="Next"  HREF="082375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: location.parentOrigin</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20location.parentOrigin&In-Reply-To=%3Calpine.DEB.2.00.1307161751130.31051%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Proposal: location.parentOrigin">ian at hixie.ch
       </A><BR>
    <I>Tue Jul 16 10:53:36 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082417.html">[whatwg] Fwd: Why can't ImageBitmap objects have width and height attributes? (and other e-mails)
</A></li>
        <LI>Next message: <A HREF="082375.html">[whatwg] Proposal: location.parentOrigin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40096">[ date ]</a>
              <a href="thread.html#40096">[ thread ]</a>
              <a href="subject.html#40096">[ subject ]</a>
              <a href="author.html#40096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 20 Nov 2012, Tobie Langel wrote:
&gt;<i> On Tue, Nov 20, 2012 at 6:47 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; On Mon, 26 Mar 2012, Adam Barth wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; For nested browsing contexts, expose the origin of the parent 
</I>&gt;<i> &gt;&gt; browsing context via location.parentOrigin.  (For non-nested browsing 
</I>&gt;<i> &gt;&gt; context, the property would null.)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This ended up implemented in WebKit as Location.ancestorOrigins(), a 
</I>&gt;<i> &gt; method that returns a static DOMStringList with the origins of the 
</I>&gt;<i> &gt; ancestor browsing contexts in reverse order (top-level browsing 
</I>&gt;<i> &gt; context last, parent browsing context first). It doesn't respect 
</I>&gt;<i> &gt; sandboxing.
</I>&gt;<i> 
</I>&gt;<i> This API is painful to use and doesn't contain any info for 
</I>&gt;<i> window.opener or sibling browsing contexts (see WebKit bug[1] and 
</I>&gt;<i> related discussion on G+[2]) which makes it useless for some of the use 
</I>&gt;<i> cases.
</I>&gt;<i> 
</I>&gt;<i> A better API would allow to get the origin of a referenced browsing 
</I>&gt;<i> context, e.g.:
</I>&gt;<i> 
</I>&gt;<i>     window.getOrigin(otherWindow);
</I>&gt;<i> 
</I>&gt;<i> and to check whether it came from the same origin (sugar around 
</I>&gt;<i> window.getOrigin(otherWindow) == window.getOrigin(window)):
</I>&gt;<i> 
</I>&gt;<i>     window.isSameOrigin(otherWindow);
</I>&gt;<i> 
</I>&gt;<i> That said, one of the key use cases for this API is to code around a 
</I>&gt;<i> Webkit bug[3] so maybe that should be fixed first.
</I>&gt;<i>
</I>&gt;<i> [1]: <A HREF="https://bugs.webkit.org/show_bug.cgi?id=83493">https://bugs.webkit.org/show_bug.cgi?id=83493</A>
</I>&gt;<i> [2]: <A HREF="https://plus.google.com/116910304844117268718/posts/QyHfGL9GBd5">https://plus.google.com/116910304844117268718/posts/QyHfGL9GBd5</A>
</I>&gt;<i> [3]: <A HREF="https://bugs.webkit.org/show_bug.cgi?id=43504">https://bugs.webkit.org/show_bug.cgi?id=43504</A>
</I>
Would just exposing window.location.origin solve this?

Is there a privacy concern with doing that? It seems like it would be 
equivalent to the window.getOrigin(otherWindow) case above. parentOrigin 
doesn't have this problem because it's assumed that it's ok to access the 
origins of your ancestors, since you can't e.g. make one of your ancestors 
load a redirector URL and then read out its origin (since making your 
ancestor navigate will kill you).

Can't you do window.isSameOrigin by just trying to access 
window.location.href and seeing if you get an exception?

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>






































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082417.html">[whatwg] Fwd: Why can't ImageBitmap objects have width and height attributes? (and other e-mails)
</A></li>
	<LI>Next message: <A HREF="082375.html">[whatwg] Proposal: location.parentOrigin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40096">[ date ]</a>
              <a href="thread.html#40096">[ thread ]</a>
              <a href="subject.html#40096">[ subject ]</a>
              <a href="author.html#40096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
