<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20createImageBitmap%20should%20return%20a%20%22Promise%22%0A%20instead%20of%20using%20a%20callback&In-Reply-To=%3C51E73DDE.8030909%40therealcha0s.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082404.html">
   <LINK REL="Next"  HREF="082408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback</H1>
<!--htdig_noindex-->
    <B>Ruben Rodriguez II</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20createImageBitmap%20should%20return%20a%20%22Promise%22%0A%20instead%20of%20using%20a%20callback&In-Reply-To=%3C51E73DDE.8030909%40therealcha0s.net%3E"
       TITLE="[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback">whatwg at therealcha0s.net
       </A><BR>
    <I>Wed Jul 17 17:59:10 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082404.html">[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
</A></li>
        <LI>Next message: <A HREF="082408.html">[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82407">[ date ]</a>
              <a href="thread.html#82407">[ thread ]</a>
              <a href="subject.html#82407">[ subject ]</a>
              <a href="author.html#82407">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On 07/17/2013 07:51 PM, Tab Atkins Jr. wrote:
&gt;<i> On Jul 17, 2013 8:40 PM, &quot;Ruben Rodriguez II&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at therealcha0s.net</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;&gt;<i> This is exactly what I was thinking when I was reading this. I have been
</I>&gt;<i> building a game engine with async JS and I have run into situations where
</I>&gt;<i> promises were absolutely sapping performance.
</I>&gt;&gt;<i> I would encourage people to look over even the faster promise libraries
</I>&gt;<i> and understand just how much complexity they introduce, and how many 'next
</I>&gt;<i> tick'-type operations that a cascading promise chain can stimulate.
</I>&gt;&gt;<i> It's wonderful because of how entirely promises cover your execution
</I>&gt;<i> path, making control flow silky smooth and safe. However it does come at a
</I>&gt;<i> price, and any API at a 'system' level should strive to implement features
</I>&gt;<i> in the most performant way by default: a callback. It'll take 1 day to wrap
</I>&gt;<i> your API with a promise-based API for people who would make that tradeoff.
</I>&gt;<i> If you sacrifice speed first, there's no way to go back the other way.
</I>&gt;<i>
</I>&gt;<i> Forcing people to wrap with their own code is just a way of saying &quot;lol,
</I>&gt;<i> we're not actually doing that&quot;.
</I>There's Q's deferred.makeNodeResolver()...
&gt;<i> Callbacks are no faster than promises,
</I>This isn't starting well...
&gt;<i> because to maintain consistent
</I>&gt;<i> semantics, they have to delay across ticks anyway.
</I>It's not about 'delaying across ticks', it's about how many extra tick 
delays resolving a composed promise chain is causing. Every time you do 
promise.then(resolver), you're (invisibly) creating yet another promise, 
in yet another tick. These things add up, again I would encourage you to 
study some promise libraries. We can't credibly ascribe a zero cost to 
promises.
&gt;<i> Homebrew callback
</I>&gt;<i> systems can ignore that, but only because they're not as worried about
</I>&gt;<i> overall API correctness, and are okay with making their users deal with
</I>&gt;<i> sometimes-synchronous code.
</I>&gt;<i>
</I>&gt;<i> ~TJ
</I>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082404.html">[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
</A></li>
	<LI>Next message: <A HREF="082408.html">[whatwg] Proposal: createImageBitmap should return a &quot;Promise&quot; instead of using a callback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82407">[ date ]</a>
              <a href="thread.html#82407">[ thread ]</a>
              <a href="subject.html#82407">[ subject ]</a>
              <a href="author.html#82407">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
