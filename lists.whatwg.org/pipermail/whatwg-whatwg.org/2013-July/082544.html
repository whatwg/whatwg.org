<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20Adding%20methods%20like%20getElementById%20and%0A%20getElementsByTagName%20to%20DocumentFragments&In-Reply-To=%3CCANMdWTso_VBP9ZWc2EVYPY7PSqMszwZoWWbtGaGiNS2F1Eq3LA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082543.html">
   <LINK REL="Next"  HREF="082545.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments</H1>
<!--htdig_noindex-->
    <B>Ojan Vafai</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20Adding%20methods%20like%20getElementById%20and%0A%20getElementsByTagName%20to%20DocumentFragments&In-Reply-To=%3CCANMdWTso_VBP9ZWc2EVYPY7PSqMszwZoWWbtGaGiNS2F1Eq3LA%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments">ojan at chromium.org
       </A><BR>
    <I>Sun Jul 28 13:59:28 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082543.html">[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
</A></li>
        <LI>Next message: <A HREF="082545.html">[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82544">[ date ]</a>
              <a href="thread.html#82544">[ thread ]</a>
              <a href="subject.html#82544">[ subject ]</a>
              <a href="author.html#82544">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, Jul 28, 2013 at 11:10 AM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:

&gt;<i> On 7/27/13 10:58 AM, Ojan Vafai wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> var iterator = document.querySelectorAll('**div').iterator(); &lt;--- does
</I>&gt;&gt;<i> some magic to not precompute the whole list
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Well, so... not precompute but make it some sort of live, or not
</I>&gt;<i> precompute but represent a frozen set of nodes?
</I>&gt;<i>
</I>&gt;<i> What should happen with this situation:
</I>&gt;<i>
</I>&gt;<i>   var list = document.querySelectorAll('**div');
</I>&gt;<i>   var iterator = list.iterator();
</I>&gt;<i>
</I>&gt;<i> Should the list of nodes be precomputed in this case?
</I>&gt;<i>
</I>&gt;<i> Basically, the magic sounds like it's ... very magical.  Magical enough
</I>&gt;<i> that authors would have a tough time with this setup, even ignoring
</I>&gt;<i> implementation concerns.
</I>

I was just picturing lazy computing the list. You don't need to compute the
list until you query the length or index into the NodeList, at which point,
if it's a static NodeList, you compute the whole thing in one go. If all
you ever do is grab the iterator, then no need to compute the list. So, the
example you give above would not precompute.

Now that I put it in writing, the obvious problem with this is that it's a
change in semantics. If you querySelectorAll and then modify the DOM before
reading the length or an index, then you get a different list. :(

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082543.html">[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
</A></li>
	<LI>Next message: <A HREF="082545.html">[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82544">[ date ]</a>
              <a href="thread.html#82544">[ thread ]</a>
              <a href="subject.html#82544">[ subject ]</a>
              <a href="author.html#82544">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
