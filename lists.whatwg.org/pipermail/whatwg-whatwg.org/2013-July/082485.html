<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Blurry lines in 2D Canvas (and SVG)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Blurry%20lines%20in%202D%20Canvas%20%28and%20SVG%29&In-Reply-To=%3Cop.w0pewgeite2ec8%40aimac%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082481.html">
   <LINK REL="Next"  HREF="082486.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Blurry lines in 2D Canvas (and SVG)</H1>
<!--htdig_noindex-->
    <B>Kornel Lesi&#324;ski</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Blurry%20lines%20in%202D%20Canvas%20%28and%20SVG%29&In-Reply-To=%3Cop.w0pewgeite2ec8%40aimac%3E"
       TITLE="[whatwg] Blurry lines in 2D Canvas (and SVG)">kornel at geekhood.net
       </A><BR>
    <I>Tue Jul 23 19:08:30 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082481.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
        <LI>Next message: <A HREF="082486.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82485">[ date ]</a>
              <a href="thread.html#82485">[ thread ]</a>
              <a href="subject.html#82485">[ subject ]</a>
              <a href="author.html#82485">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 24 Jul 2013 02:13:19 +0100, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt;  
wrote:

&gt;&gt;<i> It's not intuitive. It's a pretty common pitfall, but it's logical.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For 1-pixel lines it could be fixed by allowing authors to specify that
</I>&gt;&gt;<i> path should be stroked with lines aligned to inside/outside of the path
</I>&gt;&gt;<i> (which is a useful feature on its own).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sure, but how can we fix this?
</I>&gt;<i> It's not very intuitive that I have to keep track of the devicePixelRatio
</I>&gt;<i> (and the current CTM?) to get crisp lines.
</I>
To what extent does it need to be &quot;fixed&quot;?

&quot;Manually&quot; snapping lines to canvas pixels isn't too hard, e.g.  
subtracting 0.5 from x/y and adding 1 to width/height to get pixel-aligned  
rectangle outside the box. It does get trickier with transforms indeed :(


Is it enough to snap to canvas pixels? (future of &quot;HD&quot; canvas is  
uncertain, so authors may need to resize canvas to match devicePixelRatio  
anyway).

Is it enough if there was strokeOutside()/strokeInside() that makes  
untransformed lines pixel-aligned? Or is it necessary to have snapping for  
odd-width lines that are stroked centered on a path?

Do authors expect lines in canvas with non-integer transforms to be crisp?

Should arc() and bezier curves also be snapped? What if you want a line  
that touches the curve?


&gt;<i> What we need is that artwork 'snaps' to the native pixels while still  
</I>&gt;<i> being antialiased.
</I>
How should snapping be done?

If fill() of a 2x2 rect draws:

  XX
  XX

how would stroke() look like?

....
.XX.
.XX.
....

or

  ..
  ..

or

  ...
  .X.
  ...


If you have path that is 2.5 device pixels wide, is it going to be snapped  
to different width depending whether you draw it at (0, 0) or (0.1, 0)?  
Would that also make circles ellipses?


Snapping makes animated slow movement choppy, so authors may also want  
ability to disable it for selected paths/drawing operations or even for  
each axis separately (e.g. to smoothly animate horizontal movement while  
object is snapped to pixels vertically, etc.)

-- 
regards, Kornel

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082481.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
	<LI>Next message: <A HREF="082486.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82485">[ date ]</a>
              <a href="thread.html#82485">[ thread ]</a>
              <a href="subject.html#82485">[ subject ]</a>
              <a href="author.html#82485">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
