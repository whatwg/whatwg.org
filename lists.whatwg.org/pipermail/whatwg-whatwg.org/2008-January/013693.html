<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] MessageEvent.domain, document.domain on a page whose URI has no domain (e.g. data:text/html, ...)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20MessageEvent.domain%2C%0A%20document.domain%20on%20a%20page%20whose%20URI%20has%20no%20domain%20%28e.g.%0A%20data%3Atext/html%2C%20...%29&In-Reply-To=%3C4797DAEF.6080104%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013692.html">
   <LINK REL="Next"  HREF="013703.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] MessageEvent.domain, document.domain on a page whose URI has no domain (e.g. data:text/html, ...)</H1>
<!--htdig_noindex-->
    <B>Jeff Walden</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20MessageEvent.domain%2C%0A%20document.domain%20on%20a%20page%20whose%20URI%20has%20no%20domain%20%28e.g.%0A%20data%3Atext/html%2C%20...%29&In-Reply-To=%3C4797DAEF.6080104%40mit.edu%3E"
       TITLE="[whatwg] MessageEvent.domain, document.domain on a page whose URI has no domain (e.g. data:text/html, ...)">jwalden+whatwg at MIT.EDU
       </A><BR>
    <I>Wed Jan 23 16:25:19 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="013692.html">[whatwg] Calling HTMLDocument.open() should change the origin of the document to the caller's origin
</A></li>
        <LI>Next message: <A HREF="013703.html">[whatwg] MessageEvent.domain,	document.domain on a page whose URI has no domain (e.g.	data:text/html, ...)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13693">[ date ]</a>
              <a href="thread.html#13693">[ thread ]</a>
              <a href="subject.html#13693">[ subject ]</a>
              <a href="author.html#13693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>The spec as currently written says that document.domain in a document located at a URI with no domain is null:

data:text/html,&lt;script&gt;alert(document.domain);&lt;/script&gt;

Safari and Opera both alert the empty string for this; Firefox alerts null.

There's also a domain property on MessageEvent, used with the cross-document postMessage API.  The exact value of this property isn't quite clear in the current spec (which says the document has no domain but doesn't say what that translates into on the MessageEvent interface), but Opera and Safari both agree that the domain property should be the empty string when the page that calls postMessage is a data: URL.

It seems that, for consistency, document.domain and MessageEvent.domain should both be the empty string in this case, for greatest cross-browser compatibility with the least change to the status quo, with the only change needing to happen in Firefox.

Jeff

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013692.html">[whatwg] Calling HTMLDocument.open() should change the origin of the document to the caller's origin
</A></li>
	<LI>Next message: <A HREF="013703.html">[whatwg] MessageEvent.domain,	document.domain on a page whose URI has no domain (e.g.	data:text/html, ...)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13693">[ date ]</a>
              <a href="thread.html#13693">[ thread ]</a>
              <a href="subject.html#13693">[ subject ]</a>
              <a href="author.html#13693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
