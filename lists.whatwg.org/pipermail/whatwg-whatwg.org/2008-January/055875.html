<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Minor addition/rewording for canvas section
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Minor%20addition/rewording%20for%20canvas%20section&In-Reply-To=%3Cop.t4xakbyr64w2qv%40annevk-t60.oslo.opera.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="055873.html">
   <LINK REL="Next"  HREF="055894.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Minor addition/rewording for canvas section</H1>
<!--htdig_noindex-->
    <B>Anne van Kesteren</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Minor%20addition/rewording%20for%20canvas%20section&In-Reply-To=%3Cop.t4xakbyr64w2qv%40annevk-t60.oslo.opera.com%3E"
       TITLE="[whatwg] Minor addition/rewording for canvas section">annevk at opera.com
       </A><BR>
    <I>Mon Jan 14 06:01:13 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="055873.html">[whatwg] Minor addition/rewording for canvas section
</A></li>
        <LI>Next message: <A HREF="055894.html">[whatwg] Minor addition/rewording for canvas section
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55875">[ date ]</a>
              <a href="thread.html#55875">[ thread ]</a>
              <a href="subject.html#55875">[ subject ]</a>
              <a href="author.html#55875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 13 Jan 2008 14:13:52 +0100, Oliver Hunt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">oliver at apple.com</A>&gt; wrote:
&gt;<i> I did wonder about why other origins could read anything myself, so  
</I>&gt;<i> you're not alone -- it just seemed especially odd to allow images to be  
</I>&gt;<i> written safely but not ImageData.
</I>
ImageData is always safe as you create it yourself.

The specification should also mention that drawing &lt;img  
src=data:image/png,...&gt;  on the &lt;canvas&gt; is safe so that you can actually  
roundtrip data through the server. The SVG case here is slightly more  
complex so maybe it's better to have a definition of a &quot;safe  
HTMLImageElement&quot;.


&gt;<i> I'm as yet unsure whether a separate origin should be able to write -- i  
</I>&gt;<i> have nothing to back this up with but it seems that you could  
</I>&gt;<i> potentially right to a canvas from a separate domain to make the canvas  
</I>&gt;<i> look like something it wasn't -- but i'm not familiar enough with the  
</I>&gt;<i> other origin related policies in html5 to be able to say anything  
</I>&gt;<i> meaningful.
</I>
Cross-document messaging only allows passing through strings.


&gt;<i> I only noticed this as i was looking at the ImageData portion of the  
</I>&gt;<i> spec just now :D
</I>
Would be nice if you guys implemented it :-)


&gt;<i> I assume there was a reason that reading from the canvas from another  
</I>&gt;<i> origin is ever allowed, but I can't think of what it might be -- any  
</I>&gt;<i> thoughts/recollections from others would be well received :D
</I>
I don't think this is possible. The security model is pretty simple.  
HTMLImageElement is either safe or unsafe. HTMLCanvasElement is also  
either safe (default) or unsafe. CanvasPattern is, again, either safe or  
unsafe. Once you draw an unsafe HTMLImageElement, HTMLCanvasElement, or  
CanvasPattern on an HTMLCanvasElement you mark the HTMLCanvasElement as  
unsafe. The toDataURL() and getImageData() functions throw for an unsafe  
HTMLCanvasElement.


-- 
Anne van Kesteren
&lt;<A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>&gt;
&lt;<A HREF="http://www.opera.com/">http://www.opera.com/</A>&gt;

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="055873.html">[whatwg] Minor addition/rewording for canvas section
</A></li>
	<LI>Next message: <A HREF="055894.html">[whatwg] Minor addition/rewording for canvas section
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55875">[ date ]</a>
              <a href="thread.html#55875">[ thread ]</a>
              <a href="subject.html#55875">[ subject ]</a>
              <a href="author.html#55875">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
