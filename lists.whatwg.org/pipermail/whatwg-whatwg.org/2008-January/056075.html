<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] A potential slight security enhancement to postMessage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20A%20potential%20slight%20security%20enhancement%20to%20postMessage&In-Reply-To=%3C47A12BA7.1030107%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056068.html">
   <LINK REL="Next"  HREF="056078.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] A potential slight security enhancement to postMessage</H1>
<!--htdig_noindex-->
    <B>Jeff Walden</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20A%20potential%20slight%20security%20enhancement%20to%20postMessage&In-Reply-To=%3C47A12BA7.1030107%40mit.edu%3E"
       TITLE="[whatwg] A potential slight security enhancement to postMessage">jwalden+whatwg at MIT.EDU
       </A><BR>
    <I>Wed Jan 30 18:00:07 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056068.html">[whatwg] postMessage support now in Firefox trunk, implementation issues, feedback, tests
</A></li>
        <LI>Next message: <A HREF="056078.html">[whatwg] A potential slight security enhancement to postMessage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56075">[ date ]</a>
              <a href="thread.html#56075">[ thread ]</a>
              <a href="subject.html#56075">[ subject ]</a>
              <a href="author.html#56075">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I briefly wrote up some documentation on postMessage for the Mozilla Developer Center:

<A HREF="http://developer.mozilla.org/en/docs/DOM:window.postMessage">http://developer.mozilla.org/en/docs/DOM:window.postMessage</A>

If you pull it up, you'll note two places where I include big, huge, overbearing, somewhat-exaggerating injunctions about first checking the domain/uri/source properties of the received message before trusting the sent data.

Writing those got me thinking: what if we could &quot;enforce&quot; not touching the data before verifying the sender's identity?  Specifically, what if we required that either .domain or .uri be read prior to allowing .data to be successfully accessed, say, without throwing a security error?  (No reason comes to mind for .source to participate in this scheme, either to throw or to allow access to .data, but I haven't given it serious thought.)  This would prevent unknowing misuse of this functionality, and safe uses wouldn't be affected.  I think this would only apply to the event dispatched by postMessage, not to MessageEvent, as the latter is same-origin and there's no harm to a same-origin MessageEvent.

Thoughts?  A no-harm slight increase of the ability to prevent incorrect use of postMessage, or excessive nannying?

Jeff

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056068.html">[whatwg] postMessage support now in Firefox trunk, implementation issues, feedback, tests
</A></li>
	<LI>Next message: <A HREF="056078.html">[whatwg] A potential slight security enhancement to postMessage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56075">[ date ]</a>
              <a href="thread.html#56075">[ thread ]</a>
              <a href="subject.html#56075">[ subject ]</a>
              <a href="author.html#56075">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
