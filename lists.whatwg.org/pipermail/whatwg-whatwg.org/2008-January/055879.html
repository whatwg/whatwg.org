<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas methods and exceptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20methods%20and%20exceptions&In-Reply-To=%3C1E857AED-4069-40BD-8FEE-CBF7843BE65C%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="055878.html">
   <LINK REL="Next"  HREF="013607.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas methods and exceptions</H1>
<!--htdig_noindex-->
    <B>Oliver Hunt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20methods%20and%20exceptions&In-Reply-To=%3C1E857AED-4069-40BD-8FEE-CBF7843BE65C%40apple.com%3E"
       TITLE="[whatwg] Canvas methods and exceptions">oliver at apple.com
       </A><BR>
    <I>Mon Jan 14 18:26:16 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="055878.html">[whatwg] Some media element details
</A></li>
        <LI>Next message: <A HREF="013607.html">[whatwg] Scaling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55879">[ date ]</a>
              <a href="thread.html#55879">[ thread ]</a>
              <a href="subject.html#55879">[ subject ]</a>
              <a href="author.html#55879">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi all,

In a recent foray into the world of canvas compatibility I've noticed  
that a number of canvas methods are defined as throwing exceptions on  
&quot;invalid&quot; input which aren't really insane, for example
  * clear/fill/drawRect with negative width/height
  * drawImage with negative sx/sw
  * putImageData with pixel data outside of the 0-255 range

There may be other similar examples that i missed.

Anyway, there are many cases in which people people compute value for  
these (and similar) api's in which their are edge cases which can  
result in values that would be required to trigger an exception  
according this specification.  This type of all or nothing approach  
leads to the potential for otherwise working code to just fail  
mysteriously in some cases.

Following the idea of doing the least surprising action, i think we  
should go through the Canvas spec and remove &quot;surprising&quot;  
exceptions.  For instance a negative width for a rectangle should not  
terminate execution (although whether it should fail silently, or  
just draw the rect as though it
were positioned differently is a question that would need to be  
answered), ditto for the other cases that i mentioned.

I would argue that in these (and maybe other) cases failing silently  
is less harmful than throwing an exception, and from my testing this  
is the behaviour firefox already follows, and i know from experience  
that throwing an exception in these cases breaks sites.

Do other people have thoughts on this matter?

--Oliver



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="055878.html">[whatwg] Some media element details
</A></li>
	<LI>Next message: <A HREF="013607.html">[whatwg] Scaling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55879">[ date ]</a>
              <a href="thread.html#55879">[ thread ]</a>
              <a href="subject.html#55879">[ subject ]</a>
              <a href="author.html#55879">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
