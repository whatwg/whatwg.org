<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] More random comments on the putImageData definition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20random%20comments%20on%20the%20putImageData%20definition&In-Reply-To=%3C700B9DA3-5A3B-41B4-8034-92F74B356FE0%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013646.html">
   <LINK REL="Next"  HREF="013722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] More random comments on the putImageData definition</H1>
<!--htdig_noindex-->
    <B>Oliver Hunt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20random%20comments%20on%20the%20putImageData%20definition&In-Reply-To=%3C700B9DA3-5A3B-41B4-8034-92F74B356FE0%40apple.com%3E"
       TITLE="[whatwg] More random comments on the putImageData definition">oliver at apple.com
       </A><BR>
    <I>Wed Jan 23 11:28:46 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="013646.html">[whatwg] More random comments on the putImageData definition
</A></li>
        <LI>Next message: <A HREF="013722.html">[whatwg] More random comments on the putImageData definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13680">[ date ]</a>
              <a href="thread.html#13680">[ thread ]</a>
              <a href="subject.html#13680">[ subject ]</a>
              <a href="author.html#13680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On 23/01/2008, at 5:44 AM, Philip Taylor wrote:

&gt;<i> On 23/01/2008, Oliver Hunt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">oliver at apple.com</A>&gt; wrote:
</I>&gt;&gt;<i> It would be great if putImageData
</I>&gt;&gt;<i> could take a source region, in addition to the destination.  One of
</I>&gt;&gt;<i> the primary reasons for using get/putImageData is to allow JS to
</I>&gt;&gt;<i> rapidly blit data to the screen, however without an ability to blit
</I>&gt;&gt;<i> only a subregion of the image data the only available options are to
</I>&gt;&gt;<i> either re-blit the entire imagedata region (which can be expensive  
</I>&gt;&gt;<i> due
</I>&gt;&gt;<i> to the need for [un]premultiplying in some (all?) implementations),
</I>&gt;<i>
</I>&gt;<i> ((Opera does non-premultiplied colour internally.))
</I>Righto.  There's still the necessary type/range checking involved at  
some point.

&gt;<i>
</I>&gt;&gt;<i> or create and populate a new ImageData object which still requires  
</I>&gt;&gt;<i> more
</I>&gt;&gt;<i> work than would ideally be necessary.
</I>&gt;<i>
</I>&gt;<i> You can also create a temporary canvas and putImageData once onto
</I>&gt;<i> that, and then drawImage sections onto the screen as they are needed.
</I>&gt;<i> That lets you draw lots of sections lots of times quickly (since
</I>&gt;<i> you're mostly drawing from the optimised canvas surface format, not
</I>&gt;<i> from a JS array), which perhaps helps in some (most?) of the cases.
</I>&gt;<i> (You still have to do a single putImageData of the whole data to get
</I>&gt;<i> it onto the temporary canvas, but if there are parts of the data you
</I>&gt;<i> aren't ever using then you just should make the ImageData smaller and
</I>&gt;<i> cut out the unused bits.)
</I>
Yes, there are many ways you can resolve this if you're willing to  
copy data
around in JS, which is far less efficient than letting you use your  
single backing
buffer, but only (effectively) repainting part of it.

Using a separate canvas also works, but still requires additional  
copying, much more memory, and the use of drawImage which doesn't  
have the same semantics as putImageData.

--Oliver

&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Philip Taylor
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">excors at gmail.com</A>
</I>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013646.html">[whatwg] More random comments on the putImageData definition
</A></li>
	<LI>Next message: <A HREF="013722.html">[whatwg] More random comments on the putImageData definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13680">[ date ]</a>
              <a href="thread.html#13680">[ thread ]</a>
              <a href="subject.html#13680">[ subject ]</a>
              <a href="author.html#13680">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
