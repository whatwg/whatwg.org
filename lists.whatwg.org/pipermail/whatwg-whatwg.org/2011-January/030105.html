<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] structured clone algorithm should be defined for primitive	values
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20structured%20clone%20algorithm%20should%20be%20defined%20for%20primitive%0A%09values&In-Reply-To=%3C4D4314ED.8040605%40davidflanagan.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072381.html">
   <LINK REL="Next"  HREF="072408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] structured clone algorithm should be defined for primitive	values</H1>
<!--htdig_noindex-->
    <B>David Flanagan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20structured%20clone%20algorithm%20should%20be%20defined%20for%20primitive%0A%09values&In-Reply-To=%3C4D4314ED.8040605%40davidflanagan.com%3E"
       TITLE="[whatwg] structured clone algorithm should be defined for primitive	values">david at davidflanagan.com
       </A><BR>
    <I>Fri Jan 28 11:11:41 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="072381.html">[whatwg] Request for implementer feedback: multiple Ranges per	Selection
</A></li>
        <LI>Next message: <A HREF="072408.html">[whatwg] structured clone algorithm should be defined for primitive values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30105">[ date ]</a>
              <a href="thread.html#30105">[ thread ]</a>
              <a href="subject.html#30105">[ subject ]</a>
              <a href="author.html#30105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Ian,

The structured clone algorithm is currently defined only for object 
inputs and doesn't say what should happen when a primitive value is 
passed to it.  (The internal structured cloning algorithm handles 
primitives, but the outer level one does not.)

Browser implementations allow primitives such as strings to be passed to 
History.pushState(), window.postMessage() and other methods that 
reference the structured clone algorithm.

I think you can fix this by changing &quot;object&quot; to &quot;value&quot; in four places:

&gt;<i> When a user agent is required to obtain a structured clone of an object [change this to value],
</I>it must run the following algorithm, which either returns a separate 
object [value],
or throws an exception.
&gt;<i>
</I>&gt;<i> Let input be the object [value] being cloned.
</I>&gt;<i>
</I>&gt;<i> Let memory be an association list of pairs of objects, initially empty. This is used to handle duplicate references. In each pair of objects, one is called the source object and the other the destination object.
</I>&gt;<i>
</I>&gt;<i> Let output be the object [value] resulting from calling the internal structured cloning algorithm with input and memory.
</I>&gt;<i>
</I>
	David

	David
</PRE>



















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072381.html">[whatwg] Request for implementer feedback: multiple Ranges per	Selection
</A></li>
	<LI>Next message: <A HREF="072408.html">[whatwg] structured clone algorithm should be defined for primitive values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30105">[ date ]</a>
              <a href="thread.html#30105">[ thread ]</a>
              <a href="subject.html#30105">[ subject ]</a>
              <a href="author.html#30105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
