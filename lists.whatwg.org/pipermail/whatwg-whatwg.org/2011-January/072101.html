<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebWorkers and images
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebWorkers%20and%20images&In-Reply-To=%3CAANLkTim8Gat-rxnFaDRKi9fw8z-t-tQLrYQdgP5AEVOt%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072100.html">
   <LINK REL="Next"  HREF="072103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebWorkers and images</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebWorkers%20and%20images&In-Reply-To=%3CAANLkTim8Gat-rxnFaDRKi9fw8z-t-tQLrYQdgP5AEVOt%40mail.gmail.com%3E"
       TITLE="[whatwg] WebWorkers and images">glenn at zewt.org
       </A><BR>
    <I>Thu Jan 13 02:35:38 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="072100.html">[whatwg] WebWorkers and images
</A></li>
        <LI>Next message: <A HREF="072103.html">[whatwg] WebWorkers and images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72101">[ date ]</a>
              <a href="thread.html#72101">[ thread ]</a>
              <a href="subject.html#72101">[ subject ]</a>
              <a href="author.html#72101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Jan 13, 2011 at 5:08 AM, Berend-Jan Wever &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">skylined at chromium.org</A>&gt; wrote:
&gt;<i> I ended up creating a PageWorker object, which is constructed in the page
</I>&gt;<i> rather then in a WebWorker. It uses setInterval to repeatedly run a function
</I>&gt;<i> in the background to do the image processing directly on the canvas imageD
</I>&gt;<i> data. To reduce overhead, each interval runs the function in a small loop
</I>&gt;<i> for a certain number of ms. After each interval, the browser gets some time
</I>&gt;<i> to do UI updating. This seems to work well in my Mandelbrot fractal
</I>&gt;<i> renderer; the browser remains responsive:
</I>&gt;<i> <A HREF="http://skypher.com/SkyLined/demo/FractalZoomer/Mandel.html">http://skypher.com/SkyLined/demo/FractalZoomer/Mandel.html</A>
</I>
That's exactly the cumbersome, problematic programming model that web
workers specifically seek to eliminate.

(I loaded that, and the browser became painfully unresponsive in FF
3.6; opening a menu took about a quarter second.  In order to keep the
browser properly responsive, you'd need to return so often that the
10ms minimum timer duration in most browsers will cause the algorithm
to take notably longer.)

Note that if your computational work is entirely working with
ImageData, you can send the ImageData to a thread.  It's limiting (you
can't blit images to the canvas that way, since you don't have the
Canvas interface), but it may be enough for your case.

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072100.html">[whatwg] WebWorkers and images
</A></li>
	<LI>Next message: <A HREF="072103.html">[whatwg] WebWorkers and images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72101">[ date ]</a>
              <a href="thread.html#72101">[ thread ]</a>
              <a href="subject.html#72101">[ subject ]</a>
              <a href="author.html#72101">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
