<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;base&gt; elements, again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cbase%3E%20elements%2C%20again&In-Reply-To=%3C4D3D875E.3070400%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072314.html">
   <LINK REL="Next"  HREF="072316.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;base&gt; elements, again</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cbase%3E%20elements%2C%20again&In-Reply-To=%3C4D3D875E.3070400%40mit.edu%3E"
       TITLE="[whatwg] &lt;base&gt; elements, again">bzbarsky at MIT.EDU
       </A><BR>
    <I>Mon Jan 24 06:06:22 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="072314.html">[whatwg] Adding descent to TextMetrics
</A></li>
        <LI>Next message: <A HREF="072316.html">[whatwg] &lt;base&gt; elements, again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30040">[ date ]</a>
              <a href="thread.html#30040">[ thread ]</a>
              <a href="subject.html#30040">[ subject ]</a>
              <a href="author.html#30040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>In <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=627361">https://bugzilla.mozilla.org/show_bug.cgi?id=627361</A> we have a page 
which has a subframe.  The subframe has this HTML:

   &lt;a href=&quot;javascript:do_default(0)&quot;&gt;1261192&lt;/a&gt;

and near the end of the page has a &lt;base target=&quot;_top&quot;&gt;.

In current Gecko builds, this fails, because we now allow &lt;base&gt; 
anywhere in the document per 
<A HREF="http://html5.org/tools/web-apps-tracker?from=5710&amp;to=5711">http://html5.org/tools/web-apps-tracker?from=5710&amp;to=5711</A> and hence the 
javascript: URI is run against the toplevel window, not the subframe's 
window, and there is no do_default function defined in the toplevel window.

This presumably used to work in Gecko before we started trying to 
implement HTML5 &lt;base&gt; stuff because for &lt;base&gt; outside &lt;head&gt; we only 
applied it to &lt;a&gt; elements that came after the &lt;base&gt; when parsing.

Why did/does this markup work in other UAs?  Or does it not?  Does the 
spec need changes here?  As it stands, it's breaking existing markup.

Note that we made the change to allow &lt;base&gt; anywhere about 10 days ago, 
and got this bug report within 6 days of making this change.  So I have 
to assume that this is not an isolated incident, and that there are 
other pages like this out there.  Especially because the broken page in 
this case is some sort of enterprise web app thing (Unicenter) which I 
assume is installed in more than one place.

-Boris
</PRE>



































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072314.html">[whatwg] Adding descent to TextMetrics
</A></li>
	<LI>Next message: <A HREF="072316.html">[whatwg] &lt;base&gt; elements, again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30040">[ date ]</a>
              <a href="thread.html#30040">[ thread ]</a>
              <a href="subject.html#30040">[ subject ]</a>
              <a href="author.html#30040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
