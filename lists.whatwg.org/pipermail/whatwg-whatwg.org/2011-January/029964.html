<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Value of media.currentTime immediately after setting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Value%20of%20media.currentTime%20immediately%20after%20setting&In-Reply-To=%3Cop.vplmofkxsr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029961.html">
   <LINK REL="Next"  HREF="029966.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Value of media.currentTime immediately after setting</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Value%20of%20media.currentTime%20immediately%20after%20setting&In-Reply-To=%3Cop.vplmofkxsr6mfa%40kirk%3E"
       TITLE="[whatwg] Value of media.currentTime immediately after setting">philipj at opera.com
       </A><BR>
    <I>Thu Jan 20 00:46:53 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="029961.html">[whatwg] Value of media.currentTime immediately after setting
</A></li>
        <LI>Next message: <A HREF="029966.html">[whatwg] Value of media.currentTime immediately after setting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29964">[ date ]</a>
              <a href="thread.html#29964">[ thread ]</a>
              <a href="subject.html#29964">[ subject ]</a>
              <a href="author.html#29964">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 20 Jan 2011 04:20:09 +0100, Matthew Gregan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">kinetik at flim.org</A>&gt;  
wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> The media seek algorithm (4.8.10.9) states that the current playback
</I>&gt;<i> position should be set to the new playback position during the  
</I>&gt;<i> asynchronous
</I>&gt;<i> part of the algorithm, just before the seeking event is fired.  This  
</I>&gt;<i> implies
</I>&gt;<i> the following behaviour:
</I>&gt;<i>
</I>&gt;<i> 0. Initial load state (currentTime reports 0)
</I>&gt;<i> 1. currentTime set to 20 by script
</I>&gt;<i> 2. currentTime continues to report 0
</I>&gt;<i> 3. Script returns to main loop
</I>&gt;<i> 4. &quot;seeking&quot; event raised
</I>&gt;<i> 5. currentTime reports 20 in &quot;seeking&quot; event handler
</I>&gt;<i>
</I>&gt;<i> This is the behaviour in Firefox 4.  In every other browser I tested  
</I>&gt;<i> (Chrome
</I>&gt;<i> 10, Opera 11, Safari 5, and Internet Explorer 9), the following  
</I>&gt;<i> behaviour is
</I>&gt;<i> observed:
</I>&gt;<i>
</I>&gt;<i> 2. currentTime immediately reports 20
</I>&gt;<i>
</I>&gt;<i> This doesn't seem to be required by the current wording of the spec (in
</I>&gt;<i> fact, it seems to be incorrect behaviour), but I think this behaviour is
</I>&gt;<i> more intuitive, as it seems unusual that currentTime returns to the old
</I>&gt;<i> value immediately after being set and remains that way until the  
</I>&gt;<i> &quot;seeking&quot;
</I>&gt;<i> event fires.
</I>&gt;<i>
</I>&gt;<i> Does it make sense to update the seeking algorithm to reflect how
</I>&gt;<i> non-Firefox browsers are implementing this?  My proposal is,  
</I>&gt;<i> effectively, to
</I>&gt;<i> take steps 5 through 8 and insert them before step 4.
</I>&gt;<i>
</I>&gt;<i> I've uploaded a testcase to <A HREF="http://flim.org/~kinetik/seek-627139.html">http://flim.org/~kinetik/seek-627139.html</A> if
</I>&gt;<i> anyone's curious.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> -mjg
</I>
There have been two non-trivial changes to the seeking algorithm in the  
last year:

Discussed at  
<A HREF="http://lists.w3.org/Archives/Public/public-html/2010Feb/0003.html">http://lists.w3.org/Archives/Public/public-html/2010Feb/0003.html</A> lead to  
<A HREF="http://html5.org/r/4868">http://html5.org/r/4868</A>

Discussed at  
<A HREF="http://lists.w3.org/Archives/Public/public-html/2010Jul/0217.html">http://lists.w3.org/Archives/Public/public-html/2010Jul/0217.html</A> lead to  
<A HREF="http://html5.org/r/5219">http://html5.org/r/5219</A>

At least we (Opera) just haven't gotten around to updating our  
implementation yet.

With that said, it seems like there's nothing that guarantees that the  
asynchronous section doesn't start running while the script is still  
running. It's also odd that currentTime is updated before the seek has  
actually been completed, but the reason for this is that the UI should  
show the new position.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software
</PRE>




























































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029961.html">[whatwg] Value of media.currentTime immediately after setting
</A></li>
	<LI>Next message: <A HREF="029966.html">[whatwg] Value of media.currentTime immediately after setting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29964">[ date ]</a>
              <a href="thread.html#29964">[ thread ]</a>
              <a href="subject.html#29964">[ subject ]</a>
              <a href="author.html#29964">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
