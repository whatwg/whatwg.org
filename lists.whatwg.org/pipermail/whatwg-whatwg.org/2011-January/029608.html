<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Low Memory Event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Low%20Memory%20Event&In-Reply-To=%3CAANLkTikJDNFXTDpREsCxFjhGT8P30W3MU17wDqwW0Gmx%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029640.html">
   <LINK REL="Next"  HREF="029609.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Low Memory Event</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Low%20Memory%20Event&In-Reply-To=%3CAANLkTikJDNFXTDpREsCxFjhGT8P30W3MU17wDqwW0Gmx%40mail.gmail.com%3E"
       TITLE="[whatwg] Low Memory Event">glenn at zewt.org
       </A><BR>
    <I>Sat Jan  1 13:43:38 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="029640.html">[whatwg] Low Memory Event
</A></li>
        <LI>Next message: <A HREF="029609.html">[whatwg] Low Memory Event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29608">[ date ]</a>
              <a href="thread.html#29608">[ thread ]</a>
              <a href="subject.html#29608">[ subject ]</a>
              <a href="author.html#29608">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> I'd like to be able to listen for them on the desktop as well.
</I>
You need to know a lot about the host system to know what &quot;low memory&quot;
even means.  Does it mean allocations may start failing soon?  Does it
mean we're deep into swap, causing serious performance issues but not
failed allocations?  Even that's hard to define; you can be using a
lot of swap, but it may be for entirely unused, idle background
applications and not indicate memory pressure at all.

This definitely seems useful on mobile platforms, where memory is much
more limited, memory management is much less complex, and being able
to deal reliably with memory limitations is a much more pressing
issue.  But on desktop platforms, even native applications written for
a specific platform run into trouble when they try to respond
&quot;intelligently&quot; to memory pressure, and the vast majority don't try.

On Sat, Jan 1, 2011 at 3:39 PM, Charles Pritchard &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chuck at jumis.com</A>&gt; wrote:
&gt;<i> Here are some example implementations; it's up to the vendor, not the spec.
</I>&gt;<i>
</I>&gt;<i> Tabbed browsing implementation:
</I>&gt;<i> Send a lowmemory event to hidden tabs listening (for lowmemory), that have
</I>&gt;<i> not been visible for more than 60 seconds.
</I>&gt;<i> (This is a partial example, as it doesn't detail when the tabs would be
</I>&gt;<i> checked for visibility. )
</I>
An event like this needs to have a consistent meaning to allow
applications to respond meaningfully.  If it has varied meanings--or
if it has attributes to indicate each meaning, but they don't get
implemented in practice, or are too generic and don't accurately
describe the situation on each platform and configuration--then
applications can't respond correctly.

For example, responding to being an idle tab by releasing resources is
the wrong thing to do if there's plenty of memory available.  I have 8
GB of memory and Firefox rarely uses more than 512 MB.  Don't make me
wait for resources to be reloaded (or re-cached, or whatever the
resource is) because they were released &quot;just in case&quot;.  I have lots
of memory precisely because I don't want to wait; I want applications
to cache as much as possible.  (The &quot;tab visibility&quot; proposal seems
more appropriate for this particular example, anyway.)

I'm not saying this is impossible, but memory management is
exceptionally complex, varies wildly across platforms, varies wildly
depending on how much memory and swap a system has, and on the
behavior of other applications on the system.  I'd be concerned about
a generic, loosely-defined &quot;lowmemory&quot; event with entirely unrelated
meanings encouraging developers to respond to it in ways that only
happen to make sense on the platform they're testing on.

-- 
Glenn Maynard
</PRE>







<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029640.html">[whatwg] Low Memory Event
</A></li>
	<LI>Next message: <A HREF="029609.html">[whatwg] Low Memory Event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29608">[ date ]</a>
              <a href="thread.html#29608">[ thread ]</a>
              <a href="subject.html#29608">[ subject ]</a>
              <a href="author.html#29608">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
