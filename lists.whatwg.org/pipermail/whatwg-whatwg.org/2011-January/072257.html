<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] File API Streaming Blobs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20File%20API%20Streaming%20Blobs&In-Reply-To=%3CAANLkTinR%3DxyjGp5NEh%3DLWN04ZT3wJcF6OZD2Phj62%2BBp%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072343.html">
   <LINK REL="Next"  HREF="072265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] File API Streaming Blobs</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20File%20API%20Streaming%20Blobs&In-Reply-To=%3CAANLkTinR%3DxyjGp5NEh%3DLWN04ZT3wJcF6OZD2Phj62%2BBp%40mail.gmail.com%3E"
       TITLE="[whatwg] File API Streaming Blobs">glenn at zewt.org
       </A><BR>
    <I>Fri Jan 21 12:50:34 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="072343.html">[whatwg] File API Streaming Blobs
</A></li>
        <LI>Next message: <A HREF="072265.html">[whatwg] File API Streaming Blobs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72257">[ date ]</a>
              <a href="thread.html#72257">[ thread ]</a>
              <a href="subject.html#72257">[ subject ]</a>
              <a href="author.html#72257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Jan 21, 2011 at 1:55 PM, David Flanagan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">david at davidflanagan.com</A>&gt; wrote:
&gt;<i> Doesn't the current XHR2 spec address this use case?
</I>&gt;<i> Browsers don't seem to implement it yet, but shouldn't something like this
</I>&gt;<i> work for the original poster?
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;x = new XMLHttpRequest()
</I>&gt;<i> &#160; &#160; &#160; &#160;x.open(&quot;GET&quot;, &quot;<A HREF="http://my-media-file">http://my-media-file</A>&quot;);
</I>&gt;<i> &#160; &#160; &#160; &#160;x.responseType = &quot;blob&quot;;
</I>&gt;<i> &#160; &#160; &#160; &#160;x.send();
</I>&gt;<i> &#160; &#160; &#160; &#160;var nbytes = 0;
</I>&gt;<i> &#160; &#160; &#160; &#160;x.onprogress = function(e) {
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; var blob = x.response.slice(nbytes, e.loaded-nbytes);
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; nbytes += blob.size;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; var reader = new FileReader();
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; reader.readAsArrayBuffer(blob, function() {
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; // process blob content here
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;});
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;}
</I>
He wants to be able to stream data out, not just in.

It's tricky in practice, because there's no way for whoever's reading
the stream to block.  For example, if you're reading a 1 GB video on a
phone with 256 MB of memory, it needs to stop buffering when it's out
of memory until some data has been played and thrown away, as it would
when streaming from the network normally.  That requiests an API more
complex than simply writing to a file.

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072343.html">[whatwg] File API Streaming Blobs
</A></li>
	<LI>Next message: <A HREF="072265.html">[whatwg] File API Streaming Blobs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72257">[ date ]</a>
              <a href="thread.html#72257">[ thread ]</a>
              <a href="subject.html#72257">[ subject ]</a>
              <a href="author.html#72257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
