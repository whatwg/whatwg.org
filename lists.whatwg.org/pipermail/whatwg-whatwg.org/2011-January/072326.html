<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;base&gt; elements, again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cbase%3E%20elements%2C%20again&In-Reply-To=%3CAANLkTimjMqEw%3DeM2NF_Vu2Q3B5S3sbyNox4SyynLZrf3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072333.html">
   <LINK REL="Next"  HREF="030050.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;base&gt; elements, again</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cbase%3E%20elements%2C%20again&In-Reply-To=%3CAANLkTimjMqEw%3DeM2NF_Vu2Q3B5S3sbyNox4SyynLZrf3%40mail.gmail.com%3E"
       TITLE="[whatwg] &lt;base&gt; elements, again">w3c at adambarth.com
       </A><BR>
    <I>Mon Jan 24 16:02:03 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="072333.html">[whatwg] &lt;base&gt; elements, again
</A></li>
        <LI>Next message: <A HREF="030050.html">[whatwg] Fwd: Video and audio types added to	draft-ietf-websec-mime-sniff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72326">[ date ]</a>
              <a href="thread.html#72326">[ thread ]</a>
              <a href="subject.html#72326">[ subject ]</a>
              <a href="author.html#72326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Jan 24, 2011 at 6:06 AM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:
&gt;<i> In <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=627361">https://bugzilla.mozilla.org/show_bug.cgi?id=627361</A> we have a page which
</I>&gt;<i> has a subframe. &#160;The subframe has this HTML:
</I>&gt;<i>
</I>&gt;<i> &#160;&lt;a href=&quot;javascript:do_default(0)&quot;&gt;1261192&lt;/a&gt;
</I>&gt;<i>
</I>&gt;<i> and near the end of the page has a &lt;base target=&quot;_top&quot;&gt;.
</I>&gt;<i>
</I>&gt;<i> In current Gecko builds, this fails, because we now allow &lt;base&gt; anywhere in
</I>&gt;<i> the document per <A HREF="http://html5.org/tools/web-apps-tracker?from=5710&amp;to=5711">http://html5.org/tools/web-apps-tracker?from=5710&amp;to=5711</A>
</I>&gt;<i> and hence the javascript: URI is run against the toplevel window, not the
</I>&gt;<i> subframe's window, and there is no do_default function defined in the
</I>&gt;<i> toplevel window.
</I>&gt;<i>
</I>&gt;<i> This presumably used to work in Gecko before we started trying to implement
</I>&gt;<i> HTML5 &lt;base&gt; stuff because for &lt;base&gt; outside &lt;head&gt; we only applied it to
</I>&gt;<i> &lt;a&gt; elements that came after the &lt;base&gt; when parsing.
</I>&gt;<i>
</I>&gt;<i> Why did/does this markup work in other UAs? &#160;Or does it not? &#160;Does the spec
</I>&gt;<i> need changes here? &#160;As it stands, it's breaking existing markup.
</I>
In general, WebKit doesn't understand how to target JavaScript URLs at
other frames.  The basic limitation here is similar to why data URLs
in WebKit don't inherit the security origin of their creator.  I'd
like to change WebKit to match Gecko on both scores, but it's going to
require some delicate surgery.

Adam


&gt;<i> Note that we made the change to allow &lt;base&gt; anywhere about 10 days ago, and
</I>&gt;<i> got this bug report within 6 days of making this change. &#160;So I have to
</I>&gt;<i> assume that this is not an isolated incident, and that there are other pages
</I>&gt;<i> like this out there. &#160;Especially because the broken page in this case is
</I>&gt;<i> some sort of enterprise web app thing (Unicenter) which I assume is
</I>&gt;<i> installed in more than one place.
</I>&gt;<i>
</I>&gt;<i> -Boris
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072333.html">[whatwg] &lt;base&gt; elements, again
</A></li>
	<LI>Next message: <A HREF="030050.html">[whatwg] Fwd: Video and audio types added to	draft-ietf-websec-mime-sniff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72326">[ date ]</a>
              <a href="thread.html#72326">[ thread ]</a>
              <a href="subject.html#72326">[ subject ]</a>
              <a href="author.html#72326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
