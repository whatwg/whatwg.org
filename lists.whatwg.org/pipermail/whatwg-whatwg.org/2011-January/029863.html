<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web DOM Core feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20DOM%20Core%20feedback&In-Reply-To=%3CAANLkTim4ZKkJ%2ByARJgQcZ7kA_XKha9Y9MBwhNxHswZBY%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029861.html">
   <LINK REL="Next"  HREF="029874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web DOM Core feedback</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20DOM%20Core%20feedback&In-Reply-To=%3CAANLkTim4ZKkJ%2ByARJgQcZ7kA_XKha9Y9MBwhNxHswZBY%40mail.gmail.com%3E"
       TITLE="[whatwg] Web DOM Core feedback">robert at ocallahan.org
       </A><BR>
    <I>Fri Jan 14 02:53:34 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="029861.html">[whatwg] Web DOM Core feedback
</A></li>
        <LI>Next message: <A HREF="029874.html">[whatwg] Web DOM Core feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29863">[ date ]</a>
              <a href="thread.html#29863">[ thread ]</a>
              <a href="subject.html#29863">[ subject ]</a>
              <a href="author.html#29863">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Jan 14, 2011 at 11:41 PM, James Graham &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jgraham at opera.com</A>&gt; wrote:

&gt;<i> On 01/13/2011 10:05 PM, Aryeh Gregor wrote:
</I>&gt;<i>
</I>&gt;<i>  There are a bunch of places where it says &quot;When invoked with the same
</I>&gt;&gt;<i> argument the same NodeList object may be returned as returned by an
</I>&gt;&gt;<i> earlier call.&quot;  Shouldn't this be either required or prohibited in any
</I>&gt;&gt;<i> given case, not left undefined?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It seems like making this a requirement would interact badly with GC e.g.
</I>&gt;<i> if I have some call that produces a huge NodeList that is then not
</I>&gt;<i> referenced, I don't want to keep it around just in case some future script
</I>&gt;<i> returns the same NodeList. On the other hand, there are scripts that put
</I>&gt;<i> calls returning identical NodeLists in inner loops. In these cases not
</I>&gt;<i> recreating the object every time is a big performance win.
</I>&gt;<i>
</I>
The usual trick here is to weakly reference the cached NodeList. So if the
script holds onto a reference, then future calls will return that NodeList,
but if the script does not hold onto a reference, it can be GCed and future
calls will return a different NodeList. Then the spec can say that the same
NodeList will be returned, and that implementation satisfies the spec since
a script can't tell that the NodeList has changed without holding onto a
reference to the old NodeList.

... except I guess it can, because it could set expando properties on the
old NodeList and check for their presence later. Sigh.

Rob
-- 
&quot;Now the Bereans were of more noble character than the Thessalonians, for
they received the message with great eagerness and examined the Scriptures
every day to see if what Paul said was true.&quot; [Acts 17:11]
</PRE>











































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029861.html">[whatwg] Web DOM Core feedback
</A></li>
	<LI>Next message: <A HREF="029874.html">[whatwg] Web DOM Core feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29863">[ date ]</a>
              <a href="thread.html#29863">[ thread ]</a>
              <a href="subject.html#29863">[ subject ]</a>
              <a href="author.html#29863">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
