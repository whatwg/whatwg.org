<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Appcache feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Appcache%20feedback&In-Reply-To=%3CAANLkTin_0xapBo6gpdvOKEQR6K%2BBHfEErJvV44P3tkMD%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030145.html">
   <LINK REL="Next"  HREF="029856.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Appcache feedback</H1>
<!--htdig_noindex-->
    <B>Michael Nordman</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Appcache%20feedback&In-Reply-To=%3CAANLkTin_0xapBo6gpdvOKEQR6K%2BBHfEErJvV44P3tkMD%40mail.gmail.com%3E"
       TITLE="[whatwg] Appcache feedback">michaeln at google.com
       </A><BR>
    <I>Mon Jan 31 16:54:28 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030145.html">[whatwg] Appcache feedback
</A></li>
        <LI>Next message: <A HREF="029856.html">[whatwg] Revisiting innerWidth quirks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30148">[ date ]</a>
              <a href="thread.html#30148">[ thread ]</a>
              <a href="subject.html#30148">[ subject ]</a>
              <a href="author.html#30148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Jan 31, 2011 at 4:20 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Thu, 30 Sep 2010, Alexey Proskuryakov wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In definitions of application cache entry categories, it's mentioned
</I>&gt;&gt;<i> that an explicit entry can also be marked as foreign. This contrasts
</I>&gt;&gt;<i> with fallback entries, for which no such notice is made.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It still appears that the intention was for fallback entries to
</I>&gt;&gt;<i> sometimes be foreign - in particular, section 6.5.1 says &quot;Let candidate
</I>&gt;&gt;<i> be the fallback resource&quot; and then &quot;If candidate is not marked as
</I>&gt;&gt;<i> foreign...&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I found it confusing that there is a specific mention of foreign for
</I>&gt;&gt;<i> explicit entries, but not for fallback ones.
</I>&gt;<i>
</I>&gt;<i> Oops, yeah. Fixed.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, 11 Nov 2010, Michael Nordman wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In section &quot;6.6.6 Changes to the networking model&quot; which applies to sub
</I>&gt;&gt;<i> resource loads, step 3 prevents returning fallback resources for
</I>&gt;&gt;<i> requested urls that fall into a network namespace.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In section &quot;6.5.1 Navigating across documents&quot; which applies to main
</I>&gt;&gt;<i> resource loads, step 17 does not explicitly exclude returning fallbacks
</I>&gt;&gt;<i> for such urls.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I doubt this difference is intentional, looks like step 17 needs some
</I>&gt;&gt;<i> &lt;additional words&gt;...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &quot;If the resource was not fetched from an application cache, and was to
</I>&gt;&gt;<i> be fetched using HTTP GET or equivalent, and its URL matches the
</I>&gt;&gt;<i> fallback namespace &lt;but not the network namespace&gt; of one or more
</I>&gt;&gt;<i> relevant application caches...&quot;
</I>&gt;<i>
</I>&gt;<i> I assume you mean the online whitelist, not the &quot;network namespace&quot;.
</I>&gt;<i>
</I>&gt;<i> I've adjusted the spec as you suggest.
</I>&gt;<i>
</I>&gt;<i> As a side note: a redirect can never reach this point in the navigation
</I>&gt;<i> algorthm, as they are handled earlier. This means that a captive portal
</I>&gt;<i> captures URLs in fallback namespaces and the user can never get to the
</I>&gt;<i> fallback file of a resource loaded in a browsing context when the network
</I>&gt;<i> has a captive portal.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, 20 Dec 2010, Michael Nordman wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ---------- Forwarded message ----------
</I>&gt;<i> | From: UVL &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">andrea.doimo at gmail.com</A>&gt;
</I>&gt;<i> | Date: Sun, Dec 19, 2010 at 1:35 PM
</I>&gt;<i> | Subject: [chromium-html5] Application Cache for on-line sites
</I>&gt;<i> | To: Chromium HTML5 &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chromium-html5 at chromium.org</A>&gt;
</I>&gt;<i> |
</I>&gt;<i> | I tried to use the HTML5 Application Cache to improve the performances
</I>&gt;<i> | of on-line sites (all the tutorials on the web write only about usage
</I>&gt;<i> | with off-line apps)
</I>&gt;<i> |
</I>&gt;<i> | I created the manifest listing all the js, css and images, and the
</I>&gt;<i> | performances were really exciting, until I found that even the page HTML
</I>&gt;<i> | was cached, despite it was not listed in the manifest. The pages of the
</I>&gt;<i> | site are in PHP, so I don't want them to be cached.
</I>&gt;<i> |
</I>&gt;<i> | From
</I>&gt;<i> | <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html">http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html</A>
</I>&gt;<i> | : &quot;Authors are encouraged to include the main page in the manifest also,
</I>&gt;<i> | but in practice the page that referenced the manifest is automatically
</I>&gt;<i> | cached even if it isn't explicitly mentioned.&quot;
</I>&gt;<i> |
</I>&gt;<i> | Is there a way to have this automating caching disabled?
</I>&gt;<i> |
</I>&gt;<i> | Note: I know that caching can be controlled via HTTP headers, but I just
</I>&gt;<i> | wanted to try this way as it looks quite reliable, clean and powerful.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This type of request [...] to utilize the application cache for
</I>&gt;&gt;<i> subresource loads into documents that are not stored in the cache has
</I>&gt;&gt;<i> come up several times now. The current feature set is very focused on
</I>&gt;&gt;<i> the &quot;offline&quot; use case. Is it worth making additions such that a
</I>&gt;&gt;<i> document that loads from a server can utilize the resources in an
</I>&gt;&gt;<i> appcache?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Today we have &lt;html manifest=&quot;manifestFile&quot;&gt;, which adds the document
</I>&gt;&gt;<i> containing this tag to the appcache and associates that doc with that
</I>&gt;&gt;<i> appcache such that subresource loads hit the appcache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Not a complete proposal, but...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What if we had something along the lines of &lt;html
</I>&gt;&gt;<i> useManifest=''manifestFile&quot;&gt;, which would do the association of the doc
</I>&gt;&gt;<i> with the appcache (so subresources loads hit the cache) but not add the
</I>&gt;&gt;<i> document to the cache?
</I>&gt;<i>
</I>&gt;<i> Why can't the pages just switch to a more AJAX-like model rather than
</I>&gt;<i> having the main page still load over the network? The main page loading
</I>&gt;<i> over the network is a big part of the page being slow.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, 13 Jan 2011, Michael Nordman wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> AppCache feature request: An https manifest should be able to list
</I>&gt;&gt;<i> resources from other https origins.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've got some app developers asking for this feature. Currently, it's
</I>&gt;&gt;<i> explicitly disallowed by the the spec for valid security reasons, but
</I>&gt;&gt;<i> there are also valid reasons to have this capability, like a webapp that
</I>&gt;&gt;<i> uses resources hosted on gstatic.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Seems like a robots.txt like scheme where a site like gstatic can
</I>&gt;&gt;<i> declare that its &quot;OK to appcache me from elsewhere&quot; is needed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've opened a chromium bug for this here...
</I>&gt;&gt;<i> <A HREF="http://code.google.com/p/chromium/issues/detail?id=69594">http://code.google.com/p/chromium/issues/detail?id=69594</A>
</I>&gt;<i>
</I>&gt;<i> Why do the valid security reasons not apply in this case?
</I>
The vendors of originA and originB have expressed that its OK for one
to appcache resources of the other. In practical terms this is to
support a single application being hosted on multiple 'origins'.
Google gstatic.com for one example...
<A HREF="http://superuser.com/questions/64716/what-is-gstatic-com">http://superuser.com/questions/64716/what-is-gstatic-com</A>

If I understand the reason for the restrictions on HTTPS as the following...

&quot;The requirement is intended to prevent hostile.example.com from
forcing content from checkout.google.com to be stored onto the user's
machine, so that a later offline attack involving grabbing the user's
laptop cannot retrieve the information.&quot;

That doesn't apply in this case because gstatic.com is not hostile to gmail.com.

&gt;<i>
</I>&gt;<i> On Tue, 25 Jan 2011, Michael Nordman wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This could be as simple as the presence of an
</I>&gt;&gt;<i> 'applicationcaching_allowed' file at the top level. An https manifest
</I>&gt;&gt;<i> update that wants to retrieve resources from another https origin
</I>&gt;&gt;<i> would first have to fetch the 'allow' file and see an expected
</I>&gt;&gt;<i> response, and if it doesn't see a good response, those xorigin entries
</I>&gt;&gt;<i> would be skipped (matching today's behavior).
</I>&gt;<i>
</I>&gt;<i> I'm not a fan of hardcoded URLs, as they fail in a number of scenarios
</I>&gt;<i> (e.g. a server shared by different teams that trust each other but may
</I>&gt;<i> have different needs).
</I>&gt;<i>
</I>&gt;<i> Before we discuss solutions, though, we should be clear what problem we're
</I>&gt;<i> trying to solve. What is the security risk you are looking to mitigate?
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Ian Hickson &#160; &#160; &#160; &#160; &#160; &#160; &#160; U+1047E &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;)\._.,--....,'``. &#160; &#160;fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A> &#160; &#160; &#160; U+263A &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;/, &#160; _.. \ &#160; _\ &#160;;`._ ,.
</I>&gt;<i> Things that are impossible just take longer. &#160; `._.-(,_..'--(,_..'`-.;.'
</I>&gt;<i>
</I></PRE>




<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030145.html">[whatwg] Appcache feedback
</A></li>
	<LI>Next message: <A HREF="029856.html">[whatwg] Revisiting innerWidth quirks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30148">[ date ]</a>
              <a href="thread.html#30148">[ thread ]</a>
              <a href="subject.html#30148">[ subject ]</a>
              <a href="author.html#30148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
