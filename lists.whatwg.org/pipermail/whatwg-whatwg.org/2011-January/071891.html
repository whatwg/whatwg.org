<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Low Memory Event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Low%20Memory%20Event&In-Reply-To=%3C4D1FE886.1070406%40emsai.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071890.html">
   <LINK REL="Next"  HREF="071892.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Low Memory Event</H1>
<!--htdig_noindex-->
    <B>Roger H&#229;gensen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Low%20Memory%20Event&In-Reply-To=%3C4D1FE886.1070406%40emsai.net%3E"
       TITLE="[whatwg] Low Memory Event">rescator at emsai.net
       </A><BR>
    <I>Sat Jan  1 18:52:54 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="071890.html">[whatwg] Low Memory Event
</A></li>
        <LI>Next message: <A HREF="071892.html">[whatwg] Low Memory Event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71891">[ date ]</a>
              <a href="thread.html#71891">[ thread ]</a>
              <a href="subject.html#71891">[ subject ]</a>
              <a href="author.html#71891">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 2011-01-02 03:27, Kornel Lesi&#324;ski wrote:
&gt;<i> On Sun, 02 Jan 2011 00:53:48 -0000, Charles Pritchard 
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chuck at jumis.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> ArrayBuffer and Canvas use contiguous memory segments. You don't need 
</I>&gt;&gt;<i> a complex GC pass to let those ones go.
</I>&gt;&gt;<i> For my use cases, those are the two types I'm working with.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Keeping them around helps the speed of my app, letting them go
</I>&gt;&gt;<i> cuts down on memory usage.
</I>&gt;<i>
</I>&gt;<i> Maybe better solution would be to add &quot;purgeable&quot; flag to canvas (i.e. 
</I>&gt;<i> allow browser to clear canvas at any time) or some way to create/mark 
</I>&gt;<i> weak references? (i.e. a reference to object that can be changed to 
</I>&gt;<i> null if browser is in low-memory situation).
</I>&gt;<i>
</I>&gt;<i> Although, I'm not convinced that handling of low memory in JS is 
</I>&gt;<i> necessary. Browsers already have some ways to free memory, e.g. by 
</I>&gt;<i> freeing all bitmaps for &lt;img&gt; or simply by unloading whole pages.
</I>&gt;<i>
</I>&gt;<i> Amount of available memory, even on mobile devices, increases 
</I>&gt;<i> dramatically each year. It's possible that by the time this feature 
</I>&gt;<i> gets specified, implemented, released and installed on significant 
</I>&gt;<i> number of devices it will be irrelevant. On my desktop computer I 
</I>&gt;<i> often have 100 tabs open and memory is not an issue, and my mobile 
</I>&gt;<i> phone has 1/16th of that RAM already.
</I>&gt;<i>
</I>
I think this is starting to get off topic, as we're now into OS memory 
allocation territory.
If the browser is told by the OS or the browser &quot;feels&quot; it need to 
conserve memory it can do whatever it pleases, OS stability trumphs web 
page/app/script/whatever, and should always do so.

Charles, you initially said you where worried about this since you used 
undo buffers.
Why not simply add undo buffers to the Canvas spec? That way the browser 
can start tossing away the oldest undo buffers automatically when it 
starts getting memory anorexic.
And depending on the browser implementation and the OS and hardware 
support, on some systems the Canvas undo buffers could even be in 
graphics memory.
It's wrong for Canvas to have undo stuff in active memory, most graphics 
programs store the undo on disk or it's paged out to a swapfile at the 
least.
So if you have to make your own undo buffers for Canvas, then I'd say 
that Canvas is lacking and might need undo buffers as part of it's spec.


-- 
Roger &quot;Rescator&quot; H&#229;gensen.
Freelancer - <A HREF="http://www.EmSai.net/">http://www.EmSai.net/</A>


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071890.html">[whatwg] Low Memory Event
</A></li>
	<LI>Next message: <A HREF="071892.html">[whatwg] Low Memory Event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71891">[ date ]</a>
              <a href="thread.html#71891">[ thread ]</a>
              <a href="subject.html#71891">[ subject ]</a>
              <a href="author.html#71891">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
