<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] postMessage feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%20feedback&In-Reply-To=%3C4813A7BF.4060600%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014566.html">
   <LINK REL="Next"  HREF="014568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] postMessage feedback</H1>
<!--htdig_noindex-->
    <B>Jeff Walden</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%20feedback&In-Reply-To=%3C4813A7BF.4060600%40mit.edu%3E"
       TITLE="[whatwg] postMessage feedback">jwalden+whatwg at MIT.EDU
       </A><BR>
    <I>Sat Apr 26 15:07:59 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="014566.html">[whatwg] postMessage feedback
</A></li>
        <LI>Next message: <A HREF="014568.html">[whatwg] postMessage feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14567">[ date ]</a>
              <a href="thread.html#14567">[ thread ]</a>
              <a href="subject.html#14567">[ subject ]</a>
              <a href="author.html#14567">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Maciej Stachowiak wrote:
&gt;<i> If anything this event should dispatch to the window, not the document, 
</I>&gt;<i> since that is what gets the postMessage call. But posting to the 
</I>&gt;<i> document and bubbling to the window seems ok too.
</I>
The event currently doesn't bubble to accommodate &lt;event-source&gt;:

<A HREF="http://lists.whatwg.org/htdig.cgi/commit-watchers-whatwg.org/2008/000436.html">http://lists.whatwg.org/htdig.cgi/commit-watchers-whatwg.org/2008/000436.html</A>

So right now, either you use a bubbling listener (capturing works too, although the web may end up dictating that that's a bug that won't be fixt) on the document or a capturing listener (ugh) on window or you don't get it.  I'm not entirely sure why the event doesn't bubble for postMessage; it seems like a postMessage event doesn't necessarily have to do the same thing as an &lt;event-source&gt; event, but maybe there's precedent here that I don't know.

As far as I can tell the event is dispatched at the document only because Opera's original implementation had postMessage on document.  I sort of prefer dispatching to the window as well, but that change would have to be made ASAP to make Firefox 3.  It's a one-line change (+30ish for addEventListener calls in tests, also easy to do), as is the bubbling change, but it's extraordinarily late for us to make these changes (async cuts it very, very fine as-is), and nobody would be happy if the spec converged on something that Firefox 3 didn't actually implement.

Jeff

-- 
Life would be so much easier if humans had a natural affinity for remembering 128-bit integers.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014566.html">[whatwg] postMessage feedback
</A></li>
	<LI>Next message: <A HREF="014568.html">[whatwg] postMessage feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14567">[ date ]</a>
              <a href="thread.html#14567">[ thread ]</a>
              <a href="subject.html#14567">[ subject ]</a>
              <a href="author.html#14567">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
