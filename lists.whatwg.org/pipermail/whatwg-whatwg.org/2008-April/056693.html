<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] postMessage() issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%28%29%20issues&In-Reply-To=%3Ce72b1b360804160032y18e6bac0i6e8c09a95dc15abd%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056688.html">
   <LINK REL="Next"  HREF="056702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] postMessage() issues</H1>
<!--htdig_noindex-->
    <B>Jo&#227;o Eiras</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%28%29%20issues&In-Reply-To=%3Ce72b1b360804160032y18e6bac0i6e8c09a95dc15abd%40mail.gmail.com%3E"
       TITLE="[whatwg] postMessage() issues">joao.eiras at gmail.com
       </A><BR>
    <I>Wed Apr 16 00:32:47 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056688.html">[whatwg] postMessage() issues
</A></li>
        <LI>Next message: <A HREF="056702.html">[whatwg] postMessage() issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56693">[ date ]</a>
              <a href="thread.html#56693">[ thread ]</a>
              <a href="subject.html#56693">[ subject ]</a>
              <a href="author.html#56693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi!

I agree with everything Maciej said, but I'm rather impartial.
The word post implies posting something to a queue of messages, like
we've seen in other programming APIs.

There are use cases for both sync and async API, so we should support
both. We could have either a new parameter for postMessage, like with
have for XHR, which defines the behavior (if async or not), or we
could have two functions postMessage asynchronous and sendMessage
synchronous.
Then everyone would be happy.

Thank you.



2008/4/16, Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt;:
&gt;<i>
</I>&gt;<i>  On Apr 15, 2008, at 5:10 PM, Ian Hickson wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; At the moment people have proposed that the API be asynchronous, and some
</I>&gt;<i> &gt; people are ok with that, but other people are strongly opposed to it. I am
</I>&gt;<i> &gt; not sure where to go with this. Input from other browser vendors --
</I>&gt;<i> &gt; yourself and WebKit in particular -- would be very useful. Right now the
</I>&gt;<i> &gt; API is synchronous, and Mozilla reps have indicated they strongly prefer
</I>&gt;<i> &gt; that, Opera reps have indicated they don't mind, and Gears reps have
</I>&gt;<i> &gt; indicated they'd rather it be async.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>  I think async is better, for the following reasons:
</I>&gt;<i>
</I>&gt;<i>  - PostMessage seems to imply a message queue model.
</I>&gt;<i>  - Processing a reply synchronously is awkward in any case, since you need a
</I>&gt;<i> callback.
</I>&gt;<i>  - This is different from event dispatch because replies are expected to be
</I>&gt;<i> common; two way communication channels like postMessage make more sense as
</I>&gt;<i> asynchronous, while event dispatch is typically one-way.
</I>&gt;<i>  - Saying that runaway two-way messaging should be handled by a &quot;slow
</I>&gt;<i> script&quot; dialog seems weak to me, compared to making the mechanism
</I>&gt;<i> intrinsically resistant to runaway behavior.
</I>&gt;<i>  - Making new communication APIs async makes it more practical to partition
</I>&gt;<i> browsing contexts into separate threads, processes, operation queues, or
</I>&gt;<i> other concurrency mechanisms (within the limitations of what kind of things
</I>&gt;<i> must be serialized.
</I>&gt;<i>  - We can foresee that workers in the style of Gears will be a future use
</I>&gt;<i> case for postMessage; in that case, it clearly must be async.
</I>&gt;<i>
</I>&gt;<i>  However, I don't feel very strongly about this and I would consider
</I>&gt;<i> synchronous postMessage acceptable.
</I>&gt;<i>
</I>&gt;<i>  (Note also that Eric Seidel, who commented on this issue earlier, was also
</I>&gt;<i> giving his feedback as a WebKit developer, though in both cases we speak
</I>&gt;<i> mainly for ourselves and not as an official position of the whole project.)
</I>&gt;<i>
</I>&gt;<i>  Regards,
</I>&gt;<i>  Maciej
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056688.html">[whatwg] postMessage() issues
</A></li>
	<LI>Next message: <A HREF="056702.html">[whatwg] postMessage() issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56693">[ date ]</a>
              <a href="thread.html#56693">[ thread ]</a>
              <a href="subject.html#56693">[ subject ]</a>
              <a href="author.html#56693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
