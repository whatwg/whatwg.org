<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] postMessage feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%20feedback&In-Reply-To=%3C3136DBBA-5B68-434D-9E3A-7D17713D59EC%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056840.html">
   <LINK REL="Next"  HREF="056843.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] postMessage feedback</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%20feedback&In-Reply-To=%3C3136DBBA-5B68-434D-9E3A-7D17713D59EC%40apple.com%3E"
       TITLE="[whatwg] postMessage feedback">mjs at apple.com
       </A><BR>
    <I>Sat Apr 26 16:26:43 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056840.html">[whatwg] postMessage feedback
</A></li>
        <LI>Next message: <A HREF="056843.html">[whatwg] postMessage feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56841">[ date ]</a>
              <a href="thread.html#56841">[ thread ]</a>
              <a href="subject.html#56841">[ subject ]</a>
              <a href="author.html#56841">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Apr 26, 2008, at 3:07 PM, Jeff Walden wrote:

&gt;<i> Maciej Stachowiak wrote:
</I>&gt;&gt;<i> If anything this event should dispatch to the window, not the  
</I>&gt;&gt;<i> document, since that is what gets the postMessage call. But posting  
</I>&gt;&gt;<i> to the document and bubbling to the window seems ok too.
</I>&gt;<i>
</I>&gt;<i> The event currently doesn't bubble to accommodate &lt;event-source&gt;:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://lists.whatwg.org/htdig.cgi/commit-watchers-whatwg.org/2008/000436.html">http://lists.whatwg.org/htdig.cgi/commit-watchers-whatwg.org/2008/000436.html</A>
</I>&gt;<i>
</I>&gt;<i> So right now, either you use a bubbling listener (capturing works  
</I>&gt;<i> too, although the web may end up dictating that that's a bug that  
</I>&gt;<i> won't be fixt) on the document or a capturing listener (ugh) on  
</I>&gt;<i> window or you don't get it.  I'm not entirely sure why the event  
</I>&gt;<i> doesn't bubble for postMessage; it seems like a postMessage event  
</I>&gt;<i> doesn't necessarily have to do the same thing as an &lt;event-source&gt;  
</I>&gt;<i> event, but maybe there's precedent here that I don't know.
</I>&gt;<i>
</I>&gt;<i> As far as I can tell the event is dispatched at the document only  
</I>&gt;<i> because Opera's original implementation had postMessage on  
</I>&gt;<i> document.  I sort of prefer dispatching to the window as well, but  
</I>&gt;<i> that change would have to be made ASAP to make Firefox 3.  It's a  
</I>&gt;<i> one-line change (+30ish for addEventListener calls in tests, also  
</I>&gt;<i> easy to do), as is the bubbling change, but it's extraordinarily  
</I>&gt;<i> late for us to make these changes (async cuts it very, very fine as- 
</I>&gt;<i> is), and nobody would be happy if the spec converged on something  
</I>&gt;<i> that Firefox 3 didn't actually implement.
</I>
I hope this can be addressed soon, and I feel your pain. But in Safari  
3.1 we actually dropped postMessage at the last minute because of too  
many spec changes, and the spec changed in major ways after Opera  
actually shipped their implementation, so it's not like changes here  
are unprecedented and certainly Firefox is not being singled out.

(On the substance, I think dispatching to the window would be better  
based on your comments.)

Cheers,
Maciej


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056840.html">[whatwg] postMessage feedback
</A></li>
	<LI>Next message: <A HREF="056843.html">[whatwg] postMessage feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56841">[ date ]</a>
              <a href="thread.html#56841">[ thread ]</a>
              <a href="subject.html#56841">[ subject ]</a>
              <a href="author.html#56841">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
