<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] postMessage() issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%28%29%20issues&In-Reply-To=%3CF26C5339-A474-4DE6-99D8-3A3B9377561B%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056687.html">
   <LINK REL="Next"  HREF="056693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] postMessage() issues</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%28%29%20issues&In-Reply-To=%3CF26C5339-A474-4DE6-99D8-3A3B9377561B%40apple.com%3E"
       TITLE="[whatwg] postMessage() issues">mjs at apple.com
       </A><BR>
    <I>Tue Apr 15 17:42:49 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056687.html">[whatwg] postMessage() issues
</A></li>
        <LI>Next message: <A HREF="056693.html">[whatwg] postMessage() issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56688">[ date ]</a>
              <a href="thread.html#56688">[ thread ]</a>
              <a href="subject.html#56688">[ subject ]</a>
              <a href="author.html#56688">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Apr 15, 2008, at 5:10 PM, Ian Hickson wrote:

&gt;<i>
</I>&gt;<i> At the moment people have proposed that the API be asynchronous, and  
</I>&gt;<i> some
</I>&gt;<i> people are ok with that, but other people are strongly opposed to  
</I>&gt;<i> it. I am
</I>&gt;<i> not sure where to go with this. Input from other browser vendors --
</I>&gt;<i> yourself and WebKit in particular -- would be very useful. Right now  
</I>&gt;<i> the
</I>&gt;<i> API is synchronous, and Mozilla reps have indicated they strongly  
</I>&gt;<i> prefer
</I>&gt;<i> that, Opera reps have indicated they don't mind, and Gears reps have
</I>&gt;<i> indicated they'd rather it be async.
</I>
I think async is better, for the following reasons:

- PostMessage seems to imply a message queue model.
- Processing a reply synchronously is awkward in any case, since you  
need a callback.
- This is different from event dispatch because replies are expected  
to be common; two way communication channels like postMessage make  
more sense as asynchronous, while event dispatch is typically one-way.
- Saying that runaway two-way messaging should be handled by a &quot;slow  
script&quot; dialog seems weak to me, compared to making the mechanism  
intrinsically resistant to runaway behavior.
- Making new communication APIs async makes it more practical to  
partition browsing contexts into separate threads, processes,  
operation queues, or other concurrency mechanisms (within the  
limitations of what kind of things must be serialized.
- We can foresee that workers in the style of Gears will be a future  
use case for postMessage; in that case, it clearly must be async.

However, I don't feel very strongly about this and I would consider  
synchronous postMessage acceptable.

(Note also that Eric Seidel, who commented on this issue earlier, was  
also giving his feedback as a WebKit developer, though in both cases  
we speak mainly for ourselves and not as an official position of the  
whole project.)

Regards,
Maciej


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056687.html">[whatwg] postMessage() issues
</A></li>
	<LI>Next message: <A HREF="056693.html">[whatwg] postMessage() issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56688">[ date ]</a>
              <a href="thread.html#56688">[ thread ]</a>
              <a href="subject.html#56688">[ subject ]</a>
              <a href="author.html#56688">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
