<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] More Storage clarification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20Storage%20clarification&In-Reply-To=%3C6811E688-7A28-4034-B874-1F12E968CDFC%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014382.html">
   <LINK REL="Next"  HREF="014384.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] More Storage clarification</H1>
<!--htdig_noindex-->
    <B>Brady Eidson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20Storage%20clarification&In-Reply-To=%3C6811E688-7A28-4034-B874-1F12E968CDFC%40apple.com%3E"
       TITLE="[whatwg] More Storage clarification">beidson at apple.com
       </A><BR>
    <I>Thu Apr 10 16:01:46 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="014382.html">[whatwg] several messages relating to the alt=&quot;&quot; attribute
</A></li>
        <LI>Next message: <A HREF="014384.html">[whatwg] More Storage clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14383">[ date ]</a>
              <a href="thread.html#14383">[ thread ]</a>
              <a href="subject.html#14383">[ subject ]</a>
              <a href="author.html#14383">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>In 4.10.5, the description of the properties on the StorageEvent  
object mentions &quot;...its newValue attribute set to the new value of the  
key in question, or null if the key was removed...&quot;
So a web author can assume that when handling a StorageEvent whose  
newValue property is null that the event was the result of a  
removeItem(), and the key is no longer in the list.

However in 4.10.2 in the discussion of setItem(), there is no mention  
that null is not an allowed value.  Something like  
sessionStorage.setItem(&quot;key&quot;, null) is not forbidden, therefore it is  
allowed, and it would result in a StorageEvent with a null newValue.

To resolve this case, I propose that we specify that the value in a  
key/value pair cannot be set to null.
I see two clean ways to specify this:

1 - Throw an exception when setItem() is called with a null value.
2 - Specify setItem(key, null) to have the exact same effects as  
removeItem(key).

I prefer #2.  Thoughts?

~Brady


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014382.html">[whatwg] several messages relating to the alt=&quot;&quot; attribute
</A></li>
	<LI>Next message: <A HREF="014384.html">[whatwg] More Storage clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14383">[ date ]</a>
              <a href="thread.html#14383">[ thread ]</a>
              <a href="subject.html#14383">[ subject ]</a>
              <a href="author.html#14383">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
