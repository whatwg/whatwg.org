<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Supporting MathML and SVG in text/html, and related topics
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20MathML%20and%20SVG%20in%20text/html%2C%20and%20related%20topics&In-Reply-To=%3CPine.LNX.4.62.0804060112390.18949%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014371.html">
   <LINK REL="Next"  HREF="014425.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Supporting MathML and SVG in text/html, and related topics</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20MathML%20and%20SVG%20in%20text/html%2C%20and%20related%20topics&In-Reply-To=%3CPine.LNX.4.62.0804060112390.18949%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Supporting MathML and SVG in text/html, and related topics">ian at hixie.ch
       </A><BR>
    <I>Thu Apr 10 02:51:20 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="014371.html">[whatwg] StorageEvent clarity
</A></li>
        <LI>Next message: <A HREF="014425.html">[whatwg] Supporting MathML and SVG in text/html,	and related topics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14372">[ date ]</a>
              <a href="thread.html#14372">[ thread ]</a>
              <a href="subject.html#14372">[ subject ]</a>
              <a href="author.html#14372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
Over 620 e-mails were sent on the topic of mixing different vocabularies 
into text/html documents over the last couple of years. Most were 
advocating particular solutions, and just assumed that the problem being 
addressed was known, so it was quite difficult to actually determine what 
the problems and use cases were.
 
After carefully reading all these e-mails, I found the following use 
cases described:

* The ability for an author to unilaterally extend the language to address 
  problems we are currently unaware of and that therefore are not covered 
  by existing functionality.

* Putting an equation in a Web page.

* Writing a document by hand, with inline diagrams imported from a 
  graphics package.

* Writing a document by hand, with vector graphic icons.

* Mixing vector graphics, mathematics, and other features.

* Writing applications that contain graphics that represent custom data, 
  while including that data for script manipulation.

* Writing highly interactive, graphically intensive sites.

* Animating Web page content (hypertext, vector graphics).

* Migrating from LaTeX to HTML.

* Including XBL2 inline in a text/html document the same way CSS and JS 
  can be included inline.

I respond in detail to the e-mails received below, but first here is a 
quick overview of each of the above use cases and whether, and how, they 
were addressed:

* The ability for an author to unilaterally extend the language to address 
  problems we are currently unaware of and that therefore are not covered 
  by existing functionality.

There are two aspects to this -- extending the language for private use, 
e.g. to encoding data for a script to manage, and extending the language 
in a way intended for use by multiple groups, e.g. to provide new features 
that user agents can implement.

The former has historically been solved by adding custom non-standard 
attributes to elements in the DOM, or by abusing other attributes 
(typically title=&quot;&quot;) or by encoding the data in painful ways in the class 
attribute (the closest thing to legitimate solution).

I've added a &quot;standard&quot; way to support this: the data-* attributes.

You can now add any attribute starting with &quot;data-&quot; to any element in the 
HTML namespace, with any value, and it'll be valid:

  &lt;ul class=&quot;contactList&quot;&gt;
   &lt;li data-username=&quot;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&quot; data-network=&quot;Jabber&quot;&gt;Hixie&lt;/li&gt;
   ...
  &lt;/ul&gt;

You can then access this data using the new &quot;dataset&quot; DOM API:

   // get data from the element
   network = li.dataset.network;
   username = li.dataset.username;

   // set data on the element
   li.dataset.status = getStatus(username, network);

   // remove one of the attributes
   delete li.dataset.pending;


The second reason to extend the language is to extend the language in a 
manner that is intended to be used by many people, be implemented by user 
agents, and so forth. For this, though, we actively want to make sure that 
people can't willy nilly extend the language without coordination with 
anyone interested in the development of the language, and therefore I 
haven't provided any syntax mechanism to address this. The right way to 
extend the language is with the involvement of the wider community, as we 
have been doing for HTML5.

In any case, the syntax part would be a very minor part of any such 
effort. Adding new user-agent-supported vocabularies requires significant 
investment:

 * studying existing authoring behaviours
 * determining what problem needs fixing
 * designing a solution that addresses the problem
 * describing the syntax
 * describing the semantics
 * describing the behaviour
 * defining the error handling for syntax errors
 * defining the error handling for semantic errors
 * implementing the defined features
 * testing the implementations
 * writing tutorials

Only one small part of that has anything to do with the syntax. Defining a 
generic system is optimising a small part that doesn't need optimising 
(adding SVG and MathML to text/html, as noted below, only took a few days 
when we got down to it).

Now, even given all this, some people still want an extensibility 
mechanism for proprietary extensions. For this, we have XML, which is 
intended to just be a generic syntax. It is quite difficult to make a 
generic syntax out of text/html, due to the legacy content out there. I go 
into more detail on this in some of the replies below.



* Putting an equation in a Web page.

I considered a number of ways of doing this, including for example just 
having LaTeX, or some other simple ASCII model for describing mathematics. 
These have the advantage of being easy(ish) to write. However, in the end 
the benefits of having a well-defined DOM were too great, and the only 
choice for the DOM became MathML. This posed a problem with the LaTeX and 
other ASCII syntax ideas, because then we'd have to define some complex 
parsing to convert from one to the other. It also seemed like if we were 
going to support MathML, we should have some way to natively support the 
MathML syntax, and therefore I settled on just using the tags. I 
considered several ways of making even that simpler, e.g. making certain 
tags optional, but the complexity of such solutions proved too much to 
really justify.

So the text/html HTML5 language now has a way to support raw MathML 
natively in the markup. There are several aspects of this that are worth 
noting:

 * the tag names are case-insensitive
 * XML well-formedness is not enforced
 * the /&gt; self-closing syntax _is_ supported (on all MathML elements)
 * prefixes don't work
 * xmlns=&quot;&quot; attributes have no effect
 * Content MathML is parsed faithfully

Namespace boundaries exist on the following elements: &lt;math&gt; &lt;mo&gt; &lt;mi&gt; 
&lt;ms&gt; &lt;mn&gt; &lt;mtext&gt;. A &lt;math&gt; element in an HTML context automatically 
starts a MathML subtree; the other elements in a MathML context allow HTML 
elements to be embedded at those points (and indeed all elements that are 
children of those elements, other than &lt;mglyph&gt; and &lt;malignmark&gt;, will 
automatically be put in the HTML namespace). At any other time, an HTML 
element will just close the currently open &lt;math&gt; element. As noted below, 
The SVG element &lt;svg&gt; is also allowed inside &lt;mo&gt;, &lt;mi&gt;, &lt;ms&gt;, &lt;mn&gt;, and 
&lt;mtext&gt;, as well as inside &lt;annotation-xml&gt;. No other namespace (e.g. 
OpenMath) can be embedded in MathML in text/html for now.

Unfortunately, MathML is very, very verbose, and nothing has been done to 
aleviate this here. I'm not sure what to do about this. On the plus side, 
it should be possible to just drop MathML from most MathML-capable 
equation editors, like Microsoft Word, straight into HTML, assuming that 
they don't use namespace prefixes.

The biggest issue with MathML in text/html is that so far only one vendor 
supports it. While some of the other vendors have unofficially told me 
they may consider implementing MathML, others are less likely to do so 
unless MathML becomes widely used, presenting a chicken-and-egg problem 
that the MathML community is all too familiar with. I recommend that the 
MathML community make available large, comprehensive, high-quality test 
suites for presentational MathML, 



* Writing a document by hand, with inline diagrams imported from a 
  graphics package.

After briefly considering various formats, I concluded that the only 
reasonable choice for a vector graphics format in text/html was SVG. It is 
already supported to some extent by most major browsers, and it has 
reasonably well-defined DOM semantics.

A similar approach to the MathML solution was used. One major difference 
is that while MathML was carefully designed to avoid name clashes with 
HTML, SVG was not. Because of this, at least &lt;font&gt; elements aren't 
supported in SVG in text/html. Also, while MathML elements and attributes 
are conveniently all in one namespace and all lowercase, SVG is all over 
the map, using at least three namespaces (four if you count the xmlns=&quot;&quot; 
attributes!) and has camelCase attributes. For this reason, SVG has a set 
of fixups to support specific elements and attributes that aren't 
lowercase in the SVG namespace. As part of this I've also made xml:base, 
xml:space, and XLink be supported on both SVG and MathML elements in 
text/html.

For SVG, &lt;desc&gt;, &lt;title&gt;, and &lt;foreignObject&gt; are the namespace boundary 
points -- anything inside those is treated as HTML (except &lt;math&gt; and 
&lt;svg&gt;, of course, which start new namespaced subtrees).



* Mixing vector graphics, mathematics, and other features.

As noted in the previous two bits, the support for SVG and MathML is 
designed to allow the vocabularies, and HTML, to be mixed at well-defined 
points.



* Writing a document by hand, with vector graphic icons.

This has long been possible with &lt;img&gt;, so I haven't changed anything to 
support this use case.



* Writing applications that contain graphics that represent custom data, 
  while including that data for script manipulation.

I haven't yet addressed this, since it requires coordination with the SVG 
(and MathML) groups, but if the data-* / dataSet idea pans out, then it 
would be interesting to see if the SVG and MathML groups like it and can 
adopt it too, getting us a consistent API across the vocabularies. For 
now, we'll have to see how it works in HTML.



* Writing highly interactive, graphically intensive sites.

SVG and SVG's SMIL ans scripting capabilities, I am assured, can handle 
this.



* Animating Web page content (hypertext, vector graphics).

This is something more for the SMIL and CSS groups, so I haven't directly 
addressed it.



* Migrating from LaTeX to HTML.

Tools exist to do this somewhat. I'm not sure what else can be done. As 
mentioned above, I did consider using LaTeX syntax for maths, but that 
turned out to not really be workable.



* Including XBL2 inline in a text/html document the same way CSS and JS 
  can be included inline.

I haven't addressed this. It's premature to consider XBL2 in text/html, as 
it has not been implemented in browsers yet.



A common theme across some of the problems listed above, and discussed in 
detail in the e-mails below, is the issue of a generic syntax for non-HTML 
namespaces in text/html. It turns out to be _exceedingly_ hard to handle 
the giant mass of weirdness found in legacy content on the Web while 
adding new features. For example, this page:

   <A HREF="http://www.laroseweb.com/calcs/fans.php">http://www.laroseweb.com/calcs/fans.php</A>

      &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; 
      &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</A>&gt;
      &lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml&quot;">http://www.w3.org/1999/xhtml&quot;</A> &gt;
      &lt;math xmlns=&quot;<A HREF="http://www.w3.org/1998/Math/MathML&quot;">http://www.w3.org/1998/Math/MathML&quot;</A>&gt;
      &lt;math xmlns=&quot;&amp;mathml;&quot;&gt;

      &lt;head&gt;
      [... continues with just a normal XHTML page]

...or this page:

   <A HREF="http://www.cocopahrv.com/map.html">http://www.cocopahrv.com/map.html</A>

      [...]
      &lt;table width=&quot;592&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;
        &lt;tr align=&quot;left&quot; valign=&quot;top&quot;&gt; 
          &lt;td width=&quot;592&quot;&gt;&lt;svg width=&quot;200&quot; height=&quot;200&quot; viewBox=&quot;0 0 
      200 200&quot;&gt;&lt;img name=&quot;r1_c1&quot; src=&quot;map/resortmap.jpg&quot; width=&quot;600&quot; 
      height=&quot;465&quot; border=&quot;0&quot; alt=&quot;Cocopah RV and Golf Resort&quot; 
      usemap=&quot;#r1_c1Map&quot;&gt;&lt;map name=&quot;r1_c1Map&quot;&gt;&lt;area shape=&quot;rect&quot; 
      coords=&quot;4,2,298,230&quot; href=&quot;map/lmp1a.jpg&quot;&gt;&lt;area shape=&quot;rect&quot; 
      coords=&quot;1,230,296,460&quot; href=&quot;map/lmp1b.jpg&quot;&gt;&lt;area shape=&quot;rect&quot; 
      coords=&quot;297,4,598,231&quot; href=&quot;map/lmp2a.jpg&quot;&gt;&lt;area shape=&quot;rect&quot; 
      coords=&quot;297,231,599,462&quot; href=&quot;map/lmp2b.jpg&quot;&gt;&lt;/map&gt;&lt;rect 
      x=&quot;100&quot; y=&quot;100&quot; width=&quot;10&quot; height=&quot;20&quot; style=&quot;fill: green&quot;/&gt; 
          &lt;/svg&gt; &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      [...]

Both of these pages work fine today. Sadly the second one above will break 
(well, it'll have a big white gap) in browsers that support the new 
feature. The biggest problem in developing the syntax for MathML and SVG 
(adding hundreds of elements to text/html) was doing so in a way that 
limited the number of pages that would fail to a bare minimum.

In my research, most text/html pages that I have found that use SVG in a 
way that doesn't immediately improve the rendering if we support the new 
proposal are pages that include the markup in a discussion (e.g. forum 
posts, blog comments, etc) without escaping it. This will lead to all 
kinds of XSS problems, which might be interesting. For example:

   <A HREF="http://kr.blog.yahoo.com/yunneo2000/1111673">http://kr.blog.yahoo.com/yunneo2000/1111673</A>

There are also cases where SVG is used in a way that will affect the page, 
but where the HTML elements bailing out of SVG will make the page render 
far better than if we just waited for &lt;/svg&gt; or some such. For example:

   <A HREF="http://puysl.com/view.htm">http://puysl.com/view.htm</A>
   <A HREF="http://albren.blogspot.com/2007/02/l05-traductor.html">http://albren.blogspot.com/2007/02/l05-traductor.html</A>

There are basically two types of pages using &lt;math&gt; that I found -- those 
using MathML, which will improve when browsers support MathML in 
text/html, and those that use &lt;math&gt; just as a wrapper around some LaTeX 
or other random text.

Assuming &lt;math&gt;foo&lt;/math&gt; doesn't show an error in MathML-in-text/html, we 
should be ok with backwards-compatibility. I've added text to the spec to 
imply that such text should be shown (as if it was wrapped in an &lt;mtext&gt;).



And now, replies to the e-mail flood.

I have omitted from this e-mail all but the first e-mail in any series 
that repeated facts, opinions, or arguments. If I have omitted an e-mail 
that you think is _not_ redundant with one of those below, and that 
therefore should get its own reply, please let me know. I have also 
omitted comments that were orthogonal to the discussion, for example 
arguing about particular user agent bugs, or the details of how 
mathematical fonts might handle the PUA, as well as comments that have 
been overtaken by events in an obvious way, e.g. the relationship between 
the WHATWG and the W3C, or the likelihood of validators existing without 
DTDs. Even though I have omitted much from the responses below, I assure 
you I did read all 30000+ lines of e-mail on the subject. Again, if you 
think I missed something material to the discussion, please let me know.


On Fri, 26 May 2006, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> I am pretty convinced that the granularity of markup needed for math and 
</I>&gt;<i> the verbosity of XML necessarily lead to an XML syntax for math that is 
</I>&gt;<i> not suitable for direct human authoring. However, I think it does *not* 
</I>&gt;<i> necessarily follow that an XML syntax for math is an inherently bad 
</I>&gt;<i> idea.
</I>&gt;<i> 
</I>&gt;<i> For example, the XML syntax for RELAX NG is rather inconvenient for 
</I>&gt;<i> human authoring. You really want to write the Compact Syntax instead. 
</I>&gt;<i> However, being able to process RELAX NG as XML can be useful in some 
</I>&gt;<i> situations.
</I>&gt;<i> 
</I>&gt;<i> Likewise, one could consider LaTeX or the Mathematica language as 
</I>&gt;<i> compact authoring syntaxes for MathML. (Though that could work better if 
</I>&gt;<i> MathML was a straight bijective XML mapping of the default LaTeX math 
</I>&gt;<i> macros.)
</I>
I considered this, but in the end decided this approach was not tractable. 
Introducing yet another syntax style would likely not make things easier 
for authors overall, especially considering they would have to work out 
what it meant for CSS and scripting.


&gt;<i> XML entities on the Web are b0rked. Since MathML is not human-writable 
</I>&gt;<i> anyway, let's get rid of the entities.
</I>
I've actually just added all the thousands of MathML entities to 
text/html. It seemed easy enough to do.


On Mon, 29 May 2006, Michel Fortin wrote:
&gt;<i> 
</I>&gt;<i> One thing I know however is that the next time I'll have to put an 
</I>&gt;<i> equation on a web page, I won't go looking for a MathML editor just to 
</I>&gt;<i> be able to generate the markup, convert the page to XHTML served as 
</I>&gt;<i> application/xhtml+xml (so that it works with MathML) and ask my users to 
</I>&gt;<i> install the required plugin or web browser just to see my equation. I'll 
</I>&gt;<i> use an image: it'll be a lot simpler.
</I>
Would you use an equation editor if you could just plop the markup into 
the Web page and stop there?


&gt;<i> What Juan propose, about adding a limited number of elements to HTML for 
</I>&gt;<i> maths, actually makes sense to me, especially if you can get not-too-bad 
</I>&gt;<i> results with CSS. HTML is designed to be easy to learn and write; if we 
</I>&gt;<i> had a markup like that for mathematics which integrates easily in HTML 
</I>&gt;<i> it'd be much more used than MathML, I'm sure.
</I>
Unfortunately designing yet another language for maths seems like 
reinventing a wheel that has been invented plenty of times already. I'm 
not convinced we have the expertise to invent a mathematical markup 
language that's enough better than MathML to be worth it.


&gt;<i> But I think it would be better to develop that as a microformat[1] 
</I>&gt;<i> first, then, once it works and is well defined, see if the WhatWG is 
</I>&gt;<i> interested in integrating the microformat into HTML5 by giving it 
</I>&gt;<i> specific elements and attributes.
</I>
Well, that was in 2006, and it's 2008 now and there's no sign of such a 
microformat, so that's not an option.


On Mon, 29 May 2006, James Graham wrote:
&gt;<i> 
</I>&gt;<i> In this situation, I imagine most scientists will simply write LaTeX and 
</I>&gt;<i> use a tool to produce the output format that they desire. (La)TeX has 
</I>&gt;<i> the advantage of being a well designed, domain-specific language that 
</I>&gt;<i> allows for a very compact representation of most mathematical 
</I>&gt;<i> constructs. So, in that sense, the complexity of the language is of 
</I>&gt;<i> secondary importance to the ability to map between LaTeX and the 
</I>&gt;<i> language. This is just as well because /any/ XML based language for 
</I>&gt;<i> maths is going to suffer from substantial verbosity. For MathML, there 
</I>&gt;<i> is already a reasonable story here since Itex2MML exists, although it 
</I>&gt;<i> really needs to be integrated with tools like hyperlatex if it is ever 
</I>&gt;<i> to be widely used.
</I>

&gt;<i> I would also argue that the difficulty of providing suitable 
</I>&gt;<i> imaged-based fallback content is a massive hindrance to the adoption of 
</I>&gt;<i> mathematical markup.
</I>
The SVG and MathML solutions I've added do not support fallback 
explicitly, but you can use the lanuguage's own features along with a 
knowledge of legacy HTML parsing, as follows:

   &lt;math&gt;
    &lt;semantics&gt;
     &lt;mrow&gt;
      &lt;mn&gt;&lt;![CDATA[2]]&gt;&lt;/mn&gt;
      &lt;mo&gt;&lt;![CDATA[+]]&gt;&lt;/mo&gt;
      &lt;mn&gt;&lt;![CDATA[2]]&gt;&lt;/mn&gt;
      &lt;mo&gt;&lt;![CDATA[=]]&gt;&lt;/mo&gt;
      &lt;mn&gt;&lt;![CDATA[4]]&gt;&lt;/mn&gt;
     &lt;/mrow&gt;
     &lt;annotation-xml&gt;
      &lt;mtext&gt;&lt;img src=&quot;2p2e4.png&quot; alt=2+2=4&quot;&gt;&lt;/mtext&gt;
     &lt;/annotation-xml&gt;
    &lt;/semantics&gt;
   &lt;/math&gt;

...or:

   &lt;svg viewBox=&quot;0 0 20 20&quot;&gt;
    &lt;desc&gt;
     &lt;img src=&quot;circle-blue.png&quot; alt=&quot;o&quot;&gt;
    &lt;/desc&gt;
    &lt;circle cx=10 cy=10 r=10 fill=blue/&gt;
   &lt;/svg&gt;


&gt;<i> The problem is that it's not nearly so easy to do as he suggests. Look 
</I>&gt;<i> at the test page - some of the rendering is awful (the radical signs in 
</I>&gt;<i> particular stand out here). And, despite being sold as a simpler 
</I>&gt;<i> solution than a MathML implementation, it works in about 1% of UAs (by 
</I>&gt;<i> number of users) compared to &gt; 95% that have a story for native or 
</I>&gt;<i> plugin-based MathML. The language that they have used is also overly 
</I>&gt;<i> simplistic. For example one would expect most text in a formula to be in 
</I>&gt;<i> italics except where actual words were being used in which case the text 
</I>&gt;<i> should be roman. So you need an additional element to distinguish text 
</I>&gt;<i> from ordinary numbers. Add a few more considerations like that and you 
</I>&gt;<i> soon have a language that's just as painful to hand-author as MathML 
</I>&gt;<i> (which, I agree, is far from perfect) and little support among end 
</I>&gt;<i> users.
</I>
Indeed.


On Mon, 29 May 2006, Mihai Sucan wrote:
&gt;<i> 
</I>&gt;<i> IMHO, a good implementation for any math-related web technology must not 
</I>&gt;<i> ask the user to download fonts, to install some plugin or anything 
</I>&gt;<i> similar. I do not like Gecko for the fact it asks me to download 
</I>&gt;<i> mathematical fonts. It should just do as Opera does with their voice 
</I>&gt;<i> interactivity module: it asks for permission to download the required 
</I>&gt;<i> files for that specific functionality. It does automatically download 
</I>&gt;<i> and install everything required. Same should be done by Gecko.
</I>
Yeah, I agree. That's rather out of scope here though.


&gt;<i> Math WebSearch - A semantic search engine
</I>&gt;<i> <A HREF="http://search.mathweb.org/">http://search.mathweb.org/</A>
</I>
I sure hope that search gets more usable. I don't think you could get a 
highschool kid to find maxwell's equations using that. Meanwhile:

   <A HREF="http://search.yahoo.com/search?p=maxwell%27s+equations">http://search.yahoo.com/search?p=maxwell%27s+equations</A>
   <A HREF="http://www.google.com/search?q=maxwell's+equations">http://www.google.com/search?q=maxwell's+equations</A>

...seems to work ok.


On Tue, 30 May 2006, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> I think the following could be technically feasible:
</I>&gt;<i> 
</I>&gt;<i> 1) Author writes iTeX code as the text content of an &lt;f&gt; element for 
</I>&gt;<i> inline formulae (and &lt;df&gt; for display formulae; two elements to cut down 
</I>&gt;<i> on verbosity of attributes).
</I>&gt;<i> 
</I>&gt;<i> 2) The browser takes the textContent of the &lt;f&gt; element and the computed 
</I>&gt;<i> style for the list of fonts, the text color and the font size.
</I>&gt;<i> 
</I>&gt;<i> 3) The browser feeds this data to a sandboxed, pruned and heavily 
</I>&gt;<i> macro-deprived pdfLaTeX engine that renders the formula using the font 
</I>&gt;<i> properties as if the formula was a $...$ formula on an infinite line. 
</I>&gt;<i> (This means that line breaks cannot occur in formulae. Consider this a 
</I>&gt;<i> good enough approach for feasibility.)
</I>&gt;<i> 
</I>&gt;<i> 4) The pdfLaTeX engine hands back a PDF with a bounding box indicating 
</I>&gt;<i> the bounds of the rendering and the position of the baseline.
</I>&gt;<i> 
</I>&gt;<i> 5) The browser's CSS formatter replaces the box of the &lt;f&gt; element with 
</I>&gt;<i> a replaced element box of the size of the PDF bounding box and aligns 
</I>&gt;<i> the baseline of the replacement box with the baseline of the surrounding 
</I>&gt;<i> CSS line box.
</I>&gt;<i> 
</I>&gt;<i> 6) When it is time to draw, the browser draws the drawing operations 
</I>&gt;<i> encapsulated in the PDF into its underlying vector graphics pipeline.
</I>&gt;<i> 
</I>&gt;<i> Obviously, architecturally this would be a departure from DOM and CSS, 
</I>&gt;<i> but it could work. And because I guess the implementation would take 
</I>&gt;<i> more than a couple of days, I am not volunteering to prototype this. :-)
</I>
I think this would qualify as a &quot;hack&quot;. And not in the good sense. :-)


On Mon, 29 May 2006, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> Adding math to HTML5 would broaden the scope of HTML5. A broader scope 
</I>&gt;<i> translates to more editorial work and more implementation work.
</I>
From the spec's point of view, that's one of the advantages of reusing 
MathML.


On Thu, 1 Jun 2006, James Graham wrote:
&gt;<i>
</I>&lt; The majority of
&gt;<i> people who publish mathematical content know one or zero languages for 
</I>&gt;<i> typesetting mathematics. Invariably that one language is LaTeX (they may 
</I>&gt;<i> [know] zero if they rely on a tool such as Microsoft Word. For example 
</I>&gt;<i> Blackwell publishing will accept submissions only in LaTeX or Microsoft 
</I>&gt;<i> Word format. arXiv.org will only accept submissions in LaTeX format. The 
</I>&gt;<i> Astrophysics Journal will accept LaTeX (recommended), MS Word or 
</I>&gt;<i> Wordperfect. I could go on but at least in academic fields, LaTeX is 
</I>&gt;<i> either the only format accepted for publication or the preferred format.
</I>&gt;<i> 
</I>&gt;<i> Note also that very very few people have the slightest interest in the 
</I>&gt;<i> publishing process itself. They simply wish to achieve high quality 
</I>&gt;<i> results at a minimum of effort. This means that they will not be 
</I>&gt;<i> prepared to invest any time in learning a new language, particularly one 
</I>&gt;<i> that is not already widely accepted (chicken and egg problem) or is 
</I>&gt;<i> harder to use than the language they are familiar with. You may think I 
</I>&gt;<i> am overstating this but I disagree - bear in mind that a significant 
</I>&gt;<i> fraction of astronomical (chosen merely because it is the field I know 
</I>&gt;<i> best) software is written in Fortran 77. For many of these people almost 
</I>&gt;<i> 30 years of language design has never happened.
</I>&gt;<i> 
</I>&gt;<i> So, in general the people likely to be publishing mathematical content 
</I>&gt;<i> to the internet have _no_ interest in writing their content in any 
</I>&gt;<i> format other than LaTeX and especially not to a verbose format of the 
</I>&gt;<i> type that fits the XML data model. This is why the web is liberally 
</I>&gt;<i> sprinkled with the ugly gif output of latex2html. If we want this 
</I>&gt;<i> situation to change, the _only_ solution is to allow LaTeX as a document 
</I>&gt;<i> creation format. If, or whatever reason MathML is a poor target language 
</I>&gt;<i> for TeX-&gt;foo converters then maybe we should talk about improving the 
</I>&gt;<i> situation. But authors _will_not_ learn anything other than LaTeX.
</I>
Since we cannot make these authors use anything but LaTeX, and since HTML 
isn't LaTeX, we have to assume the existence of a tool to solve this at 
some point anyway. Is relying on tools for LaTeX to MathML conversion 
acceptable? Do such tools exist? Are they good?


&gt;<i> Given that we cannot expect authors to create mathematical content 
</I>&gt;<i> directly in an XML language, the verbosity of the output language is 
</I>&gt;<i> almost irrelevant - it should be easy to process by the computer rather 
</I>&gt;<i> than easy to read (in the same way that postscript, say, is suboptimal 
</I>&gt;<i> for direct authoring but is still a useful output format).
</I>
Fair enough.


On Wed, 7 Jun 2006, Martin Atkins wrote:
&gt;<i> 
</I>&gt;<i> It seems to me that a good path would be to fix up CSS's shortcomings 
</I>&gt;<i> (which have been discussed at length in this thread) so that it is 
</I>&gt;<i> possible to specify math rendering with CSS.
</I>
That's out of the scope of this group, and unfortunately the CSS group has 
failed to make any progress in this area in the past few years.


&gt;<i> I agree that it'd be worthwhile to do tag implication though, which 
</I>&gt;<i> admittedly is not an option if MathML support is just a stylesheet.
</I>
I tried this, but couldn't really get a good result without obscene levels 
of complexity.


On Fri, 9 Jun 2006, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> If the WHAT WG defines a way for serializing MathML as text/html, I 
</I>&gt;<i> think it should be (at least for conforming cases) a pure alternative 
</I>&gt;<i> infoset serialization for a subset of possible infosets (dirty words, I 
</I>&gt;<i> know) as opposed to just being something similar but subtly different. 
</I>&gt;<i> That is, I think conforming documents should be losslessly 
</I>&gt;<i> reserializable as XML *1.0* and the DOM nodes for the math stuff should 
</I>&gt;<i> report the uncolonified element name in lower case as localName and the 
</I>&gt;<i> MathML namespace URI as namespaceURI. (I guess tagName should do what is 
</I>&gt;<i> most compatible with MathPlayer.)
</I>
Does what the spec says satisfy this?


On Sun, 4 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A> wrote:
&gt;<i> 
</I>&gt;<i> Not so simple if you need add maintenance, search, storage, printing, 
</I>&gt;<i> and accessibility items to the list of requirements.
</I>
MathML can be searched, stored, printed, and is apparently accessible. It 
isn't clear what can be done to address maintainability in any math 
language that is tag-based.


&gt;<i> With more sophisticated design of CSS stylesheet and with more powerful 
</I>&gt;<i> CSS engines and good Unicode fonts one could achieve TeX quality output.
</I>
I do not believe this is realistic, and a number of experts in math 
typography have reported similar concerns.


&gt;<i> I proven that MathML code generated by IteX tool is very bad in several 
</I>&gt;<i> occasions (in my weblog and in the official MathML mailing list).
</I>
Are these bugs, or design failings? i.e. could this be fixed?


&gt;<i> The approach was designed to be minimalist. Of course it can be 
</I>&gt;<i> improved. Moreover, radicals (looking better than in Firefox with native 
</I>&gt;<i> MathML support) could be best rendered via future CSS embellishments for 
</I>&gt;<i> math.
</I>
Unfortunately such CSS improvements are not forthcoming.


&gt;<i> Original approach works in many rendering engines including off-line 
</I>&gt;<i> engines as Prince. The approach has been recently generalized to work 
</I>&gt;<i> also with several XSL-FO formatters (MathML does not work in FO).
</I>
XSL:FO is a non-issue on the Web, and Prince supports MathML natively. The 
concern of the CSS approach working in fewer deployed seats than native 
MathML support is very real.


&gt;<i> Prince developers fixed bug in some few days, whereas they were unable 
</I>&gt;<i> to integrate MathML in the rendering engine in despite of many efforts.
</I>
This is apparently no longer an issue.


On Sun, 4 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A> wrote:
&gt;<i> 
</I>&gt;<i> 1) MathML is incompatible with HTML, CSS, and DOM and do not achieve 
</I>&gt;<i> none of original goals. Support in browsers is weak because 
</I>&gt;<i> specification is not solid.
</I>
These statements appear to be untrue, as far as I can tell.


&gt;<i> 2) We can generate alternative mathematical markup. What one? XML-MAIDEN 
</I>&gt;<i> is one option, try to offer a HTML version of SGML 12083 math is other, 
</I>&gt;<i> a mixture of both, et cetera. That is to be debated.
</I>
None of those options have fared any better than MathML, it seems. 
Certainly MathML seems to be the most common tag-based mathematical markup 
language on the Web.


&gt;<i> After 10 years most of browsers ignore MathML because difficulties with 
</I>&gt;<i> specification.
</I>
Actually it seems to be more a matter of prioritisation than anything 
else. I see no reason to believe any other markup language or set of CSS 
properties for maths would fare any better.


&gt;<i> Moreover, MathML is not completely DOM compatible, needs of namespaces, 
</I>&gt;<i> and of xml and deal WS in a different way that rest of XML parsing 
</I>&gt;<i> engines.
</I>
This doesn't appear to be the case; if you could clarify your concerns it 
would be very helpful.


On Thu, 8 Jun 2006, &#216;istein E. Andersen wrote:
&gt;<i>
</I>&gt;<i> Let me highlight a few requirements that probably must be satisfied in 
</I>&gt;<i> order to avoid a new failure.
</I>&gt;<i> 
</I>&gt;<i> 1) Do not encode every tiny semantic detail explicitly
</I>&gt;<i> 
</I>&gt;<i> As Henri Sivonen put it: &#194;&#171;[I]t is futile to insist on semantics that 
</I>&gt;<i> you can't pull out of LaTeX as it is normally authored.&#194;&#187; I would like 
</I>&gt;<i> to use a slightly different wording: It is futile to insist on encoding 
</I>&gt;<i> anything that does not change the appearance of a formula as it is 
</I>&gt;<i> written on a blackboard or printed in a book.
</I>&gt;<i> 
</I>&gt;<i> This point can be illustrated by the two similar-looking formulae a) 
</I>&gt;<i> $\sin^2 (2p+1)x$ and b) $f^2(2p+1)x$. Mathematicians whom I know would 
</I>&gt;<i> evaluate a) as {sin[(2p+1)*x]}^2 and b) as f[f(2p+1)]*x.
</I>&gt;<i> 
</I>&gt;<i> Rules to map between meaning and form cannot be made to work reliably in 
</I>&gt;<i> all cases. Brevity is queen, and conventions may differ between 
</I>&gt;<i> different fields of mathematics.
</I>&gt;<i> 
</I>&gt;<i> The point already made about $dt^2$ meaning (dt)^2 being encoded to mean 
</I>&gt;<i> d(t^2) in MathML is just another example of what happens when there is 
</I>&gt;<i> lack of agreement between what the author wants (i.e. to make the 
</I>&gt;<i> formula look nice on the web so that other people can read it) and what 
</I>&gt;<i> the format tries to enforce (i.e. to assure that encoding of a formula 
</I>&gt;<i> be sufficiently semantical for a computer theoretically to be able to 
</I>&gt;<i> evaluate it).
</I>&gt;<i> 
</I>&gt;<i> No semantics is clearly better than wrong semantics, and correct 
</I>&gt;<i> semantics combined with nice presentation is probably not feasible 
</I>&gt;<i> without encoding everything twice. After all, most authors would clearly 
</I>&gt;<i> want to use the same encoding for the superscripts in e.g. $x^2 = 
</I>&gt;<i> x\times x$, $f^2(x) = f[f(x)]$, $f^{(4)}(x) = \frac{d^4}{dx^4}f(x)$, and 
</I>&gt;<i> $x_i^{(j)} = x_{i,j}$. Anything else will undoubtedly lead to erratic 
</I>&gt;<i> encoding, and what is a poor author supposed to do when he wants to use 
</I>&gt;<i> e.g. a superscript in a way for which no encoding exists?
</I>&gt;<i> 
</I>&gt;<i> Finally, the encoding of semantics in mathematical formulae probably 
</I>&gt;<i> does not feel more necessary to most people who write and read them than 
</I>&gt;<i> the encoding of the particular meaning of an ambiguous word like `can', 
</I>&gt;<i> albeit a differentiation between the modal verb meaning `be able to', 
</I>&gt;<i> the noun denoting a container, and the transitive verb meaning `put into 
</I>&gt;<i> a can' could potentially be helpful for applications like grammar 
</I>&gt;<i> checking and text retrieval.
</I>&gt;<i>
</I>&gt;<i> 2) Fight verbosity
</I>&gt;<i> 
</I>&gt;<i> The reasons for TeX's undeniable success are many, but one of them might 
</I>&gt;<i> be its concise syntax. People who appreciate the aesthetics of 
</I>&gt;<i> mathematics and are used to make the distinction between $f$ and $F$ or 
</I>&gt;<i> between $\phi$, $\varphi$ and $\Phi$ certainly have no difficulty 
</I>&gt;<i> distinguishing \big from \Big. More importantly, the amount of mark-up 
</I>&gt;<i> needed to encode a line of mathematics is enormous compared to what is 
</I>&gt;<i> necessary for a line of running text. Consequently, each mark-up element 
</I>&gt;<i> must be kept as short as possible.
</I>&gt;<i> 
</I>&gt;<i> It may be true that there will always be more &lt;p&gt;'s than &lt;formula&gt;'e out 
</I>&gt;<i> there; however, those using mathematics are likely to use it quite 
</I>&gt;<i> heavily, which makes &lt;m&gt; (for mathematics, or &lt;f&gt; if the &lt;m&gt; tag cannot 
</I>&gt;<i> be reassigned), &lt;frac&gt;2&lt;den&gt;3&lt;/frac&gt; and &lt;root&gt;3&lt;of&gt;125&lt;/root&gt; clearly 
</I>&gt;<i> better suited than &lt;formula&gt;, &lt;fraction&gt;2&lt;denominator&gt;3&lt;/fraction&gt; and 
</I>&gt;<i> &lt;radical&gt;3&lt;radicand&gt;125&lt;/radical&gt;.
</I>
While I agree with the sentiment here, I'm not sure what to do about it. I 
think that the disadvantages of MathML are outweighed by its benefits 
relative to the alternatives, and I don't think we should profile MathML o 
resolve this particular issue, since that would bring costs of its own.


On Fri, 2 Jun 2006, H&#229;kon Wium Lie wrote:
&gt;<i>
</I>&gt;<i> Also sprach White Lynx:
</I>&gt;<i> 
</I>&gt;<i> &gt; Making decision is up to WHAT WG, you can follow W3C line that so far 
</I>&gt;<i> &gt; brought nothing good to scientific web (which turned into bunch of 
</I>&gt;<i> &gt; PDF/PS/DJVU files) or (even without much afforts) you can solve 
</I>&gt;<i> &gt; longstanding problem of embedding mathematics in HTML. If WHAT WG will 
</I>&gt;<i> &gt; pay attention to interests of mathematical community, we are ready to 
</I>&gt;<i> &gt; do essential part of technical work needed to incorporate mathematical 
</I>&gt;<i> &gt; markup in HTML 5, like writing DTDs, default style sheets, 
</I>&gt;<i> &gt; documentation, test cases etc.
</I>&gt;<i> 
</I>&gt;<i> I think you make a compelling case for adding math to HTML the simple 
</I>&gt;<i> way. Personally, I'm open to adding it to HTML5. How much would it add 
</I>&gt;<i> to the specification?
</I>
A whole new math language would probably add quite a lot. Adding MathML, 
as it happens, adds very little to the spec. :-)

The same cannot be said of implementations, of course.


On Fri, 2 Jun 2006, H&#229;kon Wium Lie wrote:
&gt;<i>
</I>&gt;<i> The goal is not to replace MathML. At this point there isn't much to 
</I>&gt;<i> replace -- MathML isn't found in HTML in the wild. Aslo, at the spec 
</I>&gt;<i> level, I believe the two can co-exist just like WebForms and XForms can 
</I>&gt;<i> co-exist.
</I>
I think MathML is actually found more than you might expect.


On Fri, 2 Jun 2006, White Lynx wrote:
&gt;<i> 
</I>&gt;<i> In ISO 12083 Electronic Manuscript Format description of mathematical 
</I>&gt;<i> markup occupies about 7 pages, in our case I expect specification to be 
</I>&gt;<i> slightly larger (let's say about 10-15 pages). It should not take too 
</I>&gt;<i> much space as presentational burden is passed to style sheets, so 
</I>&gt;<i> detailed formatting instructions will not be part of specification. Size 
</I>&gt;<i> of extra DTD will be about 4K in case of plain DTD, if modularized in 
</I>&gt;<i> XHTML 1.1 fashion it will be larger (about 10K).
</I>
Sadly, even if we went this route, we could not simply leave it up to 
the style sheet for the rendering. We would still need to define the 
detailed rendering semantics for non-CSS UAs, and for ATs. We also have to 
define error handling. I think &quot;15 pages&quot; is optimistic.


On Fri, 2 Jun 2006, White Lynx wrote:
&gt;<i>
</I>&gt;<i> It is the matter of implementation, we could draw radical signs with SVG 
</I>&gt;<i> but using borders only is more reliable at the moment. In any case 
</I>&gt;<i> presentation should not be hardcoded in specification.
</I>
SVG radicals aren't typographically acceptable either. You really want to 
use fonts for this.


On Fri, 2 Jun 2006, Michel Fortin wrote:
&gt;<i>
</I>&gt;<i> But it'd certainly be a lot easier for browser implementors to add some 
</I>&gt;<i> math-specific CSS properties for the missing parts than to create a full 
</I>&gt;<i> MathML implementation.
</I>
It's not clear that this is indeed the case. CSS is a generic lanugage 
that would end up applying to all vocabularies, whereas MathML is a 
specific language with a specific domain. CSS properties interact with 
each other in ways that make new CSS features far more complex than MathML 
features need be.


On Fri, 9 Jun 2006, Stefan G&#246;ssner wrote:
&gt;<i>
</I>&gt;<i> I would highly appreciate a lightweight, pragamatic solution for doing 
</I>&gt;<i> math on the web in a convenient way.
</I>
We now have MathML in text/html. Does this resolve your desire?


&gt;<i> This solution could parallel MathML the same way as Canvas parallels 
</I>&gt;<i> SVG. And that does not necessarily mean, it should be javascript or 
</I>&gt;<i> Latex based -- though it might be.
</I>
I'm not sure what an immediate-mode math API would look like!


&gt;<i> Personally I like a minimal vocabulary, which allows declarative math markup
</I>&gt;<i> and integrates well with HTML.
</I>
I'm not sure that it is possible to have a declarative, DOM-based language 
for maths that is minimal.


&gt;<i> The proposal from George, refined by Michel currently being discussed 
</I>&gt;<i> here, is definitely a good start.
</I>
It isn't clear that that proposal was any more minimal than MathML, 
really.



On Fri, 9 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A> wrote:
&gt;<i> Ian Hickson wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I would be very cautious about introducing an entirely new language to 
</I>&gt;<i> &gt; do this (even if it is &quot;just&quot; an extension of HTML4). For something as 
</I>&gt;<i> &gt; big as Mathematics, we want to simply re-use an existing language, not 
</I>&gt;<i> &gt; invent a new one. Inventing a new language for encoding content with 
</I>&gt;<i> &gt; as wide a problem-space as mathematics would require months, as well 
</I>&gt;<i> &gt; as the time of domain experts, etc. This work has already been done, 
</I>&gt;<i> &gt; e.g. in ISO12083, MathML, LaTeX, and other such languages.
</I>&gt;<i> 
</I>&gt;<i> Nobody want reinvent the wheel, but people reuse languages when these 
</I>&gt;<i> *work*.
</I>
It seems to me that MathML has had more success than your own proposal. I 
wouldn't argue against MathML on the basis of success in the market if I 
were you. :-) After all, even Microsoft Office supports MathML.



On Fri, 9 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A> wrote:
&gt;<i> Ian Hickson wrote:
</I>&gt;<i> &gt; I am not at all convinced that it makes any sense to rely on CSS to 
</I>&gt;<i> &gt; render mathematics. CSS simply doesn't have the expressive power to 
</I>&gt;<i> &gt; obtain acceptably good mathematical typography, and adding features to 
</I>&gt;<i> &gt; CSS to obtain this level of expressiveness would require a huge 
</I>&gt;<i> &gt; specification with such a small target domain than nobody would 
</I>&gt;<i> &gt; implement it.
</I>&gt;<i> 
</I>&gt;<i> MathML versions changed to embrace more and more CSS code whereas 
</I>&gt;<i> deprecating early MathML markup. A pair of months ago, one of big guys 
</I>&gt;<i> of MathML asked that changes would be done in MathML for CSS compliance, 
</I>&gt;<i> and exists interest in a special mathematical module in CSS.
</I>&gt;<i> 
</I>&gt;<i> So far as I know the Math CSS module has got problems due to incorrect 
</I>&gt;<i> design of MathML and apparently has been stopped (maybe waiting a mayor 
</I>&gt;<i> third revision of MathML markup?).
</I>&gt;<i> 
</I>&gt;<i> However, for you, CSS do not makes any sense...
</I>
I stand by my comments above, yes. Your statements above don't rebut them.


&gt;<i> You claim that does not has expressive power, but you do not support 
</I>&gt;<i> your claims with facts, and you simply fails to show us where IS the 
</I>&gt;<i> MathML good typography.
</I>
MathML doesn't intrinsically have good or bad mathematical typography, as 
it describes presentational intent, not precise rendering rules. While 
relying on CSS cannot achieve good results, a native MathML renderer would 
be technically capable of good results.


&gt;<i> I have provided you a sample of many test (even the most basic) from the 
</I>&gt;<i> official MathML test suite are not passed by Mozilla Firefox 1.0, the 
</I>&gt;<i> only with native suport after of 10 years.
</I>
As others have pointed out, your comparison was based on a flawed setup.


&gt;<i> The adding feature are still needed and there is planned a special CSS 
</I>&gt;<i> math module for usage with MathML. You worry about adding feature to CSS 
</I>&gt;<i> for math but this has been scheduled in MathML but you simply ignore 
</I>&gt;<i> it...
</I>
When I wrote those comments, I was aware of the plans for a CSS module, as 
well as the likelihood of those plans ever bearing fruit. I think the past 
two years with zero progress speak for themselves on this matter.


But this is all moot. The whole point is that we _cannot_ rely on CSS, as 
not all browsers support CSS. CSS is intended to be an optional 
technology, one that can be overridden, disabled, changed by users. We 
need a language that works whether CSS is supported or not.


&gt;<i> I do not see tools rejecting it masively, authors ignoring it. I see 
</I>&gt;<i> browser developers implementing it. I see it working in websites. Could 
</I>&gt;<i> you point a single site using MathML (and I said &quot;using&quot; not 
</I>&gt;<i> &quot;misusing&quot;).
</I>
Free Patents Online is probably the biggest user.


On Sat, 10 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A> wrote:
&gt;<i> 
</I>&gt;<i> Also never Microsoft did an official position regarding his lack of 
</I>&gt;<i> interest in mathematics, but many folks are claiming the contrary as 
</I>&gt;<i> excuse on why MathML is not being popular.
</I>
Microsoft seems to be supporting MathML, at least as an interchange 
format on the Windows clipboard.


On Mon, 19 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A> wrote:
&gt;<i>
</I>&gt;<i> [Problems with using MathML:]
</I>&gt;<i> 
</I>&gt;<i> 1) One recovers all difficulties and errors of MathML desing.
</I>
These seem to have mostly been resolved, and MathML undergoes continuous 
maintenance, so it will likely continue to get better.


&gt;<i> 2) One recovers a CSS, DOM, and even XML unfriendly markup language.
</I>
I don't see how MathML is CSS, DOM, or XML unfriendly. It fits well 
within the platform, as far as I can tell.


&gt;<i> 3) The main official guidelines of the WHATWG are violated.
</I>
I don't see how. Indeed, compatibility was a key component of the design 
decisions, as described above.


&gt;<i> 4) Ian specific proposal is MathML incompatible and probably would add a 
</I>&gt;<i> exponential difficulty to realistic implementation in browsers than 
</I>&gt;<i> original MathML has been. Just for illustration let me do some 
</I>&gt;<i> annotations:
</I>&gt;<i> 
</I>&gt;<i> What when 1 is not &lt;mn&gt;1&lt;/mn&gt;?
</I>&gt;<i> 
</I>&gt;<i> What about 0xFFEF, MCMLXIX, and twenty one? are parsed to numbers or not?
</I>&gt;<i> 
</I>&gt;<i> What when + or = are not operators?
</I>&gt;<i> 
</I>&gt;<i> How would &lt;mrow&gt;d x&lt;/mrow&gt; be parsed? And &lt;mrow&gt;dx&lt;/mrow&gt; and &lt;mrow&gt;D
</I>&gt;<i> x&lt;/mrow&gt;?
</I>&gt;<i> 
</I>&gt;<i> How is 3,14 parsed? And 3 , 14? And 3, 14?
</I>&gt;<i> 
</I>&gt;<i> How is supposed that we encode \dot{q} in Ian proposal?
</I>&gt;<i> 
</I>&gt;<i> How is parsed the string &quot;maps to&quot;?
</I>&gt;<i> 
</I>&gt;<i> &lt;msqrt&gt;- 1&lt;/msqrt&gt;
</I>&gt;<i> 
</I>&gt;<i> and
</I>&gt;<i> 
</I>&gt;<i> &lt;msqrt&gt;&lt;mrow&gt;- 1&lt;/mrow&gt;&lt;/msqrt&gt;
</I>&gt;<i> 
</I>&gt;<i> are to be treated as equivalent or no?
</I>&gt;<i> 
</I>&gt;<i> &quot;- 1&quot; and &quot;-1&quot; are equivalent or no?
</I>&gt;<i> 
</I>&gt;<i> What about &lt;mrow&gt;a b&lt;/mrow&gt; and &lt;mrow&gt;a &lt;mi&gt;b&lt;/mi&gt;&lt;/mrow&gt;? And
</I>&gt;<i> &lt;mrow&gt;a&lt;mi&gt;b&lt;/mi&gt;&lt;/mrow&gt;?
</I>&gt;<i> 
</I>&gt;<i> How would one deal with &quot; T&quot; vs. &quot;&amp;nbsp;T&quot;?
</I>&gt;<i> 
</I>&gt;<i> Ian said &quot;Maybe we could imply one of [&amp;#x2062;] between pairs of terms in
</I>&gt;<i> &lt;mrow&gt;s that don't have any &lt;mo&gt;s.&quot; Then would &lt;mrow&gt;L &amp;rho;&lt;/mrow&gt; work
</I>&gt;<i> as &lt;mrow&gt;L &amp;#x2062; &amp;rho;&lt;/mrow&gt;?
</I>&gt;<i> 
</I>&gt;<i> and &lt;mrow&gt; 5 &lt;/mrow&gt;? Equivalent to &lt;mn&gt;5&lt;/mn&gt; or to &lt;mrow&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/mrow&gt;?
</I>
These problems are all resolved in the current proposal.


&gt;<i> How is the problem of entities solved?
</I>
They are supported in the current proposal.


On Mon, 19 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A> wrote:
&gt;<i> 
</I>&gt;<i> Ok, people would freely choose languages in function of strengs and 
</I>&gt;<i> weakness. XML-MAIDEN, MathML, OpenMath, and others would compete in an 
</I>&gt;<i> equal footing (my experience is many people think that MathML is the 
</I>&gt;<i> _only_ approach to mathematical markup).
</I>
Well, they've had the past two years to compete... and MathML came in 
second, after LaTeX. So. MathML it is (given that LaTeX doesn't really 
work in the Web platform environment).


On Mon, 19 Jun 2006, Michel Fortin wrote:
&gt;<i> 
</I>&gt;<i> So I propose that HTML 5 adds fractions, and only fractions. I think 
</I>&gt;<i> there is a good consensus on how to markup a fraction. I believe 
</I>&gt;<i> fractions can also be somewhat useful outside the realm of mathematical 
</I>&gt;<i> formulas. And a fraction construct would encourage implementors to fix 
</I>&gt;<i> their inline-block and vertical alignment CSS bugs, opening the door to 
</I>&gt;<i> more CSS-based mathematical markup in the future.
</I>
This became:

   &lt;math&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;

...which isn't as simple as it could be, but it's not as bad as it could 
be either (e.g. it doesn't have ugly namespace declarations).


On Tue, 20 Jun 2006, White Lynx wrote:
&gt;<i> Ian Hickson wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; There is nothing to read between my lines. I am being as honest and 
</I>&gt;<i> &gt; candid as possible. There is no conspiracy here. I have given you the 
</I>&gt;<i> &gt; exact reasoning I have used, I have suggested how you can move 
</I>&gt;<i> &gt; forward. I am being quite sincere.
</I>&gt;<i> 
</I>&gt;<i> Very well. In this case please make one small step to show that WHATWG 
</I>&gt;<i> HTML is open to scientific content and add just four elements to HTML5 
</I>&gt;<i> (feel free to use different element names if nesessary): &quot;formula&quot;, 
</I>&gt;<i> &quot;fraction&quot;, &quot;num&quot;, &quot;den&quot;. It will not take much time and will work even 
</I>&gt;<i> in MSIE:
</I>&gt;<i> 	<A HREF="http://www.geocities.com/chavchan/frac/fractions.xml">http://www.geocities.com/chavchan/frac/fractions.xml</A>
</I>&gt;<i> 
</I>&gt;<i> If this step will be made we will assume that WHATWG is ready for 
</I>&gt;<i> constructive dialog, if however we will hear arguments like automated 
</I>&gt;<i> splitting of long fractions across lines (never seen something like that 
</I>&gt;<i> even in TeX) is not supported therefore markup for fractions is useless 
</I>&gt;<i> or something similar then I think discussing issue with WHATWG further 
</I>&gt;<i> does not make any sense.
</I>
We ended up with full MathML support, so the above is now redundant.


On Tue, 20 Jun 2006, Robert O'Callahan wrote:
&gt;<i>
</I>&gt;<i> Since we already have a MathML implementation --- which works fairly 
</I>&gt;<i> well in my experience --- I think it makes more sense from our point of 
</I>&gt;<i> view to fix/improve MathML than to deal with new CSS extensions to get 
</I>&gt;<i> decent rendering. MathML's purported incompatibilities with DOM and CSS 
</I>&gt;<i> are not serious from an implementor's point of view, at least no worse 
</I>&gt;<i> than lots of other CSS-unfriendly content we have to deal with. I hope 
</I>&gt;<i> that the fonts issue gets better when comprehensive STIX fonts are 
</I>&gt;<i> freely available online and we can automatically download them whenever 
</I>&gt;<i> they're needed.
</I>
This looks like it is going to be ready relatively soon, which will be 
great.


&gt;<i> I strongly agree with Hixie and others that a new math dialect for HTML 
</I>&gt;<i> needs to be proven before it can be standardized as *the* preferred 
</I>&gt;<i> solution for mathematics in HTML. If MathML is as bad --- and CSS2.1 as 
</I>&gt;<i> adequate --- as some say, then it should be easy to create a microformat 
</I>&gt;<i> that becomes more popular than MathML. At that point there is a much 
</I>&gt;<i> stronger case for inclusion.
</I>
Indeed. Sadly it seems that this was not carried out, and so we have 
nothing to base an evaluation of that proposal on. It's somewhat of an 
argument against the proposal, in fact. This is one reason I have 


On Tue, 20 Jun 2006, Alexey Feldgendler wrote:
&gt;<i> 
</I>&gt;<i> For math, verbosity of a language is very important. Because a 
</I>&gt;<i> microformat will be significantly more verbose than an HTML extension 
</I>&gt;<i> would be, it's doubtful whether such microformat can become popular, 
</I>&gt;<i> even if an HTML extension would.
</I>
Sure, but that could be taken into account in the evaluation.


On Tue, 20 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A> wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; Yes. Canvas was only added once Apple proved it was implementable and 
</I>&gt;<i> &gt; popular, and had documented it.
</I>&gt;<i> 
</I>&gt;<i> Popular in the web?
</I>
Popular with vendors, in this particular case.


&gt;<i> Ok, but I was able to read betweeen lines. For example, your initial 
</I>&gt;<i> silence when the thread on math was launched indicated to me that maybe 
</I>&gt;<i> you were waiting it automatically closed, but did not and obtained mayor 
</I>&gt;<i> audience obligating to you to add messages.
</I>
Since I reply to every e-mail sent to the list, ignoring e-mails doesn't 
work very well for me. :-)


On Wed, 21 Jun 2006, White Lynx wrote:
&gt;<i> 
</I>&gt;<i> Basically there is nothing in proposal that could be difficult to 
</I>&gt;<i> implement, morover on first stage XHTML with fallback style sheets can 
</I>&gt;<i> work without any kind of native support. So implementation costs, that 
</I>&gt;<i> in any case are much lower then alterenatives, are unlikely to be an 
</I>&gt;<i> obstackle.
</I>&gt;<i> 
</I>&gt;<i> Look at proposal once again:
</I>&gt;<i> 
</I>&gt;<i> 1. formula, dformula, dformgrp - just containers, no problems.
</I>&gt;<i> 2. sub, sup - already exist nothing to add
</I>&gt;<i> 3. stack - requires support for inline-blocks. No problems in MSIE, Opera, Prince. 
</I>&gt;<i> Safari and Mozilla will have to fix bug affecting inline-blocks.
</I>&gt;<i> 4. fraction, num, den - the same as stack.
</I>&gt;<i> 5. over, obase, top, overbrace - the same as stack
</I>&gt;<i> 6. under, ubase, bottom, underbrace - if content of ubase is restricted to PCDATA then the same as stack,
</I>&gt;<i> otherwise either inline-tables (work in Opera, Prince, require small bug fix in Safari) or 
</I>&gt;<i> inline-blocks and CSS3 inline-block-align properties are needed. So in case inline-tables will 
</I>&gt;<i> be considered unrealistic elements still can be retained provided that content of ubase is restricted
</I>&gt;<i> to PCDATA, in future this constraint can be easily eliminated.
</I>&gt;<i> 7. opgrp, op, uli, llim, limits - the same as stack
</I>&gt;<i> 8. radical, radix, radicand - requires inline-tables. Element is safe to omit as equivalent fuctionality
</I>&gt;<i> is available in power notations. So in case inline-tables will be considered unrealistic element may be omitted.
</I>&gt;<i> 9. sqrt - requires inline-blocks, maybe image borders, or SVG backrgound image. Element is safe to omit as equivalent fuctionality
</I>&gt;<i> is available in power notations.
</I>&gt;<i> 10. fence, fenced, marker, submark - the same as stack. Support for image borders or SVG backrgound images would be useful.
</I>&gt;<i> 11. matrix, det, choose, cases, case, row, entry, cell, value, scope - formally it requires inline-tables, but necessary functionality 
</I>&gt;<i> exists in all browsers in a form of (X)HTML table with display set to inline, inline-table or -moz-inline-box.
</I>
This is no simpler than MathML for the same level of support, as far as I 
can tell.


On Mon, 9 Oct 2006, Simon Pieters wrote:
&gt;<i> 
</I>&gt;<i> If I understand it correctly Ian's proposal is to have a list of 
</I>&gt;<i> elements that are put in the MathML namespace when parsing. I have a 
</I>&gt;<i> slightly different proposal which I'll describe below:
</I>&gt;<i> 
</I>&gt;<i> Instead of having a list of elements that are put in the MathML 
</I>&gt;<i> namespace, &lt;math&gt; is a sort of namespace- and parsing scoping element so 
</I>&gt;<i> that it and all of its descendants are in the MathML namespace, and also 
</I>&gt;<i> that all tags inside &lt;math&gt; are parsed as any other &lt;xyz&gt; tags except 
</I>&gt;<i> for start tags for empty MathML elements. E.g., &lt;none&gt; inside &lt;math&gt; is 
</I>&gt;<i> an empty element but outside it is not; &lt;br&gt; is not an empty element 
</I>&gt;<i> inside &lt;math&gt;.
</I>&gt;<i> 
</I>&gt;<i> For setting .innerHTML on MathML elements, &quot;root&quot; would be a new &lt;math&gt; 
</I>&gt;<i> instead of a new &lt;html&gt;.
</I>
With two exceptions (supporting /&gt; syntax instead of hardcoding empty 
elements; having a list of HTML elements bail out of &lt;math&gt;) this is what 
the spec has now ended up saying.


On Sat, 4 Nov 2006, Elliotte Harold wrote:
&gt;<i> Ian Hickson wrote:
</I>&gt;<i> &gt; &gt; &gt; I'm not saying don't add MathML to HTML. I'm saying don't add namespace
</I>&gt;<i> &gt; &gt; &gt; syntax to HTML.
</I>&gt;<i> 
</I>&gt;<i> As I've said elsewhere, I find this viewpoint simply incomprehensible. 
</I>&gt;<i> Namespaces are ugly, but they're not that ugly or that problematic.
</I>
I guess we disagree on the extent of the ugliness and the problems. :-)


&gt;<i> They are also at the core of XML processing. Throwing out namespaces 
</I>&gt;<i> makes it nearly impossible to process HTML with the very large and 
</I>&gt;<i> powerful set of XML tools.
</I>
The namespaces would still exist in the DOM. They would just not be 
visible at the syntax level.


On Sat, 4 Nov 2006, Elliotte Harold wrote:
&gt;<i> Henri Sivonen wrote:
</I>&gt;<i> &gt; Note that what you quoted above was not about throwing away namespaces 
</I>&gt;<i> &gt; but about not introducing namespace *syntax* to the text/html 
</I>&gt;<i> &gt; serialization. In fact, HTML5 requires UAs to put HTML elements in the 
</I>&gt;<i> &gt; XHTML namespace.
</I>&gt;<i> 
</I>&gt;<i> If all we're doing is HTML, fine. However people are now in this thread 
</I>&gt;<i> talking about putting MathML into this. In other forums people are 
</I>&gt;<i> discussing adding XForms. If I'm wrong and people are not suggesting 
</I>&gt;<i> that MathML and XForms and similar non-HTML things end up in the HTML 
</I>&gt;<i> namespace, then please tell me that. I;'d be very happy to know that.
</I>&gt;<i> 
</I>&gt;<i> However what I'm hearing is that people do want to mix in different 
</I>&gt;<i> vocabularies such as MathML and XForms without using namespaces, and 
</I>&gt;<i> that seems to me to be very unwise.
</I>
Again, you are confusing namespace *syntax* (the bits on the wire) with 
namespaces in the DOM.


On Sat, 4 Nov 2006, Elliotte Harold wrote:
&gt;<i> 
</I>&gt;<i> Then this is what I feared, and it's not sensible. Enabling mixed 
</I>&gt;<i> HTML/MathML to be processed with generic tools and MathML specific tools 
</I>&gt;<i> requires that it have the namespace, including all the necessary 
</I>&gt;<i> namespace attributes.
</I>
Yes, in the DOM it would have the namespace. Stick an HTML5 parser on the 
front of your XML pipeline, and your XML tools would be none the wiser.


&gt;<i> See
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.elharo.com/blog/software-development/xml/2006/10/26/chameleon-schemas-considered-harmful/">http://www.elharo.com/blog/software-development/xml/2006/10/26/chameleon-schemas-considered-harmful/</A>
</I>&gt;<i> 
</I>&gt;<i> for some more thoughts on this.
</I>
We are not proposing the chameleon namespace idea, which I agree is a very 
misguided concept that completely misses the point.


&gt;<i> Folks, adding a few xmlns:math or xmlns attributes to a document just 
</I>&gt;<i> isn't that bad. It is in fact one of the least complex things anyone 
</I>&gt;<i> trying to write MathML will have to deal with. MathML has a lot worse 
</I>&gt;<i> than this.
</I>
We don't have to add the attributes to switch the namespace, though.


&gt;<i> This is like making the driver's seat in a car a little more comfortable by
</I>&gt;<i> ripping out the steering wheel. It makes no sense. It is a phobia that leads
</I>&gt;<i> to misjudgement the relative problems with different options.
</I>
No, it's like ripping off the label on a 100% cotton sweater. It's no less 
cotton for having lost its label. The molecules still know they're cotton, 
the laws of physics still apply to the cotton in the way they did before 
the label was removed, the only difference is that the label is no longer 
there to itch the wearer.


On Sat, 4 Nov 2006, Elliotte Harold wrote:
&gt;<i>
</I>&gt;<i> A DOM doesn't travel over the network. The serialized form does. The DOM 
</I>&gt;<i> is one possible local model used to process the document on one system. 
</I>&gt;<i> My tools may or may not be based on the DOM, but they're going to start 
</I>&gt;<i> by receiving an actual XML instance. We can use TagSoup to fudge HTML, 
</I>&gt;<i> but if you I want to handle MathML, SVG, and other things in it, That 
</I>&gt;<i> instance had better be namespace well-formed, and it had better use the 
</I>&gt;<i> right names for the right things, both local and qualified.
</I>
We're not talking about putting XML in text/html. It's still a custom 
text/html syntax, it's just that it maps to XML syntax that does use 
namespaces. That is, this text/html document:

   &lt;!DOCTYPE HTML&gt;
   &lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;
   &lt;p&gt;&lt;math&gt;&lt;/math&gt;&lt;svg&gt;&lt;/svg&gt;&lt;/p&gt;
   &lt;/body&gt;&lt;/html&gt;

...has the exact same namespaces as this application/xml document:

   &lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml&quot;">http://www.w3.org/1999/xhtml&quot;</A>
   &gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;
   &lt;p&gt;&lt;math xmlns=&quot;<A HREF="http://www.w3.org/1998/Math/MathML&quot;">http://www.w3.org/1998/Math/MathML&quot;</A>
   &gt;&lt;/math&gt;&lt;svg xmlns=&quot;<A HREF="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</A>&gt;&lt;/svg&gt;&lt;/p&gt;
   &lt;/body&gt;&lt;/html&gt;

...which has the exact same namespaces as this text/x-mythical-lang:

   SKGHJQ#$<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">KJTGWWEGH43Yq34YKJGRWAKGVHJSDFKGHJ at 3423tWQ</A>#KJGSDB

All three of these documents (the last being in a mythicial language for 
demonstrative purposes only) are (with some minor and non-namespace- 
related exceptions) identical. They all have a &lt;math&gt; element in the 
MathML namespace. They all have an &lt;svg&gt; element in the SVG namespace. The 
fact that the _syntax_ doesn't show that explicitly doesn't in any way 
change the fact that the document has to have that interpretation. In the 
&quot;text/x-mythical-lang&quot; you can't even see the word &quot;math&quot; but it still has 
a &lt;math&gt; element. It's just a matter of how the parser is defined.

Similarly, in text/html, the following valid HTML4 document fragment:

   &lt;p&gt;a&lt;ol&gt;&lt;li&gt;b&lt;/ol&gt;

...is identical to this valid HTML4 document fragment:

   &lt;p&gt;s&lt;/p&gt;&lt;ol&gt;&lt;li&gt;b&lt;/li&gt;&lt;/ol&gt;

That is, the &lt;/p&gt; and &lt;/li&gt; tags, despite not being present in the syntax 
of the first fragment, are still effectively present. The &lt;/p&gt; is implied 
by the &lt;ol&gt;, and the &lt;/li&gt; is implied by the &lt;/ol&gt;.


On Sat, 4 Nov 2006, Elliotte Harold wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; Anne is talking about the text/html serialization, which is supposed 
</I>&gt;<i> &gt; to be parsed using an HTML5 parser. It is a special-purpose 
</I>&gt;<i> &gt; alternative serialization for a subset of possible infosets--like 
</I>&gt;<i> &gt; RELAX NG Compact Syntax. Please ignore the superficial syntactic 
</I>&gt;<i> &gt; similarity to XML 1.0.
</I>&gt;<i> 
</I>&gt;<i> Does that subset include MathML?
</I>
At this point, yes.


&gt;<i> I can accept a simple, subset designed purely for backwards 
</I>&gt;<i> compatibility an that can be processed with a special purpose parser.
</I>&gt;<i> 
</I>&gt;<i> However if the plan is to mix in entire additional languages, then I 
</I>&gt;<i> think this is driving off a cliff. MathML and MathML tools are designed 
</I>&gt;<i> under the assumption that they can rely on well-formedness and 
</I>&gt;<i> namespaces.
</I>
The concept of &quot;well-formedness&quot; doesn't apply to text/html, it's an XML 
technical term.

The namespaces are present in text/html content.

MathML tools will need new parsers (which will likely be available 
off-the-shelf just like XML parsers) to handle MathML in text/html, yes. 
However, the rest of MathML is unaffected -- the parsers return 
predictable, coherent DOMs with full namespace annotation, with all the 
error handling done in a manner consistent between conforming 
implementations of the spec.


On Sun, 5 Nov 2006, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> You wouldn't be able to feed MathML-enabled HTML5 to MathML tools that 
</I>&gt;<i> use an XML parser. You'd either have to use an HTML5 to XHTML5 converter 
</I>&gt;<i> for creating an intermediate XML 1.0 serialization that can be fed to an 
</I>&gt;<i> XML parser or you could optimize away the serialization and plug an 
</I>&gt;<i> HTML5 parser into the XML processing pipeline the way TagSoup is used.
</I>
Right.


On Sun, 5 Nov 2006, Elliotte Harold wrote:
&gt;<i>
</I>&gt;<i> Anne van Kesteren wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Well, the problem is that they would mean different things. Consider the
</I>&gt;<i> &gt; following fragment:
</I>&gt;<i> 
</I>&gt;<i> Meaning is in the eye of the beholder.
</I>
Not with HTML5. We define the meaning for any byte stream sent as 
text/html, conforming or not.


&gt;<i> The syntax matters. If you give me the right well-formed syntax, I can 
</I>&gt;<i> do what I need to do with it, as can others. If you give me malformed 
</I>&gt;<i> syntax, working with the document gets a lot more complicated.
</I>
The concepts of &quot;well-formed&quot; and &quot;malformed&quot; don't apply to text/html. 
HTML5 has &quot;conforming&quot; and &quot;non-conforming&quot; byte streams, and has defined 
processing for both, including how you go from bytes to a 
namespace-annotated infoset representation (though we do it in terms of a 
DOM, not an infoset, but the idea is the same).

Given any byte stream sent as text/html, valid or not, you can do what you 
need to do with it, as can anyone else using a conforming HTML5 parser. 
Consistent text/html processing is not limited to valid text/html 
documents the way that consistent XML processing is limited to well-formed 
XML documents.


On Sun, 5 Nov 2006, Elliotte Harold wrote:
&gt;<i> 
</I>&gt;<i> The specific syntax is important because there's a huge, useful 
</I>&gt;<i> toolchain for processing XML and there's essentially zilch for 
</I>&gt;<i> processing this strange HTML 5 thing.
</I>
This is rapidly changing.


&gt;<i> If there ever is any software to process it, I expect it will just be an 
</I>&gt;<i> adapter that feeds the HTML 5 into the XML tools. Why not ditch the 
</I>&gt;<i> HTML5 layer completely and simply allow the XML tools direct access?
</I>
You are welcome to do so, HTML5 defines an XML serialisation too.

However, it seems many people actually don't want to use XML, so that's 
why we're continuing to define a variant of HTML for text/html.


On Sun, 5 Nov 2006, Elliotte Harold wrote:
&gt;<i>
</I>&gt;<i> You're getting this backwards. There's no reason for HTML 5 to be 
</I>&gt;<i> compatible with existing *documents*, existing browsers and tools sure; 
</I>&gt;<i> but other documents can be handled on their own.
</I>
Browsers have to handle existing documents. Browsers, by and large, don't 
want to implement more than one HTML processor. Thus whatever browsers do 
for processing of HTML5 documents has to work for _any_ HTML document. 
Thus HTML5 has to be compatible with the processing of legacy HTML.


&gt;<i> &gt; Anyone for whom interoperability in processing real world content is 
</I>&gt;<i> &gt; important.  This includes, among others:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; * Browser vendors that have to deal with real world content.
</I>&gt;<i> 
</I>&gt;<i> Browser vendors can handle XHTML now. It's a non-issue for them.
</I>
This doesn't match what browser vendors are telling me.


&gt;<i> &gt; * Users who like to surf the web in any browser they choose.
</I>&gt;<i> 
</I>&gt;<i> As long as any browser they choose is some browser released in this 
</I>&gt;<i> millennium, XHTML is fine.
</I>
IE7 proves you wrong. :-)


&gt;<i> I'm sorry. The use cases so far just don't hold water. I reput the 
</I>&gt;<i> question: who does HTML serialization help? What problems does this 
</I>&gt;<i> solve?
</I>
Whether you agree with us or not doesn't really change matters... the use 
cases you were given are indeed the ones we are taretting, whether you 
believe we are right to do so or not.


On Sat, 4 Nov 2006, William F Hammond wrote:
&gt;<i>
</I>&gt;<i> &gt;&gt; Ian Hickson wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I'm not saying don't add MathML to HTML. I'm saying don't add 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; namespace syntax to HTML.
</I>&gt;<i> 
</I>&gt;<i> Yes, I believe Ian Hixie's main point was not to use namespace prefixes 
</I>&gt;<i> in html5.
</I>
Or default namespace declarations, for that matter (though if they are 
present, they should not be considered errors, for ease of copying and 
pasting from XML to text/html).


&gt;<i> If a content provider attempts a namespace declaration using something 
</I>&gt;<i> like 'xmlns=&quot;<A HREF="http://www.w3.org/1998/Math/MathML&quot;',">http://www.w3.org/1998/Math/MathML&quot;',</A> it should &quot;work&quot; in a 
</I>&gt;<i> user agent that handles the document under the current xhtml+mathml 
</I>&gt;<i> regime (perhaps cued by an xml declaration [an unknown PI for html5] or 
</I>&gt;<i> an xmlns attribute on the root 'html' element) and also in a user agent 
</I>&gt;<i> that follows the new html5 way (which presumably would ignore 'unknown' 
</I>&gt;<i> attributes).
</I>
Unfortunately I haven't seen any proposal for how to handle xmlns=&quot;&quot; 
attributes in text/html in a way that is compatible with the legacy of Web 
content (much of which is strewn with xmlns=&quot;&quot; attributes with bogus 
values on any manner of elements, both known and unknown), and I have 
totally failed to come to any workable solution myself that supports 
namespaces in a generic fashion.

Without a working model, we really can't support namespaces in HTML 
syntax.


&gt;<i> This is the way to keep as much as possible of presently circulated 
</I>&gt;<i> html-with-MathML content alive.
</I>
True, but it's not the only way, as demonstrated by the new spec text.


On Sat, 4 Nov 2006, Elliotte Harold wrote:
&gt;<i>
</I>&gt;<i> Ian Hickson wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; &gt; Some pages even have completely bogus namespaces on the root 
</I>&gt;<i> &gt; &gt; &gt; &lt;html&gt; element, which would make the entire page screw up.
</I>&gt;<i> 
</I>&gt;<i> Let the page screw up. The author will notice it and fix it.
</I>
In some cases, yes. In most cases, the author is long gone and the content 
is no longer maintained, or the author has no idea how to fix the problem. 
Browsers don't make changes that break significant numbers of pages.


&gt;<i> That's like saying some people mistype table as tabel and therefore we 
</I>&gt;<i> shoudl accept both spellings.
</I>
Ironically no, because &lt;tabel&gt; doesn't do anything today so misspellings 
of it are actually relied upon to do nothing.


&gt;<i> &gt; &gt; &gt; Even worse, Office HTML, of which there is a LOT on the Web, uses 
</I>&gt;<i> &gt; &gt; &gt; namespaces in a way to trigger IE to do one thing, but relies on 
</I>&gt;<i> &gt; &gt; &gt; the other browsers *not* handling the namespaces to make sure it 
</I>&gt;<i> &gt; &gt; &gt; all works everywhere.
</I>&gt;<i> 
</I>&gt;<i> Can you elaborate on the specifics?
</I>
If you look at the source of any HTML document saved by Word in the past 
decade or so, it should be clear.


&gt;<i> If it's their custom office namespaces, I'm not too surprised.
</I>
It is.


&gt;<i> &gt; &gt; Are there any reasons besides ease of use and misuse in tag-soup 
</I>&gt;<i> &gt; &gt; content that XML's namespace syntax shouldn't be added to HTML?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I can't think of any other reasons off-hand, no. But those reasons are 
</I>&gt;<i> &gt; so big that I find it difficult to think of anything but those 
</I>&gt;<i> &gt; problems when I consider namespaces, so it might just be that I'm not 
</I>&gt;<i> &gt; thinking clearly enough to see the other problems.
</I>&gt;<i> 
</I>&gt;<i> I'm sorry. Those reasons are *TRIVIAL*. They are easily handled, and easily
</I>&gt;<i> fixed. 
</I>
How? Please do elaborate on this.


On Sat, 4 Nov 2006, Paul Topping wrote:
&gt;<i>
</I>&gt;<i> Elements whose namespaces aren't known should be handled like any other 
</I>&gt;<i> unknown HTML element. I believe the common way for user agents to handle 
</I>&gt;<i> an unknown element is basically to ignore the tag and its attributes and 
</I>&gt;<i> treat any text between start and end tags as if the tags weren't there. 
</I>&gt;<i> Namespaces do not present any new challenge in this area. &quot;Bogus 
</I>&gt;<i> namespaces&quot; are no more of a security risk than bogus HTML tags. It is 
</I>&gt;<i> only the ones that ARE processed by the user agent that represent 
</I>&gt;<i> potential security risks.
</I>
The problem is legacy content like:

   &lt;html&gt;
    &lt;foo xmlns=&quot;bogus namespace&quot;&gt;
     ...rest of HTML document...

We don't want to make the whole document get ignored.


On Mon, 6 Nov 2006, Chris Chiasson wrote:
&gt;<i>
</I>&gt;<i> If there are no element name collisions between html, mathml, and 
</I>&gt;<i> whatever else is proposed to be added to html 5, then all elements could 
</I>&gt;<i> just be included into one schema/DTD without prefixing.
</I>
Sadly, there are collisions.


&gt;<i> The browsers could then do the job of filtering all the elements into 
</I>&gt;<i> the appropriate namespaces.
</I>
That's basically what the spec now does.


On Mon, 6 Nov 2006, Bruce Miller wrote:
&gt;<i> 
</I>&gt;<i> Proposal: Include MathML as xml &quot;islands&quot; with XML rules for namespaces, 
</I>&gt;<i> but within sgml-ish html.
</I>&gt;<i>
</I>&gt;<i> Based on my current understanding:
</I>&gt;<i> This works in IE _today_ (provided MathPlayer is installed). Roger 
</I>&gt;<i> seemed to say that it is just as easy to implement in mozilla as w/o 
</I>&gt;<i> namespaces, and had perhaps already implemented it.
</I>
Could you elaborate on this? I don't understand what you mean by &quot;xmml 
islands&quot; in terms of precise changes to the HTML5 parser model.


On Mon, 6 Nov 2006, Neil Soiffer wrote:
&gt;<i>
</I>&gt;<i> I have been reading the discussion and at times I am perplexed.  Being a 
</I>&gt;<i> user and implementer of MathML software, the key point to me is that 
</I>&gt;<i> HTML5 accept valid MathML.  Without trying to restart the argument, 
</I>&gt;<i> MathML tools produce text, not DOM trees, so it is crucial for 
</I>&gt;<i> compatibility that HTML5 accepts (ie, does not reject/error on) MathML 
</I>&gt;<i> syntax.
</I>
Indeed. This is (with some caveats) now possible.


On Sat, 24 Feb 2007, Henri Sivonen wrote:
&gt;<i>
</I>&gt;<i> Where should the svg element from the SVG namespace be allowed in an 
</I>&gt;<i> XHTML5 host document? (My expectation: It should be allowed at least 
</I>&gt;<i> everywhere where the img element would be allowed. There may be good 
</I>&gt;<i> arguments for allowing svg as block as well.)
</I>
Specified.


&gt;<i> Where should the math element from the MathML namespace be allowed in an 
</I>&gt;<i> XHTML5 host document? (My expectation: It should be allowed where 
</I>&gt;<i> strictly inline level content is allowed. My understanding is that also 
</I>&gt;<i> display math has inline semantics even though it has a blockish 
</I>&gt;<i> presentation.)
</I>
Specified.


&gt;<i> Where should the RDF element from the RDF namespace be allowed in an 
</I>&gt;<i> XHTML5 host document?
</I>
Specified (though the RDF is just mentioned as an example in a more 
generic statement).


&gt;<i> Should an XHTML5 conformance checker allow arbitrary foreign elements as 
</I>&gt;<i> children of the head element in order to allow free experimentation with 
</I>&gt;<i> invisible non-RDF metadata in a way that doesn't encourage experimenters 
</I>&gt;<i> to put their stuff inside comments or something equally ugly?
</I>
Arbitrary namespaces shouldn't be allowed, as they aren't well-known 
vocabularies that all users can expect to handle properly.

On Mon, 9 Apr 2007, Maciej Stachowiak wrote:
&gt;<i> On Apr 8, 2007, at 11:12 AM, Henri Sivonen wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I think it would be worthwhile to add an attribute for script-private 
</I>&gt;<i> &gt; data to common attributes, so that scripters who need one and want to 
</I>&gt;<i> &gt; be conforming don't need to abuse e.g. title.
</I>&gt;<i> 
</I>&gt;<i> The class attribute can already be used for script-private data. I think 
</I>&gt;<i> the time script authors go for made-up attributes is when they need a 
</I>&gt;<i> set of key-value pairs. Class is not so great for that, but I'm not sure 
</I>&gt;<i> any new attribute would be either, unless it provided some sort of 
</I>&gt;<i> built-in key-value parsing.
</I>
Now available, using data-*=&quot;&quot;, for most values of *.

On Mon, 9 Apr 2007, Jon Barnett wrote:
&gt;<i>
</I>&gt;<i> I can think of two possibilities.
</I>&gt;<i> 
</I>&gt;<i> One would be to allow the param element as a child of any element (or 
</I>&gt;<i> any block level element?) 
</I>&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#param">http://www.whatwg.org/specs/web-apps/current-work/#param</A>
</I>
I considered this but it seems exceedingly verbose, and has parsing 
implications for some elements (e.g. how do you annotate &lt;br&gt; in an 
scripted editor application?)


&gt;<i> And then make an attribute of HTMLElement called params
</I>&gt;<i> readonly attribute HTMLCollection params;
</I>
I've provided a dataset API which basically handles this.

If anyone is actually reading this 3363 line e-mail, I'm
impressed. Please do let me know that you read this.


&gt;<i> The only other possibility I can think of would be an HTML attribute 
</I>&gt;<i> called &quot;params&quot; that would be a list of tokenized name value pairs, but 
</I>&gt;<i> that sounds even hairier to implement.
</I>
Agreed.


&gt;<i> This would have simplified something I did last week involving the 
</I>&gt;<i> Google Maps API, where I did, as mentioned, make up a fake attribute.  
</I>&gt;<i> There may be better ways to do this.
</I>
Making up attributes, all prefixed with data-, seems like the simplest 
solution.


On Tue, 10 Apr 2007, Simon Pieters wrote:
&gt;<i> 
</I>&gt;<i> Or allow any attribute that starts with &quot;x_&quot; or something (to prevent 
</I>&gt;<i> clashing with future revisions of HTML), as private attributes.
</I>&gt;<i> 
</I>&gt;<i>    &lt;div id=&quot;foo&quot; x_answer=&quot;42&quot;&gt;Some more content&lt;/div&gt;
</I>&gt;<i> 
</I>&gt;<i>    var foo = document.getElementById(&quot;foo&quot;);
</I>&gt;<i>    if(foo.getAttribute(&quot;x_answer&quot;) == 42) {
</I>&gt;<i>      // it is!!
</I>&gt;<i>    }
</I>
That's basically what is now in the spec.


On Tue, 10 Apr 2007, Sam Ruby wrote:
&gt;<i> 
</I>&gt;<i> Instead of &quot;starts with x_&quot;, how about &quot;contains a colon&quot;?
</I>
I considered that, but unfortunately, it forms a dichotomy of semantics, 
where when used in XML the DOM shows one set of names, and when used in 
text/html, it shows another (at least in legacy UAs, though we could 
hard-code behaviour for new UAs).


On Tue, 10 Apr 2007, Maciej Stachowiak wrote:
&gt;<i> 
</I>&gt;<i> I think the problem here isn't compatibility with existing content, but 
</I>&gt;<i> rather ability to use the feature in new web content while still 
</I>&gt;<i> gracefully handling existing user agents. We wrote up some design 
</I>&gt;<i> principles for the HTML WG based on the WHATWG's working assumptions 
</I>&gt;<i> which might make this point more clear: 
</I>&gt;<i> &lt;<A HREF="http://esw.w3.org/topic/HTML/ProposedDesignPrinciples">http://esw.w3.org/topic/HTML/ProposedDesignPrinciples</A>&gt;. While &quot;Don't 
</I>&gt;<i> Break The Web&quot; is a goal, so is &quot;Degrade Gracefully&quot;.
</I>&gt;<i> 
</I>&gt;<i> To give a specific example: say I make my own &quot;mjsml&quot; prefix with 
</I>&gt;<i> namespace &quot;<A HREF="http://example.org/mjsml&quot;.">http://example.org/mjsml&quot;.</A> In HTML4 UAs, to look up an 
</I>&gt;<i> &quot;mjsml:extension&quot; attribute using getAttribute(&quot;mjsml:extension&quot;). In 
</I>&gt;<i> HTML5 UAs, I'd have to use getAttributeNS(&quot;<A HREF="http://example.org/mjsml&quot;,">http://example.org/mjsml&quot;,</A> 
</I>&gt;<i> &quot;extension&quot;). And neither technique would work on both (at least as I 
</I>&gt;<i> understand your proposal).
</I>
Indeed.


&gt;<i> Now, we could extend getAttribute in HTML to do namespace lookup when 
</I>&gt;<i> given a name containing a colon and when namespace declarations are 
</I>&gt;<i> present, but then we would want to do it in XHTML as well. And using the 
</I>&gt;<i> short getAttribute call instead of a longer getAttributeNS with a 
</I>&gt;<i> namespace prefix might be unacceptable to XML fans.
</I>
Changing DOM Core is somewhat outside of HTML5's scope.


On Wed, 11 Apr 2007, Sam Ruby wrote:
&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; <A HREF="http://intertwingly.net/stories/2007/04/10/test.html">http://intertwingly.net/stories/2007/04/10/test.html</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In Safari 2.0.4: Processed as HTML, it says &quot;data&quot; and then &quot;&quot;. Processed as
</I>&gt;<i> &gt; XHTML, it says &quot;null&quot; and then &quot;data&quot;.
</I>&gt;<i> &gt; In Opera 9.00: Processed as HTML, it says &quot;data&quot; and then &quot;null&quot;. Processed
</I>&gt;<i> &gt; as XHTML, it says &quot;null&quot; and then &quot;data&quot;.
</I>&gt;<i> &gt; In Firefox 2.0.0.3: Processed as HTML, it says &quot;data&quot; and then &quot;&quot;. Processed
</I>&gt;<i> &gt; as XHTML, it says &quot;data&quot; and then &quot;data&quot;.
</I>&gt;<i> &gt; In IE/Mac 5.2: Processed as HTML, it says &quot;data&quot; and the second alert does
</I>&gt;<i> &gt; not appear. Processed as XHTML, neither alert appears.
</I>&gt;<i> 
</I>&gt;<i> The first thing that is apparent to me is that, when processed as HTML, 
</I>&gt;<i> element.getAttribute('mjsml:extension') works everywhere.  So it is 
</I>&gt;<i> probably fair to say that allowing it does not run afoul of either the 
</I>&gt;<i> &quot;Don't Break the Web&quot; or &quot;Degrade Gracefully&quot; design principles.
</I>
...except that that would change if the parser annotated the DOM with the 
namespaces properly (as in XML).

(Also, it's architecturally bad to make the prefix values matter. That is, 
in XML, you'd want &lt;foo xmlns:a=&quot;x&quot; xmlns:b=&quot;x&quot; a:q=&quot;&quot; b:r=&quot;&quot;/&gt; to be an 
element with two attributes in the same namespace. You wouldn't want 
getAttribute('a:q') to pass but getAttribute('a:r') to fail.)


&gt;<i> Per HTML5 section 8.1.2.3, however, such an attribute name would not be 
</I>&gt;<i> considered conformant.  Despite this, later in document, in the 
</I>&gt;<i> description of &quot;Attribute name state&quot;, no parse error is produced for 
</I>&gt;<i> this condition.  Nor does the current html5lib parser produce a parse 
</I>&gt;<i> error with this data.
</I>
I think the spec changed since you wrote this, but I'm not sure.


On Wed, 11 Apr 2007, Sam Ruby wrote:
&gt;<i> 
</I>&gt;<i> 1) re: &quot;prefix_name&quot; - how are prefixes registered?  Henri is free to 
</I>&gt;<i> correct me if I am wrong, but I gathered that the requirement was for a 
</I>&gt;<i> bit of decentralized extensibility, i.e., the notion that anybody for 
</I>&gt;<i> any reason could defined an extension for holding private data; and 
</I>&gt;<i> furthermore could do so without undo fear of collision.
</I>
Well since collisions aren't much of a concern (this is for scripting, 
primarily, which is rarely syndicated, and when syndicated, there is a 
bigger problem just with the scripts themselves) we can let authors deal 
with collision avoidance by just having informal (from our point of view) 
rules about naming. For example, dojo could call all their attributes 
data-dojo-*=&quot;&quot;, for various values of *. Certainly I wouldn't say there's 
a need for formal registration of prefixes beyond just the general &quot;data-&quot; 
prefix for the feature as a whole.


&gt;<i> 2) I assert that the existing DOM standard already defines a mechanism 
</I>&gt;<i> for decentralized extensibility.  Most relevant to the discussion at 
</I>&gt;<i> hand is the getAttributeNS method.  It may not be defined as clearly as 
</I>&gt;<i> it could be, but there does seem to be some clues which suggest what the 
</I>&gt;<i> original intent was, and the beginnings of an agreement that if more 
</I>&gt;<i> browsers were to conform to that intent, that would be a GOOD THING(TM).
</I>
I agree that if all we wanted to deal with was XML, and that we didn't 
have a concern over ease of authoring, that using namespaced attributes 
would be the most obvious and clear solution here.


On Wed, 11 Apr 2007, Michael A. Puls II wrote:
&gt;<i> 
</I>&gt;<i> What would happen with &lt;embed script-private=&quot;something&quot;&gt;? Would the 
</I>&gt;<i> data be passed to the plug-in as a script-private param or would 
</I>&gt;<i> script-private be reserved; causing any plug-in using script-param not 
</I>&gt;<i> to get the data? (A prefix could possible avoid this.)
</I>
This problem still exists with data-*. As written, the spec makes the 
data-* attributes be sent to the plugin as well as being available to 
script. Does this cause any problems? I'm not especially concerned with 
supporting proprietary plugins, but it seems like authors could just 
avoiding setting the data-* attributes on &lt;embed&gt;, or avoid breaking on 
them in their plugins, if this was an issue.


On Wed, 11 Apr 2007, Kevin Marks wrote:
&gt;<i>
</I>&gt;<i> How about defining an attribute that is the name of the js variable for 
</I>&gt;<i> use with that element? Then you can define the variable in a &lt;script&gt; 
</I>&gt;<i> tag, and use pure JSON cleanly.
</I>
String-only support seems good enough... what are the use cases that 
involve more comprehensive data?

As far as mapping straight to a variable goes, though, that's basically 
what the .dataset object now does.


On Wed, 11 Apr 2007, Kevin Marks wrote:
&gt;<i> 
</I>&gt;<i> No, what I'm suggesting is that you have, say, a 'localdata' attribute
</I>&gt;<i> that names the associated variable:
</I>&gt;<i> &lt;script&gt;myparams={&quot;foo&quot;:&quot;bar&quot;,&quot;bish&quot;:&quot;bash&quot;};&lt;/script&gt;
</I>&gt;<i> &lt;div class=&quot;mydiv&quot; localdata=&quot;myparams&quot;&gt;
</I>&gt;<i> 
</I>&gt;<i> mydiv.localdata.foo ==&quot;bar&quot;; // it is
</I>&gt;<i> 
</I>&gt;<i> I think making this work in current browsers would be doable by having
</I>&gt;<i> a script that creates the DOM elements by looking for the 'localdata'
</I>&gt;<i> parameters.
</I>
That's close to what the spec does now, except with multiple attributes.


On Fri, 6 Jul 2007, Henri Sivonen wrote:
&gt;<i>
</I>&gt;<i> [The Namespaces] section is fine as far as HTML elements go. For reasons 
</I>&gt;<i> of backwarads compatibility, the we have only one namespace we can use 
</I>&gt;<i> and this section correctly designates exactly that namespace.
</I>&gt;<i> 
</I>&gt;<i> However, the spec should give guidance on integration of elements from certain
</I>&gt;<i> well-known foreign namespaces into the XML serialization. This guidance
</I>&gt;<i> doesn't need to be in this particular section, though.
</I>
Done.


&gt;<i> For further opinion about foreign namespaces in the XML serialization, 
</I>&gt;<i> please refer to 
</I>&gt;<i> <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2007-February/009631.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2007-February/009631.html</A>
</I>
Sending it was enough. :-) (Replied to that one above.)


On Sun, 9 Mar 2008, Henri Sivonen wrote:
&gt;<i>
</I>&gt;<i> Use cases:
</I>&gt;<i> 
</I>&gt;<i>  * Converting a typical LaTeX paper to text/html such that
</I>&gt;<i>    everything that wouldn&#146;t get bitmapped in a pdfLaTeX workflow
</I>&gt;<i>    does not get bitmapped.
</I>
Addressed.

&gt;<i>  * Writing a similar document into text/html in a text editor
</I>&gt;<i>    copying and pasting the SVG figures from Inkscape XML output.
</I>
Addressed, though Inkscape really needs to stop outputting so much 
proprietary crap, sheesh.


&gt;<i>  * Making Flash-like visually &#147;high-impact&#148; (sorry about the
</I>&gt;<i>    marketing BS term) sites using the openly specified Web
</I>&gt;<i>    platform but without the Draconianness of XML in such a
</I>&gt;<i>    way that the whole thing uses retained-mode graphics and
</I>&gt;<i>    lives in one DOM for easy scripting (i.e. no need for
</I>&gt;<i>    scripts to deal with object or iframe sub-DOMs).
</I>
If HTML+SVG+SMIL+JS+CSS addresses this, then, addressed.


&gt;<i>  * Publishing the kind of content that is published on
</I>&gt;<i>    <A HREF="http://golem.ph.utexas.edu/~distler/blog/">http://golem.ph.utexas.edu/~distler/blog/</A> using a
</I>&gt;<i>    legacy PHP content management system that is not XML-ready.
</I>
Addressed.


&gt;<i> The technical requirements that arise out of the above use cases are:
</I>&gt;<i> 
</I>&gt;<i>  * Establishing a pseudo-XML parsing scope for &lt;svg&gt; and math.
</I>&gt;<i> 
</I>&gt;<i>  * Putting elements in the SVG and MathML namespaces in the
</I>&gt;<i>    DOM in &lt;svg&gt; and math scopes, respectively.
</I>&gt;<i> 
</I>&gt;<i>  * Establishing a nested &quot;in body&quot;-like parsing scope in
</I>&gt;<i>    foreignObject and annotation-xml.
</I>&gt;<i> 
</I>&gt;<i>  * CDATA sections in the pseudo-XML parsing scopes (have the
</I>&gt;<i>    tree builder toggle a flag in the tokenizer).
</I>&gt;<i> 
</I>&gt;<i>  * Special-case XLink attributes.
</I>
The solution basically has these, yes.


&gt;<i>  * MathML entities in the pseudo-XML parsing scope (have
</I>&gt;<i>    the tree builder toggle a flag in the tokenizer).
</I>
I just added them to all modes. It would be really confusing to be able to 
do &lt;math&gt;&lt;mi&gt;&amp;entity;&lt;/mi&gt;&lt;/math&gt; but not &lt;var&gt;&amp;entity;&lt;/var&gt;.


&gt;<i> For the use cases I mentioned above, it wouldn&#146;t be necessary to able to 
</I>&gt;<i> bind prefixes with an explicit syntax. Magic scoping on svg, math, 
</I>&gt;<i> foreignObject and annotation-xml would be enough. However, for the use 
</I>&gt;<i> cases to be satisfied, pasting in XMLNS-style default namespace 
</I>&gt;<i> declarations for svg and math should be allowed.
</I>
Agreed.


&gt;<i> &gt; Do we need to actually support arbitrary namespaces, or can we satisfy 
</I>&gt;<i> &gt; all our use cases by providing explicit support for a finite set of 
</I>&gt;<i> &gt; elements?).
</I>&gt;<i> 
</I>&gt;<i> For the use cases I mentioned above, support for arbitrary namespaces is 
</I>&gt;<i> not necessary. However, for forward compatibility, I think the mechanism 
</I>&gt;<i> should be scope-based rather than based on a finite list in order to 
</I>&gt;<i> handle future expansions of MathML and SVG.
</I>
Agreed.


On Sun, 9 Mar 2008, Sam Ruby wrote:
&gt;<i>
</I>&gt;<i> &gt; Establishing a pseudo-XML parsing scope for &lt;svg&gt; and math.
</I>&gt;<i> 
</I>&gt;<i> IE8&#146;s approach seems to be &#147;establish a pseudo-XML parsing scope for 
</I>&gt;<i> unknown elements which contain an attribute named xmlns that happens to 
</I>&gt;<i> match a list of known values&#148;, where the list of known values may vary 
</I>&gt;<i> by user agent or installation.  IMHO, that approach merits exploration.
</I>
Unfortunately, exploration basically shows that IE8 doesn't do anything 
(at least, I couldn't reproduce it) with xmlns=&quot;&quot;, other than screw up the 
attribute parsing), and a quick study of existing documents suggests that 
there's a great deal of content that wouldn't be handled very well at all 
by anything triggering off xmlns=&quot;&quot;, even if it were limited to unknown 
elements or known namespaces (e.g. see the examples at the top of this 
e-mail).


&gt;<i> Secondly, if you look at a typical inkscape produced document[3], you 
</I>&gt;<i> will see a number of other namespaces defined and used.  At a minimum, 
</I>&gt;<i> such should cause no harm.  It would also be nice if such elements were 
</I>&gt;<i> not to inhibit the potential future evolution of SVG.
</I>
I think the solution proposed handles them safely, if not especially much 
as they were originally intended.


On Mon, 10 Mar 2008, Julian Reschke wrote:
&gt;<i> 
</I>&gt;<i> For the record: I disagree with that direction. Trying to integrate SVG 
</I>&gt;<i> and MathML into HTML seems to be inferior to having a generic solution.
</I>
As noted in the introduction to this e-mail, a generic solution seems 
elusive for text/html, and furthermore seems unnecessary given the actual 
cost distribution for supporting new vocabularies. That is, a generic 
syntax would be a premature optimisation. Indeed, a generic syntax might 
actively harm future development, since it would strongly suggest that 
future developments be based on that syntax instead of having syntax 
designed for them, which in some cases may be better.


On Mon, 10 Mar 2008, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> Building above-DOM support for SVG or MathML takes more effort than 
</I>&gt;<i> building the below-DOM part. Chances are that if there ever is a need to 
</I>&gt;<i> add another substantial chunk of element vocabulary to the Web platform 
</I>&gt;<i> so that it doesn't fall under XHTML, SVG or MathML, implementing the 
</I>&gt;<i> above-DOM part will take more effort than tweaking the below-DOM parsing 
</I>&gt;<i> algorithm. That's why generalizing away the need to tweak the below-DOM 
</I>&gt;<i> part in the future seems like the wrong optimization especially if it 
</I>&gt;<i> the generalization requires the SVG and MathML cases carry more 
</I>&gt;<i> boilerplate.
</I>
Exactly.


On Mon, 10 Mar 2008, Jeff Schiller wrote:
&gt;<i>
</I>&gt;<i> - Inclusion of SVG in HTML should not require a change to the SVG
</I>&gt;<i> language.
</I>
(I assume you mean language as in syntax, as opposed to language as in the 
vocabulary and associated semantics.)

&gt;<i> Specifically:
</I>&gt;<i> 
</I>&gt;<i>   a) I should be able to copy &amp; paste the inline SVG document into a
</I>&gt;<i> new standalone document and it be valid SVG
</I>&gt;<i> 
</I>&gt;<i>   b) I should be able to copy &amp; paste the inline SVG document into a
</I>&gt;<i> XHTML document and it still be valid XHTML+SVG
</I>
I don't think we can ever guarantee those invariants without somehow 
preventing people from making typos in their SVG in text/html, which is 
something we've already failed to do, even before adding SVG support. So 
this may be a battle in vain.

Still, in theory, if you are careful, you can do this now, yes.

If the content isn't under your control, then using Firefox's &quot;copy XML&quot; 
feature, or equivalents in other UAs, is probably the best way to solve 
this.


&gt;<i> My preference:
</I>&gt;<i> 
</I>&gt;<i> &lt;html ...&gt;
</I>&gt;<i> &lt;body&gt;
</I>&gt;<i>   &lt;svg xmlns=&quot;<A HREF="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</A>
</I>&gt;<i> xmlns:xlink=&quot;<A HREF="http://www.w3.org/1999/xlink&quot;">http://www.w3.org/1999/xlink&quot;</A> ...&gt;
</I>&gt;<i>     &lt;a xlink:href=&quot;foo.svg&quot;&gt;&lt;circle .../&gt;&lt;/a&gt;
</I>&gt;<i>   &lt;/svg&gt;
</I>&gt;<i> &lt;/body&gt;
</I>&gt;<i> &lt;/html&gt;
</I>
This now works, per spec.


&gt;<i> Another option:
</I>&gt;<i> 
</I>&gt;<i> &lt;html ... xmlns:svg=&quot;<A HREF="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</A>
</I>&gt;<i> xmlns:xlink=&quot;<A HREF="http://www.w3.org/1999/xlink&quot;">http://www.w3.org/1999/xlink&quot;</A>&gt;
</I>&gt;<i> &lt;body&gt;
</I>&gt;<i>   &lt;svg:svg ...&gt;
</I>&gt;<i>     &lt;svg:a xlink:href=&quot;foo.svg&quot;&gt;&lt;svg:circle .../&gt;&lt;/svg:a&gt;
</I>&gt;<i>   &lt;/svg:svg&gt;
</I>&gt;<i> &lt;/body&gt;
</I>&gt;<i> &lt;/html&gt;
</I>
This does not (no prefix support).


On Tue, 11 Mar 2008, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> Use case: Including a contextual icon whose height is synced with text 
</I>&gt;<i> size and that degrades into nothingness.
</I>
HTML5 already supported that: &lt;img src=&quot;icon.svg&quot; alt=&quot;&quot;&gt;


On Tue, 11 Mar 2008, Chasen Le Hara wrote:
&gt;<i> 
</I>&gt;<i> Henri, I don't understand this part of the use case. As an author, I 
</I>&gt;<i> *would* want to be able to have a backup icon or text displayed if SVG 
</I>&gt;<i> is not supported. I can't think of a circumstance in which I wouldn't 
</I>&gt;<i> want at least a backup image, if not backup text (at the least) 
</I>&gt;<i> displayed if SVG wasn't supported (at all, or in text/html).
</I>
&lt;object&gt; is what you would need if you want multilevel fallback.


On Wed, 12 Mar 2008, Chasen Le Hara wrote:
&gt;<i> 
</I>&gt;<i> Ian, is this a fitting use case? I want to be able to include MathML in 
</I>&gt;<i> a text/html document (instead of a text/xml document because the syntax 
</I>&gt;<i> may have errors) (such as a blog with HTML comments allowed).
</I>
Yup, though I'd question why MathML is explicitly decided on as the 
solution in the use case. :-)


On Tue, 11 Mar 2008, Jeff Schiller wrote:
&gt;<i>
</I>&gt;<i> But what about outside the &quot;open web&quot; platform?  Can we safely say that 
</I>&gt;<i> we don't care about name-collisions?
</I>
I am concerned with what happens outside the open Web platform as far as 
HTML5 goes. (That also applies to general WHATWG policy, I don't know 
about the World Wide Web consortium's opinion on things outside the World 
Wide Web but one might assume, from the name, that it shouldn't be a top 
priority there either.)


&gt;<i> See the XAML &lt;Path/&gt; element:
</I>&gt;<i> <A HREF="http://www.longhorncorner.com/UploadFile/mahesh/XamlPath06102005084852AM/XamlPath.aspx">http://www.longhorncorner.com/UploadFile/mahesh/XamlPath06102005084852AM/XamlPath.aspx</A>
</I>&gt;<i> 
</I>&gt;<i> Case insensitivity would be a problem because of that.  Microsoft would 
</I>&gt;<i> have had to rename their element to something else because SVG got their 
</I>&gt;<i> first?
</I>
I don't understand how Windows Presentation Framework object field names 
serialised to XML are relevant to text/html.


&gt;<i> HTML and XUL and XAML and OpenLaszlo and maybe others have a &lt;button&gt;
</I>&gt;<i> element too...
</I>
(XAML doesn't, technically, though WPF has a Button class that can be 
serlialised to XAML.) I don't think these proprietary frameworks should be 
a concern when developing an open standard for the Web.


&gt;<i> Not that you'd necessarily be inter-mixing these, and maybe I'm 
</I>&gt;<i> &quot;cheating&quot; by using standards that aren't considered part of the &quot;open 
</I>&gt;<i> web&quot; strata - but namespaces do provide a way to specify in a 
</I>&gt;<i> non-ambiguous way which vocabulary you're using.
</I>
Sure. But we don't need them in text/html -- we have the MIME type to do 
that for us.


On Tue, 11 Mar 2008, Adam van den Hoven wrote:
&gt;<i> 
</I>&gt;<i> It seems that there is no easy way to include other vocabularies into
</I>&gt;<i> text/html assuming that:
</I>&gt;<i> 1) You want the resulting docs to conforming
</I>&gt;<i> 2) You want the resulting docs to be testable for conformance (using code, not
</I>&gt;<i> manually)
</I>&gt;<i> 3) You want to be able to support emerging technologies
</I>
Right -- that, to a large extent, is intentional. We don't want to 
encourage people to send non-well-known vocabularies over the wire, as it 
is liable to result in lack of interoperability.


&gt;<i> 	Henri's point that we've only seen two additional element sets is not
</I>&gt;<i> entirely useful. In the broader web, I agree that new languages are likely to
</I>&gt;<i> be infrequent. However in corporate settings, where all the browsers are
</I>&gt;<i> controlled, other technologies could very well become common.
</I>
Corporate settings are not the concern of a Web specification (or at 
least, not an important concern).



On Tue, 11 Mar 2008, Adam van den Hoven wrote:
&gt;<i>
</I>&gt;<i> &gt; On 11-Mar-08, at 8:37 AM, Jeff Schiller wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The way I understand the problem is that the HTML5 parser would
</I>&gt;<i> &gt; require too many &quot;special cases&quot; to handle XML 'islands' like this.
</I>&gt;<i> 
</I>&gt;<i> Really?
</I>&gt;<i> Is it not simply a matter of:
</I>&gt;<i> Do I recoginize the namespace that is declared?
</I>&gt;<i> 	If -Yes- then parse that using my known code
</I>&gt;<i> 	If -No- then ignore it
</I>
Sadly not, due to the mess that is the legacy content on the Web.


&gt;<i> It strikes me as the only way to handle the situation with anything like
</I>&gt;<i> scalability.
</I>
I agree (though in this case, I don't think we need the solution to scale 
much, as, as others have pointed out, the vocabulary space of the Web 
grows only very slowly).


On Tue, 11 Mar 2008, Doug Schepers wrote:
&gt;<i> 
</I>&gt;<i> I also want to emphasize, however, that the same situation obtains in 
</I>&gt;<i> reverse here.  SVG already has a wide deployment base on mobiles, and in 
</I>&gt;<i> legacy viewers, that demands strict content (with the odd exception in 
</I>&gt;<i> the case of namespace declaration in Adobe's viewer).  The network 
</I>&gt;<i> effect would be critically lessened if an incompatible serialization of 
</I>&gt;<i> SVG were deployed, as I said before.
</I>
I don't see any way to leverage the installed base of SVG renderers in 
handset interfaces to introduce vector graphics to text/html. Could you 
elaborate on how you would see that working?


On Tue, 11 Mar 2008, Jeff Schiller wrote:
&gt;<i>
</I>&gt;<i> In fairness, unlike XHTML, Henri's suggestion allows the existing 
</I>&gt;<i> deployed SVG content (i.e. conforming XML) to be used directly in HTML5, 
</I>&gt;<i> it just doesn't condem the content if it's non-conforming XML. My only 
</I>&gt;<i> fear is that this will eventually allow tutorials out there to drop some 
</I>&gt;<i> of the XML aspects and end up with non-conforming SVG fragments that 
</I>&gt;<i> cannot be read into tools as standalone documents.
</I>&gt;<i> 
</I>&gt;<i> If all SVG viewers and editors could be magically updated to support a 
</I>&gt;<i> text/html serialization of SVG then I'd be less concerned.
</I>
I don't think it would take magic -- it's not like SVG UAs implement their 
own XML parsers either, so it's just a matter of plugging in a new backend 
parser library, replacing, or rather augmenting, the XML one with an HTML 
one. Off-the-shelf text/html HTML5 parsers are already being written and 
deployed.


On Tue, 11 Mar 2008, Anne van Kesteren wrote:
&gt;<i>
</I>&gt;<i> SVG fragments in XHTML can already not be imported in SVG tools without 
</I>&gt;<i> issues. Consider references to elsewhere in the document (outside the 
</I>&gt;<i> fragment), dependencies on ECMAScript functions defined in an XHTML 
</I>&gt;<i> &lt;script&gt; block that resides in the &lt;head&gt; element, et cetera. In the end 
</I>&gt;<i> you want tools that support both and not just the graphic. After all, if 
</I>&gt;<i> all you care about is the grahpic, you might as well use &lt;object&gt; or 
</I>&gt;<i> &lt;img&gt;.
</I>
This is also true and is another reason to not consider this issue a 
design constraint.


On Mon, 10 Mar 2008, Jeff Schiller wrote:
&gt;<i>
</I>&gt;<i> Sorry, I mis-understood something earlier.  Can you please help me
</I>&gt;<i> understand why the following:
</I>&gt;<i> 
</I>&gt;<i> &lt;html ...&gt;
</I>&gt;<i>   &lt;body&gt;
</I>&gt;<i>   &lt;svg xmlns=&quot;<A HREF="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</A>
</I>&gt;<i> xmlns:xlink=&quot;<A HREF="http://www.w3.org/1999/xlink&quot;">http://www.w3.org/1999/xlink&quot;</A> ...&gt;
</I>&gt;<i>     &lt;a xlink:href=&quot;foo.svg&quot;&gt;&lt;circle .../&gt;&lt;/a&gt;
</I>&gt;<i>   &lt;/svg&gt;
</I>&gt;<i> &lt;/body&gt;
</I>&gt;<i> &gt;  &gt; &lt;/html&gt;
</I>&gt;<i> 
</I>&gt;<i> wouldn't work (i.e. copy-paste the SVG section into a &lt;?xml 
</I>&gt;<i> version=&quot;1.0&quot;?&gt; doc?  To my knowledge it would work just fine (and has).
</I>
If you manually extract the SVG part, yes. I think Henri is saying that 
raw text/html wouldn't work (whatever we end up doing).


On Mon, 10 Mar 2008, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> We cannot break output from Microsoft Office foremost. Also, as far as
</I>&gt;<i> colonless xmlns processing goes, we cannot let an xmlns on root to have an
</I>&gt;<i> effect because there all sorts of bogus declarations out there.
</I>
Indeed.


On Tue, 11 Mar 2008, Doug Schepers wrote:
&gt;<i> 
</I>&gt;<i> The fact is, there is a very large deployed base of SVG UAs on mobile 
</I>&gt;<i> devices, many hundreds of millions, that cannot easily be upgraded or 
</I>&gt;<i> revised.
</I>
If they can't be changed at all, they aren't really relevant, since they 
will never support text/html anyway.


On Tue, 11 Mar 2008, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> The conformance definition is not an effective way to achieve it, 
</I>&gt;<i> because with non-Draconian error handling, there *will* be a non-trivial 
</I>&gt;<i> proportion of instances where the embedded SVG island does not adhere to 
</I>&gt;<i> the conformance criteria and, therefore, won't parse as XML if extracted 
</I>&gt;<i> on the source text level.
</I>
Indeed, such content already existed even before we got involved!


&gt;<i> I am assuming non-Draconian error handling for two reasons:
</I>&gt;<i> 1) Experience with XML has shown that Draconian error handling is worse than
</I>&gt;<i> defined error recovery for Web formats.
</I>
Indeed, defined graceful error handling is a given for anything in HTML5 
or any WHATWG spec.


&gt;<i> 2) Draconian error handling would be bad strategy since it would work as 
</I>&gt;<i> an implementation deterrent: If a new browser can throw a fatal error on 
</I>&gt;<i> a page that legacy browsers parse to the end (even if the SVG parts 
</I>&gt;<i> don't render), the new browser risks losing market share, and browser 
</I>&gt;<i> vendors generally avert changes that would lead to market share loss.
</I>
Indeed. And this is especially relevant here given the existing bogus 
SVG-like content in text/html documents.


&gt;<i> I think there are two ways of addressing the editing use case more
</I>&gt;<i> effectively:
</I>&gt;<i> 1) Making the browser serialize a DOM range into XML (roughly like View
</I>&gt;<i> Selection Source serializes from the DOM in Firefox) and copying and pasting
</I>&gt;<i> the result as opposed to copying and pasting source.
</I>&gt;<i> 2) Adding a text/html parser to the SVG editor.
</I>
Both seem reasonable, indeed.


On Tue, 11 Mar 2008, Jeff Schiller wrote:
&gt;<i> 
</I>&gt;<i> FWIW, I wouldn't mind giving up the xmlns declarations on SVG.  Since 
</I>&gt;<i> I've been using it so long I have the namespaces memorized.  It's really 
</I>&gt;<i> not that hard to remember: XHTML, XLink are 1999, SVG is 2000.
</I>
...and MathML is 1998, but has an extra bit and uppercase letters...


&gt;<i> I end up looking up spec details on properties and attributes more often 
</I>&gt;<i> than looking those up.  I do recognize that not everyone will be able to 
</I>&gt;<i> do that.  What would be required to make the years optional in the 
</I>&gt;<i> namespace? :)
</I>
Actually for new namespaces that was resolved already. e.g. XBL2 has the 
namespace &quot;<A HREF="http://www.w3.org/ns/xbl&quot;.">http://www.w3.org/ns/xbl&quot;.</A>


&gt;<i> On the other hand, I don't want to give up case-sensitive 
</I>&gt;<i> elements/attributes nor quoted attributes since those are much harder to 
</I>&gt;<i> correct when importing SVG snippets into a standalone document for 
</I>&gt;<i> editing purposes...
</I>
Well, the case, as well as correct end tags, etc, can be kept if the 
author is disciplined. But we can't guarentee it would be correct, and it 
would end up being quite complicated to be case-sensitive for SVG but not 
for HTML. It could be done, though... The question is, is it worth keeping 
the case, when things like quote marks on attributes aren't going to be 
required? (I did end up making &lt;![CDATA[]]&gt; case-sensitive.)


&gt;<i> Not just your opinion.  There are many good reasons for not deviating 
</I>&gt;<i> from the syntax used in &quot;canonical SVG&quot;.  Pragmatic compatibility 
</I>&gt;<i> concerns would be enough for me, but another is that I honestly think 
</I>&gt;<i> that unquoted attribute values would be ultimately more confusing to 
</I>&gt;<i> authors.
</I>
It hasn't been that confusing to text/html authors, all things considered.


On Sun, 16 Mar 2008, Ben Boyle wrote:
&gt;<i> 
</I>&gt;<i> Scenario:
</I>&gt;<i> 
</I>&gt;<i> I am using text/html. You've sold me on not deploying web content as 
</I>&gt;<i> xhtml. I've embedded that html snippet, and I've made that error in the 
</I>&gt;<i> code. Unlike me to forget quotes of all things, but there you go. I'm 
</I>&gt;<i> seeing the red circle stroked blue, it's all cool.
</I>&gt;<i> 
</I>&gt;<i> Suddenly I am enlightened that I should use an SVG file and link to it, 
</I>&gt;<i> rather than embed and serve this same snippet of SVG on every page. I 
</I>&gt;<i> dutifully move the SVG code into logo.svg, link it with an img tag 
</I>&gt;<i> and... what the? The circle went black!
</I>&gt;<i> 
</I>&gt;<i> These things are authoring nightmares. Just don't do it. Consistency 
</I>&gt;<i> please!
</I>
Actually it wouldn't go black, it would just say &quot;syntax error&quot;, and if 
you used an &lt;img&gt; element, would display the alt text instead.


On Sun, 16 Mar 2008, Ben Boyle wrote:
&gt;<i>
</I>&gt;<i> You want to make a best effort to render SVG, even broken SVG. You know, 
</I>&gt;<i> I'm not against that. It's how XHTML should be handled (in the browser, 
</I>&gt;<i> for the end-user). If you are going to render *something* when that SVG 
</I>&gt;<i> is embedded in the page, then yes the red circle with blue stroke is the 
</I>&gt;<i> obvious intent of the author. Can you render the same when that SVG is 
</I>&gt;<i> placed in logo.svg and loaded in via &lt;img&gt;, for all the same reasons 
</I>&gt;<i> (what users wants to see a broken image? none!), and for the sake of 
</I>&gt;<i> consistency.
</I>
Changing XML parsing rules is out of scope for this group.


On Sat, 15 Mar 2008, Doug Schepers wrote:
&gt;<i>
</I>&gt;<i> No, there's a third way.  Have non-draconian error handling that does 
</I>&gt;<i> not cause the parser to halt, but which does ensure that SVG that 
</I>&gt;<i> wouldn't work in existing SVG UAs doesn't render in HTML5 UAs.  It would 
</I>&gt;<i> still be parsed, put into the DOM, but attributes with unquoted values 
</I>&gt;<i> (and the rest of that element) aren't rendered.  That way SVG isn't 
</I>&gt;<i> fractured, and it doesn't break the error recovery of HTML for non-SVG 
</I>&gt;<i> elements.
</I>
The SVG group tried that with SVG 1.0 and 1.1, and nobody implemented it 
(SVG used to require that erroneous content not be rendered without an 
error message; SVG 1.2 changes this to an &quot;ignore errors&quot; model more like 
CSS and, to some extent, HTML). Why would we be any more able to get 
people to implement it in text/html?


On Sat, 15 Mar 2008, Maciej Stachowiak wrote:
&gt;<i>
</I>&gt;<i> HTML has the feature of two serializations: a classic serialization that 
</I>&gt;<i> is error-tolerant, and an XML-based serialization that has draconian 
</I>&gt;<i> error handling. These have different costs and benefits, ultimately it 
</I>&gt;<i> is a benefit to HTML authors that they have a choice. I think SVG 
</I>&gt;<i> deserves to have this feature as well, there's no reason it should fall 
</I>&gt;<i> short of HTML in this regard. Supporting SVG inline in text/html seems 
</I>&gt;<i> like a good opportunity to add this feature to SVG.
</I>
That seems like a reasonable request.


On Sun, 16 Mar 2008, Charles McCathieNevile wrote:
&gt;<i>
</I>&gt;<i> On Sat, 15 Mar 2008 22:12:34 -0700, Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; HTML has the feature of two serializations: a classic serialization 
</I>&gt;<i> &gt; that is error-tolerant, and an XML-based serialization that has 
</I>&gt;<i> &gt; draconian error handling. These have different costs and benefits, 
</I>&gt;<i> &gt; ultimately it is a benefit to HTML authors that they have a choice. I 
</I>&gt;<i> &gt; think SVG deserves to have this feature as well, there's no reason it 
</I>&gt;<i> &gt; should fall short of HTML in this regard. Supporting SVG inline in 
</I>&gt;<i> &gt; text/html seems like a good opportunity to add this feature to SVG.
</I>&gt;<i> 
</I>&gt;<i> Perhaps. The cans of worms are different though. HTML elements are 
</I>&gt;<i> basically content - in principle, the text tree is reasonably useful 
</I>&gt;<i> (unless you have images). SVG is about images - having parts of an image 
</I>&gt;<i> not render can drastically alter the semantics of the image.
</I>
More so than having part of a text document not render?


&gt;<i> SVG has a mechanism for handling broken subtrees, which involves showing 
</I>&gt;<i> that it is broken.
</I>
This was changed in SVG 1.2, errors are not just ignored, or handled in 
some other default way, except for XML syntax errors.


On Sat, 15 Mar 2008, Boris Zbarsky wrote:
&gt;<i>
</I>&gt;<i> Doug Schepers wrote:
</I>&gt;<i> &gt;  so a new edition of XLink could, in theory, define an additional
</I>&gt;<i> &gt; &quot;human-friendly&quot; namespace name, like &quot;<A HREF="http://w3.org/xlink&quot;.">http://w3.org/xlink&quot;.</A>
</I>&gt;<i> 
</I>&gt;<i> This would be a huge step in usability for all the W3C specs.
</I>&gt;<i> 
</I>&gt;<i> Heck, it could even be: &quot;w3c:xlink&quot;, right?  And &quot;w3c:xhtml&quot;, &quot;wc3:svg&quot;, 
</I>&gt;<i> etc. As an occasional XML author, that would save me from having to 
</I>&gt;<i> google things like &quot;xhtml namespace&quot; every time I need to write an XHTML 
</I>&gt;<i> document (and similar for svg, etc) or having to find some document to 
</I>&gt;<i> copy-paste from.
</I>&gt;<i> 
</I>&gt;<i> I would love for this to happen.
</I>
For text/html, I've sidestepped this by making the declarations implicit 
and thus optional in the serialisation.


On Mon, 10 Mar 2008, Sam Ruby wrote:
&gt;<i> 
</I>&gt;<i> There are two ways to get a generic solution: top down and bottom up.  
</I>&gt;<i> By the former, I mean trying to specify a syntax for a generic solution, 
</I>&gt;<i> and then seeing if it applies to a number of specific use cases.  By the 
</I>&gt;<i> former, I mean taking a number of use cases, addressing them, and then 
</I>&gt;<i> seeing what (if anything) can be generalized.
</I>&gt;<i> 
</I>&gt;<i> SVG has mixed case attributes, an element named title, and makes use of 
</I>&gt;<i> xlink.  MathML has foreign object.  Both continue to evolve, and any 
</I>&gt;<i> HTML5 solution should be prepared for such evolution.  Anything that 
</I>&gt;<i> completely (or even mostly) satisfies the above constraints likely can 
</I>&gt;<i> be generalized. If focusing first on such a set of requirements in a 
</I>&gt;<i> bottoms-up fashion enables progress to be made faster, then I'm all for 
</I>&gt;<i> it.
</I>
Unfortunately I couldn't find a top-down approach that was compatible with 
existing documents, and the bottom-up approach ended up being specific to 
the vocabularies we were considering (and still wasn't perfect, especially 
for handling of broken &lt;svg&gt; fragments today, though the problem at least 
isn't as fatal as losing the remainder of the page).


&gt;<i> Microsoft's implementation is also reasonably general (albeit with a 
</I>&gt;<i> number of restrictions).  Since compatibility with IE to the extent it 
</I>&gt;<i> makes sense is a goal, this may also help.
</I>
I wasn't able to reproduce anything useful with Microsoft's 
implementation.


On Tue, 11 Mar 2008, Doug Schepers wrote:
&gt;<i> 
</I>&gt;<i> I'm very glad to see this subject receiving serious attention in this 
</I>&gt;<i> WG. I'll have more to say in subsequent emails, but I just wanted to 
</I>&gt;<i> note here that the SVG WG has also discussed this quite a lot, and we 
</I>&gt;<i> prepared a list of use cases and possible solutions that we intended as 
</I>&gt;<i> a conversation starter. I put them in the HTML Wiki, for reference. 
</I>&gt;<i> [1][2]
</I>&gt;<i> 
</I>&gt;<i> [1] <A HREF="http://lists.w3.org/Archives/Public/public-html/2007Dec/0013.html">http://lists.w3.org/Archives/Public/public-html/2007Dec/0013.html</A>
</I>&gt;<i> [2] <A HREF="http://esw.w3.org/topic/HTML/SVGInTextHTML">http://esw.w3.org/topic/HTML/SVGInTextHTML</A>
</I>
Thanks for this, it was useful to check that I hadn't missed anything 
unintentionally.


On Sat, 15 Mar 2008, Chasen Le Hara wrote:
&gt;<i> 
</I>&gt;<i> I agree that inline SVG in text/html could be a great opportunity to 
</I>&gt;<i> bring non-draconian parsing to SVG. But, I agree with Ben that a 
</I>&gt;<i> &quot;higher&quot; group should give us the go-ahead to allow for error-tolerance 
</I>&gt;<i> authoring.
</I>
I'm not clear why we would need go-ahead for this... the strategy of &quot;take 
initiative, ask for forgiveness&quot; is generally more productive than &quot;ask 
for permission&quot;.


On Wed, 12 Mar 2008, Anne van Kesteren wrote:
&gt;<i>
</I>&gt;<i> Below are some use cases for SVG in text/html from Erik Dahlstr&#195;&#182;m. He's 
</I>&gt;<i> one of Opera's SVG monkeys.. implementors and is also on the SVG WG. I 
</I>&gt;<i> reworded some of them in the process so you can blame me for typos. 
</I>&gt;<i> (FWIW, I agree with the use cases :-))
</I>
They're not really use cases, more reasons why a particular soluton (&quot;it&quot;) 
are a good thing. :-)


&gt;<i> Use case #1
</I>&gt;<i> -----------
</I>&gt;<i> It makes it easier to write scripts that operate on the document as a whole,
</I>&gt;<i> for example so that you don't have to worry about getElementById() being
</I>&gt;<i> called in the right content document.
</I>&gt;<i> 
</I>&gt;<i> Use case #2
</I>&gt;<i> -----------
</I>&gt;<i> It makes it possible to have selfcontained SVG+HTML documents without the need
</I>&gt;<i> for data: URIs. data: URIs are not sufficient as they can be limited in size,
</I>&gt;<i> require additional processing, and will be in a separate frame (see also #1).
</I>&gt;<i> 
</I>&gt;<i> Use case #3
</I>&gt;<i> -----------
</I>&gt;<i> It would eliminate the need for using XHTML when using SVG. This is important
</I>&gt;<i> as it lowers the bar for deploying SVG on the Web significantly. The different
</I>&gt;<i> media type and well-formedness constraints are proving to be problematic.
</I>&gt;<i> 
</I>&gt;<i> Use case #4
</I>&gt;<i> -----------
</I>&gt;<i> It makes it possible to do retained-mode graphics without using external
</I>&gt;<i> files.
</I>&gt;<i> 
</I>&gt;<i> Use case #5
</I>&gt;<i> -----------
</I>&gt;<i> It makes it easier to do interactive graphics than with using &lt;canvas&gt;. SVG
</I>&gt;<i> uses the DOM so paths, shapes, etc. can have event listeners registered and
</I>&gt;<i> can be moved/interacted with/etc. on their own.
</I>&gt;<i> 
</I>&gt;<i> Use case #6
</I>&gt;<i> -----------
</I>&gt;<i> It makes it possible to reference resources such as gradients, arbitrary
</I>&gt;<i> clip-paths, symbols etc, from other SVG fragments in HTML. This makes
</I>&gt;<i> documents more compact.
</I>&gt;<i> 
</I>&gt;<i> Example:
</I>&gt;<i> &lt;html&gt;
</I>&gt;<i>   &lt;svg&gt;
</I>&gt;<i>     &lt;linearGradient id=&quot;somegradient&quot; ...&gt;
</I>&gt;<i>     ...
</I>&gt;<i>     &lt;/linearGradient&gt;
</I>&gt;<i>   &lt;/svg&gt;
</I>&gt;<i>   more html
</I>&gt;<i>   &lt;svg&gt;
</I>&gt;<i>     &lt;rect fill=&quot;url(#somegradient)&quot; .../&gt;
</I>&gt;<i>   &lt;/svg&gt;
</I>&gt;<i> &lt;/html&gt;
</I>
The above are all now supported.


On Sat, 15 Mar 2008, Ben Boyle wrote:
&gt;<i>
</I>&gt;<i> I expect the HTML document to be recovered, and that's my top priority. 
</I>&gt;<i> I expect the SVG/MathML to be rendered as an error, like a broken 
</I>&gt;<i> image/broken object. If I referenced an image (jpeg, gif, etc.) that was 
</I>&gt;<i> broken, the browser wouldn't attempt to render it. I'd like to see 
</I>&gt;<i> SVG/MathML handled in the same way.
</I>
Actually, browsers ignore errors in JPEGs, GIFs, even SVG images already, 
for many classes of errors.


&gt;<i> Let's say I create logo.svg to use on a website. I've made a mistake in 
</I>&gt;<i> my logo.svg code, but I've gone ahead and used it anyway (I know, this 
</I>&gt;<i> highly unrealistic scenario almost never happens in the real world, but 
</I>&gt;<i> bear with me!) Let's say I included it in my HTML using the img 
</I>&gt;<i> element... when I view my page in the browser -- oops! I see a broken 
</I>&gt;<i> image. I will have to fix my SVG.
</I>
That depends on the error. A syntax error that makes the document 
malformed will cause a different error than an error in the syntax of an 
attribute or with a stray or misnamed element or the use of the wrong 
namespace for some of the elements or attributes.


&gt;<i> Let's say I embed that SVG in the HTML code, rather than use the img 
</I>&gt;<i> tag. I want the exact same thing to happen: browser shows a broken 
</I>&gt;<i> image, but the rest of the HTML document &quot;works&quot;. Are the implementers 
</I>&gt;<i> groaning over my naivety here? I know the situation is different from a 
</I>&gt;<i> programming perspective ...
</I>
Making the image display as a broken image would be relatively hard, since 
SVG doesn't have that as a concept. We would have to extend SVG itself to 
support that state.

I'm not sure it makes sense to port the XML error handling to SVG in HTML. 
That's a syntax-level error handling concern, it seems like the HTML 
syntax should keep its error handling behaviour. (Indeed, Maciej 
explicitly requested that as a feature.) SVG itself doesn't have draconian 
error handling, it has error handling of the &quot;ignore and continue&quot; 
variety.


On Wed, 19 Mar 2008, Erik Dahlstr&#246;m wrote:
&gt;<i>
</I>&gt;<i> I find it an acceptable trade-off that not every single SVG ever created 
</I>&gt;<i> can be copy-pasted into an HTML document. However, any valid SVG 
</I>&gt;<i> document fragment that doesn't depend on having XML PI:s or DOCTYPEs 
</I>&gt;<i> prior to the root svg element to be a fully XML-wellformed SVG document, 
</I>&gt;<i> should be copy-pastable into HTML and should work IMHO. Or in other 
</I>&gt;<i> words: if you can copy-paste the svg root (and its children) into a new 
</I>&gt;<i> empty document and that is still a valid SVG document, then it should 
</I>&gt;<i> also be work when pasted into an HTML document.
</I>&gt;<i> 
</I>&gt;<i> This is similar to how SVG inline in any other XML markup would work 
</I>&gt;<i> anyway, that is: you can't put XML PI:s in the middle of the document. I 
</I>&gt;<i> think it's a non-goal to allow that. If you need that then you should 
</I>&gt;<i> use an external file, plain and simple. The same argument holds for 
</I>&gt;<i> DOCTYPE as well.
</I>&gt;<i> 
</I>&gt;<i> So, given these constraints, is &quot;nothing&quot; still too strong? :)
</I>
Well, do you accept the lack of support for prefixes? i.e. that the SVG 
tag names have to be without colons?


On Wed, 19 Mar 2008, Sam Ruby wrote:
&gt;<i>
</I>&gt;<i> Examples of a few things worthy of further discussion:
</I>&gt;<i> 
</I>&gt;<i> a) Psychotic use of namespaces[1]
</I>&gt;<i> [1] <A HREF="http://lists.xml.org/archives/xml-dev/200204/msg00170.html">http://lists.xml.org/archives/xml-dev/200204/msg00170.html</A>
</I>
Not supported in the proposal.

&gt;<i> b) &lt;![CDATA[ ]]&gt; (I'd say nice to have)
</I>
Supported.

&gt;<i> c) Attribute Value Normalization[2]
</I>&gt;<i> [2] <A HREF="http://www.w3.org/TR/REC-xml/#AVNormalize">http://www.w3.org/TR/REC-xml/#AVNormalize</A>
</I>
Not supported.

&gt;<i> d) xml:space
</I>
Supported.


On Sun, 16 Mar 2008, Philip Taylor wrote:
&gt;<i>
</I>&gt;<i> I have a Python script that provides a web interface to some particular 
</I>&gt;<i> application.
</I>&gt;<i> 
</I>&gt;<i> It responds to HTTP requests by executing the application (with certain 
</I>&gt;<i> input parameters coming from the request) to generate some data. It 
</I>&gt;<i> creates an HTML table displaying the data, and executes Graphviz to 
</I>&gt;<i> produce a pretty picture of the same data.
</I>&gt;<i> 
</I>&gt;<i> To avoid executing the application more times that necessary, and to 
</I>&gt;<i> avoid adding some complex caching logic into the script, it has to 
</I>&gt;<i> return the table and graph in a single HTTP response.
</I>&gt;<i> 
</I>&gt;<i> To allow decent-quality zooming of the graph, it is generated with 
</I>&gt;<i> Graphviz's SVG output option. (This also keeps the file size down - the 
</I>&gt;<i> uncompressed SVG is about 20% of the size of an equivalent PNG.)
</I>&gt;<i> 
</I>&gt;<i> To have the SVG automatically take up the right amount of space on the 
</I>&gt;<i> page, and to allow easy 'view source' debugging of the SVG, it is output 
</I>&gt;<i> inline in the HTML response (instead of in a base64 data: URI).
</I>&gt;<i> 
</I>&gt;<i> The Graphviz SVG output is first parsed into a DOM in Python. The &lt;svg&gt; 
</I>&gt;<i> element is extracted (hence removing the &lt;!DOCTYPE&gt; etc), then modified 
</I>&gt;<i> a bit (removing some links and styles, changing some title text, etc), 
</I>&gt;<i> then serialised (using the DOM library's standard XML serialiser) and 
</I>&gt;<i> concatenated into the XHTML response string.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> A later version of this system added some client-side interactivity. The 
</I>&gt;<i> HTML code contains something like:
</I>&gt;<i> 
</I>&gt;<i>     &lt;script&gt;&lt;![CDATA[
</I>&gt;<i>     function mouseover() {
</I>&gt;<i>         this.childNodes[1].setAttribute('class', 'hovered');
</I>&gt;<i>     }
</I>&gt;<i>     window.onload = function () {
</I>&gt;<i>         var a = document.getElementsByTagNameNS(
</I>&gt;<i>             '<A HREF="http://www.w3.org/2000/svg',">http://www.w3.org/2000/svg',</A> 'a');
</I>&gt;<i>         for (var i = 0; i &lt; a.length; ++i) {
</I>&gt;<i>             a[i].onmouseover = mouseover; // plus similar for mouseout
</I>&gt;<i>         }
</I>&gt;<i>     }
</I>&gt;<i>     ]]&gt;&lt;/script&gt;
</I>&gt;<i>     &lt;style&gt;
</I>&gt;<i>     ellipse.hovered { fill: #ff6 !important; }
</I>&gt;<i>     path.hovered { stroke: #f00 !important; stroke-width: 2px; }
</I>&gt;<i>     &lt;/style&gt;
</I>&gt;<i> 
</I>&gt;<i> For SVG in text/html, it would be good if the same code still worked - I don't
</I>&gt;<i> want to have to remember two different ways of processing DOMs, and I don't
</I>&gt;<i> want to learn about CSS namespaces.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The HTML response can contain multiple SVG graphs. Since they are all 
</I>&gt;<i> generated independently by Graphviz, they all have a &lt;g id=&quot;graph0&quot; ...&gt; 
</I>&gt;<i> (plus lots of other common IDs). It would take far too much effort to 
</I>&gt;<i> uniquify the IDs and fix up all the references (particularly since the 
</I>&gt;<i> references can be in style=&quot;url(#...)&quot; too).
</I>&gt;<i> 
</I>&gt;<i> Currently I never use the IDs, so that doesn't matter, but this will 
</I>&gt;<i> break if the SVG starts containing ID references (e.g. for &lt;defs&gt;) or if 
</I>&gt;<i> I start using getElementById, so it would be good if this overlapping ID 
</I>&gt;<i> situation could be handled well. (E.g. references inside an &lt;svg&gt;-rooted 
</I>&gt;<i> subtree could preferentially match IDs in the same subtree, before 
</I>&gt;<i> looking outside to the whole HTML document.)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The interactive script also needs to extract some data from graph nodes (a
</I>&gt;<i> list of paths leading to that node) when the user selects them, to display in
</I>&gt;<i> an HTML table. Currently it does something very much like:
</I>&gt;<i> 
</I>&gt;<i>   &lt;svg xmlns:custom=&quot;custom-data&quot; ...&gt;
</I>&gt;<i>     ...
</I>&gt;<i>     &lt;g custom:paths=&quot;[[0,1,2],[3,4,2]]&quot; .../&gt;
</I>&gt;<i>     ...
</I>&gt;<i>   &lt;/svg&gt;
</I>&gt;<i> 
</I>&gt;<i> where the Python script adds the custom:paths attribute, and the onmouseover
</I>&gt;<i> script does getAttributeNS('custom-data', 'paths') and parses and processes
</I>&gt;<i> the data. I don't much care about conformance, but I need some way to attach
</I>&gt;<i> arbitrary data to elements, and it shouldn't be harder than adding an
</I>&gt;<i> attribute.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This would all be slightly nicer if I didn't have to spend time looking 
</I>&gt;<i> up the XHTML namespace and making sure the whole HTML part of the 
</I>&gt;<i> response was well-formed XML. It isn't a compelling case for supporting 
</I>&gt;<i> SVG in text/html, since it works alright as application/xhtml+xml, but 
</I>&gt;<i> if SVG is supported to some extent then it would be nice to support this 
</I>&gt;<i> case too, rather than only supporting simple cases and telling people to 
</I>&gt;<i> go away and use XHTML if they want something fancier.
</I>
I didn't find a solution for the ID problem -- use unique IDs e.g. using 
GUIDs.

The custom data thing on SVG won't work in HTML5 right now, but if the 
data-* concept (the same but for HTML) takes off, then I think we should 
ask the SVG and MathML groups if they mind supporting the same syntax.

I don't think we should ask them until it is a proven technology, though, 
as that would risk polluting those languages with no benefit.


On Sun, 16 Mar 2008, Henri Sivonen wrote:
&gt;<i>
</I>&gt;<i> Here's one way of solving this:
</I>&gt;<i>  * Removing the requirement for ID uniqueness in XML and HTML.
</I>&gt;<i>  * Making a change in parent vs. child element namespace establish a scope.
</I>&gt;<i>  * Making the presence of the xml:base attribute establish a scope.
</I>&gt;<i>  * Making ID matching take to arguments: the ID and a context node (i.e.
</I>&gt;<i> moving gEBI on Node so that 'this' becomes the context node).
</I>&gt;<i>  * Making ID references prefer matches in the same scope moving up the scope
</I>&gt;<i> tree if there is no match is the inner scope.
</I>&gt;<i> 
</I>&gt;<i> All in all, solving this problem would require some drastic changes. The 
</I>&gt;<i> problem may be too costly to solve. :-(
</I>&gt;<i> 
</I>&gt;<i> It seems to me that the least expensive fix is to change SVG generators 
</I>&gt;<i> to use GUID-style IDs to make the probability of an ID clash negligible.
</I>
I agree with your conclusion (too costly, use GUIDs).


On Tue, 25 Mar 2008, Jeff Schiller wrote:
&gt;<i> 
</I>&gt;<i> Here's another use case:
</I>&gt;<i> 
</I>&gt;<i> 5. The ability to animate elements in a web page (hypertext, vector
</I>&gt;<i> graphics) without using script.
</I>&gt;<i>   * sizes, positions, opacities, colors, transforms (basically most
</I>&gt;<i> attributes and properties)
</I>&gt;<i>   * time-based and DOM event triggering for begin/end
</I>&gt;<i>   * linear, spline interpolation
</I>&gt;<i>   * inlined (for simple web pages) and non-inlined animations (to promote
</I>&gt;<i> separation of content and presentation)
</I>
Do the SMIL parts of SVG handle this satisfactorily?


On Tue, 25 Mar 2008, T.V Raman wrote:
&gt;<i>
</I>&gt;<i> To animating vectors, add the same for math equations.
</I>&gt;<i> 
</I>&gt;<i> the cases written down so far give you static mathematics --- but
</I>&gt;<i> it would be nice to 
</I>&gt;<i> be able use the live hypertext features of the Web to
</I>&gt;<i> expand/collapse equations to explain a complex proof. This can be
</I>&gt;<i> done today with careful tweaking of CSS bits if you really know
</I>&gt;<i> what you're doing, but writing it is difficult. 
</I>
Does MathML's &lt;maction&gt; address this enough?


On Tue, 25 Mar 2008, Erik Dahlstr&#246;m wrote:
&gt;<i> &gt;      Priorities:
</I>&gt;<i> &gt;       * Compatibility with existing graphics packages
</I>&gt;<i> 
</I>&gt;<i> Reading that sounds to me like that should cover the inclusion of 
</I>&gt;<i> namespaces, since many/most svg editors put data in custom namespaces in 
</I>&gt;<i> the svg files, and that data should not be lost when parsed (doctype and 
</I>&gt;<i> XML PI:s to be excluded). Also for things like &lt;svg:metadata&gt; I'd say 
</I>&gt;<i> that it's pretty much a requirement that data inside it isn't lost when 
</I>&gt;<i> it's parsed to DOM. Furthermore it's not that uncommon that people want 
</I>&gt;<i> to put custom data in namespaced attributes in svg, and I would expect 
</I>&gt;<i> that to continue to work even if used inline in HTML.
</I>
&lt;svg:metadata&gt; isn't supported by this proposal, and the namespaced 
attributes end up in the wrong namespace in HTML UAs (and are 
non-conforming anyway, so they'll get flagged as errors).

Do graphics really depend on this data?


&gt;<i>   Use-case: enable new svg/mathml features as they become available, so that
</I>&gt;<i> people can use them even if inline in HTML.
</I>
Supported.


&gt;<i>   Use-case: ability to access custom (namespaced) data specified in e.g.
</I>&gt;<i> svg:metadata.
</I>
Could you elaborate on this use case? You have it more phrased as a 
requirement than a realistic use case. I don't understand what graphics 
would rely on proprietary namespaces like this.


On Tue, 25 Mar 2008, James Graham wrote:
&gt;<i> 
</I>&gt;<i> Just to complete the circle, I should mention the use cases for 
</I>&gt;<i> html-inside-maths and html-inside graphics. As an example of the first 
</I>&gt;<i> consider a mathematics tutor with questions like
</I>&gt;<i> 
</I>&gt;<i> 4/9 = ?/3
</I>&gt;<i> 
</I>&gt;<i> Where the ? is to be filled in by the student. This seems like a good 
</I>&gt;<i> use for a html input element inside maths content.
</I>
Supported (though MathML maybe should be explicit about how to handle 
HTML in the various elements that text/html now supports HTML in).


On Tue, 25 Mar 2008, Maciej Stachowiak wrote:
&gt;<i> 
</I>&gt;<i> * Include &quot;bindings&quot; in the style of XBL, XBL2 or Windows HTCs inline in 
</I>&gt;<i> a text/html document, much as scripts and stylesheets can be included 
</I>&gt;<i> inline.
</I>&gt;<i> 
</I>&gt;<i> I'm not sure this is very strong (external files only for bindings in 
</I>&gt;<i> text/html doesn't seem like a huge problem) but XBL2 can be supported 
</I>&gt;<i> inline in application/xhtml+xml, so presumably this isn't considered 
</I>&gt;<i> completely pointless. I can imagine this being handy during exploratory 
</I>&gt;<i> programming, or in cases where it's desirable to deliver as much as 
</I>&gt;<i> possible in a single resource so everything goes inline in the HTML.
</I>
I haven't tried to support this. Supporting XBL2 in HTML5 seems premature, 
since XBL2 hasn't yet been proved in the market.


On Sun, 30 Mar 2008, David Carlisle wrote:
&gt;<i> 
</I>&gt;<i> Unlike the html case where you can try to specify full application 
</I>&gt;<i> behaviour even in error situations, mathml is intended primarily to be 
</I>&gt;<i> hosted by some other language (most mathematical expressions live in 
</I>&gt;<i> some wider context) and the application behaviour of xyz+mathml has to 
</I>&gt;<i> be mainly influenced by the application behaviour of the host language 
</I>&gt;<i> xyz.
</I>&gt;<i> 
</I>&gt;<i> So basically the current situation is that the above isn't MathML so if 
</I>&gt;<i> you give it to a MathML (only) system it will generate an error, but if 
</I>&gt;<i> you give it to a system that defines some language (such as html+mathml) 
</I>&gt;<i> that isn't defined by the mathml spec, it may do something else such as 
</I>&gt;<i> silently ignore the error.
</I>&gt;<i> 
</I>&gt;<i> In an HTML5 context you are not going to want (the equivalent of) a 
</I>&gt;<i> validity error on parsing which kills the entire document, that is 
</I>&gt;<i> clear. But the fixup should only be, that an implied merror (or mtext, 
</I>&gt;<i> perhaps) is inserted
</I>&gt;<i> 
</I>&gt;<i> &lt;math&gt;1+2&lt;/math&gt;
</I>&gt;<i> 
</I>&gt;<i> couuld perhaps parse as (preferably)
</I>&gt;<i> 
</I>&gt;<i> &lt;math&gt;&lt;merror&gt;&lt;mtext&gt;1+2&lt;/mtext&gt;&lt;/merror&gt;&lt;/math&gt;
</I>&gt;<i> 
</I>&gt;<i> rendering typically as 1+2 in a red border
</I>&gt;<i> 
</I>&gt;<i> or perhaps we could consider whether it should parse as
</I>&gt;<i> 
</I>&gt;<i> &lt;math&gt;&lt;mtext&gt;1+2&lt;/mtext&gt;&lt;/math&gt;
</I>&gt;<i> 
</I>&gt;<i> redering as 1+2 with no mathematical spacing refinements.
</I>
For compatibility with existing Web content (a lot of which just has 
&lt;math&gt;...&lt;/math&gt; with text) I have made HTML5 specify that text runs in 
MathML fragments must be treated like &lt;mtext&gt; would be.


On Sun, 30 Mar 2008, David Carlisle wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; What are the error handling rules for standalone MathML? Wouldn't they 
</I>&gt;<i> &gt; want to be the same as for MathML in HTML?
</I>&gt;<i> 
</I>&gt;<i> Well first we need to make sure that &quot;MathML in HTML&quot; bears some 
</I>&gt;<i> resemblance to MathML, which is something that you seem to be suggesting 
</I>&gt;<i> is most definitely not the case. If the Markup language is 
</I>&gt;<i> unrecognisable as MathML it makes no sense to ask if the error behaviour 
</I>&gt;<i> is the same.
</I>
The proposal is that they be the same.


&gt;<i> But assuming that the final markup is recognisably MathML, you may still 
</I>&gt;<i> want different error behaviour. In particular the case of embeded html 
</I>&gt;<i> elements. If you stick an html element in the middle of a mathml 
</I>&gt;<i> expression, that clearly is an error condition in a pure mathml 
</I>&gt;<i> application. However you may (or may not) want to make this a defined 
</I>&gt;<i> non-error behaviour in html+mathml.
</I>
I haven't defined anything at the semantics level, though the parse level 
does allow HTML in &lt;mn&gt;, &lt;mo&gt;, etc, and the rendering level will likely 
define this more (possibly by reference to CSS).


On Mon, 31 Mar 2008, David Carlisle wrote:
&gt;<i> 
</I>&gt;<i> Silently fixing up a three argument fraction so that the second two 
</I>&gt;<i> arguments are arbitrarily concatenated into a denominator is simply the 
</I>&gt;<i> wrong thing to do whatever syntax is chosen.  In an HTML context you 
</I>&gt;<i> want to be able to fix things up so you can complete the parse of the 
</I>&gt;<i> document, but the result shouldd be flagged as an error either visually 
</I>&gt;<i> or in the dom or somewhere.
</I>
I've made this a requirement of HTML5+MathML processors.


On Mon, 31 Mar 2008, Justin James wrote:
&gt;<i> 
</I>&gt;<i> Right now, we are only accounting for MathML. Even when we discuss this 
</I>&gt;<i> issue as not MathML-specific, we are thinking only in that context. 
</I>&gt;<i> What's to happen if I come up with my own DOM and want to embed it? Do I 
</I>&gt;<i> also have to account for, in my DOM, these kinds of issues? Do I submit 
</I>&gt;<i> it to the W3C and hope that the handling rules make it into HTML 6?
</I>
If you want browsers to support your language, then yes, you need to get 
the buy-in from the wider Web community. That's the case regardless of 
whether we have a generic syntax system like XML, or a language-specific 
syntax like text/html's.


&gt;<i> Allow the HTML author to embed an OBJECT reference to a parser that 
</I>&gt;<i> handles their format. Problem solved.
</I>
In what form does this parser come? Will it work on all platforms?


&gt;<i> In other words, what makes MathML (or *ML) so special that we feel the need
</I>&gt;<i> to cater to it in HTML 5?
</I>
Mathematics are an important part of humanity's legacy and culture, and an 
absolutely key part to almost any future progress in technology, science, 
and any art that relies on new technology. Music, video, printing, space 
travel, medicine, it all relies on mathematics. Given the importance of 
mathematics to our society, we should absolutely support it on the Web, 
and the Web is 99.8% HTML.


On Mon, 31 Mar 2008, Justin James wrote:
&gt;<i> 
</I>&gt;<i> Which is really my stance. :) If people really want to be able to embed 
</I>&gt;<i> MathML (or any other format), they can write browser plugins that do 
</I>&gt;<i> this.
</I>
How would I view a MyMathPluginML-enabled Web page on my iPod Touch? I 
cannot install Web plugins on that platform, and it is highly likely that 
even if I could, no plugin would be available for that platform anyway.

Maths is a key part of our heritage, it deserves to be a first-class 
citizen on the Web.


On Mon, 31 Mar 2008, Bruce Miller wrote:
&gt;<i> 
</I>&gt;<i> My concern was that the browser, after parsing whatever form into a DOM, 
</I>&gt;<i> would be required (or _very_ strongly encouraged) to allow exporting 
</I>&gt;<i> that DOM as XML.  Then, _any_ MathML (ditto SVG) application could use 
</I>&gt;<i> the result, including old, strict MathML applications on the one hand, 
</I>&gt;<i> to HTML5 browsers on the other.
</I>
I've added encouragement to this effect.


On Tue, 1 Apr 2008, Sam Ruby wrote:
&gt;<i> Ian Hickson wrote on 03/31/2008 08:43:16 PM:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would expect that we would allow the xmlns=&quot;&quot; attribute on &lt;math&gt; to 
</I>&gt;<i> &gt; have the MathML namespace, in the same way as we allow xmlns=&quot;&quot; on 
</I>&gt;<i> &gt; &lt;html&gt; to contain the XHTML namespace. It wouldn't have any effect, 
</I>&gt;<i> &gt; though.
</I>&gt;<i> 
</I>&gt;<i> Such attributes will have an effect in IE8; and, in fact, as I 
</I>&gt;<i> understand it be necessary for proper interoperation (with what for now 
</I>&gt;<i> is hypothetical) IE8 plugins that might support MathML.
</I>
Actually I haven't been able to reproduce this IE8 behaviour.


On Sat, 29 Mar 2008, William F Hammond wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; One of the use cases is the mixing of graphics and form controls into 
</I>&gt;<i> &gt; equations. Is it possible to extend MathML to allow specific HTML5 
</I>&gt;<i> &gt; phrasing-level elements (like &lt;em&gt;, &lt;img&gt;, &lt;input&gt;, also maybe the 
</I>&gt;<i> &gt; &lt;svg&gt; element) wherever the &lt;mglyph&gt; element is currently allowed, or 
</I>&gt;<i> &gt; something along those lines?
</I>&gt;<i> 
</I>&gt;<i> Not anywhere &lt;mglyph&gt; is allowed, but maybe a small number of these 
</I>&gt;<i> inside &lt;mtext&gt; where the recursive content is presumably ignored under 
</I>&gt;<i> pasting into computer algebra systems.
</I>
Right now I've allowed it anywhere &lt;mglyph&gt; is allowed, so that, e.g., SVG 
can be used to draw an operator, or HTML can be used to put an input 
control instead of a number in an equation solving question.


On Tue, 1 Apr 2008, Neil Soiffer wrote:
&gt;<i>
</I>&gt;<i> That's a nice list of references.  As David said in a separate email 
</I>&gt;<i> thread about &amp;phi -- you can't win no matter which mapping you choose.
</I>
Well, at the moment we're doing whatever MathML3 does, by using the same 
source file for the entity table.


On Sun, 30 Mar 2008, Dailey, David P. wrote:
&gt;<i> 
</I>&gt;<i> I don't think anybody is saying that HTML5 should disallow VML.
</I>
Well, it does, and always has, so I guess they don't have to...


On Tue, 1 Apr 2008, Julian Reschke wrote:
&gt;<i> Philip Taylor wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Lots of existing content uses attributes named &quot;xmlns&quot; -- see e.g. 
</I>&gt;<i> &gt; &lt;<A HREF="http://philip.html5.org/data/xmlns.txt">http://philip.html5.org/data/xmlns.txt</A>&gt;. (Only 45 pages in the data 
</I>&gt;<i> &gt; set had XML content-types, so this is pretty much all text/html). It 
</I>&gt;<i> &gt; seems that compatibility requirements will make it impossible to base 
</I>&gt;<i> &gt; anything on the &quot;xmlns&quot; attribute.
</I>&gt;<i> 
</I>&gt;<i> Well, a similar argument can probably applied to *any* change in the 
</I>&gt;<i> language, such as adding new elements.
</I>
Not really. There are some proposals that lead to much worse handling of 
older pages than others.


On Thu, 3 Apr 2008, Eirik Mikkelsen wrote:
&gt;<i> 
</I>&gt;<i> What I'm suggesting is: Standardize and extend IE's conditional comments 
</I>&gt;<i> syntax, where we introduce a new &quot;operator&quot; (accept), that takes a 
</I>&gt;<i> mime-type string as operand
</I>
That's some pretty ugly syntax. :-)


On Tue, 1 Apr 2008, Jim Jewett wrote:
&gt;<i>
</I>&gt;<i> I think everyone agrees that MathML benefits from the strictness 
</I>&gt;<i> requirements in XML.
</I>
Actually no, many of us think that the strictness of XML is a bug. (Whence 
the &quot;XML5&quot; effort.) See e.g. Maciej's e-mail above.



On Tue, 1 Apr 2008, Julian Reschke wrote:
&gt;<i>
</I>&gt;<i> Jim Jewett wrote:
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; The decision needs to be specified.  And in html, the short &quot;invalid&quot;
</I>&gt;<i> &gt; form should probably be acceptable, representing the simpler case.
</I>&gt;<i> &gt; (You can always be explicit to get the other case.)  If mathml needs
</I>&gt;<i> &gt; to keep it invalid (to ensure quality), then maybe the two languages
</I>&gt;<i> &gt; aren't ready for tight integration.
</I>&gt;<i> &gt; ...
</I>&gt;<i> 
</I>&gt;<i> For the record: I totally disagree that it needs to be specified. If it's not
</I>&gt;<i> specified in MathML, so be it.
</I>&gt;<i> 
</I>&gt;<i> All of this smells like an attempt to impose &quot;WHATWG&quot; design on MathML.
</I>
If MathML is going to be in text/html, it has to play by the text/html 
rules, yes. That means well-defined behaviour, including error handling. 
Now having said that, I would encourage any serious spec writer today to 
define error handling; it's clear that leaving error handling undefined 
just leads to poor interoperability and shows bad editorship.


On Tue, 1 Apr 2008, Robert Miner wrote:
&gt;<i>
</I>&gt;<i> My own preference would be to do the repair in place with an merror (as 
</I>&gt;<i> opposed to fixing things up with mtext and then wrapping the whole 
</I>&gt;<i> equation).  However, I could live with a user agent choosing to render 
</I>&gt;<i> merror as a standard mrow.  In other words, merror would be there in the 
</I>&gt;<i> DOM, but there wouldn't be any visual indication of the error in the 
</I>&gt;<i> rendering.
</I>&gt;<i> 
</I>&gt;<i> Example:
</I>&gt;<i> 
</I>&gt;<i> &lt;math&gt;
</I>&gt;<i>   &lt;mfrac&gt; &lt;mn&gt;1&lt;/mn&gt;  &lt;mn&gt;2&lt;/mn&gt; &lt;mn&gt;3&lt;/mn&gt; &lt;/mfrac&gt;
</I>&gt;<i> &lt;/math&gt;
</I>&gt;<i> 
</I>&gt;<i> would appear in the DOM as
</I>&gt;<i> 
</I>&gt;<i> &lt;math&gt;
</I>&gt;<i>   &lt;mfrac&gt; 
</I>&gt;<i>     &lt;mn&gt;1&lt;/mn&gt;  
</I>&gt;<i>     &lt;merror&gt; &lt;mn&gt;2&lt;/mn&gt; &lt;mn&gt;3&lt;/mn&gt; &lt;/merror&gt; 
</I>&gt;<i>   &lt;/mfrac&gt;
</I>&gt;<i> &lt;/math&gt;
</I>&gt;<i> 
</I>&gt;<i> and render on screen as 1/23.  (Obviously it would really render as a 
</I>&gt;<i> case fraction, and 1/23 is just my ASCII art approximation of it.)
</I>&gt;<i> 
</I>&gt;<i> I presume that would also allow one to add a &lt;style&gt; .merror 
</I>&gt;<i> {background: red} &lt;/style&gt; or whatever you want to the document and have 
</I>&gt;<i> errors highlighted in red if you want to see them.
</I>
The HTML5 spec requires it to appear in the DOM as:

  &lt;math&gt;
    &lt;mfrac&gt; &lt;mn&gt;1&lt;/mn&gt;  &lt;mn&gt;2&lt;/mn&gt; &lt;mn&gt;3&lt;/mn&gt; &lt;/mfrac&gt;
  &lt;/math&gt;

...but to render as if it was really:

  &lt;math&gt;
    &lt;merror&gt; (something) &lt;/merror&gt;
  &lt;/math&gt;


On Wed, 2 Apr 2008, Bruce Miller wrote:
&gt;<i> 
</I>&gt;<i> _Surely_, no one out there is writing HTML using &lt;whatevertag/&gt;
</I>&gt;<i> when they _dont_ mean to close the element?!?!?!
</I>&gt;<i> (rolling my eyes :&gt; )
</I>
It's actually really common, in particular e.g. with &lt;a&gt;:

   &lt;a href=&quot;hello.html&quot;/&gt;Hello&lt;/a&gt;

...is quite common.


On Wed, 2 Apr 2008, David Carlisle wrote:
&gt;<i> 
</I>&gt;<i> But I think you need to look at that again, that rule makes it virtually 
</I>&gt;<i> impossible to embed other languages (even as annotations) without having 
</I>&gt;<i> to have the language known in advance to the editor of the html spec.
</I>&gt;<i> 
</I>&gt;<i> Even in mathml, it's not at all uncommon to see &lt;mrow/&gt; for example, 
</I>&gt;<i> just as in TeX you often see {} when generating MathML (or TeX) you 
</I>&gt;<i> often add a group &quot;just in case&quot; and end up with nothing there.
</I>
MathML and SVG elements now support /&gt; syntax; HTML doesn't. Other 
languages aren't supported at all in text/html.

On Wed, 2 Apr 2008, David Carlisle wrote:
&gt;<i> 
</I>&gt;<i> It's odd that earlier in the the thread we were told that proper 
</I>&gt;<i> handling of html5 would require a real html5 parser (of which several 
</I>&gt;<i> ought to be available) but in the same thread there is the repeated 
</I>&gt;<i> requirement that html5 &quot;work&quot; with the existing html4 parsers. (Which 
</I>&gt;<i> presumably doesn't go as far as saying what the HTML spec (by reference 
</I>&gt;<i> to sgml) says it should do for /&gt; which is to treat the &gt; as character 
</I>&gt;<i> data.
</I>
Parsers in real deployed user agents have far more in common with the 
HTML5 parser spec than with the requirements imposed by the HTML4 spec in 
terms of parsing.


On Thu, 3 Apr 2008, Jeff Schiller wrote:
&gt;<i> On Wed, Apr 2, 2008 at 10:07 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Say the trigger is &lt;newsyntax&gt;. Now assume someone writes:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  &lt;p&gt;foo &lt;newsyntax&gt; ... &lt;/newsyntax&gt; bar &lt;/p&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ...and that such a page works well in new browsers. Given how people 
</I>&gt;<i> &gt; copy and paste content on the Web, especially how people copy and 
</I>&gt;<i> &gt; paste _new_ syntax on the Web, even before it is implemented, it is 
</I>&gt;<i> &gt; very likely that someone will copy just the &quot;foo&quot; part, accidentally 
</I>&gt;<i> &gt; including the &lt;newsyntax&gt; bit:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  &lt;p&gt;bla bla foo &lt;newsyntax&gt; bla bla &lt;/p&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This will now effectively &quot;poison&quot; the &lt;newsyntax&gt; idea, since the 
</I>&gt;<i> &gt; pages that result from this cargo-cult copy-and-paste attitude will 
</I>&gt;<i> &gt; render badly in browsers that support the new syntax.
</I>&gt;<i> 
</I>&gt;<i> Now I understand where you are coming from.  I don't think there's any 
</I>&gt;<i> way to avoid the 'rendering badly' for all cases, I'm sorry.
</I>
Well, the proposal given handles it for many cases.


&gt;<i> &lt;!DOCTYPE HTML&gt;
</I>&gt;<i> &lt;html&gt;&lt;body&gt;
</I>&gt;<i> &lt;video ...&gt;
</I>&gt;<i>   &lt;p&gt;This is fallback content.&lt;/p&gt;
</I>&gt;<i> &lt;/video&gt;
</I>&gt;<i> &lt;/body&gt;&lt;/html&gt;
</I>&gt;<i> 
</I>&gt;<i> Now if somebody copies only part of this document into their own 
</I>&gt;<i> document (and somehow gets the DOCTYPE right):
</I>&gt;<i> 
</I>&gt;<i> &lt;!DOCTYPE HTML&gt;
</I>&gt;<i> &lt;html&gt;
</I>&gt;<i> &lt;p&gt;I am teh HTML genius
</I>&gt;<i> &lt;video ...&gt;
</I>&gt;<i>   &lt;p&gt;This is fallback content
</I>&gt;<i> &lt;p&gt;And don't you forget it
</I>&gt;<i> &lt;/html&gt;
</I>&gt;<i> 
</I>&gt;<i> Is there any browser that won't render the above 'badly'?
</I>
Getting the DOCTYPE right doesn't matter (it has no effect).

The difference between this and the more generic namespaced syntax issue 
is that the single element case is easier to fix if it becomes a problem. 
So we can take more risks. With the namespace thing, there's no way to fix 
it if we do run into the problem (which we have; see examples earlier).


On Fri, 4 Apr 2008, William F Hammond wrote:
&gt;<i> 
</I>&gt;<i> So as things are now for xhtml+mathml in some user agents, with the 
</I>&gt;<i> markup
</I>&gt;<i> 
</I>&gt;<i>           &lt;p&gt;The value is &lt;math&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/math&gt;.&lt;/p&gt;
</I>&gt;<i> 
</I>&gt;<i> the author risks having the period stranded at the beginning of the next 
</I>&gt;<i> line.
</I>
I think this is a bug with those UAs' line wrapping algorithms. It should 
be filed as such.


On Fri, 4 Apr 2008, David Carlisle wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;image&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; It's not valid in HTML, but existing content requires it to be magic 
</I>&gt;<i> &gt; in parsing.
</I>&gt;<i> 
</I>&gt;<i> Hmm we should probably take that up internally in the Math WG.
</I>&gt;<i> 
</I>&gt;<i> In MathML2 &lt;image/&gt; can (informally) be replaced by 
</I>&gt;<i> &lt;csymbol&gt;image&lt;/image&gt; and in MathML3 we're working on a formal 
</I>&gt;<i> specified correspondence between these forms (for all MathML content 
</I>&gt;<i> elements not just image), so it would be possible to add a note to the 
</I>&gt;<i> MathML3 spec deprecating &lt;image/&gt; or warning not to use it in text/html 
</I>&gt;<i> contexts (with no loss of functionality) if it's going to cause 
</I>&gt;<i> problems. (Personal response, not a considered WG position)
</I>
I think that would be great. I unfortunately was unable to determine if it 
would be an issue, because my parser (which I used to study the existing 
Math-in-HTML content) already implements the img-&gt;image substitution and 
so any MathML &lt;image&gt; elements were treated as HTML &lt;img&gt; elements.

Congratulations and thanks to the MathML group on keeping the MathML 
vocabulary free of name clashes, by the way.


On Fri, 4 Apr 2008, Julian Reschke wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; If we're willing to consider solutions that _don't_ take the existing 
</I>&gt;<i> &gt; legacy content into account, we're better off doing a more thorough 
</I>&gt;<i> &gt; job and going with something like XHTML2, XML, XML Namespaces, and so 
</I>&gt;<i> &gt; forth.
</I>&gt;<i> 
</I>&gt;<i> There's a gray area between &quot;all&quot; existing content and &quot;most&quot; existing 
</I>&gt;<i> content.
</I>&gt;<i> 
</I>&gt;<i> If &quot;all&quot; content needs to be considered, we essentially can't do 
</I>&gt;<i> anything new.
</I>
I don't buy that. But even if it's &quot;most&quot; (and I only said we had to 
consider the legacy content, not support &quot;all&quot; of it), that's still a 
_lot_ of legacy content.


On Sat, 5 Apr 2008, Simon Pieters wrote:
&gt;<i>
</I>&gt;<i> SVG can contain HTML fragments in foreignObject, e.g. iframe. MathML can 
</I>&gt;<i> also contain HTML, e.g. form controls.
</I>&gt;<i> 
</I>&gt;<i> In order to have source-level consistency between text/html and XML, the 
</I>&gt;<i> xmlns talisman should be allowed on any HTML element that has an SVG or 
</I>&gt;<i> MathML namespaced parent.
</I>
I have allowed it on any MathML or SVG content, and any HTML node that is 
a child of a node that isn't an HTML node, but it must have the right 
value.


I've marked ISSUE-37 (html-svg-mathml, &quot;Integration of SVG and MathML into 
text/html&quot;, HTML 5 spec) as closed. Please feel free to reopen it if 
further feedback is sent on this issue.

Cheers,
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014371.html">[whatwg] StorageEvent clarity
</A></li>
	<LI>Next message: <A HREF="014425.html">[whatwg] Supporting MathML and SVG in text/html,	and related topics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14372">[ date ]</a>
              <a href="thread.html#14372">[ thread ]</a>
              <a href="subject.html#14372">[ subject ]</a>
              <a href="author.html#14372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
