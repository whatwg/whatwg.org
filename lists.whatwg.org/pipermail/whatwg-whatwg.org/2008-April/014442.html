<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Mouse wheel feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mouse%20wheel%20feedback&In-Reply-To=%3CPine.LNX.4.62.0804171855310.19129%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014447.html">
   <LINK REL="Next"  HREF="014443.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Mouse wheel feedback</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mouse%20wheel%20feedback&In-Reply-To=%3CPine.LNX.4.62.0804171855310.19129%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Mouse wheel feedback">ian at hixie.ch
       </A><BR>
    <I>Thu Apr 17 12:36:36 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="014447.html">[whatwg] ApplicationCache add/remove with invalid URLs
</A></li>
        <LI>Next message: <A HREF="014443.html">[whatwg] postMessage() issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14442">[ date ]</a>
              <a href="thread.html#14442">[ thread ]</a>
              <a href="subject.html#14442">[ subject ]</a>
              <a href="author.html#14442">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
I'm forwarding this feedback to <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">public-webapi at w3.org</A> because the mouse 
wheel event stuff is being developed there instead of the WHATWG.

WebAPI WG: Please acknowledge receipt of this feedback and let the people 
below (cc'ed) know how their feedback is handled. Thanks!

On Sat, 18 Jun 2005, Chris Griego wrote:
&gt;<i>
</I>&gt;<i> I've searched through the archives and the specs and have not seen any
</I>&gt;<i> mention of this.
</I>&gt;<i> 
</I>&gt;<i> The mouse wheel as a part of input is now a very handy fact of life
</I>&gt;<i> usually associated only with scrolling up and down, but it has more
</I>&gt;<i> uses than that and I would like to propose that event handling for
</I>&gt;<i> wheel mouse scrolling be added to Web Applications 1.0
</I>&gt;<i> 
</I>&gt;<i> Two real-world uses in today's in desktop applications aside from
</I>&gt;<i> scrolling include the iTunes volume slider, just hover your mose over
</I>&gt;<i> the volume slider and the wheel mouse will increase or decrease the
</I>&gt;<i> volume, and the Mac OS X (10.3+) application switcher (induced with
</I>&gt;<i> alt+tab) where the wheel mouse will scroll through the applications.
</I>&gt;<i> Firefox uses the mouse wheel in scrubbing long menus such as bookmark
</I>&gt;<i> menus.
</I>&gt;<i> 
</I>&gt;<i> The mouse wheel could be put to good use in web applications. One use
</I>&gt;<i> would be within the Google Maps application to freely scrub the map or
</I>&gt;<i> in Opera Show and the S5 slide show system for going to the next and
</I>&gt;<i> previous slides.
</I>&gt;<i> 
</I>&gt;<i> Currently the only way to capture and use the mouse wheel on the web
</I>&gt;<i> is within the Macromedia Flash v7 plugin which added event handling
</I>&gt;<i> for the mouse wheel.
</I>&gt;<i> Flash Documentation:
</I>&gt;<i> <A HREF="http://livedocs.macromedia.com/flash/mx2004/main_7_2/00001481.html">http://livedocs.macromedia.com/flash/mx2004/main_7_2/00001481.html</A>
</I>&gt;<i> Example Turotial: <A HREF="http://www.communitymx.com/content/article.cfm?cid=E81CE">http://www.communitymx.com/content/article.cfm?cid=E81CE</A>
</I>&gt;<i> 
</I>&gt;<i> There are things to consider when implementing handling for the mouse
</I>&gt;<i> wheel. You obviously want to handle when the mouse wheel is turned
</I>&gt;<i> upwards or downwards, but you also need to handle the user agent's
</I>&gt;<i> speed preference (1 mouse wheel turn is 3 lines versus 1 line, Flash
</I>&gt;<i> handles this by passing the user agent's preference to the event
</I>&gt;<i> handler), some mice support back and forth rocking, and the mouse
</I>&gt;<i> wheel click that toggles to 4-way free scrolling.
</I>
On Tue, 21 Jun 2005, Erik Arvidsson wrote:
&gt;<i>
</I>&gt;<i> Chris Griego wrote:
</I>&gt;<i> &gt; Currently the only way to capture and use the mouse wheel on the web
</I>&gt;<i> &gt; is within the Macromedia Flash v7 plugin which added event handling
</I>&gt;<i> &gt; for the mouse wheel.
</I>&gt;<i> 
</I>&gt;<i> That's incorrect. Both IE (since 5.5?) and Mozilla supports this.
</I>&gt;<i> Unfortunately they do it in different ways.
</I>&gt;<i> 
</I>&gt;<i> IE:
</I>&gt;<i> 
</I>&gt;<i> element.attachEvent(&quot;onmousewheel&quot;, function () {
</I>&gt;<i>    document.title = window.event.wheelDelta;
</I>&gt;<i> });
</I>&gt;<i> 
</I>&gt;<i> Mozilla:
</I>&gt;<i> 
</I>&gt;<i> element.addEventListener(&quot;DOMMouseScroll&quot;, function (e) {
</I>&gt;<i>    document.title = e.detail;
</I>&gt;<i> }, true);
</I>&gt;<i> 
</I>&gt;<i> The values here are bit different.
</I>&gt;<i> 
</I>&gt;<i> In Mozilla, if you have set Mozilla to scroll a certain number of rows you get
</I>&gt;<i> the number of steps here. If you have it set to scroll one page at a time you
</I>&gt;<i> get large values and I'm not sure if these represents the number of rows in
</I>&gt;<i> some way.
</I>&gt;<i> 
</I>&gt;<i> In IE it returns multiples of 120 but I guess it really represent 3 rows * 40
</I>&gt;<i> twips/row and that changing this in some control panel applet or in the
</I>&gt;<i> registry might give you other alternative results.
</I>&gt;<i> 
</I>&gt;<i> The values in IE is negative when Mozilla is positive and the other way
</I>&gt;<i> around.
</I>&gt;<i> 
</I>&gt;<i> Here is a pretty simple way to unify these to some extent:
</I>&gt;<i> 
</I>&gt;<i> function getWheelDelta(e) {
</I>&gt;<i>    if (window.event) { // IE
</I>&gt;<i>       return e.wheelDelta / 40;
</I>&gt;<i>    } else {
</I>&gt;<i>       // In case the user has &quot;one screen at a time&quot; we get a
</I>&gt;<i>       // very big value
</I>&gt;<i>       var v = e.detail || 0;
</I>&gt;<i>       if (v &gt; 1000) {
</I>&gt;<i>          v = 3;
</I>&gt;<i>       } else if (v &lt; -1000) {
</I>&gt;<i>          v = -3;
</I>&gt;<i>       }
</I>&gt;<i>       return - v;
</I>&gt;<i>    }
</I>&gt;<i> }
</I>
On Mon, 20 Jun 2005, Dave Hyatt wrote:
&gt;<i>
</I>&gt;<i> Safari in the latest Tiger update supports WinIE's mouse wheel system.  We
</I>&gt;<i> also have a wheelDeltaX and wheelDeltaY so that horizontal wheeling can be
</I>&gt;<i> supported.  I had planned to propose this at some point but hadn't gotten
</I>&gt;<i> around to it yet.
</I>
On Tue, 21 Jun 2005, Erik Arvidsson wrote:
&gt;<i> 
</I>&gt;<i> This sounds really sweet. How did you define the values for wheelDeltaX 
</I>&gt;<i> and wheelDeltaY?
</I>
On Tue, 21 Jun 2005, Mikko Rantalainen wrote:
&gt;<i> 
</I>&gt;<i> To be ready for better pointing devices in the future, I think that the 
</I>&gt;<i> mouse delta should be defined for at least two dimensions (x and y) and 
</I>&gt;<i> the delta should be accompanied with an unit.
</I>&gt;<i> 
</I>&gt;<i> We could define following:
</I>&gt;<i> 
</I>&gt;<i> event.wheelDeltaX: float
</I>&gt;<i> event.wheelDeltaXUnit: &quot;px&quot; | &quot;char&quot; | &quot;page&quot;
</I>&gt;<i> event.wheelDeltaY: float
</I>&gt;<i> event.wheelDeltaYUnit: &quot;px&quot; | &quot;char&quot; | &quot;page&quot;
</I>&gt;<i> 
</I>&gt;<i> And define that positive values mean that content should be positioned inside
</I>&gt;<i> the viewport so that positive deltas bring content to view from bottom and
</I>&gt;<i> from right.
</I>&gt;<i> 
</I>&gt;<i> I assume that in the future, mouse wheels will not have huge discrete steps
</I>&gt;<i> anymore. So moving towards &quot;px&quot; is required. However, the &quot;page&quot; setting will
</I>&gt;<i> be preferred by some and it cannot be cleanly emulated with a single &quot;px&quot;
</I>&gt;<i> value so we need an unit in addition. Also, I selected word &quot;char&quot; instead of
</I>&gt;<i> &quot;row&quot; so that the same unit name is usable with both X and Y axis. I'm not
</I>&gt;<i> sure if &quot;char&quot; unit should be included, though - it can be nicely emulated
</I>&gt;<i> with &quot;px&quot;.
</I>
On Tue, 21 Jun 2005, Matthew Raymond wrote:
&gt;<i>
</I>&gt;<i> Dave Hyatt wrote:
</I>&gt;<i> &gt; Safari in the latest Tiger update supports WinIE's mouse wheel  system.
</I>&gt;<i> 
</I>&gt;<i>    Mozilla uses addEventListener[1], which is in DOM 2 and DOM 3. (DOM 3 even
</I>&gt;<i> adds addEventListenerNS for different namespaces.) By contrast, IE uses
</I>&gt;<i> attachEvent, which is proprietary and doesn't allow you to specify the the
</I>&gt;<i> initial capture. As a result, I would NOT support using attachEvent in any
</I>&gt;<i> WHATWG standard, especially since it does not appear functionally different
</I>&gt;<i> from addEventListener. (Is there even an IE-proprietary event listener method
</I>&gt;<i> that supports namespaces?)
</I>&gt;<i> 
</I>&gt;<i> &gt; We also have a wheelDeltaX and wheelDeltaY so that
</I>&gt;<i> &gt; horizontal wheeling can be supported.
</I>&gt;<i> 
</I>&gt;<i>    I'm thinking we should define new properties wheelDeltaX and wheelDeltaY
</I>&gt;<i> for MouseEvent. [2]
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; Chris Griego wrote:
</I>&gt;<i> &gt; &gt; That's incorrect. Both IE (since 5.5?) and Mozilla supports this.
</I>&gt;<i> &gt; &gt; Unfortunately they do it in different ways.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; IE:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; element.attachEvent(&quot;onmousewheel&quot;, function () {
</I>&gt;<i> &gt; &gt;   document.title = window.event.wheelDelta;
</I>&gt;<i> &gt; &gt; });
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Mozilla:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; element.addEventListener(&quot;DOMMouseScroll&quot;, function (e) {
</I>&gt;<i> &gt; &gt;   document.title = e.detail;
</I>&gt;<i> &gt; &gt; }, true);
</I>&gt;<i> 
</I>&gt;<i>    Note that for attachEvent, you name the HTML attribute name and not the
</I>&gt;<i> actual DOM event type. Therefore, in DOM, if you wanted a listener for a
</I>&gt;<i> mousemove, you'd use the string &quot;mousemove&quot; and not &quot;onmousemove&quot;. DOM also
</I>&gt;<i> employs the method of using &quot;DOM&quot; at the beginning of strings that don't
</I>&gt;<i> correspond to the associated &quot;on&quot; attributes in HTML 4.01. Since there is no
</I>&gt;<i> official HTML5, this makes Mozilla's implementation above the most standards
</I>&gt;<i> correct.
</I>&gt;<i> 
</I>&gt;<i>    I think I'd prefer something like &quot;mousewheel&quot; or &quot;DOMmousewheel&quot;. I'm not
</I>&gt;<i> sure a new |onmousewheel| attribute is called for, though, because there might
</I>&gt;<i> be semantic arguments against it. Anyone have a take on this, by the way?
</I>&gt;<i> 
</I>&gt;<i>    So, I guess I'd like to see this happen:
</I>&gt;<i> 
</I>&gt;<i> | element.addEventListener(&quot;mousewheel&quot;,
</I>&gt;<i> |   function (e) { document.title = getWheelDelta(e); },
</I>&gt;<i> |   true);
</I>&gt;<i> |
</I>&gt;<i> | function getWheelDelta(e) {
</I>&gt;<i> |   return e.wheelDeltaY;
</I>&gt;<i> | }
</I>&gt;<i> 
</I>&gt;<i> &gt; I had planned to propose this at some point but hadn't gotten
</I>&gt;<i> &gt; around to it yet.
</I>&gt;<i> 
</I>&gt;<i>    I'm hoping you aren't referring to the blatantly nonstandard IE event model
</I>&gt;<i> shown in Chris Griego's IE example...
</I>&gt;<i> 
</I>&gt;<i> [1]
</I>&gt;<i> <A HREF="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-addEventListener">http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-addEventListener</A>
</I>&gt;<i> [2] <A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#Events-MouseEvent">http://www.w3.org/TR/DOM-Level-3-Events/events.html#Events-MouseEvent</A>
</I>
On Tue, 21 Jun 2005, Erik Arvidsson wrote:
&gt;<i>
</I>&gt;<i> Mikko Rantalainen wrote:
</I>&gt;<i> &gt; I assume that in the future, mouse wheels will not have huge discrete steps
</I>&gt;<i> &gt; anymore. So moving towards &quot;px&quot; is required. However, the &quot;page&quot; setting
</I>&gt;<i> &gt; will be preferred by some and it cannot be cleanly emulated with a single
</I>&gt;<i> &gt; &quot;px&quot; value so we need an unit in addition. Also, I selected word &quot;char&quot;
</I>&gt;<i> &gt; instead of &quot;row&quot; so that the same unit name is usable with both X and Y
</I>&gt;<i> &gt; axis. I'm not sure if &quot;char&quot; unit should be included, though - it can be
</I>&gt;<i> &gt; nicely emulated with &quot;px&quot;.
</I>&gt;<i> 
</I>&gt;<i> It seems &quot;em&quot; describes row better? However, it might be a bit weird due to
</I>&gt;<i> changes in font size depending on where you are in the document. (But I guess
</I>&gt;<i> that is already an issue with scrolling Y rows.)
</I>&gt;<i> 
</I>&gt;<i> If a unit is added it should probably support the other CSS units as well...
</I>
On Tue, 21 Jun 2005, David Hyatt wrote:
&gt;<i>
</I>&gt;<i> We actually have not implemented wheelX and wheelY yet... we just did
</I>&gt;<i> wheelDelta.  So the other two are open for specifying. :)
</I>
On Mon, 25 Jul 2005, Chris Griego wrote:
&gt;<i> 
</I>&gt;<i> Just to update this thread, Microsoft's new Virtual Earth uses the
</I>&gt;<i> mouse wheel for zooming.
</I>&gt;<i> <A HREF="http://virtualearth.msn.com/">http://virtualearth.msn.com/</A>
</I>
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014447.html">[whatwg] ApplicationCache add/remove with invalid URLs
</A></li>
	<LI>Next message: <A HREF="014443.html">[whatwg] postMessage() issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14442">[ date ]</a>
              <a href="thread.html#14442">[ thread ]</a>
              <a href="subject.html#14442">[ subject ]</a>
              <a href="author.html#14442">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
