<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] text/html for html and xhtml (Was: Supporting MathML	and SVG in text/html, and related topics)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20text/html%20for%20html%20and%20xhtml%20%28Was%3A%20Supporting%20MathML%0A%09and%20SVG%20in%20text/html%2C%20and%20related%20topics%29&In-Reply-To=%3Ccee13aa30804162325t4ff2a4ableea70755f92f8518%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056868.html">
   <LINK REL="Next"  HREF="056697.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] text/html for html and xhtml (Was: Supporting MathML	and SVG in text/html, and related topics)</H1>
<!--htdig_noindex-->
    <B>liorean</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20text/html%20for%20html%20and%20xhtml%20%28Was%3A%20Supporting%20MathML%0A%09and%20SVG%20in%20text/html%2C%20and%20related%20topics%29&In-Reply-To=%3Ccee13aa30804162325t4ff2a4ableea70755f92f8518%40mail.gmail.com%3E"
       TITLE="[whatwg] text/html for html and xhtml (Was: Supporting MathML	and SVG in text/html, and related topics)">liorean at gmail.com
       </A><BR>
    <I>Wed Apr 16 23:25:46 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056868.html">[whatwg] text/html for html and xhtml
</A></li>
        <LI>Next message: <A HREF="056697.html">[whatwg] Supporting MathML and SVG in text/html,	and related topics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56706">[ date ]</a>
              <a href="thread.html#56706">[ thread ]</a>
              <a href="subject.html#56706">[ subject ]</a>
              <a href="author.html#56706">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 17/04/2008, William F Hammond &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hammond at csc.albany.edu</A>&gt; wrote:
&gt;<i>  Previously:
</I>&gt;<i>
</I>&gt;<i>   Yes, but the point is, once a user agent begins to sniff, there's no
</I>&gt;<i>   rational excuse for it not to recognize compliant xhtml+(mathml|svg).
</I>
Yes there is. Live content rely on even perfectly well formed XHTML to
have the HTML behaviours of CSS and the DOM. It also relies on all
elements having #PCDATA content. Thus scripts and style sheets would
be given an incompatible parsing that changes the meaning of '&amp;', '&lt;'
and XML comments within scripts, just to take one example. That is, a
script which is well formed and valid XML and which is XML well
formedness-compatible and proper HTML may have entirely textual
content. (The subset of live XHTML content that uses embedded scripts
which are also XML well formed without using explicit CDATA wrapping
is very small, though.)

&gt;<i>   &gt;&gt; What obstacles to this exist?
</I>&gt;<i>   &gt;
</I>&gt;<i>   &gt; The Web.
</I>&gt;<i>
</I>&gt;<i>   Really!?!
</I>
Really.

&gt;<i>  And then:
</I>&gt;<i>
</I>&gt;<i>  &gt;&gt;&gt; The Web.
</I>&gt;<i>  &gt;&gt;
</I>&gt;<i>  &gt;&gt; Really!?!
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Yes, see for instance:
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt;    <A HREF="http://lists.w3.org/Archives/Public/public-html/2007Aug/1248.html">http://lists.w3.org/Archives/Public/public-html/2007Aug/1248.html</A>
</I>&gt;<i>
</I>&gt;<i>  Taylor's comment is mainly about what happens when a user agent
</I>&gt;<i>  confuses tag soup with good xhtml.
</I>&gt;<i>
</I>&gt;<i>  It is a different question how a user agent decides what it is looking
</I>&gt;<i>  at.
</I>&gt;<i>
</I>&gt;<i>  Whether there is one mimetype or two, erroneous content will need
</I>&gt;<i>  handling.  The experiment begun around 2001 of &quot;punishing&quot; bad
</I>&gt;<i>  documents in application/xhtml+xml seems to have led to that mime type
</I>&gt;<i>  not being much used.
</I>
We don't know how big a factor the draconianness of XML parsing really
is. The fact is, the single biggest consumer of those documents has
not begun supporting XHTML yet. Internet Explorer supports HTML and
XML but not the XHTML namespace in XML, nor the XHTML content type.
This alone makes everybody reluctant to serve application/xhtml+xml.
Sure, there are other complications from the XML draconianness than
this, but my point is that these are all compounded, so it's hard to
tell how effectively they have been put to the test. If you could run
the test again with Internet Explorer's non-support taken out of the
equation, then you would be able to say something about it. As it is
currently, you can't know either way.

&gt;<i>  So user agents need to learn how to recognize the good and the bad
</I>&gt;<i>  in both mimetypes.
</I>&gt;<i>
</I>&gt;<i>  Otherwise you have Gresham's Law: the bad documents will drive out the
</I>&gt;<i>  good.
</I>&gt;<i>
</I>&gt;<i>  The logical way to go might be this:
</I>&gt;<i>
</I>&gt;<i>  If it has a preamble beginning with &quot;^&lt;?xml &quot; or a sensible
</I>&gt;<i>  xhtml DOCTYPE declaration or a first element &quot;&lt;html xmlns=...&gt;&quot;,
</I>&gt;<i>  then handle it as xhtml unless and until it proves to be non-compliant
</I>&gt;<i>  xhtml (e.g, not well-formed xml, unquoted attributes, munged handling
</I>&gt;<i>  of xml namespaces, ...).  At the point it proves to be bad xhtml reload
</I>&gt;<i>  it and treat it as &quot;regular&quot; html.
</I>
Doesn't work. We need DOM and CSS treatment as in HTML, not as in
XHTML, to be compatible with live content for those circumstances too.

&gt;<i>  So most bogus xhtml will then be 1 or 2 seconds slower than good xhtml.
</I>&gt;<i>  Astute content providers will notice that and then do something about it.
</I>&gt;<i>  It provides a feedback mechanism for making the web become better.
</I>
So, you argue that a document with an XHTML structure as text/html
should change semantics in ways that will affect functionality,
behaviour and presentation because of e.g. a single unescaped
ampersand in a URI or a single character that breaks because of
encoding?




My opinion:
Any feedback mechanism that directly hurts the user and only
indirectly hurts the publisher, as opposed to a feedback mechanism
that directly notifies the publisher, is totally backwards. Fail
early. Compile time is better than run time because that's instantly
obvious to the programmer - the build isn't compiling, so there
there's no working but buggy build to give users. The analogy for web
content is that you should fail at publishing time instead of viewing
time if possible, because then you HAVE to correct your documents
before you can serve them to the user.

If you want to serve XML to users on the web, you should make sure
your tools cannot possibly serve malformed XML, by making absolutely
certain that the content has correct encoding (any defaulting must
confirm that the content actually conforms to the default encoding),
has a specified content type (defaulting is acceptable for fragments
here, but e.g. uploading raw files should require specifying the type)
and is a well formed fragment or document at publishing time, loudly
rejecting any content that is malformed.   (And by publishing I
include all sources: design templates, content producers, information
from the database, advertisements, comments, trackbacks etc.)
-- 
David &quot;liorean&quot; Andersson

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056868.html">[whatwg] text/html for html and xhtml
</A></li>
	<LI>Next message: <A HREF="056697.html">[whatwg] Supporting MathML and SVG in text/html,	and related topics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56706">[ date ]</a>
              <a href="thread.html#56706">[ thread ]</a>
              <a href="subject.html#56706">[ subject ]</a>
              <a href="author.html#56706">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
