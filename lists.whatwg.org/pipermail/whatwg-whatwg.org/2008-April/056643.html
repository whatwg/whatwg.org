<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] SQL API and changeVersion() with no callbacks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20and%20changeVersion%28%29%20with%20no%20callbacks&In-Reply-To=%3C278fd46c0804091022r268555e7p5920bd63378d61d4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056641.html">
   <LINK REL="Next"  HREF="056644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] SQL API and changeVersion() with no callbacks</H1>
<!--htdig_noindex-->
    <B>Aaron Boodman</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20and%20changeVersion%28%29%20with%20no%20callbacks&In-Reply-To=%3C278fd46c0804091022r268555e7p5920bd63378d61d4%40mail.gmail.com%3E"
       TITLE="[whatwg] SQL API and changeVersion() with no callbacks">aa at google.com
       </A><BR>
    <I>Wed Apr  9 10:22:48 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056641.html">[whatwg] Clarification of Storage interface details
</A></li>
        <LI>Next message: <A HREF="056644.html">[whatwg] StorageEvent clarity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56643">[ date ]</a>
              <a href="thread.html#56643">[ thread ]</a>
              <a href="subject.html#56643">[ subject ]</a>
              <a href="author.html#56643">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Oct 25, 2007 at 4:43 PM, Brady Eidson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">beidson at apple.com</A>&gt; wrote:
&gt;<i> &gt; I added it for the same reason we have executeSql() with no callbacks. I
</I>&gt;<i> &gt; can remove it if desired. I expected it to be used in cases where you want
</I>&gt;<i> &gt; to change the version (e.g. from '' to '1.0') without changing the schema,
</I>&gt;<i> &gt; but where you simply don't really have any good thing to do if it goes
</I>&gt;<i> &gt; wrong. I can remove it if you don't think it'll be important, but then we
</I>&gt;<i> &gt; might as well remove the one with just the first callback, since I can
</I>&gt;<i> &gt; definitely see use cases for changing the version number without doing
</I>&gt;<i> &gt; anything else.
</I>&gt;<i>
</I>&gt;<i>  For the sake of simplicity in the API, I see no reason why there couldn't
</I>&gt;<i> be a single version of changeVersion() with the 2 strings and 2 callbacks.
</I>&gt;<i> Then if a user truly wanted to call changeVersion() but wasn't interested in
</I>&gt;<i> the results, they could just pass null for both of the callbacks.  I suppose
</I>&gt;<i> the same could be said about executeSql().
</I>&gt;<i>
</I>&gt;<i>  But that might go against some DOM'ey or Javascript'ey convention that I'm
</I>&gt;<i> not familiar with.
</I>&gt;<i>
</I>&gt;<i>  I don't feel all too strongly about this.
</I>
Sorry I'm (really) late on this.

Anyway, I think these two callbacks should be optional. For several reasons:

1. It's basically the same API as transaction(), so I feel like it
should be consistent.

2. I feel like if an argument allows null, then it is logically
optional. It feels cleaner to me that it is actually optional as well.
That is, it seems arbitrary to me that sometimes in the database api
&quot;optional&quot; arguments can either be unspecified or null, but sometimes
they have to be specified and null.

3. It seems like a valid use case to me to not have an error handler.
This isn't in the spec, but I had assumed that unhandled database
errors would end up calling window.onerror, and then bubbling to the
console, if the UA has one. It's pretty common in JS to not handle
every single error, but instead allow unexpected errors to bubble to
window.onerror and log them there. This is what gmail does for
example. It would be unfortunate to have to have an error handle there
just to immediately rethrow so that you don't lose any information.

Brady, do any of these help convince you at all?

Sorry for resuming this old thread,

- a

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056641.html">[whatwg] Clarification of Storage interface details
</A></li>
	<LI>Next message: <A HREF="056644.html">[whatwg] StorageEvent clarity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56643">[ date ]</a>
              <a href="thread.html#56643">[ thread ]</a>
              <a href="subject.html#56643">[ subject ]</a>
              <a href="author.html#56643">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
