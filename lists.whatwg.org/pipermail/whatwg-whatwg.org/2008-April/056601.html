<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Request: window.postMessage should be async
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Request%3A%20window.postMessage%20should%20be%20async&In-Reply-To=%3Cf3f9e0a30804041509k40c23b86sfe0f7ebf486310c1%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056602.html">
   <LINK REL="Next"  HREF="056600.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Request: window.postMessage should be async</H1>
<!--htdig_noindex-->
    <B>Eric Seidel</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Request%3A%20window.postMessage%20should%20be%20async&In-Reply-To=%3Cf3f9e0a30804041509k40c23b86sfe0f7ebf486310c1%40mail.gmail.com%3E"
       TITLE="[whatwg] Request: window.postMessage should be async">eric at webkit.org
       </A><BR>
    <I>Fri Apr  4 15:09:05 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056602.html">[whatwg] Request: window.postMessage should be async
</A></li>
        <LI>Next message: <A HREF="056600.html">[whatwg] Request: window.postMessage should be async
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56601">[ date ]</a>
              <a href="thread.html#56601">[ thread ]</a>
              <a href="subject.html#56601">[ subject ]</a>
              <a href="author.html#56601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Anne-

Thanks for the reply.

I see window.postMessage as different from element.dispatchEvent.  The JS
author has control over the JS code executed as a result of their
dispatchEvent call.  JS author does not have control over code executed by
window.postMessage (either before and after, or during the call).
- I know what the JS stack looks like before my dispatchEvent call, but with
postMessage the JS stack exhaustion threat exists (as mentioned in my
previous email).

- With dispatchEvent, I control what the event handler code does.  With
window.postMessage I may wait for an indeterminate amount of time for that
other frame's code to complete.

These issues (and the ones mentioned in my previous email) go away if
postMessage is made async.

-eric


On Fri, Apr 4, 2008 at 2:39 PM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt; wrote:

&gt;<i> On Fri, 04 Apr 2008 23:04:30 +0200, Eric Seidel &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">eric at webkit.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Anyway, I'm not the foremost expert here, but I was reading HTML5 last
</I>&gt;<i> &gt; week and encountered this sync postMessage() requirement, which seemed like
</I>&gt;<i> &gt; a bad idea.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> It doesn't make sense to change this given that all synthesized event
</I>&gt;<i> dispatching is synchronous. I don't think postMessage() should be different.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Anne van Kesteren
</I>&gt;<i> &lt;<A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>&gt;
</I>&gt;<i> &lt;<A HREF="http://www.opera.com/">http://www.opera.com/</A>&gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080404/0a297b0a/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080404/0a297b0a/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056602.html">[whatwg] Request: window.postMessage should be async
</A></li>
	<LI>Next message: <A HREF="056600.html">[whatwg] Request: window.postMessage should be async
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56601">[ date ]</a>
              <a href="thread.html#56601">[ thread ]</a>
              <a href="subject.html#56601">[ subject ]</a>
              <a href="author.html#56601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
