<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Footnotes, end notes, side notes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Footnotes%2C%20end%20notes%2C%20side%20notes&In-Reply-To=%3C48D7DD66-8C5D-416E-8703-D9288C97AAAF%40michelf.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014485.html">
   <LINK REL="Next"  HREF="014582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Footnotes, end notes, side notes</H1>
<!--htdig_noindex-->
    <B>Michel Fortin</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Footnotes%2C%20end%20notes%2C%20side%20notes&In-Reply-To=%3C48D7DD66-8C5D-416E-8703-D9288C97AAAF%40michelf.com%3E"
       TITLE="[whatwg] Footnotes, end notes, side notes">michel.fortin at michelf.com
       </A><BR>
    <I>Tue Apr 22 06:17:48 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="014485.html">[whatwg] Footnotes, end notes, side notes
</A></li>
        <LI>Next message: <A HREF="014582.html">[whatwg] Footnotes, end notes, side notes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14511">[ date ]</a>
              <a href="thread.html#14511">[ thread ]</a>
              <a href="subject.html#14511">[ subject ]</a>
              <a href="author.html#14511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Le 2008-04-21 &#224; 8:19, Ian Hickson a &#233;crit :
&gt;<i>
</I>&gt;<i> On Tue, 31 Oct 2006, Michel Fortin wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Interesting. If I understand well, this CSS proposal would allow a  
</I>&gt;&gt;<i> note
</I>&gt;&gt;<i> inserted in the middle of a paragraph to become a footnote. For  
</I>&gt;&gt;<i> instance
</I>&gt;&gt;<i> this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    &lt;p&gt;This paragraph has a footnote&lt;footnote&gt;This is a footnote&lt;/
</I>&gt;&gt;<i>    footnote&gt;.&lt;/p&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> could be presented like this (where 1 is presumably superscript and
</I>&gt;&gt;<i> linked to the footnote):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    This paragraph has a footnote1.
</I>&gt;&gt;<i>    ______________
</I>&gt;&gt;<i>    1.  This is a footnote.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That'd very interesting. But the markup is poor for backward
</I>&gt;&gt;<i> compatibility and makes it difficult to include more than one  
</I>&gt;&gt;<i> paragraph
</I>&gt;&gt;<i> in a note. So I'm going to propose an improvement to this markup.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (For the next example: &lt;fn&gt; = footnote; &lt;fnref&gt; = footnote  
</I>&gt;&gt;<i> reference.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What is needed to solve the backward compatibility problem is a  
</I>&gt;&gt;<i> second
</I>&gt;&gt;<i> way of indirection, so that the footnote can be placed elsewhere.  
</I>&gt;&gt;<i> This
</I>&gt;&gt;<i> is the first piece of the puzzle:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    &lt;p&gt;This paragraph has a footnote&lt;fnref for=&quot;my-footnote&quot;&gt;&lt;/ 
</I>&gt;&gt;<i> fnref&gt;.&lt;/p&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    &lt;fn id=&quot;my-footnote&quot;&gt;
</I>&gt;&gt;<i>      &lt;p&gt;This footnote can contain block-level elements!&lt;/p&gt;
</I>&gt;&gt;<i>    &lt;/fn&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In this example, a reference to the footnote is found in the  
</I>&gt;&gt;<i> paragraph,
</I>&gt;&gt;<i> and the footnote content is elsewhere in the document. The browser  
</I>&gt;&gt;<i> would
</I>&gt;&gt;<i> be in charge of numbering the marker correctly (or not, if the
</I>&gt;&gt;<i> stylesheet says so) and to put the referenced footnote in a list with
</I>&gt;&gt;<i> the other footnotes in the order they are reference.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Notice the empty content of &lt;fnref&gt;? That's substitution content for
</I>&gt;&gt;<i> backward compatibility: if you put a link to the footnote within the
</I>&gt;&gt;<i> &lt;fnref&gt; element, when displaying things as footnote the actual  
</I>&gt;&gt;<i> content
</I>&gt;&gt;<i> is substituted by the marker, but footnote-unaware browsers will show
</I>&gt;&gt;<i> the link. In the previous case, the fallback content for the  
</I>&gt;&gt;<i> reference
</I>&gt;&gt;<i> marker could have been:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    &lt;sup&gt;&lt;a href=&quot;#my-footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Since footnotes are referenced and reordered, you're free to place  
</I>&gt;&gt;<i> them
</I>&gt;&gt;<i> wherever you want. If you care about backward compatibility, you  
</I>&gt;&gt;<i> should
</I>&gt;&gt;<i> put them all together at the end of your article and there you have  
</I>&gt;&gt;<i> your
</I>&gt;&gt;<i> list of footnotes. Footnotes without reference are considered to be
</I>&gt;&gt;<i> referenced from where they are in the source. Or if you want them  
</I>&gt;&gt;<i> to be
</I>&gt;&gt;<i> styled as sidenotes, just put the notes before or after the paragraph
</I>&gt;&gt;<i> they relate to in the source, or even inline inside paragraphs  
</I>&gt;&gt;<i> (although
</I>&gt;&gt;<i> inline footnotes should be restricted to inline content), and hide  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> marker.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The last piece of the backward compatibility puzzle is the &lt;fnl&gt;
</I>&gt;&gt;<i> (footnote list) element. This element is optional, but if present,
</I>&gt;&gt;<i> preceding footnotes inside the same sectioning element will be  
</I>&gt;&gt;<i> relocated
</I>&gt;&gt;<i> inside this element. &lt;fnl&gt; would be styled as an ordered list, and  
</I>&gt;&gt;<i> its
</I>&gt;&gt;<i> list items would be footnote elements (&lt;fn&gt;).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    &lt;p&gt;This paragraph has a footnote&lt;fnref for=&quot;my-footnote&quot;
</I>&gt;&gt;&gt;<i> &lt;sup&gt;&lt;a href=&quot;#my-footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/fnref&gt;.&lt;/p&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    &lt;fnl&gt;
</I>&gt;&gt;<i>    &lt;fn id=&quot;my-footnote&quot;&gt;
</I>&gt;&gt;<i>      &lt;p&gt;This footnote can contain block-level elements!&lt;/p&gt;
</I>&gt;&gt;<i>    &lt;/fn&gt;
</I>&gt;&gt;<i>    &lt;/fnl&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I suggest that footnotes be relocated at the end of the first  
</I>&gt;&gt;<i> &lt;article&gt;
</I>&gt;&gt;<i> element, or to the first &lt;fnl&gt; element following them in the  
</I>&gt;&gt;<i> source. It
</I>&gt;&gt;<i> goes without saying that footnotes already inside &lt;fnl&gt; stay where  
</I>&gt;&gt;<i> they
</I>&gt;&gt;<i> are, although they should be reordered in the order they are  
</I>&gt;&gt;<i> referred to
</I>&gt;&gt;<i> in the text.
</I>&gt;<i>
</I>&gt;<i> At this point, why not simplify the markup and remove the &lt;fnref&gt;? And
</I>&gt;<i> turn the &lt;fnl&gt; and &lt;fn&gt; into a &lt;section&gt; and some &lt;div&gt;s or  
</I>&gt;<i> something and
</I>&gt;<i> you have backwards compatible markup that already does everything we  
</I>&gt;<i> need
</I>&gt;<i> without sacrificing any of the stylability...
</I>
The idea of relocating the content is that one may specify in some  
form from a stylesheet how the notes should be rendered -- sidenotes,  
footnotes, endnotes would all use the same markup with a different  
style. (By &quot;relocating&quot; I mean it should appear somewhere else in the  
rendering three, not moved to another element in the DOM by the way.)

The reason I came with this somewhat complex proposal is to satisfy  
the following cases which cannot be completely fulfilled with current  
markup:

1.  Permitting notes as actual footnotes (not endnotes) for paged media:
     given some styling, the browser relocates footnotes at the end of  
each
     page.
2.  Permitting notes with any content -- paragraphs, lists, code blocks
     (&lt;pre&gt;&lt;code&gt;), etc. -- to degrade gracefully as endnotes, or  
sidenotes
     (given proper styling and placement in the source), in current  
browsers.
3.  Permitting footnotes to be placed near the context they're  
referenced
     from when you don't care about backward compatibility (easier  
editing).
4.  Permitting footnotes to be rendered incrementally on paged media  
when
     the content is defined before the marker (or almost-incremental  
if the
     content of a footnote immediately follows the paragraph with its  
marker).

That said, I certainly acknowledge the argument that the feature may  
not be compelling enough for implementors to bother with a proposal of  
this complexity, and it is possible this proposal is just a little too  
complex for authors to use it without the help of some footnote markup  
generator tool (diminishing the value of point 3 above). So perhaps it  
should indeed be left out, even if the current state of affairs  
doesn't address the above points.


Michel Fortin
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">michel.fortin at michelf.com</A>
<A HREF="http://michelf.com/">http://michelf.com/</A>



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014485.html">[whatwg] Footnotes, end notes, side notes
</A></li>
	<LI>Next message: <A HREF="014582.html">[whatwg] Footnotes, end notes, side notes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14511">[ date ]</a>
              <a href="thread.html#14511">[ thread ]</a>
              <a href="subject.html#14511">[ subject ]</a>
              <a href="author.html#14511">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
