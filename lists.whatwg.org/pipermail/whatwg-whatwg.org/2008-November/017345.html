<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Brest-discuss%5D%20HTML5%20and%20RESTful%20HTTP%20in%20browsers&In-Reply-To=%3C4924131D.7000507%40mykanjo.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017310.html">
   <LINK REL="Next"  HREF="017354.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers</H1>
<!--htdig_noindex-->
    <B>Mike</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Brest-discuss%5D%20HTML5%20and%20RESTful%20HTTP%20in%20browsers&In-Reply-To=%3C4924131D.7000507%40mykanjo.co.uk%3E"
       TITLE="[whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers">mike at mykanjo.co.uk
       </A><BR>
    <I>Wed Nov 19 05:22:37 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017310.html">[whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers
</A></li>
        <LI>Next message: <A HREF="017354.html">[whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17345">[ date ]</a>
              <a href="thread.html#17345">[ thread ]</a>
              <a href="subject.html#17345">[ subject ]</a>
              <a href="author.html#17345">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Thomas Broyer wrote:
&gt;<i> On Tue, Nov 18, 2008 at 11:52 AM, Mike &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mike at mykanjo.co.uk</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Thomas Broyer wrote:
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> On Mon, Nov 17, 2008 at 6:31 PM,  &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mike at mykanjo.co.uk</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;<i> - The HTML version of that URL could provide the web page representation
</I>&gt;&gt;&gt;&gt;<i> *and* provide links to all the other content types available.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;<i> How about other representations? (I know we're discussing HTML here,
</I>&gt;&gt;&gt;<i> and not HTTP, but what if a resource has no HTML representation? are
</I>&gt;&gt;&gt;<i> you proposing adding this capability to PDF, MSOffice, OpenDocument,
</I>&gt;&gt;&gt;<i> et al. too?)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> That's an issue at the application level; RSS would work fine in that
</I>&gt;&gt;<i> situation - any form of hypermedia will serve that purpose.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> How would RSS work better than HTML (as of today; i.e. without your
</I>&gt;<i> proposed extension)?
</I>&gt;<i>
</I>&gt;<i>   
</I>
RSS wouldn't work better - you asked for another way of doing this 
without HTML, not a better way.

&gt;&gt;&gt;<i> Maybe you could explain how browsers do not conform to HTTP? (and no,
</I>&gt;&gt;&gt;<i> HTTP does not mandate user-agents to give the control of the Accept-*
</I>&gt;&gt;&gt;<i> headers to the user or the... server?!)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> URI = Uniform Resource Identifier
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A given document available in html, pdf, xml - is one resource. The various
</I>&gt;&gt;<i> content types are representations of that resource.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> That's one way of looking at things, not *the* way (see below).
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> Because HTML is presently insufficient in providing a mechanism for browsers
</I>&gt;&gt;<i> to perform protocol level conneg.. it's been moved into the URI and each
</I>&gt;&gt;<i> representation is provided as a separate resource. This clearly breaks the
</I>&gt;&gt;<i> intended definition of a URI - this is why I don't consider browsers to
</I>&gt;&gt;<i> conform to HTTP; since they force developers to misuse that part of the
</I>&gt;&gt;<i> protocol.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> If you want to precisely identify the PDF &quot;version&quot; of that document,
</I>&gt;<i> you need another resource (whose representations is a set with a
</I>&gt;<i> single value: PDF).
</I>&gt;<i> If your URI idenfies &quot;this document&quot;, you cannot blame anyone but
</I>&gt;<i> yourself for not being able to identify &quot;this document in PDF&quot;.
</I>&gt;<i>
</I>&gt;<i>   
</I>
If you want to precisely identify the PDF *representation* (version) of 
that *resource* (document), you need the URI and your Accept headers set 
correctly. To that end, the solution to this problem would be to put 
example.com/document into a PDF reader. Or if you were writing an HTML 
page, and you wanted to indicate in the &lt;a&gt; tag that the browser should 
specifically request the PDF representation, you include an 
Accept=&quot;application/pdf&quot; attribute.

Does that not count as a use case for this proposal? Perhaps not, if you 
believe that content negotiation belongs in the URI. This is a design 
descision, and I believe that developers should be allowed to make this 
descision at design time. Currently there is no standard in HTML to do 
this; hence why I have proposed this optional Accept attribute. To give 
the option and make it feasible to use HTTP content negotiation in web 
applications.

I am yet to be provided with an example of where this addition could 
cause any problems, so I don't understand the apparent resistance to 
this; since it is clearly a valuable addition which enables HTTP conneg 
in browsers.

&gt;<i> Anyway, we're going real far from this WG's scope, so I propose we
</I>&gt;<i> follow up in private, or, even better, you re-hash the debate on the
</I>&gt;<i> rest-discuss list or with Roy T. Fielding if you want.
</I>&gt;<i>
</I>&gt;<i>   
</I>
I completely agree that discussion is outside of the scope of this WG. 
That is one of my main points here; It's a design decision that you are 
taking out of the hands of developers by not provisioning the mechanism for.

I don't consider &quot;well thats how its done and I don't think we need to 
do it any other way&quot; an acceptable response, since it *is* outside of 
the scope of the WG and is a completely subjective standpoint. Not to 
mention that your opinion suggests that HTTP conneg has no &quot;practical 
use&quot;, which I find hard to believe - feel free to explain why this is 
the case rather than just explain that it isn't used at the moment, I 
know it isn't!

&gt;&gt;<i> Having to use a JavaScript virtual machine to perform PUT and DELETE is yet
</I>&gt;&gt;<i> another example of this.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Conforming to HTTP does not mean supporting all of the defined methods
</I>&gt;<i> (even at the server-side: a server is free to return a 501).
</I>&gt;<i>
</I>&gt;<i>   
</I>
OK.. Why would you not want to do everything you could to support all of 
the aspects of HTTP, particularly when you are being given a solution 
that allows for backwards compatibility. I don't mind getting involved 
and doing the work on this myself, if that means this will happen.

&gt;&gt;&gt;<i> There's an extension to HTTP (TCN/RSVA, RFCs 2295/2296) that gives the
</I>&gt;&gt;&gt;<i> servers the ability to describe the available variants of a given
</I>&gt;&gt;&gt;<i> resource in a content-type independent way. You'd rather push browser
</I>&gt;&gt;&gt;<i> vendors to implement TCN/RSVA than HTML5 to add a content-type
</I>&gt;&gt;&gt;<i> dependent equivalent.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> See also <A HREF="http://docs.google.com/View?docid=dggq7g95_10cd8zj5">http://docs.google.com/View?docid=dggq7g95_10cd8zj5</A>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> I don't really understand the point your making.. I would just like to see a
</I>&gt;&gt;<i> way by which developers can link to *resources* with URIs and specify the
</I>&gt;&gt;<i> representation if and when necessary for a given link.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> So make another URI to identify that particular resource: &quot;the same as
</I>&gt;<i> X but available only in format Y&quot;.
</I>&gt;<i>
</I>&gt;<i>   
</I>
That's conneg in URIs. It should be reasonably apparent that I am aware 
of this technique by now; I think the original post I made even said as 
much!

I'm not saying that you cannot achieve conneg in URIs, I'm simply 
pointing out that another approach is the make use of protocol level 
conneg and avoid creating new URIs for every resource representation. 
I'm not even claiming it's a superior approach; it's just a valid 
alternative that makes proper use of the conneg provided in HTTP - HTML 
could support this approach by implementing my proposal.

&gt;&gt;<i> There is no choice at the moment because HTML is insufficient.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I believe HTML is not in cause here (as any format with hyperlinking
</I>&gt;<i> feature would be &quot;insufficient&quot; too: as I said above: PDF, MSOffice,
</I>&gt;<i> OpenDocument, RSS, Atom, etc.)
</I>&gt;<i>
</I>&gt;<i>   
</I>
HTML is a hypermedia. Hypermedia are special case formats that should 
allow UAs as much as possible to make best use of HTTP. One of the 
examples you gave was Atom, which is going to great lengths making 
amendments to support the HTTP protocol - for that very reason.

&gt;&gt;&gt;&gt;<i> - I'll say it again: I'm encouraging you to help browsers become
</I>&gt;&gt;&gt;&gt;<i> better HTTP clients; surely that is high on the agenda here.. right?!
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;<i> No, we're discussing HTML and some &quot;Web APIs&quot; here, not HTTP.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> So the Transfer Protocol (HTTP) and the Markup Language (HTML) for Hyper
</I>&gt;&gt;<i> Text are not closely linked?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> No.
</I>&gt;<i> HTTP does not need HTML (WebDAV and CalDAV, for instance, do not need
</I>&gt;<i> HTML to work). and HTML does not need HTTP (aren't you sending HTML
</I>&gt;<i> mails yourself? and most documentation nowadays is in HTML format
</I>&gt;<i> stored on disk, without HTTP entering into play).
</I>&gt;<i> However, HTTP and HTML both make an heavy use of URI/URL.
</I>&gt;<i>
</I>&gt;<i>   
</I>
HTML is the standard markup used for provisioning HTTP application GUIs. 
If HTML only supports conneg in the URI.. guess what web application 
developers do.. conneg in URIs! There is presently no alternative, so 
there are very few web applications that use the alternative protocol 
level conneg.

HTML is a markup, it doesn't make use of URIs - it indicates to clients 
how to make use of URIs. Totally different thing.

&gt;&gt;&gt;&gt;<i> - separate versions are separate resources, not separate content types.
</I>&gt;&gt;&gt;&gt;<i> That
</I>&gt;&gt;&gt;&gt;<i> has nothing to do with conneg..
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;<i> s/version/variant/
</I>&gt;&gt;&gt;<i> Variants still need be produced by someone or something, and there
</I>&gt;&gt;&gt;<i> really might be discrepencies between them; that's why there's a
</I>&gt;&gt;&gt;<i> &quot;quality&quot; parameter in TCN/RSVA (and thus in Apache type-map files,
</I>&gt;&gt;&gt;<i> for instance)
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> I'm not sure what you're getting at here. Multiple versions are multiple
</I>&gt;&gt;<i> resources, they aren't seperate types so conneg is not appropriate. URIs
</I>&gt;&gt;<i> handle this, the example I gave (which you left out) is proof of that.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Let me try again: your document is available in HTML and PDF (let's
</I>&gt;<i> keep it simple). Who makes the HTML? Who makes the PDF? How can you be
</I>&gt;<i> 100%-sure that both variants are strictly &quot;identical&quot; (if ever they
</I>&gt;<i> can)?
</I>&gt;<i>   
</I>
If they aren't identical; they aren't the same resource - and it would 
be idiotic to serve them from the same URI.

&gt;<i> Let's consider the famous &quot;SVG tiger&quot; image, that you would make
</I>&gt;<i> available in both SVG and PNG. Isn't the SVG qualitatively better than
</I>&gt;<i> the PNG? Aren't they the same resource &quot;sketch of a tiger&quot;?
</I>&gt;<i>   
</I>
'Better' ? I don't understand the point your making here..

What are your criteria for this judgment?
What if I think smaller file size is 'better'?

If the image represented in both formats is the same; they are the same 
resource. My interpretation doesn't make you wrong, and yours doesn't 
make me wrong. The only difference here is that my approach is currently 
totally impractical because HTML provides no way of doing this 
contextually within browsers.

&gt;<i> How about an interactive animation you provide in both SVG+JS and
</I>&gt;<i> Flash. What if there's a bug the SVG variant (e.g. because of cross-UA
</I>&gt;<i> incompatibility)? They're the same resource, yet there can be
</I>&gt;<i> discrepencies between the two variants (and moreover in this case both
</I>&gt;<i> are directed to the same kind of UA: browsers, so you cannot even pick
</I>&gt;<i> up your favorite phrase &quot;here's the animation, you can open it in XXX
</I>&gt;<i> or YYY&quot;)
</I>&gt;<i>   
</I>
Provided the animation is the same - the only discrepancy is the 
representation of that animation (i.e. the content type).

Again, the case you have raised here is another important point; which 
is that browsers handle alot of different content types and it depends 
on the particular HTML page as to which representation you would want 
the browser to display.

If you were insistent as a developer that only the flash representation 
of the animation was only appropriate on a particular page; then you 
*could* achieve this *if* your tag containing the reference to 
example.com/animation had the attribute 
Accept=&quot;application/x-shockwave-/flash/&quot;.

Or if you were happy that the browser could decide, you would leave the 
tag off and let the browser send it's default Accept header - this is 
probably the most likely case in this instance because both 
representations render identically and are embedded so there's no real 
incentive, in this particular case, to specify over the browser 
defaults. Obviously if we are talking whether a link to 
example.com/report returns a pdf or a word document - this is a 
different use case.

I hope this has cleared up my position for you, if you still disagree 
let me know - I dont think there's any reason to continue this in 
private since this is all relevant information to the discussion - I 
have no intention of debating with you over whether HTTP conneg is 
superior to conneg in URIs or not, I just think both should be 
provisioned for.

Regards,
Mike

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017310.html">[whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers
</A></li>
	<LI>Next message: <A HREF="017354.html">[whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17345">[ date ]</a>
              <a href="thread.html#17345">[ thread ]</a>
              <a href="subject.html#17345">[ subject ]</a>
              <a href="author.html#17345">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
