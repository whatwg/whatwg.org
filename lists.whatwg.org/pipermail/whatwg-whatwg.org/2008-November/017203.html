<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Sending MessagePorts after they have started
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Sending%20MessagePorts%20after%20they%20have%20started&In-Reply-To=%3C10ABD3B5-0167-41C6-BDDC-29C342D729CF%40webkit.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017201.html">
   <LINK REL="Next"  HREF="017206.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Sending MessagePorts after they have started</H1>
<!--htdig_noindex-->
    <B>Alexey Proskuryakov</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Sending%20MessagePorts%20after%20they%20have%20started&In-Reply-To=%3C10ABD3B5-0167-41C6-BDDC-29C342D729CF%40webkit.org%3E"
       TITLE="[whatwg] Sending MessagePorts after they have started">ap at webkit.org
       </A><BR>
    <I>Fri Nov 14 12:38:56 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017201.html">[whatwg] Sending MessagePorts after they have started
</A></li>
        <LI>Next message: <A HREF="017206.html">[whatwg] Sending MessagePorts after they have started
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17203">[ date ]</a>
              <a href="thread.html#17203">[ thread ]</a>
              <a href="subject.html#17203">[ subject ]</a>
              <a href="author.html#17203">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
Nov 14, 2008, &#1074; 11:31 PM, Jonas Sicking &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;(&#1072;):

&gt;&gt;<i> Could you please explain how this scenario is affected by the port  
</I>&gt;&gt;<i> being started? Messages are queued in closed ports until those are  
</I>&gt;&gt;<i> started, so I think that it applies word to word to closed ports.
</I>&gt;<i>
</I>&gt;<i> Where the messages are queued are an implementation detail. So you  
</I>&gt;<i> can queue messages in the outgoing port until you get word from the  
</I>&gt;<i> receiving port that it has been opened. At that point you know where  
</I>&gt;<i> the receiving port lives and will always live for the rest of its  
</I>&gt;<i> life and can send all messages directly there.
</I>

That's an interesting idea! But this means that such ports have to  
remain entangled (in an invisible manner) even after being explicitly  
told to close. E.g., if portA sends messages, then is closed, and only  
after that, portB is started. If messages are to be queued at portA,  
they will need to be sent at this point - tricky!

I agree that the communication problem is much simpler than GC though  
- it's just that trying to fix it makes GC even more complicated  
because of the need to track forwarding objects, &quot;hidden entangled&quot;  
state etc.

Nov 14, 2008, &#1074; 11:32 PM, Jonas Sicking &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;(&#1072;):

&gt;<i> Actually, come to think of it, what is the BaseURI for workers? I.e.  
</I>&gt;<i> what URI is importScripts and XHR resolved against?
</I>
&quot;The base URL of a URL passed to an API in a worker is the absolute  
URL given that the worker's location attribute represents. Both the  
origin and effective script origin of scripts running in workers are  
the origin of the absolute URL given that the worker's  
locationattribute represents.&quot;

- WBR, Alexey Proskuryakov


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017201.html">[whatwg] Sending MessagePorts after they have started
</A></li>
	<LI>Next message: <A HREF="017206.html">[whatwg] Sending MessagePorts after they have started
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17203">[ date ]</a>
              <a href="thread.html#17203">[ thread ]</a>
              <a href="subject.html#17203">[ subject ]</a>
              <a href="author.html#17203">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
