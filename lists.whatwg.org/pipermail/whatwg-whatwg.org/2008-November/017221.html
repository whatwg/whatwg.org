<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Video element and duration attribute
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20element%20and%20duration%20attribute&In-Reply-To=%3CPine.LNX.4.62.0811170017530.1237%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017051.html">
   <LINK REL="Next"  HREF="017337.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Video element and duration attribute</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20element%20and%20duration%20attribute&In-Reply-To=%3CPine.LNX.4.62.0811170017530.1237%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Video element and duration attribute">ian at hixie.ch
       </A><BR>
    <I>Sun Nov 16 16:23:31 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017051.html">[whatwg] Video element and duration attribute
</A></li>
        <LI>Next message: <A HREF="017337.html">[whatwg] Video element and duration attribute
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17221">[ date ]</a>
              <a href="thread.html#17221">[ thread ]</a>
              <a href="subject.html#17221">[ subject ]</a>
              <a href="author.html#17221">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 1 Nov 2008, Chris Double wrote:
&gt;<i>
</I>&gt;<i> Some video formats don't make it easy to get the duration.
</I>
Indeed.


&gt;<i> For example, Ogg files can be concatenated to form a single playable 
</I>&gt;<i> file. To compute the duration you need to do multiple seeks to find the 
</I>&gt;<i> chains and total the durations of each chain. Even in the unchained case 
</I>&gt;<i> a seek is required to go to the end of the file and work backwards 
</I>&gt;<i> finding a packet with a timestamp. While this is not difficult to 
</I>&gt;<i> implement it can be expensive over HTTP, requiring multiple byte range 
</I>&gt;<i> requests.
</I>&gt;<i> 
</I>&gt;<i> The most common player for Ogg files on the web is probably the Cortado 
</I>&gt;<i> Java applet, and it has an applet parameter to specify the duration. 
</I>&gt;<i> There have been requests in #theora from people wishing that &lt;video&gt; 
</I>&gt;<i> supported a duration attribute that could be set in the HTML.
</I>&gt;<i> 
</I>&gt;<i> Would such an attribute be useful? It seems to be a commonly used in 
</I>&gt;<i> current Ogg web solutions. Are there any other video formats that could 
</I>&gt;<i> benefit from this?
</I>
It seems like a bad idea, since if we do this we'd have to define all 
kinds of error handling for when the author says the clip is 60 seconds 
long and then seeks to second 50 when the clip is really 40 seconds long, 
etc.


On Thu, 6 Nov 2008, Eric Carlson wrote:
&gt;<i>
</I>&gt;<i> There are other audio and video formats that require a file's duration 
</I>&gt;<i> to be computed, eg. an MP3 file without an &quot;MPEG audio frames&quot; packet or 
</I>&gt;<i> a muxed MPEG stream, but I don't think including a &quot;duration&quot; attribute 
</I>&gt;<i> is necessary. Instead of seeking to the end of the file to calculate an 
</I>&gt;<i> exact duration as you describe, it is much cheaper to estimate the 
</I>&gt;<i> duration by processing a fixed portion of the file and extrapolating to 
</I>&gt;<i> the duration based on the file size. QuickTime does this and it works 
</I>&gt;<i> quite well.
</I>&gt;<i> 
</I>&gt;<i> An estimate may not be correct, but the spec requires a user agent to 
</I>&gt;<i> post a &quot;durationchange&quot; event for exactly this case. If we have a 
</I>&gt;<i> &quot;duration&quot; attribute a user agent will still have to deal with pages 
</I>&gt;<i> that don't include it, or that include a value that is wildly inaccurate 
</I>&gt;<i> (copy/paste editing?), so I think it makes more sense for the user 
</I>&gt;<i> agent/media engine to just figure it out.
</I>
Agreed.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017051.html">[whatwg] Video element and duration attribute
</A></li>
	<LI>Next message: <A HREF="017337.html">[whatwg] Video element and duration attribute
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17221">[ date ]</a>
              <a href="thread.html#17221">[ thread ]</a>
              <a href="subject.html#17221">[ subject ]</a>
              <a href="author.html#17221">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
