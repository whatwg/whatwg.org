<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Terminate a Worker algorithm
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Terminate%20a%20Worker%20algorithm&In-Reply-To=%3C3174DE96-B919-4DE5-BDE7-458EF7D5B51B%40webkit.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="059715.html">
   <LINK REL="Next"  HREF="059676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Terminate a Worker algorithm</H1>
<!--htdig_noindex-->
    <B>Alexey Proskuryakov</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Terminate%20a%20Worker%20algorithm&In-Reply-To=%3C3174DE96-B919-4DE5-BDE7-458EF7D5B51B%40webkit.org%3E"
       TITLE="[whatwg] Terminate a Worker algorithm">ap at webkit.org
       </A><BR>
    <I>Mon Nov 24 06:39:32 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="059715.html">[whatwg] Kinds of Content
</A></li>
        <LI>Next message: <A HREF="059676.html">[whatwg] MetaExtensions wiki page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59670">[ date ]</a>
              <a href="thread.html#59670">[ thread ]</a>
              <a href="subject.html#59670">[ subject ]</a>
              <a href="author.html#59670">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>1) The algorithm assumes that a WorkerGlobalScope exists, and doesn't  
specify what happens if it is invoked before WorkerGlobalScope is  
created (e.g. if the script is still being loaded, or the scope is  
being created, but Worker.terminate() is called from JS). I think that  
the right behavior is to re-invoke the algorithm after the scope is  
created, because it may be too late to prevent its creation.

2) Events in WorkerGlobalScope event queue are dropped when  
terminating a worker, but messages posted to Worker are not. I think  
that the expected behavior is that after calling Worker.terminate(),  
no messages will be dispatched to worker's event listeners.

3) &quot;If there are any events in the queue of events other than the  
close event that this algorithm just added, discard them without  
dispatching them.&quot; - I don't see where the close event is added for  
terminate algorithm, and this looks like a copy/paste mistake, because  
the event won't be dispatched anyway.

- WBR, Alexey Proskuryakov



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="059715.html">[whatwg] Kinds of Content
</A></li>
	<LI>Next message: <A HREF="059676.html">[whatwg] MetaExtensions wiki page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59670">[ date ]</a>
              <a href="thread.html#59670">[ thread ]</a>
              <a href="subject.html#59670">[ subject ]</a>
              <a href="author.html#59670">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
