<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Sending MessagePorts after they have started
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Sending%20MessagePorts%20after%20they%20have%20started&In-Reply-To=%3C491DE022.6040201%40sicking.cc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017197.html">
   <LINK REL="Next"  HREF="017203.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Sending MessagePorts after they have started</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Sending%20MessagePorts%20after%20they%20have%20started&In-Reply-To=%3C491DE022.6040201%40sicking.cc%3E"
       TITLE="[whatwg] Sending MessagePorts after they have started">jonas at sicking.cc
       </A><BR>
    <I>Fri Nov 14 12:31:30 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017197.html">[whatwg] Sending MessagePorts after they have started
</A></li>
        <LI>Next message: <A HREF="017203.html">[whatwg] Sending MessagePorts after they have started
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17201">[ date ]</a>
              <a href="thread.html#17201">[ thread ]</a>
              <a href="subject.html#17201">[ subject ]</a>
              <a href="author.html#17201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Alexey Proskuryakov wrote:
&gt;<i> 
</I>&gt;<i> Nov 14, 2008, &#1074; 8:50 AM, Jonas Sicking &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;(&#1072;):
</I>&gt;<i> 
</I>&gt;&gt;<i> To fix all this I propose that if a port has been started, we don't
</I>&gt;&gt;<i> allow it to be passed to postMessage. If that is done an exception is
</I>&gt;&gt;<i> thrown.
</I>&gt;<i> 
</I>&gt;<i> Could you please explain how this scenario is affected by the port being 
</I>&gt;<i> started? Messages are queued in closed ports until those are started, so 
</I>&gt;<i> I think that it applies word to word to closed ports.
</I>
Where the messages are queued are an implementation detail. So you can 
queue messages in the outgoing port until you get word from the 
receiving port that it has been opened. At that point you know where the 
receiving port lives and will always live for the rest of its life and 
can send all messages directly there.

That said, we have to review this whole pass-around-ability thing again. 
You definitely highlighted some pretty serious problems in another 
thread, especially around the need to do cross-process GC. I think the 
communication problem can be solved, i'm less sure about the GC one.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017197.html">[whatwg] Sending MessagePorts after they have started
</A></li>
	<LI>Next message: <A HREF="017203.html">[whatwg] Sending MessagePorts after they have started
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17201">[ date ]</a>
              <a href="thread.html#17201">[ thread ]</a>
              <a href="subject.html#17201">[ subject ]</a>
              <a href="author.html#17201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
