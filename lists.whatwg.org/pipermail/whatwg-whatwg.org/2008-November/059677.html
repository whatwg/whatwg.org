<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] media elements: Relative seeking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20media%20elements%3A%20Relative%20seeking&In-Reply-To=%3Cp06240810c5509a4f93be%40%5B10.0.1.6%5D%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="059668.html">
   <LINK REL="Next"  HREF="059690.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] media elements: Relative seeking</H1>
<!--htdig_noindex-->
    <B>Dave Singer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20media%20elements%3A%20Relative%20seeking&In-Reply-To=%3Cp06240810c5509a4f93be%40%5B10.0.1.6%5D%3E"
       TITLE="[whatwg] media elements: Relative seeking">singer at apple.com
       </A><BR>
    <I>Mon Nov 24 09:58:13 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="059668.html">[whatwg] media elements: Relative seeking
</A></li>
        <LI>Next message: <A HREF="059690.html">[whatwg] media elements: Relative seeking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59677">[ date ]</a>
              <a href="thread.html#59677">[ thread ]</a>
              <a href="subject.html#59677">[ subject ]</a>
              <a href="author.html#59677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I don't think you mean 'relative' here, which I would take to be &quot;go 
forward 10 seconds&quot;, but 'proportional', &quot;please go to 60% of the way 
through&quot;.

IF we are to do this, I would have thought it would be by adding 
units to the &quot;where to seek to&quot; argument:

* go to this time in NPT (normal play time, which runs from 0 to 
media duration)
* go to this SMPTE time code
* go by this relative distance in NPT times

* go to this proportional time
* go to this proportional byte distance
* go by this relative byte distance

Note that proportional distances are not well defined for some 
streams (e.g. indefinite ones).

We'd have to define what bytes are counted and what aren't, 
especially if a URL offers a set of sub-streams only some of which a 
client would normally choose to have sent to it for playing.


At 17:08  +0100 23/11/08, Maik Merten wrote:
&gt;<i>Hello,
</I>&gt;<i>
</I>&gt;<i>currently seeking in the media elements is done by manipulating the
</I>&gt;<i>currentTime attribute. This expects an absolute time offset in seconds.
</I>&gt;<i>This works fine as long as the duration (in absolute time) of the media
</I>&gt;<i>file is known and doesn't work at all in other cases.
</I>&gt;<i>
</I>&gt;<i>Some media formats don't store the duration of the media file anywhere.
</I>&gt;<i>A client can only determine the duration of the media file by
</I>&gt;<i>byte-seeking near the end of the file and finding a timestamp near/at
</I>&gt;<i>the end. This isn't a problem whatsoever on local files, but in remote
</I>&gt;<i>setups this puts additional load on the server and the connection. If
</I>&gt;<i>one would like to avoid this, meaning no duration is known, seeking in
</I>&gt;<i>absolute time cannot work.
</I>&gt;<i>
</I>&gt;<i>While getting the absolute duration is often a problem retrieving the
</I>&gt;<i>length of the media file is is no problem. I propose seeking with
</I>&gt;<i>relative positions, e.g. values between zero and one. This way the
</I>&gt;<i>client can determine if to seek in absolute time (if the duration is
</I>&gt;<i>known) or to just jump into to a position of the bytestream (if the
</I>&gt;<i>length in bytes is known).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  - make currentTime readonly, still have it report playback position in
</I>&gt;<i>absolute time. This information should be available in all media formats
</I>&gt;<i>due to timestamps in the stream.
</I>&gt;<i>
</I>&gt;<i>  - introduce a seek() method, taking a relative value ranging from zero
</I>&gt;<i>to one. This allows both accurate seeking if the duration is known and
</I>&gt;<i>less precise seeking otherwise if only the length of the file is known
</I>&gt;<i>in storage units. This is still way better than not being able to seek
</I>&gt;<i>at all.
</I>&gt;<i>
</I>&gt;<i>  - make duration report either the duration in absolute time (if known)
</I>&gt;<i>or the length of the file in storage units. This enables computation of
</I>&gt;<i>a relative playback position even when no duration is known, if the byte
</I>&gt;<i>position of the stream is known (low precision fallback - still better
</I>&gt;<i>than nothing at all).
</I>&gt;<i>
</I>&gt;<i>  - introduce a readonly storagePosition attribute. Meant to compute a
</I>&gt;<i>relative position if the duration is only known in storage units.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Maik
</I>

-- 
David Singer
Multimedia Standards, Apple Inc.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="059668.html">[whatwg] media elements: Relative seeking
</A></li>
	<LI>Next message: <A HREF="059690.html">[whatwg] media elements: Relative seeking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59677">[ date ]</a>
              <a href="thread.html#59677">[ thread ]</a>
              <a href="subject.html#59677">[ subject ]</a>
              <a href="author.html#59677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
