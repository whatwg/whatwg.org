<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Video element and duration attribute
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20element%20and%20duration%20attribute&In-Reply-To=%3CF2EC97A7-2EF3-45D5-AAE3-9176249CDFB8%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="059512.html">
   <LINK REL="Next"  HREF="059324.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Video element and duration attribute</H1>
<!--htdig_noindex-->
    <B>Eric Carlson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20element%20and%20duration%20attribute&In-Reply-To=%3CF2EC97A7-2EF3-45D5-AAE3-9176249CDFB8%40apple.com%3E"
       TITLE="[whatwg] Video element and duration attribute">eric.carlson at apple.com
       </A><BR>
    <I>Thu Nov  6 09:46:45 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="059512.html">[whatwg] HTMLMediaElement: static TimeRanges/ByteRanges, &quot;potentially	playing&quot; definition
</A></li>
        <LI>Next message: <A HREF="059324.html">[whatwg] Video element and duration attribute
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59319">[ date ]</a>
              <a href="thread.html#59319">[ thread ]</a>
              <a href="subject.html#59319">[ subject ]</a>
              <a href="author.html#59319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Chris -

On Oct 31, 2008, at 1:18 PM, Chris Double wrote:

&gt;<i> Some video formats don't make it easy to get the duration.
</I>&gt;<i>
</I>&gt;<i> For example, Ogg files can be concatenated to form a single playable
</I>&gt;<i> file. To compute the duration you need to do multiple seeks to find
</I>&gt;<i> the chains and total the durations of each chain. Even in the
</I>&gt;<i> unchained case a seek is required to go to the end of the file and
</I>&gt;<i> work backwards finding a packet with a timestamp. While this is not
</I>&gt;<i> difficult to implement it can be expensive over HTTP, requiring
</I>&gt;<i> multiple byte range requests.
</I>&gt;<i>
</I>&gt;<i> The most common player for Ogg files on the web is probably the
</I>&gt;<i> Cortado Java applet, and it has an applet parameter to specify the
</I>&gt;<i> duration. There have been requests in #theora from people wishing that
</I>&gt;<i> &lt;video&gt; supported a duration attribute that could be set in the HTML.
</I>&gt;<i>
</I>&gt;<i> Would such an attribute be useful? It seems to be a commonly used in
</I>&gt;<i> current Ogg web solutions. Are there any other video formats that
</I>&gt;<i> could benefit from this?
</I>&gt;<i>
</I>   There are other audio and video formats that require a file's  
duration to be computed, eg. an MP3 file without an &quot;MPEG audio  
frames&quot; packet or a muxed MPEG stream, but I don't think including a  
&quot;duration&quot; attribute is necessary. Instead of seeking to the end of  
the file to calculate an exact duration as you describe, it is much  
cheaper to estimate the duration by processing a fixed portion of the  
file and extrapolating to the duration based on the file size.  
QuickTime does this and it works quite well.

   An estimate may not be correct, but the spec requires a user agent  
to post a &quot;durationchange&quot; event for exactly this case. If we have a  
&quot;duration&quot; attribute a user agent will still have to deal with pages  
that don't include it, or that include a value that is wildly  
inaccurate (copy/paste editing?), so I think it makes more sense for  
the user agent/media engine to just figure it out.

eric



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="059512.html">[whatwg] HTMLMediaElement: static TimeRanges/ByteRanges, &quot;potentially	playing&quot; definition
</A></li>
	<LI>Next message: <A HREF="059324.html">[whatwg] Video element and duration attribute
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59319">[ date ]</a>
              <a href="thread.html#59319">[ thread ]</a>
              <a href="subject.html#59319">[ subject ]</a>
              <a href="author.html#59319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
