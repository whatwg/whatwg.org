<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [WF2] The &lt;format&gt; Element II: The Wrath of &lt;date&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20%5BWF2%5D%20The%20%3Cformat%3E%20Element%20II%3A%20The%20Wrath%20of%20%3Cdate%3E&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003012.html">
   <LINK REL="Next"  HREF="003005.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [WF2] The &lt;format&gt; Element II: The Wrath of &lt;date&gt;</H1>
<!--htdig_noindex-->
    <B>Matthew Raymond</B> 
    <A HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20%5BWF2%5D%20The%20%3Cformat%3E%20Element%20II%3A%20The%20Wrath%20of%20%3Cdate%3E&In-Reply-To="
       TITLE="[whatwg] [WF2] The &lt;format&gt; Element II: The Wrath of &lt;date&gt;">mattraymond at earthlink.net
       </A><BR>
    <I>Tue Jan 25 06:38:24 PST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="003012.html">[whatwg] [html5] STYLE and SCRIPT elements should not be closed
	at &lt;/
</A></li>
        <LI>Next message: <A HREF="003005.html">[whatwg] [Web Forms 2.0] Last minute suggestion - The &lt;format&gt;
	element.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3000">[ date ]</a>
              <a href="thread.html#3000">[ thread ]</a>
              <a href="subject.html#3000">[ subject ]</a>
              <a href="author.html#3000">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>    One of my concerns with the &lt;format&gt; element as previously defined 
is that if the users sees a localized version of the date and time in 
their &lt;input type=&quot;datetime&quot;&gt; controls, it may not match text dates and 
times elsewhere on the page or website. As a result, there are only 
three possible solutions:

1) Force the date/time control to display the format of the &lt;format&gt; 
element (applyon=&quot;entry&quot;).

2) Preconfigure the settings of the user agents to display a specific 
format in all date/time controls.

3) Require WF2 user agents to display dates and times in the text in a 
localized format.

    I believe the third option is the most logical and provides the most 
comprehensive solution. Using &lt;date&gt;/&lt;time&gt;/&lt;datetime&gt; bypasses the need 
for any configuration of specific user agents, and it allows users more 
choice and greater consistency with regards to their user interface. It 
also has a number of advantages outside of simple localization, since 
the user agent could use the date/time to schedule an event in a 
calendar program or something similar.

    So here's how it would work in the markup...

Simple example:

|<i> &lt;p&gt;
</I>|<i>   The meeting is currently being held on &lt;date&gt;2005-1-30&lt;/date&gt;
</I>|<i>   at &lt;time&gt;11:00:00.0&lt;/time&gt;.
</I>|<i> &lt;/p&gt;
</I>|<i>
</I>|<i> &lt;form&gt;
</I>|<i> &lt;label&gt;New Meeting Date:
</I>|<i> &lt;input type=&quot;date&quot; value=&quot;2005-01-30&quot;&gt;
</I>|<i> &lt;format&gt;Format: yyyy-mm-dd&lt;/format&gt;&lt;/label&gt;
</I>|<i>
</I>|<i> &lt;label&gt;New Meeting Time:
</I>|<i> &lt;input type=&quot;time&quot; value=&quot;11:00:00.0Z&quot;&gt;
</I>|<i> &lt;format&gt;Format: hh:mm&lt;/format&gt;&lt;/label&gt;
</I>|<i> &lt;/form&gt;
</I>
    Because the contents of &lt;date&gt; and &lt;time&gt; are already in ISO8601 
format, no |value| attributes have to be specified. The format to submit 
is ISO8601 as well, so format doesn't require a |value| attribute.

Complex  example:

|<i> &lt;p&gt;
</I>|<i>   The meeting is currently being held on
</I>|<i>   &lt;date value=&quot;2005-01-30&quot;&gt;January 30, 2005&lt;/date&gt;
</I>|<i>   at &lt;time value=&quot;11:00:00.0Z&quot;&gt;11:00 PM&lt;/time&gt;.
</I>|<i> &lt;/p&gt;
</I>|<i>
</I>|<i> &lt;form&gt;
</I>|<i> &lt;label for=&quot;meetdate&quot;&gt;New Meeting Date: &lt;/label&gt;
</I>|<i> &lt;input type=&quot;date&quot; id=&quot;meetdate&quot; name=&quot;meetdate&quot; value=&quot;2005-1-30&quot;&gt;
</I>|<i> &lt;format for=&quot;meetdate&quot; min=&quot;2005-01-25&quot; max=&quot;2006-01-30&quot;
</I>|<i> value=&quot;%m/%d/%Y&quot;&gt;
</I>|<i>   Format: mm/dd/yyyy
</I>|<i> &lt;/format&gt;
</I>|<i>
</I>|<i> &lt;label for=&quot;meettime&quot;&gt;New Meeting Time: &lt;/label&gt;
</I>|<i> &lt;input type=&quot;time&quot; id=&quot;meettime&quot; name=&quot;meettime&quot; value=&quot;11:00&quot;&gt;
</I>|<i> &lt;format for=&quot;meettime&quot; value=&quot;%I:%M %p&quot;&gt;Format: hh:mm am/pm&lt;/format&gt;
</I>|<i> &lt;/form&gt;
</I>
    In the above example, all |value| attributes are specified. Note 
that the fallback values for &lt;date&gt; and &lt;time&gt; are no longer in ISO8601 
format. Also, the submission formats have been changed, so we have to 
add |value| attributes to the &lt;format&gt; elements, which in the above 
example contain format strings that use subsets of the formatting for 
strftime:

[1]<A HREF="http://us2.php.net/strftime">http://us2.php.net/strftime</A>
[2]<A HREF="http://developer.apple.com/documentation/Cocoa/Conceptual/DataFormatting/Concepts/DateFormatters.html">http://developer.apple.com/documentation/Cocoa/Conceptual/DataFormatting/Concepts/DateFormatters.html</A>

    We may need to make minor modifications or additions to the strftime 
formatting to allow for a little more flexibility with regards to how 
dates are displayed.

    Note that the default submission format for &lt;format&gt; is ISO8601, and 
that if another format is specified, that date will always be used for 
submission, yet the user agent determines the presentation to the user, 
which would presumable be in their native format or one of their choosing.

    If you were targeting WF2-only user agents, then you could just do 
something like &lt;date value=&quot;2005-01-30&quot;/&gt;. However, you've just killed 
any kind of fallback scenario if you do, and it's easier to just do 
&lt;date&gt;2005-01-30&lt;/date&gt;. If there is no |value| defined, and the user 
agent can't parse the child contents, the user agent should probably 
just render the child contents in the same way as a legacy user agent.

    Also note that I'm changing my definition of &lt;format&gt; so that the 
child contents are purely a fallback for legacy clients. Why? Well look 
at this example:

|<i> &lt;label for=&quot;date1&quot;&gt;Departing:&lt;br&gt;&lt;/label&gt;
</I>|<i> &lt;input id=&quot;date1&quot; name=&quot;date1&quot; value=&quot;mm/dd/yy&quot;&gt;
</I>|<i> &lt;format for=&quot;date1&quot; min=&quot;now&quot; value=&quot;%m/%d/%Y&quot;&gt;
</I>|<i> &lt;input src=&quot;/eta/calendar.gif&quot; name=&quot;cbtn1&quot; alt=&quot;View Calendar&quot;
</I>|<i> type=&quot;image&quot;&gt;
</I>|<i> &lt;/format&gt;
</I>
    The above is a modified version of the markup Expedia.com uses for 
date entry for Mozilla Firefox in the &quot;flights&quot; tab. Because &lt;input 
name=&quot;cbtn1&quot;&gt; is unnecessary on a WF2 user agent, the element has been 
made a child of &lt;format&gt; so that it will not be rendered. A similar 
solution, with the help of some Javascript, could probably be used to 
create three &lt;select&gt; elements in fallback rather than an &lt;input 
type=&quot;text&quot;&gt;. I'm working on an idea for how to make this possible 
without Javascript. Feel free to post comments.

    For people who want specific date formats displayed, perhaps we need 
special CSS properties for this purpose. Perhaps something like this:

    date, input[type=date] { format-date: &quot;%m/%d/%Y&quot; }

    ...However, I think that falls outside the scope of WHATWG. The use 
case seems rather week to me as well, which is pretty much &quot;the 
webmaster wants WF2 UAs to render dates in this format&quot;.

    I believe this addresses nearly all outstanding issues regarding the 
&lt;input type=&quot;date/time/datetime&quot;&gt; elements. At the very least it covers 
all the problems I know of concerning scenarios with a &lt;input 
type=&quot;text&quot;&gt;-based fallback. Please let me know if there are additional 
concerns that have not been addressed.
</PRE>
















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003012.html">[whatwg] [html5] STYLE and SCRIPT elements should not be closed
	at &lt;/
</A></li>
	<LI>Next message: <A HREF="003005.html">[whatwg] [Web Forms 2.0] Last minute suggestion - The &lt;format&gt;
	element.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3000">[ date ]</a>
              <a href="thread.html#3000">[ thread ]</a>
              <a href="subject.html#3000">[ subject ]</a>
              <a href="author.html#3000">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg-whatwg.org
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
