<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [wf2] Note about XML attribute value handling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20%5Bwf2%5D%20Note%20about%20XML%20attribute%20value%20handling&In-Reply-To=428145AA.6000803%40annevankesteren.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003936.html">
   <LINK REL="Next"  HREF="003938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [wf2] Note about XML attribute value handling</H1>
<!--htdig_noindex-->
    <B>Mikko Rantalainen</B> 
    <A HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20%5Bwf2%5D%20Note%20about%20XML%20attribute%20value%20handling&In-Reply-To=428145AA.6000803%40annevankesteren.nl"
       TITLE="[whatwg] [wf2] Note about XML attribute value handling">mikko.rantalainen at peda.net
       </A><BR>
    <I>Tue May 10 22:48:32 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="003936.html">[whatwg] [wf2] Note about XML attribute value handling
</A></li>
        <LI>Next message: <A HREF="003938.html">[whatwg] [wf2] Note about XML attribute value handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3937">[ date ]</a>
              <a href="thread.html#3937">[ thread ]</a>
              <a href="subject.html#3937">[ subject ]</a>
              <a href="author.html#3937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Anne van Kesteren wrote:
&gt;<i> Mikko Rantalainen wrote:
</I>&gt;&gt;<i>&lt;input type=&quot;hidden&quot;&gt; works just fine with existing UAs even when one 
</I>&gt;&gt;<i>uses application/xhtml+xml provided that all meaningful whitespace has 
</I>&gt;&gt;<i>been converted to entities. &amp;#10; for LF, &amp;#13; for CR and so on. PHP, 
</I>&gt;&gt;<i>for example, provides function htmlentities() exactly for this purpose.
</I>&gt;<i> 
</I>&gt;<i> Really? Why would 'htmlentities' be useful in an XML environment? Also, 
</I>&gt;<i> getting HTML *entities* in your XML document doesn't seem like a good thing.
</I>
Yes, you're right that in some cases that results in problems. That's 
because htmlentities() returns entity references like &quot;&amp;quot;&quot;; if it 
*only* returned numeric character references like &quot;&amp;#34;&quot; it would work 
just fine despite the fact that it's designed for HTML. Those numbers 
refer to UNICODE character points. Als note that XML normalization rules 
state that &quot;For a character reference, append the referenced character 
to the normalized value&quot; but &quot;For an entity reference, recursively apply 
step 3 of this algorithm to the replacement text of the entity.&quot; [1] 
Real world  user agent behavior might differ and that's what I'm really 
interested in.

That said, I'm using my own function to correctly encode special 
characters to numerical character references, but the point remains the 
same. It doesn't matter if you put stuff in the contents of an element 
or inside an attribute value; you *have to* encode the string to hide 
special characters. If you put the string inside an attribute, the 
encoding must also include all whitespace and quotation characters in 
addition to characters like &quot;&lt;&quot;, &quot;&amp;&quot; and &quot;&gt;&quot;.

You cannot put a random string between &lt;textarea&gt; and &lt;/textarea&gt; tags 
either and expect to get a valid XML fragment as a result.


[1] <A HREF="http://www.w3.org/TR/REC-xml/#AVNormalize">http://www.w3.org/TR/REC-xml/#AVNormalize</A>

-- 
Mikko
</PRE>


















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003936.html">[whatwg] [wf2] Note about XML attribute value handling
</A></li>
	<LI>Next message: <A HREF="003938.html">[whatwg] [wf2] Note about XML attribute value handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3937">[ date ]</a>
              <a href="thread.html#3937">[ thread ]</a>
              <a href="subject.html#3937">[ subject ]</a>
              <a href="author.html#3937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg-whatwg.org
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
