<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] A thought: &lt;a href=&quot;...&quot; method=&quot;post&quot;&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20A%20thought%3A%20%3Ca%20href%3D%22...%22%20method%3D%22post%22%3E&In-Reply-To=427F5642.60507%40w3future.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003924.html">
   <LINK REL="Next"  HREF="003934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] A thought: &lt;a href=&quot;...&quot; method=&quot;post&quot;&gt;</H1>
<!--htdig_noindex-->
    <B>James Graham</B> 
    <A HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20A%20thought%3A%20%3Ca%20href%3D%22...%22%20method%3D%22post%22%3E&In-Reply-To=427F5642.60507%40w3future.com"
       TITLE="[whatwg] A thought: &lt;a href=&quot;...&quot; method=&quot;post&quot;&gt;">jg307 at cam.ac.uk
       </A><BR>
    <I>Mon May  9 08:29:05 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="003924.html">[whatwg] A thought: &lt;a href=&quot;...&quot; method=&quot;post&quot;&gt;
</A></li>
        <LI>Next message: <A HREF="003934.html">[whatwg] A thought: &lt;a href=&quot;...&quot; method=&quot;post&quot;&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3925">[ date ]</a>
              <a href="thread.html#3925">[ thread ]</a>
              <a href="subject.html#3925">[ subject ]</a>
              <a href="author.html#3925">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Sjoerd Visscher wrote:

&gt;<i> James Graham wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I should have stated explicitly that when I said &quot;marking the message 
</I>&gt;&gt;<i> as read in some way&quot; I intended that the &quot;some way&quot; could be more 
</I>&gt;&gt;<i> than just changing a message's unread flag, it could be e.g. moving 
</I>&gt;&gt;<i> the message from the inbox to a &quot;Read messages&quot; folder. Even if the 
</I>&gt;&gt;<i> message is &quot;just&quot; marked as read, this can change more than the 
</I>&gt;&gt;<i> appearance of the message - it can change where in the interface it 
</I>&gt;&gt;<i> is displayed (in some sort of virtual-folder based setup), etc.   So 
</I>&gt;&gt;<i> I don't think you can dismiss this as &quot;not really a good example of a 
</I>&gt;&gt;<i> non-idempotent action&quot; - it clearly /is/ non-idempotent yet 
</I>&gt;&gt;<i> representing the action as a link is normal and widely understood.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What this shows is that marking a message read when it is retrieved is 
</I>&gt;<i> a bad idea. Retrieving a message must be done with GET, so that it can 
</I>&gt;<i> be cached. Setting the read state should be done seperately with POST.
</I>
But can you do it such that it will work without javascript? I consider 
distinguishing read/unread messages to be a basic enough feature that it 
should be possible to implement it without requiring client-side 
scripting. In this case, the obvious implementation would be a 
javascript function called when the message was recieved that performed 
a background POST request to update the read flag on the message. Is 
there a better way?

&gt;<i> Most e-mail clients only mark an item read when it's open for a few 
</I>&gt;<i> seconds, it's a bonus that you can do that too.
</I>
That's really not necessary for a web-based client (at least one with 
the example UI) since every message is explicitly requested by a click 
(as I understand it, the timer solves the problem that keyboard 
navigation over a list of messages can result in message being marked 
read).

This example isn't unique in assosiating a document request with an 
implicit change in that status of that document to the user. Another 
example would be a web-based document management system which had a 
&quot;recently viewed documents&quot; section. Again, this could be implemented by 
POSTing a &quot;the document is actually being viewed&quot; notification but 
that's really complex compared to just putting the logic to update the 
recently viewed documents list in the request handling function. Better, 
perhaps, but much more complex and requiring client side code to do 
something that previously could be handled server side.

Clearly allowing lins with method=&quot;post&quot; would help these situations 
although they would break precaching of the webapp.

Assuming that people dislike &lt;a method=&quot;post&quot;&gt; and accept that not all 
state altering operations imply form controls, it might not be possible 
for HTML5 to mitigate the additional server-side complexity mandated by 
requiring that GET operations are shadowed by extra POST operations 
everytime that requesting part of a web-app has an effect on the state 
of the app. Even so, we should make it easy to implement the client side 
part of the deal, preferably in a script-free way.

-- 
&quot;But if science you say still sounds too deep,
Just do what Beaker does, just shrug and 'Meep!'&quot;

-- Dr. Bunsen Honeydew &amp; Beaker of Muppet Labs

</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003924.html">[whatwg] A thought: &lt;a href=&quot;...&quot; method=&quot;post&quot;&gt;
</A></li>
	<LI>Next message: <A HREF="003934.html">[whatwg] A thought: &lt;a href=&quot;...&quot; method=&quot;post&quot;&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3925">[ date ]</a>
              <a href="thread.html#3925">[ thread ]</a>
              <a href="subject.html#3925">[ subject ]</a>
              <a href="author.html#3925">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg-whatwg.org
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
