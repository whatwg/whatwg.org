<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] General TCP connections API?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20General%20TCP%20connections%20API%3F&In-Reply-To=op.sree280s602458%40idlaptop02.ideadesigners.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003972.html">
   <LINK REL="Next"  HREF="003976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] General TCP connections API?</H1>
<!--htdig_noindex-->
    <B>Charles Iliya Krempeaux</B> 
    <A HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20General%20TCP%20connections%20API%3F&In-Reply-To=op.sree280s602458%40idlaptop02.ideadesigners.local"
       TITLE="[whatwg] General TCP connections API?">supercanadian at gmail.com
       </A><BR>
    <I>Thu May 26 13:30:18 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="003972.html">[whatwg] General TCP connections API?
</A></li>
        <LI>Next message: <A HREF="003976.html">[whatwg] General TCP connections API?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3974">[ date ]</a>
              <a href="thread.html#3974">[ thread ]</a>
              <a href="subject.html#3974">[ subject ]</a>
              <a href="author.html#3974">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hello,

On 5/26/05, Kornel Lesinski &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">kornel at ldreams.net</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> &gt; The client is polling the server.  And often a new TCP
</I>&gt;<i> &gt; connection is created (and later tore down) each time the server is
</I>&gt;<i> &gt; polled.  (Which, IMO, is bad.)
</I>&gt;<i> 
</I>&gt;<i> HTTP/1.1 uses persistent connections by default. If you set long keepalive
</I>&gt;<i> time on your webserver, chances are that all requests are going to be done
</I>&gt;<i> over same TCP/IP connection.
</I>
Setting HTTP/1.1 persistent connection to a &quot;long time&quot; and the
&quot;iframe&quot; technique (that you described below) both seem like hacks. 
I.e., we're using these things in ways that they were not suppose to
be used.

It was my understanding that one of the purposes of the WHATWG is to
do these things we want to do (with web applications) in an easy way.

For example, we can create &quot;menus&quot; with existing technologies --
DHTML.  But the code is very ugly and complex.  (DHTML has poor
&quot;developer usability&quot;.)  It would be better if, for example, if HTML
provided tags for this.  (Like the way XUL does.)


&gt;<i> To have your own connections you'd have to use other port than 80 and that
</I>&gt;<i> may be disallowed on many restricted systems.
</I>
Could you please elaborate on this.  (Who's doing the restriction? 
The server or the client?)


&gt;<i> If user navigates to the next page, browser will destroy your JS objects
</I>&gt;<i> and close their connections. That may result in worse performance than
</I>&gt;<i> with HTTP connection that is kept alive between pages.
</I>
I don't really see this as a problem.  A web application would be &quot;one
page&quot; (with possibly other pages embedded in it).  In practice, I
don't think you will have to worry about this.  (But if you disagree,
please explain.)

&gt;<i> Even if connections are limited to the same host, you couldn't safely
</I>&gt;<i> serve anything else on it. Spammers might use numerous HTML-injection
</I>&gt;<i> techniques to send spam using other people's computers, and this may get
</I>&gt;<i> much worse if host restriction fails. From past experience of hundreds of
</I>&gt;<i> cross-site scripting vulnerabilities, you can be sure that this will
</I>&gt;<i> happen sooner or later.
</I>
Could you please elaborate on this.

I'm guess what you are saying is that a &quot;host&quot; could potentially have
multiple &quot;web sites&quot; on it using &quot;named virtual hosts&quot;.  And although
you can separate out multiple sites with HTTP (using &quot;named virtual
hosts&quot;), it is not always possible with other protocols.  Also, if you
can create TCP connections to the same &quot;host&quot; then you could fake the
HTTP &quot;Host&quot; field, and access another site.  Is this what you are
saying?  (Is there anything else?)

If this is the case, then perhaps there needs to be another protocol
created that provides something like TCP connections but is &quot;host&quot;
aware (just like HTTP).  This would be analogous to UDP packets and IP
packets.  (UDP packets are alot like IP packets, from the developers
point of view.)

Is something like this out of the scope of the WHATWG?

If it is &quot;out of scope&quot; then perhaps we could just allow TCP
connections to the same host, but only to a predefined port range
(that common systems, like SMTP don't use.)  And then web application
developers could create the &quot;custom protocols&quot; to use one of those
ports.


&gt;<i> BTW: There's a hack that lets you get data from server without polling -
</I>&gt;<i> use iframe, start sending its contents and don't close connection - keep
</I>&gt;<i> sending &lt;script&gt; elements one by one.
</I>
Please refer to my top comment.


See ya

-- 
     Charles Iliya Krempeaux, B.Sc.

     charles @ reptile.ca
     supercanadian @ gmail.com
___________________________________________________________________________
  Wikibooks, Free Open-Content Books                  <A HREF="http://wikibooks.org/">http://wikibooks.org/</A>
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003972.html">[whatwg] General TCP connections API?
</A></li>
	<LI>Next message: <A HREF="003976.html">[whatwg] General TCP connections API?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3974">[ date ]</a>
              <a href="thread.html#3974">[ thread ]</a>
              <a href="subject.html#3974">[ subject ]</a>
              <a href="author.html#3974">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg-whatwg.org
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
