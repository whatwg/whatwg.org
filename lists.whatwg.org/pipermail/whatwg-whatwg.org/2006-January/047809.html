<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Comment Syntax and Parsing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Comment%20Syntax%20and%20Parsing&In-Reply-To=%3C43D310B3.2000200%40lachy.id.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="047838.html">
   <LINK REL="Next"  HREF="047811.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Comment Syntax and Parsing</H1>
<!--htdig_noindex-->
    <B>Lachlan Hunt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Comment%20Syntax%20and%20Parsing&In-Reply-To=%3C43D310B3.2000200%40lachy.id.au%3E"
       TITLE="[whatwg] Comment Syntax and Parsing">lachlan.hunt at lachy.id.au
       </A><BR>
    <I>Sat Jan 21 20:57:23 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="047838.html">[whatwg] Sandboxing scripts: call for a wider discussion
</A></li>
        <LI>Next message: <A HREF="047811.html">[whatwg] Comment Syntax and Parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47809">[ date ]</a>
              <a href="thread.html#47809">[ thread ]</a>
              <a href="subject.html#47809">[ subject ]</a>
              <a href="author.html#47809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,
   This is somewhat in response to Ian's recent article about comment 
parsing [1].

Firstly, Ian, could you please clarify what exactly made you change your 
mind about this issue, after seven years of pushing (mostly) proper SGML 
comment handling and which eventually resulted in 5 implementations 
(Mozilla, Safari, Opera, Konqueror and Prince)?  I assume, of course, 
this now means that all of those browsers will soon, if not already, be 
removing such support?

Secondly, what will now be defined as a conforming comment syntax for 
use in a document?  Ignoring parsing requirements, is it safe to assume 
that HTML will borrow from the stricter XML comment syntax, which start 
with '&lt;!--' and end with '--&gt;' and does not contain '--' anywhere in 
between?

In other words:
&lt;!-- valid comment --&gt;
&lt;!-- invalid -- comment --&gt;
&lt;!-- invalid -- -- comment --&gt; (though, valid in HTML4)

That seems like the most backwards compatible method, it remains 
compatible with the HTML4 syntax and is actually the way most good 
tutorials teach authors to write comments.

What about the empty comment declaration: &lt;!&gt; ?  I've never seen anyone 
use it (except in test cases), and I tested it with your new live DOM 
viewer tool and these were the results:

<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Ctitle%3Etest%3C/title%3E%0A%3Cp%3Etest%3C%21%3Etest%3C/p%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Ctitle%3Etest%3C/title%3E%0A%3Cp%3Etest%3C%21%3Etest%3C/p%3E</A>

Firefox 1.5.0.1: Treated as comment
IE 6:            Rendered the document properly, though the DOM view
                  showed nothing but: #comment: CTYPE ht
Opera 9/Win:     CRASHED!
Opera 9/Mac:     CRASHED!
Opera 8.5/Mac:   Ignored (not shown in DOM view)
Safari 2.0.3:    Ignored (not shown in DOM view)

As a result, and because nothing is gained by using it, it too should be 
considered non-conformant, but should be parsed as a comment, like 
Firefox does.

[1] <A HREF="http://ln.hixie.ch/?start=1137799947&amp;count=1">http://ln.hixie.ch/?start=1137799947&amp;count=1</A>

-- 
Lachlan Hunt
<A HREF="http://lachy.id.au/">http://lachy.id.au/</A>


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="047838.html">[whatwg] Sandboxing scripts: call for a wider discussion
</A></li>
	<LI>Next message: <A HREF="047811.html">[whatwg] Comment Syntax and Parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47809">[ date ]</a>
              <a href="thread.html#47809">[ thread ]</a>
              <a href="subject.html#47809">[ subject ]</a>
              <a href="author.html#47809">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
