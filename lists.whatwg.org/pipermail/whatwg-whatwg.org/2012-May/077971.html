<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Declarative unload data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Declarative%20unload%20data&In-Reply-To=%3C4FA7B672.9020407%40bauglir.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077970.html">
   <LINK REL="Next"  HREF="077973.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Declarative unload data</H1>
<!--htdig_noindex-->
    <B>Bronislav Klu&#269;ka</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Declarative%20unload%20data&In-Reply-To=%3C4FA7B672.9020407%40bauglir.com%3E"
       TITLE="[whatwg] Declarative unload data">Bronislav.Klucka at bauglir.com
       </A><BR>
    <I>Mon May  7 04:48:02 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077970.html">[whatwg] Declarative unload data
</A></li>
        <LI>Next message: <A HREF="077973.html">[whatwg] Declarative unload data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77971">[ date ]</a>
              <a href="thread.html#77971">[ thread ]</a>
              <a href="subject.html#77971">[ subject ]</a>
              <a href="author.html#77971">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>

On 7.5.2012 13:42, Tim Streater wrote:
&gt;<i> On 07 May 2012 at 08:53, Tab Atkins Jr.&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jackalmage at gmail.com</A>&gt;  wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Besides those annoying &quot;Are you sure you want to leave this page?&quot;
</I>&gt;&gt;<i> dialogs, the primary use of the unload events is a final, desperate
</I>&gt;&gt;<i> attempt to throw a message at the server, either to save some data or
</I>&gt;&gt;<i> release some server-held resource.  However, this is tricky to do
</I>&gt;&gt;<i> reliably, because browsers kill pending XHRs as they unload the page.
</I>&gt;&gt;<i> Right now, I think the most reliable method is to create an&lt;img&gt;  and
</I>&gt;&gt;<i> set its @src, because of an old quirk in IE that other browsers have
</I>&gt;&gt;<i> copied which means that pending image loads are carried to completion
</I>&gt;&gt;<i> rather than being killed.  This is, obviously, stupid.  (Another,
</I>&gt;&gt;<i> stupider, method is to prevent the handler from exiting by spinning a
</I>&gt;&gt;<i> no-op loop for several seconds, as I think browsers won't unload the
</I>&gt;&gt;<i> page until the handler exits?)
</I>&gt;<i> Personally I use onbeforeunload. In the handler for that I do a *synchronous* ajax request to have a tidy-up script run. The tidy-up script spins off a process that sleeps for 3 seconds before closing down apache. That allows the tidy-up script time to complete and send the ajax results back, so permitting the unbeforeunload handler to finish. Since the apache instance is running on the user's machine, the assumption here is that the three seconds is plenty of time.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Cheers  --  Tim
</I>
There are any number of other possible tasks that can be performed that 
are not synchronous (IDb, workers, etc.), you may want perform the same 
task in this event as you do through out the application lifetime and 
with this, you would have to have it once async, once sync...

B.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077970.html">[whatwg] Declarative unload data
</A></li>
	<LI>Next message: <A HREF="077973.html">[whatwg] Declarative unload data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77971">[ date ]</a>
              <a href="thread.html#77971">[ thread ]</a>
              <a href="subject.html#77971">[ subject ]</a>
              <a href="author.html#77971">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
