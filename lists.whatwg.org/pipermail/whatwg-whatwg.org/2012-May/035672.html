<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Form element invalid message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form%20element%20invalid%20message&In-Reply-To=%3CPine.LNX.4.64.1205041844070.17060%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035671.html">
   <LINK REL="Next"  HREF="035674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Form element invalid message</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form%20element%20invalid%20message&In-Reply-To=%3CPine.LNX.4.64.1205041844070.17060%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Form element invalid message">ian at hixie.ch
       </A><BR>
    <I>Fri May  4 12:00:32 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="035671.html">[whatwg] password-related feedback on forms
</A></li>
        <LI>Next message: <A HREF="035674.html">[whatwg] Localisation of form fields
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35672">[ date ]</a>
              <a href="thread.html#35672">[ thread ]</a>
              <a href="subject.html#35672">[ subject ]</a>
              <a href="author.html#35672">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 28 Jul 2011, Ian Hickson wrote (I'm replying to myself here...):
&gt;<i> On Fri, 29 Apr 2011, Jonas Sicking wrote:
</I>&gt;<i> &gt; On Fri, Apr 29, 2011 at 3:42 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; On Wed, 29 Dec 2010, Mounir Lamouri wrote:
</I>&gt;<i> &gt; &gt;&gt; On 12/29/2010 07:41 AM, Ian Hickson wrote:
</I>&gt;<i> &gt; &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt; &gt;&gt; I actually think that the customerrormessage attribute that has 
</I>&gt;<i> &gt; &gt;&gt; &gt;&gt; been suggested is a decent solution too. [...]
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; For example, if I go to www.google.com and click on the &quot;sign in&quot; link 
</I>&gt;<i> &gt; at the top, then without entering anything press the &quot;sign in&quot; button. 
</I>&gt;<i> &gt; At this point the page displays a error message in red that says 
</I>&gt;<i> &gt; &quot;Enter your email address.&quot; [...]
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In general it makes a lot of sense to want to display a different 
</I>&gt;<i> &gt; message when the user has failed to enter a valid value in a field. 
</I>&gt;<i> &gt; Clearly the user failed to enter what was requested the first time, 
</I>&gt;<i> &gt; and so the context around the field was not enough for the user to 
</I>&gt;<i> &gt; enter what was requested. Hence a more detailed description is 
</I>&gt;<i> &gt; appropriate.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I don't understand how such an attribute would work. Take &lt;input 
</I>&gt;<i> &gt; &gt; type=number&gt; for example, with an explicit min, max, step, etc. How 
</I>&gt;<i> &gt; &gt; would you know what value to put in the attribute? There are going 
</I>&gt;<i> &gt; &gt; to be different needs when the control's value is too low, too high, 
</I>&gt;<i> &gt; &gt; not aligned to a step, missing, etc.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Consider the example above from googles login page. Here there are two 
</I>&gt;<i> &gt; possible errors:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 1. The field is empty
</I>&gt;<i> &gt; 2. The field doesn't contain an email address
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In both cases the message &quot;Enter your email address.&quot; seems 
</I>&gt;<i> &gt; appropriate. And it seems better than what we as a browser could 
</I>&gt;<i> &gt; generate.
</I>&gt;<i> 
</I>&gt;<i> A text input field could have a number of error conditions:
</I>&gt;<i> 
</I>&gt;<i>    &lt;label&gt; Offer code:
</I>&gt;<i>     &lt;input type=text maxlength=8 pattern=&quot;[a-z1-9]+&quot; required&gt;
</I>&gt;<i>    &lt;/label&gt;
</I>&gt;<i> 
</I>&gt;<i> Suppose the code is printed as two groups of four characters, for 
</I>&gt;<i> example something like &quot;1A2B 3C4D&quot;.
</I>&gt;<i> 
</I>&gt;<i> The user could have entered the code with the space (the site doesn't 
</I>&gt;<i> want the space). Or the user could have read an O as a 0 (the code never 
</I>&gt;<i> has any zeroes to avoid that). Or the user could have forgotten to enter 
</I>&gt;<i> the code. In each of these cases, I think you'd want a different 
</I>&gt;<i> message.
</I>
That's why we have setCustomValidity().


&gt;<i> Anyway. I guess we can have a dedicated attribute that user agents can 
</I>&gt;<i> use to provide a message, rather than the current solution of just using 
</I>&gt;<i> the title=&quot;&quot; attribute for pattern=&quot;&quot;'s error message. If it's present, 
</I>&gt;<i> user agents could use it to replace or augment their message, and 
</I>&gt;<i> authors could make the message more specific by dynamically changing the 
</I>&gt;<i> attribute when during the 'invalid' event handler.
</I>&gt;<i> 
</I>&gt;<i>    &lt;label&gt; Offer code:
</I>&gt;<i>     &lt;input type=text maxlength=8 pattern=&quot;[a-z1-9]+&quot; required
</I>&gt;<i>            oninput=&quot;setCustomValidity(value.match(/0/) ?
</I>&gt;<i>                     'Codes contain no zeroes, only Os.' : '')&quot;
</I>&gt;<i>            validitymessage=&quot;Enter the code without spaces.&quot;&gt;
</I>&gt;<i>    &lt;/label&gt;
</I>&gt;<i> 
</I>&gt;<i> If we add this, do you think it should be displayed with, instead of, or 
</I>&gt;<i> replaced by the setCustomValidity() message, when both are given?
</I>
Thinking on this more, I think it would make more sense to do:

    &lt;label&gt; Offer code, without spaces:
     &lt;input type=text maxlength=8 pattern=&quot;[a-z1-9]+&quot; required
            oninput=&quot;setCustomValidity(value.match(/0/) ?
                     'Codes contain no zeroes, only Os.' : '')&quot;&gt;
    &lt;/label&gt;

Or:

    &lt;label&gt; Offer code:
     &lt;input type=text maxlength=8 pattern=&quot;[a-z1-9]+&quot; required
            oninput=&quot;setCustomValidity(
              value.match(/0/) ? 'Codes contain no zeroes, only Os.' :
              value.match(/ /) ? 'Please omit the spaces in the code.' :
              value.length != 8 ? 'Codes are 8 characters long.' : '')&quot;&gt;
    &lt;/label&gt;


On Thu, 28 Jul 2011, Jukka K. Korpela wrote:
&gt;<i> 
</I>&gt;<i> Indeed. Therefore it would be essential to be able to set the error 
</I>&gt;<i> message for _each_ check that a browser is supposed to do on the basis 
</I>&gt;<i> of HTML markup alone. If this is not possible, it is easier to authors 
</I>&gt;<i> to code all data checking in JavaScript. Setting the error messages is 
</I>&gt;<i> important both for context dependency and for localization (using the 
</I>&gt;<i> language of the browser's UI would be odd when it differs from the 
</I>&gt;<i> language of the page - if the page is in Greek and the instructions 
</I>&gt;<i> there are in Greek, I would expect the messages of the data error to be 
</I>&gt;<i> Greek, even when my browser speaks Hebrew).
</I>
I don't buy that at all. For the checks that the browser can do, it's fine 
for the browser to use its own messages, IMHO. The only reason we have 
anything for pattern=&quot;&quot; at all is that pattern=&quot;&quot; is the one case where 
describing the error automatically is non-trivial.


&gt;<i> &gt; I guess we can have a dedicated attribute that user agents can use to 
</I>&gt;<i> &gt; provide a message, rather than the current solution of just using the 
</I>&gt;<i> &gt; title=&quot;&quot; attribute for pattern=&quot;&quot;'s error message.
</I>&gt;<i> 
</I>&gt;<i> The title=&quot;&quot; attribute is generally supposed to contain an advisory 
</I>&gt;<i> title for an element, and deviating from this that way is very odd and 
</I>&gt;<i> confusing - especially since user agents may show its value in a tooltip 
</I>&gt;<i> or speak it out when entering the field.
</I>&gt;<i> 
</I>&gt;<i> A dedicated attribute is much better. In particular, it does not 
</I>&gt;<i> interfere with the existing use of existing attributes.
</I>
An advisory hint is exactly what title=&quot;&quot; is for and exactly what we're 
talking about here. I don't see any interference at all, only leveraging 
an existing feature for its primary purpose.


&gt;<i> I have no better solution than to use separate attributes, like 
</I>&gt;<i> maxlengtherror, patternerror, requirederror. This doesn't sound cool, 
</I>&gt;<i> but it would work and would be useful.
</I>
I really don't see the need for that.


On Thu, 28 Jul 2011, Scott Gonz&#225;lez wrote:
&gt;<i> 
</I>&gt;<i> I agree that it's extremely important to be able to define error 
</I>&gt;<i> messages per error condition, but it's not necessary to code all data 
</I>&gt;<i> checking in JavaScript to achieve that today. You can simply code the 
</I>&gt;<i> error message by letting the browser do the validation, then using the 
</I>&gt;<i> validity flags to set your own message with setCustomValidity. Since 
</I>&gt;<i> this is possible today, it's probably worth building a prototype that 
</I>&gt;<i> reads the custom error messages out of data- attributes, e.g., 
</I>&gt;<i> data-patternerror. I have a feeling you'll still end up with a few 
</I>&gt;<i> shortcomings because you won't have control over the order in which the 
</I>&gt;<i> checks are done, so you won't be able to specify which error message to 
</I>&gt;<i> show when there are multiple errors. Perhaps the best you could do is 
</I>&gt;<i> provide another option which allows multiple errors to be displayed at 
</I>&gt;<i> once.
</I>
Certainly if people did do that with any frequency it would be worth 
considering adding a declarative way to do it, but so far I haven't seen 
people do that at all. In my own projects I've found myself quite happy to 
rely on the default messages that the browsers provide.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035671.html">[whatwg] password-related feedback on forms
</A></li>
	<LI>Next message: <A HREF="035674.html">[whatwg] Localisation of form fields
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35672">[ date ]</a>
              <a href="thread.html#35672">[ thread ]</a>
              <a href="subject.html#35672">[ subject ]</a>
              <a href="author.html#35672">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
