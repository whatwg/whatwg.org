<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22fullscreenchange%22%20event%20should%20be%20delayed%20to%20after%0A%20transition%20is%20complete&In-Reply-To=%3C4FB2F5CB.80009%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078166.html">
   <LINK REL="Next"  HREF="078175.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete</H1>
<!--htdig_noindex-->
    <B>Chris Pearce</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22fullscreenchange%22%20event%20should%20be%20delayed%20to%20after%0A%20transition%20is%20complete&In-Reply-To=%3C4FB2F5CB.80009%40mozilla.com%3E"
       TITLE="[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete">cpearce at mozilla.com
       </A><BR>
    <I>Tue May 15 17:33:15 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="078166.html">[whatwg] So if media-queries aren't for determining the media to be used what are they for?
</A></li>
        <LI>Next message: <A HREF="078175.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35897">[ date ]</a>
              <a href="thread.html#35897">[ thread ]</a>
              <a href="subject.html#35897">[ subject ]</a>
              <a href="author.html#35897">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I think that the &quot;fullscreenchange&quot; even dispatch should be specified to 
be dispatched once the animation to transition to/from fullscreen has 
finished.

The problem is that at least two of the platforms we're supporting have 
non-instantaneous transitions from windowed to fullscreen mode. So if we 
dispatch &quot;fullscreenchange&quot; events as specified during 
HTMLElement.requestFullscreen() then the &quot;fullscreenchange&quot; events can 
arrive before the transition animation has finished, so things like 
window.screenY and window.size.* haven't reached their stable fullscreen 
values.

Our unit tests have been randomly failing because of this, so I'm sure 
this will cause problems with authors in the wild.

I think having the state changes performed by 
HTMLElement.requestFullscreen() happen synchronously before the 
animation/transition to enter fullscreen completes (as specified 
currently) and having them undone before the animation to exit 
fullscreen completes (also as specified currently in exitFullscreen()) 
is probably OK, since these state changes maybe required for the 
transition/animation. It's only the dispatch of &quot;fullscreenchange&quot; I 
think we should change.


Cheers,
Chris Pearce.
</PRE>

























































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078166.html">[whatwg] So if media-queries aren't for determining the media to be used what are they for?
</A></li>
	<LI>Next message: <A HREF="078175.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35897">[ date ]</a>
              <a href="thread.html#35897">[ thread ]</a>
              <a href="subject.html#35897">[ subject ]</a>
              <a href="author.html#35897">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
