<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22fullscreenchange%22%20event%20should%20be%20delayed%20to%20after%0A%20transition%20is%20complete&In-Reply-To=%3CCAMttkKK7cvgzNiSUMwRnBL_tqfPx9%3DnsU%2B4j-nyiSG80zKYtbg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035897.html">
   <LINK REL="Next"  HREF="078230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete</H1>
<!--htdig_noindex-->
    <B>Brandon Jones</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22fullscreenchange%22%20event%20should%20be%20delayed%20to%20after%0A%20transition%20is%20complete&In-Reply-To=%3CCAMttkKK7cvgzNiSUMwRnBL_tqfPx9%3DnsU%2B4j-nyiSG80zKYtbg%40mail.gmail.com%3E"
       TITLE="[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete">tojiro at gmail.com
       </A><BR>
    <I>Tue May 15 20:13:21 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="035897.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
        <LI>Next message: <A HREF="078230.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78175">[ date ]</a>
              <a href="thread.html#78175">[ thread ]</a>
              <a href="subject.html#78175">[ subject ]</a>
              <a href="author.html#78175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I've had intermittent issues with this as well, and completely agree that
the even should happen after the transition is done. Barring that, it would
be useful if the elements on the page reported their post-transition sizes
and positions in the even callback.

In the same vein, I'd also like to point out that I've had very similar
issues with orientationchange on mobile devices. Many mobile browsers have
a quick &quot;rotating&quot; animation that accompanies an orientation change, but
the related events seem to fire before the page is actually transformed.
The best method I've found for handling it is to start a ~1sec timeout
after the orientation change event before measuring any elements. That
creates a noticeable delay in the layout update for the users though.

In short, any APIs that transform the document like this really ought to
specify that the related events fire post-transition.

-Brandon

On Tue, May 15, 2012 at 5:33 PM, Chris Pearce &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cpearce at mozilla.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I think that the &quot;fullscreenchange&quot; even dispatch should be specified to
</I>&gt;<i> be dispatched once the animation to transition to/from fullscreen has
</I>&gt;<i> finished.
</I>&gt;<i>
</I>&gt;<i> The problem is that at least two of the platforms we're supporting have
</I>&gt;<i> non-instantaneous transitions from windowed to fullscreen mode. So if we
</I>&gt;<i> dispatch &quot;fullscreenchange&quot; events as specified during
</I>&gt;<i> HTMLElement.requestFullscreen(**) then the &quot;fullscreenchange&quot; events can
</I>&gt;<i> arrive before the transition animation has finished, so things like
</I>&gt;<i> window.screenY and window.size.* haven't reached their stable fullscreen
</I>&gt;<i> values.
</I>&gt;<i>
</I>&gt;<i> Our unit tests have been randomly failing because of this, so I'm sure
</I>&gt;<i> this will cause problems with authors in the wild.
</I>&gt;<i>
</I>&gt;<i> I think having the state changes performed by
</I>&gt;<i> HTMLElement.requestFullscreen(**) happen synchronously before the
</I>&gt;<i> animation/transition to enter fullscreen completes (as specified currently)
</I>&gt;<i> and having them undone before the animation to exit fullscreen completes
</I>&gt;<i> (also as specified currently in exitFullscreen()) is probably OK, since
</I>&gt;<i> these state changes maybe required for the transition/animation. It's only
</I>&gt;<i> the dispatch of &quot;fullscreenchange&quot; I think we should change.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Chris Pearce.
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035897.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
	<LI>Next message: <A HREF="078230.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78175">[ date ]</a>
              <a href="thread.html#78175">[ thread ]</a>
              <a href="subject.html#78175">[ subject ]</a>
              <a href="author.html#78175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
