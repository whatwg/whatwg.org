<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Firing canplaythrough when caches/buffers are full
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Firing%20canplaythrough%20when%20caches/buffers%20are%20full&In-Reply-To=%3CCAOp6jLaCGRxc1r2Vf208wDvLJMF_drwjMm%2B16HU_veMX4nqtsw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078506.html">
   <LINK REL="Next"  HREF="078511.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Firing canplaythrough when caches/buffers are full</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Firing%20canplaythrough%20when%20caches/buffers%20are%20full&In-Reply-To=%3CCAOp6jLaCGRxc1r2Vf208wDvLJMF_drwjMm%2B16HU_veMX4nqtsw%40mail.gmail.com%3E"
       TITLE="[whatwg] Firing canplaythrough when caches/buffers are full">robert at ocallahan.org
       </A><BR>
    <I>Sun May 27 17:51:22 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="078506.html">[whatwg] UndoManager questions
</A></li>
        <LI>Next message: <A HREF="078511.html">[whatwg] Firing canplaythrough when caches/buffers are full
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36218">[ date ]</a>
              <a href="thread.html#36218">[ thread ]</a>
              <a href="subject.html#36218">[ subject ]</a>
              <a href="author.html#36218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>We encountered an app that uses &quot;canplaythrough&quot; on a video element to
trigger execution of the app &quot;so we don't start playing the video until we
can do so without stuttering&quot;.
<A HREF="http://gaiamobile.org/apps/cubevid/">http://gaiamobile.org/apps/cubevid/</A>
This approach works fine on desktop browsers. On mobile browsers, we want a
smaller limit on the amount of data buffered by the media subsystem. That
means we pause the download before &quot;canplaythrough&quot; would fire, so it never
fires, so the app doesn't work.

We could fix this particular app, but this seems like a natural thing for
authors to do and get wrong.

I propose fixing this by having the UA enter the HAVE_ENOUGH_DATA
readyState when the UA decides to suspend a download indefinitely and the
preload state is &quot;Automatic&quot; (or overriden by &quot;autoplay&quot; being set).

We have checked in a patch to Gecko to do this. (Note that for a long time,
Gecko has triggered playback of autoplay elements when suspending due to
media buffers being full. The new change makes us enter HAVE_ENOUGH_DATA as
well.)

Rob
-- 
&#8220;You have heard that it was said, &#8216;Love your neighbor and hate your enemy.&#8217;
But I tell you, love your enemies and pray for those who persecute you,
that you may be children of your Father in heaven. ... If you love those
who love you, what reward will you get? Are not even the tax collectors
doing that? And if you greet only your own people, what are you doing more
than others?&quot; [Matthew 5:43-47]
</PRE>
















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078506.html">[whatwg] UndoManager questions
</A></li>
	<LI>Next message: <A HREF="078511.html">[whatwg] Firing canplaythrough when caches/buffers are full
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36218">[ date ]</a>
              <a href="thread.html#36218">[ thread ]</a>
              <a href="subject.html#36218">[ subject ]</a>
              <a href="author.html#36218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
