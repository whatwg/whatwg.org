<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Declarative unload data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Declarative%20unload%20data&In-Reply-To=%3C4FA7EB22.7040603%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077971.html">
   <LINK REL="Next"  HREF="077974.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Declarative unload data</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Declarative%20unload%20data&In-Reply-To=%3C4FA7EB22.7040603%40mit.edu%3E"
       TITLE="[whatwg] Declarative unload data">bzbarsky at MIT.EDU
       </A><BR>
    <I>Mon May  7 08:32:50 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077971.html">[whatwg] Declarative unload data
</A></li>
        <LI>Next message: <A HREF="077974.html">[whatwg] Declarative unload data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77973">[ date ]</a>
              <a href="thread.html#77973">[ thread ]</a>
              <a href="subject.html#77973">[ subject ]</a>
              <a href="author.html#77973">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 5/7/12 3:53 AM, Tab Atkins Jr. wrote:
&gt;<i> A page can set up an unloadHandler immediately on loading, and just
</I>&gt;<i> keep its .data property updated over time.  The author is then secure
</I>&gt;<i> in the knowledge that, barring complete computer destruction, if the
</I>&gt;<i> user shuts down their browser the server will receive a message with
</I>&gt;<i> whatever .data held at the time.
</I>
Where &quot;complete computer destruction&quot; includes &quot;browser crash&quot; and 
several similar things?  I don't think that it's reasonable to require 
the browser to send the request after the browser process has exited: 
for one thing the browser may not have access to non-volatile storage at 
all.

Presumably the request involved would never do any prompting for 
credentials; if they're needed it would fail?

Also presumably the browser would be allowed to kill the connection once 
it receives the first response packet, instead of having to download all 
the response data?  That would be a win from the browser's point of view.

&gt;<i> 1. The author doesn't have to use fiddly hacks to avoid their request
</I>&gt;<i> getting killed as the page unloads.
</I>
Yes.

&gt;<i> 2. The browser can go ahead and kill the page immediately, and send
</I>&gt;<i> the request at its leisure.
</I>
I guess that's true if &quot;bar&quot; is converted to a string at foo.data set time.

A bigger question is whether browsers really want to make it easier to 
do this or work on getting rid of the ability to phone home at/after 
unload altogether.  My gut reaction every time I see pages doing it is 
that they're up to no good, and code inspection usually indicates that 
I'm right: the #1 use of this is for persistent user tracking.

-Boris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077971.html">[whatwg] Declarative unload data
</A></li>
	<LI>Next message: <A HREF="077974.html">[whatwg] Declarative unload data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77973">[ date ]</a>
              <a href="thread.html#77973">[ thread ]</a>
              <a href="subject.html#77973">[ subject ]</a>
              <a href="author.html#77973">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
