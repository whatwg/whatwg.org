<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22fullscreenchange%22%20event%20should%20be%20delayed%20to%20after%0A%20transition%20is%20complete&In-Reply-To=%3C4FB4955E.9020804%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078230.html">
   <LINK REL="Next"  HREF="078286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete</H1>
<!--htdig_noindex-->
    <B>Chris Pearce</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22fullscreenchange%22%20event%20should%20be%20delayed%20to%20after%0A%20transition%20is%20complete&In-Reply-To=%3C4FB4955E.9020804%40mozilla.com%3E"
       TITLE="[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete">cpearce at mozilla.com
       </A><BR>
    <I>Wed May 16 23:06:22 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="078230.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
        <LI>Next message: <A HREF="078286.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78271">[ date ]</a>
              <a href="thread.html#78271">[ thread ]</a>
              <a href="subject.html#78271">[ subject ]</a>
              <a href="author.html#78271">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 17/05/2012 3:37 a.m., Anne van Kesteren wrote:
&gt;<i> On Wed, May 16, 2012 at 2:33 AM, Chris Pearce&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cpearce at mozilla.com</A>&gt;  wrote:
</I>&gt;&gt;<i> I think that the &quot;fullscreenchange&quot; even dispatch should be specified to be
</I>&gt;&gt;<i> dispatched once the animation to transition to/from fullscreen has finished.
</I>&gt;<i> So queuing the task was not enough? I guess that makes sense.
</I>&gt;<i>
</I>&gt;<i> As for how to best define this in the specification. Should I just
</I>&gt;<i> create a list of objects the event is to be dispatched upon and then
</I>&gt;<i> after the animation steps start queuing tasks to dispatch them on the
</I>&gt;<i> objects in that list?
</I>&gt;<i>
</I>
Actually after thinking a bit more on this I've changed my mind and I 
don't think it's ok to leave the fullscreenElement stack and :fullscreen 
state changes synchronous while delaying the dispatch of 
&quot;fullscreenchange&quot; events.

If fullscreenElement stack and :fullscreen state changes could be 
observed before the fullscreen transition/animation is complete, script 
won't see consistent behaviour across platforms, i.e. on some (but not 
all) platforms there will be a period of time that 
document.fullscreenElement is true but document.fullscreenElement 
doesn't take up the entire screen.

I think it would be best to simply make everything from Step 2 onwards 
of the requestFullscreen() algorithm spec asynchronous. So in the 
requestFullscreen specification, move Step 5 and Step 6 up to be 
inserted before Step 2.

We should do the same with exitFullscreen(), i.e. move Step 6 and Step 7 
of the exitFullscreen algorithm spec up to be inserted before Step 3.

We should also specify that those state changes happen in synchronous 
sections, to keep the world sane.

Thanks,
Chris Pearce.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078230.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
	<LI>Next message: <A HREF="078286.html">[whatwg] &quot;fullscreenchange&quot; event should be delayed to after transition is complete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78271">[ date ]</a>
              <a href="thread.html#78271">[ thread ]</a>
              <a href="subject.html#78271">[ subject ]</a>
              <a href="author.html#78271">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
