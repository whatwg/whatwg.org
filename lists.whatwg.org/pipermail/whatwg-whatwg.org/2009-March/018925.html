<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] localStorage + worker processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20%2B%20worker%20processes&In-Reply-To=%3C278fd46c0903210938o77f076f8v108f2bf40d8167f8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018922.html">
   <LINK REL="Next"  HREF="018930.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] localStorage + worker processes</H1>
<!--htdig_noindex-->
    <B>Aaron Boodman</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20%2B%20worker%20processes&In-Reply-To=%3C278fd46c0903210938o77f076f8v108f2bf40d8167f8%40mail.gmail.com%3E"
       TITLE="[whatwg] localStorage + worker processes">aa at google.com
       </A><BR>
    <I>Sat Mar 21 09:38:35 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018922.html">[whatwg] localStorage + worker processes
</A></li>
        <LI>Next message: <A HREF="018930.html">[whatwg] localStorage + worker processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18925">[ date ]</a>
              <a href="thread.html#18925">[ thread ]</a>
              <a href="subject.html#18925">[ subject ]</a>
              <a href="author.html#18925">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Mar 21, 2009 at 12:48 AM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
&gt;<i> What we could do, is to have an API like
</I>&gt;<i>
</I>&gt;<i> getLocalStorage(callback);
</I>&gt;<i>
</I>&gt;<i> This function returns immediately, but will then call the callback
</I>&gt;<i> function as soon as the localStorage becomes available and the lock
</I>&gt;<i> been acquired. This would always happen asynchronously off the event
</I>&gt;<i> loop, which means that once the callback returns the lock is released
</I>&gt;<i> again.
</I>
Funny, a few of us from Chromium were discussing a similar solution privately.

Actually, I don't believe that it is required that the callback run
asynchronously. All the callback is used for is establishing the lock
lifetime explicitly, and we assume that this will usually make the
lock lifetime short. So we can block while we wait for it to become
available. This is just like the behavior today without workers.

&gt;<i> This new API I believe is good enough to be used both from workers and
</I>&gt;<i> window contexts.
</I>
We could maintain backward compatibility by not making it required on
normal web pages, because our assumption has been that web pages won't
hold the lock for long periods of time (because they wouldn't want to
block the UI either).

- a
</PRE>













<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018922.html">[whatwg] localStorage + worker processes
</A></li>
	<LI>Next message: <A HREF="018930.html">[whatwg] localStorage + worker processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18925">[ date ]</a>
              <a href="thread.html#18925">[ thread ]</a>
              <a href="subject.html#18925">[ subject ]</a>
              <a href="author.html#18925">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
