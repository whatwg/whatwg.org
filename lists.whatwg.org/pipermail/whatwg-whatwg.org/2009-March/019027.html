<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &quot;C:\fakepath\&quot; in HTML5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22C%3A%5Cfakepath%5C%22%20in%20HTML5&In-Reply-To=%3CE9A7B05D654B48FDB95A033E69B426DB%40emea.inin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019020.html">
   <LINK REL="Next"  HREF="019076.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &quot;C:\fakepath\&quot; in HTML5</H1>
<!--htdig_noindex-->
    <B>Randy Drielinger</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22C%3A%5Cfakepath%5C%22%20in%20HTML5&In-Reply-To=%3CE9A7B05D654B48FDB95A033E69B426DB%40emea.inin.com%3E"
       TITLE="[whatwg] &quot;C:\fakepath\&quot; in HTML5">Randy at ProWebDesign.nl
       </A><BR>
    <I>Thu Mar 26 04:33:10 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019020.html">[whatwg] &quot;C:\fakepath\&quot; in HTML5
</A></li>
        <LI>Next message: <A HREF="019076.html">[whatwg] &quot;C:\fakepath\&quot; in HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19027">[ date ]</a>
              <a href="thread.html#19027">[ thread ]</a>
              <a href="subject.html#19027">[ subject ]</a>
              <a href="author.html#19027">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> Image.src as resolved by the browser. In IE, Chrome and FF I noted today 
</I>&gt;<i> (something different than it was a year or so ago) that for content served 
</I>&gt;<i> from the local drive space (in Windows anyhow), document.images[x].src 
</I>&gt;<i> resolves to <A HREF="file:///C:/">file:///C:/</A> [path].  In Opera, it still resolves to 
</I>&gt;<i> &quot;<A HREF="file://localpath:/&quot;">file://localpath:/&quot;</A> .
</I>
With the risk of not being compliant with other OS's, but isn't using 
<A HREF="file://localpath/&lt;real_file_name.extension">file://localpath/&lt;real_file_name.extension</A>&gt; (so using <A HREF="file://localpath/">file://localpath/</A> by 
default)
the solution for the original suggestion?

This ensures not breaking anything on existing websites and is a far more 
logical name for the whole workaround.

my 2cents




----- Original Message ----- 
From: &quot;ddailey&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ddailey at zoominternet.net</A>&gt;
To: &quot;Ian Hickson&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt;; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at whatwg.org</A>&gt;
Sent: Wednesday, March 25, 2009 11:26 PM
Subject: Re: [whatwg] &quot;C:\fakepath\&quot; in HTML5


&gt;<i> While on the topic, something vaguely similar came to mind.
</I>&gt;<i>
</I>&gt;<i> If we make a puzzle of 2n-squared minus 1 (e.g. a puzzle of 15) in which 
</I>&gt;<i> web site visitors can slide tiles around through a grid, we might wish to 
</I>&gt;<i> detect, through script, when the puzzle has been &quot;solved.&quot; This means 
</I>&gt;<i> interrogating the value of
</I>&gt;<i> Image.src as resolved by the browser. In IE, Chrome and FF I noted today 
</I>&gt;<i> (something different than it was a year or so ago) that for content served 
</I>&gt;<i> from the local drive space (in Windows anyhow), document.images[x].src 
</I>&gt;<i> resolves to <A HREF="file:///C:/">file:///C:/</A> [path].  In Opera, it still resolves to 
</I>&gt;<i> &quot;<A HREF="file://localpath:/&quot;">file://localpath:/&quot;</A> . Hence, script to determine if the puzzle has been 
</I>&gt;<i> solved has to resort to a wee bit of mischief to untangle the issue. Over 
</I>&gt;<i> the past nine years or so, I've seen at least a half dozen different 
</I>&gt;<i> strategies employed by various browsers to deal with the issue, ranging 
</I>&gt;<i> from the sensible to the bizarre, varying as a function of where the file 
</I>&gt;<i> is found (in local drive space, networked files, or even files served from 
</I>&gt;<i> the web). Where might we expect things to settle down ultimately?
</I>&gt;<i>
</I>&gt;<i> cheers
</I>&gt;<i> David
</I>&gt;<i>
</I>&gt;<i> P.S. I gather from what you've written here, that indeed the spec will 
</I>&gt;<i> simplify access to local drive space through input type=file eventually, 
</I>&gt;<i> hence allowing client-side image manipulation for web applications? Will 
</I>&gt;<i> this solution propagate outward into SVG as well, where it will also be 
</I>&gt;<i> quite useful, or only if the SVG is inlined in HTML?
</I>&gt;<i>
</I>&gt;<i> ----- Original Message ----- 
</I>&gt;<i> From: &quot;Ian Hickson&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt;
</I>&gt;<i> To: &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at whatwg.org</A>&gt;
</I>&gt;<i> Sent: Wednesday, March 25, 2009 5:39 PM
</I>&gt;<i> Subject: Re: [whatwg] &quot;C:\fakepath\&quot; in HTML5
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The long and short of it with the c:\fakepath\ issue is that some browser
</I>&gt;&gt;<i> vendors have reported compatibility problems with not having this. I
</I>&gt;&gt;<i> acknowledge that there is some skepticism about whether this is a serious
</I>&gt;&gt;<i> enough issue to warrant this ugly hack, but given that the concerns were
</I>&gt;&gt;<i> raised by two browser vendors independently, it seems likely that we
</I>&gt;&gt;<i> should heed their advice.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't think is a huge issue because we will in due course (when Arun's
</I>&gt;&gt;<i> spec is ready) be adding an API to &lt;input type=file&gt; that exposes the
</I>&gt;&gt;<i> actual files, filenames, types, etc, and the .value API will be 
</I>&gt;&gt;<i> vestigial.
</I>&gt;&gt;<i> (The .value API has other issues, like only exposing the first file in a
</I>&gt;&gt;<i> multiple-file upload widget.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, 24 Mar 2009, Boris Zbarsky wrote:
</I>&gt;&gt;&gt;<i> Ian Hickson wrote:
</I>&gt;&gt;&gt;<i> &gt; According to Microsoft:
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; <A HREF="http://blogs.msdn.com/ie/archive/2009/03/20/rtm-platform-changes.aspx">http://blogs.msdn.com/ie/archive/2009/03/20/rtm-platform-changes.aspx</A>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; ...the problem was with &quot;a significant number of sites (e.g. education
</I>&gt;&gt;&gt;<i> &gt; products, several movie sharing sites, etc) and devices (e.g. popular
</I>&gt;&gt;&gt;<i> &gt; home routers)&quot;. The blog post above includes a screenshot of a
</I>&gt;&gt;&gt;<i> &gt; firmware upgrade screen that has this problem. This is not a site that
</I>&gt;&gt;&gt;<i> &gt; could be fixed.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sure it is.  You just need a browser that'll allow you to do a firmware
</I>&gt;&gt;&gt;<i> upgrade to fix it.  Which means that if one gets such an upgrade shipped
</I>&gt;&gt;&gt;<i> before all browsers stop sending paths, things seem to be ok.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Realistically speaking, that seems unlikely to be practical. I wouldn't 
</I>&gt;&gt;<i> be
</I>&gt;&gt;<i> really surprised that someone would want to upgrade the firmware on a
</I>&gt;&gt;<i> device ten years from now, for instance. We never know.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I agree they're not as happy as they could be, but they're ok.  In
</I>&gt;&gt;&gt;<i> addition, is the expected lifetime of the affected device comparable to
</I>&gt;&gt;&gt;<i> the expected time it takes to deploy the new behavior in browsers?  If
</I>&gt;&gt;&gt;<i> so, it's worth it to contact the device maker and ask them to fix things
</I>&gt;&gt;&gt;<i> in their next model instead of working around them.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We both know that evanglisation efforts don't have a great success rate.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> As far as the &quot;significant number of sites&quot; above... I wonder whether
</I>&gt;&gt;&gt;<i> there's UA sniffing going on here that causes some of these to assume
</I>&gt;&gt;&gt;<i> certain things about IE only.  We've certainly seen quite a number of
</I>&gt;&gt;&gt;<i> issues along those lines: we fix a bug, and discover that sites had
</I>&gt;&gt;&gt;<i> written special browser-specific code taking advantage of that bug.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Indeed, I wouldn't be surprised if this was why Opera and IE have seen
</I>&gt;&gt;<i> this problem, but Mozilla has not.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, 24 Mar 2009, Alex Henrie wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Example: A site lets a user upload a file and write some comments
</I>&gt;&gt;&gt;<i> associated with that file. On the browser side, a new input element is
</I>&gt;&gt;&gt;<i> dynamically created with the name and id &quot;Notes for
</I>&gt;&gt;&gt;<i> C:\fakepath\upload.txt&quot;. On the server side, the server receives
</I>&gt;&gt;&gt;<i> &quot;upload.txt&quot; and looks for &quot;Notes for upload.txt&quot; to match. It of course
</I>&gt;&gt;&gt;<i> is not there because the programmer had no idea that the browser would
</I>&gt;&gt;&gt;<i> be adding appending a fake path in JavaScript but not in HTTP.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That seems like a rather brittle design; what if the user uploads two
</I>&gt;&gt;<i> files with the same name, for instance? Or uploads an anonymous file 
</I>&gt;&gt;<i> (e.g.
</I>&gt;&gt;<i> a file obtained from an on-board camera)? Or changes the selected file? I
</I>&gt;&gt;<i> recommend using a unique ID instead, it's much more resilient. :-)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, 24 Mar 2009, Bil Corry wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I played with this a bit more, it turns out that IE8 returns
</I>&gt;&gt;&gt;<i> &quot;C:\fakepath\filename.ext&quot; for sites in the Internet zone, but returns
</I>&gt;&gt;&gt;<i> the real path for sites in the Trusted zone.  So even if HTML5 requires
</I>&gt;&gt;&gt;<i> returning just the file name and is implemented as such in IE, the user
</I>&gt;&gt;&gt;<i> can still designate their router as a Trusted Zone and be able to update
</I>&gt;&gt;&gt;<i> their firmware.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is because the Trusted zone gets their less-standards-compliant 
</I>&gt;&gt;<i> &quot;IE7&quot;
</I>&gt;&gt;<i> mode. I don't think relying on this (or expecting other browsers to do
</I>&gt;&gt;<i> this) is a scalable strategy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here are some bugs that might be related to this issue:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=304939">https://bugzilla.mozilla.org/show_bug.cgi?id=304939</A>
</I>&gt;&gt;<i>   <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=473047">https://bugzilla.mozilla.org/show_bug.cgi?id=473047</A>
</I>&gt;&gt;<i>   <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=440991">https://bugzilla.mozilla.org/show_bug.cgi?id=440991</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I haven't checked if they really are this problem, but it's possible.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 
</I>
</PRE>





<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019020.html">[whatwg] &quot;C:\fakepath\&quot; in HTML5
</A></li>
	<LI>Next message: <A HREF="019076.html">[whatwg] &quot;C:\fakepath\&quot; in HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19027">[ date ]</a>
              <a href="thread.html#19027">[ thread ]</a>
              <a href="subject.html#19027">[ subject ]</a>
              <a href="author.html#19027">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
