<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;video&gt; and acceleration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20and%20acceleration&In-Reply-To=%3Cop.urllu6lwatwj1d%40sisko.linkoping.osa%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061340.html">
   <LINK REL="Next"  HREF="061351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;video&gt; and acceleration</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20and%20acceleration&In-Reply-To=%3Cop.urllu6lwatwj1d%40sisko.linkoping.osa%3E"
       TITLE="[whatwg] &lt;video&gt; and acceleration">philipj at opera.com
       </A><BR>
    <I>Mon Mar 30 02:26:59 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061340.html">[whatwg] &lt;video&gt; and acceleration
</A></li>
        <LI>Next message: <A HREF="061351.html">[whatwg] Web Addresses vs Legacy Extended IRI (again)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61360">[ date ]</a>
              <a href="thread.html#61360">[ thread ]</a>
              <a href="subject.html#61360">[ subject ]</a>
              <a href="author.html#61360">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 28 Mar 2009 05:57:35 +0100, Benjamin M. Schwartz  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bmschwar at fas.harvard.edu</A>&gt; wrote:

&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> Dear What,
</I>&gt;<i>
</I>&gt;<i> Short: &lt;video&gt; won't work on slow devices.  Help!
</I>&gt;<i>
</I>&gt;<i> Long:
</I>&gt;<i> The &lt;video&gt; tag has great potential to be useful on low-powered computers
</I>&gt;<i> and computing devices, where current internet video streaming solutions
</I>&gt;<i> (such as Adobe's Flash) are too computationally expensive.  My personal
</I>&gt;<i> experience is with OLPC XO-1*, on which Flash (and Gnash) are terribly
</I>&gt;<i> slow for any purpose, but Theora+Vorbis playback is quite smooth at
</I>&gt;<i> reasonable resolutions and bitrates.
</I>&gt;<i>
</I>&gt;<i> The &lt;video&gt; standard allows arbitrary manipulations of the video stream
</I>&gt;<i> within the HTML renderer.  To permit this, the initial implementations
</I>&gt;<i> (such as the one in Firefox 3.5) will perform all video decoding
</I>&gt;<i> operations on the CPU, including the tremendously expensive YUV-&gt;RGB
</I>&gt;<i> conversion and scaling.  This is viable only for moderate resolutions and
</I>&gt;<i> extremely fast processors.
</I>&gt;<i>
</I>&gt;<i> Recognizing this, the Firefox developers expect that the decoding process
</I>&gt;<i> will eventually be accelerated.  However, an accelerated implementation  
</I>&gt;<i> of
</I>&gt;<i> the &lt;video&gt; spec inevitably requires a 3D GPU, in order to permit
</I>&gt;<i> transparent video, blended overlays, and arbitrary rotations.
</I>&gt;<i>
</I>&gt;<i> Pure software playback of video looks like a slideshow on the XO, or any
</I>&gt;<i> device with similar CPU power, achieving 1 or 2 fps.  However, these
</I>&gt;<i> devices typically have a 2D graphics chip that provides &quot;video overlay&quot;
</I>&gt;<i> acceleration: 1-bit alpha, YUV-&gt;RGB, and simple scaling, all in
</I>&gt;<i> special-purpose hardware.**  Using the overlay (via XVideo on Linux)
</I>&gt;<i> allows smooth, full-speed playback.
</I>&gt;<i>
</I>&gt;<i> THE QUESTION:
</I>&gt;<i> What is the recommended way to handle the &lt;video&gt; tag on such hardware?
</I>&gt;<i>
</I>&gt;<i> There are two obvious solutions:
</I>&gt;<i> 0. Implement the spec, and just let it be really slow.
</I>&gt;<i> 1. Attempt to approximate the correct behavior, given the limitations of
</I>&gt;<i> the hardware.  Make the video appear where it's supposed to appear, and
</I>&gt;<i> use the 1-bit alpha (dithered?) to blend static items over it.  Ignore
</I>&gt;<i> transparency of the video.  Ignore rotations, etc.
</I>&gt;<i> 2. Ignore the HTML context.  Show the video &quot;in manners more suitable to
</I>&gt;<i> the user (e.g. full-screen or in an independent resizable window)&quot;.
</I>&gt;<i>
</I>&gt;<i> Which is preferable?  Is it worth specifying a preferred behavior?
</I>
In the typical case a simple hardware overlay correctly positioned could  
be used, but there will always be a need for a software fallback when  
rotation, filters, etc are used. Like Robert O'Callahan said, a user agent  
would need to detect when it is safe to use hardware acceleration and use  
it only then.

If there is something that could be changed in the spec to make things a  
bit easier for user agents it might be an overlay attribute, just like SVG  
has:  
<A HREF="http://www.w3.org/TR/SVGTiny12/multimedia.html#compositingBehaviorAttribute">http://www.w3.org/TR/SVGTiny12/multimedia.html#compositingBehaviorAttribute</A>

I'm not convinced such an attribute would help, just pointing it out  
here...

-- 
Philip J&#228;genstedt
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061340.html">[whatwg] &lt;video&gt; and acceleration
</A></li>
	<LI>Next message: <A HREF="061351.html">[whatwg] Web Addresses vs Legacy Extended IRI (again)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61360">[ date ]</a>
              <a href="thread.html#61360">[ thread ]</a>
              <a href="subject.html#61360">[ subject ]</a>
              <a href="author.html#61360">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
