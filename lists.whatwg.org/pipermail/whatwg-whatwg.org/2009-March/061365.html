<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Worker feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3Cfa2eab050903301913j13d42d9epa5ef8a2999755f74%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061387.html">
   <LINK REL="Next"  HREF="061302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Worker feedback</H1>
<!--htdig_noindex-->
    <B>Michael Nordman</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3Cfa2eab050903301913j13d42d9epa5ef8a2999755f74%40mail.gmail.com%3E"
       TITLE="[whatwg] Worker feedback">michaeln at google.com
       </A><BR>
    <I>Mon Mar 30 19:13:53 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061387.html">[whatwg] Worker feedback
</A></li>
        <LI>Next message: <A HREF="061302.html">[whatwg] URL decomposition on HTMLAnchorElement interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61365">[ date ]</a>
              <a href="thread.html#61365">[ thread ]</a>
              <a href="subject.html#61365">[ subject ]</a>
              <a href="author.html#61365">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> I think it makes sense to treat dedicated workers as simple subresources,
</I>
not separate browsing contexts, and that they should thus just use the

application cache of their parent browsing contexts. This is what WebKit

does, according to ap.


&gt;<i> I've now done this in the spec.
</I>

Sounds good. I'd phrase it a little differently though. Dedicated worker do
have a browsing context that is distinct from their parents, but the
appcache
selected for a dedicated worker context is identical to the appacache
selected
for the parents context.


&gt;<i>
</I>&gt;<i> For shared workers, I see these options:
</I>

&gt;<i>  - Not allow app caches, so shared workers don't work when offline. That
</I>
  seems bad.


&gt;<i>  - Same as suggested for dedicated workers above -- use the creator's
</I>
  cache, so at least one client will get the version they expect. Other

  clients will have no idea what version they're talking to, the creator

  would have an unusual relationship with the worker (it would be able

  to call swapCache() but nobody else would), and once the creator goes

  away, there will be a zombie relationship.


&gt;<i>  - Pick an appcache more or less at random, like when you view an image in
</I>
  a top-level browsing context. Clients will have no idea which version

  they're talking to.


&gt;<i>  - Allow workers to specify a manifest using some sort of comment syntax.
</I>
  Nobody knows what version they'll get, but at least it's always the

  same version, and it's always up to date.


&gt;<i> Using the creator's cache is the one that minimises the number of clients
</I>
that are confused, but it also makes the debugging experience most differ

from the case where there are two apps using the worker.


&gt;<i> Using an appcache selected the same way we would pick one for images has
</I>
the minor benefit of being somewhat consistent with how window.open()

works, and we could say that window.open() and new SharedWorker are

somewhat similar.


&gt;<i> I have picked this route for now. Implementation feedback is welcome in
</I>
determining if this is a good idea.


Sounds good for now.

Ultimately, I suspect that  additionally allowing workers to specify a
manifest using
some sort of syntax may be the right answer. That would put cache selection
for
shared workers on par with how cache selection works for pages (not just
images)
opened via window.open. As 'page' cache selection is refined due to
experience with
this system, those same refinements would also apply to 'shared worker'
cache
selection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090330/42ffdb88/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090330/42ffdb88/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061387.html">[whatwg] Worker feedback
</A></li>
	<LI>Next message: <A HREF="061302.html">[whatwg] URL decomposition on HTMLAnchorElement interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61365">[ date ]</a>
              <a href="thread.html#61365">[ thread ]</a>
              <a href="subject.html#61365">[ subject ]</a>
              <a href="author.html#61365">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
