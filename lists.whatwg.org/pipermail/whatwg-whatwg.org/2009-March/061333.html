<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] URL decomposition on HTMLAnchorElement interface
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20URL%20decomposition%20on%20HTMLAnchorElement%20interface&In-Reply-To=%3C20090328010723.24E958DB002D%40zapata.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061344.html">
   <LINK REL="Next"  HREF="061336.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] URL decomposition on HTMLAnchorElement interface</H1>
<!--htdig_noindex-->
    <B>Kartikaya Gupta</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20URL%20decomposition%20on%20HTMLAnchorElement%20interface&In-Reply-To=%3C20090328010723.24E958DB002D%40zapata.dreamhost.com%3E"
       TITLE="[whatwg] URL decomposition on HTMLAnchorElement interface">lists.whatwg at stakface.com
       </A><BR>
    <I>Fri Mar 27 18:07:21 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061344.html">[whatwg] URL decomposition on HTMLAnchorElement interface
</A></li>
        <LI>Next message: <A HREF="061336.html">[whatwg] URL decomposition on HTMLAnchorElement interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61333">[ date ]</a>
              <a href="thread.html#61333">[ thread ]</a>
              <a href="subject.html#61333">[ subject ]</a>
              <a href="author.html#61333">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, 27 Mar 2009 17:40:08 -0400, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at MIT.EDU</A>&gt; wrote:
&gt;<i> Kartikaya Gupta wrote:
</I>&gt;<i> &gt; - Attempts to set &quot;pathname&quot; to null should throw, since the path is a required 
</I>&gt;<i> &gt; component of a URI. Setting &quot;pathname&quot; to anything else should be allowed and 
</I>&gt;<i> &gt; should update the path component of the underlying URI (invalid characters are 
</I>&gt;<i> &gt; escaped).
</I>&gt;<i> 
</I>&gt;<i> These are all more or less unacceptable.  Foe example, setting 
</I>&gt;<i> &quot;pathname&quot; to empty string should work just fine, imo; setting that on 
</I>&gt;<i> &quot;<A HREF="http://foo.com/bar/">http://foo.com/bar/</A>&quot; should result in &quot;<A HREF="http://foo.com/">http://foo.com/</A>&quot;.
</I>&gt;<i> 
</I>
The empty string falls under the &quot;anything else&quot; case in my suggestion above and would work as you expect.

&gt;<i> There are big scary comments in the Gecko code for these setters saying 
</I>&gt;<i> that they must never ever throw.  I suspect that making them throw would 
</I>&gt;<i> be a serious web compat issue.
</I>
Is this Gecko-internal code you're referring to? Or the setters exposed to web content via HTMLAnchorElement? And do you have any examples of websites that would break if they threw?

&gt;<i> Changing from an authority to a non-authority URI or the other way 
</I>&gt;<i> around doesn't seem desirable to me (and would only work for unknown 
</I>&gt;<i> schemes anyway, presumably, at best; it's better if it just never works).
</I>
Does it matter? Since it's an unknown scheme, it's basically opaque data. You can't dereference it and fetch the resource it points to, so is there an actual benefit from restricting the behavior?

&gt;<i> &gt; - In general I made every invalid action throw rather than ignoring the attempt 
</I>&gt;<i> &gt; because I personally don't like it when things fail silently.
</I>&gt;<i> 
</I>&gt;<i> That's nice, but I suspect web sites rely on the silent fail behavior here.
</I>
Examples? That being said, I'd be fine with changing them all to do the silent ignore thing instead of throwing if it turns out that throwing would break a lot of stuff.

Cheers,
kats

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061344.html">[whatwg] URL decomposition on HTMLAnchorElement interface
</A></li>
	<LI>Next message: <A HREF="061336.html">[whatwg] URL decomposition on HTMLAnchorElement interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61333">[ date ]</a>
              <a href="thread.html#61333">[ thread ]</a>
              <a href="subject.html#61333">[ subject ]</a>
              <a href="author.html#61333">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
