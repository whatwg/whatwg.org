<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Text Encoding used to decode Web Worker's script.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Text%20Encoding%20used%20to%20decode%20Web%20Worker%27s%20script.&In-Reply-To=%3C28040fc60903191615o4f63bb0bn3f9fd31d6eccbd5f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061174.html">
   <LINK REL="Next"  HREF="061171.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Text Encoding used to decode Web Worker's script.</H1>
<!--htdig_noindex-->
    <B>Dmitry Titov</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Text%20Encoding%20used%20to%20decode%20Web%20Worker%27s%20script.&In-Reply-To=%3C28040fc60903191615o4f63bb0bn3f9fd31d6eccbd5f%40mail.gmail.com%3E"
       TITLE="[whatwg] Text Encoding used to decode Web Worker's script.">dimich at chromium.org
       </A><BR>
    <I>Thu Mar 19 16:15:13 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061174.html">[whatwg] Text Encoding used to decode Web Worker's script.
</A></li>
        <LI>Next message: <A HREF="061171.html">[whatwg] Text Encoding used to decode Web Worker's script.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61175">[ date ]</a>
              <a href="thread.html#61175">[ thread ]</a>
              <a href="subject.html#61175">[ subject ]</a>
              <a href="author.html#61175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>It's quite common for the non-English countries to have servers with
Content-Type set for everything textual to specify the local ANSI codepage.
So there are going to be scenarios when there is a JavaScript with text
strings embedded in it, and it can be simply loaded into worker now using
importScripts().
If the Content-Type/charset header is not honored anymore, there will be
cases of silent breakage.

If the script for Workers always required to be modified in some way then
it's much less of a problem. But when a lot of script files can be just
reused, why create a problem for webmasters? Honoring Content-Type override
is not complicated and is already implemented in most browsers, so there
would be an additional work to disable it.

Dmitry


On Thu, Mar 19, 2009 at 4:00 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:

&gt;<i> On Thu, Mar 19, 2009 at 3:54 PM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; On Thu, 19 Mar 2009 23:49:53 +0100, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; The problem is if we want to allow people to use already existing
</I>&gt;<i> &gt;&gt; scripts then they are likely often not in UTF-8.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Most scripts will probably not work out-of-the box anyway since there
</I>&gt;<i> &gt;&gt; is no access to DOM. But purely computational libraries should work.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Would such libraries have a lot of non-UTF-8 characters?
</I>&gt;<i>
</I>&gt;<i> It's the web so yes, I would assume there are some amount of non-UTF-8
</I>&gt;<i> characters. Hard to say how much of course.
</I>&gt;<i>
</I>&gt;<i> &gt; Also, it's not that
</I>&gt;<i> &gt; hard to encode something as UTF-8 these days and the reduced complexity
</I>&gt;<i> &gt; would be a nice benefit.
</I>&gt;<i>
</I>&gt;<i> Do such tools always insert a BOM as well? So that it's safe to reuse
</I>&gt;<i> the script both for &lt;script&gt; and for workers?
</I>&gt;<i>
</I>&gt;<i> / Jonas
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090319/4b352c9d/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090319/4b352c9d/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061174.html">[whatwg] Text Encoding used to decode Web Worker's script.
</A></li>
	<LI>Next message: <A HREF="061171.html">[whatwg] Text Encoding used to decode Web Worker's script.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61175">[ date ]</a>
              <a href="thread.html#61175">[ thread ]</a>
              <a href="subject.html#61175">[ subject ]</a>
              <a href="author.html#61175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
