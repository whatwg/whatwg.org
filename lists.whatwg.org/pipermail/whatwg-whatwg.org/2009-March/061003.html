<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Script loading and execution order for importScripts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20loading%20and%20execution%20order%20for%20importScripts&In-Reply-To=%3C63df84f0903070131s3af65095td5286b571d3833c7%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061002.html">
   <LINK REL="Next"  HREF="061004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Script loading and execution order for importScripts</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20loading%20and%20execution%20order%20for%20importScripts&In-Reply-To=%3C63df84f0903070131s3af65095td5286b571d3833c7%40mail.gmail.com%3E"
       TITLE="[whatwg] Script loading and execution order for importScripts">jonas at sicking.cc
       </A><BR>
    <I>Sat Mar  7 01:31:38 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061002.html">[whatwg] Script loading and execution order for importScripts
</A></li>
        <LI>Next message: <A HREF="061004.html">[whatwg] Script loading and execution order for importScripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61003">[ date ]</a>
              <a href="thread.html#61003">[ thread ]</a>
              <a href="subject.html#61003">[ subject ]</a>
              <a href="author.html#61003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Mar 7, 2009 at 1:20 AM, ben turner &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bent.mozilla at gmail.com</A>&gt; wrote:
&gt;<i> On Fri, Mar 6, 2009 at 8:40 PM, Oliver Hunt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">oliver at apple.com</A>&gt; wrote:
</I>&gt;&gt;<i> In all honesty i'm not sure which is the better approach as the spec
</I>&gt;&gt;<i> approach requires developers to manually handle the potential for partial
</I>&gt;&gt;<i> library execution, but the Mozilla approach removes the ability to load and
</I>&gt;&gt;<i> execute scripts in parallel, which may cause latency problems.
</I>&gt;<i>
</I>&gt;<i> You are half-correct :)
</I>&gt;<i>
</I>&gt;<i> Currently we load all scripts in parallel and then _compile_ each
</I>&gt;<i> script as soon as it has finished loading (which can be in any order).
</I>&gt;<i> We do not _execute_ them, however, until all loading and compilation
</I>&gt;<i> have completed successfully, and then we execute them in the order of
</I>&gt;<i> the arguments passed to importScripts.
</I>&gt;<i>
</I>&gt;<i> You're right that this is different from the behavior described in the
</I>&gt;<i> spec... I was supposed to mail this list a while ago and completely
</I>&gt;<i> forgot, many apologies. We felt that our approach was a good
</I>&gt;<i> compromise between executing only some of the scripts and executing
</I>&gt;<i> each script as soon as possible. We are certainly open to any better
</I>&gt;<i> alternatives. Do other JS engines have support for separating the
</I>&gt;<i> compilation and the execution of scripts?
</I>
What I like about what the spec does is that we can execute the first
scripts while the following scripts are still loading, which is better
for performance. It doesn't really seem adventitious to optimize for
the case when a script fails to load or parse as that is hopefully
very rare. Most likely the worker is going to have to abort everything
anyway in case a script can't be executed, so if that happens after
one or two scripts have executed doesn't really seem to be a downside.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061002.html">[whatwg] Script loading and execution order for importScripts
</A></li>
	<LI>Next message: <A HREF="061004.html">[whatwg] Script loading and execution order for importScripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61003">[ date ]</a>
              <a href="thread.html#61003">[ thread ]</a>
              <a href="subject.html#61003">[ subject ]</a>
              <a href="author.html#61003">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
