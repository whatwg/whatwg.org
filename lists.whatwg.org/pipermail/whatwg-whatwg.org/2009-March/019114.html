<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Worker feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3Cf965ae410903312157h441f443bre4dbfd17e2eac9f4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019112.html">
   <LINK REL="Next"  HREF="019092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Worker feedback</H1>
<!--htdig_noindex-->
    <B>Drew Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3Cf965ae410903312157h441f443bre4dbfd17e2eac9f4%40mail.gmail.com%3E"
       TITLE="[whatwg] Worker feedback">atwilson at google.com
       </A><BR>
    <I>Tue Mar 31 21:57:21 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019112.html">[whatwg] Worker feedback
</A></li>
        <LI>Next message: <A HREF="019092.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19114">[ date ]</a>
              <a href="thread.html#19114">[ thread ]</a>
              <a href="subject.html#19114">[ subject ]</a>
              <a href="author.html#19114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Mar 31, 2009 at 6:25 PM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt;wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We know for sure it's possible to write scripts with racy behaviour, so the
</I>&gt;<i> question is whether this ever occurs in the wild. You're claiming it does
</I>&gt;<i> not, and I'm questioning whether you really have that data.
</I>&gt;<i>
</I>
I'm not claiming it *never* occurs, because in the vasty depths of the
internet I suspect *anything* can be found. Also, my rhetorical powers
aren't up to the task of constructing a negative proof :)


&gt;<i> We don't know how much (if any) performance must be sacrificed, because
</I>&gt;<i> no-one's tried to implement parallel cookie access with serializability
</I>&gt;<i> guarantees. So I don't think we can say what the correct tradeoff is.
</I>&gt;<i>
</I>
The spec as proposed states that script that accesses cookies cannot operate
in parallel with network access on those same domains. The performance
impact of something like this is pretty clear, IMO - we don't need to
implement it and measure it to know it exists and in some situations could
be significant.


&gt;<i> You mean IE and Chrome's implementation, I presume, since Firefox and
</I>&gt;<i> Safari do not allow cookies to be modified during script execution AFAIK.
</I>

I think the old spec language captured the intent quite well -
document.cookie is a snapshot of an inherently racy state, which is the set
of cookies that would be sent with a network call at that precise instant.
Due to varying browser implementations, that state may be less racy on some
browsers than on others, but the general model was one without guarantees.

I understand the philosophy behind serializing access to shared state, and I
agree with it in general. But I think we need to make an exception in the
case of document.cookie based on current usage and expected performance
impact (since it impacts our ability to parallelize network access and
script execution).

In this case, the burden of proof has to fall on those trying to change the
spec - I think we need a compelling real-world argument why we should be
making our browsers slower. The pragmatic part of my brain suggests that
we're trying to solve a problem that exists in theory, but which doesn't
actually happen in practice.

Anyhow, at this point I think we're just going around in circles about this
- I'm not sure that either of us are going to convince the other, so I'll
shut up now and let others have the last word :)

-atw
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090331/7901fd64/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090331/7901fd64/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019112.html">[whatwg] Worker feedback
</A></li>
	<LI>Next message: <A HREF="019092.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19114">[ date ]</a>
              <a href="thread.html#19114">[ thread ]</a>
              <a href="subject.html#19114">[ subject ]</a>
              <a href="author.html#19114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
