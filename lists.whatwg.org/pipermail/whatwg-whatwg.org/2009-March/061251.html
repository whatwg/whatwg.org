<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] localStorage + worker processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20%2B%20worker%20processes&In-Reply-To=%3C5dd9e5c50903231642i1e302d78p2c802df8273495d0%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061247.html">
   <LINK REL="Next"  HREF="061218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] localStorage + worker processes</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20%2B%20worker%20processes&In-Reply-To=%3C5dd9e5c50903231642i1e302d78p2c802df8273495d0%40mail.gmail.com%3E"
       TITLE="[whatwg] localStorage + worker processes">jorlow at google.com
       </A><BR>
    <I>Mon Mar 23 16:42:56 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061247.html">[whatwg] localStorage + worker processes
</A></li>
        <LI>Next message: <A HREF="061218.html">[whatwg] localStorage + worker processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61251">[ date ]</a>
              <a href="thread.html#61251">[ thread ]</a>
              <a href="subject.html#61251">[ subject ]</a>
              <a href="author.html#61251">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>*Given that things have simmered down, it seems like it's time for a re-cap
of the options.  I believe this includes all the options currently on the
table (in broad strokes anyhow).  If I missed anything or grossly
mischaracterized any idea, feel free to correct me.*
0:  Do nothing.  As far as I can tell, no one thinks this is a valid option.
1:  Simply disallow localStorage in workers.  Possibly allow in
shared/persistent workers, but give them their own private storage area.
2:  Explicit locking.  Possibly only required for workers.  Would require
dead lock detection or for the spec to dictate locking precedence if another
lock were introduced.
3:  Expose localStorage to workers as asynchronous calls.  Most similar to
other concurrency solutions within workers.
4:  Have some yield/checkpoint/commit type call on localStorage that would
release any implicit/invisible lock.  This could also be useful in
conjunction with #3.


*My opinion:*
#1 would definitely work, but doesn't seem necessary.  #2 seems to go
against the grain of how concurrency is implemented everywhere else in the
spec.  In addition, it could open pandora's box in terms of locks being
added in elsewhere and starting to cause some messy issues there.  #3 and #4
preserve the simplicity of localStorage for the simple/common case--which is
important above else, in my opinion.



On Mon, Mar 23, 2009 at 2:48 PM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt;wrote:

&gt;<i> On Tue, Mar 24, 2009 at 10:40 AM, Jeremy Orlow &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at google.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I really like the idea of some generic yield, though I wonder if there's
</I>&gt;&gt;<i> some reason it hasn't been added earlier.  People have been using the
</I>&gt;&gt;<i> setTimeout(..., 0) trick for a while to get around slow script warnings (and
</I>&gt;&gt;<i> general unresponsiveness)...so surely something like this must have come up
</I>&gt;&gt;<i> before?  If so, what were the drawbacks?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> An obvious issue is that you can easily end up with arbitrarily deep
</I>&gt;<i> nesting and stack overflows.
</I>&gt;<i>
</I>&gt;<i> Rob
</I>&gt;<i> --
</I>&gt;<i> &quot;He was pierced for our transgressions, he was crushed for our iniquities;
</I>&gt;<i> the punishment that brought us peace was upon him, and by his wounds we are
</I>&gt;<i> healed. We all, like sheep, have gone astray, each of us has turned to his
</I>&gt;<i> own way; and the LORD has laid on him the iniquity of us all.&quot; [Isaiah
</I>&gt;<i> 53:5-6]
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090323/109764cb/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090323/109764cb/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061247.html">[whatwg] localStorage + worker processes
</A></li>
	<LI>Next message: <A HREF="061218.html">[whatwg] localStorage + worker processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61251">[ date ]</a>
              <a href="thread.html#61251">[ thread ]</a>
              <a href="subject.html#61251">[ subject ]</a>
              <a href="author.html#61251">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
