<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] navigator.yield()? (Was: localStorage + worker	processes)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20navigator.yield%28%29%3F%20%28Was%3A%20localStorage%20%2B%20worker%0A%09processes%29&In-Reply-To=%3C63df84f0903231527p5c1b7a9v196c557805dd029c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018973.html">
   <LINK REL="Next"  HREF="018977.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] navigator.yield()? (Was: localStorage + worker	processes)</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20navigator.yield%28%29%3F%20%28Was%3A%20localStorage%20%2B%20worker%0A%09processes%29&In-Reply-To=%3C63df84f0903231527p5c1b7a9v196c557805dd029c%40mail.gmail.com%3E"
       TITLE="[whatwg] navigator.yield()? (Was: localStorage + worker	processes)">jonas at sicking.cc
       </A><BR>
    <I>Mon Mar 23 15:27:41 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018973.html">[whatwg] navigator.yield()? (Was: localStorage + worker processes)
</A></li>
        <LI>Next message: <A HREF="018977.html">[whatwg] navigator.yield()? (Was: localStorage +	worker	processes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18976">[ date ]</a>
              <a href="thread.html#18976">[ thread ]</a>
              <a href="subject.html#18976">[ subject ]</a>
              <a href="author.html#18976">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Mar 23, 2009 at 2:45 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Tue, 24 Mar 2009, Robert O'Callahan wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think a better construct might be some sort of &quot;yield&quot; which
</I>&gt;&gt;<i> explicitly returns to a (nested) browser event loop and basically acts
</I>&gt;&gt;<i> as a script completion point. Even browsers that only use a single
</I>&gt;&gt;<i> thread can run the event loop there so that testing in those browsers
</I>&gt;&gt;<i> will reveal bugs.
</I>&gt;<i>
</I>&gt;<i> On Mon, 23 Mar 2009, Jeremy Orlow wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I really like the idea of some generic yield, though I wonder if there's
</I>&gt;&gt;<i> some reason it hasn't been added earlier. &#160;People have been using the
</I>&gt;&gt;<i> setTimeout(..., 0) trick for a while to get around slow script warnings
</I>&gt;&gt;<i> (and general unresponsiveness)...so surely something like this must have
</I>&gt;&gt;<i> come up before? &#160;If so, what were the drawbacks?
</I>&gt;<i>
</I>&gt;<i> The obvious problem is that a naive implementation could easily end up
</I>&gt;<i> with a stack overflow, if it didn't pop the current script off the stack
</I>&gt;<i> and use the &quot;real&quot; event loop each time.
</I>&gt;<i>
</I>&gt;<i> I would be very happy to add a &quot;navigator.yield()&quot; method that basically
</I>&gt;<i> causes the current script to be turned into a continuation and requeued on
</I>&gt;<i> the event loop. It would make a lot of scripts a lot easier. I imagine the
</I>&gt;<i> implementation burden would be pretty high though.
</I>
Indeed it would. We've had lots of issues around synchronous
XMLHttpRequest, which in firefox is implemented internally using a
yield-like construct. And it'd probably be many times worse with an
API that is specifically encouraged to be used, and thus presumably
will get used a lot. Unlike sync XMLHttpRequest which is actively
discouraged.

And that's not even touching on the stack space limitations that
you're quite likely to run in to when you have an API specifically for
nesting.

/ Jonas
</PRE>









<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018973.html">[whatwg] navigator.yield()? (Was: localStorage + worker processes)
</A></li>
	<LI>Next message: <A HREF="018977.html">[whatwg] navigator.yield()? (Was: localStorage +	worker	processes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18976">[ date ]</a>
              <a href="thread.html#18976">[ thread ]</a>
              <a href="subject.html#18976">[ subject ]</a>
              <a href="author.html#18976">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
