<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for enhancing postMessage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20enhancing%20postMessage&In-Reply-To=%3C4d2fac900903101901q7c6a1176y1cd98c2f23ad9364%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061057.html">
   <LINK REL="Next"  HREF="061062.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for enhancing postMessage</H1>
<!--htdig_noindex-->
    <B>Mark S. Miller</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20enhancing%20postMessage&In-Reply-To=%3C4d2fac900903101901q7c6a1176y1cd98c2f23ad9364%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal for enhancing postMessage">erights at google.com
       </A><BR>
    <I>Tue Mar 10 19:01:44 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061057.html">[whatwg] Proposal for enhancing postMessage
</A></li>
        <LI>Next message: <A HREF="061062.html">[whatwg] Proposal for enhancing postMessage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61058">[ date ]</a>
              <a href="thread.html#61058">[ thread ]</a>
              <a href="subject.html#61058">[ subject ]</a>
              <a href="author.html#61058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Message 2 of 2, from
&lt;<A HREF="http://lists.w3.org/Archives/Public/public-html-comments/2009Mar/0002.html">http://lists.w3.org/Archives/Public/public-html-comments/2009Mar/0002.html</A>&gt;:


To be concrete about it, I am a member of the Caja team, which is building
an object-capability subset of JavaScript by translation to JavaScript.
Currently, Caja brings object-capabilities only to intra-frame programming,
but we'd like to extend to inter-frame, inter-worker, and distributed
programming as well. Caja derives for earlier work on E, a distributed
persistent object-capability programming language based on communicating
event loops with promises. We are currently discussing this concurrency
model on the serverjs list as a proposed concurrency model for server side
JavaScript.

What Caja does for JavaScript, Joe-E does for Java. Tyler Close's ref_send
API adapts E's distribution and concurrency model, and has Joe-E and Caja
compatible implementations &lt;
<A HREF="http://waterken.sourceforge.net/javadoc/org/ref_send/package-summary.html">http://waterken.sourceforge.net/javadoc/org/ref_send/package-summary.html</A>&gt; &lt;
<A HREF="https://vsci.hpl.hp.com/-/bang/#s=6ysjn2sjvwl35p">https://vsci.hpl.hp.com/-/bang/#s=6ysjn2sjvwl35p</A>&gt;. Tyler's Waterken web
server implements ref_send for server side persistent Joe-E apps. So
ref_send currently works fine within a browser frame, between a browser
frame and a server, or between servers. For all the distributed cases, this
works by serializing data to JSON and translating capabilities (object
references) into URLs.

But a URL cannot be redeemed for an HTML5 MessagePort
or any other access to frame or worker within a browser. Were postMessage
generalized to allow a list of MessagePorts, the capability transmission
portion of ref_send would have a trivial and safe direct mapping onto
inter-frame messages. The only non-obvious part is how to map the promise
for the result of an asynchronous message. But the answer seems simple:
create another MessagePort pair to represent that promise, and send along
with the message the port to be used as the receive side of that pair. I
suspect that many other similar plans would also be enabled by this proposed
enhancement to postMessage.

Does this make sense? Does it violate some design constraints I might not
know? Is it a good idea?

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061057.html">[whatwg] Proposal for enhancing postMessage
</A></li>
	<LI>Next message: <A HREF="061062.html">[whatwg] Proposal for enhancing postMessage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61058">[ date ]</a>
              <a href="thread.html#61058">[ thread ]</a>
              <a href="subject.html#61058">[ subject ]</a>
              <a href="author.html#61058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
