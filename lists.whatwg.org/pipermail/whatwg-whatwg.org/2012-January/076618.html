<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] should we add beforeload/afterload events to the web platform?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20should%20we%20add%20beforeload/afterload%20events%20to%20the%20web%0A%20platform%3F&In-Reply-To=%3Cop.v7yutsp8idj3kv%40simon-pieterss-macbook.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="076615.html">
   <LINK REL="Next"  HREF="076619.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] should we add beforeload/afterload events to the web platform?</H1>
<!--htdig_noindex-->
    <B>Simon Pieters</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20should%20we%20add%20beforeload/afterload%20events%20to%20the%20web%0A%20platform%3F&In-Reply-To=%3Cop.v7yutsp8idj3kv%40simon-pieterss-macbook.local%3E"
       TITLE="[whatwg] should we add beforeload/afterload events to the web platform?">simonp at opera.com
       </A><BR>
    <I>Thu Jan 12 02:16:30 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="076615.html">[whatwg] should we add beforeload/afterload events to the web platform?
</A></li>
        <LI>Next message: <A HREF="076619.html">[whatwg] should we add beforeload/afterload events to the web platform?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76618">[ date ]</a>
              <a href="thread.html#76618">[ thread ]</a>
              <a href="subject.html#76618">[ subject ]</a>
              <a href="author.html#76618">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 11 Jan 2012 15:51:47 +0100, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:

&gt;<i> On 1/11/12 6:59 AM, Simon Pieters wrote:
</I>&gt;&gt;<i> <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1297">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1297</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Might not be cross-browser yet (e.g. Opera seems to run the image's
</I>&gt;&gt;<i> onload handler), but should work per spec I think. Well, the load can't
</I>&gt;&gt;<i> be prevented if it's speculatively loaded it before the script has
</I>&gt;&gt;<i> executed, but maybe that's fine for the use case.
</I>&gt;<i>
</I>&gt;<i> This also doesn't prevent rendering (which can easily start before  
</I>&gt;<i> DOMContentLoaded), doesn't prevent execution of script in the document  
</I>&gt;<i> that's being loaded, etc.
</I>
Sure it does (or at least should, and does in Firefox). Note that it  
removes the root element when the script element is executed, not at  
DOMContentLoaded. It does the transformation and puts the root element  
*back* at DOMContentLoaded. Scripts don't run when parsed into the other  
document since it is a different document than the one the HTML parser  
runs on. They don't run when the root element is put back, either, since  
they are marked as already-executed, I think.

The only way something could be rendered with the above script before it  
runs is in Opera with DSE enabled.

&gt;<i> Again, the hard part of doing a transformation on HTML is not doing the  
</I>&gt;<i> transformation; it's preventing the transformation source document from  
</I>&gt;<i> being treated &quot;as usual&quot;.
</I>
-- 
Simon Pieters
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="076615.html">[whatwg] should we add beforeload/afterload events to the web platform?
</A></li>
	<LI>Next message: <A HREF="076619.html">[whatwg] should we add beforeload/afterload events to the web platform?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76618">[ date ]</a>
              <a href="thread.html#76618">[ thread ]</a>
              <a href="subject.html#76618">[ subject ]</a>
              <a href="author.html#76618">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
