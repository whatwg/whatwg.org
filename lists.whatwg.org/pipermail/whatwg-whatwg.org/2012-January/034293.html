<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] window.location aborting the parser and subsequent	document.writes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20window.location%20aborting%20the%20parser%20and%20subsequent%0A%09document.writes&In-Reply-To=%3CCAJQvAue8ptwaQVhrRtKD3Vtzj2GH8B247NpMkoigf1%3DV02T1zA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034292.html">
   <LINK REL="Next"  HREF="034295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] window.location aborting the parser and subsequent	document.writes</H1>
<!--htdig_noindex-->
    <B>Henri Sivonen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20window.location%20aborting%20the%20parser%20and%20subsequent%0A%09document.writes&In-Reply-To=%3CCAJQvAue8ptwaQVhrRtKD3Vtzj2GH8B247NpMkoigf1%3DV02T1zA%40mail.gmail.com%3E"
       TITLE="[whatwg] window.location aborting the parser and subsequent	document.writes">hsivonen at iki.fi
       </A><BR>
    <I>Thu Jan  5 01:40:18 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="034292.html">[whatwg] the impact of &lt;select&gt;.value behavior clearing current selection prior to setting the new selection
</A></li>
        <LI>Next message: <A HREF="034295.html">[whatwg] Encodings and the web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34293">[ date ]</a>
              <a href="thread.html#34293">[ thread ]</a>
              <a href="subject.html#34293">[ subject ]</a>
              <a href="author.html#34293">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Consider <A HREF="https://bug98654.bugzilla.mozilla.org/attachment.cgi?id=77369">https://bug98654.bugzilla.mozilla.org/attachment.cgi?id=77369</A>
with the popup blocker disabled.

Chrome, Opera and IE open a new window/tab and load the Mozilla front
page into it. Firefox used to but doesn't anymore.

As far as I can tell, Firefox behaves according to the spec: Setting
window.location aborts the parser synchronously and the first
subsequent document.write() then implies a call to document.open(),
which aborts the navigation started by window.location.

Is there a mechanism in the spec that makes this work as in Chrome,
Opera and IE and I'm failing to read the spec right? If not, what's
the mechanism that causes Chrome and IE to load the Mozilla front page
into the newly-opened window/tab in this case?

Note that in this modified case
<A HREF="http://hsivonen.iki.fi/test/moz/write-after-location.html">http://hsivonen.iki.fi/test/moz/write-after-location.html</A> (requires a
click so that there's no need to adjust the popup blocker) the console
says &quot;before&quot; and &quot;after&quot; but not &quot;later&quot; in Chrome and IE.

Opera says &quot;before&quot; and &quot;after&quot; and then the opener script ends with a
security error, because write is already a different-origin call, i.e.
setting window.location has immediately made the document in the new
window different-origin.

-- 
Henri Sivonen
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hsivonen at iki.fi</A>
<A HREF="http://hsivonen.iki.fi/">http://hsivonen.iki.fi/</A>
</PRE>










<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034292.html">[whatwg] the impact of &lt;select&gt;.value behavior clearing current selection prior to setting the new selection
</A></li>
	<LI>Next message: <A HREF="034295.html">[whatwg] Encodings and the web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34293">[ date ]</a>
              <a href="thread.html#34293">[ thread ]</a>
              <a href="subject.html#34293">[ subject ]</a>
              <a href="author.html#34293">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
