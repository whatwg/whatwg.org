<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Drag and drop: bugged implementation of setting drag feedback with setDragImage?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Drag%20and%20drop%3A%20bugged%20implementation%20of%20setting%20drag%0A%20feedback%20with%20setDragImage%3F&In-Reply-To=%3CPine.LNX.4.64.1201262305040.16982%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034539.html">
   <LINK REL="Next"  HREF="034544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Drag and drop: bugged implementation of setting drag feedback with setDragImage?</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Drag%20and%20drop%3A%20bugged%20implementation%20of%20setting%20drag%0A%20feedback%20with%20setDragImage%3F&In-Reply-To=%3CPine.LNX.4.64.1201262305040.16982%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Drag and drop: bugged implementation of setting drag feedback with setDragImage?">ian at hixie.ch
       </A><BR>
    <I>Thu Jan 26 15:08:24 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="034539.html">[whatwg] Question: rel=&quot;help&quot;
</A></li>
        <LI>Next message: <A HREF="034544.html">[whatwg] HTMLLinkElement.disabled and HTMLLinkElement.sheet behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34542">[ date ]</a>
              <a href="thread.html#34542">[ thread ]</a>
              <a href="subject.html#34542">[ subject ]</a>
              <a href="author.html#34542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 29 Sep 2011, Rafa&#197;~B Mi&#197;~Becki wrote:
&gt;<i>
</I>&gt;<i> I've a question regarding setDragImage. I've implemented &quot;dragstart&quot; 
</I>&gt;<i> event handler in the following way:
</I>&gt;<i> 
</I>&gt;<i> event.setDragImage(this, 0, 0);
</I>&gt;<i> this.style.background = 'yellow';
</I>&gt;<i> 
</I>&gt;<i> What do I expect:
</I>&gt;<i> 1) Origin element to have yellow background
</I>&gt;<i> 2) Drag feedback element (the one under cursor) to have original background
</I>&gt;<i> 
</I>&gt;<i> Are my expectations correct?
</I>
Sort of. The spec doesn't say that the drag image needs to exactly match 
the element, so technically browsers are allowed to set the bitmap to 
what the element will look like at some time in the future... But yeah, in 
principle, what you describe is correct.


&gt;<i> Because Webkit and Gecko implementation doesn't match it. In their cases 
</I>&gt;<i> both elements have modified background. It seems that both engines delay 
</I>&gt;<i> setting drag image until the end of event handler.
</I>
On Fri, 30 Sep 2011, Daniel Cheng wrote:
&gt;<i>
</I>&gt;<i> The reason it works that way is inside the dragstart handler, when you 
</I>&gt;<i> call setDragImage, we merely retain a reference to the element you 
</I>&gt;<i> passed in. We don't actually create the drag image until after dragstart 
</I>&gt;<i> processing is finished.
</I>
Makes sense.

Seems more useful to support what Rafal is trying to do, though, so I 
haven't currently changed the spec for this.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>














<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034539.html">[whatwg] Question: rel=&quot;help&quot;
</A></li>
	<LI>Next message: <A HREF="034544.html">[whatwg] HTMLLinkElement.disabled and HTMLLinkElement.sheet behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34542">[ date ]</a>
              <a href="thread.html#34542">[ thread ]</a>
              <a href="subject.html#34542">[ subject ]</a>
              <a href="author.html#34542">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
