<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Session History and onpopstate coupled with iframes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Session%20History%20and%20onpopstate%20coupled%20with%20iframes&In-Reply-To=%3CPine.LNX.4.64.1201312028090.3868%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034584.html">
   <LINK REL="Next"  HREF="034586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Session History and onpopstate coupled with iframes</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Session%20History%20and%20onpopstate%20coupled%20with%20iframes&In-Reply-To=%3CPine.LNX.4.64.1201312028090.3868%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Session History and onpopstate coupled with iframes">ian at hixie.ch
       </A><BR>
    <I>Tue Jan 31 12:30:12 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="034584.html">[whatwg] Proposal: Exclude robots on a per-link basis
</A></li>
        <LI>Next message: <A HREF="034586.html">[whatwg] Supporting scrollTop and scrollLeft on the Canvas element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34585">[ date ]</a>
              <a href="thread.html#34585">[ thread ]</a>
              <a href="subject.html#34585">[ subject ]</a>
              <a href="author.html#34585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, 28 Nov 2011, Seon-Wook Park wrote:
&gt;<i> 
</I>&gt;<i> I have recently tried using HTML5's pushState() and window.onpopstate 
</I>&gt;<i> for my website. They do work and I quite like the functionalities.
</I>&gt;<i> 
</I>&gt;<i> However, recently while working on a series of webpages which 
</I>&gt;<i> incorporate iframe elements, I found that the altering of iframe 
</I>&gt;<i> locations seemed to alter history as well. When having changed the 'src' 
</I>&gt;<i> attributes of my iframes, I found that my browsing history became 
</I>&gt;<i> flooded with entries from my current page. (Used browsers: Firefox, 
</I>&gt;<i> Chrome)
</I>&gt;<i> 
</I>&gt;<i> I understand that as mentioned in 
</I>&gt;<i> <A HREF="http://dev.w3.org/html5/spec/Overview.html#history-notes,">http://dev.w3.org/html5/spec/Overview.html#history-notes,</A> iframe history 
</I>&gt;<i> is kept track of, but what puzzles me is why the default implementation, 
</I>&gt;<i> (which I realise is a work-in-progress), has been done so that one 
</I>&gt;<i> cannot alter these automatic pushState's or suppress them.
</I>&gt;<i> 
</I>&gt;<i> In fact, I have a feeling that such entries into the browsing history 
</I>&gt;<i> should not be exposed to the user by default. I realise that I am in no 
</I>&gt;<i> way experienced enough to question the decisions which have been made, 
</I>&gt;<i> but I find this default behaviour odd as it is preventing me from doing 
</I>&gt;<i> two jobs at once:
</I>&gt;<i> 1. Control basic history
</I>&gt;<i> 2. Alter iframe attributes
</I>
This simplest solution, assuming that you are only going to pages on the 
same site, is to use iframe.contentDocument.location.replace() to update 
the URL, rather than setting the src attribute.

You can also just remove the &lt;iframe&gt; altogether and insert another one.

At this point I doubt we can really change how iframes work with session 
history, there are too many sites that depend on it.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>










<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034584.html">[whatwg] Proposal: Exclude robots on a per-link basis
</A></li>
	<LI>Next message: <A HREF="034586.html">[whatwg] Supporting scrollTop and scrollLeft on the Canvas element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34585">[ date ]</a>
              <a href="thread.html#34585">[ thread ]</a>
              <a href="subject.html#34585">[ subject ]</a>
              <a href="author.html#34585">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
