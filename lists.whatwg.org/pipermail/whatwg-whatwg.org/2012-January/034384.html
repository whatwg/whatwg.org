<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Cross-document messaging setup on form submit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Cross-document%20messaging%20setup%20on%20form%20submit&In-Reply-To=%3CCALmeN0ehs1hsXvbzCwTiYP6T4cVULkaVVCeb%3DSgEG7SyMpZp9Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="076700.html">
   <LINK REL="Next"  HREF="034385.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Cross-document messaging setup on form submit</H1>
<!--htdig_noindex-->
    <B>Rich Tibbett</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Cross-document%20messaging%20setup%20on%20form%20submit&In-Reply-To=%3CCALmeN0ehs1hsXvbzCwTiYP6T4cVULkaVVCeb%3DSgEG7SyMpZp9Q%40mail.gmail.com%3E"
       TITLE="[whatwg] Cross-document messaging setup on form submit">rich.tibbett at gmail.com
       </A><BR>
    <I>Mon Jan 16 15:12:09 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="076700.html">[whatwg] Using SVG instead of Canvas for extensions
</A></li>
        <LI>Next message: <A HREF="034385.html">[whatwg] input[type=date] placeholder attribute and displayed date	format
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34384">[ date ]</a>
              <a href="thread.html#34384">[ thread ]</a>
              <a href="subject.html#34384">[ subject ]</a>
              <a href="author.html#34384">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>During some experimentation today I wanted to establish a
cross-document messaging channel for when a user submits a form with a
target of _blank (or _someframe). I couldn't find any native way to do
this when target == _blank so I had to produce my own workaround [1].

In the course of doing this I wondered if HTMLFormElement.submit()
could actually just return a WindowProxy object in the same way that
window.open() currently does [2] to grease this whole process.

If the form is blocked - i.e. Event.preventDefault has been called or
the form is running in a sandboxed iframe without 'enable-forms'
permission or some other condition has prevented actual form
submission from happening - then this method would return null. If the
form's target == '_self' then this method could return it's own
WindowProxy to itself, since the current script will simply run to
completion and then get overridden by the new page load anyway.

This change would be backward compatible with all existing web content
and shouldn't affect any existing web pages. So is this a reasonable
addition, are the security considerations manageable and is it
implementable?

br/ Rich

[1] <A HREF="http://fiddle.jshell.net/GZWYE/10/show/light/">http://fiddle.jshell.net/GZWYE/10/show/light/</A>

[2] <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#dom-open">http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#dom-open</A>
</PRE>





























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="076700.html">[whatwg] Using SVG instead of Canvas for extensions
</A></li>
	<LI>Next message: <A HREF="034385.html">[whatwg] input[type=date] placeholder attribute and displayed date	format
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34384">[ date ]</a>
              <a href="thread.html#34384">[ thread ]</a>
              <a href="subject.html#34384">[ subject ]</a>
              <a href="author.html#34384">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
