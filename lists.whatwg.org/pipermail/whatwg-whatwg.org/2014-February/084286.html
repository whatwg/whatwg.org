<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Guessing the fallback encoding from the top-level domain name before trying to guess from the browser localization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Guessing%20the%20fallback%20encoding%20from%20the%20top-level%0A%20domain%20name%20before%20trying%20to%20guess%20from%20the%20browser%20localization&In-Reply-To=%3CCANXqsRKKrTz870odLEX6g28a0fJeK4K1wK1_xS0xnBa%2BUXEzPg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042009.html">
   <LINK REL="Next"  HREF="084381.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Guessing the fallback encoding from the top-level domain name before trying to guess from the browser localization</H1>
<!--htdig_noindex-->
    <B>Henri Sivonen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Guessing%20the%20fallback%20encoding%20from%20the%20top-level%0A%20domain%20name%20before%20trying%20to%20guess%20from%20the%20browser%20localization&In-Reply-To=%3CCANXqsRKKrTz870odLEX6g28a0fJeK4K1wK1_xS0xnBa%2BUXEzPg%40mail.gmail.com%3E"
       TITLE="[whatwg] Guessing the fallback encoding from the top-level domain name before trying to guess from the browser localization">hsivonen at hsivonen.fi
       </A><BR>
    <I>Sat Feb  8 02:20:40 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="042009.html">[whatwg] Guessing the fallback encoding from the top-level domain name before trying to guess from the browser localization
</A></li>
        <LI>Next message: <A HREF="084381.html">[whatwg] Guessing the fallback encoding from the top-level domain name before trying to guess from the browser localization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84286">[ date ]</a>
              <a href="thread.html#84286">[ thread ]</a>
              <a href="subject.html#84286">[ subject ]</a>
              <a href="author.html#84286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Feb 8, 2014 at 12:37 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> The correlation should be at least as high, as far as I can tell.
</I>
Logically, yes, for most parts of the world.

&gt;<i> Or maybe a 50%/50% experiment
</I>&gt;<i> with that as the first 50% and the default coming from the TLD instead of
</I>&gt;<i> the UI locale in the second 50%, with the corresponding instrumentation,
</I>&gt;<i> to see how the results compare.
</I>
Mozilla doesn't have a proper A/B testing infrastructure yet. I expect
the A to be Firefox 29 on the release channel and B to be Firefox 30
on the release channel. So unless this gets backed out, I expect to
have data around the time of Firefox 31 going to release.

&gt;<i> Have you tried deploying this?
</I>
It is on Firefox trunk now. However,  not all country TLDs  are
participating. I figured it is better to leave unsure cases the way
they were. It doesn't make sense to put a lot of effort into
researching those before seeing if the general approach works for the
case that it was designed for, specifically Traditional Chinese. The
success metric I expect to be looking at is if the usage of the
character encoding menu in the Traditional Chinese localization of
Firefox falls to the same level as in other Firefox localizations in
general.

If this change turns out to be successful for Traditional Chinese,
then I think  it will be worthwhile to research the unobvious cases.

The TDLs listed in
<A HREF="https://mxr.mozilla.org/mozilla-central/source/dom/encoding/nonparticipatingdomains.properties">https://mxr.mozilla.org/mozilla-central/source/dom/encoding/nonparticipatingdomains.properties</A>
do not participate at present (i.e. get a browser UI
localization-based guess like before). The TLDs listed in
<A HREF="https://mxr.mozilla.org/mozilla-central/source/dom/encoding/domainsfallbacks.properties">https://mxr.mozilla.org/mozilla-central/source/dom/encoding/domainsfallbacks.properties</A>
get the fallbacks listed in that file. All other TLDs map to
windows-1252.

&gt;<i> What have you learnt so far?
</I>
It hasn't been an obvious and immediate disaster.

-- 
Henri Sivonen
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hsivonen at hsivonen.fi</A>
<A HREF="https://hsivonen.fi/">https://hsivonen.fi/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042009.html">[whatwg] Guessing the fallback encoding from the top-level domain name before trying to guess from the browser localization
</A></li>
	<LI>Next message: <A HREF="084381.html">[whatwg] Guessing the fallback encoding from the top-level domain name before trying to guess from the browser localization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84286">[ date ]</a>
              <a href="thread.html#84286">[ thread ]</a>
              <a href="subject.html#84286">[ subject ]</a>
              <a href="author.html#84286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
