<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Supporting more address levels in autocomplete
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3CCAO4XGS86%3DHNZkKspq_Q4bLn5zZ9sbHdWKapqf51TzKOaR6RCyg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084384.html">
   <LINK REL="Next"  HREF="084374.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Supporting more address levels in autocomplete</H1>
<!--htdig_noindex-->
    <B>Evan Stade</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3CCAO4XGS86%3DHNZkKspq_Q4bLn5zZ9sbHdWKapqf51TzKOaR6RCyg%40mail.gmail.com%3E"
       TITLE="[whatwg] Supporting more address levels in autocomplete">estade at chromium.org
       </A><BR>
    <I>Fri Feb 28 18:15:02 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="084384.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
        <LI>Next message: <A HREF="084374.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84385">[ date ]</a>
              <a href="thread.html#84385">[ thread ]</a>
              <a href="subject.html#84385">[ subject ]</a>
              <a href="author.html#84385">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Feb 28, 2014 at 5:47 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i> On Mon, 24 Feb 2014, Jukka K. Korpela wrote:
</I>&gt;<i> &gt; 2014-02-22 3:03, Ian Hickson wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; (Note that a lot of people in the UK have no idea how to write their
</I>&gt;<i> &gt; &gt; address according to current standards. For example, people often
</I>&gt;<i> &gt; &gt; include the county, give the &quot;real&quot; town rather than the &quot;post town&quot;,
</I>&gt;<i> &gt; &gt; put things out of order, indent each line of the address, etc.)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The phenomenon is probably not limited to the UK. Few people even know
</I>&gt;<i> &gt; the current standards (national and international).
</I>&gt;<i>
</I>&gt;<i> Well sure, but since we're writing a standard, if our assumption is that
</I>&gt;<i> people don't know standards, we're not going to reach a useful conclusion.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Some fine-grained control for naming different components of an address
</I>&gt;<i> &gt; are undoubtedly useful at times. It would be even more useful to have a
</I>&gt;<i> &gt; common, &quot;standard&quot; name for just an address. That is, whatever someone
</I>&gt;<i> &gt; wants the sender to put in an envelope. Its internal structure does not
</I>&gt;<i> &gt; matter, as long as it works, and as usual, it is up to the recipient to
</I>&gt;<i> &gt; specify the address in a manner that works.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Forms that require the user to split his address to small pieces may
</I>&gt;<i> &gt; have their reasons. But if you just want to have an address to send
</I>&gt;<i> &gt; stuff to, then all you need is a working postal address. A textarea
</I>&gt;<i> &gt; with, say, name=&quot;postal&quot;, if used on different pages, would then let the
</I>&gt;<i> &gt; user enter his entire address very simply, after just once typing it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Probably &quot;postal&quot; should be specified so that it relates to a postal
</I>&gt;<i> &gt; address that is complete for delivery except the recipient name. The
</I>&gt;<i> &gt; reason is that the name is so often asked separately
</I>&gt;<i>
</I>&gt;<i> On Mon, 24 Feb 2014, Evan Stade wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I agree with this, and plan to propose it separately from the proposal
</I>&gt;<i> &gt; currently under discussion. It might be hard to parse a working address
</I>&gt;<i> &gt; out of a free-form input, but the other direction is doable enough:
</I>&gt;<i> &gt; creating a block of text suitable to printing on an envelope given
</I>&gt;<i> &gt; tokenized values. This tackles the problem of how to format an
</I>&gt;<i> &gt; autocompleted address for a particular country and UI language (i.e. in
</I>&gt;<i> &gt; the user agent has to know how to do it, but the website doesn't).
</I>&gt;<i>
</I>&gt;<i> We can definitely add something like this. We already have a simpler
</I>&gt;<i> version of this for street addresses.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, 24 Feb 2014, Charles McCathie Nevile wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That depends on whether you want to force your customers to think like
</I>&gt;<i> &gt; the Post Office, or whether you prefer to be responsive to your
</I>&gt;<i> &gt; customers. Speaking without data, I suspect that nervousness at not
</I>&gt;<i> &gt; being able to put *what someone thinks* is their address translates
</I>&gt;<i> &gt; fairly readily into a certain amount of failure to proceed with a
</I>&gt;<i> &gt; transaction.
</I>&gt;<i>
</I>&gt;<i> I'd love to see real data on this. I can imagine scenarios that would lead
</I>&gt;<i> this to go both ways.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, 24 Feb 2014, Dan Brickley wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt; Who is using the data? Just post offices? Or taxi drivers, pizza
</I>&gt;<i> &gt; delivery bikers, pedestrians?
</I>&gt;<i>
</I>&gt;<i> The latter three are unlikely to really need much more depth at the
</I>&gt;<i> locality level.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, 24 Feb 2014, Evan Stade wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regarding UK addresses, libaddressinput[1], which is used by Google for
</I>&gt;<i> &gt; various products, currently accepts two levels of administrative region
</I>&gt;<i> &gt; for GB: city and optional county.
</I>&gt;<i>
</I>&gt;<i> You need two levels, but those aren't it. :-) Counties haven't officially
</I>&gt;<i> been used in UK addresses since the mid 90s.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; This would be the first open-ended field name. Do we really want to
</I>&gt;<i> &gt; &gt; make this open-ended? What happens if a form has n=1..3, and another
</I>&gt;<i> &gt; &gt; has n=2..4? What if one has n=1, n=2, and n=4, but not n=3?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't know why a web author would do this
</I>&gt;<i>
</I>&gt;<i> Web authors do all kinds of crazy stuff. We have to be ready for it such
</I>&gt;<i> that we never end up forced to introduce weird heuristics.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; but n=m doesn't require n=m-1 or n=m+1 to be present. n=2..4 would just
</I>&gt;<i> &gt; mean the site didn't get the n=1 value.
</I>&gt;<i>
</I>&gt;<i> My concern is that authors do something like this:
</I>&gt;<i>
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-line-1&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-2&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-3&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> ...and then the user enters their address:
</I>&gt;<i>
</I>&gt;<i>    1600 Amphitheatre Parkway
</I>&gt;<i>    Mountain View
</I>&gt;<i>    CA
</I>&gt;<i>
</I>&gt;<i> ...and then the user goes to another site:
</I>&gt;<i>
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-line-1&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-line-2&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-1&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-2&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-3&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> ...and the browser autofills:
</I>&gt;<i>
</I>&gt;<i>    1600 Amphitheatre Parkway
</I>&gt;<i>    (empty)
</I>&gt;<i>    Mountain View
</I>&gt;<i>    Mountain View
</I>&gt;<i>    CA
</I>&gt;<i>
</I>&gt;<i> ...or some such.
</I>&gt;<i>
</I>
So the user is tricked into entering wrong data? (i.e. CA for
address-level-3 instead of address-level-1) A web author could just as
easily cause the user to enter wrong data to be stored by doing:

  &lt;input type=&quot;text&quot; autocomplete=&quot;address-line-1&quot; placeholder=&quot;Zip code&quot;&gt;


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; How does a site know how many levels to offer?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It offers as many as it knows what to do with. It probably wouldn't know
</I>&gt;<i> &gt; what to do with n=5, or n=100, and it's highly unlikely a user agent
</I>&gt;<i> &gt; would return a value for those levels anyway, so practically speaking,
</I>&gt;<i> &gt; n=1 to n=3 should be sufficient for now (although n=4 seems possible in
</I>&gt;<i> &gt; the near future). But I don't see the purpose in setting a limit in the
</I>&gt;<i> &gt; spec.
</I>&gt;<i>
</I>&gt;<i> This makes me extremely uncomfortable.
</I>&gt;<i>
</I>&gt;<i> We're saying, &quot;we don't know how to do this, I hope you do&quot;. Why would we
</I>&gt;<i> be less able to answer this than Web authors? It's not like Web authors
</I>&gt;<i> are experts in postal addresses.
</I>

&gt;<i> I think we should pick the number that is actually needed, and be firm
</I>&gt;<i> that that is the number.
</I>&gt;<i>
</I>
That's not how I would interpret it. We do know how many levels we
currently support. We don't know how many levels we might support in the
future. The number depends on political forces.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; What should a Chinese user interacting with a US company put in as
</I>&gt;<i> &gt; &gt; their address, if they want something shipped to China?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; They would put in the same address regardless of the nationality of the
</I>&gt;<i> &gt; company, assuming the company is able to properly handle their address.
</I>&gt;<i>
</I>&gt;<i> Shouldn't we want everyone to be able to handle everyone's address?
</I>&gt;<i>
</I>
I think I've misunderstood your original question because I don't know how
my answer indicates someone would not be able to handle someone's address.
But to answer the new question, no: if I am only willing to ship to US
addresses, why do I need to be able to handle a Chinese address?


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Which inputs are visible to the user should depend on which country
</I>&gt;<i> &gt; they're entering. This means that if a user changes the country, the
</I>&gt;<i> &gt; inputs shuffle around and hide or show.
</I>&gt;<i>
</I>&gt;<i> Are we really expecting many sites to do this? I've only seen the most
</I>&gt;<i> advanced sites do this.
</I>&gt;<i>
</I>
Nope, I wouldn't expect many sites to roll their own solution for this,
which is also why most sites are completely broken at accepting
international addresses. But requestAutocomplete offers a much easier way
to support international addresses well: all the UX concerns you're raising
are handled by the browser, which is an advanced piece of software.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; So they would be synonyms? Or separate fields?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; They are pseudo-synonyms.
</I>&gt;<i>
</I>&gt;<i> I don't know what that means.
</I>

&gt;<i>
</I>&gt;<i> &gt; In the US, &quot;region&quot; aligns with &quot;address-level-1&quot;, and either one would
</I>&gt;<i> &gt; return the same value. In the UAE, where there are cities but no higher
</I>&gt;<i> &gt; level administrative region, &quot;locality&quot; aligns with &quot;address-level-1&quot;.
</I>&gt;<i> &gt; In China, &quot;address-level-1&quot; is a province a province-level city such as
</I>&gt;<i> &gt; Beijing. Beijing is also &quot;region&quot;, confusingly, and a district of the
</I>&gt;<i> &gt; city is a &quot;locality&quot;.
</I>&gt;<i>
</I>&gt;<i> If we're going to do this, we need to have a mapping for every locality
</I>&gt;<i> defined in the spec. This seems like a losing proposition.
</I>&gt;<i>
</I>
Does the spec define localities? I wasn't aware there was any definition
for the data values, only data types.


&gt;<i>
</I>&gt;<i> Why not make them straight synonyms?
</I>

It seems counter-intuitive to have &quot;address-level-2&quot; but not
&quot;address-level-1&quot; for a country, which would be the case for the UAE (for
example) if we went with exact synonyms.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; So generally speaking, if I ship to both China and the US, I would
</I>&gt;<i> &gt; create a form with &quot;address-level-[1..4]&quot; and if the user starts to
</I>&gt;<i> &gt; enter a US address, only show the first 2 levels. If the user starts to
</I>&gt;<i> &gt; enter a Chinese address, show more levels. If using requestAutocomplete,
</I>&gt;<i> &gt; all the inputs are hidden all the time anyway.
</I>&gt;<i>
</I>&gt;<i> Are we going to have a list in the spec giving how many levels should be
</I>&gt;<i> given for each country?
</I>&gt;<i>
</I>
No. That is up to the site's ability to handle the data. For example, if
I'm soliciting *just* US addresses, I wouldn't know what to do with
address-level-3, hence I won't ask for it.


&gt;<i>
</I>&gt;<i> Note that the &quot;country&quot; field is often near the end of the form. How do
</I>&gt;<i> you know which country the user is entering an address for when all the
</I>&gt;<i> user's entered is three lines of text?
</I>&gt;<i>
</I>
Typically the user has to change the country input (or select) before they
can enter an address for that country. But now we're treading into the
realm of site-specific UX decisions.


&gt;<i>
</I>&gt;<i> (Most Web developers don't have access to a reverse geocoder that can
</I>&gt;<i> guess the answer from the first line.)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, 25 Feb 2014, J&#252;rg Lehni wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think it is dangerous to make any kind of assumption about valid
</I>&gt;<i> &gt; postal addresses.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Here's a great list of all kinds of exceptions to rules that programmers
</I>&gt;<i> &gt; tend to believe to be true:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (Don't we love rules?)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> <A HREF="http://www.mjt.me.uk/posts/falsehoods-programmers-believe-about-addresses/">http://www.mjt.me.uk/posts/falsehoods-programmers-believe-about-addresses/</A>
</I>&gt;<i>
</I>&gt;<i> I didn't see any there that were contradicted by the assumptions in the
</I>&gt;<i> HTML spec; did you have any particular ones in mind?
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084384.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
	<LI>Next message: <A HREF="084374.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84385">[ date ]</a>
              <a href="thread.html#84385">[ thread ]</a>
              <a href="subject.html#84385">[ subject ]</a>
              <a href="author.html#84385">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
