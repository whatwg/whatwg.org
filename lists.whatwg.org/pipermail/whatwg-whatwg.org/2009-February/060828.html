<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Small ddition to 7.4.2.1, postMessage's security considerations for authors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Small%20ddition%20to%207.4.2.1%2C%0A%20postMessage%27s%20security%20considerations%20for%20authors&In-Reply-To=%3C49969385.6070803%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="060846.html">
   <LINK REL="Next"  HREF="060838.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Small ddition to 7.4.2.1, postMessage's security considerations for authors</H1>
<!--htdig_noindex-->
    <B>Jeff Walden</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Small%20ddition%20to%207.4.2.1%2C%0A%20postMessage%27s%20security%20considerations%20for%20authors&In-Reply-To=%3C49969385.6070803%40mit.edu%3E"
       TITLE="[whatwg] Small ddition to 7.4.2.1, postMessage's security considerations for authors">jwalden+whatwg at MIT.EDU
       </A><BR>
    <I>Sat Feb 14 01:48:53 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="060846.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
        <LI>Next message: <A HREF="060838.html">[whatwg] strong and em difference not clear
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60828">[ date ]</a>
              <a href="thread.html#60828">[ thread ]</a>
              <a href="subject.html#60828">[ subject ]</a>
              <a href="author.html#60828">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>The spec should mention that even after MessageEvent.origin's value has been checked, MessageEvent.data should also be checked for structural correctness, because if the target window contains an XSS hole, improper validation of incoming messages could result in the target window's XSS hole being propagated into the sender's window as well.

For example, consider a site A which requests a particular string of JSON data from site B, which it then parses into an object using eval().  If site B is subvertible, the response JSON string may instead be arbitrary script which would be executed by site A *as* site A's code.  Proper validation by site A would mean checking that the sent string actually is JSON and not arbitrary syntactically-correct JavaScript.

(Ignore the fact that the site shouldn't be unserializing JSON data using eval(), and further ignore that structured data-passing makes this particular use obsolescent.  Other instances of contamination may be possible depending on the sent data and its structure, and this was just the simplest example to explain.)

Jeff

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="060846.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
	<LI>Next message: <A HREF="060838.html">[whatwg] strong and em difference not clear
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60828">[ date ]</a>
              <a href="thread.html#60828">[ thread ]</a>
              <a href="subject.html#60828">[ subject ]</a>
              <a href="author.html#60828">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
