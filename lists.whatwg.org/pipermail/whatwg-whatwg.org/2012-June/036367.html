<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Navigation triggered from unload
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Navigation%20triggered%20from%20unload&In-Reply-To=%3C4FD71A31.9040407%40opera.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078659.html">
   <LINK REL="Next"  HREF="078646.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Navigation triggered from unload</H1>
<!--htdig_noindex-->
    <B>James Graham</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Navigation%20triggered%20from%20unload&In-Reply-To=%3C4FD71A31.9040407%40opera.com%3E"
       TITLE="[whatwg] Navigation triggered from unload">jgraham at opera.com
       </A><BR>
    <I>Tue Jun 12 03:30:09 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="078659.html">[whatwg] [html5] r7128 - [giow] (2) Try to define img synchronous loading. Affected topics: HTML
</A></li>
        <LI>Next message: <A HREF="078646.html">[whatwg] Navigation triggered from unload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36367">[ date ]</a>
              <a href="thread.html#36367">[ thread ]</a>
              <a href="subject.html#36367">[ subject ]</a>
              <a href="author.html#36367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>What is the expected behaviour of navigation triggered from unload 
handlers? In particular, what stops such navigations from re-triggering 
the unload handler, and thus starting yet another navigation?

It looks like the spec tries to make a distinction between navigations 
that are cross-origin and those that are not (step 4 in the &quot;navigating 
across documents&quot; algorithm); I'm not sure why this inconsistency is 
desirable rather than using the cross-origin approach always.

Based on some tests ([1]-[5]), it seems that WebKit seems to cancel the 
navigation in the unload handler always, Opera seems to always carry out 
the navigation in the unload handler, and Gecko seems to follow WebKit 
in the cross-origin case and Opera in the same-origin case. In all cases 
the unload handler is only called once.

[1] <A HREF="http://hoppipolla.co.uk/tests/navigation/003.html">http://hoppipolla.co.uk/tests/navigation/003.html</A>
[2] <A HREF="http://hoppipolla.co.uk/tests/navigation/004.html">http://hoppipolla.co.uk/tests/navigation/004.html</A>
[3] <A HREF="http://hoppipolla.co.uk/tests/navigation/005.html">http://hoppipolla.co.uk/tests/navigation/005.html</A>
[4] <A HREF="http://hoppipolla.co.uk/tests/navigation/006.html">http://hoppipolla.co.uk/tests/navigation/006.html</A>
[5] <A HREF="http://hoppipolla.co.uk/tests/navigation/007.html">http://hoppipolla.co.uk/tests/navigation/007.html</A>
</PRE>











































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078659.html">[whatwg] [html5] r7128 - [giow] (2) Try to define img synchronous loading. Affected topics: HTML
</A></li>
	<LI>Next message: <A HREF="078646.html">[whatwg] Navigation triggered from unload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36367">[ date ]</a>
              <a href="thread.html#36367">[ thread ]</a>
              <a href="subject.html#36367">[ subject ]</a>
              <a href="author.html#36367">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
