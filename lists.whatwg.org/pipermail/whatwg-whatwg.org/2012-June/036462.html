<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for public data in drag events
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20public%20data%20in%20drag%20events&In-Reply-To=%3C5894853D-5747-486A-951B-FD1A3DE1111E%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078741.html">
   <LINK REL="Next"  HREF="036469.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for public data in drag events</H1>
<!--htdig_noindex-->
    <B>Trevor Burnham</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20public%20data%20in%20drag%20events&In-Reply-To=%3C5894853D-5747-486A-951B-FD1A3DE1111E%40gmail.com%3E"
       TITLE="[whatwg] Proposal for public data in drag events">trevorburnham at gmail.com
       </A><BR>
    <I>Thu Jun 21 10:01:07 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="078741.html">[whatwg] Canvas roundedRect
</A></li>
        <LI>Next message: <A HREF="036469.html">[whatwg] The so-called 'magic iframe' feature
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36462">[ date ]</a>
              <a href="thread.html#36462">[ thread ]</a>
              <a href="subject.html#36462">[ subject ]</a>
              <a href="author.html#36462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I've been using HTML drag-and-drop (<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html">http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html</A>) in a project, but I've run into one limitation that seems severe to me: There is no direct way to determine what the source node is from a dragenter, dragover, or dragleave event. This makes it difficult to support use cases where elements react to those events differently depending on what is being dragged over them.

I understand that the reason for this is cross-document drags: In addition to security implications, obtaining a reference to a DOM node in another document simply wouldn't make sense. Therefore, the dataTransfer object only allows serialized data. Unfortunately, dataTransfer is only appropriate for carrying data to the drop target. There is no mechanism for providing data to intermediate drag event receivers, except for the &quot;types&quot; attributes on the dataTransfer object. &quot;types&quot; can be used to carry data that you want to make public (<A HREF="http://stackoverflow.com/a/11089592/66226">http://stackoverflow.com/a/11089592/66226</A>), but this is clearly a hack and it carries some limitations. Most notably, the spec requires that data type strings be converted to ASCII lowercase.

Therefore, I'd like to propose the addition of a &quot;publicData&quot; object on all drag events. It would have the same interface and behavior as the dataTransfer object, with the sole exception that it would be read-only in all events where dataTransfer is protected. That is, publicData would be read/write in dragStart, and read-only in all other drag-and-drop events.

Thoughts?

Cheers,
Trevor Burnham

</PRE>












<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078741.html">[whatwg] Canvas roundedRect
</A></li>
	<LI>Next message: <A HREF="036469.html">[whatwg] The so-called 'magic iframe' feature
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36462">[ date ]</a>
              <a href="thread.html#36462">[ thread ]</a>
              <a href="subject.html#36462">[ subject ]</a>
              <a href="author.html#36462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
