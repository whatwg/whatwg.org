<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] sandboxed documents and cookies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20sandboxed%20documents%20and%20cookies&In-Reply-To=%3C830246837.10216842.1339800368296.JavaMail.root%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036418.html">
   <LINK REL="Next"  HREF="078693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] sandboxed documents and cookies</H1>
<!--htdig_noindex-->
    <B>Ian Melven</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20sandboxed%20documents%20and%20cookies&In-Reply-To=%3C830246837.10216842.1339800368296.JavaMail.root%40mozilla.com%3E"
       TITLE="[whatwg] sandboxed documents and cookies">imelven at mozilla.com
       </A><BR>
    <I>Fri Jun 15 15:46:08 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="036418.html">[whatwg] Firing canplaythrough when caches/buffers are full
</A></li>
        <LI>Next message: <A HREF="078693.html">[whatwg] sandboxed documents and cookies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36419">[ date ]</a>
              <a href="thread.html#36419">[ thread ]</a>
              <a href="subject.html#36419">[ subject ]</a>
              <a href="author.html#36419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
Hi,

in <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=341604#c180,">https://bugzilla.mozilla.org/show_bug.cgi?id=341604#c180,</A> David-Sarah Hopwood
makes a few points about cookies in sandboxed documents :

&quot;Ugh, that's mandating an information leak about whether the document has cookies. Maybe a minor leak,
but I don't understand why it should exist: if allow-same-origin is not set, then the clear intent is 
that no information about cookies should be available.&quot;

&quot;Oh, and another reason not to do it that way is that it's a testing hazard for web developers. They test when there are no cookies, it works, then the parent document adds cookies (which has no reason to make any difference), and it breaks because the code in the sandboxed document didn't expect the exception.&quot;

The spec (<A HREF="http://dev.w3.org/html5/spec/dom.html#sandboxCookies">http://dev.w3.org/html5/spec/dom.html#sandboxCookies</A>) says : &quot;On
getting, if the document is a cookie-free Document object, then the user
agent must return the empty string. Otherwise, if the Document's origin is
not a scheme/host/port tuple, the user agent must throw a SecurityError
exception.&quot; 

IE 10, Chrome and the patches I am working on for Firefox all throw a SecurityError
even if no cookies are set - i agree that this seems like the correct behaviour.

thanks,
ian



</PRE>























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036418.html">[whatwg] Firing canplaythrough when caches/buffers are full
</A></li>
	<LI>Next message: <A HREF="078693.html">[whatwg] sandboxed documents and cookies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36419">[ date ]</a>
              <a href="thread.html#36419">[ thread ]</a>
              <a href="subject.html#36419">[ subject ]</a>
              <a href="author.html#36419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
