<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] media attribute of &lt;source&gt; element, default behavior on getting the property.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20media%20attribute%20of%20%3Csource%3E%20element%2C%0A%20default%20behavior%20on%20getting%20the%20property.&In-Reply-To=%3CPine.LNX.4.64.1206292126020.30734%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078812.html">
   <LINK REL="Next"  HREF="036527.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] media attribute of &lt;source&gt; element, default behavior on getting the property.</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20media%20attribute%20of%20%3Csource%3E%20element%2C%0A%20default%20behavior%20on%20getting%20the%20property.&In-Reply-To=%3CPine.LNX.4.64.1206292126020.30734%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] media attribute of &lt;source&gt; element, default behavior on getting the property.">ian at hixie.ch
       </A><BR>
    <I>Fri Jun 29 14:35:26 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="078812.html">[whatwg] HTMLForms: Implicit Submission with {display:none}	button
</A></li>
        <LI>Next message: <A HREF="036527.html">[whatwg] &lt;source&gt; media attribute behavior, static or dynamic ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36526">[ date ]</a>
              <a href="thread.html#36526">[ thread ]</a>
              <a href="subject.html#36526">[ subject ]</a>
              <a href="author.html#36526">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 8 May 2012, Paul Adenot wrote:
&gt;<i>
</I>&gt;<i> Currently implementing the &quot;media&quot; attribute for the &lt;source&gt; element in 
</I>&gt;<i> Gecko, we are not sure on how to interpret the spec when the attribute 
</I>&gt;<i> is not set in the HTML source.
</I>&gt;<i> 
</I>&gt;<i> Considering this snipped of code :
</I>&gt;<i> 
</I>&gt;<i> &lt;video&gt;
</I>&gt;<i>   &lt;source id=&quot;asource&quot; src=&quot;media.webm&quot;&gt;
</I>&gt;<i> &lt;/video&gt;
</I>&gt;<i> 
</I>&gt;<i> What should document.getElementById(&quot;asource&quot;).media [1] be ?
</I>&gt;<i> 
</I>&gt;<i> The spec [2] currently says :
</I>&gt;<i> 
</I>&gt;<i> &gt; The default, if the media attribute is omitted, is &quot;all&quot;, meaning that 
</I>&gt;<i> &gt; by default the media resource is suitable for all media.
</I>&gt;<i> 
</I>&gt;<i> At that point, we understand that if no media attribute is specified, 
</I>&gt;<i> the expression [1] should return &quot;all&quot;.
</I>
No, that sentence doesn't say anything except that &quot;the default&quot; (a 
constant value used elsewhere in the spec) is the value &quot;all&quot;.

Specifically, this part of the sentence is a definition:

# The default, if the media attribute is omitted, is &quot;all&quot;

...and this part of the sentence is a non-normative statement of fact:

# meaning that by default the media resource is suitable for all media.

The constant part is never used in the specification, so it actually has 
no effect on implementations whatsoever. It is, effectively, also a 
statement of fact. (It it describing what happens in step 6 of the second 
set of steps of step 7 of the &quot; resource selection algorithm&quot;, which says: 
&quot;If candidate has a media attribute whose value does not match the 
environment [...]&quot;, where the absence of the media attribute thus causes 
the step to be ignored -- meaning it behaves as if it was &quot;all&quot;.)

I've tried to make this clearer.


&gt;<i> Then spec then says :
</I>&gt;<i> 
</I>&gt;<i> &gt; The IDL attributes src, type, and media must reflect the respective ? 
</I>&gt;<i> &gt; content attributes of the same name.
</I>&gt;<i> 
</I>&gt;<i> At this point, we understand that [1] should return an empty string, but the
</I>&gt;<i> &lt;source&gt; is matched as if media was &quot;all&quot;.
</I>&gt;<i> 
</I>&gt;<i> The part of the spec about reflection [3] states :
</I>&gt;<i> 
</I>&gt;<i> &gt; If a reflecting IDL attribute is a DOMString attribute but doesn't
</I>&gt;<i> &gt; fall into any of the above categories, then the getting and setting
</I>&gt;<i> &gt; must be done in a transparent, case-preserving manner.
</I>&gt;<i> 
</I>&gt;<i> which means that [1] should return an empty string.
</I>
Correct.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>










<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078812.html">[whatwg] HTMLForms: Implicit Submission with {display:none}	button
</A></li>
	<LI>Next message: <A HREF="036527.html">[whatwg] &lt;source&gt; media attribute behavior, static or dynamic ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36526">[ date ]</a>
              <a href="thread.html#36526">[ thread ]</a>
              <a href="subject.html#36526">[ subject ]</a>
              <a href="author.html#36526">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
