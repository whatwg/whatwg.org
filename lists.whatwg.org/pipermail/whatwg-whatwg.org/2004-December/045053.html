<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Suggestions and questions for Web Forms 2.0,	2004-12-26 working draft
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Suggestions%20and%20questions%20for%20Web%20Forms%202.0%2C%0A%092004-12-26%20working%20draft&In-Reply-To=%3C0DD6662D-5B97-11D9-9AB6-000A95AD3972%40myrealbox.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044935.html">
   <LINK REL="Next"  HREF="044932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Suggestions and questions for Web Forms 2.0,	2004-12-26 working draft</H1>
<!--htdig_noindex-->
    <B>Matthew Thomas</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Suggestions%20and%20questions%20for%20Web%20Forms%202.0%2C%0A%092004-12-26%20working%20draft&In-Reply-To=%3C0DD6662D-5B97-11D9-9AB6-000A95AD3972%40myrealbox.com%3E"
       TITLE="[whatwg] Suggestions and questions for Web Forms 2.0,	2004-12-26 working draft">mpt at myrealbox.com
       </A><BR>
    <I>Fri Dec 31 17:47:11 PST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="044935.html">[whatwg] WHAT calls for final comments on Web Forms 2.0 proposal
</A></li>
        <LI>Next message: <A HREF="044932.html">[whatwg] Templates not only for WebForms?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45053">[ date ]</a>
              <a href="thread.html#45053">[ thread ]</a>
              <a href="subject.html#45053">[ subject ]</a>
              <a href="author.html#45053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 10 Dec, 2004, at 10:14 PM, Ian Hickson wrote:
&gt;<i>
</I>&gt;<i> Comments on the second stable draft of the Web Forms 2.0 specification  
</I>&gt;<i> are encouraged.
</I>&gt;<i> ...
</I>
These suggestions and questions are based on the 26 December 2004  
working draft, rather than on the call for comments. Many of the  
suggestions are editorial; in those I have tried to confine myself to  
howlers and confusing language, rather than commenting on every  
redundant phrase (e.g. &quot;the context of the&quot;).

For easy reference, the non-editorial items are these:
7.  Is &lt;option&gt; a &quot;form control&quot;?
8.  Recommendation against noticably empty form controls
9.  Nested &lt;form&gt;s, and &lt;form&gt;s in &lt;head&gt;, in HTML
10. &lt;div&gt; ancestor not allowing &lt;form&gt;'s children to be inline
13. Submitting a form as if there was an enabled default button
14. Support of accesskey= for &lt;select&gt;
26. autofocus= and platform variability of focusability
32. max=&quot;any&quot;
40. Placement of newly-created repetition blocks
42. &quot;move&quot; instead of &quot;move-up&quot; and &quot;move-down&quot; (includes algorithm for
     drag-and-drop of repetition blocks)
43. Optionally ignoring &quot;add&quot; and &quot;remove&quot; button contents
48. Filenames submitted for devices without filesystems
49. Dataloss of &quot;+&quot; vs. &quot; &quot; in form submission
51. stepUp() and stepDown() where step=&quot;any&quot;
53. Use of term &quot;deprecated&quot;
55. JavaScript reference URI

&gt;<i> ...
</I>&gt;<i> Previous versions:
</I>&gt;<i>      
</I>&gt;<i> <A HREF="http://www.whatwg.org/specs/web-forms/2004-12-10-call-for-comments/">http://www.whatwg.org/specs/web-forms/2004-12-10-call-for-comments/</A>   
</I>&gt;<i> (diffs)
</I>
1.   
&lt;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/diff-2004-12-10-">http://www.whatwg.org/specs/web-forms/current-work/diff-2004-12-10-</A> 
call-for-comments&gt; is an empty document.

&gt;<i> ...
</I>&gt;<i> 1. Introduction
</I>&gt;<i> ...
</I>&gt;<i> Authors have long requested enhancements to HTML4 to support some of   
</I>&gt;<i> their more common needs. Such comments in mailing lists and other  
</I>&gt;<i> forums were examined, and from these sources a set of requirements and  
</I>&gt;<i> design goals were derived:
</I>
2.  The misleading Slashdot post of yore lingers as HTML comments in the
     spec for no apparent reason. And now that it is no longer in the
     visible text, the final sentence refers to &quot;such comments&quot; not
     previously introduced.
     *   &quot;such comments&quot; --&gt; &quot;such requests&quot;

&gt;<i> ...
</I>&gt;<i> *   Dynamic addition of more fields (repeating structures) on the
</I>&gt;<i>     client side without scripting.
</I>
3.  Grating redundancy.
     *   &quot;addition of more&quot; --&gt; &quot;addition of&quot;

&gt;<i> ...
</I>&gt;<i> *   Few dependencies: this specification should stand alone and not
</I>&gt;<i>     require support for other technologies such as XPath, XMLSchema, or
</I>&gt;<i>     XML Events, as these are not implemented in typical Web browsers
</I>&gt;<i>     and requiring them would significantly delay the time required to
</I>&gt;<i>     deploy browsers supporting this specification.
</I>
4.  You can delay an event, but you can't delay a time.
     *   &quot;delay the time required to deploy&quot; --&gt; &quot;delay the release of&quot;

&gt;<i> ...
</I>&gt;<i> Relationship to HTML
</I>&gt;<i> ...
</I>&gt;<i> Relationship to XHTML
</I>&gt;<i> ...
</I>&gt;<i> Relationship to XForms
</I>&gt;<i> ...
</I>&gt;<i> Relationship to XForms Basic
</I>
5.   &quot;relationship&quot;, &quot;relationship0&quot;, relationship1&quot;, and
      &quot;relationship2&quot; are poor IDs for these headings. If a Web Forms
      2.1, 2.2, etc reorders, adds to, or removes some of these sections,
      either the numbers will become out of order, or links to the other
      sections from elsewhere on the Web will break.

&gt;<i> ...
</I>&gt;<i> 1.7. Conformance requirements
</I>&gt;<i> ...
</I>&gt;<i> Diagrams, examples, notes, and sections marked as non-normative are   
</I>&gt;<i> non-normative. All other content in this specification is normative.
</I>
6.  This could easily be misinterpreted distributively (diagrams marked
     as non-normative + examples marked as non-normative + notes marked
     as non-normative + sections marked as non-normative).
     *   &quot;As well as those sections marked as non-normative, all
         diagrams, examples, and notes in this specification are
         non-normative. Everything else in the specification is
         normative.&quot;

&gt;<i> ...
</I>&gt;<i> 1.8. Terminology
</I>&gt;<i> ...
</I>&gt;<i> The term *form control* refers to input, output, select, textarea and  
</I>&gt;<i> button elements. It does not include form, label, datalist or fieldset  
</I>&gt;<i>  elements.
</I>
7.  &lt;option&gt; probably should be included in one of these lists.

&gt;<i> ...
</I>&gt;<i> 2.3. Changes to existing controls
</I>&gt;<i> ...
</I>&gt;<i> Specifically, the form, legend, select, and optgroup elements may now  
</I>&gt;<i> be empty.
</I>
8.  *   &quot;However, with the exception of the form element, authors should
         avoid allowing any of these elements to be both empty and
         visible for any noticable period, as it is likely to confuse
         users.&quot;

&gt;<i> Also, as controls no longer need to be contained within their form  
</I>&gt;<i> element to be associated with it, authors may prefer to declare their  
</I>&gt;<i> forms in advance, at the top of their documents. The form element is  
</I>&gt;<i> therefore allowed in the head element of XHTML documents, although  
</I>&gt;<i> only when the form element is empty. (This does not apply to HTML.)
</I>&gt;<i>
</I>&gt;<i> Similarly, form elements in XHTML may now be nested (this does not  
</I>&gt;<i> apply to HTML).
</I>
9.  Why don't these apply to HTML? The explanation of the former is
     buried waaaay down in a parenthesis in section 2.18. There doesn't
     seem to be an explanation of the latter at all. It would be nice if
     these were explained more promptly.

&gt;<i> ...
</I>&gt;<i> The children of a form element must be block-level elements, unless  
</I>&gt;<i> one of the ancestors of the form element is a td, th, li, dd, or  
</I>&gt;<i> block-level element other than div, in which case either block-level  
</I>&gt;<i> or inline-level content is allowed (but not both).
</I>
10. Why the exception of &lt;div&gt;?

&gt;<i> ...
</I>&gt;<i> Authors are recommended to always have one radio button selected.  
</I>&gt;<i> Having no radio buttons selected, or more than one in a group  
</I>&gt;<i> selected, is considered very poor UI.
</I>
11. Why mention &quot;or more than one in a group selected&quot;? UAs don't even
     allow that (at least, not in standard HTML), so there's no point
     raising the possibility. In any case, these sentences belong at the
     end of the previous paragraph.

&gt;<i> ...
</I>&gt;<i> The first submit button in a form is the form's default button.
</I>&gt;<i> ...
</I>&gt;<i> If there is no default button, then the implicit submission mechanism  
</I>&gt;<i> must submit the form as if there was an enabled default button.
</I>
12. It would be more of a logical counterpart to the first sentence to
     say &quot;If there is no submit button&quot;.

13. To submit a GET form &quot;as if there was an enabled default button&quot;,
     the UA needs to include the value of the button in the submission
     URI. But how is the UA to know the value of a button that doesn't
     exist?

&gt;<i> ...
</I>&gt;<i> 2.5. Extensions to existing  attributes
</I>&gt;<i> ...
</I>&gt;<i>     UAs must now support the accesskey attribute on select elements.
</I>
14. First, this renders the Web Applications 1.0 draft text &quot;Support for
     the accesskey attribute is optional&quot; substantially irrelevant -- the
     only way of implementing both Web Forms 2.0 and Web Applications 1.0
     would be to support the accesskey attribute, making it not optional.
     Second, this removes the ability of a UA implementor to implement
     type-ahead find as a more reliable (since some authors will specify
     accesskeys and some won't) and quicker (especially if the number of
     items in the menu is large) way of selecting an item with the
     keyboard. And third, this inhibits UAs from following platform
     interface conventions; for example, while some Mac OS programs use
     accesskeys for buttons, checkboxes, and radiobuttons, doing so for
     menus is very non-standard behavior (I think I have only seen one
     program ever do so).

&gt;<i>     The accesskey attribute on label elements must act the same way as
</I>&gt;<i>     they would have if specified on the associated element directly.
</I>
15. *   &quot;they would have&quot; --&gt; &quot;it would&quot;

&gt;<i> disabled
</I>&gt;<i>
</I>&gt;<i>     The disabled attribute applies to all form controls except the
</I>&gt;<i>     output element, as well as the fieldset element.
</I>
16. This could be interpreted as meaning that the disabled atribute
     applies to &lt;fieldset&gt;, *or* that the disabled attribute does not
     apply to &lt;fieldset&gt;.
     *   &quot;as well as&quot; --&gt; &quot;and also to&quot;

&gt;<i> ...
</I>&gt;<i> maxlength
</I>&gt;<i> ...
</I>&gt;<i>     Authors are encouraged to only use maxlength on uri and email
</I>&gt;<i>     fields if the server side processor actually has a limit on the
</I>&gt;<i>     size of data fields it can usefully process.
</I>
17. &quot;Only use maxlength&quot; implies &quot;use maxlength and no other
     attributes&quot;, which is not what you mean.
     *   &quot;only use maxlength on uri and email fields if&quot; --&gt;
         &quot;use maxlength on uri and email fields only if&quot;

&gt;<i> ...
</I>&gt;<i>     The ERROR_TOO_LONG code is used when this attribute is specified on
</I>&gt;<i>     a text, password, uri, email or textarea control and the control
</I>&gt;<i>     has more than the specified number of characters, or when it is
</I>&gt;<i>     specifies on a file control and at least one of the selected files
</I>&gt;<i>     is longer than the specified number of bytes.
</I>
18. *   &quot;specifies&quot; --&gt; &quot;specified&quot;

&gt;<i> ...
</I>&gt;<i> readonly
</I>&gt;<i> ...
</I>&gt;<i>     Specifically, it does not apply to radio buttons, check boxes, file
</I>&gt;<i>     upload fields, range controls, select elements, or any of the
</I>&gt;<i>     button types; the interface concept of &quot;readonly&quot; values does not
</I>&gt;<i>     apply to button-like interfaces.
</I>
19. &quot;Checkbox&quot;/&quot;checkboxes&quot; and &quot;check box&quot;/&quot;check boxes&quot; are used
     seemingly at random throughout the spec (sometimes both in the same
     sentence). Pick one spelling and stick to it. (I don't remember
     seeing &quot;check box&quot; previously, but maybe I hang out with the wrong
     people.)

&gt;<i> ...
</I>&gt;<i> 2.6. The pattern attribute
</I>&gt;<i> ...
</I>&gt;<i> For example, the following snippet:
</I>&gt;<i>     &lt;label&gt; Part number:
</I>&gt;<i>      &lt;input pattern=&quot;[0-9][A-Z]{3}&quot; name=&quot;part&quot;
</I>&gt;<i>             title=&quot;The expected format is: a digit followed by three
</I>&gt;<i>             uppercase letters.&quot;/&gt;
</I>&gt;<i>     &lt;/label&gt;
</I>&gt;<i>
</I>&gt;<i> ...could cause the UA to display an alert such as:
</I>&gt;<i>
</I>&gt;<i>     The expected format is: a digit followed by three uppercase
</I>&gt;<i>     letters.
</I>
20. I dread the thought of any author reading the spec (or reading a
     tutorial written by someone who has read the spec, etc) and thinking
     that &quot;The expected format is:&quot; should be standard text for their
     title=s!
     *   &quot;The expected format is:&quot; --&gt; &quot;A part number is&quot;

21. It should be clarified that UAs may still show the title= in
     non-error situations (for example, as a tooltip when hovering over
     the control), so a title= should not be worded as if an error has
     necessarily occurred.

&gt;<i> 2.8. The form attribute
</I>&gt;<i> ...
</I>&gt;<i> The form attribute gives a space-separated list of IDs of form  
</I>&gt;<i> elements that the form control is to be associated with, and overrides  
</I>&gt;<i> the relationship between the form control and any ancestor form  
</I>&gt;<i> element.
</I>&gt;<i>
</I>&gt;<i> Any of the IDs in the space separated list that do not identify an   
</I>&gt;<i> element in the document, or that identify an element that is not an  
</I>&gt;<i> HTML form element, must be ignored.
</I>
22. Pick &quot;space-separated&quot; or &quot;space separated&quot;, and stick to it. (I
     find the former less ambiguous.)

&gt;<i> ...
</I>&gt;<i> 2.8. The form attribute
</I>&gt;<i> ...
</I>&gt;<i> In other words, form controls must be associated with the forms given  
</I>&gt;<i> in their form attribute, or, if they don't have one, must be  
</I>&gt;<i> associated with the nearest ancestor form element or the forms given  
</I>&gt;<i> in the form attribute of the nearest fieldset element with a form,  
</I>&gt;<i> whichever is the nearest. If none of those apply, the form control is  
</I>&gt;<i> not associated with any form.
</I>
23. *   &quot;element with a form&quot; --&gt; &quot;element with a form attribute&quot;

24. I had a go at making this paragraph less brain-frazzling.
     *   &quot;In other words, a form control belongs to the form or forms
         given by its form attribute. If it doesn't have a form
         attribute, it belongs to its nearest ancestor form element, or
         to the form or forms given by the form attribute of its nearest
         ancestor fieldset, whichever is the nearer ancestor. If the
         control doesn't have such an ancestor either, it belongs to no
         form at all.&quot;

&gt;<i> ...
</I>&gt;<i> If a form is specified multiple times in the form attribute, all  
</I>&gt;<i> occurances but the first are ignored.
</I>
25. *   &quot;occurances&quot; --&gt; &quot;occurrences&quot;

&gt;<i> ...
</I>&gt;<i> 2.10. The autofocus attribute
</I>&gt;<i> ...
</I>&gt;<i> When a form control is inserted into a document, the UA must check to   
</I>&gt;<i> see if it has this attribute set. If it does, and if the control is  
</I>&gt;<i> not  disabled, then the UA should focus the control, as if the  
</I>&gt;<i> control's focus() method was invoked.
</I>
26. What if the control is of a type that is not normally focusable on
     the user's platform? For example, in OS X with &quot;Full Keyboard
     Access&quot; turned off (as it is by default), only text fields (aka
     &lt;input type=&quot;text/password/date/time/etc&quot;&gt; and &lt;textarea&gt;) and
     listboxes (aka &lt;select multiple&gt;) should be focused.
     *   &quot;If it does, and if the control is not disabled,&quot; --&gt;
         &quot;If it does, the control is not disabled, and it is of a type
         normally focusable in the user's operating environment,&quot;
     *   Perhaps further: &quot;UAs with a viewport should also scroll the
         document enough to make the control visible, even if it is not
         of a type normally focusable.&quot;

&gt;<i> (When multiple elements are simultaneously inserted into the document,  
</I>&gt;<i> they must all perform this, in document order.)
</I>&gt;<i>
</I>&gt;<i> This implies that during document load, the last form control with  
</I>&gt;<i> this  attribute set is the one that will have focus once the document  
</I>&gt;<i> is loaded.
</I>&gt;<i> ...
</I>&gt;<i> Authors should only mark one (non-disabled) control per document with   
</I>&gt;<i> the autofocus attribute.
</I>
27. All the sentences about multiple autofocused controls should be
     together in their own paragraph.
     *   &quot;Authors should avoid setting the autofocus attribute on
         multiple elements in a document. If multiple non-disabled
         elements with the autofocus attribute set *are* inserted into a
         document, the UA should focus them sequentially in document
         order. This means that during document load, for example, the
         last form control with the attribute set will end up with
         focus.&quot;
     *   If accepting suggestion 26 above, &quot;last form control&quot; --&gt; &quot;last
         focusable form control&quot;.

&gt;<i> ...
</I>&gt;<i> The value of the attribute, if set, should be autofocus.
</I>
28. &quot;autofocus&quot; here is linked to the attribute definition, which is
     wrong, because you are referring here to the value rather than to
     the attribute itself.

&gt;<i> ...
</I>&gt;<i> 2.13. The output element
</I>&gt;<i> ...
</I>&gt;<i> Note the em element in the markup. It emphasises a part of the number.
</I>
29. Why is this notable? It doesn't seem at all relevant.

&gt;<i> 2.14. Extensions to the textarea element
</I>&gt;<i>
</I>&gt;<i> The rows and cols attributes of the  textarea element are no longer  
</I>&gt;<i> required attributes. When unspecified, CSS-compliant browsers should  
</I>&gt;<i> lay the element out as specified by CSS, and non-CSS UAs may use  
</I>&gt;<i> UA-specific defaults, such as, for visual UAs, using the width of the  
</I>&gt;<i> display device and a height suitable for the device.
</I>
30. As I said previously  
(&lt;<A HREF="http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-">http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-</A> 
July/001005.html&gt; item 41), this appears to
     recommend that UAs default textareas to being too wide to view
     without scrolling (especially if there is something horizontally
     adjacent to the textarea). If there is a way to remove this
     implication without suggesting CSS support, please do so.

&gt;<i> ...
</I>&gt;<i> hard
</I>&gt;<i>     The text is submitted with explicit line breaks, and in addition,
</I>&gt;<i>     line breaks added to wrap the text at the width given by the cols
</I>&gt;<i>     attribute.
</I>
31. *   Either &quot;line breaks added&quot; --&gt; &quot;line breaks are added&quot;, or
         &quot;and in addition, line breaks&quot; --&gt; &quot;and also with line breaks&quot;

&gt;<i> ...
</I>&gt;<i> 2.15. Extensions to file upload controls
</I>&gt;<i> ...
</I>&gt;<i> There is currently no way to specify an unlimited number of files may  
</I>&gt;<i> be uploaded. Authors are encouraged to consider what the practical  
</I>&gt;<i> limit actually is for their server-side script. For example, if the  
</I>&gt;<i> server uses an unsigned 16 bit integer to track file uploads, a   
</I>&gt;<i> suitable max value would be 65536.
</I>
32. Ehhhh. Why not just allow the value &quot;any&quot;, as is done for step=?

&gt;<i> ...
</I>&gt;<i> This is similar to straight-forward Web logging, or diary writing, but  
</I>&gt;<i> instead of submitting textual entries, one submits sound bites.
</I>
33. &quot;Web logging&quot;? Some old-fashioned newspapers refer to them as &quot;Web
     logs&quot;, but they're much more commonly &quot;Weblogs&quot;. (See also
      
&lt;<A HREF="http://en.wikipedia.org/w/index.php?">http://en.wikipedia.org/w/index.php?</A> 
title=Talk%3AWeblog&amp;diff=1399541&amp;oldid=1283187&gt;.)

&gt;<i> ...
</I>&gt;<i> For textarea elements containing tags in HTML
</I>&gt;<i>     The tags should be parsed as character data, but entities and
</I>&gt;<i>     comments should be recognised and handled correctly. (This doesn't
</I>&gt;<i>     apply to XHTML.)
</I>
34. Why not?

&gt;<i> ...
</I>&gt;<i> For option elements containing nodes other than text nodes
</I>&gt;<i> ...
</I>&gt;<i>     How such markup should be rendered is undefined. Two possibilities
</I>&gt;<i>     are sensible: rendering the content normally, just as it would have
</I>&gt;<i>     been outside the form control; and rendering the initial value
</I>&gt;<i>     only, with the rest of the content not displayed (unless forced to
</I>&gt;<i>     appear through some CSS).
</I>
35. What does &quot;initial value&quot; mean? Does it mean &quot;content preceding the
     first non-text node&quot;?

&gt;<i>     While nesting a form inside a select control may look cool, it is
</I>&gt;<i>     extremely poor UI and must not be encouraged.
</I>
36. Offering a demo of it and saying it &quot;may look cool&quot; is perhaps not
     the worst *possible* way of not encouraging it, but it's close. Post
     it in your Weblog or something if you must, but it doesn't really
     belong in a spec.

&gt;<i> ...
</I>&gt;<i> 3.1. Introduction for authors
</I>&gt;<i> ...
</I>&gt;<i> In order to distinguish this row from a normal row, however, something  
</I>&gt;<i>  needs to be added to the template to mark it as being a template.  
</I>&gt;<i> This is done using a repeat attribute:
</I>&gt;<i>     &lt;tr id=&quot;order&quot; repeat=&quot;template&quot; &gt;
</I>&gt;<i>      &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;row[order].product&quot; value=&quot;&quot;&gt;&lt;/td&gt;
</I>&gt;<i>      &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;row[order].quantity&quot; value=&quot;1&quot;&gt;&lt;/td&gt;
</I>&gt;<i>     &lt;/tr&gt;
</I>&gt;<i>
</I>&gt;<i>     To prevent an attribute from being processed in this way,
</I>
37. This note should be immediately after the description of the process
     (i.e. before &quot;In order to...&quot;), otherwise &quot;this way&quot; is confusing.

38. *   &quot;an attribute&quot; --&gt; &quot;a name or id attribute&quot;

&gt;<i>     put a non-breaking zero-width space character (&amp;#xFEFF;) at the
</I>&gt;<i>     start of the attribute.
</I>
39. *   &quot;attribute&quot; --&gt; &quot;attribute value&quot;

&gt;<i> ...
</I>&gt;<i> The second way is by including an add button inside the template, so  
</I>&gt;<i> that when the template is replicated, the button is replicated into  
</I>&gt;<i> the resulting block. When such a button is pressed, the template is  
</I>&gt;<i> replicated, and inserted immediately before the block in which the  
</I>&gt;<i> button is found. For example, if there were add buttons in the rows of  
</I>&gt;<i> the example above, and someone pressed the button in the second row, a  
</I>&gt;<i> row would be inserted between the first row and the second row.
</I>
40. If the template is inserted before the block in which the button
     is found, then the button itself (like the rest of its block) will
     (in left-to-right text) move downward and/or rightward. This usually
     won't matter mousewise, because a newly-created add button usually
     will appear exactly where the just-clicked one was; but it will
     still look odd in those environments where buttons are focusable --
     because focus will appear to have jumped, as a result of a click, to
     something that is nevertheless not under the cursor. If adding
     several blocks consecutively, there may be more annoying effects for
     accessibility aids, since the mouse is repeatedly encountering
     newly-created buttons with identical text, rather than continuously
     hovering over the same button.

     Therefore, it would be better for the template to be inserted after
     the block instead.
     *   &quot;immediately before&quot; --&gt; &quot;immediately after&quot;
     *   &quot;between the first row and the second&quot; --&gt; &quot;after the second&quot;
     *   &quot;as the first argument, immediately before that node&quot; --&gt;
         &quot;as the first argument, immediately after that node&quot;

&gt;<i> ...
</I>&gt;<i> 3.2.2. Repetition blocks
</I>&gt;<i> ...
</I>&gt;<i> Repetition blocks that don't have an associated template are termed  
</I>&gt;<i> orphan repetition blocks. They can take part in the deletion and  
</I>&gt;<i> movement aspects of the repetition model, but not addition..
</I>
41. *   &quot;termed&quot; --&gt; &quot;&quot; (or why not &quot;nouned&quot;?)
     *   &quot;addition..&quot; --&gt; &quot;in addition.&quot;

&gt;<i> 3.3. New form controls
</I>&gt;<i> ...
</I>&gt;<i> move-up
</I>&gt;<i>     Moves the nearest ancestor repetition block up one.
</I>&gt;<i> move-down
</I>&gt;<i>     Moves the nearest ancestor repetition block down one.
</I>&gt;<i> ...
</I>&gt;<i> 3.6.3. Movement of repetition  blocks
</I>&gt;<i>
</I>&gt;<i> The two remaining button types, move-up and move-down, are used to  
</I>&gt;<i> move the current repetition block up or down the sibling repetition  
</I>&gt;<i> blocks.
</I>&gt;<i>
</I>&gt;<i> If a move-up or move-down button is activated, and the  element has an  
</I>&gt;<i> ancestor that is a repetition  block as defined above, then the  
</I>&gt;<i> nearest such ancestor's template movement behaviour is invoked in the  
</I>&gt;<i> relevant direction. (Specifically, in scripting-aware environments,  
</I>&gt;<i> the element's moveRepetitionBlock() method is  called; for move-up  
</I>&gt;<i> buttons the argument is -1 and for move-down  buttons the argument is  
</I>&gt;<i> 1).
</I>&gt;<i> ...
</I>&gt;<i> In addition, user agents must automatically disable move-up buttons  
</I>&gt;<i> (irrespective of the value of the disabled DOM attribute) when  their  
</I>&gt;<i> repetition block could not be moved any higher according to the   
</I>&gt;<i> algorithm above, and when the buttons are not in a repetition block.  
</I>&gt;<i> Similarly, user agents must automatically disable move-down buttons  
</I>&gt;<i> when their repetition block could not be moved any lower according to  
</I>&gt;<i> the algorithm above, and when the buttons are not in a repetition  
</I>&gt;<i> block.
</I>&gt;<i> ...
</I>&gt;<i> 5.1. Successful form controls
</I>&gt;<i> ...
</I>&gt;<i> *   Buttons of type button, reset, add, remove, move-up, or move-down.
</I>&gt;<i> ...
</I>&gt;<i> 7.7. Validation APIs
</I>&gt;<i> ...
</I>&gt;<i> *   The control is not a button of type button, reset, add, remove,
</I>&gt;<i>     move-up, or move-down.
</I>&gt;<i> ...
</I>&gt;<i> 8.1. Relation to the CSS3 User  Interface module
</I>&gt;<i> ...
</I>&gt;<i> :enabled
</I>&gt;<i> ...
</I>&gt;<i>     (e.g. move-up buttons can be implicitly disabled in certain
</I>&gt;<i>     cases).
</I>&gt;<i> :disabled
</I>&gt;<i> ...
</I>&gt;<i>     (e.g. move-up buttons can be implicitly disabled in certain
</I>&gt;<i>     cases).
</I>
42. I propose that &quot;move&quot;  
&lt;<A HREF="http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-">http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-</A> 
August/001634.html&gt; be introduced now, instead of
     &quot;move-up&quot; and &quot;move-down&quot;. Unlike other late-proposed additions to
     Web Forms 2.0, when &quot;move&quot; is introduced I am confident it will
     rapidly make &quot;move-up&quot; and &quot;move-down&quot; obsolete, since they would be
     both much less compact and much more annoying to use for moving a
     block more than one place. It would be a shame if UAs had to support
     permanently something which was used for such a short period.

      
&lt;<A HREF="http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-">http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-</A> 
August/001955.html&gt;:
     |
     | Off hand, the main problem I see is how to define where the &quot;row&quot;
     | is. For example, the template can just be an inline element. There
     | could also be elements between the repeated rows.

     Here is the UA algorithm for detecting whether a drag will move the
     block &quot;up&quot; one place. Reverse and/or extend the appropriate elements
     in this algorithm for dragging past the next block rather than the
     previous one, and/or dragging over more than one place.

     The usual case is vertically stacked blocks, as found (for example)
     in iTunes playlists and in the Windows Start menu. Dragging above an
     invisible line (C) running through the middle of the previous block
     will move the dragged block up one place, while dragging below this
     line will not. (It's slightly more complicated for the Start menu
     where some items are folders that can be dragged into, but that
     doesn't apply to repetition blocks.) A thick drop-line with reverse
     arrowheads (D) is drawn while the drag is still happening, to
     indicate what place the block will have once dropped if dropped at
     the cursor's current position. Here, Block 3 is being dragged.
         ____________
        [Block_1_____] [/] check (-)(+)##

        &gt;===============================&lt; D    area where dropping
         ____________                          will move
     ---[Block-2-----]-[/]-------(-)(+)##---------------------------C
                                               area where dropping
                                               will not move
         ____________
        [Block_3_____] [/] check (-)(+)##

     Now, to generalize this for blocks that may be any shape, at any
     position, possibly even overlapping. In the following, a block's
     &quot;center&quot; has a naive definition of (x1+x2)/2,(y1+y2)/2, where
     (x1,y1),(x2,y2) are the farthest extents of elements in the block.

     Draw an invisible line from the center of the block being dragged
     (A) to the center of the previous block (B). Draw another invisible
     line perpendicular to this one (C), passing through the center of
     the previous block (B). If the grippy (##) is dragged to the farther
     side of this second line, dropping will move the block &quot;up&quot;. As with
     the previous example, the pending effect of the drag can be shown
     with a drop-line (D). (Algorithm for placing the drop-line available
     on request.)

     Consider a diabolical example where each block is positioned to the
     lower left of the previous block. Again, Block 3 is being dragged.

                                \
            area where dropping  \   ____________
            will not move         \ [Block_1_____] [/] foopy (-)(+)##
                           ._______\_________________________,
                     ______'&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;`D
                    [Block_2_____] [/B foopy (-)(+)##
                              __,--&quot;' \
      ____________      __,--'         \     area where dropping
     [Block_3_____] [/A'foopy (-)(+)##  \    will move
                                         \C

     This algorithm applies exactly as expected to the previous example
     of vertically stacked blocks:
         ____________
        [Block_1_____] [/] check (-)(+)##

        &gt;===============================&lt; D    area where dropping
         ____________                          will move
     ---[Block-2-----]-[/B-------(-)(+)##---------------------------C
                         |                     area where dropping
                         |                     will not move
         ____________    |
        [Block_3_____] [/A check (-)(+)##


     And it applies to horizontally adjacent blocks just as well:

                                     |
      _________           v  ________|              _________
     [Block_1__] (-)(+)## | [Block_2_B]-(-)(+)##---[Block-3-A] (-)(+)##
                          ^          |
                          D          |
                 area where dropping | area where dropping
                           will move | will not move
                                     C

     As a final bonus, replacing &quot;move-up&quot; and &quot;move-down&quot; with &quot;move&quot;
     would make the spec simpler overall.

     *   &quot;move-up
             Moves the nearest ancestor repetition block up one.
         move-down
             Moves the nearest ancestor repetition block down one.&quot;
         --&gt;
         &quot;move
             Allows reordering of the nearest ancestor repetition block
             relative to its sibling blocks.&quot;
     *   &quot;The two remaining button types, move-up and move-down, are used
         to move the current repetition block up or down the [sic]
         sibling repetition blocks.&quot; --&gt; &quot;&quot;
     *   &quot;If a move-up or move-down button is activated&quot; --&gt;
         &quot;If a repetition block is moved&quot;
     *   &quot;for move-up buttons the argument is -1 and for move-down
         buttons the argument is 1&quot; --&gt;
         &quot;the argument is equal to the number of places the block is
         being shifted -- negative if the block is being moved to precede
         previous blocks, and positive if the block is being moved to
         follow succeeding blocks&quot;
     *   &quot;In addition, user agents must automatically disable move-up
         buttons (irrespective of the value of the disabled DOM
         attribute) when their repetition block could not be moved any
         higher according to the algorithm above, and when the buttons
         are not in a repetition block. Similarly, user agents must
         automatically disable move-down buttons when their repetition
         block could not be moved any lower according to the algorithm
         above, and when the buttons are not in a repetition block. This
         automatic disabling does not affect the DOM disabled attribute.
         It is an intrinsic property of these buttons.&quot;
         --&gt;
         &quot;In addition, user agents must automatically disable a move
         control when it is not in a repetition block, or when its
         repetition block can be moved in neither direction according to
         the algorithm above. This disabling must occur irrespective of
         the disabled DOM attribute, and does not change that attribute's
         value.&quot;
     *   &quot;button, reset, add, remove, move-up, or move-down&quot; --&gt;
         &quot;button, reset, add, remove, or move&quot; (sections 5.1 and 7.7)
     *   &quot;move-up buttons can be implicitly disabled&quot; --&gt;
         &quot;add buttons can be implicitly disabled&quot; (two occurrences)

&gt;<i> ...
</I>&gt;<i> When these new types are used with input buttons, the value attribute  
</I>&gt;<i> shall, if present, provide the button caption (although this may be  
</I>&gt;<i> further overridden by the stylesheet).
</I>
43. *   &quot;However, a user agent may ignore this attribute so as to render
         buttons consistent with those performing equivalent functions in
         the user's operating environment. For this reason, if nesting
         repetition blocks, authors should position such buttons
         carefully to make clear which block a button applies to.&quot;

     That way, add and remove buttons can have their familiar rounded (+)
     and (-) appearances on Mac OS X (probably using value+title combined
     as a tooltip), while still having text captions on platforms where
     add and remove buttons are less common.

&gt;<i> ...
</I>&gt;<i> 3.4. The repeat-min and repeat-max attributes
</I>&gt;<i> ...
</I>&gt;<i> These two attributes have no effect on the repetition model when  
</I>&gt;<i> present on elements that do not have a repeat attribute with the value  
</I>&gt;<i> set to template.
</I>
44. &quot;template&quot; here is linked to the attribute definition, which is
     wrong, because you are referring not to that attribute but to a
     value of a different attribute.

&gt;<i> ...
</I>&gt;<i> 3.7.1. Repeated rows
</I>&gt;<i>
</I>&gt;<i> The following example shows how to use repetition templates to   
</I>&gt;<i> dynamically add more rows to a form in a table.
</I>
45. Grating redundancy.
     *   &quot;add more&quot; --&gt; &quot;add&quot;

&gt;<i> ...
</I>&gt;<i> 5. Form submission
</I>&gt;<i> ...
</I>&gt;<i> 1. Step one: Dispatch the submit event.
</I>
46. *   &quot;event.&quot; --&gt; &quot;event&quot;

&gt;<i> ...
</I>&gt;<i> 5.2. Handling characters outside the submission character set
</I>&gt;<i> ...
</I>&gt;<i>  ____________________________________________________
</I>&gt;<i> || Warning |||||||||||||||||||||||||||||||||||||||||||
</I>&gt;<i> |                                                    |
</I>&gt;<i> | This form cannot handle some of the characters you |
</I>&gt;<i> | have entered (including &quot;&#252;&quot; and &quot;&#233;&quot;).  |
</I>
47. *   '&quot;&#233;&quot;).  |' --&gt; '&quot;&#233;&quot;).              |'

&gt;<i> ...
</I>&gt;<i> 5.3.  application/x-www-form-urlencoded
</I>&gt;<i> ...
</I>&gt;<i> 3.  The values of file upload controls are the names (excluding path
</I>&gt;<i>     information) of the files selected by the user, *not* their
</I>&gt;<i>     contents.
</I>
48. In section 2.15, an accept= attribute is introduced for &lt;input
     type=&quot;file&quot;&gt;, especially (but not solely) for &quot;small devices that do
     not have file systems and for which the only way of handling file
     upload is to generate the content on the fly&quot;. What should such
     devices use as a name for such a non-existent file?

&gt;<i> 4.  Control names and values are escaped. Space characters are replaced
</I>&gt;<i>     by &quot;+&quot; (U+002B), and then non-alphanumeric characters are encoded
</I>&gt;<i>     in the submission character encoding and each resulting byte is
</I>&gt;<i>     replaced by &quot;%HH&quot;, a percent sign (U+0025) and two uppercase
</I>&gt;<i>     hexadecimal digits representing the value of the byte.
</I>
49. Should this be written the other way around? This way round, space
     characters and &quot;+&quot; characters will end up as the same &quot;%HH&quot; entity.

&gt;<i> ...
</I>&gt;<i> 7.7. Validation APIs
</I>&gt;<i> ...
</I>&gt;<i> *   The control does not have a repetition templates as an ancestor.
</I>
50. *   &quot;templates&quot; --&gt; &quot;template&quot;

&gt;<i> ...
</I>&gt;<i> 7.9. Additions specific to the HTMLInputElement interface
</I>&gt;<i> ...
</I>&gt;<i> Two new methods, stepUp() and stepDown(), enable authors to write code  
</I>&gt;<i> that increases and decreases (respectively) the value of the control  
</I>&gt;<i> in integral increments of the given step value. The argument specifies  
</I>&gt;<i> the number of steps by which to increase or decrease the value. If the  
</I>&gt;<i> control's value is invalid or empty, then the methods shall raise an  
</I>&gt;<i> INVALID_STATE_ERR exception. If a particular invocation of the method  
</I>&gt;<i> would invalidate the value (for example, if stepUp(1) is called when  
</I>&gt;<i> the control's value is less than step from max), then the method shall  
</I>&gt;<i> raise an INVALID_MODIFICATION_ERR exception. If the argument passed is  
</I>&gt;<i> zero, then the method shall raise an INDEX_SIZE_ERR exception.
</I>
51. What if step=&quot;any&quot;?

&gt;<i> ...
</I>&gt;<i> A. XHTML module definition
</I>&gt;<i> ...
</I>&gt;<i> Warning. XML documents using the new repetition model with the index  
</I>&gt;<i> substitution feature on ID attributes cannot validate, as the &quot;[&quot; and  
</I>&gt;<i> &quot;]&quot; characters are not valid in IDs in XML.
</I>
52. This warning is a non-verbatim repetition of the note at the end of
     section 3. Is this intentional, should they have the same text, or
     should one of them be removed?

&gt;<i> ...
</I>&gt;<i> C. Deprecated features
</I>&gt;<i> ...
</I>&gt;<i> Documents must not use deprecated features. User agents should support  
</I>&gt;<i>  deprecated features.
</I>
53. In the HTML world, something that authors *must* not use, and which
     UAs might not implement, is not &quot;deprecated&quot;; it is &quot;obsolete&quot;.
     &lt;<A HREF="http://www.w3.org/TR/REC-html40/conform.html#deprecated">http://www.w3.org/TR/REC-html40/conform.html#deprecated</A>&gt;

&gt;<i> ...
</I>&gt;<i> D. Requirements for declaring  interoperability
</I>
54. The sections listed in this section should be hyperlinked.

&gt;<i> ...
</I>&gt;<i> References
</I>&gt;<i> ...
</I>&gt;<i> [CSJSR]
</I>&gt;<i>     Client-Side JavaScript Reference (1.3). Netscape Communications
</I>&gt;<i>     Corporation, May 1999. The Client-Side JavaScript Reference (1.3)
</I>&gt;<i>     is available at  
</I>&gt;<i> <A HREF="http://devedge.netscape.com/library/manuals/2000/javascript/1.3/">http://devedge.netscape.com/library/manuals/2000/javascript/1.3/</A> 
</I>&gt;<i> reference/index.html
</I>
55.  
&lt;<A HREF="http://devedge.netscape.com/library/manuals/2000/javascript/1.3/">http://devedge.netscape.com/library/manuals/2000/javascript/1.3/</A> 
reference/index.html&gt; has been unavailable throughout the period I was
     reviewing this spec. Perhaps  
&lt;<A HREF="http://web.archive.org/web/20040202050531/http://devedge.netscape.com/">http://web.archive.org/web/20040202050531/http://devedge.netscape.com/</A> 
library/manuals/2000/javascript/1.3/reference/&gt; would be a better  
reference.

56. The raw URIs in the JavaScript 1.3 reference, the RFC references,
     and the XBL reference should all be hyperlinked.

-- 
Matthew Thomas
<A HREF="http://mpt.net.nz/">http://mpt.net.nz/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044935.html">[whatwg] WHAT calls for final comments on Web Forms 2.0 proposal
</A></li>
	<LI>Next message: <A HREF="044932.html">[whatwg] Templates not only for WebForms?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45053">[ date ]</a>
              <a href="thread.html#45053">[ thread ]</a>
              <a href="subject.html#45053">[ subject ]</a>
              <a href="author.html#45053">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
