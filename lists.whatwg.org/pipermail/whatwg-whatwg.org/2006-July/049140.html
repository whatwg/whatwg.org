<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas 2d methods
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%202d%20methods&In-Reply-To=%3CPine.LNX.4.62.0607021939210.4826%40dhalsim.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049136.html">
   <LINK REL="Next"  HREF="049142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas 2d methods</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%202d%20methods&In-Reply-To=%3CPine.LNX.4.62.0607021939210.4826%40dhalsim.dreamhost.com%3E"
       TITLE="[whatwg] Canvas 2d methods">ian at hixie.ch
       </A><BR>
    <I>Sun Jul  2 12:56:58 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="049136.html">[whatwg] Canvas 2d methods
</A></li>
        <LI>Next message: <A HREF="049142.html">[whatwg] Canvas 2d methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49140">[ date ]</a>
              <a href="thread.html#49140">[ thread ]</a>
              <a href="subject.html#49140">[ subject ]</a>
              <a href="author.html#49140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 2 Jul 2006, Stefan G&#246;ssner wrote:
&gt;<i>
</I>&gt;<i> If I understand this correctly, in the following code
</I>&gt;<i> 
</I>&gt;<i> var a=1, f=function(x){}, X={b:2,c:3};
</I>&gt;<i> with(X) {
</I>&gt;<i>   a=4;
</I>&gt;<i>   f(b);
</I>&gt;<i>   c=5;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> *every* variable a,b,c,f in the with-block must be dynamically checked, if it
</I>&gt;<i> *either* belongs to the global namespace *or/and* is a member of X. As all
</I>&gt;<i> variables in the block are affected, this sounds inherently inefficient.
</I>
This is true whether or not you use &quot;with&quot;. JavaScript is a dynamically 
bound language. All that &quot;with&quot; does is change the binding chain 
temporarily. It is not any more or less efficient.


&gt;<i> Despite of this fact, if every method of an object X
</I>&gt;<i> 
</I>&gt;<i> var X = {
</I>&gt;<i>   a: function(){ return this;}
</I>&gt;<i>   b: function(){ return this;}
</I>&gt;<i>   c: function(){ return this;}
</I>&gt;<i> };
</I>&gt;<i> 
</I>&gt;<i> returns that object, we can code
</I>&gt;<i> 
</I>&gt;<i> with (X) {
</I>&gt;<i>  a(); b(); c();
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> as well as more elegantly in my opinion
</I>&gt;<i> 
</I>&gt;<i> X.a().b().c();
</I>
The latter, IMHO, is semantically bogus. But that's just a matter of 
opinion, of course.


&gt;<i> So existing code -- previously using methods returning nothing -- 
</I>&gt;<i> shouldn't be affected and I can see no other drawback when adding 
</I>&gt;<i> 'return this' to every method. Modern javascript libraries (e.g. jQuery) 
</I>&gt;<i> seem to follow the mindset:
</I>&gt;<i> 
</I>&gt;<i> if an object method has no explicit return value, then return the object 
</I>&gt;<i> itself in order to allow call chains.
</I>
I understand what you are asking for, my concern is just that getting 
every implementation to change to this now is going to cause all kinds of 
bugs to be introduced. While it would have been an interesting feature in 
the API if we were building it from scratch, it doesn't seem to be a big 
enough improvement to be worth the pain at this point, especially 
considering that the API works well with &quot;with&quot;.

If you can convince the implementors to change to support chaining, 
though, I will of course change the spec as well. Vlad, however, seemed 
reluctant, and he is one of the implementors.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049136.html">[whatwg] Canvas 2d methods
</A></li>
	<LI>Next message: <A HREF="049142.html">[whatwg] Canvas 2d methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49140">[ date ]</a>
              <a href="thread.html#49140">[ thread ]</a>
              <a href="subject.html#49140">[ subject ]</a>
              <a href="author.html#49140">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
