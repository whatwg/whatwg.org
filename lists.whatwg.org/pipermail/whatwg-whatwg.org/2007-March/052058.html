<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Distinguishing XML and HTML by content sniffing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Distinguishing%20XML%20and%20HTML%20by%20content%20sniffing&In-Reply-To=%3C45EA87E0.7010609%40yeslogic.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052057.html">
   <LINK REL="Next"  HREF="052059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Distinguishing XML and HTML by content sniffing</H1>
<!--htdig_noindex-->
    <B>Michael Day</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Distinguishing%20XML%20and%20HTML%20by%20content%20sniffing&In-Reply-To=%3C45EA87E0.7010609%40yeslogic.com%3E"
       TITLE="[whatwg] Distinguishing XML and HTML by content sniffing">mikeday at yeslogic.com
       </A><BR>
    <I>Sun Mar  4 00:48:32 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="052057.html">[whatwg] Distinguishing XML and HTML by content sniffing
</A></li>
        <LI>Next message: <A HREF="052059.html">[whatwg] Distinguishing XML and HTML by content sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52058">[ date ]</a>
              <a href="thread.html#52058">[ thread ]</a>
              <a href="subject.html#52058">[ subject ]</a>
              <a href="author.html#52058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Bjoern,

&gt;<i> Well, the article would be more interesting if you had explained why you
</I>&gt;<i> took this particular approach instead of, say, parsing the first 8K with
</I>&gt;<i> an XML parser and if that succeeds it's XML and HTML otherwise, and what
</I>&gt;<i> the implementation would consider your article.
</I>
I think that approach could easily misidentify valid HTML documents as 
being XML. It would be easy to parse the first 8Kb of many HTML 
documents with an XML parser, as unclosed tags like &lt;link&gt; and &lt;meta&gt; 
would not trigger any well-formedness errors unless you parsed all the 
way to the end of the document -- not just the first 8Kb -- and found 
that they were never closed.

On a more pragmatic level, I think it would also be slightly more 
difficult to implement this approach with libxml2, as you would have to 
carefully feed the parser only 8Kb (or some other amount) and then stop 
it before it hits the end of the buffer and complains about all the 
unclosed tags. However, the misidentification problem is a more serious 
issue affecting this approach.

Best regards,

Michael

-- 
Print XML with Prince!
<A HREF="http://www.princexml.com">http://www.princexml.com</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052057.html">[whatwg] Distinguishing XML and HTML by content sniffing
</A></li>
	<LI>Next message: <A HREF="052059.html">[whatwg] Distinguishing XML and HTML by content sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52058">[ date ]</a>
              <a href="thread.html#52058">[ thread ]</a>
              <a href="subject.html#52058">[ subject ]</a>
              <a href="author.html#52058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
