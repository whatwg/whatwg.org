<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Distinguishing XML and HTML by content sniffing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Distinguishing%20XML%20and%20HTML%20by%20content%20sniffing&In-Reply-To=%3Cop.tony7fz17a8kvn%40hp-a0a83fcd39d2%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052060.html">
   <LINK REL="Next"  HREF="052098.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Distinguishing XML and HTML by content sniffing</H1>
<!--htdig_noindex-->
    <B>Simon Pieters</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Distinguishing%20XML%20and%20HTML%20by%20content%20sniffing&In-Reply-To=%3Cop.tony7fz17a8kvn%40hp-a0a83fcd39d2%3E"
       TITLE="[whatwg] Distinguishing XML and HTML by content sniffing">zcorpan at gmail.com
       </A><BR>
    <I>Sun Mar  4 04:19:53 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="052060.html">[whatwg] Distinguishing XML and HTML by content sniffing
</A></li>
        <LI>Next message: <A HREF="052098.html">[whatwg] Distinguishing XML and HTML by content sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52061">[ date ]</a>
              <a href="thread.html#52061">[ thread ]</a>
              <a href="subject.html#52061">[ subject ]</a>
              <a href="author.html#52061">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 04 Mar 2007 07:33:51 +0100, Michael Day &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mikeday at yeslogic.com</A>&gt;  
wrote:

&gt;<i> For user agents like Prince that support XML and HTML content it is  
</I>&gt;<i> sometimes necessary to distinguish whether a .html file is actually XML  
</I>&gt;<i> or HTML in order for it to be processed correctly.
</I>&gt;<i>
</I>&gt;<i> I've written an article for XML.com explaining exactly how Prince  
</I>&gt;<i> performs content sniffing to distinguish XML and HTML documents:
</I>&gt;<i>
</I>&gt;<i>      What Does XML Smell Like?
</I>&gt;<i>      <A HREF="http://www.xml.com/pub/a/2007/02/28/what-does-xml-smell-like.html">http://www.xml.com/pub/a/2007/02/28/what-does-xml-smell-like.html</A>
</I>&gt;<i>
</I>&gt;<i> Any feedback would be greatly appreciated. No doubt at some point it  
</I>&gt;<i> will be necessary to revise our heuristics for HTML5 :)
</I>
If you load a file from disk, then use any meta information the OS can  
provide. (I think Linux can store Content-Type information for files.) If  
the OS relies on file extensions (like Windows does) then use that.

.htm and .html are HTML. I know of lots of HTML documents that start with  
an &quot;XML declaration&quot; but are not well-formed if parsed as XML. (For  
starters, some version of DreamWeaver emitted XML declarations for  
documents, but did not ensure well-formedness and the result is often not  
well-formed.) Even if it was well-formed, it probably wasn't tested under  
XML conditions so it's likely that style sheets and scripts only work  
correctly under HTML conditions.

 From the article:

|<i> It is common for XHTML files to be given an extension of .html or .htm,
</I>|<i> as .xhtml is rather long and .xht is rather obscure. This means that a
</I>|<i> file with an extension of .html may actually be an XML document and
</I>|<i> require an XML parser.
</I>
This is completely bogus. Those &quot;XHTML&quot; files are most likely inteded to  
be treated as HTML and not as XML. If an author wanted it to be treated as  
XML he/she would use .xhtml, .xht or .xml. Even if it would work correctly  
with an XML parser, it would likely also work correctly with an HTML  
parser (since all browsers would treat it as HTML, and authors mostly test  
their documents in some browser).

If an author authored a document and testing it with Prince, finding that  
XML-only features work even with a .html file extension, then it is likely  
that that document would break in browsers (because XML-only features  
don't work in HTML).

HTML5 has specified content-sniffing rules, FWIW:  
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/#content-type-sniffing">http://www.whatwg.org/specs/web-apps/current-work/#content-type-sniffing</A>

See also: <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=1500">http://www.w3.org/Bugs/Public/show_bug.cgi?id=1500</A>

-- 
Simon Pieters

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052060.html">[whatwg] Distinguishing XML and HTML by content sniffing
</A></li>
	<LI>Next message: <A HREF="052098.html">[whatwg] Distinguishing XML and HTML by content sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52061">[ date ]</a>
              <a href="thread.html#52061">[ thread ]</a>
              <a href="subject.html#52061">[ subject ]</a>
              <a href="author.html#52061">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
