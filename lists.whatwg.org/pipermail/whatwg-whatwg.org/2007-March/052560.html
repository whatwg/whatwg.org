<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] window.opener and security
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20window.opener%20and%20security&In-Reply-To=%3Cdd4c8a40703200600t65c966c4xeebc7045958b8a0b%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052559.html">
   <LINK REL="Next"  HREF="052561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] window.opener and security</H1>
<!--htdig_noindex-->
    <B>Hallvord R M Steen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20window.opener%20and%20security&In-Reply-To=%3Cdd4c8a40703200600t65c966c4xeebc7045958b8a0b%40mail.gmail.com%3E"
       TITLE="[whatwg] window.opener and security">hallvors at gmail.com
       </A><BR>
    <I>Tue Mar 20 06:00:45 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="052559.html">[whatwg] window.opener and security
</A></li>
        <LI>Next message: <A HREF="052561.html">[whatwg] window.opener and security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52560">[ date ]</a>
              <a href="thread.html#52560">[ thread ]</a>
              <a href="subject.html#52560">[ subject ]</a>
              <a href="author.html#52560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 20/03/07, Gareth Hay &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gazhay at gmail.com</A>&gt; wrote:
&gt;<i> window.opener should be read-only and attempting to write to it
</I>&gt;<i> should throw an exception.
</I>
I don't really see why setting opener would be dangerous, so I
disagree that it should throw. Anyway, that is a different issue. What
I'm talking about is the built-in behaviour - the browser itself sets
window.opener in all popups, and there is currently no way to open a
popup that is prevented from changing the location of its opener.

(An exception is Opera applying a stricter security policy if the
opener is an https page so in this case popup can't set location of
its opener, but I'm not sure if the other UAs do this.)

&gt;<i> This is a similar issue to window.history, in certain browsers you
</I>&gt;<i> can write to this with js. It has no effect, but does persist across
</I>&gt;<i> domains. The webkit team decided to just throw an exception if a
</I>&gt;<i> write to window.history was detected. I don't know if it ever got
</I>&gt;<i> implemented, or even if any of the other browser vendors addressed it.
</I>&gt;<i>
</I>&gt;<i> On 20 Mar 2007, at 11:40, Hallvord R M Steen wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; when a new window or tab is opened by a page it normally has a
</I>&gt;<i> &gt; &quot;window.opener&quot; property that points to the window object of the
</I>&gt;<i> &gt; original tab.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This happens whether the new window is opened by a JavaScript calling
</I>&gt;<i> &gt; window.open or by a link or form with target attribute set.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If an origin check fails when comparing the locations of the old
</I>&gt;<i> &gt; window and the popup, the normal cross-domain security policies apply.
</I>&gt;<i> &gt; This means that popup contents from a different site will not be
</I>&gt;<i> &gt; allowed to call methods or manipulate the DOM of the opener.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; However, this cross-domain security policy has one exception: the
</I>&gt;<i> &gt; popup may set the location of its opener. This has phishing potential,
</I>&gt;<i> &gt; particularly for webmail where opening external links in a new window
</I>&gt;<i> &gt; is a very common use case. Hence I think it would be a good idea to
</I>&gt;<i> &gt; let a site opt-out and specify that the popup should not have a
</I>&gt;<i> &gt; window.opener property. For example, one could extend the &quot;features&quot;
</I>&gt;<i> &gt; argument of window.open:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; window.open(url, name, 'openerproperty=0');
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thoughts?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; References:
</I>&gt;<i> &gt; <A HREF="http://my.opera.com/hallvors/blog/2007/03/14/window-opener-and-">http://my.opera.com/hallvors/blog/2007/03/14/window-opener-and-</A>
</I>&gt;<i> &gt; security-an-unfixable-problem
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Hallvord R. M. Steen
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Hallvord R. M. Steen

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052559.html">[whatwg] window.opener and security
</A></li>
	<LI>Next message: <A HREF="052561.html">[whatwg] window.opener and security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52560">[ date ]</a>
              <a href="thread.html#52560">[ thread ]</a>
              <a href="subject.html#52560">[ subject ]</a>
              <a href="author.html#52560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
