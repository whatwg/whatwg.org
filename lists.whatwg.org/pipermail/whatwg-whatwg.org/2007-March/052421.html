<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] IRIs vs. URIs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20IRIs%20vs.%20URIs&In-Reply-To=%3CPine.LNX.4.64.0703150907400.21397%40peter.oslo.opera.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="052399.html">
   <LINK REL="Next"  HREF="052424.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] IRIs vs. URIs</H1>
<!--htdig_noindex-->
    <B>Peter Karlsson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20IRIs%20vs.%20URIs&In-Reply-To=%3CPine.LNX.4.64.0703150907400.21397%40peter.oslo.opera.com%3E"
       TITLE="[whatwg] IRIs vs. URIs">peter at opera.com
       </A><BR>
    <I>Thu Mar 15 01:17:26 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="052399.html">[whatwg] IRIs vs. URIs
</A></li>
        <LI>Next message: <A HREF="052424.html">[whatwg] IRIs vs. URIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52421">[ date ]</a>
              <a href="thread.html#52421">[ thread ]</a>
              <a href="subject.html#52421">[ subject ]</a>
              <a href="author.html#52421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>L. David Baron on 2007-03-14:

&gt;<i> No, it's the *encoding* (conversion from characters to bytes) that should 
</I>&gt;<i> be done as UTF-8, not the *decoding* (conversion from bytes to 
</I>&gt;<i> characters).
</I>
Right. Sorry for the confusion. Perhaps it would be good to specify it, but 
it needs to be specified in a way that is compatible with the current web, 
although I am not sure if there is *one* specification that can cover all 
the current cases.


Bjoern Hoehrmann on 2007-03-14:

&gt;<i> The traditional behavior of Internet Explorer on Western versions of 
</I>&gt;<i> Windows for western web sites using western encodings has been, since the 
</I>&gt;<i> release of IE5b2 I think, to encode the path using UTF-8 and the query 
</I>&gt;<i> string using the document encoding, depending on the send-urls- as-utf-8 
</I>&gt;<i> setting. For example,
</I>&gt;<i>
</I>&gt;<i>  &lt;a href='Bj&#246;rn.html'&gt;...&lt;/a&gt;
</I>&gt;<i>
</I>&gt;<i> in an ISO-8859-1 encoded document would result in a request for
</I>&gt;<i>
</I>&gt;<i>  ... Bj%C3%B6rn.html ...
</I>
Yes, I remember the havoc that created on our university computer club's 
server when that version was released, as we had used quite a lot of 
Swedish characters in our URLs (which had worked fine from most Windows 
and Unix browsers, until IE5). As you note, the default setting is different 
in different locales, I believe the East Asian locale defaults differ.

&gt;<i> Opera, at least for a considerable amount of time, used UTF-8 for the 
</I>&gt;<i> whole reference, I think independently of encodings, domains, and other 
</I>&gt;<i> environment variables.
</I>
There is a setting in Opera to control the behaviour. Either we use UTF-8 
for all URLs (the default), or we use the document encoding. The latter 
setting is popular in some locales, especially Russia (IIRC).


L. David Baron on 2007-03-14:

&gt;<i> I believe Mozilla's behavior is the way it is in order to be compatible 
</I>&gt;<i> enough with IE's behavior to be usable when browsing East Asian Web sites.
</I>
I think that there is a spec somewhere (IRI spec?) that states that one 
should try the URL both encoded in UTF-8 and, if that fails, in the locale 
encoding. To my knowledge, there are no browsers that do that.


Also, one needs to consider that there are different parts of the URL that 
needs to be encoded differently. Even if you UTF-8 encode the path 
component, the query part needs to be given some special care and attention. 
In a reference such as

   &lt;a href=&quot;<A HREF="http://www.r&#228;ksm&#246;rg&#229;s.se/r&#228;ksm&#246;rg&#229;s?q=r&#228;ksm&#246;rg&#229;s">http://www.r&#228;ksm&#246;rg&#229;s.se/r&#228;ksm&#246;rg&#229;s?q=r&#228;ksm&#246;rg&#229;s</A>&quot;&gt;

there are three components that need to be encoded differently. I can't 
remember how many test cases I have for such URLs, to make sure as many 
possible combinations we can think of will work whenever a new variant that 
isn't working is discovered.

Having a real specification of this would help quite a lot... :-)

-- 
\\//
Peter, software engineer, Opera Software

  The opinions expressed are my own, and not those of my employer.
  Please reply only by follow-ups on the mailing list.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="052399.html">[whatwg] IRIs vs. URIs
</A></li>
	<LI>Next message: <A HREF="052424.html">[whatwg] IRIs vs. URIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52421">[ date ]</a>
              <a href="thread.html#52421">[ thread ]</a>
              <a href="subject.html#52421">[ subject ]</a>
              <a href="author.html#52421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
