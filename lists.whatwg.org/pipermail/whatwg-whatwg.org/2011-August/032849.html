<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Need clarification on DOM exceptions thrown by canvas 2D	drawImage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Need%20clarification%20on%20DOM%20exceptions%20thrown%20by%20canvas%202D%0A%09drawImage&In-Reply-To=%3CCADBbOaW-vf1a28-V3Nofg2CYaBcnaKtX8dQLnt7d86QEekHi0g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075184.html">
   <LINK REL="Next"  HREF="075123.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Need clarification on DOM exceptions thrown by canvas 2D	drawImage</H1>
<!--htdig_noindex-->
    <B>Justin Novosad</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Need%20clarification%20on%20DOM%20exceptions%20thrown%20by%20canvas%202D%0A%09drawImage&In-Reply-To=%3CCADBbOaW-vf1a28-V3Nofg2CYaBcnaKtX8dQLnt7d86QEekHi0g%40mail.gmail.com%3E"
       TITLE="[whatwg] Need clarification on DOM exceptions thrown by canvas 2D	drawImage">junov at chromium.org
       </A><BR>
    <I>Mon Aug  8 13:55:26 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="075184.html">[whatwg] File API Streaming Blobs
</A></li>
        <LI>Next message: <A HREF="075123.html">[whatwg] Need clarification on DOM exceptions thrown by canvas 2D drawImage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32849">[ date ]</a>
              <a href="thread.html#32849">[ thread ]</a>
              <a href="subject.html#32849">[ subject ]</a>
              <a href="author.html#32849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

This inquiry is regarding this page of the specification:
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html">http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html</A>
In section 4.8.11.1.10 Images, about drawImage(), it is stated that
&quot;If one of the sw or sh arguments is zero, the implementation must
raise an INDEX_SIZE_ERR exception&quot;  There are no other references to
other circumstances under which INDEX_SIZE_ERR should be thrown, and
there is no indication of what the correct behavior is when the source
rectangle is completely or partially outside the bounds of the source
image.

Right now there are discrepancies in how different browsers handle
this situation.
 -WebKit throws INDEX_SIZE_ERR when the source rectangle is completely
out of bounds
 -Internet Explorer 9 does not throw an exception (which I believe is
the correct behavior, given the current wording of the spec)
 -Firefox 5 throws an INDEX_SIZE_ERR if the source rectangle is out of
bounds to the top or left (negative sx or sy)

Also, this test agrees with (or perhaps influenced) the WebKit
interpretation of the specification:
<A HREF="http://w3c-test.org/html/tests/submission/PhilipTaylor/canvas/2d.drawImage.outsidesource.html">http://w3c-test.org/html/tests/submission/PhilipTaylor/canvas/2d.drawImage.outsidesource.html</A>

This matter is currently under investigation in WebKit:
<A HREF="https://bugs.webkit.org/show_bug.cgi?id=65709">https://bugs.webkit.org/show_bug.cgi?id=65709</A>

On the Firefox side, a patch was recently submitted to remove the
exception (be like IE)
<A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=664107">https://bugzilla.mozilla.org/show_bug.cgi?id=664107</A>

Thanks providing clarification,

   Justin
</PRE>






















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075184.html">[whatwg] File API Streaming Blobs
</A></li>
	<LI>Next message: <A HREF="075123.html">[whatwg] Need clarification on DOM exceptions thrown by canvas 2D drawImage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32849">[ date ]</a>
              <a href="thread.html#32849">[ thread ]</a>
              <a href="subject.html#32849">[ subject ]</a>
              <a href="author.html#32849">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
