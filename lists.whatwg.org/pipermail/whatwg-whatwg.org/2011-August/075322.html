<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fixing undo on the Web - UndoManager and Transaction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fixing%20undo%20on%20the%20Web%20-%20UndoManager%20and%20Transaction&In-Reply-To=%3CCA%2Bc2ei9gMB4N_%2BfZeOSf%2BZBCxq%3Dmk2XXQFZZcDPwr5_KX1Wptg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075315.html">
   <LINK REL="Next"  HREF="032767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fixing undo on the Web - UndoManager and Transaction</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fixing%20undo%20on%20the%20Web%20-%20UndoManager%20and%20Transaction&In-Reply-To=%3CCA%2Bc2ei9gMB4N_%2BfZeOSf%2BZBCxq%3Dmk2XXQFZZcDPwr5_KX1Wptg%40mail.gmail.com%3E"
       TITLE="[whatwg] Fixing undo on the Web - UndoManager and Transaction">jonas at sicking.cc
       </A><BR>
    <I>Tue Aug 30 19:22:04 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="075315.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
        <LI>Next message: <A HREF="032767.html">[whatwg] [editing] HTML Editing APIs specification ready for	implementer feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75322">[ date ]</a>
              <a href="thread.html#75322">[ thread ]</a>
              <a href="subject.html#75322">[ subject ]</a>
              <a href="author.html#75322">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Aug 30, 2011 at 12:30 PM, Ryosuke Niwa &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">rniwa at webkit.org</A>&gt; wrote:
&gt;<i> On Tue, Aug 30, 2011 at 12:21 PM, Ehsan Akhgari &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ehsan at mozilla.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 11-08-30 3:15 PM, Ryosuke Niwa wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &#160; &#160;1. Should Transaction have reapply property or not? &#160;It appears that
</I>&gt;&gt;&gt;<i> some
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &#160; &#160;of us (e.g. me, Annie, Alex) want it for semantical clarity while
</I>&gt;&gt;&gt;<i> others
</I>&gt;&gt;&gt;<i> &#160; &#160;(e.g. Jonas and Ehsan) doesn't wait to avoid code duplication and to
</I>&gt;&gt;&gt;<i> simply
</I>&gt;&gt;&gt;<i> &#160; &#160;the API.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I still think that if we can design an API which discourages code
</I>&gt;&gt;<i> duplication, we probably should.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> (I feel like we're bikesheding here but) authors can do that by omitting
</I>&gt;<i> reapply as in {'apply': ..., 'unapply': ...}.
</I>
First of all people tend to copy and be inspired by what other people
do, so it seems very likely that people would end up duplicating code
not realizing that the reapply function is optional.

Second, I think you brought up really good arguments for why the
reapply behavior often needs to be slightly different than the apply
behavior. As you pointed out this would be awkward if you simply left
out the reapply function under your proposal. This is why I suggested
we add the boolean argument passed to the apply function which is
indicates if it's the first apply call, or a subsequent one.

I'm really failing to think of a case when you'd really want to have
apply and reapply as separate callbacks. Even in the most trivial
cases it seems like it would lead to code duplication which is
something that even the most basic developers try to avoid. And
especially in more complex scenarios like collaborative editors it
seems like you really wouldn't want to duplicate the logic between
apply and reapply.

So once we have the boolean argument to apply, I fail to see any cases
where the reapply approach is better. I'd love to see some examples if
you have any?

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075315.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
	<LI>Next message: <A HREF="032767.html">[whatwg] [editing] HTML Editing APIs specification ready for	implementer feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75322">[ date ]</a>
              <a href="thread.html#75322">[ thread ]</a>
              <a href="subject.html#75322">[ subject ]</a>
              <a href="author.html#75322">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
