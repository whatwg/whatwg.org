<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Discrepancies between HTML and ES rules for parsing an	integer or float
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Discrepancies%20between%20HTML%20and%20ES%20rules%20for%20parsing%20an%0A%09integer%20or%20float&In-Reply-To=%3CCAKA%2BAxmC1QuWNBtH4Hcm_2-EKXe%2BqXzQJBUOaq%2B1p%2B8Biy2icQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075063.html">
   <LINK REL="Next"  HREF="075088.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Discrepancies between HTML and ES rules for parsing an	integer or float</H1>
<!--htdig_noindex-->
    <B>Aryeh Gregor</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Discrepancies%20between%20HTML%20and%20ES%20rules%20for%20parsing%20an%0A%09integer%20or%20float&In-Reply-To=%3CCAKA%2BAxmC1QuWNBtH4Hcm_2-EKXe%2BqXzQJBUOaq%2B1p%2B8Biy2icQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Discrepancies between HTML and ES rules for parsing an	integer or float">ayg at aryeh.name
       </A><BR>
    <I>Wed Aug  3 11:21:59 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="075063.html">[whatwg] input type=barcode?
</A></li>
        <LI>Next message: <A HREF="075088.html">[whatwg] Discrepancies between HTML and ES rules for parsing an integer or float
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32792">[ date ]</a>
              <a href="thread.html#32792">[ thread ]</a>
              <a href="subject.html#32792">[ subject ]</a>
              <a href="author.html#32792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hixie just WONTFIXed two bugs that I thought might be of interest:

<A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=12220">http://www.w3.org/Bugs/Public/show_bug.cgi?id=12220</A>
<A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=12296">http://www.w3.org/Bugs/Public/show_bug.cgi?id=12296</A>

Basically, HTML defines some algorithms for parsing integers, floats,
etc., which are used in converting DOM to IDL attributes for
reflection (among other things):

<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#numbers">http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#numbers</A>

The algorithms for parsing integers and floats are almost exactly the
same as ECMAScript's parseInt() and parseFloat(), down to some of the
language being copied word-for-word, but with subtle differences
involving (at least) whitespace handling.  IMO, this is bad for
several reasons:

* It's confusing to both authors and implementers to have multiple
almost identical algorithms.  Nobody's going to expect the discrepancy
in the corner cases where it matters.
* It's confusing to people reading the spec for there to be these
extra algorithms defined, whose relationship to the ES algorithms is
not obvious.  The HTML and ES algorithms are written in entirely
different styles and it's hard to tell what the differences are from
side-by-side inspections.
* In at least some cases, all browsers match ES and none match the
spec -- see &lt;<A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=12296#c4">http://www.w3.org/Bugs/Public/show_bug.cgi?id=12296#c4</A>&gt;.
* Browsers will have to maintain the ES algorithms as well as the HTML
algorithms, so even if the HTML algorithms are superior, it doesn't
save anyone the effort of understanding or implementing the ES
algorithms.

So I think HTML should just defer to ES here.  Hixie disagrees, and
has resolved both bugs twice now, so I'm not going to reopen them
myself at this point.  However, I'd like to hear from implementers
whether they're willing to implement the spec as it stands, or whether
they want the spec algorithms to be identical to ES's algorithms.
</PRE>

















































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075063.html">[whatwg] input type=barcode?
</A></li>
	<LI>Next message: <A HREF="075088.html">[whatwg] Discrepancies between HTML and ES rules for parsing an integer or float
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32792">[ date ]</a>
              <a href="thread.html#32792">[ thread ]</a>
              <a href="subject.html#32792">[ subject ]</a>
              <a href="author.html#32792">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
