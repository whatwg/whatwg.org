<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas 2d Proposal - Adding float TextMetrics baseline
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%202d%20Proposal%20-%20Adding%20float%20TextMetrics%20baseline&In-Reply-To=%3C4E4DBC8E.5030306%40jumis.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075228.html">
   <LINK REL="Next"  HREF="032961.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas 2d Proposal - Adding float TextMetrics baseline</H1>
<!--htdig_noindex-->
    <B>Charles Pritchard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%202d%20Proposal%20-%20Adding%20float%20TextMetrics%20baseline&In-Reply-To=%3C4E4DBC8E.5030306%40jumis.com%3E"
       TITLE="[whatwg] Canvas 2d Proposal - Adding float TextMetrics baseline">chuck at jumis.com
       </A><BR>
    <I>Thu Aug 18 18:29:50 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="075228.html">[whatwg] Allowing Clickjacking Prevention using a Minimal Javascript API
</A></li>
        <LI>Next message: <A HREF="032961.html">[whatwg] Problem with the blog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32958">[ date ]</a>
              <a href="thread.html#32958">[ thread ]</a>
              <a href="subject.html#32958">[ subject ]</a>
              <a href="author.html#32958">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Following is a change proposal for the canvas 2d spec, adding an 
additional floating point attribute to TextMetrics, the object returned 
by measureText.

In my work on decorative text, we have had to get the current baseline 
through doing css measurements. By setting the baseline of a div tag, 
and measuring the changes in css values, we are able to get the values 
for all of the baselines. It's a work-around.

This is something I prepared, to try to get an additional result in 
measureText.

example:
var textMetrics = ctx.measureText('test');
Result (example numbers):
textMetrics = { width: 40, baseline: 10 }

This change proposal is part of an effort of improving the usability of 
the canvas tag.

The *measureText()* method takes one argument, /text/. When the method 
is invoked, the user agent must replace all the space characters in 
/text/ with U+0020 SPACE characters, and then must form a hypothetical 
infinitely wide CSS line box containing a single inline box containing 
the text /text/, with all the properties at their initial values except 
the 'font' property of the inline element set to the current font of the 
context, as given by the _font_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-context-2d-font">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-context-2d-font</A>&gt; attribute, 
and must then return a new _TextMetrics_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#textmetrics">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#textmetrics</A>&gt; object 
with its _width_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-textmetrics-width">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-textmetrics-width</A>&gt; attribute 
set to the width of that inline box, in CSS pixels and its _baseline_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-textmetrics-baseline">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-textmetrics-baseline</A>&gt; attribute 
set to the /anchor point/'s vertical position as determined by the 
current _textBaseline_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-context-2d-textbaseline">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-context-2d-textbaseline</A>&gt; value, 
in CSS pixels. _[CSS]_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#refsCSS">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#refsCSS</A>&gt; 


The _TextMetrics_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#textmetrics">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#textmetrics</A>&gt; interface 
is used for the objects returned from _measureText()_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-context-2d-measuretext">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-context-2d-measuretext</A>&gt;. 
It has two attributes, *width* and *baseline*, which are set by the 
_measureText()_ 
&lt;<A HREF="file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-context-2d-measuretext">file:///private/var/folders/W6/W6JvvNbZE3m-nm24bFZ2rE+++TI/-Tmp-/TemporaryItems/canvasissue131.html#dom-context-2d-measuretext</A>&gt; method. 


</PRE>

















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075228.html">[whatwg] Allowing Clickjacking Prevention using a Minimal Javascript API
</A></li>
	<LI>Next message: <A HREF="032961.html">[whatwg] Problem with the blog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32958">[ date ]</a>
              <a href="thread.html#32958">[ thread ]</a>
              <a href="subject.html#32958">[ subject ]</a>
              <a href="author.html#32958">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
