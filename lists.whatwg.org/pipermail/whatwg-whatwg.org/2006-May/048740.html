<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Mathematics on HTML5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mathematics%20on%20HTML5&In-Reply-To=%3C010DDC23-5A4C-4272-A107-372A89655E83%40iki.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048738.html">
   <LINK REL="Next"  HREF="048742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Mathematics on HTML5</H1>
<!--htdig_noindex-->
    <B>Henri Sivonen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mathematics%20on%20HTML5&In-Reply-To=%3C010DDC23-5A4C-4272-A107-372A89655E83%40iki.fi%3E"
       TITLE="[whatwg] Mathematics on HTML5">hsivonen at iki.fi
       </A><BR>
    <I>Mon May 29 13:57:15 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="048738.html">[whatwg] Mathematics on HTML5
</A></li>
        <LI>Next message: <A HREF="048742.html">[whatwg] Mathematics on HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48740">[ date ]</a>
              <a href="thread.html#48740">[ thread ]</a>
              <a href="subject.html#48740">[ subject ]</a>
              <a href="author.html#48740">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>First of all, I am not saying that MathML is great. However, when  
someone proposes replacing a language with another one in the context  
of the Web where there are strong network effects and formats cannot  
be considered on their intrinsic technical merits alone, I think the  
burden of proof is very much on the one proposing a new format.

 From time to time people vent their frustration with a particular  
language by proposing abandoning a language for something supposedly  
better in a one-off message to a list. Your message seemed to start  
in the rant mode, hence my dismissive tone. Sorry.

On May 27, 2006, at 20:10, &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">juanrgonzaleza at canonicalscience.com</A>&gt; wrote:

&gt;<i> Henri Sivonen &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hsivonen at iki.fi</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Math even more than schemas or vector graphics needs to have an XML
</I>&gt;&gt;<i> syntax, because math needs to integrate in prose on a more profound
</I>&gt;&gt;<i> level than e.g. replaced elements would allow.
</I>&gt;<i>
</I>&gt;<i> I do not agree; the current MathML is not really integrated with  
</I>&gt;<i> XHTML.
</I>
I said that math needs to integrate with the surrounding prose. I did  
not say that MathML is integrated right. The point was mainly that  
there needs to be an XML syntax rendered by the same engine as the  
prose--or at minimum the renderers need to communicate the baseline  
and line breaking--and rendering math as a replaced element (possibly  
using a totally non-XML syntax) is not good enough.

&gt;<i> Similar thoughts when one decides
</I>&gt;<i> reusing old but effective HTML &lt;table&gt; element instead of adding new
</I>&gt;<i> redundant ones: &lt;mtable&gt;, &lt;mtr&gt;, and &lt;mtd&gt;.
</I>
Unfortunately, HTML tables carry a parsing legacy that makes them  
problematic in text/html inline content. (And matrices in math need  
to occur in inline content.)

&gt;&gt;<i> gzip
</I>&gt;<i>
</I>&gt;<i> 1) First I would note that I was not talking of verbosity of XML  
</I>&gt;<i> end tags
</I>&gt;<i> or similar, but of the inefficient markup model specific to MathML.  
</I>&gt;<i> Have
</I>&gt;<i> you tried to encode E=mc2 in full parallel MathML? And what about fine
</I>&gt;<i> parallel markup?
</I>
I haven't. I decided long ago that I don't want to write MathML by hand.

&gt;<i> 2) It does no sense to offer people gzip archives of online  
</I>&gt;<i> documents for
</I>&gt;<i> downloading and reading off-line!
</I>
Gzip is built into HTTP.

Very often when people complain about the size of something, enabling  
compression on the HTTP level works just fine and is non-disruptive.  
That's why it should always be considered before more drastic measures.

&gt;<i> The w3c has done a big effort on providing us lightweight rational
</I>&gt;<i> alternatives to old insane approaches. A typical example is the  
</I>&gt;<i> usage of a
</I>&gt;<i> simple CSS external document for all your HTML documents instead of
</I>&gt;<i> repetitive encoding of font style in each paragraph of each document.
</I>&gt;<i> MathML just break this tendency providing one of most ultraverbose and
</I>&gt;<i> redundant encodings I have seen in my life.
</I>
The W3C's track record with CSS, PNG and XML 1.0 does not necessarily  
generalize to other specs. :-(

&gt;<i> The code in a MathML fashion would be typed like
</I>&gt;<i>
</I>&gt;<i> &lt;mp&gt;&lt;mr&gt;This&lt;/mr&gt; &lt;mr&gt;is&lt;/mr&gt; &lt;mr&gt;an&lt;/mr&gt; &lt;mi&gt;important&lt;/mi&gt;
</I>&gt;<i> &lt;mr&gt;text&lt;/mr&gt;&lt;/mp&gt;
</I>
I see your point.

&gt;<i> However, since presentational markup is not likely, above &lt;i&gt; is  
</I>&gt;<i> better
</I>&gt;<i> encoded as &lt;em&gt; in HTML. Next &lt;em&gt; is already rendered as italics by
</I>&gt;<i> default but I can change rendering via i) CSS in the head of  
</I>&gt;<i> document ii)
</I>&gt;<i> external CSS is used by several documents at once iii) Special CSS  
</I>&gt;<i> rule
</I>&gt;<i> add via style attribute
</I>
(You can change the presentation of &lt;i&gt; in the exact same way.)

&gt;<i> 4) Still using gzip other approaches are less expensive in both  
</I>&gt;<i> disk and
</I>&gt;<i> bandwidth.
</I>
Perhaps, but with torrented videos and spam using up Internet  
bandwidth, I don't think that alone is good enough a reason to revamp  
markup.

&gt;&gt;<i> How is MathML not compatible with the DOM?
</I>&gt;<i>
</I>&gt;<i> Introducing specific DOM model does implementation in browsers mainly
</I>&gt;<i> impossible. MathML is not integrable with rest of browsers  
</I>&gt;<i> technologies as
</I>&gt;<i> DOM, CSS, and WS model.
</I>
WS? Web Services? How is that relevant?

&gt;<i> There is a lot of technical details in Opera browser developers  
</I>&gt;<i> site on
</I>&gt;<i> why they rejected *native* MathML support.
</I>
Could you cite an URL, please? I searched and I found a discussion  
where the XML-MAIDEN guy was against MathML in Opera and two Opera  
employees (Moose and csant) were in favor.

<A HREF="http://my.opera.com/community/forums/topic.dml?id=36775">http://my.opera.com/community/forums/topic.dml?id=36775</A>

&gt;&gt;&gt;<i> Well MathML is not really based in those. But we can render math  
</I>&gt;&gt;&gt;<i> using
</I>&gt;&gt;&gt;<i> just HTML, and CSS, and we can use JS and DOM in the same way  
</I>&gt;&gt;&gt;<i> we   use
</I>&gt;&gt;&gt;<i> in
</I>&gt;&gt;&gt;<i> HTML or CSS for text. Look XML-MAIDEN
</I>&gt;&gt;&gt;<i> [<A HREF="http://www.geocities.com/csssite/index.xml">http://www.geocities.com/csssite/index.xml</A>] for ideas, samples,  
</I>&gt;&gt;&gt;<i> etc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Interesting. However, the results have the look and feel of a
</I>&gt;&gt;<i> afterthought math editor for a word processor rather than the  
</I>&gt;&gt;<i> look   and
</I>&gt;&gt;<i> feel of pdfLaTeX output.
</I>
I admit I did not properly appreciate the page. I guess my bogometer  
was fooled by the domain name, a demo link leading to a Yahoo! error  
page and the mention of DTDs.

Now that I took a closer look, it appears that the spec is hidden in  
comments in DTDs. XML-MAIDEN could really use a proper spec.

&gt;<i> The look and feel are better that with MathML.
</I>
I disagree. And I am on a Mac here and MathML rendering in the Mac  
builds of Gecko is known to suck.

&gt;<i> Moreover, the MAIDEN markup can be transformed to TeX for printing  
</I>&gt;<i> via TeX
</I>&gt;<i> engines whereas better CSS-based printed engines are not ready.
</I>
I found the XSLT program but are there examples of results on the Web?

&gt;<i> Do not forget that those articles are generated with a couple of  
</I>&gt;<i> simple
</I>&gt;<i> CSS 2.1 rules *without* font metrics information
</I>
I think that's a bug rather than a feature. The layout should not  
require a particular font, but the math layout engine should make  
good use of font metrics at the client.

&gt;<i> Fine tuning in the web can be achieved complementing the generic
</I>&gt;<i> XML-MAIDEN stylesheet with more rules for special cases or with fine
</I>&gt;<i> tuning CSS rules directly inserted in the document.
</I>
I thought one shouldn't have to tweak CSS to get math to render  
properly. By default, the authoring experience should be on a similar  
level of &quot;just works&quot; as LaTeX with the default templates.

&gt;<i> It is not difficult to achieve TeX output quality when using font  
</I>&gt;<i> metrics.
</I>
Any demos of that?

There are many programs out there that have access to font metrics  
and still get nowhere near TeX.

&gt;<i> And, of course, it is close to impossibility that you can provide a  
</I>&gt;<i> TeX
</I>&gt;<i> engine for the web
</I>
IIRC, IBM tried, though.

&gt;&gt;&gt;<i> One of problems
</I>&gt;&gt;&gt;<i> with this approach is that once new STIX fonts available I can use
</I>&gt;&gt;&gt;<i> them in
</I>&gt;&gt;&gt;<i> HTML, also in CSS rendering of math, but I cannot use them in  
</I>&gt;&gt;&gt;<i> firefox,
</I>&gt;&gt;&gt;<i> since MathML module would be rewritten, and the full engine
</I>&gt;&gt;&gt;<i> recompiled,
</I>&gt;&gt;&gt;<i> obligating to users to download and install new versions of browser
</I>&gt;&gt;&gt;<i> for
</I>&gt;&gt;&gt;<i> new fonts!!!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The PUA mapping is indeed a problem. If you want to see a change    
</I>&gt;&gt;<i> here,
</I>&gt;&gt;<i> I suggest creating an OpenType font that uses the Type 1
</I>&gt;&gt;<i> outlines from the YandY version of Computer Modern and has proper
</I>&gt;&gt;<i> Unicode mappings.
</I>&gt;<i>
</I>&gt;<i> I prefer to follow usual web design guidelines providing rendering  
</I>&gt;<i> engines
</I>&gt;<i> and technologies were independent of the fonts installed at the client
</I>&gt;<i> side.
</I>
That was not the point.

The point is that there's an incentive to build custom support for  
particular legacy fonts, because properly encoded TrueType or  
OpenType fonts are missing. To bootstrap an ecosystem of properly  
encoded fonts, the obvious course of action is repackaging the  
outlines from the legacy fonts. That would remove the incentive to  
build custom code.

&gt;&gt;&gt;<i> 4) The default printing of MathML is not good and people is
</I>&gt;&gt;&gt;<i> returning to
</I>&gt;&gt;&gt;<i> TeX for that!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In general, Knuth was over 20 years ahead of everyone else. CSS-based
</I>&gt;&gt;<i> typesetters are still catching up with TeX on some things. (And the
</I>&gt;&gt;<i> bar is pretty high.)
</I>&gt;<i>
</I>&gt;<i> No. It is relatively trivial to provide TeX quality in different  
</I>&gt;<i> markups
</I>&gt;<i> when one knows font metrics.
</I>
Where's the demo? Why do most math renderers suck if it is trivial to  
get right?

&gt;<i> In fact, one can see several authors providing TeX quality with SVG  
</I>&gt;<i> and
</I>&gt;<i> even with HTML approaches when font metrics are known.
</I>
Could you cite URLs, please? How were those documents produced? Was  
there some kind of LaTeX-&gt;pdfLaTeX-&gt;PDF-&gt;pdf2svg-&gt;SVG pipeline involved?

&gt;<i> The really difficult problem is to provide good typesetting quality
</I>&gt;<i> without rely on specific fonts; Knuth has not solved this still ;-)
</I>
One can change fonts in TeX. The problem is that CM is hard to beat  
in consistent glyph coverage.

&gt;<i> HTML Math could be incorporated in a few days because it an  
</I>&gt;<i> incremental
</I>&gt;<i> implementation.
</I>
Presumably, if it is so easy, in a few days we can download your  
custom build of Gecko or WebCore that implements a prototype, right?

&gt;&gt;&gt;<i> 5) Accessibility is very deficient
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A different syntax won't help. Implementations of accessibility tools
</I>&gt;&gt;<i> will.
</I>&gt;<i>
</I>&gt;<i> False. Alternative syntaxes for mathematics already proposed are more
</I>&gt;<i> accessible than MathML by several technical motives.
</I>
Do you mean &quot;Are more accessible with existing tools.&quot; or &quot;Would  
theoretically be more amenable to accessibility tools that have not  
yet been developed.&quot;?

&gt;<i> Ambiguous rendering are absent when one uses old GIF model + ALT.
</I>
Assuming that whoever produced the page bothered to provide  
alternative text.

Some automated tools put LaTeX or Mathematica source there, which may  
be quite reasonable both for copying into those tools and for human  
consumption. (I remember reading about a blind person who reads LaTeX  
source in Braille.)

&gt;&gt;&gt;<i> Moreover, the situation is still poor than that! Many sites claiming
</I>&gt;&gt;&gt;<i> theoretical accessibilities (e.g. Distler blog) are serving (ds) 
</I>&gt;&gt;&gt;<i> ^2 as
</I>&gt;&gt;&gt;<i> &lt;mi&gt;d&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;, i.e. 2s ds!!!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm pretty sure Distler doesn't claim his math to be accessible, and
</I>&gt;&gt;<i> I'm pretty sure he is quite aware of the paradox that AsTeR does not
</I>&gt;&gt;<i> support MathML even though its author was on the WG.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://golem.ph.utexas.edu/~distler/blog/archives/000199.html">http://golem.ph.utexas.edu/~distler/blog/archives/000199.html</A>
</I>&gt;<i>
</I>&gt;<i> Distler does lot of different claims. In the accessibility statement
</I>&gt;<i>
</I>&gt;<i> [<A HREF="http://golem.ph.utexas.edu/~distler/blog/accessibility.html">http://golem.ph.utexas.edu/~distler/blog/accessibility.html</A>]
</I>&gt;<i>
</I>&gt;<i> says
</I>&gt;<i>
</I>&gt;<i> &#8220;Equations are written in MathML 2.0.&#8221;
</I>
That's a statement of fact about what language is used. It is not an  
assertion about the accessibility properties of the language.

&gt;<i> And do not explain that accessibility of their self-proclaimed
</I>&gt;<i> ultra-advanced blog is poor that if had used old HTML + GIF + ALT  
</I>&gt;<i> model
</I>&gt;<i> (or using PDF or even LaTeX).
</I>
Chances are it would be more accessible with GIF + alt.

&gt;<i> Perfect p-MathML 2.0 code is not really accessible, but still poor,  
</I>&gt;<i> MathML
</I>&gt;<i> code is being served by Distler is structurally invalid and based in
</I>&gt;<i> tricks. For example, he is using &lt;mrow&gt; and tricky collections of
</I>&gt;<i> &lt;msubsup&gt; for simulation of tensors. He does not use invisible  
</I>&gt;<i> operators
</I>&gt;<i> introduced in MathML. He encodes prescripts as in TeX via empty groups
</I>&gt;<i> instead using &lt;prescript&gt; tag. This is odd!
</I>
Not odd really, considering that his MathML is programmatically  
generated from iTeX source.

&gt;<i> Accessibility of MathML is just a myth.
</I>
It is quite possible that it is inherently broken. I centainly  
believe that it is a myth right now.

&gt;&gt;&gt;<i> 7) The possibility for automated searches of math continues being
</I>&gt;&gt;&gt;<i> largely
</I>&gt;&gt;&gt;<i> a myth.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Many, many things related to searchability, internationalization and
</I>&gt;&gt;<i> accessibility are myths in the realm of semantic markup.
</I>&gt;<i>
</I>&gt;<i> Then this is argument for not usage of MathML in HTML 5, point.
</I>&gt;<i>
</I>&gt;<i> However, you just are systematically failing to understand main points
</I>&gt;<i> here. Take the case of searches.
</I>
I was not suggesting that MathML is really searchable. I was agreeing  
that there are myths in the area.

&gt;&gt;&gt;<i> 8) Visual rendering is not incremental as in CSS. This can offer us
</I>&gt;&gt;&gt;<i> problems with large documents or even with server failures. I find
</I>&gt;&gt;&gt;<i> just
</I>&gt;&gt;&gt;<i> curious the w3c emphasis on abandoning non incremental rendering of
</I>&gt;&gt;&gt;<i> old
</I>&gt;&gt;&gt;<i> HTML presentational table layout models in favour of CSS layouts,
</I>&gt;&gt;&gt;<i> whereas
</I>&gt;&gt;&gt;<i> forcing usage of a non incremental MathML presentational markup.  
</I>&gt;&gt;&gt;<i> Some
</I>&gt;&gt;&gt;<i> mathematical documents take order of 10 minutes before rendering in
</I>&gt;&gt;&gt;<i> Firefox.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is not a design problem with MathML. This is Mozilla bug #18333.
</I>&gt;<i>
</I>&gt;<i> Is _that_ bug related to the 10 minutes, to that MathML rendering  
</I>&gt;<i> is not
</I>&gt;<i> incremental when compared to a CSS solution, or what?
</I>
It is the bug related to the general lack of incrementality in XML  
rendering in Gecko. Designing languages around that bug is a *really*  
bad idea. Moreover, it is even worse to think that the bug is somehow  
inherent to MathML or XML. (Yes, people do entertain such ideas.)

&gt;<i> Precisely LaTeX substituted TeX presentational markup by default
</I>&gt;<i> stylesheets and macros with emphasis on content. You apparently  
</I>&gt;<i> misguided
</I>&gt;<i> the point that HTML was semantic markup, after transformed in
</I>&gt;<i> presentational markup by big developers (the nightmare of &lt;font&gt;) and
</I>&gt;<i> recently retransformed again in semantic markup with presentation best
</I>&gt;<i> done by CSS and elimination of &lt;font&gt; and family.
</I>
Formulae in LaTeX are still not guaranteed to be unambiguous enough  
(&quot;semantic&quot;) to be processed as math by an AI-incomplete symbolic  
math package. Mathematica, on the other hand, encodes data sufficient  
for unambiguous input for symbolic math manipulation.

Of course, what everyone would like is something that looks as good  
as LaTeX output but that can be pasted into Mathematica or Maple or  
somesuch and symbolically manipulated and evaluated. But that's a  
hard problem.

&gt;<i> Any other
</I>&gt;<i> alternative approach could be implemented in browsers in a few days,
</I>&gt;<i> because one can reuse working HTML, CSS, and DOM.
</I>
I look forward to your implementation.

&gt;&gt;&gt;<i> C) A more complete approach is providing a set of structural and/or
</I>&gt;&gt;&gt;<i> semantic tags for usage with HTML5.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Scope creep.
</I>&gt;<i>
</I>&gt;<i> ?????
</I>
Adding math to HTML5 would broaden the scope of HTML5. A broader  
scope translates to more editorial work and more implementation work.

&gt;<i> But again apple and oranges. I am explaining that one can provide a  
</I>&gt;<i> better
</I>&gt;<i> support for online mathematics than using presentation MathML just by
</I>&gt;<i> addition of a few tags to the future HTML. Your appeal to LaTeX  
</I>&gt;<i> appears a
</I>&gt;<i> bit off topic and in any case is not relevant for not considering my
</I>&gt;<i> proposal of avoiding MathML as mathematical markup.
</I>
I believe that &quot;a few tags&quot; are sufficient and that LaTeX provides  
too much when I see a working LaTeX to few-tags converter that can  
deal with the wide range of mathematics currently typeset using LaTeX.

-- 
Henri Sivonen
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hsivonen at iki.fi</A>
<A HREF="http://hsivonen.iki.fi/">http://hsivonen.iki.fi/</A>



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048738.html">[whatwg] Mathematics on HTML5
</A></li>
	<LI>Next message: <A HREF="048742.html">[whatwg] Mathematics on HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48740">[ date ]</a>
              <a href="thread.html#48740">[ thread ]</a>
              <a href="subject.html#48740">[ subject ]</a>
              <a href="author.html#48740">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
