<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Side effects free scripts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Side%20effects%20free%20scripts&In-Reply-To=%3Cop.tagdrp021h6og4%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006485.html">
   <LINK REL="Next"  HREF="006486.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Side effects free scripts</H1>
<!--htdig_noindex-->
    <B>Alexey Feldgendler</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Side%20effects%20free%20scripts&In-Reply-To=%3Cop.tagdrp021h6og4%40localhost%3E"
       TITLE="[whatwg] Side effects free scripts">alexey at feldgendler.ru
       </A><BR>
    <I>Wed May 31 23:03:15 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="006485.html">[whatwg] Side effects free scripts
</A></li>
        <LI>Next message: <A HREF="006486.html">[whatwg] Side effects free scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6488">[ date ]</a>
              <a href="thread.html#6488">[ thread ]</a>
              <a href="subject.html#6488">[ subject ]</a>
              <a href="author.html#6488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 01 Jun 2006 11:14:56 +0700, Andrew Fedoniouk &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">news at terrainformatica.com</A>&gt; wrote:

&gt;&gt;<i> There are software random number generators which gather entropy from
</I>&gt;&gt;<i> user's input (the timing between keypresses, for example). And there are
</I>&gt;&gt;<i> hardware random nubmer generators.
</I>
&gt;<i> How &quot;gather entropy from user's input&quot; is related to the Math.random() as it
</I>&gt;<i> is declared in ECMAScript?
</I>
The generic definition of Math.random() doesn't imply any side effects (but doesn't guarantee there aren't any). That's my point.

&gt;<i> &quot;Given a description of a program and its initial input,
</I>&gt;<i> determine whether the program, when executed on this input,
</I>&gt;<i> ever halts (completes).  The alternative is that it runs forever
</I>&gt;<i> without halting. &quot;
</I>
Solving the termination problem is not the point here. Whether a script has side effects or not is one property, and whether it always terminates is another property. This thread is about the former. Scripts that don't terminate can be bad for security, too, but they should be dealt with by imposing an execution time limit, and this is not relevant here.

&gt;&gt;<i> Whether Math.random() should be considered safe for side effects free
</I>&gt;&gt;<i> scripts or not is an arguable question. There is no danger in allowing
</I>&gt;&gt;<i> Math.random() in CSS expression() from the security standpoint. But at the
</I>&gt;&gt;<i> same time allowing Math.random() means that it's possible that the script
</I>&gt;&gt;<i> returns different values each time invoked, which makes the life of the
</I>&gt;&gt;<i> layout engine harder.
</I>
&gt;<i> Even worse: if you have some third party code between Math.random()
</I>&gt;<i> invocations in your code then you may get the same number each time.
</I>
To guarantee the same result each time is another requirement, and it's not necessary to fulfil it. In the end, right now there are no guarantees about the scripts, and wouldn't it be better if it could be guaranteed that a CSS expresssion() doesn't steal cookies at least?

&gt;<i> The only feasible solution when you can guarantee something is to run
</I>&gt;<i> scripts in sandbox but this involves creation of brand new scripting VM
</I>&gt;<i> (memory space, set of globals, etc.) each time you need to evaluate formula.
</I>&gt;<i> This is the whole point of script security.
</I>
I can guarantee that a script doesn't steal cookies if it's forced to be side effects free according to my definition. There's no other thing that I'm trying to guarantee by this security measure.

&gt;<i> What is the purpose of the expression() there, btw? :)
</I>
The purpose of expression(), as implemented by IE, is to allow authors to provide procedural implementation of the layout logic that the browser's layout engine lacks. A simple example would be painting odd rows of a table in one color and the even rows in another. Or highlighting cells which contain negative values. Of course, those things that can be expressed declaratively using CSS should be expressed as such, but there will always be use cases beyound the current CSS. I think that declaring alternating row colors with expression() is better than assigning them alternating classes because these classes would be just &quot;hooks&quot; for CSS, having no semantic value. And it plays better with dynamic tables which allow rows to be inserted and removed.

I think that CSS expression() is a good thing, and I would really love it to be standardized. But as it's implemented in IE today, it's insecure. My proposal would allow to make it safe enough.


-- 
Alexey Feldgendler &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">alexey at feldgendler.ru</A>&gt;
[ICQ: 115226275] <A HREF="http://feldgendler.livejournal.com">http://feldgendler.livejournal.com</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006485.html">[whatwg] Side effects free scripts
</A></li>
	<LI>Next message: <A HREF="006486.html">[whatwg] Side effects free scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6488">[ date ]</a>
              <a href="thread.html#6488">[ thread ]</a>
              <a href="subject.html#6488">[ subject ]</a>
              <a href="author.html#6488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
