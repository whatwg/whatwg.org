<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Mathematics on HTML5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mathematics%20on%20HTML5&In-Reply-To=%3C3485.217.124.69.226.1148651921.squirrel%40webmail.canonicalscience.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006451.html">
   <LINK REL="Next"  HREF="006450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Mathematics on HTML5</H1>
<!--htdig_noindex-->
    <B>juanrgonzaleza at canonicalscience.com</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mathematics%20on%20HTML5&In-Reply-To=%3C3485.217.124.69.226.1148651921.squirrel%40webmail.canonicalscience.com%3E"
       TITLE="[whatwg] Mathematics on HTML5">juanrgonzaleza at canonicalscience.com
       </A><BR>
    <I>Fri May 26 06:58:41 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="006451.html">[whatwg] Audio(): loop() with 0 or negative value as argument
</A></li>
        <LI>Next message: <A HREF="006450.html">[whatwg] Mathematics on HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6449">[ date ]</a>
              <a href="thread.html#6449">[ thread ]</a>
              <a href="subject.html#6449">[ subject ]</a>
              <a href="author.html#6449">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
I have read with great interest this program and I would recommend
reconsideration of the role of mathematical markup in HTML5. But I would
first explain a my position. Initially, I began believing that web
authoring was &quot;save as&quot; command in Mword. Next I begin to work with a real
HTML tool and discovered the XML world just next. Then I, seeing all hype
around the new exciting technology, decided to generate a pure XML
website: XHTML for text, CML for chemistry, MathML for maths, SVG for
graphics, XSLT for programming, XSL-FO for style...

Big mistake! Moreover due to difficulties on implementation of young
technologies, cross-browser (in)compatibility and so on I focused on
XHTML+MathML and used CSS as a first styling language (because browsers do
not support FO today I said). More errors! After I learned DOM and
JavaScript because something so simple as a drop-down menu cannot be done
in XSLT (it is not for dynamical pages).

Now I learned XSL-FO and even if tomorrow was implemented in browser I
would *not* use FO. It is ugly and inefficient! Similar thoughts about
SVG. I proved and quickly abandoned. I see with terror how people has been
criticizing &quot;old&quot; table-layout gigantic pages filled with presentational
&lt;center&gt;, &lt;b&gt;, and &lt;font&gt; whereas now it is &quot;in&quot; to server to clients a
giant SVG archive with lot of presentational tags simulating tables,
paragraphs...

More headaches became from the XHTML part, specially incompatibilities
with browsers and search engines, the nightmare of MIMEs, and others.
Finally I abandoned...

But biggest error was try to use MathML. MathML is full of incorrect
design options and technical holes! Even some MathML author recognizes
that content MathML was not &quot;well thought&quot; due to lack of agreement on the
committee.

The failure of HTML math was not because lack of interest in mathematics
or because HTML cannot represent math. The failure was because design of
HTML-Math was able to join the poor of TeX with the poor of SGML being
unusually rejected. The W3c did a poor work with HTML-Math and also with
MathML 1.x and last 2.0.


**************************
Some problems with MathML:

1) Insanely complicated and inefficient. In some cases, I have computed 15
times more bandwidth and server storage when using MathML than
alternatives.

2) Not fully compatible with other basic technologies such as CSS and DOM.
I find interesting that just after ten years and many specifications the
MathML WG begins to ask what would be changed in MathML for CSS friendly!
Also the MathML WG has clearly stated that no backward incompatible
changes will be done to future MathML 3.0. End of history.

Position paper for HTML 5 says

&lt;blockquote&gt;
Web application technologies should be based on technologies authors are
familiar with, including HTML, CSS, DOM, and JavaScript.
&lt;/blockquote&gt;

Well MathML is not really based in those. But we can render math using
just HTML, and CSS, and we can use JS and DOM in the same way we use in
HTML or CSS for text. Look XML-MAIDEN
[<A HREF="http://www.geocities.com/csssite/index.xml]">http://www.geocities.com/csssite/index.xml]</A> for ideas, samples, etc.

And adds:

&lt;blockquote&gt;
Basic Web application features should be implementable using behaviors,
scripting, and style sheets in IE6 today so that authors have a clear
migration path. Any solution that cannot be used with the current
high-market-share user agent without the need for binary plug-ins is
highly unlikely to be successful.
&lt;/blockquote&gt;

Well precisely MathML violates that. George is preparing a cross-browser
CSS also working in MSIE. MSIE does not provide native support for MathML
because difficulties for unification with rest of DOM and rendering
engines; they prefer external plug in, somewhat as Opera browser
developers rejected native support for MathML before break the browser,
whereas Firefox uses an external module built-in by similar motives.

The points &quot;Users should not be exposed to authoring errors&quot; and
&quot;Device-specific profiling should be avoided&quot; are also violated by MathML.
For example, rendering of MathML in Firefox is based in specific fonts may
be downloaded and installed. This has been disapproved. One of problems
with this approach is that once new STIX fonts available I can use them in
HTML, also in CSS rendering of math, but I cannot use them in firefox,
since MathML module would be rewritten, and the full engine recompiled,
obligating to users to download and install new versions of browser for
new fonts!!!

3) Incompatible with other markup models. For example, superindices are
encoded in different ways in XHTML that in MathML, you would use style=&quot;&quot;
attribute for changing font or colour of a token in XHTML but may use the
&lt;mstyle&gt; tag in MathML, etc. In XML-MAIDEN you use &lt;sub&gt; and &lt;sup&gt; and
style=&quot;&quot; in the same way that in HTML.

4) The default printing of MathML is not good and people is returning to
TeX for that!

5) Accessibility is very deficient in most of cases because people is not
using invisible operators not the correct number of &lt;mrow&gt;.

Accessibility is better with the old HTML+GIF+ALT models! Aural renderers
of HTML could be easily adapted to HTML math. Only content MathML 2.0 is
designed for accessibility (in theory) but support in current browsers is
zero.

Moreover, the situation is still poor than that! Many sites claiming
theoretical accessibilities (e.g. Distler blog) are serving (ds)^2 as
&lt;mi&gt;d&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;, i.e. 2s ds!!!

6) There are problems with default rendering of entities and with usage of
invisible operators. Accessible code render ugly in screen whereas
visually correct code being inaccessible. This could be corrected with
HTML math and proper usage of CSS for selecting rendering (e.g. italic vs.
roman).

Take the case of x = 10 m. In HTML I could use &lt;var&gt;x&lt;/var&gt; = 10 m or even
some &lt;span class=&quot;unit&quot;&gt;m&lt;/span&gt; (which is a similar approach to other
Markup models for scientific units as STMML) and I could add CSS rules if
needed. How this is encoded in MathML? The w3c technical note on units
says

&lt;blockquote&gt;
Unit symbols are written in roman (upright) type, are not altered in the
plural, are not followed by a period except at the end of a sentence, and
no space is left between a prefix and a unit symbol. This is accomplished
in MathML by using the mi element. Single character symbols must be
qualified by setting the mathvariant attribute to normal as otherwise they
would be italicized. For example,

&lt;mi mathvariant='normal'&gt;m&lt;/mi&gt;
&lt;/blockquote&gt;

Yes, I find so odd the usage of mathvariant as you guys find usage of a
hypothetical

&lt;span textvariant='italic'&gt;x&lt;/span&gt; instead of &lt;var&gt;x&lt;/var&gt;.

7) The possibility for automated searches of math continues being largely
a myth. I can search E=mc2 in Google today when formula is encoded in HTML
4 and it works reasonably well, but how would I search the formula in a
MathML search engine?

&lt;mi&gt;E&lt;/mi&gt;
&lt;mo&gt;=&lt;/mo&gt;
&lt;msup&gt;
&lt;mrow&gt;
&lt;mi&gt;m&lt;/mi&gt;
&lt;mi&gt;c&lt;/mi&gt;
&lt;/mrow&gt;
&lt;mn&gt;2&lt;/mn&gt;
&lt;/msup&gt;

or maybe

&lt;mi&gt;E&lt;/mi&gt;
&lt;mo&gt;=&lt;/mo&gt;
&lt;mrow&gt;
&lt;mi&gt;m&lt;/mi&gt;
&lt;msup&gt;
&lt;mi&gt;c&lt;/mi&gt;
&lt;mn&gt;2&lt;/mn&gt;
&lt;/msup&gt;
&lt;/mrow&gt;

or maybe

&lt;mrow&gt;
&lt;mi&gt;E&lt;/mi&gt;
&lt;mo&gt;=&lt;/mo&gt;
&lt;mrow&gt;
&lt;mi&gt;m&lt;/mi&gt;
&lt;mo&gt;&amp;InvisibleTimes;&lt;/mo&gt;
&lt;msup&gt;
&lt;mi&gt;c&lt;/mi&gt;
&lt;mn&gt;2&lt;/mn&gt;
&lt;/msup&gt;
&lt;/mrow&gt;
&lt;/mrow&gt;

or maybe

&lt;mi&gt;E&lt;/mi&gt;
&lt;mo&gt;=&lt;/mo&gt;
&lt;mi&gt;m&lt;/mi&gt;
&lt;msup&gt;
&lt;mi&gt;c&lt;/mi&gt;
&lt;mn&gt;2&lt;/mn&gt;
&lt;/msup&gt;

or maybe

&lt;mi&gt;E&lt;/mi&gt;
&lt;mo&gt;=&lt;/mo&gt;
&lt;mi&gt;m&lt;/mi&gt;
&lt;mi&gt;c&lt;/mi&gt;
&lt;msup&gt;
&lt;mrow/&gt;
&lt;mn&gt;2&lt;/mn&gt;
&lt;/msup&gt;

or maybe

&lt;mi&gt;E&lt;/mi&gt;
&lt;mo&gt;=&lt;/mo&gt;
&lt;msup&gt;
&lt;mi&gt;mc&lt;/mi&gt;
&lt;mn&gt;2&lt;/mn&gt;
&lt;/msup&gt;

or maybe

&lt;mi&gt;E&lt;/mi&gt;
&lt;mo&gt;=&lt;/mo&gt;
&lt;mi&gt;m&lt;/mi&gt;
&lt;msup&gt;
&lt;mrow&gt;
&lt;mi&gt;c&lt;/mi&gt;
&lt;/mrow&gt;
&lt;mn&gt;2&lt;/mn&gt;
&lt;/msup&gt;

...

I have seen almost all of these codes being generated by real presentation
MathML tools. And note it is a simple E=mc2!!

8) Visual rendering is not incremental as in CSS. This can offer us
problems with large documents or even with server failures. I find just
curious the w3c emphasis on abandoning non incremental rendering of old
HTML presentational table layout models in favour of CSS layouts, whereas
forcing usage of a non incremental MathML presentational markup. Some
mathematical documents take order of 10 minutes before rendering in
Firefox.

9) MathML rendering does not fit with user preferences as CSS does.

10) Advantages of being using a &quot;standard&quot; vanish when one observes the
infinite malleability of mathml code. For example people is simulating
tensors with nested msup, msub, msubsup, and tricky mrows, instead using
&lt;multiscript&gt; and &lt;none/&gt;. Then hypothetical standardization advantages
are lost.

In HTML math one would reuse &lt;sup&gt; and &lt;sub&gt; and maybe some other tag for
a full representation of *any* tensorial structure.

11) p-MathML is not good enough for rendering math in browsers. Luca
Padovani writes,

&lt;blockquote&gt;
A quick analysis of the MathML markup reveals that there is no way to
preserve the structure of the formula and still have a &quot;correct&quot; rendering
at the same time.
&lt;/blockquote&gt;

12) The use of presentational markup is contrary to common sense. I write
&lt;H1&gt; in HTML and next I said one -and only once- in a CSS how the heading
may be rendered in my doc. That CSS, when stored externally, can be called
by billions of others HTML docs. In MathML you are forced to repeat
presentation in each formula in each document, to use mstyle...

The use of a presentational language for mathematics remember me the old
days of the &lt;font&gt;, &lt;b&gt;, &lt;i&gt;, &lt;center&gt; tags. Little impact of MathML in
the web remind me the failure of XSL-FO to conquer the web. Instead
specific presentation MathML markup complemented with lot of &lt;mstyle&gt; tags
I would prefer semantic or structural markup.

Here there is a kind of general confusion. MathML authors believe that

&lt;apply&gt;&lt;divide/&gt;&lt;ci&gt;b&lt;/ci&gt;&lt;cn&gt;2&lt;/cn&gt;&lt;/apply&gt;

may be the only way to content oriented -note that really we are encoding
&lt;divide&gt;&lt;/divide&gt; as first child-. Whereas

&lt;mfrac&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;

is presentational MathML. However, one could copy the standard ISO 12083
and write

&lt;frac&gt;&lt;num&gt;b&lt;/num&gt;&lt;den&gt;2&lt;/den&gt;&lt;/frac&gt;

this is not presentational markup. It is structural. You are encoding
fraction and its structural elements numerator and denominator. This is
similar to splitting of html documents into structural &lt;head&gt; and &lt;body&gt;.
Next structural elements &lt;frac&gt;, &lt;num&gt;, and &lt;den&gt; are rendered via CSS
rules. Modifying CSS rules you modify the presentation (heights, line
style, font sizes, colours, etcetera), somewhat as you modify the
presentation of headings in the same way.

**************************************
Proposals (from less to more radical):

A) Eliminate next text from specification

&quot;Authors are encouraged to use MathML for marking up mathematics&quot;

because authors would use more concise powerful and solid markup for
mathematics.

B) Add special math attribute can be used in structural markup. For
example math=&quot;num&quot; would be equivalent to class=&quot;num&quot;, but using math=
specific attribute. You can also use the class attribute for other tasks.
This could be solved if space attributes (2.2.7) are implemented.

C) A more complete approach is providing a set of structural and/or
semantic tags for usage with HTML5.

This would close the cycle when HTML was designed as a small,
light-weight, non-proprietary, easy-to-use document format designed for
the publication and distribution of scientific documents

One needs little tags, because &lt;sub&gt;, &lt;sup&gt;, &lt;var&gt; and &lt;table&gt; can be
reused. The number of new tags and usage would be debated considering
different proposals available (XML-MAIDEN, ISO 12083...) but here some
illustrative examples: &lt;math&gt;, &lt;frac&gt;, &lt;num&gt;, &lt;den&gt;, &lt;root&gt;, &lt;scripts&gt; and
maybe two or three more tags would be sufficient.

Note that &lt;frac&gt; can be reused in text for introducing inline fractions
usually simulated as &lt;sup&gt;2&lt;/sup&gt;/&lt;sub&gt;5&lt;/sub&gt;. Note that &lt;scripts&gt; could
be used in text mode for typography (composed diacritics for example).

Implementation would be cheap because the model is backward compatible
with existing CSS, HTML, and DOM technologies. Moreover, visual rendering
is almost solved and one would simply implement some of available CSS
(e.g. George one) by default in browsers (somewhat as &lt;h1&gt; are already
rendered by default).


Juan R.

Center for CANONICAL |SCIENCE)



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006451.html">[whatwg] Audio(): loop() with 0 or negative value as argument
</A></li>
	<LI>Next message: <A HREF="006450.html">[whatwg] Mathematics on HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6449">[ date ]</a>
              <a href="thread.html#6449">[ thread ]</a>
              <a href="subject.html#6449">[ subject ]</a>
              <a href="author.html#6449">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
