<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Simplified &lt;picture&gt; element draft
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Simplified%20%3Cpicture%3E%20element%20draft&In-Reply-To=%3CCACj%3DBEhis6mkPKJM%3DYvUDhMTBPRiP85JM1QmfQB9SCcqdUUmCw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084113.html">
   <LINK REL="Next"  HREF="084115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Simplified &lt;picture&gt; element draft</H1>
<!--htdig_noindex-->
    <B>Yoav Weiss</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Simplified%20%3Cpicture%3E%20element%20draft&In-Reply-To=%3CCACj%3DBEhis6mkPKJM%3DYvUDhMTBPRiP85JM1QmfQB9SCcqdUUmCw%40mail.gmail.com%3E"
       TITLE="[whatwg] Simplified &lt;picture&gt; element draft">yoav at yoav.ws
       </A><BR>
    <I>Mon Jan  6 09:42:31 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="084113.html">[whatwg] Simplified &lt;picture&gt; element draft
</A></li>
        <LI>Next message: <A HREF="084115.html">[whatwg] Simplified &lt;picture&gt; element draft
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84114">[ date ]</a>
              <a href="thread.html#84114">[ thread ]</a>
              <a href="subject.html#84114">[ subject ]</a>
              <a href="author.html#84114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Jan 4, 2014 at 10:19 PM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:

&gt;<i> On 1/4/14 3:16 PM, Yoav Weiss wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Thanks for the review. I'd like to better understand what would be
</I>&gt;&gt;<i> required
</I>&gt;&gt;<i> to implement off-the-main-thread MQ evaluation in Blink. Since it's a
</I>&gt;&gt;<i> Blink
</I>&gt;&gt;<i> specific discussion, I'll start a Blink-dev thread on the subject.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Note that Gecko has similar constraints here as far as I know, at the
</I>&gt;<i> moment.
</I>&gt;<i>
</I>&gt;<i>
</I>It should be noted that the picture spec does not require media query
evaluation *inside* the preloader. For example, the way I
prototyped&lt;<A HREF="https://codereview.chromium.org/14449003/">https://codereview.chromium.org/14449003/</A>&gt;a previous
incarnation of the spec's selection algorithm in Blink's
HTMLPreloadScanner, is by sending the `media` attribute to the main thread
along with the URL, and run the evaluation there.
While current picture, with its `sizes` attribute, will require a somewhat
different mechanism, a similar method can be used.

I don't know much about Gecko's implementation of the preloader, so I could
be wrong, but from looking at nsHtml5TreeOpExecutor, it seems like in Gecko
(similarly to current Blink) the preloader's products are sent to the main
thread before the actual resource loading takes place. If that is in fact
the case, picture's resource preloading could be implemented by passing the
`media` and `sizes` attributes to the main thread along with the URL, at
least as an initial implementation, until off-the-main-thread MQ evaluation
would be feasible.

Regarding the `sizes` attribute, Adam has pointed out on
blink-dev&lt;<A HREF="https://groups.google.com/a/chromium.org/d/msg/blink-dev/HJkM2ebPuX0/3hPQQ57TttcJ">https://groups.google.com/a/chromium.org/d/msg/blink-dev/HJkM2ebPuX0/3hPQQ57TttcJ</A>&gt;
that
its parsing would require heavier CSS parsing machinery than simple MQ
evaluation. I think that some aspects of it can be simplified at first
phase (e.g. the `calc()` requirement), to ease initial implementation, and
resolving the use cases, even if it's with somewhat less precision.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084113.html">[whatwg] Simplified &lt;picture&gt; element draft
</A></li>
	<LI>Next message: <A HREF="084115.html">[whatwg] Simplified &lt;picture&gt; element draft
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84114">[ date ]</a>
              <a href="thread.html#84114">[ thread ]</a>
              <a href="subject.html#84114">[ subject ]</a>
              <a href="author.html#84114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
