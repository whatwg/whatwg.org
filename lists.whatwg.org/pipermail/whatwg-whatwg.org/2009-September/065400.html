<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] registerProtocolHandler - allow site to specify more info and do custom handling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20registerProtocolHandler%20-%20allow%20site%20to%20specify%20more%0A%20info%20and%20do%20custom%20handling&In-Reply-To=%3Cop.u0nz49z81ejg13%40sandra-svwliu01%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065397.html">
   <LINK REL="Next"  HREF="065402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] registerProtocolHandler - allow site to specify more info and do custom handling</H1>
<!--htdig_noindex-->
    <B>Michael A. Puls II</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20registerProtocolHandler%20-%20allow%20site%20to%20specify%20more%0A%20info%20and%20do%20custom%20handling&In-Reply-To=%3Cop.u0nz49z81ejg13%40sandra-svwliu01%3E"
       TITLE="[whatwg] registerProtocolHandler - allow site to specify more info and do custom handling">shadow2531 at gmail.com
       </A><BR>
    <I>Tue Sep 22 08:32:59 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="065397.html">[whatwg] registerProtocolHandler - allow site to specify more info and do custom handling
</A></li>
        <LI>Next message: <A HREF="065402.html">[whatwg] registerProtocolHandler - allow site to specify more info and do custom handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65400">[ date ]</a>
              <a href="thread.html#65400">[ thread ]</a>
              <a href="subject.html#65400">[ subject ]</a>
              <a href="author.html#65400">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 22 Sep 2009 09:10:02 -0400, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt;  
wrote:

&gt;<i> On Sat, 19 Sep 2009 13:49:15 +0200, Michael A. Puls II  
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">shadow2531 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Currently, registerProtcolHandler works like this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> navigator.registerProtocolHandler(&quot;protocol&quot;,  
</I>&gt;&gt;<i> &quot;<A HREF="http://example.org/?uri=%s">http://example.org/?uri=%s</A>&quot;, &quot;title&quot;);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However, this doesn't allow the site to specify some useful and  
</I>&gt;&gt;<i> important information about the site like:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. What encoding the server expects. For example, uri= might expect the  
</I>&gt;&gt;<i> protocol link that was invoked in the browser to be interpreted as  
</I>&gt;&gt;<i> koi8-r instead of utf-8. This might be the case even if the page that  
</I>&gt;&gt;<i> uses registerProtocolHandler uses Windows-1251 for example.
</I>&gt;<i>
</I>&gt;<i> The IRI specification dictates UTF-8 already.
</I>
But sites might not follow it.

&gt;&gt;<i> 2. The location of an icon like a favicon.ico file or png etc.
</I>&gt;<i>
</I>&gt;<i> Is this not already known? Or is there no same-origin restriction on  
</I>&gt;<i> these methods?
</I>
Do you mean, is the location known like favicon.ico at the root of the  
site? It's not always in that spot. And, if it's not a favicon, but a png  
for example, it could be anywhere on the site.

&gt;&gt;<i> 3. URI to a help page where the site explains how it makes uses of  
</I>&gt;&gt;<i> registerProtocolHandler and gives help and support contacts etc.
</I>&gt;<i>
</I>&gt;<i> How does this help the user?
</I>
Say the user sees that things are not working right with the handler. The  
user goes into the options to see what's doing with the handler settings  
and notices the link. The user clicks on it. Then, on the page, it says  
&quot;Attention: We've changed some things with what our server accepts from  
our protocol handler. You need to register the handler again by clicking  
here to get the updated version&quot; for example. User does and is happy  
again. :)

Now, the user could go hunting through the site to find that page, but the  
link is much more user-friendly.

&gt;&gt;<i> 4. Whether to use &quot;POST&quot; instead of GET.
</I>&gt;<i>
</I>&gt;<i> That seems dangerous. Following a link should always use GET.
</I>
But, I don't think it's necessarily &quot;following a link&quot; in the normal  
sense. It's launching a trusted web-based application, where POST could be  
used to support longer data.

Sure, it's great to look at the query to see what's being submitted (if  
it's in a format that you know how to decode).

By default though, the handler only works on pages for the site that  
registered the handler, so it'd be like just using a form POST right on  
the site.

&gt;&gt;<i> [...]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Point being, registerProtocolHandler needs to be more robust. And,  
</I>&gt;&gt;<i> although this post is long, the requested additions are quite simple to  
</I>&gt;&gt;<i> specify.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Maybe these things can be supported in registerProtocolHandler v.02  
</I>&gt;&gt;<i> once sites like the above prove that they are needed.
</I>&gt;<i>
</I>&gt;<i> I don't see why existing sites would not update what they accept to make  
</I>&gt;<i> registerProtocolHandler work.
</I>
I do. Sites can be a pain. :)

&gt;<i> And if user agents want to support sites that do not support  
</I>&gt;<i> registerProtocolHandler that is their business I think and not an  
</I>&gt;<i> necessarily an issue for the feature.
</I>
Sure, but if registerProtocolHandler is robust, users don't have to wait  
around for browsers to do that. registerProtcolHandler would be  
self-sufficient.

I think it's important to have robust tools to allow users to make things  
work when either the site or the browser or both are of no help. But, my  
main point in all this is if the UA has more than just a plain UI, it  
could make use of more info given by registerProtocolHandler to make  
things nicer.

In short though, I think registerProtocolHandler is too simple. Maybe  
that's intentional and browses are encouraged to support some other more  
advanced function like  
window.ff|ie|opera|safari|chrome_advancedRegisterProtocolHandler, but why  
do that when registerProtocolHandler could?

But, understood if you don't share my enthusiasm.

-- 
Michael

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065397.html">[whatwg] registerProtocolHandler - allow site to specify more info and do custom handling
</A></li>
	<LI>Next message: <A HREF="065402.html">[whatwg] registerProtocolHandler - allow site to specify more info and do custom handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65400">[ date ]</a>
              <a href="thread.html#65400">[ thread ]</a>
              <a href="subject.html#65400">[ subject ]</a>
              <a href="author.html#65400">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
