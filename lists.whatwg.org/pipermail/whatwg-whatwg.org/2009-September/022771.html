<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Criticism of pushState (was Global Script proposal)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Criticism%20of%20pushState%20%28was%20Global%20Script%20proposal%29&In-Reply-To=%3Cfbbf8c7c0909081020m6311535cld84579b5e3d2513f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022770.html">
   <LINK REL="Next"  HREF="022777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Criticism of pushState (was Global Script proposal)</H1>
<!--htdig_noindex-->
    <B>Dimitri Glazkov</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Criticism%20of%20pushState%20%28was%20Global%20Script%20proposal%29&In-Reply-To=%3Cfbbf8c7c0909081020m6311535cld84579b5e3d2513f%40mail.gmail.com%3E"
       TITLE="[whatwg] Criticism of pushState (was Global Script proposal)">dglazkov at chromium.org
       </A><BR>
    <I>Tue Sep  8 10:20:24 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022770.html">[whatwg] Criticism of pushState (was Global Script proposal)
</A></li>
        <LI>Next message: <A HREF="022777.html">[whatwg] Web Address and its escape
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22771">[ date ]</a>
              <a href="thread.html#22771">[ thread ]</a>
              <a href="subject.html#22771">[ subject ]</a>
              <a href="author.html#22771">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Sep 8, 2009 at 9:21 AM, Justin Lebar&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">justin.lebar at gmail.com</A>&gt; wrote:
&gt;<i> To be clear, I'm not suggesting that pushState obviates the need for
</I>&gt;<i> global script. &#160;My point is that pushState is useful in its own right,
</I>&gt;<i> with our without global script.
</I>&gt;<i>
</I>&gt;<i> Without pushstate, you can't make a non-hash navigation without
</I>&gt;<i> hitting the network. &#160;Even if you're clever and store all of JQuery
</I>&gt;<i> and your whole DOM in global storage, if you want to change the
</I>&gt;<i> pre-hash part of the URI, you need to load a new page.
</I>&gt;<i>
</I>&gt;<i> Imagine Google Maps trying to update the URI to match your current
</I>&gt;<i> location as you pan around the map. &#160;Right now, they could update the
</I>&gt;<i> hash as you panned. &#160;With pushstate, they could update the URI in an
</I>&gt;<i> arbitrary way. &#160;With global state, they'd have to load a new page
</I>&gt;<i> every time you panned. &#160;That's obviously worse, and probably not even
</I>&gt;<i> an option.
</I>
Ah, that's a use case I haven't thought of -- although now that you
mentioned it, I vaguely remember reading about it. You're right, this
one looks like a valid and appropriate use of pushState.

&gt;&gt;<i> Then why the heck would we want to come up with a fancier way to
</I>&gt;&gt;<i> provide hash-navigation?
</I>&gt;<i>
</I>&gt;<i> Perhaps the point is to do something which works like hash-navigation,
</I>&gt;<i> but to the user, looks like real navigation. &#160;Imagine Bugzilla using
</I>&gt;<i> pushstate to navigate between bugs, but keeping the familiar
</I>&gt;<i> show_bug.cgi?id=1234 URI. &#160;I don't pretend that the code necessary to
</I>&gt;<i> make this work would be easy to write, but it's certainly no more
</I>&gt;<i> difficult than changing the hash, and the resulting URLs are much
</I>&gt;<i> nicer.
</I>&gt;<i>
</I>&gt;&gt;<i> Once you introduce pushState, you deviate from the normalcy -- now you
</I>&gt;&gt;<i> can have a URL in the address bar that the user agent hasn't requested
</I>&gt;&gt;<i> from the server.
</I>&gt;<i>
</I>&gt;<i> Again, this is just what happens when you're at your Gmail Inbox and
</I>&gt;<i> click a link to <A HREF="http://mail.google.com/mail/#Drafts.">http://mail.google.com/mail/#Drafts.</A> &#160;You now have a
</I>&gt;<i> URL in the address bar that the UA hasn't requested from the server.
</I>&gt;<i> pushState improves this -- at least now the URL you didn't request
</I>&gt;<i> from the server looks like one which you plausibly might have
</I>&gt;<i> requested from the server.
</I>
I guess what I was trying to say is that the server is completely
blind to hashes, so both <A HREF="http://mail.google.com/mail/#Drafts">http://mail.google.com/mail/#Drafts</A> and
<A HREF="http://mail.google.com/mail/#inbox">http://mail.google.com/mail/#inbox</A> are the same URL from its
perspective: <A HREF="http://mail.google.com/mail/,">http://mail.google.com/mail/,</A> and that has been the case
since the browsers were born (I think).

&gt;&gt;<i> I really don't care about how the URLs
</I>&gt;&gt;<i> look. I just want the Web development to be easier. And in my humble
</I>&gt;&gt;<i> opinion, building a request controller in JS and essentially a whole
</I>&gt;&gt;<i> alternative reality navigation system using hashes is not.
</I>&gt;<i>
</I>&gt;<i> If you don't care how URLs look or if you don't mind making a network
</I>&gt;<i> request when you navigate a page, then don't use the feature! &#160;A lot
</I>&gt;<i> of people do care about one or both of those things, though, and
</I>&gt;<i> they're willing to go through the pain of developing these
</I>&gt;<i> alternative-reality navigation systems.
</I>&gt;<i>
</I>&gt;<i> PushState does not subsume global script. &#160;For many applications,
</I>&gt;<i> storing the whole DOM in global script would get you sufficiently fast
</I>&gt;<i> navigations -- I agree.
</I>&gt;<i>
</I>&gt;<i> But global script does not subsume pushState, either. &#160;Even with
</I>&gt;<i> global script, you can't change the URI arbitrarily without navigating
</I>&gt;<i> the page. &#160;Panning on Google Maps and changing the referer sent to a
</I>&gt;<i> page are two instances where extra page navigations might be
</I>&gt;<i> unacceptable.
</I>
Ok, this sounds reasonable.

:<i>DG&lt;
</I></PRE>


















































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022770.html">[whatwg] Criticism of pushState (was Global Script proposal)
</A></li>
	<LI>Next message: <A HREF="022777.html">[whatwg] Web Address and its escape
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22771">[ date ]</a>
              <a href="thread.html#22771">[ thread ]</a>
              <a href="subject.html#22771">[ subject ]</a>
              <a href="author.html#22771">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
