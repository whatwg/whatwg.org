<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] cloneNode and HTML elements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20cloneNode%20and%20HTML%20elements&In-Reply-To=%3CPine.LNX.4.62.0909150348170.14605%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065124.html">
   <LINK REL="Next"  HREF="065242.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] cloneNode and HTML elements</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20cloneNode%20and%20HTML%20elements&In-Reply-To=%3CPine.LNX.4.62.0909150348170.14605%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] cloneNode and HTML elements">ian at hixie.ch
       </A><BR>
    <I>Mon Sep 14 21:11:11 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="065124.html">[whatwg] cloneNode and HTML elements
</A></li>
        <LI>Next message: <A HREF="065242.html">[whatwg] cloneNode and HTML elements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65233">[ date ]</a>
              <a href="thread.html#65233">[ thread ]</a>
              <a href="subject.html#65233">[ subject ]</a>
              <a href="author.html#65233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 10 Sep 2009, Robert O'Callahan wrote:
&gt;<i>
</I>&gt;<i> If you call cloneNode on a media element, the state of the resulting 
</I>&gt;<i> media element seems unspecified. Should it be playing the same media 
</I>&gt;<i> resource at the same current time as the original?
</I>&gt;<i> 
</I>&gt;<i> Similar questions arise when you clone form elements; is the state 
</I>&gt;<i> that's not visible in the DOM cloned?
</I>
Cloning a DOM node is equivalent to serialising it and reparsing it. 
Nothing but the element's tag name, prefix, namespace, and attributes is 
cloned (plus the children, if the right argument is provided).

The only exception to this is the &lt;script&gt; element, which HTML5 says has 
its &quot;already executed&quot; bit cloned also.


&gt;<i> Who should be responsible for defining this?
</I>
Web DOM Core should define what cloning does. DOM3 Core does define what I 
describe above, though in it's usual non-committal and vague manner.

In general though, nothing ever happens unless specified otherwise, and 
nothing specifies that anything but the attributes and the element's own 
identity gets cloned.


On Thu, 10 Sep 2009, Olli Pettay wrote:
&gt;<i> On 9/10/09 11:13 AM, Jonas Sicking wrote:
</I>&gt;<i> &gt; On Thu, Sep 10, 2009 at 12:41 AM, Maciej Stachowiak&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt;  wrote:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; My assumption based on the spec is that no element-specific internal 
</I>&gt;<i> &gt; &gt; state should be copied, the cloning should only be DOM-wise.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; My assumption was always the opposite. For example for&lt;input&gt; elements 
</I>&gt;<i> &gt; we clone the 'value' API attribute, as well as the internal 
</I>&gt;<i> &gt; has-changed-value bit (used for form field restore when going back to 
</I>&gt;<i> &gt; a page). For&lt;script&gt; we copy over the has-executed bit. I'm fairly 
</I>&gt;<i> &gt; sure that the list is longer.
</I>&gt;<i> 
</I>&gt;<i> I've always interpret DOM3 Core strictly; cloning an element clones the 
</I>&gt;<i> object and &quot;copies all attributes and their values&quot; So no state copying. 
</I>&gt;<i> (I noticed the input element state cloning when writing other cloning 
</I>&gt;<i> related stuff.)
</I>
I didn't even know about the input control state cloning. I've updated the 
spec to require that the value, checkedness, dirty value, and dirty 
checkedness flags get cloned too.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065124.html">[whatwg] cloneNode and HTML elements
</A></li>
	<LI>Next message: <A HREF="065242.html">[whatwg] cloneNode and HTML elements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65233">[ date ]</a>
              <a href="thread.html#65233">[ thread ]</a>
              <a href="subject.html#65233">[ subject ]</a>
              <a href="author.html#65233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
