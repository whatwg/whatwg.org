<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] LocalStorage in workers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20LocalStorage%20in%20workers&In-Reply-To=%3C63df84f0909161532x5eb246a3lf803c6f9a6287114%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023048.html">
   <LINK REL="Next"  HREF="023050.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] LocalStorage in workers</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20LocalStorage%20in%20workers&In-Reply-To=%3C63df84f0909161532x5eb246a3lf803c6f9a6287114%40mail.gmail.com%3E"
       TITLE="[whatwg] LocalStorage in workers">jonas at sicking.cc
       </A><BR>
    <I>Wed Sep 16 15:32:08 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="023048.html">[whatwg] LocalStorage in workers
</A></li>
        <LI>Next message: <A HREF="023050.html">[whatwg] LocalStorage in workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23049">[ date ]</a>
              <a href="thread.html#23049">[ thread ]</a>
              <a href="subject.html#23049">[ subject ]</a>
              <a href="author.html#23049">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Sep 16, 2009 at 3:21 PM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt; wrote:
&gt;<i> On Thu, Sep 17, 2009 at 9:56 AM, Jeremy Orlow &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at chromium.org</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1) Create a LocalStorage like API that can only be accessed in an async
</I>&gt;&gt;<i> way via pages (kind of like WebDatabase).
</I>&gt;&gt;<i> 2) Remove any
</I>&gt;&gt;<i> atomicity/consistency&#160;guarantees&#160;from&#160;synchronous&#160;LocalStorage access within
</I>&gt;&gt;<i> pages (like IE8 currently does) and add an async interface for when pages do
</I>&gt;&gt;<i> need atomicity/consistency.
</I>&gt;&gt;<i> 3) Come up with a completely different storage API that all the browser
</I>&gt;&gt;<i> vendors are willing to implement that only allows Async access from within
</I>&gt;&gt;<i> pages. &#160;WebSimpleDatabase might be a good starting point for this.
</I>&gt;<i>
</I>&gt;<i> 4) Create WorkerStorage so that shared workers have exclusive, synchronous
</I>&gt;<i> access to their own persistent storage via an API compatible with
</I>&gt;<i> LocalStorage.
</I>
I think some of the use cases require that code running in Window
objects can access the same storage area though. Consider for example
an email web app that uses a WorkerStorage area for to store email
data locally (for performance and for offline support), and then uses
a worker to synchronize that with the server.

Here the code running in the Window wants to access the storage in
order to render the emails in the page, and the worker wants to access
it to synchronize with the server.

See my email earlier in this thread. If we change the name from
'clientStorage' to 'workerStorage', while still allowing the main
window to asynchronously get a reference to the storage, then I think
that about matches what you're proposing (and what item 1 is
proposing).

/ Jonas
</PRE>







































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023048.html">[whatwg] LocalStorage in workers
</A></li>
	<LI>Next message: <A HREF="023050.html">[whatwg] LocalStorage in workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23049">[ date ]</a>
              <a href="thread.html#23049">[ thread ]</a>
              <a href="subject.html#23049">[ subject ]</a>
              <a href="author.html#23049">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
