<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] cloneNode and HTML elements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20cloneNode%20and%20HTML%20elements&In-Reply-To=%3C5F62678E-90DD-439F-B75A-E435944A416F%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065274.html">
   <LINK REL="Next"  HREF="065120.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] cloneNode and HTML elements</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20cloneNode%20and%20HTML%20elements&In-Reply-To=%3C5F62678E-90DD-439F-B75A-E435944A416F%40apple.com%3E"
       TITLE="[whatwg] cloneNode and HTML elements">mjs at apple.com
       </A><BR>
    <I>Thu Sep 10 04:45:42 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="065274.html">[whatwg] cloneNode and HTML elements
</A></li>
        <LI>Next message: <A HREF="065120.html">[whatwg] cloneNode and HTML elements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65127">[ date ]</a>
              <a href="thread.html#65127">[ thread ]</a>
              <a href="subject.html#65127">[ subject ]</a>
              <a href="author.html#65127">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Sep 10, 2009, at 2:15 AM, Robert O'Callahan wrote:

&gt;<i> On Thu, Sep 10, 2009 at 7:41 PM, Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt;  
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> Reference for cloneNode:
</I>&gt;<i> <A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-3A0ED0A4">http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-3A0ED0A4</A>
</I>&gt;<i>
</I>&gt;<i> My assumption based on the spec is that no element-specific internal  
</I>&gt;<i> state should be copied, the cloning should only be DOM-wise.
</I>&gt;<i>
</I>&gt;<i> It's not obvious to me that DOM 3 Core's silence means nothing else  
</I>&gt;<i> is copied,
</I>
That's how I would tend to interpret its silence, unless some other  
spec says otherwise.  But to be fair, a the DOM specs are sometimes  
vague on the details. For example, it doesn't explicitly say what  
localName, prefix or namespace a cloned element gets. Or that what  
text contents cloned Text nodes should have.


&gt;<i> since non-DOM state is outside its scope.
</I>
DOM2 Core also defines cloneNode, and the associated DOM2 HTML does  
not impose any additional requirements for the HTML elements that have  
internal state. That would tend to support the theory that copying  
element-specific non-DOM state was not intended.

&gt;<i>
</I>&gt;<i> I wonder if authors would be surprised if the non-DOM state is not  
</I>&gt;<i> copied.
</I>
We haven't had any bug reports about it in WebKit, and we don't clone  
any internal state. We do have a bug report on cloneNode for  
Documents, where our choice of implementation-defined behavior is to  
return null. We'll likely have to fix that.

My mental model of cloneNode is that it's equivalent to creating a  
brand new element with the right name and namespace, adding the  
appropriate attributes, and if a deep clone, copies of its children.  
So I would not be surprised. Others may have a different mental model.


Regards,
Maciej
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090910/28f86990/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090910/28f86990/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065274.html">[whatwg] cloneNode and HTML elements
</A></li>
	<LI>Next message: <A HREF="065120.html">[whatwg] cloneNode and HTML elements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65127">[ date ]</a>
              <a href="thread.html#65127">[ thread ]</a>
              <a href="subject.html#65127">[ subject ]</a>
              <a href="author.html#65127">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
