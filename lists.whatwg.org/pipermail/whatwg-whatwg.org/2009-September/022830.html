<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Application defined &quot;locks&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Application%20defined%20%22locks%22&In-Reply-To=%3Cbd8f24d20909092113w1b280646g7ed534c8684b99aa%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022821.html">
   <LINK REL="Next"  HREF="022831.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Application defined &quot;locks&quot;</H1>
<!--htdig_noindex-->
    <B>Darin Fisher</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Application%20defined%20%22locks%22&In-Reply-To=%3Cbd8f24d20909092113w1b280646g7ed534c8684b99aa%40mail.gmail.com%3E"
       TITLE="[whatwg] Application defined &quot;locks&quot;">darin at chromium.org
       </A><BR>
    <I>Wed Sep  9 21:13:49 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022821.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
        <LI>Next message: <A HREF="022831.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22830">[ date ]</a>
              <a href="thread.html#22830">[ thread ]</a>
              <a href="subject.html#22830">[ subject ]</a>
              <a href="author.html#22830">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Sep 9, 2009 at 6:46 PM, Aaron Boodman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">aa at google.com</A>&gt; wrote:

&gt;<i> On Wed, Sep 9, 2009 at 11:30 AM, Aaron Boodman&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">aa at google.com</A>&gt; wrote:
</I>&gt;<i> &gt; I see.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So you are suggesting the localStorage could have zero concurrency
</I>&gt;<i> &gt; guarantees and it is simply up to the developer to arrange things
</I>&gt;<i> &gt; themselves using this new primitive.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That is an interesting idea. You're right that it overlaps with the
</I>&gt;<i> &gt; ideas that inspired shared workers, and the global script proposal.
</I>&gt;<i>
</I>&gt;<i> Ok, after thinking about this for a day, I'm going to say I think this
</I>&gt;<i> is a very cool idea, and a worthwhile addition, but I don't think it
</I>&gt;<i> should substitute for having the local storage API work correctly by
</I>&gt;<i> default.
</I>&gt;<i>
</I>&gt;<i> The web platform is supposed to work for developers of all experience
</I>&gt;<i> levels. If we make local storage have no concurrency guarantees, it
</I>&gt;<i> will seem like it works in the overwhelming majority of cases. It will
</I>&gt;<i> work in all SELUAs, and it will only NOT work in MELUAs in cases that
</I>&gt;<i> are basically impossible to test, let alone see during development.
</I>&gt;<i>
</I>&gt;<i> We have tried hard with the design of the web platform to avoid these
</I>&gt;<i> sort of untestable non-deterministic scenarios, and I think it is to
</I>&gt;<i> the overall value of the platform to continue this.
</I>&gt;<i>
</I>&gt;<i> Therefore, my position continues to be that to access local storage,
</I>&gt;<i> there should be an API that asynchronously acquires exclusive access
</I>&gt;<i> to storage.
</I>&gt;<i>
</I>&gt;<i> - a
</I>&gt;<i>
</I>

Yeah, if you had to call an API that asynchronously acquires exclusive
access
to storage, then I believe that would nicely address most of the issues.  It
is the
solution we have for database transactions.

I say &quot;most&quot; because I'm not sure that it eliminates the need to drop the
storage
mutex in the showModalDialog case.

If I call showModalDialog from within a database transaction, and then
showModalDialog
tries to create another database transaction, should I expect that the
transaction
can be started within the nested run loop of the modal dialog?  If not, then
it may cause
the app to get confused and never allow the dialog to be closed (e.g.,
perhaps the close
action is predicated on a database query.)

Nested loops suck.  showModalDialog sucks :-)

-Darin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090909/79af2584/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090909/79af2584/attachment.htm</A>&gt;
</PRE>























































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022821.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
	<LI>Next message: <A HREF="022831.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22830">[ date ]</a>
              <a href="thread.html#22830">[ thread ]</a>
              <a href="subject.html#22830">[ subject ]</a>
              <a href="author.html#22830">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
