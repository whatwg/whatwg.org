<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web Storage: apparent contradiction in spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Storage%3A%20apparent%20contradiction%20in%20spec&In-Reply-To=%3CPine.LNX.4.62.0909031241090.6775%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022550.html">
   <LINK REL="Next"  HREF="022601.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web Storage: apparent contradiction in spec</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Storage%3A%20apparent%20contradiction%20in%20spec&In-Reply-To=%3CPine.LNX.4.62.0909031241090.6775%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Web Storage: apparent contradiction in spec">ian at hixie.ch
       </A><BR>
    <I>Thu Sep  3 05:56:41 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022550.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
        <LI>Next message: <A HREF="022601.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22597">[ date ]</a>
              <a href="thread.html#22597">[ thread ]</a>
              <a href="subject.html#22597">[ subject ]</a>
              <a href="author.html#22597">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, 31 Aug 2009, Jens Alfke wrote:
&gt;<i> On Aug 31, 2009, at 3:11 AM, Ian Hickson wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; We can't treat cookies and persistent storage differently, because 
</I>&gt;<i> &gt; otherwise we'll expose users to cookie resurrection attacks. 
</I>&gt;<i> &gt; Maintaining the user's expectations of privacy is critical.
</I>&gt;<i> 
</I>&gt;<i> The fact that local storage can be used as a type of super-cookie 
</I>&gt;<i> doesn't mean the two are the same thing.
</I>
The fact that local storage can be used for cookie resurrection means we 
have to make sure that clearing one clears the other. Anything else would 
be a huge privacy issue (just as Flash has been).


&gt;<i> That's just one of many reasons why user agents should require user 
</I>&gt;<i> approval for letting a domain access local storage.
</I>
I disagree that they should, and more importantly, as shipped in multiple 
browsers, they don't, which likely means we can never make it such that 
UAs require user approval.


&gt;<i> That does not mean that the &quot;Delete Cookies&quot; menu command should also 
</I>&gt;<i> delete local storage. Users often delete cookies to resolve login issues 
</I>&gt;<i> (I've had to do this with Google websites several times). Conflating the 
</I>&gt;<i> two can lead to disasters like &quot;I told you to delete my COOKIES! Not my 
</I>&gt;<i> EMAIL DRAFTS that I was trying to log in to send!&quot;
</I>
Certainly the UI issues around this are non-trivial, and one would hope 
that the UA will help the user handle these cases securely. But authors 
equally don't want to end up with the more insidious situation of 
companies tracking them without their knowledge even though they think 
they are safe due to clearing cookies.


&gt;<i> &gt; So I've removed the text that says that local storage could be user- 
</I>&gt;<i> &gt; critical.
</I>&gt;<i> 
</I>&gt;<i> That's going to come as a shock to developers who were planning to use 
</I>&gt;<i> it for user-created data (whether drafts of content to be pushed to the 
</I>&gt;<i> cloud, or strictly-local documents.) Without this, the safe usage of 
</I>&gt;<i> local storage diminishes to a download cache.
</I>
I don't see what else we can do.


On Mon, 31 Aug 2009, Jeremy Orlow wrote:
&gt;<i> 
</I>&gt;<i> Yes, this is pretty disconcerting since there's been OVERWHELMING 
</I>&gt;<i> support for LocalStorage being treated as user-critical on this thread.
</I>
It doesn't matter how much support a proposal gets, only technical merits 
matter here.


On Mon, 31 Aug 2009, Peter Kasting wrote:
&gt;<i> 
</I>&gt;<i> It seems like you're convinced that UAs won't create UI users can 
</I>&gt;<i> understand, and so you're trying to make the spec mandate what you think 
</I>&gt;<i> will be comprehensible for users.  IMO this is not only out-of-scope but 
</I>&gt;<i> pointless, as UAs are going to do what they want anyway.  The spec is 
</I>&gt;<i> already pretty clear in telling UAs not to be casual about things, I 
</I>&gt;<i> don't think you're going to change what actually gets implemented by 
</I>&gt;<i> demanding more.
</I>
Indeed.


On Wed, 2 Sep 2009, Peter Kasting wrote:
&gt;<i> 
</I>&gt;<i> It still seems like you are interpreting this statement as saying that 
</I>&gt;<i> the UA must not allow users to keep/clear cookies separately from Local 
</I>&gt;<i> Storage data.  While on the face of it that seems like a possible 
</I>&gt;<i> interpretation, I think it's clear that this would be a lousy user 
</I>&gt;<i> experience and detrimental to developers as well.  Therefore I am 
</I>&gt;<i> convinced that the intent of the statement is to say that UAs must give 
</I>&gt;<i> users the same _abilities_ to see and clear Local Storage data as they 
</I>&gt;<i> already have with cookies, not that the two things should always be 
</I>&gt;<i> lumped together and made indistinguishable.
</I>
Not necessarily indistuingushable, but the point is that the user 
should have a clear indication that just clearing cookies is pointless if 
the rest of the site's data isn't cleared also.

I've tried to clarify the text a bit here.


On Mon, 31 Aug 2009, Mike Shaver wrote:
&gt;<i> On Mon, Aug 31, 2009 at 6:11 AM, Ian Hickson&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; We can't treat cookies and persistent storage differently, because 
</I>&gt;<i> &gt; otherwise we'll expose users to cookie resurrection attacks. 
</I>&gt;<i> &gt; Maintaining the user's expectations of privacy is critical.
</I>&gt;<i> 
</I>&gt;<i> By that reasoning we can't treat cookies differently from the HTTP cache 
</I>&gt;<i> (ETag) or history (URIs with session IDs), I think.
</I>
Indeed; that's an issue for the HTTP spec, though, and is out of scope 
for Web Storage and HTML5.


&gt;<i> I don't know of any UAs that expire history/cookie/cache in sync to 
</I>&gt;<i> avoid correlations -- if it's even possible to do so -- and I don't 
</I>&gt;<i> think I've seen any bugs asking Firefox to do so.
</I>
It's a lot easier to do cookie resurrection with local storage than with 
the HTTP cache, but I imagine that if anyone ever gets around to doing it 
with the cache, this will suddenly surge in the public consciousness, so 
it might be something to deal with in advance anyway.


On Tue, 1 Sep 2009, Linus Upson wrote:
&gt;<i> On Mon, Aug 31, 2009 at 3:11 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; In addition, I'd like to see the pop-up dialogs for the location API 
</I>&gt;<i> &gt; &gt; removed. I find the &quot;Can I know where you are?&quot; dialogs on the 
</I>&gt;<i> &gt; &gt; iPhone very annoying. Mistakes were made. Perhaps we can find a way 
</I>&gt;<i> &gt; &gt; to make &lt;input type=&quot;location&quot;&gt; work well instead.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The geolocation model is asynchronous, which gets around this neatly 
</I>&gt;<i> &gt; (the UI can slide in and the user can ignore it until he's ready to 
</I>&gt;<i> &gt; give his location).
</I>&gt;<i> 
</I>&gt;<i> Please take in to account that email is asynchronous but spam is still 
</I>&gt;<i> annoying.
</I>
I don't really see this as analogous.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>



















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022550.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
	<LI>Next message: <A HREF="022601.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22597">[ date ]</a>
              <a href="thread.html#22597">[ thread ]</a>
              <a href="subject.html#22597">[ subject ]</a>
              <a href="author.html#22597">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
