<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Spec comments, sections 4.9-4.10
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Spec%20comments%2C%20sections%204.9-4.10&In-Reply-To=%3CPine.LNX.4.62.0909141042350.14605%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064983.html">
   <LINK REL="Next"  HREF="065341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Spec comments, sections 4.9-4.10</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Spec%20comments%2C%20sections%204.9-4.10&In-Reply-To=%3CPine.LNX.4.62.0909141042350.14605%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Spec comments, sections 4.9-4.10">ian at hixie.ch
       </A><BR>
    <I>Mon Sep 14 04:21:47 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064983.html">[whatwg] Spec comments, sections 4.9-4.10
</A></li>
        <LI>Next message: <A HREF="065341.html">[whatwg] Spec comments, sections 4.9-4.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65203">[ date ]</a>
              <a href="thread.html#65203">[ thread ]</a>
              <a href="subject.html#65203">[ subject ]</a>
              <a href="author.html#65203">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 6 Sep 2009, Aryeh Gregor wrote:
&gt;<i> &gt;&gt; In 4.10.4:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; It's a little confusing that no visual distinction is made between
</I>&gt;<i> &gt;&gt; content attributes and DOM attributes here. &#160;I thought it was an error
</I>&gt;<i> &gt;&gt; that checked occurred twice, for instance. &#160;(Or is it an error? Things
</I>&gt;<i> &gt;&gt; like max and min only occur once even though they have both content and
</I>&gt;<i> &gt;&gt; DOM attributes.)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Do you mean in the table?
</I>&gt;<i> 
</I>&gt;<i> Yes.
</I>
I removed the row for &quot;checked&quot;, since it was redundant, and added 
annotations for the other IDL attributes.


&gt;<i> &gt; I'm not really sure what you mean here.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &#160;- There's the element's &quot;value&quot; content attribute.
</I>&gt;<i> &gt; &#160;- There's the element's &quot;value&quot; DOM attribute.
</I>&gt;<i> &gt; &#160;- There's the &quot;value&quot; mode that the &quot;value&quot; DOM attribute can be in.
</I>&gt;<i> &gt; &#160;- There's the element's &quot;defaultValue&quot; DOM attribute (which reflects the
</I>&gt;<i> &gt;  &#160; element's &quot;value&quot; content attribute).
</I>&gt;<i> &gt; &#160;- There's the element's actual value.
</I>&gt;<i> &gt; &#160;- There's the value exposed to the user.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Are you asking that the fifth of these (the value concept) should be
</I>&gt;<i> &gt; renamed to something else?
</I>&gt;<i> 
</I>&gt;<i> I'm not really sure, I just know I got confused by which &quot;value&quot; was
</I>&gt;<i> being referred to in various cases.  I'm not sure I can suggest any
</I>&gt;<i> better wording, because I think I still don't understand what &quot;value&quot;
</I>&gt;<i> is being referred to in a lot of cases.
</I>
Which of the above is unclear?


&gt;<i> &gt;&gt; Likewise, sentences like &quot;Unless otherwise specified, the user agent 
</I>&gt;<i> &gt;&gt; should not allow the user to modify the element's value or 
</I>&gt;<i> &gt;&gt; checkedness.&quot; are very perplexing. &#160;It would make more sense at 
</I>&gt;<i> &gt;&gt; first sight if it said &quot;. . . the element's default value or default 
</I>&gt;<i> &gt;&gt; checkedness.&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What's the element's default value or default checkedness?
</I>&gt;<i> 
</I>&gt;<i> I guess it's the same as the value content attribute, actually.  Or the 
</I>&gt;<i> presence/absence of the checked content attribute.
</I>
Ah. I think I'd rather stick to the explicit terms instead of adding more!


&gt;<i> &gt; It means that the internal states named &quot;value&quot; and &quot;checkedness&quot; 
</I>&gt;<i> &gt; can't be changed by the user unless otherwise stated. These aren't 
</I>&gt;<i> &gt; default anythings, and can have little to no bearing on what is 
</I>&gt;<i> &gt; exposed through the DOM or markup.
</I>&gt;<i> 
</I>&gt;<i> So this is overridden for a lot of things by saying &quot;the user agent 
</I>&gt;<i> should allow the user to change X&quot;, then, and you really mean the actual 
</I>&gt;<i> current value that will be submitted with the form.
</I>
Right.


&gt;<i> I didn't get that at all from reading it; I thought it referred to the 
</I>&gt;<i> value/checked content attributes or something, because saying that the 
</I>&gt;<i> current/submittable value couldn't be changed unless otherwise stated 
</I>&gt;<i> seemed very unlikely to me. The general rule is it *can* be changed, in 
</I>&gt;<i> practice, with some exceptions, so this way of stating it seems 
</I>&gt;<i> backwards (and thus confusing given all the meanings of &quot;value&quot; flying 
</I>&gt;<i> around).
</I>
Nothing is to be read between the lines -- unless it says that something 
can be changed, the default assumption is that it can't be changed. (There 
are a finite number of things that can be changed, and an infinite number 
that cannot, so it doesn't make sense to do it the other way around.)


&gt;<i> &gt;&gt; In 4.10.4.1.2:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; What's the purpose of type=search? &#160;Is it envisioned that this be 
</I>&gt;<i> &gt;&gt; used as an inline substitute for OpenSearch, for instance? Or is it 
</I>&gt;<i> &gt;&gt; mainly intended to allow separate styling (e.g., to match platform 
</I>&gt;<i> &gt;&gt; conventions)? &#160;I can't find any practical normative difference, so 
</I>&gt;<i> &gt;&gt; it would be useful if there were an informative note making it clear 
</I>&gt;<i> &gt;&gt; what some differences might be in practice.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The difference is stylistic. Compare the two in Safari.
</I>&gt;<i> 
</I>&gt;<i> I think more informative notes about the purpose of things like this 
</I>&gt;<i> would make the spec a lot easier to comprehend.
</I>
Added a note about this.


&gt;<i> &gt;&gt; In 4.10.4.1.7:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &quot;If the element is mutable, the user agent should allow the user to 
</I>&gt;<i> &gt;&gt; change the global date and time represented by its value, as obtained 
</I>&gt;<i> &gt;&gt; by parsing a global date and time from it. User agents must not allow 
</I>&gt;<i> &gt;&gt; the user to set the value to a string that is not a valid global date 
</I>&gt;<i> &gt;&gt; and time string expressed in UTC, though user agents may allow the 
</I>&gt;<i> &gt;&gt; user to set and view the time in another time zone and silently 
</I>&gt;<i> &gt;&gt; translate the time to and from the UTC time zone in the value. If the 
</I>&gt;<i> &gt;&gt; user agent provides a user interface for selecting a global date and 
</I>&gt;<i> &gt;&gt; time, then the value must be set to a valid global date and time 
</I>&gt;<i> &gt;&gt; string expressed in UTC representing the user's selection. User 
</I>&gt;<i> &gt;&gt; agents should allow the user to set the value to the empty string.&quot;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; This paragraph looks repetitive to me. &#160;I think the third sentence 
</I>&gt;<i> &gt;&gt; can just be dropped, unless I'm missing something -- does it add 
</I>&gt;<i> &gt;&gt; anything?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This paragraph is setting out precisely what the requirements are for 
</I>&gt;<i> &gt; user agents. The four sentences each cover a slightly different aspect 
</I>&gt;<i> &gt; of the requirements.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; They don't seem to overlap at all -- the first says that the UI needs 
</I>&gt;<i> &gt; to allow changes, the second that if the user can set the value 
</I>&gt;<i> &gt; directly, the UA needs to prevent invalid values from being set, the 
</I>&gt;<i> &gt; third says that if the UA allows the user to set the value using some 
</I>&gt;<i> &gt; sort of UI, that the UI should convert the value to one of those valid 
</I>&gt;<i> &gt; things, and the fourth one says that in addition, the UA can allow the 
</I>&gt;<i> &gt; user to reset the value to nothing.
</I>&gt;<i> 
</I>&gt;<i> As I'm reading it, the first two sentences imply the third.  The user 
</I>&gt;<i> must be allowed to change it, but not to invalid values; so obviously 
</I>&gt;<i> any input mechanism that's provided must only allow valid values to be 
</I>&gt;<i> input.  What incorrect behavior does the third sentence rule out, which 
</I>&gt;<i> the rest of the spec would permit?
</I>
The third sentence isn't ruling out anything, it's requiring specifically 
that if the user agent offers a UI, say a clock, that the user agent set 
the value to a value that matches what the user selected, so that, for 
instance, setting the value to 4 o'clock when the user picked 2 o'clock 
would be non-conforming.


&gt;<i> &gt;&gt; 1) If the user goes to another page (e.g., submits the form) and then
</I>&gt;<i> &gt;&gt; goes back, the form will be emptied of whatever he entered into it. (At
</I>&gt;<i> &gt;&gt; least in the versions of Firefox and Chrome I've tried it in -- I didn't
</I>&gt;<i> &gt;&gt; test systematically.)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; . . .
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; I guess that in HTML 5, the correct way to implement this behavior would
</I>&gt;<i> &gt;&gt; be to dynamically populate a datalist element. &#160;Perhaps some (possibly
</I>&gt;<i> &gt;&gt; informative) wording should be added to this effect, saying that authors
</I>&gt;<i> &gt;&gt; shouldn't use autocomplete just to replace the default suggestions list?
</I>&gt;<i> &gt;&gt; (Although of course they will until UAs support datalist, regardless of
</I>&gt;<i> &gt;&gt; what the spec says.)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I haven't mentioned datalist here.
</I>&gt;<i> 
</I>&gt;<i> Any reason why not?
</I>
There are any number of possible ways of doing autocomplete that aren't 
necessarily worse than &lt;datalist&gt;, depending on what you want to do. Alos, 
I'm not sure it would really do any good to mention it here.


&gt;<i> Point (1) can actually make this use of autocomplete very annoying.  In 
</I>&gt;<i> the case of Google and Wikipedia it doesn't really matter, because they 
</I>&gt;<i> provide a new, identical search box on the search results page, so you 
</I>&gt;<i> have no reason to go back.  But in other cases it can be pretty 
</I>&gt;<i> irritating.  For instance, on this page:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.vbulletin.com/forum/search.php">http://www.vbulletin.com/forum/search.php</A>
</I>&gt;<i> 
</I>&gt;<i> There are a bunch of options, so you fill in a lot of them (including 
</I>&gt;<i> username, which is auto-completed by JS).  Then you do the search, and 
</I>&gt;<i> realize you got one option wrong.  So you hit back, change the option, 
</I>&gt;<i> resubmit . . . and find that now the search is still wrong, because the 
</I>&gt;<i> username field was blanked when you went back.
</I>
That does indeed suck.


&gt;<i> &gt; &quot;readonly&quot; means that the value should be selectable for 
</I>&gt;<i> &gt; copy-and-paste (thus it makes no sense for buttons and other non-text 
</I>&gt;<i> &gt; controls to be readonly), while &quot;disabled&quot; means that the control 
</I>&gt;<i> &gt; should not be responsive to user interaction.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; These conventions are common to most GUI systems.
</I>&gt;<i> 
</I>&gt;<i> Is this behavior specified anywhere?  If not, it seems like it should 
</I>&gt;<i> be, even if some subset of readers would be expected to guess it from 
</I>&gt;<i> familiarity with the conventions of GUI systems.
</I>
The spec does say that disabled controls aren't focusable. I'm not sure 
what else it can say.


&gt;<i> &gt;&gt; In 4.10.5:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; It's not clear from reading the spec what the difference is between
</I>&gt;<i> &gt;&gt; buttons and inputs of the same type. &#160;Is there any?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Not especially. You set their labels differently, and there are a few
</I>&gt;<i> &gt; minor differences like that, but nothing major.
</I>&gt;<i> 
</I>&gt;<i> Then why do both exist, rather than removing one or the other as with
</I>&gt;<i> abbr/acronym and so on?  Too many sites using &lt;button&gt; that you don't
</I>&gt;<i> want to gratuitously invalidate?
</I>
Right.


&gt;<i> Assuming both are kept, this is another case where a brief informative 
</I>&gt;<i> note would be helpful -- it's logical to expect that new features add 
</I>&gt;<i> something new, and if you can't spot the difference you're left 
</I>&gt;<i> uncertain as to whether there is any.
</I>
Where would you put the note?


&gt;<i> &gt;&gt; I can find two uses of the invalid event (are there more?), but I'm 
</I>&gt;<i> &gt;&gt; not sure what it's meant to do. &#160;You can cancel it to make sure an 
</I>&gt;<i> &gt;&gt; element is treated as valid for form submission -- although then 
</I>&gt;<i> &gt;&gt; you'll confuse the entire rest of the constraint validation API -- 
</I>&gt;<i> &gt;&gt; but why is it called on checkValidity()? &#160;I'm not sure what it's 
</I>&gt;<i> &gt;&gt; meant to be used for. &#160;Or, consequently, what checkValidity() is 
</I>&gt;<i> &gt;&gt; meant to be used for, as opposed to validity.valid (since the only 
</I>&gt;<i> &gt;&gt; difference seems to be firing an invalid event).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; checkValidity() on the &lt;form&gt; element tells you if the form is valid.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; oninvalid=&quot;&quot; can be used to override the constraints in particular 
</I>&gt;<i> &gt; cases. For example, ignoring a pattern=&quot;&quot; attribute in certain edge 
</I>&gt;<i> &gt; cases, like if a checkbox saying &quot;don't validate&quot; is checked or 
</I>&gt;<i> &gt; something.
</I>&gt;<i> 
</I>&gt;<i> I see.  Again, it would be helpful for the spec to give some idea of how 
</I>&gt;<i> authors are intended to use these features.  In this case an example 
</I>&gt;<i> would serve as well as a note.
</I>
I've added some examples. I'll add more over time. If there's something 
specifically you'd like an example for, let me know.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064983.html">[whatwg] Spec comments, sections 4.9-4.10
</A></li>
	<LI>Next message: <A HREF="065341.html">[whatwg] Spec comments, sections 4.9-4.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65203">[ date ]</a>
              <a href="thread.html#65203">[ thread ]</a>
              <a href="subject.html#65203">[ subject ]</a>
              <a href="author.html#65203">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
