<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] cloneNode and HTML elements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20cloneNode%20and%20HTML%20elements&In-Reply-To=%3C4AA8C077.3040505%40helsinki.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065121.html">
   <LINK REL="Next"  HREF="065125.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] cloneNode and HTML elements</H1>
<!--htdig_noindex-->
    <B>Olli Pettay</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20cloneNode%20and%20HTML%20elements&In-Reply-To=%3C4AA8C077.3040505%40helsinki.fi%3E"
       TITLE="[whatwg] cloneNode and HTML elements">Olli.Pettay at helsinki.fi
       </A><BR>
    <I>Thu Sep 10 02:01:43 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="065121.html">[whatwg] cloneNode and HTML elements
</A></li>
        <LI>Next message: <A HREF="065125.html">[whatwg] cloneNode and HTML elements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65122">[ date ]</a>
              <a href="thread.html#65122">[ thread ]</a>
              <a href="subject.html#65122">[ subject ]</a>
              <a href="author.html#65122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 9/10/09 11:13 AM, Jonas Sicking wrote:
&gt;<i> On Thu, Sep 10, 2009 at 12:41 AM, Maciej Stachowiak&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt;  wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sep 9, 2009, at 10:26 PM, Robert O'Callahan wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If you call cloneNode on a media element, the state of the resulting media
</I>&gt;&gt;&gt;<i> element seems unspecified. Should it be playing the same media resource at
</I>&gt;&gt;&gt;<i> the same current time as the original?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Similar questions arise when you clone form elements; is the state that's
</I>&gt;&gt;&gt;<i> not visible in the DOM cloned?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Who should be responsible for defining this?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Does cloneNode require copying any state besides an element's qualified
</I>&gt;&gt;<i> name, attributes and DOM children? The definition in DOM3Core doesn't say
</I>&gt;&gt;<i> anything else should be copied. Is form control state (such as set of items
</I>&gt;&gt;<i> selected in a&lt;list multiple&gt;) copied?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Reference for cloneNode:
</I>&gt;&gt;<i> <A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-3A0ED0A4">http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-3A0ED0A4</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My assumption based on the spec is that no element-specific internal state
</I>&gt;&gt;<i> should be copied, the cloning should only be DOM-wise.
</I>&gt;<i>
</I>&gt;<i> My assumption was always the opposite. For example for&lt;input&gt;
</I>&gt;<i> elements we clone the 'value' API attribute, as well as the internal
</I>&gt;<i> has-changed-value bit (used for form field restore when going back to
</I>&gt;<i> a page). For&lt;script&gt;  we copy over the has-executed bit. I'm fairly
</I>&gt;<i> sure that the list is longer.
</I>&gt;<i>
</I>&gt;<i> / Jonas
</I>&gt;<i>
</I>
I've always interpret DOM3 Core strictly; cloning an element
clones the object and &quot;copies all attributes and their values&quot;
So no state copying.
(I noticed the input element state cloning when writing
  other cloning related stuff.)

If we start to copy the state, there is the problem to define what all 
state should be cloned.

Btw, DOM 3 Core defines it pretty badly what should be cloned when a 
document is cloned. &quot;cloning Document ... is implementation dependent&quot;

If elements start to clone their state, should document do it too.
Should document's stylesheets be cloned? And if stylesheets, what about
.defaultView etc. ?



-Olli

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065121.html">[whatwg] cloneNode and HTML elements
</A></li>
	<LI>Next message: <A HREF="065125.html">[whatwg] cloneNode and HTML elements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65122">[ date ]</a>
              <a href="thread.html#65122">[ thread ]</a>
              <a href="subject.html#65122">[ subject ]</a>
              <a href="author.html#65122">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
