<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Reliably Minimize Reflows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Reliably%20Minimize%20Reflows&In-Reply-To=%3C4A71B3DD-0405-49F9-9AAC-426AD530E568%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023208.html">
   <LINK REL="Next"  HREF="023210.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Reliably Minimize Reflows</H1>
<!--htdig_noindex-->
    <B>Joseph Pecoraro</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Reliably%20Minimize%20Reflows&In-Reply-To=%3C4A71B3DD-0405-49F9-9AAC-426AD530E568%40gmail.com%3E"
       TITLE="[whatwg] Reliably Minimize Reflows">joepeck02 at gmail.com
       </A><BR>
    <I>Sat Sep 26 09:04:38 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="023208.html">[whatwg] Web Encodings
</A></li>
        <LI>Next message: <A HREF="023210.html">[whatwg] Reliably Minimize Reflows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23209">[ date ]</a>
              <a href="thread.html#23209">[ thread ]</a>
              <a href="subject.html#23209">[ subject ]</a>
              <a href="author.html#23209">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>A task that developers are often faced with is applying many style  
updates to multiple Nodes in the DOM.  An example would be showing/ 
hiding all divs with the &quot;foo&quot; style class:

   // Hide multiple divs
   var foos = document.getElementsByClassName('foo');
   for (var i=0, len=foos.length; i &lt; len; ++i)
     foos[i].style.display = 'none';

As I understand it, if there are 20 .foo elements then updating the  
style on each _could_ cause 20 individual reflows.  It would be best  
if the developer can narrow that down to a single reflow.  Minimizing  
reflows is a well known suggestion for speeding up web pages [1][2].  
The most natural and generalized API that I can think of would be  
something like:

   // Single reflow would be triggered at the end of batchUpdate
   document.batchUpdate(function() {
     ...
   });

Opera mentions a little about its reflow algorithms at [2] with raises  
some interesting points.  Here is the relevant portion:

&quot;Browsers may choose to wait until the end of a script thread before  
reflowing to show the changes. Opera will wait until enough changes  
have been made, enough time has elapsed, or the end of the thread is  
reached. This means that if the changes happen quickly enough in the  
same thread, they may only produce one reflow. However, this cannot be  
relied on, especially considering the various different speeds of  
devices that Opera runs on.&quot;

The idea here is that &quot;batchUpdate&quot; would be a reliable way to  
minimize reflows.  Does this sound like a worthwhile improvement?

Cheers,
Joseph Pecoraro

[1]: <A HREF="http://code.google.com/speed/articles/reflow.html">http://code.google.com/speed/articles/reflow.html</A>
[2]: <A HREF="http://dev.opera.com/articles/view/efficient-javascript/?page=3">http://dev.opera.com/articles/view/efficient-javascript/?page=3</A>

</PRE>










<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023208.html">[whatwg] Web Encodings
</A></li>
	<LI>Next message: <A HREF="023210.html">[whatwg] Reliably Minimize Reflows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23209">[ date ]</a>
              <a href="thread.html#23209">[ thread ]</a>
              <a href="subject.html#23209">[ subject ]</a>
              <a href="author.html#23209">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
