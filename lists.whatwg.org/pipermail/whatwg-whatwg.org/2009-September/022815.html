<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Application defined &quot;locks&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Application%20defined%20%22locks%22&In-Reply-To=%3Cbd8f24d20909091137r1f69f374i9ea8cf48933710ef%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022814.html">
   <LINK REL="Next"  HREF="022818.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Application defined &quot;locks&quot;</H1>
<!--htdig_noindex-->
    <B>Darin Fisher</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Application%20defined%20%22locks%22&In-Reply-To=%3Cbd8f24d20909091137r1f69f374i9ea8cf48933710ef%40mail.gmail.com%3E"
       TITLE="[whatwg] Application defined &quot;locks&quot;">darin at chromium.org
       </A><BR>
    <I>Wed Sep  9 11:37:25 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022814.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
        <LI>Next message: <A HREF="022818.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22815">[ date ]</a>
              <a href="thread.html#22815">[ thread ]</a>
              <a href="subject.html#22815">[ subject ]</a>
              <a href="author.html#22815">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Sep 9, 2009 at 11:30 AM, Aaron Boodman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">aa at google.com</A>&gt; wrote:

&gt;<i> On Wed, Sep 9, 2009 at 11:23 AM, Darin Fisher&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at chromium.org</A>&gt; wrote:
</I>&gt;<i> &gt; On Wed, Sep 9, 2009 at 11:08 AM, Aaron Boodman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">aa at google.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; There would presumably have to be a separate name value for each API,
</I>&gt;<i> &gt;&gt; though, right? So we're talking about the difference between:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; window.acquireLock(&quot;localStorage&quot;, function() {
</I>&gt;<i> &gt;&gt; ...
</I>&gt;<i> &gt;&gt; });
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; and:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; window.acquireLocalStorage(function() {
</I>&gt;<i> &gt;&gt; ...
</I>&gt;<i> &gt;&gt; });
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; It doesn't seem like much of a win for reusability IMO.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I wanted to leave it up to the app developer to choose the name so that
</I>&gt;<i> they
</I>&gt;<i> &gt; could define how the lock is interpreted.
</I>&gt;<i> &gt; For example, they might want to partition the keyspace for local storage
</I>&gt;<i> and
</I>&gt;<i> &gt; have separate locks for separate keys.  Or, they might want to have a
</I>&gt;<i> single
</I>&gt;<i> &gt; lock that is inclusive of several storage mechanisms: LocalStorage and
</I>&gt;<i> &gt; FileAPI.
</I>&gt;<i> &gt; Besides, once we have an explicit locking API, why not just be generic
</I>&gt;<i> and
</I>&gt;<i> &gt; give it a name divorced from LocalStorage or any kind of storage features
</I>&gt;<i> &gt; for that matter?  Locking can be useful to other applications that do not
</I>&gt;<i> &gt; even use local storage...
</I>&gt;<i>
</I>&gt;<i> I see.
</I>&gt;<i>
</I>&gt;<i> So you are suggesting the localStorage could have zero concurrency
</I>&gt;<i> guarantees and it is simply up to the developer to arrange things
</I>&gt;<i> themselves using this new primitive.
</I>&gt;<i>
</I>
Yes, exactly. Sorry for not making this clear.  I believe implicit locking
for LocalStorage (and the implicit unlocking) is going to yield something
very confusing and hard to implement well.  The potential for dead locks
when you fail to implicitly unlock properly scares me.

-Darin



&gt;<i>
</I>&gt;<i> That is an interesting idea. You're right that it overlaps with the
</I>&gt;<i> ideas that inspired shared workers, and the global script proposal.
</I>&gt;<i>
</I>&gt;<i> - a
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090909/da4886bf/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090909/da4886bf/attachment.htm</A>&gt;
</PRE>




































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022814.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
	<LI>Next message: <A HREF="022818.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22815">[ date ]</a>
              <a href="thread.html#22815">[ thread ]</a>
              <a href="subject.html#22815">[ subject ]</a>
              <a href="author.html#22815">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
