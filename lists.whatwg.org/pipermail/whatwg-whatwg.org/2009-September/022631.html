<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &quot;first script&quot; and impersonating other pages -	pushState(url)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22first%20script%22%20and%20impersonating%20other%20pages%20-%0A%09pushState%28url%29&In-Reply-To=%3C009201ca2ce8%247f270960%240a01a8c0%40mikedeskxp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022624.html">
   <LINK REL="Next"  HREF="022635.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &quot;first script&quot; and impersonating other pages -	pushState(url)</H1>
<!--htdig_noindex-->
    <B>Mike Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22first%20script%22%20and%20impersonating%20other%20pages%20-%0A%09pushState%28url%29&In-Reply-To=%3C009201ca2ce8%247f270960%240a01a8c0%40mikedeskxp%3E"
       TITLE="[whatwg] &quot;first script&quot; and impersonating other pages -	pushState(url)">mikewse at hotmail.com
       </A><BR>
    <I>Thu Sep  3 15:47:20 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022624.html">[whatwg] &quot;first script&quot; and impersonating other pages - pushState(url)
</A></li>
        <LI>Next message: <A HREF="022635.html">[whatwg] &quot;first script&quot; and impersonating other pages -	pushState(url)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22631">[ date ]</a>
              <a href="thread.html#22631">[ thread ]</a>
              <a href="subject.html#22631">[ subject ]</a>
              <a href="author.html#22631">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Ian Hickson wrote:
&gt;<i> 
</I>&gt;<i> On Thu, 3 Sep 2009, Mike Wilson wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - calling pushState(..., &quot;/pages/section1/thing2&quot;) when
</I>&gt;<i> &gt;   first script's basedir=/pages/section1 will be ok
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - calling pushState(..., &quot;/pages/section2/thing2&quot;) when
</I>&gt;<i> &gt;   first script's basedir=/pages/section1 will not be 
</I>&gt;<i> &gt;   allowed (and throw).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Is any of these wrong?
</I>&gt;<i> 
</I>&gt;<i> The path part of the URL is ignored when deciding whether or 
</I>&gt;<i> not to allow the call.
</I>
Rereading the spec again I see that. Sorry, my bad :-S
I see now that the first script's url is only used to keep 
pushState on the same origin, while I was expecting it to
keep pushState urls on the same &quot;sub branch&quot; path.

But doesn't this open up a fairly bad security exploit?

Let's say that I have rights to post to a blog on:
  www.corporatesite.com/fan/blog
Assuming I can get some JavaScript inside one of my blog
posts, I can then pretend I am redirecting the user to:
  www.corporatesite.com/topclientsonly/login
while I am really impersonating that page through pushState
and harvesting their passwords.

The result is that the address bar URL can't be trusted, as
any page on the site can impersonate any other without 
consent from that page or part of the site?

Best regards
Mike

</PRE>





























































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022624.html">[whatwg] &quot;first script&quot; and impersonating other pages - pushState(url)
</A></li>
	<LI>Next message: <A HREF="022635.html">[whatwg] &quot;first script&quot; and impersonating other pages -	pushState(url)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22631">[ date ]</a>
              <a href="thread.html#22631">[ thread ]</a>
              <a href="subject.html#22631">[ subject ]</a>
              <a href="author.html#22631">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
