<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RFC%3A%20Alternatives%20to%20storage%20mutex%20for%20cookies%20and%0A%09localStorage&In-Reply-To=%3C63df84f0909081900r2b38ef23i8553e0c6c103a228%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022798.html">
   <LINK REL="Next"  HREF="022674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RFC%3A%20Alternatives%20to%20storage%20mutex%20for%20cookies%20and%0A%09localStorage&In-Reply-To=%3C63df84f0909081900r2b38ef23i8553e0c6c103a228%40mail.gmail.com%3E"
       TITLE="[whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage">jonas at sicking.cc
       </A><BR>
    <I>Tue Sep  8 19:00:44 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022798.html">[whatwg] RFC: Alternatives to storage mutex for cookies and localStorage
</A></li>
        <LI>Next message: <A HREF="022674.html">[whatwg] Feature requests in WebSocket (Was: BWTP for WebSocket, transfer protocol)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22801">[ date ]</a>
              <a href="thread.html#22801">[ thread ]</a>
              <a href="subject.html#22801">[ subject ]</a>
              <a href="author.html#22801">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Sep 8, 2009 at 6:00 PM, Maciej Stachowiak&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> On Sep 8, 2009, at 4:27 PM, Chris Jones wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think I haven't been explaining my proposal clearly enough. &#160;Let me try
</I>&gt;&gt;<i> to err on the other side of brevity. &#160;Sorry if this is too pedantic.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Currently, UAs either (i) support localStorage or (ii) don't. &#160;Web apps
</I>&gt;&gt;<i> using localStorage must therefore determine whether the UA they're running
</I>&gt;&gt;<i> in supports localStorage, and adjust their behavior accordingly. &#160;If they
</I>&gt;&gt;<i> don't, they won't run in type (ii) UAs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So how do web apps implement this check? &#160;If I were implementing it, I
</I>&gt;&gt;<i> would test |window.localStorage === undefined|. &#160;I have no clue how web devs
</I>&gt;&gt;<i> actually implement it; I solicited feedback from them in earlier posts.
</I>&gt;<i>
</I>&gt;<i> I think this has a few problems:
</I>&gt;<i>
</I>&gt;<i> 1) There are probably Web apps that actually detect based on user agent
</I>&gt;<i> sniffing, rather than based on feature testing. No matter how much we tell
</I>&gt;<i> people to feature-test, there are still many Web sites (and even popular
</I>&gt;<i> JavaScript libraries) out there that look at the User-Agent string.
</I>&gt;<i>
</I>&gt;<i> 2) There are probably mobile-targeted Web apps aimed at devices like iPhone,
</I>&gt;<i> Palm Pre and Android which just assume LocalStorage is there (since it is
</I>&gt;<i> available on all their target devices).
</I>&gt;<i>
</I>&gt;<i> 3) For Web apps that used the older feature in good faith, it would be
</I>&gt;<i> suddenly taken away from their existing deployed apps. I expect this will
</I>&gt;<i> make developers unhappy even if it doesn't technically break their site but
</I>&gt;<i> rather just makes some functionality regress in browsers that support
</I>&gt;<i> LocalStorage, down to the level of non-supporting browsers. I would rather
</I>&gt;<i> let them keep using a suboptimal form of the feature than take it away
</I>&gt;<i> supposedly for their own good.
</I>
My concern with this solution is that pages are still very likely to
not think of any of this and instead use the simplest API available,
which undoubtedly will be the transaction-free unsafe API.

Thus for most pages this isn't better than not doing anything.

/ Jonas
</PRE>










































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022798.html">[whatwg] RFC: Alternatives to storage mutex for cookies and localStorage
</A></li>
	<LI>Next message: <A HREF="022674.html">[whatwg] Feature requests in WebSocket (Was: BWTP for WebSocket, transfer protocol)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22801">[ date ]</a>
              <a href="thread.html#22801">[ thread ]</a>
              <a href="subject.html#22801">[ subject ]</a>
              <a href="author.html#22801">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
