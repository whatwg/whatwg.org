<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RFC%3A%20Alternatives%20to%20storage%20mutex%20for%20cookies%20and%0A%09localStorage&In-Reply-To=%3C278fd46c0909080238o301fb638yb7068757c0060bb5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022760.html">
   <LINK REL="Next"  HREF="022763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage</H1>
<!--htdig_noindex-->
    <B>Aaron Boodman</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RFC%3A%20Alternatives%20to%20storage%20mutex%20for%20cookies%20and%0A%09localStorage&In-Reply-To=%3C278fd46c0909080238o301fb638yb7068757c0060bb5%40mail.gmail.com%3E"
       TITLE="[whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage">aa at google.com
       </A><BR>
    <I>Tue Sep  8 02:38:51 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022760.html">[whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage
</A></li>
        <LI>Next message: <A HREF="022763.html">[whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22762">[ date ]</a>
              <a href="thread.html#22762">[ thread ]</a>
              <a href="subject.html#22762">[ subject ]</a>
              <a href="author.html#22762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Sep 8, 2009 at 2:02 AM, Robert O'Callahan&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt; wrote:
&gt;<i> Looking back over previous threads on the storage mutex, I can't seem to
</I>&gt;<i> remember or find the reason that implementing the storage mutex for cookies
</I>&gt;<i> can't easily be done with a mutex per domain. Ian pointed out this approach
</I>&gt;<i> breaks if you can make synchronous script calls across origins (e.g. across
</I>&gt;<i> IFRAME boundaries), but can you actually make such calls? Or if you can
</I>&gt;<i> (NPAPI?), can we just declare that those APIs release the storage mutex?
</I>
I believe that synchronous cross-origin calls are possible a variety
of ways. Here is one way I found with a quick test: Resize an iframe
element. window.onresize is fired synchronously inside the frame. I
bet there are others.

&gt;<i> I know that setting document.domain makes this tricky because it
</I>&gt;<i> synchronously enables new cross-domain interactions, but can't we handle
</I>&gt;<i> that by declaring that setting document.domain releases the storage mutex?
</I>
All of these different ways that the storage mutex gets implicitly
released lead to weird behavior in edge cases. In my opinion, it would
be better to fix the API in a clean way than keep patching it like
this.

- a
</PRE>














































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022760.html">[whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage
</A></li>
	<LI>Next message: <A HREF="022763.html">[whatwg] RFC: Alternatives to storage mutex for cookies and	localStorage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22762">[ date ]</a>
              <a href="thread.html#22762">[ thread ]</a>
              <a href="subject.html#22762">[ subject ]</a>
              <a href="author.html#22762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
