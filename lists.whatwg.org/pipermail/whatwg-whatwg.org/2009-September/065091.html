<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Application defined &quot;locks&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Application%20defined%20%22locks%22&In-Reply-To=%3C11e306600909091624t53d2158ax83944419b563e6f5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065088.html">
   <LINK REL="Next"  HREF="065092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Application defined &quot;locks&quot;</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Application%20defined%20%22locks%22&In-Reply-To=%3C11e306600909091624t53d2158ax83944419b563e6f5%40mail.gmail.com%3E"
       TITLE="[whatwg] Application defined &quot;locks&quot;">robert at ocallahan.org
       </A><BR>
    <I>Wed Sep  9 16:24:31 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="065088.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
        <LI>Next message: <A HREF="065092.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65091">[ date ]</a>
              <a href="thread.html#65091">[ thread ]</a>
              <a href="subject.html#65091">[ subject ]</a>
              <a href="author.html#65091">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Sep 10, 2009 at 6:37 AM, Darin Fisher &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at chromium.org</A>&gt; wrote:

&gt;<i> Yes, exactly. Sorry for not making this clear.  I believe implicit locking
</I>&gt;<i> for LocalStorage (and the implicit unlocking) is going to yield something
</I>&gt;<i> very confusing and hard to implement well.  The potential for dead locks
</I>&gt;<i> when you fail to implicitly unlock properly scares me
</I>&gt;<i>
</I>
You mean when the browser implementation has a bug and fails to implicitly
unlock?

Giving Web authors the crappy race-prone and deadlock-prone locking
programming model scares *me*. Yes, your acquireLock can't get you into a
hard deadlock, strictly speaking, but you can still effectively deadlock
your application by waiting for a lock to become available that never can.
Also, how many authors will forget to test the result of acquireLock
(because they're used to other locking APIs that block) and find that things
are OK in their testing?

I think we should be willing to accept a very high implementation burden on
browser vendors in exchange for minimizing the burden on Web authors. Now,
if we find that authors are needing to build explicit locks using
localStorage, we should figure out their use-cases and see what a better
solution for those use-cases might be, instead of giving them a more
convenient way to endanger themselves.

Rob
-- 
&quot;He was pierced for our transgressions, he was crushed for our iniquities;
the punishment that brought us peace was upon him, and by his wounds we are
healed. We all, like sheep, have gone astray, each of us has turned to his
own way; and the LORD has laid on him the iniquity of us all.&quot; [Isaiah
53:5-6]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090910/1d1600d7/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090910/1d1600d7/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065088.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
	<LI>Next message: <A HREF="065092.html">[whatwg] Application defined &quot;locks&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65091">[ date ]</a>
              <a href="thread.html#65091">[ thread ]</a>
              <a href="subject.html#65091">[ subject ]</a>
              <a href="author.html#65091">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
