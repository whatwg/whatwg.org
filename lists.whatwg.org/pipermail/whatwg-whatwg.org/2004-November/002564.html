<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Arbitrary HTML in option-elements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Arbitrary%20HTML%20in%20option-elements&In-Reply-To=%3C41ACE864.5020808%40olav.dk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002563.html">
   <LINK REL="Next"  HREF="002565.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Arbitrary HTML in option-elements</H1>
<!--htdig_noindex-->
    <B>Olav Junker Kj&#230;r</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Arbitrary%20HTML%20in%20option-elements&In-Reply-To=%3C41ACE864.5020808%40olav.dk%3E"
       TITLE="[whatwg] Arbitrary HTML in option-elements">olav at olav.dk
       </A><BR>
    <I>Tue Nov 30 13:38:44 PST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="002563.html">[whatwg] Arbitrary HTML in option-elements
</A></li>
        <LI>Next message: <A HREF="002565.html">[whatwg] Olivier Planson is out of the office.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2564">[ date ]</a>
              <a href="thread.html#2564">[ thread ]</a>
              <a href="subject.html#2564">[ subject ]</a>
              <a href="author.html#2564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Matthew Raymond wrote:
 &gt; I doubt that you'd see popular user agents implement support for
 &gt; undefined behavior unless there's a specific use case that becomes 
common.

Sure, but I think the use case for more than plain text in options is 
pretty strong. Look at the toolbars in e.g. Microsoft Word, there is 
lots of dropdowns, and almost all of them have icons beside the textual 
content.

And the spec mentions it: (section 2.18)

 &gt; Two possibilities are sensible: rendering the content normally, just
 &gt; as it would have been outside the form control; and rendering the
 &gt; initial value only, with the rest of the content not displayed (unless
 &gt; forced to appear through some CSS).

This implies that rendering e.g. img-tags in an option-element is an 
optional feature. But in Appendix A it's clearly illegal. I think this 
is inconsistent.

Generally, I think its a very good thing that the spec tries to define 
how to handle invalid HTML. Undefined and optional behavior in 
interpreting HTML is bad thing IMHO.

Maybe the rules for parsing invalid HTML (in HTML5) could be 
generalized, something like:

- Unsupported element, or elements in a context where they are not 
allowed because of the DTD, should be ignored. However, if the ignored 
element has textual content, and the context allows pcdata, the content 
should be rendered.
- Attributes with a value that is malformed or illegal according to the 
spec should be ignored. Unknown or unsupported attributes should be ignored.

I think this is more or less consistent with current user agent 
behavior, however it greatly reduces the amount of unspecified behavior.

Of course, following these rules, anything but text content should be 
ignored in OPTION-elements.

Olav Junker Kj&#230;r

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002563.html">[whatwg] Arbitrary HTML in option-elements
</A></li>
	<LI>Next message: <A HREF="002565.html">[whatwg] Olivier Planson is out of the office.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2564">[ date ]</a>
              <a href="thread.html#2564">[ thread ]</a>
              <a href="subject.html#2564">[ subject ]</a>
              <a href="author.html#2564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
