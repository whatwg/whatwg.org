<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Issues with Web Sockets API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Issues%20with%20Web%20Sockets%20API&In-Reply-To=%3Cf965ae410906261034m47f3d117k7f430aaed4ae398f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="062861.html">
   <LINK REL="Next"  HREF="062863.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Issues with Web Sockets API</H1>
<!--htdig_noindex-->
    <B>Drew Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Issues%20with%20Web%20Sockets%20API&In-Reply-To=%3Cf965ae410906261034m47f3d117k7f430aaed4ae398f%40mail.gmail.com%3E"
       TITLE="[whatwg] Issues with Web Sockets API">atwilson at google.com
       </A><BR>
    <I>Fri Jun 26 10:34:28 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="062861.html">[whatwg] Issues with Web Sockets API
</A></li>
        <LI>Next message: <A HREF="062863.html">[whatwg] Issues with Web Sockets API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62862">[ date ]</a>
              <a href="thread.html#62862">[ thread ]</a>
              <a href="subject.html#62862">[ subject ]</a>
              <a href="author.html#62862">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Yes, but the &quot;closed&quot; state of a given WebSocket doesn't have to exactly
match the state of the underlying TCP connection, in the same way that
document.cookies doesn't exactly match the current set of cookies that the
network stack may be tracking (they can differ when HTTP responses are
received in the background while JS is executing).

So if the remote server closes the TCP connection, it generates a &quot;close&quot;
event which marks the WebSocket as closed. It means that you could have a
situation where you post messages to a WebSocket which aren't received by
the server because  the connection is closed, but that's true regardless due
to the asynchronous nature of the networking protocol.

-atw

On Fri, Jun 26, 2009 at 9:52 AM, Darin Fisher &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at chromium.org</A>&gt; wrote:

&gt;<i> On Fri, Jun 26, 2009 at 9:46 AM, Drew Wilson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">atwilson at google.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, Jun 26, 2009 at 9:18 AM, James Robinson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jamesr at google.com</A>&gt;wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> However, users can't usefully check the readyState to see if the
</I>&gt;&gt;&gt;<i> WebSocket is still open because there are not and cannot be any
</I>&gt;&gt;&gt;<i> synchronization guarantees about when the WebSocket may close.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Is this true? Based on our prior discussion surrounding cookies, it seems
</I>&gt;&gt;<i> like as a general rule we try to keep state from changing dynamically while
</I>&gt;&gt;<i> JS code is executing for exactly these reasons.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think this is a very different beast.  The state of a network connection
</I>&gt;<i> may change asynchronously whether we like it or not.  Unlike &quot;who&quot; may
</I>&gt;<i> access cookies or local storage, the state of the network connection is not
</I>&gt;<i> something we solely control.
</I>&gt;<i>
</I>&gt;<i> -Darin
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090626/b7f39701/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090626/b7f39701/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="062861.html">[whatwg] Issues with Web Sockets API
</A></li>
	<LI>Next message: <A HREF="062863.html">[whatwg] Issues with Web Sockets API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62862">[ date ]</a>
              <a href="thread.html#62862">[ thread ]</a>
              <a href="subject.html#62862">[ subject ]</a>
              <a href="author.html#62862">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
