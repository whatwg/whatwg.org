<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] clarification on ApplicationCaches &quot;cache failure steps&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20clarification%20on%20ApplicationCaches%20%22cache%20failure%20steps%22&In-Reply-To=%3C708552fb0906030814t68d8e1d5wd1a29cfa1e3f637c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="062371.html">
   <LINK REL="Next"  HREF="062373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] clarification on ApplicationCaches &quot;cache failure steps&quot;</H1>
<!--htdig_noindex-->
    <B>Andrei Popescu</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20clarification%20on%20ApplicationCaches%20%22cache%20failure%20steps%22&In-Reply-To=%3C708552fb0906030814t68d8e1d5wd1a29cfa1e3f637c%40mail.gmail.com%3E"
       TITLE="[whatwg] clarification on ApplicationCaches &quot;cache failure steps&quot;">andreip at google.com
       </A><BR>
    <I>Wed Jun  3 08:14:09 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="062371.html">[whatwg] [html5] Pre-Last Call Comments
</A></li>
        <LI>Next message: <A HREF="062373.html">[whatwg] several messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62367">[ date ]</a>
              <a href="thread.html#62367">[ thread ]</a>
              <a href="subject.html#62367">[ subject ]</a>
              <a href="author.html#62367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I have a question about the Application Caches update process:

<A HREF="http://dev.w3.org/html5/spec/Overview.html#application-cache-update-process">http://dev.w3.org/html5/spec/Overview.html#application-cache-update-process</A>

In the event of a failure during the update process (e.g. some error
reported when attempting to save the downloaded resources to stable
storage), the spec says the &quot;cache failure steps&quot; should be run:

<A HREF="http://dev.w3.org/html5/spec/Overview.html#cache-failure-steps">http://dev.w3.org/html5/spec/Overview.html#cache-failure-steps</A>

However, I am not sure it is perfectly clear what should happen after
that. If all the resources have been successfully downloaded but could
not be saved to stable storage, the newest application cache is
actually functional (as all of its resources are available in RAM).
Step 4 of the &quot;cache failure steps&quot; says:

&quot;If cache group has an application cache whose completeness flag is
incomplete, then discard that application cache.&quot;

IMHO, the fact that the application cache is functional (can be used
to serve content) before its resources were persisted to stable
storage is actually an implementation detail. As far as the spec is
concerned, such a cache is still incomplete, so it should be
discarded, right? But what should happen in the case that, prior to
the update process, there was another &quot;newest cache&quot;? Should the UA
continue to use it? Or should it fallback to the network? I can see
reasons for doing either but I was wondering if this should be agreed
on and written in the spec. Or maybe it is in the spec and I missed
it?

This question appeared while trying to fix the following bug in WebKit:

<A HREF="https://bugs.webkit.org/show_bug.cgi?id=25562">https://bugs.webkit.org/show_bug.cgi?id=25562</A>

Many thanks,
Andrei

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="062371.html">[whatwg] [html5] Pre-Last Call Comments
</A></li>
	<LI>Next message: <A HREF="062373.html">[whatwg] several messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62367">[ date ]</a>
              <a href="thread.html#62367">[ thread ]</a>
              <a href="subject.html#62367">[ subject ]</a>
              <a href="author.html#62367">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
