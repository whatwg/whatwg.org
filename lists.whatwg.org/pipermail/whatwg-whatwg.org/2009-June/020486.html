<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] html5 state handling: overview and extensions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20html5%20state%20handling%3A%20overview%20and%20extensions&In-Reply-To=%3CBAY116-DAV970BACAFD2C52A21394D2A43D0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020485.html">
   <LINK REL="Next"  HREF="020424.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] html5 state handling: overview and extensions</H1>
<!--htdig_noindex-->
    <B>Mike Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20html5%20state%20handling%3A%20overview%20and%20extensions&In-Reply-To=%3CBAY116-DAV970BACAFD2C52A21394D2A43D0%40phx.gbl%3E"
       TITLE="[whatwg] html5 state handling: overview and extensions">mikewse at hotmail.com
       </A><BR>
    <I>Thu Jun 18 01:07:25 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020485.html">[whatwg] html5 state handling: overview and extensions
</A></li>
        <LI>Next message: <A HREF="020424.html">[whatwg] Cue range implementation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20486">[ date ]</a>
              <a href="thread.html#20486">[ thread ]</a>
              <a href="subject.html#20486">[ subject ]</a>
              <a href="author.html#20486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Michael Nordman wrote:
&gt;<i> This breakdown is a useful way to think about application state
</I>&gt;<i> in the browser.
</I>
Thanks, it has been very useful to myself as a working model for
making vague thoughts of &quot;something missing&quot; into something that
is possible to measure and compare. Ideally, some similar kind of
overview could be maintained in the HTML5 spec to keep both spec
authors and readers sane.

&gt;<i> Another axis that could be incorporated into the 
</I>&gt;<i> model is lifetime.
</I>
You really hit the nail on the head there. Actually, my initial
attempt on a comparison table included a few additional columns:

General:
- state inherited by cloned browsing context
- persistent storage supported
- state protected/scoped by origin 
- state protected/scoped by origin+path
- lifetime control

Server-control:
- state travels to browser in response headers
- state travels to browser in response body

but I decided to start out with a cut-down version, as otherwise
definitely no-one would read my post (it was bad enough with the
length of it even being cut down ;-).

&gt;<i> There is some overlap between Server-
</I>&gt;<i> Controlled and Script-Controlled realms in cookies, applications
</I>&gt;<i> definitely have a dependency on that overlap being there.
</I>
Right, I missed including that in the post. Actually, in my 
initial table (mentioned above) I didn't split between client- 
and server-control, but had that as columns instead, so one
feature (cookies) could cover both script- and server-needs.
I should note that in this initial table of mine, &quot;normal&quot;
cookies serve both purposes but http-only cookies only do
server-controlled state. Here's an updated table with cookies
added:

SCRIPT-CONTROLLED STATE

Scope             Visibility : State construct
-----             ----------   ---------------------
user agent,       invisible  : cookies, WS localStorage
browsing context, invisible  : window.name, WS sessionStorage
document,         invisible  : -
history entry,    invisible  : history state
history entry,    url,       : url hash

&gt;<i> There
</I>&gt;<i> are two constructs not represented in your writeup, Database and
</I>&gt;<i> ApplicationCache.
</I>
Yes, they felt like somewhat different animals so I didn't
include them, maybe that was wrong. All the other ones are
some kind of simple data or name/value-paired data so I
focused on them.
My goal was also to make a matrix that would help us find
the missing pieces, by identifying the empty cells. When
adding too many different &quot;animals&quot; to the same matrix there
will be many empty cells, and it gets harder to see patterns.
Do you have ideas on how to incorporate Database and
ApplicationCache in the comparisons?

&gt;<i> &gt; Possible solutions would be to add a new &quot;documentStorage&quot; to
</I>&gt;<i> &gt; WebStorage, or to offer a History.setDocumentState method.
</I>&gt;<i> 
</I>&gt;<i> I see other possibilities with WebStorage too.
</I>&gt;<i>   &quot;documentStorage&quot; has persistent lifetime + document scope
</I>&gt;<i> others...
</I>&gt;<i>   transient lifetime + document scope  (transient does not 
</I>&gt;<i>   survive a browser restart)
</I>&gt;<i>   transient lifetime + user agent scope    &quot;temporaryStorage&quot;
</I>&gt;<i>   transient lifetime + history entry scope   &quot;privateStorage&quot;
</I>
Interesting ideas! My initial thought was that lifetime could be 
controlled in a way similar to cookies, ie no lifetime indicates 
transient lifetime, and for persistent lifetime you set an 
expiration date/time. Maybe the legacy of cookie expiration 
doesn't have to be the model here, but it would seem good if 
some of the suggested extensions are indeed implemented as 
something cookie-like.

mvh Mike

</PRE>










































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020485.html">[whatwg] html5 state handling: overview and extensions
</A></li>
	<LI>Next message: <A HREF="020424.html">[whatwg] Cue range implementation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20486">[ date ]</a>
              <a href="thread.html#20486">[ thread ]</a>
              <a href="subject.html#20486">[ subject ]</a>
              <a href="author.html#20486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
