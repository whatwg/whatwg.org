<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [html5] Pre-Last Call Comments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bhtml5%5D%20Pre-Last%20Call%20Comments&In-Reply-To=%3CPine.LNX.4.62.0906030732300.1648%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="062405.html">
   <LINK REL="Next"  HREF="062362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [html5] Pre-Last Call Comments</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bhtml5%5D%20Pre-Last%20Call%20Comments&In-Reply-To=%3CPine.LNX.4.62.0906030732300.1648%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] [html5] Pre-Last Call Comments">ian at hixie.ch
       </A><BR>
    <I>Wed Jun  3 02:15:58 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="062405.html">[whatwg] How long should sessionStorage data persist?
</A></li>
        <LI>Next message: <A HREF="062362.html">[whatwg] [html5] Pre-Last Call Comments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62361">[ date ]</a>
              <a href="thread.html#62361">[ thread ]</a>
              <a href="subject.html#62361">[ subject ]</a>
              <a href="author.html#62361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 5 Apr 2009, Giovanni Campagna wrote:
&gt;<i>
</I>&gt;<i> A few comments, as requested by Ian Hickson.
</I>&gt;<i> 
</I>&gt;<i> - End of 2.2.1, a typo: JavsScript instead of Javascript
</I>
Fixed.


&gt;<i> - From section 2.4.2 I don't understand if boolean attributes with
</I>&gt;<i> invalid values represent &quot;true&quot; or &quot;false&quot;. In addition, I don't
</I>&gt;<i> understand if an empty value is false (as in XHTML1.0) or true (as in
</I>&gt;<i> HTML4, because of the minimized syntax).
</I>&gt;<i> &gt;From my experience, I expect that the empty string (which is
</I>&gt;<i> equivalent to not specify the attribute at all) is false, and any
</I>&gt;<i> other value is true.
</I>
The spec says &quot;The presence of a boolean attribute on an element 
represents the true value, and the absence of the attribute represents the 
false value&quot;; is that not clear?


&gt;<i> - In 2.4.3 I don't see the point of all the digression about 
</I>&gt;<i> contentEditable, since it is noted that it doesn't work like that. I 
</I>&gt;<i> would leave the note to just &quot;Note: The empty string can be one of the 
</I>&gt;<i> keywords&quot; or &quot;Note: The empty string can a valid keyword&quot;
</I>
Done.


&gt;<i> - In 2.4.4.3 (and maybe in other places) I would prefer [A|E]BNF
</I>&gt;<i> instead of the prose description of a floating point number.
</I>
It's not obvious to me that this would be any clearer.


&gt;<i> I'm also not sure that the normative algorithm is needed.
</I>
You mean for parsing? How else would you know how to parse it? In some of 
the cases the algorithms don't accept any errorneous content at all, but 
in many cases we have to define how you handle bogus data, and I don't see 
how to do that any other way.


&gt;<i> I've also searched IEEE, IETF, ECMA, ISO and ANSI for another normative 
</I>&gt;<i> version of the syntax and processing, but I've found none. If you think 
</I>&gt;<i> that it is important to have it specified completely, you may submit an 
</I>&gt;<i> ID, so future technologies won't need to rewrite it again.
</I>
I'm not sure to what you refer. I certainly wouldn't want anyone reusing 
most of these definitions; many are the result of years of bugs causing 
legacy content to depend on weird quirks.


&gt;<i> - The second paragraph in 2.4.5.6 is hard to understand because the
</I>&gt;<i> verb is at the end. I would rewrite as &quot;A week-year with a number *yr*
</I>&gt;<i> has 53 weeks if corresponds to a year *yr* in the proleptic Gregorian
</I>&gt;<i> calendar that has a Thursday as its first day (January 1st), or if
</I>&gt;<i> *yr* where *yr* is a number divisible by 400, or a number divisible by
</I>&gt;<i> 4 but not by 100. In all other cases it has 52 weeks&quot;
</I>
Done.


&gt;<i> Also, don't rely on styles alone, use different words for identifiers
</I>&gt;<i> and prose. This includes also the Note following, where no styles are
</I>&gt;<i> applied and it is difficult to understand that &quot;year year&quot; is not a
</I>&gt;<i> typo but rather is the year numbered &quot;year&quot;.
</I>
I made the note use &quot;y&quot;, but in general I find using anything but &quot;year&quot; 
here gets really ugly.


&gt;<i> - Can't be simply referenced CSS3 Color in 2.4.6?
</I>&gt;<i> This way, implementors could have body[bgcolor] { background-color:
</I>&gt;<i> attr(bgcolor,color,white); } in the default CSS instead of using HTML5
</I>&gt;<i> specific rules.
</I>
The rules for parsing a legacy color value are very constrained and don't 
match CSS, no.


&gt;<i> - In 2.4.9 a valid hash reference must be equal to an ID, name is 
</I>&gt;<i> supported only for backward compatibility.
</I>
No, &lt;map&gt; uses name=&quot;&quot;.


&gt;<i> - Section 2.6 is superfluous: handling of application cache is specified 
</I>&gt;<i> in the appropriate section, handling of HTTP requests and caches is 
</I>&gt;<i> defined in RFC2616, handling of cookie is defined in the appropriate RFC 
</I>&gt;<i> (I don't remember the number), handling of about:blank is in the 
</I>&gt;<i> proposed about-uri-scheme ID. In addition, serialized queue-based 
</I>&gt;<i> handling of resources should not be mandated by the HTML5 specification 
</I>&gt;<i> (can't UAs be multi-threaded?)
</I>
Section 2.6 (fetching) is needed to define how the fetching algorithm 
(HTTP, etc) fit into the event loop mechanism and the storage mutex.


&gt;<i> - Rewriting 2.6.1 without the HTTP word is definitely better. Browsers 
</I>&gt;<i> are not required to support HTTP, AFAIK. You can write &quot;a GET method&quot; 
</I>&gt;<i> (because GET is anyway an English word), &quot;a response code&quot; (most 
</I>&gt;<i> protocols have response codes) and &quot;metadata&quot; (instead of headers, that 
</I>&gt;<i> SMTP, POP, FTP don't support)
</I>
I think that would be far less clear.


&gt;<i> - 2.6.2 should be implied by the HTTP-over-TLS RFC
</I>
Apparently implying it isn't good enough, given current implementations.


&gt;<i> - In section 2.7.1, in sentence &quot;Extensions must not be used for 
</I>&gt;<i> determining resource types for resources fetched over HTTP.&quot;, do you 
</I>&gt;<i> mean &quot;File extensions&quot;, like .txt or .png, or &quot;User agent extensions&quot; 
</I>&gt;<i> (additions to the algorithm)?
</I>
This is fixed in Adam's draft now.


&gt;<i> - Still in section 2.7.1, why the algorithm is a violation of RFC2616? 
</I>&gt;<i> Because it is case insensitive? Because it allows spaces? Because it 
</I>&gt;<i> does not imply ISO-8859-1 if no charset is explicit? Because it does not 
</I>&gt;<i> imply ASCII for text/* mime types?
</I>
Because it means not blindly honouring Content-Type.


&gt;<i> - Why don't you add &quot;&lt;?xml&quot; to the sniffing table?
</I>
I'll leave this up to Adam.


&gt;<i> - In section 2.8, &quot;x-x-big5&quot; is not a different encoding than &quot;big5&quot;,
</I>&gt;<i> it rather seems an alias (and as such should be submitted to IANA)
</I>
Agreed; if anyone would like to volunteer to do this that would be very 
helpful.


&gt;<i> - Later in the same section, I don't understand why you don't support 
</I>&gt;<i> those encodings, if the encoding declaration is explicit in the protocol 
</I>&gt;<i> layer or is allowed by a different specification. For example, XML 
</I>&gt;<i> allows EBDIC based encodings.
</I>
UTF-32 is widely misimplemented. EBCDIC isn't widely supported. Generally 
speaking we're trying to reduce encoding proliferation.


&gt;<i> In addition, I don't understand why supporting UTF-32 or EBDIC means a 
</I>&gt;<i> change to the algorithm, that are defined in terms of Unicode code 
</I>&gt;<i> points (very similar to UTF-32 characters)
</I>
Supporting UTF-32 or EBCDIC would mean changes to the character encoding 
sniffing algorithms.


&gt;<i> - In section 2.9.1, I completely don't understand the part about DOM 
</I>&gt;<i> attributes of type HTMLElement, especially the subpart about setting.
</I>
I'm not sure how to clarify it... What don't you understand? Or rather, 
what _do_ you understand?


&gt;<i> - In section 2.9.5, instead of define DOMStringMap only for EcmaScript, 
</I>&gt;<i> use explicit indexing operation in the IDL, add them the [NameGetter] / 
</I>&gt;<i> [NameSetter] / [NameDeleter] attributes, and add a [NoIndexingOperation] 
</I>&gt;<i> to the whole interface.
</I>
Why?


&gt;<i> - In section 2.9.6 you discourage use of hasFeature. Firstly, if an 
</I>&gt;<i> implementation says true and it is not compliant, it is not a spec bug, 
</I>&gt;<i> it is an implementation bug.
</I>
This isn't much of comfort to authors.


&gt;<i> Secondly, to allow implementation granularity, you could define more 
</I>&gt;<i> features (for example HTML 5.0, XHTML 5.0, HTMLCanvas2D 5.0, HTMLSection 
</I>&gt;<i> 5.0, HTMLDatagrid 5.0, HTMLMediaObject 5.0 etc.)
</I>
Why not rely on the features themselves instead? The whole hasFeature() 
idea is deeply flawed, IMHO.


&gt;<i> - In section 3.2.1, seems that interfaces other than Document and 
</I>&gt;<i> HTMLDocument should be exposed by the object only if different 
</I>&gt;<i> namespaces are found in the document. This is not true: SVG UAs for 
</I>&gt;<i> example must always expose the SVGDocument interface on Document.
</I>
What SVG requires is defined by SVG; the spec here is just saying that 
HTML5 isn't attempting to push the other specs away.


&gt;<i> - document.lastModified should return null or the empty string if the 
</I>&gt;<i> last modification date is not known (what if the document was really 
</I>&gt;<i> last modified on January 1st 1970?)
</I>
This was changed to match implementations.


&gt;<i> - Parsing is outside the scope of section 3.2.3
</I>
I'm not sure I follow.

&gt;<i> and I don't understand why CSS1Compat vs BackCompat if the quirks are 
</I>&gt;<i> limited to parsing
</I>
The names were invented by Microsoft long ago.


&gt;<i> - On setting document.charset, if the specified charset is not supported 
</I>&gt;<i> it should be treated as non registered.
</I>
Done.


&gt;<i> - Why do we have both document.charset and document.characterSet?
</I>
I'd rather have neither, but implementations have both.


&gt;<i> - In section 3.2.4, about title in the author-only text, remember that 
</I>&gt;<i> Document always implements SVGDocument and HTMLDocument.
</I>
Yes?


&gt;<i> - What on earth does &quot;incumbent&quot; mean? (about document.body)
</I>
It's the one currently holding the office of &quot;the body element&quot;, as 
opposed to the one that's about to replace it.


&gt;<i> - Is it necessary to have that mess of property indexing on HTMLDocument 
</I>&gt;<i> (that, by the way, may be implemented along with other language specific 
</I>&gt;<i> interfaces)? Just drop them at all: existing browser will continue to 
</I>&gt;<i> implement it, but new browser won't, and neither new sites will use it.
</I>
The idea is to define what it takes to write a browser that supports 
legacy pages, which is more or less what browsers do now, so 
unfortunately, we can't drop a feature just because we don't like it.


&gt;<i> - Named elements is defined twice: once before the algorithm, and once 
</I>&gt;<i> after
</I>
I can only find one definition for HTMLDocument; can you elaborate?


&gt;<i> - In section 3.3.3.7, instead of defining the syntax of style
</I>&gt;<i> attributes, reference &lt;<A HREF="http://www.w3.org/TR/css-style-attr">http://www.w3.org/TR/css-style-attr</A>&gt;
</I>
That draft is not actively maintained, so it's not clear that it is a good 
draft to reference yet.


&gt;<i> - In section 4.2.5.3, a document may have a default language even if it 
</I>&gt;<i> doesn't have a content-language http-equiv, if it has a Content-Language 
</I>&gt;<i> HTTP header.
</I>
No, the Content-Language HTTP header doesn't set the default language.


&gt;<i> - Section 4.2.7 should be completely delegated to CSSOM
</I>
This section defines the interface to CSSOM; why would CSSOM define the 
HTML behaviour?


&gt;<i> - Noscript should be allowed in XML, just without the complexity (and 
</I>&gt;<i> simply treated as display:none if scripting is enabled)
</I>
Why?


&gt;<i> - And is a grammar mistake in &quot;These juicy, green apples and make a 
</I>&gt;<i> great filling for apple pies&quot; (the example in 4.4.2)
</I>
Fixed.


&gt;<i> - I completely cannot understand 4.4.10.2
</I>
Assuming you mean the section that is now 4.4.11.2 Distinguishing 
site-wide headings from page headings, could you elaborate? What is the 
first problem?


&gt;<i> - I would like to disagree with the man who disagreed with the other man 
</I>&gt;<i> who disagreed with Ian Hickson (who said that things that are impossible 
</I>&gt;<i> just take longer) (section about &lt;q&gt;)
</I>
Not sure if this is a joke or a request to change the spec. :-)


&gt;<i> - I don't think it is of any use to link a BBC article in 4.6.20
</I>
It just helps give context.


&gt;<i> - Section 4.8.3 still refers to the Window Object specification, which I 
</I>&gt;<i> think has been superseded by HTML5
</I>
Yeah, I have a note about fixing this in the source. This will be fixed 
in due course.


&gt;<i> - classid is not a conforming attribute for object, and yet it is used 
</I>&gt;<i> in the algorithm to find a plugin. AFAIK, classid is only used by IE 
</I>&gt;<i> (along with COM) so I don't think it is a problem to drop it completely.
</I>
Actually it's used by a number of implementations much as described by the 
algorithm.


&gt;<i> - in HTMLFormElement, the function item should accept an integer, not a 
</I>&gt;<i> DOMString (because it is an IndexGetter) Same in HTMLSelectElement
</I>
Fixed.


&gt;<i> - In section 4.10.4, the table about which attributes applies to the 
</I>&gt;<i> various input types overflows in Opera 9.64 (1280x768 being the 
</I>&gt;<i> resolution, 12pt the font size) and it is very hard to read
</I>
Not sure how to improve this. There's a lot of data here.


&gt;<i> - In 4.10.4.1.5 I expect that neither the user is able to see the password
</I>
If the user agent is able to hide the password from everyone but the user, 
that would be a conforming implementation (and a far more useful one than 
today's), so I disagree.


&gt;<i> - In 4.10.4.2.8 an &quot;A&quot; is missing in the part number example
</I>
Fixed.


&gt;<i> I hope that this will help someone
</I>
Indeed, thanks!

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="062405.html">[whatwg] How long should sessionStorage data persist?
</A></li>
	<LI>Next message: <A HREF="062362.html">[whatwg] [html5] Pre-Last Call Comments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62361">[ date ]</a>
              <a href="thread.html#62361">[ thread ]</a>
              <a href="subject.html#62361">[ subject ]</a>
              <a href="author.html#62361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
