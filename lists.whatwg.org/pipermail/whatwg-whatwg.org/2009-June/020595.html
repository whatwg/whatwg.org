<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Issues with Web Sockets API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Issues%20with%20Web%20Sockets%20API&In-Reply-To=%3Cad1a0c1e0906261411u6033d823v9ba84698e7397815%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020593.html">
   <LINK REL="Next"  HREF="020596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Issues with Web Sockets API</H1>
<!--htdig_noindex-->
    <B>James Robinson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Issues%20with%20Web%20Sockets%20API&In-Reply-To=%3Cad1a0c1e0906261411u6033d823v9ba84698e7397815%40mail.gmail.com%3E"
       TITLE="[whatwg] Issues with Web Sockets API">jamesr at google.com
       </A><BR>
    <I>Fri Jun 26 14:11:08 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020593.html">[whatwg] Issues with Web Sockets API
</A></li>
        <LI>Next message: <A HREF="020596.html">[whatwg] Issues with Web Sockets API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20595">[ date ]</a>
              <a href="thread.html#20595">[ thread ]</a>
              <a href="subject.html#20595">[ subject ]</a>
              <a href="author.html#20595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Jun 26, 2009 at 5:01 PM, Drew Wilson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">atwilson at google.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Fri, Jun 26, 2009 at 1:14 PM, Kelly Norton &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">knorton at google.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> One thing about postMessage that I'm curious about. Since it has to report
</I>&gt;&gt;<i> failure synchronously by throwing an INVALID_STATE_ERR, that seems to imply
</I>&gt;&gt;<i> that all data must be written to a socket before returning and cannot be
</I>&gt;&gt;<i> asynchronously delivered to an I/O thread without adding some risk of
</I>&gt;&gt;<i> silently dropping messages.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don't think that's the intent of the spec - the intent is that
</I>&gt;<i> INVALID_STATE_ERR is sent if the port is in a closed state, not if there's
</I>&gt;<i> an I/O error after send. But Michael's right, I don't think there's any way
</I>&gt;<i> to determine that the server received the message - I guess the intent is
</I>&gt;<i> that applications will build their own send/ack protocol on top of
</I>&gt;<i> postMessage(), as you note.
</I>&gt;<i>
</I>&gt;<i> -atw
</I>&gt;<i>
</I>
The concept of a port being in a closed state is not very well defined - if
the state means only the readyState status, then when can the state legally
be updated?  If it has some meaning closer to the state of the underlying
connection, then it can't be queried synchronously without very expensive
synching to the I/O thread or process.

Forcing applications to build their own send/ack functionality would be
pretty tragic considering that WebSockets are built on top of TCP.

- James
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090626/0241bc62/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090626/0241bc62/attachment-0001.htm</A>&gt;
</PRE>











































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020593.html">[whatwg] Issues with Web Sockets API
</A></li>
	<LI>Next message: <A HREF="020596.html">[whatwg] Issues with Web Sockets API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20595">[ date ]</a>
              <a href="thread.html#20595">[ thread ]</a>
              <a href="subject.html#20595">[ subject ]</a>
              <a href="author.html#20595">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
