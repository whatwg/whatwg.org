<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] localStorage behavior when cookies mode is session-only
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20behavior%20when%20cookies%20mode%20is%20session-only&In-Reply-To=%3CPine.LNX.4.62.0906032014150.1648%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="062375.html">
   <LINK REL="Next"  HREF="062377.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] localStorage behavior when cookies mode is session-only</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20behavior%20when%20cookies%20mode%20is%20session-only&In-Reply-To=%3CPine.LNX.4.62.0906032014150.1648%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] localStorage behavior when cookies mode is session-only">ian at hixie.ch
       </A><BR>
    <I>Wed Jun  3 13:15:30 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="062375.html">[whatwg] optgroup element used for selection
</A></li>
        <LI>Next message: <A HREF="062377.html">[whatwg] localStorage behavior when cookies mode is session-only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62376">[ date ]</a>
              <a href="thread.html#62376">[ thread ]</a>
              <a href="subject.html#62376">[ subject ]</a>
              <a href="author.html#62376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 9 Apr 2009, Honza Bambas wrote:
&gt;<i>
</I>&gt;<i> In the W3C spec for localStorage 
</I>&gt;<i> <A HREF="http://dev.w3.org/html5/webstorage/#the-localstorage-attribute">http://dev.w3.org/html5/webstorage/#the-localstorage-attribute</A> is said 
</I>&gt;<i> to present it (the persistent storage) the same way as cookies.
</I>&gt;<i> 
</I>&gt;<i> There were suggestion to throw DOM_QUOTA_ERROR exception when storing to 
</I>&gt;<i> localStorage in case when cookies are in a session-only mode for a 
</I>&gt;<i> host/page. It makes sense from several reasons. This way web apps may 
</I>&gt;<i> decide or inform user about situation that the page cannot store to 
</I>&gt;<i> localStorage while there is no way for the page to figure out that 
</I>&gt;<i> cookies mode is session-only and web app still may freely read from the 
</I>&gt;<i> storage.
</I>&gt;<i> 
</I>&gt;<i> My suggestion is then:
</I>&gt;<i> - allow a page to obtain valid localStorage object
</I>&gt;<i> - allow read from it
</I>&gt;<i> - throw DOM_QUOTA_ERROR when storing to it
</I>&gt;<i> 
</I>&gt;<i> But I don't know what to do in case of call to clear() and removeItem() 
</I>&gt;<i> methods. It would exposes the cookie behavior again when it 
</I>&gt;<i> fails/throws.
</I>
Wouldn't it be best for the UA to store the data as normal, and report to 
the user in some informative messages somewhere in the interface that data 
has been stored but will be discarded? (The UA could even offer to save 
it, in fact.)

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="062375.html">[whatwg] optgroup element used for selection
</A></li>
	<LI>Next message: <A HREF="062377.html">[whatwg] localStorage behavior when cookies mode is session-only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62376">[ date ]</a>
              <a href="thread.html#62376">[ thread ]</a>
              <a href="subject.html#62376">[ subject ]</a>
              <a href="author.html#62376">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
