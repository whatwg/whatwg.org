<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] nested hashchange events
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20nested%20hashchange%20events&In-Reply-To=%3C4A43A663.3070605%40helsinki.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020576.html">
   <LINK REL="Next"  HREF="020578.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] nested hashchange events</H1>
<!--htdig_noindex-->
    <B>Olli Pettay</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20nested%20hashchange%20events&In-Reply-To=%3C4A43A663.3070605%40helsinki.fi%3E"
       TITLE="[whatwg] nested hashchange events">Olli.Pettay at helsinki.fi
       </A><BR>
    <I>Thu Jun 25 09:31:31 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020576.html">[whatwg] nested hashchange events
</A></li>
        <LI>Next message: <A HREF="020578.html">[whatwg] nested hashchange events
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20577">[ date ]</a>
              <a href="thread.html#20577">[ thread ]</a>
              <a href="subject.html#20577">[ subject ]</a>
              <a href="author.html#20577">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>IE8 seems to fire hashchange asynchronously.
So it fires some time after window.location = &quot;somenewvalue&quot;; has been 
called.
Perhaps asynchronous firing is good enough (and it certainly is easier 
to implement safely) and could be added to the spec.

-Olli


On 6/25/09 1:46 PM, Olli Pettay wrote:
&gt;<i> And it seems like IE scrolls first and then dispatches hashchange events.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 6/25/09 11:44 AM, Olli Pettay wrote:
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> currently &quot;6.11.9 History traversal&quot; doesn't seem to handle
</I>&gt;&gt;<i> nested hashchange events too well.
</I>&gt;&gt;<i> If there is a fragment id change to A, hashchange is dispatched, then
</I>&gt;&gt;<i> if the listener changes the fragment to B, there is a new hashchange and
</I>&gt;&gt;<i> after that the page will scroll to B. But the fragment change to A
</I>&gt;&gt;<i> hasn't finished yet, so the page will then scroll to A.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Either one should be able prevent the default action of hashchange
</I>&gt;&gt;<i> (scrolling), or hashchange should be dispatched after scrolling.
</I>&gt;&gt;<i> I think I'd prefer the latter. That would keep things simple and prevent
</I>&gt;&gt;<i> all sort of strange cases like the example above if preventDefault isn't
</I>&gt;&gt;<i> called.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also, what is the reason for &quot;if the Document's current document
</I>&gt;&gt;<i> readiness is the string 'complete'&quot; requirement?
</I>&gt;&gt;<i> I often click fragment links while the page is still loading, especially
</I>&gt;&gt;<i> when the page is large or slow loading. Why shouldn't the
</I>&gt;&gt;<i> page get notified that it has scrolled to some new location because of
</I>&gt;&gt;<i> fragment id change.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Olli
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>





































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020576.html">[whatwg] nested hashchange events
</A></li>
	<LI>Next message: <A HREF="020578.html">[whatwg] nested hashchange events
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20577">[ date ]</a>
              <a href="thread.html#20577">[ thread ]</a>
              <a href="subject.html#20577">[ subject ]</a>
              <a href="author.html#20577">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
