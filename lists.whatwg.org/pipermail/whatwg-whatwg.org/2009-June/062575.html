<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Expose event.dataTransfer.files accessor to allow file	drag and drop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Expose%20event.dataTransfer.files%20accessor%20to%20allow%20file%0A%09drag%20and%20drop&In-Reply-To=%3C7789133a0906100137h92aa238na24079ab5a6463a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="062573.html">
   <LINK REL="Next"  HREF="062576.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Expose event.dataTransfer.files accessor to allow file	drag and drop</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Expose%20event.dataTransfer.files%20accessor%20to%20allow%20file%0A%09drag%20and%20drop&In-Reply-To=%3C7789133a0906100137h92aa238na24079ab5a6463a%40mail.gmail.com%3E"
       TITLE="[whatwg] Expose event.dataTransfer.files accessor to allow file	drag and drop">whatwg at adambarth.com
       </A><BR>
    <I>Wed Jun 10 01:37:03 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="062573.html">[whatwg] HTML5 ruby spec: &lt;rp&gt;
</A></li>
        <LI>Next message: <A HREF="062576.html">[whatwg] Expose event.dataTransfer.files accessor to allow file drag and drop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62575">[ date ]</a>
              <a href="thread.html#62575">[ thread ]</a>
              <a href="subject.html#62575">[ subject ]</a>
              <a href="author.html#62575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>SUMMARY

Currently the &lt;input&gt; element exposes selected files via a &quot;files&quot;
accessor (i.e., as in <A HREF="https://developer.mozilla.org/En/NsIDOMFileList">https://developer.mozilla.org/En/NsIDOMFileList</A>
and <A HREF="http://www.w3.org/TR/file-upload/">http://www.w3.org/TR/file-upload/</A>).  We should add a similar
accessor to event.dataTransfer to enable drag-and-drop of files onto
web pages.

USE CASE

When interacting with a webmail site, users would like to be able to
attach files to email messages by dragging them onto the browser's
content area, as in desktop email clients.  My understanding is that
this is one of the top user requests for Gmail, for example.

WORK AROUNDS

Currently, webmail sites work around this limitation by using the
fugly &lt;input type=&quot;file&quot;&gt; control or by using a plug-in, such as
Flash, to handle file uploads.  Other sites, such as Flickr, work
around this limitation by asking users to download an EXE (i.e., the
Flickr uploader) that handles file drag-and-drop.

PROPOSAL

When the user drags-and-drops files onto a web page, we should expose
those files to the page via a &quot;files&quot; accessor on the dataTransfer
property of the event object.  This feature is consistent with HTML
5's security model for drag and drop.  There are a number of different
API choices, but this appears to be the cleanest and most consistent
with the future of web pages interacting with local files.

Alternative APIs include getData('File'), as defined in
<A HREF="http://msdn.microsoft.com/en-us/library/ms537658(VS.85">http://msdn.microsoft.com/en-us/library/ms537658(VS.85</A>).aspx.
However, it does not appear that IE ever implemented this API.  (Also,
note that IE doesn't follow HTML 5's clipboard security model.)
Mozilla has an equivalent API in
event.dataTransfer.mozGetDataAt(&quot;application/x-moz-file&quot;, 0).

Exposing the files attribute is better than these alternatives because
it lets the web page get an object of type File, which can then be
handed off to a future version of XMLHttpRequest, as in
xhr.send(file), without synchronous access to the disk.

IMPLEMENTATION

WebKit has an experimental implementation of this API in
<A HREF="https://bugs.webkit.org/show_bug.cgi?id=25916.">https://bugs.webkit.org/show_bug.cgi?id=25916.</A>

Adam

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="062573.html">[whatwg] HTML5 ruby spec: &lt;rp&gt;
</A></li>
	<LI>Next message: <A HREF="062576.html">[whatwg] Expose event.dataTransfer.files accessor to allow file drag and drop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62575">[ date ]</a>
              <a href="thread.html#62575">[ thread ]</a>
              <a href="subject.html#62575">[ subject ]</a>
              <a href="author.html#62575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
