<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;a href=&quot;&quot; ping=&quot;&quot;&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Ca%20href%3D%22%22%20ping%3D%22%22%3E&In-Reply-To=%3CPine.LNX.4.62.0510231912460.23945%40dhalsim.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="047212.html">
   <LINK REL="Next"  HREF="047216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;a href=&quot;&quot; ping=&quot;&quot;&gt;</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Ca%20href%3D%22%22%20ping%3D%22%22%3E&In-Reply-To=%3CPine.LNX.4.62.0510231912460.23945%40dhalsim.dreamhost.com%3E"
       TITLE="[whatwg] &lt;a href=&quot;&quot; ping=&quot;&quot;&gt;">ian at hixie.ch
       </A><BR>
    <I>Sun Oct 23 16:26:55 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="047212.html">[whatwg] &lt;a href=&quot;&quot; ping=&quot;&quot;&gt;
</A></li>
        <LI>Next message: <A HREF="047216.html">[whatwg] &lt;a href=&quot;&quot; ping=&quot;&quot;&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47215">[ date ]</a>
              <a href="thread.html#47215">[ thread ]</a>
              <a href="subject.html#47215">[ subject ]</a>
              <a href="author.html#47215">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Fri, 21 Oct 2005, S. Mike Dierken wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; Bearing the above in mind, I've added a section to the &lt;a&gt; element 
</I>&gt;<i> &gt; that describes a ping=&quot;&quot; attribute. The URIs given in this attribute 
</I>&gt;<i> &gt; would be followed when the user clicks the link, thus getting around 
</I>&gt;<i> &gt; the problems listed above.
</I>&gt;<i>
</I>&gt;<i> The term 'ping' in terms of RSS/blogs often means to POST some data, but 
</I>&gt;<i> in this case, it would be a GET request - that may get confusing.
</I>
It would be a POST request, so I think that's ok.


&gt;<i> Perhaps 'also-get' or 'snoop-href' something like that.
</I>
&quot;ping&quot; seems clearer than those two, especially since it is a POST 
request. But I'm not tied to the name if people prefer another one.


&gt;<i> Ideally, the data within the tags would be able to have more than one anchor
</I>&gt;<i> and each would have different roles, but I don't think HTML supports that
</I>&gt;<i> (except for the &lt;link&gt; elements in the &lt;head&gt; section since they apply to
</I>&gt;<i> the containing document). For example: 
</I>&gt;<i>  &lt;a href='...' rel='default'&gt;&lt;a href='...' rel='snoop'&gt;this uses nested
</I>&gt;<i> anchors - which are illegal&lt;/a&gt;&lt;/a&gt;
</I>&gt;<i> (nested anchors are illegal I know...
</I>&gt;<i> <A HREF="http://www.w3.org/TR/REC-html40/struct/links.html#h-12.2.2">http://www.w3.org/TR/REC-html40/struct/links.html#h-12.2.2</A>)
</I>
Yeah this seems like over-engineering the solution. :-)


On Sat, 22 Oct 2005, dolphinling wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; In my experience, &quot;they&quot; are ok with it being separate, as it conveys 
</I>&gt;<i> &gt; a number of benefits to the user. (I would consider my source on this 
</I>&gt;<i> &gt; matter reasonably authoritative.)
</I>&gt;<i> 
</I>&gt;<i> Hmm... perhaps your source could explain his reasoning here? :) It's 
</I>&gt;<i> extremely easy to make non-circumventable tracking, and I assumed that 
</I>&gt;<i> most times it _was_ circumventable were due to ignorance rather than an 
</I>&gt;<i> informed decision. To me, it seems, the benefits to an advertising 
</I>&gt;<i> company of doing so outweigh the benefits of not.
</I>
The reasoning is simple. Screwing the customer for a short-term gain is 
never to the benefit of the advertising company.


On Sat, 22 Oct 2005, dolphinling wrote:
&gt;<i> 
</I>&gt;<i> | User agents should allow the user to disable this behaviour, for
</I>&gt;<i> | example controlled by a setting that also disables the sending of HTTP
</I>&gt;<i> | Referrer headers. If the behaviour has been disabled, UAs may either
</I>&gt;<i> | ignore the ping attribute altogether, or selectively ignore URIs in
</I>&gt;<i> | the list based on the user's preference (e.g. ignoring any third-party
</I>&gt;<i> | URIs).
</I>&gt;<i> 
</I>&gt;<i> This sounds slightly wrong to me. &quot;If it's disabled, UAs may choose to 
</I>&gt;<i> in fact only disable part of it.&quot;
</I>
Yeah I should reword that. Fixed.


&gt;<i> | For URIs that are HTTP URIs, the requests must be performed using the
</I>&gt;<i> | POST method. User agents must ignore the entity body returned, but
</I>&gt;<i> | must honour the HTTP headers  in particular, HTTP cookie headers.
</I>&gt;<i> 
</I>&gt;<i> Should be changed to &quot;must ignore any entity bodies returned&quot;, to deal 
</I>&gt;<i> with redirects.
</I>
Fixed.


&gt;<i> What happens if I do ping=&quot;<A HREF="ftp://ftp.example.org/file">ftp://ftp.example.org/file</A>&quot;? Would the UA download
</I>&gt;<i> that file? Perhaps something like:
</I>&gt;<i> 
</I>&gt;<i> | Authors should use only HTTP URIs. User agents may ignore any non-HTTP
</I>&gt;<i> | URIs.
</I>&gt;<i> 
</I>&gt;<i> is in order?
</I>
Well the remote server needs to be contacted, for sure. Since the entity 
body is ignored it's up the UA whether the whole download happens or not 
(from a user's point of view, you can't really tell the difference, and 
from a server's point of view, it doesn't really matter).


&gt;<i> | When the ping  attribute is present, user agents should clearly
</I>&gt;<i> | indicate to the user that following the hyperlink will also cause
</I>&gt;<i> | secondary requests to be sent in the background, possibly including
</I>&gt;<i> | listing the actual target URIs.
</I>&gt;<i> 
</I>&gt;<i> Is this necessary? I would leave it entirely up to the UAs rather than saying
</I>&gt;<i> they SHOULD do it.
</I>
It's a privacy concern, so I think a SHOULD is in order, no? Exactly how 
it is done is up to the UA, but security and privacy concerns should IMHO 
be taken into account unless there are very good reasons not to (which is 
what SHOULD means).


&gt;<i> | Note: ... but authors are urged to use the ping attribute so that the
</I>&gt;<i> | user agent can .
</I>&gt;<i> 
</I>&gt;<i> Perhaps this sentence should be ended? :)
</I>
Oops! Fixed.


On Fri, 21 Oct 2005, S. Mike Dierken wrote:
&gt;<i> 
</I>&gt;<i> Will the user-agent represent these links in a special way, so the user 
</I>&gt;<i> is made aware of the fact that a possibly unsafe action is being 
</I>&gt;<i> requested?
</I>
I'm not sure what you mean by &quot;potentially unsafe&quot;, but yes, the whole 
point is that the UA would be able to take this ping=&quot;&quot; attribute and 
provide better UI.

BTW, bear in mind that it is quite possible for scripts to send arbitary 
POST requests to arbitrary servers with arbitrary data today, silently, 
without the user knowing or having any visible UI (this has in fact been 
possible for years). This isn't a particularily high security risk (sites 
are expected to check things like Referer headers and use unpredictable 
confirmation tokens in user confirmation pages).


&gt;<i> &gt; I would say it's OK to send a POST as a side effect because it's going 
</I>&gt;<i> &gt; to an URL where the developer expects a POST.
</I>&gt;<i>
</I>&gt;<i> But that's not what the user clicking the link expects.
</I>
I doubt the user clicking the link expects much of anything except getting 
Free Downloads Now! or whatever the advert says.


On Fri, 21 Oct 2005, S. Mike Dierken wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; GET means that you can do it again without affecting anything. In the 
</I>&gt;<i> &gt; case of tracking, you can't -- the very act of contacting that 
</I>&gt;<i> &gt; tracking URI can cost someone money. Hence POST. (This is another 
</I>&gt;<i> &gt; advantage of ping over redirects, come to think of it.)
</I>&gt;<i>
</I>&gt;<i> Since it isn't costing the /user/ any money, aren't those server 
</I>&gt;<i> side-effects immaterial?
</I>
I don't think &quot;immaterial&quot; is the word I would use. It would fail to serve 
the full purpose of the pinging if the pinging were to be cached by 
intranet proxies!


On Fri, 21 Oct 2005, S. Mike Dierken wrote:
&gt;<i> 
</I>&gt;<i> Since this is effectively capturing where the user's attention is being
</I>&gt;<i> spent (the click event I mean), should you also define the other set of
</I>&gt;<i> events of interest as well?
</I>&gt;<i>  &lt;a href=&quot;...&quot; on-click-notify=&quot;myattention.org/dierken&quot;
</I>&gt;<i> on-hover-notify=&quot;myattention.org/dierken&quot;
</I>&gt;<i> on-copy-notify=&quot;myattention.org/dierken&quot;&gt;Wicked Cool Stuff Here&lt;/a&gt;
</I>
Well we could, but demand seems to be primarily for just knowing about 
clicks, not anything else.


&gt;<i> What is the request method for these notifications (the wording &quot;the URIs
</I>&gt;<i> would be followed&quot; imply retrieval)?
</I>
POST for HTTP, as described in a later paragraph.


&gt;<i> If POST, what is the content body?
</I>
Empty. (Fixed so that spec is explicit.)


&gt;<i> Should the Referer request header also be sent (except for documents
</I>&gt;<i> retrieved via secure protocols)?
</I>
Sure, but that's out of scope for this spec.


&gt;<i> Should the notification event occur before, during or after the retrieval of
</I>&gt;<i> the href=&quot;...&quot; resource?
</I>
Undefined, up to the UA. Clarified.


&gt;<i> Should the notification event occur for only succesful retrievals? Or 
</I>&gt;<i> should the notification contain the response status of incomplete 
</I>&gt;<i> retrievals of the href=&quot;...&quot; resource?
</I>
Independent. Clarified.


&gt;<i> Should the notification URIs be restricted to the same host/domain as a) the
</I>&gt;<i> source document b) the href=&quot;...&quot; resource or c) unlimited?
</I>
Unlimited.


On Sat, 22 Oct 2005, ROBO Design wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; [script]
</I>&gt;<i>
</I>&gt;<i> I wouldn't encourage 'ugly' hacks even before finishing the 
</I>&gt;<i> specification :). For this to work people also have to rely on JS.
</I>
It's possible to do it backwards as well (though the script would be a bit 
longer!). In practice, there will always be hacks to make new things work 
in older browsers, until those older browsers are not important enough. 
The key is ensuring that it is possible to do that, as opposed to having 
the new features cause the older browsers to break completely.


On Sat, 22 Oct 2005, ROBO Design wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; Can you list some? Other than redirects, I couldn't actually think of 
</I>&gt;<i> &gt; any reliable ones. XMLHttpRequests dispatched in tandem with the 
</I>&gt;<i> &gt; original request are unreliable since you can't guarentee which order 
</I>&gt;<i> &gt; the requests are sent in (and thus some clicks might get lost). What 
</I>&gt;<i> &gt; else is there?
</I>&gt;<i> 
</I>&gt;<i> XMLHttpRequest in syncronized mode should do the trick. Just wait until 
</I>&gt;<i> the request is done, then go to the URL. It's easy, it can be done 
</I>&gt;<i> today.
</I>
Sure, but then that's no better than redirects, from a user perspective.


On Sat, 22 Oct 2005, Lachlan Hunt wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt;  1. Improving sites, by getting data regarding how users use the site.
</I>&gt;<i> &gt;  ...
</I>&gt;<i> &gt;  3. Improving services, e.g. by offering a number of options, checking
</I>&gt;<i> &gt; which the user picked, and making that one be the first on the list     the
</I>&gt;<i> &gt; next time the user uses the service.
</I>&gt;<i>
</I>&gt;<i> How are those two any different from each other, except that #3 gave a 
</I>&gt;<i> specific example of how the data could be used.  Anyway, why would that 
</I>&gt;<i> require an extra ping?  Couldn't that be determined just from which 
</I>&gt;<i> pages they access in the site/service?
</I>
I supposed they're not that different. I meant one to be human-controlled 
and the other to be computer-controlled.

You can't necessarily get that data from logs because the idea may be to 
have multiple links to the same place and see which one the user uses, or 
to have links to other sites and see which one the user uses.


&gt;<i> It could be defined in reverse, where the ping attribute (probably given 
</I>&gt;<i> a more suitable name, but I'll use ping for now) could be advisory 
</I>&gt;<i> information about the final destination and the href attribute defines 
</I>&gt;<i> the ping destination, such that following the href attribute would 
</I>&gt;<i> perform a redirect, but WA1 UAs could use the URI in the ping attribute 
</I>&gt;<i> to notify the user of the final destination (such as displaying it in 
</I>&gt;<i> the status bar).
</I>
In practice this kind of thing would just be unreliably used. It's a kind 
of metadata. Metadata is notorious for being wrong.


On Sat, 22 Oct 2005, ROBO Design wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; The suggestion for this originally came to me from Web advertisers, so 
</I>&gt;<i> &gt; I'm not sure this is necessarily true.
</I>&gt;<i> 
</I>&gt;<i> I wouldn't have expected *this* to be suggested by web advertisers. 
</I>&gt;<i> Maybe they have some twisted ideas that I don't think of now :).
</I>
Or they're just trying to make the user experience better. :-)


&gt;<i> True. Users who want to avoid advertisments and tracking methods just 
</I>&gt;<i> use specialized software for this (like ad blocker, ad muncher and many 
</I>&gt;<i> more). Yet, these are very few users.
</I>
Right.


&gt;<i> I still see it as a 'security' or privacy issue to allow ping URLs to 
</I>&gt;<i> various third-party servers because it makes it easier for other sneaky 
</I>&gt;<i> developers to add their own ping URLs to other server. I'm talking about 
</I>&gt;<i> developers who will be doing UserJSs of the future, even proxy servers 
</I>&gt;<i> with content filtering, etc. I know what you are thinking of: how many 
</I>&gt;<i> will write UserJSs and how many witll use them? Expect in the future 
</I>&gt;<i> some really interesting web-viruses, thanks to the advent of web 
</I>&gt;<i> applications (not only this specification, I'm talking in general).
</I>
I don't understand the problem here.


&gt;<i> They will be able to do this tracking cross-domain, very easily and 
</I>&gt;<i> simple. Not like now, because now cross-domain tracking of user 
</I>&gt;<i> behaviour is harder.
</I>
It's actually easier to do that today than with ping=&quot;&quot;. You just put a 
capture listener on the root element, and for every click targetted at a 
link, you dispatch a sync XMLHttpRequest before letting the event's 
default action take place. That's a dozen lines of code, maybe.

If they _did_ use ping=&quot;&quot;, the user would at least know what was going on!


On Sat, 22 Oct 2005, Mike Dierken wrote:
&gt;<i> 
</I>&gt;<i> How about not putting this notification URI in the anchors at all - what 
</I>&gt;<i> about putting some metadata in the &lt;head&gt; element that indicates that 
</I>&gt;<i> /all/ links clicked should send a notification to the indicated service?
</I>&gt;<i> 
</I>&gt;<i>  &lt;link href=&quot;<A HREF="http://myattention.org/dierken">http://myattention.org/dierken</A>&quot; rev=&quot;attention-tracker&quot; /&gt;
</I>
There are three main reasons; one is that the tracking might have to be 
done by multiple companies on a per-link basis, another is that the 
tracking might only apply to certain parts of the page, and the third is 
that for compatibility with existing systems each link needs its own 
tracking URI.


Thanks everyone for your input on this thread so far!

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="047212.html">[whatwg] &lt;a href=&quot;&quot; ping=&quot;&quot;&gt;
</A></li>
	<LI>Next message: <A HREF="047216.html">[whatwg] &lt;a href=&quot;&quot; ping=&quot;&quot;&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47215">[ date ]</a>
              <a href="thread.html#47215">[ thread ]</a>
              <a href="subject.html#47215">[ subject ]</a>
              <a href="author.html#47215">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
