<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Asynchronous database API feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Asynchronous%20database%20API%20feedback&In-Reply-To=%3CC99E7975-42CC-44A2-A944-3B9EF0BE9F94%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="055502.html">
   <LINK REL="Next"  HREF="055597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Asynchronous database API feedback</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Asynchronous%20database%20API%20feedback&In-Reply-To=%3CC99E7975-42CC-44A2-A944-3B9EF0BE9F94%40apple.com%3E"
       TITLE="[whatwg] Asynchronous database API feedback">mjs at apple.com
       </A><BR>
    <I>Tue Dec 11 17:33:15 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="055502.html">[whatwg] Asynchronous database API feedback
</A></li>
        <LI>Next message: <A HREF="055597.html">[whatwg] Asynchronous database API feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55538">[ date ]</a>
              <a href="thread.html#55538">[ thread ]</a>
              <a href="subject.html#55538">[ subject ]</a>
              <a href="author.html#55538">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Dec 11, 2007, at 3:02 PM, Oliver Hunt wrote:

&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's clear that most people here feel passionately that this is the
</I>&gt;&gt;<i> wrong thing to do. Perhaps it's best that we table this until
</I>&gt;&gt;<i> something like workerpools are in the spec.
</I>&gt;<i>
</I>&gt;<i> Worker pools do not resolve the problem, even if you were to force  
</I>&gt;<i> any synchronous IO to be performed on a worker thread (where by  
</I>&gt;<i> force i mean attempting synchronous io on the main/ui thread would  
</I>&gt;<i> throw an exception or similar).  The problem is that once you have  
</I>&gt;<i> multiple threads, and those threads are unable to modify the DOM  
</I>&gt;<i> (allowing the DOM to be modified from a worker thread would cause  
</I>&gt;<i> too much havoc -- there is much to much JS out there to allow JS to  
</I>&gt;<i> become multithreaded), so either you defer the synchronous IO into a  
</I>&gt;<i> async callback model to tell you when the io has completed -- you  
</I>&gt;<i> are now using the synchronous api to implement your own async api --  
</I>&gt;<i> or you have thread constructs such as a rendezvous, which will  
</I>&gt;<i> eventually end up in the UI thread, thereby reducing any thread  
</I>&gt;<i> synchronous IO back into a blocking operation.
</I>
Worker threads + sync IO available only on the worker thread do have  
one advantage over a pure async API: you can batch multiple requests,  
handle them using relatively simple code on your worker thread, and  
get a single notification on the main thread when all of that is done.  
There are many cases where this would be handy. I think the biggest  
disadvantage is that it would be more complicated to specify and  
implement. And in the end it won't hurt to have both.

(I assume we are all talking about shared-nothing message-passing  
threads as in Gears.)

Regards,
Maciej


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="055502.html">[whatwg] Asynchronous database API feedback
</A></li>
	<LI>Next message: <A HREF="055597.html">[whatwg] Asynchronous database API feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55538">[ date ]</a>
              <a href="thread.html#55538">[ thread ]</a>
              <a href="subject.html#55538">[ subject ]</a>
              <a href="author.html#55538">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
