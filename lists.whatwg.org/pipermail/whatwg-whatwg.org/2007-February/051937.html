<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Authoring Re: several messages about HTML5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Authoring%20Re%3A%20several%20messages%20about%20HTML5&In-Reply-To=%3C008301c7594c%24671c6850%243501a8c0%40TERRA%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="051929.html">
   <LINK REL="Next"  HREF="051938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Authoring Re: several messages about HTML5</H1>
<!--htdig_noindex-->
    <B>Andrew Fedoniouk</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Authoring%20Re%3A%20several%20messages%20about%20HTML5&In-Reply-To=%3C008301c7594c%24671c6850%243501a8c0%40TERRA%3E"
       TITLE="[whatwg] Authoring Re: several messages about HTML5">news at terrainformatica.com
       </A><BR>
    <I>Sun Feb 25 18:18:27 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="051929.html">[whatwg] Authoring Re: several messages about HTML5
</A></li>
        <LI>Next message: <A HREF="051938.html">[whatwg] Authoring Re: several messages about HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51937">[ date ]</a>
              <a href="thread.html#51937">[ thread ]</a>
              <a href="subject.html#51937">[ subject ]</a>
              <a href="author.html#51937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
----- Original Message ----- 
From: &quot;Adrian Sutton&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">adrian.sutton at ephox.com</A>&gt;
To: &quot;Andrew Fedoniouk&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">news at terrainformatica.com</A>&gt;; &quot;Dave Raggett&quot; 
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">dsr at w3.org</A>&gt;
Cc: &quot;Karl Dubost&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">karl at w3.org</A>&gt;; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at lists.whatwg.org</A>&gt;
Sent: Sunday, February 25, 2007 2:26 PM
Subject: RE: [whatwg] Authoring Re: several messages about HTML5


&gt;&gt;<i> | &gt; I agree that HTML DOM is not suitable for WYSIWYG editing.
</I>&gt;&gt;<i> |
</I>&gt;&gt;<i> | I beg to differ. It is true that an editing style sheet may be
</I>&gt;&gt;<i> | needed to avoid problems with delivery style sheets that use the
</I>&gt;&gt;<i> | display and visibility properties to hide content, or which use CSS
</I>&gt;&gt;<i> | positioning to layer things in complex ways. But apart from that,
</I>&gt;&gt;<i> | The HTML DOM is just fine as it is.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So this means relaxation of requirements - strictly speaking
</I>&gt;&gt;<i> it will not be WYSIWYG anymore. If &quot;editing style sheet may be
</I>&gt;&gt;<i> needed&quot; then what you will see is not what you will get.
</I>&gt;<i>
</I>&gt;<i> There are a couple of problems here. Firstly as far as I know there is
</I>&gt;<i> not and has never been an editor that does What You See Is *Precisely*
</I>&gt;<i> What You Get, they all have various ways to help the user understand the
</I>&gt;<i> structure of the document or visualize physical elements such as page
</I>&gt;<i> boundaries which don't exist on screen. Furthermore, users don't want to
</I>&gt;<i> see precisely what they'll get, what they want and what WYSIWYG is
</I>&gt;<i> really about, is that they can see and work with the document in visual
</I>&gt;<i> form instead of having to learn a mark-up language and for the rendering
</I>&gt;<i> to be close enough that they don't need to use preview (or don't have to
</I>&gt;<i> use it more than as a final check). HTML editors in particular don't
</I>&gt;<i> provide a precise rendering of the document because no two browsers
</I>&gt;<i> render a document precisely the same and even the same browser on
</I>&gt;<i> different machines will render it differently depending on user
</I>&gt;<i> settings, screen resolution etc.
</I>&gt;<i>
</I>&gt;<i> Secondly, HTML DOM is not suitable for WYSIWYG editing because it is an
</I>&gt;<i> inefficient and difficult representation to use for editing operations.
</I>&gt;<i> It is perfectly possible to use it to write an editor - it's just not
</I>&gt;<i> the best representation. For instance, if you have content like:
</I>&gt;<i>
</I>&gt;<i> &lt;p&gt;&lt;em&gt;This is &lt;strong&gt;my content&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
</I>&gt;<i>
</I>&gt;<i> If the user then selects &quot;is my&quot; and applies an inline style (&lt;span
</I>&gt;<i> class='stuff'&gt;), with a DOM representation you have a couple of tree
</I>&gt;<i> operations to perform, plus you probably should do some normalization to
</I>&gt;<i> ensure that the generated tree structure is consistent regardless of how
</I>&gt;<i> the content got to this point. However, if you represent the text as an
</I>&gt;<i> attributed string, you simply add &quot;span class='stuff'&quot; to the attribute
</I>&gt;<i> set for &quot;is my&quot; and it's done. When you serialize the model you have to
</I>&gt;<i> construct a valid DOM out of it, but it's fairly trivial to make the DOM
</I>&gt;<i> come out in a consistent form and speed is a lot less of an issue at
</I>&gt;<i> that point. The attributed string model also has the benefit of better
</I>&gt;<i> matching the way the user thinks about the document - they rarely think
</I>&gt;<i> of a tree structure, they think of text with formatting. A good example
</I>&gt;<i> of the problems caused by the backend model not matching the user's
</I>&gt;<i> model is <A HREF="http://www.codinghorror.com/blog/archives/000583.html">http://www.codinghorror.com/blog/archives/000583.html</A> also see
</I>&gt;<i> my response
</I>&gt;<i> <A HREF="http://www.symphonious.net/2006/06/12/the-invisible-formatting-tag-probl">http://www.symphonious.net/2006/06/12/the-invisible-formatting-tag-probl</A>
</I>&gt;<i> em/ - there's a whole series of back and forth responses if you have
</I>&gt;<i> nothing better to do, I seem to write about this far too much.
</I>&gt;<i>
</I>&gt;&gt;<i> | Manipulating the DOM is a straightforward matter of tree walking
</I>&gt;&gt;<i> | algorithms. The really difficulty is understanding what the users
</I>&gt;&gt;<i> | would like to do. For example, you might type some text and click on
</I>&gt;&gt;<i> | the list bullet button. The enter key then starts a new paragraph
</I>&gt;&gt;<i> | within that list item, whilst enter followed immediately by another
</I>&gt;&gt;<i> | enter starts a new list item. Pressing enter on an empty list item
</I>&gt;&gt;<i> | closes the list. When it comes to the markup produced, you can
</I>&gt;&gt;<i> | conceptualize this in terms of a collection of critics that look for
</I>&gt;&gt;<i> | and fix particular problems, e.g. merging adjacent ul elements, or
</I>&gt;&gt;<i> | for moving leading and trailing whitespace out of inline elements.
</I>&gt;<i>
</I>&gt;<i> True, the challenge is always to 1) find out what the user meant and 2)
</I>&gt;<i> do it. The model you choose can make that task easier or more difficult
</I>&gt;<i> - in fact it generally does both because no single model is ideal for
</I>&gt;<i> every editing operation. In our editor, we have a specific list model
</I>&gt;<i> which is different to both the attributed string model and the DOM model
</I>&gt;<i> - it simply has a list of LIs that are indented at different levels and
</I>&gt;<i> have attributes like list type (OL/UL), style attributes etc. There are
</I>&gt;<i> then a relatively small number of atomic changes users can make to lists
</I>&gt;<i> (change indent level, change list type or attributes or merge items) and
</I>&gt;<i> the model knows how to perform them on itself. The model also knows how
</I>&gt;<i> to serialize itself in terms of a valid HTML document structure. The
</I>&gt;<i> challenge is then simply mapping user actions to list operations in a
</I>&gt;<i> way that is intuitive and consistent for users. By picking an
</I>&gt;<i> appropriate model you can save a lot of effort in terms of keeping the
</I>&gt;<i> model sane and correct. Lists and tables are excellent examples of where
</I>&gt;<i> the HTML DOM is not ideal for editing because there are too many extra
</I>&gt;<i> elements around that the user doesn't want to think about. Reconciling
</I>&gt;<i> this difference in HTML DOM to user expectations is one of the reasons
</I>&gt;<i> why lists and tables are so hard to get right.
</I>&gt;<i>
</I>&gt;&gt;<i> HTML and its DOM has logical/semantic elements that
</I>&gt;&gt;<i> have no visual representation at all. Think about DIVs that
</I>&gt;&gt;<i> are used for wrapping portions of textual data and has no
</I>&gt;&gt;<i> visual representation. Your style sheet may rely
</I>&gt;&gt;<i> on some containment in some DIV - so the same
</I>&gt;&gt;<i> sequence of editing actions made by the user produces
</I>&gt;&gt;<i> dramatically different (for the user) visual results.
</I>&gt;<i>
</I>&gt;<i> This is why it's so useful to have a visual representation - the user
</I>&gt;<i> can *see* that with the DIV there it renders one way and without it, it
</I>&gt;<i> renders a different way. Of course, getting the user to understand the
</I>&gt;<i> inherent tree structure that DIVs work with is difficult, so is the
</I>&gt;<i> rules for how CSS applies. I don't have a good solution for this, but
</I>&gt;<i> we're continuing to try to find one.
</I>&gt;<i>
</I>&gt;&gt;<i> Let's take a look on example you've provided:
</I>&gt;&gt;<i> &quot;The enter key then starts a new paragraph within that list item&quot;
</I>&gt;&gt;<i> So after enter you will have:
</I>&gt;&gt;<i> Case #1:
</I>&gt;&gt;<i> &lt;ul&gt;
</I>&gt;&gt;<i>    &lt;li&gt;First paragraph.
</I>&gt;&gt;<i>          &lt;p&gt;Second paragraph.&lt;/p&gt;
</I>&gt;&gt;<i>    &lt;/li&gt;
</I>&gt;&gt;<i> &lt;/ul&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *or*  Case #2:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;ul&gt;
</I>&gt;&gt;<i>    &lt;li&gt;
</I>&gt;&gt;<i>       &lt;p&gt;First paragraph.&lt;/p&gt;
</I>&gt;&gt;<i>       &lt;p&gt;Second paragraph.&lt;/p&gt;
</I>&gt;&gt;<i>    &lt;/li&gt;
</I>&gt;&gt;<i> &lt;/ul&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So even in this &quot;simple&quot; case you have two options how to make
</I>&gt;&gt;<i> mapping of &quot;action -&gt; dom structure&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> And now imagine that you will get following markup:
</I>&gt;&gt;<i> Case #3:
</I>&gt;&gt;<i> &lt;ul&gt;
</I>&gt;&gt;<i>     &lt;li&gt;First paragraph.&lt;/li&gt;
</I>&gt;&gt;<i>     &lt;p&gt;Second paragraph.&lt;/p&gt;
</I>&gt;&gt;<i> &lt;/ul&gt;
</I>&gt;<i>
</I>&gt;<i> All three of these are completely wrong. When the user presses enter in
</I>&gt;<i> a list item, the editor should insert another &lt;li&gt;. There is simply no
</I>&gt;<i> excuse for doing anything else. A startling number of editors get this
</I>&gt;<i> completely wrong though. Another very popular error is indenting a list
</I>&gt;<i> item and generating:
</I>&gt;<i>
</I>&gt;<i> &lt;ul&gt;
</I>&gt;<i>  &lt;ul&gt;
</I>&gt;<i>    &lt;li&gt;Item&lt;/li&gt;
</I>&gt;<i>  &lt;/ul&gt;
</I>&gt;<i> &lt;/ul&gt;
</I>&gt;<i>
</I>&gt;&gt;<i> Visually and by default this is indistinguishable from the Case #1.
</I>&gt;&gt;<i> So looking on these two list items user has no clue of
</I>&gt;&gt;<i> what he/she just did by pressing &quot;Enter&quot;. Enter press is the most
</I>&gt;&gt;<i> unpredictable action in all WYSIWYG editors in the wild.
</I>&gt;&gt;<i> For the simple reason: there is no single unambiguous way
</I>&gt;&gt;<i> of changing DOM for such an action. Again tree-alike
</I>&gt;&gt;<i> DOM is simply not suitable for that.
</I>&gt;<i>
</I>&gt;<i> The DOM isn't ideal for this, but it's still quite possible to get it
</I>&gt;<i> right, it just takes a lot more effort. It also helps if you run the
</I>&gt;<i> HTML you start with through something like Tidy so that it starts out
</I>&gt;<i> sane and you don't have to deal with the infinite range of completely
</I>&gt;<i> broken HTML as a starting point. I suspect, but don't know for sure,
</I>&gt;<i> that many JavaScript editors struggle with this, but our Java based
</I>&gt;<i> editor has thankfully managed to avoid this particular set of problems.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> | p.s. one missing feature in CSS that would really help would be a
</I>&gt;&gt;<i> | means to add a forced line break symbol to the rendering of &lt;br&gt;
</I>&gt;&gt;<i> | elements. It is already easy to add a paragraph symbol, but CSS
</I>&gt;&gt;<i> | balks at &lt;br&gt; elements for inappropriate reasons.
</I>&gt;<i>
</I>&gt;<i> We just changed the renderer to put it there without CSS, but I guess
</I>&gt;<i> that's cheating.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Adrian Sutton
</I>&gt;<i>
</I>&gt;<i> PS: My apologies, I've lost track of who actually said what above.
</I>&gt;<i>
</I>
Adrian,

My statement &quot;HTML DOM  model is not suitable for
WYSIWYG editing&quot; meant not physical limitation but
logical one. I agree with you - theoretically it is possible
to create some WYSIWYG HTML editor that will be
asymptotically close to some ideal.

But somewhere on the way to it system will hit
a point when it will become a &quot;determenistic chaos&quot;
where each line of code is a perfect finite state automata
but the whole system is not manageable.

Yes, practical solution for this is to simplify DOM
structure ( you use &quot;attributed strings&quot; and I am using
&quot;flat DOM&quot; in my <A HREF="http://blocknote.net">http://blocknote.net</A> and couple
of other editors)

I think that HTML WYSIWYG editing solution to be used
as &lt;htmlarea&gt; engine in HTML should not use HTML, at
least it should not use HTML DOM &quot;as is&quot; but something
more human visualy comprehensible.

Andrew Fedoniouk.
<A HREF="http://terrainformatica.com">http://terrainformatica.com</A>





</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="051929.html">[whatwg] Authoring Re: several messages about HTML5
</A></li>
	<LI>Next message: <A HREF="051938.html">[whatwg] Authoring Re: several messages about HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51937">[ date ]</a>
              <a href="thread.html#51937">[ thread ]</a>
              <a href="subject.html#51937">[ subject ]</a>
              <a href="author.html#51937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
