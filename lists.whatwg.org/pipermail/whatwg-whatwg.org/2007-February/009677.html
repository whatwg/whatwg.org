<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Comments on &lt;event-source&gt; and addEventSource()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Comments%20on%20%3Cevent-source%3E%20and%20addEventSource%28%29&In-Reply-To=%3Cop.toein11364w2qv%40id-c0020.driveway.uu.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009673.html">
   <LINK REL="Next"  HREF="009695.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Comments on &lt;event-source&gt; and addEventSource()</H1>
<!--htdig_noindex-->
    <B>Anne van Kesteren</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Comments%20on%20%3Cevent-source%3E%20and%20addEventSource%28%29&In-Reply-To=%3Cop.toein11364w2qv%40id-c0020.driveway.uu.nl%3E"
       TITLE="[whatwg] Comments on &lt;event-source&gt; and addEventSource()">annevk at opera.com
       </A><BR>
    <I>Tue Feb 27 01:44:15 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="009673.html">[whatwg] Comments on &lt;event-source&gt; and addEventSource()
</A></li>
        <LI>Next message: <A HREF="009695.html">[whatwg] Comments on &lt;event-source&gt; and addEventSource()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9677">[ date ]</a>
              <a href="thread.html#9677">[ thread ]</a>
              <a href="subject.html#9677">[ subject ]</a>
              <a href="author.html#9677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 27 Feb 2007 04:21:30 +0100, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Wed, 23 Aug 2006, Anne van Kesteren wrote:
</I>&gt;&gt;<i> * A problem with the event-source element is that the resource is loaded
</I>&gt;&gt;<i> before you can attach event listeners to the document. Perhaps the
</I>&gt;&gt;<i> loading should start after the load event is dispatched? Unless the
</I>&gt;&gt;<i> element was inserted into the document of course (that's actually also a
</I>&gt;&gt;<i> bit unclear).
</I>&gt;<i>
</I>&gt;<i> The &quot;onmessage&quot; (previously &quot;onevent&quot;) attribute is intended to address
</I>&gt;<i> this. Does it not?
</I>
As I understand it 'message' is only dispatched when the Event field is  
not set to something else. However, I suppose if you want full control you  
can use the slightly more complicated DOM APIs.


There's one problem with 'message' though. It conflicts with cross  
document messaging. Now it's possible that they both dispatch and  
implement a different interface but it might be confusing to authors.


&gt;&gt;<i> * It might be better to replace the BNF with something similar as the
</I>&gt;&gt;<i> HTML parsing specification currently has. That provides a much more
</I>&gt;&gt;<i> clear processing model.
</I>&gt;<i>
</I>&gt;<i> Really? You find an explicit prose state machine easier to read than BNF?
</I>&gt;<i> Wow. I really don't. :-) I can't see what a state machine describes at
</I>&gt;<i> all. At least with BNF you can see at a glance what the syntax is.
</I>
Well, for syntax something different would have to be used I guess. But as  
an implementor and also as a person making testcases having an explicit  
state machine makes things much easier. With implementing it's just  
translating the prose to some lines of code and with making testcases it  
easily allows you to identify the edge cases and such. However, the BNF  
works good enough I suppose.


&gt;&gt;<i> * What happens for other line feed characters? Are they treated as
</I>&gt;&gt;<i> fields? Won't that give lots of problems for authors coding in non-Unix
</I>&gt;&gt;<i> formats? HTTP for example allows both.
</I>&gt;<i>
</I>&gt;<i> What other line feed characters? There's only one U+000A LINE FEED
</I>&gt;<i> character.
</I>
I meant CR / CRLF. I see you now allow that to be used, great!


The example that contains the following:

   load
   Target: #image1

should probably be clarified to see that an event does actually dispatch.  
Since Event defaults to 'message'.


Editorial: in the &quot;Message events&quot; section the definition &quot;message&quot; is not  
marked up with &lt;code&gt;. And the &quot;onmessage&quot; event handler points doesn't  
point to it.


The rest looks good, thanks!


-- 
Anne van Kesteren
&lt;<A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>&gt;
&lt;<A HREF="http://www.opera.com/">http://www.opera.com/</A>&gt;

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009673.html">[whatwg] Comments on &lt;event-source&gt; and addEventSource()
</A></li>
	<LI>Next message: <A HREF="009695.html">[whatwg] Comments on &lt;event-source&gt; and addEventSource()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9677">[ date ]</a>
              <a href="thread.html#9677">[ thread ]</a>
              <a href="subject.html#9677">[ subject ]</a>
              <a href="author.html#9677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
