<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [WF2] &lt;select required&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BWF2%5D%20%3Cselect%20required%3E&In-Reply-To=%3Cop.tgvc5dzcir1lcs%40daemontooth.bredbandsbolaget.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007331.html">
   <LINK REL="Next"  HREF="007342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [WF2] &lt;select required&gt;</H1>
<!--htdig_noindex-->
    <B>Robert</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BWF2%5D%20%3Cselect%20required%3E&In-Reply-To=%3Cop.tgvc5dzcir1lcs%40daemontooth.bredbandsbolaget.se%3E"
       TITLE="[whatwg] [WF2] &lt;select required&gt;">mail at robbiegee.com
       </A><BR>
    <I>Tue Oct  3 16:35:27 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="007331.html">[whatwg] [WF2] &lt;select required&gt;
</A></li>
        <LI>Next message: <A HREF="007342.html">[whatwg] [WF2] &lt;select required&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7341">[ date ]</a>
              <a href="thread.html#7341">[ thread ]</a>
              <a href="subject.html#7341">[ subject ]</a>
              <a href="author.html#7341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, 02 Oct 2006 16:35:32 +0200, Simon Pieters &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">zcorpan at hotmail.com</A>&gt;  
wrote:

&gt;<i> I've seen a case where a &lt;select&gt; is used and the user is required to  
</I>&gt;<i> change its value, as in:
</I>&gt;<i>
</I>&gt;<i>    &lt;select name=&quot;test&quot; required&gt;
</I>&gt;<i>     &lt;option value=&quot;&quot;&gt;Select one:
</I>&gt;<i>     &lt;option&gt;Foo
</I>&gt;<i>     &lt;option&gt;Bar
</I>&gt;<i>    &lt;/select&gt;
</I>&gt;<i>
</I>&gt;<i> Now this can be done with radio buttons instead, but why can't the above  
</I>&gt;<i> be supported? That is, make required apply to &lt;select&gt;s and if the value  
</I>&gt;<i> is empty then required is not satisfied. (Same for &lt;select multiple&gt;.)
</I>

Submitting an empty value may be wanted, and since a select by definition  
is a list of predefined valid values, it would make little sense to  
prevent the user from selecting some of them. However, I agree with the  
use case of the invalid starter value so users must consciously select a  
value they wanted instead of the default one.

The following script will do exactly what you wanted, although Opera  
doesn't seem to use the custom error message for some reason. I'm not sure  
if that's my fault or Opera's due to my lack of experience with WF2, but  
it does prevent form submissions just fine as long as there are invalid  
selects.

The script works in Opera 9.02.

&lt;script type=&quot;text/javascript&quot;&gt;&lt;![CDATA[
function checkSelect(e){
    var test = e.target;
    if(e.target.value == '')
       e.target.setCustomValidity('You must select a value.');
    else
       e.target.setCustomValidity(null);
}

// Use '//select' for html documents, or use a wrapper function
// that strips namespace prefixes for plain 'ol html.
var res = document.evaluate('//html:select',document,
    function(pfx){return '<A HREF="http://www.w3.org/1999/xhtml';},4,null">http://www.w3.org/1999/xhtml';},4,null</A>);
var elem=null;
while(elem = res.iterateNext()){
    if(!elem)break;
    checkSelect({'target':elem}); // do initial check
    elem.addEventListener('change',checkSelect,false);
}
]]&gt;&lt;/script&gt;


--
Robert Gr&#230;sdal

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007331.html">[whatwg] [WF2] &lt;select required&gt;
</A></li>
	<LI>Next message: <A HREF="007342.html">[whatwg] [WF2] &lt;select required&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7341">[ date ]</a>
              <a href="thread.html#7341">[ thread ]</a>
              <a href="subject.html#7341">[ subject ]</a>
              <a href="author.html#7341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
