<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] asynchronous JSON.parse
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20asynchronous%20JSON.parse&In-Reply-To=%3C513A554B.2010707%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081372.html">
   <LINK REL="Next"  HREF="081380.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] asynchronous JSON.parse</H1>
<!--htdig_noindex-->
    <B>David Rajchenbach-Teller</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20asynchronous%20JSON.parse&In-Reply-To=%3C513A554B.2010707%40mozilla.com%3E"
       TITLE="[whatwg] asynchronous JSON.parse">dteller at mozilla.com
       </A><BR>
    <I>Fri Mar  8 13:16:59 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081372.html">[whatwg] asynchronous JSON.parse
</A></li>
        <LI>Next message: <A HREF="081380.html">[whatwg] asynchronous JSON.parse
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81376">[ date ]</a>
              <a href="thread.html#81376">[ thread ]</a>
              <a href="subject.html#81376">[ subject ]</a>
              <a href="author.html#81376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 3/8/13 5:35 PM, David Bruant wrote:
&gt;&gt;<i> Intuitively, this sounds like:
</I>&gt;&gt;<i> 1. collect data to a JSON;
</I>&gt;<i> I don't understand this sentence. Do you mean &quot;collect data in an object&quot;?
</I>
My bad. I sometimes write &quot;JSON&quot; for &quot;object that may be stringified to
JSON format and parsed back without loss&quot;, i.e. a bag of [bags of]
non-function properties. So let's just say &quot;object.&quot;

&gt;&gt;<i> 2. serialize JSON (hopefully asynchronously) to a Transferable (or
</I>&gt;&gt;<i> several Transferables).
</I>&gt;<i> Why not collect the data in a Transferable like an ArrayBuffer directly?
</I>&gt;<i> It skips the additional serialization part. Writing a byte stream
</I>&gt;<i> directly is a bit hardcore I admit, but an object full of setters can
</I>&gt;<i> give the impression to create an object while actually filling an
</I>&gt;<i> ArrayBuffer as a backend. I feel that could work efficiently.
</I>
I suspect that this will quickly grow to either:
- an API for serializing an object to a Transferable or a stream of
Transferable; or
- a lower-level but equivalent API for doing the same, without having to
actually build the object.

For instance, how would you serialize something as simple as the following?

{
  name: &quot;The One&quot;,
  hp: 1000,
  achievements: [&quot;achiever&quot;, &quot;overachiever&quot;, &quot;extreme overachiever&quot;]
   // Length of the list is unpredictable
}

&gt;<i> What are the data you want to collect? Is it all at once or are you
</I>&gt;<i> building the object little by little? For a backup and for FirefoxOS
</I>&gt;<i> specifically, could a FileHandle [3] work? It's an async API to write in
</I>&gt;<i> a file.
</I>
Thanks for the suggestion. I am effectively working on refactoring
storing browser session data. Not for FirefoxOS, but for Firefox
Desktop, which gives me more architectural constraints but frees my hand
to extend the platform with additional non-web libraries.

Best regards,
 David



-- 
David Rajchenbach-Teller, PhD
 Performance Team, Mozilla

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081372.html">[whatwg] asynchronous JSON.parse
</A></li>
	<LI>Next message: <A HREF="081380.html">[whatwg] asynchronous JSON.parse
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81376">[ date ]</a>
              <a href="thread.html#81376">[ thread ]</a>
              <a href="subject.html#81376">[ subject ]</a>
              <a href="author.html#81376">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
