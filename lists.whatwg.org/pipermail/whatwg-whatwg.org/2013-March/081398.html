<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: ImageData constructor or factory method with preexisting data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20ImageData%20constructor%20or%20factory%20method%20with%0A%20preexisting%20data&In-Reply-To=%3CCABirCh9hXurkb3es9Ow3boy7dpH87%2Bbf%2BQe-yrmHkGiS%2BRR1Hw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081397.html">
   <LINK REL="Next"  HREF="081399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: ImageData constructor or factory method with preexisting data</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20ImageData%20constructor%20or%20factory%20method%20with%0A%20preexisting%20data&In-Reply-To=%3CCABirCh9hXurkb3es9Ow3boy7dpH87%2Bbf%2BQe-yrmHkGiS%2BRR1Hw%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal: ImageData constructor or factory method with preexisting data">glenn at zewt.org
       </A><BR>
    <I>Mon Mar 11 20:27:33 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081397.html">[whatwg] Proposal: ImageData constructor or factory method with preexisting data
</A></li>
        <LI>Next message: <A HREF="081399.html">[whatwg] Proposal: ImageData constructor or factory method with preexisting data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81398">[ date ]</a>
              <a href="thread.html#81398">[ thread ]</a>
              <a href="subject.html#81398">[ subject ]</a>
              <a href="author.html#81398">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Mar 11, 2013 at 9:48 PM, Justin Novosad &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">junov at chromium.org</A>&gt; wrote:

&gt;<i> The use cases I see for this new interface is for relaying image data, that
</I>&gt;<i>
</I>is *not* generated in JS.  For example, suppose a chunk of image data is
&gt;<i>  generated on the server side and sent to the client via WebSocket. On the
</I>&gt;<i> client side, you just want to copy the data field of the message event onto
</I>&gt;<i> a 2D canvas. With the current API, an intermediate copy is required in
</I>&gt;<i> order to wrap the incoming data into an ImageData object.
</I>&gt;<i>
</I>
If data is generated server-side, then the createImageBitmap API is
probably what you want.
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/#imagebitmap">http://www.whatwg.org/specs/web-apps/current-work/#imagebitmap</A>

If there are use cases for creating an ImageData, I recommend not making a
copy, so all this is doing is taking an existing ArrayBuffer and creating a
thin wrapper around the same buffer.

That said, avoiding an extra copy for data that just came in over the
network doesn't seem like much of an optimization (and it's probably
compressed anyway), and if copy semantics are wanted, unnecessary copies
can still be avoided with copy-on-write.

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081397.html">[whatwg] Proposal: ImageData constructor or factory method with preexisting data
</A></li>
	<LI>Next message: <A HREF="081399.html">[whatwg] Proposal: ImageData constructor or factory method with preexisting data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81398">[ date ]</a>
              <a href="thread.html#81398">[ thread ]</a>
              <a href="subject.html#81398">[ subject ]</a>
              <a href="author.html#81398">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
