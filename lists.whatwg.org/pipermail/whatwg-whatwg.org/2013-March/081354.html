<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] asynchronous JSON.parse
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20asynchronous%20JSON.parse&In-Reply-To=%3C5139124C.2040809%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081351.html">
   <LINK REL="Next"  HREF="081355.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] asynchronous JSON.parse</H1>
<!--htdig_noindex-->
    <B>David Rajchenbach-Teller</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20asynchronous%20JSON.parse&In-Reply-To=%3C5139124C.2040809%40mozilla.com%3E"
       TITLE="[whatwg] asynchronous JSON.parse">dteller at mozilla.com
       </A><BR>
    <I>Thu Mar  7 14:18:52 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081351.html">[whatwg] asynchronous JSON.parse
</A></li>
        <LI>Next message: <A HREF="081355.html">[whatwg] asynchronous JSON.parse
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81354">[ date ]</a>
              <a href="thread.html#81354">[ thread ]</a>
              <a href="subject.html#81354">[ subject ]</a>
              <a href="author.html#81354">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>(Note: New on this list, please be gentle if I'm debating an
inappropriate issue in an inappropriate place.)

Actually, communicating large JSON objects between threads may cause
performance issues. I do not have the means to measure reception speed
simply (which would be used to implement asynchronous JSON.parse), but
it is easy to measure main thread blocks caused by sending (which would
be used to implement asynchronous JSON.stringify).

I have put together a small test here - warning, this may kill your browser:
   <A HREF="http://yoric.github.com/Bugzilla-832664/">http://yoric.github.com/Bugzilla-832664/</A>

While there are considerable fluctuations, even inside one browser, on
my system, I witness janks that last 300ms to 3s.

Consequently, I am convinced that we need asynchronous variants of
JSON.{parse, stringify}.

Best regards,
 David

&gt;<i> Glenn Maynard wrote
</I>&gt;<i>
</I>&gt;<i> (It's hard to talk to somebody called &quot;j&quot;, by the way.  :)
</I>&gt;<i> 
</I>&gt;<i> On Thu, Mar 7, 2013 at 2:06 AM, &lt;j at mailb.org&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> right now JSON.parse blocks the mainloop, this gets more and more of an
</I>&gt;&gt;<i> issue as JSON documents get bigger
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Just load the data you want to parse inside a worker, and perform the
</I>&gt;<i> parsing there.  Computationally-expensive work is exactly something Web
</I>&gt;<i> Workers are meant for.
</I>&gt;<i> 
</I>&gt;<i> and are also used as serialization
</I>&gt;&gt;<i> format to communicate with web workers.
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> There's no need to serialize to JSON before sending data to a worker;
</I>&gt;<i> there's nothing that JSON can represent that postMessage can't post
</I>&gt;<i> directly.  Just postMessage the object itself.
</I>

-- 
David Rajchenbach-Teller, PhD
 Performance Team, Mozilla





</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081351.html">[whatwg] asynchronous JSON.parse
</A></li>
	<LI>Next message: <A HREF="081355.html">[whatwg] asynchronous JSON.parse
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81354">[ date ]</a>
              <a href="thread.html#81354">[ thread ]</a>
              <a href="subject.html#81354">[ subject ]</a>
              <a href="author.html#81354">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
