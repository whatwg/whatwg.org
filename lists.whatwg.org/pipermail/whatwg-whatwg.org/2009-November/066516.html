<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;video&gt;&lt;overlay&gt; for captions/subtitles/etc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%3Coverlay%3E%20for%20captions/subtitles/etc&In-Reply-To=%3Cop.u3739ppdatwj1d%40sisko.linkoping.osa%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066483.html">
   <LINK REL="Next"  HREF="066504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;video&gt;&lt;overlay&gt; for captions/subtitles/etc</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%3Coverlay%3E%20for%20captions/subtitles/etc&In-Reply-To=%3Cop.u3739ppdatwj1d%40sisko.linkoping.osa%3E"
       TITLE="[whatwg] &lt;video&gt;&lt;overlay&gt; for captions/subtitles/etc">philipj at opera.com
       </A><BR>
    <I>Mon Nov 30 11:54:51 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066483.html">[whatwg] &lt;video&gt;&lt;overlay&gt; for captions/subtitles/etc
</A></li>
        <LI>Next message: <A HREF="066504.html">[whatwg] &lt;figure&gt;&lt;img&gt;&lt;* caption&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66516">[ date ]</a>
              <a href="thread.html#66516">[ thread ]</a>
              <a href="subject.html#66516">[ subject ]</a>
              <a href="author.html#66516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 29 Nov 2009 12:42:13 +0100, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> Philip, all,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sun, Nov 29, 2009 at 9:37 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;  
</I>&gt;<i> wrote:
</I>&gt;&gt;<i> On Sun, 29 Nov 2009 06:21:45 +0100, Silvia Pfeiffer
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> My &lt;itext&gt; wasn't supposed to stay a JavaScript implementation. In
</I>&gt;&gt;&gt;<i> fact, it had the exact same purpose as your &lt;ovelay&gt; proposal: to
</I>&gt;&gt;&gt;<i> eventually be added into the HTML5 specification and be properly
</I>&gt;&gt;&gt;<i> integrated, such that it didn't have to rely on the timeupdate.
</I>&gt;&gt;&gt;<i> In fact, the &lt;itextlist&gt;/&lt;itext&gt; proposal, which was my second
</I>&gt;&gt;&gt;<i> improvement, see
</I>&gt;&gt;&gt;<i> <A HREF="https://wiki.mozilla.org/Accessibility/HTML5_captions_v2,">https://wiki.mozilla.org/Accessibility/HTML5_captions_v2,</A> doesn't look
</I>&gt;&gt;&gt;<i> very different to what you have there.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes, that is very clear, I used it only as an example of what needs to  
</I>&gt;&gt;<i> be
</I>&gt;&gt;<i> done to parse SRT with JavaScript. Go ahead and edit the wiki if there's
</I>&gt;&gt;<i> anything that makes it sounds like &lt;itext&gt; is something it is not.
</I>&gt;<i>
</I>&gt;<i> I guess what I was just missing is mention of what your proposal
</I>&gt;<i> provides on top of what I had. You're stating that further down in
</I>&gt;<i> your email, so it might be good to mention that. It also shows we are
</I>&gt;<i> making progress. :-)
</I>
Added a &quot;diff&quot; statement to the wiki.

&gt;&gt;&gt;<i> I think you've taken the next step with proposing to add a wrapping
</I>&gt;&gt;&gt;<i> &lt;div&gt; into the DOM - something I wasn't quite sure would be possible
</I>&gt;&gt;&gt;<i> and I'm glad you've taken the step.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Another comment on naming: whether we name the elements &lt;itextlist&gt;
</I>&gt;&gt;&gt;<i> and &lt;itext&gt; or alternatively &lt;overlay&gt; and &lt;source&gt;, I'm not too
</I>&gt;&gt;&gt;<i> fussed. In fact, I've discussed the renaming/reuse of &lt;source&gt; for
</I>&gt;&gt;&gt;<i> &lt;itext&gt; in my recent blog post at
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="http://blog.gingertech.net/2009/11/25/manifests-exposing-structure-of-a-composite-media-resource/">http://blog.gingertech.net/2009/11/25/manifests-exposing-structure-of-a-composite-media-resource/</A>
</I>&gt;&gt;&gt;<i> . I think it may well make a lot of sense since we can reduce the key
</I>&gt;&gt;&gt;<i> required attributes to the ones that already exist for the &lt;source&gt;
</I>&gt;&gt;&gt;<i> element.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Indeed, my proposal is mainly a remix of &lt;itext&gt; and cue ranges. The  
</I>&gt;&gt;<i> main
</I>&gt;&gt;<i> selling point, though, is a consistent markup and DOM for in-band,  
</I>&gt;&gt;<i> external
</I>&gt;&gt;<i> and script-created subtitles and a hook to content into the fullscreen  
</I>&gt;&gt;<i> mode.
</I>&gt;<i>
</I>&gt;<i> These are where we are indeed making progress - excellent!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I must admit, I am still a bit dubious about how you are proposing to
</I>&gt;<i> deal with in-band captions. Is a UA expected to take them out of the
</I>&gt;<i> file and directly render them into &lt;overlay&gt;? Then you don't get the
</I>&gt;<i> kind of control you get as a Web author over external captions, e.g.
</I>&gt;<i> to specify a media query.
</I>
The UA certainly has to parse and render the in-band captions some way, I  
was just trying to find a way to apply styling to them.

&gt;<i> Also, the user doesn't get exposed to the tracks that are available,
</I>&gt;<i> so he/she could choose interactively. I have been told that such
</I>&gt;<i> interactive choice of the to-be-displayed caption track is a
</I>&gt;<i> requirement, since people may use the subtitles/captions to learn a
</I>&gt;<i> new language or read in their actual native language. YouTube
</I>&gt;<i> certainly exposes all the available alternative language tracks - also
</I>&gt;<i> because some of these tracks are actually created on the fly by
</I>&gt;<i> automated translation. These are some of the reasons I was asked to
</I>&gt;<i> provide declarative markup of all of the available subtitle tracks of
</I>&gt;<i> video, no matter whether they came out of the media file (in-line) or
</I>&gt;<i> not.
</I>
Could the people who have given you these requirements possibly join the  
WHATWG and/or W3C HTML a11y TF to explain these use cases? AFAICT, no  
declarative markup is needed to be able to select between caption tracks,  
it can be done either via a native context menu or using script assuming  
that we have an API for exposing the available tracks (which is needed for  
multiple audio and video tracks too).

&gt;<i> So, maybe we can use &lt;source&gt; to not just point at further external
</I>&gt;<i> subtitle tracks, but also at in-band subtitle tracks and thus really
</I>&gt;<i> make in-band identical to out-of-band? We could even use Media
</I>&gt;<i> Fragment URI addressing for such an approach, e.g.
</I>&gt;<i>
</I>&gt;<i> &lt;source src=&quot;captions-english.srt&quot; lang=&quot;en&quot;&gt;&lt;/source&gt;
</I>&gt;<i> &lt;source src=&quot;video.ogv?track=subtitle[de]&quot; lang=&quot;de&quot;&gt;&lt;/source&gt;
</I>&gt;<i>
</I>&gt;<i> or alternatively if no file was given in the @src attribute of a
</I>&gt;<i> &lt;source&gt; element, it would be clear that it pointed a track in the
</I>&gt;<i> original media file like so:
</I>&gt;<i>
</I>&gt;<i> &lt;source lang=&quot;de&quot;&gt;&lt;/source&gt;
</I>
Using the query string syntax not possible as query string are completely  
opaque to the client, but the fragment variant seems OK if a bit verbose  
(part of the URL is repeated). However, what happens if an author does  
this:

&lt;video src=&quot;video.ogv&quot;&gt;
   &lt;source src=&quot;captions-english.srt&quot; lang=&quot;en&quot;&gt;&lt;/source&gt;
   &lt;source src=&quot;other-video.ogv#track=subtitle[de]&quot; lang=&quot;de&quot;&gt;&lt;/source&gt;
&lt;/video&gt;

Authors have no apparent reason to think this would not work, but an  
implementation that supports it is very, very unlikely to happen. UAs  
which don't understand the MF syntax would presumably download  
other-video.ogv and try decoding it as whatever subtitle formats it  
supports (e.g. SRT).

Perhaps some CSS selector to style in-band captions/subtitles after all?

&gt;<i> About the cue ranges:
</I>&gt;<i>
</I>&gt;<i> If I understand your approach, then it means that if the video ends up
</I>&gt;<i> playing at a time that is between a registered cue range's start and
</I>&gt;<i> end time, the given DOMString text would be added to the &lt;overlay&gt;
</I>&gt;<i> element and displayed. Is this correct?
</I>
Not exactly, registering a cue range would simply cause an event to be  
fired at a particular time, the event handler must then do its thing to  
display subtitles or silly mustache overlays. I was intending to let  
external subtitles also fire these events, but after being challenged on  
the use case [1] I don't know if I see why.

&gt;<i> Would it not be better to register onenter and onleave functions that
</I>&gt;<i> could do anything to the DOM, rather than restrict the cue's effect on
</I>&gt;<i> the &lt;overlay&gt; part of the DOM? Maybe the slides that I want to show
</I>&gt;<i> should be presented in a different &lt;div&gt; on the page and not as an
</I>&gt;<i> overlay on the video? I must admit I am not quite sure about the best
</I>&gt;<i> approach to solving cue ranges - still trying to figure out all the
</I>&gt;<i> requirements.
</I>
This is what I was aiming for. Basically it's the same as the old cue  
ranges API but without pauseOnExit (use media fragments instead). The  
question is if external captions or some declarative syntax should fire  
the same events and if that requires adding some more parameters to the  
events, but let's continue this discussion on public-html-a11y.

[1] <A HREF="http://lists.w3.org/Archives/Public/public-html-a11y/2009Nov/0119.html">http://lists.w3.org/Archives/Public/public-html-a11y/2009Nov/0119.html</A>

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066483.html">[whatwg] &lt;video&gt;&lt;overlay&gt; for captions/subtitles/etc
</A></li>
	<LI>Next message: <A HREF="066504.html">[whatwg] &lt;figure&gt;&lt;img&gt;&lt;* caption&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66516">[ date ]</a>
              <a href="thread.html#66516">[ thread ]</a>
              <a href="subject.html#66516">[ subject ]</a>
              <a href="author.html#66516">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
