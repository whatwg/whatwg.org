<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] What is the purpose of timeupdate?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20What%20is%20the%20purpose%20of%20timeupdate%3F&In-Reply-To=%3Ceb35a2a80911042217kb20a05fg4259ea4d9ed4d219%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066452.html">
   <LINK REL="Next"  HREF="066248.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] What is the purpose of timeupdate?</H1>
<!--htdig_noindex-->
    <B>Andrew Scherkus</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20What%20is%20the%20purpose%20of%20timeupdate%3F&In-Reply-To=%3Ceb35a2a80911042217kb20a05fg4259ea4d9ed4d219%40mail.gmail.com%3E"
       TITLE="[whatwg] What is the purpose of timeupdate?">scherkus at chromium.org
       </A><BR>
    <I>Wed Nov  4 22:17:09 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066452.html">[whatwg] localStorage mutex - a solution?
</A></li>
        <LI>Next message: <A HREF="066248.html">[whatwg] What is the purpose of timeupdate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66247">[ date ]</a>
              <a href="thread.html#66247">[ thread ]</a>
              <a href="subject.html#66247">[ subject ]</a>
              <a href="author.html#66247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Oct 30, 2009 at 10:18 PM, Brian Campbell &lt;
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">Brian.P.Campbell at dartmouth.edu</A>&gt; wrote:

&gt;<i> As a multimedia developer, I am wondering about the purpose of the
</I>&gt;<i> timeupdate event on media elements. On first glance, it would appear that
</I>&gt;<i> this event would be useful for synchronizing animations, bullets, captions,
</I>&gt;<i> UI, and the like. The spec specifies a rate of 4 to 66 Hz for these events.
</I>&gt;<i> The high end of this (30 or more Hz) is pretty reasonable for displaying
</I>&gt;<i> things in sync with the video. The low end, however, 4 Hz, is far too slow
</I>&gt;<i> for most types of synchronization; everything feels laggy at this frequency.
</I>&gt;<i> From my testing on a two year old MacBook Pro, Firefox is giving me about 25
</I>&gt;<i> timeupdate events per second, while Safari and Chrome are giving me the bare
</I>&gt;<i> minimum, of 4 timeupdate events per second.
</I>&gt;<i>
</I>&gt;<i> At 4 timeupdate events per second, it isn't all that useful. I can replace
</I>&gt;<i> it with setInterval, at whatever rate I want, query the time, and get the
</I>&gt;<i> synchronization I need, but that makes the timeupdate event seem to be
</I>&gt;<i> redundant. At 25 timeupdate events per second, it is reasonably useful, and
</I>&gt;<i> can be used to synchronize various things to the video.
</I>&gt;<i>
</I>&gt;<i> So, I'm wondering if there's a purpose for the timeupdate event that I'm
</I>&gt;<i> missing. If it is intended for any sort of synchronization with the video, I
</I>&gt;<i> think it should be improved to give better guarantees on the interval
</I>&gt;<i> between updates, or just dropped from the spec; it's not useful enough in
</I>&gt;<i> its current form. To improve it, the maximum interval between updates could
</I>&gt;<i> be reduced to about 40 ms, or perhaps the interval could be made settable so
</I>&gt;<i> the author could control how often they want to get the event.
</I>&gt;<i>
</I>&gt;<i> -- Brian
</I>&gt;<i>
</I>
I believe it's a convenience over using setTimeout/setInterval + polling to
determine whether playback has progressed ie., for rendering your own
playback progress bar.  I've also seen it been used as a signal to copy
frames into &lt;canvas&gt; on Firefox, however if timeupdate frequency != fps of
video you either miss frames or paint too much.

I don't think timeupdate today is very useful for doing anything beyond a
progress bar or other simple synchronized animations.

Would something like &lt;video&gt; firing events for every frame rendered help you
out?  This would help also fix the &lt;canvas&gt; over/under painting issue and
improve synchronization.

Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091104/291f1b78/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091104/291f1b78/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066452.html">[whatwg] localStorage mutex - a solution?
</A></li>
	<LI>Next message: <A HREF="066248.html">[whatwg] What is the purpose of timeupdate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66247">[ date ]</a>
              <a href="thread.html#66247">[ thread ]</a>
              <a href="subject.html#66247">[ subject ]</a>
              <a href="author.html#66247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
