<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [hybi] Races in websocket API?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bhybi%5D%20Races%20in%20websocket%20API%3F&In-Reply-To=%3C4B0616BA.2050009%40mortbay.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066386.html">
   <LINK REL="Next"  HREF="066394.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [hybi] Races in websocket API?</H1>
<!--htdig_noindex-->
    <B>Greg Wilkins</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bhybi%5D%20Races%20in%20websocket%20API%3F&In-Reply-To=%3C4B0616BA.2050009%40mortbay.com%3E"
       TITLE="[whatwg] [hybi] Races in websocket API?">gregw at mortbay.com
       </A><BR>
    <I>Thu Nov 19 20:10:34 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066386.html">[whatwg] [hybi] Races in websocket API?
</A></li>
        <LI>Next message: <A HREF="066394.html">[whatwg] [hybi] Races in websocket API?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66393">[ date ]</a>
              <a href="thread.html#66393">[ thread ]</a>
              <a href="subject.html#66393">[ subject ]</a>
              <a href="author.html#66393">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Fumitoshi Ukai (&#40284;&#39164;&#25991;&#25935;) wrote:
&gt;<i> On Thu, Nov 19, 2009 at 1:00 PM, Greg Wilkins &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gregw at webtide.com</A>
</I>&gt;<i>
</I>&gt;<i>      var ws = new WebSocket(&quot;<A HREF="ws://mysite.com">ws://mysite.com</A>
</I>&gt;<i>     &lt;<A HREF="http://mysite.com">http://mysite.com</A>&gt;&quot;,&quot;myprotocol&quot;);
</I>&gt;<i> ...
</I>&gt;<i>     So if the next line in the script is
</I>&gt;<i> 
</I>&gt;<i>      ws.onopen=myopenfunc;
</I>&gt;<i> 
</I>&gt;<i>     there is a race between if the onopen function will
</I>&gt;<i>     be assigned and if the background connection has been established?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I believe open event  is just queued at the moment, and it will be fired
</I>&gt;<i> later when javascript becomes idle.
</I>
Unfortunately this does not appear to be the implementation in chrome
at least.  If you step through with a debugger, then the close happens
before my ws.onclose function is assigned, as thus it is never called.

Even if it was implemented as you say, I'm wondering if the API should
be less dependent on the single threaded nature of current javascript
implementations.

cheers

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066386.html">[whatwg] [hybi] Races in websocket API?
</A></li>
	<LI>Next message: <A HREF="066394.html">[whatwg] [hybi] Races in websocket API?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66393">[ date ]</a>
              <a href="thread.html#66393">[ thread ]</a>
              <a href="subject.html#66393">[ subject ]</a>
              <a href="author.html#66393">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
