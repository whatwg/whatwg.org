<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] What is the purpose of timeupdate?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20What%20is%20the%20purpose%20of%20timeupdate%3F&In-Reply-To=%3C3351E5D2-12F2-4FE6-82F3-358FDB9F4F71%40dartmouth.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066272.html">
   <LINK REL="Next"  HREF="066280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] What is the purpose of timeupdate?</H1>
<!--htdig_noindex-->
    <B>Brian Campbell</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20What%20is%20the%20purpose%20of%20timeupdate%3F&In-Reply-To=%3C3351E5D2-12F2-4FE6-82F3-358FDB9F4F71%40dartmouth.edu%3E"
       TITLE="[whatwg] What is the purpose of timeupdate?">brian.p.campbell at dartmouth.edu
       </A><BR>
    <I>Fri Nov  6 11:02:31 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066272.html">[whatwg] What is the purpose of timeupdate?
</A></li>
        <LI>Next message: <A HREF="066280.html">[whatwg] What is the purpose of timeupdate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66279">[ date ]</a>
              <a href="thread.html#66279">[ thread ]</a>
              <a href="subject.html#66279">[ subject ]</a>
              <a href="author.html#66279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Nov 6, 2009, at 6:16 AM, Simon Pieters wrote:

&gt;<i> On Fri, 06 Nov 2009 11:05:03 +0100, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A> 
</I>&gt;<i> &gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Fri, Nov 6, 2009 at 10:44 PM, Philip J&#228;genstedt  
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We've considered firing it for each frame, but there is one  
</I>&gt;&gt;&gt;<i> problem. If
</I>&gt;&gt;&gt;<i> people expect that it fires once per frame they will probably  
</I>&gt;&gt;&gt;<i> write scripts
</I>&gt;&gt;&gt;<i> which do frame-based animations by moving things n pixels per  
</I>&gt;&gt;&gt;<i> frame or
</I>&gt;&gt;&gt;<i> similar. Some animations are just easier to do this way, so  
</I>&gt;&gt;&gt;<i> there's no
</I>&gt;&gt;&gt;<i> reason to think that people won't do it. This will break horribly  
</I>&gt;&gt;&gt;<i> if a
</I>&gt;&gt;&gt;<i> browser is ever forced to drop a frame, which is going to happen  
</I>&gt;&gt;&gt;<i> on slower
</I>&gt;&gt;&gt;<i> machines. In balance this may or may not be a risk worth taking.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That's possible, but we haven't noticed authors doing that yet.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://people.mozilla.com/~prouget/demos/round/index.xhtml">http://people.mozilla.com/~prouget/demos/round/index.xhtml</A>
</I>
Hmm. That's a quick and dirty demo that just does a silly effect on  
each frame. It should be dependent on the current time of the video,  
as should any animation; for instance, if that demo worked at all on  
WebKit, it would go glacially slowly.

Anyone who does animation that depends on their update function being  
called at a constant rate is going to be broken; are we trying to  
avoid that case? Is there anyone out there who uses setInterval and  
increments anything a constant amount each time, rather than basing  
progress on how much time has actually elapsed?

I agree that there is some concern here, but I'm wondering how much  
it's worth worrying about. No matter what, there aren't any hard  
guarantees about how much time will elapse between timeupdate events  
(the thread could block for some reason, the user could scrub the  
video, the video could stall or be paused). And no matter what, if  
timeupdate events come in at any sort of regular rate (whether it be  
the frame rate, or an arbitrary rate like 4 or 30 times per second, or  
if they bypass timeupdate entirely and just use setInterval), there  
are going to be some people who mistakenly assume that they can just  
do a constant increment each time they are called. So, I think those  
users will have errors whether or not timeupdate happens once per  
frame or at some other interval.

Anyhow, for my purposes, once per frame, or 30 times per second, or  
anything like that, are all fairly reasonable. 4 updates per second  
means that I'm just going to have to replace it with setInterval, and  
am much more likely to forget to disable that setInterval when, say,  
the video is paused, leading to extra wasted CPU cycles.

-- Brian
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066272.html">[whatwg] What is the purpose of timeupdate?
</A></li>
	<LI>Next message: <A HREF="066280.html">[whatwg] What is the purpose of timeupdate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66279">[ date ]</a>
              <a href="thread.html#66279">[ thread ]</a>
              <a href="subject.html#66279">[ subject ]</a>
              <a href="author.html#66279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
