<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [WebWorkers] About the delegation example
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BWebWorkers%5D%20About%20the%20delegation%20example&In-Reply-To=%3C4AF46FE4.1060302%40enseirb-matmeca.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066277.html">
   <LINK REL="Next"  HREF="066282.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [WebWorkers] About the delegation example</H1>
<!--htdig_noindex-->
    <B>David Bruant</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BWebWorkers%5D%20About%20the%20delegation%20example&In-Reply-To=%3C4AF46FE4.1060302%40enseirb-matmeca.fr%3E"
       TITLE="[whatwg] [WebWorkers] About the delegation example">bruant at enseirb-matmeca.fr
       </A><BR>
    <I>Fri Nov  6 10:50:12 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066277.html">[whatwg] [WebWorkers] About the delegation example
</A></li>
        <LI>Next message: <A HREF="066282.html">[whatwg] [WebWorkers] About the delegation example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66278">[ date ]</a>
              <a href="thread.html#66278">[ thread ]</a>
              <a href="subject.html#66278">[ subject ]</a>
              <a href="author.html#66278">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Tab Atkins Jr. a &#233;crit :
&gt;<i> On Thu, Nov 5, 2009 at 10:32 PM, David Bruant &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruant at enseirb-matmeca.fr</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> First of all, there is a typo error in this example. The main HTML page
</I>&gt;&gt;<i> is a copy/paste of the first example (&quot;Worker example: One-core
</I>&gt;&gt;<i> computation&quot;).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My point here is to ask for a new attribute for the navigator object
</I>&gt;&gt;<i> that could describe the &quot;best&quot; number of workers in a delegation use case.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In the delegation example, the number of workers chosen is an arbitrary
</I>&gt;&gt;<i> 10. But, in a single-core processor, having only one worker will result
</I>&gt;&gt;<i> in more or less the same running time, because at the end, each worker
</I>&gt;&gt;<i> runs on the only core. This is just a waist of memory (and maybe time
</I>&gt;&gt;<i> because of scheduling cost).
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> This is not true.  The naive way of coding it without workers may
</I>&gt;<i> freeze the UI whenever doing heavy computation.  To ensure that you
</I>&gt;<i> can avoid this you have to be very explicit about breaking up your
</I>&gt;<i> algorithm into chunks that you can chain together with setTimeout.
</I>&gt;<i> Offloading the heavy computation to a worker allows you to code in the
</I>&gt;<i> naive style (which is much easier to both code and understand) without
</I>&gt;<i> the risk of UI-freeze.
</I>&gt;<i>
</I>&gt;<i> (I don't know the details, but it also seems possible that the
</I>&gt;<i> context-switching between main page and worker may be cheaper than
</I>&gt;<i> heavy setTimeout use.  Someone else would have to confirm/deny this.)
</I>&gt;<i>   
</I>When I say &quot;having only one worker will result in more or less the same
running time&quot;, I mean &quot;one worker on top of the main delegating browsing
context&quot;.

So, I compare &quot;the main browsing context + 10 workers&quot; with &quot;the main
browsing context + 1 worker&quot; (or 16 in the next example). In all what I
say, there is no need to change the architecture of the program of to
use timers, just the JS variable &quot;num_workers&quot;.

Sorry for the misunderstanding.

&gt;&gt;<i> On the other hand, on a 16-core processor (which doesn't exist yet, but
</I>&gt;&gt;<i> is a realistic idea for the next couple of decades), the task could be
</I>&gt;&gt;<i> executed faster with 16 workers.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Try 2 years, if AMD's press releases can be trusted. ^_^
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> The current best way to determine the number of worker that yields the
</I>&gt;&gt;<i> ressouces in the best way is to run a benchmark on an increasing number
</I>&gt;&gt;<i> of worker and stop it when the performance improvement stops.
</I>&gt;&gt;<i> I hope you will admit that this way in not acceptable.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I'm interested in seeing if browsers can provide reasonably accurate
</I>&gt;<i> estimates of this.
</I>&gt;<i>
</I>&gt;<i> ~TJ
</I>&gt;<i>   
</I>David

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066277.html">[whatwg] [WebWorkers] About the delegation example
</A></li>
	<LI>Next message: <A HREF="066282.html">[whatwg] [WebWorkers] About the delegation example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66278">[ date ]</a>
              <a href="thread.html#66278">[ thread ]</a>
              <a href="subject.html#66278">[ subject ]</a>
              <a href="author.html#66278">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
