<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Should script run if it comes from a HTML fragment?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Should%20script%20run%20if%20it%20comes%20from%20a%20HTML%20fragment%3F&In-Reply-To=%3CAANLkTi%3D1wDVB%3DMSEvRnkKNzA%3DixRBN2HZkLoHoWx4i6q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071283.html">
   <LINK REL="Next"  HREF="071289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Should script run if it comes from a HTML fragment?</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Should%20script%20run%20if%20it%20comes%20from%20a%20HTML%20fragment%3F&In-Reply-To=%3CAANLkTi%3D1wDVB%3DMSEvRnkKNzA%3DixRBN2HZkLoHoWx4i6q%40mail.gmail.com%3E"
       TITLE="[whatwg] Should script run if it comes from a HTML fragment?">jonas at sicking.cc
       </A><BR>
    <I>Fri Nov 12 15:11:42 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="071283.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
        <LI>Next message: <A HREF="071289.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71284">[ date ]</a>
              <a href="thread.html#71284">[ thread ]</a>
              <a href="subject.html#71284">[ subject ]</a>
              <a href="author.html#71284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Nov 12, 2010 at 2:54 PM, Ryosuke Niwa &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">rniwa at webkit.org</A>&gt; wrote:
&gt;<i> On Fri, Nov 12, 2010 at 2:29 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You looking at only part of what Henri said. He also pointed to
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=11191">http://www.w3.org/Bugs/Public/show_bug.cgi?id=11191</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> which is a request to change HTML5 so that createContextualFragment
</I>&gt;&gt;<i> can specify that scripts should remain executable.
</I>&gt;<i>
</I>&gt;<i> However, this request has not been granted yet.
</I>
I'm not sure what your argument is? This is just an editorial matter,
createContextualFragment can always be defined to behave whatever way
we deem is appropriate no matter what. And more importantly, the
biggest input to the spec will be what implementations do, not the
other way around.

&gt;&gt;<i> &gt;&gt; * Since scripts don't execute synchronously from within
</I>&gt;&gt;<i> &gt;&gt; createContextualFragment the caller doesn't have to deal with weird
</I>&gt;&gt;<i> &gt;&gt; reentrancy issues during parsing.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Sure but that means we have to special-case fragments created
</I>&gt;&gt;<i> &gt; by&#160;createContexualFragment. &#160;That adds extra complexity to the HTML
</I>&gt;&gt;<i> &gt; fragment
</I>&gt;&gt;<i> &gt; parsing algorithm.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'd prefer to single out scripts only in one API than in multiple ones.
</I>&gt;<i>
</I>&gt;<i> innerHTML and&#160;createContexualFragment both use the HTML fragment parsing
</I>&gt;<i> algorithm. &#160;If you had implemented these features as described in the spec,
</I>&gt;<i> there should be no differences.
</I>
Again, a spec for createContexualFragment didn't exist until recently.
And it certainly didn't exist close to a decade ago when it was
invented at Netscape. Same thing for innerHTML when it was invented at
microsoft.

The spec really isn't a source of authority here, reality is. I think
discussions about specs as a source of authority here is a red
herring.

&gt;<i> My concern is that treating script elements in a fragment&#160;differently&#160;based
</I>&gt;<i> on whether the fragment was added by innerHTML or&#160;createContextualFragment
</I>&gt;<i> is confusing to the developers. &#160;I would, if I was a developer.
</I>
You could also argue that it's confusing that createElement and
XSLTProcessor.transformToFragment creates fragments where scripts do
execute, but createContextualFragment doesn't.

&gt;<i>&#160;If
</I>&gt;<i> developers wanted to load a script file, they can explicitly load the file
</I>&gt;<i> and use eval, no?
</I>
I'd rather argue that they wouldn't put a &lt;script&gt; in their fragment
if they wanted it to do nothing.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071283.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
	<LI>Next message: <A HREF="071289.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71284">[ date ]</a>
              <a href="thread.html#71284">[ thread ]</a>
              <a href="subject.html#71284">[ subject ]</a>
              <a href="author.html#71284">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
