<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: Input Method Editor API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20Input%20Method%20Editor%20API&In-Reply-To=%3CAANLkTim7%2B4QvPfhoxFtvrYVf34PwQvYYO6A6RQjyS8Oy%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071248.html">
   <LINK REL="Next"  HREF="071268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: Input Method Editor API</H1>
<!--htdig_noindex-->
    <B>Hironori Bono (&#22346;&#37326; &#21338;&#20856;)</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20Input%20Method%20Editor%20API&In-Reply-To=%3CAANLkTim7%2B4QvPfhoxFtvrYVf34PwQvYYO6A6RQjyS8Oy%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal: Input Method Editor API">hbono at google.com
       </A><BR>
    <I>Tue Nov  9 03:31:02 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="071248.html">[whatwg] Specification of window.find()
</A></li>
        <LI>Next message: <A HREF="071268.html">[whatwg] Proposal: Input Method Editor API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28976">[ date ]</a>
              <a href="thread.html#28976">[ thread ]</a>
              <a href="subject.html#28976">[ subject ]</a>
              <a href="author.html#28976">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Greetings,

I'm Hironori Bono, a software engineer of Google. In the
w3c-international ML, we have been discussing to write a proposal that
adds an IME API to HTML5. This proposal is not only for web
applications to control a system IME but also to write an IME in
JavaScript. Even though this proposal is still an infant phase, I
would like to post it to whatwg to hear comments from HTML experts.
Would it be possible to read the following document and give me your
comments?

  <A HREF="https://docs.google.com/fileview?id=0B8eVDHQ9_22-MzJhMTg2YmItNWU3NC00NzJmLThlMTAtYmU1ZTBlZWJhNzM0&amp;hl=en&amp;authkey=CLLHkFw">https://docs.google.com/fileview?id=0B8eVDHQ9_22-MzJhMTg2YmItNWU3NC00NzJmLThlMTAtYmU1ZTBlZWJhNzM0&amp;hl=en&amp;authkey=CLLHkFw</A>

Thank you for your interest in advance.

Regards,

Hironori Bono
E-mail: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hbono at google.com</A>

On Fri, Oct 15, 2010 at 3:28 PM, Hironori Bono (&#22346;&#37326; &#21338;&#20856;) &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hbono at google.com</A>&gt; wrote:
&gt;<i> Greetings,
</I>&gt;<i>
</I>&gt;<i> I have updated my proposal to add the InputMethodContext interface.
</I>&gt;<i> Also I have added a simple example of an IME that uses this API. It is
</I>&gt;<i> definitely helpful to give me your feedbacks to the updated one. (It
</I>&gt;<i> may be better to send this proposal also to whatwg?)
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://docs.google.com/fileview?id=0B8eVDHQ9_22-Y2M2N2YwNzMtMTNmNS00OTc5LTg0OTUtNjdiNzE3OTdlNjFl&amp;hl=en&amp;authkey=CIPh1qEF">https://docs.google.com/fileview?id=0B8eVDHQ9_22-Y2M2N2YwNzMtMTNmNS00OTc5LTg0OTUtNjdiNzE3OTdlNjFl&amp;hl=en&amp;authkey=CIPh1qEF</A>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Hironori Bono
</I>&gt;<i> E-mail: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hbono at google.com</A>
</I>&gt;<i>
</I>&gt;<i> On Fri, Oct 8, 2010 at 5:57 PM, Hironori Bono (&#22346;&#37326; &#21338;&#20856;) &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hbono at google.com</A>&gt; wrote:
</I>&gt;&gt;<i> Nakano-san,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thank you for your response.
</I>&gt;&gt;<i> I will update the proposal to use the InputContext interface.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hironori Bono
</I>&gt;&gt;<i> E-mail: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hbono at google.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Thu, Oct 7, 2010 at 8:52 PM, Masayuki Nakano &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">masayuki at d-toybox.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> Of course, we can do it :-)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 2010/10/07 18:41, Hironori Bono (&#22346;&#37326; &#21338;&#20856;) wrote:
</I>&gt;&gt;&gt;&gt;<i> Nakano-san,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thank you so much for your feedback.
</I>&gt;&gt;&gt;&gt;<i> I have once thought a similar idea of adding an InputContext()
</I>&gt;&gt;&gt;&gt;<i> function to an Element interface and retrieve the input context from
</I>&gt;&gt;&gt;&gt;<i> an element as listed in the following snippet.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   var element = document.getElementById('test');
</I>&gt;&gt;&gt;&gt;<i>   var context = element.getInputContext(); // or
</I>&gt;&gt;&gt;&gt;<i> element.getContext('input-method');
</I>&gt;&gt;&gt;&gt;<i>   context.setComposition(composition);
</I>&gt;&gt;&gt;&gt;<i>   context.confirmComposition();
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Nevertheless, I'm not sure we can implement such interface on all
</I>&gt;&gt;&gt;&gt;<i> major user-agents. (I think we can implement this idea on WebKit.)
</I>&gt;&gt;&gt;&gt;<i> Would it be possible to give me whether we can implement such
</I>&gt;&gt;&gt;&gt;<i> InputContext interface on Firefox?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hironori Bono
</I>&gt;&gt;&gt;&gt;<i> E-mail: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hbono at google.com</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Thu, Oct 7, 2010 at 2:19 PM, Masayuki Nakano&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">masayuki at d-toybox.com</A>&gt;  wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Sorry for the delay.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The text-decoration-style property is updated in the latest working draft.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The dot-dash and dot-dot-dash are dropped, they aren't also needed by IME composition rendering. So, you can drop these values from your proposal.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I have some concern. On Win/Mac/Linux, if web browsers hoped, they could implement multiple IME context for every editors. So, InputMethodManager isn't useful on such browsers.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> So, I think that all editable elements should have &quot;InputMethodContext&quot; property and it should have composition, setEnable() and etc. Then, your proposal doesn't make any limitation of implementation of browsers.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> void setEnable(in Node node, in boolean enable);
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The result should be boolean. On the current proposal, web developers cannot check whether it succeeded or not.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> The setOpenState() method
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> [NOTE:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> do we need to notice this event to JavaScript IMEs? If so, what is the best option?]
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Yes, I think so. I think that there should be an interface for Javascript IME. When it's registered to a context, web browser should disables native IME.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> The hasComposition() method
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Returns true when the hosting user-agent is composing text. [NOTE: this function is
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> just copied from the one of WebKit to hear opinions of developers of JavaScript-based
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> IMEs.]
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I think that JS-IME developers doesn't need to know whether there is a native composition or not. When JS-IME is enabled, web browsers should kill native IME on the context.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> The setComposition() method
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Updates the composition information of the hosting user-agent.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> When a JavaScript-based IME starts a composition, it MUST call this function with the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> appropriate composition information. When a JavaScript-based IME cancels an ongoing
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> composition, it MUST call this function wiith a composition object whose text is empty.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> [NOTE: this function is just copied from the one of WebKit to hear opinions of developers
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> of JavaScript-based IMEs.]
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> So, I think that this is go away to another interface which is for JS-IME.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> The confirmComposition() method
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Finishes the ongoing composition of the hosting user-agent. [NOTE: this function is
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> just copied from the one of WebKit to hear opinions of developers of JavaScript-based
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> IMEs.]
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> When JS-IME is registered, this should be done automatically, I think. But for web developers, I think this method is needed.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On 2010/09/27 12:46, Hironori Bono (&#22346;&#37326; &#21338;&#20856;) wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Greetings,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Thank you so much for all of your feedbacks. I have published an
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> updated proposal to the URL below:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>    <A HREF="http://docs.google.com/fileview?id=0B8eVDHQ9_22-ZWJmNzE2YzYtNTYwNC00ZDM3LThkODgtZjc5ODI1Zjg4ZDhm&amp;hl=en&amp;authkey=CMPx4qQG">http://docs.google.com/fileview?id=0B8eVDHQ9_22-ZWJmNzE2YzYtNTYwNC00ZDM3LThkODgtZjc5ODI1Zjg4ZDhm&amp;hl=en&amp;authkey=CMPx4qQG</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> This proposal does not only apply your comments (such as removing the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Candidate interface), but also added some experimental functions that
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> allows web-application developers to change the composition data owned
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> by user agents, i.e. functions that help developers implement IMEs.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> (These functions are just copied from the IME functions of WebKit.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Therefore, it is definitely helpful to give me your feedbacks.)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Even though I thought I have applied all of your comments, I might
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> forget applying some. Please feel free to shoot me if I forgot
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> applying your comments.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Thank you again for your interest in advance.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Hironori Bono
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> E-mail: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hbono at google.com</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;&gt;<i> Masayuki Nakano&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">masayuki at d-toybox.com</A>&gt;
</I>&gt;&gt;&gt;&gt;&gt;<i> Manager, Internationalization, Mozilla Japan.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Masayuki Nakano &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">masayuki at d-toybox.com</A>&gt;
</I>&gt;&gt;&gt;<i> Manager, Internationalization, Mozilla Japan.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I></PRE>












<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071248.html">[whatwg] Specification of window.find()
</A></li>
	<LI>Next message: <A HREF="071268.html">[whatwg] Proposal: Input Method Editor API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28976">[ date ]</a>
              <a href="thread.html#28976">[ thread ]</a>
              <a href="subject.html#28976">[ subject ]</a>
              <a href="author.html#28976">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
