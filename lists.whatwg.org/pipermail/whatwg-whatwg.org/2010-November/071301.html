<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] fxCanvas 0.2 and some remarks about canvas spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20fxCanvas%200.2%20and%20some%20remarks%20about%20canvas%20spec&In-Reply-To=%3C20101114114446.47c0e5ea.buzzilo%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071300.html">
   <LINK REL="Next"  HREF="071304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] fxCanvas 0.2 and some remarks about canvas spec</H1>
<!--htdig_noindex-->
    <B>Evgeny Burzak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20fxCanvas%200.2%20and%20some%20remarks%20about%20canvas%20spec&In-Reply-To=%3C20101114114446.47c0e5ea.buzzilo%40gmail.com%3E"
       TITLE="[whatwg] fxCanvas 0.2 and some remarks about canvas spec">buzzilo at gmail.com
       </A><BR>
    <I>Sun Nov 14 00:44:46 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="071300.html">[whatwg] fxCanvas 0.2 and some remarks about canvas spec
</A></li>
        <LI>Next message: <A HREF="071304.html">[whatwg] fxCanvas 0.2 and some remarks about canvas spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71301">[ date ]</a>
              <a href="thread.html#71301">[ thread ]</a>
              <a href="subject.html#71301">[ subject ]</a>
              <a href="author.html#71301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 13 Nov 2010 23:20:30 -0500
Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at MIT.EDU</A>&gt; wrote:

&gt;<i> On 11/13/10 12:20 PM, Evgeny Burzak wrote:
</I>&gt;<i> &gt; But , the test results looks  similar for all vendors! On average the
</I>&gt;<i> &gt; difference in processing speed is about 2-3 times (five times in
</I>&gt;<i> &gt; Firefox 4).
</I>&gt;<i> 
</I>&gt;<i>  &gt; This is due to the fact that loops take less time (width x
</I>&gt;<i> &gt; height * 4 vs. width x height) and arrays with less elements take less
</I>&gt;<i> &gt; memory.  Though I realize that main idea for data structure was
</I>&gt;<i> &gt; simplicity, but in this case it seems simplicity is evil, not good.
</I>&gt;<i> 
</I>&gt;<i> At least Gecko and Webkit implement canvas imagedata as something more 
</I>&gt;<i> like a WebGL typed array, not a JS array.  So in particular, the memory 
</I>&gt;<i> usage is the same or better as for your &quot;compact&quot; array version (in the 
</I>&gt;<i> case of Gecko actually 2x better, since your &quot;compact&quot; array uses 8 
</I>&gt;<i> bytes per color, while the native imagedata uses 4 bytes per color). 
</I>&gt;<i> Yes that gives a significant speedup due to less memory traffic and 
</I>&gt;<i> better cache locality.
</I>&gt;<i> 
</I>&gt;<i> But this is only a problem for emulating canvas, no?  And only in UAs 
</I>&gt;<i> that don't support typed arrays, say.  That all seems like a transitory 
</I>&gt;<i> problem.
</I>&gt;<i> 
</I>Yes, this is local problem for canvas emulator and IE. 
So which format should I use? A lot of people using WinXP and IE 6-8 at this moment. There are no typed arrays, no fast JS and so on... :(
But they may be our clients and don't worry about that. If they see message &quot;Script takes too much time&quot;, they say goodbye, it's not for me. 
This situation will be (probably) five years long or more. 
So while is it possible to add conversion methods to the typed array? 
Something like fromArray32() and fromArray8() ?

Evgeny

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071300.html">[whatwg] fxCanvas 0.2 and some remarks about canvas spec
</A></li>
	<LI>Next message: <A HREF="071304.html">[whatwg] fxCanvas 0.2 and some remarks about canvas spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71301">[ date ]</a>
              <a href="thread.html#71301">[ thread ]</a>
              <a href="subject.html#71301">[ subject ]</a>
              <a href="author.html#71301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
