<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Javascript: URLs as element attributes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Javascript%3A%20URLs%20as%20element%20attributes&In-Reply-To=%3Cop.vmqca4xzsr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071320.html">
   <LINK REL="Next"  HREF="071497.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Javascript: URLs as element attributes</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Javascript%3A%20URLs%20as%20element%20attributes&In-Reply-To=%3Cop.vmqca4xzsr6mfa%40kirk%3E"
       TITLE="[whatwg] Javascript: URLs as element attributes">philipj at opera.com
       </A><BR>
    <I>Thu Nov 25 06:10:08 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="071320.html">[whatwg] Javascript: URLs as element attributes
</A></li>
        <LI>Next message: <A HREF="071497.html">[whatwg] Javascript: URLs as element attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71440">[ date ]</a>
              <a href="thread.html#71440">[ thread ]</a>
              <a href="subject.html#71440">[ subject ]</a>
              <a href="author.html#71440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 16 Nov 2010 02:15:45 +0100, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i> On Wed, 11 Aug 2010, Boris Zbarsky wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For what it's worth, as I see it there are three possible behaviors for
</I>&gt;&gt;<i> a javascript: URI (whether in an attribute value or elsewhere):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1)  Don't run the script.
</I>&gt;&gt;<i> 2)  Run the script, but in a sandbox.
</I>&gt;&gt;<i> 3)  Run the script against some Window object (which one?)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Defining which of these happens in which case would be good.  Again,
</I>&gt;&gt;<i> Gecko's behavior is #2 by default (in all sorts of situations; basically
</I>&gt;&gt;<i> anywhere you can dereference a URI), with exceptions made to do #3 in
</I>&gt;&gt;<i> some cases.
</I>&gt;<i>
</I>&gt;<i> That's what the spec says currently.
</I>
I've recently had reason to dabble with inline javascript: URLs in Opera,  
trying to figure out what the interoperability constraints are.

Opera's current behavior is to execute javascript: URLs except for in the  
context of &lt;img&gt;, &lt;embed&gt;, &lt;applet&gt; and any inline loads from CSS.

Before I was aware of this thread, I went through the different kinds of  
contexts where we do allow javascript: to execute, comparing to other  
browsers. The results:

&lt;video poster=&quot;javascript:...&quot;&gt; only executed by Opera

&lt;script src=&quot;javascript:...&quot;&gt; only executed by Opera

&lt;bgsound src=&quot;javascript:...&quot;&gt; only executed by Opera

&lt;object data=&quot;javascript:...&quot;&gt; only executed by Opera and Firefox

(I haven't looked at &lt;iframe&gt;, as we don't treat that as an inline load in  
the same way as the above.)

Based on this, unless there are corner-cases I've missed, it seems  
unlikely that there's a large body of web content that depends on inline  
javascript: URLs executing. My current plan is to try completely blocking  
javascript: URLs in the contexts mentioned above. This seems to be the  
simplest to implement and the fastest way to reach interoperability. The  
alternative is to start executing javascript: URLs in more contexts,  
which, even if sandboxed, doesn't seem particularly useful.

I'll keep you posted if there are any compatibility issues that come up  
with this. Assuming (boldly) there is not, would there be support from  
other browsers to move in this direction and change the spec to match? (It  
seems that IE and WebKit are already basically already doing what I'm  
advocating.)

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071320.html">[whatwg] Javascript: URLs as element attributes
</A></li>
	<LI>Next message: <A HREF="071497.html">[whatwg] Javascript: URLs as element attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71440">[ date ]</a>
              <a href="thread.html#71440">[ thread ]</a>
              <a href="subject.html#71440">[ subject ]</a>
              <a href="author.html#71440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
