<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Should script run if it comes from a HTML fragment?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Should%20script%20run%20if%20it%20comes%20from%20a%20HTML%20fragment%3F&In-Reply-To=%3CAANLkTi%3DfTKDj6-r6J2LZxsR7NfzkXSrDRap5yJiRFuTj%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="071281.html">
   <LINK REL="Next"  HREF="071284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Should script run if it comes from a HTML fragment?</H1>
<!--htdig_noindex-->
    <B>Ryosuke Niwa</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Should%20script%20run%20if%20it%20comes%20from%20a%20HTML%20fragment%3F&In-Reply-To=%3CAANLkTi%3DfTKDj6-r6J2LZxsR7NfzkXSrDRap5yJiRFuTj%40mail.gmail.com%3E"
       TITLE="[whatwg] Should script run if it comes from a HTML fragment?">rniwa at webkit.org
       </A><BR>
    <I>Fri Nov 12 14:54:31 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="071281.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
        <LI>Next message: <A HREF="071284.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71283">[ date ]</a>
              <a href="thread.html#71283">[ thread ]</a>
              <a href="subject.html#71283">[ subject ]</a>
              <a href="author.html#71283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Nov 12, 2010 at 2:29 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> You looking at only part of what Henri said. He also pointed to
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=11191">http://www.w3.org/Bugs/Public/show_bug.cgi?id=11191</A>
</I>&gt;<i>
</I>&gt;<i> which is a request to change HTML5 so that createContextualFragment
</I>&gt;<i> can specify that scripts should remain executable.
</I>&gt;<i>
</I>
However, this request has not been granted yet.

 &gt;&gt; * Since scripts don't execute synchronously from within
&gt;<i> &gt;&gt; createContextualFragment the caller doesn't have to deal with weird
</I>&gt;<i> &gt;&gt; reentrancy issues during parsing.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sure but that means we have to special-case fragments created
</I>&gt;<i> &gt; by createContexualFragment.  That adds extra complexity to the HTML
</I>&gt;<i> fragment
</I>&gt;<i> &gt; parsing algorithm.
</I>&gt;<i>
</I>&gt;<i> I'd prefer to single out scripts only in one API than in multiple ones.
</I>&gt;<i>
</I>
innerHTML and createContexualFragment both use the HTML fragment parsing
algorithm.  If you had implemented these features as described in the spec,
there should be no differences.

My concern is that treating script elements in a fragment differently based
on whether the fragment was added by innerHTML or createContextualFragment
is confusing to the developers.  I would, if I was a developer.  If
developers wanted to load a script file, they can explicitly load the file
and use eval, no?

&gt;&gt;<i> For these reasons we decided to keep Firefox 4 behaving like previous
</I>&gt;<i> &gt;&gt; versions of firefox and allow scripts created using
</I>&gt;<i> &gt;&gt; createContextualFragment to execute.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; However, Firefox 4.0 Beta 6 does not execute the script as far as I
</I>&gt;<i> tested.
</I>&gt;<i> &gt;  Try opening <A HREF="http://dscoder.com/MessageStyle/testcase.html">http://dscoder.com/MessageStyle/testcase.html</A>
</I>&gt;<i>
</I>&gt;<i> That's old code at this point. And it resulted in people filing bugs
</I>&gt;<i> on us. I forget if we fixed it for beta7 or not, but if you try recent
</I>&gt;<i> nightlies it should work there.
</I>&gt;<i>
</I>
OK.  Thanks for clarification.

- Ryosuke
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20101112/bbdeb779/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20101112/bbdeb779/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="071281.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
	<LI>Next message: <A HREF="071284.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71283">[ date ]</a>
              <a href="thread.html#71283">[ thread ]</a>
              <a href="subject.html#71283">[ subject ]</a>
              <a href="author.html#71283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
