<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML5 frame navigation policy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML5%20frame%20navigation%20policy&In-Reply-To=%3C9825acf0710261551i4bcf4356u76359128150b6ea2%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012991.html">
   <LINK REL="Next"  HREF="012915.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML5 frame navigation policy</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML5%20frame%20navigation%20policy&In-Reply-To=%3C9825acf0710261551i4bcf4356u76359128150b6ea2%40mail.gmail.com%3E"
       TITLE="[whatwg] HTML5 frame navigation policy">hk9565 at gmail.com
       </A><BR>
    <I>Fri Oct 26 15:51:51 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="012991.html">[whatwg] SQL API and Transactions
</A></li>
        <LI>Next message: <A HREF="012915.html">[whatwg] several messages about the naming of the loop	attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12912">[ date ]</a>
              <a href="thread.html#12912">[ thread ]</a>
              <a href="subject.html#12912">[ subject ]</a>
              <a href="author.html#12912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Collin Jackson and I have been looking at the frame navigation policy
of various browsers and have a suggestion for improving the frame
navigation policy in the HTML5 spec.  As we understand the spec [1],
it is stricter than IE7, Firefox 2, IE6, and Safari 3.

Internet Explorer 6 and Safari 3 have very permissive frame navigation
policies that permit serious address-bar spoofing attacks on popular
web sites.  For example, if a site asks for a user's password inside a
frame (as many popular web sites do), an attacker can navigate the
frame containing the password-entry field and steal passwords.

The frame navigation policy in Firefox was developed in 1999 in
response to a similar attack against CitiBank [2].  Their policy is as
follows:
* Allow the navigation if the source and target frames contained in
the same window.
* Allow if the source frame can script the target frame or one of its
ancestors in the frame hierarchy.

Internet Explorer 7 is more strict than Firefox 2.  For example, IE7
forbids the navigation from the lower frame in [3] whereas Firefox 2
permits it.  From what we can tell, IE7 is enforcing the following
policy:
* Allow if the source frame can script the target frame or one of its
ancestors in the frame hierarchy.

The HTML5 spec is the most strict.  From our reading, it forbids both
of the navigations in [4], whereas all the browsers we've tested allow
them.  We think the third bullet of item 4 in section 4.1.5 should
read:

&quot;Or that browsing context is not a top-level browsing context, and the
origin of the active document of *an ancestor* browsing context of
that browsing context is the same as the origin of the current
browsing context's active document,&quot;

where we intend &quot;ancestor&quot; to mean the transitive closure of the
parent relation.  This should (1) be more compatible with existing
sites as it is closer to current browser behavior and (2) not be any
less secure than the current spec because a frame that can script an
ancestor could have created a floating iframe and used it to simulate
navigating the target frame.

Adam

[1] <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#the-rules">http://www.whatwg.org/specs/web-apps/current-work/#the-rules</A>
[2] <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=13871">https://bugzilla.mozilla.org/show_bug.cgi?id=13871</A>
[3] <A HREF="http://crypto.stanford.edu/~abarth/research/nav/frame1.html">http://crypto.stanford.edu/~abarth/research/nav/frame1.html</A>
[4] <A HREF="http://xenon.stanford.edu/~abarth/research/nav/frame1.html">http://xenon.stanford.edu/~abarth/research/nav/frame1.html</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012991.html">[whatwg] SQL API and Transactions
</A></li>
	<LI>Next message: <A HREF="012915.html">[whatwg] several messages about the naming of the loop	attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12912">[ date ]</a>
              <a href="thread.html#12912">[ thread ]</a>
              <a href="subject.html#12912">[ subject ]</a>
              <a href="author.html#12912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
