<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Couple comments on Database storage spec.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Couple%20comments%20on%20Database%20storage%20spec.&In-Reply-To=%3C4716E109.5030406%40sicking.cc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="055060.html">
   <LINK REL="Next"  HREF="055141.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Couple comments on Database storage spec.</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Couple%20comments%20on%20Database%20storage%20spec.&In-Reply-To=%3C4716E109.5030406%40sicking.cc%3E"
       TITLE="[whatwg] Couple comments on Database storage spec.">jonas at sicking.cc
       </A><BR>
    <I>Wed Oct 17 21:28:57 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="055060.html">[whatwg] Couple comments on Database storage spec.
</A></li>
        <LI>Next message: <A HREF="055141.html">[whatwg] Couple comments on Database storage spec.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55064">[ date ]</a>
              <a href="thread.html#55064">[ thread ]</a>
              <a href="subject.html#55064">[ subject ]</a>
              <a href="author.html#55064">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Ian Hickson wrote:
&gt;<i> On Wed, 17 Oct 2007, Scott Hess wrote:
</I>&gt;&gt;<i> Honestly, something like quote() is not necessary.  It's just that 
</I>&gt;&gt;<i> constructing SQL statements via concatenation is a hole I often see 
</I>&gt;&gt;<i> people falling into.  Having quote() allows you to construct safer SQL 
</I>&gt;&gt;<i> statements, but people who construct statements directly rather than 
</I>&gt;&gt;<i> constructing a parallel statement and arg array may be beyond saving.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Other cases I've seen where quote() could be used are dynamic 
</I>&gt;&gt;<i> construction of WHERE clauses, something like:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    var sql = &quot;SELECT rowid FROM t WHERE name = ?&quot;
</I>&gt;&gt;<i>    if (color) {
</I>&gt;&gt;<i>      sql += &quot; AND color = &quot; + color;
</I>&gt;&gt;<i>    }
</I>&gt;&gt;<i>    ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> and comparable constructs for INSERT and UPDATE.  As mentioned, these 
</I>&gt;&gt;<i> can generally be handled by constructing the statement with bind 
</I>&gt;&gt;<i> parameters in parallel to the arg array.  Depending on control flow, 
</I>&gt;&gt;<i> this can be pretty annoying, but my experience with this is mostly in 
</I>&gt;&gt;<i> C/C++, where it's much more annoying to change the types of things.
</I>&gt;<i> 
</I>&gt;<i> Yeah. I think having quote() might do as much damage by encouraging people 
</I>&gt;<i> to write codepaths that need it as it might help by having people writing 
</I>&gt;<i> those codepaths anyway be saved (if, that is, they know to be saved).
</I>&gt;<i> 
</I>&gt;<i> What would be cool is if we could detect, through tainting, the bad 
</I>&gt;<i> codepaths. But I see no way to do that here.
</I>
If people write codepaths that need quote(), but use quote() 
appropriately then I don't see any harm done, so I'm not sure what 
specifically you are worried about here?

I think not having quote will make people write their own, and every so 
often fail at it. People that don't think about the possibility of 
getting exploited aren't going to use neither '?' nor quote() so they 
are hosed either way.

What are we trying to prevent here. The page can only attack data it 
owns, so the only thing I can think of is preventing bugs. Though that 
is certainly not unimportant.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="055060.html">[whatwg] Couple comments on Database storage spec.
</A></li>
	<LI>Next message: <A HREF="055141.html">[whatwg] Couple comments on Database storage spec.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55064">[ date ]</a>
              <a href="thread.html#55064">[ thread ]</a>
              <a href="subject.html#55064">[ subject ]</a>
              <a href="author.html#55064">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
