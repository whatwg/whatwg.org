<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] SQL API and database metadata at creation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20and%20database%20metadata%20at%20creation&In-Reply-To=%3C01C0B017-6FD0-4AD6-8DD4-2F2DBF436629%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="055147.html">
   <LINK REL="Next"  HREF="055143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] SQL API and database metadata at creation</H1>
<!--htdig_noindex-->
    <B>Brady Eidson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20and%20database%20metadata%20at%20creation&In-Reply-To=%3C01C0B017-6FD0-4AD6-8DD4-2F2DBF436629%40apple.com%3E"
       TITLE="[whatwg] SQL API and database metadata at creation">beidson at apple.com
       </A><BR>
    <I>Wed Oct 24 10:38:59 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="055147.html">[whatwg] name/codebase attributes on object element
</A></li>
        <LI>Next message: <A HREF="055143.html">[whatwg] SQL API and database metadata at creation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55140">[ date ]</a>
              <a href="thread.html#55140">[ thread ]</a>
              <a href="subject.html#55140">[ subject ]</a>
              <a href="author.html#55140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>First off, my first impression of the new API is that I like it a lot  
and think it addresses most - if not all - of the outstanding issues.

We'll see if that impression continues after I process it all!  =D

---------------------
On to my point...

The API has various places where the User Agent should provide some  
form of UI for policy and management of databases.
For example if an origin reaches its size limit, the User Agent should  
prompt for permission to exceed the limit.
Additionally, the UA is required to provide a facility for the user to  
see the size of all current databases.

Google Gears takes things further by prompting the user for permission  
to create a database in the first place.  I think this is quite  
prudent and we're likely to provide facilities for the same prompt.

The problem I have is that all of these UI elements - required or  
prudent - have little to work with for making the UI clear and useful.

In the wild, database names will often not be too useful.  We use  
&quot;WebKitStickyNotes&quot; for our example, but someone might use a generic  
&quot;Database&quot; or a cyrptic &quot;__rvWidgets&quot; as a database name.
How is a user supposed to interpret that in the management UI?  It is  
unlikely to be useful or meaningful.
And if a UA prompts the user at creation like Gears, how is the user  
supposed to make a meaningful decision if they're told &quot;www.foobar.com  
wants to create a database named '__Xlak`&quot;?

The database name is - and should remain - a technical detail that is  
internal to the implementation of a web application.  I propose we  
provide an optional way for an openDatabase() call to include a  
DatabaseDescription, which is meant to be a human-readable name or  
description of the database.  This would make policy prompts regarding  
the database (creation, increasing the size) as well as the management  
UI potentially more meaningful and clear to the user.

A side proprosal that might help consolidate the &quot;should I allow this  
database to be created?&quot; and &quot;should this origin be allowed to go over  
its size limit?&quot; prompts would be to provide another optional argument  
to the openDatabase() call which is the &quot;expected size of the  
database&quot; which is something many application developers may be able  
to establish ahead of time.

Armed with these two option arguments, a single UI prompt similar to:
&quot;www.google.com wants to create a database on your hard drive.  The  
purpose of the database is for &quot;&lt;DatabaseDescription&gt;&quot; and www.google.com 
  thinks the database might use up to &lt;expected size&gt; bytes of drive  
space.  Do you want to let it continue?&quot;

The response to this prompt could remove the requirement to bump the  
allowed quota later as long as the database stays under its expected  
usage.  The DatabaseDescription and allowed size could also be  
represented in the management UI.

Armed with the current information, the prompt could only be:  &quot;www.google.com 
  wants to create a database named &lt;cryptic name&gt; on your hard drive.   
Do you want to let it continue?&quot;

I don't think this is mission critical for the spec.  But I do think  
that as long as there are required UI elements in the spec as well as  
implicit UI elements many User Agents will choose to implement, that  
the spec would be even more proficient to have a standard way to  
provide this information.

~Brady

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="055147.html">[whatwg] name/codebase attributes on object element
</A></li>
	<LI>Next message: <A HREF="055143.html">[whatwg] SQL API and database metadata at creation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55140">[ date ]</a>
              <a href="thread.html#55140">[ thread ]</a>
              <a href="subject.html#55140">[ subject ]</a>
              <a href="author.html#55140">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
