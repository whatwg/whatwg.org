<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] SQL API and database versioning
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20and%20database%20versioning&In-Reply-To=%3C000801c80c24%24ddd0be20%244d01010a%40IBM42F76C011DF%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="055040.html">
   <LINK REL="Next"  HREF="054911.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] SQL API and database versioning</H1>
<!--htdig_noindex-->
    <B>K&#345;i&#353;tof &#381;elechovski</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20and%20database%20versioning&In-Reply-To=%3C000801c80c24%24ddd0be20%244d01010a%40IBM42F76C011DF%3E"
       TITLE="[whatwg] SQL API and database versioning">giecrilj at stegny.2a.pl
       </A><BR>
    <I>Thu Oct 11 09:36:10 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="055040.html">[whatwg] several messages about the versioning feature in	the	SQL API
</A></li>
        <LI>Next message: <A HREF="054911.html">[whatwg] Comments/questions on 4.6 Offline Web applications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54959">[ date ]</a>
              <a href="thread.html#54959">[ thread ]</a>
              <a href="subject.html#54959">[ subject ]</a>
              <a href="author.html#54959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>It looks like an unintended omission to me.  I would say &quot;If the *expected*
database version is an empty string&quot;, which is ambiguous as well, but it is
about the &quot;expected version&quot; of course.

I think that if someone opens a database without expecting a particular
version and the database already exists the openDatabase() call should
succeed.

Best regards, Chris

-----Original Message-----
From: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A>
[mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A>] On Behalf Of Brady Eidson
Sent: Thursday, October 11, 2007 7:37 AM
To: WHATWG Mailing List
Subject: [whatwg] SQL API and database versioning

openDatabase() is called with a database name and an expected version  
string.

If the database has a version, and it is different than the expected  
version, openDatabase() fails.  This makes sense.  But...

&quot;Otherwise, if the database version is the empty string, or if the  
database doesn't yet exist, or if the database exists and the version  
provided to the openDatabase() method is the same as the current  
version associated with the database, then the method must return a  
Database object...&quot;

1 of these 3 situations doesn't make sense.  A database without a  
version should not be considered valid if the caller to openDatabase()  
expects a version.

This seems silly as two callers, one expecting &quot;versionFoo&quot; of a  
database and the other expecting &quot;versionBar&quot; will both be allowed  
access to a versionless database.
That seems like an instant recipe for failure for at least versionFoo  
or versionBar, possibly both.

I think that if someone opens a database with an expected version and  
the database already exists but has an empty version string, the  
openDatabase() call should fail.

~Brady



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="055040.html">[whatwg] several messages about the versioning feature in	the	SQL API
</A></li>
	<LI>Next message: <A HREF="054911.html">[whatwg] Comments/questions on 4.6 Offline Web applications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54959">[ date ]</a>
              <a href="thread.html#54959">[ thread ]</a>
              <a href="subject.html#54959">[ subject ]</a>
              <a href="author.html#54959">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
