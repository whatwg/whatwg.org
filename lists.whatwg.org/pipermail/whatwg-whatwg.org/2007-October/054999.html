<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Give guidance about RFC 4281 codecs parameter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Give%20guidance%20about%20RFC%204281%20codecs%20parameter&In-Reply-To=%3CPine.LNX.4.62.0710130706040.19595%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="054997.html">
   <LINK REL="Next"  HREF="055003.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Give guidance about RFC 4281 codecs parameter</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Give%20guidance%20about%20RFC%204281%20codecs%20parameter&In-Reply-To=%3CPine.LNX.4.62.0710130706040.19595%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Give guidance about RFC 4281 codecs parameter">ian at hixie.ch
       </A><BR>
    <I>Sat Oct 13 00:38:00 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="054997.html">[whatwg] Accessibility and the Apple Proposal for Timed Media Elements
</A></li>
        <LI>Next message: <A HREF="055003.html">[whatwg] Give guidance about RFC 4281 codecs parameter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54999">[ date ]</a>
              <a href="thread.html#54999">[ thread ]</a>
              <a href="subject.html#54999">[ subject ]</a>
              <a href="author.html#54999">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 8 Apr 2007, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> Since giving guidance in the spec itself is more likely to lead to 
</I>&gt;<i> vendors and authors understanding codecs parameter than expecting them 
</I>&gt;<i> to follow normative references, I think the spec should document the 
</I>&gt;<i> correct &lt;source&gt; element type attribute values for the following 
</I>&gt;<i> realistic cases. (MIME without parameters and filename extension in 
</I>&gt;<i> parentheses.)
</I>
I've added examples for many of these in the spec. I hope they're right.

   <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#type8">http://www.whatwg.org/specs/web-apps/current-work/#type8</A>

I couldn't add examples that I didn't know, though. If anyone from 
Microsoft is listening, it would be useful to hear your input on WMV, ASF, 
AVI, etc, codecs=&quot;&quot; values (see below for more details).


On Mon, 9 Apr 2007, Dave Singer wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt;  * H.264 Baseline profile video and Low-Complexity AAC audio in MP4
</I>&gt;<i> &gt; container. (video/mp4; .mp4)
</I>&gt;<i> 
</I>&gt;<i> The AAC is covered by the RFC;  the example is there - mp4a.40.2.
</I>&gt;<i> 
</I>&gt;<i> H.264 was recently covered by 3GPP.  See 26.244 V7.1.0 section A.2.2,
</I>&gt;<i> available from www.3gpp.org.
</I>&gt;<i> 
</I>&gt;<i> When the first element of a value is 'avc1', indicating H.264 (AVC) video
</I>&gt;<i> [29], the second element is the hexadecimal representation of the following
</I>&gt;<i> three bytes in the sequence parameter set NAL unit specified in [29]: 1)
</I>&gt;<i> profile_idc, 2) a byte composed of the values of constraint_set0_flag,
</I>&gt;<i> constraint_set1_flag, constraint_set2_flag, constraint_set3_flag, and
</I>&gt;<i> reserved_zero_4bits in bit-significance order, starting from the most
</I>&gt;<i> significant bit, and 3) level_idc. Note that reserved_zero_4bits is required
</I>&gt;<i> to be equal to 0 in [29], but other values for it may be specified in the
</I>&gt;<i> future by ITU-T or ISO/IEC.
</I>&gt;<i> 
</I>&gt;<i> You don't give me a level number, so I put xx for those hex digits below.
</I>&gt;<i> 
</I>&gt;<i> Assuming we're simple baseline, and also main and extended compatible
</I>&gt;<i> avc1.42E0xx
</I>
Assuming level 3, I assume that the correct example here would be:

  H.264 Simple baseline profile video (main and extended video compatible) 
  level 3 and Low-Complexity AAC audio in MP4 container

    type=&quot;video/mp4; codecs=&quot;avc1.42E030, mp4a.40.2&quot;


&gt;<i> &gt;  * H.264 Extended profile video and Low-Complexity AAC audio in MP4 
</I>&gt;<i> &gt; container. (video/mp4; .mp4
</I>&gt;<i> 
</I>&gt;<i> Extended profile has the value (decimal) 88, and typically Extended 
</I>&gt;<i> profile streams would be marked as Baseline compatible, at least. Here 
</I>&gt;<i> is an example for this AVC
</I>&gt;<i> 
</I>&gt;<i> avc1.58A0xx
</I>
Again assuming level 3:

   H.264 Extended profile video (baseline-compatible) level 3 and 
   Low-Complexity AAC audio in MP4 container

     type=&quot;video/mp4; codecs=&quot;avc1.58A030, mp4a.40.2&quot;&quot;


&gt;<i> &gt;  * H.264 Main profile video and Low-Complexity AAC audio in MP4 container.
</I>&gt;<i> &gt; (video/mp4; .mp4)
</I>&gt;<i> 
</I>&gt;<i> Main profile is decimal 77, so something like
</I>&gt;<i> avc1.4D40xx
</I>
&quot;something like&quot; seems a bit vague... what do I tell authors to put? Is 
this correct?:

   H.264 Main profile video level 3 and Low-Complexity AAC audio in MP4 
   container

     type=&quot;video/mp4; codecs=&quot;avc1.4D4030, mp4a.40.2&quot;&quot;


&gt;<i> &gt;  * H.264 High profile video and Low-Complexity AAC audio in MP4 container.
</I>&gt;<i> &gt; (video/mp4; .mp4)
</I>&gt;<i> 
</I>&gt;<i> There are a number of high profiles, confusingly, though there is one called
</I>&gt;<i> 'high', with value decimal 100.
</I>&gt;<i>
</I>&gt;<i> avc1.6400xx
</I>&gt;<i> 
</I>&gt;<i> if it's not compatible with main, baseline, or extended profiles.
</I>
So is this the right thing to put in the spec?

   H.264 &quot;High&quot; profile video (incompatible with main, baseline, or 
   extended profiles) level 3 and Low-Complexity AAC audio in MP4  
   container

     type=&quot;video/mp4; codecs=&quot;avc1.640030, mp4a.40.2&quot;&quot;



&gt;<i> &gt;  * MPEG-4 Simple Profile profile video and Low-Complexity AAC audio in MP4
</I>&gt;<i> &gt; container. (video/mp4; .mp4)
</I>&gt;<i> 
</I>&gt;<i> Covered by the RFC:
</I>&gt;<i> 
</I>&gt;<i> For example, MPEG-4 Visual Simple Profile Level 0 has the value 9,
</I>&gt;<i>    so a complete string for MPEG-4 Visual Simple Profile Level 0 would
</I>&gt;<i>    be &quot;mp4v.20.9&quot;.
</I>&gt;<i> 
</I>&gt;<i> Though when checking the next answer, I read in the spec. that we may have a
</I>&gt;<i> typo here, it might be 8.  Ooops, if so.
</I>&gt;<i> 
</I>&gt;<i> Simple Profile/Level 0	00001000
</I>&gt;<i> Reserved			00001001 - 00001111
</I>
So:

   MPEG-4 Visual Simple Profile Level 0 video and Low-Complexity AAC 
   audio in MP4 container

    type=&quot;video/mp4; codecs=&quot;mp4v.20.8, mp4a.40.2&quot;&quot;

...?


&gt;<i> &gt;  * MPEG-4 Advanced Simple Profile profile video and Low-Complexity AAC audio
</I>&gt;<i> &gt; in MP4 container. (video/mp4; .mp4)
</I>&gt;<i> 
</I>&gt;<i> Advanced Simple  Profile/Level 0	11110000
</I>&gt;<i> 
</I>&gt;<i> so, mp4v.20.240
</I>
Advanced Simple? Really? How do you guys come up with these names!

Is this right?:

   MPEG-4 Advanced Simple Profile Level 0 video and Low-Complexity AAC 
   audio in MP4 container

     type=&quot;video/mp4; codecs=&quot;mp4v.20.240, mp4a.40.2&quot;&quot;


&gt;<i> &gt;  * MPEG-4 Simple Profile profile video and AMR audio in 3GPP container.
</I>&gt;<i> &gt; (video/3gpp; .3gp)
</I>&gt;<i> 
</I>&gt;<i> Video we've covered.  AMR is in 26.244,
</I>&gt;<i> 
</I>&gt;<i> samr
</I>
So to confirm:

   MPEG-4 Visual Simple Profile Level 0 video and AMR audio in 3GPP 
   container

     type=&quot;video/3gpp; codecs=&quot;mp4v.20.8, samr&quot;&quot;


&gt;<i> &gt;  * WMV9 video and WMA 2 audio in ASF container. (video/x-ms-wmv; .wmv)
</I>&gt;<i> &gt;  * WMV8 video and WMA 2 audio in ASF container. (video/x-ms-wmv; .wmv)
</I>&gt;<i> 
</I>&gt;<i> These would be up to Microsoft to define, I assume.  I am not aware of a
</I>&gt;<i> definition.
</I>&gt;<i>
</I>&gt;<i> &gt;  * VC-1 video and WMA 10 Pro audio in ASF container. (video/x-ms-wmv; .wmv)
</I>&gt;<i> 
</I>&gt;<i> VC-1 is standardized by SMPTE, but again this container format is Microsoft's.
</I>&gt;<i> 
</I>&gt;<i> &gt;  * Real Video 10 video and High-Efficiency AAC audio in Real Media
</I>&gt;<i> &gt; container. (application/vnd.rn-realmedia; rm)
</I>&gt;<i> 
</I>&gt;<i> We'd have to ask Real, but I don't think it is defined.
</I>&gt;<i> 
</I>&gt;<i> &gt;  * XviD video and MP3 audio in AVI container. (video/x-msvideo; .avi)
</I>&gt;<i> &gt;  * Motion-JPEG video and uncompressed PCM audio in AVI container.
</I>&gt;<i> &gt; (video/x-msvideo; .avi)
</I>&gt;<i> 
</I>&gt;<i> AVI I *think* is owned by Microsoft, and I *think* they deprecate it; it's up
</I>&gt;<i> to the owner to define.  Again, I am not aware of a definition, but the 4CC
</I>&gt;<i> style from MP4 might be appropriate.
</I>
Do we think these companies come up with appropriate definitions any time 
soon? It might be in our interests to do this for them.


&gt;<i> &gt;  * MPEG-1 video and MPEG-1 Audio Layer II audio in MPEG-1 program stream
</I>&gt;<i> &gt; (video/mpeg; .mpg)
</I>&gt;<i> 
</I>&gt;<i> MPEG has not defined the codecs parameter for these 'file' (stream) formats,
</I>&gt;<i> as far as I know.
</I>
So what should someone use?



It seems RFC4281 is actually not as useful as I'd hoped, if it doesn't 
define the majority of cases -- it seems to only handle recent MPEG 
standards.


On Tue, 10 Apr 2007, Silvia Pfeiffer wrote:
&gt;<i> 
</I>&gt;<i> Xiph is using multiple MIME types to deal with this situation.
</I>&gt;<i> 
</I>&gt;<i> * application/ogg (<A HREF="http://www.rfc-archive.org/getrfc.php?rfc=3534">http://www.rfc-archive.org/getrfc.php?rfc=3534</A>)
</I>&gt;<i> provides for the container format, basically with any codecs included:
</I>&gt;<i> this could e.g. be Theora/Vorbis inside Ogg or Dirac/Vorbis inside
</I>&gt;<i> Ogg, but is not restricted to this.
</I>&gt;<i> 
</I>&gt;<i> Xiph has defined a Skeleton track for Ogg files through which the
</I>&gt;<i> MIME type of the contained codecs is specified at a known location in
</I>&gt;<i> the header of the Ogg file. Thus, a Ogg Theora/Vorbis File with a
</I>&gt;<i> skeleton track will have a MIME type of application/ogg and contain
</I>&gt;<i> two tracks with video/x-theora and audio/x-vorbis as the MIME types.
</I>&gt;<i> Xiph encourages everyone to use the Skeleton track in all future
</I>&gt;<i> created Ogg files. Skeleton is built into a standard Ogg container
</I>&gt;<i> format (as defined in RFC 3533
</I>&gt;<i> <A HREF="http://www.rfc-archive.org/getrfc.php?rfc=3533">http://www.rfc-archive.org/getrfc.php?rfc=3533</A>) and thus Ogg files
</I>&gt;<i> with Skeleton are compatible with Ogg files without Skeleton.
</I>&gt;<i> 
</I>&gt;<i> * audio/x-vorbis is used to specify the vorbis codec. This is of
</I>&gt;<i> particular importance in rtp/rtsp streaming applications.
</I>&gt;<i> 
</I>&gt;<i> * video/x-theora is particularly used to specify the theora codec.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The community has also been seen to use these specifications:
</I>&gt;<i> # audio/x-vorbis+ogg  for Ogg Vorbis files
</I>&gt;<i> # video/x-theora+ogg for Ogg Theora/Vorbis files
</I>&gt;<i> though Xiph is not supportive of these.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Recent discussion at Xiph around <A HREF="http://www.ietf.org/rfc/rfc4281">http://www.ietf.org/rfc/rfc4281</A>
</I>&gt;<i> suggests the use of the following parameters:
</I>&gt;<i> 
</I>&gt;<i> # application/ogg; codecs=&quot;theora, vorbis&quot;   for Ogg Theora/Vorbis files
</I>&gt;<i> # application/ogg; codecs=&quot;theora, speex&quot;   for Ogg Theora/Speex files
</I>&gt;<i> # application/ogg; codecs=&quot;vorbis&quot;                 for Ogg Vorbis files
</I>&gt;<i> 
</I>&gt;<i> and also use the disposition parameter:
</I>&gt;<i> 
</I>&gt;<i> # application/ogg; disposition=moving-image; codecs=&quot;theora, vorbis&quot;
</I>&gt;<i> # application/ogg; disposition=sound; codecs=&quot;speex&quot;
</I>&gt;<i> 
</I>&gt;<i> Skeleton and the use of these MIME parameters should make things clear
</I>&gt;<i> for the application developers.
</I>
I've put the above codecs=&quot;&quot; suggestions in the spec.

What about Dirac video with Vorbis audio?


On Wed, 11 Apr 2007, Thomas Davies wrote:
&gt;<i> 
</I>&gt;<i> We haven't finalised profiles and levels yet, but there will probably be 
</I>&gt;<i> two profiles, a Main profile covering everything, and a Professional 
</I>&gt;<i> profile covering a restricted set for professional applications, such as 
</I>&gt;<i> very low delay coding or intra-only coding. I can't see this profile 
</I>&gt;<i> being deployed over the internet - it will be for very high bit rate 
</I>&gt;<i> hardware apps, but if it was, a Main-capable decoder could decode it.
</I>
Do you have any information on what the RFC4281 values for Dirac will be?

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="054997.html">[whatwg] Accessibility and the Apple Proposal for Timed Media Elements
</A></li>
	<LI>Next message: <A HREF="055003.html">[whatwg] Give guidance about RFC 4281 codecs parameter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54999">[ date ]</a>
              <a href="thread.html#54999">[ thread ]</a>
              <a href="subject.html#54999">[ subject ]</a>
              <a href="author.html#54999">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
