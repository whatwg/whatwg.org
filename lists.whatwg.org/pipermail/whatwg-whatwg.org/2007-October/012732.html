<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [wf2] repetition model addition step 14 issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bwf2%5D%20repetition%20model%20addition%20step%2014%20issue&In-Reply-To=%3C4711FEA6.4000308%40finalist.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012623.html">
   <LINK REL="Next"  HREF="012624.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [wf2] repetition model addition step 14 issue</H1>
<!--htdig_noindex-->
    <B>Rikkert Koppes</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bwf2%5D%20repetition%20model%20addition%20step%2014%20issue&In-Reply-To=%3C4711FEA6.4000308%40finalist.com%3E"
       TITLE="[whatwg] [wf2] repetition model addition step 14 issue">rikkert at finalist.com
       </A><BR>
    <I>Sun Oct 14 04:33:58 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="012623.html">[whatwg] [wf2] repetition model addition step 14 issue
</A></li>
        <LI>Next message: <A HREF="012624.html">[whatwg] [wf2] repetitionTemplate and repetitionBlocks attributes in addition/removal steps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12732">[ date ]</a>
              <a href="thread.html#12732">[ thread ]</a>
              <a href="subject.html#12732">[ subject ]</a>
              <a href="author.html#12732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Note that this is also an issue in Opera's current implementation

test case: <A HREF="http://www.rikkertkoppes.com/other/wf2-repetition-model/">http://www.rikkertkoppes.com/other/wf2-repetition-model/</A>
note the legend element ending up halfway the fieldset. It occurs to 
that this is unwanted bahaviour, it follows directly from the current wd 
though

Regards,
Rikkert Koppes

Rikkert Koppes wrote:
&gt;<i> Related is the movement of repetition blocks, section 3.6.3 step 3: 
</I>&gt;<i> <A HREF="http://www.whatwg.org/specs/web-forms/current-work/#movement">http://www.whatwg.org/specs/web-forms/current-work/#movement</A>
</I>&gt;<i> ---
</I>&gt;<i> # If distance is negative: while distance is not zero and target's 
</I>&gt;<i> |previousSibling| is defined and is not a repetition template 
</I>&gt;<i> &lt;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#repetition2">http://www.whatwg.org/specs/web-forms/current-work/#repetition2</A>&gt;, set 
</I>&gt;<i> target to this |previousSibling| and, if it is a repetition block 
</I>&gt;<i> &lt;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#repetition3">http://www.whatwg.org/specs/web-forms/current-work/#repetition3</A>&gt;, 
</I>&gt;<i> increase distance by one (make it less negative by one).
</I>&gt;<i> ---
</I>&gt;<i> blocks might move above previous siblings that are not repetition 
</I>&gt;<i> blocks (picture a legend element).
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Rikkert Koppes
</I>&gt;<i>
</I>&gt;<i> Rikkert Koppes schreef:
</I>&gt;&gt;<i> the addition sequence, step 14 states 
</I>&gt;&gt;<i> (<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#addition">http://www.whatwg.org/specs/web-forms/current-work/#addition</A>):
</I>&gt;&gt;<i> ---
</I>&gt;&gt;<i> If the first argument to the method was null, then the template once 
</I>&gt;&gt;<i> again crawls through its previous siblings, this time stopping at the 
</I>&gt;&gt;<i> first node (possibly the template itself) whose previous sibling is a 
</I>&gt;&gt;<i> repetition block (regardless of what that block's template is) or the 
</I>&gt;&gt;<i> first node that has no previous sibling, whichever comes first. The 
</I>&gt;&gt;<i> new element is the inserted into the parent of the template, 
</I>&gt;&gt;<i> immediately before that node. Mutation events are fired if appropriate.
</I>&gt;&gt;<i> ---
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Furthermore, as I interpret correctly, this is also the case at 
</I>&gt;&gt;<i> initialisation, i.e. the addRepetitionBlock() method is invoked with 
</I>&gt;&gt;<i> null as it's argument 
</I>&gt;&gt;<i> (<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#initial">http://www.whatwg.org/specs/web-forms/current-work/#initial</A>). (not 
</I>&gt;&gt;<i> quite sure whether this is indeed correct interpreted, see further)
</I>&gt;&gt;<i> ---
</I>&gt;&gt;<i> For each element that has a |repeat 
</I>&gt;&gt;<i> &lt;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#repeat">http://www.whatwg.org/specs/web-forms/current-work/#repeat</A>&gt;| 
</I>&gt;&gt;<i> attribute with the literal value |template 
</I>&gt;&gt;<i> &lt;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#template">http://www.whatwg.org/specs/web-forms/current-work/#template</A>&gt;|, the 
</I>&gt;&gt;<i> UA must invoke the template's replication behaviour as many times as 
</I>&gt;&gt;<i> the |repeat-start 
</I>&gt;&gt;<i> &lt;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#repeat-start">http://www.whatwg.org/specs/web-forms/current-work/#repeat-start</A>&gt;| 
</I>&gt;&gt;<i> attribute on the same element specifies (just once, if the attribute 
</I>&gt;&gt;<i> is missing or has an invalid value).[...] (Invoking the template's 
</I>&gt;&gt;<i> replication behaviour means calling its |addRepetitionBlock() 
</I>&gt;&gt;<i> &lt;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#addrepetitionblock">http://www.whatwg.org/specs/web-forms/current-work/#addrepetitionblock</A>&gt;| 
</I>&gt;&gt;<i> method).
</I>&gt;&gt;<i> ---
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If this is the case, at initialisation, when there are no repetition 
</I>&gt;&gt;<i> blocks, the first block is added as the very first child of the 
</I>&gt;&gt;<i> template's parent, which is not necessarily before the template. This 
</I>&gt;&gt;<i> doesn't seems to be desired very often. Picture a fieldset with a 
</I>&gt;&gt;<i> legend where the first replicated block ends up before the legend. 
</I>&gt;&gt;<i> Should the initial replication behaviour maybe call the 
</I>&gt;&gt;<i> addRepetitionBlock with the template's previous sibling as argument?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Rikkert Koppes
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012623.html">[whatwg] [wf2] repetition model addition step 14 issue
</A></li>
	<LI>Next message: <A HREF="012624.html">[whatwg] [wf2] repetitionTemplate and repetitionBlocks attributes in addition/removal steps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12732">[ date ]</a>
              <a href="thread.html#12732">[ thread ]</a>
              <a href="subject.html#12732">[ subject ]</a>
              <a href="author.html#12732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
