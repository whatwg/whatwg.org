<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] SQL API error handling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20error%20handling&In-Reply-To=%3C696e4b7c0710051612t3d5bf95dr1ab79b05fc7b86fd%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012738.html">
   <LINK REL="Next"  HREF="012634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] SQL API error handling</H1>
<!--htdig_noindex-->
    <B>Scott Hess</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20error%20handling&In-Reply-To=%3C696e4b7c0710051612t3d5bf95dr1ab79b05fc7b86fd%40mail.gmail.com%3E"
       TITLE="[whatwg] SQL API error handling">shess at google.com
       </A><BR>
    <I>Fri Oct  5 16:12:32 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="012738.html">[whatwg] SQL API and closeTransaction()
</A></li>
        <LI>Next message: <A HREF="012634.html">[whatwg] SQL API error handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12628">[ date ]</a>
              <a href="thread.html#12628">[ thread ]</a>
              <a href="subject.html#12628">[ subject ]</a>
              <a href="author.html#12628">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 9/24/07, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Thu, 20 Sep 2007, Anne van Kesteren wrote:
</I>&gt;<i> &gt; The SQL API doesn't seem to define how to deal with errors, such as:
</I>&lt;snip&gt;
&gt;<i> &gt;  * Database that is full
</I>&gt;<i>
</I>&gt;<i> This currently just reports an error with code 1, like everything else,
</I>&gt;<i> but in due course we should get a useful set of error codes and define
</I>&gt;<i> them. I'd love implementation feedback on what errors they are actually
</I>&gt;<i> going to naturally end up wanting to report.
</I>
In most database clients, errors can be separated into:

 - Things that the client can do something about.
 - Things that it cannot do anything about.

In the first case, since we're working within the browser, there's
generally really nothing to be done, so most stuff falls to the second
case.  At that point, it would be useful to have a human-readable
error string generated by the library which can be logged, for
debugging purposes.

Reviewing SQLite's error list, the things that MAY have utility to
report more finely might be:

 * LOCKED, where you failed because someone else has things locked.
Presumably if a single thread of control tries to open the same
database via two objects and start two transactions, one of them is
going to lose.  Having a transaction fail for this reason seems
materially different from having it fail because the SQL was invalid
or something of that nature, because the appropriate response might be
to retry.

 * CORRUPT, insofar as the Database API lets you delete databases (it
doesn't currently, but we've thought of adding that to Gears).

-scott

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012738.html">[whatwg] SQL API and closeTransaction()
</A></li>
	<LI>Next message: <A HREF="012634.html">[whatwg] SQL API error handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12628">[ date ]</a>
              <a href="thread.html#12628">[ thread ]</a>
              <a href="subject.html#12628">[ subject ]</a>
              <a href="author.html#12628">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
