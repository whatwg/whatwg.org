<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] SQL API error handling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20error%20handling&In-Reply-To=%3C98F01717-DA42-4A58-9A4E-41A9120BA42F%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="055020.html">
   <LINK REL="Next"  HREF="055022.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] SQL API error handling</H1>
<!--htdig_noindex-->
    <B>Geoffrey Garen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20SQL%20API%20error%20handling&In-Reply-To=%3C98F01717-DA42-4A58-9A4E-41A9120BA42F%40apple.com%3E"
       TITLE="[whatwg] SQL API error handling">ggaren at apple.com
       </A><BR>
    <I>Tue Oct 16 14:08:38 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="055020.html">[whatwg] SQL API error handling
</A></li>
        <LI>Next message: <A HREF="055022.html">[whatwg] SQL API error handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55021">[ date ]</a>
              <a href="thread.html#55021">[ thread ]</a>
              <a href="subject.html#55021">[ subject ]</a>
              <a href="author.html#55021">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;&gt;&gt;<i> perhaps it would be prudent to change the spec to at least suggest  
</I>&gt;&gt;&gt;<i> that if a database becomes &quot;known to be corrupt,&quot; operations on  
</I>&gt;&gt;&gt;<i> all open handles to that database should start throwing  
</I>&gt;&gt;&gt;<i> INVALID_STATE_ERR exceptions.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think this is already specified:
</I>&gt;&gt;<i> 3. If transaction has been marked as &quot;bad&quot;, then raise an  
</I>&gt;&gt;<i> INVALID_STATE_ERR exception.
</I>&gt;&gt;<i> ...
</I>&gt;&gt;<i> 7. If the statement execution fails for some reason, transaction  
</I>&gt;&gt;<i> must be rolled back and marked as &quot;bad&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think you can reasonably consider a statement on a corrupt  
</I>&gt;&gt;<i> database to have &quot;failed for some reason.&quot;
</I>&gt;<i>
</I>&gt;<i> After all active transactions are cleared, there is no context that  
</I>&gt;<i> remembers that the database is corrupt, and the next statement to be  
</I>&gt;<i> run would actually attempt to be executed.
</I>&gt;<i>
</I>&gt;<i> I suppose user agents can volunteer to remember this and  
</I>&gt;<i> automatically fail the next statement, but it's certainly not  
</I>&gt;<i> specified.
</I>
Are you proposing that, once a database has been corrupted, all  
transactions executed on it should fail, raising an INVALID_STATE_ERR  
exception, for all time?

Once all active transactions are cleared, there's no need to remember  
that the database was corrupt. The user agent should simply recover  
from the corruption in an implementation-defined way -- either by  
deleting the database, performing an error-recovering integrity check,  
asking the user to install cosmic ray shielding around the house, or  
something else.

Geoff

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="055020.html">[whatwg] SQL API error handling
</A></li>
	<LI>Next message: <A HREF="055022.html">[whatwg] SQL API error handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55021">[ date ]</a>
              <a href="thread.html#55021">[ thread ]</a>
              <a href="subject.html#55021">[ subject ]</a>
              <a href="author.html#55021">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
