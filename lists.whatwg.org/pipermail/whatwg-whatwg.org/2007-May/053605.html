<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas Zero/NaN/Infinity issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20Zero/NaN/Infinity%20issues&In-Reply-To=%3Cea09c0d10705161117o7ba2ec2bhc32cca604575b003%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="053604.html">
   <LINK REL="Next"  HREF="053606.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas Zero/NaN/Infinity issues</H1>
<!--htdig_noindex-->
    <B>Philip Taylor</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20Zero/NaN/Infinity%20issues&In-Reply-To=%3Cea09c0d10705161117o7ba2ec2bhc32cca604575b003%40mail.gmail.com%3E"
       TITLE="[whatwg] Canvas Zero/NaN/Infinity issues">excors+whatwg at gmail.com
       </A><BR>
    <I>Wed May 16 11:17:11 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="053604.html">[whatwg] Canvas Zero/NaN/Infinity issues
</A></li>
        <LI>Next message: <A HREF="053606.html">[whatwg] Canvas Zero/NaN/Infinity issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53605">[ date ]</a>
              <a href="thread.html#53605">[ thread ]</a>
              <a href="subject.html#53605">[ subject ]</a>
              <a href="author.html#53605">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 16/05/07, Darin Adler &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at apple.com</A>&gt; wrote:
&gt;<i> On May 15, 2007, at 6:36 PM, Ian Hickson wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; For the graphics context functions that take floating point values, I
</I>&gt;<i> &gt;&gt; think the specification should say what the expected behavior is for:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;     1) NANs
</I>&gt;<i> &gt;&gt;     2) non-floating point values
</I>&gt;<i> &gt;&gt;     3) missing parameters
</I>&gt;<i> &gt;&gt; b) excess arguments
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1, 3, and b now raise exceptions except if otherwise specified. I
</I>&gt;<i> &gt; haven't
</I>&gt;<i> &gt; yet defined 2. I'm not sure what it should say.
</I>&gt;<i>
</I>&gt;<i> I think that (2) should be the same as (1). I think it makes logical
</I>&gt;<i> sense and matches current implementations. I'm not sure how it should
</I>&gt;<i> be presented or worded.
</I>
How is &quot;non-floating point value&quot; defined? Existing implementations
seem to try converting the value into a JS number, which will always
give a floating-point value, and that's just NaN if the conversion is
not possible (e.g. from an object, or undefined, or a string that
can't be parsed as a number). In that case, there aren't really
non-floating point values at all - there are just values that get
numberised into NaN before being passed to the canvas API and are then
handled by case 1.

<A HREF="http://canvex.lazyilluminati.com/misc/nonfloat.html">http://canvex.lazyilluminati.com/misc/nonfloat.html</A> sort of tests that
(though it just checks for exceptions, not for whether strings are
parsed into numbers properly) - it has no errors in Firefox
(Minefield), and in Opera 9.20 it only has errors for unimplemented
functions and for drawImage (bug?).

&gt;<i> I think that for (b) we should specify ignoring the additional
</I>&gt;<i> parameters rather than raising an exception. That's more consistent
</I>&gt;<i> with the behavior of the JavaScript language in general, and I'm
</I>&gt;<i> pretty sure all existing implementations do this.
</I>
<A HREF="http://canvex.lazyilluminati.com/misc/extra.html">http://canvex.lazyilluminati.com/misc/extra.html</A> - Opera 9.20 ignores
all additional parameters, and Firefox ignores them except for
drawImage and for toDataURL (which is the one place where the spec
explicitly says extra parameters must be allowed - but FF uses them
for privileged content, and throws a security exception if normal
content uses them).

-- 
Philip Taylor
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">excors at gmail.com</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="053604.html">[whatwg] Canvas Zero/NaN/Infinity issues
</A></li>
	<LI>Next message: <A HREF="053606.html">[whatwg] Canvas Zero/NaN/Infinity issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53605">[ date ]</a>
              <a href="thread.html#53605">[ thread ]</a>
              <a href="subject.html#53605">[ subject ]</a>
              <a href="author.html#53605">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
