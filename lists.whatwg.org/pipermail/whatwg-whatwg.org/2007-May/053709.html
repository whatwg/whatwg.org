<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Style sheet loading and parsing (over HTTP)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Style%20sheet%20loading%20and%20parsing%20%28over%20HTTP%29&In-Reply-To=%3Cbde87dd20705230536y1d35f973yfc4cdb0d2e731481%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="053708.html">
   <LINK REL="Next"  HREF="053710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Style sheet loading and parsing (over HTTP)</H1>
<!--htdig_noindex-->
    <B>Jon Barnett</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Style%20sheet%20loading%20and%20parsing%20%28over%20HTTP%29&In-Reply-To=%3Cbde87dd20705230536y1d35f973yfc4cdb0d2e731481%40mail.gmail.com%3E"
       TITLE="[whatwg] Style sheet loading and parsing (over HTTP)">jonbarnett at gmail.com
       </A><BR>
    <I>Wed May 23 05:36:07 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="053708.html">[whatwg] Style sheet loading and parsing (over HTTP)
</A></li>
        <LI>Next message: <A HREF="053710.html">[whatwg] Style sheet loading and parsing (over HTTP)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53709">[ date ]</a>
              <a href="thread.html#53709">[ thread ]</a>
              <a href="subject.html#53709">[ subject ]</a>
              <a href="author.html#53709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 5/23/07, Julian Reschke &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">julian.reschke at gmx.de</A>&gt; wrote:

&gt;<i> Ian Hickson wrote:
</I>&gt;<i> &gt; On Wed, 23 May 2007, Julian Reschke wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;    <A HREF="http://lists.w3.org/Archives/Public/www-tag/2006Aug/0027.html">http://lists.w3.org/Archives/Public/www-tag/2006Aug/0027.html</A>
</I>&gt;<i> &gt;&gt;&gt;&gt; Actually, I wasn't planning to. I think that that finding is a good
</I>&gt;<i> &gt;&gt;&gt;&gt; one, and that we should work on making less content break it.
</I>&gt;<i> &gt;&gt;&gt; I recommend reading the first of the two links cited above. It
</I>&gt;<i> &gt;&gt;&gt; describes what I did to &quot;work&quot; on making less content break it, and
</I>&gt;<i> &gt;&gt;&gt; why I think that it's a lost cause.
</I>&gt;<i> &gt;&gt; Actually, I read those messages when they were written.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Ok, then you know that I have attempted to do the &quot;work&quot; you propose we
</I>&gt;<i> &gt; do. What more work can we do?
</I>&gt;<i>
</I>&gt;<i> For instance, continuing to allow UAs to trust the mime type, and
</I>&gt;<i> requiring content authors to send the proper mime types.
</I>&gt;<i>
</I>&gt;<i> Or, allowing (opt-in) browsers to flag broken media types in the UI, as
</I>&gt;<i> suggested in
</I>&gt;<i> &lt;<A HREF="http://lists.w3.org/Archives/Public/www-tag/2006Aug/0035.html">http://lists.w3.org/Archives/Public/www-tag/2006Aug/0035.html</A> &gt; (yes,
</I>&gt;<i> same thread).
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; * I do understand that there's a gap between what the specs say
</I>&gt;<i> &gt;&gt; Content-Type should do, and what works in reality.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Indeed. And the specs, to be useful, have to match reality.
</I>&gt;<i>
</I>&gt;<i> That may be true if all we're discussing a spec that defines what a UA
</I>&gt;<i> has to implement to be compatible with today's broken content. I
</I>&gt;<i> absolutely agree that it's good to write that spec, but I disagree that
</I>&gt;<i> this should be same spec as HTML5.
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; * As we just saw with the XSLT example, making generalizations like in
</I>&gt;<i> &gt;&gt; Anne's proposal is dangerous: for instance, Mozilla does check the
</I>&gt;<i> &gt;&gt; content type of XSLT style sheets, and it seems people can live with
</I>&gt;<i> &gt;&gt; that. In this particular case, XSLT content was served with type
</I>&gt;<i> &gt;&gt; text/html, and when the problem was discovered, the author immediately
</I>&gt;<i> &gt;&gt; fixed the server config.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The HTML5 spec requires that Content-Type headers be obeyed everywhere
</I>&gt;<i> &gt; where I could possibly get away with requiring it. It only ignores it
</I>&gt;<i> &gt; where reality requires it.
</I>&gt;<i>
</I>&gt;<i> Let's look at an example.
</I>&gt;<i> &lt; <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#the-img">http://www.whatwg.org/specs/web-apps/current-work/#the-img</A>&gt; currently
</I>&gt;<i> states:
</I>&gt;<i>
</I>&gt;<i> &quot;The remote server's response metadata (e.g. an HTTP 404 status code, or
</I>&gt;<i> associated Content-Type headers) must be ignored when determining
</I>&gt;<i> whether the resource obtained is a valid image or not.
</I>&gt;<i>
</I>&gt;<i> This allows servers to return images with error responses.
</I>&gt;<i>
</I>&gt;<i> User agents must not support non-image resources with the img element.&quot;
</I>&gt;<i>
</I>&gt;<i> Issues I have with this:
</I>&gt;<i>
</I>&gt;<i> - it doesn't provide tell content authors that the content-type header
</I>&gt;<i> *should* reflect the mime type; instead it suggests it doesn't matter,
</I>&gt;<i>
</I>&gt;<i> - it disallows UAs to trust the mime type, as recommended by other specs,
</I>&gt;<i>
</I>&gt;<i> - and finally it even requires UAs to ignore the HTTP status (which IMHO
</I>&gt;<i> is even worse than the Content-Type issue).
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; * I think it would be bad if the W3C TAG finding on media types and a
</I>&gt;<i> &gt;&gt; future W3C HTML spec would contradict each other.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It would be worse if reality and the future HTML spec contradicted each
</I>&gt;<i> &gt; other. (It is already quite bad that the TAG finding contradicts
</I>&gt;<i> reality.)
</I>&gt;<i>
</I>&gt;<i> Well, I disagree. The TAG finding says how things should work.
</I>&gt;<i>
</I>&gt;<i> If you think that this is wrong, you'll have to try to change *that* (I
</I>&gt;<i> know you tried...), but just ignoring it in a W3C spec is unlikely to be
</I>&gt;<i> accepted.
</I>

Can someone point out specifically how HTML5's section on error handling
contradicts this TAG finding, especially sections 4 and 5?

It says:

&gt;<i> Web agents SHOULD have a configuration option that enables the display or
</I>&gt;<i> logging of detected errors.
</I>&gt;<i>
</I>
Obviously users don't want to see an alert every time an HTML page is served
as text/plain, but if the UA logs that error or displays it plainly
somewhere like Firefox's &quot;Page Info&quot; dialog, that should be enough.

It also says:

&gt;<i> An agent MUST NOT ignore or override authoritative metadata without the
</I>&gt;<i> consent of the party employing the agent.
</I>

A UA could simply keep a preference in the UA's &quot;advanced&quot; options where
this is enabled by default.

It should be possible for a UA to satisfy both of those conditions and still
do the content-type sniffing in HTML5.

Also, HTML5 doesn't encourage authors to use incorrect content-type, it just
suggests how browsers should handle errors.

&gt;<i>
</I>(sorry I didn't hit &quot;reply to all&quot; the first time...)

-- 
Jon Barnett
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20070523/125469e5/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20070523/125469e5/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="053708.html">[whatwg] Style sheet loading and parsing (over HTTP)
</A></li>
	<LI>Next message: <A HREF="053710.html">[whatwg] Style sheet loading and parsing (over HTTP)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53709">[ date ]</a>
              <a href="thread.html#53709">[ thread ]</a>
              <a href="subject.html#53709">[ subject ]</a>
              <a href="author.html#53709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
