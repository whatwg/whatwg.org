<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;19,&nbsp;2009&nbsp;at&nbsp;7:37&nbsp;AM,&nbsp;Patrick&nbsp;Mueller&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:pmuellr@muellerware.org&quot;&gt;pmuellr@muellerware.org&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;var&nbsp;context&nbsp;=&nbsp;new&nbsp;GlobalScript();&nbsp; //&nbsp;perhaps&nbsp;&#39;webkitGlobalScript&#39;&nbsp;as&lt;br&gt;<br>
experimental&nbsp;feature?&lt;br&gt;<br>
context.onload&nbsp;=&nbsp;function&nbsp;()&nbsp;{...}&lt;br&gt;<br>
context.onerror&nbsp;=&nbsp;function&nbsp;()&nbsp;{...}&lt;br&gt;<br>
context.load(&#39;foo.js&#39;);&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Presumably&nbsp;this&nbsp;script&nbsp;is&nbsp;being&nbsp;loaded&nbsp;asynchronously,&nbsp;hence&nbsp;the&nbsp;callbacks.&nbsp; But&nbsp;since&nbsp;the&nbsp;GlobalScript()&nbsp;constructor&nbsp;returns&nbsp;the&nbsp;&quot;global&quot;&nbsp;object,&nbsp;probably&nbsp;doesn&#39;t&nbsp;make&nbsp;sense&nbsp;to&nbsp;attach&nbsp;the&nbsp;handlers&nbsp;directly&nbsp;there,&nbsp;but&nbsp;actually&nbsp;on&nbsp;the&nbsp;load&nbsp;request&nbsp;somehow.&nbsp; &lt;/blockquote&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Good&nbsp;point.&nbsp;Alternative&nbsp;variant&nbsp;to&nbsp;construction/connection&nbsp;to&nbsp;this&nbsp;object&nbsp;could&nbsp;be&nbsp;something&nbsp;like&nbsp;this:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;window.createGlobalScript(&#39;name&#39;,&nbsp;&#39;foo.js&#39;,&nbsp;function(context)&nbsp;{..},&nbsp;function(status)&nbsp;{..});&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;where&nbsp;the&nbsp;name&nbsp;and&nbsp;url&nbsp;pair&nbsp;play&nbsp;the&nbsp;same&nbsp;role&nbsp;as&nbsp;on&nbsp;SharedWorker,&nbsp;and&nbsp;2&nbsp;callbacks:&nbsp;one&nbsp;delivers&nbsp;load&nbsp;status/errors,&nbsp;another&nbsp;comes&nbsp;with&nbsp;resolved&nbsp;context&nbsp;when&nbsp;it&#39;s&nbsp;ready.&nbsp;One&nbsp;benefit&nbsp;of&nbsp;this&nbsp;is&nbsp;that&nbsp;&#39;context&#39;&nbsp;does&nbsp;not&nbsp;have&nbsp;to&nbsp;expose&nbsp;the&nbsp;&#39;external&#39;&nbsp;API&nbsp;on&nbsp;it&nbsp;and&nbsp;it&nbsp;is&nbsp;always&nbsp;functional&nbsp;once&nbsp;it&#39;s&nbsp;returned.&nbsp;The&nbsp;syntax&nbsp;in&nbsp;the&nbsp;proposal&nbsp;was&nbsp;motivated&nbsp;by&nbsp;commonality&nbsp;with&nbsp;other&nbsp;APIs,&nbsp;like&nbsp;XHR&nbsp;or&nbsp;window.open&nbsp;-&nbsp;however&nbsp;I&nbsp;agree&nbsp;this&nbsp;doesn&#39;t&nbsp;fit&nbsp;100%&nbsp;either&nbsp;of&nbsp;them...&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;I&nbsp;guess&nbsp;I&#39;m&nbsp;wondering&nbsp;if&nbsp;there&nbsp;will&nbsp;be&nbsp;some&nbsp;desire&nbsp;to&nbsp;have&nbsp;pages&nbsp;opt-in&nbsp;to&nbsp;this&nbsp;support,&nbsp;signaling&nbsp;this&nbsp;through&nbsp;an&nbsp;additional&nbsp;API,&nbsp;or&nbsp;like&nbsp;the&nbsp;app-cache&#39;s&nbsp;manifest&nbsp;attribute&nbsp;on&nbsp;the&nbsp;&lt;html&gt;&nbsp;element,&nbsp;something&nbsp;in&nbsp;the&nbsp;DOM;&nbsp;doesn&#39;t&nbsp;seem&nbsp;like&nbsp;we&nbsp;should&nbsp;drag&nbsp;the&nbsp;DOM&nbsp;in&nbsp;here,&nbsp;just&nbsp;mentioned&nbsp;it&nbsp;because&nbsp;I&nbsp;was&nbsp;reminded&nbsp;of&nbsp;the&nbsp;way&nbsp;the&nbsp;opt-in&nbsp;works&nbsp;there.&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;is&nbsp;a&nbsp;good&nbsp;idea&nbsp;indeed&nbsp;to&nbsp;have&nbsp;some&nbsp;sort&nbsp;of&nbsp;static&nbsp;opt-in&nbsp;information,&nbsp;maybe&nbsp;via&nbsp;a&nbsp;feature&nbsp;of&nbsp;app-cache&nbsp;-&nbsp;which&nbsp;could&nbsp;hint&nbsp;the&nbsp;UA&nbsp;to&nbsp;load&nbsp;participating&nbsp;pages&nbsp;(of&nbsp;the&nbsp;same&nbsp;application)&nbsp;into&nbsp;the&nbsp;same&nbsp;process&nbsp;so&nbsp;they&nbsp;could&nbsp;share&nbsp;Global&nbsp;Script.&nbsp;It&nbsp;is&nbsp;still&nbsp;impossible&nbsp;(and&nbsp;probably&nbsp;not&nbsp;important)&nbsp;to&nbsp;guarantee&nbsp;a&nbsp;singularity&nbsp;of&nbsp;the&nbsp;Global&nbsp;Script&nbsp;(as&nbsp;in&nbsp;case&nbsp;of&nbsp;cross-domain&nbsp;iframes)&nbsp;but&nbsp;it&#39;d&nbsp;be&nbsp;a&nbsp;good&nbsp;optimization&nbsp;for&nbsp;a&nbsp;multi-process&nbsp;UA.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Dmitry&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;/div&gt;<br>

</tt>
