<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;19,&nbsp;2009&nbsp;at&nbsp;1:34&nbsp;PM,&nbsp;Patrick&nbsp;Mueller&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:pmuellr@muellerware.org&quot;&gt;pmuellr@muellerware.org&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;Dmitry&nbsp;Titov&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
The&nbsp;return&nbsp;value&nbsp;from&nbsp;a&nbsp;constructor&nbsp;is&nbsp;the&nbsp;Global&nbsp;Script&amp;#39;s&nbsp;&amp;quot;global&nbsp;scope&lt;br&gt;<br>
object&amp;quot;.&nbsp;It&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;directly&nbsp;access&nbsp;functions&nbsp;and&nbsp;variables&nbsp;defined&lt;br&gt;<br>
in&nbsp;global&nbsp;scope&nbsp;of&nbsp;the&nbsp;Global&nbsp;Script.&nbsp;While&nbsp;this&nbsp;global&nbsp;scope&nbsp;does&nbsp;not&nbsp;have&lt;br&gt;<br>
&amp;#39;window&amp;#39;&nbsp;or&nbsp;&amp;#39;document&amp;#39;&nbsp;and&nbsp;does&nbsp;not&nbsp;have&nbsp;visual&nbsp;page&nbsp;associated&nbsp;with&nbsp;it,&nbsp;the&lt;br&gt;<br>
local&nbsp;storage,&nbsp;database,&nbsp;timers&nbsp;and&nbsp;XHR&nbsp;are&nbsp;exposed&nbsp;to&nbsp;it,&nbsp;and&nbsp;it&nbsp;can&nbsp;build&lt;br&gt;<br>
up&nbsp;DOM&nbsp;for&nbsp;the&nbsp;connected&nbsp;pages&nbsp;using&nbsp;their&nbsp;&amp;#39;document&amp;#39;&nbsp;object.&nbsp;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
This&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;fairly&nbsp;similar&nbsp;to&nbsp;the&nbsp;serverJS&nbsp;concept&nbsp;of&nbsp;&amp;quot;modules&amp;quot;.&nbsp; I&nbsp;could&nbsp;see&nbsp;how&nbsp;you&nbsp;might&nbsp;want&nbsp;to&nbsp;use&nbsp;it&nbsp;this&nbsp;way,&nbsp;to&nbsp;get&nbsp;script&nbsp;code&nbsp;loaded&nbsp;into&nbsp;it&amp;#39;s&nbsp;own&nbsp;sandbox,&nbsp;and&nbsp;allow&nbsp;the&nbsp;client&nbsp;of&nbsp;the&nbsp;&amp;quot;module&amp;quot;&nbsp;to&nbsp;name&nbsp;the&nbsp;object&nbsp;as&nbsp;they&nbsp;see&nbsp;fit.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
This&nbsp;would&nbsp;require&nbsp;the&nbsp;use&nbsp;of&nbsp;a&nbsp;name&nbsp;when&nbsp;you&nbsp;create&nbsp;it,&nbsp;so&nbsp;as&nbsp;to&nbsp;allow&nbsp;multiple&nbsp;to&nbsp;be&nbsp;created,&nbsp;and&nbsp;to&nbsp;allow&nbsp;other&nbsp;sharers&nbsp;to&nbsp;find&nbsp;those&nbsp;objects.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;also&nbsp;allows&nbsp;folks&nbsp;to&nbsp;programmatically&nbsp;load&nbsp;JS&nbsp;code&nbsp;without&nbsp;having&nbsp;to&nbsp;resort&nbsp;to&nbsp;XHR/eval&nbsp;or&nbsp;adding&nbsp;&amp;lt;script&amp;gt;&nbsp;nodes&nbsp;to&nbsp;the&nbsp;DOM.&nbsp; Big&nbsp;plus,&nbsp;because&nbsp;those&nbsp;scripts&nbsp;will&nbsp;then&nbsp;be&nbsp;associated&nbsp;with&nbsp;an&nbsp;honest-to-gods&nbsp;name,&nbsp;which&nbsp;will&nbsp;show&nbsp;up&nbsp;in&nbsp;debuggers.&nbsp; And&nbsp;is&nbsp;obviously&nbsp;cleaner&nbsp;than&nbsp;the&nbsp;other&nbsp;techniques.&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
The&nbsp;list&nbsp;of&lt;br&gt;<br>
interfaces&nbsp;exposed&nbsp;in&nbsp;the&nbsp;global&nbsp;scope&nbsp;of&nbsp;the&nbsp;Global&nbsp;Script&nbsp;is&nbsp;similar&nbsp;to&lt;br&gt;<br>
that&nbsp;of&nbsp;Shared&nbsp;Worker,&nbsp;except&nbsp;message-passing&nbsp;interface.&nbsp;It&nbsp;could&nbsp;also&lt;br&gt;<br>
include&nbsp;events&nbsp;fired&nbsp;when&nbsp;a&nbsp;page&nbsp;connects/disconnects&nbsp;to&nbsp;it&nbsp;and&nbsp;before&nbsp;it&nbsp;is&lt;br&gt;<br>
terminated.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Can&nbsp;I&nbsp;create&nbsp;additional&nbsp;GlobalScript&amp;#39;s&nbsp;from&nbsp;within&nbsp;an&nbsp;existing&nbsp;GlobalScript?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That&amp;#39;s&nbsp;a&nbsp;good&nbsp;question...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(just&nbsp;having&nbsp;fun...&nbsp;oh&nbsp;the&nbsp;tangled&nbsp;web&nbsp;we&nbsp;weave;) &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;not&nbsp;sure&nbsp;any&nbsp;has&nbsp;thought&nbsp;thru&nbsp;the&nbsp;implications&nbsp;of&nbsp;that,&nbsp;but&nbsp;it&amp;#39;s&nbsp;an&nbsp;interesting&nbsp;idea.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;*&nbsp;An&nbsp;obvious&nbsp;complication&nbsp;is&nbsp;life-cycle&nbsp;management.&nbsp;If&nbsp;GlobalScriptA&nbsp;attaches&nbsp;to&nbsp;GlobalScriptB,&nbsp;when&nbsp;no&nbsp;&amp;#39;pages&amp;#39;&nbsp;are&nbsp;attached&nbsp;to&nbsp;either,&nbsp;they&nbsp;should&nbsp;be&nbsp;eligible&nbsp;for&nbsp;destruction.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;*&nbsp;Also&nbsp;about&nbsp;tangled&nbsp;webs...&nbsp;what&nbsp;if&nbsp;A&nbsp;attaches&nbsp;to&nbsp;B,&nbsp;and&nbsp;B&nbsp;attaches&nbsp;to&nbsp;A&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;br&gt;<br>
The&nbsp;load()&nbsp;method&nbsp;is&nbsp;very&nbsp;similar&nbsp;to&nbsp;the&nbsp;worker&nbsp;loadScript()&nbsp;(or&nbsp;whatever)&nbsp;function.&nbsp; Perhaps&nbsp;we&nbsp;should&nbsp;combine&nbsp;them&nbsp;into&nbsp;one&nbsp;API,&nbsp;that&nbsp;allows&nbsp;sync&nbsp;or&nbsp;async&nbsp;in&nbsp;a&nbsp;worker,&nbsp;but&nbsp;only&nbsp;allows&nbsp;async&nbsp;in&nbsp;a&nbsp;GlobalScript.&nbsp; Or&nbsp;at&nbsp;least&nbsp;advises&nbsp;against&nbsp;use&nbsp;of&nbsp;sync.&lt;div&gt;<br>
&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Patrick&nbsp;Mueller&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://muellerware.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://muellerware.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
