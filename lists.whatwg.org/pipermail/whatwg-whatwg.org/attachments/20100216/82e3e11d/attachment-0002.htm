<tt>
On&nbsp;Tue,&nbsp;Feb&nbsp;16,&nbsp;2010&nbsp;at&nbsp;6:22&nbsp;PM,&nbsp;Chris&nbsp;Marrin&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:cmarrin@apple.com&quot;&gt;cmarrin@apple.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;br&gt;<br>
On&nbsp;Feb&nbsp;16,&nbsp;2010,&nbsp;at&nbsp;9:00&nbsp;AM,&nbsp;Eric&nbsp;Carlson&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Chris&nbsp;-&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;Welcome&nbsp;to&nbsp;the&nbsp;HTML5&nbsp;WG&nbsp;email&nbsp;torrent&nbsp;;-)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;Here&nbsp;is&nbsp;a&nbsp;message&nbsp;that&nbsp;you&nbsp;might&nbsp;actually&nbsp;care&nbsp;to&nbsp;read.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;eric&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Begin&nbsp;forwarded&nbsp;message:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;From:&nbsp;Joel&nbsp;Webber&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:jgw@google.com&quot;&gt;jgw@google.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Date:&nbsp;February&nbsp;16,&nbsp;2010&nbsp;8:39:31&nbsp;AM&nbsp;PST&lt;br&gt;<br>
&gt;&gt;&nbsp;To:&nbsp;Stefan&nbsp;Haustein&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:haustein@google.com&quot;&gt;haustein@google.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Cc:&nbsp;Maciej&nbsp;Stachowiak&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:mjs@apple.com&quot;&gt;mjs@apple.com&lt;/a&gt;&gt;,&nbsp;&lt;a&nbsp;href=&quot;mailto:whatwg@whatwg.org&quot;&gt;whatwg@whatwg.org&lt;/a&gt;,&nbsp;Jonas&nbsp;Sicking&nbsp;&lt;jonas@sicking.cc&gt;,&nbsp;Stef&nbsp;Epardaud&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:stef@epardaud.fr&quot;&gt;stef@epardaud.fr&lt;/a&gt;&gt;&lt;br&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;&gt;&nbsp;Subject:&nbsp;Re:&nbsp;[whatwg]&nbsp;canvas,&nbsp;img,&nbsp;file&nbsp;api&nbsp;and&nbsp;blobs&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&gt;&gt;&nbsp;On&nbsp;Tue,&nbsp;Feb&nbsp;16,&nbsp;2010&nbsp;at&nbsp;7:38&nbsp;AM,&nbsp;Stefan&nbsp;Haustein&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:haustein@google.com&quot;&gt;haustein@google.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&nbsp;On&nbsp;Tue,&nbsp;Feb&nbsp;16,&nbsp;2010&nbsp;at&nbsp;10:08&nbsp;AM,&nbsp;Maciej&nbsp;Stachowiak&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:mjs@apple.com&quot;&gt;mjs@apple.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;On&nbsp;Feb&nbsp;16,&nbsp;2010,&nbsp;at&nbsp;12:13&nbsp;AM,&nbsp;Jonas&nbsp;Sicking&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Absolutely!&nbsp;I&nbsp;definitely&nbsp;agree&nbsp;that&nbsp;we&nbsp;need&nbsp;a&nbsp;type&nbsp;like&nbsp;this.&nbsp;The&lt;br&gt;<br>
&gt;&gt;&nbsp;sooner&nbsp;the&nbsp;better.&nbsp;On&nbsp;that&nbsp;note,&nbsp;do&nbsp;you&nbsp;know&nbsp;what&nbsp;the&nbsp;latest&nbsp;status&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;within&nbsp;ECMA&nbsp;on&nbsp;this?&nbsp;I&nbsp;know&nbsp;you&nbsp;made&nbsp;a&nbsp;proposal&nbsp;on&nbsp;the&nbsp;webapps&nbsp;list&lt;br&gt;<br>
&gt;&gt;&nbsp;(or&nbsp;was&nbsp;it&nbsp;here?),&nbsp;did&nbsp;that&nbsp;go&nbsp;anywhere?&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;I&nbsp;made&nbsp;my&nbsp;proposal&nbsp;to&nbsp;ECMA&nbsp;TC-39&nbsp;(the&nbsp;relevant&nbsp;committee).&nbsp;I&nbsp;will&nbsp;try&nbsp;to&nbsp;polish&nbsp;it&nbsp;and&nbsp;request&nbsp;it&nbsp;as&nbsp;an&nbsp;agenda&nbsp;item&nbsp;for&nbsp;the&nbsp;next&nbsp;face-to-face&nbsp;(in&nbsp;March).&nbsp;Independently,&nbsp;WebGL&#39;s&nbsp;typed&nbsp;arrays&nbsp;have&nbsp;been&nbsp;proposed.&lt;br&gt;<br>
<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Hi&nbsp;Maciej,&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;do&nbsp;you&nbsp;have&nbsp;a&nbsp;link&nbsp;to&nbsp;your&nbsp;proposal?&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;And&nbsp;in&nbsp;particular,&nbsp;does&nbsp;it&nbsp;bear&nbsp;any&nbsp;resemblance&nbsp;to&nbsp;the&nbsp;WebGLArray&nbsp;interfaces,&nbsp;as&nbsp;proposed&nbsp;in&nbsp;(&lt;a&nbsp;href=&quot;http://people.mozilla.com/~vladimir/jsvec/TypedArray-spec.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://people.mozilla.com/~vladimir/jsvec/TypedArray-spec.html&lt;/a&gt;)?&nbsp;I&#39;m&nbsp;particularly&nbsp;concerned&nbsp;with&nbsp;the&nbsp;interfaces&nbsp;among&nbsp;all&nbsp;these&nbsp;different&nbsp;subsystems&nbsp;(WebGL,&nbsp;Canvas,&nbsp;XHR,&nbsp;File,&nbsp;etc.,&nbsp;as&nbsp;being&nbsp;discussed&nbsp;on&nbsp;this&nbsp;thread)&nbsp;that&nbsp;want&nbsp;to&nbsp;operate&nbsp;on&nbsp;binary&nbsp;data.&lt;br&gt;<br>
<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;We&#39;ve&nbsp;found&nbsp;that&nbsp;getting&nbsp;data&nbsp;from&nbsp;XHR&nbsp;to&nbsp;WebGL&nbsp;via&nbsp;WebGLArrays&nbsp;to&nbsp;be&nbsp;a&nbsp;huge&nbsp;(read:&nbsp;probably&nbsp;orders-of-magnitude)&nbsp;bottleneck;&nbsp;but&nbsp;being&nbsp;able&nbsp;to&nbsp;slice&nbsp;mesh&nbsp;and&nbsp;texture&nbsp;data&nbsp;out&nbsp;of&nbsp;arrays&nbsp;directly&nbsp;from&nbsp;XHR&nbsp;responses&nbsp;would&nbsp;completely&nbsp;fix&nbsp;this.&lt;br&gt;<br>
<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;We&#39;ve&nbsp;been&nbsp;getting&nbsp;pretty&nbsp;good&nbsp;traction&nbsp;on&nbsp;Vlad&#39;s&nbsp;ArrayBuffers&nbsp;proposal,&nbsp;which&nbsp;was&nbsp;taken&nbsp;from&nbsp;the&nbsp;WebGL&nbsp;spec.&nbsp;Our&nbsp;current&nbsp;plan&nbsp;is&nbsp;to&nbsp;change&nbsp;the&nbsp;names&nbsp;in&nbsp;the&nbsp;browsers&nbsp;(WebKit,&nbsp;Chrome&nbsp;and&nbsp;Mozilla)&nbsp;to&nbsp;the&nbsp;&quot;non-WebGL&nbsp;specific&quot;&nbsp;names&nbsp;Vlad&nbsp;proposes&nbsp;in&nbsp;his&nbsp;spec.&nbsp;We&#39;d&nbsp;really&nbsp;like&nbsp;this&nbsp;to&nbsp;be&nbsp;the&nbsp;&quot;one&nbsp;true&nbsp;binary&nbsp;data&nbsp;access&quot;&nbsp;mechanism&nbsp;for&nbsp;HTML.&nbsp;We&#39;re&nbsp;talking&nbsp;to&nbsp;the&nbsp;File&nbsp;API&nbsp;guys&nbsp;about&nbsp;this&nbsp;and&nbsp;I&nbsp;think&nbsp;this&nbsp;API&nbsp;can&nbsp;be&nbsp;adapted&nbsp;in&nbsp;all&nbsp;the&nbsp;other&nbsp;places&nbsp;as&nbsp;well.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
As&nbsp;far&nbsp;as&nbsp;performance&nbsp;goes,&nbsp;can&nbsp;you&nbsp;point&nbsp;me&nbsp;at&nbsp;some&nbsp;quantitative&nbsp;data?&nbsp;When&nbsp;you&nbsp;say&nbsp;it&#39;s&nbsp;an&nbsp;&quot;orders-of-magnitude&quot;&nbsp;bottleneck,&nbsp;what&nbsp;are&nbsp;you&nbsp;comparing&nbsp;it&nbsp;to?&nbsp;The&nbsp;API&nbsp;is&nbsp;very&nbsp;new&nbsp;and&nbsp;we&nbsp;certainly&nbsp;want&nbsp;to&nbsp;improve&nbsp;it&nbsp;for&nbsp;the&nbsp;various&nbsp;purposes&nbsp;it&nbsp;can&nbsp;be&nbsp;put&nbsp;to.&nbsp;We&#39;ve&nbsp;even&nbsp;talked&nbsp;about&nbsp;optimizations&nbsp;inside&nbsp;the&nbsp;JS&nbsp;implementations&nbsp;to&nbsp;improve&nbsp;access&nbsp;performance.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;we&nbsp;can&nbsp;get&nbsp;a&nbsp;webgl&nbsp;buffer&nbsp;from&nbsp;an&nbsp;XHR&nbsp;response&nbsp;(which&nbsp;would&nbsp;be&nbsp;a&nbsp;*huge*&nbsp;improvement),&nbsp;we&#39;d&nbsp;still&nbsp;need&nbsp;to&nbsp;parse&nbsp;the&nbsp;binary&nbsp;data&nbsp;when&nbsp;decoding&nbsp;JPEG&nbsp;headers,&nbsp;protocol&nbsp;buffers&nbsp;etc. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Constructing&nbsp;ints&nbsp;/&nbsp;longs&nbsp;from&nbsp;bytes&nbsp;in&nbsp;Javascript&nbsp;will&nbsp;probably&nbsp;be&nbsp;slow,&nbsp;so&nbsp;in&nbsp;addition&nbsp;to&nbsp;the&nbsp;typed&nbsp;arrays,&nbsp;we&#39;d&nbsp;love&nbsp;to&nbsp;have&nbsp;some&nbsp;kind&nbsp;of&nbsp;access&nbsp;that&nbsp;would&nbsp;be&nbsp;similar&nbsp;to&nbsp;Java&#39;s&nbsp;DataInput&nbsp;(+DataOutput,&nbsp;see&nbsp;&lt;a&nbsp;href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/io/DataInput.html&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/io/DataInput.html&lt;/a&gt;&nbsp;),&nbsp;but&nbsp;with&nbsp;endianess&nbsp;support....&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Stefan&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;br&gt;<br>
-----&lt;br&gt;<br>
~Chris&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:cmarrin@apple.com&quot;&gt;cmarrin@apple.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Stefan&nbsp;Haustein&lt;br&gt;Google&nbsp;UK&nbsp;Limited&nbsp;&lt;br&gt;&lt;br&gt;Registered&nbsp;Office:&nbsp;Belgrave&nbsp;House,&nbsp;76&nbsp;Buckingham&nbsp;Palace&nbsp;Road,&nbsp;London&nbsp;SW1W&nbsp;9TQ;&nbsp;Registered&nbsp;in&nbsp;England&nbsp;Number:&nbsp;3977902&lt;br&gt;&lt;br&gt;<br>

</tt>
