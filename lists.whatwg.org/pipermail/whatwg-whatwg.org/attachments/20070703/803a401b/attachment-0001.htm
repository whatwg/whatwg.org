<tt>
On&nbsp;7/3/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Robert&nbsp;Sayre&lt;/b&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:sayrer@gmail.com&quot;&gt;sayrer@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
On&nbsp;7/2/07,&nbsp;Robert&nbsp;O&#39;Callahan&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:robert@ocallahan.org&quot;&gt;robert@ocallahan.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&gt;&nbsp;On&nbsp;7/2/07,&nbsp;Robert&nbsp;Sayre&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:sayrer@gmail.com&quot;&gt;sayrer@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Basically,&nbsp;I&nbsp;think&nbsp;offline&nbsp;caches&nbsp;should&nbsp;respect&nbsp;the&nbsp;Vary:&nbsp;HTTP&lt;br&gt;&gt;&nbsp;&gt;&nbsp;header,&nbsp;and&nbsp;maybe&nbsp;more.&nbsp;Applications&nbsp;will&nbsp;need&nbsp;to&nbsp;do&nbsp;this&nbsp;right&lt;br&gt;&gt;&nbsp;&gt;&nbsp;anyway,&nbsp;if&nbsp;they&nbsp;want&nbsp;to&nbsp;function&nbsp;correctly&nbsp;in&nbsp;the&nbsp;presence&nbsp;of&nbsp;ISP&nbsp;HTTP<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;proxies&nbsp;(AOL,&nbsp;TMobile,&nbsp;etc),&nbsp;&nbsp;corporate&nbsp;firewalls,&nbsp;and&nbsp;server-side&lt;br&gt;&gt;&nbsp;&gt;&nbsp;stuff&nbsp;like&nbsp;Citrix&nbsp;Netscalers.&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;No&nbsp;they&nbsp;don&#39;t.&nbsp;For&nbsp;example,&nbsp;they&nbsp;can&nbsp;just&nbsp;use&nbsp;Cache-Control:private&nbsp;to&lt;br&gt;&gt;&nbsp;bypass&nbsp;those&nbsp;caches.&nbsp;That&#39;s&nbsp;what&nbsp;GMail&nbsp;does.<br>
&lt;br&gt;&lt;br&gt;Yes,&nbsp;I&nbsp;should&nbsp;have&nbsp;mentioned&nbsp;that&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;an&nbsp;Offline&nbsp;API&nbsp;will&nbsp;be&lt;br&gt;able&nbsp;to&nbsp;handle&nbsp;Cache-Control:private&nbsp;stuff&nbsp;better&nbsp;than&nbsp;other&nbsp;proxies&lt;br&gt;unless&nbsp;it&nbsp;reinvents&nbsp;other&nbsp;HTTP&nbsp;caching&nbsp;mechanisms.&lt;/blockquote&gt;<br>
&lt;div&gt;&lt;br&gt;I&nbsp;don&#39;t&nbsp;know&nbsp;what&nbsp;you&nbsp;mean.&nbsp;Offline&nbsp;storage&nbsp;is&nbsp;a&nbsp;private&nbsp;cache&nbsp;and&nbsp;can&nbsp;ignore&nbsp;Cache-Control:private.&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&gt;&nbsp;&gt;&nbsp;To&nbsp;me,&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;caching&nbsp;mechanisms&nbsp;in&nbsp;HTTP&nbsp;1.1&nbsp;can&nbsp;satisfy&lt;br&gt;&gt;&nbsp;&gt;&nbsp;this&nbsp;requirement.&nbsp;I&nbsp;think&nbsp;Rob&nbsp;is&nbsp;correct&nbsp;that&nbsp;it&nbsp;adds&nbsp;substantial&lt;br&gt;&gt;&nbsp;&gt;&nbsp;complexity,&nbsp;but&nbsp;it&nbsp;is&nbsp;already&nbsp;required.&lt;br&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;In&nbsp;what&nbsp;way&nbsp;is&nbsp;it&nbsp;already&nbsp;required?&nbsp;Browsers&nbsp;are&nbsp;not&nbsp;required&nbsp;to&nbsp;store&lt;br&gt;&gt;&nbsp;multiple&nbsp;resources&nbsp;for&nbsp;the&nbsp;same&nbsp;URI.&nbsp;We&nbsp;don&#39;t;&nbsp;we&nbsp;just&nbsp;use&nbsp;Vary&nbsp;to&nbsp;help&lt;br&gt;&gt;&nbsp;(in)validate&nbsp;the&nbsp;resource&nbsp;we&#39;ve&nbsp;got.&lt;br&gt;&lt;br&gt;I&nbsp;mean&nbsp;that&nbsp;it&nbsp;is&nbsp;required&nbsp;for&nbsp;web&nbsp;application&nbsp;authors&nbsp;that&nbsp;want&nbsp;to<br>
&lt;br&gt;scale&nbsp;cheaply&nbsp;and&nbsp;have&nbsp;personalized&nbsp;pages.&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;you&nbsp;agree&lt;br&gt;with&nbsp;me.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;The&nbsp;first&nbsp;app&nbsp;I&nbsp;checked&nbsp;(GMail)&nbsp;doesn&#39;t&nbsp;use&nbsp;Vary.&nbsp;If&nbsp;people&nbsp;aren&#39;t&nbsp;using&nbsp;it,&nbsp;it&nbsp;can&nbsp;hardly&nbsp;be&nbsp;a&nbsp;requirement.&nbsp;Actually&nbsp;I&#39;m&nbsp;skeptical&nbsp;that&nbsp;Vary&nbsp;helps&nbsp;much&nbsp;with&nbsp;scalability,&nbsp;even&nbsp;if&nbsp;it&nbsp;works&nbsp;interoperably&nbsp;across&nbsp;browsers&nbsp;and&nbsp;caches:&nbsp;presumably&nbsp;most&nbsp;content&nbsp;is&nbsp;going&nbsp;to&nbsp;have&nbsp;one&nbsp;global&nbsp;instance&nbsp;(Cache-Control:public),&nbsp;or&nbsp;one&nbsp;instance&nbsp;per&nbsp;user&nbsp;(Cache-Control:private).&nbsp;&nbsp;&quot;Vary&quot;&nbsp;only&nbsp;helps&nbsp;you&nbsp;cache&nbsp;content&nbsp;that&nbsp;falls&nbsp;in&nbsp;between.&nbsp;Do&nbsp;you&nbsp;know&nbsp;of&nbsp;any&nbsp;examples&nbsp;of&nbsp;such&nbsp;content&nbsp;in&nbsp;existing&nbsp;apps?<br>
&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&gt;&nbsp;So&nbsp;how&nbsp;would&nbsp;you&nbsp;use&nbsp;Vary&nbsp;here,&nbsp;anyway?&nbsp;Serve&nbsp;pages&nbsp;with&nbsp;&quot;Vary:&nbsp;Cookie&quot;?&nbsp;I<br>
&lt;br&gt;&gt;&nbsp;guess&nbsp;that&nbsp;could&nbsp;work,&nbsp;but&nbsp;app&nbsp;authors&nbsp;would&nbsp;have&nbsp;to&nbsp;pass&nbsp;no&nbsp;cookies&nbsp;except&lt;br&gt;&gt;&nbsp;for&nbsp;the&nbsp;session&nbsp;cookie.&nbsp;That&nbsp;could&nbsp;be&nbsp;difficult.&lt;br&gt;&lt;br&gt;Or&nbsp;you&nbsp;could&nbsp;standardize&nbsp;the&nbsp;cookie&nbsp;value&nbsp;in&nbsp;some&nbsp;way.&lt;/blockquote&gt;&lt;div&gt;<br>
&lt;br&gt;I&nbsp;thought&nbsp;about&nbsp;just&nbsp;specifying&nbsp;a&nbsp;standard&nbsp;session&nbsp;cookie&nbsp;name&nbsp;which&nbsp;always&nbsp;becomes&nbsp;part&nbsp;of&nbsp;the&nbsp;cache&nbsp;key&nbsp;along&nbsp;with&nbsp;the&nbsp;URI&nbsp;(&quot;HTML5-Session&quot;&nbsp;or&nbsp;something).&nbsp;But&nbsp;that&nbsp;doesn&#39;t&nbsp;work&nbsp;well,&nbsp;e.g.&nbsp;if&nbsp;you&nbsp;want&nbsp;some&nbsp;content&nbsp;to&nbsp;be&nbsp;indexed&nbsp;by&nbsp;user&nbsp;and&nbsp;some&nbsp;content&nbsp;to&nbsp;be&nbsp;indexed&nbsp;by&nbsp;language.<br>
&lt;br&gt;&lt;br&gt;A&nbsp;simple&nbsp;alternative&nbsp;would&nbsp;be&nbsp;a&nbsp;new&nbsp;server&nbsp;response&nbsp;header,&nbsp;say&nbsp;X-Vary-Cookie:&nbsp;&lt;cookiename&gt;,&nbsp;which&nbsp;essentially&nbsp;means&nbsp;&quot;Vary&quot;&nbsp;for&nbsp;that&nbsp;particular&nbsp;cookie&nbsp;(and&nbsp;offline&nbsp;storage&nbsp;uses&nbsp;it&nbsp;as&nbsp;a&nbsp;cue&nbsp;to&nbsp;cache&nbsp;one&nbsp;resource&nbsp;per&nbsp;cookie&nbsp;value).<br>
&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&gt;&nbsp;Using&nbsp;an&nbsp;HTTP&nbsp;response&nbsp;header&nbsp;to&nbsp;specify&nbsp;how&nbsp;a&nbsp;URI&nbsp;can&nbsp;map&nbsp;to&nbsp;multiple&lt;br&gt;<br>
&gt;&nbsp;resources&nbsp;is&nbsp;a&nbsp;good&nbsp;idea,&nbsp;though.&nbsp;It&nbsp;avoids&nbsp;ambiguities&nbsp;and&nbsp;offers&nbsp;a&nbsp;simple&lt;br&gt;&gt;&nbsp;default.&nbsp;If&nbsp;we&nbsp;have&nbsp;to&nbsp;have&nbsp;that&nbsp;feature,&nbsp;this&nbsp;seems&nbsp;like&nbsp;a&nbsp;good&nbsp;way&nbsp;to&nbsp;do&lt;br&gt;&gt;&nbsp;it.&lt;br&gt;&lt;br&gt;Etag&nbsp;and&nbsp;Content-Location&nbsp;could&nbsp;be&nbsp;used.<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;I&nbsp;think&nbsp;they&#39;re&nbsp;unnecessary&nbsp;given&nbsp;the&nbsp;above&nbsp;proposal.&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;Rob&lt;br&gt;--&nbsp;&lt;br&gt;&quot;Two&nbsp;men&nbsp;owed&nbsp;money&nbsp;to&nbsp;a&nbsp;certain&nbsp;moneylender.&nbsp;One&nbsp;owed&nbsp;him&nbsp;five&nbsp;hundred&nbsp;denarii,&nbsp;and&nbsp;the&nbsp;other&nbsp;fifty.&nbsp;Neither&nbsp;of&nbsp;them&nbsp;had&nbsp;the&nbsp;money&nbsp;to&nbsp;pay&nbsp;him&nbsp;back,&nbsp;so&nbsp;he&nbsp;canceled&nbsp;the&nbsp;debts&nbsp;of&nbsp;both.&nbsp;Now&nbsp;which&nbsp;of&nbsp;them&nbsp;will&nbsp;love&nbsp;him&nbsp;more?&quot;&nbsp;Simon&nbsp;replied,&nbsp;&quot;I&nbsp;suppose&nbsp;the&nbsp;one&nbsp;who&nbsp;had&nbsp;the&nbsp;bigger&nbsp;debt&nbsp;canceled.&quot;&nbsp;&quot;You&nbsp;have&nbsp;judged&nbsp;correctly,&quot;&nbsp;Jesus&nbsp;said.&nbsp;[Luke&nbsp;7:41-43]<br>

</tt>
