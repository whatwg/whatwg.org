<tt>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Aug&nbsp;13,&nbsp;2009&nbsp;at&nbsp;4:07&nbsp;AM,&nbsp;Ian&nbsp;Hickson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ian@hixie.ch&quot;&gt;ian@hixie.ch&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Sure,&nbsp;although&nbsp;I&amp;#39;d&nbsp;say&nbsp;that&nbsp;&amp;quot;persistent&nbsp;storage&nbsp;is&nbsp;addressed&nbsp;by&nbsp;the&nbsp;Web&lt;br&gt;<br>
&amp;gt;&nbsp;Storage&nbsp;and&nbsp;Web&nbsp;Database&nbsp;features&amp;quot;.&nbsp;Shared&nbsp;state&nbsp;is&nbsp;also&nbsp;addressed,&nbsp;but&lt;br&gt;<br>
&amp;gt;&nbsp;that&amp;#39;s&nbsp;not&nbsp;the&nbsp;primary&nbsp;goal.&nbsp;If&nbsp;I&nbsp;have&nbsp;a&nbsp;tree&nbsp;of&nbsp;objects&nbsp;that&nbsp;I&amp;#39;d&nbsp;like&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;share&nbsp;between&nbsp;two&nbsp;pages,&nbsp;telling&nbsp;me&nbsp;to&nbsp;serialize&nbsp;it&nbsp;into&nbsp;name/value&lt;br&gt;<br>
&amp;gt;&nbsp;string&nbsp;pairs,&nbsp;write&nbsp;it&nbsp;into&nbsp;Web&nbsp;Storage,&nbsp;and&nbsp;then&nbsp;have&nbsp;the&nbsp;remote&nbsp;side&lt;br&gt;<br>
&amp;gt;&nbsp;read&nbsp;it&nbsp;out&nbsp;is&nbsp;not&nbsp;a&nbsp;satisfying&nbsp;(or&nbsp;performant)&nbsp;solution.&lt;br&gt;<br>
&lt;br&gt;<br>
Web&nbsp;Storage&nbsp;supports&nbsp;structured&nbsp;data&nbsp;now.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yeah,&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;UA&nbsp;will&nbsp;automatically&nbsp;jsonify&nbsp;my&nbsp;(cycle-free)&nbsp;data&nbsp;structures&nbsp;does&nbsp;not&nbsp;really&nbsp;make&nbsp;this&nbsp;a&nbsp;great&nbsp;solution,&nbsp;for&nbsp;many&nbsp;of&nbsp;the&nbsp;reasons&nbsp;Mike&nbsp;Wilson&nbsp;mentioned.&nbsp;That&nbsp;said,&nbsp;once&nbsp;you&amp;#39;ve&nbsp;architected&nbsp;your&nbsp;application&nbsp;around&nbsp;having&nbsp;only&nbsp;asynchronous&nbsp;access&nbsp;to&nbsp;your&nbsp;data&nbsp;structures,&nbsp;there&nbsp;are&nbsp;lots&nbsp;of&nbsp;tools&nbsp;available&nbsp;in&nbsp;HTML5&nbsp;to&nbsp;do&nbsp;sharing&nbsp;(use&nbsp;WebStorage&nbsp;as&nbsp;you&nbsp;describe,&nbsp;push&nbsp;all&nbsp;data&nbsp;access&nbsp;through&nbsp;a&nbsp;SharedWorker,&nbsp;keep&nbsp;duplicate&nbsp;copies&nbsp;of&nbsp;data&nbsp;structures&nbsp;in&nbsp;each&nbsp;page&nbsp;and&nbsp;update&nbsp;them&nbsp;via&nbsp;DB&nbsp;or&nbsp;SharedWorker&nbsp;messages,&nbsp;etc).&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
A&nbsp;system&nbsp;that&nbsp;displays&nbsp;rich/scripted&nbsp;content&nbsp;on&nbsp;server&nbsp;demand&nbsp;rather&nbsp;than&lt;br&gt;<br>
on&nbsp;user&nbsp;demand&nbsp;is&nbsp;a&nbsp;massive&nbsp;security&nbsp;nightmare.&nbsp;It&nbsp;turns&nbsp;a&nbsp;scripting&lt;br&gt;<br>
security&nbsp;bug&nbsp;and&nbsp;an&nbsp;XSS&nbsp;bug&nbsp;into&nbsp;an&nbsp;instant&nbsp;malware&nbsp;deployment&nbsp;vector.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Another&nbsp;name&nbsp;for&nbsp;&amp;quot;a&nbsp;system&nbsp;that&nbsp;displays&nbsp;rich/scripted&nbsp;content&nbsp;on&nbsp;server&nbsp;demand&amp;quot;&nbsp;is&nbsp;&amp;quot;an&nbsp;open&nbsp;web&nbsp;page&amp;quot;&nbsp;:)&nbsp;The&nbsp;only&nbsp;difference&nbsp;is&nbsp;the&nbsp;user&nbsp;has&nbsp;UI&nbsp;to&nbsp;close&nbsp;a&nbsp;web&nbsp;page&nbsp;when&nbsp;he&amp;#39;s&nbsp;done&nbsp;interacting&nbsp;with&nbsp;it,&nbsp;while&nbsp;the&nbsp;UI&nbsp;to&nbsp;enable/disable&nbsp;notifications&nbsp;from&nbsp;a&nbsp;domain&nbsp;is&nbsp;probably&nbsp;less&nbsp;obvious.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Scriptable&nbsp;notifications&nbsp;are&nbsp;a&nbsp;use&nbsp;case&nbsp;that&nbsp;none&nbsp;of&nbsp;these&nbsp;proposals&nbsp;currently&nbsp;satisfy. I&nbsp;understand&nbsp;the&nbsp;security&nbsp;concerns.&nbsp;I&nbsp;just&nbsp;don&amp;#39;t&nbsp;(yet&nbsp;:)&nbsp;share&nbsp;the&nbsp;general&nbsp;belief&nbsp;that&nbsp;they&nbsp;are&nbsp;insurmountable&nbsp;which&nbsp;is&nbsp;why&nbsp;I&nbsp;want&nbsp;to&nbsp;continue&nbsp;experimenting&nbsp;in&nbsp;this&nbsp;area.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Additionally,&nbsp;any&nbsp;server-side-feed-based&nbsp;solution&nbsp;has&nbsp;the&nbsp;implication&lt;br&gt;<br>
&amp;gt;&nbsp;that&nbsp;it&nbsp;won&amp;#39;t&nbsp;work&nbsp;for&nbsp;offline&nbsp;apps.&nbsp;If&nbsp;I&nbsp;am&nbsp;using&nbsp;a&nbsp;web&nbsp;calendar,&nbsp;I&lt;br&gt;<br>
&amp;gt;&nbsp;want&nbsp;my&nbsp;event&nbsp;notifications&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;I&amp;#39;m&nbsp;online&nbsp;or&nbsp;offline&lt;br&gt;<br>
&amp;gt;&nbsp;(the&nbsp;event&nbsp;may&nbsp;have&nbsp;been&nbsp;added&nbsp;while&nbsp;I&amp;#39;m&nbsp;offline&nbsp;and&nbsp;never&nbsp;synced&nbsp;to&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;server&nbsp;at&nbsp;all).&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;think&nbsp;on&nbsp;the&nbsp;long&nbsp;term&nbsp;we&nbsp;may&nbsp;wish&nbsp;to&nbsp;consider&nbsp;adding&nbsp;a&nbsp;feature&nbsp;to&nbsp;queue&lt;br&gt;<br>
up&nbsp;POSTs&nbsp;for&nbsp;when&nbsp;the&nbsp;UA&nbsp;finds&nbsp;it&nbsp;is&nbsp;back&nbsp;online.&nbsp;That&nbsp;would&nbsp;address&nbsp;a&lt;br&gt;<br>
number&nbsp;of&nbsp;problems,&nbsp;including&nbsp;this&nbsp;one.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;ll&nbsp;just&nbsp;note&nbsp;that&nbsp;to&nbsp;get&nbsp;a&nbsp;narrow&nbsp;subset&nbsp;of&nbsp;the&nbsp;behavior&nbsp;that&nbsp;simple&nbsp;background&nbsp;scripting&nbsp;would&nbsp;provide&nbsp;(static&nbsp;notifications&nbsp;and&nbsp;static&nbsp;data&nbsp;synchronization&nbsp;without&nbsp;client-side&nbsp;reconciliation),&nbsp;we&amp;#39;re&nbsp;having&nbsp;to&nbsp;have:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;A&nbsp;server-controlled&nbsp;push&nbsp;notification&nbsp;stream,&nbsp;as&nbsp;well&nbsp;as&nbsp;infrastructure&nbsp;for&nbsp;applications&nbsp;to&nbsp;insert/remove&nbsp;notifications&nbsp;into&nbsp;the&nbsp;stream&nbsp;for&nbsp;offline&nbsp;use.&lt;/div&gt;&lt;div&gt;2)&nbsp;Some&nbsp;kind&nbsp;of&nbsp;server&nbsp;database&nbsp;push-sync&nbsp;protocol.&lt;/div&gt;<br>
&lt;div&gt;3)&nbsp;Some&nbsp;kind&nbsp;of&nbsp;&amp;quot;queued&nbsp;up&nbsp;posts&amp;quot;&nbsp;feature&nbsp;(with&nbsp;assumedly&nbsp;yet&nbsp;more&nbsp;infrastructure&nbsp;to&nbsp;deal&nbsp;with&nbsp;errors/return&nbsp;values&nbsp;from&nbsp;these&nbsp;delayed&nbsp;POSTs).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;you&nbsp;really&nbsp;want&nbsp;for&nbsp;#2/#3&nbsp;is&nbsp;a&nbsp;general-purpose&nbsp;sync&nbsp;protocol,&nbsp;but&nbsp;I&nbsp;don&amp;#39;t&nbsp;see&nbsp;how&nbsp;you&nbsp;do&nbsp;it&nbsp;without&nbsp;some&nbsp;form&nbsp;of&nbsp;client-side&nbsp;conflict&nbsp;resolution.&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;I&nbsp;hope&nbsp;that&nbsp;people&nbsp;understand&nbsp;why&nbsp;application&nbsp;scripting&nbsp;seems&nbsp;like&nbsp;a&nbsp;more&nbsp;attractive,&nbsp;general-purpose&nbsp;solution.&nbsp;I&amp;#39;m&nbsp;unable&nbsp;to&nbsp;muster&nbsp;much&nbsp;enthusiasm&nbsp;for&nbsp;a&nbsp;set&nbsp;of&nbsp;convoluted&nbsp;server-and-client-side&nbsp;mechanisms&nbsp;that&nbsp;cover&nbsp;such&nbsp;a&nbsp;narrow&nbsp;set&nbsp;of&nbsp;use&nbsp;cases&nbsp;without&nbsp;any&nbsp;way&nbsp;for&nbsp;client&nbsp;applications&nbsp;to&nbsp;customize&nbsp;this&nbsp;behavior&nbsp;through&nbsp;scripting.&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;I&nbsp;really&nbsp;don&amp;#39;t&nbsp;feel&nbsp;right&nbsp;allowing&nbsp;script&nbsp;to&nbsp;run&nbsp;like&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;<br>
Why&nbsp;can&amp;#39;t&nbsp;the&nbsp;server&nbsp;send&nbsp;the&nbsp;data&nbsp;to&nbsp;the&nbsp;client&nbsp;in&nbsp;a&nbsp;near-final&nbsp;form&nbsp;and&lt;br&gt;<br>
let&nbsp;the&nbsp;script&nbsp;figure&nbsp;it&nbsp;out&nbsp;when&nbsp;the&nbsp;user&nbsp;finally&nbsp;opens&nbsp;the&nbsp;app?&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;if&nbsp;there&nbsp;are&nbsp;things&nbsp;the&nbsp;application&nbsp;wants&nbsp;to&nbsp;do&nbsp;to&nbsp;act&nbsp;upon&nbsp;this&nbsp;data&nbsp;immediately&nbsp;(add&nbsp;items&nbsp;to&nbsp;the&nbsp;notification&nbsp;stream,&nbsp;for&nbsp;example)?&nbsp;What&nbsp;you&amp;#39;re&nbsp;saying&nbsp;is&nbsp;we&nbsp;need&nbsp;to&nbsp;push&nbsp;all&nbsp;of&nbsp;this&nbsp;functionality&nbsp;up&nbsp;to&nbsp;the&nbsp;server,&nbsp;then&nbsp;provide&nbsp;a&nbsp;very&nbsp;narrow&nbsp;set&nbsp;of&nbsp;APIs&nbsp;(essentially,&nbsp;static&nbsp;notifications)&nbsp;that&nbsp;the&nbsp;server&nbsp;can&nbsp;use&nbsp;to&nbsp;act&nbsp;on&nbsp;that&nbsp;functionality.&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;&lt;/div&gt;What&nbsp;other&nbsp;use&nbsp;cases&nbsp;are&nbsp;there?&nbsp;Those&nbsp;were&nbsp;the&nbsp;ones&nbsp;given.&nbsp;We&amp;#39;re&nbsp;very&nbsp;much&lt;br&gt;<br>
<br>
use-case-driven&nbsp;here.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;won&amp;#39;t&nbsp;claim&nbsp;to&nbsp;understand&nbsp;all&nbsp;of&nbsp;the&nbsp;potential&nbsp;use&nbsp;cases&nbsp;yet,&nbsp;but&nbsp;I&nbsp;have&nbsp;a&nbsp;preference&nbsp;for&nbsp;general-purpose&nbsp;solutions&nbsp;rather&nbsp;than&nbsp;solutions&nbsp;that&nbsp;narrowly&nbsp;target&nbsp;a&nbsp;set&nbsp;of&nbsp;specific&nbsp;use&nbsp;cases,&nbsp;although&nbsp;I&nbsp;recognize&nbsp;that&nbsp;more&nbsp;general-purpose&nbsp;solutions&nbsp;have&nbsp;commensurate&nbsp;security&nbsp;implications.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;just&nbsp;experiment&nbsp;with&nbsp;background&nbsp;scripting/scriptable&nbsp;notifications&nbsp;in&nbsp;a&nbsp;way&nbsp;that&nbsp;people&nbsp;find&nbsp;acceptable&nbsp;(either&nbsp;without&nbsp;persistence,&nbsp;or&nbsp;using&nbsp;extensions&nbsp;for&nbsp;persistence),&nbsp;see&nbsp;how&nbsp;applications&nbsp;actually&nbsp;use&nbsp;them,&nbsp;then&nbsp;continue&nbsp;this&nbsp;conversation.&nbsp;People&nbsp;are&nbsp;certainly&nbsp;welcome&nbsp;to&nbsp;do&nbsp;parallel&nbsp;experimentation&nbsp;with&nbsp;other&nbsp;approaches&nbsp;such&nbsp;as&nbsp;the&nbsp;ones&nbsp;you&amp;#39;ve&nbsp;outlined&nbsp;above.&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
--&lt;br&gt;<br>
Ian&nbsp;Hickson&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;U+1047E&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )\._.,--....,&amp;#39;``.&nbsp; &nbsp; fL&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://ln.hixie.ch/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ln.hixie.ch/&lt;/a&gt;&nbsp; &nbsp; &nbsp; &nbsp;U+263A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /,&nbsp; &nbsp;_..&nbsp;\&nbsp; &nbsp;_\&nbsp; ;`._&nbsp;,.&lt;br&gt;<br>
Things&nbsp;that&nbsp;are&nbsp;impossible&nbsp;just&nbsp;take&nbsp;longer.&nbsp; &nbsp;`._.-(,_..&amp;#39;--(,_..&amp;#39;`-.;.&amp;#39;&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
