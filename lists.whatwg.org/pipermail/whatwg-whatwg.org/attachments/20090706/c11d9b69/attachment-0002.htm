<tt>
Hi&nbsp;everybody.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;I&#39;ve&nbsp;recently&nbsp;done&nbsp;some&nbsp;experiments&nbsp;using&nbsp;SVG&nbsp;filters&nbsp;(see&nbsp;http://www.tapper-ware.net/stable/web.filter.voxels/index.xhtml&nbsp;).&nbsp;SVG&nbsp;Filters&nbsp;basically&nbsp;offer&nbsp;greater&nbsp;speed&nbsp;for&nbsp;users&nbsp;and&nbsp;easier&nbsp;optimization&nbsp;for&nbsp;implementing&nbsp;parties&nbsp;than&nbsp;trying&nbsp;to&nbsp;implement&nbsp;standard&nbsp;image&nbsp;manipulation&nbsp;through&nbsp;interpreted&nbsp;or&nbsp;compiled&nbsp;Javascript&nbsp;code.&nbsp;Filter&nbsp;operations&nbsp;can&nbsp;also&nbsp;easily&nbsp;be&nbsp;implemented&nbsp;via&nbsp;graphics&nbsp;accelerators,&nbsp;which&nbsp;results&nbsp;in&nbsp;far&nbsp;greater&nbsp;speed,&nbsp;which&nbsp;is&nbsp;especially&nbsp;important&nbsp;for&nbsp;mobile&nbsp;devices.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;A&nbsp;large&nbsp;share&nbsp;of&nbsp;the&nbsp;typical&nbsp;operations&nbsp;performed&nbsp;by&nbsp;Canvas&nbsp;developers&nbsp;can&nbsp;be&nbsp;expressed&nbsp;easier&nbsp;via&nbsp;an&nbsp;SVG&nbsp;Filter&nbsp;like&nbsp;interface.&nbsp;Like&nbsp;contrast,&nbsp;brightness,&nbsp;blur&nbsp;and&nbsp;so&nbsp;on.&nbsp;Right&nbsp;now,&nbsp;such&nbsp;operations&nbsp;can&nbsp;sometimes&nbsp;be&nbsp;done&nbsp;in&nbsp;a&nbsp;hackish&nbsp;way,&nbsp;by&nbsp;combining&nbsp;the&nbsp;target&nbsp;image&nbsp;with&nbsp;a&nbsp;solid&nbsp;black/white&nbsp;picture&nbsp;and&nbsp;then&nbsp;masking&nbsp;it,&nbsp;or&nbsp;using&nbsp;getImageData,&nbsp;which&nbsp;is&nbsp;slow.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Mozilla&nbsp;also&nbsp;includes&nbsp;drawWindow,&nbsp;which&nbsp;allows&nbsp;a&nbsp;filtered&nbsp;element&nbsp;to&nbsp;be&nbsp;imported&nbsp;back&nbsp;into&nbsp;the&nbsp;Canvas,&nbsp;but&nbsp;there&nbsp;are&nbsp;dozens&nbsp;of&nbsp;security&nbsp;issues&nbsp;if&nbsp;you&nbsp;try&nbsp;to&nbsp;do&nbsp;that&nbsp;on&nbsp;the&nbsp;web&nbsp;(which&nbsp;is&nbsp;why&nbsp;it&#39;s&nbsp;only&nbsp;allowed&nbsp;for&nbsp;chrome).&nbsp;Aside&nbsp;from&nbsp;drawWindow,&nbsp;we&nbsp;are&nbsp;currently&nbsp;unable&nbsp;to&nbsp;build&nbsp;a&nbsp;processing&nbsp;chain&nbsp;that&nbsp;does&nbsp;include&nbsp;filters,&nbsp;other&nbsp;than&nbsp;applying&nbsp;a&nbsp;filter&nbsp;to&nbsp;the&nbsp;result&nbsp;rendered&nbsp;by&nbsp;the&nbsp;canvas&nbsp;via&nbsp;foreignObject.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;SVG&nbsp;Filters&nbsp;are&nbsp;a&nbsp;relatively&nbsp;easy&nbsp;spec,&nbsp;where&nbsp;the&nbsp;most&nbsp;important&nbsp;parts&nbsp;can&nbsp;be&nbsp;implemented&nbsp;in&nbsp;a&nbsp;matter&nbsp;of&nbsp;hours.&nbsp;Also,&nbsp;since&nbsp;all&nbsp;browsers&nbsp;that&nbsp;currently&nbsp;support&nbsp;Canvas&nbsp;also&nbsp;support&nbsp;SVG,&nbsp;the&nbsp;actual&nbsp;functionality&nbsp;is&nbsp;already&nbsp;included&nbsp;in&nbsp;the&nbsp;source,&nbsp;so&nbsp;very&nbsp;little&nbsp;new&nbsp;code&nbsp;would&nbsp;have&nbsp;to&nbsp;be&nbsp;written.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;I&#39;m&nbsp;willing&nbsp;to&nbsp;write&nbsp;a&nbsp;spec&nbsp;for&nbsp;it&nbsp;if&nbsp;there&#39;s&nbsp;any&nbsp;interest,&nbsp;but&nbsp;for&nbsp;now,&nbsp;I&#39;ll&nbsp;just&nbsp;give&nbsp;you&nbsp;an&nbsp;example&nbsp;of&nbsp;how&nbsp;this&nbsp;could&nbsp;work.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;The&nbsp;2D&nbsp;Context&nbsp;gets&nbsp;a&nbsp;new&nbsp;method&nbsp;&quot;createFilterChain()&quot;,&nbsp;that&nbsp;if&nbsp;invoked&nbsp;returns&nbsp;a&nbsp;Canvas2DContextFilterChain&nbsp;object.&lt;br&nbsp;/&gt;A&nbsp;Canvas2DContextFilterChain&nbsp;is&nbsp;applied&nbsp;to&nbsp;any&nbsp;drawing&nbsp;much&nbsp;like&nbsp;globalAlpha&nbsp;via&nbsp;a&nbsp;globalFilterChain&nbsp;property.&lt;br&nbsp;/&gt;A&nbsp;Canvas2DContextFilterChain&nbsp;is&nbsp;bound&nbsp;to&nbsp;a&nbsp;specific&nbsp;Canvas&nbsp;and&nbsp;can&nbsp;not&nbsp;be&nbsp;applied&nbsp;to&nbsp;anything&nbsp;else.&lt;br&nbsp;/&gt;The&nbsp;affected&nbsp;region&nbsp;is&nbsp;by&nbsp;default&nbsp;the&nbsp;rectangle&nbsp;of&nbsp;the&nbsp;operation.&lt;br&nbsp;/&gt;Canvas2DContextFilterChain&nbsp;instances&nbsp;have&nbsp;methods&nbsp;to&nbsp;add&nbsp;Canvas2DContextFilterNode&nbsp;elements,&nbsp;one&nbsp;for&nbsp;each&nbsp;type.&lt;br&nbsp;/&gt;Note&nbsp;that&nbsp;there&nbsp;is&nbsp;no&nbsp;feImage&nbsp;equivalent&nbsp;to&nbsp;keep&nbsp;security&nbsp;complexities&nbsp;to&nbsp;a&nbsp;minimum.&lt;br&nbsp;/&gt;Data&nbsp;is&nbsp;passed&nbsp;into&nbsp;a&nbsp;filter&nbsp;chain&nbsp;as&nbsp;BackgroundImage/Alpha&nbsp;(containing&nbsp;the&nbsp;image&nbsp;data&nbsp;in&nbsp;the&nbsp;target&nbsp;rectangle)&nbsp;and&nbsp;SourceImage/SourceAlpha&nbsp;for&nbsp;the&nbsp;data&nbsp;that&nbsp;is&nbsp;supposed&nbsp;to&nbsp;be&nbsp;drawn.&lt;br&nbsp;/&gt;Each&nbsp;Canvas2DContextFilterNode&nbsp;operates&nbsp;in&nbsp;the&nbsp;RGBA32&nbsp;space,&nbsp;no&nbsp;other&nbsp;color&nbsp;space&nbsp;is&nbsp;supported.&lt;br&nbsp;/&gt;By&nbsp;default,&nbsp;each&nbsp;Canvas2DContextFilterNode&nbsp;is&nbsp;applied&nbsp;to&nbsp;a&nbsp;0%,0%&nbsp;100%,100%&nbsp;rectangle&nbsp;(the&nbsp;-10%,-10%&nbsp;rule&nbsp;of&nbsp;SVG&nbsp;is&nbsp;not&nbsp;applied)&lt;br&nbsp;/&gt;For&nbsp;each&nbsp;Node,&nbsp;the&nbsp;coordinate&nbsp;system&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;be&nbsp;Canvas&nbsp;relative&nbsp;or&nbsp;affected&nbsp;region&nbsp;relative.&lt;br&nbsp;/&gt;Units&nbsp;are&nbsp;either&nbsp;numbers&nbsp;for&nbsp;absolute&nbsp;offsets&nbsp;from&nbsp;the&nbsp;chosen&nbsp;rectangle&nbsp;or&nbsp;percentages&nbsp;of&nbsp;the&nbsp;same.&lt;br&nbsp;/&gt;Instead&nbsp;of&nbsp;the&nbsp;string&nbsp;based&nbsp;buffer&nbsp;system&nbsp;of&nbsp;SVG,&nbsp;each&nbsp;Canvas2DContextFilterNode&nbsp;has&nbsp;connectOutputImage/Alpha&nbsp;methods.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Am&nbsp;I&nbsp;the&nbsp;only&nbsp;one&nbsp;seeing&nbsp;any&nbsp;benefit&nbsp;for&nbsp;this&nbsp;or&nbsp;does&nbsp;anybody&nbsp;else&nbsp;think&nbsp;that&nbsp;would&nbsp;be&nbsp;hope&nbsp;for&nbsp;such&nbsp;a&nbsp;proposal?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;--hans
</tt>
