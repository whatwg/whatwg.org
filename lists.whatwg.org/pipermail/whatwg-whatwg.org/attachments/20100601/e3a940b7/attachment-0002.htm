<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Jun&nbsp;1,&nbsp;2010&nbsp;at&nbsp;4:24&nbsp;AM,&nbsp;Kornel&nbsp;Lesinski&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:kornel@geekhood.net&quot;&gt;kornel@geekhood.net&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;1&nbsp;Jun&nbsp;2010,&nbsp;at&nbsp;11:12,&nbsp;Erik&nbsp;Möller&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;use&nbsp;case&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;address&nbsp;in&nbsp;this&nbsp;post&nbsp;is&nbsp;Real-time&nbsp;client/server&nbsp;games.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;majority&nbsp;of&nbsp;the&nbsp;on-line&nbsp;games&nbsp;of&nbsp;today&nbsp;use&nbsp;a&nbsp;client/server&nbsp;model&nbsp;over&nbsp;UDP&nbsp;and&nbsp;we&nbsp;should&nbsp;try&nbsp;to&nbsp;give&nbsp;game&nbsp;developers&nbsp;the&nbsp;tools&nbsp;they&nbsp;require&nbsp;to&nbsp;create&nbsp;browser&nbsp;based&nbsp;games.&nbsp;For&nbsp;many&nbsp;simpler&nbsp;games&nbsp;a&nbsp;TCP&nbsp;based&nbsp;protocol&nbsp;is&nbsp;exactly&nbsp;what&#39;s&nbsp;needed&nbsp;but&nbsp;for&nbsp;most&nbsp;real-time&nbsp;games&nbsp;a&nbsp;UDP&nbsp;based&nbsp;protocol&nbsp;is&nbsp;a&nbsp;requirement.&nbsp;Games&nbsp;typically&nbsp;send&nbsp;small&nbsp;updates&nbsp;to&nbsp;its&nbsp;server&nbsp;at&nbsp;20-30Hz&nbsp;over&nbsp;UDP&nbsp;and&nbsp;can&nbsp;with&nbsp;the&nbsp;help&nbsp;of&nbsp;entity&nbsp;interpolation&nbsp;and&nbsp;if&nbsp;required&nbsp;entity&nbsp;extrapolation&nbsp;cope&nbsp;well&nbsp;with&nbsp;intermittent&nbsp;packet&nbsp;loss.&nbsp;When&nbsp;a&nbsp;packet&nbsp;loss&nbsp;occur&nbsp;in&nbsp;a&nbsp;TCP&nbsp;based&nbsp;protocol&nbsp;the&nbsp;entire&nbsp;stream&nbsp;of&nbsp;data&nbsp;is&nbsp;held&nbsp;up&nbsp;until&nbsp;the&nbsp;packet&nbsp;is&nbsp;resent&nbsp;meaning&nbsp;a&nbsp;game&nbsp;would&nbsp;have&nbsp;to&nbsp;revert&nbsp;to&nbsp;entity&nbsp;extrapolation&nbsp;possibly&nbsp;over&nbsp;several&nbsp;seconds,&nbsp;leading&nbsp;to&nbsp;an&nbsp;unacceptable&nbsp;gameplay&nbsp;experience.&lt;br&gt;<br>
<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;It&nbsp;seems&nbsp;to&nbsp;me&nbsp;the&nbsp;WebSocket&nbsp;interface&nbsp;can&nbsp;be&nbsp;easily&nbsp;modified&nbsp;to&nbsp;cope&nbsp;with&nbsp;UDP&nbsp;sockets&nbsp;(a&nbsp;wsd:&nbsp;scheme&nbsp;perhaps?)&nbsp;and&nbsp;it&nbsp;sounds&nbsp;like&nbsp;a&nbsp;good&nbsp;idea&nbsp;to&nbsp;leverage&nbsp;the&nbsp;work&nbsp;already&nbsp;done&nbsp;for&nbsp;WebSockets&nbsp;in&nbsp;terms&nbsp;of&nbsp;interface&nbsp;and&nbsp;framing.&lt;br&gt;<br>
<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;most&nbsp;important&nbsp;distinction&nbsp;between&nbsp;ws:&nbsp;and&nbsp;wsd:&nbsp;is&nbsp;that&nbsp;messages&nbsp;sent&nbsp;by&nbsp;send()&nbsp;in&nbsp;wsd:&nbsp;need&nbsp;not&nbsp;be&nbsp;acknowledged&nbsp;by&nbsp;the&nbsp;peer&nbsp;nor&nbsp;be&nbsp;resent.&nbsp;To&nbsp;keep&nbsp;the&nbsp;interface&nbsp;the&nbsp;same&nbsp;to&nbsp;the&nbsp;largest&nbsp;possible&nbsp;extent&nbsp;I&#39;d&nbsp;suggest&nbsp;implementing&nbsp;a&nbsp;simple&nbsp;reliable&nbsp;3-way&nbsp;handshake&nbsp;over&nbsp;UDP,&nbsp;keep-alive&nbsp;messages&nbsp;(and&nbsp;timeouts)&nbsp;and&nbsp;reliable&nbsp;close&nbsp;frames.&nbsp;If&nbsp;these&nbsp;are&nbsp;implemented&nbsp;right&nbsp;the&nbsp;interface&nbsp;in&nbsp;it&#39;s&nbsp;entirety&nbsp;could&nbsp;be&nbsp;kept.&nbsp;Only&nbsp;one&nbsp;new&nbsp;readonly&nbsp;attribute&nbsp;long&nbsp;maxMessageSize&nbsp;could&nbsp;be&nbsp;introduced&nbsp;to&nbsp;describe&nbsp;the&nbsp;min&nbsp;path&nbsp;MTU&nbsp;(perhaps&nbsp;only&nbsp;valid&nbsp;once&nbsp;in&nbsp;connected&nbsp;mode,&nbsp;or&nbsp;perhaps&nbsp;set&nbsp;to&nbsp;0&nbsp;or&nbsp;576&nbsp;initially&nbsp;and&nbsp;updated&nbsp;once&nbsp;in&nbsp;connected&nbsp;mode).&nbsp;This&nbsp;attribute&nbsp;could&nbsp;also&nbsp;be&nbsp;useful&nbsp;to&nbsp;expose&nbsp;in&nbsp;ws:&nbsp;and&nbsp;wss:&nbsp;but&nbsp;in&nbsp;that&nbsp;case&nbsp;be&nbsp;set&nbsp;to&nbsp;the&nbsp;internal&nbsp;limit&nbsp;of&nbsp;the&nbsp;browser&nbsp;/&nbsp;server.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&lt;/div&gt;SCTP&nbsp;would&nbsp;be&nbsp;ideal&nbsp;for&nbsp;this.&nbsp;It&#39;s&nbsp;connection-oriented,&nbsp;but&nbsp;supports&nbsp;multistreaming&nbsp;(can&nbsp;deliver&nbsp;messages&nbsp;out&nbsp;of&nbsp;order,&nbsp;without&nbsp;head&nbsp;of&nbsp;line&nbsp;blocking).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol&quot;&nbsp;target=&quot;_blank&quot;&gt;http://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol&lt;/a&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;FYI:&nbsp; &nbsp;SCTP&nbsp;is&nbsp;effectively&nbsp;non-deployable&nbsp;on&nbsp;the&nbsp;internet&nbsp;today&nbsp;due&nbsp;to&nbsp;NAT.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;+1&nbsp;on&nbsp;finding&nbsp;ways&nbsp;to&nbsp;enable&nbsp;UDP.&nbsp; It&#39;s&nbsp;a&nbsp;key&nbsp;missing&nbsp;component&nbsp;to&nbsp;the&nbsp;web&nbsp;platform. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Mike&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
