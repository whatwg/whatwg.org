<tt>
I&amp;#39;d&nbsp;like&nbsp;to&nbsp;propose&nbsp;a&nbsp;way&nbsp;forward.&nbsp;Please&nbsp;have&nbsp;an&nbsp;open&nbsp;mind.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;objections&nbsp;your&nbsp;hearing&nbsp;from&nbsp;the&nbsp;chrome&nbsp;world&nbsp;are&nbsp;around&nbsp;the&nbsp;locking&nbsp;semantics&nbsp;being&nbsp;proposed.&nbsp;In&nbsp;various&nbsp;discussions&nbsp;the&nbsp;terms&nbsp;&amp;quot;evil&amp;quot;,&nbsp;&amp;quot;troubling&amp;quot;,&nbsp;and&nbsp;&amp;quot;onerous&amp;quot;&nbsp;have&nbsp;been&nbsp;used&nbsp;to&nbsp;describe&nbsp;what&nbsp;we&nbsp;think&nbsp;about&nbsp;aspects&nbsp;of&nbsp;those&nbsp;semantics.&nbsp;There&nbsp;are&nbsp;obvious&nbsp;difficulties&nbsp;in&nbsp;providing&nbsp;the&nbsp;semantics&nbsp;being&nbsp;discussed&nbsp;in&nbsp;a&nbsp;multi-threaded&nbsp;multi-process&nbsp;browser.&nbsp;There&nbsp;are&nbsp;obvious&nbsp;performance&nbsp;implications.&nbsp;There&nbsp;are&nbsp;limitations&nbsp;imposed&nbsp;on&nbsp;workers&nbsp;that&nbsp;would&nbsp;otherwise&nbsp;not&nbsp;be&nbsp;an&nbsp;issue.&nbsp;And&nbsp;with&nbsp;the&nbsp;introduction&nbsp;of&nbsp;these&nbsp;locks&nbsp;today,&nbsp;there&nbsp;would&nbsp;be&nbsp;challenges&nbsp;going&nbsp;forward&nbsp;when&nbsp;trying&nbsp;to&nbsp;add&nbsp;new&nbsp;features&nbsp;such&nbsp;that&nbsp;deadlocks&nbsp;would&nbsp;not&nbsp;be&nbsp;incurred...&nbsp;our&nbsp;hands&nbsp;would&nbsp;be&nbsp;getting&nbsp;tied&nbsp;up.&nbsp;So&nbsp;we&nbsp;don&amp;#39;t&nbsp;like&nbsp;it...&nbsp;evil,&nbsp;troubling,&nbsp;onerous.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;objections&nbsp;I&amp;#39;m&nbsp;hearing&nbsp;from&nbsp;the&nbsp;firefox&nbsp;world&nbsp;are&nbsp;around&nbsp;providing&nbsp;an&nbsp;API&nbsp;that&nbsp;is&nbsp;less&nbsp;error&nbsp;prone.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;suggest&nbsp;that&nbsp;we&nbsp;can&nbsp;come&nbsp;up&nbsp;with&nbsp;a&nbsp;design&nbsp;that&nbsp;makes&nbsp;both&nbsp;of&nbsp;these&nbsp;camps&nbsp;happy&nbsp;and&nbsp;that&nbsp;should&nbsp;be&nbsp;our&nbsp;goal&nbsp;here.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;that&nbsp;end...&nbsp;what&nbsp;if...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;interface&nbsp;Store&nbsp;{&lt;/div&gt;&lt;div&gt;  void&nbsp;putItem(string&nbsp;name,&nbsp;string&nbsp;value);&lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt;  string&nbsp;getItem(string&nbsp;name); &lt;/div&gt;&lt;div&gt;  //&nbsp;calling&nbsp;getItem&nbsp;multiple&nbsp;times&nbsp;prior&nbsp;to&nbsp;script&nbsp;completion&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;is&nbsp;gauranteed&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;value&lt;/div&gt;<br>
&lt;div&gt;  //&nbsp;(unless&nbsp;the&nbsp;current&nbsp;script&nbsp;had&nbsp;called&nbsp;putItem,&nbsp;if&nbsp;a&nbsp;different&nbsp;script&nbsp;had&nbsp;called&nbsp;putItem&nbsp;concurrently,&nbsp;the&nbsp;current&nbsp;script&nbsp;wont&nbsp;see&nbsp;that)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  void&nbsp;transact(func&nbsp;transactCallback);&lt;/div&gt;&lt;div&gt;<br>
  //&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;execute&nbsp;if&nbsp;the&nbsp;page&nbsp;is&nbsp;unloaded&nbsp;prior&nbsp;to&nbsp;the&nbsp;lock&nbsp;being&nbsp;acquired&lt;/div&gt;&lt;div&gt;  //&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;NOT&nbsp;execute&nbsp;if&nbsp;called&nbsp;from&nbsp;within&nbsp;onunload&lt;/div&gt;&lt;div&gt;  //&nbsp;but...&nbsp;really...&nbsp;if&nbsp;you&nbsp;need&nbsp;transactional&nbsp;semantics,&nbsp;maybe&nbsp;you&nbsp;should&nbsp;be&nbsp;using&nbsp;a&nbsp;Database?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  attribute&nbsp;int&nbsp;length;&lt;/div&gt;&lt;div&gt;  //&nbsp;may&nbsp;only&nbsp;be&nbsp;accessed&nbsp;within&nbsp;a&nbsp;transactCallback,&nbsp;othewise&nbsp;throws&nbsp;an&nbsp;exception&lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt;  string&nbsp;getItemByIndex(int&nbsp;i);&lt;/div&gt;&lt;div&gt;  // //&nbsp;may&nbsp;only&nbsp;be&nbsp;accessed&nbsp;within&nbsp;a&nbsp;transactCallback,&nbsp;othewise&nbsp;throws&nbsp;an&nbsp;exception&lt;/div&gt;<br>
&lt;div&gt;};&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;document.cookie;&lt;/div&gt;&lt;div&gt;//&nbsp;has&nbsp;the&nbsp;same&nbsp;safe&nbsp;to&nbsp;read&nbsp;multiple&nbsp;times&nbsp;semantics&nbsp;as&nbsp;store.getItem()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;there&nbsp;are&nbsp;no&nbsp;locking&nbsp;semantics&nbsp;(outside&nbsp;of&nbsp;the&nbsp;transact&nbsp;method)...&nbsp;and&nbsp;multiple&nbsp;reads&nbsp;are&nbsp;not&nbsp;error&nbsp;prone.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;WDYT?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
