<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Nov&nbsp;5,&nbsp;2009&nbsp;at&nbsp;6:10&nbsp;AM,&nbsp;Brian&nbsp;Campbell&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:brian.p.campbell@dartmouth.edu&quot;&gt;brian.p.campbell@dartmouth.edu&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Nov&nbsp;5,&nbsp;2009,&nbsp;at&nbsp;1:17&nbsp;AM,&nbsp;Andrew&nbsp;Scherkus&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
On&nbsp;Fri,&nbsp;Oct&nbsp;30,&nbsp;2009&nbsp;at&nbsp;10:18&nbsp;PM,&nbsp;Brian&nbsp;Campbell&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:Brian.P.Campbell@dartmouth.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;Brian.P.Campbell@dartmouth.edu&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
As&nbsp;a&nbsp;multimedia&nbsp;developer,&nbsp;I&nbsp;am&nbsp;wondering&nbsp;about&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;timeupdate&nbsp;event&nbsp;on&nbsp;media&nbsp;elements.&nbsp;On&nbsp;first&nbsp;glance,&nbsp;it&nbsp;would&nbsp;appear&nbsp;that&nbsp;this&nbsp;event&nbsp;would&nbsp;be&nbsp;useful&nbsp;for&nbsp;synchronizing&nbsp;animations,&nbsp;bullets,&nbsp;captions,&nbsp;UI,&nbsp;and&nbsp;the&nbsp;like.&nbsp;The&nbsp;spec&nbsp;specifies&nbsp;a&nbsp;rate&nbsp;of&nbsp;4&nbsp;to&nbsp;66&nbsp;Hz&nbsp;for&nbsp;these&nbsp;events.&nbsp;The&nbsp;high&nbsp;end&nbsp;of&nbsp;this&nbsp;(30&nbsp;or&nbsp;more&nbsp;Hz)&nbsp;is&nbsp;pretty&nbsp;reasonable&nbsp;for&nbsp;displaying&nbsp;things&nbsp;in&nbsp;sync&nbsp;with&nbsp;the&nbsp;video.&nbsp;The&nbsp;low&nbsp;end,&nbsp;however,&nbsp;4&nbsp;Hz,&nbsp;is&nbsp;far&nbsp;too&nbsp;slow&nbsp;for&nbsp;most&nbsp;types&nbsp;of&nbsp;synchronization;&nbsp;everything&nbsp;feels&nbsp;laggy&nbsp;at&nbsp;this&nbsp;frequency.&nbsp;From&nbsp;my&nbsp;testing&nbsp;on&nbsp;a&nbsp;two&nbsp;year&nbsp;old&nbsp;MacBook&nbsp;Pro,&nbsp;Firefox&nbsp;is&nbsp;giving&nbsp;me&nbsp;about&nbsp;25&nbsp;timeupdate&nbsp;events&nbsp;per&nbsp;second,&nbsp;while&nbsp;Safari&nbsp;and&nbsp;Chrome&nbsp;are&nbsp;giving&nbsp;me&nbsp;the&nbsp;bare&nbsp;minimum,&nbsp;of&nbsp;4&nbsp;timeupdate&nbsp;events&nbsp;per&nbsp;second.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
At&nbsp;4&nbsp;timeupdate&nbsp;events&nbsp;per&nbsp;second,&nbsp;it&nbsp;isn&amp;#39;t&nbsp;all&nbsp;that&nbsp;useful.&nbsp;I&nbsp;can&nbsp;replace&nbsp;it&nbsp;with&nbsp;setInterval,&nbsp;at&nbsp;whatever&nbsp;rate&nbsp;I&nbsp;want,&nbsp;query&nbsp;the&nbsp;time,&nbsp;and&nbsp;get&nbsp;the&nbsp;synchronization&nbsp;I&nbsp;need,&nbsp;but&nbsp;that&nbsp;makes&nbsp;the&nbsp;timeupdate&nbsp;event&nbsp;seem&nbsp;to&nbsp;be&nbsp;redundant.&nbsp;At&nbsp;25&nbsp;timeupdate&nbsp;events&nbsp;per&nbsp;second,&nbsp;it&nbsp;is&nbsp;reasonably&nbsp;useful,&nbsp;and&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;synchronize&nbsp;various&nbsp;things&nbsp;to&nbsp;the&nbsp;video.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
So,&nbsp;I&amp;#39;m&nbsp;wondering&nbsp;if&nbsp;there&amp;#39;s&nbsp;a&nbsp;purpose&nbsp;for&nbsp;the&nbsp;timeupdate&nbsp;event&nbsp;that&nbsp;I&amp;#39;m&nbsp;missing.&nbsp;If&nbsp;it&nbsp;is&nbsp;intended&nbsp;for&nbsp;any&nbsp;sort&nbsp;of&nbsp;synchronization&nbsp;with&nbsp;the&nbsp;video,&nbsp;I&nbsp;think&nbsp;it&nbsp;should&nbsp;be&nbsp;improved&nbsp;to&nbsp;give&nbsp;better&nbsp;guarantees&nbsp;on&nbsp;the&nbsp;interval&nbsp;between&nbsp;updates,&nbsp;or&nbsp;just&nbsp;dropped&nbsp;from&nbsp;the&nbsp;spec;&nbsp;it&amp;#39;s&nbsp;not&nbsp;useful&nbsp;enough&nbsp;in&nbsp;its&nbsp;current&nbsp;form.&nbsp;To&nbsp;improve&nbsp;it,&nbsp;the&nbsp;maximum&nbsp;interval&nbsp;between&nbsp;updates&nbsp;could&nbsp;be&nbsp;reduced&nbsp;to&nbsp;about&nbsp;40&nbsp;ms,&nbsp;or&nbsp;perhaps&nbsp;the&nbsp;interval&nbsp;could&nbsp;be&nbsp;made&nbsp;settable&nbsp;so&nbsp;the&nbsp;author&nbsp;could&nbsp;control&nbsp;how&nbsp;often&nbsp;they&nbsp;want&nbsp;to&nbsp;get&nbsp;the&nbsp;event.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
--&nbsp;Brian&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;believe&nbsp;it&amp;#39;s&nbsp;a&nbsp;convenience&nbsp;over&nbsp;using&nbsp;setTimeout/setInterval&nbsp;+&nbsp;polling&nbsp;to&nbsp;determine&nbsp;whether&nbsp;playback&nbsp;has&nbsp;progressed&nbsp;ie.,&nbsp;for&nbsp;rendering&nbsp;your&nbsp;own&nbsp;playback&nbsp;progress&nbsp;bar.&nbsp; I&amp;#39;ve&nbsp;also&nbsp;seen&nbsp;it&nbsp;been&nbsp;used&nbsp;as&nbsp;a&nbsp;signal&nbsp;to&nbsp;copy&nbsp;frames&nbsp;into&nbsp;&amp;lt;canvas&amp;gt;&nbsp;on&nbsp;Firefox,&nbsp;however&nbsp;if&nbsp;timeupdate&nbsp;frequency&nbsp;!=&nbsp;fps&nbsp;of&nbsp;video&nbsp;you&nbsp;either&nbsp;miss&nbsp;frames&nbsp;or&nbsp;paint&nbsp;too&nbsp;much.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
I&nbsp;don&amp;#39;t&nbsp;think&nbsp;timeupdate&nbsp;today&nbsp;is&nbsp;very&nbsp;useful&nbsp;for&nbsp;doing&nbsp;anything&nbsp;beyond&nbsp;a&nbsp;progress&nbsp;bar&nbsp;or&nbsp;other&nbsp;simple&nbsp;synchronized&nbsp;animations.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
Right.&nbsp;That&amp;#39;s&nbsp;what&nbsp;I&nbsp;figured&nbsp;the&nbsp;point&nbsp;is;&nbsp;I&nbsp;just&nbsp;wanted&nbsp;to&nbsp;check&nbsp;to&nbsp;make&nbsp;sure&nbsp;I&nbsp;wasn&amp;#39;t&nbsp;missing&nbsp;something.&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;implemented&nbsp;by&nbsp;Safari&nbsp;and&nbsp;Chrome&nbsp;(which&nbsp;is&nbsp;the&nbsp;minimum&nbsp;rate&nbsp;allowed&nbsp;by&nbsp;the&nbsp;spec),&nbsp;it&amp;#39;s&nbsp;not&nbsp;really&nbsp;useful&nbsp;for&nbsp;that&nbsp;purpose,&nbsp;as&nbsp;4&nbsp;updates&nbsp;per&nbsp;second&nbsp;makes&nbsp;any&nbsp;sort&nbsp;of&nbsp;synchronization&nbsp;feel&nbsp;jerky&nbsp;and&nbsp;laggy.&nbsp;If&nbsp;it&nbsp;were&nbsp;done&nbsp;at&nbsp;the&nbsp;frame&nbsp;rate&nbsp;of&nbsp;the&nbsp;video,&nbsp;or&nbsp;perhaps&nbsp;with&nbsp;a&nbsp;minimum&nbsp;of&nbsp;25&nbsp;frames&nbsp;per&nbsp;second,&nbsp;it&nbsp;would&nbsp;be&nbsp;much&nbsp;more&nbsp;useful.&nbsp;Even&nbsp;at&nbsp;a&nbsp;minimum&nbsp;of&nbsp;15&nbsp;frames&nbsp;per&nbsp;second,&nbsp;you&nbsp;would&nbsp;still&nbsp;be&nbsp;able&nbsp;to&nbsp;get&nbsp;some&nbsp;sorts&nbsp;of&nbsp;useful&nbsp;synchronization,&nbsp;though&nbsp;animations&nbsp;synchronized&nbsp;wouldn&amp;#39;t&nbsp;feel&nbsp;as&nbsp;smooth&nbsp;as&nbsp;they&nbsp;could.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Would&nbsp;something&nbsp;like&nbsp;&amp;lt;video&amp;gt;&nbsp;firing&nbsp;events&nbsp;for&nbsp;every&nbsp;frame&nbsp;rendered&nbsp;help&nbsp;you&nbsp;out?&nbsp; This&nbsp;would&nbsp;help&nbsp;also&nbsp;fix&nbsp;the&nbsp;&amp;lt;canvas&amp;gt;&nbsp;over/under&nbsp;painting&nbsp;issue&nbsp;and&nbsp;improve&nbsp;synchronization.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
Yes,&nbsp;this&nbsp;would&nbsp;be&nbsp;considerably&nbsp;better&nbsp;than&nbsp;what&nbsp;is&nbsp;currently&nbsp;specced.&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;Brian&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;I&amp;#39;ll&nbsp;see&nbsp;if&nbsp;we&nbsp;can&nbsp;do&nbsp;something&nbsp;for&nbsp;WebKit&nbsp;based&nbsp;browsers,&nbsp;because&nbsp;today&nbsp;it&nbsp;literally&nbsp;is&nbsp;hardcoded&nbsp;to&nbsp;250ms&nbsp;for&nbsp;all&nbsp;ports.&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://trac.webkit.org/browser/trunk/WebCore/html/HTMLMediaElement.cpp#L1254&quot;&gt;http://trac.webkit.org/browser/trunk/WebCore/html/HTMLMediaElement.cpp#L1254&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Maybe&nbsp;we&amp;#39;ll&nbsp;end&nbsp;up&nbsp;firing&nbsp;events&nbsp;based&nbsp;on&nbsp;frame&nbsp;updates&nbsp;for&nbsp;video,&nbsp;and&nbsp;something&nbsp;arbitrary&nbsp;for&nbsp;audio&nbsp;(as&nbsp;it&nbsp;is&nbsp;today).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Brian,&nbsp;since&nbsp;Firefox&nbsp;is&nbsp;doing&nbsp;what&nbsp;you&nbsp;proposed&nbsp;--&nbsp;can&nbsp;you&nbsp;think&nbsp;of&nbsp;any&nbsp;other&nbsp;issues&nbsp;with&nbsp;its&nbsp;current&nbsp;implementation?&nbsp; What&nbsp;about&nbsp;for&nbsp;audio&nbsp;files?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Andrew&lt;/div&gt;<br>

</tt>
