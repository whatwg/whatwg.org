<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Oct&nbsp;7,&nbsp;2008,&nbsp;at&nbsp;4:49&nbsp;PM,&nbsp;Michael&nbsp;Nordman&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Another&nbsp;one...&lt;br&gt;&lt;br&gt;6)&nbsp;The&nbsp;DOMApplicationCache&nbsp;.length&nbsp;and&nbsp;.item(indx)&nbsp;members.&lt;br&gt;&lt;br&gt;These&nbsp;two&nbsp;are&nbsp;troublesome&nbsp;in&nbsp;a&nbsp;multi-threaded&nbsp;/&nbsp;multi-process&nbsp;browser.&nbsp;Can&nbsp;we&nbsp;come&nbsp;up&nbsp;with&nbsp;an&nbsp;interface&nbsp;that's&nbsp;more&nbsp;ammenable&nbsp;to&nbsp;implementation&nbsp;non-single&nbsp;threaded&nbsp;browsers?&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Don't&nbsp;you&nbsp;need&nbsp;to&nbsp;have&nbsp;some&nbsp;particular&nbsp;version&nbsp;of&nbsp;the&nbsp;application&nbsp;cache&nbsp;loaded&nbsp;in&nbsp;the&nbsp;thread&nbsp;or&nbsp;process&nbsp;that&nbsp;is&nbsp;processing&nbsp;the&nbsp;particular&nbsp;web&nbsp;page&nbsp;using&nbsp;these&nbsp;APIs?&nbsp;It&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&nbsp;the&nbsp;application&nbsp;cache's&nbsp;atomic&nbsp;update&nbsp;semantics&nbsp;effectively&nbsp;require&nbsp;that,&nbsp;since&nbsp;loading&nbsp;needs&nbsp;to&nbsp;keep&nbsp;a&nbsp;consistent&nbsp;view&nbsp;of&nbsp;the&nbsp;application&nbsp;cache&nbsp;regardless&nbsp;of&nbsp;changes&nbsp;caused&nbsp;by&nbsp;other&nbsp;pages,&nbsp;so&nbsp;length&nbsp;and&nbsp;item&nbsp;are&nbsp;not&nbsp;an&nbsp;obstacle.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Maciej&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Oct&nbsp;7,&nbsp;2008&nbsp;at&nbsp;2:03&nbsp;PM,&nbsp;Michael&nbsp;Nordman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:michaeln@google.com&quot;&gt;michaeln@google.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&nbsp;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Some&nbsp;more&nbsp;comments&nbsp;for&nbsp;the&nbsp;whatwg&nbsp;bit&nbsp;bucket...&lt;br&gt;&lt;br&gt;1)&nbsp;Foreign&nbsp;entry&nbsp;detection&lt;br&gt;&lt;br&gt;The&nbsp;spec&nbsp;points&nbsp;out&nbsp;an&nbsp;optimization&nbsp;when&nbsp;a&nbsp;foreign&nbsp;entry&nbsp;is&nbsp;discovered&nbsp;at&nbsp;cache-selection&nbsp;time,&nbsp;involving&nbsp;marking&nbsp;the&nbsp;entry&nbsp;as&nbsp;foreign&nbsp;at&nbsp;that&nbsp;time&nbsp;so&nbsp;&nbsp;it&nbsp;will&nbsp;get&nbsp;filtered&nbsp;out&nbsp;of&nbsp;future&nbsp;searches&nbsp;during&nbsp;top-level&nbsp;navigation.&nbsp;Another&nbsp;optimization&nbsp;that&nbsp;could&nbsp;be&nbsp;pointed&nbsp;out&nbsp;is&nbsp;to&nbsp;detect&nbsp;foreign'ness&nbsp;upon&nbsp;insertion&nbsp;into&nbsp;the&nbsp;cache.&lt;br&gt;&nbsp;&lt;br&gt;Really,&nbsp;it&nbsp;may&nbsp;be&nbsp;more&nbsp;clear&nbsp;if&nbsp;the&nbsp;spec&nbsp;were&nbsp;simply&nbsp;spec'd&nbsp;that&nbsp;way&nbsp;rather.&nbsp;The&nbsp;behavior&nbsp;exhibitted&nbsp;by&nbsp;the&nbsp;algorithms&nbsp;described&nbsp;corresponds&nbsp;with&nbsp;'detect&nbsp;on&nbsp;insert',&nbsp;but&nbsp;accomplishes&nbsp;that&nbsp;in&nbsp;a&nbsp;less&nbsp;direct&nbsp;fashion.&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;2)&nbsp;Silent&nbsp;manifest&nbsp;parsing&nbsp;errors&lt;br&gt;&lt;br&gt;The&nbsp;spec&nbsp;goes&nbsp;out&nbsp;of&nbsp;its&nbsp;way&nbsp;to&nbsp;indicate&nbsp;that&nbsp;most&nbsp;errors&nbsp;while&nbsp;parsing&nbsp;the&nbsp;manifest&nbsp;file&nbsp;should&nbsp;be&nbsp;silently&nbsp;eaten.&nbsp;That&nbsp;can't&nbsp;be&nbsp;an&nbsp;accident.&nbsp;What&nbsp;badness&nbsp;is&nbsp;being&nbsp;averted&nbsp;by&nbsp;that&nbsp;behavior?&nbsp;What&nbsp;is&nbsp;trying&nbsp;to&nbsp;be&nbsp;accomplished&nbsp;by&nbsp;that&nbsp;behavior?&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;3)&nbsp;Update&nbsp;algorithm&lt;br&gt;&lt;br&gt;The&nbsp;intent&nbsp;is&nbsp;to&nbsp;grab&nbsp;a&nbsp;coherent&nbsp;set&nbsp;of&nbsp;resources&nbsp;that&nbsp;make&nbsp;up&nbsp;a&nbsp;'version'&nbsp;of&nbsp;the&nbsp;app.&nbsp;No&nbsp;provisions&nbsp;are&nbsp;made&nbsp;to&nbsp;ensure&nbsp;that&nbsp;is&nbsp;what&nbsp;you&nbsp;actually&nbsp;end&nbsp;up&nbsp;with.&nbsp;Say&nbsp;the&nbsp;system&nbsp;starts&nbsp;an&nbsp;update,&nbsp;grabs&nbsp;the&nbsp;manifest&nbsp;file&nbsp;and&nbsp;starts&nbsp;fetching/validating&nbsp;resources.&nbsp;Half&nbsp;way&nbsp;thru,&nbsp;a&nbsp;new&nbsp;manifest&nbsp;file&nbsp;and&nbsp;set&nbsp;of&nbsp;resources&nbsp;lands&nbsp;on&nbsp;the&nbsp;server&nbsp;(or&nbsp;a&nbsp;new&nbsp;server&nbsp;is&nbsp;deployed).&nbsp;You&nbsp;end&nbsp;up&nbsp;with&nbsp;a&nbsp;mixed&nbsp;set&nbsp;of&nbsp;resources&nbsp;on&nbsp;the&nbsp;client.&lt;br&gt;&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;4)&nbsp;Why&nbsp;require&nbsp;text/cache-manifest&nbsp;mimetype?&lt;br&gt;&lt;br&gt;Presents&nbsp;a&nbsp;small&nbsp;hurdle&nbsp;to&nbsp;get&nbsp;over.&nbsp;What&nbsp;is&nbsp;being&nbsp;accomplished&nbsp;with&nbsp;this&nbsp;requirement?&lt;br&gt;&lt;br&gt;&lt;br&gt;5)&nbsp;More&nbsp;thoughts&nbsp;on&nbsp;rephrasing&nbsp;the&nbsp;caching&nbsp;semantics&nbsp;of&nbsp;non-explicit&nbsp;entries&lt;br&gt;&nbsp;&lt;br&gt;To&nbsp;job&nbsp;memories...&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;&gt;&nbsp;One&nbsp;idea&nbsp;is&nbsp;to&nbsp;rephrase&nbsp;this&nbsp;feature&nbsp;in&nbsp;terms&nbsp;closer&nbsp;to&nbsp;std&nbsp;http&nbsp;caching&nbsp;for&lt;br&gt;&nbsp;&gt;&nbsp;all&nbsp;entries&nbsp;that&nbsp;do&nbsp;not&nbsp;explicily&nbsp;appear&nbsp;in&nbsp;the&nbsp;manifest&nbsp;file.&nbsp;In&lt;br&gt;&nbsp;&gt;&nbsp;effect,&nbsp;closer&nbsp;to&nbsp;telling&nbsp;the&nbsp;http&nbsp;cache&nbsp;to&nbsp;not&nbsp;purge&nbsp;the&nbsp;resource.&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;was&nbsp;trading&nbsp;mail&nbsp;with&nbsp;somebody&nbsp;using&nbsp;Gears&nbsp;and&nbsp;this&nbsp;came&nbsp;up.&nbsp;The&nbsp;developer&nbsp;was&nbsp;interested&nbsp;in&nbsp;purging&nbsp;based&nbsp;on&nbsp;LRU&nbsp;when&nbsp;a&nbsp;threshold&nbsp;was&nbsp;exceeded.&nbsp;The&nbsp;app&nbsp;works&nbsp;with&nbsp;a&nbsp;unbounded&nbsp;(for&nbsp;all&nbsp;practical&nbsp;purposes)&nbsp;set&nbsp;of&nbsp;resources&nbsp;that&nbsp;could&nbsp;be&nbsp;cached.&lt;br&gt;&nbsp;&lt;br&gt;If&nbsp;the&nbsp;'contract'&nbsp;for&nbsp;these&nbsp;non-explicit&nbsp;entries&nbsp;required&nbsp;them&nbsp;be&nbsp;purged&nbsp;as&nbsp;quotas&nbsp;are&nbsp;bumped&nbsp;into,&nbsp;that&nbsp;would&nbsp;be&nbsp;ideal&nbsp;for&nbsp;this&nbsp;particular&nbsp;use&nbsp;case.&nbsp;These&nbsp;type&nbsp;of&nbsp;semantics&nbsp;could&nbsp;make&nbsp;a&nbsp;lot&nbsp;of&nbsp;sense&nbsp;for&nbsp;a&nbsp;class&nbsp;of&nbsp;apps&nbsp;like&nbsp;Flickr&nbsp;or&nbsp;PicassaWeg&nbsp;or&nbsp;YouTube.&lt;br&gt;&nbsp;&lt;br&gt;So&nbsp;they&nbsp;don't&nbsp;expire&nbsp;according&nbsp;to&nbsp;normal&nbsp;http&nbsp;caching&nbsp;rules,&nbsp;and&nbsp;they&nbsp;are&nbsp;used&nbsp;as&nbsp;a&nbsp;fallback&nbsp;in&nbsp;the&nbsp;event&nbsp;of&nbsp;errors,&nbsp;but&nbsp;they&nbsp;are&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;there&nbsp;forever&nbsp;unless&nbsp;you&nbsp;stay&nbsp;within&nbsp;a&nbsp;quota.&nbsp;&lt;br&gt;&lt;/div&gt;&nbsp;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
