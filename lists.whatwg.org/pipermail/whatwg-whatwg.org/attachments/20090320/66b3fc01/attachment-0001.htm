<tt>
I&nbsp;agree&nbsp;with&nbsp;Jeremy&nbsp;that&nbsp;the&nbsp;spec&nbsp;is&nbsp;currently&nbsp;unimplementable&nbsp;if&nbsp;we&nbsp;give&nbsp;localStorage&nbsp;access&nbsp;to&nbsp;workers.&nbsp;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;point&nbsp;out&nbsp;that&nbsp;&amp;quot;workers&nbsp;who&nbsp;want&nbsp;to&nbsp;access&nbsp;localStorage&nbsp;just&nbsp;need&nbsp;to&nbsp;send&nbsp;a&nbsp;message&nbsp;to&nbsp;their&nbsp;main&nbsp;window&amp;quot;&nbsp;breaks&nbsp;down&nbsp;for&nbsp;persistent&nbsp;workers&nbsp;(where&nbsp;you&nbsp;don&amp;#39;t&nbsp;necessarily&nbsp;have&nbsp;an&nbsp;open&nbsp;browser&nbsp;window)&nbsp;and&nbsp;is&nbsp;pretty&nbsp;wonky&nbsp;for&nbsp;shared&nbsp;workers&nbsp;(you&nbsp;can&nbsp;send&nbsp;a&nbsp;message&nbsp;to&nbsp;a&nbsp;window,&nbsp;but&nbsp;that&nbsp;window&nbsp;may&nbsp;go&nbsp;away&nbsp;before&nbsp;your&nbsp;message&nbsp;is&nbsp;processed,&nbsp;so&nbsp;you&nbsp;end&nbsp;up&nbsp;having&nbsp;to&nbsp;build&nbsp;some&nbsp;kind&nbsp;of&nbsp;&amp;quot;send&nbsp;message,&nbsp;timeout,&nbsp;pick&nbsp;a&nbsp;new&nbsp;window&nbsp;to&nbsp;send&nbsp;it&nbsp;to,&nbsp;etc&amp;quot;&nbsp;message&nbsp;layer).&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;One&nbsp;alternative&nbsp;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;propose&nbsp;is&nbsp;to&nbsp;remove&nbsp;access&nbsp;to&nbsp;localStorage&nbsp;for&nbsp;dedicated&nbsp;workers,&nbsp;and&nbsp;give&nbsp;SharedWorkers&nbsp;access&nbsp;to&nbsp;localStorage,&nbsp;but&nbsp;have&nbsp;that&nbsp;storage&nbsp;be&nbsp;partitioned&nbsp;by&nbsp;the&nbsp;worker&nbsp;name&nbsp;(i.e.&nbsp;the&nbsp;worker&nbsp;can&nbsp;access&nbsp;it,&nbsp;but&nbsp;it&amp;#39;s&nbsp;not&nbsp;shared&nbsp;with&nbsp;web&nbsp;pages&nbsp;or&nbsp;any&nbsp;other&nbsp;workers&nbsp;and&nbsp;so&nbsp;you&nbsp;don&amp;#39;t&nbsp;have&nbsp;any&nbsp;synchronicity&nbsp;issues).&nbsp;I&nbsp;don&amp;#39;t&nbsp;see&nbsp;how&nbsp;this&nbsp;would&nbsp;work&nbsp;for&nbsp;dedicated&nbsp;workers,&nbsp;though,&nbsp;since&nbsp;there&amp;#39;s&nbsp;no&nbsp;name&nbsp;to&nbsp;partition&nbsp;storage&nbsp;access,&nbsp;but&nbsp;they&nbsp;could&nbsp;always&nbsp;fall&nbsp;back&nbsp;to&nbsp;postMessage().&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;-atw&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;20,&nbsp;2009&nbsp;at&nbsp;2:19&nbsp;PM,&nbsp;Oliver&nbsp;Hunt&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:oliver@apple.com&quot;&gt;oliver@apple.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
When&nbsp;discussing&nbsp;this&nbsp;standard&nbsp;we&nbsp;have&nbsp;to&nbsp;recognize&nbsp;that&nbsp;not&nbsp;all&lt;br&gt;<br>
browsers&nbsp;actually&nbsp;have&nbsp;a&nbsp;&amp;quot;main&nbsp;thread&amp;quot;.&nbsp;Time&nbsp;will&nbsp;tell&nbsp;if&nbsp;more&nbsp;or&nbsp;less&lt;br&gt;<br>
browsers&nbsp;of&nbsp;the&nbsp;future&nbsp;will&nbsp;have&nbsp;multi-threaded&nbsp;architectures,&nbsp;but&nbsp;the&lt;br&gt;<br>
trend&nbsp;has&nbsp;been&nbsp;for&nbsp;more&nbsp;I&nbsp;think.&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;aspects&nbsp;of&nbsp;the&nbsp;spec&nbsp;that&nbsp;asserts&nbsp;or&nbsp;assumes&nbsp;a&nbsp;&amp;quot;main&nbsp;thread&amp;quot;&nbsp;is&nbsp;questionable.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Yes&nbsp;they&nbsp;do&nbsp;--&nbsp;we&amp;#39;re&nbsp;talking&nbsp;about&nbsp;the&nbsp;main&nbsp;thread&nbsp;from&nbsp;the&nbsp;point&nbsp;of&nbsp;view&nbsp;of&nbsp;javascript,&nbsp;which&nbsp;is&nbsp;not&nbsp;necessarily&nbsp;the&nbsp;UI&nbsp;thread.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;important&nbsp;thing&nbsp;is&nbsp;that&nbsp;with&nbsp;the&nbsp;current&nbsp;model&nbsp;is&nbsp;that&nbsp;JS&nbsp;on&nbsp;any&nbsp;thread&nbsp;may&nbsp;be&nbsp;blocked&nbsp;by&nbsp;js&nbsp;executing&nbsp;in&nbsp;a&nbsp;worker,&nbsp;which&nbsp;leads&nbsp;to&nbsp;a&nbsp;page&nbsp;(in&nbsp;effect)&nbsp;locking&nbsp;up&nbsp;--&nbsp;the&nbsp;UI&nbsp;may&nbsp;still&nbsp;be&nbsp;functional&nbsp;but&nbsp;that&nbsp;particular&nbsp;page&nbsp;will&nbsp;have&nbsp;hung.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;br&gt;<br>
--Oliver&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
