<tt>
&lt;div&gt;&lt;b&gt;Maciej&nbsp;Stachowiak&nbsp;wrote:&lt;/b&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;pre&gt;Now&nbsp;that&nbsp;Google&nbsp;Gears&nbsp;&lt;&lt;a&nbsp;href=&quot;http://gears.google.com/&quot;&gt;<br>
http://gears.google.com/&lt;/a&gt;&gt;&nbsp;has&nbsp;been&nbsp;announced,&nbsp;&nbsp;&lt;br&gt;I&#39;d&nbsp;like&nbsp;to&nbsp;see&nbsp;the&nbsp;features&nbsp;in&nbsp;it&nbsp;added&nbsp;to&nbsp;the&nbsp;HTML5&nbsp;spec,&nbsp;since&nbsp;&nbsp;&lt;br&gt;these&nbsp;are&nbsp;features&nbsp;that&nbsp;should&nbsp;ultimately&nbsp;be&nbsp;a&nbsp;part&nbsp;of&nbsp;basic&nbsp;web&nbsp;&nbsp;&lt;br&gt;technology,&nbsp;not&nbsp;an&nbsp;extension.<br>
&lt;br&gt;&lt;/pre&gt;&lt;/blockquote&gt;Agreed...&lt;br&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;pre&gt;Ian&nbsp;has&nbsp;already&nbsp;added&nbsp;a&nbsp;SQL&nbsp;API&nbsp;which&nbsp;is&nbsp;functionally&nbsp;more&nbsp;or&nbsp;less&nbsp;&nbsp;<br>
&lt;br&gt;equivalent&nbsp;to&nbsp;the&nbsp;Database&nbsp;module&nbsp;&lt;&lt;a&nbsp;href=&quot;http://code.google.com/apis/gears/&quot;&gt;http://code.google.com/apis/gears/&lt;/a&gt;&nbsp;&lt;br&gt;api_database.html&gt;&nbsp;to&nbsp;the&nbsp;HTML5&nbsp;spec,&nbsp;here:&nbsp;&lt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/&quot;&gt;http://www.whatwg.org/<br>
&lt;/a&gt;&nbsp;&lt;br&gt;specs/web-apps/current-work/multipage/section-sql.html&gt;&lt;/pre&gt;&lt;/blockquote&gt;That&nbsp;is&nbsp;sudden&nbsp;:-).&nbsp;Specifying&nbsp;the&nbsp;SQL&nbsp;dialect&nbsp;precisely&nbsp;will&nbsp;be&nbsp;very&nbsp;important&nbsp;here.&nbsp;Someone&nbsp;also&nbsp;has&nbsp;to&nbsp;investigate&nbsp;carefully&nbsp;the&nbsp;issues&nbsp;around&nbsp;exposing&nbsp;SQL&nbsp;to&nbsp;untrusted&nbsp;content.&nbsp;Could&nbsp;be&nbsp;some&nbsp;fun&nbsp;denial&nbsp;of&nbsp;service&nbsp;attacks&nbsp;there.<br>
&lt;br&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;pre&gt;Conversely&nbsp;maybe&nbsp;something&nbsp;can&nbsp;be&nbsp;done&nbsp;to&nbsp;make&nbsp;them&nbsp;integrate&nbsp;better,&nbsp;&nbsp;&lt;br&gt;perhaps&nbsp;the&nbsp;Storage&nbsp;items&nbsp;appear&nbsp;as&nbsp;a&nbsp;table&nbsp;via&nbsp;the&nbsp;SQL&nbsp;API,&nbsp;in&nbsp;which&nbsp;&nbsp;<br>
&lt;br&gt;case&nbsp;most&nbsp;of&nbsp;the&nbsp;Storage&nbsp;calls&nbsp;are&nbsp;just&nbsp;a&nbsp;convenience&nbsp;interface,&nbsp;but&nbsp;&nbsp;&lt;br&gt;you&nbsp;can&nbsp;still&nbsp;do&nbsp;queries&nbsp;on&nbsp;the&nbsp;same&nbsp;data.&lt;/pre&gt;&lt;/blockquote&gt;Sounds&nbsp;reasonable.&lt;br&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
&lt;pre&gt;I&nbsp;know&nbsp;Mozilla&nbsp;has&nbsp;considered&nbsp;other&nbsp;approaches&nbsp;to&nbsp;offline&nbsp;web&nbsp;apps,&nbsp;&nbsp;&lt;br&gt;but&nbsp;I&nbsp;think&nbsp;the&nbsp;LocalServer&nbsp;type&nbsp;approach&nbsp;seems&nbsp;cleaner&nbsp;than&nbsp;&nbsp;&lt;br&gt;Mozilla&#39;s&nbsp;JAR&nbsp;file&nbsp;plan,&nbsp;since&nbsp;it&nbsp;is&nbsp;much&nbsp;more&nbsp;transparent&nbsp;and&nbsp;allows&nbsp;&nbsp;&lt;br&gt;<br>
local&nbsp;resource&nbsp;caching&nbsp;to&nbsp;be&nbsp;decoupled&nbsp;from&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;web&nbsp;app.&lt;br&gt;&lt;/pre&gt;&lt;/blockquote&gt;JAR&nbsp;files&nbsp;can&nbsp;be&nbsp;fairly&nbsp;transparent&nbsp;...&nbsp;you&nbsp;can&nbsp;redirect&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://foo.com/foo/index.html&quot;&gt;http://foo.com/foo/index.html<br>
&lt;/a&gt;&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;http://foo.com/foo.jar!/index.html&quot;&gt;http://foo.com/foo.jar!/index.html&lt;/a&gt;,&nbsp;if&nbsp;appropriate,&nbsp;and&nbsp;use&nbsp;relative&nbsp;URIs&nbsp;in&nbsp;your&nbsp;app&nbsp;so&nbsp;the&nbsp;same&nbsp;versions&nbsp;work&nbsp;in&nbsp;both&nbsp;cases.&nbsp;On&nbsp;the&nbsp;server&nbsp;side,&nbsp;maintaining&nbsp;a&nbsp;manifest&nbsp;isn&#39;t&nbsp;much&nbsp;different&nbsp;from&nbsp;maintaining&nbsp;a&nbsp;JAR.&nbsp;True,&nbsp;having&nbsp;different&nbsp;URLs&nbsp;for&nbsp;different&nbsp;browsers&nbsp;---&nbsp;or&nbsp;for&nbsp;the&nbsp;same&nbsp;browser,&nbsp;in&nbsp;different&nbsp;modes&nbsp;---&nbsp;could&nbsp;be&nbsp;a&nbsp;hassle.&nbsp;On&nbsp;the&nbsp;plus&nbsp;side,&nbsp;JAR&nbsp;files&nbsp;make&nbsp;versioning&nbsp;and&nbsp;and&nbsp;consistency&nbsp;incredibly&nbsp;simple.&nbsp;It&#39;s&nbsp;not&nbsp;clear&nbsp;what&nbsp;the&nbsp;Gears&nbsp;ManagedStore&nbsp;does&nbsp;if&nbsp;it&nbsp;gets&nbsp;a&nbsp;404&nbsp;or&nbsp;some&nbsp;other&nbsp;error&nbsp;during&nbsp;an&nbsp;update.<br>
&lt;br&gt;&lt;br&gt;Other&nbsp;issues&nbsp;with&nbsp;the&nbsp;Gears&nbsp;API:&lt;br&gt;--&nbsp;The&nbsp;ManagedStore&nbsp;approach&nbsp;seems&nbsp;to&nbsp;have&nbsp;a&nbsp;problem&nbsp;in&nbsp;the&nbsp;following&nbsp;situation:&nbsp;Suppose&nbsp;an&nbsp;app&nbsp;is&nbsp;updated&nbsp;on&nbsp;the&nbsp;server&nbsp;overnight&nbsp;and&nbsp;I&nbsp;visit&nbsp;the&nbsp;main&nbsp;page&nbsp;in&nbsp;the&nbsp;morning.&nbsp;It&nbsp;starts&nbsp;loading&nbsp;other&nbsp;resources.&nbsp;&nbsp;ManagedStore&nbsp;is&nbsp;going&nbsp;to&nbsp;check&nbsp;the&nbsp;manifest,&nbsp;find&nbsp;that&nbsp;the&nbsp;app&nbsp;needs&nbsp;to&nbsp;be&nbsp;updated,&nbsp;pull&nbsp;down&nbsp;the&nbsp;new&nbsp;resources,&nbsp;and&nbsp;flip&nbsp;to&nbsp;the&nbsp;new&nbsp;version&nbsp;---&nbsp;more&nbsp;than&nbsp;likely&nbsp;while&nbsp;the&nbsp;app&nbsp;is&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;loading.&nbsp;Sure,&nbsp;this&nbsp;could&nbsp;happen&nbsp;normally&nbsp;if&nbsp;I&nbsp;hit&nbsp;the&nbsp;site&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;night&nbsp;at&nbsp;the&nbsp;switchover,&nbsp;but&nbsp;ManagedStore&nbsp;makes&nbsp;this&nbsp;uncommon&nbsp;case&nbsp;common.&nbsp;(This&nbsp;is&nbsp;Dave&nbsp;Camp&#39;s&nbsp;example.)<br>
&lt;br&gt;--&nbsp;I&nbsp;think&nbsp;making&nbsp;ResourceStore&nbsp;writable&nbsp;by&nbsp;clients&nbsp;is&nbsp;unnecessary&nbsp;complexity.&nbsp;It&#39;s&nbsp;much&nbsp;simpler&nbsp;to&nbsp;maintain&nbsp;the&nbsp;model&nbsp;that&nbsp;the&nbsp;LocalServer/offline&nbsp;cache&nbsp;is&nbsp;really&nbsp;just&nbsp;a&nbsp;cache&nbsp;of&nbsp;the&nbsp;Web.&nbsp;Then&nbsp;there&nbsp;are&nbsp;no&nbsp;issues&nbsp;with&nbsp;enabling/disablings&nbsp;stores,&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;to&nbsp;add&nbsp;domain&nbsp;restrictions&nbsp;or&nbsp;requiredCookie&nbsp;(<br>
i.e.&nbsp;potential&nbsp;security&nbsp;holes)&nbsp;so&nbsp;that&nbsp;different&nbsp;apps&nbsp;can&#39;t&nbsp;tread&nbsp;on&nbsp;each&nbsp;other&#39;s&nbsp;resources.&nbsp;(So&nbsp;apps&nbsp;that&nbsp;want&nbsp;to&nbsp;refer&nbsp;to&nbsp;a&nbsp;canonical&nbsp;source&nbsp;for&nbsp;JS&nbsp;library&nbsp;files&nbsp;or&nbsp;whatever&nbsp;can&nbsp;still&nbsp;work.)&nbsp;For&nbsp;file&nbsp;uploads,&nbsp;I&nbsp;think&nbsp;we&nbsp;should&nbsp;just&nbsp;have&nbsp;a&nbsp;DOM&nbsp;API&nbsp;on&nbsp;form&nbsp;control&nbsp;elements&nbsp;that&nbsp;reads&nbsp;the&nbsp;file&nbsp;data&nbsp;into&nbsp;a&nbsp;binary&nbsp;blob&nbsp;of&nbsp;some&nbsp;sort&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;stored&nbsp;in&nbsp;Storage&nbsp;or&nbsp;SQL.<br>
&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;I&nbsp;think&nbsp;we&#39;re&nbsp;still&nbsp;willing&nbsp;to&nbsp;alter&nbsp;our&nbsp;API,&nbsp;but&nbsp;we&nbsp;want&nbsp;to&nbsp;stick&nbsp;with&nbsp;the&nbsp;simple&nbsp;conceptual&nbsp;model&nbsp;we&nbsp;currently&nbsp;have:&nbsp;a&nbsp;single&nbsp;read-only&nbsp;offline&nbsp;cache&nbsp;that&nbsp;requires&nbsp;minimal&nbsp;management.&nbsp;Perhaps&nbsp;we&nbsp;could&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;get&nbsp;versioning&nbsp;and&nbsp;consistency&nbsp;without&nbsp;using&nbsp;JARs.&nbsp;<br>
E.g.,&nbsp;we&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;add&nbsp;an&nbsp;API&nbsp;that&nbsp;reads&nbsp;a&nbsp;Gears-style&nbsp;manifest&nbsp;and&nbsp;does&nbsp;an&nbsp;atomic&nbsp;update&nbsp;of&nbsp;the&nbsp;offline&nbsp;cache&nbsp;from&nbsp;it.&lt;br&gt;&lt;br&gt;Rob&lt;br&gt;--&nbsp;&lt;br&gt;&quot;Two&nbsp;men&nbsp;owed&nbsp;money&nbsp;to&nbsp;a&nbsp;certain&nbsp;moneylender.&nbsp;One&nbsp;owed&nbsp;him&nbsp;five&nbsp;hundred&nbsp;denarii,&nbsp;and&nbsp;the&nbsp;other&nbsp;fifty.&nbsp;Neither&nbsp;of&nbsp;them&nbsp;had&nbsp;the&nbsp;money&nbsp;to&nbsp;pay&nbsp;him&nbsp;back,&nbsp;so&nbsp;he&nbsp;canceled&nbsp;the&nbsp;debts&nbsp;of&nbsp;both.&nbsp;Now&nbsp;which&nbsp;of&nbsp;them&nbsp;will&nbsp;love&nbsp;him&nbsp;more?&quot;&nbsp;Simon&nbsp;replied,&nbsp;&quot;I&nbsp;suppose&nbsp;the&nbsp;one&nbsp;who&nbsp;had&nbsp;the&nbsp;bigger&nbsp;debt&nbsp;canceled.&quot;&nbsp;&quot;You&nbsp;have&nbsp;judged&nbsp;correctly,&quot;&nbsp;Jesus&nbsp;said.&nbsp;[Luke&nbsp;7:41-43]<br>

</tt>
