<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;<br>
&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Sep&nbsp;22,&nbsp;2007,&nbsp;at&nbsp;9:32&nbsp;AM,&nbsp;Aaron&nbsp;Boodman&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;agree&nbsp;with&nbsp;both&nbsp;Maciej's&nbsp;points,&nbsp;and&nbsp;want&nbsp;the&nbsp;second&nbsp;one&nbsp;more&nbsp;than&nbsp;he&nbsp;did.&lt;br&gt;&lt;br&gt;Additional&nbsp;comments:&lt;br&gt;&lt;br&gt;4.12.3,&nbsp;step&nbsp;3:&lt;br&gt;&lt;br&gt;I&nbsp;don't&nbsp;think&nbsp;you&nbsp;should&nbsp;implicitly&nbsp;join&nbsp;active&nbsp;transactions&nbsp;unless&lt;br&gt;you're&nbsp;inside&nbsp;a&nbsp;callback&nbsp;from&nbsp;a&nbsp;previous&nbsp;executeSql&nbsp;call.&nbsp;Otherwise&lt;br&gt;all&nbsp;code&nbsp;that&nbsp;wants&nbsp;to&nbsp;call&nbsp;executeSql&nbsp;needs&nbsp;to&nbsp;know&nbsp;about&nbsp;all&nbsp;other&lt;br&gt;code&nbsp;using&nbsp;it&nbsp;and&nbsp;know&nbsp;to&nbsp;wait&nbsp;if&nbsp;it&nbsp;wants&nbsp;isolation.&nbsp;In&nbsp;the&nbsp;case&lt;br&gt;where&nbsp;you're&nbsp;a&nbsp;top-level&nbsp;call&nbsp;to&nbsp;executeSql,&nbsp;you&nbsp;should&nbsp;start&nbsp;a&nbsp;new&lt;br&gt;transaction.&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;a&nbsp;little&nbsp;unclear,&nbsp;but&nbsp;I&nbsp;think&nbsp;the&nbsp;spec&nbsp;has&nbsp;the&nbsp;behavior&nbsp;you&nbsp;suggest&nbsp;already.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;a&nbsp;distinction&nbsp;between&nbsp;&quot;transaction&quot;,&nbsp;which&nbsp;is&nbsp;essentially&nbsp;a&nbsp;local&nbsp;variable&nbsp;to&nbsp;a&nbsp;specific&nbsp;pass&nbsp;through&nbsp;the&nbsp;algorithm,&nbsp;and&nbsp;the&nbsp;&quot;active&nbsp;thread-global&nbsp;transaction&quot;.&nbsp;&quot;transaction&quot;&nbsp;is&nbsp;set&nbsp;in&nbsp;step&nbsp;3,&nbsp;but&nbsp;the&nbsp;&quot;active&nbsp;thread-global&nbsp;transaction&quot;&nbsp;is&nbsp;not&nbsp;set&nbsp;until&nbsp;step&nbsp;8,&nbsp;which&nbsp;is&nbsp;after&nbsp;the&nbsp;method&nbsp;has&nbsp;returned&nbsp;and&nbsp;when&nbsp;you&nbsp;are&nbsp;about&nbsp;to&nbsp;dispatch&nbsp;the&nbsp;callback,&nbsp;and&nbsp;is&nbsp;cleared&nbsp;after&nbsp;the&nbsp;callback&nbsp;is&nbsp;dispatched.&nbsp;However,&nbsp;this&nbsp;is&nbsp;less&nbsp;than&nbsp;perfectly&nbsp;clear&nbsp;in&nbsp;the&nbsp;spec,&nbsp;as&nbsp;you&nbsp;were&nbsp;not&nbsp;the&nbsp;only&nbsp;one&nbsp;confused&nbsp;on&nbsp;this&nbsp;point.&nbsp;I&nbsp;think&nbsp;the&nbsp;spec&nbsp;could&nbsp;make&nbsp;this&nbsp;more&nbsp;clear.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree&nbsp;with&nbsp;the&nbsp;remainder&nbsp;of&nbsp;your&nbsp;comments&nbsp;(which&nbsp;I&nbsp;omitted).&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;Another&nbsp;comment:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;Sometimes&nbsp;it's&nbsp;useful&nbsp;to&nbsp;schedule&nbsp;multiple&nbsp;SQL&nbsp;queries&nbsp;in&nbsp;a&nbsp;single&nbsp;transaction&nbsp;at&nbsp;once,&nbsp;without&nbsp;a&nbsp;separate&nbsp;async&nbsp;callback&nbsp;for&nbsp;each.&nbsp;We&nbsp;discussed&nbsp;possible&nbsp;syntax&nbsp;something&nbsp;like&nbsp;the&nbsp;following:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;void&nbsp;executeSql(in&nbsp;sequence&lt;Object&gt;&nbsp;sqlStatements,&nbsp;in&nbsp;SQLMultiCallback&nbsp;callback);&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;sqlStatements&nbsp;is&nbsp;an&nbsp;Array&nbsp;where&nbsp;each&nbsp;element&nbsp;is&nbsp;either&nbsp;a&nbsp;string&nbsp;or&nbsp;an&nbsp;array.&nbsp;If&nbsp;a&nbsp;string,&nbsp;it&nbsp;is&nbsp;strated&nbsp;as&nbsp;a&nbsp;standalone&nbsp;statement.&nbsp;If&nbsp;an&nbsp;array,&nbsp;it&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;that&nbsp;nested&nbsp;array&nbsp;is&nbsp;a&nbsp;statement&nbsp;with&nbsp;?&nbsp;slots&nbsp;for&nbsp;parameter&nbsp;substitution&nbsp;and&nbsp;the&nbsp;remainder&nbsp;of&nbsp;the&nbsp;elements&nbsp;are&nbsp;arrays.&nbsp;SQLMultiCallback&nbsp;is&nbsp;like&nbsp;SQLCallback&nbsp;but&nbsp;gets&nbsp;an&nbsp;array&nbsp;of&nbsp;ResultSets.&nbsp;Example:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;db.executeSql(['INSERT&nbsp;INTO&nbsp;&quot;db1&quot;&nbsp;(&quot;column1&quot;)&nbsp;VALUES&nbsp;(&quot;value1&quot;)',&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Arial;&nbsp;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&nbsp;&quot;&gt;UPDATE&nbsp;&quot;counter&quot;&nbsp;SET&nbsp;&quot;version&quot;&nbsp;=&nbsp;?&nbsp;WHERE&nbsp;&quot;version&quot;&nbsp;=&nbsp;?',&nbsp;v&nbsp;+&nbsp;1,&nbsp;v]],&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;function&nbsp;(resultArray)&nbsp;{&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...&nbsp;do&nbsp;stuff&nbsp;...&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;});&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;Otherwise,&nbsp;there's&nbsp;no&nbsp;way&nbsp;to&nbsp;put&nbsp;multiple&nbsp;independent&nbsp;statements&nbsp;inside&nbsp;a&nbsp;transaction&nbsp;from&nbsp;top&nbsp;level.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;Regards,&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;Maciej&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;3&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;13px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;10px;&nbsp;-webkit-border-vertical-spacing:&nbsp;10px;&quot;&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
