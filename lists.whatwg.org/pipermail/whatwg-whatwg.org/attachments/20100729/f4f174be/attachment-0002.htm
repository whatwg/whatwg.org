<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;29,&nbsp;2010&nbsp;at&nbsp;10:57&nbsp;AM,&nbsp;Nicholas&nbsp;Zakas&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:nzakas@yahoo-inc.com&quot;&nbsp;target=&quot;_blank&quot;&gt;nzakas@yahoo-inc.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
&lt;div&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;purple&quot;&nbsp;lang=&quot;EN-US&quot;&gt;&lt;div&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;   &nbsp;setter&nbsp;creator&nbsp;void&nbsp;setItem(in&nbsp;DOMString<br>
key,&nbsp;in&nbsp;any&nbsp;data,&nbsp;[Optional]&nbsp;in&nbsp;unsigned&nbsp;long&nbsp;ttl);&lt;/span&gt;&lt;/font&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;The&nbsp;third&nbsp;argument&nbsp;is&nbsp;a&nbsp;TTL&nbsp;specifying&nbsp;how&nbsp;long,&nbsp;in<br>
milliseconds,&nbsp;the&nbsp;data&nbsp;should&nbsp;be&nbsp;stored&nbsp;in&nbsp;sessionStorage/localStorage.&nbsp;Some<br>
proposed&nbsp;implementation&nbsp;details:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;*&nbsp;A&nbsp;TTL&nbsp;of&nbsp;0&nbsp;is&nbsp;considered&nbsp;invalid&nbsp;and&nbsp;ignored,&nbsp;as&nbsp;is&nbsp;any<br>
value&nbsp;less&nbsp;than&nbsp;0.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;immediately&nbsp;remove&nbsp;a&nbsp;key,&nbsp;it&nbsp;should&nbsp;be&nbsp;done<br>
via&nbsp;removeItem().&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;*&nbsp;The&nbsp;TTL&nbsp;for&nbsp;a&nbsp;key&nbsp;may&nbsp;be&nbsp;changed&nbsp;each&nbsp;time&nbsp;setItem()&nbsp;is<br>
called,&nbsp;with&nbsp;the&nbsp;new&nbsp;TTL&nbsp;overwriting&nbsp;the&nbsp;old&nbsp;one.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;*&nbsp;If&nbsp;a&nbsp;TTL&nbsp;was&nbsp;previously&nbsp;set,&nbsp;and&nbsp;then&nbsp;a&nbsp;new&nbsp;TTL&nbsp;is&nbsp;not<br>
provided&nbsp;on&nbsp;a&nbsp;subsequent&nbsp;call&nbsp;to&nbsp;setItem(),&nbsp;then&nbsp;the&nbsp;original&nbsp;TTL&nbsp;remains.&nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;*&nbsp;If&nbsp;a&nbsp;TTL&nbsp;was&nbsp;previously&nbsp;set,&nbsp;and&nbsp;another&nbsp;call&nbsp;is&nbsp;made&nbsp;to<br>
setItem()&nbsp;that&nbsp;contains&nbsp;an&nbsp;invalid&nbsp;TTL&nbsp;(&lt;=&nbsp;0),&nbsp;then&nbsp;the&nbsp;original&nbsp;TTL<br>
remains.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;*&nbsp;To&nbsp;remove&nbsp;a&nbsp;previously&nbsp;set&nbsp;TTL,&nbsp;you&nbsp;must&nbsp;call&nbsp;removeItem()<br>
to&nbsp;completely&nbsp;remove&nbsp;the&nbsp;key&nbsp;and&nbsp;then&nbsp;re-add&nbsp;using&nbsp;setItem().&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;*&nbsp;Adding&nbsp;a&nbsp;third&nbsp;argument&nbsp;means&nbsp;the&nbsp;length&nbsp;property&nbsp;of<br>
setItem&nbsp;will&nbsp;be&nbsp;3,&nbsp;so&nbsp;developers&nbsp;can&nbsp;check&nbsp;for&nbsp;support&nbsp;of&nbsp;this&nbsp;feature&nbsp;using&nbsp;(localStorage.setItem.length<br>
&gt;&nbsp;2).&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&nbsp;font-family:&nbsp;Arial;&quot;&gt;*&nbsp;The&nbsp;TTL&nbsp;is&nbsp;valid&nbsp;for&nbsp;both&nbsp;sessionStorage&nbsp;and&nbsp;localStorage,<br>
but&nbsp;more&nbsp;important&nbsp;for&nbsp;localStorage.&nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;I<br>
&nbsp;like&nbsp;this&nbsp;idea.&nbsp;It&nbsp;would&nbsp;help&nbsp;deal&nbsp;with&nbsp;orphaned&nbsp;data&nbsp;that&nbsp;was&nbsp;written&nbsp;<br>
by&nbsp;a&nbsp;site,&nbsp;but&nbsp;was&nbsp;never&nbsp;removed&nbsp;or&nbsp;used&nbsp;after&nbsp;a&nbsp;change&nbsp;in&nbsp;the&nbsp;site.&lt;br&gt;<br>
&lt;br&gt;It&nbsp;seems&nbsp;that&nbsp;there&nbsp;should&nbsp;be&nbsp;a&nbsp;way&nbsp;to&nbsp;change&nbsp;a&nbsp;TTL&nbsp;without&nbsp;having&nbsp;<br>
to&nbsp;load&nbsp;and&nbsp;set&nbsp;the&nbsp;value&nbsp;data&nbsp;again,&nbsp;or&nbsp;remove&nbsp;a&nbsp;TTL&nbsp;without&nbsp;having&nbsp;to&nbsp;<br>
remove&nbsp;the&nbsp;key&nbsp;and&nbsp;re-add&nbsp;it.&nbsp;While&nbsp;it&nbsp;might&nbsp;not&nbsp;be&nbsp;too&nbsp;bad&nbsp;to&nbsp;remove&nbsp;a&nbsp;<br>
single&nbsp;key&nbsp;and&nbsp;re-add&nbsp;it,&nbsp;it&nbsp;becomes&nbsp;a&nbsp;nuisance&nbsp;to&nbsp;remove&nbsp;the&nbsp;TTL&nbsp;on&nbsp;<br>
many&nbsp;keys&nbsp;by&nbsp;loading,&nbsp;removing,&nbsp;and&nbsp;re-adding&nbsp;each&nbsp;key.&nbsp;I&#39;m&nbsp;thinking&nbsp;of&nbsp;<br>
scenarios&nbsp;where&nbsp;localStorage&nbsp;may&nbsp;be&nbsp;used&nbsp;to&nbsp;locally&nbsp;cache&nbsp;data&nbsp;for&nbsp;a&nbsp;<br>
user&nbsp;(e.g.&nbsp;an&nbsp;email&nbsp;client)&nbsp;where&nbsp;the&nbsp;user&nbsp;may&nbsp;have&nbsp;the&nbsp;option&nbsp;to&nbsp;choose<br>
&nbsp;to&nbsp;keep&nbsp;the&nbsp;data&nbsp;for&nbsp;1&nbsp;week,&nbsp;1&nbsp;month,&nbsp;etc.&nbsp;If&nbsp;the&nbsp;user&nbsp;choose&nbsp;to&nbsp;change<br>
&nbsp;the&nbsp;caching&nbsp;duration&nbsp;then&nbsp;the&nbsp;browser&nbsp;may&nbsp;have&nbsp;to&nbsp;load&nbsp;and&nbsp;set&nbsp;5MB&nbsp;of&nbsp;<br>
data,&nbsp;just&nbsp;to&nbsp;update&nbsp;the&nbsp;TTLs.&lt;br&gt;<br>
&lt;br&gt;My&nbsp;thought&nbsp;is&nbsp;that&nbsp;to&nbsp;remove&nbsp;a&nbsp;TTL&nbsp;we&nbsp;could&nbsp;either&nbsp;pass&nbsp;&nbsp;-1&nbsp;(any&nbsp;<br>
negative&nbsp;number&nbsp;perhaps)&nbsp;to&nbsp;the&nbsp;function&nbsp;to&nbsp;reset&nbsp;the&nbsp;TTL,&nbsp;or&nbsp;use&nbsp;an&nbsp;<br>
empty&nbsp;value&nbsp;(null&nbsp;or&nbsp;&quot;&quot;).&nbsp;To&nbsp;just&nbsp;change&nbsp;a&nbsp;TTL&nbsp;without&nbsp;changing&nbsp;the&nbsp;<br>
key/value&nbsp;we&nbsp;may&nbsp;consider&nbsp;making&nbsp;the&nbsp;second&nbsp;parameter&nbsp;optional&nbsp;as&nbsp;well,&nbsp;<br>
although&nbsp;I&#39;m&nbsp;not&nbsp;in&nbsp;love&nbsp;with&nbsp;that&nbsp;idea.&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;br&gt;&lt;/font&gt;Paul&nbsp;Ellis<br>

</tt>
