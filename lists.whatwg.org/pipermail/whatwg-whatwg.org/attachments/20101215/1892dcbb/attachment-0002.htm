<tt>
Sorry&nbsp;for&nbsp;the&nbsp;delayed&nbsp;reply.&nbsp; I&nbsp;sent&nbsp;a&nbsp;number&nbsp;of&nbsp;responses&nbsp;over&nbsp;the&nbsp;past&nbsp;week,&nbsp;but&nbsp;it&nbsp;just&nbsp;came&nbsp;to&nbsp;my&nbsp;attention&nbsp;that&nbsp;due&nbsp;to&nbsp;some&nbsp;kind&nbsp;of&nbsp;mailing-list&nbsp;snafu,&nbsp;they&nbsp;never&nbsp;actually&nbsp;were&nbsp;sent&nbsp;out.&nbsp; I&#39;ve&nbsp;attempted&nbsp;to&nbsp;bring&nbsp;all&nbsp;of&nbsp;my&nbsp;replies&nbsp;into&nbsp;this&nbsp;one&nbsp;message.&nbsp; Sorry&nbsp;for&nbsp;the&nbsp;impression&nbsp;that&nbsp;I&nbsp;had&nbsp;abandoned&nbsp;this&nbsp;thread--that&nbsp;was&nbsp;not&nbsp;my&nbsp;intention!&lt;div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regarding&nbsp;the&nbsp;fact&nbsp;that&nbsp;background&nbsp;tabs&nbsp;aren&#39;t&nbsp;necessarily&nbsp;invisible:&lt;/div&gt;&lt;div&gt;-----&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
<br>
On&nbsp;December&nbsp;8,&nbsp;Boris&nbsp;Zbarsky&nbsp;wrote:&lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(80,&nbsp;0,&nbsp;80);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;There&nbsp;is&nbsp;no&nbsp;such&nbsp;guarantee&nbsp;for&nbsp;background&nbsp;tabs.&nbsp; For&nbsp;example,&nbsp;browsers&nbsp;may&nbsp;show&nbsp;tab&nbsp;previews&nbsp;in&nbsp;various&nbsp;contexts&nbsp;(Panorama&nbsp;in&nbsp;Firefox&nbsp;4,&nbsp;e.g.).&lt;/span&gt;&lt;/blockquote&gt;<br>
<br>
&lt;div&gt;-----&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;div&gt;The&nbsp;point&nbsp;of&nbsp;the&nbsp;API,&nbsp;as&nbsp;proposed,&nbsp;is&nbsp;that&nbsp;page&nbsp;scripts&nbsp;will&nbsp;know&nbsp;when&nbsp;their&nbsp;content&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;invisible&nbsp;to&nbsp;the&nbsp;user--that&nbsp;is,&nbsp;the&nbsp;API&nbsp;will&nbsp;not&nbsp;provide&nbsp;a&nbsp;false&nbsp;positive&nbsp;about&nbsp;invisibility.&nbsp; However,&nbsp;the&nbsp;API&nbsp;may&nbsp;provide&nbsp;false negatives about&nbsp;invisibility,&nbsp;for&nbsp;reasons&nbsp;many&nbsp;others&nbsp;on&nbsp;this&nbsp;thread&nbsp;have&nbsp;been&nbsp;pointed&nbsp;out&nbsp;(including&nbsp;different&nbsp;windowing&nbsp;systems,&nbsp;multiple&nbsp;monitors,&nbsp;partial&nbsp;transparency,&nbsp;etc.).&nbsp; &lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;easiest&nbsp;way&nbsp;to&nbsp;achieve&nbsp;this&nbsp;guarantee&nbsp;is&nbsp;to&nbsp;only&nbsp;consider&nbsp;a&nbsp;tab&nbsp;hidden&nbsp;when&nbsp;it&nbsp;is&nbsp;a&nbsp;background&nbsp;tab&nbsp;within&lt;i&gt; &lt;/i&gt;a&nbsp;window.&nbsp; The&nbsp;window&nbsp;itself,&nbsp;of&nbsp;course,&nbsp;may&nbsp;be&nbsp;on&nbsp;a&nbsp;little-noticed&nbsp;second&nbsp;monitor,&nbsp;partially&nbsp;obscured,&nbsp;etc.&nbsp; But&nbsp;as&nbsp;you&nbsp;point&nbsp;out,&nbsp;there&nbsp;are&nbsp;still&nbsp;some&nbsp;edge&nbsp;cases&nbsp;where&nbsp;even&nbsp;a&nbsp;background&nbsp;tab&nbsp;is&nbsp;visible.&nbsp; In&nbsp;this&nbsp;specific&nbsp;example,&nbsp;I&nbsp;think&nbsp;the&nbsp;right&nbsp;answer&nbsp;would&nbsp;be&nbsp;to&nbsp;have&nbsp;an&nbsp;additional&nbsp;visibility&nbsp;value&nbsp;of&nbsp;&quot;preview&quot;,&nbsp;which,&nbsp;for&nbsp;the&nbsp;purposes&nbsp;of&nbsp;the&nbsp;isVisible&nbsp;property,&nbsp;would&nbsp;be&nbsp;considered&nbsp;a&nbsp;hidden&nbsp;state.&nbsp; There&nbsp;are&nbsp;some&nbsp;cases&nbsp;where&nbsp;a&nbsp;tab&nbsp;would&nbsp;consider&nbsp;a&nbsp;tab&nbsp;preview&nbsp;to&nbsp;be&nbsp;hidden&nbsp;(like&nbsp;the&nbsp;puzzle&nbsp;timer&nbsp;use&nbsp;case)&nbsp;and&nbsp;some&nbsp;cases&nbsp;where&nbsp;it&nbsp;would&nbsp;be&nbsp;considered&nbsp;visible&nbsp;(like&nbsp;the&nbsp;video&nbsp;playing&nbsp;use&nbsp;case).&nbsp; This&nbsp;would&nbsp;allow&nbsp;web&nbsp;developers&nbsp;to&nbsp;decide&nbsp;for&nbsp;themselves&nbsp;how&nbsp;they&nbsp;wanted&nbsp;to&nbsp;respond&nbsp;to&nbsp;that&nbsp;case.&lt;/div&gt;<br>
<br>
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regarding&nbsp;the&nbsp;additional&nbsp;abuse&nbsp;potential:&lt;/div&gt;&lt;div&gt;------&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
<br>
On&nbsp;December&nbsp;8th,&nbsp;Boris&nbsp;Zbarksy&nbsp;wrote:&lt;/blockquote&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;I&#39;d&nbsp;really&nbsp;appreciate&nbsp;some&nbsp;comment&nbsp;on&nbsp;this.&nbsp; I&#39;m&nbsp;pretty&nbsp;worried&nbsp;about&nbsp;adding&nbsp;features&nbsp;that&nbsp;we&nbsp;then&nbsp;have&nbsp;to&nbsp;start&nbsp;working&nbsp;around&nbsp;people&nbsp;abusing&nbsp;almost&nbsp;immediately...&lt;/span&gt; &lt;/blockquote&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;-----&lt;/div&gt;&lt;div&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;div&gt;Although&nbsp;I&nbsp;agree&nbsp;that&nbsp;there&nbsp;is&nbsp;some&nbsp;additional&nbsp;potential&nbsp;for&nbsp;abuse,&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;it&#39;s&nbsp;a&nbsp;particularly&nbsp;large&nbsp;incremental&nbsp;potential.&nbsp; Sites&nbsp;that&nbsp;want&nbsp;to&nbsp;be&nbsp;annoying&nbsp;already&nbsp;have&nbsp;a&nbsp;very&nbsp;large&nbsp;toolbox&nbsp;today.&nbsp; Sites&nbsp;today&nbsp;could&nbsp;easily&nbsp;hook&nbsp;up&nbsp;a&nbsp;script&nbsp;that&nbsp;detects&nbsp;inactivity&nbsp;on&nbsp;a&nbsp;tab&nbsp;(e.g.&nbsp;lack&nbsp;of&nbsp;scrolling&nbsp;or&nbsp;mouse&nbsp;movement)&nbsp;and&nbsp;pops&nbsp;an&nbsp;alert,&nbsp;refocussing&nbsp;the&nbsp;tab.&nbsp; In&nbsp;practice,&nbsp;this&nbsp;is&nbsp;not&nbsp;a&nbsp;common occurrence--users&nbsp;can&nbsp;vote&nbsp;with&nbsp;their&nbsp;address&nbsp;bar&nbsp;and&nbsp;avoid&nbsp;sites&nbsp;that&nbsp;are&nbsp;needlessly&nbsp;annoying.&nbsp; &lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;would&nbsp;be&nbsp;some&nbsp;easy&nbsp;defenses&nbsp;browser&nbsp;implementors&nbsp;could&nbsp;enact&nbsp;if&nbsp;this&nbsp;focus-grabbing&nbsp;did&nbsp;indeed&nbsp;become&nbsp;a&nbsp;problem.&nbsp; For&nbsp;example,&nbsp;code&nbsp;running&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;visibilitychange&nbsp;event&nbsp;could&nbsp;be&nbsp;forbidden&nbsp;to&nbsp;open&nbsp;an&nbsp;alert&nbsp;(something&nbsp;that&nbsp;would&nbsp;be&nbsp;easy&nbsp;for&nbsp;moderately-savvy&nbsp;developers&nbsp;to&nbsp;circumvent&nbsp;via&nbsp;a&nbsp;setTimeout).&nbsp; Additionally,&nbsp;if&nbsp;a&nbsp;site&nbsp;pops&nbsp;multiple&nbsp;alerts&nbsp;when&nbsp;the&nbsp;tab&nbsp;is&nbsp;hidden,&nbsp;the&nbsp;alert&nbsp;shown&nbsp;to&nbsp;the&nbsp;user&nbsp;could&nbsp;contain&nbsp;an&nbsp;additional&nbsp;option&nbsp;to&nbsp;&quot;Prevent&nbsp;this&nbsp;site&nbsp;from&nbsp;grabbing&nbsp;focus&nbsp;in&nbsp;the&nbsp;future&quot;&nbsp;that&nbsp;would&nbsp;not&nbsp;allow&nbsp;alerts&nbsp;when&nbsp;the&nbsp;tab&nbsp;is&nbsp;hidden.&nbsp; &lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Although&nbsp;there&nbsp;is&nbsp;some&nbsp;additional&nbsp;opportunity&nbsp;for&nbsp;abuse,&nbsp;I&nbsp;think&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;particularly&nbsp;large,&nbsp;possible&nbsp;to&nbsp;defend&nbsp;against&nbsp;if&nbsp;necessary,&nbsp;and&nbsp;outweighed&nbsp;by&nbsp;the&nbsp;advantages&nbsp;such&nbsp;an&nbsp;API&nbsp;would&nbsp;provide&nbsp;to&nbsp;legitimate&nbsp;web&nbsp;developers.&lt;/div&gt;<br>
<br>
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regarding&nbsp;the&nbsp;video&nbsp;player&nbsp;use&nbsp;case&nbsp;from&nbsp;the&nbsp;initial&nbsp;proposal: &lt;/div&gt;&lt;div&gt;-----&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
<br>
On&nbsp;December&nbsp;8th,&nbsp;Maciej&nbsp;Stachowiak&nbsp;wrote:&lt;br&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;This&nbsp;use&nbsp;case&nbsp;can&nbsp;be&nbsp;handled&nbsp;without&nbsp;help&nbsp;from&nbsp;the&nbsp;page.&nbsp;In&nbsp;Safari,&nbsp;video&nbsp;(whether&nbsp;through&nbsp;media&nbsp;elements&nbsp;or&nbsp;plugins)&nbsp;won&#39;t&nbsp;start&nbsp;playing&nbsp;when&nbsp;a&nbsp;user&nbsp;opens&nbsp;a&nbsp;tab&nbsp;in&nbsp;the&nbsp;background,&nbsp;until&nbsp;the&nbsp;user&nbsp;switches&nbsp;to&nbsp;that&nbsp;tab.&lt;/span&gt;&lt;/blockquote&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-----&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;Although&nbsp;what&nbsp;you&nbsp;describe&nbsp;satisfies&nbsp;the&nbsp;specific&nbsp;use&nbsp;case,&nbsp;it&nbsp;doesn&#39;t&nbsp;address&nbsp;the&nbsp;more&nbsp;general&nbsp;use&nbsp;case&nbsp;of&nbsp;animations&nbsp;(either&nbsp;explicit&nbsp;via&nbsp;javascript&nbsp;or&nbsp;via&nbsp;CSS&nbsp;Animations)&nbsp;or&nbsp;content&nbsp;that&nbsp;is&nbsp;not&nbsp;a&nbsp;plugin/video&nbsp;file.&nbsp; &lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regarding&nbsp;solving&nbsp;the&nbsp;use&nbsp;cases&nbsp;that&nbsp;cannot&nbsp;be&nbsp;addressed&nbsp;currently:&lt;/div&gt;&lt;div&gt;------&lt;/div&gt;&lt;div&gt;On&nbsp;December&nbsp;8th, Maciej&nbsp;Stachowiak&nbsp;wrote:&lt;/div&gt;&lt;div&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;div&gt;&lt;blockquote&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&quot;&gt;That&nbsp;leaves&nbsp;the&nbsp;following&nbsp;use&nbsp;cases:&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&quot;&gt;*&nbsp;A&nbsp;puzzle&nbsp;game&nbsp;has&nbsp;a&nbsp;timer&nbsp;that&nbsp;keeps&nbsp;track&nbsp;of&nbsp;how&nbsp;long&nbsp;the&nbsp;user&nbsp;has&nbsp;taken&nbsp;to&nbsp;solve&nbsp;the&nbsp;puzzle.&nbsp; It&nbsp;wants&nbsp;to&nbsp;pause&nbsp;the&nbsp;timer&nbsp;when&nbsp;the&nbsp;user&nbsp;has&nbsp;hidden&nbsp;the&nbsp;tab.&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&quot;&gt;*&nbsp;A&nbsp;web&nbsp;app&nbsp;that&nbsp;uses&nbsp;polling&nbsp;to&nbsp;fetch&nbsp;dynamic&nbsp;content&nbsp;can&nbsp;pause&nbsp;polling&nbsp;when&nbsp;it&nbsp;knows&nbsp;the&nbsp;page&nbsp;is&nbsp;hidden&nbsp;from&nbsp;the&nbsp;user.&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&quot;&gt;*&nbsp;A&nbsp;page&nbsp;wants&nbsp;to&nbsp;detect&nbsp;when&nbsp;it&nbsp;is&nbsp;being&nbsp;prerendered&nbsp;so&nbsp;it&nbsp;can&nbsp;behave&nbsp;appropriately.&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&quot;&gt;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;what&nbsp;the&nbsp;third&nbsp;needs&nbsp;exactly,&nbsp;but&nbsp;it&nbsp;seems&nbsp;like&nbsp;first&nbsp;two&nbsp;could&nbsp;be&nbsp;better&nbsp;served&nbsp;with&nbsp;an&nbsp;API&nbsp;that&nbsp;sets&nbsp;a&nbsp;timer&nbsp;which&nbsp;will&nbsp;only&nbsp;fire&nbsp;when&nbsp;the&nbsp;page&nbsp;is&nbsp;visible.&nbsp;That&nbsp;kind&nbsp;of&nbsp;API&nbsp;might&nbsp;be&nbsp;easier&nbsp;to&nbsp;use&nbsp;right,&nbsp;and&nbsp;avoids&nbsp;the&nbsp;need&nbsp;for&nbsp;JS&nbsp;to&nbsp;run&nbsp;when&nbsp;switching&nbsp;tabs,&nbsp;just&nbsp;to&nbsp;cancel&nbsp;and&nbsp;restart&nbsp;timers.&lt;/span&gt;&lt;/font&gt;&lt;/blockquote&gt;<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;-----&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;Although&nbsp;that&nbsp;API&nbsp;might&nbsp;be&nbsp;easier&nbsp;to&nbsp;use&nbsp;correctly&nbsp;(I&nbsp;don&#39;t&nbsp;know&nbsp;if&nbsp;I&#39;m&nbsp;convinced),&nbsp;note&nbsp;that&nbsp;it&nbsp;would&nbsp;still&nbsp;have&nbsp;the&nbsp;same&nbsp;abuse&nbsp;concerns&nbsp;as&nbsp;the&nbsp;proposed&nbsp;API.&nbsp; A&nbsp;website&nbsp;developer&nbsp;determined&nbsp;to&nbsp;be&nbsp;annoying&nbsp;could&nbsp;register&nbsp;two&nbsp;timers--one&nbsp;that&nbsp;would&nbsp;not&nbsp;fire&nbsp;when&nbsp;the&nbsp;page&nbsp;is&nbsp;invisible,&nbsp;and&nbsp;one&nbsp;that&nbsp;would&nbsp;continue&nbsp;firing&nbsp;even&nbsp;when&nbsp;the&nbsp;page&nbsp;is&nbsp;invisible.&nbsp; The&nbsp;first&nbsp;would&nbsp;update&nbsp;some&nbsp;global&nbsp;variable&nbsp;with&nbsp;a&nbsp;timestamp&nbsp;every&nbsp;time&nbsp;it&nbsp;fires;&nbsp;the&nbsp;second&nbsp;would&nbsp;check&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;timestamp&nbsp;was&nbsp;significantly&nbsp;more&nbsp;stale&nbsp;than&nbsp;the&nbsp;first&#39;s&nbsp;timer&nbsp;interval,&nbsp;and&nbsp;then&nbsp;could&nbsp;trigger&nbsp;a&nbsp;re-focussing&nbsp;alert.&nbsp; Of&nbsp;course,&nbsp;the&nbsp;other&nbsp;benefit&nbsp;you&nbsp;note&nbsp;is&nbsp;that&nbsp;this&nbsp;idea&nbsp;wouldn&#39;t&nbsp;require&nbsp;running&nbsp;javascript&nbsp;every&nbsp;time&nbsp;a&nbsp;user&nbsp;switches&nbsp;tabs,&nbsp;for&nbsp;this&nbsp;class&nbsp;of&nbsp;use&nbsp;cases. &lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;<br>
<br>
The&nbsp;initial&nbsp;use&nbsp;cases&nbsp;listed&nbsp;might&nbsp;be&nbsp;unintentionally&nbsp;narrow.&nbsp; Another&nbsp;use&nbsp;case&nbsp;is:&lt;/div&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;<br>
<br>
*&nbsp;An&nbsp;in-browser&nbsp;collaborative&nbsp;editing&nbsp;environment&nbsp;wants&nbsp;to&nbsp;update&nbsp;a&nbsp;user&#39;s&nbsp;status&nbsp;to&nbsp;away&nbsp;when&nbsp;the&nbsp;tab&nbsp;is&nbsp;in&nbsp;the&nbsp;background.&lt;/div&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;(Although&nbsp;the&nbsp;timer&nbsp;API&nbsp;you&nbsp;mention&nbsp;could&nbsp;be&nbsp;used&nbsp;to&nbsp;address&nbsp;even&nbsp;this&nbsp;use&nbsp;case&nbsp;(indirectly)&nbsp;because&nbsp;it&nbsp;implicitly&nbsp;exposes&nbsp;the&nbsp;key&nbsp;information&nbsp;of&nbsp;whether&nbsp;the&nbsp;tab&nbsp;is&nbsp;invisible.) &lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;<br>
<br>
Regarding&nbsp;building&nbsp;on&nbsp;top&nbsp;of&nbsp;pagehide/pageshow&nbsp;API:&lt;/div&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;----&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
<br>
O&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;small;&nbsp;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;n&nbsp;December&nbsp;8th, Maciej&nbsp;Stachowiak&nbsp;wrote:&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;small;&nbsp;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;Also&nbsp;I&nbsp;wonder&nbsp;if&nbsp;pagehide&nbsp;and&nbsp;pageshow&nbsp;could&nbsp;be&nbsp;broadened&nbsp;to&nbsp;help&nbsp;the&nbsp;prerendering&nbsp;use&nbsp;case.&nbsp;It&nbsp;seems&nbsp;a&nbsp;bit&nbsp;speculative&nbsp;to&nbsp;make&nbsp;API&nbsp;just&nbsp;so&nbsp;Web&nbsp;pages&nbsp;can&nbsp;find&nbsp;out&nbsp;about&nbsp;an&nbsp;experimental&nbsp;feature&nbsp;being&nbsp;used.&lt;/span&gt;&lt;/span&gt;&lt;/blockquote&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;small;&nbsp;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;-----&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;small;&nbsp;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;small;&nbsp;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;div&gt;<br>
<br>
The&nbsp;motivator&nbsp;that&nbsp;got&nbsp;us&nbsp;first&nbsp;thinking&nbsp;about&nbsp;this&nbsp;API&nbsp;in&nbsp;earnest&nbsp;was&nbsp;the&nbsp;prerendering&nbsp;case--although&nbsp;the&nbsp;other&nbsp;use&nbsp;cases,&nbsp;which&nbsp;we&nbsp;also&nbsp;think&nbsp;are&nbsp;important,&nbsp;appear&nbsp;to&nbsp;dovetail&nbsp;nicely.&nbsp; An&nbsp;initial&nbsp;draft&nbsp;attempted&nbsp;to&nbsp;piggyback&nbsp;on&nbsp;the&nbsp;existing&nbsp;pageshow/pagehide&nbsp;API.&nbsp; In&nbsp;practice&nbsp;it&nbsp;was&nbsp;extremely&nbsp;difficult&nbsp;to&nbsp;do&nbsp;correctly,&nbsp;because&nbsp;the visibility/prerender-status&nbsp;of&nbsp;the&nbsp;tab&nbsp;is&nbsp;independent&nbsp;of&nbsp;the&nbsp;load&nbsp;event.&nbsp; &nbsp;The&nbsp;user&nbsp;could&nbsp;click&nbsp;on&nbsp;the&nbsp;predicted&nbsp;link&nbsp;before&nbsp;load&nbsp;fires,&nbsp;or&nbsp;after&nbsp;it&nbsp;has&nbsp;fired.&nbsp; In&nbsp;contrast,&nbsp;the&nbsp;existing&nbsp;pageshow/pagehide&nbsp;API&nbsp;guarantees&nbsp;that&nbsp;pageshow&nbsp;fires&nbsp;after&nbsp;load&nbsp;(at&nbsp;least&nbsp;according&nbsp;to&nbsp;this&nbsp;page: &lt;a&nbsp;href=&quot;https://developer.mozilla.org/En/Using_Firefox_1.5_caching&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;color:&nbsp;rgb(53,&nbsp;66,&nbsp;88);&nbsp;&quot;&gt;https://developer.mozilla.org/En/Using_Firefox_1.5_caching&lt;/a&gt;).&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;would&nbsp;be&nbsp;interested&nbsp;to&nbsp;hear&nbsp;more&nbsp;about&nbsp;a&nbsp;plan&nbsp;that&nbsp;could&nbsp;use&nbsp;the&nbsp;existing&nbsp;pageshow/pagehide&nbsp;API&nbsp;for&nbsp;prerendering&nbsp;in&nbsp;a&nbsp;way&nbsp;that&nbsp;is&nbsp;backwards&nbsp;compatible.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--Alex&lt;/div&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(34,&nbsp;34,&nbsp;34);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;small;&nbsp;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/div&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Dec&nbsp;10,&nbsp;2010&nbsp;at&nbsp;3:00&nbsp;PM,&nbsp;Thomas&nbsp;Broyer&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:t.broyer@gmail.com&quot;&gt;t.broyer@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Fri,&nbsp;Dec&nbsp;10,&nbsp;2010&nbsp;at&nbsp;1:14&nbsp;PM,&nbsp;Dennis&nbsp;Joachimsthaler&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:dennis@efjot.de&quot;&gt;dennis@efjot.de&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Maybe&nbsp;we&nbsp;can&nbsp;disallow&nbsp;the&nbsp;&quot;visibilitychange&quot;&nbsp;event&nbsp;to&nbsp;produce&nbsp;any&nbsp;dialogs&lt;br&gt;<br>
&gt;&nbsp;or&nbsp;anything&nbsp;else&nbsp;that&nbsp;could&nbsp;give&nbsp;focus?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;window.onvisibilitychange&nbsp;=&nbsp;function(e)&nbsp;{&lt;br&gt;<br>
&nbsp; setTimeout(function()&nbsp;{&lt;br&gt;<br>
&nbsp; &nbsp; alert(&quot;Worked&nbsp;around!&quot;);&lt;br&gt;<br>
&nbsp; },&nbsp;0);&lt;br&gt;<br>
};&lt;br&gt;<br>
&lt;br&gt;<br>
Or&nbsp;would&nbsp;browsers&nbsp;be&nbsp;able&nbsp;to&nbsp;track&nbsp;that&nbsp;the&nbsp;code&nbsp;was&nbsp;initially&lt;br&gt;<br>
triggered&nbsp;from&nbsp;visibilitychange?&nbsp;(including&nbsp;when&nbsp;programmatically&lt;br&gt;<br>
creating&nbsp;and&nbsp;dispatching&nbsp;another&nbsp;DOM&nbsp;events,&nbsp;instead&nbsp;of&nbsp;or&nbsp;in&nbsp;addition&lt;br&gt;<br>
to&nbsp;the&nbsp;setTimeout?)&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
--&lt;br&gt;<br>
Thomas&nbsp;Broyer&lt;br&gt;<br>
/t&lt;a&nbsp;href=&quot;http://xn--nna.ma.xn--bwa-xxb.je/&quot;&nbsp;target=&quot;_blank&quot;&gt;ɔ.ma.bʁwa.je/&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
