<tt>
&lt;div&gt;I&nbsp;think&nbsp;I&nbsp;understand&nbsp;what&nbsp;you&amp;#39;re&nbsp;trying&nbsp;to&nbsp;achieve,&nbsp;but&nbsp;it&amp;#39;s&nbsp;not&nbsp;clear&nbsp;to&nbsp;me&nbsp;that&nbsp;giving&nbsp;the&nbsp;web&nbsp;page&nbsp;a&nbsp;snapshot&nbsp;count&nbsp;of&nbsp;&amp;quot;free&nbsp;cores&amp;quot;&nbsp;is&nbsp;actually&nbsp;going&nbsp;to&nbsp;do&nbsp;what&nbsp;you&nbsp;want,&nbsp;given&nbsp;that&nbsp;the&nbsp;number&nbsp;of&nbsp;free&nbsp;cores&nbsp;can&nbsp;vary&nbsp;greatly&nbsp;over&nbsp;time.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;example,&nbsp;I&nbsp;launch&nbsp;your&nbsp;page,&nbsp;the&nbsp;browser&nbsp;tells&nbsp;you&nbsp;that&nbsp;there&nbsp;are&nbsp;16&nbsp;free&nbsp;cores,&nbsp;then&nbsp;I&nbsp;decide&nbsp;to&nbsp;play&nbsp;a&nbsp;flash&nbsp;game&nbsp;or&nbsp;watch&nbsp;video&nbsp;in&nbsp;another&nbsp;tab.&nbsp;Suddenly,&nbsp;the&nbsp;number&nbsp;of&nbsp;free&nbsp;cores&nbsp;is&nbsp;no&nbsp;longer&nbsp;correct.&nbsp;Alternatively,&nbsp;I&nbsp;launch&nbsp;your&nbsp;page,&nbsp;then&nbsp;I&nbsp;launch&nbsp;*another*&nbsp;copy&nbsp;of&nbsp;your&nbsp;page.&nbsp;What&nbsp;happens?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Exposing&nbsp;information&nbsp;that&amp;#39;s&nbsp;not&nbsp;reliable&nbsp;seems&nbsp;worse&nbsp;than&nbsp;not&nbsp;exposing&nbsp;it&nbsp;at&nbsp;all,&nbsp;and&nbsp;would&nbsp;encourage&nbsp;applications&nbsp;to&nbsp;grab&nbsp;all&nbsp;available&nbsp;resources&nbsp;(after&nbsp;all,&nbsp;that&amp;#39;s&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;API!).&nbsp;And&nbsp;the&nbsp;problem&nbsp;domains&nbsp;that&nbsp;would&nbsp;benefit&nbsp;from&nbsp;this&nbsp;information&nbsp;(arbitrarily&nbsp;parallelizable&nbsp;algorithms&nbsp;like&nbsp;ray&nbsp;tracing)&nbsp;seem&nbsp;to&nbsp;be&nbsp;few&nbsp;in&nbsp;number.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-atw&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Nov&nbsp;6,&nbsp;2009&nbsp;at&nbsp;2:41&nbsp;PM,&nbsp;David&nbsp;Bruant&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:bruant@enseirb-matmeca.fr&quot;&gt;bruant@enseirb-matmeca.fr&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;ben&nbsp;turner&nbsp;a&nbsp;écrit&nbsp;:&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&amp;gt;&nbsp;I&nbsp;think&nbsp;it&amp;#39;s&nbsp;important&nbsp;to&nbsp;note&nbsp;that&nbsp;there&nbsp;is&nbsp;no&nbsp;guarantee&nbsp;that&nbsp;each&lt;br&gt;<br>
&amp;gt;&nbsp;worker&nbsp;is&nbsp;tied&nbsp;to&nbsp;an&nbsp;actual&nbsp;OS-level&nbsp;thread.&nbsp;Firefox,&nbsp;for&nbsp;instance,&lt;br&gt;<br>
&amp;gt;&nbsp;will&nbsp;schedule&nbsp;workers&nbsp;on&nbsp;a&nbsp;limited&nbsp;number&nbsp;of&nbsp;OS&nbsp;threads&nbsp;to&nbsp;prevent&lt;br&gt;<br>
&amp;gt;&nbsp;resource&nbsp;swamping.&nbsp;Other&nbsp;implementations&nbsp;(Chromium&nbsp;only?)&nbsp;create&nbsp;new&lt;br&gt;<br>
&amp;gt;&nbsp;processes&nbsp;to&nbsp;run&nbsp;worker&nbsp;code.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;code&nbsp;executed&lt;br&gt;<br>
&amp;gt;&nbsp;in&nbsp;a&nbsp;worker&nbsp;will&nbsp;not&nbsp;block&nbsp;the&nbsp;main&nbsp;thread.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;I&nbsp;didn&amp;#39;t&nbsp;know&nbsp;the&nbsp;differences&nbsp;between&nbsp;the&nbsp;current&nbsp;web&nbsp;workers&lt;br&gt;<br>
implementations&nbsp;and&nbsp;that&amp;#39;s&nbsp;interesting.&lt;br&gt;<br>
The&nbsp;problem&nbsp;with&nbsp;developing&nbsp;JS&nbsp;code&nbsp;using&nbsp;Web&nbsp;workers&nbsp;in&nbsp;a&nbsp;delegation&lt;br&gt;<br>
use&nbsp;case&nbsp;is&nbsp;that&nbsp;you&nbsp;cannot&nbsp;predict&nbsp;what&nbsp;is&nbsp;the&nbsp;hardware,&nbsp;the&nbsp;OS&nbsp;and&nbsp;the&lt;br&gt;<br>
browser&nbsp;you&nbsp;will&nbsp;run&nbsp;your&nbsp;code&nbsp;on.&nbsp;So,&nbsp;what&nbsp;is&nbsp;the&nbsp;&amp;quot;right&amp;quot;,&nbsp;&amp;quot;best&amp;quot;&lt;br&gt;<br>
number&nbsp;of&nbsp;workers&nbsp;to&nbsp;use&nbsp;?&nbsp;1,&nbsp;10,&nbsp;16,&nbsp;1000&nbsp;?&nbsp;It&nbsp;is&nbsp;not&nbsp;a&nbsp;defined&nbsp;number,&lt;br&gt;<br>
it&nbsp;depends&nbsp;on&nbsp;hardware,&nbsp;OS&nbsp;and&nbsp;browser&nbsp;(or&nbsp;any&nbsp;user&nbsp;agent,&nbsp;of&nbsp;course).&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;point&nbsp;is&nbsp;to&nbsp;give&nbsp;this&nbsp;information&nbsp;to&nbsp;the&nbsp;developer.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;FF&nbsp;decides&nbsp;that&nbsp;all&nbsp;the&nbsp;workers&nbsp;will&nbsp;run&nbsp;on&nbsp;3&nbsp;OS&nbsp;threads&nbsp;even&nbsp;if&lt;br&gt;<br>
you&amp;#39;re&nbsp;on&nbsp;a&nbsp;16-core,&nbsp;my&nbsp;number&nbsp;is&nbsp;3.&nbsp;If&nbsp;you&amp;#39;re&nbsp;in&nbsp;Chrome&nbsp;and&nbsp;your&nbsp;OS&lt;br&gt;<br>
allows&nbsp;you&nbsp;to&nbsp;create&nbsp;only&nbsp;one&nbsp;more&nbsp;process,&nbsp;this&nbsp;number&nbsp;is&nbsp;1.&nbsp;If&nbsp;you&amp;#39;re&lt;br&gt;<br>
in&nbsp;Chrome&nbsp;and&nbsp;your&nbsp;OS&nbsp;allow&nbsp;you&nbsp;to&nbsp;create&nbsp;&amp;quot;as&nbsp;many&nbsp;processes&nbsp;as&nbsp;you&lt;br&gt;<br>
want&amp;quot;&nbsp;on&nbsp;a&nbsp;quad-core,&nbsp;this&nbsp;number&nbsp;is&nbsp;4.&nbsp;But&nbsp;for&nbsp;each&nbsp;case,&nbsp;the&nbsp;web&lt;br&gt;<br>
browser&nbsp;can&nbsp;ask&nbsp;this&nbsp;information&nbsp;to&nbsp;the&nbsp;OS&nbsp;(once&nbsp;when&nbsp;you&nbsp;install&nbsp;it&nbsp;?&lt;br&gt;<br>
each&nbsp;time&nbsp;you&nbsp;open&nbsp;your&nbsp;browser&nbsp;?&nbsp;dynamically&nbsp;?).&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;information&nbsp;is&nbsp;available&nbsp;(and&nbsp;shouldn&amp;#39;t&nbsp;be&nbsp;that&nbsp;hard&nbsp;to&nbsp;retrieve&nbsp;!)&lt;br&gt;<br>
and&nbsp;can&nbsp;be&nbsp;given&nbsp;to&nbsp;the&nbsp;web&nbsp;developer.&lt;br&gt;<br>
&lt;br&gt;<br>
David&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;-Ben&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
