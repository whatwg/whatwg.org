<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2008/12/17&nbsp;Ian&nbsp;Hickson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;ian@hixie.ch&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;<br>
&lt;br&gt;This&nbsp;doesn&#39;t&nbsp;cost&nbsp;any&nbsp;time&nbsp;in&nbsp;HTML&nbsp;either,&nbsp;since&nbsp;the&nbsp;tokeniser&nbsp;doesn&#39;t&lt;br&gt;<br>
need&nbsp;to&nbsp;worry&nbsp;about&nbsp;what&nbsp;tags&nbsp;have&nbsp;end&nbsp;tags,&nbsp;the&nbsp;tree&nbsp;construction&nbsp;side&lt;br&gt;<br>
just&nbsp;drops&nbsp;unexpected&nbsp;end&nbsp;tags&nbsp;on&nbsp;the&nbsp;floor.&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;think&nbsp;authors&nbsp;expect&nbsp;tags&nbsp;to&nbsp;disappear.&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;don&#39;t&nbsp;check&nbsp;for&nbsp;insertion&nbsp;modes&lt;br&gt;<br>
&lt;br&gt;<br>
Having&nbsp;an&nbsp;insertion&nbsp;mode&nbsp;isn&#39;t&nbsp;particularly&nbsp;a&nbsp;performance&nbsp;cost.&nbsp;(It&lt;br&gt;<br>
affects&nbsp;code&nbsp;footprint,&nbsp;but&nbsp;that&#39;s&nbsp;about&nbsp;it.)&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;it&nbsp;needs&nbsp;more&nbsp;code&nbsp;(one&nbsp;x&nbsp;insertion&nbsp;mode):&nbsp;more&nbsp;code&nbsp;is&nbsp;always&nbsp;less&nbsp;performance,&nbsp;even&nbsp;if&nbsp;it&nbsp;is&nbsp;just&nbsp;to&nbsp;load&nbsp;a&nbsp;bigger&nbsp;executable&lt;/div&gt;<br>
&lt;div&gt;2)&nbsp;it&nbsp;needs&nbsp;code&nbsp;to&nbsp;&nbsp;select&nbsp;the&nbsp;insertion&nbsp;mode&nbsp;for&nbsp;the&nbsp;next&nbsp;element&nbsp;(when&nbsp;the&nbsp;spec&nbsp;says&nbsp;&nbsp;to&nbsp;reset&nbsp;the&nbsp;insertion&nbsp;mode):&nbsp;in&nbsp;the&nbsp;worst&nbsp;case&nbsp;it&nbsp;has&nbsp;to&nbsp;compare&nbsp;nodeName&nbsp;18&nbsp;times&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;That&#39;s&nbsp;the&nbsp;same&nbsp;as&nbsp;HTML.&lt;br&gt;<br>
<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;No&nbsp;it&nbsp;is&nbsp;not.&nbsp;HTML&nbsp;defines&nbsp;special&nbsp;beaviour&nbsp;for&nbsp;the&nbsp;following&nbsp;elements:&nbsp;&nbsp;address,&nbsp;area,&nbsp;article,&nbsp;aside,&nbsp;base,&nbsp;basefont,&nbsp;bgsound,&nbsp;blockquote,&nbsp;body,&nbsp;br,&nbsp;center,&nbsp;col,&nbsp;colgroup,&nbsp;command,&nbsp;datagrid,&nbsp;dd,&nbsp;details,&nbsp;dialog,&nbsp;dir,&nbsp;div,&nbsp;dl,&nbsp;dt,&nbsp;embed,&nbsp;eventsource&nbsp;fieldset,&nbsp;figure,&nbsp;footer,&nbsp;form,&nbsp;frame,&nbsp;frameset,&nbsp;h1,&nbsp;h2,&nbsp;h3,&nbsp;h4,&nbsp;h5,&nbsp;h6,&nbsp;head,&nbsp;header,&nbsp;hr,&nbsp;iframe,&nbsp;img,&nbsp;input,&nbsp;isindex,&nbsp;li,&nbsp;link,&nbsp;listing,&nbsp;menu,&nbsp;meta,&nbsp;nav,&nbsp;noembed,&nbsp;noframes,&nbsp;noscript,&nbsp;ol,&nbsp;p,&nbsp;param,&nbsp;plaintext,&nbsp;pre,&nbsp;script,&nbsp;section,&nbsp;select,&nbsp;spacer,&nbsp;style,&nbsp;tbody,&nbsp;textarea,&nbsp;tfoot,&nbsp;thead,&nbsp;title,&nbsp;tr,&nbsp;ul,&nbsp;and&nbsp;wbr.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;I&nbsp;think&nbsp;they&#39;re&nbsp;quite&nbsp;too&nbsp;many&nbsp;to&nbsp;say&nbsp;that&nbsp;it&nbsp;is&nbsp;like&nbsp;XML&lt;/div&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;&gt;&nbsp;There&nbsp;are&nbsp;a&nbsp;number&nbsp;of&nbsp;HTML5&nbsp;parser&nbsp;implementations,&nbsp;and&nbsp;data&nbsp;suggests&nbsp;that&lt;br&gt;&lt;/div&gt;<br>
&gt;&nbsp;there&nbsp;is&nbsp;no&nbsp;particular&nbsp;performance&nbsp;gain.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;There&nbsp;are&nbsp;no&nbsp;actual&nbsp;HTML5&nbsp;parser&nbsp;implementation,&nbsp;only&nbsp;HTML4&nbsp;compatible&nbsp;with&nbsp;new&nbsp;syntax.&nbsp;(are&nbsp;you&nbsp;sure&nbsp;that&nbsp;closed&nbsp;source&nbsp;browsers&nbsp;really&nbsp;do&nbsp;what&nbsp;is&nbsp;written&nbsp;in&nbsp;the&nbsp;specification?)&lt;br&gt;<br>
&lt;br&gt;&gt;&nbsp;There&#39;s&nbsp;no&nbsp;guessing&nbsp;in&nbsp;HTML&nbsp;either;&nbsp;all&nbsp;input&nbsp;streams&nbsp;have&nbsp;very&nbsp;specific&lt;br&gt;&lt;/div&gt;<br>
&gt;&nbsp;and&nbsp;required&nbsp;results.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;Actually,&nbsp;there&#39;s&nbsp;nothing&nbsp;that&nbsp;really&nbsp;says&nbsp;that&nbsp;&lt;div&gt;&lt;p&gt;some&nbsp;text&lt;/p&gt;&lt;p&gt;some&nbsp;more&nbsp;text&lt;/p&gt;&lt;/div&gt;&nbsp;is&nbsp;more&nbsp;correct&nbsp;than&nbsp;&lt;div&gt;&lt;p&gt;some&nbsp;text&lt;p&gt;some&nbsp;more&nbsp;text&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;Just&nbsp;when&nbsp;writing&nbsp;the&nbsp;specification&nbsp;you&nbsp;guess&nbsp;that&nbsp;the&nbsp;first&nbsp;possibility&nbsp;is&nbsp;what&nbsp;auctor&nbsp;thought.&nbsp;You&nbsp;are&nbsp;guessing,&nbsp;not&nbsp;the&nbsp;browser.&lt;br&gt;<br>
&lt;br&gt;&gt;&nbsp;Validating&nbsp;code&nbsp;is&nbsp;certainly&nbsp;an&nbsp;important&nbsp;QA&nbsp;point,&nbsp;but&nbsp;once&nbsp;you&#39;ve&lt;br&gt;&lt;/div&gt;<br>
&gt;&nbsp;shipped&nbsp;code,&nbsp;the&nbsp;presence&nbsp;of&nbsp;an&nbsp;error&nbsp;is&nbsp;not&nbsp;helpful&nbsp;to&nbsp;the&nbsp;end&nbsp;user.&lt;br&gt;<br>
&gt;&nbsp;Often&nbsp;errors&nbsp;in&nbsp;XML&nbsp;files&nbsp;weren&#39;t&nbsp;present&nbsp;when&nbsp;the&nbsp;file&nbsp;was&nbsp;created,&nbsp;but&lt;br&gt;<br>
&gt;&nbsp;appear&nbsp;later&nbsp;when&nbsp;new&nbsp;text&nbsp;is&nbsp;merged&nbsp;in&nbsp;automatically.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;As&nbsp;Nils&nbsp;pointed,&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;itself&nbsp;to&nbsp;have&nbsp;any&nbsp;content&nbsp;to&nbsp;be&nbsp;automatically&nbsp;merged&nbsp;inside&nbsp;a&nbsp;stream.&nbsp;It&nbsp;is&nbsp;like&nbsp;opening&nbsp;a&nbsp;random&nbsp;file,&nbsp;executing&nbsp;it&nbsp;and&nbsp;expecting&nbsp;no&nbsp;errors.&nbsp;Every&nbsp;input,&nbsp;even&nbsp;from&nbsp;the&nbsp;most&nbsp;trustworthy&nbsp;source,&nbsp;must&nbsp;be&nbsp;parsed&nbsp;for&nbsp;errors&nbsp;and&nbsp;then&nbsp;checked&nbsp;after&nbsp;publishing.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;And&nbsp;if&nbsp;an&nbsp;end&nbsp;user&nbsp;finds&nbsp;an&nbsp;error,&nbsp;he&nbsp;probably&nbsp;will&nbsp;report&nbsp;it&nbsp;to&nbsp;the&nbsp;owner&nbsp;of&nbsp;the&nbsp;web&nbsp;site,&nbsp;who&nbsp;in&nbsp;turn&nbsp;will&nbsp;report&nbsp;it&nbsp;(quite&nbsp;angrily)&nbsp;to&nbsp;web&nbsp;designer.&nbsp;Something&nbsp;like:&nbsp;&quot;What&nbsp;on&nbsp;earth&nbsp;are&nbsp;you&nbsp;doing&nbsp;in&nbsp;front&nbsp;of&nbsp;the&nbsp;coffe&nbsp;machine?&nbsp;I&nbsp;don&#39;t&nbsp;pay&nbsp;you&nbsp;to&nbsp;rest!&nbsp;Fix&nbsp;that&nbsp;website&nbsp;immediately!&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&gt;&nbsp;Well,&nbsp;they&#39;ve&nbsp;ignored&nbsp;it&nbsp;for&nbsp;the&nbsp;past&nbsp;7&nbsp;years,&nbsp;so&nbsp;why&nbsp;would&nbsp;they&nbsp;change?&lt;br&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;Nobody&nbsp;said&nbsp;to&nbsp;user&nbsp;that&nbsp;he&nbsp;was&nbsp;browsing&nbsp;a&nbsp;deprecate&nbsp;web&nbsp;site.&nbsp;If&nbsp;something&nbsp;like&nbsp;IE7&nbsp;information&nbsp;bar&nbsp;(ie.&nbsp;a&nbsp;non&nbsp;modal&nbsp;bar,&nbsp;disactivable&nbsp;and&nbsp;not&nbsp;annoying&nbsp;the&nbsp;user,&nbsp;but&nbsp;immediately&nbsp;visible)&nbsp;could&nbsp;appear&nbsp;in&nbsp;a&nbsp;&nbsp;web&nbsp;site&nbsp;sent&nbsp;with&nbsp;&nbsp;text/html,&nbsp;&nbsp;I&nbsp;think&nbsp;companies&nbsp;won&#39;t&nbsp;like&nbsp;their&nbsp;site&nbsp;tagged&nbsp;as&nbsp;&quot;deprecate&quot;&nbsp;and&nbsp;port&nbsp;them&nbsp;to&nbsp;application/xhtml+xml&nbsp;in&nbsp;no&nbsp;time&nbsp;(do&nbsp;you&nbsp;imagine&nbsp;what&nbsp;&quot;deprecate&quot;&nbsp;can&nbsp;mean&nbsp;on&nbsp;news&nbsp;web&nbsp;site?)&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;And&nbsp;don&#39;t&nbsp;forget&nbsp;that&nbsp;the&nbsp;most&nbsp;common&nbsp;browser&nbsp;was&nbsp;IE6,&nbsp;not&nbsp;very&nbsp;standard&nbsp;oriented...&lt;/div&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&gt;&nbsp;Anyway,&nbsp;it&nbsp;isn&#39;t&nbsp;clear&nbsp;that&nbsp;we&nbsp;would&nbsp;_want_&nbsp;to&nbsp;deprecate&nbsp;HTML,&nbsp;even&nbsp;if&nbsp;we&lt;br&gt;<br>
&lt;/div&gt;<br>
&gt;&nbsp;had&nbsp;any&nbsp;real&nbsp;choice&nbsp;in&nbsp;the&nbsp;matter.&lt;br&gt;<br>
&lt;div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;I&#39;m&nbsp;not&nbsp;sure&nbsp;if&nbsp;I&nbsp;understood&nbsp;your&nbsp;sentence&nbsp;(sorry,&nbsp;English&nbsp;is&nbsp;not&nbsp;my&nbsp;mother&nbsp;language).&nbsp;Anyway,&nbsp;you&nbsp;just&nbsp;have&nbsp;to&nbsp;put&nbsp;an&nbsp;&quot;authoring&nbsp;requirement&quot;&nbsp;for&nbsp;text/html&lt;br&gt;<br>
&lt;/p&gt;&lt;p&gt;1)&nbsp;user&nbsp;agent&nbsp;will&nbsp;just&nbsp;ignore&nbsp;it&nbsp;and&nbsp;implement&nbsp;the&nbsp;HTML&nbsp;algorithm&nbsp;(we&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;&quot;break&nbsp;the&nbsp;web&quot;,&nbsp;using&nbsp;Microsoft&nbsp;terms)&lt;br&gt;2)&nbsp;standard-oriented&nbsp;authors&nbsp;will&nbsp;convert&nbsp;their&nbsp;sites&nbsp;to&nbsp;application/xhtml+xml&nbsp;(if&nbsp;they&nbsp;didn&#39;t&nbsp;before)&lt;br&gt;<br>
3)&nbsp;other&nbsp;authors&nbsp;will&nbsp;keep&nbsp;their&nbsp;tag&nbsp;soup&nbsp;(and&nbsp;get&nbsp;their&nbsp;sites&nbsp;yellow-barred)&lt;br&gt;4)&nbsp;company&nbsp;owners&nbsp;will&nbsp;make&nbsp;their&nbsp;decision&nbsp;between&nbsp;2&nbsp;and&nbsp;3&lt;br&gt;&lt;/p&gt;&lt;p&gt;Gradually,&nbsp;n°&nbsp;3&nbsp;will&nbsp;disappear,&nbsp;because&nbsp;there&#39;s&nbsp;no&nbsp;actual&nbsp;needing&nbsp;for&nbsp;HTML.&lt;/p&gt;<br>
&lt;p&gt;@&nbsp;Garret:&lt;br&gt;originally&nbsp;I&nbsp;wrote&nbsp;XBL2,&nbsp;then&nbsp;I&nbsp;deleted&nbsp;it&nbsp;since&nbsp;it&nbsp;was&nbsp;not&nbsp;pertinent&nbsp;(and&nbsp;went&nbsp;in&nbsp;opposite&nbsp;direction&nbsp;as&nbsp;my&nbsp;opinion),&nbsp;but&nbsp;i&nbsp;forgot&nbsp;to&nbsp;edit&nbsp;list&nbsp;number.&lt;/p&gt;&lt;p&gt;Secondly,&nbsp;what&nbsp;do&nbsp;you&nbsp;mean&nbsp;with&nbsp;bubbling?&nbsp;Ok,&nbsp;I&nbsp;can&nbsp;put&nbsp;an&nbsp;event&nbsp;handler&nbsp;on&nbsp;what&nbsp;I&nbsp;need&nbsp;on,&nbsp;say,&nbsp;&lt;HTML&gt;,&nbsp;but&nbsp;then&nbsp;how&nbsp;can&nbsp;I&nbsp;execute&nbsp;the&nbsp;proper&nbsp;handler?&nbsp;I&nbsp;must&nbsp;retrieve&nbsp;it,&nbsp;either&nbsp;attaching&nbsp;it&nbsp;to&nbsp;the&nbsp;DOM&nbsp;node&nbsp;(but&nbsp;I&nbsp;don&#39;t&nbsp;advice&nbsp;it,&nbsp;it&nbsp;is&nbsp;not&nbsp;interoperable)&nbsp;or&nbsp;maintaing&nbsp;an&nbsp;hash&nbsp;map&nbsp;with&nbsp;class&nbsp;names&nbsp;/&nbsp;function&nbsp;pointers&nbsp;and&nbsp;solve&nbsp;it.&lt;/p&gt;<br>
&lt;p&gt;Actually,&nbsp;there&nbsp;is&nbsp;no&nbsp;performant&nbsp;and&nbsp;clean&nbsp;solution,&nbsp;just&nbsp;few&nbsp;hacks.&lt;/p&gt;<br>

</tt>
