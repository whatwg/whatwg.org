<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Sat,&nbsp;Sep&nbsp;6,&nbsp;2008&nbsp;at&nbsp;8:46&nbsp;AM,&nbsp;Chris&nbsp;Prince&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:cprince@google.com&quot;&gt;cprince@google.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
I&nbsp;think&nbsp;Michael&nbsp;has&nbsp;some&nbsp;valid&nbsp;concerns&nbsp;here.&nbsp;&nbsp;Specifically,&nbsp;where&nbsp;he&nbsp;says:&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp;&quot;Where&nbsp;does&nbsp;appCache&nbsp;deletion&nbsp;happen?&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
and&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
-&nbsp;&quot;I&nbsp;think&nbsp;the&nbsp;appCache&nbsp;update/validation&nbsp;logic&nbsp;is&nbsp;fundamentally&nbsp;flawed&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;with&nbsp;regard&nbsp;to&nbsp;resources&nbsp;that&nbsp;are&nbsp;not&nbsp;explicitly&nbsp;listed.&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Is&nbsp;anybody&nbsp;else&nbsp;working&nbsp;on&nbsp;the&nbsp;Offline&nbsp;Web&nbsp;Applications&nbsp;feature?&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Dave&nbsp;Camp&nbsp;and&nbsp;Honza&nbsp;Bombas&nbsp;at&nbsp;Mozilla&nbsp;(CCed).&lt;br&gt;&lt;br&gt;&lt;br&gt;&nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
--Chris&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Fri,&nbsp;Aug&nbsp;29,&nbsp;2008&nbsp;at&nbsp;4:36&nbsp;PM,&nbsp;Michael&nbsp;Nordman&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:michaeln@google.com&quot;&gt;michaeln@google.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hello&nbsp;again&nbsp;all,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;A&nbsp;couple&nbsp;more&nbsp;comments.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;When&nbsp;is&nbsp;anything&nbsp;ever&nbsp;deleted?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Maybe&nbsp;i&nbsp;missed&nbsp;it,&nbsp;but&nbsp;where&nbsp;does&nbsp;appCache&nbsp;deletion&nbsp;happen?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Something&nbsp;that&nbsp;Gears&nbsp;user&#39;s&nbsp;have&nbsp;done&nbsp;is&nbsp;to&nbsp;serve&nbsp;an&nbsp;empty&nbsp;manifest&nbsp;file.&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;results&nbsp;are&nbsp;a&nbsp;close&nbsp;approximation&nbsp;to&nbsp;having&nbsp;deleted&nbsp;the&nbsp;resource&nbsp;store.&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;would&nbsp;vote&nbsp;to&nbsp;have&nbsp;some&nbsp;syntax&nbsp;for&nbsp;expressing&nbsp;&#39;delete&nbsp;me&#39;&nbsp;&nbsp;in&nbsp;the&nbsp;manifest&lt;br&gt;<br>
&gt;&nbsp;file&nbsp;for&nbsp;an&nbsp;appCache.&nbsp;A&nbsp;new&nbsp;type&nbsp;of&nbsp;event&nbsp;may&nbsp;be&nbsp;warranted&nbsp;for&nbsp;completion&nbsp;of&lt;br&gt;<br>
&gt;&nbsp;such&nbsp;an&nbsp;update,&nbsp;and&nbsp;when&nbsp;swapCache()&nbsp;is&nbsp;called&nbsp;there&nbsp;would&nbsp;no&nbsp;longer&nbsp;an&lt;br&gt;<br>
&gt;&nbsp;appCache&nbsp;associated&nbsp;with&nbsp;the&nbsp;context.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Should&nbsp;we&nbsp;revisit&nbsp;the&nbsp;caching&nbsp;semantics&nbsp;for&nbsp;any&nbsp;resource&nbsp;not&nbsp;explicitly&lt;br&gt;<br>
&gt;&nbsp;listed&nbsp;in&nbsp;the&nbsp;manifest?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Unless&nbsp;i&nbsp;missed&nbsp;something,&nbsp;I&nbsp;think&nbsp;the&nbsp;appCache&nbsp;update/validation&nbsp;logic&nbsp;is&lt;br&gt;<br>
&gt;&nbsp;fundamentally&nbsp;flawed&nbsp;with&nbsp;regard&nbsp;to&nbsp;resources&nbsp;that&nbsp;are&nbsp;not&nbsp;explicitly&lt;br&gt;<br>
&gt;&nbsp;listed.&nbsp;As&nbsp;presently&nbsp;spec&#39;d,&nbsp;a&nbsp;failure&nbsp;to&nbsp;update/validate&nbsp;any&nbsp;of&nbsp;these&lt;br&gt;<br>
&gt;&nbsp;resources&nbsp;causes&nbsp;the&nbsp;entire&nbsp;update&nbsp;to&nbsp;fail,&nbsp;and&nbsp;the&nbsp;old&nbsp;version&nbsp;will&lt;br&gt;<br>
&gt;&nbsp;remain&nbsp;pinned&nbsp;in&nbsp;the&nbsp;cache.&nbsp;Now&nbsp;suppose&nbsp;the&nbsp;app&nbsp;changes&nbsp;it&#39;s&nbsp;url&nbsp;space&nbsp;such&lt;br&gt;<br>
&gt;&nbsp;that&nbsp;some&nbsp;of&nbsp;the&nbsp;resources&nbsp;that&nbsp;got&nbsp;picked&nbsp;up&nbsp;by&nbsp;one&nbsp;of&nbsp;the&nbsp;mechanisms&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;add&nbsp;new&nbsp;resources&nbsp;(autocaching&nbsp;namespace&nbsp;or&nbsp;manually&nbsp;.add()ed&nbsp;or&nbsp;&lt;html&lt;br&gt;<br>
&gt;&nbsp;manifest=x&gt;)&nbsp;no&nbsp;longer&nbsp;make&nbsp;sense...&nbsp;i&nbsp;think&nbsp;this&nbsp;means&nbsp;the&nbsp;appCache&nbsp;is&lt;br&gt;<br>
&gt;&nbsp;stuck&nbsp;in&nbsp;time.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;One&nbsp;idea&nbsp;is&nbsp;to&nbsp;rephrase&nbsp;this&nbsp;feature&nbsp;in&nbsp;terms&nbsp;closer&nbsp;to&nbsp;std&nbsp;http&nbsp;caching&nbsp;for&lt;br&gt;<br>
&gt;&nbsp;all&nbsp;entries&nbsp;that&nbsp;do&nbsp;not&nbsp;explicily&nbsp;appear&nbsp;in&nbsp;the&nbsp;manifest&nbsp;file.&nbsp;In&lt;br&gt;<br>
&gt;&nbsp;effect,&nbsp;closer&nbsp;to&nbsp;telling&nbsp;the&nbsp;http&nbsp;cache&nbsp;to&nbsp;not&nbsp;purge&nbsp;the&nbsp;resource.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;at&nbsp;initial&nbsp;cache&nbsp;time&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;-&nbsp;cache&nbsp;the&nbsp;resource&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;at&nbsp;appCache&nbsp;update&nbsp;time&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;-&nbsp;validate&nbsp;all&nbsp;non-explicit&nbsp;entries&nbsp;per&nbsp;usual&nbsp;http&nbsp;caching&nbsp;semantics&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(so&nbsp;404s&nbsp;&nbsp;will&nbsp;remove&nbsp;these&nbsp;entries&nbsp;at&nbsp;update&nbsp;time)&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;-&nbsp;network/server&nbsp;errors&nbsp;do&nbsp;not&nbsp;fail&nbsp;the&nbsp;larger&nbsp;update&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;-&nbsp;beyond&nbsp;that,&nbsp;not&nbsp;sure&nbsp;what&nbsp;todo&nbsp;on&nbsp;network/server&nbsp;errors...&nbsp;remove&nbsp;or&lt;br&gt;<br>
&gt;&nbsp;retain&nbsp;the&nbsp;resources?&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;-&nbsp;perhaps&nbsp;maintain&nbsp;a&nbsp;list&nbsp;of&nbsp;&#39;failed&nbsp;to&nbsp;update&#39;&nbsp;items&nbsp;that&nbsp;the&nbsp;webapp&nbsp;can&lt;br&gt;<br>
&gt;&nbsp;access&nbsp;via&nbsp;script&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;at&nbsp;resource&nbsp;load&nbsp;time&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;-&nbsp;validate&nbsp;per&nbsp;usual&nbsp;http&nbsp;caching&nbsp;rules&nbsp;going&nbsp;forward&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(so&nbsp;404s&nbsp;will&nbsp;remove&nbsp;these&nbsp;entries)&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;-&nbsp;with&nbsp;the&nbsp;following&nbsp;exceptions&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;use&nbsp;the&nbsp;cached&nbsp;resource&nbsp;as&nbsp;a&nbsp;fallback&nbsp;for&nbsp;network&nbsp;or&nbsp;server(5xx)&lt;br&gt;<br>
&gt;&nbsp;errors&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;do&nbsp;not&nbsp;purge&nbsp;the&nbsp;resource&nbsp;upon&nbsp;expiration&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Comments?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Mon,&nbsp;Aug&nbsp;25,&nbsp;2008&nbsp;at&nbsp;11:54&nbsp;AM,&nbsp;Michael&nbsp;Nordman&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:michaeln@google.com&quot;&gt;michaeln@google.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Hello&nbsp;all,&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;I&nbsp;have&nbsp;many&nbsp;comments&nbsp;on&nbsp;the&nbsp;Offline&nbsp;Web&nbsp;Applications&nbsp;corner&nbsp;of&nbsp;the&nbsp;HTML5&lt;br&gt;<br>
&gt;&gt;&nbsp;spec.&nbsp;This&nbsp;is&nbsp;the&nbsp;first&nbsp;round&nbsp;of&nbsp;comments&nbsp;you&#39;ll&nbsp;see&nbsp;coming&nbsp;from&nbsp;me.&nbsp;This&lt;br&gt;<br>
&gt;&gt;&nbsp;one&nbsp;is&nbsp;mostly&nbsp;top-level&nbsp;comments.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;5.7.2&nbsp;Application&nbsp;caches&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;I&nbsp;found&nbsp;the&nbsp;terminology&nbsp;used&nbsp;to&nbsp;describe&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;cache&nbsp;sometimes&nbsp;contradictory&nbsp;and&nbsp;confusing,&nbsp;and&nbsp;it&nbsp;doesn&#39;t&nbsp;correspond&lt;br&gt;<br>
&gt;&gt;&nbsp;directly&nbsp;with&nbsp;the&nbsp;terminology&nbsp;used&nbsp;in&nbsp;the&nbsp;manifest&nbsp;file&nbsp;syntax.&nbsp;FWIW,&nbsp;some&lt;br&gt;<br>
&gt;&gt;&nbsp;word&nbsp;smithing&nbsp;and&nbsp;reconciling&nbsp;the&nbsp;differences&nbsp;could&nbsp;add&nbsp;clarity&nbsp;to&nbsp;the&nbsp;spec.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;cached&nbsp;resource&nbsp;categories&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;implicit&nbsp;category&lt;br&gt;<br>
&gt;&gt;&nbsp;This&nbsp;categorization&nbsp;applies&nbsp;to&nbsp;html&nbsp;docs&nbsp;which&nbsp;explicitly&nbsp;contain&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;reference&nbsp;to&nbsp;the&nbsp;manifest&nbsp;file&nbsp;via&nbsp;the&nbsp;&#39;manifest&#39;&nbsp;attribute&nbsp;of&nbsp;their&nbsp;&lt;html&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;tag.&nbsp;I&nbsp;understand&nbsp;they&nbsp;are&nbsp;not&nbsp;necessarily&nbsp;explicitly&nbsp;listed&nbsp;in&nbsp;the&nbsp;manifest&lt;br&gt;<br>
&gt;&gt;&nbsp;file,&nbsp;but&nbsp;they&nbsp;may&nbsp;also&nbsp;be&nbsp;explicitly&nbsp;listed.&nbsp;The&nbsp;end&nbsp;result&nbsp;is&nbsp;that&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;resource&nbsp;can&nbsp;be&nbsp;categorized&nbsp;as&nbsp;both&nbsp;&#39;implicit&#39;&nbsp;and&nbsp;&#39;explicit&#39;.&nbsp;This&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;confusing.&nbsp;I&#39;d&nbsp;vote&nbsp;to&nbsp;have&nbsp;a&nbsp;different&nbsp;name&nbsp;for&nbsp;clarity&nbsp;sake...&nbsp;some&lt;br&gt;<br>
&gt;&gt;&nbsp;ideas...&nbsp;&#39;toplevel&#39;,&nbsp;&#39;manifest&nbsp;referencing&#39;,&nbsp;&#39;native&#39;&nbsp;(an&nbsp;awkward&nbsp;play&nbsp;on&lt;br&gt;<br>
&gt;&gt;&nbsp;foreign).&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;manifest&nbsp;category&lt;br&gt;<br>
&gt;&gt;&nbsp;Perfect.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;explicit&nbsp;category&lt;br&gt;<br>
&gt;&gt;&nbsp;Ok&nbsp;provided&nbsp;&#39;implicit&#39;&nbsp;is&nbsp;renamed.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;fallback&nbsp;category&lt;br&gt;<br>
&gt;&gt;&nbsp;The&nbsp;term&nbsp;&#39;fallback&#39;&nbsp;refers&nbsp;to&nbsp;the&nbsp;prescribed&nbsp;use&nbsp;of&nbsp;these&nbsp;resources&nbsp;for&lt;br&gt;<br>
&gt;&gt;&nbsp;the&nbsp;opportunistic-caching&nbsp;namespace&nbsp;in&nbsp;particular.&nbsp;As&nbsp;part&nbsp;of&nbsp;pulling&nbsp;apart&lt;br&gt;<br>
&gt;&gt;&nbsp;namespaces&nbsp;vs&nbsp;how&nbsp;to&nbsp;handle&nbsp;hits&nbsp;within&nbsp;a&nbsp;namespace,&nbsp;I&#39;d&nbsp;vote&nbsp;to&nbsp;change&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;name&nbsp;for&nbsp;this&nbsp;category...&nbsp;some&nbsp;ideas...&nbsp;&#39;namespace-handler&#39;.&nbsp;&nbsp;I&#39;ll&nbsp;say&nbsp;more&lt;br&gt;<br>
&gt;&gt;&nbsp;more&nbsp;to&nbsp;say&nbsp;about&nbsp;different&nbsp;types&nbsp;of&nbsp;&#39;namespaces&#39;&nbsp;below.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;opportunistcally&nbsp;cached&nbsp;category&lt;br&gt;<br>
&gt;&gt;&nbsp;A&nbsp;mouthful,&nbsp;but&nbsp;ok.&nbsp;Another&nbsp;possibility&nbsp;is&nbsp;&#39;auto-cached&#39;&nbsp;which&nbsp;would&nbsp;work&lt;br&gt;<br>
&gt;&gt;&nbsp;well&nbsp;with&nbsp;the&nbsp;&#39;manually-cached&#39;&nbsp;terminology&nbsp;below.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;dynamic&nbsp;category&lt;br&gt;<br>
&gt;&gt;&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;reserve&nbsp;the&nbsp;term&nbsp;&#39;dynamic&#39;&nbsp;for&nbsp;a&nbsp;different&nbsp;use&nbsp;of&nbsp;that&nbsp;term&lt;br&gt;<br>
&gt;&gt;&nbsp;(more&nbsp;on&nbsp;that&nbsp;in&nbsp;a&nbsp;moment).&nbsp;&nbsp;Some&nbsp;name&nbsp;possibilites&nbsp;for&nbsp;this&nbsp;category...&lt;br&gt;<br>
&gt;&gt;&nbsp;&#39;manually-cached&#39;&nbsp;or&nbsp;&#39;script-added&#39;&nbsp;or&nbsp;&#39;programatically-added&#39;.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&nbsp;flavors&nbsp;of&nbsp;namespaces&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;online&nbsp;whitelist&lt;br&gt;<br>
&gt;&gt;&nbsp;As&nbsp;mentioned&nbsp;in&nbsp;previous&nbsp;messages,&nbsp;this&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;some&nbsp;form&nbsp;of&lt;br&gt;<br>
&gt;&gt;&nbsp;namespacing&nbsp;or&nbsp;filtering&nbsp;to&nbsp;be&nbsp;useful.&nbsp;A&nbsp;better&nbsp;term&nbsp;for&nbsp;this&nbsp;might&nbsp;be&lt;br&gt;<br>
&gt;&gt;&nbsp;&#39;bypass&#39;&nbsp;since&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;appcache,&nbsp;hits&nbsp;here&nbsp;bypass&nbsp;the&nbsp;cache.&nbsp;Its&lt;br&gt;<br>
&gt;&gt;&nbsp;not&nbsp;clear&nbsp;if&nbsp;path&nbsp;prefix&nbsp;matching&nbsp;is&nbsp;the&nbsp;best&nbsp;option&nbsp;for&nbsp;filtering&nbsp;out&lt;br&gt;<br>
&gt;&gt;&nbsp;request&nbsp;that&nbsp;should&nbsp;bypass&nbsp;the&nbsp;cache.&nbsp;In&nbsp;working&nbsp;with&nbsp;app&nbsp;developers&nbsp;using&lt;br&gt;<br>
&gt;&gt;&nbsp;Gears,&nbsp;the&nbsp;idea&nbsp;of&nbsp;specifying&nbsp;a&nbsp;particular&nbsp;query&nbsp;argument&nbsp;to&nbsp;filter&nbsp;on&nbsp;in&lt;br&gt;<br>
&gt;&gt;&nbsp;addition&nbsp;to&nbsp;a&nbsp;path&nbsp;prefix&nbsp;has&nbsp;come&nbsp;up.&nbsp;&lt;a&nbsp;href=&quot;http://server/pathprefix&quot;&nbsp;target=&quot;_blank&quot;&gt;http://server/pathprefix&lt;/a&gt;&nbsp;&nbsp;&nbsp;+&lt;br&gt;<br>
&gt;&gt;&nbsp;&amp;bypassAppCache&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;opportunistic&nbsp;caching&nbsp;namespaces&lt;br&gt;<br>
&gt;&gt;&nbsp;A&nbsp;mouthful&nbsp;but&nbsp;ok.&nbsp;Whatever&nbsp;terminology&nbsp;used&nbsp;for&nbsp;the&nbsp;category&nbsp;of&nbsp;resulting&lt;br&gt;<br>
&gt;&gt;&nbsp;entries&nbsp;should&nbsp;be&nbsp;used&nbsp;here...&nbsp;perhaps&nbsp;&#39;auto-caching&nbsp;namespace&#39;.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;fallback&nbsp;namespace&nbsp;[factored&nbsp;out&nbsp;of&nbsp;opportunistic-caching]&lt;br&gt;<br>
&gt;&gt;&nbsp;This&nbsp;form&nbsp;of&nbsp;namespace&nbsp;is&nbsp;addressed&nbsp;by&nbsp;the&nbsp;spec&nbsp;at&nbsp;present,&nbsp;but&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;co-mingled&nbsp;with&nbsp;the&nbsp;auto-caching&nbsp;feature.&nbsp;This&nbsp;is&nbsp;a&nbsp;proposal&nbsp;to&nbsp;detangle&lt;br&gt;<br>
&gt;&gt;&nbsp;them&nbsp;from&nbsp;one&nbsp;another.&nbsp;The&nbsp;basic&nbsp;idea&nbsp;is&nbsp;to&nbsp;load&nbsp;the&nbsp;resource&nbsp;as&nbsp;usual,&nbsp;and&lt;br&gt;<br>
&gt;&gt;&nbsp;only&nbsp;upon&nbsp;failure&nbsp;fallback&nbsp;to&nbsp;a&nbsp;cached&nbsp;&#39;namespace-handler&#39;...&nbsp;no&lt;br&gt;<br>
&gt;&gt;&nbsp;auto-caching&nbsp;involved.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;intercept&nbsp;namespaces&nbsp;[new]&lt;br&gt;<br>
&gt;&gt;&nbsp;This&nbsp;form&nbsp;of&nbsp;namespace&nbsp;is&nbsp;not&nbsp;in&nbsp;the&nbsp;spec&nbsp;at&nbsp;present.&nbsp;This&nbsp;is&nbsp;a&nbsp;proposal&lt;br&gt;<br>
&gt;&gt;&nbsp;to&nbsp;add&nbsp;it.&nbsp;It&nbsp;is&nbsp;a&nbsp;heavily&nbsp;used&nbsp;feature&nbsp;of&nbsp;the&nbsp;Gears&nbsp;LocalServer.&nbsp;The&nbsp;basic&lt;br&gt;<br>
&gt;&gt;&nbsp;idea&nbsp;is&nbsp;to&nbsp;intercept&nbsp;requests&nbsp;into&nbsp;this&nbsp;namespace&nbsp;and&nbsp;satisfy&nbsp;them&nbsp;with&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;cached&nbsp;&#39;namespace-handler&#39;&nbsp;&nbsp;without&nbsp;consulting&nbsp;the&nbsp;server.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;summary&nbsp;of&nbsp;the&nbsp;above&nbsp;change&nbsp;requests&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Cached&nbsp;resource&nbsp;categories&nbsp;(just&nbsp;name&nbsp;changes):&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;toplevel&nbsp;-&nbsp;pages&nbsp;which&nbsp;&lt;html&nbsp;manifest=&#39;manifesturlforthisappcache&#39;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;manifest&nbsp;-&nbsp;the&nbsp;manifest&nbsp;file&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;explicit&nbsp;-&nbsp;explicitly&nbsp;listed&nbsp;in&nbsp;the&nbsp;manifest&nbsp;file&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;namespace-handler&nbsp;-&nbsp;resource&nbsp;which&nbsp;is&nbsp;utilized&nbsp;by&nbsp;a&nbsp;name-space&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;auto-cached&nbsp;-&nbsp;resources&nbsp;that&nbsp;have&nbsp;been&nbsp;cached&nbsp;via&nbsp;the&nbsp;auto-cache&lt;br&gt;<br>
&gt;&gt;&nbsp;namespace&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;manually-cached&nbsp;-&nbsp;resources&nbsp;that&nbsp;have&nbsp;been&nbsp;cached&nbsp;via&nbsp;a&nbsp;javascript&nbsp;call&lt;br&gt;<br>
&gt;&gt;&nbsp;to&nbsp;appCache.add()&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Namespaces&nbsp;(name&nbsp;changes,&nbsp;refactored&nbsp;things&nbsp;a&nbsp;bit,&nbsp;and&nbsp;introduced&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;&#39;intercept&#39;&nbsp;namespace)&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;bypass&nbsp;-&nbsp;bypasses&nbsp;further&nbsp;lookup&nbsp;within&nbsp;the&nbsp;appcache&nbsp;and&nbsp;resorts&nbsp;to&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;usual&nbsp;resource&nbsp;loading&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;intercept&nbsp;-&nbsp;doesn&#39;t&nbsp;hit&nbsp;server,&nbsp;serves&nbsp;a&nbsp;cached&nbsp;namespace-handler&lt;br&gt;<br>
&gt;&gt;&nbsp;resource&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;autocache&nbsp;-&nbsp;hits&nbsp;server,&nbsp;caches&nbsp;successful&nbsp;response&nbsp;for&nbsp;future&nbsp;use,&nbsp;on&lt;br&gt;<br>
&gt;&gt;&nbsp;server&nbsp;errors&nbsp;serves&nbsp;a&nbsp;cached&nbsp;namespace-handler&nbsp;resource&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;fallback&nbsp;-&nbsp;hits&nbsp;server,&nbsp;does&nbsp;NOT&nbsp;cache&nbsp;successful&nbsp;responses,&nbsp;on&nbsp;server&lt;br&gt;<br>
&gt;&gt;&nbsp;errors&nbsp;serves&nbsp;a&nbsp;cached&nbsp;namespace-handler&nbsp;resource&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Manifest&nbsp;file&nbsp;section&nbsp;headers:&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;BYPASS:&nbsp;list&nbsp;of&nbsp;url&nbsp;[namespaces/filters]&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;CACHE:&nbsp;list&nbsp;of&nbsp;exact&nbsp;[urls]&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;INTERCEPT:&nbsp;list&nbsp;of&nbsp;[urlnamespaces,&nbsp;namespace-handler&nbsp;url]&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;AUTOCACHE:&nbsp;list&nbsp;of&nbsp;[urlnamespaces,&nbsp;namespace-handler&nbsp;url]&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;FALLBACK:&nbsp;:&nbsp;list&nbsp;of&nbsp;[urlnamespaces,&nbsp;namespace-handler&nbsp;url]&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Scriptlets&nbsp;-&nbsp;or&nbsp;dynamic&nbsp;namespace-handlers&nbsp;[new&nbsp;idea]&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Something&nbsp;we&nbsp;wrestled&nbsp;with&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;putting&nbsp;together&nbsp;the&nbsp;Gears&lt;br&gt;<br>
&gt;&gt;&nbsp;LocalServer&nbsp;was&nbsp;the&nbsp;distinction&nbsp;between&nbsp;intercepting&nbsp;requests&nbsp;for&nbsp;urls&nbsp;and&lt;br&gt;<br>
&gt;&gt;&nbsp;identifying&nbsp;the&nbsp;appropiate&nbsp;cached&nbsp;resource&nbsp;for&nbsp;that&nbsp;request.&nbsp;We&nbsp;ended&nbsp;up&lt;br&gt;<br>
&gt;&gt;&nbsp;with&nbsp;a&nbsp;declarative&nbsp;manifest&nbsp;file,&nbsp;similar&nbsp;to&nbsp;but&nbsp;different&nbsp;from&nbsp;what&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;contained&nbsp;in&nbsp;this&nbsp;spec.&nbsp;This&nbsp;wasn&#39;t&nbsp;an&nbsp;altogether&nbsp;satisfying&nbsp;answer.&nbsp;The&lt;br&gt;<br>
&gt;&gt;&nbsp;expressiveness&nbsp;of&nbsp;the&nbsp;language&nbsp;to&nbsp;match/filter&nbsp;requested&nbsp;urls&nbsp;is&nbsp;limited&nbsp;in&lt;br&gt;<br>
&gt;&gt;&nbsp;Gears&nbsp;and&nbsp;this&nbsp;spec&nbsp;shares&nbsp;that&nbsp;same&nbsp;characterization.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Something&nbsp;else&nbsp;we&#39;ve&nbsp;wrestled&nbsp;with&nbsp;in&nbsp;Gears&nbsp;was&nbsp;having&nbsp;to&nbsp;do&nbsp;awkward&lt;br&gt;<br>
&gt;&gt;&nbsp;redesigns&nbsp;in&nbsp;corners&nbsp;of&nbsp;a&nbsp;web&nbsp;application&nbsp;in&nbsp;order&nbsp;to&nbsp;&#39;take&nbsp;it&nbsp;offline&#39;,&lt;br&gt;<br>
&gt;&gt;&nbsp;single-sign-on&nbsp;for&nbsp;example.&nbsp;In&nbsp;general,&nbsp;anywhere&nbsp;an&nbsp;application&nbsp;relies&nbsp;on&lt;br&gt;<br>
&gt;&gt;&nbsp;HTTP&nbsp;features&nbsp;more&nbsp;than&nbsp;HTML&nbsp;to&nbsp;influence&nbsp;navigation&nbsp;or&nbsp;conditional&nbsp;resource&lt;br&gt;<br>
&gt;&gt;&nbsp;loading,&nbsp;it&#39;s&nbsp;difficult&nbsp;to&nbsp;address&nbsp;with&nbsp;a&nbsp;static&nbsp;cache.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;So&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;propose&nbsp;extending&nbsp;this&nbsp;spec&nbsp;to&nbsp;incorporate&nbsp;&#39;dynamically&lt;br&gt;<br>
&gt;&gt;&nbsp;generated&nbsp;responses&#39;.&nbsp;I&nbsp;think&nbsp;this&nbsp;capability&nbsp;fits&nbsp;into&nbsp;this&nbsp;corner&nbsp;of&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;HTML5&nbsp;spec&nbsp;because&nbsp;this&nbsp;is&nbsp;most&nbsp;directly&nbsp;useful&nbsp;in&nbsp;the&nbsp;&quot;Offline&nbsp;Web&lt;br&gt;<br>
&gt;&gt;&nbsp;Application&quot;&nbsp;scenario.&nbsp;The&nbsp;basic&nbsp;idea&nbsp;is&nbsp;to&nbsp;execute&nbsp;application&nbsp;code&lt;br&gt;<br>
&gt;&gt;&nbsp;(script)&nbsp;to&nbsp;produce&nbsp;responses&nbsp;to&nbsp;intercepted&nbsp;resource&nbsp;loads.&nbsp;The&nbsp;application&lt;br&gt;<br>
&gt;&gt;&nbsp;code&nbsp;is&nbsp;executed&nbsp;in&nbsp;the&nbsp;background&nbsp;and&nbsp;can&nbsp;formulate&nbsp;a&nbsp;response&lt;br&gt;<br>
&gt;&gt;&nbsp;asynchronously.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Some&nbsp;handwaving&nbsp;where&nbsp;this&nbsp;could&nbsp;hang&nbsp;off&nbsp;of&nbsp;this&nbsp;spec&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Modify&nbsp;namespace-handlers&nbsp;entries&nbsp;to&nbsp;have&nbsp;an&nbsp;attitional&nbsp;attribute&nbsp;to&lt;br&gt;<br>
&gt;&gt;&nbsp;indicate&nbsp;that&nbsp;they&nbsp;are&nbsp;to&nbsp;be&nbsp;executed&nbsp;rather&nbsp;than&nbsp;returned&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;And&nbsp;some&nbsp;handwaving&nbsp;at&nbsp;what&nbsp;a&nbsp;scriptlet&nbsp;can&nbsp;do...&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Can&nbsp;read&nbsp;the&nbsp;request&nbsp;headers&nbsp;and&nbsp;POST&nbsp;body&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Can&nbsp;set&nbsp;response&nbsp;status&nbsp;code&nbsp;and&nbsp;headers&nbsp;(redirects)&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Can&nbsp;generate&nbsp;a&nbsp;textual&nbsp;response&nbsp;body&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Can&nbsp;designate&nbsp;a&nbsp;non-executable&nbsp;cached&nbsp;resource&nbsp;to&nbsp;be&nbsp;returned&nbsp;in&lt;br&gt;<br>
&gt;&gt;&nbsp;response&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Can&nbsp;decide&nbsp;to&nbsp;&#39;bypass&#39;&nbsp;handling&nbsp;of&nbsp;a&nbsp;request&nbsp;and&nbsp;defer&nbsp;to&nbsp;the&nbsp;usual&lt;br&gt;<br>
&gt;&gt;&nbsp;resource&nbsp;loading&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Can&nbsp;decide&nbsp;to&nbsp;perform&nbsp;the&nbsp;usual&nbsp;resource&nbsp;loading,&nbsp;but&nbsp;to&nbsp;have&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;response&nbsp;added&nbsp;to&nbsp;the&nbsp;appCache&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Can&nbsp;access&nbsp;HTML5Database&nbsp;APIs&lt;br&gt;<br>
&gt;&gt;&nbsp;*&nbsp;Can&nbsp;utlize&nbsp;XmlHttpRequest&nbsp;to&nbsp;communicate&nbsp;with&nbsp;a&nbsp;server&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;This&nbsp;would&nbsp;obviously&nbsp;be&nbsp;significant&nbsp;addition&nbsp;to&nbsp;the&nbsp;spec,&nbsp;but&nbsp;i&nbsp;do&nbsp;think&lt;br&gt;<br>
&gt;&gt;&nbsp;this&nbsp;is&nbsp;worth&nbsp;consideration&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;&#39;offline&nbsp;applications&#39;.&nbsp;Based&lt;br&gt;<br>
&gt;&gt;&nbsp;on&nbsp;observations&nbsp;of&nbsp;app&nbsp;developers&nbsp;wrestling&nbsp;with&nbsp;Gears,&nbsp;there&nbsp;have&nbsp;been&lt;br&gt;<br>
&gt;&gt;&nbsp;several&nbsp;pain&nbsp;points.&nbsp;The&nbsp;HTML5ApplicationCache&nbsp;addresses&nbsp;one&nbsp;of&nbsp;them&lt;br&gt;<br>
&gt;&gt;&nbsp;with&nbsp;per-application&nbsp;caches.&nbsp;This&nbsp;addition&nbsp;would&nbsp;address&nbsp;the&nbsp;second&nbsp;of&lt;br&gt;<br>
&gt;&gt;&nbsp;them.&nbsp;&nbsp;(Another&nbsp;pain&nbsp;point&nbsp;has&nbsp;been&nbsp;application&nbsp;deployment).&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Am&nbsp;interested&nbsp;in&nbsp;seeing&nbsp;what&nbsp;others&nbsp;think&nbsp;of&nbsp;an&nbsp;addition&nbsp;along&nbsp;these&lt;br&gt;<br>
&gt;&gt;&nbsp;lines.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&quot;He&nbsp;was&nbsp;pierced&nbsp;for&nbsp;our&nbsp;transgressions,&nbsp;he&nbsp;was&nbsp;crushed&nbsp;for&nbsp;our&nbsp;iniquities;&nbsp;the&nbsp;punishment&nbsp;that&nbsp;brought&nbsp;us&nbsp;peace&nbsp;was&nbsp;upon&nbsp;him,&nbsp;and&nbsp;by&nbsp;his&nbsp;wounds&nbsp;we&nbsp;are&nbsp;healed.&nbsp;We&nbsp;all,&nbsp;like&nbsp;sheep,&nbsp;have&nbsp;gone&nbsp;astray,&nbsp;each&nbsp;of&nbsp;us&nbsp;has&nbsp;turned&nbsp;to&nbsp;his&nbsp;own&nbsp;way;&nbsp;and&nbsp;the&nbsp;LORD&nbsp;has&nbsp;laid&nbsp;on&nbsp;him&nbsp;the&nbsp;iniquity&nbsp;of&nbsp;us&nbsp;all.&quot;&nbsp;[Isaiah&nbsp;53:5-6]&lt;br&gt;<br>
<br>
&lt;/div&gt;<br>

</tt>
