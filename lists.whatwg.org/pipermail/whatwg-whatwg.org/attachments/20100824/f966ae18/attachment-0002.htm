<tt>
At&nbsp;least&nbsp;spec&nbsp;tells&nbsp;that&nbsp;if&nbsp;an&nbsp;iframe&nbsp;is&nbsp;detached&nbsp;from&nbsp;the&nbsp;DOM&nbsp;and&nbsp;then&nbsp;becomes&nbsp;eligible&nbsp;for&nbsp;GC&nbsp;(not&nbsp;hold&nbsp;via&nbsp;JS&nbsp;reference&nbsp;not&nbsp;DOM&nbsp;connection)&nbsp;-&nbsp;it&nbsp;gets&nbsp;unloaded&nbsp;w/o&nbsp;onunload&nbsp;firing&nbsp;(4.8.2):&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;background-color:&nbsp;transparent;&nbsp;font-family:&nbsp;Tinos;&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;<br>
&lt;span&nbsp;id=&quot;internal-source-marker_0.606545289978385&quot;&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;if&nbsp;an&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#the-iframe-element&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Verdana;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;153);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;iframe&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&nbsp;is&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#remove-an-element-from-a-document&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;removed&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&nbsp;from&nbsp;a&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#document&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Verdana;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;153);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;Document&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&nbsp;and&nbsp;is&nbsp;then&nbsp;subsequently&nbsp;garbage&nbsp;collected,&nbsp;this&nbsp;will&nbsp;likely&nbsp;mean&nbsp;(in&nbsp;the&nbsp;absence&nbsp;of&nbsp;other&nbsp;references)&nbsp;that&nbsp;the&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#child-browsing-context&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;child&nbsp;browsing&nbsp;context&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&#39;s&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#windowproxy&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Verdana;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;153);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;WindowProxy&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&nbsp;object&nbsp;will&nbsp;become&nbsp;eligble&nbsp;for&nbsp;garbage&nbsp;collection,&nbsp;which&nbsp;will&nbsp;then&nbsp;lead&nbsp;to&nbsp;that&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;browsing&nbsp;context&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&nbsp;being&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#a-browsing-context-is-discarded&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;discarded&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;,&nbsp;which&nbsp;will&nbsp;then&nbsp;lead&nbsp;to&nbsp;its&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#document&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Verdana;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;153);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;Document&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&nbsp;being&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#discard-a-document&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;discarded&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&nbsp;also.&nbsp;This&nbsp;happens&nbsp;without&nbsp;notice&nbsp;to&nbsp;any&nbsp;scripts&nbsp;running&nbsp;in&nbsp;that&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#document&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Verdana;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;153);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;Document&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;;&nbsp;for&nbsp;example,&nbsp;no&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Verdana;&nbsp;color:&nbsp;rgb(255,&nbsp;69,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;unload&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&nbsp;events&nbsp;are&nbsp;fired&nbsp;(the&nbsp;&quot;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#unload-a-document&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;underline;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;unload&nbsp;a&nbsp;document&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Arial;&nbsp;color:&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;background-color:&nbsp;transparent;&nbsp;font-weight:&nbsp;bold;&nbsp;font-style:&nbsp;italic;&nbsp;text-decoration:&nbsp;none;&nbsp;vertical-align:&nbsp;baseline;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&quot;&nbsp;steps&nbsp;are&nbsp;not&nbsp;run).&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Seems&nbsp;there&nbsp;are&nbsp;bugs&nbsp;to&nbsp;fix&nbsp;:-) &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;24,&nbsp;2010&nbsp;at&nbsp;3:42&nbsp;PM,&nbsp;Dirk&nbsp;Pranke&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:dpranke@chromium.org&quot;&gt;dpranke@chromium.org&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;On&nbsp;a&nbsp;related&nbsp;note,&nbsp;the&nbsp;behavior&nbsp;of&nbsp;onUnload&nbsp;in&nbsp;this&nbsp;situation&nbsp;is&nbsp;quite&lt;br&gt;<br>
unclear.&nbsp;Should&nbsp;onUnload()&nbsp;fire&nbsp;if&nbsp;an&nbsp;iframe&nbsp;is&nbsp;detached&nbsp;from&nbsp;the&nbsp;DOM?&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;following&nbsp;test&nbsp;illustrates&nbsp;this,&nbsp;and&nbsp;behaves&nbsp;differently&nbsp;in&lt;br&gt;<br>
webkit,&nbsp;opera,&nbsp;FF,&nbsp;and&nbsp;IE&nbsp;(all&nbsp;of&nbsp;which&nbsp;are&nbsp;different&nbsp;from&nbsp;the&nbsp;spec&lt;br&gt;<br>
:).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://nfs.oldkentuckyshark.com/tests/detached_iframes/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://nfs.oldkentuckyshark.com/tests/detached_iframes/&lt;/a&gt;&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
--&nbsp;Dirk&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
On&nbsp;Tue,&nbsp;Aug&nbsp;24,&nbsp;2010&nbsp;at&nbsp;3:27&nbsp;PM,&nbsp;Dmitry&nbsp;Titov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:dimich@chromium.org&quot;&gt;dimich@chromium.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Indeed,&nbsp;in&nbsp;WebKit&nbsp;you&nbsp;normally&nbsp;see&nbsp;#1&nbsp;(iframe&nbsp;unloads).&nbsp;We&nbsp;have&nbsp;added&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;ability&nbsp;to&nbsp;move&nbsp;&#39;live&#39;&nbsp;iframe,&nbsp;as&nbsp;Adam&nbsp;mentions,&nbsp;potentially&nbsp;across&lt;br&gt;<br>
&gt;&nbsp;documents,&nbsp;while&nbsp;keeping&nbsp;it&nbsp;completely&nbsp;alive,&nbsp;with&nbsp;XHRs&nbsp;loading,&nbsp;events&lt;br&gt;<br>
&gt;&nbsp;firing&nbsp;etc&nbsp;(aka&nbsp;&#39;magic&nbsp;iframe&#39;&nbsp;feature).&nbsp;One&nbsp;would&nbsp;need&nbsp;to&nbsp;use&nbsp;adoptNode()&lt;br&gt;<br>
&gt;&nbsp;API&nbsp;to&nbsp;do&nbsp;that,&nbsp;something&nbsp;like:&lt;br&gt;<br>
&gt;&nbsp;var&nbsp;iframe&nbsp;=&nbsp;document.getElementById(&quot;test&quot;);&lt;br&gt;<br>
&gt;&nbsp;other_document.adoptNode(iframe);&lt;br&gt;<br>
&gt;&nbsp;other_document.getElementById(&quot;newParent&quot;).attachChild(iframe);&lt;br&gt;<br>
&gt;&nbsp;WebKit&nbsp;has&nbsp;a&nbsp;bug&nbsp;(&lt;a&nbsp;href=&quot;https://bugs.webkit.org/show_bug.cgi?id=13574&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bugs.webkit.org/show_bug.cgi?id=13574&lt;/a&gt;)&nbsp;to&nbsp;enable&lt;br&gt;<br>
&gt;&nbsp;moving&nbsp;iframes&nbsp;w/o&nbsp;reloading.&nbsp;FF&nbsp;has&nbsp;a&nbsp;bug&nbsp;on&nbsp;that&nbsp;as&nbsp;well&lt;br&gt;<br>
&gt;&nbsp;(&lt;a&nbsp;href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=254144&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bugzilla.mozilla.org/show_bug.cgi?id=254144&lt;/a&gt;)&nbsp;but&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;say&lt;br&gt;<br>
&gt;&nbsp;when&nbsp;exactly&nbsp;those&nbsp;will&nbsp;be&nbsp;fixed.&nbsp;I&nbsp;hope&nbsp;to&nbsp;fix&nbsp;WebKit&nbsp;issue&nbsp;at&nbsp;some&nbsp;point.&lt;br&gt;<br>
&gt;&nbsp;While&nbsp;discussing&nbsp;&#39;magic&nbsp;iframe&#39;,&nbsp;Ian&nbsp;Hickson&nbsp;pointed&nbsp;out&nbsp;that&nbsp;nothing&nbsp;in&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;spec&nbsp;actually&nbsp;mandates&nbsp;discarding&nbsp;the&nbsp;live&nbsp;document&nbsp;inside&nbsp;iframe&nbsp;simply&lt;br&gt;<br>
&gt;&nbsp;because&nbsp;it&#39;s&nbsp;iframe&nbsp;element&nbsp;is&nbsp;connected/disconnected&nbsp;to&nbsp;DOM&nbsp;of&nbsp;the&nbsp;parent&lt;br&gt;<br>
&gt;&nbsp;document.&nbsp;Here&nbsp;is&nbsp;a&nbsp;note&nbsp;from&nbsp;the&nbsp;HTML5&nbsp;spec&nbsp;about&nbsp;that:&lt;br&gt;<br>
&gt;&nbsp;Removing an iframe from&nbsp;a Document does&nbsp;not&nbsp;cause&nbsp;its browsing&nbsp;context to&nbsp;be&lt;br&gt;<br>
&gt;&nbsp;discarded.&nbsp;Indeed,&nbsp;an iframe&#39;s browsing&nbsp;context can&nbsp;survive&nbsp;its&nbsp;original&lt;br&gt;<br>
&gt;&nbsp;parent Document if&nbsp;its iframe is&nbsp;moved&nbsp;to&nbsp;another Document.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;So&nbsp;it&nbsp;seems&nbsp;the&nbsp;right&nbsp;behavior&nbsp;is&nbsp;to&nbsp;keep&nbsp;the&nbsp;content&nbsp;alive.&nbsp;It&#39;s&nbsp;not&nbsp;clear&lt;br&gt;<br>
&gt;&nbsp;why&nbsp;the&nbsp;events&nbsp;would&nbsp;not&nbsp;fire&nbsp;during&nbsp;DOM&nbsp;operations&nbsp;though.&nbsp;Perhaps&nbsp;they&lt;br&gt;<br>
&gt;&nbsp;should,&nbsp;since&nbsp;nothing&nbsp;is&nbsp;changing&nbsp;from&nbsp;the&nbsp;perspective&nbsp;of&nbsp;the&nbsp;document&lt;br&gt;<br>
&gt;&nbsp;loaded&nbsp;into&nbsp;iframe&nbsp;-&nbsp;for&nbsp;example,&nbsp;XHR&nbsp;probably&nbsp;should&nbsp;continue&nbsp;loading&lt;br&gt;<br>
&gt;&nbsp;content&nbsp;if&nbsp;it&nbsp;was&nbsp;doing&nbsp;so&nbsp;before&nbsp;iframe&nbsp;was&nbsp;disconnected&nbsp;from&nbsp;its&nbsp;parent&lt;br&gt;<br>
&gt;&nbsp;node.&nbsp;Doing&nbsp;some&nbsp;suspension&nbsp;(as&nbsp;for&nbsp;example&nbsp;is&nbsp;done&nbsp;when&nbsp;a&nbsp;page&nbsp;goes&nbsp;into&lt;br&gt;<br>
&gt;&nbsp;back-forward&nbsp;cache?)&nbsp;would&nbsp;be&nbsp;way&nbsp;more&nbsp;complex&nbsp;mechanism&nbsp;to&nbsp;have,&nbsp;with&lt;br&gt;<br>
&gt;&nbsp;necessary&nbsp;events&nbsp;on&nbsp;pause/unpause&nbsp;so&nbsp;the&nbsp;live&nbsp;document&nbsp;could&nbsp;re-start&nbsp;async&lt;br&gt;<br>
&gt;&nbsp;operations&nbsp;correctly.&lt;br&gt;<br>
&gt;&nbsp;Dmitry&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Tue,&nbsp;Aug&nbsp;24,&nbsp;2010&nbsp;at&nbsp;1:38&nbsp;PM,&nbsp;Adam&nbsp;Barth&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:w3c@adambarth.com&quot;&gt;w3c@adambarth.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;This&nbsp;seems&nbsp;related&nbsp;to&nbsp;the&nbsp;&quot;magic&nbsp;iframe&quot;&nbsp;concept&nbsp;that&nbsp;was&nbsp;recently&lt;br&gt;<br>
&gt;&gt;&nbsp;added&nbsp;in&nbsp;WebKit.&nbsp; Basically,&nbsp;magic&nbsp;iframe&nbsp;lets&nbsp;you&nbsp;move&nbsp;an&nbsp;iframe&nbsp;from&lt;br&gt;<br>
&gt;&gt;&nbsp;one&nbsp;document&nbsp;to&nbsp;another&nbsp;without&nbsp;blowing&nbsp;away&nbsp;the&nbsp;JavaScript/DOM&nbsp;state&lt;br&gt;<br>
&gt;&gt;&nbsp;of&nbsp;the&nbsp;iframe.&nbsp; The&nbsp;way&nbsp;this&nbsp;works&nbsp;is&nbsp;that&nbsp;the&nbsp;iframe&nbsp;remains&nbsp;&quot;alive&quot;&lt;br&gt;<br>
&gt;&gt;&nbsp;until&nbsp;the&nbsp;browser&nbsp;returns&nbsp;to&nbsp;the&nbsp;main&nbsp;event&nbsp;loop.&nbsp; If&nbsp;a&nbsp;living&nbsp;iframe&lt;br&gt;<br>
&gt;&gt;&nbsp;gets&nbsp;added&nbsp;to&nbsp;a&nbsp;document,&nbsp;then&nbsp;it&nbsp;keeps&nbsp;all&nbsp;it&#39;s&nbsp;state.&nbsp; This&nbsp;feature&lt;br&gt;<br>
&gt;&gt;&nbsp;is&nbsp;useful&nbsp;for&nbsp;sites&nbsp;like&nbsp;Gmail&nbsp;that&nbsp;have&nbsp;chat&nbsp;windows&nbsp;that&nbsp;can&nbsp;be&lt;br&gt;<br>
&gt;&gt;&nbsp;opened&nbsp;from&nbsp;the&nbsp;main&nbsp;document.&nbsp; If&nbsp;the&nbsp;user&nbsp;closes&nbsp;the&nbsp;main&nbsp;document,&lt;br&gt;<br>
&gt;&gt;&nbsp;the&nbsp;chat&nbsp;windows&nbsp;can&nbsp;adopt&nbsp;some&nbsp;iframe&nbsp;that&nbsp;keeps&nbsp;the&nbsp;proper&nbsp;state.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Adam&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;On&nbsp;Tue,&nbsp;Aug&nbsp;24,&nbsp;2010&nbsp;at&nbsp;1:30&nbsp;PM,&nbsp;Ben&nbsp;Lerner&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:blerner@cs.washington.edu&quot;&gt;blerner@cs.washington.edu&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; There&nbsp;seems&nbsp;to&nbsp;be&nbsp;a&nbsp;bit&nbsp;of&nbsp;disagreement&nbsp;among&nbsp;browsers&nbsp;about&nbsp;how&nbsp;event&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;loops&nbsp;and&nbsp;iframes&nbsp;interact&nbsp;when&nbsp;an&nbsp;iframe&nbsp;is&nbsp;removed&nbsp;and&nbsp;then&nbsp;reinserted&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;into&nbsp;its&nbsp;parent&nbsp;document.&nbsp; Consider&nbsp;the&nbsp;following&nbsp;two&nbsp;documents:&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;parent&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;document&nbsp;has&nbsp;a&nbsp;button&nbsp;that&nbsp;removes&nbsp;or&nbsp;reattaches&nbsp;an&nbsp;iframe&nbsp;to&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;document,&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;while&nbsp;the&nbsp;second&nbsp;simply&nbsp;sets&nbsp;an&nbsp;interval&nbsp;to&nbsp;update&nbsp;the&nbsp;page&nbsp;content.&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;Page1.html:&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;!DOCTYPE&nbsp;HTML&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;html&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;body&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;p&gt;&lt;button&nbsp;onclick=&quot;toggleInDoc();&quot;&gt;Show/hide&lt;/button&gt;&lt;/p&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;iframe&nbsp;id=&quot;test&quot;&nbsp;src=&quot;page2.html&quot;&gt;&lt;/iframe&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;script&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; &nbsp; var&nbsp;test&nbsp;=&nbsp;document.getElementById(&quot;test&quot;);&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; &nbsp; function&nbsp;toggleInDoc()&nbsp;{&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; &nbsp; &nbsp; if&nbsp;(test.parentNode&nbsp;==&nbsp;null)&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(test);&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; &nbsp; &nbsp; else&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(test);&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; &nbsp; }&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;/script&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;/body&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;/html&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;Page2.html:&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;!DOCTYPE&nbsp;HTML&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;html&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;body&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;p&nbsp;id=&quot;test&quot;&gt;&lt;/p&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;script&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; &nbsp; window.setInterval(function()&nbsp;{&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;document.getElementById(&quot;test&quot;).innerHTML&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;+=&nbsp;&quot;.&quot;;&nbsp;},&nbsp;500);&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;/script&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;/body&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;&lt;/html&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;Assume&nbsp;the&nbsp;user&nbsp;waits&nbsp;until&nbsp;the&nbsp;interval&nbsp;has&nbsp;fired&nbsp;several&nbsp;times,&nbsp;then&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;presses&nbsp;the&nbsp;button,&nbsp;waits&nbsp;a&nbsp;while,&nbsp;and&nbsp;presses&nbsp;it&nbsp;again.&nbsp; There&nbsp;are&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;three&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;possible&nbsp;outcomes:&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;1.&nbsp;When&nbsp;the&nbsp;iframe&nbsp;is&nbsp;reattached,&nbsp;the&nbsp;inner&nbsp;page&nbsp;reloads.&nbsp; This&nbsp;seems&nbsp;to&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;go&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;beyond&nbsp;the&nbsp;wording&nbsp;of&nbsp;the&nbsp;spec,&nbsp;which&nbsp;says&nbsp;only&nbsp;&quot;When&nbsp;an&nbsp;iframe&nbsp;element&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;first&nbsp;inserted&nbsp;into&nbsp;a&nbsp;document,&nbsp;the&nbsp;user&nbsp;agent&nbsp;must&nbsp;create&nbsp;a&nbsp;nested&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;browsing&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;context,&nbsp;and&nbsp;then&nbsp;process&nbsp;the&nbsp;iframe&nbsp;attributes&nbsp;for&nbsp;the&nbsp;first&nbsp;time.&quot;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; (This&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;isn&#39;t&nbsp;the&nbsp;first&nbsp;time&nbsp;the&nbsp;iframe&nbsp;is&nbsp;inserted&nbsp;into&nbsp;the&nbsp;document,&nbsp;so&nbsp;we&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;shouldn&#39;t&nbsp;process&nbsp;the&nbsp;iframe&nbsp;attributes&nbsp;again.)&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;2.&nbsp;The&nbsp;interval&nbsp;(and&nbsp;presumably,&nbsp;all&nbsp;events)&nbsp;in&nbsp;the&nbsp;iframe&nbsp;is&nbsp;paused&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;while&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;it&#39;s&nbsp;been&nbsp;detached&nbsp;(since&nbsp;the&nbsp;document&nbsp;is&nbsp;no&nbsp;longer&nbsp;fully&nbsp;active,&nbsp;but&nbsp;it&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;also&nbsp;has&nbsp;not&nbsp;been&nbsp;discarded&nbsp;because&nbsp;of&nbsp;the&nbsp;global&nbsp;reference&nbsp;to&nbsp;its&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;container&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;element).&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;3.&nbsp;The&nbsp;interval&nbsp;(and&nbsp;presumably,&nbsp;all&nbsp;events)&nbsp;continues&nbsp;to&nbsp;fire&nbsp;while&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;it&#39;s&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;been&nbsp;detached,&nbsp;and&nbsp;the&nbsp;content&nbsp;of&nbsp;page2&nbsp;will&nbsp;have&nbsp;changed&nbsp;while&nbsp;it&#39;s&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;been&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;detached&nbsp;from&nbsp;page1.&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;So&nbsp;far,&nbsp;Chrome&nbsp;6,&nbsp;Opera&nbsp;10.6&nbsp;and&nbsp;Firefox&nbsp;3.6&nbsp;follow&nbsp;#1,&nbsp;and&nbsp;IE&nbsp;8&nbsp;follows&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;#3.&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; My&nbsp;reading&nbsp;of&nbsp;the&nbsp;&quot;fully&nbsp;active&quot;&nbsp;clause&nbsp;of&nbsp;the&nbsp;spec&nbsp;leads&nbsp;me&nbsp;to&nbsp;expect&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;#2.&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp; Which&nbsp;of&nbsp;these&nbsp;behaviors&nbsp;is&nbsp;the&nbsp;desired&nbsp;one?&nbsp; And/or,&nbsp;would&nbsp;it&nbsp;be&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;desirable&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;to&nbsp;permit&nbsp;authors&nbsp;to&nbsp;specify&nbsp;which&nbsp;behavior&nbsp;they&nbsp;intend?&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;Thanks,&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&nbsp;~ben&lt;br&gt;<br>
&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
