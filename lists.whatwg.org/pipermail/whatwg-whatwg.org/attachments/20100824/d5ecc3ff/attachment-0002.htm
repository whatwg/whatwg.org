<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;history&nbsp;navigation&nbsp;analogy&nbsp;is&nbsp;a&nbsp;good&nbsp;one:&nbsp;pages&nbsp;presumably<br>
&nbsp;&nbsp;&nbsp;&nbsp;already&nbsp;have&nbsp;to&nbsp;handle&nbsp;the&nbsp;pageshow&nbsp;event&nbsp;to&nbsp;deal&nbsp;with&nbsp;being&nbsp;revived<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;history,&nbsp;and&nbsp;the&nbsp;browser&nbsp;already&nbsp;needs&nbsp;to&nbsp;know&nbsp;how&nbsp;to&nbsp;fire<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;event.&nbsp;&nbsp;Why&nbsp;not&nbsp;reuse&nbsp;those&nbsp;mechanisms?&nbsp;&nbsp;A&nbsp;strawman&nbsp;claim:<br>
&nbsp;&nbsp;&nbsp;&nbsp;Nothing&nbsp;may&nbsp;be&nbsp;changing&nbsp;from&nbsp;the&nbsp;perspective&nbsp;of&nbsp;the&nbsp;iframe,&nbsp;but&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;certainly&nbsp;is&nbsp;changing&nbsp;from&nbsp;the&nbsp;perspective&nbsp;of&nbsp;the&nbsp;container&nbsp;or&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;user:&nbsp;detaching&nbsp;an&nbsp;iframe&nbsp;from&nbsp;a&nbsp;page&nbsp;is&nbsp;like&nbsp;navigating&nbsp;a&nbsp;browsing<br>
&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;away&nbsp;from&nbsp;a&nbsp;page,&nbsp;putting&nbsp;it&nbsp;into&nbsp;hibernation&nbsp;until&nbsp;it's<br>
&nbsp;&nbsp;&nbsp;&nbsp;reattached&nbsp;to&nbsp;an&nbsp;active&nbsp;document/browsing&nbsp;context.&nbsp;&nbsp;What&nbsp;subtle&nbsp;or<br>
&nbsp;&nbsp;&nbsp;&nbsp;important&nbsp;facet&nbsp;of&nbsp;the&nbsp;web&nbsp;am&nbsp;I&nbsp;missing&nbsp;that&nbsp;breaks&nbsp;this&nbsp;analogy?<br>
&nbsp;&nbsp;&nbsp;&nbsp;(It&nbsp;wouldn't&nbsp;surprise&nbsp;me&nbsp;if&nbsp;I&nbsp;missed&nbsp;something&nbsp;obvious,&nbsp;either...&nbsp;:)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Another&nbsp;reason&nbsp;to&nbsp;consider&nbsp;suspending&nbsp;detached&nbsp;iframes:&nbsp;suppose&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;chat&nbsp;window&nbsp;example&nbsp;below,&nbsp;the&nbsp;iframe&nbsp;wasn't&nbsp;just&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;same-origin&nbsp;place&nbsp;to&nbsp;store&nbsp;global&nbsp;state,&nbsp;but&nbsp;also&nbsp;had&nbsp;its&nbsp;own&nbsp;UI,<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;callbacks&nbsp;and&nbsp;event&nbsp;handlers&nbsp;and&nbsp;whatnot.&nbsp;&nbsp;If,&nbsp;during&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;interim&nbsp;while&nbsp;the&nbsp;iframe&nbsp;was&nbsp;being&nbsp;detached,&nbsp;adopted&nbsp;and&nbsp;reattached,<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;frame&nbsp;executed&nbsp;a&nbsp;timer&nbsp;that&nbsp;popped&nbsp;up&nbsp;a&nbsp;modal&nbsp;alert&nbsp;or&nbsp;prompt<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;user,&nbsp;how&nbsp;would&nbsp;the&nbsp;user&nbsp;reasonably&nbsp;know&nbsp;where&nbsp;that&nbsp;alert<br>
&nbsp;&nbsp;&nbsp;&nbsp;came&nbsp;from?&nbsp;&nbsp;And&nbsp;what&nbsp;document(s?)&nbsp;should&nbsp;be&nbsp;paused&nbsp;while&nbsp;the&nbsp;alert<br>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;shown?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;stretch&nbsp;an&nbsp;analogy&nbsp;a&nbsp;bit:&nbsp;detaching&nbsp;an&nbsp;iframe,&nbsp;saving&nbsp;a&nbsp;reference<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;it,&nbsp;and&nbsp;then&nbsp;attaching&nbsp;it/adopting&nbsp;it&nbsp;later&nbsp;to&nbsp;another&nbsp;document<br>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;a&nbsp;bit&nbsp;like&nbsp;using&nbsp;DVR&nbsp;to&nbsp;record&nbsp;the&nbsp;rest&nbsp;of&nbsp;a&nbsp;TV&nbsp;show&nbsp;to&nbsp;watch<br>
&nbsp;&nbsp;&nbsp;&nbsp;later:&nbsp;I&nbsp;should&nbsp;get&nbsp;the&nbsp;same&nbsp;show,&nbsp;paused&nbsp;wherever&nbsp;I&nbsp;left&nbsp;off<br>
&nbsp;&nbsp;&nbsp;&nbsp;watching&nbsp;it,&nbsp;on&nbsp;whatever&nbsp;TV&nbsp;is&nbsp;convenient&nbsp;for&nbsp;me&nbsp;to&nbsp;watch&nbsp;it&nbsp;on.&nbsp;&nbsp;I<br>
&nbsp;&nbsp;&nbsp;&nbsp;shouldn't&nbsp;have&nbsp;to&nbsp;immediately&nbsp;start&nbsp;watching&nbsp;on&nbsp;the&nbsp;second&nbsp;screen&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;order&nbsp;to&nbsp;preserve&nbsp;state,&nbsp;and&nbsp;it&nbsp;shouldn't&nbsp;keep&nbsp;playing&nbsp;while&nbsp;I&nbsp;move<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;one&nbsp;screen&nbsp;to&nbsp;the&nbsp;other&nbsp;:)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Regarding&nbsp;XHR&nbsp;and&nbsp;such&nbsp;--&nbsp;I&nbsp;guess&nbsp;what&nbsp;I'm&nbsp;suggesting&nbsp;is&nbsp;suspending<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;event&nbsp;loop,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;suspending&nbsp;asynch&nbsp;processes.&nbsp;&nbsp;So<br>
&nbsp;&nbsp;&nbsp;&nbsp;XHR&nbsp;can&nbsp;continue&nbsp;to&nbsp;queue&nbsp;tasks;&nbsp;media&nbsp;can&nbsp;continue&nbsp;to&nbsp;buffer;<br>
&nbsp;&nbsp;&nbsp;&nbsp;resources&nbsp;can&nbsp;continue&nbsp;to&nbsp;load.&nbsp;&nbsp;When&nbsp;the&nbsp;document&nbsp;is&nbsp;reattached,&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;finds&nbsp;itself&nbsp;with&nbsp;a&nbsp;backlog&nbsp;of&nbsp;events&nbsp;to&nbsp;handle,&nbsp;which&nbsp;is&nbsp;the&nbsp;exact<br>
&nbsp;&nbsp;&nbsp;&nbsp;same&nbsp;situation&nbsp;as&nbsp;a&nbsp;very&nbsp;bursty&nbsp;network&nbsp;connection&nbsp;:)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;8/24/2010&nbsp;3:42&nbsp;PM,&nbsp;Dirk&nbsp;Pranke&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:AANLkTikyeBVh-=4vuwnoPPbmPvS=W2kSrCZ1U2BG36C7@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;a&nbsp;related&nbsp;note,&nbsp;the&nbsp;behavior&nbsp;of&nbsp;onUnload&nbsp;in&nbsp;this&nbsp;situation&nbsp;is&nbsp;quite<br>
unclear.&nbsp;Should&nbsp;onUnload()&nbsp;fire&nbsp;if&nbsp;an&nbsp;iframe&nbsp;is&nbsp;detached&nbsp;from&nbsp;the&nbsp;DOM?<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Indeed&nbsp;--&nbsp;it&nbsp;seems&nbsp;to&nbsp;me&nbsp;from&nbsp;the&nbsp;spec&nbsp;that&nbsp;it&nbsp;should&nbsp;not&nbsp;fire,<br>
&nbsp;&nbsp;&nbsp;&nbsp;until&nbsp;(following&nbsp;the&nbsp;snippet&nbsp;Dmitry&nbsp;quoted&nbsp;below)&nbsp;the&nbsp;last&nbsp;reference<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;iframe&nbsp;is&nbsp;dropped&nbsp;and&nbsp;therefore&nbsp;the&nbsp;browsing&nbsp;context&nbsp;can&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;discarded.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;the&nbsp;adoptNode&nbsp;workaround&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;bugs&nbsp;below&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;full&nbsp;fix.&nbsp;&nbsp;It&nbsp;gets&nbsp;us&nbsp;from&nbsp;behavior&nbsp;#1&nbsp;to&nbsp;behavior&nbsp;#3,&nbsp;but&nbsp;doesn't<br>
&nbsp;&nbsp;&nbsp;&nbsp;consider&nbsp;#2&nbsp;as&nbsp;a&nbsp;possibility.&nbsp;&nbsp;Certainly&nbsp;some&nbsp;loose&nbsp;ends&nbsp;to&nbsp;think<br>
&nbsp;&nbsp;&nbsp;&nbsp;about...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;~ben&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;8/24/2010&nbsp;3:27&nbsp;PM,&nbsp;Dmitry&nbsp;Titov&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:AANLkTinCrvEZkhvmKiTKnD8Hh2wpUZ+3obPPHp-p0ynH@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;Indeed,&nbsp;in&nbsp;WebKit&nbsp;you&nbsp;normally&nbsp;see&nbsp;#1&nbsp;(iframe<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unloads).&nbsp;We&nbsp;have&nbsp;added&nbsp;the&nbsp;ability&nbsp;to&nbsp;move&nbsp;'live'&nbsp;iframe,&nbsp;as&nbsp;Adam<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mentions,&nbsp;potentially&nbsp;across&nbsp;documents,&nbsp;while&nbsp;keeping&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;completely&nbsp;alive,&nbsp;with&nbsp;XHRs&nbsp;loading,&nbsp;events&nbsp;firing&nbsp;etc&nbsp;(aka&nbsp;'magic<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iframe'&nbsp;feature).&nbsp;One&nbsp;would&nbsp;need&nbsp;to&nbsp;use&nbsp;adoptNode()&nbsp;API&nbsp;to&nbsp;do<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that,&nbsp;something&nbsp;like:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;var&nbsp;iframe&nbsp;=&nbsp;document.getElementById(&quot;test&quot;);&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;other_document.adoptNode(iframe);&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;other_document.getElementById(&quot;newParent&quot;).attachChild(iframe);&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebKit&nbsp;has&nbsp;a&nbsp;bug&nbsp;(&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;https://bugs.webkit.org/show_bug.cgi?id=13574&quot;&gt;https://bugs.webkit.org/show_bug.cgi?id=13574&lt;/a&gt;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;enable&nbsp;moving&nbsp;iframes&nbsp;w/o&nbsp;reloading.&nbsp;FF&nbsp;has&nbsp;a&nbsp;bug&nbsp;on&nbsp;that&nbsp;as<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;well&nbsp;(&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=254144&quot;&gt;https://bugzilla.mozilla.org/show_bug.cgi?id=254144&lt;/a&gt;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;it's&nbsp;hard&nbsp;to&nbsp;say&nbsp;when&nbsp;exactly&nbsp;those&nbsp;will&nbsp;be&nbsp;fixed.&nbsp;I&nbsp;hope&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fix&nbsp;WebKit&nbsp;issue&nbsp;at&nbsp;some&nbsp;point.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;While&nbsp;discussing&nbsp;'magic&nbsp;iframe',&nbsp;Ian&nbsp;Hickson&nbsp;pointed&nbsp;out&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nothing&nbsp;in&nbsp;the&nbsp;spec&nbsp;actually&nbsp;mandates&nbsp;discarding&nbsp;the&nbsp;live<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document&nbsp;inside&nbsp;iframe&nbsp;simply&nbsp;because&nbsp;it's&nbsp;iframe&nbsp;element&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connected/disconnected&nbsp;to&nbsp;DOM&nbsp;of&nbsp;the&nbsp;parent&nbsp;document.&nbsp;Here&nbsp;is&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;note&nbsp;from&nbsp;the&nbsp;HTML5&nbsp;spec&nbsp;about&nbsp;that:&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sans-serif,'Droid&nbsp;Sans&nbsp;Fallback';&nbsp;font-size:&nbsp;medium;&nbsp;color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb(0,&nbsp;128,&nbsp;0);&nbsp;font-style:&nbsp;italic;&nbsp;font-weight:&nbsp;bold;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;21px;&quot;&gt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#remove-an-element-from-a-document&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title=&quot;remove&nbsp;an&nbsp;element&nbsp;from&nbsp;a&nbsp;document&quot;&nbsp;style=&quot;color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:&nbsp;transparent;&quot;&gt;Removing&lt;/a&gt;&nbsp;an&nbsp;&lt;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;font-size:&nbsp;inherit;&nbsp;font-family:&nbsp;monospace,'Droid<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sans&nbsp;Fallback',sans-serif;&nbsp;font-variant:&nbsp;normal;&nbsp;color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb(255,&nbsp;69,&nbsp;0);&quot;&gt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#the-iframe-element&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;inherit;&nbsp;background-color:&nbsp;transparent;&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;&nbsp;from<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;&lt;code&nbsp;style=&quot;font-size:&nbsp;inherit;&nbsp;font-family:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monospace,'Droid&nbsp;Sans&nbsp;Fallback',sans-serif;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;color:&nbsp;rgb(255,&nbsp;69,&nbsp;0);&quot;&gt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#document&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;inherit;&nbsp;background-color:&nbsp;transparent;&quot;&gt;Document&lt;/a&gt;&lt;/code&gt;&nbsp;does<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;cause&nbsp;its&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transparent;&quot;&gt;browsing&nbsp;context&lt;/a&gt;&nbsp;to&nbsp;be&nbsp;discarded.&nbsp;Indeed,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;&lt;code&nbsp;style=&quot;font-size:&nbsp;inherit;&nbsp;font-family:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monospace,'Droid&nbsp;Sans&nbsp;Fallback',sans-serif;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;color:&nbsp;rgb(255,&nbsp;69,&nbsp;0);&quot;&gt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#the-iframe-element&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;inherit;&nbsp;background-color:&nbsp;transparent;&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;'s&nbsp;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#browsing-context&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;204);&nbsp;background-color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transparent;&quot;&gt;browsing&nbsp;context&lt;/a&gt;&nbsp;can&nbsp;survive&nbsp;its&nbsp;original<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent&nbsp;&lt;code&nbsp;style=&quot;font-size:&nbsp;inherit;&nbsp;font-family:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monospace,'Droid&nbsp;Sans&nbsp;Fallback',sans-serif;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;color:&nbsp;rgb(255,&nbsp;69,&nbsp;0);&quot;&gt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#document&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;inherit;&nbsp;background-color:&nbsp;transparent;&quot;&gt;Document&lt;/a&gt;&lt;/code&gt;&nbsp;if<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;its&nbsp;&lt;code&nbsp;style=&quot;font-size:&nbsp;inherit;&nbsp;font-family:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monospace,'Droid&nbsp;Sans&nbsp;Fallback',sans-serif;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;color:&nbsp;rgb(255,&nbsp;69,&nbsp;0);&quot;&gt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#the-iframe-element&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;inherit;&nbsp;background-color:&nbsp;transparent;&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moved&nbsp;to&nbsp;another&nbsp;&lt;code&nbsp;style=&quot;font-size:&nbsp;inherit;&nbsp;font-family:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monospace,'Droid&nbsp;Sans&nbsp;Fallback',sans-serif;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;color:&nbsp;rgb(255,&nbsp;69,&nbsp;0);&quot;&gt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#document&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;inherit;&nbsp;background-color:&nbsp;transparent;&quot;&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;So&nbsp;it&nbsp;seems&nbsp;the&nbsp;right&nbsp;behavior&nbsp;is&nbsp;to&nbsp;keep&nbsp;the&nbsp;content&nbsp;alive.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It's&nbsp;not&nbsp;clear&nbsp;why&nbsp;the&nbsp;events&nbsp;would&nbsp;not&nbsp;fire&nbsp;during&nbsp;DOM<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operations&nbsp;though.&nbsp;Perhaps&nbsp;they&nbsp;should,&nbsp;since&nbsp;nothing&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changing&nbsp;from&nbsp;the&nbsp;perspective&nbsp;of&nbsp;the&nbsp;document&nbsp;loaded&nbsp;into&nbsp;iframe<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;for&nbsp;example,&nbsp;XHR&nbsp;probably&nbsp;should&nbsp;continue&nbsp;loading&nbsp;content&nbsp;if<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;was&nbsp;doing&nbsp;so&nbsp;before&nbsp;iframe&nbsp;was&nbsp;disconnected&nbsp;from&nbsp;its&nbsp;parent<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node.&nbsp;Doing&nbsp;some&nbsp;suspension&nbsp;(as&nbsp;for&nbsp;example&nbsp;is&nbsp;done&nbsp;when&nbsp;a&nbsp;page<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goes&nbsp;into&nbsp;back-forward&nbsp;cache?)&nbsp;would&nbsp;be&nbsp;way&nbsp;more&nbsp;complex<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mechanism&nbsp;to&nbsp;have,&nbsp;with&nbsp;necessary&nbsp;events&nbsp;on&nbsp;pause/unpause&nbsp;so&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;live&nbsp;document&nbsp;could&nbsp;re-start&nbsp;async&nbsp;operations&nbsp;correctly.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Dmitry&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;24,&nbsp;2010&nbsp;at&nbsp;1:38&nbsp;PM,&nbsp;Adam<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Barth&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;mailto:w3c@adambarth.com&quot;&gt;w3c@adambarth.com&lt;/a&gt;&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;seems&nbsp;related&nbsp;to&nbsp;the&nbsp;&quot;magic&nbsp;iframe&quot;&nbsp;concept&nbsp;that&nbsp;was<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recently&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;added&nbsp;in&nbsp;WebKit.&nbsp;&nbsp;Basically,&nbsp;magic&nbsp;iframe&nbsp;lets&nbsp;you&nbsp;move&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iframe&nbsp;from&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;document&nbsp;to&nbsp;another&nbsp;without&nbsp;blowing&nbsp;away&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JavaScript/DOM&nbsp;state&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;iframe.&nbsp;&nbsp;The&nbsp;way&nbsp;this&nbsp;works&nbsp;is&nbsp;that&nbsp;the&nbsp;iframe<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remains&nbsp;&quot;alive&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;until&nbsp;the&nbsp;browser&nbsp;returns&nbsp;to&nbsp;the&nbsp;main&nbsp;event&nbsp;loop.&nbsp;&nbsp;If&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;living&nbsp;iframe&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gets&nbsp;added&nbsp;to&nbsp;a&nbsp;document,&nbsp;then&nbsp;it&nbsp;keeps&nbsp;all&nbsp;it's&nbsp;state.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;feature&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;useful&nbsp;for&nbsp;sites&nbsp;like&nbsp;Gmail&nbsp;that&nbsp;have&nbsp;chat&nbsp;windows&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;be&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opened&nbsp;from&nbsp;the&nbsp;main&nbsp;document.&nbsp;&nbsp;If&nbsp;the&nbsp;user&nbsp;closes&nbsp;the&nbsp;main<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;chat&nbsp;windows&nbsp;can&nbsp;adopt&nbsp;some&nbsp;iframe&nbsp;that&nbsp;keeps&nbsp;the&nbsp;proper<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adam&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Tue,&nbsp;Aug&nbsp;24,&nbsp;2010&nbsp;at&nbsp;1:30&nbsp;PM,&nbsp;Ben&nbsp;Lerner&nbsp;&lt;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;mailto:blerner@cs.washington.edu&quot;&gt;blerner@cs.washington.edu&lt;/a&gt;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;There&nbsp;seems&nbsp;to&nbsp;be&nbsp;a&nbsp;bit&nbsp;of&nbsp;disagreement&nbsp;among&nbsp;browsers<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;about&nbsp;how&nbsp;event&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;loops&nbsp;and&nbsp;iframes&nbsp;interact&nbsp;when&nbsp;an&nbsp;iframe&nbsp;is&nbsp;removed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;then&nbsp;reinserted&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;into&nbsp;its&nbsp;parent&nbsp;document.&nbsp;&nbsp;Consider&nbsp;the&nbsp;following&nbsp;two<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;documents:&nbsp;the&nbsp;parent&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;document&nbsp;has&nbsp;a&nbsp;button&nbsp;that&nbsp;removes&nbsp;or&nbsp;reattaches&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iframe&nbsp;to&nbsp;the&nbsp;document,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;while&nbsp;the&nbsp;second&nbsp;simply&nbsp;sets&nbsp;an&nbsp;interval&nbsp;to&nbsp;update&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page&nbsp;content.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Page1.html:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;!DOCTYPE&nbsp;HTML&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;html&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;body&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;p&gt;&lt;button<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onclick=&quot;toggleInDoc();&quot;&gt;Show/hide&lt;/button&gt;&lt;/p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;iframe&nbsp;id=&quot;test&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;src=&quot;page2.html&quot;&gt;&lt;/iframe&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;script&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;test&nbsp;=&nbsp;document.getElementById(&quot;test&quot;);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;toggleInDoc()&nbsp;{&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(test.parentNode&nbsp;==&nbsp;null)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.body.appendChild(test);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.body.removeChild(test);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;/script&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;/body&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;/html&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Page2.html:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;!DOCTYPE&nbsp;HTML&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;html&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;body&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;p&nbsp;id=&quot;test&quot;&gt;&lt;/p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;script&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;window.setInterval(function()&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById(&quot;test&quot;).innerHTML&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;+=&nbsp;&quot;.&quot;;&nbsp;},&nbsp;500);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;/script&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;/body&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;/html&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Assume&nbsp;the&nbsp;user&nbsp;waits&nbsp;until&nbsp;the&nbsp;interval&nbsp;has&nbsp;fired<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;several&nbsp;times,&nbsp;then&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;presses&nbsp;the&nbsp;button,&nbsp;waits&nbsp;a&nbsp;while,&nbsp;and&nbsp;presses&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;again.&nbsp;&nbsp;There&nbsp;are&nbsp;three&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;possible&nbsp;outcomes:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;1.&nbsp;When&nbsp;the&nbsp;iframe&nbsp;is&nbsp;reattached,&nbsp;the&nbsp;inner&nbsp;page<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reloads.&nbsp;&nbsp;This&nbsp;seems&nbsp;to&nbsp;go&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;beyond&nbsp;the&nbsp;wording&nbsp;of&nbsp;the&nbsp;spec,&nbsp;which&nbsp;says&nbsp;only&nbsp;&quot;When<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;iframe&nbsp;element&nbsp;is&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;first&nbsp;inserted&nbsp;into&nbsp;a&nbsp;document,&nbsp;the&nbsp;user&nbsp;agent&nbsp;must<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create&nbsp;a&nbsp;nested&nbsp;browsing&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;context,&nbsp;and&nbsp;then&nbsp;process&nbsp;the&nbsp;iframe&nbsp;attributes&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;time.&quot;&nbsp;&nbsp;(This&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;isn't&nbsp;the&nbsp;first&nbsp;time&nbsp;the&nbsp;iframe&nbsp;is&nbsp;inserted&nbsp;into&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document,&nbsp;so&nbsp;we&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;shouldn't&nbsp;process&nbsp;the&nbsp;iframe&nbsp;attributes&nbsp;again.)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;2.&nbsp;The&nbsp;interval&nbsp;(and&nbsp;presumably,&nbsp;all&nbsp;events)&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iframe&nbsp;is&nbsp;paused&nbsp;while&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;it's&nbsp;been&nbsp;detached&nbsp;(since&nbsp;the&nbsp;document&nbsp;is&nbsp;no&nbsp;longer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fully&nbsp;active,&nbsp;but&nbsp;it&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;also&nbsp;has&nbsp;not&nbsp;been&nbsp;discarded&nbsp;because&nbsp;of&nbsp;the&nbsp;global<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reference&nbsp;to&nbsp;its&nbsp;container&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;element).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;3.&nbsp;The&nbsp;interval&nbsp;(and&nbsp;presumably,&nbsp;all&nbsp;events)&nbsp;continues<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;fire&nbsp;while&nbsp;it's&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;been&nbsp;detached,&nbsp;and&nbsp;the&nbsp;content&nbsp;of&nbsp;page2&nbsp;will&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed&nbsp;while&nbsp;it's&nbsp;been&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;detached&nbsp;from&nbsp;page1.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;So&nbsp;far,&nbsp;Chrome&nbsp;6,&nbsp;Opera&nbsp;10.6&nbsp;and&nbsp;Firefox&nbsp;3.6&nbsp;follow&nbsp;#1,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;IE&nbsp;8&nbsp;follows&nbsp;#3.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;My&nbsp;reading&nbsp;of&nbsp;the&nbsp;&quot;fully&nbsp;active&quot;&nbsp;clause&nbsp;of&nbsp;the&nbsp;spec<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leads&nbsp;me&nbsp;to&nbsp;expect&nbsp;#2.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;Which&nbsp;of&nbsp;these&nbsp;behaviors&nbsp;is&nbsp;the&nbsp;desired&nbsp;one?&nbsp;&nbsp;And/or,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;would&nbsp;it&nbsp;be&nbsp;desirable&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;to&nbsp;permit&nbsp;authors&nbsp;to&nbsp;specify&nbsp;which&nbsp;behavior&nbsp;they<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intend?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Thanks,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;~ben&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
