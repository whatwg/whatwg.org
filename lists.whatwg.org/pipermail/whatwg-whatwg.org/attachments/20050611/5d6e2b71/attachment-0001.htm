<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.2800.1498&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&nbsp;background=&quot;&quot;&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;Hello,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;I&nbsp;recently&nbsp;saw&nbsp;your&nbsp;draft&nbsp;specification&nbsp;and&nbsp;<br>
the&nbsp;sections&nbsp;related&nbsp;to&nbsp;the&nbsp;event-source&nbsp;element.&nbsp;This&nbsp;is&nbsp;really&nbsp;fantastic&nbsp;stuff&nbsp;<br>
and&nbsp;I&nbsp;wish&nbsp;I&nbsp;had&nbsp;been&nbsp;paying&nbsp;attention&nbsp;much&nbsp;sooner!&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;I&nbsp;apologize&nbsp;for&nbsp;this&nbsp;very&nbsp;lengthy&nbsp;post,&nbsp;but&nbsp;<br>
I&nbsp;have&nbsp;a&nbsp;strong&nbsp;interest&nbsp;in&nbsp;this&nbsp;sort&nbsp;of&nbsp;technology.&nbsp;Several&nbsp;years&nbsp;ago&nbsp;I&nbsp;worked&nbsp;<br>
at&nbsp;a&nbsp;company&nbsp;called&nbsp;KnowNow&nbsp;where&nbsp;I&nbsp;spent&nbsp;a&nbsp;lot&nbsp;of&nbsp;time&nbsp;implementing&nbsp;browser&nbsp;<br>
based&nbsp;libraries&nbsp;and&nbsp;applications&nbsp;in&nbsp;JavaScript&nbsp;to&nbsp;do&nbsp;almost&nbsp;exactly&nbsp;what&nbsp;this&nbsp;<br>
definition&nbsp;of&nbsp;event-source&nbsp;describes.&nbsp;Since&nbsp;then,&nbsp;I've&nbsp;spent&nbsp;a&nbsp;lot&nbsp;of&nbsp;<br>
engineering&nbsp;time&nbsp;designing&nbsp;and&nbsp;building&nbsp;servers&nbsp;for&nbsp;large&nbsp;scale&nbsp;subscription&nbsp;and&nbsp;<br>
notification&nbsp;services&nbsp;at&nbsp;various&nbsp;companies.&nbsp;Doing&nbsp;that&nbsp;work&nbsp;taught&nbsp;me&nbsp;a&nbsp;lot&nbsp;<br>
about&nbsp;the&nbsp;balance&nbsp;between&nbsp;flexibility,&nbsp;ease&nbsp;of&nbsp;coding&nbsp;and&nbsp;efficiency.&nbsp;<br>
&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;I'd&nbsp;like&nbsp;to&nbsp;find&nbsp;out&nbsp;how&nbsp;I&nbsp;can&nbsp;be&nbsp;an&nbsp;active&nbsp;<br>
contributor&nbsp;in&nbsp;this&nbsp;area,&nbsp;both&nbsp;in&nbsp;terms&nbsp;of&nbsp;discussions&nbsp;as&nbsp;well&nbsp;as&nbsp;in&nbsp;terms&nbsp;of&nbsp;<br>
development.&nbsp;I've&nbsp;also&nbsp;included&nbsp;a&nbsp;brain&nbsp;dump&nbsp;of&nbsp;my&nbsp;thoughts&nbsp;-&nbsp;also&nbsp;posted&nbsp;to&nbsp;my&nbsp;<br>
blog:&nbsp;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;A&nbsp;<br>
href=&quot;http://korrespondence.blogspot.com/2005/06/whatwg-and-event-source-design.html&quot;&gt;http://korrespondence.blogspot.com/2005/06/whatwg-and-event-source-design.html&lt;/A&gt;&nbsp;I&nbsp;<br>
realize&nbsp;this&nbsp;could&nbsp;easily&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;johnny-come-lately&nbsp;ivory&nbsp;tower&nbsp;<br>
post,&nbsp;but&nbsp;I&nbsp;hope&nbsp;that's&nbsp;not&nbsp;how&nbsp;it's&nbsp;viewed&nbsp;-&nbsp;I'm&nbsp;really&nbsp;very&nbsp;interested&nbsp;in&nbsp;<br>
participating&nbsp;and&nbsp;collaborating&nbsp;in&nbsp;any&nbsp;way&nbsp;I&nbsp;am&nbsp;able&nbsp;to.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;Anyway,&nbsp;here's&nbsp;the&nbsp;post...&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;=====&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;<br>
size=2&gt;The&nbsp;&lt;a&nbsp;href=&quot;http://www.whatwg.org/&quot;&gt;WhatWG&lt;/a&gt;&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;<br>
individuals&nbsp;and&nbsp;reprentatives&nbsp;of&nbsp;'browser&nbsp;manufacturers'&nbsp;that&nbsp;are&nbsp;defining&nbsp;the&nbsp;<br>
evolution&nbsp;of&nbsp;HTML&nbsp;markup&nbsp;to&nbsp;help&nbsp;Web&nbsp;application&nbsp;developers.&nbsp;They&nbsp;call&nbsp;<br>
themselves&nbsp;'unofficial',&nbsp;but&nbsp;most&nbsp;people&nbsp;realize&nbsp;that&nbsp;rough&nbsp;consensus&nbsp;and&nbsp;<br>
working&nbsp;code&nbsp;can&nbsp;create&nbsp;more&nbsp;momentum&nbsp;than&nbsp;'official'&nbsp;channels.&lt;BR&gt;&lt;BR&gt;They&nbsp;have&nbsp;<br>
recently&nbsp;described&nbsp;an&nbsp;extension&nbsp;to&nbsp;HTML&nbsp;allows&nbsp;a&nbsp;Web&nbsp;browser&nbsp;to&nbsp;receive&nbsp;a&nbsp;stream&nbsp;<br>
of&nbsp;events&nbsp;from&nbsp;a&nbsp;server&nbsp;-&nbsp;the&nbsp;&lt;a&nbsp;<br>
href=&quot;http://www.whatwg.org/specs/web-apps/current-work/#the-event-source&quot;&gt;event-source&nbsp;<br>
tag&lt;/a&gt;.&nbsp;This&nbsp;is&nbsp;a&nbsp;wonderful&nbsp;concept&nbsp;and&nbsp;very&nbsp;similar&nbsp;to&nbsp;work&nbsp;done&nbsp;by&nbsp;<br>
KnowNow,&nbsp;mod-pubsub&nbsp;and&nbsp;others&nbsp;over&nbsp;the&nbsp;past&nbsp;few&nbsp;years.&nbsp;From&nbsp;my&nbsp;experience&nbsp;with&nbsp;<br>
these&nbsp;other&nbsp;approaches,&nbsp;I&nbsp;know&nbsp;that&nbsp;truly&nbsp;amazing&nbsp;things&nbsp;will&nbsp;happen&nbsp;when&nbsp;this&nbsp;<br>
becomes&nbsp;commonplace&nbsp;and&nbsp;trivial&nbsp;to&nbsp;use.&nbsp;&lt;BR&gt;&nbsp;&lt;BR&gt;I&nbsp;had&nbsp;looked&nbsp;at&nbsp;the&nbsp;WhatWG&nbsp;<br>
when&nbsp;it&nbsp;first&nbsp;started,&nbsp;but&nbsp;soon&nbsp;stopped&nbsp;following&nbsp;their&nbsp;development.&nbsp;From&nbsp;<br>
reading&nbsp;the&nbsp;current&nbsp;draft&nbsp;of&nbsp;their&nbsp;description&nbsp;of&nbsp;this&nbsp;HTML&nbsp;extension,&nbsp;I&nbsp;can&nbsp;<br>
forsee&nbsp;several&nbsp;technical&nbsp;issues&nbsp;and&nbsp;now&nbsp;I&nbsp;wish&nbsp;I&nbsp;had&nbsp;stuck&nbsp;with&nbsp;monitoring&nbsp;their&nbsp;<br>
development&nbsp;in&nbsp;order&nbsp;to&nbsp;contribute&nbsp;to&nbsp;this&nbsp;section.&nbsp;Hopefully&nbsp;it's&nbsp;not&nbsp;too&nbsp;<br>
late.&lt;BR&gt;&lt;BR&gt;There&nbsp;are&nbsp;several&nbsp;technical&nbsp;issues&nbsp;and&nbsp;design&nbsp;approaches&nbsp;that&nbsp;are&nbsp;<br>
interesting,&nbsp;but&nbsp;I&nbsp;can't&nbsp;find&nbsp;much&nbsp;background&nbsp;or&nbsp;discussion&nbsp;of&nbsp;these&nbsp;<br>
alternatives,&nbsp;so&nbsp;I&nbsp;may&nbsp;be&nbsp;covering&nbsp;old&nbsp;ground&nbsp;with&nbsp;this&nbsp;post.&lt;BR&gt;&lt;BR&gt;The&nbsp;<br>
different&nbsp;areas&nbsp;I&nbsp;am&nbsp;interested&nbsp;in&nbsp;are:&lt;BR&gt;&nbsp;-&nbsp;connecting&nbsp;elements,&nbsp;event&nbsp;<br>
streams&nbsp;and&nbsp;event&nbsp;handlers&lt;BR&gt;&nbsp;-&nbsp;format&nbsp;and&nbsp;definition&nbsp;of&nbsp;event&nbsp;<br>
streams&lt;BR&gt;&lt;BR&gt;1)&nbsp;connecting&nbsp;elements,&nbsp;event&nbsp;streams&nbsp;and&nbsp;event&nbsp;handlers&lt;BR&gt;From&nbsp;<br>
the&nbsp;section&nbsp;&quot;9.1.1.&nbsp;The&nbsp;event-source&nbsp;element&quot;&nbsp;the&nbsp;approach&nbsp;is&nbsp;to&nbsp;introduce&nbsp;a&nbsp;new&nbsp;<br>
element.&nbsp;I'd&nbsp;like&nbsp;to&nbsp;consider&nbsp;whether&nbsp;more&nbsp;than&nbsp;one&nbsp;event-source&nbsp;element&nbsp;is&nbsp;<br>
allowed,&nbsp;and&nbsp;also&nbsp;consider&nbsp;whether&nbsp;simply&nbsp;introducing&nbsp;new&nbsp;attributes&nbsp;on&nbsp;existing&nbsp;<br>
elements&nbsp;is&nbsp;easier&nbsp;and&nbsp;feasible.&nbsp;&lt;BR&gt;If&nbsp;a&nbsp;document&nbsp;is&nbsp;allowed&nbsp;to&nbsp;have&nbsp;more&nbsp;than&nbsp;<br>
one&nbsp;event-source&nbsp;element&nbsp;then&nbsp;the&nbsp;client&nbsp;app&nbsp;will&nbsp;have&nbsp;to&nbsp;deal&nbsp;with&nbsp;either&nbsp;<br>
multiple&nbsp;connections&nbsp;or&nbsp;combining&nbsp;multiple&nbsp;event-sources&nbsp;on&nbsp;one&nbsp;connection&nbsp;while&nbsp;<br>
delivering&nbsp;events&nbsp;to&nbsp;the&nbsp;corresponding&nbsp;event-source&nbsp;element&nbsp;event&nbsp;handler.&nbsp;If&nbsp;<br>
multiple&nbsp;connections&nbsp;are&nbsp;supported,&nbsp;then&nbsp;the&nbsp;client&nbsp;application&nbsp;could&nbsp;saturate&nbsp;<br>
the&nbsp;capability&nbsp;of&nbsp;the&nbsp;client&nbsp;machine&nbsp;and&nbsp;could&nbsp;even&nbsp;be&nbsp;considered&nbsp;a&nbsp;'poorly&nbsp;<br>
behaved'&nbsp;client&nbsp;on&nbsp;the&nbsp;shared&nbsp;network.&lt;BR&gt;&lt;BR&gt;An&nbsp;alternative&nbsp;to&nbsp;a&nbsp;new&nbsp;element&nbsp;<br>
would&nbsp;be&nbsp;to&nbsp;add&nbsp;new&nbsp;attributes,&nbsp;for&nbsp;example:&lt;BR&gt;&nbsp;&lt;p&nbsp;<br>
event-src=&quot;/my/stocks/amzn/&quot;&nbsp;onMessage=&quot;handleQuotes()&quot;&nbsp;/&gt;&lt;BR&gt;&lt;BR&gt;I&nbsp;suggest&nbsp;<br>
using&nbsp;onMessage&nbsp;rather&nbsp;than&nbsp;onEvent&nbsp;to&nbsp;distinguish&nbsp;between&nbsp;network&nbsp;based&nbsp;<br>
messages&nbsp;and&nbsp;application&nbsp;based&nbsp;events&nbsp;(e.g.&nbsp;connection-opened,&nbsp;<br>
connection-closed-by-client,&nbsp;connection-closed-by-server,&nbsp;etc).&nbsp;I&nbsp;realize&nbsp;that&nbsp;<br>
some&nbsp;people&nbsp;feel&nbsp;web&nbsp;developers&nbsp;would&nbsp;want&nbsp;these&nbsp;to&nbsp;look&nbsp;identical,&nbsp;but&nbsp;many&nbsp;<br>
years&nbsp;of&nbsp;experience&nbsp;across&nbsp;the&nbsp;software&nbsp;industry&nbsp;has&nbsp;shown&nbsp;that&nbsp;they&nbsp;are&nbsp;simply&nbsp;<br>
different&nbsp;beasts&nbsp;and&nbsp;making&nbsp;that&nbsp;explicit&nbsp;actually&nbsp;helps&nbsp;the&nbsp;developer.&nbsp;The&nbsp;<br>
onEvent&nbsp;handler&nbsp;could&nbsp;be&nbsp;used&nbsp;for&nbsp;connection&nbsp;events&nbsp;on&nbsp;the&nbsp;event-source&nbsp;outside&nbsp;<br>
the&nbsp;actual&nbsp;messages&nbsp;within&nbsp;that&nbsp;stream.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;2)&nbsp;format&nbsp;and&nbsp;definition&nbsp;of&nbsp;<br>
event&nbsp;streams&lt;BR&gt;Section&nbsp;&quot;9.1.3&nbsp;Processing&nbsp;model&quot;&nbsp;defines&nbsp;how&nbsp;connections&nbsp;should&nbsp;<br>
be&nbsp;handled,&nbsp;and&nbsp;it's&nbsp;great&nbsp;to&nbsp;see&nbsp;this&nbsp;detail,&nbsp;especially&nbsp;arounds&nbsp;failure&nbsp;modes,&nbsp;<br>
closed&nbsp;connections,&nbsp;etc.&lt;BR&gt;&lt;BR&gt;This&nbsp;section&nbsp;indicates&nbsp;that&nbsp;client&nbsp;should&nbsp;<br>
re-open&nbsp;connections&nbsp;after&nbsp;a&nbsp;small&nbsp;delay&nbsp;if&nbsp;they&nbsp;were&nbsp;closed&nbsp;in&nbsp;a&nbsp;successful&nbsp;<br>
situation.&nbsp;This&nbsp;section&nbsp;should&nbsp;consider&nbsp;persistent&nbsp;connections&nbsp;(i.e.&nbsp;keep-alive)&nbsp;<br>
and&nbsp;distinguish&nbsp;reply-level&nbsp;response&nbsp;codes&nbsp;from&nbsp;connection-level&nbsp;operations.&nbsp;For&nbsp;<br>
example,&nbsp;rather&nbsp;than&nbsp;saying&nbsp;&quot;HTTP&nbsp;200&nbsp;OK&nbsp;responses&nbsp;with&nbsp;the&nbsp;right&nbsp;MIME&nbsp;type,&nbsp;<br>
however,&nbsp;should,&nbsp;when&nbsp;closed,&nbsp;be&nbsp;reopened&nbsp;after&nbsp;a&nbsp;small&nbsp;delay.&quot;,&nbsp;it&nbsp;may&nbsp;be&nbsp;<br>
better&nbsp;to&nbsp;say&nbsp;something&nbsp;like&nbsp;&quot;The&nbsp;retrieval&nbsp;of&nbsp;an&nbsp;event-source&nbsp;that&nbsp;completes&nbsp;<br>
successfully&nbsp;(it&nbsp;has&nbsp;the&nbsp;correct&nbsp;content-type&nbsp;and&nbsp;an&nbsp;HTTP&nbsp;200&nbsp;OK&nbsp;response&nbsp;status&nbsp;<br>
code)&nbsp;should&nbsp;be&nbsp;tried&nbsp;again&nbsp;after&nbsp;a&nbsp;short&nbsp;delay.&quot;&nbsp;In&nbsp;addition,&nbsp;the&nbsp;client&nbsp;should&nbsp;<br>
continue&nbsp;to&nbsp;obey&nbsp;the&nbsp;appropriate&nbsp;cache-control&nbsp;response&nbsp;headers&nbsp;-&nbsp;this&nbsp;allows&nbsp;<br>
the&nbsp;server&nbsp;to&nbsp;dynamically&nbsp;influence&nbsp;the&nbsp;interval&nbsp;that&nbsp;the&nbsp;client&nbsp;retrieves&nbsp;<br>
future&nbsp;events&nbsp;(beyond&nbsp;a&nbsp;static&nbsp;value&nbsp;placed&nbsp;in&nbsp;other&nbsp;attributes&nbsp;on&nbsp;the&nbsp;<br>
event-source&nbsp;element).&nbsp;This&nbsp;would&nbsp;be&nbsp;useful&nbsp;in&nbsp;the&nbsp;HTTP&nbsp;204&nbsp;No&nbsp;Content&nbsp;situation&nbsp;<br>
described&nbsp;in&nbsp;this&nbsp;section&nbsp;as&nbsp;well.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Section&nbsp;&quot;9.1.4.&nbsp;The&nbsp;event&nbsp;stream&nbsp;<br>
format&quot;&nbsp;defines&nbsp;a&nbsp;new&nbsp;MIME&nbsp;type&nbsp;and&nbsp;new&nbsp;syntax&nbsp;for&nbsp;the&nbsp;browser&nbsp;to&nbsp;process.&nbsp;This&nbsp;<br>
section&nbsp;also&nbsp;has&nbsp;the&nbsp;most&nbsp;detail&nbsp;of&nbsp;the&nbsp;interaction&nbsp;between&nbsp;events&nbsp;and&nbsp;the&nbsp;<br>
application&nbsp;logic.&nbsp;I&nbsp;don't&nbsp;want&nbsp;to&nbsp;sound&nbsp;too&nbsp;negative,&nbsp;but&nbsp;this&nbsp;is&nbsp;the&nbsp;section&nbsp;<br>
that&nbsp;needs&nbsp;the&nbsp;most&nbsp;help.&nbsp;Several&nbsp;years&nbsp;ago,&nbsp;when&nbsp;I&nbsp;was&nbsp;at&nbsp;KnowNow,&nbsp;I&nbsp;spent&nbsp;a&nbsp;<br>
lot&nbsp;of&nbsp;time&nbsp;implementing&nbsp;browser&nbsp;based&nbsp;libraries&nbsp;and&nbsp;applications&nbsp;in&nbsp;JavaScript&nbsp;<br>
to&nbsp;do&nbsp;almost&nbsp;exactly&nbsp;what&nbsp;this&nbsp;definition&nbsp;of&nbsp;event-source&nbsp;describes.&nbsp;Since&nbsp;then,&nbsp;<br>
I've&nbsp;spent&nbsp;a&nbsp;lot&nbsp;of&nbsp;engineering&nbsp;time&nbsp;designing&nbsp;and&nbsp;building&nbsp;servers&nbsp;for&nbsp;large&nbsp;<br>
scale&nbsp;subscriptions&nbsp;and&nbsp;notifications&nbsp;at&nbsp;various&nbsp;companies.&nbsp;Doing&nbsp;that&nbsp;work&nbsp;<br>
taught&nbsp;me&nbsp;a&nbsp;lot&nbsp;about&nbsp;the&nbsp;balance&nbsp;between&nbsp;flexibility,&nbsp;ease&nbsp;of&nbsp;coding&nbsp;and&nbsp;<br>
efficiency.&nbsp;&lt;BR&gt;&lt;BR&gt;There&nbsp;are&nbsp;three&nbsp;aspects&nbsp;of&nbsp;this&nbsp;event&nbsp;stream&nbsp;that&nbsp;I'm&nbsp;<br>
concerned&nbsp;about&nbsp;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&nbsp;-&nbsp;the&nbsp;meaning&nbsp;of&nbsp;the&nbsp;event&nbsp;stream&nbsp;<br>
resource&nbsp;itself,&nbsp;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&nbsp;-&nbsp;the&nbsp;framing&nbsp;of&nbsp;individual&nbsp;messages&nbsp;<br>
within&nbsp;that&nbsp;event&nbsp;stream&nbsp;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&nbsp;-&nbsp;how&nbsp;to&nbsp;handle&nbsp;re-processing&nbsp;the&nbsp;<br>
event&nbsp;stream&nbsp;in&nbsp;different&nbsp;situations&nbsp;(errors,&nbsp;page&nbsp;refresh&nbsp;by&nbsp;the&nbsp;user,&nbsp;<br>
etc)&lt;BR&gt;&lt;BR&gt;The&nbsp;proposal&nbsp;I&nbsp;have&nbsp;is&nbsp;to&nbsp;consider&nbsp;the&nbsp;src=&nbsp;attribute&nbsp;on&nbsp;the&nbsp;<br>
event-source&nbsp;element&nbsp;as&nbsp;referencing&nbsp;a&nbsp;'collection&nbsp;of&nbsp;messages'.&nbsp;As&nbsp;to&nbsp;the&nbsp;<br>
framing&nbsp;of&nbsp;individual&nbsp;messages,&nbsp;when&nbsp;retrieving&nbsp;this&nbsp;collection&nbsp;of&nbsp;messages&nbsp;via&nbsp;<br>
HTTP,&nbsp;I&nbsp;suggest&nbsp;using&nbsp;the&nbsp;multipart/mixed&nbsp;or&nbsp;multipart/digest&nbsp;MIME&nbsp;type.&nbsp;<br>
Individual&nbsp;parts&nbsp;can&nbsp;then&nbsp;have&nbsp;their&nbsp;own&nbsp;content-type&nbsp;and&nbsp;developers&nbsp;can&nbsp;decide&nbsp;<br>
which&nbsp;suits&nbsp;their&nbsp;needs&nbsp;-&nbsp;a&nbsp;simple&nbsp;name/value&nbsp;pair&nbsp;approach&nbsp;like&nbsp;form&nbsp;data&nbsp;(not&nbsp;<br>
my&nbsp;favorite),&nbsp;javascript&nbsp;object&nbsp;definitions&nbsp;like&nbsp;JSON,&nbsp;etc.&nbsp;See&nbsp;<br>
http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html&nbsp;for&nbsp;details.&lt;BR&gt;&lt;BR&gt;I&nbsp;<br>
realize&nbsp;that&nbsp;one&nbsp;use-case&nbsp;or&nbsp;scenario&nbsp;is&nbsp;for&nbsp;mobile&nbsp;devices&nbsp;and&nbsp;message&nbsp;size&nbsp;is&nbsp;<br>
a&nbsp;concern.&nbsp;I&nbsp;think&nbsp;it&nbsp;may&nbsp;be&nbsp;possible&nbsp;to&nbsp;follow&nbsp;the&nbsp;pattern&nbsp;of&nbsp;multipart/mixed&nbsp;<br>
but&nbsp;create&nbsp;a&nbsp;terse&nbsp;syntax&nbsp;that&nbsp;follows&nbsp;the&nbsp;same&nbsp;capabilities&nbsp;of&nbsp;multipart/mixed&nbsp;<br>
with&nbsp;respect&nbsp;to&nbsp;compression&nbsp;(transfer-encoding,&nbsp;gzip,&nbsp;etc),&nbsp;formats&nbsp;<br>
(content-type)&nbsp;and&nbsp;localization&nbsp;(character-encoding).&lt;BR&gt;&lt;BR&gt;For&nbsp;each&nbsp;message,&nbsp;<br>
the&nbsp;WhatWG&nbsp;event-source&nbsp;definition&nbsp;introduces&nbsp;specific&nbsp;names&nbsp;used&nbsp;for&nbsp;<br>
controlling&nbsp;routing&nbsp;to&nbsp;event&nbsp;handlers&nbsp;but&nbsp;it&nbsp;seems&nbsp;trivially&nbsp;easy&nbsp;to&nbsp;define&nbsp;an&nbsp;<br>
approach&nbsp;that&nbsp;isn't&nbsp;specific&nbsp;to&nbsp;this&nbsp;new&nbsp;syntax.&nbsp;Specifically,&nbsp;the&nbsp;Event&nbsp;and&nbsp;<br>
Target&nbsp;names&nbsp;could&nbsp;be&nbsp;replaced.&lt;BR&gt;&lt;BR&gt;My&nbsp;proposal&nbsp;is&nbsp;to&nbsp;define&nbsp;the&nbsp;each&nbsp;message&nbsp;<br>
in&nbsp;the&nbsp;event&nbsp;streams&nbsp;to&nbsp;be&nbsp;similar&nbsp;to&nbsp;a&nbsp;request,&nbsp;except&nbsp;that&nbsp;no&nbsp;possibility&nbsp;of&nbsp;a&nbsp;<br>
response&nbsp;from&nbsp;the&nbsp;client&nbsp;exists.&nbsp;This&nbsp;provides&nbsp;for&nbsp;each&nbsp;message&nbsp;to&nbsp;have&nbsp;a&nbsp;URI&nbsp;<br>
that&nbsp;indicates&nbsp;it's&nbsp;target&nbsp;and&nbsp;a&nbsp;method&nbsp;that&nbsp;indicates&nbsp;the&nbsp;event&nbsp;type&nbsp;<br>
(post/put/delete).&lt;BR&gt;&lt;BR&gt;For&nbsp;example,&nbsp;rather&nbsp;than&nbsp;an&nbsp;HTTP&nbsp;response&nbsp;<br>
of:&lt;BR&gt;&lt;BR&gt;200&nbsp;OK&lt;BR&gt;Content-type:&nbsp;<br>
application/x-dom-event-stream&lt;BR&gt;Content-length:&nbsp;NNNN&lt;BR&gt;\n&lt;BR&gt;Event:&nbsp;stock&nbsp;<br>
change\n&lt;BR&gt;data:&nbsp;YHOO\n&lt;BR&gt;data:&nbsp;-2\n&lt;BR&gt;data:&nbsp;10\n&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Use&nbsp;a&nbsp;more&nbsp;<br>
generic&nbsp;event&nbsp;stream&nbsp;like&lt;BR&gt;&lt;BR&gt;200&nbsp;OK&lt;BR&gt;Content-type:&nbsp;multipart/mixed;&nbsp;<br>
boundary=msg_boundary&lt;BR&gt;\n&lt;BR&gt;\n&lt;BR&gt;--msg_boundary&lt;BR&gt;POST&nbsp;<br>
/event-handler/stocks&nbsp;HTTP/1.0&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;Content-type:&nbsp;<br>
text/javascript-object&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;Content-length:&nbsp;NNNN&lt;BR&gt;\n&lt;BR&gt;{symbol:&nbsp;<br>
&quot;YHOO&quot;,&nbsp;delta:&nbsp;-2,&nbsp;value:&nbsp;10}&lt;BR&gt;&lt;/FONT&gt;--msg_boundary&lt;BR&gt;PUT&nbsp;<br>
/event-handler/stocks/YHOO&nbsp;HTTP/1.0&lt;BR&gt;Content-type:&nbsp;<br>
text/javascript-object&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;Content-length:&nbsp;NNNN&lt;BR&gt;\n&lt;BR&gt;{delta:&nbsp;-2,&nbsp;<br>
value:&nbsp;10}&lt;BR&gt;--msg_boundary&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;There&nbsp;may&nbsp;be&nbsp;'issues'&nbsp;with&nbsp;adding&nbsp;the&nbsp;<br>
request-line&nbsp;in&nbsp;a&nbsp;multipart/mixed&nbsp;response,&nbsp;but&nbsp;defining&nbsp;a&nbsp;'multipart/message'&nbsp;<br>
might&nbsp;work&nbsp;for&nbsp;that.&nbsp;And&nbsp;if&nbsp;people&nbsp;don't&nbsp;like&nbsp;HTTP/1.0&nbsp;in&nbsp;the&nbsp;request-line,&nbsp;we&nbsp;<br>
could&nbsp;define&nbsp;a&nbsp;'simple&nbsp;notification&nbsp;protocol'&nbsp;as&nbsp;SNP/1.0&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;That&nbsp;last&nbsp;thing&nbsp;I'll&nbsp;mention&nbsp;has&nbsp;to&nbsp;do&nbsp;with&nbsp;<br>
re-processing&nbsp;the&nbsp;event&nbsp;stream.&nbsp;Re-processing&nbsp;an&nbsp;HTML&nbsp;page&nbsp;from&nbsp;start&nbsp;to&nbsp;end&nbsp;<br>
generally&nbsp;works.&nbsp;However,&nbsp;re-processing&nbsp;an&nbsp;event&nbsp;stream&nbsp;from&nbsp;start&nbsp;to&nbsp;end&nbsp;is&nbsp;<br>
generally&nbsp;not&nbsp;going&nbsp;to&nbsp;work&nbsp;well.&nbsp;The&nbsp;situations&nbsp;to&nbsp;consider&nbsp;are&nbsp;when&nbsp;the&nbsp;user&nbsp;<br>
manually&nbsp;refreshes&nbsp;the&nbsp;page&nbsp;and&nbsp;when&nbsp;the&nbsp;retrieval&nbsp;of&nbsp;the&nbsp;event&nbsp;stream&nbsp;completes&nbsp;<br>
successfully.&nbsp;When&nbsp;the&nbsp;user&nbsp;manually&nbsp;refreshes&nbsp;the&nbsp;page,&nbsp;the&nbsp;src=&nbsp;attribute&nbsp;will&nbsp;<br>
be&nbsp;the&nbsp;same&nbsp;as&nbsp;when&nbsp;the&nbsp;page&nbsp;was&nbsp;previously&nbsp;retrieved,&nbsp;but&nbsp;should&nbsp;the&nbsp;events&nbsp;be&nbsp;<br>
the&nbsp;same&nbsp;as&nbsp;previously&nbsp;retrieved,&nbsp;or&nbsp;should&nbsp;they&nbsp;be&nbsp;messages&nbsp;from&nbsp;that&nbsp;moment&nbsp;<br>
forward?&nbsp;And&nbsp;when&nbsp;the&nbsp;the&nbsp;retrieval&nbsp;of&nbsp;messages&nbsp;succeeds&nbsp;and&nbsp;the&nbsp;client&nbsp;waits&nbsp;a&nbsp;<br>
few&nbsp;moments&nbsp;before&nbsp;retrieving&nbsp;the&nbsp;next&nbsp;set&nbsp;from&nbsp;the&nbsp;very&nbsp;same&nbsp;URI,&nbsp;should&nbsp;that&nbsp;<br>
next&nbsp;set&nbsp;be&nbsp;the&nbsp;same&nbsp;messages&nbsp;again?&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;This&nbsp;is&nbsp;a&nbsp;tricky&nbsp;area&nbsp;and&nbsp;I'm&nbsp;sure&nbsp;there&nbsp;<br>
are&nbsp;several&nbsp;ways&nbsp;to&nbsp;approach&nbsp;this.&nbsp;I'll&nbsp;write&nbsp;more&nbsp;later...&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=&quot;Courier&nbsp;New&quot;&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
