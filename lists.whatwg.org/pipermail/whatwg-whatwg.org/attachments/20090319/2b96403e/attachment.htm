<tt>
The&nbsp;WebWorkers&nbsp;spec&nbsp;states:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;quot;DedicatedWorkerGlobalScope&nbsp;objects&nbsp;act&nbsp;as&nbsp;if&nbsp;they&nbsp;had&nbsp;an&nbsp;implicit&nbsp;MessagePort&nbsp;associated&nbsp;with&nbsp;them&amp;quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;MessagePorts&nbsp;will&nbsp;queue&nbsp;up&nbsp;events&nbsp;until&nbsp;the&nbsp;owner&nbsp;either&nbsp;explicitly&nbsp;invokes&nbsp;start()&nbsp;on&nbsp;them,&nbsp;or&nbsp;sets&nbsp;the&nbsp;onmessage&nbsp;attribute.&nbsp;Is&nbsp;the&nbsp;intent&nbsp;that&nbsp;dedicated&nbsp;workers&nbsp;also&nbsp;implement&nbsp;this&nbsp;same&nbsp;functionality&nbsp;for&nbsp;their&nbsp;implicit&nbsp;port&nbsp;(i.e.&nbsp;if&nbsp;I&nbsp;create&nbsp;a&nbsp;dedicated&nbsp;worker,&nbsp;and&nbsp;immediately&nbsp;post&nbsp;a&nbsp;message&nbsp;to&nbsp;it,&nbsp;but&nbsp;the&nbsp;worker&nbsp;doesn&amp;#39;t&nbsp;actually&nbsp;set&nbsp;an&nbsp;onmessage&nbsp;handler,&nbsp;should&nbsp;that&nbsp;event&nbsp;be&nbsp;queued&nbsp;until&nbsp;such&nbsp;a&nbsp;time&nbsp;as&nbsp;the&nbsp;worker&nbsp;does&nbsp;set&nbsp;an&nbsp;onmessage&nbsp;handler)?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&amp;#39;s&nbsp;a&nbsp;similar&nbsp;issue&nbsp;with&nbsp;cross-window&nbsp;postMessage().&nbsp;I&amp;#39;ve&nbsp;been&nbsp;playing&nbsp;around&nbsp;with&nbsp;the&nbsp;current&nbsp;implementation&nbsp;in&nbsp;Chrome/WebKit,&nbsp;and&nbsp;code&nbsp;like&nbsp;this:&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&amp;#39;Times&nbsp;New&nbsp;Roman&amp;#39;;&nbsp;font-size:&nbsp;16px;&nbsp;&quot;&gt;&lt;pre&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;small;&quot;&gt;function&nbsp;newWindow()&nbsp;{<br>
&nbsp;&nbsp;var&nbsp;childWin&nbsp;=&nbsp;window.open();<br>
&nbsp;&nbsp;childWin.document.location&nbsp;=&nbsp;&amp;quot;&lt;a&nbsp;href=&quot;http://example.com/child.html&quot;&gt;http://example.com/child.html&lt;/a&gt;&amp;quot;;&lt;/span&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&amp;#39;Times&nbsp;New&nbsp;Roman&amp;#39;;&nbsp;white-space:&nbsp;normal;&nbsp;&quot;&gt;&lt;pre&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;small;&quot;&gt;&nbsp;&nbsp;childWin.postMessage(&amp;quot;hi&nbsp;new&nbsp;window&amp;quot;,&nbsp;&amp;quot;*&amp;quot;);&lt;/span&gt;&lt;/pre&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;small;&quot;&gt;}<br>
&lt;/span&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;13px;&quot;&gt;...does&nbsp;not&nbsp;result&nbsp;in&nbsp;the&nbsp;message&nbsp;handler&nbsp;in&nbsp;the&nbsp;new&nbsp;window&nbsp;being&nbsp;called,&nbsp;because&nbsp;the&nbsp;window&nbsp;isn&amp;#39;t&nbsp;loaded&nbsp;at&nbsp;the&nbsp;time&nbsp;the&nbsp;message&nbsp;is&nbsp;posted&nbsp;(it&nbsp;works&nbsp;just&nbsp;fine&nbsp;after&nbsp;the&nbsp;new&nbsp;window&nbsp;has&nbsp;loaded/executed&nbsp;its&nbsp;script).&nbsp;I&amp;#39;m&nbsp;curious&nbsp;whether&nbsp;this&nbsp;is&nbsp;just&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;early&nbsp;implementation,&nbsp;or&nbsp;if&nbsp;this&nbsp;is&nbsp;indeed&nbsp;the&nbsp;expected&nbsp;behavior&nbsp;--&nbsp;if&nbsp;so,&nbsp;then&nbsp;it&nbsp;makes&nbsp;it&nbsp;difficult&nbsp;to&nbsp;do&nbsp;cross-domain&nbsp;messaging&nbsp;as&nbsp;you&nbsp;have&nbsp;this&nbsp;race&nbsp;condition&nbsp;on&nbsp;startup.&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;13px;&quot;&gt;The&nbsp;spec&nbsp;is&nbsp;fairly&nbsp;clear&nbsp;about&nbsp;how&nbsp;this&nbsp;should&nbsp;work&nbsp;when&nbsp;explicitly&nbsp;working&nbsp;with&nbsp;MessagePorts,&nbsp;but&nbsp;the&nbsp;behavior&nbsp;for&nbsp;these&nbsp;other&nbsp;related&nbsp;use&nbsp;cases&nbsp;seems&nbsp;ambiguous&nbsp;(maybe&nbsp;intentionally&nbsp;so?)&lt;/span&gt;&lt;/pre&gt;<br>
&lt;pre&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;13px;&quot;&gt;-atw&lt;/span&gt;&lt;/pre&gt;&lt;/span&gt;&lt;/div&gt;<br>

</tt>
