<tt>
On&nbsp;Fri,&nbsp;Apr&nbsp;3,&nbsp;2009&nbsp;at&nbsp;2:18&nbsp;AM,&nbsp;Anne&nbsp;van&nbsp;Kesteren&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:annevk@opera.com&quot;&gt;annevk@opera.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Fri,&nbsp;03&nbsp;Apr&nbsp;2009&nbsp;06:26:43&nbsp;+0200,&nbsp;Robert&nbsp;O&#39;Callahan&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:robert@ocallahan.org&quot;&nbsp;target=&quot;_blank&quot;&gt;robert@ocallahan.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Mozilla&nbsp;could&nbsp;probably&nbsp;get&nbsp;behind&nbsp;that,&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;who&nbsp;else&nbsp;is&nbsp;willing&nbsp;to&nbsp;bite&nbsp;the&nbsp;bullet.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
The&nbsp;problem&nbsp;already&nbsp;exists&nbsp;for&nbsp;document.cookie,&nbsp;no?&nbsp;And&nbsp;the&nbsp;current&nbsp;API&nbsp;is&nbsp;by&nbsp;far&nbsp;the&nbsp;most&nbsp;convenient&nbsp;the&nbsp;use.&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;If&nbsp;I&nbsp;understood&nbsp;the&nbsp;discussion&nbsp;correctly,&nbsp;the&nbsp;spec&nbsp;for&nbsp;document.cookie&nbsp;never&nbsp;stated&nbsp;anything&nbsp;about&nbsp;it&nbsp;being&nbsp;immutable&nbsp;while&nbsp;a&nbsp;script&nbsp;is&nbsp;running. &nbsp;People&nbsp;are&nbsp;now&nbsp;talking&nbsp;about&nbsp;specifying&nbsp;this,&nbsp;but&nbsp;there&#39;s&nbsp;been&nbsp;push&nbsp;back. &nbsp;Also,&nbsp;there&#39;s&nbsp;no&nbsp;way&nbsp;to&nbsp;guarantee&nbsp;serializability&nbsp;for&nbsp;the&nbsp;network&nbsp;traffic&nbsp;portion&nbsp;so&nbsp;I&#39;m&nbsp;guessing&nbsp;(hoping!)&nbsp;that&nbsp;this&nbsp;wouldn&#39;t&nbsp;be&nbsp;required&nbsp;in&nbsp;the&nbsp;JavaScript&nbsp;side,&nbsp;even&nbsp;if&nbsp;it&nbsp;went&nbsp;through.&lt;br&gt;<br>
&lt;br&gt;localStorage,&nbsp;on&nbsp;the&nbsp;other&nbsp;hand,&nbsp;does&nbsp;have&nbsp;language&nbsp;in&nbsp;the&nbsp;draft&nbsp;spec&nbsp;stating&nbsp;that&nbsp;changes&nbsp;to&nbsp;localStorage&nbsp;must&nbsp;be&nbsp;serialized&nbsp;as&nbsp;if&nbsp;only&nbsp;one&nbsp;event&nbsp;loop&nbsp;is&nbsp;running&nbsp;at&nbsp;a&nbsp;time. &nbsp;That&#39;s&nbsp;the&nbsp;problem. &nbsp;In&nbsp;other&nbsp;words,&nbsp;the&nbsp;strictness&nbsp;of&nbsp;the&nbsp;concurrency&nbsp;control&nbsp;for&nbsp;localStorage&nbsp;is&nbsp;what&nbsp;makes&nbsp;this&nbsp;different&nbsp;from&nbsp;document.cookie.&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;As&nbsp;for&nbsp;convenience:&lt;br&gt;&lt;br&gt;The&nbsp;spec&nbsp;is&nbsp;written&nbsp;in&nbsp;such&nbsp;a&nbsp;way&nbsp;that&nbsp;you&nbsp;can&#39;t&nbsp;have&nbsp;more&nbsp;that&nbsp;one&nbsp;event&nbsp;loop&nbsp;per&nbsp;browser&nbsp;window/worker,&nbsp;and&nbsp;everything&nbsp;is&nbsp;essentially&nbsp;tied&nbsp;to&nbsp;this&nbsp;one&nbsp;event&nbsp;loop. &nbsp;In&nbsp;other&nbsp;words,&nbsp;each&nbsp;window/worker&nbsp;can&#39;t&nbsp;run&nbsp;on&nbsp;more&nbsp;than&nbsp;one&nbsp;CPU&nbsp;core&nbsp;at&nbsp;a&nbsp;time. &nbsp;Thus,&nbsp;the&nbsp;only&nbsp;way&nbsp;for&nbsp;a&nbsp;web&nbsp;application&nbsp;to&nbsp;scale&nbsp;in&nbsp;todays&nbsp;world&nbsp;is&nbsp;going&nbsp;to&nbsp;be&nbsp;through&nbsp;additional&nbsp;windows&nbsp;and/or&nbsp;workers.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;agree&nbsp;that&nbsp;the&nbsp;current&nbsp;API&nbsp;is&nbsp;quite&nbsp;convenient,&nbsp;but&nbsp;it&nbsp;worries&nbsp;me&nbsp;a&nbsp;great&nbsp;deal&nbsp;that&nbsp;it&#39;s&nbsp;synchronous. &nbsp;Now&nbsp;that&nbsp;navigator.unlockStorage()&nbsp;has&nbsp;been&nbsp;added&nbsp;to&nbsp;the&nbsp;spec&nbsp;and&nbsp;you&nbsp;can&#39;t&nbsp;access&nbsp;localStorage&nbsp;from&nbsp;workers,&nbsp;I&#39;m&nbsp;less&nbsp;worried. &nbsp;But&nbsp;I&nbsp;still&nbsp;feel&nbsp;like&nbsp;we&#39;re&nbsp;going&nbsp;to&nbsp;regret&nbsp;this&nbsp;in&nbsp;the&nbsp;next&nbsp;couple&nbsp;years&nbsp;and/or&nbsp;people&nbsp;will&nbsp;simply&nbsp;avoid&nbsp;localStorage.&lt;br&gt;<br>
&lt;br&gt;J&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
