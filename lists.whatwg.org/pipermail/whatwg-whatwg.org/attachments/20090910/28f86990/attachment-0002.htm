<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Sep&nbsp;10,&nbsp;2009,&nbsp;at&nbsp;2:15&nbsp;AM,&nbsp;Robert&nbsp;O'Callahan&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;Thu,&nbsp;Sep&nbsp;10,&nbsp;2009&nbsp;at&nbsp;7:41&nbsp;PM,&nbsp;Maciej&nbsp;Stachowiak&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:mjs@apple.com&quot;&gt;mjs@apple.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0pt;&nbsp;margin-right:&nbsp;0pt;&nbsp;margin-bottom:&nbsp;0pt;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-style:&nbsp;solid;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;&nbsp;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;&lt;/div&gt;&nbsp;Reference&nbsp;for&nbsp;cloneNode:&lt;br&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-3A0ED0A4&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-3A0ED0A4&lt;/a&gt;&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;My&nbsp;assumption&nbsp;based&nbsp;on&nbsp;the&nbsp;spec&nbsp;is&nbsp;that&nbsp;no&nbsp;element-specific&nbsp;internal&nbsp;state&nbsp;should&nbsp;be&nbsp;copied,&nbsp;the&nbsp;cloning&nbsp;should&nbsp;only&nbsp;be&nbsp;DOM-wise.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&nbsp;&lt;br&gt;It's&nbsp;not&nbsp;obvious&nbsp;to&nbsp;me&nbsp;that&nbsp;DOM&nbsp;3&nbsp;Core's&nbsp;silence&nbsp;means&nbsp;nothing&nbsp;else&nbsp;is&nbsp;copied,&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That's&nbsp;how&nbsp;I&nbsp;would&nbsp;tend&nbsp;to&nbsp;interpret&nbsp;its&nbsp;silence,&nbsp;unless&nbsp;some&nbsp;other&nbsp;spec&nbsp;says&nbsp;otherwise.&nbsp;&nbsp;But&nbsp;to&nbsp;be&nbsp;fair,&nbsp;a&nbsp;the&nbsp;DOM&nbsp;specs&nbsp;are&nbsp;sometimes&nbsp;vague&nbsp;on&nbsp;the&nbsp;details.&nbsp;For&nbsp;example,&nbsp;it&nbsp;doesn't&nbsp;explicitly&nbsp;say&nbsp;what&nbsp;localName,&nbsp;prefix&nbsp;or&nbsp;namespace&nbsp;a&nbsp;cloned&nbsp;element&nbsp;gets.&nbsp;Or&nbsp;that&nbsp;what&nbsp;text&nbsp;contents&nbsp;cloned&nbsp;Text&nbsp;nodes&nbsp;should&nbsp;have.&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;since&nbsp;non-DOM&nbsp;state&nbsp;is&nbsp;outside&nbsp;its&nbsp;scope.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;DOM2&nbsp;Core&nbsp;also&nbsp;defines&nbsp;cloneNode,&nbsp;and&nbsp;the&nbsp;associated&nbsp;DOM2&nbsp;HTML&nbsp;does&nbsp;not&nbsp;impose&nbsp;any&nbsp;additional&nbsp;requirements&nbsp;for&nbsp;the&nbsp;HTML&nbsp;elements&nbsp;that&nbsp;have&nbsp;internal&nbsp;state.&nbsp;That&nbsp;would&nbsp;tend&nbsp;to&nbsp;support&nbsp;the&nbsp;theory&nbsp;that&nbsp;copying&nbsp;element-specific&nbsp;non-DOM&nbsp;state&nbsp;was&nbsp;not&nbsp;intended.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;&nbsp;&lt;br&gt;I&nbsp;wonder&nbsp;if&nbsp;authors&nbsp;would&nbsp;be&nbsp;surprised&nbsp;if&nbsp;the&nbsp;non-DOM&nbsp;state&nbsp;is&nbsp;not&nbsp;copied.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;We&nbsp;haven't&nbsp;had&nbsp;any&nbsp;bug&nbsp;reports&nbsp;about&nbsp;it&nbsp;in&nbsp;WebKit,&nbsp;and&nbsp;we&nbsp;don't&nbsp;clone&nbsp;any&nbsp;internal&nbsp;state.&nbsp;We&nbsp;do&nbsp;have&nbsp;a&nbsp;bug&nbsp;report&nbsp;on&nbsp;cloneNode&nbsp;for&nbsp;Documents,&nbsp;where&nbsp;our&nbsp;choice&nbsp;of&nbsp;implementation-defined&nbsp;behavior&nbsp;is&nbsp;to&nbsp;return&nbsp;null.&nbsp;We'll&nbsp;likely&nbsp;have&nbsp;to&nbsp;fix&nbsp;that.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;mental&nbsp;model&nbsp;of&nbsp;cloneNode&nbsp;is&nbsp;that&nbsp;it's&nbsp;equivalent&nbsp;to&nbsp;creating&nbsp;a&nbsp;brand&nbsp;new&nbsp;element&nbsp;with&nbsp;the&nbsp;right&nbsp;name&nbsp;and&nbsp;namespace,&nbsp;adding&nbsp;the&nbsp;appropriate&nbsp;attributes,&nbsp;and&nbsp;if&nbsp;a&nbsp;deep&nbsp;clone,&nbsp;copies&nbsp;of&nbsp;its&nbsp;children.&nbsp;So&nbsp;I&nbsp;would&nbsp;not&nbsp;be&nbsp;surprised.&nbsp;Others&nbsp;may&nbsp;have&nbsp;a&nbsp;different&nbsp;mental&nbsp;model.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Maciej&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
