<tt>
&lt;div&gt;On&nbsp;Mon,&nbsp;Aug&nbsp;3,&nbsp;2009&nbsp;at&nbsp;8:58&nbsp;PM,&nbsp;Ian&nbsp;Hickson &lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ian@hixie.ch&quot;&nbsp;target=&quot;_blank&quot;&gt;ian@hixie.ch&lt;/a&gt;&amp;gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
&lt;div&gt;For&nbsp;example,&nbsp;we&nbsp;could&nbsp;base&nbsp;this&nbsp;on&nbsp;the&nbsp;EventSource&nbsp;mechanism&nbsp;or&nbsp;the&lt;/div&gt;WebSocket&nbsp;mechanism,&nbsp;and&nbsp;define&nbsp;a&nbsp;protocol&nbsp;by&nbsp;which&nbsp;the&nbsp;server&nbsp;can&nbsp;at&nbsp;any&lt;br&gt;time&nbsp;send&nbsp;up&nbsp;either:&lt;br&gt;&lt;br&gt; &nbsp;An&nbsp;INSERT,&nbsp;UPDATE,&nbsp;or&nbsp;DELETE&nbsp;SQL&nbsp;statement&lt;br&gt;<br>
 &nbsp;A&nbsp;string&nbsp;and&nbsp;a&nbsp;URL&nbsp;to&nbsp;show&nbsp;in&nbsp;a&nbsp;notification&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;idea&nbsp;of&nbsp;tying&nbsp;the&nbsp;notification&nbsp;spec&nbsp;to&nbsp;a&nbsp;particular&nbsp;brand&nbsp;of&nbsp;storage&nbsp;seems&nbsp;like&nbsp;a&nbsp;bad&nbsp;idea...especially&nbsp;at&nbsp;this&nbsp;point&nbsp;in&nbsp;time.&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;I&nbsp;definitely&nbsp;like&nbsp;the&nbsp;idea&nbsp;of&nbsp;string&nbsp;based&nbsp;notifications.&nbsp; And&nbsp;I&nbsp;like&nbsp;the&nbsp;idea&nbsp;of&nbsp;having&nbsp;a&nbsp;fairly&nbsp;constrained&nbsp;form&nbsp;of&nbsp;updating&nbsp;state&nbsp;on&nbsp;the&nbsp;machine.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;4,&nbsp;2009&nbsp;at&nbsp;9:48&nbsp;AM,&nbsp;Drew&nbsp;Wilson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:atwilson@google.com&quot;&nbsp;target=&quot;_blank&quot;&gt;atwilson@google.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;On&nbsp;Mon,&nbsp;Aug&nbsp;3,&nbsp;2009&nbsp;at&nbsp;8:58&nbsp;PM,&nbsp;Ian&nbsp;Hickson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ian@hixie.ch&quot;&nbsp;target=&quot;_blank&quot;&gt;ian@hixie.ch&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;I&nbsp;don&amp;#39;t&nbsp;understand&nbsp;why&nbsp;workers&nbsp;can&amp;#39;t&nbsp;reduce&nbsp;latency.&nbsp;What&nbsp;is&nbsp;the&nbsp;latency&lt;br&gt;<br>
<br>
<br>
<br>
that&nbsp;must&nbsp;be&nbsp;reduced&nbsp;which&nbsp;workers&nbsp;can&amp;#39;t&nbsp;help&nbsp;with?&lt;br&gt;<br>
&lt;div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;I&nbsp;understand&nbsp;it,&nbsp;the&nbsp;big&nbsp;problems&nbsp;are&nbsp;1)&nbsp;loading/parsing/executing&nbsp;N-hundred&nbsp;K&nbsp;of&nbsp;javascript&nbsp;for&nbsp;an&nbsp;app&nbsp;like&nbsp;gmail&nbsp;is&nbsp;slow,&nbsp;2)&nbsp;initializing&nbsp;application&nbsp;data&nbsp;structures&nbsp;from&nbsp;data&nbsp;that&nbsp;must&nbsp;be&nbsp;sent&nbsp;down&nbsp;from&nbsp;the&nbsp;server&nbsp;(or&nbsp;loaded&nbsp;from&nbsp;the&nbsp;database)&nbsp;is&nbsp;also&nbsp;slow&nbsp;(and&nbsp;by&nbsp;&amp;quot;slow&amp;quot;,&nbsp;we&nbsp;may&nbsp;only&nbsp;be&nbsp;talking&nbsp;on&nbsp;the&nbsp;order&nbsp;of&nbsp;hundreds&nbsp;of&nbsp;milliseconds).&nbsp;Workers&nbsp;don&amp;#39;t&nbsp;do&nbsp;much&nbsp;for&nbsp;either&nbsp;of&nbsp;these,&nbsp;especially&nbsp;when&nbsp;you&nbsp;are&nbsp;launching&nbsp;a&nbsp;web&nbsp;app&nbsp;for&nbsp;the&nbsp;first&nbsp;time.&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;seems&nbsp;like&nbsp;these&nbsp;are&nbsp;things&nbsp;UAs&nbsp;and&nbsp;Moore&amp;#39;s&nbsp;law&nbsp;can&nbsp;address.&nbsp; For&nbsp;example,&nbsp;what&nbsp;if&nbsp;the&nbsp;UA&nbsp;was&nbsp;smart&nbsp;enough&nbsp;to&nbsp;cache&nbsp;compiled&nbsp;JavaScript&nbsp;(obviously&nbsp;with&nbsp;very&nbsp;smart&nbsp;invalidation&nbsp;routines...or&nbsp;even&nbsp;hooked&nbsp;into&nbsp;AppCache!).&nbsp; Sure,&nbsp;it&amp;#39;s&nbsp;not&nbsp;easy,&nbsp;but&nbsp;there&nbsp;still&nbsp;seems&nbsp;to&nbsp;be&nbsp;a&nbsp;lot&nbsp;of&nbsp;head-room&nbsp;here.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Also&nbsp;keep&nbsp;in&nbsp;mind&nbsp;that&nbsp;lots&nbsp;of&nbsp;web&nbsp;applicaitons&nbsp;think&nbsp;they&amp;#39;re&nbsp;pretty&nbsp;important.&nbsp; Sure,&nbsp;giving&nbsp;gmail&nbsp;.1%&nbsp;of&nbsp;your&nbsp;system&nbsp;memory&nbsp;seems&nbsp;worth&nbsp;it.&nbsp; But&nbsp;how&nbsp;do&nbsp;you&nbsp;draw&nbsp;the&nbsp;line?&nbsp; What&nbsp;if&nbsp;I&nbsp;have&nbsp;10&nbsp;apps&nbsp;that&nbsp;want&nbsp;to&nbsp;do&nbsp;this?&nbsp; (Say...the&nbsp;top&nbsp;10&nbsp;sites&nbsp;on&nbsp;the&nbsp;internet.)&nbsp; Well,&nbsp;now&nbsp;I&amp;#39;ve&nbsp;just&nbsp;given&nbsp;up&nbsp;1%&nbsp;of&nbsp;my&nbsp;ram.&lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;SharedWorkers&nbsp;are&nbsp;overloaded&nbsp;to&nbsp;provide&nbsp;a&nbsp;way&nbsp;for&nbsp;pages&nbsp;under&nbsp;the&nbsp;same&lt;br&gt;<br>
&amp;gt;&nbsp;domain&nbsp;to&nbsp;share&nbsp;state,&nbsp;but&nbsp;this&nbsp;seems&nbsp;like&nbsp;an&nbsp;orthogonal&nbsp;goal&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;quot;parallel&nbsp;execution&amp;quot;&nbsp;and&nbsp;I&nbsp;suspect&nbsp;that&nbsp;we&nbsp;may&nbsp;have&nbsp;ended&nbsp;up&nbsp;with&nbsp;a&lt;br&gt;<br>
&amp;gt;&nbsp;cleaner&nbsp;solution&nbsp;had&nbsp;we&nbsp;decided&nbsp;to&nbsp;address&nbsp;the&nbsp;&amp;quot;shared&nbsp;state&amp;quot;&nbsp;issue&nbsp;via&lt;br&gt;<br>
&amp;gt;&nbsp;a&nbsp;separate&nbsp;mechanism.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Shared&nbsp;state&nbsp;is&nbsp;addressed&nbsp;by&nbsp;the&nbsp;Web&nbsp;Storage&nbsp;and&nbsp;Web&nbsp;Database&nbsp;features;&lt;br&gt;<br>
the&nbsp;shared&nbsp;workers&nbsp;are&nbsp;intended&nbsp;to&nbsp;provide&nbsp;shared&nbsp;computation.&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Sure,&nbsp;although&nbsp;I&amp;#39;d&nbsp;say&nbsp;that&nbsp;&amp;quot;persistent&nbsp;storage&nbsp;is&nbsp;addressed&nbsp;by&nbsp;the&nbsp;Web&nbsp;Storage&nbsp;and&nbsp;Web&nbsp;Database&nbsp;features&amp;quot;.&nbsp;Shared&nbsp;state&nbsp;is&nbsp;also&nbsp;addressed,&nbsp;but&nbsp;that&amp;#39;s&nbsp;not&nbsp;the&nbsp;primary&nbsp;goal.&nbsp;If&nbsp;I&nbsp;have&nbsp;a&nbsp;tree&nbsp;of&nbsp;objects&nbsp;that&nbsp;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;share&nbsp;between&nbsp;two&nbsp;pages,&nbsp;telling&nbsp;me&nbsp;to&nbsp;serialize&nbsp;it&nbsp;into&nbsp;name/value&nbsp;string&nbsp;pairs,&nbsp;write&nbsp;it&nbsp;into&nbsp;Web&nbsp;Storage,&nbsp;and&nbsp;then&nbsp;have&nbsp;the&nbsp;remote&nbsp;side&nbsp;read&nbsp;it&nbsp;out&nbsp;is&nbsp;not&nbsp;a&nbsp;satisfying&nbsp;(or&nbsp;performant)&nbsp;solution.&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Which&nbsp;use&nbsp;case&nbsp;is&nbsp;this&nbsp;related&nbsp;to?&nbsp; If&nbsp;the&nbsp;shared&nbsp;worker&nbsp;is&nbsp;creating&nbsp;UI&nbsp;elements&nbsp;for&nbsp;the&nbsp;page,&nbsp;then&nbsp;composing&nbsp;HTML&nbsp;and&nbsp;sicking&nbsp;it&nbsp;into&nbsp;a&nbsp;div&amp;#39;s&nbsp;.innerHTML&nbsp;is&nbsp;actually&nbsp;(sadly)&nbsp;the&nbsp;fastest&nbsp;way&nbsp;to&nbsp;go&nbsp;at&nbsp;the&nbsp;moment.&nbsp; Besides&nbsp;that,&nbsp;I&nbsp;can&amp;#39;t&nbsp;think&nbsp;of&nbsp;why&nbsp;you&amp;#39;d&nbsp;have&nbsp;some&nbsp;huge&nbsp;tree&nbsp;of&nbsp;information&nbsp;for&nbsp;the&nbsp;gmail&nbsp;use&nbsp;case.&lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
&lt;div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Yeah,&nbsp;I&amp;#39;m&nbsp;somewhat&nbsp;leery&nbsp;of&nbsp;the&nbsp;&amp;quot;canned&nbsp;RSS-feed&amp;quot;-style&nbsp;solution&nbsp;to&nbsp;notifications&nbsp;(our&nbsp;vision&nbsp;for&nbsp;notifications&nbsp;is&nbsp;that&nbsp;they&nbsp;are&nbsp;scriptable&nbsp;and&nbsp;more&nbsp;interactive&nbsp;than&nbsp;just&nbsp;a&nbsp;dumb&nbsp;text&nbsp;+&nbsp;icon).&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;if&nbsp;the&nbsp;notification&nbsp;could&nbsp;have&nbsp;embedded&nbsp;links?&nbsp; If&nbsp;you&nbsp;make&nbsp;them&nbsp;too&nbsp;powerful,&nbsp;you&amp;#39;ll&nbsp;definitely&nbsp;see&nbsp;spam/ads/phishing/etc&nbsp;showing&nbsp;up&nbsp;in&nbsp;them.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;Mon,&nbsp;Aug&nbsp;3,&nbsp;2009&nbsp;at&nbsp;8:58&nbsp;PM,&nbsp;Ian&nbsp;Hickson &lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ian@hixie.ch&quot;&nbsp;target=&quot;_blank&quot;&gt;ian@hixie.ch&lt;/a&gt;&amp;gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
&lt;div&gt;On&nbsp;Thu,&nbsp;30&nbsp;Jul&nbsp;2009,&nbsp;Michael&nbsp;Davidson&nbsp;wrote:&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Here&amp;#39;s&nbsp;a&nbsp;rough&nbsp;sketch&nbsp;of&nbsp;a&nbsp;more&nbsp;far-out&nbsp;idea:&nbsp;What&nbsp;if&nbsp;all&nbsp;browsers&nbsp;were&lt;br&gt;&amp;gt;&nbsp;XMPP&nbsp;clients&nbsp;and&nbsp;stanzas&nbsp;could&nbsp;be&nbsp;sent&nbsp;to&nbsp;display&nbsp;notifications?&nbsp;The&lt;br&gt;<br>
&amp;gt;&nbsp;attack&nbsp;surface&nbsp;would&nbsp;still&nbsp;be&nbsp;low,&nbsp;but&nbsp;you&amp;#39;d&nbsp;get&nbsp;realtime&nbsp;updates.&lt;br&gt;&amp;gt;&nbsp;Instead&nbsp;of&nbsp;subscribing&nbsp;to&nbsp;a&nbsp;feed&nbsp;of&nbsp;notifications,&nbsp;the&nbsp;user&nbsp;accepts&nbsp;what&lt;br&gt;&amp;gt;&nbsp;is&nbsp;essentially&nbsp;a&nbsp;chat&nbsp;invitation&nbsp;from&nbsp;the&nbsp;site.&nbsp;Like&nbsp;normal&nbsp;XMPP&lt;br&gt;<br>
&amp;gt;&nbsp;invitations,&nbsp;this&nbsp;would&nbsp;be&nbsp;revocable&nbsp;at&nbsp;any&nbsp;time.&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&amp;#39;m&nbsp;not&nbsp;sure&nbsp;XMPP&nbsp;is&nbsp;the&nbsp;protocol&nbsp;I&nbsp;would&nbsp;jump&nbsp;to,&nbsp;but&nbsp;it&amp;#39;s&nbsp;certainly&nbsp;an&lt;br&gt;option,&nbsp;yes.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;don&amp;#39;t&nbsp;you&nbsp;like&nbsp;about&nbsp;XMPP?&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
