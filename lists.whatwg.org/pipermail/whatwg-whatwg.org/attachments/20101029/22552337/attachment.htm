<tt>
&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;I&#39;ve&nbsp;been&nbsp;thinking&nbsp;about&nbsp;how&nbsp;to&nbsp;extend&nbsp;DataTransfer&nbsp;to&nbsp;support&nbsp;non-text&nbsp;types,&nbsp;such&nbsp;as&nbsp;images&nbsp;or&nbsp;RTF.&nbsp;Some&nbsp;use&nbsp;cases&nbsp;that&nbsp;this&nbsp;would&nbsp;enable:&lt;/font&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;-&nbsp;Copying&nbsp;and&nbsp;pasting&nbsp;images&nbsp;between&nbsp;Photoshop&nbsp;and&nbsp;a&nbsp;web-based&nbsp;image&nbsp;editing&nbsp;app&nbsp;such&nbsp;as &lt;/font&gt;&lt;a&nbsp;href=&quot;http://canvaspaint.org/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://canvaspaint.org/&lt;/a&gt;&lt;span&nbsp;style=&quot;font-family:arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;.&lt;/span&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;-&nbsp;Copying&nbsp;a&nbsp;slide&nbsp;with&nbsp;inline&nbsp;pictures&nbsp;from&nbsp;a&nbsp;presentation&nbsp;and&nbsp;pasting&nbsp;it&nbsp;into&nbsp;an&nbsp;email&nbsp;without&nbsp;losing&nbsp;any&nbsp;of&nbsp;the&nbsp;formatting.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Since&nbsp;the&nbsp;data&nbsp;might&nbsp;be&nbsp;in&nbsp;text&nbsp;or&nbsp;binary&nbsp;form,&nbsp;I&nbsp;propose&nbsp;adding&nbsp;Blob&nbsp;support&nbsp;to&nbsp;DataTransfer.&nbsp;The&nbsp;proposed&nbsp;additions&nbsp;would&nbsp;add&nbsp;the&nbsp;following&nbsp;two&nbsp;functions&nbsp;to&nbsp;DataTransfer:&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Blob&nbsp;getDataAsBlob(in&nbsp;DOMString&nbsp;format);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;void&nbsp;setDataAsBlob(in&nbsp;DOMString&nbsp;format,&nbsp;in&nbsp;Blob&nbsp;data);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Callers&nbsp;would&nbsp;use&nbsp;it&nbsp;like&nbsp;this:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;script&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;document.addEventListener(&#39;paste&#39;,&nbsp;function&nbsp;(event)&nbsp;{&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;imageBlob&nbsp;=&nbsp;event.dataTransfer.getDataAsBlob(&#39;image/png&#39;);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;reader&nbsp;=&nbsp;new&nbsp;FileReaderSync();&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;newImage&nbsp;=&nbsp;document.appendChild(document.createElement(&#39;img&#39;));&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  newImage.src&nbsp;=&nbsp;reader.readAsDataURL(imageBlob);&lt;br&gt;<br>
<br>
});&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;document.addEventListener(&#39;copy&#39;,&nbsp;function&nbsp;(event)&nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;bb&nbsp;=&nbsp;new&nbsp;BlobBuilder();&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  bb.append(someFunctionThatConvertsAnImageSelectionToAnArrayBuffer());&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  event.dataTransfer.setData(&#39;image/png&#39;,&nbsp;bb.getBlob());&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;});&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;/script&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;By&nbsp;using&nbsp;Blob,&nbsp;callers&nbsp;have&nbsp;the&nbsp;freedom&nbsp;to&nbsp;pick&nbsp;a&nbsp;synchronous&nbsp;or&nbsp;asynchronous&nbsp;model.&nbsp;For&nbsp;example,&nbsp;to&nbsp;avoid&nbsp;blocking&nbsp;the&nbsp;page,&nbsp;an&nbsp;image&nbsp;editing&nbsp;app&nbsp;might&nbsp;choose&nbsp;to&nbsp;read&nbsp;pasted&nbsp;image&nbsp;data&nbsp;asynchronously&nbsp;in&nbsp;a&nbsp;callback:&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;script&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;function&nbsp;onImageLoaded(event)&nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  //&nbsp;Do&nbsp;something&nbsp;with&nbsp;the&nbsp;event.target.result.&lt;br&gt;<br>
}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;&quot;&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;document.addEventListener(&#39;paste&#39;,&nbsp;function&nbsp;(event)&nbsp;{&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;imageBlob&nbsp;=&nbsp;event.dataTransfer.getDataAsBlob(&#39;image/png&#39;);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;reader&nbsp;=&nbsp;new&nbsp;FileReader();&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  reader.onload&nbsp;=&nbsp;onImageLoaded;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;newImage&nbsp;=&nbsp;document.appendChild(document.createElement(&#39;img&#39;));&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  reader.readAsDataURL(imageBlob);&lt;br&gt;});&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;/script&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/div&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;In&nbsp;addition,&nbsp;getData()&nbsp;and&nbsp;setData()&nbsp;could&nbsp;be&nbsp;redefined&nbsp;to&nbsp;be&nbsp;based&nbsp;on&nbsp;the&nbsp;two&nbsp;new&nbsp;functions:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;DataTransfer.prototype.getData&nbsp;=&nbsp;function&nbsp;(format)&nbsp;{&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;reader&nbsp;=&nbsp;new&nbsp;FileReaderSync();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;blob&nbsp;=&nbsp;this.getDataAsBlob(format);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  return&nbsp;reader.readAsText(blob);&lt;br&gt;}&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;helvetica,&nbsp;sans-serif;&nbsp;&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;DataTransfer.prototype.setData&nbsp;=&nbsp;function&nbsp;(format,&nbsp;data)&nbsp;{&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  var&nbsp;builder&nbsp;=&nbsp;new&nbsp;BlobBuilder();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  builder.append(data);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;  this.setDataAsBlob(format,&nbsp;builder.getBlob());&lt;br&gt;};&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;One&nbsp;issue&nbsp;that&nbsp;I&#39;m&nbsp;not&nbsp;clear&nbsp;how&nbsp;to&nbsp;resolve&nbsp;is&nbsp;the&nbsp;issue&nbsp;of&nbsp;Blob.size.&nbsp;In&nbsp;general,&nbsp;the&nbsp;UA&nbsp;won&#39;t&nbsp;be&nbsp;able&nbsp;to&nbsp;populate&nbsp;Blob.size&nbsp;without&nbsp;reading&nbsp;in&nbsp;all&nbsp;the&nbsp;data&nbsp;first...&nbsp;which&nbsp;defeats&nbsp;the&nbsp;point&nbsp;of&nbsp;using&nbsp;Blob&nbsp;to&nbsp;begin&nbsp;with.&nbsp;Since&nbsp;people&nbsp;may&nbsp;not&nbsp;read&nbsp;Blob.size&nbsp;very&nbsp;often&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;copy-and-paste&nbsp;or&nbsp;drag-and-drop,&nbsp;maybe&nbsp;it&#39;s&nbsp;acceptable&nbsp;to&nbsp;lazily&nbsp;populate&nbsp;Blob.size&nbsp;only&nbsp;if&nbsp;people&nbsp;try&nbsp;querying&nbsp;its&nbsp;value?&nbsp;People&nbsp;who&nbsp;want&nbsp;async&nbsp;behavior&nbsp;won&#39;t&nbsp;truly&nbsp;get&nbsp;it&nbsp;if&nbsp;they&nbsp;query&nbsp;Blob.size,&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;see&nbsp;another&nbsp;way&nbsp;around&nbsp;the&nbsp;problem.&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Daniel&lt;/font&gt;&lt;/div&gt;<br>

</tt>
