<tt>
Couldn&#39;t&nbsp;SCTP/DCCP&nbsp;(or&nbsp;a&nbsp;variant)&nbsp;over&nbsp;UDP&nbsp;(for&nbsp;NAT&nbsp;compatibility)&nbsp;work?&lt;br&gt;&lt;br&gt;They&nbsp;seem&nbsp;both&nbsp;seem&nbsp;to&nbsp;be&nbsp;session&nbsp;oriented&nbsp;while&nbsp;loosening&nbsp;the&nbsp;other&nbsp;restrictions&nbsp;of&nbsp;TCP,&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;4&nbsp;June&nbsp;2010&nbsp;00:18,&nbsp;Philip&nbsp;Taylor&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:excors%2Bwhatwg@gmail.com&quot;&gt;excors+whatwg@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;On&nbsp;Thu,&nbsp;Jun&nbsp;3,&nbsp;2010&nbsp;at&nbsp;7:28&nbsp;AM,&nbsp;Erik&nbsp;MÃ¶ller&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:emoller@opera.com&quot;&gt;emoller@opera.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&gt;&nbsp;[...]&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;&nbsp;One&nbsp;thing&nbsp;to&nbsp;remember&nbsp;here&nbsp;is&nbsp;that&nbsp;browsers&nbsp;have&nbsp;other&nbsp;means&nbsp;for&lt;br&gt;<br>
&gt;&nbsp;communication&nbsp;as&nbsp;well.&nbsp;I&#39;m&nbsp;not&nbsp;saying&nbsp;we&nbsp;shouldn&#39;t&nbsp;support&nbsp;reliable&nbsp;messages&lt;br&gt;<br>
&gt;&nbsp;over&nbsp;UDP,&nbsp;but&nbsp;just&nbsp;pointing&nbsp;out&nbsp;the&nbsp;option.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Yep&nbsp;-&nbsp;the&nbsp;relevant&nbsp;use&nbsp;cases&nbsp;ought&nbsp;to&nbsp;be&nbsp;supported&nbsp;decently&nbsp;by&nbsp;the&lt;br&gt;<br>
platform,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;by&nbsp;this&nbsp;extension&nbsp;to&nbsp;the&nbsp;platform&nbsp;(it&lt;br&gt;<br>
might&nbsp;be&nbsp;a&nbsp;different&nbsp;extension&nbsp;or&nbsp;it&nbsp;might&nbsp;be&nbsp;(probably&nbsp;is)&nbsp;supported&lt;br&gt;<br>
already).&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;-&nbsp;Protection&nbsp;against&nbsp;an&nbsp;attacker&nbsp;initiating&nbsp;a&nbsp;legitimate&nbsp;socket&nbsp;with&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;user&nbsp;and&nbsp;then&nbsp;redirecting&nbsp;it&nbsp;(with&nbsp;some&nbsp;kind&nbsp;of&nbsp;IP&nbsp;(un)hijacking)&nbsp;to&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;service&nbsp;behind&nbsp;the&nbsp;user&#39;s&nbsp;firewall&nbsp;(which&nbsp;isn&#39;t&nbsp;a&nbsp;problem&nbsp;when&nbsp;using&lt;br&gt;<br>
&gt;&gt;&nbsp;TCP&nbsp;since&nbsp;the&nbsp;service&nbsp;will&nbsp;ignore&nbsp;packets&nbsp;when&nbsp;it&nbsp;hasn&#39;t&nbsp;done&nbsp;the&nbsp;TCP&lt;br&gt;<br>
&gt;&gt;&nbsp;handshake;&nbsp;but&nbsp;UDP&nbsp;services&nbsp;might&nbsp;respond&nbsp;to&nbsp;a&nbsp;single&nbsp;packet&nbsp;from&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;middle&nbsp;of&nbsp;a&nbsp;websocket&nbsp;stream,&nbsp;so&nbsp;every&nbsp;single&nbsp;packet&nbsp;will&nbsp;have&nbsp;to&nbsp;be&lt;br&gt;<br>
&gt;&gt;&nbsp;careful&nbsp;not&nbsp;to&nbsp;be&nbsp;misinterpreted&nbsp;dangerously&nbsp;by&nbsp;unsuspecting&lt;br&gt;<br>
&gt;&gt;&nbsp;services).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;don&#39;t&nbsp;quite&nbsp;follow&nbsp;what&nbsp;you&nbsp;mean&nbsp;here.&nbsp;Can&nbsp;you&nbsp;expand&nbsp;on&nbsp;this&nbsp;with&nbsp;an&lt;br&gt;<br>
&gt;&nbsp;example?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;was&nbsp;thinking&nbsp;something&nbsp;like:&nbsp;A&nbsp;host&nbsp;at&nbsp;IP&nbsp;11.11.11.11&nbsp;on&nbsp;the&nbsp;public&lt;br&gt;<br>
internet&nbsp;runs&nbsp;some&nbsp;UDP&nbsp;service,&nbsp;like&nbsp;DNS&nbsp;or&nbsp;TFTP&nbsp;or&nbsp;something&nbsp;a&nbsp;bit&lt;br&gt;<br>
more&nbsp;secure.&nbsp;That&nbsp;service&nbsp;is&nbsp;restricted&nbsp;so&nbsp;it&nbsp;only&nbsp;responds&nbsp;to&nbsp;packets&lt;br&gt;<br>
received&nbsp;from&nbsp;IP&nbsp;22.22.22.22&nbsp;(a&nbsp;trusted&nbsp;user).&nbsp;The&nbsp;UDP&nbsp;Web&nbsp;Socket&lt;br&gt;<br>
handshake&nbsp;is&nbsp;carefully&nbsp;constructed&nbsp;so&nbsp;that&nbsp;it&nbsp;won&#39;t&nbsp;trigger&nbsp;dangerous&lt;br&gt;<br>
behaviour&nbsp;in&nbsp;any&nbsp;of&nbsp;those&nbsp;services&nbsp;(like&nbsp;how&nbsp;the&nbsp;TCP&nbsp;Web&nbsp;Socket&nbsp;uses&nbsp;a&lt;br&gt;<br>
safe&nbsp;HTTP-ish&nbsp;handshake).&lt;br&gt;<br>
&lt;br&gt;<br>
An&nbsp;attacker&nbsp;hijacks&nbsp;the&nbsp;IP&nbsp;11.11.11.11&nbsp;from&nbsp;the&nbsp;perspective&nbsp;of&nbsp;the&lt;br&gt;<br>
user&nbsp;(by&nbsp;advertising&nbsp;new&nbsp;routes&nbsp;near&nbsp;the&nbsp;user),&nbsp;so&nbsp;the&nbsp;user&#39;s&nbsp;packets&lt;br&gt;<br>
to&nbsp;that&nbsp;address&nbsp;go&nbsp;to&nbsp;the&nbsp;attacker.&nbsp;The&nbsp;attacker&nbsp;gets&nbsp;the&nbsp;user&nbsp;to&lt;br&gt;<br>
visit&nbsp;a&nbsp;web&nbsp;page&nbsp;which&nbsp;sets&nbsp;up&nbsp;a&nbsp;UDP&nbsp;Web&nbsp;Socket&nbsp;with&nbsp;the&nbsp;attacker&#39;s&lt;br&gt;<br>
server&nbsp;at&nbsp;11.11.11.11,&nbsp;doing&nbsp;all&nbsp;the&nbsp;handshake&nbsp;authentication&lt;br&gt;<br>
correctly.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;attacker&nbsp;then&nbsp;releases&nbsp;its&nbsp;hijacked&nbsp;address,&nbsp;so&nbsp;any&nbsp;subsequent&nbsp;Web&lt;br&gt;<br>
Socket&nbsp;packets&nbsp;will&nbsp;go&nbsp;to&nbsp;the&nbsp;original&nbsp;restricted&nbsp;service.&nbsp;Since&lt;br&gt;<br>
they&#39;re&nbsp;being&nbsp;received&nbsp;from&nbsp;the&nbsp;trusted&nbsp;user,&nbsp;the&nbsp;service&nbsp;will&nbsp;trust&lt;br&gt;<br>
them.&nbsp;Since&nbsp;the&nbsp;web&nbsp;browser&nbsp;has&nbsp;already&nbsp;done&nbsp;the&nbsp;Socket&nbsp;handshake,&nbsp;it&lt;br&gt;<br>
will&nbsp;believe&nbsp;it&#39;s&nbsp;talking&nbsp;to&nbsp;a&nbsp;legitimate&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;and&nbsp;will&lt;br&gt;<br>
continue&nbsp;sending&nbsp;whatever&nbsp;data&nbsp;packets&nbsp;the&nbsp;attacker&#39;s&nbsp;script&nbsp;tells&nbsp;it&lt;br&gt;<br>
to.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;service&nbsp;will&nbsp;then&nbsp;be&nbsp;receiving&nbsp;and&nbsp;responding&nbsp;to&lt;br&gt;<br>
attacker-controlled&nbsp;packets,&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;seen&nbsp;the&nbsp;carefully&lt;br&gt;<br>
constructed&nbsp;handshake&nbsp;that&#39;s&nbsp;designed&nbsp;to&nbsp;protect&nbsp;it.&nbsp;That&#39;s&nbsp;not&nbsp;a&lt;br&gt;<br>
danger&nbsp;for&nbsp;TCP&nbsp;services&nbsp;since&nbsp;they&#39;ll&nbsp;reject&nbsp;unexpected&nbsp;packets&nbsp;from&lt;br&gt;<br>
the&nbsp;middle&nbsp;of&nbsp;a&nbsp;TCP&nbsp;stream,&nbsp;but&nbsp;UDP&nbsp;services&nbsp;may&nbsp;accept&nbsp;packets&nbsp;from&lt;br&gt;<br>
the&nbsp;middle&nbsp;of&nbsp;a&nbsp;UDP&nbsp;Web&nbsp;Socket&nbsp;stream.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;it&#39;s&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;carefully&nbsp;construct&nbsp;the&nbsp;Web&nbsp;Socket&nbsp;handshake&lt;br&gt;<br>
packets&nbsp;to&nbsp;not&nbsp;trigger&nbsp;unwanted&nbsp;behaviour&nbsp;in&nbsp;non-Socket&nbsp;services.&lt;br&gt;<br>
Every&nbsp;data&nbsp;packet&nbsp;sent&nbsp;on&nbsp;the&nbsp;Socket&nbsp;has&nbsp;to&nbsp;be&nbsp;carefully&nbsp;constructed&lt;br&gt;<br>
too.&lt;br&gt;<br>
&lt;br&gt;<br>
(This&nbsp;might&nbsp;be&nbsp;a&nbsp;largely&nbsp;impractical&nbsp;or&nbsp;pointless&nbsp;attack,&nbsp;and&nbsp;there&#39;s&lt;br&gt;<br>
probably&nbsp;much&nbsp;easier&nbsp;ways&nbsp;to&nbsp;attack&nbsp;the&nbsp;exposed&nbsp;service,&nbsp;but&nbsp;I&nbsp;don&#39;t&lt;br&gt;<br>
know&nbsp;enough&nbsp;about&nbsp;security&nbsp;to&nbsp;judge&nbsp;that.&nbsp;Also&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;what&lt;br&gt;<br>
packet&nbsp;construction&nbsp;would&nbsp;be&nbsp;sufficiently&nbsp;careful.&nbsp;But&nbsp;it&nbsp;seems&nbsp;like&nbsp;a&lt;br&gt;<br>
possible&nbsp;new&nbsp;concern&nbsp;that&#39;s&nbsp;introduced&nbsp;when&nbsp;using&nbsp;UDP&nbsp;in&nbsp;this&lt;br&gt;<br>
context.)&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
--&lt;br&gt;<br>
Philip&nbsp;Taylor&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:excors@gmail.com&quot;&gt;excors@gmail.com&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
