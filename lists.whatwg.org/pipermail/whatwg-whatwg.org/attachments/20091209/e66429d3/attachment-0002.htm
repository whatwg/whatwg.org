<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2009/12/9&nbsp;tali&nbsp;garsiel&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:t_garsiel@hotmail.com&quot;&gt;t_garsiel@hotmail.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&gt;<br>
Well,&nbsp;not&nbsp;completely.&lt;div&gt;Regarding&nbsp;the&nbsp;first&nbsp;question-&nbsp;Webkit&nbsp;guys&nbsp;told&nbsp;me&nbsp;(on&nbsp;their&nbsp;IRC&nbsp;channel)&nbsp;that&nbsp;the&nbsp;don&#39;t&nbsp;block&nbsp;the&nbsp;parser&nbsp;and&nbsp;only&nbsp;block&nbsp;scripts&nbsp;that&nbsp;request&nbsp;visual&nbsp;information,&nbsp;so&nbsp;I&#39;m&nbsp;still&nbsp; confused.&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&#39;s&nbsp;my&nbsp;understanding&nbsp;of&nbsp;the&nbsp;implementation&nbsp;inside&nbsp;WebKit&nbsp;currently:&lt;/div&gt;&lt;div&gt;During&nbsp;parsing,&nbsp;WebKit&nbsp;does&nbsp;not&nbsp;block&nbsp;the&nbsp;parser&nbsp;on&nbsp;stylesheet&nbsp;loads,&nbsp;but&nbsp;does&nbsp;block&nbsp;external&nbsp;scripts&nbsp;from&nbsp;running&nbsp;until&nbsp;previously-encountered&nbsp;stylesheets&nbsp;have&nbsp;loaded.&nbsp; WebKit&nbsp;does&nbsp;not&nbsp;suspend&nbsp;script&nbsp;execution&nbsp;on&nbsp;requests&nbsp;for&nbsp;visual&nbsp;information&nbsp;if&nbsp;stylesheets&nbsp;have&nbsp;not&nbsp;loaded&nbsp;(for&nbsp;example&nbsp;for&nbsp;inline&nbsp;scripts&nbsp;or&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;stylesheets&nbsp;added&nbsp;dynamically&nbsp;after&nbsp;parsing&nbsp;has&nbsp;completed).&nbsp; WebKit&nbsp;does&nbsp;suspend&nbsp;parsing&nbsp;of&nbsp;the&nbsp;document&nbsp;on&nbsp;script&nbsp;loads,&nbsp;but&nbsp;has&nbsp;a&nbsp;speculative&nbsp;preloader&nbsp;to&nbsp;attempt&nbsp;to&nbsp;start&nbsp;fetches&nbsp;for&nbsp;resources&nbsp;past&nbsp;the&nbsp;&lt;script&gt;&nbsp;tag.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;James&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&gt;&nbsp;Date:&nbsp;Wed,&nbsp;9&nbsp;Dec&nbsp;2009&nbsp;17:01:30&nbsp;+0000&lt;br&gt;<br>
&gt;&nbsp;From:&nbsp;&lt;a&nbsp;href=&quot;mailto:ian@hixie.ch&quot;&nbsp;target=&quot;_blank&quot;&gt;ian@hixie.ch&lt;/a&gt;&lt;br&gt;&gt;&nbsp;To:&nbsp;&lt;a&nbsp;href=&quot;mailto:t_garsiel@hotmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;t_garsiel@hotmail.com&lt;/a&gt;;&nbsp;&lt;a&nbsp;href=&quot;mailto:bzbarsky@MIT.EDU&quot;&nbsp;target=&quot;_blank&quot;&gt;bzbarsky@MIT.EDU&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;CC:&nbsp;&lt;a&nbsp;href=&quot;mailto:whatwg@whatwg.org&quot;&nbsp;target=&quot;_blank&quot;&gt;whatwg@whatwg.org&lt;/a&gt;&lt;br&gt;&gt;&nbsp;Subject:&nbsp;Re:&nbsp;[whatwg]&nbsp;style&nbsp;sheet&nbsp;blocking&nbsp;scripts&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;On&nbsp;Wed,&nbsp;28&nbsp;Oct&nbsp;2009,&nbsp;tali&nbsp;garsiel&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;This&nbsp;is&nbsp;a&nbsp;quote&nbsp;from&nbsp;Section&nbsp;4.2&nbsp;of&nbsp;the&nbsp;spec:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&quot;A&nbsp;style&nbsp;sheet&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;the&nbsp;Document&nbsp;of&nbsp;an&nbsp;HTML&nbsp;parser&nbsp;or&nbsp;XML&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;parser&nbsp;is&nbsp;said&nbsp;to&nbsp;be&nbsp;a&nbsp;style&nbsp;sheet&nbsp;blocking&nbsp;scripts&nbsp;if&nbsp;the&nbsp;element&nbsp;was&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;created&nbsp;by&nbsp;that&nbsp;Document&#39;s&nbsp;parser,&nbsp;and&nbsp;the&nbsp;element&nbsp;is&nbsp;either&nbsp;a&nbsp;style&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;element&nbsp;or&nbsp;a&nbsp;link&nbsp;element&nbsp;that&nbsp;was&nbsp;an&nbsp;external&nbsp;resource&nbsp;link&nbsp;that&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;contributes&nbsp;to&nbsp;the&nbsp;styling&nbsp;processing&nbsp;model&nbsp;when&nbsp;the&nbsp;element&nbsp;was&nbsp;c<br>
&nbsp;reated&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;by&nbsp;the&nbsp;parser,&nbsp;and&nbsp;the&nbsp;element&#39;s&nbsp;style&nbsp;sheet&nbsp;was&nbsp;enabled&nbsp;when&nbsp;the&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;element&nbsp;was&nbsp;created&nbsp;by&nbsp;the&nbsp;parser,&nbsp;and&nbsp;the&nbsp;element&#39;s&nbsp;style&nbsp;sheet&nbsp;ready&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;flag&nbsp;is&nbsp;not&nbsp;yet&nbsp;set,&nbsp;and,&nbsp;the&nbsp;last&nbsp;time&nbsp;the&nbsp;event&nbsp;loop&nbsp;reached&nbsp;step&nbsp;1,&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;the&nbsp;element&nbsp;was&nbsp;in&nbsp;that&nbsp;Document&quot;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;And&nbsp;the&nbsp;section&nbsp;about&nbsp;parsing&nbsp;-&nbsp;the&nbsp;&quot;&lt;script&gt;&quot;&nbsp;tag&nbsp;says&nbsp;that&nbsp;before&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;executing&nbsp;a&nbsp;script&nbsp;the&nbsp;parser&nbsp;must:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;3.&nbsp;Spin&nbsp;the&nbsp;event&nbsp;loop&nbsp;until&nbsp;there&nbsp;is&nbsp;no&nbsp;style&nbsp;sheet&nbsp;blocking&nbsp;scripts&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;and&nbsp;the&nbsp;script&#39;s&nbsp;&quot;ready&nbsp;to&nbsp;be&nbsp;parser-executed&quot;&nbsp;flag&nbsp;is&nbsp;set.&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;I&nbsp;have&nbsp;two&nbsp;questions:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;1.&nbsp;As&nbsp;far&nbsp;as&nbsp;I&nbsp;know,&nbsp;Firefox&nbsp;and&nbsp;Webkit&nbsp;have&nbsp;a&nbsp;&quot;stall&nbsp;on&nbsp;demand&quot;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;behavior,&nbsp;where&nbsp;a&nbsp;stylesheet&nbsp;blocks&nbsp;a&nbsp;script&nbsp;only&nbsp;if&nbsp;the&nbsp;script&nbsp;asks&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;from&nbsp;style&nbsp;information.&nbsp;According&nbsp;to&nbsp;the&nbsp;spec&nbsp;the&nbsp;style&nbsp;sheet&nbsp;always&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;blocks&nbsp;a&nbsp;script,&nbsp;am&nbsp;I&nbsp;right?&lt;br&gt;&gt;&nbsp;&gt;<br>
&nbsp;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;2.&nbsp;Can&nbsp;you&nbsp;clarify&nbsp;the&nbsp;condition&nbsp;-&nbsp;&quot;the&nbsp;element&#39;s&nbsp;style&nbsp;sheet&nbsp;was&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;enabled&nbsp;when&nbsp;the&nbsp;element&nbsp;was&nbsp;created&nbsp;by&nbsp;the&nbsp;parser,&nbsp;and&nbsp;the&nbsp;element&#39;s&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;style&nbsp;sheet&nbsp;ready&nbsp;flag&nbsp;is&nbsp;not&nbsp;yet&nbsp;set,&nbsp;and,&nbsp;the&nbsp;last&nbsp;time&nbsp;the&nbsp;event&nbsp;loop&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;reached&nbsp;step&nbsp;1,&nbsp;the&nbsp;element&nbsp;was&nbsp;in&nbsp;that&nbsp;Document&quot;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Does&nbsp;it&nbsp;mean&nbsp;the&nbsp;style&nbsp;sheet&nbsp;blocks&nbsp;scripts&nbsp;only&nbsp;if&nbsp;it&#39;s&nbsp;currently&nbsp;being&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;parsed?&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;On&nbsp;Wed,&nbsp;28&nbsp;Oct&nbsp;2009,&nbsp;Boris&nbsp;Zbarsky&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;On&nbsp;10/28/09&nbsp;2:59&nbsp;AM,&nbsp;tali&nbsp;garsiel&nbsp;wrote:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;1.&nbsp;As&nbsp;far&nbsp;as&nbsp;I&nbsp;know,&nbsp;Firefox&nbsp;and&nbsp;Webkit&nbsp;have&nbsp;a&nbsp;&quot;stall&nbsp;on&nbsp;demand&quot;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;behavior,&nbsp;where&nbsp;a&nbsp;stylesheet&nbsp;blocks&nbsp;a&nbsp;script&nbsp;only&nbsp;if&nbsp;the&nbsp;script&nbsp;asks&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;from&nbsp;style&nbsp;information.&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;You&nbsp;know&nbsp;wrong,&nbsp;sorry.&nbsp;&nbsp;Firefox&nbsp;has&nbsp;the&nbsp;behavior&nbsp;the&nbsp;spec&nbsp;describes;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;webkit&nbsp;blocks&nbsp;the&nbsp;parser&nbsp;completely&nbsp;on&nbsp;stylesheets&nbsp;(the&nbsp;behavior&nbsp;Firefox&nbsp;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&gt;&nbsp;&gt;&nbsp;used&nbsp;to&nbsp;have).&nbsp;&nbsp;Last&nbsp;I&nbsp;chec<br>
&nbsp;ked,&nbsp;at&nbsp;least.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;2.&nbsp;Can&nbsp;you&nbsp;clarify&nbsp;the&nbsp;condition&nbsp;-&nbsp;&quot;the&nbsp;element&#39;s&nbsp;style&nbsp;sheet&nbsp;was&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;enabled&nbsp;when&nbsp;the&nbsp;element&nbsp;was&nbsp;created&nbsp;by&nbsp;the&nbsp;parser,&nbsp;and&nbsp;the&nbsp;element&#39;s&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;style&nbsp;sheet&nbsp;ready&nbsp;flag&nbsp;is&nbsp;not&nbsp;yet&nbsp;set,&nbsp;and,&nbsp;the&nbsp;last&nbsp;time&nbsp;the&nbsp;event&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;loop&nbsp;reached&nbsp;step&nbsp;1,&nbsp;the&nbsp;element&nbsp;was&nbsp;in&nbsp;that&nbsp;Document&quot;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;The&nbsp;parts&nbsp;of&nbsp;that&nbsp;condition&nbsp;basically&nbsp;mean:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;1)&nbsp;&nbsp;When&nbsp;the&nbsp;element&nbsp;was&nbsp;created&nbsp;by&nbsp;the&nbsp;parser,&nbsp;it&nbsp;was&nbsp;in&nbsp;the&nbsp;then-enabled&lt;br&gt;&gt;&nbsp;&gt;&nbsp;stylesheet&nbsp;set&nbsp;(i.e.&nbsp;not&nbsp;an&nbsp;alternate&nbsp;stylesheet).&lt;br&gt;&gt;&nbsp;&gt;&nbsp;2)&nbsp;&nbsp;The&nbsp;stylesheet,&nbsp;or&nbsp;one&nbsp;of&nbsp;its&nbsp;@import&nbsp;descendants,&nbsp;is&nbsp;still&nbsp;loading.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;3)&nbsp;&nbsp;The&nbsp;stylesheet&nbsp;linking&nbsp;element&nbsp;is&nbsp;still&nbsp;in&nbsp;the&nbsp;document&nbsp;(so&nbsp;the&nbsp;stylesheet&lt;br&gt;&gt;&nbsp;&gt;&nbsp;still&nbsp;applies).&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Thanks&nbsp;Boris.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Tali,&nbsp;does&nbsp;this&nbsp;answer&nbsp;your&nbsp;question&nbsp;to&nbsp;your&nbsp;satisfaction?&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;&gt;&nbsp;--&nbsp;&lt;br&gt;&gt;&nbsp;Ian&nbsp;Hickson&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U+1047E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;)\._.,--....,&#39;``.&nbsp;&nbsp;&nbsp;&nbsp;fL&lt;br&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://ln.hixie.ch/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ln.hixie.ch/&lt;/a&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U+263A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/,&nbsp;&nbsp;&nbsp;_..&nbsp;\&nbsp;&nbsp;&nbsp;_\&nbsp;&nbsp;;`._&nbsp;,.&lt;br&gt;&gt;&nbsp;Things&nbsp;that&nbsp;are&nbsp;impossible&nbsp;just&nbsp;take&nbsp;longer.&nbsp;&nbsp;&nbsp;`._.-(,_..&#39;--(,_..&#39;`-.;.&#39;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;hm&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;hr&gt;Windows&nbsp;Live&nbsp;Hotmail:&nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://www.microsoft.com/middleeast/windows/windowslive/see-it-in-action/social-network-basics.aspx?ocid=PID23461::T:WLMTAGL:ON:WL:en-xm:SI_SB_4:092009&quot;&nbsp;target=&quot;_blank&quot;&gt;Your&nbsp;friends&nbsp;can&nbsp;get&nbsp;your&nbsp;Facebook&nbsp;updates,&nbsp;right&nbsp;from&nbsp;Hotmail®.&lt;/a&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
