<tt>
On&nbsp;4/29/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Brian&nbsp;Campbell&lt;/b&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:Brian.P.Campbell@dartmouth.edu&quot;&gt;Brian.P.Campbell@dartmouth.edu&lt;/a&gt;&gt;&nbsp;wrote:&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
For&nbsp;the&nbsp;sort&nbsp;of&nbsp;content&nbsp;that&nbsp;we&nbsp;produce,&nbsp;cue&nbsp;points&nbsp;are&nbsp;incredibly&lt;br&gt;important.&nbsp;Most&nbsp;of&nbsp;our&nbsp;content&nbsp;consists&nbsp;of&nbsp;a&nbsp;video&nbsp;or&nbsp;voiceover&lt;br&gt;playing&nbsp;while&nbsp;bullet&nbsp;points&nbsp;appear,&nbsp;animations&nbsp;play,&nbsp;and&nbsp;graphics&nbsp;are&lt;br&gt;revealed,&nbsp;all&nbsp;in&nbsp;sync&nbsp;with&nbsp;the&nbsp;video.&nbsp;We&nbsp;have&nbsp;a&nbsp;very&nbsp;simple&nbsp;system<br>
&lt;br&gt;for&nbsp;doing&nbsp;cue&nbsp;points,&nbsp;that&nbsp;is&nbsp;extremely&nbsp;easy&nbsp;for&nbsp;the&nbsp;content&nbsp;authors&lt;br&gt;to&nbsp;write&nbsp;and&nbsp;is&nbsp;robust&nbsp;for&nbsp;paused&nbsp;media,&nbsp;media&nbsp;that&nbsp;is&nbsp;skipped&nbsp;to&nbsp;the&lt;br&gt;end,&nbsp;etc.&nbsp;We&nbsp;simply&nbsp;have&nbsp;a&nbsp;blocking&nbsp;call,&nbsp;WAIT,&nbsp;that&nbsp;waits&nbsp;until&nbsp;a&lt;br&gt;specific&nbsp;point&nbsp;or&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;specified&nbsp;media&nbsp;element.&nbsp;For&nbsp;instance,<br>
&lt;br&gt;in&nbsp;our&nbsp;language,&nbsp;you&nbsp;might&nbsp;see&nbsp;something&nbsp;like&nbsp;this:&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;(movie&nbsp;&quot;Foo.mov&quot;&nbsp;:name&nbsp;&#39;movie)&lt;br&gt;&nbsp;&nbsp;&nbsp;(wait&nbsp;@movie&nbsp;(tc&nbsp;2&nbsp;3))&lt;br&gt;&nbsp;&nbsp;&nbsp;(show&nbsp;@bullet-1)&lt;br&gt;&nbsp;&nbsp;&nbsp;(wait&nbsp;@movie)&lt;br&gt;&nbsp;&nbsp;&nbsp;(show&nbsp;@bullet-2)&lt;br&gt;&lt;br&gt;If&nbsp;the&nbsp;user&nbsp;skips&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;media&nbsp;clip,&nbsp;that&nbsp;simply&nbsp;causes<br>
&lt;br&gt;all&nbsp;WAITs&nbsp;on&nbsp;that&nbsp;&nbsp;media&nbsp;clip&nbsp;to&nbsp;return&nbsp;instantly.&nbsp;If&nbsp;they&nbsp;skip&lt;br&gt;forward&nbsp;in&nbsp;the&nbsp;media&nbsp;clip,&nbsp;without&nbsp;ending&nbsp;it,&nbsp;all&nbsp;WAITs&nbsp;before&nbsp;that&lt;br&gt;point&nbsp;will&nbsp;return&nbsp;instantly.&nbsp;If&nbsp;the&nbsp;user&nbsp;pauses&nbsp;the&nbsp;media&nbsp;clip,&nbsp;all&lt;br&gt;WAITs&nbsp;on&nbsp;the&nbsp;media&nbsp;clip&nbsp;will&nbsp;block&nbsp;until&nbsp;it&nbsp;is&nbsp;playing&nbsp;again.<br>
&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;a&nbsp;nice&nbsp;system,&nbsp;but&nbsp;I&nbsp;can&#39;t&nbsp;see&nbsp;how&nbsp;even&nbsp;as&nbsp;simple&nbsp;a&nbsp;system&nbsp;as&lt;br&gt;this&nbsp;could&nbsp;be&nbsp;implemented&nbsp;given&nbsp;the&nbsp;current&nbsp;specification&nbsp;of&nbsp;cue&lt;br&gt;points.&nbsp;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;the&nbsp;callbacks&nbsp;execute&nbsp;&quot;when&nbsp;the&nbsp;current<br>
&lt;br&gt;playback&nbsp;position&nbsp;of&nbsp;a&nbsp;media&nbsp;element&nbsp;reaches&quot;&nbsp;the&nbsp;cue&nbsp;point.&nbsp;It&nbsp;seems&lt;br&gt;unclear&nbsp;to&nbsp;me&nbsp;what&nbsp;&quot;reaching&quot;&nbsp;a&nbsp;particular&nbsp;time&nbsp;means.&nbsp;If&nbsp;video&lt;br&gt;playback&nbsp;freezes&nbsp;for&nbsp;a&nbsp;second,&nbsp;and&nbsp;so&nbsp;misses&nbsp;a&nbsp;cue&nbsp;point,&nbsp;is&nbsp;that<br>
&lt;br&gt;considered&nbsp;to&nbsp;have&nbsp;been&nbsp;&quot;reached&quot;?&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;that&nbsp;you&nbsp;can&lt;br&gt;guarantee&nbsp;that&nbsp;a&nbsp;cue&nbsp;point&nbsp;will&nbsp;be&nbsp;executed&nbsp;as&nbsp;long&nbsp;as&nbsp;video&nbsp;has&lt;br&gt;passed&nbsp;a&nbsp;particular&nbsp;cue&nbsp;point?&nbsp;With&nbsp;a&nbsp;lot&nbsp;of&nbsp;bookkeeping&nbsp;and&nbsp;the&lt;br&gt;&quot;timeupdate&quot;&nbsp;event&nbsp;along&nbsp;with&nbsp;the&nbsp;cue&nbsp;points,&nbsp;you&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;keep<br>
&lt;br&gt;track&nbsp;of&nbsp;the&nbsp;current&nbsp;time&nbsp;in&nbsp;the&nbsp;movie&nbsp;well&nbsp;enough&nbsp;to&nbsp;deal&nbsp;with&nbsp;the&lt;br&gt;user&nbsp;skipping&nbsp;forward,&nbsp;pausing,&nbsp;and&nbsp;the&nbsp;video&nbsp;stalling&nbsp;and&nbsp;restarting&lt;br&gt;due&nbsp;to&nbsp;running&nbsp;out&nbsp;of&nbsp;buffer.&nbsp;This&nbsp;doesn&#39;t&nbsp;address,&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;can&lt;br&gt;<br>
tell,&nbsp;issues&nbsp;like&nbsp;the&nbsp;thread&nbsp;displaying&nbsp;the&nbsp;video&nbsp;pausing&nbsp;for&lt;br&gt;whatever&nbsp;reason&nbsp;and&nbsp;so&nbsp;skipping&nbsp;forward&nbsp;after&nbsp;it&nbsp;resumes,&nbsp;which&nbsp;may&lt;br&gt;cause&nbsp;cue&nbsp;points&nbsp;to&nbsp;be&nbsp;lost,&nbsp;and&nbsp;which&nbsp;isn&#39;t&nbsp;specified&nbsp;to&nbsp;send&nbsp;a&lt;br&gt;&quot;timeupdate&quot;&nbsp;event.<br>
&lt;br&gt;&lt;br&gt;Basically,&nbsp;what&nbsp;is&nbsp;necessary&nbsp;is&nbsp;a&nbsp;way&nbsp;to&nbsp;specify&nbsp;that&nbsp;a&nbsp;cue&nbsp;point&lt;br&gt;should&nbsp;always&nbsp;be&nbsp;fired&nbsp;as&nbsp;long&nbsp;as&nbsp;playback&nbsp;has&nbsp;passed&nbsp;a&nbsp;certain&nbsp;time,&lt;br&gt;not&nbsp;just&nbsp;if&nbsp;it&nbsp;&quot;reaches&quot;&nbsp;a&nbsp;particular&nbsp;time.&nbsp;This&nbsp;would&nbsp;prevent&nbsp;us<br>
&lt;br&gt;from&nbsp;having&nbsp;to&nbsp;do&nbsp;a&nbsp;lot&nbsp;of&nbsp;bookkeeping&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;cue&nbsp;points&lt;br&gt;haven&#39;t&nbsp;been&nbsp;missed,&nbsp;and&nbsp;make&nbsp;everything&nbsp;simpler&nbsp;and&nbsp;less&nbsp;fragile.&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;In&nbsp;order&nbsp;to&nbsp;capture&nbsp;this&nbsp;kind&nbsp;of&nbsp;situations,&nbsp;with&nbsp;flexibility&nbsp;in&nbsp;mind,&nbsp;I&nbsp;think&nbsp;the&nbsp;concept&nbsp;of&nbsp;&quot;cue&nbsp;points&quot;&nbsp;may&nbsp;be&nbsp;changed&nbsp;to&nbsp;&quot;cue&nbsp;periods&quot;...<br>
&lt;br&gt;&lt;br&gt;Method&nbsp;names:&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;addEnterCuePeriod(time1,&nbsp;time2,&nbsp;callback)&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;removeEnterCuePeriod(time1,&nbsp;time2,&nbsp;callback)&lt;br&gt;<br>
addLeaveCuePeriod(time1,&nbsp;time2,&nbsp;callback)&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;removeLeaveCuePeriod(time1,&nbsp;time2,&nbsp;callback)&lt;br&gt;<br>
&lt;/div&gt;&lt;br&gt;The&nbsp;callback&nbsp;function&nbsp;mentioned&nbsp;by&nbsp;addEnterCuePeriod&nbsp;will&nbsp;be&nbsp;invoked&nbsp;once&nbsp;when&nbsp;the&nbsp;video&nbsp;enter&nbsp;the&nbsp;period&nbsp;of&nbsp;time&nbsp;bounded&nbsp;by&nbsp;time1&nbsp;and&nbsp;time2.&nbsp;&nbsp;How&nbsp;the&nbsp;video&nbsp;get&nbsp;to&nbsp;a&nbsp;frame&nbsp;between&nbsp;time1&nbsp;and&nbsp;time2&nbsp;doesn&#39;t&nbsp;matter.&nbsp;&nbsp;<br>
i.e.&nbsp;&nbsp;the&nbsp;callback&nbsp;function&nbsp;may&nbsp;be&nbsp;invoked&nbsp;by&nbsp;a&nbsp;normally&nbsp;playing&nbsp;video&nbsp;reaching&nbsp;time1,&nbsp;a&nbsp;video&nbsp;being&nbsp;fast&nbsp;forward&nbsp;/&nbsp;wind&nbsp;back&nbsp;into&nbsp;the&nbsp;period&nbsp;between&nbsp;time1&nbsp;&amp;&nbsp;time2,&nbsp;or&nbsp;a&nbsp;particular&nbsp;timing&nbsp;between&nbsp;time1&nbsp;&amp;&nbsp;time2&nbsp;of&nbsp;the&nbsp;video&nbsp;being&nbsp;directly&nbsp;seek&nbsp;for.<br>
&lt;br&gt;&lt;br&gt;The&nbsp;mechanism&nbsp;of&nbsp;LeaveCuePeriod&nbsp;is&nbsp;similar,&nbsp;while&nbsp;this&nbsp;time&nbsp;the&nbsp;callback&nbsp;is&nbsp;invoked&nbsp;when&nbsp;the&nbsp;video&nbsp;leave&nbsp;the&nbsp;specified&nbsp;cue&nbsp;period.&nbsp;&nbsp;(Or&nbsp;should&nbsp;this&nbsp;pair&nbsp;of&nbsp;methods&nbsp;left&nbsp;out?)&lt;br&gt;&lt;br&gt;With&nbsp;these&nbsp;four&nbsp;methods,&nbsp;one&nbsp;can&nbsp;not&nbsp;only&nbsp;achieve&nbsp;the&nbsp;&quot;bullet&nbsp;point&quot;&nbsp;effect,&nbsp;but&nbsp;also&nbsp;video&nbsp;captions&nbsp;appearance&nbsp;and&nbsp;disappearance.<br>
&lt;br&gt;&lt;br&gt;Hope&nbsp;this&nbsp;helps.&lt;br&gt;&lt;br&gt;郁&lt;br&gt;<br>

</tt>
