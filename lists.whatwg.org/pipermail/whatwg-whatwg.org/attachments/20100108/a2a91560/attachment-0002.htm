<tt>
I&nbsp;think&nbsp;I&nbsp;should&nbsp;have&nbsp;used&nbsp;public-webapps&nbsp;maillist.&nbsp;File&nbsp;API&nbsp;is&nbsp;discussed&nbsp;there.&nbsp;Sorry&nbsp;for&nbsp;spam.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Jan&nbsp;8,&nbsp;2010&nbsp;at&nbsp;1:56&nbsp;PM,&nbsp;Dmitry&nbsp;Titov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:dimich@google.com&quot;&gt;dimich@google.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Does&nbsp;the&nbsp;Blob,&nbsp;which&nbsp;is&nbsp;obtained&nbsp;as&nbsp;File&nbsp;(so&nbsp;it&nbsp;refers&nbsp;to&nbsp;an&nbsp;actual&nbsp;file&nbsp;on&nbsp;disk)&nbsp;track&nbsp;the&nbsp;changes&nbsp;in&nbsp;the&nbsp;underlying&nbsp;file&nbsp;and&nbsp;&#39;mutates&#39;,&nbsp;or&nbsp;does&nbsp;it&nbsp;represent&nbsp;the&nbsp;&#39;snapshot&#39;&nbsp;of&nbsp;the&nbsp;file,&nbsp;or&nbsp;does&nbsp;it&nbsp;become&nbsp;&#39;invalid&#39;?&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Today,&nbsp;if&nbsp;a&nbsp;user&nbsp;selects&nbsp;a&nbsp;file&nbsp;using&nbsp;&lt;input&nbsp;type=file&gt;,&nbsp;and&nbsp;then&nbsp;the&nbsp;file&nbsp;on&nbsp;the&nbsp;disk&nbsp;changes&nbsp;before&nbsp;the&nbsp;&#39;submit&#39;&nbsp;is&nbsp;clicked,&nbsp;the&nbsp;form&nbsp;will&nbsp;submit&nbsp;the&nbsp;latest&nbsp;version&nbsp;of&nbsp;the&nbsp;file.&lt;/div&gt;<br>
<br>
&lt;div&gt;This&nbsp;may&nbsp;be&nbsp;a surprisingly popular&nbsp;use&nbsp;case,&nbsp;when&nbsp;user&nbsp;submits&nbsp;a&nbsp;file&nbsp;via&nbsp;form&nbsp;and wants to&nbsp;do&nbsp;&#39;last&nbsp;moment&#39;&nbsp;changes&nbsp;in&nbsp;the&nbsp;file,&nbsp;after&nbsp;partial&nbsp;pre-populating&nbsp;the&nbsp;form.&nbsp;It&nbsp;works&nbsp;&#39;intuitively&#39;&nbsp;today.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now,&nbsp;if&nbsp;the&nbsp;page&nbsp;decides&nbsp;to&nbsp;use&nbsp;XHR&nbsp;to&nbsp;upload&nbsp;the&nbsp;file,&nbsp;I&nbsp;think&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;var&nbsp;file&nbsp;=&nbsp;myInputElement.files[0];&lt;/div&gt;&lt;div&gt;var&nbsp;xhr&nbsp;=&nbsp;...&lt;/div&gt;&lt;div&gt;xhr.send(file);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
should&nbsp;also&nbsp;send&nbsp;the&nbsp;version&nbsp;of&nbsp;the&nbsp;file&nbsp;that&nbsp;exists&nbsp;at&nbsp;the&nbsp;moment&nbsp;of&nbsp;xhr.send(file),&nbsp;not&nbsp;when&nbsp;user&nbsp;picked&nbsp;the&nbsp;file&nbsp;(for&nbsp;consistency&nbsp;with&nbsp;form&nbsp;action).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Assuming&nbsp;this&nbsp;is&nbsp;desired&nbsp;behavior,&nbsp;what&nbsp;should&nbsp;the&nbsp;following&nbsp;do:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;var&nbsp;file&nbsp;=&nbsp;myInputElement.files[0];&lt;/div&gt;&lt;div&gt;var&nbsp;blob&nbsp;=&nbsp;file.slice(0,&nbsp;file.size);&lt;/div&gt;&lt;div&gt;//&nbsp;...&nbsp;now&nbsp;file&nbsp;on&nbsp;the&nbsp;disk&nbsp;changes&nbsp;...&lt;/div&gt;<br>
<br>
&lt;div&gt;xhr.send(blob);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Will&nbsp;it:&lt;/div&gt;&lt;div&gt;-&nbsp;send&nbsp;the&nbsp;new&nbsp;version&nbsp;of&nbsp;the&nbsp;whole&nbsp;file&nbsp;(and&nbsp;update&nbsp;blob.size?)&lt;/div&gt;&lt;div&gt;-&nbsp;send&nbsp;captured&nbsp;number&nbsp;of&nbsp;bytes&nbsp;from&nbsp;the&nbsp;new&nbsp;version&nbsp;of&nbsp;the&nbsp;file&nbsp;(perhaps&nbsp;truncated&nbsp;since&nbsp;file&nbsp;may&nbsp;be&nbsp;shorter&nbsp;now)&lt;/div&gt;<br>
<br>
&lt;div&gt;-&nbsp;send&nbsp;original&nbsp;bytes&nbsp;from&nbsp;the&nbsp;previous&nbsp;version&nbsp;of&nbsp;the&nbsp;file&nbsp;that&nbsp;existed&nbsp;when&nbsp;Blob&nbsp;was&nbsp;created&nbsp;(sort&nbsp;of&nbsp;&#39;copy&nbsp;on&nbsp;write&#39;)&lt;/div&gt;&lt;div&gt;-&nbsp;throw&nbsp;exception&lt;/div&gt;&lt;div&gt;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;<br>
<br>
&lt;div&gt;Dmitry&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
