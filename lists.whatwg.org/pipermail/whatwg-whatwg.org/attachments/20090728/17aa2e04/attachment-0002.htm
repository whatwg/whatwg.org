<tt>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
2)&nbsp;For&nbsp;multi-process&nbsp;browsers&nbsp;like&nbsp;Chrome,&nbsp;there&nbsp;seem&nbsp;to&nbsp;be&nbsp;limitations&nbsp;as&nbsp;to&nbsp;what&nbsp;can&nbsp;actually&nbsp;be&nbsp;accessed&nbsp;between&nbsp;processes&nbsp;(direct&nbsp;DOM&nbsp;access&nbsp;across&nbsp;process&nbsp;boundaries&nbsp;seems&nbsp;problematic&nbsp;for&nbsp;example).&nbsp;Do&nbsp;you&nbsp;have&nbsp;ideas&nbsp;about&nbsp;how&nbsp;to&nbsp;address&nbsp;this,&nbsp;since&nbsp;assumedly&nbsp;the&nbsp;page&nbsp;calling&nbsp;getInstalledApp()&nbsp;could&nbsp;be&nbsp;running&nbsp;under&nbsp;some&nbsp;arbitrary&nbsp;process?&lt;/blockquote&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Even&nbsp;with&nbsp;single-process&nbsp;browsers&nbsp;you&nbsp;would&nbsp;have&nbsp;to&nbsp;handle&nbsp;threading&nbsp;issues&nbsp;in&nbsp;a&nbsp;way&nbsp;that&nbsp;is&nbsp;just&nbsp;not&nbsp;done&nbsp;in&nbsp;all&nbsp;browsers&nbsp;yet.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
For&nbsp;a)&nbsp;-&nbsp;Having&nbsp;some&nbsp;way&nbsp;to&nbsp;load&nbsp;large&nbsp;amounts&nbsp;of&nbsp;cached&nbsp;javascript&nbsp;quickly&nbsp;in&nbsp;a&nbsp;new&nbsp;page&nbsp;seems&nbsp;like&nbsp;an&nbsp;issue&nbsp;that&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;address&nbsp;in&nbsp;general,&nbsp;not&nbsp;just&nbsp;for&nbsp;pages&nbsp;that&nbsp;install&nbsp;hidden&nbsp;pages.&nbsp;Are&nbsp;there&nbsp;other&nbsp;approaches&nbsp;worth&nbsp;trying&nbsp;here?&lt;/blockquote&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Loading&nbsp;of&nbsp;cached&nbsp;JavaScript&nbsp;isn&#39;t&nbsp;really&nbsp;that&nbsp;slow.&nbsp;I&nbsp;think&nbsp;the&nbsp;real&nbsp;issue&nbsp;here&nbsp;is&nbsp;client&nbsp;state.&nbsp;It&#39;s&nbsp;often&nbsp;a&nbsp;good&nbsp;idea&nbsp;to&nbsp;have&nbsp;a&nbsp;copy&nbsp;of&nbsp;running&nbsp;scripts&nbsp;in&nbsp;each&nbsp;process&nbsp;for&nbsp;stability&nbsp;anyway.&nbsp;However,&nbsp;cached&nbsp;parsing/pre-compilation&nbsp;(if&nbsp;available)&nbsp;of&nbsp;scripts&nbsp;might&nbsp;be&nbsp;a&nbsp;generally&nbsp;good&nbsp;idea.&nbsp;Perhaps&nbsp;some&nbsp;kind&nbsp;of&nbsp;process&nbsp;cloning&nbsp;like&nbsp;*nix&nbsp;forks?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;IMHO,&nbsp;this&nbsp;could&nbsp;be&nbsp;solved&nbsp;cleaner&nbsp;and&nbsp;more&nbsp;memory&nbsp;efficient&nbsp;way&nbsp;with&nbsp;some&nbsp;form&nbsp;of&nbsp;persistent&nbsp;workers&nbsp;rather&nbsp;than&nbsp;a&nbsp;&quot;hidden&quot;&nbsp;page.&nbsp;But&nbsp;I&nbsp;might&nbsp;be&nbsp;missing&nbsp;something.&lt;/div&gt;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
On&nbsp;Tue,&nbsp;Jul&nbsp;28,&nbsp;2009&nbsp;at&nbsp;1:30&nbsp;AM,&nbsp;Drew&nbsp;Wilson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:atwilson@google.com&quot;&gt;atwilson@google.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
This&nbsp;sounds&nbsp;really&nbsp;powerful,&nbsp;and&nbsp;seems&nbsp;like&nbsp;a&nbsp;natural&nbsp;evolution&nbsp;of&nbsp;some&nbsp;of&nbsp;the&nbsp;stuff&nbsp;we&#39;ve&nbsp;discussed&nbsp;previously&nbsp;for&nbsp;persistent&nbsp;workers.&nbsp;A&nbsp;few&nbsp;comments/notes:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;It&nbsp;sounds&nbsp;like&nbsp;this&nbsp;background&nbsp;page&nbsp;would&nbsp;act&nbsp;like&nbsp;any&nbsp;other&nbsp;web&nbsp;page&nbsp;with&nbsp;respect&nbsp;to&nbsp;its&nbsp;processing&nbsp;model&nbsp;(i.e.&nbsp;like&nbsp;other&nbsp;pages,&nbsp;script&nbsp;running&nbsp;in&nbsp;this&nbsp;page&nbsp;would&nbsp;be&nbsp;limited&nbsp;as&nbsp;to&nbsp;how&nbsp;long&nbsp;it&nbsp;can&nbsp;run,&nbsp;as&nbsp;opposed&nbsp;to&nbsp;workers&nbsp;which&nbsp;can&nbsp;run&nbsp;for&nbsp;any&nbsp;arbitrary&nbsp;length&nbsp;of&nbsp;time).&nbsp;This&nbsp;seems&nbsp;reasonable,&nbsp;especially&nbsp;since&nbsp;this&nbsp;page&nbsp;could&nbsp;assumedly&nbsp;still&nbsp;create&nbsp;workers&nbsp;if&nbsp;it&nbsp;need&nbsp;to&nbsp;do&nbsp;true&nbsp;background&nbsp;processing.&nbsp;It&#39;s&nbsp;really&nbsp;more&nbsp;of&nbsp;a&nbsp;&quot;hidden&quot;&nbsp;page&nbsp;than&nbsp;a&nbsp;&quot;background&nbsp;page&quot;?&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2)&nbsp;For&nbsp;multi-process&nbsp;browsers&nbsp;like&nbsp;Chrome,&nbsp;there&nbsp;seem&nbsp;to&nbsp;be&nbsp;limitations&nbsp;as&nbsp;to&nbsp;what&nbsp;can&nbsp;actually&nbsp;be&nbsp;accessed&nbsp;between&nbsp;processes&nbsp;(direct&nbsp;DOM&nbsp;access&nbsp;across&nbsp;process&nbsp;boundaries&nbsp;seems&nbsp;problematic&nbsp;for&nbsp;example).&nbsp;Do&nbsp;you&nbsp;have&nbsp;ideas&nbsp;about&nbsp;how&nbsp;to&nbsp;address&nbsp;this,&nbsp;since&nbsp;assumedly&nbsp;the&nbsp;page&nbsp;calling&nbsp;getInstalledApp()&nbsp;could&nbsp;be&nbsp;running&nbsp;under&nbsp;some&nbsp;arbitrary&nbsp;process?&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3)&nbsp;This&nbsp;approach&nbsp;has&nbsp;another&nbsp;advantage&nbsp;over&nbsp;something&nbsp;like&nbsp;workers&nbsp;in&nbsp;that&nbsp;a&nbsp;hidden&nbsp;page&nbsp;can&nbsp;do&nbsp;cross-domain&nbsp;access/sharing&nbsp;via&nbsp;iframes,&nbsp;whereas&nbsp;workers&nbsp;don&#39;t&nbsp;really&nbsp;have&nbsp;any&nbsp;facility&nbsp;for&nbsp;cross-domain&nbsp;access.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;4)&nbsp;I&nbsp;had&nbsp;a&nbsp;quick&nbsp;question/clarification&nbsp;about&nbsp;the&nbsp;motivation&nbsp;behind&nbsp;this&nbsp;-&nbsp;aside&nbsp;from&nbsp;the&nbsp;advantages&nbsp;described&nbsp;above,&nbsp;it&nbsp;sounds&nbsp;like&nbsp;the&nbsp;specific&nbsp;problem&nbsp;you&nbsp;are&nbsp;solving&nbsp;by&nbsp;a&nbsp;hidden&nbsp;page&nbsp;is&nbsp;a)&nbsp;you&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;load&nbsp;javascript&nbsp;in&nbsp;a&nbsp;new&nbsp;page&nbsp;(which&nbsp;I&#39;m&nbsp;assuming&nbsp;must&nbsp;be&nbsp;slow),&nbsp;and&nbsp;b)&nbsp;you&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;load&nbsp;client&nbsp;state&nbsp;in&nbsp;the&nbsp;new&nbsp;page.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;a)&nbsp;-&nbsp;Having&nbsp;some&nbsp;way&nbsp;to&nbsp;load&nbsp;large&nbsp;amounts&nbsp;of&nbsp;cached&nbsp;javascript&nbsp;quickly&nbsp;in&nbsp;a&nbsp;new&nbsp;page&nbsp;seems&nbsp;like&nbsp;an&nbsp;issue&nbsp;that&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;address&nbsp;in&nbsp;general,&nbsp;not&nbsp;just&nbsp;for&nbsp;pages&nbsp;that&nbsp;install&nbsp;hidden&nbsp;pages.&nbsp;Are&nbsp;there&nbsp;other&nbsp;approaches&nbsp;worth&nbsp;trying&nbsp;here?&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;b)&nbsp;-&nbsp;How&nbsp;much&nbsp;client&nbsp;state&nbsp;are&nbsp;we&nbsp;talking&nbsp;about?&nbsp;If&nbsp;you&nbsp;were&nbsp;to&nbsp;pursue&nbsp;this&nbsp;approach&nbsp;using&nbsp;workers&nbsp;to&nbsp;maintain&nbsp;client&nbsp;state,&nbsp;how&nbsp;much&nbsp;data&nbsp;would&nbsp;you&nbsp;expect&nbsp;to&nbsp;be&nbsp;transferred&nbsp;to&nbsp;the&nbsp;client&nbsp;app&nbsp;on&nbsp;startup?&nbsp;We&#39;re&nbsp;seeing&nbsp;fairly&nbsp;low&nbsp;latency&nbsp;for&nbsp;client&lt;-&gt;worker&nbsp;communication,&nbsp;so&nbsp;in&nbsp;theory&nbsp;it&nbsp;shouldn&#39;t&nbsp;be&nbsp;a&nbsp;huge&nbsp;source&nbsp;of&nbsp;slowdown.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree&nbsp;that&nbsp;the&nbsp;programming&nbsp;model&nbsp;of&nbsp;the&nbsp;hidden&nbsp;page&nbsp;is&nbsp;much&nbsp;cleaner/more&nbsp;familiar&nbsp;than&nbsp;rewriting&nbsp;applications&nbsp;to&nbsp;use&nbsp;asynchronous&nbsp;messaging,&nbsp;so&nbsp;that&nbsp;may&nbsp;be&nbsp;sufficient&nbsp;motivation&nbsp;for&nbsp;this.&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;-atw&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Jul&nbsp;27,&nbsp;2009&nbsp;at&nbsp;11:50&nbsp;AM,&nbsp;Michael&nbsp;Davidson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:mpd@google.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mpd@google.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hello&nbsp;folks&nbsp;-&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;m&nbsp;an&nbsp;engineer&nbsp;on&nbsp;the&nbsp;Gmail&nbsp;team.&nbsp;We&#39;ve&nbsp;been&nbsp;working&nbsp;on&nbsp;a&nbsp;prototype&lt;br&gt;<br>
with&nbsp;the&nbsp;Chrome&nbsp;team&nbsp;to&nbsp;make&nbsp;the&nbsp;Gmail&nbsp;experience&nbsp;better.&nbsp;We&nbsp;thought&lt;br&gt;<br>
we&#39;d&nbsp;throw&nbsp;out&nbsp;our&nbsp;ideas&nbsp;to&nbsp;the&nbsp;list&nbsp;to&nbsp;get&nbsp;some&nbsp;feedback.&lt;br&gt;<br>
&lt;br&gt;<br>
THE&nbsp;PROBLEM&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;would&nbsp;like&nbsp;to&nbsp;enable&nbsp;rich&nbsp;internet&nbsp;applications&nbsp;to&nbsp;achieve&nbsp;feature&lt;br&gt;<br>
parity&nbsp;with&nbsp;desktop&nbsp;applications.&nbsp;I&nbsp;will&nbsp;use&nbsp;Gmail&nbsp;and&nbsp;Outlook&nbsp;as&lt;br&gt;<br>
examples&nbsp;for&nbsp;stating&nbsp;the&nbsp;problems&nbsp;we&nbsp;hope&nbsp;to&nbsp;solve.&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;Slow&nbsp;startup:&nbsp;When&nbsp;a&nbsp;user&nbsp;navigates&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;http://mail.google.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mail.google.com&lt;/a&gt;,&nbsp;multiple&lt;br&gt;<br>
server&nbsp;requests&nbsp;are&nbsp;required&nbsp;to&nbsp;render&nbsp;the&nbsp;page.&nbsp;The&nbsp;Javascript&nbsp;is&lt;br&gt;<br>
cacheable,&nbsp;but&nbsp;personal&nbsp;data&nbsp;(e.g.&nbsp;the&nbsp;list&nbsp;of&nbsp;emails&nbsp;to&nbsp;show)&nbsp;is&nbsp;not.&lt;br&gt;<br>
New&nbsp;releases&nbsp;of&nbsp;Gmail&nbsp;that&nbsp;require&nbsp;JS&nbsp;downloads&nbsp;are&nbsp;even&nbsp;slower&nbsp;to&lt;br&gt;<br>
load.&lt;br&gt;<br>
--&nbsp;Native&nbsp;apps&nbsp;like&nbsp;Outlook&nbsp;can&nbsp;(and&nbsp;do)&nbsp;run&nbsp;background&nbsp;processes&nbsp;on&lt;br&gt;<br>
the&nbsp;user&#39;s&nbsp;machine&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;data&nbsp;is&nbsp;always&nbsp;up-to-date.&lt;br&gt;<br>
--&nbsp;Notifications:&nbsp;Likewise,&nbsp;Outlook&nbsp;can&nbsp;notify&nbsp;users&nbsp;(via&nbsp;a&nbsp;background&lt;br&gt;<br>
process)&nbsp;when&nbsp;new&nbsp;mail&nbsp;comes&nbsp;in&nbsp;even&nbsp;if&nbsp;it&#39;s&nbsp;not&nbsp;running.&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;SOLUTION&lt;br&gt;<br>
&lt;br&gt;<br>
Our&nbsp;proposed&nbsp;solution&nbsp;has&nbsp;two&nbsp;parts.&nbsp;The&nbsp;first,&nbsp;which&nbsp;should&nbsp;be&lt;br&gt;<br>
generally&nbsp;useful,&nbsp;is&nbsp;the&nbsp;ability&nbsp;to&nbsp;have&nbsp;a&nbsp;hidden&nbsp;HTML/JS&nbsp;page&nbsp;running&lt;br&gt;<br>
in&nbsp;the&nbsp;background&nbsp;that&nbsp;can&nbsp;access&nbsp;the&nbsp;DOM&nbsp;of&nbsp;visible&nbsp;windows.&nbsp;This&lt;br&gt;<br>
page&nbsp;should&nbsp;be&nbsp;accessible&nbsp;from&nbsp;windows&nbsp;that&nbsp;the&nbsp;user&nbsp;navigates&nbsp;to.&nbsp;We&lt;br&gt;<br>
call&nbsp;this&nbsp;background&nbsp;Javascript&nbsp;window&nbsp;a&nbsp;&quot;shared&nbsp;context&quot;&nbsp;or&nbsp;a&lt;br&gt;<br>
&quot;background&nbsp;page&quot;.&nbsp;This&nbsp;will&nbsp;enable&nbsp;multiple&nbsp;instances&nbsp;of&nbsp;a&nbsp;web&nbsp;app&lt;br&gt;<br>
(e.g.&nbsp;tearoff&nbsp;windows&nbsp;in&nbsp;Gmail)&nbsp;to&nbsp;cleanly&nbsp;access&nbsp;the&nbsp;same&nbsp;user&nbsp;state&lt;br&gt;<br>
no&nbsp;matter&nbsp;which&nbsp;windows&nbsp;are&nbsp;open.&lt;br&gt;<br>
&lt;br&gt;<br>
Additionally,&nbsp;we&#39;d&nbsp;like&nbsp;this&nbsp;background&nbsp;page&nbsp;to&nbsp;continue&nbsp;to&nbsp;run&nbsp;after&lt;br&gt;<br>
the&nbsp;user&nbsp;has&nbsp;navigated&nbsp;away&nbsp;from&nbsp;the&nbsp;site,&nbsp;and&nbsp;preferably&nbsp;after&nbsp;the&lt;br&gt;<br>
user&nbsp;has&nbsp;closed&nbsp;the&nbsp;browser.&nbsp;This&nbsp;will&nbsp;enable&nbsp;us&nbsp;to&nbsp;keep&nbsp;client-side&lt;br&gt;<br>
data&nbsp;up-to-date&nbsp;on&nbsp;the&nbsp;user&#39;s&nbsp;machine.&nbsp;It&nbsp;will&nbsp;also&nbsp;enable&nbsp;us&nbsp;to&lt;br&gt;<br>
download&nbsp;JS&nbsp;in&nbsp;advance.&nbsp;When&nbsp;the&nbsp;user&nbsp;navigates&nbsp;to&nbsp;a&nbsp;web&nbsp;app,&nbsp;all&nbsp;the&lt;br&gt;<br>
background&nbsp;page&nbsp;has&nbsp;to&nbsp;do&nbsp;is&nbsp;draw&nbsp;the&nbsp;DOM&nbsp;in&nbsp;the&nbsp;visible&nbsp;window.&nbsp;This&lt;br&gt;<br>
should&nbsp;significantly&nbsp;speed&nbsp;up&nbsp;app&nbsp;startup.&nbsp;Additionally,&nbsp;when&lt;br&gt;<br>
something&nbsp;happens&nbsp;that&nbsp;requires&nbsp;notification,&nbsp;the&nbsp;background&nbsp;page&nbsp;can&lt;br&gt;<br>
launch&nbsp;a&nbsp;visible&nbsp;page&nbsp;with&nbsp;a&nbsp;notification&nbsp;(or&nbsp;use&nbsp;other&nbsp;rich&nbsp;APIs&nbsp;for&lt;br&gt;<br>
showing&nbsp;notifications).&lt;br&gt;<br>
&lt;br&gt;<br>
WHY&nbsp;NOT&nbsp;SHARED&nbsp;WORKERS&lt;br&gt;<br>
&lt;br&gt;<br>
Shared&nbsp;workers&nbsp;and&nbsp;persistent&nbsp;workers&nbsp;are&nbsp;designed&nbsp;to&nbsp;solve&nbsp;similar&lt;br&gt;<br>
problems,&nbsp;but&nbsp;don&#39;t&nbsp;meet&nbsp;our&nbsp;needs.&nbsp;The&nbsp;key&nbsp;difference&nbsp;between&nbsp;what&lt;br&gt;<br>
we&#39;re&nbsp;proposing&nbsp;and&nbsp;earlier&nbsp;proposals&nbsp;for&nbsp;persistent&nbsp;workers&nbsp;is&nbsp;that&lt;br&gt;<br>
background&nbsp;pages&nbsp;would&nbsp;be&nbsp;able&nbsp;to&nbsp;launch&nbsp;visible&nbsp;windows&nbsp;and&nbsp;have&nbsp;full&lt;br&gt;<br>
DOM&nbsp;access.&nbsp; This&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;model&nbsp;of&nbsp;workers&nbsp;where&nbsp;all&lt;br&gt;<br>
interaction&nbsp;with&nbsp;the&nbsp;DOM&nbsp;has&nbsp;to&nbsp;be&nbsp;done&nbsp;through&nbsp;asynchronous&nbsp;message&lt;br&gt;<br>
passing.&nbsp;We&nbsp;would&nbsp;like&nbsp;background&nbsp;pages&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;drive&nbsp;UI&nbsp;in&nbsp;a&lt;br&gt;<br>
visible&nbsp;window&nbsp;using&nbsp;the&nbsp;techniques&nbsp;(DOM&nbsp;manipulation,&nbsp;innerHTML)&nbsp;that&lt;br&gt;<br>
are&nbsp;common&nbsp;today.&nbsp;We&nbsp;believe&nbsp;that&nbsp;more&nbsp;apps&nbsp;would&nbsp;be&nbsp;able&nbsp;to&nbsp;take&lt;br&gt;<br>
advantage&nbsp;of&nbsp;a&nbsp;background&nbsp;page&nbsp;if&nbsp;they&nbsp;didn&#39;t&nbsp;require&nbsp;rewriting&nbsp;the&lt;br&gt;<br>
app&nbsp;in&nbsp;the&nbsp;asynchronous,&nbsp;message-passing&nbsp;style&nbsp;required&nbsp;by&nbsp;workers.&lt;br&gt;<br>
Allowing&nbsp;the&nbsp;background&nbsp;page&nbsp;to&nbsp;drive&nbsp;the&nbsp;UI&nbsp;by&nbsp;doing&nbsp;direct&nbsp;DOM&lt;br&gt;<br>
manipulation&nbsp;is&nbsp;a&nbsp;more&nbsp;common&nbsp;programming&nbsp;style.&nbsp;For&nbsp;apps&nbsp;that&nbsp;don&#39;t&lt;br&gt;<br>
need&nbsp;the&nbsp;benefits&nbsp;of&nbsp;multiple&nbsp;threads&nbsp;provided&nbsp;by&nbsp;shared&nbsp;workers,&nbsp;this&lt;br&gt;<br>
will&nbsp;give&nbsp;the&nbsp;benefits&nbsp;of&nbsp;fast&nbsp;startup&nbsp;and&nbsp;the&nbsp;benefits&nbsp;of&nbsp;running&nbsp;in&lt;br&gt;<br>
the&nbsp;background&nbsp;(like&nbsp;showing&nbsp;notifications)&nbsp;without&nbsp;the&nbsp;downside&nbsp;of&lt;br&gt;<br>
the&nbsp;worker&nbsp;programming&nbsp;model.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;concepts&nbsp;here&nbsp;are&nbsp;similar&nbsp;to&nbsp;permanent&nbsp;workers,&nbsp;but&nbsp;with&nbsp;a&lt;br&gt;<br>
different&nbsp;programming&nbsp;model.&lt;br&gt;<br>
&lt;br&gt;<br>
IMPLEMENTATION&nbsp;AVENUES&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;now,&nbsp;we&nbsp;have&nbsp;a&nbsp;simple&nbsp;API&nbsp;in&nbsp;Chrome.&nbsp;This&nbsp;is&nbsp;meant&nbsp;as&nbsp;a&nbsp;prototype&lt;br&gt;<br>
of&nbsp;the&nbsp;concepts,&nbsp;not&nbsp;as&nbsp;a&nbsp;final&nbsp;API.&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;installApp(uri,&nbsp;name)&nbsp;Fetches&nbsp;the&nbsp;HTML&nbsp;page&nbsp;at&nbsp;uri,&nbsp;and&nbsp;runs&nbsp;it&nbsp;as&lt;br&gt;<br>
a&nbsp;hidden&nbsp;window.&nbsp;Currently&nbsp;this&nbsp;window&nbsp;is&nbsp;loaded&nbsp;when&nbsp;the&nbsp;machine&lt;br&gt;<br>
starts.&nbsp;This&nbsp;should&nbsp;eventually&nbsp;involve&nbsp;permissioning&nbsp;UI,&nbsp;but&nbsp;this&nbsp;is&lt;br&gt;<br>
not&nbsp;implemented.&nbsp;name&nbsp;is&nbsp;a&nbsp;name&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;get&nbsp;access&nbsp;to&nbsp;the&lt;br&gt;<br>
hidden&nbsp;window.&lt;br&gt;<br>
--&nbsp;getInstalledApp(name)&nbsp;Returns&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;background&nbsp;page,&lt;br&gt;<br>
or&nbsp;null&nbsp;if&nbsp;the&nbsp;app&nbsp;is&nbsp;not&nbsp;installed.&lt;br&gt;<br>
--&nbsp;removeInstalledApp(name)&nbsp;The&nbsp;moral&nbsp;equivalent&nbsp;of&nbsp;window.close()&nbsp;for&lt;br&gt;<br>
a&nbsp;background&nbsp;page.&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;might&nbsp;migrate&nbsp;to&nbsp;a&nbsp;model&nbsp;where&nbsp;webapps&nbsp;can&nbsp;be&nbsp;installed&nbsp;as&nbsp;Chrome&lt;br&gt;<br>
extensions&nbsp;instead&nbsp;of&nbsp;using&nbsp;a&nbsp;Javascript&nbsp;call&nbsp;to&nbsp;install&nbsp;the&nbsp;app.&lt;br&gt;<br>
&lt;br&gt;<br>
Another&nbsp;alternative&nbsp;we&#39;ve&nbsp;discussed&nbsp;is&nbsp;allowing&nbsp;authors&nbsp;to&nbsp;specify&nbsp;in&lt;br&gt;<br>
their&nbsp;AppCache&nbsp;manifest&nbsp;that&nbsp;a&nbsp;given&nbsp;page&nbsp;should&nbsp;be&nbsp;an&nbsp;always-loaded&lt;br&gt;<br>
background&nbsp;page.&nbsp;This&nbsp;seems&nbsp;like&nbsp;a&nbsp;natural&nbsp;fit&nbsp;since&nbsp;the&nbsp;AppCache&lt;br&gt;<br>
manifest&nbsp;is&nbsp;where&nbsp;authors&nbsp;describe&nbsp;the&nbsp;attributes&nbsp;of&nbsp;various&nbsp;parts&nbsp;of&lt;br&gt;<br>
their&nbsp;app.&lt;br&gt;<br>
&lt;br&gt;<br>
KNOWN&nbsp;ISSUES&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;mentioned&nbsp;in&nbsp;earlier&nbsp;discussions&nbsp;about&nbsp;persistent&nbsp;workers,&lt;br&gt;<br>
permissioning&nbsp;UI&nbsp;is&nbsp;a&nbsp;major&nbsp;issue.&lt;br&gt;<br>
&lt;br&gt;<br>
FEEDBACK&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;would&nbsp;like&nbsp;to&nbsp;know&nbsp;if&nbsp;others&nbsp;would&nbsp;find&nbsp;this&nbsp;functionality&nbsp;useful.&lt;br&gt;<br>
Does&nbsp;anyone&nbsp;have&nbsp;an&nbsp;idea&nbsp;for&nbsp;a&nbsp;better&nbsp;API?&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Michael&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
