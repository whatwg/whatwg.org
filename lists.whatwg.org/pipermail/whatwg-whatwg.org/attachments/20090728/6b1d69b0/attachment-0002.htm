<tt>
I&#39;ve&nbsp;been&nbsp;kicking&nbsp;around&nbsp;some&nbsp;ideas&nbsp;in&nbsp;this&nbsp;area.&nbsp;One&nbsp;thing&nbsp;you&nbsp;could&nbsp;do&nbsp;with&nbsp;persistent&nbsp;workers&nbsp;is&nbsp;restrict&nbsp;network&nbsp;access&nbsp;to&nbsp;the&nbsp;domain&nbsp;of&nbsp;that&nbsp;worker&nbsp;if&nbsp;you&nbsp;were&nbsp;concerned&nbsp;about&nbsp;botnets. That&nbsp;doesn&#39;t&nbsp;address&nbsp;the&nbsp;&quot;I&nbsp;installed&nbsp;something&nbsp;in&nbsp;my&nbsp;browser&nbsp;and&nbsp;now&nbsp;it&#39;s&nbsp;constantly&nbsp;sucking&nbsp;up&nbsp;my&nbsp;CPU&quot;&nbsp;issue,&nbsp;but&nbsp;that&nbsp;makes&nbsp;us&nbsp;no&nbsp;different&nbsp;than&nbsp;Flash&nbsp;:-P&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Anyhow,&nbsp;addressing&nbsp;some&nbsp;of&nbsp;the&nbsp;other&nbsp;comments&nbsp;-&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;that&nbsp;there&#39;s&nbsp;necessarily&nbsp;a&nbsp;problem&nbsp;with&nbsp;the&nbsp;async&nbsp;worker&nbsp;APIs&nbsp;as&nbsp;they&nbsp;stand,&nbsp;and&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;we&nbsp;can&nbsp;easily&nbsp;retrofit&nbsp;synchronous&nbsp;APIs&nbsp;on&nbsp;top&nbsp;of&nbsp;their&nbsp;current&nbsp;execution&nbsp;model.&nbsp;The&nbsp;issue&nbsp;is&nbsp;that&nbsp;the&nbsp;core&nbsp;problem&nbsp;that&nbsp;Workers&nbsp;solve&nbsp;(parallel&nbsp;execution&nbsp;in&nbsp;a&nbsp;separate&nbsp;context&nbsp;from&nbsp;the&nbsp;page)&nbsp;is&nbsp;different&nbsp;than&nbsp;the&nbsp;problem&nbsp;that&nbsp;large&nbsp;web&nbsp;apps&nbsp;are&nbsp;trying&nbsp;to&nbsp;address&nbsp;(reduced&nbsp;latency).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;SharedWorkers&nbsp;are&nbsp;overloaded&nbsp;to&nbsp;provide&nbsp;a&nbsp;way&nbsp;for&nbsp;pages&nbsp;under&nbsp;the&nbsp;same&nbsp;domain&nbsp;to&nbsp;share&nbsp;state,&nbsp;but&nbsp;this&nbsp;seems&nbsp;like&nbsp;an&nbsp;orthogonal&nbsp;goal&nbsp;to&nbsp;&quot;parallel&nbsp;execution&quot;&nbsp;and&nbsp;I&nbsp;suspect&nbsp;that&nbsp;we&nbsp;may&nbsp;have&nbsp;ended&nbsp;up&nbsp;with&nbsp;a&nbsp;cleaner&nbsp;solution&nbsp;had&nbsp;we&nbsp;decided&nbsp;to&nbsp;address&nbsp;the&nbsp;&quot;shared&nbsp;state&quot;&nbsp;issue&nbsp;via&nbsp;a&nbsp;separate&nbsp;mechanism.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Similarly,&nbsp;the&nbsp;&quot;hidden&nbsp;page&quot;&nbsp;mechanism&nbsp;seems&nbsp;to&nbsp;address&nbsp;a&nbsp;bunch&nbsp;of&nbsp;issues&nbsp;at&nbsp;once,&nbsp;and&nbsp;I&#39;m&nbsp;wondering&nbsp;if&nbsp;we&nbsp;explicitly&nbsp;laid&nbsp;out&nbsp;the&nbsp;problems&nbsp;it&#39;s&nbsp;trying&nbsp;to&nbsp;solve,&nbsp;whether&nbsp;we&nbsp;might&nbsp;find&nbsp;a&nbsp;set&nbsp;of&nbsp;distinct&nbsp;smaller&nbsp;solutions&nbsp;that&nbsp;were&nbsp;more&nbsp;generally&nbsp;applicable.&nbsp;I&nbsp;just&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;make&nbsp;the&nbsp;same&nbsp;design&nbsp;choices&nbsp;that&nbsp;we&nbsp;did&nbsp;with&nbsp;SharedWorkers,&nbsp;and&nbsp;end&nbsp;up&nbsp;with&nbsp;a&nbsp;monolithic&nbsp;solution&nbsp;that&nbsp;doesn&#39;t&nbsp;address&nbsp;the&nbsp;individual&nbsp;goals&nbsp;(i.e.&nbsp;cross-page&nbsp;sharing)&nbsp;in&nbsp;a&nbsp;developer-friendly&nbsp;manner.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;(and&nbsp;forgive&nbsp;me&nbsp;for&nbsp;restating),&nbsp;it&nbsp;seems&nbsp;like&nbsp;hidden&nbsp;page&nbsp;addresses&nbsp;the&nbsp;following&nbsp;problems&nbsp;that&nbsp;gmail&nbsp;and&nbsp;other&nbsp;large&nbsp;web&nbsp;apps&nbsp;are&nbsp;having:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;Loading&nbsp;large&nbsp;amounts&nbsp;of&nbsp;Javascript&nbsp;is&nbsp;slow,&nbsp;even&nbsp;from&nbsp;cache.&lt;/div&gt;<br>
&lt;div&gt;2)&nbsp;Loading&nbsp;application&nbsp;state&nbsp;from&nbsp;the&nbsp;database&nbsp;is&nbsp;slow.&lt;/div&gt;&lt;div&gt;3)&nbsp;Sharing&nbsp;between&nbsp;pages&nbsp;requires&nbsp;going&nbsp;through&nbsp;the&nbsp;database&nbsp;or&nbsp;shared&nbsp;worker&nbsp;-&nbsp;you&nbsp;can&#39;t&nbsp;just&nbsp;party&nbsp;on&nbsp;a&nbsp;big&nbsp;shared&nbsp;datastructure.&lt;/div&gt;&lt;div&gt;4)&nbsp;There&#39;s&nbsp;no&nbsp;way&nbsp;to&nbsp;do&nbsp;things&nbsp;like&nbsp;new&nbsp;mail&nbsp;notifications,&nbsp;calendar&nbsp;notifications,&nbsp;local&nbsp;updates&nbsp;of&nbsp;your&nbsp;email&nbsp;inbox,&nbsp;etc&nbsp;when&nbsp;the&nbsp;browser&nbsp;is&nbsp;not&nbsp;open.&nbsp;Currently,&nbsp;even&nbsp;the&nbsp;most&nbsp;brain-dead&nbsp;shareware&nbsp;desktop&nbsp;calendar&nbsp;app&nbsp;can&nbsp;display&nbsp;an&nbsp;event&nbsp;notification,&nbsp;while&nbsp;web-based&nbsp;calendars&nbsp;are&nbsp;forced&nbsp;to&nbsp;rely&nbsp;on&nbsp;the&nbsp;user&nbsp;remembering&nbsp;to&nbsp;keep&nbsp;a&nbsp;browser&nbsp;window&nbsp;open.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Am&nbsp;I&nbsp;missing&nbsp;any&nbsp;other&nbsp;issues&nbsp;that&nbsp;hidden&nbsp;page&nbsp;is&nbsp;supposed&nbsp;to&nbsp;address?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;persistent&nbsp;worker&nbsp;could&nbsp;address&nbsp;#4&nbsp;(perhaps&nbsp;with&nbsp;some&nbsp;limitations&nbsp;on&nbsp;network&nbsp;access&nbsp;to&nbsp;address&nbsp;security&nbsp;concerns).&nbsp;For&nbsp;#1/#2/#3,&nbsp;are&nbsp;we&nbsp;saying&nbsp;that&nbsp;web&nbsp;applications&nbsp;*must*&nbsp;install&nbsp;themselves&nbsp;(with&nbsp;the&nbsp;requisite&nbsp;user&nbsp;flow)&nbsp;just&nbsp;to&nbsp;get&nbsp;fast&nbsp;load&nbsp;times?&nbsp;That&nbsp;seems&nbsp;unfortunate&nbsp;-&nbsp;if&nbsp;I&nbsp;don&#39;t&nbsp;care&nbsp;about&nbsp;#4,&nbsp;I&#39;d&nbsp;really&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;get&nbsp;the&nbsp;benefits&nbsp;of&nbsp;#1/2/3&nbsp;without&nbsp;jumping&nbsp;through&nbsp;a&nbsp;user&nbsp;install.&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-atw&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Jul&nbsp;27,&nbsp;2009&nbsp;at&nbsp;6:39&nbsp;PM,&nbsp;Maciej&nbsp;Stachowiak&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:mjs@apple.com&quot;&gt;mjs@apple.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;Jul&nbsp;27,&nbsp;2009,&nbsp;at&nbsp;7:13&nbsp;PM,&nbsp;Aryeh&nbsp;Gregor&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&#39;m&nbsp;not&nbsp;clear&nbsp;how&nbsp;the&nbsp;UI&nbsp;requirements&nbsp;here&nbsp;are&nbsp;different&nbsp;from&lt;br&gt;<br>
persistent&nbsp;workers,&nbsp;though.&nbsp; Those&nbsp;also&nbsp;persist&nbsp;after&nbsp;the&nbsp;user&lt;br&gt;<br>
navigates&nbsp;away,&nbsp;right?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Persistent&nbsp;workers&nbsp;are&nbsp;even&nbsp;more&nbsp;of&nbsp;a&nbsp;security&nbsp;risk,&nbsp;since&nbsp;they&nbsp;are&nbsp;supposed&nbsp;to&nbsp;persist&nbsp;even&nbsp;after&nbsp;the&nbsp;browser&nbsp;has&nbsp;been&nbsp;restarted,&nbsp;or&nbsp;after&nbsp;the&nbsp;system&nbsp;has&nbsp;been&nbsp;rebooted.&nbsp;Persistent&nbsp;workers&nbsp;should&nbsp;be&nbsp;renamed&nbsp;to&nbsp;&quot;BotNet&nbsp;Construction&nbsp;Kit&quot;.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
Maciej&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
