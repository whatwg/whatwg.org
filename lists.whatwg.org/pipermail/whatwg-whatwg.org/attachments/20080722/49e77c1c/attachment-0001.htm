<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Tue,&nbsp;Jul&nbsp;22,&nbsp;2008&nbsp;at&nbsp;3:22&nbsp;PM,&nbsp;Frode&nbsp;Børli&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:frode@seria.no&quot;&nbsp;target=&quot;_blank&quot;&gt;frode@seria.no&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
The&nbsp;server&nbsp;must&nbsp;escape&nbsp;all&nbsp;user&nbsp;generated&nbsp;content&nbsp;by&nbsp;replacing&nbsp;&lt;&nbsp;with&lt;br&gt;<br>
&amp;lt;&nbsp;etc.&nbsp;This&nbsp;is&nbsp;perfectly&nbsp;secure&nbsp;for&nbsp;all&nbsp;existing&nbsp;browsers.&nbsp;The&lt;br&gt;<br>
sandbox&nbsp;instructs&nbsp;the&nbsp;browser&nbsp;to&nbsp;unescape.&nbsp;Completely&nbsp;fail&nbsp;safe&nbsp;for&lt;br&gt;<br>
all.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;clarification.&nbsp;As&nbsp;mentioned&nbsp;previously&nbsp;by&nbsp;other&nbsp;poster,&nbsp;I&nbsp;think&nbsp;this&nbsp;could&nbsp;work&nbsp;iff&nbsp;UAs&nbsp;can&nbsp;be&nbsp;passed&nbsp;a&nbsp;set&nbsp;of&nbsp;safe&nbsp;tags,&nbsp;attributes,&nbsp;and&nbsp;whatnot&nbsp;(i.e.,&nbsp;a&nbsp;whitelist),&nbsp;defaulting&nbsp;to&nbsp;the&nbsp;empty&nbsp;set&nbsp;if&nbsp;no&nbsp;such&nbsp;set&nbsp;is&nbsp;specified.&nbsp;UAs&nbsp;can&nbsp;then&nbsp;unescape&nbsp;permitted&nbsp;elements,&nbsp;filter&nbsp;out&nbsp;disallowed&nbsp;attributes,&nbsp;and&nbsp;then&nbsp;handle&nbsp;the&nbsp;code&nbsp;as&nbsp;normal.&lt;br&gt;<br>
<br>
&lt;br&gt;Perhaps&nbsp;the&nbsp;whitelist&nbsp;could&nbsp;be&nbsp;specified&nbsp;in&nbsp;a&nbsp;format&nbsp;akin&nbsp;to&nbsp;CSS.&nbsp;For&nbsp;example:&lt;br&gt;&lt;span&nbsp;sandbox=1&nbsp;whitelist=&quot;elements:&nbsp;a,&nbsp;em;&nbsp;attributes:&nbsp;href,&nbsp;lang,&nbsp;rel;&nbsp;style-properties:&nbsp;color,&nbsp;font-weight&quot;&gt;&nbsp;...&nbsp;&lt;/span&gt;&lt;br&gt;<br>
For&nbsp;larger&nbsp;or&nbsp;often-used&nbsp;whitelists,&nbsp;a&nbsp;URL&nbsp;could&nbsp;be&nbsp;specified&nbsp;as&nbsp;in:&nbsp;&lt;span&nbsp;sandbox=1&nbsp;whitelist=&quot;&lt;a&nbsp;href=&quot;http://example.com/whitelist&quot;&gt;http://example.com/whitelist&lt;/a&gt;&quot;&gt;,&nbsp;which&nbsp;would&nbsp;permit&nbsp;the&nbsp;whitelist&nbsp;to&nbsp;be&nbsp;cached&nbsp;or&nbsp;used&nbsp;in&nbsp;multiple&nbsp;places&nbsp;in&nbsp;a&nbsp;document.&lt;br&gt;<br>
&lt;br&gt;One&nbsp;design&nbsp;flaw&nbsp;of&nbsp;this&nbsp;whitelist&nbsp;format&nbsp;that&nbsp;comes&nbsp;to&nbsp;mind&nbsp;is&nbsp;that&nbsp;all&nbsp;the&nbsp;specified&nbsp;attributes&nbsp;are&nbsp;allowed&nbsp;for&nbsp;all&nbsp;the&nbsp;specified&nbsp;elements.&nbsp;For&nbsp;example,&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;allow&nbsp;the&nbsp;&quot;lang&quot;&nbsp;attribute&nbsp;for&nbsp;only&nbsp;the&nbsp;&quot;a&quot;&nbsp;element&nbsp;but&nbsp;not&nbsp;an&nbsp;&quot;em&quot;&nbsp;element&nbsp;in&nbsp;the&nbsp;same&nbsp;sandbox;&nbsp;i.e.&nbsp;the&nbsp;whitelist&nbsp;&quot;elements:&nbsp;a,&nbsp;em;&nbsp;attributes:&nbsp;href,&nbsp;lang&quot;&nbsp;permits&nbsp;both&nbsp;&lt;a&nbsp;lang=&quot;en&quot;&gt;&nbsp;and&nbsp;&lt;em&nbsp;lang=&quot;en&quot;&gt;.&nbsp;On&nbsp;a&nbsp;side&nbsp;note,&nbsp;although&nbsp;the&nbsp;whitelist&nbsp;would&nbsp;permit&nbsp;&lt;em&nbsp;href=&quot;&quot;&gt;,&nbsp;it&nbsp;would&nbsp;be&nbsp;treated&nbsp;as&nbsp;invalid&nbsp;HTML&nbsp;of&nbsp;course.&lt;br&gt;<br>
&lt;br&gt;Comments?&lt;br&gt;&lt;br&gt;-&nbsp;James&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
