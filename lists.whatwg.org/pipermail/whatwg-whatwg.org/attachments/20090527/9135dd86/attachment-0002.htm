<tt>
Hi&nbsp;WHATWG!&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;question&nbsp;about&nbsp;URL&nbsp;origin&nbsp;check&nbsp;for&nbsp;Workers:&nbsp;the&nbsp;spec,&nbsp;in&nbsp;4.8.2,&nbsp;mandates&nbsp;a&nbsp;check&nbsp;for&nbsp;the&nbsp;Worker&nbsp;URL&nbsp;to&nbsp;be&nbsp;the&nbsp;&#39;same&nbsp;origin&#39;&nbsp;with&nbsp;the&nbsp;parent&nbsp;document&#39;s&nbsp;URL.&nbsp;At&nbsp;the&nbsp;same&nbsp;time,&nbsp;4.2&nbsp;says&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;worker&nbsp;is&nbsp;derived&nbsp;later&nbsp;from&nbsp;the&nbsp;URL&nbsp;represented&nbsp;by&nbsp;the&nbsp;&#39;location&#39;&nbsp;object&nbsp;of&nbsp;the&nbsp;worker&nbsp;context.&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;the&nbsp;spec&nbsp;doesn&#39;t&nbsp;say&nbsp;how&nbsp;redirects&nbsp;should&nbsp;be&nbsp;processed.&nbsp;If&nbsp;a&nbsp;browser&nbsp;gets&nbsp;30x&nbsp;redirect&nbsp;request,&nbsp;the&nbsp;final&nbsp;URL&nbsp;of&nbsp;a&nbsp;worker&nbsp;can&nbsp;be&nbsp;different&nbsp;from&nbsp;the&nbsp;original&nbsp;one&nbsp;which&nbsp;has&nbsp;passed&nbsp;the&nbsp;check&nbsp;before&nbsp;loading.&nbsp;Current&nbsp;spec&nbsp;ignores&nbsp;the&nbsp;fact&nbsp;that&nbsp;origin&nbsp;can&nbsp;be&nbsp;changed&nbsp;via&nbsp;redirect. If&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;loaded&nbsp;worker&nbsp;is&nbsp;based&nbsp;on&nbsp;the&nbsp;final&nbsp;(potentially&nbsp;redirected)&nbsp;URL&nbsp;that&nbsp;&#39;location&#39;&nbsp;object&nbsp;represents,&nbsp;then&nbsp;subsequent&nbsp;XHR&nbsp;requests,&nbsp;nested&nbsp;workers&nbsp;and&nbsp;importScripts()&nbsp;will&nbsp;work&nbsp;in&nbsp;the&nbsp;origin&nbsp;of&nbsp;that&nbsp;final&nbsp;URL.&nbsp;As&nbsp;specified,&nbsp;in&nbsp;case&nbsp;of&nbsp;redirect&nbsp;the&nbsp;page&nbsp;from&nbsp;&quot;&lt;a&nbsp;href=&quot;http://applicationInternals.com&quot;&gt;http://applicationInternals.com&lt;/a&gt;&quot;&nbsp;can&nbsp;use&nbsp;a&nbsp;worker&nbsp;from&nbsp;&quot;&lt;a&nbsp;href=&quot;http://application.com&quot;&gt;http://application.com&lt;/a&gt;&quot;&nbsp;(via&nbsp;redirect)&nbsp;to&nbsp;access&nbsp;APIs&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://application.com&quot;&gt;application.com&lt;/a&gt;&nbsp;that&nbsp;were&nbsp;not&nbsp;necessarily&nbsp;intended&nbsp;for&nbsp;such&nbsp;consumption.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Should&nbsp;the&nbsp;spec&nbsp;simply&nbsp;require&nbsp;the&nbsp;redirected,&nbsp;final&nbsp;URLs&nbsp;to&nbsp;be&nbsp;checked&nbsp;against&nbsp;parent&#39;s&nbsp;and&nbsp;reject&nbsp;the&nbsp;script&nbsp;if&nbsp;redirection&nbsp;results&nbsp;in&nbsp;a&nbsp;different&nbsp;origin?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;<br>
Dmitry&lt;/div&gt;&lt;div&gt; &lt;/div&gt;<br>

</tt>
