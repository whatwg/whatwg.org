<tt>
Along&nbsp;the&nbsp;same&nbsp;lines,&nbsp;I&#39;m&nbsp;wondering&nbsp;why&nbsp;we&nbsp;require&nbsp;a&nbsp;same-domain&nbsp;check&nbsp;for&nbsp;initial&nbsp;worker&nbsp;URLs,&nbsp;but&nbsp;not&nbsp;for&nbsp;script&nbsp;imported&nbsp;via&nbsp;importScripts().&nbsp;Seems&nbsp;like&nbsp;we&nbsp;ought&nbsp;to&nbsp;have&nbsp;workers&nbsp;inherit&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;script&nbsp;context&nbsp;that&nbsp;invoked&nbsp;the&nbsp;Worker&nbsp;constructor,&nbsp;but&nbsp;allow&nbsp;the&nbsp;script&nbsp;URL&nbsp;passed&nbsp;to&nbsp;the&nbsp;constructor&nbsp;to&nbsp;point&nbsp;at&nbsp;any&nbsp;domain.&lt;br&gt;<br>
&lt;br&gt;Is&nbsp;there&nbsp;a&nbsp;motivating&nbsp;security&nbsp;concern&nbsp;for&nbsp;this&nbsp;language&nbsp;from&nbsp;section&nbsp;4.8.2?:&lt;br&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;p&gt;If&nbsp;the&nbsp;&lt;span&gt;origin&lt;/span&gt;&nbsp;of&nbsp;the&nbsp;resulting&nbsp;&lt;span&gt;absolute<br>
&nbsp;&nbsp;&nbsp;URL&lt;/span&gt;&nbsp;is&nbsp;not&nbsp;the&nbsp;&lt;span&nbsp;title=&quot;same&nbsp;origin&quot;&gt;same&lt;/span&gt;&nbsp;as&nbsp;the<br>
&nbsp;&nbsp;&nbsp;origin&nbsp;of&nbsp;the&nbsp;script&nbsp;that&nbsp;invoked&nbsp;the&nbsp;constructor,&nbsp;then&nbsp;throw&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&lt;span&gt;security&nbsp;exception&lt;/span&gt;.<br>
<br>
&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;/blockquote&gt;It&nbsp;seems&nbsp;like&nbsp;it&nbsp;makes&nbsp;it&nbsp;harder&nbsp;for&nbsp;people&nbsp;to&nbsp;share&nbsp;script&nbsp;across&nbsp;domains&nbsp;without&nbsp;actually&nbsp;providing&nbsp;any&nbsp;security.&lt;br&gt;&lt;br&gt;-atw&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;May&nbsp;27,&nbsp;2009&nbsp;at&nbsp;5:13&nbsp;PM,&nbsp;Dmitry&nbsp;Titov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:dimich@chromium.org&quot;&gt;dimich@chromium.org&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Hi&nbsp;WHATWG!&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;question&nbsp;about&nbsp;URL&nbsp;origin&nbsp;check&nbsp;for&nbsp;Workers:&nbsp;the&nbsp;spec,&nbsp;in&nbsp;4.8.2,&nbsp;mandates&nbsp;a&nbsp;check&nbsp;for&nbsp;the&nbsp;Worker&nbsp;URL&nbsp;to&nbsp;be&nbsp;the&nbsp;&#39;same&nbsp;origin&#39;&nbsp;with&nbsp;the&nbsp;parent&nbsp;document&#39;s&nbsp;URL.&nbsp;At&nbsp;the&nbsp;same&nbsp;time,&nbsp;4.2&nbsp;says&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;worker&nbsp;is&nbsp;derived&nbsp;later&nbsp;from&nbsp;the&nbsp;URL&nbsp;represented&nbsp;by&nbsp;the&nbsp;&#39;location&#39;&nbsp;object&nbsp;of&nbsp;the&nbsp;worker&nbsp;context.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;the&nbsp;spec&nbsp;doesn&#39;t&nbsp;say&nbsp;how&nbsp;redirects&nbsp;should&nbsp;be&nbsp;processed.&nbsp;If&nbsp;a&nbsp;browser&nbsp;gets&nbsp;30x&nbsp;redirect&nbsp;request,&nbsp;the&nbsp;final&nbsp;URL&nbsp;of&nbsp;a&nbsp;worker&nbsp;can&nbsp;be&nbsp;different&nbsp;from&nbsp;the&nbsp;original&nbsp;one&nbsp;which&nbsp;has&nbsp;passed&nbsp;the&nbsp;check&nbsp;before&nbsp;loading.&nbsp;Current&nbsp;spec&nbsp;ignores&nbsp;the&nbsp;fact&nbsp;that&nbsp;origin&nbsp;can&nbsp;be&nbsp;changed&nbsp;via&nbsp;redirect. If&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;loaded&nbsp;worker&nbsp;is&nbsp;based&nbsp;on&nbsp;the&nbsp;final&nbsp;(potentially&nbsp;redirected)&nbsp;URL&nbsp;that&nbsp;&#39;location&#39;&nbsp;object&nbsp;represents,&nbsp;then&nbsp;subsequent&nbsp;XHR&nbsp;requests,&nbsp;nested&nbsp;workers&nbsp;and&nbsp;importScripts()&nbsp;will&nbsp;work&nbsp;in&nbsp;the&nbsp;origin&nbsp;of&nbsp;that&nbsp;final&nbsp;URL.&nbsp;As&nbsp;specified,&nbsp;in&nbsp;case&nbsp;of&nbsp;redirect&nbsp;the&nbsp;page&nbsp;from&nbsp;&quot;&lt;a&nbsp;href=&quot;http://applicationInternals.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://applicationInternals.com&lt;/a&gt;&quot;&nbsp;can&nbsp;use&nbsp;a&nbsp;worker&nbsp;from&nbsp;&quot;&lt;a&nbsp;href=&quot;http://application.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://application.com&lt;/a&gt;&quot;&nbsp;(via&nbsp;redirect)&nbsp;to&nbsp;access&nbsp;APIs&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://application.com&quot;&nbsp;target=&quot;_blank&quot;&gt;application.com&lt;/a&gt;&nbsp;that&nbsp;were&nbsp;not&nbsp;necessarily&nbsp;intended&nbsp;for&nbsp;such&nbsp;consumption.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Should&nbsp;the&nbsp;spec&nbsp;simply&nbsp;require&nbsp;the&nbsp;redirected,&nbsp;final&nbsp;URLs&nbsp;to&nbsp;be&nbsp;checked&nbsp;against&nbsp;parent&#39;s&nbsp;and&nbsp;reject&nbsp;the&nbsp;script&nbsp;if&nbsp;redirection&nbsp;results&nbsp;in&nbsp;a&nbsp;different&nbsp;origin?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;<br>
<br>
Dmitry&lt;/div&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;div&gt; &lt;/div&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
