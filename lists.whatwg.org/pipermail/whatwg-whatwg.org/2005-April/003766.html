<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Updating Location Bar for RPC Type Apps
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20Updating%20Location%20Bar%20for%20RPC%20Type%20Apps&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003768.html">
   <LINK REL="Next"  HREF="003770.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Updating Location Bar for RPC Type Apps</H1>
<!--htdig_noindex-->
    <B>Brad Neuberg</B> 
    <A HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20Updating%20Location%20Bar%20for%20RPC%20Type%20Apps&In-Reply-To="
       TITLE="[whatwg] Updating Location Bar for RPC Type Apps">bkn3 at columbia.edu
       </A><BR>
    <I>Fri Apr 22 10:25:55 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="003768.html">[whatwg] Re: Radio UserLand: Mail from Ian Hickson
</A></li>
        <LI>Next message: <A HREF="003770.html">[whatwg] Updating Location Bar for RPC Type Apps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3766">[ date ]</a>
              <a href="thread.html#3766">[ thread ]</a>
              <a href="subject.html#3766">[ subject ]</a>
              <a href="author.html#3766">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
Whenever I implement a DHTML (Ajax?) type app that needs to talk to the 
server without refreshing the client, such as through a hidden iframe or an 
XmlHttpRequest object, I always wish that I could update the window 
location bar to show a bookmarkable and copyable URL, but update it in such 
a way that it _doesn't_ refresh the browser or change it's location 
(window.location.href changes the location).

For example, lets say I am showing a page that has a table of elements on 
it, with a sorting pulldown that can change the sorting of the elements 
either by NAME or by a TAG sorting scheme.  Let's say the URL show in the 
location bar when the user first hits this page is the following:

<A HREF="http://www.rojo.com/manage-subscriptions">http://www.rojo.com/manage-subscriptions</A>

This page has a sorting pull down with two options, sort by NAME and sort 
by TAG.  When the user selects the TAG pulldown we shoot off a request 
through a hidden iframe, which travels to the server.  The server then 
generates new table content as HTML and sends it basic in the background, 
and the client simply does an innerHTML on a div in the center of the page 
with the new sorting type.

However, the URL in the location bar stays as 
&quot;<A HREF="http://www.rojo.com/manage-subscriptions&quot;,">http://www.rojo.com/manage-subscriptions&quot;,</A> when I would like it to update 
to &quot;<A HREF="http://www.rojo.com/manage-subscriptions?sortby=TAG&quot;,">http://www.rojo.com/manage-subscriptions?sortby=TAG&quot;,</A> so that a user 
can bookmark it, email it, or a programmer can see what the URL is in a 
clear way and can script it using HTTP (REST?).

Now we would have to be careful or this could lead to phishing attacks, 
where someone could update the URL arbitrarily.  We would have to enforce 
the same-host rule on the URL, the same rule that is applied to where an 
XmlHttpRequest object can communicate to (i.e. same host, same protocol, 
same port, etc.)

This also ties in with an earlier email I sent out about controlling the 
history/back-button as well.  In this case if the user hits the back button 
they actually _dont_ get anything we've sent through the iframe, when I 
want to plug these things into the history.  If we make it possible for 
programmers to control whether a remote URL sent through XmlHttpRequest is 
placed into the history or not I think we should think through the 
security, phishing, and general annoyance factors this could cause (imagine 
pushing hundreds of entries into the history, so that a user can't hit the 
back page to their original page to keep a user on the current page).

In fact, we should do a security, phishing, and annoyance scan (blink tag 
anyone?) over the WHAT-WG draft itself sometime, forming a threat model 
before so we know what potential attackers would actually be trying to 
do.  When we take this into account we should remember that sometimes email 
programs embed the browser into themselves, so that WHAT standards could be 
embedded into email messages, leading to various kinds of attacks and 
general wierdness.

Brad Neuberg




Brad Neuberg, <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bkn3 at columbia.edu</A>
Senior Software Engineer, Rojo Networks
Weblog: <A HREF="http://www.codinginparadise.org">http://www.codinginparadise.org</A>

=====================================================================

Check out Rojo, an RSS and Atom news aggregator that I work on.  Visit 
<A HREF="http://rojo.com">http://rojo.com</A> for more info. Feel free to ask me for an invite!

Rojo is Hiring!  If you're interested in RSS, Weblogs, Social Networking, 
Java, Open Source, etc... then come work with us at Rojo.  If you recommend 
someone and we hire them you'll get a free iPod!  See 
<A HREF="http://www.rojonetworks.com/JobsAtRojo.html.">http://www.rojonetworks.com/JobsAtRojo.html.</A> 

</PRE>


















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003768.html">[whatwg] Re: Radio UserLand: Mail from Ian Hickson
</A></li>
	<LI>Next message: <A HREF="003770.html">[whatwg] Updating Location Bar for RPC Type Apps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3766">[ date ]</a>
              <a href="thread.html#3766">[ thread ]</a>
              <a href="subject.html#3766">[ subject ]</a>
              <a href="author.html#3766">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg-whatwg.org
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
