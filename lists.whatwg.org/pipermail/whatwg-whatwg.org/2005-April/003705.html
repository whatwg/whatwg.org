<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Re: form charset
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Re%3A%20form%20charset&In-Reply-To=%3CPine.LNX.4.62.0504200756080.4030%40peter.oslo.opera.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003704.html">
   <LINK REL="Next"  HREF="003706.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Re: form charset</H1>
<!--htdig_noindex-->
    <B>Peter Karlsson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Re%3A%20form%20charset&In-Reply-To=%3CPine.LNX.4.62.0504200756080.4030%40peter.oslo.opera.com%3E"
       TITLE="[whatwg] Re: form charset">peter at opera.com
       </A><BR>
    <I>Wed Apr 20 00:01:19 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="003704.html">[whatwg] Re: form charset
</A></li>
        <LI>Next message: <A HREF="003706.html">[whatwg] Re: form charset
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3705">[ date ]</a>
              <a href="thread.html#3705">[ thread ]</a>
              <a href="subject.html#3705">[ subject ]</a>
              <a href="author.html#3705">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Olav Junker Kj&#230;r on 2005-04-20:

&gt;<i> However, is it really the right thing to allow arbitrary encodings of GET 
</I>&gt;<i> queries in the first place? The official Right Way to encode URLs is to 
</I>&gt;<i> use Utf8, and it seems strange to allow a different encoding after the 
</I>&gt;<i> question mark.
</I>
Strange as it may seem, that's the way it is currently done. HTML 4.01 says 
that the character encoding of any forms data should be the document character 
encoding, unless there is an accept-charset attribute on the form stating 
otherwise. This means that you do need to handle the part of the URL after 
the first question mark differently from the the part before it (but then 
again, you also do need to handle the domain name different from the path 
component, so this segmentation isn't that unexpected).

This is usually not a problem until you find something like this embedded in 
a search page (where &quot;{chinese}&quot; is the Chinese search text you just entered 
in the search field):

   &lt;a href=&quot;/search?q={chinese}&quot;&gt;Next &amp;gt;&lt;/a&gt;

And yes, this very much does exist in the wild.

&gt;<i> Of course we cannot just mandate utf8 always, since there is the issue of 
</I>&gt;<i> backwards compatibility. If I'm not mistaken, browsers usually urlencode 
</I>&gt;<i> forms using the same charset as the page.
</I>
Correct.

&gt;<i> However, the only legal value in accept-charset should be utf8 when the 
</I>&gt;<i> method is GET.
</I>
UTF-8 and US-ASCII, probably.

-- 
\\//
Peter, software engineer, Opera Software

  The opinions expressed are my own, and not those of my employer.
  Please reply only by follow-ups on the mailing list.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003704.html">[whatwg] Re: form charset
</A></li>
	<LI>Next message: <A HREF="003706.html">[whatwg] Re: form charset
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3705">[ date ]</a>
              <a href="thread.html#3705">[ thread ]</a>
              <a href="subject.html#3705">[ subject ]</a>
              <a href="author.html#3705">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
