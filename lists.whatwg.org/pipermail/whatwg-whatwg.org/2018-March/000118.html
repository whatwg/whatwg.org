<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Popular Background Geolocation question on StackOverflow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Popular%20Background%20Geolocation%20question%20on%0A%20StackOverflow&In-Reply-To=%3C67b60ece-59ba-e486-b163-5a85ac743d61%40skuldwyrm.no%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000117.html">
   <LINK REL="Next"  HREF="000121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Popular Background Geolocation question on StackOverflow</H1>
<!--htdig_noindex-->
    <B>Roger H&#229;gensen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Popular%20Background%20Geolocation%20question%20on%0A%20StackOverflow&In-Reply-To=%3C67b60ece-59ba-e486-b163-5a85ac743d61%40skuldwyrm.no%3E"
       TITLE="[whatwg] Popular Background Geolocation question on StackOverflow">rh_whatwg at skuldwyrm.no
       </A><BR>
    <I>Sat Mar 24 14:12:26 PDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000117.html">[whatwg] Popular Background Geolocation question on StackOverflow
</A></li>
        <LI>Next message (by thread): <A HREF="000121.html">[whatwg] Popular Background Geolocation question on StackOverflow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#118">[ date ]</a>
              <a href="thread.html#118">[ thread ]</a>
              <a href="subject.html#118">[ subject ]</a>
              <a href="author.html#118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 2018-03-24 21:15, Philipp Serafin wrote:
&gt;<i> If this problem is specific to the &quot;track a route&quot; use-case, and the
</I>&gt;<i> use-case is sufficiently widespread, would a dedicated &quot;route recording&quot;
</I>&gt;<i> API make sense?
</I>&gt;<i> 
</I>&gt;<i> E.g., a web page could ask the browser to continously record location
</I>&gt;<i> changes and - at some time at the browser's discretion - push a list of
</I>&gt;<i> recorded changes to the page.
</I>
Hmm! It might.
certainly it makes sense to cache location coords since the device may 
not have a internet connection during the entire time.

In practice it would only need a internet connection at the time of data 
submission to the site of the webapp, the rest of the time it could be 
&quot;offline&quot;.

&gt;<i> This would allow the browser to record locations changes with reasonably
</I>&gt;<i> accuracy *without* waking up service workers.
</I>
THis part I'm unsure of. Should it be a webapp or a client feature with 
a API for webapps?

&gt;<i> It would also provide some hooks for privacy controls: A browser could show
</I>&gt;<i> a status indicator whenever it's in &quot;GPS recording&quot; mode. It could also
</I>&gt;<i> notify the user when it's about to push the recorded route to the page and
</I>&gt;<i> possibly even show the route for confirmation.
</I>
I certainly see the charm and practicality in a webapp asking the client 
(browser) to start logging GPS coords (it must be user initiated at some 
point though, like a button/link click).
And then the same when stopping it.

A _start function and a _stop function and a _get function would be all 
that is needed.

The _stop function should be self explanatory. The _start function would 
allow a argument of milliseconds (or is seconds enough granularity?), 
which specifies the interval the client should use to record the current 
GPS and other info.

The _get function of such a API would just return a JSON array of GPS 
objects, with cords, height and timestamp of the reading, with future 
expandability for including stats like pressure and moisture and 
temperature (can't think of anything else).
For a cyclist/runner/driver/boater the coords might be useful (to get 
distance and route traveled). For a camper or woodsman or farmer or who 
knows what else the moisture and temperature and pressure and elevation 
may be valuable (the GPS coords would be almost identical for each 
reading though).

I'm not sure if this would fit under a geolocation API though, perhaps 
more under a environmental API (where GPS/elevation is just one of many 
data).

Since the user explicitly (or implicitly) press start there is no need 
to ask permission.
But there should be a possibility to ask for site permisssion and have 
the webapp autostart, this would allow to run the wwebapp in a browser 
24/7 and have it send &quot;live&quot; data to a server. This could make a 
smartphone a temporary weather station (a smartphone could have a 
external &quot;weather sensor box&quot; connected for example, providing the 
sensor input for this API, the browser would just see it as OS provided 
sensor data).

Sure a Raspberry Pi or some other IOT with some scripting can do this 
better, but just plopping a smart device to a large battery pack or 
mains power and leaving it over the night sending live data to a server 
could be useful. Hundreds if not thousands of these round the world 
could supplement weather research/sites with that data.


I'd suggest this as a way to detect if such a API is available
if (&quot;environment&quot; in navigator) {
   /* environment API is available */
} else {
   /* environment API IS NOT available */
}
It would really need to be it's own thing instead of adding to the 
geolocation, there should be no issues with both coexisting.


-- 
Unless specified otherwise, anything I write publicly is considered 
Public Domain (CC0). My opinions are my own unless specified otherwise.
Roger H&#229;gensen,
Freelancer, Norway.
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000117.html">[whatwg] Popular Background Geolocation question on StackOverflow
</A></li>
	<LI>Next message (by thread): <A HREF="000121.html">[whatwg] Popular Background Geolocation question on StackOverflow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#118">[ date ]</a>
              <a href="thread.html#118">[ thread ]</a>
              <a href="subject.html#118">[ subject ]</a>
              <a href="author.html#118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
