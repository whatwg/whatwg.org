<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Ongoing work on an editing commands (execCommand())	specification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Ongoing%20work%20on%20an%20editing%20commands%20%28execCommand%28%29%29%0A%09specification&In-Reply-To=%3CAANLkTi%3D%3Du8d2%2BxK%3DQoOV7dZDtD%2BxLHGDk3F_5UocORvD%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073203.html">
   <LINK REL="Next"  HREF="073207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Ongoing work on an editing commands (execCommand())	specification</H1>
<!--htdig_noindex-->
    <B>Tim Down</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Ongoing%20work%20on%20an%20editing%20commands%20%28execCommand%28%29%29%0A%09specification&In-Reply-To=%3CAANLkTi%3D%3Du8d2%2BxK%3DQoOV7dZDtD%2BxLHGDk3F_5UocORvD%40mail.gmail.com%3E"
       TITLE="[whatwg] Ongoing work on an editing commands (execCommand())	specification">timdown at gmail.com
       </A><BR>
    <I>Thu Mar 17 15:45:52 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="073203.html">[whatwg] Ongoing work on an editing commands (execCommand())	specification
</A></li>
        <LI>Next message: <A HREF="073207.html">[whatwg] Ongoing work on an editing commands (execCommand())	specification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73204">[ date ]</a>
              <a href="thread.html#73204">[ thread ]</a>
              <a href="subject.html#73204">[ subject ]</a>
              <a href="author.html#73204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Is a column full of

&quot;Exception: [Exception... &quot;Not enough arguments&quot; nsresult: &quot;0x80570001
(NS_ERROR_XPC_NOT_ENOUGH_ARGS)&quot; location: &quot;JS frame ::
<A HREF="http://aryeh.name/spec/editcommands/implementation.js">http://aryeh.name/spec/editcommands/implementation.js</A> :: getState ::
line 1046&quot; data: no]&quot;

the expected result in Firefox 3.6.15?

I'm interested in this stuff and am very grateful for your work. I've
been writing a document.execCommand() replacement for my Rangy library
(<A HREF="http://code.google.com/p/rangy/">http://code.google.com/p/rangy/</A>), so this is all extremely relevant
for me.

Tim

On 17 March 2011 22:31, Aryeh Gregor &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">Simetrical+w3c at gmail.com</A>&gt; wrote:
&gt;<i> I just rewrote the spec, and it's now both shorter and produces better
</I>&gt;<i> results. &#160;For a quick view of the results, as compared to the browser
</I>&gt;<i> you're currently using, you can look here:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://aryeh.name/spec/editcommands/autoimplementation.html">http://aryeh.name/spec/editcommands/autoimplementation.html</A>
</I>&gt;<i>
</I>&gt;<i> That link isn't stable, and will change and possibly break as I edit
</I>&gt;<i> it, but it will probably work fine. &#160;Each table row gives the input
</I>&gt;<i> (with the selection marked by brackets), the output of the spec's
</I>&gt;<i> algorithm as implemented on top of the browser (which might not be
</I>&gt;<i> quite correct due to browser bugs), and the output of the browser's
</I>&gt;<i> native execCommand(), all for running the command &quot;bold&quot;. &#160;Everything
</I>&gt;<i> is given in both rendered and source form.
</I>&gt;<i>
</I>&gt;<i> I've looked over all the results of that table in both Chrome and
</I>&gt;<i> Firefox, and every nontrivial difference I've found between the spec
</I>&gt;<i> and browsers boils down to one of
</I>&gt;<i>
</I>&gt;<i> * The browser's results are visibly wrong (text is bold when it
</I>&gt;<i> shouldn't be or isn't when it should be)
</I>&gt;<i> * The browser's markup is more verbose
</I>&gt;<i> * The browser mangles the markup's semantics (like breaking apart an
</I>&gt;<i> element with an id, so that things that were previously contained in
</I>&gt;<i> that id no longer are)
</I>&gt;<i> * In one case, WebKit normalizes markup more aggressively than the
</I>&gt;<i> spec does, so it winds up being shorter and still correct, but only
</I>&gt;<i> because the spec ignored ancestors beyond what it had to modify; I'm
</I>&gt;<i> ambivalent about this one
</I>&gt;<i> * In one case, the spec adds &lt;b&gt; around a single space, while WebKit
</I>&gt;<i> doesn't; I'm inclined to say this is a WebKit bug (which also occurs
</I>&gt;<i> in my spec implementation as viewed in WebKit, but not Firefox, since
</I>&gt;<i> WebKit mangles ranges when you add them to a selection; I plan to
</I>&gt;<i> change my implementation to work around that)
</I>&gt;<i>
</I>&gt;<i> I hope this addresses many of Ryosuke's objections to my previous algorithm.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The stable link to the spec is (still) here:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://aryeh.name/gitweb.cgi?p=editcommands;a=blob_plain;f=editcommands.html;hb=HEAD">http://aryeh.name/gitweb.cgi?p=editcommands;a=blob_plain;f=editcommands.html;hb=HEAD</A>
</I>&gt;<i>
</I>&gt;<i> If you don't want to read the spec in detail, a high-level explanation
</I>&gt;<i> of my goals and of how the new styling algorithm works can be found in
</I>&gt;<i> the Introduction section, and in the long note at the beginning of
</I>&gt;<i> &quot;Styling a node&quot;:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://aryeh.name/gitweb.cgi?p=editcommands;a=blob_plain;f=editcommands.html;hb=HEAD#introduction">http://aryeh.name/gitweb.cgi?p=editcommands;a=blob_plain;f=editcommands.html;hb=HEAD#introduction</A>
</I>&gt;<i> <A HREF="http://aryeh.name/gitweb.cgi?p=editcommands;a=blob_plain;f=editcommands.html;hb=HEAD#styling-a-node">http://aryeh.name/gitweb.cgi?p=editcommands;a=blob_plain;f=editcommands.html;hb=HEAD#styling-a-node</A>
</I>&gt;<i>
</I>&gt;<i> The algorithm was only really designed to support bold so far,
</I>&gt;<i> although that means it should support italics fine too. &#160;Soon I'll
</I>&gt;<i> work on adding support for foreColor, and trickier things like
</I>&gt;<i> underline and hiliteColor, but the basic framework should work for
</I>&gt;<i> those too. &#160;I haven't started on entirely different sorts of commands
</I>&gt;<i> yet, like formatBlock or delete.
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073203.html">[whatwg] Ongoing work on an editing commands (execCommand())	specification
</A></li>
	<LI>Next message: <A HREF="073207.html">[whatwg] Ongoing work on an editing commands (execCommand())	specification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73204">[ date ]</a>
              <a href="thread.html#73204">[ thread ]</a>
              <a href="subject.html#73204">[ subject ]</a>
              <a href="author.html#73204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
