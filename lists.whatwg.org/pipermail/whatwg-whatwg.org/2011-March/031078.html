<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] DOM Range: redefining behavior under DOM mutation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20DOM%20Range%3A%20redefining%20behavior%20under%20DOM%20mutation&In-Reply-To=%3CAANLkTik0D54ugPG6XeGRBk0_Jn41e9pqs1aw7D738QPa%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031075.html">
   <LINK REL="Next"  HREF="031080.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] DOM Range: redefining behavior under DOM mutation</H1>
<!--htdig_noindex-->
    <B>Aryeh Gregor</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20DOM%20Range%3A%20redefining%20behavior%20under%20DOM%20mutation&In-Reply-To=%3CAANLkTik0D54ugPG6XeGRBk0_Jn41e9pqs1aw7D738QPa%40mail.gmail.com%3E"
       TITLE="[whatwg] DOM Range: redefining behavior under DOM mutation">Simetrical+w3c at gmail.com
       </A><BR>
    <I>Tue Mar 29 14:53:35 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="031075.html">[whatwg] DOM Range: redefining behavior under DOM mutation
</A></li>
        <LI>Next message: <A HREF="031080.html">[whatwg] DOM Range: redefining behavior under DOM mutation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31078">[ date ]</a>
              <a href="thread.html#31078">[ thread ]</a>
              <a href="subject.html#31078">[ subject ]</a>
              <a href="author.html#31078">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Mar 29, 2011 at 2:37 PM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:
&gt;<i> In theory, yes. &#160;In practice, you have to cover various edge cases (like
</I>&gt;<i> what happens if the result of the insertBefore call is that the node is
</I>&gt;<i> removed from the old location but NOT inserted at the new one); specifying
</I>&gt;<i> this properly could get pretty hairy.
</I>
I don't think it would be all that bad.  But it does dampen my enthusiasm a bit.

&gt;<i> That sums up the situation, yes....
</I>
So is anyone planning on actually trying to remove DOM mutation events, or not?

&gt;<i> That's actually a really hard question to answer, due to the command
</I>&gt;<i> dispatch setup used (which has tons of indirection). &#160;;) &#160;Which command are
</I>&gt;<i> you thinking here?
</I>
Just something simple like running execCommand(&quot;bold&quot;) when &quot;bar&quot; is
selected in fairly trivial markup like

  &lt;p&gt;&lt;b&gt;Foo&lt;/b&gt;bar&lt;/p&gt;

The result will be that &quot;bar&quot; is still selected but now wrapped in the
same &lt;b&gt; as &quot;Foo&quot;, which isn't the result you'd get using any sequence
of JavaScript-visible DOM method calls I can think of.

On Tue, Mar 29, 2011 at 2:43 PM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:
&gt;<i> Note that technically that behavior is a violation of DOM2 Range, but that's
</I>&gt;<i> what we're trying to replace, right?
</I>
DOM 2 Range doesn't specify this, as far as I can tell.  It speaks
only in terms of &quot;insertions&quot; and &quot;deletions&quot; without explaining how
those map to actual methods.  So you could argue that insertData()
corresponds to an insertion into the text node, deleteData() to
deletion, and so on, in which case browsers all follow the spec.  And
you could argue that setting the data attribute directly corresponds
to deleting all the characters following by inserting a bunch more, in
which case browsers also follow the spec.  Except that WebKit instead
treats it inserting and deleting nothing in the special case where the
new data is equal to the old, which is also arguably a valid
interpretation of the spec.  Except that WebKit only does this for
CharacterData and not ProcessingInstructions, which would have to be a
pretty contorted reading of the spec.

But yeah, that's what we're trying to replace.
</PRE>








<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031075.html">[whatwg] DOM Range: redefining behavior under DOM mutation
</A></li>
	<LI>Next message: <A HREF="031080.html">[whatwg] DOM Range: redefining behavior under DOM mutation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31078">[ date ]</a>
              <a href="thread.html#31078">[ thread ]</a>
              <a href="subject.html#31078">[ subject ]</a>
              <a href="author.html#31078">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
