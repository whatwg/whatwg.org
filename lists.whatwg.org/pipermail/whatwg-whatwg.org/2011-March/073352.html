<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSockets and redirects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSockets%20and%20redirects&In-Reply-To=%3CAANLkTikRXRZ2rBmBgbD5DA-96GO0%2BjgTEp%2BuX990WQoQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031070.html">
   <LINK REL="Next"  HREF="073357.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSockets and redirects</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSockets%20and%20redirects&In-Reply-To=%3CAANLkTikRXRZ2rBmBgbD5DA-96GO0%2BjgTEp%2BuX990WQoQ%40mail.gmail.com%3E"
       TITLE="[whatwg] WebSockets and redirects">jonas at sicking.cc
       </A><BR>
    <I>Tue Mar 29 15:12:04 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="031070.html">[whatwg] WebSockets and redirects
</A></li>
        <LI>Next message: <A HREF="073357.html">[whatwg] WebSockets and redirects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73352">[ date ]</a>
              <a href="thread.html#73352">[ thread ]</a>
              <a href="subject.html#73352">[ subject ]</a>
              <a href="author.html#73352">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Mar 29, 2011 at 10:34 AM, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:
&gt;<i> In this HyBi thread:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html">http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html</A>
</I>&gt;<i>
</I>&gt;<i> Folks are arguing that the WebSocket protocol should support HTTP
</I>&gt;<i> redirects during the handshake and that dealing with the security
</I>&gt;<i> consequences of redirects should be dealt with at the API layer.
</I>&gt;<i> If/when that occurs, we should update the API layer to deal with the
</I>&gt;<i> security consequences of the WebSocket protocol following HTTP
</I>&gt;<i> redirects, preferably by aborting any WebSocket connections that the
</I>&gt;<i> server attempts to redirect.
</I>
I absolutely agree that redirects are a big source of security
problems. If we are going to support them for websocket then I think
we need to learn from the mistakes of http as to not repeat the
problems that occurred there.

One solution could be to add a redirect API on the WebSocket
interface. By default we would not follow the redirect but instead
fire an event on the WebSocket object. The event would contain the URL
which the server wants to redirect to. Only if the page explicitly
signals that it wants to follow the redirect would we do so.

This signaling could be done by calling .preventDefault() on the
event, or by calling some .yesPleaseFollowRedirect() function on the
event. It could also be done by making the implementation close the
websocket object before firing the event, but allowing the page to
call .open on the object and pass in an arbitrary url, for example the
url which was received from the redirect event.

But I'm totally fine with punting on this for the future and just
disallowing redirects on an API level for now.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031070.html">[whatwg] WebSockets and redirects
</A></li>
	<LI>Next message: <A HREF="073357.html">[whatwg] WebSockets and redirects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73352">[ date ]</a>
              <a href="thread.html#73352">[ thread ]</a>
              <a href="subject.html#73352">[ subject ]</a>
              <a href="author.html#73352">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
