<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Multiple globals and direct/indirect eval
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Multiple%20globals%20and%20direct/indirect%20eval&In-Reply-To=%3CE9A87640-DDFB-4B87-BAF3-CC62866B8492%40wirfs-brock.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073072.html">
   <LINK REL="Next"  HREF="030811.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Multiple globals and direct/indirect eval</H1>
<!--htdig_noindex-->
    <B>Allen Wirfs-Brock</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Multiple%20globals%20and%20direct/indirect%20eval&In-Reply-To=%3CE9A87640-DDFB-4B87-BAF3-CC62866B8492%40wirfs-brock.com%3E"
       TITLE="[whatwg] Multiple globals and direct/indirect eval">allen at wirfs-brock.com
       </A><BR>
    <I>Fri Mar  4 09:57:21 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="073072.html">[whatwg] Multiple globals and direct/indirect eval
</A></li>
        <LI>Next message: <A HREF="030811.html">[whatwg] Should events be paused on detached iframes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73075">[ date ]</a>
              <a href="thread.html#73075">[ thread ]</a>
              <a href="subject.html#73075">[ subject ]</a>
              <a href="author.html#73075">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Mar 4, 2011, at 8:39 AM, Mark S. Miller wrote:

&gt;<i> I certainly agree that there needs to be a better interface boundary
</I>&gt;<i> between w3c/whatwg specs and ECMA specs. Too many issues -- like the
</I>&gt;<i> semantics of multiple globals -- fall in the gaps between the two
</I>&gt;<i> organizations. The WebIDL's JS binding and public-script-coord are good
</I>&gt;<i> places to work out these boundary issues. WebIDL, WebIDL's JS binding, and
</I>&gt;<i> ES-next should co-evolve so that the rest of the w3c/whatwg specs ideally
</I>&gt;<i> interface to JS only through WebIDL, and WebIDL's JS binding ideally depend=
</I>&gt;<i> s
</I>&gt;<i> only on standard elements of ES-next. Of course, there will always be a nee=
</I>&gt;<i> d
</I>&gt;<i> to accommodate some special cases that can't be specified that way, like th=
</I>&gt;<i> e
</I>&gt;<i> &quot;semantics&quot; of cross-origin heap sharing.
</I>&gt;<i> 
</I>&gt;<i> My main regret in saying this is that WebIDL, having evolved from Corba IDL=
</I>&gt;<i> ,
</I>&gt;<i> is notationally almost pessimal for encouraging good JS interface design. W=
</I>&gt;<i> e
</I>&gt;<i> have all been suffering the consequences of that. I fear that WebIDL, and
</I>&gt;<i> its entrenched place within the w3c/whatwg API design process, dooms us to =
</I>&gt;<i> a
</I>&gt;<i> continual flood of browser APIs hostile to JS programmers.
</I>
I also agree that there are issues here that need a common resolution.  However, it is less clear to me that that WebIDL is the best (or only) place it needs to be addressed.  WebIDL defines how abstract interface definitions map to the  concrete features of various languages.  However, there are places in web specifications where specific semantic actions (not interfaces) must be described in a manner that that transcend all languages.  These are  not &quot;language binding&quot; issues, but rather concerns that relate to the semantics that must be commonly support by any language that executes in the web application environment. 

Essentially, there is a language independent web apps scripting environment.  More concretely, you might think of this as the common shared browser heap.  This environment should be specified in or as one of the core browser/web app specifications.  If that is done, then &quot;language bindings&quot; can be specified the context of that specification. Some of characteristics of this scripting environment may include things like:

Web app objects encapsulate state that may include reference to other objects.
The state of  objects can be manipulated/access via put/get/call operations to  their methods and attributes.
There are multiple independent heaps.
Heaps have well defined lifetimes.
Each object exists within a specific heap and has unique identity with respect to its heap.
Objects within a common heap may directly reference and interact with each other, constrained only by their specific language semantics.
References between objects in different heaps must be intermediated via a mechanism with a specified semantics.
Multiple &quot;Script global objects&quot; may exist in a single heap.
etc.

The specification of this environment should sufficiently complete that all language independent scripting characteristics of the browser (for example cross-origin policies) to be specified strictly in terms of that specification and without references to any specific language binding.

Done well, this would give us a much cleaner separation between the &quot;web app&quot; platform and specific scripting language.  At that point, some of the issues of current concern then really do become &quot;language binding&quot; issues.  For example, how does  the concept of multiple &quot;Script global objects&quot; map onto the ECMAScript language.
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073072.html">[whatwg] Multiple globals and direct/indirect eval
</A></li>
	<LI>Next message: <A HREF="030811.html">[whatwg] Should events be paused on detached iframes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73075">[ date ]</a>
              <a href="thread.html#73075">[ thread ]</a>
              <a href="subject.html#73075">[ subject ]</a>
              <a href="author.html#73075">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
