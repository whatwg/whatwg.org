<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] file URL is overspecified
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20file%20URL%20is%20overspecified&In-Reply-To=%3C001601c7af3a%24f48884a0%241a01080a%40POCZTOWIEC%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="054079.html">
   <LINK REL="Next"  HREF="054091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] file URL is overspecified</H1>
<!--htdig_noindex-->
    <B>Kristof Zelechovski</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20file%20URL%20is%20overspecified&In-Reply-To=%3C001601c7af3a%24f48884a0%241a01080a%40POCZTOWIEC%3E"
       TITLE="[whatwg] file URL is overspecified">giecrilj at stegny.2a.pl
       </A><BR>
    <I>Fri Jun 15 03:50:14 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="054079.html">[whatwg] Probable typo in section 5.2.2.
</A></li>
        <LI>Next message: <A HREF="054091.html">[whatwg] file URL is overspecified
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54082">[ date ]</a>
              <a href="thread.html#54082">[ thread ]</a>
              <a href="subject.html#54082">[ subject ]</a>
              <a href="author.html#54082">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>The URI reference &lt;<A HREF="http://www.w3.org/TR/REC-html40/references.html">http://www.w3.org/TR/REC-html40/references.html</A>&gt;  in the
HTML 4 refers to RFC 2396 &lt;<A HREF="http://www.ietf.org/rfc/rfc2396.txt">http://www.ietf.org/rfc/rfc2396.txt</A>&gt;  which is
obsolete by RFC 3986 &lt;<A HREF="http://www.ietf.org/rfc/rfc3986.txt">http://www.ietf.org/rfc/rfc3986.txt</A>&gt; .  The latter
document has a new section 2.5: &quot;Identifying Data&quot;, containing the following
new material:

URI characters provide identifying data for each of the URI components,
serving as an external interface for identification between systems.
Although the presence and nature of the URI production interface is hidden
from clients that use its URIs (and is thus beyond the scope of the
interoperability requirements defined by this specification), it is a
frequent source of confusion and errors in the interpretation of URI
character issues.  Implementers have to be aware that there are multiple
character encodings involved in the production and transmission of URIs:
local name and data encoding, public interface encoding, URI character
encoding, data format encoding, and protocol encoding.

Local names, such as file system names, are stored with a local character
encoding.  URI producing applications (e.g., origin servers) will typically
use the local encoding as the basis for producing meaningful names.  The URI
producer will transform the local encoding to one that is suitable for a
public interface and then transform the public interface encoding into the
restricted set of URI characters (reserved, unreserved, and
percent-encodings). Those characters are, in turn, encoded as octets to be
used as a reference within a data format (e.g., a document charset), and
such data formats are often subsequently encoded for transmission over
Internet protocols.

The new statements above are slightly incompatible with what HTML
&lt;<A HREF="http://www.w3.org/TR/REC-html40/appendix/notes.html#h-B.2.1">http://www.w3.org/TR/REC-html40/appendix/notes.html#h-B.2.1</A>&gt;  URI encoding
specification says: 

URIs do not contain non-ASCII values 

That statement is true for what the RFC calls &quot;public interface encoding&quot;:
it seems reasonable that the user agent should use an URL when it requests
an external resource; however, requiring that HTML documents should use a
public URI for resources that the user agent is expected to serve without
communicating with an external server, such as local files identified using
then file scheme, seems an excessive complication to me.  Internet Explorer
does &lt;<A HREF="http://blogs.msdn.com/ie/atom.xml">http://blogs.msdn.com/ie/atom.xml</A>&gt;  not respect this prohibition
because it uses IRIs, not URIs, internally, and converts them to URLs if
needed when it communicates with an external server.  If an external URL is
specified in the source document as percent-encoded, it is passed without
altering because encoding is not needed and the server is responsible for
decoding; however, there is no server to decode a local URL and it remains
unresolved.  That is not compliant with the current standard, but I think in
this case the implementation is right and the standard needs some freedom
with respect to local URLs.

Of course, one could always do away with an argument that an HTML document
containing reference to a local resource cannot be published and can be
authored as noncompliant.  However, this is only partially true.  The reason
is that the prohibition of B.2.1 propagated to the XSLT specification that
refers to it explicitly where it specifies how URI attributes should be
transformed in html mode
&lt;<A HREF="http://www.w3.org/TR/xslt#section-HTML-Output-Method">http://www.w3.org/TR/xslt#section-HTML-Output-Method</A>&gt; .  In effect, a
document produced by a conforming XSLT processor for local usage is
perfectly valid and perfectly useless: hyperlinks are broken and images do
not show up.

*        My suggestion: The constraints for URLs denoting local resources
should be relaxed.

I understand that this is fixed by HTML
&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/section-documen">http://www.whatwg.org/specs/web-apps/current-work/multipage/section-documen</A>
t.html&gt;  5, so this is perhaps the good news:

The href content attribute, if specified, must contain a URI (or IRI).

Best regards,

Christopher Yeleighton

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20070615/d465cef2/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20070615/d465cef2/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="054079.html">[whatwg] Probable typo in section 5.2.2.
</A></li>
	<LI>Next message: <A HREF="054091.html">[whatwg] file URL is overspecified
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54082">[ date ]</a>
              <a href="thread.html#54082">[ thread ]</a>
              <a href="subject.html#54082">[ subject ]</a>
              <a href="author.html#54082">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
