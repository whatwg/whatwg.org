<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] html5 parsing/tokenizing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20html5%20parsing/tokenizing&In-Reply-To=%3C8ad71be30706191620t43a6ab88v51037e1bf6c49f6%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011889.html">
   <LINK REL="Next"  HREF="011898.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] html5 parsing/tokenizing</H1>
<!--htdig_noindex-->
    <B>Benjamin West</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20html5%20parsing/tokenizing&In-Reply-To=%3C8ad71be30706191620t43a6ab88v51037e1bf6c49f6%40mail.gmail.com%3E"
       TITLE="[whatwg] html5 parsing/tokenizing">bewest at gmail.com
       </A><BR>
    <I>Tue Jun 19 16:20:11 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="011889.html">[whatwg] Incorrect character codes
</A></li>
        <LI>Next message: <A HREF="011898.html">[whatwg] html5 parsing/tokenizing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11890">[ date ]</a>
              <a href="thread.html#11890">[ thread ]</a>
              <a href="subject.html#11890">[ subject ]</a>
              <a href="author.html#11890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I have a friend who has implemented a fast tokenizer in C.  I asked
him to send me any feedback he might have, and so what follows are his
words.  This is from about a month ago, so I apologize if any of this
is old ground.

-Ben

-------------
When the tokenization state machine is defined, every state first
&quot;consumes&quot; and then potentially &quot;emits&quot;. Some of the states transfer to
another state with an order to &quot;re-consume the character in the next
state&quot;. This means that what you do in the new state is dependant on
what you did in the last state and that the &quot;comsume&quot; is necessarily an
inconsistent operation. A much better wording would be &quot;look at the next
character&quot; and on state transition &quot;consume and emit&quot; or just &quot;emit
without consumption&quot; making it clear when the input cursor moves.



It would be nice if all &lt;!...&gt; tags (except comments) were considered
&quot;declarations&quot; instead of bogus comments. Then DOCTYPE wouldn't need
special handling by the tokenizer, just special handling by the parser.
(Too much of the parser seems to have gotten into the tokenizer; with
CDATA and RCDATA, this is a necessary evil. With &lt;!DOCTYPE ...&gt; it
isn't.)



Other than that, the definition is pretty solid and I've come to terms
with the xml-interoperability issues I formerly expressed. I've added a
switch to my parser that tells it whether or not to honor RCDATA
sections and I've purposed never to feed it CDATA. (I know it's not
supposed to be an xml parser.) ~D

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011889.html">[whatwg] Incorrect character codes
</A></li>
	<LI>Next message: <A HREF="011898.html">[whatwg] html5 parsing/tokenizing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11890">[ date ]</a>
              <a href="thread.html#11890">[ thread ]</a>
              <a href="subject.html#11890">[ subject ]</a>
              <a href="author.html#11890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
