<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Google Gears and HTML5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Google%20Gears%20and%20HTML5&In-Reply-To=%3C11e306600706120249wcee8bd3p6c8ac03e8cc6b3b9%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="054017.html">
   <LINK REL="Next"  HREF="053864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Google Gears and HTML5</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Google%20Gears%20and%20HTML5&In-Reply-To=%3C11e306600706120249wcee8bd3p6c8ac03e8cc6b3b9%40mail.gmail.com%3E"
       TITLE="[whatwg] Google Gears and HTML5">robert at ocallahan.org
       </A><BR>
    <I>Tue Jun 12 02:49:39 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="054017.html">[whatwg] Google Gears and HTML5
</A></li>
        <LI>Next message: <A HREF="053864.html">[whatwg] Charset meta sniffing and supported encodings that are not	rough ASCII supersets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54018">[ date ]</a>
              <a href="thread.html#54018">[ thread ]</a>
              <a href="subject.html#54018">[ subject ]</a>
              <a href="author.html#54018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 6/12/07, Aaron Boodman (Google) &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gears.team.aa at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> On 6/11/07, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt; wrote:
</I>&gt;<i> &gt; Chris Prince wrote:
</I>&gt;<i> &gt; How do you do that when an ambiguity is discovered during a manifest
</I>&gt;<i> update?
</I>&gt;<i>
</I>&gt;<i> That's a good point, i think all we could do there is throw into the
</I>&gt;<i> environment, which isn't particularly useful, but would at least
</I>&gt;<i> prevent the ambiguity.
</I>

What do you mean &quot;throw into the environment&quot;? The update might occur
automatically in which case I'm not sure where an exception would go. And it
seems that preventing the update might lead to the app being unrecoverably
&quot;stuck&quot;.

* Rename/copy were motivated by a particular problem we had with an
&gt;<i> internal app that we were playing with. When you would capture files
</I>&gt;<i> using the file upload api while offline, you would need to rename them
</I>&gt;<i> after you found out the primary key of the entity on the server
</I>&gt;<i> because the application would build the URIs based on these PKs. This
</I>&gt;<i> probably could have been solved other ways on the server.
</I>

I think the best way to handle file uploads (in an HTML5 context) is to
provide an API that any Web app can use to directly read the contents of a
file input control. That seems conceptually simple and also potentially
useful to all kinds of Web apps, online and offline.

I agree that having overlapping URLs is a pain with the current
&gt;<i> design. It would be nice if URLs were unique. What we found is that in
</I>&gt;<i> many applications, URLs aren't unique. Localization is one example of
</I>&gt;<i> this, but there are many. I think it may not be necessary to have both
</I>&gt;<i> enable/disable *and* requiredCookie, but we probably need something.
</I>&gt;<i> requiredCookie just removes some of the legwork of toggling a bunch of
</I>&gt;<i> stores on and off on each login.
</I>

What are the other uses? Are they all situations where the content for a
given URI is stable within a given &quot;logon session&quot;? (As you would expect if
cookies are sufficient to discriminate between the different contents...)

I think restricting URIs to map to just one resource simplifies things a
lot. Another simplification that our model has is that offline resources are
never directly mutated by the client; they are always just a snapshot of
server state. These two properties are very appealing... We can also safely
support cross-domain offline loads (e.g. to get canonical library scripts,
or looking forward to WHATWG-style messaging APIs, cross-domain
communication) which I think is hard to do without the latter property.

I think we can extend our model to support Gears-style consistency without
JARs by adding support for manifests somehow (e.g. &lt;link
rel=&quot;offline-manifest&quot;&gt;), and then requiring that all offline resources in a
domain (that are used by apps in the same domain*) be updated atomically
roughly the same way Gears does it. But I need to talk to Dave about it...
(* Applications using cross-domain loads don't get any consistency
guarantees for those loads. For example we don't want someone randomly
referencing a missing file under example.com and breaking updates of
example.com's own applications.)

Rob
-- 
&quot;Two men owed money to a certain moneylender. One owed him five hundred
denarii, and the other fifty. Neither of them had the money to pay him back,
so he canceled the debts of both. Now which of them will love him more?&quot;
Simon replied, &quot;I suppose the one who had the bigger debt canceled.&quot; &quot;You
have judged correctly,&quot; Jesus said. [Luke 7:41-43]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20070612/ebbc7163/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20070612/ebbc7163/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="054017.html">[whatwg] Google Gears and HTML5
</A></li>
	<LI>Next message: <A HREF="053864.html">[whatwg] Charset meta sniffing and supported encodings that are not	rough ASCII supersets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54018">[ date ]</a>
              <a href="thread.html#54018">[ thread ]</a>
              <a href="subject.html#54018">[ subject ]</a>
              <a href="author.html#54018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
