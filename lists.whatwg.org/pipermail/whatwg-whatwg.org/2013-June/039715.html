<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Add EXIF metadata support in Canvas.toBlob?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Add%20EXIF%20metadata%20support%20in%20Canvas.toBlob%3F&In-Reply-To=%3C51B245B0.5020604%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081984.html">
   <LINK REL="Next"  HREF="081990.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Add EXIF metadata support in Canvas.toBlob?</H1>
<!--htdig_noindex-->
    <B>David Flanagan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Add%20EXIF%20metadata%20support%20in%20Canvas.toBlob%3F&In-Reply-To=%3C51B245B0.5020604%40mozilla.com%3E"
       TITLE="[whatwg] Add EXIF metadata support in Canvas.toBlob?">dflanagan at mozilla.com
       </A><BR>
    <I>Fri Jun  7 13:42:24 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081984.html">[whatwg] inputmode feedback
</A></li>
        <LI>Next message: <A HREF="081990.html">[whatwg] Add EXIF metadata support in Canvas.toBlob?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39715">[ date ]</a>
              <a href="thread.html#39715">[ thread ]</a>
              <a href="subject.html#39715">[ subject ]</a>
              <a href="author.html#39715">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>If the second argument to Canvas.toBlob() and Canvas.toBlobHD() is 
&quot;image/jpeg&quot;, then these methods support a third argument to specify 
JPEG compression level.

The spec 
(<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#a-serialization-of-the-bitmap-as-a-file">http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#a-serialization-of-the-bitmap-as-a-file</A>) 
says:
&gt;<i> A future version of this specification will probably define other 
</I>&gt;<i> parameters to be passed to these methods to allow authors to more 
</I>&gt;<i> carefully control compression settings, image metadata, etc.
</I>I would like to propose the addition of a fourth argument (for the JPEG 
case only) that would specify EXIF metadata to be included in the JPEG 
blob.  (I have not tried yet, but I'm assuming that we could define some 
suitable JSON serialization format for EXIF data. If not, then even 
allowing a binary blob of EXIF data as the fourth argument would be 
helpful.)

The use case for this feature is image editing applications, like the 
Gallery app on FirefoxOS devices. Whenever that app crops or edits a 
photo it encodes the edited photo with Canvas.toBlob(), and the process 
strips all metadata from the photo.  Reading EXIF data from a JPEG blob 
is relatively straightforward can can be done with JavaScript, but 
inserting EXIF data into an existing blob is much harder: this is a task 
that is best done when the JPEG blob is being created, which means that 
it is a feature that belongs in toBlob and can not be done efficiently 
with an external library.

[A related, but perhaps too ambitious, proposal is to allow direct 
read/write access to EXIF metadata via HTMLImageElement.  The primary 
use case for read access is to enable web apps to trivially determine 
when, where, and how a photo was taken and also to determine authorship 
and copyright information for an image.  The primary use case for write 
access might be for selectively stripping metadata. It would be nice to 
be able to protect user privacy with code as simple as |delete 
image.metadata.geolocation| for example.]

     David Flanagan
</PRE>




















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081984.html">[whatwg] inputmode feedback
</A></li>
	<LI>Next message: <A HREF="081990.html">[whatwg] Add EXIF metadata support in Canvas.toBlob?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39715">[ date ]</a>
              <a href="thread.html#39715">[ thread ]</a>
              <a href="subject.html#39715">[ subject ]</a>
              <a href="author.html#39715">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
