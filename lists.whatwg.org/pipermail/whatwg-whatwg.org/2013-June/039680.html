<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [mimesniff] Review request: Parsing a MIME type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bmimesniff%5D%20Review%20request%3A%20Parsing%20a%20MIME%20type&In-Reply-To=%3CCAH4e3M6oL5WY35-u5um0cLO-r-aNFcJnjoaCba4f-_4yu6QojA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="081954.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [mimesniff] Review request: Parsing a MIME type</H1>
<!--htdig_noindex-->
    <B>Gordon P. Hemsley</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bmimesniff%5D%20Review%20request%3A%20Parsing%20a%20MIME%20type&In-Reply-To=%3CCAH4e3M6oL5WY35-u5um0cLO-r-aNFcJnjoaCba4f-_4yu6QojA%40mail.gmail.com%3E"
       TITLE="[whatwg] [mimesniff] Review request: Parsing a MIME type">gphemsley at gmail.com
       </A><BR>
    <I>Sat Jun  1 08:41:34 PDT 2013</I>
    <P><UL>
        
        <LI>Next message: <A HREF="081954.html">[whatwg] [mimesniff] Review request: Parsing a MIME type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39680">[ date ]</a>
              <a href="thread.html#39680">[ thread ]</a>
              <a href="subject.html#39680">[ subject ]</a>
              <a href="author.html#39680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, May 31, 2013 at 11:50 PM, Peter Occil &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">poccil14 at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;&gt;<i> * Another important point to notice is the fact that this algorithm
</I>&gt;&gt;<i> allows parameter names to appear without values. This is useful in
</I>&gt;&gt;<i> situations such as the &quot;base64&quot; option in data: URLs that use the mere
</I>&gt;&gt;<i> presence or absence of a parameter to set its boolean value.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Since you mention data URLs I should note that data URLs can be percent
</I>&gt;<i> encoded, which HTTP
</I>&gt;<i> and MIME headers can't be. This raises additional considerations when
</I>&gt;<i> parsing a data URL's MIME type correctly;
</I>&gt;<i> see reference [1] for test cases.  In particular:
</I>&gt;<i>
</I>&gt;<i> [1]: <A HREF="http://greenbytes.de/tech/tc/datauri/">http://greenbytes.de/tech/tc/datauri/</A>
</I>
This is a very useful resource; thank you for pointing it out to me.

Realize now that that's the only thing that matters: What do the browsers do?

(And percent encoding doesn't matter, as that gets handled before the
parsing begins.)

&gt;<i> * A data URL that begins with &quot;data:,&quot; or &quot;data:;base64,&quot; (with no MIME
</I>&gt;<i> type) is assumed to have the MIME type
</I>&gt;<i>  &quot;text/plain;charset=us-ascii&quot; under RFC2397.
</I>&gt;<i> * A data URL that begins with  &quot;data:;&quot; (with no type or subtype, but with
</I>&gt;<i> parameters) is assumed to have the MIME type
</I>&gt;<i>  &quot;text/plain&quot; under RFC2397.
</I>
An empty or invalide MIME type will get treated as unknown and will
eventually be sniffed (if it isn't already). I'll have to consider
what to do with the base64 and other parameters parts, though.

&gt;<i> * The word &quot;base64&quot; can only appear at the end of the MIME type, so that a
</I>&gt;<i> data URL like
</I>&gt;<i>   &quot;data:application/example;base64;foo=bar,AA==&quot; will not be encoded in
</I>&gt;<i> base64, strictly speaking. A parameter name (base64 or otherwise)
</I>&gt;<i>   cannot otherwise appear without a parameter value.
</I>
As I mentioned, &quot;strictly speaking&quot; doesn't matter, as all browsers do
the same thing, according to the resource you linked: base64
parameters with values are fine; base64 boolean parameters in other
than last place are warnings. (Not sure what the reasoning behind that
distinction is, but that's what reality is.)

So it seems the only issue I have to worry about is what to do with
MIME types which only have parameters.

Regards,
Gordon

--
Gordon P. Hemsley
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">me at gphemsley.org</A>
<A HREF="http://gphemsley.org/">http://gphemsley.org/</A> &#8226; <A HREF="http://gphemsley.org/blog/">http://gphemsley.org/blog/</A>
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="081954.html">[whatwg] [mimesniff] Review request: Parsing a MIME type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39680">[ date ]</a>
              <a href="thread.html#39680">[ thread ]</a>
              <a href="subject.html#39680">[ subject ]</a>
              <a href="author.html#39680">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
