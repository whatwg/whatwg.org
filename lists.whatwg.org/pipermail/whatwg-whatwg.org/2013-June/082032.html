<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Grouping in canvas 2d
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Grouping%20in%20canvas%202d&In-Reply-To=%3C38E59574-E895-4F8E-BB5B-3D8FDFF0B044%40scratchdisk.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082047.html">
   <LINK REL="Next"  HREF="082038.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Grouping in canvas 2d</H1>
<!--htdig_noindex-->
    <B>J&#252;rg Lehni</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Grouping%20in%20canvas%202d&In-Reply-To=%3C38E59574-E895-4F8E-BB5B-3D8FDFF0B044%40scratchdisk.com%3E"
       TITLE="[whatwg] Grouping in canvas 2d">lists at scratchdisk.com
       </A><BR>
    <I>Mon Jun 17 14:40:26 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082047.html">[whatwg] Grouping in canvas 2d
</A></li>
        <LI>Next message: <A HREF="082038.html">[whatwg] Grouping in canvas 2d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82032">[ date ]</a>
              <a href="thread.html#82032">[ thread ]</a>
              <a href="subject.html#82032">[ subject ]</a>
              <a href="author.html#82032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I am very much interested in this feature. Of course you can use separate canvases to achieve the same, which is what we currently do in Paper.js, but it appears to be rather slow to do so. I think performance could improve a lot which this alternative API proposal.

J&#252;rg

On Jun 13, 2013, at 20:57 , Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt; wrote:

&gt;<i> Last year, I requested if grouping could be added to canvas.
</I>&gt;<i> The API would look like this:
</I>&gt;<i> 
</I>&gt;<i> void beginLayer();
</I>&gt;<i> void beginLayer(unsigned long x, unsigned long y, unsigned long w, unsigned
</I>&gt;<i> long h);
</I>&gt;<i> void endLayer();
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> When you call beginLayer, you inherit everything from the graphics state
</I>&gt;<i> except shadows, opacity and the current compositing mode. Those will reset
</I>&gt;<i> to their initial value.
</I>&gt;<i> At endLayer time, the graphics state will be restored and you will draw the
</I>&gt;<i> content of the group.
</I>&gt;<i> 
</I>&gt;<i> so for instance, if you want multiply blend with opacity of .5
</I>&gt;<i> 
</I>&gt;<i> ctx.globalAlpha = .5;
</I>&gt;<i> ctx.globalCompositeOperation = &quot;multiply&quot;;
</I>&gt;<i> ctx.beginLayer();
</I>&gt;<i> ... // drawing
</I>&gt;<i> ctx.endLayer();
</I>&gt;<i> 
</I>&gt;<i> This would cause everything between begin/endLayer to be drawn normally.
</I>&gt;<i> This result is then blended and composited at endLayer time.
</I>&gt;<i> 
</I>&gt;<i> Last year, people argued that you could achieve the same effect by using a
</I>&gt;<i> temporary canvas so this API is not really needed.
</I>&gt;<i> I would like to see if people are more open to this API now.
</I>&gt;<i> Reasons to have it:
</I>&gt;<i> - it is easily achievable with existing graphics libraries.
</I>&gt;<i> - it is a very common idiom. You can cut down on the amount of JS needed.
</I>&gt;<i> - if you want to avoid antialiasing issue, you need to carefully set the
</I>&gt;<i> CTM on the temporary canvas and remove the CTM from the current canvas
</I>&gt;<i> - creating a temporary canvas has a higher overhead than simply starting a
</I>&gt;<i> layer.
</I>&gt;<i> - creating lots of temporary canvas objects creates memory overhead
</I>&gt;<i> - is polyfillable for older canvas implementations
</I>&gt;<i> 
</I>&gt;<i> Rik
</I>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082047.html">[whatwg] Grouping in canvas 2d
</A></li>
	<LI>Next message: <A HREF="082038.html">[whatwg] Grouping in canvas 2d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82032">[ date ]</a>
              <a href="thread.html#82032">[ thread ]</a>
              <a href="subject.html#82032">[ subject ]</a>
              <a href="author.html#82032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
