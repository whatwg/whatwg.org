<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas API: What should happen if non-finite floats	are used
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20API%3A%20What%20should%20happen%20if%20non-finite%20floats%0A%09are%20used&In-Reply-To=%3C7E267CC1-473D-4440-9E95-D022E71E10EA%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070713.html">
   <LINK REL="Next"  HREF="070728.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas API: What should happen if non-finite floats	are used</H1>
<!--htdig_noindex-->
    <B>Oliver Hunt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20API%3A%20What%20should%20happen%20if%20non-finite%20floats%0A%09are%20used&In-Reply-To=%3C7E267CC1-473D-4440-9E95-D022E71E10EA%40apple.com%3E"
       TITLE="[whatwg] Canvas API: What should happen if non-finite floats	are used">oliver at apple.com
       </A><BR>
    <I>Wed Sep  8 11:22:32 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070713.html">[whatwg] Canvas API: What should happen if non-finite floats are used
</A></li>
        <LI>Next message: <A HREF="070728.html">[whatwg] Canvas API: What should happen if non-finite floats are used
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70722">[ date ]</a>
              <a href="thread.html#70722">[ thread ]</a>
              <a href="subject.html#70722">[ subject ]</a>
              <a href="author.html#70722">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Sep 8, 2010, at 11:00 AM, Boris Zbarsky wrote:

&gt;<i> On 9/8/10 12:45 PM, Oliver Hunt wrote:
</I>&gt;&gt;<i> I suggested this behaviour a long time ago after running into yet
</I>&gt;&gt;<i> another piece of code that hit this case in webkit (back when the
</I>&gt;&gt;<i> spec said to throw an exception) yet firefox and opera did not throw.
</I>&gt;&gt;<i> In some cases firefox does throw, and in others it doesn't (or maybe
</I>&gt;&gt;<i> didn't? has ffx behaviour changed?)
</I>&gt;<i> 
</I>&gt;<i> Gecko behavior for lineTo and most other canvas methods I see has been to throw since late 2006, and shipped with the initial release of Firefox 3.0.  At the time, the change was also backported to the Firefox 1.5 and Firefox 2 branches.
</I>&gt;<i> 
</I>&gt;&gt;<i> and we came to the conclusion that as much as possible the canvas should silently ignore
</I>&gt;&gt;<i> NaN/Infinite values.
</I>&gt;<i> 
</I>&gt;<i> Well, except that leads to incorrect rendering, as I said.  Was this discussion public, perchance?
</I>
I can see a number of canvas discussions in late 2007/early 2008 on the whatwg list, so i presume that covers some of it.

It also only leads to incorrect rendering if the behaviour if it's unexpected.

One old case that failed in the presence of exceptions was the old canvex demo at <A HREF="http://canvex.lazyilluminati.com/83/play.xhtml">http://canvex.lazyilluminati.com/83/play.xhtml</A> - this was one of the first cases i saw after trying to make webkit's implementation conform to the (older) spec by throwing exceptions on non-finite values we had many canvas using sites break so had to stop throwing.

It seems to work these days but a quick scan of the minified source seemed to indicate that they now put try/catch around every use of canvas is now wrapped in try/catch

--Oliver



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070713.html">[whatwg] Canvas API: What should happen if non-finite floats are used
</A></li>
	<LI>Next message: <A HREF="070728.html">[whatwg] Canvas API: What should happen if non-finite floats are used
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70722">[ date ]</a>
              <a href="thread.html#70722">[ thread ]</a>
              <a href="subject.html#70722">[ subject ]</a>
              <a href="author.html#70722">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
