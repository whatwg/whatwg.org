<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Video with MIME type application/octet-stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20with%20MIME%20type%20application/octet-stream&In-Reply-To=%3C4C87E055.2010905%40doxdesk.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070765.html">
   <LINK REL="Next"  HREF="070600.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Video with MIME type application/octet-stream</H1>
<!--htdig_noindex-->
    <B>And Clover</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20with%20MIME%20type%20application/octet-stream&In-Reply-To=%3C4C87E055.2010905%40doxdesk.com%3E"
       TITLE="[whatwg] Video with MIME type application/octet-stream">and-py at doxdesk.com
       </A><BR>
    <I>Wed Sep  8 12:13:25 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070765.html">[whatwg] Video with MIME type application/octet-stream
</A></li>
        <LI>Next message: <A HREF="070600.html">[whatwg] &lt;time&gt; element feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70726">[ date ]</a>
              <a href="thread.html#70726">[ thread ]</a>
              <a href="subject.html#70726">[ subject ]</a>
              <a href="author.html#70726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 09/07/2010 09:29 PM, Aryeh Gregor wrote:

&gt;<i> I'm not a fan of sniffing, but I'm also not a fan of blindly believing
</I>&gt;<i> clearly wrong MIME types
</I>
Who decides what is &quot;clearly wrong&quot;? Perhaps I *meant* to serve a 
non-video file with something that looks a fingerprint from a video 
format at the top. In fact, given that HTML5 does not endorse or limit 
implementation to a particular video format, there could be any number 
of video formats whose header-words I have to avoid using in the first N 
bytes of my file.

If I were serving an image/png with no PNG header, you could say it was 
clearly wrong. But there's no way you can say any sequence of bytes is 
&quot;clearly not application/octet-stream&quot; or some other anything-goes type.

&gt;<i> I'm not yet sure what the correct tradeoff is here, but I'm pretty sure it's
</I>&gt;<i> not &quot;no sniffing at all under any conditions&quot;.
</I>
I suggest:

1. Resources with no Content-Type continue to be fair game.

2. By far the most prevalent &quot;maybe wrong&quot; Content-Type that is widely 
deployed is text/plain, due to inappropriate web server defaults (both 
IIS and Apache&lt;2.3). Allow sniffing of text/plain resources, but provide 
an override for server operators to say &quot;I mean it, this is really 
text/plain&quot;. ie. standardise X-Content-Type-Options or something like it.

3. Sniffing should otherwise not occur in any context.

It is unfortunate that sniffing will continue to be needed for the 
text/plain case for a very long time yet. But we should be aiming to 
mitigate and deprecate this historical error, rather than make the 
problem an order of magnitude worse by requiring potentially-limitless 
new sniffing cases.

&gt;<i> it's unreliable in the same way across all browsers.
</I>
It's already different in different browsers, even with the small number 
of filetypes we currently have. As previously commented, undistinctive 
fingerprints, starting mid-stream and other oddities like ID3 tags makes 
sniffing for media filetypes even more troublesome than it is for other 
types.

In any case, any sniffing solution will always be inconsistent as 
different browsers, OSes, installed codecs and options expose different 
media filetypes to the net.

Never mind just browsers, or even browsers that simply pass the resource 
to their underlying media frameworks for sniffing: there are far more 
already-deployed media players with HTTP capability than there are 
browsers with video/audio support. There is no chance we will ever be 
able to standardise the implementation of sniffing amongst this wide 
range of agents!

So there will always be non-compliant UAs. In the face of this, we might 
as well standardise the 'good' solution - minimal sniffing - and hope to 
drag a few modern browsers along with that, instead of mandating an 
unreliable sniffing approach that *still* isn't implemented universally.

&gt;<i> This is particularly essential for security -- undocumented
</I>&gt;<i> sniffing behavior has caused more than one vulnerability in the past.
</I>
Yes. Undocumented sniffing behaviour has caused many vulnerabilities, as 
even well-known sniffing behaviour continues to do (see the current 
publicised difficulties with CSS-inclusion attacks). Lack of sniffing 
behaviour, however, has never caused a vulnerability. It fails safe.

-- 
And Clover
mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">and at doxdesk.com</A>
<A HREF="http://www.doxdesk.com/">http://www.doxdesk.com/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070765.html">[whatwg] Video with MIME type application/octet-stream
</A></li>
	<LI>Next message: <A HREF="070600.html">[whatwg] &lt;time&gt; element feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70726">[ date ]</a>
              <a href="thread.html#70726">[ thread ]</a>
              <a href="subject.html#70726">[ subject ]</a>
              <a href="author.html#70726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
