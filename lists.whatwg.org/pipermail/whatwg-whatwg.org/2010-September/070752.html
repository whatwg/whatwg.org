<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Timed tracks: feedback compendium
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timed%20tracks%3A%20feedback%20compendium&In-Reply-To=%3Cop.vitiejzgsr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070748.html">
   <LINK REL="Next"  HREF="070764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Timed tracks: feedback compendium</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timed%20tracks%3A%20feedback%20compendium&In-Reply-To=%3Cop.vitiejzgsr6mfa%40kirk%3E"
       TITLE="[whatwg] Timed tracks: feedback compendium">philipj at opera.com
       </A><BR>
    <I>Fri Sep 10 06:00:11 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070748.html">[whatwg] Timed tracks: feedback compendium
</A></li>
        <LI>Next message: <A HREF="070764.html">[whatwg] Timed tracks: feedback compendium
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70752">[ date ]</a>
              <a href="thread.html#70752">[ thread ]</a>
              <a href="subject.html#70752">[ subject ]</a>
              <a href="author.html#70752">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 09 Sep 2010 15:08:43 +0200, Silvia Pfeiffer
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> On Wed, Sep 8, 2010 at 9:19 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, 23 Jul 2010, Philip J&#228;genstedt wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If we must have both kind=subtitles and kind=captions, then I'd suggest
</I>&gt;&gt;<i> &gt; making the default subtitles, as that is without a doubt the most  
</I>&gt;&gt;<i> common
</I>&gt;&gt;<i> &gt; kind of timed text. Making captions the default only means that most
</I>&gt;&gt;<i> &gt; timed text will be mislabeled as being appropriate for the HoH when it
</I>&gt;&gt;<i> &gt; is not.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ok, I've changed the default. However, I'm not fighting this battle if  
</I>&gt;&gt;<i> it
</I>&gt;&gt;<i> comes up again, and will just change it back if people don't defend  
</I>&gt;&gt;<i> having
</I>&gt;&gt;<i> this as the default. (And then change it back again if the browsers pick
</I>&gt;&gt;<i> &quot;subtitles&quot; in their implementations after all, of course.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Note that captions aren't just for users that are hard-of-hearing. Most  
</I>&gt;&gt;<i> of
</I>&gt;&gt;<i> the time when I use timed tracks, I want captions, because the reason I
</I>&gt;&gt;<i> have them enabled is that I have the sound muted.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hmm, you both have good points. Maybe we should choose something as the
</I>&gt;<i> default that is not visible on screen, such as &quot;descriptions&quot;? That would
</I>&gt;<i> avoid the issue and make it explicit for people who provide captions or
</I>&gt;<i> subtitles that they have to make a choice.
</I>
If we want people to make an explicit choice, we should make kind a
required attribute and make browsers ignore &lt;track&gt;s without it. (I think
subtitles is a good default though.)

&gt;&gt;<i> &gt; - Use existing technologies where appropriate.
</I>&gt;&gt;<i> &gt; [...]
</I>&gt;&gt;<i> &gt; &gt; - Try as much as possible to have things Just Work.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I think by specifying a standalone cue text parser WebSRT fails on  
</I>&gt;&gt;<i> these
</I>&gt;&gt;<i> &gt; counts compared to reusing the HTML fragment parsing algorithm for
</I>&gt;&gt;<i> &gt; parsing cue text.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> HTML parsing is a disaster zone that we should avoid at all costs,  
</I>&gt;&gt;<i> IMHO. I
</I>&gt;&gt;<i> certainly don't think it would make any sense to propagate that format
</I>&gt;&gt;<i> into anywhere where we don't absolutely have to propagate it.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> A WebSRT authoring application does not have to create all markup that a
</I>&gt;<i> HTML fragment parser supports. It would only use what it sees necessary  
</I>&gt;<i> for
</I>&gt;<i> the use cases that it targets.
</I>&gt;<i>
</I>&gt;<i> Browsers are WebSRT players that will consume the HTML fragments created  
</I>&gt;<i> by
</I>&gt;<i> such authoring applications.
</I>&gt;<i> In addition, browsers will also be able to consume richer HTML fragments
</I>&gt;<i> that were created as time-aligned overlays for video  with more fancy
</I>&gt;<i> styling by Web developers. Something like
</I>&gt;<i> <A HREF="http://people.mozilla.com/~prouget/demos/vp8/">http://people.mozilla.com/~prouget/demos/vp8/</A> (you need Firefox for it).
</I>&gt;<i> Where it says &quot;This movie will eat your planet&quot;, you could have fancy  
</I>&gt;<i> timed
</I>&gt;<i> text.
</I>&gt;<i>
</I>&gt;<i> Just as much as there is a need for basic captions and subtitles, there  
</I>&gt;<i> is
</I>&gt;<i> also a need for fancy time-aligned HTML fragments. It would be very  
</I>&gt;<i> strange
</I>&gt;<i> if, in order to get that working, people would need to use the &quot;metadata&quot;
</I>&gt;<i> part of the WebSRT spec.
</I>
Is it likely that HTML in cues alone will be enough to do all the fancy
things that people might want? If they need scripts anyway, I'm very happy
to force them to use metadata, as it also makes the browser implementation
simpler (that's my opinion of the suggestions made so far, anyway).

&gt;<i> On Sun, 25 Jul 2010, Silvia Pfeiffer wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I think if we have a mixed set of .srt files out there, some of which
</I>&gt;&gt;<i> &gt; are old-style srt files (with line numbers, without WebSRT markup) and
</I>&gt;&gt;<i> &gt; some are WebSRT files with all the bells and whistles and with
</I>&gt;&gt;<i> &gt; additional external CSS files, we create such a mess for that existing
</I>&gt;&gt;<i> &gt; ecosystem that we won't find much love.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm not sure our goal is to find love here, but in general I would agree
</I>&gt;&gt;<i> that it would be better to have one format than two. I don't see why we
</I>&gt;&gt;<i> wouldn't just have one format here though. The idea of WebSRT is to be
</I>&gt;&gt;<i> sufficiently backwards-compatible that that is possible.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> With &quot;finding love&quot; I referred to your expressed goals:
</I>&gt;<i>  - Keep implementation costs for standalone players low.
</I>&gt;<i>  - Use existing technologies where appropriate.
</I>&gt;<i>  - Try as much as possible to have things Just Work.
</I>&gt;<i>
</I>&gt;<i> With WebSRT, we will have one label for two different types of files: the
</I>&gt;<i> old-style SRT files and the new WebSRT files. Just putting a single  
</I>&gt;<i> label on
</I>&gt;<i> them doesn't mean it is one format, in particular when most old files  
</I>&gt;<i> will
</I>&gt;<i> not be conformant to the new label and
</I>
Apart from the encoding, what else about old SRT files wouldn't
be conformant? Does it matter that they aren't conformant if they work
anyway?

&gt;<i> many new files will not play in the software created for the old spec.
</I>
As long as we don't add a header, the files will play in most existing
software. Apart from parsers that assume that SRT is plain text (and thus
would be unsuitable for much existing SRT content), what kind of breakage
have you found with WebSRT-specific syntax in existing software?

&gt;&gt;<i> None is allowed today, but it would be relatively straight-forward to
</I>&gt;&gt;<i> introduce metadata before the cues (or even in between the cues). For
</I>&gt;&gt;<i> example, we could add defaults:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   *
</I>&gt;&gt;<i>   DEFAULTS
</I>&gt;&gt;<i>   L:-1 T:50% A:middle
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   00:00:20,000 --&gt; 00:00:24,400
</I>&gt;&gt;<i>   Altocumulus clouds occur between six thousand
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   00:00:24,600 --&gt; 00:00:27,800
</I>&gt;&gt;<i>   and twenty thousand feet above ground level.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We could add metadata (here using a different syntax that is similarly
</I>&gt;&gt;<i> backwards-compatible with what the spec parser does today):
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>   @charset --&gt; win-1252
</I>&gt;&gt;<i>   @language --&gt; en-US
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   00:00:20,000 --&gt; 00:00:24,400
</I>&gt;&gt;<i>   Altocumulus clouds occur between six thousand
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   00:00:24,600 --&gt; 00:00:27,800
</I>&gt;&gt;<i>   and twenty thousand feet above ground level.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> When I read the following:
</I>&gt;<i> &quot;A WebSRT file body consists of an optional U+FEFF BYTE ORDER MARK (BOM)
</I>&gt;<i> character, followed by zero or more WebSRT line
</I>&gt;<i> terminators&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>&gt;,
</I>&gt;<i> followed by zero or more WebSRT
</I>&gt;<i> cues&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-cue">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-cue</A>&gt;
</I>&gt;<i> separated
</I>&gt;<i> from each other by two or more WebSRT line
</I>&gt;<i> terminators&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>&gt;,
</I>&gt;<i> followed by zero or more WebSRT line
</I>&gt;<i> terminators&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>&gt;
</I>&gt;<i> .&quot;
</I>&gt;<i> then that doesn't imply for me that we can add anything in front of the
</I>&gt;<i> WebSRT cues without breaking the spec, or that we can define cues that  
</I>&gt;<i> are
</I>&gt;<i> not time ranges around the &quot;--&gt;&quot; sign.
</I>
The parsing algorithm simply skips over things it doesn't recognize,
that's why adding basically any new syntax in between cues wouldn't break
existing WebSRT parsers. Allowing anything as part of the syntax is a bit
dangerous though, as most unrecognized stuff between cues are likely
broken cues. Validators should warn about it, not treat it as a comment.

Not being convinced we need anything more than simple key-value headers in
a header, I still looked at the options for comments:

Making any line with a --&gt; in it be a comment would hide a lot of broken
cues from validators, so I think we shouldn't do this.

; appears at the beginning of lines in 15/10000 files and most don't look
like they're intended as comments.

# appears at the beginning of lines in 244/10000 files and most don't look
like they're intended as comments.

/* only appears in 3/10000 files, so CSS-style comments might work, but
does add some complexity

// appears at the beginning of lines in 5/10000 files and most look like
that *are* intended as comments or are garbage, so it should work.

(data from OpenSubtitles sample)

&gt;&gt;<i> * there is no possibility to add file-wide metadata to WebSRT; things
</I>&gt;&gt;<i> &gt; about authoring and usage rights as well as information about the  
</I>&gt;&gt;<i> media
</I>&gt;&gt;<i> &gt; resource that the file relates to should be kept within the file.  
</I>&gt;&gt;<i> Almost
</I>&gt;&gt;<i> &gt; all subtitle and caption format have the possibility for such metadata
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is something we could add if there is a clear use case, but I'm not
</I>&gt;&gt;<i> sure that there is. Why does SRT not have it today?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Because SRT is a quick hack and the simplest format possible that  
</I>&gt;<i> fulfills
</I>&gt;<i> not even bare needs. :-)
</I>&gt;<i> But seriously: most formats have metadata and I would rather go with  
</I>&gt;<i> those
</I>&gt;<i> experiences than with SRT in this respect.
</I>
I agree with Silvia. I often see various credits in the cues themselves.
Some are there for ego purposes, but I expect at least some of them would
end up in a metadata field if it existed. It's hard to get solid numbers,
but after some grepping and manual filtering it seems like around 5% of
files have some form of credits matching 'subtitle', 'translat' or
'caption' case-insensitively. I guess that many non-English subtitles
have the credits in another language, so the true percentage should be
higher.

&gt;&gt;<i> * there is no magic identifier for a WebSRT resource, i.e. what the
</I>&gt;&gt;<i> &gt; &lt;wmml&gt; element is for WMML. This makes it almost impossible to create  
</I>&gt;&gt;<i> a
</I>&gt;&gt;<i> &gt; program to tell what file type this is, in particular since we have  
</I>&gt;&gt;<i> made
</I>&gt;&gt;<i> &gt; the line numbers optional. We could use &quot;--&gt;&quot; as an indicator, but  
</I>&gt;&gt;<i> it's
</I>&gt;&gt;<i> &gt; not a good signature.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yeah, that's a problem. I considered adding &quot;WEBSRT&quot; at the start of  
</I>&gt;&gt;<i> every
</I>&gt;&gt;<i> file but we couldn't use it reliably since WebSRT parsers presumably  
</I>&gt;&gt;<i> want
</I>&gt;&gt;<i> to support SRT using the same parser, and that has no signature.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I continue to doubt that you can support WebSRT without changing your SRT
</I>&gt;<i> parser. Thus, you might as well make such a change and make it easy for  
</I>&gt;<i> SRT
</I>&gt;<i> parsers to identify that it's a WebSRT file to parse and not legacy SRT.
</I>
Do you think that we can't make the WebSRT parser work well enough for
existing SRT content, or why would one want to use two different parsers?

&gt;&gt;<i> So, let's stop pretending there is compatibility and just call WebSRT a
</I>&gt;&gt;<i> &gt; new format.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Compatibility has nothing to do with conformance. It has to do with what
</I>&gt;&gt;<i> user agents do. As far as I can tell, WebSRT is backwards-compatible  
</I>&gt;&gt;<i> with
</I>&gt;&gt;<i> legacy SRT user agents, and legacy SRT files are compatible with WebSRT
</I>&gt;&gt;<i> user agents as described by the spec.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Legacy SRT files contain many different character sets, which makes them
</I>&gt;<i> non-conformant to WebSRT. I would not think that new WebSRT  
</I>&gt;<i> implementations
</I>&gt;<i> like what the Web browsers will need to implement should make exceptions
</I>&gt;<i> from the spec to support non-conformant files and become compatible with
</I>&gt;<i> legacy SRT files. That to me again confirms that these are two different
</I>&gt;<i> formats. Yes, they can be supported by the same piece of code, but that
</I>&gt;<i> doesn't make them the same format.
</I>
That's not really an exception, conformance (syntax) and parsing are just
different things. (It must be so, since making parsing more forgiving than
the syntax is what allows for future extensions of version-less formats on
the web.)

&gt;<i> On Wed, 18 Aug 2010, Silvia Pfeiffer wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; It actually burns down to the question: do we want the simple SRT  
</I>&gt;&gt;<i> format
</I>&gt;&gt;<i> &gt; to survive as its own format and be something that people can rely  
</I>&gt;&gt;<i> upon
</I>&gt;&gt;<i> &gt; as not having &quot;weird stuff&quot; in it - or do we not. I believe that it's
</I>&gt;&gt;<i> &gt; important that it survives.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Does that format still exist? Is it materially different than WebSRT?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What do you mean? All existing SRT files adhere to the simple form of  
</I>&gt;<i> SRT.
</I>
Lots of SRT files are broken in different ways, what is it they adhere to?

&gt;<i> None of the adhere to the WebSRT specification.
</I>
Perhaps many don't adhere to the WebSRT syntax (mostly due to not being  
UTF-8), but if they parse and render in the same way as they do in most  
existing SRT players, does it matter?

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070748.html">[whatwg] Timed tracks: feedback compendium
</A></li>
	<LI>Next message: <A HREF="070764.html">[whatwg] Timed tracks: feedback compendium
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70752">[ date ]</a>
              <a href="thread.html#70752">[ thread ]</a>
              <a href="subject.html#70752">[ subject ]</a>
              <a href="author.html#70752">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
