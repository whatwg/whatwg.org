<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Video with MIME type application/octet-stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20with%20MIME%20type%20application/octet-stream&In-Reply-To=%3Cop.vinh21bysr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070653.html">
   <LINK REL="Next"  HREF="070654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Video with MIME type application/octet-stream</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20with%20MIME%20type%20application/octet-stream&In-Reply-To=%3Cop.vinh21bysr6mfa%40kirk%3E"
       TITLE="[whatwg] Video with MIME type application/octet-stream">philipj at opera.com
       </A><BR>
    <I>Tue Sep  7 00:07:39 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070653.html">[whatwg] Video with MIME type application/octet-stream
</A></li>
        <LI>Next message: <A HREF="070654.html">[whatwg] Video with MIME type application/octet-stream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70655">[ date ]</a>
              <a href="thread.html#70655">[ thread ]</a>
              <a href="subject.html#70655">[ subject ]</a>
              <a href="author.html#70655">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 07 Sep 2010 02:46:29 +0200, Gregory Maxwell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gmaxwell at gmail.com</A>&gt;  
wrote:

&gt;<i> On Mon, Sep 6, 2010 at 3:19 PM, Aryeh Gregor &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">Simetrical+w3c at gmail.com</A>&gt;  
</I>&gt;<i> wrote:
</I>&gt;&gt;<i> On Mon, Sep 6, 2010 at 4:14 AM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;  
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;<i> The Ogg page begins with the 4 bytes &quot;OggS&quot;, which is what Opera  
</I>&gt;&gt;&gt;<i> (GStreamer)
</I>&gt;&gt;&gt;<i> checks for. For additional safety, one could also check for the  
</I>&gt;&gt;&gt;<i> trailing
</I>&gt;&gt;&gt;<i> version indicator, which ought to be a NULL byte for current Ogg. [1]  
</I>&gt;&gt;&gt;<i> [2]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &quot;OggS\0&quot; as the first five bytes seems safe to check for.  It's rather
</I>&gt;&gt;<i> short, I guess because it's repeated on every page, but five bytes is
</I>&gt;&gt;<i> long enough that it should occur by random only negligibly often, in
</I>&gt;&gt;<i> either text or binary files.
</I>&gt;<i>
</I>&gt;<i> Um... If you do that you will fail to capture on files that most other
</I>&gt;<i> ogg reading tools will happily capture on.  Common software will read
</I>&gt;<i> forward until it hits OggS then it will check the page CRC (in total,
</I>&gt;<i> 9 bytes of capture).  For example, here is a file which begins with a
</I>&gt;<i> kilobyte of \0: <A HREF="http://myrandomnode.dyndns.org:8080/~gmaxwell/test.ogg">http://myrandomnode.dyndns.org:8080/~gmaxwell/test.ogg</A>
</I>&gt;<i>  Everything I had handy played it.
</I>&gt;<i>
</I>&gt;<i> This could fail to capture on a live stream that didn't ensure new
</I>&gt;<i> listeners began at a page boundary. I don't know if any of these
</I>&gt;<i> exist.
</I>&gt;<i>
</I>&gt;<i> I don't know if breaking these cases would matter much but herein lies
</I>&gt;<i> the danger of sniffing&#8212; everyone thinks they're an expert but no one
</I>&gt;<i> really has a handle on the implications.
</I>&gt;<i>
</I>
Your test file is too short, perhaps it was truncated? I made my own one  
by adding 1024 NULL bytes to the beginning of  
<A HREF="http://v2v.cc/~j/theora_testsuite/320x240.ogg">http://v2v.cc/~j/theora_testsuite/320x240.ogg</A>

That file doesn't play in Totem, because it (GStreamer) relies on  
sniffing. It also won't play in Opera for this reason, but I haven't seen  
any bug reports about failure to play similar files since Opera introduced  
support for Ogg. It does play in Firefox, but not in Chrome. Just like  
with WebM, I think browsers should not support files that begin with  
arbitrary amounts of garbage, as it requires reading the whole file before  
failing.

The file doesn't play in VLC or MPlayer, but does play in xine.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070653.html">[whatwg] Video with MIME type application/octet-stream
</A></li>
	<LI>Next message: <A HREF="070654.html">[whatwg] Video with MIME type application/octet-stream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70655">[ date ]</a>
              <a href="thread.html#70655">[ thread ]</a>
              <a href="subject.html#70655">[ subject ]</a>
              <a href="author.html#70655">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
