<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;datalist&gt; and invalid values
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cdatalist%3E%20and%20invalid%20values&In-Reply-To=%3CAANLkTikExaPAutY7BpuP%2Bk8%3DWPGETXqYM4J9%3DA37dn5q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070985.html">
   <LINK REL="Next"  HREF="070958.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;datalist&gt; and invalid values</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cdatalist%3E%20and%20invalid%20values&In-Reply-To=%3CAANLkTikExaPAutY7BpuP%2Bk8%3DWPGETXqYM4J9%3DA37dn5q%40mail.gmail.com%3E"
       TITLE="[whatwg] &lt;datalist&gt; and invalid values">jonas at sicking.cc
       </A><BR>
    <I>Tue Sep 21 17:41:47 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070985.html">[whatwg] Consensus on video element (scriptable) Full-Screen
</A></li>
        <LI>Next message: <A HREF="070958.html">[whatwg] &lt;datalist&gt; and invalid values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70953">[ date ]</a>
              <a href="thread.html#70953">[ thread ]</a>
              <a href="subject.html#70953">[ subject ]</a>
              <a href="author.html#70953">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi All,

Currently the spec says that if an &lt;input&gt; has a list attribute
pointing to a &lt;datalist&gt;, and that &lt;datalist&gt; has an &lt;option&gt; with a
value which is not a valid value for the &lt;input&gt;, then that &lt;option&gt;
should be included in the list of suggestions made by the UA. The
relevant text in the spec is:

&quot;User agents must filter the suggestions to hide suggestions that the
user would not be allowed to enter as the input  element's value, and
should filter the suggestions to hide suggestions that would cause the
element to not satisfy its constraints.&quot;

I'm curious why this wording exists in the spec. I see several problems with it:

1. It adds extra complexity to implementations
2. If the &lt;datalist&gt; contains many options, it can be a performance
problem, for example putting a list of all company email addresses. I
imagine this might not be rare since it's likely to produce decent UI
even, for a very large number of &lt;option&gt;s. This is especially the
case if the &lt;input&gt; contains a pattern attribute, for example to
enforce that only company email addresses are used.
3. If the page author has specifically put an &lt;option&gt; in the list,
why do we think we &quot;know better&quot; and hide it? I assume we suspect that
the author must have had a bug in the code that generated the list of
&lt;option&gt;s, but I struggle to think of what type of bug we are
concerned about.

On the other hand, I can think of at least one use case when the
author would *want* to display suggestions even though they don't
match the &lt;input&gt; elements constraints. Consider for example:

&lt;input type=tel pattern=&quot;\d\d\d-\d\d\d-\d\d\d\d&quot; list=&quot;prefixes&quot;&gt;
&lt;datalist id=prefixes&gt;
  &lt;option value=&quot;650-&quot;&gt;
  &lt;option value=&quot;415-&quot;&gt;
&lt;/datalist&gt;

This would be appropriate for a company that does business in the San
Francisco area. It helps the user enter phone numbers with common
prefixes, while allowing the user to enter any US phone number. This
method can be used any time there is a common, or even required, set
of prefixes that the user is expected to enter.

While prefixes might not be common, it seems strictly easier and more
performant, even in the common case, from an implementation point of
view to allow it.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070985.html">[whatwg] Consensus on video element (scriptable) Full-Screen
</A></li>
	<LI>Next message: <A HREF="070958.html">[whatwg] &lt;datalist&gt; and invalid values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70953">[ date ]</a>
              <a href="thread.html#70953">[ thread ]</a>
              <a href="subject.html#70953">[ subject ]</a>
              <a href="author.html#70953">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
