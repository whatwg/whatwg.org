<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Timed tracks: feedback compendium
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timed%20tracks%3A%20feedback%20compendium&In-Reply-To=%3Cop.vi0jo2j2sr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070787.html">
   <LINK REL="Next"  HREF="070796.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Timed tracks: feedback compendium</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timed%20tracks%3A%20feedback%20compendium&In-Reply-To=%3Cop.vi0jo2j2sr6mfa%40kirk%3E"
       TITLE="[whatwg] Timed tracks: feedback compendium">philipj at opera.com
       </A><BR>
    <I>Tue Sep 14 01:11:16 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070787.html">[whatwg] Timed tracks: feedback compendium
</A></li>
        <LI>Next message: <A HREF="070796.html">[whatwg] Timed tracks: feedback compendium
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70795">[ date ]</a>
              <a href="thread.html#70795">[ thread ]</a>
              <a href="subject.html#70795">[ subject ]</a>
              <a href="author.html#70795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, 13 Sep 2010 15:50:09 +0200, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> On Mon, Sep 13, 2010 at 5:55 PM, Philip J&#228;genstedt  
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Sat, 11 Sep 2010 01:27:48 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  On Fri, Sep 10, 2010 at 11:00 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  On Thu, 09 Sep 2010 15:08:43 +0200, Silvia Pfeiffer
</I>&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  On Wed, Sep 8, 2010 at 9:19 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  On Fri, 23 Jul 2010, Philip J&#228;genstedt wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> If we must have both kind=subtitles and kind=captions, then I'd  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> suggest
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &gt; making the default subtitles, as that is without a doubt the most
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> common
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &gt; kind of timed text. Making captions the default only means that  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> most
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &gt; timed text will be mislabeled as being appropriate for the HoH  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> when
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> it
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &gt; is not.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Ok, I've changed the default. However, I'm not fighting this battle  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> if
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> it
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> comes up again, and will just change it back if people don't defend
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> having
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> this as the default. (And then change it back again if the browsers
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> pick
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &quot;subtitles&quot; in their implementations after all, of course.)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Note that captions aren't just for users that are hard-of-hearing.  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Most
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> the time when I use timed tracks, I want captions, because the  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> reason I
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> have them enabled is that I have the sound muted.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Hmm, you both have good points. Maybe we should choose something as
</I>&gt;&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;&gt;<i> default that is not visible on screen, such as &quot;descriptions&quot;? That
</I>&gt;&gt;&gt;&gt;&gt;<i> would
</I>&gt;&gt;&gt;&gt;&gt;<i> avoid the issue and make it explicit for people who provide captions  
</I>&gt;&gt;&gt;&gt;&gt;<i> or
</I>&gt;&gt;&gt;&gt;&gt;<i> subtitles that they have to make a choice.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If we want people to make an explicit choice, we should make kind a
</I>&gt;&gt;&gt;&gt;<i> required attribute and make browsers ignore &lt;track&gt;s without it. (I  
</I>&gt;&gt;&gt;&gt;<i> think
</I>&gt;&gt;&gt;&gt;<i> subtitles is a good default though.)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I think you misunderstood - my explanation probably wasn't very good.  
</I>&gt;&gt;&gt;<i> I'm
</I>&gt;&gt;&gt;<i> looking at it from the authoring POV.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What I meant was: if I author a text track that is supposed to be  
</I>&gt;&gt;&gt;<i> visible
</I>&gt;&gt;&gt;<i> on
</I>&gt;&gt;&gt;<i> screen as the video plays back and if we choose either @kind=subtitle  
</I>&gt;&gt;&gt;<i> or
</I>&gt;&gt;&gt;<i> @kind=caption as the default, then I don't have to really think through
</I>&gt;&gt;&gt;<i> about what I authored as it will be displayed on screen. This invites
</I>&gt;&gt;&gt;<i> people
</I>&gt;&gt;&gt;<i> to not distinguish between whether they authored subtitles or captions,
</I>&gt;&gt;&gt;<i> which is a bad thing, because a deaf user may then get tracks with the
</I>&gt;&gt;&gt;<i> wrong
</I>&gt;&gt;&gt;<i> label and expectations. If, however, we choose as a default something  
</I>&gt;&gt;&gt;<i> that
</I>&gt;&gt;&gt;<i> is not visible on screen, e.g. @kind=description or @kind=metadata,  
</I>&gt;&gt;&gt;<i> then
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> author who wants their text track to be visible on screen has to give  
</I>&gt;&gt;&gt;<i> it a
</I>&gt;&gt;&gt;<i> label, i.e. make an explicit choice between @kind=subtitle and
</I>&gt;&gt;&gt;<i> @kind=caption. I believe this will lead to more correctly labeled  
</I>&gt;&gt;&gt;<i> content.
</I>&gt;&gt;&gt;<i> I
</I>&gt;&gt;&gt;<i> am therefore strongly against default labeling with either subtitle or
</I>&gt;&gt;&gt;<i> caption. We could make @kind a required attribute instead as you are
</I>&gt;&gt;&gt;<i> saying.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> OK, I think we mostly agree. Any default will sometimes be wrong, so to  
</I>&gt;&gt;<i> not
</I>&gt;&gt;<i> have to choose between subtitles and captions, I'd still really prefer  
</I>&gt;&gt;<i> if
</I>&gt;&gt;<i> specific HoH-tags like &lt;sound&gt; can be shown or hidden depending on user
</I>&gt;&gt;<i> preference. I think that would lead to more content actually being  
</I>&gt;&gt;<i> written
</I>&gt;&gt;<i> for HoH users, as it doesn't requiring maintaining 2 different files.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ah, you are talking about some kind of CSS marker for the audio events  
</I>&gt;<i> that
</I>&gt;<i> are marked up in a caption file and that could just simple be &quot;display:
</I>&gt;<i> none&quot; if they are viewed as a subtitle. Interesting idea... not sure that
</I>&gt;<i> matches with the current spec though.
</I>
The spec already has &lt;sound&gt;, what's missing is making the default styling  
of it depend on user preference and making this the recommended way of  
delivering HoH content.

&gt;&gt;<i>   many new files will not play in the software created for the old spec.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> As long as we don't add a header, the files will play in most existing
</I>&gt;&gt;&gt;&gt;<i> software. Apart from parsers that assume that SRT is plain text (and  
</I>&gt;&gt;&gt;&gt;<i> thus
</I>&gt;&gt;&gt;&gt;<i> would be unsuitable for much existing SRT content), what kind of  
</I>&gt;&gt;&gt;&gt;<i> breakage
</I>&gt;&gt;&gt;&gt;<i> have you found with WebSRT-specific syntax in existing software?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I think we need to add a header - and possibly other things in the  
</I>&gt;&gt;&gt;<i> future.
</I>&gt;&gt;&gt;<i> Will we forever have the SRT restrictions hold back the introduction of
</I>&gt;&gt;&gt;<i> new
</I>&gt;&gt;&gt;<i> features into WebSRT?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes, if we extend SRT we can't break compatibility. However, it seems  
</I>&gt;&gt;<i> that
</I>&gt;&gt;<i> all the extensibility needed already exists, as arbitrary tag names are
</I>&gt;&gt;<i> handled by the parser.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Your analysis of what format for headers we can introduce without  
</I>&gt;<i> breaking
</I>&gt;<i> old SRT files speaks against that. Whatever extensions we introduce  
</I>&gt;<i> beyond
</I>&gt;<i> what we currently have will break compatibility with some and  
</I>&gt;<i> increasingly
</I>&gt;<i> more old SRT parsing software. Not to speak of format compatibility,  
</I>&gt;<i> which
</I>&gt;<i> is already a non-given.
</I>
You're right, adding a header breaks SRT compat.

&gt;&gt;<i>  Allowing anything as part of the syntax is a bit
</I>&gt;&gt;&gt;&gt;<i> dangerous though, as most unrecognized stuff between cues are likely
</I>&gt;&gt;&gt;&gt;<i> broken cues. Validators should warn about it, not treat it as a  
</I>&gt;&gt;&gt;&gt;<i> comment.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I wasn't aware of the effect of the standardised parsing algorithm for
</I>&gt;&gt;&gt;<i> WebSRT allowing &quot;broken cues&quot; to be dealt with. This will effectively  
</I>&gt;&gt;&gt;<i> mean
</I>&gt;&gt;&gt;<i> that a parser will be required to parse all files that it is given from
</I>&gt;&gt;&gt;<i> beginning to end and discard all non-conformant lines - even if that  
</I>&gt;&gt;&gt;<i> file
</I>&gt;&gt;&gt;<i> may be a 100GB large movie file. In this case, I would really recommend
</I>&gt;&gt;&gt;<i> that
</I>&gt;&gt;&gt;<i> we put a magic identifier at the beginning of Web SRT files so we can  
</I>&gt;&gt;&gt;<i> be
</I>&gt;&gt;&gt;<i> sure that the intention of the file was to be a WebSRT file. Let's have
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> string &quot;WebSRT&quot; at the beginning of the files.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That's a good point. I don't suppose it's a huge problem in practice  
</I>&gt;&gt;<i> that
</I>&gt;&gt;<i> errors can't be detected until EOF, but it's certainly not a desirable
</I>&gt;&gt;<i> feature. To maintain some sanity, we probably ought to either require  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> correct MIME type or require the correct magic bytes. From the &lt;video&gt;  
</I>&gt;&gt;<i> MIME
</I>&gt;&gt;<i> type debacle, I think I slightly prefer magic bytes to be checked by the
</I>&gt;&gt;<i> parser.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've also argued for the inclusion of metadata, so I'm beginning to  
</I>&gt;&gt;<i> warm up
</I>&gt;&gt;<i> to the idea of adding a header beginning with &quot;WebSRT&quot; or some such. If  
</I>&gt;&gt;<i> we
</I>&gt;&gt;<i> do this, no existing SRT content can be reused, but we can still try to  
</I>&gt;&gt;<i> make
</I>&gt;&gt;<i> it possible for WebSRT files to be reusable in desktop applications, by
</I>&gt;&gt;<i> keeping the syntax highly compatible so that the same parser can be  
</I>&gt;&gt;<i> used for
</I>&gt;&gt;<i> both without a mode switch.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sounds good to me. I'm sure browsers would find a way to have old SRT 
</I>&gt;<i> files slip through the cracks, but that's not what we should be 
</I>&gt;<i> specifying for. SRT could IMHO be a second format to support in &lt;track&gt; 
</I>&gt;<i> elements, but WebSRT should be the baseline.
</I>
The point of a header is that browsers can identify WebSRT files and not  
keep parsing through a 100GB movie file, so if we do add a header then no  
existing SRT files will work. I certainly don't want to support SRT and  
WebSRT as *different* formats.

&gt;<i> So, thinking about that header: from your analysis of the existing files:
</I>&gt;<i> did you have many starting with @.. ?
</I>
22/10000 files have lines starting with @, but since this is only in the  
header, I don't think it matters.

&gt;<i> I'd be happy for the name-value pairs spec that Ian mentioned, which  
</I>&gt;<i> could
</I>&gt;<i> then lead to something like the following as header:
</I>&gt;<i>
</I>&gt;<i> WebSRT
</I>&gt;<i> @language --&gt; en-US
</I>&gt;<i> @kind --&gt; subtitle
</I>&gt;<i> @cueformat --&gt; plain/minimal/metadata
</I>&gt;<i> @author --&gt; Frank, Charlie, Anna
</I>&gt;<i> @date --&gt; 20th September 2010
</I>&gt;<i> @copyright --&gt; WGBH, 2010
</I>&gt;<i> @license --&gt; CC-BY-SA, <A HREF="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</A>
</I>
I'd say that the simplest approach is probably requiring the first line to  
be &quot;WebSRT&quot;, and then all lines up to the first blank line are defined as  
the header. I'm not sure what the point of using @ is, and using --&gt; here  
seems weird as it's used for a range in the timing line, something quite  
different. I think the following would be simpler:

WebSRT
language: en-US
author: Frank
date: 2010-09-20

(allowing free form dates makes it non-machine-readable, so why bother?)

&gt;<i> Further, with your analysis, it seemed like the following could be
</I>&gt;<i> acceptable for comments:
</I>&gt;<i>
</I>&gt;<i> // Lines starting with // are comments
</I>
Yes, but do we need comments in the cues at all? Since SRT has no  
comments, this would make the cue format incompatible too, in which case  
we can just stop pretending that there's any relationship to SRT.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070787.html">[whatwg] Timed tracks: feedback compendium
</A></li>
	<LI>Next message: <A HREF="070796.html">[whatwg] Timed tracks: feedback compendium
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70795">[ date ]</a>
              <a href="thread.html#70795">[ thread ]</a>
              <a href="subject.html#70795">[ subject ]</a>
              <a href="author.html#70795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
