<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Video with MIME type application/octet-stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20with%20MIME%20type%20application/octet-stream&In-Reply-To=%3C4C81C17E.6020206%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070635.html">
   <LINK REL="Next"  HREF="070642.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Video with MIME type application/octet-stream</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20with%20MIME%20type%20application/octet-stream&In-Reply-To=%3C4C81C17E.6020206%40mit.edu%3E"
       TITLE="[whatwg] Video with MIME type application/octet-stream">bzbarsky at MIT.EDU
       </A><BR>
    <I>Fri Sep  3 20:48:14 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070635.html">[whatwg] Video with MIME type application/octet-stream
</A></li>
        <LI>Next message: <A HREF="070642.html">[whatwg] BINID (Was: Video with MIME type	application/octet-stream)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70640">[ date ]</a>
              <a href="thread.html#70640">[ thread ]</a>
              <a href="subject.html#70640">[ subject ]</a>
              <a href="author.html#70640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 9/3/10 3:48 PM, Aryeh Gregor wrote:
&gt;&gt;<i> Why are you assuming that?
</I>&gt;<i>
</I>&gt;<i> Because blocking an entire MIME type seems like it would be massive
</I>&gt;<i> overkill . . . but if that's a real use-case, well, okay.  It still
</I>&gt;<i> can't be *too* hard to check the first few bytes of the contents.
</I>&gt;<i> They must do it anyway if they implement this for images, right?
</I>
Yes.

But note that for some video formats checking the first few bytes is not 
sufficient.  In fact, some video container formats can have arbitrary 
length prefixes before the actual video data starts.  Of course if 
sniffers are just restricted to the first few bytes that might be ok.

  &gt; Okay, you're being too theoretical for me.  Let's say we have
&gt;<i> fingerprints for all the major video types, of the form &quot;check if the
</I>&gt;<i> first X bytes match this very simple pattern&quot;.  Let's say the spec
</I>&gt;<i> says that whenever processing the response to an HTTP request,
</I>&gt;<i> browsers must act as though they executed the sniffing algorithm and,
</I>&gt;<i> if it sniffs as a video type, they must treat it the same as if the
</I>&gt;<i> Content-Type matched the sniffed type.
</I>
OK, so context-independent?  Note that not a single browser implements 
this today.

&gt;<i> Also suppose that the fingerprints include byte sequences that cannot occur in normal text
</I>&gt;<i> encodings
</I>
Is this a reasonable supposition?  What are these byte sequences for the 
container formats at hand?  (Say WebM's restricted Matroska container, 
whatever container format is supported for H.264 by IE and Chrome, and 
Ogg; we'll ignore the generic Matroska weirdness for now.)

&gt;<i> and that they're long enough that random false positives
</I>&gt;<i> are extremely unlikely.  What's the problem with this specific
</I>&gt;<i> proposal?
</I>
Might be a good idea to ask the IE team, the Chrome team, and the Safari 
team why they're not sniffing in toplevel browsing contexts...  I 
believe there's been at least one answer from a Chrome developer on that 
already, though.

&gt;&gt;<i> Er... Where did I propose this?  I proposed speccing that there MUST NOT be
</I>&gt;&gt;<i> any sniffing, with browsers that sniff therefore being nonconformant.  I
</I>&gt;&gt;<i> didn't propose allowing ad-hoc sniffing.
</I>&gt;<i>
</I>&gt;<i> Right.  But the spec never allowed sniffing, and two browsers do it
</I>&gt;<i> anyway.
</I>
Sure, but it's early days in implementation.  Note, also, that I believe 
it's 3 browsers, not 2.

&gt;<i> Ian has spoken to those browsers' implementers, and the
</I>&gt;<i> browsers have not changed, despite knowing that they aren't following
</I>&gt;<i> the spec.
</I>
Some of these changes take time (e.g. having to rejigger quicktime to 
allow you to no sniff while using it).  So is it that they have not 
changed, or that they have no plans to change, ever?

&gt;<i> Do you have any particular reason to believe that they'll
</I>&gt;<i> change?
</I>
Such changes have happened in the past (e.g. for stylesheets, and for 
toplevel browsing contexts).  Why is this case different?

&gt;&gt;<i> Only if &quot;consistent&quot; includes &quot;consistent across all contexts&quot;.... (which no
</I>&gt;&gt;<i> one is proposing to either specify or implement).
</I>&gt;<i>
</I>&gt;<i> Could you comment specifically on the behavior I outlined above?
</I>
The behavior you outlined above is &quot;consistent&quot; in this sense, yes.

-Boris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070635.html">[whatwg] Video with MIME type application/octet-stream
</A></li>
	<LI>Next message: <A HREF="070642.html">[whatwg] BINID (Was: Video with MIME type	application/octet-stream)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70640">[ date ]</a>
              <a href="thread.html#70640">[ thread ]</a>
              <a href="subject.html#70640">[ subject ]</a>
              <a href="author.html#70640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
