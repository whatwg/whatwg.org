<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Timed tracks: feedback compendium
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timed%20tracks%3A%20feedback%20compendium&In-Reply-To=%3Cop.viyoarnqsr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070764.html">
   <LINK REL="Next"  HREF="070787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Timed tracks: feedback compendium</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timed%20tracks%3A%20feedback%20compendium&In-Reply-To=%3Cop.viyoarnqsr6mfa%40kirk%3E"
       TITLE="[whatwg] Timed tracks: feedback compendium">philipj at opera.com
       </A><BR>
    <I>Mon Sep 13 00:55:29 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070764.html">[whatwg] Timed tracks: feedback compendium
</A></li>
        <LI>Next message: <A HREF="070787.html">[whatwg] Timed tracks: feedback compendium
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70784">[ date ]</a>
              <a href="thread.html#70784">[ thread ]</a>
              <a href="subject.html#70784">[ subject ]</a>
              <a href="author.html#70784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 11 Sep 2010 01:27:48 +0200, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> On Fri, Sep 10, 2010 at 11:00 PM, Philip J&#228;genstedt  
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Thu, 09 Sep 2010 15:08:43 +0200, Silvia Pfeiffer
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  On Wed, Sep 8, 2010 at 9:19 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Fri, 23 Jul 2010, Philip J&#228;genstedt wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If we must have both kind=subtitles and kind=captions, then I'd  
</I>&gt;&gt;&gt;&gt;<i> suggest
</I>&gt;&gt;&gt;&gt;<i> &gt; making the default subtitles, as that is without a doubt the most
</I>&gt;&gt;&gt;&gt;<i> common
</I>&gt;&gt;&gt;&gt;<i> &gt; kind of timed text. Making captions the default only means that most
</I>&gt;&gt;&gt;&gt;<i> &gt; timed text will be mislabeled as being appropriate for the HoH when  
</I>&gt;&gt;&gt;&gt;<i> it
</I>&gt;&gt;&gt;&gt;<i> &gt; is not.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Ok, I've changed the default. However, I'm not fighting this battle  
</I>&gt;&gt;&gt;&gt;<i> if it
</I>&gt;&gt;&gt;&gt;<i> comes up again, and will just change it back if people don't defend
</I>&gt;&gt;&gt;&gt;<i> having
</I>&gt;&gt;&gt;&gt;<i> this as the default. (And then change it back again if the browsers  
</I>&gt;&gt;&gt;&gt;<i> pick
</I>&gt;&gt;&gt;&gt;<i> &quot;subtitles&quot; in their implementations after all, of course.)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Note that captions aren't just for users that are hard-of-hearing.  
</I>&gt;&gt;&gt;&gt;<i> Most
</I>&gt;&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;&gt;<i> the time when I use timed tracks, I want captions, because the reason  
</I>&gt;&gt;&gt;&gt;<i> I
</I>&gt;&gt;&gt;&gt;<i> have them enabled is that I have the sound muted.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hmm, you both have good points. Maybe we should choose something as the
</I>&gt;&gt;&gt;<i> default that is not visible on screen, such as &quot;descriptions&quot;? That  
</I>&gt;&gt;&gt;<i> would
</I>&gt;&gt;&gt;<i> avoid the issue and make it explicit for people who provide captions or
</I>&gt;&gt;&gt;<i> subtitles that they have to make a choice.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If we want people to make an explicit choice, we should make kind a
</I>&gt;&gt;<i> required attribute and make browsers ignore &lt;track&gt;s without it. (I  
</I>&gt;&gt;<i> think
</I>&gt;&gt;<i> subtitles is a good default though.)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think you misunderstood - my explanation probably wasn't very good. I'm
</I>&gt;<i> looking at it from the authoring POV.
</I>&gt;<i>
</I>&gt;<i> What I meant was: if I author a text track that is supposed to be  
</I>&gt;<i> visible on
</I>&gt;<i> screen as the video plays back and if we choose either @kind=subtitle or
</I>&gt;<i> @kind=caption as the default, then I don't have to really think through
</I>&gt;<i> about what I authored as it will be displayed on screen. This invites  
</I>&gt;<i> people
</I>&gt;<i> to not distinguish between whether they authored subtitles or captions,
</I>&gt;<i> which is a bad thing, because a deaf user may then get tracks with the  
</I>&gt;<i> wrong
</I>&gt;<i> label and expectations. If, however, we choose as a default something  
</I>&gt;<i> that
</I>&gt;<i> is not visible on screen, e.g. @kind=description or @kind=metadata, then  
</I>&gt;<i> the
</I>&gt;<i> author who wants their text track to be visible on screen has to give it  
</I>&gt;<i> a
</I>&gt;<i> label, i.e. make an explicit choice between @kind=subtitle and
</I>&gt;<i> @kind=caption. I believe this will lead to more correctly labeled  
</I>&gt;<i> content. I
</I>&gt;<i> am therefore strongly against default labeling with either subtitle or
</I>&gt;<i> caption. We could make @kind a required attribute instead as you are  
</I>&gt;<i> saying.
</I>
OK, I think we mostly agree. Any default will sometimes be wrong, so to  
not have to choose between subtitles and captions, I'd still really prefer  
if specific HoH-tags like &lt;sound&gt; can be shown or hidden depending on user  
preference. I think that would lead to more content actually being written  
for HoH users, as it doesn't requiring maintaining 2 different files.

&gt;&gt;<i>  On Sun, 25 Jul 2010, Silvia Pfeiffer wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> &gt; I think if we have a mixed set of .srt files out there, some of  
</I>&gt;&gt;&gt;&gt;<i> which
</I>&gt;&gt;&gt;&gt;<i> &gt; are old-style srt files (with line numbers, without WebSRT markup)  
</I>&gt;&gt;&gt;&gt;<i> and
</I>&gt;&gt;&gt;&gt;<i> &gt; some are WebSRT files with all the bells and whistles and with
</I>&gt;&gt;&gt;&gt;<i> &gt; additional external CSS files, we create such a mess for that  
</I>&gt;&gt;&gt;&gt;<i> existing
</I>&gt;&gt;&gt;&gt;<i> &gt; ecosystem that we won't find much love.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I'm not sure our goal is to find love here, but in general I would  
</I>&gt;&gt;&gt;&gt;<i> agree
</I>&gt;&gt;&gt;&gt;<i> that it would be better to have one format than two. I don't see why  
</I>&gt;&gt;&gt;&gt;<i> we
</I>&gt;&gt;&gt;&gt;<i> wouldn't just have one format here though. The idea of WebSRT is to be
</I>&gt;&gt;&gt;&gt;<i> sufficiently backwards-compatible that that is possible.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> With &quot;finding love&quot; I referred to your expressed goals:
</I>&gt;&gt;&gt;<i>  - Keep implementation costs for standalone players low.
</I>&gt;&gt;&gt;<i>  - Use existing technologies where appropriate.
</I>&gt;&gt;&gt;<i>  - Try as much as possible to have things Just Work.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> With WebSRT, we will have one label for two different types of files:  
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> old-style SRT files and the new WebSRT files. Just putting a single  
</I>&gt;&gt;&gt;<i> label
</I>&gt;&gt;&gt;<i> on
</I>&gt;&gt;&gt;<i> them doesn't mean it is one format, in particular when most old files  
</I>&gt;&gt;&gt;<i> will
</I>&gt;&gt;&gt;<i> not be conformant to the new label and
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Apart from the encoding, what else about old SRT files wouldn't
</I>&gt;&gt;<i> be conformant?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;font&gt; and &lt;u&gt;
</I>
Oh, right. It would still render though, and I assume one could style &lt;u&gt;  
to actually be underlined if one really wanted to.

&gt;&gt;<i> Does it matter that they aren't conformant if they work
</I>&gt;&gt;<i> anyway?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The ones on the wrong charset won't work, at least not without us
</I>&gt;<i> introducing specific handling for it - which is incidentally specific
</I>&gt;<i> handling that non-Web applications won't get, so they are still left out  
</I>&gt;<i> in
</I>&gt;<i> the rain. Think of a new standalone application that was developed just  
</I>&gt;<i> for
</I>&gt;<i> WebSRT and only deals with UTF-8. It will not deal well with those legacy
</I>&gt;<i> files.
</I>
Requiring UTF-8 and not requiring UTF-8 both has its downsides. I think  
that handling charset as an attribute on &lt;track&gt; isn't very difficult, but  
if there are SRT-incompatible changes for other reasons (e.g. a header)  
then I think we should go back to always requiring UTF-8.

&gt;&gt;<i>  many new files will not play in the software created for the old spec.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As long as we don't add a header, the files will play in most existing
</I>&gt;&gt;<i> software. Apart from parsers that assume that SRT is plain text (and  
</I>&gt;&gt;<i> thus
</I>&gt;&gt;<i> would be unsuitable for much existing SRT content), what kind of  
</I>&gt;&gt;<i> breakage
</I>&gt;&gt;<i> have you found with WebSRT-specific syntax in existing software?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think we need to add a header - and possibly other things in the  
</I>&gt;<i> future.
</I>&gt;<i> Will we forever have the SRT restrictions hold back the introduction of  
</I>&gt;<i> new
</I>&gt;<i> features into WebSRT?
</I>
Yes, if we extend SRT we can't break compatibility. However, it seems that  
all the extensibility needed already exists, as arbitrary tag names are  
handled by the parser.

&gt;&gt;<i>  None is allowed today, but it would be relatively straight-forward to
</I>&gt;&gt;&gt;&gt;<i> introduce metadata before the cues (or even in between the cues). For
</I>&gt;&gt;&gt;&gt;<i> example, we could add defaults:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  *
</I>&gt;&gt;&gt;&gt;<i>  DEFAULTS
</I>&gt;&gt;&gt;&gt;<i>  L:-1 T:50% A:middle
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  00:00:20,000 --&gt; 00:00:24,400
</I>&gt;&gt;&gt;&gt;<i>  Altocumulus clouds occur between six thousand
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  00:00:24,600 --&gt; 00:00:27,800
</I>&gt;&gt;&gt;&gt;<i>  and twenty thousand feet above ground level.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> We could add metadata (here using a different syntax that is similarly
</I>&gt;&gt;&gt;&gt;<i> backwards-compatible with what the spec parser does today):
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   @charset --&gt; win-1252
</I>&gt;&gt;&gt;&gt;<i>  @language --&gt; en-US
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  00:00:20,000 --&gt; 00:00:24,400
</I>&gt;&gt;&gt;&gt;<i>  Altocumulus clouds occur between six thousand
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  00:00:24,600 --&gt; 00:00:27,800
</I>&gt;&gt;&gt;&gt;<i>  and twenty thousand feet above ground level.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> When I read the following:
</I>&gt;&gt;&gt;<i> &quot;A WebSRT file body consists of an optional U+FEFF BYTE ORDER MARK  
</I>&gt;&gt;&gt;<i> (BOM)
</I>&gt;&gt;&gt;<i> character, followed by zero or more WebSRT line
</I>&gt;&gt;&gt;<i> terminators&lt;
</I>&gt;&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>
</I>&gt;&gt;&gt;<i> &gt;,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> followed by zero or more WebSRT
</I>&gt;&gt;&gt;<i> cues&lt;
</I>&gt;&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-cue">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-cue</A>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> separated
</I>&gt;&gt;&gt;<i> from each other by two or more WebSRT line
</I>&gt;&gt;&gt;<i> terminators&lt;
</I>&gt;&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>
</I>&gt;&gt;&gt;<i> &gt;,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> followed by zero or more WebSRT line
</I>&gt;&gt;&gt;<i> terminators&lt;
</I>&gt;&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> .&quot;
</I>&gt;&gt;&gt;<i> then that doesn't imply for me that we can add anything in front of the
</I>&gt;&gt;&gt;<i> WebSRT cues without breaking the spec, or that we can define cues that  
</I>&gt;&gt;&gt;<i> are
</I>&gt;&gt;&gt;<i> not time ranges around the &quot;--&gt;&quot; sign.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The parsing algorithm simply skips over things it doesn't recognize,
</I>&gt;&gt;<i> that's why adding basically any new syntax in between cues wouldn't  
</I>&gt;&gt;<i> break
</I>&gt;&gt;<i> existing WebSRT parsers.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Legacy SRT parsers are not required to do so and even if they are  
</I>&gt;<i> actually
</I>&gt;<i> implemented to deal with this situation, it's a dangerous assumption. We  
</I>&gt;<i> may
</I>&gt;<i> as well write into the syntax description of WebSRT that any line that
</I>&gt;<i> doesn't match the syntax description has to be ignored, which then has  
</I>&gt;<i> the
</I>&gt;<i> effect that every single file in the world is a valid WebSRT file.
</I>
You're right, we shouldn't go around adding stuff before or between the  
cues just because the WebSRT parser allows it unless we also make sure  
that most legacy SRT parsers will handle it.

(Making anything valid makes the syntax useless, though.)

&gt;&gt;<i> Allowing anything as part of the syntax is a bit
</I>&gt;&gt;<i> dangerous though, as most unrecognized stuff between cues are likely
</I>&gt;&gt;<i> broken cues. Validators should warn about it, not treat it as a comment.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I wasn't aware of the effect of the standardised parsing algorithm for
</I>&gt;<i> WebSRT allowing &quot;broken cues&quot; to be dealt with. This will effectively  
</I>&gt;<i> mean
</I>&gt;<i> that a parser will be required to parse all files that it is given from
</I>&gt;<i> beginning to end and discard all non-conformant lines - even if that file
</I>&gt;<i> may be a 100GB large movie file. In this case, I would really recommend  
</I>&gt;<i> that
</I>&gt;<i> we put a magic identifier at the beginning of Web SRT files so we can be
</I>&gt;<i> sure that the intention of the file was to be a WebSRT file. Let's have  
</I>&gt;<i> the
</I>&gt;<i> string &quot;WebSRT&quot; at the beginning of the files.
</I>
That's a good point. I don't suppose it's a huge problem in practice that  
errors can't be detected until EOF, but it's certainly not a desirable  
feature. To maintain some sanity, we probably ought to either require the  
correct MIME type or require the correct magic bytes. From the &lt;video&gt;  
MIME type debacle, I think I slightly prefer magic bytes to be checked by  
the parser.

I've also argued for the inclusion of metadata, so I'm beginning to warm  
up to the idea of adding a header beginning with &quot;WebSRT&quot; or some such. If  
we do this, no existing SRT content can be reused, but we can still try to  
make it possible for WebSRT files to be reusable in desktop applications,  
by keeping the syntax highly compatible so that the same parser can be  
used for both without a mode switch.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070764.html">[whatwg] Timed tracks: feedback compendium
</A></li>
	<LI>Next message: <A HREF="070787.html">[whatwg] Timed tracks: feedback compendium
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70784">[ date ]</a>
              <a href="thread.html#70784">[ thread ]</a>
              <a href="subject.html#70784">[ subject ]</a>
              <a href="author.html#70784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
