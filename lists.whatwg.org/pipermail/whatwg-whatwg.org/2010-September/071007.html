<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [IndexedDB] Simultaneous setVersion from multiple pages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BIndexedDB%5D%20Simultaneous%20setVersion%20from%20multiple%20pages&In-Reply-To=%3C4C9AD98D.7080606%40emsai.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070987.html">
   <LINK REL="Next"  HREF="071008.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [IndexedDB] Simultaneous setVersion from multiple pages</H1>
<!--htdig_noindex-->
    <B>Roger H&#229;gensen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BIndexedDB%5D%20Simultaneous%20setVersion%20from%20multiple%20pages&In-Reply-To=%3C4C9AD98D.7080606%40emsai.net%3E"
       TITLE="[whatwg] [IndexedDB] Simultaneous setVersion from multiple pages">rescator at emsai.net
       </A><BR>
    <I>Wed Sep 22 21:37:33 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070987.html">[whatwg] [IndexedDB] Simultaneous setVersion from multiple pages
</A></li>
        <LI>Next message: <A HREF="071008.html">[whatwg] [IndexedDB] Simultaneous setVersion from multiple pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71007">[ date ]</a>
              <a href="thread.html#71007">[ thread ]</a>
              <a href="subject.html#71007">[ subject ]</a>
              <a href="author.html#71007">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>  On 2010-09-22 21:56, ben turner wrote:
&gt;<i> Sorry folks, this went to the wrong list! Please ignore.
</I>&gt;<i>
</I>&gt;<i> -Ben
</I>&gt;<i>
</I>&gt;<i> On Wed, Sep 22, 2010 at 12:55 PM, ben turner&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bent.mozilla at gmail.com</A>&gt;  wrote:
</I>&gt;&gt;<i> Hi folks,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> While implementing the latest setVersion changes I came across this problem:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Let's say that a site is open in two different windows and each
</I>&gt;&gt;<i> decides to do a setVersion request at the same time. Only one of them
</I>&gt;&gt;<i> can win, obviously, and the other must end up calling close() on
</I>&gt;&gt;<i> itself or the setVersion transaction will never run (and all database
</I>&gt;&gt;<i> activity will basically hang at that point).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jonas and I decided that this situation should result in the losing
</I>&gt;&gt;<i> database's request having its error handler called with DEADLOCK_ERR.
</I>&gt;&gt;<i> Does that sound reasonable to everyone?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Ben
</I>&gt;&gt;<i>
</I>
Hehe! That's ok.
But to to make a suggestion, may I say that simply returning a &quot;busy / 
please try again&quot; error would work just as fine? Each open window are 
acting as if they are two different connections, so treat them as such. 
What does other DB's like MySQL do? My guess is a busy/try again error 
right?



-- 
Roger &quot;Rescator&quot; H&#229;gensen.
Freelancer - <A HREF="http://EmSai.net/">http://EmSai.net/</A>


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070987.html">[whatwg] [IndexedDB] Simultaneous setVersion from multiple pages
</A></li>
	<LI>Next message: <A HREF="071008.html">[whatwg] [IndexedDB] Simultaneous setVersion from multiple pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#71007">[ date ]</a>
              <a href="thread.html#71007">[ thread ]</a>
              <a href="subject.html#71007">[ subject ]</a>
              <a href="author.html#71007">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
