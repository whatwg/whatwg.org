<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Timed tracks: feedback compendium
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timed%20tracks%3A%20feedback%20compendium&In-Reply-To=%3CAANLkTi%3DGuKTpfEfmwTYVT8pp82Z9uQf_c-OJ9hkHy_xo%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070752.html">
   <LINK REL="Next"  HREF="070784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Timed tracks: feedback compendium</H1>
<!--htdig_noindex-->
    <B>Silvia Pfeiffer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timed%20tracks%3A%20feedback%20compendium&In-Reply-To=%3CAANLkTi%3DGuKTpfEfmwTYVT8pp82Z9uQf_c-OJ9hkHy_xo%40mail.gmail.com%3E"
       TITLE="[whatwg] Timed tracks: feedback compendium">silviapfeiffer1 at gmail.com
       </A><BR>
    <I>Fri Sep 10 16:27:48 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070752.html">[whatwg] Timed tracks: feedback compendium
</A></li>
        <LI>Next message: <A HREF="070784.html">[whatwg] Timed tracks: feedback compendium
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70764">[ date ]</a>
              <a href="thread.html#70764">[ thread ]</a>
              <a href="subject.html#70764">[ subject ]</a>
              <a href="author.html#70764">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Sep 10, 2010 at 11:00 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:

&gt;<i> On Thu, 09 Sep 2010 15:08:43 +0200, Silvia Pfeiffer
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>  On Wed, Sep 8, 2010 at 9:19 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Fri, 23 Jul 2010, Philip J&#228;genstedt wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If we must have both kind=subtitles and kind=captions, then I'd suggest
</I>&gt;&gt;&gt;<i> &gt; making the default subtitles, as that is without a doubt the most
</I>&gt;&gt;&gt;<i> common
</I>&gt;&gt;&gt;<i> &gt; kind of timed text. Making captions the default only means that most
</I>&gt;&gt;&gt;<i> &gt; timed text will be mislabeled as being appropriate for the HoH when it
</I>&gt;&gt;&gt;<i> &gt; is not.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Ok, I've changed the default. However, I'm not fighting this battle if it
</I>&gt;&gt;&gt;<i> comes up again, and will just change it back if people don't defend
</I>&gt;&gt;&gt;<i> having
</I>&gt;&gt;&gt;<i> this as the default. (And then change it back again if the browsers pick
</I>&gt;&gt;&gt;<i> &quot;subtitles&quot; in their implementations after all, of course.)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Note that captions aren't just for users that are hard-of-hearing. Most
</I>&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;<i> the time when I use timed tracks, I want captions, because the reason I
</I>&gt;&gt;&gt;<i> have them enabled is that I have the sound muted.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Hmm, you both have good points. Maybe we should choose something as the
</I>&gt;&gt;<i> default that is not visible on screen, such as &quot;descriptions&quot;? That would
</I>&gt;&gt;<i> avoid the issue and make it explicit for people who provide captions or
</I>&gt;&gt;<i> subtitles that they have to make a choice.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If we want people to make an explicit choice, we should make kind a
</I>&gt;<i> required attribute and make browsers ignore &lt;track&gt;s without it. (I think
</I>&gt;<i> subtitles is a good default though.)
</I>


I think you misunderstood - my explanation probably wasn't very good. I'm
looking at it from the authoring POV.

What I meant was: if I author a text track that is supposed to be visible on
screen as the video plays back and if we choose either @kind=subtitle or
@kind=caption as the default, then I don't have to really think through
about what I authored as it will be displayed on screen. This invites people
to not distinguish between whether they authored subtitles or captions,
which is a bad thing, because a deaf user may then get tracks with the wrong
label and expectations. If, however, we choose as a default something that
is not visible on screen, e.g. @kind=description or @kind=metadata, then the
author who wants their text track to be visible on screen has to give it a
label, i.e. make an explicit choice between @kind=subtitle and
@kind=caption. I believe this will lead to more correctly labeled content. I
am therefore strongly against default labeling with either subtitle or
caption. We could make @kind a required attribute instead as you are saying.



&gt;<i>
</I>&gt;<i>  &gt; - Use existing technologies where appropriate.
</I>&gt;&gt;&gt;<i> &gt; [...]
</I>&gt;&gt;&gt;<i> &gt; &gt; - Try as much as possible to have things Just Work.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; I think by specifying a standalone cue text parser WebSRT fails on
</I>&gt;&gt;&gt;<i> these
</I>&gt;&gt;&gt;<i> &gt; counts compared to reusing the HTML fragment parsing algorithm for
</I>&gt;&gt;&gt;<i> &gt; parsing cue text.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> HTML parsing is a disaster zone that we should avoid at all costs, IMHO.
</I>&gt;&gt;&gt;<i> I
</I>&gt;&gt;&gt;<i> certainly don't think it would make any sense to propagate that format
</I>&gt;&gt;&gt;<i> into anywhere where we don't absolutely have to propagate it.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> A WebSRT authoring application does not have to create all markup that a
</I>&gt;&gt;<i> HTML fragment parser supports. It would only use what it sees necessary
</I>&gt;&gt;<i> for
</I>&gt;&gt;<i> the use cases that it targets.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Browsers are WebSRT players that will consume the HTML fragments created
</I>&gt;&gt;<i> by
</I>&gt;&gt;<i> such authoring applications.
</I>&gt;&gt;<i> In addition, browsers will also be able to consume richer HTML fragments
</I>&gt;&gt;<i> that were created as time-aligned overlays for video  with more fancy
</I>&gt;&gt;<i> styling by Web developers. Something like
</I>&gt;&gt;<i> <A HREF="http://people.mozilla.com/~prouget/demos/vp8/&lt;http://people.mozilla.com/%7Eprouget/demos/vp8/">http://people.mozilla.com/~prouget/demos/vp8/&lt;http://people.mozilla.com/%7Eprouget/demos/vp8/</A>&gt;(you need Firefox for it).
</I>&gt;&gt;<i> Where it says &quot;This movie will eat your planet&quot;, you could have fancy
</I>&gt;&gt;<i> timed
</I>&gt;&gt;<i> text.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Just as much as there is a need for basic captions and subtitles, there is
</I>&gt;&gt;<i> also a need for fancy time-aligned HTML fragments. It would be very
</I>&gt;&gt;<i> strange
</I>&gt;&gt;<i> if, in order to get that working, people would need to use the &quot;metadata&quot;
</I>&gt;&gt;<i> part of the WebSRT spec.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is it likely that HTML in cues alone will be enough to do all the fancy
</I>&gt;<i> things that people might want?
</I>

I would really want to try and live without script in cues, which means: no
canvas. But since we have svg, that should be fine. CSS would be required,
too.



&gt;<i> If they need scripts anyway, I'm very happy
</I>&gt;<i> to force them to use metadata, as it also makes the browser implementation
</I>&gt;<i> simpler (that's my opinion of the suggestions made so far, anyway).
</I>

I suppose we can start with having people go that way for now and later when
we see that becoming the norm do something about it in a &quot;v2&quot;.



&gt;<i>
</I>&gt;<i>  On Sun, 25 Jul 2010, Silvia Pfeiffer wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; I think if we have a mixed set of .srt files out there, some of which
</I>&gt;&gt;&gt;<i> &gt; are old-style srt files (with line numbers, without WebSRT markup) and
</I>&gt;&gt;&gt;<i> &gt; some are WebSRT files with all the bells and whistles and with
</I>&gt;&gt;&gt;<i> &gt; additional external CSS files, we create such a mess for that existing
</I>&gt;&gt;&gt;<i> &gt; ecosystem that we won't find much love.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm not sure our goal is to find love here, but in general I would agree
</I>&gt;&gt;&gt;<i> that it would be better to have one format than two. I don't see why we
</I>&gt;&gt;&gt;<i> wouldn't just have one format here though. The idea of WebSRT is to be
</I>&gt;&gt;&gt;<i> sufficiently backwards-compatible that that is possible.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> With &quot;finding love&quot; I referred to your expressed goals:
</I>&gt;&gt;<i>  - Keep implementation costs for standalone players low.
</I>&gt;&gt;<i>  - Use existing technologies where appropriate.
</I>&gt;&gt;<i>  - Try as much as possible to have things Just Work.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> With WebSRT, we will have one label for two different types of files: the
</I>&gt;&gt;<i> old-style SRT files and the new WebSRT files. Just putting a single label
</I>&gt;&gt;<i> on
</I>&gt;&gt;<i> them doesn't mean it is one format, in particular when most old files will
</I>&gt;&gt;<i> not be conformant to the new label and
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Apart from the encoding, what else about old SRT files wouldn't
</I>&gt;<i> be conformant?
</I>

&lt;font&gt; and &lt;u&gt;



&gt;<i> Does it matter that they aren't conformant if they work
</I>&gt;<i> anyway?
</I>

The ones on the wrong charset won't work, at least not without us
introducing specific handling for it - which is incidentally specific
handling that non-Web applications won't get, so they are still left out in
the rain. Think of a new standalone application that was developed just for
WebSRT and only deals with UTF-8. It will not deal well with those legacy
files.



&gt;<i>  many new files will not play in the software created for the old spec.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> As long as we don't add a header, the files will play in most existing
</I>&gt;<i> software. Apart from parsers that assume that SRT is plain text (and thus
</I>&gt;<i> would be unsuitable for much existing SRT content), what kind of breakage
</I>&gt;<i> have you found with WebSRT-specific syntax in existing software?
</I>&gt;<i>
</I>
I think we need to add a header - and possibly other things in the future.
Will we forever have the SRT restrictions hold back the introduction of new
features into WebSRT?



&gt;<i>  None is allowed today, but it would be relatively straight-forward to
</I>&gt;&gt;&gt;<i> introduce metadata before the cues (or even in between the cues). For
</I>&gt;&gt;&gt;<i> example, we could add defaults:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  *
</I>&gt;&gt;&gt;<i>  DEFAULTS
</I>&gt;&gt;&gt;<i>  L:-1 T:50% A:middle
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  00:00:20,000 --&gt; 00:00:24,400
</I>&gt;&gt;&gt;<i>  Altocumulus clouds occur between six thousand
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  00:00:24,600 --&gt; 00:00:27,800
</I>&gt;&gt;&gt;<i>  and twenty thousand feet above ground level.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We could add metadata (here using a different syntax that is similarly
</I>&gt;&gt;&gt;<i> backwards-compatible with what the spec parser does today):
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   @charset --&gt; win-1252
</I>&gt;&gt;&gt;<i>  @language --&gt; en-US
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  00:00:20,000 --&gt; 00:00:24,400
</I>&gt;&gt;&gt;<i>  Altocumulus clouds occur between six thousand
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  00:00:24,600 --&gt; 00:00:27,800
</I>&gt;&gt;&gt;<i>  and twenty thousand feet above ground level.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> When I read the following:
</I>&gt;&gt;<i> &quot;A WebSRT file body consists of an optional U+FEFF BYTE ORDER MARK (BOM)
</I>&gt;&gt;<i> character, followed by zero or more WebSRT line
</I>&gt;&gt;<i> terminators&lt;
</I>&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>
</I>&gt;&gt;<i> &gt;,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> followed by zero or more WebSRT
</I>&gt;&gt;<i> cues&lt;
</I>&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-cue">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-cue</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> separated
</I>&gt;&gt;<i> from each other by two or more WebSRT line
</I>&gt;&gt;<i> terminators&lt;
</I>&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>
</I>&gt;&gt;<i> &gt;,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> followed by zero or more WebSRT line
</I>&gt;&gt;<i> terminators&lt;
</I>&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator">http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#websrt-line-terminator</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> .&quot;
</I>&gt;&gt;<i> then that doesn't imply for me that we can add anything in front of the
</I>&gt;&gt;<i> WebSRT cues without breaking the spec, or that we can define cues that are
</I>&gt;&gt;<i> not time ranges around the &quot;--&gt;&quot; sign.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The parsing algorithm simply skips over things it doesn't recognize,
</I>&gt;<i> that's why adding basically any new syntax in between cues wouldn't break
</I>&gt;<i> existing WebSRT parsers.
</I>

Legacy SRT parsers are not required to do so and even if they are actually
implemented to deal with this situation, it's a dangerous assumption. We may
as well write into the syntax description of WebSRT that any line that
doesn't match the syntax description has to be ignored, which then has the
effect that every single file in the world is a valid WebSRT file.

Allowing anything as part of the syntax is a bit
&gt;<i> dangerous though, as most unrecognized stuff between cues are likely
</I>&gt;<i> broken cues. Validators should warn about it, not treat it as a comment.
</I>&gt;<i>
</I>
I wasn't aware of the effect of the standardised parsing algorithm for
WebSRT allowing &quot;broken cues&quot; to be dealt with. This will effectively mean
that a parser will be required to parse all files that it is given from
beginning to end and discard all non-conformant lines - even if that file
may be a 100GB large movie file. In this case, I would really recommend that
we put a magic identifier at the beginning of Web SRT files so we can be
sure that the intention of the file was to be a WebSRT file. Let's have the
string &quot;WebSRT&quot; at the beginning of the files.



&gt;<i> Not being convinced we need anything more than simple key-value headers in
</I>&gt;<i> a header, I still looked at the options for comments:
</I>&gt;<i>
</I>&gt;<i> Making any line with a --&gt; in it be a comment would hide a lot of broken
</I>&gt;<i> cues from validators, so I think we shouldn't do this.
</I>&gt;<i>
</I>&gt;<i> ; appears at the beginning of lines in 15/10000 files and most don't look
</I>&gt;<i> like they're intended as comments.
</I>&gt;<i>
</I>&gt;<i> # appears at the beginning of lines in 244/10000 files and most don't look
</I>&gt;<i> like they're intended as comments.
</I>&gt;<i>
</I>&gt;<i> /* only appears in 3/10000 files, so CSS-style comments might work, but
</I>&gt;<i> does add some complexity
</I>&gt;<i>
</I>&gt;<i> // appears at the beginning of lines in 5/10000 files and most look like
</I>&gt;<i> that *are* intended as comments or are garbage, so it should work.
</I>&gt;<i>
</I>&gt;<i> (data from OpenSubtitles sample)
</I>

This convinces me only more that we should break with SRT history.


Cheers,
Silvia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100911/92a9df11/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100911/92a9df11/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070752.html">[whatwg] Timed tracks: feedback compendium
</A></li>
	<LI>Next message: <A HREF="070784.html">[whatwg] Timed tracks: feedback compendium
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70764">[ date ]</a>
              <a href="thread.html#70764">[ thread ]</a>
              <a href="subject.html#70764">[ subject ]</a>
              <a href="author.html#70764">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
