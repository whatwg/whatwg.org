<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebWorkers vs. Threads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebWorkers%20vs.%20Threads&In-Reply-To=%3C11e306600808142021m23c0bf13y7c42a7f0a3b20c1f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="058034.html">
   <LINK REL="Next"  HREF="058027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebWorkers vs. Threads</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebWorkers%20vs.%20Threads&In-Reply-To=%3C11e306600808142021m23c0bf13y7c42a7f0a3b20c1f%40mail.gmail.com%3E"
       TITLE="[whatwg] WebWorkers vs. Threads">robert at ocallahan.org
       </A><BR>
    <I>Thu Aug 14 20:21:04 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="058034.html">[whatwg] WebWorkers vs. Threads
</A></li>
        <LI>Next message: <A HREF="058027.html">[whatwg] WebWorkers vs. Threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58043">[ date ]</a>
              <a href="thread.html#58043">[ thread ]</a>
              <a href="subject.html#58043">[ subject ]</a>
              <a href="author.html#58043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Aug 15, 2008 at 7:54 AM, Maksim Orlovich &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mo85 at cornell.edu</A>&gt; wrote:

&gt;<i> It's actually a lot worse in this case, since the ECMAScript runtime must
</I>&gt;<i> be able to enforce the sandbox properly even in face of incorrectly
</I>&gt;<i> threaded programs.
</I>&gt;<i> In particular, if two threads are accessing properties of the same object
</I>&gt;<i> at the same time w/o proper locking, the invariants of the property map
</I>&gt;<i> data structure should not be violated, which means perhaps the most basic
</I>&gt;<i> and hottest data structure in the language runtime has to be thread-safe
</I>&gt;<i> (or, at the very least guarantee that whatever happens won't result in a
</I>&gt;<i> crash). This is a heavy burden both on the performance and complexity of
</I>&gt;<i> the implementation.  And, actually, all of the above would apply to
</I>&gt;<i> concurrent DOM calls, too.
</I>&gt;<i>
</I>
That is a very good point in general; defining and enforcing language
semantics in the presence of data races is very hard. Just check out the
&quot;Java memory model&quot; work.

For JS in particular, though, it's possible to be fast and thread-safe ---
Spidermonkey is. I'm not saying it's a good idea :-).

In contrast, a worker implementation, as far I can see, just requires
&gt;<i> thread safety of the message passing implementation --- hardly a
</I>&gt;<i> challenge; and somewhat trickier but more localized safety of the GC heap.
</I>&gt;<i>
</I>
AFAIK the workers use logically separate heaps, so the implementation can
physically separate the heaps if necessary.

Rob
-- 
&quot;He was pierced for our transgressions, he was crushed for our iniquities;
the punishment that brought us peace was upon him, and by his wounds we are
healed. We all, like sheep, have gone astray, each of us has turned to his
own way; and the LORD has laid on him the iniquity of us all.&quot; [Isaiah
53:5-6]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080815/c5c875aa/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080815/c5c875aa/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="058034.html">[whatwg] WebWorkers vs. Threads
</A></li>
	<LI>Next message: <A HREF="058027.html">[whatwg] WebWorkers vs. Threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58043">[ date ]</a>
              <a href="thread.html#58043">[ thread ]</a>
              <a href="subject.html#58043">[ subject ]</a>
              <a href="author.html#58043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
