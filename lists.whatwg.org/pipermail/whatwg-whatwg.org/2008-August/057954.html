<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Active workers when user leaves the page
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Active%20workers%20when%20user%20leaves%20the%20page&In-Reply-To=%3CEB66F66AA6F30E409F3A8243BA49DCBA72BB56%40EXCHANGE.Betgenius.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="057953.html">
   <LINK REL="Next"  HREF="057955.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Active workers when user leaves the page</H1>
<!--htdig_noindex-->
    <B>Martin Ellis</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Active%20workers%20when%20user%20leaves%20the%20page&In-Reply-To=%3CEB66F66AA6F30E409F3A8243BA49DCBA72BB56%40EXCHANGE.Betgenius.local%3E"
       TITLE="[whatwg] Active workers when user leaves the page">martin at betgenius.com
       </A><BR>
    <I>Fri Aug  8 16:14:30 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="057953.html">[whatwg] Active workers when user leaves the page
</A></li>
        <LI>Next message: <A HREF="057955.html">[whatwg] CanvasRenderingContext2D::createPattern and partially	loaded images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57954">[ date ]</a>
              <a href="thread.html#57954">[ thread ]</a>
              <a href="subject.html#57954">[ subject ]</a>
              <a href="author.html#57954">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

 

Could it not be set that a there is a maximum execution time for any workers that are still active, definable by the browser but with a suggested value of say 1000milliseconds in the spec, any processing that takes longer than this is killed, but gives the option for well built scripts and cleanup processes to run gracefully.

 

Martin

 

From: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A> [mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A>] On Behalf Of Robert O'Callahan
Sent: 08 August 2008 23:30
To: Jonas Sicking
Cc: whatwg
Subject: Re: [whatwg] Active workers when user leaves the page

 

On Sat, Aug 9, 2008 at 7:01 AM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:

	I do want to be agressive with killing workers when the user leaves a page since that makes for better user experience. However I'm also worried about stopping scripts halfway through breaking things and leaving the site with half-finished operations that are stored in databases or localStorage.


Aggressive killing of workers without warning when the user navigates away would actually be a good feature.

There are various reasons outside anyone's control that a worker might die abruptly. For example, power failure, browser crash, or &quot;slow-script&quot; style timeout. Applications need to be able to handle those cases, for example by using database transactions or careful use of atomic operations. But that's hard to test and authors probably won't design or test well for those cases since they're relatively uncommon. Expanding abrupt termination scenarios to include navigate-away makes abrupt termination much easier to test, forces authors to design for it early, and will ultimately simplify the application design by reducing the different ways a worker can terminate.

This may sound a bit radical, but it's not a new idea. It's a principle sometimes called &quot;crash-only software&quot;. See e.g. <A HREF="http://www.usenix.org/events/hotos03/tech/full_papers/candea/candea_html/">http://www.usenix.org/events/hotos03/tech/full_papers/candea/candea_html/</A>


Rob
-- 
&quot;He was pierced for our transgressions, he was crushed for our iniquities; the punishment that brought us peace was upon him, and by his wounds we are healed. We all, like sheep, have gone astray, each of us has turned to his own way; and the LORD has laid on him the iniquity of us all.&quot; [Isaiah 53:5-6]


-- 
This message has been scanned for viruses and 
dangerous content by MailScanner &lt;<A HREF="http://www.mailscanner.info/">http://www.mailscanner.info/</A>&gt; , and is 
believed to be clean. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080809/76f61555/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080809/76f61555/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="057953.html">[whatwg] Active workers when user leaves the page
</A></li>
	<LI>Next message: <A HREF="057955.html">[whatwg] CanvasRenderingContext2D::createPattern and partially	loaded images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57954">[ date ]</a>
              <a href="thread.html#57954">[ thread ]</a>
              <a href="subject.html#57954">[ subject ]</a>
              <a href="author.html#57954">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
