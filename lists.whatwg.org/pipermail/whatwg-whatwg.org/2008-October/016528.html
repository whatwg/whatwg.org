<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] setting canvas colors as array
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20setting%20canvas%20colors%20as%20array&In-Reply-To=%3C1B9C3AE1-D066-411B-AA59-15E3FA85561E%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016516.html">
   <LINK REL="Next"  HREF="016530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] setting canvas colors as array</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20setting%20canvas%20colors%20as%20array&In-Reply-To=%3C1B9C3AE1-D066-411B-AA59-15E3FA85561E%40apple.com%3E"
       TITLE="[whatwg] setting canvas colors as array">mjs at apple.com
       </A><BR>
    <I>Sat Oct  4 14:53:43 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="016516.html">[whatwg] setting canvas colors as array
</A></li>
        <LI>Next message: <A HREF="016530.html">[whatwg] setting canvas colors as array
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16528">[ date ]</a>
              <a href="thread.html#16528">[ thread ]</a>
              <a href="subject.html#16528">[ subject ]</a>
              <a href="author.html#16528">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Oct 4, 2008, at 3:19 AM, Oliver Hunt wrote:

&gt;<i>
</I>&gt;<i> On Oct 4, 2008, at 3:07 AM, Anne van Kesteren wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Sat, 04 Oct 2008 01:37:53 +0200, Oliver Hunt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">oliver at apple.com</A>&gt;  
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;<i> &lt;thinking out loud&gt;
</I>&gt;&gt;&gt;<i> Just had a thought (no idea how original) -- how about if  
</I>&gt;&gt;&gt;<i> fillStyle were able to accept a 3 or 4 number array? eg. fillStyle  
</I>&gt;&gt;&gt;<i> = [0, 0.3, 0.6, 1.0] ?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That might work well if people are using arrays as vectors/colours
</I>&gt;&gt;&gt;<i> &lt;/thinking out loud&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Philip Taylor suggested that a while back:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2007-April/010939.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2007-April/010939.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ian Hickson replied only to the added value of returning an array  
</I>&gt;&gt;<i> rather than a string:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2007-May/011268.html">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2007-May/011268.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (Which at this point is unfortunately no longer possible I'm afraid.)
</I>&gt;<i>
</I>&gt;<i> Ah, I was not meaning to in any way suggest that we change the type  
</I>&gt;<i> of fillStyle/strokeStyle, merely to overload the assignment  
</I>&gt;<i> behaviour to allow arrays to be used -- although i'm not sure  
</I>&gt;<i> whether there is a clean way to represent this in the idl  
</I>&gt;<i> definitions in the spec.
</I>&gt;<i>
</I>&gt;<i> Basically i would expect
</I>&gt;<i> context.fillStyle = [1,1,1,0.5]
</I>&gt;<i> alert(context.fillStyle);
</I>&gt;<i> to produce an output akin to rgba(255,255,255,0.5) or some such.
</I>&gt;<i>
</I>&gt;<i> The goal is simply to make a very common idiom (computed colours) be  
</I>&gt;<i> much more concise.  As I have said previously webkit also provides a  
</I>&gt;<i> setFillColor(r,g,b,a) method which might be preferable? (the problem  
</I>&gt;<i> with this kind of approach is that it means that there are two  
</I>&gt;<i> distinct methods to set the active colour :-/ )
</I>
setFillColor avoid the need for allocation entirely in all cases.

We could also consider letting fillStyle take a number to be  
interpreted as a 32-bit RGBA value, since modern JS engines can do  
math and masking faster than string operations or array allocation.  
But the broken out setFillStyle version seems like it might still be  
more of a perf win in many cases.

  - Maciej


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016516.html">[whatwg] setting canvas colors as array
</A></li>
	<LI>Next message: <A HREF="016530.html">[whatwg] setting canvas colors as array
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16528">[ date ]</a>
              <a href="thread.html#16528">[ thread ]</a>
              <a href="subject.html#16528">[ subject ]</a>
              <a href="author.html#16528">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
