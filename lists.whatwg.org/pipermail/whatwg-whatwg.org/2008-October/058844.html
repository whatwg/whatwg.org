<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Simplified WebSockets
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Simplified%20WebSockets&In-Reply-To=%3C48F2CF51.4070807%40arc.net.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016570.html">
   <LINK REL="Next"  HREF="059181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Simplified WebSockets</H1>
<!--htdig_noindex-->
    <B>Shannon</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Simplified%20WebSockets&In-Reply-To=%3C48F2CF51.4070807%40arc.net.au%3E"
       TITLE="[whatwg] Simplified WebSockets">shannon at arc.net.au
       </A><BR>
    <I>Sun Oct 12 21:32:17 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="016570.html">[whatwg] document.cookies
</A></li>
        <LI>Next message: <A HREF="059181.html">[whatwg] Simplified WebSockets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58844">[ date ]</a>
              <a href="thread.html#58844">[ thread ]</a>
              <a href="subject.html#58844">[ subject ]</a>
              <a href="author.html#58844">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I have written an implementation of a websocket client and server for 
testing my proposed protocol. Testing in the real world has provided me 
some good information on what works and what doesn't, particularly in 
regards to relaying through public anonymous proxies. Those wishing to 
experiment with variations of the protocol or with particular services 
may find these scripts useful.

<A HREF="http://www.warriorhut.org/whatwg/">http://www.warriorhut.org/whatwg/</A>

The scripts connect to each other with a lightweight HTTP handshake then 
asynchronously send a user-defined amount of data. The purpose is to see 
how common HTTP proxies handle asynchronous connections (with client and 
server sending simultaneously). These scripts are not an implementation 
of the current draft spec, but an alternative proposal I raised earlier 
due to what I see as major design flaws in the draft spec.

It should be noted that the spec outlined does not use the onmessage 
interface proposed in the WHATWG draft spec, but rather a more standard 
read() and write() as implemented by most other languages (ie, 
websocket.read(512) returns up to 512 bytes of buffered data from the 
socket). This will make porting traditional client code from other 
languages much easier.

The underlying design principles behind this proposal are:

* Don't send author defined data (except for host) to any service that 
has not yet identified itself as a websocket.
* Do not frame, encode or restrict any data sent after the websocket 
upgrade. It should be possible at this point for any type of server to 
take over the connection transparently.
* Do not require any headers not absolutely essential to creating a 
connection. Let the client and server handle cookies, origin or 
authentication as the author chooses.
* Do not hardcode port numbers, this is not really as secure or useful 
as the spec authors seem to believe (port 81 is quite commonly used as a 
webmail port for example).

I have not addressed TLS as this is difficult to program. In theory 
though it should only require Upgrade: TLS in place of, or prior to, the 
Upgrade: Websocket header.

Shannon

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016570.html">[whatwg] document.cookies
</A></li>
	<LI>Next message: <A HREF="059181.html">[whatwg] Simplified WebSockets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58844">[ date ]</a>
              <a href="thread.html#58844">[ thread ]</a>
              <a href="subject.html#58844">[ subject ]</a>
              <a href="author.html#58844">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
