<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Question about DOMImplementation.createHTMLDocument()	specifications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Question%20about%20DOMImplementation.createHTMLDocument%28%29%0A%09specifications&In-Reply-To=%3C518C814E.4050308%40tokom.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081864.html">
   <LINK REL="Next"  HREF="081833.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Question about DOMImplementation.createHTMLDocument()	specifications</H1>
<!--htdig_noindex-->
    <B>Thomas F&#233;tiveau</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Question%20about%20DOMImplementation.createHTMLDocument%28%29%0A%09specifications&In-Reply-To=%3C518C814E.4050308%40tokom.fr%3E"
       TITLE="[whatwg] Question about DOMImplementation.createHTMLDocument()	specifications">tfetiveau at tokom.fr
       </A><BR>
    <I>Thu May  9 22:10:38 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081864.html">[whatwg] Notifications: in workers
</A></li>
        <LI>Next message: <A HREF="081833.html">[whatwg] Question about DOMImplementation.createHTMLDocument()	specifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39559">[ date ]</a>
              <a href="thread.html#39559">[ thread ]</a>
              <a href="subject.html#39559">[ subject ]</a>
              <a href="author.html#39559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

There is something unclear to me in the current HTML spec:

- The &quot;initial&quot; insertion mode of the tree construction stage specifies 
to add a doctype to the associated document when a doctype token shows 
up: 
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#the-initial-insertion-mode">http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#the-initial-insertion-mode</A>

- However the document object has already been built at this stage and 
is an HTML document, thus created by DOMImplementation.createHTMLDocument().

   But the specification of this methods says :

&gt;<i> The |createHTMLDocument(title)| method must run these steps:
</I>&gt;<i>
</I>&gt;<i> 1.
</I>&gt;<i>
</I>&gt;<i>     Let doc be a new document
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-document">http://dom.spec.whatwg.org/#concept-document</A>&gt; that is an HTML
</I>&gt;<i>     document &lt;<A HREF="http://dom.spec.whatwg.org/#html-document">http://dom.spec.whatwg.org/#html-document</A>&gt;.
</I>&gt;<i>
</I>&gt;<i> 2.
</I>&gt;<i>
</I>&gt;<i>     Set doc's content type
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-document-content-type">http://dom.spec.whatwg.org/#concept-document-content-type</A>&gt; to
</I>&gt;<i>     &quot;|text/html|&quot;.
</I>&gt;<i>
</I>&gt;<i> 3.
</I>&gt;<i>
</I>&gt;<i>     Create a doctype &lt;<A HREF="http://dom.spec.whatwg.org/#concept-doctype">http://dom.spec.whatwg.org/#concept-doctype</A>&gt;,
</I>&gt;<i>     with &quot;|html|&quot; as its name
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-doctype-name">http://dom.spec.whatwg.org/#concept-doctype-name</A>&gt; and with its
</I>&gt;<i>     node document &lt;<A HREF="http://dom.spec.whatwg.org/#concept-node-document">http://dom.spec.whatwg.org/#concept-node-document</A>&gt;
</I>&gt;<i>     set to doc. Append
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-node-append">http://dom.spec.whatwg.org/#concept-node-append</A>&gt; the newly
</I>&gt;<i>     created node to doc.
</I>&gt;<i>
</I>&gt;<i> 4.
</I>&gt;<i>
</I>&gt;<i>     Create an |html| element in the HTML namespace
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#html-namespace">http://dom.spec.whatwg.org/#html-namespace</A>&gt;, and append
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-node-append">http://dom.spec.whatwg.org/#concept-node-append</A>&gt; it to doc.
</I>&gt;<i>
</I>&gt;<i> 5.
</I>&gt;<i>
</I>&gt;<i>     Create a |head| element in the HTML namespace
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#html-namespace">http://dom.spec.whatwg.org/#html-namespace</A>&gt;, and append
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-node-append">http://dom.spec.whatwg.org/#concept-node-append</A>&gt; it to the |html|
</I>&gt;<i>     element created in the previous step.
</I>&gt;<i>
</I>&gt;<i> 6.
</I>&gt;<i>
</I>&gt;<i>     If the title argument is not omitted:
</I>&gt;<i>
</I>&gt;<i>     1.
</I>&gt;<i>
</I>&gt;<i>         Create a |title| element in the HTML namespace
</I>&gt;<i>         &lt;<A HREF="http://dom.spec.whatwg.org/#html-namespace">http://dom.spec.whatwg.org/#html-namespace</A>&gt;, and append
</I>&gt;<i>         &lt;<A HREF="http://dom.spec.whatwg.org/#concept-node-append">http://dom.spec.whatwg.org/#concept-node-append</A>&gt; it to the
</I>&gt;<i>         |head| element created in the previous step.
</I>&gt;<i>
</I>&gt;<i>     2.
</I>&gt;<i>
</I>&gt;<i>         Create a |Text &lt;<A HREF="http://dom.spec.whatwg.org/#text">http://dom.spec.whatwg.org/#text</A>&gt;| node
</I>&gt;<i>         &lt;<A HREF="http://dom.spec.whatwg.org/#concept-node">http://dom.spec.whatwg.org/#concept-node</A>&gt;, set its data
</I>&gt;<i>         &lt;<A HREF="http://dom.spec.whatwg.org/#concept-cd-data">http://dom.spec.whatwg.org/#concept-cd-data</A>&gt; to title (which
</I>&gt;<i>         could be the empty string), and append
</I>&gt;<i>         &lt;<A HREF="http://dom.spec.whatwg.org/#concept-node-append">http://dom.spec.whatwg.org/#concept-node-append</A>&gt; it to the
</I>&gt;<i>         |title| element created in the previous step.
</I>&gt;<i>
</I>&gt;<i> 7.
</I>&gt;<i>
</I>&gt;<i>     Create a |body| element in the HTML namespace
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#html-namespace">http://dom.spec.whatwg.org/#html-namespace</A>&gt;, and append
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-node-append">http://dom.spec.whatwg.org/#concept-node-append</A>&gt; it to the |html|
</I>&gt;<i>     element created in the earlier step.
</I>&gt;<i>
</I>&gt;<i> 8.
</I>&gt;<i>
</I>&gt;<i>     doc's origin
</I>&gt;<i>     &lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#origin">http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#origin</A>&gt;
</I>&gt;<i>     is an alias
</I>&gt;<i>     &lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#concept-origin-alias">http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#concept-origin-alias</A>&gt;
</I>&gt;<i>     to the origin
</I>&gt;<i>     &lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#origin">http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#origin</A>&gt;
</I>&gt;<i>     of the context object
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#context-object">http://dom.spec.whatwg.org/#context-object</A>&gt;'s associated document
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-document">http://dom.spec.whatwg.org/#concept-document</A>&gt;, and doc's
</I>&gt;<i>     effective script origin
</I>&gt;<i>     &lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#effective-script-origin">http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#effective-script-origin</A>&gt;
</I>&gt;<i>     is an alias
</I>&gt;<i>     &lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#concept-origin-alias">http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#concept-origin-alias</A>&gt;
</I>&gt;<i>     to the effective script origin
</I>&gt;<i>     &lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#effective-script-origin">http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#effective-script-origin</A>&gt;
</I>&gt;<i>     of the context object
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#context-object">http://dom.spec.whatwg.org/#context-object</A>&gt;'s associated document
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#concept-document">http://dom.spec.whatwg.org/#concept-document</A>&gt;. [HTML]
</I>&gt;<i>     &lt;<A HREF="http://dom.spec.whatwg.org/#refsHTML">http://dom.spec.whatwg.org/#refsHTML</A>&gt;
</I>&gt;<i>
</I>&gt;<i> 9.
</I>&gt;<i>
</I>&gt;<i>     Return doc.
</I>&gt;<i>
</I>
There is a problem here IMO because if we've already created our HTML 
document object before the initial stage of the tree contruction stage, 
it means it already has a doctype, a HTMLHtmlElement, a HTMLHeadElement, ...

How should we manage that in the &quot;initial&quot;, &quot;before html&quot;, &quot;after HTML&quot;, 
... insertion modes when are asked to append/associate doctypes, html 
element, head element (...) to our assiocated document object which 
already has all that ?

My point is : Shouldn't the  DOMImplementation.createHTMLDocument() just 
create a Document object with  content type set to &quot;text/html&quot; and 
nothing else ?

Thanks and regards,

-- 
Thomas F&#233;tiveau
+33 (0) 623 110 922
www.tokom.fr

</PRE>









<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081864.html">[whatwg] Notifications: in workers
</A></li>
	<LI>Next message: <A HREF="081833.html">[whatwg] Question about DOMImplementation.createHTMLDocument()	specifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39559">[ date ]</a>
              <a href="thread.html#39559">[ thread ]</a>
              <a href="subject.html#39559">[ subject ]</a>
              <a href="author.html#39559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
