<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Priority between &lt;a download&gt; and content-disposition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Priority%20between%20%3Ca%20download%3E%20and%20content-disposition&In-Reply-To=%3CCAH4e3M5O5%3DZo0DjCrasNr9-x83oEQgYpa_pqAg2ZPJeJKYvFpw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081816.html">
   <LINK REL="Next"  HREF="081818.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Priority between &lt;a download&gt; and content-disposition</H1>
<!--htdig_noindex-->
    <B>Gordon P. Hemsley</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Priority%20between%20%3Ca%20download%3E%20and%20content-disposition&In-Reply-To=%3CCAH4e3M5O5%3DZo0DjCrasNr9-x83oEQgYpa_pqAg2ZPJeJKYvFpw%40mail.gmail.com%3E"
       TITLE="[whatwg] Priority between &lt;a download&gt; and content-disposition">gphemsley at gmail.com
       </A><BR>
    <I>Wed May  8 03:53:51 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081816.html">[whatwg] Priority between &lt;a download&gt; and content-disposition
</A></li>
        <LI>Next message: <A HREF="081818.html">[whatwg] Priority between &lt;a download&gt; and content-disposition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81817">[ date ]</a>
              <a href="thread.html#81817">[ thread ]</a>
              <a href="subject.html#81817">[ subject ]</a>
              <a href="author.html#81817">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, May 7, 2013 at 10:18 PM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:
&gt;<i> On 5/7/13 5:54 PM, Gordon P. Hemsley wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A @download attribute with a value would override both factors, like so:
</I>&gt;&gt;<i> (1) Download it.
</I>&gt;&gt;<i> (2) &quot;A.txt&quot;
</I>&gt;<i>
</I>&gt;<i> Why?
</I>&gt;<i>
</I>&gt;<i> You say this as if it were obvious, but it's not obvious to me at all...
</I>&gt;<i> What's the reasoning that makes this the desirable behavior?
</I>
It's not clear to me which of the two factors you take issue with.

Here's what the spec says:

&quot;The download attribute, if present, indicates that the author intends
the hyperlink to be used for downloading a resource. The attribute may
have a value; the value, if any, specifies the default file name that
the author recommends for use in labeling the resource in a local file
system.&quot;

I interpret that first sentence to mean that the file should be
downloaded (disposition type = attachment) rather than displayed
(disposition type = inline). The second sentence very clearly suggests
that &quot;A.txt&quot; would be the filename presented to the user by default in
the save dialog.

&gt;&gt;<i> I don't see what the security concerns might be: There is no
</I>&gt;&gt;<i> difference here than what is already available
</I>&gt;<i>
</I>&gt;<i> There is if you allow cross-origin @download.
</I>&gt;<i>
</I>&gt;<i> There is if you allow untrusted markup on your server and don't sanitize
</I>&gt;<i> away @download (should it be sanitized away?  Unclear).
</I>
I'm still not seeing what the problem is. All this does is make the
browser treat the link as if the user followed it and then went File &gt;
Save Page As....

What are the security concerns, cross-origin or otherwise?

&gt;&gt;<i> AFAICT, there are no content
</I>&gt;&gt;<i> sniffing or cross-domain issues at play.
</I>&gt;<i>
</I>&gt;<i> But there are; see above.
</I>
Well, what I should have said is, there is no content sniffing beyond
what is already done for regular page saves. (The UI can show the MIME
type or format of the file in the download box, as it would for any
file it doesn't handle natively.)

&gt;&gt;<i> results when saving a file; they don't do any file extension vs. file
</I>&gt;&gt;<i> format checking.
</I>&gt;<i>
</I>&gt;<i> Uh... that depends on exactly how you save and your OS.  Browsers commonly
</I>&gt;<i> do file extension vs MIME type checking on Windows.  Behavior on other OSes
</I>&gt;<i> varies, and varies across browsers.
</I>&gt;<i>
</I>&gt;<i> -Boris
</I>
Ah, I admit, I'm a bit biased towards Mac in that regard. It's been a
while since I used Windows. But I'd be surprised to find out that the
browser (Firefox, in the case I have in mind) changes the extension in
the suggested filename (e.g. &quot;example.php&quot; for an HTML file) on
Windows but not on Mac, and I would argue that that perhaps should not
be the case.

--
Gordon P. Hemsley
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">me at gphemsley.org</A>
<A HREF="http://gphemsley.org/">http://gphemsley.org/</A> &#8226; <A HREF="http://gphemsley.org/blog/">http://gphemsley.org/blog/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081816.html">[whatwg] Priority between &lt;a download&gt; and content-disposition
</A></li>
	<LI>Next message: <A HREF="081818.html">[whatwg] Priority between &lt;a download&gt; and content-disposition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81817">[ date ]</a>
              <a href="thread.html#81817">[ thread ]</a>
              <a href="subject.html#81817">[ subject ]</a>
              <a href="author.html#81817">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
