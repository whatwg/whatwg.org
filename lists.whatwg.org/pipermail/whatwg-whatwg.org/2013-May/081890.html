<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [mimesniff] An alternative approach to section 9 of	Mime Sniffing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bmimesniff%5D%20An%20alternative%20approach%20to%20section%209%20of%0A%09Mime%20Sniffing&In-Reply-To=%3C7C29D412F8DD45C591553FEE5037B23F%40PeterPC%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081888.html">
   <LINK REL="Next"  HREF="081882.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [mimesniff] An alternative approach to section 9 of	Mime Sniffing</H1>
<!--htdig_noindex-->
    <B>Peter Occil</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bmimesniff%5D%20An%20alternative%20approach%20to%20section%209%20of%0A%09Mime%20Sniffing&In-Reply-To=%3C7C29D412F8DD45C591553FEE5037B23F%40PeterPC%3E"
       TITLE="[whatwg] [mimesniff] An alternative approach to section 9 of	Mime Sniffing">poccil14 at gmail.com
       </A><BR>
    <I>Sat May 25 03:23:59 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081888.html">[whatwg] [mimesniff] An alternative approach to section 9 of	Mime Sniffing
</A></li>
        <LI>Next message: <A HREF="081882.html">[whatwg] An alternative approach to section 9 of Mime Sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81890">[ date ]</a>
              <a href="thread.html#81890">[ thread ]</a>
              <a href="subject.html#81890">[ subject ]</a>
              <a href="author.html#81890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I had no particular problem reading the spec -- I even wrote an 
implementation of some parts of the sniffing algorithm -- but if I were to 
write the spec myself, I would have used ABNF myself.  Now I see that ABNF 
is not necessarily the best approach here.

As a side note, I have noticed that specifying both a grammar and a parsing 
algorithm for the same syntax in the same document can cause practical 
issues in implementation, especially when both are treated as normative and 
not merely one of them [1][2]. (This should not be taken as suggesting 
changes to the MIME Sniffing or WebVTT specifications.)

[1]: <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22103">https://www.w3.org/Bugs/Public/show_bug.cgi?id=22103</A>
[2]: <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22104">https://www.w3.org/Bugs/Public/show_bug.cgi?id=22104</A>

-----Original Message----- 
From: Gordon P. Hemsley
Sent: Saturday, May 25, 2013 3:38 AM
To: Peter Occil
Cc: Anne van Kesteren ; WHATWG
Subject: Re: [whatwg] [mimesniff] An alternative approach to section 9 of 
Mime Sniffing

Section 5 is highlighted with all that red warning stuff precisely
because it is known to be incomplete and insufficient. I haven't yet
decided how I'm going to go about writing that up (and it isn't
inherently obvious that what is there now is bad). So that's not the
best example; and it certainly doesn't have anything to do with
section 9 (at least, not with regard to formatting).

I still don't understand what problem you're trying to solve (and if I
don't understand the problem, I can't come up with a solution). Are
you just having trouble reading and understanding what's there?

MIME Sniffing and WebVTT have very different usecases and, in some
ways, very different audiences. I don't think you can directly compare
the two.

Gordon

On Sat, May 25, 2013 at 1:58 AM, Peter Occil &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">poccil14 at gmail.com</A>&gt; wrote:
&gt;<i> What I think is that even if an ABNF won't be the normative definition of 
</I>&gt;<i> a
</I>&gt;<i> syntax format, it can help put the format's syntax into a higher-level
</I>&gt;<i> perspective and aid understanding of its syntax: once we understand, for
</I>&gt;<i> example, what the Content-Type header field value ought to contain, in the
</I>&gt;<i> form of an ABNF or in some other way, it will be easier to write 
</I>&gt;<i> processing
</I>&gt;<i> rules for that field value in the spec.  (Right now I'm in the process of
</I>&gt;<i> rewriting section 5 of the MIME sniffing spec.)
</I>&gt;<i>
</I>&gt;<i> Take the WebVTT spec for example.  For each part of the WebVTT format
</I>&gt;<i> there's a definition of what that part contains in terms of characters, 
</I>&gt;<i> and
</I>&gt;<i> the actual processing rules for parsing that part.  For example, the
</I>&gt;<i> definition for &quot;WebVTT cue timings&quot; and the algorithm to &quot;collect WebVTT 
</I>&gt;<i> cue
</I>&gt;<i> timings and settings.&quot; The definition aids understanding of the syntax for
</I>&gt;<i> WebVTT cue timings and informs how the rules for collecting WebVTT cue
</I>&gt;<i> timings are written in the WebVTT spec.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --Peter
</I>&gt;<i>
</I>&gt;<i> -----Original Message----- From: Anne van Kesteren
</I>&gt;<i> Sent: Friday, May 24, 2013 1:28 AM
</I>&gt;<i>
</I>&gt;<i> To: Peter Occil
</I>&gt;<i> Cc: WHATWG
</I>&gt;<i> Subject: Re: [whatwg] An alternative approach to section 9 of Mime 
</I>&gt;<i> Sniffing
</I>&gt;<i>
</I>&gt;<i> On Thu, May 23, 2013 at 2:49 PM, Peter Occil &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">poccil14 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Explain further why you don't recommend ABNF for this case.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We don't recommend ABNF in general because often ABNF results in a
</I>&gt;<i> mismatch between prescribed and actual processing. E.g. Content-Type
</I>&gt;<i> is defined as an ABNF and technically &quot;text/html;&quot; does not match that
</I>&gt;<i> ABNF, but everyone (logically) processes that as &quot;text/html&quot; without
</I>&gt;<i> parameters.
</I>&gt;<i>
</I>&gt;<i> It's much better to define the actual processing so implementers are
</I>&gt;<i> less inclined to take shortcuts when implementing (test suites also
</I>&gt;<i> help, but they're typically written way-after-the-fact).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> You should also explain whether another change to make section 9 more
</I>&gt;&gt;<i> readable is
</I>&gt;&gt;<i> appropriate (though it currently is relatively readable as is).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'll leave that to Gordon.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> <A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>
</I>


-- 
Gordon P. Hemsley
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">me at gphemsley.org</A>
<A HREF="http://gphemsley.org/">http://gphemsley.org/</A> &#8226; <A HREF="http://gphemsley.org/blog/">http://gphemsley.org/blog/</A> 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081888.html">[whatwg] [mimesniff] An alternative approach to section 9 of	Mime Sniffing
</A></li>
	<LI>Next message: <A HREF="081882.html">[whatwg] An alternative approach to section 9 of Mime Sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81890">[ date ]</a>
              <a href="thread.html#81890">[ thread ]</a>
              <a href="subject.html#81890">[ subject ]</a>
              <a href="author.html#81890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
