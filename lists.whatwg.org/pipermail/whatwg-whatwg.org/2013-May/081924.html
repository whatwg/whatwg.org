<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] pagehide vs pagevis
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20pagehide%20vs%20pagevis&In-Reply-To=%3C51A69E9D.5020700%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081920.html">
   <LINK REL="Next"  HREF="081938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] pagehide vs pagevis</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20pagehide%20vs%20pagevis&In-Reply-To=%3C51A69E9D.5020700%40mit.edu%3E"
       TITLE="[whatwg] pagehide vs pagevis">bzbarsky at MIT.EDU
       </A><BR>
    <I>Wed May 29 17:34:37 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081920.html">[whatwg] pagehide vs pagevis
</A></li>
        <LI>Next message: <A HREF="081938.html">[whatwg] pagehide vs pagevis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81924">[ date ]</a>
              <a href="thread.html#81924">[ thread ]</a>
              <a href="subject.html#81924">[ subject ]</a>
              <a href="author.html#81924">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 5/29/13 4:30 PM, Brady Eidson wrote:
&gt;<i> I see in the HTML spec that the step *before* firing pagehide is &#8220;set
</I>&gt;<i> the Document&#8217;s page showing flag to false,&#8221; but I can&#8217;t find language
</I>&gt;<i> that says pagehide fires *before* the page is actually hidden, and
</I>&gt;<i> unload fires *after* the page is actually hidden.
</I>
Hidden in terms of &quot;document.hidden&quot; or something else?

&gt;<i> pageshow is a history traversal event, and not a visibility event.  I
</I>&gt;<i> don&#8217;t see a guarantee in any spec that &#8220;pageshow&#8221; comes after the
</I>&gt;<i> document is actually visible.
</I>
It comes after it's visible in terms of document.visibilityState, for 
pages not in background tabs.

Obviously for pages in background tabs the visibilityState of the 
document is just hidden throughout.

&gt;<i> First, since pagehide currently always has persisted set to true (in the
</I>&gt;<i> spec and in Gecko)
</I>
This is false in Gecko.  There are lots of cases in which persisted is 
not set to true in pagehide.  It's only set to true if the page is in 
fact going to be placed in the page cache based on the information 
available at the point pagehide fires.

The spec on setting &quot;persisted&quot; in the pagehide event is just wrong.

&gt;<i> Third, is the difference between 4 states and 5 states really appreciable?
</I>
Which states are 4 and 5?

In any case, there are multiple page visibility implementations shipping 
now, with interop on the ordering last I checked, and the spec is 
finalized.  If you want to change around how it works, you're going to 
have to convince all the people who are already shipping implementations 
of it as written, apparently with no problems, to change behavior...

-Boris


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081920.html">[whatwg] pagehide vs pagevis
</A></li>
	<LI>Next message: <A HREF="081938.html">[whatwg] pagehide vs pagevis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81924">[ date ]</a>
              <a href="thread.html#81924">[ thread ]</a>
              <a href="subject.html#81924">[ subject ]</a>
              <a href="author.html#81924">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
