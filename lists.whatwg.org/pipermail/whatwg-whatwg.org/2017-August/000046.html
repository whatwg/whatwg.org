<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [ScrollRestoration] API to notify browser when page	finished loading?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BScrollRestoration%5D%20API%20to%20notify%20browser%20when%20page%0A%09finished%20loading%3F&In-Reply-To=%3CVI1PR08MB031847BE3C40E2E0A3F3FA5DE9800%40VI1PR08MB0318.eurprd08.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000045.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [ScrollRestoration] API to notify browser when page	finished loading?</H1>
<!--htdig_noindex-->
    <B>Johannes Spangenberg</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BScrollRestoration%5D%20API%20to%20notify%20browser%20when%20page%0A%09finished%20loading%3F&In-Reply-To=%3CVI1PR08MB031847BE3C40E2E0A3F3FA5DE9800%40VI1PR08MB0318.eurprd08.prod.outlook.com%3E"
       TITLE="[whatwg] [ScrollRestoration] API to notify browser when page	finished loading?">johannes.spangenberg at hotmail.de
       </A><BR>
    <I>Thu Aug 17 19:12:52 PDT 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="000045.html">[whatwg] rel=bookmark
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46">[ date ]</a>
              <a href="thread.html#46">[ thread ]</a>
              <a href="subject.html#46">[ subject ]</a>
              <a href="author.html#46">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hello,

I was not sure where to ask this question. However, this draft was referenced by Chrome and Mozilla. So, hopefully this is the right place. I can also create a GitHub Issue at <A HREF="https://github.com/majido/scroll-restoration-proposal/issues">https://github.com/majido/scroll-restoration-proposal/issues</A> if you like.

Lets come to the question. If I understand the current draft correctly, it only allows disabling scroll restoration performed by the borwser. This means that applications still have to implement scroll restoration manually. Other persisted user state (like user input on input fields) seems not to be considered at all. Do I have understood it correctly?

If I have understood it correctly, I would like to know whether you have considered an alternative API as described in the following sentences. Basically, the problem seems to be that the browser does not know when the page finishes loading. Therefore, my suggestion would be to add an API to notify the browser when the page was loaded successfully. An example for such API would be a function like this:

delayStateRestoration(promise:Promise&lt;void&gt;) : void

Calling this function would only be allowed while handling popstate event or before initial loading of page has finished. Calling this function when the page has already been loaded does not make sense.

Yours faithfully,
Johannes Spangenberg
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000045.html">[whatwg] rel=bookmark
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46">[ date ]</a>
              <a href="thread.html#46">[ thread ]</a>
              <a href="subject.html#46">[ subject ]</a>
              <a href="author.html#46">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
