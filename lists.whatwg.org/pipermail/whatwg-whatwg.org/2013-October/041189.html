<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Forms-related feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Forms-related%20feedback&In-Reply-To=%3CCAGH7WqGghcY1rEsbA96YUQwKOAseuNvqAfRW9na2Lh3V9skySA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041175.html">
   <LINK REL="Next"  HREF="041202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Forms-related feedback</H1>
<!--htdig_noindex-->
    <B>TAMURA, Kent</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Forms-related%20feedback&In-Reply-To=%3CCAGH7WqGghcY1rEsbA96YUQwKOAseuNvqAfRW9na2Lh3V9skySA%40mail.gmail.com%3E"
       TITLE="[whatwg] Forms-related feedback">tkent at chromium.org
       </A><BR>
    <I>Thu Oct 17 22:22:14 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="041175.html">[whatwg] Canvas for web spectrometry
</A></li>
        <LI>Next message: <A HREF="041202.html">[whatwg] [2D Canvas] Proposal: Losing and restoring rendering	contexts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41189">[ date ]</a>
              <a href="thread.html#41189">[ thread ]</a>
              <a href="subject.html#41189">[ subject ]</a>
              <a href="author.html#41189">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I know I'm proposing a strange thing. Some use-cases are just workarounds
and there are ideal solutions.


On Tue, Sep 24, 2013 at 5:35 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Wed, 21 Aug 2013, TAMURA, Kent wrote:
</I>&gt;&gt;<i> On Sat, Jul 13, 2013 at 6:39 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; On Wed, 9 Jan 2013, TAMURA, Kent wrote:
</I>&gt;&gt;<i> &gt; &gt; On Wed, Nov 21, 2012 at 7:51 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; &gt; &gt; On Fri, 7 Sep 2012, TAMURA, Kent wrote:
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; * For date, datetime, datetime-local, month, time, week, the
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; attribute returns a string in a field. If a field is
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; text-editable, it should return user-editing string like email
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; and number.  If a field has a fixed localized date/time string
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; chosen by a date/time picker, the attribute should return the
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; localized string. [...]
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; - We can enable text field selection APIs for email, number, and
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; other types
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; How would this work when the control isn't a text control? I don't
</I>&gt;&gt;<i> &gt; &gt; &gt; understand. For example, consider a date control that is actually
</I>&gt;&gt;<i> &gt; &gt; &gt; three separate text fields (year month day); how do you envisage
</I>&gt;&gt;<i> &gt; &gt; &gt; the selection API working and how would rawValue help with this?
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; I think it's ok that rawValue doesn't work with form controls
</I>&gt;&gt;<i> &gt; &gt; without any text. One of use cases of rawValue would be to handle
</I>&gt;&gt;<i> &gt; &gt; user input errors.  I think non-text form controls should be clever
</I>&gt;&gt;<i> &gt; &gt; enough to avoid bad user input. For example, users can't set bad
</I>&gt;&gt;<i> &gt; &gt; values to input[type=range].
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I still don't understand how this would work. You suggest that it
</I>&gt;&gt;<i> &gt; should work for type=date, but how? What happens when it's mutated by
</I>&gt;&gt;<i> &gt; script, for instance? I really don't understand the purpose here or
</I>&gt;&gt;<i> &gt; how it would work to achieve that purpose.
</I>
&gt;&gt;<i> As for type=date, rawValue should return what a user see.
</I>
&gt;<i> What if the user sees a calendar with a date circled? Or the string &quot;your
</I>&gt;<i> birthday&quot;? (Exposing that would be a privacy violation.) Or what if the
</I>&gt;<i> user doesn't see anything (because it's not a visual UA), but every time
</I>&gt;<i> the user focuses it, the user agent plays a tune from one of Vivaldi's
</I>&gt;<i> four seasons, followed by a trill to indicate how far into the season the
</I>&gt;<i> date is?
</I>
I have no good idea for them.  However I don't think UA provides some of
such UIs.  The specification allows to implement any UI for form controls,
but web authors won't accept UIs which are drastically different from
existing implementations.
For example, existing implementations of input[type=date] have about 1-line
height by default. If a UA provided an inline-calendar-style implementation
and it requires 300px height, web authors would have a hard time to design
their pages.

&gt;&gt;<i> Value set by script or not doesn't matter.
</I>
&gt;<i> I mean, how would the user agent parse the script's new value.
</I>
It's implementation-specific even now, and unrelated to this proposal.

&gt;&gt;<i> I saw some questions/requests of a way to get a localized date string in
</I>&gt;&gt;<i> crbug.com and stackoverflow.com.  One of reasons one wanted to get it
</I>&gt;&gt;<i> was that there are no ways for script to get localized date format used
</I>&gt;&gt;<i> in type=date. One wanted to get the format to use consistent date format
</I>&gt;&gt;<i> in a web page, another wanted to get the format to focus on specific
</I>&gt;&gt;<i> field in type=date (Note that a type=date instance in Google Chrome
</I>&gt;&gt;<i> contains multiple focus targets.)
</I>
&gt;<i> Providing localisation is definitely something we should do, but rawValue
</I>&gt;<i> isn't a sane way to do it. You don't want to have the &quot;format a date&quot; API
</I>&gt;<i> be &quot;create an &lt;input&gt; element, sets its value, and read it back&quot;.
</I>
Yeah, this usecase is for a workaround. We don't need rawValue if we have a
formal way to set/get date formats.

&gt;&gt;<i> As for type=number, I heard a web author wanted to get invalid value
</I>&gt;&gt;<i> typed by a user in order to show friendly error message without HTML
</I>&gt;&gt;<i> interactive form validation.
</I>
&gt;<i> The point of type=number is that the browser can do this, no need to
</I>&gt;<i> reimplement it. (If an author does want to reimplement it, Web Components
</I>&gt;<i> are presumably the long-term solution: reimplement the widget.)
</I>
I don't think Web Components becomes widely available in 10 years. Web
authors want to replace UA-builtin form validation UI now.
Do you think web authors should not use new input types if they don't like
builtin form validation UI?



&gt;&gt;<i> &gt; &gt; &gt; On Tue, 11 Sep 2012, TAMURA, Kent wrote:
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; Yes, I'd like to enable selection API for at least type=email
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; and type=number.  All of their existing implementations are text
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; fields. I haven't seen a request to suport selection API for
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; type=email, etc.. However lack of selection API looks a defect
</I>&gt;&gt;<i> &gt; &gt; &gt; &gt; to me.
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; Why does the page need to touch the selection?
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; It must be same as input[type=text]. e.g.
</I>&gt;&gt;<i> &gt; &gt;   - A page author wants to select the whole value or nothing of an
</I>&gt;&gt;<i> &gt; &gt; email form control when it gets focus.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Why is that a valid thing for a page to be doing? The browser should
</I>&gt;&gt;<i> &gt; take care of doing that, not the page. If the page does it, it'll be
</I>&gt;&gt;<i> &gt; different on each page and the user will get confused.
</I>
&gt;&gt;<i> We can't force it.  Web authors do what they want.
</I>
&gt;<i> We can force it. If we don't provide the API, the author can't do it.
</I>

&gt;&gt;<i> <A HREF="https://code.google.com/p/chromium/issues/detail?id=263910#c3">https://code.google.com/p/chromium/issues/detail?id=263910#c3</A>
</I>&gt;&gt;<i> This is an actual case.  I talked with him, and he said &lt;datalist&gt;
</I>&gt;&gt;<i> didn't work in his case because he wanted to show images on choices.
</I>
&gt;<i> The demo he gives is:
</I>
&gt;<i> <A HREF="https://chromium.googlecode.com/issues/attachment?aid=2639100003000&amp;name=caret.html&amp;token=tDkJ1CbBJ1hhXbsgb9Y0MRMzlks%3A1379968341420">https://chromium.googlecode.com/issues/attachment?aid=2639100003000&amp;name=caret.html&amp;token=tDkJ1CbBJ1hhXbsgb9Y0MRMzlks%3A1379968341420</A>
</I>
&gt;<i> If people want to reimplement widgets, then we should make sure Web
</I>&gt;<i> Components can support their particular widget desires. I don't think it
</I>&gt;<i> makes sense for us to make the default widgets be able to support every
</I>&gt;<i> weird thing people want to do.
</I>
I understand such stance. However it's hard to know whether a request is
weird or not.



&gt;&gt;<i> &gt; &gt;   - A user entered an email address with unacceptable domain name.
</I>&gt;&gt;<i> &gt; &gt;     A page author wants to move the caret to the beginning of the
</I>&gt;&gt;<i> &gt; &gt;     domain name.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; How is that possible in the case of a custom e-mail widget where the
</I>&gt;&gt;<i> &gt; e-mail address isn't shown, but a user picture and name is shown
</I>&gt;&gt;<i> &gt; instead?
</I>
&gt;&gt;<i> I think rawValue isn't necessary in such UI. However all of existing
</I>&gt;&gt;<i> type=email implementation is a text field.
</I>
&gt;<i> On Wed, 21 Aug 2013, Anne van Kesteren wrote:
</I>
&gt;&gt;<i> If we start doing this (and other things you proposed) we'll constrain
</I>&gt;&gt;<i> future implementation strategies for this control. And other
</I>&gt;&gt;<i> implementations might be forced to follow particular conventions in
</I>&gt;&gt;<i> order to not break sites. That doesn't seem exactly ideal.
</I>
&gt;<i> Exactly.
</I>
It's too optimistic. We are already constrained.

-- 
TAMURA Kent
Software Engineer, Google
</PRE>





































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041175.html">[whatwg] Canvas for web spectrometry
</A></li>
	<LI>Next message: <A HREF="041202.html">[whatwg] [2D Canvas] Proposal: Losing and restoring rendering	contexts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41189">[ date ]</a>
              <a href="thread.html#41189">[ thread ]</a>
              <a href="subject.html#41189">[ subject ]</a>
              <a href="author.html#41189">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
