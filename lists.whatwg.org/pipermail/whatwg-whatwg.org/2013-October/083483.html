<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20Adding%20methods%20like%20getElementById%20and%0A%20getElementsByTagName%20to%20DocumentFragments&In-Reply-To=%3CC02F75A9-A83C-46D4-AC0F-A00A6C38B5BA%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083481.html">
   <LINK REL="Next"  HREF="083484.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments</H1>
<!--htdig_noindex-->
    <B>Ryosuke Niwa</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20Adding%20methods%20like%20getElementById%20and%0A%20getElementsByTagName%20to%20DocumentFragments&In-Reply-To=%3CC02F75A9-A83C-46D4-AC0F-A00A6C38B5BA%40apple.com%3E"
       TITLE="[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments">rniwa at apple.com
       </A><BR>
    <I>Fri Oct 18 14:25:27 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083481.html">[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
</A></li>
        <LI>Next message: <A HREF="083484.html">[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83483">[ date ]</a>
              <a href="thread.html#83483">[ thread ]</a>
              <a href="subject.html#83483">[ subject ]</a>
              <a href="author.html#83483">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Oct 18, 2013, at 1:50 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i> On Fri, 18 Oct 2013, Tab Atkins Jr. wrote:
</I>&gt;&gt;<i> On Fri, Oct 18, 2013 at 11:09 AM, James Greene &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">james.m.greene at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> I would also love to see `getElementById` added to the 
</I>&gt;&gt;&gt;<i> HTMLElement/Element interface. It would be nice to capitalize on that 
</I>&gt;&gt;&gt;<i> potential perf boost in jQuery as well.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> There's no perf boost available for searching by id on an arbitrary 
</I>&gt;&gt;<i> element.  The reason you may get a better perf for the normal functions 
</I>&gt;&gt;<i> is that documents cache a map from id-&gt;element on themselves, so you 
</I>&gt;&gt;<i> just have to do a fast hash-lookup.  Arbitrary elements don't have this 
</I>&gt;&gt;<i> map (it would be way too much memory cost), so it'll fall back to a 
</I>&gt;&gt;<i> standard tree search, exactly as a querySelector would.
</I>&gt;<i> 
</I>&gt;<i> Well, you _could_ just use the element's document's hash lookup, then walk 
</I>&gt;<i> up the tree from the matching node to see if you reach the element, and 
</I>&gt;<i> only if you don't, then fall back on walking the tree. Assuming most such 
</I>&gt;<i> calls are not failing, that would give you pretty good performance (O(N) 
</I>&gt;<i> on the depth of the subtree, more or less).
</I>
That's more or less what WebKit does.  The only situation under which WebKit has to traverse the entire subtree is when there are multiple elements with the same id.  In fact, the name getter access on HTMLCollection cannot always be O(n) or worse for compatibility reasons so I would be surprised if any major browser didn't have a similar optimization implemented one way or another.  Having said that, this is all implementation detail/dependent so I wouldn't focus too much on this arguing one way or another.

Regardless, I'm supportive of adding getElementById on Element as long as we don't expose getElementsBy* functions.

- R. Niwa


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083481.html">[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
</A></li>
	<LI>Next message: <A HREF="083484.html">[whatwg] Proposal: Adding methods like getElementById and getElementsByTagName to DocumentFragments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83483">[ date ]</a>
              <a href="thread.html#83483">[ thread ]</a>
              <a href="subject.html#83483">[ subject ]</a>
              <a href="author.html#83483">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
