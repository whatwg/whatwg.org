<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Possible bug in the way the spec about worker GC	behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Possible%20bug%20in%20the%20way%20the%20spec%20about%20worker%20GC%0A%09behavior&In-Reply-To=%3CCAArhhis0s%2BaB8C01b65KRmeSs2vq6K4_eK8DuEWO0npGq5GGmg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041000.html">
   <LINK REL="Next"  HREF="083295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Possible bug in the way the spec about worker GC	behavior</H1>
<!--htdig_noindex-->
    <B>Andrew Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Possible%20bug%20in%20the%20way%20the%20spec%20about%20worker%20GC%0A%09behavior&In-Reply-To=%3CCAArhhis0s%2BaB8C01b65KRmeSs2vq6K4_eK8DuEWO0npGq5GGmg%40mail.gmail.com%3E"
       TITLE="[whatwg] Possible bug in the way the spec about worker GC	behavior">atwilson at google.com
       </A><BR>
    <I>Thu Oct 10 04:58:59 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="041000.html">[whatwg] Possible bug in the way the spec about worker GC behavior
</A></li>
        <LI>Next message: <A HREF="083295.html">[whatwg] Possible bug in the way the spec about worker GC	behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83286">[ date ]</a>
              <a href="thread.html#83286">[ thread ]</a>
              <a href="subject.html#83286">[ subject ]</a>
              <a href="author.html#83286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Can you be more specific about what in the spec is incorrect? I guess
you're saying that Gecko shuts down the worker as soon as the parent
document is no longer active (when the worker transitions to suspendable),
so the worker is generally shutdown before the document is discarded?

I think that behavior is a reasonable interpretation of the spec, and I
don't think the language you cite implies otherwise - did you want to
suggest an alternate wording that is clearer? I think implicit in the quote
you described is that it only applies to workers that are still running,
not to workers that have previously been shutdown.


On Thu, Oct 10, 2013 at 12:12 AM, Ehsan Akhgari &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ehsan at mozilla.com</A>&gt; wrote:

&gt;<i> Right now the spec says[1] &quot;Whenever a Document object is discarded, it
</I>&gt;<i> must be removed from the list of the worker's Documents of each worker
</I>&gt;<i> whose list contains that Document.&quot;.  If I'm reading this correctly, this
</I>&gt;<i> implies that the worker object should be alive by the time that the
</I>&gt;<i> document gets discarded, which is not what Gecko implements.
</I>&gt;<i>
</I>&gt;<i> Should this be fixed in the spec?
</I>&gt;<i>
</I>&gt;<i> [1] &lt;
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html#the-worker%27s-lifetime">http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html#the-worker%27s-lifetime</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> --
</I>&gt;<i> Ehsan
</I>&gt;<i> &lt;<A HREF="http://ehsanakhgari.org/">http://ehsanakhgari.org/</A>&gt;
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041000.html">[whatwg] Possible bug in the way the spec about worker GC behavior
</A></li>
	<LI>Next message: <A HREF="083295.html">[whatwg] Possible bug in the way the spec about worker GC	behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83286">[ date ]</a>
              <a href="thread.html#83286">[ thread ]</a>
              <a href="subject.html#83286">[ subject ]</a>
              <a href="author.html#83286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
