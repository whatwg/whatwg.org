<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Mixed content WebSockets: use subprotocols!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mixed%20content%20WebSockets%3A%20use%20subprotocols%21&In-Reply-To=%3CCAN%2BZGEk%2BOQBoUGJ6ZaMSsRPLcH-s35tmDQqh3QpBj6-o%3D_7_Cg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040970.html">
   <LINK REL="Next"  HREF="083246.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Mixed content WebSockets: use subprotocols!</H1>
<!--htdig_noindex-->
    <B>Nicholas Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mixed%20content%20WebSockets%3A%20use%20subprotocols%21&In-Reply-To=%3CCAN%2BZGEk%2BOQBoUGJ6ZaMSsRPLcH-s35tmDQqh3QpBj6-o%3D_7_Cg%40mail.gmail.com%3E"
       TITLE="[whatwg] Mixed content WebSockets: use subprotocols!">nicholas at nicholaswilson.me.uk
       </A><BR>
    <I>Fri Oct  4 10:25:24 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040970.html">[whatwg] Upload enhancements
</A></li>
        <LI>Next message: <A HREF="083246.html">[whatwg] Mixed content WebSockets: use subprotocols!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40972">[ date ]</a>
              <a href="thread.html#40972">[ thread ]</a>
              <a href="subject.html#40972">[ subject ]</a>
              <a href="author.html#40972">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hello,

This thread proposes a change to the HTML specification 10.3.2 &quot;The
WebSocket interface&quot;
(<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/network.html#the-websocket-interface">http://www.whatwg.org/specs/web-apps/current-work/multipage/network.html#the-websocket-interface</A>).

Currently, Firefox blocks &quot;<A HREF="ws://">ws://</A>&quot; connections from HTTPS pages, while
Chrome doesn't. Ultimately, this needs to be resolved somehow. There
are legitimate uses of mixed-content WebSocket connections - for
example, a simple VNC or SSH client in the browser. It is very hard
for a peer-to-peer application to put certificates on each node for
TLS (&quot;<A HREF="wss://">wss://</A>&quot;), but WebCrypto makes it easy to proper crypto in
javascript over a raw WebSocket connection.

Mixed-content blocking is good, and we're suggesting relaxing it. Some
specific peer-to-peer webapps though have a genuine need for <A HREF="ws://">ws://</A>
from HTTPS pages.

I've implemented a few different suggestions with Firefox patches, and
concluded the only thing that's likely to get traction is a very
specific change to the WebSockets interface to let through known-good
subprotocols, treating them as 'secure' rather than 'mixed'.

I have a document describing this:
<A HREF="http://nwilson.github.io/websockets-mixed-context/.">http://nwilson.github.io/websockets-mixed-context/.</A> The essential idea
is that WebSocket subprotocols supporting encryption shouldn't be
counted as insecure in the first place, so the whole issue of mixed
content doesn't apply. Either browsers can ship with a whitelist, or
extend the subprotocol argument in the Websocket ctor to specify that
the protocol is secure.

I'd like to ask whether any WHATWG members have any opinions on this
change, or where I can go to get review of it.

I can repost more background from the discussions on the Firefox list
if needed (<A HREF="https://groups.google.com/forum/#!topic/mozilla.dev.security/zPm2M-ieI20">https://groups.google.com/forum/#!topic/mozilla.dev.security/zPm2M-ieI20</A>

Thanks,
Nicholas

-----
Nicholas Wilson: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">nicholas at nicholaswilson.me.uk</A>
</PRE>










































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040970.html">[whatwg] Upload enhancements
</A></li>
	<LI>Next message: <A HREF="083246.html">[whatwg] Mixed content WebSockets: use subprotocols!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40972">[ date ]</a>
              <a href="thread.html#40972">[ thread ]</a>
              <a href="subject.html#40972">[ subject ]</a>
              <a href="author.html#40972">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
