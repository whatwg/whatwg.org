<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] onclose events for MessagePort
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20onclose%20events%20for%20MessagePort&In-Reply-To=%3CCANTur_5wOh09o5M65uzaMjbOzeCVWw5862cq8s-5V-jk%3DNJKpA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="083213.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] onclose events for MessagePort</H1>
<!--htdig_noindex-->
    <B>Ehsan Akhgari</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20onclose%20events%20for%20MessagePort&In-Reply-To=%3CCANTur_5wOh09o5M65uzaMjbOzeCVWw5862cq8s-5V-jk%3DNJKpA%40mail.gmail.com%3E"
       TITLE="[whatwg] onclose events for MessagePort">ehsan at mozilla.com
       </A><BR>
    <I>Tue Oct  1 08:37:59 PDT 2013</I>
    <P><UL>
        
        <LI>Next message: <A HREF="083213.html">[whatwg] onclose events for MessagePort
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40939">[ date ]</a>
              <a href="thread.html#40939">[ thread ]</a>
              <a href="subject.html#40939">[ subject ]</a>
              <a href="author.html#40939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi everyone,

We're coming across a need to get notified when the other side of a channel
goes away because the user navigates away from the page, or if the page is
killed by the OS, etc.  Currently a workaround is for the application to
handle the unload event and send a message on its channel letting the other
side know that it's going to die, but that's obviously not good enough if
the application is terminated abruptly (e.g., crashes.)

We proposed an onclose event on MessagePort to handle this case [1] and it
was rejected because that would make the GC behavior observable (in case
the port on the other side is garbage collected.)  But it seems like tying
the lifetime of MessagePorts to the lifetime of their owner document will
fix that problem.

Is that going to be an acceptable solution?

[1] <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=23327">https://www.w3.org/Bugs/Public/show_bug.cgi?id=23327</A>

Thanks!
--
Ehsan
&lt;<A HREF="http://ehsanakhgari.org/">http://ehsanakhgari.org/</A>&gt;
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="083213.html">[whatwg] onclose events for MessagePort
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40939">[ date ]</a>
              <a href="thread.html#40939">[ thread ]</a>
              <a href="subject.html#40939">[ subject ]</a>
              <a href="author.html#40939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
