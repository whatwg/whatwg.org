<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Notifications: usage feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Notifications%3A%20usage%20feedback&In-Reply-To=%3CCA%2Bc2ei8psoJKXA2C%3Dw%2BiGT6tbdRQG_TxmyS%2BExork752Ber5rg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083568.html">
   <LINK REL="Next"  HREF="041089.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Notifications: usage feedback</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Notifications%3A%20usage%20feedback&In-Reply-To=%3CCA%2Bc2ei8psoJKXA2C%3Dw%2BiGT6tbdRQG_TxmyS%2BExork752Ber5rg%40mail.gmail.com%3E"
       TITLE="[whatwg] Notifications: usage feedback">jonas at sicking.cc
       </A><BR>
    <I>Tue Oct 29 08:51:10 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083568.html">[whatwg] Notifications: usage feedback
</A></li>
        <LI>Next message: <A HREF="041089.html">[whatwg] IRC and WWW integration proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83569">[ date ]</a>
              <a href="thread.html#83569">[ thread ]</a>
              <a href="subject.html#83569">[ subject ]</a>
              <a href="author.html#83569">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Oct 29, 2013 at 8:26 AM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at annevk.nl</A>&gt; wrote:
&gt;<i> On Fri, Sep 27, 2013 at 2:15 AM, James Burke &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jrburke at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> 2) General notification callback entry point
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We are avoiding use of notification.onclick/onclose and would prefer
</I>&gt;&gt;<i> to have a generic entry point to receive notification events. Right
</I>&gt;&gt;<i> now we use navigator.mozSetMessageHandler('notification',
</I>&gt;&gt;<i> function(){}).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> but I would prefer to see a more official entry point in the spec. I
</I>&gt;&gt;<i> would go so far as to want to deprecate the .onclick and .onclose as
</I>&gt;&gt;<i> in practice they are not reliable, given that the app may be closed
</I>&gt;&gt;<i> down after firing the Notification but before it is clicked.
</I>&gt;<i>
</I>&gt;<i> We currently do not have a way to have events out-of-band for the web.
</I>
We should integrate this with ServiceWorker. Though I agree it might
be early to do that still.

&gt;&gt;<i> 3) onclick fires onclose too?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It seemed a bit unclear in the spec, but right now FirefoxOS fires
</I>&gt;&gt;<i> onclose too for onclick actions, as the onclick pathway removes the
</I>&gt;&gt;<i> notification from the list of notifications.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This seems counterintuitive to me, I would have only expected one
</I>&gt;&gt;<i> event. Perhaps clarifying the onclick behavior would be good.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I would prefer to just see one event fired in this case, if
</I>&gt;&gt;<i> onclick/onclose are kept around. If the general notification callback
</I>&gt;&gt;<i> entry point is established, then just firing it once with the
</I>&gt;&gt;<i> event.clicked property set to true for the clicked route.
</I>&gt;<i>
</I>&gt;<i> That seems like an implementation detail. Activation could mean
</I>&gt;<i> dismissal, but e.g. on Mac OS X activation does not mean dismissal.
</I>&gt;<i> It's up to the site/app to dismiss after activation and sometimes they
</I>&gt;<i> decide to keep the notification around for a bit.
</I>
That sounds unlikely to work in practice. I.e. I would expect pages to
break if some implementations fire onclose and others do not. Is there
a reason not to forbid firing onclose if onclick has been fired. Keep
in mind that the implementation can always hide the notification or
not independently of if it has fired onclose or not.

&gt;&gt;<i> 4) onclick does not bring web app to front
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This may be part of just further defining the steps for the &quot;click&quot;
</I>&gt;&gt;<i> pathway in the spec, but at least in FirefoxOS right now, the
</I>&gt;&gt;<i> notification onclick pathway does not bring the app to the visible
</I>&gt;&gt;<i> front in all cases. The email app has to do some extra document.hidden
</I>&gt;&gt;<i> checking and try to bring itself to the front.
</I>&gt;<i>
</I>&gt;<i> That seems like a UI detail we cannot really say anything about in the
</I>&gt;<i> specification.
</I>
Again, this seems unlikely to work in practice. I.e. I would expect
that authors would expect one behavior (likely the behavior of
whatever platform they are developing on) and that things would break
when the website is used on platforms that has the other behavior.

I suspect allowing the author to choose behavior here is going to work
more reliably.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083568.html">[whatwg] Notifications: usage feedback
</A></li>
	<LI>Next message: <A HREF="041089.html">[whatwg] IRC and WWW integration proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83569">[ date ]</a>
              <a href="thread.html#83569">[ thread ]</a>
              <a href="subject.html#83569">[ subject ]</a>
              <a href="author.html#83569">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
