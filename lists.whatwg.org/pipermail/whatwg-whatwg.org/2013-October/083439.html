<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Counterproposal for canvas in workers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Counterproposal%20for%20canvas%20in%20workers&In-Reply-To=%3CCAGN7qDCCDY-5R3D1_wv4LC5huh6vbCcNdxunbRKqvY2Ago2S%2BQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083437.html">
   <LINK REL="Next"  HREF="083441.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Counterproposal for canvas in workers</H1>
<!--htdig_noindex-->
    <B>Rik Cabanier</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Counterproposal%20for%20canvas%20in%20workers&In-Reply-To=%3CCAGN7qDCCDY-5R3D1_wv4LC5huh6vbCcNdxunbRKqvY2Ago2S%2BQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Counterproposal for canvas in workers">cabanier at gmail.com
       </A><BR>
    <I>Thu Oct 17 14:50:08 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083437.html">[whatwg] Counterproposal for canvas in workers
</A></li>
        <LI>Next message: <A HREF="083441.html">[whatwg] Counterproposal for canvas in workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83439">[ date ]</a>
              <a href="thread.html#83439">[ thread ]</a>
              <a href="subject.html#83439">[ subject ]</a>
              <a href="author.html#83439">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Oct 17, 2013 at 2:28 PM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt;wrote:

&gt;<i> On Fri, Oct 18, 2013 at 6:57 AM, Justin Novosad &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">junov at google.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Here is similar concept, but with an API more like WokerCanvas:
</I>&gt;&gt;<i> The CanvasRenderingContext2D associated with a WorkerCanvas would only
</I>&gt;&gt;<i> record draw commands, without executing them. The context would be
</I>&gt;&gt;<i> write-only. When you call commit on the WorkerCanvas, the block of
</I>&gt;&gt;<i> recorded
</I>&gt;&gt;<i> draw commands would be posted back to the main thread or directly to the
</I>&gt;&gt;<i> compositor.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Which? They are observably different.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> What I like about this approach is that it is always just
</I>&gt;&gt;<i> pushing data downstream, thus eliminating buffer synchronization issues as
</I>&gt;&gt;<i> well as the need for double buffering canvas backing stores.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The write-only restriction is a problem. Also, it's really important that
</I>&gt;<i> the worker be able to create temporary canvases for its own use (pdf.js for
</I>&gt;<i> example needs this), and this doesn't really support that.
</I>&gt;<i>
</I>
Creating temporary canvases is still possible. I'm unsure how it would be
different from a worker.
An advantage would be that you can draw to the temporary canvases in
parallel to using them. Only PIXEL access is disallowed, you can still call
drawImage using a canvas that has outstanding tasks.


&gt;<i>
</I>&gt;<i> I think we have already converged on a WorkerCanvas design that everyone
</I>&gt;<i> (on this thread so far) is happy with, using ImageBitmaps to synchronize
</I>&gt;<i> with the main thread as needed. Is there some problem with that proposal
</I>&gt;<i> that warrants introducing the complexity of Rik's 'task' system or the
</I>&gt;<i> limitations of your proposal?
</I>&gt;<i>
</I>
It seemed like that proposal was harder. Synchronization with the main
drawing thread seemed and the continuous committing seemed difficult too.
In addition, Ken wanted multiple workers access the same canvas which I
didn't see addressed (unless I missed it).

If the other proposal is better, we can drop this one.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083437.html">[whatwg] Counterproposal for canvas in workers
</A></li>
	<LI>Next message: <A HREF="083441.html">[whatwg] Counterproposal for canvas in workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83439">[ date ]</a>
              <a href="thread.html#83439">[ thread ]</a>
              <a href="subject.html#83439">[ subject ]</a>
              <a href="author.html#83439">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
