<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Stroking algorithm in Canvas 2d
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Stroking%20algorithm%20in%20Canvas%202d&In-Reply-To=%3CCAA0H%2BQSFH%3D7NqP792zFcwW3kpXAPPiDUr0SDMuP%2BB6KpQRX%3D4g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083337.html">
   <LINK REL="Next"  HREF="083339.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Stroking algorithm in Canvas 2d</H1>
<!--htdig_noindex-->
    <B>Jasper St. Pierre</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Stroking%20algorithm%20in%20Canvas%202d&In-Reply-To=%3CCAA0H%2BQSFH%3D7NqP792zFcwW3kpXAPPiDUr0SDMuP%2BB6KpQRX%3D4g%40mail.gmail.com%3E"
       TITLE="[whatwg] Stroking algorithm in Canvas 2d">jstpierre at mecheye.net
       </A><BR>
    <I>Thu Oct 10 16:19:55 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083337.html">[whatwg] Stroking algorithm in Canvas 2d
</A></li>
        <LI>Next message: <A HREF="083339.html">[whatwg] Stroking algorithm in Canvas 2d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83338">[ date ]</a>
              <a href="thread.html#83338">[ thread ]</a>
              <a href="subject.html#83338">[ subject ]</a>
              <a href="author.html#83338">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Oct 10, 2013 at 6:57 PM, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt; wrote:

&gt;<i> On Thu, Oct 10, 2013 at 3:36 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Thu, 10 Oct 2013, Justin Novosad wrote:
</I>&gt;&gt;<i> &gt; On Thu, Oct 10, 2013 at 5:48 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; &gt; On Thu, 10 Oct 2013, Rik Cabanier wrote:
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; setLineDash([30]);
</I>&gt;&gt;<i> &gt; &gt; &gt; rect(10, 10, 100, 100);
</I>&gt;&gt;<i> &gt; &gt; &gt; rect(10, 110, 100, 100);
</I>&gt;&gt;<i> &gt; &gt; &gt; rect(10, 210, 100, 100);
</I>&gt;&gt;<i> &gt; &gt; &gt; stroke();
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; These rectangles should look the same.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; I presume you mean &quot;I want those rectangles to look the same&quot;. I don't
</I>&gt;&gt;<i> &gt; &gt; see any a priori objective reason why they should look the same.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; And is there an a priori objective reason why they should look
</I>&gt;&gt;<i> &gt; different? It seem pretty obvious to me that there would be way more
</I>&gt;&gt;<i> &gt; designers wanting the rects to look the same than there would be wanting
</I>&gt;&gt;<i> &gt; the rects to look different.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; [...] should we not provide the most desirable behavior by default?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We should definitely provide the most desirable behaviour by default. The
</I>&gt;&gt;<i> question is, what is it? The only argument one way or the other I've seen
</I>&gt;&gt;<i> on this so far is the idea that if we don't reset, we get a more balanced
</I>&gt;&gt;<i> distribution of the dash density, whereas if we do reset, the dash density
</I>&gt;&gt;<i> is biased towards the start of the dash pattern.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The actual most desireable behaviour may in fact be neither Rik's proposal
</I>&gt;&gt;<i> nor mine, but something more like yours, where we somehow balance the
</I>&gt;&gt;<i> dashes between each node in the path, but I don't really know exactly how
</I>&gt;&gt;<i> to do that.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think we should have that as an option. Doing it for rects is
</I>&gt;<i> straightforward, but I suspect that it might be more difficult for
</I>&gt;<i> arbitrary shapes.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Just so we're clear, I really don't have a strong opinion on this issue. I
</I>&gt;&gt;<i> just want to make sure we apply the same rigour to deciding what the model
</I>&gt;&gt;<i> should be as we do to everything else, and that means not just doing
</I>&gt;&gt;<i> things because they've always been done that way, but instead either
</I>&gt;&gt;<i> figuring out why they've always been done that way, or starting from first
</I>&gt;&gt;<i> principles or data and deriving the right behaviour.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think that's totally reasonable. &quot;That's how we've always done it&quot; often
</I>&gt;<i> no longer applies.
</I>&gt;<i>
</I>
I really think there are better things we could be spending our time doing
than figuring out what the best stroking model is -- it seems that a
combination of dashOffset and closing paths means we can make all three
models draw the same shapes with the dash primitives. It's not like one
model is more powerful than any other, as I understand it.

Consistency with every other drawing model out there is probably more
important than you first imagine. Documentation, testing, interoperability
between browsers, and developer learning are all big motivations to keep
things the same.

If we do decide on something that's different from how we usually do it,
I'd really like some documentation on this, along with some rationale.

I can imagine an implementer assuming it's a direct translation of their
underlying API.

And as I said before, my coworkers and I are working on porting a bunch of
old cairo programs to the web, and it's nice to have a familiar API without
having to get tripped up on a small detail. There's already a bunch of
different vector graphics APIs, all based on the PostScript drawing model:
OpenVG/SVG/PDF/cairo/skia/Quartz/Direct2D, and differentiating &quot;just
because&quot; doesn't seem like a strong argument to me.

Additionally, I remember there were some similar concerns with
border-radius / border-style interaction where things where there were
interoperability concerns and it was a very similar pain to get things
consistent across all browsers.

Calling attention to these sort of small differences is very important.

Additionally, though we should have them anyway for whatever we decide, I'd
like some canvas conformance tests for this behavior with proposed renders
to help implementers.


&gt;<i> So far, the proposals seem to be to reset on each subpath, to not reset on
</I>&gt;&gt;<i> each subpath, and to add more features to the API.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If we don't want to add more features (features are expensive), then we're
</I>&gt;&gt;<i> left with reset and not reset. You can do everything you can do with
</I>&gt;&gt;<i> resetting in the no-resetting case; you can't do everything you can do
</I>&gt;&gt;<i> without resetting in the reset case. So the only strong argument there is
</I>&gt;&gt;<i> that one of the two ways provides more power to authors.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> dashOffset is there for authors who want to implement the behavior you are
</I>&gt;<i> looking for.
</I>&gt;<i> They would have to calculate the length of the previous sub paths. As
</I>&gt;<i> Stephan and Justin have pointed out, the current implemented behavior is
</I>&gt;<i> less surprising to authors.
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
  Jasper

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083337.html">[whatwg] Stroking algorithm in Canvas 2d
</A></li>
	<LI>Next message: <A HREF="083339.html">[whatwg] Stroking algorithm in Canvas 2d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83338">[ date ]</a>
              <a href="thread.html#83338">[ thread ]</a>
              <a href="subject.html#83338">[ subject ]</a>
              <a href="author.html#83338">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
