<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Synchronizing Canvas updates in a worker to DOM changes in the UI thread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Synchronizing%20Canvas%20updates%20in%20a%20worker%20to%20DOM%0A%20changes%20in%20the%20UI%20thread&In-Reply-To=%3CCAOp6jLYqsMV7%2BmxpEcVccHR2SuG5qp3aQ%3DmhGnkg_sumwX3WXQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083537.html">
   <LINK REL="Next"  HREF="041272.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Synchronizing Canvas updates in a worker to DOM changes in the UI thread</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Synchronizing%20Canvas%20updates%20in%20a%20worker%20to%20DOM%0A%20changes%20in%20the%20UI%20thread&In-Reply-To=%3CCAOp6jLYqsMV7%2BmxpEcVccHR2SuG5qp3aQ%3DmhGnkg_sumwX3WXQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Synchronizing Canvas updates in a worker to DOM changes in the UI thread">robert at ocallahan.org
       </A><BR>
    <I>Tue Oct 22 00:48:34 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083537.html">[whatwg] Synchronizing Canvas updates in a worker to DOM changes in the UI thread
</A></li>
        <LI>Next message: <A HREF="041272.html">[whatwg] The behaviour of Notification.requestPermission() in	Workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83518">[ date ]</a>
              <a href="thread.html#83518">[ thread ]</a>
              <a href="subject.html#83518">[ subject ]</a>
              <a href="author.html#83518">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Oct 22, 2013 at 12:39 AM, Glenn Maynard &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">glenn at zewt.org</A>&gt; wrote:

&gt;<i> Using ImageBitmap for this has a lot of issues.  It requires synchronizing
</I>&gt;<i> with scripts in the UI thread.  It requires manualling resize your canvas
</I>&gt;<i> repeatedly to fit different destinations.  It also may potentially create
</I>&gt;<i> lots of backbuffers. Here's an example of code using ImageBitmap
</I>&gt;<i> incorrectly, leading to excess memory allocation:
</I>&gt;<i>
</I>&gt;<i> function render()
</I>&gt;<i> {
</I>&gt;<i>     var canvas = myWorkerCanvas;
</I>&gt;<i>     renderTo(canvas);
</I>&gt;<i>     var buffer = canvas.transferToImageBitmap();
</I>&gt;<i>     postMessage(buffer);
</I>&gt;<i> }
</I>&gt;<i> setTimeout(render, 1);
</I>&gt;<i>
</I>

This code actually does something potentially useful which can't easily be
done with attachToCanvas: generating a series of images as fast as possible
which will be processed on another thread in some way other than just
rendering them on the screen. (E.g., be encoded into an animated image or
video file.)

Rob
-- 
Jtehsauts  tshaei dS,o n&quot; Wohfy  Mdaon  yhoaus  eanuttehrotraiitny  eovni
le atrhtohu gthot sf oirng iyvoeu rs ihnesa.r&quot;t sS?o  Whhei csha iids  teoa
stiheer :p atroa lsyazye,d  'mYaonu,r  &quot;sGients  uapr,e  tfaokreg iyvoeunr,
'm aotr  atnod  sgaoy ,h o'mGee.t&quot;  uTph eann dt hwea lmka'n?  gBoutt  uIp
waanndt  wyeonut  thoo mken.o w  *
*

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083537.html">[whatwg] Synchronizing Canvas updates in a worker to DOM changes in the UI thread
</A></li>
	<LI>Next message: <A HREF="041272.html">[whatwg] The behaviour of Notification.requestPermission() in	Workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83518">[ date ]</a>
              <a href="thread.html#83518">[ thread ]</a>
              <a href="subject.html#83518">[ subject ]</a>
              <a href="author.html#83518">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
