<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Stroking algorithm in Canvas 2d
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Stroking%20algorithm%20in%20Canvas%202d&In-Reply-To=%3CCABpaAqQcZN1FXbY1u00EENOb4jx89%2BLpKnj4Yg2yMYVJXqYxbg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083339.html">
   <LINK REL="Next"  HREF="083360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Stroking algorithm in Canvas 2d</H1>
<!--htdig_noindex-->
    <B>Justin Novosad</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Stroking%20algorithm%20in%20Canvas%202d&In-Reply-To=%3CCABpaAqQcZN1FXbY1u00EENOb4jx89%2BLpKnj4Yg2yMYVJXqYxbg%40mail.gmail.com%3E"
       TITLE="[whatwg] Stroking algorithm in Canvas 2d">junov at google.com
       </A><BR>
    <I>Fri Oct 11 06:17:50 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083339.html">[whatwg] Stroking algorithm in Canvas 2d
</A></li>
        <LI>Next message: <A HREF="083360.html">[whatwg] Stroking algorithm in Canvas 2d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83346">[ date ]</a>
              <a href="thread.html#83346">[ thread ]</a>
              <a href="subject.html#83346">[ subject ]</a>
              <a href="author.html#83346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> On Thu, Oct 10, 2013 at 4:19 PM, Jasper St. Pierre &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jstpierre at mecheye.net</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I can imagine an implementer assuming it's a direct translation of their
</I>&gt;&gt;<i> underlying API.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>As an implementer, I can speak to that. When I first laid eyes on the
algorithm, I was expecting that assumption to hold, but there were a few
hiccups.

So far, there are a few differences between the spec and the graphics API I
work with (skia) that attracted my attention:
1) the line caps on individual dashes: this is not yet resolved, and it is
pretty far on my to do list (low volume of complaints)
2) the way of handling dash sequences with an odd number of elements
(concatenate the sequence onto itself to make it even): this was easy to
resolve, although I have reservations about this. I think it may feel
unnatural to many graphics designers.
3) The method of mapping the dash pattern to the path: I suspected this
might be a problem, but I didn't really pay much attention to it until this
thread started.
4) Inflating paths: this did not worry me at all. I was confident that any
differences in results would be negligible and decided not to even
investigate unless someone reported a bug.


&gt;&gt;<i> I'd like some canvas conformance tests for this behavior with proposed
</I>&gt;&gt;<i> renders to help implementers.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>Yes, and again let me add an implementer's perspective. I do not intend to
fully implement the algorithm that is in the spec, I only intend to
integrate existing stroking algorithms that are provided by graphics APIs.
 As Ian stated earlier, a formal textual description of the stroking
process is important because of the normative nature of the specification.
Understood. But having only that to work with is quite challenging because
it means figuring out the gaps between the canvas spec and the graphics
API's implementation, then finding ways map one to the other.  So far I
have mostly (if not only) written tests for cases that I identified as
issues needing to be resolved, I have not gone through the exercise of
rigorously designing a series of tests that covers all the branches in the
spec'ed algorithm and all the special cases, and combinations thereof. That
would be useful, but it's a big chunk of work.


&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i>   Jasper
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083339.html">[whatwg] Stroking algorithm in Canvas 2d
</A></li>
	<LI>Next message: <A HREF="083360.html">[whatwg] Stroking algorithm in Canvas 2d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83346">[ date ]</a>
              <a href="thread.html#83346">[ thread ]</a>
              <a href="subject.html#83346">[ subject ]</a>
              <a href="author.html#83346">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
