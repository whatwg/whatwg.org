<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Serving up Theora &lt;video&gt; in the real world
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Serving%20up%20Theora%20%3Cvideo%3E%20in%20the%20real%20world&In-Reply-To=%3C91E03C43-7D2F-4F37-9634-505766E3C5C7%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063197.html">
   <LINK REL="Next"  HREF="020928.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Serving up Theora &lt;video&gt; in the real world</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Serving%20up%20Theora%20%3Cvideo%3E%20in%20the%20real%20world&In-Reply-To=%3C91E03C43-7D2F-4F37-9634-505766E3C5C7%40apple.com%3E"
       TITLE="[whatwg] Serving up Theora &lt;video&gt; in the real world">mjs at apple.com
       </A><BR>
    <I>Thu Jul  9 20:04:42 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="063197.html">[whatwg] Serving up Theora &lt;video&gt; in the real world
</A></li>
        <LI>Next message: <A HREF="020928.html">[whatwg] Serving up Theora &lt;video&gt; in the real world
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63198">[ date ]</a>
              <a href="thread.html#63198">[ thread ]</a>
              <a href="subject.html#63198">[ subject ]</a>
              <a href="author.html#63198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Jul 9, 2009, at 7:46 PM, Gregory Maxwell wrote:

&gt;<i> On Thu, Jul 9, 2009 at 10:35 PM, Robert O'Callahan&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A> 
</I>&gt;<i> &gt; wrote:
</I>&gt;&gt;<i> 2009/7/10 Ian Fette (&#12452;&#12450;&#12531;&#12501;&#12455;&#12483;&#12486;&#12451;) &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ifette at google.com</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> To me, this seems like a great test if &quot;canPlayType&quot; actually  
</I>&gt;&gt;&gt;<i> works in
</I>&gt;&gt;&gt;<i> practice. In the perfect world, it would be great to do
</I>&gt;&gt;&gt;<i> getElementById('video'), createElement, and
</I>&gt;&gt;&gt;<i> then canPlayType('video/whatever','theora').
</I>&gt;&gt;&gt;<i> If this simple use case doesn't work, I would ask if it's even worth
</I>&gt;&gt;&gt;<i> keeping canPlayType in the spec.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> var v = document.getElementById(&quot;video&quot;);
</I>&gt;&gt;<i> if (v.canPlayType &amp;&amp; v.canPlayType(&quot;video/ogg;  
</I>&gt;&gt;<i> codecs=vorbis,theora&quot;)) {
</I>&gt;&gt;<i>   ...
</I>&gt;&gt;<i> } else {
</I>&gt;&gt;<i>   ...
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> should work great. Certainly does in Firefox.
</I>&gt;<i>
</I>&gt;<i> It works. Except where it doesn't. It's the &quot;where it doesn't&quot; that
</I>&gt;<i> counts. At the moment Safari has issues. Out of two widely used
</I>&gt;<i> production browsers with HTML5 support, one is broken. Not good odds,
</I>&gt;<i> but I'm hopeful for the future.
</I>
Robert's code is a bit buggy; canPlayType returns a string, not a  
boolean, so it will always appear to say yes. Corrected sample code  
below. I tested, and the following is tragically broken in Safari  
4.0.2 even with XiphQT installed, but works as expected in WebKit  
nightlies and will very likely work in the next Safari dot release. In  
Safari 4.0.2 it will always say no, even with XiphQT installed. If you  
are patient, I would say just use this test and it will work as  
desired Real Soon. Please note, the 4.0.2 bug is just a bug, and not a  
design flaw in canPlayType.

&lt;script&gt;
var v = document.createElement(&quot;video&quot;);

if (v.canPlayType &amp;&amp; v.canPlayType(&quot;video/ogg; codecs=vorbis,theora&quot;) ! 
= &quot;no&quot;) {
     document.write(&quot;I CAN HAS OGG&quot;);
} else {
     document.write(&quot;OH NOES&quot;);
}
&lt;/script&gt;


Regards,
Maciej


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063197.html">[whatwg] Serving up Theora &lt;video&gt; in the real world
</A></li>
	<LI>Next message: <A HREF="020928.html">[whatwg] Serving up Theora &lt;video&gt; in the real world
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63198">[ date ]</a>
              <a href="thread.html#63198">[ thread ]</a>
              <a href="subject.html#63198">[ subject ]</a>
              <a href="author.html#63198">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
