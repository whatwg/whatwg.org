<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Issues with Web Sockets API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Issues%20with%20Web%20Sockets%20API&In-Reply-To=%3Cf965ae410907271327i3a5c1791hc5db80e1844b6776%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021456.html">
   <LINK REL="Next"  HREF="021450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Issues with Web Sockets API</H1>
<!--htdig_noindex-->
    <B>Drew Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Issues%20with%20Web%20Sockets%20API&In-Reply-To=%3Cf965ae410907271327i3a5c1791hc5db80e1844b6776%40mail.gmail.com%3E"
       TITLE="[whatwg] Issues with Web Sockets API">atwilson at google.com
       </A><BR>
    <I>Mon Jul 27 13:27:52 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="021456.html">[whatwg] Issues with Web Sockets API
</A></li>
        <LI>Next message: <A HREF="021450.html">[whatwg] Issues with Web Sockets API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21428">[ date ]</a>
              <a href="thread.html#21428">[ thread ]</a>
              <a href="subject.html#21428">[ subject ]</a>
              <a href="author.html#21428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Jul 27, 2009 at 1:14 PM, Alexey Proskuryakov &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ap at webkit.org</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> 27.07.2009, &#1074; 12:35, Maciej Stachowiak &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;(&#1072;):
</I>&gt;<i>
</I>&gt;<i>  However, I do not think that raising an exception is an appropriate
</I>&gt;&gt;&gt;<i> answer. Often, the TCP implementation takes a part of data given to it, and
</I>&gt;&gt;&gt;<i> asks to resubmit the rest later. So, just returning an integer result from
</I>&gt;&gt;&gt;<i> send() would be best in my opinion.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> With WebSocket, another possibility is for the implementation to buffer
</I>&gt;&gt;<i> pending data that could not yet be sent to the TCP layer, so that the client
</I>&gt;&gt;<i> of WebSocket doesn't have to be exposed to system limitations. At that
</I>&gt;&gt;<i> point, an exception is only needed if the implementation runs out of memory
</I>&gt;&gt;<i> for buffering. With a system TCP implementation, the buffering would be in
</I>&gt;&gt;<i> kernel space, which is a scarce resource, but user space memory inside the
</I>&gt;&gt;<i> implementation is no more scarce than user space memory held by the Web
</I>&gt;&gt;<i> application waiting to send to the WebSocket.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I agree that this will help if the application sends data in burst mode,
</I>&gt;<i> but what if it just constantly sends more than the network can transmit? It
</I>&gt;<i> will never learn that it's misbehaving, and will just take more and more
</I>&gt;<i> memory.
</I>

I would suggest that the solution to this situation is an appropriate
application-level protocol (i.e. acks) to allow the application to have no
more than (say) 1MB of data outstanding.

I'm just afraid that we're burdening the API to handle degenerative cases
that the vast majority of users won't encounter. Specifying in the API that
any arbitrary send() invocation could throw some kind of &quot;retry exception&quot;
or return some kind of error code is really really cumbersome.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> An example where adapting to network bandwidth is needed is of course file
</I>&gt;<i> uploading, but even if we dismiss it as a special case that can be served
</I>&gt;<i> with custom code, there's also e.g. captured video or audio that can be
</I>&gt;<i> downgraded in quality for slow connections.
</I>&gt;<i>
</I>&gt;<i> - WBR, Alexey Proskuryakov
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090727/6cff7832/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090727/6cff7832/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021456.html">[whatwg] Issues with Web Sockets API
</A></li>
	<LI>Next message: <A HREF="021450.html">[whatwg] Issues with Web Sockets API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21428">[ date ]</a>
              <a href="thread.html#21428">[ thread ]</a>
              <a href="subject.html#21428">[ subject ]</a>
              <a href="author.html#21428">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
