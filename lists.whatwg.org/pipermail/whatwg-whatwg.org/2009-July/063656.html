<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Make quoted attributes a conformance criteria
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Make%20quoted%20attributes%20a%20conformance%20criteria&In-Reply-To=%3C6ea53250907250308m6866a84n17adbbd41deddcb2%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063667.html">
   <LINK REL="Next"  HREF="063657.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Make quoted attributes a conformance criteria</H1>
<!--htdig_noindex-->
    <B>Eduard Pascual</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Make%20quoted%20attributes%20a%20conformance%20criteria&In-Reply-To=%3C6ea53250907250308m6866a84n17adbbd41deddcb2%40mail.gmail.com%3E"
       TITLE="[whatwg] Make quoted attributes a conformance criteria">herenvardo at gmail.com
       </A><BR>
    <I>Sat Jul 25 03:08:23 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="063667.html">[whatwg] Make quoted attributes a conformance criterion
</A></li>
        <LI>Next message: <A HREF="063657.html">[whatwg] Make quoted attributes a conformance criteria
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63656">[ date ]</a>
              <a href="thread.html#63656">[ thread ]</a>
              <a href="subject.html#63656">[ subject ]</a>
              <a href="author.html#63656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Jul 24, 2009 at 9:52 PM, Keryx Web&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">webmaster at keryx.se</A>&gt; wrote:
&gt;<i> On 2009-07-23 20:32, Eduard Pascual wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> While I don't consider a hard requirement would be appropriate, there
</I>&gt;&gt;<i> is an audience sector this discussion seems to be ignoring: Authoring
</I>&gt;&gt;<i> Tools' developers. IMO, it would be highly desirable to have some
</I>&gt;&gt;<i> guidelines for these tools to determine when they*should* &#160;quote
</I>&gt;&gt;<i> attribute values.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There is one further rub. Code that initially has been made by authoring
</I>&gt;<i> tools have a tendency to wind up in some front end developers lap, to be
</I>&gt;<i> amended and/or fixed manually at a later stage. That is even more a reason
</I>&gt;<i> for a strong recommendation about quotes.
</I>&gt;<i>
</I>&gt;<i> Furthermore, I doubt that most people on this list did read my blog post I
</I>&gt;<i> included as an URL when starting this discussion.[1]
</I>I can't speak for others, but I did read your post. And still I am
convinced that a hard requirement to quote all values is not the best
solution. There are some values that MUST be quoted, some that SHOULD
be quoted, and even some that SHOULD NOT be quoted. Those that must be
quoted are already covered by the spec, and validators will yield the
relevant error message when encountering such values unquoted. For
those values that *should* be quoted (those that improve in
readability when quoted, or those that could lead to errors when they
are later changed if unquoted), a warning from the validator should be
enough. Finally, there are some values that are better unquoted, such
as those attributes that can only take a number (there is no risk of
errors, and the quotes would normally hurt readability more than they
help it). Even in the case of @type for &lt;input&gt;, quotes seem quite an
overkill: AFAIK, there is no valid value for this attribute that will
make them strictly needed; so there is no risk of the author changing
the value into something that requires quotes and forget to add them
(unless, of course, s/he changes it to something invalid, which will
already bring problems of its own). Since &lt;input&gt; elements tend to be
relatively short, and often given in a single line of source, adding
boilerplate to them for no purpose doesn't seem to be a good idea.

&gt;<i> In that post I talked about a common scenario. One developer works on the
</I>&gt;<i> business logic. It puts out attribute values. Another developer works on the
</I>&gt;<i> presentation logic. He makes templates. Dev 2 omits the quotes and for a
</I>&gt;<i> long time it might work, since the business logic in question only produces
</I>&gt;<i> single word values. Then there might come a change, because dev 1 - or the
</I>&gt;<i> users of the CMS - suddenly starts to produce longer values. Suddenly things
</I>&gt;<i> break, and since nobody touched the presentation logic code, it might not be
</I>&gt;<i> the first place where the developers look for an error.
</I>&gt;<i>
</I>&gt;<i> And believe me, lots of back end devs are absolutely clueless about front
</I>&gt;<i> end issues! Yes, they might skip validation completely, but at least such a
</I>&gt;<i> rule of thumb can be implemented more easily into their work flow.
</I>Again, once the pages are going through a validator, warnings are
hints as good as errors to detect the source of the problem.

&gt;<i> I also note that no one who has spoken against my suggestion claims to have
</I>&gt;<i> any teaching experience.
</I>Although I didn't mention it, because I didn't think it was relevant,
I have some teaching experience (I won't claim to have worked my whole
life as a teacher; but I have worked as a particular teacher for a few
years). Do you really think this:
&quot;Error: Attribute values must always be quoted&quot;
would be more educative than this
&quot;Warning: Values for attribute X should be quoted, or errors might
arise if the value is later changed&quot;
? And these are just examples of messages.
Of course, if you just say your students &quot;all the code you provide
must validate&quot; warnings my go unnoticed. However, you may try
something like this &quot;all the code you provide must validate; and
warnings must be addressed or be properly reasoned&quot;. IMO, this kind of
details marks the difference between training code-typing zombies or
developers capable to solve problems.

In summary: I considered your arguments from the teaching perspective;
but I consider that the difference between errors and warnings has
more didactic value than a totalitarian validator that just rejects
safe code based on a seemingly arbitrary rule.

&gt;<i>
</I>&gt;<i> I see 4 effects that my suggestions might have:
</I>&gt;<i>
</I>&gt;<i> 1. Dismiss completely.
</I>Unlikely. On the worst case, it is at least being discussed.

&gt;<i> 2. No new wording, but change the code examples.
</I>Better consistency would be appropriate for some of the examples.
However, there are many values there that are better unquoted
(especially numbers).

&gt;<i> 3. Add some words about best practice, but do not enforce quotes as a
</I>&gt;<i> conformance criterion.
</I>&gt;<i>
</I>&gt;<i> 4. Go all the way and do just that.
</I>Again, there is a middle point between these: making validators issue
warnings for potentially unsafe attributes is, IMO, the sanest
approach here.
Adding some comments about the fact that in case of doubt it's safer
to quote the value would also be an improvement.

&gt;<i> The scientific evidence in favor of my suggestion might be quite easy to
</I>&gt;<i> pick up. Just ask any standards aware teacher how common it is that not
</I>&gt;<i> using quotes messes up students code!
</I>Warnings would be better in that sense (as long as the students are
required to either address or justify each of them). This forces the
students to do something that will be a extremely valuable thing both
during their learning and on their later careers: thinking and
reasoning.

&gt;<i>
</I>&gt;<i> Stopping before (4) above will force people like me to keep requiring false
</I>&gt;<i> XHTML from my students. My main concern is that in HTML 5 we get lots of new
</I>&gt;<i> boolean attributes, like &quot;required&quot; on inputs or &quot;maxlength&quot; on textareas,
</I>&gt;<i> and having to write things like 'required=&quot;required&quot;' will make the code
</I>&gt;<i> longer and messier, since a normal input element might span 2 or 3 lines.
</I>Again, warnings are better than a hard requirement.

&gt;<i> Of course this can be settled if we get a tool like JSLint, that can enforce
</I>&gt;<i> a voluntary stricter check (Crockford's &quot;good parts&quot;), but please note that
</I>&gt;<i> ES 5 introduces a concept of &quot;strict&quot; rules.
</I>&gt;<i>
</I>&gt;<i> This means that ES 5 will be in a similar position to HTML 5, having a lax
</I>&gt;<i> rule set about what browsers must be able to do, and a strict &quot;conformance
</I>&gt;<i> critera&quot; like rule set that authors are encouraged to follow.
</I>&gt;<i>
</I>&gt;<i> Perhaps this could be solved by simply adding an option to the validator:
</I>&gt;<i> &quot;Do not allow unquoted non-boolean attribute values&quot;.
</I>&gt;<i>
</I>&gt;<i> Henri Sivonen, are you reading this?
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Keryx Web (Lars Gunther)
</I>&gt;<i> <A HREF="http://keryx.se/">http://keryx.se/</A>
</I>&gt;<i> <A HREF="http://twitter.com/itpastorn/">http://twitter.com/itpastorn/</A>
</I>&gt;<i> <A HREF="http://itpastorn.blogspot.com/">http://itpastorn.blogspot.com/</A>
</I>&gt;<i>
</I>&gt;<i> 1. <A HREF="http://itpastorn.blogspot.com/2009/07/value-of-false-xhtml.html">http://itpastorn.blogspot.com/2009/07/value-of-false-xhtml.html</A>
</I>&gt;<i>
</I>

On Sat, Jul 25, 2009 at 5:55 AM, Bil Corry&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bil at corry.biz</A>&gt; wrote:
&gt;<i> Aryeh Gregor wrote on 7/24/2009 5:44 PM:
</I>&gt;&gt;<i> On Fri, Jul 24, 2009 at 6:26 PM, Bil Corry&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bil at corry.biz</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> That's a classic XSS vulnerability.  The backend developer must know if there are quotes or not in the template, then encode/sanitize the value accordingly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's not XSS if the values are statically provided by the first
</I>&gt;&gt;<i> developer and aren't generated from user input.
</I>&gt;<i>
</I>&gt;<i> Sure, but I was basing my reply on the provided example: &quot;Then there might come a change, because dev 1 - or the users of the CMS - suddenly starts to produce longer values.&quot;
</I>&gt;<i>
</I>&gt;<i> Even in the case where the developer is providing the values via a trusted source (say a database), it's still a best practice to encode/sanitize the value.
</I>
Then, regardless of conformance criteria, it would be convenient to at
least mention such best practices somewhere in the spec.

Regards,
Eduard Pascual

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063667.html">[whatwg] Make quoted attributes a conformance criterion
</A></li>
	<LI>Next message: <A HREF="063657.html">[whatwg] Make quoted attributes a conformance criteria
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63656">[ date ]</a>
              <a href="thread.html#63656">[ thread ]</a>
              <a href="subject.html#63656">[ subject ]</a>
              <a href="author.html#63656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
