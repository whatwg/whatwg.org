<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web Workers and postMessage(): Questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Workers%20and%20postMessage%28%29%3A%20Questions&In-Reply-To=%3Cffe1e27a0907221759h34de9423wec61579fdc796f3d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021315.html">
   <LINK REL="Next"  HREF="021316.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web Workers and postMessage(): Questions</H1>
<!--htdig_noindex-->
    <B>Daniel Gredler</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Workers%20and%20postMessage%28%29%3A%20Questions&In-Reply-To=%3Cffe1e27a0907221759h34de9423wec61579fdc796f3d%40mail.gmail.com%3E"
       TITLE="[whatwg] Web Workers and postMessage(): Questions">daniel.gredler at gmail.com
       </A><BR>
    <I>Wed Jul 22 17:59:12 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="021315.html">[whatwg] &quot;Encoding declaration state&quot; I hate the wording.
</A></li>
        <LI>Next message: <A HREF="021316.html">[whatwg] HTML form controls inside of editable area
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21312">[ date ]</a>
              <a href="thread.html#21312">[ thread ]</a>
              <a href="subject.html#21312">[ subject ]</a>
              <a href="author.html#21312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi all,

I've been writing some code that uses web workers. It's a very nice addition
to the HTML toolbox (kudos!), but I have some questions:

First, why does the structured clone algorithm used by postMessage() [1]
throw an exception if it encounters cycles? It seems to me that the
memory-based logic which is used to catch cycles could easily be modified to
resolve them instead. The only possible reason I can think of is to match
JSON semantics, and the only reason I can think of to want to match JSON
semantics is to make implementers lives easier (witness Firefox 3.5, which
just JSONifies objects passed to postMessage()). However, this is a huge
limitation, and I'm not sure that the correct trade-off is to make
implementers lives easier at the expense of making web designers lives
harder.

Second, why not walk the prototype chain? Similar rules regarding host
objects and regular objects could apply to prototypes. You would want to
make sure that multiple references to the same prototype instance result in
references to a single prototype clone in the cloned object graph. Again,
though, it doesn't sound too hard (though I might just be optimistic). Why
not make web designers' lives easier?

Overall, it just appears that the current web worker spec ignores the class
of computational problems involving results which need to be modeled in a
complex way. What do others think?

Looking forward to feedback!

Daniel


[1]
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#structured-clone">http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#structured-clone</A>


-- 
Daniel Gredler
<A HREF="http://daniel.gredler.net/">http://daniel.gredler.net/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090722/ed63745b/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090722/ed63745b/attachment.htm</A>&gt;
</PRE>




















































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021315.html">[whatwg] &quot;Encoding declaration state&quot; I hate the wording.
</A></li>
	<LI>Next message: <A HREF="021316.html">[whatwg] HTML form controls inside of editable area
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21312">[ date ]</a>
              <a href="thread.html#21312">[ thread ]</a>
              <a href="subject.html#21312">[ subject ]</a>
              <a href="author.html#21312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
