<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] DOMTokenList is unordered but yet requires sorting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20DOMTokenList%20is%20unordered%20but%20yet%20requires%20sorting&In-Reply-To=%3C63df84f0907122226y46346f36w66d58fb8141e90eb%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020990.html">
   <LINK REL="Next"  HREF="021018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] DOMTokenList is unordered but yet requires sorting</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20DOMTokenList%20is%20unordered%20but%20yet%20requires%20sorting&In-Reply-To=%3C63df84f0907122226y46346f36w66d58fb8141e90eb%40mail.gmail.com%3E"
       TITLE="[whatwg] DOMTokenList is unordered but yet requires sorting">jonas at sicking.cc
       </A><BR>
    <I>Sun Jul 12 22:26:09 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020990.html">[whatwg] DOMTokenList is unordered but yet requires sorting
</A></li>
        <LI>Next message: <A HREF="021018.html">[whatwg] DOMTokenList is unordered but yet requires sorting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20995">[ date ]</a>
              <a href="thread.html#20995">[ thread ]</a>
              <a href="subject.html#20995">[ subject ]</a>
              <a href="author.html#20995">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, Jul 12, 2009 at 9:00 PM, Ian Hickson&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Mon, 15 Jun 2009, Jo&#227;o Eiras wrote:
</I>&gt;&gt;<i> On Mon, 15 Jun 2009 21:38:05 +0200, Darin Adler &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at apple.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; On Jun 15, 2009, at 12:22 PM, Ian Hickson wrote:
</I>&gt;&gt;<i> &gt; &gt; On Tue, 9 Jun 2009, Erik Arvidsson wrote:
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; I was about to follow up on this. Requiring sorting which is O(n
</I>&gt;&gt;<i> &gt; &gt; &gt; log n) for something that can be done in O(n) makes thing slower
</I>&gt;&gt;<i> &gt; &gt; &gt; without any real benefit. Like Jo&#227;o said the order should be
</I>&gt;&gt;<i> &gt; &gt; &gt; defined as the order of the class content attribute.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; Fair enough. Done.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Since DOMTokenList requires uniqueness, then I suspect it's still O(n
</I>&gt;&gt;<i> &gt; log n) even without sorting, not O(n).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Oh, I have forseen that. Is it really necessary to remove duplicates ? I
</I>&gt;&gt;<i> imagine DOMTokenList to be similar to what can be achieved with a
</I>&gt;&gt;<i> String.split(), but then it would be just more duplicate functionality.
</I>&gt;<i>
</I>&gt;<i> If we don't remove duplicates, then things like the .toggle() method could
</I>&gt;<i> have some quite weird effects.
</I>
Such as? The only one I can think of is that calling .toggle() would
remove multiple items. I don't see that as a problem?

Define .remove() as removing all tokens with the given value, and .toggle() as:

function toggle(token) {
  if (this.contains(token))
    this.remove(token);
  else
    this.add(token);
}

I definitely think it'd be worth avoiding the code complexity and perf
hit of having the implementation remove duplicates if they appear in
the class attribute given how extremely rare duplicates are.

/ Jonas
</PRE>











































































































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020990.html">[whatwg] DOMTokenList is unordered but yet requires sorting
</A></li>
	<LI>Next message: <A HREF="021018.html">[whatwg] DOMTokenList is unordered but yet requires sorting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20995">[ date ]</a>
              <a href="thread.html#20995">[ thread ]</a>
              <a href="subject.html#20995">[ subject ]</a>
              <a href="author.html#20995">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
