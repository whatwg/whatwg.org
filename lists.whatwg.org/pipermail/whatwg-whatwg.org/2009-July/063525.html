<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] scripts, defer, document.write and DOMContentLoaded
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20scripts%2C%20defer%2C%20document.write%20and%20DOMContentLoaded&In-Reply-To=%3C4A655E2B.7040709%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063524.html">
   <LINK REL="Next"  HREF="063527.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] scripts, defer, document.write and DOMContentLoaded</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20scripts%2C%20defer%2C%20document.write%20and%20DOMContentLoaded&In-Reply-To=%3C4A655E2B.7040709%40mit.edu%3E"
       TITLE="[whatwg] scripts, defer, document.write and DOMContentLoaded">bzbarsky at MIT.EDU
       </A><BR>
    <I>Mon Jul 20 23:20:27 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="063524.html">[whatwg] scripts, defer, document.write and DOMContentLoaded
</A></li>
        <LI>Next message: <A HREF="063527.html">[whatwg] scripts, defer, document.write and DOMContentLoaded
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63525">[ date ]</a>
              <a href="thread.html#63525">[ thread ]</a>
              <a href="subject.html#63525">[ subject ]</a>
              <a href="author.html#63525">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Ian Hickson wrote:
&gt;<i> The change I have checked in makes us more compatible with what IE 
</I>&gt;<i> actually does here, which pages are apparently relying on. We could also 
</I>&gt;<i> make the spec introduce a whole new kind of behaviour, such as the one 
</I>&gt;<i> Jonas described, but that seems just as likely to have compatibility 
</I>&gt;<i> problems as what the spec said before, and also has some weird 
</I>&gt;<i> side-effects, like making it possible for the parser to go through the EOF 
</I>&gt;<i> point more than once, or having odd behaviour around document.close().
</I>
The thing is, your behavior also introduces issues as far as I can see 
(e.g. requirements that network loads be performed while a script is 
running without reentering the script, which means not firing any 
progress events associated with those network loads, requirements about 
execution of &lt;script&gt; with src pointing to javascript URIs, if those are 
supported to start with, etc, etc).

It's not clear to me that what you're proposing is any simpler than what 
Jonas is proposing.

Note that the bugs he cited had to do with various problems he brought 
up with the spec text, including but not limited to this one.  Which, if 
any, of them actually require this innerHTML behavior?  From my reading
of the bugs, none of them really do.

I'd be very interested in other implementor feedback here, but it seems 
to me that the current proposal is much more complicated than simply 
saying that document.write in a deferred script never blows away the 
document...  Is that not sufficiently compatible for some reason?

-Boris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063524.html">[whatwg] scripts, defer, document.write and DOMContentLoaded
</A></li>
	<LI>Next message: <A HREF="063527.html">[whatwg] scripts, defer, document.write and DOMContentLoaded
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63525">[ date ]</a>
              <a href="thread.html#63525">[ thread ]</a>
              <a href="subject.html#63525">[ subject ]</a>
              <a href="author.html#63525">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
