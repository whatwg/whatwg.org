<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML5 History Management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML5%20History%20Management&In-Reply-To=%3C8666D5A8-9F9D-4382-9C9A-997D28DADED2%40nathanhammond.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021589.html">
   <LINK REL="Next"  HREF="021600.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML5 History Management</H1>
<!--htdig_noindex-->
    <B>Nathan Hammond</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML5%20History%20Management&In-Reply-To=%3C8666D5A8-9F9D-4382-9C9A-997D28DADED2%40nathanhammond.com%3E"
       TITLE="[whatwg] HTML5 History Management">nathan at nathanhammond.com
       </A><BR>
    <I>Thu Jul 30 07:13:31 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="021589.html">[whatwg] HTML5 History Management
</A></li>
        <LI>Next message: <A HREF="021600.html">[whatwg] HTML5 History Management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21598">[ date ]</a>
              <a href="thread.html#21598">[ thread ]</a>
              <a href="subject.html#21598">[ subject ]</a>
              <a href="author.html#21598">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hey Jonas et al.:
Thanks for the reply, forgive my disbelief on Clarification 1. :) If  
I'm completely with you, that is entirely unexpected on my part (and  
I've read this part of the spec a few times). Is this to imply that,  
no matter what the arguments to pushState(), if the path is relative  
to the current URL there will be no request for a new document and no  
user-agent initiated network activity?

This is a behavior I'm fine with and will meet my needs just as well,  
I was simply expecting to have to use the approach from Clarification  
2 in order to retain my document object. It does however lend itself  
to some confusion when paired with user agents that don't yet support  
the history portions of the spec as they will have to be handled with  
hash-based addressing while those that support pushState() will have  
more sane URLs--but that is no matter in the grand scheme of things.

Also, that would imply that the popstate only fires when you're  
navigating through history. Is that correct?

Thanks!
Nathan

On Jul 30, 2009, at 4:42 AM, Jonas Sicking wrote:

&gt;<i> On Wed, Jul 29, 2009 at 7:38 PM, Nathan Hammond&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">nathan at nathanhammond.com</A> 
</I>&gt;<i> &gt; wrote:
</I>&gt;&gt;<i> Clarifications
</I>&gt;&gt;<i> 1. window.history.pushState({}, &quot;Title&quot;,
</I>&gt;&gt;<i> &quot;/path/to/new/file.html?s=newvalue#newhash&quot;) replaces the current  
</I>&gt;&gt;<i> document
</I>&gt;&gt;<i> object with the one specified by the new URL. It then causes the  
</I>&gt;&gt;<i> event
</I>&gt;&gt;<i> popstate to fire immediately after the load event, correct?
</I>&gt;<i>
</I>&gt;<i> No. The above line with change the uri of the existing document to be
</I>&gt;<i> &quot;<A HREF="http://example.com/path/to/new/file.html?s=newvalue#newhash&quot;">http://example.com/path/to/new/file.html?s=newvalue#newhash&quot;</A> (with
</I>&gt;<i> the part before 'path' obviously depending on where the original page
</I>&gt;<i> lives).
</I>&gt;<i>
</I>&gt;<i> So no network activity takes place and the Document node remains the
</I>&gt;<i> same. Also no popstate event is fired.
</I>&gt;<i>
</I>&gt;&gt;<i> 2. window.history.pushState({}, &quot;Title&quot;, &quot;#newhash&quot;) creates a new  
</I>&gt;&gt;<i> history
</I>&gt;&gt;<i> state object with the specified data object, the specified title,  
</I>&gt;&gt;<i> the same
</I>&gt;&gt;<i> document object, and a location object that replaces the existing  
</I>&gt;&gt;<i> hash with
</I>&gt;&gt;<i> &quot;#newhash&quot;, correct?
</I>&gt;<i>
</I>&gt;<i> Yes.
</I>&gt;<i>
</I>&gt;<i> / Jonas
</I>
</PRE>











































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021589.html">[whatwg] HTML5 History Management
</A></li>
	<LI>Next message: <A HREF="021600.html">[whatwg] HTML5 History Management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21598">[ date ]</a>
              <a href="thread.html#21598">[ thread ]</a>
              <a href="subject.html#21598">[ subject ]</a>
              <a href="author.html#21598">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
