<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas context.drawImage clarification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20context.drawImage%20clarification&In-Reply-To=%3Cde4bd3190907101838m2bf603b0wc4be214d0e7602d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063202.html">
   <LINK REL="Next"  HREF="063226.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas context.drawImage clarification</H1>
<!--htdig_noindex-->
    <B>Gregg Tavares</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20context.drawImage%20clarification&In-Reply-To=%3Cde4bd3190907101838m2bf603b0wc4be214d0e7602d%40mail.gmail.com%3E"
       TITLE="[whatwg] Canvas context.drawImage clarification">gman at google.com
       </A><BR>
    <I>Fri Jul 10 18:38:02 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="063202.html">[whatwg] Canvas context.drawImage clarification
</A></li>
        <LI>Next message: <A HREF="063226.html">[whatwg] Canvas context.drawImage clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63225">[ date ]</a>
              <a href="thread.html#63225">[ thread ]</a>
              <a href="subject.html#63225">[ subject ]</a>
              <a href="author.html#63225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Jul 9, 2009 at 6:25 PM, Oliver Hunt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">oliver at apple.com</A>&gt; wrote:

&gt;<i>  Inconsistency doesn't lead to no one depending on a behaviour, it just
</I>&gt;&gt;<i> means sites only work in one browser.  Your suggesting would result in sites
</I>&gt;&gt;<i> being broken in all browsers -- the only options from here on out are either
</I>&gt;&gt;<i> nothing gets drawn (as in gecko and presto), or the destination is
</I>&gt;&gt;<i> normalised (as in webkit).
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Or making it consistent when the DOCTYPE is set to something.
</I>&gt;<i>
</I>&gt;<i> API behaviour is not effected by the DOCTYPE, only parsing.  Unfortunately
</I>&gt;<i> you can't change a DOM API that has existed for years to something
</I>&gt;<i> contradictory.
</I>&gt;<i>
</I>
I guess I don't understand. I'm new to the list so forgive me but I thought
HTML5 was still a working draft and that the canvas tag was part of that
draft. How is a draft immutable?

Also, I don't follow the logic here: &quot; Your suggesting would result in sites
being broken in all browsers -- the only options from here on out are either
nothing gets drawn (as in gecko and presto), or the destination is
normalised (as in webkit).&quot;

I don't see how breaking some very small percentage of Webkit sites, or
breaking some very small percentage of Gecko/Presto sites is better than
from breaking some very small percentage of sites in all of them to make the
function useful and the spec specific.

(1) The number of sites that use cavnas is exceeding small at this point and
the number of those that count on negative width and height behavior being
one way or the other is and exceedingly small percent of those

(2) breaking some apps is the same as breaking some apps where some #1 is X
and some #2 is Y.  So what if X &gt; Y if both X and Y are less than 0.000001%
of websites.

Consistency and usefulness should win in this case. There is the chance to
make the spec unambiguous and more useful before canvas becomes widely used.



&gt;<i>
</I>&gt;<i>  Image scaling is implementation dependent everywhere else, why would it
</I>&gt;&gt;&gt;<i> be spec defined in the case of canvas?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There are 2 issues here I brought up
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1) What happens at the edges.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The results are VASTLY different now. Unless this works consistently it
</I>&gt;&gt;<i> would be hard to make canvas graphics work across browsers and expect get
</I>&gt;&gt;<i> reproducible results.  The 2x2 pixel example I gave, one browser ends up
</I>&gt;&gt;<i> scaling with translucency even though there is no translucent pixels in the
</I>&gt;&gt;<i> source image.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is just an artifact of scaling, and you agree below that scaling is
</I>&gt;&gt;<i> implementation dependent.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I disagree. When I scale a rectangular opaque image I expect rectangular
</I>&gt;<i> opaque results.  The Firefox implementation does not do this. If I take a
</I>&gt;<i> 1x1 pixel image and attempt to use it to cover up something in another image
</I>&gt;<i> by scaling it it will not cover up that other image. Only the very center
</I>&gt;<i> pixel will be opaque, all other pixels will be some percentage translucent,
</I>&gt;<i> showing whatever was previously drawn on the canvas.  That's a much bigger
</I>&gt;<i> issue than whether the scaled pixels are blocky or smooth.
</I>&gt;<i>
</I>&gt;<i> If you believe that to be the case then you can always file a bug at
</I>&gt;<i> bugs.webkit.org .
</I>&gt;<i>
</I>
I can't claim it's a bug if the spec doesn't define what the correct
behavior is.

Here's a webpage showing the issue.

<A HREF="http://greggman.com/downloads/examples/canvas-test/test-01/canvas-test-01-results.html">http://greggman.com/downloads/examples/canvas-test/test-01/canvas-test-01-results.html</A>



&gt;<i>
</I>&gt;<i> --Oliver
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090710/8cc29542/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090710/8cc29542/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063202.html">[whatwg] Canvas context.drawImage clarification
</A></li>
	<LI>Next message: <A HREF="063226.html">[whatwg] Canvas context.drawImage clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63225">[ date ]</a>
              <a href="thread.html#63225">[ thread ]</a>
              <a href="subject.html#63225">[ subject ]</a>
              <a href="author.html#63225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
