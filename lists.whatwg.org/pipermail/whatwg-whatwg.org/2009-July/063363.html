<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Browser Bundled Javascript Repository
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Browser%20Bundled%20Javascript%20Repository&In-Reply-To=%3C4635E732-774B-47BC-A511-B99A42329C51%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063312.html">
   <LINK REL="Next"  HREF="063269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Browser Bundled Javascript Repository</H1>
<!--htdig_noindex-->
    <B>Joseph Pecoraro</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Browser%20Bundled%20Javascript%20Repository&In-Reply-To=%3C4635E732-774B-47BC-A511-B99A42329C51%40gmail.com%3E"
       TITLE="[whatwg] Browser Bundled Javascript Repository">joepeck02 at gmail.com
       </A><BR>
    <I>Tue Jul 14 09:21:17 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="063312.html">[whatwg] Browser Bundled Javascript Repository
</A></li>
        <LI>Next message: <A HREF="063269.html">[whatwg] Browser Bundled Javascript Repository
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63363">[ date ]</a>
              <a href="thread.html#63363">[ thread ]</a>
              <a href="subject.html#63363">[ subject ]</a>
              <a href="author.html#63363">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> On Jul 13, 2009, at 3: 01PM, Aryeh Gregor wrote:
</I>&gt;<i> How about you have an extra HTTP header like &quot;X-Content-Hash&quot;?  This
</I>&gt;<i> could provide a SHA256 hash (or something else that looks safe for
</I>&gt;<i> now, progressively upgradeable) of the content.  The browser can keep
</I>&gt;<i> its cached copies of these files indexed by hash.  If it tries
</I>&gt;<i> downloading a file, and notices that the hash is the same as a file
</I>&gt;<i> already downloaded, it can terminate the HTTP connection and use the
</I>&gt;<i> existing file (even if it's from a different site).  It will then
</I>&gt;<i> proceed as though it had actually downloaded the file: e.g., it will
</I>&gt;<i> respect the Expires headers separately (two sites might serve the same
</I>&gt;<i> file but have different expectations about how likely it is to
</I>&gt;<i> change).
</I>

I think thats brilliant.  Its a cache that works across all sites.

&gt;<i> On Jul 13, 2009, at 3: 01PM, Aryeh Gregor wrote:
</I>&gt;<i> The most obvious place to solve this seems to be HTTP, not HTML.  HTTP
</I>&gt;<i> is closer to the resource itself.  If you do something with HTML, like
</I>&gt;<i> an extra &lt;link&gt; attribute, then you're going to get authors updating
</I>&gt;<i> the HTML but not the thing it points to or vice versa.  An ETag-like
</I>&gt;<i> solution would be implemented either in the web server or whatever
</I>&gt;<i> script is serving the content, and those should always know whether
</I>&gt;<i> the file has changed.  (Modulo pathological behavior like something
</I>&gt;<i> changing the file and then forging the mtime/ctime.)
</I>
I agree.


&gt;<i> On Jul 13, 2009, at 4: 20PM, Aryeh Gregor wrote:
</I>&gt;<i> Does anyone have statistics on how useful this would be in real life?
</I>&gt;<i> I suspect only marginally.
</I>
I think this is the most important aspect of this idea.  We don't yet  
know if this is worth doing yet.

It is likely only preventing the initial download of some files.   
However some of the initial framework sizes are getting hefty: (These  
were the sizes just pulled from google's hosted libraries for the  
latest versions)

     91K  dojo.xd.js
     79K  ext-core.js
    182K  jquery-ui.min.js
     56K  jquery.min.js
    127K  prototype.js
    2.6K  scriptaculous.js
     10K  swfobject.js
     27K  yuiloader-min.js

I'm guessing that mobile browsers would benefit from not needing to  
download a few of those 100KB downloads and use up an HTTP Connection  
to do so.  And speaking of mobile, there are some mobile specific web  
application frameworks (I'm thinking of ones for iPhone web apps) that  
don't have a single cache point (like google) that weigh in pretty  
heavily.

Real statistics would make it obvious wether or not this is a good  
idea.  But even still, I like the HTTP idea, because at that point its  
just a more efficient way to cache files, by content, across all the  
entire web, rather then site specific and by name/URL.

- Joe

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063312.html">[whatwg] Browser Bundled Javascript Repository
</A></li>
	<LI>Next message: <A HREF="063269.html">[whatwg] Browser Bundled Javascript Repository
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63363">[ date ]</a>
              <a href="thread.html#63363">[ thread ]</a>
              <a href="subject.html#63363">[ subject ]</a>
              <a href="author.html#63363">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
