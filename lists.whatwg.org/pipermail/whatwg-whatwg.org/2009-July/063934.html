<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] autobuffer on &quot;new Audio&quot; objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20autobuffer%20on%20%22new%20Audio%22%20objects&In-Reply-To=%3C98edab2e0907310520i53a882f5s6bd787aa5c8e4068%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063939.html">
   <LINK REL="Next"  HREF="063941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] autobuffer on &quot;new Audio&quot; objects</H1>
<!--htdig_noindex-->
    <B>David Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20autobuffer%20on%20%22new%20Audio%22%20objects&In-Reply-To=%3C98edab2e0907310520i53a882f5s6bd787aa5c8e4068%40mail.gmail.com%3E"
       TITLE="[whatwg] autobuffer on &quot;new Audio&quot; objects">dw at botanicus.net
       </A><BR>
    <I>Fri Jul 31 05:20:10 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="063939.html">[whatwg] autobuffer on &quot;new Audio&quot; objects
</A></li>
        <LI>Next message: <A HREF="063941.html">[whatwg] autobuffer on &quot;new Audio&quot; objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63934">[ date ]</a>
              <a href="thread.html#63934">[ thread ]</a>
              <a href="subject.html#63934">[ subject ]</a>
              <a href="author.html#63934">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>2009/7/31 Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt;:
&gt;<i> On Mon, 20 Jul 2009, David Wilson wrote:
</I>&gt;&gt;<i> 2009/7/19 Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt;:
</I>&gt;&gt;<i> &gt; On Mon, 6 Jul 2009, Robert O'Callahan wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; When script creates an audio element using the &quot;new Audio&quot; constructor,
</I>&gt;&gt;<i> &gt;&gt; the 'autobuffer' attribute should be automatically set on that element.
</I>&gt;&gt;<i> &gt;&gt; Presumably scripts will only create audio elements that they actually
</I>&gt;&gt;<i> &gt;&gt; intend to play.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Done.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This seems like surprising behaviour (and a nasty asymmetry between
</I>&gt;&gt;<i> markup and JS): for the savings of a single line of code, creating a
</I>&gt;&gt;<i> new element will automatically result in (high bandwidth) network IO.
</I>&gt;<i>
</I>&gt;<i> Only if the user agent honours the autobuffer attribute. It doesn't have
</I>&gt;<i> to.
</I>
I still don't understand the 'why' of this, whereas the 'why not'
seems clear. It might be useful (in a &quot;saving an extra line of code&quot;
kind of way), but the fact it implicitly causes potentially high
bandwidth IO seems more wasteful than convenient.

What about adding an autobuffer parameter to the constructor which
defaults to false?

&gt;&gt;<i> I don't think the intent of creating Audio instances clearly always
</I>&gt;&gt;<i> means playback will happen.
</I>&gt;<i>
</I>&gt;<i> What other use cases do you have in mind?
</I>
The playlist example given doesn't seem that unreasonable, it's
something an unsuspecting developer might do in a hurry.

It's a good idea to make types as general as possible, particularly
for browsers where libraries like jQuery make it convenient to treat
DOM nodes as data structures. Forcing a user to type extra
(&quot;document.createElement('audio')&quot;) in order to avoid surprising
functionality doesn't seem right.

&gt;&gt;<i> It's easy to see how some naively implemented JS audio widget could
</I>&gt;&gt;<i> fetch 200mb over an expensive 3G connection, simply by navigating to
</I>&gt;&gt;<i> some site in a background tab (say, by creating an array of elements to
</I>&gt;&gt;<i> represent their playlist - something I'd have thought was perfectly
</I>&gt;&gt;<i> valid behaviour).
</I>&gt;<i>
</I>&gt;<i> A mobile phone would not autobuffer in a background tab
</I>
3G doesn't mean mobile phone. I barely use my phone's browser, but use
net via Bluetooth all the time, various Dell laptops come with 3G
available as an option built in, for many in Africa its the only
available network, etc.


David

-- 
Reality is that which, when you stop believing in it, doesn't go away.
  &#8212; Philip K. Dick

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063939.html">[whatwg] autobuffer on &quot;new Audio&quot; objects
</A></li>
	<LI>Next message: <A HREF="063941.html">[whatwg] autobuffer on &quot;new Audio&quot; objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63934">[ date ]</a>
              <a href="thread.html#63934">[ thread ]</a>
              <a href="subject.html#63934">[ subject ]</a>
              <a href="author.html#63934">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
