<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] syncing attachments to an offline-capable client?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20syncing%20attachments%20to%20an%20offline-capable%20client%3F&In-Reply-To=%3Cfa2eab050907221806y5e732d3tbd17ad3159ac77f0%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063583.html">
   <LINK REL="Next"  HREF="063584.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] syncing attachments to an offline-capable client?</H1>
<!--htdig_noindex-->
    <B>Michael Nordman</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20syncing%20attachments%20to%20an%20offline-capable%20client%3F&In-Reply-To=%3Cfa2eab050907221806y5e732d3tbd17ad3159ac77f0%40mail.gmail.com%3E"
       TITLE="[whatwg] syncing attachments to an offline-capable client?">michaeln at google.com
       </A><BR>
    <I>Wed Jul 22 18:06:26 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="063583.html">[whatwg] syncing attachments to an offline-capable client?
</A></li>
        <LI>Next message: <A HREF="063584.html">[whatwg] &quot;Encoding declaration state&quot; I hate the wording.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63587">[ date ]</a>
              <a href="thread.html#63587">[ thread ]</a>
              <a href="subject.html#63587">[ subject ]</a>
              <a href="author.html#63587">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>There is a proposal in the w3c world that attempts to address this use
case...<A HREF="http://dev.w3.org/2006/webapi/DataCache/">http://dev.w3.org/2006/webapi/DataCache/</A>

There seems to be a growing consensus (on the public-webapps list) that the
feature set described in that proposal should be folded in as an extension
to the appcache. The draft encompasses some features that have historically
been mentioned for the appcache and are reflective of Gears.


On Wed, Jul 22, 2009 at 5:14 PM, Aaron Whyte &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">awhyte at google.com</A>&gt; wrote:

&gt;<i> Forums, bug trackers, mail programs, photo apps, etc. all have allow users
</I>&gt;<i> to download attachments or view them inline in the browser.  An
</I>&gt;<i> offline-capable app should be able to sync attachments down to the browser,
</I>&gt;<i> as data.  There may be thousands of such resources for one app, added and
</I>&gt;<i> removed constantly, as part of data synchronization.
</I>&gt;<i>
</I>&gt;<i> Here's one way to sync a single attachment down to an offline-capable
</I>&gt;<i> client, by abusing the app cache:
</I>&gt;<i> 1) Client creates a hidden iframe with the URL
</I>&gt;<i> /manifestwrapper/&lt;attachmentID&gt;
</I>&gt;<i> 2) Server responds with a tiny HTML page whose sole purpose is to deliver a
</I>&gt;<i> manifest attribute, pointing to /manifest/&lt;attachmentID&gt;
</I>&gt;<i> 3) The client requests the manifest, which has one URL in it:
</I>&gt;<i> /attachment/&lt;attachmentID&gt;
</I>&gt;<i> 4) Finally, the client requests the attachment and stored it locally.
</I>&gt;<i>
</I>&gt;<i> This isn't great, for a lot of reasons:
</I>&gt;<i> - It makes it hard to uninstall an offline client, because there are
</I>&gt;<i> potentially thousands of teeny manifests.
</I>&gt;<i> - It's unlikely to scale well, since it's kind of abusing the browser.
</I>&gt;<i> - It takes 3 server round trips to sync one attachment.
</I>&gt;<i> - It can't be done from a worker thread, since an HTML page is needed to
</I>&gt;<i> provide a manifest attribute.
</I>&gt;<i>
</I>&gt;<i> It'd be a lot better to have a JS API to capture new URLs.  Since they're
</I>&gt;<i> web resources, it's tempting to associate this with the app cache.  But the
</I>&gt;<i> update strategy is totally different from the app cache's, so a more
</I>&gt;<i> data-centric object might be more appropriate.  And if it could be pure JS,
</I>&gt;<i> callable from a worker, even better.
</I>&gt;<i>
</I>&gt;<i> Gears has something just like this:
</I>&gt;<i> <A HREF="http://code.google.com/apis/gears/api_localserver.html#ResourceStore">http://code.google.com/apis/gears/api_localserver.html#ResourceStore</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090722/b4427da0/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090722/b4427da0/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063583.html">[whatwg] syncing attachments to an offline-capable client?
</A></li>
	<LI>Next message: <A HREF="063584.html">[whatwg] &quot;Encoding declaration state&quot; I hate the wording.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63587">[ date ]</a>
              <a href="thread.html#63587">[ thread ]</a>
              <a href="subject.html#63587">[ subject ]</a>
              <a href="author.html#63587">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
