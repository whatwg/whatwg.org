<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Feedback on UndoManager spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Feedback%20on%20UndoManager%20spec&In-Reply-To=%3CCA%2Bc2ei9X5CizfSuSW5Ev%3D4HeUuFhcJ83GbCYsWz1uqzLwYMQnA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033655.html">
   <LINK REL="Next"  HREF="033658.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Feedback on UndoManager spec</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Feedback%20on%20UndoManager%20spec&In-Reply-To=%3CCA%2Bc2ei9X5CizfSuSW5Ev%3D4HeUuFhcJ83GbCYsWz1uqzLwYMQnA%40mail.gmail.com%3E"
       TITLE="[whatwg] Feedback on UndoManager spec">jonas at sicking.cc
       </A><BR>
    <I>Wed Oct 26 23:06:42 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="033655.html">[whatwg] Feedback on UndoManager spec
</A></li>
        <LI>Next message: <A HREF="033658.html">[whatwg] Feedback on UndoManager spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33656">[ date ]</a>
              <a href="thread.html#33656">[ thread ]</a>
              <a href="subject.html#33656">[ subject ]</a>
              <a href="author.html#33656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Oct 26, 2011 at 9:06 PM, Ryosuke Niwa &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">rniwa at webkit.org</A>&gt; wrote:
&gt;<i> On Wed, Oct 26, 2011 at 8:21 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Why is it problematic to move an element with an undoManager from one
</I>&gt;&gt;<i> document to another. If all the data that the undomanager needs lives
</I>&gt;&gt;<i> inside the undoManager object itself, it seems quite possible to move
</I>&gt;&gt;<i> between documents or even interact with while not inside a document.
</I>&gt;<i>
</I>&gt;<i> The problem is that if the undo manager has automatic transactions in them,
</I>&gt;<i> then they'll have references to nodes to undo/redo transactions. But those
</I>&gt;<i> nodes's owner document is still that of the old document. At least in
</I>&gt;<i> WebKit, this will be a bit of an issue.
</I>
The way that the DOM4 spec is written these days, those nodes will get
automatically adopted when they are inserted into the new document.

If webkit has limitations around that, those limitations needs to be
fixed anyway in order to implement DOM4 correctly.

&gt;&gt;<i> Note that the upcoming mutation observer spec makes no difference
</I>&gt;&gt;<i> between nodes in a document and nodes which are not. So if the
</I>&gt;&gt;<i> undoManager uses the same backend, or is even built on top of it, then
</I>&gt;&gt;<i> things will just automatically work.
</I>&gt;<i>
</I>&gt;<i> I thought about implementing UndoManager on top of new DOM mutation observer
</I>&gt;<i> API, but the&#160;asynchronous nature of new notification API makes it a little
</I>&gt;<i> hard, if not impossible, to implement UndoManager's synchronous API
</I>&gt;<i> correctly.
</I>
In Gecko we're implementing both specs on the same synchronous backend.

You're right that implementing on top of the notification API is
likely going to be hard.

/ Jonas
</PRE>

































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033655.html">[whatwg] Feedback on UndoManager spec
</A></li>
	<LI>Next message: <A HREF="033658.html">[whatwg] Feedback on UndoManager spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33656">[ date ]</a>
              <a href="thread.html#33656">[ thread ]</a>
              <a href="subject.html#33656">[ subject ]</a>
              <a href="author.html#33656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
