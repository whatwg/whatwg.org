<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [CORS] WebKit tainting image instead of throwing error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BCORS%5D%20WebKit%20tainting%20image%20instead%20of%20throwing%20error&In-Reply-To=%3CCAJE5ia-ft5bv49e%2BdzbXTLhVOeTR5JnYeEoHdOeJeUkOxEacgA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075713.html">
   <LINK REL="Next"  HREF="075715.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [CORS] WebKit tainting image instead of throwing error</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BCORS%5D%20WebKit%20tainting%20image%20instead%20of%20throwing%20error&In-Reply-To=%3CCAJE5ia-ft5bv49e%2BdzbXTLhVOeTR5JnYeEoHdOeJeUkOxEacgA%40mail.gmail.com%3E"
       TITLE="[whatwg] [CORS] WebKit tainting image instead of throwing error">w3c at adambarth.com
       </A><BR>
    <I>Thu Oct  6 08:19:36 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="075713.html">[whatwg] [CORS] WebKit tainting image instead of throwing error
</A></li>
        <LI>Next message: <A HREF="075715.html">[whatwg] [CORS] WebKit tainting image instead of throwing error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75714">[ date ]</a>
              <a href="thread.html#75714">[ thread ]</a>
              <a href="subject.html#75714">[ subject ]</a>
              <a href="author.html#75714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Oct 6, 2011 at 8:16 AM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt; wrote:
&gt;<i> On Thu, 06 Oct 2011 17:05:29 +0200, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The reason it's implemented like that is because I didn't add any new
</I>&gt;&gt;<i> security checks. &#160;I just expanded the canvas taint-checking code to
</I>&gt;&gt;<i> understand that a CORS-approved image could pass.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> w.r.t. to blocking the whole image, there isn't any security benefit
</I>&gt;&gt;<i> for doing so (if we did so, attackers would just omit the crossorigin
</I>&gt;&gt;<i> attribute). &#160;If you want to prevent folks from embedding the image,
</I>&gt;&gt;<i> you need something that works regardless of how the image was
</I>&gt;&gt;<i> requested (like From-Origin).
</I>&gt;<i>
</I>&gt;<i> You mean WebKit does not support the crossorigin attribute at all? That is
</I>&gt;<i> how I envisioned CORS to work for &lt;img&gt;.
</I>
WebKit does support the crossorigin attribute.  When we issue the
request, if the img has the crossorigin attribute, we add CORS
requests headers.  If an image is ever drawn onto a canvas, then we
check whether it taints the canvas.  If it's an image from another
origin, it taints the canvas unless CORS says otherwise.

Odin is asking why an img with the crossorigin attribute doesn't fail
to load entirely if the server doesn't supply appropriate CORS
headers.

Adam

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075713.html">[whatwg] [CORS] WebKit tainting image instead of throwing error
</A></li>
	<LI>Next message: <A HREF="075715.html">[whatwg] [CORS] WebKit tainting image instead of throwing error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75714">[ date ]</a>
              <a href="thread.html#75714">[ thread ]</a>
              <a href="subject.html#75714">[ subject ]</a>
              <a href="author.html#75714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
