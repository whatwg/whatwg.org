<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [CORS] WebKit tainting image instead of throwing error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BCORS%5D%20WebKit%20tainting%20image%20instead%20of%20throwing%20error&In-Reply-To=%3Cop.v2xu8nvp49xobu%40id-c0850%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033443.html">
   <LINK REL="Next"  HREF="033445.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [CORS] WebKit tainting image instead of throwing error</H1>
<!--htdig_noindex-->
    <B>Odin H&#248;rthe Omdal</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BCORS%5D%20WebKit%20tainting%20image%20instead%20of%20throwing%20error&In-Reply-To=%3Cop.v2xu8nvp49xobu%40id-c0850%3E"
       TITLE="[whatwg] [CORS] WebKit tainting image instead of throwing error">odinho at opera.com
       </A><BR>
    <I>Thu Oct  6 09:39:49 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="033443.html">[whatwg] [CORS] WebKit tainting image instead of throwing error
</A></li>
        <LI>Next message: <A HREF="033445.html">[whatwg] [CORS] WebKit tainting image instead of throwing error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33444">[ date ]</a>
              <a href="thread.html#33444">[ thread ]</a>
              <a href="subject.html#33444">[ subject ]</a>
              <a href="author.html#33444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 06 Oct 2011 18:11:54 +0200, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:

&gt;&gt;<i> If they actually want a fallback, they can easily just reload the  
</I>&gt;&gt;<i> picture
</I>&gt;&gt;<i> without crossorigin, and they will probably get the cached image  
</I>&gt;&gt;<i> directly
</I>&gt;&gt;<i> from the browser (because it already has it, only won't show it).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Obviously, if there hadn't been a crossOrigin-attribute, this would be  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> nice way to handle all image fetching.
</I>&gt;<i> It sounds like you're arguing that it's better for developers if we
</I>&gt;<i> fail fast and hard, which is the opposite of how most of the web
</I>&gt;<i> platform is design (vis HTML versus XML).
</I>&gt;<i> The arguments revolving around wishful thinking about how the world
</I>&gt;<i> should have been don't carry much weight for me.
</I>

Well, you're violating the specification. And this is something quite  
different from XML versus HTML.


And also, we're doing the same on XHR. If you set xhr.withCredentials and  
the server do allow your origin, but doesn't allow credentials, you just  
don't send a request without credentials and hope the author doesn't see  
it. That will throw an error.

For new stuff like this, there's no reason being loose. If something  
doesn't work in any browser at all, they will fix it, if it works in one,  
but not any other they will think all the other browsers are doing  
something wrong.

In the spec, you'll get &quot;notified&quot; that your picture won't be tainted, --  
in WebKit's implementation it will just crash when you really try.



Anyway, for my part we could've just not had the &quot;crossorigin&quot; attribute  
at all, and just send Origin-header to all cross-origin images. But then  
everyone needs to do the same thing, and it would apparently also break  
some sites (  
<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032212.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032212.html</A>  
).

-- 
Odin
</PRE>











<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033443.html">[whatwg] [CORS] WebKit tainting image instead of throwing error
</A></li>
	<LI>Next message: <A HREF="033445.html">[whatwg] [CORS] WebKit tainting image instead of throwing error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33444">[ date ]</a>
              <a href="thread.html#33444">[ thread ]</a>
              <a href="subject.html#33444">[ subject ]</a>
              <a href="author.html#33444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
