<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] XSLT and DOCTYPES
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20XSLT%20and%20DOCTYPES&In-Reply-To=%3CPine.LNX.4.62.0812251121300.24109%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017894.html">
   <LINK REL="Next"  HREF="017885.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] XSLT and DOCTYPES</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20XSLT%20and%20DOCTYPES&In-Reply-To=%3CPine.LNX.4.62.0812251121300.24109%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] XSLT and DOCTYPES">ian at hixie.ch
       </A><BR>
    <I>Thu Dec 25 03:24:30 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017894.html">[whatwg] XSLT and DOCTYPES
</A></li>
        <LI>Next message: <A HREF="017885.html">[whatwg] Editorial comment: section 2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17948">[ date ]</a>
              <a href="thread.html#17948">[ thread ]</a>
              <a href="subject.html#17948">[ subject ]</a>
              <a href="author.html#17948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
I haven't made any changes in response to the comments below. The 
XSLT-compat feature is available due to a number of requests, and I don't 
really see any harm in keeping it, even if not everybody needs it.

I haven't changed the keyword to something else, mostly because I haven't 
found a better name yet. This is still an open issue. (&quot;XSLT-compat&quot; as a 
name is convenient, especially for non-XSLT purposes, precisely because it 
grates on people's sensibilities. Something &quot;neater&quot; would have less of a 
discouraging effect. So maybe we should keep the name as is regardless.)

On Thu, 18 Dec 2008, Elliotte Harold wrote:
&gt;<i>
</I>&gt;<i> I managed to miss this one when it went around the first time, but I really
</I>&gt;<i> have to speak up now. The second half of 8.1.1 is unnecessary noise and
</I>&gt;<i> complexity:
</I>&gt;<i> 
</I>&gt;<i> For the purposes of XSLT generators that cannot output HTML markup without a
</I>&gt;<i> DOCTYPE, a DOCTYPE legacy string may be inserted into the DOCTYPE (in the
</I>&gt;<i> position defined above). This string must consist of:
</I>&gt;<i> 
</I>&gt;<i>    1. One or more space characters.
</I>&gt;<i>    2. A string that is an ASCII case-insensitive match for the string
</I>&gt;<i> &quot;PUBLIC&quot;.
</I>&gt;<i>    3. One or more space characters.
</I>&gt;<i>    4. A U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (the quote mark).
</I>&gt;<i>    5. The literal string &quot;XSLT-compat&quot;.
</I>&gt;<i>    6. A matching U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (i.e.
</I>&gt;<i> the same character as in the earlier step marked quote mark).
</I>&gt;<i> 
</I>&gt;<i> In other words, &lt;!DOCTYPE HTML PUBLIC &quot;XSLT-compat&quot;&gt; or &lt;!DOCTYPE HTML PUBLIC
</I>&gt;<i> 'XSLT-compat'&gt;, case-insensitively except for the bit in quotes.
</I>&gt;<i> 
</I>&gt;<i> Since XSLT 1.0 can generate well-formed XHTML without any problems, there
</I>&gt;<i> really is no need for this at all. Documents generated by XSLT that need to be
</I>&gt;<i> conforming should simply be XHTML.
</I>&gt;<i> 
</I>&gt;<i> Furthermore, it is false that XSLT cannot generate an HTML 5 conforming
</I>&gt;<i> DOCTYPE in HTML mode. As proof I present this stylesheet:
</I>&gt;<i> 
</I>&gt;<i> &lt;?xml version=&quot;1.0&quot;?&gt;
</I>&gt;<i> &lt;xsl:stylesheet version=&quot;1.0&quot;
</I>&gt;<i>   xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform&quot;">http://www.w3.org/1999/XSL/Transform&quot;</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>   &lt;xsl:output indent=&quot;yes&quot; method=&quot;html&quot;/&gt;
</I>&gt;<i> 
</I>&gt;<i>   &lt;xsl:template match=&quot;/&quot;&gt;
</I>&gt;<i>     &lt;xsl:text disable-output-escaping='yes'&gt;&amp;lt;!DOCTYPE HTML&gt;&lt;/xsl:text&gt;
</I>&gt;<i>      &lt;html&gt;
</I>&gt;<i>      &lt;/html&gt;
</I>&gt;<i>   &lt;/xsl:template&gt;
</I>&gt;<i> 
</I>&gt;<i> &lt;/xsl:stylesheet&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> and the following output:
</I>&gt;<i> 
</I>&gt;<i> $ xsltproc test.xsl <A HREF="http://www.cafeconleche.org/">http://www.cafeconleche.org/</A>
</I>&gt;<i> &lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;/html&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This should work in any scenario in which the XSLT processor itself is
</I>&gt;<i> serializing the output. If it's merely generating some sort of DOM or tree to
</I>&gt;<i> pass to another process, then all bets are off. However in that scenario,
</I>&gt;<i> other means of producing DOCTYPES are also not guaranteed since the DOCTYPE is
</I>&gt;<i> not part of the XPath 1.0 data model. XSLT can promise a DOCTYPE only when it
</I>&gt;<i> controls the serialization path, regardless of the technique you use to create
</I>&gt;<i> it.
</I>&gt;<i> 
</I>&gt;<i> Most importantly, does it really make sense to add ever more cruft not the
</I>&gt;<i> spec to support every legacy tool and language out there? What if we discover
</I>&gt;<i> that K&amp;R C won't do Unicode? or that some old versions of Java require tags to
</I>&gt;<i> be upper cased? A spec like this should not be making special allowances for
</I>&gt;<i> the languages that may be used to generate it.
</I>&gt;<i> 
</I>&gt;<i> This time I will request a specific action: delete this section completely. It
</I>&gt;<i> has no place in the spec.
</I>
On Thu, 18 Dec 2008, Julian Reschke wrote:
&gt;<i>
</I>&gt;<i> Elliotte Harold wrote:
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; Since XSLT 1.0 can generate well-formed XHTML without any problems, there
</I>&gt;<i> &gt; really is no need for this at all. Documents generated by XSLT that need to
</I>&gt;<i> &gt; be conforming should simply be XHTML.
</I>&gt;<i> &gt; ...
</I>&gt;<i> 
</I>&gt;<i> Now if you can persuade Microsoft to implement XHTML, that might fly.
</I>&gt;<i> 
</I>&gt;<i> &gt; Furthermore, it is false that XSLT cannot generate an HTML 5 conforming
</I>&gt;<i> &gt; DOCTYPE in HTML mode. As proof I present this stylesheet:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;?xml version=&quot;1.0&quot;?&gt;
</I>&gt;<i> &gt; &lt;xsl:stylesheet version=&quot;1.0&quot;
</I>&gt;<i> &gt;   xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform&quot;">http://www.w3.org/1999/XSL/Transform&quot;</A>&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   &lt;xsl:output indent=&quot;yes&quot; method=&quot;html&quot;/&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   &lt;xsl:template match=&quot;/&quot;&gt;
</I>&gt;<i> &gt;     &lt;xsl:text disable-output-escaping='yes'&gt;&amp;lt;!DOCTYPE HTML&gt;&lt;/xsl:text&gt;
</I>&gt;<i> &gt;      &lt;html&gt;
</I>&gt;<i> &gt;      &lt;/html&gt;
</I>&gt;<i> &gt;   &lt;/xsl:template&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;/xsl:stylesheet&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; and the following output:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; $ xsltproc test.xsl <A HREF="http://www.cafeconleche.org/">http://www.cafeconleche.org/</A>
</I>&gt;<i> &gt; &lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;/html&gt;
</I>&gt;<i> 
</I>&gt;<i> Doesn't work with Firefox' builtin XSLT engine which ignores d-o-e (and is
</I>&gt;<i> allowed to do so).
</I>&gt;<i> 
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; Most importantly, does it really make sense to add ever more cruft not the
</I>&gt;<i> &gt; spec to support every legacy tool and language out there? What if we
</I>&gt;<i> &gt; discover that K&amp;R C won't do Unicode? or that some old versions of Java
</I>&gt;<i> &gt; require tags to be upper cased? A spec like this should not be making
</I>&gt;<i> &gt; special allowances for the languages that may be used to generate it.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This time I will request a specific action: delete this section completely.
</I>&gt;<i> &gt; It has no place in the spec.
</I>&gt;<i> &gt; ...
</I>&gt;<i> 
</I>&gt;<i> I totally disagree.
</I>&gt;<i> 
</I>&gt;<i> The spec also fails to mention that there are more use cases than XSLT;
</I>&gt;<i> several HTML serialization methods share this restriction with XSLT's HTML
</I>&gt;<i> output mode. Thus, the spec should continue to allow this, but pick a more
</I>&gt;<i> correct name.
</I>
On Thu, 18 Dec 2008, Jonas Sicking wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; This should work in any scenario in which the XSLT processor itself is
</I>&gt;<i> &gt; serializing the output. If it's merely generating some sort of DOM or tree
</I>&gt;<i> &gt; to pass to another process, then all bets are off. However in that scenario,
</I>&gt;<i> &gt; other means of producing DOCTYPES are also not guaranteed since the DOCTYPE
</I>&gt;<i> &gt; is not part of the XPath 1.0 data model. XSLT can promise a DOCTYPE only
</I>&gt;<i> &gt; when it controls the serialization path, regardless of the technique you use
</I>&gt;<i> &gt; to create it.
</I>&gt;<i> 
</I>&gt;<i> Why does this matter at all if your XSLT outputs a DOM? In such a case
</I>&gt;<i> all you need to do is to ensure that the right type of nodes are
</I>&gt;<i> created. Adding a DOCTYPE of any sort isn't going to affect anything
</I>&gt;<i> as far as I can tell, at least not from an HTML perspective.
</I>&gt;<i> 
</I>&gt;<i> The XSLT spec (at least the 1.0 one) is actually very vague on what
</I>&gt;<i> the result from the transformation is when the output isn't a
</I>&gt;<i> serialized sequence of bytes. I.e. the only mention of how to output
</I>&gt;<i> HTML is in section 16 which is about serialized results, i.e. it
</I>&gt;<i> technically doesn't apply when the result is a DOM. In firefox we do
</I>&gt;<i> however use the HTML output mode to create HTML DOM nodes.
</I>&gt;<i> 
</I>&gt;<i> In any event, this would seem like something that needs to be defined
</I>&gt;<i> in the producer of the DOM, not in HTML in general. Although we could
</I>&gt;<i> call out some specific producers if needed.
</I>
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017894.html">[whatwg] XSLT and DOCTYPES
</A></li>
	<LI>Next message: <A HREF="017885.html">[whatwg] Editorial comment: section 2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17948">[ date ]</a>
              <a href="thread.html#17948">[ thread ]</a>
              <a href="subject.html#17948">[ subject ]</a>
              <a href="author.html#17948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
