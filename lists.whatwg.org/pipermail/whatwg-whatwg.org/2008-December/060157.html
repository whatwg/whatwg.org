<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] XSLT and DOCTYPES
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20XSLT%20and%20DOCTYPES&In-Reply-To=%3C494A7457.6090609%40metalab.unc.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="060153.html">
   <LINK REL="Next"  HREF="060166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] XSLT and DOCTYPES</H1>
<!--htdig_noindex-->
    <B>Elliotte Harold</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20XSLT%20and%20DOCTYPES&In-Reply-To=%3C494A7457.6090609%40metalab.unc.edu%3E"
       TITLE="[whatwg] XSLT and DOCTYPES">elharo at metalab.unc.edu
       </A><BR>
    <I>Thu Dec 18 08:03:35 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="060153.html">[whatwg] MetaExtensions wiki page
</A></li>
        <LI>Next message: <A HREF="060166.html">[whatwg] XSLT and DOCTYPES
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60157">[ date ]</a>
              <a href="thread.html#60157">[ thread ]</a>
              <a href="subject.html#60157">[ subject ]</a>
              <a href="author.html#60157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I managed to miss this one when it went around the first time, but I 
really have to speak up now. The second half of 8.1.1 is unnecessary 
noise and complexity:

For the purposes of XSLT generators that cannot output HTML markup 
without a DOCTYPE, a DOCTYPE legacy string may be inserted into the 
DOCTYPE (in the position defined above). This string must consist of:

    1. One or more space characters.
    2. A string that is an ASCII case-insensitive match for the string 
&quot;PUBLIC&quot;.
    3. One or more space characters.
    4. A U+0022 QUOTATION MARK or U+0027 APOSTROPHE character (the quote 
mark).
    5. The literal string &quot;XSLT-compat&quot;.
    6. A matching U+0022 QUOTATION MARK or U+0027 APOSTROPHE character 
(i.e. the same character as in the earlier step marked quote mark).

In other words, &lt;!DOCTYPE HTML PUBLIC &quot;XSLT-compat&quot;&gt; or &lt;!DOCTYPE HTML 
PUBLIC 'XSLT-compat'&gt;, case-insensitively except for the bit in quotes.

Since XSLT 1.0 can generate well-formed XHTML without any problems, 
there really is no need for this at all. Documents generated by XSLT 
that need to be conforming should simply be XHTML.

Furthermore, it is false that XSLT cannot generate an HTML 5 conforming 
DOCTYPE in HTML mode. As proof I present this stylesheet:

&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot;
   xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot;&gt;

   &lt;xsl:output indent=&quot;yes&quot; method=&quot;html&quot;/&gt;

   &lt;xsl:template match=&quot;/&quot;&gt;
     &lt;xsl:text disable-output-escaping='yes'&gt;&lt;!DOCTYPE HTML&gt;&lt;/xsl:text&gt;
      &lt;html&gt;
      &lt;/html&gt;
   &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;


and the following output:

$ xsltproc test.xsl <A HREF="http://www.cafeconleche.org/">http://www.cafeconleche.org/</A>
&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;/html&gt;


This should work in any scenario in which the XSLT processor itself is 
serializing the output. If it's merely generating some sort of DOM or 
tree to pass to another process, then all bets are off. However in that 
scenario, other means of producing DOCTYPES are also not guaranteed 
since the DOCTYPE is not part of the XPath 1.0 data model. XSLT can 
promise a DOCTYPE only when it controls the serialization path, 
regardless of the technique you use to create it.

Most importantly, does it really make sense to add ever more cruft not 
the spec to support every legacy tool and language out there? What if we 
discover that K&amp;R C won't do Unicode? or that some old versions of Java 
require tags to be upper cased? A spec like this should not be making 
special allowances for the languages that may be used to generate it.

This time I will request a specific action: delete this section 
completely. It has no place in the spec.

-- 
Elliotte Rusty Harold  <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">elharo at metalab.unc.edu</A>
Refactoring HTML Just Published!
<A HREF="http://www.amazon.com/exec/obidos/ISBN=0321503635/ref=nosim/cafeaulaitA">http://www.amazon.com/exec/obidos/ISBN=0321503635/ref=nosim/cafeaulaitA</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="060153.html">[whatwg] MetaExtensions wiki page
</A></li>
	<LI>Next message: <A HREF="060166.html">[whatwg] XSLT and DOCTYPES
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60157">[ date ]</a>
              <a href="thread.html#60157">[ thread ]</a>
              <a href="subject.html#60157">[ subject ]</a>
              <a href="author.html#60157">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
