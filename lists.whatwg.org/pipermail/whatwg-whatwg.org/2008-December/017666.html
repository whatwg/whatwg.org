<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] media elements: Relative seeking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20media%20elements%3A%20Relative%20seeking&In-Reply-To=%3CF3DA3F63-B775-46CF-9699-E293390CC290%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017659.html">
   <LINK REL="Next"  HREF="017629.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] media elements: Relative seeking</H1>
<!--htdig_noindex-->
    <B>Eric Carlson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20media%20elements%3A%20Relative%20seeking&In-Reply-To=%3CF3DA3F63-B775-46CF-9699-E293390CC290%40apple.com%3E"
       TITLE="[whatwg] media elements: Relative seeking">eric.carlson at apple.com
       </A><BR>
    <I>Mon Dec  1 20:51:39 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017659.html">[whatwg] media elements: Relative seeking
</A></li>
        <LI>Next message: <A HREF="017629.html">[whatwg] Video metadata attributes clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17666">[ date ]</a>
              <a href="thread.html#17666">[ thread ]</a>
              <a href="subject.html#17666">[ subject ]</a>
              <a href="author.html#17666">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Dec 1, 2008, at 6:10 PM, Chris Double wrote:

&gt;<i>  The only accurate value I can provide with Ogg is the exact  
</I>&gt;<i> duration if the http server supports byte range requests, or some  
</I>&gt;<i> other out of band duration metadata (X-Content-Duration, etc).  
</I>&gt;<i> Without byte range requests, accurate duration is not possible.
</I>&gt;<i>
</I>   While you can seek to the end of an Ogg file to get duration from  
the last frame's time stamp, you can't do that with every file type.

   For example, an MPEG audio elementary stream (eg. MP3) isn't a file  
format, it is just the raw output from a decoder, and there are no  
time stamps at all so the only way to get an accurate file duration is  
to sum the duration of every sample. It is *possible* to include an  
indication of duration in the file [1][2], but a player must be  
prepared to handle files without any indication as well as files in  
which the stored duration(s) are inconsistent with the observed  
duration.

   As I have noted before, an estimated duration based on the  
calculated duration of the portion(s) of a file that have been  
processed, iteratively refined as more data is seen, works well for  
us. You might try it with files on servers that don't support byte  
range requests, or on machines where you don't want to incur the cost  
of extra network IO.

eric

[1] VBR files can include a header with the number of MPEG audio  
frames in the file. This can be used with the sampling rate to  
calculate the duration.

[2] Some ID3v2 tags include a frame that stores the file duration in  
milliseconds (strangely enough, stored as a string).

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017659.html">[whatwg] media elements: Relative seeking
</A></li>
	<LI>Next message: <A HREF="017629.html">[whatwg] Video metadata attributes clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17666">[ date ]</a>
              <a href="thread.html#17666">[ thread ]</a>
              <a href="subject.html#17666">[ subject ]</a>
              <a href="author.html#17666">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
