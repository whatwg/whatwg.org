<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Embedding images within editable content
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Embedding%20images%20within%20editable%20content&In-Reply-To=%3C49500408.2020000%40degeneration.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="060190.html">
   <LINK REL="Next"  HREF="060188.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Embedding images within editable content</H1>
<!--htdig_noindex-->
    <B>Martin Atkins</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Embedding%20images%20within%20editable%20content&In-Reply-To=%3C49500408.2020000%40degeneration.co.uk%3E"
       TITLE="[whatwg] Embedding images within editable content">mart at degeneration.co.uk
       </A><BR>
    <I>Mon Dec 22 13:18:00 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="060190.html">[whatwg] Embedding images within editable content
</A></li>
        <LI>Next message: <A HREF="060188.html">[whatwg] Embedding images within editable content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60191">[ date ]</a>
              <a href="thread.html#60191">[ thread ]</a>
              <a href="subject.html#60191">[ subject ]</a>
              <a href="author.html#60191">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Tab Atkins Jr. wrote:
&gt;<i> On Mon, Dec 22, 2008 at 1:33 PM, Martin Atkins &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mart at degeneration.co.uk</A>&gt; wrote:
</I>&gt;&gt;<i> However, I'm not sure what the solution is here. If contentEditable was a
</I>&gt;&gt;<i> &quot;real&quot; form widget you could imagine it supporting a multipart/form-data
</I>&gt;&gt;<i> upload of all of its contained images, or something. However, as long as
</I>&gt;&gt;<i> client-side code is manually shifting the data to and from real widgets it's
</I>&gt;&gt;<i> not clear how to do this since you can't just create a file-upload control
</I>&gt;&gt;<i> with the filename pre-populated and submit it transparently.
</I>&gt;<i> 
</I>&gt;<i> You can't create a file input with the filename pre-filled for obvious
</I>&gt;<i> security reasons, but you *can* still do some clever stuff here.  In
</I>&gt;<i> order to add a picture you'll probably need them to go through a file
</I>&gt;<i> dialog anyway to select the picture, and you can make this *actually*
</I>&gt;<i> be the file dialog of a hidden file input.  You can then move this
</I>&gt;<i> input around in the DOM without clearing its value, and submit it
</I>&gt;<i> transparently.
</I>&gt;<i> 
</I>&gt;<i> It's a bit hacky, but hey, web security is Serious Business.
</I>&gt;<i> 
</I>
This is indeed the solution I employed in a webapp I developed some time 
ago. The main irritation with it was that I needed to submit the image 
to the server before it could be displayed in the WYSIWYG view, which 
required considerable hoop-jumping to put the image in a transient 
location that would eventually be cleaned up if the user didn't actually 
end up using the image on the page, or didn't save the page at all. It 
also didn't work in the copy-paste case, though admittedly in that 
situation we usually just ended up linking to off-site images rather 
than file: URLs, since the copy-pasting was from other websites.

In an ideal world, the content and all embedded media would be submitted 
together in the ultimate form submission. One approach would be to use 
multipart/form-data and have the browser act as if the images were in 
file upload form widgets, and another approach suggested by another 
poster was to include the image using a data: URL. In both cases I would 
still want to do some server-side work after submission to extract the 
images and store them separately, but at least the user experience 
matches the expectation that the image is part of the document.

Of course, neither of these approaches have particularly great fallback 
behavior. The data: URL approach looks the most promising, but apps that 
are not written with that in mind will presumably end up serving the 
content with data: URLs and confusing downlevel browsers. At least it'll 
do something sensible in modern browsers, though, while still making the 
images available for extraction server-side if desired.


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="060190.html">[whatwg] Embedding images within editable content
</A></li>
	<LI>Next message: <A HREF="060188.html">[whatwg] Embedding images within editable content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60191">[ date ]</a>
              <a href="thread.html#60191">[ thread ]</a>
              <a href="subject.html#60191">[ subject ]</a>
              <a href="author.html#60191">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
