<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Brest-discuss%5D%20HTML5%20and%20RESTful%20HTTP%20in%20browsers&In-Reply-To=%3CPine.LNX.4.62.0812251136000.24109%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017943.html">
   <LINK REL="Next"  HREF="017952.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Brest-discuss%5D%20HTML5%20and%20RESTful%20HTTP%20in%20browsers&In-Reply-To=%3CPine.LNX.4.62.0812251136000.24109%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] [rest-discuss] HTML5 and RESTful HTTP in browsers">ian at hixie.ch
       </A><BR>
    <I>Thu Dec 25 04:11:39 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017943.html">[whatwg] Methods defined for one document called after that document is no longer the one being displayed
</A></li>
        <LI>Next message: <A HREF="017952.html">[whatwg] Merry Christmas!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17950">[ date ]</a>
              <a href="thread.html#17950">[ thread ]</a>
              <a href="subject.html#17950">[ subject ]</a>
              <a href="author.html#17950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, 17 Nov 2008 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mike at mykanjo.co.uk</A> wrote:
&gt;<i> 
</I>&gt;<i> I've read that HTML5 will be providing markup for the PUT and DELETE 
</I>&gt;<i> methods. This is definitely good news - but I considered something else 
</I>&gt;<i> recently that, from what I can gather, is not in the current spec for 
</I>&gt;<i> HTML5; markup for specifying appropriate Accept headers for requests.
</I>
What problem would such a feature solve?


&gt;<i> I brought this up recently in #whatwg on freenode, and I was informed 
</I>&gt;<i> that this is not currently being considered since the equivalent can be 
</I>&gt;<i> achieved by a URL parameter such as '?type=application/xml'. Many would 
</I>&gt;<i> not Accept (pun intended - sorry) that this method was significantly 
</I>&gt;<i> different, some even went as far as to suggest (disturbingly) that 
</I>&gt;<i> serving multiple content-types from the same URI is undesirable!
</I>
Indeed, content negotiation on the Web has not been a particularly roaring 
success, and it would probably have been better if we had avoided 
intoducing it, but that's an issue for another working group (and another 
era, probably -- we're likely stuck with it now).


On Mon, 17 Nov 2008, Adrian Sutton wrote:
&gt;<i> 
</I>&gt;<i> I don't see why the Accept header when following links or requesting 
</I>&gt;<i> images should be controlled by anything other than the browser.  It's 
</I>&gt;<i> the browser that has to decide actually render the returned content so 
</I>&gt;<i> it's in the best position to decide what it can accept, not the page 
</I>&gt;<i> author.
</I>
That does seem like a valid point.


On Mon, 17 Nov 2008 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mike at mykanjo.co.uk</A> wrote:
&gt;<i> 
</I>&gt;<i> as an example:
</I>&gt;<i> 
</I>&gt;<i> &lt;a href=&quot;<A HREF="http://example.com/report&quot;">http://example.com/report&quot;</A>&gt;html report&lt;/a&gt;
</I>&gt;<i> &lt;a href=&quot;<A HREF="http://example.com/report&quot;">http://example.com/report&quot;</A> Accept=&quot;application/pdf&quot;&gt;pdf report&lt;/a&gt;
</I>&gt;<i> &lt;a href=&quot;<A HREF="http://example.com/report&quot;">http://example.com/report&quot;</A> Accept=&quot;application/rss+xml&quot;&gt;xml report&lt;/a&gt;
</I>&gt;<i> 
</I>&gt;<i> So I can send a colleague a message; 'you can get the report at 
</I>&gt;<i> <A HREF="http://example.com/report',">http://example.com/report',</A> and they can use that URL in any user agent 
</I>&gt;<i> that is appropriate. A browser is a special case in which many different 
</I>&gt;<i> content-types are dealt with. The same benefit is not achieved if the 
</I>&gt;<i> content is negotiated via the URL, since the user would have to know the 
</I>&gt;<i> type their user agent required and modify the URL accordingly:
</I>&gt;<i> 
</I>&gt;<i> example.com/report?type=application/rss+xml
</I>&gt;<i> 
</I>&gt;<i> To me, this is a much cleaner and more appropriate use of a URI. Not to 
</I>&gt;<i> mention more user-friendly. Something, I believe should be encouraged - 
</I>&gt;<i> this is why I feel it would be an important addition to HTML5.
</I>
People do this today:

   &lt;a href=&quot;<A HREF="http://example.com/report.html&quot;">http://example.com/report.html&quot;</A>&gt;html report&lt;/a&gt;
   &lt;a href=&quot;<A HREF="http://example.com/report.pdf&quot;">http://example.com/report.pdf&quot;</A>&gt;pdf report&lt;/a&gt;
   &lt;a href=&quot;<A HREF="http://example.com/report.xml&quot;">http://example.com/report.xml&quot;</A>&gt;xml report&lt;/a&gt;

...with the e-mail just saying:   

   <A HREF="http://example.com/report">http://example.com/report</A>

...and Apache's content-negotiation module working out the best file to 
return.

This works today, what's the problem with it? (Other than theoretical 
purity concerns, which have been argued both ways here and are thus not a 
useful criteria to evaluate solutions by.)


On Mon, 17 Nov 2008, Adrian Sutton wrote:
&gt;<i> 
</I>&gt;<i> The reason this is basically never used today is two fold:
</I>&gt;<i> 1. It requires correctly configuring the server, beyond just putting files
</I>&gt;<i> on the file system.  Very few people actually do this.
</I>&gt;<i> 2. It requires the user to see a URL and decide that they want to paste it
</I>&gt;<i> into Acrobat instead of their browser, without any indication that it would
</I>&gt;<i> actually work.
</I>
Indeed. Content negotiation is not really compatible with the mental model 
people have of URLs (which is more similar to their model of files than to 
the model that URIs really represent).


On Mon, 17 Nov 2008, Smylers wrote:
&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mike at mykanjo.co.uk</A> writes:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So I can send a colleague a message; 'you can get the report at 
</I>&gt;<i> &gt; <A HREF="http://example.com/report',">http://example.com/report',</A> and they can use that URL in any user 
</I>&gt;<i> &gt; agent that is appropriate.
</I>&gt;<i> 
</I>&gt;<i> Except that in practice on receiving a URL like the above, nearly all 
</I>&gt;<i> users will try it in a web browser; they are unlikely to put it into 
</I>&gt;<i> their PDF viewer, in the hope that a PDF version of the report will 
</I>&gt;<i> happen to be available.
</I>
Indeed.


&gt;<i> &gt; A browser is a special case in which many different content-types are 
</I>&gt;<i> &gt; dealt with.
</I>&gt;<i> 
</I>&gt;<i> It's also the most common case.  Supposing I opened the above URL in a 
</I>&gt;<i> browser, and it gave me the HTML version; how would I even know that the 
</I>&gt;<i> PDF version exists?
</I>&gt;<i> 
</I>&gt;<i> Suppose my browser has a PDF plug-in so can render either the HTML or 
</I>&gt;<i> PDF versions, it's harder to bookmark a particular version because the 
</I>&gt;<i> URL is no longer sufficient to identify precisely what I was viewing. 
</I>&gt;<i> Browsers could update the way bookmarks work to deal with this, but any 
</I>&gt;<i> exterrnal (such as web-based) bookmarking tools would also need to 
</I>&gt;<i> change.
</I>&gt;<i> 
</I>&gt;<i> Or suppose the HTML version links to the PDF version.  I wish to 
</I>&gt;<i> download the PDF on a remote server, and happen to have an SSH session 
</I>&gt;<i> open to it.  So I right-click on the link in the HTML version I'm 
</I>&gt;<i> looking at, choose 'Copy Link Location' from the menu, and in the remote 
</I>&gt;<i> shell type wget then paste in the copied link.  If the link explicitly 
</I>&gt;<i> has ?type=PDF in the URL, I get what I want; if the format is specified 
</I>&gt;<i> out of the URL then I've just downloaded the wrong thing.
</I>
Indeed, it does seem that the usability of content-negotiated resources is 
less good thant the usability of distinct resources.


On Mon, 17 Nov 2008, Hallvord R M Steen wrote:
&gt;<i> 
</I>&gt;<i> On the other hand, I'd sort of like
</I>&gt;<i> 
</I>&gt;<i> &lt;a href=&quot;<A HREF="http://example.com/report&quot;">http://example.com/report&quot;</A> AcceptLanguage=&quot;no&quot;&gt;Norwegian&lt;/a&gt;
</I>&gt;<i> &lt;a href=&quot;<A HREF="http://example.com/report&quot;">http://example.com/report&quot;</A> AcceptLanguage=&quot;en&quot;&gt;English&lt;/a&gt;
</I>&gt;<i> 
</I>&gt;<i> As the main problem with using content-negotiation for language right 
</I>&gt;<i> now is that you need to hard-link to actual files (i.e. file.en.html) to 
</I>&gt;<i> give users a way to &quot;override&quot; the negotiation on the fly. (No, nobody 
</I>&gt;<i> will reconfigure their browser to use your site and everyone must be 
</I>&gt;<i> given a choice of language even if they can't control the settings of 
</I>&gt;<i> the browser they happen to use.) It's not good enough though, since one 
</I>&gt;<i> would like the language choice to &quot;stick&quot; automatically - you still need 
</I>&gt;<i> to fall back to cookies and a custom script for handling language choice 
</I>&gt;<i> or &quot;no suitable version&quot; errors.
</I>&gt;<i> 
</I>&gt;<i> Content negotiation is a lot nicer in theory than in practise..
</I>
Indeed.


On Mon, 17 Nov 2008, Mike Kelly wrote:
&gt;<i> 
</I>&gt;<i> I disagree; it's no more clear to end users. There is no reason the 
</I>&gt;<i> status bar at the bottom couldn't say
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://example.com/report">http://example.com/report</A> (PDF Document)
</I>
Personally it seems that distinct URLs pointing to distinct 
representations is more usable, but if we disagree on this then we'll need 
to do studies to determine it one way or the other.


&gt;<i> Trivial addition for browsers to take this information from the Accept 
</I>&gt;<i> attribute. If you put .pdf at the end a URL the server wont necessarily 
</I>&gt;<i> respond with a PDF content type, so any extra certainty you feel from 
</I>&gt;<i> that is artificial. It should be up for interpretation whether you chose 
</I>&gt;<i> to do it this way or not. At the moment HTML is not providing a way to 
</I>&gt;<i> take advantage of HTTP conneg, that's not very fair - particularly given 
</I>&gt;<i> the criticism that 'its not possible at the moment'. Surely a primary 
</I>&gt;<i> objective here must be allowing browser developers to make full use of 
</I>&gt;<i> every aspect of the HTTP protocol?
</I>
Oh, no, not at all. I don't think that's ever even remotely been a goal.


&gt;<i> Well it's not nice in practice because HTML is currently flawed and 
</I>&gt;<i> insufficient as a way of telling browsers how to do it properly. This is 
</I>&gt;<i> entirely my point; let's make HTTP conneg possible in browsers by 
</I>&gt;<i> getting HTML right - and let the developers decide the best practices. 
</I>&gt;<i> By not supporting this part of the HTTP protocol (content negotiation) 
</I>&gt;<i> you are taking something fundamental out of the hands of application 
</I>&gt;<i> developers (client and server side) because you don't think it's 
</I>&gt;<i> necessary.
</I>&gt;<i> 
</I>&gt;<i> The apparent resistance to this confuses me; since the solution is not 
</I>&gt;<i> complicated to implement, completely backwards compatible, and 
</I>&gt;<i> ignorable.
</I>
The resistance is because there is a desire to keep HTML as small as 
possible, and so there is a high bar to entry for new features. We have to 
demonstrate that they are important, that they solve a major problem, and 
that browser vendors are interested in implementing them.


On Tue, 18 Nov 2008, Mike wrote:
&gt;<i> 
</I>&gt;<i> If your system is designed to provide several different content types 
</I>&gt;<i> for users to be able to read/write/update/delete a single resource from 
</I>&gt;<i> various different User Agents - it's totally misleading to provide a 
</I>&gt;<i> separate URL for each of them. Because:
</I>&gt;<i> 
</I>&gt;<i> If I update the information in /report.pdf - does that update the 
</I>&gt;<i> information in /report.html and /report.xml ? They're seperate resources 
</I>&gt;<i> (indicated by seperate URLs) so from a 'usability' point of view, the 
</I>&gt;<i> expected result should be to *only* update that the information in 
</I>&gt;<i> /report.pdf.. but that's not actually the case here since the system 
</I>&gt;<i> will update the information in the other two URLs aswell.
</I>
I don't see why this would be confusing to users. They don't associate 
their data with URIs mentally, they associate them with whatever the site 
is exposing to them.


&gt;<i> This kind of behavior *breaks caching*, for obvious reasons.
</I>
How so? Could you elaborate? How is this different from other people 
editing one file (e.g. forums) or one editing one file causing others to 
change (e.g. blog posts syndicated to multiple pages)?


&gt;<i> It's interesting you mention security actually. Right now - as it stands 
</I>&gt;<i> - your web browser is sending all of its requests with an Accept header 
</I>&gt;<i> that contains a catch-all &quot;*/*&quot;. That is significantly less secure - the 
</I>&gt;<i> fact that you see .pdf at the end of the URL doesn't mean my server 
</I>&gt;<i> isn't about to send you an executable. This is what I was referring to 
</I>&gt;<i> as &quot;artificial certainty&quot;.
</I>
Sending &quot;Accept: application/pdf&quot; doesn't prevent the server from sending 
you an executable either.


On Sat, 22 Nov 2008, Martin Atkins wrote:
&gt;<i> 
</I>&gt;<i> Agreed. I think the assumptions underlying content negotation are 
</I>&gt;<i> flawed, and thus the mechanism itself is flawed and causes confusion and 
</I>&gt;<i> inconvenience when used in practice. The sentiment underlying this 
</I>&gt;<i> proposal seems to be that HTTP content negotation would work fine if 
</I>&gt;<i> only the pesky browsers would support it, but I think there are 
</I>&gt;<i> deeper-rooted problems than simply a lack of browser support.
</I>
Agreed.


&gt;<i> I think a better solution is to publish the HTML version with attributed 
</I>&gt;<i> hyperlinks, like this:
</I>&gt;<i> 
</I>&gt;<i> &lt;link rel=&quot;alternate&quot; type=&quot;application/pdf&quot; href=&quot;document.pdf&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> or, if you prefer:
</I>&gt;<i> 
</I>&gt;<i> &lt;a href=&quot;document.pdf&quot; rel=&quot;alternate&quot; type=&quot;application/pdf&quot;&gt;
</I>&gt;<i>     PDF Version
</I>&gt;<i> &lt;/a&gt;
</I>&gt;<i> 
</I>&gt;<i> In future, once IETF has finished specifying this, it may also be possible to
</I>&gt;<i> do this in the HTTP response headers for non-HTML resources:
</I>&gt;<i> 
</I>&gt;<i> Link: &lt;document.pdf&gt;; rel=&quot;alternate&quot;, type=&quot;application/pdf&quot;
</I>
Indeed.


&gt;<i> This way clients can discover the alternative representations, but the 
</I>&gt;<i> alternative representations are all directly addressable so you can link 
</I>&gt;<i> to a specific representation. This approach is used in practice 
</I>&gt;<i> successfully today to make available Atom representations of HTML pages 
</I>&gt;<i> across the web. Atom feeds are arguably the best example of a successful 
</I>&gt;<i> completely-RESTful API that we have today, so this approach is proven to 
</I>&gt;<i> work.
</I>
And all that without content negotiation, indeed.


[snip e-mails just going around in circles]


On Tue, 18 Nov 2008, Mike wrote:
&gt;<i> 
</I>&gt;<i> The benefits? Oh I don't know.. a markup language that supports the 
</I>&gt;<i> transfer protocol it runs on?!
</I>
Why is this a benefit?

Should we also expose TCP urgent mode data?

There are many features in our underlying protocols that we don't expose. 
Exposing the underlying protocols is not a goal (indeed if anything it's 
an anti-goal, as it can be considered an abstraction violation).


On Tue, 18 Nov 2008, Mike wrote:
&gt;<i> 
</I>&gt;<i> So the Transfer Protocol (HTTP) and the Markup Language (HTML) for Hyper 
</I>&gt;<i> Text are not closely linked?
</I>
They're developed by different working groups in different standards 
organisations with almost no overlap in membership (and as far as I no, no 
overlap in active membership at all, where &quot;active membership&quot; means 
people doing more than just e-mailing the lists, e.g. doing research, 
experimental implementations, editing, testing, etc).

They are in fact not at all closely linked. (They should probably be 
linked more closely than they are.)


I haven't changed the spec in response to this feedback, due to the lack 
of clear use cases. If there are specific user- or author- facing 
problems, please do raise those issues. However, exposing HTTP features is 
not a goal and thus HTTP itself having a feature does not provide a strong 
enough reason to expose that feature to HTML.

Cheers,
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017943.html">[whatwg] Methods defined for one document called after that document is no longer the one being displayed
</A></li>
	<LI>Next message: <A HREF="017952.html">[whatwg] Merry Christmas!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17950">[ date ]</a>
              <a href="thread.html#17950">[ thread ]</a>
              <a href="subject.html#17950">[ subject ]</a>
              <a href="author.html#17950">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
