<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Offscreen canvas (or canvas for web workers).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Offscreen%20canvas%20%28or%20canvas%20for%20web%20workers%29.&In-Reply-To=%3C63df84f1003121820o43017e1bpef8ed23cfa1c664a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067795.html">
   <LINK REL="Next"  HREF="067798.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Offscreen canvas (or canvas for web workers).</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Offscreen%20canvas%20%28or%20canvas%20for%20web%20workers%29.&In-Reply-To=%3C63df84f1003121820o43017e1bpef8ed23cfa1c664a%40mail.gmail.com%3E"
       TITLE="[whatwg] Offscreen canvas (or canvas for web workers).">jonas at sicking.cc
       </A><BR>
    <I>Fri Mar 12 18:20:52 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067795.html">[whatwg] Offscreen canvas (or canvas for web workers).
</A></li>
        <LI>Next message: <A HREF="067798.html">[whatwg] Offscreen canvas (or canvas for web workers).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67797">[ date ]</a>
              <a href="thread.html#67797">[ thread ]</a>
              <a href="subject.html#67797">[ subject ]</a>
              <a href="author.html#67797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Mar 12, 2010 at 4:19 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
&gt;<i> On Fri, Mar 12, 2010 at 3:38 PM, David Levin &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">levin at google.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, Mar 12, 2010 at 2:35 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Fri, Mar 12, 2010 at 12:46 PM, Oliver Hunt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">oliver at apple.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; On Mar 12, 2010, at 12:16 PM, Jonas Sicking wrote:
</I>&gt;&gt;&gt;<i> &gt;&gt; I'm not saying that the proposed API is bad. It just doesn't seem to
</I>&gt;&gt;&gt;<i> &gt;&gt; solve the (seemingly most commonly requested) use case of
</I>&gt;&gt;&gt;<i> &gt;&gt; rotating/scaling images. So if we want to solve those use cases we
</I>&gt;&gt;&gt;<i> &gt;&gt; need to either come up with a separate API for that, or extend this
</I>&gt;&gt;&gt;<i> &gt;&gt; proposal to solve that use case somehow.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Just for reference I think one thing that people are forgetting that
</I>&gt;&gt;&gt;<i> &gt; there is a difference between
</I>&gt;&gt;&gt;<i> &gt; being computationally faster, and being more responsive.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> As I mentioned in my email, if you look at the steps listed, enough of
</I>&gt;&gt;&gt;<i> them happen *on the main thread* that you're spending far more of the
</I>&gt;&gt;&gt;<i> main threads CPU cycles than you'd like. Possibly even more than doing
</I>&gt;&gt;&gt;<i> all the resizing on the main thread.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> With the other improvements suggested by David things do definitely
</I>&gt;&gt;&gt;<i> look different, but those are not in a proposal yet.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There is the other scenario I mentioned, but&#160;I'll see what I can do about
</I>&gt;&gt;<i> separately working up a proposal for adding those methods because they were
</I>&gt;&gt;<i> next on my list to deal with. (fromBlob/load may be enough for this.)
</I>&gt;<i>
</I>&gt;<i> Note that the other proposals that have been made has put toBlob on
</I>&gt;<i> HTMLCanvasElement, not on the context. That makes the most sense for
</I>&gt;<i> the main-thread canvas as that way its available on all contexts.
</I>
Oh, another thing to keep in mind is that if/when we add fromBlob to
the main-thread canvas, it has to be asynchronous in order to avoid
main thread synchronous IO. This isn't a big deal, but I figured I
should mention it while we're on the subject.

In general I wonder if we should add API to convert directly between
Blob and ImageData. Or at least Blob-&gt;ImageData and
ImageData-&gt;ByteArray. That could avoid overhead of going through a
canvas context. That is probably a win no matter which thread we are
on.

We could even add APIs to rotate and scale ImageData objects directly.
If those are asynchronous the implementation could easily implement
them using a background thread. I'm less sure that this is worth it
though given that you can implement this yourself using workers if we
add the other stuff we've talked about.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067795.html">[whatwg] Offscreen canvas (or canvas for web workers).
</A></li>
	<LI>Next message: <A HREF="067798.html">[whatwg] Offscreen canvas (or canvas for web workers).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67797">[ date ]</a>
              <a href="thread.html#67797">[ thread ]</a>
              <a href="subject.html#67797">[ subject ]</a>
              <a href="author.html#67797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
