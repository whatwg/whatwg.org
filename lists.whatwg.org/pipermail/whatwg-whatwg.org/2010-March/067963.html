<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] More questions about the DnD API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20questions%20about%20the%20DnD%20API&In-Reply-To=%3Ccdc844f71003291404q2b44d8e3o7dc569fb601a994c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067942.html">
   <LINK REL="Next"  HREF="067969.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] More questions about the DnD API</H1>
<!--htdig_noindex-->
    <B>Daniel Cheng</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20questions%20about%20the%20DnD%20API&In-Reply-To=%3Ccdc844f71003291404q2b44d8e3o7dc569fb601a994c%40mail.gmail.com%3E"
       TITLE="[whatwg] More questions about the DnD API">dcheng at google.com
       </A><BR>
    <I>Mon Mar 29 14:04:22 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067942.html">[whatwg] More questions about the DnD API
</A></li>
        <LI>Next message: <A HREF="067969.html">[whatwg] More questions about the DnD API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67963">[ date ]</a>
              <a href="thread.html#67963">[ thread ]</a>
              <a href="subject.html#67963">[ subject ]</a>
              <a href="author.html#67963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, Mar 28, 2010 at 1:29 PM, Stef Epardaud &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">stef at epardaud.fr</A>&gt; wrote:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I didn't get any reaction to my previous email unfortunately since I
</I>&gt;<i> think I brought up some valid points, but in any case I have some more
</I>&gt;<i> feedback, so I keep sending :)
</I>&gt;<i>
</I>&gt;<i> I'm still trying to use the DnD for a real-world use, and keep hitting
</I>&gt;<i> problems. This is the HTML 5 draft at 7.9.4 Drag-and-drop processing
</I>&gt;<i> model:
</I>&gt;<i>
</I>&gt;<i> &quot;From this point until the end of the drag-and-drop operation, device
</I>&gt;<i> input events (e.g. mouse and keyboard events) must be suppressed.&quot;
</I>&gt;<i>
</I>&gt;<i> This looks crazy to me. First Mozilla doesn't limit this since I was
</I>&gt;<i> able to get a keypress event while dragging a node. I use this to change
</I>&gt;<i> the behaviour of the drag operation with control/meta/alt keys while
</I>&gt;<i> dragging, the same way file managers do it (at least Gnome Nautilus) and
</I>&gt;<i> lots of other applications (Open Office for example). We need to be able
</I>&gt;<i> to access key events while dragging. There might be a good rationale for
</I>&gt;<i> this limitation stated in the spec, but based on evidence of how DnD is
</I>&gt;<i> used in other applications perhaps it should be reviewed?
</I>&gt;<i>
</I>
DragEvent (via MouseEvent) should expose ctrlKey, altKey, metaKey, and
shiftKey properties.


&gt;<i>
</I>&gt;<i> Personally I also use the key events while dragging to allow the user to
</I>&gt;<i> open folders in order to continue the drag operations inside, instead of
</I>&gt;<i> requiring them to drop the file in the folder, then open the folder and
</I>&gt;<i> drag it again to a subfolder.
</I>&gt;<i>
</I>&gt;<i> I also have a question regarding DnD started in an external application:
</I>&gt;<i> since we get no dragstarted or drag events, how can we detect that
</I>&gt;<i> something wants to be dragged in the window? I want to highlight every
</I>&gt;<i> responsive drop points so the user can know which elements are valid
</I>&gt;<i> drop targets, but failed to get any meaningful interaction with
</I>&gt;<i> dragentered or dragover on the document, or body elements. Surely that's
</I>&gt;<i> a mistake from my part, but since I expect that it's going to be asked a
</I>&gt;<i> lot (when we don't get drag or dragstart events), perhaps it should be
</I>&gt;<i> mentioned in the spec?
</I>&gt;<i>
</I>
dragstart and drag events are fired at the source node, but since you're
dragging from a non-DOM application, you won't get any. You should still be
getting dragenter / dragover / dragleave / drop if the item is
dragged/dropped over a DOM page though. It works for me in WebKit.


&gt;<i>
</I>&gt;<i> Thanks for your help.
</I>&gt;<i> --
</I>&gt;<i> St&#233;phane Epardaud
</I>&gt;<i>
</I>
Of course, I have a question of my own. In
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html#effectAllowed-initialization,">http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html#effectAllowed-initialization,</A>
is it intentional that any drag event can change the value of effectAllowed
for the next event? Does it make sense to making this property settable only
during dragstart / drag?

Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100329/f5835f4b/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100329/f5835f4b/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067942.html">[whatwg] More questions about the DnD API
</A></li>
	<LI>Next message: <A HREF="067969.html">[whatwg] More questions about the DnD API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67963">[ date ]</a>
              <a href="thread.html#67963">[ thread ]</a>
              <a href="subject.html#67963">[ subject ]</a>
              <a href="author.html#67963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
