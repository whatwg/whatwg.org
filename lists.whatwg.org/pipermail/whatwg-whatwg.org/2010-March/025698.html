<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] More questions about the DnD API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20questions%20about%20the%20DnD%20API&In-Reply-To=%3Ccdc844f71003300131q7a3303a0pf4436ec6217b379b%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025696.html">
   <LINK REL="Next"  HREF="025702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] More questions about the DnD API</H1>
<!--htdig_noindex-->
    <B>Daniel Cheng</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20questions%20about%20the%20DnD%20API&In-Reply-To=%3Ccdc844f71003300131q7a3303a0pf4436ec6217b379b%40mail.gmail.com%3E"
       TITLE="[whatwg] More questions about the DnD API">dcheng at google.com
       </A><BR>
    <I>Tue Mar 30 01:31:15 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025696.html">[whatwg] More questions about the DnD API
</A></li>
        <LI>Next message: <A HREF="025702.html">[whatwg] More questions about the DnD API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25698">[ date ]</a>
              <a href="thread.html#25698">[ thread ]</a>
              <a href="subject.html#25698">[ subject ]</a>
              <a href="author.html#25698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Mar 30, 2010 at 12:38 AM, Stef Epardaud &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">stef at epardaud.fr</A>&gt; wrote:

&gt;<i> On Mon, Mar 29, 2010 at 02:04:22PM -0700, Daniel Cheng wrote:
</I>&gt;<i> &gt;      I'm still trying to use the DnD for a real-world use, and keep
</I>&gt;<i> hitting
</I>&gt;<i> &gt;      problems. This is the HTML 5 draft at 7.9.4 Drag-and-drop processing
</I>&gt;<i> &gt;      model:
</I>&gt;<i> &gt;      &quot;From this point until the end of the drag-and-drop operation,
</I>&gt;<i> device
</I>&gt;<i> &gt;      input events (e.g. mouse and keyboard events) must be suppressed.&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    DragEvent (via MouseEvent) should expose ctrlKey, altKey, metaKey, and
</I>&gt;<i> &gt;    shiftKey properties.
</I>&gt;<i>
</I>&gt;<i> But then it's up to the developer to detect that the keys weren't
</I>&gt;<i> pressed before (implement keydown events themselves), which is less
</I>&gt;<i> practical.
</I>&gt;<i>
</I>
If you're copying the behavior of file managers, isn't it simply a matter of
setting dropEffect to whatever the current state of the modifier keys are?

function dragOver(e) {
  if (e.ctrlKey) e.dropEffect = 'copy';
  else e.dropEffect = 'move';
  e.preventDefault();
}

I'm not sure how having separate keyboard events would help in this case,
since you can't set dropEffect directly from a keyboard event.


&gt;<i>
</I>&gt;<i> &gt;    dragstart and drag events are fired at the source node, but since
</I>&gt;<i> you're
</I>&gt;<i> &gt;    dragging from a non-DOM application, you won't get any. You should
</I>&gt;<i> still be
</I>&gt;<i> &gt;    getting dragenter / dragover / dragleave / drop if the item is
</I>&gt;<i> &gt;    dragged/dropped over a DOM page though. It works for me in WebKit.
</I>&gt;<i>
</I>&gt;<i> But if I want to be notified that an external application started a drag
</I>&gt;<i> in my document, where should I place the listener then? document? body
</I>&gt;<i> node?
</I>&gt;<i>
</I>
If an external application initiates a drag in your DOM page via the
appropriate method for your platform, it should be the same as if a user
initiated it. The dragstart event / drag events should end up getting fired
at whatever node the application initiated the drag on. Maybe I'm
misunderstanding your question though...


&gt;<i> --
</I>&gt;<i> St&#233;phane Epardaud
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100330/ce32a98b/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100330/ce32a98b/attachment-0001.htm</A>&gt;
</PRE>

















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025696.html">[whatwg] More questions about the DnD API
</A></li>
	<LI>Next message: <A HREF="025702.html">[whatwg] More questions about the DnD API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25698">[ date ]</a>
              <a href="thread.html#25698">[ thread ]</a>
              <a href="subject.html#25698">[ subject ]</a>
              <a href="author.html#25698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
