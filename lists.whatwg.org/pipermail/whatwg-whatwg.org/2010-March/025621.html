<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSocket bufferedAmount includes overhead or not
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20bufferedAmount%20includes%20overhead%20or%20not&In-Reply-To=%3Cop.u93851ur64w2qv%40annevk-t60%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025615.html">
   <LINK REL="Next"  HREF="025623.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSocket bufferedAmount includes overhead or not</H1>
<!--htdig_noindex-->
    <B>Anne van Kesteren</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20bufferedAmount%20includes%20overhead%20or%20not&In-Reply-To=%3Cop.u93851ur64w2qv%40annevk-t60%3E"
       TITLE="[whatwg] WebSocket bufferedAmount includes overhead or not">annevk at opera.com
       </A><BR>
    <I>Thu Mar 25 02:11:51 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025615.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
        <LI>Next message: <A HREF="025623.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25621">[ date ]</a>
              <a href="thread.html#25621">[ thread ]</a>
              <a href="subject.html#25621">[ subject ]</a>
              <a href="author.html#25621">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 24 Mar 2010 23:08:43 +0100, Olli Pettay &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">Olli.Pettay at helsinki.fi</A>&gt;  
wrote:
&gt;<i> On 3/24/10 11:33 PM, Ian Hickson wrote:
</I>&gt;&gt;<i> I guess I'm unclear on whether bufferedAmount should return:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. the sum of the count of characters sent?
</I>&gt;&gt;<i>     (what would we do when we add binary?)
</I>&gt;<i>
</I>&gt;<i> I believe this is actually what we want.
</I>&gt;<i> If web developer sends a string which is X long,
</I>&gt;<i> bufferedAmount should report X.
</I>&gt;<i>
</I>&gt;<i> And when we add binary, if buffer which has size Y is
</I>&gt;<i> sent, that Y is added to bufferedAmount.
</I>&gt;<i>
</I>&gt;<i> The reason why I'd like it to work this way is that
</I>&gt;<i> IMO scripts should be able to check whether the data
</I>&gt;<i> they have posted is actually sent over the network.
</I>
Wait, so when you pass a DOMString you add the number of 16-bit units and  
when you pass a ByteArray (or whatever we end up calling it) you add the  
number of bytes?


I think what also matters here is how the protocol will evolve. Is it that  
expectation that send(DOMString) can eventually send very different things  
over the wire depending on how the server reacts to the initial handshake  
request? How do the various options we have evaluate against the potential  
scenarios coming out of that?


-- 
Anne van Kesteren
<A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025615.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
	<LI>Next message: <A HREF="025623.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25621">[ date ]</a>
              <a href="thread.html#25621">[ thread ]</a>
              <a href="subject.html#25621">[ subject ]</a>
              <a href="author.html#25621">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
