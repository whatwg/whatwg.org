<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSocket: Events instead of polling bufferedAmount?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%3A%20Events%20instead%20of%20polling%20bufferedAmount%3F&In-Reply-To=%3CPine.LNX.4.64.1003252157500.4055%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025635.html">
   <LINK REL="Next"  HREF="025637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSocket: Events instead of polling bufferedAmount?</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%3A%20Events%20instead%20of%20polling%20bufferedAmount%3F&In-Reply-To=%3CPine.LNX.4.64.1003252157500.4055%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] WebSocket: Events instead of polling bufferedAmount?">ian at hixie.ch
       </A><BR>
    <I>Thu Mar 25 15:01:02 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025635.html">[whatwg] WebSocket: Events instead of polling bufferedAmount?
</A></li>
        <LI>Next message: <A HREF="025637.html">[whatwg] WebSocket: Events instead of polling bufferedAmount?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25636">[ date ]</a>
              <a href="thread.html#25636">[ thread ]</a>
              <a href="subject.html#25636">[ subject ]</a>
              <a href="author.html#25636">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 25 Mar 2010, Ivan Kozik wrote:
&gt;<i> 
</I>&gt;<i> I would much prefer that WebSocket fired an event as data is sent, 
</I>&gt;<i> instead of having applications poll bufferedAmount. [...]
</I>&gt;<i> 
</I>&gt;<i> But, being forced to poll bufferedAmount is suboptimal:
</I>&gt;<i> setTimeout(..., 0) may take 16ms or more to fire, so without hacks,
</I>&gt;<i> applications are limited to making decisions (to generate more data or
</I>&gt;<i> not) at ~16ms intervals.
</I>
Realistically, we probably wouldn't fire events much more often than this 
either. I mean, we wouldn't want to fire an event with each byte sent, 
right? That would quickly overwhelm the system. It's not clear to me what 
else we would do, though.

We could have an event that fires when bufferedAmount becomes zero 
(everything has been sent) or when bufferedAmount doesn't go down for a 
bit (stall), or resumes going down after a stall, but I would feel more 
comfortable waiting until WebSocket has been used for a while before 
adding such events, so that we could work out what it was people actually 
wanted to use, and then provide those.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>








































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025635.html">[whatwg] WebSocket: Events instead of polling bufferedAmount?
</A></li>
	<LI>Next message: <A HREF="025637.html">[whatwg] WebSocket: Events instead of polling bufferedAmount?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25636">[ date ]</a>
              <a href="thread.html#25636">[ thread ]</a>
              <a href="subject.html#25636">[ subject ]</a>
              <a href="author.html#25636">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
