<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] XSS safe templating
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20XSS%20safe%20templating&In-Reply-To=%3C213441389.35988.1268231892352.JavaMail.root%40cm-mail03.mozilla.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067697.html">
   <LINK REL="Next"  HREF="067745.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] XSS safe templating</H1>
<!--htdig_noindex-->
    <B>Henri Sivonen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20XSS%20safe%20templating&In-Reply-To=%3C213441389.35988.1268231892352.JavaMail.root%40cm-mail03.mozilla.org%3E"
       TITLE="[whatwg] XSS safe templating">hsivonen at iki.fi
       </A><BR>
    <I>Wed Mar 10 06:38:12 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067697.html">[whatwg] XSS safe templating
</A></li>
        <LI>Next message: <A HREF="067745.html">[whatwg] XSS safe templating
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67740">[ date ]</a>
              <a href="thread.html#67740">[ thread ]</a>
              <a href="subject.html#67740">[ subject ]</a>
              <a href="author.html#67740">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&quot;Mike Samuel&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mikesamuel at gmail.com</A>&gt; wrote:

&gt;<i> I'm working with EcmaScript TC39 trying to allow for experimentation
</I>&gt;<i> with new content generation techniques in JavaScript.
</I>&gt;<i> There's one missing piece which would let template language authors
</I>&gt;<i> experiment with varying degrees of XSS-safety, and I was hoping that
</I>&gt;<i> a
</I>&gt;<i> change like the below might make it into HTML5.
</I>
Shouldn't XSS-safe templating use the DOM APIs to generate a tree (fragment) instead of trusting the built-in HTML parser of the browser to behave in a certain way?

&gt;<i> When user-code does
</I>&gt;<i> &#160; &#160;document.write(value), myElement.innerHTML = value, etc.
</I>&gt;<i> and the value is an object, currently it is coerced to a string by
</I>&gt;<i> indirectly calling the toString method. &#160;I would like the toString
</I>&gt;<i> method to be called with 'html ' + the current HTML 5 insertion mode
</I>&gt;<i> to give structured template return values a chance to apply
</I>&gt;<i> appropriate escaping schemes. &#160;For attribute sets, it would be nice
</I>&gt;<i> to
</I>&gt;<i> call toString with the argument 'attr ' + attribute name. &#160;This would
</I>&gt;<i> be backwards compatible as toString implementations ignore parameters
</I>&gt;<i> (modulo Number).
</I>
What would the object do with this information? Without knowing how you are planning on using this information and filling in the lack of information with my own guesses, my knee jerk reaction is very negative.

FWIW, in Gecko currently, the stringification happens a few abstraction layers away from the parser, so implementing your suggestion would involve punching holes in those abstractions.

-- 
Henri Sivonen
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hsivonen at iki.fi</A>
<A HREF="http://hsivonen.iki.fi/">http://hsivonen.iki.fi/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067697.html">[whatwg] XSS safe templating
</A></li>
	<LI>Next message: <A HREF="067745.html">[whatwg] XSS safe templating
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67740">[ date ]</a>
              <a href="thread.html#67740">[ thread ]</a>
              <a href="subject.html#67740">[ subject ]</a>
              <a href="author.html#67740">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
