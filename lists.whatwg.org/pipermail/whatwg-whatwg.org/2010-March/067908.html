<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSocket: Events instead of polling bufferedAmount?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%3A%20Events%20instead%20of%20polling%20bufferedAmount%3F&In-Reply-To=%3Cbadc170e1003251451p1977f7bla6267f04e3f95ad2%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067906.html">
   <LINK REL="Next"  HREF="067909.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSocket: Events instead of polling bufferedAmount?</H1>
<!--htdig_noindex-->
    <B>Ivan Kozik</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%3A%20Events%20instead%20of%20polling%20bufferedAmount%3F&In-Reply-To=%3Cbadc170e1003251451p1977f7bla6267f04e3f95ad2%40mail.gmail.com%3E"
       TITLE="[whatwg] WebSocket: Events instead of polling bufferedAmount?">ivan at ludios.org
       </A><BR>
    <I>Thu Mar 25 14:51:35 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067906.html">[whatwg] [html5] r4868 - [giow] (1) Make seeking async since some implementations can't tell if something [...]
</A></li>
        <LI>Next message: <A HREF="067909.html">[whatwg] WebSocket: Events instead of polling bufferedAmount?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67908">[ date ]</a>
              <a href="thread.html#67908">[ thread ]</a>
              <a href="subject.html#67908">[ subject ]</a>
              <a href="author.html#67908">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I would much prefer that WebSocket fired an event as data is sent,
instead of having applications poll bufferedAmount.

An application may want to be aware of how much data is unsent to be
able to lazily generate more data only when it is possible to send the
data immediately. This reduces the &quot;memory commitment&quot; of the client.
With connection methods like Flash's Socket, this data is completely
unavailable, so you must wait for the peer to tell you what you sent.
It's nice that WebSocket makes the information available at all.

But, being forced to poll bufferedAmount is suboptimal:
setTimeout(..., 0) may take 16ms or more to fire, so without hacks,
applications are limited to making decisions (to generate more data or
not) at ~16ms intervals. This is a problem if clients are on local
networks, where the round trip time is 1ms. I know it is possible
to poll faster, but I don't think it's a good solution.

The use cases for client-&gt;server high-volume streaming are not hard to
imagine: a client may want to upload a large amount of text stored
locally without loading more into memory than necessary. Or, a client
may be running a distributed computing application that is limited by
upstream bandwidth.

Thanks,
Ivan

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067906.html">[whatwg] [html5] r4868 - [giow] (1) Make seeking async since some implementations can't tell if something [...]
</A></li>
	<LI>Next message: <A HREF="067909.html">[whatwg] WebSocket: Events instead of polling bufferedAmount?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67908">[ date ]</a>
              <a href="thread.html#67908">[ thread ]</a>
              <a href="subject.html#67908">[ subject ]</a>
              <a href="author.html#67908">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
