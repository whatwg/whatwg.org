<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44 Bogus comment state
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Parsing%20processing%20instructions%20in%20HTML%20syntax%3A%0A%2010.2.4.44%20Bogus%20comment%20state&In-Reply-To=%3CPine.LNX.4.64.1003021051450.20980%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025384.html">
   <LINK REL="Next"  HREF="025393.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44 Bogus comment state</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Parsing%20processing%20instructions%20in%20HTML%20syntax%3A%0A%2010.2.4.44%20Bogus%20comment%20state&In-Reply-To=%3CPine.LNX.4.64.1003021051450.20980%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44 Bogus comment state">ian at hixie.ch
       </A><BR>
    <I>Tue Mar  2 02:54:56 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025384.html">[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44	Bogus comment state
</A></li>
        <LI>Next message: <A HREF="025393.html">[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44 Bogus comment state
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25386">[ date ]</a>
              <a href="thread.html#25386">[ thread ]</a>
              <a href="subject.html#25386">[ subject ]</a>
              <a href="author.html#25386">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 2 Mar 2010, Elliotte Rusty Harold wrote:
&gt;<i>
</I>&gt;<i> The handling of processing instructions in the XHTML syntax seems
</I>&gt;<i> reasonably well-defined; but it feels a little off in the HTML syntax.
</I>
There's no such thing as processing instructions in text/html.

There was such a thing in HTML4, because of its SGML heritage, though it 
was explicitly deprecated.


&gt;<i> Briefly it seems that &lt;? causes the parser to go into Bogus comment 
</I>&gt;<i> state, which is fair enough. (I wouldn't really recommend that anyone 
</I>&gt;<i> use processing instructions in HTML syntax anyway.) However the parser 
</I>&gt;<i> comes out of that state at the first &gt;. Because processing instructions 
</I>&gt;<i> can contain &gt; and terminate only at the two character sequence ?&gt; this 
</I>&gt;<i> could cause PI processing to terminate early and leave a lot more error 
</I>&gt;<i> handling and a confused parser state in the text yet to come.
</I>
In HTML4, PIs ended at the first &gt;, not at ?&gt;. &quot;&lt;?target data&gt;&quot; is the 
syntax of PIs when the SGML options used by HTML4 are applied.

In any case, the parser in HTML5 is based on what browsers do, which is 
also to terminate at the first &gt;. It's unlikely that we can change that, 
given backwards-compatibility needs.

There's a simple workaround: don't use PIs in text/html, since they don't 
exist in HTML5 at all, and don't send XML as text/html, since XML and HTML 
have different syntaxes and aren't compatible.

HTH,
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>













<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025384.html">[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44	Bogus comment state
</A></li>
	<LI>Next message: <A HREF="025393.html">[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44 Bogus comment state
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25386">[ date ]</a>
              <a href="thread.html#25386">[ thread ]</a>
              <a href="subject.html#25386">[ subject ]</a>
              <a href="author.html#25386">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
