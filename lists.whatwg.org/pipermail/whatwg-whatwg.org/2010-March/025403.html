<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSocket bufferedAmount includes overhead or not.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20bufferedAmount%20includes%20overhead%20or%20not.&In-Reply-To=%3Cde17d48e1003031842p7bd175dev8b09819a8385e8f7%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025406.html">
   <LINK REL="Next"  HREF="025405.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSocket bufferedAmount includes overhead or not.</H1>
<!--htdig_noindex-->
    <B>Fumitoshi Ukai (&#40284;&#39164;&#25991;&#25935;)</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20bufferedAmount%20includes%20overhead%20or%20not.&In-Reply-To=%3Cde17d48e1003031842p7bd175dev8b09819a8385e8f7%40mail.gmail.com%3E"
       TITLE="[whatwg] WebSocket bufferedAmount includes overhead or not.">ukai at chromium.org
       </A><BR>
    <I>Wed Mar  3 18:42:01 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025406.html">[whatwg] oninput for contentEditable
</A></li>
        <LI>Next message: <A HREF="025405.html">[whatwg] WebSocket bufferedAmount includes overhead or not.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25403">[ date ]</a>
              <a href="thread.html#25403">[ thread ]</a>
              <a href="subject.html#25403">[ subject ]</a>
              <a href="author.html#25403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I noticed that WebSocket spec updated to not inlcude framing overhead in
bufferedAmount.
<A HREF="http://lists.whatwg.org/pipermail/commit-watchers-whatwg.org/2010/003971.html">http://lists.whatwg.org/pipermail/commit-watchers-whatwg.org/2010/003971.html</A>
I tried to implement it in WebKit, but found it make hard to implement
correctly. <A HREF="https://bugs.webkit.org/show_bug.cgi?id=35571">https://bugs.webkit.org/show_bug.cgi?id=35571</A>
It's easy after WebSocket is closed (just add length of message), but while
it's open, we'll manage buffer including frame bytes and underlying socket
will write arbitrary length of the buffer (may not be on frame boundary)
To get bufferdAmount correctly without framing overhead, we need to parse
the buffer again.  It's not light operation and it's challenge to make it
effective.
I think including frame overhead is much easier.
Could you revert it?

-- 
Fumitoshi Ukai
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100304/aa17036f/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100304/aa17036f/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025406.html">[whatwg] oninput for contentEditable
</A></li>
	<LI>Next message: <A HREF="025405.html">[whatwg] WebSocket bufferedAmount includes overhead or not.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25403">[ date ]</a>
              <a href="thread.html#25403">[ thread ]</a>
              <a href="subject.html#25403">[ subject ]</a>
              <a href="author.html#25403">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
