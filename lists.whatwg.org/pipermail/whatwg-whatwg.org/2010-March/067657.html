<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44	Bogus comment state
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Parsing%20processing%20instructions%20in%20HTML%20syntax%3A%2010.2.4.44%0A%09Bogus%20comment%20state&In-Reply-To=%3C654a2bb31003020244w4934d194k5b56ad85f2561947%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067665.html">
   <LINK REL="Next"  HREF="067659.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44	Bogus comment state</H1>
<!--htdig_noindex-->
    <B>Elliotte Rusty Harold</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Parsing%20processing%20instructions%20in%20HTML%20syntax%3A%2010.2.4.44%0A%09Bogus%20comment%20state&In-Reply-To=%3C654a2bb31003020244w4934d194k5b56ad85f2561947%40mail.gmail.com%3E"
       TITLE="[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44	Bogus comment state">elharo at ibiblio.org
       </A><BR>
    <I>Tue Mar  2 02:44:55 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067665.html">[whatwg] borders on images inside links
</A></li>
        <LI>Next message: <A HREF="067659.html">[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44 Bogus comment state
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67657">[ date ]</a>
              <a href="thread.html#67657">[ thread ]</a>
              <a href="subject.html#67657">[ subject ]</a>
              <a href="author.html#67657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>The handling of processing instructions in the XHTML syntax seems
reasonably well-defined; but it feels a little off in the HTML syntax.
Briefly it seems that &lt;? causes the parser to go into Bogus comment
state, which is fair enough. (I wouldn't really recommend that anyone
use processing instructions in HTML syntax anyway.) However the parser
comes out of that state at the first &gt;. Because processing
instructions can contain &gt; and terminate only at the two character
sequence ?&gt; this could cause PI processing to terminate early and
leave a lot more error handling and a confused parser state in the
text yet to come.

It might be wise to add a separate processing instruction state that
would consume all characters up to the first occurrence of ?&gt; instead
of reusing Bogus comment state. The parser could still emit a comment
token containing the processing instruction text. The goal here is not
to enable processing instructions in the HTML syntax. It's simply an
effort to ensure that if one does slip in by mistake we more
accurately detect what the author or generator likely intended as the
end of the processing instruction.

-- 
Elliotte Rusty Harold
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">elharo at ibiblio.org</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067665.html">[whatwg] borders on images inside links
</A></li>
	<LI>Next message: <A HREF="067659.html">[whatwg] Parsing processing instructions in HTML syntax: 10.2.4.44 Bogus comment state
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67657">[ date ]</a>
              <a href="thread.html#67657">[ thread ]</a>
              <a href="subject.html#67657">[ subject ]</a>
              <a href="author.html#67657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
