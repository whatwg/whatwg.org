<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Offscreen canvas (or canvas for web workers).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Offscreen%20canvas%20%28or%20canvas%20for%20web%20workers%29.&In-Reply-To=%3Ccc092ba01003220734v344b4ccbsc0767004c218983b%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067815.html">
   <LINK REL="Next"  HREF="067796.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Offscreen canvas (or canvas for web workers).</H1>
<!--htdig_noindex-->
    <B>Mike Shaver</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Offscreen%20canvas%20%28or%20canvas%20for%20web%20workers%29.&In-Reply-To=%3Ccc092ba01003220734v344b4ccbsc0767004c218983b%40mail.gmail.com%3E"
       TITLE="[whatwg] Offscreen canvas (or canvas for web workers).">mike.shaver at gmail.com
       </A><BR>
    <I>Mon Mar 22 07:34:01 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067815.html">[whatwg] Offscreen canvas (or canvas for web workers).
</A></li>
        <LI>Next message: <A HREF="067796.html">[whatwg] Offscreen canvas (or canvas for web workers).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67863">[ date ]</a>
              <a href="thread.html#67863">[ thread ]</a>
              <a href="subject.html#67863">[ subject ]</a>
              <a href="author.html#67863">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Mar 15, 2010 at 3:05 AM, Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt; wrote:
&gt;<i> === Summary of Data ===
</I>&gt;<i>
</I>&gt;<i> 1) In all browsers tested, copying to an ImageData and then back to a canvas
</I>&gt;<i> (two blits) is faster than a 2x scale.
</I>&gt;<i> 2) In all browsers tested, twice the cost of a canvas-to-canvas blit is
</I>&gt;<i> considerably less than the cost of copy to and back from ImageData.
</I>&gt;<i> 3) In all browsers tested, twice the cost of a canvas-to-canas blit is still
</I>&gt;<i> less than the cost of a single 0.5x scale or a rotate.
</I>
With hardware acceleration in play, things seem to change a lot there,
though it may be that it's just breaking the test somehow?  The
displayed images look correct, FWIW.

My results on a Windows 7 machine, with the browsers maximized on a
1600x1200 display.

FF 3.6:
direct copy: 8ms
indirect: 408ms
2x scale: 1344ms
0.5x scale: 85ms
rotate: 440ms

FF 3.7a (no D2D):
direct copy: 12.5ms
indirect: 101ms
2x scale: 532ms
0.5x scale: 33ms
rotate: 389ms

FF 3.7a (D2D):
direct copy: 0.5ms
indirect: 136ms
2x scale: 0.5ms
0.5x scale: 0.5ms
rotate: 0.5ms

WebKit r56194:
direct copy: 18.5ms
indirect copy: 113ms
2x scale: 670ms
0.5x scale: 112ms
rotate: 129ms

This supports the idea of specialized API, perhaps, since it will keep
authors from having to figure out which path to take in order to avoid
a massive hit  when using the canvas copies (100x or more for
D2D-enabled FF, if the test's results are correct).  It also probably
indicates that everyone is going to get a lot faster in the next
while, so performance tradeoffs should perhaps not be baked too deeply
into the premises for these APIs.

Other more complex tests like blurring or desaturating or doing edge
detection, etc. may show other tradeoffs, and I think we're working on
a performance suite for tracking our own work that may illuminate some
of those.  Subject, of course, to the incredibly fluid nature of all
browser performance analysis these days!

Mike

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067815.html">[whatwg] Offscreen canvas (or canvas for web workers).
</A></li>
	<LI>Next message: <A HREF="067796.html">[whatwg] Offscreen canvas (or canvas for web workers).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67863">[ date ]</a>
              <a href="thread.html#67863">[ thread ]</a>
              <a href="subject.html#67863">[ subject ]</a>
              <a href="author.html#67863">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
