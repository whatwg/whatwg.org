<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Prefetch issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Prefetch%20issues&In-Reply-To=%3CAANLkTinoygzu65shQoGLZcC4-D0GVXrVxCcB7RNQIeP1%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068977.html">
   <LINK REL="Next"  HREF="068979.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Prefetch issues</H1>
<!--htdig_noindex-->
    <B>Peter Beverloo</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Prefetch%20issues&In-Reply-To=%3CAANLkTinoygzu65shQoGLZcC4-D0GVXrVxCcB7RNQIeP1%40mail.gmail.com%3E"
       TITLE="[whatwg] Prefetch issues">peter at lvp-media.com
       </A><BR>
    <I>Thu Jun 10 09:46:28 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="068977.html">[whatwg] Prefetch issues
</A></li>
        <LI>Next message: <A HREF="068979.html">[whatwg] Prefetch issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68978">[ date ]</a>
              <a href="thread.html#68978">[ thread ]</a>
              <a href="subject.html#68978">[ subject ]</a>
              <a href="author.html#68978">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Jun 10, 2010 at 17:01, Eric Schurman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ericsc at gmail.com</A>&gt; wrote:
&gt;<i> As described, the link prefetching capability seems to have some
</I>&gt;<i> limitations that work counter to the performance of the page using it.
</I>&gt;<i>
</I>&gt;<i> It appears as though LINK elements are metadata elements and that
</I>&gt;<i> these may only be supported inside the HEAD of the document. If so,
</I>&gt;<i> then this is an issue in the real world, because at the time a web
</I>&gt;<i> server flushes chunks containing the HEAD section of a document, the
</I>&gt;<i> links we would want to prefetch are often not known. This is true for
</I>&gt;<i> all the large sites I've analyzed or worked at. For example, many
</I>&gt;<i> pages on a site will contain the same visual header, and we want to
</I>&gt;<i> flush the HEAD and visual header content while the server is in the
</I>&gt;<i> process of figuring out what the content of the page will be - which
</I>&gt;<i> will contain the links we'd like to prefetch.
</I>&gt;<i>
</I>&gt;<i> Am I reading this correctly? Or is there a something that would allow
</I>&gt;<i> the flushing scenario I describe above?
</I>&gt;<i>
</I>&gt;<i> One of the simplest approaches may be to add support for
</I>&gt;<i> rel=&quot;prefetch&quot; to A and AREA's, but it's been explicitly excluded from
</I>&gt;<i> those. Why?
</I>&gt;<i>
</I>&gt;<i> Another approach could be to allow LINK throughout the document. This
</I>&gt;<i> would allow for prefetching content like images even if you didn't
</I>&gt;<i> know them at HEAD rendering time.
</I>&gt;<i>
</I>&gt;<i> Any opinions?
</I>&gt;<i>
</I>
While I have not found the original discussion about including the
prefetch relation in area and anchor tags, my guess would be that it's
a feature that would quite easily be abused by web authors. Adding
@rel=&quot;prefetch&quot; to all anchors is a lot easier than putting them in
the header, so why not just preload every page on the site? Again,
someone else will probably have the answer you're looking for.

Mozilla's Developer Center has a page about the attribute value[1]
which already suggests that they might add the feature on normal
anchor tags if there is sufficient interest in that. Their page also
contains a chapter about how to implement prefetching using the Link
HTTP header, which would be a solution if your website uses output
buffering.

Considering you're specifically talking about flushing the header
before the links are known, however, I'm assuming that won't be a
possibility either. The link tag is specifically used for metadata
about the current document, so using that across the entire document
doesn't sound like a good idea to me. Despite the possibility of abuse
by authors, it seems to me that it's a fair use-case for including the
attribute.

Regards,
Peter Beverloo

[1] <A HREF="https://developer.mozilla.org/En/Link_prefetching_FAQ">https://developer.mozilla.org/En/Link_prefetching_FAQ</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068977.html">[whatwg] Prefetch issues
</A></li>
	<LI>Next message: <A HREF="068979.html">[whatwg] Prefetch issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68978">[ date ]</a>
              <a href="thread.html#68978">[ thread ]</a>
              <a href="subject.html#68978">[ subject ]</a>
              <a href="author.html#68978">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
