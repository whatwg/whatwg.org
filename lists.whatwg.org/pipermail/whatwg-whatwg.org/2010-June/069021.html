<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] DOM Range Deletions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20DOM%20Range%20Deletions&In-Reply-To=%3C4C175B5C.2050106%40ado.is-a-geek.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069035.html">
   <LINK REL="Next"  HREF="069024.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] DOM Range Deletions</H1>
<!--htdig_noindex-->
    <B>Andrew Oakley</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20DOM%20Range%20Deletions&In-Reply-To=%3C4C175B5C.2050106%40ado.is-a-geek.net%3E"
       TITLE="[whatwg] DOM Range Deletions">andrew at ado.is-a-geek.net
       </A><BR>
    <I>Tue Jun 15 03:52:12 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="069035.html">[whatwg] Speech input element
</A></li>
        <LI>Next message: <A HREF="069024.html">[whatwg] Don't throw for HTMLInputElement.files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69021">[ date ]</a>
              <a href="thread.html#69021">[ thread ]</a>
              <a href="subject.html#69021">[ subject ]</a>
              <a href="author.html#69021">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I've been trying to implement DOM Range but can't work out how ranges
are supposed to work under mutation.

In the following examples I use *this* to indicate a range being deleted
and slashes to indicate another range.


Section 2.6 - Deleting Content with a Range gives the example of

&lt;FOO&gt;X*Y&lt;BAR&gt;Z*W&lt;/BAR&gt;Q&lt;/FOO&gt; -&gt; &lt;FOO&gt;X^&lt;BAR&gt;W&lt;/BAR&gt;Q&lt;/FOO&gt;


Section 2.12.2 - Deletions says:

&quot;If a boundary-point of the original Range is within the content being
deleted, then after the deletion it will be at the same position as the
resulting boundary-point of the (now collapsed) Range used to delete the
contents.&quot;

We then have the example of:

&lt;P&gt;ABCD *efgh The &lt;EM&gt;R*ange&lt;/EM&gt; ijkl&lt;/P&gt;
              /            \

Goes to

&lt;P&gt;ABCD &lt;EM&gt;ange&lt;/EM&gt; ijkl&lt;/P&gt;
           /    \

I assume that the range indicated by the underline in the spec and like
*this* here collapses to just before the &lt;EM&gt; tag as this document has
the same structure as the other example I pulled out of the spec.  This
would mean that the start point of the other range should also be just
before the &lt;EM&gt;, but that isn't what has happened in this example.

Any idea what I've got wrong?  Some browsers (e.g. Safari) seem to
behave as in the example, others (e.g. Firefox) put the end point before
the &lt;EM&gt; (as I would have expected).

Thanks

-- 
Andrew Oakley


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069035.html">[whatwg] Speech input element
</A></li>
	<LI>Next message: <A HREF="069024.html">[whatwg] Don't throw for HTMLInputElement.files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69021">[ date ]</a>
              <a href="thread.html#69021">[ thread ]</a>
              <a href="subject.html#69021">[ subject ]</a>
              <a href="author.html#69021">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
