<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Encoding: API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Encoding%3A%20API&In-Reply-To=%3CCAD649j5ShWb-hR3FhheF0enLA_NJWNjBhuP0OyN1UJxez69a%2BA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037572.html">
   <LINK REL="Next"  HREF="079855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Encoding: API</H1>
<!--htdig_noindex-->
    <B>Joshua Bell</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Encoding%3A%20API&In-Reply-To=%3CCAD649j5ShWb-hR3FhheF0enLA_NJWNjBhuP0OyN1UJxez69a%2BA%40mail.gmail.com%3E"
       TITLE="[whatwg] Encoding: API">jsbell at chromium.org
       </A><BR>
    <I>Wed Oct 10 10:28:22 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="037572.html">[whatwg] Encoding: API
</A></li>
        <LI>Next message: <A HREF="079855.html">[whatwg] Encoding: API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79846">[ date ]</a>
              <a href="thread.html#79846">[ thread ]</a>
              <a href="subject.html#79846">[ subject ]</a>
              <a href="author.html#79846">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Oct 10, 2012 at 6:42 AM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at annevk.nl</A>&gt; wrote:

&gt;<i> Hey, I was wondering whether it would make sense to define
</I>&gt;<i> <A HREF="http://wiki.whatwg.org/wiki/StringEncoding">http://wiki.whatwg.org/wiki/StringEncoding</A> as part of
</I>&gt;<i> <A HREF="http://encoding.spec.whatwg.org/">http://encoding.spec.whatwg.org/</A> Tying them together makes sense to me
</I>&gt;<i> anyway and is similar to what we do with URL, HTML, etc.
</I>&gt;<i>
</I>
No objection from me.


&gt;<i> As for the open issue, I think it would make sense if the encoding's
</I>&gt;<i> name was returned. Label is just some case-insensitive keyword to get
</I>&gt;<i> there.
</I>&gt;<i>
</I>
I tend to agree, as the label gives you no information you don't already
have and the name can be at least a diagnostic.


&gt;<i> I also still think it's kinda yucky that this API has this gigantic
</I>&gt;<i> hack around what the rest of the platform does with respect to the
</I>&gt;<i> byte order mark. It seems really weird to not expose the same
</I>&gt;<i> encode/decode that HTML/XML/CSS/etc. use.
</I>&gt;<i>
</I>
IMHO the API needs to support use cases: (1) code that wants to follow the
behavior of the web platform with respect to legacy content (i.e. the
desire to self-host), and (2) code that wants to parse files that are not
traditionally &quot;web&quot; data, i.e. fragments of binary files, which don't have
legacy behavior and where BOM taking priority would be surprising to
developers. For #2, following the behavior of APIs like ICU with respect to
BOMs is more sensible. I believe #2 is higher priority as long as it does
not preclude #1, and #1 can be achieved by code that inspects the stream
before handing it off to the decoder.

Practically speaking, this would mean refactoring the combined spec so that
the current BOM handling is defined for parsing web content outside of the
API rather than requiring the API to hack around it.

...

While we're here, any feedback from implementers? Mozilla is apparently
quite far along. Any surprises or additional issues? Any initial feedback
from users?

I received feedback recently that the API is perhaps too terse right now
when dealing with streaming content, and a more explicit decode(),
decodeStream(), resetStream() might be more intelligible. Thoughts?

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037572.html">[whatwg] Encoding: API
</A></li>
	<LI>Next message: <A HREF="079855.html">[whatwg] Encoding: API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79846">[ date ]</a>
              <a href="thread.html#79846">[ thread ]</a>
              <a href="subject.html#79846">[ subject ]</a>
              <a href="author.html#79846">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
