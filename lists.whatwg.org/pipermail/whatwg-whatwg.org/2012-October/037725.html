<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for window.DocumentType.prototype.toString
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20window.DocumentType.prototype.toString&In-Reply-To=%3CCAGFhi3_rQeLW9TDAZMndiXggpARQEtN7zQUqYySjZ6PbP1Fb_Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037720.html">
   <LINK REL="Next"  HREF="079999.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for window.DocumentType.prototype.toString</H1>
<!--htdig_noindex-->
    <B>Johan Sundstr&#246;m</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20window.DocumentType.prototype.toString&In-Reply-To=%3CCAGFhi3_rQeLW9TDAZMndiXggpARQEtN7zQUqYySjZ6PbP1Fb_Q%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal for window.DocumentType.prototype.toString">oyasumi at gmail.com
       </A><BR>
    <I>Mon Oct 29 17:58:45 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="037720.html">[whatwg] [wiki] The WHATWG Wiki has been upgraded
</A></li>
        <LI>Next message: <A HREF="079999.html">[whatwg] Proposal for window.DocumentType.prototype.toString
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37725">[ date ]</a>
              <a href="thread.html#37725">[ thread ]</a>
              <a href="subject.html#37725">[ subject ]</a>
              <a href="author.html#37725">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi everybody!

Serializing a complete HTML document DOM to a string is surprisingly
hard in javascript. As a fairly seasoned javascript hacker I figured
this might do it:

  document.doctype + document.documentElement.outerHTML

It doesn't. No browser has a useful window.DocumentType.prototype that
returns either the original document's &lt;!DOCTYPE ...&gt; before parsing &#8211;
or a semantically equivalent post-parsing one. Google Chrome shows one
in its devtools, but seems not to export some way of getting at it to
programmers.

My proposal is we specify this more useful behaviour for
javascript-running browsers, so it does become as simple as above. A
rough sketch of how a polyfill might implement the latter
window.DocumentType.prototype.toString:

  <A HREF="https://gist.github.com/3977584">https://gist.github.com/3977584</A>

Even as a polyfill, the above is rather limited, though:  I believe
only Firefox implements &quot;internalSubset&quot; today, and probably only in
XML contexts. The most useful implementation would IMO be a native one
that reproducing the doctype, as it was formatted in the source
document.

Thoughts?

-- 
 / Johan Sundstr&#246;m, <A HREF="http://ecmanaut.blogspot.com/">http://ecmanaut.blogspot.com/</A>
</PRE>


























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037720.html">[whatwg] [wiki] The WHATWG Wiki has been upgraded
</A></li>
	<LI>Next message: <A HREF="079999.html">[whatwg] Proposal for window.DocumentType.prototype.toString
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37725">[ date ]</a>
              <a href="thread.html#37725">[ thread ]</a>
              <a href="subject.html#37725">[ subject ]</a>
              <a href="author.html#37725">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
