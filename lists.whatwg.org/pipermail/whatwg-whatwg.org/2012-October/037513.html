<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg]  Firing WebStorage storage event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%20Firing%20WebStorage%20storage%20event&In-Reply-To=%3CCAOeF0ey0cOP_c2A8VhEkDJpO8aZPpUDWN7iwv%2BH%2Bw8STQoU0TA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079836.html">
   <LINK REL="Next"  HREF="037516.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg]  Firing WebStorage storage event</H1>
<!--htdig_noindex-->
    <B>Janusz Majnert</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%20Firing%20WebStorage%20storage%20event&In-Reply-To=%3CCAOeF0ey0cOP_c2A8VhEkDJpO8aZPpUDWN7iwv%2BH%2Bw8STQoU0TA%40mail.gmail.com%3E"
       TITLE="[whatwg]  Firing WebStorage storage event">jmajnert at gmail.com
       </A><BR>
    <I>Wed Oct  3 07:58:25 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079836.html">[whatwg] [canvas] Path object
</A></li>
        <LI>Next message: <A HREF="037516.html">[whatwg] FW: [[IANA #598704] Registration for application/microdata+json media type]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37513">[ date ]</a>
              <a href="thread.html#37513">[ thread ]</a>
              <a href="subject.html#37513">[ subject ]</a>
              <a href="author.html#37513">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi all,
I would like to ask for your help. I'm having hard time understanding
the rules for firing WebStorage's storage event.

In section 11.2.3
(<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/webstorage.html#the-localstorage-attribute">http://www.whatwg.org/specs/web-apps/current-work/multipage/webstorage.html#the-localstorage-attribute</A>)
we have this sentence [1]:
&quot;
When the setItem(), removeItem(), and clear() methods are called on a
Storage object x that is associated with a local storage area, if the
methods did something, then in every Document object whose Window
object's localStorage attribute's Storage object is associated with
the same storage area, other than x, a storage event must be fired, as
described below.
&quot;


&quot;as described below&quot; points to section 11.2.4, which reads [2]:
&quot;
The storage event is fired when a storage area changes, as described
in the previous two sections (for session storage, for local storage).
When this happens, the user agent must queue a task to fire an event
with the name storage, which does not bubble and is not cancelable,
and which uses the StorageEvent interface, at each Window object whose
Document object has a Storage object that is affected.
&quot;

What I understood:
Sentence [1] says that storage events should be fired on affected
Document objects, except the one that originated the change.
Sentences in [2]  say that when a storage event is fired as described
in [1], a task must be queued to fire storage events on all affected
Window objects. It also says that Document objects have Storage
objects, which I don't think is true.

Is my understanding correct? What am I missing?

Thanks in advance for your help.

Best regards,
Janusz Majnert
</PRE>

















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079836.html">[whatwg] [canvas] Path object
</A></li>
	<LI>Next message: <A HREF="037516.html">[whatwg] FW: [[IANA #598704] Registration for application/microdata+json media type]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37513">[ date ]</a>
              <a href="thread.html#37513">[ thread ]</a>
              <a href="subject.html#37513">[ subject ]</a>
              <a href="author.html#37513">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
