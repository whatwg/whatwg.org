<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Null characters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Null%20characters&In-Reply-To=%3CPine.LNX.4.64.1210091845230.1904%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079830.html">
   <LINK REL="Next"  HREF="079840.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Null characters</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Null%20characters&In-Reply-To=%3CPine.LNX.4.64.1210091845230.1904%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Null characters">ian at hixie.ch
       </A><BR>
    <I>Tue Oct  9 11:47:21 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079830.html">[whatwg] Null characters
</A></li>
        <LI>Next message: <A HREF="079840.html">[whatwg] Null characters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79837">[ date ]</a>
              <a href="thread.html#79837">[ thread ]</a>
              <a href="subject.html#79837">[ subject ]</a>
              <a href="author.html#79837">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 9 Oct 2012, Cameron Zemek wrote:
&gt;<i> On Tue, Oct 9, 2012 at 1:36 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; On Tue, 9 Oct 2012, Cameron Zemek wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I noticed the specification usually treats null characters U+0000 by 
</I>&gt;<i> &gt;&gt; replacing them with the replacement character U+FFFD . The other 
</I>&gt;<i> &gt;&gt; cases it will be ignored by the tree construction stage when the mode 
</I>&gt;<i> &gt;&gt; is 'in body', 'in table text', 'in select'.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Would it not be simpler and more consistent to just have the Input 
</I>&gt;<i> &gt;&gt; Stream Preprocessor replace all null characters with the replacement 
</I>&gt;<i> &gt;&gt; character.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Yes. In fact that's what the spec used to do.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Turns out it's not Web-compatible. :-(
</I>&gt;<i> 
</I>&gt;<i> How is it not web-compatible? PS: Maybe a note should be added to the 
</I>&gt;<i> specification that explains this.
</I>
I could add a note... based on what Boris described, what would you want 
the note to say and where would you want it placed, such that you would 
have seen it when your original reading caused you to e-mail the list?

(This part of the spec is rather large, and the NULL handling happens all 
over the place, so I don't know where would be best.)


On Tue, 9 Oct 2012, Boris Zbarsky wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; But just thinking about it logically what issues would there be in 
</I>&gt;<i> &gt; showing Null character as the replacement character instead? Visually 
</I>&gt;<i> &gt; would see some extra characters if the document author had Null 
</I>&gt;<i> &gt; characters. What is the big deal with doing that?
</I>&gt;<i> 
</I>&gt;<i> It makes text unreadable.  Consider text that's actually UTF-16 but 
</I>&gt;<i> being declared as ISO-8859-1.  If you strip the nulls, it all works out.  
</I>&gt;<i> But if you don't, every other character is a replacement character.
</I>&gt;<i> 
</I>&gt;<i> This is not a rare situation on the web, unfortunately.
</I>&gt;<i> 
</I>&gt;<i> &gt; Why do authors even have null characters in their HTML documents?
</I>&gt;<i> 
</I>&gt;<i> Because they have UTF-16 text in their database that they dump into an 
</I>&gt;<i> ISO-8859-1 document.  They have no idea there are any &quot;null characters&quot; 
</I>&gt;<i> involved.
</I>&gt;<i> 
</I>&gt;<i> &gt; I assume I'm probably missing some historical reason for this
</I>&gt;<i> 
</I>&gt;<i> Yes, that reason is &quot;the browsers all do it this way, so web sites 
</I>&gt;<i> depend on it&quot;.
</I>
Yup. :-(

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079830.html">[whatwg] Null characters
</A></li>
	<LI>Next message: <A HREF="079840.html">[whatwg] Null characters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79837">[ date ]</a>
              <a href="thread.html#79837">[ thread ]</a>
              <a href="subject.html#79837">[ subject ]</a>
              <a href="author.html#79837">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
