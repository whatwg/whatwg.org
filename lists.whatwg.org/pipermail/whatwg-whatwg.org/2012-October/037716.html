<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Real-time thread support for workers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Real-time%20thread%20support%20for%20workers&In-Reply-To=%3CPine.LNX.4.64.1210270004150.2478%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080013.html">
   <LINK REL="Next"  HREF="080002.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Real-time thread support for workers</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Real-time%20thread%20support%20for%20workers&In-Reply-To=%3CPine.LNX.4.64.1210270004150.2478%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Real-time thread support for workers">ian at hixie.ch
       </A><BR>
    <I>Fri Oct 26 17:14:08 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="080013.html">[whatwg] URL: query encoding
</A></li>
        <LI>Next message: <A HREF="080002.html">[whatwg] Real-time thread support for workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37716">[ date ]</a>
              <a href="thread.html#37716">[ thread ]</a>
              <a href="subject.html#37716">[ subject ]</a>
              <a href="author.html#37716">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 9 Aug 2012, Jussi Kalliokoski wrote:
&gt;<i> 
</I>&gt;<i> On W3C AudioWG we're currently discussing the possibility of having web 
</I>&gt;<i> workers that run in a priority/RT thread. This would be highly useful 
</I>&gt;<i> for example to keep audio from glitching even under high CPU stress.
</I>&gt;<i> 
</I>&gt;<i> Thoughts? Is there a big blocker for this that I'm not thinking about or 
</I>&gt;<i> has it just not been discussed yet? (I tried to search for it, but 
</I>&gt;<i> didn't find anything)
</I>
I think it's impractical to give Web authors this kind of control. User 
agents should be able to increase the priority of threads, or notice a 
thread is being used for audio and start limiting its per-slice CPU but 
increasing the frequency of its slices, but that should be up to the UA, 
we can't possibly let Web authors control this, IMHO.


On Thu, 9 Aug 2012, Jussi Kalliokoski wrote:
&gt;<i> 
</I>&gt;<i> Yes, this is something I'm worried about as well. But prior work in 
</I>&gt;<i> native applications suggests that high priority threads are hardly ever 
</I>&gt;<i> abused like that.
</I>
Native apps and Web apps aren't comparable. Native apps that the user has 
decided to install also don't arbitrarily reformat the user's disk or 
install key loggers, but I hope you agree that we couldn't let Web authors 
do those things.

The difference between native apps and Web apps is that users implicitly 
trust native app authors, and therefore are (supposed to be) careful about 
what software they install. However, on the Web, users do not have to be 
(anywhere near as) careful, and so they follow arbitrary links. Trusted 
sites get hijacked by hostile code, users get phished to hostile sites, 
trolls point users on social networks at hostile sites. Yet, when all is 
working as intended (i.e. modulo security bugs), the user is not at risk 
of their machine being taken down.

If we allow sites to use 100% CPU on a realtime thread, then this changes, 
because untrusted hostile sites actually _can_ cause harm.

The way the Web platform normally gets around this is by having the Web 
author describe to the UA what the author wants, declaratively, and then 
having the UA take care of it without running author code. This allows the 
UA to make sure it can't be abused, while still having good performance or 
security or whatnot. In the case of Web audio, the way to get sub-80ms 
latency would be say &quot;when this happens (a click, a collision), do this 
(a change in the music, a sound effect)&quot;. This is non-trivial to specify, 
but wouldn't run the risk of hostile sites harming the user.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>














<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080013.html">[whatwg] URL: query encoding
</A></li>
	<LI>Next message: <A HREF="080002.html">[whatwg] Real-time thread support for workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37716">[ date ]</a>
              <a href="thread.html#37716">[ thread ]</a>
              <a href="subject.html#37716">[ subject ]</a>
              <a href="author.html#37716">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
