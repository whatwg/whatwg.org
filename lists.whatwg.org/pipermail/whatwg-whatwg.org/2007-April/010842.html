<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Attribute for holding private data for scripting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Attribute%20for%20holding%20private%20data%20for%20scripting&In-Reply-To=%3C461CC937.80607%40intertwingly.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010838.html">
   <LINK REL="Next"  HREF="010843.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Attribute for holding private data for scripting</H1>
<!--htdig_noindex-->
    <B>Sam Ruby</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Attribute%20for%20holding%20private%20data%20for%20scripting&In-Reply-To=%3C461CC937.80607%40intertwingly.net%3E"
       TITLE="[whatwg] Attribute for holding private data for scripting">rubys at intertwingly.net
       </A><BR>
    <I>Wed Apr 11 04:40:39 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="010838.html">[whatwg] Attribute for holding private data for scripting
</A></li>
        <LI>Next message: <A HREF="010843.html">[whatwg] Attribute for holding private data for scripting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10842">[ date ]</a>
              <a href="thread.html#10842">[ thread ]</a>
              <a href="subject.html#10842">[ subject ]</a>
              <a href="author.html#10842">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Maciej Stachowiak wrote:
&gt;<i> 
</I>&gt;<i> On Apr 10, 2007, at 8:12 PM, Sam Ruby wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Maciej Stachowiak wrote:
</I>&gt;&gt;&gt;<i> On Apr 10, 2007, at 2:14 PM, Sam Ruby wrote:
</I>&gt;&gt;&gt;&gt;<i> Anne van Kesteren wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> On Tue, 10 Apr 2007 22:41:12 +0200, Sam Ruby 
</I>&gt;&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">rubys at intertwingly.net</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> How so?
</I>&gt;&gt;&gt;&gt;&gt;<i> I missed the part where you wanted to change existing HTML parsers. 
</I>&gt;&gt;&gt;&gt;&gt;<i> I thought Hixie pointed out earlier (by means of examples) why we 
</I>&gt;&gt;&gt;&gt;&gt;<i> can't have namespace parsing in HTML. I suppose we can discuss it 
</I>&gt;&gt;&gt;&gt;&gt;<i> again...
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> It is a recurring pattern.  The first instance was &quot;we can't allow 
</I>&gt;&gt;&gt;&gt;<i> trailing slashes in tags&quot;, which was followed up by a carefully 
</I>&gt;&gt;&gt;&gt;<i> crafted and narrow set of exceptions, which was met with &quot;that 
</I>&gt;&gt;&gt;&gt;<i> works&quot; and was adopted.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> So... while it is clearly true the full extent of XML namespames 
</I>&gt;&gt;&gt;&gt;<i> will never be supported in HTML5 (and for good reason), namespace 
</I>&gt;&gt;&gt;&gt;<i> qualified attributes allow extensibility in ways that prevent 
</I>&gt;&gt;&gt;&gt;<i> collisions.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> One of the first questions that would need to be answered: are there 
</I>&gt;&gt;&gt;&gt;<i> any existing documents on the web which would be broken if the name 
</I>&gt;&gt;&gt;&gt;<i> placed into the DOM for attributes with names containing a colon, 
</I>&gt;&gt;&gt;&gt;<i> with an apparent prefix, and one that matched an enclosing xmlns: 
</I>&gt;&gt;&gt;&gt;<i> declaration were to be changed?
</I>&gt;&gt;&gt;<i> I think the problem here isn't compatibility with existing content, 
</I>&gt;&gt;&gt;<i> but rather ability to use the feature in new web content while still 
</I>&gt;&gt;&gt;<i> gracefully handling existing user agents. We wrote up some design 
</I>&gt;&gt;&gt;<i> principles for the HTML WG based on the WHATWG's working assumptions 
</I>&gt;&gt;&gt;<i> which might make this point more clear: 
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://esw.w3.org/topic/HTML/ProposedDesignPrinciples">http://esw.w3.org/topic/HTML/ProposedDesignPrinciples</A>&gt;. While &quot;Don't 
</I>&gt;&gt;&gt;<i> Break The Web&quot; is a goal, so is &quot;Degrade Gracefully&quot;.
</I>&gt;&gt;&gt;<i> To give a specific example: say I make my own &quot;mjsml&quot; prefix with 
</I>&gt;&gt;&gt;<i> namespace &quot;<A HREF="http://example.org/mjsml&quot;.">http://example.org/mjsml&quot;.</A> In HTML4 UAs, to look up an 
</I>&gt;&gt;&gt;<i> &quot;mjsml:extension&quot; attribute using getAttribute(&quot;mjsml:extension&quot;). In 
</I>&gt;&gt;&gt;<i> HTML5 UAs, I'd have to use getAttributeNS(&quot;<A HREF="http://example.org/mjsml&quot;,">http://example.org/mjsml&quot;,</A> 
</I>&gt;&gt;&gt;<i> &quot;extension&quot;). And neither technique would work on both (at least as I 
</I>&gt;&gt;&gt;<i> understand your proposal).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here's a page I constructed, and tested on Firefox:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://intertwingly.net/stories/2007/04/10/test.html">http://intertwingly.net/stories/2007/04/10/test.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This page is meant to be served as application/xhtml+xml.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can you test it and see what results you get?  Then lets discuss further.
</I>&gt;<i> 
</I>&gt;<i> In Safari 2.0.4: Processed as HTML, it says &quot;data&quot; and then &quot;&quot;. 
</I>&gt;<i> Processed as XHTML, it says &quot;null&quot; and then &quot;data&quot;.
</I>&gt;<i> In Opera 9.00: Processed as HTML, it says &quot;data&quot; and then &quot;null&quot;. 
</I>&gt;<i> Processed as XHTML, it says &quot;null&quot; and then &quot;data&quot;.
</I>&gt;<i> In Firefox 2.0.0.3: Processed as HTML, it says &quot;data&quot; and then &quot;&quot;. 
</I>&gt;<i> Processed as XHTML, it says &quot;data&quot; and then &quot;data&quot;.
</I>&gt;<i> In IE/Mac 5.2: Processed as HTML, it says &quot;data&quot; and the second alert 
</I>&gt;<i> does not appear. Processed as XHTML, neither alert appears.
</I>&gt;<i> 
</I>&gt;<i> It looks like Firefox's XHTML implementation already has the 
</I>&gt;<i> getAttribute extension I suggested of handling QNames.
</I>
Cool!

The first thing that is apparent to me is that, when processed as HTML, 
element.getAttribute('mjsml:extension') works everywhere.  So it is 
probably fair to say that allowing it does not run afoul of either the 
&quot;Don't Break the Web&quot; or &quot;Degrade Gracefully&quot; design principles.

Per HTML5 section 8.1.2.3, however, such an attribute name would not be 
considered conformant.  Despite this, later in document, in the 
description of &quot;Attribute name state&quot;, no parse error is produced for 
this condition.  Nor does the current html5lib parser produce a parse 
error with this data.

I'd suggest that the first order of business is to reconcile 8.1.2.3 
with the description of &quot;Attribute name state&quot;.  My suggestion is that 
&quot;Anything else&quot; emits a parse error (but nevertheless continues 
on/recovers), and that a rule for handling latin small letter a through 
z, hyphen-minus, and colon be added.

&gt;<i> By the way, the fact that no two of the browsers I tested treat this the 
</I>&gt;<i> same is a pretty clear indicator that DOM Core needs the HTML5 treatment.
</I>
+1.  But this begs a larger issue.  Much of the differences that you 
found were in how XHTML was handled, and the WhatWG document currently 
states:

     The rules for parsing XML documents (and thus XHTML documents)
     into DOM trees are covered by the XML and Namespaces in XML
     specifications, and are out of scope of this specification.
     [XML] [XMLNS]

&gt;<i> Regards,
</I>&gt;<i> Maciej
</I>
- Sam Ruby



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010838.html">[whatwg] Attribute for holding private data for scripting
</A></li>
	<LI>Next message: <A HREF="010843.html">[whatwg] Attribute for holding private data for scripting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10842">[ date ]</a>
              <a href="thread.html#10842">[ thread ]</a>
              <a href="subject.html#10842">[ subject ]</a>
              <a href="author.html#10842">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
