<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Authoring feedback on &lt;datalist&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Authoring%20feedback%20on%20%3Cdatalist%3E&In-Reply-To=%3C7c2a12e21001211627n3c922f54g619a060354cd7ab8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024882.html">
   <LINK REL="Next"  HREF="024795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Authoring feedback on &lt;datalist&gt;</H1>
<!--htdig_noindex-->
    <B>Aryeh Gregor</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Authoring%20feedback%20on%20%3Cdatalist%3E&In-Reply-To=%3C7c2a12e21001211627n3c922f54g619a060354cd7ab8%40mail.gmail.com%3E"
       TITLE="[whatwg] Authoring feedback on &lt;datalist&gt;">Simetrical+w3c at gmail.com
       </A><BR>
    <I>Thu Jan 21 16:27:07 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="024882.html">[whatwg] history.back()
</A></li>
        <LI>Next message: <A HREF="024795.html">[whatwg] Authoring feedback on &lt;datalist&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24794">[ date ]</a>
              <a href="thread.html#24794">[ thread ]</a>
              <a href="subject.html#24794">[ subject ]</a>
              <a href="author.html#24794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>MediaWiki currently uses a search-suggest feature based on lots of
JavaScript that's used to calculate all sorts of widths and heights to
painstakingly construct an absolutely-positioned div, and reimplement
standard dropdown navigation controls on top of that.  It works pretty
well (go to en.wikipedia.org and start typing a query to see --
implementation at
&lt;<A HREF="http://svn.wikimedia.org/viewvc/mediawiki/trunk/phase3/skins/common/mwsuggest.js?view=markup">http://svn.wikimedia.org/viewvc/mediawiki/trunk/phase3/skins/common/mwsuggest.js?view=markup</A>&gt;),
but it's a horrible hack and doesn't integrate perfectly with the
system.  When I found out Opera implements &lt;datalist&gt;, thanks to the
helpful spec annotations, I tried rewriting mwsuggest.js to use
&lt;datalist&gt; where supported.

My primary feedback here is that a simpler JS API would *really* be
nice.  In this kind of situation, typically you receive some JSON or
whatnot from the server, so you have a JavaScript array that you want
to use for suggestions.  The code to make a given list the suggest
source for an input is something like:

var datalist = document.getElementById( 'arbitrary-id' );
if ( datalist == null ) {
	datalist = document.createElement( 'datalist' );
	datalist.id = 'arbitrary-id';
	document.body.appendChild( datalist );
} else {
	datalist.innerHTML = '';
}
input.setAttribute( 'list', 'arbitrary-id' );
while ( var i = 0; i &lt; suggestions.length; i++ ) {
	var option = document.createElement( 'option' );
	option.value = suggestions[i];
	datalist.appendChild( option );
}

This is all quite awkward.  It was pointed out on IRC that there are
legitimate use-cases for declarative datalists (e.g.,
<A HREF="http://html5.lachy.id.au/">http://html5.lachy.id.au/</A>), but I'd expect JS-constructed datalists to
be a much bigger use-case.  I can think of several sites off the top
of my head that use absolutely-positioned divs to provide search
suggestions to users, but none that do so statically.  So I think a
better API is needed -- preferably just

input.suggest = suggestions;

or similar.  The details aren't particularly important, but the
current API is really cumbersome when used from JS.
</PRE>






























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024882.html">[whatwg] history.back()
</A></li>
	<LI>Next message: <A HREF="024795.html">[whatwg] Authoring feedback on &lt;datalist&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24794">[ date ]</a>
              <a href="thread.html#24794">[ thread ]</a>
              <a href="subject.html#24794">[ subject ]</a>
              <a href="author.html#24794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
