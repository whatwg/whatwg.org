<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web-sockets + Web-workers to produce a P2P website or	application
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web-sockets%20%2B%20Web-workers%20to%20produce%20a%20P2P%20website%20or%0A%09application&In-Reply-To=%3C42b395981001191154g660174c6j99cc8ad90027153%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024777.html">
   <LINK REL="Next"  HREF="024793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web-sockets + Web-workers to produce a P2P website or	application</H1>
<!--htdig_noindex-->
    <B>Andrew de Andrade</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web-sockets%20%2B%20Web-workers%20to%20produce%20a%20P2P%20website%20or%0A%09application&In-Reply-To=%3C42b395981001191154g660174c6j99cc8ad90027153%40mail.gmail.com%3E"
       TITLE="[whatwg] Web-sockets + Web-workers to produce a P2P website or	application">andrew at deandrade.com.br
       </A><BR>
    <I>Tue Jan 19 11:54:27 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="024777.html">[whatwg] Web-sockets + Web-workers to produce a P2P website or	application
</A></li>
        <LI>Next message: <A HREF="024793.html">[whatwg] Web-sockets + Web-workers to produce a P2P website or	application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24778">[ date ]</a>
              <a href="thread.html#24778">[ thread ]</a>
              <a href="subject.html#24778">[ subject ]</a>
              <a href="author.html#24778">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Jan 19, 2010 at 5:31 PM, Melvin Carvalho
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">melvincarvalho at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Jan 19, 2010 at 5:59 PM, Andrew de Andrade &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">andrew at deandrade.com.br</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have an idea for a possible use case that as far as I can tell from
</I>&gt;&gt;<i> previous discussions on this list has not been considered or at least
</I>&gt;&gt;<i> not in the form I present below.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a friend whose company produces and licenses online games for
</I>&gt;&gt;<i> social networks such as Facebook, Orkut, etc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One of the big problems with these games is the shear amount of static
</I>&gt;&gt;<i> content that must be delivered via HTTP once the application becomes
</I>&gt;&gt;<i> popular. In fact, if a game becomes popular overnight, the scaling
</I>&gt;&gt;<i> problems with this static content quickly becomes a technical and
</I>&gt;&gt;<i> financial problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To give you an idea of the magnitude and scope, more than 4 TB of
</I>&gt;&gt;<i> static content is streamed on a given day for one of the applications.
</I>&gt;&gt;<i> It's very likely that others with similarly popular applications have
</I>&gt;&gt;<i> encountered the same challenge.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When thinking about how to resolve this, I took my usual approach of
</I>&gt;&gt;<i> thinking how do we decentralize the content delivery and move towards
</I>&gt;&gt;<i> an agent-based message passing model so that we do not have a single
</I>&gt;&gt;<i> bottleneck technically and so we can dissipate the cost of delivering
</I>&gt;&gt;<i> this content.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My idea is to use web-sockets to allow the browser function more a
</I>&gt;&gt;<i> less like a bit-torrent client. Along with this, web-workers would
</I>&gt;&gt;<i> provide threads for handling the code that would function as a server,
</I>&gt;&gt;<i> serving the static content to peers also using the program.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you have lots of users (thousands) accessing the same application,
</I>&gt;&gt;<i> you effectively have the equivalent of one torrent with a large swarm
</I>&gt;&gt;<i> of users, where the torrent is a package of the most frequently
</I>&gt;&gt;<i> requested static content. (I am assuming that the static content
</I>&gt;&gt;<i> requests follow a power law distribution, with only a few static files
</I>&gt;&gt;<i> being responsible for the overwhelming bulk of static data
</I>&gt;&gt;<i> transferred.).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As I have only superficial knowledge of the technologies involved and
</I>&gt;&gt;<i> the capabilities of HTML5, I passed this idea by a couple of
</I>&gt;&gt;<i> programmer friends to get their opinions. Generally they thought is
</I>&gt;&gt;<i> was a very interesting idea, but that as far as they know, the
</I>&gt;&gt;<i> specification as it stands now is incapable of accommodating such a
</I>&gt;&gt;<i> use case.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Together we arrived at a few criticisms of this idea that appear to be
</I>&gt;&gt;<i> resolvable:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -- Privacy issues
</I>&gt;&gt;<i> -- Security issues (man in the middle attack).
</I>&gt;&gt;<i> -- content labeling (i.e. how does the browser know what content is
</I>&gt;&gt;<i> truly static and therefore safe to share.)
</I>&gt;&gt;<i> -- content signing (i.e. is there some sort of hash that allows the
</I>&gt;&gt;<i> peers to confirm that the content has not been adulterated).
</I>&gt;&gt;<i> -- privacy issues
</I>&gt;<i>
</I>&gt;<i> Yes I sort of see this kind of thing as the future of the web.&#160; There's an
</I>&gt;<i> argument to say that it should have been done 10 or even 20 years ago, but
</I>&gt;<i> we're still not there.&#160; I think websockets will be a huge step forward for
</I>&gt;<i> this kind of thing.&#160; One issue still remains NAT traversal, perhaps this is
</I>&gt;<i> what has held developers back, though notable exceptions such as skype have
</I>&gt;<i> provided a great UX here.
</I>&gt;<i>
</I>&gt;<i> Gaming is one obvious application for this, which in many ways is the
</I>&gt;<i> pinnacle of software engineering.
</I>&gt;<i>
</I>&gt;<i> I see this kind of technique really bringing linked data into its own
</I>&gt;<i> (including RDFa) where browsers become more data aware and more socially
</I>&gt;<i> aware and are able interchage relevant information. &#160; Something like FOAF
</I>&gt;<i> (as a means to mark up data) is well suited to provide a distributed network
</I>&gt;<i> of peers, can certainly handle global namespaced data naming, and is getting
</I>&gt;<i> quite close to solving privacy and security challenges.
</I>&gt;<i>
</I>&gt;<i> Im really looking forward to seeing what people start to build on top of
</I>&gt;<i> this technology, and your idea certainly sounds exciting.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All in all, many of these issues have been solved by the many talented
</I>&gt;&gt;<i> programmers that have developed the current bit-torrent protocol,
</I>&gt;&gt;<i> algorithms and security features. The idea would simply to design the
</I>&gt;&gt;<i> HTML5 in such a way that it can permit the browser to function as a
</I>&gt;&gt;<i> full-fledged web-application bit-torrent client-server.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Privacy issues can be resolved by possibly defining something such as
</I>&gt;&gt;<i> &quot;browser security zones&quot; or &quot;content label&quot; whereby the content
</I>&gt;&gt;<i> provider (application developer) labels content (such as images and
</I>&gt;&gt;<i> CSS files) as safe to share (static content) and labels dynamic
</I>&gt;&gt;<i> content (such as personal photos, documents, etc.) as unsafe to share.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also in discussing this, we come up with some potentially useful
</I>&gt;&gt;<i> extensions to this use case.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One would be the versioning of the &quot;torrent file&quot;, such that the
</I>&gt;&gt;<i> torrent file could represent versions of the application. i.e. I
</I>&gt;&gt;<i> release an application that is version 1.02 and it becomes very
</I>&gt;&gt;<i> popular and there is a sizable swarm. At some point in the future I
</I>&gt;&gt;<i> release a new version with bug-fixes and additional features (such as
</I>&gt;&gt;<i> CSS sprites for the social network game). I should be able to
</I>&gt;&gt;<i> propagate this new version to all clients in the swarm so that over
</I>&gt;&gt;<i> some time window such as 2 to 4 hours all clients in the swarm
</I>&gt;&gt;<i> discover (via push or pull) the new version and end up downloading it
</I>&gt;&gt;<i> from the peers with the new version. The only security feature I could
</I>&gt;&gt;<i> see that would be required would be that once a client discovers that
</I>&gt;&gt;<i> their is a new version, it would hit up the original server to
</I>&gt;&gt;<i> download a signature/fingerprint file to verify that the new version
</I>&gt;&gt;<i> that it is downloading from its peers is legitimate.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The interesting thing about this idea is that it would permit large
</I>&gt;&gt;<i> portions of sites to exist in virtual form. Long-term I can imagine
</I>&gt;&gt;<i> large non-profit sites such as Wikipedia functioning on top of this
</I>&gt;&gt;<i> structure in such a way that it greatly reduces the amount of funding
</I>&gt;&gt;<i> necessary. It would be partially distributed with updates to wikipedia
</I>&gt;&gt;<i> being distributed via lots of tiny versions from super-nodes &#224; la a
</I>&gt;&gt;<i> Skype type P2P model.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This would also take a lot of power out of the hands of those telcos
</I>&gt;&gt;<i> that are anti-net neutrality. This feature would basically permit a
</I>&gt;&gt;<i> form of net neutrality by moving content to the fringes of the
</I>&gt;&gt;<i> network.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Let me know your thoughts and if you think this would be possible
</I>&gt;&gt;<i> using Web-sockets and web-workers, and if not, what changes would be
</I>&gt;&gt;<i> necessary to allow this to evolve.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sincerely,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Andrew J. L. de Andrade
</I>&gt;&gt;<i> S&#227;o Paulo, Brazil
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (P.S. I consider myself a pretty technical person, but I don't really
</I>&gt;&gt;<i> program. I only dabble in programming as a hobby and to better
</I>&gt;&gt;<i> understand my colleagues. Feel free to be as technical as you want in
</I>&gt;&gt;<i> your reply, but please forgive me if I make or made any bonehead
</I>&gt;&gt;<i> mistakes.)
</I>&gt;<i>
</I>&gt;<i>
</I>
I think the most interesting part of this idea is that the load scales
linearly with the demand for the content, because the site in question
only needs to serve the &quot;torrent&quot; file with distributed hash tables,
signatures, fingerprints, etc. In other words, the original site
exists to guarantee authenticity.

Better than that is the fact that distribution is effectively cheaper
as content becomes more valuable to the Internet collectively. A
mechanism like this would be massively useful for a Youtube or Vimeo
because video content distribution is one of the main sources of
bandwidth demand today and is static. The delivery of 1020p HD content
all of a sudden becomes very very feasible.

On the other hand, if this takes off, telcos and other providers of
&quot;internet tubes&quot; are going to have to worry about uplinks getting
clogged at the last mile. They should be thinking about this now,
because it represents a massive change in usage patterns for regular
internet users and not just the fringe that already uses bit-torrent.

Melvin, on your observation of NAT traversal, I think now is the time
to start thinking of implementing this with IPv6 already as the
default. Given the timelines we are talking about for HTML5 adoption,
this feature creates a very desirable feature that would push a lot of
those at the fringes of the network to adopt IPv6 sooner than they
might have otherwise.

The idea of this complementing RDFa is interesting and something I
hadn't considered yet. I'm going to think about that tonight. In fact
I need to read up on RDFa.

Andrew J L de Andrade
@andrewdeandrade
</PRE>



















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024777.html">[whatwg] Web-sockets + Web-workers to produce a P2P website or	application
</A></li>
	<LI>Next message: <A HREF="024793.html">[whatwg] Web-sockets + Web-workers to produce a P2P website or	application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24778">[ date ]</a>
              <a href="thread.html#24778">[ thread ]</a>
              <a href="subject.html#24778">[ subject ]</a>
              <a href="author.html#24778">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
