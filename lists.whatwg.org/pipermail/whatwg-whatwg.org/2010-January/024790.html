<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] history.back()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20history.back%28%29&In-Reply-To=%3C4B584980.1010605%40helsinki.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024789.html">
   <LINK REL="Next"  HREF="024791.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] history.back()</H1>
<!--htdig_noindex-->
    <B>Olli Pettay</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20history.back%28%29&In-Reply-To=%3C4B584980.1010605%40helsinki.fi%3E"
       TITLE="[whatwg] history.back()">Olli.Pettay at helsinki.fi
       </A><BR>
    <I>Thu Jan 21 04:33:04 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="024789.html">[whatwg] history.back()
</A></li>
        <LI>Next message: <A HREF="024791.html">[whatwg] history.back()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24790">[ date ]</a>
              <a href="thread.html#24790">[ thread ]</a>
              <a href="subject.html#24790">[ subject ]</a>
              <a href="author.html#24790">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>And still one thing to test and specify;
if history.back()/forward() is asynchronous,
does that mean that loading start asynchronously,
or that entries are added asynchronously to session history?

What should happen if a page calls:
history.back();
history.forward();

What if the page calls:
history.back();
history.go(-2);


And btw, some of the session history handling is anyway synchronous.
Per the current HTML5 draft calling document.open() adds a new entry to
session history immediately (IIRC, webkit is the only one which doesn't
support this).

So, after all, I'm not yet 100% sure whether making back()/forward()
async is good. This needs some more discussion, and things needs to
be specified properly.


-Olli




On 1/21/10 11:12 AM, Darin Fisher wrote:
&gt;<i> In WebKit, history.back() is currently implemented asynchronously.
</I>&gt;<i>
</I>&gt;<i> However, it was not always this way.  Previously, if the back navigation
</I>&gt;<i> corresponded to a hash change, then the back navigation would complete
</I>&gt;<i> synchronously.  If the back navigation corresponded to a different
</I>&gt;<i> document, then it would be completed asynchronously.
</I>&gt;<i>
</I>&gt;<i> The HTML5 spec currently calls for the old behavior of WebKit, which
</I>&gt;<i> happens to match the behavior of Gecko.  Because the spec is written
</I>&gt;<i> this way, there is movement in WebKit to change WebKit back.
</I>&gt;<i>
</I>&gt;<i> IE however appears to implement history.back() asynchronously in all
</I>&gt;<i> cases just like newer versions of WebKit.
</I>&gt;<i>
</I>&gt;<i> I actually think this is a better behavior to spec for a couple reasons:
</I>&gt;<i>
</I>&gt;<i> 1)  It allows for history.back() to behave consistently regardless of
</I>&gt;<i> the type of navigation.
</I>&gt;<i> 2)  It allows for the back/forward list to be decoupled from the main
</I>&gt;<i> thread of the rendering engine.
</I>&gt;<i>
</I>&gt;<i> This last point is quite relevant to Chrome since we store the
</I>&gt;<i> back/forward list in a separate process.  We do this since items in the
</I>&gt;<i> back/forward list may actually need to be rendered using different
</I>&gt;<i> WebKit processes.  (Navigating in the location bar is a hint that we can
</I>&gt;<i> spawn a new process.)
</I>&gt;<i>
</I>&gt;<i> We could copy the entire back/forward list to each process and replicate
</I>&gt;<i> state, but that seems excessive.  Instead, simply matching the
</I>&gt;<i> history.back() behavior of IE avoids the need to do so.
</I>&gt;<i>
</I>&gt;<i>  From a web compat perspective, it seems wise to match the behavior of
</I>&gt;<i> IE.  It also has other benefits.
</I>&gt;<i>
</I>&gt;<i> Can we change the spec?
</I>&gt;<i>
</I>&gt;<i> -Darin
</I>
</PRE>

















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024789.html">[whatwg] history.back()
</A></li>
	<LI>Next message: <A HREF="024791.html">[whatwg] history.back()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24790">[ date ]</a>
              <a href="thread.html#24790">[ thread ]</a>
              <a href="subject.html#24790">[ subject ]</a>
              <a href="author.html#24790">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
