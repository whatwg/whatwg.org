<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web-sockets + Web-workers to produce a P2P website or	application
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web-sockets%20%2B%20Web-workers%20to%20produce%20a%20P2P%20website%20or%0A%09application&In-Reply-To=%3C42b395981001211803s6f5e9a2cj173996c210ad0267%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067080.html">
   <LINK REL="Next"  HREF="067081.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web-sockets + Web-workers to produce a P2P website or	application</H1>
<!--htdig_noindex-->
    <B>Andrew de Andrade</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web-sockets%20%2B%20Web-workers%20to%20produce%20a%20P2P%20website%20or%0A%09application&In-Reply-To=%3C42b395981001211803s6f5e9a2cj173996c210ad0267%40mail.gmail.com%3E"
       TITLE="[whatwg] Web-sockets + Web-workers to produce a P2P website or	application">andrew at deandrade.com.br
       </A><BR>
    <I>Thu Jan 21 18:03:44 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067080.html">[whatwg] Web-sockets + Web-workers to produce a P2P website or	application
</A></li>
        <LI>Next message: <A HREF="067081.html">[whatwg] Web-sockets + Web-workers to produce a P2P website or	application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67069">[ date ]</a>
              <a href="thread.html#67069">[ thread ]</a>
              <a href="subject.html#67069">[ subject ]</a>
              <a href="author.html#67069">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>comments inline

On Thu, Jan 21, 2010 at 5:44 PM, Ivan &#381;u&#382;ak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">izuzak at gmail.com</A>&gt; wrote:
&gt;<i> Hi Andrew,
</I>&gt;<i>
</I>&gt;<i> That's an interesting idea. Here are some of my thoughts:
</I>&gt;<i>
</I>&gt;<i> As your Google friend noted, I'm wondering why you'd want to implement
</I>&gt;<i> this on the HTML5 level, not on the browser (C++) level. Implementing
</I>&gt;<i> such a protocol within the browser would probably be faster, more
</I>&gt;<i> secure and a better design choice since the functionality is basically
</I>&gt;<i> the same for every web application. I'm guessing the reason is that
</I>&gt;<i> you do not want to achieve this by changing/extending the browser but
</I>&gt;<i> rather by using new HTML5 technologies instead. Am I right?
</I>
While I realize that this is best implemented at the browser level, my
concern is if it will be an idea that would be broadly adopted by all
browser vendors if it is implemented at that level. It's an idea that
really has value once you've reached critical mass. For example, this
would be an extremely potent idea if the two most popular browsers
have implemented this by 2014 to 2015 or so. HTML5 is a web technology
spec. I imagine that putting it in the spec would greatly increase the
chances of browsers supporting this functionality.

However, I am not familiar with the politics that govern whether or
not browser product managers implement these features at the browser
level?

Being pragmatic, do you think it's possible to get widespread adoption
quickly for a feature like this as the browser level or do you agree
that this would be more likely to be adopted quickly if it was part of
a W3C spec?


&gt;<i>
</I>&gt;<i> If so, then a major problem is that the browser is not a network
</I>&gt;<i> server, rather only a client. In order for a browser A to connect
</I>&gt;<i> using WebSockets to a browser B which executes some process, browser B
</I>&gt;<i> must expose a network accessible end-point to which that process is
</I>&gt;<i> tied i.e. the browser must expose TCP/IP end-point. I guess that the
</I>&gt;<i> NAT traversal problem Melvin mentioned basically covers this.
</I>&gt;<i>
</I>
Assuming that this idea really only sees adoption within a few years,
won't IPv6 resolve the issue of NAT traversal?


&gt;<i> If the functionality you wish to achieve is distributing serving of
</I>&gt;<i> static content to clients which already acquired content, would a
</I>&gt;<i> dynamically changeable HTTP redirect table implemented on the server
</I>&gt;<i> cover the same functionality? E.g. 1) the client would request and
</I>&gt;<i> receive a web resource from the server, 2) if indicated the resource
</I>&gt;<i> was static - the client would expose the resource from it's machine by
</I>&gt;<i> creating a network accessible end-point and tying a process for
</I>&gt;<i> serving the content to it, 3) the client would let the server know it
</I>&gt;<i> is serving the content 4) the server would register the client
</I>&gt;<i> end-point as a possible server for the content, 5) when another client
</I>&gt;<i> would request the resource from the server, the server would HTTP
</I>&gt;<i> redirect it to the end-point of a client that is serving it. This
</I>&gt;<i> solution implies that a specific resource must be fetched from a
</I>&gt;<i> single server, while your idea implies fetching a resource from
</I>&gt;<i> different servers in parallel (as in torrent protocols) and would
</I>&gt;<i> probably be faster. What do you think?
</I>
I'm not sure. I don't really have the technical depth to evaluate this
solution. I'll ask some of my friends what they think.

&gt;<i>
</I>&gt;<i> In a broader context of connecting both servers and client devices
</I>&gt;<i> into a large network for scalable execution of applications, your idea
</I>&gt;<i> reminds me of a recent blog article I read:
</I>&gt;<i> <A HREF="http://highscalability.com/blog/2009/12/16/building-super-scalable-systems-blade-runner-meets-autonomic.html.">http://highscalability.com/blog/2009/12/16/building-super-scalable-systems-blade-runner-meets-autonomic.html.</A>
</I>&gt;<i> Definitely have a look at it - it's a bit on the visionary side and
</I>&gt;<i> longish, but worth it. I believe a planet-wide execution platform
</I>&gt;<i> consisting of every network device will eventually happen and that's
</I>&gt;<i> why I think we should all be contributing in that direction, which
</I>&gt;<i> your idea definitely is.
</I>
I took a brief look. This article looks very interesting. I'm going to
have a gander at it tomorrow. Maybe I'll shoot the HighScalability
people an email and see if they want to comment on this idea on their
blog.

&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Ivan Zuzak
</I>&gt;<i>
</I>&gt;<i> On Tue, Jan 19, 2010 at 17:59, Andrew de Andrade
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">andrew at deandrade.com.br</A>&gt; wrote:
</I>&gt;&gt;<i> I have an idea for a possible use case that as far as I can tell from
</I>&gt;&gt;<i> previous discussions on this list has not been considered or at least
</I>&gt;&gt;<i> not in the form I present below.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a friend whose company produces and licenses online games for
</I>&gt;&gt;<i> social networks such as Facebook, Orkut, etc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One of the big problems with these games is the shear amount of static
</I>&gt;&gt;<i> content that must be delivered via HTTP once the application becomes
</I>&gt;&gt;<i> popular. In fact, if a game becomes popular overnight, the scaling
</I>&gt;&gt;<i> problems with this static content quickly becomes a technical and
</I>&gt;&gt;<i> financial problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To give you an idea of the magnitude and scope, more than 4 TB of
</I>&gt;&gt;<i> static content is streamed on a given day for one of the applications.
</I>&gt;&gt;<i> It's very likely that others with similarly popular applications have
</I>&gt;&gt;<i> encountered the same challenge.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When thinking about how to resolve this, I took my usual approach of
</I>&gt;&gt;<i> thinking how do we decentralize the content delivery and move towards
</I>&gt;&gt;<i> an agent-based message passing model so that we do not have a single
</I>&gt;&gt;<i> bottleneck technically and so we can dissipate the cost of delivering
</I>&gt;&gt;<i> this content.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My idea is to use web-sockets to allow the browser function more a
</I>&gt;&gt;<i> less like a bit-torrent client. Along with this, web-workers would
</I>&gt;&gt;<i> provide threads for handling the code that would function as a server,
</I>&gt;&gt;<i> serving the static content to peers also using the program.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you have lots of users (thousands) accessing the same application,
</I>&gt;&gt;<i> you effectively have the equivalent of one torrent with a large swarm
</I>&gt;&gt;<i> of users, where the torrent is a package of the most frequently
</I>&gt;&gt;<i> requested static content. (I am assuming that the static content
</I>&gt;&gt;<i> requests follow a power law distribution, with only a few static files
</I>&gt;&gt;<i> being responsible for the overwhelming bulk of static data
</I>&gt;&gt;<i> transferred.).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As I have only superficial knowledge of the technologies involved and
</I>&gt;&gt;<i> the capabilities of HTML5, I passed this idea by a couple of
</I>&gt;&gt;<i> programmer friends to get their opinions. Generally they thought is
</I>&gt;&gt;<i> was a very interesting idea, but that as far as they know, the
</I>&gt;&gt;<i> specification as it stands now is incapable of accommodating such a
</I>&gt;&gt;<i> use case.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Together we arrived at a few criticisms of this idea that appear to be
</I>&gt;&gt;<i> resolvable:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -- Privacy issues
</I>&gt;&gt;<i> -- Security issues (man in the middle attack).
</I>&gt;&gt;<i> -- content labeling (i.e. how does the browser know what content is
</I>&gt;&gt;<i> truly static and therefore safe to share.)
</I>&gt;&gt;<i> -- content signing (i.e. is there some sort of hash that allows the
</I>&gt;&gt;<i> peers to confirm that the content has not been adulterated).
</I>&gt;&gt;<i> -- privacy issues
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All in all, many of these issues have been solved by the many talented
</I>&gt;&gt;<i> programmers that have developed the current bit-torrent protocol,
</I>&gt;&gt;<i> algorithms and security features. The idea would simply to design the
</I>&gt;&gt;<i> HTML5 in such a way that it can permit the browser to function as a
</I>&gt;&gt;<i> full-fledged web-application bit-torrent client-server.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Privacy issues can be resolved by possibly defining something such as
</I>&gt;&gt;<i> &quot;browser security zones&quot; or &quot;content label&quot; whereby the content
</I>&gt;&gt;<i> provider (application developer) labels content (such as images and
</I>&gt;&gt;<i> CSS files) as safe to share (static content) and labels dynamic
</I>&gt;&gt;<i> content (such as personal photos, documents, etc.) as unsafe to share.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also in discussing this, we come up with some potentially useful
</I>&gt;&gt;<i> extensions to this use case.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One would be the versioning of the &quot;torrent file&quot;, such that the
</I>&gt;&gt;<i> torrent file could represent versions of the application. i.e. I
</I>&gt;&gt;<i> release an application that is version 1.02 and it becomes very
</I>&gt;&gt;<i> popular and there is a sizable swarm. At some point in the future I
</I>&gt;&gt;<i> release a new version with bug-fixes and additional features (such as
</I>&gt;&gt;<i> CSS sprites for the social network game). I should be able to
</I>&gt;&gt;<i> propagate this new version to all clients in the swarm so that over
</I>&gt;&gt;<i> some time window such as 2 to 4 hours all clients in the swarm
</I>&gt;&gt;<i> discover (via push or pull) the new version and end up downloading it
</I>&gt;&gt;<i> from the peers with the new version. The only security feature I could
</I>&gt;&gt;<i> see that would be required would be that once a client discovers that
</I>&gt;&gt;<i> their is a new version, it would hit up the original server to
</I>&gt;&gt;<i> download a signature/fingerprint file to verify that the new version
</I>&gt;&gt;<i> that it is downloading from its peers is legitimate.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The interesting thing about this idea is that it would permit large
</I>&gt;&gt;<i> portions of sites to exist in virtual form. Long-term I can imagine
</I>&gt;&gt;<i> large non-profit sites such as Wikipedia functioning on top of this
</I>&gt;&gt;<i> structure in such a way that it greatly reduces the amount of funding
</I>&gt;&gt;<i> necessary. It would be partially distributed with updates to wikipedia
</I>&gt;&gt;<i> being distributed via lots of tiny versions from super-nodes &#224; la a
</I>&gt;&gt;<i> Skype type P2P model.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This would also take a lot of power out of the hands of those telcos
</I>&gt;&gt;<i> that are anti-net neutrality. This feature would basically permit a
</I>&gt;&gt;<i> form of net neutrality by moving content to the fringes of the
</I>&gt;&gt;<i> network.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Let me know your thoughts and if you think this would be possible
</I>&gt;&gt;<i> using Web-sockets and web-workers, and if not, what changes would be
</I>&gt;&gt;<i> necessary to allow this to evolve.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sincerely,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Andrew J. L. de Andrade
</I>&gt;&gt;<i> S&#227;o Paulo, Brazil
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (P.S. I consider myself a pretty technical person, but I don't really
</I>&gt;&gt;<i> program. I only dabble in programming as a hobby and to better
</I>&gt;&gt;<i> understand my colleagues. Feel free to be as technical as you want in
</I>&gt;&gt;<i> your reply, but please forgive me if I make or made any bonehead
</I>&gt;&gt;<i> mistakes.)
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067080.html">[whatwg] Web-sockets + Web-workers to produce a P2P website or	application
</A></li>
	<LI>Next message: <A HREF="067081.html">[whatwg] Web-sockets + Web-workers to produce a P2P website or	application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67069">[ date ]</a>
              <a href="thread.html#67069">[ thread ]</a>
              <a href="subject.html#67069">[ subject ]</a>
              <a href="author.html#67069">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
