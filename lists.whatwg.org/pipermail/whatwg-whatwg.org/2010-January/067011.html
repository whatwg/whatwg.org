<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] question about the popstate event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20question%20about%20the%20popstate%20event&In-Reply-To=%3Cbd8f24d21001121554r640a3fe3jc57b9760eea19049%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066952.html">
   <LINK REL="Next"  HREF="067017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] question about the popstate event</H1>
<!--htdig_noindex-->
    <B>Darin Fisher</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20question%20about%20the%20popstate%20event&In-Reply-To=%3Cbd8f24d21001121554r640a3fe3jc57b9760eea19049%40mail.gmail.com%3E"
       TITLE="[whatwg] question about the popstate event">darin at chromium.org
       </A><BR>
    <I>Tue Jan 12 15:54:19 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="066952.html">[whatwg] question about the popstate event
</A></li>
        <LI>Next message: <A HREF="067017.html">[whatwg] question about the popstate event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67011">[ date ]</a>
              <a href="thread.html#67011">[ thread ]</a>
              <a href="subject.html#67011">[ subject ]</a>
              <a href="author.html#67011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I've been discussing this issue with Brady Eidson over at
<A HREF="https://bugs.webkit.org/show_bug.cgi?id=33224,">https://bugs.webkit.org/show_bug.cgi?id=33224,</A>
and his interpretation appears to be different.  (I think he may have
convinced me too.)

I'd really like some help understanding how pushState is intended to work
and to see how that lines up
with the spec.

Also, assuming Brady is correct, then I wonder why pushState was designed
this way.  It seems strange
to me that entries in session history would disappear when you navigate away
from a document that used
pushState.

-Darin


On Tue, Jan 5, 2010 at 6:55 PM, Justin Lebar &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">justin.lebar at gmail.com</A>&gt; wrote:

&gt;<i> &gt; From my reading of the spec, I would expect the following steps:
</I>&gt;<i> &gt; 5. Page A is loaded.
</I>&gt;<i> &gt; 6. The load event for Page A is dispatched.
</I>&gt;<i> &gt; 7. The popstate event for Page A is dispatched.
</I>&gt;<i>
</I>&gt;<i> I think this is correct.  A popstate event is always dispatched
</I>&gt;<i> whenever a new session history entry is activated (6.10.3).
</I>&gt;<i>
</I>&gt;<i> -Justin
</I>&gt;<i>
</I>&gt;<i> On Tue, Jan 5, 2010 at 4:53 PM, Darin Fisher &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at chromium.org</A>&gt; wrote:
</I>&gt;<i> &gt; I'd like to make sure that I'm understanding the spec for pushState and
</I>&gt;<i> the
</I>&gt;<i> &gt; popstate event properly.
</I>&gt;<i> &gt; Suppose, I have the following sequence of events:
</I>&gt;<i> &gt; 1. Page A is loaded.
</I>&gt;<i> &gt; 2. Page A calls pushState(&quot;foo&quot;, null).
</I>&gt;<i> &gt; 3. The user navigates to Page B.
</I>&gt;<i> &gt; 4. The user navigates back to Page A (clicks the back button once).
</I>&gt;<i> &gt; Assuming the document of Page A was disposed upon navigation to Page B
</I>&gt;<i> &gt; (i.e., that it was not preserved in a page cache), should a popstate
</I>&gt;<i> event
</I>&gt;<i> &gt; be generated as a result of step 4?
</I>&gt;<i> &gt; From my reading of the spec, I would expect the following steps:
</I>&gt;<i> &gt; 5. Page A is loaded.
</I>&gt;<i> &gt; 6. The load event for Page A is dispatched.
</I>&gt;<i> &gt; 7. The popstate event for Page A is dispatched.
</I>&gt;<i> &gt; Do I understand correctly?
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; -Darin
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100112/b74160dc/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100112/b74160dc/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066952.html">[whatwg] question about the popstate event
</A></li>
	<LI>Next message: <A HREF="067017.html">[whatwg] question about the popstate event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67011">[ date ]</a>
              <a href="thread.html#67011">[ thread ]</a>
              <a href="subject.html#67011">[ subject ]</a>
              <a href="author.html#67011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
