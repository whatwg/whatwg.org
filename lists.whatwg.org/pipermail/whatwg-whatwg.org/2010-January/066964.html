<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTMLCanvasElement.toFile()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTMLCanvasElement.toFile%28%29&In-Reply-To=%3CA5B44B60-EFFF-4299-97E8-1740C90F344F%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024688.html">
   <LINK REL="Next"  HREF="066965.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTMLCanvasElement.toFile()</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTMLCanvasElement.toFile%28%29&In-Reply-To=%3CA5B44B60-EFFF-4299-97E8-1740C90F344F%40apple.com%3E"
       TITLE="[whatwg] HTMLCanvasElement.toFile()">mjs at apple.com
       </A><BR>
    <I>Thu Jan  7 14:22:35 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="024688.html">[whatwg] HTMLCanvasElement.toFile()
</A></li>
        <LI>Next message: <A HREF="066965.html">[whatwg] HTMLCanvasElement.toFile()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66964">[ date ]</a>
              <a href="thread.html#66964">[ thread ]</a>
              <a href="subject.html#66964">[ subject ]</a>
              <a href="author.html#66964">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Jan 7, 2010, at 11:41 AM, Jonas Sicking wrote:

&gt;<i> Hi web fans,
</I>&gt;<i>
</I>&gt;<i> So at mozilla we've been implementing and playing around with various
</I>&gt;<i> File APIs lately. One of the most common use cases today for file
</I>&gt;<i> manipulation is photo uploaders. For example to sites like flickr,
</I>&gt;<i> facebook, twitpic and icanhascheezburger. Some of these sites allow
</I>&gt;<i> additional modifications of the uploaded image, most commonly cropping
</I>&gt;<i> and rotating the image. But even things like manipulating colors,
</I>&gt;<i> adding text, and red eye reduction are things that sites do, or would
</I>&gt;<i> like to do.
</I>&gt;<i>
</I>&gt;<i> We do already have a great tool for image manipulation in HTML, the
</I>&gt;<i> canvas element. However if a site wants to upload the resulting image,
</I>&gt;<i> after the modifications, things become more painful. Currently you
</I>&gt;<i> have to call toDataURL(), send that URL using XMLHttpRequest, and then
</I>&gt;<i> serverside convert to binary data. Things will be a little better once
</I>&gt;<i> XHR supports sending manually constructed binary data, but you still
</I>&gt;<i> have to manually convert the data url to binary data in javascript.
</I>&gt;<i>
</I>&gt;<i> I suggest we add a function like:
</I>&gt;<i>
</I>&gt;<i> File toFile(in DOMString name, in optional DOMString type, in any...  
</I>&gt;<i> args);
</I>&gt;<i>
</I>&gt;<i> This function takes the same arguments as toDataURL(), plus an
</I>&gt;<i> additional 'name' argument. It produces the same result as
</I>&gt;<i> toDataURL(), except that it returns the result as a File object rather
</I>&gt;<i> than as a data-url encoded string. This can then be directly sent
</I>&gt;<i> using XMLHttpRequest.
</I>
I think it would make more sense to have an actual type for binary  
data (for example along the lines of my proposal on public-script- 
coord and es-discuss) and enable getting one from &lt;canvas&gt; and sending  
via XHR. I don't think using File for temporary in-memory binary data,  
as opposed to a file on disk, makes sense. The File should stick to  
representing files. After all, you would not make a File object to  
convert something to text for uploading. Nor would it make sense to do  
an asynchronous read from this. And under the covers, you would want  
to pass the actual binary data to the upload code, not a file with a  
file name.

Regards,
Maciej


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024688.html">[whatwg] HTMLCanvasElement.toFile()
</A></li>
	<LI>Next message: <A HREF="066965.html">[whatwg] HTMLCanvasElement.toFile()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66964">[ date ]</a>
              <a href="thread.html#66964">[ thread ]</a>
              <a href="subject.html#66964">[ subject ]</a>
              <a href="author.html#66964">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
