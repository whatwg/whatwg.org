<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Workers and URL origin check
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Workers%20and%20URL%20origin%20check&In-Reply-To=%3C28040fc60905271713t302920e1y4658d827d11975f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019964.html">
   <LINK REL="Next"  HREF="019966.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Workers and URL origin check</H1>
<!--htdig_noindex-->
    <B>Dmitry Titov</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Workers%20and%20URL%20origin%20check&In-Reply-To=%3C28040fc60905271713t302920e1y4658d827d11975f%40mail.gmail.com%3E"
       TITLE="[whatwg] Workers and URL origin check">dimich at chromium.org
       </A><BR>
    <I>Wed May 27 17:13:39 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019964.html">[whatwg] Delaying the media load event
</A></li>
        <LI>Next message: <A HREF="019966.html">[whatwg] Workers and URL origin check
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19965">[ date ]</a>
              <a href="thread.html#19965">[ thread ]</a>
              <a href="subject.html#19965">[ subject ]</a>
              <a href="author.html#19965">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi WHATWG!
I have a question about URL origin check for Workers: the spec, in 4.8.2,
mandates a check for the Worker URL to be the 'same origin' with the parent
document's URL. At the same time, 4.2 says the origin of the worker is
derived later from the URL represented by the 'location' object of the
worker context.

However, the spec doesn't say how redirects should be processed. If a
browser gets 30x redirect request, the final URL of a worker can be
different from the original one which has passed the check before loading.
Current spec ignores the fact that origin can be changed via redirect. If
the origin of the loaded worker is based on the final (potentially
redirected) URL that 'location' object represents, then subsequent XHR
requests, nested workers and importScripts() will work in the origin of that
final URL. As specified, in case of redirect the page from &quot;
<A HREF="http://applicationInternals.com&quot;">http://applicationInternals.com&quot;</A> can use a worker from &quot;
<A HREF="http://application.com&quot;">http://application.com&quot;</A> (via redirect) to access APIs of
application.comthat were not necessarily intended for such
consumption.

Should the spec simply require the redirected, final URLs to be checked
against parent's and reject the script if redirection results in a different
origin?

Thanks,
Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090527/9135dd86/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090527/9135dd86/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019964.html">[whatwg] Delaying the media load event
</A></li>
	<LI>Next message: <A HREF="019966.html">[whatwg] Workers and URL origin check
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19965">[ date ]</a>
              <a href="thread.html#19965">[ thread ]</a>
              <a href="subject.html#19965">[ subject ]</a>
              <a href="author.html#19965">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
