<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Overriding functions in DOM Storage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Overriding%20functions%20in%20DOM%20Storage&In-Reply-To=%3C5dd9e5c50905221741g36331cbarf845329b03137ee9%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019944.html">
   <LINK REL="Next"  HREF="019913.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Overriding functions in DOM Storage</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Overriding%20functions%20in%20DOM%20Storage&In-Reply-To=%3C5dd9e5c50905221741g36331cbarf845329b03137ee9%40mail.gmail.com%3E"
       TITLE="[whatwg] Overriding functions in DOM Storage">jorlow at google.com
       </A><BR>
    <I>Fri May 22 17:41:18 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019944.html">[whatwg] page refresh and resubmitting POST state
</A></li>
        <LI>Next message: <A HREF="019913.html">[whatwg] Overriding functions in DOM Storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19912">[ date ]</a>
              <a href="thread.html#19912">[ thread ]</a>
              <a href="subject.html#19912">[ subject ]</a>
              <a href="author.html#19912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>What is the behavior of the following supposed to be?

window.sessionStorage.removeItem = function(x) { alert(&quot;Wait, this works?&quot;);
};
window.sessionStorage.removeItem('blah');
alert(typeof window.sessionStorage.removeItem);

Safari shows 2 alerts, and the second one says 'function'.
IE8 says &quot;object doesn't support this property or method&quot; if line 2 isn't
commented out.  It returns type string when it is.
Mozilla also won't run if line 2 is there, but it returns type object for
line 3.

It seems to me that if IE8's behavior is correct, those parameters should be
marked as read-only since overriding them could only be used to shoot
yourself in the foot.

If Safari's implementation is correct (and it's good for the implementations
to be overridable), then I believe there needs to be some safe way to make
.clear() usable again.  (Otherwise, once you override removeItem() and
clear(), there's not really any way to recover.)  The spec would also need
to make it clear that removeItem, setItem, etc are special and should not
be serialized to disk.

Apologies if this is clear in the spec and I somehow missed it.  But, if
not, I think a clarification might be necessary.

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090522/259f6a25/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090522/259f6a25/attachment.htm</A>&gt;
</PRE>
















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019944.html">[whatwg] page refresh and resubmitting POST state
</A></li>
	<LI>Next message: <A HREF="019913.html">[whatwg] Overriding functions in DOM Storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19912">[ date ]</a>
              <a href="thread.html#19912">[ thread ]</a>
              <a href="subject.html#19912">[ subject ]</a>
              <a href="author.html#19912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
