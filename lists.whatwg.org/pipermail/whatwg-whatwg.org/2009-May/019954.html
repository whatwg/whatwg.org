<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Should DOM storage objects be mapped by an &quot;effective	script origin&quot; rather then just an &quot;origin&quot;?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Should%20DOM%20storage%20objects%20be%20mapped%20by%20an%20%22effective%0A%09script%20origin%22%20rather%20then%20just%20an%20%22origin%22%3F&In-Reply-To=%3C63df84f0905260240w77e3182ew487d26fa217405c5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019953.html">
   <LINK REL="Next"  HREF="019960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Should DOM storage objects be mapped by an &quot;effective	script origin&quot; rather then just an &quot;origin&quot;?</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Should%20DOM%20storage%20objects%20be%20mapped%20by%20an%20%22effective%0A%09script%20origin%22%20rather%20then%20just%20an%20%22origin%22%3F&In-Reply-To=%3C63df84f0905260240w77e3182ew487d26fa217405c5%40mail.gmail.com%3E"
       TITLE="[whatwg] Should DOM storage objects be mapped by an &quot;effective	script origin&quot; rather then just an &quot;origin&quot;?">jonas at sicking.cc
       </A><BR>
    <I>Tue May 26 02:40:57 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019953.html">[whatwg] Should DOM storage objects be mapped by an &quot;effective script origin&quot; rather then just an &quot;origin&quot;?
</A></li>
        <LI>Next message: <A HREF="019960.html">[whatwg] Notes from IRC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19954">[ date ]</a>
              <a href="thread.html#19954">[ thread ]</a>
              <a href="subject.html#19954">[ subject ]</a>
              <a href="author.html#19954">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, May 26, 2009 at 2:26 AM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt; wrote:
&gt;<i> On Tue, 26 May 2009 09:31:15 +0200, Honza Bambas &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">honzab at allpeers.com</A>&gt; wrote:
</I>&gt;&gt;<i> See also mozilla bug <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=494799">https://bugzilla.mozilla.org/show_bug.cgi?id=494799</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Effective script origin driven by document.domain is used to allow
</I>&gt;&gt;<i> sharing of properties and data among pages coming from different
</I>&gt;&gt;<i> subdomains. Should this &quot;data sharing&quot; apply also to sessionStorage and
</I>&gt;&gt;<i> localStorage? It means: having page load from <A HREF="http://test.mysite.com">http://test.mysite.com</A>
</I>&gt;&gt;<i> accessing sessionStorage would get sessionStorage bound to
</I>&gt;&gt;<i> <A HREF="http://test.mysite.com.">http://test.mysite.com.</A> When that same page than changes document.domain
</I>&gt;&gt;<i> to <A HREF="http://mysite.com,">http://mysite.com,</A> sessionStorage it gets now should be a different
</I>&gt;&gt;<i> object, bound to <A HREF="http://mysite.com.">http://mysite.com.</A> A reason to do this is also because
</I>&gt;&gt;<i> of security checking. The subject's origin changes to <A HREF="http://mysite.com">http://mysite.com</A>
</I>&gt;&gt;<i> and access to sessionStorage bound to <A HREF="http://test.mysite.com">http://test.mysite.com</A> should not
</I>&gt;&gt;<i> be allowed (origins are not equal).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Opinions?
</I>&gt;<i>
</I>&gt;<i> I'd rather not leak document.domain leak more than necessary. Especially with it being bound to the Public Suffix List. If you want to communicate across origins you can always use postMessage().
</I>
Agreed! Document.domain is a wart on the otherwise perfect face of the web :)

Seriously though, I definitely don't see a reason to leak
document.domain hacks more than neccesary. Further, generally the
document.domain feature requires that two pages set document.domain to
the same value in order to communicate. If localStorage was affected
by document.domain, that would mean that foo.example.com could read
example.coms data without example.com ever opting in to this.

/ Jonas
</PRE>
























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019953.html">[whatwg] Should DOM storage objects be mapped by an &quot;effective script origin&quot; rather then just an &quot;origin&quot;?
</A></li>
	<LI>Next message: <A HREF="019960.html">[whatwg] Notes from IRC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19954">[ date ]</a>
              <a href="thread.html#19954">[ thread ]</a>
              <a href="subject.html#19954">[ subject ]</a>
              <a href="author.html#19954">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
