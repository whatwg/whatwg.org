<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Websockets Client API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Websockets%20Client%20API&In-Reply-To=%3CAANLkTik0XJRjssSkfBcf6FMkPG1iRy7YF7LZAkPbRCUq%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030599.html">
   <LINK REL="Next"  HREF="030608.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Websockets Client API</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Websockets%20Client%20API&In-Reply-To=%3CAANLkTik0XJRjssSkfBcf6FMkPG1iRy7YF7LZAkPbRCUq%40mail.gmail.com%3E"
       TITLE="[whatwg] Websockets Client API">robert at ocallahan.org
       </A><BR>
    <I>Sun Feb 20 18:51:29 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030599.html">[whatwg] Websockets Client API
</A></li>
        <LI>Next message: <A HREF="030608.html">[whatwg] Websockets Client API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30601">[ date ]</a>
              <a href="thread.html#30601">[ thread ]</a>
              <a href="subject.html#30601">[ subject ]</a>
              <a href="author.html#30601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Feb 21, 2011 at 2:34 PM, Bruce Atherton &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruce at callenish.com</A>&gt; wrote:

&gt;<i> Perhaps you are reading a different spec than I am. The only language I see
</I>&gt;<i> about queuing tasks involves changing the ready state on the Websocket
</I>&gt;<i> object. There is nothing in there about waiting until a block of other
</I>&gt;<i> Javascript code has run before making any other event callbacks.
</I>&gt;<i>
</I>
<A HREF="http://dev.w3.org/html5/websockets/#feedback-from-the-protocol">http://dev.w3.org/html5/websockets/#feedback-from-the-protocol</A>
For every event in that section, the user-agent must queue a task to fire
the event. None of the other sections describe any events.

Let me see if I follow the &quot;perfectly clear&quot; line of reasoning you are
&gt;<i> using. Your assumption is that a Websocket connection will only be loaded in
</I>&gt;<i> an event handler like window.onload.
</I>

In HTML5-compliant user-agents, all Javascript runs in some task of the
HTML5 event loop. That task must run to completion before other tasks queued
by the user-agent will run.

No other events will be delivered until the current event handler finishes.
&gt;<i> And the event handler that creates the Websocket object will necessarily
</I>&gt;<i> also be where the event handlers are set on the Websocket object. By making
</I>&gt;<i> all of these assumptions, it becomes obvious that within a browser this API
</I>&gt;<i> is safe for callbacks. Do I have that right?
</I>&gt;<i>
</I>
Yes. You observe correctly that the Web author has to be careful to ensure
that the event handlers are set on the Websocket object during the same task
that created it. However, this is a fairly natural requirement that is
common in the Web platform.

I am reminded of a joke about mathematicians. One argues that it is obvious
&gt;<i> that claim A follows from B. The other disagrees. After arguing for an hour,
</I>&gt;<i> the latter finally agrees that A obviously follows from B.
</I>&gt;<i>
</I>
Yeah :-). By &quot;perfectly clear&quot; I meant that the spec was &quot;unambiguous&quot;,
rather than &quot;obvious to the casual reader&quot; :-).

Rob
-- 
&quot;Now the Bereans were of more noble character than the Thessalonians, for
they received the message with great eagerness and examined the Scriptures
every day to see if what Paul said was true.&quot; [Acts 17:11]
</PRE>



















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030599.html">[whatwg] Websockets Client API
</A></li>
	<LI>Next message: <A HREF="030608.html">[whatwg] Websockets Client API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30601">[ date ]</a>
              <a href="thread.html#30601">[ thread ]</a>
              <a href="subject.html#30601">[ subject ]</a>
              <a href="author.html#30601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
