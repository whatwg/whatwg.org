<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] ArrayBuffer and the structured clone algorithm
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20ArrayBuffer%20and%20the%20structured%20clone%20algorithm&In-Reply-To=%3C20110204224306.GA14034%40wok.mcc.id.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030169.html">
   <LINK REL="Next"  HREF="030171.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] ArrayBuffer and the structured clone algorithm</H1>
<!--htdig_noindex-->
    <B>Cameron McCormack</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20ArrayBuffer%20and%20the%20structured%20clone%20algorithm&In-Reply-To=%3C20110204224306.GA14034%40wok.mcc.id.au%3E"
       TITLE="[whatwg] ArrayBuffer and the structured clone algorithm">cam at mcc.id.au
       </A><BR>
    <I>Fri Feb  4 14:43:06 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030169.html">[whatwg] ArrayBuffer and the structured clone algorithm
</A></li>
        <LI>Next message: <A HREF="030171.html">[whatwg] ArrayBuffer and the structured clone algorithm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30237">[ date ]</a>
              <a href="thread.html#30237">[ thread ]</a>
              <a href="subject.html#30237">[ subject ]</a>
              <a href="author.html#30237">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Anne van Kesteren:
&gt;<i> &gt; ImageData.data you mean? I wonder if we can still remove
</I>&gt;<i> &gt; CanvasPixelArray.
</I>
Tab Atkins Jr.:
&gt;<i> Only if the out-of-bounds behavior for entries in Typed Arrays matches
</I>&gt;<i> the current clamping behavior for CanvasPixelArray.  I don't see any
</I>&gt;<i> explicit indication of what should be done in the Typed Array spec,
</I>&gt;<i> which I suppose means that they're relying on WebIDL's coercion algos
</I>&gt;<i> to keep things in-range for the given view.  WebIDL has the wrong
</I>&gt;<i> behavior here right now (it wraps), though I think heycan is receptive
</I>&gt;<i> to changing it.
</I>
This is <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=10930.">http://www.w3.org/Bugs/Public/show_bug.cgi?id=10930.</A>

Kenneth Russell:
&gt;<i> For this reason I think we need to keep CanvasPixelArray distinct. I
</I>&gt;<i> certainly hope that Web IDL does not change its conversion rules to
</I>&gt;<i> mimic the clamping behavior in CanvasPixelArray. Right now Web IDL
</I>&gt;<i> delegates to the ECMA-262 specification for primitive conversions,
</I>&gt;<i> which have the wrapping behavior of C-style casts rather than clamping
</I>&gt;<i> behavior. Forcing clamping for out-of-range integer values would
</I>&gt;<i> impose a significant negative performance constraint on typed arrays.
</I>
So it seems at this stage CanvasPixelArray definitely needs to have the
clamping behaviour.

If people have opinions on whether all JS Number &#8594; IDL integer type
conversions should clamp or wrap, or whether Web IDL should just have an
annotation to indicate what kind of conversion is used, please comment
in the bug.

Thanks,

Cameron

-- 
Cameron McCormack &#8797; <A HREF="http://mcc.id.au/">http://mcc.id.au/</A>
</PRE>








<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030169.html">[whatwg] ArrayBuffer and the structured clone algorithm
</A></li>
	<LI>Next message: <A HREF="030171.html">[whatwg] ArrayBuffer and the structured clone algorithm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30237">[ date ]</a>
              <a href="thread.html#30237">[ thread ]</a>
              <a href="subject.html#30237">[ subject ]</a>
              <a href="author.html#30237">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
