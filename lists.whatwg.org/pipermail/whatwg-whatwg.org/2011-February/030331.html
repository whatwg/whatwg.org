<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for separating script downloads and execution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3C20110209074056.38ce27ba%40desudesudesu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030330.html">
   <LINK REL="Next"  HREF="030333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for separating script downloads and execution</H1>
<!--htdig_noindex-->
    <B>Nils Dagsson Moskopp</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3C20110209074056.38ce27ba%40desudesudesu%3E"
       TITLE="[whatwg] Proposal for separating script downloads and execution">nils at dieweltistgarnichtso.net
       </A><BR>
    <I>Tue Feb  8 22:40:56 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030330.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
        <LI>Next message: <A HREF="030333.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30331">[ date ]</a>
              <a href="thread.html#30331">[ thread ]</a>
              <a href="subject.html#30331">[ subject ]</a>
              <a href="author.html#30331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&quot;Kyle Simpson&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">getify at gmail.com</A>&gt; schrieb am Tue, 8 Feb 2011 23:27:35
-0600:

&gt;<i> I can't speak definitively as to how the JavaScript engine is
</I>&gt;<i> implemented (and if the code is significantly different between
</I>&gt;<i> mobile and desktop). But I can say that even if their code is
</I>&gt;<i> substantially the same, I could still see it quite plausible that the
</I>&gt;<i> device itself locks up (not the browser) if there's just simply too
</I>&gt;<i> much going, taxing its limited CPU power. Heck, I have times when my
</I>&gt;<i> powerhouse desktop freezes for a brief moment when I have a lot going
</I>&gt;<i> on. Exhausting the CPU is not a difficult thing to imagine happening
</I>&gt;<i> on these tiny devices.
</I>
Anecdotal evidence is not data. Also, today these &#8220;tiny devices&#8221;
usually have some serious processing power.

&gt;<i> I can also see it quite plausible that mobile OS's are not as capable
</I>&gt;<i> of taking advantage of multi-threading (maybe intentionally forbidden
</I>&gt;<i> from it in many instances, for fear of battery life degradation).
</I>
I can not follow here.

&gt;<i> Perhaps it's simply not possible to multi-thread the parsing of
</I>&gt;<i> JavaScript in parallel to the UI rendering. If that's the case (I
</I>&gt;<i> really am completely guessing here)
</I>
Mighty conjecture, chap. Multithreading is even possible on
microcontrollers like the Atmel ATmega32 &#8212; so why should a modern
operating system running on reasonable hardware not be able to do it?

&gt;<i>, then it's not exactly a &quot;quality
</I>&gt;<i> of implementation&quot; issue as far as the JavaScript engine is
</I>&gt;<i> concerned, but more an issue of how the mobile OS is designed and
</I>&gt;<i> integrated with the device hardware.
</I>
It would still be a quality of implementation issue. Mobile operating
systems are constantly evolving, too &#8212; just look at Android.

&gt;<i> Regardless, considering such
</I>&gt;<i> things is way outside the scope of anything that's going to be useful
</I>&gt;<i> for web developers in the near-term dealing with these use-cases.
</I>
&#8220;X is possible and one cannot know that X is not true, so X is true.&#8221; is
a common sceptic proposition and not a sound argument outside of
epistemology class.

&gt;<i> Even if you're right and the fault really lies with the implementor
</I>&gt;<i> of the JavaScript engine (or the OS), that's still a fruitless path
</I>&gt;<i> for this discussion to go down. No matter how good the mobile
</I>&gt;<i> JavaScript engine gets, I promise you sites will find a way to stuff
</I>&gt;<i> too much JavaScript down the pipe at the beginning of page-load in
</I>&gt;<i> such a way as to overload the device. That is a virtual certainty.
</I>
In related news, some current desktop browsers choke at the single page
version of the HTML spec, all while handling a vast amount of other
pages just fine. So, no matter how good the desktop engines get, I
promise you &#8230; that efforts to simply speed up stuff will not be
fruitless for a vast majority of pages.

&gt;<i> I don't want to cause browsers to be less performant or hold them
</I>&gt;<i> back from improving. I want to help developers have an option to
</I>&gt;<i> increase performance in those cases where the browser's automatic
</I>&gt;<i> processes to do so happens to fall short. I believe there must be a
</I>&gt;<i> way to achieve both goals simultaneously.
</I>
Interesting, and probably workable if you keep it to simple hints. But
whatever more complex heuristics developers come up with should
probably end up in browsers &#8212; making the web faster for everyone.

Or am I missing something here?

&gt;<i> [&#8230;]
</I>
&gt;<i> What's VERY important to note: (perhaps) the most critical part of 
</I>&gt;<i> user-experience satisfaction in web page interaction is the *initial* 
</I>&gt;<i> page-load experience. So if it's a tradeoff where I can get my
</I>&gt;<i> page-load to go much quicker on a mobile device (and get some useful
</I>&gt;<i> content in front of them quickly) in exchange for some lag later in
</I>&gt;<i> the lifetime of the page, that's a choice I (and many other devs) are
</I>&gt;<i> likely to want to make. Regardless of wanting freedom of
</I>&gt;<i> implementation, no browser/engine implementation should fight
</I>&gt;<i> against/resist the efforts of a web author to streamline initial
</I>&gt;<i> page-load performance.
</I>
Fun fact: I use mobile versions of some web sites, because they are much
quicker, even on the desktop. Sometimes a little minimalism can go a
long way.

&gt;<i> Presumably, if an author is taking the extraordinary steps to wire up 
</I>&gt;<i> advanced functionality like deferred execution (especially
</I>&gt;<i> negotiating that with several scripts), they are doing so
</I>&gt;<i> intentionally to improve performance, and so if they ended up
</I>&gt;<i> actually doing the reverse, and killing their performance to an
</I>&gt;<i> unacceptable level, they'd see that quickly, and back-track. It'd be
</I>&gt;<i> silly and unlikely to think they'd go to the extra trouble to
</I>&gt;<i> actually worsen their performance compared to before.
</I>
Counter-intuitive at first, but true: More complex code is not
necessarly faster code. More options are more options to screw up.

&gt;<i> Really, let's not always assume the worst about web authors. I
</I>&gt;<i> believe in giving them appropriate tools to inspire them to do the
</I>&gt;<i> best. If they do it wrongly and their users suffer, bad on them, not
</I>&gt;<i> on the rest of us. That's not an excuse for recklessly poor
</I>&gt;<i> implementation of features, but it IS a call for giving some benefit
</I>&gt;<i> of the doubt from time to time.
</I>
Why do you hate formal evidence?

&gt;<i> &gt; In other words, forbid the browser to start parsing the script,
</I>&gt;<i> &gt; right? How would you tell whether a browser implemented this as
</I>&gt;<i> &gt; specified?
</I>&gt;<i> 
</I>&gt;<i> I could tell if the browser let me control execution pretty easily.
</I>&gt;<i> As for telling if the browser were deferring parsing to a useful
</I>&gt;<i> degree, I'm sure that the only way to actually determine that would
</I>&gt;<i> be test a site with a particularly long script file (length being a
</I>&gt;<i> rough approximation for parsing time), and see just when (between
</I>&gt;<i> load and execution) the big parsing delay (as observed previously)
</I>&gt;<i> was happening. If the lock up still happened during page-load right
</I>&gt;<i> after the script loads, even though execution was specifically
</I>&gt;<i> deferred, that would seem to be the browser being stubborn and
</I>&gt;<i> uncooperative.
</I>
Browsers do not like it to be anthropomorphised. ;)

&gt;<i> [&#8230;]
</I>

Cheers,
-- 
Nils Dagsson Moskopp // erlehmann
&lt;<A HREF="http://dieweltistgarnichtso.net">http://dieweltistgarnichtso.net</A>&gt;
</PRE>

























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030330.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
	<LI>Next message: <A HREF="030333.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30331">[ date ]</a>
              <a href="thread.html#30331">[ thread ]</a>
              <a href="subject.html#30331">[ subject ]</a>
              <a href="author.html#30331">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
