<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML-to-plaintext conversion (innerText and	Selection.toString())
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML-to-plaintext%20conversion%20%28innerText%20and%0A%09Selection.toString%28%29%29&In-Reply-To=%3CAANLkTi%3D1wu3JKXcH4GX%2BiTwJPxW%3DuM2ub8vz7BkP-2%3DW%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030177.html">
   <LINK REL="Next"  HREF="072455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML-to-plaintext conversion (innerText and	Selection.toString())</H1>
<!--htdig_noindex-->
    <B>Aryeh Gregor</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML-to-plaintext%20conversion%20%28innerText%20and%0A%09Selection.toString%28%29%29&In-Reply-To=%3CAANLkTi%3D1wu3JKXcH4GX%2BiTwJPxW%3DuM2ub8vz7BkP-2%3DW%40mail.gmail.com%3E"
       TITLE="[whatwg] HTML-to-plaintext conversion (innerText and	Selection.toString())">Simetrical+w3c at gmail.com
       </A><BR>
    <I>Wed Feb  2 13:51:51 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030177.html">[whatwg] Appcache feedback
</A></li>
        <LI>Next message: <A HREF="072455.html">[whatwg] HTML-to-plaintext conversion (innerText	and	Selection.toString())
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30179">[ date ]</a>
              <a href="thread.html#30179">[ thread ]</a>
              <a href="subject.html#30179">[ subject ]</a>
              <a href="author.html#30179">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Currently I'm writing a specification for converting part of a DOM to
plaintext, with the eventual goal of precisely specifying innerText
and Selection.toString().  (Currently it's written only for innerText,
but adapting it to Selection is a detail.)  I'd appreciate feedback on
what I've got so far, particularly from Mozilla and WebKit people who
know about their respective implementations of this.  (I've CC'd two
Mozillans that roc recommended.)

Spec: <A HREF="http://aryeh.name/spec/innertext/innertext.html">http://aryeh.name/spec/innertext/innertext.html</A>
Tests: <A HREF="http://aryeh.name/spec/innertext/test/innerText.html">http://aryeh.name/spec/innertext/test/innerText.html</A>
Latest committed version:
<A HREF="http://aryeh.name/gitweb.cgi?p=innertext;a=tree">http://aryeh.name/gitweb.cgi?p=innertext;a=tree</A> (the live versions
might break sometimes as I change them)

The tests aren't really meant to be the sort of things you'd find in a
test suite, it's just a way to inspect how browsers behave.  I've
written the algorithm to match browser behavior where possible,
particularly Gecko, WebKit, and IE8 (IE9 and Opera have fairly insane
implementations of innerText).  In addition to general feedback, I'd
particularly like input on these:

* It seems like WebKit works mostly based on CSS, while Gecko more
often bases behavior on the element.  E.g., WebKit treats &lt;div
style=white-space:pre&gt; much like &lt;pre&gt;, while Gecko treats it like
&lt;div&gt;.  I've based the spec entirely on CSS, with no reference to
specific HTML elements, because this matches what the user sees.  A
CSS dependency is unavoidable anyway because of things like display:
none, so I see no reason to minimize it.

* Currently the algorithm ignores generated content, matching all
browsers.  I think it should generally include generated content,
because that's what's visible to the user.  Would implementers be
willing to do this?  (If generated content is included, I won't need
to special-case &lt;br&gt;, given the HTML5 default stylesheet.)

* Are there any important special cases in how browsers behave that my
tests omit?  I haven't tested all the display types yet, for example.

Keep in mind that the spec is probably not close to finished, and it
could be rewritten from scratch if necessary.
</PRE>













































































































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030177.html">[whatwg] Appcache feedback
</A></li>
	<LI>Next message: <A HREF="072455.html">[whatwg] HTML-to-plaintext conversion (innerText	and	Selection.toString())
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30179">[ date ]</a>
              <a href="thread.html#30179">[ thread ]</a>
              <a href="subject.html#30179">[ subject ]</a>
              <a href="author.html#30179">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
