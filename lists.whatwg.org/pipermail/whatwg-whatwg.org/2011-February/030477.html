<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for IsSearchProviderInstalled / AddSearchProvider
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20IsSearchProviderInstalled%20/%20AddSearchProvider&In-Reply-To=%3CAANLkTimajEu0YN95kUqKkPuozFWKkTr5KUUW052yO9dj%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030443.html">
   <LINK REL="Next"  HREF="072781.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for IsSearchProviderInstalled / AddSearchProvider</H1>
<!--htdig_noindex-->
    <B>David Levin</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20IsSearchProviderInstalled%20/%20AddSearchProvider&In-Reply-To=%3CAANLkTimajEu0YN95kUqKkPuozFWKkTr5KUUW052yO9dj%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal for IsSearchProviderInstalled / AddSearchProvider">levin at chromium.org
       </A><BR>
    <I>Mon Feb 14 13:34:27 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030443.html">[whatwg] Remove maxWidth from fillText and strokeText
</A></li>
        <LI>Next message: <A HREF="072781.html">[whatwg] Proposal for IsSearchProviderInstalled /	AddSearchProvider
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30477">[ date ]</a>
              <a href="thread.html#30477">[ thread ]</a>
              <a href="subject.html#30477">[ subject ]</a>
              <a href="author.html#30477">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Problem
Although the default search provider may have a significant impact on a
user&#8217;s web experience, it isn&#8217;t easy for users to set this.

Ideally, a search engine should be able to offer the user the ability to
easily use it as the default. Currently, there are two obstacles to this:
1. The search engine may not be able to detect that it already is the
default, so it would offer this too broadly.
2. When a user decides to use it, they have to follow a set of complex
instructions (<A HREF="http://www.google.com/search?q=switch+default+search+engines">http://www.google.com/search?q=switch+default+search+engines</A>)

Proposal
Add two apis to window.external:
  IsSearchProviderInstalled
  AddSearchProvider

IsSearchProviderInstalled(string url) returns
  * 2 if the origin in the given url is the default search provider
  * 1 if the origin in the given url is a search provider but not the
default.
  * 0 otherwise
If the given url doesn&#8217;t have the same security origin as the page, this api
throws an access denied exception. (This makes the url redundant but it is
kept to be consistent with the method exposed by IE 7.)

AddSearchProvider(string openSearchUrl, [optional] bool asDefault) retrieves
the open search document from openSearchUrl and decides in a UA specific
manner whether to prompt the user about the change or addition.

FAQ
Doesn&#8217;t this already exist?
Both of these api&#8217;s are present in IE7 (and later) except for the additional
argument to AddSearchProvider (asDefault) and a change in the url's that may
be queried. The pair of apis aren&#8217;t in a standard or many of the other
browsers.

Won&#8217;t the InstallSearchProvider api get abused?
The home page setting for users has a similar value. Yet, the SetHomePage
api available in IE does not seem to be abused significantly. Largely this
will depend on the UA providing appropriate measures to protect users. In
Chromium, we rely on a combination of user gesture (click, etc.) plus a
dialog which clearly explains what is going to happen with the default being
that nothing is changed (
<A HREF="https://sites.google.com/a/chromium.org/dev/developers/design-documents/chromium-search-provider-js-support">https://sites.google.com/a/chromium.org/dev/developers/design-documents/chromium-search-provider-js-support</A>
).

Thanks,
dave
</PRE>










































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030443.html">[whatwg] Remove maxWidth from fillText and strokeText
</A></li>
	<LI>Next message: <A HREF="072781.html">[whatwg] Proposal for IsSearchProviderInstalled /	AddSearchProvider
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30477">[ date ]</a>
              <a href="thread.html#30477">[ thread ]</a>
              <a href="subject.html#30477">[ subject ]</a>
              <a href="author.html#30477">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
