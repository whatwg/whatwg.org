<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Cryptographically strong random numbers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Cryptographically%20strong%20random%20numbers&In-Reply-To=%3CAANLkTimhGBENWLaO%3DEG%2B0frwvJEeUqNA9e4az8DGGAZz%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072822.html">
   <LINK REL="Next"  HREF="072824.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Cryptographically strong random numbers</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Cryptographically%20strong%20random%20numbers&In-Reply-To=%3CAANLkTimhGBENWLaO%3DEG%2B0frwvJEeUqNA9e4az8DGGAZz%40mail.gmail.com%3E"
       TITLE="[whatwg] Cryptographically strong random numbers">w3c at adambarth.com
       </A><BR>
    <I>Wed Feb 16 17:14:05 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="072822.html">[whatwg] Cryptographically strong random numbers
</A></li>
        <LI>Next message: <A HREF="072824.html">[whatwg] Cryptographically strong random numbers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72823">[ date ]</a>
              <a href="thread.html#72823">[ thread ]</a>
              <a href="subject.html#72823">[ subject ]</a>
              <a href="author.html#72823">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Also note that that bug is accumulating use cases that might be worth
considering in this effort.  As an example, many banks in various
parts of Asia require the use of ActiveX controls in IE.  One could
hope that the web platform could provide those sorts of facilities
natively.

Adam


On Wed, Feb 16, 2011 at 5:00 PM, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:
&gt;<i> BTW, there seems to be significant interest around this subject here:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://code.google.com/p/chromium/issues/detail?id=73226">http://code.google.com/p/chromium/issues/detail?id=73226</A>
</I>&gt;<i>
</I>&gt;<i> w.r.t. the below, binary data types seem important for getting
</I>&gt;<i> randomness right. &#160;In particular, using strings is bad news bears. &#160;We
</I>&gt;<i> have binary data types available in browsers. &#160;It would be a shame to
</I>&gt;<i> ignore them.
</I>&gt;<i>
</I>&gt;<i> Adam
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Feb 16, 2011 at 4:29 PM, Allen Wirfs-Brock
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">allen at wirfs-brock.com</A>&gt; wrote:
</I>&gt;&gt;<i> So, let's get back to the design of an actual ECMAScript API.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'll repeat a couple of initial points:
</I>&gt;&gt;<i> We are now talking about a pure JavaScript API, not a DOM API so it should follow JavaScript conventions.
</I>&gt;&gt;<i> If we want this to appear in browsers in the very near future we should minimize any dependencies upon other Harmony features &#160;that are not both totally finalized and trivial to implement (the empty set??)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The first point would seem to eliminate DOM-like conventions such as pseudo by-ref/in-our parameters, multiple numeric data types, or dependency upon any host object (DOM) array like objects.
</I>&gt;&gt;<i> The second would seem to preclude the use of the proposed Harmony binary typed arrays.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In general, I don't see any particular reason why an ECMAScript array would be unsuitable to collecting a sequence of random numeric values. It's what people do today when they need to manipulate sequences of numbers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If we are using array's, the simplest API is probably a new function on the array construct that is a factory for Arrays fill with random numeric values:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;Array.randomFill= function (length){...};
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This would create a new array of the specified length where each element is a random value in some range. &#160;I propose that this range be 0..65535 as these are easily manipulatable (and optimizable) values &#160;that are likely to have some degree of optimization in all implementations. &#160;I don't really see why other element ranges need to be supported as they are easily constructed these values. &#160;However, if strong use cases (endianness??) can be made for the utility of natively supporting multiple element ranges then we could either add more functions:
</I>&gt;&gt;<i> &#160;Array.randomFill8(length)
</I>&gt;&gt;<i> &#160;Array.randomFill24(length)
</I>&gt;&gt;<i> &#160;Array.randomFill32(length)
</I>&gt;&gt;<i> or accept an optimal second parameter that specifies the desired bit width:
</I>&gt;&gt;<i> &#160;Array.randomFill(length, bitWidth &#160;/*1 .. (32?, 48?, 53?) */)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I would recommend keeping it simple and avoiding such non-essential tweaks.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There was some (it didn't seem very serious) concerns about the cost of array allocation for such calls. &#160;I would point out &#160;that creating a new array is already the technique used in ECMAScript for most somewhat comparable situations such as the results of RegExp matches, the set of items deleted by slice, etc. Others might invoke words about the desirability of a functional style...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If the array allocation was really a concern, then the randomFill function should be a method on Array.prototyoe:
</I>&gt;&gt;<i> &#160;Array.prototype.randomFill= function () {...}; &#160; /* return the this value */
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> it might be used like:
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;var rand = new Array(8).randomFill(); &#160;//create an array of 8 random 16-bit numbers
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The length parameter is unnecessary because the length is implicit in the array (and if this is about perf. you probably don't want to be dynamically changing the length of already allocated arrays).
</I>&gt;&gt;<i> The same discussion of element size alternatives also applies.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Of course we could do both. &#160;But really, if we want this to show up very soon in browsers keeping it to a single function or methods with minimal options is likely to yield the best results.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Finally, as a dark horse we could consider using Strings rather than Arrays as JavaScript strings are sequences of 16-bit values and the individual element values are directly accessible.
</I>&gt;&gt;<i> String.randomFill(length) &#160;//returns a string value containing length random 16-bit character values.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Individual values would be accessed as:
</I>&gt;&gt;<i> &#160; var rs=String.randomFill(2);
</I>&gt;&gt;<i> &#160; var random32=(rs.charCodeAt(0)&lt;&lt;16)|rs.charCodeAt(1);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But really, Arrays seem like they should work just fine.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Allen
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072822.html">[whatwg] Cryptographically strong random numbers
</A></li>
	<LI>Next message: <A HREF="072824.html">[whatwg] Cryptographically strong random numbers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72823">[ date ]</a>
              <a href="thread.html#72823">[ thread ]</a>
              <a href="subject.html#72823">[ subject ]</a>
              <a href="author.html#72823">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
