<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for separating script downloads and execution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3CB66541E954ECF146AD8CA69D34A283FF282228A979%40SP2-EX07VS02.ds.corp.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030305.html">
   <LINK REL="Next"  HREF="030321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for separating script downloads and execution</H1>
<!--htdig_noindex-->
    <B>Nicholas Zakas</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3CB66541E954ECF146AD8CA69D34A283FF282228A979%40SP2-EX07VS02.ds.corp.yahoo.com%3E"
       TITLE="[whatwg] Proposal for separating script downloads and execution">nzakas at yahoo-inc.com
       </A><BR>
    <I>Tue Feb  8 12:32:50 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030305.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
        <LI>Next message: <A HREF="030321.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30310">[ date ]</a>
              <a href="thread.html#30310">[ thread ]</a>
              <a href="subject.html#30310">[ subject ]</a>
              <a href="author.html#30310">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Web Workers don't adequately solve this problem because:

1) There is no DOM. If the script being loaded and execute requires interaction with the DOM, it will just error out.

2) Assuming that #1 doesn't get in your way because you're not interacting with the DOM, you still have the potential for a double-download if caching headers are not set correctly.

#2 is a common problem with existing solutions as well, and one that I wanted to address with my proposal.

-N

-----Original Message-----
From: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A> [mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A>] On Behalf Of John Tamplin
Sent: Tuesday, February 08, 2011 11:57 AM
To: Anne van Kesteren
Cc: Steve Souders; Jonas Sicking; <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at whatwg.org</A>; Henri Sivonen; Nicholas Zakas; Tony Gentilcore
Subject: Re: [whatwg] Proposal for separating script downloads and execution

On Tue, Feb 8, 2011 at 11:35 AM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt; wrote:

&gt;<i> They have a way to download and execute scripts. So if the UI thread has a
</I>&gt;<i> minimal script that takes care of creation of workers and creates a tunnel
</I>&gt;<i> for DOM modifications you could theoretically be all set. (I have not
</I>&gt;<i> followed this entire thread though, so apologies if I missed something.)
</I>&gt;<i>
</I>
Is every developer having to write their own proxy to do DOM manipulations
on behalf of a Web Worker really the model you want to push here?  I know
everything looks like a nail when what you have is a hammer, but surely we
can do better than that.  I suspect the hack of downloading a commented
script and then evaluating it when needed is both easier to implement and
faster overall than such a solution, especially if the commented source is
stored in app cache.

Note that in the blog they mention that on an iPhone 2.2 parse time was 2.6
seconds for 200k of JS, compared to 240ms to just download it in a comment
-- the mobile network isn't the issue, it is the JS parser in mobile
browsers.

-- 
John A. Tamplin
Software Engineer (GWT), Google
</PRE>





<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030305.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
	<LI>Next message: <A HREF="030321.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30310">[ date ]</a>
              <a href="thread.html#30310">[ thread ]</a>
              <a href="subject.html#30310">[ subject ]</a>
              <a href="author.html#30310">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
