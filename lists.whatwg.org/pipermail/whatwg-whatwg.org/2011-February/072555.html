<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Thoughts on recent WhatWG blog post
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Thoughts%20on%20recent%20WhatWG%20blog%20post&In-Reply-To=%3CAANLkTimMmsYkHkWjkojXu-Y%3D40i2i%2Bw9AzfzVyKzhyRD%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030279.html">
   <LINK REL="Next"  HREF="072558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Thoughts on recent WhatWG blog post</H1>
<!--htdig_noindex-->
    <B>Aryeh Gregor</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Thoughts%20on%20recent%20WhatWG%20blog%20post&In-Reply-To=%3CAANLkTimMmsYkHkWjkojXu-Y%3D40i2i%2Bw9AzfzVyKzhyRD%40mail.gmail.com%3E"
       TITLE="[whatwg] Thoughts on recent WhatWG blog post">Simetrical+w3c at gmail.com
       </A><BR>
    <I>Mon Feb  7 12:03:55 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030279.html">[whatwg] Thoughts on recent WhatWG blog post
</A></li>
        <LI>Next message: <A HREF="072558.html">[whatwg] Thoughts on recent WhatWG blog post
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72555">[ date ]</a>
              <a href="thread.html#72555">[ thread ]</a>
              <a href="subject.html#72555">[ subject ]</a>
              <a href="author.html#72555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Feb 7, 2011 at 12:33 PM, Adam van den Hoven &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">adam at littlefyr.com</A>&gt; wrote:
&gt;<i> In reality all these belong to javascript, but modifying JS to include them
</I>&gt;<i> is not feasible. Also, what if I don't want to do crypto in my code, why
</I>&gt;<i> should I have all that lying around (not that its a hardship but why pollute
</I>&gt;<i> the global namespace)?
</I>
Generally we try not to create new objects in the global namespace.
Instead, we try sticking them on other preexisting global objects in
most cases.

&gt;<i> I think that we would all be better served if we were to introduce something
</I>&gt;<i> like CommonJS to the browser, or perhaps a modified version of the require()
</I>&gt;<i> method. This would allow us to move the crytpo and the atob/btoa into
</I>&gt;<i> specific modules which could be loaded using:
</I>&gt;<i>
</I>&gt;<i> &lt;script&gt;
</I>&gt;<i> var my_crypto = window.require( 'html:crypto' ); //or however you wanted to
</I>&gt;<i> identify the 'crypto library defined by html'
</I>&gt;<i> var my_util = window.require( 'html:util' ); // my_util.atob();
</I>&gt;<i> var $ = window.require( '
</I>&gt;<i> <A HREF="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js">https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js</A>' );
</I>&gt;<i> &lt;/script&gt;
</I>&gt;<i>
</I>&gt;<i> and so on.
</I>
What problem does this solve?  The problem of global namespace
pollution?  Why not just define window.html (or some other single
name) and make all the functions methods of that object?  This is kind
of what we're doing already, although not so systematically.  Your
solution seems overly complicated.

&gt;<i> Further, in CommonJS, the library has to export an object in order to make
</I>&gt;<i> it available. If we could define things in such a way that the browser
</I>&gt;<i> compiled the library independent of the page that loads it, the browser
</I>&gt;<i> could cache the *compiled* code and provide that to the browser page. It
</I>&gt;<i> would also be necessary to either enforce that these cached libraries be
</I>&gt;<i> immutable or that a copy of the compiled code be made available. I couldn't
</I>&gt;<i> implement this so I'm not sure how feasible this is but I suspect that
</I>&gt;<i> requiring immutability would be the easier to implement.
</I>
What problem does this solve?  How is it better than inserting a
&lt;script&gt; element, when the returned resource has suitable caching
headers?

&gt;<i> This would have two interesting effects. 'widgets' loaded this way could
</I>&gt;<i> easily be taken from different libraries, this jquery accordion that
</I>&gt;<i> mootools tree view. No having access means that it would have to require it
</I>&gt;<i> itself, and the normal scoping would keep that version internal to itself.
</I>
How is this different from importing any well-behaved library?

&gt;<i> Second, this could reduce security risks, if the widget requires a library
</I>&gt;<i> using some authoritative URL (say from Google's CDN), then some blackhatter
</I>&gt;<i> who injects JS onto a page by what ever means could not modify the meaning
</I>&gt;<i> of, say, jQuery.ajax to do something else. They would have to compromise the
</I>&gt;<i> the source code itself which is a significantly more difficult thing to do.
</I>
What attacks does this prevent?  If an attacker can already inject JS,
can't they pretty much do whatever they want?

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030279.html">[whatwg] Thoughts on recent WhatWG blog post
</A></li>
	<LI>Next message: <A HREF="072558.html">[whatwg] Thoughts on recent WhatWG blog post
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72555">[ date ]</a>
              <a href="thread.html#72555">[ thread ]</a>
              <a href="subject.html#72555">[ subject ]</a>
              <a href="author.html#72555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
