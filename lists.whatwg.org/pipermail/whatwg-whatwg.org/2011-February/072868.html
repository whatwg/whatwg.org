<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Websockets Client API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Websockets%20Client%20API&In-Reply-To=%3CAANLkTikzmJy5CAzqauCuAyTkUdUfQCmh-9V4nNB%3DXDVU%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030594.html">
   <LINK REL="Next"  HREF="072869.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Websockets Client API</H1>
<!--htdig_noindex-->
    <B>Toni Ruottu</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Websockets%20Client%20API&In-Reply-To=%3CAANLkTikzmJy5CAzqauCuAyTkUdUfQCmh-9V4nNB%3DXDVU%40mail.gmail.com%3E"
       TITLE="[whatwg] Websockets Client API">toni.ruottu at iki.fi
       </A><BR>
    <I>Sun Feb 20 14:38:14 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030594.html">[whatwg] Websockets Client API
</A></li>
        <LI>Next message: <A HREF="072869.html">[whatwg] Websockets Client API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72868">[ date ]</a>
              <a href="thread.html#72868">[ thread ]</a>
              <a href="subject.html#72868">[ subject ]</a>
              <a href="author.html#72868">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I believed that the browser is expected to somehow magically delay the
events until a callback has been registered. At least that is how it
seems to work at the moment. The specification could be clearer about
this.

While IETF and W3C are involved in standardizing the protocol, the
part you are dealing with falls in between of the two specifications.
I think IETF does not usually specify APIs for the protocols, and W3C
specifies browser APIs for untrusted javascript code.

You are expected to look at the IETF spec and design an API that suits
the environment you are programming for. You may want to look at the
W3C specification, as some users may have used that API before they
start using your library. However the W3C specification only reveals
certain subset of the features that the IETF protocol defines. The
rationale behind this is that the browser may be running untrusted
code that needs to be restricted for security reasons.

  --Toni

On Mon, Feb 21, 2011 at 12:09 AM, Bruce Atherton &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruce at callenish.com</A>&gt; wrote:
&gt;<i> I know that the IETF HyBi WG is defining the Websockets protocol, but I
</I>&gt;<i> believe that the definition of the browser API is still done through HTML5.
</I>&gt;<i> If I am wrong, please let me know.
</I>&gt;<i>
</I>&gt;<i> I've been reading through <A HREF="http://dev.w3.org/html5/websockets/">http://dev.w3.org/html5/websockets/</A> in an effort
</I>&gt;<i> to define a similar client interface for my Websockets library. I am a bit
</I>&gt;<i> stuck on how a connection is established, though.
</I>&gt;<i>
</I>&gt;<i> According to the spec, establishing a connection is done through the
</I>&gt;<i> Websocket object constructor &#160;on a background thread. This results in the
</I>&gt;<i> possibility that a connection could fire its open, error, and/or close
</I>&gt;<i> events before the user can set a handler for these events. For the open and
</I>&gt;<i> close events one could recover based on the ReadyState of the object, albeit
</I>&gt;<i> with additional complexity for every newly opened Websocket connection, but
</I>&gt;<i> any error events would be lost forever.
</I>&gt;<i>
</I>&gt;<i> Is there a reason not to have a separate open() call? This could be done in
</I>&gt;<i> the same asynchronous manner as described in Step 7 of the Websocket
</I>&gt;<i> constructor. The only difference would be that the user gets the opportunity
</I>&gt;<i> to fully configure the Websocket object before it is used to establish a
</I>&gt;<i> connection.
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030594.html">[whatwg] Websockets Client API
</A></li>
	<LI>Next message: <A HREF="072869.html">[whatwg] Websockets Client API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72868">[ date ]</a>
              <a href="thread.html#72868">[ thread ]</a>
              <a href="subject.html#72868">[ subject ]</a>
              <a href="author.html#72868">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
