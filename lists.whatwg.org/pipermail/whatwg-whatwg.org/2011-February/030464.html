<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for separating script downloads and execution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3CB66541E954ECF146AD8CA69D34A283FF282228B049%40SP2-EX07VS02.ds.corp.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030453.html">
   <LINK REL="Next"  HREF="030465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for separating script downloads and execution</H1>
<!--htdig_noindex-->
    <B>Nicholas Zakas</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3CB66541E954ECF146AD8CA69D34A283FF282228B049%40SP2-EX07VS02.ds.corp.yahoo.com%3E"
       TITLE="[whatwg] Proposal for separating script downloads and execution">nzakas at yahoo-inc.com
       </A><BR>
    <I>Mon Feb 14 07:28:10 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030453.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
        <LI>Next message: <A HREF="030465.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30464">[ date ]</a>
              <a href="thread.html#30464">[ thread ]</a>
              <a href="subject.html#30464">[ subject ]</a>
              <a href="author.html#30464">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Earlier feedback on this list was that people didn't want to define readyState or onreadystatechange for script elements, which is why I changed my proposal the way that I did. Unless people's opinions have changed on that, I'm not sure why we're still talking about a readyState-based approach (and if it has changed, why not talk about my original proposal as well?). I also removed execute() for the same reason, the general feedback seemed to be that it introduced complexity even though I thought it was a bit more explicit.

You may be correct in that people may never want to set preload to false. You'll note that I put in my proposal that an alternate approach would be for preload to be set to true by default. This would allow even easier feature detection:

if (script.preload){
    //do the preload way
}

So if browsers want that to be the default, this would act as a flag indicating that the new functionality is available.

I think changing the behavior of dynamic script elements to match IE's isn't a bad idea, but we need at least two additional things:

1) A definitive way to determine that this behavior is present (earlier in this thread, people seemed to agree that an explicit feature detect was important)
2) An event that allows us to know when the script is downloaded and ready for execution

In any case, I don't believe readyState/onreadystatechange fulfills both of those.


-N

________________________________
From: Glenn Maynard [mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">glenn at zewt.org</A>]
Sent: Monday, February 14, 2011 1:37 AM
To: Kyle Simpson
Cc: Nicholas Zakas; <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at lists.whatwg.org</A>; Nicholas C. Zakas; Will Alexander; Steve Souders
Subject: Re: [whatwg] Proposal for separating script downloads and execution

On Sun, Feb 13, 2011 at 11:09 PM, Kyle Simpson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">getify at gmail.com</A>&lt;mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">getify at gmail.com</A>&gt;&gt; wrote:
You seem to suggest this is a bad thing. I actually think it's a good thing that we're keeping script execution as much as possible in the existing architecture. There's lots of different reasons why the queues and behavior are set up the way they are, and I can say that I never intended this new &quot;add a script to DOM to execute&quot; suggestion was meant to imply some entirely different &quot;the browser must execute this now or else&quot; kind of model. That's a much more complicated road to go down, and one which I think we'll likely derail either of the two main proposals.

I was responding to Nicholas's change, since based on his example code I'm pretty sure he expected it to be synchronous.
Basically, the suggestion is that `preload` is how a web author can force the browser from its hinted &quot;you may preload&quot; to &quot;you must preload&quot;. I think this has the potential for confusion. It's like saying &quot;If I set a script element to `async`, it will definitely be asynchronous, but if I don't set it to `async`, then it may or may not be asynchronous, I'm just not sure.&quot; The same confusion would be true of &quot;defer&quot;, &quot;disabled&quot;, and a whole host of other attributes/properties on HTML elements that come to mind.

I don't think it's confusing, but I also don't know why anyone would want to set preload to false.

Between the readyState proposal and the current preload proposal (with no execute method), I prefer readyState.  The execute method was the critical difference between the two proposals; removing it essentially changed his proposal into a minor variation of yours.

--
Glenn Maynard
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030453.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
	<LI>Next message: <A HREF="030465.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30464">[ date ]</a>
              <a href="thread.html#30464">[ thread ]</a>
              <a href="subject.html#30464">[ subject ]</a>
              <a href="author.html#30464">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
