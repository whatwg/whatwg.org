<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for separating script downloads and execution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3CB66541E954ECF146AD8CA69D34A283FF282228A712%40SP2-EX07VS02.ds.corp.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072487.html">
   <LINK REL="Next"  HREF="072477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for separating script downloads and execution</H1>
<!--htdig_noindex-->
    <B>Nicholas Zakas</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3CB66541E954ECF146AD8CA69D34A283FF282228A712%40SP2-EX07VS02.ds.corp.yahoo.com%3E"
       TITLE="[whatwg] Proposal for separating script downloads and execution">nzakas at yahoo-inc.com
       </A><BR>
    <I>Mon Feb  7 11:40:50 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="072487.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
        <LI>Next message: <A HREF="072477.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72554">[ date ]</a>
              <a href="thread.html#72554">[ thread ]</a>
              <a href="subject.html#72554">[ subject ]</a>
              <a href="author.html#72554">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Knowing whether or not a script will run synchronously is key to the user experience. As soon as the script starts to run, the UI is frozen, so being able to determine when that script will run is incredibly important. 

In any event, it seems like no one disagrees that the end goal would be useful. How can we continue with a productive conversation to get to a resolution?

-N



-----Original Message-----
From: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A> [mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A>] On Behalf Of Will Alexander
Sent: Thursday, February 03, 2011 11:58 PM
To: Jonas Sicking
Cc: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at lists.whatwg.org</A>; Kyle Simpson
Subject: Re: [whatwg] Proposal for separating script downloads and execution

&gt;&gt;<i> Doesn't &lt;link rel=prefetch&gt; mostly address the use-case of
</I>&gt;&gt;<i> load-but-don't-execute in markup? The reason script-inserted script elements
</I>&gt;&gt;<i> need this capability is more advanced than any use-case for why you'd do so
</I>&gt;&gt;<i> in markup. In other words, I can't imagine that a script loader would rely
</I>&gt;&gt;<i> on adding script tags through markup (like with document.write() I guess?)
</I>&gt;&gt;<i> rather than just using dynamic script elements.
</I>&gt;&gt;<i> Technically, the &quot;preloading&quot; event mechanism isn't strictly
</I>&gt;&gt;<i> necessary, but it's quite useful for several things you can't do without it,
</I>&gt;&gt;<i> and so I really don't think it's worth adjusting the spec without also
</I>&gt;&gt;<i> adding that part in.
</I>&gt;<i>
</I>&gt;<i> I'm not quite sure I follow you here.
</I>
I would humbly submit that being able to query the status of a script,
while useful, is not necessary.
Fetching the src immediately upon assignment is entirely sufficient.
The readyState, while nice to have,
is not germane to the goals of this proposal. When would the executor
need to know ahead of
time that the script will run synchronously?


&gt;<i> What I was thinking was that we
</I>&gt;<i> say that implementations MUST (in the rfc 2119 sense) start loading
</I>&gt;<i> the script immediately.
</I>&gt;<i>
</I>
The proposal's stated reason for not making this mandatory seems
sensible.  While there may be a high degree
of probability, there is no guarantee the script will actually be
used.   It would seem to me that it makes more sense to leave this
decision up to the browser, allowing it to adapt its pre-fetching
behavior (perhaps based on available bandwidth) if it chooses.
Perhaps SHOULD conveys a more appropriate level of requirement?

&gt;<i>
</I>&gt;<i> Sure, but we'd also want to fire some event once the script has been
</I>&gt;<i> fully downloaded so that the page doesn't have to use a timer and poll
</I>&gt;<i> to figure out when the download is done.
</I>
IE will set the readyState property to &quot;loading&quot; but only when the
script has a document ancestor,
otherwise the value is &quot;uninitialized&quot;   If the value were always set
to &quot;loading&quot; to indicate pre-fetching is being
performed would that provide an appropriate level of feature
detection?  (IE currently will set the readyState to &quot;loaded&quot; once
the download has finished in either case)

Will

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072487.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
	<LI>Next message: <A HREF="072477.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72554">[ date ]</a>
              <a href="thread.html#72554">[ thread ]</a>
              <a href="subject.html#72554">[ subject ]</a>
              <a href="author.html#72554">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
