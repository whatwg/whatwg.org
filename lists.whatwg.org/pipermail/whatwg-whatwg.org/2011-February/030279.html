<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Thoughts on recent WhatWG blog post
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Thoughts%20on%20recent%20WhatWG%20blog%20post&In-Reply-To=%3CAANLkTikxUUh1XQ7u%3D-4f7w-pG0Jf4%2B2M%3DB3P%3D7uHgkN%2B%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030252.html">
   <LINK REL="Next"  HREF="072555.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Thoughts on recent WhatWG blog post</H1>
<!--htdig_noindex-->
    <B>Adam van den Hoven</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Thoughts%20on%20recent%20WhatWG%20blog%20post&In-Reply-To=%3CAANLkTikxUUh1XQ7u%3D-4f7w-pG0Jf4%2B2M%3DB3P%3D7uHgkN%2B%40mail.gmail.com%3E"
       TITLE="[whatwg] Thoughts on recent WhatWG blog post">adam at littlefyr.com
       </A><BR>
    <I>Mon Feb  7 09:33:50 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030252.html">[whatwg] [html5] r5835 - [giow] (1) Make workers get the online and offline events also.
</A></li>
        <LI>Next message: <A HREF="072555.html">[whatwg] Thoughts on recent WhatWG blog post
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30279">[ date ]</a>
              <a href="thread.html#30279">[ thread ]</a>
              <a href="subject.html#30279">[ subject ]</a>
              <a href="author.html#30279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hey guys,

I was reading the blog today and something I read (
<A HREF="http://blog.whatwg.org/whatwg-extensibility">http://blog.whatwg.org/whatwg-extensibility</A>) prompted me to signup to the
list and get involved again. What follows is not exactly well thought out
but I'm hoping that it will spark something.

window.atob() and window.btoa() feel wrong, so does
window.crypto.getRandomUint8Array(length), not because they're not useful
but because there is no answer to 'what does converting binary data to a
base 64 string have to do with window?' beyond 'nothing but where else would
it go?'.

In reality all these belong to javascript, but modifying JS to include them
is not feasible. Also, what if I don't want to do crypto in my code, why
should I have all that lying around (not that its a hardship but why pollute
the global namespace)?

I think that we would all be better served if we were to introduce something
like CommonJS to the browser, or perhaps a modified version of the require()
method. This would allow us to move the crytpo and the atob/btoa into
specific modules which could be loaded using:

&lt;script&gt;
var my_crypto = window.require( 'html:crypto' ); //or however you wanted to
identify the 'crypto library defined by html'
var my_util = window.require( 'html:util' ); // my_util.atob();
var $ = window.require( '
<A HREF="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js">https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js</A>' );
&lt;/script&gt;

and so on.

Further, in CommonJS, the library has to export an object in order to make
it available. If we could define things in such a way that the browser
compiled the library independent of the page that loads it, the browser
could cache the *compiled* code and provide that to the browser page. It
would also be necessary to either enforce that these cached libraries be
immutable or that a copy of the compiled code be made available. I couldn't
implement this so I'm not sure how feasible this is but I suspect that
requiring immutability would be the easier to implement.

This would have two interesting effects. 'widgets' loaded this way could
easily be taken from different libraries, this jquery accordion that
mootools tree view. No having access means that it would have to require it
itself, and the normal scoping would keep that version internal to itself.
Second, this could reduce security risks, if the widget requires a library
using some authoritative URL (say from Google's CDN), then some blackhatter
who injects JS onto a page by what ever means could not modify the meaning
of, say, jQuery.ajax to do something else. They would have to compromise the
the source code itself which is a significantly more difficult thing to do.

That is the extent of my conscious thought on the subject. I'm sure someone
has a better idea than I in this regard but I thought I'd throw it out
there.

Adam van den Hoven
</PRE>


























































































































































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030252.html">[whatwg] [html5] r5835 - [giow] (1) Make workers get the online and offline events also.
</A></li>
	<LI>Next message: <A HREF="072555.html">[whatwg] Thoughts on recent WhatWG blog post
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30279">[ date ]</a>
              <a href="thread.html#30279">[ thread ]</a>
              <a href="subject.html#30279">[ subject ]</a>
              <a href="author.html#30279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
