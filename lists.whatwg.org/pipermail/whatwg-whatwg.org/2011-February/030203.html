<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for separating script downloads and execution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3CAANLkTi%3DVyY7F6Bsxgm9ngbrcsC0Y4%3DHjYr0H2B__0JUh%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030168.html">
   <LINK REL="Next"  HREF="030206.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for separating script downloads and execution</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3CAANLkTi%3DVyY7F6Bsxgm9ngbrcsC0Y4%3DHjYr0H2B__0JUh%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal for separating script downloads and execution">jonas at sicking.cc
       </A><BR>
    <I>Thu Feb  3 13:52:27 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030168.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
        <LI>Next message: <A HREF="030206.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30203">[ date ]</a>
              <a href="thread.html#30203">[ thread ]</a>
              <a href="subject.html#30203">[ subject ]</a>
              <a href="author.html#30203">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Feb 1, 2011 at 11:06 AM, Kyle Simpson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">getify at gmail.com</A>&gt; wrote:
&gt;<i> ?&gt; The major issue I have with the way the spec is written is that there is
</I>&gt;<i> no way to feature detect this capability. I'd like this behavior (which I
</I>&gt;<i> agree, is useful), to be more explicit so we can easily make use where
</I>&gt;<i> available.
</I>&gt;<i>
</I>&gt;<i> I agree, the spec doesn't make it clear in its current wording how this
</I>&gt;<i> could be feature-tested. And (as you know, Nicholas), I'm a firm believer
</I>&gt;<i> that any new functionality *must* be feature-testable rather than
</I>&gt;<i> browser-inferences or UA sniffing. :)
</I>&gt;<i>
</I>&gt;<i> However, the current IE implementation (with the additional `readyState`
</I>&gt;<i> property) does actually provide a feasible feature-test (in fact, I'm
</I>&gt;<i> working on a new revision of LABjs to take advantage of this functionality
</I>&gt;<i> for IE).
</I>&gt;<i>
</I>&gt;<i> The feature-test for IE essentially looks for the presence of the
</I>&gt;<i> `readyState` property on a newly created script element, and then also
</I>&gt;<i> inspects its value, because in IE it always defaults to &quot;uninitialized&quot; as
</I>&gt;<i> its value. The reason for having to also test the value is because Opera has
</I>&gt;<i> had a present-but-non-functional `readyState` property on their script
</I>&gt;<i> elements since like 9.2, with a default value of &quot;loaded&quot;.
</I>&gt;<i>
</I>&gt;<i> If the spec considers adding an event system to this mechanism similar to or
</I>&gt;<i> compatible with IE's existing mechanism, I think this could be a valid
</I>&gt;<i> approach to feature-testing, assuming the browsers all agree to play nicely.
</I>&gt;<i> :)
</I>
One reason I like the noexecute proposal more than relying on
readyState is that noexecute can be used in markup. I.e. you can do
things like:

&lt;html&gt;
&lt;head&gt;
&lt;script src=a.js noexecute onload=&quot;...&quot;&gt;
&lt;script src=b.js noexecute onload=&quot;...&quot;&gt;
&lt;script src=c.js noexecute onload=&quot;...&quot;&gt;
&lt;/head&gt;

Though of course, if people think that using readystate is enough then
we can flesh out that solution too. We'd have to require that UAs
start downloading the script as soon as .src is set, and that events
fire at reasonable points in time, like when the script has been
downloaded. I think that we couldn't use the 'load' event has that
might break existing pages which rely on 'load' not firing until the
script has executed. (This isn't a problem with the noexecute proposal
since that is opt-in).

/ Jonas
</PRE>























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030168.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
	<LI>Next message: <A HREF="030206.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30203">[ date ]</a>
              <a href="thread.html#30203">[ thread ]</a>
              <a href="subject.html#30203">[ subject ]</a>
              <a href="author.html#30203">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
