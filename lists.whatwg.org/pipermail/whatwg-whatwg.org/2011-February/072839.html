<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for separating script downloads and execution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3C454D244BA36D4FE49B240EB6A0EEDD8F%40spartacus%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="072836.html">
   <LINK REL="Next"  HREF="072842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for separating script downloads and execution</H1>
<!--htdig_noindex-->
    <B>Kyle Simpson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3C454D244BA36D4FE49B240EB6A0EEDD8F%40spartacus%3E"
       TITLE="[whatwg] Proposal for separating script downloads and execution">getify at gmail.com
       </A><BR>
    <I>Thu Feb 17 08:39:55 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="072836.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
        <LI>Next message: <A HREF="072842.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72839">[ date ]</a>
              <a href="thread.html#72839">[ thread ]</a>
              <a href="subject.html#72839">[ subject ]</a>
              <a href="author.html#72839">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> The problem with prefetching immediately on src set is that you have no 
</I>&gt;<i> idea when or whether the node will get inserted.  So you have to keep the 
</I>&gt;<i> data alive... for how long?  From a user's point of view, that's a memory 
</I>&gt;<i> leak pure and simple, if the node never gets inserted into the DOM.
</I>
Memory leak in the sense that the page is holding onto more memory than it 
*potentially* needs to. But not memory leak in the sense that this memory 
stays around after the page unloads/reloads, right? I dunno if I'd call that 
a &quot;memory leak&quot; as much as I'd call it a &quot;higher memory utilization&quot;, or 
maybe &quot;potential memory waste&quot;.

How much memory does a 25k JavaScript file take up while sitting in this 
queue? Is it roughly 25k, or is it a lot more? Compared to the 100-300 MB of 
memory that a Firefox instance takes up on my computer, what percentage of 
that would be (or would be increased) if Firefox were also holding onto even 
a large amount (~200k) of not-yet-used JavaScript code in memory?

Also, we have to consider whether the intended usage of this feature, by 
developers, is to unnecessarily waste bandwidth and memory and never use the 
scripts, or if it's in good-faith to eventually use them. Does that mean 
there will never be any memory waste? No. But I don't think it'll be the 
norm, at least based on the interested parties in this discussion.

I'd venture to guess that right now, there's a pretty small amount of code 
out there which is creating script elements en masse but not appending them 
to the DOM. Can't imagine really what that use-case would be (sans the 
preloading we're discussing). The likelihood is that the majority of tools 
that would be doing this new technique would be doing so intentionally, with 
the clear intent to later use that script.


--Kyle 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="072836.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
	<LI>Next message: <A HREF="072842.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#72839">[ date ]</a>
              <a href="thread.html#72839">[ thread ]</a>
              <a href="subject.html#72839">[ subject ]</a>
              <a href="author.html#72839">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
