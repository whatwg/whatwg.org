<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for separating script downloads and execution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3Cm6j8l6l0akugvrfou8odu4etbaiur64va3%40hive.bjoern.hoehrmann.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030370.html">
   <LINK REL="Next"  HREF="030376.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for separating script downloads and execution</H1>
<!--htdig_noindex-->
    <B>Bjoern Hoehrmann</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20separating%20script%20downloads%20and%20execution&In-Reply-To=%3Cm6j8l6l0akugvrfou8odu4etbaiur64va3%40hive.bjoern.hoehrmann.de%3E"
       TITLE="[whatwg] Proposal for separating script downloads and execution">derhoermi at gmx.net
       </A><BR>
    <I>Thu Feb 10 14:09:22 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030370.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
        <LI>Next message: <A HREF="030376.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30375">[ date ]</a>
              <a href="thread.html#30375">[ thread ]</a>
              <a href="subject.html#30375">[ subject ]</a>
              <a href="author.html#30375">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>* Boris Zbarsky wrote:
&gt;<i>On 2/10/11 3:23 PM, Bjoern Hoehrmann wrote:
</I>&gt;&gt;<i> There are multiple phases between receiving bytes on the wire and having
</I>&gt;&gt;<i> executed the code they represent. Parsing would seem unlikely to be the
</I>&gt;&gt;<i> main problem here (parsing is mainly checking for syntax errors while or
</I>&gt;&gt;<i> after removing the character encoding from the bytes received)
</I>&gt;<i>
</I>&gt;<i>And constructing whatever output model (AST, bytecode, whatever) your 
</I>&gt;<i>parser produces.
</I>
I can grant you persisting information about the structure to some point
but generating byte code is not the job of the parser, that's what code
generators are for. It's not uncommon however to persist only minimal
information and extract structure only as needed. Perl's URI parser for
instance does that which is a sound optimization there.

&gt;<i>Based on my profiles of script loading and execution in Spidermonkey, 
</I>&gt;<i>parsing _is_ in fact pretty expensive (very commonly much more expensive 
</I>&gt;<i>than the initial execution for large scripts, since most of the script 
</I>&gt;<i>is cold).
</I>
Yes, but it's a long way from there to saying that &quot;parsing&quot; must be a-
voided because parsing is inherently slow. As it becomes more common to
load very large libraries where you don't actually use most things, or
use them only much later, it may also be that your &quot;parser&quot; simply does
too much work up-front. I have no idea, I just don't think saying we
should not look at individual factors in finding a proper optimization
is the best approach.
-- 
Bj&#246;rn H&#246;hrmann &#183; mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bjoern at hoehrmann.de</A> &#183; <A HREF="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</A>
Am Badedeich 7 &#183; Telefon: +49(0)160/4415681 &#183; <A HREF="http://www.bjoernsworld.de">http://www.bjoernsworld.de</A>
25899 Dageb&#252;ll &#183; PGP Pub. KeyID: 0xA4357E78 &#183; <A HREF="http://www.websitedev.de/">http://www.websitedev.de/</A> 
</PRE>





<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030370.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
	<LI>Next message: <A HREF="030376.html">[whatwg] Proposal for separating script downloads and execution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30375">[ date ]</a>
              <a href="thread.html#30375">[ thread ]</a>
              <a href="subject.html#30375">[ subject ]</a>
              <a href="author.html#30375">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
