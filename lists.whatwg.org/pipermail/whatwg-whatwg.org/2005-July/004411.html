<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [html5] onbeforeprint/onafterprint (was window.print()	undefined)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bhtml5%5D%20onbeforeprint/onafterprint%20%28was%20window.print%28%29%0A%09undefined%29&In-Reply-To=%3C42DE92B1.80204%40earthlink.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004410.html">
   <LINK REL="Next"  HREF="004398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [html5] onbeforeprint/onafterprint (was window.print()	undefined)</H1>
<!--htdig_noindex-->
    <B>Matthew Raymond</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bhtml5%5D%20onbeforeprint/onafterprint%20%28was%20window.print%28%29%0A%09undefined%29&In-Reply-To=%3C42DE92B1.80204%40earthlink.net%3E"
       TITLE="[whatwg] [html5] onbeforeprint/onafterprint (was window.print()	undefined)">mattraymond at earthlink.net
       </A><BR>
    <I>Wed Jul 20 11:06:41 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="004410.html">[whatwg] [html5] onbeforeprint/onafterprint (was window.print()	undefined)
</A></li>
        <LI>Next message: <A HREF="004398.html">[whatwg] [html5] onbeforeprint/onafterprint (was window.print()	undefined)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4411">[ date ]</a>
              <a href="thread.html#4411">[ thread ]</a>
              <a href="subject.html#4411">[ subject ]</a>
              <a href="author.html#4411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Dean Edwards wrote:
&gt;<i> Matthew Raymond wrote:
</I>&gt;&gt;<i>Dean Edwards wrote:
</I>&gt;&gt;&gt;<i>Matthew Raymond wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;|<i> if (documentchanged) {
</I>&gt;&gt;&gt;&gt;|<i>   printClone = document.clone();
</I>&gt;&gt;&gt;&gt;|<i>   prepareForPrinting(printClone);
</I>&gt;&gt;&gt;&gt;|<i> }
</I>&gt;&gt;&gt;&gt;|<i>
</I>&gt;&gt;&gt;&gt;|<i> printClone.print();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>This seems less practical than print events.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   I don't see how:
</I>&gt;&gt;<i>
</I>&gt;&gt;|<i> OnBeforePrintEventFunction() {
</I>&gt;&gt;|<i>   prepareForPrinting(document);
</I>&gt;&gt;|<i> }
</I>&gt;&gt;|<i>
</I>&gt;&gt;|<i> OnAfterPrintEventFunction() {
</I>&gt;&gt;|<i>   restoreForScreen(document);
</I>&gt;&gt;|<i> }
</I>&gt;<i> 
</I>&gt;<i> I mean less practical in terms of memory management. Cloning a document 
</I>&gt;<i> every time you alter it would likely lead to terrible performance. 
</I>&gt;<i> Granted, the JavaScript looks slightly neater.
</I>
   Well, we could do something like this:

|<i> document.DOMPushState();
</I>|<i> prepareForPrinting(document);
</I>|<i> window.print();
</I>|<i> document.DOMPopState();
</I>
   My concern was that there would be a visual change on the screen just
before printing. You could just have it to where redraw is blocked by
some mechanism, but what happens if the script crashes and the redraw is
never restored?

   Actually, that above example is effectively this:

|<i> prepareForPrinting(document);
</I>|<i> window.print();
</I>|<i> restoreForScreen(document);
</I>
   Soooo... Why did we need those events again? (Well, I can think of
one single reason: so you don't have a print button to hide in non-CSS
browsers. But wait, is that actually a problem??? This is where my
inexperience with Javascript rears its ugly head.)

   Still, we need a way to easily print from an altered DOM without
destroying the original DOM state. Cloning seems the safest, most
problem free way, but as you say, it initially doubles the memory.

   Quick Thought: Is there even a real use case for people printing from
a non-CSS user agent? If a user agent is sophisticated enough to print,
wouldn't it be sophisticated enough to use CSS for the print media?
Could someone, for instance, point out a phone that prints out
non-styled HTML to a printer?

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004410.html">[whatwg] [html5] onbeforeprint/onafterprint (was window.print()	undefined)
</A></li>
	<LI>Next message: <A HREF="004398.html">[whatwg] [html5] onbeforeprint/onafterprint (was window.print()	undefined)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4411">[ date ]</a>
              <a href="thread.html#4411">[ thread ]</a>
              <a href="subject.html#4411">[ subject ]</a>
              <a href="author.html#4411">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
