<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML 5 parsing - not just for browsers?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%205%20parsing%20-%20not%20just%20for%20browsers%3F&In-Reply-To=%3C43F03A61.4090107%40myrealbox.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048117.html">
   <LINK REL="Next"  HREF="048075.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML 5 parsing - not just for browsers?</H1>
<!--htdig_noindex-->
    <B>dolphinling</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%205%20parsing%20-%20not%20just%20for%20browsers%3F&In-Reply-To=%3C43F03A61.4090107%40myrealbox.com%3E"
       TITLE="[whatwg] HTML 5 parsing - not just for browsers?">dolphinling at myrealbox.com
       </A><BR>
    <I>Sun Feb 12 23:50:57 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="048117.html">[whatwg] Content Restrictions
</A></li>
        <LI>Next message: <A HREF="048075.html">[whatwg] HTML 5 parsing - not just for browsers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48074">[ date ]</a>
              <a href="thread.html#48074">[ thread ]</a>
              <a href="subject.html#48074">[ subject ]</a>
              <a href="author.html#48074">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>A site I use has recently had a number of holes in their filters that 
allowed users to upload javascript, an obvious security risk. In the 
time I've spent investigating and helping users to protect themselves 
and the website to close the holes, it's become pretty obvious that 
string-based filtering (i.e. disallowing certain strings of text) is 
futile. It's impossible to realize all the strings that would need to be 
blocked, and even if it were done new ones would keep appearing.

A better way to filter user uploaded HTML is to parse it, filter the DOM 
by removing all elements and attributes not on a whitelist, and then 
re-serialize it and output that. That way you can be assured that what's 
outputted is (valid) proven-safe HTML with (in non-empty elements) 
plaintext contents.

So, will the HTML 5 parsing section be of use here? Will it be of use to 
things other than browsers? Are there small differences needed because 
what's being parsed is a document fragment instead of a document? And 
when it's re-serialized, how closely will today's browsers interpret the 
original and the new?

-- 
dolphinling
&lt;<A HREF="http://dolphinling.net/">http://dolphinling.net/</A>&gt;

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048117.html">[whatwg] Content Restrictions
</A></li>
	<LI>Next message: <A HREF="048075.html">[whatwg] HTML 5 parsing - not just for browsers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48074">[ date ]</a>
              <a href="thread.html#48074">[ thread ]</a>
              <a href="subject.html#48074">[ subject ]</a>
              <a href="author.html#48074">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
