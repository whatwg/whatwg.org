<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Behavior when &lt;script&gt; is removed from DOM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Behavior%20when%20%3Cscript%3E%20is%20removed%20from%20DOM&In-Reply-To=%3CCA%2Bc2ei8j5PWDzvS0U0eSmyq_1hcsy8%3D%2BcpV8f%3DUeM0MjPiKdYg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034044.html">
   <LINK REL="Next"  HREF="034047.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Behavior when &lt;script&gt; is removed from DOM</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Behavior%20when%20%3Cscript%3E%20is%20removed%20from%20DOM&In-Reply-To=%3CCA%2Bc2ei8j5PWDzvS0U0eSmyq_1hcsy8%3D%2BcpV8f%3DUeM0MjPiKdYg%40mail.gmail.com%3E"
       TITLE="[whatwg] Behavior when &lt;script&gt; is removed from DOM">jonas at sicking.cc
       </A><BR>
    <I>Sat Dec  3 18:37:33 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="034044.html">[whatwg] Behavior when &lt;script&gt; is removed from DOM
</A></li>
        <LI>Next message: <A HREF="034047.html">[whatwg] Behavior when &lt;script&gt; is removed from DOM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34046">[ date ]</a>
              <a href="thread.html#34046">[ thread ]</a>
              <a href="subject.html#34046">[ subject ]</a>
              <a href="author.html#34046">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Dec 3, 2011 at 6:24 PM, Yehuda Katz &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">wycats at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Yehuda Katz
</I>&gt;<i> (ph) 718.877.1325
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Fri, Dec 2, 2011 at 11:30 AM, Tab Atkins Jr. &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jackalmage at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, Dec 2, 2011 at 11:27 AM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; The main use case for wanting to support scripts getting appears to be
</I>&gt;&gt;<i> &gt; wanting to abort JSONP loads. Potentially to issue it with new
</I>&gt;&gt;<i> &gt; parameters. This is a decent use case, but given the racyness
</I>&gt;&gt;<i> &gt; described above in webkit, it doesn't seem like a reliable technique
</I>&gt;&gt;<i> &gt; in existing browsers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If it's unreliable *and* no sites appear to break with the proper
</I>&gt;&gt;<i> behavior, we shouldn't care about this use-case, since cross-domain
</I>&gt;&gt;<i> XHR solves it properly.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cross-domain XHR *can* solve this use case, but the fact is that CORS is
</I>&gt;<i> harder to implement JSONP, and so we continue to have a large number of web
</I>&gt;<i> APIs that support JSONP but not CORS. Unfortunately, I do not forsee this
</I>&gt;<i> changing in the near future.
</I>
I think we can solve this in 3 ways:

1. Keep spec as it is. Pages can simply ignore the JSONP callback when
it happens.
Disadvantages:
Additional bandwidth.
More complexity for the web page.

2. Make removing scripts cancel any execution
Disadvantages:
Pages will have to deal with the fact that removing scripts can still
cause the callback to happen if the load just finished. So the same
amount of complexity for page authors that don't want buggy pages as
alternative 1.
Since many pages likely won't properly handle the callback happening
anyway will likely cause pages to be buggy in contemporary browsers.

3. Add a new API to reliably cancel a script load
Disadvantages:
New API for pages to learn.


I'm personally leaning towards 3 or 1. If we go with 3 pages can
always call the API and remove the script in order to get buggy
&quot;working&quot; behavior in contemporary browsers.

/ Jonas
</PRE>









































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034044.html">[whatwg] Behavior when &lt;script&gt; is removed from DOM
</A></li>
	<LI>Next message: <A HREF="034047.html">[whatwg] Behavior when &lt;script&gt; is removed from DOM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34046">[ date ]</a>
              <a href="thread.html#34046">[ thread ]</a>
              <a href="subject.html#34046">[ subject ]</a>
              <a href="author.html#34046">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
