<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas toDataURL and device dpi resolution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20toDataURL%20and%20device%20dpi%20resolution&In-Reply-To=%3CCAJtTCa4SjP81Mj%3DCOmN4op8pk3EAJg_OjdQ%2BXbk1YgCE5o2zHA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="076345.html">
   <LINK REL="Next"  HREF="076284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas toDataURL and device dpi resolution</H1>
<!--htdig_noindex-->
    <B>John Knottenbelt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20toDataURL%20and%20device%20dpi%20resolution&In-Reply-To=%3CCAJtTCa4SjP81Mj%3DCOmN4op8pk3EAJg_OjdQ%2BXbk1YgCE5o2zHA%40mail.gmail.com%3E"
       TITLE="[whatwg] Canvas toDataURL and device dpi resolution">jknotten at chromium.org
       </A><BR>
    <I>Thu Dec  1 08:52:14 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="076345.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
        <LI>Next message: <A HREF="076284.html">[whatwg] Canvas toDataURL and device dpi resolution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34003">[ date ]</a>
              <a href="thread.html#34003">[ thread ]</a>
              <a href="subject.html#34003">[ subject ]</a>
              <a href="author.html#34003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>How should the data url returned by toDataURL be sized in the case of
a high device dpi resolution system? E.g. where the canvas's backing
store horizontal and vertical dimensions are some multiple of the
specified width and height in CSS pixels.

The test <A HREF="http://philip.html5.org/tests/canvas/suite/tests/toDataURL.png.primarycolours.html">http://philip.html5.org/tests/canvas/suite/tests/toDataURL.png.primarycolours.html</A>
makes a drawing with canvas, saves this drawing to a data url, loads
the data url into an Image element and then draws that back to the
canvas, and then performs some assertions that the image is as
expected.

I've been trying this out in the DumpRenderTree test runner of WebKit,
where toDataURL returns an image derived from the canvas' backing
store image data. If I set the device dpi scale to 2.0 to imitate a
high DPI display, the test will fail because the image returned by
toDataURL is now four times as big as the test expects it to be.

Is this correct behaviour, or is the test correct and I simply have a
bug in WebKit?

Many thanks

John
</PRE>














<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="076345.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
	<LI>Next message: <A HREF="076284.html">[whatwg] Canvas toDataURL and device dpi resolution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34003">[ date ]</a>
              <a href="thread.html#34003">[ thread ]</a>
              <a href="subject.html#34003">[ subject ]</a>
              <a href="author.html#34003">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
