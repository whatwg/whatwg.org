<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web Sockets
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Sockets&In-Reply-To=%3C31fb000f0807211510n5cf3bf21o1f9215bc467ad508%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015311.html">
   <LINK REL="Next"  HREF="015351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web Sockets</H1>
<!--htdig_noindex-->
    <B>Frode B&#248;rli</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Sockets&In-Reply-To=%3C31fb000f0807211510n5cf3bf21o1f9215bc467ad508%40mail.gmail.com%3E"
       TITLE="[whatwg] Web Sockets">frode at seria.no
       </A><BR>
    <I>Mon Jul 21 15:10:00 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="015311.html">[whatwg] Web Sockets
</A></li>
        <LI>Next message: <A HREF="015351.html">[whatwg] Web Sockets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15348">[ date ]</a>
              <a href="thread.html#15348">[ thread ]</a>
              <a href="subject.html#15348">[ subject ]</a>
              <a href="author.html#15348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I have some feedback based on the discussions i participated in
earlier. Since I am on vacation I cannot give a proper proposal but I
think the following should be considered:


1. Allow pure TCPSocket using this method: var s = new
TCPSocket(&quot;/tcpsocket.xml&quot;);

The tcpsocket.xml-file must have a structure similar to this:

&lt;websocket&gt;
  &lt;host&gt;hostname/ip-address&lt;/host&gt;
  &lt;port&gt;portnumber&lt;/port&gt;
  &lt;allow-origin&gt;*&lt;/allow-origin&gt;
&lt;/websocket&gt;

Clarifications:

host: if specified and if the host is another host than the host where
tcpsocket.xml was downloaded from - a secure algorithm should be
applied, for example using reverse dns lookups on the target
IP-address and inspecting the TXT-records of the host name that the
reverse lookup returned.

port: any port

allow-origin: simple method of limiting who can connect to the port
specified in the tcpsocket.xml-file. For example this could be the
complete url of the javascript file or it could contain wildcards.


Advantages:

- Easy to adopt today on existing servers and can easily utilize for
example existing IRC-servers etc without modifications.
- Enables cross site usage (script on www.example.com can connect to
Yahoo by downloading www.yahoo.com/websocket.xml)
- Requires access to place files on the targeted server - so it is not
possible by simple cross site scripting attacks.
- A simple perl script can dynamically generate the xml-file above.
- Allows connection to SMTP servers only if the server owner intends
to allow it.


2. WebSockets should use previous work from RFC 2817
(<A HREF="http://www.ietf.org/rfc/rfc2817.txt">http://www.ietf.org/rfc/rfc2817.txt</A>). Web servers such as Apache must
then be extended to support websockets, but it should be very easy for
a developer to start using websockets. It would not require an extra
application listening on a separate port, and it would by definition
work in a virtual hosting environment.

Since the request is to an ordinary URL, the webserver will direct the
request to a file or script in the web root for the virtual host and
this script can decide to send an 426 Upgrade Required response, or it
can send 401 Unauthorised if the client sent the wrong Origin headers.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015311.html">[whatwg] Web Sockets
</A></li>
	<LI>Next message: <A HREF="015351.html">[whatwg] Web Sockets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15348">[ date ]</a>
              <a href="thread.html#15348">[ thread ]</a>
              <a href="subject.html#15348">[ subject ]</a>
              <a href="author.html#15348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
