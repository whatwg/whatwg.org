<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] The &lt;iframe&gt; element and sandboxing ideas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20The%20%3Ciframe%3E%20element%20and%20sandboxing%20ideas&In-Reply-To=%3C31fb000f0807260039r40a8764ey45610b85a2f37ee5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="057676.html">
   <LINK REL="Next"  HREF="057679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] The &lt;iframe&gt; element and sandboxing ideas</H1>
<!--htdig_noindex-->
    <B>Frode B&#248;rli</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20The%20%3Ciframe%3E%20element%20and%20sandboxing%20ideas&In-Reply-To=%3C31fb000f0807260039r40a8764ey45610b85a2f37ee5%40mail.gmail.com%3E"
       TITLE="[whatwg] The &lt;iframe&gt; element and sandboxing ideas">frode at seria.no
       </A><BR>
    <I>Sat Jul 26 00:39:52 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="057676.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
        <LI>Next message: <A HREF="057679.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57678">[ date ]</a>
              <a href="thread.html#57678">[ thread ]</a>
              <a href="subject.html#57678">[ subject ]</a>
              <a href="author.html#57678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> Frode B&#248;rli wrote:
</I>&gt;&gt;<i> Yeah, I thought about that also. Then we have more complex attributes
</I>&gt;&gt;<i> such as style='font-family: expression&#40;a+5&#41;;'... So your
</I>&gt;&gt;<i> sanitizer must also parse CSS properly - including unescaping
</I>&gt;&gt;<i> entities.
</I>&gt;<i> The way HTML Purifier handles this is unescaping all entities (hex, dec
</I>&gt;<i> and named) before handling HTML. Output text is always in UTF-8 and thus
</I>&gt;<i> never has entities.
</I>
The sanitizer seems very good. I see that your purifier does not allow
:<i> in urls (which is an important part of for example Wikipedia urls) -
</I>but still it makes it difficult to use javascript: style links.

Anyway: how many hours have you spent developing the sanitizer? The
discussion was not wether it could be done server side or not. Imagine
fetching content from another site using a client side javascript
(which it seems HTML 5 will allow). Should the HTML Purifier be
implemented in pure javascript as well then - or must the content
still do a round trip to the server for sanitasion?

&gt;&gt;<i> A bank want a HTML-messaging system where the customer can write
</I>&gt;&gt;<i> HTML-based messages to customer support trough the online banking
</I>&gt;&gt;<i> system. Customer support personell have access to perform transactions
</I>&gt;&gt;<i> worth millions of dollars trough the intranet web interface (where
</I>&gt;&gt;<i> they also receive HTML-based messages from customers).
</I>&gt;<i>
</I>&gt;<i> A few problems with this theoretical situation:
</I>&gt;<i> 1. Why does the bank need an HTML messaging system?
</I>
Because the bank wants to be percieved as innovative by its customers?
It is not my place to question WHY somebody need a feature. Why is
there a manufactorer logo on most cars? It isnt strictly required...

&gt;<i> 2. Why is this system on the same domain as the intranet web interface?
</I>
Content is submitted from the banks public website - but customer
support handles the mails in the internal webmail system which may be
on the same domain..

&gt;<i> 3. Why do customer support personell have access to the transaction
</I>&gt;<i> interface?
</I>
Better question: is it good that since html-sanitizing cannot be done
securely we need more employees?

If I contact my account manager he most likely have access to perform
tasks on my account, as well as on other customers bank accounts.

&gt;&gt;<i> Security depends on on a perfect sanitizer. Would you sell your
</I>&gt;&gt;<i> sanitizer to this bank without any disclaimers, and say that your
</I>&gt;&gt;<i> sanitizer will be valid for eternity and for all browsers that the
</I>&gt;&gt;<i> bank decides to use internally in the future?
</I>&gt;<i> Well, it's an open-source sanitizer. But that aside, say, I was selling
</I>&gt;<i> them a support contract, I would not say &quot;valid for eternity&quot;. However,
</I>
Then we need client side sandboxing.

&gt;&gt;<i> Today I would not allow HTML-based messages since I could never be
</I>&gt;&gt;<i> sure enough that the sanitizer was perfect.
</I>&gt;<i> I encourage you to try out HTML Purifier &lt;<A HREF="http://htmlpurifier.org">http://htmlpurifier.org</A>&gt;. It's
</I>&gt;<i> certainly not perfect (we've had a total of two security problems with
</I>&gt;<i> the core code (three if you count a Shift_JIS related vulnerability, and
</I>&gt;<i> four if you count an XSS vulnerability in a testing script for the
</I>&gt;<i> library)), but I hope it certainly approaches it.
</I>
I really appreciate it and will possibly use it depending on its
license. It is a problem (for me) that it cannot use : in its urls.

PS: Note  that PHP is not perfect, and if you rely on PHP-functions
for unescaping etc then a future version of PHP might introduce new
bugs. I know from experience...


-- 
Best regards / Med vennlig hilsen
Frode B&#248;rli
Seria.no

Mobile:
+47 406 16 637
Company:
+47 216 90 000
Fax:
+47 216 91 000


Think about the environment. Do not print this e-mail unless you really need to.

Tenk milj&#248;. Ikke skriv ut denne e-posten dersom det ikke er n&#248;dvendig.
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="057676.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
	<LI>Next message: <A HREF="057679.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57678">[ date ]</a>
              <a href="thread.html#57678">[ thread ]</a>
              <a href="subject.html#57678">[ subject ]</a>
              <a href="author.html#57678">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
