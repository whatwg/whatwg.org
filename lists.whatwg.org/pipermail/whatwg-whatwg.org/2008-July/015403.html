<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] The &lt;iframe&gt; element and sandboxing ideas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20The%20%3Ciframe%3E%20element%20and%20sandboxing%20ideas&In-Reply-To=%3C488ACCD1.6080001%40thewritingpot.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015397.html">
   <LINK REL="Next"  HREF="015405.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] The &lt;iframe&gt; element and sandboxing ideas</H1>
<!--htdig_noindex-->
    <B>Edward Z. Yang</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20The%20%3Ciframe%3E%20element%20and%20sandboxing%20ideas&In-Reply-To=%3C488ACCD1.6080001%40thewritingpot.com%3E"
       TITLE="[whatwg] The &lt;iframe&gt; element and sandboxing ideas">edwardzyang at thewritingpot.com
       </A><BR>
    <I>Sat Jul 26 00:05:53 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="015397.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
        <LI>Next message: <A HREF="015405.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15403">[ date ]</a>
              <a href="thread.html#15403">[ thread ]</a>
              <a href="subject.html#15403">[ subject ]</a>
              <a href="author.html#15403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Warning: This is going to be a little bit of an HTML Purifier
evangelising post.

Frode B&#248;rli wrote:
&gt;<i> Yeah, I thought about that also. Then we have more complex attributes
</I>&gt;<i> such as style='font-family: expression&amp;#40;a+5&amp;#41;;'... So your
</I>&gt;<i> sanitizer must also parse CSS properly - including unescaping
</I>&gt;<i> entities.
</I>
The way HTML Purifier handles this is unescaping all entities (hex, dec
and named) before handling HTML. Output text is always in UTF-8 and thus
never has entities.

Also, it should be noted that &amp;#40; is HTML escaping, not CSS escaping.
CSS has its own set of escaping syntax. HTML Purifier handles that too.

&gt;<i> For all I know - a future invention may introduce a new method of
</I>&gt;<i> encoding entities also, so your sanitizer must support all future
</I>&gt;<i> entity encodings.
</I>
I don't know what you really mean by this, but by converting entities to
characters this is not a problem.

&gt;<i> Ofcourse we can skip supporting the style attribute - but there are
</I>&gt;<i> not many other ways to style content in XHTML.
</I>
Style attribute is supported.

&gt;<i> A bank want a HTML-messaging system where the customer can write
</I>&gt;<i> HTML-based messages to customer support trough the online banking
</I>&gt;<i> system. Customer support personell have access to perform transactions
</I>&gt;<i> worth millions of dollars trough the intranet web interface (where
</I>&gt;<i> they also receive HTML-based messages from customers).
</I>
A few problems with this theoretical situation:

1. Why does the bank need an HTML messaging system?
2. Why is this system on the same domain as the intranet web interface?
3. Why do customer support personell have access to the transaction
interface?

But whatever, it's not really relevant to the topic at hand.

&gt;<i> Security depends on on a perfect sanitizer. Would you sell your
</I>&gt;<i> sanitizer to this bank without any disclaimers, and say that your
</I>&gt;<i> sanitizer will be valid for eternity and for all browsers that the
</I>&gt;<i> bank decides to use internally in the future?
</I>
Well, it's an open-source sanitizer. But that aside, say, I was selling
them a support contract, I would not say &quot;valid for eternity&quot;. However,
I would be very confident that a bug would be more likely than a future
browser breaking the sanitizer. And the reason I say this is because of
the principle of backwards-compatibility: my sanitizer only allows
HTML/CSS that has well-defined behavior by all current browsers.
colspan=&quot;expr(3+4)&quot; is theoretically valid and safe HTML, but it doesn't
have well-defined behavior with browsers, so it is sanitized out.
colspan=&quot;4&quot; is well-defined, valid and safe, and unless a browser
decides 4 is a magic number that should trigger the execution of
JavaScript code in a nearby node, it's safe.

&gt;<i> Today I would not allow HTML-based messages since I could never be
</I>&gt;<i> sure enough that the sanitizer was perfect.
</I>
I encourage you to try out HTML Purifier &lt;<A HREF="http://htmlpurifier.org">http://htmlpurifier.org</A>&gt;. It's
certainly not perfect (we've had a total of two security problems with
the core code (three if you count a Shift_JIS related vulnerability, and
four if you count an XSS vulnerability in a testing script for the
library)), but I hope it certainly approaches it.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015397.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
	<LI>Next message: <A HREF="015405.html">[whatwg] The &lt;iframe&gt; element and sandboxing ideas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15403">[ date ]</a>
              <a href="thread.html#15403">[ thread ]</a>
              <a href="subject.html#15403">[ subject ]</a>
              <a href="author.html#15403">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
