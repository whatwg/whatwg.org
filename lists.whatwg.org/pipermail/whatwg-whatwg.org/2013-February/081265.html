<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas: Fonts in workers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%3A%20Fonts%20in%20workers&In-Reply-To=%3CPine.LNX.4.64.1302210558350.3956%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081264.html">
   <LINK REL="Next"  HREF="081266.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas: Fonts in workers</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%3A%20Fonts%20in%20workers&In-Reply-To=%3CPine.LNX.4.64.1302210558350.3956%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Canvas: Fonts in workers">ian at hixie.ch
       </A><BR>
    <I>Wed Feb 20 21:59:41 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081264.html">[whatwg] Canvas: Fonts in workers
</A></li>
        <LI>Next message: <A HREF="081266.html">[whatwg] Canvas: Fonts in workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81265">[ date ]</a>
              <a href="thread.html#81265">[ thread ]</a>
              <a href="subject.html#81265">[ subject ]</a>
              <a href="author.html#81265">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 20 Feb 2013, Jonas Sicking wrote:
&gt;<i> On Wed, Feb 20, 2013 at 2:55 AM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at annevk.nl</A>&gt; wrote:
</I>&gt;<i> &gt; I think currently the specification assumes FontLoader is the solution 
</I>&gt;<i> &gt; to fonts in workers. However, 1) FontLoader as currently designed does 
</I>&gt;<i> &gt; not work in workers. 2) Even if slightly modified it would not work in 
</I>&gt;<i> &gt; shared workers as FontLoader is pretty much tied to the document that 
</I>&gt;<i> &gt; has the relevant @font-face declarations. I don't really have a good 
</I>&gt;<i> &gt; solution to this problem.
</I>&gt;<i> 
</I>&gt;<i> In general, we need to define which fonts are available to use when 
</I>&gt;<i> drawing text into a canvas in a worker. For a dedicated worker we could 
</I>&gt;<i> say that it's the same set as is available in the document, except that 
</I>&gt;<i> that set can change at any time as new fonts are loaded. And for a 
</I>&gt;<i> shared worker this is even more complicated since multiple documents, 
</I>&gt;<i> with different sets of fonts, can be connected to the same shared 
</I>&gt;<i> worker.
</I>&gt;<i> 
</I>&gt;<i> We could possibly still use the the FontLoader interface if we do the following:
</I>&gt;<i> * FontLoader needs to drop the dependency on CSSFontFaceRule (or at
</I>&gt;<i> least make the dependency optional and not available in workers).
</I>&gt;<i> * We'll expose a global FontLoader object per worker scope.
</I>&gt;<i> * The worker can't use any downloaded fonts other than the ones loaded
</I>&gt;<i> through the global FontLoader for that scope.
</I>
My expectation was that this is how FontLoader would work for workers. (We 
can't rely on what fonts are in the Document since that's shared state, 
and workers try to avoid shared state as a design principle.)

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081264.html">[whatwg] Canvas: Fonts in workers
</A></li>
	<LI>Next message: <A HREF="081266.html">[whatwg] Canvas: Fonts in workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81265">[ date ]</a>
              <a href="thread.html#81265">[ thread ]</a>
              <a href="subject.html#81265">[ subject ]</a>
              <a href="author.html#81265">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
