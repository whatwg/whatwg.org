<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Security: emphasize that subdomain is not enough for user provided scriptable content
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Security%3A%20emphasize%20that%20subdomain%20is%20not%20enough%20for%20user%0A%20provided%20scriptable%20content&In-Reply-To=%3C22c486ba-d67b-9e6f-089c-594b618b755b%40peda.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000132.html">
   <LINK REL="Next"  HREF="000134.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Security: emphasize that subdomain is not enough for user provided scriptable content</H1>
<!--htdig_noindex-->
    <B>Mikko Rantalainen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Security%3A%20emphasize%20that%20subdomain%20is%20not%20enough%20for%20user%0A%20provided%20scriptable%20content&In-Reply-To=%3C22c486ba-d67b-9e6f-089c-594b618b755b%40peda.net%3E"
       TITLE="[whatwg] Security: emphasize that subdomain is not enough for user provided scriptable content">mikko.rantalainen at peda.net
       </A><BR>
    <I>Tue Aug 28 05:33:01 PDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000132.html">[whatwg] Fieldset interoperability work
</A></li>
        <LI>Next message (by thread): <A HREF="000134.html">[whatwg] Security: emphasize that subdomain is not enough for user provided scriptable content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#133">[ date ]</a>
              <a href="thread.html#133">[ thread ]</a>
              <a href="subject.html#133">[ subject ]</a>
              <a href="author.html#133">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>The page

   <A HREF="https://html.spec.whatwg.org/dev/iframe-embed-object.html">https://html.spec.whatwg.org/dev/iframe-embed-object.html</A>

contains an example that has &quot;usercontent.example.net&quot; instead of e.g. 
&quot;video.example.com&quot; used in the same chapter. It does have a warning saying

&gt;<i> It is important to use a separate domain so that if the attacker
</I>&gt;<i> convinces the user to visit that page directly, the page doesn't run
</I>&gt;<i> in the context of the site's origin, which would make the user
</I>&gt;<i> vulnerable to any attack found in the page.
</I>
but I think this should specifically mention that using a subdomain is 
not enough because JavaScript can lift any domain restrictions if only 
the subdomain is different. This difference may not be immediately 
obvious to casual reader especially because both examples also have 
different subdomains which is easier to notice.

I'm not sure how wording should be put because technically 
&quot;example.com.&quot; is subdomain of &quot;com.&quot; top level domain. And we have 
stuff such as &quot;co.uk.&quot;, which makes things even hairier.

I guess that the spec would like to use .example.* domains in all the 
examples but perhaps one could use something more explicit such as

    <A HREF="https://example-usercontent.com/...">https://example-usercontent.com/...</A>

for this example in addition to being more explicit about subdomains in 
the warning. That would prevent even casual reader from mixing 
a.example.com and b.example-usercontent.com.

-- 
Mikko
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000132.html">[whatwg] Fieldset interoperability work
</A></li>
	<LI>Next message (by thread): <A HREF="000134.html">[whatwg] Security: emphasize that subdomain is not enough for user provided scriptable content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#133">[ date ]</a>
              <a href="thread.html#133">[ thread ]</a>
              <a href="subject.html#133">[ subject ]</a>
              <a href="author.html#133">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
