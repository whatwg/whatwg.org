<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSocket opening handshake, when to bail out
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20opening%20handshake%2C%20when%20to%20bail%20out&In-Reply-To=%3Cop.vbl3r0vridj3kv%40simon-pieterss-macbook.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026009.html">
   <LINK REL="Next"  HREF="026007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSocket opening handshake, when to bail out</H1>
<!--htdig_noindex-->
    <B>Simon Pieters</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20opening%20handshake%2C%20when%20to%20bail%20out&In-Reply-To=%3Cop.vbl3r0vridj3kv%40simon-pieterss-macbook.local%3E"
       TITLE="[whatwg] WebSocket opening handshake, when to bail out">simonp at opera.com
       </A><BR>
    <I>Fri Apr 23 04:05:50 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="026009.html">[whatwg] Canvas 2D Context Proposal: resetOriginClean
</A></li>
        <LI>Next message: <A HREF="026007.html">[whatwg] Introduction of media accessibility features
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26005">[ date ]</a>
              <a href="thread.html#26005">[ thread ]</a>
              <a href="subject.html#26005">[ subject ]</a>
              <a href="author.html#26005">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>The establish a WebSocket connection algorithm is very specific about when  
to bail out. This is annoying. It means we have to reimplement header  
parsing just for WebSockets, when we already have very well tested header  
parsing in place. We'd like to be able to bail out or wait for more data  
as we see fit for the opening handshake. It does not seem to be  
interop-sensitive whether one browser bails out a few bytes earlier than  
another browser for an invalid handshake. The difference is only  
observable in carefully crafted cases where the server sleeps half-way  
through the handshake.

For instance, the algorithm says to wait for an 0x0A byte and only then  
check the status code. We want to check the status code earlier,  
byte-for-byte.

For the fields, the algorithm says to do some processing while parsing  
each field, and then do further processing when they're all received. We'd  
like to wait with processing them until we have them all.

(This feedback makes the earlier feedback about moving processing of  
fields with empty name moot.)

-- 
Simon Pieters
Opera Software
</PRE>



































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026009.html">[whatwg] Canvas 2D Context Proposal: resetOriginClean
</A></li>
	<LI>Next message: <A HREF="026007.html">[whatwg] Introduction of media accessibility features
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26005">[ date ]</a>
              <a href="thread.html#26005">[ thread ]</a>
              <a href="subject.html#26005">[ subject ]</a>
              <a href="author.html#26005">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
