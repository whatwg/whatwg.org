<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Directory%20upload%20via%20%3Cinput%20type%3D%22file%22%20directory%3E&In-Reply-To=%3Cv2q78dc8441004061418u1096fe9fzb26032923fdfca63%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025832.html">
   <LINK REL="Next"  HREF="025837.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;</H1>
<!--htdig_noindex-->
    <B>Ojan Vafai</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Directory%20upload%20via%20%3Cinput%20type%3D%22file%22%20directory%3E&In-Reply-To=%3Cv2q78dc8441004061418u1096fe9fzb26032923fdfca63%40mail.gmail.com%3E"
       TITLE="[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;">ojan at chromium.org
       </A><BR>
    <I>Tue Apr  6 14:18:32 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025832.html">[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
</A></li>
        <LI>Next message: <A HREF="025837.html">[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25835">[ date ]</a>
              <a href="thread.html#25835">[ thread ]</a>
              <a href="subject.html#25835">[ subject ]</a>
              <a href="author.html#25835">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>It's unfortunate that users need to distinguish between single and multiple
file inputs. That's not something we can change at this point. The web
started with single file inputs. We can avoid adding a third type of file
input they need to understand though.

Also, what should happen if you drag files and folders onto a &quot;multiple&quot; or
&quot;directory&quot; input? Just drop the ones that are of the wrong type? I cannot
imagine users making sense of that.

It's not clear to me from your original email what issues you encountered
during implementation that led to this proposal. Is it just the leaf name
conflict issue? I agree that's a problem, but maybe there's a different
solution to that?

Ojan

On Tue, Apr 6, 2010 at 12:53 PM, John Gregg &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">johnnyg at google.com</A>&gt; wrote:

&gt;<i> That's a fair question, but how is it clear today whether an input can
</I>&gt;<i> accept multiple files vs. a single file using drag-and-drop?  Currently if I
</I>&gt;<i> drag multiple files onto an input that doesn't have 'multiple', I get only
</I>&gt;<i> the first one.  (In Chrome.)
</I>&gt;<i>
</I>&gt;<i> Some good default text from the UA, like &quot;Choose folder...&quot; instead of
</I>&gt;<i> &quot;Choose file...&quot;, would go far to solve that, I think.
</I>&gt;<i>
</I>&gt;<i>  -John
</I>&gt;<i>
</I>&gt;<i> On Tue, Apr 6, 2010 at 12:38 PM, Ojan Vafai &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ojan at chromium.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> What about drag-drop? I should be able to drag a directory, a file, or a
</I>&gt;&gt;<i> list of files onto an input, no? If not, how is this distinction shown to
</I>&gt;&gt;<i> users? How will it be clear to users when they can do one or the other?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ojan
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Thu, Apr 1, 2010 at 3:53 PM, John Gregg &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">johnnyg at google.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> For context, Ian Fette started a thread about uploading directories of
</I>&gt;&gt;&gt;<i> files in December:
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2009-December/024455.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2009-December/024455.html</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> At that time, it was thought that directory upload could be implemented
</I>&gt;&gt;&gt;<i> by a UA in response to a &lt;input type=&quot;file&quot; multiple&gt; tag using different UI
</I>&gt;&gt;&gt;<i> only, and modifying the FileAPI spec to allow path information in the form
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> input.files[0].name=&quot;1.jpg&quot;
</I>&gt;&gt;&gt;<i> input.files[0].path=&quot;a&quot;
</I>&gt;&gt;&gt;<i> input.files[1].name=&quot;2.jpg&quot;
</I>&gt;&gt;&gt;<i> input.files[1].path=&quot;a/b&quot;
</I>&gt;&gt;&gt;<i> input.files[2].name=&quot;3.jpg&quot;
</I>&gt;&gt;&gt;<i> input.files[2].path=&quot;a/c&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I've started developing a prototype of this in WebKit/Chromium.  Based on
</I>&gt;&gt;&gt;<i> what I've encountered so far, I would like to propose adding directory
</I>&gt;&gt;&gt;<i> upload functionality using an explicit new 'directory' attribute on the file
</I>&gt;&gt;&gt;<i> input element.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The existing behavior of &lt;input type=&quot;file&quot; multiple&gt; would not change,
</I>&gt;&gt;&gt;<i> but when processing &lt;input type=&quot;file&quot; directory&gt;, the UA would display a
</I>&gt;&gt;&gt;<i> directory selection UI and store the path information, and *not* allow
</I>&gt;&gt;&gt;<i> individual files to be selected.  It would allow multiple files to have the
</I>&gt;&gt;&gt;<i> same leaf name (.name attribute), as long as the paths were different.  The
</I>&gt;&gt;&gt;<i> path attributes would include the name of the chosen directory
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This would be preferable for several reasons:
</I>&gt;&gt;&gt;<i>  - Most built-in file system UI on major platforms (Windows/Mac/Linux)
</I>&gt;&gt;&gt;<i> have distinct dialogs for choosing files and choosing directories.  Allowing
</I>&gt;&gt;&gt;<i> the UA to use these directly makes sense rather than creating hybrids.
</I>&gt;&gt;&gt;<i>  - Avoiding &quot;leaf name&quot; conflicts in a directory tree is not feasible in
</I>&gt;&gt;&gt;<i> many applications -- asking a user to ensure unique photo names in a large
</I>&gt;&gt;&gt;<i> set of albums before uploading would fail to meet that use case.  Therefore
</I>&gt;&gt;&gt;<i> HTML documents should know in advance whether the path information will be
</I>&gt;&gt;&gt;<i> relevant in the eventual storage of the files.  Sites currently using &lt;input
</I>&gt;&gt;&gt;<i> type=&quot;file&quot; multiple&gt; would have compatibility problems with an
</I>&gt;&gt;&gt;<i> implementation which allowed conflicting file names along different paths.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What are your thoughts about adding the 'directory' attribute?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;<i>  -John
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100406/cd0c3e53/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100406/cd0c3e53/attachment.htm</A>&gt;
</PRE>




<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025832.html">[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
</A></li>
	<LI>Next message: <A HREF="025837.html">[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25835">[ date ]</a>
              <a href="thread.html#25835">[ thread ]</a>
              <a href="subject.html#25835">[ subject ]</a>
              <a href="author.html#25835">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
