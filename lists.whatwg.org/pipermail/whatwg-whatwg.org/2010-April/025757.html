<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] some comments on establish a WebSocket connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20some%20comments%20on%20establish%20a%20WebSocket%20connection&In-Reply-To=%3Cop.vag4qdijidj3kv%40simon-pieterss-macbook.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025759.html">
   <LINK REL="Next"  HREF="025760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] some comments on establish a WebSocket connection</H1>
<!--htdig_noindex-->
    <B>Simon Pieters</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20some%20comments%20on%20establish%20a%20WebSocket%20connection&In-Reply-To=%3Cop.vag4qdijidj3kv%40simon-pieterss-macbook.local%3E"
       TITLE="[whatwg] some comments on establish a WebSocket connection">simonp at opera.com
       </A><BR>
    <I>Thu Apr  1 02:04:51 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025759.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
        <LI>Next message: <A HREF="025760.html">[whatwg] Character encoding of document.open()ed documents
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25757">[ date ]</a>
              <a href="thread.html#25757">[ thread ]</a>
              <a href="subject.html#25757">[ subject ]</a>
              <a href="author.html#25757">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>The establish a WebSocket connection algorithm says:

[[
35. ...

&#8618;If the byte is 0x20 (ASCII space)
Ignore the byte and move on to the next step.

Otherwise
Treat the byte as described by the list in the next step, then move on to  
that next step for real.

Note: This skips past a space character after the colon, if necessary.

36. Read a byte from the server.

If the connection closes before this byte is received, then fail the  
WebSocket connection and abort these steps.

Otherwise, handle the byte as described in the appropriate entry below:

&#8618;If the byte is 0x0D (ASCII CR)
Move on to the next step.
]]

Consider the case when the server gives a colon followed by CR. My reading  
is that step 36 will be run twice:

Upon receiving the CR in step 35, &quot;Treat the byte as described by the list  
in the next step&quot; which is &quot;Move on to the next step.&quot; (i.e. step 37),  
&quot;then move on to that next step for real.&quot; (i.e. step 36).


Step 41 says:

[[
If the entry's name is &quot;set-cookie&quot; or &quot;set-cookie2&quot; or another  
cookie-related field name

If the relevant specification is supported by the user agent, handle the  
cookie as defined by the appropriate specification, with the resource  
being the one with the host host, the port port, the path (and possibly  
query parameters) resource name, and the scheme http if secure is false  
and https if secure is true. [COOKIES]
]]

What should be done if the relevant specification is not supported?

-- 
Simon Pieters
Opera Software
</PRE>




<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025759.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
	<LI>Next message: <A HREF="025760.html">[whatwg] Character encoding of document.open()ed documents
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25757">[ date ]</a>
              <a href="thread.html#25757">[ thread ]</a>
              <a href="subject.html#25757">[ subject ]</a>
              <a href="author.html#25757">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
