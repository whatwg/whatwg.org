<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Adding ECMAScript 5 array extras to HTMLCollection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Adding%20ECMAScript%205%20array%20extras%20to%20HTMLCollection&In-Reply-To=%3C4BD5C792.7050106%40davidflanagan.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068315.html">
   <LINK REL="Next"  HREF="068319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Adding ECMAScript 5 array extras to HTMLCollection</H1>
<!--htdig_noindex-->
    <B>David Flanagan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Adding%20ECMAScript%205%20array%20extras%20to%20HTMLCollection&In-Reply-To=%3C4BD5C792.7050106%40davidflanagan.com%3E"
       TITLE="[whatwg] Adding ECMAScript 5 array extras to HTMLCollection">david at davidflanagan.com
       </A><BR>
    <I>Mon Apr 26 10:04:18 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="068315.html">[whatwg] Adding ECMAScript 5 array extras to HTMLCollection
</A></li>
        <LI>Next message: <A HREF="068319.html">[whatwg] Adding ECMAScript 5 array extras to HTMLCollection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68317">[ date ]</a>
              <a href="thread.html#68317">[ thread ]</a>
              <a href="subject.html#68317">[ subject ]</a>
              <a href="author.html#68317">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Erik Arvidsson wrote:
&gt;&gt;&gt;<i> for (var i = 0, length = collection.length; i &lt; length; i++)
</I>&gt;&gt;&gt;<i> // instead of:
</I>&gt;&gt;&gt;<i> for (var i = 0; i &lt; collection.length; i++)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Actually, the former is a problem when the nodelist is modified in the
</I>&gt;&gt;<i> loop; it may result in collection[i] being undefined.
</I>&gt;<i> 
</I>&gt;<i> Even when checking the length in every iteration you can run into
</I>&gt;<i> problems. If you remove something earlier in the collection you will
</I>&gt;<i> *miss* one item unless you fix the loop iterator.
</I>&gt;<i> 
</I>&gt;<i> We should not let these edge cases get in the way of making the DOM
</I>&gt;<i> collections feel less foreign to JavaScript.
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> erik
</I>&gt;<i> 
</I>
Rather that trying to make DOM collections feel like arrays, how about 
just giving them a toArray() method?  This makes it clear that a 
collection is not an array, but clearly defines a way to obtain an 
array.  Clever implementors might even be able to optimize common 
uses-cases using some kind of copy-on-write strategy so that toArray() 
doesn't involve memory allocation and copying.

Of course, trying to teach programmers when they ought to call toArray() 
and when it is not necessary is another matter.  Perhaps calling the 
method snapshot() and focusing on the live vs. static distinction 
instead of the fake array vs. true array distinction would invite less 
misuse.

Or we can just leave the DOM as it is and get used to calling the 
equivalent of Prototype's $A() function.

	David

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068315.html">[whatwg] Adding ECMAScript 5 array extras to HTMLCollection
</A></li>
	<LI>Next message: <A HREF="068319.html">[whatwg] Adding ECMAScript 5 array extras to HTMLCollection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68317">[ date ]</a>
              <a href="thread.html#68317">[ thread ]</a>
              <a href="subject.html#68317">[ subject ]</a>
              <a href="author.html#68317">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
