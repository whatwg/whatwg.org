<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSocket closing handshake
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20closing%20handshake&In-Reply-To=%3Cop.vby5a7vlidj3kv%40simon-pieterss-macbook.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026105.html">
   <LINK REL="Next"  HREF="026110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSocket closing handshake</H1>
<!--htdig_noindex-->
    <B>Simon Pieters</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20closing%20handshake&In-Reply-To=%3Cop.vby5a7vlidj3kv%40simon-pieterss-macbook.local%3E"
       TITLE="[whatwg] WebSocket closing handshake">simonp at opera.com
       </A><BR>
    <I>Fri Apr 30 05:07:45 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="026105.html">[whatwg] Should default styles for h1-h6 match the outlining algorithm?
</A></li>
        <LI>Next message: <A HREF="026110.html">[whatwg] The real issue with HTML5's sectioning model (was:	&quot;Headings and sections,	role of H2-H6&quot; and &quot;Should default styles for h1-h6 match the	outlining algorithm?&quot;)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26107">[ date ]</a>
              <a href="thread.html#26107">[ thread ]</a>
              <a href="subject.html#26107">[ subject ]</a>
              <a href="author.html#26107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>start the WebSocket closing handshake:

[[
Note: The closing handshake finishes once the server returns the 0xFF  
packet, as described above.
]]

I assume it should say 0xFF frame, not packet.

This note is only true when the client sends the closing handshake first.

...except that I can't find anywhere in the server part to send 0xFF 0x00  
when it receives 0xFF 0x00 from the client. I just see:

[[
5. If type is 0xFF and length is 0, then set the client terminated flag  
and abort these steps. All further data sent by the client should be  
discarded.
]]

and:

[[
At any time, the server may decide to terminate the WebSocket connection  
by running through the following steps:

Send a 0xFF byte and a 0x00 byte to the client to indicate the start of  
the closing handshake.

Wait until the client terminated flag has been set, or until a  
server-defined timeout expires.

Close the WebSocket connection.
]]

I'm confused at this point how the closing handshake is supposed to work.

[[
Once these steps have started, the server must not send any further data  
to the server. The 0xFF 0x00 bytes indicate the end of the server's data,  
and further bytes will be discarded by the client.
]]

s/to the server/to the client/

-- 
Simon Pieters
Opera Software
</PRE>







<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026105.html">[whatwg] Should default styles for h1-h6 match the outlining algorithm?
</A></li>
	<LI>Next message: <A HREF="026110.html">[whatwg] The real issue with HTML5's sectioning model (was:	&quot;Headings and sections,	role of H2-H6&quot; and &quot;Should default styles for h1-h6 match the	outlining algorithm?&quot;)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26107">[ date ]</a>
              <a href="thread.html#26107">[ thread ]</a>
              <a href="subject.html#26107">[ subject ]</a>
              <a href="author.html#26107">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
