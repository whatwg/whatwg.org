<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Workers: What can be done in a worker after call to	close()?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Workers%3A%20What%20can%20be%20done%20in%20a%20worker%20after%20call%20to%0A%09close%28%29%3F&In-Reply-To=%3Ct2z63df84f1004011649k4278d75ct44e7ab46e91cbe1%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025765.html">
   <LINK REL="Next"  HREF="025767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Workers: What can be done in a worker after call to	close()?</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Workers%3A%20What%20can%20be%20done%20in%20a%20worker%20after%20call%20to%0A%09close%28%29%3F&In-Reply-To=%3Ct2z63df84f1004011649k4278d75ct44e7ab46e91cbe1%40mail.gmail.com%3E"
       TITLE="[whatwg] Workers: What can be done in a worker after call to	close()?">jonas at sicking.cc
       </A><BR>
    <I>Thu Apr  1 16:49:51 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025765.html">[whatwg] Workers: What can be done in a worker after call to	close()?
</A></li>
        <LI>Next message: <A HREF="025767.html">[whatwg] Workers: What can be done in a worker after call to	close()?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25766">[ date ]</a>
              <a href="thread.html#25766">[ thread ]</a>
              <a href="subject.html#25766">[ subject ]</a>
              <a href="author.html#25766">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Apr 1, 2010 at 4:40 PM, Drew Wilson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">atwilson at google.com</A>&gt; wrote:
&gt;<i> How does the GC-initiated close() event work in Firefox, in the case of a
</I>&gt;<i> fire-and-forget worker?
</I>&gt;<i> For example:
</I>&gt;<i> foo.html:
</I>&gt;<i> &lt;script&gt;
</I>&gt;<i> new Worker(&quot;forget.js&quot;);
</I>&gt;<i> &lt;/script&gt;
</I>&gt;<i> forget.js:
</I>&gt;<i> self.setInterval(function() { ...do something...}, 1000);
</I>&gt;<i> In this case, it seems incorrect to ever fire a close() event until the
</I>&gt;<i> parent window leaves the bfcache.&#160;I'm guessing you must do something to
</I>&gt;<i> prevent the worker object from being GC'd in the case that there's pending
</I>&gt;<i> activity in the worker?
</I>
Indeed, such a worker would never be GC'd. Similarly a worker that
simply contains a infinite while(1) {} loop, or a worker that
continuously starts XHR requests at the end of the previous XHR
requests.

This isn't really related to the 'close' event though, but rather
worker lifetime.

The 'close' event would still fire at some point. Either if someone
calls terminate() from the outside, or once the user navigates away
from the page that started the worker.

/ Jonas
</PRE>




<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025765.html">[whatwg] Workers: What can be done in a worker after call to	close()?
</A></li>
	<LI>Next message: <A HREF="025767.html">[whatwg] Workers: What can be done in a worker after call to	close()?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25766">[ date ]</a>
              <a href="thread.html#25766">[ thread ]</a>
              <a href="subject.html#25766">[ subject ]</a>
              <a href="author.html#25766">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
