<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSocket bufferedAmount includes overhead or not
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20bufferedAmount%20includes%20overhead%20or%20not&In-Reply-To=%3Cx2r63df84f1004021043h577187cx2134dde304bf2c0e%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068044.html">
   <LINK REL="Next"  HREF="068161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSocket bufferedAmount includes overhead or not</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSocket%20bufferedAmount%20includes%20overhead%20or%20not&In-Reply-To=%3Cx2r63df84f1004021043h577187cx2134dde304bf2c0e%40mail.gmail.com%3E"
       TITLE="[whatwg] WebSocket bufferedAmount includes overhead or not">jonas at sicking.cc
       </A><BR>
    <I>Fri Apr  2 10:43:57 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="068044.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
        <LI>Next message: <A HREF="068161.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68060">[ date ]</a>
              <a href="thread.html#68060">[ thread ]</a>
              <a href="subject.html#68060">[ subject ]</a>
              <a href="author.html#68060">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Apr 1, 2010 at 8:15 PM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:
&gt;<i> On 3/31/10 6:57 PM, Jonas Sicking wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I would expect that send() is allowed to start streaming data over the
</I>&gt;&gt;<i> network as soon as it can, but only update bufferedAmount from the
</I>&gt;&gt;<i> event loop.
</I>&gt;<i>
</I>&gt;<i> Maybe I'm not being clear. &#160;Let's say bufferedAmount were to reflect the
</I>&gt;<i> number of UTF-8-encoded bytes to be sent, for the sake of argument.
</I>&gt;<i>
</I>&gt;<i> I wait until bufferedAmount is 0, then call send(&quot;My text&quot;).
</I>&gt;<i>
</I>&gt;<i> What are possible values of bufferedAmount if I examine it right after the
</I>&gt;<i> send() call? &#160;Is 0 a valid possible value? &#160;What about 1? &#160;2? 3? 4? 5? 6? 7?
</I>&gt;<i>
</I>&gt;<i> Presumably the value will be somewhere in the integer range [0,7], right?
</I>&gt;<i> &#160;Or will it always be 7 after that call in that situation?
</I>
In order to archive maximum interoperability and predictability I
think it should always be 7. So bufferedAmount is always adjusted
synchronously upwards by the length of the sent message by send(), and
always adjusted downwards from events posted to the main event loop.

Though it's possible that this is overengineering given how people are
likely to use bufferedAmount. Interested to hear opinions.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068044.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
	<LI>Next message: <A HREF="068161.html">[whatwg] WebSocket bufferedAmount includes overhead or not
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68060">[ date ]</a>
              <a href="thread.html#68060">[ thread ]</a>
              <a href="subject.html#68060">[ subject ]</a>
              <a href="author.html#68060">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
