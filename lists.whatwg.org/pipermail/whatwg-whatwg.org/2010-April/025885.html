<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebSockets: origin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSockets%3A%20origin&In-Reply-To=%3Cop.vat24gfxidj3kv%40simon-pieterss-macbook.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025884.html">
   <LINK REL="Next"  HREF="025893.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebSockets: origin</H1>
<!--htdig_noindex-->
    <B>Simon Pieters</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebSockets%3A%20origin&In-Reply-To=%3Cop.vat24gfxidj3kv%40simon-pieterss-macbook.local%3E"
       TITLE="[whatwg] WebSockets: origin">simonp at opera.com
       </A><BR>
    <I>Thu Apr  8 00:58:54 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025884.html">[whatwg] Image Collision Detection in Canvas
</A></li>
        <LI>Next message: <A HREF="025893.html">[whatwg] Drag-and-drop feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25885">[ date ]</a>
              <a href="thread.html#25885">[ thread ]</a>
              <a href="subject.html#25885">[ subject ]</a>
              <a href="author.html#25885">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>WebSockets constructor:

[[
4. Let origin be the ASCII serialization of the origin of the script that  
invoked the WebSocket() constructor, converted to ASCII lowercase.
...
6. Establish a WebSocket connection...
]]

which says

[[
13. Add the string consisting of the concatenation of the string  
&quot;Origin:&quot;, a U+0020 SPACE character, and the origin value, converted to  
ASCII lowercase, to fields.
...
41. ...
If the entry's name is &quot;sec-websocket-origin&quot;
If the value is not exactly equal to origin, converted to ASCII lowercase,  
then fail the WebSocket connection and abort these steps. [ORIGIN]
]]

Isn't it enough to convert it to lowercase once, in the constructor?


Sending the server's opening handshake says

[[
origin
The ASCII serialization of the origin that the server is willing to  
communicate with. If the server can respond to requests from multiple  
origins (or indeed, all origins), then the value should be derived from  
the client's handshake, specifically from the &quot;Origin&quot; field. [ORIGIN]
]]

Shouldn't the server convert the origin to lowercase if that's the format  
the client expects? Or should the client accept case-insensitive origin  
instead?

-- 
Simon Pieters
Opera Software
</PRE>






































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025884.html">[whatwg] Image Collision Detection in Canvas
</A></li>
	<LI>Next message: <A HREF="025893.html">[whatwg] Drag-and-drop feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25885">[ date ]</a>
              <a href="thread.html#25885">[ thread ]</a>
              <a href="subject.html#25885">[ subject ]</a>
              <a href="author.html#25885">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
