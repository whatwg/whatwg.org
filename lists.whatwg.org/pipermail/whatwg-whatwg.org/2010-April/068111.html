<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Directory%20upload%20via%20%3Cinput%20type%3D%22file%22%20directory%3E&In-Reply-To=%3C1270590017.13157.54.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068110.html">
   <LINK REL="Next"  HREF="068133.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;</H1>
<!--htdig_noindex-->
    <B>Ashley Sheridan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Directory%20upload%20via%20%3Cinput%20type%3D%22file%22%20directory%3E&In-Reply-To=%3C1270590017.13157.54.camel%40localhost%3E"
       TITLE="[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;">ash at ashleysheridan.co.uk
       </A><BR>
    <I>Tue Apr  6 14:40:17 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="068110.html">[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
</A></li>
        <LI>Next message: <A HREF="068133.html">[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68111">[ date ]</a>
              <a href="thread.html#68111">[ thread ]</a>
              <a href="subject.html#68111">[ subject ]</a>
              <a href="author.html#68111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 2010-04-06 at 14:28 -0700, John Gregg wrote:

&gt;<i> The most relevant issue is that in Windows/Mac/Linux, there are no
</I>&gt;<i> system dialogs that let the user select either a folder or a file.
</I>&gt;<i>  They each have separate &quot;choose a file&quot; and &quot;choose a folder&quot;
</I>&gt;<i> dialogs.  I think the logical reason for that is that when selecting a
</I>&gt;<i> file, clicking a directory means to enter that directory and select
</I>&gt;<i> from its files, not to choose that directory as the result of
</I>&gt;<i> selection.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thus we would force UAs to reinvent file-picker interfaces in order to
</I>&gt;<i> deal with an input element that allows both folders and files.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  -John
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Tue, Apr 6, 2010 at 2:18 PM, Ojan Vafai &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ojan at chromium.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>         It's unfortunate that users need to distinguish between single
</I>&gt;<i>         and multiple file inputs. That's not something we can change
</I>&gt;<i>         at this point. The web started with single file inputs. We can
</I>&gt;<i>         avoid adding a third type of file input they need to
</I>&gt;<i>         understand though.
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         Also, what should happen if you drag files and folders onto a
</I>&gt;<i>         &quot;multiple&quot; or &quot;directory&quot; input? Just drop the ones that are
</I>&gt;<i>         of the wrong type? I cannot imagine users making sense of
</I>&gt;<i>         that.
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         It's not clear to me from your original email what issues you
</I>&gt;<i>         encountered during implementation that led to this proposal.
</I>&gt;<i>         Is it just the leaf name conflict issue? I agree that's a
</I>&gt;<i>         problem, but maybe there's a different solution to that?
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         Ojan
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         On Tue, Apr 6, 2010 at 12:53 PM, John Gregg
</I>&gt;<i>         &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">johnnyg at google.com</A>&gt; wrote:
</I>&gt;<i>         
</I>&gt;<i>                 That's a fair question, but how is it clear today
</I>&gt;<i>                 whether an input can accept multiple files vs. a
</I>&gt;<i>                 single file using drag-and-drop?  Currently if I drag
</I>&gt;<i>                 multiple files onto an input that doesn't have
</I>&gt;<i>                 'multiple', I get only the first one.  (In Chrome.)
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 Some good default text from the UA, like &quot;Choose
</I>&gt;<i>                 folder...&quot; instead of &quot;Choose file...&quot;, would go far
</I>&gt;<i>                 to solve that, I think.
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                  -John
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 
</I>&gt;<i>                 On Tue, Apr 6, 2010 at 12:38 PM, Ojan Vafai
</I>&gt;<i>                 &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ojan at chromium.org</A>&gt; wrote:
</I>&gt;<i>                 
</I>&gt;<i>                         What about drag-drop? I should be able to drag
</I>&gt;<i>                         a directory, a file, or a list of files onto
</I>&gt;<i>                         an input, no? If not, how is this distinction
</I>&gt;<i>                         shown to users? How will it be clear to users
</I>&gt;<i>                         when they can do one or the other?
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         Ojan
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         
</I>&gt;<i>                         On Thu, Apr 1, 2010 at 3:53 PM, John Gregg
</I>&gt;<i>                         &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">johnnyg at google.com</A>&gt; wrote:
</I>&gt;<i>                         
</I>&gt;<i>                                 For context, Ian Fette started a
</I>&gt;<i>                                 thread about uploading directories of
</I>&gt;<i>                                 files in
</I>&gt;<i>                                 December: <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2009-December/024455.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2009-December/024455.html</A> 
</I>&gt;<i>                                 
</I>&gt;<i>                                 At that time, it was thought that
</I>&gt;<i>                                 directory upload could be implemented
</I>&gt;<i>                                 by a UA in response to a &lt;input
</I>&gt;<i>                                 type=&quot;file&quot; multiple&gt; tag using
</I>&gt;<i>                                 different UI only, and modifying the
</I>&gt;<i>                                 FileAPI spec to allow path information
</I>&gt;<i>                                 in the form
</I>&gt;<i>                                 
</I>&gt;<i>                                 input.files[0].name=&quot;1.jpg&quot;
</I>&gt;<i>                                 input.files[0].path=&quot;a&quot;
</I>&gt;<i>                                 input.files[1].name=&quot;2.jpg&quot;
</I>&gt;<i>                                 input.files[1].path=&quot;a/b&quot;
</I>&gt;<i>                                 input.files[2].name=&quot;3.jpg&quot;
</I>&gt;<i>                                 input.files[2].path=&quot;a/c&quot;
</I>&gt;<i>                                 
</I>&gt;<i>                                 I've started developing a prototype of
</I>&gt;<i>                                 this in WebKit/Chromium.  Based on
</I>&gt;<i>                                 what I've encountered so far, I would
</I>&gt;<i>                                 like to propose adding directory
</I>&gt;<i>                                 upload functionality using an explicit
</I>&gt;<i>                                 new 'directory' attribute on the file
</I>&gt;<i>                                 input element. 
</I>&gt;<i>                                 
</I>&gt;<i>                                 
</I>&gt;<i>                                 
</I>&gt;<i>                                 The existing behavior of &lt;input
</I>&gt;<i>                                 type=&quot;file&quot; multiple&gt; would not
</I>&gt;<i>                                 change, but when processing &lt;input
</I>&gt;<i>                                 type=&quot;file&quot; directory&gt;, the UA would
</I>&gt;<i>                                 display a directory selection UI and
</I>&gt;<i>                                 store the path information, and not
</I>&gt;<i>                                 allow individual files to be
</I>&gt;<i>                                 selected.  It would allow multiple
</I>&gt;<i>                                 files to have the same leaf name
</I>&gt;<i>                                 (.name attribute), as long as the
</I>&gt;<i>                                 paths were different.  The path
</I>&gt;<i>                                 attributes would include the name of
</I>&gt;<i>                                 the chosen directory 
</I>&gt;<i>                                 
</I>&gt;<i>                                 This would be preferable for several
</I>&gt;<i>                                 reasons:
</I>&gt;<i>                                  - Most built-in file system UI on
</I>&gt;<i>                                 major platforms (Windows/Mac/Linux)
</I>&gt;<i>                                 have distinct dialogs for choosing
</I>&gt;<i>                                 files and choosing directories.
</I>&gt;<i>                                  Allowing the UA to use these directly
</I>&gt;<i>                                 makes sense rather than creating
</I>&gt;<i>                                 hybrids.
</I>&gt;<i>                                  - Avoiding &quot;leaf name&quot; conflicts in a
</I>&gt;<i>                                 directory tree is not feasible in many
</I>&gt;<i>                                 applications -- asking a user to
</I>&gt;<i>                                 ensure unique photo names in a large
</I>&gt;<i>                                 set of albums before uploading would
</I>&gt;<i>                                 fail to meet that use case.  Therefore
</I>&gt;<i>                                 HTML documents should know in advance
</I>&gt;<i>                                 whether the path information will be
</I>&gt;<i>                                 relevant in the eventual storage of
</I>&gt;<i>                                 the files.  Sites currently using
</I>&gt;<i>                                 &lt;input type=&quot;file&quot; multiple&gt; would
</I>&gt;<i>                                 have compatibility problems with an
</I>&gt;<i>                                 implementation which allowed
</I>&gt;<i>                                 conflicting file names along different
</I>&gt;<i>                                 paths.
</I>&gt;<i>                                 
</I>&gt;<i>                                 
</I>&gt;<i>                                 What are your thoughts about adding
</I>&gt;<i>                                 the 'directory' attribute?
</I>&gt;<i>                                 
</I>&gt;<i>                                 
</I>&gt;<i>                                 Thanks,
</I>&gt;<i>                                  -John
</I>
It gets even more complex than that; in Linux, the various different
window managers generally tend to have their own way of doing things, so
you have Gnome, KDE, etc as well to deal with.

Plus, you can get KDE on Windows too, so it's potentially an issue there
as well.

Thanks,
Ash
<A HREF="http://www.ashleysheridan.co.uk">http://www.ashleysheridan.co.uk</A>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100406/6694759f/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100406/6694759f/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068110.html">[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
</A></li>
	<LI>Next message: <A HREF="068133.html">[whatwg] Directory upload via &lt;input type=&quot;file&quot; directory&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68111">[ date ]</a>
              <a href="thread.html#68111">[ thread ]</a>
              <a href="subject.html#68111">[ subject ]</a>
              <a href="author.html#68111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
