<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] The Offline Application Cache system feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20The%20Offline%20Application%20Cache%20system%20feedback&In-Reply-To=%3CPine.LNX.4.62.0805070745350.21650%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014714.html">
   <LINK REL="Next"  HREF="014716.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] The Offline Application Cache system feedback</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20The%20Offline%20Application%20Cache%20system%20feedback&In-Reply-To=%3CPine.LNX.4.62.0805070745350.21650%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] The Offline Application Cache system feedback">ian at hixie.ch
       </A><BR>
    <I>Wed May  7 17:41:13 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="014714.html">[whatwg] HTML4's profile=&quot;&quot; attribute's absence in HTML5
</A></li>
        <LI>Next message: <A HREF="014716.html">[whatwg]  fullscreen event?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14715">[ date ]</a>
              <a href="thread.html#14715">[ thread ]</a>
              <a href="subject.html#14715">[ subject ]</a>
              <a href="author.html#14715">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 19 Mar 2008, Anders Carlsson wrote:
&gt;<i>
</I>&gt;<i> The text:
</I>&gt;<i> 
</I>&gt;<i> A browsing context can be associated with an application cache. A child 
</I>&gt;<i> browsing context is always associated with the same browsing context as 
</I>&gt;<i> its parent browsing context, if any.
</I>&gt;<i> 
</I>&gt;<i> should be:
</I>&gt;<i> 
</I>&gt;<i> A browsing context can be associated with an application cache. A child 
</I>&gt;<i> browsing context is always associated with the same *application cache* 
</I>&gt;<i> as its parent browsing context, if any.
</I>
Oops. Fixed.


On Thu, 20 Mar 2008, Anders Carlsson wrote:
&gt;<i>
</I>&gt;<i> &quot;If there is already an application cache identified by this manifest 
</I>&gt;<i> URI, and that application cache contains a resource with the URI of the 
</I>&gt;<i> manifest, and that resource is categorised as a manifest, then: store 
</I>&gt;<i> the resource in the matching cache with the most up to date version, 
</I>&gt;<i> categorised as an implicit entry, associate the Document with that 
</I>&gt;<i> cache, invoke the application cache update process, and abort these 
</I>&gt;<i> steps.&quot;
</I>&gt;<i> 
</I>&gt;<i> as well as
</I>&gt;<i> 
</I>&gt;<i> &quot;If there is already an application cache identified by this manifest 
</I>&gt;<i> URI, then that application cache does not yet contain a resource with 
</I>&gt;<i> the URI of the manifest, or it does but that resource is not yet 
</I>&gt;<i> categorised as a manifest: store the resource in that cache, categorised 
</I>&gt;<i> as an implicit entry (replacing the file's previous contents if it was 
</I>&gt;<i> already in the cache, but not removing any other categories it might 
</I>&gt;<i> have), and abort these steps.&quot;
</I>&gt;<i> 
</I>&gt;<i> need to clarify that the cache needs to be the most recently updated 
</I>&gt;<i> cache in the group.
</I>
Fixed.


On Fri, 21 Mar 2008, Anders Carlsson wrote:
&gt;<i>
</I>&gt;<i> Resources that were listed in the cache's manifest. Explicit entries can 
</I>&gt;<i> also be marked as foreign, which means that they have an manifest 
</I>&gt;<i> attribute but that it doesn't point at this cache's manifest.
</I>&gt;<i> 
</I>&gt;<i> an manifest =&gt; a manifest
</I>
Fixed.


On Fri, 21 Mar 2008, Alexey Proskuryakov wrote:
&gt;<i> 
</I>&gt;<i> &gt; The user agent must decode the bytestream corresponding with the 
</I>&gt;<i> &gt; manifest to be parsed, treating it as UTF-8. Bytes or sequences of 
</I>&gt;<i> &gt; bytes that are not valid UTF-8 sequences must be interpreted as a 
</I>&gt;<i> &gt; U+FFFD REPLACEMENT CHARACTER. All U+0000 NULL characters must be 
</I>&gt;<i> &gt; replaced by U+FFFD REPLACEMENT CHARACTERs
</I>&gt;<i> 
</I>&gt;<i>   The requirement to replace NULL characters with U+FFFD appears to be 
</I>&gt;<i> non-verifiable, as the effect of preserving NULLs is the same (an URL is 
</I>&gt;<i> treated as invalid).
</I>&gt;<i> 
</I>&gt;<i>   I think it would be better to omit this requirement, as it is just a 
</I>&gt;<i> disguised and somewhat misguiding warning about the perils of NULLs in 
</I>&gt;<i> strings (usually in C-style strings). At least for WebKit, I expect that 
</I>&gt;<i> it would be safer and easier to avoid such problems without introducing 
</I>&gt;<i> a new decoder mode just for manifests.
</I>
Commented it out.


On Fri, 4 Apr 2008, Anders Carlsson wrote:
&gt;<i>
</I>&gt;<i> From section 4.6.6:
</I>&gt;<i> 
</I>&gt;<i> The item(index) method must return the dynamic entries with index index 
</I>&gt;<i> from the application cache, if one is associated with 
</I>&gt;<i> theApplicationCache object.
</I>&gt;<i> 
</I>&gt;<i> &quot;entries&quot; should be &quot;entry&quot;.
</I>
Fixed.


&gt;<i> Also, it should be clarified that the item returns the uri of the entry.
</I>
Fixed.


On Tue, 8 Apr 2008, Anders Carlsson wrote:
&gt;<i>
</I>&gt;<i> The spec for the add and remove ApplicationCache methods does not say 
</I>&gt;<i> what to do about how relative URIs should be resolved.
</I>&gt;<i> 
</I>&gt;<i> I think it would be most intuitive to resolve them agains't the URI o 
</I>&gt;<i> the document that the ApplicationCache object is associated with.
</I>
I've added an issue marker in the spec to deal with this. I want to deal 
with all the places that resolve relative URLs at the same time.


On Tue, 8 Apr 2008, Jeff Walden wrote:
&gt;<i> 
</I>&gt;<i> Generally I believe URIs have been resolved against the URI of the 
</I>&gt;<i> document that the script that invoked the method is associated with.  
</I>&gt;<i> For example, if I have origin A and pages A_1 and A_2, a script on A_1 
</I>&gt;<i> that uses, say, A_2.XMLHttpRequest.open with a relative URI will have 
</I>&gt;<i> that URI resolved against A_1.location.href.  Similar precedent applies 
</I>&gt;<i> to loading scripts or iframes, calculating the sender's URI for events 
</I>&gt;<i> dispatched by postMessage, and other such uses.  Think of it this way: a 
</I>&gt;<i> relative URI used from script is &quot;lexically&quot; scoped to the document that 
</I>&gt;<i> loaded the script, and any relative URIs used have the same semantics 
</I>&gt;<i> any time that code executes -- they're not dependent on the location of 
</I>&gt;<i> the document associated with the ApplicationCache, which might or might 
</I>&gt;<i> not be what you actually expected it to be at runtime.
</I>&gt;<i> 
</I>&gt;<i> What you suggest goes against a lot of precedent, from my point of view.  
</I>&gt;<i> If only for consistency, I think we're better off making relative URIs 
</I>&gt;<i> be lexically scoped such that they're resolved against the location of 
</I>&gt;<i> the document in which the script is executed.
</I>
Yeah, I want everything consistent here.


On Thu, 17 Apr 2008, Anders Carlsson wrote:
&gt;<i> 
</I>&gt;<i> I think an exception should be thrown when ApplicationCache add/remove 
</I>&gt;<i> is called with invalid URLs. Something like
</I>&gt;<i> 
</I>&gt;<i> &quot;If uri is not valid, raise an SYNTAX_ERR exception and abort these 
</I>&gt;<i> steps.&quot;
</I>
Added for add(); for remove() I'd rather just silently fail since that's 
what we do if the URI isn't there. Otherwise authors might get caught 
between UA bugs where they can add something they can't remove, etc, 
depending on what's going on. It's always annoying when you can see 
something but can't remove it.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014714.html">[whatwg] HTML4's profile=&quot;&quot; attribute's absence in HTML5
</A></li>
	<LI>Next message: <A HREF="014716.html">[whatwg]  fullscreen event?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14715">[ date ]</a>
              <a href="thread.html#14715">[ thread ]</a>
              <a href="subject.html#14715">[ subject ]</a>
              <a href="author.html#14715">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
