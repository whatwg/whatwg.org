<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebIDL vs HTML5 storage changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebIDL%20vs%20HTML5%20storage%20changes&In-Reply-To=%3CPine.LNX.4.62.0805202009250.12907%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="057135.html">
   <LINK REL="Next"  HREF="057138.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebIDL vs HTML5 storage changes</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebIDL%20vs%20HTML5%20storage%20changes&In-Reply-To=%3CPine.LNX.4.62.0805202009250.12907%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] WebIDL vs HTML5 storage changes">ian at hixie.ch
       </A><BR>
    <I>Tue May 20 14:00:28 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="057135.html">[whatwg] WebIDL vs HTML5 storage changes
</A></li>
        <LI>Next message: <A HREF="057138.html">[whatwg] WebIDL vs HTML5 storage changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57137">[ date ]</a>
              <a href="thread.html#57137">[ thread ]</a>
              <a href="subject.html#57137">[ subject ]</a>
              <a href="author.html#57137">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, 19 May 2008, Maciej Stachowiak wrote:
&gt;<i> On May 19, 2008, at 4:54 PM, Robert O'Callahan wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; If &quot;storage.keyName = 'value';&quot; can create a new storage item 
</I>&gt;<i> &gt; (persistently), won't authors expect &quot;delete storage.keyName;&quot; to 
</I>&gt;<i> &gt; remove it (persistently), as a matter of consistency?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If overloading &quot;delete&quot; is too quirky or too hard to implement, then 
</I>&gt;<i> &gt; it seems none of the other shorthands should be allowed either.
</I>&gt;<i> 
</I>&gt;<i> Many objects in the DOM implement custom name getters (for instance 
</I>&gt;<i> NodeList) and a few even implement custom name setters 
</I>&gt;<i> (CSSStyleDeclaration, at least the way it is done in WebKit) but no one 
</I>&gt;<i> has clamored for a custom deleter or expected delete to work &quot;as a 
</I>&gt;<i> matter of consistency&quot; or been confused that &quot;style.opacity = 0&quot; is 
</I>&gt;<i> allowed but &quot;delete style.opacity&quot; is not. So I would say the available 
</I>&gt;<i> evidence argues against your conclusions.
</I>
The difference is that &quot;style.opacity = 0&quot; doesn't remove &quot;opacity&quot; from 
the &quot;style&quot; object but &quot;storage.removeItem('opacity')&quot; _does_ remove 
&quot;opacity&quot; from the &quot;storage&quot; object.

Originally, I wanted Storage objects to be indistinguishable from Object 
objects in JS, and native hash or collection objects in other bindings. 
Conceptually, that's what these objects are -- native name/value pair 
collections that happen to be mapped to non-volatile storage (or somewhat- 
volatile storage, in the case of sessionStorage).

I'd also like the &quot;delete&quot; operator to work on DOMStringMap (for the 
dataset object -- calling 'delete' on that has the side-effect of removing 
the underlying attribute) and UndoManager (where the side-effect is to 
remove the entry and renumber the following entries, so maybe that's not 
such a good idea after all), for what it's worth. If we want to decide 
that we're not supporting this, we should decide that before 
implementations of those come about.

For DOMStringMap, my intention was to not provide methods at all, and only 
provide the JS-native mechanisms.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="057135.html">[whatwg] WebIDL vs HTML5 storage changes
</A></li>
	<LI>Next message: <A HREF="057138.html">[whatwg] WebIDL vs HTML5 storage changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57137">[ date ]</a>
              <a href="thread.html#57137">[ thread ]</a>
              <a href="subject.html#57137">[ subject ]</a>
              <a href="author.html#57137">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
