<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Suggested changes to Web Forms 2.0,	2004-07-01 working
	draft
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20Suggested%20changes%20to%20Web%20Forms%202.0%2C%092004-07-01%20working%0A%09draft&In-Reply-To=0A890C81-CE54-11D8-A10F-000A95AD3972%40myrealbox.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001109.html">
   <LINK REL="Next"  HREF="001046.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Suggested changes to Web Forms 2.0,	2004-07-01 working
	draft</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20Suggested%20changes%20to%20Web%20Forms%202.0%2C%092004-07-01%20working%0A%09draft&In-Reply-To=0A890C81-CE54-11D8-A10F-000A95AD3972%40myrealbox.com"
       TITLE="[whatwg] Suggested changes to Web Forms 2.0,	2004-07-01 working
	draft">ian at hixie.ch
       </A><BR>
    <I>Tue Jul  6 18:30:29 PDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001109.html">[whatwg] Suggested changes to Web Forms 2.0,	2004-07-01 working
</A></li>
        <LI>Next message: <A HREF="001046.html">[whatwg] Suggested changes to Web Forms 2.0,	2004-07-01 working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1005">[ date ]</a>
              <a href="thread.html#1005">[ thread ]</a>
              <a href="subject.html#1005">[ subject ]</a>
              <a href="author.html#1005">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
Comments I agreed with were addressed without further comment.

Editorial comments that I disagreed with were ignored without further
comment. (In general I prefer not to make editorial changes, especially to
normative parts of the spec, because in my experience &quot;harmless&quot; editorial
changes have a habbit of breaking things without anyone noticing.)

Substantive comments that I disagreed with are discussed below.

Thanks for your input!


On Mon, 5 Jul 2004, Matthew Thomas wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; *   Ease of authoring for authors with limited knowledge
</I>&gt;<i> &gt;     about XML, data models, etc, but familiar with
</I>&gt;<i> &gt;     commonly used languages such as HTML and ECMAScript.
</I>&gt;<i>
</I>&gt;<i> 5.  Error: Mismatched tense. Either:
</I>&gt;<i>      *   &quot;with limited&quot; --&gt; &quot;who have limited&quot; and
</I>&gt;<i>          &quot;but familiar&quot; --&gt; &quot;but who are familiar&quot;
</I>&gt;<i>      *   &quot;familiar with&quot; --&gt; &quot;good knowledge of&quot;
</I>
Disagree.


&gt;<i> &gt; *   Basic data typing, providing new controls for commonly
</I>&gt;<i> &gt;     used types so that authors do not need to repeatedly
</I>&gt;<i> &gt;     design complicated widgets such as calendars.
</I>&gt;<i>
</I>&gt;<i> 6.  Suggestion: Use more standard terminology.
</I>&gt;<i>      *   &quot;widgets&quot; --&gt; &quot;controls&quot; throughout the spec
</I>&gt;<i>      *   &quot;widget&quot; --&gt; &quot;control&quot; throughout the spec
</I>
Disagree. The words are used so often that I need some variety.


&gt;<i> &gt; This specification aims to simplify the task of  transforming XForms
</I>&gt;<i> &gt; 1.0 systems into documents that can be rendered on every day Web
</I>&gt;<i> &gt; browsers.
</I>&gt;<i>
</I>&gt;<i> 12. Error: &quot;This specification&quot; unavoidably refers to the
</I>&gt;<i>      specification mentioned two sentences previously, which
</I>&gt;<i>      is XForms 1.0, which is not what you mean.
</I>&gt;<i>      *   &quot;This specification&quot; --&gt; &quot;Web Forms 2.0&quot;
</I>
If you can find a way of phrasing that that doesn't require using the name
of the spec, that would be great. I'm trying to reduce the churn that I
will have to do if the spec changes name (again).



&gt;<i> &gt; 1.5 Missing features
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; *   Elements or properties to create a &quot;tabbed&quot; or
</I>&gt;<i> &gt;     &quot;wizard&quot; interface. This need will be addressed in a
</I>&gt;<i> &gt;     separate specification.
</I>&gt;<i>
</I>&gt;<i> 15. Error: Tabbed interfaces and &quot;wizard&quot; interfaces are
</I>&gt;<i>      not, and have never been, the same or even related.
</I>&gt;<i>      *   'a &quot;tabbed&quot; or &quot;wizard&quot; interface. This need' --&gt;
</I>&gt;<i>          'tabbed interfaces or &quot;wizard&quot; interfaces. These
</I>&gt;<i>          needs'
</I>
Actually they very much are related from a structural point of view. Both
represents sets of sections only one of which can be visible at any one
time. But fair enough.


&gt;<i> &gt; 1.6. Conformance  requirements
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; Implementations that do not support scripting (or which have their
</I>&gt;<i> &gt; scripting features disabled) are exempt from supporting the events and
</I>&gt;<i> &gt; DOM interfaces mentioned in this specification.
</I>&gt;<i>
</I>&gt;<i> 19. Suggestion: Use RFC 2119 terminology.
</I>&gt;<i>      *   &quot;are exempt from supporting&quot; --&gt; &quot;may decline to
</I>&gt;<i>          support&quot;
</I>
This isn't an appropriate point for RFC2119. They don't have a choice
about declining to support -- if they don't support scripting then there
is no way they _can_ support the DOM interfaces.


&gt;<i> &gt; While user agents should support all possible values, there may be
</I>&gt;<i> &gt; implementation-specific limits.
</I>&gt;<i>
</I>&gt;<i> 21. Suggestion: Make the allowance more explicit.
</I>&gt;<i>      *   &quot;there may be implementation-specific limits.&quot; --&gt;
</I>&gt;<i>          &quot;they may impose limits if necessary.&quot;
</I>
Disagreed because this phraseology is pretty standard in specs.


&gt;<i> &gt; The form element is therefore allowed in the head element of XHTML
</I>&gt;<i> &gt; documents, although only when the form element is empty.
</I>&gt;<i>
</I>&gt;<i> 23. Error: &quot;Although&quot; can only introduce a complete clause, ...
</I>
Disagreed.


&gt;<i> 24. Suggestion:
</I>&gt;<i> <A HREF="http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-July/000875.html">http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-July/000875.html</A>
</I>
Reply:
<A HREF="http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-July/001003.html">http://listserver.dreamhost.com/pipermail/whatwg-whatwg.org/2004-July/001003.html</A>


&gt;<i> &gt;     A date and time (year, month, day, hour, minute,
</I>&gt;<i> &gt;     second, fractions of  a second) encoded according to
</I>&gt;<i> &gt;     [ISO8601] with the time zone set to UTC
</I>&gt;<i>
</I>&gt;<i> 25. Suggestion: The [ISO8601] citation key is used as text
</I>&gt;<i>      here, but other citation keys are not, even to the
</I>&gt;<i>      extent of writing &quot;the HTML4, XHTML1.1, DOM2 HTML, DOM3
</I>&gt;<i>      Core, and DOM3 Events specifications ([HTML4], [XHTML1],
</I>&gt;<i>      [DOM2HTML], [DOM3CORE], [DOM3EVENTS])&quot;. Pick a policy
</I>&gt;<i>      and stick with it.
</I>
Fixed to use the second where I saw it using the first.


&gt;<i> &gt; All the numbers must be in base ten and zero-padded if necessary.
</I>&gt;<i> &gt; e.g.: 1995-12-31T23:59:59.99Z
</I>&gt;<i>
</I>&gt;<i> 27. Error: Capitalization. Either:
</I>&gt;<i>      *   &quot;necessary. e.g.&quot; --&gt; &quot;necessary. E.g.&quot; throughout
</I>&gt;<i>          the spec
</I>&gt;<i>      *   &quot;necessary. e.g.&quot; --&gt; &quot;necessary, e.g.&quot; throughout
</I>&gt;<i>          the spec
</I>
Oops. e.g. should never start a sentence. That error was introduced during
other editorial changes.


&gt;&gt;<i> range
</I>&gt;&gt;<i>     Same as number, but indicates that the exact value is
</I>&gt;&gt;<i>     not important,
</I>&gt;<i>
</I>&gt;<i> 31. Suggestion: Either make this a separate &lt;scale&gt; element,
</I>&gt;<i>      or make its suggested presentation an *addition* to a
</I>&gt;<i>      text field rather than a replacement for it.
</I>
I don't understand what you mean by that.


&gt;<i>      I see three general use cases for this control.
</I>&gt;<i>
</I>&gt;<i>      A.  An author provides just a slider, and doesn't mind
</I>&gt;<i>          if it degrades to a text field. (Most uses.)
</I>&gt;<i>
</I>&gt;<i>      B.  An author provides a text field and a slider next to
</I>&gt;<i>          each other, for ease of input both with a keyboard
</I>&gt;<i>          and with a pointing device. (For example,
</I>&gt;<i>          colorpickers, size selectors, and image manipulation
</I>&gt;<i>          tools.)
</I>&gt;<i>
</I>&gt;<i>      C.  A game developer provides a slider, and does not
</I>&gt;<i>          want it to degrade to a text field because that
</I>&gt;<i>          would ruin the fun. (For example, she uses scripting
</I>&gt;<i>          to create a slider and then to oscillate its
</I>&gt;<i>          value, with a button for the player to click when
</I>&gt;<i>          the slider is as close to the value he wants as his
</I>&gt;<i>          hand-eye coordination will allow.)
</I>&gt;<i>
</I>&gt;<i>      The current syntax only satisfies case A. Case B doesn't
</I>&gt;<i>      work because in a non-WF2-supporting browser it will
</I>&gt;<i>      degrade to two text fields next to each other, which
</I>&gt;<i>      will be incomprehensible. And case C doesn't work
</I>&gt;<i>      because cheats can easily make it degrade, by using a UA
</I>&gt;<i>      (such as a current release of Opera) that doesn't
</I>&gt;<i>      support WF2 but does allow easy UA spoofing.
</I>
Case C can always be defeated; legacy UAs are just one of many ways to do
this. Whatever solution we pick. So case C isn't worth considering.

Case B is the case where the author wants a slider and is assuming
JavaScript will be available. If JS is available, then he can handle the
legacy case in JS (either by only creating the range control in WF2+JS
UAs, or removing it in non-WF2 UAs).

Case A is the current case and the one that I believe we should optimise
the design for.


&gt;<i>      If, instead, it was a &lt;scale&gt; container element:
</I>&gt;<i>      A.  would work by including an &lt;input type=&quot;text&quot;&gt;
</I>&gt;<i>          inside the &lt;scale&gt; element.
</I>
This makes the common case harder. Bad design.


&gt;<i>      | Log me out if I'm idle for:
</I>&gt;<i>      | &lt;scale id=&quot;expire&quot; valuewithunits=&quot;30m&quot; value=&quot;30&quot;
</I>&gt;<i>      | min=&quot;10&quot; max=&quot;180&quot;&gt;
</I>&gt;<i>      |    &lt;subscale min=&quot;10&quot; max=&quot;50&quot; step=&quot;10&quot; suffix=&quot;m&quot;
</I>&gt;<i>      |    value=&quot;minutes&quot; /&gt;
</I>&gt;<i>      |    &lt;subscale min=&quot;1&quot; max=&quot;3&quot; suffix=&quot;hrs&quot;
</I>&gt;<i>      |    suffixsingular=&quot;hr&quot; value=&quot;hours&quot; /&gt;
</I>&gt;<i>      |    &lt;extreme label=&quot;Never&quot; value=&quot;n&quot; /&gt;
</I>&gt;<i>      |    &lt;!-- degrade for WF1: --&gt;
</I>&gt;<i>      |    &lt;input id=&quot;expire-wf1&quot; value=&quot;30&quot; /&gt; minutes
</I>&gt;<i>      | &lt;/scale&gt;
</I>&gt;<i>      |
</I>&gt;<i>      which might appear in a Web-Forms-4-compliant UA as:
</I>&gt;<i>      |
</I>&gt;<i>      | Log me out if I'm idle for:
</I>&gt;<i>      |  ========V===========================
</I>&gt;<i>      |  '   '   '   '   '   '    '    '    '
</I>&gt;<i>      | 10m 20m 30m 40m 50m 1hr 2hrs 3hrs Never
</I>
Actually Web Forms 2.0 supports this today, with no changes, if the
server is willing to handle the scale itself:

   Log me out if I'm idle for:
   &lt;input name=&quot;expire&quot; type=&quot;range&quot; list=&quot;e&quot; min=&quot;0&quot; max=&quot;2&quot; value=&quot;0.4&quot;&gt;
   &lt;datalist id=&quot;e&quot;&gt;
    &lt;option value=&quot;0&quot; label=&quot;10m&quot;&gt;
    &lt;option value=&quot;0.2&quot; label=&quot;20m&quot;&gt;
    &lt;option value=&quot;0.4&quot; label=&quot;30m&quot;&gt;
    &lt;option value=&quot;0.6&quot; label=&quot;40m&quot;&gt;
    &lt;option value=&quot;0.8&quot; label=&quot;50m&quot;&gt;
    &lt;option value=&quot;1&quot; label=&quot;1hr&quot;&gt;
    &lt;option value=&quot;1.33&quot; label=&quot;2hrs&quot;&gt;
    &lt;option value=&quot;1.66&quot; label=&quot;3hrs&quot;&gt;
    &lt;option value=&quot;2&quot; label=&quot;Never&quot;&gt;
   &lt;/datalist&gt;

The server then just handles anything from 0.0 to 1.0 by multiplying it by
60 to get minutes, handles anything from 1.0 to 2.0 (exclusive) by
subtracting 1, dividing by 1/3, and adding 1 to get hours, and handles 2.0
as meaning &quot;Never&quot;.

Admittedly, that doesn't fallback very well when it comes to legacy UAs,
but then this autocompletion feature wasn't designed with this particular
sadistic use case in mind. :-)


&gt;<i> I know the famous Safari RSS slider doesn't have or want a text field;
</I>&gt;<i> but that's *part of a browser's own interface*, so I don't see any need
</I>&gt;<i> for it to be a Web Forms control to begin with.)
</I>
The &quot;famous Safari RSS slider&quot; is a very good example of a slider in a Web
App, and is an important use case that WHAT has to address.


Anyway. Disagreed; no change made to &quot;range&quot;. The arguments you put
forward are not enough to require that the existing implemenation(s) be
changed, and the current solution is good enough for the common use case.



&gt;&gt;<i> For instance, visual UAs may use a track bar control.
</I>&gt;<i>
</I>&gt;<i> 33. Suggestion: Use more standard terminology.
</I>&gt;<i>      *   &quot;track bar&quot; --&gt; &quot;slider&quot;
</I>
&quot;track bar&quot; is the control's name in the Win32 API. I'm not sure you can
get much more standard.


&gt;<i> &gt; By default, all of these new types, just like the types from HTML4,
</I>&gt;<i> &gt; must have no value selected, unless a default value is provided using
</I>&gt;<i> &gt; the value attribute.
</I>&gt;<i>
</I>&gt;<i> 36. Suggestion: *Please* remove this requirement, at least
</I>&gt;<i>      for the date-/time-related controls. I have never seen,
</I>&gt;<i>      in any graphical toolkit, a timepicker or datepicker
</I>&gt;<i>      control (or even a calendar control) that did not have a
</I>&gt;<i>      default value. I would be surprised if it was even
</I>&gt;<i>      possible without changing the toolkits' APIs. Even if it
</I>&gt;<i>      was possible, their inconsistency with other uses of
</I>&gt;<i>      such controls on the user's computer would make them
</I>&gt;<i>      look broken. And they would be unreasonably difficult to
</I>&gt;<i>      use without the keyboard, as there would be no starting
</I>&gt;<i>      values to increment or decrement.
</I>
Ok, so what default should they use?


&gt;<i> &gt; 2.1.1. Ranges
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; A field with a max less than its min can never be satisfied and thus
</I>&gt;<i> &gt; would block a form from being submitted.
</I>
Changed, but really this was just describing a logical consequence of
earlier statements and is thus redundant as a conformance requirement.


&gt;<i> &gt; 2.4. Extensions to the  textarea element
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The rows and cols attributes of the textarea element are no longer
</I>&gt;<i> &gt; required attributes. When unspecified, CSS-compliant browsers should
</I>&gt;<i> &gt; lay the element out as specified by CSS, and non-CSS UAs may use
</I>&gt;<i> &gt; UA-specific defaults, such as, for visual UAs, using the width of the
</I>&gt;<i> &gt; display device and a height suitable for the device.
</I>&gt;<i>
</I>&gt;<i> 41. Error: Since the viewport is almost always smaller than
</I>&gt;<i>      the device, this appears to suggest that visual UAs
</I>&gt;<i>      default to making a textarea larger than the viewport!
</I>&gt;<i>      *   &quot;width of the display device and&quot; --&gt; &quot;width of the
</I>&gt;<i>          parent element, and&quot;
</I>&gt;<i>      *   &quot;height suitable for the device&quot; --&gt; &quot;height less
</I>&gt;<i>          than those of the parent element and the viewport&quot;
</I>
The concepts of of &quot;width of the parent element&quot;, &quot;viewport&quot;, etc, are
rather specific to the CSS rendering model. I don't feel comfortable using
those terms for the non-CSS case.


&gt;<i> &gt; CSS UAs should render textarea elements as  specified by the
</I>&gt;<i> &gt; 'white-space' property, although UAs may have rules in their UA
</I>&gt;<i> &gt; stylesheet that key the default 'white-space'  property values based
</I>&gt;<i> &gt; on the wrap element for textarea elements.
</I>&gt;<i>
</I>&gt;<i> 42. Question: What is meant by &quot;key the ... values&quot;? How
</I>&gt;<i>      does a style sheet &quot;key a value&quot;?
</I>
s/key/set/.


&gt;<i> 45. Suggestion: Follow this by specifying robust error-
</I>&gt;<i>      -handling for when people stuff up specifying an accept
</I>&gt;<i>      attribute.
</I>&gt;<i>      *   'If an upload control or a form element has an
</I>&gt;<i>          invalid accept attribute, the value is assumed to be
</I>&gt;<i>          &quot;*/*&quot;. Such an attribute for a file upload control
</I>&gt;<i>          still overrides any accept attribute for the
</I>&gt;<i>          relevant form element.'
</I>&gt;<i>      (Why? Because the faulty value is much more likely to be
</I>&gt;<i>      the author's attempt at a non-specialization exception
</I>&gt;<i>      to the form's rule, than an attempt at a specialization.
</I>
I'm not convinced of your reasoning.

   &lt;form ... accept=&quot;image/*&quot;&gt;
    ... &lt;input type=&quot;file&quot; ... accept=&quot;image/png&quot;&gt;
    ... &lt;input type=&quot;file&quot; ... accept=&quot;image/gif&quot;&gt;
    ... &lt;input type=&quot;file&quot; ... accept=&quot;image\tiff&quot;&gt;
   &lt;/form&gt;

Do we really want to say that that last input control accepts audio/aiff?

Also, I really like the consistency of saying invalid attributes are
always ignored.


&gt;<i> &gt; 2.8. Extensions to existing  attributes
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; disabled
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt;     When applied to a fieldset element it overrides the
</I>&gt;<i> &gt;     disabled attributes of any descendent form controls
</I>&gt;<i> &gt;     (regardless of whether they are associated with the
</I>&gt;<i> &gt;     same form). In other words, a form control is disabled
</I>&gt;<i> &gt;     if it has its disabled attribute set, or if any of its
</I>&gt;<i> &gt;     ancestor fieldset elements have their disabled
</I>&gt;<i> &gt;     attribute set.
</I>&gt;<i>
</I>&gt;<i> 47. Question: If the disabled attribute can be applied to
</I>&gt;<i>      &lt;fieldset&gt; elements, why can't it be applied to &lt;form&gt;
</I>&gt;<i>      elements too?
</I>
Because nobody suggested it.

Do we really want that? It doesn't seem that useful. What's the use case?


&gt;<i> &gt; This attribute must not affect the initial value (the DOM defaultValue
</I>&gt;<i> &gt; attribute). It must only affect what the user may enter and whether a
</I>&gt;<i> &gt; validity error is flagged during validation.
</I>&gt;<i>
</I>&gt;<i> 49. Question: How should a UA behave if the initial value is
</I>&gt;<i>      longer than the maxlength?
</I>
This attribute must not affect the initial value (the DOM defaultValue
attribute). It must only affect what the user may enter and whether a
validity error is flagged during validation.


&gt;<i> 51. Suggestion: Add best behavior for UAs in minimizing
</I>&gt;<i>      errors.
</I>&gt;<i>      *   &quot;In addition to preventing submission of a form
</I>&gt;<i>          containing a field that does not match its pattern,
</I>&gt;<i>          a UA should:
</I>&gt;<i>          -   ignore entry of a character that is not allowed
</I>&gt;<i>              anywhere in the field's value
</I>&gt;<i>          -   instantly convert Latin characters to upper case
</I>&gt;<i>              or lower case if only one case is permitted
</I>&gt;<i>              throughout the field's value.&quot;
</I>&gt;<i>      (If necessary, use &quot;may&quot; instead of &quot;should&quot;.)
</I>
I don't want to go near that at this point. I've heard UI and i18n people
tell me that both of the things you just described are actually bad, and
in any case this spec is trying to keep away from the UI specifics.


&gt;<i> &gt;&gt; For example, the following snippet:
</I>&gt;<i> &gt;&gt;     &lt;label&gt; Part number:
</I>&gt;<i> &gt;&gt;      &lt;input pattern=&quot;[0-9][A-Z]{3}&quot; name=&quot;part&quot;
</I>&gt;<i> &gt;&gt;             title=&quot;The expected format is: a digit
</I>&gt;<i> &gt;&gt;             followed by three uppercase letters.&quot;/&gt;
</I>&gt;<i> &gt;&gt;     &lt;/label&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; ...could cause the UA to display an alert such as:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;     The text you have entered does not match the required
</I>&gt;<i> &gt;&gt;     pattern.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;     The expected format is: a digit followed by three
</I>&gt;<i> &gt;&gt;     uppercase letters.
</I>&gt;<i>
</I>&gt;<i> 52. Suggestion: Give authors (and UA implementors) an
</I>&gt;<i>      example that provides a much more pleasant experience.
</I>&gt;<i>      (My footnotes below are not part of the suggested
</I>&gt;<i>      replacement text.)
</I>
Disagreed, because your proposed text had too many issues:


&gt;<i>      *   'If focus is moved away from a control in which the
</I>&gt;<i>          user has entered an invalid value[1],
</I>
&gt;<i>      [1] Why not &quot;that contains an invalid value&quot;? Because if
</I>&gt;<i>          the default value (such as &quot;&quot;) is invalid, we don't
</I>&gt;<i>          want the form to turn into a sea of pink borders
</I>&gt;<i>          just from being tabbed through.
</I>
As described elsewhere, that wouldn't be invalid.


&gt;<i>          or if form
</I>&gt;<i>          submission is attempted while the field is invalid,
</I>&gt;<i>          a visual UA may highlight the field in some way.[2]
</I>
&gt;<i>      [2] Why not display the error as soon as focus leaves
</I>&gt;<i>          the field? Because I may be temporarily focusing
</I>&gt;<i>          somewhere else to copy (or refer to) text to put in
</I>&gt;<i>          the field.
</I>
The error handling behaviour is described later. The highlighting would
only be compliant if the UA had an equivalent rule using ':invalid' in its
UA stylesheet. Both of these are possible but not specifically related to
the pattern attribute.


&gt;<i>          And if, for example, a text field has the code
</I>&gt;<i>
</I>&gt;<i>              &lt;label&gt;Part number:
</I>&gt;<i>                &lt;input pattern=&quot;[0-9][A-Z]{3}&quot; name=&quot;part&quot;
</I>&gt;<i>                       title=&quot;A part number must be one digit
</I>&gt;<i>                       followed by three uppercase letters.&quot;/&gt;
</I>&gt;<i>              &lt;/label&gt;
</I>&gt;<i>
</I>&gt;<i>          and form submission is attempted[2] when this field
</I>&gt;<i>          is the first invalid field in the form[3], a visual
</I>
&gt;<i>      [3] Why just for the first invalid field? To prevent a
</I>&gt;<i>          festival of simultaneous or consecutive balloons
</I>&gt;<i>          from multiple invalid fields.
</I>
Yes, I go on about this in the section that talks about this.


&gt;<i>          UA may focus the field, and display a help balloon
</I>&gt;<i>          pointing at it[4] containing the text:
</I>
&gt;<i>      [4] Why a balloon instead of an alert? Firstly, people
</I>&gt;<i>          don't read alerts. Secondly, it makes the identity
</I>&gt;<i>          of the field more obvious. And thirdly, it removes
</I>&gt;<i>          the need to dismiss anything -- you can edit the
</I>&gt;<i>          field with the balloon still present, and the
</I>&gt;<i>          balloon fades away as soon as you do something else.
</I>
This was also already mentioned in the appropriate section.


&gt;<i>              &lt;strong&gt;A part number must be one digit followed
</I>&gt;<i>              by three uppercase letters.&lt;/strong&gt;[5]
</I>&gt;<i>              You cannot complete this form until the field is
</I>&gt;<i>              correct.[6]'
</I>
&gt;<i>      [5] Why put the author's message first? Because it's
</I>&gt;<i>          almost certainly more useful than the generic
</I>&gt;<i>          message.
</I>
&gt;<i>      [6] Why not mention &quot;pattern&quot; in the generic message?
</I>&gt;<i>          Firstly because Grandma thinks a &quot;pattern&quot; is about
</I>&gt;<i>          knitting, not regexps. And secondly because the
</I>&gt;<i>          author might have stuffed up and omitted their
</I>&gt;<i>          message, and referring to a &quot;pattern&quot; without saying
</I>&gt;<i>          what it was would be needlessly aggravating.
</I>
Those two make sense, addressed.


&gt;<i> &gt; 2.10. The required attribute
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; For check boxes, the required  attribute shall only be satisfied when
</I>&gt;<i> &gt; the checkbox is checked.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; For radio buttons, the required attribute shall only be satisfied when
</I>&gt;<i> &gt; exactly one of the radio buttons in that radio group is checked.
</I>&gt;<i>
</I>&gt;<i> 53. Suggestion: Use the present tense.
</I>&gt;<i>      *   &quot;shall only be satisfied&quot; --&gt; &quot;is satisfied only&quot;
</I>
&quot;shall&quot; is an RFC 2119 term. And it _is_ present tense.


&gt;<i> &gt; 2.11. The form attribute
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt;&gt; In this example, each row contains one form, even though without this
</I>&gt;<i> &gt;&gt; attribute it would not be possible to have more than one form per
</I>&gt;<i> &gt;&gt; table if any of them span cells.
</I>&gt;<i>
</I>&gt;<i> 54. Suggestion: Split the sentence for readability.
</I>&gt;<i>      *   &quot;one form, even though without this attribute&quot; --&gt;
</I>&gt;<i>          &quot;a form. Without the _form_ attribute&quot;
</I>
Disagreed; the whole point of the sentence is the link between the two
parts.


&gt;<i> &gt; 2.12. The autocomplete attribute
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; A UA may allow the user to disable support for this attribute. Support
</I>&gt;<i> &gt; for the attribute must be enabled by default, and the ability to
</I>&gt;<i> &gt; disable support should not be trivially accessible, as there are
</I>&gt;<i> &gt; significant security implications for the user if support for this
</I>&gt;<i> &gt; attribute is  disabled.
</I>&gt;<i>
</I>&gt;<i> 56. Suggestion: Clarify the connections between the
</I>&gt;<i>      sentences.
</I>&gt;<i>      *   &quot;attribute. Support&quot; --&gt; &quot;attribute. But support&quot;
</I>
Disagreed because starting with a &quot;But&quot; sounds silly. I would link the two
into one sentence but that would be too long.


&gt;<i> &gt; 2.13.  The autofocus attribute
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; UAs may ignore this attribute if the user has indicated (for example,
</I>&gt;<i> &gt; by starting to type in a form control) that he does not wish focus to
</I>&gt;<i> &gt; be changed.
</I>&gt;<i>
</I>&gt;<i> 58. Suggestion: Insist on this, as it is a security
</I>&gt;<i>      vulnerability. (Several times I have accidentally typed
</I>&gt;<i>      a password into a username field because the browser had
</I>&gt;<i>      returned focus to it just after I had focused the
</I>&gt;<i>      password field.)
</I>&gt;<i>      *   &quot;may&quot; --&gt; &quot;must&quot;
</I>
That would be a meaningless conformance requirement since how the user is
supposed to indicate this, or what forms an indication, is not defined.


&gt;<i> &gt; Authors should only mark one (non-disabled) control per document with
</I>&gt;<i> &gt; the autofocus attribute.
</I>&gt;<i>
</I>&gt;<i> 59. Suggestion: Start this sentence with &quot;However,&quot; and move
</I>&gt;<i>      it to the end of the paragraph describing what happens
</I>&gt;<i>      if multiple controls have the attribute set.
</I>
That would break the &quot;This implies&quot; text.


&gt;<i> &gt; 2.16. Handling unexpected  elements and values
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; Upon encountering such an invalid construct, UAs must proceed as
</I>&gt;<i> &gt; follows:
</I>&gt;<i>
</I>&gt;<i> 63. Suggestion: Maybe I'm just getting old-fashioned, but I
</I>&gt;<i>      remember not so long ago &quot;construct&quot; wasn't a noun.
</I>&gt;<i>      *   &quot;an invalid construct&quot; --&gt; &quot;invalid nesting&quot;
</I>
The word &quot;construct&quot; has been a noun for as far back as I can remember.


&gt;<i> 66. Error: This specification does not appear to include by
</I>&gt;<i>      reference any CSS specification as a whole (though it
</I>&gt;<i>      does mention CSS3 Generated Content and UI properties).
</I>&gt;<i>      Either that should be done, or these statements should
</I>&gt;<i>      be generalized in case the document is styled using a
</I>&gt;<i>      language other than CSS.
</I>
CSS is not required by WF2, but if it is used, then the relevant sections
define how it must be used. In the real world, CSS is the only stylesheet
language applied to HTML so it really doesn't matter.



&gt;<i> &gt; For option and optgroup elements that are  not inside select elements
</I>&gt;<i> &gt;     The elements should be treated much like span elements
</I>&gt;<i> &gt;     as far as rendering goes.
</I>&gt;<i>
</I>&gt;<i> 69. Suggestion: Remove redundancy.
</I>&gt;<i>      *   &quot;as far as rendering goes&quot; --&gt; &quot;&quot;
</I>
That's not redundant.


&gt;<i> &gt; 3.1. Introduction for  authors
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; To explain this, we will step through an example. Here is a sample
</I>&gt;<i> &gt; form with three rows:
</I>&gt;<i>
</I>&gt;<i> 72. Question: Why does the example contain no &lt;form&gt;&lt;/form&gt;
</I>&gt;<i>      tags?
</I>
When I wrote the example, the spec said &lt;form&gt; elements were optional (if
you omitted them, they were implied). That has changed since then. Fixed.


&gt;<i> &gt;&gt; &lt;p&gt;&lt;button type=&quot;add&quot; template=&quot;order&quot;&gt;Add Row&lt;/button&gt;&lt;/p&gt;
</I>&gt;<i>
</I>&gt;<i> 73. Suggestion: Encourage more standard text for such
</I>&gt;<i>      buttons.
</I>&gt;<i>      *   &quot;Add Row&quot; --&gt; &quot;+&quot; throughout the spec (or at least
</I>&gt;<i>          everywhere except section 3.1.1, where more specific
</I>&gt;<i>          text may be educative)
</I>
That seems like it would be very bad for accessibility.


&gt;<i> &gt;&gt; &lt;button type=&quot;remove&quot;&gt;Remove This Row&lt;/button&gt;
</I>&gt;<i>
</I>&gt;<i> 74. Suggestion: Encourage more standard text for such
</I>&gt;<i>      buttons.
</I>&gt;<i>      *   &quot;Remove Row&quot; --&gt; &quot;&amp;ndash;&quot; throughout the spec (or
</I>&gt;<i>          at least everywhere except section 3.1.1, where more
</I>&gt;<i>          specific text may be educative)
</I>
That seems like it would be even worse.


&gt;<i> &gt; 3.1.2 Suggestions for authors
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; In order to be considered a part of the repetition model, however, the
</I>&gt;<i> &gt; row  must have a repeat attribute with a numeric value. That value
</I>&gt;<i> &gt; can be any integer. (For example, you could use &quot;-1&quot; as the value of
</I>&gt;<i> &gt; all prefilled rows.)
</I>&gt;<i>
</I>&gt;<i> 75. Error: Bad markup.
</I>&gt;<i>      *   &quot;repeat&lt;code&gt;&quot; --&gt; &quot;repeat&lt;/code&gt;&quot;
</I>
Oops.


&gt;<i>      *   &quot;&lt;/code&gt;&lt;/code&gt;&quot; --&gt; &quot;&quot;
</I>
Fixed (actually the source document didn't have that, the post-processor
script added that automatically to try to get around my earlier typo!).


&gt;<i> &gt; 5. Form submission
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; 1.  Step one: Dispatch the submit event.
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; 2.  Step two: Check the validity of the form
</I>...
&gt;<i>
</I>&gt;<i> 86. Suggestion: Remove the redundant &quot;Step xxx&quot;s. We already
</I>&gt;<i>      know they're steps, and we already know what number each
</I>&gt;<i>      of them is.
</I>
Left for similarity with HTML4.


&gt;<i> &gt; 2.  Step two: Check the validity of the form
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     If the form submission was initiated as a result of a
</I>&gt;<i> &gt;     submit event's default action, then the form is
</I>&gt;<i> &gt;     checked for validity. If, after the form has had any
</I>&gt;<i> &gt;     relevant invalid events fired, any controls remain
</I>&gt;<i> &gt;     invalid, then the submission shall be aborted.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Otherwise, if the form submission was initiated via
</I>&gt;<i> &gt;     the submit() method, then instead of firing invalid
</I>&gt;<i> &gt;     events, a SYNTAX_ERR exception shall be raised (and
</I>&gt;<i> &gt;     submission is aborted) if any of the controls are
</I>&gt;<i> &gt;     invalid. [DOM3CORE]
</I>&gt;<i>
</I>&gt;<i> 87. Error: Mismatched tense.
</I>&gt;<i>      *   &quot;shall be aborted&quot; --&gt; &quot;is aborted&quot;
</I>&gt;<i>      *   &quot;shall be raised&quot; --&gt; &quot;is raised&quot;
</I>
Shall is present, and is there to be a conformance requirement.


&gt;<i> &gt;     Script authors who wish to validate the form then
</I>&gt;<i> &gt;     perform submission can use script such as:
</I>&gt;<i>
</I>&gt;<i> 89. Error: Missing word.
</I>&gt;<i>      *   &quot;use script&quot; --&gt; &quot;use a script&quot;
</I>
I disagree; &quot;script&quot; in this usage is a collective noun like &quot;glue&quot;.


&gt;<i> &gt; 5.2. Handling characters outside the submission character set
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; If the form data set contains characters that are outside the
</I>&gt;<i> &gt; submission character set, the user agent should inform the user that
</I>&gt;<i> &gt; his submission  will be changed;
</I>&gt;<i>
</I>&gt;<i> 95. Question: Should the UA do that even if the only such
</I>&gt;<i>      characters came from &lt;input type=&quot;hidden&quot;&gt; controls? If
</I>&gt;<i>      so, for what purpose?
</I>
A good point. The data is getting corrupted, so I think the UA should
inform the user of something. But what, I don't know.

I added a paragraph to the end of the section, but it is a bit vague.


&gt;<i> 103.Suggestion: Match the tense of the rest of the spec. As
</I>&gt;<i>      appropriate:
</I>&gt;<i>      *   &quot;shall&quot; --&gt; &quot;must&quot;
</I>&gt;<i>      *   &quot;shall make&quot; --&gt; &quot;makes&quot;
</I>&gt;<i>      *   &quot;shall return&quot; --&gt; &quot;returns&quot;
</I>
RFC 2119 wording for conformance criteria. The spec is slowly getting more
&quot;shalls&quot; as I use them where it is more convenient than &quot;must&quot;, so that
overall it will get more balanced over time.


Thank you very much for your input!

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>























































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001109.html">[whatwg] Suggested changes to Web Forms 2.0,	2004-07-01 working
</A></li>
	<LI>Next message: <A HREF="001046.html">[whatwg] Suggested changes to Web Forms 2.0,	2004-07-01 working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1005">[ date ]</a>
              <a href="thread.html#1005">[ thread ]</a>
              <a href="subject.html#1005">[ subject ]</a>
              <a href="author.html#1005">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg-whatwg.org
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
