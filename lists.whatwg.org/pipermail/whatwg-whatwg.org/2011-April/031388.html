<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Form element invalid message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form%20element%20invalid%20message&In-Reply-To=%3CBANLkTi%3DFt48tEYy0eKfifKOK3dwjWCTkLA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031386.html">
   <LINK REL="Next"  HREF="031389.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Form element invalid message</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form%20element%20invalid%20message&In-Reply-To=%3CBANLkTi%3DFt48tEYy0eKfifKOK3dwjWCTkLA%40mail.gmail.com%3E"
       TITLE="[whatwg] Form element invalid message">jonas at sicking.cc
       </A><BR>
    <I>Fri Apr 29 16:10:55 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="031386.html">[whatwg] Form element invalid message
</A></li>
        <LI>Next message: <A HREF="031389.html">[whatwg] Mechanism to find available events
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31388">[ date ]</a>
              <a href="thread.html#31388">[ thread ]</a>
              <a href="subject.html#31388">[ subject ]</a>
              <a href="author.html#31388">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Apr 29, 2011 at 3:42 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Wed, 29 Dec 2010, Mounir Lamouri wrote:
</I>&gt;&gt;<i> On 12/29/2010 07:41 AM, Ian Hickson wrote:
</I>&gt;&gt;<i> &gt;&gt; One way to do this would be to make the &quot;invalid&quot; event implement an
</I>&gt;&gt;<i> &gt;&gt; interface with a function like setCustomErrorMessage(in DOMString
</I>&gt;&gt;<i> &gt;&gt; message). This string would then be displayed by the UA in its UI
</I>&gt;&gt;<i> &gt;&gt; wherever it displays validation error messages.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; I actually think that the customerrormessage attribute that has been
</I>&gt;&gt;<i> &gt;&gt; suggested is a decent solution too. It does mean that you have to do
</I>&gt;&gt;<i> &gt;&gt; some trickery if you want to display different error messages for
</I>&gt;&gt;<i> &gt;&gt; different types of errors, but nothing too bad. All you'd need to do
</I>&gt;&gt;<i> &gt;&gt; is install an event handler for the &quot;invalid&quot; event, and in that
</I>&gt;&gt;<i> &gt;&gt; handler do something like element.setAttribute(&quot;customerrormessage&quot;,
</I>&gt;&gt;<i> &gt;&gt; myMessage);
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; If you're setting an error message, what's wrong with
</I>&gt;&gt;<i> &gt; setCustomValidity()?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> setCustomValidity() means &quot;this element is invalid for custom reasons&quot;
</I>&gt;&gt;<i> and the argument is the error message. I think the use case of
</I>&gt;&gt;<i> setCustomValidity() is *checking* something on oninput, onchange or
</I>&gt;&gt;<i> other events and, if the condition is not fulfilled, call the method to
</I>&gt;&gt;<i> make the element invalid. For example, two passwords fields have to be
</I>&gt;&gt;<i> the same.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The customerrormessage attribute would have different use cases. It
</I>&gt;&gt;<i> would be when the element has known reasons to be invalid but when the
</I>&gt;&gt;<i> author want to override the UA string. I see two reasons for that:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. the element has very complex rules like: &lt;input type='email'
</I>&gt;&gt;<i> name='username' required maxlength=&quot;100&quot; pattern=&quot;[^@]*@company.com&quot;&gt;.
</I>&gt;&gt;<i> It sounds hard for a UA to give one simple sentence for this situation
</I>&gt;&gt;<i> but the author can try something like &quot;Please, enter your corporate
</I>&gt;&gt;<i> email address (max 100 chars)&quot;.
</I>&gt;<i>
</I>&gt;<i> That's why the title=&quot;&quot; attribute is used for the pattern message.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> 2. the author want a specific string to match the context of the
</I>&gt;&gt;<i> website. For example, when you want to log on Foo website, the author
</I>&gt;&gt;<i> might want to be sure you see &quot;Please enter you Foo ID.&quot; instead of a
</I>&gt;&gt;<i> generic &quot;Please, fill this field.&quot; for &lt;input name='username' required&gt;
</I>&gt;<i>
</I>&gt;<i> Currently, Web sites rarely do more than simply focus the field and mark
</I>&gt;<i> it in red or some such. Why would &quot;Please enter your Foo ID&quot; be so much
</I>&gt;<i> better than &quot;Please fill this field&quot; or even just a big red arrow? The
</I>&gt;<i> field presumably has a label right next to it, it's not like there's any
</I>&gt;<i> ambiguity about what the user is going to need to type in there.
</I>
It's quite common for webpages to display an error message in red
along with a red border or whatever.

For example, if I go to www.google.com and click on the &quot;sign in&quot; link
at the top, then without entering anything press the &quot;sign in&quot; button.
At this point the page displays a error message in red that says
&quot;Enter your email address.&quot;

This is a better message than we as a browser could ever display. All
we could know is that it's a required field and that it's an email
address. We have no idea that it the users address that is requested.

In general it makes a lot of sense to want to display a different
message when the user has failed to enter a valid value in a field.
Clearly the user failed to enter what was requested the first time,
and so the context around the field was not enough for the user to
enter what was requested. Hence a more detailed description is
appropriate.

&gt;&gt;<i> For sure, you can use setCustomValidity() for both use cases but there
</I>&gt;&gt;<i> is a small semantic difference and a bigger work to do. Using
</I>&gt;&gt;<i> setCustomValidity() for these use cases would be a pain while using a
</I>&gt;&gt;<i> customerrormessage attribute would be quite straightforward.
</I>&gt;<i>
</I>&gt;<i> I don't understand how such an attribute would work. Take &lt;input
</I>&gt;<i> type=number&gt; for example, with an explicit min, max, step, etc. How would
</I>&gt;<i> you know what value to put in the attribute? There are going to be
</I>&gt;<i> different needs when the control's value is too low, too high, not aligned
</I>&gt;<i> to a step, missing, etc.
</I>
Consider the example above from googles login page. Here there are two
possible errors:

1. The field is empty
2. The field doesn't contain an email address

In both cases the message &quot;Enter your email address.&quot; seems
appropriate. And it seems better than what we as a browser could
generate.

In general, it's often nice to provide the full set of constraints
once the user has failed to enter what was requested. Consider markup
like &lt;input type=number min=3 max=7&gt;. It's very frustrating for a user
to enter the value 1 and be told &quot;The minimum allowed value is 3&quot; and
then once the user adjust it to 10 get the message &quot;10 is too high&quot;. A
much nicer experience is &quot;A number between 3 and 7 is required&quot;.

In other words, often times a single static message which describes
all constraints works, no matter what constraint the user has failed
to fulfill.

Certainly, this isn't always the case. But if you do want something
more complex, you can always attach a oninvalid listeners which
dynamically sets the attribute to something appropriate. Or simply use
setCustomValidity(), though again this looses a little bit of
semantics.

&gt;<i> On Wed, 29 Dec 2010, Jonas Sicking wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I should also mention that we have implemented such an attribute in
</I>&gt;&gt;<i> Firefox 4 named x-moz-errormessage. We encourage authors to use this and
</I>&gt;&gt;<i> provide feedback regarding it's usefulness.
</I>&gt;<i>
</I>&gt;<i> Do you know of any pages that use it? I would love to see this in the real
</I>&gt;<i> world, it would help me understand the use case better.
</I>
No, Firefox 4 has been out a grand total of 5 weeks, so it's very
early still. But I think there are already lots of real world use
cases which would be helped by the suggested attribute.

/ Jonas
</PRE>













<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031386.html">[whatwg] Form element invalid message
</A></li>
	<LI>Next message: <A HREF="031389.html">[whatwg] Mechanism to find available events
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31388">[ date ]</a>
              <a href="thread.html#31388">[ thread ]</a>
              <a href="subject.html#31388">[ subject ]</a>
              <a href="author.html#31388">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
