<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Decimal comma in numeric input
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Decimal%20comma%20in%20numeric%20input&In-Reply-To=%3CBANLkTike0BV%3Dpjq-dyqHFXyoUGj5VL%3DevQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031259.html">
   <LINK REL="Next"  HREF="031258.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Decimal comma in numeric input</H1>
<!--htdig_noindex-->
    <B>John Tamplin</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Decimal%20comma%20in%20numeric%20input&In-Reply-To=%3CBANLkTike0BV%3Dpjq-dyqHFXyoUGj5VL%3DevQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Decimal comma in numeric input">jat at google.com
       </A><BR>
    <I>Thu Apr 14 10:44:40 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="031259.html">[whatwg] Decimal comma in numeric input
</A></li>
        <LI>Next message: <A HREF="031258.html">[whatwg] Physical quantities: &lt;var&gt; or &lt;i&gt;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31261">[ date ]</a>
              <a href="thread.html#31261">[ thread ]</a>
              <a href="subject.html#31261">[ subject ]</a>
              <a href="author.html#31261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Apr 14, 2011 at 12:40 PM, Jukka K. Korpela &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jkorpela at cs.tut.fi</A>&gt;wrote:

&gt;<i> Well, HTML(5) is not just about client-server applications. It&#8217;s also about
</I>&gt;<i> offline applications and about the bulk of web and intranet content that
</I>&gt;<i> cannot be characterized as &#8220;applications&#8221; in any significant meaning.
</I>&gt;<i>
</I>&gt;<i> Moreover, part of the very idea of client-server model is that the client
</I>&gt;<i> can handle user interaction in the user&#8217;s preferred locale and generally the
</I>&gt;<i> way that suits the user, whereas the server-side processing and storage can
</I>&gt;<i> use globalized format of data. The server can remain totally ignorant of the
</I>&gt;<i> user interaction; it just gets and send data in a global well-defined
</I>&gt;<i> format, which may be almost or completely unreadable to humans, or at least
</I>&gt;<i> odd-looking to most, like ISO 8601 date and time, language codes, or real
</I>&gt;<i> numbers in binary format.
</I>&gt;<i>
</I>
Ok, if you want to say that some apps don't have a server component or that
some apps translate to a global format when sending to the server, that is
fine.  However, it doesn't change the fact that the part running on the
client has to know what locale the user is using when interacting with it,
and needs to be able to control that rather than using whatever the user's
OS is set to.

For example, imagine a translation application that will show messages in a
source locale and allow the user to edit translations in a different locale.
 Clearly, the OS is only going to be running in one locale, so if the
application relies on the browser which relies on the OS for the locale then
it cannot possibly localize the parts of the app appropriate for each of
these locales.


&gt;<i> New input types like &quot;color&quot;, &quot;date&quot;, and &quot;number&quot; are interesting steps
</I>&gt;<i> towards allowing localized user interfaces with strictly defined and
</I>&gt;<i> controlled interfaces to server-side and client-side processing of data. But
</I>&gt;<i> they are perhaps not quite _conscious_ steps, and they are relatively
</I>&gt;<i> limited, and they are (probably intentionally) silent about most
</I>&gt;<i> localization issues.
</I>

If they don't cover the case of what should happen, then either the
implementors implement it the same correct way by chance or the feature
can't actually be used by apps that care about localizaiton.

&gt;<i>
</I>&gt;<i>  If the app provides a drop-down box or preference setting
</I>&gt;&gt;<i> to choose a different locale, as most localized apps do,
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Do they?
</I>

Some examples:

   - amazon.com is US English (at least from a US IP address, I don't know
   if they remap it based on other things, but they definitely don't use
   Accept-Language to choose).  At the bottom of the page is a list of links to
   other localized versions of the site, like amazon.fr, amazon.it, etc.  I
   don't see any persistent settings for your account.
   - cnn.com is similar, ignores Accept-Language and lists links to a few
   localized sites at the bottom of the page
   - bbc.co.uk is similar, ignoring Accept-Language and providing a large
   list of locales to choose from in the body of the page
   - google.com defaults to Accept-Language or IP-based geolocation if you
   don't have a preference, provides a link to the English version for
   non-English sites, and allows setting a persistent preference if you are
   logged in.  Note that the list of supported languages includes many not
   likely to be supported by the OS.
   - yahoo.com has only an &quot;international&quot; link which then takes you to a
   large list of localized versions of the site to choose from

So if the OS/browser support is sufficient, why do most sites roll their
own?


&gt;<i> Is that a good move, as opposite to using one centralized set of settings
</I>&gt;<i> in the user's system? How many times am I actually supposed to tell my
</I>&gt;<i> preferred language, country, currency, decimal separator, and so on, when
</I>&gt;<i> using different applications? Localization is far more than choosing a
</I>&gt;<i> locale from a dropdown, or at least it should be to be genuinely useful.
</I>

Setting it in the system allows you to choose from the locales that the OS
or browser supports.  That set of locales can be very different from the set
of locales supported by a given application.  If a user's OS is set for
Estonian and my app doesn't support that, how do I know which of the locales
I do support would be the best option for the user?  What if the OS doesn't
support a locale that my application does support, do I just not allow the
user to select it?  What about the common case where the OS/browser idea of
localization is insufficient, such as most not supporting BCP47 language
tags, so I can't say I want to read in Cyrillic (sr-Cyrl) or Latin
(sr-Latn)?  Maybe one day the support will be there that allows this, but
right now if you care about it you have to localize it yourself.


&gt;<i>
</I>&gt;<i>  the web browser has to be using the same locale for any native locale
</I>&gt;&gt;<i> processing it uses
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I&#8217;m not sure I follow you here. If an application is used via a web
</I>&gt;<i> browser, then according to your words the application normally provides its
</I>&gt;<i> own locale selection. Are you now saying that a web browser should somehow
</I>&gt;<i> try to access such choices and turn them into its own choices. I was
</I>&gt;<i> confused, and I am getting more and more confused.
</I>

Ideally, the browser would provide sufficient localization support that apps
could use it   Until then, for any features like &lt;input type=&quot;number&quot;&gt; to be
usable, there has to be a way to tell the input element what locale the app
is actually running in.  Previously in this thread, you suggested that there
should not be such a mechanism and that instead should be based on the
user's OS settings.  All of the examples above would lead to incorrect
behavior any time the user was running one of those apps in a different
locale than the OS setting, which means that those apps can't rely on
browser behavior and have to supply their own number parsing/formatting.


&gt;<i> Independently of the ways in which some software decides to use some locale
</I>&gt;<i> settings, there is the problem that the user does not what to enter when he
</I>&gt;<i> needs to enter a number with a decimal part. I think non-localized UIs
</I>&gt;<i> (e.g., UIs that always use full stop as decimal separator) are definitely
</I>&gt;<i> better than poorly-localized UIs.
</I>&gt;<i>
</I>
Users in affected locales might disagree with you, but I agree that
poorly-localized UIs should be avoided.  The question is how to make it
easier to write properly localized apps, and I suggest half-baked browser
facilities are not the answer.


&gt;<i> If you can't rely on getting the locale the app is running in, then
</I>&gt;&gt;<i> apps are not going to be able to use any fancy features and will
</I>&gt;&gt;<i> continue to implement their own localization since they can't rely on
</I>&gt;&gt;<i> the browser getting it right.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> They can hardly expect browsers to get it right now or in the near future,
</I>&gt;<i> as there isn&#8217;t even any definition for what is right. And there is
</I>&gt;<i> considerable conceptual confusion too &#8211; you seem to imply that the language
</I>&gt;<i> of the input element is the same as the locale some application is running
</I>&gt;<i> in.
</I>&gt;<i>
</I>&gt;<i> Most forms in HTML documents aren&#8217;t part of any &#8220;application&#8221; with some
</I>&gt;<i> localization features. It&#8217;s just a form, and the page has some language
</I>&gt;<i> (though usually detectable only by analyzing the content), and it&#8217;s used in
</I>&gt;<i> a browser that has some user interface language (language of menus, error
</I>&gt;<i> messages etc.) and little localization outside that. The best approximation
</I>&gt;<i> of what is generally most natural for the user is in the settings of the
</I>&gt;<i> underlying system. But users can&#8217;t and won&#8217;t really expect web pages to
</I>&gt;<i> apply those settings (usually just silently accepted by the user) to, say,
</I>&gt;<i> their methods of input for decimal numbers.
</I>&gt;<i>
</I>
The percentage of plain HTML pages is dropping dramatically, but even then
when the form is posted to a server, the server has to know how that data
was processed.


&gt;<i> What I&#8217;m saying is, I guess, that HTML specifications should _discourage_
</I>&gt;<i> browsers from setting up localized methods for numeric input. It's different
</I>&gt;<i> with calendars for example. When using an English-language page, I&#8217;m quite
</I>&gt;<i> prepared to seeing a calendar with English month names, but I would not be
</I>&gt;<i> too surprised at seeing Finnish month names (when using a Finnish version of
</I>&gt;<i> an OS _and_ a browser), even though it may look somewhat messy. And a
</I>&gt;<i> calendar _needs_ to have language-specific information, with month names and
</I>&gt;<i> names for days of the week at least.
</I>

Ok, so you are suggesting that browsers should never provide localization
facilities and apps should continue to roll their own?  I suppose that is a
viable position, but it means that each app reinvents the wheel each time
and requires additional code to be downloaded and executed.

To me, the ideal solution is that the browser provides a localization API
similar to what ICU provides, and the apps running in the browser make use
of that rather than recreating it.

-- 
John A. Tamplin
Software Engineer (GWT), Google
</PRE>








































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031259.html">[whatwg] Decimal comma in numeric input
</A></li>
	<LI>Next message: <A HREF="031258.html">[whatwg] Physical quantities: &lt;var&gt; or &lt;i&gt;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31261">[ date ]</a>
              <a href="thread.html#31261">[ thread ]</a>
              <a href="subject.html#31261">[ subject ]</a>
              <a href="author.html#31261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
