<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Blacklist for regsiterProtocolHandler()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Blacklist%20for%20regsiterProtocolHandler%28%29&In-Reply-To=%3C4DAEBB37.70609%40yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073571.html">
   <LINK REL="Next"  HREF="073586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Blacklist for regsiterProtocolHandler()</H1>
<!--htdig_noindex-->
    <B>Brett Zamir</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Blacklist%20for%20regsiterProtocolHandler%28%29&In-Reply-To=%3C4DAEBB37.70609%40yahoo.com%3E"
       TITLE="[whatwg] Blacklist for regsiterProtocolHandler()">brettz9 at yahoo.com
       </A><BR>
    <I>Wed Apr 20 03:53:43 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="073571.html">[whatwg] Blacklist for regsiterProtocolHandler()
</A></li>
        <LI>Next message: <A HREF="073586.html">[whatwg] Blacklist for regsiterProtocolHandler()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73576">[ date ]</a>
              <a href="thread.html#73576">[ thread ]</a>
              <a href="subject.html#73576">[ subject ]</a>
              <a href="author.html#73576">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>  On 4/20/2011 2:11 AM, Lachlan Hunt wrote:
&gt;<i> On 2011-04-19 19:33, Ian Hickson wrote:
</I>&gt;&gt;<i> On Tue, 12 Apr 2011, Lachlan Hunt wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We are investigating registerProtocolHandler and have been discussing
</I>&gt;&gt;&gt;<i> the need for a blacklist of protocols to forbid.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> [...]
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We'd like to know if we've missed any important schemes that must be
</I>&gt;&gt;&gt;<i> blocked, and we think it might be useful if the spec listed most of
</I>&gt;&gt;&gt;<i> those, except for the vendor specific schemes, which should probably be
</I>&gt;&gt;&gt;<i> left up to each vendor to worry about.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I haven't updated the spec yet, but it strikes me that maybe what we
</I>&gt;&gt;<i> should do instead is have a whitelist of protocols we definitely want to
</I>&gt;&gt;<i> allow (e.g. mailto:), and define a common prefix for protocols that are
</I>&gt;&gt;<i> used with this feature, in a similar way to how with XHR we've added 
</I>&gt;&gt;<i> Sec-*
</I>&gt;&gt;<i> as a list of headers _not_ to support.
</I>&gt;<i>
</I>&gt;<i> Other protocols we should probably also whitelist:
</I>&gt;<i>
</I>&gt;<i> irc, sms, smsto, tel.
</I>&gt;<i>
</I>&gt;<i> I'm also curious how we could handle ISBN URNs, like:
</I>&gt;<i>
</I>&gt;<i>   urn:isbn:0-395-36341-1
</I>&gt;<i>
</I>&gt;<i> That would be useful to have a web service that could look up the ISBN 
</I>&gt;<i> and direct users to information about the book, or to an online store.
</I>&gt;<i>
</I>&gt;<i> As currently specified, services have to register a handler for &quot;urn&quot;, 
</I>&gt;<i> even if they only handle ISBN URNs.  The other alternative would be to 
</I>&gt;<i> mint a new web+isbn scheme, which seems suboptimal.
</I>
Maybe registerProtocolHandler() could take a function as an extra 
argument to let the application determine whether it wishes to handle 
the protocol event, internally using e.preventDefault(), 
e.stopPropagation(), or something similar to indicate that it has 
successfully handled the case, and pass the buck to let other protocol 
handlers be checked in order of user preference otherwise.

&gt;&gt;<i> So e.g. we could whitelist any protocol starting with &quot;web+&quot; and then
</I>&gt;&gt;<i> register that as a common extension point for people inventing protocols
</I>&gt;&gt;<i> for use with this feature, so that people writing OS-native apps would
</I>&gt;&gt;<i> know that if they used a protocol with that prefix it's something 
</I>&gt;&gt;<i> that any
</I>&gt;&gt;<i> web site could try to take over.
</I>&gt;<i>
</I>&gt;<i> That seems reasonable.
</I>&gt;<i>
</I>
Now that it seems there is momentum on resolving the URN and custom 
(pseudo-)namespacing issue (I think &quot;x-&quot; might be nice to continue the 
tradition, though &quot;web&quot; seems fine also if real namespaces will not be 
used), can we please put back on the table the ideas of:

1) adding to &lt;a/&gt; an attribute &quot;uris&quot; (for trying alternatives first, 
with greater precedence than &quot;href&quot;)
2) adding to &lt;a/&gt; an attribute &quot;fallbackURIs&quot; (for lesser precedence 
than &quot;href&quot;, e.g., so a browser might expose these URIs only when the 
link was right-clicked)
3) adding an event to listen for the user refusing or the browser not 
supporting a protocol (even if this can be done with try-catches).

...so that people can actually begin experimenting with 
registerProtocolHandler() rather than expecting content authors to make 
links which may lead to nowhere for some of their users?

Brett


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073571.html">[whatwg] Blacklist for regsiterProtocolHandler()
</A></li>
	<LI>Next message: <A HREF="073586.html">[whatwg] Blacklist for regsiterProtocolHandler()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73576">[ date ]</a>
              <a href="thread.html#73576">[ thread ]</a>
              <a href="subject.html#73576">[ subject ]</a>
              <a href="author.html#73576">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
