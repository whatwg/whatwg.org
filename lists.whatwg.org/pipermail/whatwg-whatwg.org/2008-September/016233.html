<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML5 Offline Web Applications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML5%20Offline%20Web%20Applications&In-Reply-To=%3C63df84f0809151605p1d59421fw240a841bce15f019%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016232.html">
   <LINK REL="Next"  HREF="016234.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML5 Offline Web Applications</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML5%20Offline%20Web%20Applications&In-Reply-To=%3C63df84f0809151605p1d59421fw240a841bce15f019%40mail.gmail.com%3E"
       TITLE="[whatwg] HTML5 Offline Web Applications">jonas at sicking.cc
       </A><BR>
    <I>Mon Sep 15 16:05:22 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="016232.html">[whatwg] HTML5 Offline Web Applications
</A></li>
        <LI>Next message: <A HREF="016234.html">[whatwg] HTML5 Offline Web Applications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16233">[ date ]</a>
              <a href="thread.html#16233">[ thread ]</a>
              <a href="subject.html#16233">[ subject ]</a>
              <a href="author.html#16233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> On the subject of fallbacks, I don't think the spec is quite clear on
</I>&gt;<i> how the fallbacks are meant to be loaded.  There seem to be two
</I>&gt;<i> possible interpretations:
</I>&gt;<i>
</I>&gt;<i> 1) The fallback resource is loaded by the client as though it were
</I>&gt;<i> loaded from the original URI - security decisions are made with the
</I>&gt;<i> original URI, and window.location, bookmarks, history, etc. all
</I>&gt;<i> reflect the original URI.  This is somewhat analogous to the real
</I>&gt;<i> server returning fallback content at the original URI.
</I>&gt;<i>
</I>&gt;<i> 2) The fallback resource is loaded by the client as though it were
</I>&gt;<i> loaded from the fallback URI for purposes of security decisions,
</I>&gt;<i> window.location, etc.  But bookmarks, history, etc all reflect the
</I>&gt;<i> original URI.  This is somewhat analogous to a server redirect (with
</I>&gt;<i> bookmark/history changes to reflect the original URI), or to a frame
</I>&gt;<i> at the original URI including the fallback URI (but without the
</I>&gt;<i> intermediate window object).
</I>&gt;<i>
</I>&gt;<i> We need to decide which of these behaviors makes the most sense.  The
</I>&gt;<i> first seems the most straightforward, though I think we'd want a few
</I>&gt;<i> changes:
</I>&gt;<i>
</I>&gt;<i> a) The fallback URI should be required to have the same origin as the namespace.
</I>&gt;<i> b) Maybe there should be some way for the page to know that it was
</I>&gt;<i> loaded as a fallback.
</I>&gt;<i>
</I>&gt;<i> If we settle on the second approach, we need to give the page some way
</I>&gt;<i> to find out what the original URI was (since window.location will
</I>&gt;<i> point to the fallback URI).
</I>
It seems to me like 1 is the most expected by the user. For example if
I'm browsing around on bugzilla I would expect to see (and be able to
bookmark etc) the usual URIs that I see when I'm online.

&gt;<i>From a security point of view either seems possible to reason about,
</I>though in different ways. (This is assuming that we apply same-origin
restrictions, which I really think we should).

With 1 you can think of it as if the server had simply returned the
resource on the fallback uri, rather than the resource on the usual
uri. So it is as if you have a very primitive http server baked in to
the browser that can return different resources while in offline mode.

With 2 you can think of it as if the server had returned a redirect
with some extra parameters pointing out the original URI that was
loaded. So it is as if you have a very primitive http server baked in
to the browser that can return redirect responses while in offline
mode.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016232.html">[whatwg] HTML5 Offline Web Applications
</A></li>
	<LI>Next message: <A HREF="016234.html">[whatwg] HTML5 Offline Web Applications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16233">[ date ]</a>
              <a href="thread.html#16233">[ thread ]</a>
              <a href="subject.html#16233">[ subject ]</a>
              <a href="author.html#16233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
