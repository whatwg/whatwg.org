<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] workers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20workers&In-Reply-To=%3C48DA6A50.5040907%40sicking.cc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="058536.html">
   <LINK REL="Next"  HREF="058545.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] workers</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20workers&In-Reply-To=%3C48DA6A50.5040907%40sicking.cc%3E"
       TITLE="[whatwg] workers">jonas at sicking.cc
       </A><BR>
    <I>Wed Sep 24 09:26:56 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="058536.html">[whatwg] workers
</A></li>
        <LI>Next message: <A HREF="058545.html">[whatwg] workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58544">[ date ]</a>
              <a href="thread.html#58544">[ thread ]</a>
              <a href="subject.html#58544">[ subject ]</a>
              <a href="author.html#58544">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Guys,

Sorry about the slow feedback, has been on vacation most of the time.

So first off I don't think we can remove the ability to pass
MessagePorts around. This ability exists in Window.postMessage already
per spec so nothing that the workers spec does can change that. Also, if
we think the &quot;pass-around-ability&quot; of ports affect how much we want to
use them, punting the pass-around-ability to the second version of the
spec shouldn't really affect how we design the API as we'll arrive at
the second version sooner or later.

So given that, I prefer the current API. I think that for the common
case of non-shared workers it makes for a simpler API. The fact that you 
argue that there should be a catch-all global onmessage inside the 
worker seems to indicate that using onconnect is lacking somewhere.

I agree with the benefit of keeping shared vs. non-shared workers as 
similar as possible. However I feel that the complexities that come with 
always using ports for non-shared workers outweighs it.

/ Jonas

Aaron Boodman wrote:
&gt;<i> Ping? Thoughts? Anyone?
</I>&gt;<i> 
</I>&gt;<i> Jonas, I know you are the one most likely to be affected by this in
</I>&gt;<i> the near term. Thoughts?
</I>&gt;<i> 
</I>&gt;<i> I know you are generally in favor of something close to the current
</I>&gt;<i> Gears API, and generally against the concept of MessagePorts.
</I>&gt;<i> 
</I>&gt;<i> But I think introducing a MessagePort object is important for two main reasons:
</I>&gt;<i> 
</I>&gt;<i> - Makes the interface very similar for dedicated and shared workers,
</I>&gt;<i> which I think makes it easier to use both.
</I>&gt;<i> - Makes it easy for developers to set up multiple 'conversations'
</I>&gt;<i> (ports) between clients and workers by calling connect(). The lack of
</I>&gt;<i> this is a key annoyance with current Gears workers
</I>&gt;<i> 
</I>&gt;<i> Note that I have suggested punting on passing ports around initially,
</I>&gt;<i> which I feel like is the harder part.
</I>&gt;<i> 
</I>&gt;<i> On Mon, Sep 15, 2008 at 4:52 PM, Chris Prince &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cprince at google.com</A>&gt; wrote:
</I>&gt;&gt;<i> I think your proposal nearly works for window.postMessage() too.  If
</I>&gt;&gt;<i> you move 'onconnect' and 'connect()' into a MessageReceiver interface
</I>&gt;&gt;<i> [better name TBD], and make Worker and Window both inherit from
</I>&gt;&gt;<i> MessageReceiver, do you end up with a unified messaging model?
</I>&gt;<i> 
</I>&gt;<i> Maybe. One wrinkle is that Window's postMessage is a little different,
</I>&gt;<i> because you have to pass the origin you're targeting
</I>&gt;<i> (<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#posting">http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#posting</A>).
</I>&gt;<i> 
</I>&gt;<i> I do think that the 'conversation' concept that MessagePorts represent
</I>&gt;<i> is also useful for cross-window communication and it would nice to
</I>&gt;<i> generalize these as much as possible.
</I>&gt;<i> 
</I>&gt;<i> - a
</I>


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="058536.html">[whatwg] workers
</A></li>
	<LI>Next message: <A HREF="058545.html">[whatwg] workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58544">[ date ]</a>
              <a href="thread.html#58544">[ thread ]</a>
              <a href="subject.html#58544">[ subject ]</a>
              <a href="author.html#58544">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
