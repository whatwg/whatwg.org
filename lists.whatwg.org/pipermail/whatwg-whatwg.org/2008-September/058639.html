<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas performance issue: setting colors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20performance%20issue%3A%20setting%20colors&In-Reply-To=%3C2A23FA39-E159-455B-99AE-FB09D582F820%40w3future.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="058650.html">
   <LINK REL="Next"  HREF="058642.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas performance issue: setting colors</H1>
<!--htdig_noindex-->
    <B>Sjoerd Visscher</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20performance%20issue%3A%20setting%20colors&In-Reply-To=%3C2A23FA39-E159-455B-99AE-FB09D582F820%40w3future.com%3E"
       TITLE="[whatwg] Canvas performance issue: setting colors">sjoerd at w3future.com
       </A><BR>
    <I>Mon Sep 29 15:24:22 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="058650.html">[whatwg] WebSocket websocket-origin
</A></li>
        <LI>Next message: <A HREF="058642.html">[whatwg] Canvas performance issue: setting colors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58639">[ date ]</a>
              <a href="thread.html#58639">[ thread ]</a>
              <a href="subject.html#58639">[ subject ]</a>
              <a href="author.html#58639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

With the increasing speed of javascript engines, some other  
performance issues are starting to become apparent. Take this demo for  
example:

<A HREF="http://playground.q42.nl/animatie/blobs/sjoerd/blobscolor.html">http://playground.q42.nl/animatie/blobs/sjoerd/blobscolor.html</A>

A large percentage of the time goes into building color strings for  
setting the strokeStyle, which the browser then has to take apart  
again. This is a very unnecessary performance hit. (Btw, on my Mac  
this runs faster under Google Chrome in VMware than natively in the  
latest Webkit nightly.)

I think the canvas api should get 2 new methods:

   CanvasColor createRGBAColor(in float r, in float g, in float b, in  
float a)
   CanvasColor createHSLAColor(in float h, in float s, in float l, in  
float a)

CanvasColor objects could be opaque, or maybe they have a toString  
method that returns the CSS serialization. The strokeStyle, fillStyle  
and shadowColor attributes should accept these objects, and probably  
the addColorStop method as well. Using CSS color strings should still  
work obviously. On getting these attributes the serialization must  
still be returned like it is now.

greetings,
--
Sjoerd Visscher
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">sjoerd at w3future.com</A>




</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="058650.html">[whatwg] WebSocket websocket-origin
</A></li>
	<LI>Next message: <A HREF="058642.html">[whatwg] Canvas performance issue: setting colors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58639">[ date ]</a>
              <a href="thread.html#58639">[ thread ]</a>
              <a href="subject.html#58639">[ subject ]</a>
              <a href="author.html#58639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
