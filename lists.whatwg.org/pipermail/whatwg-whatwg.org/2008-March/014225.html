<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] access to local path in input type=&quot;file&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20access%20to%20local%20path%20in%20input%20type%3D%22file%22&In-Reply-To=%3C008901c88ae6%243bf59300%246501a8c0%40disxgdg31szkx7%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014224.html">
   <LINK REL="Next"  HREF="014228.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] access to local path in input type=&quot;file&quot;</H1>
<!--htdig_noindex-->
    <B>ddailey</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20access%20to%20local%20path%20in%20input%20type%3D%22file%22&In-Reply-To=%3C008901c88ae6%243bf59300%246501a8c0%40disxgdg31szkx7%3E"
       TITLE="[whatwg] access to local path in input type=&quot;file&quot;">ddailey at zoominternet.net
       </A><BR>
    <I>Thu Mar 20 16:58:03 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="014224.html">[whatwg] Clarifications needed in &quot;application cache selection	algorithm&quot; section
</A></li>
        <LI>Next message: <A HREF="014228.html">[whatwg] access to local path in input type=&quot;file&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14225">[ date ]</a>
              <a href="thread.html#14225">[ thread ]</a>
              <a href="subject.html#14225">[ subject ]</a>
              <a href="author.html#14225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>In the code which follows, both IE7, FF(2.0), and Safari(3.1) allow the user 
to change the src attribute of an image based on her perusal of local file 
space. Opera 9.5 doesn't seem to allow access to the path data necessary for 
accomplishing this rollover effect, and I suspect that may be how it is 
supposed to be according to emerging standards. That is the situation when 
the HTML file is stored on localhost.

If however, one places the code on a server (see 
<A HREF="http://granite.sru.edu/~ddailey/imageUpload.htm">http://granite.sru.edu/~ddailey/imageUpload.htm</A>) then the program works from 
none of the browsers. apologies in advance if I made a mistake :(

While I understand the possible risk of exposing a path name of the local 
file system to script, the various use cases of allowing users to access 
local images within HTML, the &lt;canvas&gt; tag and within &lt;svg&gt; all seem 
self-evident to me. Is there some standard workaround to allow the user to 
change the source of an image on a web page to one that is locally stored? I 
used to have a dozen mini-apps that took advantage of the ability to do this 
(they even used to work in Netscape 4 and IE 4), but the programs have all 
broken in the past few years in all contexts except IE -- (for example here 
<A HREF="http://granite.sru.edu/~ddailey/svg/clipembed.html">http://granite.sru.edu/~ddailey/svg/clipembed.html</A> where the input type=file 
script is remarkably simple).

What seems odd to me is that the browsers (except Opera) all seem to expose 
the path data to script, despite blocking the easy use of that data. Maybe 
I'm missing something obvious.

Apologies, also, if this issue has already been discussed -- my memory seems 
never to have been what it should have been.

regards,
David

-------------code------------
&lt;html&gt;
&lt;head&gt;
 &lt;script&gt;
 function change(I,s){
  alert(document.getElementById(&quot;y&quot;).value)
  pieces=I.src.split(&quot;/&quot;)
  pieces.pop()
  path=pieces.join(&quot;/&quot;)+&quot;/&quot;
  spieces=s.split(/[\/\\]/)
  file=spieces.pop()
  path=spieces.join(&quot;/&quot;)+&quot;/&quot;
  alert(path)
  f.Q.value=&quot;<A HREF="file://localhost/&quot;+s">file://localhost/&quot;+s</A>
  I.src=f.Q.value
 }
 &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;form id=&quot;f&quot;&gt;
&lt;input type=&quot;file&quot; size=&quot;70&quot; id=&quot;y&quot; onChange=&quot;change(z,this.value)&quot;&gt;&lt;br&gt;
&lt;input type=&quot;button&quot; value=&quot;personalize&quot; onclick=&quot;z.src=f.Q.value&quot;&gt;
&lt;img src=&quot;../p/p0.jpg&quot; id=&quot;z&quot; width=&quot;75&quot; height=&quot;100&quot; border=&quot;0&quot; alt=&quot;&quot;&gt;&lt;br&gt;
&lt;input size=&quot;70&quot; id=&quot;Q&quot;&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;




</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014224.html">[whatwg] Clarifications needed in &quot;application cache selection	algorithm&quot; section
</A></li>
	<LI>Next message: <A HREF="014228.html">[whatwg] access to local path in input type=&quot;file&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14225">[ date ]</a>
              <a href="thread.html#14225">[ thread ]</a>
              <a href="subject.html#14225">[ subject ]</a>
              <a href="author.html#14225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
