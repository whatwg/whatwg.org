<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] postMessage and serialization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%20and%20serialization&In-Reply-To=%3C47C9200D.3010606%40sicking.cc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="014103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] postMessage and serialization</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%20and%20serialization&In-Reply-To=%3C47C9200D.3010606%40sicking.cc%3E"
       TITLE="[whatwg] postMessage and serialization">jonas at sicking.cc
       </A><BR>
    <I>Sat Mar  1 01:21:17 PST 2008</I>
    <P><UL>
        
        <LI>Next message: <A HREF="014103.html">[whatwg] reply() extension to postMessage()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14102">[ date ]</a>
              <a href="thread.html#14102">[ thread ]</a>
              <a href="subject.html#14102">[ subject ]</a>
              <a href="author.html#14102">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Aaron Boodman wrote:
&gt;&gt;<i>  Passing booleans, numbers and strings is trivial using the current API.
</I>&gt;&gt;<i>  Passing arrays of booleans and numbers is trivial too.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  Passing objects, or arrays of strings, arrays, or objects, is more
</I>&gt;&gt;<i>  complex, but as you point out, it can be done using JSON libraries. Since
</I>&gt;&gt;<i>  it is likely that JSON will be supported natively by UAs in due course, it
</I>&gt;&gt;<i>  seems better to wait for that support rather than adding type support to
</I>&gt;&gt;<i>  postMessage().
</I>&gt;<i> 
</I>&gt;<i> I've seen performance problems using JS-based JSON libraries with
</I>&gt;<i> Gears workers. In those cases, the developer had to revert to hacky
</I>&gt;<i> custom message formats where what he really wanted was to pass an
</I>&gt;<i> object.
</I>&gt;<i> 
</I>&gt;<i> Someday, all browsers will have fast JSON support built in, but that
</I>&gt;<i> will be awhile for IE. Gears could implement postMessage today, but
</I>&gt;<i> we've looked into implementing fast JSON support and it seems
</I>&gt;<i> difficult to do much better than you can do with script without access
</I>&gt;<i> to the script engine internals.
</I>
Seems like you're advocating requesting that browsers (IE) add one 
feature (JSON postMessage) to make up for lack of another feature (built 
in JSON)? Wouldn't it then be better to standardize a way to do JSON 
since that could benefit many other features too, such as JSON in DOM 
storage and JSON over XMLHttpRequest.

&gt;&gt;<i>  It seems that most messages will consist either of simple strings, or of
</I>&gt;&gt;<i>  complex data structures (objects). Reconstructing JS objects is not a
</I>&gt;&gt;<i>  trivial operation; you have to worry about references into other parts of
</I>&gt;&gt;<i>  the structure, getters and setters that hang or throw or return infinite
</I>&gt;&gt;<i>  arrays, functions, members that aren't enumerable, etc. I'd rather not go
</I>&gt;&gt;<i>  down that rat hole with v1.
</I>&gt;<i> 
</I>&gt;<i> You'll have these problems with JSON too though, right? Whatever the
</I>&gt;<i> rules are, we'll have to figure them out eventually.
</I>
Right, but trying to figure it out now would stall implementation of the 
existing specification, one which already have several implementations 
under way and seems very useful.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="014103.html">[whatwg] reply() extension to postMessage()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14102">[ date ]</a>
              <a href="thread.html#14102">[ thread ]</a>
              <a href="subject.html#14102">[ subject ]</a>
              <a href="author.html#14102">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
