<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Drag-and-drop%20folders/files%20support%20with%20directory%0A%20structure%20using%20DirectoryEntry&In-Reply-To=%3CCABirCh-zzDhWKQdZH9vDHcT7xFTp7eqbYqduA3fd5k7G%2BToXLQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="076093.html">
   <LINK REL="Next"  HREF="076102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Drag-and-drop%20folders/files%20support%20with%20directory%0A%20structure%20using%20DirectoryEntry&In-Reply-To=%3CCABirCh-zzDhWKQdZH9vDHcT7xFTp7eqbYqduA3fd5k7G%2BToXLQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry">glenn at zewt.org
       </A><BR>
    <I>Tue Nov 15 15:02:28 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="076093.html">[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
</A></li>
        <LI>Next message: <A HREF="076102.html">[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76094">[ date ]</a>
              <a href="thread.html#76094">[ thread ]</a>
              <a href="subject.html#76094">[ subject ]</a>
              <a href="author.html#76094">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Nov 15, 2011 at 5:21 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:

&gt;<i> Adding FileEntry/DirectoryEntry seems confusing since those are
</I>&gt;<i> generally writable in the FileSystem API spec, right? Additionally,
</I>&gt;<i> DirectoryEntry is asynchronous, which makes enumerating the tree more
</I>&gt;<i> painful.
</I>&gt;<i>
</I>&gt;<i> The way we were planning on exposing this in Gecko is to simply set
</I>&gt;<i> File.name to the full relative path to the folder dropped. So in the
</I>&gt;<i> example above, if the user dropped the &quot;Photos&quot; folder from the
</I>&gt;<i> example above on a page, we'd make .files return a list of 7 Files,
</I>&gt;<i> with names like &quot;Photos/trip/1.jpg&quot;, &quot;Photos/trip/2.jpg&quot;,
</I>&gt;<i> &quot;Photos/trip/3.jpg&quot;, &quot;Photos/halloween/a.jpg&quot;, etc.
</I>&gt;<i>
</I>
That requires a full directory traversal in advance to find all of the
files, though; the tree could be very large.  For example, a sharded
directory tree containing hundreds of thousands of files with individual
frames of a video isn't unheard of, and there's no need to read it all in
advance.  Directory trees with tens of thousands of photos, audio clips,
emails (Maildir), etc. aren't uncommon, either.

DirectoryEntry's asynchronous API seems to have the same advantages here as
they do for regular filesystem access.  It would also set the stage for
exposing writable directories down the line (eg. drag an input and output
directory for file processing), after the security issues are figured out.

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="076093.html">[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
</A></li>
	<LI>Next message: <A HREF="076102.html">[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76094">[ date ]</a>
              <a href="thread.html#76094">[ thread ]</a>
              <a href="subject.html#76094">[ subject ]</a>
              <a href="author.html#76094">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
