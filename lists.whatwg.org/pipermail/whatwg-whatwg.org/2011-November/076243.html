<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Automatic transaction should support changing the	value of input/textarea
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Automatic%20transaction%20should%20support%20changing%20the%0A%09value%20of%20input/textarea&In-Reply-To=%3CCA%2Bc2ei9Mm-S9rSq0jGbPQ6_5qt0cZLaGdoD6VKD1AZ1Sz0z-nQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="076241.html">
   <LINK REL="Next"  HREF="076244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Automatic transaction should support changing the	value of input/textarea</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Automatic%20transaction%20should%20support%20changing%20the%0A%09value%20of%20input/textarea&In-Reply-To=%3CCA%2Bc2ei9Mm-S9rSq0jGbPQ6_5qt0cZLaGdoD6VKD1AZ1Sz0z-nQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Automatic transaction should support changing the	value of input/textarea">jonas at sicking.cc
       </A><BR>
    <I>Sun Nov 27 22:13:08 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="076241.html">[whatwg] Automatic transaction should support changing the	value of input/textarea
</A></li>
        <LI>Next message: <A HREF="076244.html">[whatwg] Automatic transaction should support changing the	value of input/textarea
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76243">[ date ]</a>
              <a href="thread.html#76243">[ thread ]</a>
              <a href="subject.html#76243">[ subject ]</a>
              <a href="author.html#76243">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Nov 26, 2011 at 6:57 PM, Ryosuke Niwa &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">rniwa at webkit.org</A>&gt; wrote:
&gt;<i> On my second thought, it's probably okay to require UAs to always restore
</I>&gt;<i> the entire value because the only cause where UA needs to store the old data
</I>&gt;<i> is when the script sets the value in automatic transaction, and it doesn't
</I>&gt;<i> impose new burdens on UAs in any other situations since scripts can't access
</I>&gt;<i> the shadow DOM of native input/textarea implementations.
</I>&gt;<i>
</I>&gt;<i> Alright, I think I'd just say that assignment to value should be revertible
</I>&gt;<i> unconditionally so as long as input and textarea exist.
</I>
Another option is to say that if the textarea value is any other value
than the &quot;after&quot; value when a automatic transaction is undone, it
doesn't do anything. One fairly simple way to do this would be to
store a hash of the &quot;after&quot; value and compare that to a hash of the
current value. If the two doesn't match up then undoing the
transaction would do nothing.

This allows the implementation to store far less data for each
transaction. If computing the hash is a concern, then the
implementation could simply store the whole value which is no worse
than what the above requires.

There are other solutions too, which require monitor *all* mutations
that happen to a text node outside of automatic transactions, but they
are likely too complex to implement.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="076241.html">[whatwg] Automatic transaction should support changing the	value of input/textarea
</A></li>
	<LI>Next message: <A HREF="076244.html">[whatwg] Automatic transaction should support changing the	value of input/textarea
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76243">[ date ]</a>
              <a href="thread.html#76243">[ thread ]</a>
              <a href="subject.html#76243">[ subject ]</a>
              <a href="author.html#76243">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
