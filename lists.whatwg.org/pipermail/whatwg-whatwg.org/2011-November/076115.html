<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Drag-and-drop%20folders/files%20support%20with%20directory%0A%20structure%20using%20DirectoryEntry&In-Reply-To=%3CCAHvSExdPLSh2saTS%2BVq6dxQ%3DJAxFBZqPfd88AVzO42rDXaaDrw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="076116.html">
   <LINK REL="Next"  HREF="076110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry</H1>
<!--htdig_noindex-->
    <B>Eric U</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Drag-and-drop%20folders/files%20support%20with%20directory%0A%20structure%20using%20DirectoryEntry&In-Reply-To=%3CCAHvSExdPLSh2saTS%2BVq6dxQ%3DJAxFBZqPfd88AVzO42rDXaaDrw%40mail.gmail.com%3E"
       TITLE="[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry">ericu at google.com
       </A><BR>
    <I>Wed Nov 16 09:01:04 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="076116.html">[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
</A></li>
        <LI>Next message: <A HREF="076110.html">[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76115">[ date ]</a>
              <a href="thread.html#76115">[ thread ]</a>
              <a href="subject.html#76115">[ subject ]</a>
              <a href="author.html#76115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Nov 15, 2011 at 6:06 PM, Glenn Maynard &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">glenn at zewt.org</A>&gt; wrote:
&gt;<i> On Tue, Nov 15, 2011 at 8:38 PM, Kinuko Yasuda &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">kinuko at chromium.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> The async nature of DirectoryEntry makes the code longer,
</I>&gt;&gt;<i> but webapps can work on the files incrementally and can show
</I>&gt;&gt;<i> progress UI while enumerating. &#160;For the apps that may deal with
</I>&gt;&gt;<i> potentially huge folders providing such a scalable (but slightly
</I>&gt;&gt;<i> more cumbersome) way sounds reasonable to me.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Entry (and subclasses) should also be supported by structured clone. &#160;That
</I>&gt;<i> would allow passing a DirectoryEntry received from file inputs to be passed
</I>&gt;<i> to a worker. &#160;This is something for later, of course, but combined with an
</I>&gt;<i> API to convert between Entry and EntrySync (and DE/DESync), this would
</I>&gt;<i> allow using the much more convenient sync API in a worker, even if the only
</I>&gt;<i> way to retrieve the Entry in the first place is in the UI thread.
</I>
As Kinuko mentions, toURL obviates the need for structured clone for Entry.
I'd rather not add support for that if we can avoid it, and this seems
like an acceptable workaround.

While the URL format for non-sandboxed files has yet to be worked out,
I think we need toURL to work no matter where the file comes from.
It's already the case that an Entry can expire if the underlying file
is deleted or moved; I think it's OK for the URL to expire under
similar circumstances.  In the case of a drag, we can just say that it
expires when either the page goes away or the underlying file does
[analogous to the expiry of the data in a normal drag event, I think,
which should last as long as the page does].

&gt;<i> I think this is a better solution to the inconvenience of async APIs than
</I>&gt;<i> falling back to exposing unscalable sync interfaces in the main thread.
</I>&gt;<i> This is one of the reasons we have workers.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Glenn Maynard
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="076116.html">[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
</A></li>
	<LI>Next message: <A HREF="076110.html">[whatwg] Drag-and-drop folders/files support with directory structure using DirectoryEntry
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76115">[ date ]</a>
              <a href="thread.html#76115">[ thread ]</a>
              <a href="subject.html#76115">[ subject ]</a>
              <a href="author.html#76115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
