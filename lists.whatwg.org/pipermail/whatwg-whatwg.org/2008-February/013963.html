<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] reply() extension to postMessage()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20reply%28%29%20extension%20to%20postMessage%28%29&In-Reply-To=%3C2F3786B8-AC35-431F-8939-56873DAD3F54%40mac.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013962.html">
   <LINK REL="Next"  HREF="013964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] reply() extension to postMessage()</H1>
<!--htdig_noindex-->
    <B>Henry Mason</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20reply%28%29%20extension%20to%20postMessage%28%29&In-Reply-To=%3C2F3786B8-AC35-431F-8939-56873DAD3F54%40mac.com%3E"
       TITLE="[whatwg] reply() extension to postMessage()">hmason at mac.com
       </A><BR>
    <I>Thu Feb 14 08:43:03 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="013962.html">[whatwg] reply() extension to postMessage()
</A></li>
        <LI>Next message: <A HREF="013964.html">[whatwg] reply() extension to postMessage()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13963">[ date ]</a>
              <a href="thread.html#13963">[ thread ]</a>
              <a href="subject.html#13963">[ subject ]</a>
              <a href="author.html#13963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Feb 14, 2008, at 11:18 AM, Anne van Kesteren wrote:

&gt;<i> Given that everyone is now updating their postMessage() code  
</I>&gt;<i> anyway, I wonder if it's possible to quickly make another minor  
</I>&gt;<i> tweak. The proposal is to remove the source attribute from  
</I>&gt;<i> MessageEvent and replace it with a reply() method. The semantics of  
</I>&gt;<i> the reply() are probably best described in terms of equivalence.  
</I>&gt;<i> That is,
</I>&gt;<i>
</I>&gt;<i>   e.reply(message)
</I>&gt;<i>
</I>&gt;<i> is equivalent to
</I>&gt;<i>
</I>&gt;<i>   e.source.postMessage(message, e.origin)
</I>&gt;<i>
</I>
Ooo, I like that idea. I have one concern, however. Presumably, the  
message event that is sent as a reply could itself be replied. Since  
postMessage's spec currently says:

&quot;The postMessage() method must only return once the event dispatch  
has been completely processed by the target document (i.e. all three  
of the capture, target, and bubble phases have been done, and event  
listeners have been executed as appropriate).&quot;

...this behavior could cause some somewhat nasty infinite recursion.  
So what if we made reply() asynchronous so that the the reply message  
event doesn't need to be dispatched on the original message posting  
document until after the original postMessage from the sender is  
finished processing?

-Henry



</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013962.html">[whatwg] reply() extension to postMessage()
</A></li>
	<LI>Next message: <A HREF="013964.html">[whatwg] reply() extension to postMessage()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13963">[ date ]</a>
              <a href="thread.html#13963">[ thread ]</a>
              <a href="subject.html#13963">[ subject ]</a>
              <a href="author.html#13963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
