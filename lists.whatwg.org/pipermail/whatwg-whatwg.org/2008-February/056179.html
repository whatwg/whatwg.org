<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] More random comments on the putImageData definition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20random%20comments%20on%20the%20putImageData%20definition&In-Reply-To=%3C11e306600802100041s55824966mec9168f5eb4c64af%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056274.html">
   <LINK REL="Next"  HREF="056181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] More random comments on the putImageData definition</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20random%20comments%20on%20the%20putImageData%20definition&In-Reply-To=%3C11e306600802100041s55824966mec9168f5eb4c64af%40mail.gmail.com%3E"
       TITLE="[whatwg] More random comments on the putImageData definition">robert at ocallahan.org
       </A><BR>
    <I>Sun Feb 10 00:41:34 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056274.html">[whatwg] Significant changes to globalStorage
</A></li>
        <LI>Next message: <A HREF="056181.html">[whatwg] More random comments on the putImageData definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56179">[ date ]</a>
              <a href="thread.html#56179">[ thread ]</a>
              <a href="subject.html#56179">[ subject ]</a>
              <a href="author.html#56179">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Jan 26, 2008 11:57 AM, Oliver Hunt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">oliver at apple.com</A>&gt; wrote:

&gt;<i> Another thing that we need is some way to determine what the device
</I>&gt;<i> pixel-&gt;css pixel ratio is.  Currently there's isn't even a real way to
</I>&gt;<i> tell that it's 1:1 -- you would have do do a fillRect(width-1,
</I>&gt;<i> height-1, 1, 1),; then getImageData(width-1, height-1, 1, 1) and see
</I>&gt;<i> if they match.  Conceivably you could do this multiple times to
</I>&gt;<i> estimate the ratio, but it would be non-trivial.
</I>&gt;<i>
</I>
I think we have to be careful exposing that ratio to Web developers. With
the current ImageData spec it seems too easy for developers to assume a 1:1
ratio, notice that everything works in their tests, and deploy lots of
content which breaks when a browser tries to Do The Right Thing on some
other device, so we'll all just end up having to fix the ratio at 1:1 (or at
least do something equivalent for ImageData).

(Gecko 1.9 allows the ratio to vary in general for Web content, either due
to a high-DPI display device or due to user zooming, and things work pretty
well because there is no way for Web content to detect, or depend on, the
ratio. Unfortunately &lt;canvas&gt; doesn't currently change its internal buffer
size to match.)

So for ImageData, how about making the image data array have, by default,
one pixel value per canvas coordinate unit? If we really need to expose a
higher-resolution underlying buffer, then add an API to get the device-pixel
per canvas-coordinate-unit ratio, and extend createImageData and
getImageData so the ImageData array dimensions can be given as optional
extra parameters. Then it would be hard for an author to be surprised by an
unexpected ImageData array size.

Rob
-- 
&quot;He was pierced for our transgressions, he was crushed for our iniquities;
the punishment that brought us peace was upon him, and by his wounds we are
healed. We all, like sheep, have gone astray, each of us has turned to his
own way; and the LORD has laid on him the iniquity of us all.&quot; [Isaiah
53:5-6]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080210/db9dbda2/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080210/db9dbda2/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056274.html">[whatwg] Significant changes to globalStorage
</A></li>
	<LI>Next message: <A HREF="056181.html">[whatwg] More random comments on the putImageData definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56179">[ date ]</a>
              <a href="thread.html#56179">[ thread ]</a>
              <a href="subject.html#56179">[ subject ]</a>
              <a href="author.html#56179">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
