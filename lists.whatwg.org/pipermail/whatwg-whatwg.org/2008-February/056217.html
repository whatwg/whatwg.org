<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fixed a security problem with postMessage()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fixed%20a%20security%20problem%20with%20postMessage%28%29&In-Reply-To=%3C47B203B1.6010800%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056216.html">
   <LINK REL="Next"  HREF="056219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fixed a security problem with postMessage()</H1>
<!--htdig_noindex-->
    <B>Jeff Walden</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fixed%20a%20security%20problem%20with%20postMessage%28%29&In-Reply-To=%3C47B203B1.6010800%40mit.edu%3E"
       TITLE="[whatwg] Fixed a security problem with postMessage()">jwalden+whatwg at MIT.EDU
       </A><BR>
    <I>Tue Feb 12 12:38:09 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056216.html">[whatwg] Fixed a security problem with postMessage()
</A></li>
        <LI>Next message: <A HREF="056219.html">[whatwg] Fixed a security problem with postMessage()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56217">[ date ]</a>
              <a href="thread.html#56217">[ thread ]</a>
              <a href="subject.html#56217">[ subject ]</a>
              <a href="author.html#56217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Ian Hickson wrote:
&gt;<i>  * message.domain isn't actually enough to verify any security, given that    on shared hosts one IP address can map to several hostnames and thus    people can end up running servers on different ports that respond to    requests from domains they don't own.
</I>&gt;<i>
</I>&gt;<i>  * message.uri can leak information, e.g. if the user's password is in the    query component of the URI.
</I>
Good catches on both; I agree these changes make sense.


&gt;<i> I've replaced both with .origin, which is intended to return the <A HREF="scheme://hostname/">scheme://hostname/</A> or <A HREF="scheme://hostname:port/">scheme://hostname:port/</A> (when the port is non-standard) of the origin of the source document.
</I>
I assume you meant without the trailing slash, given that that's actually part of the path?


This doesn't sound like it should be too hard to implement, although the manual splicing-out of the username/password from the origin is slightly worrying (if entirely necessary) from a careful-manipulation-is-tricky point of view.  I don't see any other option, tho, on that point.

Jeff

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056216.html">[whatwg] Fixed a security problem with postMessage()
</A></li>
	<LI>Next message: <A HREF="056219.html">[whatwg] Fixed a security problem with postMessage()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56217">[ date ]</a>
              <a href="thread.html#56217">[ thread ]</a>
              <a href="subject.html#56217">[ subject ]</a>
              <a href="author.html#56217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
