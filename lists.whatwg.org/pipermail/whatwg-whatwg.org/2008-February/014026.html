<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] IE Team Feedback on HTML 5.0 Cross Document Messaging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20IE%20Team%20Feedback%20on%20HTML%205.0%20Cross%20Document%20Messaging&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014024.html">
   <LINK REL="Next"  HREF="014025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] IE Team Feedback on HTML 5.0 Cross Document Messaging</H1>
<!--htdig_noindex-->
    <B>Sunava Dutta</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20IE%20Team%20Feedback%20on%20HTML%205.0%20Cross%20Document%20Messaging&In-Reply-To="
       TITLE="[whatwg] IE Team Feedback on HTML 5.0 Cross Document Messaging">sunavad at windows.microsoft.com
       </A><BR>
    <I>Thu Feb 21 19:18:40 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="014024.html">[whatwg] article: do we really need this?
</A></li>
        <LI>Next message: <A HREF="014025.html">[whatwg] More ImageData issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14026">[ date ]</a>
              <a href="thread.html#14026">[ thread ]</a>
              <a href="subject.html#14026">[ subject ]</a>
              <a href="author.html#14026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>This is a compelling feature and will greatly ease developer pains around cross frame communication hacks. -:)

*        The language in <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/section-crossDocumentMessages.html">http://www.whatwg.org/specs/web-apps/current-work/multipage/section-crossDocumentMessages.html</A> overpromises the security of this feature and we recommend a revision. The current language implies that cross site scripting attacks are not possible. This is not correct since a developer can receive script from a postmessage and run it in the DOM.

o   This section introduces a messaging system that allows documents to communicate with each other regardless of their source domain, in a way designed to not enable cross-site scripting attacks  enable prevention of script injection attacks.

*        We're glad to see the e.URI gone. It exposed too much potentially dangerous information.

*       For the postMessage (message, origin) method we would recommend the parameter be called postMessage(message, targetOrigin) since it's easier to understand what it is.

Here's our rewrite!
Cheers,


6.4.1 Processing model
When a script invokes the postMessage(message, targetOrigin) method on a Window&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/section-the-default0.html#window">http://www.whatwg.org/specs/web-apps/current-work/multipage/section-the-default0.html#window</A>&gt; object, the user agent must follow these steps:

 1.  Let target be the Document object that is the active document&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/section-windows.html#active">http://www.whatwg.org/specs/web-apps/current-work/multipage/section-windows.html#active</A>&gt; of the Window&lt;<A HREF="http://www.whatwg.org/specs/web-app