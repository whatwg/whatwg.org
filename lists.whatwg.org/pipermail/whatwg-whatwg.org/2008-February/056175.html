<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] postMessage: event.source allows navigation of sender
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%3A%20event.source%20allows%20navigation%20of%20sender&In-Reply-To=%3C47ADE0F2.3070902%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="056171.html">
   <LINK REL="Next"  HREF="056158.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] postMessage: event.source allows navigation of sender</H1>
<!--htdig_noindex-->
    <B>Jeff Walden</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%3A%20event.source%20allows%20navigation%20of%20sender&In-Reply-To=%3C47ADE0F2.3070902%40mit.edu%3E"
       TITLE="[whatwg] postMessage: event.source allows navigation of sender">jwalden+whatwg at MIT.EDU
       </A><BR>
    <I>Sat Feb  9 09:20:50 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="056171.html">[whatwg] postMessage: event.source allows navigation of sender
</A></li>
        <LI>Next message: <A HREF="056158.html">[whatwg] postMessage: event.source allows navigation of sender
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56175">[ date ]</a>
              <a href="thread.html#56175">[ thread ]</a>
              <a href="subject.html#56175">[ subject ]</a>
              <a href="author.html#56175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I'm a bit late to this party due to turning off list email because I didn't think I could handle it in addition to all the other email I receive.  I just reenabled it to not miss anything; we'll see how this actually goes this time around.   :-\

Adam Barth wrote:
&gt;<i> On Feb 7, 2008 4:32 AM, Hallvord R M Steen &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hallvors at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> One case I'm still
</I>&gt;&gt;<i> somewhat concerned about is that one is allowed to set the location of
</I>&gt;&gt;<i> any top-level window according to the ancestor policy,
</I>&gt;<i>
</I>&gt;<i> Yes.  I think there is a lot of room for improvement in this part of
</I>&gt;<i> the navigation policy.
</I>
While to an extent it seems there's agreement that the ancestor policy works well enough to not worry overly much about postMessage exposing the sender's window, the top-level window thing is a pretty big hole that breaks dumping content in an iframe if that content can't be trusted.  postMessage exposing the sender isn't that meaningful if you can just change the toplevel site, even if the location bar changes correspondingly.  (Really, who looks at the location bar on even dynamic, JSy pages other than after an intentional navigation?  I doubt I do.)

That said, I think a reply() method might be a better idea than a source property.  I'm not sure how meaningful that would be for MessageEvent generically, but I guess source had that problem already for server-sent events.  Do note it's more spec burden due to determining sender identity (could be mitigated by equating reply with calling postMessage on the proposed-hidden source property); dynamic scope-dependent behavior is no fun that way.


&gt;<i> It seems like a better solution is to improve the navigation policy
</I>&gt;<i> for top-level windows.  That way, web sites don't have to fight the
</I>&gt;<i> losing battle of controlling references to their windows.
</I>
Agreed.


&gt;<i> One possibility is to prevent one frame from navigating another if the
</I>&gt;<i> frames are in different units of related browsing contexts.
</I>
This doesn't help the iframe case, which is something that, say, Facebook or any site that embeds Google Maps would care about -- or, indeed, any site that wanted to display some other site in an iframe.  The subsequent _unrelated proposal would need an extension for frames/iframes for this to be a complete solution.

Jeff

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="056171.html">[whatwg] postMessage: event.source allows navigation of sender
</A></li>
	<LI>Next message: <A HREF="056158.html">[whatwg] postMessage: event.source allows navigation of sender
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56175">[ date ]</a>
              <a href="thread.html#56175">[ thread ]</a>
              <a href="subject.html#56175">[ subject ]</a>
              <a href="author.html#56175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
