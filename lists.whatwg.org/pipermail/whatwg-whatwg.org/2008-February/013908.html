<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] More random comments on the putImageData definition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20random%20comments%20on%20the%20putImageData%20definition&In-Reply-To=%3CE997E3BD-5A50-412A-B1FA-B1095F8A557F%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013906.html">
   <LINK REL="Next"  HREF="013915.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] More random comments on the putImageData definition</H1>
<!--htdig_noindex-->
    <B>Oliver Hunt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20More%20random%20comments%20on%20the%20putImageData%20definition&In-Reply-To=%3CE997E3BD-5A50-412A-B1FA-B1095F8A557F%40apple.com%3E"
       TITLE="[whatwg] More random comments on the putImageData definition">oliver at apple.com
       </A><BR>
    <I>Sun Feb 10 01:07:46 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="013906.html">[whatwg] More random comments on the putImageData definition
</A></li>
        <LI>Next message: <A HREF="013915.html">[whatwg] More random comments on the putImageData definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13908">[ date ]</a>
              <a href="thread.html#13908">[ thread ]</a>
              <a href="subject.html#13908">[ subject ]</a>
              <a href="author.html#13908">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Feb 10, 2008, at 12:41 AM, Robert O'Callahan wrote:

&gt;<i> On Jan 26, 2008 11:57 AM, Oliver Hunt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">oliver at apple.com</A>&gt; wrote:
</I>&gt;<i> Another thing that we need is some way to determine what the device
</I>&gt;<i> pixel-&gt;css pixel ratio is.  Currently there's isn't even a real way to
</I>&gt;<i> tell that it's 1:1 -- you would have do do a fillRect(width-1,
</I>&gt;<i> height-1, 1, 1),; then getImageData(width-1, height-1, 1, 1) and see
</I>&gt;<i> if they match.  Conceivably you could do this multiple times to
</I>&gt;<i> estimate the ratio, but it would be non-trivial.
</I>&gt;<i>
</I>&gt;<i> I think we have to be careful exposing that ratio to Web developers.  
</I>&gt;<i> With the current ImageData spec it seems too easy for developers to  
</I>&gt;<i> assume a 1:1 ratio, notice that everything works in their tests, and  
</I>&gt;<i> deploy lots of content which breaks when a browser tries to Do The  
</I>&gt;<i> Right Thing on some other device, so we'll all just end up having to  
</I>&gt;<i> fix the ratio at 1:1 (or at least do something equivalent for  
</I>&gt;<i> ImageData).
</I>
&gt;<i> (Gecko 1.9 allows the ratio to vary in general for Web content,  
</I>&gt;<i> either due to a high-DPI display device or due to user zooming, and  
</I>&gt;<i> things work pretty well because there is no way for Web content to  
</I>&gt;<i> detect, or depend on, the ratio. Unfortunately &lt;canvas&gt; doesn't  
</I>&gt;<i> currently change its internal buffer size to match.)
</I>
&gt;<i> So for ImageData, how about making the image data array have, by  
</I>&gt;<i> default, one pixel value per canvas coordinate unit? If we really  
</I>&gt;<i> need to expose a higher-resolution underlying buffer, then add an  
</I>&gt;<i> API to get the device-pixel per canvas-coordinate-unit ratio, and  
</I>&gt;<i> extend createImageData and getImageData so the ImageData array  
</I>&gt;<i> dimensions can be given as optional extra parameters. Then it would  
</I>&gt;<i> be hard for an author to be surprised by an unexpected ImageData  
</I>&gt;<i> array size.
</I>
My original question was due to a mis-understanding of the spec, and i  
am completely happy with the way put/getImageData behave with respect  
to hidpi devices as currently specified (ignoring the issue of  
webdevelopers who blindly assume that just because it works now it  
will always work).

That said, basically what you're saying is that canvas should not  
support hidpi.  At all.  There is no need to request the dpi of a  
canvas, but (and here's the critical bit) you can't have get/ 
putImageData work at a different resolution from the backing buffer.   
Their sole purpose is to be a 1:1 mapping to the canvas backing store,  
so saying get/putImageData should work in canvas pixels and not device  
pixels seems to defy the whole reason for this API existing.
&gt;<i>
</I>&gt;<i> Rob
</I>--Oliver
&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> &quot;He was pierced for our transgressions, he was crushed for our  
</I>&gt;<i> iniquities; the punishment that brought us peace was upon him, and  
</I>&gt;<i> by his wounds we are healed. We all, like sheep, have gone astray,  
</I>&gt;<i> each of us has turned to his own way; and the LORD has laid on him  
</I>&gt;<i> the iniquity of us all.&quot; [Isaiah 53:5-6]
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080210/93c9f181/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080210/93c9f181/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013906.html">[whatwg] More random comments on the putImageData definition
</A></li>
	<LI>Next message: <A HREF="013915.html">[whatwg] More random comments on the putImageData definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13908">[ date ]</a>
              <a href="thread.html#13908">[ thread ]</a>
              <a href="subject.html#13908">[ subject ]</a>
              <a href="author.html#13908">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
