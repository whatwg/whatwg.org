<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Exceptions thrown by XMLHttpRequest.responseXML and	XMLHttpRequest.responseText
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Exceptions%20thrown%20by%20XMLHttpRequest.responseXML%20and%0A%09XMLHttpRequest.responseText&In-Reply-To=%3C37E934BE-356B-46ED-959B-2A13C179C0F1%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013987.html">
   <LINK REL="Next"  HREF="013991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Exceptions thrown by XMLHttpRequest.responseXML and	XMLHttpRequest.responseText</H1>
<!--htdig_noindex-->
    <B>Geoffrey Garen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Exceptions%20thrown%20by%20XMLHttpRequest.responseXML%20and%0A%09XMLHttpRequest.responseText&In-Reply-To=%3C37E934BE-356B-46ED-959B-2A13C179C0F1%40apple.com%3E"
       TITLE="[whatwg] Exceptions thrown by XMLHttpRequest.responseXML and	XMLHttpRequest.responseText">ggaren at apple.com
       </A><BR>
    <I>Fri Feb 15 09:19:14 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="013987.html">[whatwg] Meaning of the title= attribute
</A></li>
        <LI>Next message: <A HREF="013991.html">[whatwg] HTML 5: The l (line) element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13990">[ date ]</a>
              <a href="thread.html#13990">[ thread ]</a>
              <a href="subject.html#13990">[ subject ]</a>
              <a href="author.html#13990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi.

The current working draft of the XMLHttpRequest spec says the  
following about responseXML and responseText.

responseText:
If the state is not LOADING or DONE raise an INVALID_STATE_ERR  
exception and terminate these steps.

responseXML:
If the state is not DONE raise an INVALID_STATE_ERR exception and  
terminate these steps.

While implementing this specification in WebKit, we gathered the  
following pieces of data:

1. This specification breaks at least one AJAX library, used by  
greenfieldonline.com.

2. This specification does not match any shipping version of Safari or  
Firefox, which do not throw exceptions.

3. This specification does not match any shipping version of Internet  
Explorer, which throws exceptions in some of these conditions, but not  
all. (The specifics here are a little weird, so I'll leave them out.)

4. Generally speaking, throwing an exception, which aborts a program,  
is a much bigger compatibility risk than not throwing an exception.

Therefore, for WebKit, I've decided that the most compatible and least  
weird behavior is not to throw an exception when accessing  
responseText or responseXML. Rather, for responseText, return the  
empty string, and for responseXML, return null.

Would you be willing to consider editing the XMLHttpRequest spec to  
match this behavior?

Thanks,
Geoff

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013987.html">[whatwg] Meaning of the title= attribute
</A></li>
	<LI>Next message: <A HREF="013991.html">[whatwg] HTML 5: The l (line) element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13990">[ date ]</a>
              <a href="thread.html#13990">[ thread ]</a>
              <a href="subject.html#13990">[ subject ]</a>
              <a href="author.html#13990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
