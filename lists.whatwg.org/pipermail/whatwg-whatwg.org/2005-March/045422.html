<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20ContextAgnosticXmlHttpRequest%3A%20an%20informal%20RFC&In-Reply-To=%3C8da6ad5005030819094b179618%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045421.html">
   <LINK REL="Next"  HREF="045423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC</H1>
<!--htdig_noindex-->
    <B>Chris Holland</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20ContextAgnosticXmlHttpRequest%3A%20an%20informal%20RFC&In-Reply-To=%3C8da6ad5005030819094b179618%40mail.gmail.com%3E"
       TITLE="[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC">frenchy at gmail.com
       </A><BR>
    <I>Tue Mar  8 19:09:43 PST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="045421.html">[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
</A></li>
        <LI>Next message: <A HREF="045423.html">[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45422">[ date ]</a>
              <a href="thread.html#45422">[ thread ]</a>
              <a href="subject.html#45422">[ subject ]</a>
              <a href="author.html#45422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> In any case they couldn't if they wanted to, as the referrer could be
</I>&gt;<i> anything -- for example, it could be a hotmail.msn.com referrer if an
</I>&gt;<i> employee is chatting to another employee using his hotmail account and
</I>&gt;<i> follows a link from such a mail to the other employee's (confidential)
</I>&gt;<i> documents inside the intranet.
</I>
Well, the value of the Referrer header i'm talking about in this case,
would always be the URI of the document originating the
ContextAgnosticXmlHttpRequest, NOT the *document*'s referrer. Based on
this requirement, i should be able to rely on this header to protect
my service. But I agree that existing firewalled syndication services
without referrer-checking in place would still be vulnerable, and we'd
be introducing a significant risk.

Point taken about text/xml also being valid XHTML MIME type, woops. 

How about requiring from a service that it sets an extra HTTP header
to offer its content to &quot;foreign&quot; hosts:

X-Allow-Foreign-Host: All | None | .someforeigndomain.com |
.somehost.someforeigndomain.com

Unless this HTTP header is sent as part of the HTTP response, the User
Agent would &quot;crap out&quot; with some generic, obscure &quot;data retrieval
failure&quot; message (per what you mentioned). If eBay suddently wanted to
expose their REST API to ContextAgnosticHttpRequests, they could
enhance their service to send out an additional X-Allow-Foreign-Host
header. Today's intranet XML/HTTP services should still be reasonably
safe, as none of them would be sending this header, therefore all
attempts to load them from foreign documents would obscurely crap out.

all this, i believe, tends to bleed into your own idea of establishing
some sort of trust relationship. To that end, I need to spend more
time  grokking 11.4 from your document. I think I'm getting there.

 And yes i did have a mild brain malfunction with that reserved port
idea in the first place regarding firewalling, woops#2

&gt;&gt;<i> 2) ensuring its validity as a pure parsable XML document
</I>
&gt;<i>Not sure what you mean by this. If you mean &quot;The XML document must be
</I>&gt;<i>well-formed before it can be parsed into a DOM&quot; then that's true already.
</I>
I wasn't familiar enough with all flavors of implementations of
XmlHttpRequest to be 100% sure that broken/invalid XML could
absolutely not, in any way, be retrieved as, say, a good ol' string,
even if a DOM couldn't be hacked out of it. I was basically trying to
further limit the types of documents you could ever retrieve, to
purely valid XML documents, so no random text or Tag Soup HTML
document could be arbitrarily leeched.



-chris


-- 
Chris Holland
<A HREF="http://chrisholland.blogspot.com/">http://chrisholland.blogspot.com/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045421.html">[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
</A></li>
	<LI>Next message: <A HREF="045423.html">[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45422">[ date ]</a>
              <a href="thread.html#45422">[ thread ]</a>
              <a href="subject.html#45422">[ subject ]</a>
              <a href="author.html#45422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
