<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20ContextAgnosticXmlHttpRequest%3A%20an%20informal%20RFC&In-Reply-To=%3CPine.LNX.4.61.0503090155040.5940%40dhalsim.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045420.html">
   <LINK REL="Next"  HREF="045422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20ContextAgnosticXmlHttpRequest%3A%20an%20informal%20RFC&In-Reply-To=%3CPine.LNX.4.61.0503090155040.5940%40dhalsim.dreamhost.com%3E"
       TITLE="[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC">ian at hixie.ch
       </A><BR>
    <I>Tue Mar  8 18:06:11 PST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="045420.html">[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
</A></li>
        <LI>Next message: <A HREF="045422.html">[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45421">[ date ]</a>
              <a href="thread.html#45421">[ thread ]</a>
              <a href="subject.html#45421">[ subject ]</a>
              <a href="author.html#45421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 8 Mar 2005, Chris Holland wrote:
&gt;<i> 
</I>&gt;<i> Another feature I had mentioned was for the User Agent to send an HTTP 
</I>&gt;<i> Refer(r)er header with absolute integrity. The value, in our specific 
</I>&gt;<i> case, being the URI of our evil foreign document. A publisher of an 
</I>&gt;<i> HTTP/XML service, to truly secure it and restrict it to local access, 
</I>&gt;<i> might restrict Referrer values to specific host patterns.
</I>
Intranet content could just be a Web page, not an HTTP/XML service. 
There's no way to tell the difference remotely.

Existing sensitive content, including existing HTTP/XML services, are not 
protecting themselves using referrer tracking. Thus, requiring referrer 
tracking doesn't solve the problem.

In any case they couldn't if they wanted to, as the referrer could be 
anything -- for example, it could be a hotmail.msn.com referrer if an 
employee is chatting to another employee using his hotmail account and 
follows a link from such a mail to the other employee's (confidential) 
documents inside the intranet.


&gt;<i> Could we also further protect this special object by thoroughly:
</I>&gt;<i> 
</I>&gt;<i> 1) restricting the mime-type it'll accept from the service to text/xml
</I>
Web pages, which are part of the content at risk, can be XHTML. One of the 
correct MIME types for XHTML is text/xml.


&gt;<i> 2) ensuring its validity as a pure parsable XML document
</I>
Not sure what you mean by this. If you mean &quot;The XML document must be 
well-formed before it can be parsed into a DOM&quot; then that's true already.


&gt;<i> Also, and i'm slowly diving further into the crazy-far-fetched here, 
</I>&gt;<i> should a ContextAgnosticXmlHttpRequest be allowed to only perform 
</I>&gt;<i> requests on a specific, reserved, TCP port or range of TCP ports? For 
</I>&gt;<i> intranet sites to be vulnerable, a systems administrator would have had 
</I>&gt;<i> to 1) made the conscious choice to run their HTTP/XML service on that 
</I>&gt;<i> specific port,
</I>
Whatever ports are allowed, port 80 would have to be allowed, otherwise 
the bar to entry for many authors will be too high. And most of the 
sensitive content is on port 80. So allowing other ports won't help.


&gt;<i> 2) opened-up that port on their firewall.
</I>
This is all happening on the &quot;safe&quot; side of the firewall, so firewalls 
won't help here.


The only real solution I can see, which I mentioned in the brain storming 
notes in the draft I cited, is for the UA and third-party host to have a 
handshake wherein the third-party explicitly states that it accepts to do 
business with content from the hostile host before any communication is 
allowed (and if it refuses, the hostile host can't tell the difference 
between it refusing, and it just being a DNS error, socket closed, or 404 
or 500 error -- because knowing which of those it was is a security leak 
in itself).

HTH,
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045420.html">[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
</A></li>
	<LI>Next message: <A HREF="045422.html">[whatwg] ContextAgnosticXmlHttpRequest: an informal RFC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45421">[ date ]</a>
              <a href="thread.html#45421">[ thread ]</a>
              <a href="subject.html#45421">[ subject ]</a>
              <a href="author.html#45421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
