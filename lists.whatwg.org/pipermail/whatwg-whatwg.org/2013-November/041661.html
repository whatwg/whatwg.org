<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Should UA start dragging if [draggable] attr was set after mousedown?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Should%20UA%20start%20dragging%20if%20%5Bdraggable%5D%20attr%20was%20set%0A%20after%20mousedown%3F&In-Reply-To=%3Calpine.DEB.2.00.1311262127360.27766%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041660.html">
   <LINK REL="Next"  HREF="041662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Should UA start dragging if [draggable] attr was set after mousedown?</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Should%20UA%20start%20dragging%20if%20%5Bdraggable%5D%20attr%20was%20set%0A%20after%20mousedown%3F&In-Reply-To=%3Calpine.DEB.2.00.1311262127360.27766%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Should UA start dragging if [draggable] attr was set after mousedown?">ian at hixie.ch
       </A><BR>
    <I>Tue Nov 26 13:30:24 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="041660.html">[whatwg] Parse errors for invalid characters
</A></li>
        <LI>Next message: <A HREF="041662.html">[whatwg] Should &lt;video controls&gt; generate click events?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41661">[ date ]</a>
              <a href="thread.html#41661">[ thread ]</a>
              <a href="subject.html#41661">[ subject ]</a>
              <a href="author.html#41661">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 7 Sep 2013, &#1044;&#1072;&#1085;&#1080;&#1080;&#1083; &#1050;&#1086;&#1089;&#1090;&#1080;&#1085; wrote:
&gt;<i>
</I>&gt;<i> Hello. I am web developer. I contribute to the ACE (ace.ajax.org) project
</I>&gt;<i> (web-based code editor).
</I>&gt;<i> I faced with the issue that IE does not start dragging element if it's
</I>&gt;<i> [draggable] attribute was set with some delay after mousedown event:
</I>&gt;<i> 
</I>&gt;<i> element.draggable = false;
</I>&gt;<i> &gt; element.onmousedown = function() {
</I>&gt;<i> &gt;     setTimeout(function(){ element.draggable = true }, 150);
</I>&gt;<i> &gt; };
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Meanwhile, this works fine in other browsers. I tried to find this behavior
</I>&gt;<i> to be defined by DND specification (
</I>&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html#dnd">http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html#dnd</A>)
</I>&gt;<i> but found nothing related.
</I>&gt;<i> I reported the bug (
</I>&gt;<i> <A HREF="https://connect.microsoft.com/IE/feedback/details/799913/ie-8-11-ignores-draggable-attribute-when-set-after-mousedown-event-using-settimeout">https://connect.microsoft.com/IE/feedback/details/799913/ie-8-11-ignores-draggable-attribute-when-set-after-mousedown-event-using-settimeout</A>)
</I>&gt;<i> but I am not sure this is really bug.
</I>&gt;<i> 
</I>&gt;<i> May we we should add more specific explanation of DND initiatialization, to
</I>&gt;<i> prevent such kind of misunderstanding?
</I>
This is actually defined already.

The key is that the algorithm here:

   <A HREF="http://whatwg.org/html/#drag-and-drop-processing-model">http://whatwg.org/html/#drag-and-drop-processing-model</A>

...triggers when the user &quot;attempts to begin a drag operation&quot;. Only at 
that point does the &quot;draggable&quot; attribute have any effect.

The question is, when does the user &quot;attempt to begin&quot; a drag operation? 
You can tell becaus immediately after the user does so, a &quot;dragstart&quot; 
event is fired.

In the case of IE, is the dragstart event fired immediately after the 
mousedown event, or is it fired over 150ms after? Does the event fire 
before or after the timeout?

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>








<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041660.html">[whatwg] Parse errors for invalid characters
</A></li>
	<LI>Next message: <A HREF="041662.html">[whatwg] Should &lt;video controls&gt; generate click events?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41661">[ date ]</a>
              <a href="thread.html#41661">[ thread ]</a>
              <a href="subject.html#41661">[ subject ]</a>
              <a href="author.html#41661">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
