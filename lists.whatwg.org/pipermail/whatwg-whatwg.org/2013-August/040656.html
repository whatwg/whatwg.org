<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Script preloading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading&In-Reply-To=%3CCABZUbM3Vb8YN_gB%3Dcn4cJu5jH5%2BMaxi2F-jEWgcmuveapfbFkQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040654.html">
   <LINK REL="Next"  HREF="040641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Script preloading</H1>
<!--htdig_noindex-->
    <B>Garrett Smith</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Script%20preloading&In-Reply-To=%3CCABZUbM3Vb8YN_gB%3Dcn4cJu5jH5%2BMaxi2F-jEWgcmuveapfbFkQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Script preloading">dhtmlkitchen at gmail.com
       </A><BR>
    <I>Thu Aug 29 17:30:04 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040654.html">[whatwg] Script preloading
</A></li>
        <LI>Next message: <A HREF="040641.html">[whatwg] Script preloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40656">[ date ]</a>
              <a href="thread.html#40656">[ thread ]</a>
              <a href="subject.html#40656">[ subject ]</a>
              <a href="author.html#40656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 8/29/13, Nicholas Zakas &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">standards at nczconsulting.com</A>&gt; wrote:
&gt;<i> When Kyle and I originally started pushing for a way to preload JavaScript
</I>&gt;<i> many moons ago, the intent was very simple: to allow the downloading of
</I>&gt;<i> JavaScript and execution of JavaScript to be separate. The idea being that
</I>&gt;<i> you should be able to preload scripts that you'll need later without
</I>&gt;<i> incurring the cost of parsing and execution at that point in time. There
</I>&gt;<i> are many examples of people doing this, the most famous being the Gmail
</I>&gt;<i> mobile approach of loading JavaScript in comments and then pulling that
</I>&gt;<i> code out and eval()ing it.
</I>&gt;<i>
</I>
Ian mentioned the idea of exporting a module, and that idea requires
only a function expression to return an object. This requires the
parsing of one function -- the outermost function -- which can be
evaluated later.

Some examples of this include the &quot;Russian Doll Pattern&quot; (Cornford)
&quot;Module Pattern&quot; (Crockford), IIFE (?), and function rewriting (me).

For more on this, see Kangax' article:
<A HREF="http://kangax.github.io/nfe/">http://kangax.github.io/nfe/</A>

(Kangax seems to have gotten bored at conquering javascript these days).

&gt;<i> I still feel very strongly that this pattern is a necessary evolution of
</I>&gt;<i> how we should be able to load scripts into web pages. I just want a flag
</I>&gt;<i> that says &quot;don't execute this now&quot; and a method to say &quot;okay, execute this
</I>&gt;<i> now&quot;. Allowing that flag to be set both in HTML and JavaScript is ideal.
</I>&gt;<i>
</I>&gt;<i> The question of dependency management is, in my mind, a separate issue and
</I>&gt;<i> one that doesn't belong in this layer of the web platform. HTML isn't the
</I>&gt;<i> right spot for a dependency tree to be defined for scripts (or anything
</I>&gt;<i> else). To me, that is a problem to be solved within the ECMAScript world
</I>&gt;<i> much the way CSS has @import available from within CSS code.
</I>&gt;<i>
</I>Dependency issues include problems from having to block for scripts,
document.write, fouc.

Problems arising with dependency stem give rise to the need of
deferring and executing scripts. The problem is that the program needs
to run a script during a certain condition. And if that condition is
not met, then the script resource isn't needed at all.

This could useful for a situation where there are a few different
components on a page, say each component requires 100k of script and
10k of CSS. But the user will probably only use one of those three
components and might very well use none at all. I have worked on pages
like that, with sidebars, pickers, and panels, and I wanted something
like this.

As Ryosuke pointed out, the idea is to declare the script in the page
and then use script to determine when it should load.

My previous post on building a dependency tree delves into the idea
that CSS and JS can be declared to depend on stuff being loaded.  That
feature makes it obvious as to why they're in the source code, to the
human reader.

Regards,
-- 
Garrett
Twitter: @xkit
personx.tumblr.com
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040654.html">[whatwg] Script preloading
</A></li>
	<LI>Next message: <A HREF="040641.html">[whatwg] Script preloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40656">[ date ]</a>
              <a href="thread.html#40656">[ thread ]</a>
              <a href="subject.html#40656">[ subject ]</a>
              <a href="author.html#40656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
