<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Priority between &lt;a download&gt; and content-disposition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Priority%20between%20%3Ca%20download%3E%20and%20content-disposition&In-Reply-To=%3CCA%2Bc2ei9_ZLZvVUFq1fmRWSYaTS%2B2y3aKnZ0oVQCnejL2ZEW%2BqA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082721.html">
   <LINK REL="Next"  HREF="082764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Priority between &lt;a download&gt; and content-disposition</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Priority%20between%20%3Ca%20download%3E%20and%20content-disposition&In-Reply-To=%3CCA%2Bc2ei9_ZLZvVUFq1fmRWSYaTS%2B2y3aKnZ0oVQCnejL2ZEW%2BqA%40mail.gmail.com%3E"
       TITLE="[whatwg] Priority between &lt;a download&gt; and content-disposition">jonas at sicking.cc
       </A><BR>
    <I>Sat Aug 10 00:15:06 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082721.html">[whatwg] Priority between &lt;a download&gt; and content-disposition
</A></li>
        <LI>Next message: <A HREF="082764.html">[whatwg] Priority between &lt;a download&gt; and content-disposition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82726">[ date ]</a>
              <a href="thread.html#82726">[ thread ]</a>
              <a href="subject.html#82726">[ subject ]</a>
              <a href="author.html#82726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Aug 9, 2013 at 7:47 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;&gt;<i> &gt;&gt; 1) Content-Disposition: inline
</I>&gt;&gt;<i> [snip]
</I>&gt;&gt;<i> &gt; This seems unambiguous. Where's the problem?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt; 2) Content-Disposition: inline; filename=&quot;B.txt&quot;
</I>&gt;&gt;<i> [snip]
</I>&gt;&gt;<i> &gt; Again, this seems unambiguous.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt; 3) Content-Disposition: attachment; filename=&quot;B.txt&quot;
</I>&gt;&gt;<i> [snip]
</I>&gt;&gt;<i> &gt; Again, seems clear.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I assume that you realize that there is a problem if you think the spec
</I>&gt;&gt;<i> is clear, yet people don't understand what the spec intends to say, or
</I>&gt;&gt;<i> that implementations do different things, that there still is a problem,
</I>&gt;&gt;<i> right?
</I>&gt;<i>
</I>&gt;<i> Yes, that's why I asked &quot;where's the problem&quot;. :-)
</I>&gt;<i>
</I>&gt;<i> I don't understand why the spec is ambiguous. Can you elaborate?
</I>
Sorry, it's been too long. I no longer remember what was considered
ambiguous. Possibly the comments in the bugs linked to from this
thread has relevant information.

&gt;&gt;<i> Note that in this case the problem wasn't with the filename, but rather
</I>&gt;&gt;<i> with &quot;inline&quot; vs. &quot;attachment&quot;. At least if I recall correctly. It's
</I>&gt;&gt;<i> been a while.
</I>&gt;<i>
</I>&gt;<i> I'm not sure I know what problem you're referring to here.
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; Well, this is a Mozilla site. Why is a filename set if you don't want
</I>&gt;&gt;<i> &gt; it? Why would you want that video.ogg file downloaded as
</I>&gt;&gt;<i> &gt; &quot;with-target.txt&quot;?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> IIRC, the problem here was that the server was always sending
</I>&gt;&gt;<i> Content-disposition: inline, which made it impossible to use &lt;a
</I>&gt;&gt;<i> download&gt;.
</I>&gt;<i>
</I>&gt;<i> Content-disposition: inline doesn't make it impossible to use download=&quot;&quot;
</I>&gt;<i> according to the spec as far as I can see.
</I>
As I recall it. The problem was that markup like:

&lt;a download href=&quot;foo.txt&quot;&gt;

did not result in a download dialog if a request to foo.txt resulted
in a response that contained

Content-disposition: inline
or
Content-disposition: inline; filename=&quot;bar.txt&quot;

I no longer remember if that was what required by spec, or if it was
just unclear to us what was required by spec. If the spec says that a
download dialog should be shown, then the most important problem is
solved/was only due to misunderstanding of the spec.

Ideally I would prefer the filename from the markup to override the
filename from the header, since people tend to get markup correct more
often than getting headers correct. At least in my experience. But I
could see that the consistency between same-origin and cross-origin
would be nice too, so I can live with using either name.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082721.html">[whatwg] Priority between &lt;a download&gt; and content-disposition
</A></li>
	<LI>Next message: <A HREF="082764.html">[whatwg] Priority between &lt;a download&gt; and content-disposition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82726">[ date ]</a>
              <a href="thread.html#82726">[ thread ]</a>
              <a href="subject.html#82726">[ subject ]</a>
              <a href="author.html#82726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
