<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Elements should be removed from the past names map once it's no longer associated with the form element
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Elements%20should%20be%20removed%20from%20the%20past%20names%20map%0A%20once%20it%27s%20no%20longer%20associated%20with%20the%20form%20element&In-Reply-To=%3C521C026D.1060400%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082863.html">
   <LINK REL="Next"  HREF="082867.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Elements should be removed from the past names map once it's no longer associated with the form element</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Elements%20should%20be%20removed%20from%20the%20past%20names%20map%0A%20once%20it%27s%20no%20longer%20associated%20with%20the%20form%20element&In-Reply-To=%3C521C026D.1060400%40mit.edu%3E"
       TITLE="[whatwg] Elements should be removed from the past names map once it's no longer associated with the form element">bzbarsky at MIT.EDU
       </A><BR>
    <I>Mon Aug 26 18:35:41 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082863.html">[whatwg] Elements should be removed from the past names map once it's no longer associated with the form element
</A></li>
        <LI>Next message: <A HREF="082867.html">[whatwg] Elements should be removed from the past names map once it's no longer associated with the form element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82865">[ date ]</a>
              <a href="thread.html#82865">[ thread ]</a>
              <a href="subject.html#82865">[ subject ]</a>
              <a href="author.html#82865">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 8/26/13 7:13 PM, Ryosuke Niwa wrote:
&gt;<i> <A HREF="https://bug-120328-attachments.webkit.org/attachment.cgi?id=209688">https://bug-120328-attachments.webkit.org/attachment.cgi?id=209688</A>
</I>&gt;<i> IE10 passes all test cases but WebKit and Gecko fails 2nd, 4th, 6th, and 7th test cases.
</I>
You must be testing Firefox 23 or earlier?  Firefox 24 or later passes 
all these tests.

In any case, the 2nd, 4th, 6th, and 7th tests are about properties not 
disappearing when they should, so those are not relevant here as far as 
I can tell.

That said, looking at this more closely, it seems like you and I may be 
in violent agreement.  Right now the spec says:

    If an element listed in the form element's past names map is removed
    from the Document, then its entries must be removed from the map.

which is all the testcase above tests as far as I can tell, since it 
removes the control from the DOM after setting its @form.  The testcase 
doesn't test what happens when @form is set on a control without 
removing it from the DOM.

What happens in Firefox 24 and above is that when an element stops being 
form-associated with a form it is in fact removed from the past names 
map for that form.  I asked for a spec bug to be filed to that effect in 
<A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=879319#c4">https://bugzilla.mozilla.org/show_bug.cgi?id=879319#c4</A> but I'm not sure 
that ever happened....  :(

&gt;<i> What I mean is the form content attribute of a form control element used as in: myInputInput.setAttribute('form', 'myForm');
</I>
Ah, I see.  Yes, ok.  So in particular, the spec already requires that 
elements be removed from the past names map when removed from the DOM, 
so the only issue is with @form changes, and there is not likely to be 
much content relying on @form changes _not_ removing from the past names 
map.  I wholeheartedly agree.

-Boris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082863.html">[whatwg] Elements should be removed from the past names map once it's no longer associated with the form element
</A></li>
	<LI>Next message: <A HREF="082867.html">[whatwg] Elements should be removed from the past names map once it's no longer associated with the form element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82865">[ date ]</a>
              <a href="thread.html#82865">[ thread ]</a>
              <a href="subject.html#82865">[ subject ]</a>
              <a href="author.html#82865">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
