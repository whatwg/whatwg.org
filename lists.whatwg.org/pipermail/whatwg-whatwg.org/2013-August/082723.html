<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Blurry lines in 2D Canvas (and SVG)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Blurry%20lines%20in%202D%20Canvas%20%28and%20SVG%29&In-Reply-To=%3CCABirCh_0orFzaZAUrtg3Z%2BJg0LdSGMZxuapVdKZgigEdKJJVXQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082722.html">
   <LINK REL="Next"  HREF="082724.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Blurry lines in 2D Canvas (and SVG)</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Blurry%20lines%20in%202D%20Canvas%20%28and%20SVG%29&In-Reply-To=%3CCABirCh_0orFzaZAUrtg3Z%2BJg0LdSGMZxuapVdKZgigEdKJJVXQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Blurry lines in 2D Canvas (and SVG)">glenn at zewt.org
       </A><BR>
    <I>Fri Aug  9 20:12:49 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082722.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
        <LI>Next message: <A HREF="082724.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82723">[ date ]</a>
              <a href="thread.html#82723">[ thread ]</a>
              <a href="subject.html#82723">[ subject ]</a>
              <a href="author.html#82723">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Aug 9, 2013 at 7:16 PM, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt; wrote:

&gt;<i> In addition if
</I>&gt;<i> the corners of the path don't align with the grid, you will get a blurry
</I>&gt;<i> outline again.
</I>&gt;<i>
</I>
That's the purpose of the second half of my proposal: snapping coordinates
and line widths to integers.

As an experiment, I drew 4 rectangles in JSFiddle with stroke width of .5,
&gt;<i> .75, 1, 1.5 and 2: <A HREF="http://jsfiddle.net/6KS4V/2/">http://jsfiddle.net/6KS4V/2/</A>
</I>&gt;<i> I aligned them to the grid as Glenn suggested.
</I>&gt;<i> This is a blown up screenshot from IE (Firefox looked the same):
</I>&gt;<i> <A HREF="http://bit.ly/16FVCKd">http://bit.ly/16FVCKd</A>
</I>&gt;<i> and here's one from Chrome: <A HREF="http://bit.ly/19Tf9Ko">http://bit.ly/19Tf9Ko</A>
</I>&gt;<i>
</I>&gt;<i> The rectangle that's 2 points wide is somewhat blurry, but the one that is
</I>&gt;<i> 1.5  is very bad.
</I>&gt;<i>
</I>
Right.  In case anyone's not following, this is what's happening:
<A HREF="https://zewt.org/~glenn/stroke-alignment.png">https://zewt.org/~glenn/stroke-alignment.png</A>  The red box is the rectangle
being drawn.  The blue lines are the actual strokes.  (This was created by
hand, it's not an actual Canvas rendering.)

The top row is drawing with integer coordinates.  With a 1px stroke, the
stroke sits across two pixels, so it aliases.  With a 2px stroke, it fully
covers two pixels and doesn't alias.  With a 3px stroke, it aliases again.

The middle row is drawing with half-coordinates.  The pattern is reversed:
clean, aliased, clean.  Additionally, fills (with no stroke) always
aliases, since the red box lies between pixels.

The bottom row is an outer stroke and integer coordinates: neither strokes
nor fills alias, in all three cases.  This is the mode I'm suggesting.

Chrome seems ignore stroke widths that are smaller than 1 (which is
&gt;<i> reasonable).
</I>&gt;<i>
</I>
(That seems wrong to me--it should continue to draw based on pixel
coverage--but that's a separate issue...)

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082722.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
	<LI>Next message: <A HREF="082724.html">[whatwg] Blurry lines in 2D Canvas (and SVG)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82723">[ date ]</a>
              <a href="thread.html#82723">[ thread ]</a>
              <a href="subject.html#82723">[ subject ]</a>
              <a href="author.html#82723">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
