<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Form-associated elements and the parser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form-associated%20elements%20and%20the%20parser&In-Reply-To=%3CCAEvLGcJMUTFVcjzfKRALvZYqt2HDAtznbWmOZQ_Ecs_kHkOc%3Dg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040386.html">
   <LINK REL="Next"  HREF="082665.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Form-associated elements and the parser</H1>
<!--htdig_noindex-->
    <B>Adam Klein</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form-associated%20elements%20and%20the%20parser&In-Reply-To=%3CCAEvLGcJMUTFVcjzfKRALvZYqt2HDAtznbWmOZQ_Ecs_kHkOc%3Dg%40mail.gmail.com%3E"
       TITLE="[whatwg] Form-associated elements and the parser">adamk at chromium.org
       </A><BR>
    <I>Tue Aug  6 14:01:43 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="040386.html">[whatwg] A question about the drawimage() canvas function
</A></li>
        <LI>Next message: <A HREF="082665.html">[whatwg] Form-associated elements and the parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40388">[ date ]</a>
              <a href="thread.html#40388">[ thread ]</a>
              <a href="subject.html#40388">[ subject ]</a>
              <a href="author.html#40388">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hixie opened my eyes last week to parser-association behavior of the
sort found at <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=2428.">http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=2428.</A>
In that case, an &lt;input&gt; in a detached tree is associated with a
&lt;form&gt; in the main document. This causes badness in WebKit and Blink
because the association between the &lt;form&gt; and the &lt;input&gt; (e.g., as
exposed in the HTMLFormElement.elements collection) is only weakly
held to avoid reference loops (and thus memory leaks). And that
weakness occasionally results in crashes when one of these objects is
collected before the other.

While all modern HTML parser implementations I tested seemed to agree
on their treatment of the above example (they all return &quot;1&quot; as
elements.length), this feature doesn't strike me as terribly useful.
And for what it's worth, it doesn't seem to be present in legacy IE.

I'm interested what others would think about changing the parser to
only associate a &lt;form&gt; with an &lt;input&gt; if both are in the same &quot;home
subtree&quot; (<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#home-subtree">http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#home-subtree</A>).
Or is there some deep web-compat reason for this parsing oddity?

- Adam
</PRE>





















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040386.html">[whatwg] A question about the drawimage() canvas function
</A></li>
	<LI>Next message: <A HREF="082665.html">[whatwg] Form-associated elements and the parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40388">[ date ]</a>
              <a href="thread.html#40388">[ thread ]</a>
              <a href="subject.html#40388">[ subject ]</a>
              <a href="author.html#40388">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
