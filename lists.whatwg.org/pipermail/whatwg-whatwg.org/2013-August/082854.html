<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web Notification: API inconsistency
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Notification%3A%20API%20inconsistency&In-Reply-To=%3CCAAWBYDAq482%3DSsCNUvBgujD4Ugw0ZiHhYQvE46nf7-LL43Wbrg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082853.html">
   <LINK REL="Next"  HREF="082855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web Notification: API inconsistency</H1>
<!--htdig_noindex-->
    <B>Tab Atkins Jr.</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Notification%3A%20API%20inconsistency&In-Reply-To=%3CCAAWBYDAq482%3DSsCNUvBgujD4Ugw0ZiHhYQvE46nf7-LL43Wbrg%40mail.gmail.com%3E"
       TITLE="[whatwg] Web Notification: API inconsistency">jackalmage at gmail.com
       </A><BR>
    <I>Fri Aug 23 10:46:59 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082853.html">[whatwg] Web Notification: API inconsistency
</A></li>
        <LI>Next message: <A HREF="082855.html">[whatwg] Web Notification: API inconsistency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82854">[ date ]</a>
              <a href="thread.html#82854">[ thread ]</a>
              <a href="subject.html#82854">[ subject ]</a>
              <a href="author.html#82854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Aug 23, 2013 at 10:41 AM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:
&gt;<i> Given the last definition of then() I saw, this has a bit of a gotcha.
</I>&gt;<i> Consider this code:
</I>&gt;<i>
</I>&gt;<i>   function callback() {
</I>&gt;<i>     throw &quot;Hey&quot;
</I>&gt;<i>   }
</I>&gt;<i>   someAPI(callback);
</I>&gt;<i>
</I>&gt;<i> now in today's world, when some API calls back into callback an exception is
</I>&gt;<i> reported to the console and window.error and whatnot.
</I>&gt;<i>
</I>&gt;<i> But if someAPI internally does:
</I>&gt;<i>
</I>&gt;<i>   var promise = new Promise();
</I>&gt;<i>   return promise.then(callback);
</I>&gt;<i>
</I>&gt;<i> then all throwing from callback will do is set up the error state on the
</I>&gt;<i> return value; the exception is not reported anywhere.
</I>&gt;<i>
</I>&gt;<i> Now UAs might end up reporting to the console when a promise with an
</I>&gt;<i> unhandled error is GCed or something.  But window.onerror is SOL in this
</I>&gt;<i> case.
</I>
Ah, yeah.  Hm, we previously had .done() to help with this, which
threw rather than rejecting the output promise, but that's been
removed.  I've seen some chatter about what the plan is to address the
swallowed-error problem, but I'm not sure what the current thinking is
for it.

~TJ

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082853.html">[whatwg] Web Notification: API inconsistency
</A></li>
	<LI>Next message: <A HREF="082855.html">[whatwg] Web Notification: API inconsistency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82854">[ date ]</a>
              <a href="thread.html#82854">[ thread ]</a>
              <a href="subject.html#82854">[ subject ]</a>
              <a href="author.html#82854">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
