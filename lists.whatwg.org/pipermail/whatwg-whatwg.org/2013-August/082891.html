<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Zip archives as first-class citizens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Zip%20archives%20as%20first-class%20citizens&In-Reply-To=%3CCAHvSExdN1sbdpzKGfEFFty7C%3DT9kfxFpUsDfkKW451m%2BQbw_Ag%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082890.html">
   <LINK REL="Next"  HREF="082912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Zip archives as first-class citizens</H1>
<!--htdig_noindex-->
    <B>Eric Uhrhane</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Zip%20archives%20as%20first-class%20citizens&In-Reply-To=%3CCAHvSExdN1sbdpzKGfEFFty7C%3DT9kfxFpUsDfkKW451m%2BQbw_Ag%40mail.gmail.com%3E"
       TITLE="[whatwg] Zip archives as first-class citizens">ericu at chromium.org
       </A><BR>
    <I>Wed Aug 28 10:25:53 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082890.html">[whatwg] Zip archives as first-class citizens
</A></li>
        <LI>Next message: <A HREF="082912.html">[whatwg] Zip archives as first-class citizens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82891">[ date ]</a>
              <a href="thread.html#82891">[ thread ]</a>
              <a href="subject.html#82891">[ subject ]</a>
              <a href="author.html#82891">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Aug 28, 2013 at 10:21 AM, Glenn Maynard &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">glenn at zewt.org</A>&gt; wrote:
&gt;<i> On Wed, Aug 28, 2013 at 12:07 PM, Eric Uhrhane &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ericu at chromium.org</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We've covered this several times.  The directory records in a zip can
</I>&gt;&gt;<i> be superseded by further directories later in the archive, so you
</I>&gt;&gt;<i> can't trust that you've got the right directory until you're done
</I>&gt;&gt;<i> downloading.
</I>&gt;<i>
</I>&gt;<i> Both the local headers and the central record can be wrong.  (As mentioned
</I>&gt;<i> on IRC the other day, apparently EPUB files often have broken central
</I>&gt;<i> records, so eBook readers probably prefer the local records.)  If they're
</I>&gt;<i> out of sync, then they'll always be broken in some clients.
</I>&gt;<i>
</I>&gt;<i> We just have to make sure that the record that takes priority in any
</I>&gt;<i> particular case is well-defined, so we have interop.  If some malformed
</I>&gt;<i> archives won't work in some cases as a result, using a different format
</I>&gt;<i> isn't an improvement: that just means *zero* existing archives would work.
</I>
Broken files don't work, and I'm OK with that.  I'm saying that legal
zips can have multiple directories, where the definitive one is last
in the file, so it's not a good format for streaming.  If you're
saying that you want to change the format to make an earlier directory
definitive, that's going to break compat for the existing archives
everywhere, and would be confusing enough that we should just go with
a different archive format that doesn't require changes.  Or at least
don't call it zip when you're done messing with the spec.

&gt;<i> This applies to various other aspects of the format: the maximum supported
</I>&gt;<i> length of comments and handling of duplicate filenames, for example.  This
</I>&gt;<i> would all need to be specified; the ZIP &quot;AppNote&quot; doesn't specify a parser
</I>&gt;<i> or error handling in the way the web needs, it just describes the format.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Glenn Maynard
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082890.html">[whatwg] Zip archives as first-class citizens
</A></li>
	<LI>Next message: <A HREF="082912.html">[whatwg] Zip archives as first-class citizens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82891">[ date ]</a>
              <a href="thread.html#82891">[ thread ]</a>
              <a href="subject.html#82891">[ subject ]</a>
              <a href="author.html#82891">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
