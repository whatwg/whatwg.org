<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Zip archives as first-class citizens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Zip%20archives%20as%20first-class%20citizens&In-Reply-To=%3C414B89D4-9758-4E38-80C8-7C3630EA4971%40mnot.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082900.html">
   <LINK REL="Next"  HREF="082898.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Zip archives as first-class citizens</H1>
<!--htdig_noindex-->
    <B>Mark Nottingham</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Zip%20archives%20as%20first-class%20citizens&In-Reply-To=%3C414B89D4-9758-4E38-80C8-7C3630EA4971%40mnot.net%3E"
       TITLE="[whatwg] Zip archives as first-class citizens">mnot at mnot.net
       </A><BR>
    <I>Wed Aug 28 18:14:18 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082900.html">[whatwg] Zip archives as first-class citizens
</A></li>
        <LI>Next message: <A HREF="082898.html">[whatwg] Zip archives as first-class citizens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82895">[ date ]</a>
              <a href="thread.html#82895">[ thread ]</a>
              <a href="subject.html#82895">[ subject ]</a>
              <a href="author.html#82895">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hey Anne,

On 28/08/2013, at 11:32 PM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at annevk.nl</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> * Fragments: fail to work well for URLs relative to a zip archive.
</I>&gt;<i> 
</I>&gt;<i> Fragments are conceptually the cleanest as the only part of a URL
</I>&gt;<i> that's supposed to depend on the Content-Type is the fragment.
</I>&gt;<i> However, if you want to link to an ID inside an HTML resource you'd
</I>&gt;<i> have to do #path=test.html&amp;id=test which would require adding
</I>&gt;<i> knowledge to the HTML resource that it is contained in a zip archive
</I>&gt;<i> and have special processing based on that. And not just HTML, same
</I>&gt;<i> goes for CSS or JavaScript.
</I>

I'm sure you've thought about this more than I have, but can you humour me and dig in a bit here? 

If I wanted to link *within* the HTML, it could still be &lt;a href=&quot;#test&quot;&gt;, correct?

Likewise, in the CSS if I wanted to define style for that id, it'd still be #test { ... }.

AIUI the case that's more of an issue is if I want to link from foo.html to bar.html#test, both inside the zip.

It seems to me that you need *some* idea of the structure of the zip inside there -- just as you need some idea of the structure of the Web site when linking between HTTP resources. The question to me is whether you can make it compatible with existing syntax to make it go down easier. 

E.g. if this would work: &lt;a href=&quot;bar.html#test&quot;&gt;

Couldn't that be done by saying that for URIs inside a ZIP file, the base URI is effectively an authority-less scheme? 

E.g., for &quot;foo.html&quot; the base uri would be &quot;<A HREF="zip://foo.html">zip://foo.html</A>&quot;. 

The zip URI scheme wouldn't be used in practice, just for rooting relative URIs inside of ZIP files. From the outside, the fragment identifier syntax for the zip format would dispatch appropriately, e.g.,

<A HREF="http://example.com/stuff.zip#path=foo.html&amp;id=test">http://example.com/stuff.zip#path=foo.html&amp;id=test</A>

I *think* the end effect here would be that from the inside, HTML, CSS and JS wouldn't have to be changed to be zipped. From the outside, if you want to link *into* a zip file, you have to be aware of its structure, but that's really always going to be the case, isn't it?

Just a thought.

Cheers,


--
Mark Nottingham   <A HREF="http://www.mnot.net/">http://www.mnot.net/</A>




</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082900.html">[whatwg] Zip archives as first-class citizens
</A></li>
	<LI>Next message: <A HREF="082898.html">[whatwg] Zip archives as first-class citizens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82895">[ date ]</a>
              <a href="thread.html#82895">[ thread ]</a>
              <a href="subject.html#82895">[ subject ]</a>
              <a href="author.html#82895">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
