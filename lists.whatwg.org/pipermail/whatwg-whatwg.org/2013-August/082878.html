<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Zip archives as first-class citizens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Zip%20archives%20as%20first-class%20citizens&In-Reply-To=%3CCA%2Bc2ei9yR7mqkHBSBXdcY9THP3zpSRfGUFwY-Oh8kBOP_y487Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082880.html">
   <LINK REL="Next"  HREF="082882.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Zip archives as first-class citizens</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Zip%20archives%20as%20first-class%20citizens&In-Reply-To=%3CCA%2Bc2ei9yR7mqkHBSBXdcY9THP3zpSRfGUFwY-Oh8kBOP_y487Q%40mail.gmail.com%3E"
       TITLE="[whatwg] Zip archives as first-class citizens">jonas at sicking.cc
       </A><BR>
    <I>Wed Aug 28 09:20:43 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082880.html">[whatwg] Zip archives as first-class citizens
</A></li>
        <LI>Next message: <A HREF="082882.html">[whatwg] Zip archives as first-class citizens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82878">[ date ]</a>
              <a href="thread.html#82878">[ thread ]</a>
              <a href="subject.html#82878">[ subject ]</a>
              <a href="author.html#82878">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Aug 28, 2013 at 8:04 AM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:
&gt;<i> On 8/28/13 9:32 AM, Anne van Kesteren wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm not sure we need to consider sub-scheme if zip-path can work as
</I>&gt;&gt;<i> it's more complex and not very well thought out. E.g. imagine
</I>&gt;&gt;<i> view-source:zip:<A HREF="http://www.example.org/zip!test.html.">http://www.example.org/zip!test.html.</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What's the issue with that?  Gecko supports that (with jar:, not zip:),
</I>&gt;<i> fwiw.
</I>
I have two concerns with the scheme-based approach.

* It dramatically complicates origin handling. This is something we've
seen multiple times in gecko and something that I expect authors will
struggle with too.

* It makes it impossible to have create a relative URL from inside the
zip file to refer to something on the same server but outside of the
zip file. Since anything outside of the zip file uses a different
scheme, it means that you have to use an absolute URL. Not even URLs
starting with &quot;/&quot; nor &quot;//&quot; can be used.

&gt;<i> 3)  We have implementation experience with the &quot;sub-scheme&quot; approach and we
</I>&gt;<i> know it can work just fine (existence proof is jar: in Gecko).  The main
</I>&gt;<i> difficulty it introduces is that computing the origin needs to be done via
</I>&gt;<i> object accessors, not string-parsing...  Do we have any implementation
</I>&gt;<i> experience with &quot;zip-path&quot;-like approaches?
</I>
I don't know about &quot;can work just fine&quot;. Sure, if everyone does the
right thing, then it works. But we're having to strictly enforce that
no one does string parsing by hand and instead use URL objects and
Principal objects. Neither of which really are an option on the web
right now as all URL-related APIs use strings.

&gt;<i> I don't think relative URIs should ever escape a zip archive (though I do
</I>&gt;<i> appreciate the way that would let someone replace directories with zipped-up
</I>&gt;<i> versions of those directories).  The reason for that is that allowing it
</I>&gt;<i> sometimes but not others seems really weird to me, and it seems like we
</I>&gt;<i> don't want to allow it for toplevel zip archives.
</I>
Why not?

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082880.html">[whatwg] Zip archives as first-class citizens
</A></li>
	<LI>Next message: <A HREF="082882.html">[whatwg] Zip archives as first-class citizens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82878">[ date ]</a>
              <a href="thread.html#82878">[ thread ]</a>
              <a href="subject.html#82878">[ subject ]</a>
              <a href="author.html#82878">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
