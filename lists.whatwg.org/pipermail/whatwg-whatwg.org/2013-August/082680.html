<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] BinaryEncoding for Typed Arrays using window.btoa and	window.atob
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20BinaryEncoding%20for%20Typed%20Arrays%20using%20window.btoa%20and%0A%09window.atob&In-Reply-To=%3CCAPJwq3XF0n5Dgr4TcZk1M46Dii%3Ds9fJ4ahe3KtoOK_0z6rAV4Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082678.html">
   <LINK REL="Next"  HREF="082684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] BinaryEncoding for Typed Arrays using window.btoa and	window.atob</H1>
<!--htdig_noindex-->
    <B>K. Gadd</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20BinaryEncoding%20for%20Typed%20Arrays%20using%20window.btoa%20and%0A%09window.atob&In-Reply-To=%3CCAPJwq3XF0n5Dgr4TcZk1M46Dii%3Ds9fJ4ahe3KtoOK_0z6rAV4Q%40mail.gmail.com%3E"
       TITLE="[whatwg] BinaryEncoding for Typed Arrays using window.btoa and	window.atob">kg at luminance.org
       </A><BR>
    <I>Wed Aug  7 12:52:55 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082678.html">[whatwg] BinaryEncoding for Typed Arrays using window.btoa and	window.atob
</A></li>
        <LI>Next message: <A HREF="082684.html">[whatwg] BinaryEncoding for Typed Arrays using window.btoa and	window.atob
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82680">[ date ]</a>
              <a href="thread.html#82680">[ thread ]</a>
              <a href="subject.html#82680">[ subject ]</a>
              <a href="author.html#82680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>JSIL currently ships a hand-rolled typed array to/from base64
implementation due not being able to use btoa/atob; if they were improved
to support typed arrays as described that would be an improvement for some
of my use cases. It'd need to be necessary to detect the presence of the
feature at runtime, though.

I should also point out that in general string decoding/encoding targetting
typed arrays is a really important use case for JSIL (and as I understand
things, it is also important for emscripten/embind). Right now moving
between JS strings and a fake heap in a typed array is really expensive,
and you need to do it any time you leave the domain of your application and
talk to HTML5 APIs like canvas, XHR, etc. Base64 isn't the only kind of
encode/decode that matters; I'd argue that UTF8 and UTF16 are equally
deserving of similar functionality being exposed - if not more deserving.


On Wed, Aug 7, 2013 at 3:28 AM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at annevk.nl</A>&gt; wrote:

&gt;<i> On Tue, Aug 6, 2013 at 9:48 PM, Chang Shu &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cshu01 at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; But it appears to me we have to introduce
</I>&gt;<i> &gt; another pair of coders, say BinaryDecoder/BinaryEncoder, in addition
</I>&gt;<i> &gt; to TextDecoder/TextEncode since the signatures of the decode/encode
</I>&gt;<i> &gt; functions are different.
</I>&gt;<i>
</I>&gt;<i> So TextDecoder is bytes to string and TextEncoder is string to bytes.
</I>&gt;<i> If we always represent the base64-variant as a sequence of bytes the
</I>&gt;<i> signature seems fine. If you want to get a string out of those bytes
</I>&gt;<i> again you could utf-8 decode it for instance.
</I>&gt;<i>
</I>&gt;<i> I'd be interested in knowing what the level of interest is outside of
</I>&gt;<i> Google for this feature.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> <A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082678.html">[whatwg] BinaryEncoding for Typed Arrays using window.btoa and	window.atob
</A></li>
	<LI>Next message: <A HREF="082684.html">[whatwg] BinaryEncoding for Typed Arrays using window.btoa and	window.atob
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82680">[ date ]</a>
              <a href="thread.html#82680">[ thread ]</a>
              <a href="subject.html#82680">[ subject ]</a>
              <a href="author.html#82680">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
