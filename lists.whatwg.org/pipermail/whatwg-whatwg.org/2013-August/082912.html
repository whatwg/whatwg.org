<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Zip archives as first-class citizens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Zip%20archives%20as%20first-class%20citizens&In-Reply-To=%3CCABirCh9h0MxmWMNiMVuzugAsHsM21kY0batkO9mQXeqH9aHYoA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082891.html">
   <LINK REL="Next"  HREF="082889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Zip archives as first-class citizens</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Zip%20archives%20as%20first-class%20citizens&In-Reply-To=%3CCABirCh9h0MxmWMNiMVuzugAsHsM21kY0batkO9mQXeqH9aHYoA%40mail.gmail.com%3E"
       TITLE="[whatwg] Zip archives as first-class citizens">glenn at zewt.org
       </A><BR>
    <I>Thu Aug 29 08:27:16 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082891.html">[whatwg] Zip archives as first-class citizens
</A></li>
        <LI>Next message: <A HREF="082889.html">[whatwg] Zip archives as first-class citizens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82912">[ date ]</a>
              <a href="thread.html#82912">[ thread ]</a>
              <a href="subject.html#82912">[ subject ]</a>
              <a href="author.html#82912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Aug 28, 2013 at 12:25 PM, Eric Uhrhane &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ericu at chromium.org</A>&gt; wrote:

&gt;<i> Broken files don't work, and I'm OK with that.  I'm saying that legal
</I>&gt;<i> zips can have multiple directories, where the definitive one is last
</I>&gt;<i> in the file, so it's not a good format for streaming.  If you're
</I>&gt;<i> saying that you want to change the format to make an earlier directory
</I>&gt;<i> definitive, that's going to break compat for the existing archives
</I>&gt;<i> everywhere, and would be confusing enough that we should just go with
</I>&gt;<i> a different archive format that doesn't require changes.  Or at least
</I>&gt;<i> don't call it zip when you're done messing with the spec.
</I>&gt;<i>
</I>
I'm saying that if the directories are out of sync, the filenames are going
to be broken in existing clients already.  We should only try to guarantee
that files always work if their internal data is consistent.  If their
records are out of sync, then we should only ensure that the files work the
same in all browsers, even if there are some files that won't work nicely
as a result.

That said, we don't actually have use cases or a feature proposal for
streaming from ZIPs, so it's hard to make any further analysis.  The
feature we're discussing here doesn't need streaming, only random access.
It wouldn't read the whole ZIP, it would just read the end of the file to
grab the central directory (which gives you the information you need to
decide what to read from there).

(The access patterns of having to read the central directory first aren't
ideal for optimizing away fetches, since Content-Range has no way of saying
&quot;give me the last 64K of the file&quot; so you have to ask for the size first,
but I'd rather that than introducing a new archive format into the wild...)

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082891.html">[whatwg] Zip archives as first-class citizens
</A></li>
	<LI>Next message: <A HREF="082889.html">[whatwg] Zip archives as first-class citizens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82912">[ date ]</a>
              <a href="thread.html#82912">[ thread ]</a>
              <a href="subject.html#82912">[ subject ]</a>
              <a href="author.html#82912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
