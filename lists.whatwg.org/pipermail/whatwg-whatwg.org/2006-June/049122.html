<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Spellchecking mark III
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Spellchecking%20mark%20III&In-Reply-To=%3CPine.LNX.4.62.0606292229500.4826%40dhalsim.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="049090.html">
   <LINK REL="Next"  HREF="049123.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Spellchecking mark III</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Spellchecking%20mark%20III&In-Reply-To=%3CPine.LNX.4.62.0606292229500.4826%40dhalsim.dreamhost.com%3E"
       TITLE="[whatwg] Spellchecking mark III">ian at hixie.ch
       </A><BR>
    <I>Thu Jun 29 16:56:15 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="049090.html">[whatwg] Spellchecking proposal #2
</A></li>
        <LI>Next message: <A HREF="049123.html">[whatwg] Spellchecking mark III
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49122">[ date ]</a>
              <a href="thread.html#49122">[ thread ]</a>
              <a href="subject.html#49122">[ subject ]</a>
              <a href="author.html#49122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
I believe this answers all outstanding e-mails on the subject, please let 
me know if I missed one. I include a new proposal (still with a 
spellcheck=&quot;&quot; attribute, based mostly on implementation feedback from the 
Mozilla guys) at the end of the e-mail.


On Sun, 11 Jun 2006, Robert Gr&#230;sdal wrote:
&gt;<i>
</I>&gt;<i> How about something like cascading behaviour sheets?
</I>&gt;<i> 
</I>&gt;<i> &lt;style type=&quot;text/cbs&quot;&gt;
</I>&gt;<i> #first-name {
</I>&gt;<i> 	inputmode: user startUpper;
</I>&gt;<i> 	spellcheck: enabled;
</I>&gt;<i> }
</I>&gt;<i> .cplusplus {
</I>&gt;<i> 	spellcheck: disabled;
</I>&gt;<i> 	autoindent: C++;
</I>&gt;<i> 	highlight: C++;
</I>&gt;<i> 	auto-evaluate: disabled;
</I>&gt;<i> }
</I>&gt;<i> .math {
</I>&gt;<i> 	spellcheck: math;
</I>&gt;<i> 	inputmode: math;
</I>&gt;<i> 	highlight: math;
</I>&gt;<i> 	auto-evaluate: enabled;
</I>&gt;<i> }
</I>&gt;<i> &lt;/style&gt;
</I>&gt;<i> 
</I>&gt;<i> I'd hate to have to specify all those attributes to every single input 
</I>&gt;<i> field for sure.
</I>
Well, it wouldn't be stylistic per se, so I don't think it would belong in 
the stylesheet. Even if you disable the styles, the spellcheck settings 
still apply.


&gt;<i> By the way - Hello everyone, this is my first post to the list.
</I>
Welcome!


On Sun, 11 Jun 2006, Matthew Raymond wrote:
&gt;<i>
</I>&gt;<i> If, however, we're really just talking about adding words to the UA 
</I>&gt;<i> dictionary temporarily and for a specific site, couldn't we just do that 
</I>&gt;<i> with &lt;meta&gt; using the same format as we do with keywords?
</I>&gt;<i> 
</I>&gt;<i> | &lt;meta name=&quot;vocabulary&quot; lang=&quot;en-us&quot;
</I>&gt;<i> |  content=&quot;HTML5, WHATWG, WF2, WA1, WD1, CSS3-UI, TARDIS, ZPM, DHD&quot;&gt;
</I>&gt;<i> 
</I>&gt;<i> Are there actually situations where different controls would need 
</I>&gt;<i> different vocabulary?!?
</I>
That's an interesting idea, but I'd shy away from doing this for now. 
Let's start small and build up...


On Sun, 11 Jun 2006, Alexey Feldgendler wrote:
&gt;<i>
</I>&gt;<i> Maybe features like spellckeching, syntax highlighting and so on should 
</I>&gt;<i> be controlled via CSS? That way, they can be fine-tuned to any degree of 
</I>&gt;<i> precision without complicating the HTML schema. This will also reduce 
</I>&gt;<i> verbosity of &lt;input&gt; elements because they would otherwise have the same 
</I>&gt;<i> repeated attributes.
</I>
While I certainly sympathise with the concern of heavy input elements 
(that's why I was against the spellcheck=&quot;&quot; attribute in the first place), 
I don't think this is stylistic. Maybe we need another kind of macro 
capability, such as XBL, for this problem.


&gt;<i> Information like &quot;this input field should have autoindent&quot; is 
</I>&gt;<i> presentational.
</I>
Yeah, but you'd have to say &quot;auto-indent this like C++&quot;, which isn't. 
IMHO.

You should raise this in the www-style list, though, if you do think it 
is appropriate.




On Sun, 11 Jun 2006, Lachlan Hunt wrote:
&gt;<i> 
</I>&gt;<i> No, spell checking is a user agent feature that should be controlled by 
</I>&gt;<i> the UA and the user.  Authors should have no explicit control over it. 
</I>&gt;<i> Besides, spell checking *is not* presentation, it is UA functionality 
</I>&gt;<i> and so it does not belong in the presentation layer.
</I>
I agree that it isn't presentation, but I disagree that the author 
shouldn't be able to suggest whether or not to enable it. More on this 
below.


On Sun, 11 Jun 2006, Alexey Feldgendler wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; Besides, spell checking *is not* presentation, it is UA functionality 
</I>&gt;<i> &gt; and so it does not belong in the presentation layer.
</I>&gt;<i> 
</I>&gt;<i> Visual elements      &lt;=&gt; Presentation
</I>&gt;<i> Interactive elements &lt;=&gt; Behavior
</I>&gt;<i> 
</I>&gt;<i> I think these are similar relationships. BTW, isn't the &quot;cursor&quot; CSS 
</I>&gt;<i> property about behavior?
</I>
The &quot;behaviour&quot; vs &quot;presentation&quot; debate is a rat hole. The key thing is 
&quot;should this continue to work if you disable the author stylesheet&quot; and 
&quot;should this continue to work if you stop using a screen&quot;.

It is clear, IMHO, that spellchecking being enabled or not is independent 
of both whether the author's stylesheet is enabled or not and whether the 
content is being displayed on a screen or not.


On Sun, 11 Jun 2006, Alexey Feldgendler wrote:
&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt;  One can also say that authors should not have explicit control over 
</I>&gt;<i> &gt; &gt; whether hyperlinks are underlined or not.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The difference is that underlining is presentation, spell checking is 
</I>&gt;<i> &gt; not. The functionality of a link cannot be changed with CSS, likewise 
</I>&gt;<i> &gt; spell checking shouldn't either.
</I>&gt;<i> 
</I>&gt;<i> Enabling or disabling spell checking doesn't change the functionality of 
</I>&gt;<i> an input.
</I>
Sure it does. It changes whether or not the user's typos will be flagged 
to the user or not. That seems like quite a big difference.


&gt;<i> It can still be used to submit arbitrary text to the server.
</I>
By that argument. type=text vs type=password is a presentational aspect. 
Or even more, type=text vs type=checkbox.


&gt;<i> But misspelled words in an input with spellchecking enabled are 
</I>&gt;<i> underlined with a wavy red line (and the underlining style could even be 
</I>&gt;<i> changed by CSS), and that's presentation.
</I>
I agree that the line itself should be stylable in CSS (if at all), but I 
disagree that the presence or absence of the line is a stylistic matter.


On Mon, 12 Jun 2006, Lachlan Hunt wrote:
&gt;<i> 
</I>&gt;<i> While the core functionality of allowing the user to enter text isn't 
</I>&gt;<i> changed, I'd consider spell checking to be part of the control's 
</I>&gt;<i> functionality, and so disabling it would change the functionality for 
</I>&gt;<i> the user.
</I>
Agreed.


&gt;<i> Arguably, yes, but allowing authors to alter the presentation of 
</I>&gt;<i> misspelled words from the UAs default settings would only introduce 
</I>&gt;<i> usability problems. Users may not easily recognise any presentation set 
</I>&gt;<i> by the author as representing a missplled word.  UAs may provide a way 
</I>&gt;<i> for the user to set their preferred presentation using some UA-specific 
</I>&gt;<i> means, but there's no need at all for the author to have any control 
</I>&gt;<i> over it.
</I>
I agree, I don't think we need to give authors control over this, unless 
they really go out of their way to make wacky different input controls.

In any case, that is out of scope for this group. How to style spelling 
errors should be discussed in the CSS lists.


On Mon, 12 Jun 2006, Alexey Feldgendler wrote:
&gt;<i> 
</I>&gt;<i> There's nothing really bad in allowing CSS to control behavior to some 
</I>&gt;<i> extent.
</I>
CSS is the part of the document that can be disabled/replaced. If 
disabling the author styles changes the functionality of the page, then 
that's bad.


&gt;<i> CSS is a good rule-based language, and there is a use case -- why not 
</I>&gt;<i> reuse the CSS engine (selectors, cascading etc)?
</I>
There certainly is a good argument to say that the selector system should 
be used for defining element implementations, and indeed XBL2 uses 
selectors for exactly this purpose. But that is separate from using style 
sheets themselves.


On Mon, 12 Jun 2006, Matthew Raymond wrote:
&gt;<i> 
</I>&gt;<i> CSS:
</I>&gt;<i> | binding: url('example.xbl#binding1');
</I>&gt;<i> 
</I>&gt;<i> XBL2:
</I>&gt;<i> | &lt;?xml version=&quot;1.0&quot;?&gt;
</I>&gt;<i> | &lt;xbl xmlns=&quot;<A HREF="http://www.mozilla.org/projects/xbl/xbl2.html">http://www.mozilla.org/projects/xbl/xbl2.html</A>&quot;&gt;
</I>&gt;<i> |   &lt;binding id=&quot;binding1&quot;&gt;
</I>&gt;<i> |     &lt;handlers&gt;
</I>&gt;<i> |       &lt;handler event=&quot;click&quot; button=&quot;0&quot; action=&quot;LeftClick();&quot;/&gt;
</I>&gt;<i> |       &lt;handler event=&quot;mouseup&quot; button=&quot;1&quot; action=&quot;MiddleUp();&quot;/&gt;
</I>&gt;<i> |       &lt;handler event=&quot;click&quot; button=&quot;2&quot; action=&quot;RightClick();&quot;/&gt;
</I>&gt;<i> |     &lt;/handlers&gt;
</I>&gt;<i> |   &lt;/binding&gt;
</I>&gt;<i> | &lt;/xbl&gt;
</I>
Or just:

XHTML:
   &lt;?xbl href=&quot;example.xbl&quot;?&gt;

XBL2:
   &lt;xbl xmlns=&quot;...&quot;&gt;
     &lt;binding elements=&quot;.foo&quot;&gt;
       ...
     &lt;/binding&gt;
   &lt;/xbl&gt;

...with no CSS in sight (for those cases where the binding is not 
presentational but functional).


On Sun, 11 Jun 2006, Lachlan Hunt wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; The original use case, as I understand it, was roughly &quot;authors want 
</I>&gt;<i> &gt; to disable spell checking on some textareas&quot;.
</I>&gt;<i>
</I>&gt;<i> Authors should not have such control.  Spell checking is a user agent 
</I>&gt;<i> feature for the *user* and the UA should allow the user to turn it on or 
</I>&gt;<i> off whenever they like.  Why should the author have any say about that?
</I>
See below.


&gt;<i> For other unknown fields, browsers could use some Artificial 
</I>&gt;<i> Intelligence (AI) to learn what a user typically enables and disables 
</I>&gt;<i> spell checking for.  e.g. If a user constantly disables spell checking 
</I>&gt;<i> for fields with &lt;input name=&quot;address1&quot;&gt; or a &lt;label&gt;Address&lt;/label&gt; 
</I>&gt;<i> associated with the control (or similar variations), the AI could use 
</I>&gt;<i> that to determine that spell checking wouldn't be desired for similar 
</I>&gt;<i> fields.
</I>
Heuristics are historically a pain in the ass in this kind of context. 
(See, e.g., the failed experiments at making &quot;form autofill&quot; features. The 
password manager aspects are all that survived that.)


On Thu, 15 Jun 2006, Sander Tekelenburg wrote:
&gt;<i> 
</I>&gt;<i> I do see the use for allowing authors to indicate what language 
</I>&gt;<i> submitted content should be in, so that a user-agent can offer 
</I>&gt;<i> spell-/syntax checking if the user wants to. But I don't see at all why 
</I>&gt;<i> you would want to allow authors to flat out state that a spellchecker 
</I>&gt;<i> should be on or off. Just like authors cannot know what font size is 
</I>&gt;<i> best for a user they cannot know whether a spellchecker is useful or a 
</I>&gt;<i> nuisance.
</I>
But they can suggest what font-size might be most appropriate. The 
suggestion is not to have spell checking be &quot;on&quot; or &quot;off&quot; at the user's 
whim; the choice is over whether or not, *if the user has given no 
indication of preference*, the spelling checker should be on or off.


&gt;<i> (That aside, you can't rely on user-side validation anyway. You need to 
</I>&gt;<i> do that server-side, after the data has been submitted. Thus by allowing 
</I>&gt;<i> authors to state that a spellchecker must be on, you could end up in a 
</I>&gt;<i> stupid 'loop' when the spellchecker guides the user to do one thing, and 
</I>&gt;<i> the server wants another thing.)
</I>
For spelling, that seems unlikely. In general, though, authors have voted 
with their feet in favour of having client-side prechecking (in addition 
to the security-required server-side postchecking).


On Fri, 23 Jun 2006, Sander Tekelenburg wrote:
&gt;<i> 
</I>&gt;<i> 	[AUTHOR REQUIREMENTS]
</I>&gt;<i> 
</I>&gt;<i> &gt; Authors should set the document's language information, to enable user 
</I>&gt;<i> &gt; agents to accurately determine which dictionary to use when checking 
</I>&gt;<i> &gt; the spelling or grammar of user input.
</I>&gt;<i> 
</I>&gt;<i> IMO this &quot;should&quot; should be a &quot;must&quot;.
</I>
What about if the author doesn't know the language?


&gt;<i> &gt; IMPLEMENTATION REQUIREMENTS
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; All elements can have spellchecking enabled or disabled. UAs may allow 
</I>&gt;<i> &gt; the user to set this flag
</I>&gt;<i> 
</I>&gt;<i> Why &quot;may&quot;? Why not &quot;must&quot;? Given that the argument for the spellcheck 
</I>&gt;<i> attribute appears to be &quot;to aid users&quot;... If you allow user-agents to 
</I>&gt;<i> implement a spellcheck attribute the user has no control over, you're 
</I>&gt;<i> handing control to authors. That's generally a bad idea on the Net, but 
</I>&gt;<i> it's especially bad in a case like this.
</I>
Because you can't require a particular UI. For example, the UA could be a 
kiosk-style system, where the user is not to have any ability to do 
anything but enter his text and hit submit.


On Sat, 24 Jun 2006, Alexey Feldgendler wrote:
&gt;<i> 
</I>&gt;<i> Even worse: when entering text in textarea, the user actually has a 
</I>&gt;<i> choice which language to write in. I think the user agent should 
</I>&gt;<i> provide, besides just the control to turn spellchecking on and off, a 
</I>&gt;<i> choice of languages.
</I>
Agreed.


On Fri, 23 Jun 2006, Lachlan Hunt wrote:
&gt;<i> 
</I>&gt;<i> I don't particularly like giving the authors any control over spell 
</I>&gt;<i> checking. For the majority of cases, I think browsers should become 
</I>&gt;<i> smart enough to know whether or not to enable/disable spell checking 
</I>&gt;<i> without any explicit author input, based on various heuristics (as I've 
</I>&gt;<i> written about before [1]).  In other words, for most cases, authors 
</I>&gt;<i> should not need to use this attribute.
</I>
The request for this attribute came from a UA in the first place. This 
would seem to suggest they can't find a way to be smart enough, and would 
like author input.


&gt;<i> &gt; UAs may allow the user to set this flag, and may have defaults that 
</I>&gt;<i> &gt; vary based and various heuristics or user preferences.
</I>&gt;<i> 
</I>&gt;<i> That's good, but it really should be a *should* or a *must*.
</I>
See above.


&gt;<i> &gt; Ok, so how can we ensure that spell checking is enable for GMail's To: 
</I>&gt;<i> &gt; line but enabled for its Subject line?
</I>&gt;<i> 
</I>&gt;<i> Ordinarily, &lt;input type=&quot;email&quot;&gt; would handle no spell checking for 
</I>&gt;<i> email addresses, but given that Gmail uses a textarea that contains both 
</I>&gt;<i> people's names and email addresses, that may be one case where 
</I>&gt;<i> heuristics may not give optimal results.
</I>
Indeed. So how should we do it, if not using an attribute to hint to the 
UA whether it should be enabled or not?


&gt;<i> If it were just e-mail addresses, it wouldn't particularly matter 
</I>&gt;<i> because spell checkers can already recognise e-mail addresses and not 
</I>&gt;<i> mark them as errors.  But in this case (and others like it), the user 
</I>&gt;<i> should be able to very easily disable spell checking and have the 
</I>&gt;<i> browser remember that preference.
</I>
This would give a bad experience for the user until the user learnt how to 
turn off spell-checking. This isn't really acceptable to authors of 
applications like GMail.


&gt;<i> Do you think that that one small use case is strong enough to warrant 
</I>&gt;<i> the use of a spellcheck attribute?
</I>
Here are other use cases:

   google.com home page:
     would like spellchecking enabled for the field.
   google.com accounts pref page:
     would like spellchecking disabled for all fields.
   GMail:
     would like it enabled for the search field, disabled for the invite 
     and contact boxes, disabled for contact search, enabled for subject 
     and e-mail body, disabled for the To:, Cc: and Bcc: fields, enabled 
     for the Event: field, enabled for the Where: field, disabled for the
     date fields, enabled for the Event Description field, disabled for
     the guest list field, disabled for the first two filter search 
     options, enabled for the others...

...the list goes on. Similarly for all the other Web applications out 
there. Half the fields need it on, the other half off, and I really can't 
see much that a UA could use to work out which it should be in each case.


&gt;<i> Roughly what percentage of all use cases would you expect heuristics and 
</I>&gt;<i> user preferences to give suboptimal results, and thus require the 
</I>&gt;<i> author's suggestion?
</I>
A lot. (I haven't looked at this carefully, but the Mozilla trunk's 
current heuristics get just under half of the ones I mentioned above 
correct, which is far too low a rate for users to be happy.)


&gt;<i> Is it really a major usability issue if a browser enables spell checking 
</I>&gt;<i> for a field where the user wouldn't want it, considering it can be 
</I>&gt;<i> easily disabled (or vice versa)?
</I>
Yes, IMHO. (Your definition of &quot;easily&quot; is not mine, though.)


&gt;<i> For contenteditable use cases, roughly what percentage of them would 
</I>&gt;<i> need the author to turn on or off spell checking?  Given that the user 
</I>&gt;<i> can add semantics to their content using elements, browsers should be 
</I>&gt;<i> able to enable and disable spell checking for different sections.  e.g. 
</I>&gt;<i> if a user starts entering &lt;code&gt; into a contenteditable section, UAs 
</I>&gt;<i> should be able to automatically disable spell checking for that content, 
</I>&gt;<i> while still checking the surrounding text.
</I>
I don't have any data on this.


On Sat, 24 Jun 2006, Alexey Feldgendler wrote:
&gt;<i> 
</I>&gt;<i> IMHO we should not rely on unspecified heuristics. In some browsers, 
</I>&gt;<i> they work rather well, in some they might constantly fail. Leave 
</I>&gt;<i> heuristics for invalid pages, quirks mode etc -- or document these 
</I>&gt;<i> heuristics.
</I>
In general I agree, but for spellchecking I don't know what we should 
document, exactly.


On Sat, 24 Jun 2006, Lachlan Hunt wrote:
&gt;<i> 
</I>&gt;<i> Generally, that's true.  But since spell checking is only a user agent 
</I>&gt;<i> feature intended for the user (it doesn't affect the page or author in 
</I>&gt;<i> any way) and interoperability between one browser's heuristics and 
</I>&gt;<i> another is not required. Browsers should be allowed to innovate as much 
</I>&gt;<i> as they like so they can come up with the best method that suits their 
</I>&gt;<i> users.
</I>
I agree.


On Sat, 24 Jun 2006, Alexey Feldgendler wrote:
&gt;<i> 
</I>&gt;<i> Once again, a CSS/XBL based approach would be better here. Unless 
</I>&gt;<i> something is specified explicitly, the user agent can implement any kind 
</I>&gt;<i> of logic in its default rules.
</I>
I'm not really sure how this would differ from just having spelling have 
UA default rules in the absence of the author's attribute.


On Sat, 24 Jun 2006 <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mail at jorgenhorstink.nl</A> wrote:
&gt;<i>
</I>&gt;<i> I've read this discussion,but i do not understand exactly why this 
</I>&gt;<i> should be denoted in markup.i do not understand why it is needed 
</I>&gt;<i> anyway.is the lang attribute not sufficient? what about denoting every 
</I>&gt;<i> paragraph in a document should be spellchecked,and denoting every del 
</I>&gt;<i> not? what do spellchecking attributes say about the structure of the 
</I>&gt;<i> document?why not let the browser vendors determine what suites their 
</I>&gt;<i> needs on this issue.
</I>
In general I'd agree, but since the entire discussion here was spawned by 
one such browser vendor saying &quot;we need a way for authors to control 
this!&quot;, I would suggest that browser vendors have determined that they 
need a way for authors to control this. :-)


On Sun, 25 Jun 2006, Anne van Kesteren wrote:
&gt;<i> 
</I>&gt;<i> May be I wasn't clear. I was not proposing more properties to CSS. 
</I>&gt;<i> Having a separate language that can take care of the more behavioral 
</I>&gt;<i> things that are easily expressed.
</I>
I've often been tempted to go there, but I fear most authors would just 
find this very confusing. Authors have enough trouble just understanding 
the separation of CSS and HTML.


On Fri, 23 Jun 2006, L. David Baron wrote:
&gt;<i> 
</I>&gt;<i> The problem with heuristics is not that they might be better in some 
</I>&gt;<i> browsers and worse in others.  The problem is that heuristics are only 
</I>&gt;<i> heuristics when they operate on input written without knowledge of the 
</I>&gt;<i> heuristics.  When the input was written with knowledge of the 
</I>&gt;<i> heuristics, they become de facto standards.
</I>&gt;<i> 
</I>&gt;<i> In other words, authors will figure out what the heuristics are and then 
</I>&gt;<i> write markup to match the heuristics rather than to match the semantics 
</I>&gt;<i> of their content.  Authors will learn what triggers spellchecking (or 
</I>&gt;<i> not) in Mozilla, and write whatever markup, however inappropriate, gives 
</I>&gt;<i> the choice of spellchecking that they want.  Then other browsers will be 
</I>&gt;<i> forced to copy whatever Mozilla did.
</I>&gt;<i> 
</I>&gt;<i> So if we're going to end up with a standard anyway, why not admit it and 
</I>&gt;<i> figure out what it should be rather than ending up there accidentally?
</I>
Indeed.


On Sat, 24 Jun 2006, J. Graham wrote:
&gt;<i> 
</I>&gt;<i> Only if copying whatever Mozilla do provides a significant improvement 
</I>&gt;<i> in usability for the users of those other browsers.
</I>
You'd be surprised how small a difference there needs to be for authors to 
consider it significant enough.


&gt;<i> The best reason I see to implement a specific attribute (or other 
</I>&gt;<i> mechanism) to control whether spellchecking is enabled or disabled on a 
</I>&gt;<i> particular control is to prevent abuses of e.g. the accept attribute so 
</I>&gt;<i> that authors use text/plain in order to enable spellchecking in Mozilla 
</I>&gt;<i> but, in doing so, break e.g. syntax highlighting in some future version 
</I>&gt;<i> of Konqurer which relies on a correct value for @accept. However I 
</I>&gt;<i> believe the implementation of any such attribute should be optional (as 
</I>&gt;<i> in &quot;a UA MAY implement a spellckeck attribute to allow spellchecking to 
</I>&gt;<i> be enabled or disabled on an element&quot;), but, if it is implemented, 
</I>&gt;<i> allowing the user to override the author should be a MUST or, if that is 
</I>&gt;<i> seen as being too dictatorial about UI, at least a SHOULD requirement.
</I>
Indeed, there's no way the spec will _require_ support for spellchecking.


On Sun, 25 Jun 2006, Lachlan Hunt wrote:
&gt;<i> 
</I>&gt;<i> The main problem with providing an explicit spell checking switch to the 
</I>&gt;<i> author is the potential for abuse.  History has shown that authors will 
</I>&gt;<i> attempt to disable anything they don't like for any reason whatsoever, 
</I>&gt;<i> regardless of the usability benefits such features provide for users.
</I>
Indeed, users should always be able to override an author's &quot;disable 
spellchecking&quot; hint.


&gt;<i> We've seen that already with all of the following:
</I>&gt;<i> 
</I>&gt;<i> * IE's smart tags: &lt;meta name=&quot;MSSmartTagsPreventParsing&quot; content=&quot;True&quot;&gt;
</I>&gt;<i> * Google AutoLink (Some scripts were developed to workaround this)
</I>&gt;<i> * IE's image toolbar: &lt;meta http-equiv=&quot;imagetoolbar&quot; content=&quot;no&quot;&gt; and &lt;img
</I>&gt;<i> gallery=&quot;no&quot;&gt;)
</I>&gt;<i> * AutoComplete (autocomplete=&quot;off&quot;)
</I>&gt;<i> * Context menus (JavaScripts intercepting right click)
</I>&gt;<i> * Showing link URLs in status bar (using window.status)
</I>&gt;<i> * Removing browser chrome (in popups)
</I>&gt;<i> * View Source (includes attempts to obfuscate source code with JS, disabling
</I>&gt;<i> context menus, etc.)
</I>&gt;<i> * Disabling printing (Some JS, works in IE only)
</I>&gt;<i> * Disabling Save As..., (Some JS, works in IE only)
</I>&gt;<i> * Disabling caching
</I>&gt;<i> * And anything else they can get their grubby little hands on!
</I>
A very good point.


&gt;<i> I'd like to see some research done to find out exactly what kinds of 
</I>&gt;<i> input authors use &lt;input type=&quot;text&quot;&gt;, &lt;texarea&gt; and contenteditable 
</I>&gt;<i> for, beyond those already mentioned earlier in the thread.  I'd also 
</I>&gt;<i> like to see research into the &lt;label&gt;s, name=&quot;&quot;, id=&quot;&quot; and other 
</I>&gt;<i> identifying information, commonly given to such fields, which can be 
</I>&gt;<i> used for developing heuristics.
</I>
Could you elaborate on exactly what kind of research you mean?


On Sun, 25 Jun 2006, Matthew Paul Thomas wrote:
&gt;<i> 
</I>&gt;<i> But realistically, browsers won't &quot;allow the user to easily override it 
</I>&gt;<i> if they want to&quot;, because any interface for doing that would be absurd. 
</I>
The interface would just be a checkable context menu item &quot;Check 
spelling&quot;, which initially is in the author-hinted or UA-default state,
but which, once set, persists for that field. Why is that not enough?


&gt;<i> Bottom line, browser vendors will either ignore the attribute, or 
</I>&gt;<i> they'll make it configurable in a really obscure place (about:config or 
</I>&gt;<i> equivalent), and leave 99.9% of people wondering vaguely why 
</I>&gt;<i> spellchecking works on some pages and not others.
</I>
It should be noted once more that the existence of this discussion is 
directly related to a request from the Mozilla guys for how they can 
provide for authors to give a hint, while still leaving users firmly in 
control.


On Sun, 25 Jun 2006, Lachlan Hunt wrote:
&gt;<i> 
</I>&gt;<i> I'm starting to think we just need to define the attribute in a way that 
</I>&gt;<i> is semantic, and possibly come up with a new name to match.  And also 
</I>&gt;<i> give non-normative guidelines about how other attributes may be used to 
</I>&gt;<i> improve the logic.  For instance, the attribute could be defined like 
</I>&gt;<i> this:
</I>&gt;<i> 
</I>&gt;<i> | The |on| value indicates that the expected user input will
</I>&gt;<i> | primarily comprise natural human language.  The off value
</I>&gt;<i> | indicates that the expected user input will not.  If the
</I>&gt;<i> | attribute is not specified, user agents are free to use any
</I>&gt;<i> | algorithm they like in order to determine the type of the
</I>&gt;<i> | expected user input.
</I>&gt;<i> |
</I>&gt;<i> | User agents may use this to determine whether or not to
</I>&gt;<i> | provide spell checking for the content by default.  User
</I>&gt;<i> | agents should provide a way for the user to override this
</I>&gt;<i> | decision.
</I>
That's certainly an interesting way of doing it. However, especially 
considering contenteditable, I think it's important that we define it in 
more detail than that. Inheritance, in particular, is key here.


On Tue, 27 Jun 2006, Matthew Paul Thomas wrote:
&gt;<i> 
</I>&gt;<i> Perhaps a useful analogy: HTML5 is about making Web applications easier, 
</I>&gt;<i> and in Web applications dataloss often results from going back to 
</I>&gt;<i> previous pages, so there should be a backbuttonallowed= attribute that 
</I>&gt;<i> can be set to &quot;false&quot; for the &lt;html&gt; element. And we'll let the user 
</I>&gt;<i> easily override it if they want to.
</I>
There are better ways to address this (such as the first draft of session 
history stuff now in the spec).


On Mon, 26 Jun 2006, Gervase Markham wrote:
&gt;<i>
</I>&gt;<i> Alexey Feldgendler wrote:
</I>&gt;<i> &gt; Check spelling:
</I>&gt;<i> &gt; ( ) Never
</I>&gt;<i> &gt; (*) As the page author suggests
</I>&gt;<i> &gt; ( ) Always
</I>&gt;<i> 
</I>&gt;<i> But that really brings out the foolishness of the idea. I can imagine a 
</I>&gt;<i> user looking at that option and thinking &quot;Duh - how on earth is the page 
</I>&gt;<i> author ever going to know when and how I want spelling checked?&quot;
</I>
Well, the author wrote the page, he's the first person who _would_ know 
whether or not the field is likely to be one where one wants spelling to 
be checked.


&gt;<i> What use cases did we come up with where there might be a &lt;textfield&gt; or 
</I>&gt;<i> &lt;textfield type=&quot;text/plain&quot;&gt; where having spell checking always on 
</I>&gt;<i> would cause problems? Surely the worst that could happen would be some 
</I>&gt;<i> inappropriate red squiggly underlines. Hardly a disaster.
</I>
Enough of an annoyance, apparently, that your team's developers want to be 
able to let authors turn it off.


On Mon, 26 Jun 2006, Gervase Markham wrote:
&gt;<i> 
</I>&gt;<i> How about a scheme where the UA never spellchecks &lt;input type=&quot;text&quot;&gt;? 
</I>&gt;<i> Those who have sufficient trouble with spelling a single sentence (the 
</I>&gt;<i> subject line) can right-click and choose &quot;Check Spelling&quot;?
</I>
There are surprisingly many one-line text fields where spelling checking 
would be desired, and in many cases they occur in batches. It would be a 
pain to check each one.

Also, I have the same trouble spelling a single sentence as I do spelling 
a single sentence that is part of a bigger block of text. I don't see why 
the number of sentences matters.


&gt;<i> If this whole attribute rigmarole is merely about trying to distinguish 
</I>&gt;<i> between an &lt;input type=&quot;text&quot;&gt; containing email addresses and one 
</I>&gt;<i> containing a subject line, then it seems like a storm in a teacup to me. 
</I>&gt;<i> Either people have to manually request it for subject lines, or the 
</I>&gt;<i> email addresses get red squiggly underlines - deal with it. :-)
</I>
People want it to happen automatically (by author hinting), and frankly I 
see no reason not to allow that. What's the harm?


On Mon, 26 Jun 2006, Matthew Raymond wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; So Google is using a &lt;textarea&gt; for email addresses.
</I>&gt;<i> 
</I>&gt;<i> They can work around this by using the repetition features in Web
</I>&gt;<i> Forms 2.0:
</I>
Well, we could, but in general I think we prefer free-form text input for 
this kind of thing.


&gt;<i> Are email addresses common enough for an &quot;email&quot; type??? They seem 
</I>&gt;<i> pretty common to me, but we might be overloading the |type| attribute a 
</I>&gt;<i> bit if we add a new value that's so close to being text. Also, that 
</I>&gt;<i> doesn't help the above scenario, because I think Google allows names 
</I>&gt;<i> from an address book in the place of addresses.
</I>
...and as noted higher up in this e-mail, it's just one example out of 
many.


On Fri, 23 Jun 2006, J. King wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; Ok, so how can we ensure that spell checking is enable for GMail's To: 
</I>&gt;<i> &gt; line but enabled for its Subject line?
</I>&gt;<i> 
</I>&gt;<i> If we are to assume that the first &quot;enabled&quot; is supposed to read 
</I>&gt;<i> &quot;disabled&quot;, wouldn't this be a simple, intelligent way of doing it?
</I>&gt;<i> 
</I>&gt;<i> &lt;label&gt;To: &lt;input type=&quot;email&quot;&gt;&lt;/label&gt;
</I>&gt;<i> &lt;label&gt;Subject: &lt;input type=&quot;text&quot;&gt;&lt;/label&gt;
</I>
The To: line in GMail takes more than one address. It also takes names, if 
the name is in the address book.


On Fri, 23 Jun 2006, Anne van Kesteren wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; Ok, so how can we ensure that spell checking is enable for GMail's To: 
</I>&gt;<i> &gt; line but enabled for its Subject line?
</I>&gt;<i> 
</I>&gt;<i> By having something like type=&quot;email&quot; for multiple e-mail addresses? (Or 
</I>&gt;<i> reusing type=&quot;email&quot; in some way would work as well I suppose.)
</I>
The To: line in GMail takes more than just addresses.


On Fri, 23 Jun 2006, Michel Fortin wrote:
&gt;<i> 
</I>&gt;<i> Maybe having the possibility to set the lang attribute to a value 
</I>&gt;<i> meaning &quot;not a language&quot; would be enough to disable spellchecking when 
</I>&gt;<i> the content isn't a human language. And if you want to explicitly tell a 
</I>&gt;<i> field to use spellcheck you'd use any valid language code, or the empty 
</I>&gt;<i> string which currently mean unknown language. Would this make sense?
</I>
While that does make sense, it would break another major use case for 
lang=&quot;&quot;, which is letting screen readers know what language to base their 
reading on. English names are in English, even if they aren't in the 
dictionary. Similarly, Perl should be read as English, even though it 
isn't English by anyone's definition.


On Fri, 23 Jun 2006, Matthew Raymond wrote:
&gt;<i> 
</I>&gt;<i> First of all, a |spellcheck| attribute, as conceived, is inconsistent 
</I>&gt;<i> across web sites. An address input should have the same spell check 
</I>&gt;<i> settings on every web page I go to, regardless of what the author wants.
</I>
Fair enough; how would you do this?


&gt;<i> If you use |spellcheck| as an initial hint, then the first site you 
</I>&gt;<i> visit will determine the settings for all other sites that use the same 
</I>&gt;<i> input fields. This may or may not be desired. It would be nice for 
</I>&gt;<i> authors to be able to provide hints for spell checking in rarely used 
</I>&gt;<i> fields, but I don't see that as being the primary use case.
</I>
I think the &quot;long tail&quot; of input field types works against us in this 
case.


&gt;<i> Also, having a boolean value for spell checking prevents further 
</I>&gt;<i> innovation down the road. For instance, if you're writing a script in a 
</I>&gt;<i> &lt;textarea&gt;, you may want it to only spell check comments and quotations, 
</I>&gt;<i> so you'd want to have an attribute value for this kind of spell 
</I>&gt;<i> checking. Then again, it may be your intent for |spellcheck| to be used 
</I>&gt;<i> in combination with |accept|. Is that the idea?
</I>
This hasn't really come up yet. It certainly would be something to 
consider in the future.


&gt;<i> Another problem is |pattern|. Any spell checking mechanism will have to 
</I>&gt;<i> conform to the pattern value provided, which means either a really 
</I>&gt;<i> creative spell checking algorithm or turning spell checking off. I think 
</I>&gt;<i> the latter is probably the best idea, but it probably shouldn't be 
</I>&gt;<i> &quot;must&quot;.
</I>
That's up to the UA, IMHO.


&gt;<i> Overall, I think |accept| and UA spell checking settings that are tied 
</I>&gt;<i> to |name| or |class| eliminate most use case for |spellcheck|.
</I>
That sounds a little too unpredictable to me, given the arguments that 
were raised against accept=&quot;&quot;.


On Sat, 24 Jun 2006, Alexey Feldgendler wrote:
&gt;<i>
</I>&gt;<i> On Thu, 22 Jun 2006 23:04:51 +0700, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; All elements can have spellchecking enabled or disabled. UAs may allow
</I>&gt;<i> &gt; the user to set this flag, and may have defaults that vary based and
</I>&gt;<i> &gt; various heuristics or user preferences. Spellchecking can be enabled
</I>&gt;<i> &gt; on an element while its children have it disabled. However, by
</I>&gt;<i> &gt; default, user agents should enable spellchecking for an element if it
</I>&gt;<i> &gt; is enabled for its parent element and not explicitly disabled for the
</I>&gt;<i> &gt; child.
</I>&gt;<i> 
</I>&gt;<i> Do you mean that there should be some inheritance rules? They are not
</I>&gt;<i> described in your algorithms.
</I>
I'll fix that, thanks.


On Sat, 24 Jun 2006, Matthew Raymond wrote:
&gt;<i> 
</I>&gt;<i>    I might be persuaded to allow an author to specify whether or not to 
</I>&gt;<i> enable spell checking in the event that the user has not specified the 
</I>&gt;<i> setting themselves for a specific type of input field. However, if, for 
</I>&gt;<i> instance, you enable spell checking for address fields, the author 
</I>&gt;<i> should not be able to turn it off. Furthermore, the user shouldn't have 
</I>&gt;<i> to know CSS or HTML in order to configure spell checking preferences.
</I>
Sure.


On Sun, 25 Jun 2006, Andrew Fedoniouk wrote:
&gt;<i> 
</I>&gt;<i> Spellchecker looks like pure behavioral entity.
</I>
I'm not sure what this means.


&gt;<i> So I would define this as:
</I>&gt;<i> 
</I>&gt;<i> &lt;style&gt;
</I>&gt;<i> #myeditor
</I>&gt;<i> {
</I>&gt;<i>    white-space:pre; overflow: auto; ...
</I>&gt;<i>    behavior: textarea spellchecker;   /* textarea editor and spellchecker */
</I>&gt;<i> }
</I>&gt;<i> &lt;/style&gt;
</I>
I disagree that it is stylistic, for the reasons given earlier in this 
e-mail.



Here's a new proposed spec:


AUTHOR REQUIREMENTS

Elements may have a new attribute specified, &quot;spellcheck&quot;.  If
specified, it must have either the value &quot;on&quot; or the value &quot;off&quot;
(exactly, case-sensitive). The &quot;on&quot; value indicates that spellchecking
is to be enabled, the &quot;off&quot; value indicates that spellchecking is to
be disabled. The attribute is inherited. By default, the UA and user
preferences decide if spelling checking is enabled.

There is also a &quot;spellcheck&quot; DOM attribute on all elements that may be
used to quickly set the value of the content attribute dynamically, or
to check the default value for an element.

Authors should set the document's language information, to enable user
agents to accurately determine which dictionary to use when checking
the spelling or grammar of user input.


IMPLEMENTATION REQUIREMENTS

The HTMLElement interface has one new DOM attribute:

  attribute boolean spellcheck;

On getting, the &quot;spellcheck&quot; DOM attribute returns a value as
determined by the following algorithm.

 * If the element has a &quot;spellcheck&quot; content attribute with the exact
   literal value &quot;on&quot;, then the DOM attribute must return true.

 * Otherwise, if the element has a &quot;spellcheck&quot; content attribute with
   the exact literal value &quot;off&quot;, then the DOM attribute must return
   false.

 * Otherwise, it must return the UA default value for that element.
   Note: This might not reflect the actual spellchecking state, because
   the actual spellchecking state depends on the parent element's
   spellchecking state if the content attribute is missing, as well as
   on the user's preferences.

The the DOM attribute is set, the element's &quot;spellcheck&quot; content
attribute must be set to the literal value &quot;on&quot; if the attribute is
being set to the &quot;true&quot; value, and &quot;off&quot; otherwise.

To determine if a word, sentence, or other piece of text is to have
spelling and/or grammar checking enabled, the UA must use the
following algorithm:

 1. If the text in question is the value part of an input element or
    textarea element, and that element is disabled or readonly, then
    the checking is disabled.

 2. Otherwise, if the text in question is part of a text node or
    attribute that is not user-editable, then the checking is
    disabled.

 3. Otherwise, if the user has disabled the checking for this text,
    then the checking is disabled.

 4. Otherwise, if the user has forced the checking for this text to
    always be enabled, then the checking is enabled.

 5. Otherwise, if the element with which the text is associated has a
    &quot;spellcheck&quot; content attribute, then: if that attribute has the
    literal value &quot;on&quot;, then checking is enabled; otherwise, if that
    attribute has the literal value &quot;off&quot;, then checking is disabled;
    otherwise, move on to the next step.

 6. Otherwise, if the element with which the text is associated has an
    ancestor element with a &quot;spellcheck&quot; attribute set to one of the
    literal values &quot;on&quot; or &quot;off&quot;, then, if the nearest such ancestor
    has its attribute set to the literal value &quot;on&quot;, then checking is
    enabled; otherwise, if the nearest such ancestor has its attribute
    set to the literal value &quot;off&quot;, then checking is disabled;
    otherwise, move on to the next step.

 7. The UA default for this element must be used. The UA default can
    vary based on heuristics.

For text that is part of text or CDATA nodes, the element with which
the text is associated is the element that is the immediate parent of
the start of the word, sentence, or other piece of text. For text in
attributes, it is the element with which the attribute is
associated. For text in text fields, it is the relevant input or
textarea element.

Examples:

   The element with id &quot;a&quot; in the following example would be the one
   used to determine if the word &quot;Hello&quot; is spell-checked. It this
   example, it would not be.

      &lt;div contenteditable=&quot;on&quot;&gt;
        &lt;span spellcheck=&quot;off&quot; id=&quot;a&quot;&gt;Hell&lt;/span&gt;&lt;em&gt;o!&lt;/em&gt;
      &lt;/div&gt;

   The element &quot;b&quot; in the following example would have spell checking
   enabled (not disabled, because of the leading &quot; &quot; character, and
   not the UA default, because the grandparent explicitly enables it).

      &lt;p spellcheck=&quot;on&quot;&gt;
       &lt;label&gt;Name: &lt;input spellcheck=&quot; off&quot; id=&quot;b&quot;&gt;&lt;/label&gt;
      &lt;/p&gt;

If the checking is enabled for a word/sentence/text, the UA should
indicate spelling and/or grammar errors in that text. UAs should take
into account the other semantics given in the document when suggesting
spelling and grammar corrections. UAs should use the language of the
element to determine what spelling and grammar rules to use. (Language
information can come from the &quot;lang&quot; and &quot;xml:lang&quot; attributes,
Content-Language HTTP headers, or other sources. q.v.) UAs should use
input element attributes such as pattern to ensure that the resulting
value is valid.

If spellchecking is disabled, the UA should not indicate spelling or
grammar errors for that text.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="049090.html">[whatwg] Spellchecking proposal #2
</A></li>
	<LI>Next message: <A HREF="049123.html">[whatwg] Spellchecking mark III
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49122">[ date ]</a>
              <a href="thread.html#49122">[ thread ]</a>
              <a href="subject.html#49122">[ subject ]</a>
              <a href="author.html#49122">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
