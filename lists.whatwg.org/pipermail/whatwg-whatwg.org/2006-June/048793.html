<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Mathematics in HTML5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mathematics%20in%20HTML5&In-Reply-To=%3C20060603093353.5AD1D7B5F3%40ws5-10.us4.outblaze.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="048792.html">
   <LINK REL="Next"  HREF="048796.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Mathematics in HTML5</H1>
<!--htdig_noindex-->
    <B>White Lynx</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Mathematics%20in%20HTML5&In-Reply-To=%3C20060603093353.5AD1D7B5F3%40ws5-10.us4.outblaze.com%3E"
       TITLE="[whatwg] Mathematics in HTML5">whitelynx at operamail.com
       </A><BR>
    <I>Sat Jun  3 02:33:53 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="048792.html">[whatwg] Mathematics in HTML5
</A></li>
        <LI>Next message: <A HREF="048796.html">[whatwg] Mathematics in HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48793">[ date ]</a>
              <a href="thread.html#48793">[ thread ]</a>
              <a href="subject.html#48793">[ subject ]</a>
              <a href="author.html#48793">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Michel Fortin wrote:
While this may be better than the MathML counterpart, I'd prefer this  
&gt;<i> markup:
</I>&gt;<i> 
</I>&gt;<i>      &lt;p&gt;
</I>&gt;<i>      (X)HTML document may contain math formulae, like
</I>&gt;<i>      &lt;formula&gt;
</I>&gt;<i>      &lt;var&gt;a&lt;/var&gt;&lt;var&gt;x&lt;/var&gt;&lt;sup&gt;2&lt;/sup&gt; +
</I>&gt;<i>      &lt;var&gt;b&lt;/var&gt;&lt;var&gt;x&lt;/var&gt; + &lt;var&gt;c&lt;/var&gt; = 0
</I>&gt;<i>      &lt;/formula&gt;
</I>&gt;<i>      &lt;/p&gt;
</I>&gt;<i> 
</I>&gt;<i> It's more verbose than what you suggested, but still way simpler than  
</I>&gt;<i> MathML.
</I>Completely agree, provided that exta var elements are optional.


&gt;<i> The other point I'd like to make is that a formula element shouldn't  
</I>&gt;<i> be required for all mathematical expressions. If I want talk about  
</I>&gt;<i> variable x in the middle a paragraph, I shouldn't need to surround it  
</I>&gt;<i> like this: &lt;formula&gt;&lt;var&gt;x&lt;/var&gt;&lt;/formula&gt;. Using &lt;var&gt;x&lt;/var&gt; ought  
</I>&gt;<i> to be suffisent. The same applies if I want to include x^2 in the  
</I>&gt;<i> text, &lt;var&gt;x&lt;/var&gt;&lt;sup&gt;2&lt;/sup&gt; should be enough.
</I>I would prefer to enclose inline expressions in some container explicitly.
It is necessary for proper styling and conversion to other languages.

Ian Hickson wrote:
&gt;<i> This markup is completely inadequate to represent mathematics. For 
</I>&gt;<i> example, it doesn't say whether &quot;ax&quot; is one variable or two.
</I>More or less the same markup is used in LaTeX,
ISO 12083, AAP Math DTD and several other markup languages,
no one complaints that it is inadequate. One reason why it is used in this manner
 is that in most of cases you simply don't know whether ax is one variable or two 
because expression can be produced by LaTeX to XML convertor that 
does not know what is variable and what is not (in input format such an information is not present),
because WYSIWYG tools does not care what is varibale and what is not and 
because MathML practice showed that in real world such notations are used for presentational
purposes only and no one actually cares whether it is variable or not.
Note that &lt;mrow&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt; adds absolutely no semantical value to expession,
HTML option &lt;var&gt;a&lt;/var&gt;&lt;var&gt;x&lt;/var&gt; theoretically adds semantics, however on practice some will
write &lt;var&gt;a&lt;/var&gt;&lt;var&gt;x&lt;/var&gt;, some &lt;var&gt;ax&lt;/var&gt; and some ax, thus you can't rely on this semantics.
This is one of the reason why LaTeX, ISO 12083, AAP Math DTD encode only basic structure of mathematical
formulae and do not mark everything on character-by-character basis. 
Note also that unlike computer science, in mathematics you can hardly find two character notations for variables.

&gt;<i> How would you represent the following equation?
</I>&gt;<i>    <A HREF="http://www.w3.org/TR/REC-MathML/images/2_2.gif">http://www.w3.org/TR/REC-MathML/images/2_2.gif</A>
</I>&gt;<i> 
</I>&gt;<i> It would almost certainly appear in any paper that included the equation 
</I>&gt;<i> you mention above, so it's important that we support that.
</I>&gt;<i> 
</I>&gt;<i> Or how about:
</I>&gt;<i> 
</I>&gt;<i>    <A HREF="http://scienceworld.wolfram.com/physics/simg297.gif">http://scienceworld.wolfram.com/physics/simg297.gif</A>
</I>&gt;<i> 
</I>&gt;<i> ...or:
</I>&gt;<i> 
</I>&gt;<i>    <A HREF="http://scienceworld.wolfram.com/physics/bimg179.gif">http://scienceworld.wolfram.com/physics/bimg179.gif</A>
</I>&gt;<i> 
</I>&gt;<i> These are examples of equations that are on a very popular site _today_, 
</I>&gt;<i> so any solution to integrating maths into HTML5 must absolutely be able 
</I>&gt;<i> to cope with these cases.
</I>It should be possible to encode equation like this. 
Opera 9, Prince 5 (pure CSS):	<A HREF="http://www.geocities.com/chavchan/21/example.xml">http://www.geocities.com/chavchan/21/example.xml</A>
MSIE 6.0 (XSLT + CSS): 		<A HREF="http://www.geocities.com/chavchan/exp/trident/example.xml">http://www.geocities.com/chavchan/exp/trident/example.xml</A>

You can find much more complex stuff at
	<A HREF="http://xml-maiden.com">http://xml-maiden.com</A>
(actual markup that we would like to propose for inclusion in HTML5 will
differ from XML MAIDEN and will try to incorporate some requirements posted on this list, 
but for basic ideas of CSS friendly markup language you can refer to XML MAIDEN).
Annotated style sheet that explains how to handle maths like this in CSS is available at
	<A HREF="http://www.geocities.com/chavchan/css/annotated.css">http://www.geocities.com/chavchan/css/annotated.css</A>


&gt;<i> Consider that it must be possible to render this both to visual media *and 
</I>&gt;<i> to non-visual media* without loss information, 
</I>Lossless presentation of aural media is part of W3C mythology that does not always 
work in real world. I agree that there should be possibility to port mathematics to
speach media and braille but in the same time one should be able to distinguish myths
from reality and make solution that actually works.

&gt;<i> both in CSS-capable 
</I>&gt;<i> browsers *and browsers that don't support CSS at all*.
</I>Compatibility with CSS would mean existence of default CSS style sheet 
that can handle arbitrary complex formulae consistently. This would not harm
XSL formatters as basically there is posibility to use XSL FO instead of CSS and
should harm text browsers that will have to implement markup natively in any case.

&gt;<i> In HTML5 we have other options, too. For example, we could define a 
</I>&gt;<i> special parsing mode wherein any stream of numeric characters (separated 
</I>&gt;<i> by whitespace) implies an &lt;mn&gt; element, any stream of punctuation 
</I>&gt;<i> characters implies an &lt;mo&gt; element, etc, such that your example above 
</I>&gt;<i> could end up looking like this in the source:
</I>&gt;<i> 
</I>&gt;<i>    &lt;math&gt;
</I>&gt;<i>      &lt;mrow&gt;a &amp;#x2062; &lt;msup&gt;x 2&lt;/msup&gt;&lt;/mrow&gt; +
</I>&gt;<i>        &lt;mrow&gt;b &amp;#x2062; x&lt;/mrow&gt; + c = 0
</I>&gt;<i>    &lt;/math&gt;
</I>&gt;<i> 
</I>&gt;<i> ...with the DOM being the full MathML representation (namespaces, DOM, and 
</I>&gt;<i> everything), with all the implications that has (full mathematical 
</I>&gt;<i> typography, compatibility with an existing language, its renderers, and 
</I>&gt;<i> its content, unambiguous interpretation, etc).
</I>
In fact I would prefer not to touch DOM (otherwise we could start wil LaTeX like syntax instead of (X)(HT)ML
and generate full representation via XSLT), but to add some property values to CSS3
like for example:

'text-transform' 
	Value:  	capitalize | math-italic | math-bold | math-bold-italic | uppercase | lowercase | none | inherit 
Initial: none 
Applies to: all elements 
Inherited: yes 
Percentages: N/A 
Media: 	visual 
Computed value: as specified

'math-italic'
	Converts Latin and Greek characters to mathematical alphanumerical characters
	 #x1D432-#x1D467 and #x1D6E2-#x1D71B. If mathematical alphanumerical 
	characters are not supported UA may change font-style of Latin and Greek letters
	to italic
'math-bold'
	Converts Latin and Greek characters to mathematical alphanumerical characters
	 #x1D5D4-#x1D607 and #x1D6A8-#x1D6E1. If mathematical alphanumerical 
	characters are not supported UA may change font-weight of Latin and Greek letters
	to bold.
'math-bold-italic'
	Converts Latin and Greek characters to mathematical alphanumerical characters
	 #x1D63C - #x1D66F and #x1D71C - #x1D755. If mathematical alphanumerical 
	characters are not supported UA may change font-weight of Latin and Greek letters
	to bold and font-style to italic.

This should be sufficient to address some of the typographical concerns mentioned on this list.

&gt;<i> What we need, to move forwards on this, would be a full proposal for what 
</I>&gt;<i> you want added to HTML5. 
</I>I will write sketch of proposal and post it on list, then we can be more specific.

&gt;<i> Currently this thread seems mostly to be along 
</I>&gt;<i> the lines of &quot;we should add maths, but we shouldn't make it hard&quot;.
</I>Yes but &quot;we should add maths&quot; and &quot;we shouldn't make it hard&quot; have quite definite meaning.
We should add maths because current situation is simply ridiculous, consider for example fractions like
&lt;fraction&gt;
&lt;num&gt;numerator&lt;/num&gt;
&lt;den&gt;numerator&lt;/den&gt;
&lt;/fraction&gt;
Even MSIE can hadle them (including deeply nested patterns like fraction inside fraction inside another fraction etc.)
using simple CSS style sheet
	fraction
		{display:inline-block;
		white-space:nowrap;
		text-align:center;
		vertical-align:-0.8em;
		margin:0 2px;
		font-size:1em;}
	num, den
		{line-height:1.5em;
		font-size:0.9em;}
	num
		{border-bottom:solid 1px;
		display:block;}
	den
		{display:inline-block;
		vertical-align:text-top;}
Opera and Prince can handle them in the same manner. Safari just needs small bug fix 
(baseline alignment of inline-blocks) and Mozilla has to fix bug #9458 (it should be fix
in any case, but even without bug fix it is not a big issue to cook style sheet using -moz-inline-box).
Here is example (works in Opera 9, MSIE 6.0, Prince 5): 
	<A HREF="http://www.geocities.com/chavchan/frac/fractions.xml">http://www.geocities.com/chavchan/frac/fractions.xml</A>
Thus price that browser developers have to pay for fractions is very close to zero, so why not to make some 
mathematicians happy and include fractions in HTML5? The same applies to nearly each and every 
mathematical expression, so it is funny to have opportunity and not to use it just because seven years ago
someone at W3C decided to &quot;reinvent wheel, make it square and put the horse behind the cart&quot;.

So basically what we mean by &quot;we should add maths, but we shouldn't make it hard&quot;
is that we should add simple, human processable math oriented markup like ISO 12083 that however fits well
in XML + CSS framework (ISO 12083 was developed before XML and CSS and worked in 
SGML + DSSSL framework that drastically differs from current XML + CSS so one has to change some
parts of markup to make it work) that would allow browser developers to implement 
extra markup with a few efforts by reusing existing capabilities of rendering engine and 
from the beggining avoiding unnecessary conflicts between ad-hoc math oriented style language 
(like mstyle element with collection of formatting oriented attributes in MathML) and 
CSS used in parent HTML document.

Michel Fortin wrote:
&gt;<i> I'm pretty sure that with SVG and CSS 3 border-image[1] it wouldn't  
</I>&gt;<i> be too hard to have professional looking scalable radicals,  
</I>&gt;<i> integrals, and brackets. Matrix would be taken care of by inline  
</I>&gt;<i> table, faction with inline blocks.
</I>Yes, border-image should be suitable for nearly everything but large angle  brackets.
In fact it would be nice to have something more reliable than border images.

&gt;<i> What could prove a little harder is positioning of integral  
</I>&gt;<i> endpoints, as well as lower and upper bounds of summation and product  
</I>&gt;<i> symbols, without resorting to awkward markup.
</I>Yes, markup is slightly awkward in this case. But is not a problem in case of operators.
The real problem appears when you have to align stacked indices with top and bottom of matrix.

&gt;<i> But it'd certainly be a lot easier for browser implementors to add  
</I>&gt;<i> some math-specific CSS properties for the missing parts than to  
</I>&gt;<i> create a full MathML implementation.
</I>Yes, number of required CSS extensions will be small (may be even zero).
In case of full MathML implementation the main problem is not the full MathML implementation itself,
but consistent integration with the rest of standards (consider CSS, DOM2 Style) which is real headache.

Alexey Feldgendler wrote:
&gt;&gt;<i> * stacking of multiple signs like tildes, arrows etc above variables
</I>&gt;<i> 
</I>&gt;<i> &gt; Unicode allows several combining diacritical marks per base character.
</I>&gt;<i> &gt; But browser support for combining diacritics is not perfect.
</I>&gt;<i> 
</I>&gt;<i> They need to stack over each other, not overlay each other.
</I>Yes, combining diacritical marks are designed to stack over each other (not overlay). 
But are not supported properly by current browsers.

&gt;&gt;<i> * correct continuation of long fractions on the next line
</I>&gt;<i> 
</I>&gt;<i> &gt; Never seen something similar. We just prohibiting line breaks in  
</I>&gt;<i> &gt; fractions.
</I>&gt;<i> 
</I>&gt;<i> TeX avoids them, too, but sometimes a complex fraction is simply longer  
</I>&gt;<i> than the line. There are typesetting rules on conitnuation of fractions.
</I>Ok. It is not possible in CSS2.1 and I doubt it is actual requirement.

&gt;&gt;&gt;<i> * stretching of tildes etc over complex expressions
</I>&gt;&gt;<i> It's an open issue. Can't promise anything. Possible solution could be  
</I>&gt;&gt;<i> SVG inserted from style sheet using CSS generated content.
</I>&gt;<i>Can SVG content be generated?
</I>It can be inserted as either background image or via content:url('data-uri-goes-here').

&gt;&gt;<i> * matrices with cells of uniform size (as to accomodate for the largest
</I>&gt;<i> &gt;&gt; expression found)
</I>&gt;<i> &gt; Not possible within CSS2.1 tables model, unless widths are specified  
</I>&gt;<i> &gt; explicitly. So the burden of making cells uniform lays on author.
</I>&gt;<i> Is it possible in CSS3?
</I>AFAIK not yet.

&gt;<i> Here is what should happen:
</I>&gt;<i> 
</I>&gt;<i> text text text
</I>&gt;<i> text x^2 text
</I>&gt;<i> text text text
</I>&gt;<i> 
</I>&gt;<i> Here the superscript should not increase line spacing. But if there was  
</I>&gt;<i> some more complex expession, TeX would add some extra spacing above (or  
</I>&gt;<i> below, if needed) that line. TeX has a configurable threshold of how far  
</I>&gt;<i> can an inline formula ascend and descend from a line without having to  
</I>&gt;<i> increase the line spacing.
</I>It is possible to suppress effect, by reducing line-height of sub/superscripts.
/* Relative positioning eliminates the problem entirely, but is not the best solution
for complex formulae as it may cause some expressions to overlap */






-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 8 at <A HREF="http://www.opera.com">http://www.opera.com</A>

Powered by Outblaze

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="048792.html">[whatwg] Mathematics in HTML5
</A></li>
	<LI>Next message: <A HREF="048796.html">[whatwg] Mathematics in HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48793">[ date ]</a>
              <a href="thread.html#48793">[ thread ]</a>
              <a href="subject.html#48793">[ subject ]</a>
              <a href="author.html#48793">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
