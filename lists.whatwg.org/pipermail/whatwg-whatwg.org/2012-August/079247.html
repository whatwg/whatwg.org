<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Serialization of expandos on String / Boolean / Number objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Serialization%20of%20expandos%20on%20String%20/%20Boolean%20/%20Number%0A%20objects&In-Reply-To=%3CPine.LNX.4.64.1208232105090.28570%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079246.html">
   <LINK REL="Next"  HREF="036976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Serialization of expandos on String / Boolean / Number objects</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Serialization%20of%20expandos%20on%20String%20/%20Boolean%20/%20Number%0A%20objects&In-Reply-To=%3CPine.LNX.4.64.1208232105090.28570%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Serialization of expandos on String / Boolean / Number objects">ian at hixie.ch
       </A><BR>
    <I>Thu Aug 23 14:07:44 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079246.html">[whatwg] Serialization of expandos on String / Boolean / Number	objects
</A></li>
        <LI>Next message: <A HREF="036976.html">[whatwg] Fwd: fallback section taking over for 4xx and 5xx	responses while online
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79247">[ date ]</a>
              <a href="thread.html#79247">[ thread ]</a>
              <a href="subject.html#79247">[ subject ]</a>
              <a href="author.html#79247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 23 Aug 2012, Dumez, Christophe wrote:
&gt;<i> 
</I>&gt;<i> The latest specification of the structured clone algorithm [1] does not 
</I>&gt;<i> indicate that we are supposed to serialize expandos on objects such as 
</I>&gt;<i> String, Boolean or Number.
</I>&gt;<i> 
</I>&gt;<i> For example:
</I>&gt;<i> var str = new String(&quot;test&quot;);
</I>&gt;<i> str.foo = 3;
</I>&gt;<i> window.postMessage(str, &quot;*&quot;);
</I>&gt;<i> 
</I>&gt;<i> Isn't str.foo property supposed to be serialized? If I read the
</I>&gt;<i> specification correctly, it is not:
</I>&gt;<i> &quot;&quot;&quot;
</I>&gt;<i> If input is a String object
</I>&gt;<i> 
</I>&gt;<i>          Let output be a newly constructed String object with the same
</I>&gt;<i> value as input.
</I>&gt;<i> &quot;&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i> Is this behavior really intended? I think it would make sense to
</I>&gt;<i> serialize the properties attached to such objects.
</I>
On Thu, 23 Aug 2012, Tab Atkins Jr. wrote:
&gt;<i> 
</I>&gt;<i> As far as I can tell, the Structured Clone algorithm has mostly bottomed 
</I>&gt;<i> out into JSON, so the loss of expandos on those builtins is intentional 
</I>&gt;<i> - keeping them would mean serializing them as objects, rather than as 
</I>&gt;<i> literals.
</I>
This is correct. With some exceptions (like Blobs and supporting cycles), 
we are trying to be close to JSON in terms of the basic data structure.

Supporting things like Strings as primitive types would also make 
conversion to other languages much more complicated (most languages don't 
have a concept of &quot;object whose value is a string plus a dictionary&quot;).

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079246.html">[whatwg] Serialization of expandos on String / Boolean / Number	objects
</A></li>
	<LI>Next message: <A HREF="036976.html">[whatwg] Fwd: fallback section taking over for 4xx and 5xx	responses while online
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79247">[ date ]</a>
              <a href="thread.html#79247">[ thread ]</a>
              <a href="subject.html#79247">[ subject ]</a>
              <a href="author.html#79247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
