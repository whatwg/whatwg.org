<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for Links to Unrelated Browsing Contexts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20Links%20to%20Unrelated%20Browsing%20Contexts&In-Reply-To=%3CC0BE72C7-4B08-4BC4-8FCE-D724D66115B4%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079278.html">
   <LINK REL="Next"  HREF="079280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for Links to Unrelated Browsing Contexts</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20Links%20to%20Unrelated%20Browsing%20Contexts&In-Reply-To=%3CC0BE72C7-4B08-4BC4-8FCE-D724D66115B4%40apple.com%3E"
       TITLE="[whatwg] Proposal for Links to Unrelated Browsing Contexts">mjs at apple.com
       </A><BR>
    <I>Mon Aug 27 23:43:35 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079278.html">[whatwg] Proposal for Links to Unrelated Browsing Contexts
</A></li>
        <LI>Next message: <A HREF="079280.html">[whatwg] Proposal for Links to Unrelated Browsing Contexts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79279">[ date ]</a>
              <a href="thread.html#79279">[ thread ]</a>
              <a href="subject.html#79279">[ subject ]</a>
              <a href="author.html#79279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
James pointed out to me that the proposal explains the difference to noreferrer, which is essential that it *does* send a referrer, but has the rel=noreferrer behavior of nulling out window.opener.

I'm still not clear on the use case for nulling the opener but still sending the Referer header. It seems like it is better for mail clients to clear referrer. What kinds of web apps need to open new windows and null window.opener, but still send Referer?

The reason I'm asking is that it seems regrettable to have two link types with such similar but subtly different behavior.

Cheers,
Maciej

On Aug 27, 2012, at 11:23 PM, Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> Someone earlier in the thread mentioned that this feature sounds an awful lot like rel=noreferrer, which has been in WebKit for several years:
</I>&gt;<i> <A HREF="http://www.webkit.org/blog/907/webkit-nightlies-support-html5-noreferrer-link-relation/">http://www.webkit.org/blog/907/webkit-nightlies-support-html5-noreferrer-link-relation/</A>
</I>&gt;<i> 
</I>&gt;<i> It is also mentioned in the official link relation registry:
</I>&gt;<i> <A HREF="http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions">http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions</A>
</I>&gt;<i> 
</I>&gt;<i> Do you have a use case for your new proposal that is not handled by &lt;a href=&quot;...&quot; rel=noreferrer target=_blank&gt;? Does it have a materially different effect? (I can't tell.)
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Maciej
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Aug 27, 2012, at 5:29 PM, Charlie Reis &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">creis at chromium.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On Mon, Aug 27, 2012 at 4:46 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On Wed, 6 Jun 2012, Charlie Reis wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> I've posted a new proposal to the WhatWG wiki to give web sites a way
</I>&gt;&gt;&gt;&gt;<i> to open a link in an unrelated browsing context.  These links would open
</I>&gt;&gt;&gt;&gt;<i> in a new window with no script connections back to the original site,
</I>&gt;&gt;&gt;&gt;<i> which is useful for web apps like Gmail that open user-contributed
</I>&gt;&gt;&gt;&gt;<i> links.  Also, this could allow multi-process browsers like Google Chrome
</I>&gt;&gt;&gt;&gt;<i> to open the new page in a separate process.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Any feedback on the proposal is appreciated!
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://wiki.whatwg.org/wiki/Links_to_Unrelated_Browsing_Contexts">http://wiki.whatwg.org/wiki/Links_to_Unrelated_Browsing_Contexts</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> It's not entirely clear to me what the desired behaviour is here. Which of
</I>&gt;&gt;&gt;<i> the following are considered features that we need to provide? Which are
</I>&gt;&gt;&gt;<i> secondary goals, which are non-goals, which are anti-goals?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I think our discussion found this feature would be most useful if the new
</I>&gt;&gt;<i> page was unable to find its opener, so I'd group things as follows.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Primary goals:
</I>&gt;&gt;<i> + have the new page use a different event loop if possible (new process)
</I>&gt;&gt;<i> + have the window of the new page not be able to reach the opener via
</I>&gt;&gt;<i>  a named window.open() or target=&quot;&quot;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> As a result, I think these are also necessary features:
</I>&gt;&gt;<i> + have the new page be in a different unit of related browsing contexts
</I>&gt;&gt;<i> + have the new page be in a new browsing context
</I>&gt;&gt;<i> + have &quot;window.opener&quot; not be set
</I>&gt;&gt;<i> + have the window.name of the new page be set to &quot;&quot;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Secondary goals:
</I>&gt;&gt;<i> + have the sessionStorage not be cloned for the new page's browsing
</I>&gt;&gt;<i>  context
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Non-goals:
</I>&gt;&gt;<i> + have the new page be in the same browsing context
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Anti-goals:
</I>&gt;&gt;<i> + have the referer header be cleared on the load of the new page
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Does this need to be done from window.open()?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Yes.  For example, Gmail uses window.open() for the links in emails, but
</I>&gt;&gt;<i> would like the links to open in an unrelated context.
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> From &lt;a href&gt;?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Yes.  For example, links to switch between apps within a domain would be
</I>&gt;&gt;<i> useful to have open in an unrelated context (e.g., the black bar at the top
</I>&gt;&gt;<i> of Google pages).
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> From &lt;form action&gt;?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I don't know of any immediate use cases for this, but it might be nice for
</I>&gt;&gt;<i> consistency.
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Is this a symmetric feature?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Sorry, I'm not sure what you mean by symmetric here.  The page opened in
</I>&gt;&gt;<i> the unrelated context may also be able to open pages in another unrelated
</I>&gt;&gt;<i> context.
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> At a more fundamental level: what are the use cases here? Is it just
</I>&gt;&gt;&gt;<i> e-mail clients that want to open links?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Links in email clients is one use case.  For user agents that can open such
</I>&gt;&gt;<i> links in a different event loop, another use case is to allow multiple
</I>&gt;&gt;<i> independent apps under the same domain to run in parallel, even when
</I>&gt;&gt;<i> opening one app from another.  (For example, Chrome could open links to
</I>&gt;&gt;<i> different Google apps like Search, Maps, Mail, etc, in different processes.)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Even in user agents where all pages share the same event loop, this can be
</I>&gt;&gt;<i> useful to help enforce modularity in large applications (e.g., stopping a
</I>&gt;&gt;<i> developer in one part of a large site from introducing a scripting
</I>&gt;&gt;<i> dependency on another part of the site).  That's admittedly a secondary
</I>&gt;&gt;<i> benefit, and not the primary goal.
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> What are the attack scenarios? Is
</I>&gt;&gt;&gt;<i> it just links in e-mails getting at the e-mail app somehow?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The attack scenarios are about protecting any web app from unwanted script
</I>&gt;&gt;<i> calls or navigation attempts from untrusted pages in windows that it opens.
</I>&gt;&gt;<i> You could imagine anything from a mail client to a news reader to a social
</I>&gt;&gt;<i> network using it for links to external content.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Beyond defending against those attacks, the feature is also about allowing
</I>&gt;&gt;<i> unrelated pages to run on parallel event loops, so they aren't blocked on
</I>&gt;&gt;<i> each other.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Without more details like the above it's hard to evaluate the proposals.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;&gt;&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;&gt;&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I hope that clarifies things!  It wasn't initially clear whether preventing
</I>&gt;&gt;<i> any access from the new page to the opener window (e.g., by finding the
</I>&gt;&gt;<i> named window) was necessary, but it does seem like the feature would be
</I>&gt;&gt;<i> most useful if that were the case.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Charlie
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079278.html">[whatwg] Proposal for Links to Unrelated Browsing Contexts
</A></li>
	<LI>Next message: <A HREF="079280.html">[whatwg] Proposal for Links to Unrelated Browsing Contexts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79279">[ date ]</a>
              <a href="thread.html#79279">[ thread ]</a>
              <a href="subject.html#79279">[ subject ]</a>
              <a href="author.html#79279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
