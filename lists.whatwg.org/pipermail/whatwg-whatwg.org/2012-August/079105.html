<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] StringEncoding: Allowed encodings for TextEncoder
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20StringEncoding%3A%20Allowed%20encodings%20for%20TextEncoder&In-Reply-To=%3CCA%2Bc2ei_XSx4frxBo0urEQUL7T%3DAAua9yHJMqjV_2nKOY9fXO-w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079110.html">
   <LINK REL="Next"  HREF="079114.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] StringEncoding: Allowed encodings for TextEncoder</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20StringEncoding%3A%20Allowed%20encodings%20for%20TextEncoder&In-Reply-To=%3CCA%2Bc2ei_XSx4frxBo0urEQUL7T%3DAAua9yHJMqjV_2nKOY9fXO-w%40mail.gmail.com%3E"
       TITLE="[whatwg] StringEncoding: Allowed encodings for TextEncoder">jonas at sicking.cc
       </A><BR>
    <I>Tue Aug  7 10:51:34 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079110.html">[whatwg] StringEncoding: Allowed encodings for TextEncoder
</A></li>
        <LI>Next message: <A HREF="079114.html">[whatwg] StringEncoding: Allowed encodings for TextEncoder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79105">[ date ]</a>
              <a href="thread.html#79105">[ thread ]</a>
              <a href="subject.html#79105">[ subject ]</a>
              <a href="author.html#79105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Aug 7, 2012 at 9:48 AM, Joshua Bell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jsbell at chromium.org</A>&gt; wrote:
&gt;&gt;<i> Not an objection, but where does XHR limit sent data to those encodings?
</I>&gt;&gt;<i> send(FormData) forces UTF-8 (which is even more restrictive);
</I>&gt;&gt;<i> send(Document) seems to allow any encoding *except* for UTF-16 (presumably
</I>&gt;&gt;<i> web compat since that's a weird criteria).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm not sure that staying in sync with XHR--which has its own pile of
</I>&gt;&gt;<i> legacy code to support--is worthwhile here anyway, but limiting to Unicode
</I>&gt;&gt;<i> seems fine in its own right, especially since the restriction can always
</I>&gt;&gt;<i> be
</I>&gt;&gt;<i> lifted later if real needs come up.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However I currently can't find any restrictions on which target
</I>&gt;&gt;<i> &gt; encodings are supported in the current drafts.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> When Anne's spec appeared I gutted mine and deferred wherever possible to
</I>&gt;<i> his. One consequence of that was getting the other encodings &quot;for free&quot; as
</I>&gt;<i> far as the spec writing goes.
</I>&gt;<i>
</I>&gt;<i> If we achieve consensus that we only want to support UTF encodings we can
</I>&gt;<i> add the restrictions. There are use cases for supporting other encodings
</I>&gt;<i> (parsing legacy data file formats, for example), but that could be deferred.
</I>
I don't mind supporting *decoding* from basically any encoding that
Anne's spec enumerates. I don't see a downside with that since I
suspect most implementations will just call into a generic decoding
backend anyway, and so supporting the same set of encodings as for
other parts of the platform should be relatively easy.

That also means that we don't have to figure out which encodings we
need to support to support reading legacy file formats etc.

However I think we should consider restricting support to a smaller
set of encodings for while *encoding*. There should be little reason
for people today to produce text in non-utf formats. We might even be
able to get away with only supporting UTF8, though I wouldn't be
surprised if there are reasonably modern file formats which use utf16.

Restricting the encoding formats have the advantage of that we can
rely on the target encoding to support a consistent feature set. For
example we don't need to deal with defining what to do if we receive a
perfectly well formed string, but the target encoding doesn't support
all the characters in that string. Likewise we don't have to deal with
target encodings which doesn't support the replacement character.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079110.html">[whatwg] StringEncoding: Allowed encodings for TextEncoder
</A></li>
	<LI>Next message: <A HREF="079114.html">[whatwg] StringEncoding: Allowed encodings for TextEncoder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79105">[ date ]</a>
              <a href="thread.html#79105">[ thread ]</a>
              <a href="subject.html#79105">[ subject ]</a>
              <a href="author.html#79105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
