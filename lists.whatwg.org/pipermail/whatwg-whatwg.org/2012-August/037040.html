<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Readiness of script-created documents
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Readiness%20of%20script-created%20documents&In-Reply-To=%3CPine.LNX.4.64.1208292208540.30734%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037039.html">
   <LINK REL="Next"  HREF="079314.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Readiness of script-created documents</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Readiness%20of%20script-created%20documents&In-Reply-To=%3CPine.LNX.4.64.1208292208540.30734%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Readiness of script-created documents">ian at hixie.ch
       </A><BR>
    <I>Wed Aug 29 15:11:34 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="037039.html">[whatwg] Domain transfer security
</A></li>
        <LI>Next message: <A HREF="079314.html">[whatwg] Readiness of script-created documents
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37040">[ date ]</a>
              <a href="thread.html#37040">[ thread ]</a>
              <a href="subject.html#37040">[ subject ]</a>
              <a href="author.html#37040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, 15 Jun 2012, Henri Sivonen wrote:
&gt;<i> On Tue, Jun 12, 2012 at 1:46 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; When a document is aborted the state is more or less left exactly as 
</I>&gt;<i> &gt; it was when it was aborted. This includes the readiness state. It also 
</I>&gt;<i> &gt; means no events fire (e.g. no 'load', 'unload', or 'error' events), a 
</I>&gt;<i> &gt; number of scripts just get abandoned without executing, appcache stuff 
</I>&gt;<i> &gt; gets abandoned, queued calls to window.print() get forgotten, etc.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Aborting a document is a very heavy-handed measure. Documents are not 
</I>&gt;<i> &gt; expected to last long after they have been aborted, typically. Pages 
</I>&gt;<i> &gt; aren't expected to remain functional beyond that point.
</I>&gt;<i> 
</I>&gt;<i> That's not reality in all browsers right now, and I think it doesn't 
</I>&gt;<i> make sense to make that the reality. That is, there already browsers 
</I>&gt;<i> that transition readyState to &quot;complete&quot; upon aborting the parser and I 
</I>&gt;<i> think doing that makes sense (and I want to change Gecko to do that, 
</I>&gt;<i> too)
</I>
With you up to here. The spec has been updated to transition to 'complete' 
after it is aborted, on the principle that 'loading' means that the parser 
is still active.


&gt;<i> because a non-&quot;complete&quot; readyState is a promise to fire an &quot;load&quot; event 
</I>&gt;<i> later.
</I>
That's not the case, though.


&gt;<i> I think it's a bad idea to leave a document into the &quot;loading&quot; state 
</I>&gt;<i> when the browser engine knows that it won't fire and &quot;load&quot; event for 
</I>&gt;<i> the document.
</I>
That's fair enough.


&gt;<i> Basically, I think the platform should maximize the chances of the
</I>&gt;<i> following code pattern causing doStuff to run once the document has
</I>&gt;<i> completely loaded:
</I>&gt;<i> if (document.readyState == &quot;complete&quot;) {
</I>&gt;<i>   setTimeout(doStuff, 0);
</I>&gt;<i> } else {
</I>&gt;<i>   document.addEventListener(&quot;load&quot;, doStuff);
</I>&gt;<i> }
</I>
I agree, but we're not talking about documents that are completely loaded 
here. We're talking about documents that get aborted. Documents that are 
aborted do not need to work, they were aborted precisely because they 
don't need to work and are no longer needed.

No 'load' event fires after a document is aborted, because it didn't load.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037039.html">[whatwg] Domain transfer security
</A></li>
	<LI>Next message: <A HREF="079314.html">[whatwg] Readiness of script-created documents
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37040">[ date ]</a>
              <a href="thread.html#37040">[ thread ]</a>
              <a href="subject.html#37040">[ subject ]</a>
              <a href="author.html#37040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
