<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Archive API - proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Archive%20API%20-%20proposal&In-Reply-To=%3CCABirCh_OVvxhv94_-x9PpOY4uhCHe4%2B7HSLKrj%2BY4xi%3Dz58Fkg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079189.html">
   <LINK REL="Next"  HREF="079191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Archive API - proposal</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Archive%20API%20-%20proposal&In-Reply-To=%3CCABirCh_OVvxhv94_-x9PpOY4uhCHe4%2B7HSLKrj%2BY4xi%3Dz58Fkg%40mail.gmail.com%3E"
       TITLE="[whatwg] Archive API - proposal">glenn at zewt.org
       </A><BR>
    <I>Tue Aug 14 14:33:39 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079189.html">[whatwg] Archive API - proposal
</A></li>
        <LI>Next message: <A HREF="079191.html">[whatwg] Archive API - proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79190">[ date ]</a>
              <a href="thread.html#79190">[ thread ]</a>
              <a href="subject.html#79190">[ subject ]</a>
              <a href="author.html#79190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>(Please remember to trim quotes.)

On Tue, Aug 14, 2012 at 4:05 PM, Tobie Langel &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">tobie.langel at gmail.com</A>&gt;wrote:

&gt;<i> How are nested directories handled in your counter proposal?
</I>&gt;<i>
</I>
The ZIP directory is simply a list of files anyway.  Just store the
complete path of the file in .name:

zipFile.files[0].name == &quot;file.txt&quot;
zipFile.files[1].name == &quot;path/file.txt&quot;

Don't expose an entry for &quot;path&quot; itself.

This doesn't give a way to expose the existance of empty directories, which
I suppose might be useful (the original proposal doesn't do that, either).
This could be handled if wanted, with a separate .directories array
containing just a list of DOMStrings (&quot;path&quot;), though I wouldn't bother
unless there was demand.

Oh, one other thing: sort .files by disk order, eg. by the &quot;relative offset
of local header&quot; field in the CD file entry.  (This is usually the order
files appear in the central directory itself, but this isn't guaranteed.)
This guarantees the order of .files is predictable.  Also, if the page
reads all files sequentially from the ZIP in this order, the actual file
will be traversed sequentially.  That's much faster than reading them out
of order, especially for lots of small files.

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079189.html">[whatwg] Archive API - proposal
</A></li>
	<LI>Next message: <A HREF="079191.html">[whatwg] Archive API - proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79190">[ date ]</a>
              <a href="thread.html#79190">[ thread ]</a>
              <a href="subject.html#79190">[ subject ]</a>
              <a href="author.html#79190">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
