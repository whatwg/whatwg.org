<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;a onlyreplace&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Ca%20onlyreplace%3E&In-Reply-To=%3Cc5845d1b0910171116y15b99779k45e50f0a89e33faa%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023697.html">
   <LINK REL="Next"  HREF="023699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;a onlyreplace&gt;</H1>
<!--htdig_noindex-->
    <B>Dion Almaer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Ca%20onlyreplace%3E&In-Reply-To=%3Cc5845d1b0910171116y15b99779k45e50f0a89e33faa%40mail.gmail.com%3E"
       TITLE="[whatwg] &lt;a onlyreplace&gt;">dion at almaer.com
       </A><BR>
    <I>Sat Oct 17 11:16:14 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="023697.html">[whatwg] &lt;a onlyreplace&gt;
</A></li>
        <LI>Next message: <A HREF="023699.html">[whatwg] &lt;a onlyreplace&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23698">[ date ]</a>
              <a href="thread.html#23698">[ thread ]</a>
              <a href="subject.html#23698">[ subject ]</a>
              <a href="author.html#23698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>This feels like really nice sugar, but maybe the first step should be to get
the shim out that gets it working using JS now.... and then see how it works
in practice. I totally understand why this looks exciting, but I have the
same uneasiness as Jonas.  It feels like a LOT of magic to go grab a page
and grab out the id and ..... and I am sure there are edges. Cool idea for
sure! It also feels like this should work nicely with the history/state work
that already exists.

On Sat, Oct 17, 2009 at 9:57 AM, Markus Ernst &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">derernst at gmx.ch</A>&gt; wrote:

&gt;<i> Tab Atkins Jr. schrieb:
</I>&gt;<i>
</I>&gt;&gt;<i> On Sat, Oct 17, 2009 at 12:22 AM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also, what should happen if the user presses the 'back' button?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If the browser can remember what the page state was previously, just
</I>&gt;&gt;<i> swap in the old parts.  If not, but it at least remembers what parts
</I>&gt;&gt;<i> were replaced, make a fresh request for the previous page and
</I>&gt;&gt;<i> substitute in just those bits.  If it can't remember anything, just do
</I>&gt;&gt;<i> an ordinary navigation with a full page swap.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It should act as exactly like current Back behavior as possible.
</I>&gt;&gt;<i> We're not really playing with the semantics of navigation, so that
</I>&gt;&gt;<i> shouldn't be difficult.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I agree to that. I click a link on a page with an URI, and after clicking I
</I>&gt;<i> get a new page with another URI - so if I hit the back button, I expect
</I>&gt;<i> getting back the page I had seen before clicking the link. (Of course with
</I>&gt;<i> the browser-specific peculiarities - Firefox e.g. remembers the scroll
</I>&gt;<i> position, others may not...) The user experience when using the back button
</I>&gt;<i> should not differ whether a browser supports @onlyreplace or not.
</I>&gt;<i>
</I>&gt;<i>  On Sat, Oct 17, 2009 at 3:53 AM, Gregory Maxwell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gmaxwell at gmail.com</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm guessing that the rare case where you need to write into a
</I>&gt;&gt;&gt;<i> replaced ID you can simply have a JS hook that fires on the load and
</I>&gt;&gt;&gt;<i> fixes up the replaced sections as needed.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The functioning of load events here confuses me a bit, because I've
</I>&gt;&gt;<i> never done any hacking in that area and so don't understand the
</I>&gt;&gt;<i> mechanics well enough to know what's reasonable.  Should the new page
</I>&gt;&gt;<i> still fire a load event once its replaceable content has loaded?  I'm
</I>&gt;&gt;<i> guessing that the old page never fires an unload event?  I really
</I>&gt;&gt;<i> don't know what should happen in this area.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (After giving it a little thought, though, I think we shouldn't change
</I>&gt;&gt;<i> the semantics of load/unload/etc.  These are still useful, after all,
</I>&gt;&gt;<i> for when the page *is* completely unloaded or loaded, such as on first
</I>&gt;&gt;<i> visit or when the user hits Refresh.  We'd probably want a new set of
</I>&gt;&gt;<i> events that fire at the elements being swapped out, and then at the
</I>&gt;&gt;<i> new elements once they've been pushed in.)
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I admit I don't fully understand load events either. If I get it correctly,
</I>&gt;<i> this is about functions called on load, that access elements in the
</I>&gt;<i> replaceable parts of the page. A common use case for this is setting the
</I>&gt;<i> focus on the first input element of a form. I don't think that this can be
</I>&gt;<i> solved at the UA side, some authoring will be necessary; some possible
</I>&gt;<i> workarounds are:
</I>&gt;<i> - Put page-specific scripts into a separate &lt;script&gt; element with an id,
</I>&gt;<i> and include it in the @onlyreplace list;
</I>&gt;<i> - make one script that fits for all pages, by checking if an element exists
</I>&gt;<i> before doing actions on it;
</I>&gt;<i> - instead of using &lt;body onLoad=&quot;foo()&quot;&gt;, put the function call into a
</I>&gt;<i> &lt;script&gt; element at the bottom of the replaceable element.
</I>&gt;<i>
</I>&gt;<i> Anyway such things would be much easier (with or without @onlyreplace) if
</I>&gt;<i> the onLoad event handler would be allowed on every HTML element rather than
</I>&gt;<i> on window and body only:
</I>&gt;<i> &lt;input type=&quot;text&quot; name=&quot;Name&quot; onLoad=&quot;this.focus()&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> But this looks that trivial to me - element.onLoad must have been suggested
</I>&gt;<i> long ago and been declined for good reasons, I assume?
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091017/2ccd98ae/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091017/2ccd98ae/attachment.htm</A>&gt;
</PRE>






























































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023697.html">[whatwg] &lt;a onlyreplace&gt;
</A></li>
	<LI>Next message: <A HREF="023699.html">[whatwg] &lt;a onlyreplace&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23698">[ date ]</a>
              <a href="thread.html#23698">[ thread ]</a>
              <a href="subject.html#23698">[ subject ]</a>
              <a href="author.html#23698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
