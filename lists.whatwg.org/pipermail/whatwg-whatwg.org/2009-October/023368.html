<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Charset sniffing from XML prolog
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Charset%20sniffing%20from%20XML%20prolog&In-Reply-To=%3C20091008042615.80C8C8DB001D%40zapata.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023366.html">
   <LINK REL="Next"  HREF="023369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Charset sniffing from XML prolog</H1>
<!--htdig_noindex-->
    <B>Kartikaya Gupta</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Charset%20sniffing%20from%20XML%20prolog&In-Reply-To=%3C20091008042615.80C8C8DB001D%40zapata.dreamhost.com%3E"
       TITLE="[whatwg] Charset sniffing from XML prolog">lists.whatwg at stakface.com
       </A><BR>
    <I>Wed Oct  7 21:26:14 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="023366.html">[whatwg] Charset sniffing from XML prolog
</A></li>
        <LI>Next message: <A HREF="023369.html">[whatwg] Charset sniffing from XML prolog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23368">[ date ]</a>
              <a href="thread.html#23368">[ thread ]</a>
              <a href="subject.html#23368">[ subject ]</a>
              <a href="author.html#23368">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> In this case, though, it's totally my fault: I just forgot that I had 
</I>&gt;<i> the HTML5 parser turned on locally.  Turning that off, I do get UTF-8, 
</I>&gt;<i> because of 
</I>&gt;<i> <A HREF="http://hg.mozilla.org/mozilla-central/file/603759afc77a/parser/htmlparser/src/nsParser.cpp#l2553">http://hg.mozilla.org/mozilla-central/file/603759afc77a/parser/htmlparser/src/nsParser.cpp#l2553</A> 
</I>&gt;<i> and following.  That code is just bogus, in my somewhat biased 
</I>&gt;<i> opinion.... ;)
</I>
So then is this behavior getting axed or specced? The site in question that relies on this behavior is <A HREF="http://bell.mobi/primary">http://bell.mobi/primary</A> - it's not as noticeable in the english-locale version but if you switch to a french locale you get a bunch of french encoded as utf-8. Browsers with the prolog sniffing will render it fine but others will show garbage.

I'd be happier with not having to change my code to deal with this website, since it will occasionally show garbage even in utf-8.

kats
</PRE>





















































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023366.html">[whatwg] Charset sniffing from XML prolog
</A></li>
	<LI>Next message: <A HREF="023369.html">[whatwg] Charset sniffing from XML prolog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23368">[ date ]</a>
              <a href="thread.html#23368">[ thread ]</a>
              <a href="subject.html#23368">[ subject ]</a>
              <a href="author.html#23368">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
