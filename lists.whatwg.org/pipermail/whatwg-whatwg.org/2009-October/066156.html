<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] focus change inside keypress event handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20focus%20change%20inside%20keypress%20event%20handler&In-Reply-To=%3C4AEA799C.8090701%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066153.html">
   <LINK REL="Next"  HREF="066169.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] focus change inside keypress event handler</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20focus%20change%20inside%20keypress%20event%20handler&In-Reply-To=%3C4AEA799C.8090701%40mit.edu%3E"
       TITLE="[whatwg] focus change inside keypress event handler">bzbarsky at MIT.EDU
       </A><BR>
    <I>Thu Oct 29 22:29:00 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066153.html">[whatwg] focus change inside keypress event handler
</A></li>
        <LI>Next message: <A HREF="066169.html">[whatwg] focus change inside keypress event handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66156">[ date ]</a>
              <a href="thread.html#66156">[ thread ]</a>
              <a href="subject.html#66156">[ subject ]</a>
              <a href="author.html#66156">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 10/29/09 9:58 PM, Michael A. Puls II wrote:
&gt;&gt;&gt;<i> But, in Firefox, Safari and Opera, it's possible to change what element
</I>&gt;&gt;&gt;<i> the text is inserted into by changing the focus in 'keydown'.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Right; that happens because the keydown and keypress events need not
</I>&gt;&gt;<i> fire on the same element and because the text entry is the keypress
</I>&gt;&gt;<i> default action. In Gecko, that is. I can't speak to Safari and Opera.
</I>&gt;<i>
</I>&gt;<i> So, just to be sure, you're happy with that behavior?
</I>
Which?  It being possible to change focus in keydown and thus change 
where the text will go?

I'm pretty agnostic on whether that should be possible or not. 
Whichever way makes the event model simpler, I think.

&gt;&gt;<i> This seems wrong to me. If a key is held down, I would expect a single
</I>&gt;&gt;<i> keydown followed by multiple keypresses.
</I>&gt;<i>
</I>&gt;<i> O.K. FF doesn't do that though. If you hold down a key, it'll do:
</I>&gt;<i> keydown
</I>&gt;<i> keypress
</I>&gt;<i>
</I>&gt;<i> over and over.
</I>&gt;<i>
</I>&gt;<i> At quick thought, are you O.K. with FF's current behavior being a bug?
</I>
I don't know.  It's worth looking up why the behavior is as it is (that 
is, what web sites depend on).  Multiple keypresses in this situation 
are a definite necessity.

&gt;&gt;&gt;<i> Note that 'keyup' may fire before 'keypress' if you release the key
</I>&gt;&gt;&gt;<i> before an alert() inside the 'keydown' handler shows and blocks.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This seems unfortunate, but ok.
</I>&gt;<i>
</I>&gt;<i> Is there a good way to solve that though? Or is that something that
</I>&gt;<i> should just be left as YMMV?
</I>
Well, you could require an alert to block all key event delivery to the 
web page, right?

-Boris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066153.html">[whatwg] focus change inside keypress event handler
</A></li>
	<LI>Next message: <A HREF="066169.html">[whatwg] focus change inside keypress event handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66156">[ date ]</a>
              <a href="thread.html#66156">[ thread ]</a>
              <a href="subject.html#66156">[ subject ]</a>
              <a href="author.html#66156">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
