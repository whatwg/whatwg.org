<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] localStorage feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20feedback&In-Reply-To=%3C11e306600910300136v770b485bhb7fbc143f4435a27%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023884.html">
   <LINK REL="Next"  HREF="023887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] localStorage feedback</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20feedback&In-Reply-To=%3C11e306600910300136v770b485bhb7fbc143f4435a27%40mail.gmail.com%3E"
       TITLE="[whatwg] localStorage feedback">robert at ocallahan.org
       </A><BR>
    <I>Fri Oct 30 01:36:32 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="023884.html">[whatwg] localStorage feedback
</A></li>
        <LI>Next message: <A HREF="023887.html">[whatwg] localStorage feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23885">[ date ]</a>
              <a href="thread.html#23885">[ thread ]</a>
              <a href="subject.html#23885">[ subject ]</a>
              <a href="author.html#23885">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Oct 30, 2009 at 7:27 PM, Darin Fisher &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at chromium.org</A>&gt; wrote:

&gt;<i> You are right that the conditions are specific, but I don't know that that
</I>&gt;<i> is the
</I>&gt;<i> exhaustive list.  Rather than defining unlock points, I would implement
</I>&gt;<i> implicit
</I>&gt;<i> unlocking by having any nested attempt to acquire a lock cause the existing
</I>&gt;<i> lock
</I>&gt;<i> to be dropped.  Nesting can happen in the cases you mention, but depending
</I>&gt;<i> on
</I>&gt;<i> the UA, it may happen for other reasons too.
</I>&gt;<i>
</I>
What reasons?

If these reasons are situations where it's fundamentally difficult,
impossible, or non-performant to follow the spec, we should change the spec.
Otherwise this would just be a bug in the UA.

For example, a JS library might evolve to use flash for something small
&gt;<i> (like
</I>&gt;<i> storage or sound) that it previously didn't use when I first developed my
</I>&gt;<i> code.
</I>&gt;<i> Voila, now my storage lock is released out from under me.
</I>&gt;<i>
</I>
This example still sounds overly contrived to me. Nevertheless, it seems
strange to say that because there might be a few unexpected race conditions,
you have decided to allow a much larger set of unexpected race conditions.

At this point, I'm not favoring implementing the storage mutex in Chrome.  I
&gt;<i> don't think we will have it in our initial implementation of LocalStorage.
</I>&gt;<i>  I think
</I>&gt;<i> web developers that care will have to find another way to manage locking,
</I>&gt;<i> like
</I>&gt;<i> using a Web Database transaction or coordinating with a Shared Worker.
</I>&gt;<i>
</I>
Have you considered just not implementing LocalStorage? If it's so difficult
for authors to use correctly and to implement according to the spec, this
seems like the best path to me.

Rob
-- 
&quot;He was pierced for our transgressions, he was crushed for our iniquities;
the punishment that brought us peace was upon him, and by his wounds we are
healed. We all, like sheep, have gone astray, each of us has turned to his
own way; and the LORD has laid on him the iniquity of us all.&quot; [Isaiah
53:5-6]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091030/499a370f/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091030/499a370f/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023884.html">[whatwg] localStorage feedback
</A></li>
	<LI>Next message: <A HREF="023887.html">[whatwg] localStorage feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23885">[ date ]</a>
              <a href="thread.html#23885">[ thread ]</a>
              <a href="subject.html#23885">[ subject ]</a>
              <a href="author.html#23885">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
