<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] localStorage feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20feedback&In-Reply-To=%3C5dd9e5c50910300203i786f367cn57a4d73691c69f3d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066158.html">
   <LINK REL="Next"  HREF="066161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] localStorage feedback</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20feedback&In-Reply-To=%3C5dd9e5c50910300203i786f367cn57a4d73691c69f3d%40mail.gmail.com%3E"
       TITLE="[whatwg] localStorage feedback">jorlow at chromium.org
       </A><BR>
    <I>Fri Oct 30 02:03:54 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066158.html">[whatwg] localStorage feedback
</A></li>
        <LI>Next message: <A HREF="066161.html">[whatwg] localStorage feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66160">[ date ]</a>
              <a href="thread.html#66160">[ thread ]</a>
              <a href="subject.html#66160">[ subject ]</a>
              <a href="author.html#66160">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Oct 30, 2009 at 1:36 AM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt;wrote:

&gt;<i> On Fri, Oct 30, 2009 at 7:27 PM, Darin Fisher &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at chromium.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> You are right that the conditions are specific, but I don't know that that
</I>&gt;&gt;<i> is the
</I>&gt;&gt;<i> exhaustive list.  Rather than defining unlock points, I would implement
</I>&gt;&gt;<i> implicit
</I>&gt;&gt;<i> unlocking by having any nested attempt to acquire a lock cause the
</I>&gt;&gt;<i> existing lock
</I>&gt;&gt;<i> to be dropped.  Nesting can happen in the cases you mention, but depending
</I>&gt;&gt;<i> on
</I>&gt;&gt;<i> the UA, it may happen for other reasons too.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What reasons?
</I>&gt;<i>
</I>&gt;<i> If these reasons are situations where it's fundamentally difficult,
</I>&gt;<i> impossible, or non-performant to follow the spec, we should change the spec.
</I>&gt;<i> Otherwise this would just be a bug in the UA.
</I>&gt;<i>
</I>&gt;<i> For example, a JS library might evolve to use flash for something small
</I>&gt;&gt;<i> (like
</I>&gt;&gt;<i> storage or sound) that it previously didn't use when I first developed my
</I>&gt;&gt;<i> code.
</I>&gt;&gt;<i> Voila, now my storage lock is released out from under me.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This example still sounds overly contrived to me. Nevertheless, it seems
</I>&gt;<i> strange to say that because there might be a few unexpected race conditions,
</I>&gt;<i> you have decided to allow a much larger set of unexpected race conditions.
</I>&gt;<i>
</I>
I don't have a strong opinion either way on this one, but in general I'd say
that making a race more subtle isn't usually much of a win.....especially
when it comes to debugging it.


&gt;<i> At this point, I'm not favoring implementing the storage mutex in Chrome.
</I>&gt;&gt;<i>  I
</I>&gt;&gt;<i> don't think we will have it in our initial implementation of LocalStorage.
</I>&gt;&gt;<i>  I think
</I>&gt;&gt;<i> web developers that care will have to find another way to manage locking,
</I>&gt;&gt;<i> like
</I>&gt;&gt;<i> using a Web Database transaction or coordinating with a Shared Worker.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Have you considered just not implementing LocalStorage? If it's so
</I>&gt;<i> difficult for authors to use correctly and to implement according to the
</I>&gt;<i> spec, this seems like the best path to me.
</I>&gt;<i>
</I>
We'd love to, but it's difficult given that most of the other vendors have
already implemented it.  I also believe that Microsoft's browser exhibits
the same races that Darin's talking about.  So I'm not really sure how you
could suggest that us not implementing it is better than implementing the
status quo.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091030/ca9dc813/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091030/ca9dc813/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066158.html">[whatwg] localStorage feedback
</A></li>
	<LI>Next message: <A HREF="066161.html">[whatwg] localStorage feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66160">[ date ]</a>
              <a href="thread.html#66160">[ thread ]</a>
              <a href="subject.html#66160">[ subject ]</a>
              <a href="author.html#66160">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
