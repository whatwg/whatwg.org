<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] window.setInterval if visible.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20window.setInterval%20if%20visible.&In-Reply-To=%3Cde4bd3190910161120t17b10305v80e5b288c075af5c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023631.html">
   <LINK REL="Next"  HREF="023704.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] window.setInterval if visible.</H1>
<!--htdig_noindex-->
    <B>Gregg Tavares</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20window.setInterval%20if%20visible.&In-Reply-To=%3Cde4bd3190910161120t17b10305v80e5b288c075af5c%40mail.gmail.com%3E"
       TITLE="[whatwg] window.setInterval if visible.">gman at google.com
       </A><BR>
    <I>Fri Oct 16 11:20:47 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="023631.html">[whatwg] window.setInterval if visible.
</A></li>
        <LI>Next message: <A HREF="023704.html">[whatwg] window.setInterval if visible.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23662">[ date ]</a>
              <a href="thread.html#23662">[ thread ]</a>
              <a href="subject.html#23662">[ subject ]</a>
              <a href="author.html#23662">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Oct 15, 2009 at 1:53 PM, Markus Ernst &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">derernst at gmx.ch</A>&gt; wrote:

&gt;<i> Gregg Tavares schrieb:
</I>&gt;<i>
</I>&gt;&gt;<i> I was wondering if there as been a proposal for either an optional
</I>&gt;&gt;<i> argument to setInterval that makes it only callback if the window is visible
</I>&gt;&gt;<i> OR maybe a window.setRenderInterval.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here's the issue that seems like it needs to be solved.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Currently, AFAIK, the only way to do animation in HTML5 + JavaScript is
</I>&gt;&gt;<i> using setInterval. That's great but it has the problem that even when the
</I>&gt;&gt;<i> window is minimized or the page is not the front tab, JavaScript has no way
</I>&gt;&gt;<i> to know to stop animating.  So, for a CPU heavy animation using canvas 2d or
</I>&gt;&gt;<i> canvas 3d, even a hidden tab uses lots of CPU. Of course the browser does
</I>&gt;&gt;<i> not copy the bits from the canvas to the window but JavaScript is still
</I>&gt;&gt;<i> drawing hundreds of thousands of pixels to the canvas's internal image
</I>&gt;&gt;<i> buffer through canvas commands.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> [...]
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There are probably other possible solutions to this problem but it seems
</I>&gt;&gt;<i> like the easiest would be either
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *) adding an option to window.setInterval or only callback if the window
</I>&gt;&gt;<i> is visible
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *) adding window.setIntervalIfVisible (same as the previous option really)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A possibly better solution would be
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *) element.setIntervalIfVisible
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Which would only call the callback if that particular element is visible.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From a performance point of view it might even be worth thinking about the
</I>&gt;<i> contrary: Allow UAs to stop the execution of scripts on non-visible windows
</I>&gt;<i> or elements by default, and provide a method to explicitly specify if the
</I>&gt;<i> execution of a script must not be stopped.
</I>&gt;<i>
</I>&gt;<i> If you provide methods to check the visibility of a window or element, you
</I>&gt;<i> leave it up to the author to use them or not. I think performance issues
</I>&gt;<i> should rather be up to the UA.
</I>&gt;<i>
</I>
I agree that would be ideal. Unfortunately, current webpages already expect
setInternval to function even when they are not visible. web based chat and
mail clients come to mind as examples. So, unfortunately, it doesn't seem
like a problem a UA can solve on it's own.

On the otherhand, if the solution is as simple as add a flag to setInterval
then it's at least a very simple change for those apps that want to not hog
the CPU when not visible.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091016/8703a516/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091016/8703a516/attachment-0001.htm</A>&gt;
</PRE>














































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023631.html">[whatwg] window.setInterval if visible.
</A></li>
	<LI>Next message: <A HREF="023704.html">[whatwg] window.setInterval if visible.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23662">[ date ]</a>
              <a href="thread.html#23662">[ thread ]</a>
              <a href="subject.html#23662">[ subject ]</a>
              <a href="author.html#23662">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
