<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Restarting the media element resource fetch algorithm	after &quot;load&quot; event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Restarting%20the%20media%20element%20resource%20fetch%20algorithm%0A%09after%20%22load%22%20event&In-Reply-To=%3C11e306600910140120w4683dc95qd8e59976dc5b24fc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065845.html">
   <LINK REL="Next"  HREF="065859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Restarting the media element resource fetch algorithm	after &quot;load&quot; event</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Restarting%20the%20media%20element%20resource%20fetch%20algorithm%0A%09after%20%22load%22%20event&In-Reply-To=%3C11e306600910140120w4683dc95qd8e59976dc5b24fc%40mail.gmail.com%3E"
       TITLE="[whatwg] Restarting the media element resource fetch algorithm	after &quot;load&quot; event">robert at ocallahan.org
       </A><BR>
    <I>Wed Oct 14 01:20:59 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="065845.html">[whatwg] Restarting the media element resource fetch algorithm	after &quot;load&quot; event
</A></li>
        <LI>Next message: <A HREF="065859.html">[whatwg] Restarting the media element resource fetch algorithm after &quot;load&quot; event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65857">[ date ]</a>
              <a href="thread.html#65857">[ thread ]</a>
              <a href="subject.html#65857">[ subject ]</a>
              <a href="author.html#65857">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Oct 14, 2009 at 1:04 PM, Andrew Scherkus &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">scherkus at google.com</A>&gt;wrote:

&gt;<i> We use a combination of in-memory and block-based caching for media
</I>&gt;<i> resources.  There is no guarantee whatsoever on what is loaded.  There's a
</I>&gt;<i> nice side benefit of allowing complete random access to the file if the
</I>&gt;<i> server supports range request (in my opinion a must if you're working on an
</I>&gt;<i> audio/video site, but that's a side issue).
</I>

Indeed, we support that too.

For <A HREF="http://">http://</A> we don't support load at all and never reach NETWORK_LOADED.
&gt;<i>  We're also baffled at what to report in our progress events because the
</I>&gt;<i> numbers are seemingly useless in our context.  Sometimes we'll cache the end
</I>&gt;<i> of the file to grab some useful metadata, but we don't want to fire a
</I>&gt;<i> progress event saying we've loaded the last bit of the file...
</I>&gt;<i>
</I>
We have the same issue, unsurprisingly. Currently our progress events are
not very useful because we report the download position (although we do
suppress progress events while we read metadata from the end of the file).
According to the spec, however, progress events should report the *amount*
of data downloaded, not the position within the resource. That's a bit more
useful, although it's still unclear what to do when data is discarded from
the cache and then re-downloaded.

Being the only browser (I think?) that doesn't fire the load event we've ran
&gt;<i> into site compatibility issues.  I believe a lot of web authors are used to
</I>&gt;<i> tacking onload= into a tag and expecting it to work.  I've reached out to
</I>&gt;<i> web authors to educate them about using canplaytype() +
</I>&gt;<i> oncanplay/oncanplaythrough as alternatives to user agent checking and
</I>&gt;<i> onload.
</I>&gt;<i>
</I>
Good, thanks.

We plan to stop firing the &quot;load&quot; event in the next (and all future)
versions of Gecko, so we'll be doing that outreach too.

Rob
-- 
&quot;He was pierced for our transgressions, he was crushed for our iniquities;
the punishment that brought us peace was upon him, and by his wounds we are
healed. We all, like sheep, have gone astray, each of us has turned to his
own way; and the LORD has laid on him the iniquity of us all.&quot; [Isaiah
53:5-6]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091014/a6327afa/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091014/a6327afa/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065845.html">[whatwg] Restarting the media element resource fetch algorithm	after &quot;load&quot; event
</A></li>
	<LI>Next message: <A HREF="065859.html">[whatwg] Restarting the media element resource fetch algorithm after &quot;load&quot; event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65857">[ date ]</a>
              <a href="thread.html#65857">[ thread ]</a>
              <a href="subject.html#65857">[ subject ]</a>
              <a href="author.html#65857">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
