<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Navigation events generated during unload
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Navigation%20events%20generated%20during%20unload&In-Reply-To=%3C4AD38284.40700%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065748.html">
   <LINK REL="Next"  HREF="065819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Navigation events generated during unload</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Navigation%20events%20generated%20during%20unload&In-Reply-To=%3C4AD38284.40700%40mit.edu%3E"
       TITLE="[whatwg] Navigation events generated during unload">bzbarsky at MIT.EDU
       </A><BR>
    <I>Mon Oct 12 12:24:52 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="065748.html">[whatwg] Navigation events generated during unload
</A></li>
        <LI>Next message: <A HREF="065819.html">[whatwg] Navigation events generated during unload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65798">[ date ]</a>
              <a href="thread.html#65798">[ thread ]</a>
              <a href="subject.html#65798">[ subject ]</a>
              <a href="author.html#65798">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 10/12/09 1:55 AM, Ian Hickson wrote:
&gt;<i> Why is the form.submit() ignored? It's not ignored in, e.g.:
</I>&gt;<i>
</I>&gt;<i>     <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/unload/same-origin/004.html">http://www.hixie.ch/tests/adhoc/html/navigation/unload/same-origin/004.html</A>
</I>
But in this case the form action is same-origin with the load that's 
happening....

&gt;<i> Oops, that's a vestigial bit. The comment is non-normative (and wrong);
</I>&gt;<i> the actual normative text makes javascript: async, only about:blank is
</I>&gt;<i> sync. Fixed.
</I>
Ah, ok. Thanks.

&gt;&gt;<i> Also, I'm not quite sure what the part about unloading that comes after
</I>&gt;&gt;<i> the algorithm you pointed me to means.  Does it mean that once you get
</I>&gt;&gt;<i> the response and start parsing the new document you queue a task to
</I>&gt;&gt;<i> unload the old one?  That doesn't seem at all right to me, since at this
</I>&gt;&gt;<i> point the new document can be running scripts that touch the WindowProxy
</I>&gt;&gt;<i> they share...
</I>&gt;<i>
</I>&gt;<i> Not sure what you mean here. I've tried to clarify that the new page must
</I>&gt;<i> be active before any scripts run.
</I>
Looking at the algorithm steps when I made my last comment, it sounded 
like the new data starts coming in, the UA starts processing it, and 
queues a task to unload the old document.  Gecko at the moment, for 
example, unloads the old document immediately after firing unload on it, 
and before parsing any of the new document.  Is that the behavior the 
spec calls for?

-Boris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065748.html">[whatwg] Navigation events generated during unload
</A></li>
	<LI>Next message: <A HREF="065819.html">[whatwg] Navigation events generated during unload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65798">[ date ]</a>
              <a href="thread.html#65798">[ thread ]</a>
              <a href="subject.html#65798">[ subject ]</a>
              <a href="author.html#65798">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
