<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Navigation events generated during unload
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Navigation%20events%20generated%20during%20unload&In-Reply-To=%3C4ACA9DD4.20509%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023687.html">
   <LINK REL="Next"  HREF="023316.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Navigation events generated during unload</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Navigation%20events%20generated%20during%20unload&In-Reply-To=%3C4ACA9DD4.20509%40mit.edu%3E"
       TITLE="[whatwg] Navigation events generated during unload">bzbarsky at MIT.EDU
       </A><BR>
    <I>Mon Oct  5 18:31:00 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="023687.html">[whatwg] Navigation events generated during unload
</A></li>
        <LI>Next message: <A HREF="023316.html">[whatwg] Potentially avoidable tokeniser/treebuilder dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23319">[ date ]</a>
              <a href="thread.html#23319">[ thread ]</a>
              <a href="subject.html#23319">[ subject ]</a>
              <a href="author.html#23319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 10/5/09 9:01 PM, Ian Hickson wrote:
&gt;<i> Any suggestions? What do browsers actually do, white-box wise?
</I>
Gecko forbids most navigation between firing unload and the newly 
loading page becoming the current page.  &quot;most&quot; means all history 
navigation (including reload()) and attempts to navigate via the APIs 
exposed to the browser UI.  It allows navigation via setting 
location.href or calling location.replace _if_ the new URI is 
same-origin with the URI being loaded (the one whose loading triggered 
the unload event).  That is, you can't keep people on your site if 
they're trying to go somewhere else.

See <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=409888">https://bugzilla.mozilla.org/show_bug.cgi?id=409888</A> for the reason 
we added the same-origin exception and 
<A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=371360">https://bugzilla.mozilla.org/show_bug.cgi?id=371360</A> for the reason 
there's a restriction to start with.

There is no special handling of beforeunload in this regard in Gecko.

-Boris
</PRE>





















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023687.html">[whatwg] Navigation events generated during unload
</A></li>
	<LI>Next message: <A HREF="023316.html">[whatwg] Potentially avoidable tokeniser/treebuilder dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23319">[ date ]</a>
              <a href="thread.html#23319">[ thread ]</a>
              <a href="subject.html#23319">[ subject ]</a>
              <a href="author.html#23319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
