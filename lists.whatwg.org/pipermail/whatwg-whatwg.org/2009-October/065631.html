<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Charset sniffing from XML prolog
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Charset%20sniffing%20from%20XML%20prolog&In-Reply-To=%3C20091008000416.GA10802%40pickering.dbaron.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="065630.html">
   <LINK REL="Next"  HREF="065632.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Charset sniffing from XML prolog</H1>
<!--htdig_noindex-->
    <B>L. David Baron</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Charset%20sniffing%20from%20XML%20prolog&In-Reply-To=%3C20091008000416.GA10802%40pickering.dbaron.org%3E"
       TITLE="[whatwg] Charset sniffing from XML prolog">dbaron at dbaron.org
       </A><BR>
    <I>Wed Oct  7 17:04:16 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="065630.html">[whatwg] Charset sniffing from XML prolog
</A></li>
        <LI>Next message: <A HREF="065632.html">[whatwg] Charset sniffing from XML prolog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65631">[ date ]</a>
              <a href="thread.html#65631">[ thread ]</a>
              <a href="subject.html#65631">[ subject ]</a>
              <a href="author.html#65631">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wednesday 2009-10-07 23:51 +0000, Kartikaya Gupta wrote:
&gt;<i> On Wed, 07 Oct 2009 19:34:18 -0400, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at MIT.EDU</A>&gt; wrote:
</I>&gt;<i> &gt; On 10/7/09 7:12 PM, Kartikaya Gupta wrote:
</I>&gt;<i> &gt; &gt; If a document is served as text/html, but contains an XML prolog with an encoding attribute, it seems that all Firefox, Opera, and Chrome all pick up the encoding from the prolog and use it when parsing the rest of the document. (IE6 does not). The HTML5 spec doesn't seem to include XML-prolog checking in its encoding sniffing algorithm, should it?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
</I>&gt;<i> &gt; &gt; &lt;html&gt;insert utf-8 content here, or alert(document.inputEncoding) for browsers that support it&lt;/html&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; data:text/html,&lt;?xml version=&quot;1.0&quot; 
</I>&gt;<i> &gt; encoding=&quot;utf-8&quot;?&gt;&lt;html&gt;&lt;script&gt;alert(document.inputEncoding)&lt;/script&gt;&lt;/html&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Shows ISO-8859-1 for me in Firefox over here.
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Strange. I got &quot;UTF-8&quot; when I pasted that into the address bar. For reference, the version of FF I'm using is:
</I>
Maybe you've configured UTF-8 as the fallback encoding?  It's a
preference (and its default value varies between localizations).

Tools -&gt; Options -&gt; Content -&gt; Fonts &amp; Colors -&gt; Character Encoding
-&gt; Default Character Encoding.  (For other platforms, change Tools
-&gt; Options to Edit -&gt; Preferences (GNOME-based platforms) or Firefox
-&gt; Preferences (Mac).)

-David

-- 
L. David Baron                                 <A HREF="http://dbaron.org/">http://dbaron.org/</A>
Mozilla Corporation                       <A HREF="http://www.mozilla.com/">http://www.mozilla.com/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="065630.html">[whatwg] Charset sniffing from XML prolog
</A></li>
	<LI>Next message: <A HREF="065632.html">[whatwg] Charset sniffing from XML prolog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65631">[ date ]</a>
              <a href="thread.html#65631">[ thread ]</a>
              <a href="subject.html#65631">[ subject ]</a>
              <a href="author.html#65631">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
