<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Supporting more address levels in autocomplete
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3CCAO4XGS9xeGCcKd2Nf_RmEq1PneC%2BtBz4Cht6E5y57nphigzEdA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084401.html">
   <LINK REL="Next"  HREF="084404.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Supporting more address levels in autocomplete</H1>
<!--htdig_noindex-->
    <B>Evan Stade</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3CCAO4XGS9xeGCcKd2Nf_RmEq1PneC%2BtBz4Cht6E5y57nphigzEdA%40mail.gmail.com%3E"
       TITLE="[whatwg] Supporting more address levels in autocomplete">estade at chromium.org
       </A><BR>
    <I>Tue Mar  4 16:07:54 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="084401.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
        <LI>Next message: <A HREF="084404.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84403">[ date ]</a>
              <a href="thread.html#84403">[ thread ]</a>
              <a href="subject.html#84403">[ subject ]</a>
              <a href="author.html#84403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Mar 4, 2014 at 3:41 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i> On Tue, 4 Mar 2014, Evan Stade wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I am not convinced it'd be that big a load (users generally know what
</I>&gt;<i> &gt; &gt; parts of their addresses are required!). But in any case, if we're
</I>&gt;<i> &gt; &gt; talking about mom-and-pop stores with a minimal load of international
</I>&gt;<i> &gt; &gt; orders in the first place, it's likely that the customer service load
</I>&gt;<i> &gt; &gt; would be pretty minimal.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Then why do so many sites bother to validate data as users input it?
</I>&gt;<i>
</I>&gt;<i> I don't know. Cargo-cult? Given how poor a job many sites do of this, it's
</I>&gt;<i> not clear to me that it's for helping with customer service. In fact,
</I>&gt;<i> several times the validating has caused me to have to talk to customer
</I>&gt;<i> service to get around their bogus validation.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Country name is always at the end. When I put &quot;street address&quot; above, I
</I>&gt;<i> &gt; meant it in the sense of &quot;all the lines of street address&quot;. Different
</I>&gt;<i> &gt; countries have a different number of lines, but by definition they're
</I>&gt;<i> &gt; always all next to each other --- the definition of address-line-N is
</I>&gt;<i> &gt; &quot;the Nth line of the street address when it's formatted for display&quot;.
</I>&gt;<i>
</I>&gt;<i> Why do we want street addresses in visual order but region components in
</I>&gt;<i> logical order? Is it because in some address schemes the logical
</I>&gt;<i> components end up on the same line with punctuation?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; If the layout difference is that great, we should seriously consider
</I>&gt;<i> &gt; &gt; documenting that also.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think it's outside the scope of the autocomplete spec, but there are
</I>&gt;<i> &gt; libraries which to do this, such as libaddressinput, which provides a
</I>&gt;<i> &gt; service to get formatting data for various coutnries. For example, the
</I>&gt;<i> &gt; &quot;fmt&quot; portion of [1] tells you how to format US addresses. Chrome
</I>&gt;<i> &gt; integrates libaddressinput into requestAutocomplete so web authors get
</I>&gt;<i> &gt; this for free, but they could also use the service on their own if they
</I>&gt;<i> &gt; didn't want to rely on requestAutocomplete.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [1] <A HREF="https://i18napis.appspot.com/ssl-address/data/US">https://i18napis.appspot.com/ssl-address/data/US</A>
</I>&gt;<i>
</I>&gt;<i> Fair enough.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-level4&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-level3&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-level2&quot; / &quot;locality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-level1&quot; / &quot;region&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This could work. It has the synonym issue (having multiple fields that
</I>&gt;<i> &gt; &gt; mean the same thing is often the source of confusion).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Or we could do:
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;subsublocality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;sublocality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;locality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;region&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This could work. It avoids the synonym problem.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Yes, this alternative works, but in my opinion is not preferable.
</I>&gt;<i>
</I>&gt;<i> Can you elaborate on why this would be worse than the version with
</I>&gt;<i> synonyms?
</I>&gt;<i>
</I>
Because these words don't really mean anything. From our initial proposal:

&quot;&quot;&quot;
Compared to the alternative of adding another one-off such as
&#8220;dependent-locality&#8221; or &#8220;sub-locality&#8221;, we feel this is a more
descriptive and general way to tackle additional administrative levels
without making false implications about the semantics of the value
that is returned.
&quot;&quot;&quot;


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;locality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;subsubregion&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;subregion&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;region&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This _could_ work, but it seems a bit weirder than &quot;subsublocality&quot;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This would re-define locality, leading to cross-version
</I>&gt;<i> &gt; incompatibilities.
</I>&gt;<i>
</I>&gt;<i> How so? Are people already depending on Chinese addresses' levels 1, 2,
</I>&gt;<i> and 3 being mapped to region, locality, and nothing respectively?
</I>&gt;<i>
</I>&gt;<i> The model with subsubregion does more closely match the specs' current
</I>&gt;<i> descriptions of 'locality'.
</I>&gt;<i>
</I>
I would argue that nothing in China reliably matches the spec's current
definition of &quot;locality&quot;. That is, in one address, the description for
&quot;locality&quot; matches address-level1, in others, address-level2, etc.

In the US case, I think you're proposing that state would be &quot;region&quot; and
city would be &quot;locality&quot;. Then I think it's quite likely that a developer
assumes the intermediate levels like &quot;subregion&quot; would map to county, which
they don't because county is an administrative region irrelevant to
addresses. So I would like to keep region and locality right next to each
other in all cases. But again, since these names don't really make sense
everywhere, just using indexing is the least confusing IMO.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Yes, but country-name is special: (a) it always comes at the end, (b) it
</I>&gt;<i> &gt; always exists, (c) calling it &quot;country-name&quot; always makes sense, and (d)
</I>&gt;<i> &gt; it controls the format of everything else. So I think it's desirable to
</I>&gt;<i> &gt; make it separate from the sub-country region tokens.
</I>&gt;<i>
</I>&gt;<i> Fair enough.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; You still need to know how to render them when printing the label,
</I>&gt;<i> &gt; &gt; even with requestAutocomplete(). It really does seem like we should
</I>&gt;<i> &gt; &gt; either document this order, or point to documentation on the topic.
</I>&gt;<i> &gt; &gt; Are there Web pages out there that provide sufficient information to
</I>&gt;<i> &gt; &gt; do this?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; No, you don't need to know. You use the (not yet spec'd)
</I>&gt;<i> &gt; &quot;display-address&quot;/&quot;address-blob&quot;/&quot;complete-address&quot; token that was
</I>&gt;<i> &gt; mentioned up-thread.
</I>&gt;<i>
</I>&gt;<i> Why are we ok with getting a multiline text field from the user in this
</I>&gt;<i> case but not without requestAutocomplete()?
</I>&gt;<i>
</I>
requestAutocomplete would indeed respect this token just as it respects
other autocomplete tokens. You could use the multiline text field with
requestAutocomplete if that's how you desired to receive the address data
(and you could use it in addition to the tokenized format). This would not
affect the UI of requestAutocomplete though (at least not in Chrome's case).


&gt;<i>
</I>&gt;<i> (I've filed <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24935">https://www.w3.org/Bugs/Public/show_bug.cgi?id=24935</A> to track
</I>&gt;<i> the multiline address field.)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; I'm not married to the address-levelN name. [something-that-makes-
</I>&gt;<i> &gt; &gt; &gt; sense]N is fine.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The reason I'm being a bit reluctant to embrace address-level* is that
</I>&gt;<i> &gt; &gt; it's so close to address-line*.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; OK. To tell the truth I think address-line1 should probably be
</I>&gt;<i> &gt; street-address-line1. Would that help clear up the confusion?
</I>&gt;<i>
</I>&gt;<i> Isn't it too late to change the names of the already established ones?
</I>&gt;<i>
</I>
address-line1 could be left around for a while (or eternity) for
backwards-compat, while being removed from the spec, no? We're not
replacing it with something new. But I'm fuzzy on the best practices here.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; The reason we went with proposing address-levelN is because
</I>&gt;<i> &gt; &gt; &gt; region-levelN implies that all political regions are captured, when
</I>&gt;<i> &gt; &gt; &gt; they aren't. There's no field for US county because county is never
</I>&gt;<i> &gt; &gt; &gt; part of an address. So it's only for regions that actually make it
</I>&gt;<i> &gt; &gt; &gt; onto an envelope.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I don't think the implication is that strong. In fact I'd argue it's
</I>&gt;<i> &gt; &gt; the other way around -- the implication is that this is for addresses,
</I>&gt;<i> &gt; &gt; not generic regions.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You think region-levelN more strongly implies &quot;only regions relevant to
</I>&gt;<i> &gt; addresses&quot; than address-levelN does?
</I>&gt;<i>
</I>&gt;<i> Just the way that this is all about addresses is what I think implies that
</I>&gt;<i> the fields are about addresses.
</I>&gt;<i>
</I>
Well, there are other location APIs (like the Google Geocoding API) which
are not about addresses, so they include things that don't go on envelopes.
This almost-analogous API could cause confusion.

Also, not all of autocomplete is related to addresses, e.g. date of birth,
gender, etc. AFAIU, autocomplete is just about data that the user has to
fill in frequently. So I imagine it's not always perfectly clear to a new
developer that this is specifically addresses, as opposed to generic
geolocation. Maybe they mistakenly try to use it to get the user's
geolocation in political terms, rather than coordinates?


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Anyway, address-region-levelN, or something, is fine with me.
</I>&gt;<i>
</I>&gt;<i> I think the arguments you've presented so far suggest &quot;address-levelN&quot; for
</I>&gt;<i> N=1..4, with 4=region and 3=locality, is probably the simplest thing to
</I>&gt;<i> do. I was hoping there might be other people with opinions, to give us
</I>&gt;<i> different perspectives on this, but it seems nobody else cares. :-(
</I>&gt;<i>
</I>
Again, that's backwards from what we're proposing. Why is that better than
1=region, 2=locality, except to a US-centric viewpoint? This would lead to
a weird situation where (a) you couldn't expand past 4 levels without
changing the meaning of previous levels and (b) a country such as the US
would have address-level4 and address-level3 but no address-level2 or
address-level1.


&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084401.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
	<LI>Next message: <A HREF="084404.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84403">[ date ]</a>
              <a href="thread.html#84403">[ thread ]</a>
              <a href="subject.html#84403">[ subject ]</a>
              <a href="author.html#84403">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
