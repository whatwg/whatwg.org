<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Singular CTM and currentTransform
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Singular%20CTM%20and%20currentTransform&In-Reply-To=%3CCAGN7qDD1evzPWkoFTXTtDorpRWUhYP1pR%3DKjaih7kOeUM1tewA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084592.html">
   <LINK REL="Next"  HREF="084594.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Singular CTM and currentTransform</H1>
<!--htdig_noindex-->
    <B>Rik Cabanier</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Singular%20CTM%20and%20currentTransform&In-Reply-To=%3CCAGN7qDD1evzPWkoFTXTtDorpRWUhYP1pR%3DKjaih7kOeUM1tewA%40mail.gmail.com%3E"
       TITLE="[whatwg] Singular CTM and currentTransform">cabanier at gmail.com
       </A><BR>
    <I>Tue Mar 25 12:15:41 PDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="084592.html">[whatwg] Singular CTM and currentTransform
</A></li>
        <LI>Next message: <A HREF="084594.html">[whatwg] Singular CTM and currentTransform
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84593">[ date ]</a>
              <a href="thread.html#84593">[ thread ]</a>
              <a href="subject.html#84593">[ subject ]</a>
              <a href="author.html#84593">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Mar 25, 2014 at 8:49 AM, Justin Novosad &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">junov at google.com</A>&gt; wrote:

&gt;<i> On Tue, Mar 25, 2014 at 8:25 AM, Dirk Schulze &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">dschulze at adobe.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Independent if getter getTransform/getCTM or attribute currentTransform,
</I>&gt;<i> &gt; what should be returned for a CTM that is singular (not invertible)?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In WebKit we do not track all transformations of the CTM that caused a
</I>&gt;<i> &gt; singular matrix or are following a transformation that would have caused
</I>&gt;<i> a
</I>&gt;<i> &gt; singular matrix.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Example:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ctx.scale(0,0);
</I>&gt;<i> &gt; ct.translate(10,10);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In webkit we would not apply the transformation scale(0,0) and mark the
</I>&gt;<i> &gt; CTM as not-invertible instead. So we could not return an SVGMatrix object
</I>&gt;<i> &gt; with a = b = c = d = 0; e = f = 10 because we actually don't know the CTM
</I>&gt;<i> &gt; after applying all transforms.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would suggest that the getter either:
</I>&gt;<i> &gt; 1) throws and invalid state error if the CTM is not invertible
</I>&gt;<i> &gt; 2) returns 0. In WebIDLit would look like: SVGMatrix? getTransform();
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Greetings,
</I>&gt;<i> &gt; Dirk
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> The notion that an invertible matrix is an unusable state is somewhat of a
</I>&gt;<i> webkit-ism.  I think there is a prerequisite question that needs to be
</I>&gt;<i> resolved before we can ponder what you propose: should we proceed with draw
</I>&gt;<i> operations when the canvas is non-invertible?  Right now some browsers do
</I>&gt;<i> and some don't. The current state of the spec suggests that webkit/blink
</I>&gt;<i> are *not* doing the right thing.  In another thread we discussed skipping
</I>&gt;<i> path primitives (and presumably all draw calls) when the matrix is
</I>&gt;<i> non-invertible. We should probably finalize that issue first.
</I>

I agree. That issue has the same root problem as currentTransform.
It would be nice to get closure.

Justin, you hinted that you would be willing to follow the spec which would
make you match Firefox and IE.
Are still planning on doing that?

Note that Firefox is still non-compliant if there's a non-invertible matrix
during filling/stroking/clipping


&gt;<i> &gt; PS: This is one reason I prefer a getter over an attribute because the
</I>&gt;<i> &gt; getter does not return a mutable (live) SVGMatrix. But even than the
</I>&gt;<i> &gt; problem above is not fully solved of course.
</I>&gt;<i>
</I></PRE>








<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084592.html">[whatwg] Singular CTM and currentTransform
</A></li>
	<LI>Next message: <A HREF="084594.html">[whatwg] Singular CTM and currentTransform
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84593">[ date ]</a>
              <a href="thread.html#84593">[ thread ]</a>
              <a href="subject.html#84593">[ subject ]</a>
              <a href="author.html#84593">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
