<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Supporting more address levels in autocomplete
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3CCAO4XGS8Lb2CuzGjO0y6OJJZvqF1-iAw_Ddr0oNA9XCRMiGTbEw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084404.html">
   <LINK REL="Next"  HREF="084406.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Supporting more address levels in autocomplete</H1>
<!--htdig_noindex-->
    <B>Evan Stade</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3CCAO4XGS8Lb2CuzGjO0y6OJJZvqF1-iAw_Ddr0oNA9XCRMiGTbEw%40mail.gmail.com%3E"
       TITLE="[whatwg] Supporting more address levels in autocomplete">estade at chromium.org
       </A><BR>
    <I>Tue Mar  4 18:47:54 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="084404.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
        <LI>Next message: <A HREF="084406.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84409">[ date ]</a>
              <a href="thread.html#84409">[ thread ]</a>
              <a href="subject.html#84409">[ subject ]</a>
              <a href="author.html#84409">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Mar 4, 2014 at 4:39 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i> On Tue, 4 Mar 2014, Evan Stade wrote:
</I>&gt;<i> &gt; On Tue, Mar 4, 2014 at 3:41 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-level4&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-level3&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-level2&quot; / &quot;locality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-level1&quot; / &quot;region&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; This could work. It has the synonym issue (having multiple fields
</I>&gt;<i> &gt; &gt; &gt; &gt; that mean the same thing is often the source of confusion).
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Or we could do:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;subsublocality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;sublocality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;locality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;region&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; This could work. It avoids the synonym problem.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Yes, this alternative works, but in my opinion is not preferable.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Can you elaborate on why this would be worse than the version with
</I>&gt;<i> &gt; &gt; synonyms?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Because these words don't really mean anything. From our initial
</I>&gt;<i> &gt; proposal:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &quot;&quot;&quot;
</I>&gt;<i> &gt; Compared to the alternative of adding another one-off such as
</I>&gt;<i> &gt; &#8220;dependent-locality&#8221; or &#8220;sub-locality&#8221;, we feel this is a more
</I>&gt;<i> &gt; descriptive and general way to tackle additional administrative levels
</I>&gt;<i> &gt; without making false implications about the semantics of the value
</I>&gt;<i> &gt; that is returned.
</I>&gt;<i> &gt; &quot;&quot;&quot;
</I>&gt;<i>
</I>&gt;<i> I don't understand how &quot;sublocality&quot; makes any more implications, or has
</I>&gt;<i> any less descriptive value, than &quot;address-level3&quot;. Can you elaborate on
</I>&gt;<i> this? They all seem quite neutral (basically empty of meaning) to me.
</I>&gt;<i>
</I>
&quot;dependent-locality&quot; and &quot;locality&quot; have a fairly precise meaning in the
UK. Also in a natural-language conversation, if you ask me what &quot;region&quot; of
the country I live in, I'd say &quot;New England&quot;, &quot;the Midwest&quot;, or some such;
certainly not the state where I reside. The descriptions for these tokens
are currently pretty specific, for example they say a city would be a
locality. But this is not true for Beijing or some other cities. To fix the
descriptions, we'd have to change them to something like &quot;region: the
highest level administrative region below country in the address&quot; and
&quot;locality: the second-highest level administrative region below country in
the address&quot;, &quot;sub-locality: the third-highest level administrative region
[...]&quot;. At this point, one wonders why the tokens aren't just [something]1,
[something]2, etc.



&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;locality&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;subsubregion&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;subregion&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;region&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; This _could_ work, but it seems a bit weirder than
</I>&gt;<i> &gt; &gt; &gt; &gt; &quot;subsublocality&quot;.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; This would re-define locality, leading to cross-version
</I>&gt;<i> &gt; &gt; &gt; incompatibilities.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; How so? Are people already depending on Chinese addresses' levels 1,
</I>&gt;<i> &gt; &gt; 2, and 3 being mapped to region, locality, and nothing respectively?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The model with subsubregion does more closely match the specs' current
</I>&gt;<i> &gt; &gt; descriptions of 'locality'.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would argue that nothing in China reliably matches the spec's current
</I>&gt;<i> &gt; definition of &quot;locality&quot;. That is, in one address, the description for
</I>&gt;<i> &gt; &quot;locality&quot; matches address-level1, in others, address-level2, etc.
</I>&gt;<i>
</I>&gt;<i> Right.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; In the US case, I think you're proposing that state would be &quot;region&quot;
</I>&gt;<i> &gt; and city would be &quot;locality&quot;. Then I think it's quite likely that a
</I>&gt;<i> &gt; developer assumes the intermediate levels like &quot;subregion&quot; would map to
</I>&gt;<i> &gt; county, which they don't because county is an administrative region
</I>&gt;<i> &gt; irrelevant to addresses. So I would like to keep region and locality
</I>&gt;<i> &gt; right next to each other in all cases. But again, since these names
</I>&gt;<i> &gt; don't really make sense everywhere, just using indexing is the least
</I>&gt;<i> &gt; confusing IMO.
</I>&gt;<i>
</I>&gt;<i> I don't understand why you think authors will think they need to include
</I>&gt;<i> &quot;subregion&quot;, but won't think they need to include &quot;address-level3&quot;.
</I>&gt;<i>
</I>
I think they'll assume subregion returns something for the US if it's
sandwiched between &quot;region&quot; and &quot;locality&quot;, because county is in between
state and city. But in reality, subregion will return nothing.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; &gt; You still need to know how to render them when printing the label,
</I>&gt;<i> &gt; &gt; &gt; &gt; even with requestAutocomplete(). It really does seem like we
</I>&gt;<i> &gt; &gt; &gt; &gt; should either document this order, or point to documentation on
</I>&gt;<i> &gt; &gt; &gt; &gt; the topic. Are there Web pages out there that provide sufficient
</I>&gt;<i> &gt; &gt; &gt; &gt; information to do this?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; No, you don't need to know. You use the (not yet spec'd)
</I>&gt;<i> &gt; &gt; &gt; &quot;display-address&quot;/&quot;address-blob&quot;/&quot;complete-address&quot; token that was
</I>&gt;<i> &gt; &gt; &gt; mentioned up-thread.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Why are we ok with getting a multiline text field from the user in
</I>&gt;<i> &gt; &gt; this case but not without requestAutocomplete()?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; requestAutocomplete would indeed respect this token just as it respects
</I>&gt;<i> &gt; other autocomplete tokens. You could use the multiline text field with
</I>&gt;<i> &gt; requestAutocomplete if that's how you desired to receive the address
</I>&gt;<i> &gt; data (and you could use it in addition to the tokenized format). This
</I>&gt;<i> &gt; would not affect the UI of requestAutocomplete though (at least not in
</I>&gt;<i> &gt; Chrome's case).
</I>&gt;<i>
</I>&gt;<i> That doesn't really answer the question. Why would we bother with all
</I>&gt;<i> these fields if we could just use a &lt;textarea&gt; for the whole address? How
</I>&gt;<i> does requestAutocomplete() change things?
</I>&gt;<i>
</I>
Some authors will want it tokenized, some will want it all together. I
anticipate that many sites will want both, because the &quot;display-address&quot;
version would be useful for re-display on the confirmation page, as well as
printing onto a package or envelope, etc., whereas the tokenized version
would probably be necessary for piping data into a backend such as a
payments or shipping provider.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; I'm not married to the address-levelN name.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; [something-that-makes- sense]N is fine.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; The reason I'm being a bit reluctant to embrace address-level* is
</I>&gt;<i> &gt; &gt; &gt; &gt; that it's so close to address-line*.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; OK. To tell the truth I think address-line1 should probably be
</I>&gt;<i> &gt; &gt; &gt; street-address-line1. Would that help clear up the confusion?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Isn't it too late to change the names of the already established ones?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; address-line1 could be left around for a while (or eternity) for
</I>&gt;<i> &gt; backwards-compat, while being removed from the spec, no? We're not
</I>&gt;<i> &gt; replacing it with something new. But I'm fuzzy on the best practices
</I>&gt;<i> &gt; here.
</I>&gt;<i>
</I>&gt;<i> Having synonyms is really bad. It leads to huge amounts of confusion. This
</I>&gt;<i> is why I'm trying to avoid having synonyms for the address-level* stuff.
</I>&gt;<i> We should definitely not add some just to introduce a slightly better name.
</I>&gt;<i>
</I>
My suggestion is to change the address-line1 to street-address-line1, not
to have synonyms. Chrome would then support address-line1 for a limited
period of time, but outside the spec. Since no other browser have yet
implemented autocomplete at all AFAIK, I don't think we're too entrenched
to make changes. But I'll defer to your judgment here.

If you are avidly anti-synonym for the address-level* stuff, and don't want
to change &quot;region&quot; and &quot;locality&quot;, then I guess the next best naming scheme
in my mind would be &quot;region&quot;, &quot;locality&quot;, &quot;locality2&quot;, &quot;locality3&quot;. But we
also need to update the descriptions as mentioned above.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; The reason we went with proposing address-levelN is because
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; region-levelN implies that all political regions are captured,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; when they aren't. There's no field for US county because county
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; is never part of an address. So it's only for regions that
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; actually make it onto an envelope.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; I don't think the implication is that strong. In fact I'd argue
</I>&gt;<i> &gt; &gt; &gt; &gt; it's the other way around -- the implication is that this is for
</I>&gt;<i> &gt; &gt; &gt; &gt; addresses, not generic regions.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; You think region-levelN more strongly implies &quot;only regions relevant
</I>&gt;<i> &gt; &gt; &gt; to addresses&quot; than address-levelN does?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Just the way that this is all about addresses is what I think implies
</I>&gt;<i> &gt; &gt; that the fields are about addresses.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Well, there are other location APIs (like the Google Geocoding API)
</I>&gt;<i> &gt; which are not about addresses, so they include things that don't go on
</I>&gt;<i> &gt; envelopes. This almost-analogous API could cause confusion.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Also, not all of autocomplete is related to addresses, e.g. date of
</I>&gt;<i> &gt; birth, gender, etc. AFAIU, autocomplete is just about data that the user
</I>&gt;<i> &gt; has to fill in frequently. So I imagine it's not always perfectly clear
</I>&gt;<i> &gt; to a new developer that this is specifically addresses, as opposed to
</I>&gt;<i> &gt; generic geolocation. Maybe they mistakenly try to use it to get the
</I>&gt;<i> &gt; user's geolocation in political terms, rather than coordinates?
</I>&gt;<i>
</I>&gt;<i> The other fields in the same gorup include things like &quot;street-address&quot;
</I>&gt;<i> and &quot;postal-code&quot;. Things like &quot;bday&quot; and &quot;sex&quot; are in a different group.
</I>&gt;<i>
</I>&gt;<i> But sure, I'll grant you that authors might get confused.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; I think the arguments you've presented so far suggest &quot;address-levelN&quot;
</I>&gt;<i> &gt; &gt; for N=1..4, with 4=region and 3=locality, is probably the simplest
</I>&gt;<i> &gt; &gt; thing to do. I was hoping there might be other people with opinions,
</I>&gt;<i> &gt; &gt; to give us different perspectives on this, but it seems nobody else
</I>&gt;<i> &gt; &gt; cares. :-(
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Again, that's backwards from what we're proposing.
</I>&gt;<i>
</I>&gt;<i> Sorry, I got the numbers wrong by mistake. I really do think this
</I>&gt;<i> numbering scheme is confusing...
</I>&gt;<i>
</I>
K, didn't mean to harp on this point, just wanted to be clear.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Why is that better than 1=region, 2=locality, except to a US-centric
</I>&gt;<i> &gt; viewpoint? This would lead to a weird situation where (a) you couldn't
</I>&gt;<i> &gt; expand past 4 levels without changing the meaning of previous levels and
</I>&gt;<i> &gt; (b) a country such as the US would have address-level4 and
</I>&gt;<i> &gt; address-level3 but no address-level2 or address-level1.
</I>&gt;<i>
</I>&gt;<i> Well, at least as far as (a) goes, we have no way to know where
</I>&gt;<i> governments are going to introduce new levels. Who's to say that the US
</I>&gt;<i> won't introduce something between states and towns? This problem exists
</I>&gt;<i> whatever we do. Maybe the US and the EU will merge and there'll be a new
</I>&gt;<i> field between &quot;country-name&quot; and &quot;region&quot;. Who knows.
</I>&gt;<i>
</I>
One can dream...

You're right that changing political circumstances might put us in an
awkward situation no matter what we do. But it seems to me the most likely
scenario is that a government would add more administrative levels at the
most granular level.


&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084404.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
	<LI>Next message: <A HREF="084406.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84409">[ date ]</a>
              <a href="thread.html#84409">[ thread ]</a>
              <a href="subject.html#84409">[ subject ]</a>
              <a href="author.html#84409">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
