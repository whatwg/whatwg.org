<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Supporting more address levels in autocomplete
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3Cop.xb1d0hjqy3oazb%40chaals.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="084388.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Supporting more address levels in autocomplete</H1>
<!--htdig_noindex-->
    <B>Charles McCathie Nevile</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3Cop.xb1d0hjqy3oazb%40chaals.local%3E"
       TITLE="[whatwg] Supporting more address levels in autocomplete">chaals at yandex-team.ru
       </A><BR>
    <I>Sat Mar  1 01:30:07 PST 2014</I>
    <P><UL>
        
        <LI>Next message: <A HREF="084388.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42114">[ date ]</a>
              <a href="thread.html#42114">[ thread ]</a>
              <a href="subject.html#42114">[ subject ]</a>
              <a href="author.html#42114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 01 Mar 2014 02:47:06 +0100, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i> On Mon, 24 Feb 2014, Jukka K. Korpela wrote:
</I>&gt;&gt;<i> 2014-02-22 3:03, Ian Hickson wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; (Note that a lot of people in the UK have no idea how to write their
</I>&gt;&gt;<i> &gt; address according to current standards. For example, people often
</I>&gt;&gt;<i> &gt; include the county, give the &quot;real&quot; town rather than the &quot;post town&quot;,
</I>&gt;&gt;<i> &gt; put things out of order, indent each line of the address, etc.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The phenomenon is probably not limited to the UK. Few people even know
</I>&gt;&gt;<i> the current standards (national and international).
</I>&gt;<i>
</I>&gt;<i> Well sure, but since we're writing a standard, if our assumption is that
</I>&gt;<i> people don't know standards, we're not going to reach a useful  
</I>&gt;<i> conclusion.
</I>
I don't think that is necessarily true. In a lot of the work done on HTML,  
great care has been taken to minimise the likelihood of people getting  
things wrong, precisely because we don't expect them to know even this  
standard as well as we might like.

[...]

&gt;<i> On Mon, 24 Feb 2014, Charles McCathie Nevile wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That depends on whether you want to force your customers to think like
</I>&gt;&gt;<i> the Post Office, or whether you prefer to be responsive to your
</I>&gt;&gt;<i> customers. Speaking without data, I suspect that nervousness at not
</I>&gt;&gt;<i> being able to put *what someone thinks* is their address translates
</I>&gt;&gt;<i> fairly readily into a certain amount of failure to proceed with a
</I>&gt;&gt;<i> transaction.
</I>&gt;<i>
</I>&gt;<i> I'd love to see real data on this. I can imagine scenarios that would  
</I>&gt;<i> lead this to go both ways.
</I>
I have only anecdotal evidence (including cases where I have not proceeded  
- having been burnt by proceeding in the past), but it all runs one way.  
Before we go looking for people who do international shipping to provide  
such data, can you outline what sort of scenario goes the other way?

I'm assuming you probably don't mean people would be reassured by a form  
that asks for something which doesn't match what they think they know. Do  
you mean that you can imagine people being reassured when what they think  
their address is fits nicely in the form? Or something else I didn't get?

&gt;<i> On Mon, 24 Feb 2014, Dan Brickley wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Who is using the data? Just post offices? Or taxi drivers, pizza
</I>&gt;&gt;<i> delivery bikers, pedestrians?
</I>&gt;<i>
</I>&gt;<i> The latter three are unlikely to really need much more depth at the
</I>&gt;<i> locality level.
</I>
Again, I am not sure that is true - although I need to think it through  
more carefully than I have time for right now. Ditto for the rest of the  
discussion, which I think raises some interesting questions.

cheers

&gt;<i> On Mon, 24 Feb 2014, Evan Stade wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regarding UK addresses, libaddressinput[1], which is used by Google for
</I>&gt;&gt;<i> various products, currently accepts two levels of administrative region
</I>&gt;&gt;<i> for GB: city and optional county.
</I>&gt;<i>
</I>&gt;<i> You need two levels, but those aren't it. :-) Counties haven't officially
</I>&gt;<i> been used in UK addresses since the mid 90s.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; This would be the first open-ended field name. Do we really want to
</I>&gt;&gt;<i> &gt; make this open-ended? What happens if a form has n=1..3, and another
</I>&gt;&gt;<i> &gt; has n=2..4? What if one has n=1, n=2, and n=4, but not n=3?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't know why a web author would do this
</I>&gt;<i>
</I>&gt;<i> Web authors do all kinds of crazy stuff. We have to be ready for it such
</I>&gt;<i> that we never end up forced to introduce weird heuristics.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> but n=m doesn't require n=m-1 or n=m+1 to be present. n=2..4 would just
</I>&gt;&gt;<i> mean the site didn't get the n=1 value.
</I>&gt;<i>
</I>&gt;<i> My concern is that authors do something like this:
</I>&gt;<i>
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-line-1&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-2&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-3&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> ...and then the user enters their address:
</I>&gt;<i>
</I>&gt;<i>    1600 Amphitheatre Parkway
</I>&gt;<i>    Mountain View
</I>&gt;<i>    CA
</I>&gt;<i>
</I>&gt;<i> ...and then the user goes to another site:
</I>&gt;<i>
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-line-1&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-line-2&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-1&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-2&quot;&gt;
</I>&gt;<i>    &lt;input ... autocomplete=&quot;address-level-3&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> ...and the browser autofills:
</I>&gt;<i>
</I>&gt;<i>    1600 Amphitheatre Parkway
</I>&gt;<i>    (empty)
</I>&gt;<i>    Mountain View
</I>&gt;<i>    Mountain View
</I>&gt;<i>    CA
</I>&gt;<i>
</I>&gt;<i> ...or some such.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; How does a site know how many levels to offer?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It offers as many as it knows what to do with. It probably wouldn't know
</I>&gt;&gt;<i> what to do with n=5, or n=100, and it's highly unlikely a user agent
</I>&gt;&gt;<i> would return a value for those levels anyway, so practically speaking,
</I>&gt;&gt;<i> n=1 to n=3 should be sufficient for now (although n=4 seems possible in
</I>&gt;&gt;<i> the near future). But I don't see the purpose in setting a limit in the
</I>&gt;&gt;<i> spec.
</I>&gt;<i>
</I>&gt;<i> This makes me extremely uncomfortable.
</I>&gt;<i>
</I>&gt;<i> We're saying, &quot;we don't know how to do this, I hope you do&quot;. Why would we
</I>&gt;<i> be less able to answer this than Web authors? It's not like Web authors
</I>&gt;<i> are experts in postal addresses.
</I>&gt;<i>
</I>&gt;<i> I think we should pick the number that is actually needed, and be firm
</I>&gt;<i> that that is the number.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; What should a Chinese user interacting with a US company put in as
</I>&gt;&gt;<i> &gt; their address, if they want something shipped to China?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> They would put in the same address regardless of the nationality of the
</I>&gt;&gt;<i> company, assuming the company is able to properly handle their address.
</I>&gt;<i>
</I>&gt;<i> Shouldn't we want everyone to be able to handle everyone's address?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Which inputs are visible to the user should depend on which country
</I>&gt;&gt;<i> they're entering. This means that if a user changes the country, the
</I>&gt;&gt;<i> inputs shuffle around and hide or show.
</I>&gt;<i>
</I>&gt;<i> Are we really expecting many sites to do this? I've only seen the most
</I>&gt;<i> advanced sites do this.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; So they would be synonyms? Or separate fields?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> They are pseudo-synonyms.
</I>&gt;<i>
</I>&gt;<i> I don't know what that means.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> In the US, &quot;region&quot; aligns with &quot;address-level-1&quot;, and either one would
</I>&gt;&gt;<i> return the same value. In the UAE, where there are cities but no higher
</I>&gt;&gt;<i> level administrative region, &quot;locality&quot; aligns with &quot;address-level-1&quot;.
</I>&gt;&gt;<i> In China, &quot;address-level-1&quot; is a province a province-level city such as
</I>&gt;&gt;<i> Beijing. Beijing is also &quot;region&quot;, confusingly, and a district of the
</I>&gt;&gt;<i> city is a &quot;locality&quot;.
</I>&gt;<i>
</I>&gt;<i> If we're going to do this, we need to have a mapping for every locality
</I>&gt;<i> defined in the spec. This seems like a losing proposition.
</I>&gt;<i>
</I>&gt;<i> Why not make them straight synonyms?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> So generally speaking, if I ship to both China and the US, I would
</I>&gt;&gt;<i> create a form with &quot;address-level-[1..4]&quot; and if the user starts to
</I>&gt;&gt;<i> enter a US address, only show the first 2 levels. If the user starts to
</I>&gt;&gt;<i> enter a Chinese address, show more levels. If using requestAutocomplete,
</I>&gt;&gt;<i> all the inputs are hidden all the time anyway.
</I>&gt;<i>
</I>&gt;<i> Are we going to have a list in the spec giving how many levels should be
</I>&gt;<i> given for each country?
</I>&gt;<i>
</I>&gt;<i> Note that the &quot;country&quot; field is often near the end of the form. How do
</I>&gt;<i> you know which country the user is entering an address for when all the
</I>&gt;<i> user's entered is three lines of text?
</I>&gt;<i>
</I>&gt;<i> (Most Web developers don't have access to a reverse geocoder that can
</I>&gt;<i> guess the answer from the first line.)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, 25 Feb 2014, J&#252;rg Lehni wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think it is dangerous to make any kind of assumption about valid
</I>&gt;&gt;<i> postal addresses.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here's a great list of all kinds of exceptions to rules that programmers
</I>&gt;&gt;<i> tend to believe to be true:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (Don't we love rules?)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.mjt.me.uk/posts/falsehoods-programmers-believe-about-addresses/">http://www.mjt.me.uk/posts/falsehoods-programmers-believe-about-addresses/</A>
</I>&gt;<i>
</I>&gt;<i> I didn't see any there that were contradicted by the assumptions in the
</I>&gt;<i> HTML spec; did you have any particular ones in mind?
</I>&gt;<i>
</I>

-- 
Charles McCathie Nevile - Consultant (web standards) CTO Office, Yandex
       <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chaals at yandex-team.ru</A>         Find more at <A HREF="http://yandex.com">http://yandex.com</A>
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="084388.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42114">[ date ]</a>
              <a href="thread.html#42114">[ thread ]</a>
              <a href="subject.html#42114">[ subject ]</a>
              <a href="author.html#42114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
