<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Supporting more address levels in autocomplete
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3CCAO4XGS-k%3D8O%3D7ozgVi7AWoHU7_1Yxhh4Xk%3DkuudeuxrtTbpDNQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084399.html">
   <LINK REL="Next"  HREF="084401.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Supporting more address levels in autocomplete</H1>
<!--htdig_noindex-->
    <B>Evan Stade</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20more%20address%20levels%20in%20autocomplete&In-Reply-To=%3CCAO4XGS-k%3D8O%3D7ozgVi7AWoHU7_1Yxhh4Xk%3DkuudeuxrtTbpDNQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Supporting more address levels in autocomplete">estade at chromium.org
       </A><BR>
    <I>Tue Mar  4 14:52:26 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="084399.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
        <LI>Next message: <A HREF="084401.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84400">[ date ]</a>
              <a href="thread.html#84400">[ thread ]</a>
              <a href="subject.html#84400">[ subject ]</a>
              <a href="author.html#84400">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Mar 4, 2014 at 12:18 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Mon, 3 Mar 2014, Evan Stade wrote:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I don't think you can just write a stack of inputs that accepts
</I>&gt;<i> &gt; &gt; &gt; input for any country. The country determines:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; a) what fields make sense
</I>&gt;<i> &gt; &gt; &gt; b) what fields are required
</I>&gt;<i> &gt; &gt; &gt; c) the order of fields
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; You could ignore (a) and settle for a crappy UI that shows all
</I>&gt;<i> &gt; &gt; &gt; fields that make sense anywhere in the world, but you'd still be
</I>&gt;<i> &gt; &gt; &gt; left with solving (b) and (c).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; (b) is an easy-to-solve problem: you don't make any of them required,
</I>&gt;<i> &gt; &gt; and if the customer entered insufficient fields, they're not getting
</I>&gt;<i> &gt; &gt; their package, and will have to be contacted out-of-band.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't think the additional load that would place on customer service,
</I>&gt;<i> &gt; the number of missing packages, etc., would be considered an &quot;easy&quot;
</I>&gt;<i> &gt; problem or even an improvement over whatever they currently have in
</I>&gt;<i> &gt; place.
</I>&gt;<i>
</I>&gt;<i> I am not convinced it'd be that big a load (users generally know what
</I>&gt;<i> parts of their addresses are required!). But in any case, if we're talking
</I>&gt;<i> about mom-and-pop stores with a minimal load of international orders in
</I>&gt;<i> the first place, it's likely that the customer service load would be
</I>&gt;<i> pretty minimal.
</I>&gt;<i>
</I>
Then why do so many sites bother to validate data as users input it?


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Can you elaborate on (c)?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; US looks like:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Recipient
</I>&gt;<i> &gt; Organization
</I>&gt;<i> &gt; Street address
</I>&gt;<i> &gt; City, State ZIP
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Japan looks like:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &#12306; ZIP
</I>&gt;<i> &gt; State City
</I>&gt;<i> &gt; Street address
</I>&gt;<i> &gt; Organization
</I>&gt;<i> &gt; Recipient
</I>&gt;<i>
</I>&gt;<i> Ah, interesting. That is indeed a significantly larger difference than I
</I>&gt;<i> expected.
</I>&gt;<i>
</I>&gt;<i> Can you elaborate on these? Where would &quot;address-line2&quot; and
</I>&gt;<i> &quot;address-line3&quot; go? Where would &quot;country-name&quot; go?
</I>&gt;<i>
</I>
Country name is always at the end. When I put &quot;street address&quot; above, I
meant it in the sense of &quot;all the lines of street address&quot;. Different
countries have a different number of lines, but by definition they're
always all next to each other --- the definition of address-line-N is &quot;the
Nth line of the street address when it's formatted for display&quot;.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If the layout difference is that great, we should seriously consider
</I>&gt;<i> documenting that also.
</I>&gt;<i>
</I>
I think it's outside the scope of the autocomplete spec, but there are
libraries which to do this, such as libaddressinput, which provides a
service to get formatting data for various coutnries. For example, the
&quot;fmt&quot; portion of [1] tells you how to format US addresses. Chrome
integrates libaddressinput into requestAutocomplete so web authors get this
for free, but they could also use the service on their own if they didn't
want to rely on requestAutocomplete.

[1] <A HREF="https://i18napis.appspot.com/ssl-address/data/US">https://i18napis.appspot.com/ssl-address/data/US</A>


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Looking at the suggestions I listed earlier:
</I>&gt;<i>
</I>&gt;<i> &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt;    &quot;address-line5&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line6&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line7&quot; / &quot;locality&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line8&quot; / &quot;region&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line9&quot; / &quot;country-name&quot;
</I>&gt;<i>
</I>&gt;<i> This presumably wouldn't work sanely for Japanese addresses.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Or we could do:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt;    &quot;subsublocality&quot;
</I>&gt;<i> &gt; &gt;    &quot;sublocality&quot;
</I>&gt;<i> &gt; &gt;    &quot;locality&quot;
</I>&gt;<i> &gt; &gt;    &quot;region&quot;
</I>&gt;<i> &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i>
</I>&gt;<i> This could work. It avoids the synonym problem.
</I>&gt;<i>
</I>
Yes, this alternative works, but in my opinion is not preferable.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt;    &quot;locality&quot;
</I>&gt;<i> &gt; &gt;    &quot;subsubregion&quot;
</I>&gt;<i> &gt; &gt;    &quot;subregion&quot;
</I>&gt;<i> &gt; &gt;    &quot;region&quot;
</I>&gt;<i> &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i>
</I>&gt;<i> This _could_ work, but it seems a bit weirder than &quot;subsublocality&quot;.
</I>&gt;<i>
</I>
This would re-define locality, leading to cross-version incompatibilities.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Or alternatively:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt;    &quot;region-level5&quot;
</I>&gt;<i> &gt; &gt;    &quot;region-level4&quot;
</I>&gt;<i> &gt; &gt;    &quot;region-level3&quot; / &quot;locality&quot;
</I>&gt;<i> &gt; &gt;    &quot;region-level2&quot; / &quot;region&quot;
</I>&gt;<i> &gt; &gt;    &quot;region-level1&quot; / &quot;country-name&quot;
</I>&gt;<i>
</I>&gt;<i> This has the advantage of not leaving &quot;country-name&quot; dangling.
</I>&gt;<i>
</I>
Yes, but country-name is special: (a) it always comes at the end, (b) it
always exists, (c) calling it &quot;country-name&quot; always makes sense, and (d) it
controls the format of everything else. So I think it's desirable to make
it separate from the sub-country region tokens.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &gt;    &quot;address-line1&quot; |
</I>&gt;<i> &gt; &gt;    &quot;address-line2&quot; |- &quot;street-address&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-line3&quot; |
</I>&gt;<i> &gt; &gt;    &quot;address-level4&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-level3&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-level2&quot; / &quot;locality&quot;
</I>&gt;<i> &gt; &gt;    &quot;address-level1&quot; / &quot;region&quot;
</I>&gt;<i> &gt; &gt;    &quot;country-name&quot;
</I>&gt;<i>
</I>&gt;<i> This could work. It has the synonym issue (having multiple fields that
</I>&gt;<i> mean the same thing is often the source of confusion).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Again, you really can't just put a stack of input fields and have it
</I>&gt;<i> &gt; make sense anywhere. If you are presenting a UI to enter addresses,
</I>&gt;<i> &gt; there's no way you can escape actually knowing how addresses are
</I>&gt;<i> &gt; formatted around the world. (Well, there's requestAutocomplete.)
</I>&gt;<i>
</I>&gt;<i> You still need to know how to render them when printing the label, even
</I>&gt;<i> with requestAutocomplete(). It really does seem like we should either
</I>&gt;<i> document this order, or point to documentation on the topic. Are there Web
</I>&gt;<i> pages out there that provide sufficient information to do this?
</I>&gt;<i>
</I>
No, you don't need to know. You use the (not yet spec'd)
&quot;display-address&quot;/&quot;address-blob&quot;/&quot;complete-address&quot; token that was
mentioned up-thread.


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; I'm not married to the address-levelN name. [something-that-makes-
</I>&gt;<i> &gt; sense]N is fine.
</I>&gt;<i>
</I>&gt;<i> The reason I'm being a bit reluctant to embrace address-level* is that
</I>&gt;<i> it's so close to address-line*.
</I>&gt;<i>
</I>
OK. To tell the truth I think address-line1 should probably be
street-address-line1. Would that help clear up the confusion?


&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; The reason we went with proposing address-levelN is because
</I>&gt;<i> &gt; region-levelN implies that all political regions are captured, when they
</I>&gt;<i> &gt; aren't. There's no field for US county because county is never part of
</I>&gt;<i> &gt; an address. So it's only for regions that actually make it onto an
</I>&gt;<i> &gt; envelope.
</I>&gt;<i>
</I>&gt;<i> I don't think the implication is that strong. In fact I'd argue it's the
</I>&gt;<i> other way around -- the implication is that this is for addresses, not
</I>&gt;<i> generic regions.
</I>&gt;<i>
</I>
You think region-levelN more strongly implies &quot;only regions relevant to
addresses&quot; than address-levelN does?

Anyway, address-region-levelN, or something, is fine with me.


&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084399.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
	<LI>Next message: <A HREF="084401.html">[whatwg] Supporting more address levels in autocomplete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#84400">[ date ]</a>
              <a href="thread.html#84400">[ thread ]</a>
              <a href="subject.html#84400">[ subject ]</a>
              <a href="author.html#84400">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
