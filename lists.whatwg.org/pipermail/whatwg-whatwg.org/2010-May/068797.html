<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: &lt;audio&gt; and text/event-stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20%3Caudio%3E%20and%20text/event-stream&In-Reply-To=%3C4C006057.1010004%40jumis.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068801.html">
   <LINK REL="Next"  HREF="068802.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: &lt;audio&gt; and text/event-stream</H1>
<!--htdig_noindex-->
    <B>Charles Pritchard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20%3Caudio%3E%20and%20text/event-stream&In-Reply-To=%3C4C006057.1010004%40jumis.com%3E"
       TITLE="[whatwg] Proposal: &lt;audio&gt; and text/event-stream">chuck at jumis.com
       </A><BR>
    <I>Fri May 28 17:31:19 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="068801.html">[whatwg] Exposing framerate / statistics of &lt;video&gt; playback
</A></li>
        <LI>Next message: <A HREF="068802.html">[whatwg] My proposal of a subtitle format via an XML-like markup	(in progress)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68797">[ date ]</a>
              <a href="thread.html#68797">[ thread ]</a>
              <a href="subject.html#68797">[ subject ]</a>
              <a href="author.html#68797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi All,

I'm exploring programmable MIDI, and would like to generate some
discussion.

Currently: &lt;audio src=&quot;data:audio/midi;base64,....&quot;&gt;&lt;/audio&gt; is a valid
way of generating a MIDI file; and if the browser actually supports midi,
it can result in a playable stream.

Live midi requires a data stream.

I'd like to see &lt;audio&gt; work with postMessage
and &lt;audio src&gt; work with text/event-stream.

.....

Event Source is a good starting point...
<A HREF="http://dev.w3.org/html5/eventsource/">http://dev.w3.org/html5/eventsource/</A>

for something something like this to make sense.
&lt;audio src=&quot;data:text/event-stream,&quot;&gt;

But it gets strange when trying to add a mime type. needing discussion:
&lt;audio src=&quot;data:text/event-stream,data%..audio/midi,&quot; id=&quot;livemidi&quot;&gt;

postMessage is used in the JS API to send events:
document.onkeydown = function(e) {
   bytecode = keyboardEventToBytecode(e);
   document.getElementById('livemidi').postMessage(bytecode);
}

By using postMessage, the target could be an audio tag,
a web worker, or a web socket, and by implementing text/event-stream,
the browser could receive midi events from a web socket.

This is a proposal to extend the &lt;audio&gt; tag, and usage recommendation
for data:text/event-stream. This proposal follows current specs closely, 
and is not restricted to MIDI.

....

The full Web Workers is a bit heavy for this use case:
<A HREF="http://www.whatwg.org/specs/web-workers/current-work/">http://www.whatwg.org/specs/web-workers/current-work/</A>

Mozilla has been drafing a raw audio API:
<A HREF="https://wiki.mozilla.org/Audio_Data_API">https://wiki.mozilla.org/Audio_Data_API</A>
MIDI byte code is quite a bit smaller, and so typed arrays are not 
necessary.

Buffering issues are generally outside the scope of the W3C APIs.


-Charles


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068801.html">[whatwg] Exposing framerate / statistics of &lt;video&gt; playback
</A></li>
	<LI>Next message: <A HREF="068802.html">[whatwg] My proposal of a subtitle format via an XML-like markup	(in progress)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68797">[ date ]</a>
              <a href="thread.html#68797">[ thread ]</a>
              <a href="subject.html#68797">[ subject ]</a>
              <a href="author.html#68797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
