<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Image resize API proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Image%20resize%20API%20proposal&In-Reply-To=%3C379E6BBE-6FBA-43D2-B7BC-908EF4CD760F%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068721.html">
   <LINK REL="Next"  HREF="068758.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Image resize API proposal</H1>
<!--htdig_noindex-->
    <B>Chris Marrin</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Image%20resize%20API%20proposal&In-Reply-To=%3C379E6BBE-6FBA-43D2-B7BC-908EF4CD760F%40apple.com%3E"
       TITLE="[whatwg] Image resize API proposal">cmarrin at apple.com
       </A><BR>
    <I>Sun May 23 09:07:05 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="068721.html">[whatwg] Image resize API proposal
</A></li>
        <LI>Next message: <A HREF="068758.html">[whatwg] Image resize API proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68736">[ date ]</a>
              <a href="thread.html#68736">[ thread ]</a>
              <a href="subject.html#68736">[ subject ]</a>
              <a href="author.html#68736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On May 22, 2010, at 3:03 AM, Robert O'Callahan wrote:

&gt;<i> On Sat, May 22, 2010 at 10:12 AM, David Levin &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">levin at google.com</A>&gt; wrote:
</I>&gt;<i> There are a few issues here:
</I>&gt;<i> This only applies when you can accelerate with a GPU. Not all devices may support this.
</I>&gt;<i> This only applies to browsers that implement the acceleration with a GPU. When Mike Shaver mentioned this, he referred to a Windows version of Firefox. It is unclear if Firefox supports this on any other platform nor does it seem that all other browsers will support the accelerated canvas in the near-ish future.
</I>&gt;<i> The gpu results are due to the fact that the operation is done async from the call (which is great as far as not hanging the UI until you try to get the data out of the canvas, which leads to...).
</I>&gt;<i> Even with gpu acceleration, in order to use the result in an xhr, one has to get back the result from the gpu and this is a more expensive operation (because getting the data out of the gpu is slow) as indicated by the indirect copy results from Firefox  and forces the completion of all of the operations that were being done async.
</I>&gt;<i>  
</I>&gt;<i> 1. Phones have GPUs now. You won't see new devices being built that can run real Web browsers but don't have some kind of GPU, because the limiting factor on hardware now is not silicon but power.
</I>&gt;<i> 2. Your proposal depends on browsers that implement your new API. As a browser developer, I would rather make canvas faster across the board than implement new API.
</I>&gt;<i> 3. The GPU results are largely because GPUs are massively parallel.
</I>&gt;<i> 4. The Firefox results include time to unpremultiply data and premultiply it again, all on the CPU. They don't indicate how long readback from the GPU actually takes on that machine. Also:
</I>&gt;<i> 4a) the cost of readback is proportional to the size of the scaled image, so if your use case is scaling down images to small sizes, readback is cheap.
</I>&gt;<i> 4b) you can easily read back and send one chunk of the scaled image at a time
</I>
Just to be clear, readback is never &quot;cheap&quot;. The cost of readback isn't so much the image size, but the fact that you need to stall the pipeline, do the read and then fill the pipeline again. So anything happening on the GPU (not just in your app, but systemwide) will slow down the readback and the readback will slow everything else.

Readback is just generally evil and should be avoided at all costs :-)

-----
~Chris
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cmarrin at apple.com</A>




-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100523/feb521ae/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100523/feb521ae/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068721.html">[whatwg] Image resize API proposal
</A></li>
	<LI>Next message: <A HREF="068758.html">[whatwg] Image resize API proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68736">[ date ]</a>
              <a href="thread.html#68736">[ thread ]</a>
              <a href="subject.html#68736">[ subject ]</a>
              <a href="author.html#68736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
