<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Image resize API proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Image%20resize%20API%20proposal&In-Reply-To=%3CCE8E969C-44E8-400A-BEFF-A87466E7B99F%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068706.html">
   <LINK REL="Next"  HREF="068718.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Image resize API proposal</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Image%20resize%20API%20proposal&In-Reply-To=%3CCE8E969C-44E8-400A-BEFF-A87466E7B99F%40apple.com%3E"
       TITLE="[whatwg] Image resize API proposal">mjs at apple.com
       </A><BR>
    <I>Thu May 20 20:28:22 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="068706.html">[whatwg] Image resize API proposal
</A></li>
        <LI>Next message: <A HREF="068718.html">[whatwg] Image resize API proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68707">[ date ]</a>
              <a href="thread.html#68707">[ thread ]</a>
              <a href="subject.html#68707">[ subject ]</a>
              <a href="author.html#68707">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On May 20, 2010, at 8:13 PM, David Levin wrote:

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Thu, May 20, 2010 at 7:55 PM, Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On May 20, 2010, at 6:24 PM, Robert O'Callahan wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On Fri, May 21, 2010 at 12:50 PM, Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt; wrote:
</I>&gt;&gt;<i> I'd also love to hear from Mike Shaver and others from the original thread what they think of this API proposal.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> I think Shaver's feedback still applies: on any device with a GPU, we can optimize canvas and/or rendering enough that scaling images is no problem on the main thread. So this API would have a short useful lifetime ... possibly negative.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Coming thread full circle, I now think there are good use cases for off-main-thread canvas, in particular with WebGL, but I guess that deserves its own thread again :-).
</I>&gt;<i> 
</I>&gt;<i> As far as I can tell, the proposed API doesn't enable resizing off the main thread. It is an API on HTMLImageElement so you can't call it from a worker. And it returns synchronously so the main thread has to block until the resize is done regardless. It returns a Blob, so I suppose it may be possible that the intent is to make a magical blob that's actually backed by a background thread asynchronous computation instead of data. That wasn't clear to me from the proposal. It would be a little weird.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The proposed api has a callback for the blob, so it is totally async. We attempted to return the blob sync (and do everything hidden in the background), but blob.size wouldn't be known (so it would need to throw or block, etc.)  
</I>&gt;<i> 
</I>&gt;<i> Sample code from the proposal:
</I>&gt;<i> 
</I>&gt;<i> var successEvt = function (newBlob) { myDiv.innerHTML += &quot;&lt;img src='&quot; + newBlob.url + &quot;' /&gt;&quot;; };
</I>&gt;<i> 
</I>&gt;<i> i.getBlob(&quot;image/jpeg&quot;, 300, 350, successEvt);
</I>&gt;<i> 
</I>&gt;<i> 
</I>
Ah, I misread the proposal. Didn't realize it had call backs.

In that case - why add an asynchronous API for this when there is evidence that adequate responsiveness can be achieved with a sufficiently optimized nonblocking API? Surely an async API is not more convenient on the whole. So the only reason to add it would be for performance, but it seems that could be achieved just by optimizing canvas sufficiently.

Regards,
Maciej

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100520/d92d8565/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100520/d92d8565/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068706.html">[whatwg] Image resize API proposal
</A></li>
	<LI>Next message: <A HREF="068718.html">[whatwg] Image resize API proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68707">[ date ]</a>
              <a href="thread.html#68707">[ thread ]</a>
              <a href="subject.html#68707">[ subject ]</a>
              <a href="author.html#68707">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
