<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] 2D canvas feature proposal: text decoration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%202D%20canvas%20feature%20proposal%3A%20text%20decoration&In-Reply-To=%3Calpine.DEB.2.00.1309272041490.12199%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083209.html">
   <LINK REL="Next"  HREF="083201.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] 2D canvas feature proposal: text decoration</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%202D%20canvas%20feature%20proposal%3A%20text%20decoration&In-Reply-To=%3Calpine.DEB.2.00.1309272041490.12199%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] 2D canvas feature proposal: text decoration">ian at hixie.ch
       </A><BR>
    <I>Fri Sep 27 14:05:47 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083209.html">[whatwg] Notifications: usage feedback
</A></li>
        <LI>Next message: <A HREF="083201.html">[whatwg] 2D canvas feature proposal: text decoration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40908">[ date ]</a>
              <a href="thread.html#40908">[ thread ]</a>
              <a href="subject.html#40908">[ subject ]</a>
              <a href="author.html#40908">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 21 Aug 2013, Justin Novosad wrote:
&gt;<i> On Tue, Aug 20, 2013 at 6:32 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; On Thu, 18 Apr 2013, Justin Novosad wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This is a really simple proposal to add support for text decorations 
</I>&gt;<i> &gt; &gt; in 2D canvas contexts.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; IDL to add to interface CanvasDrawingStyles:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; attribute DOMString textDecoration;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; It would support all the same modes as the 'text-decoration' CSS 
</I>&gt;<i> &gt; &gt; property (except inherit), and default would be 'none'.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That's anything but simple. :-)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The CSS text-decoration model is actually quite complex. Also, there 
</I>&gt;<i> &gt; have been many proposals to split 'text-decoration' into 
</I>&gt;<i> &gt; sub-properties, so it is only going to get more complicated from 
</I>&gt;<i> &gt; there.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What's your use case? That is, when do you need to underline text?
</I>&gt;<i> 
</I>&gt;<i> Take a web app that presents a view of an arbitrarily large document (map,
</I>&gt;<i> spreadsheet, word processor document, drawing, etc).
</I>
Well, which one? :-)

A word processor document definitely doesn't belong in &lt;canvas&gt;, as 
discussed here:

   <A HREF="http://whatwg.org/html/#best-practices">http://whatwg.org/html/#best-practices</A> 

Maps and drawings are obviously applicable to &lt;canvas&gt;. Spreadsheets 
maybe, though probably only because we don't have a better solution.

So, let's assume we're talking about maps and drawings.

&gt;<i> Using the DOM to represent such documents for the purpose of rendering can
</I>&gt;<i> be quite inefficient.  The two basic approaches are:
</I>&gt;<i>  a) Put the entire document into the DOM and incur massive layout and style
</I>&gt;<i> recalculation penalties.
</I>&gt;<i>  b) Put only the visible part of the document in the DOM and incur frequent
</I>&gt;<i> layout and style recalculation penalties, as you scroll around
</I>&gt;<i> 
</I>&gt;<i> With 2D canvas, the app can manage its own document model, often in ways
</I>&gt;<i> that perform better by several orders of magnitude.
</I>&gt;<i> There is increasing pressure from app developers for us to improve the text
</I>&gt;<i> feature set in 2D canvas so that so that apps can be ported to 2D canvas.
</I>
What maps and drawings need underlines that are more elaborate than just 
stroking a line under the text manually?


&gt;<i> Text decoration can theoretically be drawn directly by the application 
</I>&gt;<i> by using font metrics to compute decoration positions, but this is often 
</I>&gt;<i> very complex to do correctly in a truly portable way.
</I>
We could add underline metrics to TextMetrics if that would help.


I definitely do not think it makes sense to add APIs to &lt;canvas&gt; until 
such time as it's possible to create a CSS-compliant text formatter in 
&lt;canvas&gt;. That way lies madness, as text formatting is ludicrously 
complicated. We already have CSS. If doing things with CSS and the DOM is 
too slow, then we should fix that, we shouldn't just tell people to 
rewrite their apps in &lt;canvas&gt;.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083209.html">[whatwg] Notifications: usage feedback
</A></li>
	<LI>Next message: <A HREF="083201.html">[whatwg] 2D canvas feature proposal: text decoration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40908">[ date ]</a>
              <a href="thread.html#40908">[ thread ]</a>
              <a href="subject.html#40908">[ subject ]</a>
              <a href="author.html#40908">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
