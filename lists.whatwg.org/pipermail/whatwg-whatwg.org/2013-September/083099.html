<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fetch SVG images with No CORS tainted cross-origin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fetch%20SVG%20images%20with%20No%20CORS%20tainted%20cross-origin&In-Reply-To=%3CCADnb78j8vOsF4eU4kPm60Db2vjz268dnOEkHOo3wCrOdjc6EUA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083094.html">
   <LINK REL="Next"  HREF="040830.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fetch SVG images with No CORS tainted cross-origin</H1>
<!--htdig_noindex-->
    <B>Anne van Kesteren</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fetch%20SVG%20images%20with%20No%20CORS%20tainted%20cross-origin&In-Reply-To=%3CCADnb78j8vOsF4eU4kPm60Db2vjz268dnOEkHOo3wCrOdjc6EUA%40mail.gmail.com%3E"
       TITLE="[whatwg] Fetch SVG images with No CORS tainted cross-origin">annevk at annevk.nl
       </A><BR>
    <I>Fri Sep 13 04:15:22 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083094.html">[whatwg] Fetch SVG images with No CORS tainted cross-origin
</A></li>
        <LI>Next message: <A HREF="040830.html">[whatwg] Namespaces and tag names in the HTML parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83099">[ date ]</a>
              <a href="thread.html#83099">[ thread ]</a>
              <a href="subject.html#83099">[ subject ]</a>
              <a href="author.html#83099">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Sep 13, 2013 at 10:52 AM, Dirk Schulze &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">dschulze at adobe.com</A>&gt; wrote:
&gt;<i> If Fetch is not just fetching external (as not in the current document) then we still need it for SVG. References within the same document must still work.
</I>
Fragment identifiers are to be handled by SVG. Again, your &quot;SVG fetch&quot;
wrapper could let through certain URLs and not others, but I'm not
sure if the only difference is a fragment identifier if that would
even go through Fetch. I kinda doubt it since Fetch is async and
fragment handling is generally sync. (Good question to answer for
<A HREF="https://github.com/slightlyoff/EventWorker/">https://github.com/slightlyoff/EventWorker/</A> though as that would make
this difference observable.)


&gt;&gt;<i> Do scripts even execute
</I>&gt;&gt;<i> in that context? How do you get blob URLs?
</I>&gt;<i>
</I>&gt;<i> In WebKit and Blink you can't execute any script anywhere in an SVG document. I am not sure about Gecko but this is the feedback I got. Maybe someone from Mozilla can answer this.
</I>
You mean SVG image right? So how do you get a blob URL?


&gt;&gt;<i> I suppose we could have a mode for that in Fetch too, but it seems
</I>&gt;&gt;<i> really SVG specific so I'm not sure that's warranted.
</I>&gt;<i>
</I>&gt;<i> Yes, it is quite SVG specific. I am fine with just dealing with it in SVG as long as possible. And I think it is not possible without changing the fetching on the requesters like &lt;img&gt;. (This is the case for CSS as well btw, which can reference SVG images - different topic.)
</I>
Well, for HTML &lt;img&gt; it's not about fetching. It just has to say that
when it gets SVG back, it sets the &quot;locked down flag&quot; or the &quot;image
flag&quot; or uses SVG in &quot;image mode&quot; or however SVG decides to name that.


&gt;<i> The second case would indeed need a flag like &quot;locked down flag&quot;. This would just allow fetching of resources in the same document, dataURLs (with lock down for the content of dataURL) and possibly blob URLs.
</I>
There's no such thing as fetching resources in the same document.


&gt;<i> The requester needs to set this &quot;lock down flag&quot;. So ideally it would be specified by the Fetch specification. Legacy fetching (used for image fetching) would set this flag by default. In this case no other specification but Fetch and CSS would need to change.
</I>
No that's not how this flag works. The flag is for an SVG resource and
when you interpret that resource and do SVG fetching it would come
into effect.


-- 
<A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083094.html">[whatwg] Fetch SVG images with No CORS tainted cross-origin
</A></li>
	<LI>Next message: <A HREF="040830.html">[whatwg] Namespaces and tag names in the HTML parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83099">[ date ]</a>
              <a href="thread.html#83099">[ thread ]</a>
              <a href="subject.html#83099">[ subject ]</a>
              <a href="author.html#83099">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
