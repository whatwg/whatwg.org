<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Structured Clone of Map and Set objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Structured%20Clone%20of%20Map%20and%20Set%20objects&In-Reply-To=%3C69B3CEC1-06BD-4137-96A2-202BDE590EB9%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082961.html">
   <LINK REL="Next"  HREF="082964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Structured Clone of Map and Set objects</H1>
<!--htdig_noindex-->
    <B>Oliver Hunt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Structured%20Clone%20of%20Map%20and%20Set%20objects&In-Reply-To=%3C69B3CEC1-06BD-4137-96A2-202BDE590EB9%40apple.com%3E"
       TITLE="[whatwg] Structured Clone of Map and Set objects">oliver at apple.com
       </A><BR>
    <I>Wed Sep  4 11:56:32 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="082961.html">[whatwg] Encoding: lone surrogates and utf-8, utf-16be, and utf-16le encoders
</A></li>
        <LI>Next message: <A HREF="082964.html">[whatwg] Structured Clone of Map and Set objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40690">[ date ]</a>
              <a href="thread.html#40690">[ thread ]</a>
              <a href="subject.html#40690">[ subject ]</a>
              <a href="author.html#40690">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>The current structured clone algorithm does not include support for the Map and Set types, so a developer would need to manually implement the serialisation and deserialisation.  While this would not be impossible it does seem like it is an unnecessary inconvenience for a core type in ES6.

The semantics of Map and Set are stable so unless someone objects i see no reason we should not amend the internal structured clone algorithm to specially handle Set and Map in addition to Array.  To support cloning of Map and Set we will want to recursively call the structured clone algorithm on each key or key/value pair in the %SetData% or %MapData% internal arrays, and maintain the order of those entries (as the Map/Set ordering is well defined)

--Oliver
</PRE>



















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082961.html">[whatwg] Encoding: lone surrogates and utf-8, utf-16be, and utf-16le encoders
</A></li>
	<LI>Next message: <A HREF="082964.html">[whatwg] Structured Clone of Map and Set objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40690">[ date ]</a>
              <a href="thread.html#40690">[ thread ]</a>
              <a href="subject.html#40690">[ subject ]</a>
              <a href="author.html#40690">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
