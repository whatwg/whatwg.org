<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [canvas] inner shadows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20inner%20shadows&In-Reply-To=%3CCAGN7qDCqtrDbgpocWx%2BaiRp-njnhzVTAP785neHBjbAyY3M5DQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080370.html">
   <LINK REL="Next"  HREF="038101.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [canvas] inner shadows</H1>
<!--htdig_noindex-->
    <B>Rik Cabanier</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20inner%20shadows&In-Reply-To=%3CCAGN7qDCqtrDbgpocWx%2BaiRp-njnhzVTAP785neHBjbAyY3M5DQ%40mail.gmail.com%3E"
       TITLE="[whatwg] [canvas] inner shadows">cabanier at gmail.com
       </A><BR>
    <I>Sat Nov 24 21:21:23 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="080370.html">[whatwg] [canvas] inner shadows
</A></li>
        <LI>Next message: <A HREF="038101.html">[whatwg] Feature Request: Media Elements as Targets for Links
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80379">[ date ]</a>
              <a href="thread.html#80379">[ thread ]</a>
              <a href="subject.html#80379">[ subject ]</a>
              <a href="author.html#80379">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Nov 24, 2012 at 8:21 AM, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt; wrote:

&gt;<i> On Sat, Nov 24, 2012 at 7:59 AM, Glenn Maynard &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">glenn at zewt.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Fri, Nov 23, 2012 at 11:11 PM, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt;wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What matters is the shape that is used to calculate the blur (step 1)
</I>&gt;&gt;&gt;<i> In your example, that shape is a rectangle so just the rectangle edges
</I>&gt;&gt;&gt;<i> will
</I>&gt;&gt;&gt;<i> be blurred.
</I>&gt;&gt;&gt;<i> That slightly blurred rectangle is then composited with the clipping
</I>&gt;&gt;&gt;<i> region
</I>&gt;&gt;&gt;<i> in step 4.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The end result is a solid rectangle in the shadowcolor that composites on
</I>&gt;&gt;&gt;<i> top of the shape.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Testing with Hixie's code (<A HREF="https://zewt.org/~glenn/canvas-glow.html">https://zewt.org/~glenn/canvas-glow.html</A>),
</I>&gt;&gt;<i> the output is very close to &quot;inner shadow&quot; in Photoshop (distance 0, size
</I>&gt;&gt;<i> 22): <A HREF="https://zewt.org/~glenn/canvas-glow.png.">https://zewt.org/~glenn/canvas-glow.png.</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> yes! I forgot that clip doesn't clear the path so his example works.
</I>&gt;<i>
</I>&gt;<i> I think it's possible to calculate to calculate the reverse shadow today
</I>&gt;<i> with temporary backing and compositing.
</I>&gt;<i> If so, the function to calculate them is not really necessary though it
</I>&gt;<i> would be still be nice to have a direct way to do an inner shadow.
</I>&gt;<i>
</I>
I put an example of this here: <A HREF="http://jsfiddle.net/cabanier/eav5V/">http://jsfiddle.net/cabanier/eav5V/</A>
Unfortunately, Chrome has a bug in its handling of shadows so you have to
use a different browser.

This case uses a png with an alpha channel, but it can apply to shapes as
well.
It shows how you can calculate the inner shadow and how you can draw it on
top of your content.
The fourth canvas contains just the shadow. This is probably what Ian's
proposed function would return.


&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> (I'm testing against inner shadow instead of inner glow; inner glow seems
</I>&gt;&gt;<i> to do something a little more complex at the blur step than a gaussian
</I>&gt;&gt;<i> blur.  Tested in Chrome 21; output in Firefox is different, but I probably
</I>&gt;&gt;<i> need to update.)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> True. Glow is a bit more complex than a plain (but not much).
</I>&gt;<i> Photoshop also does a 'multiply' blend with the shadow by default which
</I>&gt;<i> improves the look.
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080370.html">[whatwg] [canvas] inner shadows
</A></li>
	<LI>Next message: <A HREF="038101.html">[whatwg] Feature Request: Media Elements as Targets for Links
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80379">[ date ]</a>
              <a href="thread.html#80379">[ thread ]</a>
              <a href="subject.html#80379">[ subject ]</a>
              <a href="author.html#80379">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
