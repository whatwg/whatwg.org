<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [URL] DOM API Feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BURL%5D%20DOM%20API%20Feedback&In-Reply-To=%3C50AA578A.5040702%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080264.html">
   <LINK REL="Next"  HREF="080267.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [URL] DOM API Feedback</H1>
<!--htdig_noindex-->
    <B>David Bruant</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BURL%5D%20DOM%20API%20Feedback&In-Reply-To=%3C50AA578A.5040702%40gmail.com%3E"
       TITLE="[whatwg] [URL] DOM API Feedback">bruant.d at gmail.com
       </A><BR>
    <I>Mon Nov 19 08:00:10 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="080264.html">[whatwg] [URL] DOM API Feedback
</A></li>
        <LI>Next message: <A HREF="080267.html">[whatwg] [URL] DOM API Feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80266">[ date ]</a>
              <a href="thread.html#80266">[ thread ]</a>
              <a href="subject.html#80266">[ subject ]</a>
              <a href="author.html#80266">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Le 19/11/2012 14:38, Boris Zbarsky a &#233;crit :
&gt;<i> On 11/19/12 2:36 AM, David Bruant wrote:
</I>&gt;&gt;<i> An ES6 proxy could do the trick here.
</I>&gt;<i>
</I>&gt;<i> But then it's not a Map at all, right?  It's a proxy for maybe a Map, 
</I>&gt;<i> maybe something else.  In what sense would it be a Map at that point?
</I>I initially suggested either objects or maps. ES6 proxy was a followup 
for the idea of objects.

&gt;&gt;&gt;<i> I suppose the same goes for ES6 Map.
</I>&gt;&gt;<i> As Tab suggested, a Map subclass could certainly work
</I>&gt;<i>
</I>&gt;<i> How close are &quot;subclasses&quot; to not being vaporware (both in spec and 
</I>&gt;<i> implementation terms)?
</I>I don't understand what you mean by vaporware. ES6 Maps are a reality in 
Firefox and Chrome (behind a flag for the latter). Subclassing of ES6 
maps will be possible as soon as ES6 classes do (which I admit are still 
unimplemented)... well... it's actually possible today with __proto__ I 
guess.


&gt;<i> Speccing things in terms of vaporware makes them pretty hard to 
</I>&gt;<i> implement in actual implementations...  Doesn't mean we shouldn't do 
</I>&gt;<i> it, but I'm a bit wary of it, in general.
</I>It's still possible for the spec to define an API that maps (no pun) the 
ES6 Map API (and does some additional magic). For those who'd care 
enough, it'll be possible to make this object a map.
If not an ES6 map, the same API will be good enough to avoid API diversity.

&gt;<i>
</I>&gt;&gt;<i> The ordered part for objects wasn't true in ES5 (implementation specific
</I>&gt;&gt;<i> order), but is considered for ES6 [1] since all web engines do the same
</I>&gt;&gt;<i> order
</I>&gt;<i>
</I>&gt;<i> Except they don't.  Here's a trivial example:
</I>&gt;<i>
</I>&gt;<i>   var obj = {};
</I>&gt;<i>   obj[&quot;2&quot;] = 5;
</I>&gt;<i>   obj[&quot;1&quot;] = 0;
</I>&gt;<i>
</I>&gt;<i> which is handled differently by different UAs.  The &quot;same order&quot; bit 
</I>&gt;<i> is only true for property names that don't look like array indices.  
</I>&gt;<i> Per proposed spec you linked to, by the way, this will enumerate 
</I>&gt;<i> properties in the order &quot;1&quot; followed by &quot;2&quot;.
</I>Interesting, I thought the proposal was meant to capture de facto 
standard. Did UAs converge for that behavior recently? More 
specifically, what does IE9 do? (I guess oldIE are the ones diverging 
from the others?)


&gt;<i> Of course nothing really stops pages from using url parameters whose 
</I>&gt;<i> names look like array indices.  So if we want ordered here, we just 
</I>&gt;<i> can't use a object to do it.
</I>Indeed. I have to admit, I was also worried about __proto__ and 
__defineGetter__ too, because they could have ended up being sources of 
security issues.

If it's an ES6 map or interoperable API, that's fine by me.

David

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080264.html">[whatwg] [URL] DOM API Feedback
</A></li>
	<LI>Next message: <A HREF="080267.html">[whatwg] [URL] DOM API Feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80266">[ date ]</a>
              <a href="thread.html#80266">[ thread ]</a>
              <a href="subject.html#80266">[ subject ]</a>
              <a href="author.html#80266">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
