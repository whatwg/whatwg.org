<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Make DOMStringMap constructable, and el.dataset writeable?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Make%20DOMStringMap%20constructable%2C%20and%20el.dataset%20writeable%3F&In-Reply-To=%3CCAAWBYDDVSJreETHcqSuyJ9CRwu8X7tmufCnws%3D0J2UUmX%2BNfqQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080475.html">
   <LINK REL="Next"  HREF="080477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Make DOMStringMap constructable, and el.dataset writeable?</H1>
<!--htdig_noindex-->
    <B>Tab Atkins Jr.</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Make%20DOMStringMap%20constructable%2C%20and%20el.dataset%20writeable%3F&In-Reply-To=%3CCAAWBYDDVSJreETHcqSuyJ9CRwu8X7tmufCnws%3D0J2UUmX%2BNfqQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Make DOMStringMap constructable, and el.dataset writeable?">jackalmage at gmail.com
       </A><BR>
    <I>Fri Nov 30 11:23:53 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="080475.html">[whatwg] URL: URLQuery
</A></li>
        <LI>Next message: <A HREF="080477.html">[whatwg] Make DOMStringMap constructable,	and el.dataset writeable?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38203">[ date ]</a>
              <a href="thread.html#38203">[ thread ]</a>
              <a href="subject.html#38203">[ subject ]</a>
              <a href="author.html#38203">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Currently, el.dataset is readonly.  A friend of mine passed along a
use-case for making it writeable.

She's making a game, where the game initialization script expects
certain types of elements, and for the initial state data of the
elements to be present in data attributes on them.  She'd like to be
able to pause the game, shifting all the state data into localStorage,
then later resume by pulling it back onto elements before starting the
game script.

Right now she has to do this with a for-in loop, like:

for(var i = 0; i &lt; cards.length; i++) {
  for(var k in carddata[i]) {
    cards[i].dataset[k] = carddata[i][k];
  }
}

It would be somewhat cleaner if she could simply construct a
DOMStringMap and assign it, like so:

for(var i = 0; i &lt; cards.length; i++) {
  cards[i].dataset = new DOMStringMap(carddata[i]);
}

Another potentially interesting use-case for this is making it
possible to &quot;transfer&quot; data-* attributes from one element to another
with a simple &quot;el1.dataset = el2.dataset;&quot; statement.

Thoughts?

~TJ
</PRE>




<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080475.html">[whatwg] URL: URLQuery
</A></li>
	<LI>Next message: <A HREF="080477.html">[whatwg] Make DOMStringMap constructable,	and el.dataset writeable?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38203">[ date ]</a>
              <a href="thread.html#38203">[ thread ]</a>
              <a href="subject.html#38203">[ subject ]</a>
              <a href="author.html#38203">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
