<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Location object identity and navigation behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Location%20object%20identity%20and%20navigation%20behavior&In-Reply-To=%3CPine.LNX.4.64.1211200733470.16964%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038023.html">
   <LINK REL="Next"  HREF="038030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Location object identity and navigation behavior</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Location%20object%20identity%20and%20navigation%20behavior&In-Reply-To=%3CPine.LNX.4.64.1211200733470.16964%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Location object identity and navigation behavior">ian at hixie.ch
       </A><BR>
    <I>Mon Nov 19 23:38:36 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038023.html">[whatwg] Location object identity and navigation behavior
</A></li>
        <LI>Next message: <A HREF="038030.html">[whatwg] Location object identity and navigation behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38025">[ date ]</a>
              <a href="thread.html#38025">[ thread ]</a>
              <a href="subject.html#38025">[ subject ]</a>
              <a href="author.html#38025">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 20 Nov 2012, Boris Zbarsky wrote:
&gt;<i> 
</I>&gt;<i> All you need for script A to be able to call script B as the spec us 
</I>&gt;<i> currently written is that sometime in the past the effective script 
</I>&gt;<i> origin of A matched the effective script origin of some script C and 
</I>&gt;<i> that at some point in the past (possibly a completely different point) 
</I>&gt;<i> the effective script origin of B matched the effective script origin of 
</I>&gt;<i> C (which may not have been the same at that point as when C matched A!).
</I>
I have great difficulty worrying about C accessing A. If you set 
document.domain and yet don't trust the other side, you've basically lost. 
Don't do that.

IMHO there's no point us trying to keep things locked down when you set 
document.domain. I'd be fine with making all the security checks still use 
the entry script's real origin, except that Window would now allow you 
access to stuff you didn't have access to before.


&gt;<i> I think the problem is that you're assuming invariants that just don't 
</I>&gt;<i> hold. There is no current requirement in the spec that there be any 
</I>&gt;<i> relationship between either the origin or effective script origin of the 
</I>&gt;<i> entry script and the origins of the currently running script.
</I>
Because of document.domain. Yeah.

Man I wish we could just kill document.domain.


&gt;<i> &gt; if you have both calling each other then you can almost certainly 
</I>&gt;<i> &gt; trick the script into doing what you want either way.
</I>&gt;<i> 
</I>&gt;<i> Who said anything about both calling each other?
</I>
If they're not calling each other, how are they both on the stack?

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>





















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038023.html">[whatwg] Location object identity and navigation behavior
</A></li>
	<LI>Next message: <A HREF="038030.html">[whatwg] Location object identity and navigation behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38025">[ date ]</a>
              <a href="thread.html#38025">[ thread ]</a>
              <a href="subject.html#38025">[ subject ]</a>
              <a href="author.html#38025">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
