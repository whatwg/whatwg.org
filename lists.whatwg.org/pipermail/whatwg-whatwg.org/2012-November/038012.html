<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] URL: percent-encoded host
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20URL%3A%20percent-encoded%20host&In-Reply-To=%3CCADnb78g54Zryb9WYa%3DKqrw1PgcVjM2mLQ9e3uS7_h6Y-D4MMwQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080282.html">
   <LINK REL="Next"  HREF="080289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] URL: percent-encoded host</H1>
<!--htdig_noindex-->
    <B>Anne van Kesteren</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20URL%3A%20percent-encoded%20host&In-Reply-To=%3CCADnb78g54Zryb9WYa%3DKqrw1PgcVjM2mLQ9e3uS7_h6Y-D4MMwQ%40mail.gmail.com%3E"
       TITLE="[whatwg] URL: percent-encoded host">annevk at annevk.nl
       </A><BR>
    <I>Mon Nov 19 13:12:48 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="080282.html">[whatwg] Use of article to identify the main content of a web page (was Re: A plea to Hixie to adopt &lt;main&gt;)
</A></li>
        <LI>Next message: <A HREF="080289.html">[whatwg] URL: percent-encoded host
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38012">[ date ]</a>
              <a href="thread.html#38012">[ thread ]</a>
              <a href="subject.html#38012">[ subject ]</a>
              <a href="author.html#38012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>What to do with percent-encoded bytes in the host? Examples (prepend
<A HREF="http://">http://</A> for a full URL):

1. x%2ex
2. %80
3. %41
4. %C3%A9

(Append % to each of them for confusing results, e.g. Opera handles
%41% and %C3%A9% differently.
<A HREF="http://dump.testsuite.org/url/inspect.html">http://dump.testsuite.org/url/inspect.html</A> can be used for testing.)

There's a bunch of different approaches we could take (and most of
these seem to be done in one way or another):

1. Convert percent-encoded bytes to bytes, decode as utf-8.
2. Convert percent-encoded bytes to bytes, only decode those as utf-8
that represent a valid sequence.
3. Ignore percent-encoded bytes.

Chrome seems to do 1 (although with weird results when you hit a decoder error).
Opera and Safari seem to do 2.
Firefox seems to do 3.

Personally I'm leaning towards either 1 (without the weirdness) or 3.
The potential downside may be that with either of those you can no
longer transmit bytes higher than 0x7F over DNS or equivalent system.
Not sure if that's a problem in practice as user agents seem to mostly
fail already...


-- 
<A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>
</PRE>





















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080282.html">[whatwg] Use of article to identify the main content of a web page (was Re: A plea to Hixie to adopt &lt;main&gt;)
</A></li>
	<LI>Next message: <A HREF="080289.html">[whatwg] URL: percent-encoded host
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38012">[ date ]</a>
              <a href="thread.html#38012">[ thread ]</a>
              <a href="subject.html#38012">[ subject ]</a>
              <a href="author.html#38012">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
