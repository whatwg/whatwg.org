<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Location object identity and navigation behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Location%20object%20identity%20and%20navigation%20behavior&In-Reply-To=%3CCAKBxTc%2BAmYLr2VB4g%2BVFB2qF8hUcZ1ujTSbHjwj-wsKaAqdbtw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037854.html">
   <LINK REL="Next"  HREF="037858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Location object identity and navigation behavior</H1>
<!--htdig_noindex-->
    <B>Bobby Holley</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Location%20object%20identity%20and%20navigation%20behavior&In-Reply-To=%3CCAKBxTc%2BAmYLr2VB4g%2BVFB2qF8hUcZ1ujTSbHjwj-wsKaAqdbtw%40mail.gmail.com%3E"
       TITLE="[whatwg] Location object identity and navigation behavior">bobbyholley at gmail.com
       </A><BR>
    <I>Fri Nov  9 12:06:55 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="037854.html">[whatwg] Location object identity and navigation behavior
</A></li>
        <LI>Next message: <A HREF="037858.html">[whatwg] Location object identity and navigation behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37857">[ date ]</a>
              <a href="thread.html#37857">[ thread ]</a>
              <a href="subject.html#37857">[ subject ]</a>
              <a href="author.html#37857">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Nov 9, 2012 at 11:33 AM, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:

&gt;<i> &gt; That was my opinion for a while, too, but I eventually decided it was
</I>&gt;<i> &gt; necessary in Gecko.
</I>&gt;<i>
</I>&gt;<i> Can you explain why you think it is necessary?  In WebKit, the
</I>&gt;<i> WindowProxy is the only object that has this magic.
</I>&gt;<i>
</I>
As noted, the Location object is the only object whose security
characteristics don't match its scope. This requires a lot of extra goop in
our compartment-based security model, and the goop is brittle (recently
forcing us to release two out-of-band updates, 16.0.1 and 16.0.2). We've
got enough belt-and-suspenders code now that I'm not particularly worried,
but I still want to make Location just like any other object from a
security perspective.

If UAs were consistent or the spec matched reality, this would be a
different story. But given that we probably need to change the spec to
either the Trident/Presto model or the Gecko/WebKit model, I support the
former, because we've historically had problems implementing the latter
securely. Do you feel that it would be difficult to implement the former
securely in WebKit?

Also, FWIW, from the perspective of an average web-developer, IMO it makes
much more semantic sense to have one Location per WindowProxy if the
Location object describes the WindowProxy. But I doubt many people touch
this stuff in practice.

We don't want to move objects between scopes.  That causes many
&gt;<i> security complications that we don't want to deal with.
</I>&gt;<i>
</I>
Are you able to just update references, like you do with WindowProxy?
That's essentially what we're doing. We actually create a new object in the
new scope and update all the old references to point to it.


&gt;<i> Can you answer the questions in my previous email?
</I>&gt;<i>
</I>
Which ones? AFAICT Boris answered all of them except for the testcase thing
(which I answered). Did I miss some?

Cheers,
bholley
</PRE>















































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037854.html">[whatwg] Location object identity and navigation behavior
</A></li>
	<LI>Next message: <A HREF="037858.html">[whatwg] Location object identity and navigation behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37857">[ date ]</a>
              <a href="thread.html#37857">[ thread ]</a>
              <a href="subject.html#37857">[ subject ]</a>
              <a href="author.html#37857">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
