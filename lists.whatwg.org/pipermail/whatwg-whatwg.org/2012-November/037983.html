<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [mimesniff] The X-Content-Type-Options header
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bmimesniff%5D%20The%20X-Content-Type-Options%20header&In-Reply-To=%3CCAJE5ia_mBQNmBRweuZT01S6%3DFfLy38hb7JD%2B5Tq2GvNw7LYRuA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037976.html">
   <LINK REL="Next"  HREF="038004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [mimesniff] The X-Content-Type-Options header</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bmimesniff%5D%20The%20X-Content-Type-Options%20header&In-Reply-To=%3CCAJE5ia_mBQNmBRweuZT01S6%3DFfLy38hb7JD%2B5Tq2GvNw7LYRuA%40mail.gmail.com%3E"
       TITLE="[whatwg] [mimesniff] The X-Content-Type-Options header">w3c at adambarth.com
       </A><BR>
    <I>Sat Nov 17 10:17:35 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="037976.html">[whatwg] [mimesniff] The X-Content-Type-Options header
</A></li>
        <LI>Next message: <A HREF="038004.html">[whatwg] [mimesniff] The X-Content-Type-Options header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37983">[ date ]</a>
              <a href="thread.html#37983">[ thread ]</a>
              <a href="subject.html#37983">[ subject ]</a>
              <a href="author.html#37983">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Nov 16, 2012 at 2:43 PM, Gordon P. Hemsley &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gphemsley at gmail.com</A>&gt; wrote:
&gt;<i> On Fri, Nov 16, 2012 at 5:28 PM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at annevk.nl</A>&gt; wrote:
</I>&gt;&gt;<i> On Fri, Nov 16, 2012 at 2:19 PM, Gordon P. Hemsley &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gphemsley at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> In addition, I would like to, if I could, also allow the header to be
</I>&gt;&gt;&gt;<i> specified without the 'X-' prefix (so as 'Content-Type-Options'), for
</I>&gt;&gt;&gt;<i> that reason (and because of best current practice).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Does anyone have any questions, comments, or objections about this issue?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Not sure why you would drop the prefix if it's not supported. Doesn't
</I>&gt;&gt;<i> seem like best practice to me to needlessly break compatibility. ;-)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also, are we sure they are not sniffing still? E.g. how is mislabeled
</I>&gt;&gt;<i> image content treated? I vaguely recall a image/png resource that's
</I>&gt;&gt;<i> actually a GIF, still working even in the presence of this header.
</I>&gt;&gt;<i> &lt;script&gt; probably still executes too, although I guess MIME sniff
</I>&gt;&gt;<i> currently has no say in how &lt;script&gt; loading does not care about the
</I>&gt;&gt;<i> MIME type.
</I>&gt;<i>
</I>&gt;<i> Well, it was my (unverified) understanding that the header wasn't
</I>&gt;<i> widely implemented yet.
</I>&gt;<i>
</I>&gt;<i> Gecko has a bug on file (which notes that it's for parity with Chrome):
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=471020">https://bugzilla.mozilla.org/show_bug.cgi?id=471020</A>
</I>&gt;<i>
</I>&gt;<i> So my intent was actually to specify exactly what browsers should do,
</I>&gt;<i> rather than what they currently do. (This spec is a mixture of both in
</I>&gt;<i> that department, modeled off of what Chrome does.)
</I>&gt;<i>
</I>&gt;<i> Regarding your anecdote, it's possible that you were using a browser
</I>&gt;<i> that didn't support the header (thus performing the sniffing even when
</I>&gt;<i> told not to). If you weren't, though, I think that's Bad&#8482;. If browsers
</I>&gt;<i> ignore the header, then there's no point in having it.
</I>&gt;<i>
</I>&gt;<i> Unless, of course, we only want to limit it to scriptable media types.
</I>&gt;<i> That wasn't what I was originally considering, but it doesn't
</I>&gt;<i> necessarily conflict with the IE team's original intent. (Their
</I>&gt;<i> example is content marked as 'text/plain' being sniffed as
</I>&gt;<i> 'text/html'.)
</I>&gt;<i>
</I>&gt;<i> So, what do the implementors think?
</I>
I would prefer if the spec described what implementations actually do
rather than your opinion about what they should do.  To answer your
specific questions:

1) Don't bother dropping the &quot;X-&quot;.  Everyone who implements this
feature uses the X- and dropping it is just going to cause unnecessary
interoperability problems.

2) When deciding what to specify about values other than nosniff,
please reverse engineer the existing implementations rather than just
making up how you wish they behave.

3) With regards to &lt;img&gt;, Chromium does not consider the
X-Content-Type-Options header when determining what to do, but IE
does.  It's not clear to me what the spec should say given that there
is lack of interop here and I don't think you have buy-in from either
implementor to change the current behavior.

4) With regards to &lt;script&gt;, Chromium does not consider the
X-Content-Type-Options header when determining what to do.  I'm not
sure whether IE does.  You'll need to do some reverse engineering to
figure it out.

5) With regards to &lt;iframe&gt; and the main frame, both IE and Chromium
do consider the X-Content-Type-Options header.

6) One of the more interesting cases to study is what happens when the
server both supplies an X-Content-Type-Options header and also fails
to supply a Content-Type header.  My recollection is that both IE and
Chromium treat the response as text/plain regardless of its contents.
However, please don't take my recollection as fact.  Instead, you
should reverse engineer the implementations in question.

Adam
</PRE>




































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037976.html">[whatwg] [mimesniff] The X-Content-Type-Options header
</A></li>
	<LI>Next message: <A HREF="038004.html">[whatwg] [mimesniff] The X-Content-Type-Options header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37983">[ date ]</a>
              <a href="thread.html#37983">[ thread ]</a>
              <a href="subject.html#37983">[ subject ]</a>
              <a href="author.html#37983">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
