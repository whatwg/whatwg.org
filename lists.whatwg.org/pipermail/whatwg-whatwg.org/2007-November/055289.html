<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Feedback on the ping=&quot;&quot; attribute (ISSUE-1)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Feedback%20on%20the%20ping%3D%22%22%20attribute%20%28ISSUE-1%29&In-Reply-To=%3CPine.LNX.4.62.0711021803270.27205%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="055283.html">
   <LINK REL="Next"  HREF="055290.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Feedback on the ping=&quot;&quot; attribute (ISSUE-1)</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Feedback%20on%20the%20ping%3D%22%22%20attribute%20%28ISSUE-1%29&In-Reply-To=%3CPine.LNX.4.62.0711021803270.27205%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Feedback on the ping=&quot;&quot; attribute (ISSUE-1)">ian at hixie.ch
       </A><BR>
    <I>Fri Nov  2 15:05:54 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="055283.html">[whatwg] SRC Vs. HREF
</A></li>
        <LI>Next message: <A HREF="055290.html">[whatwg] Feedback on the ping=&quot;&quot; attribute (ISSUE-1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55289">[ date ]</a>
              <a href="thread.html#55289">[ thread ]</a>
              <a href="subject.html#55289">[ subject ]</a>
              <a href="author.html#55289">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
This e-mail contains replies to a number of e-mails received on the topic
of the proposed ping=&quot;&quot; attribute since January 2006. Since e-mail on this
topic was sent to both the WHATWG and HTMLWG mailing lists, I have cc'ed
both on this e-mail. Please pick just one when replying. Thanks!


On Thu, 19 Jan 2006, Tyler Close wrote:
&gt;<i> On 1/19/06, Jim Ley &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jim.ley at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; On 1/19/06, Tyler Close &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">tyler.close at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I think it would be fair to characterize current techniques for link 
</I>&gt;<i> &gt; &gt; click tracking as &quot;opaque&quot;. In contrast, the proposed &quot;ping&quot; 
</I>&gt;<i> &gt; &gt; attribute explicitly declares in the HTML what is intended and how 
</I>&gt;<i> &gt; &gt; it will happen. Perhaps the right way to explain the &quot;ping&quot; 
</I>&gt;<i> &gt; &gt; attribute is as providing transparent, or explicit, feedback; 
</I>&gt;<i> &gt; &gt; shining a light on the dark corners of click tracking. If it is 
</I>&gt;<i> &gt; &gt; explained that the feature will make link click tracking explicit, 
</I>&gt;<i> &gt; &gt; controllable and more usable, I think the user base will react more 
</I>&gt;<i> &gt; &gt; positively.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; No, they'll just disable it, as it does them directly no benefit and 
</I>&gt;<i> &gt; has a cost, so if you educate them enough to make a decision, they 
</I>&gt;<i> &gt; will not decide to be tracked.
</I>&gt;<i> 
</I>&gt;<i> Why hasn't this happened to the HTTP Referer header?
</I>
Well, to a very small extent, it has. And indeed I would expect the same 
level of response to the ping=&quot;&quot; attribute as the HTTP Referer header 
received. This is actually a good thing -- we want people who want their 
privacy protected to this degree to be able to do so. Right now, they 
can't, because the existing tracking methods are roadblocks to the content 
they are tracking, and thus can't be bypassed.

The ping=&quot;&quot; attribute is intended to help users. Right now, user tracking 
happens widely, but suffers from a number of problems, including being:

 * non-transparent (users can't see what's being pinged easily)
 * non-optional (users can't disable it)
 * slow (adding DNS and TCP roundtrip to every tracked request)
 * obfuscated (the final target is usually hard to determine)

ping=&quot;&quot; solves all of these problems. It also helps the authoring side by 
making the tracking cleaner and making the user experience better, which 
should be enough to get authors to switch (we've already had a number of 
authors say they would use it as soon as it was widely available, some 
even said they'd use it earlier on a per-browser basis!).


&gt;<i> &gt; Since the main use of tracking has a direct economic cost to many 
</I>&gt;<i> &gt; parties the sites will then return to using the established successful 
</I>&gt;<i> &gt; methods for tracking, no-one will gain and browsers would've wasted 
</I>&gt;<i> &gt; lots of time that could've been spent on more productive features.
</I>&gt;<i> 
</I>&gt;<i> I think an economic analysis of the scenario is a valid approach. Could 
</I>&gt;<i> you spell out your argument in more detail? For example, after I've 
</I>&gt;<i> submitted a search request to Google, what is the economic cost to me of 
</I>&gt;<i> letting Google know which result I selected? What is the economic 
</I>&gt;<i> benefit to me of providing this information to Google?
</I>&gt;<i> 
</I>&gt;<i> I can see an argument that there is a net benefit to me to provide this 
</I>&gt;<i> information. I don't see a clear argument that there is a net cost to 
</I>&gt;<i> me. At the start of the exchange, the thing of value that I have are my 
</I>&gt;<i> search terms. Once I've given those up, Google already has most of what 
</I>&gt;<i> it needs to effectively advertise to me. Allowing Google to know which 
</I>&gt;<i> result was most relevant to me might mean I get more value in the future 
</I>&gt;<i> for revealing my search terms, in terms of better query results.
</I>&gt;<i> 
</I>&gt;<i> I'm interested to hear your economic analysis.
</I>
Jim was presumably referring to the ability to use ping=&quot;&quot; for tracking 
advertisments, and was suggesting that companies might be so greedy that 
they would refuse to use ping=&quot;&quot; for fear of not tracking users that had 
disabled the feature. Continuing with your theme above of a Google query, 
the theory might be that Google would value profit over user preferences 
so much that they would not use ping=&quot;&quot; for tracking conversions. I could 
assure you that this is not the case, I'm sure many people wouldn't be 
convinced. However, there is already a way to bypass the conversion 
tracking for ads: simply copy the URL given in the ad and paste it into 
your location bar. If greed was really beating the user's experience, I 
would presume that this would not be made available.


On Fri, 20 Jan 2006, Thomas Much wrote:
&gt;<i> 
</I>&gt;<i> There are browsers out there that let the user disable the HTTP referrer 
</I>&gt;<i> (and enable it only for certain sites that require it for whatever 
</I>&gt;<i> reasons). And our users definitely use this feature.
</I>
That's why we need to provide ping=&quot;&quot;. There's no way to do this at the 
moment. Users aren't able to disable tracking right now. They should be 
able to.


On Thu, 19 Jan 2006, James Graham wrote:
&gt;<i> 
</I>&gt;<i> Indeed. I believe that even browsers significantly more popular than 
</I>&gt;<i> iCab allow for this. Yet the vast majority of people leave the feature 
</I>&gt;<i> on.
</I>
Indeed. That's why we should not be worried about authors not using the 
feature just because it can be disabled.


On Fri, 20 Jan 2006, Thomas Much wrote:
&gt;<i> 
</I>&gt;<i> Maybe because they don't know about referrer security problems and even 
</I>&gt;<i> if they do they don't know how to turn it off? (How many users know 
</I>&gt;<i> about:config?)
</I>
I know about both, and I don't disable referrer.


&gt;<i> People felt safe using Firefox, and now someone tells them there's 
</I>&gt;<i> happening something behind the scenes, &quot;someone's tracking you.&quot;  Look 
</I>&gt;<i> at the comments on MozillaZine and on 
</I>&gt;<i> &lt;<A HREF="http://www.heise.de/newsticker/meldung/68508">http://www.heise.de/newsticker/meldung/68508</A>&gt;. Even if the ping 
</I>&gt;<i> attribute is a clean, open standard for something that has happend in 
</I>&gt;<i> the dark so far, people are afraid of it. This could become a marketing 
</I>&gt;<i> problem indeed.
</I>
Making a privacy-violating practice more transparent is a privacy gain. We 
should be happy that we are bringing this practice to the general 
consciousness.


&gt;<i> There are two options that lead to the same question:
</I>&gt;<i> 
</I>&gt;<i> - If people don't want this feature, you'll have to provide a switch to 
</I>&gt;<i> turn it off.
</I>&gt;<i> 
</I>&gt;<i> - If it can be switched off, websites will use the old, hidden ways to 
</I>&gt;<i> track users.
</I>&gt;<i> 
</I>&gt;<i> What's the benefit of the ping attribute then?
</I>
I do not believe the second step above. There is ample reason to believe 
that authors are willing to honour their users' preferences.


On Fri, 20 Jan 2006, Alexey Feldgendler wrote:
&gt;<i> 
</I>&gt;<i> I think that websites will use the old methods of tracking anyway 
</I>&gt;<i> because they can't be sure that the user agent supports ping=&quot;&quot;.
</I>
Certainly for the forseeable future this will be the case, but that's the 
case with all new features.


On Fri, 20 Jan 2006, Daniel Veditz wrote:
&gt;<i> 
</I>&gt;<i> Can't you say the same about cookies? Many people are up in arms about 
</I>&gt;<i> &quot;tracking&quot; and browsers do provide blocking tools, yet the vast majority 
</I>&gt;<i> of people leave them on and very few sites bother to use the old way of 
</I>&gt;<i> tracking state by passing it as URL query parameters.
</I>
Indeed.


On Fri, 20 Jan 2006, Alexey Feldgendler wrote:
&gt;<i> 
</I>&gt;<i> That's because on most sites you're unable to log in with cookies 
</I>&gt;<i> disabled. On the other hand, a user who has disabled ping=&quot;&quot; doesn't 
</I>&gt;<i> lose anything.
</I>
I do not believe that your reasoning applies to most users.


On Sat, 27 Oct 2007, Julian Reschke wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; We're long past that. It's trivial for a page to trigger a POST 
</I>&gt;<i> &gt; without the user knowing.
</I>&gt;<i> 
</I>&gt;<i> I consider that a bug in User Agents.
</I>
This is not a widely held opinion.


&gt;<i> Please do not add more of this.
</I>
While I understand that you believe that silent POSTs are somehow harmful, 
I believe that on the balance the proposed feature is a net user benefit, 
and that this instance of automatic POST is no more dangerous than other 
automatic POSTs being proposed (e.g. in the cross-site XMLHttpRequest 
specification being developed at the W3C in the WebAPI WG). Indeed, in 
this instance I would argue the danger is significantly reduced, since no 
POST data is sent with the request.


[Quoting HTTP:]

&gt;<i> &quot;9.1.1 Safe Methods
</I>&gt;<i> 
</I>&gt;<i> Implementors should be aware that the software represents the user in 
</I>&gt;<i> their interactions over the Internet, and should be careful to allow the 
</I>&gt;<i> user to be aware of any actions they might take which may have an 
</I>&gt;<i> unexpected significance to themselves or others.
</I>
I agree that ping=&quot;&quot; should be made visible to users. Indeed, the spec 
explicitly makes that a SHOULD, going far outside its usual boundary of 
not specifying user interface requirements.


&gt;<i> In particular, the convention has been established that the GET and HEAD 
</I>&gt;<i> methods SHOULD NOT have the significance of taking an action other than 
</I>&gt;<i> retrieval. These methods ought to be considered &quot;safe&quot;. This allows user 
</I>&gt;<i> agents to represent other methods, such as POST, PUT and DELETE, in a 
</I>&gt;<i> special way, so that the user is made aware of the fact that a possibly 
</I>&gt;<i> unsafe action is being requested.
</I>
Indeed; and in fact part of the goal here is to make the possibly unsafe 
action (user tracking and conversion tracking, with the potential effect 
on future performance or the potential material financial effect) be one 
that can be explicitly brought to the user's attention if he so desires, 
something that is not possible in legacy tracking techniques. (For 
example, using redirects make the whole process very opaque.)


&gt;<i> Naturally, it is not possible to ensure that the server does not 
</I>&gt;<i> generate side-effects as a result of performing a GET request; in fact, 
</I>&gt;<i> some dynamic resources consider that a feature. The important 
</I>&gt;<i> distinction here is that the user did not request the side-effects, so 
</I>&gt;<i> therefore cannot be held accountable for them.&quot;
</I>
I think it's clear that this paragraph is trying to convey that having 
side-effects with a GET request is a poor state of affairs, which I agree 
with, and which is one of the other things that the ping=&quot;&quot; proposal 
attempts to address -- legacy tracking mechanisms typically abuse GET in 
an unsafe way, which causes a number of problems for the server (mostly 
around unpredictable caching effects like pre-caching, session history 
navigation, and transparent cache proxies), which can then affect the user 
in undesirable ways (e.g. if tracking is used to determine preference 
towards one link or another, and the user's browser precaches one more 
often than the other, then the server will act as if the user had 
indicated a preference where in fact he had not).


In conclusion I think HTTP supports the design of the feature as is.


&gt;<i> &gt; &gt; &gt; What do you think are the risks of using POST?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; There are some, as with GET/HEAD. Due to the nature of POST, the 
</I>&gt;<i> &gt; &gt; effects may be more grave -- as you just cited (&quot;charging money&quot;).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; You are suggesting using GET to make money change hands. If we go that 
</I>&gt;<i> &gt; route, then what's the difference between GET and POST? You can't 
</I>&gt;<i> &gt; simultaneously say that POST is dangerous because it lets X happen and 
</I>&gt;<i> &gt; then say we should therefore use GET to let X happen. That's 
</I>&gt;<i> &gt; inconsistent.
</I>&gt;<i> 
</I>&gt;<i> No, I'm not suggesting that.
</I>&gt;<i> 
</I>&gt;<i> In this scenario, there are three parties involved:
</I>&gt;<i> 
</I>&gt;<i> A: the user
</I>&gt;<i> B: the visited site
</I>&gt;<i> C: the site being linked to
</I>&gt;<i> 
</I>&gt;<i> If the link from B to C needs to be audited for the purpose of paying 
</I>&gt;<i> ads, money will be exchanged between the owners of B and C. A is not 
</I>&gt;<i> involved in that transaction.
</I>&gt;<i> 
</I>&gt;<i> How the contract between B and C is implemented should be outside the 
</I>&gt;<i> scope of the stuff sent to A.
</I>
While that would be nice in practice, it is not the case today, and it is 
not clear that it ever could be the case. We have to work within the 
limitations we are presented with, and in this case it seems that the 
ping=&quot;&quot; proposal is the closest one can get to solving the problems seen 
by both the users and the authors.


&gt;<i> Again:
</I>&gt;<i> 
</I>&gt;<i> &quot;The important distinction here is that the user did not request the
</I>&gt;<i> side-effects, so therefore cannot be held accountable for them.&quot;
</I>&gt;<i> 
</I>&gt;<i> When A follows the link, he is *not* accountable for the cost of the ad, 
</I>&gt;<i> being transferred from C and B.
</I>
The HTTP specification just says that a user can never be held accountable 
for GET side-effects. It says nothing about the user being held 
accountable for anything else, including automatic POST requests.


&gt;<i> &gt; &gt; I personally think that the attribute in itself is a Very Bad Idea, 
</I>&gt;<i> &gt; &gt; but if it stays in, by all means do not use POST for it.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; We can't use GET... what other method would be appropriate?
</I>&gt;<i> 
</I>&gt;<i> You shouldn't do it at all. If you insist in doing it, use a safe 
</I>&gt;<i> method. Everything else is in conflict with RFC2616. And yes, you can 
</I>&gt;<i> use GET.
</I>
I think it has been explained why using GET is undesirable.


&gt;<i> &gt; &gt; BTW: I just checked, and the Google Ads on www.google.de work with 
</I>&gt;<i> &gt; &gt; GET and a Redirect (302). Only safe methods from the user's point of 
</I>&gt;<i> &gt; &gt; view. Are you saying this is a problem?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Yes.
</I>&gt;<i> 
</I>&gt;<i> Interesting -- good that I asked. It seems we'll not be able to make 
</I>&gt;<i> progress on this unless we clarify this issue first.
</I>
The problems from the server-side are that it is unreliable (due to 
pre-caching, transparent caching, and session history navigation), it 
obfuscates the user experience (the actual target URL is hidden), it is 
slow (there's at least one extra HTTP round-trip, possibly with an 
additional DNS hit as well), and it uses an idempotent method for a 
distinctly non-idempotent action.


&gt;<i> &gt; &gt; &gt; &gt; The spec continues with:
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; &quot;When the ping attribute is present, user agents should clearly 
</I>&gt;<i> &gt; &gt; &gt; &gt; indicate to the user that following the hyperlink will also 
</I>&gt;<i> &gt; &gt; &gt; &gt; cause secondary requests to be sent in the background, possibly 
</I>&gt;<i> &gt; &gt; &gt; &gt; including listing the actual target URIs.&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; &gt; This is good, but it's probably not clear enough -- at least FF3 
</I>&gt;<i> &gt; &gt; &gt; &gt; is ignoring this.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; It's not clear to me how to make it clearer.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; You could say &quot;must&quot; instead of &quot;should&quot;, for a start. You could 
</I>&gt;<i> &gt; &gt; also propose one acceptable way to fulfill that requirement.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; We shouldn't use &quot;MUST&quot; for issues that don't result in 
</I>&gt;<i> &gt; interoperability problems, that just weakens the other &quot;MUST&quot;s.
</I>&gt;<i> 
</I>&gt;<i> I think we should use &quot;must&quot; for things that affect privacy.
</I>
We shouldn't really even be using &quot;SHOULD&quot; for this. &quot;MUST&quot; is simply 
inappropriate here. This isn't to say that the privacy issue is 
unimportant, it is -- indeed it is one of the primary motivators for 
making this explicit instead of requiring authors to develop their own 
proprietary mechanisms as they currently do. However, it is inappropriate 
use of RFC2119 terminology to make a MUST-level requirement around user 
interface decisions.


&gt;<i> &gt; &gt; &gt; In the case of Firefox 3, the developers were very aware of the 
</I>&gt;<i> &gt; &gt; &gt; above requirement, as well as its implications, and intentionally 
</I>&gt;<i> &gt; &gt; &gt; decided to violate the SHOULD for the time being. It isn't clear 
</I>&gt;<i> &gt; &gt; &gt; to me that there is anything I could do to the _spec_ to change 
</I>&gt;<i> &gt; &gt; &gt; their mind. (It's not like they just missed the above paragraph or 
</I>&gt;<i> &gt; &gt; &gt; didn't understand it.)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Well, they ignored it, yet made the functionality the default. It's 
</I>&gt;<i> &gt; &gt; a very clear signal that we have a problem here.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; We could remove the paragraph.
</I>&gt;<i> 
</I>&gt;<i> Which makes things even worse. If you can't make this work correctly, 
</I>&gt;<i> please consider removing it.
</I>
It has been considered, very seriously, and for a long time. However, the 
net benefit to the users outweighs the disadvantages.

I encourage you to take up the UI issue directly with the relevant browser 
vendor(s). It isn't a technical problem with the spec.


On Sat, 27 Oct 2007, Geoffrey Sneddon wrote:
&gt;<i> 
</I>&gt;<i> Having read this entire thread, I don't see why anything is actually 
</I>&gt;<i> wrong. In this context the difference between GET and POST is negligible 
</I>&gt;<i> &#151; both can technically be used to do what is desired, though using GET 
</I>&gt;<i> would be breaking RFC 2616 (or rather, breaking a SHOULD NOT). If we 
</I>&gt;<i> disallow it to be used on external servers, people will just continue to 
</I>&gt;<i> use Javascript to achieve this, which CANNOT be disabled by a UA without 
</I>&gt;<i> breaking behaviour that sites rely upon.
</I>
Indeed.


On Sat, 27 Oct 2007, Julian Reschke wrote:
&gt;<i> 
</I>&gt;<i> No, sorry, that's incorrect.
</I>&gt;<i> 
</I>&gt;<i> If you want to do something silently (without the user's consent), you 
</I>&gt;<i> simply have to use a safe method.
</I>
We don't want to do it without the user's consent. The whole point of 
making ping=&quot;&quot; explicit is to allow the user to have the final decision.


&gt;<i> And if you consider the desired effect non-safe (which I don't), then 
</I>&gt;<i> the consequence is that you just can't do it.
</I>
We can't stop tracking from occurring. We can, however, make it better for 
users. I think we have a responsibility to do so.


On Sun, 28 Oct 2007, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> The ping attribute does have the same security risks that cross-domain 
</I>&gt;<i> XHR POST with empty entity body would have if the access-control 
</I>&gt;<i> Method-Check weren't there. That is, if a POST handler has been 
</I>&gt;<i> programmed to trigger stuff on mere POST without a body, a malicious 
</I>&gt;<i> ping attribute could be used to trigger that action.
</I>
(As could an empty scripted &lt;form&gt;.)


&gt;<i> &gt; And if you consider the desired effect non-safe (which I don't), then 
</I>&gt;<i> &gt; the consequence is that you just can't do it.
</I>&gt;<i> 
</I>&gt;<i> It is about idempotent vs. non-idempotent and side effects.
</I>&gt;<i> 
</I>&gt;<i> If you are counting ad impressions, clearly you don't want to
</I>&gt;<i>  a) count Google Web Accelerator (or similar) prefetches
</I>&gt;<i>  b) leave impressions uncounted due to an intermediate cache satisfying 
</I>&gt;<i>     the request.
</I>
Indeed.


On Sun, 28 Oct 2007, Julian Reschke wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; So would you ban XHR POST and script-initiated form submissions?
</I>&gt;<i> 
</I>&gt;<i> I would want the XHR spec to clarify that it's not OK to initiate unsafe 
</I>&gt;<i> methods without the user's consent. I would also deprecate 
</I>&gt;<i> script-initiated form submissions from something like onload().
</I>
Please bring this up with the Web API working group.


&gt;<i> &gt; It is about idempotent vs. non-idempotent and side effects.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If you are counting ad impressions, clearly you don't want to
</I>&gt;<i> &gt;  a) count Google Web Accelerator (or similar) prefetches
</I>&gt;<i> &gt;  b) leave impressions uncounted due to an intermediate cache 
</I>&gt;<i> &gt;     satisfying the request.
</I>&gt;<i> 
</I>&gt;<i> Yes. But the same problem can (and is) already used without &quot;ping&quot;
</I>
Indeed, and that's one of the (less important) things we're trying to fix 
with ping=&quot;&quot;.


&gt;<i> and even if you use &quot;ping&quot;, you still could do it with a safe method 
</I>&gt;<i> (HEAD/Cache-Control:no-cache).
</I>
Unfortunately HEAD is typically implemented in servers (e.g. Apache) 
without running the relevant CGI scripts, which makes them hard to 
implement at all. I also disagree that this would be a correct application 
of the HEAD method's semantics.


On Sun, 28 Oct 2007, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> That might work and could be a tad safer. It isn't in any way 
</I>&gt;<i> theoretically pure from the RFC 2616 point of view, though, to make HEAD 
</I>&gt;<i> and GET have different semantics beyond the response body presence.
</I>
Indeed.


On Sun, 28 Oct 2007, Julian Reschke wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; That might work and could be a tad safer. It isn't in any way 
</I>&gt;<i> &gt; theoretically pure from the RFC 2616 point of view, though, to make 
</I>&gt;<i> &gt; HEAD and GET have different semantics beyond the response body 
</I>&gt;<i> &gt; presence.
</I>&gt;<i> 
</I>&gt;<i> I wasn't suggesting that.
</I>
You suggested that we should use HEAD for request tracking, which indeed 
makes GET and HEAD have different semantics in a way that does not match 
(at least my interpretation of) RFC2616.


On Sun, 28 Oct 2007, Charles McCathieNevile wrote:
&gt;<i> 
</I>&gt;<i> Indeed. What we are being asked to implement is a platform for people to 
</I>&gt;<i> make money or to keep a closer watch than ever on users.
</I>
Actually, no, ping=&quot;&quot; would help do the opposite.


&gt;<i> Fundamentally, the ping being sent is not a user request of any kind at 
</I>&gt;<i> all, it is a third-party request for information about what the user is 
</I>&gt;<i> doing. This is not a transaction between a server and a client in the 
</I>&gt;<i> sense that HTTP usually offers, it is a one-way message from the client 
</I>&gt;<i> to a third party. So we are just using HTTP as a transport method of 
</I>&gt;<i> convenience since it is there. This is probably reasonable in the 
</I>&gt;<i> circumstances, but I don't yet understand how it matters which method we 
</I>&gt;<i> decide to turn into a one-way message in the absence of a mechanism for 
</I>&gt;<i> such.
</I>
Hopefully the points put forward earlier in this e-mail cover this in 
sufficient detail.


&gt;<i> &gt; I think we should use &quot;must&quot; for things that affect privacy.
</I>&gt;<i> 
</I>&gt;<i> Actually, much as I care about security and privacy, I think that in 
</I>&gt;<i> both these areas we ought to use &quot;should&quot; or similar language. If a 
</I>&gt;<i> browser decides to violate some policy, there is generally a reason for 
</I>&gt;<i> it (offer functionality to the user, or satisfy some corporate desire, 
</I>&gt;<i> implement something better, ...) and I don't think that *this* 
</I>&gt;<i> specification is the appropriate place to set security and privacy 
</I>&gt;<i> policy for all users for the web. HTML 5 might describe the behaviour 
</I>&gt;<i> that this ping should have. But browsers should be free to turn it off 
</I>&gt;<i> and on, or leave it off, or leave it on, or leave it up to the user...
</I>
I agree.


On Sun, 28 Oct 2007, Julian Reschke wrote:
&gt;<i> 
</I>&gt;<i> Understood. But right now we have one UA (FF3) approaching release, and 
</I>&gt;<i> the FF developers decided to ignore the &quot;should&quot;. This means that they 
</I>&gt;<i> are either incompetent (I don't believe that), that they implemented 
</I>&gt;<i> something better (they didn't AFAIK) or that the spec can't be 
</I>&gt;<i> implemented. That is a problem.
</I>
There are other options too, like that they are still experimenting with 
the UI, or that they had higher priorities, or that (as is the case) they 
are trying to find a solution that is better than the proposed solution of 
putting the ping domains in the status bar.


On Sun, 28 Oct 2007, Charles McCathieNevile wrote:
&gt;<i> 
</I>&gt;<i> You mean POST, right? As far as I am concerned, the HEAD request 
</I>&gt;<i> suggestion is the least departure from normal HTTP (since there is 
</I>&gt;<i> already llttle expectation that HEAD will pass a response to the user), 
</I>&gt;<i> but I still don't see
</I>
(I'm not sure if you meant to stop here or not.) HEAD seems even less 
desirable that head from the point of view of HTTP -- it's only supposed 
to get the HTTP headers of the resource, without doing anything at all!


&gt;<i> We are effectively redefining a method, if we follow the current draft, 
</I>&gt;<i> to remove the expectation that it is a real transaction.
</I>
I do not believe this is the case, given the existence of silent POSTs as 
mentioned already in this draft.


&gt;<i> While we are defining some magic handling of a method to make it 
</I>&gt;<i> &quot;technically safe&quot; (nothing bad should happen to the user in the UA as a 
</I>&gt;<i> result, although there is an argument that what we are doing is socially 
</I>&gt;<i> not reasonable - and that depends of course on your legal and moral 
</I>&gt;<i> framework and expectations about privay and other such difficult 
</I>&gt;<i> concepts) the argument that it should be one thing or another because of 
</I>&gt;<i> RFC 2616 seems to me specious, because I don't understand what is 
</I>&gt;<i> proposed as being what is offered in that spec - a way to perform direct 
</I>&gt;<i> transactions of information.
</I>
I'm not sure I follow this sentence.


On Sun, 28 Oct 2007, Boris Zbarsky wrote:
&gt;<i> 
</I>&gt;<i> You missed option (d):  The functionality was implemented by one 
</I>&gt;<i> (non-UI) guy as a test for an alpha release, no one's thought much about 
</I>&gt;<i> it since, and now that this thread has reminded people of it it might 
</I>&gt;<i> get turned off for Fx3.
</I>&gt;<i> 
</I>&gt;<i> For what it's worth, I haven't thought of a sane UI for notifying the 
</I>&gt;<i> user of &quot;ping&quot; yet.  But then again, I'm not a UI designer by trade.
</I>
Actually we did consider UI at the time (I was involved in the 
discussions). I would be interested in hearing details about the idea I 
suggested above, namely of putting the domain names of the hosts to be 
pinged in brackets after the link's own URI in the status bar:

   <A HREF="http://www.example.com/foo/bar">http://www.example.com/foo/bar</A> (tracked by example.net)


On Mon, 29 Oct 2007, Julian Reschke wrote:
&gt;<i> 
</I>&gt;<i> So the scenario is:
</I>&gt;<i> 
</I>&gt;<i> 1) User A browses web site B.
</I>&gt;<i> 
</I>&gt;<i> 2) A follows an HTML link to site C.
</I>&gt;<i> 
</I>&gt;<i> 3) The owner of B wants to be informed of that event in order to charge 
</I>&gt;<i> the owner of C for an online ad linking to C.
</I>
That's one scenario; there are other, possibly more important ones, for 
example: tracking results in search, so that more popular entries can have 
subsequent rankings boosted, or usability studies tracking which links 
users prefer on a site.


&gt;<i> As far as I understand Ian, he thinks that the notification for step 2 
</I>&gt;<i> needs to be done through an unsafe method, because money may be 
</I>&gt;<i> exchanged.
</I>
That's one reason; there are others, as mentioned earlier in this post.


&gt;<i> My position is that although money may be exchanged between B and C due 
</I>&gt;<i> to the notification (ping), this is a transaction between B and C, and A 
</I>&gt;<i> MUST NOT be involved. In other words, following a hyperlink MUST stay 
</I>&gt;<i> &quot;safe&quot; in the RFC2616 sense.
</I>
The hyperlink does stay safe; however, the ping is not idempotent, and 
should not use an idempotent method.


&gt;<i> Quoting RFC2616, 9.1.1 again: [...]
</I>
See above for a detailed response to each quoted paragraph.


&gt;<i> (emphasis on the last paragraph!)
</I>
The last paragraph actually doesn't apply -- it gives reasons not to use 
GET, or to be careful with GET, and doesn't actually give advice on other 
methods.


On Sun, 28 Oct 2007, Roy T. Fielding wrote:
&gt;<i>
</I>&gt;<i> Aside from all of the other issues, my vote would be to remove the ping 
</I>&gt;<i> attribute from the specification.  It is not a desirable feature.
</I>
While I understand this reaction, it should be noted that user tracking is 
widely practiced. It is currently done in ways that are significantly less 
user-friendly. I think we owe it to users to improve matters here.

Simply burying our heads in the sand about this issue doesn't help users.


&gt;<i> It is not sufficient for accurate user tracking (mandatory in the realm 
</I>&gt;<i> of referral payments)
</I>
It's as accurate if not more than the current mechanisms, and user 
preferences shouldn't take second place to accuracy in referral payments. 
While some companies may find greed overtakes their desire to address 
their users' concerns, I would hope this is not the norm on the ever more 
social-focused Web.


&gt;<i> would never be implemented consistently in practice
</I>
Why not?


&gt;<i> is trivial to defeat
</I>
What do you mean by &quot;defeat&quot;?


&gt;<i> is trivial to use for a DoS attack
</I>
How so?


&gt;<i> or mass fraud on the referral provider
</I>
Obviously the same signing mechanisms would have to be used with 
financial-related ping=&quot;&quot;s as are done today with ad tracking, but I don't 
see what would make ping=&quot;&quot; any less secure in this context.


&gt;<i> and is completely redundant to the current features provided by HTTP 
</I>&gt;<i> (cookies and referer)
</I>
I don't understand how either cookies or referers could be used here. 
Could you elaborate? That's certainly not how tracking is more commonly 
done today.


&gt;<i> and HTML (any embedded request).
</I>
I don't see how it is redundant with HTML; Web authors have repeatedly 
said that they have trouble making tracking systems that do not mangle the 
URL or slow down the request.


On Sun, 28 Oct 2007, Kornel Lesinski wrote:
&gt;<i> 
</I>&gt;<i> OTOH ping is all about creating side-effects, and only non-safe methods 
</I>&gt;<i> should cause them.
</I>
Indeed.


&gt;<i> I too was initially shocked that this might be a &quot;CSRF-heaven&quot;, but after a
</I>&gt;<i> second thought I think changing method won't noticeably improve security:
</I>&gt;<i>
</I>&gt;<i> * any website can automatically POST a form using script to any other 
</I>&gt;<i> website, and this can't be blocked without breaking lots of legitimate 
</I>&gt;<i> websites (sadly the worst offenders are banks providing easy-to- 
</I>&gt;<i> integrate payment gateways)
</I>&gt;<i>
</I>&gt;<i> * any website can trick user into clicking submit button that sends POST 
</I>&gt;<i> to another site (image buttons or CSS can disguise button as a link)
</I>&gt;<i>
</I>&gt;<i> * sites trying to filter-out any unsafe HTML from user input can either 
</I>&gt;<i> do it right (only allow known safe elements, attributes and their 
</I>&gt;<i> values) or are doomed to fail. There are sooo mind-numbingly many ways 
</I>&gt;<i> for injecting scripts (<A HREF="http://ha.ckers.org/xss.html">http://ha.ckers.org/xss.html</A>) that &lt;a ping&gt; isn't 
</I>&gt;<i> even interesting.
</I>&gt;<i>
</I>&gt;<i> * ping doesn't allow sending any payload. This severly limits usefulness 
</I>&gt;<i> of it for CSRF attacks and makes it easy for websites to protect against 
</I>&gt;<i> it.
</I>&gt;<i> 
</I>&gt;<i> Therefore I think using GET or HEAD for &lt;a ping&gt; won't make a difference 
</I>&gt;<i> -- in every case where &lt;a ping&gt; could be abused, other mechanism could 
</I>&gt;<i> be abused easier and with better (for attacker) results.
</I>&gt;<i> 
</I>&gt;<i> The root cause why using POST is unsafe is CSRF, and there should be a 
</I>&gt;<i> separate effort dealing with that (covering all cases, not only ping).
</I>
I agree with all of the above.


On Sun, 28 Oct 2007, Julian Reschke wrote:
&gt;<i> 
</I>&gt;<i> Following a link should not cause side effects the user (A) can be made 
</I>&gt;<i> accountable for.
</I>
Agreed. And nothing says that the user can be made accountable for POSTs 
made for ping=&quot;&quot; attributes. Just that the user _can't_ ever be made 
accountable for side-effects made in response to GETs.


&gt;<i> And, fortunately this is not the case here. The only party for which the 
</I>&gt;<i> side effect is relevant is the site owner (B), and potentially the party 
</I>&gt;<i> (C) the link points to.
</I>
And sometimes the user, e.g. when the tracking is used to improve search 
results in future searches, or to personalise a site to the user's habbits 
by promoting areas of a site that the user uses the most.


I hope this clarifies the issues surrounding the post=&quot;&quot; attribute. I 
understand that not everybody agrees on this, but when there are requests 
that are mutually exclusive, we can't make everyone happy. I hope that the 
explanations above address most of the concerns that were raised, but I 
understand that they might not. I would ask anyone who still disagrees 
with what the spec says to please consider the above explanations 
carefully; simply raising the same issue that has already been raised, 
with no new information or reasoning, is unlikely to result in a different 
reply. I try to base the design of the spec on the balance of all input, 
not on the volume of input.

Cheers,
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="055283.html">[whatwg] SRC Vs. HREF
</A></li>
	<LI>Next message: <A HREF="055290.html">[whatwg] Feedback on the ping=&quot;&quot; attribute (ISSUE-1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55289">[ date ]</a>
              <a href="thread.html#55289">[ thread ]</a>
              <a href="subject.html#55289">[ subject ]</a>
              <a href="author.html#55289">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
