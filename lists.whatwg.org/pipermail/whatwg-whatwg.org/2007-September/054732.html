<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &quot;complete&quot; DOM attribute (image elements)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22complete%22%20DOM%20attribute%20%28image%20elements%29&In-Reply-To=%3C3d1fb26e0709022035g1391c1kbec86fb704902220%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="054731.html">
   <LINK REL="Next"  HREF="054733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &quot;complete&quot; DOM attribute (image elements)</H1>
<!--htdig_noindex-->
    <B>Gavin Sharp</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%22complete%22%20DOM%20attribute%20%28image%20elements%29&In-Reply-To=%3C3d1fb26e0709022035g1391c1kbec86fb704902220%40mail.gmail.com%3E"
       TITLE="[whatwg] &quot;complete&quot; DOM attribute (image elements)">gavin.sharp at gmail.com
       </A><BR>
    <I>Sun Sep  2 20:35:56 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="054731.html">[whatwg] Parsing: Greater-than characters in doctype
</A></li>
        <LI>Next message: <A HREF="054733.html">[whatwg] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54732">[ date ]</a>
              <a href="thread.html#54732">[ thread ]</a>
              <a href="subject.html#54732">[ subject ]</a>
              <a href="author.html#54732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>(I searched the WHATWG and public-html mailing list archives to see
whether this issue had already been brought up, and couldn't find any
related discussion. Apologies if this has already been discussed.)

The current HTML 5 draft says:

&quot;The DOM attribute complete must return true if the user agent has
downloaded the image specified in the src attribute, and it is a valid
image, and false otherwise.&quot;

The &quot;and it is a valid image&quot; part seems to contradict the current
behavior of Safari 3.0.2, Opera 9.22, Firefox 2.0 and Firefox trunk
(all tested on Windows). These browser all give values of true for an
invalid image's &quot;complete&quot; property (see attached testcase or
<A HREF="http://people.mozilla.org/~gavin/test/img-complete.html">http://people.mozilla.org/~gavin/test/img-complete.html</A> ). Internet
Explorer 7 does seem to return false.

It appears this behavior was explicitly chosen in Mozilla, in bug
190561 (<A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=190561">https://bugzilla.mozilla.org/show_bug.cgi?id=190561</A>). I think
the arguments given in that bug might merit reconsideration; detection
of image existence is currently possible by other means, and I'm not
sure how much weight &quot;the Rhino Book&quot; should have in influencing
current DOM specs.

A similar issue also applies to the &quot;error&quot; event - IE and Safari seem
to fire &quot;error&quot; events on that testcase, while Firefox and Opera
don't. The fact that Safari fires an error event but still returns
&quot;true&quot; for &lt;img&gt;.complete seems like a bug.

I don't have any opinion about which behavior is best in each of these
cases, but I thought I'd highlight the potential compatibility issue.

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20070902/ef4f843d/attachment-0001.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20070902/ef4f843d/attachment-0001.html</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="054731.html">[whatwg] Parsing: Greater-than characters in doctype
</A></li>
	<LI>Next message: <A HREF="054733.html">[whatwg] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54732">[ date ]</a>
              <a href="thread.html#54732">[ thread ]</a>
              <a href="subject.html#54732">[ subject ]</a>
              <a href="author.html#54732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
