<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Comments on updated SQL API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Comments%20on%20updated%20SQL%20API&In-Reply-To=%3CPine.LNX.4.62.0709250404130.21662%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012550.html">
   <LINK REL="Next"  HREF="012565.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Comments on updated SQL API</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Comments%20on%20updated%20SQL%20API&In-Reply-To=%3CPine.LNX.4.62.0709250404130.21662%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Comments on updated SQL API">ian at hixie.ch
       </A><BR>
    <I>Mon Sep 24 21:07:11 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="012550.html">[whatwg] Comments on updated SQL API
</A></li>
        <LI>Next message: <A HREF="012565.html">[whatwg] Comments on updated SQL API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12566">[ date ]</a>
              <a href="thread.html#12566">[ thread ]</a>
              <a href="subject.html#12566">[ subject ]</a>
              <a href="author.html#12566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 22 Sep 2007, Maciej Stachowiak wrote:
&gt;<i> 
</I>&gt;<i> Sometimes it's useful to schedule multiple SQL queries in a single 
</I>&gt;<i> transaction at once, without a separate async callback for each. We 
</I>&gt;<i> discussed possible syntax something like the following:
</I>&gt;<i> 
</I>&gt;<i> void executeSql(in sequence&lt;Object&gt; sqlStatements, in SQLMultiCallback
</I>&gt;<i> callback);
</I>&gt;<i> 
</I>&gt;<i> sqlStatements is an Array where each element is either a string or an 
</I>&gt;<i> array. If a string, it is treated as a standalone statement. If an 
</I>&gt;<i> array, it the first element of that nested array is a statement with ? 
</I>&gt;<i> slots for parameter substitution and the remainder of the elements are 
</I>&gt;<i> arrays. SQLMultiCallback is like SQLCallback but gets an array of 
</I>&gt;<i> ResultSets. Example:
</I>&gt;<i> 
</I>&gt;<i> db.executeSql(['INSERT INTO &quot;db1&quot; (&quot;column1&quot;) VALUES (&quot;value1&quot;)',
</I>&gt;<i>                       ['UPDATE &quot;counter&quot; SET &quot;version&quot; = ? WHERE &quot;version&quot; =
</I>&gt;<i> ?', v + 1, v]],
</I>&gt;<i> function (resultArray) {
</I>&gt;<i>     // ... do stuff ...
</I>&gt;<i> });
</I>&gt;<i> 
</I>&gt;<i> Otherwise, there's no way to put multiple independent statements inside 
</I>&gt;<i> a transaction from top level.
</I>
I've not added this to this version of the spec, as it is basically just 
syntactic sugar, and it isn't immediately obvious how to make it easy to 
handle errors in such a scenario.

It would be interesting to see how people use executeSql() with multiple 
statements, to see what we can do to best address there needs.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012550.html">[whatwg] Comments on updated SQL API
</A></li>
	<LI>Next message: <A HREF="012565.html">[whatwg] Comments on updated SQL API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12566">[ date ]</a>
              <a href="thread.html#12566">[ thread ]</a>
              <a href="subject.html#12566">[ subject ]</a>
              <a href="author.html#12566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
