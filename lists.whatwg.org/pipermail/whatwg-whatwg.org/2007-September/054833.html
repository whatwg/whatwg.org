<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Form Serialization Idea
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form%20Serialization%20Idea&In-Reply-To=%3Cc9e12660709241323k16a864f9hb07ee8e612712030%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="054872.html">
   <LINK REL="Next"  HREF="054834.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Form Serialization Idea</H1>
<!--htdig_noindex-->
    <B>Garrett Smith</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form%20Serialization%20Idea&In-Reply-To=%3Cc9e12660709241323k16a864f9hb07ee8e612712030%40mail.gmail.com%3E"
       TITLE="[whatwg] Form Serialization Idea">dhtmlkitchen at gmail.com
       </A><BR>
    <I>Mon Sep 24 13:23:00 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="054872.html">[whatwg] [wf2] :read-write pseudoclass description issue
</A></li>
        <LI>Next message: <A HREF="054834.html">[whatwg] Compatibility problems with HTML5 Canvas spec.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54833">[ date ]</a>
              <a href="thread.html#54833">[ thread ]</a>
              <a href="subject.html#54833">[ subject ]</a>
              <a href="author.html#54833">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I've cross-posted. Bad. I'm putting this back on WHAT WG

It's a web-app thing, but related to HTML5. HTML 5 has two lists.

On 9/24/07, Subbu Allamaraju &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">subbu.allamaraju at gmail.com</A>&gt; wrote:
&gt;<i> Does this approach take the enctype into account? What is the behavior if a
</I>&gt;<i> given form can't be serialized for a given enctype?
</I>&gt;<i>
</I>Enctype could be used for serialization, I think.

If the enctype were text/plain, that would have to map to a default.
If the enctype were javascript:, then a user-defined serialization
technique could potentially be used (maybe for CSV excel-like data)

The get-form-data-to-javascript concept is addressed by Web Forms 2.0:

<A HREF="http://www.w3.org/Submission/web-forms2/#for-javascript">http://www.w3.org/Submission/web-forms2/#for-javascript</A>

WF 2.0 maps all enctype to a JSON-like object. (They should mention
the JSON RFC.)

This still doesn't make it easy to get a data set string like you'd
want for submission via XHR. It's somewhat useful, and could be
modified. Here's what WF 2 says about &lt;form action=&quot;javascript:;&quot;/&gt;,
They do this for ALL enctypes:

==============================================================
Encode the form data set by putting each name/value pair into a newly
created object using the names as attributes of that object and the
values as the values of those attributes. Execute the URI given by the
action attribute in the context of the document after having added the
aforementioned object to the start of the scope chain. Duplicate names
should cause the property to become an array, with each value
represented in the array. The response body is the return value of the
script.
==============================================================

&quot;Execute the URI given by the action attribute in the context of the
document after having added the aforementioned object to the start of
the scope chain&quot;

What is the name of the object?

Example:
&lt;form action=&quot;javascript:alert( aforementionedObject );&quot;&gt;&lt;input
name=&quot;foo&quot; value=&quot;bar&quot;/&gt;&lt;/form&gt;

And expect to get:
{
   &quot;foo&quot; : &quot;bar&quot;
}

Which would seem to match the JSON RFC. It seems like there should
also provision for whitespace/formatting. It's nice to see formatted,
indented code for debugging but not for production.

Adding aformentionedObject to the front of the scope chain would seem
to make it possible to then call aformentionedObject.toJSONString(
true ); iff aforementionedObject were an ecmascript object and not a
poorly duck-typed host object.

WF 2.0 provides no provision to get an encoded dataset as uri encoding.

WF 2.0 could be changed to handle uri-encoding of Data Set. If WF 2.0
were changed in such a way that would make it possible to run the
example and expect a result of

foo=bar

Garrett

&gt;<i> Cheers
</I>&gt;<i> Subbu
</I>-- 
Programming is a collaborative art.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="054872.html">[whatwg] [wf2] :read-write pseudoclass description issue
</A></li>
	<LI>Next message: <A HREF="054834.html">[whatwg] Compatibility problems with HTML5 Canvas spec.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54833">[ date ]</a>
              <a href="thread.html#54833">[ thread ]</a>
              <a href="subject.html#54833">[ subject ]</a>
              <a href="author.html#54833">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
