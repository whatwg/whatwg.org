<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Content type sniffing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Content%20type%20sniffing&In-Reply-To=%3C496AADF6.1060607%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="060392.html">
   <LINK REL="Next"  HREF="060421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Content type sniffing</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Content%20type%20sniffing&In-Reply-To=%3C496AADF6.1060607%40mit.edu%3E"
       TITLE="[whatwg] Content type sniffing">bzbarsky at MIT.EDU
       </A><BR>
    <I>Sun Jan 11 18:41:58 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="060392.html">[whatwg] Origins, reprise
</A></li>
        <LI>Next message: <A HREF="060421.html">[whatwg] Content type sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60412">[ date ]</a>
              <a href="thread.html#60412">[ thread ]</a>
              <a href="subject.html#60412">[ subject ]</a>
              <a href="author.html#60412">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I just noticed that section 2.7.1 of HTML5 says:

   Extensions must not be used for determining resource types
   for resources fetched over HTTP.

While I understand the reasons for this, there are certainly cases where 
this will break sites (basically those using HTTP 0.9, or later HTTP 
versions but not sending a content-type).  In particular, the HTML 
sniffing in the algorithm is very limited and wouldn't sniff this document:

   &lt;body&gt;Some text&lt;/body&gt;

as HTML.

Now this use case (no content-type at all) was pretty common when the 
unknown type sniffer in Gecko was written, but that was years ago.  Do 
we have any data on how common it is now?

-Boris

P.S.  Of course at the moment the sniffer in Gecko is used for more than 
just HTTP, and it looks like we'll need separate modes for things like 
HTTP and things like <A HREF="file://.">file://.</A>  I can live with that, though.  For the 
<A HREF="file://">file://</A> case detection of HTML in documents with no 
doctype/&lt;html&gt;/&lt;head&gt; is a must.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="060392.html">[whatwg] Origins, reprise
</A></li>
	<LI>Next message: <A HREF="060421.html">[whatwg] Content type sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60412">[ date ]</a>
              <a href="thread.html#60412">[ thread ]</a>
              <a href="subject.html#60412">[ subject ]</a>
              <a href="author.html#60412">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
