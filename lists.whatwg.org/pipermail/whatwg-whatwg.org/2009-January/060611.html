<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Section 5.7.3.3 Parsing cache manifests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Section%205.7.3.3%20Parsing%20cache%20manifests&In-Reply-To=%3CPine.LNX.4.62.0901272322480.14270%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="060608.html">
   <LINK REL="Next"  HREF="060612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Section 5.7.3.3 Parsing cache manifests</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Section%205.7.3.3%20Parsing%20cache%20manifests&In-Reply-To=%3CPine.LNX.4.62.0901272322480.14270%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Section 5.7.3.3 Parsing cache manifests">ian at hixie.ch
       </A><BR>
    <I>Tue Jan 27 15:25:40 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="060608.html">[whatwg] DnD Jacking
</A></li>
        <LI>Next message: <A HREF="060612.html">[whatwg] Section 5.7.3.3 Parsing cache manifests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60611">[ date ]</a>
              <a href="thread.html#60611">[ thread ]</a>
              <a href="subject.html#60611">[ subject ]</a>
              <a href="author.html#60611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 30 Dec 2008, Alexey Proskuryakov wrote:
&gt;<i>
</I>&gt;<i> 1. The signature of manifest is &quot;^&lt;BOM&gt;?CACHE MANIFEST[ \t]*$&quot;. Since 
</I>&gt;<i> arbitrary whitespace is allowed at the end, it is not possible to verify 
</I>&gt;<i> it with a simple binary comparison, yet it unnecessarily forbids e.g. 
</I>&gt;<i> comments at the end.
</I>&gt;<i> 
</I>&gt;<i> I suggest changing the signature to &quot;^&lt;BOM&gt;?CACHE MANIFEST&quot; - then it 
</I>&gt;<i> will be easier to verify, and it will be possible to add comments at the 
</I>&gt;<i> end. This is how we have it in WebKit now, and changing the check to the 
</I>&gt;<i> more strict HTML5 one may affect existing clients.
</I>
On Tue, 30 Dec 2008, timeless wrote:
&gt;<i>
</I>&gt;<i> this means we could never do: &quot;^&lt;BOM&gt;?CACHE MANIFEST2&quot;
</I>
On Tue, 30 Dec 2008, Alexey Proskuryakov wrote:
&gt;<i> 
</I>&gt;<i> If incompatible changes to the format are ever needed, we can change 
</I>&gt;<i> Content-Type.
</I>
On Wed, 31 Dec 2008, Jonas Sicking wrote:
&gt;<i>
</I>&gt;<i> Ugh, depending on the content-type for things like versioning would 
</I>&gt;<i> suck, people have a hard time getting that right even for HTML vs. GIF, 
</I>&gt;<i> so trying to use it for things as subtle as versions is bound to be too 
</I>&gt;<i> unreliable.
</I>&gt;<i>
</I>&gt;<i> But maybe just using a signature to detect that it's a manifest file of 
</I>&gt;<i> some version is enough, then manifest specific code can be used to 
</I>&gt;<i> choose which parser version to use.
</I>
On Wed, 31 Dec 2008, Alexey Proskuryakov wrote:
&gt;<i> 
</I>&gt;<i> My point is that the manifest format is quite extensible as it is, so 
</I>&gt;<i> only a very drastic change would require versioning.
</I>&gt;<i> 
</I>&gt;<i> But anyway, it will still be possible to change signatures: just use 
</I>&gt;<i> &quot;^&lt;BOM&gt;?EXTENDED CACHE MANIFEST&quot;, not &quot;^&lt;BOM&gt;?CACHE MANIFEST2&quot;.
</I>
I've changed the spec to only look for &quot;&lt;BOM&gt;?CACHE MANIFEST&quot; followed by 
either a space, a tab, an LF, or a CR.

The format is intended to be extensible so that we don't have to ever 
introduce versioning, but as Alexey points out, if necessary we can 
always use another magic line. By requiring a space if there is any data 
on the line, we can even use something like &quot;CACHE MANIFEST; V2&quot; or 
something like that.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="060608.html">[whatwg] DnD Jacking
</A></li>
	<LI>Next message: <A HREF="060612.html">[whatwg] Section 5.7.3.3 Parsing cache manifests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60611">[ date ]</a>
              <a href="thread.html#60611">[ thread ]</a>
              <a href="subject.html#60611">[ subject ]</a>
              <a href="author.html#60611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
