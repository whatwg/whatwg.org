<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Content type sniffing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Content%20type%20sniffing&In-Reply-To=%3C496B67A7.7070809%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="060422.html">
   <LINK REL="Next"  HREF="060429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Content type sniffing</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Content%20type%20sniffing&In-Reply-To=%3C496B67A7.7070809%40mit.edu%3E"
       TITLE="[whatwg] Content type sniffing">bzbarsky at MIT.EDU
       </A><BR>
    <I>Mon Jan 12 07:54:15 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="060422.html">[whatwg] Content type sniffing
</A></li>
        <LI>Next message: <A HREF="060429.html">[whatwg] Content type sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60428">[ date ]</a>
              <a href="thread.html#60428">[ thread ]</a>
              <a href="subject.html#60428">[ subject ]</a>
              <a href="author.html#60428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Adam Barth wrote:
&gt;<i> Extensions are bad news for content sniffing because they can often be
</I>&gt;<i> chosen by the attacker.  For example, suppose user-uploaded content is
</I>&gt;<i> can be downloaded at:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://example.com/download.php">http://example.com/download.php</A>
</I>&gt;<i> 
</I>&gt;<i> In most PHP configurations, the attacker can choose whatever file
</I>&gt;<i> extension he likes by directing the user's browser to:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://example.com/download.php/whatever.foo">http://example.com/download.php/whatever.foo</A>
</I>&gt;<i> 
</I>&gt;<i> And the PHP script will happily run.
</I>
Right, I understand that.

&gt;<i> Yes.  We do have lots of data from opt-in user metrics from Chrome.
</I>&gt;<i> Here is a somewhat recent summary:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://crypto.stanford.edu/~abarth/research/html5/content-sniffing/">https://crypto.stanford.edu/~abarth/research/html5/content-sniffing/</A>
</I>
I'm not quite sure what to make of this, actually.  Specifically, where 
is the &quot;22.19%&quot; number for &quot;HTML Tags&quot; coming from?  22.19% of what? 
The magic numbers stuff actually adds up to 100%, but of what?

&gt;<i> To address your particular concern, &lt;body occurs 6899 times less often
</I>&gt;<i> than &lt;script on Web content that lacks a Content-Type (or has an bogus
</I>&gt;<i> Content-Type like */*), assuming I did my arithmetic correctly.
</I>
OK, that's good to know.

&gt;<i> I'm sympathetic to adding more HTML tags to the list, but I'm not sure
</I>&gt;<i> how far down the tail we should go.  In Chrome, we went for 99.999%
</I>&gt;<i> compatibility, which might be a bit far down the tail.
</I>
Doesn't seem that way to me, given the number of web pages out there.

&gt;<i> <A HREF="http://src.chromium.org/viewvc/chrome/trunk/src/net/base/mime_sniffer.cc?view=markup">http://src.chromium.org/viewvc/chrome/trunk/src/net/base/mime_sniffer.cc?view=markup</A>
</I>
Ah, ok.  The relevant Gecko code is 
&lt;<A HREF="http://hg.mozilla.org/mozilla-central/annotate/9f82199fdb9c/netwerk/streamconv/converters/nsUnknownDecoder.cpp#l477">http://hg.mozilla.org/mozilla-central/annotate/9f82199fdb9c/netwerk/streamconv/converters/nsUnknownDecoder.cpp#l477</A>&gt;. 
I'd probably be fine with trimming that list down a bit, but I'm not 
quite sure what the downsides of having more tags in it are here.

-Boris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="060422.html">[whatwg] Content type sniffing
</A></li>
	<LI>Next message: <A HREF="060429.html">[whatwg] Content type sniffing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60428">[ date ]</a>
              <a href="thread.html#60428">[ thread ]</a>
              <a href="subject.html#60428">[ subject ]</a>
              <a href="author.html#60428">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
