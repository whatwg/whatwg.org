<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal: Add HTMLElement.innerText
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20Add%20HTMLElement.innerText&In-Reply-To=%3CAANLkTinX_zr8JmOda1nGKZeE%2BM_-Hkrz9Urm8-bxmBVT%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070203.html">
   <LINK REL="Next"  HREF="070208.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal: Add HTMLElement.innerText</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%3A%20Add%20HTMLElement.innerText&In-Reply-To=%3CAANLkTinX_zr8JmOda1nGKZeE%2BM_-Hkrz9Urm8-bxmBVT%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal: Add HTMLElement.innerText">w3c at adambarth.com
       </A><BR>
    <I>Sat Aug 14 15:39:46 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070203.html">[whatwg] Please (re)consider explicitly allowing marking up speaker names with &lt;cite&gt; (new information)
</A></li>
        <LI>Next message: <A HREF="070208.html">[whatwg] Proposal: Add HTMLElement.innerText
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70207">[ date ]</a>
              <a href="thread.html#70207">[ thread ]</a>
              <a href="subject.html#70207">[ subject ]</a>
              <a href="author.html#70207">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>== Use Case ==

It's common that a web page has a string of untrusted characters
(e.g., received via cross-site XMLHttpRequest or postMessage) that it
wishes to display to the user.  The page wants to display the string
using a simple, secure API.

== Workarounds ==

Currently, the path of least resistance is to assign the string to
HTMLElement.innerHTML.  However, that is insecure because the
untrusted string can execute script via that API.

It's possible to display the string securely using the following pattern:

elmt.appendChild(document.createTextNode(untrusted_string));

However, that pattern is more cumbersome than &quot;elmt.innerHTML =
untrusted_string&quot;, so developers end up writing insecure code.

== Proposal ==

We should expose a property on HTMLElement similar to innerHTML called
innerText.  When assigning a string to innerText, the string is placed
in a text node (and is not parsed as HTML).

== Deployment ==

HTMLElement.innerText appears to be deployed in Internet Explorer,
Chrome, Safari, and Opera.  However, the API is missing from Firefox
and the HTML5 spec.  (Note the existing implementations of the API
seem to do some work around newline normalization, which we should
consider when adding the API to the specification.)

Kind regards,
Adam

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070203.html">[whatwg] Please (re)consider explicitly allowing marking up speaker names with &lt;cite&gt; (new information)
</A></li>
	<LI>Next message: <A HREF="070208.html">[whatwg] Proposal: Add HTMLElement.innerText
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70207">[ date ]</a>
              <a href="thread.html#70207">[ thread ]</a>
              <a href="subject.html#70207">[ subject ]</a>
              <a href="author.html#70207">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
