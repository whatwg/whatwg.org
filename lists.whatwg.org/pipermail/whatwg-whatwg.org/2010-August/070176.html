<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] (deferred) script tags with document.write built in
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%28deferred%29%20script%20tags%20with%20document.write%20built%20in&In-Reply-To=%3C4C63C6AF.9010505%40yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070174.html">
   <LINK REL="Next"  HREF="070182.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] (deferred) script tags with document.write built in</H1>
<!--htdig_noindex-->
    <B>Brett Zamir</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%28deferred%29%20script%20tags%20with%20document.write%20built%20in&In-Reply-To=%3C4C63C6AF.9010505%40yahoo.com%3E"
       TITLE="[whatwg] (deferred) script tags with document.write built in">brettz9 at yahoo.com
       </A><BR>
    <I>Thu Aug 12 03:02:23 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070174.html">[whatwg] (deferred) script tags with document.write built in
</A></li>
        <LI>Next message: <A HREF="070182.html">[whatwg] (deferred) script tags with document.write built in
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70176">[ date ]</a>
              <a href="thread.html#70176">[ thread ]</a>
              <a href="subject.html#70176">[ subject ]</a>
              <a href="author.html#70176">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>  On 8/12/2010 4:19 PM, Ian Hickson wrote:
&gt;<i> On Sat, 24 Jul 2010, Brett Zamir wrote:
</I>&gt;&gt;<i> Might there be a way that&lt;script/&gt;  tags could add an attribute which
</I>&gt;&gt;<i> combined the meaning of both &quot;defer&quot; and &quot;document.write&quot;, whereby the
</I>&gt;&gt;<i> last statement was evaluated to a string, but ideally treated, as far as
</I>&gt;&gt;<i> the DOM, with the string being parsed and replacing the containing
</I>&gt;&gt;<i> script node.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For example:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;script  write&gt;
</I>&gt;&gt;<i>      '&lt;span  onmouseover=&quot;alert(\''+(new Date())+'\')&quot;&gt;I\'ve got the
</I>&gt;&gt;<i> date&lt;/span&gt;'
</I>&gt;&gt;<i> &lt;/script&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If E4X were supported (since we otherwise lamentably have no PHP-style
</I>&gt;&gt;<i> HEREDOC syntax in JavaScript to minimize the few warts above), allowing
</I>&gt;&gt;<i> this to be used could be especially convenient:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;script  write&gt;
</I>&gt;&gt;<i>      &lt;span  onmouseover=&quot;alert(new Date())&quot;&gt;I've got the date&lt;/span&gt;
</I>&gt;&gt;<i> &lt;/script&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (Maybe even a new&lt;write/&gt;  tag could be made to do this exclusively and
</I>&gt;&gt;<i> more succinctly.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I chose &quot;defer&quot; as the default behavior so as to be XHTML-friendly, to
</I>&gt;&gt;<i> allow convenient reference by default to other DOM elements without the
</I>&gt;&gt;<i> need for adding a listener, and the more appealing default behavior of
</I>&gt;&gt;<i> not blocking other content from appearing.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Since it doesn't seem that XQuery support will be making it into
</I>&gt;&gt;<i> browsers anytime soon, it would be nice to be able to emulate its clean
</I>&gt;&gt;<i> template-friendly declarative style, dropping the need to find and
</I>&gt;&gt;<i> append to elements, etc..
</I>&gt;<i> I don't really see what this proposal would solve. Can you elaborate on
</I>&gt;<i> what this would allow that can't be done today?
</I>
It would simplify and beautify the addition of dynamic content and 
encourage separation of business logic from design logic (at least for 
content displayed on initial load).

For example, using proposed shorter form &lt;write/&gt;, one might do this:

&lt;script&gt;
    // business logic here
    var localizedMsg = &quot;I've got the date: &quot;;
    var businessLogicDate = new Date();
&lt;/script&gt;
&lt;write&gt;
     &quot;&lt;span&gt;&quot;+localizedMsg.toUpperCase() + businessLogicDate + &quot;&lt;/span&gt;&quot;
&lt;/write&gt;

It would simplify for those with a frequent need for template pages. The 
template(s) expressed by &lt;write/&gt; could succinctly express the design 
logic without need for document.write() used everywhere. The 
semantically named tag would also distinguish such templates from other 
scripts.

For XHTML, it would be especially useful in being able to offer 
document.write functionality (since such a tag would be defined as 
deferring execution until the rest of the page had loaded). No need for 
onload handlers, no need for adding and referencing IDs in order to find 
the element, and no need for DOM appending methods in order to provide 
dynamic content.

Brett


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070174.html">[whatwg] (deferred) script tags with document.write built in
</A></li>
	<LI>Next message: <A HREF="070182.html">[whatwg] (deferred) script tags with document.write built in
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70176">[ date ]</a>
              <a href="thread.html#70176">[ thread ]</a>
              <a href="subject.html#70176">[ subject ]</a>
              <a href="author.html#70176">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
