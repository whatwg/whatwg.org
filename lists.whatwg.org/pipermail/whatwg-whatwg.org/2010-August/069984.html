<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML resource packages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20resource%20packages&In-Reply-To=%3CAANLkTikY5oWZD11%2BF-Nbm32j72nigVQuyDykh6d8oyfp%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069873.html">
   <LINK REL="Next"  HREF="069988.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML resource packages</H1>
<!--htdig_noindex-->
    <B>Aryeh Gregor</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20resource%20packages&In-Reply-To=%3CAANLkTikY5oWZD11%2BF-Nbm32j72nigVQuyDykh6d8oyfp%40mail.gmail.com%3E"
       TITLE="[whatwg] HTML resource packages">Simetrical+w3c at gmail.com
       </A><BR>
    <I>Fri Aug  6 14:17:49 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="069873.html">[whatwg] HTML resource packages
</A></li>
        <LI>Next message: <A HREF="069988.html">[whatwg] HTML resource packages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69984">[ date ]</a>
              <a href="thread.html#69984">[ thread ]</a>
              <a href="subject.html#69984">[ subject ]</a>
              <a href="author.html#69984">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Aug 3, 2010 at 8:31 PM, Justin Lebar &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">justin.lebar at gmail.com</A>&gt; wrote:
&gt;<i> We at Mozilla are hoping to ship HTML resource packages in Firefox 4,
</I>&gt;<i> and we wanted to get the WhatWG's feedback on the feature.
</I>&gt;<i>
</I>&gt;<i> For the impatient, the spec is here:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;<A HREF="http://people.mozilla.org/~jlebar/respkg/">http://people.mozilla.org/~jlebar/respkg/</A>
</I>
I have some concerns about caching behavior here, which I've mentioned
before.  Consider a site that has a landing page that has lots of
first-time viewers.  To accelerate that page view, you might want to
add a resource package containing all the assets on the page, to speed
up views in the cold cache case.  Some of those assets will be reused
on other pages, and some will not.

When the user navigates to another page, what's supposed to happen?
If you hadn't used resource packages at all, they would have a hot
cache, so they'd get all the shared assets on every subsequent page
view for free.  But now they don't -- instead of the first view being
slow, it's the second view, when they leave the landing page.  This
isn't a big improvement.

So if resource packages don't share caches, you need to either give up
on caching, put a given file only in one resource package on your
whole site.  The latter is not practical if pages use small, fairly
random subsets of your assets and it's not feasible to package them
all on every page view.  Think avatars on a web forum: you might have
20 different avatars displayed per page, from a pool of tens of
thousands or more.  Do you have to decide between not using resource
packages and not getting any caching?

You've said before that your goal in this requirement is
predictability -- if there's an inconsistency between different
resource packages or between a resource package and the real file, you
don't want users to get different results depending on what order they
visit the pages in.  This is fair enough, but I'm worried that the
caching problems this approach causes will make it more of a hindrance
than a benefit for a wide class of use-cases.  There's some possible
inconsistency anyway whenever caching is permitted at all, because if
the page provides incorrect caching headers, the UA might have an
out-of-date copy.  Also, different browsers will be inconsistent too,
until all UAs in common use have implemented resource packages -- some
will use the packaged file and some the real file.  Is the extra
inconsistency from letting the caches mix really too much to ask for
the cacheability benefits?  I don't think so.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069873.html">[whatwg] HTML resource packages
</A></li>
	<LI>Next message: <A HREF="069988.html">[whatwg] HTML resource packages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69984">[ date ]</a>
              <a href="thread.html#69984">[ thread ]</a>
              <a href="subject.html#69984">[ subject ]</a>
              <a href="author.html#69984">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
