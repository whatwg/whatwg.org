<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Adding ECMAScript 5 array extras to HTMLCollection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Adding%20ECMAScript%205%20array%20extras%20to%20HTMLCollection&In-Reply-To=%3CED4A5698-A8F6-416E-AA8A-5C98F2D5A99A%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069765.html">
   <LINK REL="Next"  HREF="069785.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Adding ECMAScript 5 array extras to HTMLCollection</H1>
<!--htdig_noindex-->
    <B>Oliver Hunt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Adding%20ECMAScript%205%20array%20extras%20to%20HTMLCollection&In-Reply-To=%3CED4A5698-A8F6-416E-AA8A-5C98F2D5A99A%40apple.com%3E"
       TITLE="[whatwg] Adding ECMAScript 5 array extras to HTMLCollection">oliver at apple.com
       </A><BR>
    <I>Mon Aug  2 09:51:22 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="069765.html">[whatwg] Adding ECMAScript 5 array extras to HTMLCollection
</A></li>
        <LI>Next message: <A HREF="069785.html">[whatwg] Adding ECMAScript 5 array extras to HTMLCollection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69773">[ date ]</a>
              <a href="thread.html#69773">[ thread ]</a>
              <a href="subject.html#69773">[ subject ]</a>
              <a href="author.html#69773">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Aug 2, 2010, at 7:36 AM, And Clover wrote:

&gt;<i> On 07/30/2010 06:43 AM, Oliver Hunt wrote:
</I>&gt;&gt;<i> all array functions defined in ES5 are &quot;generic&quot; in that they work
</I>&gt;&gt;<i> over any array-like object.
</I>&gt;<i> 
</I>&gt;<i> They're guaranteed to work over any array-like native JavaScript object. They're *not* guaranteed to work on host objects like the various node lists.
</I>
Uhhh, I have no idea what you're talking about -- there are no type checks in any of the array prototype functions, they all operate in terms of property access alone, all the methods we're talking about basically start out like this:

1.	Let O be the result of calling ToObject passing the this value as the argument. 
2.	Let lenValue be the result of calling the [[Get]] internal method of O with the argument &quot;length&quot;. 
3.	Let len be ToUint32(lenValue). 
4.	If IsCallable(callbackfn) is false, throw a TypeError exception. 
5.	If thisArg was supplied, let T be thisArg; else let T be undefined. 
6.	Let k be 0.
7.	Repeat, while k &lt; len
 ....

Eg. &quot;array-like&quot; in the context of ES5 should be interpreted as &quot;has a property named 'length', the array methods will work on any type.

&gt;<i> 
</I>&gt;<i> FWIW in practice `Array.prototype.*.call(htmlcollection)` does work on the modern desktop browsers except for IE.
</I>&gt;<i> 
</I>&gt;<i> It would be possible to specify that the native-JS object guarantee should also extend to node lists. This would allow fast browser implementations of the array-like methods to be used without having to copy to a new Array. However this would still leave the method of calling them a little ugly.
</I>
As above there is no question of it being possible -- the spec behaviour makes no exceptions for host vs. native object types.  If IE has a bug, then IE has a bug, that doesn't change the spec.

--Oliver


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069765.html">[whatwg] Adding ECMAScript 5 array extras to HTMLCollection
</A></li>
	<LI>Next message: <A HREF="069785.html">[whatwg] Adding ECMAScript 5 array extras to HTMLCollection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69773">[ date ]</a>
              <a href="thread.html#69773">[ thread ]</a>
              <a href="subject.html#69773">[ subject ]</a>
              <a href="author.html#69773">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
