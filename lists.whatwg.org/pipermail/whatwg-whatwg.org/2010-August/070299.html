<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: Discussing WebSRT and alternatives/improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vhql3pxzsr6mfa%40philip-pc.gothenburg.osa%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070273.html">
   <LINK REL="Next"  HREF="070308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: Discussing WebSRT and alternatives/improvements</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vhql3pxzsr6mfa%40philip-pc.gothenburg.osa%3E"
       TITLE="[whatwg] Fwd: Discussing WebSRT and alternatives/improvements">philipj at opera.com
       </A><BR>
    <I>Fri Aug 20 05:53:42 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070273.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
        <LI>Next message: <A HREF="070308.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70299">[ date ]</a>
              <a href="thread.html#70299">[ thread ]</a>
              <a href="subject.html#70299">[ subject ]</a>
              <a href="author.html#70299">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 18 Aug 2010 00:42:04 +0200, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> On Thu, Aug 12, 2010 at 6:09 PM, Philip J&#228;genstedt  
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Thu, 12 Aug 2010 02:11:55 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  On Thu, Aug 12, 2010 at 1:26 AM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  On Wed, 11 Aug 2010 15:38:32 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  On Wed, Aug 11, 2010 at 10:30 PM, Philip J&#228;genstedt  
</I>&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  On Wed, 11 Aug 2010 01:43:01 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>   Going with HTML in the cues, we either have to drop voices and  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> inner
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> timestamps or invent new markup, as HTML can't express either. I  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> don't
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> think
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> either of those are really good solutions, so right now I'm not
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> convinced
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> that reusing the innerHTML parser is a good way forward.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I don't see a need for the voices - they already have markup in HTML,
</I>&gt;&gt;&gt;&gt;&gt;<i> see
</I>&gt;&gt;&gt;&gt;&gt;<i> above. But I do wonder about the timestamps. I'd much rather keep the
</I>&gt;&gt;&gt;&gt;&gt;<i> innerHTML parser if we can, but I don't know enough about how the
</I>&gt;&gt;&gt;&gt;&gt;<i> timestamps
</I>&gt;&gt;&gt;&gt;&gt;<i> could be introduced in a non-breakable manner. Maybe with a data-
</I>&gt;&gt;&gt;&gt;&gt;<i> attribute?
</I>&gt;&gt;&gt;&gt;&gt;<i> Maybe &lt;span data-t=&quot;00:00:02.100&quot;&gt;...&lt;/span&gt;?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> data- attributes are reserved for use by scripts on the same page,  
</I>&gt;&gt;&gt;&gt;<i> but we
</I>&gt;&gt;&gt;&gt;<i> *could* of course introduce new elements or attributes for this  
</I>&gt;&gt;&gt;&gt;<i> purpose.
</I>&gt;&gt;&gt;&gt;<i> However, adding features to HTML only for use in WebSRT seems a bit  
</I>&gt;&gt;&gt;&gt;<i> odd.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'd rather avoid adding features to HTML only for WebSRT. Ian turned  
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> &lt;timestamps&gt; into ProcessingInstructions
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/websrt.html#websrt-cue-text-dom-construction-rules">http://www.whatwg.org/specs/web-apps/current-work/websrt.html#websrt-cue-text-dom-construction-rules</A>
</I>&gt;&gt;&gt;<i> .
</I>&gt;&gt;&gt;<i> Could we introduce something like &lt;?t at=&quot;00:00:02.100&quot;?&gt; without
</I>&gt;&gt;&gt;<i> breaking
</I>&gt;&gt;&gt;<i> the innerHTML parser?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It appears that the innerHTML parser in at least Opera and Firefox  
</I>&gt;&gt;<i> handles
</I>&gt;&gt;<i> PIs in some manner, see test at &lt;
</I>&gt;&gt;<i> <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/587">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/587</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Chrome and Safari don't though.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However, it isn't valid HTML, validator.nu says &quot;Saw &lt;?. Probable cause:
</I>&gt;&gt;<i> Attempt to use an XML processing instruction in HTML. (XML processing
</I>&gt;&gt;<i> instructions are not supported in HTML.)&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yeah, so the only conforming solution is probably to use CSS3
</I>&gt;<i> transition-delay property. That may not be the most elegant solution,  
</I>&gt;<i> but it
</I>&gt;<i> works.
</I>
So, it seems clear that in order to use an HTML parser we have to  
sacrifice some features or make them more verbose. The whole of the WebSRT  
parser isn't very big or complicated, so I don't think implementation cost  
is a strong argument for reusing the HTML parser, especially since at  
least the timing syntax needs a separate parser.

&gt;&gt;<i>  OTOH, if you say that it will take a short time for popular software to
</I>&gt;&gt;&gt;<i> start ignoring the extra WebSRT stuff, well, in this case they have
</I>&gt;&gt;&gt;<i> implemented WebSRT support in its most basic form and then there is no
</I>&gt;&gt;&gt;<i> problem any more anyway. They will then accept the new files and their
</I>&gt;&gt;&gt;<i> extensions and mime types and there is explicit support rather than the
</I>&gt;&gt;&gt;<i> dodgy question of whether these SRT files will provide crap or not.  
</I>&gt;&gt;&gt;<i> During
</I>&gt;&gt;&gt;<i> a
</I>&gt;&gt;&gt;<i> transition period, we will make all software that currently supports  
</I>&gt;&gt;&gt;<i> SRT
</I>&gt;&gt;&gt;<i> become unstable and unreliable. I don't think that's the right way to  
</I>&gt;&gt;&gt;<i> deal
</I>&gt;&gt;&gt;<i> with an existing ecosystem. Coming in as the big brother, claiming  
</I>&gt;&gt;&gt;<i> their
</I>&gt;&gt;&gt;<i> underspecified format, throwing in incompatible features, and saying:  
</I>&gt;&gt;&gt;<i> just
</I>&gt;&gt;&gt;<i> deal with it. It's just not the cavalier thing to do.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I agree that it seems (and is) quite selfish, but am not sure the
</I>&gt;&gt;<i> alternatives are any better, see below. About &quot;unstable and  
</I>&gt;&gt;<i> unreliable&quot;, I
</I>&gt;&gt;<i> think there are really only two kind of errors we will see:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. Some cues being ignored due to trailing settings after the timestamp.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Some files may decide at this point that the files are not conformant and
</I>&gt;<i> fail.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2. Markup being interpreted as plain text.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Both already can and do happen with existing use of SRT, which is  
</I>&gt;&gt;<i> annoying
</I>&gt;&gt;<i> but better than no subtitles at all.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It's a bit more than just annoying to users. If there are automated
</I>&gt;<i> processes involved that print that stuff on tape for example, you can  
</I>&gt;<i> burn
</I>&gt;<i> through a lot of material and money before realising that your input  
</I>&gt;<i> files
</I>&gt;<i> are &quot;broken&quot; and if you cannot get software support for the new files
</I>&gt;<i> implemented, you may need to implement costly manual checking of the  
</I>&gt;<i> files.
</I>
SRT as it is today can and does contain broken timestamps, missing  
linebreaks and at least &lt;i&gt;, &lt;b&gt;, &lt;u&gt; and &lt;font ...&gt; markup, some of which  
is broken. If anyone is able to to rely on their input as being  
well-formed enough as to be put through automatic but costly processes,  
they'd have to have very good control of where their input comes from. I  
can't see how WebSRT would change that.

&gt;&gt;<i> The core &quot;problem&quot; is that WebSRT is far too compatible with existing  
</I>&gt;&gt;<i> SRT
</I>&gt;&gt;<i> usage. Regardless of the file extension and MIME type used, it's quite
</I>&gt;&gt;<i> improbable that anyone will have different parsers for the same format.  
</I>&gt;&gt;<i> Once
</I>&gt;&gt;<i> media players have been forced to handle the extra markup in WebSRT  
</I>&gt;&gt;<i> (e.g. by
</I>&gt;&gt;<i> ignoring it, as many already do) the two formats will be the same, and  
</I>&gt;&gt;<i> using
</I>&gt;&gt;<i> WebSRT markup in .srt files will just work, so that's what people will  
</I>&gt;&gt;<i> do.
</I>&gt;&gt;<i> We may avoid being seen as arrogant format-hijackers, but the end  
</I>&gt;&gt;<i> result is
</I>&gt;&gt;<i> two extensions and two different MIME types that mean exactly the same
</I>&gt;&gt;<i> thing.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It actually burns down to the question: do we want the simple SRT format  
</I>&gt;<i> to
</I>&gt;<i> survive as its own format and be something that people can rely upon as  
</I>&gt;<i> not
</I>&gt;<i> having &quot;weird stuff&quot; in it - or do we not. I believe that it's important
</I>&gt;<i> that it survives. WebSRT can have absolutely anything in it, including  
</I>&gt;<i> code
</I>&gt;<i> and binary data, even if that stuff would not be interpreted in a  
</I>&gt;<i> browser,
</I>&gt;<i> but handed on to the JavaScript API for a JavaScript routine to do  
</I>&gt;<i> something
</I>&gt;<i> with it. It is a great extensible platform. But the advantage of SRT is  
</I>&gt;<i> that
</I>&gt;<i> it is simple and reliably simple. We completely remove this option by
</I>&gt;<i> stealing the format.
</I>
I've collected some statistics on existing SRT content that I intend to  
publish soonish. For now, I'll just note that &gt;50% contain some form of  
markup. Adding to this various ways in which the files could be broken, it  
seems to me that SRT as deployed is neither really simple nor reliable.  
Private use of SRT is of course simple and reliable, but that will be true  
in the future too.

Aside: WebSRT can't contain binary data, only UTF-8 encoded text.

&gt;&gt;<i>  Since browser vendors get all the benefits and none of the problems it
</I>&gt;&gt;&gt;&gt;<i> would be a mistake to only listen to us, of course. It might be
</I>&gt;&gt;&gt;&gt;<i> worthwhile
</I>&gt;&gt;&gt;&gt;<i> contacting developers of applications like VLC, Totem or MPlayer and  
</I>&gt;&gt;&gt;&gt;<i> ask
</I>&gt;&gt;&gt;&gt;<i> precisely how annoyed they would be if suddenly one day they had to  
</I>&gt;&gt;&gt;&gt;<i> tweak
</I>&gt;&gt;&gt;&gt;<i> their SRT parser because of WebSRT.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Some of them have already spoken:
</I>&gt;&gt;&gt;<i> <A HREF="http://forum.doom9.org/showthread.php?p=1396576">http://forum.doom9.org/showthread.php?p=1396576</A> &quot;Extending SRT is a  
</I>&gt;&gt;&gt;<i> very
</I>&gt;&gt;&gt;<i> bad
</I>&gt;&gt;&gt;<i> idea&quot; etc etc. Also, I've had feedback from other subtitle  
</I>&gt;&gt;&gt;<i> professionals
</I>&gt;&gt;&gt;<i> that are also against extending SRT, the main reasons being to break
</I>&gt;&gt;&gt;<i> existing working software environments.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The only way to really avoid messing with the ecosystem is to invent a
</I>&gt;&gt;<i> completely new format. The choice is between something that won't work  
</I>&gt;&gt;<i> at
</I>&gt;&gt;<i> all in non-browsers and something that will mostly work.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If you look at it realistically, we *are* inventing a completely new  
</I>&gt;<i> format.
</I>&gt;<i> WebSRT only on the surface has some resemblance with SRT. When you dig
</I>&gt;<i> deeper, it is a completely different format with different aims and
</I>&gt;<i> applications. Yes, it covers all the SRT aims and applications, but it  
</I>&gt;<i> does
</I>&gt;<i> so much more! Only some of it will work in non-browsers, others will  
</I>&gt;<i> utterly
</I>&gt;<i> fail and will completely disrupt an already working ecosystem. I think it
</I>&gt;<i> may even have a really bad effect if we introduce WebSRT as SRT in that
</I>&gt;<i> authoring software will refrain from implementing support for the richer
</I>&gt;<i> features in order not to disrupt the existing software ecosystem. In the  
</I>&gt;<i> end
</I>&gt;<i> we might end up with a lot of unsupported features in WebSRT an no real
</I>&gt;<i> progress. I much prefer having progress with a transition period with
</I>&gt;<i> conscious decisions to support the extra features.
</I>
As long as WebSRT is similar enough to SRT that software developers can  
use the same parser for both, they will effectively become the same  
format. If we define WebSRT in a way that can handle &gt;99% of existing  
content and degrade gracefully (enough) when using new features in old  
software, it seems reasonable to do. If lots of software developers cry  
foul, then perhaps we should reconsider. It seems to me, though, that  
actually researching and defining a good algorithm for parsing SRT would  
be of use to others than just browsers.

I'll be back with some statistics this weekend, hopefully.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070273.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
	<LI>Next message: <A HREF="070308.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70299">[ date ]</a>
              <a href="thread.html#70299">[ thread ]</a>
              <a href="subject.html#70299">[ subject ]</a>
              <a href="author.html#70299">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
