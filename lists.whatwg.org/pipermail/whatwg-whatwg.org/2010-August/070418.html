<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;video&gt; loading algorithms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20loading%20algorithms&In-Reply-To=%3CAANLkTi%3DebfUNgE6VM4H5Rbg%3Dy44dticGuWsrBHuM51tK%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070361.html">
   <LINK REL="Next"  HREF="069756.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;video&gt; loading algorithms</H1>
<!--htdig_noindex-->
    <B>Silvia Pfeiffer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20loading%20algorithms&In-Reply-To=%3CAANLkTi%3DebfUNgE6VM4H5Rbg%3Dy44dticGuWsrBHuM51tK%40mail.gmail.com%3E"
       TITLE="[whatwg] &lt;video&gt; loading algorithms">silviapfeiffer1 at gmail.com
       </A><BR>
    <I>Wed Aug 25 07:47:40 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070361.html">[whatwg] &lt;video&gt; loading algorithms
</A></li>
        <LI>Next message: <A HREF="069756.html">[whatwg] Please consider dropping the &quot;sandbox&quot; attribute from the	&lt;iframe&gt; element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70418">[ date ]</a>
              <a href="thread.html#70418">[ thread ]</a>
              <a href="subject.html#70418">[ subject ]</a>
              <a href="author.html#70418">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Aug 24, 2010 at 7:43 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:

&gt;<i> On Tue, 24 Aug 2010 10:24:35 +0200, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  Given that, it wouldn't be a big problem to let modification of src
</I>&gt;&gt;&gt;<i> attributes on source elements trigger resource selection, you won't get
</I>&gt;&gt;&gt;<i> the 3-2-1 problem I mentioned earlier.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't really understand what use case this would solve.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Neither do I, I'm just saying that it's easy to do if necessary.
</I>

I was running through all the properties that can possibly be changed in
JavaScript and checking which effects they have in all browsers, i.e. what
events they call etc. I wasn't aware that authors are discouraged from
changing @src on &lt;source&gt;.


On Tue, Aug 24, 2010 at 6:24 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Sat, 24 Jul 2010, Silvia Pfeiffer wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There is definitely a spec bug, because different locations of the spec
</I>&gt;<i> &gt; say diverging things.
</I>&gt;<i>
</I>&gt;<i> For the record, when the spec contradicts itself, and one part is
</I>&gt;<i> normative (such as the algorithm here) and another is non-normative (such
</I>&gt;<i> as the definitions here) then always assume the normative part is wrong. I
</I>&gt;<i> often forget to update the non-normative parts.
</I>&gt;<i>
</I>
You mean: the normative part is right, I assume?
Thanks for this clarification - I was indeed unaware of the history of
changes.


 On Mon, 26 Jul 2010, Silvia Pfeiffer wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; I now wonder about the intention of play() (and also of pause()). As I
</I>&gt;<i> &gt; understood it, they are both meant to reload the media resource if
</I>&gt;<i> &gt; @currentSrc has changed, similar to what load() is supposed to do.
</I>&gt;<i>
</I>&gt;<i> I do not believe that has ever been the intent.
</I>&gt;<i>
</I>

Both descriptions of play() and pause() have a &quot;loading the media resource&quot;
in them.
media . play&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete.html#dom-media-play">http://www.whatwg.org/specs/web-apps/current-work/complete.html#dom-media-play</A>&gt;
()

Sets the paused&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete.html#dom-media-paused">http://www.whatwg.org/specs/web-apps/current-work/complete.html#dom-media-paused</A>&gt;attribute
to false, loading the media
resource&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete.html#media-resource">http://www.whatwg.org/specs/web-apps/current-work/complete.html#media-resource</A>&gt;and
beginning playback if necessary. If the playback had ended, will
restart
it from the start.
media . pause&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete.html#dom-media-pause">http://www.whatwg.org/specs/web-apps/current-work/complete.html#dom-media-pause</A>&gt;
()

Sets the paused&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete.html#dom-media-paused">http://www.whatwg.org/specs/web-apps/current-work/complete.html#dom-media-paused</A>&gt;attribute
to true, loading the media
resource&lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete.html#media-resource">http://www.whatwg.org/specs/web-apps/current-work/complete.html#media-resource</A>&gt;if
necessary.
I assumed that if the @currentSrc had changed, that would trigger loading
the new media resource, too. If that is not the intention, maybe the
non-normative description should point out that it only triggers loading the
media resource when the @src attribute is being set for the very first time.
Though, to be honest, I don't really see a difference between setting @src
through JavaScript for the first time (which IIUC also has a NETWORK_EMPTY
state) and re-setting it again a subsequent time - IMHO both should
consistently either include the media resource loading or exclude it.


On Tue, 27 Jul 2010, Silvia Pfeiffer wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; Sure, but this is only a snippet of an actual application. If, e.g., you
</I>&gt;<i> &gt; want to step through a list of videos (maybe an automated playlist)
</I>&gt;<i> &gt; using script and you need to provide at least two different formats with
</I>&gt;<i> &gt; &lt;source&gt;, you'd want to run this algorithm frequently.
</I>&gt;<i>
</I>&gt;<i> Just have a bunch of &lt;video&gt;s in the markup, and when one ends, hide it
</I>&gt;<i> and show the next one. Don't start dynamically manipulating &lt;source&gt;
</I>&gt;<i> elements, that's just asking for pain.
</I>&gt;<i>
</I>&gt;<i> If you really must do it all using script, just use canPlayType and the
</I>&gt;<i> &lt;video src=&quot;&quot;&gt; attribute, don't mess around with &lt;source&gt;.
</I>&gt;<i>
</I>
Thanks for adding that advice. I think it's important to point that out.

Cheers,
Silvia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100826/86839cc3/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100826/86839cc3/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070361.html">[whatwg] &lt;video&gt; loading algorithms
</A></li>
	<LI>Next message: <A HREF="069756.html">[whatwg] Please consider dropping the &quot;sandbox&quot; attribute from the	&lt;iframe&gt; element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70418">[ date ]</a>
              <a href="thread.html#70418">[ thread ]</a>
              <a href="subject.html#70418">[ subject ]</a>
              <a href="author.html#70418">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
