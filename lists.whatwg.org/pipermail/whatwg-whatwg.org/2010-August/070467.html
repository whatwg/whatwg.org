<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: Discussing WebSRT and alternatives/improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vh1icjppsr6mfa%40philip-pc.gothenburg.osa%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070468.html">
   <LINK REL="Next"  HREF="070444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: Discussing WebSRT and alternatives/improvements</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vh1icjppsr6mfa%40philip-pc.gothenburg.osa%3E"
       TITLE="[whatwg] Fwd: Discussing WebSRT and alternatives/improvements">philipj at opera.com
       </A><BR>
    <I>Thu Aug 26 03:06:09 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070468.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
        <LI>Next message: <A HREF="070444.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70467">[ date ]</a>
              <a href="thread.html#70467">[ thread ]</a>
              <a href="subject.html#70467">[ subject ]</a>
              <a href="author.html#70467">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 25 Aug 2010 17:40:08 +0200, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;&gt;<i>  At this point, what is your recommendation? The following ideas have  
</I>&gt;&gt;<i> been
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> on the table:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> * Change the file extension to something other than .srt.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I don't have an opinion, browsers ignore the file extension anyway.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Yes, I think we should definitely have a new file extension.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I'll leave this to others to decide, but since browsers have no  
</I>&gt;&gt;&gt;&gt;<i> concept
</I>&gt;&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;&gt;<i> file extensions, just using .srt will work. If the format is SRT-like
</I>&gt;&gt;&gt;&gt;<i> it's
</I>&gt;&gt;&gt;&gt;<i> likely at least some files will use .srt in practice.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> All SRT files in practice use the .srt extension - it is typically how
</I>&gt;&gt;&gt;<i> these
</I>&gt;&gt;&gt;<i> formats are identified by applications. Just because *nix ignores file
</I>&gt;&gt;&gt;<i> extensions mostly for identifying file types doesn't mean that
</I>&gt;&gt;&gt;<i> applications
</I>&gt;&gt;&gt;<i> do. Again, I believe strongly that re-using the same file extension is  
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> one biggest pain we can inflict on the community.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As shown above, several popular (?) media players ignore or give little
</I>&gt;&gt;<i> weight to the file extension.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don't think that's a fair sample - as I said, on Linux and on the
</I>&gt;<i> command-line things are different. I have a GUI mplayer here and it  
</I>&gt;<i> reacts
</I>&gt;<i> like VLC - doesn't let me open .wsrt files. The vast majority of
</I>&gt;<i> applications on Windows and the Mac make their decision on whether they
</I>&gt;<i> support files based on the file extension.
</I>
That the file selection dialogs are filtered by file extensions doesn't  
mean that applications don't sniff the content. In fact, MPlayer, VLC and  
Totem will happily load and use an SRT file even if it is called foo.smi,  
even though SAMI is a completely incompatible format. In other words, they  
sniff the content as being SRT. The reason that they rely on sniffing is  
likely that many files use the wrong file extension (my OpenSubtitles  
batch have no extensions, so I have no statistics on this).

Again, if we want to avoid exposing existing SRT parsers to WebSRT syntax,  
then the format needs to be more incompatible. File extensions will be  
changed, popular players rely on sniffing, some ignore leading garbage and  
also headers can simply be removed by naive conversion tools.

&gt;<i> Assuming we pick the same file extension and we now have a new  
</I>&gt;<i> application
</I>&gt;<i> that only supports WebSRT parsing, we will make a large bunch of existing
</I>&gt;<i> valid SRT files invalid - not only those that are not in UTF-8, but also
</I>&gt;<i> those with &lt;font&gt;..&lt;/font&gt; and &lt;u&gt;...&lt;/u&gt;. I do wonder if the text  
</I>&gt;<i> between
</I>&gt;<i> the &lt;font&gt; start and end element and inside the &lt;u&gt;..&lt;/u&gt; may even get
</I>&gt;<i> removed because of lack of support for these.
</I>
I've seen no application that removes everything between tags it doesn't  
recognize, the only things that I've seen happen is treating it as plain  
text or ignoring the tags much like a browser does with HTML.

&gt;&gt;<i>   * Add a header to WebSRT to make it uniquely identifiable.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> The header would have to be mandatory and browsers would have to  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> reject
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> files that don't have it. Such files would be compatible with some
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> existing
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> software and break some, depending on how they sniff. We could also  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> put
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> metadata in such a header.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Yes, I think we need to introduce a header. Maybe we can hide all  
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;&gt;<i> structure in what SRT recognizes as comments (i.e. start the lines as
</I>&gt;&gt;&gt;&gt;&gt;<i> &quot;;&quot;.
</I>&gt;&gt;&gt;&gt;&gt;<i> But I believe we need some hints like the @profile to identify the  
</I>&gt;&gt;&gt;&gt;&gt;<i> type
</I>&gt;&gt;&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;&gt;&gt;<i> the cues and the &lt;link&gt; to link to a style sheet, and we need  
</I>&gt;&gt;&gt;&gt;&gt;<i> metadata
</I>&gt;&gt;&gt;&gt;&gt;<i> like
</I>&gt;&gt;&gt;&gt;&gt;<i> the &lt;meta&gt; element of HTML headers.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I had no idea that semicolon was used for comments in SRT, is this  
</I>&gt;&gt;&gt;&gt;<i> usage
</I>&gt;&gt;&gt;&gt;<i> widespread? Does it work in most players?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I thought it was, but maybe it was just introduced for WebSRT. It is  
</I>&gt;&gt;&gt;<i> not
</I>&gt;&gt;&gt;<i> tested in Hixie's SRT research[2]. Can you take a quick look through  
</I>&gt;&gt;&gt;<i> your
</I>&gt;&gt;&gt;<i> SRT file collection if there are any? I'm probably wrong about this  
</I>&gt;&gt;&gt;<i> seeing
</I>&gt;&gt;&gt;<i> as it's not mentioned in the wiki page for SRT [3].
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> [2] <A HREF="http://wiki.whatwg.org/wiki/SRT_research">http://wiki.whatwg.org/wiki/SRT_research</A>
</I>&gt;&gt;&gt;<i> [3] <A HREF="http://en.wikipedia.org/wiki/SubRip">http://en.wikipedia.org/wiki/SubRip</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> OK, I grepped the 10000 files. Only 15 had any lines beginning with a
</I>&gt;&gt;<i> semicolon, and by manual inspection it doesn't look like any of them are
</I>&gt;&gt;<i> clearly intended as comments (it's hard to tell, all are in foreign
</I>&gt;&gt;<i> languages). None of them were at the very beginning of the file.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ah, that actually makes for another incompatibility of WebSRT and SRT:  
</I>&gt;<i> such
</I>&gt;<i> lines are regarded as comments in WebSRT when they probably aren't in  
</I>&gt;<i> SRT.
</I>
I can't find anything about this when searching for &quot;comment&quot; and  
&quot;semicolon&quot; in the spec, are you sure you're not thinking of some other  
format than WebSRT?

&gt;<i> It seems increasingly that the only thing that WebSRT and SRT still have  
</I>&gt;<i> in
</I>&gt;<i> common is the &quot;--&gt;&quot; character sequence. As a friend of mine in a11y  
</I>&gt;<i> recently
</I>&gt;<i> said: &quot;I was hoping to never have to stare at &quot;--&gt;&quot; ever again... We  
</I>&gt;<i> could
</I>&gt;<i> indeed go all the way and define an much more different format, though I
</I>&gt;<i> don't think it will create implementations as quickly as a SRT-based but
</I>&gt;<i> changed format.
</I>
I would prefer if we follow one of two paths:

1. Let WebSRT be maximally compatible with SRT, making it a &quot;retro-spec&quot;  
of existing SRT use with extensions that cause as little breakage as  
possible in the ecosystem.

2. Make something incompatible and rid ourselves of all legacy  
constraints. For example, there would be no need to accept both period and  
comma as a separator between seconds and milliseconds.

I can't see any insurmountable issues with option 1, but would want to  
hear from actual media player developers, not just our guesses of what  
they might think. Option 2 would also be fine. Something in between, where  
we try to make it a little bit incompatible in order to make people aware  
that there *might* be some compatibility issues, is not something I'm  
interested in.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070468.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
	<LI>Next message: <A HREF="070444.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70467">[ date ]</a>
              <a href="thread.html#70467">[ thread ]</a>
              <a href="subject.html#70467">[ subject ]</a>
              <a href="author.html#70467">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
