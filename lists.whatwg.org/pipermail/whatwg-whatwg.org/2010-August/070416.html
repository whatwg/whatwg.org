<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: Discussing WebSRT and alternatives/improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3CAANLkTi%3Ddv32PvUj4xAEF%3DsCcjcrHXeMUz%3D7k1TkFfqRN%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070415.html">
   <LINK REL="Next"  HREF="070417.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: Discussing WebSRT and alternatives/improvements</H1>
<!--htdig_noindex-->
    <B>Silvia Pfeiffer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3CAANLkTi%3Ddv32PvUj4xAEF%3DsCcjcrHXeMUz%3D7k1TkFfqRN%40mail.gmail.com%3E"
       TITLE="[whatwg] Fwd: Discussing WebSRT and alternatives/improvements">silviapfeiffer1 at gmail.com
       </A><BR>
    <I>Wed Aug 25 05:39:00 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070415.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
        <LI>Next message: <A HREF="070417.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70416">[ date ]</a>
              <a href="thread.html#70416">[ thread ]</a>
              <a href="subject.html#70416">[ subject ]</a>
              <a href="author.html#70416">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Aug 25, 2010 at 7:20 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:

&gt;<i> On Wed, 25 Aug 2010 09:16:56 +0200, Silvia Pfeiffer &lt;
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>  On Tue, Aug 24, 2010 at 8:49 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  On Tue, 24 Aug 2010 04:32:21 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  On Mon, Aug 23, 2010 at 6:55 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  Aside: WebSRT can't contain binary data, only UTF-8 encoded text.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> It sure can. Just base-64 encode it. I'm not saying it's a good thing,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> but
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> if somebody really has an urge...
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Sure, this would be a metadata track. Sites have no reason to offer
</I>&gt;&gt;&gt;&gt;&gt;<i> download links to it, and if anyone gets hold of such a file it would
</I>&gt;&gt;&gt;&gt;&gt;<i> quickly be evident that it's useless.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> After a user has seen the crap on screen. I'm just saying: it's a legal
</I>&gt;&gt;&gt;&gt;<i> WebSRT file and really not compatible with any existing infrastructure
</I>&gt;&gt;&gt;&gt;<i> for
</I>&gt;&gt;&gt;&gt;<i> SRT.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> A fair point. The alternatives I can see are (1) using an incompatible
</I>&gt;&gt;&gt;<i> format so that the user sees nothing or (2) adding a header that
</I>&gt;&gt;&gt;<i> indicates
</I>&gt;&gt;&gt;<i> that the track is metadata.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In order to tell the user to stop wasting their time with this file, I
</I>&gt;&gt;&gt;<i> think (1) is clearly worse. (2) is absolutely an option, but it will only
</I>&gt;&gt;&gt;<i> make a difference to software that understands this header and if the
</I>&gt;&gt;&gt;<i> header
</I>&gt;&gt;&gt;<i> is optional it will likely often be omitted. A dialog saying &quot;this is a
</I>&gt;&gt;&gt;<i> metadata track, you can't watch it&quot; is slightly friendlier than a screen
</I>&gt;&gt;&gt;<i> full of crap, but they are both pretty effective at getting the message
</I>&gt;&gt;&gt;<i> across.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yeah, I'm totally for adding a hint as to what format is in the cue. Then,
</I>&gt;&gt;<i> a
</I>&gt;&gt;<i> WebSRT file can be identified as to what it contains.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> OK, but note that a browser would ignore this and trust what &lt;track kind&gt;
</I>&gt;<i> says. I wouldn't want the kind change after the external track is loaded, it
</I>&gt;<i> would make the UI confusing if a captions track disappeared from the menu as
</I>&gt;<i> soon as it was loaded because it internally claims to be metadata.
</I>

Yes, I have no problem with that. Though I believe we have overloaded @kind
with too much meaning as I already mentioned earlier [1]. I think it would
make more sense to pull the different dimensions into different attributes:
- @type or @format for the format of the cue
- @kind for the semantic meaning of it (subtitle, caption, karaoke etc) -
one track could even satisfy several needs, so this would be a lit of kinds
- and finally the visual rendering problem, which could possibly be solved
by providing a link to a div or p where the data should be rendered
alternatively to the default. Right now, audio and metadata tracks get no
rendering at all and I see that as a problem.


[1]
<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2010-July/027356.html">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2010-July/027356.html</A>



&gt;<i>
</I>&gt;<i>  The question, then, is if parsers that handle the mentioned markup also
</I>&gt;&gt;&gt;<i> ignore &lt;1&gt;, &lt;ruby&gt; and &lt;rt&gt;. I haven't tested it, but I assume that some
</I>&gt;&gt;&gt;<i> will ignore it and some won't. How many percent of the media player
</I>&gt;&gt;&gt;<i> market
</I>&gt;&gt;&gt;<i> would have to handle this correctly for these extensions to be OK, in
</I>&gt;&gt;&gt;<i> your
</I>&gt;&gt;&gt;<i> opinion?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If a single one breaks, it would be bad IMO because the expectations of
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> users of that software will be broken even if it may just be a small
</I>&gt;&gt;<i> percentage of users and we have no influence on the upgrade path of that
</I>&gt;&gt;<i> software - in particular if it is proprietary.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Neither a new file extension, MIME type or header is enough to stop some
</I>&gt;<i> implementations from treating it as SRT and break. The only remaining
</I>&gt;<i> option, AFAICT, is making the format fundamentally incompatible with SRT. Is
</I>&gt;<i> it worth it?
</I>

If it has a different file extension and a different mime type and even a
different header, I don't think any existing software will open it as SRT.
Why would it think that a random file is a SRT file? It would need to be an
application that accepts absolutely anything that you give it as SRT and
then that software has more fundamental problems.


&gt;<i>
</I>&gt;&gt;&gt;<i> At this point, what is your recommendation? The following ideas have been
</I>&gt;&gt;&gt;<i> on the table:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> * Change the file extension to something other than .srt.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I don't have an opinion, browsers ignore the file extension anyway.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Yes, I think we should definitely have a new file extension.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'll leave this to others to decide, but since browsers have no concept of
</I>&gt;<i> file extensions, just using .srt will work. If the format is SRT-like it's
</I>&gt;<i> likely at least some files will use .srt in practice.
</I>

All SRT files in practice use the .srt extension - it is typically how these
formats are identified by applications. Just because *nix ignores file
extensions mostly for identifying file types doesn't mean that applications
do. Again, I believe strongly that re-using the same file extension is the
one biggest pain we can inflict on the community.



&gt;<i>
</I>&gt;<i>  * Change the MIME type to something other than text/srt.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I doubt it makes any difference, as most software that deal with SRT
</I>&gt;&gt;&gt;<i> today
</I>&gt;&gt;&gt;<i> have no concept of MIME types. No matter what I'd want exactly 1 MIME
</I>&gt;&gt;&gt;<i> type
</I>&gt;&gt;&gt;<i> or alternatively make browsers ignore the MIME type completely.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> You're right in that existing SRT software probably doesn't deal much with
</I>&gt;&gt;<i> a
</I>&gt;&gt;<i> SRT mime type. Right now text/x-srt or text/srt is sometimes used for SRT
</I>&gt;&gt;<i> files, but often text/plain is also in use and more likely from a Web
</I>&gt;&gt;<i> server. Since this is the space where Web browsers play, I am not overly
</I>&gt;&gt;<i> fussed, though I think logically text/websrt makes more sense with a .wsrt
</I>&gt;&gt;<i> extension. Then, also SRT files can be served as text/websrt to allow them
</I>&gt;&gt;<i> to take part in the WebSRT infrastructure if indeed they will continue to
</I>&gt;&gt;<i> be
</I>&gt;&gt;<i> valid WebSRT files.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is there anything you expect would break if WebSRT files were served as
</I>&gt;<i> text/srt?
</I>

I'm asking because I don't know how anal Web browsers are about mime types.
I would think a Web browser should accept WebSRT and SRT files in text/plain
format as well as WebSRT files in text/websrt format and SRT files in
text/srt format. Would something break if they even came as text/html? I
would expect that it makes a difference when these are loaded directly as a
resource for display (e.g. when you directly go to
<A HREF="http://example.com/mycaptions.wsrt">http://example.com/mycaptions.wsrt</A>), but not when used through a &lt;track&gt;
element, where WebSRT is the baseline format and thus is expected.


&gt;<i>
</I>&gt;<i>  * Add a header to WebSRT to make it uniquely identifiable.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The header would have to be mandatory and browsers would have to reject
</I>&gt;&gt;&gt;<i> files that don't have it. Such files would be compatible with some
</I>&gt;&gt;&gt;<i> existing
</I>&gt;&gt;&gt;<i> software and break some, depending on how they sniff. We could also put
</I>&gt;&gt;&gt;<i> metadata in such a header.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Yes, I think we need to introduce a header. Maybe we can hide all the
</I>&gt;&gt;<i> structure in what SRT recognizes as comments (i.e. start the lines as &quot;;&quot;.
</I>&gt;&gt;<i> But I believe we need some hints like the @profile to identify the type of
</I>&gt;&gt;<i> the cues and the &lt;link&gt; to link to a style sheet, and we need metadata
</I>&gt;&gt;<i> like
</I>&gt;&gt;<i> the &lt;meta&gt; element of HTML headers.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I had no idea that semicolon was used for comments in SRT, is this usage
</I>&gt;<i> widespread? Does it work in most players?
</I>

I thought it was, but maybe it was just introduced for WebSRT. It is not
tested in Hixie's SRT research[2]. Can you take a quick look through your
SRT file collection if there are any? I'm probably wrong about this seeing
as it's not mentioned in the wiki page for SRT [3].

[2] <A HREF="http://wiki.whatwg.org/wiki/SRT_research">http://wiki.whatwg.org/wiki/SRT_research</A>
[3] <A HREF="http://en.wikipedia.org/wiki/SubRip">http://en.wikipedia.org/wiki/SubRip</A>



&gt;<i>  * Make something deliberately incompatible with SRT.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It doesn't make a big difference to browsers implementing the format.
</I>&gt;&gt;&gt;<i> We'd
</I>&gt;&gt;&gt;<i> be replacing something that mostly works in existing players with
</I>&gt;&gt;&gt;<i> something
</I>&gt;&gt;&gt;<i> that never works.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> That was the idea of WMML and I took that path because I thought it would
</I>&gt;&gt;<i> be
</I>&gt;&gt;<i> advantageous for other Web applications, such as built on libxml2, expat,
</I>&gt;&gt;<i> php's SimpleXML, pyexpat for python, Nokogiri for ruby etc. But I really
</I>&gt;&gt;<i> like the idea of WebSRT to allow arbitrary metadata in the cues without
</I>&gt;&gt;<i> having to put it into CDATA sections.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't mind creating a format that is still somewhat compatible with SRT.
</I>&gt;&gt;<i> We don't have to force incompatibility - but we should also not have it
</I>&gt;&gt;<i> restrict us. In either case, it is a new format.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm not trying to be annoying, but this seems to clash with your preference
</I>&gt;<i> to not break any existing software. Anything that resembles SRT *will* be
</I>&gt;<i> treated as SRT in some existing players.
</I>

No, I think that's a misconception. I think most players test the file
extension and maybe the mime type before opening a file as srt. A quick test
in VLC on my Mac shows that when I go to &quot;Subtitle -&gt; Open File&quot; I am not
allowed to open anything that doesn't have an extension that VLC accepts -
they get filtered out. Thus, what the actual file looks like really doesn't
matter - what matter is what it sells itself as through the file extension,
the mime type, or some magic identifier at the beginning of the file. Which
is used depends on your OS and your application.


Cheers,
Silvia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100825/168a78ec/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100825/168a78ec/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070415.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
	<LI>Next message: <A HREF="070417.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70416">[ date ]</a>
              <a href="thread.html#70416">[ thread ]</a>
              <a href="subject.html#70416">[ subject ]</a>
              <a href="author.html#70416">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
