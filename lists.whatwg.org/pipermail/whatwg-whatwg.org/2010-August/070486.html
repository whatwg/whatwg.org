<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] base64 entities
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20base64%20entities&In-Reply-To=%3Cop.vh2e3cxwte2ec8%40aimac.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070434.html">
   <LINK REL="Next"  HREF="070489.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] base64 entities</H1>
<!--htdig_noindex-->
    <B>Kornel Lesi&#324;ski</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20base64%20entities&In-Reply-To=%3Cop.vh2e3cxwte2ec8%40aimac.local%3E"
       TITLE="[whatwg] base64 entities">kornel at geekhood.net
       </A><BR>
    <I>Thu Aug 26 14:53:26 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070434.html">[whatwg] base64 entities
</A></li>
        <LI>Next message: <A HREF="070489.html">[whatwg] base64 entities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70486">[ date ]</a>
              <a href="thread.html#70486">[ thread ]</a>
              <a href="subject.html#70486">[ subject ]</a>
              <a href="author.html#70486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 25 Aug 2010 22:52:42 +0100, Kornel Lesi&#324;ski &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">kornel at geekhood.net</A>&gt;  
wrote:

&gt;&gt;<i> &lt;script&gt;
</I>&gt;&gt;<i> elmt.innerHTML = 'Hi there &lt;?php echo htmlspecialchars($name) ?&gt;.';
</I>&gt;&gt;<i> &lt;/script&gt;
</I>&gt;<i>
</I>&gt;<i> These cases can be secured without any new features in browsers (by  
</I>&gt;<i> escaping whitespace using numeric entities):
</I>
I realized I was wrong about this one. It won't prevent script injection  
in JS strings (in places where entities are decoded, including &lt;script&gt; in  
XML), because entity will be changed to plain text before JavaScript is  
tokenized.

For this reason, base64 entities won't solve this problem either, unless  
they're specifically defined as JavaScript construct, not only HTML  
construct (and I think such mix of parser would be bad).

If parser decoded such entities in &lt;script&gt; (like XHTML does):

foo = '&amp;%JztldmlsKCk7Jw==;'

then decoded string passed to JS parser would look like:

innerHTML = '';evil();''

which defeats purpose of the encoding.

OTOH if HTML parser didn't decode these entities in &lt;script&gt; (which is  
current text/html behavior), then JS would get undecoded string (i.e.  
foo.charAt(0) == '&amp;').

-- 
regards, Kornel

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070434.html">[whatwg] base64 entities
</A></li>
	<LI>Next message: <A HREF="070489.html">[whatwg] base64 entities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70486">[ date ]</a>
              <a href="thread.html#70486">[ thread ]</a>
              <a href="subject.html#70486">[ subject ]</a>
              <a href="author.html#70486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
