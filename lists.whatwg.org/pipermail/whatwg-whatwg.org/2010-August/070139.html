<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: Discussing WebSRT and alternatives/improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3CAANLkTinXZVNW_2dcnYfZRn5H6%2BforKgkFX2VX8kpgtt3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070137.html">
   <LINK REL="Next"  HREF="070144.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: Discussing WebSRT and alternatives/improvements</H1>
<!--htdig_noindex-->
    <B>Silvia Pfeiffer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3CAANLkTinXZVNW_2dcnYfZRn5H6%2BforKgkFX2VX8kpgtt3%40mail.gmail.com%3E"
       TITLE="[whatwg] Fwd: Discussing WebSRT and alternatives/improvements">silviapfeiffer1 at gmail.com
       </A><BR>
    <I>Wed Aug 11 06:38:32 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070137.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
        <LI>Next message: <A HREF="070144.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70139">[ date ]</a>
              <a href="thread.html#70139">[ thread ]</a>
              <a href="subject.html#70139">[ subject ]</a>
              <a href="author.html#70139">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Aug 11, 2010 at 10:30 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:

&gt;<i> On Wed, 11 Aug 2010 01:43:01 +0200, Silvia Pfeiffer &lt;
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>  On Tue, Aug 10, 2010 at 7:49 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have checked the parse spec and
</I>&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#tag-open-state">http://www.whatwg.org/specs/web-apps/current-work/#tag-open-state</A> indeed
</I>&gt;&gt;<i> implies that a tag starting with a number is a parse error. Both, the
</I>&gt;&gt;<i> timestamps and the voice markers thus seem problems when going with an
</I>&gt;&gt;<i> innerHTML parser. Is there a way to resolve this? I mean: I'd quite
</I>&gt;&gt;<i> happily
</I>&gt;&gt;<i> drop the voice markers for a &lt;span @class&gt; but I am not sure what to do
</I>&gt;&gt;<i> about the timestamps. We could do what I did in WMML and introduce a &lt;t&gt;
</I>&gt;&gt;<i> element with the timestamp as a @at attribute, but that is again more
</I>&gt;&gt;<i> verbose. We could also introduce an @at attribute in &lt;span&gt; which would
</I>&gt;&gt;<i> then
</I>&gt;&gt;<i> at least end up in the DOM and can be dealt with specially.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What should numerical voices be replaced with? Personally I'd much rather
</I>&gt;<i> write &lt;philip&gt; and &lt;silvia&gt; to mark up a conversation between us two, as I
</I>&gt;<i> think it'd be quite hard to keep track of the numbers if editing subtitles
</I>&gt;<i> with many different speakers. However, going with that and using an HTML
</I>&gt;<i> parser is quite a hack. Names like &lt;mark&gt; and &lt;li&gt; may already have special
</I>&gt;<i> parsing rules or default CSS.
</I>&gt;<i>
</I>
In HTML it is &lt;span class=&quot;philip&quot;&gt;..&lt;/span&gt; and &lt;span
class=&quot;silvia&quot;&gt;...&lt;/span&gt;. I don't see anything wrong with that. And it's
only marginally longer than &lt;philip&gt; ... &lt;/philip&gt; and &lt;silvia&gt;...&lt;/silvia&gt;.



&gt;<i> Going with HTML in the cues, we either have to drop voices and inner
</I>&gt;<i> timestamps or invent new markup, as HTML can't express either. I don't think
</I>&gt;<i> either of those are really good solutions, so right now I'm not convinced
</I>&gt;<i> that reusing the innerHTML parser is a good way forward.
</I>

I don't see a need for the voices - they already have markup in HTML, see
above. But I do wonder about the timestamps. I'd much rather keep the
innerHTML parser if we can, but I don't know enough about how the timestamps
could be introduced in a non-breakable manner. Maybe with a data- attribute?
Maybe &lt;span data-t=&quot;00:00:02.100&quot;&gt;...&lt;/span&gt;?



&gt;<i>
</I>&gt;<i>   Think for example about the case where we had a requirement that a double
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> newline starts a new cue, but now we want to introduce a means where the
</I>&gt;&gt;&gt;&gt;<i> double newline is escaped and can be made part of a cue.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Other formats keep track of their version, such as MS Word files. It is
</I>&gt;&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;&gt;<i> be hoped that most new features can be introduced without breaking
</I>&gt;&gt;&gt;&gt;<i> backwards
</I>&gt;&gt;&gt;&gt;<i> compatibility and we can write the parsing requirements such that
</I>&gt;&gt;&gt;&gt;<i> certain
</I>&gt;&gt;&gt;&gt;<i> things will be ignored, but in and of itself, WebSRT doesn't provide for
</I>&gt;&gt;&gt;&gt;<i> this extensibility. Right now, there is for example extensibility with
</I>&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;<i> &quot;WebSRT settings parsing&quot; (that's the stuff behind the timestamps) where
</I>&gt;&gt;&gt;&gt;<i> further &quot;setting:value&quot; settings can be introduced. But for example the
</I>&gt;&gt;&gt;&gt;<i> introduction of new &quot;cue identifiers&quot; (that's the &lt;&gt; marker at the start
</I>&gt;&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;&gt;<i> a cue) would be difficult without a version string, since anything that
</I>&gt;&gt;&gt;&gt;<i> doesn't match the given list will just be parsed as cue-internal tag and
</I>&gt;&gt;&gt;&gt;<i> thus end up as part of the cue text where plain text parsing is used.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The bug I filed suggested allowing arbitrary voices, to simplify the
</I>&gt;&gt;&gt;<i> parser
</I>&gt;&gt;&gt;<i> and to make future extensions possible. For a web format I think this is
</I>&gt;&gt;&gt;<i> a
</I>&gt;&gt;&gt;<i> better approach format than versioning. I haven't done a full review of
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> parser, but there are probably more places where it could be more
</I>&gt;&gt;&gt;<i> forgiving
</I>&gt;&gt;&gt;<i> so as to allow future tweaking.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That's a good approach and will reduce the need for breaking
</I>&gt;&gt;<i> backwards-compatibility. In an xml-based format that need is 0, while with
</I>&gt;&gt;<i> a
</I>&gt;&gt;<i> text format where the structure is ad-hoc, that need can never be reduced
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> 0. That's what I am concerned about and that's why I think we need a
</I>&gt;&gt;<i> version
</I>&gt;&gt;<i> identifier. If we end up never using/changing the version identifier, the
</I>&gt;&gt;<i> better so. But I'd much rather we have it now and can identify what
</I>&gt;&gt;<i> specification a file adheres to than not being able to do so later.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Perhaps I'm too influenced by HTML and its failed attempts at versioning,
</I>&gt;<i> but I think that if you want to know which version of a spec a document is
</I>&gt;<i> written against, you can run it through a parser for each version. This
</I>&gt;<i> doesn't tell you the author intent, but I'm not sure that's very interesting
</I>&gt;<i> to know. If the author thinks it's important, perhaps it can be put in a
</I>&gt;<i> comment in the header.
</I>

I was most concerned about non-backwards-compatible changes here, but let's
not repeat the discussion I had with Anne. Let's rather focus on making sure
we have some means of extending WebSRT in future, should the need arise.



&gt;<i>
</I>&gt;<i>   On the other hand, keeping the same extension and (unregistered) MIME
</I>&gt;&gt;&gt;<i> type
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> as SRT has plenty of benefits, such as immediately being able to use
</I>&gt;&gt;&gt;&gt;&gt;<i> existing SRT files in browsers without changing their file extension or
</I>&gt;&gt;&gt;&gt;&gt;<i> MIME
</I>&gt;&gt;&gt;&gt;&gt;<i> type.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> There is no harm for browsers to accept both MIME types if they are sure
</I>&gt;&gt;&gt;&gt;<i> they can parse old srt as well as new websrt. But these two formats are
</I>&gt;&gt;&gt;&gt;<i> different enough that they should be given a different extension and
</I>&gt;&gt;&gt;&gt;<i> mime
</I>&gt;&gt;&gt;&gt;<i> type. I do not see a single advantage in stealing the MIME type of an
</I>&gt;&gt;&gt;&gt;<i> existing format for a new specification.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> But there's no spec for the old SRT, the only thing one could do is
</I>&gt;&gt;&gt;<i> parser
</I>&gt;&gt;&gt;<i> it with a WebSRT parser.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I can write that spec in an afternoon and register the mime type with
</I>&gt;&gt;<i> IANA.
</I>&gt;&gt;<i> That really isn't a problem. People have managed to write correct SRT
</I>&gt;&gt;<i> files
</I>&gt;&gt;<i> without having a spec, because it's so trivial. Creating a spec is just a
</I>&gt;&gt;<i> formality. For now, the wikipedia page really is sufficient.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Having a separate spec isn't really useful unless we expect people to
</I>&gt;<i> implement it. Perhaps some new implementations would follow the spec, but
</I>&gt;<i> browsers sure wouldn't implement two different parsers.
</I>

As I also said to Anne: I wouldn't want to implement a SRT parser. It would
and should just fall out as a side benefit from implementing WebSRT. It's
not important for the browsers to make a distinction between SRT and WebSRT,
but it is important to everyone else who is trying to manage their data.



&gt;<i>
</I>&gt;<i>  That would make text/srt and text/websrt synonymous, which is kind of
</I>&gt;&gt;&gt;<i> pointless.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No, it's only pointless if you are a browser vendor. For everyone else it
</I>&gt;&gt;<i> is
</I>&gt;&gt;<i> a huge advantage to be able to choose between a guaranteed simple format
</I>&gt;&gt;<i> and
</I>&gt;&gt;<i> a complex format with all the bells and whistles.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  The advantages of taking text/srt is that all existing software to create
</I>&gt;&gt;&gt;<i> SRT can be used to create WebSRT
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That's not strictly true. If they load a WebSRT file that was created by
</I>&gt;&gt;<i> some other software for further editing and that WebSRT file uses advanced
</I>&gt;&gt;<i> WebSRT functionality, the authoring software will break.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Right, especially settings appended after the timestamps are quite likely
</I>&gt;<i> to be stripped when saving the file.
</I>

Or may even break the software if it's badly implemented, or may end up
inside the cue text - just like the other control instructions which will
end up as plain text inside the cue. You won't believe how many people have
pointed out to me that my SRT test parser exposed an &lt;i&gt; tag markup in the
cue text rather than interpreting it, when I was experimenting with applying
SRT cues in a HTML div without touching the cue text content. Extraneous
markup is really annoying.



&gt;<i>  and servers that already send text/srt don't need to be updated. In either
</I>&gt;&gt;&gt;<i> case I think we should support only one mime type.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What's the harm in supporting two mime types but using the same parser to
</I>&gt;&gt;<i> parse them?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Most content will most likely be plain old SRT without voices, &lt;ruby&gt; or
</I>&gt;<i> similar. People will create them using existing software with the .srt
</I>&gt;<i> extension and serve them using the text/srt MIME type. When they later
</I>&gt;<i> decide to add some &lt;ruby&gt; or similar, it will just work without changing the
</I>&gt;<i> extension or MIME type. The net result is that text/srt and text/websrt mean
</I>&gt;<i> exactly the same thing, making it a wasted effort.
</I>

&gt;<i>From a Web browser perspective, yes. But not from a caption authoring
</I>perspective. At first, I would author a SRT file. Later, I want to add some
fancy stuff. So, I load it into the application again. Then I add the fancy
stuff. It tells me that I cannot save it as SRT, but have to save it as
WebSRT, so I don't lose the information. Good! Now, the pipeline that I have
set up for SRT files transcoding and burning onto video and which cannot yet
deal with WebSRT will not accept the WebSRT file. Good again! Makes me
extend my pipeline or go to the provider and upgrade my software, so I get
the full feature support and the correct rendering. Excellent.



&gt;<i>
</I>&gt;&gt;<i> Do you find MPlayer's behavior annoying because by rescaling already
</I>&gt;&gt;<i> rendered text, the text loses resolution and becomes less readable? This
</I>&gt;&gt;<i> is
</I>&gt;&gt;<i> definitely not the behaviour I am after.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Scaling with the video is annoying with small videos, as the text ends up
</I>&gt;<i> being huge in fullscreen. I assume we're going to do scaling as well as we
</I>&gt;<i> can, so that's not an argument in either direction.
</I>&gt;<i>
</I>&gt;<i> I'll have to withdraw any opinion for now, I don't know how to best deal
</I>&gt;<i> with this.
</I>


Yes, I can imagine that on small video it's bad to scale the text down with
the video, since it becomes unreadable. I thought that a solution would be
to define the screen size for which the text was written and then scale the
text with the video. But maybe there is a function that needs to be applied
where there is a minimum font size below which one cannot go and a maximum
font size above which it's bad, too. It seems that scaling text at the same
rate as video is not appropriate. I wonder if there is an optimal function
that people have found to be best? Worth doing some experiments I guess.

Cheers,
Silvia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100811/f52f1ffd/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100811/f52f1ffd/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070137.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
	<LI>Next message: <A HREF="070144.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70139">[ date ]</a>
              <a href="thread.html#70139">[ thread ]</a>
              <a href="subject.html#70139">[ subject ]</a>
              <a href="author.html#70139">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
