<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: Discussing WebSRT and alternatives/improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vg946jbgsr6mfa%40philip-pc.gothenburg.osa%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070139.html">
   <LINK REL="Next"  HREF="070166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: Discussing WebSRT and alternatives/improvements</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vg946jbgsr6mfa%40philip-pc.gothenburg.osa%3E"
       TITLE="[whatwg] Fwd: Discussing WebSRT and alternatives/improvements">philipj at opera.com
       </A><BR>
    <I>Wed Aug 11 08:26:33 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070139.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
        <LI>Next message: <A HREF="070166.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70144">[ date ]</a>
              <a href="thread.html#70144">[ thread ]</a>
              <a href="subject.html#70144">[ subject ]</a>
              <a href="author.html#70144">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 11 Aug 2010 15:38:32 +0200, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> On Wed, Aug 11, 2010 at 10:30 PM, Philip J&#228;genstedt  
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Wed, 11 Aug 2010 01:43:01 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  On Tue, Aug 10, 2010 at 7:49 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have checked the parse spec and
</I>&gt;&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#tag-open-state">http://www.whatwg.org/specs/web-apps/current-work/#tag-open-state</A>  
</I>&gt;&gt;&gt;<i> indeed
</I>&gt;&gt;&gt;<i> implies that a tag starting with a number is a parse error. Both, the
</I>&gt;&gt;&gt;<i> timestamps and the voice markers thus seem problems when going with an
</I>&gt;&gt;&gt;<i> innerHTML parser. Is there a way to resolve this? I mean: I'd quite
</I>&gt;&gt;&gt;<i> happily
</I>&gt;&gt;&gt;<i> drop the voice markers for a &lt;span @class&gt; but I am not sure what to do
</I>&gt;&gt;&gt;<i> about the timestamps. We could do what I did in WMML and introduce a  
</I>&gt;&gt;&gt;<i> &lt;t&gt;
</I>&gt;&gt;&gt;<i> element with the timestamp as a @at attribute, but that is again more
</I>&gt;&gt;&gt;<i> verbose. We could also introduce an @at attribute in &lt;span&gt; which would
</I>&gt;&gt;&gt;<i> then
</I>&gt;&gt;&gt;<i> at least end up in the DOM and can be dealt with specially.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What should numerical voices be replaced with? Personally I'd much  
</I>&gt;&gt;<i> rather
</I>&gt;&gt;<i> write &lt;philip&gt; and &lt;silvia&gt; to mark up a conversation between us two,  
</I>&gt;&gt;<i> as I
</I>&gt;&gt;<i> think it'd be quite hard to keep track of the numbers if editing  
</I>&gt;&gt;<i> subtitles
</I>&gt;&gt;<i> with many different speakers. However, going with that and using an HTML
</I>&gt;&gt;<i> parser is quite a hack. Names like &lt;mark&gt; and &lt;li&gt; may already have  
</I>&gt;&gt;<i> special
</I>&gt;&gt;<i> parsing rules or default CSS.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> In HTML it is &lt;span class=&quot;philip&quot;&gt;..&lt;/span&gt; and &lt;span
</I>&gt;<i> class=&quot;silvia&quot;&gt;...&lt;/span&gt;. I don't see anything wrong with that. And it's
</I>&gt;<i> only marginally longer than &lt;philip&gt; ... &lt;/philip&gt; and  
</I>&gt;<i> &lt;silvia&gt;...&lt;/silvia&gt;.
</I>&gt;<i>
</I>&gt;&gt;<i> Going with HTML in the cues, we either have to drop voices and inner
</I>&gt;&gt;<i> timestamps or invent new markup, as HTML can't express either. I don't  
</I>&gt;&gt;<i> think
</I>&gt;&gt;<i> either of those are really good solutions, so right now I'm not  
</I>&gt;&gt;<i> convinced
</I>&gt;&gt;<i> that reusing the innerHTML parser is a good way forward.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don't see a need for the voices - they already have markup in HTML, see
</I>&gt;<i> above. But I do wonder about the timestamps. I'd much rather keep the
</I>&gt;<i> innerHTML parser if we can, but I don't know enough about how the  
</I>&gt;<i> timestamps
</I>&gt;<i> could be introduced in a non-breakable manner. Maybe with a data-  
</I>&gt;<i> attribute?
</I>&gt;<i> Maybe &lt;span data-t=&quot;00:00:02.100&quot;&gt;...&lt;/span&gt;?
</I>
data- attributes are reserved for use by scripts on the same page, but we  
*could* of course introduce new elements or attributes for this purpose.  
However, adding features to HTML only for use in WebSRT seems a bit odd.

&gt;&gt;<i>  That would make text/srt and text/websrt synonymous, which is kind of
</I>&gt;&gt;&gt;&gt;<i> pointless.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> No, it's only pointless if you are a browser vendor. For everyone else  
</I>&gt;&gt;&gt;<i> it
</I>&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;<i> a huge advantage to be able to choose between a guaranteed simple  
</I>&gt;&gt;&gt;<i> format
</I>&gt;&gt;&gt;<i> and
</I>&gt;&gt;&gt;<i> a complex format with all the bells and whistles.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  The advantages of taking text/srt is that all existing software to  
</I>&gt;&gt;&gt;<i> create
</I>&gt;&gt;&gt;&gt;<i> SRT can be used to create WebSRT
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That's not strictly true. If they load a WebSRT file that was created  
</I>&gt;&gt;&gt;<i> by
</I>&gt;&gt;&gt;<i> some other software for further editing and that WebSRT file uses  
</I>&gt;&gt;&gt;<i> advanced
</I>&gt;&gt;&gt;<i> WebSRT functionality, the authoring software will break.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Right, especially settings appended after the timestamps are quite  
</I>&gt;&gt;<i> likely
</I>&gt;&gt;<i> to be stripped when saving the file.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Or may even break the software if it's badly implemented, or may end up
</I>&gt;<i> inside the cue text - just like the other control instructions which will
</I>&gt;<i> end up as plain text inside the cue. You won't believe how many people  
</I>&gt;<i> have
</I>&gt;<i> pointed out to me that my SRT test parser exposed an &lt;i&gt; tag markup in  
</I>&gt;<i> the
</I>&gt;<i> cue text rather than interpreting it, when I was experimenting with  
</I>&gt;<i> applying
</I>&gt;<i> SRT cues in a HTML div without touching the cue text content. Extraneous
</I>&gt;<i> markup is really annoying.
</I>
Indeed, but given the option of seeing no subtitles at all and seeing some  
markup from time to time, which do you prefer? For a long time I was using  
a media player that didn't handle &quot;HTML&quot; in SRT and wasn't very amused at  
seeing &lt;i&gt; and similar, but it was sure better than no subtitles at all. I  
doubt it will take long for popular software to start ignoring things  
trailing the timestamp and things in square brackets, which is all you  
need for basic &quot;compatibility&quot;. Some of the tested software already does  
so.

&gt;&gt;<i>  and servers that already send text/srt don't need to be updated. In  
</I>&gt;&gt;<i> either
</I>&gt;&gt;&gt;&gt;<i> case I think we should support only one mime type.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What's the harm in supporting two mime types but using the same parser  
</I>&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;<i> parse them?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Most content will most likely be plain old SRT without voices, &lt;ruby&gt; or
</I>&gt;&gt;<i> similar. People will create them using existing software with the .srt
</I>&gt;&gt;<i> extension and serve them using the text/srt MIME type. When they later
</I>&gt;&gt;<i> decide to add some &lt;ruby&gt; or similar, it will just work without  
</I>&gt;&gt;<i> changing the
</I>&gt;&gt;<i> extension or MIME type. The net result is that text/srt and text/websrt  
</I>&gt;&gt;<i> mean
</I>&gt;&gt;<i> exactly the same thing, making it a wasted effort.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From a Web browser perspective, yes. But not from a caption authoring
</I>&gt;<i> perspective. At first, I would author a SRT file. Later, I want to add  
</I>&gt;<i> some
</I>&gt;<i> fancy stuff. So, I load it into the application again. Then I add the  
</I>&gt;<i> fancy
</I>&gt;<i> stuff. It tells me that I cannot save it as SRT, but have to save it as
</I>&gt;<i> WebSRT, so I don't lose the information. Good! Now, the pipeline that I  
</I>&gt;<i> have
</I>&gt;<i> set up for SRT files transcoding and burning onto video and which cannot  
</I>&gt;<i> yet
</I>&gt;<i> deal with WebSRT will not accept the WebSRT file. Good again! Makes me
</I>&gt;<i> extend my pipeline or go to the provider and upgrade my software, so I  
</I>&gt;<i> get
</I>&gt;<i> the full feature support and the correct rendering. Excellent.
</I>
I think that as long as WebSRT is mostly compatible with SRT then people  
will keep using SRT tools, with the occasional mishap and disaster. I  
won't deny that it breaks expectations of what SRT is, but the alternative  
is to make WebSRT fundamentally incompatible so that not even media  
frameworks that rely on sniffing would treat it as SRT. However, unless  
&lt;track&gt; is a complete failure other applications will eventually want to  
support the format that browsers support, so inventing something  
completely new has a high cost too.

Since browser vendors get all the benefits and none of the problems it  
would be a mistake to only listen to us, of course. It might be worthwhile  
contacting developers of applications like VLC, Totem or MPlayer and ask  
precisely how annoyed they would be if suddenly one day they had to tweak  
their SRT parser because of WebSRT.

&gt;&gt;&gt;<i> Do you find MPlayer's behavior annoying because by rescaling already
</I>&gt;&gt;&gt;<i> rendered text, the text loses resolution and becomes less readable?  
</I>&gt;&gt;&gt;<i> This
</I>&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;<i> definitely not the behaviour I am after.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Scaling with the video is annoying with small videos, as the text ends  
</I>&gt;&gt;<i> up
</I>&gt;&gt;<i> being huge in fullscreen. I assume we're going to do scaling as well as  
</I>&gt;&gt;<i> we
</I>&gt;&gt;<i> can, so that's not an argument in either direction.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'll have to withdraw any opinion for now, I don't know how to best deal
</I>&gt;&gt;<i> with this.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes, I can imagine that on small video it's bad to scale the text down  
</I>&gt;<i> with
</I>&gt;<i> the video, since it becomes unreadable. I thought that a solution would  
</I>&gt;<i> be
</I>&gt;<i> to define the screen size for which the text was written and then scale  
</I>&gt;<i> the
</I>&gt;<i> text with the video. But maybe there is a function that needs to be  
</I>&gt;<i> applied
</I>&gt;<i> where there is a minimum font size below which one cannot go and a  
</I>&gt;<i> maximum
</I>&gt;<i> font size above which it's bad, too. It seems that scaling text at the  
</I>&gt;<i> same
</I>&gt;<i> rate as video is not appropriate. I wonder if there is an optimal  
</I>&gt;<i> function
</I>&gt;<i> that people have found to be best? Worth doing some experiments I guess.
</I>
A bit of a guess, but perhaps some combination of CSS3's calc(), min() and  
max() could help. If there's some particularly suitable formula, perhaps  
it could even be made part of the default stylesheet.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070139.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
	<LI>Next message: <A HREF="070166.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70144">[ date ]</a>
              <a href="thread.html#70144">[ thread ]</a>
              <a href="subject.html#70144">[ subject ]</a>
              <a href="author.html#70144">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
