<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: Discussing WebSRT and alternatives/improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3CAANLkTi%3DyQanFNMan_BathcmBX_vysAL5euXxf%2Bq-T87x%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070417.html">
   <LINK REL="Next"  HREF="070420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: Discussing WebSRT and alternatives/improvements</H1>
<!--htdig_noindex-->
    <B>Silvia Pfeiffer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3CAANLkTi%3DyQanFNMan_BathcmBX_vysAL5euXxf%2Bq-T87x%40mail.gmail.com%3E"
       TITLE="[whatwg] Fwd: Discussing WebSRT and alternatives/improvements">silviapfeiffer1 at gmail.com
       </A><BR>
    <I>Wed Aug 25 08:40:08 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070417.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
        <LI>Next message: <A HREF="070420.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70419">[ date ]</a>
              <a href="thread.html#70419">[ thread ]</a>
              <a href="subject.html#70419">[ subject ]</a>
              <a href="author.html#70419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Aug 26, 2010 at 12:39 AM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:

&gt;<i> On Wed, 25 Aug 2010 14:39:00 +0200, Silvia Pfeiffer &lt;
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>  On Wed, Aug 25, 2010 at 7:20 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>  The question, then, is if parsers that handle the mentioned markup also
</I>&gt;&gt;&gt;&gt;&gt;<i> ignore &lt;1&gt;, &lt;ruby&gt; and &lt;rt&gt;. I haven't tested it, but I assume that
</I>&gt;&gt;&gt;&gt;&gt;<i> some
</I>&gt;&gt;&gt;&gt;&gt;<i> will ignore it and some won't. How many percent of the media player
</I>&gt;&gt;&gt;&gt;&gt;<i> market
</I>&gt;&gt;&gt;&gt;&gt;<i> would have to handle this correctly for these extensions to be OK, in
</I>&gt;&gt;&gt;&gt;&gt;<i> your
</I>&gt;&gt;&gt;&gt;&gt;<i> opinion?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If a single one breaks, it would be bad IMO because the expectations of
</I>&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;<i> users of that software will be broken even if it may just be a small
</I>&gt;&gt;&gt;&gt;<i> percentage of users and we have no influence on the upgrade path of that
</I>&gt;&gt;&gt;&gt;<i> software - in particular if it is proprietary.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Neither a new file extension, MIME type or header is enough to stop some
</I>&gt;&gt;&gt;<i> implementations from treating it as SRT and break. The only remaining
</I>&gt;&gt;&gt;<i> option, AFAICT, is making the format fundamentally incompatible with SRT.
</I>&gt;&gt;&gt;<i> Is
</I>&gt;&gt;&gt;<i> it worth it?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If it has a different file extension and a different mime type and even a
</I>&gt;&gt;<i> different header, I don't think any existing software will open it as SRT.
</I>&gt;&gt;<i> Why would it think that a random file is a SRT file? It would need to be
</I>&gt;&gt;<i> an
</I>&gt;&gt;<i> application that accepts absolutely anything that you give it as SRT and
</I>&gt;&gt;<i> then that software has more fundamental problems.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I renamed a SRT file to .wsrt and added WEBSRT on a line before the cues
</I>&gt;<i> and it still plays just fine in MPlayer, using `mplayer video.ogv -sub
</I>&gt;<i> subs.wsrt`.
</I>


I wouldn't count command-line applications for this - you can always throw
just about anything at a command-line application and that is good and an
advantage, because it may just work, as it did here. But it is a controlled
environment by somebody who knows what they are doing - it is unlikely to
cause problems and confusion.



&gt;<i> VLC won't open a subtitle file with .wsrt extension, but the same file
</I>&gt;<i> (with a WEBSRT header) works with the extension srt or txt.
</I>

Again - that's a good thing and exactly what I would prefer. If you know
what you are doing and you know your file is probably just going to work,
you can consciously decide to fall back to SRT.



&gt;<i> Totem is the other way around, the file extension doesn't matter, but it
</I>&gt;<i> rejects files with a header.
</I>&gt;<i>
</I>
That's just proof that it's a different file format.



&gt;<i> The results are hardly consistent, but at least one player exist for which
</I>&gt;<i> it's not enough to change the file extension and add a header. If we want to
</I>&gt;<i> make sure that no content is treated as SRT by any application, the format
</I>&gt;<i> must be more incompatible.
</I>

You misunderstand my intent. I am by no means suggesting that no WebSRT
content is treated as SRT by any application. All I am asking for is a
different file extension and a different mime type and possibly a magic
identifier such that *authoring* applications (and authors) can clearly
designate this to be a different format, in particular if they include new
features. Then a *playback application* has the chance to identify them as a
different format and provide a specific parser for it, instead of failing
like Totem. They can also decide to extend their existing SRT parser to
support both WebSRT and SRT. And I also have no issue with a user deciding
to give a WebSRT file a go by renaming it to .srt.

By keeping WebSRT and SRT as different formats we give the applications a
choice to support either, or both in the same parser. If we don't, we force
them to deal in a single parser with all the oddities of SRT formats as well
as all the extra features and all the extensibility of WebSRT.



&gt;<i>
</I>&gt;<i>  At this point, what is your recommendation? The following ideas have been
</I>&gt;&gt;&gt;&gt;&gt;<i> on the table:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> * Change the file extension to something other than .srt.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I don't have an opinion, browsers ignore the file extension anyway.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  Yes, I think we should definitely have a new file extension.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'll leave this to others to decide, but since browsers have no concept
</I>&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;<i> file extensions, just using .srt will work. If the format is SRT-like
</I>&gt;&gt;&gt;<i> it's
</I>&gt;&gt;&gt;<i> likely at least some files will use .srt in practice.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All SRT files in practice use the .srt extension - it is typically how
</I>&gt;&gt;<i> these
</I>&gt;&gt;<i> formats are identified by applications. Just because *nix ignores file
</I>&gt;&gt;<i> extensions mostly for identifying file types doesn't mean that
</I>&gt;&gt;<i> applications
</I>&gt;&gt;<i> do. Again, I believe strongly that re-using the same file extension is the
</I>&gt;&gt;<i> one biggest pain we can inflict on the community.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> As shown above, several popular (?) media players ignore or give little
</I>&gt;<i> weight to the file extension.
</I>

I don't think that's a fair sample - as I said, on Linux and on the
command-line things are different. I have a GUI mplayer here and it reacts
like VLC - doesn't let me open .wsrt files. The vast majority of
applications on Windows and the Mac make their decision on whether they
support files based on the file extension.

Assuming we pick the same file extension and we now have a new application
that only supports WebSRT parsing, we will make a large bunch of existing
valid SRT files invalid - not only those that are not in UTF-8, but also
those with &lt;font&gt;..&lt;/font&gt; and &lt;u&gt;...&lt;/u&gt;. I do wonder if the text between
the &lt;font&gt; start and end element and inside the &lt;u&gt;..&lt;/u&gt; may even get
removed because of lack of support for these.



&gt;<i>
</I>&gt;<i>   * Change the MIME type to something other than text/srt.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I doubt it makes any difference, as most software that deal with SRT
</I>&gt;&gt;&gt;&gt;&gt;<i> today
</I>&gt;&gt;&gt;&gt;&gt;<i> have no concept of MIME types. No matter what I'd want exactly 1 MIME
</I>&gt;&gt;&gt;&gt;&gt;<i> type
</I>&gt;&gt;&gt;&gt;&gt;<i> or alternatively make browsers ignore the MIME type completely.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  You're right in that existing SRT software probably doesn't deal much
</I>&gt;&gt;&gt;&gt;<i> with
</I>&gt;&gt;&gt;&gt;<i> a
</I>&gt;&gt;&gt;&gt;<i> SRT mime type. Right now text/x-srt or text/srt is sometimes used for
</I>&gt;&gt;&gt;&gt;<i> SRT
</I>&gt;&gt;&gt;&gt;<i> files, but often text/plain is also in use and more likely from a Web
</I>&gt;&gt;&gt;&gt;<i> server. Since this is the space where Web browsers play, I am not overly
</I>&gt;&gt;&gt;&gt;<i> fussed, though I think logically text/websrt makes more sense with a
</I>&gt;&gt;&gt;&gt;<i> .wsrt
</I>&gt;&gt;&gt;&gt;<i> extension. Then, also SRT files can be served as text/websrt to allow
</I>&gt;&gt;&gt;&gt;<i> them
</I>&gt;&gt;&gt;&gt;<i> to take part in the WebSRT infrastructure if indeed they will continue
</I>&gt;&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;&gt;<i> be
</I>&gt;&gt;&gt;&gt;<i> valid WebSRT files.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Is there anything you expect would break if WebSRT files were served as
</I>&gt;&gt;&gt;<i> text/srt?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm asking because I don't know how anal Web browsers are about mime
</I>&gt;&gt;<i> types.
</I>&gt;&gt;<i> I would think a Web browser should accept WebSRT and SRT files in
</I>&gt;&gt;<i> text/plain
</I>&gt;&gt;<i> format as well as WebSRT files in text/websrt format and SRT files in
</I>&gt;&gt;<i> text/srt format. Would something break if they even came as text/html? I
</I>&gt;&gt;<i> would expect that it makes a difference when these are loaded directly as
</I>&gt;&gt;<i> a
</I>&gt;&gt;<i> resource for display (e.g. when you directly go to
</I>&gt;&gt;<i> <A HREF="http://example.com/mycaptions.wsrt">http://example.com/mycaptions.wsrt</A>), but not when used through a &lt;track&gt;
</I>&gt;&gt;<i> element, where WebSRT is the baseline format and thus is expected.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It's actually easier for a browser to ignore the MIME type than it is to be
</I>&gt;<i> strict about it, at least when the format is easily identified by sniffing
</I>&gt;<i> (sniffing code is needed anyway for local files). WebSRT isn't very easy to
</I>&gt;<i> sniff, so that would be an argument in favor of a mandatory magic header.
</I>&gt;<i>
</I>&gt;<i> The main reason to care about the MIME type is some kind of &quot;doing the
</I>&gt;<i> right thing&quot; by not letting people get away with misconfigured servers.
</I>&gt;<i> Sometimes I feel it's just a waste of everyone's time though, it would
</I>&gt;<i> generally be less work for both browsers and authors to not bother.
</I>

That is happening with video right now. Eric from Apple just shared a nice
accessibility video, but because he has no access to the setup of the server
at apple.com, he cannot reconfigure it to support the video/ogg mime type,
with the result that in Firefox I cannot watch it even though there is a Ogg
file present.

I think if we can let people get away with serving text/plain on a WebSRT
file, but actually requesting text/websrt be used, that would be the best.



&gt;<i>   * Add a header to WebSRT to make it uniquely identifiable.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The header would have to be mandatory and browsers would have to reject
</I>&gt;&gt;&gt;&gt;&gt;<i> files that don't have it. Such files would be compatible with some
</I>&gt;&gt;&gt;&gt;&gt;<i> existing
</I>&gt;&gt;&gt;&gt;&gt;<i> software and break some, depending on how they sniff. We could also put
</I>&gt;&gt;&gt;&gt;&gt;<i> metadata in such a header.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  Yes, I think we need to introduce a header. Maybe we can hide all the
</I>&gt;&gt;&gt;&gt;<i> structure in what SRT recognizes as comments (i.e. start the lines as
</I>&gt;&gt;&gt;&gt;<i> &quot;;&quot;.
</I>&gt;&gt;&gt;&gt;<i> But I believe we need some hints like the @profile to identify the type
</I>&gt;&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;&gt;<i> the cues and the &lt;link&gt; to link to a style sheet, and we need metadata
</I>&gt;&gt;&gt;&gt;<i> like
</I>&gt;&gt;&gt;&gt;<i> the &lt;meta&gt; element of HTML headers.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I had no idea that semicolon was used for comments in SRT, is this usage
</I>&gt;&gt;&gt;<i> widespread? Does it work in most players?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I thought it was, but maybe it was just introduced for WebSRT. It is not
</I>&gt;&gt;<i> tested in Hixie's SRT research[2]. Can you take a quick look through your
</I>&gt;&gt;<i> SRT file collection if there are any? I'm probably wrong about this seeing
</I>&gt;&gt;<i> as it's not mentioned in the wiki page for SRT [3].
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [2] <A HREF="http://wiki.whatwg.org/wiki/SRT_research">http://wiki.whatwg.org/wiki/SRT_research</A>
</I>&gt;&gt;<i> [3] <A HREF="http://en.wikipedia.org/wiki/SubRip">http://en.wikipedia.org/wiki/SubRip</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> OK, I grepped the 10000 files. Only 15 had any lines beginning with a
</I>&gt;<i> semicolon, and by manual inspection it doesn't look like any of them are
</I>&gt;<i> clearly intended as comments (it's hard to tell, all are in foreign
</I>&gt;<i> languages). None of them were at the very beginning of the file.
</I>

Ah, that actually makes for another incompatibility of WebSRT and SRT: such
lines are regarded as comments in WebSRT when they probably aren't in SRT.
It seems increasingly that the only thing that WebSRT and SRT still have in
common is the &quot;--&gt;&quot; character sequence. As a friend of mine in a11y recently
said: &quot;I was hoping to never have to stare at &quot;--&gt;&quot; ever again... We could
indeed go all the way and define an much more different format, though I
don't think it will create implementations as quickly as a SRT-based but
changed format.



&gt;<i> I think we've made some interesting finds in this thread, but we're
</I>&gt;<i> starting to go in circles by now. Perhaps we should give it a rest until we
</I>&gt;<i> get input from a third party. A medal to anyone who has followed it this far
</I>&gt;<i> :)
</I>

I was surprised how much new stuff we have added in the last 2 days. But I
agree - we are starting to go in circles. :)

Cheers,
Silvia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100826/9900206e/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100826/9900206e/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070417.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
	<LI>Next message: <A HREF="070420.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70419">[ date ]</a>
              <a href="thread.html#70419">[ thread ]</a>
              <a href="subject.html#70419">[ subject ]</a>
              <a href="author.html#70419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
