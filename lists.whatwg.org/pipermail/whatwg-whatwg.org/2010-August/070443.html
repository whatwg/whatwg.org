<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] base64 entities
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20base64%20entities&In-Reply-To=%3CAANLkTimykTCbOw3F0_v9AW0N-rO4rN409NapcqRwd14W%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070428.html">
   <LINK REL="Next"  HREF="070447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] base64 entities</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20base64%20entities&In-Reply-To=%3CAANLkTimykTCbOw3F0_v9AW0N-rO4rN409NapcqRwd14W%40mail.gmail.com%3E"
       TITLE="[whatwg] base64 entities">w3c at adambarth.com
       </A><BR>
    <I>Wed Aug 25 16:41:18 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070428.html">[whatwg] base64 entities
</A></li>
        <LI>Next message: <A HREF="070447.html">[whatwg] base64 entities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70443">[ date ]</a>
              <a href="thread.html#70443">[ thread ]</a>
              <a href="subject.html#70443">[ subject ]</a>
              <a href="author.html#70443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Aug 25, 2010 at 1:55 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Wed, 25 Aug 2010, Adam Barth wrote:
</I>&gt;&gt;<i> HTML should support Base64-encoded entities to make it easier for
</I>&gt;&gt;<i> authors to include untrusted content in their documents without
</I>&gt;&gt;<i> risking XSS.
</I>&gt;<i>
</I>&gt;<i> Seems like a fine idea. Get browsers to implement it and I'll spec it.
</I>
I've posted a patch for WebKit:

<A HREF="https://bugs.webkit.org/show_bug.cgi?id=44641">https://bugs.webkit.org/show_bug.cgi?id=44641</A>

Some subtleties:

1) Some base64 decoders tolerate newlines.  We don't want to decode
entities with newlines.
2) Decoding base64 results in binary data.  We'll need to convert that
data to characters in order to deal with it in the DOM.  We use always
use UTF8 for that transformation, regardless of the document's
encoding.
3) Null characters are replaced with U+FFFD.
4) The empty base64 entity &amp;%; is consumed and is replaced with the
empty string.
5) Invalid base64 is rejected and the entity is not decoded.

Adam

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070428.html">[whatwg] base64 entities
</A></li>
	<LI>Next message: <A HREF="070447.html">[whatwg] base64 entities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70443">[ date ]</a>
              <a href="thread.html#70443">[ thread ]</a>
              <a href="subject.html#70443">[ subject ]</a>
              <a href="author.html#70443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
