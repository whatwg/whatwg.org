<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Javascript: URLs as element attributes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Javascript%3A%20URLs%20as%20element%20attributes&In-Reply-To=%3CAANLkTikQLmHNv_nLBjUBrSDXdaTJR3%3DqAs2uxX09X6Nm%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070163.html">
   <LINK REL="Next"  HREF="070156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Javascript: URLs as element attributes</H1>
<!--htdig_noindex-->
    <B>Cris Neckar</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Javascript%3A%20URLs%20as%20element%20attributes&In-Reply-To=%3CAANLkTikQLmHNv_nLBjUBrSDXdaTJR3%3DqAs2uxX09X6Nm%40mail.gmail.com%3E"
       TITLE="[whatwg] Javascript: URLs as element attributes">cdn at chromium.org
       </A><BR>
    <I>Wed Aug 11 16:58:51 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070163.html">[whatwg] Javascript: URLs as element attributes
</A></li>
        <LI>Next message: <A HREF="070156.html">[whatwg] Scrollable Tables and HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70164">[ date ]</a>
              <a href="thread.html#70164">[ thread ]</a>
              <a href="subject.html#70164">[ subject ]</a>
              <a href="author.html#70164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Resending from the correct address

---------- Forwarded message ----------
From: Cris Neckar &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cdn at google.com</A>&gt;
Date: Wed, Aug 11, 2010 at 11:57 AM
Subject: Javascript: URLs as element attributes
To: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at whatwg.org</A>
Cc: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>


The HTML5 Spec is somewhat ambiguous on the handling of javascript:
URLs when supplied as attributes to different elements. It does not
specifically prohibit handling them in most cases but I was wondering
if this has been discussed and whether there is consensus on correct
behavior.

There are several areas of the spec that specifically reference the
use of javascript: URLs as the &quot;src&quot; attribute for &quot;img&quot; nodes but
this is not universal.

For example see <A HREF="http://dev.w3.org/html5/spec/Overview.html#introduction-3">http://dev.w3.org/html5/spec/Overview.html#introduction-3</A>

6.1.1
&quot;Processing of inline javascript: URLs (e.g. the src attribute of img
elements, or an @import rule in a CSS style element block).&quot;

And <A HREF="http://dev.w3.org/html5/spec/Overview.html#javascript-protocol">http://dev.w3.org/html5/spec/Overview.html#javascript-protocol</A>

6.1.5
&quot;So for example a javascript: URL for a src attribute of an img
element would be evaluated in the context of an empty object as soon
as the attribute is set; it would then be sniffed to determine the
image type and decoded as an image.&quot;

Browsers currently deal with these in a fairly ad-hoc way. I used the
following to test a few examples in various browsers.

&#160; &#160;&lt;embed src=&quot;javascript:alert('embed-src');&quot;&gt;&lt;/embed&gt;
&#160; &#160;&lt;embed src=&quot;<A HREF="http://none">http://none</A>&quot;
pluginurl=&quot;javascript:alert('embed-pluginurl');&quot;&gt;&lt;/embed&gt;
&#160; &#160;&lt;object classid=&quot;javascript:alert('object-classid');&quot;&gt;&lt;/object&gt;
&#160; &#160;&lt;object archive=&quot;javascript:alert('object-archive');&quot;&gt;&lt;/object&gt;
&#160; &#160;&lt;object data=&quot;javascript:alert('object-data');&quot;&gt;&lt;/object&gt;
&#160; &#160;&lt;img src=&quot;javascript:alert('img-src');&quot;&gt;
&#160; &#160;&lt;script src=&quot;javascript:alert('script-src');&quot;&gt;&lt;/script&gt;
&#160; &#160;&lt;applet code=&quot;javascript:alert('applet-code');&quot;&gt;&lt;/applet&gt;
&#160; &#160;&lt;applet code=&quot;<A HREF="http://none">http://none</A>&quot;
archive=&quot;javascript:alert('applet-archive');&quot;&gt;&lt;/applet&gt;
&#160; &#160;&lt;applet code=&quot;<A HREF="http://none">http://none</A>&quot;
codebase=&quot;javascript:alert('applet-codebase');&quot;&gt;&lt;/applet&gt;
&#160; &#160;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot;
href=&quot;javascript:alert('link-href');&quot; /&gt;

IE 8: Blocks all tests
Chrome 5.0.375: object.data, embed.src, Blocks all others.
Firefox 3.6.3: Allows object.data, applet.code, and embed.src. Blocks
all others.
Firefox 3.7.863: Allows object.data and embed.src. Blocks all others.
Opera 10.54: script.src and object.data. Blocks all others.


Has there been discussion on this in the past? If not we should work
towards defining which of these we want to allow and which we should
block.

Thank you,
-cris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070163.html">[whatwg] Javascript: URLs as element attributes
</A></li>
	<LI>Next message: <A HREF="070156.html">[whatwg] Scrollable Tables and HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70164">[ date ]</a>
              <a href="thread.html#70164">[ thread ]</a>
              <a href="subject.html#70164">[ subject ]</a>
              <a href="author.html#70164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
