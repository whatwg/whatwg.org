<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: Discussing WebSRT and alternatives/improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vhvu2vw4sr6mfa%40philip-pc.gothenburg.osa%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070308.html">
   <LINK REL="Next"  HREF="070355.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: Discussing WebSRT and alternatives/improvements</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vhvu2vw4sr6mfa%40philip-pc.gothenburg.osa%3E"
       TITLE="[whatwg] Fwd: Discussing WebSRT and alternatives/improvements">philipj at opera.com
       </A><BR>
    <I>Mon Aug 23 01:55:33 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070308.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
        <LI>Next message: <A HREF="070355.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70345">[ date ]</a>
              <a href="thread.html#70345">[ thread ]</a>
              <a href="subject.html#70345">[ subject ]</a>
              <a href="author.html#70345">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 21 Aug 2010 01:32:49 +0200, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> On Fri, Aug 20, 2010 at 10:53 PM, Philip J&#228;genstedt  
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Wed, 18 Aug 2010 00:42:04 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  On Thu, Aug 12, 2010 at 6:09 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Yeah, so the only conforming solution is probably to use CSS3
</I>&gt;&gt;&gt;<i> transition-delay property. That may not be the most elegant solution,  
</I>&gt;&gt;&gt;<i> but
</I>&gt;&gt;&gt;<i> it
</I>&gt;&gt;&gt;<i> works.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So, it seems clear that in order to use an HTML parser we have to  
</I>&gt;&gt;<i> sacrifice some features or make them more verbose.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> That sounds like there are multiple problems, when in fact we are only
</I>&gt;<i> talking about the single use case of timestamps.
</I>
I was referring also to the voices markup which is made much more verbose.

&gt;<i> All other requirements are
</I>&gt;<i> met by the existing innerHTML parser. Is it really necessary to throw out
</I>&gt;<i> all the advantages of re-using innerHTML just to avoid some extra markup  
</I>&gt;<i> for this single use case?
</I>
No, this isn't a critical use case in itself. I'm not fundamentally  
opposed to using an HTML parser, I just don't see any great benefits, but  
some complications.

&gt;&gt;<i> The whole of the WebSRT parser isn't very big or complicated, so I don't
</I>&gt;&gt;<i> think implementation cost is a strong argument for reusing the HTML  
</I>&gt;&gt;<i> parser,
</I>&gt;&gt;<i> especially since at least the timing syntax needs a separate parser.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It's not just about implementation cost - it's also the problem of
</I>&gt;<i> maintaining another spec that can grow to have eventually all the  
</I>&gt;<i> features
</I>&gt;<i> that HTML5 has and more. Do you really eventually want to re-spec and
</I>&gt;<i> re-implement a whole innerHTML parser plus the extra &lt;t&gt; element when we
</I>&gt;<i> start putting &lt;svg&gt; and &lt;canvas&gt; and all sorts of other more complex HTML
</I>&gt;<i> features into captions? Just because the &lt;t&gt; element is making trouble  
</I>&gt;<i> now?
</I>&gt;<i> Is this really the time to re-invent HTML?
</I>
I don't expect that SVG, &lt;canvas&gt;, images, etc will ever natively be made  
part of captions. Rather, I would hope that the metadata state together  
with scripts is used. If we think that e.g. images in captions are an  
important use case, then WebSRT is not a good solution.

If we allow arbitrary HTML and expect browsers to handle it well, it adds  
some complexity. For example, any videos and images in the cue would have  
to be fully loaded and ready to be decoded by the time the cue is to be  
shown, which I really don't want to implement the logic for. Simply having  
an iframe-like container where the document is replaced for each cue  
wouldn't be enough, rather one would have to create one document per cue  
during parsing and wait for all of those to finish loading before  
beginning playback. I'm not sure, but I'm guessing that amounts to  
significant memory overhead.

As an aside, I personally see it as a good things that &lt;font&gt; *doesn't*  
work in WebSRT, whereas it would using an HTML parser.

&gt;&gt;<i> It's a bit more than just annoying to users. If there are automated
</I>&gt;&gt;&gt;<i> processes involved that print that stuff on tape for example, you can  
</I>&gt;&gt;&gt;<i> burn
</I>&gt;&gt;&gt;<i> through a lot of material and money before realising that your input  
</I>&gt;&gt;&gt;<i> files
</I>&gt;&gt;&gt;<i> are &quot;broken&quot; and if you cannot get software support for the new files
</I>&gt;&gt;&gt;<i> implemented, you may need to implement costly manual checking of the
</I>&gt;&gt;&gt;<i> files.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> SRT as it is today can and does contain broken timestamps, missing
</I>&gt;&gt;<i> linebreaks and at least &lt;i&gt;, &lt;b&gt;, &lt;u&gt; and &lt;font ...&gt; markup, some of  
</I>&gt;&gt;<i> which
</I>&gt;&gt;<i> is broken. If anyone is able to to rely on their input as being  
</I>&gt;&gt;<i> well-formed
</I>&gt;&gt;<i> enough as to be put through automatic but costly processes, they'd have  
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> have very good control of where their input comes from. I can't see how
</I>&gt;&gt;<i> WebSRT would change that.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I would indeed expect a fairly trusted relationship with the supplier.  
</I>&gt;<i> But
</I>&gt;<i> assuming your supplier changes from SRT to WebSRT support in their  
</I>&gt;<i> captions.
</I>&gt;<i> If they have two different file extensions, you will notice immediately  
</I>&gt;<i> and
</I>&gt;<i> there is a trigger to actually start implementing WebSRT support. If they
</I>&gt;<i> are the same file extension, that will cause the trouble I explained. If  
</I>&gt;<i> at
</I>&gt;<i> least there was a version identifier in existing SRT, then we wouldn't  
</I>&gt;<i> have
</I>&gt;<i> that trouble at all. But we've had this discussion.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>  The core &quot;problem&quot; is that WebSRT is far too compatible with existing  
</I>&gt;&gt;<i> SRT
</I>&gt;&gt;&gt;&gt;<i> usage. Regardless of the file extension and MIME type used, it's quite
</I>&gt;&gt;&gt;&gt;<i> improbable that anyone will have different parsers for the same  
</I>&gt;&gt;&gt;&gt;<i> format.
</I>&gt;&gt;&gt;&gt;<i> Once
</I>&gt;&gt;&gt;&gt;<i> media players have been forced to handle the extra markup in WebSRT  
</I>&gt;&gt;&gt;&gt;<i> (e.g.
</I>&gt;&gt;&gt;&gt;<i> by
</I>&gt;&gt;&gt;&gt;<i> ignoring it, as many already do) the two formats will be the same, and
</I>&gt;&gt;&gt;&gt;<i> using
</I>&gt;&gt;&gt;&gt;<i> WebSRT markup in .srt files will just work, so that's what people will
</I>&gt;&gt;&gt;&gt;<i> do.
</I>&gt;&gt;&gt;&gt;<i> We may avoid being seen as arrogant format-hijackers, but the end  
</I>&gt;&gt;&gt;&gt;<i> result
</I>&gt;&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;&gt;<i> two extensions and two different MIME types that mean exactly the same
</I>&gt;&gt;&gt;&gt;<i> thing.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It actually burns down to the question: do we want the simple SRT  
</I>&gt;&gt;&gt;<i> format
</I>&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;<i> survive as its own format and be something that people can rely upon as
</I>&gt;&gt;&gt;<i> not
</I>&gt;&gt;&gt;<i> having &quot;weird stuff&quot; in it - or do we not. I believe that it's  
</I>&gt;&gt;&gt;<i> important
</I>&gt;&gt;&gt;<i> that it survives. WebSRT can have absolutely anything in it, including
</I>&gt;&gt;&gt;<i> code
</I>&gt;&gt;&gt;<i> and binary data, even if that stuff would not be interpreted in a  
</I>&gt;&gt;&gt;<i> browser,
</I>&gt;&gt;&gt;<i> but handed on to the JavaScript API for a JavaScript routine to do
</I>&gt;&gt;&gt;<i> something
</I>&gt;&gt;&gt;<i> with it. It is a great extensible platform. But the advantage of SRT is
</I>&gt;&gt;&gt;<i> that
</I>&gt;&gt;&gt;<i> it is simple and reliably simple. We completely remove this option by
</I>&gt;&gt;&gt;<i> stealing the format.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've collected some statistics on existing SRT content that I intend to
</I>&gt;&gt;<i> publish soonish. For now, I'll just note that &gt;50% contain some form of
</I>&gt;&gt;<i> markup. Adding to this various ways in which the files could be broken,  
</I>&gt;&gt;<i> it
</I>&gt;&gt;<i> seems to me that SRT as deployed is neither really simple nor reliable.
</I>&gt;&gt;<i> Private use of SRT is of course simple and reliable, but that will be  
</I>&gt;&gt;<i> true
</I>&gt;&gt;<i> in the future too.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Honestly, using the existing small mess around SRT as an excuse to turn  
</I>&gt;<i> it
</I>&gt;<i> into a huge mess doesn't seem a good argument to me.
</I>
I'm just saying that SRT isn't a plain text format today and anyone who's  
able to assume it is can only do so because they control the input.

Deployed SRT uses &lt;i&gt;, &lt;b&gt;, &lt;font&gt; and &lt;u&gt;. WebSRT adds &lt;ruby&gt;, &lt;rt&gt; and  
&lt;1&gt;...&lt;infinity&gt;, extensions which are very much in line with the existing  
format and already &quot;works&quot; in many players (in the sense that they are  
ignored, not rendered). I wouldn't call that a huge mess.

&gt;&gt;<i> Aside: WebSRT can't contain binary data, only UTF-8 encoded text.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It sure can. Just base-64 encode it. I'm not saying it's a good thing,  
</I>&gt;<i> but
</I>&gt;<i> if somebody really has an urge...
</I>
Sure, this would be a metadata track. Sites have no reason to offer  
download links to it, and if anyone gets hold of such a file it would  
quickly be evident that it's useless.

&gt;&gt;<i>   Since browser vendors get all the benefits and none of the problems it
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> would be a mistake to only listen to us, of course. It might be
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> worthwhile
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> contacting developers of applications like VLC, Totem or MPlayer and
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> ask
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> precisely how annoyed they would be if suddenly one day they had to
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> tweak
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> their SRT parser because of WebSRT.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Some of them have already spoken:
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://forum.doom9.org/showthread.php?p=1396576">http://forum.doom9.org/showthread.php?p=1396576</A> &quot;Extending SRT is a
</I>&gt;&gt;&gt;&gt;&gt;<i> very
</I>&gt;&gt;&gt;&gt;&gt;<i> bad
</I>&gt;&gt;&gt;&gt;&gt;<i> idea&quot; etc etc. Also, I've had feedback from other subtitle  
</I>&gt;&gt;&gt;&gt;&gt;<i> professionals
</I>&gt;&gt;&gt;&gt;&gt;<i> that are also against extending SRT, the main reasons being to break
</I>&gt;&gt;&gt;&gt;&gt;<i> existing working software environments.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The only way to really avoid messing with the ecosystem is to invent a
</I>&gt;&gt;&gt;&gt;<i> completely new format. The choice is between something that won't  
</I>&gt;&gt;&gt;&gt;<i> work at
</I>&gt;&gt;&gt;&gt;<i> all in non-browsers and something that will mostly work.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If you look at it realistically, we *are* inventing a completely new
</I>&gt;&gt;&gt;<i> format.
</I>&gt;&gt;&gt;<i> WebSRT only on the surface has some resemblance with SRT. When you dig
</I>&gt;&gt;&gt;<i> deeper, it is a completely different format with different aims and
</I>&gt;&gt;&gt;<i> applications. Yes, it covers all the SRT aims and applications, but it
</I>&gt;&gt;&gt;<i> does
</I>&gt;&gt;&gt;<i> so much more! Only some of it will work in non-browsers, others will
</I>&gt;&gt;&gt;<i> utterly
</I>&gt;&gt;&gt;<i> fail and will completely disrupt an already working ecosystem. I think  
</I>&gt;&gt;&gt;<i> it
</I>&gt;&gt;&gt;<i> may even have a really bad effect if we introduce WebSRT as SRT in that
</I>&gt;&gt;&gt;<i> authoring software will refrain from implementing support for the  
</I>&gt;&gt;&gt;<i> richer
</I>&gt;&gt;&gt;<i> features in order not to disrupt the existing software ecosystem. In  
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> end
</I>&gt;&gt;&gt;<i> we might end up with a lot of unsupported features in WebSRT an no real
</I>&gt;&gt;&gt;<i> progress. I much prefer having progress with a transition period with
</I>&gt;&gt;&gt;<i> conscious decisions to support the extra features.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As long as WebSRT is similar enough to SRT that software developers can  
</I>&gt;&gt;<i> use
</I>&gt;&gt;<i> the same parser for both, they will effectively become the same format.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There is a difference between &quot;being the same format&quot; and &quot;superceding&quot;.  
</I>&gt;<i> I
</I>&gt;<i> believe strongly that WebSRT will supercede SRT. But if we make it the  
</I>&gt;<i> &quot;same
</I>&gt;<i> format&quot;, we simply inherit the mess that already exists. All those broken
</I>&gt;<i> SRT files will continue to be broken WebSRT files. Just by taking over  
</I>&gt;<i> the
</I>&gt;<i> format, we will not magically do away with the existing mess.
</I>
Right, if the syntax is largely compatible with SRT then all the mess of  
SRT has to be dealt with. Not dealing with it would be quite  
irresponsible, in which case we should make the syntax fundamentally  
incompatible with SRT and forget about it.

Adding a magic number and header to WebSRT might be a good thing to do for  
various reasons, but it's not enough to make the format incompatible with  
all SRT parsers.

&gt;&gt;<i> If we define WebSRT in a way that can handle &gt;99% of existing content  
</I>&gt;&gt;<i> and
</I>&gt;&gt;<i> degrade gracefully (enough) when using new features in old software, it
</I>&gt;&gt;<i> seems reasonable to do. If lots of software developers cry foul, then
</I>&gt;&gt;<i> perhaps we should reconsider. It seems to me, though, that actually
</I>&gt;&gt;<i> researching and defining a good algorithm for parsing SRT would be of  
</I>&gt;&gt;<i> use to
</I>&gt;&gt;<i> others than just browsers.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> How is that different from moving away from SRT. If everyone has to  
</I>&gt;<i> change
</I>&gt;<i> their parsing of SRT to accommodate a new spec, then that is a new  
</I>&gt;<i> format.
</I>
Not everyone has to change their parsers immediately, many will continue  
to work. However, if someone wants to support SRT in a compatible way,  
it's very helpful to have a spec, assuming that WebSRT is actually  
compatible enough with existing SRT content.

This is quite similar to HTML4 vs HTML5. There are lots of mostly  
compatible HTML parsers, but HTML5 defines a single parsing algorithm, and  
slow convergence towards that is a good thing.

If the SRT ecosystem is so fragile that it cannot tolerate any extension  
whatsoever, then we should stay far away from it. It just seems that's not  
the case.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070308.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
	<LI>Next message: <A HREF="070355.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70345">[ date ]</a>
              <a href="thread.html#70345">[ thread ]</a>
              <a href="subject.html#70345">[ subject ]</a>
              <a href="author.html#70345">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
