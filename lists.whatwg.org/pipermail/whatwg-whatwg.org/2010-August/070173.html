<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: Discussing WebSRT and alternatives/improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vhbfmuwqsr6mfa%40philip-pc.gothenburg.osa%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070166.html">
   <LINK REL="Next"  HREF="070268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: Discussing WebSRT and alternatives/improvements</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20Discussing%20WebSRT%20and%20alternatives/improvements&In-Reply-To=%3Cop.vhbfmuwqsr6mfa%40philip-pc.gothenburg.osa%3E"
       TITLE="[whatwg] Fwd: Discussing WebSRT and alternatives/improvements">philipj at opera.com
       </A><BR>
    <I>Thu Aug 12 01:09:56 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="070166.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
        <LI>Next message: <A HREF="070268.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70173">[ date ]</a>
              <a href="thread.html#70173">[ thread ]</a>
              <a href="subject.html#70173">[ subject ]</a>
              <a href="author.html#70173">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 12 Aug 2010 02:11:55 +0200, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> On Thu, Aug 12, 2010 at 1:26 AM, Philip J&#228;genstedt  
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Wed, 11 Aug 2010 15:38:32 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  On Wed, Aug 11, 2010 at 10:30 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>
</I>&gt;&gt;&gt;<i> &gt;wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  On Wed, 11 Aug 2010 01:43:01 +0200, Silvia Pfeiffer &lt;
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  Going with HTML in the cues, we either have to drop voices and inner
</I>&gt;&gt;&gt;&gt;<i> timestamps or invent new markup, as HTML can't express either. I don't
</I>&gt;&gt;&gt;&gt;<i> think
</I>&gt;&gt;&gt;&gt;<i> either of those are really good solutions, so right now I'm not  
</I>&gt;&gt;&gt;&gt;<i> convinced
</I>&gt;&gt;&gt;&gt;<i> that reusing the innerHTML parser is a good way forward.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I don't see a need for the voices - they already have markup in HTML,  
</I>&gt;&gt;&gt;<i> see
</I>&gt;&gt;&gt;<i> above. But I do wonder about the timestamps. I'd much rather keep the
</I>&gt;&gt;&gt;<i> innerHTML parser if we can, but I don't know enough about how the
</I>&gt;&gt;&gt;<i> timestamps
</I>&gt;&gt;&gt;<i> could be introduced in a non-breakable manner. Maybe with a data-
</I>&gt;&gt;&gt;<i> attribute?
</I>&gt;&gt;&gt;<i> Maybe &lt;span data-t=&quot;00:00:02.100&quot;&gt;...&lt;/span&gt;?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> data- attributes are reserved for use by scripts on the same page, but  
</I>&gt;&gt;<i> we
</I>&gt;&gt;<i> *could* of course introduce new elements or attributes for this purpose.
</I>&gt;&gt;<i> However, adding features to HTML only for use in WebSRT seems a bit odd.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'd rather avoid adding features to HTML only for WebSRT. Ian turned the
</I>&gt;<i> &lt;timestamps&gt; into ProcessingInstructions
</I>&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/websrt.html#websrt-cue-text-dom-construction-rules.">http://www.whatwg.org/specs/web-apps/current-work/websrt.html#websrt-cue-text-dom-construction-rules.</A>
</I>&gt;<i> Could we introduce something like &lt;?t at=&quot;00:00:02.100&quot;?&gt; without
</I>&gt;<i> breaking
</I>&gt;<i> the innerHTML parser?
</I>
It appears that the innerHTML parser in at least Opera and Firefox handles  
PIs in some manner, see test at  
&lt;<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/587">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/587</A>&gt;

However, it isn't valid HTML, validator.nu says &quot;Saw &lt;?. Probable cause:  
Attempt to use an XML processing instruction in HTML. (XML processing  
instructions are not supported in HTML.)&quot;

&gt;&gt;<i>   That would make text/srt and text/websrt synonymous, which is kind of
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> pointless.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> No, it's only pointless if you are a browser vendor. For everyone  
</I>&gt;&gt;&gt;&gt;&gt;<i> else
</I>&gt;&gt;&gt;&gt;&gt;<i> it
</I>&gt;&gt;&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;&gt;&gt;<i> a huge advantage to be able to choose between a guaranteed simple  
</I>&gt;&gt;&gt;&gt;&gt;<i> format
</I>&gt;&gt;&gt;&gt;&gt;<i> and
</I>&gt;&gt;&gt;&gt;&gt;<i> a complex format with all the bells and whistles.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  The advantages of taking text/srt is that all existing software to
</I>&gt;&gt;&gt;&gt;&gt;<i> create
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> SRT can be used to create WebSRT
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> That's not strictly true. If they load a WebSRT file that was  
</I>&gt;&gt;&gt;&gt;&gt;<i> created by
</I>&gt;&gt;&gt;&gt;&gt;<i> some other software for further editing and that WebSRT file uses
</I>&gt;&gt;&gt;&gt;&gt;<i> advanced
</I>&gt;&gt;&gt;&gt;&gt;<i> WebSRT functionality, the authoring software will break.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Right, especially settings appended after the timestamps are quite  
</I>&gt;&gt;&gt;&gt;<i> likely
</I>&gt;&gt;&gt;&gt;<i> to be stripped when saving the file.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Or may even break the software if it's badly implemented, or may end up
</I>&gt;&gt;&gt;<i> inside the cue text - just like the other control instructions which  
</I>&gt;&gt;&gt;<i> will
</I>&gt;&gt;&gt;<i> end up as plain text inside the cue. You won't believe how many people
</I>&gt;&gt;&gt;<i> have
</I>&gt;&gt;&gt;<i> pointed out to me that my SRT test parser exposed an &lt;i&gt; tag markup in  
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> cue text rather than interpreting it, when I was experimenting with
</I>&gt;&gt;&gt;<i> applying
</I>&gt;&gt;&gt;<i> SRT cues in a HTML div without touching the cue text content.  
</I>&gt;&gt;&gt;<i> Extraneous
</I>&gt;&gt;&gt;<i> markup is really annoying.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Indeed, but given the option of seeing no subtitles at all and seeing  
</I>&gt;&gt;<i> some
</I>&gt;&gt;<i> markup from time to time, which do you prefer? For a long time I was  
</I>&gt;&gt;<i> using a
</I>&gt;&gt;<i> media player that didn't handle &quot;HTML&quot; in SRT and wasn't very amused at
</I>&gt;&gt;<i> seeing &lt;i&gt; and similar, but it was sure better than no subtitles at  
</I>&gt;&gt;<i> all. I
</I>&gt;&gt;<i> doubt it will take long for popular software to start ignoring things
</I>&gt;&gt;<i> trailing the timestamp and things in square brackets, which is all you  
</I>&gt;&gt;<i> need
</I>&gt;&gt;<i> for basic &quot;compatibility&quot;. Some of the tested software already does so.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hmm... not sure if I'd prefer to see the crap or rather be forced to run  
</I>&gt;<i> it
</I>&gt;<i> through a stripping tool first. I think what would happen is that I'd  
</I>&gt;<i> start
</I>&gt;<i> watching the movie, then notice the crap, get annoyed, stop it, run a
</I>&gt;<i> stripping tool, restart the movie. I'd probably prefer noticing that  
</I>&gt;<i> before
</I>&gt;<i> I start the movie, which would happen if the file was a different format.
</I>&gt;<i> But it does take a bit of &quot;expert knowledge&quot; to know that websrt can be
</I>&gt;<i> easily converted to srt and to have such a stripping tool installed, I  
</I>&gt;<i> give
</I>&gt;<i> you that.
</I>
Indeed, it never struck me to take the time to strip away the extra  
markup, even though I would have known how. Instead I waited until my  
media player could do the job for me.

&gt;<i> OTOH, if you say that it will take a short time for popular software to
</I>&gt;<i> start ignoring the extra WebSRT stuff, well, in this case they have
</I>&gt;<i> implemented WebSRT support in its most basic form and then there is no
</I>&gt;<i> problem any more anyway. They will then accept the new files and their
</I>&gt;<i> extensions and mime types and there is explicit support rather than the
</I>&gt;<i> dodgy question of whether these SRT files will provide crap or not.  
</I>&gt;<i> During a
</I>&gt;<i> transition period, we will make all software that currently supports SRT
</I>&gt;<i> become unstable and unreliable. I don't think that's the right way to  
</I>&gt;<i> deal
</I>&gt;<i> with an existing ecosystem. Coming in as the big brother, claiming their
</I>&gt;<i> underspecified format, throwing in incompatible features, and saying:  
</I>&gt;<i> just
</I>&gt;<i> deal with it. It's just not the cavalier thing to do.
</I>
I agree that it seems (and is) quite selfish, but am not sure the  
alternatives are any better, see below. About &quot;unstable and unreliable&quot;, I  
think there are really only two kind of errors we will see:

1. Some cues being ignored due to trailing settings after the timestamp.

2. Markup being interpreted as plain text.

Both already can and do happen with existing use of SRT, which is annoying  
but better than no subtitles at all.

&gt;&gt;<i>   and servers that already send text/srt don't need to be updated. In
</I>&gt;&gt;&gt;&gt;<i> either
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> case I think we should support only one mime type.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> What's the harm in supporting two mime types but using the same  
</I>&gt;&gt;&gt;&gt;&gt;<i> parser
</I>&gt;&gt;&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;&gt;&gt;<i> parse them?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Most content will most likely be plain old SRT without voices, &lt;ruby&gt;  
</I>&gt;&gt;&gt;&gt;<i> or
</I>&gt;&gt;&gt;&gt;<i> similar. People will create them using existing software with the .srt
</I>&gt;&gt;&gt;&gt;<i> extension and serve them using the text/srt MIME type. When they later
</I>&gt;&gt;&gt;&gt;<i> decide to add some &lt;ruby&gt; or similar, it will just work without  
</I>&gt;&gt;&gt;&gt;<i> changing
</I>&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;<i> extension or MIME type. The net result is that text/srt and  
</I>&gt;&gt;&gt;&gt;<i> text/websrt
</I>&gt;&gt;&gt;&gt;<i> mean
</I>&gt;&gt;&gt;&gt;<i> exactly the same thing, making it a wasted effort.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> From a Web browser perspective, yes. But not from a caption authoring
</I>&gt;&gt;&gt;<i> perspective. At first, I would author a SRT file. Later, I want to add
</I>&gt;&gt;&gt;<i> some
</I>&gt;&gt;&gt;<i> fancy stuff. So, I load it into the application again. Then I add the
</I>&gt;&gt;&gt;<i> fancy
</I>&gt;&gt;&gt;<i> stuff. It tells me that I cannot save it as SRT, but have to save it as
</I>&gt;&gt;&gt;<i> WebSRT, so I don't lose the information. Good! Now, the pipeline that I
</I>&gt;&gt;&gt;<i> have
</I>&gt;&gt;&gt;<i> set up for SRT files transcoding and burning onto video and which  
</I>&gt;&gt;&gt;<i> cannot
</I>&gt;&gt;&gt;<i> yet
</I>&gt;&gt;&gt;<i> deal with WebSRT will not accept the WebSRT file. Good again! Makes me
</I>&gt;&gt;&gt;<i> extend my pipeline or go to the provider and upgrade my software, so I  
</I>&gt;&gt;&gt;<i> get
</I>&gt;&gt;&gt;<i> the full feature support and the correct rendering. Excellent.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think that as long as WebSRT is mostly compatible with SRT then people
</I>&gt;&gt;<i> will keep using SRT tools, with the occasional mishap and disaster. I  
</I>&gt;&gt;<i> won't
</I>&gt;&gt;<i> deny that it breaks expectations of what SRT is, but the alternative is  
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> make WebSRT fundamentally incompatible so that not even media frameworks
</I>&gt;&gt;<i> that rely on sniffing would treat it as SRT. However, unless &lt;track&gt; is  
</I>&gt;&gt;<i> a
</I>&gt;&gt;<i> complete failure other applications will eventually want to support the
</I>&gt;&gt;<i> format that browsers support, so inventing something completely new has  
</I>&gt;&gt;<i> a
</I>&gt;&gt;<i> high cost too.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We have reduced this cost by making it build on an existing format. Let's
</I>&gt;<i> not pretend here: if all browser vendors support WebSRT, there will be a
</I>&gt;<i> high motivation to implement support for it. Supporting the Web is a big
</I>&gt;<i> argument. So, we are only talking about the transition period here as a
</I>&gt;<i> problem period.
</I>&gt;<i>
</I>&gt;<i> During the transition period, if WebSRT is incompatible, it will motivate
</I>&gt;<i> people further to implement proper support for it. If it is almost
</I>&gt;<i> compatible, it will motivate people to make quick patches that will just
</I>&gt;<i> stop it from breaking their systems. The first one is positive  
</I>&gt;<i> motivation,
</I>&gt;<i> introduction of a new feature, great announcements to make. The second  
</I>&gt;<i> one
</I>&gt;<i> is negative motivation, swearing on the Web standards developers for
</I>&gt;<i> breaking existing systems, apologies to the users for not supporting  
</I>&gt;<i> their
</I>&gt;<i> new files properly etc etc. I honestly think we won't be making friends  
</I>&gt;<i> by
</I>&gt;<i> stealing an existing format. But we can make friends by building a new
</I>&gt;<i> format on an existing format such that code can be re-used by developers,
</I>&gt;<i> and such that users can learn that they can make use of the new files by
</I>&gt;<i> using simple tools.
</I>
The core &quot;problem&quot; is that WebSRT is far too compatible with existing SRT  
usage. Regardless of the file extension and MIME type used, it's quite  
improbable that anyone will have different parsers for the same format.  
Once media players have been forced to handle the extra markup in WebSRT  
(e.g. by ignoring it, as many already do) the two formats will be the  
same, and using WebSRT markup in .srt files will just work, so that's what  
people will do. We may avoid being seen as arrogant format-hijackers, but  
the end result is two extensions and two different MIME types that mean  
exactly the same thing.

&gt;&gt;<i> Since browser vendors get all the benefits and none of the problems it
</I>&gt;&gt;<i> would be a mistake to only listen to us, of course. It might be  
</I>&gt;&gt;<i> worthwhile
</I>&gt;&gt;<i> contacting developers of applications like VLC, Totem or MPlayer and ask
</I>&gt;&gt;<i> precisely how annoyed they would be if suddenly one day they had to  
</I>&gt;&gt;<i> tweak
</I>&gt;&gt;<i> their SRT parser because of WebSRT.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Some of them have already spoken:
</I>&gt;<i> <A HREF="http://forum.doom9.org/showthread.php?p=1396576">http://forum.doom9.org/showthread.php?p=1396576</A> &quot;Extending SRT is a very  
</I>&gt;<i> bad
</I>&gt;<i> idea&quot; etc etc. Also, I've had feedback from other subtitle professionals
</I>&gt;<i> that are also against extending SRT, the main reasons being to break
</I>&gt;<i> existing working software environments.
</I>
The only way to really avoid messing with the ecosystem is to invent a  
completely new format. The choice is between something that won't work at  
all in non-browsers and something that will mostly work.

&gt;<i> But I will ask that question at
</I>&gt;<i> <A HREF="http://universalsubtitles.org/opensubtitles2010">http://universalsubtitles.org/opensubtitles2010</A> and at
</I>&gt;<i> <A HREF="http://www.foms-workshop.org/foms2010OVC/">http://www.foms-workshop.org/foms2010OVC/</A> where gstreamer, vlc and other
</I>&gt;<i> developers will be present.
</I>
Great, I'll be there too!

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070166.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
	<LI>Next message: <A HREF="070268.html">[whatwg] Fwd: Discussing WebSRT and alternatives/improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70173">[ date ]</a>
              <a href="thread.html#70173">[ thread ]</a>
              <a href="subject.html#70173">[ subject ]</a>
              <a href="author.html#70173">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
