<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] XMLHttpRequest.responseXML and invalid XML documents
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20XMLHttpRequest.responseXML%20and%20invalid%20XML%20documents&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004120.html">
   <LINK REL="Next"  HREF="004121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] XMLHttpRequest.responseXML and invalid XML documents</H1>
<!--htdig_noindex-->
    <B>Hallvord Reiar Michaelsen Steen</B> 
    <A HREF="mailto:whatwg-whatwg.org%40lists.whatwg.org?Subject=%5Bwhatwg%5D%20XMLHttpRequest.responseXML%20and%20invalid%20XML%20documents&In-Reply-To="
       TITLE="[whatwg] XMLHttpRequest.responseXML and invalid XML documents">hallvord at hallvord.com
       </A><BR>
    <I>Wed Jun 22 07:57:07 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="004120.html">[whatwg] XMLHttpRequest: getAllResponseHeaders
</A></li>
        <LI>Next message: <A HREF="004121.html">[whatwg] [WA1] Attribute-based selection system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4119">[ date ]</a>
              <a href="thread.html#4119">[ thread ]</a>
              <a href="subject.html#4119">[ subject ]</a>
              <a href="author.html#4119">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Spec says about responseXML : 

&gt;<i> If the document was not an XML document, or if the document could
</I>&gt;<i> not be parsed (due to an XML well-formedness error or unsupported
</I>&gt;<i> character encoding, for instance), returns null.
</I>
All major browsers return an empty document instead under most of 
these conditions.

Exceptions:

- FireFox *does* return null if the document is sent as text/html
- FireFox and Opera guess UTF-8 encoding if the encoding sent from 
the server is unknown, and parses document.

Requiring that browsers return null may not be compatible with 
existing content. Scripts that today use for example
request.responseXML.getElementsByTagName()
would fail with an error if responseXML was null, and today there is 
virtually no point of saying &quot;if(x.responseXML)&quot; first since it will 
nearly always be a document object so no scripts will be written that 
way. Could we standardise returning an empty document instead, for 
all these conditions?
-- 
Hallvord Reiar Michaelsen Steen
<A HREF="http://www.hallvord.com/">http://www.hallvord.com/</A>


</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004120.html">[whatwg] XMLHttpRequest: getAllResponseHeaders
</A></li>
	<LI>Next message: <A HREF="004121.html">[whatwg] [WA1] Attribute-based selection system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4119">[ date ]</a>
              <a href="thread.html#4119">[ thread ]</a>
              <a href="subject.html#4119">[ subject ]</a>
              <a href="author.html#4119">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg-whatwg.org
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
