<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Thread to run Web Socket feedback from the protocol ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Thread%20to%20run%20Web%20Socket%20feedback%20from%20the%20protocol%20%3F&In-Reply-To=%3C3E06B198-38B2-4BDA-9012-F45995EDDDE9%40webkit.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066596.html">
   <LINK REL="Next"  HREF="066666.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Thread to run Web Socket feedback from the protocol ?</H1>
<!--htdig_noindex-->
    <B>Alexey Proskuryakov</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Thread%20to%20run%20Web%20Socket%20feedback%20from%20the%20protocol%20%3F&In-Reply-To=%3C3E06B198-38B2-4BDA-9012-F45995EDDDE9%40webkit.org%3E"
       TITLE="[whatwg] Thread to run Web Socket feedback from the protocol ?">ap at webkit.org
       </A><BR>
    <I>Fri Dec  4 10:07:32 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066596.html">[whatwg] Thread to run Web Socket feedback from the protocol ?
</A></li>
        <LI>Next message: <A HREF="066666.html">[whatwg] Thread to run Web Socket feedback from the protocol ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66604">[ date ]</a>
              <a href="thread.html#66604">[ thread ]</a>
              <a href="subject.html#66604">[ subject ]</a>
              <a href="author.html#66604">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On 03.12.2009, at 18:07, Ian Hickson wrote:

&gt;<i> I could change the spec to make the readyState attribute changes be
</I>&gt;<i> queued along with the event dispatch,
</I>
I do not understand why the events are queued, to begin with.  
Synchronous dispatch seems more useful to authors, as it gives more  
guarantees about connection state when handling the event.  
Implementations have always dealt with the necessary book-keeping to  
present asynchronous networking events in a synchronous manner, and I  
don't think think it's been a problem.

An implementation that keeps parts of WebSocket logic in a different  
thread or process will need to queue readyState event changes as you  
describe, but that will be an implementation detail.

&gt;<i> but then we'd have a situation
</I>&gt;<i> whereby the &quot;actual&quot; state of the websocket object might not match the
</I>&gt;<i> state returned by the attribute.
</I>

This doesn't sounds like an issue to me. The &quot;actual&quot; state is always  
out of sync, because client and server have different ideas of actual  
state. So does an Ethernet controller, OS interrupt handler, low level  
OS networking code, etc. The only state that matters client-side is  
what JavaScript code sees, and all the intermediaries must (and do)  
act as if that were the real thing.

- WBR, Alexey Proskuryakov


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066596.html">[whatwg] Thread to run Web Socket feedback from the protocol ?
</A></li>
	<LI>Next message: <A HREF="066666.html">[whatwg] Thread to run Web Socket feedback from the protocol ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66604">[ date ]</a>
              <a href="thread.html#66604">[ thread ]</a>
              <a href="subject.html#66604">[ subject ]</a>
              <a href="author.html#66604">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
