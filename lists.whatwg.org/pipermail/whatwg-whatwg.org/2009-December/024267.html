<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] updateWithSanitizedHTML (was Re: innerStaticHTML)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20updateWithSanitizedHTML%20%28was%20Re%3A%20innerStaticHTML%29&In-Reply-To=%3C7789133a0912010839t4b637c7cj9834051e9d34a7f4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024266.html">
   <LINK REL="Next"  HREF="024256.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] updateWithSanitizedHTML (was Re: innerStaticHTML)</H1>
<!--htdig_noindex-->
    <B>Adam Barth</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20updateWithSanitizedHTML%20%28was%20Re%3A%20innerStaticHTML%29&In-Reply-To=%3C7789133a0912010839t4b637c7cj9834051e9d34a7f4%40mail.gmail.com%3E"
       TITLE="[whatwg] updateWithSanitizedHTML (was Re: innerStaticHTML)">whatwg at adambarth.com
       </A><BR>
    <I>Tue Dec  1 08:39:41 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="024266.html">[whatwg] updateWithSanitizedHTML (was Re: innerStaticHTML)
</A></li>
        <LI>Next message: <A HREF="024256.html">[whatwg] &lt;figure&gt;&lt;img&gt;&lt;* caption&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24267">[ date ]</a>
              <a href="thread.html#24267">[ thread ]</a>
              <a href="subject.html#24267">[ subject ]</a>
              <a href="author.html#24267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>2009/12/1 Kornel Lesi&#324;ski &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">kornel at geekhood.net</A>&gt;:
&gt;&gt;&gt;<i> And even whitelist for CSS properties couldn't be used to implement &quot;No
</I>&gt;&gt;&gt;<i> external access&quot; policy (allow images with data: urls, allow http: links,
</I>&gt;&gt;&gt;<i> but not http: images). This would be useful for webmails and other places
</I>&gt;&gt;&gt;<i> where website doesn't want to allow 3rd parties tracking views.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't think an no external access policy is worth supporting
</I>&gt;&gt;<i> explicitly. &#160;If it falls out of a general design, that's great, but I
</I>&gt;&gt;<i> don't think the use case is compelling enough to accept the design
</I>&gt;&gt;<i> constraints required to support it.
</I>&gt;<i>
</I>&gt;<i> I think it is quite important for privacy. Otherwise &quot;web bugs&quot; can be
</I>&gt;<i> placed and used to track every use of content in every mashup.
</I>&gt;<i>
</I>&gt;<i> Most often I'd like formatted text in applications to be just text,
</I>&gt;<i> _completely_ passive.
</I>
I agree that it's a nice benefit of some designs, but, in my opinion,
it's not nearly as important as addressing the security issues.

More concretely, suppose you want to let folks include hyperlinks in
sanitized HTML, which I suspect many people will want to do.  You've
already lost the battle against web bugs because of DNS prefetch.

&gt;&gt;&gt;<i> &quot;No clickjacking&quot; option might be useful as well.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't have a clear idea how this would work. &#160;Did you have something
</I>&gt;&gt;<i> different in mind than X-Frame-Options (already supported by WebKit)?
</I>&gt;<i>
</I>&gt;<i> On a second thought clickjacking is probably not the right term for what I
</I>&gt;<i> have in mind, although it's a similar issue.
</I>&gt;<i>
</I>&gt;<i> The problem is that content added in DOM could use styles to overlay web
</I>&gt;<i> application's &quot;chrome&quot; and steal data with forms or redirect standard
</I>&gt;<i> links/buttons to phising site, e.g. &lt;form action=evil style=&quot;position:fixed;
</I>&gt;<i> top:0; right:0&quot;&gt; that's positioned on top of website's standard login form.
</I>&gt;<i>
</I>&gt;<i> Position:fixed escapes elements with &quot;position:relative;overflow:hidden&quot;, so
</I>&gt;<i> AFAIK this cannot be prevented without removal of all position:fixed styles
</I>&gt;<i> from untrusted content.
</I>&gt;<i>
</I>&gt;<i> Such hack has been used on auction site allegro.pl, where auctions'
</I>&gt;<i> descriptions are allowed to use CSS. In that particular case content should
</I>&gt;<i> have been filtered server-side, but I imagine webmails, web-based feed
</I>&gt;<i> readers and all kinds of mashups dynamically loading untrusted content could
</I>&gt;<i> face similar problems, and having &lt;iframe&gt; for every bit of content is
</I>&gt;<i> sometimes problematic.
</I>
I agree that this is a threat worth addressing.  That's one reason why
an API that blocks only script is insufficient for inline use cases.
Notice that my proposal does mitigate this threat.

Adam
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024266.html">[whatwg] updateWithSanitizedHTML (was Re: innerStaticHTML)
</A></li>
	<LI>Next message: <A HREF="024256.html">[whatwg] &lt;figure&gt;&lt;img&gt;&lt;* caption&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24267">[ date ]</a>
              <a href="thread.html#24267">[ thread ]</a>
              <a href="subject.html#24267">[ subject ]</a>
              <a href="author.html#24267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
