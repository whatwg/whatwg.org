<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] some thoughts on sandboxed IFRAMEs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20some%20thoughts%20on%20sandboxed%20IFRAMEs&In-Reply-To=%3C448e9a320912131413k6cd6db33oa078066203eefe1a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066782.html">
   <LINK REL="Next"  HREF="066786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] some thoughts on sandboxed IFRAMEs</H1>
<!--htdig_noindex-->
    <B>Michal Zalewski</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20some%20thoughts%20on%20sandboxed%20IFRAMEs&In-Reply-To=%3C448e9a320912131413k6cd6db33oa078066203eefe1a%40mail.gmail.com%3E"
       TITLE="[whatwg] some thoughts on sandboxed IFRAMEs">lcamtuf at coredump.cx
       </A><BR>
    <I>Sun Dec 13 14:13:23 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066782.html">[whatwg] some thoughts on sandboxed IFRAMEs
</A></li>
        <LI>Next message: <A HREF="066786.html">[whatwg] some thoughts on sandboxed IFRAMEs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66783">[ date ]</a>
              <a href="thread.html#66783">[ thread ]</a>
              <a href="subject.html#66783">[ subject ]</a>
              <a href="author.html#66783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> How do I use the &lt;jail&gt; tag to sandbox advertisements?
</I>
Huh? But that's not the point I am making... I am not arguing that
iframe sandbox should be abandoned as a bad idea - quite the opposite.

I was merely suggesting that we *expand* the same logic, and the same
excellent security control granularity, to span and div; this seems
like it would not increase the implementation complexity in any
significant way. We could then allow these to be populated with secure
contents in three ways:

1) Guarded closing tag - this is simple and bullet-proof; but may
conflict with XML serializations, and hence require some hacks,

2) CDATA or @doc-like approaches. Less secure because it does not
enforce a security control, but less contentious, and already being
considered for IFRAMEs.

3) .innerHTML, which would be then safe by default, without the need
for .innerSafeHTML (and the associated ambiguities) or explicit
.toStaticHTML calls.

This allows people to utilize the mechanism for so many more
additional use cases without the performance and usability cost of
IFRAMEs, and does not subvert the original ad / gadget use case in any
way.

*This* is what I find greatly preferred to having separate, completely
disjointed APIs with different semantics for ads / gadgets and other
&quot;full page&quot; contents, for small snippets of JS-inserted HTML, and for
server-returned data.

&gt;<i> The sandbox tag is great at addressing that use case. &#160;I don't see why
</I>&gt;<i> we should delay it in the hopes that the &lt;jail&gt; tag comes back to
</I>&gt;<i> life.
</I>
I am not suggesting this at all; extending the spec to cover, or at
least hint these cases would be a good idea. This is not to say the
functionality as currently speced out should be scraped. My points
were:

1) If we want to keep it limited to the ads / gadget case, we should
make it clear in the spec, reconsider the applicability of
allow-same-origin in this context, and definitely revise the as of now
unsafe getusercontent example, etc. I am not entirely sold that this
is a beneficial strategy in the long run, but as long as the
alternatives were considered, so be it.

2) If we want to make the implementation useful for other scenarios as
well, and avoid the proliferation of HTML-sandboxing APIs with
different security controls, we should still keep the spec mostly as
is, and I have no objection to implementations incorporating it; BUT
it would be beneficial to allow it to be extended as outlined above,
or in a similar general way, specifically making it easy to sandbox
inline HTML, and to place thousands of sandboxed containers on a page
without making the renderer implode.

/mz

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066782.html">[whatwg] some thoughts on sandboxed IFRAMEs
</A></li>
	<LI>Next message: <A HREF="066786.html">[whatwg] some thoughts on sandboxed IFRAMEs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66783">[ date ]</a>
              <a href="thread.html#66783">[ thread ]</a>
              <a href="subject.html#66783">[ subject ]</a>
              <a href="author.html#66783">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
