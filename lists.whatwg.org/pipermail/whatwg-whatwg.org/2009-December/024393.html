<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Thread to run Web Socket feedback from the protocol ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Thread%20to%20run%20Web%20Socket%20feedback%20from%20the%20protocol%20%3F&In-Reply-To=%3CPine.LNX.4.62.0912091230050.29336%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024331.html">
   <LINK REL="Next"  HREF="024400.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Thread to run Web Socket feedback from the protocol ?</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Thread%20to%20run%20Web%20Socket%20feedback%20from%20the%20protocol%20%3F&In-Reply-To=%3CPine.LNX.4.62.0912091230050.29336%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Thread to run Web Socket feedback from the protocol ?">ian at hixie.ch
       </A><BR>
    <I>Wed Dec  9 04:39:17 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="024331.html">[whatwg] Thread to run Web Socket feedback from the protocol ?
</A></li>
        <LI>Next message: <A HREF="024400.html">[whatwg] Thread to run Web Socket feedback from the protocol ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24393">[ date ]</a>
              <a href="thread.html#24393">[ thread ]</a>
              <a href="subject.html#24393">[ subject ]</a>
              <a href="author.html#24393">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Fri, 4 Dec 2009, Alexey Proskuryakov wrote:
&gt;<i> On 03.12.2009, at 18:07, Ian Hickson wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I could change the spec to make the readyState attribute changes be 
</I>&gt;<i> &gt; queued along with the event dispatch,
</I>&gt;<i> 
</I>&gt;<i> I do not understand why the events are queued, to begin with. 
</I>
How else would it work? We can't interrupt a running script to run an 
event dispatch, or fire an event in the middle of the HTML parser running, 
or fire an event while a plugin is doing sychronous DOM changes -- we 
always have to wait for the event loop's current running task to have 
finished. That's what queuing a task means.


&gt;<i> &gt; but then we'd have a situation whereby the &quot;actual&quot; state of the 
</I>&gt;<i> &gt; websocket object might not match the state returned by the attribute.
</I>&gt;<i> 
</I>&gt;<i> This doesn't sounds like an issue to me. The &quot;actual&quot; state is always 
</I>&gt;<i> out of sync, because client and server have different ideas of actual 
</I>&gt;<i> state. So does an Ethernet controller, OS interrupt handler, low level 
</I>&gt;<i> OS networking code, etc. The only state that matters client-side is what 
</I>&gt;<i> JavaScript code sees, and all the intermediaries must (and do) act as if 
</I>&gt;<i> that were the real thing.
</I>
I'm not talking about the state of the network, but about the state of the 
object itself. You would end up in situations where, for instance, sending 
would work fine, even though the state attribute said that you hadn't 
connected yet.

I suppose we could get around that by saying that the attribute _is_ the 
state, so even if the object thinks it has a connection, the send() would 
still fail until the first event has fired and the state has changed... 
Would that be acceptable?

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024331.html">[whatwg] Thread to run Web Socket feedback from the protocol ?
</A></li>
	<LI>Next message: <A HREF="024400.html">[whatwg] Thread to run Web Socket feedback from the protocol ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24393">[ date ]</a>
              <a href="thread.html#24393">[ thread ]</a>
              <a href="subject.html#24393">[ subject ]</a>
              <a href="author.html#24393">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
