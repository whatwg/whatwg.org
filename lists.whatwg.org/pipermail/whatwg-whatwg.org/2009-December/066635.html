<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [Web workers] An attribute describing the &quot;best&quot; number of worker to invoke in a delegation use case
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BWeb%20workers%5D%20An%20attribute%20describing%20the%20%22best%22%0A%20number%20of%20worker%20to%20invoke%20in%20a%20delegation%20use%20case&In-Reply-To=%3C4B1D7CDC.6050907%40enseirb-matmeca.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066527.html">
   <LINK REL="Next"  HREF="066529.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [Web workers] An attribute describing the &quot;best&quot; number of worker to invoke in a delegation use case</H1>
<!--htdig_noindex-->
    <B>David Bruant</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BWeb%20workers%5D%20An%20attribute%20describing%20the%20%22best%22%0A%20number%20of%20worker%20to%20invoke%20in%20a%20delegation%20use%20case&In-Reply-To=%3C4B1D7CDC.6050907%40enseirb-matmeca.fr%3E"
       TITLE="[whatwg] [Web workers] An attribute describing the &quot;best&quot; number of worker to invoke in a delegation use case">bruant at enseirb-matmeca.fr
       </A><BR>
    <I>Mon Dec  7 14:08:28 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066527.html">[whatwg] [Web workers] An attribute describing the &quot;best&quot; number of worker to invoke in a delegation use case
</A></li>
        <LI>Next message: <A HREF="066529.html">[whatwg] &lt;figure&gt;&lt;img&gt;&lt;* caption&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66635">[ date ]</a>
              <a href="thread.html#66635">[ thread ]</a>
              <a href="subject.html#66635">[ subject ]</a>
              <a href="author.html#66635">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Ian Hickson a &#233;crit :
&gt;<i> On Wed, 11 Nov 2009, David Bruant wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> This is a new proposal taking into account the feedback I recieved to 
</I>&gt;&gt;<i> the &quot;[WebWorkers] About the delegation example&quot; message.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In the delegation example of the WebWorker spec, we can see this line :
</I>&gt;&gt;<i> &quot;var num_workers = 10;&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My concern is about the arbitrarity of the &quot;10&quot;.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I agree that it's suboptimal. However, I think realistically a good 
</I>&gt;<i> implementation of parallel work would need some sort of dynamic 
</I>&gt;<i> performance tuning, continuously slowly ramping up the number of workers 
</I>&gt;<i> while it increases throughput, and when throughput decreases, switching to 
</I>&gt;<i> reducing the number of workers until throughput increases again. That 
</I>&gt;<i> would probably be too complicated to show in an example in the spec.
</I>&gt;<i>   
</I>=&gt; As far as I know, if the running time is a decreasing function of the
number of workers (which seems to be a non-such-trivial assumption), the
best algorithm (on average, of course !) is to double the number of
workers until finding a barrier in the running time (find n such as the
max is between [2^n, 2^(n+1)[ ). Then, use a dichotomy algorithm in this
interval.

However, running this algorithm each time a UA comes in your website can
become to be costly.
I think that the spec should say something about &quot;finding the correct
number of thread for your problem&quot; and encourage authors to store their
value with the local storage and add a date to re-run the algorithm if
the value is old (more than two months ?)

&gt;&gt;<i> My point is that this number may be available very easily. For example, 
</I>&gt;&gt;<i> in my dual-core, Linux, Firefox 3.5, the number is 2. Why spare an 
</I>&gt;&gt;<i> information that can be useful and reliable (more than measurement at 
</I>&gt;&gt;<i> least !) ?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> It's actually probably quite rarely 2. It depends on all kinds of factors, 
</I>&gt;<i> like the kind of algorithm, what other programs are running, etc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I still haven't added this feature, as I do not believe the arguments 
</I>&gt;<i> presented form a convincing case. However, if you are still interested in 
</I>&gt;<i> persuing this feature, I encourage you to convince a browser vendor to 
</I>&gt;<i> implement it, as discussed here:
</I>&gt;<i>
</I>&gt;<i>    <A HREF="http://wiki.whatwg.org/wiki/FAQ#Is_there_a_process_for_adding_new_features_to_a_specification.3F">http://wiki.whatwg.org/wiki/FAQ#Is_there_a_process_for_adding_new_features_to_a_specification.3F</A>
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>   
</I>I understand now that my proposition was not very realistic. However, I
think that something should be described in the spec to avoid arbitrary
choices of number of workers.

I'm convinced that with canvas and workers, we will see very soon fancy
web video games with AI. Authors of those games will want to use as many
computation power as possible for their AI, so the &quot;best number of
workers&quot; will be a value that they are interested in.

So, either an &quot;hint&quot; can be provided by the spec through the Navigator
object, either the spec could provide the above described method
(improve my description or ask me to improve it if you want) to find the
&quot;best&quot; number (according to a particular problem).

Thanks,

David

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066527.html">[whatwg] [Web workers] An attribute describing the &quot;best&quot; number of worker to invoke in a delegation use case
</A></li>
	<LI>Next message: <A HREF="066529.html">[whatwg] &lt;figure&gt;&lt;img&gt;&lt;* caption&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66635">[ date ]</a>
              <a href="thread.html#66635">[ thread ]</a>
              <a href="subject.html#66635">[ subject ]</a>
              <a href="author.html#66635">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
