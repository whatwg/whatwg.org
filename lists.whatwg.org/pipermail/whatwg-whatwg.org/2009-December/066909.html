<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] history state object api issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20history%20state%20object%20api%20issues&In-Reply-To=%3Cc84706c70912231233q57bd2679jaf3423773639a453%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="066908.html">
   <LINK REL="Next"  HREF="066911.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] history state object api issues</H1>
<!--htdig_noindex-->
    <B>Justin Lebar</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20history%20state%20object%20api%20issues&In-Reply-To=%3Cc84706c70912231233q57bd2679jaf3423773639a453%40mail.gmail.com%3E"
       TITLE="[whatwg] history state object api issues">justin.lebar at gmail.com
       </A><BR>
    <I>Wed Dec 23 12:33:29 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="066908.html">[whatwg] history state object api issues
</A></li>
        <LI>Next message: <A HREF="066911.html">[whatwg] history state object api issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66909">[ date ]</a>
              <a href="thread.html#66909">[ thread ]</a>
              <a href="subject.html#66909">[ subject ]</a>
              <a href="author.html#66909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> - allow for self-contained components to handle own state
</I>&gt;<i>  [not supported by spec, *2]
</I>
I'm generally in favor of a minimalistic approach to this kind of
thing.  Ideally, we'd be able to compose independent components using
the API, but I'm not convinced that it's worth the complexity that
would add.  If pages really needed this kind of composition, someone
could write a thin library around the existing push/replaceState API.

&gt;<i> - have a notification event when entering a history entry
</I>&gt;<i>  [almost full support in spec (popstate), *3]
</I>
I guess this might be useful if you have independent components
hooking into the API.  Again, I'm not sure that this is worth the
complexity it would add.  (Should a pushState trigger a popState?
That would be a little weird.  And certainly we wouldn't want to add a
new event just to tell you that you called pushState.)

&gt;<i> - have a notification event when leaving current history
</I>&gt;<i>  entry
</I>&gt;<i>  [not supported by spec, *4]
</I>
Is the use case here to allow pages to save their state right before
the browser navigates away?  This doesn't seem essential -- the page
could just call replaceState whenever the state changes -- but I
suppose it might be useful.

-Justin

On Wed, Dec 23, 2009 at 10:52 AM, Mike Wilson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mikewse at hotmail.com</A>&gt; wrote:
&gt;<i> There are still some issues with the pushState feature of
</I>&gt;<i> session history, as I wrote in August [1]. As there was a
</I>&gt;<i> lack of discussion at that time I am raising these issues
</I>&gt;<i> again. Below is a list of naive requirements on the state-
</I>&gt;<i> handling parts of the new &quot;client-side&quot; session history
</I>&gt;<i> mechanism, mapped against the current support in the 21
</I>&gt;<i> December 2009 version of editor's draft.
</I>&gt;<i>
</I>&gt;<i> &quot;It should be possible to:&quot;
</I>&gt;<i>
</I>&gt;<i> - specify associated state when programatically creating a
</I>&gt;<i> &#160;new session history entry
</I>&gt;<i> &#160;[supported by spec (pushState)]
</I>&gt;<i>
</I>&gt;<i> - update state for the current session history entry
</I>&gt;<i> &#160;[supported by spec (replaceState)]
</I>&gt;<i>
</I>&gt;<i> - get state for current session history entry
</I>&gt;<i> &#160;[partial support by spec (popstate), *1]
</I>&gt;<i>
</I>&gt;<i> - allow for self-contained components to handle own state
</I>&gt;<i> &#160;[not supported by spec, *2]
</I>&gt;<i>
</I>&gt;<i> - have a notification event when entering a history entry
</I>&gt;<i> &#160;[almost full support in spec (popstate), *3]
</I>&gt;<i>
</I>&gt;<i> - have a notification event when leaving current history
</I>&gt;<i> &#160;entry
</I>&gt;<i> &#160;[not supported by spec, *4]
</I>&gt;<i>
</I>&gt;<i> Notes:
</I>&gt;<i> *1: only available in popstate event, not during rest of
</I>&gt;<i> &#160; &#160;history entry lifetime (getter needed)
</I>&gt;<i> *2: all page parts saving state must coordinate with a
</I>&gt;<i> &#160; &#160;shared data structure (key/value-store or similar
</I>&gt;<i> &#160; &#160;needed)
</I>&gt;<i> *3: popstate event not fired for navigation with pushState
</I>&gt;<i> &#160; &#160;(fire for navigation too needed)
</I>&gt;<i> *4: there is no event that fires before upcoming history
</I>&gt;<i> &#160; &#160;entry is activated (new event needed)
</I>&gt;<i>
</I>&gt;<i> If there is interest, I can put together a pseudo code
</I>&gt;<i> example to illustrate these needs, to aid the discussion
</I>&gt;<i> of solutions.
</I>&gt;<i>
</I>&gt;<i> Best regards
</I>&gt;<i> Mike Wilson
</I>&gt;<i>
</I>&gt;<i> [1]
</I>&gt;<i> <A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-August/022211.html">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-August/022211.html</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="066908.html">[whatwg] history state object api issues
</A></li>
	<LI>Next message: <A HREF="066911.html">[whatwg] history state object api issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#66909">[ date ]</a>
              <a href="thread.html#66909">[ thread ]</a>
              <a href="subject.html#66909">[ subject ]</a>
              <a href="author.html#66909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
