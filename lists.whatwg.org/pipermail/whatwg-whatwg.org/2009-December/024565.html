<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Passing more than JSON data to workers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Passing%20more%20than%20JSON%20data%20to%20workers&In-Reply-To=%3C7418AB7A-7F92-4BAB-BD71-6EF6B16792F2%40monkeyman.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024563.html">
   <LINK REL="Next"  HREF="024566.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Passing more than JSON data to workers</H1>
<!--htdig_noindex-->
    <B>Jan Fabry</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Passing%20more%20than%20JSON%20data%20to%20workers&In-Reply-To=%3C7418AB7A-7F92-4BAB-BD71-6EF6B16792F2%40monkeyman.be%3E"
       TITLE="[whatwg] Passing more than JSON data to workers">jan.fabry at monkeyman.be
       </A><BR>
    <I>Wed Dec 16 09:23:36 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="024563.html">[whatwg] Web API for speech recognition and synthesis
</A></li>
        <LI>Next message: <A HREF="024566.html">[whatwg] Passing more than JSON data to workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24565">[ date ]</a>
              <a href="thread.html#24565">[ thread ]</a>
              <a href="subject.html#24565">[ subject ]</a>
              <a href="author.html#24565">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hello,

Has it been considered to pass more than JSON data to workers? I could not find a rationale behind this in the FAQ, or in other places I looked. I understand the need for separation because of concurrency issues, but aren't there other ways to accomplish this?

(The following text was already posted to the forum, but &quot;zcorpan&quot; suggested I also post it here)
[ <A HREF="http://forums.whatwg.org/viewtopic.php?t=4185">http://forums.whatwg.org/viewtopic.php?t=4185</A> ]

I am not a Javascript VM developer, so if the following does not make sense, please don't be too hard on me. A reply of &quot;Sorry, we thought about this longer than you did, and there are still cases where this is impossible&quot; is perfectly valid, but the more I can learn from this conversation, the better. 

Would it be possible to do a deep copy of the function (object) you pass to the the constructor? So copy everything (or mark it for copy-on-write), but remove references to DOM elements if they exist. This way, I think you can create a parallel data structure, so the original one remains untouched (avoiding concurrency issues). 

The important difference between this and the usual JSON-serializing of objects that the examples talk about, is that functions can be passed through too in an easy manner. If you have to simulate this using only Javascript, you have to somehow bind the free variables, which requires some introspection, and thus is not easy (if even possible?) to simulate in &quot;user space&quot;. 

The Google Gears API seems to provide both createWorker(scriptText) and createWorkerFromUrl(scriptUrl). Why was only the URL variant retained in the Web Workers spec? With the script variant, there would have been at least a little basis for more dynamic programming.

Greetings,

Jan Fabry
</PRE>












<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024563.html">[whatwg] Web API for speech recognition and synthesis
</A></li>
	<LI>Next message: <A HREF="024566.html">[whatwg] Passing more than JSON data to workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24565">[ date ]</a>
              <a href="thread.html#24565">[ thread ]</a>
              <a href="subject.html#24565">[ subject ]</a>
              <a href="author.html#24565">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
