<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [WebWorkers] Maximum number of workers (was &quot;About the	delegation example&quot;)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BWebWorkers%5D%20Maximum%20number%20of%20workers%20%28was%20%22About%20the%0A%09delegation%20example%22%29&In-Reply-To=%3Cf965ae410912071457p6ecd6a52mb352b211eb4da3b2%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024360.html">
   <LINK REL="Next"  HREF="024364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [WebWorkers] Maximum number of workers (was &quot;About the	delegation example&quot;)</H1>
<!--htdig_noindex-->
    <B>Drew Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BWebWorkers%5D%20Maximum%20number%20of%20workers%20%28was%20%22About%20the%0A%09delegation%20example%22%29&In-Reply-To=%3Cf965ae410912071457p6ecd6a52mb352b211eb4da3b2%40mail.gmail.com%3E"
       TITLE="[whatwg] [WebWorkers] Maximum number of workers (was &quot;About the	delegation example&quot;)">atwilson at google.com
       </A><BR>
    <I>Mon Dec  7 14:57:28 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="024360.html">[whatwg] [WebWorkers] Maximum number of workers (was &quot;About the delegation example&quot;)
</A></li>
        <LI>Next message: <A HREF="024364.html">[whatwg] Passing mouse events through the transparent parts of a	&lt;canvas&gt; tag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24363">[ date ]</a>
              <a href="thread.html#24363">[ thread ]</a>
              <a href="subject.html#24363">[ subject ]</a>
              <a href="author.html#24363">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>We discussed this previously (
<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2009-July/020865.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2009-July/020865.html</A>) -
the consensus was that since the Worker APIs are inherently asynchronous,
user agents were free to impose limits on worker creation (and queue up new
creation requests when the limit has been hit), but the spec should be
silent on this issue.

FWIW, Chrome does this - we limit each tab to a maximum of 16 workers, with
an overall limit of 64 - the 17th worker creation request for a tab is
queued up until another worker exits to make room for it. Chrome currently
has the limitation that each worker runs in its own process - when we
address that limitation, we expect to adjust the limits accordingly.

-atw

On Mon, Dec 7, 2009 at 1:39 PM, David Bruant &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruant at enseirb-matmeca.fr</A>&gt;wrote:

&gt;<i> David Bruant :
</I>&gt;<i> &gt; &quot;In the delegation example, the number of workers chosen is an arbitrary
</I>&gt;<i> &gt; 10. But, in a single-core processor, having only one worker will result
</I>&gt;<i> &gt; in more or less the same running time, because at the end, each worker
</I>&gt;<i> &gt; runs on the only core.&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> Ian Hickson :
</I>&gt;<i> &quot;That depends on the algorithm. If the algorithm uses a lot of data, then
</I>&gt;<i> a single hardware thread might be able to run two workers in the same time
</I>&gt;<i> as it runs one, with one worker waiting for data while the other runs
</I>&gt;<i> code, and with the workers trading back and forth.
</I>&gt;<i>
</I>&gt;<i> Personally I would recommend basing the number of workers on the number of
</I>&gt;<i> shards that the input data is split into, and then relying on the UA to
</I>&gt;<i> avoid thrashing. I would expect UAs to notice when a script spawns a
</I>&gt;<i> bazillion workers, and have the UA run them in a staggered fashion, so as
</I>&gt;<i> to not starve the system resources. This is almost certainly needed
</I>&gt;<i> anyway, to prevent pages from DOSing the user's system.&quot;
</I>&gt;<i>
</I>&gt;<i> =&gt; Wouldn't it be preferable to have an implementation-dependant &quot;maximum
</I>&gt;<i> number of workers&quot; and to raise a security exception when this number is
</I>&gt;<i> reached ? Maximum per domain ? per document ?
</I>&gt;<i> Maybe a different maximum for shared and dedicated workers.
</I>&gt;<i>
</I>&gt;<i> Any opinion on this ?
</I>&gt;<i>
</I>&gt;<i> David
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091207/c1a0031e/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20091207/c1a0031e/attachment.htm</A>&gt;
</PRE>





















































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024360.html">[whatwg] [WebWorkers] Maximum number of workers (was &quot;About the delegation example&quot;)
</A></li>
	<LI>Next message: <A HREF="024364.html">[whatwg] Passing mouse events through the transparent parts of a	&lt;canvas&gt; tag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24363">[ date ]</a>
              <a href="thread.html#24363">[ thread ]</a>
              <a href="subject.html#24363">[ subject ]</a>
              <a href="author.html#24363">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
