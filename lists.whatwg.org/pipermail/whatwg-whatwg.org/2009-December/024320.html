<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web sockets and existing HTTP stacks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20sockets%20and%20existing%20HTTP%20stacks&In-Reply-To=%3CPine.LNX.4.62.0912032347360.15540%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024319.html">
   <LINK REL="Next"  HREF="024341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web sockets and existing HTTP stacks</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20sockets%20and%20existing%20HTTP%20stacks&In-Reply-To=%3CPine.LNX.4.62.0912032347360.15540%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Web sockets and existing HTTP stacks">ian at hixie.ch
       </A><BR>
    <I>Thu Dec  3 15:57:02 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="024319.html">[whatwg] Web Socket Protocol: How Lenient Server Should Be in Handshake?
</A></li>
        <LI>Next message: <A HREF="024341.html">[whatwg] [hybi]  Web sockets and existing HTTP stacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24320">[ date ]</a>
              <a href="thread.html#24320">[ thread ]</a>
              <a href="subject.html#24320">[ subject ]</a>
              <a href="author.html#24320">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 17 Nov 2009, Christian Biesinger wrote:
&gt;<i> 
</I>&gt;<i> Is it intentional that it is impossible to implement this spec over an 
</I>&gt;<i> existing HTTP stack, as currently specified?
</I>
Only to the same extent that it is &quot;intentional&quot; that it's impossible to 
implement Telnet or SSH over an existing HTTP stack.


&gt;<i> In particular, due to the strict requirements on the headers to send, it 
</I>&gt;<i> seems like you can't really implement it with an existing HTTP stack. On 
</I>&gt;<i> the other hand, you really do want to reuse your HTTP implementation, 
</I>&gt;<i> because otherwise you have to reimplement all your HTTP proxy 
</I>&gt;<i> authentication, including NTLM, GSSAPI, etc. Obviously another problem 
</I>&gt;<i> would be that the actual bidirectional communication might be hard to 
</I>&gt;<i> fit into your HTTP implementation, but that might be easier to work 
</I>&gt;<i> around.
</I>
Yeah, it's likely that the code reuse theoretically made possible by 
reusing the HTTP proxy and cookie infrastructure is more theoretical than 
practical in many cases. I had hoped that it would be easier.

I guess it might still be possible if the relevant code can be abstracted 
out somehow, but that might result in code that feels a little twisted.

It's not clear what to do about this; we could limit the proxy support to 
just SOCKS, but that seems suboptimal.


(Similar problems exist on the server-side if you try to use an HTTP stack 
to implement WebSocket, though on that side there is far less reason to do 
so, since there's no proxy code to reuse and the cookie code that could be 
reused is minimal and more easily abstractable. The problem only really 
exists in the more advanced case of sharing a port with an HTTP server. 
The complexity there is considered acceptable because few people should 
ever have to write that code, compared to the number of people writing a 
straight WebSocket server.)

HTH,
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>










































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024319.html">[whatwg] Web Socket Protocol: How Lenient Server Should Be in Handshake?
</A></li>
	<LI>Next message: <A HREF="024341.html">[whatwg] [hybi]  Web sockets and existing HTTP stacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24320">[ date ]</a>
              <a href="thread.html#24320">[ thread ]</a>
              <a href="subject.html#24320">[ subject ]</a>
              <a href="author.html#24320">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
