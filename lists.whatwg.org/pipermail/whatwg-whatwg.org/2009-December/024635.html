<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] history state object api issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20history%20state%20object%20api%20issues&In-Reply-To=%3C018a01ca83e7%24ecaff900%240a01a8c0%40mikedeskxp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024634.html">
   <LINK REL="Next"  HREF="024636.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] history state object api issues</H1>
<!--htdig_noindex-->
    <B>Mike Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20history%20state%20object%20api%20issues&In-Reply-To=%3C018a01ca83e7%24ecaff900%240a01a8c0%40mikedeskxp%3E"
       TITLE="[whatwg] history state object api issues">mikewse at hotmail.com
       </A><BR>
    <I>Wed Dec 23 07:52:25 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="024634.html">[whatwg] [hybi] How to select which websocket protocol to use
</A></li>
        <LI>Next message: <A HREF="024636.html">[whatwg] history state object api issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24635">[ date ]</a>
              <a href="thread.html#24635">[ thread ]</a>
              <a href="subject.html#24635">[ subject ]</a>
              <a href="author.html#24635">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>There are still some issues with the pushState feature of 
session history, as I wrote in August [1]. As there was a 
lack of discussion at that time I am raising these issues 
again. Below is a list of naive requirements on the state-
handling parts of the new &quot;client-side&quot; session history 
mechanism, mapped against the current support in the 21 
December 2009 version of editor's draft.

&quot;It should be possible to:&quot;

- specify associated state when programatically creating a 
  new session history entry 
  [supported by spec (pushState)]

- update state for the current session history entry
  [supported by spec (replaceState)]

- get state for current session history entry 
  [partial support by spec (popstate), *1]

- allow for self-contained components to handle own state
  [not supported by spec, *2]

- have a notification event when entering a history entry
  [almost full support in spec (popstate), *3]

- have a notification event when leaving current history 
  entry 
  [not supported by spec, *4]

Notes:
*1: only available in popstate event, not during rest of
    history entry lifetime (getter needed)
*2: all page parts saving state must coordinate with a 
    shared data structure (key/value-store or similar 
    needed)
*3: popstate event not fired for navigation with pushState
    (fire for navigation too needed)
*4: there is no event that fires before upcoming history
    entry is activated (new event needed)

If there is interest, I can put together a pseudo code 
example to illustrate these needs, to aid the discussion 
of solutions.

Best regards
Mike Wilson

[1]
<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-August/022211.html">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-August/022211.html</A>

</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024634.html">[whatwg] [hybi] How to select which websocket protocol to use
</A></li>
	<LI>Next message: <A HREF="024636.html">[whatwg] history state object api issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24635">[ date ]</a>
              <a href="thread.html#24635">[ thread ]</a>
              <a href="subject.html#24635">[ subject ]</a>
              <a href="author.html#24635">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
