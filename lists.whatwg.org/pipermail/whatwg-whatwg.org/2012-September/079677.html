<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] New URL Standard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20New%20URL%20Standard&In-Reply-To=%3CCABirCh8GgDnXj%2B5kn%3DmcGYibhV7AkgO4sJjMz%3DKzn%3DyoKtg6fQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079663.html">
   <LINK REL="Next"  HREF="079682.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] New URL Standard</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20New%20URL%20Standard&In-Reply-To=%3CCABirCh8GgDnXj%2B5kn%3DmcGYibhV7AkgO4sJjMz%3DKzn%3DyoKtg6fQ%40mail.gmail.com%3E"
       TITLE="[whatwg] New URL Standard">glenn at zewt.org
       </A><BR>
    <I>Mon Sep 24 16:07:48 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079663.html">[whatwg] New URL Standard
</A></li>
        <LI>Next message: <A HREF="079682.html">[whatwg] New URL Standard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79677">[ date ]</a>
              <a href="thread.html#79677">[ thread ]</a>
              <a href="subject.html#79677">[ subject ]</a>
              <a href="author.html#79677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Sep 24, 2012 at 12:30 PM, Tab Atkins Jr. &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jackalmage at gmail.com</A>&gt;wrote:

&gt;<i> I suggest just making it a map from String-&gt;[String].  You probably
</I>&gt;<i> want a little bit of magic - if the setter receives an array, replace
</I>&gt;<i> the current value with it; anything else, stringify then wrap in an
</I>&gt;<i> array and replace the current value.  The getter should return an
</I>&gt;<i> empty array for non-existing params.  You should be able to set .query
</I>&gt;<i> itself with an object, which empties out the map and then runs the
</I>&gt;<i> setter over all the items.  Bam, every single methods is now obsolete.
</I>&gt;<i>
</I>
When should this API guarantee that it round-trips URLs cleanly (aside from
quoting differences)?  For example, maintaining order in &quot;a=1&amp;b=2&amp;a=1&quot;, and
representing things like &quot;a=1&amp;b&quot; (no '=') and &quot;a&amp;&amp;b&quot; (no key at all).

Not round-tripping URLs might have annoying side-effects, like trying to
use history.replaceState to replace the path portion of the URL, and
unexpectedly having the query part of the URL get shuffled around or
changed in other ways.

Maybe it could guarantee that the query round-trips only if the value is
never modified (only assigned via the ctor or assigning to href), but once
you modify the query, the order becomes normalized and any other
non-round-trip side effects happen.

By the way, it would also be nice for the query part of this API to be
usable in isolation.  I often put query-like strings in the hash, resulting
in URLs like &quot;
<A HREF="http://example.com/server/side/path?server-side-query=1#client/side/path?client-side-query=1">http://example.com/server/side/path?server-side-query=1#client/side/path?client-side-query=1</A>&quot;,
and it would be nice to be able to work with both of these with the same
interface.  That is, query = new URLQuery(&quot;a=b&amp;c=d&quot;); query[&quot;a&quot;] = &quot;x&quot;;
query.toString() == &quot;a=x&amp;c=d&quot;;

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079663.html">[whatwg] New URL Standard
</A></li>
	<LI>Next message: <A HREF="079682.html">[whatwg] New URL Standard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79677">[ date ]</a>
              <a href="thread.html#79677">[ thread ]</a>
              <a href="subject.html#79677">[ subject ]</a>
              <a href="author.html#79677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
