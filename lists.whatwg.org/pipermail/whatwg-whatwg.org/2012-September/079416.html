<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Hardware accelerated canvas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Hardware%20accelerated%20canvas&In-Reply-To=%3CCABirCh-ZHD8TAAwgBTag5pH8geGp0Luhi_TyvH9kAnWm3kVmPg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079405.html">
   <LINK REL="Next"  HREF="079402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Hardware accelerated canvas</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Hardware%20accelerated%20canvas&In-Reply-To=%3CCABirCh-ZHD8TAAwgBTag5pH8geGp0Luhi_TyvH9kAnWm3kVmPg%40mail.gmail.com%3E"
       TITLE="[whatwg] Hardware accelerated canvas">glenn at zewt.org
       </A><BR>
    <I>Tue Sep  4 12:17:33 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079405.html">[whatwg] Hardware accelerated canvas
</A></li>
        <LI>Next message: <A HREF="079402.html">[whatwg] Hardware accelerated canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79416">[ date ]</a>
              <a href="thread.html#79416">[ thread ]</a>
              <a href="subject.html#79416">[ subject ]</a>
              <a href="author.html#79416">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>(some quotes restored)

On Tue, Sep 4, 2012 at 12:28 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i>  &gt; &gt; Realistically, there are too many pages that have 2D canvases that are
</I>&gt;<i> &gt; &gt; drawn to once and never updated for any solution other than &quot;don't
</I>&gt;<i> &gt; &gt; lose the data&quot; to be adopted. How exactly this is implemented is a
</I>&gt;<i> &gt; &gt; quality of implementation issue.
</I>&gt;<i>
</I>&gt;<i> &gt; There are ways to make it work without forgoing acceleration, e.g. taking
</I>&gt;<i> &gt; regular &quot;backups&quot; of the canvas contents, remembering every instruction
</I>&gt;<i> &gt; that was sent to the canvas, etc.
</I>&gt;<i>
</I>&gt;<i> On Mon, 3 Sep 2012, Glenn Maynard wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; As Erik said, taking a snapshot of the canvas is very expensive on some
</I>&gt;<i> &gt; platforms.  If you're rendering a game in realtime, you never have a
</I>&gt;<i> &quot;time
</I>&gt;<i> &gt; out&quot; where you can tolerate an expensive readback.
</I>&gt;<i>
</I>&gt;<i> If you're rendering a game in realtime, the issue doesn't come up. The
</I>&gt;<i> most you'll be out is a frame.
</I>&gt;<i>
</I>
You were listing approaches for never exposing the effects of context loss,
in claiming that &quot;don't lose data&quot; is workable.  To do that with snapshots,
you'd have to take a snapshot *every* frame, regardless of whether it's a
realtime game or a one-shot renderer.  That's the only way to get &quot;don't
lose the data&quot;.  After all, the game might decide to stop rendering at any
moment (eg. it might pause).  If your snapshot isn't up-to-date when
context loss happens, you won't have an up-to-date snapshot to restore, so
there's nothing you can do but lose data (and showing an out-of-date
snapshot is probably even worse than reverting to a blank canvas).

I do think that *heuristic* snapshots are probably one part of the
solution, but they're distinctly heuristic and they will always leave edge
cases where it's possible to lose canvas data.

It doesn't follow that since there are pages that only render once, the
only solution is to not lose data, since it's fairly straightforward to
only snapshot the first couple frames and then stop snapshotting (or eg.
stop snapshotting until the page doesn't render for 500ms, or something
like thaT).

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079405.html">[whatwg] Hardware accelerated canvas
</A></li>
	<LI>Next message: <A HREF="079402.html">[whatwg] Hardware accelerated canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79416">[ date ]</a>
              <a href="thread.html#79416">[ thread ]</a>
              <a href="subject.html#79416">[ subject ]</a>
              <a href="author.html#79416">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
