<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [canvas] Proposal for supportsContext
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20Proposal%20for%20supportsContext&In-Reply-To=%3CCAABs73gds_g3_X1rHCQqA72jSGwYGw9qSW3VWpPEwqCq%2B1Q2QA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079506.html">
   <LINK REL="Next"  HREF="079518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [canvas] Proposal for supportsContext</H1>
<!--htdig_noindex-->
    <B>Ashley Gullen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20Proposal%20for%20supportsContext&In-Reply-To=%3CCAABs73gds_g3_X1rHCQqA72jSGwYGw9qSW3VWpPEwqCq%2B1Q2QA%40mail.gmail.com%3E"
       TITLE="[whatwg] [canvas] Proposal for supportsContext">ashley at scirra.com
       </A><BR>
    <I>Mon Sep 10 15:01:11 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079506.html">[whatwg] [canvas] Proposal for supportsContext
</A></li>
        <LI>Next message: <A HREF="079518.html">[whatwg] [canvas] Proposal for supportsContext
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79516">[ date ]</a>
              <a href="thread.html#79516">[ thread ]</a>
              <a href="subject.html#79516">[ subject ]</a>
              <a href="author.html#79516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 10 September 2012 20:39, Dean Jackson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">dino at apple.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Sep 10, 2012, at 12:35 PM, Ashley Gullen &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ashley at scirra.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Can't Modernizr just lazy load the WebGL context?  (i.e. only try to
</I>&gt;<i> create a context if the web page actually asks if WebGL is supported)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes, it could. But we don't control Modernizr or any other scripts people
</I>&gt;<i> might use. I'd rather provide something at the browser-level to protect
</I>&gt;<i> from bad practice than expect every page to behave nicely.
</I>&gt;<i>
</I>
We can't expect everyone to use good practices, but I think we can expect
authors of widely-used libraries to use good practice!

I think browser makers would still be tempted to implement
supportsContext() in terms of creating a context and seeing if there's an
error, since that's the only way to be 100% sure the answer is correct.
 This does not really solve anything.  Also, realistically, any web app
actually interested in using WebGL will first create a WebGL context, and
if that fails then fall back to something else, so I'm not sure Modernizr
actually need a better test for this than their new fixed code.

Hiding/showing stuff in Javascript also doesn't really get around the need
that you have to create a context to know for sure.  Also, nothing so far
could be extended to determine software vs. hardware rendering.

Perhaps an approach could be taken similarly to HTMLMediaElement's
canPlayType().  supportsContext() could return a string, which is one of:
&quot;probably&quot; - the context appears to be supported (but this is not a
guarantee)
&quot;maybe&quot; - it is impossible to tell whether the context is supported without
creating it.
&quot;&quot; (empty string) - the context is definitely not supported.
This avoids returning a simple true/false which implies some kind of
guarantee in the true case.

For supportsContext(), it could return some other strings as well since
there are cases where we know more than HTMLMediaElement:
&quot;yes&quot; - context definitely can be created. I think this would apply for
&quot;2d&quot;, since I believe in all browsers regardless of the setup it can fall
back to a software renderer and the content will work, even if slowly.
 This also applies to Chrome's SwiftShader support for WebGL, meaning
creating a WebGL context is also guaranteed to succeed.
&quot;slow&quot; or &quot;software-rendered&quot; or &quot;emulated&quot; or some other term that needs
careful definition: context can definitely be created but uses software
rendering, e.g. meaning Chrome's SwiftShader will be used for WebGL, or
possibly that the user's system does not support hardware-accelerated
canvas &quot;2d&quot;.  Since this can apply simultaneously with &quot;yes&quot;, perhaps it
could also return &quot;yes emulated&quot; or similar.

Ashley

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079506.html">[whatwg] [canvas] Proposal for supportsContext
</A></li>
	<LI>Next message: <A HREF="079518.html">[whatwg] [canvas] Proposal for supportsContext
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79516">[ date ]</a>
              <a href="thread.html#79516">[ thread ]</a>
              <a href="subject.html#79516">[ subject ]</a>
              <a href="author.html#79516">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
