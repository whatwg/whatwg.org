<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] New URL Standard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20New%20URL%20Standard&In-Reply-To=%3CPine.LNX.4.64.1209251831460.1904%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079700.html">
   <LINK REL="Next"  HREF="079649.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] New URL Standard</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20New%20URL%20Standard&In-Reply-To=%3CPine.LNX.4.64.1209251831460.1904%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] New URL Standard">ian at hixie.ch
       </A><BR>
    <I>Tue Sep 25 11:42:55 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079700.html">[whatwg] New URL Standard
</A></li>
        <LI>Next message: <A HREF="079649.html">[whatwg] New URL Standard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79702">[ date ]</a>
              <a href="thread.html#79702">[ thread ]</a>
              <a href="subject.html#79702">[ subject ]</a>
              <a href="author.html#79702">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 25 Sep 2012, David Sheets wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; Not necessarily, but that's certainly possible. Personally I would 
</I>&gt;<i> &gt; recommend that we not change the definition of what is conforming from 
</I>&gt;<i> &gt; the current RFC3986/RFC3987 rules, except to the extent that the 
</I>&gt;<i> &gt; character encoding affects it (as per the HTML standard today).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    <A HREF="http://whatwg.org/html#valid-url">http://whatwg.org/html#valid-url</A>
</I>&gt;<i> 
</I>&gt;<i> I believe the '#' character in the fragment identifier qualifies.
</I>
Not sure what you mean.

Sounds like Anne is indeed expecting to widen the range of valid URLs 
though, so please disregard my comments on the matter. :-)


&gt;<i> &gt; We should definitely define what is a conforming URL, yes (either 
</I>&gt;<i> &gt; directly, or by reference to the RFCs, as HTML does now). Whether 
</I>&gt;<i> &gt; prose or a structured language is the better way to go depends on what 
</I>&gt;<i> &gt; the conformance rules are -- HTML is a good example here: it has parts 
</I>&gt;<i> &gt; that are defined in terms of prose (e.g. the HTML syntax as a whole), 
</I>&gt;<i> &gt; and other parts that are defined in terms of BNF (e.g. constraints on 
</I>&gt;<i> &gt; the conetnts of &lt;script&gt; elements in certain situations).
</I>&gt;<i> 
</I>&gt;<i> HTML is far larger and more compositional than URI. I am confident that, 
</I>&gt;<i> no matter what is specified in the WHATWG New URL Standard, a formal 
</I>&gt;<i> language exists which can describe the structure of conforming 
</I>&gt;<i> identifiers. If no such formal language can be described, the syntax 
</I>&gt;<i> specification is likely to be incomplete or unsound.
</I>
Just because it's possible to use a formal language doesn't mean it's a 
good idea. It depends how clear it is. In the HTML spec, there are places 
where I've actually used a hybrid, using BNF with some terminals defined 
using prose because defining them in BNF, while possible, is confusing.


&gt;<i> &gt;&gt; How will WHATWG-URLs which use the syntax extended from RFC3986 map 
</I>&gt;<i> &gt;&gt; into RFC3986 URI references for systems that only support those?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The same way that those systems handle invalid URLs today, I would 
</I>&gt;<i> &gt; assume. Do you have any concrete systems in mind here? It would be 
</I>&gt;<i> &gt; good to add them to the list of systems that we test. (For what it's 
</I>&gt;<i> &gt; worth, in practice, I've never found software that exactly followed 
</I>&gt;<i> &gt; RFC3986 and also rejected any non-conforming strings. There are just 
</I>&gt;<i> &gt; too many invalid URLs out there for that to be a viable implementation 
</I>&gt;<i> &gt; strategy.)
</I>&gt;<i> 
</I>&gt;<i> It is not the rejection of incoming nonconforming reference identifiers 
</I>&gt;<i> that causes issues but rather the emission of strictly conforming 
</I>&gt;<i> identifiers by Postel's Law (Robustness Principle). I know of several 
</I>&gt;<i> URI implementations that, given a nonconforming reference identifier, 
</I>&gt;<i> will only output conforming identifiers. Indeed, the standard under 
</I>&gt;<i> discussion will behave in exactly this way.
</I>&gt;<i> 
</I>&gt;<i> This leads to loss of information in chains of URI processors that can 
</I>&gt;<i> and will change the meaning of identifiers.
</I>
I don't really follow. If you have any concrete examples that would really 
help.


&gt;<i> &gt; I remember when I was testing this years ago, when doing the first 
</I>&gt;<i> &gt; pass on attempting to fix this, that I found that some less widely 
</I>&gt;<i> &gt; tested software, e.g. wget(1), did not handle URLs in the same manner 
</I>&gt;<i> &gt; as more widely tested software, e.g. IE, with the result being that 
</I>&gt;<i> &gt; Web pages were not handled interoperably between these two software 
</I>&gt;<i> &gt; classes. This is the kind of thing we want to stop, by providing a 
</I>&gt;<i> &gt; single way to parse all input strings, valid or invalid, as URLs.
</I>&gt;<i> 
</I>&gt;<i> Was wget in violation of the RFC? Was IE more lenient?
</I>
The RFC is so vague about what to do with non-conforming content that it's 
really hard to which was &quot;in violation&quot; or &quot;more lenient&quot;.

But in any case that's the wrong way to look at it. There's legacy 
content, there's implementations, and there's the spec. The spec is (or 
should be) the most mutable of these; its goal should be to define how 
implementations should behave in order to make the content work 
interoperably amongst all of the implementations, and to define the best 
practice for content creators to avoid known dangers.


&gt;<i> If every string, valid or invalid, is parseable as a URI reference, is 
</I>&gt;<i> there an algorithm to accurately extract URIs from plain text?
</I>
That would be an interesting thing to define, but in practice I don't 
think it's something implementors would care to follow. People tend to 
write URL fragments and expect them to be linked. For example, if I write, 
in an e-mail, the string google.com, people expect &quot;google.com&quot; to become 
a link to &quot;<A HREF="http://google.com/">http://google.com/</A>&quot; and for the comma to be ignored. Similarly, 
if I have a page on an intranet server and I write intranet/ianh/plan.txt, 
it would be useful if that was turned into a link to the file. But there's 
nothing to distinguish that from me writing freezing/ice/273.23K, which 
isn't intended to be a URL at all.

Given this, I think plain text renderers will be stuck with heuristics for 
some time to come. (Maybe even heuristics that involve actual DNS queries 
and HEAD requests to see if potential URLs are useful.)

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079700.html">[whatwg] New URL Standard
</A></li>
	<LI>Next message: <A HREF="079649.html">[whatwg] New URL Standard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79702">[ date ]</a>
              <a href="thread.html#79702">[ thread ]</a>
              <a href="subject.html#79702">[ subject ]</a>
              <a href="author.html#79702">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
