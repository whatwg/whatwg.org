<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] DOM Keyboard Event Level 3 questions about proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20DOM%20Keyboard%20Event%20Level%203%20questions%20about%20proposal&In-Reply-To=%3CCAP%3DKyTjKJNk3S2zvWx1DHuKr6WtdFbsJD%2BpWmmWyipU1MKGNHQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079648.html">
   <LINK REL="Next"  HREF="079688.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] DOM Keyboard Event Level 3 questions about proposal</H1>
<!--htdig_noindex-->
    <B>&#1045;&#1075;&#1086;&#1088; &#1053;&#1080;&#1082;&#1086;&#1083;&#1072;&#1077;&#1074;</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20DOM%20Keyboard%20Event%20Level%203%20questions%20about%20proposal&In-Reply-To=%3CCAP%3DKyTjKJNk3S2zvWx1DHuKr6WtdFbsJD%2BpWmmWyipU1MKGNHQ%40mail.gmail.com%3E"
       TITLE="[whatwg] DOM Keyboard Event Level 3 questions about proposal">termi1uc1 at gmail.com
       </A><BR>
    <I>Sat Sep 22 14:57:43 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079648.html">[whatwg] Covert sharing of user agent state.
</A></li>
        <LI>Next message: <A HREF="079688.html">[whatwg] DOM Keyboard Event Level 3 questions about proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37371">[ date ]</a>
              <a href="thread.html#37371">[ thread ]</a>
              <a href="subject.html#37371">[ subject ]</a>
              <a href="author.html#37371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hello.

Right now I'm looking for a way to implement 'DOM keyboard  event level 3'
into my current project and also I'm developing polyfill for this API (
<A HREF="https://github.com/termi/DOM-Keyboard-Event-Level-3-polyfill">https://github.com/termi/DOM-Keyboard-Event-Level-3-polyfill</A>). As a
reference I've used this standard (
<A HREF="http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120614/">http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120614/</A>) along with Opera
12.10 and IE9+ implementations.

I've a few questions:

1) How can I determine key combination triggering if user's locale is other
than US_en? Both 'char' and 'key' properties return the symbol, that's
specific to current user's locale. For example how can we detect 'Ctrl+S'
combination? With this code:

if(event.key.toLowerCase() == 's' || event.key.toLowerCase() == '&#1099;' || ...
[and so on for every locale that is supported by your web application.]


2) There's no clear statement about 'char' and 'key' values for special
symbol key press events. Opera 12.10 x64 Win7x64  (12.10.1592 at least),
for example, returns some gibberish in key and char property while Ctrl key
pressed. You can see it for yourself by going to
<A HREF="http://h123.ru/-/tests/KeyboardEvent/">http://h123.ru/-/tests/KeyboardEvent/</A> with Opera 12.10 beta RC and pressing
Ctrl+Q (or Ctrl+&lt;any character&gt;).


3) Why the 'key' property is case-sensitive if we already have 'char'
property for input symbol detection.



To summarize I'd like to say that the new API doesn't solve any of the
problems but creating new ones. Especially after cross-locales 'keyCode'
property has been declared outdated.



As a solution I'd like to suggest 'char' and 'key' logical division. 'Char'
property should return input symbol (just like it does right now) and 'key'
property should always, for any special symbol key pressed, return
lowercased US_en locale symbol for any symbol value. For example it can be:
event :{
  key : &quot;q&quot;
  , char &quot;&#1049;&quot;
  , shiftKey : true
  , locale : &quot;RU_ru&quot;
  , ...
}
</PRE>


































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079648.html">[whatwg] Covert sharing of user agent state.
</A></li>
	<LI>Next message: <A HREF="079688.html">[whatwg] DOM Keyboard Event Level 3 questions about proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37371">[ date ]</a>
              <a href="thread.html#37371">[ thread ]</a>
              <a href="subject.html#37371">[ subject ]</a>
              <a href="author.html#37371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
