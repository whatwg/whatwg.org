<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Security restriction allows content thievery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Security%20restriction%20allows%20content%20thievery&In-Reply-To=%3CBLU002-W144DFEEDDEC9BE64BD9B5B6AAAF0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037187.html">
   <LINK REL="Next"  HREF="079471.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Security restriction allows content thievery</H1>
<!--htdig_noindex-->
    <B>Fred Andrews</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Security%20restriction%20allows%20content%20thievery&In-Reply-To=%3CBLU002-W144DFEEDDEC9BE64BD9B5B6AAAF0%40phx.gbl%3E"
       TITLE="[whatwg] Security restriction allows content thievery">fredandw at live.com
       </A><BR>
    <I>Thu Sep  6 17:14:59 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="037187.html">[whatwg] Security restriction allows content thievery
</A></li>
        <LI>Next message: <A HREF="079471.html">[whatwg] Security restriction allows content thievery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79464">[ date ]</a>
              <a href="thread.html#79464">[ thread ]</a>
              <a href="subject.html#79464">[ subject ]</a>
              <a href="author.html#79464">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
&gt;<i> &gt; I'm currently building an analysis system like Google Analytics, which 
</I>&gt;<i> &gt; gets embedded into a website via a small JavaScript snippet. When I 
</I>&gt;<i> &gt; analyzed the data, I came across a very interesting trick because I got 
</I>&gt;<i> &gt; a lot of requests (with the data from location.href) where the entire 
</I>&gt;<i> &gt; website was embedded into a data:text/html URI - except that all ads of 
</I>&gt;<i> &gt; the page were replaced. Fortunately, my tracking code has been left 
</I>&gt;<i> &gt; without modifications.
</I>&gt;<i> 
</I>&gt;<i> Weird.
</I>
Perhaps the concern is that content has been copied into a data: URL in violation of copyrights and used to obtain Ad revenue. However the content could very well be used with permission.  Ads are dynamic and do change on otherwise static content pages.  Thus this could well be an honest use of technology. It would be interesting to know if the search engines actually look at content in data: URLs - if not then the 'copied' content would seem to bring little advantage.

Or perhaps the concern is just that it thwarts efforts to track the referer.
 
&gt;<i> &gt; But the scary thing is that this way you can monetize foreign content by 
</I>&gt;<i> &gt; simply embedding it somewhere you can direct traffic to. That's pretty 
</I>&gt;<i> &gt; clever, because the original site owner doesn't notice this abuse due to 
</I>&gt;<i> &gt; the fact that top.location.href isn't readable. Or even worse, he would 
</I>&gt;<i> &gt; never notice it at all when he doesn't sniff the URI with JavaScript, 
</I>&gt;<i> &gt; because image files would have no referrer.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; My final approach to convict the abuser is based on the fact, that the 
</I>&gt;<i> &gt; JavaScript was dynamically loaded from my server and that I can write to 
</I>&gt;<i> &gt; location.href. So I added this piece of code:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; if (top.location.protocol === 'data:') {
</I>&gt;<i> &gt;     top.location.href = '<A HREF="http://example.com/trap/">http://example.com/trap/</A>';
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; But even then the referrer will not be passed to the server. So my 
</I>&gt;<i> &gt; proposal is that the data URI schema gets an exception on this security 
</I>&gt;<i> &gt; behavior.
</I>&gt;<i> 
</I>&gt;<i> I don't understand. What referrer are you trying to set? To what?
</I>
I think the aim is to have the URL of the page that includes these data: URLs sent to the tracking server?

I can't see any technical issues raised here?

Some think trackers are 'scary' and consider user privacy and safety more important, and would prefer to not send a referer and to even have such  Javascript sandboxed so that it can't leak private information.

cheers
Fred





 		 	   		  
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037187.html">[whatwg] Security restriction allows content thievery
</A></li>
	<LI>Next message: <A HREF="079471.html">[whatwg] Security restriction allows content thievery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79464">[ date ]</a>
              <a href="thread.html#79464">[ thread ]</a>
              <a href="subject.html#79464">[ subject ]</a>
              <a href="author.html#79464">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
