<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Features for responsive Web design
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Features%20for%20responsive%20Web%20design&In-Reply-To=%3CPine.LNX.4.64.1209040049490.30734%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079551.html">
   <LINK REL="Next"  HREF="079428.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Features for responsive Web design</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Features%20for%20responsive%20Web%20design&In-Reply-To=%3CPine.LNX.4.64.1209040049490.30734%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Features for responsive Web design">ian at hixie.ch
       </A><BR>
    <I>Tue Sep  4 12:47:38 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="079551.html">[whatwg] Canvas arcTo method
</A></li>
        <LI>Next message: <A HREF="079428.html">[whatwg] Features for responsive Web design
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37146">[ date ]</a>
              <a href="thread.html#37146">[ thread ]</a>
              <a href="subject.html#37146">[ subject ]</a>
              <a href="author.html#37146">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 7 Jun 2012, Mark Callow wrote:
&gt;<i> On 06/06/2012 21:36, Henri Sivonen wrote:
</I>&gt;<i> &gt; More to the point, the important characteristic is being able to stop 
</I>&gt;<i> &gt; downloading *quarter* way through the file and get results that are as 
</I>&gt;<i> &gt; good as if the full-size file had been down sampled with both 
</I>&gt;<i> &gt; dimensions halved and that size had been sent as the full file. (I am 
</I>&gt;<i> &gt; not aware of a bitmap format suitable for photographs that has this 
</I>&gt;<i> &gt; characteristic. I am aware that JPEG 2000 does not have this 
</I>&gt;<i> &gt; characteristic. I believe interlaced PNGs have that characteristic, 
</I>&gt;<i> &gt; but they aren't suitable for photographs, due to the lossless 
</I>&gt;<i> &gt; compression.)
</I>&gt;<i>
</I>&gt;<i> IIRC Kodak's PhotoCD image format had this characteristic. The first 
</I>&gt;<i> part is a low res. image, the second is the differences between the low 
</I>&gt;<i> res. image zoomed to the high res. size and the actual high res. image.
</I>
Such formats certainly would make a lot of this simpler!


On Wed, 8 Aug 2012, Markus Ernst wrote:
&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; - Use &lt;picture&gt; for the art direction use case.
</I>&gt;<i> &gt; &gt; - Remove the MQ except the pixel density from @srcset, and make 
</I>&gt;<i> &gt; &gt; @srcset available in both &lt;img&gt; and &lt;source&gt;:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &lt;img src=&quot;normal.jpg&quot; alt=&quot;&quot; srcset=&quot;high.jpg 2x, normal.jpg 1x&quot;&gt;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &lt;picture alt=&quot;&quot;&gt;
</I>&gt;<i> &gt; &gt;    &lt;source src=&quot;mobile.jpg&quot;
</I>&gt;<i> &gt; &gt;      srcset=&quot;low.jpg 0.5x, mobile.jpg 1x, mobile-hd.jpg 2x&quot;&gt;
</I>&gt;<i> &gt; &gt;    &lt;source src=&quot;large.jpg&quot; media=&quot;min-width: 600px&quot;
</I>&gt;<i> &gt; &gt;      srcset=&quot;large.jpg 1x, large-high.jpg 2x&quot;&gt;
</I>&gt;<i> &gt; &gt;    &lt;img src=&quot;mobile.jpg&quot;&gt;
</I>&gt;<i> &gt; &gt; &lt;/picture&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I don't understand why this is better than:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     &lt;img src=&quot;large.jpg&quot; alt=&quot;&quot;
</I>&gt;<i> &gt;          srcset=&quot;low.jpg 600w 0.5x, mobile.jpg 600w 1x, mobile-hd.jpg 600w 2x,
</I>&gt;<i> &gt;                  large-high.jpg 2x&quot;&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; It seems to me that srcset as specified does exactly the same thing, 
</I>&gt;<i> &gt; but more succintly.
</I>&gt;<i> 
</I>&gt;<i> [...]
</I>&gt;<i> 
</I>&gt;<i> &gt; On Thu, 24 May 2012, Florian Rivoal wrote:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &lt;picture&gt;
</I>&gt;<i> &gt; &gt;   &lt;source srcset=&quot;normal.jpg 1x, highres.jpg 2x&quot;&gt;
</I>&gt;<i> &gt; &gt;   &lt;source media=&quot;(max-width:768px)&quot; srcset=&quot;ipad.jpg 1x, ipad3.jpg 2x&quot;&gt;
</I>&gt;<i> &gt; &gt;   &lt;source media=&quot;(max-width:320px)&quot; srcset=&quot;iphone.jpg 1x, iphone4.jpg
</I>&gt;<i> &gt; &gt; 2x&quot;&gt;
</I>&gt;<i> &gt; &gt;   &lt;img src=&quot;normal.jpg&quot;&gt;
</I>&gt;<i> &gt; &gt; &lt;/picture&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I don't understand why this is better than:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     &lt;img src=&quot;normal.jpg&quot; srcset=&quot;highres.jpg 2x,
</I>&gt;<i> &gt;                                   ipad.jpg 768w 1x, ipad3.jpg 768w 2x,
</I>&gt;<i> &gt;                                   iphone.jpg 320w 1x, iphone4.jpg 320w 2x&quot;
</I>&gt;<i> &gt;          alt=&quot;...&quot;&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ...which as far as I can tell does exactly the same thing.
</I>&gt;<i> 
</I>&gt;<i> It is better because art direction and bandwidth use cases can be solved
</I>&gt;<i> differently in an appropriate manner:
</I>&gt;<i> - For the bandwidth use case, no MQ is needed, but only some information on
</I>&gt;<i> the sources available to let the UA decide which source to load.
</I>&gt;<i> - For the art direction use case OTOH, the &lt;picture&gt; element is more intuitive
</I>&gt;<i> to handle and also easier to script, as sources can be added or removed via
</I>&gt;<i> DOM.
</I>
I don't understand why it's more intuitive and easier. It seems way more 
unwieldly.

Whether it's easier for script is hard for me to say, because I don't 
really understand what scripts are going to be doing here. Can you 
elaborate? What will scripts need to do here?

If it is harder to script, we can always provide a dedicated API.

Manipulating &lt;picture&gt; from script would be a huge pain -- you'd have to 
be manipulating lots of elements and attributes.


&gt;<i> Anyway, with your proposal, would this be valid, to address the 
</I>&gt;<i> bandwidth-only use case?:
</I>&gt;<i> 
</I>&gt;<i> &lt;img src=&quot;normal.jpg&quot; alt=&quot;&quot; srcset=&quot;high.jpg 2x, normal.jpg 1x&quot;&gt;
</I>
Yes (assuming it's a presentational image). You can make it even shorter:

   &lt;img src=&quot;normal.jpg&quot; alt=&quot;&quot; srcset=&quot;high.jpg 2x&quot;&gt;


On Thu, 9 Aug 2012, Andy Davies wrote:
&gt;<i> 
</I>&gt;<i> I know it's there for graceful degradation reasons but doesn't setting 
</I>&gt;<i> the 1x image via src and the others via srcset just add to developers 
</I>&gt;<i> confusion?
</I>
Doesn't seem that confusing to me, but maybe I've more confidence in 
authors than you? :-)


&gt;<i> Would also like to see if there's a way of using srcset to hint to the 
</I>&gt;<i> UA that it can skip the image under low throughput conditions e.g. GPRS. 
</I>&gt;<i> Same would apply to image-set in CSS
</I>
The browser is never required to show the image, so that's already 
possible for all images. However, for a discussion of the difficulties of 
bandwidth-driven negotiations, see:

   <A HREF="http://lists.w3.org/Archives/Public/public-whatwg-archive/2012May/0247.html">http://lists.w3.org/Archives/Public/public-whatwg-archive/2012May/0247.html</A>


On Wed, 8 Aug 2012, Florian Rivoal wrote:
&gt;<i> 
</I>&gt;<i> 1) Your syntax (almost, see point 2) replicates the behavior of 
</I>&gt;<i> max-width and and max-height Media Queries, but doesn't give access to 
</I>&gt;<i> other existing and future media queries, some of which may actually be 
</I>&gt;<i> useful. For example:
</I>&gt;<i>
</I>&gt;<i> a) using the 'monocrhome' MQ to serve gray scale images to 
</I>&gt;<i> black-and-white printers or e-ink displays. Displaying a color image on 
</I>&gt;<i> a monochrome display does not always work well, as two different colors 
</I>&gt;<i> of similar luminosity would be impossible to distinguish in a monochrome 
</I>&gt;<i> environment. I expect this need to grow together with the increasing 
</I>&gt;<i> popularity of HTML based ebooks.
</I>
Is this a real use case or a theoretical one? Until we didn't support it, 
nobody once mentioned that it was a use case they cared about -- they only 
mentioned dimensions as being the issue.


&gt;<i> b) Microsoft is proposing a MQ which lets you detect that the UA has been put
</I>&gt;<i> in hight contrast mode (for accessibility reasons), and that your content
</I>&gt;<i> should follow along.
</I>&gt;<i> <A HREF="http://msdn.microsoft.com/en-us/library/windows/apps/hh465764.aspx">http://msdn.microsoft.com/en-us/library/windows/apps/hh465764.aspx</A>
</I>&gt;<i> Being able to switch images based on that could be nice.
</I>
If this becomes something that there is authoring demand for, it would be 
easy for us to add support for it. (Are there many sites that provide 
high-contrast alternatives today?)


&gt;<i> c) using the 'orientation' MQ to pick a different cropping of an image, 
</I>&gt;<i> in a way that is similar to the width-only decision in the Obama 
</I>&gt;<i> example.
</I>
When would you change the image based on orientation rather than 
dimensions? If you have any real-world examples of this it would be quite 
helpful.


&gt;<i> 2) in the srcset-only notation, w and h are hints for the browser, since 
</I>&gt;<i> picking the right image is something for which browsers are given the 
</I>&gt;<i> option of doing it differently. For the pixel density of the image, 
</I>&gt;<i> leaving it up to the browser is a good thing, as there are a large 
</I>&gt;<i> number of factors that can potentially come into play. For w and h 
</I>&gt;<i> though, this is pretty much entirely up to the author's discretion, so 
</I>&gt;<i> allowing the browser to have different rules for picking the image 
</I>&gt;<i> doesn't buy us anything. If id didn't cost anything either, that'd be 
</I>&gt;<i> ok, but it does.
</I>
I don't understand. The spec seems to have this distinction for srcset, it 
doesn't seem to me to be different than media queries in an important way.


&gt;<i> 3) you syntax is terser, which is in generally a good thing, but I think 
</I>&gt;<i> it crosses the limit, as a large number of people have expressed 
</I>&gt;<i> confusion as to w and h were min or max, for example. The extra 
</I>&gt;<i> verbosity of my syntax gets you an extra bit of clarity, admittedly at 
</I>&gt;<i> the cost of having multiple elements.
</I>
I agree that there's a small learning curve, but it seems pretty easy to 
understand. Do we really want to trade the small learning curve for a 
perpetuity of verbosity?


&gt;<i> I have always been comfortable with the 'x' part of srcset, but the w 
</I>&gt;<i> and h part felt somewhat wrong to me. What you'd really want to consider 
</I>&gt;<i> when deciding which image to pick isn't the size of the viewport itself, 
</I>&gt;<i> but the size available for the image once the rest of the layout is 
</I>&gt;<i> taken into account.
</I>
Yeah. That's how I originally designed srcset=&quot;&quot;, actually, but it was 
pointed out to me that that's impossible to implement because at the time 
the browsers need to pick an image, they haven't yet gotten the style 
sheet so they don't know what the layout will be.

(Note that the media-query-based solutions have the same problem.)


&gt;<i> Because of that, I was interested in proposals involving an (optional) 
</I>&gt;<i> defer attribute, which let you wait until layout can inform the 
</I>&gt;<i> decision. Then, given accurate meta-data on the images's sizes and 
</I>&gt;<i> density, it would be possible to pick the optimum one. But of course, 
</I>&gt;<i> this means waiting, so this isn't generally acceptable and must be opt 
</I>&gt;<i> it. And I can't put my finger on exactly how that would work either.
</I>
If this is something people want to do, it's easy enough to script. If it 
turns out that people are often trading the performance for this effect, 
we can definitely look into adding it as a supported feature, but I think 
(or rather, browser vendors seem to think) it's more likely that the 
performance matters more than the convenience.


&gt;<i> Having established that perfection cannot be reached here, I could now 
</I>&gt;<i> consider whether srcset was good enough for most cases, and I think that 
</I>&gt;<i> if we don't care about things like 'monochrome', 'high-contrast', or 
</I>&gt;<i> 'orientation', it is.
</I>&gt;<i> 
</I>&gt;<i> To me, the only remaining question is whether we care about these. If we 
</I>&gt;<i> do, rather than reinventing a new syntax for every media query someone 
</I>&gt;<i> wants to use in a srcset, I think we're better off letting people use 
</I>&gt;<i> media queries directly, in which case then w and h are a redundant 
</I>&gt;<i> terser syntax for max-width and max-height. If we don't, srcset is 
</I>&gt;<i> probably as good as it gets.
</I>
I more or less agree, except that I think the verbosity of media queries 
repeated a series of times with only a URL for each case is a _lot_ of 
verbosity, and probably does deserve a terse syntax even if we add other 
features. It's not like style sheets, where you have one media query per 
link and so each one is present once per page, or @media rules where you 
typically have one per _site_ for each media query -- images occur a _lot_ 
on a site and so you can end up with many media queries repeated many 
times per page.

(Incidentally, lest anyone think I have &quot;not invented here&quot; syndrome for 
media queries or something, note that I was closely involved in their 
development and came up with several bits of their esoteric syntax.)


On Thu, 9 Aug 2012, Kornel Lesi&#168;&#189;ski wrote:
&gt;<i> 
</I>&gt;<i> Fractional ratios have proven to be unnecessary: on desktops 1x CSS 
</I>&gt;<i> pixel changed from 72dpi (CRT) to 130dpi on notebook screens, but we 
</I>&gt;<i> haven't got fractional scaling ratios along the way.
</I>
That's not entirely accurate. It's true only for users not using the 
&quot;zoom&quot; feature in browsers.


On Mon, 13 Aug 2012, Henri Sivonen wrote:
&gt;<i> 
</I>&gt;<i> If it indeed is the case that there are really only two realistic 
</I>&gt;<i> bitmaps samplings for catering to differences in weeding device pixel 
</I>&gt;<i> density (ignoring art direction), it would make sense to have simply 
</I>&gt;<i> &lt;img src=&quot;1xsampling.jpg&quot; hisrc=&quot;2xsampling.jpg&quot; alt=&quot;Text alternative&quot;&gt; 
</I>&gt;<i> instead of an in-attribute microsyntax for the non-art-directed case.
</I>
If that was the only use case, indeed. But I'm not sure the first 
assumption is valid, and the second one is clearly not.


&gt;<i> &gt;&gt; I'm not convinced that it's a good idea to solve these two axes in 
</I>&gt;<i> &gt;&gt; the same syntax or solution. It seems to me that srcset=&quot;&quot; is bad for 
</I>&gt;<i> &gt;&gt; the art-direction case and &lt;picture&gt; is bad for the pixel density 
</I>&gt;<i> &gt;&gt; case.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't really understand why
</I>&gt;<i> 
</I>&gt;<i> They are conceptually very different: One is mere mipmapping and can be 
</I>&gt;<i> automatically generated. The other involves designer judgment and is 
</I>&gt;<i> conceptually similar to CSS design where authors use MQ. Also, having w 
</I>&gt;<i> and h refer to the browsing environment and x to the image in the same 
</I>&gt;<i> microsyntax continues to be highly confusing.
</I>
The &quot;w&quot;, &quot;h&quot;, and &quot;x&quot; all refer to both the environment and the image. 
They describe what the environment's characteristics need to be for the 
image to be useful.


&gt;<i> Ignoring implementation issues for a moment, I think it would be 
</I>&gt;<i> conceptually easier it to disentangle these axes like this:
</I>&gt;<i> 
</I>&gt;<i> Non-art directed:
</I>&gt;<i> &lt;img src=&quot;1xsampling.jpg&quot; hisrc=&quot;2xsampling.jpg&quot; alt=&quot;Text alternative&quot;&gt;
</I>&gt;<i> 
</I>&gt;<i> Art directed:
</I>&gt;<i> &lt;picture&gt;
</I>&gt;<i> &lt;source src=&quot;1xsampling-cropped.jpg&quot; hisrc=&quot;2xsampling-cropped.jpg&quot;
</I>&gt;<i> media=&quot;max-width: 480px&quot;&gt;
</I>&gt;<i> &lt;img src=&quot;1xsampling.jpg&quot; hisrc=&quot;2xsampling.jpg&quot; alt=&quot;Text alternative&quot;&gt;
</I>&gt;<i> &lt;/picture&gt;
</I>
Fundamentally, a multiple-element solution here is simply a non-starter, 
IMHO. The pros of the multielement solution with verbose media queries are 
about the same in magnitude as the pros of the one-attribute solution with 
terse syntax, but the cons of the terse syntax are small whereas the cons 
of the multiple-element syntax are immense. For the multi-element solution 
to be a net positive over the one-attribute solution, the magnitude of its 
&quot;pros&quot; would have to be enormous.


On Tue, 21 Aug 2012, Mathew Marquis wrote:
&gt;<i> On Aug 7, 2012, at 3:09 PM, Ian Hickson wrote:
</I>&gt;<i> &gt; On Tue, 15 May 2012, Matthew Wilcox wrote:
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; I do not see much potential for srcset. The result of asking the 
</I>&gt;<i> &gt;&gt; author community was overwhelmingly negative, indirection or no 
</I>&gt;<i> &gt;&gt; indirection.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm happy to consider specific feedback, but at the time in this 
</I>&gt;<i> &gt; thread where this e-mail was sent, we had yet to receive any negative 
</I>&gt;<i> &gt; commentary at all on the mailing list, so this seems a bit vague. :-)
</I>&gt;<i> 
</I>&gt;<i> A great deal of author feedback was posted to 
</I>&gt;<i> <A HREF="http://www.w3.org/community/respimg/2012/05/11/respimg-proposal/,">http://www.w3.org/community/respimg/2012/05/11/respimg-proposal/,</A> the 
</I>&gt;<i> link to which was posted to the mailing list several times. You&#146;ll 
</I>&gt;<i> notice that the comments are nearly unanimous.
</I>
I did go through those at the time.


&gt;<i> If you&#146;d prefer I instruct the developer community to comment on this 
</I>&gt;<i> thread instead, I&#146;m happy to do so. If author sentiment was somehow 
</I>&gt;<i> ignored the first time, though &#151; if it either went wholly unnoticed by 
</I>&gt;<i> the decision-makers, or is now being disregarded due to where those 
</I>&gt;<i> sentiments were posted &#151; I don&#146;t see where it will change much apart 
</I>&gt;<i> from several hundred more emails to prove a fairly self-evident point.
</I>
The quantity of feedback is irrelevant. I only consider the weight of the 
arguments.

However, if people have information that has not received a reply, then 
yes, please e-mail it to the list. While I do read all the input I am 
aware of (including the many posts to the CG), I only guarantee a response 
to e-mails sent to this list.


On Wed, 22 Aug 2012, John Mellor wrote:
&gt;<i> 
</I>&gt;<i> The primary problem with using w/h tokens for this, and the reason the 
</I>&gt;<i> above srcset is so redundant, is that in the current srcset spec the x 
</I>&gt;<i> tokens are totally independent from the w/h tokens. So if you have an 
</I>&gt;<i> image that's 640 image pixels wide, it is suitable for display 640 CSS 
</I>&gt;<i> px wide on a low dpi device, but only 480 CSS px wide on a medium dpi 
</I>&gt;<i> device, and only 320 CSS px wide on a high dpi device, etc.
</I>
It is true that if you do in fact want to use the same image for different 
width/density combinations, that you will have to repeat the filename. But 
it seems highly unlikely that you'd want to use the same image on a 250 
CSS pixel wide device at 4x as on a 1000 CSS pixel wide screen at 1x. On 
the small device, the image would be tiny!



&gt;<i> Finally you'll notice that I put &quot;320.jpg 320w 1.25x&quot; instead of 
</I>&gt;<i> &quot;320.jpg 320w 1x&quot;. That's because (as pointed out in 2.) srcset is 
</I>&gt;<i> currently specified such that these are strict maximums, yet in practice 
</I>&gt;<i> it's better to upscale an image a little bit (e.g. 1.25x) than to 
</I>&gt;<i> download an image that's twice as big (potentially 4x the file size). 
</I>&gt;<i> Cobbling together w/h and x tokens like this requires the author to 
</I>&gt;<i> manually make value judgements like this and incorporate them into their 
</I>&gt;<i> calculations, when it would be better to let the browser decide.
</I>
Actually doing this with srcset=&quot;&quot; would not get the effect you want, as 
the &quot;x&quot; value affects the image's intrinsic dimensions. You should 
describe the image's ideal environment for best results.

However, nothing stops the user agent from using the 1x image when it's 
really at 1.25x (e.g. due to zoom). It's up to the UA to make that 
judgement call.


On Wed, 22 Aug 2012, John Mellor wrote:
&gt;<i> 
</I>&gt;<i> So for example &quot;1280.jpg 4x&quot; means that this image is 4 times larger 
</I>&gt;<i> than the given intrinsic width of 320px. So sure, it would be suitable 
</I>&gt;<i> for display on a hypothetical 4x display at 320px width; but the browser 
</I>&gt;<i> also knows that it would be suitable for display on a 2x display at 
</I>&gt;<i> 640px width, a 1.5x display at 853px width, and a 1x display at 1280px 
</I>&gt;<i> width.
</I>
This isn't accurate. A trivial example of it not being accurate is a 1000 
device pixel image that consists of a horiontal double-headed arrow 
labeled &quot;Five Hundred CSS Pixels&quot;. That image is _only_ applicable in a 
500 CSS pixel double-density environment. If you sed it in a 250 CSS pixel 
quad-density environment, it would be wrong.


&gt;<i> As I said, the fact that UAs have freedom doesn't change the semantics 
</I>&gt;<i> in the eyes of the author. The description and algorithm in the spec 
</I>&gt;<i> heavily imply that a typical UA algorithm will be to choose the images 
</I>&gt;<i> with the smallest pixel size descriptors &gt;= the pixel size of the 
</I>&gt;<i> display. It would be much clearer if this implication was not made, i.e. 
</I>&gt;<i> remove step 21 completely, change step 24 to read &quot;Remove all the 
</I>&gt;<i> entries in candidates except the one whose associated pixel density is 
</I>&gt;<i> the best match for a user-agent-defined value giving the nominal pixel 
</I>&gt;<i> density of the display.&quot;, and change the phrase &quot;maximum pixel density&quot; 
</I>&gt;<i> to just &quot;pixel density&quot; in [the spec].
</I>
The idea is to provide a &quot;default&quot; algorithm that will usually be used, 
while still allowing the kinds of lee-way you describe (note in particular 
that the number is compared to &quot;a *user-agent-defined* value giving the 
nominal pixel density of the display&quot; (emphasis added)). Most of the time, 
when given a choice between upscaling a low-res image and down-scaling a 
high-res one, there's only one good choice.


On Wed, 22 Aug 2012, John Mellor wrote:
&gt;<i> 
</I>&gt;<i> The w/h descriptors are sufficient *only* for art direction, where you 
</I>&gt;<i> want to swap between completely different images (or at least different 
</I>&gt;<i> crops of the same image), based on viewport size, to match other changes 
</I>&gt;<i> occurring in your responsive design as the viewport size changes (and 
</I>&gt;<i> they do a fine job at art direction).
</I>
This is unsurprising, since this is exactly the use case for which they 
were designed.


&gt;<i> They are *not* suitable (even combined with x descriptors) as a general 
</I>&gt;<i> purpose mechanism for dealing with flexibly-sized images, where you need 
</I>&gt;<i> to match the number of device pixels taken up by the image to the number 
</I>&gt;<i> of image pixels in the image you load (while allowing the browser to 
</I>&gt;<i> adjust this based on bandwidth constraints etc), since doing that 
</I>&gt;<i> properly *requires* additional information, i.e. knowing the intrinsic 
</I>&gt;<i> size (or at least intrinsic width or height) of the image before 
</I>&gt;<i> choosing which to download.
</I>
This is true, because this use case was not one of the use cases we 
attempted to address. This is the first I've even heard that it might be 
interesting, in fact. Do you have any examples of Web pages where a 
low-res desktop image makes sense as a high-res mobile image, say?


&gt;<i> The art direction use case can be entirely orthogonal. It should be 
</I>&gt;<i> handled with the w/h descriptors as currently specified. What I'm 
</I>&gt;<i> proposing would operate after any w/h descriptors have narrowed down the 
</I>&gt;<i> set of allowable images, and let the browser choose between the 
</I>&gt;<i> remaining images more intelligently in the case of flexible-size images, 
</I>&gt;<i> where currently the browser has no idea which to use.
</I>
Could you give a real example of this kind of thing? I'd love to study 
what kinds of images we're talking about here. None of the examples people 
posted when we were designing srcset=&quot;&quot; were like this.


On Sat, 25 Aug 2012, Fred Andrews wrote:
&gt;<i> 
</I>&gt;<i> Agreed.  The width and height of the images is what is needed.  The 
</I>&gt;<i> browser needs to fill pixels so needs to know the sizes of the available 
</I>&gt;<i> images in pixels.
</I>&gt;<i> 
</I>&gt;<i> Forget the x scale descriptions and all the other proposed extensions 
</I>&gt;<i> and just include a set of images with their pixel height and width.  
</I>&gt;<i> Forget dpi etc, its just not needed for this.
</I>
I don't understand this proposal at all. Can you show a concrete example 
of how you see this working?


&gt;<i> Consider adding a 'selected' flag to give JS control of the selection.  
</I>&gt;<i> If a particular image is 'selected' then it is the default choice. If no 
</I>&gt;<i> image is 'selected' then the browser can use a default algorithm to make 
</I>&gt;<i> a choice based on the target image box size and user choices relating to 
</I>&gt;<i> image quality versus bandwidth tradeoffs.  This allows JS to override 
</I>&gt;<i> the browser default algorithm.  For example a web gallery can offer 
</I>&gt;<i> visitors a 'quality' choice and use this to flag an appropriate selected 
</I>&gt;<i> image.
</I>
This is definitely something we can add if it turns out to be something 
people want.


&gt;<i> Image cropping and centering is something best left to JS algorithms.  
</I>&gt;<i> Fluid cropping and centering may need an algorithm that takes into 
</I>&gt;<i> account particular areas of interest and focus within an image, and user 
</I>&gt;<i> choices which would be better handled within the webpage and not at the 
</I>&gt;<i> browser level.  A web gallery may allow visitors to choose to scale 
</I>&gt;<i> versus crop images and to pan cropped image.
</I>
Actually panning and so on would presumably best be done using &lt;canvas&gt;. I 
don't think we need to be providing a declarative way to do this.



&gt;<i> Regarding bandwidth choices, is there are proposal that the image sizes 
</I>&gt;<i> in bytes could be declared in the HTML, or is there an expectation that 
</I>&gt;<i> the browser will query the server for the size of each image, or would 
</I>&gt;<i> web browser just use a heuristic to estimate the image byte size scaling 
</I>&gt;<i> based on the image dimensions?
</I>
For a discussion about bandwidth issues, please see:

   <A HREF="http://lists.w3.org/Archives/Public/public-whatwg-archive/2012May/0247.html">http://lists.w3.org/Archives/Public/public-whatwg-archive/2012May/0247.html</A> 


On Tue, 21 Aug 2012, John Mellor wrote:
&gt;<i>
</I>&gt;<i> CSS image-set and HTML img srcset are getting their first 
</I>&gt;<i> implementations but both APIs have serious shortcomings.
</I>
First versions of things always do. That's fine. :-)


&gt;<i> We should fix them before it's too late
</I>
It's rarely too late for us to add new features.


&gt;<i> 2. srcset not as smart/intuitive as image-set.
</I>&gt;<i> 
</I>&gt;<i> The syntax for HTML img srcset and CSS image-set is very similar, thus
</I>&gt;<i> developers will assume they behave the same. This would be great, except
</I>&gt;<i> that they actually behave rather differently. For example, compare:
</I>&gt;<i> 
</I>&gt;<i> &lt;img srcset=&quot;low.jpg 1x, high.jpg 2x&quot;&gt;
</I>&gt;<i> selector { background: image-set(&quot;low.jpg&quot; 1x, &quot;high.jpg&quot; 2x); }
</I>&gt;<i> 
</I>&gt;<i> Surely such a simple case must behave the same? But actually, if you 
</I>&gt;<i> view this on a device whose dppx is 1.1, the image-set will most likely 
</I>&gt;<i> load low.jpg, as it is the closest match for the display, while the 
</I>&gt;<i> srcset will load high.jpg, because the specified algorithm treats the 
</I>&gt;<i> dppx values as strict maximums.
</I>
This is incorrect. The HTML spec allows the user agent to pick what it 
will pretend the device density to be. Which it picks is up to the UA.


On Tue, 21 Aug 2012, Tab Atkins Jr. wrote:
&gt;<i>
</I>&gt;<i> Currently, the CSS image-set() function (sister spec to &lt;img srcset&gt;) is 
</I>&gt;<i> specified to do fallback to the less-desirable options if the first 
</I>&gt;<i> choice doesn't load or can't be decoded.  I specified it this way 
</I>&gt;<i> because it seemed reasonable, and it's how the similar image() function 
</I>&gt;<i> works (which is specifically designed to be used for fallback).
</I>&gt;<i> 
</I>&gt;<i> It was later pointed out to me, though, that @srcset doesn't do any 
</I>&gt;<i> fallback.  Once it chooses a candidate image, it sticks with it, and if 
</I>&gt;<i> that image is invalid, you just get a broken image.
</I>&gt;<i> 
</I>&gt;<i> I'd like to harmonize the two, and the CSSWG seems to prefer the 
</I>&gt;<i> fallback behavior.  Is there any interest in making @srcset do similar 
</I>&gt;<i> fallback?  If not, I'll change image-set() to also not do fallback.
</I>
In general, I think it's fine for them to differ here. CSS is opaque in 
that it does fallback silently, e.g. you can't easily tell which font it 
has picked, or which media query it has picked. HTML on the other hand is 
verbose in its announcement of events, and this will likely only grow 
(e.g. people have already asked for progress events in &lt;img&gt;), so as a 
rule we try to only do a single image at a time.

Having said that, technically srcset=&quot;&quot; allows the browser to restart its 
algorithm at any time, so a browser could do fallback if it wanted to.

So I would leave them as is.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079551.html">[whatwg] Canvas arcTo method
</A></li>
	<LI>Next message: <A HREF="079428.html">[whatwg] Features for responsive Web design
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37146">[ date ]</a>
              <a href="thread.html#37146">[ thread ]</a>
              <a href="subject.html#37146">[ subject ]</a>
              <a href="author.html#37146">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
