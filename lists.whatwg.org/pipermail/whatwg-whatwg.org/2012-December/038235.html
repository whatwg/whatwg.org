<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Loading and executing script as quickly as possible using multipart/mixed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Loading%20and%20executing%20script%20as%20quickly%20as%20possible%0A%20using%20multipart/mixed&In-Reply-To=%3CCANMdWTvvhDXPBC1BxSMuCuwCmu9O8_k492KvUL7JDkjKr5qhJA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038234.html">
   <LINK REL="Next"  HREF="038236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Loading and executing script as quickly as possible using multipart/mixed</H1>
<!--htdig_noindex-->
    <B>Ojan Vafai</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Loading%20and%20executing%20script%20as%20quickly%20as%20possible%0A%20using%20multipart/mixed&In-Reply-To=%3CCANMdWTvvhDXPBC1BxSMuCuwCmu9O8_k492KvUL7JDkjKr5qhJA%40mail.gmail.com%3E"
       TITLE="[whatwg] Loading and executing script as quickly as possible using multipart/mixed">ojan at chromium.org
       </A><BR>
    <I>Mon Dec  3 18:44:59 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038234.html">[whatwg] Loading and executing script as quickly as possible using multipart/mixed
</A></li>
        <LI>Next message: <A HREF="038236.html">[whatwg] Loading and executing script as quickly as possible	using multipart/mixed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38235">[ date ]</a>
              <a href="thread.html#38235">[ thread ]</a>
              <a href="subject.html#38235">[ subject ]</a>
              <a href="author.html#38235">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Dec 3, 2012 at 6:35 PM, Ojan Vafai &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ojan at chromium.org</A>&gt; wrote:

&gt;<i> On Mon, Dec 3, 2012 at 6:15 PM, Kyle Simpson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">getify at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Adam-
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; To load and execute a script as quickly as possible, the author would
</I>&gt;&gt;<i> &gt; use the following markup:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; &lt;script async src=&quot;path/to/script.js&quot;&gt;&lt;/script&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The HTTP server would then break script.js into chunks that are safe
</I>&gt;&gt;<i> &gt; to execute sequentially and provide each chunk as a separate MIME part
</I>&gt;&gt;<i> &gt; in a multipart/mixed response.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I like the spirit of this idea, but one concern I have is about the
</I>&gt;&gt;<i> script load and readystate events. It seems that authors will want to know
</I>&gt;&gt;<i> when each chunk has finished executing (in the same way they want to know
</I>&gt;&gt;<i> that scripts themselves finish).
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Why? What would you do in such an event?
</I>&gt;<i>
</I>
Someone pointed out a use-case to me: a progress bar showing how far along
the page load is. You could do this without an event by just putting the
appropriate bit in each chunk of the script, but you couldn't do this if
you use &quot;defer&quot; instead &quot;async&quot; (i.e. you want a progress bar, but you
don't want the script to execute).


&gt;<i>
</I>&gt;&gt;<i> There's a contingent on this list which thinks that all script authors
</I>&gt;&gt;<i> should change their code to never have &quot;side effects&quot; of execution, and
</I>&gt;&gt;<i> should all instead be executable by having some other logic invoke them
</I>&gt;&gt;<i> (aka &quot;module style&quot; coding). The reality is that a mixture of both types of
</I>&gt;&gt;<i> approaches will be available on the web for any foreseeable future (well
</I>&gt;&gt;<i> beyond the time when ES6 has provided first-class module support to all
</I>&gt;&gt;<i> in-use browsers, so probably nearly a decade from now I'd think). So
</I>&gt;&gt;<i> authors will likely want to be able to monitor when each chunk &quot;onload&quot;s.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One suggestion is to added a state to the readyState mechanism like
</I>&gt;&gt;<i> &quot;chunkReady&quot;, where the event fires and includes in its event object
</I>&gt;&gt;<i> properties the numeric index, the //@sourceURL, the separator identifier,
</I>&gt;&gt;<i> or otherwise some sort of identifier for which the author can tell which
</I>&gt;&gt;<i> chunk executed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --Kyle
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I></PRE>

































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038234.html">[whatwg] Loading and executing script as quickly as possible using multipart/mixed
</A></li>
	<LI>Next message: <A HREF="038236.html">[whatwg] Loading and executing script as quickly as possible	using multipart/mixed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38235">[ date ]</a>
              <a href="thread.html#38235">[ thread ]</a>
              <a href="subject.html#38235">[ subject ]</a>
              <a href="author.html#38235">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
