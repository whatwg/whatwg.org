<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fwd: fallback section taking over for 4xx and 5xx responses while online
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20fallback%20section%20taking%20over%20for%204xx%20and%205xx%0A%20responses%20while%20online&In-Reply-To=%3CCA%2BiXHYPOii4k2ygjAgp0ufmhXPdfg%3DsE_YygUiisEcm0nae2Yg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038373.html">
   <LINK REL="Next"  HREF="038432.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fwd: fallback section taking over for 4xx and 5xx responses while online</H1>
<!--htdig_noindex-->
    <B>David Barrett-Kahn</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fwd%3A%20fallback%20section%20taking%20over%20for%204xx%20and%205xx%0A%20responses%20while%20online&In-Reply-To=%3CCA%2BiXHYPOii4k2ygjAgp0ufmhXPdfg%3DsE_YygUiisEcm0nae2Yg%40mail.gmail.com%3E"
       TITLE="[whatwg] Fwd: fallback section taking over for 4xx and 5xx responses while online">dbk at google.com
       </A><BR>
    <I>Mon Dec 17 14:27:29 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="038373.html">[whatwg] Fwd: fallback section taking over for 4xx and 5xx responses while online
</A></li>
        <LI>Next message: <A HREF="038432.html">[whatwg] Fwd: fallback section taking over for 4xx and 5xx responses while online
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38376">[ date ]</a>
              <a href="thread.html#38376">[ thread ]</a>
              <a href="subject.html#38376">[ subject ]</a>
              <a href="author.html#38376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Generally speaking, this feature is useful where the error page is somewhat
routine and contains information comprehensible and actionable by the user,
which would otherwise be lost in the fallback.

This was mainly about 404s, which docs will serve when a requested document
id doesn't exist, which includes cases where it was deleted.  All our
offline application could say (once triggered) was that the document was
not present in our local storage.  It couldn't say the document didn't
actually exist.  We therefore wanted the server's version of the error page
to be displayed.  401/403 were also of interest, mainly for cases where the
user had previously had access to a document, but that access had been
rescinded.  Whether it's a good idea to divert 500s kind of depends on what
they are, especially whether the served error page contains user-actionable
information.

The current generation of docs offline attempts to only engage the
browser's offline machinery when truly offline.  For example, the regular
docs pages one interacts with when online do not bind appcaches.  We have a
fallback entry covering the entire origin which engages this machinery,
loading a 'controller' style application which decides how to handle
whatever URL was provided.  We have this strict separation for two reasons.
 First, we were very keen to ensure that instability in the new offline
technologies we were using never lead to disruption of the online solution,
especially during early development.  Second, the online start-up
procedures used by our applications are complex and highly optimized, and
fundamentally incompatible with appcache due to a 'blending' of the
document and the application.  We wanted to preserve those optimizations
online and have a different startup procedure when offline.

-Dave


On Mon, Dec 17, 2012 at 3:30 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i> On Tue, 11 Dec 2012, David Barrett-Kahn wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We ran into this same problem on Google Docs offline.  Our solution was
</I>&gt;<i> &gt; to add a proprietary response header to Chrome which instructs the
</I>&gt;<i> &gt; browser that the response is not to trigger the fallback entry, despite
</I>&gt;<i> &gt; its response code.  Something like it could be considered for
</I>&gt;<i> &gt; standardization. I know there are some people on the Chrome team looking
</I>&gt;<i> &gt; to advance some new appcache features, and that this use case is on
</I>&gt;<i> &gt; their list.
</I>&gt;<i>
</I>&gt;<i> Can you elaborate on the need for this feature? Why would you ever send
</I>&gt;<i> the user to a 404 page intentionally (i.e. when the server isn't broken)?
</I>&gt;<i> Similarly, why would you not consider the server returning 500 a good
</I>&gt;<i> indication that the cache should be used?
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;<i>
</I>


-- 
-Dave
</PRE>























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038373.html">[whatwg] Fwd: fallback section taking over for 4xx and 5xx responses while online
</A></li>
	<LI>Next message: <A HREF="038432.html">[whatwg] Fwd: fallback section taking over for 4xx and 5xx responses while online
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38376">[ date ]</a>
              <a href="thread.html#38376">[ thread ]</a>
              <a href="subject.html#38376">[ subject ]</a>
              <a href="author.html#38376">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
