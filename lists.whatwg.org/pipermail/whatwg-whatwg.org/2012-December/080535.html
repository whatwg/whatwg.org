<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] seamless iframes and event propagation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20seamless%20iframes%20and%20event%20propagation&In-Reply-To=%3CCADnb78hUVNDpEpxtb658XyeahVAsOx4iKLxiO1epW5W3MsDc0Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080534.html">
   <LINK REL="Next"  HREF="080536.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] seamless iframes and event propagation</H1>
<!--htdig_noindex-->
    <B>Anne van Kesteren</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20seamless%20iframes%20and%20event%20propagation&In-Reply-To=%3CCADnb78hUVNDpEpxtb658XyeahVAsOx4iKLxiO1epW5W3MsDc0Q%40mail.gmail.com%3E"
       TITLE="[whatwg] seamless iframes and event propagation">annevk at annevk.nl
       </A><BR>
    <I>Wed Dec  5 03:16:01 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="080534.html">[whatwg] seamless iframes and event propagation
</A></li>
        <LI>Next message: <A HREF="080536.html">[whatwg] seamless iframes and event propagation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80535">[ date ]</a>
              <a href="thread.html#80535">[ thread ]</a>
              <a href="subject.html#80535">[ subject ]</a>
              <a href="author.html#80535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Dec 5, 2012 at 11:54 AM, Hayato Ito &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hayato at chromium.org</A>&gt; wrote:
&gt;<i> Shadow DOM's event retargeting in WebKit uses one Event object for
</I>&gt;<i> every shadow trees.
</I>&gt;<i> When crossing shadow boundaries, an Event object's target (or
</I>&gt;<i> relatedTarget) is set to the appropriate one, but the event object
</I>&gt;<i> itself is reused.
</I>
Interesting. Does Shadow DOM have a concept of events that are private
to the shadow tree or does everything leak?

Also, if you change the target you need to adjust mouse coordinates
and such as well. How does that work? Does that also happens if I
dispatch a synthetic event using dispatchEvent()?

(Not having thought much about it this seems especially hairy for
elements from the ordinary node tree that interleaved via a &lt;content&gt;
element.)

But if Shadow DOM shares the Event object we should probably introduce
a flag (e.g. a reuse Event object flag) next to the cross-boundary
event parent pointer.


&gt;<i> There, I created an Event object per frame. You can see the design in
</I>&gt;<i> the ChangeLog of the patch. Please don't take it seriously. It should
</I>&gt;<i> be considered as just an experiment at this stage.
</I>&gt;<i> <A HREF="https://bugs.webkit.org/attachment.cgi?id=168866&amp;action=review">https://bugs.webkit.org/attachment.cgi?id=168866&amp;action=review</A>
</I>
The design Ian and I thought out is the same as far as calculating the
dispatch tree goes and the same as far as what the result would be of
invoking preventDefault() and such.

What seems different is that Ian and I envisioned this to work for all
events. And what seems unclear is what if anything is different
between the clones of the Event object.


-- 
<A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080534.html">[whatwg] seamless iframes and event propagation
</A></li>
	<LI>Next message: <A HREF="080536.html">[whatwg] seamless iframes and event propagation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80535">[ date ]</a>
              <a href="thread.html#80535">[ thread ]</a>
              <a href="subject.html#80535">[ subject ]</a>
              <a href="author.html#80535">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
