<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] document.readyState and its initial value
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20document.readyState%20and%20its%20initial%20value&In-Reply-To=%3C0BB335FEAE6A4F35B9C6CA209D2E7795%40POCZTOWIEC%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="057463.html">
   <LINK REL="Next"  HREF="057472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] document.readyState and its initial value</H1>
<!--htdig_noindex-->
    <B>Kristof Zelechovski</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20document.readyState%20and%20its%20initial%20value&In-Reply-To=%3C0BB335FEAE6A4F35B9C6CA209D2E7795%40POCZTOWIEC%3E"
       TITLE="[whatwg] document.readyState and its initial value">giecrilj at stegny.2a.pl
       </A><BR>
    <I>Mon Jun 23 00:49:24 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="057463.html">[whatwg] document.readyState and its initial value
</A></li>
        <LI>Next message: <A HREF="057472.html">[whatwg] Canvas tests updated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57465">[ date ]</a>
              <a href="thread.html#57465">[ thread ]</a>
              <a href="subject.html#57465">[ subject ]</a>
              <a href="author.html#57465">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Editorial remarks: 
1. 
The links to current document readiness are reflexive and should be removed.
2. 
The page loading process mentioned should be linked to the relevant section.

It would be convenient for the reader 
and 
it 
would also provide 
a visual indication 
that it is a reference to a locally defined technical term.
Chris

-----Original Message-----
From: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A>
[mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg-bounces at lists.whatwg.org</A>] On Behalf Of Dan Fabulich
Sent: Monday, June 23, 2008 12:56 AM
To: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at whatwg.org</A>
Subject: [whatwg] document.readyState and its initial value


document.readyState was added to HTML5 in April of this year.
<A HREF="http://lists.whatwg.org/pipermail/commit-watchers-whatwg.org/2008/000652.htm">http://lists.whatwg.org/pipermail/commit-watchers-whatwg.org/2008/000652.htm</A>
l

<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#current">http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#current</A>
&gt;<i> Each document has a current document readiness. When a Document object 
</I>&gt;<i> is created, it must have its current document readiness set to the 
</I>&gt;<i> string &quot;loading&quot;. Various algorithms during page loading affect this 
</I>&gt;<i> value. When the value is set, the user agent must fire a simple event 
</I>&gt;<i> called readystatechanged at the Document object.
</I>
As far as I can tell via google, there has been no discussion of this 
property on lists.whatwg.org, so I'd like to suggest a small enhancement 
to the spec.

HTML5 says that the current document readiness should be &quot;loading&quot; when 
the document is created; instead the initial state should be 
&quot;uninitialized&quot;.

document.readyState was initially defined by Microsoft as a proprietary 
extension to DOM.  Here's their MSDN documentation of document.readyState:

<A HREF="http://msdn.microsoft.com/en-us/library/ms534359(VS.85">http://msdn.microsoft.com/en-us/library/ms534359(VS.85</A>).aspx
&gt;<i> An object's state is initially set to uninitialized, and then to
</I>&gt;<i> loading. When data loading is complete, the state of the link object
</I>&gt;<i> passes through the loaded and interactive states to reach the complete
</I>&gt;<i> state.
</I>
I believe HTML5 should change to agree with Microsoft on this point. 
Safari and Opera have implemented document.readyState to agree with 
Microsoft and I don't think it's appropriate for HTML5 to break new ground 
here.  This matters to me because I'm trying to fix Firefox to support 
this property, and we need to know what the initial state should be.

The point is small and not very important because it's almost impossible 
to encounter an HTML document in Internet Explorer in the &quot;uninitialized&quot; 
state.  But I think the fix is small and uncontroversial:

Index: source
===================================================================
--- source      (revision 1790)
+++ source      (working copy)
@@ -4613,7 +4613,7 @@
    &lt;p&gt;Each document has a &lt;dfn&gt;current document readiness&lt;/dfn&gt;. When a
    &lt;code&gt;Document&lt;/code&gt; object is created, it must have its
    &lt;span&gt;current document readiness&lt;/span&gt; set to the string
-  &quot;loading&quot;. Various algorithms during page loading affect this
+  &quot;uninitialized&quot;. Various algorithms during page loading affect this
    value. When the value is set, the user agent must &lt;span&gt;fire a
    simple event&lt;/span&gt; called &lt;code
    title=&quot;event-readystatechanged&quot;&gt;readystatechanged&lt;/code&gt; at the


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="057463.html">[whatwg] document.readyState and its initial value
</A></li>
	<LI>Next message: <A HREF="057472.html">[whatwg] Canvas tests updated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57465">[ date ]</a>
              <a href="thread.html#57465">[ thread ]</a>
              <a href="subject.html#57465">[ subject ]</a>
              <a href="author.html#57465">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
