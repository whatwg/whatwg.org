<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] several messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20several%20messages&In-Reply-To=%3CPine.LNX.4.62.0806052348380.8559%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015203.html">
   <LINK REL="Next"  HREF="014991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] several messages</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20several%20messages&In-Reply-To=%3CPine.LNX.4.62.0806052348380.8559%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] several messages">ian at hixie.ch
       </A><BR>
    <I>Thu Jun  5 17:11:45 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="015203.html">[whatwg] usemap=&quot;&quot; and related issues
</A></li>
        <LI>Next message: <A HREF="014991.html">[whatwg] several messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14989">[ date ]</a>
              <a href="thread.html#14989">[ thread ]</a>
              <a href="subject.html#14989">[ subject ]</a>
              <a href="author.html#14989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 17 Jul 2005, Dean Edwards wrote:
&gt;<i>
</I>&gt;<i> Anne van Kesteren wrote:
</I>&gt;<i> &gt; Shouldn't the print method on the window DOM interface be defined as well?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Example: &lt;button onclick=window.print()&gt;print&lt;/button&gt;
</I>&gt;<i> 
</I>&gt;<i> IE has some nice onbeforeprint/onafterprint events. Can we add these 
</I>&gt;<i> too?
</I>
Defined both.


On Mon, 18 Jul 2005, Olav Junker Kj&#230;r wrote:
&gt;<i> 
</I>&gt;<i> Arent these event mostly used to transform the view before printing it? 
</I>&gt;<i> I think this is better handled by a print-specific style-sheet today.
</I>
There are some things for which CSS just doesn't work, sadly.


On Tue, 19 Jul 2005, Greg Kilwein wrote:
&gt;<i> &gt; DG wrote: 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; a) my invoice format requires a timestamp that says something like 
</I>&gt;<i> &gt; this: printed by [person] on [timestamp].
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; b) To capture the essence of the browsing session, I would like to 
</I>&gt;<i> &gt; build a breadcrumb at the bottom of the printed page, displaying 
</I>&gt;<i> &gt; titles and urls of pages the user have visited on the site during this 
</I>&gt;<i> &gt; visit.
</I>
This is now possible.


&gt;<i> I'll add another case: the onafterprint event could be used in a 
</I>&gt;<i> &quot;wizard&quot;-style application where printing some document is step 3 of 10, 
</I>&gt;<i> for example.  The application could proceed to the next step (not 
</I>&gt;<i> necessarily a different document) automatically without requiring a 
</I>&gt;<i> button that says &quot;click here when done printing&quot;.  That's a case that a 
</I>&gt;<i> media-specific stylesheet cannot handle.  Automating tasks and reducing 
</I>&gt;<i> clicks are both high priorities in my development of web applications.
</I>
Good use case!


&gt;<i> If the ability to set printer settings such as portrait/landscape is 
</I>&gt;<i> available, an &quot;onbeforeprint&quot; event could be used to prompt the user 
</I>&gt;<i> whether they'd like to automatically switch their paper orientation to 
</I>&gt;<i> portrait or landscape before printing.  (The same can be said for 
</I>&gt;<i> margins and headers/footers.)  This can be done in the print dialog, but 
</I>&gt;<i> if it is truly important to how the page prints, a separate step that 
</I>&gt;<i> highlights the importance of the print setting to the user would be 
</I>&gt;<i> helpful in reducing calls to my company's tech support line.
</I>
As specified, you could indeed use showModalDialog() for this.


[snip other use cases]

On Wed, 20 Jul 2005, Matthew Raymond wrote:
&gt;<i> 
</I>&gt;<i>    Once again, I don't understand why you can't simply provide the user 
</I>&gt;<i> with a button on the web page that either calls up a printable version 
</I>&gt;<i> or clones the document so that the clone can be used for printing. 
</I>&gt;<i> (Granted, there probably isn't support for the latter, but it makes more 
</I>&gt;<i> sense to standardize that than to add onbeforeprint and onafterprint, 
</I>&gt;<i> especially when you consider the fact that a clone of the document can 
</I>&gt;<i> be held in memory for repeated printing or dumped.)
</I>
I don't see why we shouldn't have both; after all, people are using 
onbeforeprint today, and it doesn't seem to have caused a disaster or 
anything.


&gt;<i>    As far as I can tell, no part of WF2 or WA1 encourages malicious 
</I>&gt;<i> behavior on the part of the webmaster against the users. In fact, part 
</I>&gt;<i> of the problem I had with &lt;dataentry&gt; was that it could, in theory, be 
</I>&gt;<i> use in a hostile way towards legacy user agents. Therefore, I doubt this 
</I>&gt;<i> will ever make it into a WHATWG spec, especially when it can interfere 
</I>&gt;<i> with simple things like printing selected text, et cetera.
</I>
This hasn't happened much, but certainly a user agent could disable 
scripts while it is printing.


&gt;<i>    Now you've completely lost me, use-case-wise. On an intranet, why is 
</I>&gt;<i> a printable version of the document not an acceptable workaround?
</I>
Well it's not as nice, is it. I mean, it's not the same experience really. 
Look at printing in Google Maps, for instance, where it brings up another 
page -- it's not as seamless as just printing the current page.


&gt;<i>    Here's a question for you to chew on: What happens if you want to 
</I>&gt;<i> print and the webmaster screwed up something in the onbeforeprint or 
</I>&gt;<i> onafterprint event? Will it effectively disable printing? Will the 
</I>&gt;<i> document be restored once printing is finished? What if it's an AJAX 
</I>&gt;<i> application and the UI of the app is hidden for printing but never 
</I>&gt;<i> restored?
</I>
This can all happen without printing too.


On Wed, 20 Jul 2005, Matthew Raymond wrote:
&gt;<i> 
</I>&gt;<i>    I think there's good enough reason to disallow a feature when you 
</I>&gt;<i> have the following:
</I>&gt;<i> 
</I>&gt;<i> 1) The feature can be abused.
</I>&gt;<i> 
</I>&gt;<i> 2) It alters the standard behavior of the browser.
</I>&gt;<i> 
</I>&gt;<i> 3) It can be easily disabled with a modified open source browser or 
</I>&gt;<i> browser extension.
</I>
...or the browser can just allow it to be overriden. Point 3 basically 
counteracts the first two, imho.


&gt;<i> 4) Its use cases are partially covered by CSS.
</I>
CSS is just as susceptible to 1 and 2, why isn't that a problem?


&gt;<i> 5) There are existing workarounds.
</I>
Workarounds are just that. Not solutions.


&gt;<i> 6) An alternative has been proposed that has less potential for abuse, 
</I>&gt;<i> is more powerful, and doesn't change basic browser functionality.
</I>
I don't see how it has less potential for abuse, really. I also am not 
sure it's really more powerful.


On Wed, 20 Jul 2005, Matthew Raymond wrote:
&gt;<i> 
</I>&gt;<i> Since CSS is not required for HTML compliance, let's look at how a 
</I>&gt;<i> non-CSS browser would be effected by onbeforeprint/onafterprint. Without 
</I>&gt;<i> these events, the printout of the page would always match what you have 
</I>&gt;<i> on screen (barring the user agent deliberately making it look 
</I>&gt;<i> different).
</I>
JS is also optional, so this is equivalent.


&gt;<i> Therefore, while using this browser, if I see something that says the 
</I>&gt;<i> following...
</I>&gt;<i>
</I>&gt;<i> | Matthew is a great guy.
</I>&gt;<i> 
</I>&gt;<i> ...and I print it, I would expect the printer to print out this:
</I>&gt;<i> 
</I>&gt;<i> | Matthew is a great guy.
</I>&gt;<i> 
</I>&gt;<i>    By contrast, I would not expect the printer to give me the following:
</I>&gt;<i> 
</I>&gt;<i> | Matthew is a complete luzor!!!
</I>&gt;<i> 
</I>&gt;<i>    That's what these events enable, and that's a fundamental alteration 
</I>&gt;<i> of the expected behavior of a user agent's printing function.
</I>
CSS and JS both allow this. Both are optional.


&gt;<i>    So it's useless for keeping people from printing stuff without paying 
</I>&gt;<i> if the people in question really want to print something.
</I>
We're not trying to address that use case.


On Wed, 20 Jul 2005, James Graham wrote:
&gt;<i>
</I>&gt;<i> Just to muddy the waters a bit - it is quite likely that Gecko 1.9 will allow
</I>&gt;<i> pages to be 'exported' to a variety of formats (in a manner analogous to
</I>&gt;<i> <A HREF="http://gecko.dynalivery.com/">http://gecko.dynalivery.com/</A> ). Clearly I have no idea what the UI for this
</I>&gt;<i> functionality will be but lets pretend that it's not through the standard
</I>&gt;<i> print dialog (this isn't strictly important). Should any function that
</I>&gt;<i> transforms html -&gt; non-html fire hypothetical onprint events?
</I>
As defined, no, it's just for getting a physical form or a representation 
of a physical form. What that means is someone a judgement call for the UA 
implementor, I guess.


On Wed, 20 Jul 2005, Dean Edwards wrote:
&gt;<i> 
</I>&gt;<i> The big problem for me on this whole onbeforeprint/onafterprint argument 
</I>&gt;<i> is that I only have partial control of the DOM using JavaScript.
</I>&gt;<i> 
</I>&gt;<i> What do I mean by this?
</I>&gt;<i> 
</I>&gt;<i> I can create content using the window's load event:
</I>&gt;<i> 
</I>&gt;<i> onload = function() {
</I>&gt;<i>  // create content for screen
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> This content, which is not suitable for print, needs to be removed when 
</I>&gt;<i> the document is printed. I can even invoke the print method myself:
</I>&gt;<i> 
</I>&gt;<i> window.print();
</I>&gt;<i> 
</I>&gt;<i> I'm told I must use another language to remove the content. CSS you say. 
</I>&gt;<i> Doesn't that seem wrong? Why can't I do it with script? I created the 
</I>&gt;<i> content with script. Why can't I remove it the same way?
</I>
Both are now possible.


On Wed, 20 Jul 2005, Matthew Raymond wrote:
&gt;<i> 
</I>&gt;<i>    The one I've been pushing for the last few days: allow scripting to 
</I>&gt;<i> create a copy of the document, manipulate the copy, and print from the 
</I>&gt;<i> copy. That way, the app will just have a button that says &quot;Print High 
</I>&gt;<i> Quality Version&quot; or something, and a script clones the document, makes 
</I>&gt;<i> the appropriate changes, and prints it. When you press the button again 
</I>&gt;<i> (because you forgot you wanted two copies), the script can detect that 
</I>&gt;<i> no changes have been made and simply use the last cloned document 
</I>&gt;<i> object:
</I>&gt;<i> 
</I>&gt;<i> | if (documentchanged) {
</I>&gt;<i> |   printClone = document.clone();
</I>&gt;<i> |   prepareForPrinting(printClone);
</I>&gt;<i> | }
</I>&gt;<i> |
</I>&gt;<i> | printClone.print();
</I>&gt;<i> 
</I>&gt;<i>    Hmm, that prints from the document object instead of the window, 
</I>&gt;<i> though. Is there a better way to implement this?
</I>&gt;<i> 
</I>&gt;<i>    The general idea, though, is that when I print a web page, I want to 
</I>&gt;<i> print a web page, not some altered version of the web page a webmaster 
</I>&gt;<i> sees fit to allow me to print. Specific print version should be handled 
</I>&gt;<i> by UI in the page itself. (Or perhaps with a &lt;link&gt; element.)
</I>
You can basically do this, just print an iframe or some such. The events 
don't preclude doing this.


On Wed, 20 Jul 2005, Dean Edwards wrote:
&gt;<i> 
</I>&gt;<i> I quite like the idea of a DOMModified event. Does this exist? Can we 
</I>&gt;<i> have it please?
</I>
Mutation events are out of scope for HTML5, but do handle this kind of 
thing. They need work, though.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015203.html">[whatwg] usemap=&quot;&quot; and related issues
</A></li>
	<LI>Next message: <A HREF="014991.html">[whatwg] several messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14989">[ date ]</a>
              <a href="thread.html#14989">[ thread ]</a>
              <a href="subject.html#14989">[ subject ]</a>
              <a href="author.html#14989">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
