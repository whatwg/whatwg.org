<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] API to delay the document load event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20to%20delay%20the%20document%20load%20event&In-Reply-To=%3CCAOp6jLbA4okWbRnyrM1aj8ok1isCTD8sq9HeaxTWrk2%2B5_b%3DRQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039419.html">
   <LINK REL="Next"  HREF="081696.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] API to delay the document load event</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20to%20delay%20the%20document%20load%20event&In-Reply-To=%3CCAOp6jLbA4okWbRnyrM1aj8ok1isCTD8sq9HeaxTWrk2%2B5_b%3DRQ%40mail.gmail.com%3E"
       TITLE="[whatwg] API to delay the document load event">robert at ocallahan.org
       </A><BR>
    <I>Wed Apr 24 04:51:08 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="039419.html">[whatwg] [html5] r7850 - [giow] (2) Add bitcoin: to the URL scheme whitelist, by request. It's more or le [...]
</A></li>
        <LI>Next message: <A HREF="081696.html">[whatwg] API to delay the document load event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39422">[ date ]</a>
              <a href="thread.html#39422">[ thread ]</a>
              <a href="subject.html#39422">[ subject ]</a>
              <a href="author.html#39422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Context: <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=863499">https://bugzilla.mozilla.org/show_bug.cgi?id=863499</A>

Use-cases:
1) User-agents provide thumbnails of Web pages (e.g. desktop Firefox,
FirefoxOS and Safari do this). We want to avoid taking a thumbnail while
the application is incompletely loaded. The firing of the document load
event is not currently a reliable indicator since the application might
have ongoing load activities (e.g. IndexedDB transactions, Websocket
activity) that do not block the document load event.
2) User-agent has UI to distinguish pages that are in the process of
loading from pages that are fully loaded. As in use-case #1, relying on the
document load event as currently defined to transition the UI to the &quot;fully
loaded&quot; state may be inaccurate.

Proposal:
Give Web applications APIs to explicitly delay the document load event. In
particular, add a method &quot;document.delayLoadEvent()&quot; that causes the
document load event to be delayed until a corresponding
&quot;document.stopDelayingLoadEvent()&quot; method is called. Allow these to nest so
that the document load event is delayed until at least as many calls to
stopDelayingLoadEvent() have been made as there were calls to
delayLoadEvent().

Alternatives:
Applications can fake this already by triggering an invisible subresource
load of a URI that never returns any data and never ends, and cancelling
the load when they want to stop delaying the load event. That seems fragile
and ugly.

Rob
-- 
q&#8220;qIqfq qyqoquq qlqoqvqeq qtqhqoqsqeq qwqhqoq qlqoqvqeq qyqoquq,q qwqhqaqtq
qcqrqeqdqiqtq qiqsq qtqhqaqtq qtqoq qyqoquq?q qEqvqeqnq qsqiqnqnqeqrqsq
qlqoqvqeq qtqhqoqsqeq qwqhqoq qlqoqvqeq qtqhqeqmq.q qAqnqdq qiqfq qyqoquq
qdqoq qgqoqoqdq qtqoq qtqhqoqsqeq qwqhqoq qaqrqeq qgqoqoqdq qtqoq qyqoquq,q
qwqhqaqtq qcqrqeqdqiqtq qiqsq qtqhqaqtq qtqoq qyqoquq?q qEqvqeqnq
qsqiqnqnqeqrqsq qdqoq qtqhqaqtq.q&quot;
</PRE>





<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039419.html">[whatwg] [html5] r7850 - [giow] (2) Add bitcoin: to the URL scheme whitelist, by request. It's more or le [...]
</A></li>
	<LI>Next message: <A HREF="081696.html">[whatwg] API to delay the document load event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39422">[ date ]</a>
              <a href="thread.html#39422">[ thread ]</a>
              <a href="subject.html#39422">[ subject ]</a>
              <a href="author.html#39422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
