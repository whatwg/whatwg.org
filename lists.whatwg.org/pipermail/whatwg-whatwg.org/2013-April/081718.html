<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] API to delay the document load event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20to%20delay%20the%20document%20load%20event&In-Reply-To=%3CCABirCh8usvU_uUXJ4oT5gFAvhLJHPeE%3D-muNbS4QSgxxfWtHnA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081716.html">
   <LINK REL="Next"  HREF="081720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] API to delay the document load event</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20to%20delay%20the%20document%20load%20event&In-Reply-To=%3CCABirCh8usvU_uUXJ4oT5gFAvhLJHPeE%3D-muNbS4QSgxxfWtHnA%40mail.gmail.com%3E"
       TITLE="[whatwg] API to delay the document load event">glenn at zewt.org
       </A><BR>
    <I>Sun Apr 28 14:08:53 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081716.html">[whatwg] API to delay the document load event
</A></li>
        <LI>Next message: <A HREF="081720.html">[whatwg] API to delay the document load event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81718">[ date ]</a>
              <a href="thread.html#81718">[ thread ]</a>
              <a href="subject.html#81718">[ subject ]</a>
              <a href="author.html#81718">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, Apr 28, 2013 at 1:00 PM, David Bruant &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruant.d at gmail.com</A>&gt; wrote:

&gt;<i> Each widget needs some way to express that it's ready, but doesn't
</I>&gt;<i> necessarily need to express it to the document directly. A &quot;widget manager&quot;
</I>&gt;<i> can load the widgets, gather all widgets &quot;ready&quot; events and trigger the UA
</I>&gt;<i> &quot;AppReady&quot; event when the widgets are ready.
</I>&gt;<i>
</I>
You shouldn't have to roll your own API to do this, because then you end up
only being able to use code that uses the same solution as everything else
(or gives a hook, which is a needless complication).  Give everyone a
consistent solution to begin with, and you avoid that problem.

I don't think we should be promoted patterns where widget are fully
&gt;<i> independent which is pretty much the equivalent of a script injection
</I>&gt;<i> (where anything can happen, like one forgetting to call its
</I>&gt;<i> delay.finished()).
</I>&gt;<i>
</I>
I think you're confusing widgets (more generally, code libraries) with
sourcing code from untrusted sites.  Obviously nobody should do that, but
it has nothing to do with this.

I believe one event to trigger will be hard enough in complex applications,
&gt;<i> let's not allow more opportunities to mess it up by distributing to
</I>&gt;<i> independent actors the authority to trigger one event to the UA.
</I>&gt;<i>
</I>
With the approach I suggested, the users of the API would not be able to
trigger the event.  They would only be able to delay it.

JS implementation: <A HREF="https://zewt.org/~glenn/finished-loading.html">https://zewt.org/~glenn/finished-loading.html</A>

On Sun, Apr 28, 2013 at 1:21 PM, David Bruant &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bruant.d at gmail.com</A>&gt; wrote:

&gt;<i>  In the Firefox bug, roc suggested [1]:
</I>&gt;<i> &quot;let the app specify &lt;html loading&gt;, and remove the attribute when done.
</I>&gt;<i> (...) use a mutation listener to detect its removal.&quot;
</I>&gt;<i> This is delightful; my new favorite idea on the topic. We don't need
</I>&gt;<i> anything more.
</I>&gt;<i>
</I>
As soon as two bits of code try to use this, each unaware of the other,
chaos will ensue as they stomp on the attribute set by the other.  This is
more or less a global variable.

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081716.html">[whatwg] API to delay the document load event
</A></li>
	<LI>Next message: <A HREF="081720.html">[whatwg] API to delay the document load event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81718">[ date ]</a>
              <a href="thread.html#81718">[ thread ]</a>
              <a href="subject.html#81718">[ subject ]</a>
              <a href="author.html#81718">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
