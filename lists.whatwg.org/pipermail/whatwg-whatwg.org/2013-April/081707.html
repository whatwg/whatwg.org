<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] API to delay the document load event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20to%20delay%20the%20document%20load%20event&In-Reply-To=%3Cf4hjn857nioda9j2gmananhhpc3rm48t11%40hive.bjoern.hoehrmann.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081696.html">
   <LINK REL="Next"  HREF="081708.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] API to delay the document load event</H1>
<!--htdig_noindex-->
    <B>Bjoern Hoehrmann</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20to%20delay%20the%20document%20load%20event&In-Reply-To=%3Cf4hjn857nioda9j2gmananhhpc3rm48t11%40hive.bjoern.hoehrmann.de%3E"
       TITLE="[whatwg] API to delay the document load event">derhoermi at gmx.net
       </A><BR>
    <I>Thu Apr 25 17:15:04 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081696.html">[whatwg] API to delay the document load event
</A></li>
        <LI>Next message: <A HREF="081708.html">[whatwg] API to delay the document load event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81707">[ date ]</a>
              <a href="thread.html#81707">[ thread ]</a>
              <a href="subject.html#81707">[ subject ]</a>
              <a href="author.html#81707">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>* Glenn Maynard wrote:
&gt;<i>This seems a bit heavy-handed.  For these use cases, it doesn't seem like
</I>&gt;<i>you need to delay the whole onload event, which would have tons of
</I>&gt;<i>side-effects on the page.  You could just tell the browser that you're
</I>&gt;<i>still doing things, without it having other script-visible effects.
</I>&gt;<i>
</I>&gt;<i>The particular API above makes it easy for calls to be mismatched in subtle
</I>&gt;<i>ways, which would be hard to debug. I'd recommend doing this with an
</I>&gt;<i>interface:
</I>&gt;<i>
</I>&gt;<i>delay = document.delayCompletion();
</I>&gt;<i>...
</I>&gt;<i>delay.finished();
</I>&gt;<i>
</I>&gt;<i>That way, you can simply call finished() anywhere your process can finish,
</I>&gt;<i>without having to worry about calling it too many times.
</I>
This seems to be based on the assumption that all relevant code works on
the `delay` variable, without addressing the case of calling the method
`delayCompletion(...)` multiple times.

&gt;<i>Both of these APIs are effectively manual resource collection, though,
</I>&gt;<i>which makes me nervous.  It's not something the platform is designed for
</I>&gt;<i>(hence all the difficulty with blob URLs).  Something like
</I>&gt;<i>document.delayUntil(indexedDbTransaction) would be nicer...
</I>
That also does address calling `delayUntil(...)` multiple times. And in
both cases, if multiple calls to either method have to be matched up,
you end up with the same problem that those multiple calls are hard to
match up. In the case of my IECapt and CutyCapt utilities, there is no
way to wait &quot;a long time&quot; to take a snapshot, so any such method would
time out, and quickly. Also note that this does not address the most
common cases, like isolated &quot;widgets&quot; that are transcluded, where even
the main code running on a page has trouble coordinating all the loads
of the resources it depends on. When is a Flash &lt;object&gt; ready to be
snapshotted, for instance?
-- 
Bj&#246;rn H&#246;hrmann &#183; mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bjoern at hoehrmann.de</A> &#183; <A HREF="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</A>
Am Badedeich 7 &#183; Telefon: +49(0)160/4415681 &#183; <A HREF="http://www.bjoernsworld.de">http://www.bjoernsworld.de</A>
25899 Dageb&#252;ll &#183; PGP Pub. KeyID: 0xA4357E78 &#183; <A HREF="http://www.websitedev.de/">http://www.websitedev.de/</A> 

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081696.html">[whatwg] API to delay the document load event
</A></li>
	<LI>Next message: <A HREF="081708.html">[whatwg] API to delay the document load event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81707">[ date ]</a>
              <a href="thread.html#81707">[ thread ]</a>
              <a href="subject.html#81707">[ subject ]</a>
              <a href="author.html#81707">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
