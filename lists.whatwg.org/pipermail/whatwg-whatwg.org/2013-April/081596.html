<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Enabling LCD Text and antialiasing in canvas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Enabling%20LCD%20Text%20and%20antialiasing%20in%20canvas&In-Reply-To=%3CCAGN7qDDNkv_h8tAYk4nBoro6f8sHcTbM12X7TftBU8UjaZxsgg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081594.html">
   <LINK REL="Next"  HREF="081597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Enabling LCD Text and antialiasing in canvas</H1>
<!--htdig_noindex-->
    <B>Rik Cabanier</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Enabling%20LCD%20Text%20and%20antialiasing%20in%20canvas&In-Reply-To=%3CCAGN7qDDNkv_h8tAYk4nBoro6f8sHcTbM12X7TftBU8UjaZxsgg%40mail.gmail.com%3E"
       TITLE="[whatwg] Enabling LCD Text and antialiasing in canvas">cabanier at gmail.com
       </A><BR>
    <I>Wed Apr  3 18:08:45 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081594.html">[whatwg] Enabling LCD Text and antialiasing in canvas
</A></li>
        <LI>Next message: <A HREF="081597.html">[whatwg] Enabling LCD Text and antialiasing in canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81596">[ date ]</a>
              <a href="thread.html#81596">[ thread ]</a>
              <a href="subject.html#81596">[ subject ]</a>
              <a href="author.html#81596">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Apr 3, 2013 at 5:21 PM, Gregg Tavares &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gman at google.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Apr 3, 2013 at 5:09 PM, James Robinson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jamesr at google.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Fonts are not vector art
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> O RLY?   So you're saying the following 250pt ampersand is stored as a
</I>&gt;<i> bitmap in the font file?
</I>&gt;<i>
</I>&gt;<i>  &amp;
</I>&gt;<i>
</I>&gt;<i>
</I>It's not simply stored as a path that you then scale. In some fonts it
might be in a completely different format than a path (or it could even be
a bitmap)


&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>  and are not rendered as paths at commonly read sizes.  I don't think
</I>&gt;&gt;<i> anyone is using or would be tempted to use LCD subpixel AA for anything
</I>&gt;&gt;<i> other than text.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think google docs, as one example, would be happy to have graphs in
</I>&gt;<i> spreadsheets and drawings looks a beautiful as possible.
</I>&gt;<i>
</I>&gt;<i> Why do you think the AA hint should be overly specific? I don't see the
</I>&gt;<i> downside.
</I>&gt;<i>
</I>
Fonts render different from paths. If your UA doesn't do that, you are
doing it wrong. :-)
Line art looks different to the human eye than a line of text. Imagina a
vertical and a horizontal line rendered with sub-pixel AA; they will look
very different.

Text also has the nice property that it's filled with a solid color. If you
do subpixel AA on a gradient, the edge will change position   which is very
wrong.


&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Wed, Apr 3, 2013 at 5:07 PM, Gregg Tavares &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gman at google.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Wed, Apr 3, 2013 at 5:04 PM, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; On Wed, Apr 3, 2013 at 9:04 AM, Gregg Tavares &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gman at google.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; On Wed, Apr 3, 2013 at 8:41 AM, Stephen White &lt;
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">senorblanco at chromium.org</A>
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;wrote:
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; Would Mozilla (or other browser vendors) be interested in
</I>&gt;&gt;&gt;<i> implementing
</I>&gt;&gt;&gt;<i> &gt;&gt; the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; hint as Gregg described above?
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; If so, we could break out the LCD text issue from canvas opacity,
</I>&gt;&gt;&gt;<i> and
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; consider the latter on its own merits, since it has benefits apart
</I>&gt;&gt;&gt;<i> from
</I>&gt;&gt;&gt;<i> &gt;&gt; LCD
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; text (i.e., performance). Regarding that, if I'm reading correctly,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; Vladimir Vukicevic has expressed support on webkit-dev for the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; ctx.getContext('2d', { alpha: false }) proposal (basically, a
</I>&gt;&gt;&gt;<i> syntactic
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; rewrite of &lt;canvas opaque&gt;). Does this indeed have traction with
</I>&gt;&gt;&gt;<i> other
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; browser vendors?
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; As for naming, I would prefer that it be something like
</I>&gt;&gt;&gt;<i> &gt;&gt; ctx.fontSmoothing
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; or ctx.fontSmoothingHint, to align more closely with canvas's
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; ctx.imageSmoothingEnabled and webkit's -webkit-font-smoothing CSS
</I>&gt;&gt;&gt;<i> &gt;&gt; property.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;  -webkit-font-smoothing has &quot;none&quot;, &quot;antialiased&quot; and
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; &quot;subpixel-antialiased&quot; as options. I think it's ok to explicitly
</I>&gt;&gt;&gt;<i> call
</I>&gt;&gt;&gt;<i> &gt;&gt; out
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; subpixel antialiasing, even if the platform (or UA) does not
</I>&gt;&gt;&gt;<i> support it,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; especially if the attribute explicitly describes itself as a hint.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Why call it &quot;Font&quot; smoothing? Shouldn't a UA be able to also render
</I>&gt;&gt;&gt;<i> paths
</I>&gt;&gt;&gt;<i> &gt;&gt; using the same hint?
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; I have not heard of anyone using sub-pixel antialiasing for vector
</I>&gt;&gt;&gt;<i> art. It
</I>&gt;&gt;&gt;<i> &gt; might look weird...
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ??? Fonts are vector art.  Why should this flag be specific to fonts?
</I>&gt;&gt;&gt;<i>  So I
</I>&gt;&gt;&gt;<i> decide tomorrow that I want vector art to be prettier than the
</I>&gt;&gt;&gt;<i> competition
</I>&gt;&gt;&gt;<i> in by implementing LCD anti-aliasing I'll have to lobby for a new flag to
</I>&gt;&gt;&gt;<i> turn it on? Why?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; Stephen
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; On Sun, Mar 17, 2013 at 11:17 PM, Gregg Tavares &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gman at google.com</A>&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; wrote:
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; On Sun, Mar 17, 2013 at 1:40 PM, Robert O'Callahan &lt;
</I>&gt;&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;wrote:
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; On Sat, Mar 16, 2013 at 5:52 PM, Gregg Tavares &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gman at google.com</A>&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; wrote:
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Let me ask again in a different way ;-)  Specifically about LCD
</I>&gt;&gt;&gt;<i> &gt;&gt; style
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; antialiasing.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; What about a context attribute &quot;antialiasRenderingQualityHint&quot;
</I>&gt;&gt;&gt;<i> for
</I>&gt;&gt;&gt;<i> &gt;&gt; now
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; with
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; 2 settings &quot;default&quot; and &quot;displayDependent&quot;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt;    context.antialiasRenderingQualityHint = &quot;displayDependent&quot;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; How would this interact with canvas opacity? E.g. if the author
</I>&gt;&gt;&gt;<i> uses
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; displayDependent and then draws text over transparent pixels in
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; canvas,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; what is the UA supposed to do?
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; Whatever the UA wants. It's a hint. From my POV, since the spec
</I>&gt;&gt;&gt;<i> doesn't
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; say
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; anything about anti-aliasing then it really doesn't matter.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; My preference, if I was programming a UA, would be if the user sets
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &quot;displayDependent&quot; and the UA is running on a lo-dpi machine I'd
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; unconditionally render LCD-AA with the assumption that the canvas
</I>&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; composited on white. If they want some other color they'd fill the
</I>&gt;&gt;&gt;<i> &gt;&gt; canvas
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; with as solid color first. Personally I don't think that needs to
</I>&gt;&gt;&gt;<i> be
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; specced, but it would be my suggestion. As I mentioned, even
</I>&gt;&gt;&gt;<i> without
</I>&gt;&gt;&gt;<i> &gt;&gt; this
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; hint the spec doesn't prevent a UA from unconditionally using
</I>&gt;&gt;&gt;<i> LCD-AA.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; Very few developers are going to run into issues. Most developers
</I>&gt;&gt;&gt;<i> that
</I>&gt;&gt;&gt;<i> &gt;&gt; use
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; canvas aren't going to set the hint. Most developers that use
</I>&gt;&gt;&gt;<i> canvas
</I>&gt;&gt;&gt;<i> &gt;&gt; dont'
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; make it transparent nor do they CSS rotate/scale them. For those
</I>&gt;&gt;&gt;<i> few
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; developers that do happen to blend and/or rotate/scale AND set the
</I>&gt;&gt;&gt;<i> hint
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; they'll get probably get some fringing but there (a) there was no
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; guarantee
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; they wouldn't already have that problem since as pointed out, the
</I>&gt;&gt;&gt;<i> spec
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; doesn't specify AA nor what kind, and (b) if they care they'll
</I>&gt;&gt;&gt;<i> either
</I>&gt;&gt;&gt;<i> &gt;&gt; stop
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; using the hint or they'll search for &quot;why is my canvas fringy&quot; and
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; answer will pop up on stackoverlow and they can choose one of the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; solutions.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; Rob
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; --
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; Wrfhf pnyyrq gurz gbtrgure naq fnvq, &#8220;Lbh xabj gung gur ehyref
</I>&gt;&gt;&gt;<i> bs gur
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; Tragvyrf ybeq vg bire gurz, naq gurve uvtu bssvpvnyf rkrepvfr
</I>&gt;&gt;&gt;<i> &gt;&gt; nhgubevgl
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; bire gurz. Abg fb jvgu lbh. Vafgrnq, jubrire jnagf gb orpbzr
</I>&gt;&gt;&gt;<i> terng
</I>&gt;&gt;&gt;<i> &gt;&gt; nzbat
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; lbh zhfg or lbhe freinag, naq jubrire jnagf gb or svefg zhfg or
</I>&gt;&gt;&gt;<i> lbhe
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; fynir
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; &#8212; whfg nf gur Fba bs Zna qvq abg pbzr gb or freirq, ohg gb freir,
</I>&gt;&gt;&gt;<i> &gt;&gt; naq gb
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; tvir uvf yvsr nf n enafbz sbe znal.&#8221; [Znggurj 20:25-28]
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081594.html">[whatwg] Enabling LCD Text and antialiasing in canvas
</A></li>
	<LI>Next message: <A HREF="081597.html">[whatwg] Enabling LCD Text and antialiasing in canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81596">[ date ]</a>
              <a href="thread.html#81596">[ thread ]</a>
              <a href="subject.html#81596">[ subject ]</a>
              <a href="author.html#81596">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
