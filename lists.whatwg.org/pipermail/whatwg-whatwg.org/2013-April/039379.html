<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] iframe sandbox and allow-scripts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20iframe%20sandbox%20and%20allow-scripts&In-Reply-To=%3C1730627251.9824473.1365810989306.JavaMail.root%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081651.html">
   <LINK REL="Next"  HREF="039382.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] iframe sandbox and allow-scripts</H1>
<!--htdig_noindex-->
    <B>Ian Melven</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20iframe%20sandbox%20and%20allow-scripts&In-Reply-To=%3C1730627251.9824473.1365810989306.JavaMail.root%40mozilla.com%3E"
       TITLE="[whatwg] iframe sandbox and allow-scripts">imelven at mozilla.com
       </A><BR>
    <I>Fri Apr 12 16:56:29 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081651.html">[whatwg] Why is the replacement encoding called &quot;replacement&quot; and not &quot;x-replacement&quot;?
</A></li>
        <LI>Next message: <A HREF="039382.html">[whatwg] &quot;adjusted current node&quot; in 12.2.5.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39379">[ date ]</a>
              <a href="thread.html#39379">[ thread ]</a>
              <a href="subject.html#39379">[ subject ]</a>
              <a href="author.html#39379">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
Hi,

Freddy Braun recently noticed that he could do the following in Firefox :

&lt;iframe id='foo' sandbox='allow-same-origin' src='inner.html'&gt;

(note no allow-scripts)

and then in the document containing the iframe:

var iframe = document.getElementById('foo');
iframe.contentWindow.eval(&quot;alert(document.location)&quot;);

and the alert will fire, which he found surprising.

I tested this in Chrome and IE 10 and found the behavior consistent across all three browsers.

The relevant portion of the spec seems to be (from <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#enabling-and-disabling-scripting">http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#enabling-and-disabling-scripting</A>) : 

* Scripting is enabled in a browsing context if ... The browsing context's active document's active sandboxing flag set does not have its sandboxed scripts browsing context flag set.

is the intent in Freddy's case to apply this rule using the browsing context of the script entry point ? that fits
the implemented behavior, but maybe should be mentioned in the iframe sandbox/allow-scripts section of the spec ?

thanks,
ian

</PRE>













<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081651.html">[whatwg] Why is the replacement encoding called &quot;replacement&quot; and not &quot;x-replacement&quot;?
</A></li>
	<LI>Next message: <A HREF="039382.html">[whatwg] &quot;adjusted current node&quot; in 12.2.5.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39379">[ date ]</a>
              <a href="thread.html#39379">[ thread ]</a>
              <a href="subject.html#39379">[ subject ]</a>
              <a href="author.html#39379">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
