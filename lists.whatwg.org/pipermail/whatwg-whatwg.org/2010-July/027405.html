<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas: clarification of compositing operations needed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%3A%20clarification%20of%20compositing%20operations%20needed&In-Reply-To=%3CD6C0FA87-F9C4-4E47-9F8B-EE566F6300E9%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027403.html">
   <LINK REL="Next"  HREF="027444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas: clarification of compositing operations needed</H1>
<!--htdig_noindex-->
    <B>Oliver Hunt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%3A%20clarification%20of%20compositing%20operations%20needed&In-Reply-To=%3CD6C0FA87-F9C4-4E47-9F8B-EE566F6300E9%40apple.com%3E"
       TITLE="[whatwg] Canvas: clarification of compositing operations needed">oliver at apple.com
       </A><BR>
    <I>Wed Jul 28 15:09:22 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="027403.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
        <LI>Next message: <A HREF="027444.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27405">[ date ]</a>
              <a href="thread.html#27405">[ thread ]</a>
              <a href="subject.html#27405">[ subject ]</a>
              <a href="author.html#27405">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Jul 28, 2010, at 2:46 PM, Tab Atkins Jr. wrote:

&gt;<i> On Wed, Jul 28, 2010 at 2:43 PM, David Flanagan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">david at davidflanagan.com</A>&gt; wrote:
</I>&gt;&gt;<i> Firefox and Chrome disagree about the implementation of the
</I>&gt;&gt;<i> destination-atop, source-in, destination-in, and source-out compositing
</I>&gt;&gt;<i> operators.  Test code is attached.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Chrome doesn't touch any destination pixels that are not underneath the
</I>&gt;&gt;<i> source pixels.  Firefox, on the other hand, treats the entire canvas (inside
</I>&gt;&gt;<i> the clipping region) as the destination and if you use the destination-in
</I>&gt;&gt;<i> operator, for example, will erase any pixels outside of whatever you are
</I>&gt;&gt;<i> drawing.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I suspect, based on the reference to an &quot;infinite transparent black bitmap&quot;
</I>&gt;&gt;<i> in 4.8.11.1.13 Drawing model that Firefox gets this right and Chrome gets it
</I>&gt;&gt;<i> wrong, but it would be nice to have that confirmed.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I suggest clarifying 4.8.11.1.3 Compositing to mention that the compositing
</I>&gt;&gt;<i> operation takes place on all pixels within the clipping region, and that
</I>&gt;&gt;<i> some compositing operators clear large portions of the canvas.
</I>&gt;<i> 
</I>&gt;<i> The spec is completely clear on this matter - Firefox is right,
</I>&gt;<i> Chrome/Safari are wrong.  They do it wrongly because that's how
</I>&gt;<i> CoreGraphics, their graphics library, does things natively.
</I>
This is the way the webkit canvas implementation has always worked, firefox implemented this incorrectly, and the spec was based off of that implementation.  

Additionally the webkit behaviour is more powerful than the spec behaviour as the spec behaviour can be emulated trivially on top of the webkit model, but vice versa is much harder and much more expensive.

--Oliver


&gt;<i> 
</I>&gt;<i> ~TJ
</I>
</PRE>






<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027403.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
	<LI>Next message: <A HREF="027444.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27405">[ date ]</a>
              <a href="thread.html#27405">[ thread ]</a>
              <a href="subject.html#27405">[ subject ]</a>
              <a href="author.html#27405">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
