<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas isPointInPath() coordinate space
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20isPointInPath%28%29%20coordinate%20space&In-Reply-To=%3C4C3EA36F.2070003%40davidflanagan.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069431.html">
   <LINK REL="Next"  HREF="069423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas isPointInPath() coordinate space</H1>
<!--htdig_noindex-->
    <B>David Flanagan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%20isPointInPath%28%29%20coordinate%20space&In-Reply-To=%3C4C3EA36F.2070003%40davidflanagan.com%3E"
       TITLE="[whatwg] Canvas isPointInPath() coordinate space">david at davidflanagan.com
       </A><BR>
    <I>Wed Jul 14 22:58:07 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="069431.html">[whatwg] postMessage's target origin argument can be a full URL	in some implementations
</A></li>
        <LI>Next message: <A HREF="069423.html">[whatwg] Canvas isPointInPath() coordinate space
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69422">[ date ]</a>
              <a href="thread.html#69422">[ thread ]</a>
              <a href="subject.html#69422">[ subject ]</a>
              <a href="author.html#69422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Here's another coordinate-space related question.

I assume that the intended purpose of isPointInPath() is hit testing. 
You get a click event on a canvas element, extract the mouse coordinates 
from the event object, subtract the canvas position from them, and pass 
them to isPointInPath() to figure out what part of your drawing the user 
has clicked on.

My question has to do with this paragraph from the spec:

&gt;<i> The intrinsic dimensions of the canvas element equal the size of the coordinate space, with the numbers interpreted in CSS pixels. However, the element can be sized arbitrarily by a style sheet. During rendering, the image is scaled to fit this layout size.
</I>
and this one:

&gt;<i> The isPointInPath(x, y) method must return true if the point given by the x and y coordinates passed to the method, when treated as coordinates in the canvas coordinate space unaffected by the current transformation...
</I>
So suppose I'm using this canvas tag:

&lt;canvas width=100 height=100 style=&quot;width:200px; height:200px&quot;&gt;&lt;/canvas&gt;

If I understand the first quoted paragraph above correctly, this canvas 
will have 2 on-screen CSS pixels per coordinate space unit.

So here's my question: if I want to do hit-testing as described above, 
do I need to take the mouse coordinates from the event, subtract the 
offset of the canvas, and then divide by 2?  As the spec is written, I 
think I do have to do that division manually.  Is that what is intended? 
  What if the user has zoomed in?  Is it even possible to use 
isPointInPath() correctly in that case?

	David

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069431.html">[whatwg] postMessage's target origin argument can be a full URL	in some implementations
</A></li>
	<LI>Next message: <A HREF="069423.html">[whatwg] Canvas isPointInPath() coordinate space
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69422">[ date ]</a>
              <a href="thread.html#69422">[ thread ]</a>
              <a href="subject.html#69422">[ subject ]</a>
              <a href="author.html#69422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
