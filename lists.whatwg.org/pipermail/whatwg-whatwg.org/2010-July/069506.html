<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;video&gt; application/octet-stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20application/octet-stream&In-Reply-To=%3CAANLkTimxifruL64Vg6sEEcs3EJzX9xlBLDjuwOxXyjHH%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069497.html">
   <LINK REL="Next"  HREF="069507.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;video&gt; application/octet-stream</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20application/octet-stream&In-Reply-To=%3CAANLkTimxifruL64Vg6sEEcs3EJzX9xlBLDjuwOxXyjHH%40mail.gmail.com%3E"
       TITLE="[whatwg] &lt;video&gt; application/octet-stream">robert at ocallahan.org
       </A><BR>
    <I>Wed Jul 21 17:22:34 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="069497.html">[whatwg] &lt;video&gt; application/octet-stream
</A></li>
        <LI>Next message: <A HREF="069507.html">[whatwg] &lt;video&gt; application/octet-stream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69506">[ date ]</a>
              <a href="thread.html#69506">[ thread ]</a>
              <a href="subject.html#69506">[ subject ]</a>
              <a href="author.html#69506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Jul 22, 2010 at 2:07 AM, Chris Double &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chris.double at double.co.nz</A>&gt;wrote:

&gt;<i> When content sniffing are we ignoring the mime type served by the
</I>&gt;<i> server and always sniffing? If so then incorrectly configured servers
</I>&gt;<i> can result in more downloaded data due to having to read the data
</I>&gt;<i> looking for a valid video. For example:
</I>&gt;<i>
</I>&gt;<i> &lt;video&gt;
</I>&gt;<i>  &lt;source src='foo.ogg'&gt;
</I>&gt;<i>  &lt;source src='foo.mkv'&gt;
</I>&gt;<i> &lt;/video&gt;
</I>&gt;<i>
</I>&gt;<i> If the web browser doesn't support Ogg but does support matroska, and
</I>&gt;<i> the server sends the video/ogg content type,  the browser can stop and
</I>&gt;<i> go to the next source after downloading very little data.
</I>&gt;<i>
</I>&gt;<i> If the web browser is expected to ignore the mime type and content
</I>&gt;<i> sniff it must see if 'foo.ogg' is a matroska file. According to the
</I>&gt;<i> matroska spec arbitary ASCII data can be placed before the EBML
</I>&gt;<i> identifier. This means reading a possible large amount of data (even
</I>&gt;<i> the entire file) before being able to say that it's not a matroska
</I>&gt;<i> file.
</I>&gt;<i>
</I>&gt;<i> That type of scenario is what I was getting at about how much of the
</I>&gt;<i> file should be read before giving up.
</I>&gt;<i>
</I>
While that's true, in practice binary data will appear quite early in the
file, and we could even tighten up WebM to restrict the amount of ASCII data
that appears before the EBML identifier (perhaps to zero).

Also, in your example the author could have provided type=&quot;&quot; attributes on
the &lt;source&gt; elements to control what gets downloaded. I assume that no-one
is proposing we ignore those.

While I don't like sniffing, apparently Safari and Chrome have already raced
straight to the bottom of the poisoned well here, so I don't think we really
have a choice.

Rob
-- 
&quot;Now the Bereans were of more noble character than the Thessalonians, for
they received the message with great eagerness and examined the Scriptures
every day to see if what Paul said was true.&quot; [Acts 17:11]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100722/a23030ff/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100722/a23030ff/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069497.html">[whatwg] &lt;video&gt; application/octet-stream
</A></li>
	<LI>Next message: <A HREF="069507.html">[whatwg] &lt;video&gt; application/octet-stream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69506">[ date ]</a>
              <a href="thread.html#69506">[ thread ]</a>
              <a href="subject.html#69506">[ subject ]</a>
              <a href="author.html#69506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
