<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas: clarification of compositing operations needed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%3A%20clarification%20of%20compositing%20operations%20needed&In-Reply-To=%3C4C51B485.4050904%40davidflanagan.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069697.html">
   <LINK REL="Next"  HREF="069680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas: clarification of compositing operations needed</H1>
<!--htdig_noindex-->
    <B>David Flanagan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%3A%20clarification%20of%20compositing%20operations%20needed&In-Reply-To=%3C4C51B485.4050904%40davidflanagan.com%3E"
       TITLE="[whatwg] Canvas: clarification of compositing operations needed">david at davidflanagan.com
       </A><BR>
    <I>Thu Jul 29 10:04:05 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="069697.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
        <LI>Next message: <A HREF="069680.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69699">[ date ]</a>
              <a href="thread.html#69699">[ thread ]</a>
              <a href="subject.html#69699">[ subject ]</a>
              <a href="author.html#69699">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Tab Atkins Jr. wrote:
&gt;<i> On Wed, Jul 28, 2010 at 11:39 PM, David Flanagan
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">david at davidflanagan.com</A>&gt; wrote:
</I>&gt;&gt;<i> James Robinson wrote:
</I>&gt;&gt;&gt;<i> For example, I think
</I>&gt;&gt;&gt;<i> drawing a 20x20 image into a 500x500 canvas without scaling with a
</I>&gt;&gt;&gt;<i> globalCompositeOperation of 'copy' should result in only the 20x20 region
</I>&gt;&gt;&gt;<i> being cleared out, not the entire canvas.
</I>&gt;&gt;<i> Yikes!  It hadn't occurred to me that copy should behave that way.  But
</I>&gt;&gt;<i> you're right that that is what the spec requires.  Opera does it that way.
</I>&gt;&gt;<i>  Firefox, thankfully, does not.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Perhaps independently of the debate over infinite bitmap vs. shape extents,
</I>&gt;&gt;<i> we can agree that &quot;copy&quot; is a special value that means &quot;do not perform
</I>&gt;&gt;<i> compositing&quot;
</I>&gt;<i> 
</I>&gt;<i> That value already exists - it's called &quot;source-over&quot;. 
</I>
You've lost me.  Are we disagreeing over the meaning of &quot;composite&quot;.  It 
seems to me that &quot;source-over&quot; is clearly doing compositing: the result 
pixel is a blend of the source and destination pixels.


  &quot;copy&quot; does
&gt;<i> some special compositing stuff no matter whether you do &quot;global&quot; or
</I>&gt;<i> &quot;local&quot; compositing - try using 'copy' when the source has .1 opacity.
</I>
The &quot;copy&quot; operation does not blend pixels: the result pixel is just the 
source pixel.  So when try what you suggest and draw with almost 
transparent pixels using the copy operation, the result is almost 
transparent pixels, regardless of what was under them.  That, to me, 
means that no compositing is being done.  What am I missing here?  What 
kind of &quot;special stuff&quot; is going on with &quot;copy&quot; compositing?

I'd argue that &quot;copy&quot; is the 2nd most important compositing operation 
after &quot;source-over&quot;. Everyone but Opera violates the spec and treats it 
as a &quot;local&quot; operation.  If I understand correctly, the reason that the 
spec can't be changed to define compositing as a local operation is that 
vendors can't agree on what &quot;local&quot; means w.r.t. antialiasing, shadows, 
etc.

But since &quot;copy&quot; is a really important value, I propose that we sidestep 
the larger issue and explicitly state that when globalCompositeOperation 
is set to &quot;copy&quot; it means &quot;just draw the damn pixels like we used to do 
in the olden days before we got all fancy with alpha channels and 
stuff&quot;.  A refinement would be to add a new value &quot;none&quot; and make &quot;copy&quot; 
a synonym for &quot;none&quot;.

	David

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069697.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
	<LI>Next message: <A HREF="069680.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69699">[ date ]</a>
              <a href="thread.html#69699">[ thread ]</a>
              <a href="subject.html#69699">[ subject ]</a>
              <a href="author.html#69699">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
