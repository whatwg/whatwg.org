<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Constraint validation for maxlength
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Constraint%20validation%20for%20maxlength&In-Reply-To=%3CAANLkTilzqqgkcO-Xq1-tyBVMeX93pv6Li6vCmGZPEmY_%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069561.html">
   <LINK REL="Next"  HREF="069534.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Constraint validation for maxlength</H1>
<!--htdig_noindex-->
    <B>Aryeh Gregor</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Constraint%20validation%20for%20maxlength&In-Reply-To=%3CAANLkTilzqqgkcO-Xq1-tyBVMeX93pv6Li6vCmGZPEmY_%40mail.gmail.com%3E"
       TITLE="[whatwg] Constraint validation for maxlength">Simetrical+w3c at gmail.com
       </A><BR>
    <I>Thu Jul 22 14:18:36 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="069561.html">[whatwg] Please disallow &quot;javascript:&quot; URLs in browser address	bars
</A></li>
        <LI>Next message: <A HREF="069534.html">[whatwg] Constraint validation for maxlength
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69530">[ date ]</a>
              <a href="thread.html#69530">[ thread ]</a>
              <a href="subject.html#69530">[ subject ]</a>
              <a href="author.html#69530">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>maxlength predates all the other form validation attributes by many
years.  Historically, browsers would prohibit users from entering text
beyond the maxlength of an input or textarea, but would not prohibit
form submission.  HTML5 changes this:

&quot;&quot;&quot;
Constraint validation: If an element has a maximum allowed value
length, and its dirty value flag is true, and the code-point length of
the element's value is greater than the element's maximum allowed
value length, then the element is suffering from being too long.
&quot;&quot;&quot;
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#limiting-user-input-length">http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#limiting-user-input-length</A>

If I read it correctly, this means that pages that previously worked
no longer will, if a script sets the value of the input to something
longer than the maxlength.  Something like this was reported against
Chromium (although in this case it was more of a browser bug for
autofilling passwords beyond maxlength):

<A HREF="http://code.google.com/p/chromium/issues/detail?id=45640#c2">http://code.google.com/p/chromium/issues/detail?id=45640#c2</A>

These two test cases show that Opera maintains the legacy behavior
(not compatible with the spec) and submits the forms regardless of
maxlength violations, while WebKit (Chromium) blocks submission as
required by the spec:

data:text/html,&lt;!doctype html&gt;&lt;body
onload=&quot;document.getElementById('a').value='foo'&quot;&gt;&lt;form&gt;&lt;input id=a
maxlength=2&gt;&lt;input type=submit&gt;&lt;/form&gt;Try to submit the form

data:text/html,&lt;!doctype html&gt;&lt;form&gt;&lt;input id=a&gt;&lt;input
type=submit&gt;&lt;/form&gt;&lt;a href=&quot;&quot;
onclick=&quot;document.getElementById('a').maxLength = 2; return
false&quot;&gt;Enter &quot;foo&quot; into the input, click here, then try to submit&lt;/a&gt;

Should the spec (and WebKit) be changed here, or should Opera change?

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069561.html">[whatwg] Please disallow &quot;javascript:&quot; URLs in browser address	bars
</A></li>
	<LI>Next message: <A HREF="069534.html">[whatwg] Constraint validation for maxlength
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69530">[ date ]</a>
              <a href="thread.html#69530">[ thread ]</a>
              <a href="subject.html#69530">[ subject ]</a>
              <a href="author.html#69530">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
