<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [URL] Starting work on a URL spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BURL%5D%20Starting%20work%20on%20a%20URL%20spec&In-Reply-To=%3C4C4A8CEC.9030704%40yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="069581.html">
   <LINK REL="Next"  HREF="069584.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [URL] Starting work on a URL spec</H1>
<!--htdig_noindex-->
    <B>Brett Zamir</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BURL%5D%20Starting%20work%20on%20a%20URL%20spec&In-Reply-To=%3C4C4A8CEC.9030704%40yahoo.com%3E"
       TITLE="[whatwg] [URL] Starting work on a URL spec">brettz9 at yahoo.com
       </A><BR>
    <I>Fri Jul 23 23:49:16 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="069581.html">[whatwg] [URL] Starting work on a URL spec
</A></li>
        <LI>Next message: <A HREF="069584.html">[whatwg] [URL] Starting work on a URL spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69583">[ date ]</a>
              <a href="thread.html#69583">[ thread ]</a>
              <a href="subject.html#69583">[ subject ]</a>
              <a href="author.html#69583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>  On 7/24/2010 2:02 PM, Boris Zbarsky wrote:
&gt;<i> On 7/24/10 1:50 AM, Brett Zamir wrote:
</I>&gt;&gt;&gt;<i> I would be particularly interested in data on this last, across
</I>&gt;&gt;&gt;<i> different browsers, operating systems, and locales... There seem to be
</I>&gt;&gt;&gt;<i> servers out there expecting their URIs in UTF-8 and others expecting
</I>&gt;&gt;&gt;<i> them in ISO-8859-1, and it's not clear to me how to make things work
</I>&gt;&gt;&gt;<i> with them all.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Seems to me that if they are not in UTF-8, they should be treated as
</I>&gt;&gt;<i> bugs, even if that is not a de jure standard.
</I>&gt;<i>
</I>&gt;<i> Treated as bugs by whom?
</I>&gt;<i>
</I>By the servers/scripting languages. While it is great that the browsers 
are involved in the process, I think it would be reasonable to invite 
the other stake-holders to join the discussions.
&gt;<i> The scenario is that a user types some non-ASCII text in the url bar. 
</I>&gt;<i> This needs to be url-encoded to actually go on the wire, which raises 
</I>&gt;<i> the question of what encoding.  If the user is using IRIs, the answer 
</I>&gt;<i> is UTF-8.  A number of servers barf if you do this, especially because 
</I>&gt;<i> some server-side scripting languages (PHP, e.g., last I checked) 
</I>&gt;<i> default to URI-unescaping via something other than UTF-8.
</I>&gt;<i>
</I>Hopefully to be fixed in PHP6 with its promise of full Unicode support...

Though per <A HREF="http://www.slideshare.net/kfish/unicode-php6-presentation">http://www.slideshare.net/kfish/unicode-php6-presentation</A> :

*Slide 34: *Conversions &amp; Encoding &#8220;HTTP Input Encoding&#8221;
With Unicode semantics switch enabled, we need to convert HTTP input to 
Unicode
GET requests have no encoding at all and POST ones rarely come marked 
with the encoding
Encoding detection is not reliable
*Correctly decoding HTTP input is somewhat of an unsolved problem*

*Slide 35: *Conversions &amp; Encoding &#8220;HTTP Input Encoding&#8221;
PHP will perform lazy decoding
Delays decoding data in $_GET, $_POST, and $_REQUEST until the &#64257;rst time 
you access them
Allows user to set expected encoding or just rely on a default one
Allows decoding errors to be handled by the same mechanism
Applications should also use &#64257;lter extension to &#64257;lter incoming data

&gt;<i> So some browser encode the non-query part of the URI as UTF-8 and the 
</I>&gt;<i> query part as ... something (user's default filesystem encoding, say, 
</I>&gt;<i> for lack of a better guess).  Others always use UTF-8 (and end up with 
</I>&gt;<i> some servers not usable).  Others... I have no idea.  That's why I 
</I>&gt;<i> want data.  ;)  In particular, while the &quot;just use UTF-8, and if the 
</I>&gt;<i> user can't access the site sucks to be the user&quot; approach has a 
</I>&gt;<i> certain theoretical-purity appeal, it doesn't seem like something I 
</I>&gt;<i> want to do to my friends and family (always a good criterion for 
</I>&gt;<i> things you'd like to do to users).
</I>&gt;<i>
</I>What I meant is to try to get the server systems on board to fix the 
issue, including in the long-term. I appreciate you all being admirably 
practical champions of present-day compatibility, though I'd hope there 
is a vision to make things work better for the future, even if there 
will be some inevitable growing pains for a subset of users (as the lack 
of standardization no doubt creates pains for another subset as it is).

Brett

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100724/87d807a5/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100724/87d807a5/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="069581.html">[whatwg] [URL] Starting work on a URL spec
</A></li>
	<LI>Next message: <A HREF="069584.html">[whatwg] [URL] Starting work on a URL spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69583">[ date ]</a>
              <a href="thread.html#69583">[ thread ]</a>
              <a href="subject.html#69583">[ subject ]</a>
              <a href="author.html#69583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
