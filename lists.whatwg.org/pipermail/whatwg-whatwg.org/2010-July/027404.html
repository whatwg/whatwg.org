<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Changing punctuation value of input element in telephone state
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Changing%20punctuation%20value%20of%20input%20element%20in%0A%20telephone%20state&In-Reply-To=%3CPine.LNX.4.64.1007282128480.7470%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027407.html">
   <LINK REL="Next"  HREF="027418.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Changing punctuation value of input element in telephone state</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Changing%20punctuation%20value%20of%20input%20element%20in%0A%20telephone%20state&In-Reply-To=%3CPine.LNX.4.64.1007282128480.7470%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Changing punctuation value of input element in telephone state">ian at hixie.ch
       </A><BR>
    <I>Wed Jul 28 15:08:12 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="027407.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
        <LI>Next message: <A HREF="027418.html">[whatwg] Changing punctuation value of input element in telephone state
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27404">[ date ]</a>
              <a href="thread.html#27404">[ thread ]</a>
              <a href="subject.html#27404">[ subject ]</a>
              <a href="author.html#27404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 7 Apr 2010, Mounir Lamouri wrote:
&gt;<i> On 04/07/2010 01:08 AM, Ian Hickson wrote:
</I>&gt;<i> &gt; On Wed, 7 Apr 2010, Mounir Lamouri wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Well the alternative is to not have the user agent change the value 
</I>&gt;<i> &gt;&gt;&gt; at all, in which case you still have to do server-side 
</I>&gt;<i> &gt;&gt;&gt; canonicalisation, so I don't think it really makes any difference.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; If the UA is not changing the value, we are sure at least webpage 
</I>&gt;<i> &gt;&gt; authors can easily specify how they want the telephone number to be 
</I>&gt;<i> &gt;&gt; formatted and check it with pattern attribute (or use 
</I>&gt;<i> &gt;&gt; setCustomValidity()).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If the author is doing the formatting, it's really not much better 
</I>&gt;<i> &gt; than a type=text field. The reason to have type=tel is to allow the UA 
</I>&gt;<i> &gt; to do that part of the work.
</I>&gt;<i> 
</I>&gt;<i> As Davis said, there are too many phone numbers format out there so we 
</I>&gt;<i> can't let the UA do a formatting because it will be a bad one in most of 
</I>&gt;<i> the cases. For example, in France, we use 2-digit blocks but in the US 
</I>&gt;<i> people write 3-digit or 4-digit blocks. Maybe the telephone type can be 
</I>&gt;<i> like the search one and be here only for styling ?
</I>
What styling would there be?


On Wed, 7 Apr 2010, Mounir Lamouri wrote:
&gt;<i> 
</I>&gt;<i> By the way, it lets me think about something: the telephone state can 
</I>&gt;<i> still be used for autocomplete with phones from contacts.
</I>
Wouldn't those numbers of autoformatted anyway?


Note though that the spec doesn't require autoformatting. It's just 
something that I'd expect browsers to do. It's entirely up to the browser 
whether or not it does this, in much the same way as a browser can 
autocorrect spelling in a text field.


On Tue, 6 Apr 2010, Davis Peixoto wrote:
&gt;<i> 
</I>&gt;<i> Tab, this does not means only formatting, but the input length will 
</I>&gt;<i> differ too much.
</I>&gt;<i> 
</I>&gt;<i> Uruguay for example, has only 6 digits number, 8 with international 
</I>&gt;<i> leading code. Brazil has 9 or 10, depending on the region, plus 2 with 
</I>&gt;<i> international leading code.
</I>&gt;<i> 
</I>&gt;<i> That's the point. But as I said, when we have some standard for it (I 
</I>&gt;<i> doubt of this, but let's suppose it), we can put this inside locales 
</I>&gt;<i> configuration. This is a nice idea. Anyway, backend programmer will 
</I>&gt;<i> still need to sanitize this input somehow. Yeah, I do not see much light 
</I>&gt;<i> for this matter.
</I>
Note that if users are including the country code, it's just a matter of 
applying the relevant rules, so that's not a big deal. The problem is only 
when the user enters a local number, but then the UA can apply 
locale-specific formatting, just like is done with dates and times.


On Wed, 7 Apr 2010, Kit Grose wrote:
&gt;<i> 
</I>&gt;<i> I'm surprised this was an issue; the Mac OS X Address Book contains a 
</I>&gt;<i> dedicated preferences screen to allow you to define custom formatting 
</I>&gt;<i> rules if they don't automatically behave as you'd like.
</I>&gt;<i> 
</I>&gt;<i> In fact, my suggestion to the entire list was to fall back on the 
</I>&gt;<i> OS-native Address Book's settings for formatting phone numbers, since 
</I>&gt;<i> that is a setting that is certainly going to be the same for a given 
</I>&gt;<i> user between his or her address book and web browser.
</I>
Indeed.


On Wed, 7 Apr 2010, Eduard Pascual wrote:
&gt;<i> On Wed, Apr 7, 2010 at 1:10 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; If there was a true standard, then the spec would refer to that, but 
</I>&gt;<i> &gt; as you say, it's very varied in practice.
</I>&gt;<i> 
</I>&gt;<i> There is quite a standard, even if an implicit one: (almost) no 
</I>&gt;<i> punctuation. Have you ever dialed a &quot;(&quot; or a &quot;-&quot; when phoning someone? 
</I>&gt;<i> In essence, phone numbers are sequences of digits, and punctuation is 
</I>&gt;<i> only used as a convenience to enhance readability.
</I>
The punctuation is relevant. For example, in the UK &quot;(0141) 496 0765&quot; would 
be dialed as &quot;496 0765&quot; if you were in Glasgow, but as &quot;0141 496 0765&quot; 
elsewhere. Similarly, &quot;+44 (0)141 496 0765&quot; is never dialed as written; 
from the US you'd dial &quot;011441414960765&quot;, from London you'd dial 
&quot;01414960765&quot;, and from Glasgow you'd dial &quot;4960765&quot;. Without the 
punctuation it's not clear what numbers you'd want to dial -- for example, 
consider the (UK) number &quot;016329600700&quot; -- what would you dial where?


&gt;<i> Maybe I'm being too hasty with this idea but, since machines don't 
</I>&gt;<i> really need the same readability aids as humans do, I'd suggest that the 
</I>&gt;<i> UA simply removes everything other than &quot;+&quot; and alphanumeric characters 
</I>&gt;<i> (and obviously adds nothing) when sending the field. I don't care too 
</I>&gt;<i> much about what they do upon rendering the introduced value (and I think 
</I>&gt;<i> it's probably fine if the browser adds some formatting based on its own 
</I>&gt;<i> or the system's regional settings). The server is only left with 
</I>&gt;<i> replacing letters and &quot;+&quot;; plus any application-specific usage of the 
</I>&gt;<i> value itself (which, by then, will be a string of digits; assumedly 
</I>&gt;<i> representing the sequence of digits to dial).
</I>
This is something the server can trivially do itself if it wants. I don't 
see why we'd require UAs to strip possibly punctuation that might help in 
the usage of the number (especially if it's not an international number).

Note that stripping the round brackets from the number above (&quot;+44 (0)141 
496 0765&quot;) would result in an invalid number. You never dial both the &quot;44&quot; 
and the &quot;0&quot;.


&gt;<i> Other than that, the only safe alternative would be to leave the values 
</I>&gt;<i> untouched, so the page can say what it wants, the user honor it, and the 
</I>&gt;<i> server get it as expected; or gracefully degrade to an error message 
</I>&gt;<i> that actually points to the user error (rather than an error introduced 
</I>&gt;<i> by an UA trying to be out-smart the user).
</I>&gt;<i> 
</I>&gt;<i> For sites that are ready to sanitize values from a specific locale; but 
</I>&gt;<i> which are accessed through an UA with different settings (ie: on a 
</I>&gt;<i> public place while abroad), the UA adding locale-specific stuff to a 
</I>&gt;<i> phone value is very likely to render whole forms unusables.
</I>
Adding, yes. Changing the spacing seems harmless.

Nothing in the spec suggests browsers should add or remove numbers or 
letters. The spec just says browsers can change the punctuation. I've 
tried to make this clearer.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027407.html">[whatwg] Canvas: clarification of compositing operations needed
</A></li>
	<LI>Next message: <A HREF="027418.html">[whatwg] Changing punctuation value of input element in telephone state
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27404">[ date ]</a>
              <a href="thread.html#27404">[ thread ]</a>
              <a href="subject.html#27404">[ subject ]</a>
              <a href="author.html#27404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
