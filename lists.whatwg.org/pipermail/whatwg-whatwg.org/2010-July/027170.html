<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] postMessage's target origin argument can be a full URL	in some implementations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%27s%20target%20origin%20argument%20can%20be%20a%20full%20URL%0A%09in%20some%20implementations&In-Reply-To=%3CAANLkTinJDybzS30l8-zxaqaDVOzZGIo3th8r0b2Pj0vS%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027146.html">
   <LINK REL="Next"  HREF="027175.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] postMessage's target origin argument can be a full URL	in some implementations</H1>
<!--htdig_noindex-->
    <B>Hallvord R M Steen</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20postMessage%27s%20target%20origin%20argument%20can%20be%20a%20full%20URL%0A%09in%20some%20implementations&In-Reply-To=%3CAANLkTinJDybzS30l8-zxaqaDVOzZGIo3th8r0b2Pj0vS%40mail.gmail.com%3E"
       TITLE="[whatwg] postMessage's target origin argument can be a full URL	in some implementations">hallvors at gmail.com
       </A><BR>
    <I>Mon Jul 19 05:56:01 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="027146.html">[whatwg] postMessage's target origin argument can be a full URL	in some implementations
</A></li>
        <LI>Next message: <A HREF="027175.html">[whatwg] postMessage's target origin argument can be a full URL in some implementations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27170">[ date ]</a>
              <a href="thread.html#27170">[ thread ]</a>
              <a href="subject.html#27170">[ subject ]</a>
              <a href="author.html#27170">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>2010/7/15 Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt;:

&gt;&gt;&gt;<i> Personally, I think we should stop screwing with postMessage and let
</I>&gt;&gt;&gt;<i> it be a stable enough API that folks can rely upon it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Screwing with the spec, or with implementations? &#160;The spec, as currently
</I>&gt;&gt;<i> written, is not compatible with the majority of shipped implementations....
</I>&gt;<i>
</I>&gt;<i> The implementations were compatible with the spec when the
</I>&gt;<i> implementations were written, as far as I remember.
</I>
I have no idea when other implementations of postMessage() were
written. However, &quot;throw an exception if targetOrigin has a
path/query/fragment&quot; is a spec requirement since October 2008
according to this change:
<A HREF="http://html5.org/tools/web-apps-tracker?from=2353&amp;to=2354">http://html5.org/tools/web-apps-tracker?from=2353&amp;to=2354</A>

It seems only implemented correctly in Opera (have not tested IE though).

&gt;<i> &#160;So, I'd prefer
</I>&gt;<i> that we didn't change APIs after shipping them unless necessary. &#160;If
</I>&gt;<i> we keep changing shipping APIs, we'll exhaust early adopters, which is
</I>&gt;<i> bad for the ecosystem.
</I>
I agree with that in general, however it makes things harder that this
is an issue that might have security implications.

Opera hit this incompatibility on two sites. One is
<A HREF="http://www.studivz.net">http://www.studivz.net</A> , the other one is Facebook (we've asked both
sites to fix the problem and referred them to the HTML5 spec).
Aditionally, Boris stated he has written such scripts himself.
Facebook uses it in a &quot;clever&quot; way to actually pass on some GUID/data
in the path, which will presumably appear in e.origin in the message
listener?

My gut feeling is that if you fix this quickly we could avoid usage
spreading even more on the web. However, we have a patch ready to go
to align Opera's implementation with yours, in case you want to keep
it and get Ian to change the spec.

-- 
Hallvord R. M. Steen
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027146.html">[whatwg] postMessage's target origin argument can be a full URL	in some implementations
</A></li>
	<LI>Next message: <A HREF="027175.html">[whatwg] postMessage's target origin argument can be a full URL in some implementations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27170">[ date ]</a>
              <a href="thread.html#27170">[ thread ]</a>
              <a href="subject.html#27170">[ subject ]</a>
              <a href="author.html#27170">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
