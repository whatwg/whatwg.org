<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Document's base URI should use the document's	*current* address
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Document%27s%20base%20URI%20should%20use%20the%20document%27s%0A%09%2Acurrent%2A%20address&In-Reply-To=%3CCAFWcpZ7dSdjScR4CULnZmo2AVZ8obEGwNhnwkF%3DLhGLtsCUMkA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077152.html">
   <LINK REL="Next"  HREF="077179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Document's base URI should use the document's	*current* address</H1>
<!--htdig_noindex-->
    <B>Justin Lebar</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Document%27s%20base%20URI%20should%20use%20the%20document%27s%0A%09%2Acurrent%2A%20address&In-Reply-To=%3CCAFWcpZ7dSdjScR4CULnZmo2AVZ8obEGwNhnwkF%3DLhGLtsCUMkA%40mail.gmail.com%3E"
       TITLE="[whatwg] Document's base URI should use the document's	*current* address">justin.lebar at gmail.com
       </A><BR>
    <I>Wed Feb 15 22:03:53 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077152.html">[whatwg] Document's base URI should use the document's *current* address
</A></li>
        <LI>Next message: <A HREF="077179.html">[whatwg] Document's base URI should use the document's *current* address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77157">[ date ]</a>
              <a href="thread.html#77157">[ thread ]</a>
              <a href="subject.html#77157">[ subject ]</a>
              <a href="author.html#77157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Feb 15, 2012 at 5:31 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Wed, 15 Feb 2012, Justin Lebar wrote:
</I>&gt;&gt;<i> &gt; &#160;- It sets &quot;the document's current address&quot; to &quot;.../page.html#foo&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Well, this is pretty bad. &#160;document.location is the document's current
</I>&gt;&gt;<i> address [1]. &#160;So clicking #foo changed document.location from page2.html
</I>&gt;&gt;<i> to page.html#foo, which I certainly wouldn't expect (and does not match
</I>&gt;&gt;<i> implementations).
</I>&gt;<i>
</I>&gt;<i> Seems to me we should change the implementations then. There isn't any
</I>&gt;<i> fundamental difference between linking to #foo and linking to
</I>&gt;<i> page.html#foo if the base URL is page.html, as far as I can tell.
</I>&gt;<i>
</I>&gt;<i> If the implementations can't change, then I'll change the spec, but it
</I>&gt;<i> really seems bad to me that relative URLs will break depending on when
</I>&gt;<i> they are resolved relative to pushState() changes.
</I>
When I implemented pushState, I explicitly didn't want authors to have
to rewrite all their anchor links after they changed the document's
current URI.

&gt;<i>From an author's point of view, there's no such thing as the
</I>document's original URI and, unless you're a nerd, you've never heard
of the base URI.  There's just the document's URI, modified by
pushState.

&gt;<i>From this point of view, I'd say it's less surprising that relative
</I>URIs would break when you change directories (hey, you *asked* for it)
than that anchor refs would update the browser's address bar and
document.location relative to the old URI.

If we did make the change you're suggesting, we'd have to check that
it doesn't break at least the major sites which use pushstate
(Facebook, anyone?).  And I'd want to try to coordinate the change
with WebKit so we quickly move away from the old behavior.  But I'm
not convinced it's worthwhile, given that there's at least an argument
for the current behavior.

-Justin

&gt;<i> --
</I>&gt;<i> Ian Hickson &#160; &#160; &#160; &#160; &#160; &#160; &#160; U+1047E &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;)\._.,--....,'``. &#160; &#160;fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A> &#160; &#160; &#160; U+263A &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;/, &#160; _.. \ &#160; _\ &#160;;`._ ,.
</I>&gt;<i> Things that are impossible just take longer. &#160; `._.-(,_..'--(,_..'`-.;.'
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077152.html">[whatwg] Document's base URI should use the document's *current* address
</A></li>
	<LI>Next message: <A HREF="077179.html">[whatwg] Document's base URI should use the document's *current* address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77157">[ date ]</a>
              <a href="thread.html#77157">[ thread ]</a>
              <a href="subject.html#77157">[ subject ]</a>
              <a href="author.html#77157">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
