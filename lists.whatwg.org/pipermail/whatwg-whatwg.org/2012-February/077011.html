<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] RWD Heaven: if browsers reported device capabilities in a request header
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RWD%20Heaven%3A%20if%20browsers%20reported%20device%20capabilities%0A%20in%20a%20request%20header&In-Reply-To=%3CCAMCRKi%2BykNutDBJdR9AyT7EJWKMeH4idStuv5ooQxYf1SWhxFw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077007.html">
   <LINK REL="Next"  HREF="077013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] RWD Heaven: if browsers reported device capabilities in a request header</H1>
<!--htdig_noindex-->
    <B>Matthew Wilcox</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RWD%20Heaven%3A%20if%20browsers%20reported%20device%20capabilities%0A%20in%20a%20request%20header&In-Reply-To=%3CCAMCRKi%2BykNutDBJdR9AyT7EJWKMeH4idStuv5ooQxYf1SWhxFw%40mail.gmail.com%3E"
       TITLE="[whatwg] RWD Heaven: if browsers reported device capabilities in a request header">mail at matthewwilcox.com
       </A><BR>
    <I>Tue Feb  7 11:52:56 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077007.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
        <LI>Next message: <A HREF="077013.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77011">[ date ]</a>
              <a href="thread.html#77011">[ thread ]</a>
              <a href="subject.html#77011">[ subject ]</a>
              <a href="author.html#77011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Thanks again, you make some good points :)

More responses inline...

On 7 February 2012 17:59, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:

&gt;<i> On 2/7/12 12:32 PM, Matthew Wilcox wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>    This is a case of browser vendors (or at least me with my browser
</I>&gt;&gt;<i>    implementor had on) thinking that sending this sort of information
</I>&gt;&gt;<i>    will hurt their users' privacy
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can you clarify how this hurts privacy? I'm not sure how reporting back
</I>&gt;&gt;<i> things like connection speed or screen size constitutes a genuine
</I>&gt;&gt;<i> privacy issue?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Reporting more information about the user's hardware and software to the
</I>&gt;<i> server allows better fingerprinting and hence tracking.  See
</I>&gt;<i> <A HREF="https://www.eff.org/deeplinks/**2010/01/primer-information-**">https://www.eff.org/deeplinks/**2010/01/primer-information-**</A>
</I>&gt;<i> theory-and-privacy&lt;<A HREF="https://www.eff.org/deeplinks/2010/01/primer-information-theory-and-privacy">https://www.eff.org/deeplinks/2010/01/primer-information-theory-and-privacy</A>&gt;and similar resources for details.
</I>

Agreed. But this already happens. Your point is the user must be able to
opt in and out, as they might be turning off JS (which, frankly, how many
non-webnerd people do?). So you're saying the problem isn't the tech but
the user control? Can we not give that to them?


&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     , will cause their users to get more broken pages (which is what
</I>&gt;&gt;<i>    happens in many cases with browser sniffing right now), will lock
</I>&gt;&gt;<i>    new devices out of the market (which is what happens with new UA
</I>&gt;&gt;<i>    strings right now).  And hence that the proposal is bad for the web
</I>&gt;&gt;<i>    in various ways.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm not sure what your grounds are for thinking this. Would it not be
</I>&gt;&gt;<i> sensible for the server to have to serve some default if the headers
</I>&gt;&gt;<i> aren't there anyway
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Maybe it would be _sensible_, but would people do it?  I suggest trying to
</I>&gt;<i> browse the web with an empty UA string and seeing what fraction of servers
</I>&gt;<i> serve &quot;some default&quot; for that as opposed to the fraction that completely
</I>&gt;<i> break and return error pages for everything or return severely malformed
</I>&gt;<i> pages...  Last I tried this, double-digit percentages of the sites I
</I>&gt;<i> visited broke.
</I>

Point taken. Though it irks me no end that various technologies get canned
because of how inept people can mis-use them. I'd rather see those inept
people shoot themselves in the foot and pay the price. Personal philosophy
there.


&gt;<i>  In what circumstances might this cause breakages?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Whenever the server developer makes dumb assumptions.  Which they do all
</I>&gt;<i> the time.  _All_ the time.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  And how could it possibly lock out any devices?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> See my earlier example of a &quot;desktop-class&quot; touchscreen system that's
</I>&gt;<i> shipping right now.  Every single concrete proposal I've seen so far in
</I>&gt;<i> this thread would lock it out of actually using its touch capabilities on
</I>&gt;<i> sites that would support such capabilities fine on other devices.
</I>

I don't think I have enough knowledge of the case in point to argue either
way, but I'm confused how this would be the case at the moment.


&gt;<i>  This is a progressive-enhancement type tech, not a &quot;if you don't have the
</I>&gt;&gt;<i> ability
</I>&gt;&gt;<i> to notify the server you can't get any info&quot; type tech. Surely?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Surely not, in my experience with other things servers look for.
</I>

Fair enough :s


&gt;<i>     Now obviously it's also good for the web in various ways, if people
</I>&gt;&gt;<i>    use the information &quot;correctly&quot; and such.  My faith in this is
</I>&gt;&gt;<i>    somewhat tarnished by the fact that every concrete proposal for
</I>&gt;&gt;<i>    using it that I've seen seems to be broken by design, which means
</I>&gt;&gt;<i>    that chances of anyone using it &quot;correctly&quot; are vanishingly small.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can you tell us how they're broken so we can fix it?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Did you read my earlier mails with examples of devices that are shipping
</I>&gt;<i> right now that violate the various assumptions people trying to create
</I>&gt;<i> these &quot;device class&quot; bins are making?
</I>

I don't believe we should ever use &quot;classes&quot; of device. We've been down
that route, it's a fail in and of itself. We should be using actual data,
not assumed data based on some other data.


&gt;<i>  Absolutely agree, but I don't see how a server requesting and then
</I>&gt;&gt;<i> getting a header is rocket sceince
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The rocket science lies in deciding what to do with the information.
</I>

Ugh, I wrote 'rocket science'. Sorry.


&gt;<i>  Especially if the current solution
</I>&gt;&gt;<i> is to connect to some massive device database to query potential points
</I>&gt;&gt;<i> of reference and then act accordingly.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Which is just as broken, yes.  We've run into problems with the breakage
</I>&gt;<i> of this database a good bit at Mozilla.
</I>

Cool so we agree databases are a bad solution and we should aim for better
:<i>)
</I>

&gt;<i>  I can see your point, but there isn't any impact for users unless the
</I>&gt;&gt;<i> author has &quot;opted in&quot; and requested headers. Right? The defaults are
</I>&gt;&gt;<i> &quot;server gets no headers&quot;. Put it another way - how can an author tailor
</I>&gt;&gt;<i> things for a user if the user isn't able to report anything to the
</I>&gt;&gt;<i> server?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I didn't say the user shouldn't report anything.  I said that the
</I>&gt;<i> particular things people have asked to be reported so far (screen size,
</I>&gt;<i> &quot;device class&quot;) are broken by design.
</I>

Absolutely agree on &quot;device class&quot;. I don't understand why screen-size is
broken. Report back the maximum screen size used by the device at the
current moment. This allows us to plug iPads into TVs and have it all still
work.


&gt;<i>     Yes, but &quot;size&quot; and &quot;performance&quot; are not necessarily a function of
</I>&gt;&gt;<i>    the actual device.  They can be a function of the device, the
</I>&gt;&gt;<i>    network, the currently attached peripherals, etc.  Importantly, they
</I>&gt;&gt;<i>    are not time-invariant.  The question is what we can do about that...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Agreed - which is *exactly* why I think headers are the only viable
</I>&gt;&gt;<i> solution.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My point is that we should perhaps be thinking about how to make things
</I>&gt;<i> work when these device characteristics change while a page is loaded.
</I>&gt;<i> Headers do NOT allow you to handle that, for obvious reasons.
</I>

Ah, loaded as in mid-stream? Agreed, it can't. But then how much is likely
to change in the few fractions of seconds it takes to complete transmission
of one resource? Vs what can change in the comparative eons between
resource requests? Surely per-resource-request is granular enough?


&gt;<i>  The other solutions operate by detecting the device and making
</I>&gt;&gt;<i> assumptions about those variables based on the device specifications.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Assuming you can detect the device at all, which I think servers should
</I>&gt;<i> not be able to do.
</I>

Ah, but they do. All the time. They see a UA string and guess. Badly.
Catastrophically badly. Then they take their poor guess and extrapolate the
info they *actually* wanted to know from it. The fact is it's being done,
and it will contiinue to be done until there's a more reliable solution. If
we supply headers, we do NOT detect the device. We supply the exact
information the server is after. connection speed. etc.


&gt;<i>  Exactly! Hence the need for the browser to report *as a header* with
</I>&gt;&gt;<i> each request what the current values are for those variables.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> See above.  I don't see how just putting it in the headers helps.  It just
</I>&gt;<i> encourages websites to assume that the information won't be changing after
</I>&gt;<i> the request is done.
</I>

How does it encourage website that? That would involve using sessions to
track the user and know which request had what data the last time. And
manually writing some session tracking to do that. I see this as a per
request thing. New data every time.


&gt;<i> -Boris
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077007.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
	<LI>Next message: <A HREF="077013.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77011">[ date ]</a>
              <a href="thread.html#77011">[ thread ]</a>
              <a href="subject.html#77011">[ subject ]</a>
              <a href="author.html#77011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
