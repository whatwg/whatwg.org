<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] RWD Heaven: if browsers reported device capabilities in a request header
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RWD%20Heaven%3A%20if%20browsers%20reported%20device%20capabilities%0A%20in%20a%20request%20header&In-Reply-To=%3CCAFOqB5x5X%3DkcJtFq%3D5LQmbmeV-9pmbpDwc%3D5am%3DQN%2B04mt7ujw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077019.html">
   <LINK REL="Next"  HREF="077022.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] RWD Heaven: if browsers reported device capabilities in a request header</H1>
<!--htdig_noindex-->
    <B>Tim Kadlec</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RWD%20Heaven%3A%20if%20browsers%20reported%20device%20capabilities%0A%20in%20a%20request%20header&In-Reply-To=%3CCAFOqB5x5X%3DkcJtFq%3D5LQmbmeV-9pmbpDwc%3D5am%3DQN%2B04mt7ujw%40mail.gmail.com%3E"
       TITLE="[whatwg] RWD Heaven: if browsers reported device capabilities in a request header">tim at timkadlec.com
       </A><BR>
    <I>Tue Feb  7 13:30:03 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077019.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
        <LI>Next message: <A HREF="077022.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77021">[ date ]</a>
              <a href="thread.html#77021">[ thread ]</a>
              <a href="subject.html#77021">[ subject ]</a>
              <a href="author.html#77021">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> It's only an example. My point is that the server ought to be able to
</I>&gt;<i> ask the client for data about *any given property* and if the client
</I>&gt;<i> is capable it should send a header back. Which allows the server to
</I>&gt;<i> then do whatever it needs with the information.
</I>

This approach makes sense to me as well. Client-side feature detection is
simply not capable of solving everything.

Something like this would also be very future friendly. We don't know what
properties are going to be important a few years down the line. If this
model is implemented carefully, it would be easy to add new properties to
the mix.

- Tim

On Tue, Feb 7, 2012 at 3:21 PM, Matthew Wilcox &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mail at matthewwilcox.com</A>&gt;wrote:

&gt;<i> I think somehow lines are getting crossed and misunderstandings are
</I>&gt;<i> happening.
</I>&gt;<i>
</I>&gt;<i> For what it's worth, everyone seems to be getting hung up on screen size.
</I>&gt;<i>
</I>&gt;<i> It's only an example. My point is that the server ought to be able to
</I>&gt;<i> ask the client for data about *any given property* and if the client
</I>&gt;<i> is capable it should send a header back. Which allows the server to
</I>&gt;<i> then do whatever it needs with the information. Screen size is one
</I>&gt;<i> example. Bandwidth is another.
</I>&gt;<i>
</I>&gt;<i> It's the *communication of capabilities* that interests me at this
</I>&gt;<i> point, The allowing of an interrogation of possibliities and adaptive
</I>&gt;<i> responses.
</I>&gt;<i>
</I>&gt;<i> Whether screen-size is a good idea or not comes after.
</I>&gt;<i>
</I>&gt;<i> And, screen size is useful when understood to mean &quot;CSS Pixels&quot;.
</I>&gt;<i> Because that's what a browser renders. If a device has a screen 1900px
</I>&gt;<i> CSS px wide, you know you never need send anything larger.
</I>&gt;<i>
</I>&gt;<i> On 7 February 2012 20:24, Charles Pritchard &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chuck at jumis.com</A>&gt; wrote:
</I>&gt;<i> &gt; On 2/7/2012 11:52 AM, Matthew Wilcox wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 7 February 2012 17:59, Boris Zbarsky&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt;  wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; On 2/7/12 12:32 PM, Matthew Wilcox wrote:
</I>&gt;<i> &gt;&gt;&gt;  In what circumstances might this cause breakages?
</I>&gt;<i> &gt;&gt;&gt; Whenever the server developer makes dumb assumptions.  Which they do
</I>&gt;<i> all
</I>&gt;<i> &gt;&gt;&gt; the time.  _All_ the time.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  And how could it possibly lock out any devices?
</I>&gt;<i> &gt;&gt;&gt; See my earlier example of a &quot;desktop-class&quot; touchscreen system that's
</I>&gt;<i> &gt;&gt;&gt; shipping right now.  Every single concrete proposal I've seen so far in
</I>&gt;<i> &gt;&gt;&gt; this thread would lock it out of actually using its touch capabilities
</I>&gt;<i> on
</I>&gt;<i> &gt;&gt;&gt; sites that would support such capabilities fine on other devices.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I don't think I have enough knowledge of the case in point to argue
</I>&gt;<i> either
</I>&gt;<i> &gt;&gt; way, but I'm confused how this would be the case at the moment.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We already see some frustrating lockout with websites that detect mobile
</I>&gt;<i> &gt; user agents. They forward the agent to their special mobile website,
</I>&gt;<i> where
</I>&gt;<i> &gt; they will often popup an alert (&quot;Please download our APP!!!&quot;) every
</I>&gt;<i> single
</I>&gt;<i> &gt; time you visit the page. Their mobile site is frequently crippled,
</I>&gt;<i> limited
</I>&gt;<i> &gt; to only a few options, and the mobile browser is often capable of viewing
</I>&gt;<i> &gt; the full desktop site at a reasonable screen width. Now, as sites mature,
</I>&gt;<i> &gt; they have figured out to include a &quot;Desktop Version&quot; toggle, which is a
</I>&gt;<i> big
</I>&gt;<i> &gt; help. It's still frustrating that there are a few steps in between.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; These sites make an assumption, that the screen size has something to do
</I>&gt;<i> &gt; with device capability. The screen size has to do with how much
</I>&gt;<i> information
</I>&gt;<i> &gt; the viewer has decided to consume at one time.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm frequently using browser zoom (though I use OS zoom as well), and I
</I>&gt;<i> &gt; don't need to be forwarded to the &quot;mobile site&quot; while I'm browsing on my
</I>&gt;<i> &gt; desktop just because I'm not wearing my glasses. That said, I do try to
</I>&gt;<i> work
</I>&gt;<i> &gt; with my applications so that the &quot;mobile&quot; interface is an interface that
</I>&gt;<i> I
</I>&gt;<i> &gt; would like to use on my desktop when I'm zoomed in. That middle ground
</I>&gt;<i> works
</I>&gt;<i> &gt; well for me.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;&gt;     Now obviously it's also good for the web in various ways, if people
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;    use the information &quot;correctly&quot; and such.  My faith in this is
</I>&gt;<i> &gt;&gt;&gt;&gt;    somewhat tarnished by the fact that every concrete proposal for
</I>&gt;<i> &gt;&gt;&gt;&gt;    using it that I've seen seems to be broken by design, which means
</I>&gt;<i> &gt;&gt;&gt;&gt;    that chances of anyone using it &quot;correctly&quot; are vanishingly small.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Can you tell us how they're broken so we can fix it?
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Did you read my earlier mails with examples of devices that are
</I>&gt;<i> shipping
</I>&gt;<i> &gt;&gt;&gt; right now that violate the various assumptions people trying to create
</I>&gt;<i> &gt;&gt;&gt; these &quot;device class&quot; bins are making?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I don't believe we should ever use &quot;classes&quot; of device. We've been down
</I>&gt;<i> &gt;&gt; that route, it's a fail in and of itself. We should be using actual
</I>&gt;<i> data,
</I>&gt;<i> &gt;&gt; not assumed data based on some other data.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We have abstract means of accessibility. WCAG2 explores that.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We have classes of how data is accessed. It should be accessible from a
</I>&gt;<i> &gt; keyboard only device.
</I>&gt;<i> &gt; With touch screens, the world has been exploring more, the concept of
</I>&gt;<i> &gt; accessible via pointer only (though virtual keyboards help).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Keep in mind that keyboard and pointer are also two abstractions, not
</I>&gt;<i> &gt; physical objects.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There's a third class of accessibility, and that's programmatic access.
</I>&gt;<i> &gt; Ensuring that the DOM has sufficient information that third-party
</I>&gt;<i> &gt; software can use. This is frequently used for eyes-free interfaces, but
</I>&gt;<i> it's
</I>&gt;<i> &gt; handy for many other targets.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There's no assumption of a screen being in place, nor an assumption of
</I>&gt;<i> any
</I>&gt;<i> &gt; particular physical interface.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;&gt;  Especially if the current solution
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; is to connect to some massive device database to query potential
</I>&gt;<i> points
</I>&gt;<i> &gt;&gt;&gt;&gt; of reference and then act accordingly.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Which is just as broken, yes.  We've run into problems with the
</I>&gt;<i> breakage
</I>&gt;<i> &gt;&gt;&gt; of this database a good bit at Mozilla.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Cool so we agree databases are a bad solution and we should aim for
</I>&gt;<i> better
</I>&gt;<i> &gt;&gt; :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Databases are a practical solution for special situations, such as Boris
</I>&gt;<i> &gt; brought up, targeting old and somewhat broken browser implementations.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This part of the thread reminds me of the other thing we did with
</I>&gt;<i> &gt; server-side packaging -- a bunch of polyfill code. If the user string
</I>&gt;<i> &gt; matches X, then we need to include a bunch of &quot;compatibility&quot; libraries.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It's fairly accepted that feature testing works better. At least in
</I>&gt;<i> feature
</I>&gt;<i> &gt; testing, when the compatibility is not available, there's a chance to
</I>&gt;<i> show
</I>&gt;<i> &gt; some kind of alternate item. People can get lazy on this as well, writing
</I>&gt;<i> &gt; things like &quot;You are not supported, go away&quot; in fallback content. But
</I>&gt;<i> that's
</I>&gt;<i> &gt; just poor practice. There's every reason to think a manual, documentation
</I>&gt;<i> &gt; and other media could take its place.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Absolutely agree on &quot;device class&quot;. I don't understand why screen-size
</I>&gt;<i> is
</I>&gt;<i> &gt;&gt; broken. Report back the maximum screen size used by the device at the
</I>&gt;<i> &gt;&gt; current moment. This allows us to plug iPads into TVs and have it all
</I>&gt;<i> &gt;&gt; still
</I>&gt;<i> &gt;&gt; work.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Screen size is not and should not be a physical reflection of the viewing
</I>&gt;<i> &gt; device.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The user may be using an eyes-free interface; they may be using browser
</I>&gt;<i> &gt; zoom, they may be 8 feet from the screen or only 18 inches.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The reason TVs don't work nicely with many websites is because their
</I>&gt;<i> authors
</I>&gt;<i> &gt; failed to go through basic WCAG checklists.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; For instance, hulu.com is a very popular site meant for watching TV.
</I>&gt;<i>  They
</I>&gt;<i> &gt; have not put in the basic work of supporting 200% zoom.
</I>&gt;<i> &gt; This is not an issue of money, or technology. They simply haven't
</I>&gt;<i> attempted
</I>&gt;<i> &gt; the work. It's a failure of internal standards within their web team.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;&gt;  The other solutions operate by detecting the device and making
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; assumptions about those variables based on the device specifications.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Assuming you can detect the device at all, which I think servers should
</I>&gt;<i> &gt;&gt;&gt; not be able to do.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Ah, but they do. All the time. They see a UA string and guess. Badly.
</I>&gt;<i> &gt;&gt; Catastrophically badly. Then they take their poor guess and extrapolate
</I>&gt;<i> &gt;&gt; the
</I>&gt;<i> &gt;&gt; info they *actually* wanted to know from it. The fact is it's being
</I>&gt;<i> done,
</I>&gt;<i> &gt;&gt; and it will contiinue to be done until there's a more reliable solution.
</I>&gt;<i> &gt;&gt; If
</I>&gt;<i> &gt;&gt; we supply headers, we do NOT detect the device. We supply the exact
</I>&gt;<i> &gt;&gt; information the server is after. connection speed. etc.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Authors will continue to make bad mistakes. They are intentionally making
</I>&gt;<i> &gt; some of those bad mistakes out of bad practice.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Instead of using a Database that's 95% accurate based on user agent, they
</I>&gt;<i> &gt; could see headers 95% of the time, maybe boosting the accuracy over the
</I>&gt;<i> long
</I>&gt;<i> &gt; term.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; They're still going to make bad mistakes. It's a free web out there. And
</I>&gt;<i> &gt; every now and then, a big corporation, like Target, gets sued, when their
</I>&gt;<i> &gt; mistakes are egregious and they have legal responsibilities not to make
</I>&gt;<i> &gt; them.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I know I'm pushing back pretty hard against this idea that screen size is
</I>&gt;<i> &gt; something the server is going to negotiate. As I do that, it occurs to
</I>&gt;<i> me, I
</I>&gt;<i> &gt; don't have an issue with supplying headers informing the server that the
</I>&gt;<i> &gt; user is on a metered connection. Sure, an overcapacity cellphone network
</I>&gt;<i> &gt; might just slap that header on all requests. That's ok.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So, if you want to have Bandwidth-Service: metered; something along those
</I>&gt;<i> &gt; lines, that'd be just fine with me.
</I>&gt;<i> &gt; Adding headers like Max-Screen-Size: 1024x780 as a standard practice is
</I>&gt;<i> not
</I>&gt;<i> &gt; something I'm ok with. It's fine for internal use (slap it in your XHR
</I>&gt;<i> &gt; requests), but not as a general web browser thing.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -Charles
</I>&gt;<i>
</I>


-- 
Take care,
Tim

---------------------------------------------
<A HREF="http://twitter.com/tkadlec">http://twitter.com/tkadlec</A>
<A HREF="http://timkadlec.com">http://timkadlec.com</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077019.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
	<LI>Next message: <A HREF="077022.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77021">[ date ]</a>
              <a href="thread.html#77021">[ thread ]</a>
              <a href="subject.html#77021">[ subject ]</a>
              <a href="author.html#77021">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
