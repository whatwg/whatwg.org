<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] should we add beforeload/afterload events to the web platform?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20should%20we%20add%20beforeload/afterload%20events%20to%20the%20web%0A%20platform%3F&In-Reply-To=%3CPine.LNX.4.64.1202032031060.13116%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="076891.html">
   <LINK REL="Next"  HREF="076894.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] should we add beforeload/afterload events to the web platform?</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20should%20we%20add%20beforeload/afterload%20events%20to%20the%20web%0A%20platform%3F&In-Reply-To=%3CPine.LNX.4.64.1202032031060.13116%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] should we add beforeload/afterload events to the web platform?">ian at hixie.ch
       </A><BR>
    <I>Fri Feb  3 12:38:56 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="076891.html">[whatwg] should we add beforeload/afterload events to the web platform?
</A></li>
        <LI>Next message: <A HREF="076894.html">[whatwg] should we add beforeload/afterload events to the web platform?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76893">[ date ]</a>
              <a href="thread.html#76893">[ thread ]</a>
              <a href="subject.html#76893">[ subject ]</a>
              <a href="author.html#76893">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, 3 Feb 2012, Boris Zbarsky wrote:
&gt;<i> On 2/3/12 3:07 PM, Ian Hickson wrote:
</I>&gt;<i> &gt; &gt; OK.  I have no serious problem with a &quot;beforeprocess&quot; event that 
</I>&gt;<i> &gt; &gt; fires before processing the response, esp. if &quot;processing&quot; is 
</I>&gt;<i> &gt; &gt; defined in a page-visible way (so e.g. you could still compile a 
</I>&gt;<i> &gt; &gt; script in the background before firing &quot;beforeprocess&quot;; you just 
</I>&gt;<i> &gt; &gt; couldn't run it).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I don't have an objection to adding a cancelable bubbling event that 
</I>&gt;<i> &gt; fires synchronously as part of the &quot;execute a script block&quot; algorithm, 
</I>&gt;<i> &gt; between the current steps 1 and 2 of &quot;if the load was successful&quot;, 
</I>&gt;<i> &gt; which gets the URL of the script, targetted at the script, which if 
</I>&gt;<i> &gt; canceled cancels the execution of the script.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Does any browser have an event like that already? If not, any opinions 
</I>&gt;<i> &gt; on an event name?&lt;script onbeforerun=&quot;&quot;&gt;?
</I>&gt;<i> 
</I>&gt;<i> Gecko has a &quot;beforescriptexecute&quot; event.  It's a simple event targeted 
</I>&gt;<i> at the element; there's no reason to include the URI, since that can be 
</I>&gt;<i> gotten off the element.  I believe calling preventDefault() on it will 
</I>&gt;<i> prevent the script from executing.
</I>
Ok, I've added that to the spec.


&gt;<i> I also believe that we have proposed this for standardization in the 
</I>&gt;<i> past, though it seems to have fallen through the cracks a bit...
</I>
I couldn't find any mention of it in the WHATWG archives or Bugzilla, 
though I did find an e-mail from sicking saying he'd proposed it to the 
WHATWG list. :-(


&gt;<i> But note that this is script-specific; I believe that content-blocker 
</I>&gt;<i> use cases would want this for images, stylesheets, etc.
</I>
As noted in the previous e-mail, it's not clear that the content-blocker 
use cases are valid. The use case that is compelling for beforescriptexecute
is regarding sites who are trying to address mixed content vulnerabilities 
progressively and need to closer control over external script execution.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="076891.html">[whatwg] should we add beforeload/afterload events to the web platform?
</A></li>
	<LI>Next message: <A HREF="076894.html">[whatwg] should we add beforeload/afterload events to the web platform?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76893">[ date ]</a>
              <a href="thread.html#76893">[ thread ]</a>
              <a href="subject.html#76893">[ subject ]</a>
              <a href="author.html#76893">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
