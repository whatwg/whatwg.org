<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] RWD Heaven: if browsers reported device capabilities in a request header
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RWD%20Heaven%3A%20if%20browsers%20reported%20device%20capabilities%0A%20in%20a%20request%20header&In-Reply-To=%3Cop.v86m72h6te2ec8%40aimac.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034641.html">
   <LINK REL="Next"  HREF="034640.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] RWD Heaven: if browsers reported device capabilities in a request header</H1>
<!--htdig_noindex-->
    <B>Kornel Lesi&#324;ski</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20RWD%20Heaven%3A%20if%20browsers%20reported%20device%20capabilities%0A%20in%20a%20request%20header&In-Reply-To=%3Cop.v86m72h6te2ec8%40aimac.local%3E"
       TITLE="[whatwg] RWD Heaven: if browsers reported device capabilities in a request header">kornel at geekhood.net
       </A><BR>
    <I>Sat Feb  4 17:46:40 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="034641.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
        <LI>Next message: <A HREF="034640.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34639">[ date ]</a>
              <a href="thread.html#34639">[ thread ]</a>
              <a href="subject.html#34639">[ subject ]</a>
              <a href="author.html#34639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 04 Feb 2012 19:28:17 -0000, irakli &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">irakli at gmail.com</A>&gt; wrote:

&gt;<i> The most optimal way to handle responsive images and optimize CSS/JS  
</I>&gt;<i> would be on the server-side. However, server-side does not have enough
</I>&gt;<i> information about device capabilities, resulting in emergence of all  
</I>&gt;<i> kinds of cruft-y solutions (e.g. using &lt;div&gt;'s for &lt;img&gt; tags etc.) that  
</I>&gt;<i> should
</I>&gt;<i> not exist.
</I>
There are many factors that influence selection of images, and some of  
them (like zoom, available memory, screen/print media) can change after  
images are downloaded. Some factors don't depend on hardware capabilities,  
e.g. user may be roaming or exceeded bandwith allowance and thus strongly  
prefer small images even on high-end hardware.

Instead of sending a lot of information to the server, I think it would be  
better if websites declared what kinds of images are available and let  
browsers choose.

I think it's more likely that the few browser vendors will get client-side  
image selection right, than majority of websites will add good server-side  
logic that takes into account all factors. Look how hard it is for sites  
to get authenticated file downloads right &#8212; most of them use grotesque  
scripts that completely break all caching, resuming, MIME types and often  
mangle filenames. I'd be surprised if image selection scripts were any  
better. Even with a good script, it may be hard to get negotiated images  
properly served/cached via CDNs and proxies. Last time I checked presence  
of Vary header made responses non-cacheable in all major browsers, and  
that can be worse then serving wrong size.

If servers won't take into account all factors properly, then browsers  
will start lying in information they send to the server to force desired  
behavior, and capabilities header will degenerate like the User-Agent did.  
I can imagine all browsers reporting 320px to get 160dpi images, 960px to  
get 300dpi, and 1920px to get 100dpi, regardless of actual screen size.  
That starts happening with &lt;meta viewport&gt; and screen.width already.


OTOH giving browsers ability to select image by DPI/file size at any time  
opens up interesting possibilities, e.g. browser could load low-DPI  
versions of images necessary for initial layout of the page to show the  
complete page sooner (especially that mobile browsers show page zoomed out  
initially), and then replace images with high-DPI versions if  
bandwith/memory/user preference allows that or when user zooms in selected  
portion of the page.

On a page with lots of large images (a gallery or photoblog) browser may  
be forced to load low-DPI versions of images, even if it had enough memory  
to display each image _individually_ in high DPI, so the decision cannot  
even be made purely on per-request basis.

Given all the complexity involved, and potential for innovation in the  
browsers, I'd rather see a declarative solution in the markup (and not  
necessarily via a CSS media query, as this still keeps responsibility with  
developers, not browsers).

-- 
regards, Kornel Lesi&#324;ski
</PRE>





<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034641.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
	<LI>Next message: <A HREF="034640.html">[whatwg] RWD Heaven: if browsers reported device capabilities in a request header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34639">[ date ]</a>
              <a href="thread.html#34639">[ thread ]</a>
              <a href="subject.html#34639">[ subject ]</a>
              <a href="author.html#34639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
