<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [MIME Sniffing] Editorial feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BMIME%20Sniffing%5D%20Editorial%20feedback&In-Reply-To=%3CCAACrNNcnEOxP65gW0Yy-TEyiX8jYrqWop68rdBoLGdryQt4crQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033327.html">
   <LINK REL="Next"  HREF="075617.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [MIME Sniffing] Editorial feedback</H1>
<!--htdig_noindex-->
    <B>timeless</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BMIME%20Sniffing%5D%20Editorial%20feedback&In-Reply-To=%3CCAACrNNcnEOxP65gW0Yy-TEyiX8jYrqWop68rdBoLGdryQt4crQ%40mail.gmail.com%3E"
       TITLE="[whatwg] [MIME Sniffing] Editorial feedback">timeless at gmail.com
       </A><BR>
    <I>Mon Sep 26 14:27:17 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="033327.html">[whatwg] focusability of visibility:hidden and display:none elements WAS: Autofocus readonly Input Elements
</A></li>
        <LI>Next message: <A HREF="075617.html">[whatwg] [MIME Sniffing] Editorial feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33328">[ date ]</a>
              <a href="thread.html#33328">[ thread ]</a>
              <a href="subject.html#33328">[ subject ]</a>
              <a href="author.html#33328">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> Otherwise, if the octets in s starting at pos match any of the sequences of octets in the first column of the following table, then the user agent MUST follow the steps given in the corresponding cell in the second column of the same row. |
</I>
What's the stray `|` character at the end of that doing?

The ToC feels double spaced, is that normal?

Would you mind quoting your attributes in source? Things like
class=no-num or href=#web-data scare me. It's easier if you just quote
all attributes :)

Also, I generally recommend `&lt;span ...&gt;x&lt;/span&gt; ` over `&lt;span ...&gt;x
&lt;/span&gt;` &lt;- i.e. trailing space outside of span (see toc)

&gt;<i> &lt;p&gt;Many web servers supply incorrect Content-Type header fields with their HTTP
</I>
Can you mark up `Content-Type` in something which results in roughly
&quot;typewriter&quot; font?

s/user agents/User Agents/ as in:
&gt;<i> responses.  In order to be compatible with these servers, user agents consider
</I>
&gt;<i> Without a clear specification of how to &quot;sniff&quot; the media type, each user agent implementor was forced to reverse engineer the behavior of the other user agents and to develop
</I>
s/the other/other/ -- there are some UAs who were ignored when the
sniffing of a given UA was developed :)

&gt;<i> their own algorithm
</I>
I'm not sure if `algorithm` here belongs in singular or plural, I got
distracted :)

&gt;<i> an HTTP response to be interpreted as one media type but some user agents interpret the responses as another media type.
</I>
s/responses/response/ (agreement with first part)

&gt;<i> However, if a user agent does interpret a low-privilege media type, such as image/gif, as a high-privilege media type, such as text/html, the user agent has created a privilege escalation vulnerability in the server.
</I>
s/, the user agent/, then the user agent/



I believe abarth has addressed the above.

&gt;<i> This document describes a content sniffing algorithm that carefully balances the compatibility needs of user agent implementors with the security constraints.
</I>
`the security constraints` is problematic, I don't think `the`
references anything
so either drop `the`, or provide a reference :/

&gt;<i> and metrics collected from implementations deployed to a sizable number of users .
</I>
s/ ././

&gt;<i> (such as &quot;strip any leading space characters&quot; or &quot;return false and abort these steps&quot;) are to be interpreted with the meaning of the key word (&quot;MUST&quot;, &quot;SHOULD&quot;, &quot;MAY&quot;, etc)
</I>
s/etc/etc./g

&quot;official-type&quot; should probably be given some styling -- preferably
not the same styling as &quot;Content-Type&quot;

&gt;<i> (Such messages are invalid according to RFC2616.
</I>
s/./.)/

The rfcs should be href references of some sort :)

&gt;<i> For octets received via HTTP, the Content-Type HTTP header field, if present, indicates the media type. Let the official-type be the media type indicted by the HTTP Content-Type header field, if present. If the Content-Type header field is absent or if its value cannot be interpreted as a media type (e.g. because its value doesn't contain a U+002F SOLIDUS ('/') character), then there is no official-type. (Such messages are invalid according to RFC2616.
</I>
&gt;<i> If an HTTP response contains multiple Content-Type header fields, the User Agent MUST use the textually last Content-Type header field to the official-type. For example, if the last Content-Type header field contains the value &quot;foo&quot;, then there is no official media type because &quot;foo&quot; cannot be interpreted as a media type (even if the HTTP response contains another Content-Type header field that could be interpreted as a media type).
</I>
The for example part here applies to the previous paragraph, the
sentence needs to be moved to the paragraph before the instruction for
multiple header fields.

&gt;<i> FTP RFC0959
</I>
Is there a reason for the leading 0?

&gt;<i> Comparisons between media types, as defined by MIME specifications, are done in an ASCII case-insensitive manner. [RFC2046]
</I>
You need to somehow note that this is merely a note about mime
equivalence and doesn't relate to how the spec works.

&gt;<i> If the official-type ends in &quot;+xml&quot;, or if it is either &quot;text/xml&quot; or &quot;application/xml&quot;, then let the sniffed-type be the official-type and abort these steps.
</I>
Please mark up `sniffed-type` and `official-type`

&gt;<i> If the official-type is an image type supported by the User Agent (e.g., &quot;image/png&quot;, &quot;image/gif&quot;, &quot;image/jpeg&quot;, etc), then jump to the &quot;images&quot; section below.
</I>
s/etc//

&gt;<i> If none of the first n octets are binary data octets then let the sniffed-type be &quot;text/plain&quot; and abort these steps.
</I>&gt;<i> Binary Data Byte Ranges
</I>
You don't actually define a `binary data octet` as any item within the
ranges defined in the `binary data byte ranges`.

&gt;<i> If the first octets match one of the octet sequences in the &quot;pattern&quot; column of the table in the &quot;unknown type&quot; section below, ignoring any rows whose cell in the &quot;security&quot; column says &quot;scriptable&quot; (or &quot;n/a&quot;), then let the sniffed-type be the type given in the corresponding cell in the &quot;sniffed type&quot; column on that row and abort these steps.
</I>
If you could make `&quot;unknown type&quot; section` a link to the section, that
would be helpful.

&gt;<i> For each row in the table below:
</I>&gt;<i> If the row has no &quot;WS&quot; octets:
</I>
I know that &quot;WS&quot; appears in the table below, but it hasn't been
defined yet, and I don't want to guess what it means (whitespace?) --
I guessed wrong for the other one.

&gt;<i> If the row has a &quot;WS&quot; octet or a &quot;_&gt;&quot; octet:
</I>
&gt;<i> &quot;WS&quot; means &quot;whitespace&quot;, and allows insignificant whitespace to be skipped when sniffing for a type signature.
</I>
Oh, so that's where you hid the definition -- way too late :)

&gt;<i> &quot;_&gt;&quot; means &quot;space-or-bracket&quot;, and allows HTML tag names to terminate with either a space or a greater than sign.
</I>
Oh _ doesn't mean underscore

Please put those definitions before their use, not way below their use :(

&gt;<i> If the octets of the masked-data matches the given pattern octets exactly, then let the sniffed-type be the type given in the cell of the third column in that row and abort these steps.
</I>
s/matches/match/

&gt;<i> LOOP: If index-stream points beyond the end of the octet stream, then this row doesn't match and skip this row.
</I>
Please style `LOOP`

&gt;<i> If the index-pattern-th octet of the pattern is a normal hexadecimal octet and not a &quot;WS&quot; octet or a &quot;_&gt;&quot; octet:
</I>
s/or a/nor a/
s/not/neither/


&gt;<i> If the index-stream-th octet of the stream is one of 0x09 (ASCII TAB), 0x0A (ASCII LF), 0x0C (ASCII FF), 0x0D (ASCII CR), or 0x20 (ASCII space), then increment only the index-stream to the next octet in the octet stream.
</I>
If you could style the 0xXX items in something &lt;tt&gt;-ish, that'd be appreciated.
... And if you could style the names (ASCII TAB, etc.) in something,
that'd also be appreciated.

&gt;<i> If the first n octets match the signature for MP4 (as define in ), then let the sniffed-type be video/mp4 and abort these steps.
</I>
s/define/defined/

-- The markup you're using failed to generate a visible-reference,
could you get the tool to generate an XXX when it fails? :)

&gt;<i> FF FF FF FF FF FF WS 3C 3f 78 6d 6c text/xml Scriptable &lt;?xml (Note the case sensitivity and lack of trailing _&gt;)
</I>
s/sensitivity/sensitivity [mask = FF instead of DF]/

&gt;<i> A JPEG SOI marker followed by a octet of another marker.
</I>
s/a octet/an octet/

-- the table doesn't currently handle .SWF; in the past, that has been a problem
<A HREF="http://www.digitalpreservation.gov/formats/fdd/fdd000130.shtml">http://www.digitalpreservation.gov/formats/fdd/fdd000130.shtml</A>


&gt;<i> If n is less than 4, then the sequence does not match the signature for MP4 and abort these steps.
</I>
`and` doesn't work; s/ and/;/ ?

In all previous cases, the form was `let foo and abort these steps`;
here it's `then &lt;statement of truth&gt; and`.

The fix is probably to move to &quot;return TRUTH/FALSE value and abort
these steps&quot; (or let state-determined-truth-value-be TRUTH/FASLE value
and ...).

&gt;<i> For each I from 2 to box-size/4 - 1 (inclusive):
</I>
If you could put `box-size/4 - 1` into some markup to indicate that
it's a math section, that'd be helpful.

&gt;<i> If octets 4*i through 4*i + 2 (inclusive) of the sequence are 0x6D 0x70 0x34 (the ASCII string &quot;mp4&quot;), then the sequence does match the signature for MP4 and abort these steps.
</I>
And here for `4*i` and `4*i + 2`

I think you need s/If octets/If any octets/, otherwise, it's ambiguous
between `any` and `all`.

&gt;<i> 7 Images
</I>...
&gt;<i>     Otherwise, let the sniffed-type be the official-type and abort these steps.
</I>
I'd rather otherwise be step 3 instead of part of the bulleted list
inside step 2

&gt;<i> If the octets with positions pos to pos+2 in s are exactly equal to 0x2D, 0x2D, 0x3E respectively (ASCII for &quot;--&gt;&quot;), then increase pos by 3 and jump back to the previous step (the step labeled loop start) in the overall algorithm in this section.
</I>
`loop start` should be a link to the LOOP label and preferably have
the same case as the LOOP label.

&gt;<i> Return to step 2 in these substeps.
</I>
It'd be nice if this was a link to an anchor in the right part of the steps.

&gt;<i> If RDF-flag is 1 and RSS-flag is 1, then let the sniffed-type be &quot;application/rss+xml&quot; and abort these steps.
</I>
s/and/or/ ??
</PRE>























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033327.html">[whatwg] focusability of visibility:hidden and display:none elements WAS: Autofocus readonly Input Elements
</A></li>
	<LI>Next message: <A HREF="075617.html">[whatwg] [MIME Sniffing] Editorial feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33328">[ date ]</a>
              <a href="thread.html#33328">[ thread ]</a>
              <a href="subject.html#33328">[ subject ]</a>
              <a href="author.html#33328">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
