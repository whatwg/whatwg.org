<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fixing undo on the Web - UndoManager and Transaction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fixing%20undo%20on%20the%20Web%20-%20UndoManager%20and%20Transaction&In-Reply-To=%3CCA%2Bc2ei__mVd%2BKUVaHOqgz6te%2B70PA6M6vYKeteqYr4fd-gFHow%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033208.html">
   <LINK REL="Next"  HREF="033255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fixing undo on the Web - UndoManager and Transaction</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fixing%20undo%20on%20the%20Web%20-%20UndoManager%20and%20Transaction&In-Reply-To=%3CCA%2Bc2ei__mVd%2BKUVaHOqgz6te%2B70PA6M6vYKeteqYr4fd-gFHow%40mail.gmail.com%3E"
       TITLE="[whatwg] Fixing undo on the Web - UndoManager and Transaction">jonas at sicking.cc
       </A><BR>
    <I>Thu Sep 15 11:17:59 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="033208.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
        <LI>Next message: <A HREF="033255.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33230">[ date ]</a>
              <a href="thread.html#33230">[ thread ]</a>
              <a href="subject.html#33230">[ subject ]</a>
              <a href="author.html#33230">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Sep 12, 2011 at 6:06 PM, Ryosuke Niwa &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">rniwa at webkit.org</A>&gt; wrote:
&gt;<i> On Mon, Sep 12, 2011 at 5:19 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Could you please supply an example where the apply/reapply split leads
</I>&gt;&gt;<i> to cleaner or otherwise better code than using a boolean argument?
</I>&gt;<i>
</I>&gt;<i> apply: function() {
</I>&gt;<i> &#160; // modify dom
</I>&gt;<i> &#160; // send data back to server
</I>&gt;<i> },
</I>&gt;<i> unapply: function() {
</I>&gt;<i> &#160; // ask server what I should do for undo
</I>&gt;<i> &#160; // modify dom
</I>&gt;<i> },
</I>&gt;<i> reapply: function() {
</I>&gt;<i> &#160; // ask sever what I should do for redo
</I>&gt;<i> &#160; // modify dom
</I>&gt;<i> }
</I>&gt;<i> I can't give you a code from existing apps because such apps do not use
</I>&gt;<i> undoManager API.
</I>
In what situations would you ask the server what to do for
undo/reapply? I was under the impression that for collaborative
editing the client still held the full list of modifications, but that
you mutated that list as you got events regarding other peoples edits.

This example does bring up an interesting question though. Is it ok
that the undo interface is synchronous? If you have to ask the server
how to do the undo/reapply, then you might be forced to use
synchronous XHR which produces bad UI (since the page locks up for the
duration of the request).

&gt;&gt;<i> Having slightly different signatures for the apply function on both
</I>&gt;&gt;<i> transaction feels like a much smaller problem. Either we can rename
</I>&gt;&gt;<i> 'apply' on automatic transactions, or we can give it a boolean
</I>&gt;&gt;<i> argument too which is passed 'false'. It's easy enough to ignore
</I>&gt;&gt;<i> arguments in JS, simply don't put them in your function signature.
</I>&gt;<i>
</I>&gt;<i> I'm fine with adding a boolean argument if we're splitting the interface for
</I>&gt;<i> automatic and manual transactions because then we don't need to have boolean
</I>&gt;<i> argument in automatic transaction's apply.
</I>
Then I think we should go this route.

Maybe rename the property to &quot;execute&quot; or &quot;do&quot; for automatic transactions?

/ Jonas
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033208.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
	<LI>Next message: <A HREF="033255.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33230">[ date ]</a>
              <a href="thread.html#33230">[ thread ]</a>
              <a href="subject.html#33230">[ subject ]</a>
              <a href="author.html#33230">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
