<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] readystatechange for SCRIPT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20readystatechange%20for%20SCRIPT&In-Reply-To=%3C8428B97A8DAC41D0AD3AF470798D0F70%40spartacus%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075434.html">
   <LINK REL="Next"  HREF="075452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] readystatechange for SCRIPT</H1>
<!--htdig_noindex-->
    <B>Kyle Simpson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20readystatechange%20for%20SCRIPT&In-Reply-To=%3C8428B97A8DAC41D0AD3AF470798D0F70%40spartacus%3E"
       TITLE="[whatwg] readystatechange for SCRIPT">getify at gmail.com
       </A><BR>
    <I>Sat Sep 10 20:20:41 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="075434.html">[whatwg] readystatechange for SCRIPT
</A></li>
        <LI>Next message: <A HREF="075452.html">[whatwg] readystatechange for SCRIPT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75450">[ date ]</a>
              <a href="thread.html#75450">[ thread ]</a>
              <a href="subject.html#75450">[ subject ]</a>
              <a href="author.html#75450">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;&gt;<i> So, can I clarify something? You have moved `onreadystatechange` and
</I>&gt;&gt;<i> `readyState` off of the &lt;script&gt; element entirely, and onto the HTML
</I>&gt;&gt;<i> element?
</I>&gt;<i>
</I>&gt;<i> No.  They've been removed from elements (and windows) entirely.  They
</I>&gt;<i> remain on Document.
</I>
So, if I understand correctly, you've simply said there will be no 
`readyState` property progression for script elements?


&gt;&gt;<i> In regards to all the concern about double-firing of load detection
</I>&gt;&gt;<i> logic, IE9 added both `onload` event firing to their existing script
</I>&gt;&gt;<i> element's `onreadystatechange` firing.
</I>&gt;<i>
</I>&gt;<i> In all modes?
</I>
IE9 in standards mode fires both events. Check the test I posted earlier in 
the thread:

<A HREF="http://test.getify.com/test-script-onload-and-readystate.html">http://test.getify.com/test-script-onload-and-readystate.html</A>


&gt;&gt;<i> So, I'm not sure why we're rushing to fear these problems. A few years
</I>&gt;&gt;<i> ago, maybe this was an issue, but I don't see how there's real evidence
</I>&gt;&gt;<i> of current problems. Most script loaders are already immune to this
</I>&gt;&gt;<i> problem.
</I>&gt;<i>
</I>&gt;<i> Opera pointed to a specific script loader in the Facebook API that is
</I>&gt;<i> not thus immune, as well as one in popcornjs.
</I>&gt;<i>
</I>&gt;<i> Given an existence proof like that, &quot;most&quot; doesn't really cut it for me,
</I>&gt;<i> unfortunately.
</I>
Those faulty script loaders may indeed exist. My point is, they are already 
broken (or at least susceptible to breakage) in IE9 standards mode and in 
Opera, both of which fire both events for script elements. Given the fact 
that those script loaders are already broken before we even consider what we 
do with the spec or in other browsers, *they* are clearly faulty and should 
be fixed, not used as an indirect excuse to &quot;throw the baby out with the 
bathwater&quot;. Their breakage is orthagonal to this discussion because it 
predates this discussion, and it's neither helped nor harmed by either 
outcome of this thread's proposal.

Completely undoing/removing `readyState` from script elements doesn't 
actually do anything to address the existing fact that any script loaders 
(such as those cited) which are not paying attention to the fact both 
`onload` and `onreadystatechange` fire for a script element in 2 of the 5 
major browsers is a broken and faulty loader.

Those script loaders should be fixed regardless of what is decided in this 
thread -- that much should be clear. So if they are fixed, then they're a 
moot argument against considering a simple `readyState` mechanism for script 
elements.


&gt;<i> Or put another way, I would not be willing to implement readyState on
</I>&gt;<i> scripts in in Gecko as things stand, without a lot stronger data
</I>&gt;<i> supporting the fact that scripts no longer listen for both load and
</I>&gt;<i> readystatechange.
</I>
I think that's an improper standard. What should be asked is: will the 
proposed change break any existing scripts in new or worse ways than they 
already are? The answer is no. And OTOH, will it help some scripts? 
Apparently, yes (yandex).


--Kyle

 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075434.html">[whatwg] readystatechange for SCRIPT
</A></li>
	<LI>Next message: <A HREF="075452.html">[whatwg] readystatechange for SCRIPT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75450">[ date ]</a>
              <a href="thread.html#75450">[ thread ]</a>
              <a href="subject.html#75450">[ subject ]</a>
              <a href="author.html#75450">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
