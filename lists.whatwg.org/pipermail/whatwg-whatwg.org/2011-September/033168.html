<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for improved handling of '#' inside of data	URIs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20improved%20handling%20of%20%27%23%27%20inside%20of%20data%0A%09URIs&In-Reply-To=%3Cv5un67pgogd3e6jql0e48ibe2ep7us24a9%40hive.bjoern.hoehrmann.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033165.html">
   <LINK REL="Next"  HREF="033183.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for improved handling of '#' inside of data	URIs</H1>
<!--htdig_noindex-->
    <B>Bjoern Hoehrmann</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20improved%20handling%20of%20%27%23%27%20inside%20of%20data%0A%09URIs&In-Reply-To=%3Cv5un67pgogd3e6jql0e48ibe2ep7us24a9%40hive.bjoern.hoehrmann.de%3E"
       TITLE="[whatwg] Proposal for improved handling of '#' inside of data	URIs">derhoermi at gmx.net
       </A><BR>
    <I>Sat Sep 10 17:50:19 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="033165.html">[whatwg] Proposal for improved handling of '#' inside of data URIs
</A></li>
        <LI>Next message: <A HREF="033183.html">[whatwg] Proposal for improved handling of '#' inside of data URIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33168">[ date ]</a>
              <a href="thread.html#33168">[ thread ]</a>
              <a href="subject.html#33168">[ subject ]</a>
              <a href="author.html#33168">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>* Daniel Holbert wrote:
&gt;<i>  In particular: when a &quot;#&quot; character is followed by &quot;&gt;&quot; or &quot;&lt;&quot; in a data 
</I>&gt;<i>URI, I propose that we *don't* treat the &quot;#&quot; as a delimiter, and instead 
</I>&gt;<i>just treat it as part of the encoded document.
</I>
Your proposal does not explain whether this applies to base64 encoded
ones, whether the angle brackets have to occur literally or if they can
also occur in their percent-encoded form, or how you handle multiple '#'
characters like in data:...,...#...&lt;...#example. You also don't say on
which layer this would happen. Obviously having this in the URI syntax
specification with an expectation that all parsing libraries would be
updated to treat the 'data' as a special case is unlikely to go down
well (problem starting with angle brackets being disallowed entirely).

If treating the part after the first &quot;#&quot; as fragment identifier doesn't
cause compatibility problems, as you seem to be suggesting, then that's
great, explaining URI processing would be much simpler. We also do not
have special rules for &lt;<A HREF="http://example.com/search?q=#hashtag">http://example.com/search?q=#hashtag</A>&gt; despite
someone crafting such an address most likely means the &quot;#&quot; to be data.
There are a number of implementations where the &quot;#&quot; is treated as data,
'javascript' and 'mailto' come to mind, but there it's unreliable and
not widely used, and, more importantly, it's all or nothing, not guess-
work. 

You have to escape all sorts of characters in 'data' URLs to make them
work reliably, you have to escape spaces for instance in order to use
them as part of a white-space separated list of URLs or other syntax
that relies on URLs containing no spaces, and you have to escape '#'s
so they work reliably right now and for however long the current pack
of browsers will be around, even if you don't care about all the non-
browser implementations that are unlikely to support this.

If there isn't very clear evidence that this is needed for reasons of
compatibility, it seems preferable by far to have simpler rules that
actually reflect how this stuff works everywhere than have some magic
rules that apply some of the time that robust code cannot rely upon. I
wouldn't mind such fixups in the address bar, as that is a user input
do what I mean interface, but beyond that it just adds complexity for
very little convenience in edge cases.
-- 
Bj&#246;rn H&#246;hrmann &#183; mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bjoern at hoehrmann.de</A> &#183; <A HREF="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</A>
Am Badedeich 7 &#183; Telefon: +49(0)160/4415681 &#183; <A HREF="http://www.bjoernsworld.de">http://www.bjoernsworld.de</A>
25899 Dageb&#252;ll &#183; PGP Pub. KeyID: 0xA4357E78 &#183; <A HREF="http://www.websitedev.de/">http://www.websitedev.de/</A> 
</PRE>












































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033165.html">[whatwg] Proposal for improved handling of '#' inside of data URIs
</A></li>
	<LI>Next message: <A HREF="033183.html">[whatwg] Proposal for improved handling of '#' inside of data URIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33168">[ date ]</a>
              <a href="thread.html#33168">[ thread ]</a>
              <a href="subject.html#33168">[ subject ]</a>
              <a href="author.html#33168">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
