<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Fixing undo on the Web - UndoManager and Transaction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fixing%20undo%20on%20the%20Web%20-%20UndoManager%20and%20Transaction&In-Reply-To=%3CCABNRm63hEwZ8ZhBJexsHRiDTwtGynq8L667KV%2BaKzv78tE%2BO6w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033267.html">
   <LINK REL="Next"  HREF="033275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Fixing undo on the Web - UndoManager and Transaction</H1>
<!--htdig_noindex-->
    <B>Ryosuke Niwa</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Fixing%20undo%20on%20the%20Web%20-%20UndoManager%20and%20Transaction&In-Reply-To=%3CCABNRm63hEwZ8ZhBJexsHRiDTwtGynq8L667KV%2BaKzv78tE%2BO6w%40mail.gmail.com%3E"
       TITLE="[whatwg] Fixing undo on the Web - UndoManager and Transaction">rniwa at webkit.org
       </A><BR>
    <I>Wed Sep 21 09:58:27 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="033267.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
        <LI>Next message: <A HREF="033275.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33269">[ date ]</a>
              <a href="thread.html#33269">[ thread ]</a>
              <a href="subject.html#33269">[ subject ]</a>
              <a href="author.html#33269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>So apply, unapply, and reapply are callback functions supplied by authors
and called by UAs.

e.g.
myUndoScope.undoManager.transact({
  apply: function() {alert('done');},
  unapply: function() {alert('undone');},
  reapply: function() {alert('redone');}
})

the above code inserts a new transaction which pops up alert('done'), and
then alert('undo') and alert('redone') when the transaction is undone or
redone.  But undo/redo of a transaction is done through undoManager.undo,
undoManager.redo, or execCommand so authors don't ever call unapply or
reapply functions directly in those normal use cases.

You could argue that there might be some authors that want to wrap
undoManager around and be a man-in-middle but we haven't seen any use case
for that yet.

- Ryosuke

On Wed, Sep 21, 2011 at 9:22 AM, Aryeh Gregor &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ayg at aryeh.name</A>&gt; wrote:

&gt;<i> On Wed, Sep 21, 2011 at 11:33 AM, Ryosuke Niwa &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">rniwa at webkit.org</A>&gt; wrote:
</I>&gt;<i> &gt; So the argument is that authors will never call apply themselves. Only
</I>&gt;<i> &gt; browsers would.
</I>&gt;<i>
</I>&gt;<i> I'm very confused now.  Why would it be in an IDL in a web standard if
</I>&gt;<i> authors will never call it?  It's an implementation detail then.  I
</I>&gt;<i> feel like I must be missing something fundamental here.
</I>&gt;<i>
</I></PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033267.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
	<LI>Next message: <A HREF="033275.html">[whatwg] Fixing undo on the Web - UndoManager and Transaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33269">[ date ]</a>
              <a href="thread.html#33269">[ thread ]</a>
              <a href="subject.html#33269">[ subject ]</a>
              <a href="author.html#33269">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
