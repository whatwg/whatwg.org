<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [editing] queryCommand(Indeterm|State|Value) for commands where they make no sense
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bediting%5D%20queryCommand%28Indeterm%7CState%7CValue%29%20for%0A%20commands%20where%20they%20make%20no%20sense&In-Reply-To=%3C4E7275EB.2090809%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033235.html">
   <LINK REL="Next"  HREF="075513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [editing] queryCommand(Indeterm|State|Value) for commands where they make no sense</H1>
<!--htdig_noindex-->
    <B>Ehsan Akhgari</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bediting%5D%20queryCommand%28Indeterm%7CState%7CValue%29%20for%0A%20commands%20where%20they%20make%20no%20sense&In-Reply-To=%3C4E7275EB.2090809%40mozilla.com%3E"
       TITLE="[whatwg] [editing] queryCommand(Indeterm|State|Value) for commands where they make no sense">ehsan at mozilla.com
       </A><BR>
    <I>Thu Sep 15 15:02:19 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="033235.html">[whatwg] [editing] queryCommand(Indeterm|State|Value) for commands where they make no sense
</A></li>
        <LI>Next message: <A HREF="075513.html">[whatwg] [editing] queryCommand(Indeterm|State|Value) for commands where they make no sense
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75509">[ date ]</a>
              <a href="thread.html#75509">[ thread ]</a>
              <a href="subject.html#75509">[ subject ]</a>
              <a href="author.html#75509">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 11-09-15 4:39 PM, Aryeh Gregor wrote:
&gt;<i> I think the exception-throwing behavior is preferable in principle,
</I>&gt;<i> but for compat, I suspect the right behavior is to always return
</I>&gt;<i> boolean false for state and indeterm, and &quot;&quot; for value.  This
</I>&gt;<i> basically matches everyone but Gecko for commands where none of them
</I>&gt;<i> make sense, and matches Gecko/Opera for the value of commands where
</I>&gt;<i> only state makes sense.  Throwing doesn't match anyone except Gecko,
</I>&gt;<i> and then only in some cases.  If others agree, I'll change the spec
</I>&gt;<i> and tests accordingly.
</I>
With my Gecko hat off (honesly, without having investigated, I think the 
reason that Gecko throws in some of these cases are just bugs!), I hate 
APIs which return dummy values and hide the authors mistake in that way. 
  I think now's our chance to improve things here.

But I do agree that web-compat is something which we need to address 
here.  However, I think that's going to be a general risk with the new 
spec.  There are things which don't have a clear-cut answer, where 
existing implementations do things differently, and nobody knows why. 
For those cases, the web-compat concern is really tricky to address. 
But there are cases where implementations are doing something which 
doesn't make sense at all in response to the author doing something 
which doesn't make sense at all.  No matter what the implementation 
does, the content script is doing something wrong.  I find the position 
of refusing such invalid requests very defendable, and I would be quite 
willing to change Gecko's behavior like that in the near future.

Speaking pragmatically, I've never seen a bug report in Mozilla where 
somebody asks why does Gecko do this when I do this thing which doesn't 
make sense in the first place.  So my educated guess is that this is not 
going to break a lot of existing websites anyway.

Cheers,
Ehsan

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033235.html">[whatwg] [editing] queryCommand(Indeterm|State|Value) for commands where they make no sense
</A></li>
	<LI>Next message: <A HREF="075513.html">[whatwg] [editing] queryCommand(Indeterm|State|Value) for commands where they make no sense
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75509">[ date ]</a>
              <a href="thread.html#75509">[ thread ]</a>
              <a href="subject.html#75509">[ subject ]</a>
              <a href="author.html#75509">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
