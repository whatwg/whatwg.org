<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for improved handling of '#' inside of data URIs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20improved%20handling%20of%20%27%23%27%20inside%20of%20data%0A%20URIs&In-Reply-To=%3C4E6C012F.1020207%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033170.html">
   <LINK REL="Next"  HREF="033168.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for improved handling of '#' inside of data URIs</H1>
<!--htdig_noindex-->
    <B>Bjartur Thorlacius</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20improved%20handling%20of%20%27%23%27%20inside%20of%20data%0A%20URIs&In-Reply-To=%3C4E6C012F.1020207%40gmail.com%3E"
       TITLE="[whatwg] Proposal for improved handling of '#' inside of data URIs">svartman95 at gmail.com
       </A><BR>
    <I>Sat Sep 10 17:30:39 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="033170.html">[whatwg] Proposal for improved handling of '#' inside of data URIs
</A></li>
        <LI>Next message: <A HREF="033168.html">[whatwg] Proposal for improved handling of '#' inside of data	URIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33165">[ date ]</a>
              <a href="thread.html#33165">[ thread ]</a>
              <a href="subject.html#33165">[ subject ]</a>
              <a href="author.html#33165">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&#222;ann lau 10.sep 2011 21:15, skrifa&#240;i Daniel Holbert:
&gt;<i> * Opera is interesting -- it can exhibit either the Firefox or WebKit
</I>&gt;<i> behaviors in tests A/B/C, depending on whether the data URI as an
</I>&gt;<i> embedded element (via iframe/img) or view it directly. When you view it
</I>&gt;<i> as an embedded element (in my testcase), Opera matches WebKit on A/B/C
</I>&gt;<i> (including the XML parse error on C). However, if you *directly view*
</I>&gt;<i> the data URIs (right-click on iframe, Frame|Open, focus URLbar &amp; hit
</I>&gt;<i> enter), then Opera matches Firefox. Also, Opera passes test D.
</I>&gt;<i>
</I>So Opera treats the src attribute as a URI, but the href attribute and
identifiers input by users as URI references?  This does not conform to 
the WHATWG HTML5 standard that uses delegates the definition of URI to 
RFC 3986 which again defines the &quot;#&quot; character as a beginning a fragment 
identifier, and not quite to RFC 2396, delegated to by HTML 4.01 which 
forbids &quot;#&quot;s in URIs, but uses it as a separator between URIs and URI 
references (but doesn't specify how to parse URIs who are not part of 
URI references). I believe the HTML 4.01 usage of the term URI instead 
of URI reference to be an error, but the HTML working group has to 
confirm that (or editor(s) on it's behalf).
According to my interpretation of RFC 2396 the &quot;#&quot; should terminate the 
URI, as URI can't contain &quot;#&quot;, but this isn't stated explicitly and thus 
I can't tell if Opera violates the RFC or not, and thus not if it's 
&quot;correct&quot; or not. It's clearly violating RFC 3986, however.
The correct thing to do seems to be to to violate HTML 4.01 &amp; RFC 2396 
but conform to HTML5 &amp; RFC 3986. Adding a special case for one URI 
scheme seems a little odd, but I can't think of a use case for fragment 
identifiers in data URI.
</PRE>













































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033170.html">[whatwg] Proposal for improved handling of '#' inside of data URIs
</A></li>
	<LI>Next message: <A HREF="033168.html">[whatwg] Proposal for improved handling of '#' inside of data	URIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33165">[ date ]</a>
              <a href="thread.html#33165">[ thread ]</a>
              <a href="subject.html#33165">[ subject ]</a>
              <a href="author.html#33165">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
