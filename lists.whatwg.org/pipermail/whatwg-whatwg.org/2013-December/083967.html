<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Flow Control on Websockets
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Flow%20Control%20on%20Websockets&In-Reply-To=%3CCAA4WUYgAjVOA%2B_uPSO7HZT7r-cCwu3tV-EJ9sJ851p8es8oY6A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="083966.html">
   <LINK REL="Next"  HREF="041691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Flow Control on Websockets</H1>
<!--htdig_noindex-->
    <B>William Chan (&#38472;&#26234;&#26124;)</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Flow%20Control%20on%20Websockets&In-Reply-To=%3CCAA4WUYgAjVOA%2B_uPSO7HZT7r-cCwu3tV-EJ9sJ851p8es8oY6A%40mail.gmail.com%3E"
       TITLE="[whatwg] Flow Control on Websockets">willchan at chromium.org
       </A><BR>
    <I>Tue Dec  3 19:05:56 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="083966.html">[whatwg] Flow Control on Websockets
</A></li>
        <LI>Next message: <A HREF="041691.html">[whatwg] Styling form controls (Was: Re: Forms-related feedback)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83967">[ date ]</a>
              <a href="thread.html#83967">[ thread ]</a>
              <a href="subject.html#83967">[ subject ]</a>
              <a href="author.html#83967">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Dec 3, 2013 at 6:56 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:

&gt;<i> On Tue, 3 Dec 2013, William Chan (&#38472;&#26234;&#26124;) wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; If the server is generating data in response to some real-time query,
</I>&gt;<i> &gt; &gt; e.g. the results of a search on Twitter or some such, then what is the
</I>&gt;<i> &gt; &gt; server going to do with backpressure? Drop the data on the floor?
</I>&gt;<i> &gt; &gt; Whether the client drops the data on the floor or the server drops the
</I>&gt;<i> &gt; &gt; data on the floor doesn't much affect the user, though obviously if
</I>&gt;<i> &gt; &gt; the client is dropping it then the bandwidth is being wasted.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Buffer the data. Read from the backend when the flow control window
</I>&gt;<i> &gt; opens up. I mean, that's what would happen if there was packetloss in
</I>&gt;<i> &gt; the network, leading to retransmissions, and possibly the TCP receive
</I>&gt;<i> &gt; window shrunk to 0. Irrespective of whether or not the browser websocket
</I>&gt;<i> &gt; client has some way to instruct the browser to stop reading from the
</I>&gt;<i> &gt; socket, there's always a possibility of the receive window shrinking to
</I>&gt;<i> &gt; 0, and the server *must* deal with it, in order to be a compliant TCP
</I>&gt;<i> &gt; implementation.
</I>&gt;<i>
</I>&gt;<i> The context of this thread is that the application (server+client) is
</I>&gt;<i> expected to do something _other_ than just buffering, because the premise
</I>&gt;<i> is that the client will never be able to process the data at the rate that
</I>&gt;<i> the client is receiving it, which is (presumably) the rate the server is
</I>&gt;<i> generating it. Just buffering doesn't help.
</I>&gt;<i>
</I>
I assume you mean it has to do something other than just buffer, because it
runs out of memory. At that point, it must stop generating data. Flow
control must be applied through the system. I was just pointing out that
there are multiple reasons that the sender (the server) may need to stop
sending. It could be because the client can't process as fast as possible
(it could be the browser network stack is slow, or it could be the web app
is slow). Or it could be the lossy network. It doesn't matter, the server
portion of the app needs to buffer and perhaps stop generating data (stop
reading from a filesystem or backend or whatever).


&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Ian Hickson               U+1047E                )\._.,--....,'``.    fL
</I>&gt;<i> <A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
</I>&gt;<i> Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="083966.html">[whatwg] Flow Control on Websockets
</A></li>
	<LI>Next message: <A HREF="041691.html">[whatwg] Styling form controls (Was: Re: Forms-related feedback)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83967">[ date ]</a>
              <a href="thread.html#83967">[ thread ]</a>
              <a href="subject.html#83967">[ subject ]</a>
              <a href="author.html#83967">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
