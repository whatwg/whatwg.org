<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Grouping in canvas 2d
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Grouping%20in%20canvas%202d&In-Reply-To=%3C73A19694-2AB0-4948-8B4B-A5ED820B2444%40scratchdisk.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="084067.html">
   <LINK REL="Next"  HREF="083982.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Grouping in canvas 2d</H1>
<!--htdig_noindex-->
    <B>J&#252;rg Lehni</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Grouping%20in%20canvas%202d&In-Reply-To=%3C73A19694-2AB0-4948-8B4B-A5ED820B2444%40scratchdisk.com%3E"
       TITLE="[whatwg] Grouping in canvas 2d">lists at scratchdisk.com
       </A><BR>
    <I>Wed Dec  4 11:41:12 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="084067.html">[whatwg] CanvasRenderingContext2D with addPath, currentPath
</A></li>
        <LI>Next message: <A HREF="083982.html">[whatwg] Grouping in canvas 2d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41710">[ date ]</a>
              <a href="thread.html#41710">[ thread ]</a>
              <a href="subject.html#41710">[ subject ]</a>
              <a href="author.html#41710">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>This discussion seems to have stalled.

Implementing this would help us greatly to optimize aspects of Paper.js, as double buffering into separate canvases is very slow and costly. Is this still on the map?

There appears to be a library that emulates this functionality, using the same approach (and having a similar impact on performance) as we do	:

<A HREF="https://github.com/evanmoran/composite">https://github.com/evanmoran/composite</A>

Perhaps this can serve as a base for further discussion?

J&#252;rg

On Jun 18, 2013, at 18:14 , Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt; wrote:

&gt;<i> On Tue, Jun 18, 2013 at 7:25 AM, Justin Novosad &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">junov at google.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Fri, Jun 14, 2013 at 2:34 PM, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I think so. If you leave a layer 'open', what would you display.
</I>&gt;&gt;&gt;<i> It wouldn't just be for requestAnimationFrame, you would also need to
</I>&gt;&gt;&gt;<i> define what happens if you read pixels with getImageData inside a
</I>&gt;&gt;&gt;<i> beginLayer.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> I would like to suggest that all layers left 'open' should be
</I>&gt;&gt;<i> automatically closed at the end of a script execution task.  Otherwise, it
</I>&gt;&gt;<i> would be too easy to leak layers and get OOM crashes. This would also
</I>&gt;&gt;<i> guarantee that the canvas contents are in a ready to display state.
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> That sounds reasonable. Does this happen with save/restore as well?
</I>&gt;<i> If you want to draw incrementally, you wouldn't want this to happen either.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> For the getImageData question I think the options that would make most
</I>&gt;&gt;<i> sense are either:
</I>&gt;&gt;<i> a) Read from the root layer (up to date except for contents of currently
</I>&gt;&gt;<i> open layers),
</I>&gt;&gt;<i> b) Read from the current (top most) layer, or
</I>&gt;&gt;<i> c) Fail
</I>&gt;&gt;<i> These options will never require the compositing of open (potentially
</I>&gt;&gt;<i> unfinished) layers, which I think is important for implementations to be
</I>&gt;&gt;<i> efficient.
</I>&gt;&gt;<i> I am not sure which of the above makes more sense though.
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This is probably a case where we need to check with the implementors.
</I>&gt;<i> Safari is the only browser that bolts the canvas implementation straight
</I>&gt;<i> onto the OS calls so we should probably spec out what they do since other
</I>&gt;<i> browser can probably emulate it.
</I>
</PRE>
























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="084067.html">[whatwg] CanvasRenderingContext2D with addPath, currentPath
</A></li>
	<LI>Next message: <A HREF="083982.html">[whatwg] Grouping in canvas 2d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41710">[ date ]</a>
              <a href="thread.html#41710">[ thread ]</a>
              <a href="subject.html#41710">[ subject ]</a>
              <a href="author.html#41710">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
