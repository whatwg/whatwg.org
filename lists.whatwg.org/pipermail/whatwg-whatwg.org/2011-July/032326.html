<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Peer-to-peer communication, video conferencing, &lt;device&gt;, and related topics
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Peer-to-peer%20communication%2C%20video%20conferencing%2C%0A%20%3Cdevice%3E%2C%20and%20related%20topics&In-Reply-To=%3Cop.vx6mo0orim6vpa%40shwetank-dixits-macbook.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032312.html">
   <LINK REL="Next"  HREF="074600.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Peer-to-peer communication, video conferencing, &lt;device&gt;, and related topics</H1>
<!--htdig_noindex-->
    <B>Shwetank Dixit</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Peer-to-peer%20communication%2C%20video%20conferencing%2C%0A%20%3Cdevice%3E%2C%20and%20related%20topics&In-Reply-To=%3Cop.vx6mo0orim6vpa%40shwetank-dixits-macbook.local%3E"
       TITLE="[whatwg] Peer-to-peer communication, video conferencing, &lt;device&gt;, and related topics">shwetankd at opera.com
       </A><BR>
    <I>Tue Jul  5 22:25:42 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032312.html">[whatwg] Proposal to remove a paragraph from canvas spec
</A></li>
        <LI>Next message: <A HREF="074600.html">[whatwg] Peer-to-peer communication, video conferencing, &lt;device&gt;, and related topics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32326">[ date ]</a>
              <a href="thread.html#32326">[ thread ]</a>
              <a href="subject.html#32326">[ subject ]</a>
              <a href="author.html#32326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, 18 Mar 2011 19:32:49 +0530, Lachlan Hunt  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">lachlan.hunt at lachy.id.au</A>&gt; wrote:

&gt;<i> On 2011-03-18 05:45, Ian Hickson wrote:
</I>&gt;&gt;<i> On Thu, 16 Sep 2010, Jonathan Dixon wrote:
</I>&gt;&gt;&gt;<i> Further, it could be useful to provide a way to query the video source
</I>&gt;&gt;&gt;<i> as to whether the camera is oriented relative to the screen (if the
</I>&gt;&gt;&gt;<i> underlying system knows; consider a phone device with both a main  
</I>&gt;&gt;&gt;<i> camera
</I>&gt;&gt;&gt;<i> and self-view camera). This is needed to drive the decision on whether
</I>&gt;&gt;&gt;<i> to do this horizontal flip or not. In fact, such an application may  
</I>&gt;&gt;&gt;<i> want
</I>&gt;&gt;&gt;<i> to somehow indicate a preference for the self-view camera when multiple
</I>&gt;&gt;&gt;<i> cameras are present in the selection list. c.f. a movie-making app  
</I>&gt;&gt;&gt;<i> which
</I>&gt;&gt;&gt;<i> would prefer the outward facing camera.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Interesting.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In getUserMedia() the input is extensible; we could definitely add
</I>&gt;&gt;<i> &quot;prefer-user-view&quot; or &quot;prefer-environment-view&quot; flags to the method  
</I>&gt;&gt;<i> (with
</I>&gt;&gt;<i> better names, hopefully, but consider that 'rear' and 'front' are
</I>&gt;&gt;<i> misleading terms -- the front camera on a DSLR faces outward from the
</I>&gt;&gt;<i> user, the front camera on a mobile phone faces toward the user). The  
</I>&gt;&gt;<i> user
</I>&gt;&gt;<i> still has to OK the use of the device, though, so maybe it should just  
</I>&gt;&gt;<i> be
</I>&gt;&gt;<i> left up to the user to pick the camera? They'll need to be able to  
</I>&gt;&gt;<i> switch
</I>&gt;&gt;<i> it on the fly, too, which again argues to make this a UA feature.
</I>&gt;<i>
</I>&gt;<i> We could just add flags to the options string like this:
</I>&gt;<i>
</I>&gt;<i> &quot;video;view=user, audio&quot; or &quot;video;view=environment, audio&quot;
</I>&gt;<i>
</I>&gt;<i> It's worth pointing out that The HTML Media Capture draft from the DAP  
</I>&gt;<i> WG uses the terms &quot;camera&quot; and &quot;camcorder&quot; for this purpose, but I find  
</I>&gt;<i> these terms to be very ambiguous and inappropriate, and so we should not  
</I>&gt;<i> use them here.
</I>Just wanted to know whether there is any consensus on this or not? Mobile  
phones are coming out with dual cameras (front and back facing) and  
depending on the use case, the developer might want access to either the  
front or back one. (For example, for a simple camera app, a back facing  
will do, but for a web conferencing app, the front facing will be  
required). At least, the developer should be able to specify which one to  
enable by default, which then can be changed the user if needed.

Another question is flash. As far as I have seen, there seems to be no  
option to specify whether the camera needs to use flash or not. Is this  
decision left up to the device? (If someone is making an app which is just  
clicking a picture of the person, then it would be nice to have the camera  
use flash in low light conditions).
&gt;<i>
</I>&gt;<i> <A HREF="http://dev.w3.org/2009/dap/camera/">http://dev.w3.org/2009/dap/camera/</A>
</I>&gt;<i>
</I>&gt;&gt;<i> Similarly for exposing the kind of stream: we could add to  
</I>&gt;&gt;<i> GeneratedStream
</I>&gt;&gt;<i> an attribute that reports this kind of thing. What is the most useful  
</I>&gt;&gt;<i> way
</I>&gt;&gt;<i> of exposing this information?
</I>&gt;<i>
</I>&gt;<i> I'm not entirely clear about what the use cases are for knowing if the  
</I>&gt;<i> camera is either user-view or environment-view.  It seems the more  
</I>&gt;<i> useful information to know is the orientation of the camera.  If the  
</I>&gt;<i> user switches cameras, that could also be handled by firing orientation  
</I>&gt;<i> events.
</I>&gt;<i>
</I>&gt;&gt;<i> Lachlan Hunt wrote:
</I>&gt;&gt;&gt;<i> There are some use cases for which it would be useful to know the
</I>&gt;&gt;&gt;<i> precise orientation of the camera, such as augmented reality
</I>&gt;&gt;&gt;<i> applications.  The camera orientation may be independent of the  
</I>&gt;&gt;&gt;<i> device's
</I>&gt;&gt;&gt;<i> orientation, and so the existing device orientation API may not be
</I>&gt;&gt;&gt;<i> sufficient.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It seems like the best way to extend this would be to have the Device
</I>&gt;&gt;<i> Orientation API apply to GeneratedStream objects, either by just having
</I>&gt;&gt;<i> the events also fire on GeneratedStream objects, or by having the API be
</I>&gt;&gt;<i> based on a pull model rather than a push model and exposing an object on
</I>&gt;&gt;<i> GeneratedStream objects as well as Window objects.
</I>&gt;<i>
</I>&gt;<i> This could work.  But it would make more sense if there were an object  
</I>&gt;<i> representing the device itself, as in Rich's proposal, and for the  
</I>&gt;<i> events to be fired on that object instead of the stream.
</I>&gt;<i>
</I>&gt;&gt;<i> On Mon, 24 Jan 2011, Anne van Kesteren wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> There is a plan of allowing direct assigning to IDL attributes besides
</I>&gt;&gt;&gt;<i> creating URLs.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I.e. being able to do:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   audio.src = blob
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> (The src content attribute would then be something like  
</I>&gt;&gt;&gt;<i> &quot;about:objecturl&quot;.)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I am not sure if that API should work differently from creating URLs  
</I>&gt;&gt;&gt;<i> and
</I>&gt;&gt;&gt;<i> assigning those, but we could consider it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Could you elaborate on this plan?
</I>&gt;<i>
</I>&gt;<i> This is basically what Philip and I were discussing in the other thread  
</I>&gt;<i> yesterday, where we avoid the unnecessary overhead of creating a magic  
</I>&gt;<i> URL, and instead just assign the object directly to the src property.  
</I>&gt;<i> This lets the implementation handle all the magic transparently in the  
</I>&gt;<i> background, without bothering to expose a URLs string to the author.
</I>&gt;<i>
</I>&gt;<i> This is what we had implemented in our experimental implementation of  
</I>&gt;<i> the &lt;device&gt; element, and now getUserMedia.
</I>&gt;<i>
</I>&gt;<i> i.e.
</I>&gt;<i>
</I>&gt;<i> &lt;video&gt;&lt;/video&gt;
</I>&gt;<i> &lt;script&gt;
</I>&gt;<i> var v = document.querySelector(&quot;video&quot;);
</I>&gt;<i> navigator.getUserMedia(&quot;video&quot;, function(stream) {
</I>&gt;<i>    v.src = stream;
</I>&gt;<i>    v.play();
</I>&gt;<i> });
</I>&gt;<i> &lt;/script&gt;
</I>&gt;<i>
</I>&gt;<i> The getter for v.src then returns &quot;about:streamurl&quot;.
</I>&gt;<i>
</I>&gt;<i> My understanding is that we don't really want to have to implement the  
</I>&gt;<i> create/revokeObjectURL() methods for this.
</I>&gt;<i>
</I>&gt;&gt;<i> On Wed, 16 Feb 2011, Anne van Kesteren wrote:
</I>&gt;&gt;&gt;<i> This is just a thought. Instead of acquiring a Stream object
</I>&gt;&gt;&gt;<i> asynchronously there always is one available showing transparent black
</I>&gt;&gt;&gt;<i> or some such. E.g. navigator.cameraStream. It also inherits from
</I>&gt;&gt;&gt;<i> EventTarget. Then on the Stream object you have methods to request
</I>&gt;&gt;&gt;<i> camera access which triggers some asynchronous UI. Once granted an
</I>&gt;&gt;&gt;<i> appropriately named event is dispatched on Stream indicating you now
</I>&gt;&gt;&gt;<i> have access to an actual stream. When the user decides it is enough and
</I>&gt;&gt;&gt;<i> turns of the camera (or something else happens) some other  
</I>&gt;&gt;&gt;<i> appropriately
</I>&gt;&gt;&gt;<i> named event is dispatched on Stream again turning it transparent black
</I>&gt;&gt;<i> again.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is a very interesting idea.
</I>&gt;<i>
</I>&gt;<i> This suggests that there would be a separate property available for the  
</I>&gt;<i> microphone, and any other input device.  This differs from the existing  
</I>&gt;<i> spec, which allowed a single stream to represent both audio and video.
</I>&gt;<i>
</I>&gt;&gt;<i> On Mon, 14 Mar 2011, Lachlan Hunt wrote:
</I>&gt;&gt;&gt;<i> The API includes both readystatechange event, as well as independent
</I>&gt;&gt;&gt;<i> events for play, paused and ended.  This redundancy is unnecessary.  
</I>&gt;&gt;&gt;<i> This
</I>&gt;&gt;&gt;<i> is also inconsistent with the design of the HTMLMediaElement API, which
</I>&gt;&gt;&gt;<i> does not include a readystatechange event in favour on separate events
</I>&gt;&gt;&gt;<i> only.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've dropped readystatechange.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I expect to drop play and pause events if we move to the model described
</I>&gt;&gt;<i> above that pauses and resumes audio and video separately.
</I>&gt;<i>
</I>&gt;<i> It may still be useful to have events for this, if the event object had  
</I>&gt;<i> a property that indicated which type of stream it applied to, or if  
</I>&gt;<i> there were separate objects for both the audio and video streams.
</I>&gt;<i>
</I>

-- 
Shwetank Dixit
Web Evangelist,
Site Compatibility / Developer Relations / Core Engineering Group
Member - W3C Mobile Web for Social Development (MW4D) Group
Member - Web Standards Project (WaSP) - International Liaison Group
Opera Software - www.opera.com

Using Opera's revolutionary email client: <A HREF="http://www.opera.com/mail/">http://www.opera.com/mail/</A>
</PRE>






















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032312.html">[whatwg] Proposal to remove a paragraph from canvas spec
</A></li>
	<LI>Next message: <A HREF="074600.html">[whatwg] Peer-to-peer communication, video conferencing, &lt;device&gt;, and related topics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32326">[ date ]</a>
              <a href="thread.html#32326">[ thread ]</a>
              <a href="subject.html#32326">[ subject ]</a>
              <a href="author.html#32326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
