<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20a%20MediaSource%20API%20that%20allows%20sending%0A%20media%20data%20to%20a%20HTMLMediaElement&In-Reply-To=%3CCAA0c1bBYM0gyLiJNx%3DfV8n2QqHfAbRUj5ccL1JpzuZKGfqRFNw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032403.html">
   <LINK REL="Next"  HREF="032406.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement</H1>
<!--htdig_noindex-->
    <B>Aaron Colwell</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20a%20MediaSource%20API%20that%20allows%20sending%0A%20media%20data%20to%20a%20HTMLMediaElement&In-Reply-To=%3CCAA0c1bBYM0gyLiJNx%3DfV8n2QqHfAbRUj5ccL1JpzuZKGfqRFNw%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement">acolwell at google.com
       </A><BR>
    <I>Tue Jul 12 16:14:27 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032403.html">[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
</A></li>
        <LI>Next message: <A HREF="032406.html">[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32405">[ date ]</a>
              <a href="thread.html#32405">[ thread ]</a>
              <a href="subject.html#32405">[ subject ]</a>
              <a href="author.html#32405">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Jul 12, 2011 at 3:28 PM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt;wrote:

&gt;<i> On Wed, Jul 13, 2011 at 8:45 AM, Aaron Colwell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">acolwell at google.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I thought about adding an attribute to HTMLMediaElement that provided a
</I>&gt;&gt;<i> URL for signalling MediaSource usage. That mechanism would allow you to
</I>&gt;&gt;<i> create a URL that only works with that element. When this URL is specified,
</I>&gt;&gt;<i> a MediaSource attribute would be updated on the media element during loading
</I>&gt;&gt;<i> and JavaScript could use that to pass data to the tag. I couldn't find a
</I>&gt;&gt;<i> similar pattern in other APIs so I didn't take that path. If people think
</I>&gt;&gt;<i> that is a better route then I'm all for it.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I was thinking more of putting the MediaSource functionality
</I>&gt;<i> (open/append/close) on the media element itself.
</I>&gt;<i>
</I>
I'm open to that. In fact that is how my current prototype is implemented
because it was the least painful way to test these ideas in WebKit. My
prototype only implements append() and uses existing media element events as
proxies for the events I've proposed. I only separated this out into a
separate object because I thought people might prefer an object to represent
the source of the media and leave the media element object an endpoint for
controlling media playback.


&gt;<i>
</I>&gt;<i> Do you need to support seeking in with this API? That's hard. It would be
</I>&gt;<i> simpler if we didn't have to support seeking. Instead of seeking you could
</I>&gt;<i> just open a new stream and pour data in for the new offset.
</I>&gt;<i>
</I>
 I'd like to be able to support seeking so you can use this mechanism for
on-demand playback. In my prototype seeking wasn't too difficult to
implement. I just triggered it off the seeking event. Any append() that
happens after the seeking event fires is associated with the new seek
location. currentTime is updated with the timestamp in the first cluster
passed to append() after the seeking event fires. Once the media engine has
this timestamp and enough preroll data, then it will fire the seeked event
like normal. I haven't tested this with rapid fire seeking yet, but I think
this mechanism should work.

Aaron
</PRE>


































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032403.html">[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
</A></li>
	<LI>Next message: <A HREF="032406.html">[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32405">[ date ]</a>
              <a href="thread.html#32405">[ thread ]</a>
              <a href="subject.html#32405">[ subject ]</a>
              <a href="author.html#32405">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
