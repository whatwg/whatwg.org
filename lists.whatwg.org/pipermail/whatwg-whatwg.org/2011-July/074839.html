<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Why%20deflate-stream%20is%20required%20to%20be%20enabled%20by%20the%0A%20WebSocket%20API%3F&In-Reply-To=%3CCA%2Bc2ei_WiLbLLu3-EzKzU5oBztz7C6R9WFV1kJ08%2Bh8PoTwg7A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032557.html">
   <LINK REL="Next"  HREF="074847.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Why%20deflate-stream%20is%20required%20to%20be%20enabled%20by%20the%0A%20WebSocket%20API%3F&In-Reply-To=%3CCA%2Bc2ei_WiLbLLu3-EzKzU5oBztz7C6R9WFV1kJ08%2Bh8PoTwg7A%40mail.gmail.com%3E"
       TITLE="[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?">jonas at sicking.cc
       </A><BR>
    <I>Tue Jul 19 16:06:56 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032557.html">[whatwg] Why deflate-stream is required to be enabled by the	WebSocket API?
</A></li>
        <LI>Next message: <A HREF="074847.html">[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74839">[ date ]</a>
              <a href="thread.html#74839">[ thread ]</a>
              <a href="subject.html#74839">[ subject ]</a>
              <a href="author.html#74839">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&gt;<i> I think this requirement doesn't really help us enforce endpoints
</I>&gt;<i> initiate/accept WebSocket with the same configuration. Because
</I>&gt;<i>
</I>&gt;<i> - non-browser UAs are free to be implemented without deflate-stream
</I>&gt;<i> - server developers would see/care only the wire protocol spec
</I>
Given the number of browser installations in the world (a couple of
billion or so), and that a significant portion of these will implement
the WebSockets API spec, it would seem downright irresponsible of
server developers to not look at it.

&gt;<i> So, server developers would simply make their implementation accept both
</I>&gt;<i> requests with and without deflate-stream, I think.
</I>
I'd like to see a bit more meat on this assertion.

&gt;<i> It's not likely that
</I>&gt;<i> server implementors are influenced by &quot;the WebSocket API&quot; and have their
</I>&gt;<i> server check if a UA is browser or not and reject requests w/o
</I>&gt;<i> deflate-stream.
</I>
Agreed. But it's not really servers job to ensure that browsers follow
the websocket spec here. Test suites and being able to claim that you
follow the spec should enforce that.

&gt;<i> The only people who benefit from this requirement is those
</I>&gt;<i> who implement a server only for their own use and are not interested in
</I>&gt;<i> serving non-browser clients.
</I>
First off, I suspect that the by far most common use case for servers
implementing websocket is to talk to browsers. So I would expect the
group you are talking about to be the majority of websocket
implementations. How many http servers do you think are out there
written primarily to talk to browsers?

Second, we're not really talking about browsers vs. non-browsers,
right. But rather clients that support deflate-stream vs. ones that
don't. So if a server expects to only talk to clients that support
deflate-stream, they might choose not require that. Even if some of
those clients aren't browsers.

Compare to the situation for http servers out there. I would expect
that a large number of them (as measured by codebases, not by
deployments) to have been primarily developed by testing what works
against browsers. I would further expect that non-browser clients,
such as web search spiders, end up having had to replicate some
browser behavior in order to be compatible with a larger set of http
servers.

&gt;<i> Even for such people, I think it's easier to debug and straightforward that
</I>&gt;<i> they implement one without deflate-stream and then with deflate-stream, and
</I>&gt;<i> then just leave both available. I can't imagine servers that has solid
</I>&gt;<i> implementation for deflate-stream but not for w/o deflate-stream.
</I>
Untested generally ends up being non-working code. So while you might
end up writing without deflate-stream in the beginning, once you
implement deflate-stream, and have almost exclusively clients that
support deflate-stream, it's likely that your non-deflate-stream code
path ends up with bugs.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032557.html">[whatwg] Why deflate-stream is required to be enabled by the	WebSocket API?
</A></li>
	<LI>Next message: <A HREF="074847.html">[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74839">[ date ]</a>
              <a href="thread.html#74839">[ thread ]</a>
              <a href="subject.html#74839">[ subject ]</a>
              <a href="author.html#74839">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
