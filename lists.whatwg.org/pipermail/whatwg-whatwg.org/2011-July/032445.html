<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] a rel=attachment
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20a%20rel%3Dattachment&In-Reply-To=%3CCAP0-QpuYeE%2BTVXghdQTdrWj66CGH%2BgjZu1SuwpVpp8SP5rBy4w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032444.html">
   <LINK REL="Next"  HREF="032446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] a rel=attachment</H1>
<!--htdig_noindex-->
    <B>Darin Fisher</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20a%20rel%3Dattachment&In-Reply-To=%3CCAP0-QpuYeE%2BTVXghdQTdrWj66CGH%2BgjZu1SuwpVpp8SP5rBy4w%40mail.gmail.com%3E"
       TITLE="[whatwg] a rel=attachment">darin at chromium.org
       </A><BR>
    <I>Thu Jul 14 13:16:57 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032444.html">[whatwg] a rel=attachment
</A></li>
        <LI>Next message: <A HREF="032446.html">[whatwg] a rel=attachment
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32445">[ date ]</a>
              <a href="thread.html#32445">[ thread ]</a>
              <a href="subject.html#32445">[ subject ]</a>
              <a href="author.html#32445">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Jul 14, 2011 at 12:36 PM, Glenn Maynard &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">glenn at zewt.org</A>&gt; wrote:

&gt;<i> 2011/7/14 Ian Fette (&#12452;&#12450;&#12531;&#12501;&#12455;&#12483;&#12486;&#12451;) &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ifette at google.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i> &gt; Many websites wish to offer a file for download, even though it could
</I>&gt;<i> &gt; potentially be viewed inline (take images, PDFs, or word documents as an
</I>&gt;<i> &gt; example). Traditionally the only way to achieve this is to set a
</I>&gt;<i> &gt; content-disposition header. *However, sometimes it is not possible for
</I>&gt;<i> the
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> This has been raised a couple times:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2010-July/027455.html">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2010-July/027455.html</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-April/031190.html(thread">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-April/031190.html(thread</A>
</I>&gt;<i> was derailed partway through)
</I>&gt;<i>
</I>&gt;<i> I've wanted this several times and I'm strongly in favor of it.
</I>&gt;<i>
</I>
Yes, it seems very useful.



&gt;<i>
</I>&gt;<i> After mulling this over with some application developers who are trying to
</I>&gt;<i> &gt; use this functionality, it seems like adding a &quot;rel&quot; attribute to the &lt;a&gt;
</I>&gt;<i> &gt; tag would be a straightforward, minimally invasive way to address this
</I>&gt;<i> use
</I>&gt;<i> &gt; case. &lt;a rel=attachment href=blah.pdf&gt; would indicate that the browser
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> This isn't enough; the filename needs to be overridable as well, as it is
</I>&gt;<i> with Content-Disposition.  My recommendation has been:
</I>&gt;<i>
</I>&gt;<i> &lt;a href=image.jpg download&gt;
</I>&gt;<i> &lt;a href=f1d2d2f924e986ac86fdf7b36c94bcdf32beec15.jpg download=picture.jpg&gt;
</I>&gt;<i>
</I>&gt;<i> where the first is equivalent to Content-Disposition: attachment, and the
</I>&gt;<i> second is equivalent to Content-Disposition: attachment;
</I>&gt;<i> filename=picture.jpg.
</I>&gt;<i>
</I>&gt;<i>
</I>This is an interesting variation!  I like that it addresses the issue of
providing a name for the download.  Using the term &quot;download&quot; here is also
nice.

I know that there is also a proposal to add a FileSaver API.  I like that as
well, _but_ it is very nice to be able to simply decorate an anchor tag.  In
many cases, that will be a lot simpler for developers than using JavaScript
to construct a FileSaver.  I think it makes sense to implement both.

On the other thread, Michal Zalewski raised a concern about giving
client-side JS the power to name files.  It looks like that discussion did
not conclude, but I will note that even without the proposal here to name
the download, an attacker could still have control over the downloaded
filename.  They could either manufacture a file using the FileSystem API,
and then get a filesystem: URL to that file, or they could simply use a
server to produce an URL with a C-D header of their choosing.  It seems like
we are well past the point of trying to limit a web page authors ability to
influence the downloaded filename.  Fortunately, however, user agents can
protect the user from potentially harmful downloads.  Chrome for instance
asks the user to confirm the download of a EXE file before we ever write a
file to the filesystem with a .exe extension.

-Darin
</PRE>
























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032444.html">[whatwg] a rel=attachment
</A></li>
	<LI>Next message: <A HREF="032446.html">[whatwg] a rel=attachment
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32445">[ date ]</a>
              <a href="thread.html#32445">[ thread ]</a>
              <a href="subject.html#32445">[ subject ]</a>
              <a href="author.html#32445">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
