<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20a%20MediaSource%20API%20that%20allows%20sending%0A%20media%20data%20to%20a%20HTMLMediaElement&In-Reply-To=%3CCAA0c1bA8sKZ0JVf6yqfbTwby-5J4_Yi%3D9_hUq3QfhHDhtnG7LQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074659.html">
   <LINK REL="Next"  HREF="074676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement</H1>
<!--htdig_noindex-->
    <B>Aaron Colwell</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20for%20a%20MediaSource%20API%20that%20allows%20sending%0A%20media%20data%20to%20a%20HTMLMediaElement&In-Reply-To=%3CCAA0c1bA8sKZ0JVf6yqfbTwby-5J4_Yi%3D9_hUq3QfhHDhtnG7LQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement">acolwell at google.com
       </A><BR>
    <I>Tue Jul 12 13:45:48 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="074659.html">[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
</A></li>
        <LI>Next message: <A HREF="074676.html">[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74674">[ date ]</a>
              <a href="thread.html#74674">[ thread ]</a>
              <a href="subject.html#74674">[ subject ]</a>
              <a href="author.html#74674">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Jul 11, 2011 at 5:54 PM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt;wrote:

&gt;<i> It seems to me that the spec is written assuming only one media element is
</I>&gt;<i> consuming the MediaSource. But nothing stops multiple elements consuming the
</I>&gt;<i> same URL simultaneously. Maybe instead of going through a URL you should add
</I>&gt;<i> API directly to media elements.
</I>&gt;<i>
</I>
You are right that I don't have anything preventing the MediaSource URL from
being passed to multiple media elements. Only one media element will accept
the URL though because whichever one opens the URL first will transition the
source to the OPEN state. Media elements can only open sources in the CLOSED
state. I'm using a URL for initialization to be consistent with how the
media element is initialized in all other cases. I didn't want to create a
new initialization path.

I thought about adding an attribute to HTMLMediaElement that provided a URL
for signalling MediaSource usage. That mechanism would allow you to create a
URL that only works with that element. When this URL is specified, a
MediaSource attribute would be updated on the media element during loading
and JavaScript could use that to pass data to the tag. I couldn't find a
similar pattern in other APIs so I didn't take that path. If people think
that is a better route then I'm all for it.



&gt;<i> bytesAvailable is for flow control? Instead of doing it this way, I would
</I>&gt;<i> follow WebSockets and use a bufferedAmount attribute to indicate how much
</I>&gt;<i> data is currently buffered up. That makes it easy for authors who don't want
</I>&gt;<i> to care about flow control to just append stuff without encountering errors,
</I>&gt;<i> while still allowing authors who care about flow control to do it.
</I>&gt;<i>
</I>&gt;<i>
</I>Yes. The intent was to provide a way for the browser to control how much
data was being pushed into it. It looks like WebSocket will just close the
connection if it doesn't have enough buffer space and the API doesn't appear
to provide a mechanism to predict how much buffered data will trigger a
close. Do we want similar semantics for media? It seems like the browser
should provide some hints to indicate that it is not ok to push hours/days
of data into this interface.

Thanks for your comments.

Aaron

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074659.html">[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
</A></li>
	<LI>Next message: <A HREF="074676.html">[whatwg] Proposal for a MediaSource API that allows sending media data to a HTMLMediaElement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74674">[ date ]</a>
              <a href="thread.html#74674">[ thread ]</a>
              <a href="subject.html#74674">[ subject ]</a>
              <a href="author.html#74674">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
