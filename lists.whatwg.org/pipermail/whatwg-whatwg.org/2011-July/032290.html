<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposal to extend registerProtocolHandler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20to%20extend%20registerProtocolHandler&In-Reply-To=%3CCANMdWTv_W7Rh8YV_OaPH2TmhLkrr3aBhAgscXjRKbpq6X6YVaQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032289.html">
   <LINK REL="Next"  HREF="074564.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposal to extend registerProtocolHandler</H1>
<!--htdig_noindex-->
    <B>Ojan Vafai</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposal%20to%20extend%20registerProtocolHandler&In-Reply-To=%3CCANMdWTv_W7Rh8YV_OaPH2TmhLkrr3aBhAgscXjRKbpq6X6YVaQ%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposal to extend registerProtocolHandler">ojan at chromium.org
       </A><BR>
    <I>Fri Jul  1 13:59:02 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032289.html">[whatwg] AppCache + CORS issue.
</A></li>
        <LI>Next message: <A HREF="074564.html">[whatwg] Proposal to extend registerProtocolHandler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32290">[ date ]</a>
              <a href="thread.html#32290">[ thread ]</a>
              <a href="subject.html#32290">[ subject ]</a>
              <a href="author.html#32290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Do any browser vendors agree with this or have objections? Hixie, this seem
OK to you?

These additions seem safe, simple and enable sites giving users a better
experience.

On Wed, Apr 20, 2011 at 11:32 PM, James Kozianski &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">koz at chromium.org</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I'd like to propose the following changes to the registerProtocolHandler
</I>&gt;<i> spec.
</I>&gt;<i>
</I>&gt;<i> 1. Introduce an isRegistered() function.
</I>&gt;<i>
</I>&gt;<i> Currently if a site wants its users to register it as a handler for a given
</I>&gt;<i> protocol it has two options:
</I>&gt;<i>
</I>&gt;<i>    a) It can call registerProtocolHandler() on page load. (This approach
</I>&gt;<i> was suggested in [1])
</I>&gt;<i>
</I>&gt;<i>    b) It can have a button that the user clicks (or similar) to enact the
</I>&gt;<i> registration.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The former is problematic because the call to registerProtocolHandler will
</I>&gt;<i> cause the browser's UI to notify them of the registration (or prompt them
</I>&gt;<i> to
</I>&gt;<i> make a decision), which is redundant if it occurs on every page load.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The latter is problematic because it puts the onus on each site developer
</I>&gt;<i> to
</I>&gt;<i> provide the UI to allow the user to make the change. Also, as the site
</I>&gt;<i> doesn't know whether the user has already registered the given protocol
</I>&gt;<i> handler, it can't tailor its UI to reflect this. This means the UI either
</I>&gt;<i> always shows, or never shows, both of which are undesirable.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Having an isRegistered() function would allow a site to simply make the RPH
</I>&gt;<i> call conditionally on load, or to provide a UI for it that reflects the
</I>&gt;<i> user's current preference.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2. Introduce an unregisterProtocolHandler() function.
</I>&gt;<i>
</I>&gt;<i> Such a function is desirable because it allows sites to remove outdated
</I>&gt;<i> handlers from clients and would enable clients to provide a UI for managing
</I>&gt;<i> their registered protocol handlers.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 3. Require all URL arguments to have the same origin as the page executing
</I>&gt;<i> the call.
</I>&gt;<i>
</I>&gt;<i> This would would make the behaviour of this set of functions more
</I>&gt;<i> consistent
</I>&gt;<i> (isRegistered() should only work for same-domain queries, to prevent
</I>&gt;<i> information leaking).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> James
</I>&gt;<i>
</I>&gt;<i> [1] - <A HREF="http://www.mail-archive.com/whatwg@lists.whatwg.org/msg14548.html">http://www.mail-archive.com/whatwg@lists.whatwg.org/msg14548.html</A>
</I>&gt;<i>
</I></PRE>


















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032289.html">[whatwg] AppCache + CORS issue.
</A></li>
	<LI>Next message: <A HREF="074564.html">[whatwg] Proposal to extend registerProtocolHandler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32290">[ date ]</a>
              <a href="thread.html#32290">[ thread ]</a>
              <a href="subject.html#32290">[ subject ]</a>
              <a href="author.html#32290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
