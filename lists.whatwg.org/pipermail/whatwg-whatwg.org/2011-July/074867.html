<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Why%20deflate-stream%20is%20required%20to%20be%20enabled%20by%20the%0A%20WebSocket%20API%3F&In-Reply-To=%3CCABLsOLA0z-%2BZ4McW8LH2ziZm-o-x8CcPe%3D_95msWFGyVyiuvGA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074866.html">
   <LINK REL="Next"  HREF="074923.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?</H1>
<!--htdig_noindex-->
    <B>John Tamplin</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Why%20deflate-stream%20is%20required%20to%20be%20enabled%20by%20the%0A%20WebSocket%20API%3F&In-Reply-To=%3CCABLsOLA0z-%2BZ4McW8LH2ziZm-o-x8CcPe%3D_95msWFGyVyiuvGA%40mail.gmail.com%3E"
       TITLE="[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?">jat at google.com
       </A><BR>
    <I>Wed Jul 20 18:12:56 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="074866.html">[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
</A></li>
        <LI>Next message: <A HREF="074923.html">[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74867">[ date ]</a>
              <a href="thread.html#74867">[ thread ]</a>
              <a href="subject.html#74867">[ subject ]</a>
              <a href="author.html#74867">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Jul 20, 2011 at 6:54 PM, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:

&gt;<i> Isn't the obvious solution to both problems to apply compression before
</I>&gt;<i> masking?
</I>&gt;<i>
</I>
Yes.  However, that is not what deflate-stream does.  There has been a
proposal for deflate-frame which would do exactly that, but it has not been
accepted as of yet and there seems to be some resistance to including it in
the base spec at the expense of further delaying it.

deflate-stream was created as a &quot;better than nothing&quot; compression nobody
objected to that served as an example in the spec of an extension.  Since
then, largely due to your work, masking client-&gt;server traffic was added
which reduced the value of deflate-stream in that direction and also
requiring the extension be handled outside the normal framing.

The fact that the WS API would mandate deflate-stream and not allowing
browser to support other extensions would in fact prevent the deployment of
deflate-frame later, or for that matter any other improvements.  I could
hope that browsers would ignore that requirement and support other
extensions, but then the spec isn't reflecting reality.

As a further example, if multiplexing is added later, it may well need to
have compression at a different level (otherwise mux/demux operations have
to decompress and recompress) -- mandating deflate-stream would again
complicate that scenario.

-- 
John A. Tamplin
Software Engineer (GWT), Google

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074866.html">[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
</A></li>
	<LI>Next message: <A HREF="074923.html">[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74867">[ date ]</a>
              <a href="thread.html#74867">[ thread ]</a>
              <a href="subject.html#74867">[ subject ]</a>
              <a href="author.html#74867">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
