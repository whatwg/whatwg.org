<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Timing API proposal for measuring intervals
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timing%20API%20proposal%20for%20measuring%20intervals&In-Reply-To=%3CCAD73mdLvJWVnNOYdCJn10ptMPfU%3D1TvNhEWoo3qKTaHAhNwj8g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074622.html">
   <LINK REL="Next"  HREF="074625.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Timing API proposal for measuring intervals</H1>
<!--htdig_noindex-->
    <B>James Robinson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Timing%20API%20proposal%20for%20measuring%20intervals&In-Reply-To=%3CCAD73mdLvJWVnNOYdCJn10ptMPfU%3D1TvNhEWoo3qKTaHAhNwj8g%40mail.gmail.com%3E"
       TITLE="[whatwg] Timing API proposal for measuring intervals">jamesr at google.com
       </A><BR>
    <I>Thu Jul  7 19:54:11 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="074622.html">[whatwg] Timing API proposal for measuring intervals
</A></li>
        <LI>Next message: <A HREF="074625.html">[whatwg] Timing API proposal for measuring intervals
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74623">[ date ]</a>
              <a href="thread.html#74623">[ thread ]</a>
              <a href="subject.html#74623">[ subject ]</a>
              <a href="author.html#74623">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Jul 7, 2011 at 7:36 PM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt;wrote:

&gt;<i> I like it so far, module bikeshedding. (I might call it
</I>&gt;<i> window.currentTime.)
</I>&gt;<i>
</I>&gt;<i> One question is whether you allow the value to change while a script runs.
</I>&gt;<i> When using the value to schedule animations, it would be helpful for the
</I>&gt;<i> value to only change between stable states.
</I>&gt;<i>
</I>
True.  It's also useful to be able to query the &quot;now&quot; time multiple times
from script when trying to time some action.   I think that animation APIs
(or anything else providing a timestamp) should provide a fixed value but
this attribute should always be up to date.  That said, maybe it should be a
function rather than an attribute to make that point clearer.


&gt;<i> If you refer to this value during requestAnimationFrame, does it give you
</I>&gt;<i> the current time, or the predicted time at which the frame will render?
</I>&gt;<i>
</I>
I think we'll want to use the same mechanism for requestAnimationFrame, but
I'm not yet sure whether we want to provide the current time, predicted
frame time, or both. (CVDisplayLink provides both, for example
<A HREF="http://developer.apple.com/library/mac/#qa/qa1385/_index.html">http://developer.apple.com/library/mac/#qa/qa1385/_index.html</A>).   There's a
thread on this topic on public-web-perf currently, I think we can hash out
the details there.


&gt;<i> Using this value as a clock for media synchronization sounds appealing but
</I>&gt;<i> is complicated by audio clock drift. When you play N seconds of audio, it
</I>&gt;<i> might take slightly more or less time to actually play, so it's hard to keep
</I>&gt;<i> media times perfectly in sync with another timing source. Just something to
</I>&gt;<i> keep in mind.
</I>&gt;<i>
</I>
True.  On OS X, however, the CoreVideo and CoreAudio APIs are specified to
use a unified time base (see
<A HREF="http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CVTimeRef/Reference/reference.html">http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CVTimeRef/Reference/reference.html</A>)
so if we do end up with APIs saying &quot;play this sound at time X&quot;, like Chris
Roger's proposed Web Audio API provides, it'll be really handy if we have a
unified timescale for everyone to refer to.

- James


&gt;<i> Rob
</I>&gt;<i> --
</I>&gt;<i> &quot;If we claim to be without sin, we deceive ourselves and the truth is not
</I>&gt;<i> in us. If we confess our sins, he is faithful and just and will forgive us
</I>&gt;<i> our sins and purify us from all unrighteousness. If we claim we have not
</I>&gt;<i> sinned, we make him out to be a liar and his word is not in us.&quot; [1 John
</I>&gt;<i> 1:8-10]
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074622.html">[whatwg] Timing API proposal for measuring intervals
</A></li>
	<LI>Next message: <A HREF="074625.html">[whatwg] Timing API proposal for measuring intervals
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74623">[ date ]</a>
              <a href="thread.html#74623">[ thread ]</a>
              <a href="subject.html#74623">[ subject ]</a>
              <a href="author.html#74623">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
