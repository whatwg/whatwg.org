<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Why%20deflate-stream%20is%20required%20to%20be%20enabled%20by%20the%0A%20WebSocket%20API%3F&In-Reply-To=%3CPine.LNX.4.64.1107272031190.2079%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032594.html">
   <LINK REL="Next"  HREF="032563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Why%20deflate-stream%20is%20required%20to%20be%20enabled%20by%20the%0A%20WebSocket%20API%3F&In-Reply-To=%3CPine.LNX.4.64.1107272031190.2079%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?">ian at hixie.ch
       </A><BR>
    <I>Wed Jul 27 13:37:33 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032594.html">[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
</A></li>
        <LI>Next message: <A HREF="032563.html">[whatwg] Specification of window.find()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32650">[ date ]</a>
              <a href="thread.html#32650">[ thread ]</a>
              <a href="subject.html#32650">[ subject ]</a>
              <a href="author.html#32650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 19 Jul 2011, Takeshi Yoshino wrote:
&gt;<i> 
</I>&gt;<i> Use of deflate-stream is now mandatory in API spec. I think this kind of 
</I>&gt;<i> requirement is useless. How about leave it up to implementors' decision? 
</I>
Well we don't want optional features, so it's either in or out.


&gt;<i> I think this requirement doesn't really help us enforce endpoints
</I>&gt;<i> initiate/accept WebSocket with the same configuration. Because
</I>&gt;<i> 
</I>&gt;<i> - non-browser UAs are free to be implemented without deflate-stream
</I>
Non-browser clients of Web Sockets are going to be comparatively rare and 
will not have the market power to affect de-facto requirements. So for 
the purpose of the API, they are irrelevant.


&gt;<i> - server developers would see/care only the wire protocol spec
</I>
Server developers are only going to care about what browsers need, not 
what specs say.


&gt;<i> So, server developers would simply make their implementation accept both 
</I>&gt;<i> requests with and without deflate-stream, I think.
</I>
It's fine if they do.

We just need to make sure they don't require it to be supported, or 
require it to not be supported, and thus force us into one or the other. 
The simplest way to prevent that is to make sure all the browsers act the 
same.


&gt;<i> It's not likely that server implementors are influenced by &quot;the 
</I>&gt;<i> WebSocket API&quot; and have their server check if a UA is browser or not and 
</I>&gt;<i> reject requests w/o deflate-stream.
</I>
Not intentionally, maybe, but it is most definitely going to happen.


&gt;<i> The only people who benefit from this requirement is those who implement 
</I>&gt;<i> a server only for their own use and are not interested in serving 
</I>&gt;<i> non-browser clients.
</I>
That will likely be the majority of implementors.


On Wed, 20 Jul 2011, Bjoern Hoehrmann wrote:
&gt;<i> 
</I>&gt;<i> The deflate-stream extension, when used for browser to server messages 
</I>&gt;<i> allows an attacker to put whatever bytes he likes on the wire, after a 
</I>&gt;<i> bit of unpredictable junk. Browser vendors were pretty opposed to that 
</I>&gt;<i> for the normal protocol without extensions, and they were opposed to 
</I>&gt;<i> having some way to make browsers send messages &quot;unmasked&quot;; so it would 
</I>&gt;<i> be very odd for browser vendors to implement the extension. And by the 
</I>&gt;<i> looks of it, the hybi Working Group may well drop deflate-stream now. 
</I>&gt;<i> See &lt;<A HREF="http://www.ietf.org/mail-archive/web/hybi/current/msg07093.html">http://www.ietf.org/mail-archive/web/hybi/current/msg07093.html</A>&gt; 
</I>&gt;<i> and &lt;<A HREF="http://www.ietf.org/mail-archive/web/hybi/current/msg07581.html">http://www.ietf.org/mail-archive/web/hybi/current/msg07581.html</A>&gt;.
</I>
I've changed the spec to make the extension disallowed rather than 
required.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>








<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032594.html">[whatwg] Why deflate-stream is required to be enabled by the WebSocket API?
</A></li>
	<LI>Next message: <A HREF="032563.html">[whatwg] Specification of window.find()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32650">[ date ]</a>
              <a href="thread.html#32650">[ thread ]</a>
              <a href="subject.html#32650">[ subject ]</a>
              <a href="author.html#32650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
