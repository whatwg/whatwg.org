<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Microdata
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Microdata&In-Reply-To=%3Cop.uy8ehjvfsr6mfa%40worf%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064548.html">
   <LINK REL="Next"  HREF="064602.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Microdata</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Microdata&In-Reply-To=%3Cop.uy8ehjvfsr6mfa%40worf%3E"
       TITLE="[whatwg] Microdata">philipj at opera.com
       </A><BR>
    <I>Tue Aug 25 11:47:33 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064548.html">[whatwg] Microdata
</A></li>
        <LI>Next message: <A HREF="064602.html">[whatwg] Microdata
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64559">[ date ]</a>
              <a href="thread.html#64559">[ thread ]</a>
              <a href="subject.html#64559">[ subject ]</a>
              <a href="author.html#64559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 25 Aug 2009 09:43:58 +0200, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;  
wrote:

&gt;<i> On Tue, 25 Aug 2009 00:29:06 +0200, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Mon, 24 Aug 2009, Philip J&#228;genstedt wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I've found two related things that are a bit problematic. First,  
</I>&gt;&gt;&gt;<i> because
</I>&gt;&gt;&gt;<i> itemprops are only associated with ancestor item elements or via the
</I>&gt;&gt;&gt;<i> subject attribute, it's always necessary to find or create a separate
</I>&gt;&gt;&gt;<i> element for the item. This leads to more convoluted markup for small
</I>&gt;&gt;&gt;<i> items, so it would be nice if the first item and itemprop could be on
</I>&gt;&gt;&gt;<i> the same element when it makes sense:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;p item=&quot;vevent&quot; itemprop=&quot;description&quot;&gt;
</I>&gt;&gt;&gt;<i>   Concert at &lt;span itemprop=&quot;dtstart&quot;&gt;19:00&lt;/span&gt; at &lt;span
</I>&gt;&gt;&gt;<i> itemprop=&quot;location&quot;&gt;the beach&lt;/span&gt;.
</I>&gt;&gt;&gt;<i> &lt;/p&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> rather than
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;p item=&quot;vevent&quot;&gt;
</I>&gt;&gt;&gt;<i>   &lt;span itemprop=&quot;description&quot;&gt;
</I>&gt;&gt;&gt;<i>     Concert at &lt;span itemprop=&quot;dtstart&quot;&gt;19:00&lt;/span&gt; at &lt;span
</I>&gt;&gt;&gt;<i> itemprop=&quot;location&quot;&gt;the beach&lt;/span&gt;.
</I>&gt;&gt;&gt;<i>   &lt;/span&gt;
</I>&gt;&gt;&gt;<i> &lt;/p&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As specced now, having itemprop=&quot;&quot; and item=&quot;&quot; on the same element  
</I>&gt;&gt;<i> implies
</I>&gt;&gt;<i> that the value of the property is an item rooted at this element.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Not supporting the above was intentional, to keep the mental model of  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> markup very simple, rather than having shortcuts. (RDFa has lots of
</I>&gt;&gt;<i> shortcuts and it ended up being very difficult to keep the mental model
</I>&gt;&gt;<i> straight.)
</I>&gt;<i>
</I>&gt;<i> There's something like an inverse relationship between simplicity of the  
</I>&gt;<i> syntax and complexity of the resulting markup, the best balance point  
</I>&gt;<i> isn't clear (to me at least). Perhaps option 3 is better, never allowing  
</I>&gt;<i> item+itemprop on the same element.
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> Second, because composite items can only be made by adding item and
</I>&gt;&gt;&gt;<i> itemprop to the same element, the embedded item has to know that it has
</I>&gt;&gt;&gt;<i> a parent and what itemprop it should use to describe itself. James gave
</I>&gt;&gt;&gt;<i> the example of &quot;something like planet where each article could be a
</I>&gt;&gt;&gt;<i> com.example.blog item and within each article there could be any
</I>&gt;&gt;&gt;<i> arbitrary author-supplied microdata&quot; [1]. I also feel that the
</I>&gt;&gt;&gt;<i> item+itemprop syntax for composite items is one of the least intuitive
</I>&gt;&gt;&gt;<i> parts of the current spec. It's easy to get confused about what the  
</I>&gt;&gt;&gt;<i> type
</I>&gt;&gt;&gt;<i> of the item vs the itemprop should be and which item the itemprop
</I>&gt;&gt;&gt;<i> actually belongs to.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Fair points.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Given that flat items like vcard/vevent are likely to be the most  
</I>&gt;&gt;&gt;<i> common
</I>&gt;&gt;&gt;<i> use case I think we should optimize for that. Child items can be  
</I>&gt;&gt;&gt;<i> created
</I>&gt;&gt;&gt;<i> by using a predefined item property: itemprop=&quot;com.example.childtype
</I>&gt;&gt;&gt;<i> item&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ok...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The value of that property would then be the first item in tree-order
</I>&gt;&gt;&gt;<i> (or all items in the subtree, not sure). This way, items would have
</I>&gt;&gt;&gt;<i> better copy-paste resilience as the whole item element could be made
</I>&gt;&gt;&gt;<i> into a top-level item simply by moving it, without meddling with the
</I>&gt;&gt;&gt;<i> itemprop.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That sounds kinda confusing...
</I>&gt;<i>
</I>&gt;<i> More confusing than item+itemprop on the same element? In many cases the  
</I>&gt;<i> property value is the contained text, having it be the contained item  
</I>&gt;<i> node(s) doesn't seem much stranger.
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> If the parent-item (com.example.blog) doesn't know what the child-items
</I>&gt;&gt;&gt;<i> are, it would simply use itemprop=&quot;item&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't understand this at all.
</I>&gt;<i>
</I>&gt;<i> This was an attempt to have anonymous sub-items. Re-thinking this,  
</I>&gt;<i> perhaps a better solution would be to have each item behave in much the  
</I>&gt;<i> same way that the document itself does. That is, simply add items in the  
</I>&gt;<i> subtree without using itemprop and access them with .getItems(itemType)  
</I>&gt;<i> on the outer item.
</I>&gt;<i>
</I>&gt;<i> Comparing the current model with a DOM tree, it seems odd in the a  
</I>&gt;<i> property could be an item. It would be like an element attribute being  
</I>&gt;<i> another element: &lt;outer foo=&quot;&lt;inner/&gt;&quot;/&gt;. That kind of thing could just  
</I>&gt;<i> as well be &lt;outer&gt;&lt;foo&gt;&lt;inner/&gt;&lt;/foo&gt;&lt;/outer&gt;, &lt;outer&gt;&lt;inner  
</I>&gt;<i> type=&quot;foo&quot;/&gt;&lt;/outer&gt; or even &lt;outer&gt;&lt;inner/&gt;&lt;/outer&gt; if the relationship  
</I>&gt;<i> between the elements is clear just from the fact that they have a  
</I>&gt;<i> parent-child relationship (usually the case).
</I>&gt;<i>
</I>&gt;<i> All examples of nested items in the spec are on the form
</I>&gt;<i>
</I>&gt;<i> &lt;p itemprop=&quot;subtype&quot; item&gt;
</I>&gt;<i>
</I>&gt;<i> These would be replaced with
</I>&gt;<i>
</I>&gt;<i> &lt;p item=&quot;subtype&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> It's only in the case where both itemprop and item have a type that an  
</I>&gt;<i> extra level of nesting will be needed and I expect that to be the  
</I>&gt;<i> exception. Changing the model to something more DOM-tree-like is  
</I>&gt;<i> probably going to be easier to understand for many web developers. It  
</I>&gt;<i> would also fix the problem in my other mail where it's a bit tricky to  
</I>&gt;<i> determine via the DOM API whether a property is a string or an item.  
</I>&gt;<i> When on the topic of the DOM API,  
</I>&gt;<i> document.getItems(&quot;outer&quot;)[0].getItems(&quot;inner&quot;)[0] would be so much  
</I>&gt;<i> clearer than what we currently have.
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> Example:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;p item=&quot;vcard&quot; itemprop=&quot;n item&quot;&gt;
</I>&gt;&gt;&gt;<i>   My name is &lt;span itemprop=&quot;given-name&quot;&gt;Philip&lt;/span&gt;
</I>&gt;&gt;&gt;<i>   &lt;span itemprop=&quot;family-name&quot;&gt;J&#228;genstedt&lt;/span&gt;.
</I>&gt;&gt;&gt;<i> &lt;/p&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't understand what this maps to at all.
</I>&gt;<i>
</I>&gt;<i> The same as
</I>&gt;<i>
</I>&gt;<i> &lt;p item=&quot;vcard&quot;&gt;
</I>&gt;<i>    &lt;span itemprop=&quot;n&quot; item&gt;
</I>&gt;<i>      My name is &lt;span itemprop=&quot;given-name&quot;&gt;Philip&lt;/span&gt;
</I>&gt;<i>      &lt;span itemprop=&quot;family-name&quot;&gt;J&#228;genstedt&lt;/span&gt;.
</I>&gt;<i>    &lt;/span&gt;
</I>&gt;<i> &lt;/p&gt;
</I>&gt;<i>
</I>&gt;<i> Unless I've misunderstood the &quot;n&quot; in vcard (there's no example in the  
</I>&gt;<i> spec). But let's move on.
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> I'll admit that my examples are a bit simple, but the main point in my
</I>&gt;&gt;&gt;<i> opinion is to make item+itemprop less confusing. There are basically
</I>&gt;&gt;&gt;<i> only 3 options:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 1. for compositing items (like now)
</I>&gt;&gt;&gt;<i> 2. as shorthand on the top-level item (my suggestion)
</I>&gt;&gt;&gt;<i> 3. disallow
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'd primarily like for 1 and 2 to be tested, but 3 is a real option  
</I>&gt;&gt;&gt;<i> too.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> [1] <A HREF="http://krijnhoetmer.nl/irc-logs/whatwg/20090824#l-375">http://krijnhoetmer.nl/irc-logs/whatwg/20090824#l-375</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We can't disallow nesting items as values of properties, there are a  
</I>&gt;&gt;<i> whole
</I>&gt;&gt;<i> bunch of use cases that depend on it.
</I>&gt;<i>
</I>&gt;<i> 3 is not a suggestion to disallow nesting, but to change the syntax for  
</I>&gt;<i> it.
</I>&gt;<i>
</I>&gt;&gt;<i> Could you show how your syntax proposals would look when marking up the
</I>&gt;&gt;<i> following data?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> // JSON DESCRIPTION OF MARKED UP DATA
</I>&gt;&gt;<i> // document URL: <A HREF="http://www.example.org/sample/test.html">http://www.example.org/sample/test.html</A>
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i>   &quot;items&quot;: [
</I>&gt;&gt;<i>     {
</I>&gt;&gt;<i>       &quot;type&quot;: &quot;com.example.product&quot;,
</I>&gt;&gt;<i>       &quot;properties&quot;: {
</I>&gt;&gt;<i>         &quot;about&quot;: [ &quot;<A HREF="http://example.com/products/bt200x">http://example.com/products/bt200x</A>&quot; ],
</I>&gt;&gt;<i>         &quot;image&quot;: [ &quot;<A HREF="http://www.example.org/sample/bt200x.jpeg">http://www.example.org/sample/bt200x.jpeg</A>&quot; ] //  
</I>&gt;&gt;<i> please keep this one outside the item in the DOM
</I>&gt;&gt;<i>         &quot;name&quot;: [ &quot;GPS Receiver BT 200X&quot; ],
</I>&gt;&gt;<i>         &quot;reldate&quot;: [ &quot;2009-01-22&quot; ],
</I>&gt;&gt;<i>         &quot;review&quot;: [
</I>&gt;&gt;<i>           {
</I>&gt;&gt;<i>             &quot;type&quot;: &quot;&quot;,
</I>&gt;&gt;<i>             &quot;properties&quot;: {
</I>&gt;&gt;<i>               &quot;reviewer&quot;: [ &quot;<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>&quot; ],
</I>&gt;&gt;<i>               &quot;text&quot;: [ &quot;Lots of memory, not much battery, very little  
</I>&gt;&gt;<i> accuracy.&quot; ]
</I>&gt;&gt;<i>             }
</I>&gt;&gt;<i>           }
</I>&gt;&gt;<i>         ],
</I>&gt;&gt;<i>       }
</I>&gt;&gt;<i>     },
</I>&gt;&gt;<i>     {
</I>&gt;&gt;<i>       &quot;type&quot;: &quot;work&quot;,
</I>&gt;&gt;<i>       &quot;properties&quot;: {
</I>&gt;&gt;<i>         &quot;about&quot;: [ &quot;<A HREF="http://www.example.org/sample/image.jpeg">http://www.example.org/sample/image.jpeg</A>&quot; ],
</I>&gt;&gt;<i>         &quot;license&quot;: [  
</I>&gt;&gt;<i> &quot;<A HREF="http://www.opensource.org/licenses/mit-license.php">http://www.opensource.org/licenses/mit-license.php</A>&quot; ]
</I>&gt;&gt;<i>         &quot;title&quot;: [ &quot;My Pond&quot; ],
</I>&gt;&gt;<i>       }
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>   ]
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here's how it would be marked up today:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;section id=&quot;bt200x&quot; item=com.example.product&gt;
</I>&gt;&gt;<i>  &lt;link itemprop=about href=&quot;<A HREF="http://example.com/products/bt200x">http://example.com/products/bt200x</A>&quot;&gt;
</I>&gt;&gt;<i>  &lt;h1 itemprop=name&gt;GPS Receiver BT 200X&lt;/h1&gt;
</I>&gt;&gt;<i>  &lt;p&gt;Rating: &amp;#x22C6;&amp;#x22C6;&amp;#x22C6;&amp;#x2729;&amp;#x2729; &lt;meta  
</I>&gt;&gt;<i> itemprop=rating content=&quot;2&quot;&gt;&lt;/p&gt;
</I>&gt;&gt;<i>  &lt;p&gt;Release Date: &lt;time itemprop=&quot;reldate&quot;  
</I>&gt;&gt;<i> datetime=&quot;2009-01-22&quot;&gt;January 22&lt;/time&gt;&lt;/p&gt;
</I>&gt;&gt;<i>  &lt;p itemprop=review item&gt;&lt;a itemprop=reviewer  
</I>&gt;&gt;<i> href=&quot;<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>&quot;&gt;Ian&lt;/a&gt;:
</I>&gt;&gt;<i>  &quot;&lt;span itemprop=text&gt;Lots of memory, not much battery, very little  
</I>&gt;&gt;<i> accuracy.&lt;/span&gt;&quot;&lt;/p&gt;
</I>&gt;&gt;<i> &lt;/section&gt;
</I>&gt;&gt;<i> &lt;figure item=work&gt;
</I>&gt;&gt;<i>  &lt;img itemprop=about src=&quot;image.jpeg&quot;&gt;
</I>&gt;&gt;<i>  &lt;legend&gt;
</I>&gt;&gt;<i>   &lt;p&gt;&lt;cite itemprop=&quot;title&quot;&gt;My Pond&lt;/cite&gt;&lt;/p&gt;
</I>&gt;&gt;<i>   &lt;p&gt;&lt;small&gt;Licensed under the &lt;a itemprop=&quot;license&quot;
</I>&gt;&gt;<i>   href=&quot;<A HREF="http://www.opensource.org/licenses/mit-license.php">http://www.opensource.org/licenses/mit-license.php</A>&quot;&gt;MIT
</I>&gt;&gt;<i>   license&lt;/a&gt;.&lt;/small&gt;
</I>&gt;&gt;<i>  &lt;/legend&gt;
</I>&gt;&gt;<i> &lt;/figure&gt;
</I>&gt;&gt;<i> &lt;p&gt;&lt;img subject=&quot;bt200x&quot; itemprop=&quot;image&quot; src=&quot;bt200x.jpeg&quot;  
</I>&gt;&gt;<i> alt=&quot;...&quot;&gt;&lt;/p&gt;
</I>&gt;<i>
</I>&gt;<i> To be clear, I'm now suggesting that item+itemprop never be allowed on  
</I>&gt;<i> the same item (option 3). Nesting items is accomplished simply by  
</I>&gt;<i> nesting them.
</I>&gt;<i>
</I>&gt;<i> In your example, the only change would be this line:
</I>&gt;<i>
</I>&gt;<i>   &lt;p item=review&gt;&lt;a itemprop=reviewer href=&quot;<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>&quot;&gt;Ian&lt;/a&gt;:
</I>&gt;<i>
</I>&gt;<i> (Of course some tokens may need to change to be renamed to make sense as  
</I>&gt;<i> item names rather than itemprops.)
</I>&gt;<i>
</I>&gt;<i> As an aside, subject should also be allowed to associate items with its  
</I>&gt;<i> parent item, just like for itemprop.
</I>&gt;<i>
</I>&gt;<i> IMHO, this syntax is more copy-paste robust, favors the common cases  
</I>&gt;<i> over the complex cases and makes the model more intuitive to those who  
</I>&gt;<i> understand XML and/or DOM.
</I>
<A HREF="http://krijnhoetmer.nl/irc-logs/whatwg/20090825#l-469">http://krijnhoetmer.nl/irc-logs/whatwg/20090825#l-469</A>

After this discussion it is (even more) clear that at least option 3 is  
not just a syntax change but rather a change to the underlying model from  
nested name-value groups to a tree of unnamed (but not untyped) nodes  
which each have name-value groups, somewhat like DOM.

Pros:

* No itemprop+item syntax.

But simpler syntax might be compensated for by more nesting... If  
itemprop+item sticks, then some examples in the spec that use both  
itemprop name and item type would help. Something like &lt;span  
item=&quot;book&quot;&gt;&lt;span itemprop=&quot;author&quot; item=&quot;vcard&quot;&gt;...&lt;/span&gt;&lt;/span&gt;

It will be very interesting to see the results from usability testing if  
itemprop+item actually will confuse authors.

* Items don't need to &quot;know&quot; that they are part of a bigger item.

But if the two items don't know of each other then they probably don't  
belong together. The real issue is that item elements that happen to be  
children of another item element (like in Jame's blog planet example)  
aren't going to be top-level items and are simply ignored. Workarounds are  
possible, but ensuring that items are in different subtrees is impossible  
if you only control a document fragment that is included in a larger  
document. I'd suggest simply letting any item element that doesn't have an  
itemprop attribute be a top-level item. Other solutions possible.

Cons:

* It would make converting microdata into a JavaScript object awkward  
because there's no such thing as unnamed properties. On the other hand, no  
matter the syntax you'll probably end up with vocabulary-specific mappings  
to JS(ON).

* It assumes that the type of the subitem to be enough to determine how it  
relates to the item, not property name + subitem type as now. This might  
be an even worse source of confusion than itemprop+item.

Looking at the pros/cons I can only conclude that I dislike all options  
equally. Several of these issues leak over to the DOM API, but I've  
already sent feedback on that separately. I hope there will be more  
suggestions to consider.

-- 
Philip J&#228;genstedt
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064548.html">[whatwg] Microdata
</A></li>
	<LI>Next message: <A HREF="064602.html">[whatwg] Microdata
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64559">[ date ]</a>
              <a href="thread.html#64559">[ thread ]</a>
              <a href="subject.html#64559">[ subject ]</a>
              <a href="author.html#64559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
