<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Global Script proposal.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Global%20Script%20proposal.&In-Reply-To=%3C5dd9e5c50908181445k1af89641xab8ae53c84a60783%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022132.html">
   <LINK REL="Next"  HREF="022143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Global Script proposal.</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Global%20Script%20proposal.&In-Reply-To=%3C5dd9e5c50908181445k1af89641xab8ae53c84a60783%40mail.gmail.com%3E"
       TITLE="[whatwg] Global Script proposal.">jorlow at chromium.org
       </A><BR>
    <I>Tue Aug 18 14:45:17 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022132.html">[whatwg] Global Script proposal.
</A></li>
        <LI>Next message: <A HREF="022143.html">[whatwg] Global Script proposal.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22134">[ date ]</a>
              <a href="thread.html#22134">[ thread ]</a>
              <a href="subject.html#22134">[ subject ]</a>
              <a href="author.html#22134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Aug 18, 2009 at 12:32 PM, Aaron Boodman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">aa at google.com</A>&gt; wrote:

&gt;<i> On Tue, Aug 18, 2009 at 12:20 PM, Mike Wilson&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mikewse at hotmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; Michael Nordman wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Tue, Aug 18, 2009 at 6:07 AM, Mike Wilson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mikewse at hotmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Threading:
</I>&gt;<i> &gt;&gt; This is the unavoidable question ;-) How do you envision
</I>&gt;<i> &gt;&gt; multiple threads accessing this shared context to be
</I>&gt;<i> &gt;&gt; coordinated?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Nominally, they don't. In our design for chrome's multi-process
</I>&gt;<i> &gt; architecture, the global-script would only be shared within a single
</I>&gt;<i> &gt; 'renderer' process (in which all page's, and global-scripts, execute in a
</I>&gt;<i> &gt; single thread).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This might not be the same in other browsers. I think you need to define
</I>&gt;<i> how
</I>&gt;<i> &gt; concurrent access should be handled so it can be applied to f ex a
</I>&gt;<i> browser
</I>&gt;<i> &gt; using a single process but a thread per top-level window. If I understand
</I>&gt;<i> &gt; correctly it would be something like letting only one thread call inside
</I>&gt;<i> the
</I>&gt;<i> &gt; GlobalScript context at a time?
</I>&gt;<i>
</I>&gt;<i> I think it is likely impractical for windows that have javascript
</I>&gt;<i> access to each other to be on separate threads.
</I>&gt;<i>
</I>&gt;<i> The relationship between the global script and pages accessing it is
</I>&gt;<i> similar to a parent windows and an iframe that are on the same origin,
</I>&gt;<i> or to a window and a popup window on the same origin.
</I>&gt;<i>
</I>&gt;<i> Objects should be able to be freely passed across both sides. For
</I>&gt;<i> example, the global script should be able to have a JavaScript object
</I>&gt;<i> graph which represents some application state and share it (by
</I>&gt;<i> reference) with its clients.
</I>&gt;<i>
</I>&gt;<i> I don't see how it is realistic to do this when the windows are
</I>&gt;<i> separated by a thread boundary.
</I>&gt;<i>
</I>&gt;<i> Therefore, I would say it is totally valid for a UA to put a bunch of
</I>&gt;<i> windows that want to use the same global script URL in different
</I>&gt;<i> threads, but it should group them by thread. Each thread should get
</I>&gt;<i> its own global script that is shared among the windows that are on
</I>&gt;<i> that thread.
</I>

Btw, I thought I'd just point out that the proposal mentions this case:
 &quot;From the proposal text: &quot;All pages connected to the same Global Script
should run on the same thread, in the same process.  Since this is not
always technically possible, it should be legal (and not break the
applications) for there to be duplicate global script contexts within a UA&quot;.
 I'm glad this came up, however, since now it's more clear why such language
is necessary.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090818/8716c9e6/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090818/8716c9e6/attachment.htm</A>&gt;
</PRE>



















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022132.html">[whatwg] Global Script proposal.
</A></li>
	<LI>Next message: <A HREF="022143.html">[whatwg] Global Script proposal.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22134">[ date ]</a>
              <a href="thread.html#22134">[ thread ]</a>
              <a href="subject.html#22134">[ subject ]</a>
              <a href="author.html#22134">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
