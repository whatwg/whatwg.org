<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] BWTP for WebSocket transfer protocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20BWTP%20for%20WebSocket%20transfer%20protocol&In-Reply-To=%3C4A7CC032.4080409%40mortbay.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064084.html">
   <LINK REL="Next"  HREF="064096.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] BWTP for WebSocket transfer protocol</H1>
<!--htdig_noindex-->
    <B>Greg Wilkins</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20BWTP%20for%20WebSocket%20transfer%20protocol&In-Reply-To=%3C4A7CC032.4080409%40mortbay.com%3E"
       TITLE="[whatwg] BWTP for WebSocket transfer protocol">gregw at mortbay.com
       </A><BR>
    <I>Fri Aug  7 17:00:50 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064084.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
        <LI>Next message: <A HREF="064096.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64095">[ date ]</a>
              <a href="thread.html#64095">[ thread ]</a>
              <a href="subject.html#64095">[ subject ]</a>
              <a href="author.html#64095">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Maciej Stachowiak wrote:
&gt;<i> 
</I>&gt;<i> On Aug 7, 2009, at 12:25 AM, Greg Wilkins wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But if your starting point is a working HTTP client or server, then
</I>&gt;&gt;<i> the work needed to implement BWTP should not be too significant,
</I>&gt;&gt;<i> as the additional complexities (Header fields and mime encoded
</I>&gt;&gt;<i> content) are handle almost identically to HTTP.
</I>&gt;<i> 
</I>&gt;<i> From my review of the spec so far, it doesn't look like we'd be able to
</I>&gt;<i> reuse much of our existing HTTP client implementation, at least not
</I>&gt;<i> easily. The general header field parsing may be the same, but that code
</I>&gt;<i> is trivial. The complex parts are the handling of specific headers,
</I>&gt;<i> caching and connection management, and in most http libraries that code
</I>&gt;<i> is not structured in a way that makes it easy to pick and choose. My
</I>&gt;<i> tentative estimation is that the implementation effort for BWTP would be
</I>&gt;<i> considerably higher. That's not to say it's a showstopper, it just means
</I>&gt;<i> there is a tradeoff between additional functionality and implementation
</I>&gt;<i> complexity.
</I>
Maceij,

That's valuable feedback.  My experience is mostly the server side
and I think when it comes to connection handling the server has an
easier time of it than the client - so I can see that BWTP would
have more of an impact on the client.

Remember, at this stage BWTP is a thought experiment, so it is
definitely easy to adapt to new ideas or drop features that are
too complex for the benefit they give.

So are there any changes or omissions that you can suggest that
would make a client implementation easier?

For example, I proposed the default header mechanism to address
concerns Ian expressed about per message byte count.    However,
this is not something that HTTP does (and we get by with hundreds
of bytes per request), so perhaps we could leave out the default
Header mechanism at the price of more bytes per message?

Also there is the possibility of making features like multiplexing
optional and negotiated.   This would allow  simple non-multiplexing
implementations, but might cause additional complexity in negotiation.
That really comes down to how important people think multiplexing is.
I think that it is moderately important because I can imagine pages
with 10s of individual widgets, each opening a websocket, so my
server will be looking at 10x the number of connections per user.
If users open multiple windows, then it's 20x!   On the server,
connections are pretty cheap, but not that cheap.


cheers













</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064084.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
	<LI>Next message: <A HREF="064096.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64095">[ date ]</a>
              <a href="thread.html#64095">[ thread ]</a>
              <a href="subject.html#64095">[ subject ]</a>
              <a href="author.html#64095">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
