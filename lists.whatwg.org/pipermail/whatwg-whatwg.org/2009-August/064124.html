<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Codecs for &lt;audio&gt; and &lt;video&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Codecs%20for%20%3Caudio%3E%20and%20%3Cvideo%3E&In-Reply-To=%3CC18755BD-80F6-4076-BED8-F4E5C9272883%40mimectl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064121.html">
   <LINK REL="Next"  HREF="064151.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Codecs for &lt;audio&gt; and &lt;video&gt;</H1>
<!--htdig_noindex-->
    <B>Sam Dutton</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Codecs%20for%20%3Caudio%3E%20and%20%3Cvideo%3E&In-Reply-To=%3CC18755BD-80F6-4076-BED8-F4E5C9272883%40mimectl%3E"
       TITLE="[whatwg] Codecs for &lt;audio&gt; and &lt;video&gt;">Sam.Dutton at bbc.co.uk
       </A><BR>
    <I>Sun Aug  9 07:23:15 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064121.html">[whatwg] Codecs for &lt;audio&gt; and &lt;video&gt;
</A></li>
        <LI>Next message: <A HREF="064151.html">[whatwg] Codecs for &lt;audio&gt; and &lt;video&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64124">[ date ]</a>
              <a href="thread.html#64124">[ thread ]</a>
              <a href="subject.html#64124">[ subject ]</a>
              <a href="author.html#64124">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>As an aside to Chris McCormick's comments, I wonder if it might also be useful/possible/appropriate (or not) to provide access to media data in the way that the ActionScript computeSpectrum function does: 

<A HREF="http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/media/SoundMixer.html#computeSpectrum%28%29">http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/media/SoundMixer.html#computeSpectrum%28%29</A>

Sample visualization using Canvas with computeSpectrum: <A HREF="http://www2.nihilogic.dk/labs/canvas_music_visualization/">http://www2.nihilogic.dk/labs/canvas_music_visualization/</A>

Sam Dutton

----------------------------------------------------------------------

Message: 1
Date: Sun, 9 Aug 2009 11:16:01 +1000
From: Silvia Pfeiffer &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt;
Subject: Re: [whatwg] Codecs for &lt;audio&gt; and &lt;video&gt;
To: Chris McCormick &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chris at mccormick.cx</A>&gt;
Cc: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at lists.whatwg.org</A>
Message-ID:
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">2c0e02830908081816v74711d64ya72c8cc11550baa4 at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Aug 9, 2009 at 3:15 AM, Chris McCormick&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chris at mccormick.cx</A>&gt; wrote:
&gt;<i> On Wed, Jul 08, 2009 at 09:24:42AM -0700, Charles Pritchard wrote:
</I>&gt;&gt;<i> There are two use cases that I think are important: a codec
</I>&gt;&gt;<i> implementation (let's use Vorbis),
</I>&gt;&gt;<i> and an accessibility implementation, working with a &lt;canvas&gt; element.
</I>&gt;<i>
</I>&gt;<i> Here are a few more use-cases that many people would consider just as
</I>&gt;<i> important:
</I>&gt;<i>
</I>&gt;<i> * Browser based music software and synthesis toys.
</I>&gt;<i> * New types of 'algorithmic' music like that pioneered by Brian Eno.
</I>&gt;<i> * Browser based games which want to use procedural audio instead of
</I>&gt;<i> pre-rendered sound effects.
</I>&gt;<i>
</I>&gt;<i> I'd like to reiterate the previously expressed sentiment that only implementing
</I>&gt;<i> pre-rendered audio playback is like having a browser that only supports static
</I>&gt;<i> images loaded from the server instead of animations and &lt;canvas&gt; tags.
</I>&gt;<i>
</I>&gt;<i> What is really needed is a DSP vector processor which runs outside of ECMA
</I>&gt;<i> script, but with a good API so that the ECMAscripts can talk to it directly.
</I>&gt;<i> Examples of reference software, mostly open source, which do this type of thing
</I>&gt;<i> follow:
</I>&gt;<i>
</I>&gt;<i> * Csound
</I>&gt;<i> * Supercollider
</I>&gt;<i> * Pure Data
</I>&gt;<i> * Nyquist
</I>&gt;<i> * Chuck
</I>&gt;<i> * Steinberg VSTs
</I>&gt;<i>
</I>&gt;<i> I am going to use the terms &quot;signal vector&quot;, &quot;audio buffer&quot;, and &quot;array&quot;
</I>&gt;<i> interchangeably below.
</I>&gt;<i>
</I>&gt;<i> Four major types of synthesis would be useful, but they are pretty much
</I>&gt;<i> isomorphic, so any one of them could be implemented as a base-line:
</I>&gt;<i>
</I>&gt;<i> * Wavetable (implement vector write/read/lookup operators)
</I>&gt;<i> * FM &amp; AM (implement vector + and * operators)
</I>&gt;<i> * Subtractive (implement unit delay from which you can build filters)
</I>&gt;<i> * Frequency domain (implemnt FFT and back again)
</I>&gt;<i>
</I>&gt;<i> Of these, I feel that wavetable synthesis should be the first type of synthesis
</I>&gt;<i> to be implemented, since most of the code for manipulating audio buffers is
</I>&gt;<i> already going to be in the browsers and exposing those buffers shouldn't be
</I>&gt;<i> hugely difficult. Basically what this would take is ensuring some things about
</I>&gt;<i> the audio tag:
</I>&gt;<i>
</I>&gt;<i> * Supports playback of arbitrarily small buffers.
</I>&gt;<i> * Seamlessly loops those small buffers.
</I>&gt;<i> * Allows read/write access to those buffers from ECMAscript.
</I>&gt;<i>
</I>&gt;<i> Given the above, the other types of synthesis are possible, albeit slowly. For
</I>&gt;<i> example, FM &amp; AM synthesis are possible by adding adding/multiplying vectors of
</I>&gt;<i> sine data together into a currently looping audio buffer. Subtractive synthesis
</I>&gt;<i> is possible by adding delayed versions of the data in the buffer to itself.
</I>&gt;<i> Frequency domain synthesis is possible by analysing the data in the buffer with
</I>&gt;<i> FFT (and reverse FFT) and writing back new data. I see this API as working as
</I>&gt;<i> previously posted, by Charles Prichard, but with the following extra
</I>&gt;<i> possibility:
</I>&gt;<i>
</I>&gt;<i> &lt;audio id='mybuffer'&gt;
</I>&gt;<i> buffer = document.getElementById(&quot;mybuffer&quot;);
</I>&gt;<i> // here myfunc is a function which will change
</I>&gt;<i> // the audio buffer each time the buffer loops
</I>&gt;<i> buffer.loopCallback = myfunc;
</I>&gt;<i> buffer.loop = True;
</I>&gt;<i> buffer.play();
</I>&gt;<i>
</I>&gt;<i> Of course, the ECMA script is probably going to be too slow in the short term,
</I>&gt;<i> so moving forward it would be great if there was a library/API which can do the
</I>&gt;<i> following vector operations in the background at a speed faster than doing them
</I>&gt;<i> directly, element by element inside ECMAscript (a bit like Python's Numeric
</I>&gt;<i> module). All inputs and outputs are signal vectors/audio tag buffers:
</I>&gt;<i>
</I>&gt;<i> * + - add two signal vectors (2 input, 1 output)
</I>&gt;<i> * * - multiply two signal vectors (2 input, 1 output)
</I>&gt;<i> * z - delay a signal vector with customisable sample length (2 input, 1 output)
</I>&gt;<i> * read - do a table lookup (1 input, 1 output)
</I>&gt;<i> * write - do a table write (2 input, 1 output)
</I>&gt;<i> * copy - memcpy a signal vector (1 input, 1 output)
</I>&gt;<i> * fft do a fast fourier transform - (1 input, 2 output)
</I>&gt;<i> * rfft do a reverse fast fourier transform - (2 inputs, 1 output)
</I>&gt;<i>
</I>&gt;<i> It would be so great if it was possible to unify the above into an API that
</I>&gt;<i> looked and worked something like this:
</I>&gt;<i>
</I>&gt;<i> &lt;audio id='mybuffer'&gt;
</I>&gt;<i>
</I>&gt;<i> outbuffer = document.getElementById(&quot;mybuffer&quot;);
</I>&gt;<i>
</I>&gt;<i> b = new AudioBuffer(64)
</I>&gt;<i> for (x=0; x&lt;64; x++)
</I>&gt;<i> ? ? ? ?b[x] = Math.sin(x / 64 * Math.PI)a;
</I>&gt;<i>
</I>&gt;<i> // inside the loopCallback do a vector multiplication of the data in our buffer
</I>&gt;<i> // with a sine wave we created earlier.
</I>&gt;<i> outbuffer.multiply(b);
</I>&gt;<i>
</I>
Why don't you just implement an example in javascript to show off what
you're talking about and make a use case for having it implemented
inside the browsers?

Cheers,
Silvia,

<A HREF="http://www.bbc.co.uk/">http://www.bbc.co.uk/</A>
This e-mail (and any attachments) is confidential and may contain personal views which are not the views of the BBC unless specifically stated.
If you have received it in error, please delete it from your system.
Do not use, copy or disclose the information in any way nor act in reliance on it and notify the sender immediately.
Please note that the BBC monitors e-mails sent or received.
Further communication will signify your consent to this.
					
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090809/db3df316/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090809/db3df316/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064121.html">[whatwg] Codecs for &lt;audio&gt; and &lt;video&gt;
</A></li>
	<LI>Next message: <A HREF="064151.html">[whatwg] Codecs for &lt;audio&gt; and &lt;video&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64124">[ date ]</a>
              <a href="thread.html#64124">[ thread ]</a>
              <a href="subject.html#64124">[ subject ]</a>
              <a href="author.html#64124">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
