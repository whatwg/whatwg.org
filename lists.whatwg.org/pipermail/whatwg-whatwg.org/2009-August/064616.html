<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Storage mutex and cookies can lead to browser deadlock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Storage%20mutex%20and%20cookies%20can%20lead%20to%20browser%20deadlock&In-Reply-To=%3C5dd9e5c50908261454t17269d3bp2f5da554fe964b40%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064615.html">
   <LINK REL="Next"  HREF="064617.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Storage mutex and cookies can lead to browser deadlock</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Storage%20mutex%20and%20cookies%20can%20lead%20to%20browser%20deadlock&In-Reply-To=%3C5dd9e5c50908261454t17269d3bp2f5da554fe964b40%40mail.gmail.com%3E"
       TITLE="[whatwg] Storage mutex and cookies can lead to browser deadlock">jorlow at chromium.org
       </A><BR>
    <I>Wed Aug 26 14:54:49 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064615.html">[whatwg] Storage mutex and cookies can lead to browser deadlock
</A></li>
        <LI>Next message: <A HREF="064617.html">[whatwg] Storage mutex and cookies can lead to browser deadlock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64616">[ date ]</a>
              <a href="thread.html#64616">[ thread ]</a>
              <a href="subject.html#64616">[ subject ]</a>
              <a href="author.html#64616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Is there any data (or any way to collect the data) on how much of the web IE
and Chrome's current behavior has broken?  Given that there hasn't been
panic in the streets, I'm assuming approximately 0%?

Given that web developers have never had any guarantees for cookie
access/setting in terms of network communications and given that (it sounds
like) it won't break the web, maybe we should ditch the idea of locking
during cookie access/setting?

On Wed, Aug 26, 2009 at 2:42 PM, Drew Wilson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">atwilson at google.com</A>&gt; wrote:

&gt;<i> We discussed this in more detail here:
</I>&gt;<i> <A HREF="http://www.mail-archive.com/whatwg@lists.whatwg.org/msg13799.html">http://www.mail-archive.com/whatwg@lists.whatwg.org/msg13799.html</A>
</I>&gt;<i>
</I>&gt;<i> At the time, I suggested not protecting cookies with a mutex (allow
</I>&gt;<i> asynchronous access - the current behavior on IE and Chrome), which made the
</I>&gt;<i> monocles pop out of everyone's eyes :)
</I>&gt;<i>
</I>&gt;<i> -atw
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Aug 26, 2009 at 2:21 PM, Jens Alfke &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">snej at google.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Aug 26, 2009, at 2:11 PM, Drew Wilson wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  My recollection is that we prohibit worker access to cookies for exactly
</I>&gt;&gt;&gt;<i> this reason (WorkerGlobalScope does not expose a &quot;cookies&quot; attribute).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Looks like you're right; section 5 of the Web Workers spec says:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The DOM APIs (Node objects, Document objects, etc) are not available to
</I>&gt;&gt;&gt;<i> workers in this version of this specification.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  and there's no defined way to access cookies except through Document.
</I>&gt;&gt;<i> Crisis averted.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (If the spec does get modified to allow local-storage access from worker
</I>&gt;&gt;<i> threads, though, this same problem will arise, since they use the same
</I>&gt;&gt;<i> lock.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#8212;Jens
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090826/16f4f961/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090826/16f4f961/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064615.html">[whatwg] Storage mutex and cookies can lead to browser deadlock
</A></li>
	<LI>Next message: <A HREF="064617.html">[whatwg] Storage mutex and cookies can lead to browser deadlock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64616">[ date ]</a>
              <a href="thread.html#64616">[ thread ]</a>
              <a href="subject.html#64616">[ subject ]</a>
              <a href="author.html#64616">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
