<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposed changes to the History API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposed%20changes%20to%20the%20History%20API&In-Reply-To=%3C5dd9e5c50908201533n2e2a3cccocaa31d60843ff52d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022174.html">
   <LINK REL="Next"  HREF="022178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposed changes to the History API</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposed%20changes%20to%20the%20History%20API&In-Reply-To=%3C5dd9e5c50908201533n2e2a3cccocaa31d60843ff52d%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposed changes to the History API">jorlow at chromium.org
       </A><BR>
    <I>Thu Aug 20 15:33:00 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022174.html">[whatwg] Proposed changes to the History API
</A></li>
        <LI>Next message: <A HREF="022178.html">[whatwg] Proposed changes to the History API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22175">[ date ]</a>
              <a href="thread.html#22175">[ thread ]</a>
              <a href="subject.html#22175">[ subject ]</a>
              <a href="author.html#22175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Aug 20, 2009 at 3:13 PM, Justin Lebar &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">justin.lebar at gmail.com</A>&gt;wrote:

&gt;<i> On Thu, Aug 20, 2009 at 11:20 AM, Jeremy Orlow&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at chromium.org</A>&gt; wrote:
</I>&gt;<i> &gt; I see.  It makes more sense why you mentioned the session storage element
</I>&gt;<i> &gt; then.  Note that there has been some discussion about whether session
</I>&gt;<i> &gt; storage should survive crashes, but I know Safari and Chrome are
</I>&gt;<i> currently
</I>&gt;<i> &gt; planning to _not_ serialize it to disk.
</I>&gt;<i>
</I>&gt;<i> I just did a quick test, and it appears that Firefox does save
</I>&gt;<i> sessionStorage across browser sessions, but IE8 does not.
</I>&gt;<i>
</I>&gt;<i> Leaving aside the question of what the right thing to do is with
</I>&gt;<i> sessionStorage,
</I>

The spec makes it clear that it's possible, but isn't session (in the
broader sense of the word) restore a UA feature, and not necessarily
something we need to all be the same on?  (Feel free to split this into
another thread if necessary.  :-)


&gt;<i> I think there are some serious benefits to saving the
</I>&gt;<i> pushState'ed state across sessions.  Suppose I'm using a webmail
</I>&gt;<i> client which uses this new API.  I click around to a few of my folders
</I>&gt;<i> and messages and then close the browser.
</I>&gt;<i>
</I>&gt;<i> If the page wants the back/forward buttons to work when the browser
</I>&gt;<i> re-opens, it needs to store all of the state for those history entries
</I>&gt;<i> in the URI.  At the point that pages have to do that, we might as well
</I>&gt;<i> not store a per-page state object.
</I>

Overall, I think preserving history API information when restoring sessions
is a good thing.  My only concern is whether web developers will program in
such a way that this works.  Unless ALL state will need to be either saved
in the history API or reconstructible from that information, bad things will
happen.  (Note that this was difficult if not impossible with the original
API, but your new proposal makes this quite practical.)

Do most web apps that use iframe hacks (for tracking history) come back
cleanly from a session restore?


&gt;<i> &gt;  I still think we shouldn't force app developers to serialize everything
</I>&gt;<i> to
</I>&gt;<i> &gt; strings.  Maybe we can just raise an exception if they try to set the
</I>&gt;<i> &gt; history state to something unserializable?  (I guess that's what you're
</I>&gt;<i> &gt; already doing?)
</I>&gt;<i>
</I>&gt;<i> Right now, I just serialize to JSON and throw an exception if that
</I>&gt;<i> fails.  I don't have a problem continuing to do that, at least until
</I>&gt;<i> we get the structured clone thing sorted out.
</I>

Yeah.  I think the structured clone semantics are the right way to go here
(but JSON is a good first approximation).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090820/2ff410a6/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090820/2ff410a6/attachment.htm</A>&gt;
</PRE>



























































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022174.html">[whatwg] Proposed changes to the History API
</A></li>
	<LI>Next message: <A HREF="022178.html">[whatwg] Proposed changes to the History API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22175">[ date ]</a>
              <a href="thread.html#22175">[ thread ]</a>
              <a href="subject.html#22175">[ subject ]</a>
              <a href="author.html#22175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
