<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] BWTP for WebSocket transfer protocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20BWTP%20for%20WebSocket%20transfer%20protocol&In-Reply-To=%3C63df84f0908072030t5f8d16e9hb13236030adbf129%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064095.html">
   <LINK REL="Next"  HREF="064098.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] BWTP for WebSocket transfer protocol</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20BWTP%20for%20WebSocket%20transfer%20protocol&In-Reply-To=%3C63df84f0908072030t5f8d16e9hb13236030adbf129%40mail.gmail.com%3E"
       TITLE="[whatwg] BWTP for WebSocket transfer protocol">jonas at sicking.cc
       </A><BR>
    <I>Fri Aug  7 20:30:22 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064095.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
        <LI>Next message: <A HREF="064098.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64096">[ date ]</a>
              <a href="thread.html#64096">[ thread ]</a>
              <a href="subject.html#64096">[ subject ]</a>
              <a href="author.html#64096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Aug 7, 2009 at 12:25 AM, Greg Wilkins&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gregw at mortbay.com</A>&gt; wrote:
&gt;<i> Maciej Stachowiak wrote:
</I>&gt;&gt;<i> This proposal looks a bit more complicated than the WS protocol, so it
</I>&gt;&gt;<i> may take a bit to digest.
</I>&gt;<i>
</I>&gt;<i> Maciej,
</I>&gt;<i>
</I>&gt;<i> BWTP is indeed more complex that the base websocket protocol
</I>&gt;<i>
</I>&gt;<i> I think this is one of the key differences between the approach taken
</I>&gt;<i> for the websocket protocol, which I think emphasises simplicity of
</I>&gt;<i> implementation starting from scratch.
</I>&gt;<i>
</I>&gt;<i> But if your starting point is a working HTTP client or server, then
</I>&gt;<i> the work needed to implement BWTP should not be too significant,
</I>&gt;<i> as the additional complexities (Header fields and mime encoded
</I>&gt;<i> content) are handle almost identically to HTTP.
</I>
cc'ing Wellington who has written a websocket implementation for Firefox.

Would be great to get his feedback for what savings could be done if
we were to use BWTP as transport protocol compared to using websocket.

My impression is like Maciejs, that we wouldn't be able to reuse much
of our current HTTP infrastructure in order to implement BWTP. At
first glance only the header-parsing code would carry over directly,
but that's not many lines of code and so doesn't seem like a big win.

&gt;&gt;<i> For what it's worth, we are not absolutely wedded to the details of
</I>&gt;&gt;<i> either the API or the protocol, but we feel pretty strongly
</I>&gt;&gt;<i> about delivering the basic functionality.
</I>&gt;<i>
</I>&gt;<i> I think everybody is keen on the basic functionality.
</I>&gt;<i>
</I>&gt;<i> But I think it is the non-basic reality that will ultimately
</I>&gt;<i> drive the design of at least the protocol (if not the API).
</I>&gt;<i>
</I>&gt;<i> For example, when there are multiple WebSocket using components
</I>&gt;<i> in the same frame/tab/browser - should they share TCP/IP
</I>&gt;<i> connections to a host or should they multiplex.
</I>&gt;<i>
</I>&gt;<i> I see this as a trade off between additional complexity
</I>&gt;<i> in the protocol for multiplexing vs consuming extra
</I>&gt;<i> network/server resources for potentially many connections.
</I>&gt;<i>
</I>&gt;<i> Another example is compression. &#160;Currently websocket protocol
</I>&gt;<i> supports only utf-8 or undefined binary framing. &#160; &#160;Over the
</I>&gt;<i> life of HTTP, there was no compression, then there was compress
</I>&gt;<i> and now gzip is widely supported. &#160;It could be expected that
</I>&gt;<i> new compression algorithms will be developed over the life
</I>&gt;<i> span of websocket and it will be important to be able to
</I>&gt;<i> support them without the need to update the javascript that
</I>&gt;<i> calls the websocket API.
</I>
I agree that these are very interesting features. Especially
connection multiplexing is something that I think is a good idea, for
the reasons you've mentioned elsewhere in this thread (multiple
widgets on the same page). But even compression is nice if it was
possible.

My gut feeling on BWTP vs. websocket is that BWTP carries some
unneccesary complexity/overhead by allowing arbitrary headers in each
frame, whereas websocket is unnecessarily low level.

I don't think BWTP gains a lot by using HTTP-like syntax, as I don't
think that in reality a lot of existing HTTP code can be reused.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064095.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
	<LI>Next message: <A HREF="064098.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64096">[ date ]</a>
              <a href="thread.html#64096">[ thread ]</a>
              <a href="subject.html#64096">[ subject ]</a>
              <a href="author.html#64096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
