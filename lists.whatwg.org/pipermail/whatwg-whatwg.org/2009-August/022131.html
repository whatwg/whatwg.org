<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Global Script proposal.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Global%20Script%20proposal.&In-Reply-To=%3CBAY116-DAV101BF9CAC8660A062E77E5A4FF0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022129.html">
   <LINK REL="Next"  HREF="022132.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Global Script proposal.</H1>
<!--htdig_noindex-->
    <B>Mike Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Global%20Script%20proposal.&In-Reply-To=%3CBAY116-DAV101BF9CAC8660A062E77E5A4FF0%40phx.gbl%3E"
       TITLE="[whatwg] Global Script proposal.">mikewse at hotmail.com
       </A><BR>
    <I>Tue Aug 18 12:20:52 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022129.html">[whatwg] Global Script proposal.
</A></li>
        <LI>Next message: <A HREF="022132.html">[whatwg] Global Script proposal.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22131">[ date ]</a>
              <a href="thread.html#22131">[ thread ]</a>
              <a href="subject.html#22131">[ subject ]</a>
              <a href="author.html#22131">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Michael Nordman wrote: 

On Tue, Aug 18, 2009 at 6:07 AM, Mike Wilson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mikewse at hotmail.com</A>&gt; wrote:


Threading:
This is the unavoidable question ;-) How do you envision
multiple threads accessing this shared context to be
coordinated?


Nominally, they don't. In our design for chrome's multi-process
architecture, the global-script would only be shared within a single
'renderer' process (in which all page's, and global-scripts, execute in a
single thread). 

This might not be the same in other browsers. I think you need to define how
concurrent access should be handled so it can be applied to f ex a browser
using a single process but a thread per top-level window. If I understand
correctly it would be something like letting only one thread call inside the
GlobalScript context at a time?

Process boundaries:
In this past discussion there have been several mentions
about having to cluster &quot;pages&quot; inside the same process
if they are to share data.
Why is this so, and why can't shared memory or proxied
objects be an option for browsers doing process
separation?


A multi-process browser vendor probably *could* proxy all script calls to a
truely global context across all 'renderers'... but that is not required in
the proposal... and is probably even discouraged.


One of the motivations for doing this is webapp performance. Proxying all
script interactions across the page/context boundary works against that.
Also synchronization issues get much more complicated.


Implicit in the proposal is that a global-script is very inexpensive to
interact with.

Certainly, the ideal case is that they are in the same process. Using
proxies is coming back to serialization all over again, although
transparent. What I was commenting was the (seemingly widespread) notion
that it is impossible to share data between process, which is not true.
There is nothing stopping an implementation from using direct calls whenever
process sharing is possible, and falling back to proxies in cases when
processes need to be different. 
With this stated, I'd like to throw out a question on what do you want the
most - max performance in 100% of cases, but redundant GlobalScript
contexts, or max performance in most cases and singular GlobalScript
contexts?
 
Also, what about shared memory (I'm assuming everybody knows what this is) -
apart from being non-trivial stuff, are there any specific drawbacks that
renders it not useful for this case?
 
Best regards
Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090818/ad7fda21/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090818/ad7fda21/attachment.htm</A>&gt;
</PRE>



















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022129.html">[whatwg] Global Script proposal.
</A></li>
	<LI>Next message: <A HREF="022132.html">[whatwg] Global Script proposal.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22131">[ date ]</a>
              <a href="thread.html#22131">[ thread ]</a>
              <a href="subject.html#22131">[ subject ]</a>
              <a href="author.html#22131">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
