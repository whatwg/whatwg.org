<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web Storage: apparent contradiction in spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Storage%3A%20apparent%20contradiction%20in%20spec&In-Reply-To=%3C5dd9e5c50908251441g5c4d14b8w12a4e76c72264a0%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064581.html">
   <LINK REL="Next"  HREF="064570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web Storage: apparent contradiction in spec</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Storage%3A%20apparent%20contradiction%20in%20spec&In-Reply-To=%3C5dd9e5c50908251441g5c4d14b8w12a4e76c72264a0%40mail.gmail.com%3E"
       TITLE="[whatwg] Web Storage: apparent contradiction in spec">jorlow at chromium.org
       </A><BR>
    <I>Tue Aug 25 14:41:07 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064581.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
        <LI>Next message: <A HREF="064570.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64568">[ date ]</a>
              <a href="thread.html#64568">[ thread ]</a>
              <a href="subject.html#64568">[ subject ]</a>
              <a href="author.html#64568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Aug 25, 2009 at 2:16 PM, Jeremy Orlow &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at chromium.org</A>&gt; wrote:

&gt;<i> On Tue, Aug 25, 2009 at 2:09 PM, Brady Eidson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">beidson at apple.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Aug 25, 2009, at 1:38 PM, Linus Upson wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It is important that all local state be treated as a cache. User agents
</I>&gt;&gt;<i> need to be free to garbage collect any local state. If they can't then
</I>&gt;&gt;<i> attackers (or the merely lazy) will be able to fill up the user's disk. We
</I>&gt;&gt;<i> can't expect web sites or users to do the chore of taking out the garbage.
</I>&gt;&gt;<i> Better user agents will have better garbage collection algorithms.
</I>&gt;&gt;<i> It would be better to remove section 4.3.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I disagree.
</I>&gt;&gt;<i> One key advantage of LocalStorage and Databases over cookies is that they
</I>&gt;&gt;<i> *do* have a predictable, persistent lifetime, and the browser is *not*
</I>&gt;&gt;<i> allowed to prune them at will.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> User agents are perfectly allowed to not allow new items to go into
</I>&gt;&gt;<i> LocalStorage or Database Storage once some quota is met, or if the user has
</I>&gt;&gt;<i> disabled it for that domain, or disabled it altogether, or if the disk is
</I>&gt;&gt;<i> filling up, or any other number of circumstances.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But once the data is stored, it should be considered user data - as
</I>&gt;&gt;<i> &quot;sacred&quot; as a user's file on the file system.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What happens when your computer blows up?  When you switch browsers?  What
</I>&gt;<i> about when you re-install your OS?  etc
</I>&gt;<i>
</I>&gt;<i> What about mobile devices where 5mb is actually a lot of space?  What
</I>&gt;<i> happens when a malicious site fills up all of your localStorage space?
</I>&gt;<i>  You're saying the UAs should not be free to have heuristics about what to
</I>&gt;<i> delete?  What do they do then?
</I>&gt;<i>
</I>
I just re-read your message and noticed that you suggested local storage
should stop working when it's filled up.  First of all, this seems
completely unacceptable to me, especially since we don't have a good answer
yet (besides quotas which are probably enough for your average desktop, but
probably not your average mobile or netbook) to the problem of malicious
sites filling up local storage with multiple sub domains.

Also, consider this scenario: you fill up your hard drive only 50% of the
way with localStorage data.  (Possibly by a malicious site, and thus the
user is unaware.)  Now you try to install a bunch of apps (maybe even over
time) that consume the rest of the hard drive.  So now the user is either
SOL unless they can realize this space has gone to their browser and can
figure out how to delete it?


&gt;<i> Note this exact point has been discussed on this list before, and IIRC the
</I>&gt;<i> outcome was that localStorage should be treated like cookies: we'll try to
</I>&gt;<i> keep them around, but the app should be resilient to them going away.
</I>&gt;<i>
</I>
One previous reference:
<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-April/019276.html">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-April/019276.html</A>
I thought there was more discussion, but I couldn't find anything
other
than this thread after a quick search.

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090825/93bc20a9/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090825/93bc20a9/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064581.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
	<LI>Next message: <A HREF="064570.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64568">[ date ]</a>
              <a href="thread.html#64568">[ thread ]</a>
              <a href="subject.html#64568">[ subject ]</a>
              <a href="author.html#64568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
