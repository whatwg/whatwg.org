<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] BWTP for WebSocket transfer protocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20BWTP%20for%20WebSocket%20transfer%20protocol&In-Reply-To=%3C63df84f0908080021s7c718d86n53abc8a387203c7%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064102.html">
   <LINK REL="Next"  HREF="064106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] BWTP for WebSocket transfer protocol</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20BWTP%20for%20WebSocket%20transfer%20protocol&In-Reply-To=%3C63df84f0908080021s7c718d86n53abc8a387203c7%40mail.gmail.com%3E"
       TITLE="[whatwg] BWTP for WebSocket transfer protocol">jonas at sicking.cc
       </A><BR>
    <I>Sat Aug  8 00:21:29 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064102.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
        <LI>Next message: <A HREF="064106.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64101">[ date ]</a>
              <a href="thread.html#64101">[ thread ]</a>
              <a href="subject.html#64101">[ subject ]</a>
              <a href="author.html#64101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Aug 7, 2009 at 10:07 PM, Greg Wilkins&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">gregw at mortbay.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Jonas,
</I>&gt;<i>
</I>&gt;<i> taking some of your comments out of order....
</I>&gt;<i>
</I>&gt;&gt;<i> My gut feeling on BWTP vs. websocket is that BWTP carries some
</I>&gt;&gt;<i> unneccesary complexity/overhead by allowing arbitrary headers in each
</I>&gt;&gt;<i> frame, whereas websocket is unnecessarily low level.
</I>&gt;<i>
</I>&gt;<i> I added the headers to BWTP (headers), because I didn't like the
</I>&gt;<i> total lack of meta data in websocket. &#160; &#160;I then added virtual
</I>&gt;<i> connections afterwards.
</I>&gt;<i>
</I>&gt;<i> But now you mention it, arbitrary headers in each frame is probably
</I>&gt;<i> excessive since it could be argued that all the messages to/from a
</I>&gt;<i> given URI are likely to have mostly same metadata so perhaps a protocol
</I>&gt;<i> that supports virtual connections does not need per message
</I>&gt;<i> meta data. &#160;So maybe metadata per virtual connection meta-data is
</I>&gt;<i> sufficient?
</I>
I think that might be the case. At least for general-purpose metadata.
The only thing that I can think of that might be useful to support
per-frame is content-encoding/transfer-encoding, but I could probably
be talked out of that too.

&gt;&gt;<i> I don't think BWTP gains a lot by using HTTP-like syntax, as I don't
</I>&gt;&gt;<i> think that in reality a lot of existing HTTP code can be reused.
</I>&gt;<i>
</I>&gt;<i> I don't think HTTP-like syntax is essential. &#160;I was just using
</I>&gt;<i> it to start from a familiar place. &#160; It is the features that
</I>&gt;<i> BWTP has that Websocket lacks that I think are important
</I>&gt;<i> (plus I admit a total dislike of 0 delimited framing :).
</I>
Good to hear.

&gt;&gt;<i> I agree that these are very interesting features. Especially
</I>&gt;&gt;<i> connection multiplexing is something that I think is a good idea, for
</I>&gt;&gt;<i> the reasons you've mentioned elsewhere in this thread (multiple
</I>&gt;&gt;<i> widgets on the same page). But even compression is nice if it was
</I>&gt;&gt;<i> possible.
</I>&gt;<i>
</I>&gt;<i> Indeed it is the features that are more important ideas in BWTP
</I>&gt;<i> rather than the syntax of the protocol.
</I>&gt;<i>
</I>&gt;<i> The features that I feel are important to have in the protocol
</I>&gt;<i> are:
</I>&gt;<i>
</I>&gt;<i> &#160;+ mime encapsulated content types (not just utf-8 and binary).
</I>&gt;<i> &#160;+ extensible content-encoding and/or transfer encoding
</I>&gt;<i> &#160;+ multiplexing
</I>&gt;<i> &#160;+ orderly close
</I>&gt;<i>
</I>&gt;<i> Nice to have features include:
</I>&gt;<i> &#160;+ message segmentation (good for flow when multiplexing).
</I>&gt;<i> &#160;+ intermediary participation
</I>&gt;<i> &#160;+ strict in what you generate, forgiving in what you parse
</I>&gt;<i> &#160;+ BNF style specification rather than algorithmic specification.
</I>&gt;<i> &#160;+ per message meta data
</I>
Out of curiosity, what advantages do you see with having a declared
content-type? I can think of a few, but wanted to know which ones you
had in mind.

Also, what do you mean by &quot;orderly close&quot;?

As far as specification style (BNF or not), I personally don't really
care there, as long as it's well defined how to handle all possible
inputs, valid or invalid.

I'm also unconvinced that per message meta data is needed.

Other than that I largely agree.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064102.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
	<LI>Next message: <A HREF="064106.html">[whatwg] BWTP for WebSocket transfer protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64101">[ date ]</a>
              <a href="thread.html#64101">[ thread ]</a>
              <a href="subject.html#64101">[ subject ]</a>
              <a href="author.html#64101">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
