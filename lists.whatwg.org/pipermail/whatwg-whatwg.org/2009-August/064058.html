<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] MessagePorts and message delivery ordering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20MessagePorts%20and%20message%20delivery%20ordering&In-Reply-To=%3Cf965ae410908061426l31e300c4n6de84c2e03a264a4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064285.html">
   <LINK REL="Next"  HREF="064059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] MessagePorts and message delivery ordering</H1>
<!--htdig_noindex-->
    <B>Drew Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20MessagePorts%20and%20message%20delivery%20ordering&In-Reply-To=%3Cf965ae410908061426l31e300c4n6de84c2e03a264a4%40mail.gmail.com%3E"
       TITLE="[whatwg] MessagePorts and message delivery ordering">atwilson at google.com
       </A><BR>
    <I>Thu Aug  6 14:26:33 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064285.html">[whatwg] 2.2 Performant
</A></li>
        <LI>Next message: <A HREF="064059.html">[whatwg] MessagePorts and message delivery ordering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64058">[ date ]</a>
              <a href="thread.html#64058">[ thread ]</a>
              <a href="subject.html#64058">[ subject ]</a>
              <a href="author.html#64058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I was writing some unit tests for SharedWorkers, and I saw some behavior
that seems to be spec compliant, but which was counter-intuitive from a
developer standpoint.
Let's say that you have two message ports - some other window or a shared
worker owns the other end of those ports.

You then do this:

port1.postMessage(&quot;foo&quot;);
port2.postMessage(&quot;bar&quot;);

At the other end, the order of the delivery of these messages is entirely
arbitrary (could be &quot;foo&quot;-&gt;&quot;bar&quot;, or &quot;bar&quot;-&gt;&quot;foo&quot;) even though those ports
share the same owner. This is because each port is an individual task
source, and ordering within a given task source is guaranteed by the spec,
but ordering across task sources is intentionally not guaranteed (this
allows UAs to prioritize task sources).

Anyhow, just thought I'd point it out, and make sure there isn't something
in the spec that I missed that should affect delivery ordering in this case.

-atw
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090806/7fff7210/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090806/7fff7210/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064285.html">[whatwg] 2.2 Performant
</A></li>
	<LI>Next message: <A HREF="064059.html">[whatwg] MessagePorts and message delivery ordering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64058">[ date ]</a>
              <a href="thread.html#64058">[ thread ]</a>
              <a href="subject.html#64058">[ subject ]</a>
              <a href="author.html#64058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
