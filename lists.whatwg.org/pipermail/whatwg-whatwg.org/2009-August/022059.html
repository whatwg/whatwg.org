<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Redirects and draft-hixie-thewebsocketprotocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Redirects%20and%20draft-hixie-thewebsocketprotocol&In-Reply-To=%3CPine.LNX.4.62.0908142255350.6420%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021845.html">
   <LINK REL="Next"  HREF="022061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Redirects and draft-hixie-thewebsocketprotocol</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Redirects%20and%20draft-hixie-thewebsocketprotocol&In-Reply-To=%3CPine.LNX.4.62.0908142255350.6420%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Redirects and draft-hixie-thewebsocketprotocol">ian at hixie.ch
       </A><BR>
    <I>Fri Aug 14 16:06:59 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="021845.html">[whatwg] Redirects and draft-hixie-thewebsocketprotocol
</A></li>
        <LI>Next message: <A HREF="022061.html">[whatwg] Redirects and draft-hixie-thewebsocketprotocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22059">[ date ]</a>
              <a href="thread.html#22059">[ thread ]</a>
              <a href="subject.html#22059">[ subject ]</a>
              <a href="author.html#22059">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 8 Aug 2009, Adam Barth wrote:
&gt;<i> 
</I>&gt;<i> In fact, the situation is worse than the above because the websocket 
</I>&gt;<i> protocol supports cookies.  Instead of relying on a firewall and IP 
</I>&gt;<i> authentication, the victim server could be on the public Internet and be 
</I>&gt;<i> relying upon cookie authentication.
</I>&gt;<i> 
</I>&gt;<i> I think there are a number of ways of resolving this issue:
</I>&gt;<i> 
</I>&gt;<i> 1) We could use Sec-From instead of Origin because Sec-From implicates 
</I>&gt;<i> the full redirect chain instead of just the origin that initiated the 
</I>&gt;<i> request.  On IRC, Ian said he doesn't like this choice because servers 
</I>&gt;<i> might not validate this header properly.
</I>
My concern here is that to confirm the server is checking Sec-From we'd 
want the server to include some sort of response, and I'm not really sure 
what that would be. Maybe just WebSocket-Sec-From: ..., where it contains 
the same value as Sec-From, but Sec-From only gets included on redirects?


&gt;<i> 2) Instead of handling the redirect inside the websocket protocol, we 
</I>&gt;<i> can report the redirect back to the web site making the request (in this 
</I>&gt;<i> case example.com).  Then the trustworthy web site would then have the 
</I>&gt;<i> option of following or not following the redirect.  If we did this, we 
</I>&gt;<i> would have to ensure that the redirecting server understands the 
</I>&gt;<i> websocket protocol (probably by requiring it to send WebSocket-Origin or 
</I>&gt;<i> some such) to avoid leaking the targets of already-existing redirects.  
</I>&gt;<i> Also, it's unclear on what basis the web site would decide whether to 
</I>&gt;<i> follow the redirect.
</I>&gt;<i>
</I>&gt;<i> 3) We could restrict redirects to the same origin.  This has the 
</I>&gt;<i> disadvantage of not covering the full use case of redirects.
</I>&gt;<i> 
</I>&gt;<i> 4) We could remove support for redirects.
</I>
On Sun, 9 Aug 2009, Jeremy Orlow wrote:
&gt;<i>
</I>&gt;<i> I feel like redirects add unnecessary complexity.
</I>&gt;<i> 
</I>&gt;<i> We're already asking application developers to handle ACKing, keep 
</I>&gt;<i> alives, multi-plexing, connection limiting, authentication, etc 
</I>&gt;<i> themselves.  To me, it doesn't seem like much of an additional burden to 
</I>&gt;<i> ask them to handle redirects.  And by keeping the spec simple, I think 
</I>&gt;<i> we'll increase the chances of quick adoption by UAs, which will speed up 
</I>&gt;<i> the adoption by web apps, which will give us feedback on what features 
</I>&gt;<i> web developers actually want much quicker.
</I>
The use case for redirects is if Google (say) provides a WebSocket service 
that lots of sites around the Web uses, and then Google wants to move the 
service to another host, without transparent redirects, all the pages 
using the service will break until they can be updated, whereas with 
redirects, we can just redirect and be done with it.


I've removed redirect support for now, but I think we should have support 
for it at some point.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>



































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021845.html">[whatwg] Redirects and draft-hixie-thewebsocketprotocol
</A></li>
	<LI>Next message: <A HREF="022061.html">[whatwg] Redirects and draft-hixie-thewebsocketprotocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22059">[ date ]</a>
              <a href="thread.html#22059">[ thread ]</a>
              <a href="subject.html#22059">[ subject ]</a>
              <a href="author.html#22059">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
