<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Global Script proposal.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Global%20Script%20proposal.&In-Reply-To=%3C28040fc60908191048p23a19b5dl2c88c1782852a524%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064419.html">
   <LINK REL="Next"  HREF="064425.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Global Script proposal.</H1>
<!--htdig_noindex-->
    <B>Dmitry Titov</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Global%20Script%20proposal.&In-Reply-To=%3C28040fc60908191048p23a19b5dl2c88c1782852a524%40mail.gmail.com%3E"
       TITLE="[whatwg] Global Script proposal.">dimich at google.com
       </A><BR>
    <I>Wed Aug 19 10:48:12 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064419.html">[whatwg] Global Script proposal.
</A></li>
        <LI>Next message: <A HREF="064425.html">[whatwg] Global Script proposal.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64424">[ date ]</a>
              <a href="thread.html#64424">[ thread ]</a>
              <a href="subject.html#64424">[ subject ]</a>
              <a href="author.html#64424">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Aug 19, 2009 at 7:37 AM, Patrick Mueller &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">pmuellr at muellerware.org</A>&gt;wrote:

&gt;<i> var context = new GlobalScript();  // perhaps 'webkitGlobalScript' as
</I>&gt;&gt;<i> experimental feature?
</I>&gt;&gt;<i> context.onload = function () {...}
</I>&gt;&gt;<i> context.onerror = function () {...}
</I>&gt;&gt;<i> context.load('foo.js');
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Presumably this script is being loaded asynchronously, hence the callbacks.
</I>&gt;<i>  But since the GlobalScript() constructor returns the &quot;global&quot; object,
</I>&gt;<i> probably doesn't make sense to attach the handlers directly there, but
</I>&gt;<i> actually on the load request somehow.
</I>

Good point. Alternative variant to construction/connection to this object
could be something like this:

window.createGlobalScript('name', 'foo.js', function(context) {..},
function(status) {..});

where the name and url pair play the same role as on SharedWorker, and 2
callbacks: one delivers load status/errors, another comes with resolved
context when it's ready. One benefit of this is that 'context' does not have
to expose the 'external' API on it and it is always functional once it's
returned. The syntax in the proposal was motivated by commonality with other
APIs, like XHR or window.open - however I agree this doesn't fit 100% either
of them...

I guess I'm wondering if there will be some desire to have pages opt-in to
&gt;<i> this support, signaling this through an additional API, or like the
</I>&gt;<i> app-cache's manifest attribute on the &lt;html&gt; element, something in the DOM;
</I>&gt;<i> doesn't seem like we should drag the DOM in here, just mentioned it because
</I>&gt;<i> I was reminded of the way the opt-in works there.
</I>&gt;<i>
</I>
It is a good idea indeed to have some sort of static opt-in information,
maybe via a feature of app-cache - which could hint the UA to load
participating pages (of the same application) into the same process so they
could share Global Script. It is still impossible (and probably not
important) to guarantee a singularity of the Global Script (as in case of
cross-domain iframes) but it'd be a good optimization for a multi-process
UA.

Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090819/345423ef/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090819/345423ef/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064419.html">[whatwg] Global Script proposal.
</A></li>
	<LI>Next message: <A HREF="064425.html">[whatwg] Global Script proposal.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64424">[ date ]</a>
              <a href="thread.html#64424">[ thread ]</a>
              <a href="subject.html#64424">[ subject ]</a>
              <a href="author.html#64424">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
