<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web Storage: apparent contradiction in spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Storage%3A%20apparent%20contradiction%20in%20spec&In-Reply-To=%3C3349C310-A24D-458F-A6F4-553FF2EF96AD%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064563.html">
   <LINK REL="Next"  HREF="064565.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web Storage: apparent contradiction in spec</H1>
<!--htdig_noindex-->
    <B>Brady Eidson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Storage%3A%20apparent%20contradiction%20in%20spec&In-Reply-To=%3C3349C310-A24D-458F-A6F4-553FF2EF96AD%40apple.com%3E"
       TITLE="[whatwg] Web Storage: apparent contradiction in spec">beidson at apple.com
       </A><BR>
    <I>Tue Aug 25 14:09:59 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064563.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
        <LI>Next message: <A HREF="064565.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64564">[ date ]</a>
              <a href="thread.html#64564">[ thread ]</a>
              <a href="subject.html#64564">[ subject ]</a>
              <a href="author.html#64564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Aug 25, 2009, at 1:38 PM, Linus Upson wrote:

&gt;<i> It is important that all local state be treated as a cache. User  
</I>&gt;<i> agents need to be free to garbage collect any local state. If they  
</I>&gt;<i> can't then attackers (or the merely lazy) will be able to fill up  
</I>&gt;<i> the user's disk. We can't expect web sites or users to do the chore  
</I>&gt;<i> of taking out the garbage. Better user agents will have better  
</I>&gt;<i> garbage collection algorithms.
</I>&gt;<i>
</I>&gt;<i> It would be better to remove section 4.3.
</I>
I disagree.

One key advantage of LocalStorage and Databases over cookies is that  
they *do* have a predictable, persistent lifetime, and the browser is  
*not* allowed to prune them at will.

User agents are perfectly allowed to not allow new items to go into  
LocalStorage or Database Storage once some quota is met, or if the  
user has disabled it for that domain, or disabled it altogether, or if  
the disk is filling up, or any other number of circumstances.

But once the data is stored, it should be considered user data - as  
&quot;sacred&quot; as a user's file on the file system.

&gt;<i> Linus
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Aug 25, 2009 at 1:18 PM, Jens Alfke &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">snej at google.com</A>&gt; wrote:
</I>&gt;<i> I've just noticed an apparent self-contradiction in the Web Storage  
</I>&gt;<i> spec (24 August draft).
</I>&gt;<i>
</I>&gt;<i> Section 4.3 states:
</I>&gt;&gt;<i> Data stored in local storage areas should be considered potentially  
</I>&gt;&gt;<i> user-critical. It is expected that Web applications will use the  
</I>&gt;&gt;<i> local storage areas for storing user-written documents.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Section 6.1 states:
</I>&gt;&gt;<i> User agents should present the persistent storage feature to the  
</I>&gt;&gt;<i> user in a way that does not distinguish them from HTTP session  
</I>&gt;&gt;<i> cookies.
</I>&gt;<i>
</I>&gt;<i> These statements are contradictory, because cookies don't store user- 
</I>&gt;<i> critical data such as documents. The user model of cookies is that  
</I>&gt;<i> they're conveniences (at best) for keeping you logged into a site or  
</I>&gt;<i> remembering preferences like font-size, so deleting them is no more  
</I>&gt;<i> than an inconvenience. If local storage is presented to the user as  
</I>&gt;<i> being cookies, then a user may delete it without understanding the  
</I>&gt;<i> consequences.
</I>&gt;<i>
</I>&gt;<i> Potential result: &quot;I was having trouble logging into FooDocs.com, so  
</I>&gt;<i> my friend suggested I delete the cookies for that site. After that I  
</I>&gt;<i> could log in, but now the document I was working on this morning has  
</I>&gt;<i> lost all the changes I made! How do I get them back?&quot;
</I>&gt;<i>
</I>&gt;<i> I suggest that the sub-section &quot;Treating persistent storage as  
</I>&gt;<i> cookies&quot; of section 6.1 be removed.
</I>
I agree that the wording of the section needs great improvement and it  
is factually wrong in its current form.  That said, I don't think it  
should be removed.

I *think* Ian's intention was that in the same vein that user agents  
are &quot;obligated&quot; to present all of the cookies stored on the disk at  
any given time and allow manual management of them, they should be  
&quot;obligated&quot; to do the same for LocalStorage (and databases, too).

If I'm wrong, hopefully he can correct me.


~Brady



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090825/437ff338/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090825/437ff338/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064563.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
	<LI>Next message: <A HREF="064565.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64564">[ date ]</a>
              <a href="thread.html#64564">[ thread ]</a>
              <a href="subject.html#64564">[ subject ]</a>
              <a href="author.html#64564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
