<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] question about Web Storage setItem()'s behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20question%20about%20Web%20Storage%20setItem%28%29%27s%20behavior&In-Reply-To=%3C5dd9e5c50908021941k2f36d92bx83e39fcd785a6ea8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="063955.html">
   <LINK REL="Next"  HREF="063958.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] question about Web Storage setItem()'s behavior</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20question%20about%20Web%20Storage%20setItem%28%29%27s%20behavior&In-Reply-To=%3C5dd9e5c50908021941k2f36d92bx83e39fcd785a6ea8%40mail.gmail.com%3E"
       TITLE="[whatwg] question about Web Storage setItem()'s behavior">jorlow at chromium.org
       </A><BR>
    <I>Sun Aug  2 19:41:57 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="063955.html">[whatwg] question about Web Storage setItem()'s behavior
</A></li>
        <LI>Next message: <A HREF="063958.html">[whatwg] question about Web Storage setItem()'s behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63956">[ date ]</a>
              <a href="thread.html#63956">[ thread ]</a>
              <a href="subject.html#63956">[ subject ]</a>
              <a href="author.html#63956">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, Aug 2, 2009 at 7:17 PM, &#30333;&#30707;&#20426;&#24179; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">shumpei.shiraishi at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I'm implementing the HTML5 Web Storage using Gears
</I>&gt;<i> (<A HREF="http://code.google.com/p/gear5/">http://code.google.com/p/gear5/</A>), so I have several questions with
</I>&gt;<i> the spec.
</I>&gt;<i>
</I>&gt;<i> -Storage.setItem(key, val)
</I>&gt;<i> --is key allowed non-string type object?
</I>

Yes, but...

--and when pass non-string object to key/value, is it automatically
&gt;<i> converted to string?(I'm considering to convert to use String
</I>&gt;<i> constructor - String(key) )
</I>

Yes.


&gt;<i>
</I>&gt;<i> --when value is null, should `setItem(&quot;key&quot;, null)` behave as like as
</I>&gt;<i> `removeItem(&quot;key&quot;)`? (localStorage.setItem(&quot;key&quot;, null);
</I>&gt;<i> alert(localStorage.length); &lt;-- what is value displayed?)
</I>

No, it's not the same as removeItem.  It'll be set to 'null'.

Check out Safari 4's implementation if you'd like to see the correct
behavior for all of these cases.  I've been spending a lot of time with it,
and it matches the spec in every case I've tried.  (And I've tried a
lot...I'm working on it for Chromium.)  :-)

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090802/9c4796a8/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090802/9c4796a8/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="063955.html">[whatwg] question about Web Storage setItem()'s behavior
</A></li>
	<LI>Next message: <A HREF="063958.html">[whatwg] question about Web Storage setItem()'s behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63956">[ date ]</a>
              <a href="thread.html#63956">[ thread ]</a>
              <a href="subject.html#63956">[ subject ]</a>
              <a href="author.html#63956">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
