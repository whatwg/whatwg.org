<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Web Storage: apparent contradiction in spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Storage%3A%20apparent%20contradiction%20in%20spec&In-Reply-To=%3C5dd9e5c50908251551k1eb679a7gda4b99b4aa69babf%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064574.html">
   <LINK REL="Next"  HREF="064576.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Web Storage: apparent contradiction in spec</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Web%20Storage%3A%20apparent%20contradiction%20in%20spec&In-Reply-To=%3C5dd9e5c50908251551k1eb679a7gda4b99b4aa69babf%40mail.gmail.com%3E"
       TITLE="[whatwg] Web Storage: apparent contradiction in spec">jorlow at chromium.org
       </A><BR>
    <I>Tue Aug 25 15:51:58 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064574.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
        <LI>Next message: <A HREF="064576.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64575">[ date ]</a>
              <a href="thread.html#64575">[ thread ]</a>
              <a href="subject.html#64575">[ subject ]</a>
              <a href="author.html#64575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Aug 25, 2009 at 3:19 PM, Aaron Boodman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">aa at google.com</A>&gt; wrote:

&gt;<i> On Tue, Aug 25, 2009 at 2:44 PM, Jeremy Orlow&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at chromium.org</A>&gt; wrote:
</I>&gt;<i> &gt; Ok, well I guess we should go ahead and have this discussion now.  :-)
</I>&gt;<i>  Does
</I>&gt;<i> &gt; anyone outside of Apple and Google have an opinion on the matter (since I
</I>&gt;<i> &gt; think it's pretty clear where we both stand).
</I>&gt;<i>
</I>&gt;<i> FWIW, I tend to agree more with the Apple argument :). I agree that
</I>&gt;<i> the multiple malicious subdomains thing is unfortunate. Maybe the
</I>&gt;<i> quotas should be per eTLD instead of -- or in addition to --
</I>&gt;<i> per-origin? Malicious developers could then use multiple eTLDs, but at
</I>&gt;<i> that point there is a real cost.
</I>

This could be helpful.  I suppose UAs could do this today, even.


&gt;<i> Extensions are an example of an application that is less cloud-based.
</I>&gt;<i> It would be unfortunate and weird for extension developers to have to
</I>&gt;<i> worry about their storage getting tossed because the UA is running out
</I>&gt;<i> of disk space.
</I>

Extensions are pretty far out of scope of the spec (at least for now),
right?  (Within Chrome, we can of course special case this.)


&gt;<i> It seems more like if that happens the UA should direct the user to UI
</I>&gt;<i> to free up some storage. If quotas were enforced at the eTLD level,
</I>&gt;<i> wouldn't this be really rare?
</I>

It would be on the desktop, but it probably won't be rare on mobile phones
(and maybe even netbooks).


On Tue, Aug 25, 2009 at 3:09 PM, Jens Alfke &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">snej at google.com</A>&gt; wrote:

&gt;<i> Interesting comments. Linus and Jeremy appear to be coming at this from a
</I>&gt;<i> pure &quot;cloud&quot; perspective, where any important or persistent data is kept on
</I>&gt;<i> a remote server and the browser, so local storage can be treated as merely a
</I>&gt;<i> cache. That's definitely a valid position, but from my perspective, much of
</I>&gt;<i> the impetus for having local storage is to be able to support *other* application
</I>&gt;<i> models, where important data is stored locally. If browsers are free to
</I>&gt;<i> dispose HTML5 local storage without the user's informed consent, such
</I>&gt;<i> applications become dangerously unreliable.
</I>&gt;<i> For example, Linus wrote:
</I>&gt;<i>
</I>&gt;<i> User agents need to be free to garbage collect any local state. If they
</I>&gt;<i> can't then attackers (or the merely lazy) will be able to fill up the user's
</I>&gt;<i> disk. We can't expect web sites or users to do the chore of taking out the
</I>&gt;<i> garbage.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Replace &quot;user agent&quot; -&gt; &quot;operating system&quot; and &quot;local state&quot; -&gt; &quot;user
</I>&gt;<i> files&quot;, and you have an argument that, when the hard disk in my MacBook gets
</I>&gt;<i> too full, the OS should be free to start randomly deleting my local files to
</I>&gt;<i> make room. This would be a really bad idea.
</I>&gt;<i>
</I>
Well, it's certainly different from what we're used to.  I'm not convinced
it's wrong though.  The web has gotten by pretty well with such a model so
far.


&gt;<i> Similar analogies &#8212;
</I>&gt;<i> &#8226; If the SD card in my Wii fills up, should the system automatically start
</I>&gt;<i> deleting saved games?
</I>&gt;<i> &#8226; If my iPhone's Flash disk gets full, should it start deleting photos?
</I>&gt;<i> What if I haven't synced those photos to my iTunes yet?
</I>&gt;<i>
</I>&gt;<i> In each of those cases, what the device actually does is warns you about
</I>&gt;<i> the lack of free space, and lets you choose what to get rid of.
</I>&gt;<i>
</I>
It's worth noting that today, OSs do a pretty poor job of helping you with
this task.  (I don't see any reason why the spec will prohibit UAs from
creating a good UI for this, though.)


&gt;<i> Local storage is different from cloud storage. The HTML5 storage API can be
</I>&gt;<i> used for both, so it shouldn't be limited to what's convenient for just one
</I>&gt;<i> of them.
</I>&gt;<i>
</I>
I still don't understand what use local storage has outside of 'cloud
storage'.  Even in the extensions use case (which I think is out of scope
for this spec), there's no reason you can't sync user preferences and such
to the cloud.

The only tricky thing I see here is enabling offline use of websites.  And I
don't think &quot;keep local storage forever&quot; is a very good solution, though I
agree it is _a_ solution for this use case.

By the way, in case it's not clear, my position is not that UAs should take
deleting user information lightly, my position is 1) this behavior should be
left up to the UA and 2) when possible, developers should keep information
in the cloud not local storage.

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090825/159406a1/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090825/159406a1/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064574.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
	<LI>Next message: <A HREF="064576.html">[whatwg] Web Storage: apparent contradiction in spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64575">[ date ]</a>
              <a href="thread.html#64575">[ thread ]</a>
              <a href="subject.html#64575">[ subject ]</a>
              <a href="author.html#64575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
