<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposed changes to the History API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposed%20changes%20to%20the%20History%20API&In-Reply-To=%3CBAY116-DAV3D006B4C24742DD76C49DA4FE0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022138.html">
   <LINK REL="Next"  HREF="022165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposed changes to the History API</H1>
<!--htdig_noindex-->
    <B>Mike Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposed%20changes%20to%20the%20History%20API&In-Reply-To=%3CBAY116-DAV3D006B4C24742DD76C49DA4FE0%40phx.gbl%3E"
       TITLE="[whatwg] Proposed changes to the History API">mikewse at hotmail.com
       </A><BR>
    <I>Wed Aug 19 02:14:49 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="022138.html">[whatwg] Proposed changes to the History API
</A></li>
        <LI>Next message: <A HREF="022165.html">[whatwg] Proposed changes to the History API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22144">[ date ]</a>
              <a href="thread.html#22144">[ thread ]</a>
              <a href="subject.html#22144">[ subject ]</a>
              <a href="author.html#22144">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Justin Lebar wrote:
&gt;<i> [...]
</I>&gt;<i> Notably unsupported by this API is support for pages altering their
</I>&gt;<i> saved state.  For instance, a page might want to save a text box's
</I>&gt;<i> edit history to implement a fancy undo.
</I>&gt;<i> [...]
</I>&gt;<i> We'd probably want to fire PopState on all loads and history
</I>&gt;<i> navigations, since any document might have a state to pop
</I>
Right, this is exactly my thoughts on the API as well, as we 
started discussing recently, see:
<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-August/022087.html">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-August/022087.html</A>
|<i> Though, when taking a more thorough look at what is 
</I>|<i> spec:ed, it seems these use cases are indeed not supported, 
</I>|<i> due to state update limitations and how events are ordered.
</I>
Currently, the design with an immutable state object and the
PopEvent and HashChange events triggering at somewhat 
insufficient timings, makes it hard to build the things I'm
thinking about. 

IMO you need:
- an event each time you're *leaving* a history entry (in 
  addition to HashChange triggered when entering one)
- allow updating existing state entries
- shift the whole state entry model so that state entries 
  belong to history entries, and are not logically inserted 
  &quot;between&quot; them (this is actually a very important 
  distinction)

I'm hoping Ian will come back with the use cases he has in
mind, as I am as of yet not clear on what he wants, or does
not want, to support with the pushState model.

Best regards
Mike Wilson

</PRE>







































































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022138.html">[whatwg] Proposed changes to the History API
</A></li>
	<LI>Next message: <A HREF="022165.html">[whatwg] Proposed changes to the History API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22144">[ date ]</a>
              <a href="thread.html#22144">[ thread ]</a>
              <a href="subject.html#22144">[ subject ]</a>
              <a href="author.html#22144">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
