<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Make quoted attributes a conformance criteria
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Make%20quoted%20attributes%20a%20conformance%20criteria&In-Reply-To=%3CPine.LNX.4.62.0908021022380.6420%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021958.html">
   <LINK REL="Next"  HREF="021725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Make quoted attributes a conformance criteria</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Make%20quoted%20attributes%20a%20conformance%20criteria&In-Reply-To=%3CPine.LNX.4.62.0908021022380.6420%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Make quoted attributes a conformance criteria">ian at hixie.ch
       </A><BR>
    <I>Sun Aug  2 19:45:45 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="021958.html">[whatwg] question about Web Storage setItem()'s behavior
</A></li>
        <LI>Next message: <A HREF="021725.html">[whatwg] Make quoted attributes a conformance criteria
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21684">[ date ]</a>
              <a href="thread.html#21684">[ thread ]</a>
              <a href="subject.html#21684">[ subject ]</a>
              <a href="author.html#21684">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 23 Jul 2009, Keryx Web wrote:
&gt;<i> 
</I>&gt;<i> I'd say it is safe to say that using quotation marks for attribute 
</I>&gt;<i> values, always, except perhaps for collapsed, boolean attributes, has 
</I>&gt;<i> been regarded as best practice for a long time now. Speaking as an 
</I>&gt;<i> instructor for newbies, enforcing quotation marks has proven its value 
</I>&gt;<i> countless of times for me and my students. I'd say that all of my 
</I>&gt;<i> colleagues in WaSP EduTF would agree on that. [...]
</I>
For the WHATWG, it doesn't matter how many people agree on something, as 
we base the spec's text on reasoned debate and research. :-)


&gt;<i> With this in mind I suggest that the spec would be improved in the 
</I>&gt;<i> (below) following ways, and that we open a discussion about requiring 
</I>&gt;<i> quotation marks for all non-boolean attributes as a conformance 
</I>&gt;<i> criterion.
</I>&gt;<i> 
</I>&gt;<i> Suggested spec edits (some written in a diff-ish way, not all a true 
</I>&gt;<i> diff, though):
</I>&gt;<i> 
</I>&gt;<i> Section 1.9
</I>&gt;<i> 
</I>&gt;<i> Keep:
</I>&gt;<i> Attributes are placed inside the start tag, and consist of a name and a 
</I>&gt;<i> value, separated by an &quot;=&quot; character. The attribute value can be left 
</I>&gt;<i> unquoted if it doesn't contain any special characters. Otherwise, it has 
</I>&gt;<i> to be quoted using either single or double quotes. The value, along with 
</I>&gt;<i> the &quot;=&quot; character, can be omitted altogether if the value is the empty 
</I>&gt;<i> string.
</I>&gt;<i> 
</I>&gt;<i> Add:
</I>&gt;<i> In order to avoid errors and increase readability, using quotes is 
</I>&gt;<i> highly recommended for all non-omitted attribute values.
</I>&gt;<i> 
</I>&gt;<i> [edit a lot of examples to include quotes]
</I>&gt;<i> 
</I>&gt;<i> 9.1.2.3
</I>&gt;<i> 
</I>&gt;<i> No suggested text, but a rewrite will be necessary if quotation marks becomes
</I>&gt;<i> a conformance criterion.
</I>
Instead of preventing anyone from not using quote marks, I would instead 
recommend asking your validator vendor to offer you an option to require 
quote marks and warn you when you have forgotten them.

This would address your use case, as far as I can tell, without preventing 
anyone who _likes_ omitting quote marks from doing so.

In practice, parsing omitted quote marks is pretty reliably implemented, 
and it's been valid before and _widely_ used, so it's not an area we can 
really use to extend the language. Therefore the usual reasons we have to 
ban things don't really apply here, and I'd rather continue to allow 
quotes to be omitted.

Omitting quotes would also make a large number of pages invalid for more 
or less stylistic reasons, which would make it harder for people to 
transition to HTML5, and may annoy them (&quot;Why do I have to add these 
quotes, they don't really add anything -- bah! I hate html5&quot;).


On Thu, 23 Jul 2009, Kornel wrote:
&gt;<i> 
</I>&gt;<i> I wouldn't mind much if specification used more quotes in examples, 
</I>&gt;<i> however I'm afraid that taking this to the extreme could give false 
</I>&gt;<i> impression that unquoted attributes are an error, and spec would fail to 
</I>&gt;<i> illustrate when quotes are necessary and when they're perfectly safe to 
</I>&gt;<i> omit.
</I>
The spec intentionally uses a variety of markup styles (including many I 
find quote ugly) in order to show that they are all valid, and to not 
mislead the reader into thinking there are unstated rules.


On Thu, 23 Jul 2009, Keryx Web wrote:
&gt;<i> 
</I>&gt;<i> As for conformance criteria only being about unambiguous parsing: If 
</I>&gt;<i> that is the case we do not need them at all any more, since HTML 5 
</I>&gt;<i> defines how to handle badly written markup.
</I>
We also want to make things non-conforming if their parsing behaviour is 
highly non-intuitive, or if it might be a future extension point, or if 
there is some harm that might come from using the feature, etc.


&gt;<i> And speaking directly to Ian H, a few years ago you said on this list 
</I>&gt;<i> that you'd love for the spec to help teachers as much as possible 
</I>&gt;<i> (within the limits of being a spec). My suggested example markup changes 
</I>&gt;<i> is definitely such a help.
</I>
Unfortunately such benefits have to be balanced against the costs on more 
experience authors, many of whom like the flexibility of omitting quotes. 
However, I do think that a conformance checker could support a &quot;stricter&quot; 
or &quot;teaching&quot; mode in which it requires that attributes be quoted and 
optional tags not be omitted.


On Thu, 23 Jul 2009, Eduard Pascual wrote:
&gt;<i> [&lt;p class=foo bar&gt;]
</I>&gt;<i> Furthermore, with the previous example, what'd happen if HTML6 defines a 
</I>&gt;<i> new empty &quot;bar&quot; attribute that alters the rendering and/or semantics of 
</I>&gt;<i> elements?
</I>
If HTML6 is written like HTML5, then we wouldn't use &quot;bar&quot; if it was 
commonly subject to this mistake.


&gt;<i> The part on readability is indeed a matter of style; but the part of 
</I>&gt;<i> avoiding errors is quite valid. Maybe a more to-the-point wording would 
</I>&gt;<i> work better; how about something like this?:
</I>&gt;<i>
</I>&gt;<i> &quot;Quoting attribute values is always allowed, but only sometimes 
</I>&gt;<i> required. In case of doubt, the safest choice is to quote the value.&quot;
</I>
In the introduction section, it now says:

# The attribute value can be left unquoted if it doesn't contain any 
# special characters. Otherwise, it has to be quoted using either single 
# or double quotes. 
 -- <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#a-quick-introduction-to-html">http://www.whatwg.org/specs/web-apps/current-work/#a-quick-introduction-to-html</A>


On Thu, 23 Jul 2009, Eduard Pascual wrote:
&gt;<i> 
</I>&gt;<i> While I don't consider a hard requirement would be appropriate, there is 
</I>&gt;<i> an audience sector this discussion seems to be ignoring: Authoring 
</I>&gt;<i> Tools' developers. IMO, it would be highly desirable to have some 
</I>&gt;<i> guidelines for these tools to determine when they *should* quote 
</I>&gt;<i> attribute values.
</I>
Is this not clear enough?

   <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#attributes">http://www.whatwg.org/specs/web-apps/current-work/#attributes</A>

It says, under &quot;unquoted attribute value syntax&quot;, that the value &quot;must not 
contain any literal space characters, any U+0022 QUOTATION MARK (&quot;) 
characters, U+0027 APOSTROPHE (') characters, U+003D EQUALS SIGN (=) 
characters, U+003C LESS-THAN SIGN (&lt;) characters, or U+003E GREATER-THAN 
SIGN (&gt;) characters, and must not be the empty string&quot;.

(Tools, of course, can just quote everything. There's no reason other than 
user preference for the authoring tool to not quote values, as far as I 
can tell.)


On Sat, 25 Jul 2009, Keryx Web wrote:
&gt;<i> 
</I>&gt;<i> Consider this PHP template:
</I>&gt;<i> 
</I>&gt;<i> &lt;input type=text value=$login name=login&gt;
</I>&gt;<i> 
</I>&gt;<i> Value is the suggested text, if no user data is available it says &quot;login&quot;.
</I>&gt;<i> Otherwise its the users login name (no spaces allowed). All is well.
</I>&gt;<i> 
</I>&gt;<i> One day a developer decides that &quot;login name&quot; is a better value, and hard
</I>&gt;<i> codes it into the PHP business logic, producing this HTML:
</I>&gt;<i> 
</I>&gt;<i> &lt;input type=text value=login name name=login&gt;
</I>&gt;<i> 
</I>&gt;<i> All of a sudden you *effectively* have produced this:
</I>&gt;<i> 
</I>&gt;<i> &lt;input type=text value=login name=&quot;&quot;&gt;
</I>&gt;<i> 
</I>&gt;<i> And it stops working.
</I>
I agree that this is an issue, and I would strongly recommend that people 
who write templates not make assumptions about the values they are 
inserting. (What if the login name contains a &quot;&gt;&quot; character? Or an 
ampersand? Even without the change that introduces spaces, there are 
already bugs here.)


&gt;<i> Now, what would have been easier to avoid this? Url-encoding hard coded 
</I>&gt;<i> variable data, or adding two quotation marks to the template?
</I>
Adding two quotation marks and escaping the contents of the value would be 
wise in general, in this case. However, that doesn't mean that the &quot;name&quot; 
attribute in your example should also have quotes.


&gt;<i> Bottom line:
</I>&gt;<i> 
</I>&gt;<i> I think my suggestion is totally analogous to e.g. semi-colon insertion 
</I>&gt;<i> in ECMAScript. JSLint demands that those should be present, and I've yet 
</I>&gt;<i> to hear anyone say &quot;it's a matter of style&quot;. Omitting semi-colons is a 
</I>&gt;<i> known cause of trouble in ECMAScript. Omitting quotation marks is a 
</I>&gt;<i> known cause of trouble in HTML.
</I>&gt;<i> 
</I>&gt;<i> Choosing between robustness and saving a few bytes, one should always 
</I>&gt;<i> opt for the former.
</I>
I think this overstates the trouble that lack of quotation marks causes.


On Sun, 26 Jul 2009, Mike Shaver wrote:
&gt;<i> 
</I>&gt;<i> And yet, tons of inline event handler attribute values on the web omit 
</I>&gt;<i> their trailing semicolons...as a matter of style.
</I>
Indeed.


On Sun, 26 Jul 2009, Michael Kozakewich wrote:
&gt;<i>
</I>&gt;<i> The root of the problem is this: Requiring quotes, especially after all 
</I>&gt;<i> these people have learned about HTML and have learned to code without 
</I>&gt;<i> quotes, isn't backwards-compatible. Browsers already use their resources 
</I>&gt;<i> to parse bad code, and so it's also too late to try forcing 
</I>&gt;<i> well-formedness on those. At the same time, quotes -- if the writers 
</I>&gt;<i> learn to always quote without thought -- decrease errors and also 
</I>&gt;<i> normalize the language. The only answer, then, is to deprecate 
</I>&gt;<i> not-quoting: Add quotes to the spec examples, state that quotes aren't 
</I>&gt;<i> needed but are best-practice, add 'unquoted' warnings to the validator, 
</I>&gt;<i> and teach new web developers to always quote attributes.
</I>
People can already always use quotes, so nothing is preventing that 
behaviour. Requiring quotes only makes a difference if people use 
validators. But if people use validators, then omitting the quotes is no 
problem either, as far as I can tell, since those errors will be caught 
too. So I'm not really convinced it's as clear cut as you describe.


On Sun, 26 Jul 2009, Keryx Web wrote:
&gt;<i> 
</I>&gt;<i> Three kinds of attribute values have been identified:
</I>&gt;<i> - Those that can have multiple words, e.g. class, alt, title, value...
</I>&gt;<i> - Those that can have just one word or an integer, e.g. width, length...
</I>&gt;<i> - Boolean attributes, that can be shortened in HTML.
</I>&gt;<i> 
</I>&gt;<i> Today teachers like me use (false) XHTML to enforce quotation marks for 
</I>&gt;<i> all three cases, because we've seen the pedagogic benefit (and frankly 
</I>&gt;<i> grown tired of looking over the shoulders of our students and say for 
</I>&gt;<i> the millionth time &quot;you've forgotten to quote that alt attribute 
</I>&gt;<i> value&quot;).
</I>&gt;<i> 
</I>&gt;<i> I actually thought that having a tool that could enforce XHTML-ish rules 
</I>&gt;<i> for the first (and perhaps second) category above, while still leaving 
</I>&gt;<i> boolean attributes alone, would be seen as a benefit, not as a burden.
</I>
I agree that such a tool would be useful. I don't think we need to force 
its existence using the spec, though.


On Sat, 25 Jul 2009, Eduard Pascual wrote:
&gt;<i>
</I>&gt;<i> I can't speak for others, but I did read your post. And still I am 
</I>&gt;<i> convinced that a hard requirement to quote all values is not the best 
</I>&gt;<i> solution. There are some values that MUST be quoted, some that SHOULD be 
</I>&gt;<i> quoted, and even some that SHOULD NOT be quoted. Those that must be 
</I>&gt;<i> quoted are already covered by the spec, and validators will yield the 
</I>&gt;<i> relevant error message when encountering such values unquoted. For those 
</I>&gt;<i> values that *should* be quoted (those that improve in readability when 
</I>&gt;<i> quoted, or those that could lead to errors when they are later changed 
</I>&gt;<i> if unquoted), a warning from the validator should be enough. Finally, 
</I>&gt;<i> there are some values that are better unquoted, such as those attributes 
</I>&gt;<i> that can only take a number (there is no risk of errors, and the quotes 
</I>&gt;<i> would normally hurt readability more than they help it). Even in the 
</I>&gt;<i> case of @type for &lt;input&gt;, quotes seem quite an overkill: AFAIK, there 
</I>&gt;<i> is no valid value for this attribute that will make them strictly 
</I>&gt;<i> needed; so there is no risk of the author changing the value into 
</I>&gt;<i> something that requires quotes and forget to add them (unless, of 
</I>&gt;<i> course, s/he changes it to something invalid, which will already bring 
</I>&gt;<i> problems of its own). Since &lt;input&gt; elements tend to be relatively 
</I>&gt;<i> short, and often given in a single line of source, adding boilerplate to 
</I>&gt;<i> them for no purpose doesn't seem to be a good idea.
</I>
I agree.


On Sat, 25 Jul 2009, Michael Kozakewich wrote:
&gt;<i> 
</I>&gt;<i> Values better unquoted are those that would make problems if they were quoted.
</I>&gt;<i> I've never run into any value that couldn't be quoted; effectively, the cases
</I>&gt;<i> you mention fall under &quot;don't need to be quoted.&quot;
</I>&gt;<i> Your argument lies on the fact that quotes make things less readable. Any
</I>&gt;<i> change from what you're used to will appear less readable, but I'm not
</I>&gt;<i> convinced that quotes inherently make code less readable. (Though I'll grant
</I>&gt;<i> that Boolean attributes don't need quotes, unless they're XHTML.)
</I>
Personally I find that my programming background has led me to dislike 
quotes around numeric literals and keywords, because I consider quotes to 
be indicative of strings, and so quoting numbers and keywords makes me 
feel like I'm giving the wrong data type. It's irrational, of course.


&gt;<i> I see a disconnect here between the validator and the spec. The 
</I>&gt;<i> validator would base everything on the spec, and so the spec itself 
</I>&gt;<i> should recommend quotes for &quot;potentially unsafe attributes&quot; at the very 
</I>&gt;<i> least, and back up that view in all the code examples.
</I>
Validators are allowed to warn for things that the spec doesn't mention, 
so long as they don't say that those are conformance errors.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>

































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021958.html">[whatwg] question about Web Storage setItem()'s behavior
</A></li>
	<LI>Next message: <A HREF="021725.html">[whatwg] Make quoted attributes a conformance criteria
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21684">[ date ]</a>
              <a href="thread.html#21684">[ thread ]</a>
              <a href="subject.html#21684">[ subject ]</a>
              <a href="author.html#21684">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
