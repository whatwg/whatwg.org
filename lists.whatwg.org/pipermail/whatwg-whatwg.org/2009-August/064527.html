<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Comments on the definition of a valid e-mail address
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Comments%20on%20the%20definition%20of%20a%20valid%20e-mail%20address&In-Reply-To=%3CEB878863-4D69-422F-B93E-D2F893246039%40dartmouth.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064523.html">
   <LINK REL="Next"  HREF="064644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Comments on the definition of a valid e-mail address</H1>
<!--htdig_noindex-->
    <B>Brian Campbell</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Comments%20on%20the%20definition%20of%20a%20valid%20e-mail%20address&In-Reply-To=%3CEB878863-4D69-422F-B93E-D2F893246039%40dartmouth.edu%3E"
       TITLE="[whatwg] Comments on the definition of a valid e-mail address">Brian.P.Campbell at dartmouth.edu
       </A><BR>
    <I>Mon Aug 24 13:33:41 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064523.html">[whatwg] Comments on the definition of a valid e-mail address
</A></li>
        <LI>Next message: <A HREF="064644.html">[whatwg] Comments on the definition of a valid e-mail address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64527">[ date ]</a>
              <a href="thread.html#64527">[ thread ]</a>
              <a href="subject.html#64527">[ subject ]</a>
              <a href="author.html#64527">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Aug 24, 2009, at 3:24 PM, Aryeh Gregor wrote:

&gt;&gt;<i> Yup.  If it is deliverable then surely it's an alias to the same  
</I>&gt;&gt;<i> address
</I>&gt;&gt;<i> without the trailing dot, in which case a browser could choose to  
</I>&gt;&gt;<i> remove
</I>&gt;&gt;<i> it.
</I>&gt;<i>
</I>&gt;<i> Yes, it's not possible for &quot;example.com.&quot; to mean anything different
</I>&gt;<i> from &quot;example.com&quot;.  (In fact they do mean something different in DNS,
</I>&gt;<i> but &quot;example.com.&quot; means the same thing as what &quot;example.com&quot; is
</I>&gt;<i> normally used to mean.  Moreover, the meaning of &quot;example.com&quot; in DNS
</I>&gt;<i> is basically nonsense for web apps processing user-submitted e-mail
</I>&gt;<i> addresses.  At least, as far as I understand it; I don't know too much
</I>&gt;<i> about DNS.)
</I>
Actually, the trailing dot is meaningful. A domain without a trailing  
dot is a relative domain; for example, if you are within the  
&quot;example.com&quot; domain, then &quot;foo&quot; could resolve to  
&quot;foo.example.com&quot; (or if that doesn't exist, then it would try  
resolving that at the root level, and fail since &quot;foo&quot; is not a TLD).  
A domain with a trailing dot is an absolute domain; it will only ever  
be resolved at the root level.

This difference may be significant. If someone manages to register the  
top level domain &quot;mail&quot; (which may be possible if the proposed new  
gTLD rules are passed), and has an email address of &quot;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">foo at mail</A>&quot;, then  
you might want to distinguish between that resolving to &quot;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">foo at mail.wikimedia.org</A> 
&quot; vs. &quot;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">foo at mail.</A>&quot;

Of course, this is complicated because the trailing dot is technically  
not allowed in an email address, but it seems to work in some contexts  
that I've tried (though most just strip off the trailing dot).

About the more general subject of this thread, I have tested sending  
myself email at all of the following addresses, all of which seem to  
work just fine, though some generate warnings in my mail client (Apple  
mail):

Brian P. <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">Campbell at dartmouth.edu</A>
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">...brian...p...campbell... at dartmouth.edu</A>
<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">brian.p.campbell at dartmouth.edu.</A>
Brian (this is a test) P (of comments) Campbell (and whitespace)@(here  
comes the domain) dartmouth.edu
brian p campbell

Note that Dartmouth has a very permissive email system that allows  
name components to be delimited by whitespace and/or periods, and  
prefixes of name components as long as you wind up with a unique  
match. And of course the address without the domain only works when  
I'm sending within the same domain. In some cases, the addresses were  
altered slightly in the process of being sent, for example 'Brian P. <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">Campbell at dartmouth.edu</A> 
' came through as '&quot;Brian P. Campbell&quot;@dartmouth.edu'.

Given that there are so many technically invalid addresses that  
actually do work to deliver mail, and that I'm sure some people have  
odd addresses due to poor form validation (perhaps someone has signed  
up for an email account on a web form and it allowed spaces in the  
address), it's probably best to be relatively lenient about the  
addresses allowed. I think the best you can do is look for at least  
one character, followed by an @ sign, followed by a legal domain name  
(which seems to be more strictly checked, though given the presence of  
IDNs, may not be easy to restrict in the future as well).

-- Brian

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064523.html">[whatwg] Comments on the definition of a valid e-mail address
</A></li>
	<LI>Next message: <A HREF="064644.html">[whatwg] Comments on the definition of a valid e-mail address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64527">[ date ]</a>
              <a href="thread.html#64527">[ thread ]</a>
              <a href="subject.html#64527">[ subject ]</a>
              <a href="author.html#64527">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
