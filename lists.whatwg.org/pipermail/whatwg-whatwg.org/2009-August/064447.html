<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Proposed changes to the History API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposed%20changes%20to%20the%20History%20API&In-Reply-To=%3Cc84706c70908201513h491fc9e7qbdbdc07bca94f0d5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="064445.html">
   <LINK REL="Next"  HREF="064448.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Proposed changes to the History API</H1>
<!--htdig_noindex-->
    <B>Justin Lebar</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Proposed%20changes%20to%20the%20History%20API&In-Reply-To=%3Cc84706c70908201513h491fc9e7qbdbdc07bca94f0d5%40mail.gmail.com%3E"
       TITLE="[whatwg] Proposed changes to the History API">justin.lebar at gmail.com
       </A><BR>
    <I>Thu Aug 20 15:13:46 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="064445.html">[whatwg] Proposed changes to the History API
</A></li>
        <LI>Next message: <A HREF="064448.html">[whatwg] Proposed changes to the History API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64447">[ date ]</a>
              <a href="thread.html#64447">[ thread ]</a>
              <a href="subject.html#64447">[ subject ]</a>
              <a href="author.html#64447">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Aug 20, 2009 at 11:20 AM, Jeremy Orlow&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at chromium.org</A>&gt; wrote:
&gt;<i> I see. &#160;It makes more sense why you mentioned the session storage element
</I>&gt;<i> then. &#160;Note that there has been some discussion about whether session
</I>&gt;<i> storage should survive crashes, but I know Safari and Chrome are currently
</I>&gt;<i> planning to _not_ serialize&#160;it to disk.
</I>
I just did a quick test, and it appears that Firefox does save
sessionStorage across browser sessions, but IE8 does not.

Leaving aside the question of what the right thing to do is with
sessionStorage, I think there are some serious benefits to saving the
pushState'ed state across sessions.  Suppose I'm using a webmail
client which uses this new API.  I click around to a few of my folders
and messages and then close the browser.

If the page wants the back/forward buttons to work when the browser
re-opens, it needs to store all of the state for those history entries
in the URI.  At the point that pages have to do that, we might as well
not store a per-page state object.

&gt;<i> &#160;I still think we shouldn't force app developers to&#160;serialize&#160;everything to
</I>&gt;<i> strings. &#160;Maybe we can just raise an exception if they try to set the
</I>&gt;<i> history state to something unserializable? &#160;(I guess that's what you're
</I>&gt;<i> already doing?)
</I>
Right now, I just serialize to JSON and throw an exception if that
fails.  I don't have a problem continuing to do that, at least until
we get the structured clone thing sorted out.

-Justin

&gt;<i> On Thu, Aug 20, 2009 at 11:05 AM, Justin Lebar &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">justin.lebar at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Wed, Aug 19, 2009 at 5:31 PM, Jeremy Orlow&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at chromium.org</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; but here it seems like everything can just stay in memory...right?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My thought was that if you had a tab open and restarted the browser,
</I>&gt;&gt;<i> that the state objects would be there after the restart, so we'd have
</I>&gt;&gt;<i> to serialize to disk. &#160;I also thought that we'd persist this state
</I>&gt;&gt;<i> data even after we take a Document out of memory.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It might be possible to store some subset of DOM objects while still
</I>&gt;&gt;<i> meeting those requirements, but that seems like it might be a serious
</I>&gt;&gt;<i> can of worms. &#160;Do you have a use case which would be facilitated by
</I>&gt;&gt;<i> being able to store some DOM objects in this way?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Justin
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="064445.html">[whatwg] Proposed changes to the History API
</A></li>
	<LI>Next message: <A HREF="064448.html">[whatwg] Proposed changes to the History API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64447">[ date ]</a>
              <a href="thread.html#64447">[ thread ]</a>
              <a href="subject.html#64447">[ subject ]</a>
              <a href="author.html#64447">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
