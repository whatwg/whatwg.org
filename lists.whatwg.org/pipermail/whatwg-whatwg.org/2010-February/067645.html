<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Structured clone for an Error object
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Structured%20clone%20for%20an%20Error%20object&In-Reply-To=%3Cop.u8vls3n4idj3kv%40simon-pieterss-macbook.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067644.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Structured clone for an Error object</H1>
<!--htdig_noindex-->
    <B>Simon Pieters</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Structured%20clone%20for%20an%20Error%20object&In-Reply-To=%3Cop.u8vls3n4idj3kv%40simon-pieterss-macbook.local%3E"
       TITLE="[whatwg] Structured clone for an Error object">simonp at opera.com
       </A><BR>
    <I>Sun Feb 28 22:32:56 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067644.html">[whatwg] Structured clone for an Error object
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67645">[ date ]</a>
              <a href="thread.html#67645">[ thread ]</a>
              <a href="subject.html#67645">[ subject ]</a>
              <a href="author.html#67645">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 28 Feb 2010 23:03:31 +0100, ATSUSHI TAKAYAMA  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">taka.atsushi at googlemail.com</A>&gt; wrote:

&gt;<i> On Fri, Feb 26, 2010 at 1:44 PM, Drew Wilson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">atwilson at google.com</A>&gt; wrote:
</I>&gt;&gt;<i> BTW, the spec says that unhandled exceptions are either propagated to  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> parent Worker object (in the case of dedicated workers) or reported to  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> user via the console (for shared workers).
</I>&gt;&gt;<i> So I'm not certain why passing Error objects via postMessage() would be
</I>&gt;&gt;<i> necessary for a spec-compliant UA (note that some UAs have bugs in their
</I>&gt;&gt;<i> implementation such that not all exceptions in Workers are logged to the
</I>&gt;&gt;<i> console, but that shouldn't motivate a change in the spec).
</I>&gt;&gt;<i> -atw
</I>&gt;<i>
</I>&gt;<i> This is good to know. As far as I tested, Firefox and Safari actually
</I>&gt;<i> supports worker.onerror.
</I>&gt;<i>
</I>&gt;<i> It also turns out that Firefox and Chromium actually sends a clone of
</I>&gt;<i> an Error object. Safari turns it into a string. Are they going to
</I>&gt;<i> convert change the behavior in the future?
</I>
Internal builds of Opera converts Error to null as the spec says, but we'd  
be happy to see the spec changed to say that Error, DOMException, and  
similar things get cloned.

If you want to make sure your current code will continue to work, you  
should probably toString() explicitly before postMessage()ing.

-- 
Simon Pieters
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067644.html">[whatwg] Structured clone for an Error object
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67645">[ date ]</a>
              <a href="thread.html#67645">[ thread ]</a>
              <a href="subject.html#67645">[ subject ]</a>
              <a href="author.html#67645">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
