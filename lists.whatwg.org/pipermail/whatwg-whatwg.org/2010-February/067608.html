<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML Cookie API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3Cc9e12661002241603g2ac556f3ga76c7382519a81a3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067616.html">
   <LINK REL="Next"  HREF="067609.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML Cookie API</H1>
<!--htdig_noindex-->
    <B>Garrett Smith</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3Cc9e12661002241603g2ac556f3ga76c7382519a81a3%40mail.gmail.com%3E"
       TITLE="[whatwg] HTML Cookie API">dhtmlkitchen at gmail.com
       </A><BR>
    <I>Wed Feb 24 16:03:33 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067616.html">[whatwg] HTML Cookie API
</A></li>
        <LI>Next message: <A HREF="067609.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67608">[ date ]</a>
              <a href="thread.html#67608">[ thread ]</a>
              <a href="subject.html#67608">[ subject ]</a>
              <a href="author.html#67608">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Feb 23, 2010 at 8:56 PM, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:
&gt;<i> The document.cookie API is kind of terrible. &#160;Web developers shouldn't
</I>&gt;<i> have to parse a cookie-string or prepare a properly formated
</I>&gt;<i> set-cookie-string. &#160;Here's a proposal for an HTML cookie API that
</I>&gt;<i> isn't as terrible:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://docs.google.com/Doc?docid=0AZpchfQ5mBrEZGQ0cDh3YzRfMTRmdHFma21kMg&amp;hl=en">https://docs.google.com/Doc?docid=0AZpchfQ5mBrEZGQ0cDh3YzRfMTRmdHFma21kMg&amp;hl=en</A>
</I>&gt;<i>
</I>&gt;<i> I'd like to propose we include this API in a future version of HTML.
</I>&gt;<i> As always, feedback welcome.
</I>&gt;<i>
</I>|<i> Because HttpOnly cookies are inaccessible to script, the |httpOnly|
</I>|<i> attribute will usually be false.
</I>
Usually? When ever would HttpOnly be true?

Instead of &quot;array like&quot;, I would like to rather have a NamedCookieMap,
which is sort of like a NamedNodeMap that the cookies can be retrieved
by an item or namedItem.

I would also rather like to see a `cookies` getter instead of
getCookies (just personally, style-wise I like that).

// Get a Cookie object or null.
var fooCook = document.cookies.namedItem(&quot;foo&quot;);

- or -
// Get a Cookie object or undefined.
var fooCook = document.cookies[&quot;foo&quot;];

- or -

// Get a Cookie object or undefined.
var fooCookIndex = 2;
fooCook = document.cookies[fooCookIndex];

How about that?

A Cookes API makes working with cookies easier.

Working with cookies is important to support browsers that do not
implement new features such HTML 5 storage APIs.

For legacy browsers, a Cookie API can be easily emulated in script. A
common interface for new browsers and legacy browsers would have
consistent cross browser behavior and little disparity. The same
cannot be said for Storage APIs.

Where is the argument for making the API async?

Cookies have been synchronous for longer than I have been writing
javascript and to my knowledge, nobody has ever complained of that
being a problem. A common feature test is something like:

var isCookieSupported;
if(typeof document.cookie == &quot;string&quot;) {
  document.cookie = &quot;test=1&quot;;
  isCookieSupported = document.cookie.indexOf(&quot;test=1&quot;) !== -1;
}

That feature test relies on the fact that cookies are synchronous. If
the new proposed API is also synchronous, then the cookies feature
test will be possible as:-

var isCookieSupported;
if(typeof document.cookie == &quot;string&quot;) {
  document.setCookie({name: &quot;test&quot;, value : &quot;1&quot;});
  isCookieSupported = document.cookies.test === &quot;1&quot;;
}

Asynchronous cookies that would mean that cookie setting tests would be harder.

Garrett

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067616.html">[whatwg] HTML Cookie API
</A></li>
	<LI>Next message: <A HREF="067609.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67608">[ date ]</a>
              <a href="thread.html#67608">[ thread ]</a>
              <a href="subject.html#67608">[ subject ]</a>
              <a href="author.html#67608">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
