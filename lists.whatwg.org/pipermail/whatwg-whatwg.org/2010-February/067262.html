<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Drag-and-drop feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Drag-and-drop%20feedback&In-Reply-To=%3CPine.LNX.4.64.1002050229200.26790%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067261.html">
   <LINK REL="Next"  HREF="067260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Drag-and-drop feedback</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Drag-and-drop%20feedback&In-Reply-To=%3CPine.LNX.4.64.1002050229200.26790%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Drag-and-drop feedback">ian at hixie.ch
       </A><BR>
    <I>Thu Feb  4 18:33:16 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067261.html">[whatwg] Drag-and-drop feedback
</A></li>
        <LI>Next message: <A HREF="067260.html">[whatwg] Drag-and-drop feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67262">[ date ]</a>
              <a href="thread.html#67262">[ thread ]</a>
              <a href="subject.html#67262">[ subject ]</a>
              <a href="author.html#67262">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 4 Feb 2010, Daniel Cheng wrote:
&gt;<i> On Thu, Feb 4, 2010 at 5:28 PM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;<i> &gt; On Thu, 4 Feb 2010, Daniel Cheng wrote:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Webkit and Firefox are case-sensitive. IE only does &quot;TEXT&quot; and 
</I>&gt;<i> &gt; &gt; &gt; &quot;URL&quot;, but case-insensitively (at least for Text, I didn't test 
</I>&gt;<i> &gt; &gt; &gt; URL). Chrome is case-insensitive for everything.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Tough call. I guess we'll go with just converting everything to 
</I>&gt;<i> &gt; &gt; &gt; lowercase, so that it's case-insensitive.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; BTW I noticed Chrome includes &quot;Text&quot; and &quot;URL&quot; in the .types list. 
</I>&gt;<i> &gt; &gt; &gt; That's incorrect according to the spec.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; If event.dataTransfer converts everything to lowercase, that means 
</I>&gt;<i> &gt; &gt; there are native formats that will always be impossible to access.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The spec requires that the UA lowercase all the native types as well 
</I>&gt;<i> &gt; (and that they be converted to MIME types).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Could you elaborate on which types would be a problem, and on what 
</I>&gt;<i> &gt; platforms?
</I>&gt;<i> 
</I>&gt;<i> Forcing UA to lowercase all formats has a high implementation cost.
</I>
It's not _that_ high. It's just a few strings, and it's easily cachable.


&gt;<i> Most DataTransfer implementations now can directly interact with the 
</I>&gt;<i> native system data object, whatever form that takes. With this change, 
</I>&gt;<i> the UA has to enumerate (with possible string conversions involved, 
</I>&gt;<i> depending on the platform) and lower case all formats currently in the 
</I>&gt;<i> drag and drop/clipboard operation with every call to 
</I>&gt;<i> getData()/setData()/clearData(). Furthermore, what happens if there are 
</I>&gt;<i> collisions after lowercasing?
</I>
The spec requires that the UA convert the formats to MIME types, so the UA 
is responsible for preventing collisions.


&gt;<i> Also, suppose some Windows app XYZ uses the data format &quot;My Awesome 
</I>&gt;<i> Clipboard Format&quot;. If a page wants to set drag and drop (or clipboard 
</I>&gt;<i> data; presumably, the interfaces to transfer data are going to remain 
</I>&gt;<i> somewhat similar), it will be unable to set data in the correct format 
</I>&gt;<i> unless the UA happens to internally map a MIME type to that data format.
</I>
Yes.


&gt;<i> Some common MIME types should definitely be mapped to native data 
</I>&gt;<i> formats, but the interface shouldn't prevent someone from interfacing 
</I>&gt;<i> with any arbitrary app they want.
</I>
I'm open to changing this again, but if it is to change again I want to 
make sure we never change it after that, so we need to be very sure about 
what the spec should say here.

Exactly what conversions should happen? When?

If you could work with other browser vendors to come up with the exact 
rules for dataTransfer that everyone agrees makes sense on every platform, 
that would be ideal.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067261.html">[whatwg] Drag-and-drop feedback
</A></li>
	<LI>Next message: <A HREF="067260.html">[whatwg] Drag-and-drop feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67262">[ date ]</a>
              <a href="thread.html#67262">[ thread ]</a>
              <a href="subject.html#67262">[ subject ]</a>
              <a href="author.html#67262">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
