<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] validationMessage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20validationMessage&In-Reply-To=%3CPine.LNX.4.64.1002112327310.29686%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067360.html">
   <LINK REL="Next"  HREF="067357.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] validationMessage</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20validationMessage&In-Reply-To=%3CPine.LNX.4.64.1002112327310.29686%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] validationMessage">ian at hixie.ch
       </A><BR>
    <I>Thu Feb 11 18:39:13 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067360.html">[whatwg] prompts,	alerts and showModalDialog during 	beforeunload/unload events
</A></li>
        <LI>Next message: <A HREF="067357.html">[whatwg] validationMessage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25081">[ date ]</a>
              <a href="thread.html#25081">[ thread ]</a>
              <a href="subject.html#25081">[ subject ]</a>
              <a href="author.html#25081">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 10 Nov 2009, Michelangelo De Simone wrote:
&gt;<i> 
</I>&gt;<i> I've been dealing with the validationMessage implementation in WebKit. 
</I>&gt;<i> As some of WebKit member pointed out it's quite unusual for an attribute 
</I>&gt;<i> to &quot;return a suitably *localized message* that the user agent would show 
</I>&gt;<i> the user&quot;.
</I>&gt;<i> 
</I>&gt;<i> Couldn't such behavior be potentially heterogeneous among UAs and 
</I>&gt;<i> localizations?
</I>&gt;<i> 
</I>&gt;<i> What is the rationale about this choice? A simpler behavior with a 
</I>&gt;<i> predetermined list of return values (eg: i.validationMessage == 
</I>&gt;<i> VALUEMISSING) could be much more efficient for authors and implementors 
</I>&gt;<i> to deal with, IMHO.
</I>
The relevant use cases that led to this design are:

1. Getting validation of forms without scripting, with the UA doing all 
   the UI work.

2. Getting validation of forms with the UI designed by the author, but 
   with the actual validation work (including working out what the 
   messages should be) done by the UA.

3. Getting validation of forms with the UI completely done by the author,
   including deciding what the messages should be.

For #1, the DOM API is irrelevant, and the UI message is generated by the 
UA, so by definition it is localised.

For #3, the author generates the messages, so the error string isn't 
useful. Instead, the &quot;validity&quot; API gives the status of the control, down 
to each individual constraint, and the author can use that to generate the 
relevant error message.

For #2, the author can use validationMessage to get the relevant message, 
which it can then insert into its page dynamically.


On Tue, 10 Nov 2009, Scott Gonz&#225;lez wrote:
&gt;<i>
</I>&gt;<i> Wouldn't the UA be written for a specific language that would be 
</I>&gt;<i> independent of the language the page's content is written in? For 
</I>&gt;<i> example, a user in Spain would be using a UA with a Spanish locale (the 
</I>&gt;<i> UA's menus, dialogs, button labels, etc. would all be in Spanish). If 
</I>&gt;<i> that user were to visit a page written in French wouldn't the content 
</I>&gt;<i> generated by the UA still be in Spanish? So an alert would contain a 
</I>&gt;<i> message in French, but a button in Spanish. I would expect the same 
</I>&gt;<i> thing to happen with validation messages.
</I>&gt;<i>
</I>&gt;<i> As for the suggestion of the validation message just being a constant, 
</I>&gt;<i> you can just check the validity state if you want to provide custom 
</I>&gt;<i> messages.
</I>
Indeed.


On Sun, 15 Nov 2009, timeless wrote:
&gt;<i>
</I>&gt;<i> [GMail] apparently does expect localized buttons 
</I>&gt;<i> &lt;<A HREF="https://bugs.maemo.org/show_bug.cgi?id=5704">https://bugs.maemo.org/show_bug.cgi?id=5704</A>&gt; but in some cases the 
</I>&gt;<i> buttons they expect are not the labels they want. We've had reports 
</I>&gt;<i> where the gmail instructions mention OK/Cancel and the user had 
</I>&gt;<i> localized (Yes/No) buttons. [...]
</I>&gt;<i> 
</I>&gt;<i> Trying to assume how the string is formatted or trying to guess which 
</I>&gt;<i> strings describe the given buttons/actions by doing parsing is going to 
</I>&gt;<i> fail.
</I>
Absolutely; that's what the .validity attribute is for.


On Fri, 20 Nov 2009, Michelangelo De Simone wrote:
&gt;<i> 
</I>&gt;<i> pardon me but it seems almost nonsense to me: would users fill forms in 
</I>&gt;<i> a language they can't even understand? For instance: I'm italian, I 
</I>&gt;<i> speak Italian and English but I'm required to fill a form in Swahili. I 
</I>&gt;<i> would understand validation messages for sure (they would come from my 
</I>&gt;<i> UA) but I couldn't understand why they don't satisfy their constraints, 
</I>&gt;<i> what I'm supposed to fill and when I should submit the form.
</I>
Indeed. This is the case today also. I don't think this API affects that.


On Thu, 19 Nov 2009, Peter Kasting wrote:
&gt;<i> 
</I>&gt;<i> From <A HREF="https://bugs.webkit.org/show_bug.cgi?id=27959#c29">https://bugs.webkit.org/show_bug.cgi?id=27959#c29</A> , where this was 
</I>&gt;<i> implemented for WebKit: &quot;This patch sure does seem to be an eloquent 
</I>&gt;<i> argument for not having all these localized strings in the HTML5 form 
</I>&gt;<i> element design! I don't see a lot of value of returning these strings 
</I>&gt;<i> that might not even be in the same language as the website. I wish we 
</I>&gt;<i> could get that changed.&quot; -- Darin Adler
</I>
How would we address use case #2 without this API?


&gt;<i> My oversimplified view of this is:
</I>&gt;<i> * Providing a way for the webpage to specify validation constraints and 
</I>&gt;<i> understand when they have not been met -- good
</I>&gt;<i> * Directing the UA to step into this process and show the user messages 
</I>&gt;<i> about the validation failures, which don't take into account context the 
</I>&gt;<i> web page has -- bad
</I>
How would we do use case #1 without the second of these bullet points?


&gt;<i> This seems like an attempt to make life slightly easier on webpage 
</I>&gt;<i> authors by providing boilerplate UI if they don't want to write 
</I>&gt;<i> anything.  But I see that as a small benefit with significant edge 
</I>&gt;<i> cases.  Authors are already expected to supply the textual content in 
</I>&gt;<i> the page, the text in alerts, etc., so providing the text in the 
</I>&gt;<i> &quot;validation failed&quot; UI doesn't seem that bad.  The UA can still do 
</I>&gt;<i> things like turn fields red or add warning sign icons or something if it 
</I>&gt;<i> likes.
</I>
I agree that we should handle use case #3, but that still leaves use case 
#1 at a minimum (unless we want to bail on form validation when script is 
disabled, but that seems to rather miss the point of the API).


On Thu, 19 Nov 2009, Scott Gonz&#225;lez wrote:
&gt;<i> 
</I>&gt;<i> I agree with this specific case because I would personally always 
</I>&gt;<i> customize the validation handling. However, following that same logic 
</I>&gt;<i> wouldn't you come to the conclusion that date inputs should not display 
</I>&gt;<i> calendars because they need to be localized? I would certainly not 
</I>&gt;<i> expect the average user to enter a valid date format of YYYY-MM-DD, so 
</I>&gt;<i> not having a calendar would make validation of dates almost worthless 
</I>&gt;<i> without a calendar. On the other hand, this is another case where I 
</I>&gt;<i> would most likely use a library like jQuery to display a calendar anyway 
</I>&gt;<i> to give me more control over the calendar. A bit off-topic, but they 
</I>&gt;<i> seem to be pretty closely related.
</I>
I agree that it's similar. The whole point of these additions is to reduce 
the need for scripting.


On Thu, 19 Nov 2009, Peter Kasting wrote:
&gt;<i> 
</I>&gt;<i> * I am confused, what needs to be localized about the calendar?  Are you
</I>&gt;<i> referring to non-Gregorian calendars, e.g. the Mayan calendar?
</I>
On Fri, 20 Nov 2009, Scott Gonz&#225;lez wrote:
&gt;<i> 
</I>&gt;<i> Month names, day names, whether the year comes before or after the 
</I>&gt;<i> month, etc.
</I>
Right.


On Fri, 20 Nov 2009, Michelangelo De Simone wrote:
&gt;<i> 
</I>&gt;<i> validationMessage returns &quot;something&quot; in a localized fashion related to 
</I>&gt;<i> UA's locale. This means that we have two major issues from my point of 
</I>&gt;<i> view:
</I>&gt;<i> 
</I>&gt;<i> 1. decontextualization: page's locale may differ from UA's locale;
</I>&gt;<i> 2. heterogeneity: actual specs rely too much on implementors and
</I>&gt;<i> different localizations.
</I>&gt;<i> 
</I>&gt;<i> 1. Decontextualization
</I>&gt;<i> 
</I>&gt;<i> As I and Peter pointed out it's quite nonsense. Except for the obvious 
</I>&gt;<i> difference between page content (eg: let's say &quot;English&quot;) and validation 
</I>&gt;<i> message content (eg: let's say &quot;Italian&quot;), it's most illogical: would 
</I>&gt;<i> you ever fill a form in a language you don't understand just relying on 
</I>&gt;<i> validation hints from your UA? Ok, let's say you accomplish such task 
</I>&gt;<i> after N attempts: what do you THINK you're gonna submit? Perhaps you 
</I>&gt;<i> thought to be filling a form to register to a forum while you were 
</I>&gt;<i> unconsciously filling, instead, a &quot;malicious&quot; form.
</I>
This objection seems orthogonal to the use cases this API is intended to 
address. I don't think the case of pages being in another language are 
really relevant here.


&gt;<i> 2. Heterogeneity
</I>&gt;<i> 
</I>&gt;<i> Even if objections in 1. hadn't reasons to exist we would have a (de 
</I>&gt;<i> jure) HTML spec with no common validation messages: UA X, in locale L1 
</I>&gt;<i> would have some strings; UA Y, in the same locale, would have other 
</I>&gt;<i> strings. It's not generic and it's not &quot;ruled&quot; enough.
</I>&gt;<i> 
</I>&gt;<i> Thus far there're much better ways to accomplish the same task; for what 
</I>&gt;<i> it's worth, my opinion is that validationMessage has very few reasons to 
</I>&gt;<i> exist at all.
</I>&gt;<i> 
</I>&gt;<i> UAs can come up with their own desired way of advising users of 
</I>&gt;<i> validation errors and authors can enforce such communication in the way 
</I>&gt;<i> they prefer: we all love ValidityState's validation flags.:)
</I>
That's fine for use cases #1 and #3, but it doesn't handle case #2, which 
frankly I think is likely to be the most common case -- people are going 
to want to style the UI, but they usually aren't going to want to 
reimplement all the validation logic. What's the point of having the UA do 
it at all if the page then has to redo it?


On Sun, 22 Nov 2009, Aryeh Gregor wrote:
&gt;<i> On Thu, Nov 19, 2009 at 7:05 PM, Peter Kasting &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">pkasting at google.com</A>&gt; wrote:
</I>&gt;<i> &gt; The UA can still do things like turn fields red or add warning sign 
</I>&gt;<i> &gt; icons or something if it likes.
</I>&gt;<i>
</I>&gt;<i> What's validationMessage even supposed to return in these cases?  For 
</I>&gt;<i> instance, suppose that a particular UA never returns an error for 
</I>&gt;<i> max/min overflows because it always just snaps the value to the max or 
</I>&gt;<i> min onchange and onsubmit.  (AFAICT the spec permits this.)  What is it 
</I>&gt;<i> supposed to return if a script queries the input's validation status 
</I>&gt;<i> when it's temporarily invalid, like if the user changed it but didn't 
</I>&gt;<i> move the cursor out of the input yet?  The spec just says &quot;a suitably 
</I>&gt;<i> localized message that the user agent would show the user&quot;, but in this 
</I>&gt;<i> case the user agent wouldn't normally show the user anything.
</I>
It should show the same message it would give the user if the user hit 
&quot;enter&quot; to submit the form in this scenario.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>


















































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067360.html">[whatwg] prompts,	alerts and showModalDialog during 	beforeunload/unload events
</A></li>
	<LI>Next message: <A HREF="067357.html">[whatwg] validationMessage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25081">[ date ]</a>
              <a href="thread.html#25081">[ thread ]</a>
              <a href="subject.html#25081">[ subject ]</a>
              <a href="author.html#25081">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
