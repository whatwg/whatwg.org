<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Supporting eviction in WebStorage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20eviction%20in%20WebStorage&In-Reply-To=%3CPine.LNX.4.64.1002041147170.27124%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024968.html">
   <LINK REL="Next"  HREF="067244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Supporting eviction in WebStorage</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Supporting%20eviction%20in%20WebStorage&In-Reply-To=%3CPine.LNX.4.64.1002041147170.27124%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Supporting eviction in WebStorage">ian at hixie.ch
       </A><BR>
    <I>Thu Feb  4 03:49:54 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="024968.html">[whatwg] history.back()
</A></li>
        <LI>Next message: <A HREF="067244.html">[whatwg] an odd example of the meter element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67242">[ date ]</a>
              <a href="thread.html#67242">[ thread ]</a>
              <a href="subject.html#67242">[ subject ]</a>
              <a href="author.html#67242">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, 24 Dec 2009, Kyle Scholz wrote:
&gt;<i>
</I>&gt;<i> A common application of WebStorage will be clientside caching. Since 
</I>&gt;<i> there are limits on store size, developers will be implementing eviction 
</I>&gt;<i> schemes, but this is currently difficult because the interface doesn't 
</I>&gt;<i> expose store size or get/set times for entries. Some additions to the 
</I>&gt;<i> Storage interface would support most use cases:
</I>&gt;<i>
</I>&gt;<i> totalSize() - Indicates the absolute size of the store.
</I>
Different UAs will use different storage mechanisms, leading to different 
sizes for the same content. It's not clear exactly how to define this, 
especially now that values can be types other than strings.


&gt;<i> availableSize() - Indicates available space in the store.
</I>
This is even harder to define. We considered it in depth about a year ago, 
but in the end couldn't find a way to define this interoperably.


&gt;<i> keysByAccessTime() - Returns a list of keys in ascending order by access time.
</I>&gt;<i> accessItem() - Sets the access time of an entry to now.
</I>&gt;<i> 
</I>&gt;<i> setItem() will always set the access time of an item. getItem() will
</I>&gt;<i> not set the access time of an item. This makes it possible for the
</I>&gt;<i> developer to determine whether they wish to enable a
</I>&gt;<i> least-recently-stored or least-recently-accessed eviction policy. A
</I>&gt;<i> developer should follow calls to getItem() with a call to accessItem()
</I>&gt;<i> if they wish eviction candidates to be ordered by access time.
</I>
I agree that this could be useful in a future version, but in the 
meantime, authors can fake it by storing the time manually in a parallel 
key, so I haven't added it yet. It'll be interesting to see if people do 
this, or if it isn't actually that important.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024968.html">[whatwg] history.back()
</A></li>
	<LI>Next message: <A HREF="067244.html">[whatwg] an odd example of the meter element
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67242">[ date ]</a>
              <a href="thread.html#67242">[ thread ]</a>
              <a href="subject.html#67242">[ subject ]</a>
              <a href="author.html#67242">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
