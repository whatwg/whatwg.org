<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML Cookie API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3C4B8586F6.9070006%40davidflanagan.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067600.html">
   <LINK REL="Next"  HREF="067604.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML Cookie API</H1>
<!--htdig_noindex-->
    <B>David Flanagan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3C4B8586F6.9070006%40davidflanagan.com%3E"
       TITLE="[whatwg] HTML Cookie API">david at davidflanagan.com
       </A><BR>
    <I>Wed Feb 24 12:07:18 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067600.html">[whatwg] HTML Cookie API
</A></li>
        <LI>Next message: <A HREF="067604.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67603">[ date ]</a>
              <a href="thread.html#67603">[ thread ]</a>
              <a href="subject.html#67603">[ subject ]</a>
              <a href="author.html#67603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Jeremy Orlow wrote:

&gt;<i> 
</I>&gt;<i> Also note that the spec currently has the notion of a storage mutex 
</I>&gt;<i> which should be taken whenever a script tries to access a cookie (or 
</I>&gt;<i> local storage) and is held until the script finishes.  The network stack 
</I>&gt;<i> is also supposed to take this lock whenever getting or setting a cookie. 
</I>&gt;<i>  No one has implemented the storage mutex or stated any intention of 
</I>&gt;<i> doing so because this is basically impossible today.  But, if there were 
</I>&gt;<i> an asynchronous API that most people were using, it actually could be 
</I>&gt;<i> possible that we'd want to implement such a mutex since cookies would 
</I>&gt;<i> then obey run to completion semantics without having serious lock 
</I>&gt;<i> contention.
</I>&gt;<i> 
</I>
Well if no one is going to implement the storage mutex, then I probably 
need to retract my last message

&gt;<i> But yeah.  Definitely any API that touches information spanning tabs 
</I>&gt;<i> (and probably even APIs spanning origins within those tabs) really 
</I>&gt;<i> should be designed in an async manor from now on.  Otherwise we're just 
</I>&gt;<i> digging the whole deeper in terms of forcing ourselves into a single 
</I>&gt;<i> threaded world.
</I>&gt;<i> 
</I>&gt;<i> J
</I>
I worry that this comes down to web developers who want simple APIs vs 
browser implementors who say we can't have them (at least not if we also 
want speed.)

Concurrency issues are not my strong suit, but shouldn't it be possible 
to have safe, synchronous read-only access to cookies (caching volatile 
values like cookies within each thread and then clearing that cache when 
the thread returns to the event loop).  Can't the requirement for a 
mutex or an asynchronous API be limited to setCookie()?

	David

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067600.html">[whatwg] HTML Cookie API
</A></li>
	<LI>Next message: <A HREF="067604.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67603">[ date ]</a>
              <a href="thread.html#67603">[ thread ]</a>
              <a href="subject.html#67603">[ subject ]</a>
              <a href="author.html#67603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
