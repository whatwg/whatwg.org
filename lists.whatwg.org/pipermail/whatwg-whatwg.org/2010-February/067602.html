<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML Cookie API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3C5dd9e5c51002241206m4f88d45w4e1c2f8120be0ecd%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067601.html">
   <LINK REL="Next"  HREF="067619.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML Cookie API</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3C5dd9e5c51002241206m4f88d45w4e1c2f8120be0ecd%40mail.gmail.com%3E"
       TITLE="[whatwg] HTML Cookie API">jorlow at chromium.org
       </A><BR>
    <I>Wed Feb 24 12:06:57 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067601.html">[whatwg] HTML Cookie API
</A></li>
        <LI>Next message: <A HREF="067619.html">[whatwg] Form-based HTTP Authentication Proof of Concept
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67602">[ date ]</a>
              <a href="thread.html#67602">[ thread ]</a>
              <a href="subject.html#67602">[ subject ]</a>
              <a href="author.html#67602">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Feb 24, 2010 at 8:52 PM, David Flanagan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">david at davidflanagan.com</A>&gt;wrote:

&gt;<i> Boris Zbarsky wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 2/24/10 1:04 PM, David Flanagan wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If I've been following the thread correctly, the justification for an
</I>&gt;&gt;&gt;<i> asynchronous API was that localStorage is a mess, or something like
</I>&gt;&gt;&gt;<i> that. I'm not aware of what the issues are with localStorage
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In brief, the fact that if you have multiple threads or processes
</I>&gt;&gt;<i> rendering web pages from the same site, then they can race each other.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  could you justify an asynchronous cookie API more explicitly? This isn't
</I>&gt;&gt;&gt;<i> a
</I>&gt;&gt;&gt;<i> blocking I/O issue, is it? Surely browsers will have the relevant
</I>&gt;&gt;&gt;<i> cookies already cached in memory, won't they?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes, but cookies are not immutable.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  In simple use cases, a developer just wants the cookie value
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Only once?  With a sync API this code:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  if (document.cookie == document.cookie) {
</I>&gt;&gt;<i>    alert(&quot;pass&quot;);
</I>&gt;&gt;<i>  } else {
</I>&gt;&gt;<i>    alert(&quot;fail&quot;);
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  will sometimes alert &quot;fail&quot; depending on what other web pages are loading
</I>&gt;&gt;<i> at the same time and what their HTTP headers look like and what their
</I>&gt;&gt;<i> scripts are doing.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Boris
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> [Changing the subject line back]
</I>&gt;<i>
</I>&gt;<i> Doesn't the HTML5 storage mutex fix this?
</I>&gt;<i>
</I>
Please read my email from 30 minutes ago.


&gt;<i> With the storage mutex mechanism it is possible to create a safe (no way to
</I>&gt;<i> observe volatility) synchronous version of getCookies(), isn't it?
</I>

Sure.


&gt;<i> The downside is that getCookies() might have to block while waiting for the
</I>&gt;<i> mutex.
</I>

Exactly.


&gt;<i> But is that really a reason not to allow synchronous (blocking) access to
</I>&gt;<i> cookies?
</I>

YES!


&gt;<i> Given that the storage mutex is already in the spec,
</I>

It's in the spec, but no one has implemented it or signaled any intention to
do so.  We at Google have gone so far as to say that we will not implement
it.  So, even though it's there, I'm not sure how much it means at this
point.


&gt;<i> doesn't it make sense to define a better synchronous API in addition to the
</I>&gt;<i> new asynchronous API?
</I>

Please see all the LocalStorage discussions and then see if you still think
it's possible to do such a thing.

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100224/6d8123e3/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100224/6d8123e3/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067601.html">[whatwg] HTML Cookie API
</A></li>
	<LI>Next message: <A HREF="067619.html">[whatwg] Form-based HTTP Authentication Proof of Concept
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67602">[ date ]</a>
              <a href="thread.html#67602">[ thread ]</a>
              <a href="subject.html#67602">[ subject ]</a>
              <a href="author.html#67602">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
