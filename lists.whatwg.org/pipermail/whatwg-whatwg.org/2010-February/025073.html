<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] URN or protocol attribute
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20URN%20or%20protocol%20attribute&In-Reply-To=%3C4B73AD79.5030701%40yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025046.html">
   <LINK REL="Next"  HREF="025027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] URN or protocol attribute</H1>
<!--htdig_noindex-->
    <B>Brett Zamir</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20URN%20or%20protocol%20attribute&In-Reply-To=%3C4B73AD79.5030701%40yahoo.com%3E"
       TITLE="[whatwg] URN or protocol attribute">brettz9 at yahoo.com
       </A><BR>
    <I>Wed Feb 10 23:10:49 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025046.html">[whatwg] URN or protocol attribute
</A></li>
        <LI>Next message: <A HREF="025027.html">[whatwg] comments on SCRIPT ASYNC and DEFER
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25073">[ date ]</a>
              <a href="thread.html#25073">[ thread ]</a>
              <a href="subject.html#25073">[ subject ]</a>
              <a href="author.html#25073">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 2/10/2010 3:55 PM, Martin Atkins wrote:
&gt;<i>
</I>&gt;<i> Brett Zamir wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Internet Explorer has an attribute on anchor elements for URNs: 
</I>&gt;&gt;<i> <A HREF="http://msdn.microsoft.com/en-us/library/ms534710%28VS.85%29.aspx">http://msdn.microsoft.com/en-us/library/ms534710%28VS.85%29.aspx</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This has not caught on in other browsers, though I believe it could 
</I>&gt;&gt;<i> be a very powerful feature once the feature was supported with a UI 
</I>&gt;&gt;<i> that handled URNs (as with adding support for custom protocols).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Imagine, for example, to take a link like:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;a href=&quot;<A HREF="http://www.amazon.com/...(shortened">http://www.amazon.com/...(shortened</A>)....&quot; 
</I>&gt;&gt;<i> urn=&quot;isbn:9210020251&quot;&gt;United Nations charter&lt;/a&gt;
</I>&gt;&gt;<i>
</I>&gt;<i> [snip details]
</I>&gt;<i>
</I>&gt;<i> I like what this proposal achieves, but I'm not sure it's the right 
</I>&gt;<i> solution.
</I>&gt;<i>
</I>&gt;<i> Here's an attempt at stating what problem you're trying to solve 
</I>&gt;<i> without any specific implementation: (please correct me if I 
</I>&gt;<i> misunderstood)
</I>&gt;<i>
</I>&gt;<i>  * Provide a means to link to or operate on a particular artifact 
</I>&gt;<i> without necessarily requiring that the artifact be retrieved from a 
</I>&gt;<i> specific location.
</I>&gt;<i>
</I>&gt;<i>  * Provide graceful fallback to user-agents which do not have any 
</I>&gt;<i> specialized handling for a particular artifact.
</I>&gt;<i>
</I>Yes, exactly.
&gt;<i> This is different to simply linking to a different URL scheme (for 
</I>&gt;<i> example, linking a mailto: URL in order to begin an email message 
</I>&gt;<i> without knowing the user's preferred email provider) because it 
</I>&gt;<i> provides a fallback behavior for situations where there is no handler 
</I>&gt;<i> available for a particular artifact.
</I>&gt;<i>
</I>Yes. But note also that it would be possible to have the @protocol 
attribute be, for example, be used for already frequent protocols like 
mailto:, and the @href be http: . Or, to use a URN, the protocol could 
be urn:isbn:... and the @href could be http, etc.

Since 'href' also links to a protocol, it might be more clear for the 
proposed attribute to be called something like @defaultProtocol.

&gt;<i> == Example Use-cases ==
</I>&gt;<i>
</I>&gt;<i>  * View a particular book, movie or other such product without 
</I>&gt;<i> favoring a particular vendor.
</I>&gt;<i>
</I>&gt;<i>  * View a map of the location for particular address or directions to 
</I>&gt;<i> that address without favoring a particular maps provider.
</I>&gt;<i>
</I>&gt;<i>  * View a Spanish translation of some web document without favoring a 
</I>&gt;<i> particular translation provider.
</I>&gt;<i>
</I>&gt;<i>  * Share a link/photo/etc with friends without favoring a particular 
</I>&gt;<i> publishing platform. (i.e. generalizing the &quot;Tweet This&quot;, &quot;Share on 
</I>&gt;<i> Facebook&quot;, class of links)
</I>&gt;<i>
</I>
Yes. This would of course depend on the protocols existing. For example, 
XMPP as an open protocol, might work for your last examples if those 
services were actually using XMPP. And your other examples would also be 
excellent use cases.

&gt;<i> == Prior Art ==
</I>&gt;<i>
</I>&gt;<i> === Android OS Intents ===
</I>&gt;<i>
</I>&gt;<i> The Android OS has a mechanism called Intents[1] which allow one 
</I>&gt;<i> application to describe an operation it needs have performed without 
</I>&gt;<i> nominating a particular other application to perform it.
</I>&gt;<i>
</I>&gt;<i> Intents are described in detail here:
</I>&gt;<i> <A HREF="http://developer.android.com/guide/topics/intents/intents-filters.html">http://developer.android.com/guide/topics/intents/intents-filters.html</A>
</I>&gt;<i>
</I>&gt;<i> An intent that does not identify a particular application consists of 
</I>&gt;<i> the following properties:
</I>&gt;<i>
</I>&gt;<i>  * Action: a verb describing what needs to be done. For example, 
</I>&gt;<i> &quot;view&quot;, &quot;edit&quot;, &quot;choose&quot;, &quot;share&quot;, &quot;call&quot;.
</I>&gt;<i>  * Object: the URI of a particular thing that the action is to be done 
</I>&gt;<i> to. This is not specified for actions that apply only to a class of 
</I>&gt;<i> object, such as &quot;choose&quot;.
</I>&gt;<i>  * Object Type: the MIME type of the Object, or if no particular 
</I>&gt;<i> Object is selected a concrete MIME type or wildcard MIME type (e.g. 
</I>&gt;<i> image/*) describing the class of object that the action relates to.
</I>&gt;<i>
</I>&gt;<i> A process called &quot;Intent Resolution&quot; is used to translate an abstract 
</I>&gt;<i> intent like the above into an explicit intent which nominates a 
</I>&gt;<i> particular handler.
</I>&gt;<i>
</I>&gt;<i> Often when applications use intents a UI is displayed which allows a 
</I>&gt;<i> user to choose one of several available applications that can perform 
</I>&gt;<i> the action. For example, the built-in photo gallery application 
</I>&gt;<i> provides a &quot;Share&quot; command on a photo. By default, this can be handled 
</I>&gt;<i> by application such as the email client and the MMS application, but 
</I>&gt;<i> other applications can declare their support for intents of this type 
</I>&gt;<i> thus allowing plug-in functionality such as sharing a photo on Facebook.
</I>&gt;<i>
</I>
That's an interesting consideration.

I think some behaviors should be necessarily limited with links (as they 
are in HTTP disallowing a link to make a POST or PUT request or upload a 
form (without JavaScript at least))--so that, e.g., spam links don't 
cause users to accidentally do things they didn't want to do. So 
side-effects should probably not occur (like &quot;share&quot; at least), unless 
it was merely, as in your use cases with Twitter/Facebook to lead to a 
UI control confirming that you wanted to share.

Unlike URNs, a regular protocol could already handle the use cases you 
mention, and perhaps the Intents mechanism could itself be made into a 
protocol: e.g.,:

     android:intents;action=CALL;data=tel:123-555-1212

Being that experimentation here is fairly early on, and being that there 
may be too many types of fundamental actions/data/etc. to agree would be 
useful for the whole web (at least at this stage), I'd think that 
allowing protocol innovation should be enough for now. As HTML5 is now 
doing in co-opting various existing practices, HTML6 could also consider 
specializing support for particular protocols down the line if they were 
found to be worthy of being obligatorily supported.


&gt;<i> === Internet Explorer &quot;urn&quot; Attribute ===
</I>&gt;<i>
</I>&gt;<i> Internet Explorer supports a non-standard attribute on the &quot;A&quot; element 
</I>&gt;<i> called &quot;urn&quot;, which accepts an URN identifying some resource.
</I>&gt;<i>
</I>&gt;<i> It is described in detail here:
</I>&gt;<i> <A HREF="http://msdn.microsoft.com/en-us/library/ms534710(VS.85">http://msdn.microsoft.com/en-us/library/ms534710(VS.85</A>).aspx
</I>&gt;<i>
</I>&gt;<i> It is not apparent that this attribute causes any behavior in the 
</I>&gt;<i> browser itself. It is possible that this is exposed to browser 
</I>&gt;<i> extensions in some way to allow them to overload the behavior of a 
</I>&gt;<i> link which identifies a particular class of resource.
</I>&gt;<i>
</I>&gt;<i> It does not seem that this attribute has achieved wide author adoption 
</I>&gt;<i> nor wide application support.
</I>&gt;<i>
</I>Yes, that is correct on all counts. But like perhaps Esperanto (or 
international English, etc.) not catching on, I think the fault does not 
lie in the utility of the idea, but in its inadequate standardization 
and implementation. If the browser doesn't do anything special with the 
attribute, then there is little incentive for website creators to make 
use of it. It seems that the &quot;urn&quot; attribute documentation doesn't even 
make explicit the idea that it could be used for default processing, so 
I'd at least like to see this documented as a potential use, or rather, 
see the more comprehensive @defaultProtocol document it. It'd be great 
if there could be default handling behavior specified (akin to using a 
new protocol inside &quot;href&quot;), but if it is too late in the game, it'd be 
nice to at least have the attribute with a suggested behavior, letting 
the browsers add support if they wished.

&gt;<i> ---------------------------
</I>&gt;<i>
</I>&gt;<i> Please reply with any other use cases and prior art you have.
</I>
I don't know of any other prior art, except that protocol handling is 
already in 
<A HREF="http://www.w3.org/TR/html5/browsers.html#dom-navigator-registerprotocolhandler">http://www.w3.org/TR/html5/browsers.html#dom-navigator-registerprotocolhandler</A> 
.

I think there are any number of use cases--some of which may crop up in 
the future; your list I think already gave a good overview of some 
possibilities. There is the one I already mentioned for a Wikipedia or 
Wikipedia-like protocol to reference concepts, people, or things in a 
generic way, with other encylopedias or resources being potentially 
registerable to handle such resources. I chose Wikipedia because of its 
popularity, openness, and flexibility--no need for waiting around for 
IANA to approve a new concept. That adds some challenges with names 
being in flux as pages are deleted, redirected, merged, etc., but I 
think could still be very useful. Other encyclopedias could use their 
own protocol, or be made to work with Wikipedia as a base, letting their 
users (and Wikipedia users) view an article where they please. (Of 
course, it'd be nice if there were an open API so that one could easily 
query to find out whether the handler turn up any results; see my 
suggested JavaScript below.)

Maybe another similar use case could be a protocol which looked for 
commentary or information on a given webpage--e.g.,:

     commentary:?url=<A HREF="http://yahoo.com">http://yahoo.com</A>

or

     urn:commentary:<A HREF="http://yahoo.com">http://yahoo.com</A> (escaped as needed by URN syntax)

...could find out info about what users had to say about Yahoo.

As yet another example, I just recently proposed to the Unicode mailing 
list that a protocol be adopted to specify a particular Unicode 
character, range of characters, or searched subset. While this might not 
be something the average user would clamor for, I was hoping to get 
standardization on the custom protocol I designed to work with my 
Unicode browsing Firefox extension, (at 
<A HREF="https://addons.mozilla.org/en-US/firefox/addon/5235">https://addons.mozilla.org/en-US/firefox/addon/5235</A> )--a protocol which 
would let you choose how you wanted to view a particular Unicode 
character--e.g., to get description info, meta-data, equivalent 
entities, etc.

While it may seem desirable to be more specific--and indeed it often 
is--sometimes there is benefit in being able to be vague. For example, 
when clicking on such a Unicode &quot;link&quot;, it may be desired to leave 
ambiguous what the user should do with the content. For example, one 
registered handler might simply display the character's authoritative 
name. Another use might be to display the character in a chart along 
with other characters in that range. As in language, sometimes ambiguity 
can be a good thing, letting your user come to their own conclusion/take 
their own path.

If I understand URNs correctly, this ambiguity seems to be closer to 
what a URN represents. It doesn't seem to imply an action, just a name. 
While that might not always be clear, if the particular terminology 
implied an action, it would seem to me that this is more generic than a 
protocol which can have say a query string with variables including 
actions, objects, etc.

That being said, I'd really like to see any protocol work here (and urn: 
seems it can also be used in protocol form anyways).

Actually, maybe it should even be @defaultProtocols with say white-space 
separated protocols occurring in order, to allow, say, one to check for 
support for &quot;tel:&quot;, and if none, then &quot;mailto:&quot;, and if none, then href 
to a contact form.

&gt;<i> I'm particularly interested to see whether Android's (verb, object) 
</I>&gt;<i> tuple is actually required or whether the single object as afforded by 
</I>&gt;<i> your proposal -- and by the existing design of registering handlers 
</I>&gt;<i> for particular URL schemes and MIME types -- is sufficient for the 
</I>&gt;<i> use-cases at hand.
</I>
As far as the existing design of registering handlers, while I think 
that should be all right (e.g., as already at 
<A HREF="http://www.w3.org/TR/html5/browsers.html#dom-navigator-registerprotocolhandler">http://www.w3.org/TR/html5/browsers.html#dom-navigator-registerprotocolhandler</A> 
and also described at 
<A HREF="https://developer.mozilla.org/en/Web-based_protocol_handlers">https://developer.mozilla.org/en/Web-based_protocol_handlers</A> ), I think 
it'd be nice to be able to see additions to say the navigator object or 
&lt;a/&gt; (if not onclick events):

&lt;a href=&quot;<A HREF="http://amazon.com...">http://amazon.com...</A>&quot; defaultProtocol=&quot;urn:isbn:...&quot; 
onclick=&quot;check(event);&quot;&gt;Some book&lt;/a&gt;
&lt;script&gt;
// We must rely on &quot;onclick&quot; since older browsers wouldn't support a 
handler like &quot;onDefaultProtocol&quot; anyways.
// The following demonstrates some potentially useful properties for the 
event:
function  check (e) {
     if (!*navigator.defaultProtocol*) {
         if (!confirm(&quot;Your browser doesn't support generic protocols; 
would you like to be redirected to &quot;+this.href+&quot;?&quot;) {
             e.preventDefault(); // Here we can prevent the regular 'href'
         }
     }
     else if (!*navigator.defaultProtocol.handlers*) { // or requiring a 
key to a specific scheme?
         alert(&quot;Although your browser supports generic protocols, you do 
not have any handlers registered for&quot;+*this.defaultProtocol.scheme*); // 
&quot;for urn&quot;.
         if (!confirm(&quot;Would you like to be redirected to the default 
URL?&quot;) {
             e.preventDefault(); // Here we prevent the defaultProtocol 
(and href) from proposing a dialog to find a protocol; there could 
either be
             // special syntax added to allow jumping over the 
defaultProtocol to the default 'href', or the JavaScript could simply set
             // window.location. The latter would probably be enough.
         }
         else { window.location.href = this.href; }
     }
     else {
         // Since some handlers might need to make a network connection 
to figure out whether they can not only handle the scheme, but also
         // the particular content (like for a specialized bookstore 
which only recognized certain ISBNs), maybe it should also be possible 
to have
         // a selection hierarchy order, such that one could activate 
checking:
         if 
(!*navigator.defaultProtocol.handlers.supports*(this.defaultProtocol)) {*
*            alert(&quot;Unfortunately your registered protocol handlers 
cannot support this particular protocol instance.&quot;);
             e.preventDefault();
         }
         // We might allow script access to the names of the protocol 
handlers, but not allow invoking of a particular handler since it might 
violate the user's wishes; however &quot;selected.name&quot; could be advanced to 
the first capable handler found by the supports() check above
         alert(&quot;We will now open 
&quot;+*navigator.defaultProtocol.handlers.selected.name*)+&quot; with 
&quot;+*this.defaultProtocol*; // e.g., &quot;...will now open UsedBooks with 
urn:isbn:...&quot;
     }
}
&lt;/script&gt;

While the above might be very useful, I don't think it would be 
critical--and no doubt others may find better ways of implementing.... 
The main thing I'd like to see is at least some attribute that justifies 
giving default behavior to a protocol for handling generic data and 
which could override 'href' if the user agrees.

Brett

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100211/75ec9394/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100211/75ec9394/attachment-0001.htm</A>&gt;
</PRE>





<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025046.html">[whatwg] URN or protocol attribute
</A></li>
	<LI>Next message: <A HREF="025027.html">[whatwg] comments on SCRIPT ASYNC and DEFER
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25073">[ date ]</a>
              <a href="thread.html#25073">[ thread ]</a>
              <a href="subject.html#25073">[ subject ]</a>
              <a href="author.html#25073">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
