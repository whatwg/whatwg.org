<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML Cookie API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3C5dd9e5c51002241135sd1ba14avf154a54a92522328%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025326.html">
   <LINK REL="Next"  HREF="025330.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML Cookie API</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3C5dd9e5c51002241135sd1ba14avf154a54a92522328%40mail.gmail.com%3E"
       TITLE="[whatwg] HTML Cookie API">jorlow at chromium.org
       </A><BR>
    <I>Wed Feb 24 11:35:42 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025326.html">[whatwg] HTML Cookie API
</A></li>
        <LI>Next message: <A HREF="025330.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25327">[ date ]</a>
              <a href="thread.html#25327">[ thread ]</a>
              <a href="subject.html#25327">[ subject ]</a>
              <a href="author.html#25327">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Feb 24, 2010 at 8:23 PM, Peter Kasting &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">pkasting at google.com</A>&gt; wrote:

&gt;<i> On Wed, Feb 24, 2010 at 11:11 AM, Nicholas Zakas &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">nzakas at yahoo-inc.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I'm also less-than-thrilled with this being asynchronous, as I think the
</I>&gt;&gt;<i> use cases for cookies are vastly differently than those for databases and
</I>&gt;&gt;<i> web storage. The world is already parsing cookies synchronously right now,
</I>&gt;&gt;<i> it doesn't seem like asynchronicity buys much benefit, it just introduces an
</I>&gt;&gt;<i> additional level of indirection.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You haven't just spent several tortuous weeks trying to figure out how on
</I>&gt;<i> earth to correctly prompt for cookies in a multiprocess browser in a way
</I>&gt;<i> that doesn't break synchronicity requirements the way we have.
</I>&gt;<i>
</I>&gt;<i> Synchronous access to state didn't cause many issues when browsers were all
</I>&gt;<i> single-process, single-thread.  That is increasingly not going to be the
</I>&gt;<i> world we live in.  As Jonas mentioned, just look at localStorage (which,
</I>&gt;<i> contra your position, many developers have proposed using very much like
</I>&gt;<i> cookies) for recent history of why synchronous APIs are troublesome.
</I>&gt;<i>
</I>
Also note that the spec currently has the notion of a storage mutex which
should be taken whenever a script tries to access a cookie (or local
storage) and is held until the script finishes.  The network stack is also
supposed to take this lock whenever getting or setting a cookie.  No one has
implemented the storage mutex or stated any intention of doing so because
this is basically impossible today.  But, if there were an asynchronous API
that most people were using, it actually could be possible that we'd want
to implement such a mutex since cookies would then obey run to completion
semantics without having serious lock contention.


But yeah.  Definitely any API that touches information spanning tabs (and
probably even APIs spanning origins within those tabs) really should be
designed in an async manor from now on.  Otherwise we're just digging the
whole deeper in terms of forcing ourselves into a single threaded world.

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100224/44876cd0/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100224/44876cd0/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025326.html">[whatwg] HTML Cookie API
</A></li>
	<LI>Next message: <A HREF="025330.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25327">[ date ]</a>
              <a href="thread.html#25327">[ thread ]</a>
              <a href="subject.html#25327">[ subject ]</a>
              <a href="author.html#25327">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
