<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] canvas, img, file api and blobs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20canvas%2C%20img%2C%20file%20api%20and%20blobs&In-Reply-To=%3Ce41a53f1002161125p27c7163wac7de9c1d9e67e3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067450.html">
   <LINK REL="Next"  HREF="067452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] canvas, img, file api and blobs</H1>
<!--htdig_noindex-->
    <B>Stefan Haustein</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20canvas%2C%20img%2C%20file%20api%20and%20blobs&In-Reply-To=%3Ce41a53f1002161125p27c7163wac7de9c1d9e67e3%40mail.gmail.com%3E"
       TITLE="[whatwg] canvas, img, file api and blobs">haustein at google.com
       </A><BR>
    <I>Tue Feb 16 11:25:34 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067450.html">[whatwg] canvas, img, file api and blobs
</A></li>
        <LI>Next message: <A HREF="067452.html">[whatwg] canvas, img, file api and blobs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67451">[ date ]</a>
              <a href="thread.html#67451">[ thread ]</a>
              <a href="subject.html#67451">[ subject ]</a>
              <a href="author.html#67451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Feb 16, 2010 at 6:22 PM, Chris Marrin &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cmarrin at apple.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Feb 16, 2010, at 9:00 AM, Eric Carlson wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Chris -
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   Welcome to the HTML5 WG email torrent ;-)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   Here is a message that you might actually care to read.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; eric
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Begin forwarded message:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; From: Joel Webber &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jgw at google.com</A>&gt;
</I>&gt;<i> &gt;&gt; Date: February 16, 2010 8:39:31 AM PST
</I>&gt;<i> &gt;&gt; To: Stefan Haustein &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">haustein at google.com</A>&gt;
</I>&gt;<i> &gt;&gt; Cc: Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt;, <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">whatwg at whatwg.org</A>, Jonas Sicking
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt;, Stef Epardaud &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">stef at epardaud.fr</A>&gt;
</I>&gt;<i> &gt;&gt; Subject: Re: [whatwg] canvas, img, file api and blobs
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Tue, Feb 16, 2010 at 7:38 AM, Stefan Haustein &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">haustein at google.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt; On Tue, Feb 16, 2010 at 10:08 AM, Maciej Stachowiak &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">mjs at apple.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Feb 16, 2010, at 12:13 AM, Jonas Sicking wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Absolutely! I definitely agree that we need a type like this. The
</I>&gt;<i> &gt;&gt; sooner the better. On that note, do you know what the latest status is
</I>&gt;<i> &gt;&gt; within ECMA on this? I know you made a proposal on the webapps list
</I>&gt;<i> &gt;&gt; (or was it here?), did that go anywhere?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I made my proposal to ECMA TC-39 (the relevant committee). I will try to
</I>&gt;<i> polish it and request it as an agenda item for the next face-to-face (in
</I>&gt;<i> March). Independently, WebGL's typed arrays have been proposed.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hi Maciej,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; do you have a link to your proposal?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; And in particular, does it bear any resemblance to the WebGLArray
</I>&gt;<i> interfaces, as proposed in (
</I>&gt;<i> <A HREF="http://people.mozilla.com/~vladimir/jsvec/TypedArray-spec.html">http://people.mozilla.com/~vladimir/jsvec/TypedArray-spec.html</A>)? I'm
</I>&gt;<i> particularly concerned with the interfaces among all these different
</I>&gt;<i> subsystems (WebGL, Canvas, XHR, File, etc., as being discussed on this
</I>&gt;<i> thread) that want to operate on binary data.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; We've found that getting data from XHR to WebGL via WebGLArrays to be a
</I>&gt;<i> huge (read: probably orders-of-magnitude) bottleneck; but being able to
</I>&gt;<i> slice mesh and texture data out of arrays directly from XHR responses would
</I>&gt;<i> completely fix this.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> We've been getting pretty good traction on Vlad's ArrayBuffers proposal,
</I>&gt;<i> which was taken from the WebGL spec. Our current plan is to change the names
</I>&gt;<i> in the browsers (WebKit, Chrome and Mozilla) to the &quot;non-WebGL specific&quot;
</I>&gt;<i> names Vlad proposes in his spec. We'd really like this to be the &quot;one true
</I>&gt;<i> binary data access&quot; mechanism for HTML. We're talking to the File API guys
</I>&gt;<i> about this and I think this API can be adapted in all the other places as
</I>&gt;<i> well.
</I>&gt;<i>
</I>&gt;<i> As far as performance goes, can you point me at some quantitative data?
</I>&gt;<i> When you say it's an &quot;orders-of-magnitude&quot; bottleneck, what are you
</I>&gt;<i> comparing it to? The API is very new and we certainly want to improve it for
</I>&gt;<i> the various purposes it can be put to. We've even talked about optimizations
</I>&gt;<i> inside the JS implementations to improve access performance.
</I>&gt;<i>
</I>
If we can get a webgl buffer from an XHR response (which would be a *huge*
improvement), we'd still need to parse the binary data when decoding JPEG
headers, protocol buffers etc.

Constructing ints / longs from bytes in Javascript will probably be slow, so
in addition to the typed arrays, we'd love to have some kind of access that
would be similar to Java's DataInput (+DataOutput, see
<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/io/DataInput.html">http://java.sun.com/j2se/1.4.2/docs/api/java/io/DataInput.html</A> ), but with
endianess support....

Stefan


&gt;<i>
</I>&gt;<i> -----
</I>&gt;<i> ~Chris
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cmarrin at apple.com</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Stefan Haustein
Google UK Limited

Registered Office: Belgrave House, 76 Buckingham Palace Road, London SW1W
9TQ; Registered in England Number: 3977902
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100216/82e3e11d/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100216/82e3e11d/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067450.html">[whatwg] canvas, img, file api and blobs
</A></li>
	<LI>Next message: <A HREF="067452.html">[whatwg] canvas, img, file api and blobs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67451">[ date ]</a>
              <a href="thread.html#67451">[ thread ]</a>
              <a href="subject.html#67451">[ subject ]</a>
              <a href="author.html#67451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
