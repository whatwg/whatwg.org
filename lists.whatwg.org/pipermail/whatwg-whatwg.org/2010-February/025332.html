<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML Cookie API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3C4E45EC6AD219FD47AD1BC06E4EE3845D04854DB7%40SNV-EXVS09.ds.corp.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025331.html">
   <LINK REL="Next"  HREF="025333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML Cookie API</H1>
<!--htdig_noindex-->
    <B>Nicholas Zakas</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3C4E45EC6AD219FD47AD1BC06E4EE3845D04854DB7%40SNV-EXVS09.ds.corp.yahoo.com%3E"
       TITLE="[whatwg] HTML Cookie API">nzakas at yahoo-inc.com
       </A><BR>
    <I>Wed Feb 24 12:44:01 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="025331.html">[whatwg] HTML Cookie API
</A></li>
        <LI>Next message: <A HREF="025333.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25332">[ date ]</a>
              <a href="thread.html#25332">[ thread ]</a>
              <a href="subject.html#25332">[ subject ]</a>
              <a href="author.html#25332">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I think there's always going to be a disconnect between browser
developers and web developers, since we're both living in very different
worlds.

 

Like I said, I'm all for making cookie access more rational (as if one
could argue that it has been at all rational to this point). Right now,
though, I can't see a benefit to switching from any of the current
synchronous approaches to an asynchronous one, as it doesn't give me
enough added benefit. The asynchronous approach may be the most
performant and potentially the easiest to implement, but if it's out
there and everyone is still using document.cookie, is there really a net
gain?

 

-Nicholas

 

______________________________________________

Commander Lock: &quot;Damnit Morpheus, not everyone believes what you
believe!&quot;

Morpheus: &quot;My beliefs do not require them to.&quot;

________________________________

From: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at google.com</A> [mailto:<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jorlow at google.com</A>] On Behalf Of Jeremy
Orlow
Sent: Wednesday, February 24, 2010 12:20 PM
To: David Flanagan
Cc: Peter Kasting; whatwg; Nicholas Zakas; Darin Fisher; Adam Barth
Subject: Re: [whatwg] HTML Cookie API

 

On Wed, Feb 24, 2010 at 9:07 PM, David Flanagan
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">david at davidflanagan.com</A>&gt; wrote:

	Jeremy Orlow wrote:

	
	Also note that the spec currently has the notion of a storage
mutex which should be taken whenever a script tries to access a cookie
(or local storage) and is held until the script finishes.  The network
stack is also supposed to take this lock whenever getting or setting a
cookie.  No one has implemented the storage mutex or stated any
intention of doing so because this is basically impossible today.  But,
if there were an asynchronous API that most people were using, it
actually could be possible that we'd want to implement such a mutex
since cookies would then obey run to completion semantics without having
serious lock contention.

	 

	Well if no one is going to implement the storage mutex, then I
probably need to retract my last message

		 

		But yeah.  Definitely any API that touches information
spanning tabs (and probably even APIs spanning origins within those
tabs) really should be designed in an async manor from now on.
Otherwise we're just digging the whole deeper in terms of forcing
ourselves into a single threaded world.
		
		J

	 

	I worry that this comes down to web developers who want simple
APIs vs browser implementors who say we can't have them (at least not if
we also want speed.)
	
	Concurrency issues are not my strong suit, but shouldn't it be
possible to have safe, synchronous read-only access to cookies (caching
volatile values like cookies within each thread and then clearing that
cache when the thread returns to the event loop).  Can't the requirement
for a mutex or an asynchronous API be limited to setCookie()?

 

&gt;<i>From a technical standpoint, this is very doable.  And, done right, I
</I>think I could be in favor of it.

 

But I believe the counter argument is that any relaxation of run to
completion semantics is going to confuse developers and probably result
in them writing racy code without realizing it.  Many developers won't
understand when it's safe to use the cached value vs needing to use the
asynchronous interface.  And if the less safe one is easier to use....

 

I agree that asynchronous interfaces have disadvantages, but as far as I
can tell many of them are costs that you pay once (learning them and
getting use to them) or once per app (if you handle one asynchronous
call or need to use setTimeout, then probably using another won't
require too much restructuring of your code).  Maybe I'm just a browser
developer who's completely out of touch with reality though.  :-)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100224/cc227279/attachment-0001.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100224/cc227279/attachment-0001.htm</A>&gt;
</PRE>





















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025331.html">[whatwg] HTML Cookie API
</A></li>
	<LI>Next message: <A HREF="025333.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25332">[ date ]</a>
              <a href="thread.html#25332">[ thread ]</a>
              <a href="subject.html#25332">[ subject ]</a>
              <a href="author.html#25332">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
