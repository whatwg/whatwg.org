<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Form submission feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form%20submission%20feedback&In-Reply-To=%3C63df84f1002162355n2c5dbc6dwe8e5a25b6d0b19f7%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067459.html">
   <LINK REL="Next"  HREF="067460.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Form submission feedback</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Form%20submission%20feedback&In-Reply-To=%3C63df84f1002162355n2c5dbc6dwe8e5a25b6d0b19f7%40mail.gmail.com%3E"
       TITLE="[whatwg] Form submission feedback">jonas at sicking.cc
       </A><BR>
    <I>Tue Feb 16 23:55:08 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067459.html">[whatwg] canvas, img, file api and blobs
</A></li>
        <LI>Next message: <A HREF="067460.html">[whatwg] Adding FormData support to &lt;form&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67456">[ date ]</a>
              <a href="thread.html#67456">[ thread ]</a>
              <a href="subject.html#67456">[ subject ]</a>
              <a href="author.html#67456">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi everyone,

I'm currently going through our form submission code, and figured I
should validate this against what the HTML5 spec says. Unfortunately
it seems like processing form submissions is an area where servers are
very fragile. Even minor tweaks seems to break servers, both in the
past and recently.

With that in mind, I recommend the following changes:

In step 7, substep 1, of &quot;Form submission algorithm&quot; remove the bullet
that says: &quot;The field element is an input element whose type attribute
is in the File Upload state but the control does not have any files
selected&quot;. Additionally, add to step 8 &quot;If no files are selected,
append an entry in the form data set with the name as the name, the
empty string as the value, and &quot;application/octet-stream&quot; as the
type.&quot;. See [1] as to why.


Somewhere it needs to be expressed that processing of &lt;input
type=hidden name=&quot;_charset_&quot;&gt; should happen even for
multipart/form-data encoded submissions too. One way to accomplish
this would be modify the &quot;Form submission algorithm&quot; so that _charset_
processing happens there instead of in the individual encoding
formats.


In step 7 substep 1 of the submission process, add a bullet that says:
* The field element does not have a name attribute specified, or is
the empty string. Except if the field element is an input element
whose name attribute is in the Image state.

and remove step 4. This will make it clearer that non-images are not
submitted if they lack a non-empty name.


[1] <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=529859">https://bugzilla.mozilla.org/show_bug.cgi?id=529859</A>

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067459.html">[whatwg] canvas, img, file api and blobs
</A></li>
	<LI>Next message: <A HREF="067460.html">[whatwg] Adding FormData support to &lt;form&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67456">[ date ]</a>
              <a href="thread.html#67456">[ thread ]</a>
              <a href="subject.html#67456">[ subject ]</a>
              <a href="author.html#67456">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
