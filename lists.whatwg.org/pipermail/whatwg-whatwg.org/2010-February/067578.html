<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] HTML Cookie API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3Cad1a0c1e1002232248v7208ea21kd91370006d0e6dcb%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="067591.html">
   <LINK REL="Next"  HREF="067624.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] HTML Cookie API</H1>
<!--htdig_noindex-->
    <B>James Robinson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20HTML%20Cookie%20API&In-Reply-To=%3Cad1a0c1e1002232248v7208ea21kd91370006d0e6dcb%40mail.gmail.com%3E"
       TITLE="[whatwg] HTML Cookie API">jamesr at google.com
       </A><BR>
    <I>Tue Feb 23 22:48:33 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="067591.html">[whatwg] HTML Cookie API
</A></li>
        <LI>Next message: <A HREF="067624.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67578">[ date ]</a>
              <a href="thread.html#67578">[ thread ]</a>
              <a href="subject.html#67578">[ subject ]</a>
              <a href="author.html#67578">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Feb 23, 2010 at 9:21 PM, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:

&gt;<i> On Tue, Feb 23, 2010 at 9:15 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;<i> &gt; On Tue, Feb 23, 2010 at 8:56 PM, Adam Barth &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">w3c at adambarth.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; The document.cookie API is kind of terrible.  Web developers shouldn't
</I>&gt;<i> &gt;&gt; have to parse a cookie-string or prepare a properly formated
</I>&gt;<i> &gt;&gt; set-cookie-string.  Here's a proposal for an HTML cookie API that
</I>&gt;<i> &gt;&gt; isn't as terrible:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> <A HREF="https://docs.google.com/Doc?docid=0AZpchfQ5mBrEZGQ0cDh3YzRfMTRmdHFma21kMg&amp;hl=en">https://docs.google.com/Doc?docid=0AZpchfQ5mBrEZGQ0cDh3YzRfMTRmdHFma21kMg&amp;hl=en</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I'd like to propose we include this API in a future version of HTML.
</I>&gt;<i> &gt;&gt; As always, feedback welcome.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I really think the API should be asynchronous, as to avoid the mess
</I>&gt;<i> &gt; that .localStorage currently is.
</I>&gt;<i>
</I>&gt;<i> Done.
</I>&gt;<i>
</I>
The &quot;array-like object containing the Cookies for the document&quot; should be a
read-only copy of a set of objects that represent all the applicable cookies
at some point between the request and the response.  This needs to be really
clear and it needs to be clear what happens if a user, say, calls
setCookie() in the middle of iterating through the array-like object (imho
the iteration should be unaffected).

It's probably best to specify the ordering of Cookies in this array-like
object to match rfc2965's ordering rules so that users of the API don't have
to implement this ordering themselves.

Accessing cookies from script is inherently racy - there is no way to
promise that the browser will or will not return a cookie being set by some
HTTP response arriving &quot;at the same time&quot; as the getCookies() call.  There's
nothing really you can do about this but I think that this fact should be
highlighted in the spec.

If a U-A's privacy settings disallow script from accessing cookies, there
should be some clear behavior.  It looks like a U-A could make setCookie() a
no-op and always invoke the getCookies() callback with an empty list now -
should that be specified?

- James


&gt;<i> Adam
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100223/a90df812/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20100223/a90df812/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="067591.html">[whatwg] HTML Cookie API
</A></li>
	<LI>Next message: <A HREF="067624.html">[whatwg] HTML Cookie API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#67578">[ date ]</a>
              <a href="thread.html#67578">[ thread ]</a>
              <a href="subject.html#67578">[ subject ]</a>
              <a href="author.html#67578">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
