<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] AppCache FOREIGN entry issues.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20AppCache%20FOREIGN%20entry%20issues.&In-Reply-To=%3CBANLkTimfAPmDfzs3EzXnG556crwYwznF%2BgJ2%2BtssgzsGJsfSGg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032020.html">
   <LINK REL="Next"  HREF="032022.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] AppCache FOREIGN entry issues.</H1>
<!--htdig_noindex-->
    <B>Michael Nordman</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20AppCache%20FOREIGN%20entry%20issues.&In-Reply-To=%3CBANLkTimfAPmDfzs3EzXnG556crwYwznF%2BgJ2%2BtssgzsGJsfSGg%40mail.gmail.com%3E"
       TITLE="[whatwg] AppCache FOREIGN entry issues.">michaeln at google.com
       </A><BR>
    <I>Mon Jun 13 19:39:27 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032020.html">[whatwg] AppCache FOREIGN entry issues.
</A></li>
        <LI>Next message: <A HREF="032022.html">[whatwg] Should events be paused on detached iframes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32024">[ date ]</a>
              <a href="thread.html#32024">[ thread ]</a>
              <a href="subject.html#32024">[ subject ]</a>
              <a href="author.html#32024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Please ignore the first issue I mentioned. I was wrong, there's no such
problem with the draft.

On Mon, Jun 13, 2011 at 1:24 PM, Michael Nordman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">michaeln at google.com</A>&gt;wrote:

&gt;<i> 1) There's a bug in the draft around FOREIGN entries.
</I>&gt;<i>
</I>&gt;<i> BUG: When updating an existing cache containing FOREIGN entries, the
</I>&gt;<i> FOREIGN flag is sticky even if the resource has been modified and is no
</I>&gt;<i> longer FOREIGN. The update algorithm (section 6.6.4) should be modified to
</I>&gt;<i> reset the FOREIGN flag if a new resource is actually downloaded as part of
</I>&gt;<i> the update.
</I>&gt;<i>
</I>&gt;<i> 2) There's another rough spot with FOREIGN entries. This one's an awkward
</I>&gt;<i> problem with FALLBACK resource being identified as FOREIGN. I'm not sure the
</I>&gt;<i> spec is actually clear about how the manifest attribute value of a FALLBACK
</I>&gt;<i> entry should be interpreted. A clarification would be good.
</I>&gt;<i>
</I>&gt;<i> Here's a description of the problem from
</I>&gt;<i> <A HREF="http://code.google.com/p/chromium/issues/detail?id=82577">http://code.google.com/p/chromium/issues/detail?id=82577</A>
</I>&gt;<i>
</I>&gt;<i> ApplicationCache can flag fallback resources as FOREIGN when it shouldn't
</I>&gt;<i>
</I>&gt;<i> Let's say there's a page in the cache to be used as a fallback resource, refers to the manifest by relative url...
</I>&gt;<i>
</I>&gt;<i> &lt;html manifest='x'&gt;
</I>&gt;<i>
</I>&gt;<i> Depending on the url that invokes the fallback resource, 'x' will be resolved to different absolute urls. When it doesn't match the actual manifest url, the fallback resource will get tagged as FOREIGN and will no longer be used to satisfy main resource loads.
</I>&gt;<i>
</I>&gt;<i> I'm not sure if this is a bug in chrome or a bug in the appcache spec just yet. I'm pretty certain that Safari will have the same behavior as chrome in this respect (the same bug). The value of the manifest attribute is interpreted as relative to the location of the loaded document in chrome and all webkit based browsers and that value is used to detect foreign'ness.
</I>&gt;<i>
</I>&gt;<i> The workaround/solution for this is to NOT put a manifest attribute in the &lt;html&gt; tag of the fallback resource (or to put either an absolute url or host relative url as the manifest attribute value).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>



























































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032020.html">[whatwg] AppCache FOREIGN entry issues.
</A></li>
	<LI>Next message: <A HREF="032022.html">[whatwg] Should events be paused on detached iframes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32024">[ date ]</a>
              <a href="thread.html#32024">[ thread ]</a>
              <a href="subject.html#32024">[ subject ]</a>
              <a href="author.html#32024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
