<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebVTT feedback (was Re: Video feedback)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebVTT%20feedback%20%28was%20Re%3A%20Video%20feedback%29&In-Reply-To=%3Cop.vwq0zjzesr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074222.html">
   <LINK REL="Next"  HREF="074227.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebVTT feedback (was Re: Video feedback)</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebVTT%20feedback%20%28was%20Re%3A%20Video%20feedback%29&In-Reply-To=%3Cop.vwq0zjzesr6mfa%40kirk%3E"
       TITLE="[whatwg] WebVTT feedback (was Re: Video feedback)">philipj at opera.com
       </A><BR>
    <I>Wed Jun  8 01:39:09 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="074222.html">[whatwg] WebVTT feedback (was Re: Video feedback)
</A></li>
        <LI>Next message: <A HREF="074227.html">[whatwg] WebVTT feedback (was Re: Video feedback)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74226">[ date ]</a>
              <a href="thread.html#74226">[ thread ]</a>
              <a href="subject.html#74226">[ subject ]</a>
              <a href="author.html#74226">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 08 Jun 2011 02:54:45 +0200, Silvia Pfeiffer  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:

&gt;<i> Hi Philip, all,
</I>&gt;<i>
</I>&gt;<i> On Tue, Jun 7, 2011 at 8:12 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;  
</I>&gt;<i> wrote:
</I>&gt;&gt;<i> On Sat, 04 Jun 2011 17:05:55 +0200, Silvia Pfeiffer
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Mon, 3 Jan 2011, Philip J&#30450;genstedt wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Silvia, is your mail client a bit funny with character encodings? (The  
</I>&gt;&gt;<i> UTF-8
</I>&gt;&gt;<i> representation of U+00E4 is the same as the GBK representation of  
</I>&gt;&gt;<i> U+76F2.)
</I>&gt;<i>
</I>&gt;<i> I'm using GMAIL, so if there is anything wrong, you'll have to report
</I>&gt;<i> it to Google. ;-)
</I>&gt;<i> Checking back, I actually received your name in Ian's email with that
</I>&gt;<i> funny encoding. I'm not sure it's gmail's fault for interpreting it in
</I>&gt;<i> this way or whether there was some information in email headers lost
</I>&gt;<i> during delivery or what else.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; * The &quot;bad cue&quot; handling is stricter than it should be. After
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; collecting an id, the next line must be a timestamp line.  
</I>&gt;&gt;&gt;&gt;&gt;<i> Otherwise,
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; we skip everything until a blank line, so in the following the
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; parser would jump to &quot;bad cue&quot; on line &quot;2&quot; and skip the whole  
</I>&gt;&gt;&gt;&gt;&gt;<i> cue.
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; 1
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; 2
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; 00:00:00.000 --&gt; 00:00:01.000
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; Bla
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; This doesn't match what most existing SRT parsers do, as they  
</I>&gt;&gt;&gt;&gt;&gt;<i> simply
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; look for timing lines and ignore everything else. If we really  
</I>&gt;&gt;&gt;&gt;&gt;<i> need
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; to collect the id instead of ignoring it like everyone else, this
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; should be more robust, so that a valid timing line always begins  
</I>&gt;&gt;&gt;&gt;&gt;<i> a
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; new cue. Personally, I'd prefer if it is simply ignored and that  
</I>&gt;&gt;&gt;&gt;&gt;<i> we
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; &gt; use some form of in-cue markup for styling hooks.
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; The IDs are useful for referencing cues from script, so I haven't
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; removed them. I've also left the parsing as is for when neither the
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; first nor second line is a timing line, since that gives us a lot  
</I>&gt;&gt;&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; headroom for future extensions (we can do anything so long as the
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; second line doesn't start with a timestamp and &quot;--&gt;&quot; and another
</I>&gt;&gt;&gt;&gt;&gt;<i> &gt; timestamp).
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> In the case of feeding future extensions to current parsers, it's way
</I>&gt;&gt;&gt;&gt;&gt;<i> better fallback behavior to simply ignore the unrecognized second  
</I>&gt;&gt;&gt;&gt;&gt;<i> line
</I>&gt;&gt;&gt;&gt;&gt;<i> than to discard the entire cue. The current behavior seems  
</I>&gt;&gt;&gt;&gt;&gt;<i> unnecessarily
</I>&gt;&gt;&gt;&gt;&gt;<i> strict and makes the parser more complicated than it needs to be. My
</I>&gt;&gt;&gt;&gt;&gt;<i> preference is just ignore anything preceding the timing line, but  
</I>&gt;&gt;&gt;&gt;&gt;<i> even
</I>&gt;&gt;&gt;&gt;&gt;<i> if we must have IDs it can still be made simpler and more robust than
</I>&gt;&gt;&gt;&gt;&gt;<i> what is currently spec'ed.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If we just ignore content until we hit a line that happens to look  
</I>&gt;&gt;&gt;&gt;<i> like a
</I>&gt;&gt;&gt;&gt;<i> timing line, then we are much more constrained in what we can do in  
</I>&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;<i> future. For example, we couldn't introduce a &quot;comment block&quot; syntax,
</I>&gt;&gt;&gt;&gt;<i> since
</I>&gt;&gt;&gt;&gt;<i> any comment containing a timing line wouldn't be ignored. On the other
</I>&gt;&gt;&gt;&gt;<i> hand if we keep the syntax as it is now, we can introduce a comment  
</I>&gt;&gt;&gt;&gt;<i> block
</I>&gt;&gt;&gt;&gt;<i> just by having its first line include a &quot;--&gt;&quot; but not have it match  
</I>&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;<i> timestamp syntax, e.g. by having it be &quot;--&gt; COMMENT&quot; or some such.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Looking at the parser more closely, I don't really see how doing  
</I>&gt;&gt;&gt;&gt;<i> anything
</I>&gt;&gt;&gt;&gt;<i> more complex than skipping the block entirely would be simpler than  
</I>&gt;&gt;&gt;&gt;<i> what
</I>&gt;&gt;&gt;&gt;<i> we have now, anyway.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Yes, I think that can work. The pattern of a line with &quot;--&gt;&quot; without
</I>&gt;&gt;&gt;<i> time markers is currently ignored, so we can introduce something with
</I>&gt;&gt;&gt;<i> it for special content like comments, style and default.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This seems to have been Ian's assumption, but it's not what the spec  
</I>&gt;&gt;<i> says.
</I>&gt;&gt;<i> Follow the steps in
</I>&gt;&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#parsing-0">http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#parsing-0</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 32. If line contains the three-character substring &quot;--&gt;&quot; (U+002D
</I>&gt;&gt;<i> HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN), then jump  
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> the step labeled timings below.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 40. Timings: Collect WebVTT cue timings and settings from line, using  
</I>&gt;&gt;<i> cue
</I>&gt;&gt;<i> for the results. If that fails, jump to the step labeled bad cue.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 54. Bad cue: Discard cue.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (Followed by a loop to skip until the next empty line.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The effect is that that any line containing &quot;--&gt;&quot; that is not a timing  
</I>&gt;&gt;<i> line
</I>&gt;&gt;<i> causes everything up to the next newline to be ignored.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes, that's what I expect. Therefore we can create such cues in the
</I>&gt;<i> file format right now and the browsers as they currently work will
</I>&gt;<i> ignore such content. In future, they can be extended to actually do
</I>&gt;<i> something sensible with it. Isn't that what &quot;is currently ignored&quot;
</I>&gt;<i> means? It doesn't break the parser - the parser just skips over it. Am
</I>&gt;<i> I missing something?
</I>
OK, I guess we're talking about slightly different things. It is possible  
to add a syntax to comment out entire cues using something with &quot;--&gt;&quot;, so  
if that's all we want, that's fine.

&gt;&gt;&gt;&gt;&gt;<i> * Voice synthesis of e.g. mixed English/French captions. Given that  
</I>&gt;&gt;&gt;&gt;&gt;<i> this
</I>&gt;&gt;&gt;&gt;&gt;<i> would only be useful to be people who know both languages, it seem  
</I>&gt;&gt;&gt;&gt;&gt;<i> not
</I>&gt;&gt;&gt;&gt;&gt;<i> worth complicating the format for.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Agreed on all fronts.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I disagree with the third case. Many people speak more than one
</I>&gt;&gt;&gt;<i> language and even if they don't speak the language that is in use in a
</I>&gt;&gt;&gt;<i> cue, it is still bad to render it in using the wrong language model,
</I>&gt;&gt;&gt;<i> in particular if it is rendered by a screen reader. We really need a
</I>&gt;&gt;&gt;<i> mechanism to attach a language marker to a cue segment.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's not needed for the rendering of French vs English, is it? It is
</I>&gt;&gt;<i> theoretically useful for CJK, but as I've said before it seems to be  
</I>&gt;&gt;<i> more
</I>&gt;&gt;<i> common to transliterate the foreign script in these cases.
</I>&gt;<i>
</I>&gt;<i> I think it is needed. Think about a screen reader reading out that
</I>&gt;<i> text. Unless the screen reader knows which language model to load -
</I>&gt;<i> and that it now has to change from a French voicing to an English
</I>&gt;<i> voicing - it cannot present it accurately.
</I>&gt;<i>
</I>&gt;<i> Language markers are not just a matter of choosing the right character
</I>&gt;<i> encoding, but also the right TTS model.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Do you have any examples of real-world subtitles/captions that would
</I>&gt;&gt;&gt;&gt;&gt;<i> benefit from more fine-grained language information?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> This kind of information would indeed be useful.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Note that I'm not so much worried about captions and subtitles here,
</I>&gt;&gt;&gt;<i> but rather worried about audio descriptions as rendered from cue text
</I>&gt;&gt;&gt;<i> descriptions.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When would one want these descriptions to be multi-language?
</I>&gt;<i>
</I>&gt;<i> When they are describing something that is inherently multi-cultural.
</I>&gt;<i> For example, the name of a restaurant which is in French, while the
</I>&gt;<i> describer language is English.
</I>
Does this kind of thing currently work with screen readers? Non-French  
people speaking English don't switch to proper French pronunciation when  
saying something like &quot;I'm really into film noir&quot; or &quot;The general assumed  
political power through a coup d'etat&quot;, so screen reader users actually  
want what? If one doesn't know French, it seems like it would be harder to  
understand.

For languages further removed from English I'm fairly certain no English  
speaker would want to hear the original pronunciation. Imagine pronouncing  
&quot;Mexico&quot; in Spanish or &quot;Beijing&quot; in Mandarin Chinese in the middle of an  
English text... I'm certain it would confuse people more than help them  
understand.

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074222.html">[whatwg] WebVTT feedback (was Re: Video feedback)
</A></li>
	<LI>Next message: <A HREF="074227.html">[whatwg] WebVTT feedback (was Re: Video feedback)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74226">[ date ]</a>
              <a href="thread.html#74226">[ thread ]</a>
              <a href="subject.html#74226">[ subject ]</a>
              <a href="author.html#74226">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
