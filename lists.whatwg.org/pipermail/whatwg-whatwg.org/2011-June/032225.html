<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Enhancement request: change EventSource to allow cross-domain access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Enhancement%20request%3A%20change%20EventSource%20to%20allow%0A%20cross-domain%20access&In-Reply-To=%3CBANLkTi%3DJ71P1gTG24vBE5xTq0cjB5FSujg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032153.html">
   <LINK REL="Next"  HREF="032228.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Enhancement request: change EventSource to allow cross-domain access</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Enhancement%20request%3A%20change%20EventSource%20to%20allow%0A%20cross-domain%20access&In-Reply-To=%3CBANLkTi%3DJ71P1gTG24vBE5xTq0cjB5FSujg%40mail.gmail.com%3E"
       TITLE="[whatwg] Enhancement request: change EventSource to allow cross-domain access">jonas at sicking.cc
       </A><BR>
    <I>Thu Jun 23 13:44:28 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032153.html">[whatwg] Enhancement request: change EventSource to allow cross-domain access
</A></li>
        <LI>Next message: <A HREF="032228.html">[whatwg] Enhancement request: change EventSource to allow cross-domain access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32225">[ date ]</a>
              <a href="thread.html#32225">[ thread ]</a>
              <a href="subject.html#32225">[ subject ]</a>
              <a href="author.html#32225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Jun 18, 2011 at 7:06 AM, ilya goberman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">goberman at msn.com</A>&gt; wrote:
&gt;<i> We are a financial market data vendor streaming real-time market data.
</I>&gt;<i> We currently have a cluster of servers servicing market data. These servers
</I>&gt;<i> are hosted by our company and therefore have different domain from the
</I>&gt;<i> client web pages domain.
</I>&gt;<i> We try to have Comet connection to stream data from servers to clients (as
</I>&gt;<i> opposed to long poll). The data _is_ personalized based on user subscription
</I>&gt;<i> request. We generate &quot;client id&quot; we send with every comet request to
</I>&gt;<i> identify clients.
</I>&gt;<i> We currently use XHR, but it has limitation of growing response string and
</I>&gt;<i> requiring periodic disconnects, so EventSource is just another delivery
</I>&gt;<i> mechanism that does not require disconnects. So again 2 things:
</I>&gt;<i> 1) EventSource is not really that different from XHR from our perspective,
</I>&gt;<i> the only advantage is that it does not require periodic disconnects.
</I>&gt;<i> (Actually now it does require disconnects because it incorrectly buffers
</I>&gt;<i> response (fixed in the latest WebKit)).
</I>&gt;<i> 2) XHR CORS changes should be backward compatible. We do not really want to
</I>&gt;<i> find out that our servers stop working because a new browser is released.
</I>
Indeed, changing XHR CORS is not really an option at this point given
how widely it has been deployed. No-one is proposing to do that. And
EventSource is generally agreed to be similar enough to XHR that it
could share security model.

So with that in mind, I still don't understand how you are using XHR
and CORS today. On one hand you are saying that you are sending a
header like:

Access-Control-Allow-Origin: *

On the other hand you are saying that you are sending personalized
data. Is this data personalized based on the user's cookies? Or based
on something that you send in the URL which identifies which user's
data is requested?

The reason I'm asking is that the CORS specification specifically does
not allow the &quot;Access-Control-Allow-Origin: *&quot; header in requests that
use cookies. And I believe that all existing CORS implementations
follow that part of the specification. If you send that header the
browser should reject the response and the XHR should just give you an
error code.

Again, note that this is not a change to CORS, this is how CORS has
always been specified and implemented.

/ Jonas
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032153.html">[whatwg] Enhancement request: change EventSource to allow cross-domain access
</A></li>
	<LI>Next message: <A HREF="032228.html">[whatwg] Enhancement request: change EventSource to allow cross-domain access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32225">[ date ]</a>
              <a href="thread.html#32225">[ thread ]</a>
              <a href="subject.html#32225">[ subject ]</a>
              <a href="author.html#32225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
