<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Video feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20feedback&In-Reply-To=%3CBANLkTin9Vi56cKxAZr72a6n9tBZOutLZVw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074216.html">
   <LINK REL="Next"  HREF="074225.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Video feedback</H1>
<!--htdig_noindex-->
    <B>Silvia Pfeiffer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20feedback&In-Reply-To=%3CBANLkTin9Vi56cKxAZr72a6n9tBZOutLZVw%40mail.gmail.com%3E"
       TITLE="[whatwg] Video feedback">silviapfeiffer1 at gmail.com
       </A><BR>
    <I>Tue Jun  7 17:46:15 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="074216.html">[whatwg] Video feedback
</A></li>
        <LI>Next message: <A HREF="074225.html">[whatwg] Video feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74221">[ date ]</a>
              <a href="thread.html#74221">[ thread ]</a>
              <a href="subject.html#74221">[ subject ]</a>
              <a href="author.html#74221">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Jun 7, 2011 at 7:04 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt; wrote:
&gt;<i> On Sat, 04 Jun 2011 03:39:58 +0200, Silvia Pfeiffer
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">silviapfeiffer1 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> On Fri, Jun 3, 2011 at 9:28 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Thu, 16 Dec 2010, Silvia Pfeiffer wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I do not know how technically the change of stream composition works in
</I>&gt;&gt;&gt;&gt;<i> MPEG, but in Ogg we have to end a current stream and start a new one to
</I>&gt;&gt;&gt;&gt;<i> switch compositions. This has been called &quot;sequential multiplexing&quot; or
</I>&gt;&gt;&gt;&gt;<i> &quot;chaining&quot;. In this case, stream setup information is repeated, which
</I>&gt;&gt;&gt;&gt;<i> would probably lead to creating a new steam handler and possibly a new
</I>&gt;&gt;&gt;&gt;<i> firing of &quot;loadedmetadata&quot;. I am not sure how chaining is implemented in
</I>&gt;&gt;&gt;&gt;<i> browsers.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Per spec, chaining isn't currently supported. The closest thing I can
</I>&gt;&gt;&gt;<i> find
</I>&gt;&gt;&gt;<i> in the spec to this situation is handling a non-fatal error, which causes
</I>&gt;&gt;&gt;<i> the unexpected content to be ignored.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Fri, 17 Dec 2010, Eric Winkelman wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The short answer for changing stream composition is that there is a
</I>&gt;&gt;&gt;&gt;<i> Program Map Table (PMT) that is repeated every 100 milliseconds and
</I>&gt;&gt;&gt;&gt;<i> describes the content of the stream. &#160;Depending on the programming, the
</I>&gt;&gt;&gt;&gt;<i> stream's composition could change entering/exiting every advertisement.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If this is something that browser vendors want to support, I can specify
</I>&gt;&gt;&gt;<i> how to handle it. Anyone?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Icecast streams have chained files, so streaming Ogg to an audio
</I>&gt;&gt;<i> element would hit this problem. There is a bug in FF for this:
</I>&gt;&gt;<i> <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=455165">https://bugzilla.mozilla.org/show_bug.cgi?id=455165</A> (and a duplicate
</I>&gt;&gt;<i> bug at <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=611519">https://bugzilla.mozilla.org/show_bug.cgi?id=611519</A>). There's
</I>&gt;&gt;<i> also a webkit bug for icecast streaming, which is probably related
</I>&gt;&gt;<i> <A HREF="https://bugs.webkit.org/show_bug.cgi?id=42750">https://bugs.webkit.org/show_bug.cgi?id=42750</A> . I'm not sure how Opera
</I>&gt;&gt;<i> is able to deal with icecast streams, but it seems to deal with it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The thing is: you can implement playback and seeking without any
</I>&gt;&gt;<i> further changes to the spec. But then the browser-internal metadata
</I>&gt;&gt;<i> states will change depending on the chunk you're on. Should that also
</I>&gt;&gt;<i> update the exposed metadata in the API then? Probably yes, because
</I>&gt;&gt;<i> otherwise the JS developer may deal with contradictory information.
</I>&gt;&gt;<i> Maybe we need a &quot;metadatachange&quot; event for this?
</I>&gt;<i>
</I>&gt;<i> An Icecast stream is conceptually just one infinite audio stream, even
</I>&gt;<i> though at the container level it is several chained Ogg streams. duration
</I>&gt;<i> will be Infinity and currentTime will be constantly increasing. This doesn't
</I>&gt;<i> seem to be a case where any spec change is needed. Am I missing something?
</I>

That is all correct. However, because it is a sequence of Ogg streams,
there are new Ogg headers in the middle. These new Ogg headers will
lead to new metadata loaded in the media framework - e.g. because the
new Ogg stream is encoded with a different audio sampling rate and a
different video width/height etc. So, therefore, the metadata in the
media framework changes. However, what the browser reports to the JS
developer doesn't change. Or if it does change, the JS developer is
not informed of it because it is a single infinite audio (or video)
stream. Thus the question whether we need a new &quot;metadatachange&quot; event
to expose this to the JS developer. It would then also signify that
potentially the number of tracks that are available may have changed
and other such information.

Hope that clarifies it.

Cheers,
Silvia.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074216.html">[whatwg] Video feedback
</A></li>
	<LI>Next message: <A HREF="074225.html">[whatwg] Video feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74221">[ date ]</a>
              <a href="thread.html#74221">[ thread ]</a>
              <a href="subject.html#74221">[ subject ]</a>
              <a href="author.html#74221">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
