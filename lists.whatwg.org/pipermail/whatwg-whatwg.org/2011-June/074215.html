<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Javascript: URLs as element attributes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Javascript%3A%20URLs%20as%20element%20attributes&In-Reply-To=%3C4DED6CEC.9030809%40mit.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031940.html">
   <LINK REL="Next"  HREF="031941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Javascript: URLs as element attributes</H1>
<!--htdig_noindex-->
    <B>Boris Zbarsky</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Javascript%3A%20URLs%20as%20element%20attributes&In-Reply-To=%3C4DED6CEC.9030809%40mit.edu%3E"
       TITLE="[whatwg] Javascript: URLs as element attributes">bzbarsky at MIT.EDU
       </A><BR>
    <I>Mon Jun  6 17:12:28 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="031940.html">[whatwg] Javascript: URLs as element attributes
</A></li>
        <LI>Next message: <A HREF="031941.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74215">[ date ]</a>
              <a href="thread.html#74215">[ thread ]</a>
              <a href="subject.html#74215">[ subject ]</a>
              <a href="author.html#74215">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 6/6/11 4:45 PM, Ian Hickson wrote:
&gt;&gt;<i>    data:text/html,&lt;body onload=&quot;alert(window[0].location)&quot;&gt;&lt;iframe src=&quot;javascript:''&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> Woah, funky. (Gecko thinks the location is &quot;javascript:''&quot;.)
</I>
Well... it sort of is.  ;)

&gt;&gt;&gt;<i> It's defined; see the section on the&lt;onject&gt;  element.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've read that section, in fact.  I couldn't make sense of what behavior
</I>&gt;&gt;<i> it actually called for.  Has it changed recently (last few months) to
</I>&gt;&gt;<i> become clearer such that rereading would be worthwhile?
</I>&gt;<i>
</I>&gt;<i> Not as far as I'm aware. Could you elaborate on how it is confusing? I'm
</I>&gt;<i> eager to make this understandable!
</I>
I'll try reading it again and taking notes, I guess.  When I can find 
time to.  :(  The latency is killing us here.

&gt;<i> Since Gecko seems to be alone in this weird behaviour, I haven't specced
</I>&gt;<i> it. I couldn't find any other effect (e.g. the input seems to always be
</I>&gt;<i> treated as Unicode, not converted to bytes and redecoded, regardless of
</I>&gt;<i> what I make it look like, including UTF-16 and UTF-8).
</I>
You can detect other effects by seeing what unescape() does in the 
resulting document, iirc.  As well as URIs including %-encoded bytes and 
so forth.  Also you can detect what charset is used for stylesheets 
included by the document that don't declare their own charset.  There 
are probably other places that use the document encoding.  Worth testing 
some of this stuff....

-Boris

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031940.html">[whatwg] Javascript: URLs as element attributes
</A></li>
	<LI>Next message: <A HREF="031941.html">[whatwg] Should script run if it comes from a HTML fragment?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74215">[ date ]</a>
              <a href="thread.html#74215">[ thread ]</a>
              <a href="subject.html#74215">[ subject ]</a>
              <a href="author.html#74215">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
