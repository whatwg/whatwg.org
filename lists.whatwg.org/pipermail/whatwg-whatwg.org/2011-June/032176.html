<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Video feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20feedback&In-Reply-To=%3C394DF350-8A43-4E39-B2FF-99EEA8F4F00E%40netflix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032166.html">
   <LINK REL="Next"  HREF="032178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Video feedback</H1>
<!--htdig_noindex-->
    <B>Mark Watson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Video%20feedback&In-Reply-To=%3C394DF350-8A43-4E39-B2FF-99EEA8F4F00E%40netflix.com%3E"
       TITLE="[whatwg] Video feedback">watsonm at netflix.com
       </A><BR>
    <I>Mon Jun 20 07:07:50 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032166.html">[whatwg] Video feedback
</A></li>
        <LI>Next message: <A HREF="032178.html">[whatwg] Video feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32176">[ date ]</a>
              <a href="thread.html#32176">[ thread ]</a>
              <a href="subject.html#32176">[ subject ]</a>
              <a href="author.html#32176">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Jun 20, 2011, at 11:52 AM, Silvia Pfeiffer wrote:

&gt;<i> On Mon, Jun 20, 2011 at 7:31 PM, Mark Watson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">watsonm at netflix.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> The TrackList object has an onchanged event, which I assumed would fire when
</I>&gt;&gt;&gt;&gt;<i> any of the information in the TrackList changes (e.g. tracks added or
</I>&gt;&gt;&gt;&gt;<i> removed). But actually the spec doesn't state when this event fires (as far
</I>&gt;&gt;&gt;&gt;<i> as I could tell - unless it is implied by some general definition of events
</I>&gt;&gt;&gt;&gt;<i> called onchanged).
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Should there be some clarification here ?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I understood that to relate to a change of cues only, since it is on
</I>&gt;&gt;&gt;<i> the tracklist. I.e. it's an aggregate event from the oncuechange event
</I>&gt;&gt;&gt;<i> of a cue inside the track. I didn't think it would relate to a change
</I>&gt;&gt;&gt;<i> of existence of that track.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Note that the even is attached to the TrackList, not the TrackList[],
</I>&gt;&gt;&gt;<i> so it cannot be raised when a track is added or removed, only when
</I>&gt;&gt;&gt;<i> something inside the TrackList changes.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Are we talking about the same thing ? There is no TrackList array and
</I>&gt;&gt;<i> TrackList is only used for audio/video, not text, so I don't understand the
</I>&gt;&gt;<i> comment about cues.
</I>&gt;&gt;<i> I'm talking
</I>&gt;&gt;<i> about <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#tracklist">http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#tracklist</A> which
</I>&gt;&gt;<i> is the base class for MultipleTrackList and ExclusiveTrackList used to
</I>&gt;&gt;<i> represent all the audio and video tracks (respectively). One instance of the
</I>&gt;&gt;<i> object represents all the tracks, so I would assume that a change in the
</I>&gt;&gt;<i> number of tracks is a change to this object.
</I>&gt;<i> 
</I>&gt;<i> Ah yes, you're right: I got confused.
</I>&gt;<i> 
</I>&gt;<i> It says &quot;Whenever the selected track is changed, the user agent must
</I>&gt;<i> queue a task to fire a simple event named change at the
</I>&gt;<i> MultipleTrackList object.&quot; This means it fires when the selectedIndex
</I>&gt;<i> is changed, i.e. the user chooses a different track for rendering. I
</I>&gt;<i> still don't think it relates to changes in the composition of tracks
</I>&gt;<i> of a resource. That should be something different and should probably
</I>&gt;<i> be on the MediaElement and not on the track list to also cover changes
</I>&gt;<i> in text tracks.
</I>
Fair enough.

&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Also, as Eric (C) pointed out, one of the things which can change is which
</I>&gt;&gt;&gt;&gt;<i> of several available versions of the content is being rendered (for adaptive
</I>&gt;&gt;&gt;&gt;<i> bitrate cases). This doesn't necessarily change any of the metadata
</I>&gt;&gt;&gt;&gt;<i> currently exposed on the video element, but nevertheless it's information
</I>&gt;&gt;&gt;&gt;<i> that the application may need. It would be nice to expose some kind of
</I>&gt;&gt;&gt;&gt;<i> identifier for the currently rendered stream and have an event when this
</I>&gt;&gt;&gt;&gt;<i> changes. I think that a stream-format-supplied identifier would be
</I>&gt;&gt;&gt;&gt;<i> sufficient.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I don't know about the adaptive streaming situation. I think that is
</I>&gt;&gt;&gt;<i> more about statistics/metrics rather than about change of resource.
</I>&gt;&gt;&gt;<i> All the alternatives in an adaptive streaming &quot;resource&quot; should
</I>&gt;&gt;&gt;<i> provide the same number of tracks and the same video dimensions, just
</I>&gt;&gt;&gt;<i> at different bitrate/quality, no?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I think of the different adaptive versions on a per-track basis (i.e. the
</I>&gt;&gt;<i> alternatives are *within* each track), not a bunch of alternatives each of
</I>&gt;&gt;<i> which contains several tracks. Both are possible, of course.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> It's certainly possible (indeed common) for different bitrate video
</I>&gt;&gt;<i> encodings to have different resolutions - there are video encoding reasons
</I>&gt;&gt;<i> to do this. Of course the aspect ratio should not change and nor should the
</I>&gt;&gt;<i> dimensions on the screen (both would be a little peculiar for the user).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Now, the videoWidth and videoHeight attributes of HTMLVideoElement are not
</I>&gt;&gt;<i> the same as the resolution (for a start, they are in CSS pixels, which are
</I>&gt;&gt;<i> square), but I think it quite likely that if the resolution of the video
</I>&gt;&gt;<i> changes than the videoWidth and videoHeight might change. I'd be interested
</I>&gt;&gt;<i> to hear how existing implementations relate resolution to videoWidth and
</I>&gt;&gt;<i> videoHeight.
</I>&gt;<i> 
</I>&gt;<i> Well, if videoWidth and videoHeight change and no dimensions on the
</I>&gt;<i> video are provided through CSS, then surely the video will change size
</I>&gt;<i> and the display will shrink. That would be a terrible user experience.
</I>&gt;<i> For that reason I would suggest that such a change not be made in
</I>&gt;<i> alternative adaptive streams.
</I>
That seems backwards to me! I would say &quot;For that reason I would suggest that dimensions are provided through CSS or through the width and height attributes.&quot;

Alternatively, we change the specification of the video element to accommodate this aspect of adaptive streaming (for example, the videoWidth and videoHeight could be defined to be based on the highest resolution bitrate being considered.)

There are good video encoding reasons for different bitrates to be encoded at different resolutions which are far more important than any reasons not to do either of the above.

&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> Different video dimensions should be
</I>&gt;&gt;&gt;<i> provided through the &lt;source&gt; element and @media attribute, but within
</I>&gt;&gt;&gt;<i> an adaptive stream, the alternatives should be consistent because the
</I>&gt;&gt;&gt;<i> target device won't change. I guess this is a discussion for another
</I>&gt;&gt;&gt;<i> thread... :-)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Possibly ;-) The device knows much better than the page author what
</I>&gt;&gt;<i> capabilities it has and so what resolutions are suitable for the device. So
</I>&gt;&gt;<i> it is better to provide all the alternatives as a single resource and have
</I>&gt;&gt;<i> the device work out which subset it can support. Or at least, the list
</I>&gt;&gt;<i> should be provided all at the same level - there is no rationale for a
</I>&gt;&gt;<i> hierarchy of alternatives.
</I>&gt;<i> 
</I>&gt;<i> The way in which HTML deals with different devices and their different
</I>&gt;<i> capabilities is through media queries. As a author you provide your
</I>&gt;<i> content with different versions of media-dependent style sheets and
</I>&gt;<i> content, so that when you view the page with a different device, the
</I>&gt;<i> capabilities of the device select the right style sheet and content
</I>&gt;<i> for display on that device. Opera has an example on how to use this
</I>&gt;<i> here: <A HREF="http://dev.opera.com/articles/view/everything-you-need-to-know-about-html5-video-and-audio/">http://dev.opera.com/articles/view/everything-you-need-to-know-about-html5-video-and-audio/</A>
</I>&gt;<i> (search for &quot;Media Query&quot;).
</I>&gt;<i> 
</I>&gt;<i> I believe that this mechanism should also work for adaptive streaming,
</I>&gt;<i> such that you provide multiple alternative media resources through the
</I>&gt;<i> &lt;source&gt; element, each of which has a @media attribute that says what
</I>&gt;<i> device capabilities that particular resource is adequate for. Except
</I>&gt;<i> that the &quot;media resource&quot; provides alternative bitrate files for that
</I>&gt;<i> case. I do not see a need to move this functionality into the adaptive
</I>&gt;<i> streaming file.
</I>&gt;<i> 
</I>&gt;<i> Nice to get started on this discussion about adaptive streaming. ;-)
</I>
Indeed.

So, what I said above is that there is no rationale for a hierarchy. What I mean is that if I have ten encodings of a video, I should just list those ten in a flat list somewhere, annotated with their properties. The device knows best what it can support, what's appropriate etc. The key point is that I get this list without having to download the actual media.

It's not a good idea to split up that list of ten into sub-lists &quot;intended&quot; for different devices, because then I am making assumptions about what kinds of devices there are and what they need. But it is the devices that know best. In DASH people often proposed splitting the list into &quot;Handheld&quot;, &quot;SD&quot; and &quot;HD&quot;, but then there are devices that happily cope with resolutions that span those categories. Consider a few such devices and you find you need finer granularity. Since we're talking about a tiny amount of descriptive metadata, its much simpler just to list them all in one flat list.

So then there is the question of where this &quot;flat&quot; list should be: in the HTML or in an adaptive streaming manifest ?

Here we have a genuine functional overlap. HTML provides information which drives a resource selection function which considers many things, such as container types, codecs and everything which can be expressed in Media Queries. Adaptive streaming manifests also provide the same information for the same &quot;selection&quot; purpose plus additional information supporting adaptive streaming as well. Much of the information which drives selection is also needed for adaptation. Also there is no strict split between &quot;adaptation&quot; and &quot;selection&quot;: the capabilities of clients may differ in terms of what they can seamlessly switch and what they can't.

So, in integrating HTML and adaptive streaming we have to define the interactions between these overlapping selection functions - we cannot get away from this functional overlap.

I think it would be a bad idea to try and re-invent adaptive streaming in HTML itself. A lot of work has been done on this over the past few years and anything HTML starts from scratch will be way behind. For my part I would like to see adaptive streaming defined in a way which is independent of the presentation layer technology, so adaptive streams can be constructed which play both in HTML and in other places.

The consequence is that we should not assume that an &quot;adaptive stream&quot; (for want of a better term) will be split up into multiple sources when used in HTML. Of course people can do this: if you want to provide 4 separate adaptive streams and use media queries to have the client select which one to play, that's fine, but we must also consider the case where everything is in one manifest.

...Mark

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Silvia.
</I>&gt;<i> 
</I>
</PRE>
















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032166.html">[whatwg] Video feedback
</A></li>
	<LI>Next message: <A HREF="032178.html">[whatwg] Video feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32176">[ date ]</a>
              <a href="thread.html#32176">[ thread ]</a>
              <a href="subject.html#32176">[ subject ]</a>
              <a href="author.html#32176">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
