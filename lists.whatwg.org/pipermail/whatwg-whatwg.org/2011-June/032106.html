<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Normalization of user selections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Normalization%20of%20user%20selections&In-Reply-To=%3CBANLkTi%3Dc%3DmHPXLA4AosGhkrc%3DLy-uPaE1g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032108.html">
   <LINK REL="Next"  HREF="032103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Normalization of user selections</H1>
<!--htdig_noindex-->
    <B>Ojan Vafai</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Normalization%20of%20user%20selections&In-Reply-To=%3CBANLkTi%3Dc%3DmHPXLA4AosGhkrc%3DLy-uPaE1g%40mail.gmail.com%3E"
       TITLE="[whatwg] Normalization of user selections">ojan at chromium.org
       </A><BR>
    <I>Thu Jun 16 12:30:18 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="032108.html">[whatwg] Normalization of user selections
</A></li>
        <LI>Next message: <A HREF="032103.html">[whatwg] Normalization of user selections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32106">[ date ]</a>
              <a href="thread.html#32106">[ thread ]</a>
              <a href="subject.html#32106">[ subject ]</a>
              <a href="author.html#32106">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Jun 16, 2011 at 12:12 PM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:

&gt;<i> On 6/16/11 3:00 PM, Aryeh Gregor wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Assuming we don't match WebKit/Opera here, though, does everyone agree
</I>&gt;&gt;<i> we should still place constraints on what selections can be generated
</I>&gt;&gt;<i> by *user* actions?  E.g., if you have&lt;b&gt;foo&lt;/b&gt;bar, and the user
</I>&gt;&gt;<i> places the cursor in between &quot;foo&quot; and &quot;bar&quot; by any means, it should
</I>&gt;&gt;<i> always be inside the&lt;b&gt;, not outside.
</I>&gt;<i>
</I>&gt;<i>
</I>Links are another tricky case. &lt;a&gt;foo&lt;/a&gt;bar. If the cursor is between &quot;foo&quot;
and &quot;bar&quot; typing should go after the link, not inside. It's unfortunate, but
it's definitely what the majority of users expect. Right now, WebKit has a
nasty hack where we move the cursor outside the link when you type in this
case.


&gt;<i> This is an interesting situation which is the inverse of the bidi problem.
</I>&gt;<i>  In the bidi case there is a single point in the DOM which corresponds to
</I>&gt;<i> two different user-perceived selection positions.  In this case, a single
</I>&gt;<i> user-perceived selection position corresponds to multiple (could be more
</I>&gt;<i> than 2) points in the DOM....
</I>&gt;<i>
</I>&gt;<i> As an actual user of editors, by the way, the #1 thing that pisses me off
</I>&gt;<i> about wysiwyg editors is precisely having situations like the one above and
</I>&gt;<i> wanting to be able to make the text be &quot;&lt;b&gt;foo&lt;/b&gt;orbar&quot; in some cases but
</I>&gt;<i> &quot;&lt;b&gt;foopy&lt;/b&gt;bar&quot; in others.  Wysisyg editors tend to be terrible at this
</I>&gt;<i> sort of thing.  Is that something that's inevitable, or can we do better
</I>&gt;<i> here?
</I>

I agree it's unfortunate. I'm not sure we can do better though. The
advantage of Aryeh's suggested normalization is that it matches nearly every
popular word processor on the market, so is most likely to match user
expectations.

I agree that the most sane thing for both users and developers is to
normalize. In general, it's very confusing to users for a visible position
to result in multiple possible outcomes. It's something that is very
difficult to get right as a web developer adding a small amount of extra
functionality on top of contentEditable.

That said, I would like there to be declarative control over how the
normalization happens. For example, if I'm writing a custom widget, whether
typing should go inside or outside is different depending on the widget.

This is probably not the best API, but here's a concrete proposal to control
selection normalization at the end of an node.:
document.setSelectionNormalization(INSIDE/OUTSIDE, varargs of selectors);

Ojan
</PRE>





































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032108.html">[whatwg] Normalization of user selections
</A></li>
	<LI>Next message: <A HREF="032103.html">[whatwg] Normalization of user selections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32106">[ date ]</a>
              <a href="thread.html#32106">[ thread ]</a>
              <a href="subject.html#32106">[ subject ]</a>
              <a href="author.html#32106">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
