<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] script element onerror event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20script%20element%20onerror%20event&In-Reply-To=%3CPine.LNX.4.64.1106102251220.19153%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074289.html">
   <LINK REL="Next"  HREF="032007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] script element onerror event</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20script%20element%20onerror%20event&In-Reply-To=%3CPine.LNX.4.64.1106102251220.19153%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] script element onerror event">ian at hixie.ch
       </A><BR>
    <I>Fri Jun 10 15:56:04 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="074289.html">[whatwg] Run javascript code once
</A></li>
        <LI>Next message: <A HREF="032007.html">[whatwg] Cross-domain databases; was: &quot;File package protocol and manifest support?&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32006">[ date ]</a>
              <a href="thread.html#32006">[ thread ]</a>
              <a href="subject.html#32006">[ subject ]</a>
              <a href="author.html#32006">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, 28 May 2011, John J. Barton wrote:
&gt;<i>
</I>&gt;<i> To allow optional JavaScript download, some widely used JavaScript 
</I>&gt;<i> libraries, such as jQuery and requireJS, use script elements added to 
</I>&gt;<i> the document dynamically by JavaScript. (Of course this feature is also 
</I>&gt;<i> used by applications directly as well).  For normal deployment this 
</I>&gt;<i> approach works well in practice. At development time however, or in the 
</I>&gt;<i> presence of network or server problems, the approach gives poor error 
</I>&gt;<i> recovery information. Fundamentally the problem is that the insertion 
</I>&gt;<i> mechanism has no error return path.
</I>&gt;<i> 
</I>&gt;<i> The script element does support one event, 'onload' which fires after 
</I>&gt;<i> the script has finished loading. I suggest the addition of one new 
</I>&gt;<i> event, 'onerror', which fires in every other case. For examples, a 
</I>&gt;<i> network error (4XX, 5XX) or JavaScript parse error would trigger onerror 
</I>&gt;<i> but not onload.  On the other hand, a runtime error for the 
</I>&gt;<i> outer-function of the script element would trigger onload (I guess), but 
</I>&gt;<i> the developer can handle this with try/catch.
</I>&gt;<i> 
</I>&gt;<i> Very long load times would still have poor error recovery information, 
</I>&gt;<i> but developers could implement UI to signal &quot;loading...&quot; once they know 
</I>&gt;<i> they will get some update event eventually.
</I>
On Sun, 29 May 2011, Mike Wilson wrote:
&gt;<i> 
</I>&gt;<i> This event is actually already speced, see #14 &quot;fire a simple event 
</I>&gt;<i> named error at the element&quot; in: 
</I>&gt;<i> <A HREF="http://www.whatwg.org/specs/web-apps/current-work/#prepare-a-script">http://www.whatwg.org/specs/web-apps/current-work/#prepare-a-script</A> (and 
</I>&gt;<i> the onerror attribute is valid for all elements)
</I>
On Sun, 29 May 2011, John J. Barton wrote:
&gt;<i> 
</I>&gt;<i> Step 14 is unclear or incomplete however:
</I>&gt;<i> &quot; If the|src
</I>&gt;<i> &lt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/#attr-script-src">http://www.whatwg.org/specs/web-apps/current-work/#attr-script-src</A>&gt;|attribute's
</I>&gt;<i> value is the empty string or if it could not be resolved,...&quot;
</I>&gt;<i> 
</I>&gt;<i> Does this mean the error handler will be called in the case of 4XX, 5XX, 
</I>&gt;<i> and syntax errors?
</I>
It's not incomplete, it's just that you don't know you got a 4xx/5xx at 
that step, you only know after you've hit the network. The 'error' event 
is fired lower down for that case.


On Sun, 29 May 2011, John J. Barton wrote:
&gt;<i> 
</I>&gt;<i> (I've not seen a &quot;for&quot; attribute on a script element. Is there any 
</I>&gt;<i> documentation on what it does?)
</I>
It doesn't do anything useful per spec. It's an old IEism.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'
</PRE>


























































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074289.html">[whatwg] Run javascript code once
</A></li>
	<LI>Next message: <A HREF="032007.html">[whatwg] Cross-domain databases; was: &quot;File package protocol and manifest support?&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32006">[ date ]</a>
              <a href="thread.html#32006">[ thread ]</a>
              <a href="subject.html#32006">[ subject ]</a>
              <a href="author.html#32006">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
