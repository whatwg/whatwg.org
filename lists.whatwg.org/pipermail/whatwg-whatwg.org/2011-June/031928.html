<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] WebVTT feedback (was Re: Video feedback)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebVTT%20feedback%20%28was%20Re%3A%20Video%20feedback%29&In-Reply-To=%3CBANLkTinB6_r7Cp6VJXB9YRSGPnJZePW_Ug%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031921.html">
   <LINK REL="Next"  HREF="074202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] WebVTT feedback (was Re: Video feedback)</H1>
<!--htdig_noindex-->
    <B>Silvia Pfeiffer</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20WebVTT%20feedback%20%28was%20Re%3A%20Video%20feedback%29&In-Reply-To=%3CBANLkTinB6_r7Cp6VJXB9YRSGPnJZePW_Ug%40mail.gmail.com%3E"
       TITLE="[whatwg] WebVTT feedback (was Re: Video feedback)">silviapfeiffer1 at gmail.com
       </A><BR>
    <I>Sat Jun  4 08:05:55 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="031921.html">[whatwg] &lt;banner&gt; as a dedicated tag
</A></li>
        <LI>Next message: <A HREF="074202.html">[whatwg] WebVTT feedback (was Re: Video feedback)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31928">[ date ]</a>
              <a href="thread.html#31928">[ thread ]</a>
              <a href="subject.html#31928">[ subject ]</a>
              <a href="author.html#31928">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Ian, all,

I am very excited by the possibilities that Ian outlined for WebVTT
and how we can add V2 features.

I have some comments on the discussion below, but first I'd like to
point people to a piece of work that Ronny Mennerich from
LeanbackPlayer has recently undertaken (with a little of my help).
Ronny has create this Web page:
<A HREF="http://leanbackplayer.com/other/webvtt.html">http://leanbackplayer.com/other/webvtt.html</A> . It summarizes the WebVTT
file format and provides visual clarifications on how the cue settings
work.

I would like to point out that Ronny has done the drawings according
to how we understand the WebVTT / HTML spec, so would appreciate
somebody checking if it's correct.

I would also like to point out the issues that Ronny lists on the
bottom of that page and that we need to resolve. I've copied them here
for discussion and added some more detail:

* A:[start|middle|end]
 -- If the [subtitle box] and also the [subtitle text] are aligned by
the designer within a CSS (file), which setting dominates: CSS or cue
setting, for both [subtitle box] and [subtitle text]?

 -- As it is text alignment, for me it is alignment of text within the
[subtitle text] element only, but not also alignment/positioning of
[subtitle text] element in relation to the [subtitle box]! However,
Silvia reckons the anchoring of the box changes with the alignment, so
that it is possible to actually middle align the [subtitle box] with
A:middle. We wonder which understanding is correct.


* T:[number]%
 -- If the [subtitle box] and also the [subtitle text] are aligned by
the designer within a CSS (file), which setting dominates: CSS or cue
setting, for both [subtitle box] and [subtitle text]?

-- What about it if &quot;T&quot; is used together with A:[start|middle|end]?


* S:[number]
 -- If using S:[number] without &quot;%&quot; (percentage) it is not clear
whether &quot;px&quot; or &quot;em&quot; is the unit for the text size.

 -- If using &quot;em&quot; as unit it has to be cleared how to set and
calculate the text size value! Because there is no real value, only
integer, for [number] we can not make S:1.2 so we need a note for it
like e.g. S:120 is an example value, than the text size has to be
&quot;text-size: (120/100)em;&quot;
If using &quot;px&quot; as unit it is easy, no calculation needed, [number]
could be the new text size! If e.g. S:12 is an example value, than the
text size has to be &quot;text-size: 12px;&quot;

* cue voice tag
 -- why are we not using voice name declaration like in the cue class
tags with a dot separation like &lt;v.VoiceName&gt;voice text&lt;/v&gt; and
without spaces (eg. &lt;v VoiceName&gt;). This could avoid errors by .vtt
file writer and would also be much more clear to implement.

Please keep Ronny in the CC when you answer, because he is not
subscribed to the list.


Now my feedback on the WebVTT that Ian's Video feedback email provided:

On Fri, Jun 3, 2011 at 9:28 AM, Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ian at hixie.ch</A>&gt; wrote:
&gt;<i> On Mon, 3 Jan 2011, Philip J&#30450;genstedt wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; + I've added a magic string that is required on the format to make it
</I>&gt;&gt;<i> &gt; &#160; recognisable in environments with no or unreliable type labeling.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is there a reason it's &quot;WEBVTT FILE&quot; instead of just &quot;WEBVTT&quot;? &quot;FILE&quot;
</I>&gt;&gt;<i> seems redundant and like unnecessary typing to me.
</I>&gt;<i>
</I>&gt;<i> It seemed more likely that non-WebVTT files would start with a line that
</I>&gt;<i> said just &quot;WEBVTT&quot; than a line that said just &quot;WEBVTT FILE&quot;. But I guess
</I>&gt;<i> &quot;WEBVTT FILE FORMAT&quot; is just as likely and it'll be caught.
</I>&gt;<i>
</I>&gt;<i> I've changed it to just &quot;WEBVTT&quot;; there may be existing implementations
</I>&gt;<i> that only accept &quot;WEBVTT FILE&quot; so for now I recommend that authors still
</I>&gt;<i> use the longer header.
</I>
I'll tweet the changes to help spread the news. I like it this short. :-)


&gt;&gt;<i> &gt; On Wed, 8 Sep 2010, Philip J&#30450;genstedt wrote:
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; In the discussion on public-html-a11y &lt;trackgroup&gt; was suggested to
</I>&gt;&gt;<i> &gt; &gt; group together mutually exclusive tracks, so that enabling one
</I>&gt;&gt;<i> &gt; &gt; automatically disables the others in the same trackgroup.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; I guess it's up to the UA how to enable and disable &lt;track&gt;s now,
</I>&gt;&gt;<i> &gt; &gt; but the only option is making them all mutually exclusive (as
</I>&gt;&gt;<i> &gt; &gt; existing players do) or a weird kind of context menu where it's
</I>&gt;&gt;<i> &gt; &gt; possible to enable and disable tracks completely independently.
</I>&gt;&gt;<i> &gt; &gt; Neither options is great, but as a user I would almost certainly
</I>&gt;&gt;<i> &gt; &gt; prefer all tracks being mutually exclusive and requiring scripts to
</I>&gt;&gt;<i> &gt; &gt; enable several at once.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; It's not clear to me what the use case is for having multiple groups
</I>&gt;&gt;<i> &gt; of mutually exclusive tracks.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The intent of the spec as written was that a browser would by default
</I>&gt;&gt;<i> &gt; just have a list of all the subtitle and caption tracks (the latter
</I>&gt;&gt;<i> &gt; with suitable icons next to them, e.g. the [CC] icon in US locales),
</I>&gt;&gt;<i> &gt; and the user would pick one (or none) from the list. One could easily
</I>&gt;&gt;<i> &gt; imagine a UA allowing the user to enable multiple tracks by having the
</I>&gt;&gt;<i> &gt; user ctrl-click a menu item, though, or some similar solution, much
</I>&gt;&gt;<i> &gt; like with the commonly seen select box UI.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In the vast majority of cases, all tracks are intended to be mutually
</I>&gt;&gt;<i> exclusive, such as English+English HoH or subtitles in different
</I>&gt;&gt;<i> languages. No media player UI (hardware or software) that I have ever
</I>&gt;&gt;<i> used allows enabling multiple tracks at once. Without any kind of hint
</I>&gt;&gt;<i> about which tracks make sense to enable together, I can't see desktop
</I>&gt;&gt;<i> Opera allowing multiple tracks (of the same kind) to be enabled via the
</I>&gt;&gt;<i> main UI.
</I>&gt;<i>
</I>&gt;<i> Personally I think it's quite reasonable to want to see two languages at
</I>&gt;<i> once, or even two forms of the same language at once, especially for,
</I>&gt;<i> e.g., reviewing subtitles. But I don't think it would be a bad thing if
</I>&gt;<i> some browsers didn't expose that in the UI; that's something that could
</I>&gt;<i> be left to bookmarklets, for example.
</I>
I can particularly imagine people running the original captions in
e.g. English, and having a subtitle file in a language that they are
interested in (because they are learning it or it's their mother
tongue). But I agree that this below the 80% mark and can be done with
custom UI.


&gt;&gt;<i> Using this syntax, I would expect some confusion when you omit the closing
</I>&gt;&gt;<i> &lt;/v&gt;, when it's *not* a cue spoken by two voices at the same time, such as:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;v Jim&gt;- Boo!
</I>&gt;&gt;<i> &lt;v Bob&gt;- Gah!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Gah! is spoken by both Jim and Bob, but that was likely not intended. If
</I>&gt;&gt;<i> this causes confusion, we should make validators warn about multiple
</I>&gt;&gt;<i> voices with with no closing &lt;/v&gt;.
</I>&gt;<i>
</I>&gt;<i> No need to just warn, the spec says the above is outright invalid, so
</I>&gt;<i> they would raise an error.
</I>
It would still need parsing. Do we expect it to result in
&lt;v Jim&gt;- Boo!&lt;/v&gt;
&lt;v Bob&gt;- Gah!
or
&lt;v Jim&gt;- Boo!
&lt;v Jim, Bob&gt;- Gah!
?

Also, that raises a question: if the &quot;annotation&quot; in the &lt;v&gt; element
concerns multiple people, how do we specify that? Are we leaving this
completely to author preference or do we want it to be machine
parsable?


&gt;&gt;<i> &gt; &gt; For captions and subtitles it's less common, but rendering it
</I>&gt;&gt;<i> &gt; &gt; underneath the video rather than on top of it is not uncommon, e.g.
</I>&gt;&gt;<i> &gt; &gt; <A HREF="http://nihseniorhealth.gov/video/promo_qt300.html">http://nihseniorhealth.gov/video/promo_qt300.html</A> or
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Conceptually, that's in the video area, it's just that the video isn't
</I>&gt;&gt;<i> &gt; centered vertically. I suppose we could allow UAs to do that pretty
</I>&gt;&gt;<i> &gt; easily, if it's commonly desired.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's already possible to align the video to the top of its content box
</I>&gt;&gt;<i> using &lt;<A HREF="http://dev.w3.org/csswg/css3-images/#object-position">http://dev.w3.org/csswg/css3-images/#object-position</A>&gt;:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> video { object-position: center top }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (This is already supported in Opera, but prefixed: -o-object-position)
</I>&gt;<i>
</I>&gt;<i> Sounds good.
</I>
I know that people have also asked to move the text actually off the
video an onto other areas on the Web page. This will have to be done
with script at the moment, which is probably ok, in particular since
you can retrieve the cue text as HTML.


&gt;&gt;<i> Note that in Sweden captioning for the HoH is delivered via the teletext
</I>&gt;&gt;<i> system, which would allow ASCII-art to be displayed. Still, I've never
</I>&gt;&gt;<i> seen it. The only case of graphics being used in &quot;subtitles&quot; I can
</I>&gt;&gt;<i> remember ever seeing is the DVD of
</I>&gt;&gt;<i> &lt;<A HREF="http://en.wikipedia.org/wiki/Cat_Soup">http://en.wikipedia.org/wiki/Cat_Soup</A>&gt;, where the subtitle system is
</I>&gt;&gt;<i> (ab)used to overlay some graphics.
</I>&gt;<i>
</I>&gt;<i> Yeah, I'm not at all concerned about not supporting graphics in subtitles.
</I>&gt;<i> It's nowhere near the 80% bar.
</I>
That's what we have the metadata track type for, IIUC.


&gt;&gt;<i> If we ever want comments, we need to add support in the parser before
</I>&gt;&gt;<i> any content accidentally uses the syntax, in other words pretty soon
</I>&gt;&gt;<i> now.
</I>&gt;<i>
</I>&gt;<i> No, we can use any syntax that the parser currently ignores. It won't
</I>&gt;<i> break backwards compat with content that already uses it by then, since
</I>&gt;<i> the whole point of comments is to be ignored. The only difference is
</I>&gt;<i> whether validators complain or not.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; On Fri, 22 Oct 2010, Simon Pieters wrote:
</I>&gt;&gt;<i> &gt; &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; &gt; It can still be inspired by it though so we don't have to change
</I>&gt;&gt;<i> &gt; &gt; &gt; much. I'd be curious to hear what other things you'd clean up
</I>&gt;&gt;<i> &gt; &gt; &gt; given the chance.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; WebSRT has a number of quirks to be compatible with SRT, like
</I>&gt;&gt;<i> &gt; &gt; supporting both comma and dot as decimal separators, the weird
</I>&gt;&gt;<i> &gt; &gt; parsing of timestamps, etc.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I've cleaned the timestamp parsing up. I didn't see others.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I consider the cue id line (the line preceding the timing line) to be
</I>&gt;&gt;<i> cruft carried over from SRT. When we now both have classes and the
</I>&gt;&gt;<i> possibility of getting a cue by index, so why do we need it?
</I>&gt;<i>
</I>&gt;<i> It's optional, but it is useful, especially for metadata tracks, as a way
</I>&gt;<i> to grab specific cues. For example, consider a metadata or chapter track
</I>&gt;<i> that contains cues with specific IDs that the site would use to jump to
</I>&gt;<i> particular parts of the video in response to key presses, such as &quot;start
</I>&gt;<i> of content after intro&quot;, or maybe for a podcast with different segments,
</I>&gt;<i> where the user can jump to &quot;news&quot; and &quot;reviews&quot; and &quot;final thought&quot; -- you
</I>&gt;<i> need an ID to be able to find the right cue quickly.
</I>
We even have a media fragment URI addressing approach for this:
<A HREF="http://www.w3.org/TR/media-frags/#naming-name">http://www.w3.org/TR/media-frags/#naming-name</A>
The group recently renamed #id to #chapter.
It would still link based on the ID of a cue, such as
<A HREF="http://example.com/video.ogv#chapter=news">http://example.com/video.ogv#chapter=news</A>


&gt;&gt;<i> &gt; &gt; There was also some discussion about metadata. Language is sometimes
</I>&gt;&gt;<i> &gt; &gt; necessary for the font engine to pick the right glyph.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Could you elaborate on this? My assumption was that we'd just use CSS,
</I>&gt;&gt;<i> &gt; which doesn't rely on language for this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's not in any spec that I'm aware of, but some browsers (including
</I>&gt;&gt;<i> Opera) pick different glyphs depending on the language of the text,
</I>&gt;&gt;<i> which really helps when rendering CJK when you have several CJK fonts on
</I>&gt;&gt;<i> the system. Browsers will already know the language from &lt;track
</I>&gt;&gt;<i> srclang&gt;, so this would be for external players.
</I>&gt;<i>
</I>&gt;<i> How is this problem solved in SRT players today?
</I>
SRT players don't deal with it at all. They often have problems with fonts.


&gt;<i> On Mon, 14 Feb 2011, Philip J&#30450;genstedt wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Given that most existing subtitle formats don't have any language
</I>&gt;&gt;<i> metadata, I'm a bit skeptical. However, if implementors of non-browser
</I>&gt;&gt;<i> players want to implement WebVTT and ask for this I won't stand in the
</I>&gt;&gt;<i> way (not that I could if I wanted to). For simplicity, I'd prefer the
</I>&gt;&gt;<i> language metadata from the file to not have any effect on browsers
</I>&gt;&gt;<i> though, even if no language is given on &lt;track&gt;.
</I>&gt;<i>
</I>&gt;<i> Indeed.
</I>
I'd say that's fine. I'd still like this information for non-Web
browsers. For example, VLC displays &quot;Elephant's Dream&quot; with 24
subtitle tracks in SRT as a list of track1, track2, track3 etc rather
than displaying the language that the tracks are in and I find this
rather unsatisfactory.


&gt;<i> On Tue, 4 Jan 2011, Alex Bishop wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Firefox too. If you visit
</I>&gt;&gt;<i> <A HREF="http://people.mozilla.org/~jdaggett/webfonts/serbianglyphs.html">http://people.mozilla.org/~jdaggett/webfonts/serbianglyphs.html</A> in
</I>&gt;&gt;<i> Firefox 4, the text explicitly marked-up as being Serbian Cyrillic
</I>&gt;&gt;<i> (using the lang=&quot;sr-Cyrl&quot; attribute) uses some different glyphs to the
</I>&gt;&gt;<i> text with no language metadata.
</I>&gt;<i>
</I>&gt;<i> This seems to be in violation of CSS; we should probably fix it there
</I>&gt;<i> before fixing it in WebVTT since WebVTT relis on CSS.
</I>
Only when used within browsers...


&gt;<i> On Mon, 3 Jan 2011, Philip J&#30450;genstedt wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; &gt; * The &quot;bad cue&quot; handling is stricter than it should be. After
</I>&gt;&gt;<i> &gt; &gt; collecting an id, the next line must be a timestamp line. Otherwise,
</I>&gt;&gt;<i> &gt; &gt; we skip everything until a blank line, so in the following the
</I>&gt;&gt;<i> &gt; &gt; parser would jump to &quot;bad cue&quot; on line &quot;2&quot; and skip the whole cue.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; 1
</I>&gt;&gt;<i> &gt; &gt; 2
</I>&gt;&gt;<i> &gt; &gt; 00:00:00.000 --&gt; 00:00:01.000
</I>&gt;&gt;<i> &gt; &gt; Bla
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; This doesn't match what most existing SRT parsers do, as they simply
</I>&gt;&gt;<i> &gt; &gt; look for timing lines and ignore everything else. If we really need
</I>&gt;&gt;<i> &gt; &gt; to collect the id instead of ignoring it like everyone else, this
</I>&gt;&gt;<i> &gt; &gt; should be more robust, so that a valid timing line always begins a
</I>&gt;&gt;<i> &gt; &gt; new cue. Personally, I'd prefer if it is simply ignored and that we
</I>&gt;&gt;<i> &gt; &gt; use some form of in-cue markup for styling hooks.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The IDs are useful for referencing cues from script, so I haven't
</I>&gt;&gt;<i> &gt; removed them. I've also left the parsing as is for when neither the
</I>&gt;&gt;<i> &gt; first nor second line is a timing line, since that gives us a lot of
</I>&gt;&gt;<i> &gt; headroom for future extensions (we can do anything so long as the
</I>&gt;&gt;<i> &gt; second line doesn't start with a timestamp and &quot;--&gt;&quot; and another
</I>&gt;&gt;<i> &gt; timestamp).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In the case of feeding future extensions to current parsers, it's way
</I>&gt;&gt;<i> better fallback behavior to simply ignore the unrecognized second line
</I>&gt;&gt;<i> than to discard the entire cue. The current behavior seems unnecessarily
</I>&gt;&gt;<i> strict and makes the parser more complicated than it needs to be. My
</I>&gt;&gt;<i> preference is just ignore anything preceding the timing line, but even
</I>&gt;&gt;<i> if we must have IDs it can still be made simpler and more robust than
</I>&gt;&gt;<i> what is currently spec'ed.
</I>&gt;<i>
</I>&gt;<i> If we just ignore content until we hit a line that happens to look like a
</I>&gt;<i> timing line, then we are much more constrained in what we can do in the
</I>&gt;<i> future. For example, we couldn't introduce a &quot;comment block&quot; syntax, since
</I>&gt;<i> any comment containing a timing line wouldn't be ignored. On the other
</I>&gt;<i> hand if we keep the syntax as it is now, we can introduce a comment block
</I>&gt;<i> just by having its first line include a &quot;--&gt;&quot; but not have it match the
</I>&gt;<i> timestamp syntax, e.g. by having it be &quot;--&gt; COMMENT&quot; or some such.
</I>&gt;<i>
</I>&gt;<i> Looking at the parser more closely, I don't really see how doing anything
</I>&gt;<i> more complex than skipping the block entirely would be simpler than what
</I>&gt;<i> we have now, anyway.
</I>
Yes, I think that can work. The pattern of a line with &quot;--&gt;&quot; without
time markers is currently ignored, so we can introduce something with
it for special content like comments, style and default.


&gt;<i> On Mon, 3 Jan 2011, Glenn Maynard wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> By the way, the WebSRT hit from Google
</I>&gt;&gt;<i> (<A HREF="http://www.whatwg.org/specs/web-apps/current-work/websrt.html">http://www.whatwg.org/specs/web-apps/current-work/websrt.html</A>) is 404.
</I>&gt;&gt;<i> I've had to read it out of the Google cache, since I'm not sure where it
</I>&gt;&gt;<i> went.
</I>&gt;<i>
</I>&gt;<i> I added a redirect.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Inline comments (not just line comments) in subtitles are very important
</I>&gt;&gt;<i> for collaborative editing: for leaving notes about a translation, noting
</I>&gt;&gt;<i> where editing is needed or why a change was made, and so on.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If a DOM-like interface is specified for this (presumably this will
</I>&gt;&gt;<i> happen later), being able to access inline comments like DOM comment
</I>&gt;&gt;<i> nodes would be very useful for visual editors, to allow displaying
</I>&gt;&gt;<i> comments and to support features like &quot;seek to next comment&quot;.
</I>&gt;<i>
</I>&gt;<i> We can add comments pretty easily (e.g. we could say that &quot;&lt;!&quot; starts a
</I>&gt;<i> comment and &quot;&gt;&quot; ends it -- that's already being ignored by the current
</I>&gt;<i> parser), if people really need them. But are comments really that useful?
</I>&gt;<i> Did SRT have problem due to not supporting inline comments? (Or did it
</I>&gt;<i> support inline comments?)
</I>
Works for me, though I don't really like that it is similar to HTML
comments but different.


&gt;<i> On Tue, 4 Jan 2011, Glenn Maynard wrote:
</I>&gt;&gt;<i> On Tue, Jan 4, 2011 at 4:24 AM, Philip J&#30450;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i> &gt; If you need an intermediary format while editing, you can just use any
</I>&gt;&gt;<i> &gt; syntax you like and have the editor treat it specially.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If I'd need to write my own parser to write an editor for it, that's one
</I>&gt;&gt;<i> thing--but I hope I wouldn't need to create yet another ad hoc caption
</I>&gt;&gt;<i> format, mirroring the features of this one, just to work around a lack
</I>&gt;&gt;<i> of inline comments.
</I>&gt;<i>
</I>&gt;<i> An editor would need a custom parser anyway to make sure it round-tripped
</I>&gt;<i> syntax errors, presumably.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> The cue text already vaguely resembles HTML. &#160;What about &lt;!-- comments
</I>&gt;&gt;<i> --&gt;? &#160;It's universally understood, and doesn't require any new escape
</I>&gt;&gt;<i> mechanisms.
</I>&gt;<i>
</I>&gt;<i> The current parser would end a comment at the first &quot;&gt;&quot;, but so long as
</I>&gt;<i> you didn't have a &quot;&gt;&quot; in the comment, &quot;&lt;!--...--&gt;&quot; would work fine within
</I>&gt;<i> cue text. (We would have to be careful in standalone blocks to define it
</I>&gt;<i> in such a way that it could not be confused with a timing line.)
</I>
Yeah, it's that part that I don't really like.


&gt;<i> On Wed, 5 Jan 2011, Philip J&#30450;genstedt wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The question is rather if the comments should be exposed as DOM comment
</I>&gt;&gt;<i> nodes in getCueAsHTML, which seems to be what you're asking for. That
</I>&gt;&gt;<i> would only be possible if comments were only allowed inside the cue
</I>&gt;&gt;<i> text, which means that you couldn't comment out entire cues, as such:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 00:00.000 --&gt; 00:01.000
</I>&gt;&gt;<i> one
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /*
</I>&gt;&gt;<i> 00:02.000 --&gt; 00:03.000
</I>&gt;&gt;<i> two
</I>&gt;&gt;<i> */
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 00:04.000 --&gt; 00:05.000
</I>&gt;&gt;<i> three
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Therefore, my thinking is that comments should be removed during parsing
</I>&gt;&gt;<i> and not be exposed to any layer above it.
</I>&gt;<i>
</I>&gt;<i> We can support both, if there's really demand for it.
</I>&gt;<i>
</I>&gt;<i> For example:
</I>&gt;<i>
</I>&gt;<i> &#160;00:00.000 --&gt; 00:01.000
</I>&gt;<i> &#160;one &lt;! inline comment &gt; one
</I>&gt;<i>
</I>&gt;<i> &#160;COMMENT--&gt;
</I>&gt;<i> &#160;00:02.000 --&gt; 00:03.000
</I>&gt;<i> &#160;two; this is entirely
</I>&gt;<i> &#160;commented out
</I>&gt;<i>
</I>&gt;<i> &#160;&lt;! this is the ID line
</I>&gt;<i> &#160;00:04.000 --&gt; 00:05.000
</I>&gt;<i> &#160;three; last line is a &quot;&gt;&quot;
</I>&gt;<i> &#160;which is part of the cue
</I>&gt;<i> &#160;and is not a comment.
</I>&gt;<i> &#160;&gt;
</I>&gt;<i>
</I>&gt;<i> The above would work today in a conforming UA. The question really is what
</I>&gt;<i> parts of this do we want to support and what do we not care enough about.
</I>
I think both these would be good to have as they serve different uses.


&gt;<i> On Fri, 14 Jan 2011, Silvia Pfeiffer wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We are concerned, however, about the introduction of WebVTT as a
</I>&gt;&gt;<i> universal captioning format *when used outside browsers*. Since a subset
</I>&gt;&gt;<i> of CSS features is required to bring HTML5 video captions on par with TV
</I>&gt;&gt;<i> captions, non-browser applications will need to support these CSS
</I>&gt;&gt;<i> features, too. However, we do not believe that external CSS files are an
</I>&gt;&gt;<i> acceptable solution for non-browser captioning and therefore think that
</I>&gt;&gt;<i> those CSS features (see [1]) should eventually be made part of the
</I>&gt;&gt;<i> WebVTT specification.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [1] <A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/rendering.html#the-">http://www.whatwg.org/specs/web-apps/current-work/multipage/rendering.html#the-</A>'::cue'-pseudo-element
</I>&gt;<i>
</I>&gt;<i> I'm not sure what you mean by &quot;made part of the WebVTT specification&quot;, but
</I>&gt;<i> if you mean that WebVTT should support inline CSS, that does seem line
</I>&gt;<i> something we can add, e.g. using syntax like this:
</I>&gt;<i>
</I>&gt;<i> &#160; WEBVTT
</I>&gt;<i>
</I>&gt;<i> &#160; STYLE--&gt;
</I>&gt;<i> &#160; ::cue(v[voice=Bob]) { color: green; }
</I>&gt;<i> &#160; ::cue(c.narration) { font-style: italic; }
</I>&gt;<i> &#160; ::cue(c.narration i) { font-style: normal; }
</I>
Yup, that's exactly what we need.


&gt;<i> &#160; 00:00.000 --&gt; 00:02.000
</I>&gt;<i> &#160; Welcome.
</I>&gt;<i>
</I>&gt;<i> &#160; 00:02.500 --&gt; 00:05.000
</I>&gt;<i> &#160; To WebVTT.
</I>&gt;<i>
</I>&gt;<i> I suggest we wait until WebVTT and '::cue' in particular have shipped in
</I>&gt;<i> at least one browser and been demonstrated as being useful before adding
</I>&gt;<i> this kind of feature though.
</I>
Fair enough.


&gt;&gt;<i> 1. Introduce file-wide metadata
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> WebVTT requires a structure to add header-style metadata. We are here
</I>&gt;&gt;<i> talking about lists of name-value pairs as typically in use for header
</I>&gt;&gt;<i> information. The metadata can be optional, but we need a defined means
</I>&gt;&gt;<i> of adding them.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Required attributes in WebVTT files should be the main language in use
</I>&gt;&gt;<i> and the kind of data found in the WebVTT file - information that is
</I>&gt;&gt;<i> currently provided in the &lt;track&gt; element by the @srclang and @kind
</I>&gt;&gt;<i> attributes. These are necessary to allow the files to be interpreted
</I>&gt;&gt;<i> correctly by non-browser applications, for transcoding or to determine
</I>&gt;&gt;<i> if a file was created as a caption file or something else, in particular
</I>&gt;&gt;<i> the @kind=metadata. @srclang also sets the base directionality for BiDi
</I>&gt;&gt;<i> calculations.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Further metadata fields that are typically used by authors to keep
</I>&gt;&gt;<i> specific authoring information or usage hints are necessary, too. As
</I>&gt;&gt;<i> examples of current use see the format of MPlayer mpsub&#8217;s header
</I>&gt;&gt;<i> metadata [2], EBU STL&#8217;s General Subtitle Information block [3], and
</I>&gt;&gt;<i> even CEA-608&#8217;s Extended Data Service with its StartDate, Station,
</I>&gt;&gt;<i> Program, Category and TVRating information [4]. Rather than specifying a
</I>&gt;&gt;<i> specific subset of potential fields we recommend to just have the means
</I>&gt;&gt;<i> to provide name-value pairs and leave it to the negotiation between the
</I>&gt;&gt;<i> author and the publisher which fields they expect of each other.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [2] <A HREF="http://www.mplayerhq.hu/DOCS/tech/mpsub.sub">http://www.mplayerhq.hu/DOCS/tech/mpsub.sub</A>
</I>&gt;&gt;<i> [3] <A HREF="https://docs.google.com/viewer?a=v&amp;q=cache:UKnzJubrIh8J:tech.ebu.ch/docs/tech/tech3264.pdf">https://docs.google.com/viewer?a=v&amp;q=cache:UKnzJubrIh8J:tech.ebu.ch/docs/tech/tech3264.pdf</A>
</I>&gt;&gt;<i> [4] <A HREF="http://edocket.access.gpo.gov/cfr_2007/octqtr/pdf/47cfr15.119.pdf">http://edocket.access.gpo.gov/cfr_2007/octqtr/pdf/47cfr15.119.pdf</A>
</I>&gt;<i>
</I>&gt;<i> I don't understand the use cases here.
</I>&gt;<i>
</I>&gt;<i> CSS and JS don't have anything like this, why should WebVTT? What problem
</I>&gt;<i> is this solving? How did SRT solve this problem?
</I>
SRT doesn't solve it. That's why it's not being used by professionals
for subtitling. Most other subtitling formats, however, have means for
including metadata, including formats like LRC for music lyrics. CSS
and JS don't have metadata, but HTML has through the meta tag.


&gt;&gt;<i> 2. Introduce file-wide cue settings
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> At the moment if authors want to change the default display of cues,
</I>&gt;&gt;<i> they can only set them per cue (with the D:, S:, L:, A: and T:. cue
</I>&gt;&gt;<i> settings) or have to use an external CSS file through a HTML page with
</I>&gt;&gt;<i> the ::cue pseudo-element. In particular when considering that all
</I>&gt;&gt;<i> Asian language files would require a &#8220;D:vertical&#8221; marker, it becomes
</I>&gt;&gt;<i> obvious that this replication of information in every cue is
</I>&gt;&gt;<i> inefficient and a waste of bandwidth, storage, and application speed.
</I>&gt;&gt;<i> A cue setting default section should be introduced into a file
</I>&gt;&gt;<i> header/setup area of WebVTT which will avoid such replication.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> An example document with cue setting defaults in the header could look
</I>&gt;&gt;<i> as follows:
</I>&gt;&gt;<i> ==
</I>&gt;&gt;<i> WEBVTT
</I>&gt;&gt;<i> Language=zh
</I>&gt;&gt;<i> Kind=Caption
</I>&gt;&gt;<i> CueSettings= A:end D:vertical
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 00:00:15.000 --&gt; 00:00:17.950
</I>&gt;&gt;<i> &#22312;&#24038;&#36793;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 00:00:18.160 --&gt; 00:00:20.080
</I>&gt;&gt;<i> &#22312;&#21491;&#36793;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 00:00:20.110 --&gt; 00:00:21.960
</I>&gt;&gt;<i> ...&#25429;&#34631;&#33609;&#26800;.
</I>&gt;&gt;<i> ==
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Note that you might consider that the solution to this problem is to use
</I>&gt;&gt;<i> external CSS to specify a change to all cues. However, this is not
</I>&gt;&gt;<i> acceptable for non-browser applications and therefore not an acceptable
</I>&gt;&gt;<i> solution to this problem.
</I>&gt;<i>
</I>&gt;<i> Adding defaults seems like a reasonable feature. We could add this just by
</I>&gt;<i> adding the ability to have a block in a VTT file like this:
</I>&gt;<i>
</I>&gt;<i> &#160; WEBVTT
</I>&gt;<i>
</I>&gt;<i> &#160; DEFAULTS --&gt; A:vertical A:end
</I>&gt;<i>
</I>&gt;<i> &#160; 00:00.000 --&gt; 00:02.000
</I>&gt;<i> &#160; This is vertical and end-aligned.
</I>&gt;<i>
</I>&gt;<i> &#160; 00:02.500 --&gt; 00:05.000
</I>&gt;<i> &#160; As is this.
</I>&gt;<i>
</I>&gt;<i> &#160; DEFAULTS --&gt; A:start
</I>&gt;<i>
</I>&gt;<i> &#160; 00:05.500 --&gt; 00:07.000
</I>&gt;<i> &#160; This is horizontal and start-aligned.
</I>&gt;<i>
</I>&gt;<i> However, again I suggest that we wait until WebVTT has been deployed in at
</I>&gt;<i> least one browser before adding more features like this.
</I>
This is a good idea. Happy to wait, though there are now
implementations that are starting to emerge and in particular these
DEFAULTS will be very useful to reduce repetition in authoring from
the start.


&gt;&gt;<i> * positioning: Generally the way in which we need positioning to work is
</I>&gt;&gt;<i> to provide an anchor position for the text and then explain in which
</I>&gt;&gt;<i> direction font size changes and the addition of more text allows the
</I>&gt;&gt;<i> text segment to grow. It seems that the line position cue (L) provides a
</I>&gt;&gt;<i> baseline position and the alignment cue (A) provides the growing
</I>&gt;&gt;<i> direction start/middle/end. Can we just confirm this understanding?
</I>&gt;<i>
</I>&gt;<i> It's more the other way around: the line boxes are laid out and then the
</I>&gt;<i> resulting line boxes are positioned according to the A: and L: lines. In
</I>&gt;<i> particular, the L: lines when given with a % character position the line
</I>&gt;<i> boxes in the same manner that CSS background-position positions the
</I>&gt;<i> background image, and L: lines without a % character set the position of
</I>&gt;<i> the line boxes based on the height of the first line box. A: lines then
</I>&gt;<i> just set the position of these line boxes relative to the other dimension.
</I>
There are examples in Ronny's page and it would be good to check if
they were done correctly, so we can come to a common understanding and
even include such examples in the spec to clarify the meaning of the
cue settings.

There are particularly questions about what L:100% and T:100% mean -
do they position the boxes outside the video viewport?


&gt;&gt;<i> * fontsize: When changing text size in relation to the video changing
</I>&gt;&gt;<i> size or resolution, we need to make sure not to reduce the text size
</I>&gt;&gt;<i> below a specific font size for readability reasons. And we also need to
</I>&gt;&gt;<i> make sure not to make it larger than a specific font size, since
</I>&gt;&gt;<i> otherwise it will dominate the display. We usually want the text to be
</I>&gt;&gt;<i> at least Xpx, but no bigger than Ypx. Also, one needs to pay attention
</I>&gt;&gt;<i> to the effect that significant player size changes have on relative
</I>&gt;&gt;<i> positioning - in particular for the minimum caption text size. Dealing
</I>&gt;&gt;<i> with min and max sizes is missing from the current specification in our
</I>&gt;&gt;<i> understanding.
</I>&gt;<i>
</I>&gt;<i> That's a CSS implementation issue. Minimum font sizes are commonly
</I>&gt;<i> supported in CSS implementations. Maximum font sizes would be similar.
</I>

OK, seems we can get it with CSS, though not specify it with &quot;S&quot; cue setting.

Incidentally: would it make sense to have a pixel-based (or em-based)
font size specification for &quot;S&quot; as well as the percentage based one?


&gt;&gt;<i> * bidi text: In our experience from YouTube, we regularly see captions
</I>&gt;&gt;<i> that contain mixed languages/directionality, such as Hebrew captions
</I>&gt;&gt;<i> that have a word of English in it. How do we allow for bidi text inside
</I>&gt;&gt;<i> cues? How do we change directionality mid-cue? Do we deal with the
</I>&gt;&gt;<i> zero-width LTR-mark and RTL-mark unicode characters? It would be good to
</I>&gt;&gt;<i> explain how these issues are dealt with in WebVTT.
</I>&gt;<i>
</I>&gt;<i> There's nothing special about how they work in WebVTT; they are handled
</I>&gt;<i> the same as in CSS.
</I>
Except that CSS has a directionality property. So, we basically are
restricted to the UTF-8 directionality characters. These are probably
sufficient.


&gt;&gt;<i> * internationalisation: D:vertical and D:vertical-lr seem to only work
</I>&gt;&gt;<i> for vertical text - how about horizontal-rl? For example, Hebrew is a
</I>&gt;&gt;<i> prime example of a language being written from right to left
</I>&gt;&gt;<i> horizontally. Is that supported and how?
</I>&gt;<i>
</I>&gt;<i> What exactly would horizontal-rl do?
</I>
I was under the impression that we need a @dir attribute to provide
rtl text. But I am now aware of the UTF-8 characters for
directionality and they are indeed better to support than more markup.


&gt;&gt;<i> * naming: The usage of single letter abbreviations for cue settings has
</I>&gt;&gt;<i> created quite a discussion here at Google. We all agree that file-wide
</I>&gt;&gt;<i> cue settings are required and that this will reduce the need for
</I>&gt;&gt;<i> cue-specific cue settings. We can thus afford a bit more readability in
</I>&gt;&gt;<i> the cue settings. We therefore believe that it would be better if the
</I>&gt;&gt;<i> cue settings were short names rather than single letter codes. This
</I>&gt;&gt;<i> would be more like CSS, too, and easier to learn and get right. In the
</I>&gt;&gt;<i> interface description, the 5 dimensions have proper names which could be
</I>&gt;&gt;<i> re-used (&#8220;direction&#8221;, &#8220;linePosition&#8221;, &#8220;textPosition&#8221;, &#8220;size&#8221; and
</I>&gt;&gt;<i> &#8220;align&quot;). We therefore recommend replacing the single-letter cue
</I>&gt;&gt;<i> commands with these longer names.
</I>&gt;<i>
</I>&gt;<i> That would massively bloat these files and make editing them a huge pain,
</I>&gt;<i> as far as I can tell. I agree that defaults would make it better, but many
</I>&gt;<i> cues would still need their own positioning and sizing information, and
</I>&gt;<i> anything beyond a very few letters would IMHO quickly become far too
</I>&gt;<i> verbose for most people. &quot;L&quot;, &quot;A&quot;, and &quot;S&quot; are pretty mnemonic, &quot;T&quot; would
</I>&gt;<i> quickly become familiar to people writing cues, and &quot;D&quot; is only going to
</I>&gt;<i> be relevant to some authors but for those authors it's pretty
</I>&gt;<i> self-explanatory as well, since the value is verbose.
</I>
It took me 6 months before I got used to them for authoring subtitle
files, but indeed I have grown accustomed and can deal with them now.


&gt;<i> What I really would like to do is use &quot;X&quot; and &quot;Y&quot; instead of &quot;T&quot; and &quot;L&quot;,
</I>&gt;<i> but those terms would be very confusing when we flip the direction, which
</I>&gt;<i> is why I used the less obvious &quot;T&quot; and &quot;L&quot;.
</I>
Yeah, don't change them again.


&gt;&gt;<i> * textcolor: In particular on European TV it is common to distinguish
</I>&gt;&gt;<i> between speakers by giving their speech different colors. The following
</I>&gt;&gt;<i> colors are supported by EBU STL, CEA-608 and CEA-708 and should be
</I>&gt;&gt;<i> supported in WebVTT without the use of external CSS: black, red, green,
</I>&gt;&gt;<i> yellow, blue, magenta, cyan, and white. As default we recommend white on
</I>&gt;&gt;<i> a grey transparent background.
</I>&gt;<i>
</I>&gt;<i> This is supported as 'color' and 'background'.
</I>
OK.


&gt;&gt;<i> * underline: EBU STL, CEA-608 and CEA-708 support underlining of
</I>&gt;&gt;<i> characters.
</I>&gt;<i>
</I>&gt;<i> I've added support for 'text-decoration'.
</I>
And for &lt;u&gt;. I am happy now, thanks. :-)


&gt;&gt;<i> We have a couple of recommendations for changes mostly for aesthetic and
</I>&gt;&gt;<i> efficiency reasons. We would like to point out that Google is very
</I>&gt;&gt;<i> concerned with the dense specification of data and every surplus
</I>&gt;&gt;<i> character, in particular if it is repeated a lot and doesn&#8217;t fulfill a
</I>&gt;&gt;<i> need, should be removed to reduce the load created on worldwide
</I>&gt;&gt;<i> networking and storage infrastructures and help render Web pages faster.
</I>&gt;<i>
</I>&gt;<i> This seems to contradict your earlier request to make the languge more
</I>&gt;<i> verbose...
</I>
Yeah, we had that discussion at Google, too, but the frequency of
&quot;--&gt;&quot; is much higher than the frequency of cue settings, in particular
once we remove duplication needs.

I personally think we need something that's fairly unique to identify
a line of start/end time markers. &quot;--&gt;&quot;, while not pretty and somewhat
conflicted with HTML comments, can work.


&gt;&gt;<i> * Duration specification: WebVTT time stamps are always absolute time
</I>&gt;&gt;<i> stamps calculated in relation to the base time of synchronisation with
</I>&gt;&gt;<i> the media resource. While this is simple to deal with for machines, it
</I>&gt;&gt;<i> is much easier for hand-created captions to deal with relative time
</I>&gt;&gt;<i> stamps for cue end times and for the timestamp markers within cues. Cue
</I>&gt;&gt;<i> start times should continue to stay absolute time stamps. Timestamp
</I>&gt;&gt;<i> markers within cues should be relative to the cue start time. Cue end
</I>&gt;&gt;<i> times should be possible to be specified either as absolute or relative
</I>&gt;&gt;<i> timestamps. The relative time stamps could be specified through a prefix
</I>&gt;&gt;<i> of &#8220;+&#8221; in front of a &#8220;ss.mmm&#8221; second and millisecond specification.
</I>&gt;&gt;<i> These are not only simpler to read and author, but are also more compact
</I>&gt;&gt;<i> and therefore create smaller files.
</I>&gt;<i>
</I>&gt;<i> I think if anything is absolute, it doesn't really make anything much
</I>&gt;<i> simpler for anything else to be relative, to be honest. Take the example
</I>&gt;<i> you give here:
</I>&gt;<i>
</I>&gt;&gt;<i> An example document with relative timestamps is:
</I>&gt;&gt;<i> ==
</I>&gt;&gt;<i> WEBVTT
</I>&gt;&gt;<i> Language=en
</I>&gt;&gt;<i> Kind=Subtitle
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 00:00:15.000 &#160; +2.950
</I>&gt;&gt;<i> At the left we can see...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 00:00:18.160 &#160; &#160;+1.920
</I>&gt;&gt;<i> At the right we can see the...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 00:00:20.110 &#160; +1.850
</I>&gt;&gt;<i> ...the &lt;+0.400&gt;head-&lt;+0.800&gt;snarlers
</I>&gt;&gt;<i> ==
</I>&gt;<i>
</I>&gt;<i> If the author were to change the first time stamp because the video gained
</I>&gt;<i> a 30 second advertisement at the start, then he would still need to change
</I>&gt;<i> the hundreds of subseqent timestamps for all the additional cues. What
</I>&gt;<i> does the author gain from not having to change the relative stamps? It's
</I>&gt;<i> not like he's going to be doing it by hand, and once a tool is involved,
</I>&gt;<i> the tool can change everything just as easily.
</I>
Much will continue to be hand-coded. Also, the duration becomes
visible. Also, many more different timecode specifications in other
formats than SRT exist that use such relative timestamps, so allowing
them would make transcoding easier.

But we can leave this for now - having multiple formats does indeed
make parsing harder.


&gt;&gt;<i> We are happy to see the introduction of the magic file identifier for
</I>&gt;&gt;<i> WebVTT which will make it easier to identify the file format. We do not
</I>&gt;&gt;<i> believe the &#8220;FILE&#8221; part of the string is necessary.
</I>&gt;<i>
</I>&gt;<i> I have removed it.
</I>
Thanks. You should also remove the text &quot;, or the seventh character is
neither a U+0020 SPACE character nor a U+0009 CHARACTER TABULATION
(tab) character,&quot; from step 7 of the parsing, since such a seventh
character does not need to exist at all.


&gt;&gt;<i> However, we recommend to also introduce a format version number that the
</I>&gt;&gt;<i> file adheres to, e.g. &#8220;WEBVTT 0.7&#8221;.
</I>&gt;<i>
</I>&gt;<i> Version numbers are an antipattern on the Web, so I have not added one.
</I>
We can have it underneath the file magic in another line of the header
now where the metadata will be (or will be when we make V2 of the
format ;-), so that's fine.


&gt;&gt;<i> It can also help identify proprietary standard metadata sets as used by
</I>&gt;&gt;<i> a specific company, such as &#8220;WEBVTT 0.7 ABC-meta1&#8221; which could signify
</I>&gt;&gt;<i> that the file adheres to WEBVTT 0.7 format specification with the
</I>&gt;&gt;<i> ABC-meta1 metadata schema.
</I>&gt;<i>
</I>&gt;<i> If we add metadata, then that can be handled just by having the metadata
</I>&gt;<i> include that information itself.
</I>
Yes, that's right and it's also a good enough solution.


&gt;<i> I've adjusted the text in the spec to more clearly require that
</I>&gt;<i> line-breaking follow normal CSS rules but with the additional requirement
</I>&gt;<i> that there not be overflow, which is what I had intended.
</I>
Ah, ok. Thanks for clarifying.


&gt;&gt;<i> 1. Pop-on/paint-on/roll-up support
</I>&gt;&gt;<i>
</I>[..]
&gt;&gt;<i> For roll-up captions, individual lines of captions are presented
</I>&gt;&gt;<i> successively with older lines moving up a line to make space for new
</I>&gt;&gt;<i> lines underneath. Assuming we understand the WebVTT rendering rules
</I>&gt;&gt;<i> correctly, WebVTT would identify each of these lines as an individual,
</I>&gt;&gt;<i> but time-overlapping cue with the other cues. As more cues are created
</I>&gt;&gt;<i> and overlap in time, newer cues are added below the currently visible
</I>&gt;&gt;<i> ones and move the currently visible ones up, basically creating a
</I>&gt;&gt;<i> roll-up effect. If this is a correct understanding, then this is an
</I>&gt;&gt;<i> acceptable means of supporting roll-up captions.
</I>&gt;<i>
</I>&gt;<i> I am not aware of anything currently in the WebVTT specification which
</I>&gt;<i> will cause a cue to move after it has been placed on the video, so I do
</I>&gt;<i> not believe this is a correct understanding.
</I>
Hmm, this is a problem. Because text grows generally by adding more
lines underneath a given one. If we don't allow changing positions of
captions, then we cannot move text up when another cue is added in
exactly the same position (typically the bottom center of the video
viewport). Roll-up is very typical on TV, in particular for everything
that is live captioned. Marking it up with text repetitions in
subsequent cues is a very bad hack for trying to get roll-up
functionality like this:

00:00.000 --&gt; 00:01.000
one

00:01.000 --&gt; 00:03.000
one
two

00:03.000 --&gt; 00:05.000
two
three

So, I'd prefer if we specified it such that a cue can move out of the
way if another cue is rendered in the same location - up for
horizontal rendering, left for vertical rendering, and right for
vertical-ltr rendering. If it drops off the top or sides of the
viewport by doing so, well that's an author's error.


&gt;<i> However, you can always have a cue be replaced by a cue with the same text
</I>&gt;<i> but on a higher line, if you're willing to do some preprocessing on the
</I>&gt;<i> subtitle file. It won't be a smoothly animated scroll, but it would work.
</I>&gt;<i>
</I>&gt;<i> If there is convincing evidence that this kind of subtitle is used on the
</I>&gt;<i> Web, though, we can support it more natively. So far I've only seen it in
</I>&gt;<i> legacy scenarios that do not really map to expected WebVTT use cases.
</I>
It's been used in live Web captioning scenarios. For example, the live
captioning that Google used at Google I/O was provided by StreamText
and their captions are provided as paint-on with text growing
underneath. See <A HREF="http://streamtext.net/demos/video-captions.aspx">http://streamtext.net/demos/video-captions.aspx</A> for an
example. I'll take a guess that there are many other services that do
it in a similar fashion.


&gt;<i> For supporting those legacy scenarios, you need script anyway (to handle,
</I>&gt;<i> e.g., backspace and moving the cursor). If you have script, doing
</I>&gt;<i> scrolling is possible either by moving the cue, or by not using the
</I>&gt;<i> default UA rendering of the cues at all and doing it manually (e.g. using
</I>&gt;<i> &lt;div&gt;s or &lt;canvas&gt;).
</I>
Complex editing effects such as backspace and cursor display and
moving the cursor around are not things that are used in live webcast
captioning scenarios, so I am not worried about replicating them. But
the addition of caption cues underneath existing displayed cues and
moving existing cues up is important. Further, it would make sense to
have a limit on the number of scrollings that are possible such that a
previously moved up caption cue is only moved up for a specified
limited number of lines (e.g. max 4 lines).


&gt;&gt;<i> Finally, for paint-on captions, individual letters or words are
</I>&gt;&gt;<i> displayed successively on screen. WebVTT supports this functionality
</I>&gt;&gt;<i> with the cue timestamps &lt;xx:xx:xx.xxx&gt;, which allows to specify
</I>&gt;&gt;<i> characters or words to appear with a delay from within a cue. This
</I>&gt;&gt;<i> essentially realizes paint-on captions. Is this correct?
</I>&gt;<i>
</I>&gt;<i> Yes.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> (Note that we suggest using relative timestamps inside cues to make this
</I>&gt;&gt;<i> feature more usable.)
</I>&gt;<i>
</I>&gt;<i> It makes it modestly easier to do by hand, but hand-authoring a &quot;paint-on&quot;
</I>&gt;<i> style caption seems like a world of pain regardless of the timestamp
</I>&gt;<i> format we end up using, so I'm not sure it's a good argument for
</I>&gt;<i> complicating the syntax with a second timestamp format.
</I>
Fair enough. Though I think we may want to add this feature in the future.


&gt;&gt;<i> As far as we understand, you can currently address all cues through
</I>&gt;&gt;<i> ::cue and you can address a cue part through ::cue-part(&lt;voice&gt; ||
</I>&gt;&gt;<i> &lt;part&gt; || &lt;position&gt; || &lt;future-compatibility&gt;). However, if we
</I>&gt;&gt;<i> understand correctly, it doesn&#8217;t seem to be possible to address an
</I>&gt;&gt;<i> individual cue through CSS, even though cues have individual
</I>&gt;&gt;<i> identifiers. This is either an oversight or a misunderstanding on our
</I>&gt;&gt;<i> parts. Can you please clarify how it is possible to address an
</I>&gt;&gt;<i> individual cue through CSS?
</I>&gt;<i>
</I>&gt;<i> I've made the ID referencable from the ::cue() selector argument as an ID
</I>&gt;<i> on the anonymous root element.
</I>
Excellent, thanks.


&gt;&gt;<i> Our experience with automated caption creation and positioning on
</I>&gt;&gt;<i> YouTube indicates that it is almost impossible to always place the
</I>&gt;&gt;<i> captions out of the way of where a user may be interested to look at. We
</I>&gt;&gt;<i> therefore allow users to dynamically move the caption rendering area to
</I>&gt;&gt;<i> a different viewport position to reveal what is underneath. We recommend
</I>&gt;&gt;<i> such drag-and-drop functionality also be made available for TimedTrack
</I>&gt;&gt;<i> captions on the Web, especially when no specific positioning information
</I>&gt;&gt;<i> is provided.
</I>&gt;<i>
</I>&gt;<i> I've added text to explicitly allow this.
</I>
OK.


&gt;<i> On Sun, 23 Jan 2011, Glenn Maynard wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It should be possible to specify language per-cue, or better, per block
</I>&gt;&gt;<i> of text mid-cue. &#160;Subtitles making use of multiple languages are common,
</I>&gt;&gt;<i> and it should be possible to apply proper font selection and word
</I>&gt;&gt;<i> wrapping to all languages in use, not just the primary language.
</I>&gt;<i>
</I>&gt;<i> It's not clear to me that we need language information to apply proper
</I>&gt;<i> font selection and word wrapping, since CSS doesn't do it.
</I>
How would we mark up mid-cue text with a different language than the
text around it? Directionality can be solved with a UTF-8 character,
so the language display should be fine. But I am worried about the
case where we use WebVTT for &quot;descriptions&quot; and a screen reader is
supposed to read out the text. It needs to choose the correct language
model to read out the cue text and it will only get that with language
markup.


&gt;&gt;<i> When both English subtitles and Japanese captions are on screen, it
</I>&gt;&gt;<i> would be very bad to choose a Chinese font for the Japanese text, and
</I>&gt;&gt;<i> worse to choose a Western font and use it for everything, even if
</I>&gt;&gt;<i> English is the predominant language in the file.
</I>&gt;<i>
</I>&gt;<i> Can't you get around this using explicit styles, e.g. against classes?
</I>&gt;<i> Unless this really is going to be a common problem, I'm not particularly
</I>&gt;<i> concerned about it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, 24 Jan 2011, Philip J&#30450;genstedt wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Multi-languaged subtitles/captions seem to be extremely uncommon,
</I>&gt;&gt;<i> unsurprisingly, since you have to understand all the languages to be
</I>&gt;&gt;<i> able to read them.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The case you mention isn't a problem, you just specify Japanese as the
</I>&gt;&gt;<i> main language.
</I>&gt;<i>
</I>&gt;<i> Indeed.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> There are a few other theoretical cases:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Multi-language CJK captions. I've never seen this, but outside of
</I>&gt;&gt;<i> captioning, it seems like the foreign script is usually transcribed to
</I>&gt;&gt;<i> the native script (e.g. writing Japanese names with simplified Chinese
</I>&gt;&gt;<i> characters).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Use of Japanese or Chinese words in a mostly non-CJK subtitles. This
</I>&gt;&gt;<i> would make correct glyph selection impossible, but I've never seen it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Voice synthesis of e.g. mixed English/French captions. Given that this
</I>&gt;&gt;<i> would only be useful to be people who know both languages, it seem not
</I>&gt;&gt;<i> worth complicating the format for.
</I>&gt;<i>
</I>&gt;<i> Agreed on all fronts.
</I>
I disagree with the third case. Many people speak more than one
language and even if they don't speak the language that is in use in a
cue, it is still bad to render it in using the wrong language model,
in particular if it is rendered by a screen reader. We really need a
mechanism to attach a language marker to a cue segment.


&gt;&gt;<i> Do you have any examples of real-world subtitles/captions that would
</I>&gt;&gt;<i> benefit from more fine-grained language information?
</I>&gt;<i>
</I>&gt;<i> This kind of information would indeed be useful.
</I>
Note that I'm not so much worried about captions and subtitles here,
but rather worried about audio descriptions as rendered from cue text
descriptions.

Glenn may have a different opinion on mixed language subtitles/captions though.


&gt;<i> On Mon, 24 Jan 2011, Glenn Maynard wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> They're very common in anime fansubs:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://img339.imageshack.us/img339/2681/screenshotgg.jpg">http://img339.imageshack.us/img339/2681/screenshotgg.jpg</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The text on the left is a transcription, the top is a transliteration,
</I>&gt;&gt;<i> and the bottom is a translation.
</I>&gt;<i>
</I>&gt;<i> Aren't these three separate text tracks?
</I>
I would think they are three different cues, but not necessarily three
different tracks.


&gt;&gt;<i> I'm pretty sure I've also seen cases of translation notes mixing
</I>&gt;&gt;<i> languages within the same caption, eg. &quot;jinja (&#32449;&#28853;&#12382;): shrine&quot;, but
</I>&gt;&gt;<i> it's less common and I don't have an example handy.
</I>&gt;<i>
</I>&gt;<i> Mixing one CJK language with one non-CJK language seems fine. That should
</I>&gt;<i> always work, assuming you specify good fonts in the CSS.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; The case you mention isn't a problem, you just specify Japanese as the
</I>&gt;&gt;<i> &gt; main language. There are a few other theoretical cases:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Then you're indicating that English text is Japanese, which I'd expect
</I>&gt;&gt;<i> to cause UAs to render everything with a Japanese font. &#160;That's what
</I>&gt;&gt;<i> happens when I load English text in Firefox and force SJIS: everything
</I>&gt;&gt;<i> is rendered in MS PGothic. &#160;That's probably just what Japanese users
</I>&gt;&gt;<i> want for English text mixed in with Japanese text, too--but it's
</I>&gt;&gt;<i> generally not what English users want with the reverse.
</I>&gt;<i>
</I>&gt;<i> I don't understand why we can't have good typography for CJK and non-CJK
</I>&gt;<i> together. Surely there are fonts that get both right?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, 24 Jan 2011, Philip J&#30450;genstedt wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My main point here is that the use cases are so marginal. If there were
</I>&gt;&gt;<i> more compelling ones, it's not hard to support intra-cue language
</I>&gt;&gt;<i> settings using syntax like &lt;lang en&gt;bla&lt;/lang&gt; or similar.
</I>&gt;<i>
</I>&gt;<i> Indeed.
</I>

A &lt;lang&gt; tag would indeed be useful.


&gt;<i> On Mon, 24 Jan 2011, Glenn Maynard wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here's one that I think was done very well, rendered statically to make
</I>&gt;&gt;<i> sure we're all seeing the same thing:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://zewt.org/~glenn/multiple%20conversation%20example.mpg">http://zewt.org/~glenn/multiple%20conversation%20example.mpg</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The results are pretty straightforward. &#160;One always stays on top, one
</I>&gt;&gt;<i> always stays on the bottom, and most of the time the spacing between the
</I>&gt;&gt;<i> two is correct--the normal distance the UA uses between two vertical
</I>&gt;&gt;<i> captions (which would be lost by specifying the line height explicitly).
</I>&gt;&gt;<i> Combined with the separate coloring (which is already possible, of
</I>&gt;&gt;<i> course), it's possible to read both conversations and intuitively track
</I>&gt;&gt;<i> which is which, and it's also very easy to just pick one or the other to
</I>&gt;&gt;<i> read.
</I>&gt;<i>
</I>&gt;<i> As far as I can tell, the WebVTT algorithm would handle this case pretty
</I>&gt;<i> well.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> One example of how this can be tricky: at 0:17, a caption on the bottom
</I>&gt;&gt;<i> wraps and takes two lines, which then pushes the line at 0:19 upward
</I>&gt;&gt;<i> (that part's simple enough). &#160;If instead the top part had appeared
</I>&gt;&gt;<i> first, the renderer would need to figure out in advance to push it
</I>&gt;&gt;<i> upwards, to make space for the two-line caption underneith it.
</I>&gt;&gt;<i> Otherwise, the captions would be forced to switch places.
</I>&gt;<i>
</I>&gt;<i> Right, without lookahead I don't know how you'd solve it. With lookahead
</I>&gt;<i> things get pretty dicey pretty quickly.
</I>
If we introduced the scrolling behaviour that I described above where
cues that are rendered into the same location as a previous still
active cue push that previous cue up, we get this behaviour covered
too.


&gt;<i> On Wed, 9 Feb 2011, Silvia Pfeiffer wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We're trying to avoid the need for multiple transcodings and are trying
</I>&gt;&gt;<i> to achieve something like the following pipeline: broadcast captions -&gt;
</I>&gt;&gt;<i> transcode to WebVTT -&gt; show in browser -&gt; transcode to broadcast devices
</I>&gt;&gt;<i> -&gt; show
</I>&gt;<i>
</I>&gt;<i> Why not just do:
</I>&gt;<i>
</I>&gt;<i> &#160; broadcast captions -&gt; transcode to WebVTT -&gt; show in browser
</I>&gt;<i>
</I>&gt;<i> ...for browsers and:
</I>&gt;<i>
</I>&gt;<i> &#160; broadcast captions -&gt; show
</I>&gt;<i>
</I>&gt;<i> ...for legacy broadcast devices?
</I>
Eventually, we will want to get rid of the legacy format and just
deliver WebVTT, but they still need to display as though they came
from the original broadcast caption format for contractual reasons.


&gt;<i> In any case the amount of legacy broadcast captions pales in comparison to
</I>&gt;<i> the volume of new captions we will see for the Web. I'm not really
</I>&gt;<i> convinced that legacy broadcast captions are an important concern here.
</I>
There still exists a large amount of legacy broadcast captions and
broadcasters are concerned about their legacy content.


&gt;&gt;<i> What is the argument against using &lt;u&gt; in captions?
</I>&gt;<i>
</I>&gt;<i> What is the argument _for_ using &lt;u&gt; in captions? We don't add features
</I>&gt;<i> due to a lack of reasons not to. We add features due to a plethora of
</I>&gt;<i> reasons to do so.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; [ foolip suggests using multiple cues to do blinking ]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But from a captioning/subtitling point of view it's probably hard to
</I>&gt;&gt;<i> convert that back to blinking text, since we've just lost the semantic
</I>&gt;&gt;<i> by ripping it into multiple cues (and every program would use different
</I>&gt;&gt;<i> ways of doing this).
</I>&gt;<i>
</I>&gt;<i> I do not think round-tripping legacy broadcast captions through WebVTT is
</I>&gt;<i> an important use case. If that is something that we should support, then
</I>&gt;<i> we should first establish why it is an important use case, and then
</I>&gt;<i> reconsider WebVTT within that context, rather than adding features to
</I>&gt;<i> handle it piecemeal.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> I guess what we are discovering is that we can define the general format
</I>&gt;&gt;<i> of WebVTT for the Web, but that there may be an additional need to
</I>&gt;&gt;<i> provide minimum implementation needs (a &quot;profile&quot; if you want - as much
</I>&gt;&gt;<i> as I hate this word).
</I>&gt;<i>
</I>&gt;<i> Personally I have nothing against the word &quot;profile&quot;, but I do have
</I>&gt;<i> something against providing for &quot;minimum implemenatation needs&quot;.
</I>&gt;<i>
</I>&gt;<i> Interoperability means everything works the same everywhere.
</I>
Yeah, what I meant was that we can create CSS sets that e.g. equate to
the needs of broadcast captions and thus provide a &quot;broadcast caption
profile&quot;. Any application (also non-browsers) would then just need to
support that subset of CSS and not the full CSS functionality to
support that profile.


&gt;<i> On Thu, 10 Feb 2011, Silvia Pfeiffer wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Further discussions at Google indicate that it would be nice to make
</I>&gt;&gt;<i> more components optional. Can we have something like this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; [[h*:]mm:]ss[.[d[c[m]]] &#160;| s*[.d[c[m]]]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Examples:
</I>&gt;&gt;<i> &#160; &#160; 23 &#160;= 23 seconds
</I>&gt;&gt;<i> &#160; &#160; 23.2 &#160;= 23 sec, 1 decisec
</I>&gt;&gt;<i> &#160; &#160; 1:23.45 &#160; = 1 min, 23 sec, 45 centisec
</I>&gt;&gt;<i> &#160; &#160; 123.456 &#160;= 123 sec, 456 millisec
</I>&gt;<i>
</I>&gt;<i> Currently the syntax is [h*:]mm:ss.sss; what's the advantage of making
</I>&gt;<i> this more complicated? It's not like most subtitled clips will be shorter
</I>&gt;<i> than a minute. Also, why would we want to support multiple redundant ways
</I>&gt;<i> of expressing the same time? (e.g. 01:00.000 and 60.000)
</I>&gt;<i>
</I>&gt;<i> Readability of VTT files seems like it would be helped by consistency,
</I>&gt;<i> which suggests using the same format everywhere, as much as possible.
</I>
Yup, fair enough.

Cheers,
Silvia.
</PRE>

































































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031921.html">[whatwg] &lt;banner&gt; as a dedicated tag
</A></li>
	<LI>Next message: <A HREF="074202.html">[whatwg] WebVTT feedback (was Re: Video feedback)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31928">[ date ]</a>
              <a href="thread.html#31928">[ thread ]</a>
              <a href="subject.html#31928">[ subject ]</a>
              <a href="author.html#31928">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
