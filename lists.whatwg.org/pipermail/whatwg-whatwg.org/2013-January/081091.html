<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [Notifications] Constructor should not have side	effects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BNotifications%5D%20Constructor%20should%20not%20have%20side%0A%09effects&In-Reply-To=%3CCABZUbM01-dXQv0k7g9uwL%3DaNDmxDTFB76rRguoic7TK6oD3dyA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081070.html">
   <LINK REL="Next"  HREF="081066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [Notifications] Constructor should not have side	effects</H1>
<!--htdig_noindex-->
    <B>Garrett Smith</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BNotifications%5D%20Constructor%20should%20not%20have%20side%0A%09effects&In-Reply-To=%3CCABZUbM01-dXQv0k7g9uwL%3DaNDmxDTFB76rRguoic7TK6oD3dyA%40mail.gmail.com%3E"
       TITLE="[whatwg] [Notifications] Constructor should not have side	effects">dhtmlkitchen at gmail.com
       </A><BR>
    <I>Tue Jan 29 23:08:05 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081070.html">[whatwg] [Notifications] Constructor should not have	side	effects
</A></li>
        <LI>Next message: <A HREF="081066.html">[whatwg] [Notifications] Constructor should not have side	effects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81091">[ date ]</a>
              <a href="thread.html#81091">[ thread ]</a>
              <a href="subject.html#81091">[ subject ]</a>
              <a href="author.html#81091">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 1/29/13, Bjoern Hoehrmann &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">derhoermi at gmx.net</A>&gt; wrote:
&gt;<i> * Ryosuke Niwa wrote:
</I>&gt;&gt;<i>On Jan 29, 2013, at 10:26 AM, Elliott Sprehn &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">esprehn at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> For example you can do var request = new XMLHttp( .... ) at the start of
</I>&gt;&gt;&gt;<i> a
</I>&gt;&gt;&gt;<i> function, but then later decide you didn't want to send the request, and
</I>&gt;&gt;&gt;<i> never call send().
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Is that even a valid use case? It seems dubious to instantiate a class
</I>&gt;&gt;<i>named &quot;request&quot; and then not send a request.
</I>&gt;<i>
</I>I think not.

I can make an email &quot;response&quot;, hang onto it, and consider sending it
out tomorrow. Programmatically speaking, it holds to. That figurative
&quot;callback&quot; might be &quot;email review done&quot; and the handling of that would
be to &quot;send&quot; it.

For example, Java's ServletResponse is designed so that one can be
used and then other things done with it (request dispatcher, filter
chains, etc) before (or if) it is sent.

But that seems to be straying slightly off topic.

&gt;<i> `XMLHttpRequest` tries to encapsulate request, response, user agent, XML
</I>&gt;<i> parser, and other things into a single object; that's rather dubious in-
</I>&gt;<i> deed, but not the calling code's fault. A more typical object design is
</I>&gt;<i> the separation I've just mentioned, in Perl for instance you would use a
</I>&gt;<i> LWP::UserAgent object where you might set user agent properties like the
</I>&gt;<i> User-Agent header or whether the user agent should follow redirects au-
</I>&gt;<i> tomatically, and then use that object for many requests. You might pass
</I>&gt;<i> it even to other objects in case they need to make any requests on your
</I>&gt;<i> code's behalf; and if they don't need to after all, it's quite normal to
</I>&gt;<i> dispose of the object without having made any requests.
</I>
Ah, API design.

Passing in an object to construct another object is common in
Javascript, too. Moreso for program code than W3C APIs -- but that can
change. I made the example for how XMLHttpRequest could have been
designed and indeed there are libraries that use such approach.

The Notifications API seems to have room for improvement. I'm not
discounting the case it fills, but the OP had a good point about the
API design itself.

Who is intimately familiar with that API can produce a nicer API
design that addresses the side effects and usage pattern?
-- 
Garrett
Twitter: @xkit
personx.tumblr.com

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081070.html">[whatwg] [Notifications] Constructor should not have	side	effects
</A></li>
	<LI>Next message: <A HREF="081066.html">[whatwg] [Notifications] Constructor should not have side	effects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81091">[ date ]</a>
              <a href="thread.html#81091">[ thread ]</a>
              <a href="subject.html#81091">[ subject ]</a>
              <a href="author.html#81091">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
