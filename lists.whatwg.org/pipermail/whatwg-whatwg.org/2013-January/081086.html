<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] proposal: Add support for masking to canvas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20proposal%3A%20Add%20support%20for%20masking%20to%20canvas&In-Reply-To=%3CCAGN7qDAdkRTH0x7uQMrD5%2BdRR6HimboQTOFux9hg28mryRW5cw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081085.html">
   <LINK REL="Next"  HREF="081087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] proposal: Add support for masking to canvas</H1>
<!--htdig_noindex-->
    <B>Rik Cabanier</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20proposal%3A%20Add%20support%20for%20masking%20to%20canvas&In-Reply-To=%3CCAGN7qDAdkRTH0x7uQMrD5%2BdRR6HimboQTOFux9hg28mryRW5cw%40mail.gmail.com%3E"
       TITLE="[whatwg] proposal: Add support for masking to canvas">cabanier at gmail.com
       </A><BR>
    <I>Tue Jan 29 21:37:12 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081085.html">[whatwg] proposal: Add support for masking to canvas
</A></li>
        <LI>Next message: <A HREF="081087.html">[whatwg] proposal: Add support for masking to canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81086">[ date ]</a>
              <a href="thread.html#81086">[ thread ]</a>
              <a href="subject.html#81086">[ subject ]</a>
              <a href="author.html#81086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I want to get it right! :-)
After looking at the CG API, maybe imageSmoothing could be a part of the
mask too.

Third try:

enum CanvasMaskType { luminosity, alpha};
dictionary MaskOptions {

CanvasImageSource image;
unrestricted double sx;
unrestricted double sy;
unrestricted double sw;
unrestricted double sh;
unrestricted double dx;
unrestricted double dy;
unrestricted double dw;
unrestricted double dh;
CanvasMaskType maskType = &quot;luminosity&quot;;
boolean invert = false;
boolean clipToMask = true;
boolean imageSmoothingEnabled = true;

}

void maskImage(MaskOptions options);
void resetMask();

If not specified, the dw and dh arguments must default to the values of sw
and sh, interpreted such that one CSS pixel in the image is treated as one
unit in thescratch bitmap's coordinate space. If the sx, sy, sw, and sh
arguments are omitted, they must default to 0, 0, the image's intrinsic
width in image pixels, and the image's intrinsic height in image pixels,
respectively.


On Tue, Jan 29, 2013 at 9:23 PM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:

&gt;<i> On 1/30/13 12:13 AM, Rik Cabanier wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> ah, sorry. I looked at the dictionary for hitregions
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sounds like we should consider fixing this hitregions thing whatever it is.
</I>&gt;<i>
</I>&gt;<i>          optional unrestricted double sx;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> That's not actually valid WebIDL, with the &quot;optional&quot;.
</I>&gt;<i>
</I>&gt;<i> And that's because all dictionary members in WebIDL are always optional to
</I>&gt;<i> start with.
</I>&gt;<i>
</I>&gt;<i> So just dropping all those &quot;optional&quot; should do the trick.
</I>&gt;<i>
</I>&gt;<i> Note that this does mean that for things you really must have the prose
</I>&gt;<i> needs to specify throwing if they're not present.
</I>

I would specify the same language as for drawImage:
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-drawimage">http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-drawimage</A>

Thanks for the help!

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081085.html">[whatwg] proposal: Add support for masking to canvas
</A></li>
	<LI>Next message: <A HREF="081087.html">[whatwg] proposal: Add support for masking to canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81086">[ date ]</a>
              <a href="thread.html#81086">[ thread ]</a>
              <a href="subject.html#81086">[ subject ]</a>
              <a href="author.html#81086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
