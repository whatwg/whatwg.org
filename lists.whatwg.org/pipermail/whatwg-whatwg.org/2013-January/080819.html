<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Need to define same-origin policy for WebIDL operations/getters/setters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Need%20to%20define%20same-origin%20policy%20for%20WebIDL%0A%20operations/getters/setters&In-Reply-To=%3CPine.LNX.4.64.1301080709410.12992%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080817.html">
   <LINK REL="Next"  HREF="080823.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Need to define same-origin policy for WebIDL operations/getters/setters</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Need%20to%20define%20same-origin%20policy%20for%20WebIDL%0A%20operations/getters/setters&In-Reply-To=%3CPine.LNX.4.64.1301080709410.12992%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] Need to define same-origin policy for WebIDL operations/getters/setters">ian at hixie.ch
       </A><BR>
    <I>Mon Jan  7 23:16:54 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="080817.html">[whatwg] Need to define same-origin policy for WebIDL	operations/getters/setters
</A></li>
        <LI>Next message: <A HREF="080823.html">[whatwg] Need to define same-origin policy for WebIDL	operations/getters/setters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80819">[ date ]</a>
              <a href="thread.html#80819">[ thread ]</a>
              <a href="subject.html#80819">[ subject ]</a>
              <a href="author.html#80819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 8 Jan 2013, Boris Zbarsky wrote:
&gt;<i> On 1/8/13 1:42 AM, Boris Zbarsky wrote:
</I>&gt;<i> &gt;On 1/7/13 11:28 PM, Ian Hickson wrote:
</I>&gt;<i> &gt; &gt; The check is the same -- if the Document that is the &quot;this&quot; to which 
</I>&gt;<i> &gt; &gt; the property is being applied doesn't match the origin of the script 
</I>&gt;<i> &gt; &gt; that is doing the applying, throw SecurityError.
</I>&gt;<i> 
</I>&gt;<i> Actually, that's not enough.  You have to security-check arguments too. 
</I>&gt;<i> Otherwise this:
</I>&gt;<i> 
</I>&gt;<i>   document.createTreeWalker(crossFrameDoc, etc);
</I>&gt;<i> 
</I>&gt;<i> would be bad.  (Note that right now the DOM spec fails to handle this, 
</I>&gt;<i> which is about what I would expect out of people creating APIs, which is 
</I>&gt;<i> why I would really prefer we define this on a low level where people 
</I>&gt;<i> can't screw up by forgetting it.)
</I>
I don't know about Document, but I can definitely think of APIs where it 
makes sense to be passing Window objects from other origins. (For example, 
one could imagine a PortCollection analogue for Window.postMessage() where 
you push the destination Window objects into an opaque object and then 
have the browser iterate over them.)

I would be fine with an annotation on Document and Window that says that 
you can't pass them in as arguments when they're cross-origin except if 
the method's argument has itself been annotated with a &quot;I know what I'm 
doing&quot; marker. (Dunno how this would work with Location and Storage.)

But if there's only one API that takes any of these four object types 
currently (I couldn't find any that took Document or Window in the HTML 
spec in a cursory look) then maybe it's not worth the bother. Wack a mole 
isn't _so_ bad if it's one mole a decade.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080817.html">[whatwg] Need to define same-origin policy for WebIDL	operations/getters/setters
</A></li>
	<LI>Next message: <A HREF="080823.html">[whatwg] Need to define same-origin policy for WebIDL	operations/getters/setters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80819">[ date ]</a>
              <a href="thread.html#80819">[ thread ]</a>
              <a href="subject.html#80819">[ subject ]</a>
              <a href="author.html#80819">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
