<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [Notifications] Constructor should not have side	effects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BNotifications%5D%20Constructor%20should%20not%20have%20side%0A%09effects&In-Reply-To=%3CCABZUbM0n-C9u8juPH%3DcuDwJFqpSajbrbMYVSSJ%3DTtVPJm90DUQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="081091.html">
   <LINK REL="Next"  HREF="081054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [Notifications] Constructor should not have side	effects</H1>
<!--htdig_noindex-->
    <B>Garrett Smith</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5BNotifications%5D%20Constructor%20should%20not%20have%20side%0A%09effects&In-Reply-To=%3CCABZUbM0n-C9u8juPH%3DcuDwJFqpSajbrbMYVSSJ%3DTtVPJm90DUQ%40mail.gmail.com%3E"
       TITLE="[whatwg] [Notifications] Constructor should not have side	effects">dhtmlkitchen at gmail.com
       </A><BR>
    <I>Tue Jan 29 15:58:28 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="081091.html">[whatwg] [Notifications] Constructor should not have side	effects
</A></li>
        <LI>Next message: <A HREF="081054.html">[whatwg] [Notifications] Constructor should not have side	effects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81066">[ date ]</a>
              <a href="thread.html#81066">[ thread ]</a>
              <a href="subject.html#81066">[ subject ]</a>
              <a href="author.html#81066">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 1/29/13, Elliott Sprehn &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">esprehn at gmail.com</A>&gt; wrote:
&gt;<i> On Tue, Jan 29, 2013 at 10:38 AM, Jake Archibald
</I>&gt;<i> &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jaffathecake at gmail.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 29 January 2013 05:36, Charles McCathie Nevile &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">chaals at yandex-team.ru</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i> &gt;&gt; Exactly. And if we designed XMLHttpRequest from scratch it would have
</I>&gt;&gt;<i> them
</I>&gt;&gt;<i> &gt;&gt; too.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Really? This doesn't seem like a good idea, so I'd be interested to
</I>&gt;&gt;<i> &gt; know
</I>&gt;&gt;<i> &gt; why. Is there an explanation laid out somewhere?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Why doesn't it seem like a good idea? Is there a use-case for creating
</I>&gt;&gt;<i> a Notification/XMLHttpRequest/WebSocket/EventSource without performing
</I>&gt;&gt;<i> their action?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes, because decoupling allocating from action lets you preallocate objects
</I>&gt;<i> to perform a task in advance of executing the task. It lets you structure
</I>&gt;<i> your code without having to worry about when something executes, and it
</I>&gt;<i> lets you inspect the object in the web inspector without having the verb
</I>&gt;<i> execute first.
</I>&gt;<i>
</I>&gt;<i> For example you can do var request = new XMLHttp( .... ) at the start of a
</I>&gt;<i> function, but then later decide you didn't want to send the request, and
</I>&gt;<i> never call send(). It also lets you create clean abstractions and layers so
</I>&gt;<i> one library may create the notification, but another one may eventually
</I>&gt;<i> show it. With notifications I can't look at the properties of a
</I>&gt;<i> notification in the web inspector without having it show on me...
</I>&gt;<i>
</I>&gt;<i> Constructors are not verbs. new Notification doesn't mean &quot;show&quot;, and new
</I>&gt;<i> XMLHttpRequest doesn't mean &quot;send&quot;.
</I>&gt;<i>
</I>Idiomatically.  That's the only reason for constructors. And even
there, they can be replaced by 'create' type methods.

When constructor is undesirable or inelegant, then the API can hide
the details of the construction and be designed with a function. For
example:-

var callbacks = {
  load : function(){},
  abort : function() {},
  timeout : function() {}
};

makeHttpReq( url, callbacks );

In the case of the HTTP Request API, could it not have been specified
in this manner, and for a codified standard, exposed the
XMLHttpRequest constructor?

 var a = new Image();
 a.onload = f1;
 a.onerror = f2;
 downloadImage(src);

On the case of Notifications, it seems that the argument is not if
there is a use case, but about the semantics for realizing it. What do
you think?
-- 
Garrett
Twitter: @xkit

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="081091.html">[whatwg] [Notifications] Constructor should not have side	effects
</A></li>
	<LI>Next message: <A HREF="081054.html">[whatwg] [Notifications] Constructor should not have side	effects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81066">[ date ]</a>
              <a href="thread.html#81066">[ thread ]</a>
              <a href="subject.html#81066">[ subject ]</a>
              <a href="author.html#81066">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
