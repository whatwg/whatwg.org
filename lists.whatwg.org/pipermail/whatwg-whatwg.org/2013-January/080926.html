<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Canvas 2D memory management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%202D%20memory%20management&In-Reply-To=%3CCAOp6jLZHobhSxsX6phrWRmiK0ZjWmQ_R3xGmQ5dak5iVedPKXA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080912.html">
   <LINK REL="Next"  HREF="080927.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Canvas 2D memory management</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Canvas%202D%20memory%20management&In-Reply-To=%3CCAOp6jLZHobhSxsX6phrWRmiK0ZjWmQ_R3xGmQ5dak5iVedPKXA%40mail.gmail.com%3E"
       TITLE="[whatwg] Canvas 2D memory management">robert at ocallahan.org
       </A><BR>
    <I>Fri Jan 11 14:36:00 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="080912.html">[whatwg] Canvas 2D memory management
</A></li>
        <LI>Next message: <A HREF="080927.html">[whatwg] Canvas 2D memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80926">[ date ]</a>
              <a href="thread.html#80926">[ thread ]</a>
              <a href="subject.html#80926">[ subject ]</a>
              <a href="author.html#80926">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sat, Jan 12, 2013 at 6:41 AM, Rik Cabanier &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">cabanier at gmail.com</A>&gt; wrote:

&gt;<i> Some of you concerns with memory management could be addressed with
</I>&gt;<i> WeakMaps.
</I>&gt;<i> Basically, you can put all your images in a WeakMap and during the draw
</I>&gt;<i> cycle, you pull them out and use them. If they're no longer there, it meant
</I>&gt;<i> that the garbage collector has kicked in to free up memory and you need to
</I>&gt;<i> reload (which will unfortunately cause a jank). I'm unsure how smart the
</I>&gt;<i> garbage collector is because you probably want the items in the WeakMaps to
</I>&gt;<i> be deleted last.
</I>&gt;<i>
</I>
WeakMaps don't work like that. You can only test whether something is in a
WeakMap by looking it up with a key object. If the key object stays alive
and the WeakMap stays alive, then the value must also stay alive. On other
hand, if the key object or the WeakMap have been collected, obviously you
can't do the lookup. So you can't observe whether GC has happened using a
WeakMap. (This is by design.)

Rob
-- 
Jesus called them together and said, &#8220;You know that the rulers of the
Gentiles lord it over them, and their high officials exercise authority
over them. Not so with you. Instead, whoever wants to become great among
you must be your servant, and whoever wants to be first must be your
slave &#8212; just
as the Son of Man did not come to be served, but to serve, and to give his
life as a ransom for many.&#8221; [Matthew 20:25-28]

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080912.html">[whatwg] Canvas 2D memory management
</A></li>
	<LI>Next message: <A HREF="080927.html">[whatwg] Canvas 2D memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80926">[ date ]</a>
              <a href="thread.html#80926">[ thread ]</a>
              <a href="subject.html#80926">[ subject ]</a>
              <a href="author.html#80926">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
