<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;video&gt; ... &lt;script&gt; race condition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20...%20%3Cscript%3E%20race%20condition&In-Reply-To=%3Cop.vvmbpvlksr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073963.html">
   <LINK REL="Next"  HREF="073966.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;video&gt; ... &lt;script&gt; race condition</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20...%20%3Cscript%3E%20race%20condition&In-Reply-To=%3Cop.vvmbpvlksr6mfa%40kirk%3E"
       TITLE="[whatwg] &lt;video&gt; ... &lt;script&gt; race condition">philipj at opera.com
       </A><BR>
    <I>Tue May 17 02:09:21 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="073963.html">[whatwg] &lt;video&gt; ... &lt;script&gt; race condition
</A></li>
        <LI>Next message: <A HREF="073966.html">[whatwg] &lt;video&gt; ... &lt;script&gt; race condition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73964">[ date ]</a>
              <a href="thread.html#73964">[ thread ]</a>
              <a href="subject.html#73964">[ subject ]</a>
              <a href="author.html#73964">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 17 May 2011 10:47:02 +0200, Remy Sharp &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">remy at leftlogic.com</A>&gt; wrote:

&gt;<i> On 17 May 2011, at 09:04, Philip J&#228;genstedt wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Or do you mean a spec bug?
</I>&gt;<i>
</I>&gt;<i> I meant a spec bug :)
</I>
<A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=12664">http://www.w3.org/Bugs/Public/show_bug.cgi?id=12664</A>

Still, I don't think just advocacy is any kind of solution. Given that you  
(the co-author of an HTML5 book) make certain assumptions about the  
outcome of this race condition, it's safe to assume that hoards of web  
developers will do the same.

To target this specific pattern, one hypothetical solution would be to  
special-case the first script that attaches event handlers to a &lt;video&gt;  
element. After it has run, all events that were already fired before the  
script are fired again. However, this seems awfully messy if the script  
also observes readyState or networkState. It might also interfere with  
browsers that use scripts behind the scenes to implement the native  
controls.

Although a kludge, another solution might be to block events from being  
fired until x more bytes of the document have been parsed or it has  
finished loading.

Any other bad ideas?

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073963.html">[whatwg] &lt;video&gt; ... &lt;script&gt; race condition
</A></li>
	<LI>Next message: <A HREF="073966.html">[whatwg] &lt;video&gt; ... &lt;script&gt; race condition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73964">[ date ]</a>
              <a href="thread.html#73964">[ thread ]</a>
              <a href="subject.html#73964">[ subject ]</a>
              <a href="author.html#73964">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
