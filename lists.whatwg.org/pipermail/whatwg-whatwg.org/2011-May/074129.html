<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Unlimited pageStorage for App Cached web pages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Unlimited%20pageStorage%20for%20App%20Cached%20web%20pages&In-Reply-To=%3C4DE3AC33.1060706%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074128.html">
   <LINK REL="Next"  HREF="074138.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Unlimited pageStorage for App Cached web pages</H1>
<!--htdig_noindex-->
    <B>Bjartur Thorlacius</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Unlimited%20pageStorage%20for%20App%20Cached%20web%20pages&In-Reply-To=%3C4DE3AC33.1060706%40gmail.com%3E"
       TITLE="[whatwg] Unlimited pageStorage for App Cached web pages">svartman95 at gmail.com
       </A><BR>
    <I>Mon May 30 07:39:47 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="074128.html">[whatwg] Unlimited pageStorage for App Cached web pages
</A></li>
        <LI>Next message: <A HREF="074138.html">[whatwg] Unlimited pageStorage for App Cached web pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74129">[ date ]</a>
              <a href="thread.html#74129">[ thread ]</a>
              <a href="subject.html#74129">[ subject ]</a>
              <a href="author.html#74129">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>&#222;ann m&#225;n 30.ma&#237; 2011 03:42, skrifa&#240;i Felix Halim:
&gt;<i> Hmm.. yes, I think &quot;unlimited&quot; is a bad word (I just use it because
</I>&gt;<i> currently App Cache quota is unlimited).
</I>&gt;<i>
</I>&gt;<i> Let me explain my need for pageStorage in a different way:
</I>&gt;<i>
</I>&gt;<i> Suppose I have a web page and want to store it in an App Cache. This
</I>&gt;<i> web page requires a few resources (.ccs, .js, images, etc..). But all
</I>&gt;<i> of them are &quot;static&quot; resources. I want to store &quot;dynamic&quot; resources as
</I>&gt;<i> well for that particular page only (not shared). Think of  the dynamic
</I>&gt;<i> resources as &quot;data&quot; that changes from time to time for that particular
</I>&gt;<i> page only. localStorage can be used to store the &quot;dynamic&quot; resources,
</I>&gt;<i> but localStorage has very limited quota and it is shared to the entire
</I>&gt;<i> domain. Different unrelated pages in the same domain will use the
</I>&gt;<i> shared quota!
</I>&gt;<i>    
</I>The following is how I understand your requirements; please correct me 
where correction is due.
You've got two types of resources:

   1. static resources, to be retrieved once and cached indefinitely
   2. dynamic resources, to be updated whenever possible while always
      keeping the last version

The former is easy to achieve, but user agents tend to throw away stale 
versions as to not present outdated information to the user and to save 
storage space.
You want user agents to fetch the latest version whenever possible, but 
keep an old copy for when your servers are unreachable.
&gt;<i> Currently I can &quot;hack&quot; the App Cache to simulate the pageStorage like this:
</I>&gt;<i>
</I>&gt;<i> We can turn one of the .js files &quot;dynamic&quot; by updating the .js file,
</I>&gt;<i> then edit the MANIFEST file a bit, so that the browser re-download
</I>&gt;<i> *ALL* the resources again.  This way, the .js file quota gets in the
</I>&gt;<i> App Cache quota which is currently *UNLIMITED*. But this &quot;hack&quot; is
</I>&gt;<i> very costly, and inconvenient.
</I>&gt;<i>    
</I>5MB ought to be enough for anyone.
If all you want to do is store mutable resources for offline use and 
validate them if possible, but returning the cached entry (or entity) if 
validation is impossible, simply serve the resources with an Expires 
header set to a date in the past. That way caches SHOULD validate the 
response before reusing it, but may reuse it without validation under 
abnormal situations, such as when working offline. Of course, doing this 
for all resources doesn't make sense when storage space is scarce. In 
that case discard  stylesheets, huge videos, heavy graphics other files 
with a high noise to content ratio.*
If your (or your client's) cache doesn't do that already, you're free to 
modify it, or pay someone to do it for you.

*Warning: The result of calculating the noise to content ratio of CSS 
files is undefined.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074128.html">[whatwg] Unlimited pageStorage for App Cached web pages
</A></li>
	<LI>Next message: <A HREF="074138.html">[whatwg] Unlimited pageStorage for App Cached web pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74129">[ date ]</a>
              <a href="thread.html#74129">[ thread ]</a>
              <a href="subject.html#74129">[ subject ]</a>
              <a href="author.html#74129">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
