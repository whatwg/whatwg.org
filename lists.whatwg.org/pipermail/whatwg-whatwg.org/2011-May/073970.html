<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] &lt;video&gt; ... &lt;script&gt; race condition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20...%20%3Cscript%3E%20race%20condition&In-Reply-To=%3CBANLkTim2eR%3D-%3DEn6hDWa%2BVd%2B0JLhxZcxVg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073966.html">
   <LINK REL="Next"  HREF="073971.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] &lt;video&gt; ... &lt;script&gt; race condition</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%3Cvideo%3E%20...%20%3Cscript%3E%20race%20condition&In-Reply-To=%3CBANLkTim2eR%3D-%3DEn6hDWa%2BVd%2B0JLhxZcxVg%40mail.gmail.com%3E"
       TITLE="[whatwg] &lt;video&gt; ... &lt;script&gt; race condition">robert at ocallahan.org
       </A><BR>
    <I>Tue May 17 12:09:21 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="073966.html">[whatwg] &lt;video&gt; ... &lt;script&gt; race condition
</A></li>
        <LI>Next message: <A HREF="073971.html">[whatwg] &lt;video&gt; ... &lt;script&gt; race condition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73970">[ date ]</a>
              <a href="thread.html#73970">[ thread ]</a>
              <a href="subject.html#73970">[ subject ]</a>
              <a href="author.html#73970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, May 17, 2011 at 9:09 PM, Philip J&#228;genstedt &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">philipj at opera.com</A>&gt;wrote:

&gt;<i> To target this specific pattern, one hypothetical solution would be to
</I>&gt;<i> special-case the first script that attaches event handlers to a &lt;video&gt;
</I>&gt;<i> element. After it has run, all events that were already fired before the
</I>&gt;<i> script are fired again. However, this seems awfully messy if the script also
</I>&gt;<i> observes readyState or networkState. It might also interfere with browsers
</I>&gt;<i> that use scripts behind the scenes to implement the native controls.
</I>&gt;<i>
</I>&gt;<i> Although a kludge, another solution might be to block events from being
</I>&gt;<i> fired until x more bytes of the document have been parsed or it has finished
</I>&gt;<i> loading.
</I>&gt;<i>
</I>&gt;<i> Any other bad ideas?
</I>

Sure! For certain kinds of events (&quot;load&quot;, the video events, maybe more),
delay the firing of such events until, say, after DOMContentLoaded has
fired. If you're careful you might be able to make this a strict subset of
the behaviors currently allowed by the spec ... i.e. you're pretending that
your frame, image and video loads simply didn't complete until after
DOMContentLoaded fired in the outer page. That would mean it's compatible
with properly-written legacy content ... if there is any.

Of course I have no idea whether that approach is actually feasible :-). It
obviously isn't compatible with what browsers currently do, so authors
wouldn't want to rely on it for a long time if ever.

Rob
-- 
&quot;Now the Bereans were of more noble character than the Thessalonians, for
they received the message with great eagerness and examined the Scriptures
every day to see if what Paul said was true.&quot; [Acts 17:11]

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073966.html">[whatwg] &lt;video&gt; ... &lt;script&gt; race condition
</A></li>
	<LI>Next message: <A HREF="073971.html">[whatwg] &lt;video&gt; ... &lt;script&gt; race condition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73970">[ date ]</a>
              <a href="thread.html#73970">[ thread ]</a>
              <a href="subject.html#73970">[ subject ]</a>
              <a href="author.html#73970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
