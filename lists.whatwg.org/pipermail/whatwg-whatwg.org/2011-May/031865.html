<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Unlimited pageStorage for App Cached web pages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Unlimited%20pageStorage%20for%20App%20Cached%20web%20pages&In-Reply-To=%3CBANLkTi%3Dv-EHQysvZwL5pRxV2-T7-o6ViBA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031856.html">
   <LINK REL="Next"  HREF="031878.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Unlimited pageStorage for App Cached web pages</H1>
<!--htdig_noindex-->
    <B>Felix Halim</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Unlimited%20pageStorage%20for%20App%20Cached%20web%20pages&In-Reply-To=%3CBANLkTi%3Dv-EHQysvZwL5pRxV2-T7-o6ViBA%40mail.gmail.com%3E"
       TITLE="[whatwg] Unlimited pageStorage for App Cached web pages">felix.halim at gmail.com
       </A><BR>
    <I>Mon May 30 22:44:16 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="031856.html">[whatwg] Unlimited pageStorage for App Cached web pages
</A></li>
        <LI>Next message: <A HREF="031878.html">[whatwg] Unlimited pageStorage for App Cached web pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31865">[ date ]</a>
              <a href="thread.html#31865">[ thread ]</a>
              <a href="subject.html#31865">[ subject ]</a>
              <a href="author.html#31865">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, May 30, 2011 at 10:39 PM, Bjartur Thorlacius
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">svartman95 at gmail.com</A>&gt; wrote:
&gt;<i> The following is how I understand your requirements; please correct me where
</I>&gt;<i> correction is due.
</I>&gt;<i> You've got two types of resources:
</I>&gt;<i>
</I>&gt;<i> &#160;1. static resources, to be retrieved once and cached indefinitely
</I>&gt;<i> &#160;2. dynamic resources, to be updated whenever possible while always
</I>&gt;<i> &#160; &#160; keeping the last version
</I>
The dynamic resources only updated if the user visit the particular
app cached web-page.

Remember that the dynamic resources I'm talking about here is NOT
shared between other web-cached pages (even they are in the same
domain).


&gt;<i> The former is easy to achieve, but user agents tend to throw away stale
</I>&gt;<i> versions as to not present outdated information to the user and to save
</I>&gt;<i> storage space.
</I>
The user agent only need to keep the latest version.
It's fine to throw away the outdated one if you have the latest.

&gt;<i> You want user agents to fetch the latest version whenever possible, but keep
</I>&gt;<i> an old copy for when your servers are unreachable.
</I>
The &quot;whenever possible&quot; is when the user revisit the cached page.
The &quot;old&quot; here means the latest version that was cached..

&gt;<i> 5MB ought to be enough for anyone.
</I>
You were joking, right? :D

5MB for each App Cached web-page is probably OK.
However, 5MB localStorage quota for each domain is NOT OK.


&gt;<i> If all you want to do is store mutable resources for offline use and
</I>&gt;<i> validate them if possible, but returning the cached entry (or entity) if
</I>&gt;<i> validation is impossible, simply serve the resources with an Expires header
</I>&gt;<i> set to a date in the past.
</I>
Here is an example of how I want the App Cache to behave:

First, it always try to fetch the main page, and all its
static/dynamic resources and display it (just like normal web page).
Then some time later, if the user want's to visit the SAME page again
but the user is offline or the server is unavailable, then the latest
cache of the page is displayed.

In the sense, it's exactly like &quot;working offline mode&quot; whenever the
user is offline or the server is not responding.

The current App Cache design updates the cache to the latest version
in the background when the user visit the page for the second time and
then it needs to refresh the page to actually update the display. This
is annoying since the user will first see stale data, then a few
second later, it's updated with a giant refresh (including all the
static resources). This is because the App Cache is too COARSE
grained. It doesn't know what actually changes (which data are static,
which data are dynamic). That is another reason why we need
pageStorage: to separate the dynamic and the static resources.

Felix Halim
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031856.html">[whatwg] Unlimited pageStorage for App Cached web pages
</A></li>
	<LI>Next message: <A HREF="031878.html">[whatwg] Unlimited pageStorage for App Cached web pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31865">[ date ]</a>
              <a href="thread.html#31865">[ thread ]</a>
              <a href="subject.html#31865">[ subject ]</a>
              <a href="author.html#31865">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
