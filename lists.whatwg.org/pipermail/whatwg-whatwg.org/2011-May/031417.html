<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Spellcheck API (Re: selection.modify behavior across	platforms)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Spellcheck%20API%20%28Re%3A%20selection.modify%20behavior%20across%0A%09platforms%29&In-Reply-To=%3CBANLkTikrWxCSAX2OstkZMgRpfSPyo%3D4%2B5Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031416.html">
   <LINK REL="Next"  HREF="073704.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Spellcheck API (Re: selection.modify behavior across	platforms)</H1>
<!--htdig_noindex-->
    <B>Hironori Bono (&#22346;&#37326; &#21338;&#20856;)</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Spellcheck%20API%20%28Re%3A%20selection.modify%20behavior%20across%0A%09platforms%29&In-Reply-To=%3CBANLkTikrWxCSAX2OstkZMgRpfSPyo%3D4%2B5Q%40mail.gmail.com%3E"
       TITLE="[whatwg] Spellcheck API (Re: selection.modify behavior across	platforms)">hbono at google.com
       </A><BR>
    <I>Mon May  2 00:26:32 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="031416.html">[whatwg] Can we make checkboxes readonly?
</A></li>
        <LI>Next message: <A HREF="073704.html">[whatwg] Spellcheck API (Re: selection.modify behavior across	platforms)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31417">[ date ]</a>
              <a href="thread.html#31417">[ thread ]</a>
              <a href="subject.html#31417">[ subject ]</a>
              <a href="author.html#31417">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Greetings,

Sorry for my off-the-topic e-mail.
I'm interested in spellcheck API these days because web-application
developers like to customize the behaviors of the spellchecker
integrated in Chrome or use it in their web applications. For example,
adding e-mail addresses in a contact list when typing an e-mail
address in a &quot;To:&quot; field, checking the text retrieved via
XMLHTTPRequest, etc. If there are those who already work for
spellcheck API, I would like to work with them. So, it would be great
to give me those who work for spellcheck API. (I wonder if all
browsers really need this API, though.)

Regards,

Hironori Bono
E-mail: <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hbono at google.com</A>

On Mon, Mar 28, 2011 at 3:00 AM, Aryeh Gregor &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">Simetrical+w3c at gmail.com</A>&gt; wrote:
&gt;<i> On Sat, Mar 26, 2011 at 1:46 AM, Ehsan Akhgari &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ehsan at mozilla.com</A>&gt; wrote:
</I>&gt;&gt;<i> If we define selection.modify with granulatity set to &quot;word&quot; as extending the selection to the start/end of the current word (or for that matter, to the start/end of the next/previous word!) we would have a consistent result for calls on this API. &#160;For example, if somebody is writing a spell correction UI, they would want to replace the currently selected word with another word. &#160;Even if we choose the latter definition for the API (which I find less intuitive), the author knows that they need to deal with word separator characters separately.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But with the behavior of the API changing based on the platform, the author can either choose to sniff the UA string, or check what the API did after calling it. &#160;The scarier scenario is the author testing their application on one platform, and deploying it without realizing that it will break in other platforms.
</I>&gt;<i>
</I>&gt;<i> Why would an author want to use Selection.modify() to implement a
</I>&gt;<i> spellcheck API? &#160;Wouldn't that imply that they'd have to save the
</I>&gt;<i> user's selection somewhere, create a new one, modify() it to the right
</I>&gt;<i> place, do whatever they want to do with the resulting range, then
</I>&gt;<i> remove the ranges and restore the original selection? &#160;Not only is
</I>&gt;<i> this complicated and easy to get wrong, it might result in the
</I>&gt;<i> selection visibly flickering. &#160;For things like spellcheck, wouldn't we
</I>&gt;<i> want to have an API on Range instead?
</I>&gt;<i>
</I>&gt;<i> If you're manipulating the selection, that suggests to me that you
</I>&gt;<i> should be doing it in order to change the visible selection for the
</I>&gt;<i> user's benefit. &#160;If you're altering things for the sake of your own
</I>&gt;<i> scripts and not the user, you shouldn't be altering the selection, and
</I>&gt;<i> if you're forced to do that, that suggests the API is bad. &#160;Similarly,
</I>&gt;<i> the only way right now to convert HTML to plaintext that works in all
</I>&gt;<i> browsers is to use Selection.toString() -- that's bad.
</I>&gt;<i>
</I>&gt;<i> (I notice WebKit has a bug open for creating a Range.modify() method:
</I>&gt;<i> &lt;<A HREF="https://bugs.webkit.org/show_bug.cgi?id=34821">https://bugs.webkit.org/show_bug.cgi?id=34821</A>&gt;. &#160;They seem to have a
</I>&gt;<i> Range.expand() method that does something related to this:
</I>&gt;<i> &lt;<A HREF="http://trac.webkit.org/changeset/48271">http://trac.webkit.org/changeset/48271</A>&gt;.)
</I>&gt;<i>
</I>&gt;<i> On Sat, Mar 26, 2011 at 2:51 AM, Ryosuke Niwa &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">rniwa at webkit.org</A>&gt; wrote:
</I>&gt;&gt;<i> I'm not sure why we need to provide a consistent behavior all platforms. &#160;I
</I>&gt;&gt;<i> think the whole point of modify() function is so that scripts can emulate
</I>&gt;&gt;<i> selection operations user can initiate. &#160;Imagine an app that intercepts user
</I>&gt;&gt;<i> actions such as key down and manually sets selection using modify() because
</I>&gt;&gt;<i> it needs to update some internal state, etc... in such applications, it's
</I>&gt;&gt;<i> extremely desirable that the result of modify() to match what user does.
</I>&gt;<i>
</I>&gt;<i> Why can't such an application just return true from the event handler
</I>&gt;<i> to let the platform-specific behavior take effect? &#160;Indeed, if it
</I>&gt;<i> wants to respect platform-specific behavior, it can't rely on calling
</I>&gt;<i> modify() in response to keypresses, because the same keypresses have
</I>&gt;<i> entirely different effects on different platforms. &#160;For instance,
</I>&gt;<i> IIRC, Home on OS X goes to the beginning of the text field instead of
</I>&gt;<i> the beginning of the line as on Windows/typical Linux; Ctrl-A goes to
</I>&gt;<i> the beginning of the line instead of doing nothing special as on
</I>&gt;<i> Windows/typical Linux; etc. &#160;Some of this stuff is even configurable
</I>&gt;<i> on some platforms (at least GTK, AFAICT). &#160;So if the user presses
</I>&gt;<i> Home, how are you going to decide whether to modify() by
</I>&gt;<i> &quot;lineboundary&quot; or &quot;documentboundary&quot;? &#160;The only reliable way is to not
</I>&gt;<i> interfere at all.
</I>&gt;<i>
</I>&gt;<i> At this point I'm still really unclear on what the use-cases are for
</I>&gt;<i> this feature. &#160;I wasn't able to find discussion in the WebKit bug
</I>&gt;<i> tracker in a quick search. &#160;I also didn't find any explanation of
</I>&gt;<i> actual use-cases on the Mozilla bug:
</I>&gt;<i> &lt;<A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=496275">https://bugzilla.mozilla.org/show_bug.cgi?id=496275</A>&gt;. &#160;I get the
</I>&gt;<i> impression there are actual use-cases for *something* resembling this
</I>&gt;<i> feature, I just haven't figured out what they are . . .
</I>&gt;<i>
</I></PRE>




































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031416.html">[whatwg] Can we make checkboxes readonly?
</A></li>
	<LI>Next message: <A HREF="073704.html">[whatwg] Spellcheck API (Re: selection.modify behavior across	platforms)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31417">[ date ]</a>
              <a href="thread.html#31417">[ thread ]</a>
              <a href="subject.html#31417">[ subject ]</a>
              <a href="author.html#31417">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
