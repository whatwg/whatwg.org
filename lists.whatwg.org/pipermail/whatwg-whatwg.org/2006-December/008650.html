<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] several messages about XML syntax and HTML5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20several%20messages%20about%20XML%20syntax%20and%20HTML5&In-Reply-To=%3C4579B5C2.4020305%40degeneration.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008628.html">
   <LINK REL="Next"  HREF="008664.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] several messages about XML syntax and HTML5</H1>
<!--htdig_noindex-->
    <B>Martin Atkins</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20several%20messages%20about%20XML%20syntax%20and%20HTML5&In-Reply-To=%3C4579B5C2.4020305%40degeneration.co.uk%3E"
       TITLE="[whatwg] several messages about XML syntax and HTML5">mart at degeneration.co.uk
       </A><BR>
    <I>Fri Dec  8 10:58:10 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="008628.html">[whatwg] several messages about XML syntax and HTML5
</A></li>
        <LI>Next message: <A HREF="008664.html">[whatwg] XML databases, XML syntax and HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8650">[ date ]</a>
              <a href="thread.html#8650">[ thread ]</a>
              <a href="subject.html#8650">[ subject ]</a>
              <a href="author.html#8650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Alexey Feldgendler wrote:
&gt;<i> 
</I>&gt;<i> LiveJournal, a popular blogging service, inserts hand-authored content into hand-authored templates. While the templates are written by competent authors who (mostly) know how to write proper HTML, blog posts are most often written by people who barely learnt how to use a bunch of tags. LiveJournal makes some simple preprocessing (breaks paragraphs on newlines and strips dangerous markup like &lt;script&gt;) but otherwise leaves the content as is. That's why most blog pages on LiveJournal aren't even close to being valid HTML.
</I>&gt;<i> 
</I>&gt;<i> 
</I>
Actually, LiveJournal's HTML sanitizer[1] is not as simple as you 
suggest here. It does actually attempt to &quot;fix&quot; various markup errors 
such as:
  * Auto-closing badly-nested or unclosed elements
  * Escaping instances of bare special characters (&lt;, &gt;, &amp;, etc)
  * Adding quotes around all attribute values
  * ...

Of course, it isn't a validator, so apart from some special cases 
(filtering &lt;script&gt;, for example) it has no knowledge about the content 
models of various HTML elements, so it's a good example of the fact that 
it's unfeasible for a tool such as this to &quot;fix&quot; a user's mess when 
dealing with hand-made markup.

LiveJournal actually has a WYSIWYG editor in addition to accepting 
hand-edited HTML, but since it's based on the in-browser designMode 
thing it often generates worse markup than most users.


(It doesn't help that there is a coding standard in force for 
LiveJournal which mandates XHTML served as text/html across the board 
and that the system itself injects invalid HTML into the otherwise-valid 
templates.)

[1] LiveJournal actually has two of these. One is stream-based and is 
used to fix up the template output:
    &lt;<A HREF="http://code.sixapart.com/svn/miscperl/trunk/HTMLCleaner.pm">http://code.sixapart.com/svn/miscperl/trunk/HTMLCleaner.pm</A>&gt;
    ...while the other is a lot more picky and is used for fixing up 
content such as user entries and comments:
    &lt;<A HREF="http://code.sixapart.com/svn/livejournal/trunk/cgi-bin/cleanhtml.pl">http://code.sixapart.com/svn/livejournal/trunk/cgi-bin/cleanhtml.pl</A>&gt;

Links to source code just included in case anyone is interested.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008628.html">[whatwg] several messages about XML syntax and HTML5
</A></li>
	<LI>Next message: <A HREF="008664.html">[whatwg] XML databases, XML syntax and HTML5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8650">[ date ]</a>
              <a href="thread.html#8650">[ thread ]</a>
              <a href="subject.html#8650">[ subject ]</a>
              <a href="author.html#8650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
