<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Provding Better Tools
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Provding%20Better%20Tools&In-Reply-To=%3Cop.tj0nxhyaplbshj%40briann%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008361.html">
   <LINK REL="Next"  HREF="008367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Provding Better Tools</H1>
<!--htdig_noindex-->
    <B>J. King</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Provding%20Better%20Tools&In-Reply-To=%3Cop.tj0nxhyaplbshj%40briann%3E"
       TITLE="[whatwg] Provding Better Tools">jking at dark-phantasy.com
       </A><BR>
    <I>Sun Dec  3 19:57:07 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="008361.html">[whatwg] Provding Better Tools
</A></li>
        <LI>Next message: <A HREF="008367.html">[whatwg] Provding Better Tools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8366">[ date ]</a>
              <a href="thread.html#8366">[ thread ]</a>
              <a href="subject.html#8366">[ subject ]</a>
              <a href="author.html#8366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Sun, 03 Dec 2006 20:10:34 -0500, Michel Fortin  
&lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">michel.fortin at michelf.com</A>&gt; wrote:

&gt;<i> My experience optimizing PHP Markdown, and building the custom mixed  
</I>&gt;<i> Markdown/HTML-block pesudo-tokenizer of PHP Markdown Extra, tells me  
</I>&gt;<i> that it'll probably stay very slow as long as the implementation is made  
</I>&gt;<i> of PHP code.
</I>
Yeah, it is.  I'm not much of a programmer, but I thought the algorithm  
too useful not to try and implement.

&gt;<i> Assuming you've implemented the algorithm in the spec as PHP code, you  
</I>&gt;<i> could probably make it faster by using regular expressions in the  
</I>&gt;<i> tokenization steps instead of iterating character by character. For  
</I>&gt;<i> instance, you could implement many of the tokenizer states by matching  
</I>&gt;<i> from the start of a string with a regex. And maybe then it'll also be  
</I>&gt;<i> possible to combine a couple of states within the same regex too.
</I>
This is precisely what I've done.  Before I did said optimization, the  
parser would crash more often than not on a document larger than a few  
kilobytes on my machine.

&gt;<i> The more we replace PHP code by regular expressions, the faster it'll  
</I>&gt;<i> go, but further we deviate from the processing algorithm described in  
</I>&gt;<i> the spec. I wonder how far we could go while keeping the exact same  
</I>&gt;<i> behaviour.
</I>
My pattern optimization is pretty simple: when switching states the parser  
first tries matching whatever range of characters will keep the machine in  
the same state, and then acts as normal on the first character that  
doesn't match.  There is, effectively, next to no deviation from the spec  
short of emitting one char token per unbroken string rather than one token  
per character.  Since the tokens are merged into one text node in the tree  
builder anyway, the deviation is essentially nil.

&gt;<i> The true good solution would be to have a parser implemented in C and  
</I>&gt;<i> available through every standard installation of PHP. It could be used  
</I>&gt;<i> by other languages too.
</I>
I am keeping my fingers crossed, hoping that someone much more  
knowledgable than I will do this. :)

-- 
J. King
<A HREF="http://jking.dark-phantasy.com/">http://jking.dark-phantasy.com/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008361.html">[whatwg] Provding Better Tools
</A></li>
	<LI>Next message: <A HREF="008367.html">[whatwg] Provding Better Tools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8366">[ date ]</a>
              <a href="thread.html#8366">[ thread ]</a>
              <a href="subject.html#8366">[ subject ]</a>
              <a href="author.html#8366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
