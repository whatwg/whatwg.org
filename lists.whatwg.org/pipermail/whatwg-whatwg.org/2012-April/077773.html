<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20request%20for%20%7Bcreate%2C%20get%2C%0A%20put%7DImageDataHD%20and%20ctx.backingStorePixelRatio&In-Reply-To=%3CA489A12E-88FC-4CC3-A84C-13C8B97B180A%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077764.html">
   <LINK REL="Next"  HREF="077781.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20request%20for%20%7Bcreate%2C%20get%2C%0A%20put%7DImageDataHD%20and%20ctx.backingStorePixelRatio&In-Reply-To=%3CA489A12E-88FC-4CC3-A84C-13C8B97B180A%40apple.com%3E"
       TITLE="[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio">mjs at apple.com
       </A><BR>
    <I>Thu Apr 19 21:28:16 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077764.html">[whatwg] [canvas] request for {create, get,	put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
        <LI>Next message: <A HREF="077781.html">[whatwg] [canvas] request for {create, get,	put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77773">[ date ]</a>
              <a href="thread.html#77773">[ thread ]</a>
              <a href="subject.html#77773">[ subject ]</a>
              <a href="author.html#77773">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Apr 17, 2012, at 3:32 PM, Darin Fisher wrote:
&gt;<i> 
</I>&gt;<i> ^^^ This got me thinking...
</I>&gt;<i> 
</I>&gt;<i> In Chrome at least, getImageData() doesn't actually block to fetch pixels.  The thread is only blocked when the first dereference of the pixel buffer occurs.  I believe this is done so that a getImageData() followed by putImageData() call will not need to block the calling thread.
</I>&gt;<i> 
</I>&gt;<i> The above suggests that making getImageData() asynchronous would not actually provide any benefit for cases where the page does not dereference the pixel buffer.  Another use case where this comes up is passing the ImageData to a web worker.  If the web worker is the first to dereference the ImageData, then only the web worker thread should block.
</I>&gt;<i> 
</I>&gt;<i> I think this becomes an argument for keeping getImageData() as is.  It assumes that ImageData is just a handle, and we could find another way to discourage dereferencing the pixel buffer on the UI thread.
</I>&gt;<i> 
</I>&gt;<i> Hmm...
</I>
You could also address this by adding a way to be notified when the contents of an ImageData are available without blocking. That would work with both vanilla getImageData and the proposed getImageDataHD. It would also give the author the alternative of just blocking (e.g. if they know the buffer is small) or of sending the data off to a worker for processing.

Regards,
Maciej

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077764.html">[whatwg] [canvas] request for {create, get,	put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
	<LI>Next message: <A HREF="077781.html">[whatwg] [canvas] request for {create, get,	put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77773">[ date ]</a>
              <a href="thread.html#77773">[ thread ]</a>
              <a href="subject.html#77773">[ subject ]</a>
              <a href="author.html#77773">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
