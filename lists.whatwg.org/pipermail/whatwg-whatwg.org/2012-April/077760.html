<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] keepalive attribute on iframe
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20keepalive%20attribute%20on%20iframe&In-Reply-To=%3CCANMdWTuVjFRk%2BeN_erjpCNX4F547fMV8%3DFrZP1BOK3u4J1_szQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077752.html">
   <LINK REL="Next"  HREF="077761.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] keepalive attribute on iframe</H1>
<!--htdig_noindex-->
    <B>Ojan Vafai</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20keepalive%20attribute%20on%20iframe&In-Reply-To=%3CCANMdWTuVjFRk%2BeN_erjpCNX4F547fMV8%3DFrZP1BOK3u4J1_szQ%40mail.gmail.com%3E"
       TITLE="[whatwg] keepalive attribute on iframe">ojan at chromium.org
       </A><BR>
    <I>Tue Apr 17 16:06:28 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077752.html">[whatwg] keepalive attribute on iframe
</A></li>
        <LI>Next message: <A HREF="077761.html">[whatwg] keepalive attribute on iframe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77760">[ date ]</a>
              <a href="thread.html#77760">[ thread ]</a>
              <a href="subject.html#77760">[ subject ]</a>
              <a href="author.html#77760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I think this only worked for the magic iframe solution because it was
cross-document. Talked to Adam offline. It sounded like the problems that
didn't stem from cross-document issues had to do with assumptions that
rendered iframes are always attach to the DOM. Not sure what we can do
about that other than fixing all the bugs.

I considered that we could wait until the end of the microtask (task?), and
only unload keepalive iframes if they are still detached, but in the
presence of sync javascript events, I'm not sure that actually reduces any
implementation complexity.

Ojan

On Mon, Apr 16, 2012 at 4:51 PM, Darin Fisher &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">darin at chromium.org</A>&gt; wrote:

&gt;<i> Can you hide this behind adoptNode just as we did for &quot;magic iframe&quot;?  The
</I>&gt;<i> nice thing about adoptNode is that the browser gets told both the source
</I>&gt;<i> and
</I>&gt;<i> destination parent nodes.  This way there is never a disconnected state.
</I>&gt;<i>
</I>&gt;<i> So long as we unload when moving between documents, we should be pretty
</I>&gt;<i> safe as far as the issues which plagued magic iframe are concerned.
</I>&gt;<i>
</I>&gt;<i> -Darin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, Apr 12, 2012 at 12:35 PM, Ojan Vafai &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">ojan at chromium.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> We should add a keepalive attribute to iframes that prevents iframes from
</I>&gt;&gt;<i> being unloaded/reloaded when removed from or appended to a document.
</I>&gt;&gt;<i> Similarly, a disconnected iframe with keepalive should load. If the
</I>&gt;&gt;<i> keepalive attribute is removed from a disconnected iframe, then it should
</I>&gt;&gt;<i> unload.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm not terribly happy with the name 'keepalive', but I can't think of
</I>&gt;&gt;<i> anything better at the moment.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As iframes increasingly become the standard way of achieving certain tasks
</I>&gt;&gt;<i> (e.g. sandboxing), it's increasingly important to be able to move them
</I>&gt;&gt;<i> around in the DOM. Right now, to achieve this sort of keepalive behavior,
</I>&gt;&gt;<i> you have to keep the iframe always appended to the document and position
</I>&gt;&gt;<i> it
</I>&gt;&gt;<i> absolutely as the document changes.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ojan
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077752.html">[whatwg] keepalive attribute on iframe
</A></li>
	<LI>Next message: <A HREF="077761.html">[whatwg] keepalive attribute on iframe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77760">[ date ]</a>
              <a href="thread.html#77760">[ thread ]</a>
              <a href="subject.html#77760">[ subject ]</a>
              <a href="author.html#77760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
