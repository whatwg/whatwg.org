<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] API for encoding/decoding ArrayBuffers into text
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3CCA%2Bc2ei-_j1ZZFH7uic5vHyNj8AuDkUPz7twa0nVBfd-9TVyR2g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077349.html">
   <LINK REL="Next"  HREF="077354.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] API for encoding/decoding ArrayBuffers into text</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3CCA%2Bc2ei-_j1ZZFH7uic5vHyNj8AuDkUPz7twa0nVBfd-9TVyR2g%40mail.gmail.com%3E"
       TITLE="[whatwg] API for encoding/decoding ArrayBuffers into text">jonas at sicking.cc
       </A><BR>
    <I>Thu Mar 15 16:51:25 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077349.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
        <LI>Next message: <A HREF="077354.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77353">[ date ]</a>
              <a href="thread.html#77353">[ thread ]</a>
              <a href="subject.html#77353">[ subject ]</a>
              <a href="author.html#77353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Mar 14, 2012 at 3:33 PM, Joshua Bell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jsbell at chromium.org</A>&gt; wrote:
&gt;<i> FYI, I've updated <A HREF="http://wiki.whatwg.org/wiki/StringEncoding">http://wiki.whatwg.org/wiki/StringEncoding</A>
</I>
A few comments:

What's the use-case for the &quot;stringLength&quot; function? You can't decode
into an existing datastructure anyway, so you're ultimately forced to
call &quot;decode&quot; at which point the &quot;stringLength&quot; function hasn't helped
you.


Currently the use-case of simply wanting to convert a string to a
binary buffer is a bit cumbersome. You first have to call the
&quot;encodedLength&quot; function, then allocate a buffer of the right size,
then call the &quot;encode&quot; function. Could we add a function with
something like the following signature:

ArrayBufferView encode(DOMString value, optional DOMString encoding);


It doesn't seem possible to implement the 'encode' function without
doing multiple scans over the string. The implementation seems
required both to check that the data can be decoded using the
specified encoding, as well as check that the data will fit in the
passed in buffer. Only then can the implementation start decoding the
data. This seems problematic.


I also don't think it's a good idea to throw an exception for encoding
errors. Better to convert characters to the unicode replacement
character. I believe we made a similar change to the WebSockets
specification recently.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077349.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
	<LI>Next message: <A HREF="077354.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77353">[ date ]</a>
              <a href="thread.html#77353">[ thread ]</a>
              <a href="subject.html#77353">[ subject ]</a>
              <a href="author.html#77353">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
