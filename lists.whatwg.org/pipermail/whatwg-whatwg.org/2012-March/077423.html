<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20request%20for%20%7Bcreate%2C%20get%2C%0A%20put%7DImageDataHD%20and%20ctx.backingStorePixelRatio&In-Reply-To=%3C05EE49B6-B93E-4105-BE20-2091828DC88D%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077398.html">
   <LINK REL="Next"  HREF="035137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio</H1>
<!--htdig_noindex-->
    <B>Maciej Stachowiak</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20request%20for%20%7Bcreate%2C%20get%2C%0A%20put%7DImageDataHD%20and%20ctx.backingStorePixelRatio&In-Reply-To=%3C05EE49B6-B93E-4105-BE20-2091828DC88D%40apple.com%3E"
       TITLE="[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio">mjs at apple.com
       </A><BR>
    <I>Wed Mar 21 20:29:02 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077398.html">[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
        <LI>Next message: <A HREF="035137.html">[whatwg] Image cache behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77423">[ date ]</a>
              <a href="thread.html#77423">[ thread ]</a>
              <a href="subject.html#77423">[ subject ]</a>
              <a href="author.html#77423">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
On Mar 20, 2012, at 12:00 PM, James Robinson wrote:

&gt;<i> If we are adding new APIs for manipulating the backing directly, can we
</I>&gt;<i> make them asynchronous? This would allow for many optimization
</I>&gt;<i> opportunities that are currently difficult or impossible.
</I>
Neat idea to offer async backing store access. I'm not sure that we should tie this to backing store access at true backing store resolution vs at CSS pixel nominal resolution, because it will significantly raise the barrier to authors recoding their existing apps to take full advantage of higher resolutions. With Ted's proposal, all they would have to do is use the HD versions of calls and change their loops to read the bounds from the ImageData object instead of assuming. If we also forced the new calls to be async, then more extensive changes would be required.

I hear you on the benefits of async calls, but I think it would be better to sell authors on their benefits separately.

Cheers,
Maciej


&gt;<i> 
</I>&gt;<i> - James
</I>&gt;<i> On Mar 20, 2012 10:29 AM, &quot;Edward O&apos;Connor&quot; &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">eoconnor at apple.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Unfortunately, lots of &lt;canvas&gt; content (especially content which calls
</I>&gt;&gt;<i> {create,get,put}ImageData methods) assumes that the &lt;canvas&gt;'s backing
</I>&gt;&gt;<i> store pixels correspond 1:1 to CSS pixels, even though the spec has been
</I>&gt;&gt;<i> written to allow for the backing store to be at a different scale
</I>&gt;&gt;<i> factor.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Especially problematic is that developers have to round trip image data
</I>&gt;&gt;<i> through a &lt;canvas&gt; in order to detect that a different scale factor is
</I>&gt;&gt;<i> being used.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'd like to propose the addition of a backingStorePixelRatio property to
</I>&gt;&gt;<i> the 2D context object. Just as window.devicePixelRatio expresses the
</I>&gt;&gt;<i> ratio of device pixels to CSS pixels, ctx.backingStorePixelRatio would
</I>&gt;&gt;<i> express the ratio of backing store pixels to CSS pixels. This allows
</I>&gt;&gt;<i> developers to easily branch to handle different backing store scale
</I>&gt;&gt;<i> factors.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Additionally, I think the existing {create,get,put}ImageData API needs
</I>&gt;&gt;<i> to be defined to be in terms of CSS pixels, since that's what existing
</I>&gt;&gt;<i> content assumes. I propose the addition of a new set of methods for
</I>&gt;&gt;<i> working directly with backing store image data. (New methods are easier
</I>&gt;&gt;<i> to feature detect than adding optional arguments to the existing
</I>&gt;&gt;<i> methods.) At the moment I'm calling these {create,get,put}ImageDataHD,
</I>&gt;&gt;<i> but I'm not wedded to the names. (Nor do I want to bikeshed them.)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks for your consideration,
</I>&gt;&gt;<i> Ted
</I>&gt;&gt;<i> 
</I>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077398.html">[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
	<LI>Next message: <A HREF="035137.html">[whatwg] Image cache behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77423">[ date ]</a>
              <a href="thread.html#77423">[ thread ]</a>
              <a href="subject.html#77423">[ subject ]</a>
              <a href="author.html#77423">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
