<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Endianness of typed arrays
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Endianness%20of%20typed%20arrays&In-Reply-To=%3CCAOp6jLZrj7oQTBsgWe_v3qTdC4fsOgAj1NjumzTu-yfmU0%3DC5g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077527.html">
   <LINK REL="Next"  HREF="077494.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Endianness of typed arrays</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Endianness%20of%20typed%20arrays&In-Reply-To=%3CCAOp6jLZrj7oQTBsgWe_v3qTdC4fsOgAj1NjumzTu-yfmU0%3DC5g%40mail.gmail.com%3E"
       TITLE="[whatwg] Endianness of typed arrays">robert at ocallahan.org
       </A><BR>
    <I>Wed Mar 28 16:46:23 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077527.html">[whatwg] Endianness of typed arrays
</A></li>
        <LI>Next message: <A HREF="077494.html">[whatwg] Endianness of typed arrays
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77520">[ date ]</a>
              <a href="thread.html#77520">[ thread ]</a>
              <a href="subject.html#77520">[ subject ]</a>
              <a href="author.html#77520">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Thu, Mar 29, 2012 at 8:08 AM, Kenneth Russell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">kbr at google.com</A>&gt; wrote:

&gt;<i> Once DataView is available everywhere then the top priority should be
</I>&gt;<i> to write educational materials regarding binary I/O. It should be
</I>&gt;<i> possible to educate the web development community about correct
</I>&gt;<i> practices with only a few high profile articles.
</I>&gt;<i>
</I>
We can give that a try. I would be astounded if it works. Nothing like that
has ever worked before for features I was involved in.

I think we should set some success criteria for that strategy. How about
this: six months after all shipping browers that support typed arrays also
support DataViews, let's evaluate a sample of the very latest applications
using typed arrays to see if they're using DataViews correctly and would
work on big-endian systems. If more than 10% would be broken for
big-endian, we'll declare that strategy to have failed and spec
little-endian. Fair?

Changing the endianness of Uint16Array and the other multi-byte typed
&gt;<i> arrays is not a feasible solution. Existing WebGL programs already
</I>&gt;<i> work correctly on big-endian architectures specifically because the
</I>&gt;<i> typed array views use the host's endianness. If the typed array views
</I>&gt;<i> were changed to be explicitly little-endian, it would be a requirement
</I>&gt;<i> to introduce new big-endian views, and all applications using typed
</I>&gt;<i> arrays would have to be rewritten, not just those which use WebGL.
</I>&gt;<i>
</I>
It seems to me that to support little-endian semantics on big-endian
machines, what's needed is to byteswap on JS typed array accesses, and
either to have a modified GL driver that byteswaps before sending data to
the GPU, or preferably to have a GPU that can be switched into
little-endian mode (on a per-context basis, say). None of that seems
technically challenging to me. I imagine that every GPU part will have a
little-endian mode anyway, in order to work with the vast installed base of
little-endian CPUs.

The result
&gt;<i> was increased polymorphism at call sites, which defeated the Java VM's
</I>&gt;<i> optimizing compiler and led to 10x slowdowns in many common
</I>&gt;<i> situations.
</I>

I don't see any need for increased polymorphism at call sites in our case.

It is possible to make incorrect assumptions leading to non-portable code,
&gt;<i> but at some level this is possible with nearly any API that extends
</I>&gt;<i> beyond a small, closed world.
</I>

Yes, but we work extremely hard in the Web platform to minimize the
possibility.

Rob
-- 
&#8220;You have heard that it was said, &#8216;Love your neighbor and hate your enemy.&#8217;
But I tell you, love your enemies and pray for those who persecute you,
that you may be children of your Father in heaven. ... If you love those
who love you, what reward will you get? Are not even the tax collectors
doing that? And if you greet only your own people, what are you doing more
than others?&quot; [Matthew 5:43-47]

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077527.html">[whatwg] Endianness of typed arrays
</A></li>
	<LI>Next message: <A HREF="077494.html">[whatwg] Endianness of typed arrays
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77520">[ date ]</a>
              <a href="thread.html#77520">[ thread ]</a>
              <a href="subject.html#77520">[ subject ]</a>
              <a href="author.html#77520">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
