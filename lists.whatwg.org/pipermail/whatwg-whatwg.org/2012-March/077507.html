<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Encoding: big5 and big5-hkscs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Encoding%3A%20big5%20and%20big5-hkscs&In-Reply-To=%3Cop.wbv0ik01sr6mfa%40kirk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077505.html">
   <LINK REL="Next"  HREF="077531.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Encoding: big5 and big5-hkscs</H1>
<!--htdig_noindex-->
    <B>Philip J&#228;genstedt</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Encoding%3A%20big5%20and%20big5-hkscs&In-Reply-To=%3Cop.wbv0ik01sr6mfa%40kirk%3E"
       TITLE="[whatwg] Encoding: big5 and big5-hkscs">philipj at opera.com
       </A><BR>
    <I>Wed Mar 28 08:40:58 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077505.html">[whatwg] Encoding: big5 and big5-hkscs
</A></li>
        <LI>Next message: <A HREF="077531.html">[whatwg] Encoding: big5 and big5-hkscs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77507">[ date ]</a>
              <a href="thread.html#77507">[ thread ]</a>
              <a href="subject.html#77507">[ subject ]</a>
              <a href="author.html#77507">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 28 Mar 2012 15:36:35 +0200, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt;  
wrote:

&gt;<i> On Wed, 28 Mar 2012 12:18:41 +0200, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt;  
</I>&gt;<i> wrote:
</I>&gt;&gt;<i> I'm not sure what to do with big5 and big5-hkscs. After generating all  
</I>&gt;&gt;<i> possible byte sequences (lead bytes 0x81 to 0xFE, trail bytes 0x40 to  
</I>&gt;&gt;<i> 0x7E and 0xA1 to 0xFE) and getting the code points for those in various  
</I>&gt;&gt;<i> browsers there does not seem to be that much interoperability.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://html5.org/temp/big5.json">http://html5.org/temp/big5.json</A> has all the code points for Internet  
</I>&gt;&gt;<i> Explorer (&quot;internetexplorer&quot;, same for big5 and hkscs), Firefox  
</I>&gt;&gt;<i> (&quot;firefox&quot; and &quot;firefox-hk&quot;), Opera (&quot;opera&quot; and &quot;opera-hk&quot;), and  
</I>&gt;&gt;<i> Chrome (&quot;chrome&quot; and &quot;chrome-hk&quot;). &quot;internetexplorer&quot; and &quot;chrome&quot; are  
</I>&gt;&gt;<i> quite close, the rest is a little further apart.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Some help as to how best to proceed would be appreciated.
</I>&gt;<i>
</I>&gt;<i> To give some more context, IE treats big5 and big5-hkscs identical. Out  
</I>&gt;<i> of the total 19782 code points, 6217 of them map to the Private Use Area  
</I>&gt;<i> (PUA) in IE. Chrome does the same for big5, but has a different mapping  
</I>&gt;<i> for big5-hkscs. To deal with HKSCS Microsoft brought out this patch:  
</I>&gt;<i> <A HREF="http://www.microsoft.com/hk/hkscs/">http://www.microsoft.com/hk/hkscs/</A> Basically people living in the Hong  
</I>&gt;<i> Kong area are expected to have that installed and therefore the PUA code  
</I>&gt;<i> points map to different glyphs. I'm not sure what the situation is like  
</I>&gt;<i> on Mac or Linux, but given the market share statistics I saw the market  
</I>&gt;<i> is pretty heavenly dominated by Microsoft.
</I>&gt;<i>
</I>&gt;<i> Gecko seems to use a combination of things as documented in  
</I>&gt;<i> <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=310299">https://bugzilla.mozilla.org/show_bug.cgi?id=310299</A> though it is unclear  
</I>&gt;<i> how successful that approach is.
</I>&gt;<i>
</I>&gt;<i> There are also various threads online such as  
</I>&gt;<i> <A HREF="http://www.google.com/support/forum/p/Chrome/thread?tid=466c210af3fb6d08">http://www.google.com/support/forum/p/Chrome/thread?tid=466c210af3fb6d08</A>  
</I>&gt;<i> that seem to indicate &quot;pages in the Hong Kong area&quot; are not using the  
</I>&gt;<i> big5-hkscs label and therefore rely on what IE and Chrome do for big5  
</I>&gt;<i> and rely on users having the compatible fonts.
</I>
Making big5 and big5-hkscs aliases sounds like a good idea, on the  
assumption that big5-hkscs is a pure extension of Big5.

To make this more concrete, here are a few fairly common characters that I  
think are in big5-hkscs but not in big5, their unicode point and byte  
representation in big5-hkscs when converted using Python:

&#21867; U+556B '\x94\xdc'
&#22000; U+55F0 '\x9d\xf5'
&#22021; U+5605 '\x9d\xef'

I'm not sure how to use big5.json, so perhaps you can tell me what these  
map to in various browsers? If they're all the same, examples of byte  
sequences that don't would be interesting.

It seems fairly obvious that the most sane solution would be to just use a  
more correct mapping that doesn't involve the PUA, but:

1. What is the compatible subset of all browsers?

2. Does that subset include anything mapping to the PUA?

3. Do Hong Kong or Taiwan sites depend on charCodeAt returning values in  
the PUA?

4. Would hacks be needed on the font-loading side if browsers started  
using a more correct mapping?

-- 
Philip J&#228;genstedt
Core Developer
Opera Software

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077505.html">[whatwg] Encoding: big5 and big5-hkscs
</A></li>
	<LI>Next message: <A HREF="077531.html">[whatwg] Encoding: big5 and big5-hkscs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77507">[ date ]</a>
              <a href="thread.html#77507">[ thread ]</a>
              <a href="subject.html#77507">[ subject ]</a>
              <a href="author.html#77507">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
