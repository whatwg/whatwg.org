<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Endianness of typed arrays
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Endianness%20of%20typed%20arrays&In-Reply-To=%3CCA%2Bc2ei_VuWjb-w8h0Q8u_4rudfKVMbqWC7NHzranODN5FffGhA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077492.html">
   <LINK REL="Next"  HREF="077497.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Endianness of typed arrays</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Endianness%20of%20typed%20arrays&In-Reply-To=%3CCA%2Bc2ei_VuWjb-w8h0Q8u_4rudfKVMbqWC7NHzranODN5FffGhA%40mail.gmail.com%3E"
       TITLE="[whatwg] Endianness of typed arrays">jonas at sicking.cc
       </A><BR>
    <I>Wed Mar 28 02:22:29 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077492.html">[whatwg] Endianness of typed arrays
</A></li>
        <LI>Next message: <A HREF="077497.html">[whatwg] Endianness of typed arrays
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77493">[ date ]</a>
              <a href="thread.html#77493">[ thread ]</a>
              <a href="subject.html#77493">[ subject ]</a>
              <a href="author.html#77493">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Mar 28, 2012 at 2:13 AM, Boris Zbarsky &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">bzbarsky at mit.edu</A>&gt; wrote:
&gt;<i> On 3/28/12 2:04 AM, Jonas Sicking wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Consider a big-endian platform where both the CPU and the GPU is
</I>&gt;&gt;<i> big-endian. If a webpage writes 16bit data into an ArrayBuffer and
</I>&gt;&gt;<i> then sends that off to the GPU using WebGL, the data had better be
</I>&gt;&gt;<i> sent in big-endian otherwise the GPU will interpret it wrong.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However if the same page then writes some 16bit data into an
</I>&gt;&gt;<i> ArrayBuffer and then looks at its individual bytes or send it across
</I>&gt;&gt;<i> the network to a server, it's very likely that the data needs to
</I>&gt;&gt;<i> appear as little-endian or site logic might break.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Basically I don't know how one would write a modern browser on a
</I>&gt;&gt;<i> big-endian system.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What one could do is to store the array buffer bytes always as little
</I>&gt;<i> endian, and then if sending to the GPU byte-swap as needed based on the API
</I>&gt;<i> call being used (and hence the exact types the GPU actually expects).
</I>&gt;<i>
</I>&gt;<i> So basically, make all JS-visible state always be little-endian, and deal in
</I>&gt;<i> the one place where you actually need native endianness.
</I>&gt;<i>
</I>&gt;<i> I believe that was substantially Robert's proposal earlier in this thread.
</I>
Except if the data was written in 32bit units you do a different byte
swapping than if the data was written as 16bit units. And remember
that data can be written with different unit sizes in different parts
of the ArrayBuffer.

The typed-array spec was specifically designed for use cases like
sending buffers containing data in patterns like &quot;32bit data, 16bit
data, 16bit data, 32bit data, 16bit data, 16bit data...&quot;. Keeping
track of all that seems prohibitively expensive, but maybe I'm being
pessimistic.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077492.html">[whatwg] Endianness of typed arrays
</A></li>
	<LI>Next message: <A HREF="077497.html">[whatwg] Endianness of typed arrays
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77493">[ date ]</a>
              <a href="thread.html#77493">[ thread ]</a>
              <a href="subject.html#77493">[ subject ]</a>
              <a href="author.html#77493">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
