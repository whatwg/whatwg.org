<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] API for encoding/decoding ArrayBuffers into text
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3CPine.LNX.4.64.1203132322020.6189%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077318.html">
   <LINK REL="Next"  HREF="077326.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] API for encoding/decoding ArrayBuffers into text</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3CPine.LNX.4.64.1203132322020.6189%40ps20323.dreamhostps.com%3E"
       TITLE="[whatwg] API for encoding/decoding ArrayBuffers into text">ian at hixie.ch
       </A><BR>
    <I>Tue Mar 13 16:28:09 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077318.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
        <LI>Next message: <A HREF="077326.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77322">[ date ]</a>
              <a href="thread.html#77322">[ thread ]</a>
              <a href="subject.html#77322">[ subject ]</a>
              <a href="author.html#77322">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, 13 Mar 2012, Joshua Bell wrote:
&gt;<i> On Tue, Mar 13, 2012 at 4:10 PM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;<i> &gt; On Tue, Mar 13, 2012 at 4:08 PM, Kenneth Russell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">kbr at google.com</A>&gt; 
</I>&gt;<i> &gt; wrote:
</I>&gt;<i> &gt; &gt; Joshua Bell has been working on a string encoding and decoding API 
</I>&gt;<i> &gt; &gt; that supports the needed encodings, and which is separable from the 
</I>&gt;<i> &gt; &gt; core typed array API:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; <A HREF="http://wiki.whatwg.org/wiki/StringEncoding">http://wiki.whatwg.org/wiki/StringEncoding</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This is the direction I prefer. String encoding and decoding seems 
</I>&gt;<i> &gt; &gt; to be a complex enough problem that it should be expressed 
</I>&gt;<i> &gt; &gt; separately from the typed array spec itself.
</I>
Some quick feedback:

 - [OmitConstructor] doesn't seem to be WebIDL

 - please don't allow UAs to implement other encodings. You should list 
   the exact set of supported encodings and the exact labels that should 
   be recognised as meaning those encodings, and disallow all others. 
   Otherwise, we'll be in a never-ending game of reverse-engineering each 
   others' lists of supported encodings and it'll keep growing.

 - What's the use case for supporting anything but UTF-8?

 - Having a mechanism that lets you encode the string and get a length 
   separate from the mechanism that lets you encode the string and get the 
   encoded string seems like it would encourage very inefficient code. Can 
   we instead have a mechanism that returns both at once? Or is the idea 
   that for some encodings getting the encoded length is much quicker than 
   getting the actual string?

 - Seems weird that integers and strings would have such different APIs 
   for doing the same thing. Why can't we handle them equivalently? As in:

     len = view.setString(strings[i],
                          offset + Uint32Array.BYTES_PER_ELEMENT,
                          &quot;UTF-8&quot;);
     view.setUint32(offset, len);
     offset += Uint32Array.BYTES_PER_ELEMENT + len;

HTH,
-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077318.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
	<LI>Next message: <A HREF="077326.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77322">[ date ]</a>
              <a href="thread.html#77322">[ thread ]</a>
              <a href="subject.html#77322">[ subject ]</a>
              <a href="author.html#77322">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
