<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] [canvas] request for {create, get,	put}ImageDataHD and ctx.backingStorePixelRatio
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20request%20for%20%7Bcreate%2C%20get%2C%0A%09put%7DImageDataHD%20and%20ctx.backingStorePixelRatio&In-Reply-To=%3C0384391F-E516-4A35-A019-A30E15CD0181%40jumis.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077394.html">
   <LINK REL="Next"  HREF="077422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] [canvas] request for {create, get,	put}ImageDataHD and ctx.backingStorePixelRatio</H1>
<!--htdig_noindex-->
    <B>Charles Pritchard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20%5Bcanvas%5D%20request%20for%20%7Bcreate%2C%20get%2C%0A%09put%7DImageDataHD%20and%20ctx.backingStorePixelRatio&In-Reply-To=%3C0384391F-E516-4A35-A019-A30E15CD0181%40jumis.com%3E"
       TITLE="[whatwg] [canvas] request for {create, get,	put}ImageDataHD and ctx.backingStorePixelRatio">chuck at jumis.com
       </A><BR>
    <I>Tue Mar 20 15:22:56 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077394.html">[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
        <LI>Next message: <A HREF="077422.html">[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77395">[ date ]</a>
              <a href="thread.html#77395">[ thread ]</a>
              <a href="subject.html#77395">[ subject ]</a>
              <a href="author.html#77395">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mar 20, 2012, at 3:05 PM, Edward O'Connor &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">eoconnor at apple.com</A>&gt; wrote:

&gt;<i> Charles Pritchard wrote:
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> But now run through this logic when the &lt;canvas&gt; is making a high res
</I>&gt;&gt;&gt;<i> backing store automatically: by doing the clever thing, you're now
</I>&gt;&gt;&gt;<i> quadrupling the size of the canvas, and you're paying an exorbitant
</I>&gt;&gt;&gt;<i> storage cost for doing so.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Which (a): never happens
</I>&gt;<i> 
</I>&gt;<i> Sorry, what never happens?
</I>
The backing store itself is never set by 2x in the implementation. Not in any public implementations I've seen. It's always 1:1 with height and width units.


&gt;<i> Developers commonly double the size of their
</I>&gt;<i> &lt;canvas&gt;es (and scale them down with CSS) to support both the iPhone 3GS
</I>&gt;<i> and iPhone 4. Which means such code would use 4 times as much memory as
</I>&gt;<i> intended when &lt;canvas&gt; uses such a backing store.
</I>
It would do that, but it doesn't, because none of the implementations use a larger backing store.

And yes, in preparing for some future break in implementations, it may be wise for authors to run a check on getImageData. I don't, I've not seen it done, but it may be prudent.


&gt;<i> 
</I>&gt;&gt;<i> and (b) can be detected via 1x1 pixel canvas.
</I>&gt;<i> 
</I>&gt;<i> Having to round-trip image data through a &lt;canvas&gt; in order to detect
</I>&gt;<i> its backing store size is one of the problems I'm trying to solve here.
</I>
It's a 1:1 fetch, it doesn't take any time to do getImageData(0,0,1,1);

I don't mean to be pushing back on this issue. I'm more focused on the fact that other obvious issues have not been addressed by vendors, and now we're examining an issue that does not yet exist.


&gt;<i> 
</I>&gt;&gt;&gt;<i> You really only want to do the &quot;make it twice as big and then scale
</I>&gt;&gt;&gt;<i> it down with CSS&quot; trick when backing store pixels are 1:1 to CSS
</I>&gt;&gt;&gt;<i> pixels.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I do &quot;tricks&quot; to support browser zoom. They are increments; .5,.7,
</I>&gt;&gt;<i> 1.1, 1.2, 1.3, etc.
</I>&gt;<i> 
</I>&gt;<i> Huh? I'm not sure what you mean by &quot;browser zoom,&quot; nor do I know what it
</I>&gt;<i> has to do with my proposed additions to the &lt;canvas&gt; 2D Context API.
</I>
I know, and it'd be swell if we could sit down some time and I could walk you through the Canvas API an WCAG.

In the meantime, perhaps you could go over to the link I sent (A canvas button) on Jumis.com.

By browser zoom, I mean on a desktop, when I use CTRL + to change the pixel ratio on the page.

I've posted links to MS docs, and to a live example, on this thread.



-Charles
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077394.html">[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
	<LI>Next message: <A HREF="077422.html">[whatwg] [canvas] request for {create, get, put}ImageDataHD and ctx.backingStorePixelRatio
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77395">[ date ]</a>
              <a href="thread.html#77395">[ thread ]</a>
              <a href="subject.html#77395">[ subject ]</a>
              <a href="author.html#77395">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
