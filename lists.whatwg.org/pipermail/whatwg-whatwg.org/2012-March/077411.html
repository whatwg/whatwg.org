<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] API for encoding/decoding ArrayBuffers into text
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3Cop.wbiqtbeg64w2qv%40annevk-macbookpro.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077414.html">
   <LINK REL="Next"  HREF="077415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] API for encoding/decoding ArrayBuffers into text</H1>
<!--htdig_noindex-->
    <B>Anne van Kesteren</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3Cop.wbiqtbeg64w2qv%40annevk-macbookpro.local%3E"
       TITLE="[whatwg] API for encoding/decoding ArrayBuffers into text">annevk at opera.com
       </A><BR>
    <I>Wed Mar 21 12:42:37 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077414.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
        <LI>Next message: <A HREF="077415.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77411">[ date ]</a>
              <a href="thread.html#77411">[ thread ]</a>
              <a href="subject.html#77411">[ subject ]</a>
              <a href="author.html#77411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, 21 Mar 2012 01:27:47 -0700, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
&gt;<i> This leaves us with 2 or 3. So the question is if we should support
</I>&gt;<i> streaming or not. I suspect doing so would be worth it.
</I>
For XMLHttpRequest it might be, yes.

I think we should expose the same encoding set throughout the platform.  
One reason to limit the encoding set initially might be because we have  
not all converged yet on our encoding sets. Gecko, Safari, and Internet  
Explorer expose a lot more encodings than Opera and Chrome.

As for the API, how about:

   enc = new Encoder(&quot;euc-kr&quot;)
   string1 = enc.encode(bytes1)
   string2 = enc.encode(bytes2)
   string3 = enc.eof() // might return empty string if all is fine

And similarly you would have

   dec = new Decoder(&quot;shift_jis&quot;)
   bytes = dec.decode(string)

Or alternatively you could have a single object that exposes both encode()  
and decode() and tracks state for both:

   enc = new Encoding(&quot;gb18030&quot;)
   bytes1  = enc.decode(string1)
   string2 = enc.encode(bytes2)


-- 
Anne van Kesteren
<A HREF="http://annevankesteren.nl/">http://annevankesteren.nl/</A>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077414.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
	<LI>Next message: <A HREF="077415.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77411">[ date ]</a>
              <a href="thread.html#77411">[ thread ]</a>
              <a href="subject.html#77411">[ subject ]</a>
              <a href="author.html#77411">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
