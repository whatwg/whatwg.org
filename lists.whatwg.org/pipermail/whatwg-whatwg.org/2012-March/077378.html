<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] API for encoding/decoding ArrayBuffers into text
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3CCA%2Bc2ei_Ydr989o%3D7hCdYMBXeqLBa-1bCJhw5Xbb-RfYm8Qhe2A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077413.html">
   <LINK REL="Next"  HREF="035061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] API for encoding/decoding ArrayBuffers into text</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3CCA%2Bc2ei_Ydr989o%3D7hCdYMBXeqLBa-1bCJhw5Xbb-RfYm8Qhe2A%40mail.gmail.com%3E"
       TITLE="[whatwg] API for encoding/decoding ArrayBuffers into text">jonas at sicking.cc
       </A><BR>
    <I>Mon Mar 19 15:54:06 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077413.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
        <LI>Next message: <A HREF="035061.html">[whatwg] some thoughts on bring HTTP upon UDP: iWebPP - instant web	p2p technology
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77378">[ date ]</a>
              <a href="thread.html#77378">[ thread ]</a>
              <a href="subject.html#77378">[ subject ]</a>
              <a href="author.html#77378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Mar 19, 2012 at 7:00 AM, Henri Sivonen &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">hsivonen at iki.fi</A>&gt; wrote:
&gt;<i> On Wed, Mar 14, 2012 at 12:49 AM, Jonas Sicking &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jonas at sicking.cc</A>&gt; wrote:
</I>&gt;&gt;<i> Something that has come up a couple of times with content authors
</I>&gt;&gt;<i> lately has been the desire to convert an ArrayBuffer (or part thereof)
</I>&gt;&gt;<i> into a decoded string. Similarly being able to encode a string into an
</I>&gt;&gt;<i> ArrayBuffer (or part thereof).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Something as simple as
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> DOMString decode(ArrayBufferView source, DOMString encoding);
</I>&gt;&gt;<i> ArrayBufferView encode(DOMString source, DOMString encoding,
</I>&gt;&gt;<i> [optional] ArrayBufferView destination);
</I>&gt;<i>
</I>&gt;<i> It saddens me that this allows non-UTF-8 encodings. However, since use
</I>&gt;<i> cases for non-UTF-8 encodings were mentioned in this thread, I suggest
</I>&gt;<i> that the set of supported encodings be an enumerated set of encodings
</I>&gt;<i> stated in a spec and browsers MUST NOT support other encodings. The
</I>&gt;<i> set should probably be the set offered in the encoding popup at
</I>&gt;<i> <A HREF="http://validator.nu/?charset">http://validator.nu/?charset</A> or a subset thereof (containing at least
</I>&gt;<i> UTF-8 of course). (That set was derived by researching the
</I>&gt;<i> intersection of the encodings supported by browsers, Python and the
</I>&gt;<i> JDK.)
</I>
Yes, I think we should enumerate the set of encodings supported.
Ideally we'd for simplicity support the same set of enumerated
encodings everywhere in the platform and over time try to shrink that
set.

&gt;&gt;<i> would go a very long way.
</I>&gt;<i>
</I>&gt;<i> Are you sure that it's not necessary to support streaming conversion?
</I>&gt;<i> The suggested API design assumes you always have the entire data
</I>&gt;<i> sequence in a single DOMString or ArrayBufferView.
</I>&gt;<i>
</I>&gt;&gt;<i> The question is where to stick these
</I>&gt;&gt;<i> functions. Internationalization doesn't have a obvious object we can
</I>&gt;&gt;<i> hang functions off of (unlike, for example crypto), and the above
</I>&gt;&gt;<i> names are much too generic to turn into global functions.
</I>&gt;<i>
</I>&gt;<i> If we deem streaming conversion unnecessary, I'd put the methods on
</I>&gt;<i> DOMString and ArrayBufferView. It would be terribly sad to let the
</I>&gt;<i> schedules of various working groups affect the API design.
</I>
Streaming is a very good question. I hadn't thought about that.
Especially now that we have chunked ArrayBuffer support in XHR
streaming would seem like a much more interesting request.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077413.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
	<LI>Next message: <A HREF="035061.html">[whatwg] some thoughts on bring HTTP upon UDP: iWebPP - instant web	p2p technology
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77378">[ date ]</a>
              <a href="thread.html#77378">[ thread ]</a>
              <a href="subject.html#77378">[ subject ]</a>
              <a href="author.html#77378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
