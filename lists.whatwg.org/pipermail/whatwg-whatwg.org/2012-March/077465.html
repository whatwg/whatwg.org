<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] API for encoding/decoding ArrayBuffers into text
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3CCA%2Bc2ei-XbMpKgQS5PArdYPASc4kqD%3DyuvMYj4cnt1ZAmAUAFMw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077458.html">
   <LINK REL="Next"  HREF="077466.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] API for encoding/decoding ArrayBuffers into text</H1>
<!--htdig_noindex-->
    <B>Jonas Sicking</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20API%20for%20encoding/decoding%20ArrayBuffers%20into%20text&In-Reply-To=%3CCA%2Bc2ei-XbMpKgQS5PArdYPASc4kqD%3DyuvMYj4cnt1ZAmAUAFMw%40mail.gmail.com%3E"
       TITLE="[whatwg] API for encoding/decoding ArrayBuffers into text">jonas at sicking.cc
       </A><BR>
    <I>Mon Mar 26 17:33:56 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077458.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
        <LI>Next message: <A HREF="077466.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77465">[ date ]</a>
              <a href="thread.html#77465">[ thread ]</a>
              <a href="subject.html#77465">[ subject ]</a>
              <a href="author.html#77465">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Mar 26, 2012 at 4:40 PM, Joshua Bell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jsbell at chromium.org</A>&gt; wrote:
&gt;&gt;<i> * We lost the ability to decode from a arraybuffer and see how many
</I>&gt;&gt;<i> bytes were consumed before a null-terminator was hit. One not terribly
</I>&gt;&gt;<i> elegant solution would be to add a TextDecoder.decodeWithLength method
</I>&gt;&gt;<i> which return a DOMString+length tuple.
</I>&gt;<i>
</I>&gt;<i> Agreed, but of course see above - there was consensus earlier in the thread
</I>&gt;<i> that searching for null terminators should be done outside the API,
</I>&gt;<i> therefore the caller will have the length handy already. Yes, this would be
</I>&gt;<i> a big flaw since decoding at tightly packed data structure (e.g. array of
</I>&gt;<i> null terminated strings w/o length) would be impossible with just the
</I>&gt;<i> nullTerminator flag.
</I>
Requiring callers to find the null character first, and then use that
will require one additional pass over the encoded binary data though.
Also, if we put the API for finding the null character on the Decoder
object it doesn't seem like we're creating an API which is easier to
use, just one that has moved some of the logic from the API to every
caller.

Though I guess the best solution would be to add methods to DataView
which allows consuming an ArrayBuffer up to a null terminated point
and returns the decoded string. Potentially such a method could take a
Decoder object as argument.

/ Jonas

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077458.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
	<LI>Next message: <A HREF="077466.html">[whatwg] API for encoding/decoding ArrayBuffers into text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77465">[ date ]</a>
              <a href="thread.html#77465">[ thread ]</a>
              <a href="subject.html#77465">[ subject ]</a>
              <a href="author.html#77465">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
