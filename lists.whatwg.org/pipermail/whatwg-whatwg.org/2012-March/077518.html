<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Endianness of typed arrays
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Endianness%20of%20typed%20arrays&In-Reply-To=%3CCABirCh-9uU2jxmvf2jQoJDJ4Bu3iGEZZAgpZSsU65D9XS1YPbg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077508.html">
   <LINK REL="Next"  HREF="077521.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Endianness of typed arrays</H1>
<!--htdig_noindex-->
    <B>Glenn Maynard</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Endianness%20of%20typed%20arrays&In-Reply-To=%3CCABirCh-9uU2jxmvf2jQoJDJ4Bu3iGEZZAgpZSsU65D9XS1YPbg%40mail.gmail.com%3E"
       TITLE="[whatwg] Endianness of typed arrays">glenn at zewt.org
       </A><BR>
    <I>Wed Mar 28 16:30:19 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="077508.html">[whatwg] Endianness of typed arrays
</A></li>
        <LI>Next message: <A HREF="077521.html">[whatwg] Endianness of typed arrays
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77518">[ date ]</a>
              <a href="thread.html#77518">[ thread ]</a>
              <a href="subject.html#77518">[ subject ]</a>
              <a href="author.html#77518">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Wed, Mar 28, 2012 at 2:08 PM, Kenneth Russell &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">kbr at google.com</A>&gt; wrote:

&gt;<i> The top priority should be to implement DataView universally.
</I>&gt;<i>
</I>
DataView isn't relevant to the discussion.  People are using
ArrayBufferViews in ways that assume little-endian access, and that isn't
going to go away.  If any production browser is ever released on a
production big-endian system, it'll expose ArrayBuffers as little-endian,
even if that causes performance problems with WebGL, because it will
minimize the amount of breakage.

It's also unreasonable to expect web developers to go to extra effort for
big-endian systems (eg. by serving different, big-endian resources from
XHR).  You're expecting every developer using ArrayBuffer to jump hoops,
adding significant complexity and testing requirements, in order to support
an optimization on systems with essentially zero market share.  I'm
certainly not going to do that, and I doubt many other web developers will,
either; big endian systems aren't worth our time.

And for all realistic purposes, the world has standardized on
little-endian.  If people choose to develop a big-endian system today, the
challenges of doing so are their problem.  Just as new APIs (such as
WebSockets and Server-Sent Events) no longer spend time supporting legacy
encodings, simplifying everyone's life by only supporting UTF-8, new APIs
should stop pretending big endian is important and optimize for
little-endian.

All that said, to partially sidestep the issue, I'd propose adding
separate, explicitly big-endian and little-endian view types for each view
type.  That is,

Int16LEArray, Uint16LEArray
Int32LEArray, Uint32LEArray
Float32LEArray, Float64LEArray
Int16BEArray, Uint16BEArray
Int32BEArray, Uint32BEArray
Float32BEArray, Float32LEArray,
Float64BEArray, Float64LEArray

I think adding these is a no-brainer, since it's trivial and obviously
useful, and lets us at least pretend the issue doesn't exist...

On Wed, Mar 28, 2012 at 4:27 PM, Brandon Jones &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">tojiro at gmail.com</A>&gt; wrote:

&gt;<i> So the question is: What exactly are we expecting that &quot;magic&quot; to be? We
</I>&gt;<i> can't just swizzle every 4 bytes. Either the graphics driver must do the
</I>&gt;<i> endian swap as it processes the buffer, which is possible but entirely out
</I>&gt;<i> of the browsers control,
</I>

Please see Benoit's mail, for at least one possible approach.  It's hard to
do, and harder to do efficiently, but if you're creating a platform with
unusual endianness, it's you that needs to jump the hoops to make it work,
not every web developer in the world.

-- 
Glenn Maynard

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077508.html">[whatwg] Endianness of typed arrays
</A></li>
	<LI>Next message: <A HREF="077521.html">[whatwg] Endianness of typed arrays
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77518">[ date ]</a>
              <a href="thread.html#77518">[ thread ]</a>
              <a href="subject.html#77518">[ subject ]</a>
              <a href="author.html#77518">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
