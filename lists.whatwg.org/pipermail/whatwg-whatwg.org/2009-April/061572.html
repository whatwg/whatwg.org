<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] localStorage behavior when cookies mode is session-only
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20behavior%20when%20cookies%20mode%20is%20session-only&In-Reply-To=%3C49DE64E7.3060701%40allpeers.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061591.html">
   <LINK REL="Next"  HREF="061573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] localStorage behavior when cookies mode is session-only</H1>
<!--htdig_noindex-->
    <B>Honza Bambas</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20localStorage%20behavior%20when%20cookies%20mode%20is%20session-only&In-Reply-To=%3C49DE64E7.3060701%40allpeers.com%3E"
       TITLE="[whatwg] localStorage behavior when cookies mode is session-only">honzab at allpeers.com
       </A><BR>
    <I>Thu Apr  9 14:13:11 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061591.html">[whatwg] optgroup element used for selection
</A></li>
        <LI>Next message: <A HREF="061573.html">[whatwg] localStorage behavior when cookies mode is session-only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61572">[ date ]</a>
              <a href="thread.html#61572">[ thread ]</a>
              <a href="subject.html#61572">[ subject ]</a>
              <a href="author.html#61572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>In the W3C spec for localStorage 
<A HREF="http://dev.w3.org/html5/webstorage/#the-localstorage-attribute">http://dev.w3.org/html5/webstorage/#the-localstorage-attribute</A> is said 
to present it (the persistent storage) the same way as cookies.

There were suggestion to throw DOM_QUOTA_ERROR exception when storing to 
localStorage in case when cookies are in a session-only mode for a 
host/page. It makes sense from several reasons. This way web apps may 
decide or inform user about situation that the page cannot store to 
localStorage while there is no way for the page to figure out that 
cookies mode is session-only and web app still may freely read from the 
storage.

My suggestion is then:
- allow a page to obtain valid localStorage object
- allow read from it
- throw DOM_QUOTA_ERROR when storing to it

But I don't know what to do in case of call to clear() and removeItem() 
methods. It would exposes the cookie behavior again when it fails/throws.

-hb-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090409/1101e310/attachment-0002.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090409/1101e310/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061591.html">[whatwg] optgroup element used for selection
</A></li>
	<LI>Next message: <A HREF="061573.html">[whatwg] localStorage behavior when cookies mode is session-only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61572">[ date ]</a>
              <a href="thread.html#61572">[ thread ]</a>
              <a href="subject.html#61572">[ subject ]</a>
              <a href="author.html#61572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
