<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Worker feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3C5dd9e5c50904031035x4b95b0ds456944e9451936c8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019141.html">
   <LINK REL="Next"  HREF="019148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Worker feedback</H1>
<!--htdig_noindex-->
    <B>Jeremy Orlow</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3C5dd9e5c50904031035x4b95b0ds456944e9451936c8%40mail.gmail.com%3E"
       TITLE="[whatwg] Worker feedback">jorlow at google.com
       </A><BR>
    <I>Fri Apr  3 10:35:26 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019141.html">[whatwg] Worker feedback
</A></li>
        <LI>Next message: <A HREF="019148.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19143">[ date ]</a>
              <a href="thread.html#19143">[ thread ]</a>
              <a href="subject.html#19143">[ subject ]</a>
              <a href="author.html#19143">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Fri, Apr 3, 2009 at 2:18 AM, Anne van Kesteren &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">annevk at opera.com</A>&gt; wrote:

&gt;<i> On Fri, 03 Apr 2009 06:26:43 +0200, Robert O'Callahan &lt;
</I>&gt;<i> <A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Mozilla could probably get behind that, but I don't know who else is
</I>&gt;&gt;<i> willing to bite the bullet.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The problem already exists for document.cookie, no? And the current API is
</I>&gt;<i> by far the most convenient the use.
</I>

If I understood the discussion correctly, the spec for document.cookie never
stated anything about it being immutable while a script is running.  People
are now talking about specifying this, but there's been push back.  Also,
there's no way to guarantee serializability for the network traffic portion
so I'm guessing (hoping!) that this wouldn't be required in the JavaScript
side, even if it went through.

localStorage, on the other hand, does have language in the draft spec
stating that changes to localStorage must be serialized as if only one event
loop is running at a time.  That's the problem.  In other words, the
strictness of the concurrency control for localStorage is what makes this
different from document.cookie.


As for convenience:

The spec is written in such a way that you can't have more that one event
loop per browser window/worker, and everything is essentially tied to this
one event loop.  In other words, each window/worker can't run on more than
one CPU core at a time.  Thus, the only way for a web application to scale
in todays world is going to be through additional windows and/or workers.

I agree that the current API is quite convenient, but it worries me a great
deal that it's synchronous.  Now that navigator.unlockStorage() has been
added to the spec and you can't access localStorage from workers, I'm less
worried.  But I still feel like we're going to regret this in the next
couple years and/or people will simply avoid localStorage.

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090403/be36cf34/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090403/be36cf34/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019141.html">[whatwg] Worker feedback
</A></li>
	<LI>Next message: <A HREF="019148.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19143">[ date ]</a>
              <a href="thread.html#19143">[ thread ]</a>
              <a href="subject.html#19143">[ subject ]</a>
              <a href="author.html#19143">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
