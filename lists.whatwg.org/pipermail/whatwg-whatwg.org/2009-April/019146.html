<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Worker feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3Cf965ae410904031425q21102fcdh1911376d1853d195%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019144.html">
   <LINK REL="Next"  HREF="019147.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Worker feedback</H1>
<!--htdig_noindex-->
    <B>Drew Wilson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3Cf965ae410904031425q21102fcdh1911376d1853d195%40mail.gmail.com%3E"
       TITLE="[whatwg] Worker feedback">atwilson at google.com
       </A><BR>
    <I>Fri Apr  3 14:25:54 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019144.html">[whatwg] Worker feedback
</A></li>
        <LI>Next message: <A HREF="019147.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19146">[ date ]</a>
              <a href="thread.html#19146">[ thread ]</a>
              <a href="subject.html#19146">[ subject ]</a>
              <a href="author.html#19146">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I know I said I would stay out of this conversation, but I feel obliged to
share a data point that's pertinent to our API design.
The structured storage spec has an asynchronous API currently. There are no
shortage of experienced javascript programmers at Google, and yet the single
biggest piece of feedback I've gotten from the internal app community has
been (essentially): &quot;The asynchronous APIs are too cumbersome. We are going
to delay porting over to use the HTML5 APIs until we have synchronous APIs,
like the ones in Gears&quot;.

So, we should all take the whining of pampered Google engineers with a grain
of salt :), but the point remains that even though callbacks are
conceptually familiar and &quot;easy to use&quot;, it's not always convenient (or
possible!) for an application to stop an operation in the middle and resume
it via an asynchronous callback. Imagine if you're a library author that
exposes a synchronous API for your clients - now you'd like to use
localStorage within your library, but there's no way to do it while
maintaining your existing synchronous APIs.

If we try to force everyone to use asynchronous APIs to access local
storage, the first thing everyone is going to do is build their own
write-through caching wrapper objects around local storage to give them
synchronous read access and lazy writes, which generates precisely the type
of racy behavior we're trying to avoid.

If we can capture the correct behavior using synchronous APIs, we should.

-atw

On Fri, Apr 3, 2009 at 11:44 AM, Tab Atkins Jr. &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">jackalmage at gmail.com</A>&gt;wrote:

&gt;<i> On Thu, Apr 2, 2009 at 8:37 PM, Robert O'Callahan &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">robert at ocallahan.org</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; I agree it would make sense for new APIs to impose much greater
</I>&gt;<i> constraints
</I>&gt;<i> &gt; on consumers, such as requiring them to factor code into transactions,
</I>&gt;<i> &gt; declare up-front the entire scope of resources that will be accessed, and
</I>&gt;<i> &gt; enforce those restrictions, preferably syntactically --- Jonas'
</I>&gt;<i> asynchronous
</I>&gt;<i> &gt; multi-resource-acquisition callback, for example.
</I>&gt;<i>
</I>&gt;<i> Speaking as a novice javascript developer, this feels like the
</I>&gt;<i> cleanest, simplest, most easily comprehensible way to solve this
</I>&gt;<i> problem.  We define what needs to be locked all at once, provide a
</I>&gt;<i> callback, and within the dynamic context of the callback no further
</I>&gt;<i> locks are acquirable.  You have to completely exit the callback and
</I>&gt;<i> start a new lock block if you need more resources.
</I>&gt;<i>
</I>&gt;<i> This prevents deadlocks, while still giving us developers a simple way
</I>&gt;<i> to express what we need.  As well, callbacks are at this point a
</I>&gt;<i> relatively novice concept, as every major javascript library makes
</I>&gt;<i> heavy use of them.
</I>&gt;<i>
</I>&gt;<i> ~TJ
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090403/000f9ad2/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090403/000f9ad2/attachment.htm</A>&gt;
</PRE>

















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019144.html">[whatwg] Worker feedback
</A></li>
	<LI>Next message: <A HREF="019147.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19146">[ date ]</a>
              <a href="thread.html#19146">[ thread ]</a>
              <a href="subject.html#19146">[ subject ]</a>
              <a href="author.html#19146">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
