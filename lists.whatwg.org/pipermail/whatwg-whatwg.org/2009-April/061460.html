<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Worker feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3CPine.LNX.4.62.0904060832060.25058%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061459.html">
   <LINK REL="Next"  HREF="061465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Worker feedback</H1>
<!--htdig_noindex-->
    <B>Ian Hickson</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3CPine.LNX.4.62.0904060832060.25058%40hixie.dreamhostps.com%3E"
       TITLE="[whatwg] Worker feedback">ian at hixie.ch
       </A><BR>
    <I>Mon Apr  6 01:38:43 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="061459.html">[whatwg] Worker feedback
</A></li>
        <LI>Next message: <A HREF="061465.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61460">[ date ]</a>
              <a href="thread.html#61460">[ thread ]</a>
              <a href="subject.html#61460">[ subject ]</a>
              <a href="author.html#61460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, 6 Apr 2009, Darin Fisher wrote:
&gt;<i> 
</I>&gt;<i> In addition to alert(), don't forget about all the great state changing 
</I>&gt;<i> things that can happen to the cookie database (and other data stores) 
</I>&gt;<i> during a synchronous XMLHttpRequest (or synchronous document.load) in 
</I>&gt;<i> Firefox. Maybe those are just bugs?
</I>
The HTML5 spec says the storage mutex is released when alert() is called. 
I've asked Anne (editor of the XHR spec) to say that it is released when a 
sync XHR is started, too. Per the HTML5 spec, setting the cookies from the 
network grabs the storage mutex briefly. (Reading them is implicitly 
atomic, but might happen while someone else holds the mutex, so per spec 
there is still a chance of the cookies sent to the server being in an 
inconsistent state if they are read while a script is in the middle of a 
multi-stage cookie update.)

I don't really mind if the spec says whether cookies should be protected 
by the storage mutex or not (the spec says they should be because that 
seems to be the majority opinion). I'm pretty sure localStorage should be 
so protected, though. I don't really see how to get away from that.

-- 
Ian Hickson               U+1047E                )\._.,--....,'``.    fL
<A HREF="http://ln.hixie.ch/">http://ln.hixie.ch/</A>       U+263A                /,   _.. \   _\  ;`._ ,.
Things that are impossible just take longer.   `._.-(,_..'--(,_..'`-.;.'

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061459.html">[whatwg] Worker feedback
</A></li>
	<LI>Next message: <A HREF="061465.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61460">[ date ]</a>
              <a href="thread.html#61460">[ thread ]</a>
              <a href="subject.html#61460">[ subject ]</a>
              <a href="author.html#61460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
