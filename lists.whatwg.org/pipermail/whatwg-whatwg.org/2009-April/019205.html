<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] Worker feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3C11e306600904061948q7e041a59lf2ee2ef29f86cb23%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019210.html">
   <LINK REL="Next"  HREF="019200.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] Worker feedback</H1>
<!--htdig_noindex-->
    <B>Robert O'Callahan</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20Worker%20feedback&In-Reply-To=%3C11e306600904061948q7e041a59lf2ee2ef29f86cb23%40mail.gmail.com%3E"
       TITLE="[whatwg] Worker feedback">robert at ocallahan.org
       </A><BR>
    <I>Mon Apr  6 19:48:40 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019210.html">[whatwg] Worker feedback
</A></li>
        <LI>Next message: <A HREF="019200.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19205">[ date ]</a>
              <a href="thread.html#19205">[ thread ]</a>
              <a href="subject.html#19205">[ subject ]</a>
              <a href="author.html#19205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Tue, Apr 7, 2009 at 5:04 AM, Michael Nordman &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">michaeln at google.com</A>&gt; wrote:

&gt;<i> Consider three threads
</I>&gt;<i> PageA
</I>&gt;<i> PageB
</I>&gt;<i> PluginC
</I>&gt;<i>
</I>&gt;<i> PageA
</I>&gt;<i> -grabs storage lock
</I>&gt;<i>
</I>&gt;<i> PluginC
</I>&gt;<i> -calls out to PageB (everything in NPAPI is synchronous)
</I>&gt;<i> -now waiting for PageB to return
</I>&gt;<i>
</I>&gt;<i> PageB
</I>&gt;<i> -while handling the plugins callback, attempts to grab the storage lock
</I>&gt;<i> -BLOCKED waiting for PageA to release it
</I>&gt;<i>
</I>&gt;<i> PageA
</I>&gt;<i> -calls plugin (sync method call)
</I>&gt;<i> -BLOCK waiting indirectly for PageB
</I>&gt;<i>
</I>&gt;<i> == DEADLOCK
</I>&gt;<i>
</I>
What happens if we don't have storage locks but PageB does a sync XHR or
alert() inside the callout from the plugin? All the other pages containing
plugins of that type lock up?

Rob
-- 
&quot;He was pierced for our transgressions, he was crushed for our iniquities;
the punishment that brought us peace was upon him, and by his wounds we are
healed. We all, like sheep, have gone astray, each of us has turned to his
own way; and the LORD has laid on him the iniquity of us all.&quot; [Isaiah
53:5-6]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090407/e9dee08b/attachment.htm">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20090407/e9dee08b/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019210.html">[whatwg] Worker feedback
</A></li>
	<LI>Next message: <A HREF="019200.html">[whatwg] Worker feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19205">[ date ]</a>
              <a href="thread.html#19205">[ thread ]</a>
              <a href="subject.html#19205">[ subject ]</a>
              <a href="author.html#19205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
