<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [whatwg] seamless iframes and event propagation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20seamless%20iframes%20and%20event%20propagation&In-Reply-To=%3CCANMdWTvWtw_EvehQnrZtiVHc5iFYgwStvr9oKxc2d8Bdbxqkcw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036636.html">
   <LINK REL="Next"  HREF="036645.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[whatwg] seamless iframes and event propagation</H1>
<!--htdig_noindex-->
    <B>Ojan Vafai</B> 
    <A HREF="mailto:whatwg%40lists.whatwg.org?Subject=Re%3A%20%5Bwhatwg%5D%20seamless%20iframes%20and%20event%20propagation&In-Reply-To=%3CCANMdWTvWtw_EvehQnrZtiVHc5iFYgwStvr9oKxc2d8Bdbxqkcw%40mail.gmail.com%3E"
       TITLE="[whatwg] seamless iframes and event propagation">ojan at chromium.org
       </A><BR>
    <I>Tue Jul 17 16:28:17 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="036636.html">[whatwg] seamless iframes and event propagation
</A></li>
        <LI>Next message: <A HREF="036645.html">[whatwg] seamless iframes and event propagation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36644">[ date ]</a>
              <a href="thread.html#36644">[ thread ]</a>
              <a href="subject.html#36644">[ subject ]</a>
              <a href="author.html#36644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On Mon, Jul 16, 2012 at 9:24 AM, Dimitri Glazkov &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">dglazkov at chromium.org</A>&gt;wrote:

&gt;<i> On Sat, Jul 14, 2012 at 4:45 AM, Olli Pettay &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">Olli.Pettay at helsinki.fi</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 07/14/2012 12:38 AM, Ojan Vafai wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; It's been pointed out to me that what I'm asking for is essentially the
</I>&gt;<i> &gt;&gt; same retargeting as we do for shadow DOMs in web components, where the
</I>&gt;<i> &gt;&gt; iframe is the shadow host and the document is the shadow root. This
</I>&gt;<i> covers
</I>&gt;<i> &gt;&gt; all the details of what properties need to be updated when crossing the
</I>&gt;<i> &gt;&gt; document boundary. The only addition on top of that is that we need to
</I>&gt;<i> &gt;&gt; convert the coordinate space of mouse events appropriately when we cross
</I>&gt;<i> &gt;&gt; the boundary.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What, you'd propagate mouse events to parent doc but update coordinate
</I>&gt;<i> related coordinates when
</I>&gt;<i> &gt; passing the doc boundary... that is odd.
</I>&gt;<i> &gt; Something in the original target document may keep a reference to the
</I>&gt;<i> event and then suddenly during event dispatch the
</I>&gt;<i> &gt; coordinate values would change.
</I>&gt;<i>
</I>&gt;<i> We should probably recreate an event object at each seamless frame
</I>&gt;<i> boundary.
</I>&gt;<i>
</I>
As I look at the event retargetting spec more closely, I think it's dealing
with a different set of design constraints and the seamless iframe
retargeting could do something much simpler.

Here's how I picture it working:
1. Create an event in the outer document with the seamless iframe
as its target and mouse events in the outer document's coordinate space and
begin the capture phase.
2. When the capture phase is done, if stopPropagation was not called, fire
a new event in the inner document as normal.
3. Execute target phase in the outer document.
4. Execute the bubble phase in the outer document.

If preventDefault is called on either the outer document's event or the
inner document's event, then the default action of the event is prevented.

It's not clear to me if any events should be exempt from this. For example,
should focuses/blurs that are entirely contained within the seamless iframe
fire in the outer document? My intuition is no, but I could easily be
swayed either way.

Ojan
</PRE>






<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036636.html">[whatwg] seamless iframes and event propagation
</A></li>
	<LI>Next message: <A HREF="036645.html">[whatwg] seamless iframes and event propagation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36644">[ date ]</a>
              <a href="thread.html#36644">[ thread ]</a>
              <a href="subject.html#36644">[ subject ]</a>
              <a href="author.html#36644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org">More information about the whatwg
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
