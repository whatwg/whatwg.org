<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r6184 - [giow] (0) Try to clean up the stuff about Unicode	characters. Fixing http://www [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6184%20-%20%5Bgiow%5D%20%280%29%20Try%20to%20clean%20up%20the%20stuff%20about%20Unicode%0A%09characters.%20Fixing%20http%3A//www%20%5B...%5D&In-Reply-To=%3C20110603194011.95F101CBC001%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013050.html">
   <LINK REL="Next"  HREF="013052.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r6184 - [giow] (0) Try to clean up the stuff about Unicode	characters. Fixing http://www [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6184%20-%20%5Bgiow%5D%20%280%29%20Try%20to%20clean%20up%20the%20stuff%20about%20Unicode%0A%09characters.%20Fixing%20http%3A//www%20%5B...%5D&In-Reply-To=%3C20110603194011.95F101CBC001%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r6184 - [giow] (0) Try to clean up the stuff about Unicode	characters. Fixing http://www [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Jun  3 12:40:11 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013050.html">[html5] r6183 - [e] (0) A first attempt at an example for a WebVTT	file. Fixing http://www.w3.or [...]
</A></li>
        <LI>Next message: <A HREF="013052.html">[html5] r6185 - [giow] (0) Make structured clone handle getters.	Fixing http://www.w3.org/Bugs/P [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13051">[ date ]</a>
              <a href="thread.html#13051">[ thread ]</a>
              <a href="subject.html#13051">[ subject ]</a>
              <a href="author.html#13051">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2011-06-03 12:40:10 -0700 (Fri, 03 Jun 2011)
New Revision: 6184

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Try to clean up the stuff about Unicode characters.
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=12100">http://www.w3.org/Bugs/Public/show_bug.cgi?id=12100</A>

Modified: complete.html
===================================================================
--- complete.html	2011-06-03 01:21:42 UTC (rev 6183)
+++ complete.html	2011-06-03 19:40:10 UTC (rev 6184)
@@ -2944,9 +2944,8 @@
    different &lt;meta charset&gt; elements applying in each case.
   --&gt;
 
-  &lt;p&gt;The term &lt;dfn title=&quot;&quot;&gt;Unicode character&lt;/dfn&gt; is used to mean a
-  &lt;i title=&quot;&quot;&gt;Unicode scalar value&lt;/i&gt; (i.e. any Unicode code point
-  that is not a surrogate code point). &lt;a href=#refsUNICODE&gt;[UNICODE]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;The term &lt;dfn id=unicode-character&gt;Unicode character&lt;/dfn&gt; is used to mean a &lt;i title=&quot;&quot;&gt;Unicode scalar value&lt;/i&gt; (i.e. any Unicode code point that
+  is not a surrogate code point). &lt;a href=#refsUNICODE&gt;[UNICODE]&lt;/a&gt;&lt;/p&gt;
 
 
 
@@ -3425,14 +3424,6 @@
     is passed an Infinity or Not-a-Number (NaN) value, a
     &lt;code&gt;&lt;a href=#not_supported_err&gt;NOT_SUPPORTED_ERR&lt;/a&gt;&lt;/code&gt; exception must be raised.&lt;/p&gt;
 
-    &lt;p&gt;Except where otherwise specified, if a method has an argument
-    of type &lt;code&gt;DOMString&lt;/code&gt;, or if an IDL attribute is assigned
-    a new value of type &lt;code&gt;DOMString&lt;/code&gt;, the user agent must
-    &lt;span title=dfn-obtain-unicode&gt;convert the
-    &lt;code&gt;DOMString&lt;/code&gt; to a sequence of Unicode characters&lt;/span&gt;
-    to obtain the string on which the algorithms in this specification
-    are to operate. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;JavaScript&lt;/dt&gt;
@@ -6380,7 +6371,9 @@
     characters as defined by UTF-8.&lt;/p&gt;
 
     &lt;p&gt;If any percent-encoded octets in that component are not valid
-    UTF-8 sequences, then return an error and abort these steps.&lt;/p&gt;
+    UTF-8 sequences (e.g. sequences of percent-encoded octets that
+    expand to surrogate code points), then return an error and abort
+    these steps.&lt;/p&gt;
 
     &lt;p&gt;Apply the IDNA ToASCII algorithm to the matching substring,
     with both the AllowUnassigned and UseSTD3ASCIIRules flags
@@ -16096,11 +16089,11 @@
 
          &lt;dd&gt;
 
-          &lt;p&gt;The contents of that file, interpreted as string of
-          Unicode characters, are the script source.&lt;/p&gt;
+          &lt;p&gt;The contents of that file, interpreted as a Unicode
+          string, are the script source.&lt;/p&gt;
 
-          &lt;p&gt;To obtain the string of Unicode characters, the user
-          agent run the following steps:&lt;/p&gt;
+          &lt;p&gt;To obtain the Unicode string, the user agent run the
+          following steps:&lt;/p&gt;
 
           &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the resource's &lt;a href=#content-type title=Content-Type&gt;Content
            Type metadata&lt;/a&gt;, if any, specifies a character
@@ -16471,11 +16464,11 @@
 star          = %x002A ; U+002A ASTERISK (*)
 slash         = %x002F ; U+002F SOLIDUS (/)
 not-newline   = %x0000-0009 / %x000B-10FFFF
-                ; a Unicode character other than U+000A LINE FEED (LF)
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+000A LINE FEED (LF)
 not-star      = %x0000-0029 / %x002B-10FFFF
-                ; a Unicode character other than U+002A ASTERISK (*)
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+002A ASTERISK (*)
 not-slash     = %x0000-002E / %x0030-10FFFF
-                ; a Unicode character other than U+002F SOLIDUS (/)&lt;/pre&gt;
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+002F SOLIDUS (/)&lt;/pre&gt;
 
   &lt;p class=note&gt;This corresponds to putting the contents of the
   element in JavaScript comments.&lt;/p&gt;
@@ -32310,18 +32303,13 @@
   parsing the provided byte stream. If the stream lacks this WebVTT
   file signature, then the parser aborts.&lt;/p&gt;
 
-  &lt;p&gt;When converting the bytes into Unicode characters, if the
-  encoding used is UTF-8, the bytes must be &lt;a href=#decoded-as-utf-8,-with-error-handling title=&quot;decoded as
-  UTF-8, with error handling&quot;&gt;decoded with the error handling&lt;/a&gt;
-  defined in this specification, and all U+0000 NULL characters must
-  be replaced by U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
-
   &lt;p&gt;The &lt;dfn id=webvtt-parser-algorithm&gt;WebVTT parser algorithm&lt;/dfn&gt; is as follows:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being parsed,
-   after conversion to Unicode and after the replacement of U+0000
-   NULL characters described above.&lt;/li&gt;
+   after conversion to Unicode.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Replace all U+0000 NULL characters in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; by U+FFFD REPLACEMENT CHARACTERs.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be a pointer into &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, initially pointing at the start of the
    string. In an &lt;a href=#incremental-webvtt-parser&gt;incremental WebVTT parser&lt;/a&gt;, when this
    algorithm (or further algorithms that it uses) moves the &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; pointer, the user agent must wait until
@@ -64072,14 +64060,14 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;decoded fragid&lt;/var&gt; be the result of
    expanding any sequences of percent-encoded octets in &lt;var title=&quot;&quot;&gt;fragid&lt;/var&gt; that are valid UTF-8 sequences into Unicode
    characters as defined by UTF-8. If any percent-encoded octets in
-   that string are not valid UTF-8 sequences, then skip this step and
-   the next one.&lt;/p&gt;
+   that string are not valid UTF-8 sequences (e.g. they expand to
+   surrogate code points), then skip this step and the next one.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;If this step was not skipped and there is an element in the
-   DOM that has an &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; exactly equal to &lt;var title=&quot;&quot;&gt;decoded
-   fragid&lt;/var&gt;, then the first such element in tree order is
-   &lt;a href=#the-indicated-part-of-the-document&gt;the indicated part of the document&lt;/a&gt;; stop the algorithm
-   here.&lt;/li&gt;
+   DOM that has an &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; exactly equal to
+   &lt;var title=&quot;&quot;&gt;decoded fragid&lt;/var&gt;, then the first such element in
+   tree order is &lt;a href=#the-indicated-part-of-the-document&gt;the indicated part of the document&lt;/a&gt;; stop
+   the algorithm here.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element in the DOM that has a
    &lt;code title=attr-a-name&gt;&lt;a href=#attr-a-name&gt;name&lt;/a&gt;&lt;/code&gt; attribute whose value is
@@ -78565,9 +78553,9 @@
 colon         = %x003A ; U+003A COLON (:)
 bom           = %xFEFF ; U+FEFF BYTE ORDER MARK
 name-char     = %x0000-0009 / %x000B-000C / %x000E-0039 / %x003B-10FFFF
-                ; a Unicode character other than U+000A LINE FEED (LF), U+000D CARRIAGE RETURN (CR), or U+003A COLON (:)
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+000A LINE FEED (LF), U+000D CARRIAGE RETURN (CR), or U+003A COLON (:)
 any-char      = %x0000-0009 / %x000B-000C / %x000E-10FFFF
-                ; a Unicode character other than U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR)&lt;/pre&gt;
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR)&lt;/pre&gt;
 
   &lt;p&gt;Event streams in this format must always be encoded as
   UTF-8. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
@@ -81820,12 +81808,13 @@
   &lt;h4 id=text-1&gt;&lt;span class=secno&gt;13.1.3 &lt;/span&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-text title=syntax-text&gt;Text&lt;/dfn&gt; is allowed inside elements,
-  attribute values, and comments. Text must consist of Unicode
-  characters. Text must not contain U+0000 characters. Text must not
-  contain permanently undefined Unicode characters (noncharacters).
-  Text must not contain control characters other than &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt;. Extra constraints
-  are placed on what is and what is not allowed in text based on where
-  the text is to be put, as described in the other sections.&lt;/p&gt;
+  attribute values, and comments. Text must consist of &lt;a href=#unicode-character title=&quot;Unicode character&quot;&gt;Unicode characters&lt;/a&gt;. Text must not
+  contain U+0000 characters. Text must not contain permanently
+  undefined Unicode characters (noncharacters). Text must not contain
+  control characters other than &lt;a href=#space-character title=&quot;space character&quot;&gt;space
+  characters&lt;/a&gt;. Extra constraints are placed on what is and what
+  is not allowed in text based on where the text is to be put, as
+  described in the other sections.&lt;/p&gt;
 
 
   &lt;h5 id=newlines&gt;&lt;span class=secno&gt;13.1.3.1 &lt;/span&gt;Newlines&lt;/h5&gt;
@@ -82020,7 +82009,7 @@
   &lt;h4 id=overview-of-the-parsing-model&gt;&lt;span class=secno&gt;13.2.1 &lt;/span&gt;Overview of the parsing model&lt;/h4&gt;
 
   &lt;p&gt;The input to the HTML parsing process consists of a stream of
-  Unicode characters, which is passed through a
+  Unicode code points, which is passed through a
   &lt;a href=#tokenization&gt;tokenization&lt;/a&gt; stage followed by a &lt;a href=#tree-construction&gt;tree
   construction&lt;/a&gt; stage. The output is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
   object.&lt;/p&gt;
@@ -82069,7 +82058,7 @@
 
   &lt;h4 id=the-input-stream&gt;&lt;span class=secno&gt;13.2.2 &lt;/span&gt;The &lt;dfn&gt;input stream&lt;/dfn&gt;&lt;/h4&gt;
 
-  &lt;p&gt;The stream of Unicode characters that comprises the input to the
+  &lt;p&gt;The stream of Unicode code points that comprises the input to the
   tokenization stage will be initially seen by the user agent as a
   stream of bytes (typically coming over the network or from the local
   file system). The bytes encode the actual characters according to a
@@ -82107,8 +82096,8 @@
   that encoding is &lt;i&gt;tentative&lt;/i&gt; or &lt;i&gt;certain&lt;/i&gt;, is &lt;a href=#meta-charset-during-parse&gt;used during the parsing&lt;/a&gt; to
   determine whether to &lt;a href=#change-the-encoding&gt;change the encoding&lt;/a&gt;. If no
   encoding is necessary, e.g. because the parser is operating on a
-  stream of Unicode characters and doesn't have to use an encoding at
-  all, then the &lt;a href=#concept-encoding-confidence title=concept-encoding-confidence&gt;confidence&lt;/a&gt; is
+  Unicode stream and doesn't have to use an encoding at all, then the
+  &lt;a href=#concept-encoding-confidence title=concept-encoding-confidence&gt;confidence&lt;/a&gt; is
   &lt;i&gt;irrelevant&lt;/i&gt;.&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the user has explicitly instructed the user agent to
@@ -82730,7 +82719,7 @@
   &lt;h5 id=preprocessing-the-input-stream&gt;&lt;span class=secno&gt;13.2.2.3 &lt;/span&gt;Preprocessing the input stream&lt;/h5&gt;
 
   &lt;p&gt;Given an encoding, the bytes in the input stream must be
-  converted to Unicode characters for the tokenizer, as described by
+  converted to Unicode code points for the tokenizer, as described by
   the rules for that encoding, except that the leading U+FEFF BYTE
   ORDER MARK character, if any, must not be stripped by the encoding
   layer (it is stripped by the rule below).&lt;/p&gt; &lt;!-- this is to

Modified: index
===================================================================
--- index	2011-06-03 01:21:42 UTC (rev 6183)
+++ index	2011-06-03 19:40:10 UTC (rev 6184)
@@ -2961,9 +2961,8 @@
    different &lt;meta charset&gt; elements applying in each case.
   --&gt;
 
-  &lt;p&gt;The term &lt;dfn title=&quot;&quot;&gt;Unicode character&lt;/dfn&gt; is used to mean a
-  &lt;i title=&quot;&quot;&gt;Unicode scalar value&lt;/i&gt; (i.e. any Unicode code point
-  that is not a surrogate code point). &lt;a href=#refsUNICODE&gt;[UNICODE]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;The term &lt;dfn id=unicode-character&gt;Unicode character&lt;/dfn&gt; is used to mean a &lt;i title=&quot;&quot;&gt;Unicode scalar value&lt;/i&gt; (i.e. any Unicode code point that
+  is not a surrogate code point). &lt;a href=#refsUNICODE&gt;[UNICODE]&lt;/a&gt;&lt;/p&gt;
 
 
 
@@ -3442,14 +3441,6 @@
     is passed an Infinity or Not-a-Number (NaN) value, a
     &lt;code&gt;&lt;a href=#not_supported_err&gt;NOT_SUPPORTED_ERR&lt;/a&gt;&lt;/code&gt; exception must be raised.&lt;/p&gt;
 
-    &lt;p&gt;Except where otherwise specified, if a method has an argument
-    of type &lt;code&gt;DOMString&lt;/code&gt;, or if an IDL attribute is assigned
-    a new value of type &lt;code&gt;DOMString&lt;/code&gt;, the user agent must
-    &lt;span title=dfn-obtain-unicode&gt;convert the
-    &lt;code&gt;DOMString&lt;/code&gt; to a sequence of Unicode characters&lt;/span&gt;
-    to obtain the string on which the algorithms in this specification
-    are to operate. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;JavaScript&lt;/dt&gt;
@@ -6366,7 +6357,9 @@
     characters as defined by UTF-8.&lt;/p&gt;
 
     &lt;p&gt;If any percent-encoded octets in that component are not valid
-    UTF-8 sequences, then return an error and abort these steps.&lt;/p&gt;
+    UTF-8 sequences (e.g. sequences of percent-encoded octets that
+    expand to surrogate code points), then return an error and abort
+    these steps.&lt;/p&gt;
 
     &lt;p&gt;Apply the IDNA ToASCII algorithm to the matching substring,
     with both the AllowUnassigned and UseSTD3ASCIIRules flags
@@ -16082,11 +16075,11 @@
 
          &lt;dd&gt;
 
-          &lt;p&gt;The contents of that file, interpreted as string of
-          Unicode characters, are the script source.&lt;/p&gt;
+          &lt;p&gt;The contents of that file, interpreted as a Unicode
+          string, are the script source.&lt;/p&gt;
 
-          &lt;p&gt;To obtain the string of Unicode characters, the user
-          agent run the following steps:&lt;/p&gt;
+          &lt;p&gt;To obtain the Unicode string, the user agent run the
+          following steps:&lt;/p&gt;
 
           &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the resource's &lt;a href=#content-type title=Content-Type&gt;Content
            Type metadata&lt;/a&gt;, if any, specifies a character
@@ -16457,11 +16450,11 @@
 star          = %x002A ; U+002A ASTERISK (*)
 slash         = %x002F ; U+002F SOLIDUS (/)
 not-newline   = %x0000-0009 / %x000B-10FFFF
-                ; a Unicode character other than U+000A LINE FEED (LF)
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+000A LINE FEED (LF)
 not-star      = %x0000-0029 / %x002B-10FFFF
-                ; a Unicode character other than U+002A ASTERISK (*)
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+002A ASTERISK (*)
 not-slash     = %x0000-002E / %x0030-10FFFF
-                ; a Unicode character other than U+002F SOLIDUS (/)&lt;/pre&gt;
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+002F SOLIDUS (/)&lt;/pre&gt;
 
   &lt;p class=note&gt;This corresponds to putting the contents of the
   element in JavaScript comments.&lt;/p&gt;
@@ -32299,18 +32292,13 @@
   parsing the provided byte stream. If the stream lacks this WebVTT
   file signature, then the parser aborts.&lt;/p&gt;
 
-  &lt;p&gt;When converting the bytes into Unicode characters, if the
-  encoding used is UTF-8, the bytes must be &lt;a href=#decoded-as-utf-8,-with-error-handling title=&quot;decoded as
-  UTF-8, with error handling&quot;&gt;decoded with the error handling&lt;/a&gt;
-  defined in this specification, and all U+0000 NULL characters must
-  be replaced by U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
-
   &lt;p&gt;The &lt;dfn id=webvtt-parser-algorithm&gt;WebVTT parser algorithm&lt;/dfn&gt; is as follows:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being parsed,
-   after conversion to Unicode and after the replacement of U+0000
-   NULL characters described above.&lt;/li&gt;
+   after conversion to Unicode.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Replace all U+0000 NULL characters in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; by U+FFFD REPLACEMENT CHARACTERs.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be a pointer into &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, initially pointing at the start of the
    string. In an &lt;a href=#incremental-webvtt-parser&gt;incremental WebVTT parser&lt;/a&gt;, when this
    algorithm (or further algorithms that it uses) moves the &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; pointer, the user agent must wait until
@@ -64061,14 +64049,14 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;decoded fragid&lt;/var&gt; be the result of
    expanding any sequences of percent-encoded octets in &lt;var title=&quot;&quot;&gt;fragid&lt;/var&gt; that are valid UTF-8 sequences into Unicode
    characters as defined by UTF-8. If any percent-encoded octets in
-   that string are not valid UTF-8 sequences, then skip this step and
-   the next one.&lt;/p&gt;
+   that string are not valid UTF-8 sequences (e.g. they expand to
+   surrogate code points), then skip this step and the next one.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;If this step was not skipped and there is an element in the
-   DOM that has an &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; exactly equal to &lt;var title=&quot;&quot;&gt;decoded
-   fragid&lt;/var&gt;, then the first such element in tree order is
-   &lt;a href=#the-indicated-part-of-the-document&gt;the indicated part of the document&lt;/a&gt;; stop the algorithm
-   here.&lt;/li&gt;
+   DOM that has an &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; exactly equal to
+   &lt;var title=&quot;&quot;&gt;decoded fragid&lt;/var&gt;, then the first such element in
+   tree order is &lt;a href=#the-indicated-part-of-the-document&gt;the indicated part of the document&lt;/a&gt;; stop
+   the algorithm here.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element in the DOM that has a
    &lt;code title=attr-a-name&gt;&lt;a href=#attr-a-name&gt;name&lt;/a&gt;&lt;/code&gt; attribute whose value is
@@ -77566,12 +77554,13 @@
   &lt;h4 id=text-1&gt;&lt;span class=secno&gt;11.1.3 &lt;/span&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-text title=syntax-text&gt;Text&lt;/dfn&gt; is allowed inside elements,
-  attribute values, and comments. Text must consist of Unicode
-  characters. Text must not contain U+0000 characters. Text must not
-  contain permanently undefined Unicode characters (noncharacters).
-  Text must not contain control characters other than &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt;. Extra constraints
-  are placed on what is and what is not allowed in text based on where
-  the text is to be put, as described in the other sections.&lt;/p&gt;
+  attribute values, and comments. Text must consist of &lt;a href=#unicode-character title=&quot;Unicode character&quot;&gt;Unicode characters&lt;/a&gt;. Text must not
+  contain U+0000 characters. Text must not contain permanently
+  undefined Unicode characters (noncharacters). Text must not contain
+  control characters other than &lt;a href=#space-character title=&quot;space character&quot;&gt;space
+  characters&lt;/a&gt;. Extra constraints are placed on what is and what
+  is not allowed in text based on where the text is to be put, as
+  described in the other sections.&lt;/p&gt;
 
 
   &lt;h5 id=newlines&gt;&lt;span class=secno&gt;11.1.3.1 &lt;/span&gt;Newlines&lt;/h5&gt;
@@ -77766,7 +77755,7 @@
   &lt;h4 id=overview-of-the-parsing-model&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Overview of the parsing model&lt;/h4&gt;
 
   &lt;p&gt;The input to the HTML parsing process consists of a stream of
-  Unicode characters, which is passed through a
+  Unicode code points, which is passed through a
   &lt;a href=#tokenization&gt;tokenization&lt;/a&gt; stage followed by a &lt;a href=#tree-construction&gt;tree
   construction&lt;/a&gt; stage. The output is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
   object.&lt;/p&gt;
@@ -77815,7 +77804,7 @@
 
   &lt;h4 id=the-input-stream&gt;&lt;span class=secno&gt;11.2.2 &lt;/span&gt;The &lt;dfn&gt;input stream&lt;/dfn&gt;&lt;/h4&gt;
 
-  &lt;p&gt;The stream of Unicode characters that comprises the input to the
+  &lt;p&gt;The stream of Unicode code points that comprises the input to the
   tokenization stage will be initially seen by the user agent as a
   stream of bytes (typically coming over the network or from the local
   file system). The bytes encode the actual characters according to a
@@ -77853,8 +77842,8 @@
   that encoding is &lt;i&gt;tentative&lt;/i&gt; or &lt;i&gt;certain&lt;/i&gt;, is &lt;a href=#meta-charset-during-parse&gt;used during the parsing&lt;/a&gt; to
   determine whether to &lt;a href=#change-the-encoding&gt;change the encoding&lt;/a&gt;. If no
   encoding is necessary, e.g. because the parser is operating on a
-  stream of Unicode characters and doesn't have to use an encoding at
-  all, then the &lt;a href=#concept-encoding-confidence title=concept-encoding-confidence&gt;confidence&lt;/a&gt; is
+  Unicode stream and doesn't have to use an encoding at all, then the
+  &lt;a href=#concept-encoding-confidence title=concept-encoding-confidence&gt;confidence&lt;/a&gt; is
   &lt;i&gt;irrelevant&lt;/i&gt;.&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the user has explicitly instructed the user agent to
@@ -78476,7 +78465,7 @@
   &lt;h5 id=preprocessing-the-input-stream&gt;&lt;span class=secno&gt;11.2.2.3 &lt;/span&gt;Preprocessing the input stream&lt;/h5&gt;
 
   &lt;p&gt;Given an encoding, the bytes in the input stream must be
-  converted to Unicode characters for the tokenizer, as described by
+  converted to Unicode code points for the tokenizer, as described by
   the rules for that encoding, except that the leading U+FEFF BYTE
   ORDER MARK character, if any, must not be stripped by the encoding
   layer (it is stripped by the rule below).&lt;/p&gt; &lt;!-- this is to

Modified: source
===================================================================
--- source	2011-06-03 01:21:42 UTC (rev 6183)
+++ source	2011-06-03 19:40:10 UTC (rev 6184)
@@ -1908,9 +1908,9 @@
    different &lt;meta charset&gt; elements applying in each case.
   --&gt;
 
-  &lt;p&gt;The term &lt;dfn title=&quot;&quot;&gt;Unicode character&lt;/dfn&gt; is used to mean a
-  &lt;i title=&quot;&quot;&gt;Unicode scalar value&lt;/i&gt; (i.e. any Unicode code point
-  that is not a surrogate code point). &lt;a
+  &lt;p&gt;The term &lt;dfn&gt;Unicode character&lt;/dfn&gt; is used to mean a &lt;i
+  title=&quot;&quot;&gt;Unicode scalar value&lt;/i&gt; (i.e. any Unicode code point that
+  is not a surrogate code point). &lt;a
   href=&quot;#refsUNICODE&quot;&gt;[UNICODE]&lt;/a&gt;&lt;/p&gt;
 
 
@@ -2448,14 +2448,6 @@
     is passed an Infinity or Not-a-Number (NaN) value, a
     &lt;code&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be raised.&lt;/p&gt;
 
-    &lt;p&gt;Except where otherwise specified, if a method has an argument
-    of type &lt;code&gt;DOMString&lt;/code&gt;, or if an IDL attribute is assigned
-    a new value of type &lt;code&gt;DOMString&lt;/code&gt;, the user agent must
-    &lt;span title=&quot;dfn-obtain-unicode&quot;&gt;convert the
-    &lt;code&gt;DOMString&lt;/code&gt; to a sequence of Unicode characters&lt;/span&gt;
-    to obtain the string on which the algorithms in this specification
-    are to operate. &lt;a href=&quot;#refsWEBIDL&quot;&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;JavaScript&lt;/dt&gt;
@@ -6100,7 +6092,9 @@
     characters as defined by UTF-8.&lt;/p&gt;
 
     &lt;p&gt;If any percent-encoded octets in that component are not valid
-    UTF-8 sequences, then return an error and abort these steps.&lt;/p&gt;
+    UTF-8 sequences (e.g. sequences of percent-encoded octets that
+    expand to surrogate code points), then return an error and abort
+    these steps.&lt;/p&gt;
 
     &lt;p&gt;Apply the IDNA ToASCII algorithm to the matching substring,
     with both the AllowUnassigned and UseSTD3ASCIIRules flags
@@ -17326,11 +17320,11 @@
 
          &lt;dd&gt;
 
-          &lt;p&gt;The contents of that file, interpreted as string of
-          Unicode characters, are the script source.&lt;/p&gt;
+          &lt;p&gt;The contents of that file, interpreted as a Unicode
+          string, are the script source.&lt;/p&gt;
 
-          &lt;p&gt;To obtain the string of Unicode characters, the user
-          agent run the following steps:&lt;/p&gt;
+          &lt;p&gt;To obtain the Unicode string, the user agent run the
+          following steps:&lt;/p&gt;
 
           &lt;ol&gt;
 
@@ -17747,11 +17741,11 @@
 star          = %x002A ; U+002A ASTERISK (*)
 slash         = %x002F ; U+002F SOLIDUS (/)
 not-newline   = %x0000-0009 / %x000B-10FFFF
-                ; a Unicode character other than U+000A LINE FEED (LF)
+                ; a &lt;span&gt;Unicode character&lt;/span&gt; other than U+000A LINE FEED (LF)
 not-star      = %x0000-0029 / %x002B-10FFFF
-                ; a Unicode character other than U+002A ASTERISK (*)
+                ; a &lt;span&gt;Unicode character&lt;/span&gt; other than U+002A ASTERISK (*)
 not-slash     = %x0000-002E / %x0030-10FFFF
-                ; a Unicode character other than U+002F SOLIDUS (/)&lt;/pre&gt;
+                ; a &lt;span&gt;Unicode character&lt;/span&gt; other than U+002F SOLIDUS (/)&lt;/pre&gt;
 
   &lt;p class=&quot;note&quot;&gt;This corresponds to putting the contents of the
   element in JavaScript comments.&lt;/p&gt;
@@ -35527,20 +35521,16 @@
   parsing the provided byte stream. If the stream lacks this WebVTT
   file signature, then the parser aborts.&lt;/p&gt;
 
-  &lt;p&gt;When converting the bytes into Unicode characters, if the
-  encoding used is UTF-8, the bytes must be &lt;span title=&quot;decoded as
-  UTF-8, with error handling&quot;&gt;decoded with the error handling&lt;/span&gt;
-  defined in this specification, and all U+0000 NULL characters must
-  be replaced by U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
-
   &lt;p&gt;The &lt;dfn&gt;WebVTT parser algorithm&lt;/dfn&gt; is as follows:&lt;/p&gt;
 
   &lt;ol&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being parsed,
-   after conversion to Unicode and after the replacement of U+0000
-   NULL characters described above.&lt;/p&gt;&lt;/li&gt;
+   after conversion to Unicode.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Replace all U+0000 NULL characters in &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt; by U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be a pointer into &lt;var
    title=&quot;&quot;&gt;input&lt;/var&gt;, initially pointing at the start of the
    string. In an &lt;span&gt;incremental WebVTT parser&lt;/span&gt;, when this
@@ -72991,14 +72981,14 @@
    expanding any sequences of percent-encoded octets in &lt;var
    title=&quot;&quot;&gt;fragid&lt;/var&gt; that are valid UTF-8 sequences into Unicode
    characters as defined by UTF-8. If any percent-encoded octets in
-   that string are not valid UTF-8 sequences, then skip this step and
-   the next one.&lt;/p&gt;
+   that string are not valid UTF-8 sequences (e.g. they expand to
+   surrogate code points), then skip this step and the next one.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;If this step was not skipped and there is an element in the
-   DOM that has an &lt;span title=&quot;concept-id&quot;&gt;ID&lt;/span&gt; exactly equal to &lt;var title=&quot;&quot;&gt;decoded
-   fragid&lt;/var&gt;, then the first such element in tree order is
-   &lt;span&gt;the indicated part of the document&lt;/span&gt;; stop the algorithm
-   here.&lt;/p&gt;&lt;/li&gt;
+   DOM that has an &lt;span title=&quot;concept-id&quot;&gt;ID&lt;/span&gt; exactly equal to
+   &lt;var title=&quot;&quot;&gt;decoded fragid&lt;/var&gt;, then the first such element in
+   tree order is &lt;span&gt;the indicated part of the document&lt;/span&gt;; stop
+   the algorithm here.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is an &lt;code&gt;a&lt;/code&gt; element in the DOM that has a
    &lt;code title=&quot;attr-a-name&quot;&gt;name&lt;/code&gt; attribute whose value is
@@ -89195,9 +89185,9 @@
 colon         = %x003A ; U+003A COLON (:)
 bom           = %xFEFF ; U+FEFF BYTE ORDER MARK
 name-char     = %x0000-0009 / %x000B-000C / %x000E-0039 / %x003B-10FFFF
-                ; a Unicode character other than U+000A LINE FEED (LF), U+000D CARRIAGE RETURN (CR), or U+003A COLON (:)
+                ; a &lt;span&gt;Unicode character&lt;/span&gt; other than U+000A LINE FEED (LF), U+000D CARRIAGE RETURN (CR), or U+003A COLON (:)
 any-char      = %x0000-0009 / %x000B-000C / %x000E-10FFFF
-                ; a Unicode character other than U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR)&lt;/pre&gt;
+                ; a &lt;span&gt;Unicode character&lt;/span&gt; other than U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR)&lt;/pre&gt;
 
   &lt;p&gt;Event streams in this format must always be encoded as
   UTF-8. &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
@@ -92952,13 +92942,14 @@
   &lt;h4&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn title=&quot;syntax-text&quot;&gt;Text&lt;/dfn&gt; is allowed inside elements,
-  attribute values, and comments. Text must consist of Unicode
-  characters. Text must not contain U+0000 characters. Text must not
-  contain permanently undefined Unicode characters (noncharacters).
-  Text must not contain control characters other than &lt;span
-  title=&quot;space character&quot;&gt;space characters&lt;/span&gt;. Extra constraints
-  are placed on what is and what is not allowed in text based on where
-  the text is to be put, as described in the other sections.&lt;/p&gt;
+  attribute values, and comments. Text must consist of &lt;span
+  title=&quot;Unicode character&quot;&gt;Unicode characters&lt;/span&gt;. Text must not
+  contain U+0000 characters. Text must not contain permanently
+  undefined Unicode characters (noncharacters). Text must not contain
+  control characters other than &lt;span title=&quot;space character&quot;&gt;space
+  characters&lt;/span&gt;. Extra constraints are placed on what is and what
+  is not allowed in text based on where the text is to be put, as
+  described in the other sections.&lt;/p&gt;
 
 
   &lt;h5&gt;Newlines&lt;/h5&gt;
@@ -93165,7 +93156,7 @@
   &lt;h4&gt;Overview of the parsing model&lt;/h4&gt;
 
   &lt;p&gt;The input to the HTML parsing process consists of a stream of
-  Unicode characters, which is passed through a
+  Unicode code points, which is passed through a
   &lt;span&gt;tokenization&lt;/span&gt; stage followed by a &lt;span&gt;tree
   construction&lt;/span&gt; stage. The output is a &lt;code&gt;Document&lt;/code&gt;
   object.&lt;/p&gt;
@@ -93215,7 +93206,7 @@
 
   &lt;h4&gt;The &lt;dfn&gt;input stream&lt;/dfn&gt;&lt;/h4&gt;
 
-  &lt;p&gt;The stream of Unicode characters that comprises the input to the
+  &lt;p&gt;The stream of Unicode code points that comprises the input to the
   tokenization stage will be initially seen by the user agent as a
   stream of bytes (typically coming over the network or from the local
   file system). The bytes encode the actual characters according to a
@@ -93256,9 +93247,8 @@
   href=&quot;#meta-charset-during-parse&quot;&gt;used during the parsing&lt;/a&gt; to
   determine whether to &lt;span&gt;change the encoding&lt;/span&gt;. If no
   encoding is necessary, e.g. because the parser is operating on a
-  stream of Unicode characters and doesn't have to use an encoding at
-  all, then the &lt;span
-  title=&quot;concept-encoding-confidence&quot;&gt;confidence&lt;/span&gt; is
+  Unicode stream and doesn't have to use an encoding at all, then the
+  &lt;span title=&quot;concept-encoding-confidence&quot;&gt;confidence&lt;/span&gt; is
   &lt;i&gt;irrelevant&lt;/i&gt;.&lt;/p&gt;
 
   &lt;ol&gt;
@@ -94029,7 +94019,7 @@
   &lt;h5&gt;Preprocessing the input stream&lt;/h5&gt;
 
   &lt;p&gt;Given an encoding, the bytes in the input stream must be
-  converted to Unicode characters for the tokenizer, as described by
+  converted to Unicode code points for the tokenizer, as described by
   the rules for that encoding, except that the leading U+FEFF BYTE
   ORDER MARK character, if any, must not be stripped by the encoding
   layer (it is stripped by the rule below).&lt;/p&gt; &lt;!-- this is to


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013050.html">[html5] r6183 - [e] (0) A first attempt at an example for a WebVTT	file. Fixing http://www.w3.or [...]
</A></li>
	<LI>Next message: <A HREF="013052.html">[html5] r6185 - [giow] (0) Make structured clone handle getters.	Fixing http://www.w3.org/Bugs/P [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13051">[ date ]</a>
              <a href="thread.html#13051">[ thread ]</a>
              <a href="subject.html#13051">[ subject ]</a>
              <a href="author.html#13051">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
