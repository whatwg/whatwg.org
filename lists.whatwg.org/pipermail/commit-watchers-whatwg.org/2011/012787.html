<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r5920 - [giow] (1) Change how MathML and SVG are parsed in	text/html: use a three-level [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5920%20-%20%5Bgiow%5D%20%281%29%20Change%20how%20MathML%20and%20SVG%20are%20parsed%20in%0A%09text/html%3A%20use%20a%20three-level%20%5B...%5D&In-Reply-To=%3C20110228235624.A714F2C7C001%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012786.html">
   <LINK REL="Next"  HREF="012788.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r5920 - [giow] (1) Change how MathML and SVG are parsed in	text/html: use a three-level [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5920%20-%20%5Bgiow%5D%20%281%29%20Change%20how%20MathML%20and%20SVG%20are%20parsed%20in%0A%09text/html%3A%20use%20a%20three-level%20%5B...%5D&In-Reply-To=%3C20110228235624.A714F2C7C001%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r5920 - [giow] (1) Change how MathML and SVG are parsed in	text/html: use a three-level [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Feb 28 15:56:24 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012786.html">[html5] r5919 - [e] (0) Not sure how I managed to miss this	acknowledgement for so long.
</A></li>
        <LI>Next message: <A HREF="012788.html">[html5] r5921 - [giow] (0) revert r5836 per	http://lists.w3.org/Archives/Public/public-html/2011 [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12787">[ date ]</a>
              <a href="thread.html#12787">[ thread ]</a>
              <a href="subject.html#12787">[ subject ]</a>
              <a href="author.html#12787">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2011-02-28 15:56:22 -0800 (Mon, 28 Feb 2011)
New Revision: 5920

Modified:
   complete.html
   index
   source
Log:
[giow] (1) Change how MathML and SVG are parsed in text/html: use a three-level tree constructor design instead of the two-level design we had before.
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=11393">http://www.w3.org/Bugs/Public/show_bug.cgi?id=11393</A>

Modified: complete.html
===================================================================
--- complete.html	2011-02-27 00:03:26 UTC (rev 5919)
+++ complete.html	2011-02-28 23:56:22 UTC (rev 5920)
@@ -239,7 +239,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;Web Applications 1.0&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 27 February 2011&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 28 February 2011&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -1222,29 +1222,31 @@
        &lt;li&gt;&lt;a href=#creating-and-inserting-elements&gt;&lt;span class=secno&gt;12.2.5.1 &lt;/span&gt;Creating and inserting elements&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#closing-elements-that-have-implied-end-tags&gt;&lt;span class=secno&gt;12.2.5.2 &lt;/span&gt;Closing elements that have implied end tags&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#foster-parenting&gt;&lt;span class=secno&gt;12.2.5.3 &lt;/span&gt;Foster parenting&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-initial-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4 &lt;/span&gt;The &quot;initial&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-before-html-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.5 &lt;/span&gt;The &quot;before html&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-before-head-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.6 &lt;/span&gt;The &quot;before head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inhead&gt;&lt;span class=secno&gt;12.2.5.7 &lt;/span&gt;The &quot;in head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;12.2.5.8 &lt;/span&gt;The &quot;in head noscript&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-after-head-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.9 &lt;/span&gt;The &quot;after head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inbody&gt;&lt;span class=secno&gt;12.2.5.10 &lt;/span&gt;The &quot;in body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-incdata&gt;&lt;span class=secno&gt;12.2.5.11 &lt;/span&gt;The &quot;text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intable&gt;&lt;span class=secno&gt;12.2.5.12 &lt;/span&gt;The &quot;in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intabletext&gt;&lt;span class=secno&gt;12.2.5.13 &lt;/span&gt;The &quot;in table text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-incaption&gt;&lt;span class=secno&gt;12.2.5.14 &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-incolgroup&gt;&lt;span class=secno&gt;12.2.5.15 &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intbody&gt;&lt;span class=secno&gt;12.2.5.16 &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intr&gt;&lt;span class=secno&gt;12.2.5.17 &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intd&gt;&lt;span class=secno&gt;12.2.5.18 &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inselect&gt;&lt;span class=secno&gt;12.2.5.19 &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inselectintable&gt;&lt;span class=secno&gt;12.2.5.20 &lt;/span&gt;The &quot;in select in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inforeign&gt;&lt;span class=secno&gt;12.2.5.21 &lt;/span&gt;The &quot;in foreign content&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-afterbody&gt;&lt;span class=secno&gt;12.2.5.22 &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inframeset&gt;&lt;span class=secno&gt;12.2.5.23 &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-afterframeset&gt;&lt;span class=secno&gt;12.2.5.24 &lt;/span&gt;The &quot;after frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.25 &lt;/span&gt;The &quot;after after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.26 &lt;/span&gt;The &quot;after after frameset&quot; insertion mode&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inhtml&gt;&lt;span class=secno&gt;12.2.5.4 &lt;/span&gt;The rules for parsing tokens in HTML content&lt;/a&gt;
+        &lt;ol&gt;
+         &lt;li&gt;&lt;a href=#the-initial-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.1 &lt;/span&gt;The &quot;initial&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-before-html-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.2 &lt;/span&gt;The &quot;before html&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-before-head-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.3 &lt;/span&gt;The &quot;before head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inhead&gt;&lt;span class=secno&gt;12.2.5.4.4 &lt;/span&gt;The &quot;in head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;12.2.5.4.5 &lt;/span&gt;The &quot;in head noscript&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-head-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.6 &lt;/span&gt;The &quot;after head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inbody&gt;&lt;span class=secno&gt;12.2.5.4.7 &lt;/span&gt;The &quot;in body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incdata&gt;&lt;span class=secno&gt;12.2.5.4.8 &lt;/span&gt;The &quot;text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intable&gt;&lt;span class=secno&gt;12.2.5.4.9 &lt;/span&gt;The &quot;in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intabletext&gt;&lt;span class=secno&gt;12.2.5.4.10 &lt;/span&gt;The &quot;in table text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incaption&gt;&lt;span class=secno&gt;12.2.5.4.11 &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incolgroup&gt;&lt;span class=secno&gt;12.2.5.4.12 &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intbody&gt;&lt;span class=secno&gt;12.2.5.4.13 &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intr&gt;&lt;span class=secno&gt;12.2.5.4.14 &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intd&gt;&lt;span class=secno&gt;12.2.5.4.15 &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inselect&gt;&lt;span class=secno&gt;12.2.5.4.16 &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inselectintable&gt;&lt;span class=secno&gt;12.2.5.4.17 &lt;/span&gt;The &quot;in select in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-afterbody&gt;&lt;span class=secno&gt;12.2.5.4.18 &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inframeset&gt;&lt;span class=secno&gt;12.2.5.4.19 &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-afterframeset&gt;&lt;span class=secno&gt;12.2.5.4.20 &lt;/span&gt;The &quot;after frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.21 &lt;/span&gt;The &quot;after after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.22 &lt;/span&gt;The &quot;after after frameset&quot; insertion mode&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inforeign&gt;&lt;span class=secno&gt;12.2.5.5 &lt;/span&gt;The rules for parsing tokens in foreign content&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-end&gt;&lt;span class=secno&gt;12.2.6 &lt;/span&gt;The end&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#coercing-an-html-dom-into-an-infoset&gt;&lt;span class=secno&gt;12.2.7 &lt;/span&gt;Coercing an HTML DOM into an infoset&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#an-introduction-to-error-handling-and-strange-cases-in-the-parser&gt;&lt;span class=secno&gt;12.2.8 &lt;/span&gt;An introduction to error handling and strange cases in the parser&lt;/a&gt;
@@ -77982,12 +77984,16 @@
   &quot;&lt;a href=#the-before-html-insertion-mode title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;,
   &quot;&lt;a href=#the-before-head-insertion-mode title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;,
   &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion mode: in head&quot;&gt;in head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inheadnoscript title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: text&quot;&gt;text&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion mode: in select in table&quot;&gt;in select in
-  table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in
-  foreign content&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion mode: after
+  &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: text&quot;&gt;text&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intable title=&quot;insertion
+  mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in
+  table text&quot;&gt;in table text&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in
+  caption&quot;&gt;in caption&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column
+  group&quot;&gt;in column group&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in
+  table body&quot;&gt;in table body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in
+  row&quot;&gt;in row&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in
+  cell&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in
+  select&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion mode: in select in table&quot;&gt;in
+  select in table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion mode: after
   body&quot;&gt;after body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inframeset title=&quot;insertion mode: in
   frameset&quot;&gt;in frameset&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-afterframeset title=&quot;insertion mode: after
   frameset&quot;&gt;after frameset&lt;/a&gt;&quot;, &quot;&lt;a href=#the-after-after-body-insertion-mode title=&quot;insertion mode:
@@ -78092,12 +78098,6 @@
    non-null when we're going through these steps, we'll need to
    uncomment out the commented-out bits --&gt;
 
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is an element from the &lt;a href=#mathml-namespace&gt;MathML
-   namespace&lt;/a&gt; or the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;, then switch the
-   &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in
-   foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot; and abort these
-   steps.&lt;/li&gt;
-
    &lt;li&gt;If &lt;var title=&quot;&quot;&gt;last&lt;/var&gt; is true, then switch the
    &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in
    body&quot;&gt;in body&lt;/a&gt;&quot; and abort these steps. (&lt;a href=#fragment-case&gt;fragment
@@ -79705,11 +79705,10 @@
   case-insensitive&lt;/a&gt; match for the word &quot;DOCTYPE&quot;, then consume
   those characters and switch to the &lt;a href=#doctype-state&gt;DOCTYPE state&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Otherwise, if the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-  content&lt;/a&gt;&quot; and the &lt;a href=#current-node&gt;current node&lt;/a&gt; is not an element
-  in the &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt; and the next seven characters are
-  an &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;[CDATA[&quot; (the
-  five uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET
+  &lt;p&gt;Otherwise, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is not an element in
+  the &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt; and the next seven characters are an
+  &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;[CDATA[&quot; (the five
+  uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET
   character before and after), then consume those characters and
   switch to the &lt;a href=#cdata-section-state&gt;CDATA section state&lt;/a&gt;.&lt;/p&gt;
 
@@ -80611,11 +80610,44 @@
   has to render the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; so that it is available to
   the user, or when it has to begin accepting user input.&lt;/p&gt;
 
-  &lt;p&gt;As each token is emitted from the tokenizer, the user agent must
-  process the token according to the rules given in the section
-  corresponding to the current &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;.&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;As each token is emitted from the tokenizer, the user agent must
+  follow the appropriate steps from the following list:&lt;/p&gt;
 
-  &lt;p&gt;When the steps below require the UA to &lt;dfn id=insert-a-character&gt;insert a
+  &lt;dl class=switch&gt;&lt;dt&gt;If there is no &lt;a href=#current-node&gt;current node&lt;/a&gt;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;a href=#mathml-text-integration-point&gt;MathML text integration point&lt;/a&gt; and the token is a start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; and the token is a start tag whose tag name is &quot;svg&quot;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;a href=#html-integration-point&gt;HTML integration point&lt;/a&gt; and the token is a start tag&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;a href=#html-integration-point&gt;HTML integration point&lt;/a&gt; and the token is a character token&lt;/dt&gt;
+   &lt;dt&gt;If the token is an end-of-file token&lt;/dt&gt;
+
+   &lt;dd&gt;Process the token according to the rules given in the section
+   corresponding to the current &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; in HTML
+   content.&lt;/dd&gt;
+
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+   &lt;dd&gt;Process the token according to the rules given in the section
+   for parsing tokens &lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign
+   content&quot;&gt;in foreign content&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;The &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;dfn id=mathml-text-integration-point&gt;MathML text
+  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
+
+  &lt;ul class=brief&gt;&lt;li&gt;An &lt;code title=&quot;&quot;&gt;mi&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mo&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mn&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;ms&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mtext&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+  &lt;/ul&gt;&lt;p&gt;The &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;dfn id=html-integration-point&gt;HTML
+  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
+
+  &lt;ul class=brief&gt;&lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;&quot;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;desc&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
+  &lt;/ul&gt;&lt;hr&gt;&lt;p&gt;When the steps below require the UA to &lt;dfn id=insert-a-character&gt;insert a
   character&lt;/dfn&gt; into a node, if that node has a child immediately
   before where the character is to be inserted, and that child is a
   &lt;code&gt;&lt;a href=#text&gt;Text&lt;/a&gt;&lt;/code&gt; node, then the character must be appended to that
@@ -80907,11 +80939,13 @@
 
 
 
-  &lt;h5 id=the-initial-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h5 id=parsing-main-inhtml&gt;&lt;span class=secno&gt;12.2.5.4 &lt;/span&gt;The rules for parsing tokens in HTML content&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-initial-insertion-mode title=&quot;insertion
-  mode: initial&quot;&gt;initial&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
 
+  &lt;h6 id=the-initial-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.1 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-initial-insertion-mode title=&quot;insertion mode: initial&quot;&gt;initial&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
+
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
    U+000D CARRIAGE RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
@@ -81101,10 +81135,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-before-html-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.5 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=the-before-html-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.2 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-before-html-insertion-mode title=&quot;insertion
-  mode: before html&quot;&gt;before html&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-before-html-insertion-mode title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
    &lt;dd&gt;
@@ -81185,10 +81218,9 @@
   as described in the next section.&lt;/p&gt;
 
 
-  &lt;h5 id=the-before-head-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.6 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=the-before-head-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.3 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-before-head-insertion-mode title=&quot;insertion
-  mode: before head&quot;&gt;before head&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-before-head-insertion-mode title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -81251,10 +81283,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inhead&gt;&lt;span class=secno&gt;12.2.5.7 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inhead&gt;&lt;span class=secno&gt;12.2.5.4.4 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion
-  mode: in head&quot;&gt;in head&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion mode: in head&quot;&gt;in head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -81418,10 +81449,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;12.2.5.8 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;12.2.5.4.5 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inheadnoscript title=&quot;insertion
-  mode: in head noscript&quot;&gt;in head noscript&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inheadnoscript title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
    &lt;dd&gt;
@@ -81479,10 +81509,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-after-head-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.9 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-head-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.6 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion
-  mode: after head&quot;&gt;after head&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -81570,10 +81599,9 @@
     token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inbody&gt;&lt;span class=secno&gt;12.2.5.10 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inbody&gt;&lt;span class=secno&gt;12.2.5.4.7 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion
-  mode: in body&quot;&gt;in body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
    &lt;dd&gt;
@@ -82736,11 +82764,6 @@
     elements&lt;/a&gt; and &lt;a href=#acknowledge-self-closing-flag title=&quot;acknowledge self-closing
     flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is not already
-    &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/a&gt;&quot;, switch the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/a&gt;&quot;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;A start tag whose tag name is &quot;svg&quot;&lt;/dt&gt;
@@ -82770,11 +82793,6 @@
     elements&lt;/a&gt; and &lt;a href=#acknowledge-self-closing-flag title=&quot;acknowledge self-closing
     flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is not already
-    &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/a&gt;&quot;, switch the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/a&gt;&quot;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;A start &lt;!--or end--&gt; tag whose tag name is one of: &quot;caption&quot;,
@@ -82843,10 +82861,9 @@
 
     &lt;/ol&gt;&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-incdata&gt;&lt;span class=secno&gt;12.2.5.11 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: text&quot;&gt;text&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incdata&gt;&lt;span class=secno&gt;12.2.5.4.8 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: text&quot;&gt;text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion
-  mode: text&quot;&gt;text&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: text&quot;&gt;text&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token&lt;/dt&gt;
    &lt;dd&gt;
@@ -82996,10 +83013,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-intable&gt;&lt;span class=secno&gt;12.2.5.12 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-intable&gt;&lt;span class=secno&gt;12.2.5.4.9 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intable title=&quot;insertion
-  mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in table&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token&lt;/dt&gt;
    &lt;dd&gt;
@@ -83200,11 +83216,9 @@
 
 
 
-  &lt;h5 id=parsing-main-intabletext&gt;&lt;span class=secno&gt;12.2.5.13 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=parsing-main-intabletext&gt;&lt;span class=secno&gt;12.2.5.4.10 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion
-  mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot;, tokens must be handled
-  as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
    &lt;dd&gt;
@@ -83243,10 +83257,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-incaption&gt;&lt;span class=secno&gt;12.2.5.14 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incaption&gt;&lt;span class=secno&gt;12.2.5.4.11 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion
-  mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;An end tag whose tag name is &quot;caption&quot;&lt;/dt&gt;
    &lt;dd&gt;
@@ -83301,10 +83314,9 @@
     mode&lt;/a&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;12.2.5.15 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;12.2.5.4.12 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion
-  mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -83388,10 +83400,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-intbody&gt;&lt;span class=secno&gt;12.2.5.16 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-intbody&gt;&lt;span class=secno&gt;12.2.5.4.13 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion
-  mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A start tag whose tag name is &quot;tr&quot;&lt;/dt&gt;
    &lt;dd&gt;
@@ -83477,10 +83488,9 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-intr&gt;&lt;span class=secno&gt;12.2.5.17 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=parsing-main-intr&gt;&lt;span class=secno&gt;12.2.5.4.14 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intr title=&quot;insertion
-  mode: in row&quot;&gt;in row&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A start tag whose tag name is one of: &quot;th&quot;, &quot;td&quot;&lt;/dt&gt;
    &lt;dd&gt;
@@ -83568,10 +83578,9 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-intd&gt;&lt;span class=secno&gt;12.2.5.18 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=parsing-main-intd&gt;&lt;span class=secno&gt;12.2.5.4.15 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intd title=&quot;insertion
-  mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;An end tag whose tag name is one of: &quot;td&quot;, &quot;th&quot;&lt;/dt&gt;
    &lt;dd&gt;
@@ -83662,10 +83671,9 @@
   cell&lt;/a&gt; algorithm is invoked.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-inselect&gt;&lt;span class=secno&gt;12.2.5.19 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=parsing-main-inselect&gt;&lt;span class=secno&gt;12.2.5.4.16 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion
-  mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
    &lt;dd&gt;
@@ -83813,10 +83821,9 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;12.2.5.20 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;12.2.5.4.17 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion
-  mode: in select in table&quot;&gt;in select in table&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A start tag whose tag name is one of: &quot;caption&quot;, &quot;table&quot;,
    &quot;tbody&quot;, &quot;tfoot&quot;, &quot;thead&quot;, &quot;tr&quot;, &quot;td&quot;, &quot;th&quot;&lt;/dt&gt;
@@ -83845,276 +83852,10 @@
     mode&lt;/a&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;12.2.5.21 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;12.2.5.4.18 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion
-  mode: in foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot;, tokens must be
-  handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;Any token, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;a href=#mathml-text-integration-point&gt;MathML text integration point&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag whose tag name is &quot;svg&quot;, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;a href=#html-integration-point&gt;HTML integration point&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;A character token, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;a href=#html-integration-point&gt;HTML integration point&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;An end-of-file token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Process the token &lt;a href=#using-the-rules-for&gt;using the rules for&lt;/a&gt; the
-     &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot;
-     &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, except that if those rules say to
-     reprocess the token, these steps must be finished first (i.e. the
-     insertion mode is reset by the following step before the token is
-     reprocessed).&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If, after doing so, the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is
-     still &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in
-     foreign content&lt;/a&gt;&quot;, &lt;a href=#reset-the-insertion-mode-appropriately&gt;reset the insertion mode
-     appropriately&lt;/a&gt;.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. &lt;a href=#insert-a-character title=&quot;insert a
-    character&quot;&gt;Insert a U+FFFD REPLACEMENT CHARACTER character&lt;/a&gt;
-    into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A character token that is one of U+0009 CHARACTER TABULATION,
-   U+000A LINE FEED (LF), U+000C FORM FEED (FF), U+000D CARRIAGE
-   RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;Insert the token's
-    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other character token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;Insert the token's
-    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=#frameset-ok-flag&gt;frameset-ok flag&lt;/a&gt; to &quot;not ok&quot;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A comment token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;&lt;a href=#comment-0&gt;Comment&lt;/a&gt;&lt;/code&gt; node to the &lt;a href=#current-node&gt;current
-    node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to
-    the data given in the comment token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A start tag whose tag name is one of: &lt;!--&quot;a&quot;,--&gt; &quot;b&quot;, &quot;big&quot;,
-   &quot;blockquote&quot;, &quot;body&quot;&lt;!--by inspection--&gt;, &quot;br&quot;, &quot;center&quot;, &quot;code&quot;,
-   &quot;dd&quot;, &quot;div&quot;, &quot;dl&quot;, &quot;dt&quot;&lt;!-- so that dd and dt can be handled
-   uniformly throughout the parser --&gt;, &quot;em&quot;, &quot;embed&quot;, &quot;h1&quot;, &quot;h2&quot;,
-   &quot;h3&quot;, &quot;h4&quot;&lt;!--for completeness--&gt;, &quot;h5&quot;, &quot;h6&quot;&lt;!--for
-   completeness--&gt;, &quot;head&quot;&lt;!--by inspection--&gt;, &quot;hr&quot;, &quot;i&quot;, &quot;img&quot;,
-   &quot;li&quot;, &quot;listing&quot;&lt;!-- so that pre and listing can be handled
-   uniformly throughout the parser --&gt;, &quot;menu&quot;, &quot;meta&quot;, &quot;nobr&quot;,
-   &quot;ol&quot;&lt;!-- so that dl, ul, and ol can be handled uniformly throughout
-   the parser --&gt;, &quot;p&quot;, &quot;pre&quot;, &quot;ruby&quot;, &quot;s&quot;, &lt;!--&quot;script&quot;,--&gt; &quot;small&quot;,
-   &quot;span&quot;, &quot;strong&quot;, &quot;strike&quot;&lt;!-- so that s and strike can be handled
-   uniformly throughout the parser --&gt;, &lt;!--&quot;style&quot;,--&gt; &quot;sub&quot;, &quot;sup&quot;,
-   &quot;table&quot;&lt;!--by inspection--&gt;, &quot;tt&quot;, &quot;u&quot;, &quot;ul&quot;, &quot;var&quot;&lt;/dt&gt; &lt;!-- this
-   list was determined empirically by studying over 6,000,000,000
-   pages that were specifically not XML pages --&gt;
-   &lt;dt&gt;A start tag whose tag name is &quot;font&quot;, if the token has any
-   attributes named &quot;color&quot;, &quot;face&quot;, or &quot;size&quot;&lt;/dt&gt; &lt;!-- the
-   attributes here are required so that SVG &lt;font&gt; will go through as
-   SVG but legacy &lt;font&gt;s won't --&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Pop an element from the &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;,
-    and then keep popping more elements from the &lt;a href=#stack-of-open-elements&gt;stack of open
-    elements&lt;/a&gt; until the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a
-    &lt;a href=#mathml-text-integration-point&gt;MathML text integration point&lt;/a&gt;, an &lt;a href=#html-integration-point&gt;HTML
-    integration point&lt;/a&gt;, or an element in the &lt;a href=#html-namespace-0&gt;HTML
-    namespace&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Then, &lt;a href=#reset-the-insertion-mode-appropriately&gt;reset the insertion mode appropriately&lt;/a&gt; and
-    reprocess the token.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other start tag&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the
-    &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;, &lt;a href=#adjust-mathml-attributes&gt;adjust MathML
-    attributes&lt;/a&gt; for the token. (This fixes the case of MathML
-    attributes that are not all lowercase.)&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#svg-namespace&gt;SVG
-    namespace&lt;/a&gt;, and the token's tag name is one of the ones in
-    the first column of the following table, change the tag name to
-    the name given in the corresponding cell in the second
-    column. (This fixes the case of SVG elements that are not all
-    lowercase.)&lt;/p&gt;
-
-    &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt; Tag name &lt;th&gt; Element name
-     &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyph&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyph&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphdef&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphDef&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphitem&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphItem&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatecolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateColor&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatemotion&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateMotion&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatetransform&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateTransform&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;clippath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;clipPath&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feblend&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feBlend&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecolormatrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feColorMatrix&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomponenttransfer&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComponentTransfer&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomposite&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComposite&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feconvolvematrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feConvolveMatrix&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fediffuselighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDiffuseLighting&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fedisplacementmap&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDisplacementMap&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fedistantlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDistantLight&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feflood&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFlood&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefunca&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncA&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncb&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncB&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncg&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncG&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncr&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncR&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fegaussianblur&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feGaussianBlur&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feimage&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feImage&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femerge&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMerge&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femergenode&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMergeNode&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femorphology&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMorphology&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feoffset&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feOffset&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fepointlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fePointLight&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fespecularlighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpecularLighting&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fespotlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpotLight&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fetile&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTile&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feturbulence&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTurbulence&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignobject&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphref&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphRef&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;lineargradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;linearGradient&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;radialgradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;radialGradient&lt;/code&gt;
-      &lt;!--&lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidcolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidColor&lt;/code&gt; (SVG 1.2)--&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;textpath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;textPath&lt;/code&gt;
-    &lt;/table&gt;&lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#svg-namespace&gt;SVG
-    namespace&lt;/a&gt;, &lt;a href=#adjust-svg-attributes&gt;adjust SVG attributes&lt;/a&gt; for the
-    token. (This fixes the case of SVG attributes that are not all
-    lowercase.)&lt;/p&gt;
-
-    &lt;p&gt;&lt;a href=#adjust-foreign-attributes&gt;Adjust foreign attributes&lt;/a&gt; for the token. (This
-    fixes the use of namespaced attributes, in particular XLink in
-    SVG.)&lt;/p&gt;
-
-    &lt;p&gt;&lt;a href=#insert-a-foreign-element&gt;Insert a foreign element&lt;/a&gt; for the token, in the
-    same namespace as the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;If the token has its &lt;i&gt;self-closing flag&lt;/i&gt; set, pop the
-    &lt;a href=#current-node&gt;current node&lt;/a&gt; off the &lt;a href=#stack-of-open-elements&gt;stack of open
-    elements&lt;/a&gt; and &lt;a href=#acknowledge-self-closing-flag title=&quot;acknowledge self-closing
-    flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt id=scriptForeignEndTag&gt;An end tag whose tag name is &quot;script&quot;, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;Pop the &lt;a href=#current-node&gt;current node&lt;/a&gt; off the &lt;a href=#stack-of-open-elements&gt;stack of open
-    elements&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt; have the
-    same value as the current &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt;. Let
-    the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; be just before the &lt;a href=#next-input-character&gt;next
-    input character&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Increment the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; by
-    one. Set the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; to true.&lt;/p&gt;
-
-    &lt;p&gt;&lt;a href=<A HREF="http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing">http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing</A>&gt;Process
-    the &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element&lt;/a&gt; according to the SVG
-    rules, if the user agent supports SVG. &lt;a href=#refsSVG&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p class=note&gt;Even if this causes &lt;a href=#dom-document-write title=dom-document-write&gt;new characters to be inserted into the
-    tokenizer&lt;/a&gt;, the parser will not be executed reentrantly,
-    since the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; is true.&lt;/p&gt;
-
-    &lt;p&gt;Decrement the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; by
-    one. If the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; is zero,
-    then set the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; to false.&lt;/p&gt;
-
-    &lt;p&gt;Let the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; have the value of the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt;. (In other words, restore the
-    &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; to its previous value. This value
-    might be the &quot;undefined&quot; value.)&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other end tag&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Run these steps:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a href=#current-node&gt;current
-     node&lt;/a&gt; (the bottommost node of the stack).&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element with the
-     same tag name as the token, then this is a &lt;a href=#parse-error&gt;parse
-     error&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;'s tag name,
-     &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;, is the same as as the
-     tag name of the token, pop elements from the &lt;a href=#stack-of-open-elements&gt;stack of open
-     elements&lt;/a&gt; until &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has been popped
-     from the stack, and then jump to the last step of this list of
-     steps.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
-     &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element in the
-     &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;, return to the step labeled
-     &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Otherwise, process the token &lt;a href=#using-the-rules-for&gt;using the rules
-     for&lt;/a&gt; the &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in
-     body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, except that if those
-     rules say to reprocess the token, these steps must be finished
-     first (i.e. the insertion mode is reset by the following step
-     before the token is reprocessed).&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is still &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-     content&lt;/a&gt;&quot;, &lt;a href=#reset-the-insertion-mode-appropriately&gt;reset the insertion mode
-     appropriately&lt;/a&gt;.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;The &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;dfn id=mathml-text-integration-point&gt;MathML text
-  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
-
-  &lt;ul class=brief&gt;&lt;li&gt;An &lt;code title=&quot;&quot;&gt;mi&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mo&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mn&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;ms&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mtext&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-  &lt;/ul&gt;&lt;p&gt;The &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;dfn id=html-integration-point&gt;HTML
-  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
-
-  &lt;ul class=brief&gt;&lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;&quot;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;desc&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
-  &lt;/ul&gt;&lt;h5 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;12.2.5.22 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
-
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion
-  mode: after body&quot;&gt;after body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
-
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
    U+000D CARRIAGE RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
@@ -84168,10 +83909,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;12.2.5.23 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;12.2.5.4.19 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inframeset title=&quot;insertion
-  mode: in frameset&quot;&gt;in frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inframeset title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -84261,10 +84001,9 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;12.2.5.24 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;12.2.5.4.20 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-afterframeset title=&quot;insertion
-  mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-afterframeset title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;!-- due to rules in the &quot;in frameset&quot; mode, this can't be entered in the fragment case --&gt;
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
@@ -84315,10 +84054,9 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.25 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.21 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-after-after-body-insertion-mode title=&quot;insertion
-  mode: after after body&quot;&gt;after after body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-after-body-insertion-mode title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A comment token&lt;/dt&gt;
    &lt;dd&gt;
@@ -84349,10 +84087,9 @@
     reprocess the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.26 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;12.2.5.4.22 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-after-after-frameset-insertion-mode title=&quot;insertion
-  mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-after-frameset-insertion-mode title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A comment token&lt;/dt&gt;
    &lt;dd&gt;
@@ -84387,6 +84124,223 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
+  &lt;/dl&gt;&lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;12.2.5.5 &lt;/span&gt;The rules for parsing tokens &lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;When the user agent is to apply the rules for parsing tokens in foreign content, the user agent must handle the token as follows:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. &lt;a href=#insert-a-character title=&quot;insert a
+    character&quot;&gt;Insert a U+FFFD REPLACEMENT CHARACTER character&lt;/a&gt;
+    into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A character token that is one of U+0009 CHARACTER TABULATION,
+   U+000A LINE FEED (LF), U+000C FORM FEED (FF), U+000D CARRIAGE
+   RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;Insert the token's
+    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other character token&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;Insert the token's
+    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Set the &lt;a href=#frameset-ok-flag&gt;frameset-ok flag&lt;/a&gt; to &quot;not ok&quot;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A comment token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Append a &lt;code&gt;&lt;a href=#comment-0&gt;Comment&lt;/a&gt;&lt;/code&gt; node to the &lt;a href=#current-node&gt;current
+    node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to
+    the data given in the comment token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A start tag whose tag name is one of: &lt;!--&quot;a&quot;,--&gt; &quot;b&quot;, &quot;big&quot;,
+   &quot;blockquote&quot;, &quot;body&quot;&lt;!--by inspection--&gt;, &quot;br&quot;, &quot;center&quot;, &quot;code&quot;,
+   &quot;dd&quot;, &quot;div&quot;, &quot;dl&quot;, &quot;dt&quot;&lt;!-- so that dd and dt can be handled
+   uniformly throughout the parser --&gt;, &quot;em&quot;, &quot;embed&quot;, &quot;h1&quot;, &quot;h2&quot;,
+   &quot;h3&quot;, &quot;h4&quot;&lt;!--for completeness--&gt;, &quot;h5&quot;, &quot;h6&quot;&lt;!--for
+   completeness--&gt;, &quot;head&quot;&lt;!--by inspection--&gt;, &quot;hr&quot;, &quot;i&quot;, &quot;img&quot;,
+   &quot;li&quot;, &quot;listing&quot;&lt;!-- so that pre and listing can be handled
+   uniformly throughout the parser --&gt;, &quot;menu&quot;, &quot;meta&quot;, &quot;nobr&quot;,
+   &quot;ol&quot;&lt;!-- so that dl, ul, and ol can be handled uniformly throughout
+   the parser --&gt;, &quot;p&quot;, &quot;pre&quot;, &quot;ruby&quot;, &quot;s&quot;, &lt;!--&quot;script&quot;,--&gt; &quot;small&quot;,
+   &quot;span&quot;, &quot;strong&quot;, &quot;strike&quot;&lt;!-- so that s and strike can be handled
+   uniformly throughout the parser --&gt;, &lt;!--&quot;style&quot;,--&gt; &quot;sub&quot;, &quot;sup&quot;,
+   &quot;table&quot;&lt;!--by inspection--&gt;, &quot;tt&quot;, &quot;u&quot;, &quot;ul&quot;, &quot;var&quot;&lt;/dt&gt; &lt;!-- this
+   list was determined empirically by studying over 6,000,000,000
+   pages that were specifically not XML pages --&gt;
+   &lt;dt&gt;A start tag whose tag name is &quot;font&quot;, if the token has any
+   attributes named &quot;color&quot;, &quot;face&quot;, or &quot;size&quot;&lt;/dt&gt; &lt;!-- the
+   attributes here are required so that SVG &lt;font&gt; will go through as
+   SVG but legacy &lt;font&gt;s won't --&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Pop an element from the &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;,
+    and then keep popping more elements from the &lt;a href=#stack-of-open-elements&gt;stack of open
+    elements&lt;/a&gt; until the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a
+    &lt;a href=#mathml-text-integration-point&gt;MathML text integration point&lt;/a&gt;, an &lt;a href=#html-integration-point&gt;HTML
+    integration point&lt;/a&gt;, or an element in the &lt;a href=#html-namespace-0&gt;HTML
+    namespace&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Then, reprocess the token.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other start tag&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the
+    &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;, &lt;a href=#adjust-mathml-attributes&gt;adjust MathML
+    attributes&lt;/a&gt; for the token. (This fixes the case of MathML
+    attributes that are not all lowercase.)&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#svg-namespace&gt;SVG
+    namespace&lt;/a&gt;, and the token's tag name is one of the ones in
+    the first column of the following table, change the tag name to
+    the name given in the corresponding cell in the second
+    column. (This fixes the case of SVG elements that are not all
+    lowercase.)&lt;/p&gt;
+
+    &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt; Tag name &lt;th&gt; Element name
+     &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyph&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyph&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphdef&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphDef&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphitem&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphItem&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatecolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateColor&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatemotion&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateMotion&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatetransform&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateTransform&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;clippath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;clipPath&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feblend&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feBlend&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecolormatrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feColorMatrix&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomponenttransfer&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComponentTransfer&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomposite&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComposite&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feconvolvematrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feConvolveMatrix&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fediffuselighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDiffuseLighting&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fedisplacementmap&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDisplacementMap&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fedistantlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDistantLight&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feflood&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFlood&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefunca&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncA&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncb&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncB&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncg&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncG&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncr&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncR&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fegaussianblur&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feGaussianBlur&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feimage&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feImage&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femerge&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMerge&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femergenode&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMergeNode&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femorphology&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMorphology&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feoffset&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feOffset&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fepointlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fePointLight&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fespecularlighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpecularLighting&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fespotlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpotLight&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fetile&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTile&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feturbulence&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTurbulence&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignobject&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphref&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphRef&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;lineargradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;linearGradient&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;radialgradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;radialGradient&lt;/code&gt;
+      &lt;!--&lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidcolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidColor&lt;/code&gt; (SVG 1.2)--&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;textpath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;textPath&lt;/code&gt;
+    &lt;/table&gt;&lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#svg-namespace&gt;SVG
+    namespace&lt;/a&gt;, &lt;a href=#adjust-svg-attributes&gt;adjust SVG attributes&lt;/a&gt; for the
+    token. (This fixes the case of SVG attributes that are not all
+    lowercase.)&lt;/p&gt;
+
+    &lt;p&gt;&lt;a href=#adjust-foreign-attributes&gt;Adjust foreign attributes&lt;/a&gt; for the token. (This
+    fixes the use of namespaced attributes, in particular XLink in
+    SVG.)&lt;/p&gt;
+
+    &lt;p&gt;&lt;a href=#insert-a-foreign-element&gt;Insert a foreign element&lt;/a&gt; for the token, in the
+    same namespace as the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;If the token has its &lt;i&gt;self-closing flag&lt;/i&gt; set, pop the
+    &lt;a href=#current-node&gt;current node&lt;/a&gt; off the &lt;a href=#stack-of-open-elements&gt;stack of open
+    elements&lt;/a&gt; and &lt;a href=#acknowledge-self-closing-flag title=&quot;acknowledge self-closing
+    flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt id=scriptForeignEndTag&gt;An end tag whose tag name is &quot;script&quot;, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Pop the &lt;a href=#current-node&gt;current node&lt;/a&gt; off the &lt;a href=#stack-of-open-elements&gt;stack of open
+    elements&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt; have the
+    same value as the current &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt;. Let
+    the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; be just before the &lt;a href=#next-input-character&gt;next
+    input character&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Increment the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; by
+    one. Set the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; to true.&lt;/p&gt;
+
+    &lt;p&gt;&lt;a href=<A HREF="http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing">http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing</A>&gt;Process
+    the &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element&lt;/a&gt; according to the SVG
+    rules, if the user agent supports SVG. &lt;a href=#refsSVG&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p class=note&gt;Even if this causes &lt;a href=#dom-document-write title=dom-document-write&gt;new characters to be inserted into the
+    tokenizer&lt;/a&gt;, the parser will not be executed reentrantly,
+    since the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; is true.&lt;/p&gt;
+
+    &lt;p&gt;Decrement the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; by
+    one. If the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; is zero,
+    then set the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; to false.&lt;/p&gt;
+
+    &lt;p&gt;Let the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; have the value of the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt;. (In other words, restore the
+    &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; to its previous value. This value
+    might be the &quot;undefined&quot; value.)&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other end tag&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Run these steps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a href=#current-node&gt;current
+     node&lt;/a&gt; (the bottommost node of the stack).&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element with the
+     same tag name as the token, then this is a &lt;a href=#parse-error&gt;parse
+     error&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;'s tag name,
+     &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;, is the same as as the
+     tag name of the token, pop elements from the &lt;a href=#stack-of-open-elements&gt;stack of open
+     elements&lt;/a&gt; until &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has been popped
+     from the stack, and then jump to the last step of this list of
+     steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
+     &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element in the
+     &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;, return to the step labeled
+     &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Otherwise, process the token according to the rules given
+     in the section corresponding to the current &lt;a href=#insertion-mode&gt;insertion
+     mode&lt;/a&gt; in HTML content.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
   &lt;/dl&gt;&lt;/div&gt;
 
 

Modified: index
===================================================================
--- index	2011-02-27 00:03:26 UTC (rev 5919)
+++ index	2011-02-28 23:56:22 UTC (rev 5920)
@@ -243,7 +243,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 27 February 2011&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 28 February 2011&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -1148,29 +1148,31 @@
        &lt;li&gt;&lt;a href=#creating-and-inserting-elements&gt;&lt;span class=secno&gt;10.2.5.1 &lt;/span&gt;Creating and inserting elements&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#closing-elements-that-have-implied-end-tags&gt;&lt;span class=secno&gt;10.2.5.2 &lt;/span&gt;Closing elements that have implied end tags&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#foster-parenting&gt;&lt;span class=secno&gt;10.2.5.3 &lt;/span&gt;Foster parenting&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-initial-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4 &lt;/span&gt;The &quot;initial&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-before-html-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.5 &lt;/span&gt;The &quot;before html&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-before-head-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.6 &lt;/span&gt;The &quot;before head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inhead&gt;&lt;span class=secno&gt;10.2.5.7 &lt;/span&gt;The &quot;in head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;10.2.5.8 &lt;/span&gt;The &quot;in head noscript&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-after-head-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.9 &lt;/span&gt;The &quot;after head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inbody&gt;&lt;span class=secno&gt;10.2.5.10 &lt;/span&gt;The &quot;in body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-incdata&gt;&lt;span class=secno&gt;10.2.5.11 &lt;/span&gt;The &quot;text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intable&gt;&lt;span class=secno&gt;10.2.5.12 &lt;/span&gt;The &quot;in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intabletext&gt;&lt;span class=secno&gt;10.2.5.13 &lt;/span&gt;The &quot;in table text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-incaption&gt;&lt;span class=secno&gt;10.2.5.14 &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-incolgroup&gt;&lt;span class=secno&gt;10.2.5.15 &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intbody&gt;&lt;span class=secno&gt;10.2.5.16 &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intr&gt;&lt;span class=secno&gt;10.2.5.17 &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intd&gt;&lt;span class=secno&gt;10.2.5.18 &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inselect&gt;&lt;span class=secno&gt;10.2.5.19 &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inselectintable&gt;&lt;span class=secno&gt;10.2.5.20 &lt;/span&gt;The &quot;in select in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inforeign&gt;&lt;span class=secno&gt;10.2.5.21 &lt;/span&gt;The &quot;in foreign content&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-afterbody&gt;&lt;span class=secno&gt;10.2.5.22 &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inframeset&gt;&lt;span class=secno&gt;10.2.5.23 &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-afterframeset&gt;&lt;span class=secno&gt;10.2.5.24 &lt;/span&gt;The &quot;after frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.25 &lt;/span&gt;The &quot;after after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.26 &lt;/span&gt;The &quot;after after frameset&quot; insertion mode&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inhtml&gt;&lt;span class=secno&gt;10.2.5.4 &lt;/span&gt;The rules for parsing tokens in HTML content&lt;/a&gt;
+        &lt;ol&gt;
+         &lt;li&gt;&lt;a href=#the-initial-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.1 &lt;/span&gt;The &quot;initial&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-before-html-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.2 &lt;/span&gt;The &quot;before html&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-before-head-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.3 &lt;/span&gt;The &quot;before head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inhead&gt;&lt;span class=secno&gt;10.2.5.4.4 &lt;/span&gt;The &quot;in head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;10.2.5.4.5 &lt;/span&gt;The &quot;in head noscript&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-head-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.6 &lt;/span&gt;The &quot;after head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inbody&gt;&lt;span class=secno&gt;10.2.5.4.7 &lt;/span&gt;The &quot;in body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incdata&gt;&lt;span class=secno&gt;10.2.5.4.8 &lt;/span&gt;The &quot;text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intable&gt;&lt;span class=secno&gt;10.2.5.4.9 &lt;/span&gt;The &quot;in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intabletext&gt;&lt;span class=secno&gt;10.2.5.4.10 &lt;/span&gt;The &quot;in table text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incaption&gt;&lt;span class=secno&gt;10.2.5.4.11 &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incolgroup&gt;&lt;span class=secno&gt;10.2.5.4.12 &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intbody&gt;&lt;span class=secno&gt;10.2.5.4.13 &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intr&gt;&lt;span class=secno&gt;10.2.5.4.14 &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intd&gt;&lt;span class=secno&gt;10.2.5.4.15 &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inselect&gt;&lt;span class=secno&gt;10.2.5.4.16 &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inselectintable&gt;&lt;span class=secno&gt;10.2.5.4.17 &lt;/span&gt;The &quot;in select in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-afterbody&gt;&lt;span class=secno&gt;10.2.5.4.18 &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inframeset&gt;&lt;span class=secno&gt;10.2.5.4.19 &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-afterframeset&gt;&lt;span class=secno&gt;10.2.5.4.20 &lt;/span&gt;The &quot;after frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.21 &lt;/span&gt;The &quot;after after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.22 &lt;/span&gt;The &quot;after after frameset&quot; insertion mode&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inforeign&gt;&lt;span class=secno&gt;10.2.5.5 &lt;/span&gt;The rules for parsing tokens in foreign content&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-end&gt;&lt;span class=secno&gt;10.2.6 &lt;/span&gt;The end&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#coercing-an-html-dom-into-an-infoset&gt;&lt;span class=secno&gt;10.2.7 &lt;/span&gt;Coercing an HTML DOM into an infoset&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#an-introduction-to-error-handling-and-strange-cases-in-the-parser&gt;&lt;span class=secno&gt;10.2.8 &lt;/span&gt;An introduction to error handling and strange cases in the parser&lt;/a&gt;
@@ -73953,12 +73955,16 @@
   &quot;&lt;a href=#the-before-html-insertion-mode title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;,
   &quot;&lt;a href=#the-before-head-insertion-mode title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;,
   &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion mode: in head&quot;&gt;in head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inheadnoscript title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: text&quot;&gt;text&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion mode: in select in table&quot;&gt;in select in
-  table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in
-  foreign content&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion mode: after
+  &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: text&quot;&gt;text&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intable title=&quot;insertion
+  mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in
+  table text&quot;&gt;in table text&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in
+  caption&quot;&gt;in caption&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column
+  group&quot;&gt;in column group&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in
+  table body&quot;&gt;in table body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in
+  row&quot;&gt;in row&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in
+  cell&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in
+  select&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion mode: in select in table&quot;&gt;in
+  select in table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion mode: after
   body&quot;&gt;after body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inframeset title=&quot;insertion mode: in
   frameset&quot;&gt;in frameset&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-afterframeset title=&quot;insertion mode: after
   frameset&quot;&gt;after frameset&lt;/a&gt;&quot;, &quot;&lt;a href=#the-after-after-body-insertion-mode title=&quot;insertion mode:
@@ -74063,12 +74069,6 @@
    non-null when we're going through these steps, we'll need to
    uncomment out the commented-out bits --&gt;
 
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is an element from the &lt;a href=#mathml-namespace&gt;MathML
-   namespace&lt;/a&gt; or the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;, then switch the
-   &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in
-   foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot; and abort these
-   steps.&lt;/li&gt;
-
    &lt;li&gt;If &lt;var title=&quot;&quot;&gt;last&lt;/var&gt; is true, then switch the
    &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in
    body&quot;&gt;in body&lt;/a&gt;&quot; and abort these steps. (&lt;a href=#fragment-case&gt;fragment
@@ -75676,11 +75676,10 @@
   case-insensitive&lt;/a&gt; match for the word &quot;DOCTYPE&quot;, then consume
   those characters and switch to the &lt;a href=#doctype-state&gt;DOCTYPE state&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Otherwise, if the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-  content&lt;/a&gt;&quot; and the &lt;a href=#current-node&gt;current node&lt;/a&gt; is not an element
-  in the &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt; and the next seven characters are
-  an &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;[CDATA[&quot; (the
-  five uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET
+  &lt;p&gt;Otherwise, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is not an element in
+  the &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt; and the next seven characters are an
+  &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;[CDATA[&quot; (the five
+  uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET
   character before and after), then consume those characters and
   switch to the &lt;a href=#cdata-section-state&gt;CDATA section state&lt;/a&gt;.&lt;/p&gt;
 
@@ -76582,11 +76581,44 @@
   has to render the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; so that it is available to
   the user, or when it has to begin accepting user input.&lt;/p&gt;
 
-  &lt;p&gt;As each token is emitted from the tokenizer, the user agent must
-  process the token according to the rules given in the section
-  corresponding to the current &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;.&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;As each token is emitted from the tokenizer, the user agent must
+  follow the appropriate steps from the following list:&lt;/p&gt;
 
-  &lt;p&gt;When the steps below require the UA to &lt;dfn id=insert-a-character&gt;insert a
+  &lt;dl class=switch&gt;&lt;dt&gt;If there is no &lt;a href=#current-node&gt;current node&lt;/a&gt;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;a href=#mathml-text-integration-point&gt;MathML text integration point&lt;/a&gt; and the token is a start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; and the token is a start tag whose tag name is &quot;svg&quot;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;a href=#html-integration-point&gt;HTML integration point&lt;/a&gt; and the token is a start tag&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;a href=#html-integration-point&gt;HTML integration point&lt;/a&gt; and the token is a character token&lt;/dt&gt;
+   &lt;dt&gt;If the token is an end-of-file token&lt;/dt&gt;
+
+   &lt;dd&gt;Process the token according to the rules given in the section
+   corresponding to the current &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; in HTML
+   content.&lt;/dd&gt;
+
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+   &lt;dd&gt;Process the token according to the rules given in the section
+   for parsing tokens &lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign
+   content&quot;&gt;in foreign content&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;The &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;dfn id=mathml-text-integration-point&gt;MathML text
+  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
+
+  &lt;ul class=brief&gt;&lt;li&gt;An &lt;code title=&quot;&quot;&gt;mi&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mo&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mn&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;ms&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mtext&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
+  &lt;/ul&gt;&lt;p&gt;The &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;dfn id=html-integration-point&gt;HTML
+  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
+
+  &lt;ul class=brief&gt;&lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;&quot;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;desc&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
+  &lt;/ul&gt;&lt;hr&gt;&lt;p&gt;When the steps below require the UA to &lt;dfn id=insert-a-character&gt;insert a
   character&lt;/dfn&gt; into a node, if that node has a child immediately
   before where the character is to be inserted, and that child is a
   &lt;code&gt;&lt;a href=#text&gt;Text&lt;/a&gt;&lt;/code&gt; node, then the character must be appended to that
@@ -76878,11 +76910,13 @@
 
 
 
-  &lt;h5 id=the-initial-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h5 id=parsing-main-inhtml&gt;&lt;span class=secno&gt;10.2.5.4 &lt;/span&gt;The rules for parsing tokens in HTML content&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-initial-insertion-mode title=&quot;insertion
-  mode: initial&quot;&gt;initial&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
 
+  &lt;h6 id=the-initial-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.1 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-initial-insertion-mode title=&quot;insertion mode: initial&quot;&gt;initial&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
+
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
    U+000D CARRIAGE RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
@@ -77072,10 +77106,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-before-html-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.5 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=the-before-html-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.2 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-before-html-insertion-mode title=&quot;insertion
-  mode: before html&quot;&gt;before html&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-before-html-insertion-mode title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
    &lt;dd&gt;
@@ -77156,10 +77189,9 @@
   as described in the next section.&lt;/p&gt;
 
 
-  &lt;h5 id=the-before-head-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.6 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=the-before-head-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.3 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-before-head-insertion-mode title=&quot;insertion
-  mode: before head&quot;&gt;before head&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-before-head-insertion-mode title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -77222,10 +77254,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inhead&gt;&lt;span class=secno&gt;10.2.5.7 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inhead&gt;&lt;span class=secno&gt;10.2.5.4.4 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion
-  mode: in head&quot;&gt;in head&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion mode: in head&quot;&gt;in head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -77389,10 +77420,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;10.2.5.8 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;10.2.5.4.5 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inheadnoscript title=&quot;insertion
-  mode: in head noscript&quot;&gt;in head noscript&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inheadnoscript title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
    &lt;dd&gt;
@@ -77450,10 +77480,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-after-head-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.9 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-head-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.6 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion
-  mode: after head&quot;&gt;after head&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -77541,10 +77570,9 @@
     token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inbody&gt;&lt;span class=secno&gt;10.2.5.10 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inbody&gt;&lt;span class=secno&gt;10.2.5.4.7 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion
-  mode: in body&quot;&gt;in body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
    &lt;dd&gt;
@@ -78707,11 +78735,6 @@
     elements&lt;/a&gt; and &lt;a href=#acknowledge-self-closing-flag title=&quot;acknowledge self-closing
     flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is not already
-    &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/a&gt;&quot;, switch the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/a&gt;&quot;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;A start tag whose tag name is &quot;svg&quot;&lt;/dt&gt;
@@ -78741,11 +78764,6 @@
     elements&lt;/a&gt; and &lt;a href=#acknowledge-self-closing-flag title=&quot;acknowledge self-closing
     flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is not already
-    &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/a&gt;&quot;, switch the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/a&gt;&quot;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;A start &lt;!--or end--&gt; tag whose tag name is one of: &quot;caption&quot;,
@@ -78814,10 +78832,9 @@
 
     &lt;/ol&gt;&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-incdata&gt;&lt;span class=secno&gt;10.2.5.11 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: text&quot;&gt;text&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incdata&gt;&lt;span class=secno&gt;10.2.5.4.8 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: text&quot;&gt;text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion
-  mode: text&quot;&gt;text&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: text&quot;&gt;text&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token&lt;/dt&gt;
    &lt;dd&gt;
@@ -78967,10 +78984,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-intable&gt;&lt;span class=secno&gt;10.2.5.12 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-intable&gt;&lt;span class=secno&gt;10.2.5.4.9 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intable title=&quot;insertion
-  mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in table&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token&lt;/dt&gt;
    &lt;dd&gt;
@@ -79171,11 +79187,9 @@
 
 
 
-  &lt;h5 id=parsing-main-intabletext&gt;&lt;span class=secno&gt;10.2.5.13 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=parsing-main-intabletext&gt;&lt;span class=secno&gt;10.2.5.4.10 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion
-  mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot;, tokens must be handled
-  as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
    &lt;dd&gt;
@@ -79214,10 +79228,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-incaption&gt;&lt;span class=secno&gt;10.2.5.14 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incaption&gt;&lt;span class=secno&gt;10.2.5.4.11 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion
-  mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;An end tag whose tag name is &quot;caption&quot;&lt;/dt&gt;
    &lt;dd&gt;
@@ -79272,10 +79285,9 @@
     mode&lt;/a&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;10.2.5.15 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;10.2.5.4.12 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion
-  mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -79359,10 +79371,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-intbody&gt;&lt;span class=secno&gt;10.2.5.16 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-intbody&gt;&lt;span class=secno&gt;10.2.5.4.13 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion
-  mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A start tag whose tag name is &quot;tr&quot;&lt;/dt&gt;
    &lt;dd&gt;
@@ -79448,10 +79459,9 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-intr&gt;&lt;span class=secno&gt;10.2.5.17 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=parsing-main-intr&gt;&lt;span class=secno&gt;10.2.5.4.14 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intr title=&quot;insertion
-  mode: in row&quot;&gt;in row&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A start tag whose tag name is one of: &quot;th&quot;, &quot;td&quot;&lt;/dt&gt;
    &lt;dd&gt;
@@ -79539,10 +79549,9 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-intd&gt;&lt;span class=secno&gt;10.2.5.18 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=parsing-main-intd&gt;&lt;span class=secno&gt;10.2.5.4.15 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intd title=&quot;insertion
-  mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;An end tag whose tag name is one of: &quot;td&quot;, &quot;th&quot;&lt;/dt&gt;
    &lt;dd&gt;
@@ -79633,10 +79642,9 @@
   cell&lt;/a&gt; algorithm is invoked.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-inselect&gt;&lt;span class=secno&gt;10.2.5.19 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=parsing-main-inselect&gt;&lt;span class=secno&gt;10.2.5.4.16 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion
-  mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
    &lt;dd&gt;
@@ -79784,10 +79792,9 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;10.2.5.20 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;10.2.5.4.17 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion
-  mode: in select in table&quot;&gt;in select in table&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A start tag whose tag name is one of: &quot;caption&quot;, &quot;table&quot;,
    &quot;tbody&quot;, &quot;tfoot&quot;, &quot;thead&quot;, &quot;tr&quot;, &quot;td&quot;, &quot;th&quot;&lt;/dt&gt;
@@ -79816,276 +79823,10 @@
     mode&lt;/a&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;10.2.5.21 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;10.2.5.4.18 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion
-  mode: in foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot;, tokens must be
-  handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;Any token, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;a href=#mathml-text-integration-point&gt;MathML text integration point&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag whose tag name is &quot;svg&quot;, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;a href=#html-integration-point&gt;HTML integration point&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;A character token, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;a href=#html-integration-point&gt;HTML integration point&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;An end-of-file token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Process the token &lt;a href=#using-the-rules-for&gt;using the rules for&lt;/a&gt; the
-     &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot;
-     &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, except that if those rules say to
-     reprocess the token, these steps must be finished first (i.e. the
-     insertion mode is reset by the following step before the token is
-     reprocessed).&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If, after doing so, the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is
-     still &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in
-     foreign content&lt;/a&gt;&quot;, &lt;a href=#reset-the-insertion-mode-appropriately&gt;reset the insertion mode
-     appropriately&lt;/a&gt;.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. &lt;a href=#insert-a-character title=&quot;insert a
-    character&quot;&gt;Insert a U+FFFD REPLACEMENT CHARACTER character&lt;/a&gt;
-    into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A character token that is one of U+0009 CHARACTER TABULATION,
-   U+000A LINE FEED (LF), U+000C FORM FEED (FF), U+000D CARRIAGE
-   RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;Insert the token's
-    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other character token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;Insert the token's
-    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=#frameset-ok-flag&gt;frameset-ok flag&lt;/a&gt; to &quot;not ok&quot;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A comment token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;&lt;a href=#comment-0&gt;Comment&lt;/a&gt;&lt;/code&gt; node to the &lt;a href=#current-node&gt;current
-    node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to
-    the data given in the comment token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A start tag whose tag name is one of: &lt;!--&quot;a&quot;,--&gt; &quot;b&quot;, &quot;big&quot;,
-   &quot;blockquote&quot;, &quot;body&quot;&lt;!--by inspection--&gt;, &quot;br&quot;, &quot;center&quot;, &quot;code&quot;,
-   &quot;dd&quot;, &quot;div&quot;, &quot;dl&quot;, &quot;dt&quot;&lt;!-- so that dd and dt can be handled
-   uniformly throughout the parser --&gt;, &quot;em&quot;, &quot;embed&quot;, &quot;h1&quot;, &quot;h2&quot;,
-   &quot;h3&quot;, &quot;h4&quot;&lt;!--for completeness--&gt;, &quot;h5&quot;, &quot;h6&quot;&lt;!--for
-   completeness--&gt;, &quot;head&quot;&lt;!--by inspection--&gt;, &quot;hr&quot;, &quot;i&quot;, &quot;img&quot;,
-   &quot;li&quot;, &quot;listing&quot;&lt;!-- so that pre and listing can be handled
-   uniformly throughout the parser --&gt;, &quot;menu&quot;, &quot;meta&quot;, &quot;nobr&quot;,
-   &quot;ol&quot;&lt;!-- so that dl, ul, and ol can be handled uniformly throughout
-   the parser --&gt;, &quot;p&quot;, &quot;pre&quot;, &quot;ruby&quot;, &quot;s&quot;, &lt;!--&quot;script&quot;,--&gt; &quot;small&quot;,
-   &quot;span&quot;, &quot;strong&quot;, &quot;strike&quot;&lt;!-- so that s and strike can be handled
-   uniformly throughout the parser --&gt;, &lt;!--&quot;style&quot;,--&gt; &quot;sub&quot;, &quot;sup&quot;,
-   &quot;table&quot;&lt;!--by inspection--&gt;, &quot;tt&quot;, &quot;u&quot;, &quot;ul&quot;, &quot;var&quot;&lt;/dt&gt; &lt;!-- this
-   list was determined empirically by studying over 6,000,000,000
-   pages that were specifically not XML pages --&gt;
-   &lt;dt&gt;A start tag whose tag name is &quot;font&quot;, if the token has any
-   attributes named &quot;color&quot;, &quot;face&quot;, or &quot;size&quot;&lt;/dt&gt; &lt;!-- the
-   attributes here are required so that SVG &lt;font&gt; will go through as
-   SVG but legacy &lt;font&gt;s won't --&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Pop an element from the &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;,
-    and then keep popping more elements from the &lt;a href=#stack-of-open-elements&gt;stack of open
-    elements&lt;/a&gt; until the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a
-    &lt;a href=#mathml-text-integration-point&gt;MathML text integration point&lt;/a&gt;, an &lt;a href=#html-integration-point&gt;HTML
-    integration point&lt;/a&gt;, or an element in the &lt;a href=#html-namespace-0&gt;HTML
-    namespace&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Then, &lt;a href=#reset-the-insertion-mode-appropriately&gt;reset the insertion mode appropriately&lt;/a&gt; and
-    reprocess the token.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other start tag&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the
-    &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;, &lt;a href=#adjust-mathml-attributes&gt;adjust MathML
-    attributes&lt;/a&gt; for the token. (This fixes the case of MathML
-    attributes that are not all lowercase.)&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#svg-namespace&gt;SVG
-    namespace&lt;/a&gt;, and the token's tag name is one of the ones in
-    the first column of the following table, change the tag name to
-    the name given in the corresponding cell in the second
-    column. (This fixes the case of SVG elements that are not all
-    lowercase.)&lt;/p&gt;
-
-    &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt; Tag name &lt;th&gt; Element name
-     &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyph&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyph&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphdef&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphDef&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphitem&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphItem&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatecolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateColor&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatemotion&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateMotion&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatetransform&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateTransform&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;clippath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;clipPath&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feblend&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feBlend&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecolormatrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feColorMatrix&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomponenttransfer&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComponentTransfer&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomposite&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComposite&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feconvolvematrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feConvolveMatrix&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fediffuselighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDiffuseLighting&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fedisplacementmap&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDisplacementMap&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fedistantlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDistantLight&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feflood&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFlood&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefunca&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncA&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncb&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncB&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncg&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncG&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncr&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncR&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fegaussianblur&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feGaussianBlur&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feimage&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feImage&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femerge&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMerge&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femergenode&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMergeNode&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femorphology&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMorphology&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feoffset&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feOffset&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fepointlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fePointLight&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fespecularlighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpecularLighting&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fespotlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpotLight&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fetile&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTile&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feturbulence&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTurbulence&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignobject&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphref&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphRef&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;lineargradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;linearGradient&lt;/code&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;radialgradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;radialGradient&lt;/code&gt;
-      &lt;!--&lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidcolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidColor&lt;/code&gt; (SVG 1.2)--&gt;
-      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;textpath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;textPath&lt;/code&gt;
-    &lt;/table&gt;&lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#svg-namespace&gt;SVG
-    namespace&lt;/a&gt;, &lt;a href=#adjust-svg-attributes&gt;adjust SVG attributes&lt;/a&gt; for the
-    token. (This fixes the case of SVG attributes that are not all
-    lowercase.)&lt;/p&gt;
-
-    &lt;p&gt;&lt;a href=#adjust-foreign-attributes&gt;Adjust foreign attributes&lt;/a&gt; for the token. (This
-    fixes the use of namespaced attributes, in particular XLink in
-    SVG.)&lt;/p&gt;
-
-    &lt;p&gt;&lt;a href=#insert-a-foreign-element&gt;Insert a foreign element&lt;/a&gt; for the token, in the
-    same namespace as the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;If the token has its &lt;i&gt;self-closing flag&lt;/i&gt; set, pop the
-    &lt;a href=#current-node&gt;current node&lt;/a&gt; off the &lt;a href=#stack-of-open-elements&gt;stack of open
-    elements&lt;/a&gt; and &lt;a href=#acknowledge-self-closing-flag title=&quot;acknowledge self-closing
-    flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt id=scriptForeignEndTag&gt;An end tag whose tag name is &quot;script&quot;, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;Pop the &lt;a href=#current-node&gt;current node&lt;/a&gt; off the &lt;a href=#stack-of-open-elements&gt;stack of open
-    elements&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt; have the
-    same value as the current &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt;. Let
-    the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; be just before the &lt;a href=#next-input-character&gt;next
-    input character&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Increment the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; by
-    one. Set the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; to true.&lt;/p&gt;
-
-    &lt;p&gt;&lt;a href=<A HREF="http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing">http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing</A>&gt;Process
-    the &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element&lt;/a&gt; according to the SVG
-    rules, if the user agent supports SVG. &lt;a href=#refsSVG&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p class=note&gt;Even if this causes &lt;a href=#dom-document-write title=dom-document-write&gt;new characters to be inserted into the
-    tokenizer&lt;/a&gt;, the parser will not be executed reentrantly,
-    since the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; is true.&lt;/p&gt;
-
-    &lt;p&gt;Decrement the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; by
-    one. If the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; is zero,
-    then set the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; to false.&lt;/p&gt;
-
-    &lt;p&gt;Let the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; have the value of the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt;. (In other words, restore the
-    &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; to its previous value. This value
-    might be the &quot;undefined&quot; value.)&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other end tag&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Run these steps:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a href=#current-node&gt;current
-     node&lt;/a&gt; (the bottommost node of the stack).&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element with the
-     same tag name as the token, then this is a &lt;a href=#parse-error&gt;parse
-     error&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;'s tag name,
-     &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;, is the same as as the
-     tag name of the token, pop elements from the &lt;a href=#stack-of-open-elements&gt;stack of open
-     elements&lt;/a&gt; until &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has been popped
-     from the stack, and then jump to the last step of this list of
-     steps.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
-     &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element in the
-     &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;, return to the step labeled
-     &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Otherwise, process the token &lt;a href=#using-the-rules-for&gt;using the rules
-     for&lt;/a&gt; the &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in
-     body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, except that if those
-     rules say to reprocess the token, these steps must be finished
-     first (i.e. the insertion mode is reset by the following step
-     before the token is reprocessed).&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is still &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-     content&lt;/a&gt;&quot;, &lt;a href=#reset-the-insertion-mode-appropriately&gt;reset the insertion mode
-     appropriately&lt;/a&gt;.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;The &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;dfn id=mathml-text-integration-point&gt;MathML text
-  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
-
-  &lt;ul class=brief&gt;&lt;li&gt;An &lt;code title=&quot;&quot;&gt;mi&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mo&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mn&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;ms&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mtext&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;&lt;/li&gt;
-  &lt;/ul&gt;&lt;p&gt;The &lt;a href=#current-node&gt;current node&lt;/a&gt; is an &lt;dfn id=html-integration-point&gt;HTML
-  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
-
-  &lt;ul class=brief&gt;&lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;&quot;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;desc&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/li&gt;
-  &lt;/ul&gt;&lt;h5 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;10.2.5.22 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
-
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion
-  mode: after body&quot;&gt;after body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
-
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
    U+000D CARRIAGE RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
@@ -80139,10 +79880,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;10.2.5.23 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;10.2.5.4.19 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inframeset title=&quot;insertion
-  mode: in frameset&quot;&gt;in frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inframeset title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
    TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
@@ -80232,10 +79972,9 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;10.2.5.24 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;10.2.5.4.20 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-afterframeset title=&quot;insertion
-  mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-afterframeset title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;!-- due to rules in the &quot;in frameset&quot; mode, this can't be entered in the fragment case --&gt;
   &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
@@ -80286,10 +80025,9 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.25 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.21 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-after-after-body-insertion-mode title=&quot;insertion
-  mode: after after body&quot;&gt;after after body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-after-body-insertion-mode title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A comment token&lt;/dt&gt;
    &lt;dd&gt;
@@ -80320,10 +80058,9 @@
     reprocess the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.26 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;10.2.5.4.22 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-after-after-frameset-insertion-mode title=&quot;insertion
-  mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-after-frameset-insertion-mode title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;A comment token&lt;/dt&gt;
    &lt;dd&gt;
@@ -80358,6 +80095,223 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
+  &lt;/dl&gt;&lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;10.2.5.5 &lt;/span&gt;The rules for parsing tokens &lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;When the user agent is to apply the rules for parsing tokens in foreign content, the user agent must handle the token as follows:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. &lt;a href=#insert-a-character title=&quot;insert a
+    character&quot;&gt;Insert a U+FFFD REPLACEMENT CHARACTER character&lt;/a&gt;
+    into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A character token that is one of U+0009 CHARACTER TABULATION,
+   U+000A LINE FEED (LF), U+000C FORM FEED (FF), U+000D CARRIAGE
+   RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;Insert the token's
+    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other character token&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;Insert the token's
+    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Set the &lt;a href=#frameset-ok-flag&gt;frameset-ok flag&lt;/a&gt; to &quot;not ok&quot;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A comment token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Append a &lt;code&gt;&lt;a href=#comment-0&gt;Comment&lt;/a&gt;&lt;/code&gt; node to the &lt;a href=#current-node&gt;current
+    node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to
+    the data given in the comment token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A start tag whose tag name is one of: &lt;!--&quot;a&quot;,--&gt; &quot;b&quot;, &quot;big&quot;,
+   &quot;blockquote&quot;, &quot;body&quot;&lt;!--by inspection--&gt;, &quot;br&quot;, &quot;center&quot;, &quot;code&quot;,
+   &quot;dd&quot;, &quot;div&quot;, &quot;dl&quot;, &quot;dt&quot;&lt;!-- so that dd and dt can be handled
+   uniformly throughout the parser --&gt;, &quot;em&quot;, &quot;embed&quot;, &quot;h1&quot;, &quot;h2&quot;,
+   &quot;h3&quot;, &quot;h4&quot;&lt;!--for completeness--&gt;, &quot;h5&quot;, &quot;h6&quot;&lt;!--for
+   completeness--&gt;, &quot;head&quot;&lt;!--by inspection--&gt;, &quot;hr&quot;, &quot;i&quot;, &quot;img&quot;,
+   &quot;li&quot;, &quot;listing&quot;&lt;!-- so that pre and listing can be handled
+   uniformly throughout the parser --&gt;, &quot;menu&quot;, &quot;meta&quot;, &quot;nobr&quot;,
+   &quot;ol&quot;&lt;!-- so that dl, ul, and ol can be handled uniformly throughout
+   the parser --&gt;, &quot;p&quot;, &quot;pre&quot;, &quot;ruby&quot;, &quot;s&quot;, &lt;!--&quot;script&quot;,--&gt; &quot;small&quot;,
+   &quot;span&quot;, &quot;strong&quot;, &quot;strike&quot;&lt;!-- so that s and strike can be handled
+   uniformly throughout the parser --&gt;, &lt;!--&quot;style&quot;,--&gt; &quot;sub&quot;, &quot;sup&quot;,
+   &quot;table&quot;&lt;!--by inspection--&gt;, &quot;tt&quot;, &quot;u&quot;, &quot;ul&quot;, &quot;var&quot;&lt;/dt&gt; &lt;!-- this
+   list was determined empirically by studying over 6,000,000,000
+   pages that were specifically not XML pages --&gt;
+   &lt;dt&gt;A start tag whose tag name is &quot;font&quot;, if the token has any
+   attributes named &quot;color&quot;, &quot;face&quot;, or &quot;size&quot;&lt;/dt&gt; &lt;!-- the
+   attributes here are required so that SVG &lt;font&gt; will go through as
+   SVG but legacy &lt;font&gt;s won't --&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Pop an element from the &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;,
+    and then keep popping more elements from the &lt;a href=#stack-of-open-elements&gt;stack of open
+    elements&lt;/a&gt; until the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a
+    &lt;a href=#mathml-text-integration-point&gt;MathML text integration point&lt;/a&gt;, an &lt;a href=#html-integration-point&gt;HTML
+    integration point&lt;/a&gt;, or an element in the &lt;a href=#html-namespace-0&gt;HTML
+    namespace&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Then, reprocess the token.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other start tag&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the
+    &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;, &lt;a href=#adjust-mathml-attributes&gt;adjust MathML
+    attributes&lt;/a&gt; for the token. (This fixes the case of MathML
+    attributes that are not all lowercase.)&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#svg-namespace&gt;SVG
+    namespace&lt;/a&gt;, and the token's tag name is one of the ones in
+    the first column of the following table, change the tag name to
+    the name given in the corresponding cell in the second
+    column. (This fixes the case of SVG elements that are not all
+    lowercase.)&lt;/p&gt;
+
+    &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt; Tag name &lt;th&gt; Element name
+     &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyph&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyph&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphdef&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphDef&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphitem&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphItem&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatecolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateColor&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatemotion&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateMotion&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;animatetransform&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateTransform&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;clippath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;clipPath&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feblend&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feBlend&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecolormatrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feColorMatrix&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomponenttransfer&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComponentTransfer&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomposite&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComposite&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feconvolvematrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feConvolveMatrix&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fediffuselighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDiffuseLighting&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fedisplacementmap&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDisplacementMap&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fedistantlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDistantLight&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feflood&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFlood&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefunca&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncA&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncb&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncB&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncg&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncG&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncr&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncR&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fegaussianblur&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feGaussianBlur&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feimage&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feImage&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femerge&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMerge&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femergenode&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMergeNode&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;femorphology&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMorphology&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feoffset&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feOffset&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fepointlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fePointLight&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fespecularlighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpecularLighting&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fespotlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpotLight&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;fetile&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTile&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;feturbulence&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTurbulence&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignobject&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphref&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphRef&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;lineargradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;linearGradient&lt;/code&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;radialgradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;radialGradient&lt;/code&gt;
+      &lt;!--&lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidcolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidColor&lt;/code&gt; (SVG 1.2)--&gt;
+      &lt;tr&gt;&lt;td&gt; &lt;code title=&quot;&quot;&gt;textpath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;textPath&lt;/code&gt;
+    &lt;/table&gt;&lt;p&gt;If the &lt;a href=#current-node&gt;current node&lt;/a&gt; is an element in the &lt;a href=#svg-namespace&gt;SVG
+    namespace&lt;/a&gt;, &lt;a href=#adjust-svg-attributes&gt;adjust SVG attributes&lt;/a&gt; for the
+    token. (This fixes the case of SVG attributes that are not all
+    lowercase.)&lt;/p&gt;
+
+    &lt;p&gt;&lt;a href=#adjust-foreign-attributes&gt;Adjust foreign attributes&lt;/a&gt; for the token. (This
+    fixes the use of namespaced attributes, in particular XLink in
+    SVG.)&lt;/p&gt;
+
+    &lt;p&gt;&lt;a href=#insert-a-foreign-element&gt;Insert a foreign element&lt;/a&gt; for the token, in the
+    same namespace as the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;If the token has its &lt;i&gt;self-closing flag&lt;/i&gt; set, pop the
+    &lt;a href=#current-node&gt;current node&lt;/a&gt; off the &lt;a href=#stack-of-open-elements&gt;stack of open
+    elements&lt;/a&gt; and &lt;a href=#acknowledge-self-closing-flag title=&quot;acknowledge self-closing
+    flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt id=scriptForeignEndTag&gt;An end tag whose tag name is &quot;script&quot;, if the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element in the &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Pop the &lt;a href=#current-node&gt;current node&lt;/a&gt; off the &lt;a href=#stack-of-open-elements&gt;stack of open
+    elements&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt; have the
+    same value as the current &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt;. Let
+    the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; be just before the &lt;a href=#next-input-character&gt;next
+    input character&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Increment the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; by
+    one. Set the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; to true.&lt;/p&gt;
+
+    &lt;p&gt;&lt;a href=<A HREF="http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing">http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing</A>&gt;Process
+    the &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element&lt;/a&gt; according to the SVG
+    rules, if the user agent supports SVG. &lt;a href=#refsSVG&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p class=note&gt;Even if this causes &lt;a href=#dom-document-write title=dom-document-write&gt;new characters to be inserted into the
+    tokenizer&lt;/a&gt;, the parser will not be executed reentrantly,
+    since the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; is true.&lt;/p&gt;
+
+    &lt;p&gt;Decrement the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; by
+    one. If the parser's &lt;a href=#script-nesting-level&gt;script nesting level&lt;/a&gt; is zero,
+    then set the &lt;a href=#parser-pause-flag&gt;parser pause flag&lt;/a&gt; to false.&lt;/p&gt;
+
+    &lt;p&gt;Let the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; have the value of the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt;. (In other words, restore the
+    &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; to its previous value. This value
+    might be the &quot;undefined&quot; value.)&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other end tag&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Run these steps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a href=#current-node&gt;current
+     node&lt;/a&gt; (the bottommost node of the stack).&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element with the
+     same tag name as the token, then this is a &lt;a href=#parse-error&gt;parse
+     error&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;'s tag name,
+     &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;, is the same as as the
+     tag name of the token, pop elements from the &lt;a href=#stack-of-open-elements&gt;stack of open
+     elements&lt;/a&gt; until &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has been popped
+     from the stack, and then jump to the last step of this list of
+     steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
+     &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element in the
+     &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;, return to the step labeled
+     &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Otherwise, process the token according to the rules given
+     in the section corresponding to the current &lt;a href=#insertion-mode&gt;insertion
+     mode&lt;/a&gt; in HTML content.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
   &lt;/dl&gt;&lt;/div&gt;
 
 

Modified: source
===================================================================
--- source	2011-02-27 00:03:26 UTC (rev 5919)
+++ source	2011-02-28 23:56:22 UTC (rev 5920)
@@ -88307,18 +88307,16 @@
   title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/span&gt;&quot;,
   &quot;&lt;span title=&quot;insertion mode: after head&quot;&gt;after head&lt;/span&gt;&quot;, &quot;&lt;span
   title=&quot;insertion mode: in body&quot;&gt;in body&lt;/span&gt;&quot;, &quot;&lt;span
-  title=&quot;insertion mode: text&quot;&gt;text&lt;/span&gt;&quot;,
-  &quot;&lt;span title=&quot;insertion mode: in table&quot;&gt;in table&lt;/span&gt;&quot;, &quot;&lt;span
-  title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/span&gt;&quot;, &quot;&lt;span
-  title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/span&gt;&quot;, &quot;&lt;span
-  title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/span&gt;&quot;,
-  &quot;&lt;span title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/span&gt;&quot;,
-  &quot;&lt;span title=&quot;insertion mode: in row&quot;&gt;in row&lt;/span&gt;&quot;, &quot;&lt;span
-  title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/span&gt;&quot;, &quot;&lt;span
-  title=&quot;insertion mode: in select&quot;&gt;in select&lt;/span&gt;&quot;, &quot;&lt;span
-  title=&quot;insertion mode: in select in table&quot;&gt;in select in
-  table&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in foreign content&quot;&gt;in
-  foreign content&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: after
+  title=&quot;insertion mode: text&quot;&gt;text&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion
+  mode: in table&quot;&gt;in table&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in
+  table text&quot;&gt;in table text&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in
+  caption&quot;&gt;in caption&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in column
+  group&quot;&gt;in column group&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in
+  table body&quot;&gt;in table body&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in
+  row&quot;&gt;in row&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in cell&quot;&gt;in
+  cell&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in select&quot;&gt;in
+  select&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in select in table&quot;&gt;in
+  select in table&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: after
   body&quot;&gt;after body&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in
   frameset&quot;&gt;in frameset&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: after
   frameset&quot;&gt;after frameset&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode:
@@ -88439,12 +88437,6 @@
    non-null when we're going through these steps, we'll need to
    uncomment out the commented-out bits --&gt;
 
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is an element from the &lt;span&gt;MathML
-   namespace&lt;/span&gt; or the &lt;span&gt;SVG namespace&lt;/span&gt;, then switch the
-   &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;span title=&quot;insertion mode: in
-   foreign content&quot;&gt;in foreign content&lt;/span&gt;&quot; and abort these
-   steps.&lt;/li&gt;
-
    &lt;li&gt;If &lt;var title=&quot;&quot;&gt;last&lt;/var&gt; is true, then switch the
    &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;span title=&quot;insertion mode: in
    body&quot;&gt;in body&lt;/span&gt;&quot; and abort these steps. (&lt;span&gt;fragment
@@ -90312,12 +90304,10 @@
   case-insensitive&lt;/span&gt; match for the word &quot;DOCTYPE&quot;, then consume
   those characters and switch to the &lt;span&gt;DOCTYPE state&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span
-  title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-  content&lt;/span&gt;&quot; and the &lt;span&gt;current node&lt;/span&gt; is not an element
-  in the &lt;span&gt;HTML namespace&lt;/span&gt; and the next seven characters are
-  an &lt;span&gt;case-sensitive&lt;/span&gt; match for the string &quot;[CDATA[&quot; (the
-  five uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET
+  &lt;p&gt;Otherwise, if the &lt;span&gt;current node&lt;/span&gt; is not an element in
+  the &lt;span&gt;HTML namespace&lt;/span&gt; and the next seven characters are an
+  &lt;span&gt;case-sensitive&lt;/span&gt; match for the string &quot;[CDATA[&quot; (the five
+  uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET
   character before and after), then consume those characters and
   switch to the &lt;span&gt;CDATA section state&lt;/span&gt;.&lt;/p&gt;
 
@@ -91344,10 +91334,57 @@
   has to render the &lt;code&gt;Document&lt;/code&gt; so that it is available to
   the user, or when it has to begin accepting user input.&lt;/p&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;As each token is emitted from the tokenizer, the user agent must
-  process the token according to the rules given in the section
-  corresponding to the current &lt;span&gt;insertion mode&lt;/span&gt;.&lt;/p&gt;
+  follow the appropriate steps from the following list:&lt;/p&gt;
 
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;If there is no &lt;span&gt;current node&lt;/span&gt;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;span&gt;current node&lt;/span&gt; is an element in the &lt;span&gt;HTML namespace&lt;/span&gt;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;span&gt;current node&lt;/span&gt; is a &lt;span&gt;MathML text integration point&lt;/span&gt; and the token is a start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;span&gt;current node&lt;/span&gt; is an &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt; and the token is a start tag whose tag name is &quot;svg&quot;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;span&gt;current node&lt;/span&gt; is an &lt;span&gt;HTML integration point&lt;/span&gt; and the token is a start tag&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;span&gt;current node&lt;/span&gt; is an &lt;span&gt;HTML integration point&lt;/span&gt; and the token is a character token&lt;/dt&gt;
+   &lt;dt&gt;If the token is an end-of-file token&lt;/dt&gt;
+
+   &lt;dd&gt;Process the token according to the rules given in the section
+   corresponding to the current &lt;span&gt;insertion mode&lt;/span&gt; in HTML
+   content.&lt;/dd&gt;
+
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+   &lt;dd&gt;Process the token according to the rules given in the section
+   for parsing tokens &lt;span title=&quot;insertion mode: in foreign
+   content&quot;&gt;in foreign content&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The &lt;span&gt;current node&lt;/span&gt; is a &lt;dfn&gt;MathML text
+  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
+
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mi&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mo&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mn&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;ms&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mtext&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
+  &lt;/ul&gt;
+
+  &lt;p&gt;The &lt;span&gt;current node&lt;/span&gt; is an &lt;dfn&gt;HTML
+  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
+
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot;&lt;/li&gt;
+   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;&quot;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;desc&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;&lt;/li&gt;
+  &lt;/ul&gt;
+
+  &lt;hr&gt;
+
   &lt;p&gt;When the steps below require the UA to &lt;dfn&gt;insert a
   character&lt;/dfn&gt; into a node, if that node has a child immediately
   before where the character is to be inserted, and that child is a
@@ -91683,11 +91720,13 @@
 
 
 
-  &lt;h5&gt;The &quot;&lt;dfn title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h5 id=&quot;parsing-main-inhtml&quot;&gt;The rules for parsing tokens in HTML content&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: initial&quot;&gt;initial&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
 
+  &lt;h6&gt;The &quot;&lt;dfn title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: initial&quot;&gt;initial&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
+
   &lt;dl class=&quot;switch&quot;&gt;
 
    &lt;dt&gt;A character token that is one of U+0009 CHARACTER
@@ -91902,10 +91941,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5&gt;The &quot;&lt;dfn title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6&gt;The &quot;&lt;dfn title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: before html&quot;&gt;before html&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: before html&quot;&gt;before html&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -91996,10 +92034,9 @@
   as described in the next section.&lt;/p&gt;
 
 
-  &lt;h5&gt;The &quot;&lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6&gt;The &quot;&lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: before head&quot;&gt;before head&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: before head&quot;&gt;before head&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -92069,10 +92106,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-inhead&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-inhead&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in head&quot;&gt;in head&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in head&quot;&gt;in head&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -92254,10 +92290,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-inheadnoscript&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-inheadnoscript&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in head noscript&quot;&gt;in head noscript&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -92323,10 +92358,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5&gt;The &quot;&lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6&gt;The &quot;&lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: after head&quot;&gt;after head&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: after head&quot;&gt;after head&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -92425,10 +92459,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-inbody&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-inbody&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in body&quot;&gt;in body&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in body&quot;&gt;in body&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -93675,12 +93708,6 @@
     elements&lt;/span&gt; and &lt;span title=&quot;acknowledge self-closing
     flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is not already
-    &quot;&lt;span title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/span&gt;&quot;, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;span
-    title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/span&gt;&quot;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;A start tag whose tag name is &quot;svg&quot;&lt;/dt&gt;
@@ -93710,12 +93737,6 @@
     elements&lt;/span&gt; and &lt;span title=&quot;acknowledge self-closing
     flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is not already
-    &quot;&lt;span title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/span&gt;&quot;, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;span
-    title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/span&gt;&quot;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;A start &lt;!--or end--&gt; tag whose tag name is one of: &quot;caption&quot;,
@@ -93797,10 +93818,9 @@
 
 
 
-  &lt;h5 id=&quot;parsing-main-incdata&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: text&quot;&gt;text&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-incdata&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: text&quot;&gt;text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: text&quot;&gt;text&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: text&quot;&gt;text&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -93970,10 +93990,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-intable&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-intable&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in table&quot;&gt;in table&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in table&quot;&gt;in table&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94186,11 +94205,9 @@
 
 
 
-  &lt;h5 id=&quot;parsing-main-intabletext&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-intabletext&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in table text&quot;&gt;in table text&lt;/span&gt;&quot;, tokens must be handled
-  as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94234,10 +94251,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-incaption&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-incaption&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in caption&quot;&gt;in caption&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94300,10 +94316,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-incolgroup&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-incolgroup&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in column group&quot;&gt;in column group&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94393,10 +94408,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-intbody&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-intbody&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in table body&quot;&gt;in table body&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94489,10 +94503,9 @@
   case&lt;/span&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-intr&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-intr&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in row&quot;&gt;in row&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in row&quot;&gt;in row&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94587,10 +94600,9 @@
   case&lt;/span&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-intd&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-intd&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in cell&quot;&gt;in cell&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94695,10 +94707,9 @@
   cell&lt;/span&gt; algorithm is invoked.&lt;/p&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-inselect&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-inselect&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in select&quot;&gt;in select&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in select&quot;&gt;in select&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94855,10 +94866,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-inselectintable&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-inselectintable&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in select in table&quot;&gt;in select in table&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -94893,306 +94903,11 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-inforeign&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in foreign content&quot;&gt;in foreign content&lt;/span&gt;&quot;, tokens must be
-  handled as follows:&lt;/p&gt;
+  &lt;h6 id=&quot;parsing-main-afterbody&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;dl class=&quot;switch&quot;&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: after body&quot;&gt;after body&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
-   &lt;dt&gt;Any token, if the &lt;span&gt;current node&lt;/span&gt; is an element in the &lt;span&gt;HTML namespace&lt;/span&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;, if the &lt;span&gt;current node&lt;/span&gt; is a &lt;span&gt;MathML text integration point&lt;/span&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag whose tag name is &quot;svg&quot;, if the &lt;span&gt;current node&lt;/span&gt; is an &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/dt&gt;
-   &lt;dt&gt;A start tag, if the &lt;span&gt;current node&lt;/span&gt; is an &lt;span&gt;HTML integration point&lt;/span&gt;&lt;/dt&gt;
-   &lt;dt&gt;A character token, if the &lt;span&gt;current node&lt;/span&gt; is an &lt;span&gt;HTML integration point&lt;/span&gt;&lt;/dt&gt;
-   &lt;dt&gt;An end-of-file token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;&lt;p&gt;Process the token &lt;span&gt;using the rules for&lt;/span&gt; the
-     &quot;&lt;span title=&quot;insertion mode: in body&quot;&gt;in body&lt;/span&gt;&quot;
-     &lt;span&gt;insertion mode&lt;/span&gt;, except that if those rules say to
-     reprocess the token, these steps must be finished first (i.e. the
-     insertion mode is reset by the following step before the token is
-     reprocessed).&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If, after doing so, the &lt;span&gt;insertion mode&lt;/span&gt; is
-     still &quot;&lt;span title=&quot;insertion mode: in foreign content&quot;&gt;in
-     foreign content&lt;/span&gt;&quot;, &lt;span&gt;reset the insertion mode
-     appropriately&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;. &lt;span title=&quot;insert a
-    character&quot;&gt;Insert a U+FFFD REPLACEMENT CHARACTER character&lt;/span&gt;
-    into the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A character token that is one of U+0009 CHARACTER TABULATION,
-   U+000A LINE FEED (LF), U+000C FORM FEED (FF), U+000D CARRIAGE
-   RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;span title=&quot;insert a character&quot;&gt;Insert the token's
-    character&lt;/span&gt; into the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other character token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;span title=&quot;insert a character&quot;&gt;Insert the token's
-    character&lt;/span&gt; into the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;span&gt;frameset-ok flag&lt;/span&gt; to &quot;not ok&quot;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A comment token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;span&gt;current
-    node&lt;/span&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to
-    the data given in the comment token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;. Ignore the token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A start tag whose tag name is one of: &lt;!--&quot;a&quot;,--&gt; &quot;b&quot;, &quot;big&quot;,
-   &quot;blockquote&quot;, &quot;body&quot;&lt;!--by inspection--&gt;, &quot;br&quot;, &quot;center&quot;, &quot;code&quot;,
-   &quot;dd&quot;, &quot;div&quot;, &quot;dl&quot;, &quot;dt&quot;&lt;!-- so that dd and dt can be handled
-   uniformly throughout the parser --&gt;, &quot;em&quot;, &quot;embed&quot;, &quot;h1&quot;, &quot;h2&quot;,
-   &quot;h3&quot;, &quot;h4&quot;&lt;!--for completeness--&gt;, &quot;h5&quot;, &quot;h6&quot;&lt;!--for
-   completeness--&gt;, &quot;head&quot;&lt;!--by inspection--&gt;, &quot;hr&quot;, &quot;i&quot;, &quot;img&quot;,
-   &quot;li&quot;, &quot;listing&quot;&lt;!-- so that pre and listing can be handled
-   uniformly throughout the parser --&gt;, &quot;menu&quot;, &quot;meta&quot;, &quot;nobr&quot;,
-   &quot;ol&quot;&lt;!-- so that dl, ul, and ol can be handled uniformly throughout
-   the parser --&gt;, &quot;p&quot;, &quot;pre&quot;, &quot;ruby&quot;, &quot;s&quot;, &lt;!--&quot;script&quot;,--&gt; &quot;small&quot;,
-   &quot;span&quot;, &quot;strong&quot;, &quot;strike&quot;&lt;!-- so that s and strike can be handled
-   uniformly throughout the parser --&gt;, &lt;!--&quot;style&quot;,--&gt; &quot;sub&quot;, &quot;sup&quot;,
-   &quot;table&quot;&lt;!--by inspection--&gt;, &quot;tt&quot;, &quot;u&quot;, &quot;ul&quot;, &quot;var&quot;&lt;/dt&gt; &lt;!-- this
-   list was determined empirically by studying over 6,000,000,000
-   pages that were specifically not XML pages --&gt;
-   &lt;dt&gt;A start tag whose tag name is &quot;font&quot;, if the token has any
-   attributes named &quot;color&quot;, &quot;face&quot;, or &quot;size&quot;&lt;/dt&gt; &lt;!-- the
-   attributes here are required so that SVG &lt;font&gt; will go through as
-   SVG but legacy &lt;font&gt;s won't --&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Pop an element from the &lt;span&gt;stack of open elements&lt;/span&gt;,
-    and then keep popping more elements from the &lt;span&gt;stack of open
-    elements&lt;/span&gt; until the &lt;span&gt;current node&lt;/span&gt; is a
-    &lt;span&gt;MathML text integration point&lt;/span&gt;, an &lt;span&gt;HTML
-    integration point&lt;/span&gt;, or an element in the &lt;span&gt;HTML
-    namespace&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Then, &lt;span&gt;reset the insertion mode appropriately&lt;/span&gt; and
-    reprocess the token.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other start tag&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;If the &lt;span&gt;current node&lt;/span&gt; is an element in the
-    &lt;span&gt;MathML namespace&lt;/span&gt;, &lt;span&gt;adjust MathML
-    attributes&lt;/span&gt; for the token. (This fixes the case of MathML
-    attributes that are not all lowercase.)&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;span&gt;current node&lt;/span&gt; is an element in the &lt;span&gt;SVG
-    namespace&lt;/span&gt;, and the token's tag name is one of the ones in
-    the first column of the following table, change the tag name to
-    the name given in the corresponding cell in the second
-    column. (This fixes the case of SVG elements that are not all
-    lowercase.)&lt;/p&gt;
-
-    &lt;table&gt;
-     &lt;thead&gt;
-      &lt;tr&gt; &lt;th&gt; Tag name &lt;th&gt; Element name
-     &lt;tbody&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyph&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyph&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphdef&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphDef&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphitem&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphItem&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animatecolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateColor&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animatemotion&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateMotion&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animatetransform&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateTransform&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;clippath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;clipPath&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feblend&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feBlend&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fecolormatrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feColorMatrix&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomponenttransfer&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComponentTransfer&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomposite&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComposite&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feconvolvematrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feConvolveMatrix&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fediffuselighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDiffuseLighting&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fedisplacementmap&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDisplacementMap&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fedistantlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDistantLight&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feflood&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFlood&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fefunca&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncA&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncb&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncB&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncg&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncG&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncr&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncR&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fegaussianblur&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feGaussianBlur&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feimage&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feImage&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;femerge&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMerge&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;femergenode&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMergeNode&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;femorphology&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMorphology&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feoffset&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feOffset&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fepointlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fePointLight&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fespecularlighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpecularLighting&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fespotlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpotLight&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fetile&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTile&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feturbulence&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTurbulence&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignobject&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphref&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphRef&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;lineargradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;linearGradient&lt;/code&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;radialgradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;radialGradient&lt;/code&gt;
-      &lt;!--&lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidcolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidColor&lt;/code&gt; (SVG 1.2)--&gt;
-      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;textpath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;textPath&lt;/code&gt;
-    &lt;/table&gt;
-
-    &lt;p&gt;If the &lt;span&gt;current node&lt;/span&gt; is an element in the &lt;span&gt;SVG
-    namespace&lt;/span&gt;, &lt;span&gt;adjust SVG attributes&lt;/span&gt; for the
-    token. (This fixes the case of SVG attributes that are not all
-    lowercase.)&lt;/p&gt;
-
-    &lt;p&gt;&lt;span&gt;Adjust foreign attributes&lt;/span&gt; for the token. (This
-    fixes the use of namespaced attributes, in particular XLink in
-    SVG.)&lt;/p&gt;
-
-    &lt;p&gt;&lt;span&gt;Insert a foreign element&lt;/span&gt; for the token, in the
-    same namespace as the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;If the token has its &lt;i&gt;self-closing flag&lt;/i&gt; set, pop the
-    &lt;span&gt;current node&lt;/span&gt; off the &lt;span&gt;stack of open
-    elements&lt;/span&gt; and &lt;span title=&quot;acknowledge self-closing
-    flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt id=&quot;scriptForeignEndTag&quot;&gt;An end tag whose tag name is &quot;script&quot;, if the &lt;span&gt;current node&lt;/span&gt; is a &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;Pop the &lt;span&gt;current node&lt;/span&gt; off the &lt;span&gt;stack of open
-    elements&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt; have the
-    same value as the current &lt;span&gt;insertion point&lt;/span&gt;. Let
-    the &lt;span&gt;insertion point&lt;/span&gt; be just before the &lt;span&gt;next
-    input character&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Increment the parser's &lt;span&gt;script nesting level&lt;/span&gt; by
-    one. Set the &lt;span&gt;parser pause flag&lt;/span&gt; to true.&lt;/p&gt;
-
-    &lt;p&gt;&lt;a
-    href=&quot;<A HREF="http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing">http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing</A>&quot;&gt;Process
-    the &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element&lt;/a&gt; according to the SVG
-    rules, if the user agent supports SVG. &lt;a
-    href=&quot;#refsSVG&quot;&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;Even if this causes &lt;span
-    title=&quot;dom-document-write&quot;&gt;new characters to be inserted into the
-    tokenizer&lt;/span&gt;, the parser will not be executed reentrantly,
-    since the &lt;span&gt;parser pause flag&lt;/span&gt; is true.&lt;/p&gt;
-
-    &lt;p&gt;Decrement the parser's &lt;span&gt;script nesting level&lt;/span&gt; by
-    one. If the parser's &lt;span&gt;script nesting level&lt;/span&gt; is zero,
-    then set the &lt;span&gt;parser pause flag&lt;/span&gt; to false.&lt;/p&gt;
-
-    &lt;p&gt;Let the &lt;span&gt;insertion point&lt;/span&gt; have the value of the &lt;var
-    title=&quot;&quot;&gt;old insertion point&lt;/var&gt;. (In other words, restore the
-    &lt;span&gt;insertion point&lt;/span&gt; to its previous value. This value
-    might be the &quot;undefined&quot; value.)&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Any other end tag&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Run these steps:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;span&gt;current
-     node&lt;/span&gt; (the bottommost node of the stack).&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element with the
-     same tag name as the token, then this is a &lt;span&gt;parse
-     error&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;'s tag name,
-     &lt;span&gt;converted to ASCII lowercase&lt;/span&gt;, is the same as as the
-     tag name of the token, pop elements from the &lt;span&gt;stack of open
-     elements&lt;/span&gt; until &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has been popped
-     from the stack, and then jump to the last step of this list of
-     steps.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
-     &lt;span&gt;stack of open elements&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element in the
-     &lt;span&gt;HTML namespace&lt;/span&gt;, return to the step labeled
-     &lt;i&gt;loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Otherwise, process the token &lt;span&gt;using the rules
-     for&lt;/span&gt; the &quot;&lt;span title=&quot;insertion mode: in body&quot;&gt;in
-     body&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, except that if those
-     rules say to reprocess the token, these steps must be finished
-     first (i.e. the insertion mode is reset by the following step
-     before the token is reprocessed).&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;insertion mode&lt;/span&gt; is still &quot;&lt;span
-     title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-     content&lt;/span&gt;&quot;, &lt;span&gt;reset the insertion mode
-     appropriately&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;p&gt;The &lt;span&gt;current node&lt;/span&gt; is a &lt;dfn&gt;MathML text
-  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
-
-  &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mi&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mo&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mn&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;ms&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;mtext&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt;&lt;/li&gt;
-  &lt;/ul&gt;
-
-  &lt;p&gt;The &lt;span&gt;current node&lt;/span&gt; is an &lt;dfn&gt;HTML
-  integration point&lt;/dfn&gt; if it is one of the following elements:&lt;/p&gt;
-
-  &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot;&lt;/li&gt;
-   &lt;li&gt;An &lt;code title=&quot;&quot;&gt;annotation-xml&lt;/code&gt; element in the &lt;span&gt;MathML namespace&lt;/span&gt; whose start tag token had an attribute with the name &quot;encoding&quot; whose value was an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;&quot;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;desc&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;A &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;&lt;/li&gt;
-  &lt;/ul&gt;
-
-
-
-  &lt;h5 id=&quot;parsing-main-afterbody&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
-
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: after body&quot;&gt;after body&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
-
   &lt;dl class=&quot;switch&quot;&gt;
 
    &lt;dt&gt;A character token that is one of U+0009 CHARACTER
@@ -95254,10 +94969,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-inframeset&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-inframeset&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: in frameset&quot;&gt;in frameset&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -95355,10 +95069,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5 id=&quot;parsing-main-afterframeset&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6 id=&quot;parsing-main-afterframeset&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: after frameset&quot;&gt;after frameset&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;!-- due to rules in the &quot;in frameset&quot; mode, this can't be entered in the fragment case --&gt;
   &lt;dl class=&quot;switch&quot;&gt;
@@ -95417,10 +95130,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: after after body&quot;&gt;after after body&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -95457,10 +95169,9 @@
   &lt;/dl&gt;
 
 
-  &lt;h5&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h6&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
-  mode: after after frameset&quot;&gt;after after frameset&lt;/span&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
+  &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;span title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/span&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -95501,6 +95212,242 @@
 
   &lt;/dl&gt;
 
+
+
+  &lt;h5 id=&quot;parsing-main-inforeign&quot;&gt;The rules for parsing tokens &lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;When the user agent is to apply the rules for parsing tokens in foreign content, the user agent must handle the token as follows:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;A character token that is U+0000 NULL&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;. &lt;span title=&quot;insert a
+    character&quot;&gt;Insert a U+FFFD REPLACEMENT CHARACTER character&lt;/span&gt;
+    into the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A character token that is one of U+0009 CHARACTER TABULATION,
+   U+000A LINE FEED (LF), U+000C FORM FEED (FF), U+000D CARRIAGE
+   RETURN (CR), or U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;span title=&quot;insert a character&quot;&gt;Insert the token's
+    character&lt;/span&gt; into the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other character token&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;span title=&quot;insert a character&quot;&gt;Insert the token's
+    character&lt;/span&gt; into the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Set the &lt;span&gt;frameset-ok flag&lt;/span&gt; to &quot;not ok&quot;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A comment token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;span&gt;current
+    node&lt;/span&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to
+    the data given in the comment token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;. Ignore the token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A start tag whose tag name is one of: &lt;!--&quot;a&quot;,--&gt; &quot;b&quot;, &quot;big&quot;,
+   &quot;blockquote&quot;, &quot;body&quot;&lt;!--by inspection--&gt;, &quot;br&quot;, &quot;center&quot;, &quot;code&quot;,
+   &quot;dd&quot;, &quot;div&quot;, &quot;dl&quot;, &quot;dt&quot;&lt;!-- so that dd and dt can be handled
+   uniformly throughout the parser --&gt;, &quot;em&quot;, &quot;embed&quot;, &quot;h1&quot;, &quot;h2&quot;,
+   &quot;h3&quot;, &quot;h4&quot;&lt;!--for completeness--&gt;, &quot;h5&quot;, &quot;h6&quot;&lt;!--for
+   completeness--&gt;, &quot;head&quot;&lt;!--by inspection--&gt;, &quot;hr&quot;, &quot;i&quot;, &quot;img&quot;,
+   &quot;li&quot;, &quot;listing&quot;&lt;!-- so that pre and listing can be handled
+   uniformly throughout the parser --&gt;, &quot;menu&quot;, &quot;meta&quot;, &quot;nobr&quot;,
+   &quot;ol&quot;&lt;!-- so that dl, ul, and ol can be handled uniformly throughout
+   the parser --&gt;, &quot;p&quot;, &quot;pre&quot;, &quot;ruby&quot;, &quot;s&quot;, &lt;!--&quot;script&quot;,--&gt; &quot;small&quot;,
+   &quot;span&quot;, &quot;strong&quot;, &quot;strike&quot;&lt;!-- so that s and strike can be handled
+   uniformly throughout the parser --&gt;, &lt;!--&quot;style&quot;,--&gt; &quot;sub&quot;, &quot;sup&quot;,
+   &quot;table&quot;&lt;!--by inspection--&gt;, &quot;tt&quot;, &quot;u&quot;, &quot;ul&quot;, &quot;var&quot;&lt;/dt&gt; &lt;!-- this
+   list was determined empirically by studying over 6,000,000,000
+   pages that were specifically not XML pages --&gt;
+   &lt;dt&gt;A start tag whose tag name is &quot;font&quot;, if the token has any
+   attributes named &quot;color&quot;, &quot;face&quot;, or &quot;size&quot;&lt;/dt&gt; &lt;!-- the
+   attributes here are required so that SVG &lt;font&gt; will go through as
+   SVG but legacy &lt;font&gt;s won't --&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Pop an element from the &lt;span&gt;stack of open elements&lt;/span&gt;,
+    and then keep popping more elements from the &lt;span&gt;stack of open
+    elements&lt;/span&gt; until the &lt;span&gt;current node&lt;/span&gt; is a
+    &lt;span&gt;MathML text integration point&lt;/span&gt;, an &lt;span&gt;HTML
+    integration point&lt;/span&gt;, or an element in the &lt;span&gt;HTML
+    namespace&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Then, reprocess the token.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other start tag&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;If the &lt;span&gt;current node&lt;/span&gt; is an element in the
+    &lt;span&gt;MathML namespace&lt;/span&gt;, &lt;span&gt;adjust MathML
+    attributes&lt;/span&gt; for the token. (This fixes the case of MathML
+    attributes that are not all lowercase.)&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;span&gt;current node&lt;/span&gt; is an element in the &lt;span&gt;SVG
+    namespace&lt;/span&gt;, and the token's tag name is one of the ones in
+    the first column of the following table, change the tag name to
+    the name given in the corresponding cell in the second
+    column. (This fixes the case of SVG elements that are not all
+    lowercase.)&lt;/p&gt;
+
+    &lt;table&gt;
+     &lt;thead&gt;
+      &lt;tr&gt; &lt;th&gt; Tag name &lt;th&gt; Element name
+     &lt;tbody&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyph&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyph&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphdef&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphDef&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altglyphitem&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;altGlyphItem&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animatecolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateColor&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animatemotion&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateMotion&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animatetransform&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;animateTransform&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;clippath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;clipPath&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feblend&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feBlend&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fecolormatrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feColorMatrix&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomponenttransfer&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComponentTransfer&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fecomposite&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feComposite&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feconvolvematrix&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feConvolveMatrix&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fediffuselighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDiffuseLighting&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fedisplacementmap&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDisplacementMap&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fedistantlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feDistantLight&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feflood&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFlood&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fefunca&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncA&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncb&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncB&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncg&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncG&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fefuncr&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feFuncR&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fegaussianblur&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feGaussianBlur&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feimage&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feImage&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;femerge&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMerge&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;femergenode&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMergeNode&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;femorphology&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feMorphology&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feoffset&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feOffset&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fepointlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fePointLight&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fespecularlighting&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpecularLighting&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fespotlight&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feSpotLight&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;fetile&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTile&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feturbulence&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;feTurbulence&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignobject&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;foreignObject&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphref&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;glyphRef&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;lineargradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;linearGradient&lt;/code&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;radialgradient&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;radialGradient&lt;/code&gt;
+      &lt;!--&lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidcolor&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;solidColor&lt;/code&gt; (SVG 1.2)--&gt;
+      &lt;tr&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;textpath&lt;/code&gt; &lt;td&gt; &lt;code title=&quot;&quot;&gt;textPath&lt;/code&gt;
+    &lt;/table&gt;
+
+    &lt;p&gt;If the &lt;span&gt;current node&lt;/span&gt; is an element in the &lt;span&gt;SVG
+    namespace&lt;/span&gt;, &lt;span&gt;adjust SVG attributes&lt;/span&gt; for the
+    token. (This fixes the case of SVG attributes that are not all
+    lowercase.)&lt;/p&gt;
+
+    &lt;p&gt;&lt;span&gt;Adjust foreign attributes&lt;/span&gt; for the token. (This
+    fixes the use of namespaced attributes, in particular XLink in
+    SVG.)&lt;/p&gt;
+
+    &lt;p&gt;&lt;span&gt;Insert a foreign element&lt;/span&gt; for the token, in the
+    same namespace as the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;If the token has its &lt;i&gt;self-closing flag&lt;/i&gt; set, pop the
+    &lt;span&gt;current node&lt;/span&gt; off the &lt;span&gt;stack of open
+    elements&lt;/span&gt; and &lt;span title=&quot;acknowledge self-closing
+    flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt id=&quot;scriptForeignEndTag&quot;&gt;An end tag whose tag name is &quot;script&quot;, if the &lt;span&gt;current node&lt;/span&gt; is a &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Pop the &lt;span&gt;current node&lt;/span&gt; off the &lt;span&gt;stack of open
+    elements&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;old insertion point&lt;/var&gt; have the
+    same value as the current &lt;span&gt;insertion point&lt;/span&gt;. Let
+    the &lt;span&gt;insertion point&lt;/span&gt; be just before the &lt;span&gt;next
+    input character&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Increment the parser's &lt;span&gt;script nesting level&lt;/span&gt; by
+    one. Set the &lt;span&gt;parser pause flag&lt;/span&gt; to true.&lt;/p&gt;
+
+    &lt;p&gt;&lt;a
+    href=&quot;<A HREF="http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing">http://www.w3.org/TR/SVGMobile12/script.html#ScriptContentProcessing</A>&quot;&gt;Process
+    the &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; element&lt;/a&gt; according to the SVG
+    rules, if the user agent supports SVG. &lt;a
+    href=&quot;#refsSVG&quot;&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;Even if this causes &lt;span
+    title=&quot;dom-document-write&quot;&gt;new characters to be inserted into the
+    tokenizer&lt;/span&gt;, the parser will not be executed reentrantly,
+    since the &lt;span&gt;parser pause flag&lt;/span&gt; is true.&lt;/p&gt;
+
+    &lt;p&gt;Decrement the parser's &lt;span&gt;script nesting level&lt;/span&gt; by
+    one. If the parser's &lt;span&gt;script nesting level&lt;/span&gt; is zero,
+    then set the &lt;span&gt;parser pause flag&lt;/span&gt; to false.&lt;/p&gt;
+
+    &lt;p&gt;Let the &lt;span&gt;insertion point&lt;/span&gt; have the value of the &lt;var
+    title=&quot;&quot;&gt;old insertion point&lt;/var&gt;. (In other words, restore the
+    &lt;span&gt;insertion point&lt;/span&gt; to its previous value. This value
+    might be the &quot;undefined&quot; value.)&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Any other end tag&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Run these steps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;span&gt;current
+     node&lt;/span&gt; (the bottommost node of the stack).&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element with the
+     same tag name as the token, then this is a &lt;span&gt;parse
+     error&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;'s tag name,
+     &lt;span&gt;converted to ASCII lowercase&lt;/span&gt;, is the same as as the
+     tag name of the token, pop elements from the &lt;span&gt;stack of open
+     elements&lt;/span&gt; until &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has been popped
+     from the stack, and then jump to the last step of this list of
+     steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
+     &lt;span&gt;stack of open elements&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not an element in the
+     &lt;span&gt;HTML namespace&lt;/span&gt;, return to the step labeled
+     &lt;i&gt;loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Otherwise, process the token according to the rules given
+     in the section corresponding to the current &lt;span&gt;insertion
+     mode&lt;/span&gt; in HTML content.&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
   &lt;/div&gt;
 
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012786.html">[html5] r5919 - [e] (0) Not sure how I managed to miss this	acknowledgement for so long.
</A></li>
	<LI>Next message: <A HREF="012788.html">[html5] r5921 - [giow] (0) revert r5836 per	http://lists.w3.org/Archives/Public/public-html/2011 [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12787">[ date ]</a>
              <a href="thread.html#12787">[ thread ]</a>
              <a href="subject.html#12787">[ subject ]</a>
              <a href="author.html#12787">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
