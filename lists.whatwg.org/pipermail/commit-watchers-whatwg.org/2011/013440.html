<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r6573 - [giow] (0) Define how sandboxing works with plugins	in a hypothetical world wher [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6573%20-%20%5Bgiow%5D%20%280%29%20Define%20how%20sandboxing%20works%20with%20plugins%0A%09in%20a%20hypothetical%20world%20wher%20%5B...%5D&In-Reply-To=%3C20110923194044.7C6861C84004%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013439.html">
   <LINK REL="Next"  HREF="013441.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r6573 - [giow] (0) Define how sandboxing works with plugins	in a hypothetical world wher [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6573%20-%20%5Bgiow%5D%20%280%29%20Define%20how%20sandboxing%20works%20with%20plugins%0A%09in%20a%20hypothetical%20world%20wher%20%5B...%5D&In-Reply-To=%3C20110923194044.7C6861C84004%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r6573 - [giow] (0) Define how sandboxing works with plugins	in a hypothetical world wher [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Sep 23 12:40:44 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013439.html">[html5] r6572 - [giow] (2) Explicitly mention when to render	drag-cancel feedback. Fixing http:/ [...]
</A></li>
        <LI>Next message: <A HREF="013441.html">[html5] r6574 - [ac] (1) tweak authoring conformance requirements	to prevent some meaningless co [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13440">[ date ]</a>
              <a href="thread.html#13440">[ thread ]</a>
              <a href="subject.html#13440">[ subject ]</a>
              <a href="author.html#13440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2011-09-23 12:40:42 -0700 (Fri, 23 Sep 2011)
New Revision: 6573

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Define how sandboxing works with plugins in a hypothetical world where plugins honour the sandbox.
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=13267">http://www.w3.org/Bugs/Public/show_bug.cgi?id=13267</A>

Modified: complete.html
===================================================================
--- complete.html	2011-09-23 19:11:54 UTC (rev 6572)
+++ complete.html	2011-09-23 19:40:42 UTC (rev 6573)
@@ -3299,6 +3299,13 @@
   specification doesn't require user agents to support plugins at all.
   &lt;a href=#refsNPAPI&gt;[NPAPI]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;A plugin can be &lt;dfn id=concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/dfn&gt;
+  if it honors the semantics of the &lt;code title=attr-iframe-sandbox&gt;&lt;a href=#attr-iframe-sandbox&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p class=example&gt;For example, a secured plugin would prevent its
+  contents from creating pop-up windows when the plugin is
+  instantiated inside a sandboxed &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
   &lt;p class=warning&gt;Browsers should take extreme care when
@@ -23831,7 +23838,7 @@
   When the attribute is set, the content is treated as being from a
   unique &lt;a href=#origin&gt;origin&lt;/a&gt;, forms and scripts are disabled, links
   are prevented from targeting other &lt;a href=#browsing-context title=&quot;browsing
-  context&quot;&gt;browsing contexts&lt;/a&gt;, and plugins are disabled. The
+  context&quot;&gt;browsing contexts&lt;/a&gt;, and plugins are secured. The
   &lt;code title=attr-iframe-sandbox-allow-same-origin&gt;&lt;a href=#attr-iframe-sandbox-allow-same-origin&gt;allow-same-origin&lt;/a&gt;&lt;/code&gt;
   keyword allows the content to be treated as being from the same
   origin instead of forcing it into a unique origin, the &lt;code title=attr-iframe-sandbox-allow-top-navigation&gt;&lt;a href=#attr-iframe-sandbox-allow-top-navigation&gt;allow-top-navigation&lt;/a&gt;&lt;/code&gt;
@@ -23917,7 +23924,7 @@
     &lt;p&gt;This flag prevents content from instantiating &lt;a href=#plugin title=plugin&gt;plugins&lt;/a&gt;, whether using &lt;a href=#sandboxPluginEmbed&gt;the &lt;code&gt;embed&lt;/code&gt; element&lt;/a&gt;, &lt;a href=#sandboxPluginObject&gt;the &lt;code&gt;object&lt;/code&gt; element&lt;/a&gt;,
     &lt;a href=#sandboxPluginApplet&gt;the &lt;code&gt;applet&lt;/code&gt;
     element&lt;/a&gt;, or through &lt;a href=#sandboxPluginNavigate&gt;navigation&lt;/a&gt; of a &lt;a href=#nested-browsing-context&gt;nested
-    browsing context&lt;/a&gt;.&lt;/p&gt;
+    browsing context&lt;/a&gt;, unless those &lt;a href=#plugin title=plugin&gt;plugins&lt;/a&gt; can be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -24404,33 +24411,6 @@
   content&lt;/a&gt;, any plugins instantiated for the element must be
   removed, and the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element represents nothing.&lt;/p&gt;
 
-  &lt;p id=sandboxPluginEmbed&gt;If either:
-
-  &lt;ul&gt;&lt;li&gt;the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed plugins browsing context flag&lt;/a&gt; was
-   set on the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; for which the
-   &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is the
-   &lt;a href=#active-document&gt;active document&lt;/a&gt; when that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was
-   created, or&lt;/li&gt;
-
-   &lt;li&gt;the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was
-   parsed from a resource whose &lt;a href=#content-type-sniffing-0 title=&quot;Content-Type
-   sniffing&quot;&gt;sniffed type&lt;/a&gt; as determined during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; is
-   &lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-
-  &lt;/ul&gt;&lt;p&gt;...then the user agent must render the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element
-  in a manner that conveys that the &lt;a href=#plugin&gt;plugin&lt;/a&gt; was
-  disabled. The user agent may offer the user the option to override
-  the sandbox and instantiate the &lt;a href=#plugin&gt;plugin&lt;/a&gt; anyway; if the
-  user invokes such an option, the user agent must act as if the
-  conditions above did not apply for the purposes of this element.&lt;/p&gt;
-
-  &lt;p class=warning&gt;Plugins are disabled in sandboxed browsing
-  contexts because they might not honor the restrictions imposed by
-  the sandbox (e.g. they might allow scripting even when scripting in
-  the sandbox is disabled). User agents should convey the danger of
-  overriding the sandbox to the user if an option to do so is
-  provided.&lt;/p&gt;
-
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element is said to be &lt;dfn id=concept-embed-active title=concept-embed-active&gt;potentially active&lt;/dfn&gt; when the
   following conditions are all met simultaneously:&lt;/p&gt;
 
@@ -24438,7 +24418,6 @@
    &lt;li&gt;The element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is &lt;a href=#fully-active&gt;fully active&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;The element has either a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set or a &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute set (or both).&lt;/li&gt;
    &lt;li&gt;The element's &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is either absent or its value is the empty string.&lt;/li&gt;
-   &lt;li&gt;The element is not in a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; had the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed plugins browsing context flag&lt;/a&gt; set when the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was created (unless this has been overridden as described above).&lt;/li&gt;
    &lt;li&gt;The element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was not parsed from a resource whose &lt;a href=#content-type-sniffing-0 title=&quot;Content-Type sniffing&quot;&gt;sniffed type&lt;/a&gt; as determined during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; is &lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt; (unless this has been overridden as described above).&lt;/li&gt;
    &lt;li&gt;The element is not a descendant of a &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;The element is not a descendant of an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that is not showing its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;.&lt;/li&gt;
@@ -24494,6 +24473,35 @@
   &lt;a href=#plugin&gt;plugin&lt;/a&gt; that had been instantiated for that element must
   be unloaded.&lt;/p&gt;
 
+  &lt;p id=sandboxPluginEmbed&gt;When a &lt;a href=#plugin&gt;plugin&lt;/a&gt; is to be
+  instantiated but it cannot be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt; and either:
+
+  &lt;ul&gt;&lt;li&gt;the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed plugins browsing context flag&lt;/a&gt; was
+   set on the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; for which the
+   &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is the
+   &lt;a href=#active-document&gt;active document&lt;/a&gt; when that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was
+   created, or&lt;/li&gt;
+
+   &lt;li&gt;the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was
+   parsed from a resource whose &lt;a href=#content-type-sniffing-0 title=&quot;Content-Type
+   sniffing&quot;&gt;sniffed type&lt;/a&gt; as determined during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; is
+   &lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p&gt;...then the user agent must not instantiate the
+  &lt;a href=#plugin&gt;plugin&lt;/a&gt;, and must instead render the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;
+  element in a manner that conveys that the &lt;a href=#plugin&gt;plugin&lt;/a&gt; was
+  disabled. The user agent may offer the user the option to override
+  the sandbox and instantiate the &lt;a href=#plugin&gt;plugin&lt;/a&gt; anyway; if the
+  user invokes such an option, the user agent must act as if the
+  conditions above did not apply for the purposes of this element.&lt;/p&gt;
+
+  &lt;p class=warning&gt;Plugins that cannot be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt; are disabled in
+  sandboxed browsing contexts because they might not honor the
+  restrictions imposed by the sandbox (e.g. they might allow scripting
+  even when scripting in the sandbox is disabled). User agents should
+  convey the danger of overriding the sandbox to the user if an option
+  to do so is provided.&lt;/p&gt;
+
   &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element is unaffected by the
   CSS 'display' property. The selected plugin is instantiated even if
   the element is hidden with a 'display:none' CSS style.&lt;/p&gt;
@@ -24768,13 +24776,15 @@
     &lt;p&gt;If the &lt;code title=attr-object-classid&gt;&lt;a href=#attr-object-classid&gt;classid&lt;/a&gt;&lt;/code&gt;
     attribute is present, and has a value that isn't the empty string,
     then: if the user agent can find a &lt;a href=#plugin&gt;plugin&lt;/a&gt; suitable
-    according to the value of the &lt;code title=attr-object-classid&gt;&lt;a href=#attr-object-classid&gt;classid&lt;/a&gt;&lt;/code&gt; attribute, and &lt;a href=#sandboxPluginObject&gt;plugins aren't being sandboxed&lt;/a&gt;,
-    then that &lt;a href=#plugin&gt;plugin&lt;/a&gt; &lt;a href=#object-plugin&gt;should be
-    used&lt;/a&gt;, and the value of the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute, if any, should be
-    passed to the &lt;a href=#plugin&gt;plugin&lt;/a&gt;. If no suitable
-    &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be found, or if the &lt;a href=#plugin&gt;plugin&lt;/a&gt;
-    reports an error, jump to the last step in the overall set of
-    steps (fallback).&lt;/p&gt;
+    according to the value of the &lt;code title=attr-object-classid&gt;&lt;a href=#attr-object-classid&gt;classid&lt;/a&gt;&lt;/code&gt; attribute, and either
+    &lt;a href=#sandboxPluginObject&gt;plugins aren't being sandboxed&lt;/a&gt;
+    or that &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;, then that
+    &lt;a href=#plugin&gt;plugin&lt;/a&gt; &lt;a href=#object-plugin&gt;should be used&lt;/a&gt;,
+    and the value of the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt;
+    attribute, if any, should be passed to the &lt;a href=#plugin&gt;plugin&lt;/a&gt;. If
+    no suitable &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be found, or if the
+    &lt;a href=#plugin&gt;plugin&lt;/a&gt; reports an error, jump to the last step in the
+    overall set of steps (fallback).&lt;/p&gt;
 
     &lt;!--
      case insensitive:
@@ -25118,8 +25128,8 @@
        &lt;dd&gt;
 
         &lt;p&gt;If &lt;a href=#sandboxPluginObject&gt;plugins are being
-        sandboxed&lt;/a&gt;, jump to the last step in the overall set of
-        steps (fallback).&lt;/p&gt;
+        sandboxed&lt;/a&gt; and the plugin that supports &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; cannot be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;, jump to the last
+        step in the overall set of steps (fallback).&lt;/p&gt;
 
         &lt;p&gt;Otherwise, the user agent should &lt;a href=#object-plugin&gt;use the plugin that supports &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt;&lt;/a&gt; and pass the content of the
         resource to that &lt;a href=#plugin&gt;plugin&lt;/a&gt;. If the
@@ -25239,13 +25249,12 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute
    is absent but the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt;
-   attribute is present, &lt;a href=#sandboxPluginObject&gt;plugins aren't
-   being sandboxed&lt;/a&gt;, and the user agent can find a
-   &lt;a href=#plugin&gt;plugin&lt;/a&gt; suitable according to the value of the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, then that
+   attribute is present, and the user agent can find a
+   &lt;a href=#plugin&gt;plugin&lt;/a&gt; suitable according to the value of the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, and either &lt;a href=#sandboxPluginObject&gt;plugins aren't being sandboxed&lt;/a&gt; or
+   the &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;, then that
    &lt;a href=#plugin&gt;plugin&lt;/a&gt; &lt;a href=#object-plugin&gt;should be used&lt;/a&gt;. If
-   no suitable &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be found, or if the
-   &lt;a href=#plugin&gt;plugin&lt;/a&gt; reports an error, jump to the next step
-   (fallback).&lt;/li&gt;
+   these conditions cannot be met, or if the &lt;a href=#plugin&gt;plugin&lt;/a&gt;
+   reports an error, jump to the next step (fallback).&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;(Fallback.) The &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element
    &lt;a href=#represents&gt;represents&lt;/a&gt; the element's children, ignoring any
@@ -25269,7 +25278,8 @@
   &lt;a href=#plugin&gt;plugin&lt;/a&gt; is not a nested &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p id=sandboxPluginObject&gt;If either:&lt;/p&gt;
+  &lt;p id=sandboxPluginObject&gt;Plugins are considered sandboxed for the
+  purpose of an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element if either:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed plugins browsing context flag&lt;/a&gt; was
    set on the &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
@@ -25281,11 +25291,7 @@
    sniffing&quot;&gt;sniffed type&lt;/a&gt; as determined during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; is
    &lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
 
-  &lt;/ul&gt;&lt;p&gt;...then the steps above must always act as if they had failed to
-  find a &lt;a href=#plugin&gt;plugin&lt;/a&gt;, even if one would otherwise have been
-  used.&lt;/p&gt;
-
-  &lt;p class=note&gt;The above algorithm is independent of CSS properties
+  &lt;/ul&gt;&lt;p class=note&gt;The above algorithm is independent of CSS properties
   (including 'display', 'overflow', and 'visibility'). For example, it
   runs even if the element is hidden with a 'display:none' CSS style,
   and does not run &lt;em&gt;again&lt;/em&gt; if the element's visibility
@@ -64849,7 +64855,8 @@
   &lt;p class=note id=sandboxPluginNavigate&gt;If the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed
   plugins browsing context flag&lt;/a&gt; was set on the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; when the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was created, the
-  synthesized &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element will &lt;a href=#sandboxPluginEmbed&gt;fail to render the content&lt;/a&gt;.&lt;/p&gt;
+  synthesized &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element will &lt;a href=#sandboxPluginEmbed&gt;fail to render the content&lt;/a&gt; if the
+  relevant &lt;a href=#plugin&gt;plugin&lt;/a&gt; cannot be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;.&lt;/p&gt;
 
 
   &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;6.5.7 &lt;/span&gt;&lt;dfn title=navigate-ua-inline&gt;Page load processing model for inline content that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
@@ -95609,6 +95616,10 @@
   but it is disabled, the element &lt;a href=#represents&gt;represents&lt;/a&gt; its
   contents.&lt;/p&gt;
 
+  &lt;!-- we assume here that the Java plugin can't be &lt;span
+  title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt;; if anyone does end up
+  securing one we can always change this --&gt;
+
   &lt;p&gt;Otherwise, the user agent should instantiate a Java Language
   runtime &lt;a href=#plugin&gt;plugin&lt;/a&gt;, and should pass the names and values of
   all the attributes on the element, in the order they were added to

Modified: index
===================================================================
--- index	2011-09-23 19:11:54 UTC (rev 6572)
+++ index	2011-09-23 19:40:42 UTC (rev 6573)
@@ -3196,6 +3196,13 @@
   specification doesn't require user agents to support plugins at all.
   &lt;a href=#refsNPAPI&gt;[NPAPI]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;A plugin can be &lt;dfn id=concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/dfn&gt;
+  if it honors the semantics of the &lt;code title=attr-iframe-sandbox&gt;&lt;a href=#attr-iframe-sandbox&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p class=example&gt;For example, a secured plugin would prevent its
+  contents from creating pop-up windows when the plugin is
+  instantiated inside a sandboxed &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
   &lt;p class=warning&gt;Browsers should take extreme care when
@@ -23695,7 +23702,7 @@
   When the attribute is set, the content is treated as being from a
   unique &lt;a href=#origin&gt;origin&lt;/a&gt;, forms and scripts are disabled, links
   are prevented from targeting other &lt;a href=#browsing-context title=&quot;browsing
-  context&quot;&gt;browsing contexts&lt;/a&gt;, and plugins are disabled. The
+  context&quot;&gt;browsing contexts&lt;/a&gt;, and plugins are secured. The
   &lt;code title=attr-iframe-sandbox-allow-same-origin&gt;&lt;a href=#attr-iframe-sandbox-allow-same-origin&gt;allow-same-origin&lt;/a&gt;&lt;/code&gt;
   keyword allows the content to be treated as being from the same
   origin instead of forcing it into a unique origin, the &lt;code title=attr-iframe-sandbox-allow-top-navigation&gt;&lt;a href=#attr-iframe-sandbox-allow-top-navigation&gt;allow-top-navigation&lt;/a&gt;&lt;/code&gt;
@@ -23781,7 +23788,7 @@
     &lt;p&gt;This flag prevents content from instantiating &lt;a href=#plugin title=plugin&gt;plugins&lt;/a&gt;, whether using &lt;a href=#sandboxPluginEmbed&gt;the &lt;code&gt;embed&lt;/code&gt; element&lt;/a&gt;, &lt;a href=#sandboxPluginObject&gt;the &lt;code&gt;object&lt;/code&gt; element&lt;/a&gt;,
     &lt;a href=#sandboxPluginApplet&gt;the &lt;code&gt;applet&lt;/code&gt;
     element&lt;/a&gt;, or through &lt;a href=#sandboxPluginNavigate&gt;navigation&lt;/a&gt; of a &lt;a href=#nested-browsing-context&gt;nested
-    browsing context&lt;/a&gt;.&lt;/p&gt;
+    browsing context&lt;/a&gt;, unless those &lt;a href=#plugin title=plugin&gt;plugins&lt;/a&gt; can be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -24271,33 +24278,6 @@
   content&lt;/a&gt;, any plugins instantiated for the element must be
   removed, and the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element represents nothing.&lt;/p&gt;
 
-  &lt;p id=sandboxPluginEmbed&gt;If either:
-
-  &lt;ul&gt;&lt;li&gt;the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed plugins browsing context flag&lt;/a&gt; was
-   set on the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; for which the
-   &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is the
-   &lt;a href=#active-document&gt;active document&lt;/a&gt; when that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was
-   created, or&lt;/li&gt;
-
-   &lt;li&gt;the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was
-   parsed from a resource whose &lt;a href=#content-type-sniffing-0 title=&quot;Content-Type
-   sniffing&quot;&gt;sniffed type&lt;/a&gt; as determined during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; is
-   &lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-
-  &lt;/ul&gt;&lt;p&gt;...then the user agent must render the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element
-  in a manner that conveys that the &lt;a href=#plugin&gt;plugin&lt;/a&gt; was
-  disabled. The user agent may offer the user the option to override
-  the sandbox and instantiate the &lt;a href=#plugin&gt;plugin&lt;/a&gt; anyway; if the
-  user invokes such an option, the user agent must act as if the
-  conditions above did not apply for the purposes of this element.&lt;/p&gt;
-
-  &lt;p class=warning&gt;Plugins are disabled in sandboxed browsing
-  contexts because they might not honor the restrictions imposed by
-  the sandbox (e.g. they might allow scripting even when scripting in
-  the sandbox is disabled). User agents should convey the danger of
-  overriding the sandbox to the user if an option to do so is
-  provided.&lt;/p&gt;
-
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element is said to be &lt;dfn id=concept-embed-active title=concept-embed-active&gt;potentially active&lt;/dfn&gt; when the
   following conditions are all met simultaneously:&lt;/p&gt;
 
@@ -24305,7 +24285,6 @@
    &lt;li&gt;The element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is &lt;a href=#fully-active&gt;fully active&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;The element has either a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set or a &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute set (or both).&lt;/li&gt;
    &lt;li&gt;The element's &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is either absent or its value is the empty string.&lt;/li&gt;
-   &lt;li&gt;The element is not in a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; had the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed plugins browsing context flag&lt;/a&gt; set when the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was created (unless this has been overridden as described above).&lt;/li&gt;
    &lt;li&gt;The element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was not parsed from a resource whose &lt;a href=#content-type-sniffing-0 title=&quot;Content-Type sniffing&quot;&gt;sniffed type&lt;/a&gt; as determined during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; is &lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt; (unless this has been overridden as described above).&lt;/li&gt;
    &lt;li&gt;The element is not a descendant of a &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;The element is not a descendant of an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that is not showing its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;.&lt;/li&gt;
@@ -24361,6 +24340,35 @@
   &lt;a href=#plugin&gt;plugin&lt;/a&gt; that had been instantiated for that element must
   be unloaded.&lt;/p&gt;
 
+  &lt;p id=sandboxPluginEmbed&gt;When a &lt;a href=#plugin&gt;plugin&lt;/a&gt; is to be
+  instantiated but it cannot be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt; and either:
+
+  &lt;ul&gt;&lt;li&gt;the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed plugins browsing context flag&lt;/a&gt; was
+   set on the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; for which the
+   &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is the
+   &lt;a href=#active-document&gt;active document&lt;/a&gt; when that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was
+   created, or&lt;/li&gt;
+
+   &lt;li&gt;the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was
+   parsed from a resource whose &lt;a href=#content-type-sniffing-0 title=&quot;Content-Type
+   sniffing&quot;&gt;sniffed type&lt;/a&gt; as determined during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; is
+   &lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p&gt;...then the user agent must not instantiate the
+  &lt;a href=#plugin&gt;plugin&lt;/a&gt;, and must instead render the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;
+  element in a manner that conveys that the &lt;a href=#plugin&gt;plugin&lt;/a&gt; was
+  disabled. The user agent may offer the user the option to override
+  the sandbox and instantiate the &lt;a href=#plugin&gt;plugin&lt;/a&gt; anyway; if the
+  user invokes such an option, the user agent must act as if the
+  conditions above did not apply for the purposes of this element.&lt;/p&gt;
+
+  &lt;p class=warning&gt;Plugins that cannot be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt; are disabled in
+  sandboxed browsing contexts because they might not honor the
+  restrictions imposed by the sandbox (e.g. they might allow scripting
+  even when scripting in the sandbox is disabled). User agents should
+  convey the danger of overriding the sandbox to the user if an option
+  to do so is provided.&lt;/p&gt;
+
   &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element is unaffected by the
   CSS 'display' property. The selected plugin is instantiated even if
   the element is hidden with a 'display:none' CSS style.&lt;/p&gt;
@@ -24635,13 +24643,15 @@
     &lt;p&gt;If the &lt;code title=attr-object-classid&gt;&lt;a href=#attr-object-classid&gt;classid&lt;/a&gt;&lt;/code&gt;
     attribute is present, and has a value that isn't the empty string,
     then: if the user agent can find a &lt;a href=#plugin&gt;plugin&lt;/a&gt; suitable
-    according to the value of the &lt;code title=attr-object-classid&gt;&lt;a href=#attr-object-classid&gt;classid&lt;/a&gt;&lt;/code&gt; attribute, and &lt;a href=#sandboxPluginObject&gt;plugins aren't being sandboxed&lt;/a&gt;,
-    then that &lt;a href=#plugin&gt;plugin&lt;/a&gt; &lt;a href=#object-plugin&gt;should be
-    used&lt;/a&gt;, and the value of the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute, if any, should be
-    passed to the &lt;a href=#plugin&gt;plugin&lt;/a&gt;. If no suitable
-    &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be found, or if the &lt;a href=#plugin&gt;plugin&lt;/a&gt;
-    reports an error, jump to the last step in the overall set of
-    steps (fallback).&lt;/p&gt;
+    according to the value of the &lt;code title=attr-object-classid&gt;&lt;a href=#attr-object-classid&gt;classid&lt;/a&gt;&lt;/code&gt; attribute, and either
+    &lt;a href=#sandboxPluginObject&gt;plugins aren't being sandboxed&lt;/a&gt;
+    or that &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;, then that
+    &lt;a href=#plugin&gt;plugin&lt;/a&gt; &lt;a href=#object-plugin&gt;should be used&lt;/a&gt;,
+    and the value of the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt;
+    attribute, if any, should be passed to the &lt;a href=#plugin&gt;plugin&lt;/a&gt;. If
+    no suitable &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be found, or if the
+    &lt;a href=#plugin&gt;plugin&lt;/a&gt; reports an error, jump to the last step in the
+    overall set of steps (fallback).&lt;/p&gt;
 
     &lt;!--
      case insensitive:
@@ -24985,8 +24995,8 @@
        &lt;dd&gt;
 
         &lt;p&gt;If &lt;a href=#sandboxPluginObject&gt;plugins are being
-        sandboxed&lt;/a&gt;, jump to the last step in the overall set of
-        steps (fallback).&lt;/p&gt;
+        sandboxed&lt;/a&gt; and the plugin that supports &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; cannot be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;, jump to the last
+        step in the overall set of steps (fallback).&lt;/p&gt;
 
         &lt;p&gt;Otherwise, the user agent should &lt;a href=#object-plugin&gt;use the plugin that supports &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt;&lt;/a&gt; and pass the content of the
         resource to that &lt;a href=#plugin&gt;plugin&lt;/a&gt;. If the
@@ -25106,13 +25116,12 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute
    is absent but the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt;
-   attribute is present, &lt;a href=#sandboxPluginObject&gt;plugins aren't
-   being sandboxed&lt;/a&gt;, and the user agent can find a
-   &lt;a href=#plugin&gt;plugin&lt;/a&gt; suitable according to the value of the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, then that
+   attribute is present, and the user agent can find a
+   &lt;a href=#plugin&gt;plugin&lt;/a&gt; suitable according to the value of the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, and either &lt;a href=#sandboxPluginObject&gt;plugins aren't being sandboxed&lt;/a&gt; or
+   the &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;, then that
    &lt;a href=#plugin&gt;plugin&lt;/a&gt; &lt;a href=#object-plugin&gt;should be used&lt;/a&gt;. If
-   no suitable &lt;a href=#plugin&gt;plugin&lt;/a&gt; can be found, or if the
-   &lt;a href=#plugin&gt;plugin&lt;/a&gt; reports an error, jump to the next step
-   (fallback).&lt;/li&gt;
+   these conditions cannot be met, or if the &lt;a href=#plugin&gt;plugin&lt;/a&gt;
+   reports an error, jump to the next step (fallback).&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;(Fallback.) The &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element
    &lt;a href=#represents&gt;represents&lt;/a&gt; the element's children, ignoring any
@@ -25136,7 +25145,8 @@
   &lt;a href=#plugin&gt;plugin&lt;/a&gt; is not a nested &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p id=sandboxPluginObject&gt;If either:&lt;/p&gt;
+  &lt;p id=sandboxPluginObject&gt;Plugins are considered sandboxed for the
+  purpose of an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element if either:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed plugins browsing context flag&lt;/a&gt; was
    set on the &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
@@ -25148,11 +25158,7 @@
    sniffing&quot;&gt;sniffed type&lt;/a&gt; as determined during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; is
    &lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
 
-  &lt;/ul&gt;&lt;p&gt;...then the steps above must always act as if they had failed to
-  find a &lt;a href=#plugin&gt;plugin&lt;/a&gt;, even if one would otherwise have been
-  used.&lt;/p&gt;
-
-  &lt;p class=note&gt;The above algorithm is independent of CSS properties
+  &lt;/ul&gt;&lt;p class=note&gt;The above algorithm is independent of CSS properties
   (including 'display', 'overflow', and 'visibility'). For example, it
   runs even if the element is hidden with a 'display:none' CSS style,
   and does not run &lt;em&gt;again&lt;/em&gt; if the element's visibility
@@ -64716,7 +64722,8 @@
   &lt;p class=note id=sandboxPluginNavigate&gt;If the &lt;a href=#sandboxed-plugins-browsing-context-flag&gt;sandboxed
   plugins browsing context flag&lt;/a&gt; was set on the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; when the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was created, the
-  synthesized &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element will &lt;a href=#sandboxPluginEmbed&gt;fail to render the content&lt;/a&gt;.&lt;/p&gt;
+  synthesized &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element will &lt;a href=#sandboxPluginEmbed&gt;fail to render the content&lt;/a&gt; if the
+  relevant &lt;a href=#plugin&gt;plugin&lt;/a&gt; cannot be &lt;a href=#concept-plugin-secure title=concept-plugin-secure&gt;secured&lt;/a&gt;.&lt;/p&gt;
 
 
   &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;6.5.7 &lt;/span&gt;&lt;dfn title=navigate-ua-inline&gt;Page load processing model for inline content that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
@@ -91034,6 +91041,10 @@
   but it is disabled, the element &lt;a href=#represents&gt;represents&lt;/a&gt; its
   contents.&lt;/p&gt;
 
+  &lt;!-- we assume here that the Java plugin can't be &lt;span
+  title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt;; if anyone does end up
+  securing one we can always change this --&gt;
+
   &lt;p&gt;Otherwise, the user agent should instantiate a Java Language
   runtime &lt;a href=#plugin&gt;plugin&lt;/a&gt;, and should pass the names and values of
   all the attributes on the element, in the order they were added to

Modified: source
===================================================================
--- source	2011-09-23 19:11:54 UTC (rev 6572)
+++ source	2011-09-23 19:40:42 UTC (rev 6573)
@@ -2166,6 +2166,14 @@
   specification doesn't require user agents to support plugins at all.
   &lt;a href=&quot;#refsNPAPI&quot;&gt;[NPAPI]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;A plugin can be &lt;dfn title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/dfn&gt;
+  if it honors the semantics of the &lt;code
+  title=&quot;attr-iframe-sandbox&quot;&gt;sandbox&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p class=&quot;example&quot;&gt;For example, a secured plugin would prevent its
+  contents from creating pop-up windows when the plugin is
+  instantiated inside a sandboxed &lt;code&gt;iframe&lt;/code&gt;.&lt;/p&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
   &lt;p class=&quot;warning&quot;&gt;Browsers should take extreme care when
@@ -25514,7 +25522,7 @@
   When the attribute is set, the content is treated as being from a
   unique &lt;span&gt;origin&lt;/span&gt;, forms and scripts are disabled, links
   are prevented from targeting other &lt;span title=&quot;browsing
-  context&quot;&gt;browsing contexts&lt;/span&gt;, and plugins are disabled. The
+  context&quot;&gt;browsing contexts&lt;/span&gt;, and plugins are secured. The
   &lt;code
   title=&quot;attr-iframe-sandbox-allow-same-origin&quot;&gt;allow-same-origin&lt;/code&gt;
   keyword allows the content to be treated as being from the same
@@ -25616,7 +25624,9 @@
     &lt;a href=&quot;#sandboxPluginApplet&quot;&gt;the &lt;code&gt;applet&lt;/code&gt;
     element&lt;/a&gt;, or through &lt;a
     href=&quot;#sandboxPluginNavigate&quot;&gt;navigation&lt;/a&gt; of a &lt;span&gt;nested
-    browsing context&lt;/span&gt;.&lt;/p&gt;
+    browsing context&lt;/span&gt;, unless those &lt;span
+    title=&quot;plugin&quot;&gt;plugins&lt;/span&gt; can be &lt;span
+    title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -26159,38 +26169,6 @@
   content&lt;/span&gt;, any plugins instantiated for the element must be
   removed, and the &lt;code&gt;embed&lt;/code&gt; element represents nothing.&lt;/p&gt;
 
-  &lt;p id=&quot;sandboxPluginEmbed&quot;&gt;If either:
-
-  &lt;ul&gt;
-
-   &lt;li&gt;the &lt;span&gt;sandboxed plugins browsing context flag&lt;/span&gt; was
-   set on the &lt;span&gt;browsing context&lt;/span&gt; for which the
-   &lt;code&gt;embed&lt;/code&gt; element's &lt;code&gt;Document&lt;/code&gt; is the
-   &lt;span&gt;active document&lt;/span&gt; when that &lt;code&gt;Document&lt;/code&gt; was
-   created, or&lt;/li&gt;
-
-   &lt;li&gt;the &lt;code&gt;embed&lt;/code&gt; element's &lt;code&gt;Document&lt;/code&gt; was
-   parsed from a resource whose &lt;span title=&quot;Content-Type
-   sniffing&quot;&gt;sniffed type&lt;/span&gt; as determined during &lt;span
-   title=&quot;navigate&quot;&gt;navigation&lt;/span&gt; is
-   &lt;code&gt;text/html-sandboxed&lt;/code&gt;&lt;/li&gt;
-
-  &lt;/ul&gt;
-
-  &lt;p&gt;...then the user agent must render the &lt;code&gt;embed&lt;/code&gt; element
-  in a manner that conveys that the &lt;span&gt;plugin&lt;/span&gt; was
-  disabled. The user agent may offer the user the option to override
-  the sandbox and instantiate the &lt;span&gt;plugin&lt;/span&gt; anyway; if the
-  user invokes such an option, the user agent must act as if the
-  conditions above did not apply for the purposes of this element.&lt;/p&gt;
-
-  &lt;p class=&quot;warning&quot;&gt;Plugins are disabled in sandboxed browsing
-  contexts because they might not honor the restrictions imposed by
-  the sandbox (e.g. they might allow scripting even when scripting in
-  the sandbox is disabled). User agents should convey the danger of
-  overriding the sandbox to the user if an option to do so is
-  provided.&lt;/p&gt;
-
   &lt;p&gt;An &lt;code&gt;embed&lt;/code&gt; element is said to be &lt;dfn
   title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/dfn&gt; when the
   following conditions are all met simultaneously:&lt;/p&gt;
@@ -26200,7 +26178,6 @@
    &lt;li&gt;The element's &lt;code&gt;Document&lt;/code&gt; is &lt;span&gt;fully active&lt;/span&gt;.&lt;/li&gt;
    &lt;li&gt;The element has either a &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute set or a &lt;code title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute set (or both).&lt;/li&gt;
    &lt;li&gt;The element's &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute is either absent or its value is the empty string.&lt;/li&gt;
-   &lt;li&gt;The element is not in a &lt;code&gt;Document&lt;/code&gt; whose &lt;span&gt;browsing context&lt;/span&gt; had the &lt;span&gt;sandboxed plugins browsing context flag&lt;/span&gt; set when the &lt;code&gt;Document&lt;/code&gt; was created (unless this has been overridden as described above).&lt;/li&gt;
    &lt;li&gt;The element's &lt;code&gt;Document&lt;/code&gt; was not parsed from a resource whose &lt;span title=&quot;Content-Type sniffing&quot;&gt;sniffed type&lt;/span&gt; as determined during &lt;span title=&quot;navigate&quot;&gt;navigation&lt;/span&gt; is &lt;code&gt;text/html-sandboxed&lt;/code&gt; (unless this has been overridden as described above).&lt;/li&gt;
    &lt;li&gt;The element is not a descendant of a &lt;span&gt;media element&lt;/span&gt;.&lt;/li&gt;
    &lt;li&gt;The element is not a descendant of an &lt;code&gt;object&lt;/code&gt; element that is not showing its &lt;span&gt;fallback content&lt;/span&gt;.&lt;/li&gt;
@@ -26271,6 +26248,42 @@
   &lt;span&gt;plugin&lt;/span&gt; that had been instantiated for that element must
   be unloaded.&lt;/p&gt;
 
+  &lt;p id=&quot;sandboxPluginEmbed&quot;&gt;When a &lt;span&gt;plugin&lt;/span&gt; is to be
+  instantiated but it cannot be &lt;span
+  title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt; and either:
+
+  &lt;ul&gt;
+
+   &lt;li&gt;the &lt;span&gt;sandboxed plugins browsing context flag&lt;/span&gt; was
+   set on the &lt;span&gt;browsing context&lt;/span&gt; for which the
+   &lt;code&gt;embed&lt;/code&gt; element's &lt;code&gt;Document&lt;/code&gt; is the
+   &lt;span&gt;active document&lt;/span&gt; when that &lt;code&gt;Document&lt;/code&gt; was
+   created, or&lt;/li&gt;
+
+   &lt;li&gt;the &lt;code&gt;embed&lt;/code&gt; element's &lt;code&gt;Document&lt;/code&gt; was
+   parsed from a resource whose &lt;span title=&quot;Content-Type
+   sniffing&quot;&gt;sniffed type&lt;/span&gt; as determined during &lt;span
+   title=&quot;navigate&quot;&gt;navigation&lt;/span&gt; is
+   &lt;code&gt;text/html-sandboxed&lt;/code&gt;&lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p&gt;...then the user agent must not instantiate the
+  &lt;span&gt;plugin&lt;/span&gt;, and must instead render the &lt;code&gt;embed&lt;/code&gt;
+  element in a manner that conveys that the &lt;span&gt;plugin&lt;/span&gt; was
+  disabled. The user agent may offer the user the option to override
+  the sandbox and instantiate the &lt;span&gt;plugin&lt;/span&gt; anyway; if the
+  user invokes such an option, the user agent must act as if the
+  conditions above did not apply for the purposes of this element.&lt;/p&gt;
+
+  &lt;p class=&quot;warning&quot;&gt;Plugins that cannot be &lt;span
+  title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt; are disabled in
+  sandboxed browsing contexts because they might not honor the
+  restrictions imposed by the sandbox (e.g. they might allow scripting
+  even when scripting in the sandbox is disabled). User agents should
+  convey the danger of overriding the sandbox to the user if an option
+  to do so is provided.&lt;/p&gt;
+
   &lt;p class=&quot;note&quot;&gt;The &lt;code&gt;embed&lt;/code&gt; element is unaffected by the
   CSS 'display' property. The selected plugin is instantiated even if
   the element is hidden with a 'display:none' CSS style.&lt;/p&gt;
@@ -26576,15 +26589,16 @@
     attribute is present, and has a value that isn't the empty string,
     then: if the user agent can find a &lt;span&gt;plugin&lt;/span&gt; suitable
     according to the value of the &lt;code
-    title=&quot;attr-object-classid&quot;&gt;classid&lt;/code&gt; attribute, and &lt;a
-    href=&quot;#sandboxPluginObject&quot;&gt;plugins aren't being sandboxed&lt;/a&gt;,
-    then that &lt;span&gt;plugin&lt;/span&gt; &lt;a href=&quot;#object-plugin&quot;&gt;should be
-    used&lt;/a&gt;, and the value of the &lt;code
-    title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute, if any, should be
-    passed to the &lt;span&gt;plugin&lt;/span&gt;. If no suitable
-    &lt;span&gt;plugin&lt;/span&gt; can be found, or if the &lt;span&gt;plugin&lt;/span&gt;
-    reports an error, jump to the last step in the overall set of
-    steps (fallback).&lt;/p&gt;
+    title=&quot;attr-object-classid&quot;&gt;classid&lt;/code&gt; attribute, and either
+    &lt;a href=&quot;#sandboxPluginObject&quot;&gt;plugins aren't being sandboxed&lt;/a&gt;
+    or that &lt;span&gt;plugin&lt;/span&gt; can be &lt;span
+    title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt;, then that
+    &lt;span&gt;plugin&lt;/span&gt; &lt;a href=&quot;#object-plugin&quot;&gt;should be used&lt;/a&gt;,
+    and the value of the &lt;code title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt;
+    attribute, if any, should be passed to the &lt;span&gt;plugin&lt;/span&gt;. If
+    no suitable &lt;span&gt;plugin&lt;/span&gt; can be found, or if the
+    &lt;span&gt;plugin&lt;/span&gt; reports an error, jump to the last step in the
+    overall set of steps (fallback).&lt;/p&gt;
 
     &lt;!--
      case insensitive:
@@ -26968,8 +26982,10 @@
        &lt;dd&gt;
 
         &lt;p&gt;If &lt;a href=&quot;#sandboxPluginObject&quot;&gt;plugins are being
-        sandboxed&lt;/a&gt;, jump to the last step in the overall set of
-        steps (fallback).&lt;/p&gt;
+        sandboxed&lt;/a&gt; and the plugin that supports &lt;var
+        title=&quot;&quot;&gt;resource type&lt;/var&gt; cannot be &lt;span
+        title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt;, jump to the last
+        step in the overall set of steps (fallback).&lt;/p&gt;
 
         &lt;p&gt;Otherwise, the user agent should &lt;a
         href=&quot;#object-plugin&quot;&gt;use the plugin that supports &lt;var
@@ -27100,14 +27116,15 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;code title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute
    is absent but the &lt;code title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt;
-   attribute is present, &lt;a href=&quot;#sandboxPluginObject&quot;&gt;plugins aren't
-   being sandboxed&lt;/a&gt;, and the user agent can find a
+   attribute is present, and the user agent can find a
    &lt;span&gt;plugin&lt;/span&gt; suitable according to the value of the &lt;code
-   title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt; attribute, then that
+   title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt; attribute, and either &lt;a
+   href=&quot;#sandboxPluginObject&quot;&gt;plugins aren't being sandboxed&lt;/a&gt; or
+   the &lt;span&gt;plugin&lt;/span&gt; can be &lt;span
+   title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt;, then that
    &lt;span&gt;plugin&lt;/span&gt; &lt;a href=&quot;#object-plugin&quot;&gt;should be used&lt;/a&gt;. If
-   no suitable &lt;span&gt;plugin&lt;/span&gt; can be found, or if the
-   &lt;span&gt;plugin&lt;/span&gt; reports an error, jump to the next step
-   (fallback).&lt;/p&gt;&lt;/li&gt;
+   these conditions cannot be met, or if the &lt;span&gt;plugin&lt;/span&gt;
+   reports an error, jump to the next step (fallback).&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;(Fallback.) The &lt;code&gt;object&lt;/code&gt; element
    &lt;span&gt;represents&lt;/span&gt; the element's children, ignoring any
@@ -27134,7 +27151,8 @@
   &lt;span&gt;plugin&lt;/span&gt; is not a nested &lt;span&gt;browsing
   context&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p id=&quot;sandboxPluginObject&quot;&gt;If either:&lt;/p&gt;
+  &lt;p id=&quot;sandboxPluginObject&quot;&gt;Plugins are considered sandboxed for the
+  purpose of an &lt;code&gt;object&lt;/code&gt; element if either:&lt;/p&gt;
 
   &lt;ul&gt;
 
@@ -27151,10 +27169,6 @@
 
   &lt;/ul&gt;
 
-  &lt;p&gt;...then the steps above must always act as if they had failed to
-  find a &lt;span&gt;plugin&lt;/span&gt;, even if one would otherwise have been
-  used.&lt;/p&gt;
-
   &lt;p class=&quot;note&quot;&gt;The above algorithm is independent of CSS properties
   (including 'display', 'overflow', and 'visibility'). For example, it
   runs even if the element is hidden with a 'display:none' CSS style,
@@ -73607,7 +73621,9 @@
   plugins browsing context flag&lt;/span&gt; was set on the &lt;span&gt;browsing
   context&lt;/span&gt; when the &lt;code&gt;Document&lt;/code&gt; was created, the
   synthesized &lt;code&gt;embed&lt;/code&gt; element will &lt;a
-  href=&quot;#sandboxPluginEmbed&quot;&gt;fail to render the content&lt;/a&gt;.&lt;/p&gt;
+  href=&quot;#sandboxPluginEmbed&quot;&gt;fail to render the content&lt;/a&gt; if the
+  relevant &lt;span&gt;plugin&lt;/span&gt; cannot be &lt;span
+  title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt;.&lt;/p&gt;
 
 
   &lt;h4 id=&quot;read-ua-inline&quot;&gt;&lt;dfn title=&quot;navigate-ua-inline&quot;&gt;Page load processing model for inline content that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
@@ -108351,6 +108367,10 @@
   but it is disabled, the element &lt;span&gt;represents&lt;/span&gt; its
   contents.&lt;/p&gt;
 
+  &lt;!-- we assume here that the Java plugin can't be &lt;span
+  title=&quot;concept-plugin-secure&quot;&gt;secured&lt;/span&gt;; if anyone does end up
+  securing one we can always change this --&gt;
+
   &lt;p&gt;Otherwise, the user agent should instantiate a Java Language
   runtime &lt;span&gt;plugin&lt;/span&gt;, and should pass the names and values of
   all the attributes on the element, in the order they were added to


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013439.html">[html5] r6572 - [giow] (2) Explicitly mention when to render	drag-cancel feedback. Fixing http:/ [...]
</A></li>
	<LI>Next message: <A HREF="013441.html">[html5] r6574 - [ac] (1) tweak authoring conformance requirements	to prevent some meaningless co [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13440">[ date ]</a>
              <a href="thread.html#13440">[ thread ]</a>
              <a href="subject.html#13440">[ subject ]</a>
              <a href="author.html#13440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
