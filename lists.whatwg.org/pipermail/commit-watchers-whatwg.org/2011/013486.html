<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r6619 - [e] (0) Shake up the publication pipeline a bit.	Merge the main two WHATWG specs [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6619%20-%20%5Be%5D%20%280%29%20Shake%20up%20the%20publication%20pipeline%20a%20bit.%0A%09Merge%20the%20main%20two%20WHATWG%20specs%20%5B...%5D&In-Reply-To=%3C20111004165759.2490E1C84004%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013485.html">
   <LINK REL="Next"  HREF="013487.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r6619 - [e] (0) Shake up the publication pipeline a bit.	Merge the main two WHATWG specs [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6619%20-%20%5Be%5D%20%280%29%20Shake%20up%20the%20publication%20pipeline%20a%20bit.%0A%09Merge%20the%20main%20two%20WHATWG%20specs%20%5B...%5D&In-Reply-To=%3C20111004165759.2490E1C84004%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r6619 - [e] (0) Shake up the publication pipeline a bit.	Merge the main two WHATWG specs [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Oct  4 09:57:59 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013485.html">[html5] r6618 - [ac] (0) Allow basic flow content in &lt;td&gt; and &lt;th&gt;.	(bugs 13174 and 13201)
</A></li>
        <LI>Next message: <A HREF="013487.html">[html5] r6620 - [e] (0) fix links
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13486">[ date ]</a>
              <a href="thread.html#13486">[ thread ]</a>
              <a href="subject.html#13486">[ subject ]</a>
              <a href="author.html#13486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2011-10-04 09:57:57 -0700 (Tue, 04 Oct 2011)
New Revision: 6619

Modified:
   index
   source
Log:
[e] (0) Shake up the publication pipeline a bit. Merge the main two WHATWG specs. Update styles.

Modified: index
===================================================================
--- index	2011-10-04 15:43:21 UTC (rev 6618)
+++ index	2011-10-04 16:57:57 UTC (rev 6619)
@@ -213,9 +213,7 @@
      src: url('<A HREF="http://www.whatwg.org/specs/web-apps/current-work/fonts/Essays1743-BoldItalic.ttf">http://www.whatwg.org/specs/web-apps/current-work/fonts/Essays1743-BoldItalic.ttf</A>');
    }
 
-  &lt;/style&gt;&lt;style&gt;
-   .domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This box is non-normative. Implementation requirements are given below this box.'; color: black; font-style: italic; border: solid 2px; background: white; padding: 0 0.25em; }
-  &lt;/style&gt;&lt;link href=data:text/css, id=complete rel=stylesheet title=&quot;Complete specification&quot;&gt;&lt;link href=data:text/css,.impl%20{%20display:%20none;%20}%0Ahtml%20{%20border:%20solid%20yellow;%20}%20.domintro:before%20{%20display:%20none;%20} id=author rel=&quot;alternate stylesheet&quot; title=&quot;Author documentation only&quot;&gt;&lt;link href=data:text/css,.impl%20{%20background:%20%23FFEEEE;%20}%20.domintro:before%20{%20background:%20%23FFEEEE;%20} id=highlight rel=&quot;alternate stylesheet&quot; title=&quot;Highlight implementation requirements&quot;&gt;&lt;link href=status.css rel=stylesheet&gt;&lt;script&gt;
+  &lt;/style&gt;&lt;link href=status.css rel=stylesheet&gt;&lt;script&gt;
    var startedInit = 0;
    function init() {
      startedInit = 1;
@@ -227,7 +225,6 @@
      load('reviewer.js');
      if (document.documentElement.className == &quot;&quot; || document.documentElement.className == &quot;split index&quot;)
        load('toc.js');
-     load('styler.js');
      load('updater.js');
      load('dfn.js');
      load('status.js');
@@ -239,20 +236,17 @@
        if (!startedInit)
          showAlert(&quot;Too slow? Try reading the multipage copy of the spec instead:&quot;, &quot;<A HREF="http://whatwg.org/html">http://whatwg.org/html</A>&quot;);
      }, 6000);
-  &lt;/script&gt;&lt;body class=draft onload=init()&gt;
+  &lt;/script&gt;&lt;body onload=init()&gt;
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 2 October 2011&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 4 October 2011&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
-    &lt;dd&gt;&lt;a href=<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/">http://www.whatwg.org/specs/web-apps/current-work/multipage/</A>&gt;<A HREF="http://whatwg.org/html&lt;/a">http://whatwg.org/html&lt;/a</A>&gt;&lt;/dd&gt;
+    &lt;dd&gt;&lt;a href=<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/">http://www.whatwg.org/specs/web-apps/current-work/multipage/</A>&gt;<A HREF="http://www.whatwg.org/html&lt;/a">http://www.whatwg.org/html&lt;/a</A>&gt;&lt;/dd&gt;
     &lt;dt&gt;One-page version:&lt;/dt&gt;
-    &lt;dd&gt;&lt;a href=<A HREF="http://www.whatwg.org/specs/web-apps/current-work/">http://www.whatwg.org/specs/web-apps/current-work/</A>&gt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/&lt;/a">http://www.whatwg.org/specs/web-apps/current-work/&lt;/a</A>&gt;&lt;/dd&gt;
-    &lt;dt&gt;PDF print versions:&lt;/dt&gt;
-    &lt;dd&gt;A4: &lt;a href=<A HREF="http://www.whatwg.org/specs/web-apps/current-work/html-a4.pdf">http://www.whatwg.org/specs/web-apps/current-work/html-a4.pdf</A>&gt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/html-a4.pdf&lt;/a">http://www.whatwg.org/specs/web-apps/current-work/html-a4.pdf&lt;/a</A>&gt;&lt;/dd&gt;
-    &lt;dd&gt;Letter: &lt;a href=<A HREF="http://www.whatwg.org/specs/web-apps/current-work/html-letter.pdf">http://www.whatwg.org/specs/web-apps/current-work/html-letter.pdf</A>&gt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/html-letter.pdf&lt;/a">http://www.whatwg.org/specs/web-apps/current-work/html-letter.pdf&lt;/a</A>&gt;&lt;/dd&gt;
+    &lt;dd&gt;&lt;a href=<A HREF="http://www.whatwg.org/specs/web-apps/current-work/">http://www.whatwg.org/specs/web-apps/current-work/</A>&gt;<A HREF="http://whatwg.org/c&lt;/a">http://whatwg.org/c&lt;/a</A>&gt;&lt;/dd&gt;
     &lt;dt&gt;Participate:&lt;/dt&gt;
     &lt;dd&gt;&lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">whatwg at whatwg.org</A>&lt;/a&gt;&lt;/dd&gt;
     &lt;dd&gt;&lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;<A HREF="http://forums.whatwg.org/&lt;/a">http://forums.whatwg.org/&lt;/a</A>&gt;&lt;/dd&gt;
@@ -260,12 +254,12 @@
     &lt;dt&gt;FAQ:&lt;/dt&gt;
     &lt;dd&gt;&lt;a href=<A HREF="http://wiki.whatwg.org/wiki/FAQ">http://wiki.whatwg.org/wiki/FAQ</A>&gt;<A HREF="http://wiki.whatwg.org/wiki/FAQ&lt;/a">http://wiki.whatwg.org/wiki/FAQ&lt;/a</A>&gt;&lt;/dd&gt;
     &lt;dt&gt;Version history:&lt;/dt&gt;
-    &lt;dd&gt;Twitter messages (non-editorial changes only): &lt;a href=<A HREF="http://twitter.com/WHATWG">http://twitter.com/WHATWG</A>&gt;<A HREF="http://twitter.com/WHATWG&lt;/a">http://twitter.com/WHATWG&lt;/a</A>&gt;&lt;/dd&gt;
+    &lt;dd&gt;Twitter updates: &lt;a href=<A HREF="http://twitter.com/WHATWG">http://twitter.com/WHATWG</A>&gt;<A HREF="http://twitter.com/WHATWG&lt;/a">http://twitter.com/WHATWG&lt;/a</A>&gt;&lt;/dd&gt;
     &lt;dd&gt;Commit-Watchers mailing list: &lt;a href=<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org</A>&gt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org&lt;/a">http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org&lt;/a</A>&gt;&lt;/dd&gt;
     &lt;dd&gt;Interactive Web interface: &lt;a href=<A HREF="http://html5.org/tools/web-apps-tracker">http://html5.org/tools/web-apps-tracker</A>&gt;<A HREF="http://html5.org/tools/web-apps-tracker&lt;/a">http://html5.org/tools/web-apps-tracker&lt;/a</A>&gt;&lt;/dd&gt;
     &lt;dd&gt;Subversion interface: &lt;a href=<A HREF="http://svn.whatwg.org/">http://svn.whatwg.org/</A>&gt;<A HREF="http://svn.whatwg.org/&lt;/a">http://svn.whatwg.org/&lt;/a</A>&gt;&lt;/dd&gt;
     &lt;dt&gt;Issues:&lt;/dt&gt;
-    &lt;dd&gt;To view the open bugs: &lt;a href=&quot;<A HREF="http://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;amp;short_desc_type=allwordssubstr&amp;amp;short_desc=&amp;amp;product=HTML+WG&amp;amp;long_desc_type=allwordssubstr&amp;amp;long_desc=&amp;amp;bug_file_loc_type=allwordssubstr&amp;amp;bug_file_loc=&amp;amp;status_whiteboard_type=allwordssubstr&amp;amp;status_whiteboard=&amp;amp;keywords_type=allwords&amp;amp;keywords=&amp;amp;bug_status=UNCONFIRMED&amp;amp;bug_status=NEW&amp;amp;bug_status=ASSIGNED&amp;amp;bug_status=REOPENED&amp;amp;emailassigned_to1=1&amp;amp;emailtype1=exact&amp;amp;email1=ian%40hixie.ch&amp;amp;emailtype2=substring&amp;amp;email2=&amp;amp;bugidtype=include&amp;amp;bug_id=&amp;amp;votes=&amp;amp;chfieldfrom=&amp;amp;chfieldto=Now&amp;amp;chfieldvalue=&amp;amp;cmdtype=doit&amp;amp;order=Reuse+same+sort+as+last+time&amp;amp;field0-0-0=noop&amp;amp;type0-0-0=noop&amp;amp;value0-0-0=">http://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;short_desc_type=allwordssubstr&amp;short_desc=&amp;product=HTML+WG&amp;long_desc_type=allwordssubstr&amp;long_desc=&amp;bug_file_loc_type=allwordssubstr&amp;bug_file_loc=&amp;status_whiteboard_type=allwordssubstr&amp;status_whiteboard=&amp;keywords_type=allwords&amp;keywords=&amp;bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;emailassigned_to1=1&amp;emailtype1=exact&amp;email1=ian%40hixie.ch&amp;emailtype2=substring&amp;email2=&amp;bugidtype=include&amp;bug_id=&amp;votes=&amp;chfieldfrom=&amp;chfieldto=Now&amp;chfieldvalue=&amp;cmdtype=doit&amp;order=Reuse+same+sort+as+last+time&amp;field0-0-0=noop&amp;type0-0-0=noop&amp;value0-0-0=</A>&quot;&gt;HTML bug list&lt;/a&gt;&lt;/dd&gt;
+    &lt;dd&gt;To view the open bugs: &lt;a href=&quot;<A HREF="http://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;amp;short_desc_type=allwordssubstr&amp;amp;short_desc=&amp;amp;long_desc_type=allwordssubstr&amp;amp;long_desc=&amp;amp;bug_file_loc_type=allwordssubstr&amp;amp;bug_file_loc=&amp;amp;status_whiteboard_type=allwordssubstr&amp;amp;status_whiteboard=&amp;amp;keywords_type=allwords&amp;amp;keywords=&amp;amp;bug_status=UNCONFIRMED&amp;amp;bug_status=NEW&amp;amp;bug_status=ASSIGNED&amp;amp;bug_status=REOPENED&amp;amp;emailassigned_to1=1&amp;amp;emailtype1=exact&amp;amp;email1=ian%40hixie.ch&amp;amp;emailtype2=substring&amp;amp;email2=&amp;amp;bugidtype=include&amp;amp;bug_id=&amp;amp;votes=&amp;amp;chfieldfrom=&amp;amp;chfieldto=Now&amp;amp;chfieldvalue=&amp;amp;cmdtype=doit&amp;amp;order=Reuse+same+sort+as+last+time&amp;amp;field0-0-0=noop&amp;amp;type0-0-0=noop&amp;amp;value0-0-0=">http://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;short_desc_type=allwordssubstr&amp;short_desc=&amp;long_desc_type=allwordssubstr&amp;long_desc=&amp;bug_file_loc_type=allwordssubstr&amp;bug_file_loc=&amp;status_whiteboard_type=allwordssubstr&amp;status_whiteboard=&amp;keywords_type=allwords&amp;keywords=&amp;bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;emailassigned_to1=1&amp;emailtype1=exact&amp;email1=ian%40hixie.ch&amp;emailtype2=substring&amp;email2=&amp;bugidtype=include&amp;bug_id=&amp;votes=&amp;chfieldfrom=&amp;chfieldto=Now&amp;chfieldvalue=&amp;cmdtype=doit&amp;order=Reuse+same+sort+as+last+time&amp;field0-0-0=noop&amp;type0-0-0=noop&amp;value0-0-0=</A>&quot;&gt;HTML bug list&lt;/a&gt;&lt;/dd&gt;
     &lt;dd&gt;To file bugs, use the &quot;submit review comments&quot; feature at the bottom of the window&lt;/dd&gt;
     &lt;dd&gt;To send feedback by e-mail: &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">whatwg at whatwg.org</A>&lt;/a&gt;&lt;/dd&gt;
     &lt;dd&gt;To view and vote on e-mail feedback: &lt;a href=<A HREF="http://www.whatwg.org/issues/">http://www.whatwg.org/issues/</A>&gt;<A HREF="http://www.whatwg.org/issues/&lt;/a">http://www.whatwg.org/issues/&lt;/a</A>&gt;&lt;/dd&gt;
@@ -275,8 +269,18 @@
    Mozilla Foundation, and Opera Software ASA.&lt;/p&gt;
    &lt;p class=copyright&gt;You are granted a license to use, reproduce
    and create derivative works of this document.&lt;/p&gt;
+  &lt;/header&gt;&lt;hr&gt;&lt;h2 class=&quot;no-num no-toc&quot; id=abstract&gt;Abstract&lt;/h2&gt;
 
-  &lt;/header&gt;&lt;hr&gt;&lt;h2 class=&quot;no-num no-toc&quot; id=contents&gt;Table of contents&lt;/h2&gt;
+  &lt;p&gt;This specification defines a big part of the Web platform, in
+  lots of detail. Its place in the Web platform specification stack
+  relative to other specifications can be best summed up as
+  follows:&lt;/p&gt;
+
+  &lt;p&gt;&lt;img alt=&quot;It consists of everything else, above such core technologies as HTTP, URI/IRIs, DOM Core, XML, Unicode, and ECMAScript; below presentation-layer technologies like CSS, XBL, and the NPAPI; and to the side of technologies like Geolocation, SVG, MathML, and XHR.&quot; height=359 src=<A HREF="http://images.whatwg.org/abstract.png">http://images.whatwg.org/abstract.png</A> width=398&gt;&lt;/p&gt;
+
+
+
+  &lt;h2 class=&quot;no-num no-toc&quot; id=contents&gt;Table of contents&lt;/h2&gt;
   
 &lt;!--begin-toc--&gt;
 &lt;ol class=toc&gt;
@@ -1008,272 +1012,358 @@
    &lt;li&gt;&lt;a href=#garbage-collection-0&gt;&lt;span class=secno&gt;9.6 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#event-definitions-1&gt;&lt;span class=secno&gt;9.7 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#mediastreamevents&gt;&lt;span class=secno&gt;9.8 &lt;/span&gt;Event Summary&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
- &lt;li&gt;&lt;a href=#comms&gt;&lt;span class=secno&gt;10 &lt;/span&gt;Communication&lt;/a&gt;
+ &lt;li&gt;&lt;a href=#workers&gt;&lt;span class=secno&gt;10 &lt;/span&gt;Web workers&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#event-definitions-2&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#web-messaging&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Cross-document messaging&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#introduction-13&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Introduction&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-13&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#security-postmsg&gt;&lt;span class=secno&gt;10.2.2 &lt;/span&gt;Security&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#scope-0&gt;&lt;span class=secno&gt;10.1.1 &lt;/span&gt;Scope&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#examples-4&gt;&lt;span class=secno&gt;10.1.2 &lt;/span&gt;Examples&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#authors&gt;&lt;span class=secno&gt;10.2.2.1 &lt;/span&gt;Authors&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#user-agents&gt;&lt;span class=secno&gt;10.2.2.2 &lt;/span&gt;User agents&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#posting-messages&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Posting messages&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#channel-messaging&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;Channel messaging&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#a-background-number-crunching-worker&gt;&lt;span class=secno&gt;10.1.2.1 &lt;/span&gt;A background number-crunching worker&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#a-worker-for-updating-a-client-side-database&gt;&lt;span class=secno&gt;10.1.2.2 &lt;/span&gt;A worker for updating a client-side database&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#worker-used-for-background-i/o&gt;&lt;span class=secno&gt;10.1.2.3 &lt;/span&gt;Worker used for background I/O&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-workers-introduction&gt;&lt;span class=secno&gt;10.1.2.4 &lt;/span&gt;Shared workers introduction&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-state-using-a-shared-worker&gt;&lt;span class=secno&gt;10.1.2.5 &lt;/span&gt;Shared state using a shared worker&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#delegation&gt;&lt;span class=secno&gt;10.1.2.6 &lt;/span&gt;Delegation&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#tutorials&gt;&lt;span class=secno&gt;10.1.3 &lt;/span&gt;Tutorials&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#creating-a-dedicated-worker&gt;&lt;span class=secno&gt;10.1.3.1 &lt;/span&gt;Creating a dedicated worker&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#communicating-with-a-dedicated-worker&gt;&lt;span class=secno&gt;10.1.3.2 &lt;/span&gt;Communicating with a dedicated worker&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-workers&gt;&lt;span class=secno&gt;10.1.3.3 &lt;/span&gt;Shared workers&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#infrastructure-0&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Infrastructure&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-14&gt;&lt;span class=secno&gt;10.3.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;10.3.2 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;10.3.3 &lt;/span&gt;Message ports&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#the-global-scope&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;The global scope&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#ports-and-garbage-collection&gt;&lt;span class=secno&gt;10.3.3.1 &lt;/span&gt;Ports and garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
- &lt;li&gt;&lt;a href=#syntax&gt;&lt;span class=secno&gt;11 &lt;/span&gt;The HTML syntax&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#the-workerglobalscope-abstract-interface&gt;&lt;span class=secno&gt;10.2.1.1 &lt;/span&gt;The &lt;code&gt;WorkerGlobalScope&lt;/code&gt; abstract interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;10.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;DedicatedWorkerGlobalScope&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworkerglobalscope-interface&gt;&lt;span class=secno&gt;10.2.1.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#origins-of-workers&gt;&lt;span class=secno&gt;10.2.2 &lt;/span&gt;Origins of workers&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-event-loop&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;The event loop&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=&quot;#the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;10.2.4 &lt;/span&gt;The worker's lifetime&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;10.2.5 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#runtime-script-errors-0&gt;&lt;span class=secno&gt;10.2.6 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;10.2.7 &lt;/span&gt;Creating workers&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;10.2.7.1 &lt;/span&gt;The &lt;code&gt;AbstractWorker&lt;/code&gt; abstract interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.7.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.7.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#apis-available-to-workers&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;APIs available to workers&lt;/a&gt;
+    &lt;ol&gt;
+     &lt;li&gt;&lt;a href=#importing-scripts-and-libraries&gt;&lt;span class=secno&gt;10.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-workernavigator-object&gt;&lt;span class=secno&gt;10.3.2 &lt;/span&gt;The &lt;code&gt;WorkerNavigator&lt;/code&gt; object&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#interface-objects-and-constructors&gt;&lt;span class=secno&gt;10.3.3 &lt;/span&gt;Interface objects and constructors&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#worker-locations&gt;&lt;span class=secno&gt;10.3.4 &lt;/span&gt;Worker locations&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+ &lt;li&gt;&lt;a href=#comms&gt;&lt;span class=secno&gt;11 &lt;/span&gt;Communication&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#writing&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Writing HTML documents&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#event-definitions-2&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#server-sent-events&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;Server-sent events&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#the-doctype&gt;&lt;span class=secno&gt;11.1.1 &lt;/span&gt;The DOCTYPE&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#elements-0&gt;&lt;span class=secno&gt;11.1.2 &lt;/span&gt;Elements&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#server-sent-events-intro&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-eventsource-interface&gt;&lt;span class=secno&gt;11.2.2 &lt;/span&gt;The &lt;code&gt;EventSource&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-5&gt;&lt;span class=secno&gt;11.2.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#parsing-an-event-stream&gt;&lt;span class=secno&gt;11.2.4 &lt;/span&gt;Parsing an event stream&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#event-stream-interpretation&gt;&lt;span class=secno&gt;11.2.5 &lt;/span&gt;Interpreting an event stream&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#notes&gt;&lt;span class=secno&gt;11.2.6 &lt;/span&gt;Notes&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#eventsource-push&gt;&lt;span class=secno&gt;11.2.7 &lt;/span&gt;Connectionless push and other features&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#garbage-collection-1&gt;&lt;span class=secno&gt;11.2.8 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#iana-considerations&gt;&lt;span class=secno&gt;11.2.9 &lt;/span&gt;IANA considerations&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#start-tags&gt;&lt;span class=secno&gt;11.1.2.1 &lt;/span&gt;Start tags&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#end-tags&gt;&lt;span class=secno&gt;11.1.2.2 &lt;/span&gt;End tags&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attributes-0&gt;&lt;span class=secno&gt;11.1.2.3 &lt;/span&gt;Attributes&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#optional-tags&gt;&lt;span class=secno&gt;11.1.2.4 &lt;/span&gt;Optional tags&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#element-restrictions&gt;&lt;span class=secno&gt;11.1.2.5 &lt;/span&gt;Restrictions on content models&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cdata-rcdata-restrictions&gt;&lt;span class=secno&gt;11.1.2.6 &lt;/span&gt;Restrictions on the contents of raw text and RCDATA elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#text-1&gt;&lt;span class=secno&gt;11.1.3 &lt;/span&gt;Text&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#text/event-stream&gt;&lt;span class=secno&gt;11.2.9.1 &lt;/span&gt;&lt;code&gt;text/event-stream&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#last-event-id&gt;&lt;span class=secno&gt;11.2.9.2 &lt;/span&gt;&lt;code&gt;Last-Event-ID&lt;/code&gt;&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#network&gt;&lt;span class=secno&gt;11.3 &lt;/span&gt;Web sockets&lt;/a&gt;
+    &lt;ol&gt;
+     &lt;li&gt;&lt;a href=#network-intro&gt;&lt;span class=secno&gt;11.3.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-websocket-interface&gt;&lt;span class=secno&gt;11.3.2 &lt;/span&gt;The &lt;code&gt;WebSocket&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#feedback-from-the-protocol&gt;&lt;span class=secno&gt;11.3.3 &lt;/span&gt;Feedback from the protocol&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#newlines&gt;&lt;span class=secno&gt;11.1.3.1 &lt;/span&gt;Newlines&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#character-references&gt;&lt;span class=secno&gt;11.1.4 &lt;/span&gt;Character references&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#cdata-sections&gt;&lt;span class=secno&gt;11.1.5 &lt;/span&gt;CDATA sections&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#comments&gt;&lt;span class=secno&gt;11.1.6 &lt;/span&gt;Comments&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#parsing&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;Parsing HTML documents&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#event-definitions-3&gt;&lt;span class=secno&gt;11.3.3.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#garbage-collection-2&gt;&lt;span class=secno&gt;11.3.3.2 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#web-messaging&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Cross-document messaging&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#overview-of-the-parsing-model&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Overview of the parsing model&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-input-stream&gt;&lt;span class=secno&gt;11.2.2 &lt;/span&gt;The input stream&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#introduction-14&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#security-postmsg&gt;&lt;span class=secno&gt;11.4.2 &lt;/span&gt;Security&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#determining-the-character-encoding&gt;&lt;span class=secno&gt;11.2.2.1 &lt;/span&gt;Determining the character encoding&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#character-encodings-0&gt;&lt;span class=secno&gt;11.2.2.2 &lt;/span&gt;Character encodings&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#preprocessing-the-input-stream&gt;&lt;span class=secno&gt;11.2.2.3 &lt;/span&gt;Preprocessing the input stream&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#changing-the-encoding-while-parsing&gt;&lt;span class=secno&gt;11.2.2.4 &lt;/span&gt;Changing the encoding while parsing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#parse-state&gt;&lt;span class=secno&gt;11.2.3 &lt;/span&gt;Parse state&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#authors&gt;&lt;span class=secno&gt;11.4.2.1 &lt;/span&gt;Authors&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#user-agents&gt;&lt;span class=secno&gt;11.4.2.2 &lt;/span&gt;User agents&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#posting-messages&gt;&lt;span class=secno&gt;11.4.3 &lt;/span&gt;Posting messages&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#channel-messaging&gt;&lt;span class=secno&gt;11.5 &lt;/span&gt;Channel messaging&lt;/a&gt;
+    &lt;ol&gt;
+     &lt;li&gt;&lt;a href=#introduction-15&gt;&lt;span class=secno&gt;11.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;11.5.2 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;11.5.3 &lt;/span&gt;Message ports&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#the-insertion-mode&gt;&lt;span class=secno&gt;11.2.3.1 &lt;/span&gt;The insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-stack-of-open-elements&gt;&lt;span class=secno&gt;11.2.3.2 &lt;/span&gt;The stack of open elements&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-list-of-active-formatting-elements&gt;&lt;span class=secno&gt;11.2.3.3 &lt;/span&gt;The list of active formatting elements&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-element-pointers&gt;&lt;span class=secno&gt;11.2.3.4 &lt;/span&gt;The element pointers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#other-parsing-state-flags&gt;&lt;span class=secno&gt;11.2.3.5 &lt;/span&gt;Other parsing state flags&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#tokenization&gt;&lt;span class=secno&gt;11.2.4 &lt;/span&gt;Tokenization&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#ports-and-garbage-collection&gt;&lt;span class=secno&gt;11.5.3.1 &lt;/span&gt;Ports and garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+ &lt;li&gt;&lt;a href=#webstorage&gt;&lt;span class=secno&gt;12 &lt;/span&gt;Web storage&lt;/a&gt;
+  &lt;ol&gt;
+   &lt;li&gt;&lt;a href=#introduction-16&gt;&lt;span class=secno&gt;12.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#storage&gt;&lt;span class=secno&gt;12.2 &lt;/span&gt;The API&lt;/a&gt;
+    &lt;ol&gt;
+     &lt;li&gt;&lt;a href=#the-storage-interface&gt;&lt;span class=secno&gt;12.2.1 &lt;/span&gt;The &lt;code&gt;Storage&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-sessionstorage-attribute&gt;&lt;span class=secno&gt;12.2.2 &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;sessionStorage&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-localstorage-attribute&gt;&lt;span class=secno&gt;12.2.3 &lt;/span&gt;The &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt; attribute&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#data-state&gt;&lt;span class=secno&gt;11.2.4.1 &lt;/span&gt;Data state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#character-reference-in-data-state&gt;&lt;span class=secno&gt;11.2.4.2 &lt;/span&gt;Character reference in data state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rcdata-state&gt;&lt;span class=secno&gt;11.2.4.3 &lt;/span&gt;RCDATA state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#character-reference-in-rcdata-state&gt;&lt;span class=secno&gt;11.2.4.4 &lt;/span&gt;Character reference in RCDATA state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rawtext-state&gt;&lt;span class=secno&gt;11.2.4.5 &lt;/span&gt;RAWTEXT state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-state&gt;&lt;span class=secno&gt;11.2.4.6 &lt;/span&gt;Script data state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#plaintext-state&gt;&lt;span class=secno&gt;11.2.4.7 &lt;/span&gt;PLAINTEXT state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#tag-open-state&gt;&lt;span class=secno&gt;11.2.4.8 &lt;/span&gt;Tag open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.9 &lt;/span&gt;End tag open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#tag-name-state&gt;&lt;span class=secno&gt;11.2.4.10 &lt;/span&gt;Tag name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rcdata-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.11 &lt;/span&gt;RCDATA less-than sign state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rcdata-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.12 &lt;/span&gt;RCDATA end tag open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rcdata-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.13 &lt;/span&gt;RCDATA end tag name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rawtext-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.14 &lt;/span&gt;RAWTEXT less-than sign state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rawtext-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.15 &lt;/span&gt;RAWTEXT end tag open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rawtext-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.16 &lt;/span&gt;RAWTEXT end tag name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.17 &lt;/span&gt;Script data less-than sign state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.18 &lt;/span&gt;Script data end tag open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.19 &lt;/span&gt;Script data end tag name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-escape-start-state&gt;&lt;span class=secno&gt;11.2.4.20 &lt;/span&gt;Script data escape start state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-escape-start-dash-state&gt;&lt;span class=secno&gt;11.2.4.21 &lt;/span&gt;Script data escape start dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-escaped-state&gt;&lt;span class=secno&gt;11.2.4.22 &lt;/span&gt;Script data escaped state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-escaped-dash-state&gt;&lt;span class=secno&gt;11.2.4.23 &lt;/span&gt;Script data escaped dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-escaped-dash-dash-state&gt;&lt;span class=secno&gt;11.2.4.24 &lt;/span&gt;Script data escaped dash dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.25 &lt;/span&gt;Script data escaped less-than sign state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-escaped-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.26 &lt;/span&gt;Script data escaped end tag open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-escaped-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.27 &lt;/span&gt;Script data escaped end tag name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-double-escape-start-state&gt;&lt;span class=secno&gt;11.2.4.28 &lt;/span&gt;Script data double escape start state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-double-escaped-state&gt;&lt;span class=secno&gt;11.2.4.29 &lt;/span&gt;Script data double escaped state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-double-escaped-dash-state&gt;&lt;span class=secno&gt;11.2.4.30 &lt;/span&gt;Script data double escaped dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-double-escaped-dash-dash-state&gt;&lt;span class=secno&gt;11.2.4.31 &lt;/span&gt;Script data double escaped dash dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-double-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.32 &lt;/span&gt;Script data double escaped less-than sign state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#script-data-double-escape-end-state&gt;&lt;span class=secno&gt;11.2.4.33 &lt;/span&gt;Script data double escape end state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.34 &lt;/span&gt;Before attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.35 &lt;/span&gt;Attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.36 &lt;/span&gt;After attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.37 &lt;/span&gt;Before attribute value state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.38 &lt;/span&gt;Attribute value (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.39 &lt;/span&gt;Attribute value (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;11.2.4.40 &lt;/span&gt;Attribute value (unquoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.41 &lt;/span&gt;Character reference in attribute value state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;11.2.4.42 &lt;/span&gt;After attribute value (quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#self-closing-start-tag-state&gt;&lt;span class=secno&gt;11.2.4.43 &lt;/span&gt;Self-closing start tag state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#bogus-comment-state&gt;&lt;span class=secno&gt;11.2.4.44 &lt;/span&gt;Bogus comment state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#markup-declaration-open-state&gt;&lt;span class=secno&gt;11.2.4.45 &lt;/span&gt;Markup declaration open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-start-state&gt;&lt;span class=secno&gt;11.2.4.46 &lt;/span&gt;Comment start state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-start-dash-state&gt;&lt;span class=secno&gt;11.2.4.47 &lt;/span&gt;Comment start dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-state&gt;&lt;span class=secno&gt;11.2.4.48 &lt;/span&gt;Comment state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-dash-state&gt;&lt;span class=secno&gt;11.2.4.49 &lt;/span&gt;Comment end dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-state&gt;&lt;span class=secno&gt;11.2.4.50 &lt;/span&gt;Comment end state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-bang-state&gt;&lt;span class=secno&gt;11.2.4.51 &lt;/span&gt;Comment end bang state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-state&gt;&lt;span class=secno&gt;11.2.4.52 &lt;/span&gt;DOCTYPE state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.53 &lt;/span&gt;Before DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.54 &lt;/span&gt;DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.55 &lt;/span&gt;After DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;11.2.4.56 &lt;/span&gt;After DOCTYPE public keyword state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.57 &lt;/span&gt;Before DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.58 &lt;/span&gt;DOCTYPE public identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.59 &lt;/span&gt;DOCTYPE public identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.60 &lt;/span&gt;After DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;11.2.4.61 &lt;/span&gt;Between DOCTYPE public and system identifiers state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;11.2.4.62 &lt;/span&gt;After DOCTYPE system keyword state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.63 &lt;/span&gt;Before DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.64 &lt;/span&gt;DOCTYPE system identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.65 &lt;/span&gt;DOCTYPE system identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.66 &lt;/span&gt;After DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#bogus-doctype-state&gt;&lt;span class=secno&gt;11.2.4.67 &lt;/span&gt;Bogus DOCTYPE state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cdata-section-state&gt;&lt;span class=secno&gt;11.2.4.68 &lt;/span&gt;CDATA section state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#tokenizing-character-references&gt;&lt;span class=secno&gt;11.2.4.69 &lt;/span&gt;Tokenizing character references&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#tree-construction&gt;&lt;span class=secno&gt;11.2.5 &lt;/span&gt;Tree construction&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#security-localStorage&gt;&lt;span class=secno&gt;12.2.3.1 &lt;/span&gt;Security&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-storage-event&gt;&lt;span class=secno&gt;12.2.4 &lt;/span&gt;The &lt;code title=event-storage&gt;storage&lt;/code&gt; event&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#creating-and-inserting-elements&gt;&lt;span class=secno&gt;11.2.5.1 &lt;/span&gt;Creating and inserting elements&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#closing-elements-that-have-implied-end-tags&gt;&lt;span class=secno&gt;11.2.5.2 &lt;/span&gt;Closing elements that have implied end tags&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#foster-parenting&gt;&lt;span class=secno&gt;11.2.5.3 &lt;/span&gt;Foster parenting&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inhtml&gt;&lt;span class=secno&gt;11.2.5.4 &lt;/span&gt;The rules for parsing tokens in HTML content&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#event-definition-0&gt;&lt;span class=secno&gt;12.2.4.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#threads&gt;&lt;span class=secno&gt;12.2.5 &lt;/span&gt;Threads&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#disk-space-0&gt;&lt;span class=secno&gt;12.3 &lt;/span&gt;Disk space&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#privacy&gt;&lt;span class=secno&gt;12.4 &lt;/span&gt;Privacy&lt;/a&gt;
+    &lt;ol&gt;
+     &lt;li&gt;&lt;a href=#user-tracking&gt;&lt;span class=secno&gt;12.4.1 &lt;/span&gt;User tracking&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#sensitivity-of-data&gt;&lt;span class=secno&gt;12.4.2 &lt;/span&gt;Sensitivity of data&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#security-storage&gt;&lt;span class=secno&gt;12.5 &lt;/span&gt;Security&lt;/a&gt;
+    &lt;ol&gt;
+     &lt;li&gt;&lt;a href=#dns-spoofing-attacks&gt;&lt;span class=secno&gt;12.5.1 &lt;/span&gt;DNS spoofing attacks&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#cross-directory-attacks&gt;&lt;span class=secno&gt;12.5.2 &lt;/span&gt;Cross-directory attacks&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#implementation-risks&gt;&lt;span class=secno&gt;12.5.3 &lt;/span&gt;Implementation risks&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+ &lt;li&gt;&lt;a href=#syntax&gt;&lt;span class=secno&gt;13 &lt;/span&gt;The HTML syntax&lt;/a&gt;
+  &lt;ol&gt;
+   &lt;li&gt;&lt;a href=#writing&gt;&lt;span class=secno&gt;13.1 &lt;/span&gt;Writing HTML documents&lt;/a&gt;
+    &lt;ol&gt;
+     &lt;li&gt;&lt;a href=#the-doctype&gt;&lt;span class=secno&gt;13.1.1 &lt;/span&gt;The DOCTYPE&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#elements-0&gt;&lt;span class=secno&gt;13.1.2 &lt;/span&gt;Elements&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#start-tags&gt;&lt;span class=secno&gt;13.1.2.1 &lt;/span&gt;Start tags&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#end-tags&gt;&lt;span class=secno&gt;13.1.2.2 &lt;/span&gt;End tags&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attributes-0&gt;&lt;span class=secno&gt;13.1.2.3 &lt;/span&gt;Attributes&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#optional-tags&gt;&lt;span class=secno&gt;13.1.2.4 &lt;/span&gt;Optional tags&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#element-restrictions&gt;&lt;span class=secno&gt;13.1.2.5 &lt;/span&gt;Restrictions on content models&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#cdata-rcdata-restrictions&gt;&lt;span class=secno&gt;13.1.2.6 &lt;/span&gt;Restrictions on the contents of raw text and RCDATA elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#text-1&gt;&lt;span class=secno&gt;13.1.3 &lt;/span&gt;Text&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#newlines&gt;&lt;span class=secno&gt;13.1.3.1 &lt;/span&gt;Newlines&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#character-references&gt;&lt;span class=secno&gt;13.1.4 &lt;/span&gt;Character references&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#cdata-sections&gt;&lt;span class=secno&gt;13.1.5 &lt;/span&gt;CDATA sections&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#comments&gt;&lt;span class=secno&gt;13.1.6 &lt;/span&gt;Comments&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#parsing&gt;&lt;span class=secno&gt;13.2 &lt;/span&gt;Parsing HTML documents&lt;/a&gt;
+    &lt;ol&gt;
+     &lt;li&gt;&lt;a href=#overview-of-the-parsing-model&gt;&lt;span class=secno&gt;13.2.1 &lt;/span&gt;Overview of the parsing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-input-stream&gt;&lt;span class=secno&gt;13.2.2 &lt;/span&gt;The input stream&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#determining-the-character-encoding&gt;&lt;span class=secno&gt;13.2.2.1 &lt;/span&gt;Determining the character encoding&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#character-encodings-0&gt;&lt;span class=secno&gt;13.2.2.2 &lt;/span&gt;Character encodings&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#preprocessing-the-input-stream&gt;&lt;span class=secno&gt;13.2.2.3 &lt;/span&gt;Preprocessing the input stream&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#changing-the-encoding-while-parsing&gt;&lt;span class=secno&gt;13.2.2.4 &lt;/span&gt;Changing the encoding while parsing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#parse-state&gt;&lt;span class=secno&gt;13.2.3 &lt;/span&gt;Parse state&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#the-insertion-mode&gt;&lt;span class=secno&gt;13.2.3.1 &lt;/span&gt;The insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-stack-of-open-elements&gt;&lt;span class=secno&gt;13.2.3.2 &lt;/span&gt;The stack of open elements&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-list-of-active-formatting-elements&gt;&lt;span class=secno&gt;13.2.3.3 &lt;/span&gt;The list of active formatting elements&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-element-pointers&gt;&lt;span class=secno&gt;13.2.3.4 &lt;/span&gt;The element pointers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#other-parsing-state-flags&gt;&lt;span class=secno&gt;13.2.3.5 &lt;/span&gt;Other parsing state flags&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#tokenization&gt;&lt;span class=secno&gt;13.2.4 &lt;/span&gt;Tokenization&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#data-state&gt;&lt;span class=secno&gt;13.2.4.1 &lt;/span&gt;Data state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#character-reference-in-data-state&gt;&lt;span class=secno&gt;13.2.4.2 &lt;/span&gt;Character reference in data state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rcdata-state&gt;&lt;span class=secno&gt;13.2.4.3 &lt;/span&gt;RCDATA state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#character-reference-in-rcdata-state&gt;&lt;span class=secno&gt;13.2.4.4 &lt;/span&gt;Character reference in RCDATA state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rawtext-state&gt;&lt;span class=secno&gt;13.2.4.5 &lt;/span&gt;RAWTEXT state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-state&gt;&lt;span class=secno&gt;13.2.4.6 &lt;/span&gt;Script data state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#plaintext-state&gt;&lt;span class=secno&gt;13.2.4.7 &lt;/span&gt;PLAINTEXT state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#tag-open-state&gt;&lt;span class=secno&gt;13.2.4.8 &lt;/span&gt;Tag open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.9 &lt;/span&gt;End tag open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#tag-name-state&gt;&lt;span class=secno&gt;13.2.4.10 &lt;/span&gt;Tag name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rcdata-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.11 &lt;/span&gt;RCDATA less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rcdata-end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.12 &lt;/span&gt;RCDATA end tag open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rcdata-end-tag-name-state&gt;&lt;span class=secno&gt;13.2.4.13 &lt;/span&gt;RCDATA end tag name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rawtext-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.14 &lt;/span&gt;RAWTEXT less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rawtext-end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.15 &lt;/span&gt;RAWTEXT end tag open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rawtext-end-tag-name-state&gt;&lt;span class=secno&gt;13.2.4.16 &lt;/span&gt;RAWTEXT end tag name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.17 &lt;/span&gt;Script data less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.18 &lt;/span&gt;Script data end tag open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-end-tag-name-state&gt;&lt;span class=secno&gt;13.2.4.19 &lt;/span&gt;Script data end tag name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escape-start-state&gt;&lt;span class=secno&gt;13.2.4.20 &lt;/span&gt;Script data escape start state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escape-start-dash-state&gt;&lt;span class=secno&gt;13.2.4.21 &lt;/span&gt;Script data escape start dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-state&gt;&lt;span class=secno&gt;13.2.4.22 &lt;/span&gt;Script data escaped state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-dash-state&gt;&lt;span class=secno&gt;13.2.4.23 &lt;/span&gt;Script data escaped dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-dash-dash-state&gt;&lt;span class=secno&gt;13.2.4.24 &lt;/span&gt;Script data escaped dash dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.25 &lt;/span&gt;Script data escaped less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.26 &lt;/span&gt;Script data escaped end tag open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-end-tag-name-state&gt;&lt;span class=secno&gt;13.2.4.27 &lt;/span&gt;Script data escaped end tag name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escape-start-state&gt;&lt;span class=secno&gt;13.2.4.28 &lt;/span&gt;Script data double escape start state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-state&gt;&lt;span class=secno&gt;13.2.4.29 &lt;/span&gt;Script data double escaped state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-dash-state&gt;&lt;span class=secno&gt;13.2.4.30 &lt;/span&gt;Script data double escaped dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-dash-dash-state&gt;&lt;span class=secno&gt;13.2.4.31 &lt;/span&gt;Script data double escaped dash dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.32 &lt;/span&gt;Script data double escaped less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escape-end-state&gt;&lt;span class=secno&gt;13.2.4.33 &lt;/span&gt;Script data double escape end state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-attribute-name-state&gt;&lt;span class=secno&gt;13.2.4.34 &lt;/span&gt;Before attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-name-state&gt;&lt;span class=secno&gt;13.2.4.35 &lt;/span&gt;Attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-attribute-name-state&gt;&lt;span class=secno&gt;13.2.4.36 &lt;/span&gt;After attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-attribute-value-state&gt;&lt;span class=secno&gt;13.2.4.37 &lt;/span&gt;Before attribute value state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.38 &lt;/span&gt;Attribute value (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.39 &lt;/span&gt;Attribute value (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;13.2.4.40 &lt;/span&gt;Attribute value (unquoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;13.2.4.41 &lt;/span&gt;Character reference in attribute value state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;13.2.4.42 &lt;/span&gt;After attribute value (quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#self-closing-start-tag-state&gt;&lt;span class=secno&gt;13.2.4.43 &lt;/span&gt;Self-closing start tag state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#bogus-comment-state&gt;&lt;span class=secno&gt;13.2.4.44 &lt;/span&gt;Bogus comment state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#markup-declaration-open-state&gt;&lt;span class=secno&gt;13.2.4.45 &lt;/span&gt;Markup declaration open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-start-state&gt;&lt;span class=secno&gt;13.2.4.46 &lt;/span&gt;Comment start state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-start-dash-state&gt;&lt;span class=secno&gt;13.2.4.47 &lt;/span&gt;Comment start dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-state&gt;&lt;span class=secno&gt;13.2.4.48 &lt;/span&gt;Comment state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-dash-state&gt;&lt;span class=secno&gt;13.2.4.49 &lt;/span&gt;Comment end dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-state&gt;&lt;span class=secno&gt;13.2.4.50 &lt;/span&gt;Comment end state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-bang-state&gt;&lt;span class=secno&gt;13.2.4.51 &lt;/span&gt;Comment end bang state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-state&gt;&lt;span class=secno&gt;13.2.4.52 &lt;/span&gt;DOCTYPE state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-name-state&gt;&lt;span class=secno&gt;13.2.4.53 &lt;/span&gt;Before DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-name-state&gt;&lt;span class=secno&gt;13.2.4.54 &lt;/span&gt;DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-name-state&gt;&lt;span class=secno&gt;13.2.4.55 &lt;/span&gt;After DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;13.2.4.56 &lt;/span&gt;After DOCTYPE public keyword state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;13.2.4.57 &lt;/span&gt;Before DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.58 &lt;/span&gt;DOCTYPE public identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.59 &lt;/span&gt;DOCTYPE public identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;13.2.4.60 &lt;/span&gt;After DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;13.2.4.61 &lt;/span&gt;Between DOCTYPE public and system identifiers state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;13.2.4.62 &lt;/span&gt;After DOCTYPE system keyword state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;13.2.4.63 &lt;/span&gt;Before DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.64 &lt;/span&gt;DOCTYPE system identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.65 &lt;/span&gt;DOCTYPE system identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;13.2.4.66 &lt;/span&gt;After DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#bogus-doctype-state&gt;&lt;span class=secno&gt;13.2.4.67 &lt;/span&gt;Bogus DOCTYPE state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#cdata-section-state&gt;&lt;span class=secno&gt;13.2.4.68 &lt;/span&gt;CDATA section state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#tokenizing-character-references&gt;&lt;span class=secno&gt;13.2.4.69 &lt;/span&gt;Tokenizing character references&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#tree-construction&gt;&lt;span class=secno&gt;13.2.5 &lt;/span&gt;Tree construction&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#creating-and-inserting-elements&gt;&lt;span class=secno&gt;13.2.5.1 &lt;/span&gt;Creating and inserting elements&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#closing-elements-that-have-implied-end-tags&gt;&lt;span class=secno&gt;13.2.5.2 &lt;/span&gt;Closing elements that have implied end tags&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#foster-parenting&gt;&lt;span class=secno&gt;13.2.5.3 &lt;/span&gt;Foster parenting&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inhtml&gt;&lt;span class=secno&gt;13.2.5.4 &lt;/span&gt;The rules for parsing tokens in HTML content&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#the-initial-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.1 &lt;/span&gt;The &quot;initial&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-before-html-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.2 &lt;/span&gt;The &quot;before html&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-before-head-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.3 &lt;/span&gt;The &quot;before head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-inhead&gt;&lt;span class=secno&gt;11.2.5.4.4 &lt;/span&gt;The &quot;in head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;11.2.5.4.5 &lt;/span&gt;The &quot;in head noscript&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-after-head-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.6 &lt;/span&gt;The &quot;after head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-inbody&gt;&lt;span class=secno&gt;11.2.5.4.7 &lt;/span&gt;The &quot;in body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-incdata&gt;&lt;span class=secno&gt;11.2.5.4.8 &lt;/span&gt;The &quot;text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-intable&gt;&lt;span class=secno&gt;11.2.5.4.9 &lt;/span&gt;The &quot;in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-intabletext&gt;&lt;span class=secno&gt;11.2.5.4.10 &lt;/span&gt;The &quot;in table text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-incaption&gt;&lt;span class=secno&gt;11.2.5.4.11 &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-incolgroup&gt;&lt;span class=secno&gt;11.2.5.4.12 &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-intbody&gt;&lt;span class=secno&gt;11.2.5.4.13 &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-intr&gt;&lt;span class=secno&gt;11.2.5.4.14 &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-intd&gt;&lt;span class=secno&gt;11.2.5.4.15 &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-inselect&gt;&lt;span class=secno&gt;11.2.5.4.16 &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-inselectintable&gt;&lt;span class=secno&gt;11.2.5.4.17 &lt;/span&gt;The &quot;in select in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-afterbody&gt;&lt;span class=secno&gt;11.2.5.4.18 &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-inframeset&gt;&lt;span class=secno&gt;11.2.5.4.19 &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#parsing-main-afterframeset&gt;&lt;span class=secno&gt;11.2.5.4.20 &lt;/span&gt;The &quot;after frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.21 &lt;/span&gt;The &quot;after after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.22 &lt;/span&gt;The &quot;after after frameset&quot; insertion mode&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inforeign&gt;&lt;span class=secno&gt;11.2.5.5 &lt;/span&gt;The rules for parsing tokens in foreign content&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-end&gt;&lt;span class=secno&gt;11.2.6 &lt;/span&gt;The end&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#coercing-an-html-dom-into-an-infoset&gt;&lt;span class=secno&gt;11.2.7 &lt;/span&gt;Coercing an HTML DOM into an infoset&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#an-introduction-to-error-handling-and-strange-cases-in-the-parser&gt;&lt;span class=secno&gt;11.2.8 &lt;/span&gt;An introduction to error handling and strange cases in the parser&lt;/a&gt;
+         &lt;li&gt;&lt;a href=#the-initial-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.1 &lt;/span&gt;The &quot;initial&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-before-html-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.2 &lt;/span&gt;The &quot;before html&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-before-head-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.3 &lt;/span&gt;The &quot;before head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inhead&gt;&lt;span class=secno&gt;13.2.5.4.4 &lt;/span&gt;The &quot;in head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;13.2.5.4.5 &lt;/span&gt;The &quot;in head noscript&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-head-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.6 &lt;/span&gt;The &quot;after head&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inbody&gt;&lt;span class=secno&gt;13.2.5.4.7 &lt;/span&gt;The &quot;in body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incdata&gt;&lt;span class=secno&gt;13.2.5.4.8 &lt;/span&gt;The &quot;text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intable&gt;&lt;span class=secno&gt;13.2.5.4.9 &lt;/span&gt;The &quot;in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intabletext&gt;&lt;span class=secno&gt;13.2.5.4.10 &lt;/span&gt;The &quot;in table text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incaption&gt;&lt;span class=secno&gt;13.2.5.4.11 &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-incolgroup&gt;&lt;span class=secno&gt;13.2.5.4.12 &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intbody&gt;&lt;span class=secno&gt;13.2.5.4.13 &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intr&gt;&lt;span class=secno&gt;13.2.5.4.14 &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-intd&gt;&lt;span class=secno&gt;13.2.5.4.15 &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inselect&gt;&lt;span class=secno&gt;13.2.5.4.16 &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inselectintable&gt;&lt;span class=secno&gt;13.2.5.4.17 &lt;/span&gt;The &quot;in select in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-afterbody&gt;&lt;span class=secno&gt;13.2.5.4.18 &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-inframeset&gt;&lt;span class=secno&gt;13.2.5.4.19 &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#parsing-main-afterframeset&gt;&lt;span class=secno&gt;13.2.5.4.20 &lt;/span&gt;The &quot;after frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.21 &lt;/span&gt;The &quot;after after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.22 &lt;/span&gt;The &quot;after after frameset&quot; insertion mode&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inforeign&gt;&lt;span class=secno&gt;13.2.5.5 &lt;/span&gt;The rules for parsing tokens in foreign content&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-end&gt;&lt;span class=secno&gt;13.2.6 &lt;/span&gt;The end&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#coercing-an-html-dom-into-an-infoset&gt;&lt;span class=secno&gt;13.2.7 &lt;/span&gt;Coercing an HTML DOM into an infoset&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#an-introduction-to-error-handling-and-strange-cases-in-the-parser&gt;&lt;span class=secno&gt;13.2.8 &lt;/span&gt;An introduction to error handling and strange cases in the parser&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#misnested-tags:-b-i-/b-/i&gt;&lt;span class=secno&gt;11.2.8.1 &lt;/span&gt;Misnested tags: &lt;b&gt;&lt;i&gt;&lt;/b&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#misnested-tags:-b-p-/b-/p&gt;&lt;span class=secno&gt;11.2.8.2 &lt;/span&gt;Misnested tags: &lt;b&gt;&lt;p&gt;&lt;/b&gt;&lt;/p&gt;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#unexpected-markup-in-tables&gt;&lt;span class=secno&gt;11.2.8.3 &lt;/span&gt;Unexpected markup in tables&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#scripts-that-modify-the-page-as-it-is-being-parsed&gt;&lt;span class=secno&gt;11.2.8.4 &lt;/span&gt;Scripts that modify the page as it is being parsed&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-execution-of-scripts-that-are-moving-across-multiple-documents&gt;&lt;span class=secno&gt;11.2.8.5 &lt;/span&gt;The execution of scripts that are moving across multiple documents&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#unclosed-formatting-elements&gt;&lt;span class=secno&gt;11.2.8.6 &lt;/span&gt;Unclosed formatting elements&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#serializing-html-fragments&gt;&lt;span class=secno&gt;11.3 &lt;/span&gt;Serializing HTML fragments&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#parsing-html-fragments&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Parsing HTML fragments&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#named-character-references&gt;&lt;span class=secno&gt;11.5 &lt;/span&gt;Named character references&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
- &lt;li&gt;&lt;a href=#the-xhtml-syntax&gt;&lt;span class=secno&gt;12 &lt;/span&gt;The XHTML syntax&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#misnested-tags:-b-i-/b-/i&gt;&lt;span class=secno&gt;13.2.8.1 &lt;/span&gt;Misnested tags: &lt;b&gt;&lt;i&gt;&lt;/b&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#misnested-tags:-b-p-/b-/p&gt;&lt;span class=secno&gt;13.2.8.2 &lt;/span&gt;Misnested tags: &lt;b&gt;&lt;p&gt;&lt;/b&gt;&lt;/p&gt;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#unexpected-markup-in-tables&gt;&lt;span class=secno&gt;13.2.8.3 &lt;/span&gt;Unexpected markup in tables&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#scripts-that-modify-the-page-as-it-is-being-parsed&gt;&lt;span class=secno&gt;13.2.8.4 &lt;/span&gt;Scripts that modify the page as it is being parsed&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-execution-of-scripts-that-are-moving-across-multiple-documents&gt;&lt;span class=secno&gt;13.2.8.5 &lt;/span&gt;The execution of scripts that are moving across multiple documents&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#unclosed-formatting-elements&gt;&lt;span class=secno&gt;13.2.8.6 &lt;/span&gt;Unclosed formatting elements&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#serializing-html-fragments&gt;&lt;span class=secno&gt;13.3 &lt;/span&gt;Serializing HTML fragments&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#parsing-html-fragments&gt;&lt;span class=secno&gt;13.4 &lt;/span&gt;Parsing HTML fragments&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#named-character-references&gt;&lt;span class=secno&gt;13.5 &lt;/span&gt;Named character references&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+ &lt;li&gt;&lt;a href=#the-xhtml-syntax&gt;&lt;span class=secno&gt;14 &lt;/span&gt;The XHTML syntax&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#writing-xhtml-documents&gt;&lt;span class=secno&gt;12.1 &lt;/span&gt;Writing XHTML documents&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#parsing-xhtml-documents&gt;&lt;span class=secno&gt;12.2 &lt;/span&gt;Parsing XHTML documents&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#serializing-xhtml-fragments&gt;&lt;span class=secno&gt;12.3 &lt;/span&gt;Serializing XHTML fragments&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#parsing-xhtml-fragments&gt;&lt;span class=secno&gt;12.4 &lt;/span&gt;Parsing XHTML fragments&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
- &lt;li&gt;&lt;a href=#rendering&gt;&lt;span class=secno&gt;13 &lt;/span&gt;Rendering&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#writing-xhtml-documents&gt;&lt;span class=secno&gt;14.1 &lt;/span&gt;Writing XHTML documents&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#parsing-xhtml-documents&gt;&lt;span class=secno&gt;14.2 &lt;/span&gt;Parsing XHTML documents&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#serializing-xhtml-fragments&gt;&lt;span class=secno&gt;14.3 &lt;/span&gt;Serializing XHTML fragments&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#parsing-xhtml-fragments&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Parsing XHTML fragments&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+ &lt;li&gt;&lt;a href=#rendering&gt;&lt;span class=secno&gt;15 &lt;/span&gt;Rendering&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#introduction-15&gt;&lt;span class=secno&gt;13.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;13.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#non-replaced-elements&gt;&lt;span class=secno&gt;13.3 &lt;/span&gt;Non-replaced elements&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#introduction-17&gt;&lt;span class=secno&gt;15.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;15.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#non-replaced-elements&gt;&lt;span class=secno&gt;15.3 &lt;/span&gt;Non-replaced elements&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#hidden-elements&gt;&lt;span class=secno&gt;13.3.1 &lt;/span&gt;Hidden elements&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-page&gt;&lt;span class=secno&gt;13.3.2 &lt;/span&gt;The page&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#flow-content-1&gt;&lt;span class=secno&gt;13.3.3 &lt;/span&gt;Flow content&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#phrasing-content-1&gt;&lt;span class=secno&gt;13.3.4 &lt;/span&gt;Phrasing content&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#bidirectional-text&gt;&lt;span class=secno&gt;13.3.5 &lt;/span&gt;Bidirectional text&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#sections-and-headings&gt;&lt;span class=secno&gt;13.3.6 &lt;/span&gt;Sections and headings&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#lists&gt;&lt;span class=secno&gt;13.3.7 &lt;/span&gt;Lists&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#tables&gt;&lt;span class=secno&gt;13.3.8 &lt;/span&gt;Tables&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#form-controls&gt;&lt;span class=secno&gt;13.3.9 &lt;/span&gt;Form controls&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-hr-element-0&gt;&lt;span class=secno&gt;13.3.10 &lt;/span&gt;The &lt;code&gt;hr&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-fieldset-element-0&gt;&lt;span class=secno&gt;13.3.11 &lt;/span&gt;The &lt;code&gt;fieldset&lt;/code&gt; element&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#replaced-elements&gt;&lt;span class=secno&gt;13.4 &lt;/span&gt;Replaced elements&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#hidden-elements&gt;&lt;span class=secno&gt;15.3.1 &lt;/span&gt;Hidden elements&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-page&gt;&lt;span class=secno&gt;15.3.2 &lt;/span&gt;The page&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#flow-content-1&gt;&lt;span class=secno&gt;15.3.3 &lt;/span&gt;Flow content&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#phrasing-content-1&gt;&lt;span class=secno&gt;15.3.4 &lt;/span&gt;Phrasing content&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#bidirectional-text&gt;&lt;span class=secno&gt;15.3.5 &lt;/span&gt;Bidirectional text&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#sections-and-headings&gt;&lt;span class=secno&gt;15.3.6 &lt;/span&gt;Sections and headings&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#lists&gt;&lt;span class=secno&gt;15.3.7 &lt;/span&gt;Lists&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#tables&gt;&lt;span class=secno&gt;15.3.8 &lt;/span&gt;Tables&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#form-controls&gt;&lt;span class=secno&gt;15.3.9 &lt;/span&gt;Form controls&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-hr-element-0&gt;&lt;span class=secno&gt;15.3.10 &lt;/span&gt;The &lt;code&gt;hr&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-fieldset-element-0&gt;&lt;span class=secno&gt;15.3.11 &lt;/span&gt;The &lt;code&gt;fieldset&lt;/code&gt; element&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#replaced-elements&gt;&lt;span class=secno&gt;15.4 &lt;/span&gt;Replaced elements&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#embedded-content-2&gt;&lt;span class=secno&gt;13.4.1 &lt;/span&gt;Embedded content&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#timed-text-tracks-0&gt;&lt;span class=secno&gt;13.4.2 &lt;/span&gt;Timed text tracks&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#embedded-content-2&gt;&lt;span class=secno&gt;15.4.1 &lt;/span&gt;Embedded content&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#timed-text-tracks-0&gt;&lt;span class=secno&gt;15.4.2 &lt;/span&gt;Timed text tracks&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#webvtt-cue-text-rendering-rules&gt;&lt;span class=secno&gt;13.4.2.1 &lt;/span&gt;WebVTT cue text rendering rules&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#applying-css-properties-to-webvtt-node-objects&gt;&lt;span class=secno&gt;13.4.2.2 &lt;/span&gt;Applying CSS properties to WebVTT Node Objects&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#css-extensions&gt;&lt;span class=secno&gt;13.4.2.3 &lt;/span&gt;CSS extensions&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#webvtt-cue-text-rendering-rules&gt;&lt;span class=secno&gt;15.4.2.1 &lt;/span&gt;WebVTT cue text rendering rules&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#applying-css-properties-to-webvtt-node-objects&gt;&lt;span class=secno&gt;15.4.2.2 &lt;/span&gt;Applying CSS properties to WebVTT Node Objects&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#css-extensions&gt;&lt;span class=secno&gt;15.4.2.3 &lt;/span&gt;CSS extensions&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=&quot;#the-'::cue'-pseudo-element&quot;&gt;&lt;span class=secno&gt;13.4.2.3.1 &lt;/span&gt;The '::cue' pseudo-element&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=&quot;#the-':past'-and-':future'-pseudo-classes&quot;&gt;&lt;span class=secno&gt;13.4.2.3.2 &lt;/span&gt;The ':past' and ':future' pseudo-classes&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#images-0&gt;&lt;span class=secno&gt;13.4.3 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;13.4.4 &lt;/span&gt;Attributes for embedded content and images&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;13.4.5 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;13.4.6 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#bindings&gt;&lt;span class=secno&gt;13.5 &lt;/span&gt;Bindings&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-'::cue'-pseudo-element&quot;&gt;&lt;span class=secno&gt;15.4.2.3.1 &lt;/span&gt;The '::cue' pseudo-element&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-':past'-and-':future'-pseudo-classes&quot;&gt;&lt;span class=secno&gt;15.4.2.3.2 &lt;/span&gt;The ':past' and ':future' pseudo-classes&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#images-0&gt;&lt;span class=secno&gt;15.4.3 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;15.4.4 &lt;/span&gt;Attributes for embedded content and images&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;15.4.5 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;15.4.6 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#bindings&gt;&lt;span class=secno&gt;15.5 &lt;/span&gt;Bindings&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-16&gt;&lt;span class=secno&gt;13.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-button-element-0&gt;&lt;span class=secno&gt;13.5.2 &lt;/span&gt;The &lt;code&gt;button&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-details-element-0&gt;&lt;span class=secno&gt;13.5.3 &lt;/span&gt;The &lt;code&gt;details&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-input-element-as-a-text-entry-widget&gt;&lt;span class=secno&gt;13.5.4 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a text entry widget&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-input-element-as-domain-specific-widgets&gt;&lt;span class=secno&gt;13.5.5 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as domain-specific widgets&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-input-element-as-a-range-control&gt;&lt;span class=secno&gt;13.5.6 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a range control&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-input-element-as-a-color-well&gt;&lt;span class=secno&gt;13.5.7 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a color well&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-input-element-as-a-checkbox-and-radio-button-widgets&gt;&lt;span class=secno&gt;13.5.8 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a checkbox and radio button widgets&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-input-element-as-a-file-upload-control&gt;&lt;span class=secno&gt;13.5.9 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a file upload control&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-input-element-as-a-button&gt;&lt;span class=secno&gt;13.5.10 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a button&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-marquee-element-0&gt;&lt;span class=secno&gt;13.5.11 &lt;/span&gt;The &lt;code&gt;marquee&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-meter-element-0&gt;&lt;span class=secno&gt;13.5.12 &lt;/span&gt;The &lt;code&gt;meter&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-progress-element-0&gt;&lt;span class=secno&gt;13.5.13 &lt;/span&gt;The &lt;code&gt;progress&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-select-element-0&gt;&lt;span class=secno&gt;13.5.14 &lt;/span&gt;The &lt;code&gt;select&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-textarea-element-0&gt;&lt;span class=secno&gt;13.5.15 &lt;/span&gt;The &lt;code&gt;textarea&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-keygen-element-0&gt;&lt;span class=secno&gt;13.5.16 &lt;/span&gt;The &lt;code&gt;keygen&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-time-element-0&gt;&lt;span class=secno&gt;13.5.17 &lt;/span&gt;The &lt;code&gt;time&lt;/code&gt; element&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#frames-and-framesets&gt;&lt;span class=secno&gt;13.6 &lt;/span&gt;Frames and framesets&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#interactive-media&gt;&lt;span class=secno&gt;13.7 &lt;/span&gt;Interactive media&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#introduction-18&gt;&lt;span class=secno&gt;15.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-button-element-0&gt;&lt;span class=secno&gt;15.5.2 &lt;/span&gt;The &lt;code&gt;button&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-details-element-0&gt;&lt;span class=secno&gt;15.5.3 &lt;/span&gt;The &lt;code&gt;details&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-input-element-as-a-text-entry-widget&gt;&lt;span class=secno&gt;15.5.4 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a text entry widget&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-input-element-as-domain-specific-widgets&gt;&lt;span class=secno&gt;15.5.5 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as domain-specific widgets&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-input-element-as-a-range-control&gt;&lt;span class=secno&gt;15.5.6 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a range control&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-input-element-as-a-color-well&gt;&lt;span class=secno&gt;15.5.7 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a color well&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-input-element-as-a-checkbox-and-radio-button-widgets&gt;&lt;span class=secno&gt;15.5.8 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a checkbox and radio button widgets&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-input-element-as-a-file-upload-control&gt;&lt;span class=secno&gt;15.5.9 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a file upload control&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-input-element-as-a-button&gt;&lt;span class=secno&gt;15.5.10 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a button&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-marquee-element-0&gt;&lt;span class=secno&gt;15.5.11 &lt;/span&gt;The &lt;code&gt;marquee&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-meter-element-0&gt;&lt;span class=secno&gt;15.5.12 &lt;/span&gt;The &lt;code&gt;meter&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-progress-element-0&gt;&lt;span class=secno&gt;15.5.13 &lt;/span&gt;The &lt;code&gt;progress&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-select-element-0&gt;&lt;span class=secno&gt;15.5.14 &lt;/span&gt;The &lt;code&gt;select&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-textarea-element-0&gt;&lt;span class=secno&gt;15.5.15 &lt;/span&gt;The &lt;code&gt;textarea&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-keygen-element-0&gt;&lt;span class=secno&gt;15.5.16 &lt;/span&gt;The &lt;code&gt;keygen&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-time-element-0&gt;&lt;span class=secno&gt;15.5.17 &lt;/span&gt;The &lt;code&gt;time&lt;/code&gt; element&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#frames-and-framesets&gt;&lt;span class=secno&gt;15.6 &lt;/span&gt;Frames and framesets&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#interactive-media&gt;&lt;span class=secno&gt;15.7 &lt;/span&gt;Interactive media&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#links,-forms,-and-navigation&gt;&lt;span class=secno&gt;13.7.1 &lt;/span&gt;Links, forms, and navigation&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-title-attribute-0&gt;&lt;span class=secno&gt;13.7.2 &lt;/span&gt;The &lt;code title=attr-title&gt;title&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#editing-hosts&gt;&lt;span class=secno&gt;13.7.3 &lt;/span&gt;Editing hosts&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#text-rendered-in-native-user-interfaces&gt;&lt;span class=secno&gt;13.7.4 &lt;/span&gt;Text rendered in native user interfaces&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#print-media&gt;&lt;span class=secno&gt;13.8 &lt;/span&gt;Print media&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
- &lt;li&gt;&lt;a href=#obsolete&gt;&lt;span class=secno&gt;14 &lt;/span&gt;Obsolete features&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#links,-forms,-and-navigation&gt;&lt;span class=secno&gt;15.7.1 &lt;/span&gt;Links, forms, and navigation&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-title-attribute-0&gt;&lt;span class=secno&gt;15.7.2 &lt;/span&gt;The &lt;code title=attr-title&gt;title&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#editing-hosts&gt;&lt;span class=secno&gt;15.7.3 &lt;/span&gt;Editing hosts&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#text-rendered-in-native-user-interfaces&gt;&lt;span class=secno&gt;15.7.4 &lt;/span&gt;Text rendered in native user interfaces&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#print-media&gt;&lt;span class=secno&gt;15.8 &lt;/span&gt;Print media&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+ &lt;li&gt;&lt;a href=#obsolete&gt;&lt;span class=secno&gt;16 &lt;/span&gt;Obsolete features&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#obsolete-but-conforming-features&gt;&lt;span class=secno&gt;14.1 &lt;/span&gt;Obsolete but conforming features&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#obsolete-but-conforming-features&gt;&lt;span class=secno&gt;16.1 &lt;/span&gt;Obsolete but conforming features&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#warnings-for-obsolete-but-conforming-features&gt;&lt;span class=secno&gt;14.1.1 &lt;/span&gt;Warnings for obsolete but conforming features&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#non-conforming-features&gt;&lt;span class=secno&gt;14.2 &lt;/span&gt;Non-conforming features&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#requirements-for-implementations&gt;&lt;span class=secno&gt;14.3 &lt;/span&gt;Requirements for implementations&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#warnings-for-obsolete-but-conforming-features&gt;&lt;span class=secno&gt;16.1.1 &lt;/span&gt;Warnings for obsolete but conforming features&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#non-conforming-features&gt;&lt;span class=secno&gt;16.2 &lt;/span&gt;Non-conforming features&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#requirements-for-implementations&gt;&lt;span class=secno&gt;16.3 &lt;/span&gt;Requirements for implementations&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#the-applet-element&gt;&lt;span class=secno&gt;14.3.1 &lt;/span&gt;The &lt;code&gt;applet&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-marquee-element&gt;&lt;span class=secno&gt;14.3.2 &lt;/span&gt;The &lt;code&gt;marquee&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#frames&gt;&lt;span class=secno&gt;14.3.3 &lt;/span&gt;Frames&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#other-elements,-attributes-and-apis&gt;&lt;span class=secno&gt;14.3.4 &lt;/span&gt;Other elements, attributes and APIs&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
- &lt;li&gt;&lt;a href=#iana&gt;&lt;span class=secno&gt;15 &lt;/span&gt;IANA considerations&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#the-applet-element&gt;&lt;span class=secno&gt;16.3.1 &lt;/span&gt;The &lt;code&gt;applet&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-marquee-element&gt;&lt;span class=secno&gt;16.3.2 &lt;/span&gt;The &lt;code&gt;marquee&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#frames&gt;&lt;span class=secno&gt;16.3.3 &lt;/span&gt;Frames&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#other-elements,-attributes-and-apis&gt;&lt;span class=secno&gt;16.3.4 &lt;/span&gt;Other elements, attributes and APIs&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+ &lt;li&gt;&lt;a href=#iana&gt;&lt;span class=secno&gt;17 &lt;/span&gt;IANA considerations&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#text/html&gt;&lt;span class=secno&gt;15.1 &lt;/span&gt;&lt;code&gt;text/html&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#text/html-sandboxed&gt;&lt;span class=secno&gt;15.2 &lt;/span&gt;&lt;code&gt;text/html-sandboxed&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#multipart/x-mixed-replace&gt;&lt;span class=secno&gt;15.3 &lt;/span&gt;&lt;code&gt;multipart/x-mixed-replace&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#application/xhtml+xml&gt;&lt;span class=secno&gt;15.4 &lt;/span&gt;&lt;code&gt;application/xhtml+xml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#application/x-www-form-urlencoded&gt;&lt;span class=secno&gt;15.5 &lt;/span&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#text/cache-manifest&gt;&lt;span class=secno&gt;15.6 &lt;/span&gt;&lt;code&gt;text/cache-manifest&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#text/ping&gt;&lt;span class=secno&gt;15.7 &lt;/span&gt;&lt;code&gt;text/ping&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#text/vtt&gt;&lt;span class=secno&gt;15.8 &lt;/span&gt;&lt;code&gt;text/vtt&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#application/microdata+json&gt;&lt;span class=secno&gt;15.9 &lt;/span&gt;&lt;code&gt;application/microdata+json&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#application/html-peer-connection-data&gt;&lt;span class=secno&gt;15.10 &lt;/span&gt;&lt;code&gt;application/html-peer-connection-data&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#ping-from&gt;&lt;span class=secno&gt;15.11 &lt;/span&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#ping-to&gt;&lt;span class=secno&gt;15.12 &lt;/span&gt;&lt;code&gt;Ping-To&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#web+-scheme-prefix&gt;&lt;span class=secno&gt;15.13 &lt;/span&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#text/html&gt;&lt;span class=secno&gt;17.1 &lt;/span&gt;&lt;code&gt;text/html&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#text/html-sandboxed&gt;&lt;span class=secno&gt;17.2 &lt;/span&gt;&lt;code&gt;text/html-sandboxed&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#multipart/x-mixed-replace&gt;&lt;span class=secno&gt;17.3 &lt;/span&gt;&lt;code&gt;multipart/x-mixed-replace&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#application/xhtml+xml&gt;&lt;span class=secno&gt;17.4 &lt;/span&gt;&lt;code&gt;application/xhtml+xml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#application/x-www-form-urlencoded&gt;&lt;span class=secno&gt;17.5 &lt;/span&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#text/cache-manifest&gt;&lt;span class=secno&gt;17.6 &lt;/span&gt;&lt;code&gt;text/cache-manifest&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#text/ping&gt;&lt;span class=secno&gt;17.7 &lt;/span&gt;&lt;code&gt;text/ping&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#text/vtt&gt;&lt;span class=secno&gt;17.8 &lt;/span&gt;&lt;code&gt;text/vtt&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#application/microdata+json&gt;&lt;span class=secno&gt;17.9 &lt;/span&gt;&lt;code&gt;application/microdata+json&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#application/html-peer-connection-data&gt;&lt;span class=secno&gt;17.10 &lt;/span&gt;&lt;code&gt;application/html-peer-connection-data&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#ping-from&gt;&lt;span class=secno&gt;17.11 &lt;/span&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#ping-to&gt;&lt;span class=secno&gt;17.12 &lt;/span&gt;&lt;code&gt;Ping-To&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#web+-scheme-prefix&gt;&lt;span class=secno&gt;17.13 &lt;/span&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a class=no-num href=#index&gt;Index&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a class=no-num href=#elements-1&gt;Elements&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a class=no-num href=#element-content-categories&gt;Element content categories&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a class=no-num href=#attributes-1&gt;Attributes&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a class=no-num href=#interfaces&gt;Interfaces&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a class=no-num href=#events-0&gt;Events&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a class=no-num href=#interfaces&gt;Interfaces&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a class=no-num href=#references&gt;References&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a class=no-num href=#acknowledgements&gt;Acknowledgements&lt;/a&gt;&lt;/ol&gt;
 &lt;!--end-toc--&gt;
@@ -1307,19 +1397,19 @@
 
   &lt;p&gt;The WHATWG work is all published in one specification
 
+  (the one you are reading right now),
 
-  (known as &quot;&lt;a href=<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete/">http://www.whatwg.org/specs/web-apps/current-work/complete/</A>&gt;Web Applications 1.0&lt;/a&gt;&quot;),
 
   parts of which are republished in a variety of other forms,
   including an edition optimized for Web developers
 
-  (known as &lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;HTML5&lt;/a&gt;),
+  (known as &lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;HTML5&lt;/a&gt;).
 
 
-  and one which focuses mainly on the core HTML language
+  &lt;!-- and one which focuses mainly on the core HTML language --&gt;
 
+  &lt;!-- (known as the &lt;a href=&quot;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/">http://www.whatwg.org/specs/web-apps/current-work/multipage/</A>&quot;&gt;HTML Living Standard&lt;/a&gt;). --&gt;
 
-  (which you are reading right now).
 
   In addition, two subparts of the specification are republished as
   separate documents, for ease of reference:
@@ -1331,7 +1421,6 @@
   &lt;p&gt;The W3C also publishes parts of this specification as separate
   documents. One of these parts is called &quot;HTML5&quot;; it is a subset of
 
-
   this specification (the HTML Living Standard).
 
   &lt;/p&gt;
@@ -1350,6 +1439,7 @@
   a whole reach a more mature state.&lt;/p&gt;
 --&gt;
 
+
   &lt;h6 class=no-toc id=how-do-the-whatwg-and-w3c-specifications-differ?&gt;&lt;span class=secno&gt;1.1.1 &lt;/span&gt;How do the WHATWG and W3C specifications differ?&lt;/h6&gt;
 
   &lt;p&gt;The features present in both the WHATWG and W3C specifications
@@ -1634,8 +1724,8 @@
 
 
   &lt;p&gt;A separate document has been published by the W3C HTML working
-  group to document the differences between this specification and the
-  language described in the HTML4 specification. &lt;a href=#refsHTMLDIFF&gt;[HTMLDIFF]&lt;/a&gt;&lt;/p&gt;
+  group to document the differences between the HTML specified in this
+  document and the language described in the HTML4 specification. &lt;a href=#refsHTMLDIFF&gt;[HTMLDIFF]&lt;/a&gt;&lt;/p&gt;
 
 
 
@@ -1670,7 +1760,7 @@
   &lt;p&gt;To avoid exposing Web authors to the complexities of
   multithreading, the HTML and DOM APIs are designed such that no
   script can ever detect the simultaneous execution of other
-  scripts. Even with &lt;span title=Worker&gt;workers&lt;/span&gt;, the intent
+  scripts. Even with &lt;a href=#worker title=Worker&gt;workers&lt;/a&gt;, the intent
   is that the behavior of implementations can be thought of as
   completely serializing the execution of all scripts in all &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;.&lt;/p&gt;
 
@@ -1806,13 +1896,29 @@
    section.&lt;/dd&gt;
 
 
+   &lt;dt&gt;&lt;a href=#workers&gt;Web workers&lt;/a&gt;&lt;/dt&gt;
 
+   &lt;dd&gt;This specification defines an API for background threads in
+   JavaScript.&lt;/dd&gt;
+
+
+
+   &lt;dt&gt;&lt;a href=#webstorage&gt;Web storage&lt;/a&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;This specification defines a client-side storage mechanism
+   based on name-value pairs.&lt;/dd&gt;
+
+
 &lt;!--POSTMSG--&gt;
    &lt;dt&gt;&lt;a href=#comms&gt;The communication APIs&lt;/a&gt;&lt;/dt&gt;
 
    &lt;dd&gt;This section describes some mechanisms that applications
    written in HTML can use to communicate with other applications from
    different domains running on the same client.
+
+   It also introduces a server-push event stream mechanism, and a
+   two-way full-duplex socket protocol for scripts.
+
    &lt;/dd&gt;
 &lt;!--POSTMSG--&gt;
 
@@ -3928,6 +4034,39 @@
    &lt;/dd&gt;
 
 
+
+   &lt;dt&gt;The WebSocket protocol&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;div data-component=&quot;WebSocket API (editor: Ian Hickson)&quot;&gt;&lt;!--websocket-api--&gt;
+
+    &lt;p&gt;The following terms are defined in the WebSocket protocol
+    specification: &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;&lt;dfn id=&quot;parse-a-websocket-url's-components&quot;&gt;parse a WebSocket URL's components&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=&quot;validate-the-server's-response&quot;&gt;validate the server's response&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=extensions-in-use&gt;extensions in use&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=subprotocol-in-use&gt;subprotocol in use&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=headers-to-send-appropriate-cookies&gt;headers to send appropriate cookies&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=&quot;cookies-set-during-the-server's-opening-handshake&quot;&gt;cookies set during the server's opening handshake&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=a-websocket-message-has-been-received&gt;a WebSocket message has been received&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=close-the-websocket-connection&gt;close the WebSocket connection&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=start-the-websocket-closing-handshake&gt;start the WebSocket closing handshake&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=the-websocket-closing-handshake-is-started&gt;the WebSocket closing handshake is started&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/dfn&gt; (possibly &lt;i title=&quot;&quot;&gt;cleanly&lt;/i&gt;)
+     &lt;li&gt;&lt;dfn id=the-websocket-connection-close-code&gt;the WebSocket connection close code&lt;/dfn&gt;
+     &lt;li&gt;&lt;dfn id=the-websocket-connection-close-reason&gt;the WebSocket connection close reason&lt;/dfn&gt;
+
+    &lt;/ul&gt;&lt;/div&gt;&lt;!--data-component--&gt;
+
+   &lt;/dd&gt;
+
+
+
   &lt;/dl&gt;&lt;p&gt;This specification does not &lt;em&gt;require&lt;/em&gt; support of any
   particular network protocol, style sheet language, scripting
   language, or any of the DOM specifications beyond those described
@@ -12701,7 +12840,7 @@
    &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#history-0&gt;History&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#navigator&gt;Navigator&lt;/a&gt;&lt;/code&gt;, objects,
    the various &lt;code&gt;&lt;a href=#barprop&gt;BarProp&lt;/a&gt;&lt;/code&gt; objects, the two
-   &lt;code&gt;Storage&lt;/code&gt; objects, the various
+   &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; objects, the various
    &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; objects, and objects defined by other
    specifications, like &lt;code&gt;Selection&lt;/code&gt; and the document's
    &lt;code&gt;UndoManager&lt;/code&gt;. It also includes all the Web IDL
@@ -18893,7 +19032,7 @@
    &lt;dt&gt;Contexts in which this element can be used:&lt;/dt&gt;
    &lt;dd&gt;Before &lt;code&gt;&lt;a href=#the-dd-element&gt;dd&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-dt-element&gt;dt&lt;/a&gt;&lt;/code&gt; elements inside &lt;code&gt;&lt;a href=#the-dl-element&gt;dl&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
    &lt;dt&gt;Content model:&lt;/dt&gt;
-   &lt;dd&gt;&lt;a href=#phrasing-content&gt;Phrasing content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;, but with no &lt;code&gt;&lt;a href=#the-header-element&gt;header&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-footer-element&gt;footer&lt;/a&gt;&lt;/code&gt;, &lt;a href=#sectioning-content&gt;sectioning content&lt;/a&gt;, or &lt;a href=#heading-content&gt;heading content&lt;/a&gt; descendants.&lt;/dd&gt;
    &lt;dt&gt;Content attributes:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dt&gt;DOM interface:&lt;/dt&gt;
@@ -23870,10 +24009,7 @@
 
     &lt;p&gt;This flag also &lt;a href=#sandboxCookies&gt;prevents script from
     reading from or writing to the &lt;code title=dom-document-cookie&gt;document.cookie&lt;/code&gt; IDL
-    attribute&lt;/a&gt;, and blocks access to &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt;.
-    
-    &lt;a href=#refsWEBSTORAGE&gt;[WEBSTORAGE]&lt;/a&gt;
-    
+    attribute&lt;/a&gt;, and blocks access to &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt;.
     &lt;/p&gt;
 
     &lt;div class=note&gt;
@@ -40258,7 +40394,8 @@
    &lt;dt&gt;Contexts in which this element can be used:&lt;/dt&gt;
    &lt;dd&gt;As a child of a &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element.&lt;/dd&gt;
    &lt;dt&gt;Content model:&lt;/dt&gt;
-   &lt;dd&gt;&lt;a href=#phrasing-content&gt;Phrasing content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;, but with no &lt;code&gt;&lt;a href=#the-header-element&gt;header&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-footer-element&gt;footer&lt;/a&gt;&lt;/code&gt;, &lt;a href=#sectioning-content&gt;sectioning content&lt;/a&gt;, or &lt;a href=#heading-content&gt;heading content&lt;/a&gt; descendants.&lt;/dd&gt;
+   &lt;!-- EDITING NOTE: If you remove 'heading content' from the list above, make sure to fix the definition of 'sectioning root' to include &lt;th&gt; --&gt;
    &lt;dt&gt;Content attributes:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-tdth-colspan&gt;&lt;a href=#attr-tdth-colspan&gt;colspan&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
@@ -62557,7 +62694,7 @@
    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p class=note&gt;Whenever a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object is &lt;a href=#discard-a-document title=&quot;discard a Document&quot;&gt;discarded&lt;/a&gt;, it is also removed from
-  the list of &lt;span&gt;the worker's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s&lt;/span&gt; of each
+  the list of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; of each
   worker whose list contains that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;When &lt;dfn id=a-browsing-context-is-discarded&gt;a &lt;em&gt;&lt;span&gt;browsing context&lt;/span&gt;&lt;/em&gt; is
@@ -65549,17 +65686,14 @@
 
   &lt;ol&gt;&lt;li&gt;
 
-    &lt;p&gt;&lt;span&gt;Make disappear&lt;/span&gt; any &lt;code&gt;WebSocket&lt;/code&gt; objects
-    that were created by the &lt;code title=dom-WebSocket&gt;WebSocket()&lt;/code&gt; constructor whose global
+    &lt;p&gt;&lt;a href=#make-disappear&gt;Make disappear&lt;/a&gt; any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects
+    that were created by the &lt;code title=dom-WebSocket&gt;&lt;a href=#dom-websocket&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor whose global
     object is the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.
 
 
-    &lt;a href=#refsWEBSOCKET&gt;[WEBSOCKET]&lt;/a&gt;
-
-
     &lt;/p&gt;
 
-    &lt;p&gt;If this affected any &lt;code&gt;WebSocket&lt;/code&gt; objects, the set
+    &lt;p&gt;If this affected any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects, the set
     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;var title=concept-document-salvageable&gt;&lt;a href=#concept-document-salvageable&gt;salvageable&lt;/a&gt;&lt;/var&gt; state to
     false.&lt;/p&gt;
 
@@ -65974,23 +66108,17 @@
   group&quot;&gt;application cache groups&lt;/a&gt; exist.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;A &lt;dfn id=cache-host&gt;cache host&lt;/dfn&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; or a
-  &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object. A &lt;a href=#cache-host&gt;cache
+  &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object. A &lt;a href=#cache-host&gt;cache
   host&lt;/a&gt; can be associated with an &lt;a href=#application-cache&gt;application
   cache&lt;/a&gt;.
-  
-  &lt;a href=#refsWEBWORKERS&gt;[WEBWORKERS]&lt;/a&gt;
-  
   &lt;/p&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; initially is not associated with an
   &lt;a href=#application-cache&gt;application cache&lt;/a&gt;, but can become associated with one
   early during the page load process, when steps &lt;a href=#parser-appcache&gt;in the parser&lt;/a&gt; and in the &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; sections cause &lt;a href=#concept-appcache-init title=concept-appcache-init&gt;cache selection&lt;/a&gt; to occur.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; can be associated with an
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; can be associated with an
   &lt;a href=#application-cache&gt;application cache&lt;/a&gt; when it is created.
-  
-  &lt;a href=#refsWEBWORKERS&gt;[WEBWORKERS]&lt;/a&gt;
-  
   &lt;/p&gt;
 
   &lt;p&gt;Each &lt;a href=#cache-host&gt;cache host&lt;/a&gt; has an associated
@@ -67588,9 +67716,6 @@
    &lt;dd&gt;
 
     &lt;p&gt;(In a shared worker.) Returns the &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object that applies to the current shared worker.
-    
-    &lt;a href=#refsWEBWORKERS&gt;[WEBWORKERS]&lt;/a&gt;
-    
     &lt;/p&gt;
 
    &lt;/dd&gt;
@@ -67665,16 +67790,13 @@
   attribute on &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects must return the
   &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object associated with the
   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#active-document&gt;active document&lt;/a&gt;. The &lt;dfn id=dom-sharedworkerglobalscope-applicationcache title=dom-SharedWorkerGlobalScope-applicationCache&gt;&lt;code&gt;applicationCache&lt;/code&gt;&lt;/dfn&gt;
-  attribute on &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; objects must
+  attribute on &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; objects must
   return the &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object associated with the
   worker.
-  
-  &lt;a href=#refsWEBWORKERS&gt;[WEBWORKERS]&lt;/a&gt;
-  
   &lt;/p&gt;
 
   &lt;p class=note&gt;A &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or
-  &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object has an associated
+  &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object has an associated
   &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object even if that &lt;a href=#cache-host&gt;cache
   host&lt;/a&gt; has no actual &lt;a href=#application-cache&gt;application cache&lt;/a&gt;.&lt;/p&gt;
 
@@ -67841,17 +67963,17 @@
   return true otherwise.&lt;/p&gt;
 
   &lt;p&gt;When the value that would be returned by the &lt;code title=dom-navigator-onLine&gt;&lt;a href=#dom-navigator-online&gt;navigator.onLine&lt;/a&gt;&lt;/code&gt; attribute of a
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;WorkerGlobalScope&lt;/code&gt; changes from
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; changes from
   true to false, the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
   &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;dfn id=event-offline title=event-offline&gt;&lt;code&gt;offline&lt;/code&gt;&lt;/dfn&gt; at the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object.&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;On the other hand, when the value that would be returned by the
   &lt;code title=dom-navigator-onLine&gt;&lt;a href=#dom-navigator-online&gt;navigator.onLine&lt;/a&gt;&lt;/code&gt; attribute
-  of a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;WorkerGlobalScope&lt;/code&gt; changes
+  of a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; changes
   from false to true, the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
   &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;dfn id=event-online title=event-online&gt;&lt;code&gt;online&lt;/code&gt;&lt;/dfn&gt; at the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object.&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for these &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; is the &lt;a href=#networking-task-source&gt;networking task
   source&lt;/a&gt;.&lt;/p&gt;
@@ -68305,11 +68427,6 @@
   context&lt;/a&gt; always has an &lt;a href=#event-loop&gt;event loop&lt;/a&gt; coordinating
   its activities.&lt;/p&gt;
 
-  
-  &lt;p class=note&gt;Other specifications can define new kinds of event
-  loops that aren't associated with browsing contexts; in particular,
-  the Web Workers specification does so.&lt;/p&gt;
-  
 
   &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; has one or more &lt;dfn id=task-queue title=&quot;task
   queue&quot;&gt;task queues&lt;/dfn&gt;. A &lt;a href=#task-queue&gt;task queue&lt;/a&gt; is an ordered
@@ -69116,7 +69233,7 @@
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-window-onpopstate title=handler-window-onpopstate&gt;&lt;code&gt;onpopstate&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-popstate&gt;&lt;a href=#event-popstate&gt;popstate&lt;/a&gt;&lt;/code&gt; &lt;!-- new --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-window-onresize title=handler-window-onresize&gt;&lt;code&gt;onresize&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-resize&gt;resize&lt;/code&gt; &lt;!-- widely used --&gt; &lt;!-- [CSSOM] --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-window-onscroll title=handler-window-onscroll&gt;&lt;code&gt;onscroll&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-scroll&gt;scroll&lt;/code&gt;
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-window-onstorage title=handler-window-onstorage&gt;&lt;code&gt;onstorage&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-storage&gt;storage&lt;/code&gt; &lt;!-- new --&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-window-onstorage title=handler-window-onstorage&gt;&lt;code&gt;onstorage&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; &lt;!-- new --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-window-onunload title=handler-window-onunload&gt;&lt;code&gt;onunload&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-unload&gt;unload&lt;/code&gt; &lt;!-- widely used --&gt;
   &lt;/table&gt;&lt;p class=note&gt;The &lt;code title=handler-window-onerror&gt;&lt;a href=#handler-window-onerror&gt;onerror&lt;/a&gt;&lt;/code&gt;
   handler is also used for &lt;a href=#runtime-script-errors&gt;reporting script errors&lt;/a&gt;.&lt;/p&gt;
@@ -69250,7 +69367,7 @@
   &lt;/dl&gt;&lt;div class=impl&gt;
 
   &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#windowbase64&gt;WindowBase64&lt;/a&gt;&lt;/code&gt; interface adds to the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface and the &lt;code&gt;WorkerUtils&lt;/code&gt;
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface and the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt;
   interface (part of Web Workers).&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-windowbase64-btoa title=dom-windowbase64-btoa&gt;&lt;code&gt;btoa()&lt;/code&gt;&lt;/dfn&gt;
@@ -69510,11 +69627,8 @@
   &lt;div class=impl&gt;
 
   &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#windowtimers&gt;WindowTimers&lt;/a&gt;&lt;/code&gt; interface adds to the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface and the &lt;code&gt;WorkerUtils&lt;/code&gt;
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface and the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt;
   interface (part of Web Workers).
-  
-  &lt;a href=#refsWEBWORKERS&gt;[WEBWORKERS]&lt;/a&gt;
-  
   &lt;/p&gt;
 
   &lt;p&gt;Each object that implements the &lt;code&gt;&lt;a href=#windowtimers&gt;WindowTimers&lt;/a&gt;&lt;/code&gt;
@@ -69556,7 +69670,7 @@
     necessarily consecutively).&lt;/p&gt;
 
     &lt;p&gt;Otherwise, if the &lt;a href=#method-context&gt;method context&lt;/a&gt; is a
-    &lt;code&gt;WorkerUtils&lt;/code&gt; object, wait until &lt;var title=&quot;&quot;&gt;timeout&lt;/var&gt; milliseconds have passed with the worker
+    &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; object, wait until &lt;var title=&quot;&quot;&gt;timeout&lt;/var&gt; milliseconds have passed with the worker
     not suspended (not necessarily consecutively).&lt;/p&gt;
 
     &lt;p&gt;Otherwise, act as described in the specification that defines
@@ -69654,7 +69768,7 @@
     milliseconds (not necessarily consecutively).&lt;/p&gt;
 
     &lt;p&gt;Otherwise, if the &lt;a href=#method-context&gt;method context&lt;/a&gt; is a
-    &lt;code&gt;WorkerUtils&lt;/code&gt; object, wait until &lt;var title=&quot;&quot;&gt;interval&lt;/var&gt; milliseconds have passed with the worker
+    &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; object, wait until &lt;var title=&quot;&quot;&gt;interval&lt;/var&gt; milliseconds have passed with the worker
     not suspended (not necessarily consecutively).&lt;/p&gt;
 
     &lt;p&gt;Otherwise, act as described in the specification that defines
@@ -69695,7 +69809,7 @@
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=method-context&gt;method context&lt;/dfn&gt;, when referenced by the algorithms
   in this section, is the object on which the method for which the
   algorithm is running is implemented (a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or
-  &lt;code&gt;WorkerUtils&lt;/code&gt; object).&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; object).&lt;/p&gt;
 
   &lt;p&gt;When the above methods are invoked and try to &lt;dfn id=get-the-timed-task&gt;get the timed
   task&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;handle&lt;/var&gt; in list &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;,
@@ -69712,7 +69826,7 @@
 
     &lt;p class=note&gt;Setting &lt;var title=&quot;&quot;&gt;thisArg&lt;/var&gt; to undefined
     means that the function code will be executed with the &lt;code title=&quot;&quot;&gt;this&lt;/code&gt; keyword bound to the &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt;
-    or the &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object, as if the code was
+    or the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, as if the code was
     running in the global scope.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, continue with the remaining steps.&lt;/p&gt;
@@ -69741,14 +69855,14 @@
     a reference, not a copy&lt;/a&gt;).&lt;/p&gt;
 
     &lt;p&gt;Otherwise, if the &lt;a href=#method-context&gt;method context&lt;/a&gt; is a
-    &lt;code&gt;WorkerUtils&lt;/code&gt; object, let &lt;var title=&quot;&quot;&gt;global
+    &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; object, let &lt;var title=&quot;&quot;&gt;global
     object&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;browsing context&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;character encoding&lt;/var&gt;,
     and &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
     object&lt;/a&gt;, &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;,
     &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;, &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character
     encoding&lt;/a&gt;, and &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; (respectively)
     of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that the
-    &lt;span&gt;run a worker&lt;/span&gt; algorithm created when it created the
+    &lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt; algorithm created when it created the
     &lt;a href=#method-context&gt;method context&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, act as described in the specification that defines
@@ -70919,24 +71033,18 @@
    &lt;dd&gt;
 
     &lt;p&gt;If a script uses the &lt;code title=dom-document-cookie&gt;&lt;a href=#dom-document-cookie&gt;document.cookie&lt;/a&gt;&lt;/code&gt; API, or the
-    &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt; API, the
+    &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; API, the
     browser will block other scripts from accessing cookies or storage
     until the first script finishes.
-    
-    &lt;a href=#refsWEBSTORAGE&gt;[WEBSTORAGE]&lt;/a&gt;
-    
     &lt;/p&gt;
 
     &lt;p&gt;Calling the &lt;code title=dom-navigator-yieldForStorageUpdates&gt;&lt;a href=#dom-navigator-yieldforstorageupdates&gt;navigator.yieldForStorageUpdates()&lt;/a&gt;&lt;/code&gt;
     method tells the user agent to unblock any other scripts that may
     be blocked, even though the script hasn't returned.&lt;/p&gt;
 
-    &lt;p&gt;Values of cookies and items in the &lt;code&gt;Storage&lt;/code&gt; objects
-    of &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt; attributes
+    &lt;p&gt;Values of cookies and items in the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; objects
+    of &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attributes
     can change after calling this method, whence its name.
-    
-    &lt;a href=#refsWEBSTORAGE&gt;[WEBSTORAGE]&lt;/a&gt;
-    
     &lt;/p&gt;
 
    &lt;/dd&gt;
@@ -75864,7 +75972,7 @@
   first have an indirect communications channel, known as the
   &lt;i&gt;signaling channel&lt;/i&gt;, via which messages can be exchanged with
   the other peer. Typically, this will take the form of
-  &lt;code&gt;XMLHttpRequest&lt;/code&gt;-based or &lt;code&gt;WebSocket&lt;/code&gt;-based
+  &lt;code&gt;XMLHttpRequest&lt;/code&gt;-based or &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt;-based
   communication through the server: messages are sent to the server
   with a session identifier, and the server then routes them to the
   other peer using the same session. The precise details of this
@@ -77024,23 +77132,2331 @@
   &lt;/table&gt;&lt;/div&gt;
 
 &lt;!--PEERCONNECTION--&gt;
+
+
+
+
+
+
+
+  &lt;div data-component=&quot;Web Workers (editor: Ian Hickson)&quot;&gt;
+
+  &lt;h2 id=workers&gt;&lt;span class=secno&gt;10 &lt;/span&gt;Web workers&lt;/h2&gt;
+
+
+
+
+  &lt;h3 id=introduction-13&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+
+  &lt;h4 id=scope-0&gt;&lt;span class=secno&gt;10.1.1 &lt;/span&gt;Scope&lt;/h4&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;This specification defines an API for running scripts in the
+  background independently of any user interface scripts.&lt;/p&gt;
+
+  &lt;p&gt;This allows for long-running scripts that are not interrupted by
+  scripts that respond to clicks or other user interactions, and
+  allows long tasks to be executed without yielding to keep the page
+  responsive.&lt;/p&gt;
+
+  &lt;p&gt;Workers (as these background scripts are called herein) are
+  relatively heavy-weight, and are not intended to be used in large
+  numbers. For example, it would be inappropriate to launch one worker
+  for each pixel of a four megapixel image. The examples below show
+  some appropriate uses of workers.&lt;/p&gt;
+
+  &lt;p&gt;Generally, workers are expected to be long-lived, have a high
+  start-up performance cost, and a high per-instance memory cost.&lt;/p&gt;
+
+
+  &lt;h4 id=examples-4&gt;&lt;span class=secno&gt;10.1.2 &lt;/span&gt;Examples&lt;/h4&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;There are a variety of uses that workers can be put to. The
+  following subsections show various examples of this use.&lt;/p&gt;
+
+  &lt;h5 id=a-background-number-crunching-worker&gt;&lt;span class=secno&gt;10.1.2.1 &lt;/span&gt;A background number-crunching worker&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;The simplest use of workers is for performing a computationally
+  expensive task without interrupting the user interface.&lt;/p&gt;
+
+  &lt;p&gt;In this example, the main document spawns a worker to
+  (na&iuml;vely) compute prime numbers, and progressively displays the
+  most recently found prime number.&lt;/p&gt;
+
+  &lt;p&gt;The main page is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;html&gt;
+ &lt;head&gt;
+  &lt;title&gt;Worker example: One-core computation&lt;/title&gt;
+ &lt;/head&gt;
+ &lt;body&gt;
+  &lt;p&gt;The highest prime number discovered so far is: &lt;output id=&quot;result&quot;&gt;&lt;/output&gt;&lt;/p&gt;
+  &lt;script&gt;
+   var worker = new Worker('worker.js');
+   worker.onmessage = function (event) {
+     document.getElementById('result').textContent = event.data;
+   };
+  &lt;/script&gt;
+ &lt;/body&gt;
+&lt;/html&gt;&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;code title=dom-Worker&gt;&lt;a href=#dom-worker&gt;Worker()&lt;/a&gt;&lt;/code&gt; constructor call
+  creates a worker and returns a &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object
+  representing that worker, which is used to communicate with the
+  worker. That object's &lt;code title=handler-Worker-onmessage&gt;&lt;a href=#handler-worker-onmessage&gt;onmessage&lt;/a&gt;&lt;/code&gt; event handler allows the code to receive messages from the worker.&lt;/p&gt;
+
+  &lt;p&gt;The worker itself is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;var n = 1;
+search: while (true) {
+  n += 1;
+  for (var i = 2; i &lt;= Math.sqrt(n); i += 1)
+    if (n % i == 0)
+     continue search;
+  // found a prime!
+  postMessage(n);
+}&lt;/pre&gt;
+
+  &lt;p&gt;The bulk of this code is simply an unoptimized search for a prime
+  number. The &lt;code title=dom-DedicatedWorkerGlobalScope-postMessage&gt;&lt;a href=#dom-dedicatedworkerglobalscope-postmessage&gt;postMessage()&lt;/a&gt;&lt;/code&gt;
+  method is used to send a message back to the page when a prime is
+  found.&lt;/p&gt;
+
+  &lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/demos/workers/primes/page.html">http://www.whatwg.org/demos/workers/primes/page.html</A>&gt;View this example online&lt;/a&gt;.&lt;/p&gt;
+
+
+
+  &lt;h5 id=a-worker-for-updating-a-client-side-database&gt;&lt;span class=secno&gt;10.1.2.2 &lt;/span&gt;A worker for updating a client-side database&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;In this example, the main document spawns a worker whose only
+  task is to listen for notifications from the server, and, when
+  appropriate, either add or remove data from the client-side
+  database.&lt;/p&gt;
+
+  &lt;p&gt;Since no communication occurs between the worker and the main
+  page, the main page can start the worker by just doing:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;script&gt;
+ new Worker('worker.js');
+&lt;/script&gt;&lt;/pre&gt;
+
+  &lt;p&gt;The worker itself is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;var server = new WebSocket('<A HREF="ws://whatwg.org/database">ws://whatwg.org/database</A>');
+var database = openDatabase('demobase', '1.0', 'Demo Database', 10240);
+server.onmessage = function (event) {
+  // data is in the format &quot;command key value&quot;
+  var data = event.data.split(' ');
+  switch (data[0]) {
+    case '+':
+     database.transaction(function(tx) {
+       tx.executeSql('INSERT INTO pairs (key, value) VALUES (?, ?)', data[1], data[2]);
+     });
+    case '-':
+     database.transaction(function(tx) {
+       tx.executeSql('DELETE FROM pairs WHERE key=? AND value=?', data[1], data[2]);
+     });
+  }
+};&lt;/pre&gt;
+
+  &lt;p&gt;This connects to the server using the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt;
+  mechanism and opens the local database (which, we presume, has been
+  created earlier). The worker then just listens for messages from the
+  server and acts on them as appropriate, forever (or until the main
+  page is closed).&lt;/p&gt;
+
+  &lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/demos/workers/database-updater/page.html">http://www.whatwg.org/demos/workers/database-updater/page.html</A>&gt;View
+  this example online&lt;/a&gt;. (This example will not actually function,
+  since the server does not actually exist and the database is not
+  created by this sample code.)&lt;/p&gt;
+
+
+
+  &lt;h5 id=worker-used-for-background-i/o&gt;&lt;span class=secno&gt;10.1.2.3 &lt;/span&gt;Worker used for background I/O&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;In this example, the main document uses two workers, one for
+  fetching stock updates for at regular intervals, and one for
+  fetching performing search queries that the user requests.&lt;/p&gt;
+
+  &lt;p&gt;The main page is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;html&gt;
+ &lt;head&gt;
+  &lt;title&gt;Worker example: Stock ticker&lt;/title&gt;
+  &lt;script&gt;
+   // TICKER
+   var symbol = 'GOOG'; // default symbol to watch
+   var ticker = new Worker('ticker.js');
+
+   // SEARCHER
+   var searcher = new Worker('searcher.js');
+   function search(query) {
+     searcher.postMessage(query);
+   }
+
+   // SYMBOL SELECTION UI
+   function select(newSymbol) {
+     symbol = newSymbol;
+     ticker.postMessage(symbol);
+   }
+  &lt;/script&gt;
+ &lt;/head&gt;
+ &lt;body onload=&quot;search('')&quot;&gt;
+  &lt;p&gt;&lt;output id=&quot;symbol&quot;&gt;&lt;/output&gt; &lt;output id=&quot;value&quot;&gt;&lt;/output&gt;&lt;/p&gt;
+  &lt;script&gt;
+   ticker.onmessage = function (event) {
+     var data = event.data.split(' ');
+     document.getElementById('symbol').textContent = data[0];
+     document.getElementById('value').textContent = data[1];
+   };
+   ticker.postMessage(symbol);
+  &lt;/script&gt;
+  &lt;p&gt;&lt;label&gt;Search: &lt;input type=&quot;text&quot; autofocus oninput=&quot;search(this.value)&quot;&gt;&lt;/label&gt;&lt;/p&gt;
+  &lt;ul id=&quot;results&quot;&gt;&lt;/ul&gt;
+  &lt;script&gt;
+   searcher.onmessage = function (event) {
+     var data = event.data.split(' ');
+     var results = document.getElementById('results');
+     while (results.hasChildNodes()) // clear previous results
+       results.removeChild(results.firstChild);
+     for (var i = 0; i &lt; data.length; i += 1) {
+       // add a list item with a button for each result
+       var li = document.createElement('li');
+       var button = document.createElement('button');
+       button.value = data[i];
+       button.type = 'button';
+       button.onclick = function () { select(this.value); };
+       button.textContent = data[i];
+       li.appendChild(button);
+       results.appendChild(li);
+     }
+   };
+  &lt;/script&gt;
+  &lt;p&gt;(The data in this example is not real. Try searching for &quot;Google&quot; or &quot;Apple&quot;.)&lt;/p&gt;
+ &lt;/body&gt;
+&lt;/html&gt;&lt;/pre&gt;
+
+  &lt;p&gt;The two workers use a common library for performing the actual
+  network calls. This library is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;function get(url) {
+  try {
+    var xhr = new XMLHttpRequest();
+    xhr.open('GET', url, false);
+    xhr.send();
+    return xhr.responseText;
+  } catch (e) {
+    return ''; // turn all errors into empty results
+  }
+}&lt;/pre&gt;
+
+  &lt;p&gt;The stock updater worker is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;importScripts('io.js');
+var timer;
+var symbol;
+function update() {
+  postMessage(symbol + ' ' + get('stock.cgi?' + symbol));
+  timer = setTimeout(update, 10000);
+}
+onmessage = function (event) {
+  if (timer)
+    clearTimeout(timer);
+  symbol = event.data;
+  update();
+};&lt;/pre&gt;
+
+  &lt;p&gt;The search query worker is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;importScripts('io.js');
+onmessage = function (event) {
+  postMessage(get('search.cgi?' + event.data));
+};&lt;/pre&gt;
+
+  &lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/demos/workers/stocks/page.html">http://www.whatwg.org/demos/workers/stocks/page.html</A>&gt;View this example online&lt;/a&gt;.&lt;/p&gt;
+
+
+  &lt;h5 id=shared-workers-introduction&gt;&lt;span class=secno&gt;10.1.2.4 &lt;/span&gt;Shared workers introduction&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;This section introduces shared workers using a Hello World
+  example. Shared workers use slightly different APIs, since each
+  worker can have multiple connections.&lt;/p&gt;
+
+  &lt;p&gt;This first example shows how you connect to a worker and how a
+  worker can send a message back to the page when it connects to
+  it. Received messages are displayed in a log.&lt;/p&gt;
+
+  &lt;p&gt;Here is the HTML page:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;title&gt;Shared workers: demo 1&lt;/title&gt;
+&lt;pre id=&quot;log&quot;&gt;Log:&lt;/pre&gt;
+&lt;script&gt;
+  var worker = new SharedWorker('test.js');
+  var log = document.getElementById('log');
+  worker.port.onmessage = function(e) { // note: not worker.onmessage!
+    log.textContent += '\n' + e.data;
+  }
+&lt;/script&gt;
+&lt;/pre&gt;
+
+  &lt;p&gt;Here is the JavaScript worker:&lt;/p&gt;
+
+  &lt;pre&gt;onconnect = function(e) {
+  var port = e.ports[0];
+  port.postMessage('Hello World!');
+}
+&lt;/pre&gt;
+
+  &lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/demos/workers/shared/001/test.html">http://www.whatwg.org/demos/workers/shared/001/test.html</A>&gt;View this example online&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;This second example extends the first one by changing two things:
+  first, messages are received using &lt;code title=&quot;&quot;&gt;addEventListener()&lt;/code&gt; instead of an &lt;a href=#event-handler-idl-attributes title=&quot;event
+  handler IDL attributes&quot;&gt;event handler IDL attribute&lt;/a&gt;, and
+  second, a message is sent &lt;em&gt;to&lt;/em&gt; the worker, causing the worker
+  to send another message in return. Received messages are again
+  displayed in a log.&lt;/p&gt;
+
+  &lt;p&gt;Here is the HTML page:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;title&gt;Shared workers: demo 2&lt;/title&gt;
+&lt;pre id=&quot;log&quot;&gt;Log:&lt;/pre&gt;
+&lt;script&gt;
+  var worker = new SharedWorker('test.js');
+  var log = document.getElementById('log');
+  worker.port.addEventListener('message', function(e) {
+    log.textContent += '\n' + e.data;
+  }, false);
+  worker.port.start(); // note: need this when using addEventListener
+  worker.port.postMessage('ping');
+&lt;/script&gt;
+&lt;/pre&gt;
+
+  &lt;p&gt;Here is the JavaScript worker:&lt;/p&gt;
+
+  &lt;pre&gt;onconnect = function(e) {
+  var port = e.ports[0];
+  port.postMessage('Hello World!');
+  port.onmessage = function(e) {
+    port.postMessage('pong'); // not e.ports[0].postMessage!
+    // e.target.postMessage('pong'); would work also
+  }
+}
+&lt;/pre&gt;
+
+  &lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/demos/workers/shared/002/test.html">http://www.whatwg.org/demos/workers/shared/002/test.html</A>&gt;View this example online&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;Finally, the example is extended to show how two pages can
+  connect to the same worker; in this case, the second page is merely
+  in an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; on the first page, but the same principle
+  would apply to an entirely separate page in a separate
+  &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Here is the outer HTML page:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;title&gt;Shared workers: demo 3&lt;/title&gt;
+&lt;pre id=&quot;log&quot;&gt;Log:&lt;/pre&gt;
+&lt;script&gt;
+  var worker = new SharedWorker('test.js');
+  var log = document.getElementById('log');
+  worker.port.addEventListener('message', function(e) {
+    log.textContent += '\n' + e.data;
+  }, false);
+  worker.port.start();
+  worker.port.postMessage('ping');
+&lt;/script&gt;
+&lt;iframe src=&quot;inner.html&quot;&gt;&lt;/iframe&gt;
+&lt;/pre&gt;
+
+  &lt;p&gt;Here is the inner HTML page:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;title&gt;Shared workers: demo 3 inner frame&lt;/title&gt;
+&lt;pre id=log&gt;Inner log:&lt;/pre&gt;
+&lt;script&gt;
+  var worker = new SharedWorker('test.js');
+  var log = document.getElementById('log');
+  worker.port.onmessage = function(e) {
+   log.textContent += '\n' + e.data;
+  }
+&lt;/script&gt;
+&lt;/pre&gt;
+
+  &lt;p&gt;Here is the JavaScript worker:&lt;/p&gt;
+
+  &lt;pre&gt;var count = 0;
+onconnect = function(e) {
+  count += 1;
+  var port = e.ports[0];
+  port.postMessage('Hello World! You are connection #' + count);
+  port.onmessage = function(e) {
+    port.postMessage('pong');
+  }
+}
+&lt;/pre&gt;
+
+  &lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/demos/workers/shared/003/test.html">http://www.whatwg.org/demos/workers/shared/003/test.html</A>&gt;View this example online&lt;/a&gt;.&lt;/p&gt;
+
+
+  &lt;h5 id=shared-state-using-a-shared-worker&gt;&lt;span class=secno&gt;10.1.2.5 &lt;/span&gt;Shared state using a shared worker&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;In this example, multiple windows (viewers) can be opened that
+  are all viewing the same map. All the windows share the same map
+  information, with a single worker coordinating all the viewers. Each
+  viewer can move around independently, but if they set any data on
+  the map, all the viewers are updated.&lt;/p&gt;
+
+  &lt;p&gt;The main page isn't interesting, it merely provides a way to open
+  the viewers:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;html&gt;
+ &lt;head&gt;
+  &lt;title&gt;Workers example: Multiviewer&lt;/title&gt;
+  &lt;script&gt;
+   function openViewer() {
+     window.open('viewer.html');
+   }
+  &lt;/script&gt;
+ &lt;/head&gt;
+ &lt;body&gt;
+  &lt;p&gt;&lt;button type=button onclick=&quot;openViewer()&quot;&gt;Open a new
+  viewer&lt;/button&gt;&lt;/p&gt;
+  &lt;p&gt;Each viewer opens in a new window. You can have as many viewers
+  as you like, they all view the same data.&lt;/p&gt;
+ &lt;/body&gt;
+&lt;/html&gt;&lt;/pre&gt;
+
+  &lt;p&gt;The viewer is more involved:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;html&gt;
+ &lt;head&gt;
+  &lt;title&gt;Workers example: Multiviewer viewer&lt;/title&gt;
+  &lt;script&gt;
+   var worker = new SharedWorker('worker.js', 'core');
+
+   // CONFIGURATION
+   function configure(event) {
+     if (event.data.substr(0, 4) != 'cfg ') return;
+     var name = event.data.substr(4).split(' ', 1);
+     // update display to mention our name is name
+     document.getElementsByTagName('h1')[0].textContent += ' ' + name;
+     // no longer need this listener
+     worker.port.removeEventListener('message', configure, false);
+   }
+   worker.port.addEventListener('message', configure, false);
+
+   // MAP
+   function paintMap(event) {
+     if (event.data.substr(0, 4) != 'map ') return;
+     var data = event.data.substr(4).split(',');
+     // display tiles data[0] .. data[8]
+     var canvas = document.getElementById('map');
+     var context = canvas.getContext('2d');
+     for (var y = 0; y &lt; 3; y += 1) {
+       for (var x = 0; x &lt; 3; x += 1) {
+         var tile = data[y * 3 + x];
+         if (tile == '0')
+           context.fillStyle = 'green';
+         else 
+           context.fillStyle = 'maroon';
+         fillRect(x * 50, y * 50, 50, 50);
+       }
+     }
+   }
+   worker.port.addEventListener('message', paintMap, false);
+
+   // PUBLIC CHAT
+   function updatePublicChat(event) {
+     if (event.data.substr(0, 4) != 'txt ') return;
+     var name = event.data.substr(4).split(' ', 1);
+     var message = event.data.substr(4 + length(name) + 1);
+     // display &quot;&lt;name&gt; message&quot; in public chat
+     var dialog = document.getElementById('public');
+     var dt = document.createElement('dt');
+     dt.textContent = name;
+     dialog.appendChild(dt);
+     var dd = document.createElement('dd');
+     dd.textContent = message;
+     dialog.appendChild(dd);
+   }
+   worker.port.addEventListener('message', updatePublicChat, false);
+
+   // PRIVATE CHAT
+   function startPrivateChat(event) {
+     if (event.data.substr(0, 4) != 'msg ') return;
+     var name = event.data.substr(4).split(' ', 1);
+     var port = event.ports[0];
+     // display a private chat UI
+     var ul = document.getElementById('private');
+     var li = document.createElement('li');
+     var h3 = document.createElement('h3');
+     h3.textContent = 'Private chat with ' + name;
+     li.appendChild(h3);
+     var dialog = document.createElement('dialog');
+     var addMessage = function(name, message) {
+       var dt = document.createElement('dt');
+       dt.textContent = name;
+       dialog.appendChild(dt);
+       var dd = document.createElement('dd');
+       dd.textContent = message;
+       dialog.appendChild(dd);
+     };
+     port.onmessage = function (event) {
+       addMessage(name, event.data);
+     };
+     li.appendChild(dialog);
+     var form = document.createElement('form');
+     var p = document.createElement('p');
+     var input = document.createElement('input');
+     input.size = 50;
+     p.appendChild(input);
+     p.appendChild(document.createTextNode(' '));
+     var button = document.createElement('button');
+     button.textContent = 'Post';
+     p.appendChild(button);
+     form.onsubmit = function () {
+       port.postMessage(input.value);
+       addMessage('me', input.value);
+       input.value = '';
+       return false;
+     };
+     form.appendChild(p);
+     li.appendChild(form);
+   }
+   worker.port.addEventListener('message', startPrivateChat, false);
+
+   worker.port.start();
+  &lt;/script&gt;
+ &lt;/head&gt;
+ &lt;body&gt;
+  &lt;h1&gt;Viewer&lt;/h1&gt;
+  &lt;h2&gt;Map&lt;/h2&gt;
+  &lt;p&gt;&lt;canvas id=&quot;map&quot; height=150 width=150&gt;&lt;/canvas&gt;&lt;/p&gt;
+  &lt;p&gt;
+   &lt;button type=button onclick=&quot;worker.port.postMessage('mov left')&quot;&gt;Left&lt;/button&gt;
+   &lt;button type=button onclick=&quot;worker.port.postMessage('mov up')&quot;&gt;Up&lt;/button&gt;
+   &lt;button type=button onclick=&quot;worker.port.postMessage('mov down')&quot;&gt;Down&lt;/button&gt;
+   &lt;button type=button onclick=&quot;worker.port.postMessage('mov right')&quot;&gt;Right&lt;/button&gt;
+   &lt;button type=button onclick=&quot;worker.port.postMessage('set 0')&quot;&gt;Set 0&lt;/button&gt;
+   &lt;button type=button onclick=&quot;worker.port.postMessage('set 1')&quot;&gt;Set 1&lt;/button&gt;
+  &lt;/p&gt;
+  &lt;h2&gt;Public Chat&lt;/h2&gt;
+  &lt;dialog id=&quot;public&quot;&gt;&lt;/dialog&gt;
+  &lt;form onsubmit=&quot;worker.port.postMessage('txt ' + message.value); message.value = ''; return false;&quot;&gt;
+   &lt;p&gt;
+    &lt;input type=&quot;text&quot; name=&quot;message&quot; size=&quot;50&quot;&gt;
+    &lt;button&gt;Post&lt;/button&gt;
+   &lt;/p&gt;
+  &lt;/form&gt;
+  &lt;h2&gt;Private Chat&lt;/h2&gt;
+  &lt;ul id=&quot;private&quot;&gt;&lt;/ul&gt;
+ &lt;/body&gt;
+&lt;/html&gt;
+&lt;/pre&gt;
+
+  &lt;p&gt;There are several key things worth noting about the way the
+  viewer is written.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Multiple listeners&lt;/strong&gt;. Instead of a single message
+  processing function, the code here attaches multiple event
+  listeners, each one performing a quick check to see if it is
+  relevant for the message. In this example it doesn't make much
+  difference, but if multiple authors wanted to collaborate using a
+  single port to communicate with a worker, it would allow for
+  independent code instead of changes having to all be made to a
+  single event handling function.&lt;/p&gt;
+
+  &lt;p&gt;Registering event listeners in this way also allows you to
+  unregister specific listeners when you are done with them, as is
+  done with the &lt;code title=&quot;&quot;&gt;configure()&lt;/code&gt; method in this
+  example.&lt;/p&gt;
+
+  &lt;p&gt;Finally, the worker:&lt;/p&gt;
+
+  &lt;pre&gt;
+var nextName = 0;
+function getNextName() {
+  // this could use more friendly names
+  // but for now just return a number
+  return nextName++;
+}
+
+var map = [
+ [0, 0, 0, 0, 0, 0, 0],
+ [1, 1, 0, 1, 0, 1, 1],
+ [0, 1, 0, 1, 0, 0, 0],
+ [0, 1, 0, 1, 0, 1, 1],
+ [0, 0, 0, 1, 0, 0, 0],
+ [1, 0, 0, 1, 1, 1, 1],
+ [1, 1, 0, 1, 1, 0, 1],
+];
+
+function wrapX(x) {
+  if (x &lt; 0) return wrapX(x + map[0].length);
+  if (x &gt;= map[0].length) return wrapX(x - map[0].length);
+  return x;
+}
+
+function wrapY(y) {
+  if (y &lt; 0) return wrapY(y + map.length);
+  if (y &gt;= map[0].length) return wrapY(y - map.length);
+  return y;
+}
+
+function sendMapData(callback) {
+  var data = '';
+  for (var y = viewer.y-1; y &lt;= viewer.y+1; y += 1) {
+    for (var x = viewer.x-1; x &lt;= viewer.x+1; x += 1) {
+      if (data != '')
+        data += ',';
+      data += map[y][x];
+    }
+  }
+  callback('map ' + data);
+}
+
+var viewers = {};
+onconnect = function (event) {
+  event.ports[0]._name = getNextName();
+  event.ports[0]._data = { port: event.port, x: 0, y: 0, };
+  viewers[event.ports[0]._name] = event.port._data;
+  event.ports[0].postMessage('cfg ' + name);
+  event.ports[0].onmessage = getMessage;
+  sendMapData(event.ports[0].postMessage);
+};
+
+function getMessage(event) {
+  switch (event.data.substr(0, 4)) {
+    case 'mov ':
+      var direction = event.data.substr(4);
+      var dx = 0;
+      var dy = 0;
+      switch (direction) {
+        case 'up': dy = -1; break;
+        case 'down': dy = 1; break;
+        case 'left': dx = -1; break;
+        case 'right': dx = 1; break;
+      }
+      event.target._data.x = wrapX(event.target._data.x + dx);
+      event.target._data.y = wrapY(event.target._data.y + dy);
+      sendMapData(event.target.postMessage);
+      break;
+    case 'set ':
+      var value = event.data.substr(4);
+      map[event.target._data.y][event.target._data.x] = value;
+      for (var viewer in viewers)
+        sendMapData(viewers[viewer].port.postMessage);
+      break;
+    case 'txt ':
+      var name = event.target._name;
+      var message = event.data.substr(4);
+      for (var viewer in viewers)
+        viewers[viewer].port.postMessage('txt ' + name + ' ' + message);
+      break;
+    case 'msg ':
+      var party1 = event._data;
+      var party2 = viewers[event.data.substr(4).split(' ', 1)];
+      if (party2) {
+        var channel = new MessageChannel();
+        party1.port.postMessage('msg ' + party2.name, [channel.port1]);
+        party2.port.postMessage('msg ' + party1.name, [channel.port2]);
+      }
+      break;
+  }
+}&lt;/pre&gt;
+
+  &lt;p&gt;&lt;strong&gt;Connecting to multiple pages&lt;/strong&gt;. The script uses
+  the &lt;code title=handler-SharedWorkerGlobalScope-onconnect&gt;&lt;a href=#handler-sharedworkerglobalscope-onconnect&gt;onconnect&lt;/a&gt;&lt;/code&gt;
+  event listener to listen for multiple connections.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Direct channels&lt;/strong&gt;. When the worker receives a
+  &quot;msg&quot; message from one viewer naming another viewer, it sets up a
+  direct connection between the two, so that the two viewers can
+  communicate directly without the worker having to proxy all the
+  messages.&lt;/p&gt;
+
+  &lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/demos/workers/multiviewer/page.html">http://www.whatwg.org/demos/workers/multiviewer/page.html</A>&gt;View this example online&lt;/a&gt;.&lt;/p&gt;
+
+
+  &lt;h5 id=delegation&gt;&lt;span class=secno&gt;10.1.2.6 &lt;/span&gt;Delegation&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;With multicore CPUs becoming prevalent, one way to obtain better
+  performance is to split computationally expensive tasks amongst
+  multiple workers. In this example, a computationally expensive task
+  that is to be performed for every number from 1 to 10,000,000 is
+  farmed out to ten subworkers.&lt;/p&gt;
+
+  &lt;p&gt;The main page is as follows, it just reports the result:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;html&gt;
+ &lt;head&gt;
+  &lt;title&gt;Worker example: Multicore computation&lt;/title&gt;
+ &lt;/head&gt;
+ &lt;body&gt;
+  &lt;p&gt;Result: &lt;output id=&quot;result&quot;&gt;&lt;/output&gt;&lt;/p&gt;
+  &lt;script&gt;
+   var worker = new Worker('worker.js');
+   worker.onmessage = function (event) {
+     document.getElementById('result').textContent = event.data;
+   };
+  &lt;/script&gt;
+ &lt;/body&gt;
+&lt;/html&gt;&lt;/pre&gt;
+
+  &lt;p&gt;The worker itself is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;// settings
+var num_workers = 10;
+var items_per_worker = 1000000;
+
+// start the workers
+var result = 0;
+var pending_workers = num_workers;
+for (var i = 0; i &lt; num_workers; i += 1) {
+  var worker = new Worker('core.js');
+  worker.postMessage(i * items_per_worker);
+  worker.postMessage((i+1) * items_per_worker);
+  worker.onmessage = storeResult;
+}
+
+// handle the results
+function storeResult(event) {
+  result += 1*event.data;
+  pending_workers -= 1;
+  if (pending_workers &lt;= 0)
+    postMessage(result); // finished!
+}&lt;/pre&gt;
+
+  &lt;p&gt;It consists of a loop to start the subworkers, and then a handler
+  that waits for all the subworkers to respond.&lt;/p&gt;
+
+  &lt;p&gt;The subworkers are implemented as follows:&lt;/p&gt;
+
+  &lt;pre&gt;var start;
+onmessage = getStart;
+function getStart(event) {
+  start = 1*event.data;
+  onmessage = getEnd;
+}
+
+var end;
+function getEnd(event) {
+  end = 1*event.data;
+  onmessage = null;
+  work();
+}
+
+function work() {
+  var result = 0;
+  for (var i = start; i &lt; end; i += 1) {
+    // perform some complex calculation here
+    result += 1;
+  }
+  postMessage(result);
+  close();
+}&lt;/pre&gt;
+
+  &lt;p&gt;They receive two numbers in two events, perform the computation
+  for the range of numbers thus specified, and then report the result
+  back to the parent.&lt;/p&gt;
+
+  &lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/demos/workers/multicore/page.html">http://www.whatwg.org/demos/workers/multicore/page.html</A>&gt;View this example online&lt;/a&gt;.&lt;/p&gt;
+
+&lt;!--(this uses startConversation, which is currently commented out)
+
+  &lt;h5&gt;Providing libraries&lt;/h5&gt;
+
+  &lt;!- -END dev-html- -&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!- -START dev-html- -&gt;
+
+  &lt;p&gt;Suppose that a cryptography library is made available that
+  provides three tasks:&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;Generate a public/private key pair&lt;/dt&gt;
+
+   &lt;dd&gt;Takes a port, on which it will send two messages, first the
+   public key and then the private key.&lt;/dd&gt;
+
+   &lt;dt&gt;Given a plaintext and a public key, return the corresponding cyphertext&lt;/dt&gt;
+
+   &lt;dd&gt;Takes a port, to which any number of messages can be sent, the
+   first giving the public key, and the remainder giving the
+   plaintext, each of which is encrypted and then sent on that same
+   channel as the cyphertext. The user can close the port when it is
+   done encrypting content.&lt;/dd&gt;
+
+   &lt;dt&gt;Given a cyphertext and a private key, return the corresponding plaintext&lt;/dt&gt;
+
+   &lt;dd&gt;Takes a port, to which any number of messages can be sent, the
+   first giving the private key, and the remainder giving the
+   cyphertext, each of which is decrypted and then sent on that same
+   channel as the plaintext. The user can close the port when it is
+   done decrypting content.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The library itself is as follows:&lt;/p&gt;
+
+  &lt;pre&gt;function handleMessage(e) {
+  if (e.data == &quot;genkeys&quot;)
+    genkeys(e.ports[0]);
+  else if (e.data == &quot;encrypt&quot;)
+    encrypt(e.ports[0]);
+  else if (e.data == &quot;decrypt&quot;)
+    decrypt(e.ports[0]);
+}
+
+function genkeys(p) {
+  var keys = _generateKeyPair();
+  p.postMessage(keys[0]);
+  p.postMessage(keys[1]);
+}
+
+function encrypt(p) {
+  var key, state = 0;
+  p.onmessage = function (e) {
+    if (state == 0) {
+      key = e.data;
+      state = 1;
+    } else {
+      p.postMessage(_encrypt(key, e.data));
+    }
+  };
+}
+
+function decrypt(p) {
+  var key, state = 0;
+  p.onmessage = function (e) {
+    if (state == 0) {
+      key = e.data;
+      state = 1;
+    } else {
+      p.postMessage(_decrypt(key, e.data));
+    }
+  };
+}
+
+// support being used as a shared worker as well as a dedicated worker
+if ('onmessage' in this) // dedicated worker
+  onmessage = handleMessage;
+else // shared worker
+  onconnect = function (e) { e.port.onmessage = handleMessage; }
+
+
+// the &quot;crypto&quot; functions:
+
+function _generateKeyPair() {
+  return [Math.random(), Math.random()];
+}
+
+function _encrypt(k, s) {
+  return 'encrypted-' + k + ' ' + s;
+}
+
+function _decrypt(k, s) {
+  return s.substr(s.indexOf(' ')+1);
+}&lt;/pre&gt;
+
+  &lt;p&gt;Note that the crypto functions here are just stubs and don't do
+  real cryptography.&lt;/p&gt;
+
+  &lt;p&gt;This library could be used as follows:&lt;/p&gt;
+
+  &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;html&gt;
+ &lt;head&gt;
+  &lt;title&gt;Worker example: Crypto library&lt;/title&gt;
+  &lt;script&gt;
+   var cryptoLib = new Worker('libcrypto-v1.js'); // or could use 'libcrypto-v2.js'
+   function getKeys() {
+     var state = 0;
+     cryptoLib.startConversation(&quot;genkeys&quot;).onmessage = function (e) {
+       if (state == 0)
+         document.getElementById('public').value = e.data;
+       else if (state == 1)
+         document.getElementById('private').value = e.data;
+       state += 1;
+     };
+   }
+   function enc() {
+     var port = cryptoLib.startConversation(&quot;encrypt&quot;);
+     port.postMessage(document.getElementById('public').value);
+     port.postMessage(document.getElementById('input').value);
+     port.onmessage = function (e) {
+       document.getElementById('input').value = e.data;
+       port.close();
+     };
+   }
+   function dec() {
+     var port = cryptoLib.startConversation(&quot;decrypt&quot;);
+     port.postMessage(document.getElementById('private').value);
+     port.postMessage(document.getElementById('input').value);
+     port.onmessage = function (e) {
+       document.getElementById('input').value = e.data;
+       port.close();
+     };
+   }
+  &lt;/script&gt;
+  &lt;style&gt;
+   textarea { display: block; }
+  &lt;/style&gt;
+ &lt;/head&gt;
+ &lt;body onload=&quot;getKeys()&quot;&gt;
+  &lt;fieldset&gt;
+   &lt;legend&gt;Keys&lt;/legend&gt;
+   &lt;p&gt;&lt;label&gt;Public Key: &lt;textarea id=&quot;public&quot;&gt;&lt;/textarea&gt;&lt;/label&gt;&lt;/p&gt;
+   &lt;p&gt;&lt;label&gt;Private Key: &lt;textarea id=&quot;private&quot;&gt;&lt;/textarea&gt;&lt;/label&gt;&lt;/p&gt;
+  &lt;/fieldset&gt;
+  &lt;p&gt;&lt;label&gt;Input: &lt;textarea id=&quot;input&quot;&gt;&lt;/textarea&gt;&lt;/label&gt;&lt;/p&gt;
+  &lt;p&gt;&lt;button onclick=&quot;enc()&quot;&gt;Encrypt&lt;/button&gt; &lt;button onclick=&quot;dec()&quot;&gt;Decrypt&lt;/button&gt;&lt;/p&gt;
+ &lt;/body&gt;
+&lt;/html&gt;&lt;/pre&gt;
+
+  &lt;p&gt;A later version of the API, though, might want to offload all the
+  crypto work onto subworkers. This could be done as follows:&lt;/p&gt;
+
+  &lt;pre&gt;function handleMessage(e) {
+  if (e.data == &quot;genkeys&quot;)
+    genkeys(e.ports[0]);
+  else if (e.data == &quot;encrypt&quot;)
+    encrypt(e.ports[0]);
+  else if (e.data == &quot;decrypt&quot;)
+    decrypt(e.ports[0]);
+}
+
+function genkeys(p) {
+  var generator = new Worker('libcrypto-v2-generator.js');
+  generator.postMessage('', [p]);
+}
+
+function encrypt(p) {
+  p.onmessage = function (e) {
+    var key = e.data;
+    var encryptor = new Worker('libcrypto-v2-encryptor.js');
+    encryptor.postMessage(key, [p]);
+  };
+}
+
+function encrypt(p) {
+  p.onmessage = function (e) {
+    var key = e.data;
+    var decryptor = new Worker('libcrypto-v2-decryptor.js');
+    decryptor.postMessage(key, [p]);
+  };
+}
+
+// support being used as a shared worker as well as a dedicated worker
+if ('onmessage' in this) // dedicated worker
+  onmessage = handleMessage;
+else // shared worker
+  onconnect = function (e) { e.ports[0].onmessage = handleMessage };
+&lt;/pre&gt;
+
+  &lt;p&gt;The little subworkers would then be as follows.&lt;/p&gt;
+
+  &lt;p&gt;For generating key pairs:&lt;/p&gt;
+
+  &lt;pre&gt;onmessage = function (e) {
+  var k = _generateKeyPair();
+  e.ports[0].postMessage(k[0]);
+  e.ports[0].postMessage(k[1]);
+  close();
+}
+
+function _generateKeyPair() {
+  return [Math.random(), Math.random()];
+}&lt;/pre&gt;
+
+  &lt;p&gt;For encrypting:&lt;/p&gt;
+
+  &lt;pre&gt;onmessage = function (e) {
+  var key = e.data;
+  e.ports[0].onmessage = function (e) {
+    var s = e.data;
+    postMessage(_encrypt(key, s));
+  }
+}
+
+function _encrypt(k, s) {
+  return 'encrypted-' + k + ' ' + s;
+}&lt;/pre&gt;
+
+  &lt;p&gt;For decrypting:&lt;/p&gt;
+
+  &lt;pre&gt;onmessage = function (e) {
+  var key = e.data;
+  e.ports[0].onmessage = function (e) {
+    var s = e.data;
+    postMessage(_decrypt(key, s));
+  }
+}
+
+function _decrypt(k, s) {
+  return s.substr(s.indexOf(' ')+1);
+}&lt;/pre&gt;
+
+  &lt;p&gt;Notice how the users of the API don't have to even know that this
+  is happening &mdash; the API hasn't changed; the library can
+  delegate to subworkers without changing its API, even though it is
+  accepting data using message channels.&lt;/p&gt;
+
+  &lt;p&gt;&lt;a href=&quot;<A HREF="http://www.whatwg.org/demos/workers/crypto/page.html">http://www.whatwg.org/demos/workers/crypto/page.html</A>&quot;&gt;View this example online&lt;/a&gt;.&lt;/p&gt;
+
+(end startConversation block) (beware nested comments)--&gt;
+
+
+  &lt;h4 id=tutorials&gt;&lt;span class=secno&gt;10.1.3 &lt;/span&gt;Tutorials&lt;/h4&gt;
+
+  &lt;h5 id=creating-a-dedicated-worker&gt;&lt;span class=secno&gt;10.1.3.1 &lt;/span&gt;Creating a dedicated worker&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;Creating a worker requires a URL to a JavaScript file. The &lt;code title=dom-Worker&gt;&lt;a href=#dom-worker&gt;Worker()&lt;/a&gt;&lt;/code&gt; constructor is invoked with the
+  URL to that file as its only argument; a worker is then created and
+  returned:&lt;/p&gt;
+
+  &lt;pre&gt;var worker = new Worker('helper.js');&lt;/pre&gt;
+
+
+  &lt;h5 id=communicating-with-a-dedicated-worker&gt;&lt;span class=secno&gt;10.1.3.2 &lt;/span&gt;Communicating with a dedicated worker&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;Dedicated workers use &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects behind the
+  scenes, and thus support all the same features, such as sending
+  structured data, transferring binary data, and transferring other
+  ports.&lt;/p&gt;
+
+  &lt;p&gt;To receive messages from a dedicated worker, use the &lt;code title=handler-worker-onmessage&gt;&lt;a href=#handler-worker-onmessage&gt;onmessage&lt;/a&gt;&lt;/code&gt; &lt;a href=#event-handler-idl-attributes title=&quot;event
+  handler IDL attributes&quot;&gt;event handler IDL attribute&lt;/a&gt; on the
+  &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object:&lt;/p&gt;
+
+  &lt;pre&gt;worker.onmessage = function (event) { ... };&lt;/pre&gt;
+
+  &lt;p&gt;You can also use the &lt;code title=dom-EventTarget-addEventListener&gt;addEventListener()&lt;/code&gt; method.&lt;/p&gt;
+
+  &lt;p class=note&gt;The implicit &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; used by
+  dedicated workers has its &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; implicitly
+  enabled when it is created, so there is no equivanet to the
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; interface's &lt;code title=dom-MessagePort-start&gt;&lt;a href=#dom-messageport-start&gt;start()&lt;/a&gt;&lt;/code&gt; method on the
+  &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;p&gt;To &lt;em&gt;send&lt;/em&gt; data to a worker, use the &lt;code title=dom-Worker-postMessage&gt;&lt;a href=#dom-worker-postmessage&gt;postMessage()&lt;/a&gt;&lt;/code&gt; method.
+  Structured data can be sent over this communication channel. To send
+  &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; objects efficiently (by transferring them
+  rather than cloning them), list them in an array in the second
+  argument.&lt;/p&gt;
+
+  &lt;pre&gt;worker.postMessage({
+  operation: 'find-edges',
+  input: buffer, // an ArrayBuffer object
+  threshold: 0.6,
+}, [buffer]);&lt;/pre&gt;
+
+  &lt;p&gt;To receive a message inside the worker, the &lt;code title=handler-DedicatedWorkerGlobalScope-onmessage&gt;&lt;a href=#handler-dedicatedworkerglobalscope-onmessage&gt;onmessage&lt;/a&gt;&lt;/code&gt;
+  &lt;a href=#event-handler-idl-attributes title=&quot;event handler IDL attributes&quot;&gt;event handler IDL
+  attribute&lt;/a&gt; is used.&lt;/p&gt;
+
+  &lt;pre&gt;onmessage = function (event) { ... };&lt;/pre&gt;
+
+  &lt;p&gt;You can again also use the &lt;code title=dom-EventTarget-addEventListener&gt;addEventListener()&lt;/code&gt;
+  method.&lt;/p&gt;
+
+  &lt;p&gt;In either case, the data is provided in the event object's &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p&gt;To send messages back, you again use &lt;code title=dom-DedicatedWorkerGlobalScope-postMessage&gt;&lt;a href=#dom-dedicatedworkerglobalscope-postmessage&gt;postMessage()&lt;/a&gt;&lt;/code&gt;.
+  It supports the structured data in the same manner.&lt;/p&gt;
+
+  &lt;pre&gt;postMessage(event.data.input, [event.data.input]); // transfer the buffer back&lt;/pre&gt;
+
+
+  &lt;h5 id=shared-workers&gt;&lt;span class=secno&gt;10.1.3.3 &lt;/span&gt;Shared workers&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;Shared workers are identified in one of two ways: either by the
+  URL of the script used to create it, or by explicit name. When
+  created by name, the URL used by the first page to create the worker
+  with that name is the URL of the script that will be used for that
+  worker. This allows multiple applications on a domain to all use a
+  single shared worker to provide a common service, without the
+  applications having to keep track of a common URL for the script
+  used to provide the service.&lt;/p&gt;
+
+  &lt;p class=note&gt;In either case, shared workers are scoped by
+  &lt;a href=#origin&gt;origin&lt;/a&gt;. Two different sites using the same names will
+  not collide.&lt;/p&gt;
+
+  &lt;p&gt;Creating shared workers is done using the &lt;code title=dom-SharedWorker&gt;&lt;a href=#dom-sharedworker&gt;SharedWorker()&lt;/a&gt;&lt;/code&gt; constructor. This
+  constructor takes the URL to the script to use for its first
+  argument, and the name of the worker, if any, as the second
+  argument.&lt;/p&gt;
+
+  &lt;pre&gt;var worker = new SharedWorker('service.js');&lt;/pre&gt;
+
+  &lt;p&gt;Communicating with shared workers is done with explicit
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects. The object returned by the &lt;code title=dom-SharedWorker&gt;&lt;a href=#dom-sharedworker&gt;SharedWorker()&lt;/a&gt;&lt;/code&gt; constructor holds a
+  reference to the port on its &lt;code title=dom-SharedWorker-port&gt;&lt;a href=#dom-sharedworker-port&gt;port&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;pre&gt;worker.port.onmessage = function (event) { ... };
+worker.port.postMessage('some message');
+worker.port.postMessage({ foo: 'structured'; bar: ['data', 'also', 'possible']});&lt;/pre&gt;
+
+  &lt;p&gt;Inside the shared worker, new clients of the worker are announced
+  using the &lt;code title=event-connect&gt;connect&lt;/code&gt; event. The port
+  for the new client is given by the event object's &lt;code title=dom-messageevent-ports&gt;&lt;a href=#dom-messageevent-ports&gt;ports&lt;/a&gt;&lt;/code&gt; array as its first (and
+  only) value.&lt;/p&gt;
+
+  &lt;pre&gt;onconnect = function (event) {
+  var newPort = event.ports[0];
+  // set up a listener
+  newPort.onmessage = function (event) { ... };
+  // send a message back to the port
+  newPort.postMessage('ready!'); // can also send structured data, of course
+};&lt;/pre&gt;
+
+
+
+
+  &lt;h3 id=infrastructure-0&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Infrastructure&lt;/h3&gt;
+
+  &lt;p&gt;There are two kinds of workers; dedicated workers, and shared
+  workers. Dedicated workers, once created, and are linked to their
+  creator; but message ports can be used to communicate from a
+  dedicated worker to multiple other browsing contexts or
+  workers. Shared workers, on the other hand, are named, and once
+  created any script running in the same &lt;a href=#origin&gt;origin&lt;/a&gt; can
+  obtain a reference to that worker and communicate with it.&lt;/p&gt;
+
+
+
+  &lt;h4 id=the-global-scope&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;The global scope&lt;/h4&gt;
+
+  &lt;p&gt;The global scope is the &quot;inside&quot; of a worker.&lt;/p&gt;
+
+  &lt;h5 id=the-workerglobalscope-abstract-interface&gt;&lt;span class=secno&gt;10.2.1.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; abstract interface&lt;/h5&gt;
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=workerglobalscope&gt;WorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  readonly attribute &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; &lt;a href=#dom-workerglobalscope-self title=dom-WorkerGlobalScope-self&gt;self&lt;/a&gt;;
+  readonly attribute &lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt; &lt;a href=#dom-workerglobalscope-location title=dom-WorkerGlobalScope-location&gt;location&lt;/a&gt;;
+
+  void &lt;a href=#dom-workerglobalscope-close title=dom-WorkerGlobalScope-close&gt;close&lt;/a&gt;();
+&lt;!-- v2-onclose  [TreatNonCallableAsNull] attribute &lt;span&gt;Function&lt;/span&gt;? &lt;span title=&quot;handler-WorkerGlobalScope-onclose&quot;&gt;onclose&lt;/span&gt;;
+--&gt;  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-workerglobalscope-onerror title=handler-WorkerGlobalScope-onerror&gt;onerror&lt;/a&gt;;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-workerglobalscope-onoffline title=handler-WorkerGlobalScope-onoffline&gt;onoffline&lt;/a&gt;;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-workerglobalscope-ononline title=handler-WorkerGlobalScope-ononline&gt;ononline&lt;/a&gt;;
+};
+&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; implements &lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;;&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-workerglobalscope-self title=dom-WorkerGlobalScope-self&gt;&lt;code&gt;self&lt;/code&gt;&lt;/dfn&gt; attribute
+  must return the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object itself.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-workerglobalscope-location title=dom-WorkerGlobalScope-location&gt;&lt;code&gt;location&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the &lt;code&gt;&lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt;&lt;/code&gt; object created
+  for the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object when the worker was
+  created. It represents the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the script
+  that was used to initialize the worker, after any redirects.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When a script invokes the &lt;dfn id=dom-workerglobalscope-close title=dom-WorkerGlobalScope-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
+  method on a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, the user agent
+  must run the following steps (atomically):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Discard any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; that
+   have been added to the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task
+   queue&quot;&gt;task queues&lt;/a&gt;.&lt;/p&gt;
+
+&lt;!-- v2-onclose
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
+   event&lt;/span&gt; named &lt;code title=&quot;event-close&quot;&gt;close&lt;/code&gt; at the
+   &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the worker's &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's
+   &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag to
+   true. (This prevents any further tasks from being queued.)&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
+  event types&lt;/a&gt;) that must be supported, as IDL attributes, by
+  objects implementing the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+  interface:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
+   &lt;tbody&gt;&lt;!-- v2-onclose    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-WorkerGlobalScope-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-close&quot;&gt;close&lt;/code&gt; --&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-onerror title=handler-WorkerGlobalScope-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-onoffline title=handler-WorkerGlobalScope-onoffline&gt;&lt;code&gt;onoffline&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-offline&gt;&lt;a href=#event-offline&gt;offline&lt;/a&gt;&lt;/code&gt; &lt;!-- new --&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-ononline title=handler-WorkerGlobalScope-ononline&gt;&lt;code&gt;ononline&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-online&gt;&lt;a href=#event-online&gt;online&lt;/a&gt;&lt;/code&gt; &lt;!-- new --&gt;
+  &lt;/table&gt;&lt;hr&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface must not exist if
+  the interface's &lt;span&gt;relevant namespace object&lt;/span&gt; is a
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+
+
+
+  &lt;h5 id=dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;10.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+
+  &lt;pre class=idl&gt;[Supplemental, NoInterfaceObject]
+interface &lt;dfn id=dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; {
+  void &lt;a href=#dom-dedicatedworkerglobalscope-postmessage title=dom-DedicatedWorkerGlobalScope-postMessage&gt;postMessage&lt;/a&gt;(any message, optional sequence&lt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&gt; transfer);&lt;!--
+  &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-DedicatedWorkerGlobalScope-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-dedicatedworkerglobalscope-onmessage title=handler-DedicatedWorkerGlobalScope-onmessage&gt;onmessage&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;&lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; objects act as if they
+  had an implicit &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; associated with them. This
+  port is part of a channel that is set up when the worker is created,
+  but it is not exposed. This object must never be garbage collected
+  before the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;All messages received by that port must immediately be retargeted
+  at the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-dedicatedworkerglobalscope-postmessage title=dom-DedicatedWorkerGlobalScope-postMessage&gt;&lt;code&gt;postMessage()&lt;/code&gt;&lt;/dfn&gt;&lt;!--
+  and &lt;dfn
+  title=&quot;dom-DedicatedWorkerGlobalScope-startConversation&quot;&gt;&lt;code&gt;startConversation()&lt;/code&gt;&lt;/dfn&gt;--&gt;
+  method&lt;!--s (startConversation)--&gt; on
+  &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; objects must act as if, when
+  invoked, it&lt;!--/they (startConversation)--&gt; immediately invoked the
+  method of the same name on the port, with the same arguments, and
+  returned the same return value.&lt;/p&gt;
+
+  &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
+  event types&lt;/a&gt;) that must be supported, as IDL attributes, by
+  objects implementing the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+  interface:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-dedicatedworkerglobalscope-onmessage title=handler-DedicatedWorkerGlobalScope-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;
+  &lt;/table&gt;&lt;p&gt;For the purposes of the &lt;a href=#application-cache&gt;application cache&lt;/a&gt; networking
+  model, a dedicated worker is an extension of the &lt;a href=#cache-host&gt;cache
+  host&lt;/a&gt; from which it was created.&lt;/p&gt;
+
+
+
+  &lt;h5 id=shared-workers-and-the-sharedworkerglobalscope-interface&gt;&lt;span class=secno&gt;10.2.1.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+
+  &lt;pre class=idl&gt;[Supplemental, NoInterfaceObject]
+interface &lt;dfn id=sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; {
+  readonly attribute DOMString &lt;a href=#dom-sharedworkerglobalscope-name title=dom-SharedWorkerGlobalScope-name&gt;name&lt;/a&gt;;
+  readonly attribute &lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt; &lt;a href=#dom-sharedworkerglobalscope-applicationcache title=dom-SharedWorkerGlobalScope-applicationCache&gt;applicationCache&lt;/a&gt;;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-sharedworkerglobalscope-onconnect title=handler-SharedWorkerGlobalScope-onconnect&gt;onconnect&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;Shared workers receive message ports through &lt;code title=event-WorkerGlobalScope-connect&gt;connect&lt;/code&gt; events on
+  their global object for each connection.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-sharedworkerglobalscope-name title=dom-SharedWorkerGlobalScope-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was assigned when the
+  &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object was created by the
+  &quot;&lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt;&quot; algorithm. Its value represents the name
+  that can be used to obtain a reference to the worker using the
+  &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; constructor.&lt;/p&gt;
+
+  &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
+  event types&lt;/a&gt;) that must be supported, as IDL attributes, by
+  objects implementing the &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+  interface:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-sharedworkerglobalscope-onconnect title=handler-SharedWorkerGlobalScope-onconnect&gt;&lt;code&gt;onconnect&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-connect&gt;connect&lt;/code&gt;
+  &lt;/table&gt;&lt;p&gt;For the purposes of the &lt;a href=#application-cache&gt;application cache&lt;/a&gt; networking
+  model, a shared worker is its own &lt;a href=#cache-host&gt;cache host&lt;/a&gt;. The
+  &lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt; algorithm takes care of associating the
+  worker with an &lt;a href=#application-cache&gt;application cache&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p class=note&gt;The &lt;code title=dom-SharedWorkerGlobalScope-applicationCache&gt;&lt;a href=#dom-sharedworkerglobalscope-applicationcache&gt;applicationCache&lt;/a&gt;&lt;/code&gt;
+  attribute returns the &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object for the
+  worker.&lt;/p&gt;&lt;!-- normative conf criteria is in the appcache section
+  --&gt;
+
+
+  &lt;h4 id=origins-of-workers&gt;&lt;span class=secno&gt;10.2.2 &lt;/span&gt;Origins of workers&lt;/h4&gt;
+
+  &lt;p&gt;Both the &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
+  origin&lt;/a&gt; of scripts running in workers are the
+  &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; given in that
+  the worker's &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;location&lt;/a&gt;&lt;/code&gt; attribute
+  represents.&lt;/p&gt;
+
+
+
+  &lt;h4 id=the-event-loop&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;The event loop&lt;/h4&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object has an &lt;a href=#event-loop&gt;event
+  loop&lt;/a&gt; distinct from those defined for &lt;a href=#unit-of-related-similar-origin-browsing-contexts title=&quot;unit of
+  related similar-origin browsing contexts&quot;&gt;units of related
+  similar-origin browsing contexts&lt;/a&gt;. This &lt;a href=#event-loop&gt;event
+  loop&lt;/a&gt; has no associated &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, and its
+  &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt; only have events,
+  callbacks, and networking activity as &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt;. The processing model of these
+  &lt;a href=#event-loop title=&quot;event loop&quot;&gt;event loops&lt;/a&gt; is defined below in the
+  &lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt; algorithm.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object also has a &lt;dfn id=dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/dfn&gt; flag, which must
+  initially be false, but which can get set to true by the algorithms
+  in the processing model section below.&lt;/p&gt;
+
+  &lt;p&gt;Once the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag is set to
+  true, the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task
+  queues&lt;/a&gt; must discard any further &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; that would be added to them (tasks
+  already on the queue are unaffected except where otherwise
+  specified). Effectively, once the &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag is true,
+  timers stop firing, notifications for all pending asynchronous
+  operations are dropped, etc.&lt;/p&gt;
+
+
+
+  &lt;h4 id=&quot;the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;10.2.4 &lt;/span&gt;The worker's lifetime&lt;/h4&gt;
+
+  &lt;p&gt;Workers communicate with other workers and with &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt; through &lt;a href=#channel-messaging title=&quot;channel messaging&quot;&gt;message channels&lt;/a&gt; and their
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;worker global
+  scope&lt;/var&gt; has a list of &lt;dfn id=&quot;the-worker's-ports&quot;&gt;the worker's ports&lt;/dfn&gt;, which
+  consists of all the &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects that are
+  entangled with another port and that have one (but only one) port
+  owned by &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. This list includes
+  &lt;!--all the &lt;code&gt;MessagePort&lt;/code&gt; objects that are in events
+  pending in the &lt;span&gt;event loop&lt;/span&gt;, as well as (commented out
+  because in practice it makes no difference either way as far as I
+  can tell, and it would be hard to strictly implement since these
+  ports might not yet be across the thread boundary)--&gt; the implicit
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; in the case of &lt;a href=#dedicatedworkerglobalscope title=DedicatedWorkerGlobalScope&gt;dedicated workers&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; also has a list of &lt;dfn id=&quot;the-worker's-workers&quot;&gt;the
+  worker's workers&lt;/dfn&gt;. Initially this list is empty; it is
+  populated when the worker creates or obtains further workers.&lt;/p&gt;
+
+  &lt;p&gt;Finally, each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; also has a list of
+  &lt;dfn id=&quot;the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/dfn&gt;. Initially this list
+  is empty; it is populated when the worker is created.&lt;/p&gt;
+
+  &lt;p&gt;Whenever a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; is &lt;dfn id=&quot;add-a-document-to-the-worker's-documents&quot; title=&quot;add a document to the worker's documents&quot;&gt;added to the
+  worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/dfn&gt;, the user agent must, for each
+  worker in the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; whose list
+  of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; does not contain
+  &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;a href=&quot;#add-a-document-to-the-worker's-documents&quot; title=&quot;add a document to the worker's
+  documents&quot;&gt;add &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;q&lt;/var&gt;'s
+  &lt;code&gt;WorkerGlobalScope&lt;/code&gt; owner's list of &lt;span&gt;the worker's
+  &lt;code&gt;Document&lt;/code&gt;s&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt; &lt;!-- suggestions welcome
+  on making this sentence into understandable English --&gt;
+
+  &lt;p&gt;Whenever a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object is &lt;a href=#discard-a-document title=&quot;discard a
+  Document&quot;&gt;discarded&lt;/a&gt;, it must be removed from the list of
+  &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; of each worker
+  whose list contains that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Given a &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;
+  when creating or obtaining a worker, the &lt;dfn id=list-of-relevant-document-objects-to-add&gt;list of relevant
+  &lt;code&gt;Document&lt;/code&gt; objects to add&lt;/dfn&gt; depends on the type of
+  &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;. If &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; is a
+  &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. if we are creating a
+  nested worker), then the relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are the
+  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s that are in &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s own list
+  of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, and the relevant
+  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is just the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is the
+  &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;A worker is said to be a &lt;dfn id=permissible-worker&gt;permissible worker&lt;/dfn&gt; if its
+  list of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; is not
+  empty.&lt;/p&gt;
+
+  &lt;p&gt;A worker is said to be a &lt;dfn id=protected-worker&gt;protected worker&lt;/dfn&gt; if it is a
+  &lt;a href=#permissible-worker&gt;permissible worker&lt;/a&gt; and either it has outstanding
+  timers, database transactions, or network connections, or its list
+  of &lt;a href=&quot;#the-worker's-ports&quot;&gt;the worker's ports&lt;/a&gt; is not empty, or its
+  &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; is actually a
+  &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. the worker is a
+  shared worker).&lt;/p&gt;
+
+  &lt;p&gt;A worker is said to be an &lt;dfn id=active-needed-worker&gt;active needed worker&lt;/dfn&gt; if any
+  of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects in &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's
+  &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; are &lt;a href=#fully-active&gt;fully active&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A worker is said to be a &lt;dfn id=suspendable-worker&gt;suspendable worker&lt;/dfn&gt; if it is
+  not an &lt;a href=#active-needed-worker&gt;active needed worker&lt;/a&gt; but it is a
+  &lt;a href=#permissible-worker&gt;permissible worker&lt;/a&gt;.&lt;/p&gt;
+
+
+  &lt;h4 id=processing-model-4&gt;&lt;span class=secno&gt;10.2.5 &lt;/span&gt;Processing model&lt;/h4&gt;
+
+  &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with
+  &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;owner browsing context&lt;/var&gt;, a
+  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;, an
+  &lt;a href=#origin&gt;origin&lt;/a&gt; &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with
+  global scope &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;, it must run
+  the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;
+
+    &lt;p&gt;Create a separate parallel execution environment (i.e. a
+    separate thread or process or equivalent construct), and run the
+    rest of these steps asynchronously in that context.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is actually a
+   &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. the worker is a
+   shared worker), and there are any &lt;a href=#relevant-application-cache title=&quot;relevant application
+   cache&quot;&gt;relevant application caches&lt;/a&gt; that are identified by a
+   manifest URL with the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; and that have &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; as one of
+   their entries, &lt;em&gt;not&lt;/em&gt; excluding entries marked as &lt;a href=#concept-appcache-foreign title=concept-appcache-foreign&gt;foreign&lt;/a&gt;, then associate the
+   &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; with the &lt;a href=#concept-appcache-selection title=concept-appcache-selection&gt;most appropriate application
+   cache&lt;/a&gt; of those that match.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Attempt to &lt;a href=#fetch&gt;fetch&lt;/a&gt; the resource identified by &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, from the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;,
+    with the &lt;i&gt;synchronous flag&lt;/i&gt; set and the &lt;i&gt;force same-origin
+    flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not http-origin privacy sensitive (looking
+    forward to CORS) --&gt;
+
+    &lt;p&gt;If the attempt fails, then for each &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; or
+    &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object associated with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+    &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at that object. Abort these
+    steps.&lt;/p&gt;
+
+    &lt;p&gt;If the attempt succeeds, then let &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; be
+    the script resource &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error
+    handling&lt;/a&gt;.
+    &lt;/p&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; be JavaScript.&lt;/p&gt;
+
+    &lt;p class=note&gt;As with &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; elements, the MIME
+    type of the script is ignored. Unlike with &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt;
+    elements, there is no way to override the type. It's always
+    assumed to be JavaScript.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;A new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is now
+    created, as follows.&lt;/p&gt;
+
+    &lt;p&gt;Create a new &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt;
+    set up as appropriate for the scripting language &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Parse/compile/initialize &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; using that
+    &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt;, as appropriate for &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;, and thus obtain a &lt;a href=#list-of-code-entry-points&gt;list of code
+    entry-points&lt;/a&gt;; set the &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt; to
+    the entry-point for any executable code to be immediately run.&lt;/p&gt;
+
+    &lt;p&gt;Set the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Set the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;owner browsing context&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Set the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;owner
+    document&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Set the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt; to
+    UTF-8. (This is just used for encoding non-ASCII characters in the
+    query component of URLs.)&lt;/p&gt;
+
+    &lt;p&gt;Set the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;strong&gt;Closing orphan workers&lt;/strong&gt;: Start monitoring the
+    worker such that no sooner than it stops being either a
+    &lt;a href=#protected-worker&gt;protected worker&lt;/a&gt; or a &lt;a href=#suspendable-worker&gt;suspendable
+    worker&lt;/a&gt;, and no later than it stops being a
+    &lt;a href=#permissible-worker&gt;permissible worker&lt;/a&gt;, &lt;var title=&quot;&quot;&gt;worker global
+    scope&lt;/var&gt;'s &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag is set
+    to true&lt;!-- v2-onclose and &lt;span title=&quot;queue a task&quot;&gt;a task is
+    queued&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt; named &lt;code
+    title=&quot;event-close&quot;&gt;close&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;worker global
+    scope&lt;/var&gt;--&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;strong&gt;Suspending workers&lt;/strong&gt;: Start monitoring the
+    worker, such that whenever &lt;var title=&quot;&quot;&gt;worker global
+    scope&lt;/var&gt;'s &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag is false
+    and the worker is a &lt;a href=#suspendable-worker&gt;suspendable worker&lt;/a&gt;, the user
+    agent suspends execution of script in that worker until such time
+    as either the &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag switches
+    to true or the worker stops being a &lt;a href=#suspendable-worker&gt;suspendable
+    worker&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/a&gt; to the
+    &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code
+    entry-point&lt;/a&gt;&lt;/i&gt;, and let that run until it either returns, fails
+    to catch an exception, or gets prematurely aborted by the
+    &quot;&lt;a href=#kill-a-worker&gt;kill a worker&lt;/a&gt;&quot; or &quot;&lt;a href=#terminate-a-worker&gt;terminate a worker&lt;/a&gt;&quot;
+    algorithms defined below.&lt;/p&gt;
+
+&lt;!-- v2-onclose
+    &lt;p class=&quot;note&quot;&gt;If the script gets aborted by the &quot;&lt;span&gt;kill a
+    worker&lt;/span&gt;&quot; algorithm, then that same algorithm will cause
+    there to only be a single &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt;
+    in the &lt;span&gt;event loop&lt;/span&gt; at the next step, namely the task
+    for the &lt;code title=&quot;message-close&quot;&gt;close&lt;/code&gt; event. The
+    &quot;&lt;span&gt;terminate a worker&lt;/span&gt;&quot; algorithm removes all the
+    events.&lt;/p&gt;
+--&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is actually a
+   &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. the worker is
+   a dedicated worker), then enable the &lt;a href=#port-message-queue&gt;port message
+   queue&lt;/a&gt; of the worker's implicit port.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;i title=&quot;&quot;&gt;Event loop&lt;/i&gt;: Wait until either there is a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; in one of the &lt;a href=#event-loop&gt;event
+    loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt; or &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag is set
+    to true.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Run the oldest task on one of the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s
+    &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;, if any. The user
+    agent may pick any &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p class=note&gt;The handling of events or the execution of
+    callbacks might get prematurely aborted by the &quot;&lt;a href=#kill-a-worker&gt;kill a
+    worker&lt;/a&gt;&quot; or &quot;&lt;a href=#terminate-a-worker&gt;terminate a worker&lt;/a&gt;&quot; algorithms
+    defined below.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt; is now owned by the worker's
+    &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, release it so that it is once again
+    free.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Remove the task just run in the earlier step, if any, from its
+    &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If there are any more events in the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s
+    &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt; or if &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag is set
+    to false, then jump back to the step above labeled &lt;i&gt;&lt;a href=#event-loop&gt;event
+    loop&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Empty the &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s &lt;a href=#list-of-active-timeouts&gt;list
+    of active timeouts&lt;/a&gt; and its &lt;a href=#list-of-active-intervals&gt;list of active
+    intervals&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Disentangle all the ports in the list of &lt;a href=&quot;#the-worker's-ports&quot;&gt;the worker's
+    ports&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+&lt;!-- v2-onclose
+   &lt;li&gt;
+
+    &lt;p&gt;For each &lt;code&gt;Worker&lt;/code&gt; or &lt;code&gt;SharedWorker&lt;/code&gt;
+    object associated with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;,
+    &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt;
+    named &lt;code title=&quot;event-close&quot;&gt;close&lt;/code&gt; at that object.&lt;/p&gt;
+
+   &lt;/li&gt;
+--&gt;
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user agent is to &lt;dfn id=kill-a-worker&gt;kill a worker&lt;/dfn&gt; it must
+  run the following steps in parallel with the worker's main loop (the
+  &quot;&lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt;&quot; processing model defined above):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;!-- v2-onclose
+   &lt;li&gt;&lt;p&gt;If the worker's &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object's
+   &lt;span title=&quot;dom-WorkerGlobalScope-closing&quot;&gt;closing&lt;/span&gt; flag is
+   false, &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
+   event&lt;/span&gt; named &lt;code title=&quot;event-close&quot;&gt;close&lt;/code&gt; at the
+   worker's &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+--&gt;&lt;li&gt;&lt;p&gt;Set the worker's &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag to
+   true.&lt;/li&gt;
+
+&lt;!-- v2-onclose
+   &lt;li&gt;&lt;p&gt;Wait a user-agent-defined amount of time. If the &quot;&lt;span&gt;run
+   a worker&lt;/span&gt;&quot; processing model defined above immediately starts
+   running event listeners registered for the &lt;code
+   title=&quot;event-close&quot;&gt;close&lt;/code&gt; event, this time should not be
+   zero &mdash; the idea is that the &lt;code
+   title=&quot;event-close&quot;&gt;close&lt;/code&gt; event can be used to clean up
+   when shutting down unexpectedly.&lt;/p&gt;&lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt;
+   queued in the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task
+   queue&quot;&gt;task queues&lt;/a&gt;&lt;!-- v2-onclose other than the &lt;code
+   title=&quot;event-close&quot;&gt;close&lt;/code&gt; event that this algorithm just
+   added--&gt;, discard them without processing them.&lt;/li&gt;
+
+&lt;!-- v2-onclose
+   &lt;li&gt;&lt;p&gt;If the &lt;code title=&quot;event-close&quot;&gt;close&lt;/code&gt; event that
+   this algorithm just queued hasn't yet been dispatched, then abort
+   the script currently running in the worker.&lt;/p&gt;&lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;&lt;p&gt;Wait a user-agent-defined amount of time.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Abort the script currently running in the worker&lt;!--
+   v2-onclose (if any script is running, then it will be a handler for
+   the &lt;code title=&quot;event-close&quot;&gt;close&lt;/code&gt; event)--&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;User agents may invoke the &quot;&lt;a href=#kill-a-worker&gt;kill a worker&lt;/a&gt;&quot;
+  processing model on a worker at any time, e.g. in response to user
+  requests, in response to CPU quota management, or when a worker
+  stops being an &lt;a href=#active-needed-worker&gt;active needed worker&lt;/a&gt; if the worker
+  continues executing even after its &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag was
+  set to true.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When a user agent is to &lt;dfn id=terminate-a-worker&gt;terminate a worker&lt;/dfn&gt; it must run
+  the following steps in parallel with the worker's main loop (the
+  &quot;&lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt;&quot; processing model defined above):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the worker's &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's
+   &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag to
+   true.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt;
+   queued in the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task
+   queue&quot;&gt;task queues&lt;/a&gt;, discard them without processing
+   them.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Abort the script currently running in the worker.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the worker's &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object is
+   actually a &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. the
+   worker is a dedicated worker), then empty the &lt;a href=#port-message-queue&gt;port message
+   queue&lt;/a&gt; of the port that the worker's implicit port is
+   entangled with.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for the tasks mentioned above is the
+  &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task source&lt;/a&gt;.&lt;/p&gt;
+
+
+  &lt;h4 id=runtime-script-errors-0&gt;&lt;span class=secno&gt;10.2.6 &lt;/span&gt;Runtime script errors&lt;/h4&gt;
+
+  &lt;p&gt;Whenever an uncaught runtime script error occurs in one of the
+  worker's scripts, if the error did not occur while handling a
+  previous script error, the user agent must &lt;a href=#report-the-error&gt;report the
+  error&lt;/a&gt; using the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;code title=handler-WorkerGlobalScope-onerror&gt;&lt;a href=#handler-workerglobalscope-onerror&gt;onerror&lt;/a&gt;&lt;/code&gt;
+  attribute.
+  &lt;/p&gt;
+
+  &lt;p&gt;For shared workers, if the error is still &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt; afterwards, or if
+  the error occurred while handling a previous script error, the error
+  may be reported to the user.
+  &lt;/p&gt;
+
+  &lt;p&gt;For dedicated workers, if the error is still &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt; afterwards, or if
+  the error occurred while handling a previous script error, the user
+  agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to fire an event that uses the
+  &lt;code&gt;&lt;a href=#errorevent&gt;ErrorEvent&lt;/a&gt;&lt;/code&gt; interface, with the name &lt;code title=event-error&gt;error&lt;/code&gt;, that doesn't bubble and is
+  cancelable, with its &lt;code title=dom-ErrorEvent-message&gt;&lt;a href=#dom-errorevent-message&gt;message&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-ErrorEvent-filename&gt;&lt;a href=#dom-errorevent-filename&gt;filename&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-ErrorEvent-lineno&gt;&lt;a href=#dom-errorevent-lineno&gt;lineno&lt;/a&gt;&lt;/code&gt; attributes initialized
+  appropriately, at the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object associated with the
+  worker. If the event is not canceled, the user agent must act as if
+  the uncaught runtime script error had occurred in the global scope
+  that the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object is in, thus repeating the entire
+  runtime script error reporting process one level up.&lt;/p&gt;
+
+  &lt;p&gt;If the implicit port connecting the worker to its
+  &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object has been disentangled (i.e. if the parent
+  worker has been terminated), then the user agent must act as if the
+  &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object had no &lt;code title=event-error&gt;error&lt;/code&gt; event handler and as if that
+  worker's &lt;code title=handler-WorkerGlobalScope-onerror&gt;&lt;a href=#handler-workerglobalscope-onerror&gt;onerror&lt;/a&gt;&lt;/code&gt; attribute
+  was null, but must otherwise act as described above.&lt;/p&gt;
+
+  &lt;p class=note&gt;Thus, error reports proagate up to the chain of
+  dedicated workers up to the original &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, even if
+  some of the workers along this chain have been terminated and
+  garbage collected.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for the task mentioned above is the
+  &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task source&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#erroreventinit&gt;ErrorEventInit&lt;/a&gt; eventInitDict)]
+interface &lt;dfn id=errorevent&gt;ErrorEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
+  readonly attribute DOMString &lt;a href=#dom-errorevent-message title=dom-ErrorEvent-message&gt;message&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-errorevent-filename title=dom-ErrorEvent-filename&gt;filename&lt;/a&gt;;
+  readonly attribute unsigned long &lt;a href=#dom-errorevent-lineno title=dom-ErrorEvent-lineno&gt;lineno&lt;/a&gt;;
+};
+
+dictionary &lt;dfn id=erroreventinit&gt;ErrorEventInit&lt;/dfn&gt; : &lt;a href=#eventinit&gt;EventInit&lt;/a&gt; {
+  DOMString message;
+  DOMString filename;
+  unsigned long lineno;
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-errorevent-message title=dom-ErrorEvent-message&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; attribute
+  must return the value it was initialized to. When the object is
+  created, this attribute must be initialized to the empty string. It
+  represents the error message.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-errorevent-filename title=dom-ErrorEvent-filename&gt;&lt;code&gt;filename&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to the empty
+  string. It represents the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the script in
+  which the error originally occurred.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-errorevent-lineno title=dom-ErrorEvent-lineno&gt;&lt;code&gt;lineno&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to zero. It
+  represents the line number where the error occurred in the
+  script.&lt;/p&gt;
+
+
+
+  &lt;h4 id=creating-workers&gt;&lt;span class=secno&gt;10.2.7 &lt;/span&gt;Creating workers&lt;/h4&gt;
+
+  &lt;h5 id=the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;10.2.7.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt;&lt;/code&gt; abstract interface&lt;/h5&gt;
+
+  &lt;pre class=idl&gt;[Supplemental, NoInterfaceObject]
+interface &lt;dfn id=abstractworker&gt;AbstractWorker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-abstractworker-onerror title=handler-AbstractWorker-onerror&gt;onerror&lt;/a&gt;;
+&lt;!-- v2-onclose  [TreatNonCallableAsNull] attribute &lt;span&gt;Function&lt;/span&gt;? &lt;span title=&quot;handler-AbstractWorker-onclose&quot;&gt;onclose&lt;/span&gt;; --&gt;
+};&lt;/pre&gt;
+
+  &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
+  event types&lt;/a&gt;) that must be supported, as IDL attributes, by
+  objects implementing the &lt;code&gt;&lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt;&lt;/code&gt; interface:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-abstractworker-onerror title=handler-AbstractWorker-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
+&lt;!-- v2-onclose    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-AbstractWorker-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-close&quot;&gt;close&lt;/code&gt; --&gt;
+  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.7.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+
+  &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL)]
+interface &lt;dfn id=worker&gt;Worker&lt;/dfn&gt; : &lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt; {
+  void &lt;a href=#dom-worker-terminate title=dom-Worker-terminate&gt;terminate&lt;/a&gt;();
+
+  void &lt;a href=#dom-worker-postmessage title=dom-Worker-postMessage&gt;postMessage&lt;/a&gt;(any message, optional sequence&lt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&gt; transfer);&lt;!--
+  &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-Worker-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-worker-onmessage title=handler-Worker-onmessage&gt;onmessage&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-worker-terminate title=dom-Worker-terminate&gt;&lt;code&gt;terminate()&lt;/code&gt;&lt;/dfn&gt; method,
+  when invoked, must cause the &quot;&lt;a href=#terminate-a-worker&gt;terminate a worker&lt;/a&gt;&quot;
+  algorithm to be run on the worker with with the object is
+  associated.&lt;/p&gt;
+
+  &lt;p&gt;&lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; objects act as if they had an implicit
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; associated with them. This port is part of
+  a channel that is set up when the worker is created, but it is not
+  exposed. This object must never be garbage collected before the
+  &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;All messages received by that port must immediately be retargeted
+  at the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-worker-postmessage title=dom-Worker-postMessage&gt;&lt;code&gt;postMessage()&lt;/code&gt;&lt;/dfn&gt;&lt;!--
+  and &lt;dfn
+  title=&quot;dom-Worker-startConversation&quot;&gt;&lt;code&gt;startConversation()&lt;/code&gt;&lt;/dfn&gt;--&gt;
+  method&lt;!--s (startConversation)--&gt; on &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; objects
+  must act as if, when invoked, it&lt;!--/they (startConversation)--&gt;
+  immediately invoked the method of the same name on the port, with
+  the same arguments, and returned the same return value.&lt;/p&gt;
+
+  &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
+  event types&lt;/a&gt;) that must be supported, as IDL attributes, by
+  objects implementing the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-worker-onmessage title=handler-Worker-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;
+  &lt;/table&gt;&lt;hr&gt;&lt;p&gt;When the &lt;dfn id=dom-worker title=dom-Worker&gt;&lt;code&gt;Worker(&lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor is invoked, the
+  user agent must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; argument relative to the &lt;a href=#entry-script&gt;entry
+   script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;,
+   when the method is invoked.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If this fails, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+   exception.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the resulting &lt;a href=#absolute-url&gt;absolute
+    URL&lt;/a&gt; is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
+    origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, then throw a
+    &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+
+    &lt;p class=note&gt;Thus, scripts must be external files with the same
+    scheme as the original page: you can't load a script from a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; or
+    &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt;
+    page couldn't start workers using scripts with &lt;code&gt;http:&lt;/code&gt;
+    URLs.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+   object. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this new
+   object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object, associated with
+   &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; be this new object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt;
+   owned by the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global
+   object&lt;/a&gt; of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that
+   invoked the constructor. Let this be the &lt;var title=&quot;&quot;&gt;outside
+   port&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Associate the &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt;
+   owned by &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; and
+   &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;, and run the following
+   steps asynchronously.&lt;/li&gt;
+
+&lt;!-- (this is done by the &quot;run a worker&quot; algorithm)
+   &lt;li&gt;&lt;p&gt;Enable &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;'s &lt;span&gt;port message
+   queue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;&lt;p&gt;Enable &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;'s &lt;a href=#port-message-queue&gt;port message
+   queue&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt; be the &lt;a href=#list-of-relevant-document-objects-to-add&gt;list of relevant
+    &lt;code&gt;Document&lt;/code&gt; objects to add&lt;/a&gt; given the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that invoked the
+    constructor.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=&quot;#add-a-document-to-the-worker's-documents&quot; title=&quot;add a document to the worker's documents&quot;&gt;Add to
+    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s list of &lt;span&gt;the
+    worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/span&gt;&lt;/a&gt; the
+    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects in &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt;
+    of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that invoked the
+    constructor is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. we
+    are creating a nested worker), add &lt;var title=&quot;&quot;&gt;worker global
+    scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
+    &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that invoked the
+    constructor.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for the resulting &lt;a href=#absolute-url&gt;absolute
+    URL&lt;/a&gt;, with the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; of the
+    script that invoked the method as the &lt;var title=&quot;&quot;&gt;owner browsing
+    context&lt;/var&gt;, with the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; of the
+    script that invoked the method as the &lt;var title=&quot;&quot;&gt;owner
+    document&lt;/var&gt;, with the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry
+    script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with
+    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; as the global scope.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
+  object&lt;/a&gt; is either a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object
+  implementing the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+
+  &lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.7.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+
+  &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name)]
+interface &lt;dfn id=sharedworker&gt;SharedWorker&lt;/dfn&gt; : &lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt; {
+  readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-sharedworker-port title=dom-SharedWorker-port&gt;port&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-sharedworker-port title=dom-SharedWorker-port&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was assigned by the object's
+  constructor. It represents the &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; for
+  communicating with the shared worker.&lt;/p&gt;
+
+  &lt;p&gt;When the &lt;dfn id=dom-sharedworker title=dom-SharedWorker&gt;&lt;code&gt;SharedWorker(&lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  constructor is invoked, the user agent must run the following
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; argument.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If this fails, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+   exception.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; be the
+   resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; be the value of the second
+   argument, or the empty string if the second argument was
+   omitted.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is
+    not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the origin of the
+    &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt;
+    exception.&lt;/p&gt;
+
+    &lt;p class=note&gt;Thus, scripts must be external files with the same
+    scheme as the original page: you can't load a script from a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; or
+    &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and a &lt;code&gt;https:&lt;/code&gt;
+    page couldn't start workers using scripts with &lt;code&gt;http:&lt;/code&gt;
+    URLs.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt; be the &lt;a href=#list-of-relevant-document-objects-to-add&gt;list of relevant
+    &lt;code&gt;Document&lt;/code&gt; objects to add&lt;/a&gt; given the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that invoked the
+    constructor.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Execute the following substeps atomically:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object, which will
+     shortly be associated with a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+     object. Let this &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object be &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt;
+     owned by the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global
+     object&lt;/a&gt; of the script that invoked the method. Let this be
+     the &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Assign &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; to the &lt;code title=dom-SharedWorker-port&gt;&lt;a href=#dom-sharedworker-port&gt;port&lt;/a&gt;&lt;/code&gt; attribute of &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be
+     null.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; is not the empty string and
+     there exists a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object whose
+     &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag
+     is false, whose &lt;code title=dom-WorkerGlobalScope-name&gt;name&lt;/code&gt; attribute is
+     exactly equal to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;, and whose &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;location&lt;/a&gt;&lt;/code&gt; attribute
+     represents an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; with the &lt;a href=#same-origin&gt;same
+     origin&lt;/a&gt; as &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be that
+     &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; is the empty string
+     and there exists a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
+     whose &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt;
+     flag is false, whose &lt;code title=dom-WorkerGlobalScope-name&gt;name&lt;/code&gt; attribute is the
+     empty string, and whose &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;location&lt;/a&gt;&lt;/code&gt; attribute
+     represents an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that is exactly equal to
+     &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;worker
+     global scope&lt;/var&gt; be that &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+     object.&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is not null, then
+      run these steps:&lt;/p&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;location&lt;/a&gt;&lt;/code&gt;
+       attribute represents an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that is not
+       exactly equal to &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then throw a
+       &lt;code&gt;&lt;a href=#urlmismatcherror&gt;URLMismatchError&lt;/a&gt;&lt;/code&gt; exception and abort all these
+       steps.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt;
+       object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;worker global
+       scope&lt;/var&gt;. Let this be the &lt;var title=&quot;&quot;&gt;inside
+       port&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;
+       and &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; and perform the next
+       step asynchronously.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Create an event that uses the &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt;
+       interface, with the name &lt;code title=event-connect&gt;connect&lt;/code&gt;, which does not bubble, is
+       not cancelable, has no default action, has a &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute whose value
+       is initialized to the empty string and has a &lt;code title=dom-MessageEvent-ports&gt;&lt;a href=#dom-messageevent-ports&gt;ports&lt;/a&gt;&lt;/code&gt; attribute whose
+       value is initialized to a &lt;a href=#dfn-read-only-array title=dfn-read-only-array&gt;read only&lt;/a&gt; array containing
+       only the newly created port, and &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+       dispatch the event at &lt;var title=&quot;&quot;&gt;worker global
+       scope&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;&lt;a href=&quot;#add-a-document-to-the-worker's-documents&quot; title=&quot;add a document to the worker's documents&quot;&gt;Add to
+        &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s list of &lt;span&gt;the
+        worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/span&gt;&lt;/a&gt; the
+        &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects in &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt;.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global
+        object&lt;/a&gt; of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;
+        that invoked the constructor is a
+        &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the
+        worker's workers&lt;/a&gt; of the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+        object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global
+        object&lt;/a&gt; of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;
+        that invoked the constructor.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Abort all these steps.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+     object. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this new
+     object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-SharedWorkerGlobalScope-name&gt;&lt;a href=#dom-sharedworkerglobalscope-name&gt;name&lt;/a&gt;&lt;/code&gt; attribute of
+     &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt;
+     owned by &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; and
+     &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; and perform the remaining
+   steps asynchronously.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create an event that uses the &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt;
+   interface, with the name &lt;code title=event-connect&gt;connect&lt;/code&gt;, which does not bubble, is not
+   cancelable, has no default action, has a &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute whose value is
+   initialized to the empty string and has a &lt;code title=dom-MessageEvent-ports&gt;&lt;a href=#dom-messageevent-ports&gt;ports&lt;/a&gt;&lt;/code&gt; attribute whose value
+   is initialized to a &lt;a href=#dfn-read-only-array title=dfn-read-only-array&gt;read
+   only&lt;/a&gt; array containing only the newly created port, and
+   &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to dispatch the event at &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=&quot;#add-a-document-to-the-worker's-documents&quot; title=&quot;add a document to the worker's documents&quot;&gt;Add to
+    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s list of &lt;span&gt;the
+    worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/span&gt;&lt;/a&gt; the
+    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects in &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt;
+    of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that invoked the
+    constructor is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the
+    worker's workers&lt;/a&gt; of the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+    object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global
+    object&lt;/a&gt; of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;
+    that invoked the constructor.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;,
+    with the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; of the script that
+    invoked the method as the &lt;var title=&quot;&quot;&gt;owner browsing
+    context&lt;/var&gt;, with the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; of the
+    script that invoked the method as the &lt;var title=&quot;&quot;&gt;owner
+    document&lt;/var&gt;, with the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry
+    script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with
+    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; as the global scope.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
+  object&lt;/a&gt; is either a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object
+  implementing the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for the tasks mentioned above is the
+  &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task source&lt;/a&gt;.&lt;/p&gt;
+
+
+
+  &lt;h3 id=apis-available-to-workers&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;APIs available to workers&lt;/h3&gt;
+
+  &lt;pre class=idl&gt;[NoInterfaceObject]
+interface &lt;dfn id=workerutils&gt;WorkerUtils&lt;/dfn&gt; {
+  void &lt;a href=#dom-workerglobalscope-importscripts title=dom-WorkerGlobalScope-importScripts&gt;importScripts&lt;/a&gt;(DOMString... urls);
+  readonly attribute &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; &lt;a href=#dom-worker-navigator title=dom-worker-navigator&gt;navigator&lt;/a&gt;;
+};
+&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt; implements &lt;a href=#windowtimers&gt;WindowTimers&lt;/a&gt;;
+&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt; implements &lt;a href=#windowbase64&gt;WindowBase64&lt;/a&gt;;&lt;/pre&gt;
+
+
+  &lt;p&gt;The DOM APIs (&lt;code&gt;&lt;a href=#node&gt;Node&lt;/a&gt;&lt;/code&gt; objects, &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
+  objects, etc) are not available to workers in this version of this
+  specification.&lt;/p&gt;
+
+
+  &lt;h4 id=importing-scripts-and-libraries&gt;&lt;span class=secno&gt;10.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/h4&gt;
+
+  &lt;p&gt;When a script invokes the &lt;dfn id=dom-workerglobalscope-importscripts title=dom-WorkerGlobalScope-importScripts&gt;&lt;code&gt;importScripts(&lt;var title=&quot;&quot;&gt;urls&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method on a
+  &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, the user agent must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If there are no arguments, return without doing
+   anything. Abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; each
+   argument.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If any fail, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+   exception.&lt;/li&gt;
+
+&lt;!--
+   &lt;li&gt;&lt;p&gt;If any of the resulting &lt;span title=&quot;absolute URL&quot;&gt;absolute
+   URLs&lt;/span&gt; have an &lt;span&gt;origin&lt;/span&gt; that is not the &lt;span
+   title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the origin of the script that
+   invoked the method, then throw a &lt;code&gt;SecurityError&lt;/code&gt;
+   exception.&lt;/p&gt;&lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Attempt to &lt;a href=#fetch&gt;fetch&lt;/a&gt; each resource identified by the
+    resulting &lt;a href=#absolute-url title=&quot;absolute URL&quot;&gt;absolute URLs&lt;/a&gt;, from
+    the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;, with the
+    &lt;i&gt;synchronous flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not http-origin privacy
+    sensitive --&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each argument in turn, in the order given, starting with
+    the first one, run these substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;
+
+      &lt;p&gt;Wait for the fetching attempt for the corresponding resource
+      to complete.&lt;/p&gt;
+
+      &lt;p&gt;If the fetching attempt failed, throw a
+      &lt;code&gt;&lt;a href=#networkerror&gt;NetworkError&lt;/a&gt;&lt;/code&gt; exception and abort all these
+      steps.&lt;/p&gt;
+
+      &lt;p&gt;If the attempt succeeds, then let &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; be
+      the script resource &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error
+      handling&lt;/a&gt;.
+      &lt;/p&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; be JavaScript.&lt;/p&gt;
+
+      &lt;p class=note&gt;As with the worker's script, the script here is
+      always assumed to be JavaScript, regardless of the MIME
+      type.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; as the script source and &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; as the scripting language, using the
+      same global object, browsing context, URL character encoding,
+      base URL, and script group as the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that was created by the
+      worker's &lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt; algorithm.&lt;/p&gt;
+
+      &lt;p&gt;Let the newly created &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; run until it either
+      returns, fails to parse, fails to catch an exception, or gets
+      prematurely aborted by the &quot;&lt;a href=#kill-a-worker&gt;kill a worker&lt;/a&gt;&quot; or
+      &quot;&lt;a href=#terminate-a-worker&gt;terminate a worker&lt;/a&gt;&quot; algorithms defined above.&lt;/p&gt;
+
+      &lt;p&gt;If it failed to parse, then throw an ECMAScript
+      &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort all these
+      steps. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+
+      &lt;p&gt;If an exception was raised or if the script was prematurely
+      aborted, then abort all these steps, letting the exception or
+      aborting continue to be processed by the script that called the
+      &lt;code title=dom-WorkerGlobalScope-importScripts&gt;&lt;a href=#dom-workerglobalscope-importscripts&gt;importScripts()&lt;/a&gt;&lt;/code&gt;
+      method.&lt;/p&gt;
+
+      &lt;p&gt;If the &quot;&lt;a href=#kill-a-worker&gt;kill a worker&lt;/a&gt;&quot; or &quot;&lt;a href=#terminate-a-worker&gt;terminate a
+      worker&lt;/a&gt;&quot; algorithms abort the script then abort all these
+      steps.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;h4 id=the-workernavigator-object&gt;&lt;span class=secno&gt;10.3.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt;&lt;/code&gt; object&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-worker-navigator title=dom-worker-navigator&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt; attribute
+  of the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface must return an instance of
+  the &lt;code&gt;&lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt;&lt;/code&gt; interface, which represents the
+  identity and state of the user agent (the client):&lt;/p&gt;
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=workernavigator&gt;WorkerNavigator&lt;/dfn&gt; {};
+&lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; implements &lt;a href=#navigatorid&gt;NavigatorID&lt;/a&gt;;
+&lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; implements &lt;a href=#navigatoronline&gt;NavigatorOnLine&lt;/a&gt;;&lt;/pre&gt;
+
+  &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt;&lt;/code&gt; interface
+  also implement the &lt;code&gt;&lt;a href=#navigatorid&gt;NavigatorID&lt;/a&gt;&lt;/code&gt; and
+  &lt;code&gt;&lt;a href=#navigatoronline&gt;NavigatorOnLine&lt;/a&gt;&lt;/code&gt; interfaces.
+  &lt;/p&gt;
+
+  &lt;p&gt;This &lt;code&gt;&lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt;&lt;/code&gt; interface must not exist if the
+  interface's &lt;span&gt;relevant namespace object&lt;/span&gt; is a
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+
+
+
+
+  &lt;h4 id=interface-objects-and-constructors&gt;&lt;span class=secno&gt;10.3.3 &lt;/span&gt;Interface objects and constructors&lt;/h4&gt;
+
+  &lt;p&gt;There must be no interface objects and constructors available in
+  the global scope of scripts whose &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
+  object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object except for
+  the following:&lt;/p&gt;
+
+  &lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;XMLHttpRequest&lt;/code&gt; and all interface objects and
+   constructors defined by the XMLHttpRequest specifications, except
+   that the &lt;span&gt;document response entity body&lt;/span&gt; must always be
+   null. The &lt;span&gt;&lt;code&gt;XMLHttpRequest&lt;/code&gt; base URL&lt;/span&gt; is the
+   &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt;; the
+   &lt;span&gt;&lt;code&gt;XMLHttpRequest&lt;/code&gt; origin&lt;/span&gt; is the script's
+   &lt;a href=#origin&gt;origin&lt;/a&gt;. &lt;a href=#refsXHR&gt;[XHR]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;The interface objects and constructors defined by this
+   specification.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Constructors defined by specifications that explicitly say
+   that they should be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
+   object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;, a
+   &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;, or an object implementing the
+   &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface; the interfaces of any objects
+   with such constructors; and the interfaces of any objects made
+   accessible through APIs exposed by those constructors or made
+   accessible through interfaces to be implemented by any objects that
+   are themselves accessible to scripts whose &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
+   object&lt;/a&gt; implements the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt;
+   interface.&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p class=note&gt;These requirements do not override the requirements
+  defined by the Web IDL specification, in particular concerning the
+  visibility of interfaces annotated with the &lt;code title=&quot;&quot;&gt;[NoInterfaceObject]&lt;/code&gt; extended attribute.&lt;/p&gt;
+
+
+  &lt;h4 id=worker-locations&gt;&lt;span class=secno&gt;10.3.4 &lt;/span&gt;Worker locations&lt;/h4&gt;
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=workerlocation&gt;WorkerLocation&lt;/dfn&gt; {
+  // &lt;a href=#url-decomposition-idl-attributes&gt;URL decomposition IDL attributes&lt;/a&gt;
+  stringifier readonly attribute DOMString &lt;a href=#dom-workerlocation-href title=dom-WorkerLocation-href&gt;href&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-workerlocation-protocol title=dom-WorkerLocation-protocol&gt;protocol&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-workerlocation-host title=dom-WorkerLocation-host&gt;host&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-workerlocation-hostname title=dom-WorkerLocation-hostname&gt;hostname&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-workerlocation-port title=dom-WorkerLocation-port&gt;port&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-workerlocation-pathname title=dom-WorkerLocation-pathname&gt;pathname&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-workerlocation-search title=dom-WorkerLocation-search&gt;search&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-workerlocation-hash title=dom-WorkerLocation-hash&gt;hash&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt;&lt;/code&gt; object represents an &lt;a href=#absolute-url&gt;absolute
+  URL&lt;/a&gt; set at its creation.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-workerlocation-href title=dom-WorkerLocation-href&gt;&lt;code&gt;href&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that the object
+  represents.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt;&lt;/code&gt; interface also has the complement
+  of &lt;a href=#url-decomposition-idl-attributes&gt;URL decomposition IDL attributes&lt;/a&gt;, &lt;dfn id=dom-workerlocation-protocol title=dom-WorkerLocation-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;,
+  &lt;dfn id=dom-workerlocation-host title=dom-WorkerLocation-host&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-workerlocation-port title=dom-WorkerLocation-port&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-workerlocation-hostname title=dom-WorkerLocation-hostname&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;,
+  &lt;dfn id=dom-workerlocation-pathname title=dom-WorkerLocation-pathname&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;,
+  &lt;dfn id=dom-workerlocation-search title=dom-WorkerLocation-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;,
+  and &lt;dfn id=dom-workerlocation-hash title=dom-WorkerLocation-hash&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;.
+  These must follow the rules given for &lt;a href=#url-decomposition-idl-attributes&gt;URL decomposition IDL
+  attributes&lt;/a&gt;, with the &lt;a href=#concept-uda-input title=concept-uda-input&gt;input&lt;/a&gt; being the &lt;a href=#absolute-url&gt;absolute
+  URL&lt;/a&gt; that the object represents (same as the &lt;code title=dom-WorkerLocation-href&gt;&lt;a href=#dom-workerlocation-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute), and the
+  &lt;a href=#concept-uda-setter title=concept-uda-setter&gt;common setter action&lt;/a&gt; being a
+  no-op, since the attributes are defined to be readonly.
+  &lt;/p&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt;&lt;/code&gt; interface must not exist if the
+  interface's &lt;span&gt;relevant namespace object&lt;/span&gt; is a
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+
+
+
+
+
+
+  &lt;/div&gt;&lt;!--data-component--&gt;
+
+
+
 &lt;!--POSTMSG--&gt;
 
-  &lt;h2 id=comms&gt;&lt;span class=secno&gt;10 &lt;/span&gt;Communication&lt;/h2&gt;
+  &lt;h2 id=comms&gt;&lt;span class=secno&gt;11 &lt;/span&gt;Communication&lt;/h2&gt;
 
   &lt;div data-component=&quot;Web Messaging (editor: Ian Hickson)&quot;&gt;
 
 
 
-  &lt;h3 id=event-definitions-2&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
+  &lt;h3 id=event-definitions-2&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
 
-  &lt;p&gt;Messages in &lt;span&gt;server-sent events&lt;/span&gt;, &lt;span&gt;Web
-  sockets&lt;/span&gt;, &lt;a href=#web-messaging&gt;cross-document messaging&lt;/a&gt;, and
+  &lt;p&gt;Messages in &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt;, &lt;a href=#network&gt;Web
+  sockets&lt;/a&gt;, &lt;a href=#web-messaging&gt;cross-document messaging&lt;/a&gt;, and
   &lt;a href=#channel-messaging&gt;channel messaging&lt;/a&gt; use the &lt;dfn id=event-message title=event-message&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; event.
-  
-  &lt;a href=#refsEVENTSOURCE&gt;[EVENTSOURCE]&lt;/a&gt;
-  &lt;a href=#refsWEBSOCKET&gt;[WEBSOCKET]&lt;/a&gt;
-  
   &lt;/p&gt;
 
   &lt;p&gt;The following interface is defined for this event:&lt;/p&gt;
@@ -77074,8 +79490,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the origin of the message, for &lt;span&gt;server-sent
-    events&lt;/span&gt; and &lt;a href=#web-messaging&gt;cross-document messaging&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;Returns the origin of the message, for &lt;a href=#server-sent-events&gt;server-sent
+    events&lt;/a&gt; and &lt;a href=#web-messaging&gt;cross-document messaging&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -77083,8 +79499,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the &lt;span title=concept-event-stream-last-event-id&gt;last event ID
-    string&lt;/span&gt;, for &lt;span&gt;server-sent events&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;Returns the &lt;a href=#concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event ID
+    string&lt;/a&gt;, for &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -77117,7 +79533,7 @@
   &lt;p&gt;The &lt;dfn id=dom-messageevent-origin title=dom-MessageEvent-origin&gt;&lt;code&gt;origin&lt;/code&gt;&lt;/dfn&gt; attribute
   must return the value it was initialized to. When the object is
   created, this attribute must be initialized to the empty string. It
-  represents, in &lt;span&gt;server-sent events&lt;/span&gt; and
+  represents, in &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt; and
   &lt;a href=#web-messaging&gt;cross-document messaging&lt;/a&gt;, the &lt;a href=#origin&gt;origin&lt;/a&gt; of
   the document that sent the message (typically the scheme, hostname,
   and port of the document, but not its path or fragment
@@ -77126,8 +79542,8 @@
   &lt;p&gt;The &lt;dfn id=dom-messageevent-lasteventid title=dom-MessageEvent-lastEventId&gt;&lt;code&gt;lastEventId&lt;/code&gt;&lt;/dfn&gt;
   attribute must return the value it was initialized to. When the
   object is created, this attribute must be initialized to the empty
-  string. It represents, in &lt;span&gt;server-sent events&lt;/span&gt;, the &lt;span title=concept-event-stream-last-event-id&gt;last event ID
-  string&lt;/span&gt; of the event source.&lt;/p&gt;
+  string. It represents, in &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt;, the &lt;a href=#concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event ID
+  string&lt;/a&gt; of the event source.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-messageevent-source title=dom-MessageEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
   must return the value it was initialized to. When the object is
@@ -77151,6 +79567,1472 @@
   &lt;/div&gt;&lt;!--data-component--&gt;
 
 &lt;!--POSTMSG--&gt;
+
+
+
+  &lt;h3 id=server-sent-events&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;&lt;dfn&gt;Server-sent events&lt;/dfn&gt;&lt;/h3&gt;
+
+  &lt;div data-component=&quot;Server-Sent Events (editor: Ian Hickson)&quot;&gt;
+
+  
+
+  &lt;h4 id=server-sent-events-intro&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;To enable servers to push data to Web pages over HTTP or using
+  dedicated server-push protocols, this specification introduces the
+  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;p&gt;Using this API consists of creating an &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt;
+  object and registering an event listener.&lt;/p&gt;
+
+  &lt;pre&gt;var source = new EventSource('updates.cgi');
+source.onmessage = function (event) {
+  alert(event.data);
+};&lt;/pre&gt;
+
+  &lt;p&gt;On the server-side, the script (&quot;&lt;code title=&quot;&quot;&gt;updates.cgi&lt;/code&gt;&quot; in this case) sends messages in the
+  following form, with the &lt;code&gt;&lt;a href=#text/event-stream&gt;text/event-stream&lt;/a&gt;&lt;/code&gt; MIME
+  type:&lt;/p&gt;
+
+  &lt;pre&gt;data: This is the first message.
+
+data: This is the second message, it
+data: has two lines.
+
+data: This is the third message.&lt;/pre&gt;
+
+  &lt;p&gt;Using this API rather than emulating it using
+  &lt;code&gt;XMLHttpRequest&lt;/code&gt; or an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; allows the
+  user agent to make better use of network resources in cases where
+  the user agent implementor and the network operator are able to
+  coordinate in advance. Amongst other benefits, this can result in
+  significant savings in battery life on portable devices. This is
+  discussed further in the section below on &lt;a href=#eventsource-push&gt;connectionless push&lt;/a&gt;.&lt;/p&gt;
+
+
+  &lt;h4 id=the-eventsource-interface&gt;&lt;span class=secno&gt;11.2.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
+
+  &lt;pre class=idl&gt;[&lt;a href=#dom-eventsource title=dom-EventSource&gt;Constructor&lt;/a&gt;(DOMString url)]
+interface &lt;dfn id=eventsource&gt;EventSource&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  readonly attribute DOMString &lt;a href=#dom-eventsource-url title=dom-EventSource-url&gt;url&lt;/a&gt;;
+
+  // ready state
+  const unsigned short &lt;a href=#dom-eventsource-connecting title=dom-EventSource-CONNECTING&gt;CONNECTING&lt;/a&gt; = 0;
+  const unsigned short &lt;a href=#dom-eventsource-open title=dom-EventSource-OPEN&gt;OPEN&lt;/a&gt; = 1;
+  const unsigned short &lt;a href=#dom-eventsource-closed title=dom-EventSource-CLOSED&gt;CLOSED&lt;/a&gt; = 2;
+  readonly attribute unsigned short &lt;a href=#dom-eventsource-readystate title=dom-EventSource-readyState&gt;readyState&lt;/a&gt;;
+
+  // networking
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-eventsource-onopen title=handler-EventSource-onopen&gt;onopen&lt;/a&gt;;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-eventsource-onmessage title=handler-EventSource-onmessage&gt;onmessage&lt;/a&gt;;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-eventsource-onerror title=handler-EventSource-onerror&gt;onerror&lt;/a&gt;;
+  void &lt;a href=#dom-eventsource-close title=dom-EventSource-close&gt;close&lt;/a&gt;();
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-eventsource title=dom-EventSource&gt;&lt;code&gt;EventSource(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor takes one argument,
+  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, which specifies the &lt;a href=#url&gt;URL&lt;/a&gt; to
+  which to connect. When the &lt;code&gt;EventSource()&lt;/code&gt; constructor is
+  invoked, the UA must run these steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the
+   &lt;a href=#url&gt;URL&lt;/a&gt; specified in &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, relative to
+   the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base
+   URL&quot;&gt;base URL&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the previous step failed, then throw a
+   &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object, and continue
+   these steps in the background (without blocking scripts).&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Do a &lt;a href=#potentially-cors-enabled-fetch&gt;potentially CORS-enabled fetch&lt;/a&gt; of the
+    resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, with the &lt;i&gt;mode&lt;/i&gt; being
+    &lt;a href=#attr-crossorigin-use-credentials title=attr-crossorigin-use-credentials&gt;Use
+    Credentials&lt;/a&gt;, and the &lt;i&gt;&lt;a href=#origin&gt;origin&lt;/a&gt;&lt;/i&gt; being the &lt;a href=#entry-script&gt;entry
+    script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;&lt;!--, and the &lt;i&gt;default origin
+    behaviour&lt;/i&gt; set to &lt;i&gt;fail&lt;/i&gt; (though it has no effect in the
+    &quot;Use Credentials&quot; mode)--&gt;, and process the resource obtained in
+    this fashion, if any, as described below.&lt;/p&gt;
+
+    &lt;p class=note&gt;The definition of the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; algorithm (which is used by CORS) is
+    such that if the browser is already fetching the resource
+    identified by the given &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, that connection
+    can be reused, instead of a new connection being established. All
+    messages received up to this point are dispatched immediately, in
+    this case.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
+  object&lt;/a&gt; is either a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object
+  implementing the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-eventsource-url title=dom-EventSource-url&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that resulted
+  from &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the value that was
+  passed to the constructor.&lt;/p&gt; &lt;!-- not the result of redirects,
+  since that would introduce race conditions --&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-eventsource-readystate title=dom-EventSource-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the state of the connection. It can have the
+  following values:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-eventsource-connecting title=dom-EventSource-CONNECTING&gt;&lt;code&gt;CONNECTING&lt;/code&gt;&lt;/dfn&gt; (numeric value 0)&lt;/dt&gt;
+
+   &lt;dd&gt;The connection has not yet been established, or it was closed
+   and the user agent is reconnecting.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-eventsource-open title=dom-EventSource-OPEN&gt;&lt;code&gt;OPEN&lt;/code&gt;&lt;/dfn&gt; (numeric value 1)&lt;/dt&gt;
+
+   &lt;dd&gt;The user agent has an open connection and is dispatching events
+   as it receives them.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-eventsource-closed title=dom-EventSource-CLOSED&gt;&lt;code&gt;CLOSED&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
+
+   &lt;dd&gt;The connection is not open, and the user agent is not trying to
+   reconnect. Either there was a fatal error or the &lt;code title=dom-EventSource-close&gt;&lt;a href=#dom-eventsource-close&gt;close()&lt;/a&gt;&lt;/code&gt; method was
+   invoked.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;When the object is created its &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; must be set to
+  &lt;code title=dom-EventSource-CONNECTING&gt;&lt;a href=#dom-eventsource-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt; (0). The
+  rules given below for handling the connection define when the value
+  changes.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-eventsource-close title=dom-EventSource-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
+  method must close the connection, if any; must abort any instances
+  of the &lt;a href=#fetch&gt;fetch&lt;/a&gt; algorithm started for this
+  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object; and must set the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
+  &lt;code title=dom-EventSource-CLOSED&gt;&lt;a href=#dom-eventsource-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
+  event types&lt;/a&gt;) that must be supported, as IDL attributes, by
+  all objects implementing the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; interface:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-eventsource-onopen title=handler-EventSource-onopen&gt;&lt;code&gt;onopen&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-open&gt;open&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-eventsource-onmessage title=handler-EventSource-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-eventsource-onerror title=handler-EventSource-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
+  &lt;/table&gt;&lt;hr&gt;&lt;p&gt;In addition to the above, each &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object
+  has the following associated with it:&lt;/p&gt;
+
+  &lt;ul&gt;&lt;li&gt;A &lt;dfn id=concept-event-stream-reconnection-time title=concept-event-stream-reconnection-time&gt;reconnection
+   time&lt;/dfn&gt;, in milliseconds. This must initially be a
+   user-agent-defined value, probably in the region of a few
+   seconds.&lt;/li&gt;
+
+   &lt;li&gt;A &lt;dfn id=concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event
+   ID string&lt;/dfn&gt;. This must initially be the empty string.&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p&gt;These values are not currently exposed on the interface.&lt;/p&gt;
+
+
+  &lt;h4 id=processing-model-5&gt;&lt;span class=secno&gt;11.2.3 &lt;/span&gt;Processing model&lt;/h4&gt;
+
+  &lt;p&gt;The resource indicated in the argument to the &lt;code title=dom-EventSource&gt;&lt;a href=#dom-eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; constructor is &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; when the constructor is run.&lt;/p&gt;
+
+  &lt;p&gt;For HTTP connections, the &lt;code title=&quot;&quot;&gt;Accept&lt;/code&gt; header may
+  be included; if included, it must contain only formats of event
+  framing that are supported by the user agent (one of which must be
+  &lt;code&gt;&lt;a href=#text/event-stream&gt;text/event-stream&lt;/a&gt;&lt;/code&gt;, as described below).&lt;/p&gt;
+
+  &lt;p&gt;If the event source's &lt;a href=#concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event ID
+  string&lt;/a&gt; is not the empty string, then a &lt;code title=http-last-event-id&gt;&lt;a href=#last-event-id&gt;Last-Event-ID&lt;/a&gt;&lt;/code&gt; HTTP header must be
+  included with the request, whose value is the value of the event
+  source's &lt;a href=#concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event
+  ID string&lt;/a&gt;, encoded as UTF-8.&lt;/p&gt;
+
+  &lt;p&gt;User agents should use the &lt;code&gt;Cache-Control: no-cache&lt;/code&gt;
+  header in requests to bypass any caches for requests of event
+  sources. (This header is not a &lt;a href=#custom-request-headers title=&quot;custom request
+  headers&quot;&gt;custom request header&lt;/a&gt;, so the user agent will still
+  use the CORS &lt;a href=#simple-cross-origin-request&gt;simple cross-origin request&lt;/a&gt; mechanism.)
+  User agents should ignore HTTP cache headers in the response, never
+  caching event sources.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;As data is received, the &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt;
+  queued by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; to handle the data
+  must act as follows.&lt;/p&gt;
+
+  &lt;p&gt;HTTP 200 OK responses with a &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; header
+  specifying the type &lt;code&gt;&lt;a href=#text/event-stream&gt;text/event-stream&lt;/a&gt;&lt;/code&gt;, either with no
+  parameters or with a single parameter with the name &quot;&lt;code title=&quot;&quot;&gt;charset&lt;/code&gt;&quot; whose value is an &lt;a href=#ascii-case-insensitive&gt;ASCII
+  case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;utf-8&lt;/code&gt;&quot;, must be processed line by line &lt;a href=#event-stream-interpretation&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When a successful response with a supported &lt;a href=#mime-type&gt;MIME
+  type&lt;/a&gt; is received, such that the user agent begins parsing the
+  contents of the stream, the user agent must &lt;a href=#announce-the-connection&gt;announce the
+  connection&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that the
+  &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; places on the &lt;a href=#task-queue&gt;task
+  queue&lt;/a&gt; once the &lt;a href=#fetch title=fetch&gt;fetching algorithm&lt;/a&gt;
+  for such a resource (with the correct &lt;a href=#mime-type&gt;MIME type&lt;/a&gt;) has
+  completed must &lt;a href=#reestablish-the-connection&gt;reestablish the connection&lt;/a&gt;. This applies
+  whether the connection is closed gracefully or unexpectedly. It
+  doesn't apply for the error conditions listed below.&lt;/p&gt;
+
+  &lt;p&gt;HTTP 200 OK responses that have a &lt;a href=#content-type&gt;Content-Type&lt;/a&gt;
+  specifying an unsupported type (including the
+  &lt;code&gt;&lt;a href=#text/event-stream&gt;text/event-stream&lt;/a&gt;&lt;/code&gt; type with unsupported parameters or
+  parameters with unsupported values), or that have no
+  &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; at all, must cause the user agent to
+  &lt;a href=#fail-the-connection&gt;fail the connection&lt;/a&gt;.&lt;/p&gt; &lt;!-- about:blank is defined as
+  having no MIME type; javascript: as having the type text/html --&gt;
+
+  &lt;p&gt;HTTP 305 Use Proxy, HTTP 401 Unauthorized, and 407 Proxy
+  Authentication Required should be treated transparently as for any
+  other subresource.&lt;/p&gt;
+
+  &lt;p&gt;HTTP 301 Moved Permanently, HTTP 302 Found, 303 See Other, and
+  307 Temporary Redirect responses are handled by the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; and CORS algorithms. In the case of
+  301 redirects, the user agent must also remember the new URL so that
+  subsequent requests for this resource for this
+  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object start with the URL given for the
+  last 301 seen for requests for this object.&lt;/p&gt;
+
+  &lt;p&gt;Any other HTTP response code not listed here, and any network
+  error that prevents the HTTP connection from being established in
+  the first place (e.g. DNS errors), must cause the user agent to
+  &lt;a href=#fail-the-connection&gt;fail the connection&lt;/a&gt;.&lt;/p&gt; &lt;!-- including: HTTP 201
+  Created, HTTP 202 Accepted, HTTP 203 Non-Authoritative Information,
+  HTTP 204 No Content, HTTP 205 Reset Content, HTTP 206 Partial
+  Content, HTTP 300 Multiple Choices, HTTP 304 Not Modified, HTTP 400
+  Bad Request, 403 Forbidden, 404 Not Found, 405 Method Not Allowed,
+  406 Not Acceptable, 408 Request Timeout, 409 Conflict, 410 Gone, 411
+  Length Required, 412 Precondition Failed, 413 Request Entity Too
+  Large, 414 Request-URI Too Long, 415 Unsupported Media Type, 416
+  Requested Range Not Satisfiable, 417 Expectation Failed, 500
+  Internal Server Error, 501 Not Implemented, 502 Bad Gateway, 503
+  Service Unavailable, 504 Gateway Timeout, and 505 HTTP Version Not
+  Supported responses --&gt; &lt;!-- mailto: is defined as equivalent to
+  HTTP 204 --&gt;
+
+  &lt;p&gt;For non-HTTP protocols, UAs should act in equivalent ways.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When a user agent is to &lt;dfn id=announce-the-connection&gt;announce the connection&lt;/dfn&gt;, the
+  user agent must set the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
+  &lt;code title=dom-EventSource-OPEN&gt;&lt;a href=#dom-eventsource-open&gt;OPEN&lt;/a&gt;&lt;/code&gt; and &lt;a href=#queue-a-task&gt;queue a
+  task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-open&gt;open&lt;/code&gt; at the
+  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;When a user agent is to &lt;dfn id=reestablish-the-connection&gt;reestablish the connection&lt;/dfn&gt;,
+  the user agent must set the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
+  &lt;code title=dom-EventSource-CONNECTING&gt;&lt;a href=#dom-eventsource-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt;,
+  &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named
+  &lt;code title=event-error&gt;error&lt;/code&gt; at the
+  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object, and then, after a delay equal to
+  the reconnection time of the event source, if the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is
+  still set to &lt;code title=dom-EventSource-CONNECTING&gt;&lt;a href=#dom-eventsource-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt;, once again do
+  a &lt;a href=#potentially-cors-enabled-fetch&gt;potentially CORS-enabled fetch&lt;/a&gt; of the &lt;a href=#absolute-url&gt;absolute
+  URL&lt;/a&gt; of the event source resource, with the &lt;i&gt;mode&lt;/i&gt; being
+  &lt;a href=#attr-crossorigin-use-credentials title=attr-crossorigin-use-credentials&gt;Use
+  Credentials&lt;/a&gt;, and the &lt;i&gt;&lt;a href=#origin&gt;origin&lt;/a&gt;&lt;/i&gt; being the same as the
+  &lt;a href=#origin&gt;origin&lt;/a&gt; used in the original request triggered by the
+  &lt;code title=dom-EventSource&gt;&lt;a href=#dom-eventsource&gt;EventSource()&lt;/a&gt;&lt;/code&gt; constructor&lt;!--,
+  and the &lt;i&gt;default origin behaviour&lt;/i&gt; set to &lt;i&gt;fail&lt;/i&gt; (though
+  it has no effect in the &quot;Use Credentials&quot; mode)--&gt;, and process the
+  resource obtained in this fashion, if any, as described in this
+  section.&lt;/p&gt;
+
+  &lt;p&gt;When a user agent is to &lt;dfn id=fail-the-connection&gt;fail the connection&lt;/dfn&gt;, the user
+  agent must set the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
+  &lt;code title=dom-EventSource-CLOSED&gt;&lt;a href=#dom-eventsource-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt; and &lt;a href=#queue-a-task&gt;queue a
+  task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt;
+  object. &lt;strong&gt;Once the user agent has &lt;a href=#fail-the-connection title=&quot;fail the
+  connection&quot;&gt;failed the connection&lt;/a&gt;, it does &lt;em&gt;not&lt;/em&gt;
+  attempt to reconnect!&lt;/strong&gt;&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; that are &lt;a href=#queue-a-task title=&quot;queue a
+  task&quot;&gt;queued&lt;/a&gt; by &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; objects is the
+  &lt;dfn id=remote-event-task-source&gt;remote event task source&lt;/dfn&gt;.&lt;/p&gt;
+
+
+  &lt;h4 id=parsing-an-event-stream&gt;&lt;span class=secno&gt;11.2.4 &lt;/span&gt;Parsing an event stream&lt;/h4&gt;
+
+  &lt;p&gt;This event stream format's &lt;a href=#mime-type&gt;MIME type&lt;/a&gt; is
+  &lt;code&gt;&lt;a href=#text/event-stream&gt;text/event-stream&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The event stream format is as described by the &lt;code title=&quot;&quot;&gt;stream&lt;/code&gt; production of the following ABNF, the
+  character set for which is Unicode. &lt;a href=#refsABNF&gt;[ABNF]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;pre&gt;stream        = [ bom ] *event
+event         = *( comment / field ) end-of-line
+comment       = colon *any-char end-of-line
+field         = 1*name-char [ colon [ space ] *any-char ] end-of-line
+end-of-line   = ( cr lf / cr / lf )
+
+; characters
+lf            = %x000A ; U+000A LINE FEED (LF)
+cr            = %x000D ; U+000D CARRIAGE RETURN (CR)
+space         = %x0020 ; U+0020 SPACE
+colon         = %x003A ; U+003A COLON (:)
+bom           = %xFEFF ; U+FEFF BYTE ORDER MARK
+name-char     = %x0000-0009 / %x000B-000C / %x000E-0039 / %x003B-10FFFF
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+000A LINE FEED (LF), U+000D CARRIAGE RETURN (CR), or U+003A COLON (:)
+any-char      = %x0000-0009 / %x000B-000C / %x000E-10FFFF
+                ; a &lt;a href=#unicode-character&gt;Unicode character&lt;/a&gt; other than U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR)&lt;/pre&gt;
+
+  &lt;p&gt;Event streams in this format must always be encoded as
+  UTF-8. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;Lines must be separated by either a U+000D CARRIAGE RETURN U+000A
+  LINE FEED (CRLF) character pair, a single U+000A LINE FEED (LF)
+  character, or a single U+000D CARRIAGE RETURN (CR) character.&lt;/p&gt;
+
+  &lt;p&gt;Since connections established to remote servers for such
+  resources are expected to be long-lived, UAs should ensure that
+  appropriate buffering is used. In particular, while line buffering
+  with lines are defined to end with a single U+000A LINE FEED (LF)
+  character is safe, block buffering or line buffering with different
+  expected line endings can cause delays in event dispatch.&lt;/p&gt;
+
+
+  &lt;h4 id=event-stream-interpretation&gt;&lt;span class=secno&gt;11.2.5 &lt;/span&gt;Interpreting an event stream&lt;/h4&gt;
+
+  &lt;p&gt;Streams must be &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error
+  handling&lt;/a&gt;.
+  &lt;/p&gt;
+
+  &lt;p&gt;One leading U+FEFF BYTE ORDER MARK character must be ignored if
+  any are present.&lt;/p&gt;
+
+  &lt;p&gt;The stream must then be parsed by reading everything line by
+  line, with a U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF)
+  character pair, a single U+000A LINE FEED (LF) character not
+  preceded by a U+000D CARRIAGE RETURN (CR) character, a single U+000D
+  CARRIAGE RETURN (CR) character not followed by a U+000A LINE FEED
+  (LF) character, and the end of the file being the four ways in which
+  a line can end.&lt;/p&gt;
+
+  &lt;p&gt;When a stream is parsed, a &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer and an
+  &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer must be associated with
+  it. They must be initialized to the empty string&lt;/p&gt;
+
+  &lt;p&gt;Lines must be processed, in the order they are received, as
+  follows:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;If the line is empty (a blank line)&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;&lt;a href=#dispatchMessage&gt;Dispatch the event&lt;/a&gt;, as
+   defined below.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If the line starts with a U+003A COLON character (:)&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Ignore the line.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If the line contains a U+003A COLON character (:)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Collect the characters on the line before the first U+003A
+    COLON character (:), and let &lt;var title=&quot;&quot;&gt;field&lt;/var&gt; be that
+    string.&lt;/p&gt;
+
+    &lt;p&gt;Collect the characters on the line after the first U+003A COLON
+    character (:), and let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be that
+    string. If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; starts with a U+0020
+    SPACE character, remove it from &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p&gt;&lt;a href=#processField&gt;Process the field&lt;/a&gt; using the steps
+    described below, using &lt;var title=&quot;&quot;&gt;field&lt;/var&gt; as the field name
+    and &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as the field value.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;Otherwise, the string is not empty but does not contain a U+003A COLON character (:)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;a href=#processField&gt;Process the field&lt;/a&gt; using the steps
+    described below, using the whole line as the field name, and
+    the empty string as the field value.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;Once the end of the file is reached, any pending data must be
+  discarded. (If the file ends in the middle of an event, before the
+  final empty line, the incomplete event is not dispatched.)&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p id=processField&gt;The steps to &lt;dfn title=&quot;&quot;&gt;process the
+  field&lt;/dfn&gt; given a field name and a field value depend on the field
+  name, as given in the following list. Field names must be compared
+  literally, with no case folding performed.&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;If the field name is &quot;event&quot;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Set the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer to field
+   value.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If the field name is &quot;data&quot;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Append the field value to the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;
+   buffer, then append a single U+000A LINE FEED (LF) character to the
+   &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If the field name is &quot;id&quot;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Set the event stream's &lt;a href=#concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event ID&lt;/a&gt; to
+   the field value.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If the field name is &quot;retry&quot;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;If the field value consists of only characters in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9), then interpret the
+   field value as an integer in base ten, and set the event stream's
+   &lt;a href=#concept-event-stream-reconnection-time title=concept-event-stream-reconnection-time&gt;reconnection
+   time&lt;/a&gt; to that integer. Otherwise, ignore the field.&lt;/dd&gt;
+
+   &lt;!-- v2 feature request from Per-Erik Brodin:
+      &gt; &gt; &gt; Finally, it could be useful to be able to reset the reconnection
+      &gt; &gt; &gt; time to the user agent default value by sending the retry field only
+      &gt; &gt; &gt; and leave out the value similar to how you reset the last event id.
+      &gt; &gt;
+      &gt; &gt; What's the use case?
+      &gt;
+      &gt; Take the stock ticker as an example. When the stock market closes the
+      &gt; server logic knows that there won't be any new events for a number of
+      &gt; hours and so it can send the corresponding reconnection time and close
+      &gt; the connection. If the client is still running by the time the market
+      &gt; opens, it will reconnect, and the server can now reset the reconnection
+      &gt; time to a time that is convenient for the user agent (which is the user
+      &gt; agent default value, unknown to the server).
+    --&gt;
+
+&lt;!-- v2 feature request from John Fallows - <A HREF="http://www.w3.org/mid/c5b3a7130810271238h11e40a4fybfcd5983ed5dc08d@mail.gmail.com">http://www.w3.org/mid/c5b3a7130810271238h11e40a4fybfcd5983ed5dc08d@mail.gmail.com</A>
+
+   &lt;dt&gt;If the field name is &quot;reconnect&quot;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;If the field value is the empty string, then: &lt;a
+   href=&quot;#dispatchMessage&quot;&gt;dispatch the event&lt;/a&gt; as defined below,
+   and then drop the connection and immediately reconnect as if the
+   &lt;span title=&quot;concept-event-stream-reconnection-time&quot;&gt;reconnection
+   time&lt;/span&gt; was zero for this one time.&lt;/p&gt;&lt;/dd&gt;
+
+  --&gt;
+
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The field is ignored.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p id=dispatchMessage&gt;When the user agent is required to &lt;dfn title=&quot;&quot;&gt;dispatch the event&lt;/dfn&gt;, then the user agent must act as
+  follows:
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer is an empty string,
+   set the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer and the &lt;var title=&quot;&quot;&gt;event
+   name&lt;/var&gt; buffer to the empty string and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer's last character is a
+   U+000A LINE FEED (LF) character, then remove the last character
+   from the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create an event that uses the &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt;
+   interface, with the event name &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;, which does not bubble, is not
+   cancelable, and has no default action. The &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute must be
+   initialized to the value of the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer,
+   the &lt;code title=dom-MessageEvent-origin&gt;&lt;a href=#dom-messageevent-origin&gt;origin&lt;/a&gt;&lt;/code&gt; attribute
+   must be initialized to the &lt;a href=#unicode-serialization-of-an-origin title=&quot;Unicode serialization of an
+   origin&quot;&gt;Unicode serialization&lt;/a&gt; of the &lt;a href=#origin&gt;origin&lt;/a&gt; of
+   the event stream's URL, and the &lt;code title=dom-MessageEvent-lastEventId&gt;&lt;a href=#dom-messageevent-lasteventid&gt;lastEventId&lt;/a&gt;&lt;/code&gt; attribute
+   must be initialized to the &lt;a href=#concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event ID
+   string&lt;/a&gt; of the event source.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer has a value
+   other than the empty string, change the &lt;a href=#concept-event-type title=concept-event-type&gt;type&lt;/a&gt; of the newly created event
+   to equal the value of the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt;
+   buffer.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer and the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer to the empty string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to dispatch the newly created
+   event at the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;If an event doesn't have an &quot;id&quot; field, but an
+  earlier event did set the event source's &lt;a href=#concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event ID
+  string&lt;/a&gt;, then the event's &lt;code title=dom-MessageEvent-lastEventId&gt;&lt;a href=#dom-messageevent-lasteventid&gt;lastEventId&lt;/a&gt;&lt;/code&gt; field will
+  be set to the value of whatever the last seen &quot;id&quot; field was.&lt;/p&gt;
+
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;The following event stream, once followed by a blank line:&lt;/p&gt;
+   &lt;pre&gt;data: YHOO
+data: +2
+data: 10&lt;/pre&gt;
+
+   &lt;p&gt;...would cause an event &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; with the interface
+   &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; to be dispatched on the
+   &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object. The event's &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute would contain
+   the string &lt;code&gt;YHOO\n+2\n10&lt;/code&gt; (where &lt;code&gt;\n&lt;/code&gt;
+   represents a newline).&lt;/p&gt;
+
+   &lt;p&gt;This could be used as follows:
+   &lt;pre&gt;var stocks = new EventSource(&quot;<A HREF="http://stocks.example.com/ticker.php">http://stocks.example.com/ticker.php</A>&quot;);
+stocks.onmessage = function (event) {
+  var data = event.data.split('\n');
+  updateStocks(data[0], data[1], data[2]);
+};&lt;/pre&gt;
+
+   &lt;p&gt;...where &lt;code title=&quot;&quot;&gt;updateStocks()&lt;/code&gt; is a function defined as:&lt;/p&gt;
+
+   &lt;pre&gt;function updateStocks(symbol, delta, value) { ... }&lt;/pre&gt;
+
+   &lt;p&gt;...or some such.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;The following stream contains four blocks. The first block has
+   just a comment, and will fire nothing. The second block has two
+   fields with names &quot;data&quot; and &quot;id&quot; respectively; an event will be
+   fired for this block, with the data &quot;first event&quot;, and will then
+   set the last event ID to &quot;1&quot; so that if the connection died between
+   this block and the next, the server would be sent a &lt;code title=http-last-event-id&gt;&lt;a href=#last-event-id&gt;Last-Event-ID&lt;/a&gt;&lt;/code&gt; header with the
+   value &quot;1&quot;. The third block fires an event with data &quot;second event&quot;,
+   and also has an &quot;id&quot; field, this time with no value, which resets
+   the last event ID to the empty string (meaning no &lt;code title=http-last-event-id&gt;&lt;a href=#last-event-id&gt;Last-Event-ID&lt;/a&gt;&lt;/code&gt; header will now be
+   sent in the event of a reconnection being attempted). Finally, the
+   last block just fires an event with the data
+   &quot;&nbsp;third&nbsp;event&quot; (with a single leading space character).
+   Note that the last still has to end with a blank line, the end of
+   the stream is not enough to trigger the dispatch of the last
+   event.&lt;/p&gt;
+
+   &lt;pre&gt;: test stream
+
+data: first event
+id: 1
+
+data:second event
+id
+
+data:&nbsp;&nbsp;third event
+&lt;/pre&gt;
+  &lt;/div&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;The following stream fires two events:&lt;/p&gt;
+
+   &lt;pre&gt;data
+
+data
+data
+
+data:&lt;/pre&gt;
+
+   &lt;p&gt;The first block fires events with the data set to the empty
+   string, as would the last block if it was followed by a blank line.
+   The middle block fires an event with the data set to a single
+   newline character. The last block is discarded because it is not
+   followed by a blank line.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;The following stream fires two identical events:&lt;/p&gt;
+
+   &lt;pre&gt;data:test
+
+data:&nbsp;test
+&lt;/pre&gt;
+
+   &lt;p&gt;This is because the space after the colon is ignored if
+   present.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h4 id=notes&gt;&lt;span class=secno&gt;11.2.6 &lt;/span&gt;Notes&lt;/h4&gt;
+
+  &lt;p&gt;Legacy proxy servers are known to, in certain cases, drop HTTP
+  connections after a short timeout. To protect against such proxy
+  servers, authors can include a comment line (one starting with a ':'
+  character) every 15 seconds or so.&lt;/p&gt;
+
+  &lt;p&gt;Authors wishing to relate event source connections to each other
+  or to specific documents previously served might find that relying
+  on IP addresses doesn't work, as individual clients can have
+  multiple IP addresses (due to having multiple proxy servers) and
+  individual IP addresses can have multiple clients (due to sharing a
+  proxy server). It is better to include a unique identifier in the
+  document when it is served and then pass that identifier as part of
+  the URL when the connection is established.&lt;/p&gt;
+
+  &lt;p&gt;Authors are also cautioned that HTTP chunking can have unexpected
+  negative effects on the reliability of this protocol. Where
+  possible, chunking should be disabled for serving event streams
+  unless the rate of messages is high enough for this not to
+  matter.&lt;/p&gt; &lt;!-- v2 can we get a better solution? --&gt;
+
+  &lt;p&gt;Clients that support HTTP's per-server connection limitation
+  might run into trouble when opening multiple pages from a site if
+  each page has an &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; to the same
+  domain. Authors can avoid this using the relatively complex
+  mechanism of using unique domain names per connection, or by
+  allowing the user to enable or disable the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt;
+  functionality on a per-page basis, or by sharing a single
+  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object using a &lt;a href=#sharedworkerglobalscope title=SharedWorkerGlobalScope&gt;shared worker&lt;/a&gt;.
+  &lt;/p&gt;
+
+
+  &lt;h4 id=eventsource-push&gt;&lt;span class=secno&gt;11.2.7 &lt;/span&gt;Connectionless push and other features&lt;/h4&gt;
+
+  &lt;p&gt;User agents running in controlled environments, e.g. browsers on
+  mobile handsets tied to specific carriers, may offload the
+  management of the connection to a proxy on the network. In such a
+  situation, the user agent for the purposes of conformance is
+  considered to include both the handset software and the network
+  proxy.&lt;/p&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;For example, a browser on a mobile device, after having
+   established a connection, might detect that it is on a supporting
+   network and request that a proxy server on the network take over
+   the management of the connection. The timeline for such a situation
+   might be as follows:&lt;/p&gt;
+
+   &lt;ol&gt;&lt;li&gt;Browser connects to a remote HTTP server and requests the
+    resource specified by the author in the &lt;code title=dom-EventSource&gt;&lt;a href=#dom-eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; constructor.&lt;/li&gt;
+
+    &lt;li&gt;The server sends occasional messages.&lt;/li&gt;
+
+    &lt;li&gt;In between two messages, the browser detects that it is idle
+    except for the network activity involved in keeping the TCP
+    connection alive, and decides to switch to sleep mode to save power.&lt;/li&gt;
+
+    &lt;li&gt;The browser disconnects from the server.&lt;/li&gt;
+
+    &lt;li&gt;The browser contacts a service on the network, and requests
+    that that service, a &quot;push proxy&quot;, maintain the connection instead.&lt;/li&gt;
+
+    &lt;li&gt;The &quot;push proxy&quot; service contacts the remote HTTP server and
+    requests the resource specified by the author in the &lt;code title=dom-EventSource&gt;&lt;a href=#dom-eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; constructor (possibly
+    including a &lt;code title=http-last-event-id&gt;&lt;a href=#last-event-id&gt;Last-Event-ID&lt;/a&gt;&lt;/code&gt;
+    HTTP header, etc).&lt;/li&gt;
+
+    &lt;li&gt;The browser allows the mobile device to go to sleep.&lt;/li&gt;
+
+    &lt;li&gt;The server sends another message.&lt;/li&gt;
+
+    &lt;li&gt;The &quot;push proxy&quot; service uses a technology such as OMA push to
+    convey the event to the mobile device, which wakes only
+    enough to process the event and then returns to sleep.&lt;/li&gt;
+
+   &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;p&gt;This can reduce the total data usage, and can therefore result in
+  considerable power savings.&lt;/p&gt;
+
+  &lt;p&gt;As well as implementing the existing API and
+  &lt;code&gt;&lt;a href=#text/event-stream&gt;text/event-stream&lt;/a&gt;&lt;/code&gt; wire format as defined by this
+  specification and in more distributed ways as described above,
+  formats of event framing defined by &lt;a href=#other-applicable-specifications&gt;other applicable
+  specifications&lt;/a&gt; may be supported. This specification does not
+  define how they are to be parsed or processed.&lt;/p&gt;
+
+
+  &lt;h4 id=garbage-collection-1&gt;&lt;span class=secno&gt;11.2.8 &lt;/span&gt;Garbage collection&lt;/h4&gt;
+
+  &lt;p&gt;While an &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object's &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is not &lt;code title=dom-EventSource-CLOSED&gt;&lt;a href=#dom-eventsource-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt;, and the object has one
+  or more event listeners registered for &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events, there must be a strong
+  reference from the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt;
+  object that the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object's constructor was
+  invoked from to the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object itself.&lt;/p&gt;
+
+  &lt;p&gt;If an &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object is garbage collected while
+  its connection is still open, the user agent must cancel any
+  instance of the &lt;a href=#fetch title=fetch&gt;fetch&lt;/a&gt; algorithm opened by
+  this &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt;, discarding any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a
+  task&quot;&gt;queued&lt;/a&gt; for them, and discarding any further data
+  received from the network for them.&lt;/p&gt;
+
+  &lt;p class=note&gt;It's possible for one active network connection to
+  be shared by multiple &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; objects and their
+  &lt;a href=#fetch&gt;fetch&lt;/a&gt; algorithms, which is why the above is phrased in
+  terms of canceling the &lt;a href=#fetch&gt;fetch&lt;/a&gt; algorithm and not the
+  actual underlying download.&lt;/p&gt;
+
+
+  &lt;h4 id=iana-considerations&gt;&lt;span class=secno&gt;11.2.9 &lt;/span&gt;IANA considerations&lt;/h4&gt;
+
+  &lt;h5 id=text/event-stream&gt;&lt;span class=secno&gt;11.2.9.1 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/event-stream&lt;/code&gt;&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;This registration is for community review and will be submitted
+  to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
+
+  &lt;!--
+   To: <A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ietf-types at iana.org</A>
+   Subject: Registration of media type text/event-stream
+  --&gt;
+
+  &lt;dl&gt;&lt;dt&gt;Type name:&lt;/dt&gt;
+   &lt;dd&gt;text&lt;/dd&gt;
+   &lt;dt&gt;Subtype name:&lt;/dt&gt;
+   &lt;dd&gt;event-stream&lt;/dd&gt;
+   &lt;dt&gt;Required parameters:&lt;/dt&gt;
+   &lt;dd&gt;No parameters&lt;/dd&gt;
+   &lt;dt&gt;Optional parameters:&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;dl&gt;&lt;dt&gt;&lt;code title=&quot;&quot;&gt;charset&lt;/code&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;The &lt;code title=&quot;&quot;&gt;charset&lt;/code&gt; parameter may be provided.
+      The parameter's value must be &quot;&lt;code title=&quot;&quot;&gt;utf-8&lt;/code&gt;&quot;.
+      This parameter serves no purpose; it is only allowed for
+      compatibility with legacy servers.&lt;/p&gt;
+
+     &lt;/dd&gt;
+    &lt;/dl&gt;&lt;/dd&gt;
+   &lt;dt&gt;Encoding considerations:&lt;/dt&gt;
+   &lt;dd&gt;8bit (always UTF-8)&lt;/dd&gt;
+   &lt;dt&gt;Security considerations:&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;An event stream from an origin distinct from the origin of the
+    content consuming the event stream can result in information
+    leakage. To avoid this, user agents are required to apply CORS
+    semantics. &lt;a href=#refsCORS&gt;[CORS]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p&gt;Event streams can overwhelm a user agent; a user agent is
+    expected to apply suitable restrictions to avoid depleting local
+    resources because of an overabundance of information from an event
+    stream.&lt;/p&gt;
+
+    &lt;p&gt;Servers can be overwhelmed if a situation develops in which the
+    server is causing clients to reconnect rapidly. Servers should use
+    a 5xx status code to indicate capacity problems, as this will
+    prevent conforming clients from reconnecting automatically.&lt;/p&gt;
+
+   &lt;/dd&gt;
+   &lt;dt&gt;Interoperability considerations:&lt;/dt&gt;
+   &lt;dd&gt;
+    Rules for processing both conforming and non-conforming content
+    are defined in this specification.
+   &lt;/dd&gt;
+   &lt;dt&gt;Published specification:&lt;/dt&gt;
+   &lt;dd&gt;
+    This document is the relevant specification.
+   &lt;/dd&gt;
+   &lt;dt&gt;Applications that use this media type:&lt;/dt&gt;
+   &lt;dd&gt;
+    Web browsers and tools using Web services.
+   &lt;/dd&gt;
+   &lt;dt&gt;Additional information:&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;dl&gt;&lt;dt&gt;Magic number(s):&lt;/dt&gt;
+     &lt;dd&gt;No sequence of bytes can uniquely identify an event stream.&lt;/dd&gt;
+     &lt;dt&gt;File extension(s):&lt;/dt&gt;
+     &lt;dd&gt;No specific file extensions are recommended for this type.&lt;/dd&gt;
+     &lt;dt&gt;Macintosh file type code(s):&lt;/dt&gt;
+     &lt;dd&gt;No specific Macintosh file type codes are recommended for this type.&lt;/dd&gt;
+    &lt;/dl&gt;&lt;/dd&gt;
+   &lt;dt&gt;Person &amp; email address to contact for further information:&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;Intended usage:&lt;/dt&gt;
+   &lt;dd&gt;Common&lt;/dd&gt;
+   &lt;dt&gt;Restrictions on usage:&lt;/dt&gt;
+   &lt;dd&gt;This format is only expected to be used by dynamic open-ended
+   streams served using HTTP or a similar protocol. Finite resources
+   are not expected to be labeled with this type.&lt;/dd&gt;
+   &lt;dt&gt;Author:&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;Change controller:&lt;/dt&gt;
+   &lt;dd&gt;W3C&lt;/dd&gt;
+  &lt;/dl&gt;&lt;p&gt;Fragment identifiers have no meaning with
+  &lt;code&gt;&lt;a href=#text/event-stream&gt;text/event-stream&lt;/a&gt;&lt;/code&gt; resources.&lt;/p&gt;
+
+
+  &lt;h5 id=last-event-id&gt;&lt;span class=secno&gt;11.2.9.2 &lt;/span&gt;&lt;dfn title=http-last-event-id&gt;&lt;code&gt;Last-Event-ID&lt;/code&gt;&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;This section describes a header field for registration in the
+  Permanent Message Header Field Registry.  &lt;a href=#refsRFC3864&gt;[RFC3864]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;Header field name&lt;/dt&gt;
+   &lt;dd&gt;Last-Event-ID&lt;/dd&gt;
+   &lt;dt&gt;Applicable protocol&lt;/dt&gt;
+   &lt;dd&gt;http&lt;/dd&gt;
+   &lt;dt&gt;Status&lt;/dt&gt;
+   &lt;dd&gt;standard&lt;/dd&gt;
+   &lt;dt&gt;Author/Change controller&lt;/dt&gt;
+   &lt;dd&gt;W3C&lt;/dd&gt;
+   &lt;dt&gt;Specification document(s)&lt;/dt&gt;
+   &lt;dd&gt;
+    This document is the relevant specification.
+   &lt;/dd&gt;
+   &lt;dt&gt;Related information&lt;/dt&gt;
+   &lt;dd&gt;None.&lt;/dd&gt;
+  &lt;/dl&gt;&lt;/div&gt;&lt;!--data-component--&gt;
+
+
+  &lt;h3 id=network&gt;&lt;span class=secno&gt;11.3 &lt;/span&gt;&lt;dfn&gt;Web sockets&lt;/dfn&gt;&lt;/h3&gt;
+
+  &lt;div data-component=&quot;WebSocket API (editor: Ian Hickson)&quot;&gt;
+
+
+
+  &lt;h4 id=network-intro&gt;&lt;span class=secno&gt;11.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;To enable Web applications to maintain bidirectional
+  communications with server-side processes, this specification
+  introduces the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;p class=note&gt;This interface does not allow for raw access to the
+  underlying network. For example, this interface could not be used to
+  implement an IRC client without proxying messages through a custom
+  server.&lt;/p&gt;
+
+
+  &lt;h4 id=the-websocket-interface&gt;&lt;span class=secno&gt;11.3.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
+
+  &lt;pre class=idl&gt;[&lt;a href=#dom-websocket title=dom-WebSocket&gt;Constructor&lt;/a&gt;(DOMString url, optional DOMString protocols),
+ &lt;a href=#dom-websocket title=dom-WebSocket&gt;Constructor&lt;/a&gt;(DOMString url, optional DOMString[] protocols)]
+interface &lt;dfn id=websocket&gt;WebSocket&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  readonly attribute DOMString &lt;a href=#dom-websocket-url title=dom-WebSocket-url&gt;url&lt;/a&gt;;
+
+  // ready state
+  const unsigned short &lt;a href=#dom-websocket-connecting title=dom-WebSocket-CONNECTING&gt;CONNECTING&lt;/a&gt; = 0;
+  const unsigned short &lt;a href=#dom-websocket-open title=dom-WebSocket-OPEN&gt;OPEN&lt;/a&gt; = 1;
+  const unsigned short &lt;a href=#dom-websocket-closing title=dom-WebSocket-CLOSING&gt;CLOSING&lt;/a&gt; = 2;
+  const unsigned short &lt;a href=#dom-websocket-closed title=dom-WebSocket-CLOSED&gt;CLOSED&lt;/a&gt; = 3;
+  readonly attribute unsigned short &lt;a href=#dom-websocket-readystate title=dom-WebSocket-readyState&gt;readyState&lt;/a&gt;;
+  readonly attribute unsigned long &lt;a href=#dom-websocket-bufferedamount title=dom-WebSocket-bufferedAmount&gt;bufferedAmount&lt;/a&gt;;
+
+  // networking
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-websocket-onopen title=handler-WebSocket-onopen&gt;onopen&lt;/a&gt;;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-websocket-onerror title=handler-WebSocket-onerror&gt;onerror&lt;/a&gt;;
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-websocket-onclose title=handler-WebSocket-onclose&gt;onclose&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-websocket-extensions title=dom-WebSocket-extensions&gt;extensions&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-websocket-protocol title=dom-WebSocket-protocol&gt;protocol&lt;/a&gt;;
+  void &lt;a href=#dom-websocket-close title=dom-WebSocket-close&gt;close&lt;/a&gt;([Clamp] optional unsigned short code, optional DOMString reason);
+
+  // messaging
+  [TreatNonCallableAsNull] attribute &lt;a href=#function&gt;Function&lt;/a&gt;? &lt;a href=#handler-websocket-onmessage title=handler-WebSocket-onmessage&gt;onmessage&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-websocket-binarytype title=dom-WebSocket-binaryType&gt;binaryType&lt;/a&gt;;
+  void &lt;a href=#dom-websocket-send title=dom-WebSocket-send&gt;send&lt;/a&gt;(DOMString data);
+  void &lt;a href=#dom-websocket-send title=dom-WebSocket-send&gt;send&lt;/a&gt;(&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt; data);
+  void &lt;a href=#dom-websocket-send title=dom-WebSocket-send&gt;send&lt;/a&gt;(&lt;a href=#blob&gt;Blob&lt;/a&gt; data);
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-websocket title=dom-WebSocket&gt;&lt;code&gt;WebSocket(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  constructor takes one or two arguments. The first argument, &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, specifies the &lt;a href=#url&gt;URL&lt;/a&gt; to which to
+  connect. The second, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;, if present, is
+  either a string or an array of strings. If it is a string, it is
+  equivalent to an array consisting of just that string; if it is
+  omitted, it is equivalent to the empty array. Each string in the
+  array is a subprotocol name. The connection will only be established
+  if the server reports that it has selected one of these
+  subprotocols. The subprotocol names must all be strings that match
+  the requirements for elements that comprise the value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt;
+  header fields as defined by the WebSocket protocol specification. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;When the &lt;code&gt;WebSocket()&lt;/code&gt; constructor is invoked, the UA
+  must run these steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;#parse-a-websocket-url's-components&quot;&gt;Parse a WebSocket URL's components&lt;/a&gt;&lt;/i&gt; from the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument, to obtain &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;,
+   &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and
+   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;. If this fails, throw a
+   &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but the
+   &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; has a scheme
+   component that is itself a secure protocol, e.g. HTTPS, then throw
+   a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is a port to which the user agent
+    is configured to block access, then throw a
+    &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception. (User agents typically block
+    access to well-known ports like SMTP.)&lt;/p&gt;
+
+    &lt;!-- e.g. <A HREF="http://www.mozilla.org/projects/netlib/PortBanning.html">http://www.mozilla.org/projects/netlib/PortBanning.html</A> --&gt;
+
+    &lt;p&gt;Access to ports 80 and 443 should not be blocked, including the
+    unlikely cases when &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 443 or &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is true
+    but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 80.&lt;/p&gt;
+    &lt;!-- paragraph requested by zcorpan --&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is absent, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; be an empty array.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is present and a
+    string, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; instead be an array
+    consisting of just that string.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If any of the values in &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; occur
+   more than once or otherwise fail to match the requirements for
+   elements that comprise the value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt;
+   header fields as defined by the WebSocket protocol specification,
+   then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
+   steps. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;a href=#ascii-serialization-of-an-origin title=&quot;ASCII
+   serialization of an origin&quot;&gt;ASCII serialization&lt;/a&gt; of the
+   &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;,
+   &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object, and continue
+   these steps in the background (without blocking scripts).&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;Establish a WebSocket connection&lt;/a&gt;&lt;/i&gt; given the set (&lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;), along
+    with the &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; list, an empty list for the
+    extensions, and &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;. The &lt;i&gt;&lt;a href=#headers-to-send-appropriate-cookies&gt;headers to send
+    appropriate cookies&lt;/a&gt;&lt;/i&gt; must be a &lt;code title=http-Cookie&gt;Cookie&lt;/code&gt; header whose value is the
+    &lt;i&gt;&lt;a href=#cookie-string&gt;cookie-string&lt;/a&gt;&lt;/i&gt; computed from the user's cookie store and the
+    URL &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;; for these purposes this is
+    &lt;em&gt;not&lt;/em&gt; a &quot;non-HTTP&quot; API. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p&gt;When the user agent &lt;i title=&quot;validate the server's
+    response&quot;&gt;&lt;a href=&quot;#validate-the-server's-response&quot;&gt;validates the server's response&lt;/a&gt;&lt;/i&gt; during the
+    &quot;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt;&quot; algorithm, if the status
+    code received from the server is not 101 (e.g. it is a redirect),
+    the user agent must &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the websocket connection&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
+
+    &lt;p class=warning&gt;Following HTTP procedures here could introduce
+    serious security problems in a Web browser context. For example,
+    consider a host with a WebSocket server at one path and an open
+    HTTP redirector at another. Suddenly, any script that can be given
+    a particular WebSocket URL can be tricked into communicating to
+    (and potentially sharing secrets with) any host on the Internet,
+    even if the script checks that the URL has the right hostname.&lt;/p&gt;
+    &lt;!-- <A HREF="http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html">http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html</A> --&gt;
+
+    &lt;p class=note&gt;If the &lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt;
+    algorithm fails, it triggers the &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket
+    connection&lt;/a&gt;&lt;/i&gt; algorithm, which then invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the
+    WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that
+    &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
+  object&lt;/a&gt; is either a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object
+  implementing the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-websocket-url title=dom-WebSocket-url&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the result of &lt;a href=#resolve-a-url title=&quot;resolve a
+  url&quot;&gt;resolving&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; that was passed to the
+  constructor. (It doesn't matter what it is resolved relative to,
+  since we already know it is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.)&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-websocket-readystate title=dom-WebSocket-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the state of the connection. It can have the
+  following values:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-websocket-connecting title=dom-WebSocket-CONNECTING&gt;&lt;code&gt;CONNECTING&lt;/code&gt;&lt;/dfn&gt; (numeric value 0)&lt;/dt&gt;
+
+   &lt;dd&gt;The connection has not yet been established.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-websocket-open title=dom-WebSocket-OPEN&gt;&lt;code&gt;OPEN&lt;/code&gt;&lt;/dfn&gt; (numeric value 1)&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;The WebSocket connection is established&lt;/a&gt;&lt;/i&gt; and communication is possible.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-websocket-closing title=dom-WebSocket-CLOSING&gt;&lt;code&gt;CLOSING&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
+
+   &lt;dd&gt;The connection is going through the closing handshake.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-websocket-closed title=dom-WebSocket-CLOSED&gt;&lt;code&gt;CLOSED&lt;/code&gt;&lt;/dfn&gt; (numeric value 3)&lt;/dt&gt;
+
+   &lt;dd&gt;The connection has been closed or could not be opened.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;When the object is created its &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; must be set to
+  &lt;code title=dom-WebSocket-CONNECTING&gt;&lt;a href=#dom-websocket-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt; (0).&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-websocket-extensions title=dom-WebSocket-extensions&gt;&lt;code&gt;extensions&lt;/code&gt;&lt;/dfn&gt;
+  attribute must initially return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the
+  WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, its value might change, as
+  defined below.&lt;/p&gt;
+
+  &lt;p class=note&gt;The &lt;code title=dom-WebSocket-extensions&gt;&lt;a href=#dom-websocket-extensions&gt;extensions&lt;/a&gt;&lt;/code&gt; attribute returns
+  the extensions selected by the server, if any. (Currently this will
+  only ever be the empty string.)&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-websocket-protocol title=dom-WebSocket-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt; attribute
+  must initially return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket
+  connection is established&lt;/a&gt;&lt;/i&gt;, its value might change, as defined
+  below.&lt;/p&gt;
+
+  &lt;p class=note&gt;The &lt;code title=dom-WebSocket-protocol&gt;&lt;a href=#dom-websocket-protocol&gt;protocol&lt;/a&gt;&lt;/code&gt; attribute returns the
+  subprotocol selected by the server, if any. It can be used in
+  conjunction with the array form of the constructor's second argument
+  to perform subprotocol negotiation.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-websocket-close title=dom-WebSocket-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
+  method must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the method's first argument is present but is not an
+   integer equal to 1000 or in the range 3000 to 4999, throw an
+   &lt;code&gt;&lt;a href=#invalidaccesserror&gt;InvalidAccessError&lt;/a&gt;&lt;/code&gt; exception and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the method's second argument has any unpaired surrogates,
+   then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the method's second argument is present, then let &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; be the result of encoding that argument as
+   UTF-8. If &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; is longer than 123 bytes, then
+   throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.
+   &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Run the first matching steps from the following list:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+     attribute is in the &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2) or &lt;code title=dom-WebSocket-CLOSED&gt;&lt;a href=#dom-websocket-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt; (3) state&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Do nothing.&lt;/p&gt;
+
+      &lt;p class=note&gt;The connection is already closing or is already
+      closed. If it has not already, a &lt;code title=event-close&gt;close&lt;/code&gt; event will eventually fire &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;If the WebSocket connection is not yet &lt;i title=&quot;the
+     WebSocket connection is established&quot;&gt;&lt;a href=#the-websocket-connection-is-established&gt;established&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;Fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; and set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's
+      value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2).
+      &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt;
+      algorithm invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
+      connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that 
+      &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the
+      &lt;code title=event-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;If the WebSocket closing handshake has not yet been &lt;i title=&quot;the WebSocket closing handshake is
+     started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;started&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;Start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt; and set the
+      &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+      attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2). &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+      &lt;p&gt;If the first argument is present, then the status
+      code&lt;!--CLOSE CODE--&gt; to use in the WebSocket Close message must
+      be the integer given by the first argument. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+      &lt;p&gt;If the second argument is also present, then &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; must be provided in the Close message
+      after the status code&lt;!--CLOSE CODE--&gt;. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt;
+      algorithm eventually invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
+      connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the
+      WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's
+      value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt;
+      (2).&lt;/p&gt;
+
+      &lt;p class=note&gt;&lt;i&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;The WebSocket closing handshake is
+      started&lt;/a&gt;&lt;/i&gt;, and will eventually invoke the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the
+      WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which will establish that
+      &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, and thus the &lt;code title=event-close&gt;close&lt;/code&gt; event will fire, &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-websocket-bufferedamount title=dom-WebSocket-bufferedAmount&gt;&lt;code&gt;bufferedAmount&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the number of bytes of application data (UTF-8
+  text and binary data) that have been queued using &lt;code title=dom-WebSocket-send&gt;&lt;a href=#dom-websocket-send&gt;send()&lt;/a&gt;&lt;/code&gt; but that, as of the last
+  time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; started executing a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt;, had not yet been transmitted to
+  the network. (This thus includes any text sent during the execution
+  of the current task, regardless of whether the user agent is able to
+  transmit text asynchronously with script execution.) This does not
+  include framing overhead incurred by the protocol, or buffering done
+  by the operating system or network hardware. If the connection is
+  closed, this attribute's value will only increase with each call to
+  the &lt;code title=dom-WebSocket-send&gt;&lt;a href=#dom-websocket-send&gt;send()&lt;/a&gt;&lt;/code&gt; method (the
+  number does not reset to zero once the connection closes).&lt;/p&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;In this simple example, the &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt;
+   attribute is used to ensure that updates are sent either at the
+   rate of one update every 50ms, if the network can handle that rate,
+   or at whatever rate the network &lt;em&gt;can&lt;/em&gt; handle, if that is too
+   fast.&lt;/p&gt;
+
+   &lt;pre&gt;var socket = new WebSocket('<A HREF="ws://game.example.com:12010/updates">ws://game.example.com:12010/updates</A>');
+socket.onopen = function () {
+  setInterval(function() {
+    if (socket.bufferedAmount == 0)
+      socket.send(getUpdateData());
+  }, 50);
+};&lt;/pre&gt;
+
+   &lt;p&gt;The &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt;
+   attribute can also be used to saturate the network without sending
+   the data at a higher rate than the network can handle, though this
+   requires more careful monitoring of the value of the attribute over
+   time.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;When a &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object is created, its &lt;dfn id=dom-websocket-binarytype title=dom-WebSocket-binaryType&gt;&lt;code&gt;binaryType&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute must be set to the string &quot;&lt;code title=&quot;&quot;&gt;blob&lt;/code&gt;&quot;. On
+  getting, it must return the last value it was set to. On setting, if
+  the new value is either the string &quot;&lt;code title=&quot;&quot;&gt;blob&lt;/code&gt;&quot; or
+  the string &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, then set the IDL
+  attribute to this new value. Otherwise, throw a
+  &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+
+  &lt;p class=note&gt;This attribute allows authors to control how binary
+  data is exposed to scripts. By setting the attribute to &quot;&lt;code title=&quot;&quot;&gt;blob&lt;/code&gt;&quot;, binary data is returned in &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt;
+  form; by setting it to &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, it is
+  returned in &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; form. User agents can use this
+  as a hint for how to handle incoming binary data: if the attribute
+  is set to &quot;&lt;code title=&quot;&quot;&gt;blob&lt;/code&gt;&quot;, it is safe to spool it to
+  disk, and if it is set to &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, it is
+  likely more efficient to keep the data in memory. Naturally, user
+  agents are encouraged to use more subtle heuristics to decide
+  whether to keep incoming data in memory or not, e.g. based on how
+  big the data is or how common it is for a script to change the
+  attribute at the last minute. This latter aspect is important in
+  particular because it is quite possible for the attribute to be
+  changed after the user agent has received the data but before the
+  user agent as fired the event for it.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-websocket-send title=dom-WebSocket-send&gt;&lt;code&gt;send(&lt;var title=&quot;&quot;&gt;data&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method transmits data using the
+  connection. If the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is
+  &lt;code title=dom-WebSocket-CONNECTING&gt;&lt;a href=#dom-websocket-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt;, it must
+  throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the
+  user agent must run the appropriate set of steps from the following
+  list:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;If the argument is a string&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; argument has any unpaired
+    surrogates, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception. If
+    &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, and the string has
+    no unpaired surrogates, and &lt;i title=&quot;the WebSocket closing
+    handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;the WebSocket closing handshake has not yet
+    started&lt;/a&gt;&lt;/i&gt;, then the user agent must &lt;i&gt;send a WebSocket
+    Message&lt;/i&gt; comprised of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using a text
+    frame opcode; if the data cannot be sent, e.g. because it would
+    need to be buffered but the buffer is full, the user agent must
+    &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt; &lt;a href=#concept-websocket-close-fail title=concept-websocket-close-fail&gt;with prejudice&lt;/a&gt;. Any
+    invokation of this method with a string argument that does not
+    throw an exception must increase the &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt;
+    attribute by the number of bytes needed to express the argument as
+    UTF-8. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;If the argument is a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, and &lt;i title=&quot;the WebSocket closing handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;the WebSocket
+    closing handshake has not yet started&lt;/a&gt;&lt;/i&gt;, then the user agent
+    must &lt;i&gt;send a WebSocket Message&lt;/i&gt; comprised of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using a binary frame opcode; if the data
+    cannot be sent, e.g. because it would need to be buffered but the
+    buffer is full, the user agent must &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
+    connection&lt;/a&gt;&lt;/i&gt; &lt;a href=#concept-websocket-close-fail title=concept-websocket-close-fail&gt;with
+    prejudice&lt;/a&gt;. The data to be sent is the raw data represented
+    by the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object. &lt;!-- that sentence is meant to
+    invoke &quot;This interface represents immutable raw data.&quot; --&gt; Any
+    invokation of this method with a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; argument that
+    does not throw an exception must increase the &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt;
+    attribute by the size of the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object's raw data,
+    in bytes. &lt;!-- that sentence is meant to invoke the same as
+    Blob.size --&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;If the argument is an &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, and &lt;i title=&quot;the WebSocket closing handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;the WebSocket
+    closing handshake has not yet started&lt;/a&gt;&lt;/i&gt;, then the user agent
+    must &lt;i&gt;send a WebSocket Message&lt;/i&gt; comprised of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using a binary frame opcode; if the data
+    cannot be sent, e.g. because it would need to be buffered but the
+    buffer is full, the user agent must &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
+    connection&lt;/a&gt;&lt;/i&gt; &lt;a href=#concept-websocket-close-fail title=concept-websocket-close-fail&gt;with
+    prejudice&lt;/a&gt;. The data to be sent is the data stored in the
+    buffer described by the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object. &lt;!-- that
+    sentence is meant to invoke &quot;The ArrayBuffer type describes a
+    buffer used to store data for the array buffer views.&quot; at the top
+    of the Typed Array spec --&gt; Any invokation of this method with an
+    &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; argument that does not throw an exception
+    must increase the &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt;
+    attribute by the length of the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; in bytes.
+    &lt;!-- that sentence is meant to invoke the same as
+    ArrayBuffer.byteLength --&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;hr&gt;&lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
+  event types&lt;/a&gt;) that must be supported, as IDL attributes, by
+  all objects implementing the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; interface:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-websocket-onopen title=handler-WebSocket-onopen&gt;&lt;code&gt;onopen&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-open&gt;open&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-websocket-onmessage title=handler-WebSocket-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-websocket-onerror title=handler-WebSocket-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-websocket-onclose title=handler-WebSocket-onclose&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-close&gt;close&lt;/code&gt;
+  &lt;/table&gt;&lt;h4 id=feedback-from-the-protocol&gt;&lt;span class=secno&gt;11.3.3 &lt;/span&gt;Feedback from the protocol&lt;/h4&gt;
+
+  &lt;p&gt;When &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, the user
+  agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to run these steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Change the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's
+   value to &lt;code title=dom-WebSocket-OPEN&gt;&lt;a href=#dom-websocket-open&gt;OPEN&lt;/a&gt;&lt;/code&gt; (1).&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Change the &lt;code title=dom-WebSocket-extensions&gt;&lt;a href=#dom-websocket-extensions&gt;extensions&lt;/a&gt;&lt;/code&gt; attribute's
+   value to the &lt;i&gt;&lt;a href=#extensions-in-use&gt;extensions in use&lt;/a&gt;&lt;/i&gt;, if is not the null value. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Change the &lt;code title=dom-WebSocket-protocol&gt;&lt;a href=#dom-websocket-protocol&gt;protocol&lt;/a&gt;&lt;/code&gt; attribute's value to
+   the &lt;i&gt;&lt;a href=#subprotocol-in-use&gt;subprotocol in use&lt;/a&gt;&lt;/i&gt;, if is not the null value. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Act as if the user agent had &lt;a href=#receives-a-set-cookie-string title=&quot;receives a
+   set-cookie-string&quot;&gt;received a set-cookie-string&lt;/a&gt; consisting
+   of the &lt;i&gt;&lt;a href=&quot;#cookies-set-during-the-server's-opening-handshake&quot;&gt;cookies set during the server's opening handshake&lt;/a&gt;&lt;/i&gt;,
+   for the URL &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; given to the &lt;code title=dom-WebSocket&gt;&lt;a href=#dom-websocket&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor. &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt; &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; named &lt;code title=event-open&gt;open&lt;/code&gt; at the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt;
+   object.&lt;/p&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When &lt;i&gt;&lt;a href=#a-websocket-message-has-been-received&gt;a WebSocket message has been received&lt;/a&gt;&lt;/i&gt; with type &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; and data &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;, the user
+  agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to follow these steps: &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;
+
+    &lt;p&gt;If the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+    attribute's value is not &lt;code title=dom-WebSocket-OPEN&gt;&lt;a href=#dom-websocket-open&gt;OPEN&lt;/a&gt;&lt;/code&gt; (1) or &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2), then abort these
+    steps.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;event&lt;/var&gt; be an event that uses the
+    &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; interface, with the event name &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;, which does not bubble, is
+    not cancelable, and has no default action.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-origin&gt;&lt;a href=#dom-messageevent-origin&gt;origin&lt;/a&gt;&lt;/code&gt; attribute to the
+   &lt;a href=#unicode-serialization-of-an-origin title=&quot;Unicode serialization of an origin&quot;&gt;Unicode
+   serialization&lt;/a&gt; of the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
+   &lt;a href=#url&gt;URL&lt;/a&gt; that was passed to the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt;
+   object's constructor.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; indicates that the data is Text,
+    then initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute to &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;.
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; indicates that the data is Binary,
+    and &lt;code title=dom-WebSocket-binaryType&gt;&lt;a href=#dom-websocket-binarytype&gt;binaryType&lt;/a&gt;&lt;/code&gt; is
+    set to &quot;&lt;code title=&quot;&quot;&gt;blob&lt;/code&gt;&quot;, then initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute to a new
+    &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object that represents &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;
+    as its raw data. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; indicates that the data is Binary,
+    and &lt;code title=dom-WebSocket-binaryType&gt;&lt;a href=#dom-websocket-binarytype&gt;binaryType&lt;/a&gt;&lt;/code&gt; is
+    set to &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, then initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute to a new
+    read-only &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object whose contents are &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Dispatch &lt;var title=&quot;&quot;&gt;event&lt;/var&gt; at the
+    &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;User agents are encouraged to check if they can
+  perform the above steps efficiently before they run the task,
+  picking tasks from other &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;
+  while they prepare the buffers if not. For example, if the &lt;code title=dom-WebSocket-binaryType&gt;&lt;a href=#dom-websocket-binarytype&gt;binaryType&lt;/a&gt;&lt;/code&gt; attribute was set
+  to &quot;&lt;code title=&quot;&quot;&gt;blob&lt;/code&gt;&quot; when the data arrived, and the user
+  agent spooled all the data to disk, but just before running the
+  above &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; for this particular
+  message the script switched &lt;code title=dom-WebSocket-binaryType&gt;&lt;a href=#dom-websocket-binarytype&gt;binaryType&lt;/a&gt;&lt;/code&gt; to &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, the user agent would want to page the
+  data back to RAM before running this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; so as to avoid stalling the main
+  thread while it created the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When &lt;i&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;the WebSocket closing handshake is started&lt;/a&gt;&lt;/i&gt;, the user
+  agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to change the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value
+  to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2). (If the
+  &lt;code title=dom-WebSocket-close&gt;&lt;a href=#dom-websocket-close&gt;close()&lt;/a&gt;&lt;/code&gt; method was called,
+  the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+  attribute's value will already be set to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2) when this task
+  runs.) &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p id=closeWebSocket&gt;When &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is
+  closed&lt;/a&gt;&lt;/i&gt;, possibly &lt;i title=&quot;&quot;&gt;cleanly&lt;/i&gt;, the user agent must
+  &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to run the following substeps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Change the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's
+   value to &lt;code title=dom-WebSocket-CLOSED&gt;&lt;a href=#dom-websocket-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt;
+   (3).&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the user agent was required to &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the websocket
+   connection&lt;/a&gt;&lt;/i&gt; or &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt; &lt;dfn id=concept-websocket-close-fail title=concept-websocket-close-fail&gt;with prejudice&lt;/dfn&gt;,
+   &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=&quot;&quot;&gt;error&lt;/code&gt;
+   at the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create an event that uses the &lt;code&gt;&lt;a href=#closeevent&gt;CloseEvent&lt;/a&gt;&lt;/code&gt;
+   interface, with the event name &lt;code title=event-close&gt;close&lt;/code&gt;, which does not bubble, is not
+   cancelable, has no default action, whose &lt;code title=dom-CloseEvent-wasClean&gt;&lt;a href=#dom-closeevent-wasclean&gt;wasClean&lt;/a&gt;&lt;/code&gt; attribute is initialized to
+   true if the connection closed &lt;i title=&quot;&quot;&gt;cleanly&lt;/i&gt; and false
+   otherwise, whose &lt;code title=dom-CloseEvent-code&gt;&lt;a href=#dom-closeevent-code&gt;code&lt;/a&gt;&lt;/code&gt;
+   attribute is initialized to &lt;i&gt;&lt;a href=#the-websocket-connection-close-code&gt;the WebSocket connection close code&lt;/a&gt;&lt;/i&gt;, and
+   whose &lt;code title=dom-CloseEvent-reason&gt;&lt;a href=#dom-closeevent-reason&gt;reason&lt;/a&gt;&lt;/code&gt; attribute
+   is initialized to &lt;i&gt;&lt;a href=#the-websocket-connection-close-reason&gt;the WebSocket connection close reason&lt;/a&gt;&lt;/i&gt;
+   &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error handling&lt;/a&gt;, and dispatch
+   the event at the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for all &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a
+  task&quot;&gt;queued&lt;/a&gt; in this section is the &lt;dfn id=websocket-task-source&gt;WebSocket task
+  source&lt;/dfn&gt;.&lt;/p&gt;
+
+
+  &lt;h5 id=event-definitions-3&gt;&lt;span class=secno&gt;11.3.3.1 &lt;/span&gt;Event definitions&lt;/h5&gt;
+
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#closeeventinit&gt;CloseEventInit&lt;/a&gt; eventInitDict)]
+interface &lt;dfn id=closeevent&gt;CloseEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
+  readonly attribute boolean &lt;a href=#dom-closeevent-wasclean title=dom-CloseEvent-wasClean&gt;wasClean&lt;/a&gt;;
+  readonly attribute unsigned short &lt;a href=#dom-closeevent-code title=dom-CloseEvent-code&gt;code&lt;/a&gt;;
+  readonly attribute DOMString &lt;span title=dom-WebSocket-reason&gt;reason&lt;/span&gt;;
+};
+
+dictionary &lt;dfn id=closeeventinit&gt;CloseEventInit&lt;/dfn&gt; : &lt;a href=#eventinit&gt;EventInit&lt;/a&gt; {
+  boolean wasClean;
+  unsigned short code;
+  DOMString reason;
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-wasclean title=dom-CloseEvent-wasClean&gt;&lt;code&gt;wasClean&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to false. It
+  represents whether the connection closed cleanly or not.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-code title=dom-CloseEvent-code&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to zero. It
+  represents the WebSocket connection close code provided by the
+  server.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-reason title=dom-CloseEvent-reason&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to empty
+  string. It represents the WebSocket connection close reason provided
+  by the server.&lt;/p&gt;
+
+
+
+  &lt;h5 id=garbage-collection-2&gt;&lt;span class=secno&gt;11.3.3.2 &lt;/span&gt;Garbage collection&lt;/h5&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value
+  was set to &lt;code title=dom-WebSocket-CONNECTING&gt;&lt;a href=#dom-websocket-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt;
+  (0) as of the last time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; started
+  executing a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must not be
+  garbage collected if there are any event listeners registered for
+  &lt;code title=event-open&gt;open&lt;/code&gt; events, &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events, &lt;code title=event-error&gt;error&lt;/code&gt; events, or &lt;code title=event-close&gt;close&lt;/code&gt; events.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value
+  was set to &lt;code title=dom-WebSocket-OPEN&gt;&lt;a href=#dom-websocket-open&gt;OPEN&lt;/a&gt;&lt;/code&gt; (1) or &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2) as of the last time
+  the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; started executing a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must not be garbage collected if
+  there are any event listeners registered for &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events, &lt;code title=event-error&gt;error&lt;/code&gt;, or &lt;code title=event-close&gt;close&lt;/code&gt; events.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object with &lt;i title=&quot;the WebSocket
+  connection is established&quot;&gt;&lt;a href=#the-websocket-connection-is-established&gt;an established connection&lt;/a&gt;&lt;/i&gt; that has
+  data queued to be transmitted to the network must not be garbage
+  collected. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;If a &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object is garbage collected while its
+  connection is still open, the user agent must &lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;start the
+  WebSocket closing handshake&lt;/a&gt;&lt;/i&gt;, with no status code&lt;!--CLOSE
+  CODE--&gt; for the Close message. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;If a user agent is to &lt;dfn id=make-disappear&gt;make disappear&lt;/dfn&gt; a
+  &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object (this happens when a
+  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object goes away), the user agent must follow
+  the first appropriate set of steps from the following list:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;If the WebSocket connection is not yet &lt;i title=&quot;the WebSocket
+   connection is established&quot;&gt;&lt;a href=#the-websocket-connection-is-established&gt;established&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;Fail the WebSocket connection&lt;/a&gt;&lt;/i&gt;. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;If the WebSocket closing handshake has not yet been &lt;i title=&quot;the WebSocket closing handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;started&lt;/a&gt;&lt;/i&gt;
+   &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;Start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt;, with the
+    status code&lt;!--CLOSE CODE--&gt; to use in the WebSocket Close message
+    being 1001. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Do nothing.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;/div&gt;&lt;!--data-component--&gt;
+
+
 &lt;!--POSTMSG--&gt;
 
 
@@ -77159,7 +81041,7 @@
 
   
 
-  &lt;h3 id=web-messaging&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;&lt;dfn id=crossDocumentMessages&gt;Cross-document messaging&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=web-messaging&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;&lt;dfn id=crossDocumentMessages&gt;Cross-document messaging&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;Web browsers, for security and privacy reasons, prevent documents
   in different domains from affecting each other; that is, cross-site
@@ -77180,7 +81062,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=introduction-13&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-14&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -77221,11 +81103,11 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=security-postmsg&gt;&lt;span class=secno&gt;10.2.2 &lt;/span&gt;Security&lt;/h4&gt;
+  &lt;h4 id=security-postmsg&gt;&lt;span class=secno&gt;11.4.2 &lt;/span&gt;Security&lt;/h4&gt;
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=authors&gt;&lt;span class=secno&gt;10.2.2.1 &lt;/span&gt;Authors&lt;/h5&gt;
+  &lt;h5 id=authors&gt;&lt;span class=secno&gt;11.4.2.1 &lt;/span&gt;Authors&lt;/h5&gt;
 
   &lt;/div&gt;
 
@@ -77253,7 +81135,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=user-agents&gt;&lt;span class=secno&gt;10.2.2.2 &lt;/span&gt;User agents&lt;/h5&gt;
+  &lt;h5 id=user-agents&gt;&lt;span class=secno&gt;11.4.2.2 &lt;/span&gt;User agents&lt;/h5&gt;
 
   &lt;p&gt;The integrity of this API is based on the inability for scripts
   of one &lt;a href=#origin&gt;origin&lt;/a&gt; to post arbitrary events (using &lt;code title=&quot;&quot;&gt;dispatchEvent()&lt;/code&gt; or otherwise) to objects in other
@@ -77269,7 +81151,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=posting-messages&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Posting messages&lt;/h4&gt;
+  &lt;h4 id=posting-messages&gt;&lt;span class=secno&gt;11.4.3 &lt;/span&gt;Posting messages&lt;/h4&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;window&lt;/var&gt; . &lt;code title=dom-window-postMessage&gt;&lt;a href=#dom-window-postmessage&gt;postMessage&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;message&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt; ])&lt;/dt&gt;
 
@@ -77435,9 +81317,9 @@
 
 
 
-  &lt;h3 id=channel-messaging&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;&lt;dfn&gt;Channel messaging&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=channel-messaging&gt;&lt;span class=secno&gt;11.5 &lt;/span&gt;&lt;dfn&gt;Channel messaging&lt;/dfn&gt;&lt;/h3&gt;
 
-  &lt;h4 id=introduction-14&gt;&lt;span class=secno&gt;10.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-15&gt;&lt;span class=secno&gt;11.5.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -77474,7 +81356,7 @@
 }&lt;/pre&gt;
 
 
-  &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;10.3.2 &lt;/span&gt;Message channels&lt;/h4&gt;
+  &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;11.5.2 &lt;/span&gt;Message channels&lt;/h4&gt;
 
   &lt;pre class=idl&gt;[&lt;a href=#dom-messagechannel title=dom-MessageChannel&gt;Constructor&lt;/a&gt;]
 interface &lt;dfn id=messagechannel&gt;MessageChannel&lt;/dfn&gt; {
@@ -77532,7 +81414,7 @@
 
   &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
   object&lt;/a&gt; is either a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object
-  implementing the &lt;code&gt;WorkerUtils&lt;/code&gt; interface.&lt;/p&gt;
+  implementing the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-channel-port1 title=dom-channel-port1&gt;&lt;code&gt;port1&lt;/code&gt;&lt;/dfn&gt; and
   &lt;dfn id=dom-channel-port2 title=dom-channel-port2&gt;&lt;code&gt;port2&lt;/code&gt;&lt;/dfn&gt; attributes
@@ -77543,7 +81425,7 @@
 
 
 
-  &lt;h4 id=message-ports&gt;&lt;span class=secno&gt;10.3.3 &lt;/span&gt;Message ports&lt;/h4&gt;
+  &lt;h4 id=message-ports&gt;&lt;span class=secno&gt;11.5.3 &lt;/span&gt;Message ports&lt;/h4&gt;
 
   &lt;p&gt;Each channel has two message ports. Data sent through one port is
   received by the other port, and vice versa.&lt;/p&gt;
@@ -77877,7 +81759,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=ports-and-garbage-collection&gt;&lt;span class=secno&gt;10.3.3.1 &lt;/span&gt;Ports and garbage collection&lt;/h5&gt;
+  &lt;h5 id=ports-and-garbage-collection&gt;&lt;span class=secno&gt;11.5.3.1 &lt;/span&gt;Ports and garbage collection&lt;/h5&gt;
 
   &lt;div class=impl&gt;
 
@@ -77927,15 +81809,713 @@
 
 &lt;!--POSTMSG--&gt;
 
-  &lt;h2 id=syntax&gt;&lt;span class=secno&gt;11 &lt;/span&gt;&lt;dfn&gt;The HTML syntax&lt;/dfn&gt;&lt;/h2&gt;
 
+
+
+
+  &lt;div data-component=&quot;Web Storage (editor: Ian Hickson)&quot;&gt;
+
+  &lt;h2 id=webstorage&gt;&lt;span class=secno&gt;12 &lt;/span&gt;Web storage&lt;/h2&gt;
+
+
+
+  &lt;h3 id=introduction-16&gt;&lt;span class=secno&gt;12.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;This specification introduces two related mechanisms, similar to
+  HTTP session cookies, for storing structured data on the client
+  side. &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The first is designed for scenarios where the user is carrying
+  out a single transaction, but could be carrying out multiple
+  transactions in different windows at the same time.&lt;/p&gt;
+
+  &lt;p&gt;Cookies don't really handle this case well. For example, a user
+  could be buying plane tickets in two different windows, using the
+  same site. If the site used cookies to keep track of which ticket
+  the user was buying, then as the user clicked from page to page in
+  both windows, the ticket currently being purchased would &quot;leak&quot; from
+  one window to the other, potentially causing the user to buy two
+  tickets for the same flight without really noticing.&lt;/p&gt;
+
+  &lt;p&gt;To address this, this specification introduces the &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; IDL attribute.
+  Sites can add data to the session storage, and it will be accessible
+  to any page from the same site opened in that window.&lt;/p&gt; &lt;!-- we're
+  not using xrefs here because this is just an intro --&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;For example, a page could have a checkbox that the user ticks to
+   indicate that he wants insurance:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;label&gt;
+ &lt;input type=&quot;checkbox&quot; onchange=&quot;sessionStorage.insurance = checked ? 'true' : ''&quot;&gt;
+ I want insurance on this trip.
+&lt;/label&gt;&lt;/pre&gt;
+
+   &lt;p&gt;A later page could then check, from script, whether the user had
+   checked the checkbox or not:&lt;/p&gt;
+
+   &lt;pre&gt;if (sessionStorage.insurance) { ... }&lt;/pre&gt;
+
+   &lt;p&gt;If the user had multiple windows opened on the site, each one
+   would have its own individual copy of the session storage object.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;!--
+
+   sessionStorage.flightDeparture = 'OSL';
+   sessionStorage.flightArrival = 'NYC';
+
+   for (var i in forms[0].elements)
+      sessionStorage[&quot;data_&quot; + i.name] = i.value;
+
+   // if we add storage of non-strings
+   if (!sessionStorage[documents])
+     sessionStorage[documents] = {};
+   sessionStorage[documents][filename] = &lt;document/&gt;;
+
+  --&gt;
+
+  &lt;p&gt;The second storage mechanism is designed for storage that spans
+  multiple windows, and lasts beyond the current session. In
+  particular, Web applications may wish to store megabytes of user
+  data, such as entire user-authored documents or a user's mailbox, on
+  the client side for performance reasons.&lt;/p&gt;
+
+  &lt;p&gt;Again, cookies do not handle this case well, because they are
+  transmitted with every request.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; IDL
+  attribute is used to access a page's local storage area.&lt;/p&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;The site at example.com can display a count of how many times
+   the user has loaded its page by putting the following at the bottom
+   of its page:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;p&gt;
+  You have viewed this page
+  &lt;span id=&quot;count&quot;&gt;an untold number of&lt;/span&gt;
+  time(s).
+&lt;/p&gt;
+&lt;script&gt;
+  if (!localStorage.pageLoadCount)
+    localStorage.pageLoadCount = 0;
+  localStorage.pageLoadCount = parseInt(localStorage.pageLoadCount) + 1;
+  document.getElementById('count').textContent = localStorage.pageLoadCount;
+&lt;/script&gt;&lt;/pre&gt;
+
+  &lt;/div&gt;
+
+  &lt;p&gt;Each site has its own separate storage area.&lt;/p&gt;
+
+
+
+
+  &lt;h3 id=storage&gt;&lt;span class=secno&gt;12.2 &lt;/span&gt;The API&lt;/h3&gt;
+
+  &lt;h4 id=the-storage-interface&gt;&lt;span class=secno&gt;12.2.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=storage-0&gt;Storage&lt;/dfn&gt; {
+  readonly attribute unsigned long &lt;a href=#dom-storage-length title=dom-Storage-length&gt;length&lt;/a&gt;;
+  DOMString? &lt;a href=#dom-storage-key title=dom-Storage-key&gt;key&lt;/a&gt;(unsigned long index);
+  getter DOMString &lt;a href=#dom-storage-getitem title=dom-Storage-getItem&gt;getItem&lt;/a&gt;(DOMString key);
+  setter creator void &lt;a href=#dom-storage-setitem title=dom-Storage-setItem&gt;setItem&lt;/a&gt;(DOMString key, DOMString value);
+  deleter void &lt;a href=#dom-storage-removeitem title=dom-Storage-removeItem&gt;removeItem&lt;/a&gt;(DOMString key);
+  void &lt;a href=#dom-storage-clear title=dom-Storage-clear&gt;clear&lt;/a&gt;();
+};&lt;/pre&gt;
+
+  &lt;!-- v2 ideas:
+    a getInfo() method that returns an object that tells you:
+       - when the key was added
+       - when the key was last modified
+       - which page was the last to modify the key
+    [-Mihai Sucan]
+
+    support non-string values
+  --&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object provides access to a list of
+  key/value pairs, which are sometimes called items. Keys are
+  strings. Any string (including the empty string) is a valid
+  key. Values are similarly strings.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object is associated with a list of
+  key/value pairs when it is created, as defined in the sections on
+  the &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attributes. Multiple
+  separate objects implementing the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; interface can
+  all be associated with the same list of key/value pairs
+  simultaneously.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storage-length title=dom-Storage-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the number of key/value pairs currently
+  present in the list associated with the object.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storage-key title=dom-Storage-key&gt;&lt;code&gt;key(&lt;var title=&quot;&quot;&gt;n&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the name of the
+  &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;th key in the list. The order of keys is
+  user-agent defined, but must be consistent within an object so long
+  as the number of keys doesn't change. (Thus, &lt;a href=#dom-storage-setitem title=dom-Storage-setItem&gt;adding&lt;/a&gt; or &lt;a href=#dom-storage-removeitem title=dom-Storage-removeItem&gt;removing&lt;/a&gt; a key may change the
+  order of the keys, but merely changing the value of an existing key
+  must not.) &lt;!--The order of keys may differ between instances of the
+  &lt;code&gt;Storage&lt;/code&gt; interface accessing the same list. [removed for
+  now for clarity, but if people ask, put it back. this is part of the
+  spec.]--&gt; If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is &lt;!--less than zero or [can't,
+  unsigned]--&gt; greater than or equal to the number of key/value pairs
+  in the object, then this method must return null.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#supported-property-names&gt;supported property names&lt;/a&gt; on a
+  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object are the keys of each key/value pair
+  currently present in the list associated with the object.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storage-getitem title=dom-Storage-getItem&gt;&lt;code&gt;getItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return
+  the current value associated with
+  the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;. If the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; does not exist in the list associated with the
+  object then this method must return null.
+  &lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storage-setitem title=dom-Storage-setItem&gt;&lt;code&gt;setItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method
+  must first check if a key/value pair
+  with the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; already exists in the list
+  associated with the object.&lt;/p&gt;
+
+  &lt;p&gt;If it does not, then a new key/value pair must be added to the
+  list, with the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; and with its value set
+  to &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;If the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; &lt;em&gt;does&lt;/em&gt; exist in the
+  list, then it must have its value updated to &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;If it couldn't set the new value, the method must throw an
+  &lt;code&gt;&lt;a href=#quotaexceedederror&gt;QuotaExceededError&lt;/a&gt;&lt;/code&gt; exception. (Setting could fail if,
+  e.g., the user has disabled storage for the site, or if the quota
+  has been exceeded.)&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storage-removeitem title=dom-Storage-removeItem&gt;&lt;code&gt;removeItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must cause the key/value
+  pair with the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; to be removed from the
+  list associated with the object, if it exists. If no item with that
+  key exists, the method must do nothing.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt; methods must be
+  atomic with respect to failure. In the case of failure, the method
+  does nothing. That is, changes to the data storage area must either
+  be successful, or the data storage area must not be changed at
+  all.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storage-clear title=dom-Storage-clear&gt;&lt;code&gt;clear()&lt;/code&gt;&lt;/dfn&gt;
+  method must atomically cause the list associated with the object to
+  be emptied of all key/value pairs, if there are any. If there are
+  none, then the method must do nothing.&lt;/p&gt;
+
+  &lt;p class=note&gt;When the &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-Storage-clear&gt;&lt;a href=#dom-storage-clear&gt;clear()&lt;/a&gt;&lt;/code&gt; methods are invoked, events
+  are fired on other &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects that can access the
+  newly stored or removed data, as defined in the sections on the
+  &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attributes.&lt;/p&gt; &lt;!--
+  not normative, see the sections below for the normative statement
+  --&gt;
+
+  &lt;p class=note&gt;This specification does not require that the above
+  methods wait until the data has been physically written to
+  disk. Only consistency in what different scripts accessing the same
+  underlying list of key/value pairs see is required.&lt;/p&gt;
+
+
+  &lt;h4 id=the-sessionstorage-attribute&gt;&lt;span class=secno&gt;12.2.2 &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h4&gt;
+
+  &lt;pre class=idl&gt;[NoInterfaceObject]
+interface &lt;dfn id=windowsessionstorage&gt;WindowSessionStorage&lt;/dfn&gt; {
+  readonly attribute &lt;a href=#storage-0&gt;Storage&lt;/a&gt; &lt;a href=#dom-sessionstorage title=dom-sessionStorage&gt;sessionStorage&lt;/a&gt;;
+};
+&lt;a href=#window&gt;Window&lt;/a&gt; implements &lt;a href=#windowsessionstorage&gt;WindowSessionStorage&lt;/a&gt;;&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-sessionstorage title=dom-sessionStorage&gt;&lt;code&gt;sessionStorage&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the set of storage areas specific to the
+  current &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt; has a unique set of
+  session storage areas, one for each &lt;a href=#origin&gt;origin&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;User agents should not expire data from a browsing context's
+  session storage areas, but may do so when the user requests that
+  such data be deleted, or when the UA detects that it has limited
+  storage space, or for security reasons. User agents should always
+  avoid deleting data while a script that could access that data is
+  running. When a top-level browsing context is destroyed (and
+  therefore permanently inaccessible to the user) the data stored in
+  its session storage areas can be discarded with it, as the API
+  described in this specification provides no way for that data to
+  ever be subsequently retrieved.&lt;/p&gt;
+
+  &lt;p class=note&gt;The lifetime of a browsing context can be unrelated
+  to the lifetime of the actual user agent process itself, as the user
+  agent may support resuming sessions after a restart.&lt;/p&gt;
+
+  &lt;p&gt;When a new &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is created in a &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt; which has a &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;,
+  the user agent must check to see if that &lt;a href=#top-level-browsing-context&gt;top-level browsing
+  context&lt;/a&gt; has a session storage area for that document's
+  &lt;a href=#origin&gt;origin&lt;/a&gt;. If it does, then that is the
+  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s assigned session storage area. If it does
+  not, a new storage area for that document's &lt;a href=#origin&gt;origin&lt;/a&gt; must
+  be created, and then &lt;em&gt;that&lt;/em&gt; is the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
+  assigned session storage area. A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s assigned
+  storage area does not change during the lifetime of a
+  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, even in the case of a &lt;a href=#nested-browsing-context&gt;nested browsing
+  context&lt;/a&gt; (e.g. in an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;) being moved to
+  another &lt;a href=#parent-browsing-context&gt;parent browsing context&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt;
+  attribute must return a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object associated with
+  the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s assigned session storage area, if any,
+  or null if there isn't one. Each &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object must
+  have a separate object for its &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p&gt;When a new &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt; is created by
+  cloning an existing &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, the new browsing
+  context must start with the same session storage areas as the
+  original, but the two sets must from that point on be considered
+  separate, not affecting each other in any way.&lt;/p&gt;
+
+  &lt;p&gt;When a new &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt; is created by
+  a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; in an existing
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, or by the user following a link in an
+  existing browsing context, or in some other way related to a
+  specific &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, then the session storage area of the
+  &lt;a href=#origin&gt;origin&lt;/a&gt; of that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; must be copied
+  into the new browsing context when it is created. From that point
+  on, however, the two session storage areas must be considered
+  separate, not affecting each other in any way.&lt;/p&gt;
+
+  &lt;p id=sessionStorageEvent&gt;When the &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-Storage-clear&gt;&lt;a href=#dom-storage-clear&gt;clear()&lt;/a&gt;&lt;/code&gt; methods are called on a
+  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; that is associated
+  with a session storage area, if the methods did something, then in
+  every &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object whose &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
+  object's &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt;
+  attribute's &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object is associated with the same
+  storage area, other than &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, a &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event must be fired, as &lt;a href=#event-storage title=event-storage&gt;described below&lt;/a&gt;.&lt;/p&gt;
+
+
+  &lt;h4 id=the-localstorage-attribute&gt;&lt;span class=secno&gt;12.2.3 &lt;/span&gt;The &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h4&gt;
+
+  &lt;pre class=idl&gt;[NoInterfaceObject]
+interface &lt;dfn id=windowlocalstorage&gt;WindowLocalStorage&lt;/dfn&gt; {
+  readonly attribute &lt;a href=#storage-0&gt;Storage&lt;/a&gt; &lt;a href=#dom-localstorage title=dom-localStorage&gt;localStorage&lt;/a&gt;;
+};
+&lt;a href=#window&gt;Window&lt;/a&gt; implements &lt;a href=#windowlocalstorage&gt;WindowLocalStorage&lt;/a&gt;;&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-localstorage title=dom-localStorage&gt;&lt;code&gt;localStorage&lt;/code&gt;&lt;/dfn&gt;
+  object provides a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object for an
+  &lt;a href=#origin&gt;origin&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;User agents must have a set of local storage areas, one for each
+  &lt;a href=#origin&gt;origin&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;User agents should expire data from the local storage areas only
+  for security reasons or when requested to do so by the user. User
+  agents should always avoid deleting data while a script that could
+  access that data is running.&lt;/p&gt;
+
+  &lt;p&gt;When the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt;
+  attribute is accessed, the user agent must run the following steps,
+  which are known as the &lt;dfn id=storage-object-initialization-steps&gt;&lt;code&gt;Storage&lt;/code&gt; object
+  initialization steps&lt;/dfn&gt;:&lt;/p&gt; &lt;!-- these steps are named because
+  marcos uses them from another spec --&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;The user agent may throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt;
+   exception instead of returning a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object if the
+   request violates a policy decision (e.g. if the user agent is
+   configured to not allow the page to persist data).&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt; is not a
+   scheme/host/port tuple, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt;
+   exception and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Check to see if the user agent has allocated a local storage
+   area for the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of
+   the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the attribute was accessed.
+   If it has not, create a new storage area for that
+   &lt;a href=#origin&gt;origin&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object associated with that
+   origin's local storage area. Each &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object must
+   have a separate object for its &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;/ol&gt;&lt;p id=localStorageEvent&gt;When the &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-Storage-clear&gt;&lt;a href=#dom-storage-clear&gt;clear()&lt;/a&gt;&lt;/code&gt; methods are called on a
+  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; that is associated
+  with a local storage area, if the methods did something, then in
+  every &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object whose &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
+  object's &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt;
+  attribute's &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object is associated with the same
+  storage area, other than &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, a &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event must be fired, as &lt;a href=#event-storage title=event-storage&gt;described below&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p id=localStorageMutex&gt;Whenever the properties of a &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute's
+  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object are to be examined, returned, set, or
+  deleted, whether as part of a direct property access, when checking
+  for the presence of a property, during property enumeration, when
+  determining the number of properties present, or as part of the
+  execution of any of the methods or attributes defined on the
+  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; interface, the user agent must first
+  &lt;a href=#obtain-the-storage-mutex&gt;obtain the storage mutex&lt;/a&gt;.&lt;/p&gt;
+
+
+  &lt;h5 id=security-localStorage&gt;&lt;span class=secno&gt;12.2.3.1 &lt;/span&gt;Security&lt;/h5&gt;
+
+  &lt;p&gt;User agents must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
+  whenever any of the members of a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object
+  originally returned by the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute are accessed
+  by scripts whose &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; is not the
+  &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the &lt;a href=#origin&gt;origin&lt;/a&gt; of
+  the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which
+  the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute was
+  accessed.&lt;/p&gt;
+
+  &lt;p class=note&gt;This means &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; objects are neutered
+  when the &lt;code title=dom-document-domain&gt;&lt;a href=#dom-document-domain&gt;document.domain&lt;/a&gt;&lt;/code&gt;
+  attribute is used.&lt;/p&gt;
+
+
+
+  &lt;h4 id=the-storage-event&gt;&lt;span class=secno&gt;12.2.4 &lt;/span&gt;The &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=event-storage title=event-storage&gt;&lt;code&gt;storage&lt;/code&gt;&lt;/dfn&gt; event
+  is fired when a storage area changes, as described in the previous
+  two sections (&lt;a href=#sessionStorageEvent&gt;for session
+  storage&lt;/a&gt;, &lt;a href=#localStorageEvent&gt;for local
+  storage&lt;/a&gt;).&lt;/p&gt;
+
+  &lt;p&gt;When this happens, the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt;
+  to fire an event with the name &lt;code&gt;&lt;a href=#storage-0&gt;storage&lt;/a&gt;&lt;/code&gt;, which does not
+  bubble and is not cancelable, and which uses the
+  &lt;code&gt;&lt;a href=#storageevent&gt;StorageEvent&lt;/a&gt;&lt;/code&gt; interface, at each &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
+  object whose &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object has a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt;
+  object that is affected.&lt;/p&gt;
+
+  &lt;p class=note&gt;This includes &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects that are
+  not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;, but events fired on those are ignored
+  by the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; until the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
+  becomes &lt;a href=#fully-active&gt;fully active&lt;/a&gt; again.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for this task is the &lt;a href=#dom-manipulation-task-source&gt;DOM
+  manipulation task source&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;If the event is being fired due to an invocation of the &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt; methods, the
+  event must have its &lt;code title=dom-StorageEvent-key&gt;&lt;a href=#dom-storageevent-key&gt;key&lt;/a&gt;&lt;/code&gt;
+  attribute initialized to the name of the key in question, its &lt;code title=dom-StorageEvent-oldValue&gt;&lt;a href=#dom-storageevent-oldvalue&gt;oldValue&lt;/a&gt;&lt;/code&gt; attribute initialized to
+  the old value of the key in question, or null if the key is newly
+  added, and its &lt;code title=dom-StorageEvent-newValue&gt;&lt;a href=#dom-storageevent-newvalue&gt;newValue&lt;/a&gt;&lt;/code&gt; attribute initialized to
+  the new value of the key in question, or null if the key was
+  removed.&lt;/p&gt;
+
+  &lt;p&gt;Otherwise, if the event is being fired due to an invocation of
+  the &lt;code title=dom-Storage-clear&gt;&lt;a href=#dom-storage-clear&gt;clear()&lt;/a&gt;&lt;/code&gt; method, the event
+  must have its &lt;code title=dom-StorageEvent-key&gt;&lt;a href=#dom-storageevent-key&gt;key&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-StorageEvent-oldValue&gt;&lt;a href=#dom-storageevent-oldvalue&gt;oldValue&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-StorageEvent-newValue&gt;&lt;a href=#dom-storageevent-newvalue&gt;newValue&lt;/a&gt;&lt;/code&gt; attributes
+  initialized to null.&lt;/p&gt;
+
+  &lt;p&gt;In addition, the event must have its &lt;code title=dom-StorageEvent-url&gt;&lt;a href=#dom-storageevent-url&gt;url&lt;/a&gt;&lt;/code&gt; attribute initialized to
+  &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;the address of the
+  document&lt;/a&gt; whose &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object was affected; and
+  its &lt;code title=dom-StorageEvent-storageArea&gt;&lt;a href=#dom-storageevent-storagearea&gt;storageArea&lt;/a&gt;&lt;/code&gt;
+  attribute initialized to the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object from the
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the target &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that
+  represents the same kind of &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; area as was
+  affected (i.e. session or local).&lt;/p&gt;
+
+
+  &lt;h5 id=event-definition-0&gt;&lt;span class=secno&gt;12.2.4.1 &lt;/span&gt;Event definition&lt;/h5&gt;
+
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#storageeventinit&gt;StorageEventInit&lt;/a&gt; eventInitDict)]
+interface &lt;dfn id=storageevent&gt;StorageEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
+  readonly attribute DOMString &lt;a href=#dom-storageevent-key title=dom-StorageEvent-key&gt;key&lt;/a&gt;;
+  readonly attribute DOMString? &lt;a href=#dom-storageevent-oldvalue title=dom-StorageEvent-oldValue&gt;oldValue&lt;/a&gt;;
+  readonly attribute DOMString? &lt;a href=#dom-storageevent-newvalue title=dom-StorageEvent-newValue&gt;newValue&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=#dom-storageevent-url title=dom-StorageEvent-url&gt;url&lt;/a&gt;;
+  readonly attribute &lt;a href=#storage-0&gt;Storage&lt;/a&gt;? &lt;a href=#dom-storageevent-storagearea title=dom-StorageEvent-storageArea&gt;storageArea&lt;/a&gt;;
+};
+
+dictionary &lt;dfn id=storageeventinit&gt;StorageEventInit&lt;/dfn&gt; : &lt;a href=#eventinit&gt;EventInit&lt;/a&gt; {
+  DOMString key;
+  DOMString? oldValue;
+  DOMString? newValue;
+  DOMString url;
+  &lt;a href=#storage-0&gt;Storage&lt;/a&gt;? storageArea;
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storageevent-key title=dom-StorageEvent-key&gt;&lt;code&gt;key&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to the empty
+  string. It represents the key being changed.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storageevent-oldvalue title=dom-StorageEvent-oldValue&gt;&lt;code&gt;oldValue&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to null. It
+  represents the old value of the key being changed.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storageevent-newvalue title=dom-StorageEvent-newValue&gt;&lt;code&gt;newValue&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to null. It
+  represents the new value of the key being changed.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storageevent-url title=dom-StorageEvent-url&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to the empty
+  string. It represents the address of the document whose key
+  changed.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-storageevent-storagearea title=dom-StorageEvent-storageArea&gt;&lt;code&gt;storageArea&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the value it was initialized to. When the
+  object is created, this attribute must be initialized to null. It
+  represents the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object that was affected.&lt;/p&gt;
+
+
+
+  &lt;h4 id=threads&gt;&lt;span class=secno&gt;12.2.5 &lt;/span&gt;Threads&lt;/h4&gt;
+
+  &lt;p&gt;Because of &lt;a href=#localStorageMutex&gt;the use&lt;/a&gt; of the
+  &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt;, multiple browsing contexts will be able
+  to access the local storage areas simultaneously in such a manner
+  that scripts cannot detect any concurrent script execution.&lt;/p&gt;
+
+  &lt;p&gt;Thus, the &lt;code title=dom-Storage-length&gt;&lt;a href=#dom-storage-length&gt;length&lt;/a&gt;&lt;/code&gt;
+  attribute of a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object, and the value of the
+  various properties of that object, cannot change while a script is
+  executing, other than in a way that is predictable by the script
+  itself.&lt;/p&gt;
+
+
+  &lt;h3 id=disk-space-0&gt;&lt;span class=secno&gt;12.3 &lt;/span&gt;Disk space&lt;/h3&gt;
+
+  &lt;p&gt;User agents should limit the total amount of space allowed for
+  storage areas.&lt;/p&gt;
+
+  &lt;p&gt;User agents should guard against sites storing data under the
+  origins other affiliated sites, e.g. storing up to the limit in
+  a1.example.com, a2.example.com, a3.example.com, etc, circumventing
+  the main example.com storage limit.&lt;/p&gt;
+
+  &lt;p&gt;User agents may prompt the user when quotas are reached, allowing
+  the user to grant a site more space. This enables sites to store
+  many user-created documents on the user's computer, for
+  instance.&lt;/p&gt;
+
+  &lt;p&gt;User agents should allow users to see how much space each domain
+  is using.&lt;/p&gt;
+
+  &lt;!--&lt;p&gt;If the storage area space limit is reached during a &lt;code
+  title=&quot;dom-Storage-setItem&quot;&gt;setItem()&lt;/code&gt; call, the method will
+  throw an exception.&lt;/p&gt;--&gt;
+
+  &lt;p&gt;A mostly arbitrary limit of five megabytes per
+  &lt;a href=#origin&gt;origin&lt;/a&gt; is recommended. Implementation feedback is
+  welcome and will be used to update this suggestion in the
+  future.&lt;/p&gt;
+
+
+  &lt;h3 id=privacy&gt;&lt;span class=secno&gt;12.4 &lt;/span&gt;Privacy&lt;/h3&gt;
+
+  &lt;h4 id=user-tracking&gt;&lt;span class=secno&gt;12.4.1 &lt;/span&gt;User tracking&lt;/h4&gt;
+
+  &lt;p&gt;A third-party advertiser (or any entity capable of getting
+  content distributed to multiple sites) could use a unique identifier
+  stored in its local storage area to track a user across multiple
+  sessions, building a profile of the user's interests to allow for
+  highly targeted advertising. In conjunction with a site that is
+  aware of the user's real identity (for example an e-commerce site
+  that requires authenticated credentials), this could allow
+  oppressive groups to target individuals with greater accuracy than
+  in a world with purely anonymous Web usage.&lt;/p&gt;
+
+  &lt;p&gt;There are a number of techniques that can be used to mitigate the
+  risk of user tracking:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;Blocking third-party storage&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;User agents may restrict access to the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; objects to scripts
+    originating at the domain of the top-level document of the
+    &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, for instance denying access to the
+    API for pages from other domains running in
+    &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;s.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Expiring stored data&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;User agents may, if so configured by the user, automatically
+    delete stored data after a period of time.&lt;/p&gt;
+
+    &lt;p&gt;For example, a user agent could be configured to treat
+    third-party local storage areas as session-only storage, deleting
+    the data once the user had closed all the &lt;a href=#browsing-context title=&quot;browsing
+    context&quot;&gt;browsing contexts&lt;/a&gt; that could access it.&lt;/p&gt;
+
+    &lt;p&gt;This can restrict the ability of a site to track a user, as the
+    site would then only be able to track the user across multiple
+    sessions when he authenticates with the site itself (e.g. by
+    making a purchase or logging in to a service).&lt;/p&gt;
+
+    &lt;p&gt;However, this also reduces the usefulness of the API as a
+    long-term storage mechanism. It can also put the user's data at
+    risk, if the user does not fully understand the implications of
+    data expiration.&lt;/p&gt;
+
+    &lt;!--v2 consider adding an explicit way for sites to state when
+    data should expire, as in  localStorage.expireData(365); --&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Treating persistent storage as cookies&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;If users attempt to protect their privacy by clearing cookies
+    without also clearing data stored in the local storage area, sites
+    can defeat those attempts by using the two features as redundant
+    backup for each other. User agents should present the interfaces
+    for clearing these in a way that helps users to understand this
+    possibility and enables them to delete data in all persistent
+    storage features simultaneously. &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Site-specific white-listing of access to local storage
+   areas&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;User agents may allow sites to access session storage areas in
+    an unrestricted manner, but require the user to authorize access
+    to local storage areas.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Origin-tracking of stored data&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;User agents may record the &lt;a href=#origin title=origin&gt;origins&lt;/a&gt;
+    of sites that contained content from third-party origins that
+    caused data to be stored.&lt;/p&gt;
+
+    &lt;p&gt;If this information is then used to present the view of data
+    currently in persistent storage, it would allow the user to make
+    informed decisions about which parts of the persistent storage to
+    prune. Combined with a blacklist (&quot;delete this data and prevent
+    this domain from ever storing data again&quot;), the user can restrict
+    the use of persistent storage to sites that he trusts.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;Shared blacklists&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;User agents may allow users to share their persistent storage
+    domain blacklists.&lt;/p&gt;
+
+    &lt;p&gt;This would allow communities to act together to protect their
+    privacy.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;While these suggestions prevent trivial use of this API for user
+  tracking, they do not block it altogether. Within a single domain, a
+  site can continue to track the user during a session, and can then
+  pass all this information to the third party along with any
+  identifying information (names, credit card numbers, addresses)
+  obtained by the site. If a third party cooperates with multiple
+  sites to obtain such information, a profile can still be
+  created.&lt;/p&gt;
+
+  &lt;p&gt;However, user tracking is to some extent possible even with no
+  cooperation from the user agent whatsoever, for instance by using
+  session identifiers in URLs, a technique already commonly used for
+  innocuous purposes but easily repurposed for user tracking (even
+  retroactively). This information can then be shared with other
+  sites, using using visitors' IP addresses and other user-specific
+  data (e.g. user-agent headers and configuration settings) to combine
+  separate sessions into coherent user profiles.&lt;/p&gt;
+
+
+  &lt;h4 id=sensitivity-of-data&gt;&lt;span class=secno&gt;12.4.2 &lt;/span&gt;Sensitivity of data&lt;/h4&gt;
+
+  &lt;p&gt;User agents should treat persistently stored data as potentially
+  sensitive; it's quite possible for e-mails, calendar appointments,
+  health records, or other confidential documents to be stored in this
+  mechanism.&lt;/p&gt;
+
+  &lt;p&gt;To this end, user agents should ensure that when deleting data,
+  it is promptly deleted from the underlying storage.&lt;/p&gt;
+
+
+  &lt;h3 id=security-storage&gt;&lt;span class=secno&gt;12.5 &lt;/span&gt;Security&lt;/h3&gt;
+
+  &lt;h4 id=dns-spoofing-attacks&gt;&lt;span class=secno&gt;12.5.1 &lt;/span&gt;DNS spoofing attacks&lt;/h4&gt;
+
+  &lt;p&gt;Because of the potential for DNS spoofing attacks, one cannot
+  guarantee that a host claiming to be in a certain domain really is
+  from that domain. To mitigate this, pages can use TLS. Pages using
+  TLS can be sure that only the user, software working on behalf of
+  the user, and other pages using TLS that have certificates
+  identifying them as being from the same domain, can access their
+  storage areas.&lt;/p&gt;
+
+
+  &lt;h4 id=cross-directory-attacks&gt;&lt;span class=secno&gt;12.5.2 &lt;/span&gt;Cross-directory attacks&lt;/h4&gt;
+
+  &lt;p&gt;Different authors sharing one host name, for example users
+  hosting content on &lt;code&gt;geocities.com&lt;/code&gt;, all share one local
+  storage object. There is no feature to restrict the access by
+  pathname. Authors on shared hosts are therefore recommended to avoid
+  using these features, as it would be trivial for other authors to
+  read the data and overwrite it.&lt;/p&gt;
+
+  &lt;p class=note&gt;Even if a path-restriction feature was made
+  available, the usual DOM scripting security model would make it
+  trivial to bypass this protection and access the data from any
+  path.&lt;/p&gt;
+
+
+  &lt;h4 id=implementation-risks&gt;&lt;span class=secno&gt;12.5.3 &lt;/span&gt;Implementation risks&lt;/h4&gt;
+
+  &lt;p&gt;The two primary risks when implementing these persistent storage
+  features are letting hostile sites read information from other
+  domains, and letting hostile sites write information that is then
+  read from other domains.&lt;/p&gt;
+
+  &lt;p&gt;Letting third-party sites read data that is not supposed to be
+  read from their domain causes &lt;em&gt;information leakage&lt;/em&gt;, For
+  example, a user's shopping wishlist on one domain could be used by
+  another domain for targeted advertising; or a user's
+  work-in-progress confidential documents stored by a word-processing
+  site could be examined by the site of a competing company.&lt;/p&gt;
+
+  &lt;p&gt;Letting third-party sites write data to the persistent storage of
+  other domains can result in &lt;em&gt;information spoofing&lt;/em&gt;, which is
+  equally dangerous. For example, a hostile site could add items to a
+  user's wishlist; or a hostile site could set a user's session
+  identifier to a known ID that the hostile site can then use to track
+  the user's actions on the victim site.&lt;/p&gt;
+
+  &lt;p&gt;Thus, strictly following the &lt;a href=#origin&gt;origin&lt;/a&gt; model described
+  in this specification is important for user security.&lt;/p&gt;
+
+
+
+  &lt;/div&gt;&lt;!--data-component--&gt;
+
+
+
+
+
+  &lt;h2 id=syntax&gt;&lt;span class=secno&gt;13 &lt;/span&gt;&lt;dfn&gt;The HTML syntax&lt;/dfn&gt;&lt;/h2&gt;
+
   &lt;p class=note&gt;This section only describes the rules for resources
   labeled with an &lt;a href=#html-mime-type&gt;HTML MIME type&lt;/a&gt;. Rules for XML resources
   are discussed in the section below entitled &quot;&lt;a href=#the-xhtml-syntax&gt;The XHTML
   syntax&lt;/a&gt;&quot;.&lt;/p&gt;
 
 
-  &lt;h3 id=writing&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Writing HTML documents&lt;/h3&gt;
+  &lt;h3 id=writing&gt;&lt;span class=secno&gt;13.1 &lt;/span&gt;Writing HTML documents&lt;/h3&gt;
 
   &lt;div class=impl&gt;
 
@@ -77997,7 +82577,7 @@
   as &quot;case-insensitive&quot;.&lt;/p&gt;
 
 
-  &lt;h4 id=the-doctype&gt;&lt;span class=secno&gt;11.1.1 &lt;/span&gt;The DOCTYPE&lt;/h4&gt;
+  &lt;h4 id=the-doctype&gt;&lt;span class=secno&gt;13.1.1 &lt;/span&gt;The DOCTYPE&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=syntax-doctype title=syntax-doctype&gt;DOCTYPE&lt;/dfn&gt; is a &lt;!-- mostly
   useless but nonetheless --&gt; required preamble.&lt;/p&gt;
@@ -78081,7 +82661,7 @@
 
 
 
-  &lt;h4 id=elements-0&gt;&lt;span class=secno&gt;11.1.2 &lt;/span&gt;Elements&lt;/h4&gt;
+  &lt;h4 id=elements-0&gt;&lt;span class=secno&gt;13.1.2 &lt;/span&gt;Elements&lt;/h4&gt;
 
   &lt;p&gt;There are five different kinds of &lt;dfn id=syntax-elements title=syntax-elements&gt;elements&lt;/dfn&gt;: &lt;a href=#void-elements&gt;void elements&lt;/a&gt;,
   &lt;a href=#raw-text-elements&gt;raw text elements&lt;/a&gt;, &lt;a href=#rcdata-elements&gt;RCDATA elements&lt;/a&gt;,
@@ -78203,7 +82783,7 @@
   tag name; tag names are case-insensitive.&lt;/p&gt;
 
 
-  &lt;h5 id=start-tags&gt;&lt;span class=secno&gt;11.1.2.1 &lt;/span&gt;Start tags&lt;/h5&gt;
+  &lt;h5 id=start-tags&gt;&lt;span class=secno&gt;13.1.2.1 &lt;/span&gt;Start tags&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-start-tag title=syntax-start-tag&gt;Start tags&lt;/dfn&gt; must have the
   following format:&lt;/p&gt;
@@ -78238,7 +82818,7 @@
    &lt;li&gt;Finally, start tags must be closed by a U+003E GREATER-THAN
    SIGN character (&gt;).&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=end-tags&gt;&lt;span class=secno&gt;11.1.2.2 &lt;/span&gt;End tags&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=end-tags&gt;&lt;span class=secno&gt;13.1.2.2 &lt;/span&gt;End tags&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-end-tag title=syntax-end-tag&gt;End tags&lt;/dfn&gt; must have the
   following format:&lt;/p&gt;
@@ -78258,7 +82838,7 @@
    &lt;li&gt;Finally, end tags must be closed by a U+003E GREATER-THAN SIGN
    character (&gt;).&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=attributes-0&gt;&lt;span class=secno&gt;11.1.2.3 &lt;/span&gt;Attributes&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=attributes-0&gt;&lt;span class=secno&gt;13.1.2.3 &lt;/span&gt;Attributes&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-attributes title=syntax-attributes&gt;Attributes&lt;/dfn&gt; for an element
   are expressed inside the element's start tag.&lt;/p&gt;
@@ -78452,7 +83032,7 @@
   HTML syntax&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=optional-tags&gt;&lt;span class=secno&gt;11.1.2.4 &lt;/span&gt;Optional tags&lt;/h5&gt;
+  &lt;h5 id=optional-tags&gt;&lt;span class=secno&gt;13.1.2.4 &lt;/span&gt;Optional tags&lt;/h5&gt;
 
   &lt;p&gt;Certain tags can be &lt;dfn id=syntax-tag-omission title=syntax-tag-omission&gt;omitted&lt;/dfn&gt;.&lt;/p&gt;
 
@@ -78628,7 +83208,7 @@
   tag&lt;/a&gt; must never be omitted if it has any attributes.&lt;/p&gt;
 
 
-  &lt;h5 id=element-restrictions&gt;&lt;span class=secno&gt;11.1.2.5 &lt;/span&gt;Restrictions on content models&lt;/h5&gt;
+  &lt;h5 id=element-restrictions&gt;&lt;span class=secno&gt;13.1.2.5 &lt;/span&gt;Restrictions on content models&lt;/h5&gt;
 
   &lt;p&gt;For historical reasons, certain elements have extra restrictions
   beyond even the restrictions given by their content model.&lt;/p&gt;
@@ -78657,7 +83237,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=cdata-rcdata-restrictions&gt;&lt;span class=secno&gt;11.1.2.6 &lt;/span&gt;Restrictions on the contents of raw text and RCDATA elements&lt;/h5&gt;
+  &lt;h5 id=cdata-rcdata-restrictions&gt;&lt;span class=secno&gt;13.1.2.6 &lt;/span&gt;Restrictions on the contents of raw text and RCDATA elements&lt;/h5&gt;
 
   &lt;p&gt;The text in &lt;a href=#raw-text-elements title=&quot;raw text elements&quot;&gt;raw text&lt;/a&gt; and
   &lt;a href=#rcdata-elements&gt;RCDATA elements&lt;/a&gt; must not contain any occurrences of the
@@ -78669,7 +83249,7 @@
   U+002F SOLIDUS (/).&lt;/p&gt;
 
 
-  &lt;h4 id=text-1&gt;&lt;span class=secno&gt;11.1.3 &lt;/span&gt;Text&lt;/h4&gt;
+  &lt;h4 id=text-1&gt;&lt;span class=secno&gt;13.1.3 &lt;/span&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-text title=syntax-text&gt;Text&lt;/dfn&gt; is allowed inside elements,
   attribute values, and comments. Text must consist of &lt;a href=#unicode-character title=&quot;Unicode character&quot;&gt;Unicode characters&lt;/a&gt;. Text must not
@@ -78681,7 +83261,7 @@
   described in the other sections.&lt;/p&gt;
 
 
-  &lt;h5 id=newlines&gt;&lt;span class=secno&gt;11.1.3.1 &lt;/span&gt;Newlines&lt;/h5&gt;
+  &lt;h5 id=newlines&gt;&lt;span class=secno&gt;13.1.3.1 &lt;/span&gt;Newlines&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-newlines title=syntax-newlines&gt;Newlines&lt;/dfn&gt; in HTML may be
   represented either as U+000D CARRIAGE RETURN (CR) characters, U+000A
@@ -78694,7 +83274,7 @@
   represents a &lt;a href=#syntax-newlines title=syntax-newlines&gt;newline&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=character-references&gt;&lt;span class=secno&gt;11.1.4 &lt;/span&gt;Character references&lt;/h4&gt;
+  &lt;h4 id=character-references&gt;&lt;span class=secno&gt;13.1.4 &lt;/span&gt;Character references&lt;/h4&gt;
 
   &lt;p&gt;In certain cases described in other sections, &lt;a href=#syntax-text title=syntax-text&gt;text&lt;/a&gt; may be mixed with &lt;dfn id=syntax-charref title=syntax-charref&gt;character references&lt;/dfn&gt;. These can be used
   to escape characters that couldn't otherwise legally be included in
@@ -78752,7 +83332,7 @@
   the &lt;a href=#named-character-references&gt;named character references&lt;/a&gt; section.&lt;/p&gt;
 
 
-  &lt;h4 id=cdata-sections&gt;&lt;span class=secno&gt;11.1.5 &lt;/span&gt;CDATA sections&lt;/h4&gt;
+  &lt;h4 id=cdata-sections&gt;&lt;span class=secno&gt;13.1.5 &lt;/span&gt;CDATA sections&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-cdata title=syntax-cdata&gt;CDATA sections&lt;/dfn&gt; must consist of
   the following components, in this order:&lt;/p&gt;
@@ -78783,7 +83363,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=comments&gt;&lt;span class=secno&gt;11.1.6 &lt;/span&gt;Comments&lt;/h4&gt;
+  &lt;h4 id=comments&gt;&lt;span class=secno&gt;13.1.6 &lt;/span&gt;Comments&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-comments title=syntax-comments&gt;Comments&lt;/dfn&gt; must start with the
   four character sequence U+003C LESS-THAN SIGN, U+0021 EXCLAMATION
@@ -78801,7 +83381,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=parsing&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;Parsing HTML documents&lt;/h3&gt;
+  &lt;h3 id=parsing&gt;&lt;span class=secno&gt;13.2 &lt;/span&gt;Parsing HTML documents&lt;/h3&gt;
 
   &lt;p&gt;&lt;i&gt;This section only applies to user agents, data mining tools,
   and conformance checkers.&lt;/i&gt;&lt;/p&gt;
@@ -78870,7 +83450,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=overview-of-the-parsing-model&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Overview of the parsing model&lt;/h4&gt;
+  &lt;h4 id=overview-of-the-parsing-model&gt;&lt;span class=secno&gt;13.2.1 &lt;/span&gt;Overview of the parsing model&lt;/h4&gt;
 
   &lt;p class=overview&gt;&lt;object data=images/parsing-model-overview.svg height=450 width=345&gt;&lt;img alt=&quot;&quot; height=450 src=<A HREF="http://images.whatwg.org/parsing-model-overview.png">http://images.whatwg.org/parsing-model-overview.png</A> width=345&gt;&lt;/object&gt;&lt;/p&gt;
 
@@ -78920,7 +83500,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-input-stream&gt;&lt;span class=secno&gt;11.2.2 &lt;/span&gt;The &lt;dfn&gt;input stream&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=the-input-stream&gt;&lt;span class=secno&gt;13.2.2 &lt;/span&gt;The &lt;dfn&gt;input stream&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The stream of Unicode code points that comprises the input to the
   tokenization stage will be initially seen by the user agent as a
@@ -78934,7 +83514,7 @@
   specification. This section does not apply to XML documents. &lt;a href=#refsXML&gt;[XML]&lt;/a&gt;&lt;/p&gt;
 
 
-  &lt;h5 id=determining-the-character-encoding&gt;&lt;span class=secno&gt;11.2.2.1 &lt;/span&gt;Determining the character encoding&lt;/h5&gt;
+  &lt;h5 id=determining-the-character-encoding&gt;&lt;span class=secno&gt;13.2.2.1 &lt;/span&gt;Determining the character encoding&lt;/h5&gt;
 
   &lt;p&gt;In some cases, it might be impractical to unambiguously determine
   the encoding before parsing the document. Because of this, this
@@ -79491,7 +84071,7 @@
   href=&quot;#refsHTTP&quot;&gt;[HTTP]&lt;/a&gt; &lt;a href=&quot;#refsRFC2046&quot;&gt;[RFC2046]&lt;/a&gt;&lt;/p&gt;
 --&gt;
 
-  &lt;h5 id=character-encodings-0&gt;&lt;span class=secno&gt;11.2.2.2 &lt;/span&gt;Character encodings&lt;/h5&gt;
+  &lt;h5 id=character-encodings-0&gt;&lt;span class=secno&gt;13.2.2.2 &lt;/span&gt;Character encodings&lt;/h5&gt;
 
   &lt;p&gt;User agents must at a minimum support the UTF-8 and Windows-1252
   encodings, but may support more. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt; &lt;a href=#refsWIN1252&gt;[WIN1252]&lt;/a&gt;&lt;/p&gt;
@@ -79583,7 +84163,7 @@
 
 
 
-  &lt;h5 id=preprocessing-the-input-stream&gt;&lt;span class=secno&gt;11.2.2.3 &lt;/span&gt;Preprocessing the input stream&lt;/h5&gt;
+  &lt;h5 id=preprocessing-the-input-stream&gt;&lt;span class=secno&gt;13.2.2.3 &lt;/span&gt;Preprocessing the input stream&lt;/h5&gt;
 
   &lt;p&gt;Given an encoding, the bytes in the input stream must be
   converted to Unicode code points for the tokenizer, as described by
@@ -79662,7 +84242,7 @@
   the stream, but rather the lack of any further characters.&lt;/p&gt;
 
 
-  &lt;h5 id=changing-the-encoding-while-parsing&gt;&lt;span class=secno&gt;11.2.2.4 &lt;/span&gt;Changing the encoding while parsing&lt;/h5&gt;
+  &lt;h5 id=changing-the-encoding-while-parsing&gt;&lt;span class=secno&gt;13.2.2.4 &lt;/span&gt;Changing the encoding while parsing&lt;/h5&gt;
 
   &lt;p&gt;When the parser requires the user agent to &lt;dfn id=change-the-encoding&gt;change the
   encoding&lt;/dfn&gt;, it must run the following steps. This might happen
@@ -79719,9 +84299,9 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=parse-state&gt;&lt;span class=secno&gt;11.2.3 &lt;/span&gt;Parse state&lt;/h4&gt;
+  &lt;h4 id=parse-state&gt;&lt;span class=secno&gt;13.2.3 &lt;/span&gt;Parse state&lt;/h4&gt;
 
-  &lt;h5 id=the-insertion-mode&gt;&lt;span class=secno&gt;11.2.3.1 &lt;/span&gt;The insertion mode&lt;/h5&gt;
+  &lt;h5 id=the-insertion-mode&gt;&lt;span class=secno&gt;13.2.3.1 &lt;/span&gt;The insertion mode&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=insertion-mode&gt;insertion mode&lt;/dfn&gt; is a state variable that controls
   the primary operation of the tree construction stage.&lt;/p&gt;
@@ -79855,7 +84435,7 @@
 
    &lt;li&gt;Return to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=the-stack-of-open-elements&gt;&lt;span class=secno&gt;11.2.3.2 &lt;/span&gt;The stack of open elements&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=the-stack-of-open-elements&gt;&lt;span class=secno&gt;13.2.3.2 &lt;/span&gt;The stack of open elements&lt;/h5&gt;
 
   &lt;p&gt;Initially, the &lt;dfn id=stack-of-open-elements&gt;stack of open elements&lt;/dfn&gt; is empty. The
   stack grows downwards; the topmost node on the stack is the first
@@ -80018,7 +84598,7 @@
   the stack is manipulated in a random-access fashion.&lt;/p&gt;
 
 
-  &lt;h5 id=the-list-of-active-formatting-elements&gt;&lt;span class=secno&gt;11.2.3.3 &lt;/span&gt;The list of active formatting elements&lt;/h5&gt;
+  &lt;h5 id=the-list-of-active-formatting-elements&gt;&lt;span class=secno&gt;13.2.3.3 &lt;/span&gt;The list of active formatting elements&lt;/h5&gt;
 
   &lt;p&gt;Initially, the &lt;dfn id=list-of-active-formatting-elements&gt;list of active formatting elements&lt;/dfn&gt; is
   empty. It is used to handle mis-nested &lt;a href=#formatting title=formatting&gt;formatting element tags&lt;/a&gt;.&lt;/p&gt;
@@ -80136,7 +84716,7 @@
 
    &lt;li&gt;Go to step 1.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=the-element-pointers&gt;&lt;span class=secno&gt;11.2.3.4 &lt;/span&gt;The element pointers&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=the-element-pointers&gt;&lt;span class=secno&gt;13.2.3.4 &lt;/span&gt;The element pointers&lt;/h5&gt;
 
   &lt;p&gt;Initially, the &lt;dfn id=head-element-pointer&gt;&lt;code title=&quot;&quot;&gt;head&lt;/code&gt; element
   pointer&lt;/dfn&gt; and the &lt;dfn id=form-element-pointer&gt;&lt;code title=&quot;&quot;&gt;form&lt;/code&gt; element
@@ -80153,7 +84733,7 @@
   markup, for historical reasons.&lt;/p&gt;
 
 
-  &lt;h5 id=other-parsing-state-flags&gt;&lt;span class=secno&gt;11.2.3.5 &lt;/span&gt;Other parsing state flags&lt;/h5&gt;
+  &lt;h5 id=other-parsing-state-flags&gt;&lt;span class=secno&gt;13.2.3.5 &lt;/span&gt;Other parsing state flags&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=scripting-flag&gt;scripting flag&lt;/dfn&gt; is set to &quot;enabled&quot; if &lt;a href=#concept-n-script title=concept-n-script&gt;scripting was enabled&lt;/a&gt; for the
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the parser is associated when the
@@ -80172,7 +84752,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=tokenization&gt;&lt;span class=secno&gt;11.2.4 &lt;/span&gt;&lt;dfn&gt;Tokenization&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=tokenization&gt;&lt;span class=secno&gt;13.2.4 &lt;/span&gt;&lt;dfn&gt;Tokenization&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;Implementations must act as if they used the following state
   machine to tokenize HTML. The state machine must start in the
@@ -80243,7 +84823,7 @@
   error, by unicode, then EOF, ending with &quot;anything else&quot; --&gt;
 
 
-  &lt;h5 id=data-state&gt;&lt;span class=secno&gt;11.2.4.1 &lt;/span&gt;&lt;dfn&gt;Data state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=data-state&gt;&lt;span class=secno&gt;13.2.4.1 &lt;/span&gt;&lt;dfn&gt;Data state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80265,7 +84845,7 @@
    &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
    token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=character-reference-in-data-state&gt;&lt;span class=secno&gt;11.2.4.2 &lt;/span&gt;&lt;dfn&gt;Character reference in data state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=character-reference-in-data-state&gt;&lt;span class=secno&gt;13.2.4.2 &lt;/span&gt;&lt;dfn&gt;Character reference in data state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Attempt to &lt;a href=#consume-a-character-reference&gt;consume a character reference&lt;/a&gt;, with no
   &lt;a href=#additional-allowed-character&gt;additional allowed character&lt;/a&gt;.&lt;/p&gt;
@@ -80278,7 +84858,7 @@
   &lt;p&gt;Finally, switch to the &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=rcdata-state&gt;&lt;span class=secno&gt;11.2.4.3 &lt;/span&gt;&lt;dfn&gt;RCDATA state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=rcdata-state&gt;&lt;span class=secno&gt;13.2.4.3 &lt;/span&gt;&lt;dfn&gt;RCDATA state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80300,7 +84880,7 @@
    &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
    token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=character-reference-in-rcdata-state&gt;&lt;span class=secno&gt;11.2.4.4 &lt;/span&gt;&lt;dfn&gt;Character reference in RCDATA state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=character-reference-in-rcdata-state&gt;&lt;span class=secno&gt;13.2.4.4 &lt;/span&gt;&lt;dfn&gt;Character reference in RCDATA state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Attempt to &lt;a href=#consume-a-character-reference&gt;consume a character reference&lt;/a&gt;, with no
   &lt;a href=#additional-allowed-character&gt;additional allowed character&lt;/a&gt;.&lt;/p&gt;
@@ -80313,7 +84893,7 @@
   &lt;p&gt;Finally, switch to the &lt;a href=#rcdata-state&gt;RCDATA state&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=rawtext-state&gt;&lt;span class=secno&gt;11.2.4.5 &lt;/span&gt;&lt;dfn&gt;RAWTEXT state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=rawtext-state&gt;&lt;span class=secno&gt;13.2.4.5 &lt;/span&gt;&lt;dfn&gt;RAWTEXT state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80331,7 +84911,7 @@
    &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
    token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-state&gt;&lt;span class=secno&gt;11.2.4.6 &lt;/span&gt;&lt;dfn&gt;Script data state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-state&gt;&lt;span class=secno&gt;13.2.4.6 &lt;/span&gt;&lt;dfn&gt;Script data state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80349,7 +84929,7 @@
    &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
    token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=plaintext-state&gt;&lt;span class=secno&gt;11.2.4.7 &lt;/span&gt;&lt;dfn&gt;PLAINTEXT state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=plaintext-state&gt;&lt;span class=secno&gt;13.2.4.7 &lt;/span&gt;&lt;dfn&gt;PLAINTEXT state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80364,7 +84944,7 @@
    &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
    token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=tag-open-state&gt;&lt;span class=secno&gt;11.2.4.8 &lt;/span&gt;&lt;dfn&gt;Tag open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=tag-open-state&gt;&lt;span class=secno&gt;13.2.4.8 &lt;/span&gt;&lt;dfn&gt;Tag open state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80396,7 +84976,7 @@
    character token and reconsume the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; in the &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.9 &lt;/span&gt;&lt;dfn&gt;End tag open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.9 &lt;/span&gt;&lt;dfn&gt;End tag open state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80426,7 +85006,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Switch to the &lt;a href=#bogus-comment-state&gt;bogus
    comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=tag-name-state&gt;&lt;span class=secno&gt;11.2.4.10 &lt;/span&gt;&lt;dfn&gt;Tag name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=tag-name-state&gt;&lt;span class=secno&gt;13.2.4.10 &lt;/span&gt;&lt;dfn&gt;Tag name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80461,7 +85041,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    tag token's tag name.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=rcdata-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.11 &lt;/span&gt;&lt;dfn&gt;RCDATA less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=rcdata-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.11 &lt;/span&gt;&lt;dfn&gt;RCDATA less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
   &lt;!-- identical to the RAWTEXT less-than sign state, except s/RAWTEXT/RCDATA/g --&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -80475,7 +85055,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the &lt;a href=#rcdata-state&gt;RCDATA
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=rcdata-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.12 &lt;/span&gt;&lt;dfn&gt;RCDATA end tag open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=rcdata-end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.12 &lt;/span&gt;&lt;dfn&gt;RCDATA end tag open state&lt;/dfn&gt;&lt;/h5&gt;
   &lt;!-- identical to the RAWTEXT (and Script data) end tag open state, except s/RAWTEXT/RCDATA/g --&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -80502,7 +85082,7 @@
    character token, and reconsume the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; in the &lt;a href=#rcdata-state&gt;RCDATA state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=rcdata-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.13 &lt;/span&gt;&lt;dfn&gt;RCDATA end tag name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=rcdata-end-tag-name-state&gt;&lt;span class=secno&gt;13.2.4.13 &lt;/span&gt;&lt;dfn&gt;RCDATA end tag name state&lt;/dfn&gt;&lt;/h5&gt;
   &lt;!-- identical to the RAWTEXT (and Script data) end tag name state, except s/RAWTEXT/RCDATA/g --&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -80547,7 +85127,7 @@
    the buffer), and reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;
    in the &lt;a href=#rcdata-state&gt;RCDATA state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=rawtext-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.14 &lt;/span&gt;&lt;dfn&gt;RAWTEXT less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=rawtext-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.14 &lt;/span&gt;&lt;dfn&gt;RAWTEXT less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
   &lt;!-- identical to the RCDATA less-than sign state, except s/RCDATA/RAWTEXT/g --&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -80561,7 +85141,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the &lt;a href=#rawtext-state&gt;RAWTEXT
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=rawtext-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.15 &lt;/span&gt;&lt;dfn&gt;RAWTEXT end tag open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=rawtext-end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.15 &lt;/span&gt;&lt;dfn&gt;RAWTEXT end tag open state&lt;/dfn&gt;&lt;/h5&gt;
   &lt;!-- identical to the RCDATA (and Script data) end tag open state, except s/RCDATA/RAWTEXT/g --&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -80588,7 +85168,7 @@
    character token, and reconsume the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; in the &lt;a href=#rawtext-state&gt;RAWTEXT state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=rawtext-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.16 &lt;/span&gt;&lt;dfn&gt;RAWTEXT end tag name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=rawtext-end-tag-name-state&gt;&lt;span class=secno&gt;13.2.4.16 &lt;/span&gt;&lt;dfn&gt;RAWTEXT end tag name state&lt;/dfn&gt;&lt;/h5&gt;
   &lt;!-- identical to the RCDATA (and Script data) end tag name state, except s/RCDATA/RAWTEXT/g --&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -80633,7 +85213,7 @@
    the buffer), and reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;
    in the &lt;a href=#rawtext-state&gt;RAWTEXT state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.17 &lt;/span&gt;&lt;dfn&gt;Script data less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.17 &lt;/span&gt;&lt;dfn&gt;Script data less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80651,7 +85231,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the &lt;a href=#script-data-state&gt;script data
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.18 &lt;/span&gt;&lt;dfn&gt;Script data end tag open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.18 &lt;/span&gt;&lt;dfn&gt;Script data end tag open state&lt;/dfn&gt;&lt;/h5&gt;
   &lt;!-- identical to the RCDATA (and RAWTEXT) end tag open state, except s/RCDATA/Script data/g --&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -80678,7 +85258,7 @@
    character token, and reconsume the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; in the &lt;a href=#script-data-state&gt;script data state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.19 &lt;/span&gt;&lt;dfn&gt;Script data end tag name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-end-tag-name-state&gt;&lt;span class=secno&gt;13.2.4.19 &lt;/span&gt;&lt;dfn&gt;Script data end tag name state&lt;/dfn&gt;&lt;/h5&gt;
   &lt;!-- identical to the RCDATA (and RAWTEXT) end tag name state, except s/RCDATA/Script data/g --&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -80723,7 +85303,7 @@
    the buffer), and reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;
    in the &lt;a href=#script-data-state&gt;script data state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-escape-start-state&gt;&lt;span class=secno&gt;11.2.4.20 &lt;/span&gt;&lt;dfn&gt;Script data escape start state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escape-start-state&gt;&lt;span class=secno&gt;13.2.4.20 &lt;/span&gt;&lt;dfn&gt;Script data escape start state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80735,7 +85315,7 @@
    &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
    &lt;a href=#script-data-state&gt;script data state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-escape-start-dash-state&gt;&lt;span class=secno&gt;11.2.4.21 &lt;/span&gt;&lt;dfn&gt;Script data escape start dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escape-start-dash-state&gt;&lt;span class=secno&gt;13.2.4.21 &lt;/span&gt;&lt;dfn&gt;Script data escape start dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80747,7 +85327,7 @@
    &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
    &lt;a href=#script-data-state&gt;script data state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-escaped-state&gt;&lt;span class=secno&gt;11.2.4.22 &lt;/span&gt;&lt;dfn&gt;Script data escaped state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-state&gt;&lt;span class=secno&gt;13.2.4.22 &lt;/span&gt;&lt;dfn&gt;Script data escaped state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80771,7 +85351,7 @@
    &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
    token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-escaped-dash-state&gt;&lt;span class=secno&gt;11.2.4.23 &lt;/span&gt;&lt;dfn&gt;Script data escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-dash-state&gt;&lt;span class=secno&gt;13.2.4.23 &lt;/span&gt;&lt;dfn&gt;Script data escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80796,7 +85376,7 @@
    &lt;dd&gt;Switch to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;. Emit the
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-escaped-dash-dash-state&gt;&lt;span class=secno&gt;11.2.4.24 &lt;/span&gt;&lt;dfn&gt;Script data escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-dash-dash-state&gt;&lt;span class=secno&gt;13.2.4.24 &lt;/span&gt;&lt;dfn&gt;Script data escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80824,7 +85404,7 @@
    &lt;dd&gt;Switch to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;. Emit the
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.25 &lt;/span&gt;&lt;dfn&gt;Script data escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.25 &lt;/span&gt;&lt;dfn&gt;Script data escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80852,7 +85432,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the &lt;a href=#script-data-escaped-state&gt;script data
    escaped state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-escaped-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.26 &lt;/span&gt;&lt;dfn&gt;Script data escaped end tag open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-end-tag-open-state&gt;&lt;span class=secno&gt;13.2.4.26 &lt;/span&gt;&lt;dfn&gt;Script data escaped end tag open state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80878,7 +85458,7 @@
    character token, and reconsume the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; in the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-escaped-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.27 &lt;/span&gt;&lt;dfn&gt;Script data escaped end tag name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-end-tag-name-state&gt;&lt;span class=secno&gt;13.2.4.27 &lt;/span&gt;&lt;dfn&gt;Script data escaped end tag name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80922,7 +85502,7 @@
    the buffer), and reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;
    in the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-double-escape-start-state&gt;&lt;span class=secno&gt;11.2.4.28 &lt;/span&gt;&lt;dfn&gt;Script data double escape start state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escape-start-state&gt;&lt;span class=secno&gt;13.2.4.28 &lt;/span&gt;&lt;dfn&gt;Script data double escape start state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80953,7 +85533,7 @@
    &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
    &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-state&gt;&lt;span class=secno&gt;11.2.4.29 &lt;/span&gt;&lt;dfn&gt;Script data double escaped state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-state&gt;&lt;span class=secno&gt;13.2.4.29 &lt;/span&gt;&lt;dfn&gt;Script data double escaped state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -80978,7 +85558,7 @@
    &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
    token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-dash-state&gt;&lt;span class=secno&gt;11.2.4.30 &lt;/span&gt;&lt;dfn&gt;Script data double escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-dash-state&gt;&lt;span class=secno&gt;13.2.4.30 &lt;/span&gt;&lt;dfn&gt;Script data double escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81005,7 +85585,7 @@
    state&lt;/a&gt;. Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a
    character token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-dash-dash-state&gt;&lt;span class=secno&gt;11.2.4.31 &lt;/span&gt;&lt;dfn&gt;Script data double escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-dash-dash-state&gt;&lt;span class=secno&gt;13.2.4.31 &lt;/span&gt;&lt;dfn&gt;Script data double escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81035,7 +85615,7 @@
    state&lt;/a&gt;. Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a
    character token.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.32 &lt;/span&gt;&lt;dfn&gt;Script data double escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;13.2.4.32 &lt;/span&gt;&lt;dfn&gt;Script data double escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81048,7 +85628,7 @@
    &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
    &lt;a href=#script-data-double-escaped-state&gt;script data double escaped state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=script-data-double-escape-end-state&gt;&lt;span class=secno&gt;11.2.4.33 &lt;/span&gt;&lt;dfn&gt;Script data double escape end state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escape-end-state&gt;&lt;span class=secno&gt;13.2.4.33 &lt;/span&gt;&lt;dfn&gt;Script data double escape end state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81079,7 +85659,7 @@
    &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
    &lt;a href=#script-data-double-escaped-state&gt;script data double escaped state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.34 &lt;/span&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-attribute-name-state&gt;&lt;span class=secno&gt;13.2.4.34 &lt;/span&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81127,7 +85707,7 @@
    its value to the empty string. Switch to the &lt;a href=#attribute-name-state&gt;attribute name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.35 &lt;/span&gt;&lt;dfn&gt;Attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-name-state&gt;&lt;span class=secno&gt;13.2.4.35 &lt;/span&gt;&lt;dfn&gt;Attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81180,7 +85760,7 @@
   associated with it (if any).&lt;/p&gt;
 
 
-  &lt;h5 id=after-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.36 &lt;/span&gt;&lt;dfn&gt;After attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=after-attribute-name-state&gt;&lt;span class=secno&gt;13.2.4.36 &lt;/span&gt;&lt;dfn&gt;After attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81230,7 +85810,7 @@
    its value to the empty string. Switch to the &lt;a href=#attribute-name-state&gt;attribute name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.37 &lt;/span&gt;&lt;dfn&gt;Before attribute value state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-attribute-value-state&gt;&lt;span class=secno&gt;13.2.4.37 &lt;/span&gt;&lt;dfn&gt;Before attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81275,7 +85855,7 @@
    attribute's value. Switch to the &lt;a href=#attribute-value-(unquoted)-state&gt;attribute value (unquoted)
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.38 &lt;/span&gt;&lt;dfn&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.38 &lt;/span&gt;&lt;dfn&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81300,7 +85880,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    attribute's value.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.39 &lt;/span&gt;&lt;dfn&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.39 &lt;/span&gt;&lt;dfn&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81325,7 +85905,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    attribute's value.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;11.2.4.40 &lt;/span&gt;&lt;dfn&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;13.2.4.40 &lt;/span&gt;&lt;dfn&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81365,7 +85945,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    attribute's value.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.41 &lt;/span&gt;&lt;dfn&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;13.2.4.41 &lt;/span&gt;&lt;dfn&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Attempt to &lt;a href=#consume-a-character-reference&gt;consume a character reference&lt;/a&gt;.&lt;/p&gt;
 
@@ -81379,7 +85959,7 @@
   into this state.&lt;/p&gt;
 
 
-  &lt;h5 id=after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;11.2.4.42 &lt;/span&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;13.2.4.42 &lt;/span&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81405,7 +85985,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the character in
    the &lt;a href=#before-attribute-name-state&gt;before attribute name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=self-closing-start-tag-state&gt;&lt;span class=secno&gt;11.2.4.43 &lt;/span&gt;&lt;dfn&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=self-closing-start-tag-state&gt;&lt;span class=secno&gt;13.2.4.43 &lt;/span&gt;&lt;dfn&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81422,7 +86002,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the character in
    the &lt;a href=#before-attribute-name-state&gt;before attribute name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=bogus-comment-state&gt;&lt;span class=secno&gt;11.2.4.44 &lt;/span&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=bogus-comment-state&gt;&lt;span class=secno&gt;13.2.4.44 &lt;/span&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume every character up to and including the first U+003E
   GREATER-THAN SIGN character (&gt;) or the end of the file (EOF),
@@ -81441,7 +86021,7 @@
   character.&lt;/p&gt;
 
 
-  &lt;h5 id=markup-declaration-open-state&gt;&lt;span class=secno&gt;11.2.4.45 &lt;/span&gt;&lt;dfn&gt;Markup declaration open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=markup-declaration-open-state&gt;&lt;span class=secno&gt;13.2.4.45 &lt;/span&gt;&lt;dfn&gt;Markup declaration open state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS
   characters (-), consume those two characters, create a comment token
@@ -81465,7 +86045,7 @@
   comment.&lt;/p&gt;
 
 
-  &lt;h5 id=comment-start-state&gt;&lt;span class=secno&gt;11.2.4.46 &lt;/span&gt;&lt;dfn&gt;Comment start state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=comment-start-state&gt;&lt;span class=secno&gt;13.2.4.46 &lt;/span&gt;&lt;dfn&gt;Comment start state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81490,7 +86070,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment
    token's data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-start-dash-state&gt;&lt;span class=secno&gt;11.2.4.47 &lt;/span&gt;&lt;dfn&gt;Comment start dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-start-dash-state&gt;&lt;span class=secno&gt;13.2.4.47 &lt;/span&gt;&lt;dfn&gt;Comment start dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81517,7 +86097,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment token's
    data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-state&gt;&lt;span class=secno&gt;11.2.4.48 &lt;/span&gt;&lt;dfn id=comment&gt;Comment state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-state&gt;&lt;span class=secno&gt;13.2.4.48 &lt;/span&gt;&lt;dfn id=comment&gt;Comment state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81537,7 +86117,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment
    token's data.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-dash-state&gt;&lt;span class=secno&gt;11.2.4.49 &lt;/span&gt;&lt;dfn&gt;Comment end dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-dash-state&gt;&lt;span class=secno&gt;13.2.4.49 &lt;/span&gt;&lt;dfn&gt;Comment end dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81560,7 +86140,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment token's
    data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-state&gt;&lt;span class=secno&gt;11.2.4.50 &lt;/span&gt;&lt;dfn&gt;Comment end state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-state&gt;&lt;span class=secno&gt;13.2.4.50 &lt;/span&gt;&lt;dfn&gt;Comment end state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81596,7 +86176,7 @@
    comment token's data. Switch to the &lt;a href=#comment-state&gt;comment
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-bang-state&gt;&lt;span class=secno&gt;11.2.4.51 &lt;/span&gt;&lt;dfn&gt;Comment end bang state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-bang-state&gt;&lt;span class=secno&gt;13.2.4.51 &lt;/span&gt;&lt;dfn&gt;Comment end bang state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81626,7 +86206,7 @@
    character&lt;/a&gt; to the comment token's data. Switch to the
    &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-state&gt;&lt;span class=secno&gt;11.2.4.52 &lt;/span&gt;&lt;dfn&gt;DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-state&gt;&lt;span class=secno&gt;13.2.4.52 &lt;/span&gt;&lt;dfn&gt;DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81646,7 +86226,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the character in the
    &lt;a href=#before-doctype-name-state&gt;before DOCTYPE name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.53 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-name-state&gt;&lt;span class=secno&gt;13.2.4.53 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81683,7 +86263,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;. Switch to the &lt;a href=#doctype-name-state&gt;DOCTYPE name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.54 &lt;/span&gt;&lt;dfn&gt;DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-name-state&gt;&lt;span class=secno&gt;13.2.4.54 &lt;/span&gt;&lt;dfn&gt;DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81716,7 +86296,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    DOCTYPE token's name.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.55 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-name-state&gt;&lt;span class=secno&gt;13.2.4.55 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81756,7 +86336,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;11.2.4.56 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public keyword state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;13.2.4.56 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public keyword state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81793,7 +86373,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.57 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;13.2.4.57 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81829,7 +86409,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.58 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.58 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81854,7 +86434,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    DOCTYPE token's public identifier.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.59 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.59 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81879,7 +86459,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    DOCTYPE token's public identifier.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.60 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;13.2.4.60 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81915,7 +86495,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;11.2.4.61 &lt;/span&gt;&lt;dfn&gt;Between DOCTYPE public and system identifiers state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;13.2.4.61 &lt;/span&gt;&lt;dfn&gt;Between DOCTYPE public and system identifiers state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81950,7 +86530,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;11.2.4.62 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system keyword state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;13.2.4.62 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system keyword state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -81987,7 +86567,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.63 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;13.2.4.63 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -82023,7 +86603,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.64 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.64 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -82049,7 +86629,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    DOCTYPE token's system identifier.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.65 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;13.2.4.65 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -82075,7 +86655,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    DOCTYPE token's system identifier.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.66 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;13.2.4.66 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -82100,7 +86680,7 @@
    state&lt;/a&gt;. (This does &lt;em&gt;not&lt;/em&gt; set the DOCTYPE token's
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;.)&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=bogus-doctype-state&gt;&lt;span class=secno&gt;11.2.4.67 &lt;/span&gt;&lt;dfn&gt;Bogus DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=bogus-doctype-state&gt;&lt;span class=secno&gt;13.2.4.67 &lt;/span&gt;&lt;dfn&gt;Bogus DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -82115,7 +86695,7 @@
    &lt;dt&gt;Anything else&lt;/dt&gt;
    &lt;dd&gt;Ignore the character.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=cdata-section-state&gt;&lt;span class=secno&gt;11.2.4.68 &lt;/span&gt;&lt;dfn&gt;CDATA section state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=cdata-section-state&gt;&lt;span class=secno&gt;13.2.4.68 &lt;/span&gt;&lt;dfn&gt;CDATA section state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume every character up to the next occurrence of the three
   character sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE
@@ -82134,7 +86714,7 @@
 
 
 
-  &lt;h5 id=tokenizing-character-references&gt;&lt;span class=secno&gt;11.2.4.69 &lt;/span&gt;Tokenizing character references&lt;/h5&gt;
+  &lt;h5 id=tokenizing-character-references&gt;&lt;span class=secno&gt;13.2.4.69 &lt;/span&gt;Tokenizing character references&lt;/h5&gt;
 
   &lt;p&gt;This section defines how to &lt;dfn id=consume-a-character-reference&gt;consume a character
   reference&lt;/dfn&gt;. This definition is used when parsing character
@@ -82345,7 +86925,7 @@
   thing to do is to close some formatting elements from the middle of
   the stack when you hit a limit, or something. --&gt;
 
-  &lt;h4 id=tree-construction&gt;&lt;span class=secno&gt;11.2.5 &lt;/span&gt;&lt;dfn&gt;Tree construction&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=tree-construction&gt;&lt;span class=secno&gt;13.2.5 &lt;/span&gt;&lt;dfn&gt;Tree construction&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The input to the tree construction stage is a sequence of tokens
   from the &lt;a href=#tokenization&gt;tokenization&lt;/a&gt; stage. The tree construction
@@ -82453,7 +87033,7 @@
   constraints.&lt;/p&gt;
 
 
-  &lt;h5 id=creating-and-inserting-elements&gt;&lt;span class=secno&gt;11.2.5.1 &lt;/span&gt;Creating and inserting elements&lt;/h5&gt;
+  &lt;h5 id=creating-and-inserting-elements&gt;&lt;span class=secno&gt;13.2.5.1 &lt;/span&gt;Creating and inserting elements&lt;/h5&gt;
 
   &lt;p&gt;When the steps below require the UA to &lt;dfn id=create-an-element-for-the-token title=&quot;create an
   element for the token&quot;&gt;create an element for a token&lt;/dfn&gt; in a
@@ -82633,7 +87213,7 @@
 
    &lt;li&gt;&lt;p&gt;Then, switch the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: text&quot;&gt;text&lt;/a&gt;&quot;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=closing-elements-that-have-implied-end-tags&gt;&lt;span class=secno&gt;11.2.5.2 &lt;/span&gt;Closing elements that have implied end tags&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=closing-elements-that-have-implied-end-tags&gt;&lt;span class=secno&gt;13.2.5.2 &lt;/span&gt;Closing elements that have implied end tags&lt;/h5&gt;
 
   &lt;p&gt;When the steps below require the UA to &lt;dfn id=generate-implied-end-tags&gt;generate implied end
   tags&lt;/dfn&gt;, then, while the &lt;a href=#current-node&gt;current node&lt;/a&gt; is a
@@ -82649,7 +87229,7 @@
   above steps as if that element was not in the above list.&lt;/p&gt;
 
 
-  &lt;h5 id=foster-parenting&gt;&lt;span class=secno&gt;11.2.5.3 &lt;/span&gt;Foster parenting&lt;/h5&gt;
+  &lt;h5 id=foster-parenting&gt;&lt;span class=secno&gt;13.2.5.3 &lt;/span&gt;Foster parenting&lt;/h5&gt;
 
   &lt;p&gt;Foster parenting happens when content is misnested in tables.&lt;/p&gt;
 
@@ -82687,10 +87267,10 @@
 
 
 
-  &lt;h5 id=parsing-main-inhtml&gt;&lt;span class=secno&gt;11.2.5.4 &lt;/span&gt;The rules for parsing tokens in HTML content&lt;/h5&gt;
+  &lt;h5 id=parsing-main-inhtml&gt;&lt;span class=secno&gt;13.2.5.4 &lt;/span&gt;The rules for parsing tokens in HTML content&lt;/h5&gt;
 
 
-  &lt;h6 id=the-initial-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.1 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;h6 id=the-initial-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.1 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-initial-insertion-mode title=&quot;insertion mode: initial&quot;&gt;initial&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -82883,7 +87463,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=the-before-html-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.2 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=the-before-html-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.2 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-before-html-insertion-mode title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -82966,7 +87546,7 @@
   as described in the next section.&lt;/p&gt;
 
 
-  &lt;h6 id=the-before-head-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.3 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;h6 id=the-before-head-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.3 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-before-head-insertion-mode title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -83031,7 +87611,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-inhead&gt;&lt;span class=secno&gt;11.2.5.4.4 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inhead&gt;&lt;span class=secno&gt;13.2.5.4.4 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion mode: in head&quot;&gt;in head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -83197,7 +87777,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;11.2.5.4.5 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;13.2.5.4.5 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inheadnoscript title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -83257,7 +87837,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=the-after-head-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.6 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-head-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.6 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -83347,7 +87927,7 @@
     token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-inbody&gt;&lt;span class=secno&gt;11.2.5.4.7 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inbody&gt;&lt;span class=secno&gt;13.2.5.4.7 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -84610,7 +89190,7 @@
 
     &lt;/ol&gt;&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-incdata&gt;&lt;span class=secno&gt;11.2.5.4.8 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: text&quot;&gt;text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incdata&gt;&lt;span class=secno&gt;13.2.5.4.8 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: text&quot;&gt;text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: text&quot;&gt;text&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -84762,7 +89342,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-intable&gt;&lt;span class=secno&gt;11.2.5.4.9 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-intable&gt;&lt;span class=secno&gt;13.2.5.4.9 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in table&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -84965,7 +89545,7 @@
 
 
 
-  &lt;h6 id=parsing-main-intabletext&gt;&lt;span class=secno&gt;11.2.5.4.10 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;h6 id=parsing-main-intabletext&gt;&lt;span class=secno&gt;13.2.5.4.10 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85004,7 +89584,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-incaption&gt;&lt;span class=secno&gt;11.2.5.4.11 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incaption&gt;&lt;span class=secno&gt;13.2.5.4.11 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85061,7 +89641,7 @@
     mode&lt;/a&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;11.2.5.4.12 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;13.2.5.4.12 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85147,7 +89727,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-intbody&gt;&lt;span class=secno&gt;11.2.5.4.13 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-intbody&gt;&lt;span class=secno&gt;13.2.5.4.13 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85235,7 +89815,7 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h6 id=parsing-main-intr&gt;&lt;span class=secno&gt;11.2.5.4.14 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;h6 id=parsing-main-intr&gt;&lt;span class=secno&gt;13.2.5.4.14 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85325,7 +89905,7 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h6 id=parsing-main-intd&gt;&lt;span class=secno&gt;11.2.5.4.15 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;h6 id=parsing-main-intd&gt;&lt;span class=secno&gt;13.2.5.4.15 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85418,7 +89998,7 @@
   cell&lt;/a&gt; algorithm is invoked.&lt;/p&gt;
 
 
-  &lt;h6 id=parsing-main-inselect&gt;&lt;span class=secno&gt;11.2.5.4.16 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;h6 id=parsing-main-inselect&gt;&lt;span class=secno&gt;13.2.5.4.16 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85568,7 +90148,7 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;11.2.5.4.17 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;13.2.5.4.17 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85599,7 +90179,7 @@
     mode&lt;/a&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;11.2.5.4.18 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;13.2.5.4.18 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85656,7 +90236,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;11.2.5.4.19 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;13.2.5.4.19 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-inframeset title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85748,7 +90328,7 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;11.2.5.4.20 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;13.2.5.4.20 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#parsing-main-afterframeset title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85801,7 +90381,7 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.21 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.21 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-after-body-insertion-mode title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85834,7 +90414,7 @@
     reprocess the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;11.2.5.4.22 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
+  &lt;/dl&gt;&lt;h6 id=the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;13.2.5.4.22 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h6&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for the &quot;&lt;a href=#the-after-after-frameset-insertion-mode title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot; &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -85871,7 +90451,7 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;11.2.5.5 &lt;/span&gt;The rules for parsing tokens &lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;13.2.5.5 &lt;/span&gt;The rules for parsing tokens &lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;When the user agent is to apply the rules for parsing tokens in foreign content, the user agent must handle the token as follows:&lt;/p&gt;
 
@@ -86093,7 +90673,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-end&gt;&lt;span class=secno&gt;11.2.6 &lt;/span&gt;The end&lt;/h4&gt;
+  &lt;h4 id=the-end&gt;&lt;span class=secno&gt;13.2.6 &lt;/span&gt;The end&lt;/h4&gt;
 
   &lt;p&gt;Once the user agent &lt;dfn id=stop-parsing title=&quot;stop parsing&quot;&gt;stops parsing&lt;/dfn&gt;
   the document, the user agent must run the following steps:&lt;/p&gt;
@@ -86215,7 +90795,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=coercing-an-html-dom-into-an-infoset&gt;&lt;span class=secno&gt;11.2.7 &lt;/span&gt;Coercing an HTML DOM into an infoset&lt;/h4&gt;
+  &lt;h4 id=coercing-an-html-dom-into-an-infoset&gt;&lt;span class=secno&gt;13.2.7 &lt;/span&gt;Coercing an HTML DOM into an infoset&lt;/h4&gt;
 
   &lt;p&gt;When an application uses an &lt;a href=#html-parser&gt;HTML parser&lt;/a&gt; in
   conjunction with an XML pipeline, it is possible that the
@@ -86304,7 +90884,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=an-introduction-to-error-handling-and-strange-cases-in-the-parser&gt;&lt;span class=secno&gt;11.2.8 &lt;/span&gt;An introduction to error handling and strange cases in the parser&lt;/h4&gt;
+  &lt;h4 id=an-introduction-to-error-handling-and-strange-cases-in-the-parser&gt;&lt;span class=secno&gt;13.2.8 &lt;/span&gt;An introduction to error handling and strange cases in the parser&lt;/h4&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -86312,7 +90892,7 @@
   the &lt;a href=#html-parser&gt;HTML parser&lt;/a&gt; handles these cases.&lt;/p&gt;
 
 
-  &lt;h5 id=misnested-tags:-b-i-/b-/i&gt;&lt;span class=secno&gt;11.2.8.1 &lt;/span&gt;Misnested tags: &lt;b&gt;&lt;i&gt;&lt;/b&gt;&lt;/i&gt;&lt;/h5&gt;
+  &lt;h5 id=misnested-tags:-b-i-/b-/i&gt;&lt;span class=secno&gt;13.2.8.1 &lt;/span&gt;Misnested tags: &lt;b&gt;&lt;i&gt;&lt;/b&gt;&lt;/i&gt;&lt;/h5&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -86346,7 +90926,7 @@
   received, and the &quot;5&quot; text node is inserted, the DOM looks as
   follows:&lt;/p&gt;
 
-  &lt;ul class=domTree&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-head-element&gt;head&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;1&lt;/span&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;2&lt;/span&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-i-element&gt;i&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;3&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-i-element&gt;i&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;4&lt;/span&gt;&lt;/ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;5&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h5 id=misnested-tags:-b-p-/b-/p&gt;&lt;span class=secno&gt;11.2.8.2 &lt;/span&gt;Misnested tags: &lt;b&gt;&lt;p&gt;&lt;/b&gt;&lt;/p&gt;&lt;/h5&gt;
+  &lt;ul class=domTree&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-head-element&gt;head&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;1&lt;/span&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;2&lt;/span&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-i-element&gt;i&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;3&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-i-element&gt;i&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;4&lt;/span&gt;&lt;/ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;5&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h5 id=misnested-tags:-b-p-/b-/p&gt;&lt;span class=secno&gt;13.2.8.2 &lt;/span&gt;Misnested tags: &lt;b&gt;&lt;p&gt;&lt;/b&gt;&lt;/p&gt;&lt;/h5&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -86395,7 +90975,7 @@
   elements&lt;/a&gt;, so that when the &quot;3&quot; is parsed, it is appended to
   the &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt; element:&lt;/p&gt;
 
-  &lt;ul class=domTree&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-head-element&gt;head&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;1&lt;/span&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;2&lt;/span&gt;&lt;/ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;3&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h5 id=unexpected-markup-in-tables&gt;&lt;span class=secno&gt;11.2.8.3 &lt;/span&gt;Unexpected markup in tables&lt;/h5&gt;
+  &lt;ul class=domTree&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-head-element&gt;head&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;1&lt;/span&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;2&lt;/span&gt;&lt;/ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;3&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h5 id=unexpected-markup-in-tables&gt;&lt;span class=secno&gt;13.2.8.3 &lt;/span&gt;Unexpected markup in tables&lt;/h5&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -86494,7 +91074,7 @@
   result in yet another &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element being created, this
   time after the table:&lt;/p&gt;
 
-  &lt;ul class=domTree&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-head-element&gt;head&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;bbb&lt;/span&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;aaa&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;ccc&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h5 id=scripts-that-modify-the-page-as-it-is-being-parsed&gt;&lt;span class=secno&gt;11.2.8.4 &lt;/span&gt;Scripts that modify the page as it is being pars
 ed&lt;/h5&gt;
+  &lt;ul class=domTree&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-head-element&gt;head&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;bbb&lt;/span&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;aaa&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;ccc&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h5 id=scripts-that-modify-the-page-as-it-is-being-parsed&gt;&lt;span class=secno&gt;13.2.8.4 &lt;/span&gt;Scripts that modify the page as it is being pars
 ed&lt;/h5&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -86543,7 +91123,7 @@
   &lt;ul class=domTree&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-head-element&gt;head&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;alert(document.URL);&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p&gt;This script does execute, resulting in an alert that says &quot;<A HREF="http://example.com/inner">http://example.com/inner</A>&quot;.&lt;/p&gt;
 
 
-  &lt;h5 id=the-execution-of-scripts-that-are-moving-across-multiple-documents&gt;&lt;span class=secno&gt;11.2.8.5 &lt;/span&gt;The execution of scripts that are moving across multiple documents&lt;/h5&gt;
+  &lt;h5 id=the-execution-of-scripts-that-are-moving-across-multiple-documents&gt;&lt;span class=secno&gt;13.2.8.5 &lt;/span&gt;The execution of scripts that are moving across multiple documents&lt;/h5&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -86564,7 +91144,7 @@
 
 
 
-  &lt;h5 id=unclosed-formatting-elements&gt;&lt;span class=secno&gt;11.2.8.6 &lt;/span&gt;Unclosed formatting elements&lt;/h5&gt;
+  &lt;h5 id=unclosed-formatting-elements&gt;&lt;span class=secno&gt;13.2.8.6 &lt;/span&gt;Unclosed formatting elements&lt;/h5&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -86596,7 +91176,7 @@
 
 
 
-  &lt;h3 id=serializing-html-fragments&gt;&lt;span class=secno&gt;11.3 &lt;/span&gt;Serializing HTML fragments&lt;/h3&gt;
+  &lt;h3 id=serializing-html-fragments&gt;&lt;span class=secno&gt;13.3 &lt;/span&gt;Serializing HTML fragments&lt;/h3&gt;
 
   &lt;p&gt;The following steps form the &lt;dfn id=html-fragment-serialization-algorithm&gt;HTML fragment serialization
   algorithm&lt;/dfn&gt;. The algorithm takes as input a DOM
@@ -86860,7 +91440,7 @@
    &lt;li&gt;&lt;p&gt;If the algorithm was &lt;em&gt;not&lt;/em&gt; invoked in the
    &lt;i&gt;attribute mode&lt;/i&gt;, replace any occurrences of the &quot;&lt;code title=&quot;&quot;&gt;&lt;&lt;/code&gt;&quot; character by the string &quot;&lt;code title=&quot;&quot;&gt;&amp;lt;&lt;/code&gt;&quot;, and any occurrences of the &quot;&lt;code title=&quot;&quot;&gt;&gt;&lt;/code&gt;&quot; character by the string &quot;&lt;code title=&quot;&quot;&gt;&amp;gt;&lt;/code&gt;&quot;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h3 id=parsing-html-fragments&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Parsing HTML fragments&lt;/h3&gt;
+  &lt;/ol&gt;&lt;h3 id=parsing-html-fragments&gt;&lt;span class=secno&gt;13.4 &lt;/span&gt;Parsing HTML fragments&lt;/h3&gt;
 
   &lt;p&gt;The following steps form the &lt;dfn id=html-fragment-parsing-algorithm&gt;HTML fragment parsing
   algorithm&lt;/dfn&gt;. The algorithm optionally takes as input an
@@ -87040,7 +91620,7 @@
 
 
 
-  &lt;h3 id=named-character-references&gt;&lt;span class=secno&gt;11.5 &lt;/span&gt;&lt;dfn&gt;Named character references&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=named-character-references&gt;&lt;span class=secno&gt;13.5 &lt;/span&gt;&lt;dfn&gt;Named character references&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This table lists the character reference names that are supported
   by HTML, and the code points to which they refer. It is referenced
@@ -87061,7 +91641,7 @@
 
 
 
-  &lt;h2 id=the-xhtml-syntax&gt;&lt;span class=secno&gt;12 &lt;/span&gt;&lt;dfn id=xhtml&gt;The XHTML syntax&lt;/dfn&gt;&lt;/h2&gt;
+  &lt;h2 id=the-xhtml-syntax&gt;&lt;span class=secno&gt;14 &lt;/span&gt;&lt;dfn id=xhtml&gt;The XHTML syntax&lt;/dfn&gt;&lt;/h2&gt;
 
   &lt;p class=note&gt;This section only describes the rules for XML
   resources. Rules for &lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt; resources are discussed
@@ -87070,7 +91650,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=writing-xhtml-documents&gt;&lt;span class=secno&gt;12.1 &lt;/span&gt;Writing XHTML documents&lt;/h3&gt;
+  &lt;h3 id=writing-xhtml-documents&gt;&lt;span class=secno&gt;14.1 &lt;/span&gt;Writing XHTML documents&lt;/h3&gt;
 
   &lt;/div&gt;
 
@@ -87095,7 +91675,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=parsing-xhtml-documents&gt;&lt;span class=secno&gt;12.2 &lt;/span&gt;Parsing XHTML documents&lt;/h3&gt;
+  &lt;h3 id=parsing-xhtml-documents&gt;&lt;span class=secno&gt;14.2 &lt;/span&gt;Parsing XHTML documents&lt;/h3&gt;
 
   &lt;p&gt;This section describes the relationship between XML and the DOM,
   with a particular emphasis on how this interacts with HTML.&lt;/p&gt;
@@ -87212,7 +91792,7 @@
 
 
 
-  &lt;h3 id=serializing-xhtml-fragments&gt;&lt;span class=secno&gt;12.3 &lt;/span&gt;Serializing XHTML fragments&lt;/h3&gt;
+  &lt;h3 id=serializing-xhtml-fragments&gt;&lt;span class=secno&gt;14.3 &lt;/span&gt;Serializing XHTML fragments&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=xml-fragment-serialization-algorithm&gt;XML fragment serialization algorithm&lt;/dfn&gt; for a
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#element&gt;Element&lt;/a&gt;&lt;/code&gt; node either returns a
@@ -87309,7 +91889,7 @@
 
 
 
-  &lt;h3 id=parsing-xhtml-fragments&gt;&lt;span class=secno&gt;12.4 &lt;/span&gt;Parsing XHTML fragments&lt;/h3&gt;
+  &lt;h3 id=parsing-xhtml-fragments&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Parsing XHTML fragments&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=xml-fragment-parsing-algorithm&gt;XML fragment parsing algorithm&lt;/dfn&gt; either returns a
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; or throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception.
@@ -87383,7 +91963,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h2 id=rendering&gt;&lt;span class=secno&gt;13 &lt;/span&gt;Rendering&lt;/h2&gt;
+  &lt;h2 id=rendering&gt;&lt;span class=secno&gt;15 &lt;/span&gt;Rendering&lt;/h2&gt;
 
   &lt;p&gt;&lt;i&gt;User agents are not required to present HTML documents in any
   particular way. However, this section provides a set of suggestions
@@ -87399,7 +91979,7 @@
   &quot;must&quot;.&lt;/i&gt;&lt;/p&gt;
 
 
-  &lt;h3 id=introduction-15&gt;&lt;span class=secno&gt;13.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+  &lt;h3 id=introduction-17&gt;&lt;span class=secno&gt;15.1 &lt;/span&gt;Introduction&lt;/h3&gt;
 
   &lt;p&gt;In general, user agents are expected to support CSS, and many of
   the suggestions in this section are expressed in CSS terms. User
@@ -87440,7 +92020,7 @@
 
 
 
-  &lt;h3 id=the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;13.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/h3&gt;
+  &lt;h3 id=the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;15.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/h3&gt;
 
   &lt;p&gt;The CSS rules given in these subsections are, except where
   otherwise specified, expected to be used as part of the user-agent
@@ -87501,10 +92081,10 @@
 
 
 
-  &lt;h3 id=non-replaced-elements&gt;&lt;span class=secno&gt;13.3 &lt;/span&gt;Non-replaced elements&lt;/h3&gt;
+  &lt;h3 id=non-replaced-elements&gt;&lt;span class=secno&gt;15.3 &lt;/span&gt;Non-replaced elements&lt;/h3&gt;
 
 
-  &lt;h4 id=hidden-elements&gt;&lt;span class=secno&gt;13.3.1 &lt;/span&gt;Hidden elements&lt;/h4&gt;
+  &lt;h4 id=hidden-elements&gt;&lt;span class=secno&gt;15.3.1 &lt;/span&gt;Hidden elements&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -87519,7 +92099,7 @@
   'none', irrespective of CSS rules.&lt;/p&gt;
 
 
-  &lt;h4 id=the-page&gt;&lt;span class=secno&gt;13.3.2 &lt;/span&gt;The page&lt;/h4&gt;
+  &lt;h4 id=the-page&gt;&lt;span class=secno&gt;15.3.2 &lt;/span&gt;The page&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -87650,7 +92230,7 @@
 
 
 
-  &lt;h4 id=flow-content-1&gt;&lt;span class=secno&gt;13.3.3 &lt;/span&gt;Flow content&lt;/h4&gt;
+  &lt;h4 id=flow-content-1&gt;&lt;span class=secno&gt;15.3.3 &lt;/span&gt;Flow content&lt;/h4&gt;
 
   &lt;!-- del, ins, and map are inline. --&gt;
 
@@ -87715,7 +92295,7 @@
 
 
 
-  &lt;h4 id=phrasing-content-1&gt;&lt;span class=secno&gt;13.3.4 &lt;/span&gt;Phrasing content&lt;/h4&gt;
+  &lt;h4 id=phrasing-content-1&gt;&lt;span class=secno&gt;15.3.4 &lt;/span&gt;Phrasing content&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -87902,7 +92482,7 @@
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h4 id=bidirectional-text&gt;&lt;span class=secno&gt;13.3.5 &lt;/span&gt;Bidirectional text&lt;/h4&gt;
+  &lt;/ol&gt;&lt;h4 id=bidirectional-text&gt;&lt;span class=secno&gt;15.3.5 &lt;/span&gt;Bidirectional text&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -87915,7 +92495,7 @@
 textarea[dir=auto], pre[dir=auto] { unicode-bidi: plaintext; } /* &lt;a href=#case-insensitive-selector-exception&gt;case-insensitive&lt;/a&gt; */&lt;/pre&gt;
 
 
-  &lt;h4 id=sections-and-headings&gt;&lt;span class=secno&gt;13.3.6 &lt;/span&gt;Sections and headings&lt;/h4&gt;
+  &lt;h4 id=sections-and-headings&gt;&lt;span class=secno&gt;15.3.6 &lt;/span&gt;Sections and headings&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -87948,7 +92528,7 @@
 
 
 
-  &lt;h4 id=lists&gt;&lt;span class=secno&gt;13.3.7 &lt;/span&gt;Lists&lt;/h4&gt;
+  &lt;h4 id=lists&gt;&lt;span class=secno&gt;15.3.7 &lt;/span&gt;Lists&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -88017,7 +92597,7 @@
   to render the counter in the list item marker.&lt;/p&gt;
 
 
-  &lt;h4 id=tables&gt;&lt;span class=secno&gt;13.3.8 &lt;/span&gt;Tables&lt;/h4&gt;
+  &lt;h4 id=tables&gt;&lt;span class=secno&gt;15.3.8 &lt;/span&gt;Tables&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -88370,7 +92950,7 @@
 
 
 
-  &lt;h4 id=form-controls&gt;&lt;span class=secno&gt;13.3.9 &lt;/span&gt;Form controls&lt;/h4&gt;
+  &lt;h4 id=form-controls&gt;&lt;span class=secno&gt;15.3.9 &lt;/span&gt;Form controls&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -88394,7 +92974,7 @@
 
 
 
-  &lt;h4 id=the-hr-element-0&gt;&lt;span class=secno&gt;13.3.10 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-hr-element-0&gt;&lt;span class=secno&gt;15.3.10 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -88444,7 +93024,7 @@
 
 
 
-  &lt;h4 id=the-fieldset-element-0&gt;&lt;span class=secno&gt;13.3.11 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-fieldset-element-0&gt;&lt;span class=secno&gt;15.3.11 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -88491,9 +93071,9 @@
      &lt;td&gt;On the right
     &lt;tr&gt;&lt;td&gt;&lt;code title=&quot;&quot;&gt;center&lt;/code&gt;
      &lt;td&gt;In the middle
-  &lt;/table&gt;&lt;h3 id=replaced-elements&gt;&lt;span class=secno&gt;13.4 &lt;/span&gt;Replaced elements&lt;/h3&gt;
+  &lt;/table&gt;&lt;h3 id=replaced-elements&gt;&lt;span class=secno&gt;15.4 &lt;/span&gt;Replaced elements&lt;/h3&gt;
 
-  &lt;h4 id=embedded-content-2&gt;&lt;span class=secno&gt;13.4.1 &lt;/span&gt;Embedded content&lt;/h4&gt;
+  &lt;h4 id=embedded-content-2&gt;&lt;span class=secno&gt;15.4.1 &lt;/span&gt;Embedded content&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;, and
   &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; elements are expected to be treated as replaced
@@ -88566,14 +93146,14 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=timed-text-tracks-0&gt;&lt;span class=secno&gt;13.4.2 &lt;/span&gt;Timed text tracks&lt;/h4&gt;
+  &lt;h4 id=timed-text-tracks-0&gt;&lt;span class=secno&gt;15.4.2 &lt;/span&gt;Timed text tracks&lt;/h4&gt;
 
   &lt;p class=note&gt;This section is intended to be moved to its own CSS
   module once an editor is found to run with it.&lt;/p&gt;
 
 
 
-  &lt;h5 id=webvtt-cue-text-rendering-rules&gt;&lt;span class=secno&gt;13.4.2.1 &lt;/span&gt;&lt;dfn&gt;WebVTT cue text rendering rules&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=webvtt-cue-text-rendering-rules&gt;&lt;span class=secno&gt;15.4.2.1 &lt;/span&gt;&lt;dfn&gt;WebVTT cue text rendering rules&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text
   tracks&lt;/dfn&gt; render the &lt;a href=#text-track title=&quot;text track&quot;&gt;text
@@ -89129,7 +93709,7 @@
   entirely.&lt;/p&gt;
 
 
-  &lt;h5 id=applying-css-properties-to-webvtt-node-objects&gt;&lt;span class=secno&gt;13.4.2.2 &lt;/span&gt;Applying CSS properties to &lt;a href=#webvtt-node-object title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/a&gt;&lt;/h5&gt;
+  &lt;h5 id=applying-css-properties-to-webvtt-node-objects&gt;&lt;span class=secno&gt;15.4.2.2 &lt;/span&gt;Applying CSS properties to &lt;a href=#webvtt-node-object title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/a&gt;&lt;/h5&gt;
 
   &lt;p&gt;When following the &lt;a href=#rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT
   text tracks&lt;/a&gt;, user agents must set properties of &lt;a href=#webvtt-node-object title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/a&gt; as defined in
@@ -89192,7 +93772,7 @@
   values.&lt;/p&gt;
 
 
-  &lt;h5 id=css-extensions&gt;&lt;span class=secno&gt;13.4.2.3 &lt;/span&gt;CSS extensions&lt;/h5&gt;
+  &lt;h5 id=css-extensions&gt;&lt;span class=secno&gt;15.4.2.3 &lt;/span&gt;CSS extensions&lt;/h5&gt;
 
   &lt;p&gt;When a user agent is rendering one or more &lt;a href=#text-track-cue title=&quot;text
   track cue&quot;&gt;text track cues&lt;/a&gt; according to the &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue
@@ -89224,7 +93804,7 @@
   ':past' and ':future' pseudo-classes.&lt;/p&gt;
 
 
-  &lt;h6 id=&quot;the-'::cue'-pseudo-element&quot;&gt;&lt;span class=secno&gt;13.4.2.3.1 &lt;/span&gt;The '::cue' pseudo-element&lt;/h6&gt;
+  &lt;h6 id=&quot;the-'::cue'-pseudo-element&quot;&gt;&lt;span class=secno&gt;15.4.2.3.1 &lt;/span&gt;The '::cue' pseudo-element&lt;/h6&gt;
 
   &lt;p&gt;The '&lt;dfn id=pseudo-cue title=pseudo-cue&gt;::cue&lt;/dfn&gt;' pseudo-element (with no
   argument) matches any &lt;a href=#list-of-webvtt-node-objects&gt;List of WebVTT Node Objects&lt;/a&gt;
@@ -89366,7 +93946,7 @@
   the &lt;a href=#webvtt-cue-background-box&gt;WebVTT cue background box&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h6 id=&quot;the-':past'-and-':future'-pseudo-classes&quot;&gt;&lt;span class=secno&gt;13.4.2.3.2 &lt;/span&gt;The ':past' and ':future' pseudo-classes&lt;/h6&gt;
+  &lt;h6 id=&quot;the-':past'-and-':future'-pseudo-classes&quot;&gt;&lt;span class=secno&gt;15.4.2.3.2 &lt;/span&gt;The ':past' and ':future' pseudo-classes&lt;/h6&gt;
 
   &lt;p&gt;The &lt;dfn id=past-pseudo-class title=past-pseudo-class&gt;':past'&lt;/dfn&gt; and &lt;dfn id=future-pseudo-class title=future-pseudo-class&gt;':future'&lt;/dfn&gt; pseudo-classes only
   match &lt;a href=#webvtt-node-object title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/a&gt;.&lt;/p&gt;
@@ -89404,7 +93984,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=images-0&gt;&lt;span class=secno&gt;13.4.3 &lt;/span&gt;Images&lt;/h4&gt;
+  &lt;h4 id=images-0&gt;&lt;span class=secno&gt;15.4.3 &lt;/span&gt;Images&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element
   when its &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in
@@ -89486,7 +94066,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;13.4.4 &lt;/span&gt;Attributes for embedded content and images&lt;/h4&gt;
+  &lt;h4 id=attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;15.4.4 &lt;/span&gt;Attributes for embedded content and images&lt;/h4&gt;
 
   &lt;p&gt;The following CSS rules are expected to apply as
   &lt;a href=#presentational-hints&gt;presentational hints&lt;/a&gt;:&lt;/p&gt;
@@ -89582,7 +94162,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=image-maps-0&gt;&lt;span class=secno&gt;13.4.5 &lt;/span&gt;Image maps&lt;/h4&gt;
+  &lt;h4 id=image-maps-0&gt;&lt;span class=secno&gt;15.4.5 &lt;/span&gt;Image maps&lt;/h4&gt;
 
   &lt;p&gt;Shapes on an &lt;a href=#image-map&gt;image map&lt;/a&gt; are expected to act, for the
   purpose of the CSS cascade, as elements independent of the original
@@ -89610,7 +94190,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=toolbars-0&gt;&lt;span class=secno&gt;13.4.6 &lt;/span&gt;Toolbars&lt;/h4&gt;
+  &lt;h4 id=toolbars-0&gt;&lt;span class=secno&gt;15.4.6 &lt;/span&gt;Toolbars&lt;/h4&gt;
 
   &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, the element is
   expected to be treated as a replaced element with a height about two
@@ -89626,9 +94206,9 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=bindings&gt;&lt;span class=secno&gt;13.5 &lt;/span&gt;Bindings&lt;/h3&gt;
+  &lt;h3 id=bindings&gt;&lt;span class=secno&gt;15.5 &lt;/span&gt;Bindings&lt;/h3&gt;
 
-  &lt;h4 id=introduction-16&gt;&lt;span class=secno&gt;13.5.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-18&gt;&lt;span class=secno&gt;15.5.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;A number of elements have their rendering defined in terms of the
   'binding' property. &lt;a href=#refsBECSS&gt;[BECSS]&lt;/a&gt;&lt;/p&gt;
@@ -89651,7 +94231,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-button-element-0&gt;&lt;span class=secno&gt;13.5.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-button-element-0&gt;&lt;span class=secno&gt;15.5.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89667,7 +94247,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-details-element-0&gt;&lt;span class=secno&gt;13.5.3 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-details-element&gt;details&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-details-element-0&gt;&lt;span class=secno&gt;15.5.3 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-details-element&gt;details&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89702,7 +94282,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-input-element-as-a-text-entry-widget&gt;&lt;span class=secno&gt;13.5.4 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a text entry widget&lt;/h4&gt;
+  &lt;h4 id=the-input-element-as-a-text-entry-widget&gt;&lt;span class=secno&gt;15.5.4 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a text entry widget&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89749,7 +94329,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-input-element-as-domain-specific-widgets&gt;&lt;span class=secno&gt;13.5.5 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as domain-specific widgets&lt;/h4&gt;
+  &lt;h4 id=the-input-element-as-domain-specific-widgets&gt;&lt;span class=secno&gt;15.5.5 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as domain-specific widgets&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89804,7 +94384,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-input-element-as-a-range-control&gt;&lt;span class=secno&gt;13.5.6 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a range control&lt;/h4&gt;
+  &lt;h4 id=the-input-element-as-a-range-control&gt;&lt;span class=secno&gt;15.5.6 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a range control&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89830,7 +94410,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-input-element-as-a-color-well&gt;&lt;span class=secno&gt;13.5.7 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a color well&lt;/h4&gt;
+  &lt;h4 id=the-input-element-as-a-color-well&gt;&lt;span class=secno&gt;15.5.7 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a color well&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89852,7 +94432,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-input-element-as-a-checkbox-and-radio-button-widgets&gt;&lt;span class=secno&gt;13.5.8 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a checkbox and radio button widgets&lt;/h4&gt;
+  &lt;h4 id=the-input-element-as-a-checkbox-and-radio-button-widgets&gt;&lt;span class=secno&gt;15.5.8 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a checkbox and radio button widgets&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89874,7 +94454,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-input-element-as-a-file-upload-control&gt;&lt;span class=secno&gt;13.5.9 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a file upload control&lt;/h4&gt;
+  &lt;h4 id=the-input-element-as-a-file-upload-control&gt;&lt;span class=secno&gt;15.5.9 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a file upload control&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89892,7 +94472,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-input-element-as-a-button&gt;&lt;span class=secno&gt;13.5.10 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a button&lt;/h4&gt;
+  &lt;h4 id=the-input-element-as-a-button&gt;&lt;span class=secno&gt;15.5.10 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element as a button&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -89913,7 +94493,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-marquee-element-0&gt;&lt;span class=secno&gt;13.5.11 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-marquee-element&gt;marquee&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-marquee-element-0&gt;&lt;span class=secno&gt;15.5.11 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-marquee-element&gt;marquee&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -90077,7 +94657,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-meter-element-0&gt;&lt;span class=secno&gt;13.5.12 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-meter-element&gt;meter&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-meter-element-0&gt;&lt;span class=secno&gt;15.5.12 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-meter-element&gt;meter&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -90108,7 +94688,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-progress-element-0&gt;&lt;span class=secno&gt;13.5.13 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-progress-element&gt;progress&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-progress-element-0&gt;&lt;span class=secno&gt;15.5.13 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-progress-element&gt;progress&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -90154,7 +94734,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-select-element-0&gt;&lt;span class=secno&gt;13.5.14 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-select-element-0&gt;&lt;span class=secno&gt;15.5.14 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -90222,7 +94802,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-textarea-element-0&gt;&lt;span class=secno&gt;13.5.15 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-textarea-element-0&gt;&lt;span class=secno&gt;15.5.15 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -90277,7 +94857,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-keygen-element-0&gt;&lt;span class=secno&gt;13.5.16 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-keygen-element-0&gt;&lt;span class=secno&gt;15.5.16 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -90293,7 +94873,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=the-time-element-0&gt;&lt;span class=secno&gt;13.5.17 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-time-element&gt;time&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-time-element-0&gt;&lt;span class=secno&gt;15.5.17 &lt;/span&gt;The &lt;code&gt;&lt;a href=#the-time-element&gt;time&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
@@ -90313,7 +94893,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=frames-and-framesets&gt;&lt;span class=secno&gt;13.6 &lt;/span&gt;Frames and framesets&lt;/h3&gt;
+  &lt;h3 id=frames-and-framesets&gt;&lt;span class=secno&gt;15.6 &lt;/span&gt;Frames and framesets&lt;/h3&gt;
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt; element's second child element is a
   &lt;code&gt;&lt;a href=#frameset&gt;frameset&lt;/a&gt;&lt;/code&gt; element, the user agent is expected to render
@@ -90598,9 +95178,9 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=interactive-media&gt;&lt;span class=secno&gt;13.7 &lt;/span&gt;Interactive media&lt;/h3&gt;
+  &lt;h3 id=interactive-media&gt;&lt;span class=secno&gt;15.7 &lt;/span&gt;Interactive media&lt;/h3&gt;
 
-  &lt;h4 id=links,-forms,-and-navigation&gt;&lt;span class=secno&gt;13.7.1 &lt;/span&gt;Links, forms, and navigation&lt;/h4&gt;
+  &lt;h4 id=links,-forms,-and-navigation&gt;&lt;span class=secno&gt;15.7.1 &lt;/span&gt;Links, forms, and navigation&lt;/h4&gt;
 
   &lt;p&gt;User agents are expected to allow the user to control aspects of
   &lt;a href=#hyperlink&gt;hyperlink&lt;/a&gt; activation and &lt;a href=#form-submission&gt;form submission&lt;/a&gt;,
@@ -90636,7 +95216,7 @@
 
 
 
-  &lt;h4 id=the-title-attribute-0&gt;&lt;span class=secno&gt;13.7.2 &lt;/span&gt;The &lt;code title=attr-title&gt;&lt;a href=#the-title-attribute&gt;title&lt;/a&gt;&lt;/code&gt; attribute&lt;/h4&gt;
+  &lt;h4 id=the-title-attribute-0&gt;&lt;span class=secno&gt;15.7.2 &lt;/span&gt;The &lt;code title=attr-title&gt;&lt;a href=#the-title-attribute&gt;title&lt;/a&gt;&lt;/code&gt; attribute&lt;/h4&gt;
 
   &lt;p&gt;Given an element (e.g. the element designated by the mouse
   cursor), if the element, or one of its ancestors, has a &lt;code title=attr-title&gt;&lt;a href=#the-title-attribute&gt;title&lt;/a&gt;&lt;/code&gt; attribute, and the nearest such
@@ -90674,7 +95254,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=editing-hosts&gt;&lt;span class=secno&gt;13.7.3 &lt;/span&gt;Editing hosts&lt;/h4&gt;
+  &lt;h4 id=editing-hosts&gt;&lt;span class=secno&gt;15.7.3 &lt;/span&gt;Editing hosts&lt;/h4&gt;
 
   &lt;p&gt;The current text editing caret (i.e. the &lt;a href=#active-range&gt;active
   range&lt;/a&gt;, if it is empty and in an &lt;a href=#editing-host&gt;editing host&lt;/a&gt;),
@@ -90688,7 +95268,7 @@
 
 
 
-  &lt;h4 id=text-rendered-in-native-user-interfaces&gt;&lt;span class=secno&gt;13.7.4 &lt;/span&gt;Text rendered in native user interfaces&lt;/h4&gt;
+  &lt;h4 id=text-rendered-in-native-user-interfaces&gt;&lt;span class=secno&gt;15.7.4 &lt;/span&gt;Text rendered in native user interfaces&lt;/h4&gt;
 
   &lt;p&gt;User agents are expected to honor the Unicode semantics of text
   that is exposed in user interfaces, for example supporting the
@@ -90784,7 +95364,7 @@
 
 
 
-  &lt;h3 id=print-media&gt;&lt;span class=secno&gt;13.8 &lt;/span&gt;Print media&lt;/h3&gt;
+  &lt;h3 id=print-media&gt;&lt;span class=secno&gt;15.8 &lt;/span&gt;Print media&lt;/h3&gt;
 
   &lt;p&gt;User agents are expected to allow the user to request the
   opportunity to &lt;dfn id=obtain-a-physical-form&gt;obtain a physical form&lt;/dfn&gt; (or a
@@ -90804,9 +95384,9 @@
 
 
 
-  &lt;h2 id=obsolete&gt;&lt;span class=secno&gt;14 &lt;/span&gt;Obsolete features&lt;/h2&gt;
+  &lt;h2 id=obsolete&gt;&lt;span class=secno&gt;16 &lt;/span&gt;Obsolete features&lt;/h2&gt;
 
-  &lt;h3 id=obsolete-but-conforming-features&gt;&lt;span class=secno&gt;14.1 &lt;/span&gt;Obsolete but conforming features&lt;/h3&gt;
+  &lt;h3 id=obsolete-but-conforming-features&gt;&lt;span class=secno&gt;16.1 &lt;/span&gt;Obsolete but conforming features&lt;/h3&gt;
 
   &lt;p&gt;Features listed in this section will trigger warnings in
   conformance checkers.&lt;/p&gt;
@@ -90855,7 +95435,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=warnings-for-obsolete-but-conforming-features&gt;&lt;span class=secno&gt;14.1.1 &lt;/span&gt;Warnings for obsolete but conforming features&lt;/h4&gt;
+  &lt;h4 id=warnings-for-obsolete-but-conforming-features&gt;&lt;span class=secno&gt;16.1.1 &lt;/span&gt;Warnings for obsolete but conforming features&lt;/h4&gt;
 
   &lt;p&gt;To ease the transition from HTML4 Transitional documents to the
   language defined in &lt;em&gt;this&lt;/em&gt; specification, and to discourage
@@ -90903,7 +95483,7 @@
   &lt;/div&gt;
 
 
-  &lt;h3 id=non-conforming-features&gt;&lt;span class=secno&gt;14.2 &lt;/span&gt;Non-conforming features&lt;/h3&gt;
+  &lt;h3 id=non-conforming-features&gt;&lt;span class=secno&gt;16.2 &lt;/span&gt;Non-conforming features&lt;/h3&gt;
 
   &lt;p&gt;Elements in the following list are entirely obsolete, and must
   not be used by authors:&lt;/p&gt;
@@ -91195,9 +95775,9 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=requirements-for-implementations&gt;&lt;span class=secno&gt;14.3 &lt;/span&gt;Requirements for implementations&lt;/h3&gt;
+  &lt;h3 id=requirements-for-implementations&gt;&lt;span class=secno&gt;16.3 &lt;/span&gt;Requirements for implementations&lt;/h3&gt;
 
-  &lt;h4 id=the-applet-element&gt;&lt;span class=secno&gt;14.3.1 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;applet&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-applet-element&gt;&lt;span class=secno&gt;16.3.1 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;applet&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-applet-element&gt;applet&lt;/a&gt;&lt;/code&gt; element is a Java-specific variant of the
   &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element. The &lt;code&gt;&lt;a href=#the-applet-element&gt;applet&lt;/a&gt;&lt;/code&gt; element is now
@@ -91277,7 +95857,7 @@
   &lt;a href=#url&gt;URL&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=the-marquee-element&gt;&lt;span class=secno&gt;14.3.2 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;marquee&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-marquee-element&gt;&lt;span class=secno&gt;16.3.2 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;marquee&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-marquee-element&gt;marquee&lt;/a&gt;&lt;/code&gt; element is a presentational element that
   animates content. CSS transitions and animations are a more
@@ -91454,7 +96034,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h4 id=frames&gt;&lt;span class=secno&gt;14.3.3 &lt;/span&gt;Frames&lt;/h4&gt;
+  &lt;h4 id=frames&gt;&lt;span class=secno&gt;16.3.3 &lt;/span&gt;Frames&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=frameset&gt;&lt;code&gt;frameset&lt;/code&gt;&lt;/dfn&gt; element acts as &lt;a href=#the-body-element-0&gt;the
   body element&lt;/a&gt; in documents that use frames.&lt;/p&gt;
@@ -91630,7 +96210,7 @@
 
 
 
-  &lt;h4 id=other-elements,-attributes-and-apis&gt;&lt;span class=secno&gt;14.3.4 &lt;/span&gt;Other elements, attributes and APIs&lt;/h4&gt; &lt;!-- alphabetical by name and attribute --&gt;
+  &lt;h4 id=other-elements,-attributes-and-apis&gt;&lt;span class=secno&gt;16.3.4 &lt;/span&gt;Other elements, attributes and APIs&lt;/h4&gt; &lt;!-- alphabetical by name and attribute --&gt;
 
   &lt;p&gt;User agents must treat &lt;code&gt;&lt;a href=#acronym&gt;acronym&lt;/a&gt;&lt;/code&gt; elements in a manner
   equivalent to &lt;code&gt;&lt;a href=#the-abbr-element&gt;abbr&lt;/a&gt;&lt;/code&gt; elements in terms of semantics and
@@ -92323,13 +96903,13 @@
 
 
 
-  &lt;h2 id=iana&gt;&lt;span class=secno&gt;15 &lt;/span&gt;IANA considerations&lt;/h2&gt;
+  &lt;h2 id=iana&gt;&lt;span class=secno&gt;17 &lt;/span&gt;IANA considerations&lt;/h2&gt;
 
   &lt;!-- <A HREF="http://www.w3.org/2002/06/registering-mediatype.html">http://www.w3.org/2002/06/registering-mediatype.html</A> --&gt;
 
 
 
-  &lt;h3 id=text/html&gt;&lt;span class=secno&gt;15.1 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/html&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=text/html&gt;&lt;span class=secno&gt;17.1 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/html&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -92459,7 +97039,7 @@
   provide state information for in-page scripts.&lt;/p&gt;
 
 
-  &lt;h3 id=text/html-sandboxed&gt;&lt;span class=secno&gt;15.2 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/html-sandboxed&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=text/html-sandboxed&gt;&lt;span class=secno&gt;17.2 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/html-sandboxed&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -92542,7 +97122,7 @@
   scripts.&lt;/p&gt;
 
 
-  &lt;h3 id=multipart/x-mixed-replace&gt;&lt;span class=secno&gt;15.3 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;multipart/x-mixed-replace&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=multipart/x-mixed-replace&gt;&lt;span class=secno&gt;17.3 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;multipart/x-mixed-replace&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -92607,7 +97187,7 @@
   part as defined by the type used by that body part.&lt;/p&gt;
 
 
-  &lt;h3 id=application/xhtml+xml&gt;&lt;span class=secno&gt;15.4 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;application/xhtml+xml&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=application/xhtml+xml&gt;&lt;span class=secno&gt;17.4 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;application/xhtml+xml&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -92672,7 +97252,7 @@
   type&lt;/a&gt;. &lt;a href=#refsRFC3023&gt;[RFC3023]&lt;/a&gt;&lt;/p&gt;
 
 
-  &lt;h3 id=application/x-www-form-urlencoded&gt;&lt;span class=secno&gt;15.5 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=application/x-www-form-urlencoded&gt;&lt;span class=secno&gt;17.5 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -92739,7 +97319,7 @@
   identifiers.&lt;/p&gt;
 
 
-  &lt;h3 id=text/cache-manifest&gt;&lt;span class=secno&gt;15.6 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/cache-manifest&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=text/cache-manifest&gt;&lt;span class=secno&gt;17.6 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/cache-manifest&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -92810,7 +97390,7 @@
 
 
 &lt;!--PING--&gt;
-  &lt;h3 id=text/ping&gt;&lt;span class=secno&gt;15.7 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/ping&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=text/ping&gt;&lt;span class=secno&gt;17.7 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/ping&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -92875,7 +97455,7 @@
 
 &lt;!--TTVTT--&gt;
 &lt;div data-component=&quot;other Hixie drafts (editor: Ian Hickson)&quot;&gt;
-  &lt;h3 id=text/vtt&gt;&lt;span class=secno&gt;15.8 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/vtt&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=text/vtt&gt;&lt;span class=secno&gt;17.8 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/vtt&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -92956,7 +97536,7 @@
 
 &lt;!--MD--&gt;
 
-  &lt;h3 id=application/microdata+json&gt;&lt;span class=secno&gt;15.9 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;application/microdata+json&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=application/microdata+json&gt;&lt;span class=secno&gt;17.9 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;application/microdata+json&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
 
   &lt;p&gt;This registration is for community review and will be submitted
@@ -93028,7 +97608,7 @@
 
 
 &lt;!--PEERCONNECTION--&gt;
-  &lt;h3 id=application/html-peer-connection-data&gt;&lt;span class=secno&gt;15.10 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;application/html-peer-connection-data&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=application/html-peer-connection-data&gt;&lt;span class=secno&gt;17.10 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;application/html-peer-connection-data&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
   to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
@@ -93109,7 +97689,7 @@
 
 
 &lt;!--PING--&gt;
-  &lt;h3 id=ping-from&gt;&lt;span class=secno&gt;15.11 &lt;/span&gt;&lt;dfn title=http-ping-from&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=ping-from&gt;&lt;span class=secno&gt;17.11 &lt;/span&gt;&lt;dfn title=http-ping-from&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This section describes a header field for registration in the
   Permanent Message Header Field Registry.  &lt;a href=#refsRFC3864&gt;[RFC3864]&lt;/a&gt;&lt;/p&gt;
@@ -93128,7 +97708,7 @@
    &lt;/dd&gt;
    &lt;dt&gt;Related information&lt;/dt&gt;
    &lt;dd&gt;None.&lt;/dd&gt;
-  &lt;/dl&gt;&lt;h3 id=ping-to&gt;&lt;span class=secno&gt;15.12 &lt;/span&gt;&lt;dfn title=http-ping-to&gt;&lt;code&gt;Ping-To&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;/dl&gt;&lt;h3 id=ping-to&gt;&lt;span class=secno&gt;17.12 &lt;/span&gt;&lt;dfn title=http-ping-to&gt;&lt;code&gt;Ping-To&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This section describes a header field for registration in the
   Permanent Message Header Field Registry.  &lt;a href=#refsRFC3864&gt;[RFC3864]&lt;/a&gt;&lt;/p&gt;
@@ -93147,7 +97727,7 @@
    &lt;/dd&gt;
    &lt;dt&gt;Related information&lt;/dt&gt;
    &lt;dd&gt;None.&lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--PING--&gt;&lt;h3 id=web+-scheme-prefix&gt;&lt;span class=secno&gt;15.13 &lt;/span&gt;&lt;dfn title=scheme-web&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;/dl&gt;&lt;!--PING--&gt;&lt;h3 id=web+-scheme-prefix&gt;&lt;span class=secno&gt;17.13 &lt;/span&gt;&lt;dfn title=scheme-web&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This section describes a convention for use with the IANA URI
   scheme registry. It does not itself register a specific scheme. &lt;a href=#refsRFC4395&gt;[RFC4395]&lt;/a&gt;&lt;/p&gt;
@@ -93523,7 +98103,7 @@
      &lt;td&gt;Legend for corresponding &lt;code&gt;&lt;a href=#the-dd-element&gt;dd&lt;/a&gt;&lt;/code&gt; element(s)&lt;/td&gt;
      &lt;td&gt;none&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#the-dl-element&gt;dl&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
-     &lt;td&gt;&lt;a href=#phrasing-content title=&quot;Phrasing content&quot;&gt;phrasing&lt;/a&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
     &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-em-element&gt;em&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
@@ -94228,7 +98808,7 @@
      &lt;td&gt;Table header cell&lt;/td&gt;
      &lt;td&gt;none&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
-     &lt;td&gt;&lt;a href=#phrasing-content title=&quot;Phrasing content&quot;&gt;phrasing&lt;/a&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-tdth-colspan&gt;&lt;a href=#attr-tdth-colspan&gt;colspan&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-tdth-rowspan&gt;&lt;a href=#attr-tdth-rowspan&gt;rowspan&lt;/a&gt;&lt;/code&gt;;
@@ -95691,7 +100271,7 @@
 
     &lt;tr&gt;&lt;th id=ix-handler-window-onstorage&gt; &lt;code title=&quot;&quot;&gt;onstorage&lt;/code&gt;
      &lt;td&gt; &lt;code title=handler-window-onstorage&gt;&lt;a href=#handler-window-onstorage&gt;body&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code title=event-storage&gt;storage&lt;/code&gt; event handler for &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object
+     &lt;td&gt; &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event handler for &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object
      &lt;td&gt; &lt;a href=#event-handler-content-attributes title=&quot;event handler content attributes&quot;&gt;Event handler content attribute&lt;/a&gt;
 
     &lt;tr&gt;&lt;th id=ix-handler-onsubmit&gt; &lt;code title=&quot;&quot;&gt;onsubmit&lt;/code&gt;
@@ -96082,133 +100662,8 @@
     &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
 
-  &lt;/table&gt;&lt;!-- (only has events from HTML5) --&gt;&lt;h3 class=no-num id=events-0&gt;Events&lt;/h3&gt;
+  &lt;/table&gt;&lt;h2 class=no-num id=references&gt;References&lt;/h2&gt;&lt;!--REFS--&gt;
 
-  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
-
-  &lt;table&gt;&lt;caption&gt;List of events&lt;/caption&gt;
-   &lt;thead&gt;&lt;tr&gt;&lt;th&gt; Event
-     &lt;th&gt; Interface
-     &lt;th&gt; Description
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code title=event-DOMContentLoaded&gt;DOMContentLoaded&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; once it and its scripts have loaded, without waiting for other subresources
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-abort&gt;abort&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the download was aborted by the user
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-afterprint&gt;afterprint&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; after printing
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-beforeprint&gt;beforeprint&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; before printing
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-beforeunload&gt;beforeunload&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#beforeunloadevent&gt;BeforeUnloadEvent&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the page is about to be unloaded, in case the page would like to show a warning prompt
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-blur&gt;blur&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at nodes losing focus
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-change&gt;change&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at controls when the user commits a value change
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at an element before its &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; is run
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at elements when the user requests their context menu
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-DOMContentLoaded&gt;DOMContentLoaded&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; once the parser has finished
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at elements when network and script errors occur
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-focus&gt;focus&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at nodes gaining focus
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-hashchange&gt;&lt;a href=#event-hashchange&gt;hashchange&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#hashchangeevent&gt;HashChangeEvent&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the fragment identifier part of &lt;a href=&quot;#the-document's-current-address&quot;&gt;the document's current address&lt;/a&gt; changes
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-input&gt;input&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at controls when the user changes the value
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-invalid&gt;invalid&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at controls during form validation if they do not satisfy their constraints
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-load&gt;load&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the document has finished loading; fired at an element containing a resource (e.g. &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;) when its resource has finished loading
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at an object when the object receives a message
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-offline&gt;&lt;a href=#event-offline&gt;offline&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the network connections fails
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-online&gt;&lt;a href=#event-online&gt;online&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the network connections returns
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-pagehide&gt;&lt;a href=#event-pagehide&gt;pagehide&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#pagetransitionevent&gt;PageTransitionEvent&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the page's entry in the &lt;a href=#session-history&gt;session history&lt;/a&gt; stops being the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-pageshow&gt;&lt;a href=#event-pageshow&gt;pageshow&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#pagetransitionevent&gt;PageTransitionEvent&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the page's entry in the &lt;a href=#session-history&gt;session history&lt;/a&gt; becomes the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-popstate&gt;&lt;a href=#event-popstate&gt;popstate&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#popstateevent&gt;PopStateEvent&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; when the user navigates the &lt;a href=#session-history&gt;session history&lt;/a&gt;
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-readystatechange&gt;&lt;a href=#event-readystatechange&gt;readystatechange&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; when it finishes parsing and again when all its subresources have finished loading
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-reset&gt;reset&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at a &lt;code&gt;&lt;a href=#the-form-element&gt;form&lt;/a&gt;&lt;/code&gt; element when it is &lt;a href=#concept-form-reset title=concept-form-reset&gt;reset&lt;/a&gt;
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-show&gt;show&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element when it is shown as a context menu
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-submit&gt;submit&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at a &lt;code&gt;&lt;a href=#the-form-element&gt;form&lt;/a&gt;&lt;/code&gt; element when it is &lt;a href=#concept-form-submit title=concept-form-submit&gt;submitted&lt;/a&gt;
-
-    &lt;tr&gt;&lt;td&gt; &lt;code title=event-unload&gt;unload&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; Fired at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object when the page is going away
-
-  &lt;/table&gt;&lt;p class=note&gt;See also &lt;a href=#mediaevents&gt;media element
-  events&lt;/a&gt;, &lt;a href=#mediasteamevents&gt;&lt;code&gt;MediaStream&lt;/code&gt; and
-  &lt;code&gt;PeerConnection&lt;/code&gt; events&lt;/a&gt;, &lt;a href=#appcacheevents&gt;application cache events&lt;/a&gt;, and &lt;a href=#dndevents&gt;drag-and-drop events&lt;/a&gt;.&lt;/p&gt;
-
-
-
-
-
-
-  &lt;h2 class=no-num id=references&gt;References&lt;/h2&gt;&lt;!--REFS--&gt;
-
   &lt;p&gt;All references are normative unless marked &quot;Non-normative&quot;.&lt;/p&gt;
 
   &lt;!-- Dates are only included for standards older than the Web, because the newer ones keep changing. --&gt;
@@ -96393,14 +100848,6 @@
    &lt;dt id=refsEUCJP&gt;[EUCJP]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;Definition and Notes of Japanese EUC&lt;/cite&gt;. UI-OSF-USLP. In English in the abridged translation of the &lt;a href=<A HREF="http://home.m05.itscom.net/numa/uocjleE.pdf">http://home.m05.itscom.net/numa/uocjleE.pdf</A>&gt;UI-OSF Application Platform Profile for Japanese Environment&lt;/a&gt;, Appendix C.&lt;/dd&gt;
 
-   &lt;dt id=refsEVENTSOURCE&gt;[EVENTSOURCE]&lt;/dt&gt;
-   &lt;!--
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://www.w3.org/TR/eventsource/">http://www.w3.org/TR/eventsource/</A>&quot;&gt;Server-Sent
-   Events&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-   --&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/eventsource/">http://dev.w3.org/html5/eventsource/</A>&gt;Server-Sent
-   Events&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-
    &lt;dt id=refsFILEAPI&gt;[FILEAPI]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/2006/webapi/FileUpload/publish/FileAPI.html">http://dev.w3.org/2006/webapi/FileUpload/publish/FileAPI.html</A>&gt;File
    API&lt;/a&gt;&lt;/cite&gt;, A. Ranganathan. W3C.&lt;/dd&gt;
@@ -96830,27 +101277,6 @@
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc5988">http://tools.ietf.org/html/rfc5988</A>&gt;Web
    Linking&lt;/a&gt;&lt;/cite&gt;, M. Nottingham. IETF.&lt;/dd&gt;
 
-   &lt;dt id=refsWEBSOCKET&gt;[WEBSOCKET]&lt;/dt&gt;
-   &lt;!--
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://www.w3.org/TR/websockets/">http://www.w3.org/TR/websockets/</A>&quot;&gt;The WebSocket
-   API&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-   --&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/websockets/">http://dev.w3.org/html5/websockets/</A>&gt;The WebSocket
-   API&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-
-   &lt;dt id=refsWEBSTORAGE&gt;[WEBSTORAGE]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/webstorage/">http://dev.w3.org/html5/webstorage/</A>&gt;Web
-   Storage&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-
-   &lt;dt id=refsWEBWORKERS&gt;[WEBWORKERS]&lt;/dt&gt;
-   &lt;!--
-   &lt;dd&gt;&lt;cite&gt;&lt;a
-   href=&quot;<A HREF="http://www.w3.org/TR/webworkers/">http://www.w3.org/TR/webworkers/</A>&quot;&gt;Workers&lt;/a&gt;&lt;/cite&gt;,
-   I. Hickson. W3C.&lt;/dd&gt;
-   --&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/workers/">http://dev.w3.org/html5/workers/</A>&gt;Web
-   Workers&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-
    &lt;dt id=refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://wiki.whatwg.org/">http://wiki.whatwg.org/</A>&gt;The WHATWG Wiki&lt;/a&gt;&lt;/cite&gt;. WHATWG.&lt;/dd&gt;
 
@@ -96869,6 +101295,10 @@
    &lt;dt id=refsWIN949&gt;[WIN949]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP949.TXT">http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP949.TXT</A>&gt;Windows Codepage 949&lt;/a&gt;&lt;/cite&gt;. Microsoft.&lt;/dd&gt;
 
+   &lt;dt id=refsWSP&gt;[WSP]&lt;/dt&gt;
+   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol">http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol</A>&gt;The
+   WebSocket protocol&lt;/a&gt;&lt;/cite&gt;, I. Fette. IETF.&lt;/dd&gt;
+
    &lt;dt id=refsX121&gt;[X121]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;Recommendation X.121 &mdash; International Numbering Plan for
    Public Data Networks&lt;/cite&gt;, CCITT Blue Book, Fascicle VIII.3,
@@ -96915,8 +101345,6 @@
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;&lt;/cite&gt;, . .&lt;/dd&gt;
 --&gt;
 
-
-
   &lt;/dl&gt;&lt;h2 class=no-num id=acknowledgements&gt;Acknowledgements&lt;/h2&gt; &lt;!-- ACKS --&gt;
 
   &lt;p&gt;Thanks to Tim Berners-Lee for inventing HTML, without which none
@@ -97539,7 +101967,16 @@
   &lt;p&gt;Thanks to the many sources that provided inspiration for the
   examples used in the specification.&lt;/p&gt;
 
+  
 
+  &lt;div itemscope=&quot;&quot; itemtype=<A HREF="http://n.whatwg.org/work">http://n.whatwg.org/work</A>&gt;
+   &lt;p&gt;The abstract is based on &lt;a href=<A HREF="http://www.flickr.com/photos/wonderlane/2986252088/">http://www.flickr.com/photos/wonderlane/2986252088/</A> itemprop=work&gt;a photo&lt;/a&gt;
+   by &lt;a href=<A HREF="http://www.flickr.com/photos/wonderlane/">http://www.flickr.com/photos/wonderlane/</A> itemprop=<A HREF="http://creativecommons.org/ns#attributionURL">http://creativecommons.org/ns#attributionURL</A>&gt;Wonderlane&lt;/a&gt;.
+   (&lt;a href=<A HREF="http://creativecommons.org/licenses/by/2.0/">http://creativecommons.org/licenses/by/2.0/</A> itemprop=license&gt;CC BY 2.0&lt;/a&gt;)
+  &lt;/div&gt;
+
+  
+
   &lt;p&gt;Thanks also to the Microsoft blogging community for some ideas,
   to the attendees of the W3C Workshop on Web Applications and
   Compound Documents for inspiration, to the #mrt crew, the #mrt.no

Modified: source
===================================================================
--- source	2011-10-04 15:43:21 UTC (rev 6618)
+++ source	2011-10-04 16:57:57 UTC (rev 6619)
@@ -72,7 +72,7 @@
   &lt;p&gt;The WHATWG work is all published in one specification
 
 &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-  (known as &quot;&lt;a href=&quot;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete/">http://www.whatwg.org/specs/web-apps/current-work/complete/</A>&quot;&gt;Web Applications 1.0&lt;/a&gt;&quot;),
+  (known as &quot;&lt;a href=&quot;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/">http://www.whatwg.org/specs/web-apps/current-work/multipage/</A>&quot;&gt;HTML&lt;/a&gt;&quot;),
 &lt;!--END html--&gt;&lt;!--END dev-html--&gt;
 &lt;!--START complete--&gt;&lt;!--START epub--&gt;
   (the one you are reading right now),
@@ -82,19 +82,19 @@
   including an edition optimized for Web developers
 
 &lt;!--END complete--&gt;&lt;!--END epub--&gt;&lt;!--END html--&gt;
-  (which you are reading right now),
+  (which you are reading right now).
 &lt;!--END dev-html--&gt;
 &lt;!--START complete--&gt;&lt;!--START epub--&gt;&lt;!--START html--&gt;
-  (known as &lt;a href=&quot;<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&quot;&gt;HTML5&lt;/a&gt;),
+  (known as &lt;a href=&quot;<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&quot;&gt;HTML5&lt;/a&gt;).
 &lt;!--START dev-html--&gt;
 
-  and one which focuses mainly on the core HTML language
+  &lt;!-- and one which focuses mainly on the core HTML language --&gt;
 
 &lt;!--END complete--&gt;&lt;!--END epub--&gt;&lt;!--END dev-html--&gt;
-  (which you are reading right now).
+  &lt;!-- (which you are reading right now). --&gt;
 &lt;!--END html--&gt;
 &lt;!--START complete--&gt;&lt;!--START epub--&gt;&lt;!--START dev-html--&gt;
-  (known as the &lt;a href=&quot;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/">http://www.whatwg.org/specs/web-apps/current-work/multipage/</A>&quot;&gt;HTML Living Standard&lt;/a&gt;).
+  &lt;!-- (known as the &lt;a href=&quot;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/">http://www.whatwg.org/specs/web-apps/current-work/multipage/</A>&quot;&gt;HTML Living Standard&lt;/a&gt;). --&gt;
 &lt;!--START html--&gt;
 
   In addition, two subparts of the specification are republished as
@@ -110,11 +110,14 @@
 &lt;!--END complete--&gt;&lt;!--END epub--&gt;&lt;!--END dev-html--&gt;
   this specification (the HTML Living Standard).
 &lt;!--END html--&gt;
-&lt;!--START complete--&gt;&lt;!--START epub--&gt;&lt;!--START dev-html--&gt;
+&lt;!--START complete--&gt;&lt;!--START epub--&gt;
+  this specification (the HTML Living Standard).
+&lt;!--END complete--&gt;&lt;!--END epub--&gt;
+&lt;!--START dev-html--&gt;
   the &lt;a
   href=&quot;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/multipage/">http://www.whatwg.org/specs/web-apps/current-work/multipage/</A>&quot;&gt;HTML
   Living Standard&lt;/a&gt;.
-&lt;!--START html--&gt;
+&lt;!--START html--&gt;&lt;!--START complete--&gt;&lt;!--START epub--&gt;
 
   &lt;/p&gt;
 
@@ -132,6 +135,7 @@
   a whole reach a more mature state.&lt;/p&gt;
 --&gt;
 
+
   &lt;h6 class=&quot;no-toc&quot;&gt;How do the WHATWG and W3C specifications differ?&lt;/h6&gt;
 
   &lt;p&gt;The features present in both the WHATWG and W3C specifications
@@ -471,8 +475,8 @@
 &lt;!--START complete--&gt;&lt;!--START epub--&gt;&lt;!--START html--&gt;&lt;!--START dev-html--&gt;&lt;!--w3c-html--&gt;&lt;!--VERSION--&gt;
 
   &lt;p&gt;A separate document has been published by the W3C HTML working
-  group to document the differences between this specification and the
-  language described in the HTML4 specification. &lt;a
+  group to document the differences between the HTML specified in this
+  document and the language described in the HTML4 specification. &lt;a
   href=&quot;#refsHTMLDIFF&quot;&gt;[HTMLDIFF]&lt;/a&gt;&lt;/p&gt;
 
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013485.html">[html5] r6618 - [ac] (0) Allow basic flow content in &lt;td&gt; and &lt;th&gt;.	(bugs 13174 and 13201)
</A></li>
	<LI>Next message: <A HREF="013487.html">[html5] r6620 - [e] (0) fix links
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13486">[ date ]</a>
              <a href="thread.html#13486">[ thread ]</a>
              <a href="subject.html#13486">[ subject ]</a>
              <a href="author.html#13486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
