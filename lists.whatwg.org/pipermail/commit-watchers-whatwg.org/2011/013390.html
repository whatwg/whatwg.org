<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r6523 - [giow] (1) registerProtocolHandler() and	registerContentHandler() security updates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6523%20-%20%5Bgiow%5D%20%281%29%20registerProtocolHandler%28%29%20and%0A%09registerContentHandler%28%29%20security%20updates&In-Reply-To=%3C20110823232719.4EDD411C7C05F%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013389.html">
   <LINK REL="Next"  HREF="013391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r6523 - [giow] (1) registerProtocolHandler() and	registerContentHandler() security updates</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6523%20-%20%5Bgiow%5D%20%281%29%20registerProtocolHandler%28%29%20and%0A%09registerContentHandler%28%29%20security%20updates&In-Reply-To=%3C20110823232719.4EDD411C7C05F%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r6523 - [giow] (1) registerProtocolHandler() and	registerContentHandler() security updates">whatwg at whatwg.org
       </A><BR>
    <I>Tue Aug 23 16:27:19 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013389.html">[html5] r6522 - [e] (0) it's good form to use a label Fixing	http://www.w3.org/Bugs/Public/show_ [...]
</A></li>
        <LI>Next message: <A HREF="013391.html">[html5] r6524 - [giow] (0) Add an API to unregister a handler and	an API to check if a handler i [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13390">[ date ]</a>
              <a href="thread.html#13390">[ thread ]</a>
              <a href="subject.html#13390">[ subject ]</a>
              <a href="author.html#13390">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2011-08-23 16:27:17 -0700 (Tue, 23 Aug 2011)
New Revision: 6523

Modified:
   complete.html
   index
   source
Log:
[giow] (1) registerProtocolHandler() and registerContentHandler() security updates

Modified: complete.html
===================================================================
--- complete.html	2011-08-23 00:08:33 UTC (rev 6522)
+++ complete.html	2011-08-23 23:27:17 UTC (rev 6523)
@@ -1358,7 +1358,8 @@
    &lt;li&gt;&lt;a href=#application/microdata+json&gt;&lt;span class=secno&gt;17.8 &lt;/span&gt;&lt;code&gt;application/microdata+json&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#application/html-peer-connection-data&gt;&lt;span class=secno&gt;17.9 &lt;/span&gt;&lt;code&gt;application/html-peer-connection-data&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#ping-from&gt;&lt;span class=secno&gt;17.10 &lt;/span&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#ping-to&gt;&lt;span class=secno&gt;17.11 &lt;/span&gt;&lt;code&gt;Ping-To&lt;/code&gt;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#ping-to&gt;&lt;span class=secno&gt;17.11 &lt;/span&gt;&lt;code&gt;Ping-To&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#web+-scheme-prefix&gt;&lt;span class=secno&gt;17.12 &lt;/span&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a class=no-num href=#index&gt;Index&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a class=no-num href=#elements-1&gt;Elements&lt;/a&gt;&lt;/li&gt;
@@ -70485,7 +70486,11 @@
   the user is not repeatedly prompted with the same request.&lt;/p&gt;
 
   &lt;p&gt;The arguments to the methods have the following meanings and
-  corresponding implementation requirements:&lt;/p&gt;
+  corresponding implementation requirements. The requirements that
+  involve throwing exceptions must be processed in the order given
+  below, stopping at the first exception raised. (So the
+  &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exceptions take precedence over the
+  &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception.)&lt;/p&gt;
 
   &lt;dl&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; (&lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a href=#dom-navigator-registerprotocolhandler&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt; only)&lt;/dt&gt;
 
@@ -70501,9 +70506,30 @@
     (as in &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since
     schemes don't contain colons.&lt;/p&gt;
 
-    &lt;p class=note&gt;This feature is not intended to be used with
-    non-standard protocols.&lt;/p&gt;
+    &lt;p&gt;If the &lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a href=#dom-navigator-registerprotocolhandler&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
+    method is invoked with a scheme that is neither a
+    &lt;a href=#whitelisted-scheme&gt;whitelisted scheme&lt;/a&gt; nor a scheme whose value starts
+    with the substring &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; and otherwise
+    contains only characters in the range U+0061 LATIN SMALL LETTER A
+    to U+007A LATIN SMALL LETTER Z, the user agent must raise
+    &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
 
+    &lt;p&gt;The following schemes are the &lt;dfn id=whitelisted-scheme title=&quot;whitelisted
+    scheme&quot;&gt;whitelisted schemes&lt;/dfn&gt;:&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;&lt;code title=&quot;&quot;&gt;irc&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;mailto&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;mms&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;news&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;nntp&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;sms&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;smsto&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;tel&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;urn&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;webcal&lt;/code&gt;&lt;/li&gt;
+    &lt;/ul&gt;&lt;p class=note&gt;This list can be changed. If there are schemes
+    that should be added, please send feedback.&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; (&lt;code title=dom-navigator-registerContentHandler&gt;&lt;a href=#dom-navigator-registercontenthandler&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; only)&lt;/dt&gt;
@@ -70529,6 +70555,31 @@
     used by the user agent &lt;em&gt;after&lt;/em&gt; the sniffing algorithms have
     been applied.&lt;/p&gt;
 
+    &lt;p&gt;If the &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a href=#dom-navigator-registercontenthandler&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt;
+    method is invoked with a &lt;a href=#mime-type&gt;MIME type&lt;/a&gt; that is in the
+    &lt;a href=#type-blacklist&gt;type blacklist&lt;/a&gt; or that the user agent has deemed a
+    privileged type, the user agent must raise
+    &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+
+    &lt;p&gt;The following &lt;a href=#mime-type title=&quot;MIME type&quot;&gt;MIME types&lt;/a&gt; are in
+    the &lt;dfn id=type-blacklist&gt;type blacklist&lt;/dfn&gt;:&lt;/p&gt;
+
+    &lt;ul title=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#text/cache-manifest&gt;text/cache-manifest&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/css&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#text/ping&gt;text/ping&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/plain&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#application/x-www-form-urlencoded&gt;application/x-www-form-urlencoded&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/gif&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/jpeg&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/png&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;All &lt;a href=#xml-mime-type title=&quot;XML MIME type&quot;&gt;XML MIME types&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;All types that the user agent supports displaying natively in a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt;&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;p class=note&gt;This list can be changed. If there are schemes
+    that should be added, please send feedback.&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -70557,6 +70608,14 @@
     &lt;query&gt; production defined in RFC 3986 by the
     percent-encoded form of that character. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;User agents must raise a &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception if
+    the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument passed to one of these
+    methods does not contain the exact literal string
+    &quot;&lt;code&gt;%s&lt;/code&gt;&quot;, or if &lt;a href=#resolve-a-url title=&quot;resolve a
+    url&quot;&gt;resolving&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument with
+    the first occurrence of the string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot;
+    removed, relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, is not successful.&lt;/p&gt;
+
     &lt;div class=example&gt;
 
      &lt;p&gt;If the user had visited a site at &lt;code title=&quot;&quot;&gt;<A HREF="http://example.com/&lt;/code">http://example.com/&lt;/code</A>&gt; that made the following
@@ -70593,24 +70652,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;User agents should raise &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exceptions if
-  the methods are called with &lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values that the UA deems to be
-  &quot;privileged&quot;. For example, a site attempting to register a handler
-  for &lt;code&gt;http&lt;/code&gt; URLs or &lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt; content in a
-  Web browser would likely cause an exception to be raised.&lt;/p&gt;
-
-  &lt;p&gt;User agents must raise a &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception if the
-  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument passed to one of these methods does
-  not contain the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot;, or if &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
-  argument with the first occurrence of the string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot; removed, relative to the &lt;a href=#entry-script&gt;entry
-  script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, is
-  not successful.&lt;/p&gt;
-
-  &lt;p&gt;User agents must not raise any other exceptions (other than
-  binding-specific exceptions, such as for an incorrect number of
-  arguments in an JavaScript implementation).&lt;/p&gt;
-
-  &lt;p&gt;This section does not define how the pages registered by these
+  &lt;/dl&gt;&lt;p&gt;This section does not define how the pages registered by these
   methods are used, beyond the requirements on how to process the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; value (see above). To some extent, the &lt;a href=#navigate title=navigate&gt;processing model for navigating across
   documents&lt;/a&gt; defines some cases where these methods are
   relevant, but in general UAs may use this information wherever they
@@ -98304,8 +98346,45 @@
    &lt;/dd&gt;
    &lt;dt&gt;Related information&lt;/dt&gt;
    &lt;dd&gt;None.&lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--PING--&gt;&lt;h2 class=no-num id=index&gt;Index&lt;/h2&gt;
+  &lt;/dl&gt;&lt;!--PING--&gt;&lt;h3 id=web+-scheme-prefix&gt;&lt;span class=secno&gt;17.12 &lt;/span&gt;&lt;dfn title=scheme-web&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/dfn&gt;&lt;/h3&gt;
 
+  &lt;p&gt;This section describes a convention for use with the IANA URI
+  scheme registry. It does not itself register a specific scheme. &lt;a href=#refsRFC4395&gt;[RFC4395]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;URI scheme name&lt;/dt&gt;
+   &lt;dd&gt;
+    Schemes starting with the four characters &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; followed by one or more letters in the range
+    &lt;code title=&quot;&quot;&gt;a&lt;/code&gt;-&lt;code title=&quot;&quot;&gt;z&lt;/code&gt;.
+   &lt;/dd&gt;
+   &lt;dt&gt;Status&lt;/dt&gt;
+   &lt;dd&gt;permanent&lt;/dd&gt;
+   &lt;dt&gt;URI scheme syntax&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;URI scheme semantics&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;Encoding considerations&lt;/dt&gt;
+   &lt;dd&gt;All &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; schemes should use UTF-8 encodings were relevant.&lt;/dd&gt;
+   &lt;dt&gt;Applications/protocols that use this URI scheme name&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;Interoperability considerations&lt;/dt&gt;
+   &lt;dd&gt;The scheme is expected to be used in the context of Web applications.&lt;/dd&gt;
+   &lt;dt&gt;Security considerations&lt;/dt&gt;
+   &lt;dd&gt;
+    Any Web page is able to register a handler for all &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; schemes. As such, these schemes must not be
+    used for features intended to be core platform features (e.g.
+    network transfer protocols like HTTP or FTP). Similarly, such
+    schemes must not store confidential information in their URLs,
+    such as usernames, passwords, personal information, or
+    confidential project names.
+   &lt;/dd&gt;
+   &lt;dt&gt;Contact&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;Author/Change controller&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;References&lt;/dt&gt;
+   &lt;dd&gt;W3C&lt;/dd&gt;
+  &lt;/dl&gt;&lt;h2 class=no-num id=index&gt;Index&lt;/h2&gt;
+
   &lt;div class=impl&gt;
 
   &lt;p&gt;The following sections only cover conforming elements and features.&lt;/p&gt;
@@ -101734,6 +101813,9 @@
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc4329">http://tools.ietf.org/html/rfc4329</A>&gt;Scripting Media
    Types&lt;/a&gt;&lt;/cite&gt;, B. H&ouml;hrmann. IETF.&lt;/dd&gt;
 
+   &lt;dt id=refsRFC4395&gt;[RFC4395]&lt;/dt&gt;
+   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc4395">http://tools.ietf.org/html/rfc4395</A>&gt;Guidelines and Registration Procedures for New URI Schemes&lt;/a&gt;&lt;/cite&gt;, T. Hansen, T. Hardie, L. Masinter. IETF.&lt;/dd&gt;
+
    &lt;dt id=refsRFC4648&gt;[RFC4648]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc4648">http://tools.ietf.org/html/rfc4648</A>&gt;The Base16,
    Base32, and Base64 Data Encodings&lt;/a&gt;&lt;/cite&gt;, S. Josefsson.
@@ -102187,6 +102269,7 @@
   James Craig,
   James Graham,
   James Justin Harrell,
+  James Kozianski,
   James M Snell,
   James Perrett,
   James Robinson,
@@ -102492,6 +102575,7 @@
   Wayne Pollock,
   Wellington Fernando de Macedo,
   Weston Ruter,
+  Wilhelm Joys Andersen,
   Will Levine,
   William Swanson,
   Wladimir Palant,

Modified: index
===================================================================
--- index	2011-08-23 00:08:33 UTC (rev 6522)
+++ index	2011-08-23 23:27:17 UTC (rev 6523)
@@ -1271,7 +1271,8 @@
    &lt;li&gt;&lt;a href=#application/microdata+json&gt;&lt;span class=secno&gt;15.8 &lt;/span&gt;&lt;code&gt;application/microdata+json&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#application/html-peer-connection-data&gt;&lt;span class=secno&gt;15.9 &lt;/span&gt;&lt;code&gt;application/html-peer-connection-data&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#ping-from&gt;&lt;span class=secno&gt;15.10 &lt;/span&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#ping-to&gt;&lt;span class=secno&gt;15.11 &lt;/span&gt;&lt;code&gt;Ping-To&lt;/code&gt;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#ping-to&gt;&lt;span class=secno&gt;15.11 &lt;/span&gt;&lt;code&gt;Ping-To&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#web+-scheme-prefix&gt;&lt;span class=secno&gt;15.12 &lt;/span&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a class=no-num href=#index&gt;Index&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a class=no-num href=#elements-1&gt;Elements&lt;/a&gt;&lt;/li&gt;
@@ -70375,7 +70376,11 @@
   the user is not repeatedly prompted with the same request.&lt;/p&gt;
 
   &lt;p&gt;The arguments to the methods have the following meanings and
-  corresponding implementation requirements:&lt;/p&gt;
+  corresponding implementation requirements. The requirements that
+  involve throwing exceptions must be processed in the order given
+  below, stopping at the first exception raised. (So the
+  &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exceptions take precedence over the
+  &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception.)&lt;/p&gt;
 
   &lt;dl&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; (&lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a href=#dom-navigator-registerprotocolhandler&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt; only)&lt;/dt&gt;
 
@@ -70391,9 +70396,30 @@
     (as in &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since
     schemes don't contain colons.&lt;/p&gt;
 
-    &lt;p class=note&gt;This feature is not intended to be used with
-    non-standard protocols.&lt;/p&gt;
+    &lt;p&gt;If the &lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a href=#dom-navigator-registerprotocolhandler&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
+    method is invoked with a scheme that is neither a
+    &lt;a href=#whitelisted-scheme&gt;whitelisted scheme&lt;/a&gt; nor a scheme whose value starts
+    with the substring &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; and otherwise
+    contains only characters in the range U+0061 LATIN SMALL LETTER A
+    to U+007A LATIN SMALL LETTER Z, the user agent must raise
+    &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
 
+    &lt;p&gt;The following schemes are the &lt;dfn id=whitelisted-scheme title=&quot;whitelisted
+    scheme&quot;&gt;whitelisted schemes&lt;/dfn&gt;:&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;&lt;code title=&quot;&quot;&gt;irc&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;mailto&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;mms&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;news&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;nntp&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;sms&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;smsto&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;tel&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;urn&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;webcal&lt;/code&gt;&lt;/li&gt;
+    &lt;/ul&gt;&lt;p class=note&gt;This list can be changed. If there are schemes
+    that should be added, please send feedback.&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; (&lt;code title=dom-navigator-registerContentHandler&gt;&lt;a href=#dom-navigator-registercontenthandler&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; only)&lt;/dt&gt;
@@ -70419,6 +70445,31 @@
     used by the user agent &lt;em&gt;after&lt;/em&gt; the sniffing algorithms have
     been applied.&lt;/p&gt;
 
+    &lt;p&gt;If the &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a href=#dom-navigator-registercontenthandler&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt;
+    method is invoked with a &lt;a href=#mime-type&gt;MIME type&lt;/a&gt; that is in the
+    &lt;a href=#type-blacklist&gt;type blacklist&lt;/a&gt; or that the user agent has deemed a
+    privileged type, the user agent must raise
+    &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+
+    &lt;p&gt;The following &lt;a href=#mime-type title=&quot;MIME type&quot;&gt;MIME types&lt;/a&gt; are in
+    the &lt;dfn id=type-blacklist&gt;type blacklist&lt;/dfn&gt;:&lt;/p&gt;
+
+    &lt;ul title=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#text/cache-manifest&gt;text/cache-manifest&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/css&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#text/html-sandboxed&gt;text/html-sandboxed&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#text/ping&gt;text/ping&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/plain&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#application/x-www-form-urlencoded&gt;application/x-www-form-urlencoded&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/gif&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/jpeg&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/png&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;All &lt;a href=#xml-mime-type title=&quot;XML MIME type&quot;&gt;XML MIME types&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;All types that the user agent supports displaying natively in a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; during &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt;&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;p class=note&gt;This list can be changed. If there are schemes
+    that should be added, please send feedback.&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -70447,6 +70498,14 @@
     &lt;query&gt; production defined in RFC 3986 by the
     percent-encoded form of that character. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;User agents must raise a &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception if
+    the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument passed to one of these
+    methods does not contain the exact literal string
+    &quot;&lt;code&gt;%s&lt;/code&gt;&quot;, or if &lt;a href=#resolve-a-url title=&quot;resolve a
+    url&quot;&gt;resolving&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument with
+    the first occurrence of the string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot;
+    removed, relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, is not successful.&lt;/p&gt;
+
     &lt;div class=example&gt;
 
      &lt;p&gt;If the user had visited a site at &lt;code title=&quot;&quot;&gt;<A HREF="http://example.com/&lt;/code">http://example.com/&lt;/code</A>&gt; that made the following
@@ -70483,24 +70542,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;User agents should raise &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exceptions if
-  the methods are called with &lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values that the UA deems to be
-  &quot;privileged&quot;. For example, a site attempting to register a handler
-  for &lt;code&gt;http&lt;/code&gt; URLs or &lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt; content in a
-  Web browser would likely cause an exception to be raised.&lt;/p&gt;
-
-  &lt;p&gt;User agents must raise a &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception if the
-  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument passed to one of these methods does
-  not contain the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot;, or if &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
-  argument with the first occurrence of the string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot; removed, relative to the &lt;a href=#entry-script&gt;entry
-  script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, is
-  not successful.&lt;/p&gt;
-
-  &lt;p&gt;User agents must not raise any other exceptions (other than
-  binding-specific exceptions, such as for an incorrect number of
-  arguments in an JavaScript implementation).&lt;/p&gt;
-
-  &lt;p&gt;This section does not define how the pages registered by these
+  &lt;/dl&gt;&lt;p&gt;This section does not define how the pages registered by these
   methods are used, beyond the requirements on how to process the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; value (see above). To some extent, the &lt;a href=#navigate title=navigate&gt;processing model for navigating across
   documents&lt;/a&gt; defines some cases where these methods are
   relevant, but in general UAs may use this information wherever they
@@ -93751,8 +93793,45 @@
    &lt;/dd&gt;
    &lt;dt&gt;Related information&lt;/dt&gt;
    &lt;dd&gt;None.&lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--PING--&gt;&lt;h2 class=no-num id=index&gt;Index&lt;/h2&gt;
+  &lt;/dl&gt;&lt;!--PING--&gt;&lt;h3 id=web+-scheme-prefix&gt;&lt;span class=secno&gt;15.12 &lt;/span&gt;&lt;dfn title=scheme-web&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/dfn&gt;&lt;/h3&gt;
 
+  &lt;p&gt;This section describes a convention for use with the IANA URI
+  scheme registry. It does not itself register a specific scheme. &lt;a href=#refsRFC4395&gt;[RFC4395]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;URI scheme name&lt;/dt&gt;
+   &lt;dd&gt;
+    Schemes starting with the four characters &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; followed by one or more letters in the range
+    &lt;code title=&quot;&quot;&gt;a&lt;/code&gt;-&lt;code title=&quot;&quot;&gt;z&lt;/code&gt;.
+   &lt;/dd&gt;
+   &lt;dt&gt;Status&lt;/dt&gt;
+   &lt;dd&gt;permanent&lt;/dd&gt;
+   &lt;dt&gt;URI scheme syntax&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;URI scheme semantics&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;Encoding considerations&lt;/dt&gt;
+   &lt;dd&gt;All &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; schemes should use UTF-8 encodings were relevant.&lt;/dd&gt;
+   &lt;dt&gt;Applications/protocols that use this URI scheme name&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;Interoperability considerations&lt;/dt&gt;
+   &lt;dd&gt;The scheme is expected to be used in the context of Web applications.&lt;/dd&gt;
+   &lt;dt&gt;Security considerations&lt;/dt&gt;
+   &lt;dd&gt;
+    Any Web page is able to register a handler for all &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; schemes. As such, these schemes must not be
+    used for features intended to be core platform features (e.g.
+    network transfer protocols like HTTP or FTP). Similarly, such
+    schemes must not store confidential information in their URLs,
+    such as usernames, passwords, personal information, or
+    confidential project names.
+   &lt;/dd&gt;
+   &lt;dt&gt;Contact&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;Author/Change controller&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;References&lt;/dt&gt;
+   &lt;dd&gt;W3C&lt;/dd&gt;
+  &lt;/dl&gt;&lt;h2 class=no-num id=index&gt;Index&lt;/h2&gt;
+
   &lt;div class=impl&gt;
 
   &lt;p&gt;The following sections only cover conforming elements and features.&lt;/p&gt;
@@ -97326,6 +97405,9 @@
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc4329">http://tools.ietf.org/html/rfc4329</A>&gt;Scripting Media
    Types&lt;/a&gt;&lt;/cite&gt;, B. H&ouml;hrmann. IETF.&lt;/dd&gt;
 
+   &lt;dt id=refsRFC4395&gt;[RFC4395]&lt;/dt&gt;
+   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc4395">http://tools.ietf.org/html/rfc4395</A>&gt;Guidelines and Registration Procedures for New URI Schemes&lt;/a&gt;&lt;/cite&gt;, T. Hansen, T. Hardie, L. Masinter. IETF.&lt;/dd&gt;
+
    &lt;dt id=refsRFC4648&gt;[RFC4648]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc4648">http://tools.ietf.org/html/rfc4648</A>&gt;The Base16,
    Base32, and Base64 Data Encodings&lt;/a&gt;&lt;/cite&gt;, S. Josefsson.
@@ -97795,6 +97877,7 @@
   James Craig,
   James Graham,
   James Justin Harrell,
+  James Kozianski,
   James M Snell,
   James Perrett,
   James Robinson,
@@ -98100,6 +98183,7 @@
   Wayne Pollock,
   Wellington Fernando de Macedo,
   Weston Ruter,
+  Wilhelm Joys Andersen,
   Will Levine,
   William Swanson,
   Wladimir Palant,

Modified: source
===================================================================
--- source	2011-08-23 00:08:33 UTC (rev 6522)
+++ source	2011-08-23 23:27:17 UTC (rev 6523)
@@ -80196,7 +80196,11 @@
   the user is not repeatedly prompted with the same request.&lt;/p&gt;
 
   &lt;p&gt;The arguments to the methods have the following meanings and
-  corresponding implementation requirements:&lt;/p&gt;
+  corresponding implementation requirements. The requirements that
+  involve throwing exceptions must be processed in the order given
+  below, stopping at the first exception raised. (So the
+  &lt;code&gt;SECURITY_ERR&lt;/code&gt; exceptions take precedence over the
+  &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.)&lt;/p&gt;
 
   &lt;dl&gt;
 
@@ -80214,9 +80218,34 @@
     (as in &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since
     schemes don't contain colons.&lt;/p&gt;
 
-    &lt;p class=&quot;note&quot;&gt;This feature is not intended to be used with
-    non-standard protocols.&lt;/p&gt;
+    &lt;p&gt;If the &lt;code
+    title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler()&lt;/code&gt;
+    method is invoked with a scheme that is neither a
+    &lt;span&gt;whitelisted scheme&lt;/span&gt; nor a scheme whose value starts
+    with the substring &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; and otherwise
+    contains only characters in the range U+0061 LATIN SMALL LETTER A
+    to U+007A LATIN SMALL LETTER Z, the user agent must raise
+    &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception.&lt;/p&gt;
 
+    &lt;p&gt;The following schemes are the &lt;dfn title=&quot;whitelisted
+    scheme&quot;&gt;whitelisted schemes&lt;/dfn&gt;:&lt;/p&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;irc&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;mailto&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;mms&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;news&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;nntp&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;sms&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;smsto&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;tel&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;urn&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;webcal&lt;/code&gt;&lt;/li&gt;
+    &lt;/ul&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This list can be changed. If there are schemes
+    that should be added, please send feedback.&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; (&lt;code title=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler()&lt;/code&gt; only)&lt;/dt&gt;
@@ -80242,6 +80271,36 @@
     used by the user agent &lt;em&gt;after&lt;/em&gt; the sniffing algorithms have
     been applied.&lt;/p&gt;
 
+    &lt;p&gt;If the &lt;code
+    title=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler()&lt;/code&gt;
+    method is invoked with a &lt;span&gt;MIME type&lt;/span&gt; that is in the
+    &lt;span&gt;type blacklist&lt;/span&gt; or that the user agent has deemed a
+    privileged type, the user agent must raise
+    &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception.&lt;/p&gt;
+
+    &lt;p&gt;The following &lt;span title=&quot;MIME type&quot;&gt;MIME types&lt;/span&gt; are in
+    the &lt;dfn&gt;type blacklist&lt;/dfn&gt;:&lt;/p&gt;
+
+    &lt;ul title=&quot;brief&quot;&gt;
+
+     &lt;li&gt;&lt;code&gt;text/cache-manifest&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/css&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/html-sandboxed&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/html&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/ping&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;text/plain&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/gif&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/jpeg&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;image/png&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;All &lt;span title=&quot;XML MIME type&quot;&gt;XML MIME types&lt;/span&gt;&lt;/li&gt;
+     &lt;li&gt;All types that the user agent supports displaying natively in a &lt;span&gt;browsing context&lt;/span&gt; during &lt;span title=&quot;navigate&quot;&gt;navigation&lt;/span&gt;&lt;/li&gt;
+
+    &lt;/ul&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This list can be changed. If there are schemes
+    that should be added, please send feedback.&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -80275,6 +80334,15 @@
     percent-encoded form of that character. &lt;a
     href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;User agents must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception if
+    the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument passed to one of these
+    methods does not contain the exact literal string
+    &quot;&lt;code&gt;%s&lt;/code&gt;&quot;, or if &lt;span title=&quot;resolve a
+    url&quot;&gt;resolving&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument with
+    the first occurrence of the string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot;
+    removed, relative to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span
+    title=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;, is not successful.&lt;/p&gt;
+
     &lt;div class=&quot;example&quot;&gt;
 
      &lt;p&gt;If the user had visited a site at &lt;code
@@ -80315,26 +80383,6 @@
 
   &lt;/dl&gt;
 
-  &lt;p&gt;User agents should raise &lt;code&gt;SECURITY_ERR&lt;/code&gt; exceptions if
-  the methods are called with &lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; or &lt;var
-  title=&quot;&quot;&gt;mimeType&lt;/var&gt; values that the UA deems to be
-  &quot;privileged&quot;. For example, a site attempting to register a handler
-  for &lt;code&gt;http&lt;/code&gt; URLs or &lt;code&gt;text/html&lt;/code&gt; content in a
-  Web browser would likely cause an exception to be raised.&lt;/p&gt;
-
-  &lt;p&gt;User agents must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception if the
-  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument passed to one of these methods does
-  not contain the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot;, or if &lt;span
-  title=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
-  argument with the first occurrence of the string &quot;&lt;code
-  title=&quot;&quot;&gt;%s&lt;/code&gt;&quot; removed, relative to the &lt;span&gt;entry
-  script&lt;/span&gt;'s &lt;span title=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;, is
-  not successful.&lt;/p&gt;
-
-  &lt;p&gt;User agents must not raise any other exceptions (other than
-  binding-specific exceptions, such as for an incorrect number of
-  arguments in an JavaScript implementation).&lt;/p&gt;
-
   &lt;p&gt;This section does not define how the pages registered by these
   methods are used, beyond the requirements on how to process the &lt;var
   title=&quot;&quot;&gt;url&lt;/var&gt; value (see above). To some extent, the &lt;span
@@ -111509,6 +111557,50 @@
 &lt;!--START w3c-html--&gt;&lt;!--PING--&gt;
 
 
+  &lt;h3&gt;&lt;dfn title=&quot;scheme-web&quot;&gt;&lt;code&gt;web+&lt;/code&gt; scheme prefix&lt;/dfn&gt;&lt;/h3&gt;
+
+  &lt;p&gt;This section describes a convention for use with the IANA URI
+  scheme registry. It does not itself register a specific scheme. &lt;a
+  href=&quot;#refsRFC4395&quot;&gt;[RFC4395]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;dl&gt;
+   &lt;dt&gt;URI scheme name&lt;/dt&gt;
+   &lt;dd&gt;
+    Schemes starting with the four characters &quot;&lt;code
+    title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; followed by one or more letters in the range
+    &lt;code title=&quot;&quot;&gt;a&lt;/code&gt;-&lt;code title=&quot;&quot;&gt;z&lt;/code&gt;.
+   &lt;/dd&gt;
+   &lt;dt&gt;Status&lt;/dt&gt;
+   &lt;dd&gt;permanent&lt;/dd&gt;
+   &lt;dt&gt;URI scheme syntax&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;URI scheme semantics&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;Encoding considerations&lt;/dt&gt;
+   &lt;dd&gt;All &quot;&lt;code title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; schemes should use UTF-8 encodings were relevant.&lt;/dd&gt;
+   &lt;dt&gt;Applications/protocols that use this URI scheme name&lt;/dt&gt;
+   &lt;dd&gt;Scheme-specific.&lt;/dd&gt;
+   &lt;dt&gt;Interoperability considerations&lt;/dt&gt;
+   &lt;dd&gt;The scheme is expected to be used in the context of Web applications.&lt;/dd&gt;
+   &lt;dt&gt;Security considerations&lt;/dt&gt;
+   &lt;dd&gt;
+    Any Web page is able to register a handler for all &quot;&lt;code
+    title=&quot;&quot;&gt;web+&lt;/code&gt;&quot; schemes. As such, these schemes must not be
+    used for features intended to be core platform features (e.g.
+    network transfer protocols like HTTP or FTP). Similarly, such
+    schemes must not store confidential information in their URLs,
+    such as usernames, passwords, personal information, or
+    confidential project names.
+   &lt;/dd&gt;
+   &lt;dt&gt;Contact&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;Author/Change controller&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;References&lt;/dt&gt;
+   &lt;dd&gt;W3C&lt;/dd&gt;
+  &lt;/dl&gt;
+
+
   &lt;h2 id=&quot;index&quot; class=&quot;no-num&quot;&gt;Index&lt;/h2&gt;
 
   &lt;div class=&quot;impl&quot;&gt;
@@ -115934,6 +116026,9 @@
    Layer Security (TLS) Extensions&lt;/a&gt;&lt;/cite&gt;, S. Blake-Wilson,
    M. Nystrom, D. Hopwood, J. Mikkelsen, T. Wright. IETF.&lt;/dd&gt;
 
+   &lt;dt id=&quot;refsRFC4395&quot;&gt;[RFC4395]&lt;/dt&gt;
+   &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/rfc4395">http://tools.ietf.org/html/rfc4395</A>&quot;&gt;Guidelines and Registration Procedures for New URI Schemes&lt;/a&gt;&lt;/cite&gt;, T. Hansen, T. Hardie, L. Masinter. IETF.&lt;/dd&gt;
+
    &lt;dt id=&quot;refsRFC4648&quot;&gt;[RFC4648]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/rfc4648">http://tools.ietf.org/html/rfc4648</A>&quot;&gt;The Base16,
    Base32, and Base64 Data Encodings&lt;/a&gt;&lt;/cite&gt;, S. Josefsson.
@@ -116474,6 +116569,7 @@
   James Craig,
   James Graham,
   James Justin Harrell,
+  James Kozianski,
   James M Snell,
   James Perrett,
   James Robinson,
@@ -116779,6 +116875,7 @@
   Wayne Pollock,
   Wellington Fernando de Macedo,
   Weston Ruter,
+  Wilhelm Joys Andersen,
   Will Levine,
   William Swanson,
   Wladimir Palant,


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013389.html">[html5] r6522 - [e] (0) it's good form to use a label Fixing	http://www.w3.org/Bugs/Public/show_ [...]
</A></li>
	<LI>Next message: <A HREF="013391.html">[html5] r6524 - [giow] (0) Add an API to unregister a handler and	an API to check if a handler i [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13390">[ date ]</a>
              <a href="thread.html#13390">[ thread ]</a>
              <a href="subject.html#13390">[ subject ]</a>
              <a href="author.html#13390">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
