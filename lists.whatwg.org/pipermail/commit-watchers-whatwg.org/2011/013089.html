<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r6222 - [cgiow] (0) Introduce &lt;object type='' data=''	typemustmatch&gt; to help when refere [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6222%20-%20%5Bcgiow%5D%20%280%29%20Introduce%20%3Cobject%20type%3D%27%27%20data%3D%27%27%0A%09typemustmatch%3E%20to%20help%20when%20refere%20%5B...%5D&In-Reply-To=%3C20110614020802.A11C21CBC002%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013088.html">
   <LINK REL="Next"  HREF="013090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r6222 - [cgiow] (0) Introduce &lt;object type='' data=''	typemustmatch&gt; to help when refere [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6222%20-%20%5Bcgiow%5D%20%280%29%20Introduce%20%3Cobject%20type%3D%27%27%20data%3D%27%27%0A%09typemustmatch%3E%20to%20help%20when%20refere%20%5B...%5D&In-Reply-To=%3C20110614020802.A11C21CBC002%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r6222 - [cgiow] (0) Introduce &lt;object type='' data=''	typemustmatch&gt; to help when refere [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Jun 13 19:08:02 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013088.html">[html5] r6221 - [cgiow] (0) Remove &lt;progress form&gt; and &lt;meter form&gt;	since they are basically use [...]
</A></li>
        <LI>Next message: <A HREF="013090.html">[html5] r6223 - [e] (0) Simplify the non-normative descriptions of	index getters to avoid confus [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13089">[ date ]</a>
              <a href="thread.html#13089">[ thread ]</a>
              <a href="subject.html#13089">[ subject ]</a>
              <a href="author.html#13089">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2011-06-13 19:08:00 -0700 (Mon, 13 Jun 2011)
New Revision: 6222

Modified:
   complete.html
   index
   source
Log:
[cgiow] (0) Introduce &lt;object type='' data='' typemustmatch&gt; to help when referencing resources from a remote host.

Modified: complete.html
===================================================================
--- complete.html	2011-06-14 00:33:05 UTC (rev 6221)
+++ complete.html	2011-06-14 02:08:00 UTC (rev 6222)
@@ -24849,12 +24849,12 @@
   &lt;div class=example&gt;
 
    &lt;p&gt;Here's a way to embed a resource that requires a proprietary
-   plug-in, like Flash:&lt;/p&gt;
+   plugin, like Flash:&lt;/p&gt;
 
    &lt;pre&gt;&lt;embed src=&quot;catgame.swf&quot;&gt;&lt;/pre&gt;
 
-   &lt;p&gt;If the user does not have the plug-in (for example if the
-   plug-in vendor doesn't support the user's platform), then the user
+   &lt;p&gt;If the user does not have the plugin (for example if the
+   plugin vendor doesn't support the user's platform), then the user
    will be unable to use the resource.&lt;/p&gt;
 
    &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;,
@@ -24890,6 +24890,7 @@
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-object-name&gt;&lt;a href=#attr-object-name&gt;name&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-fae-form&gt;&lt;a href=#attr-fae-form&gt;form&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
@@ -24900,6 +24901,7 @@
 &lt;pre class=idl&gt;interface &lt;dfn id=htmlobjectelement&gt;HTMLObjectElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
            attribute DOMString &lt;a href=#dom-object-data title=dom-object-data&gt;data&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-object-type title=dom-object-type&gt;type&lt;/a&gt;;
+           attribute boolean &lt;a href=#dom-object-typemustmatch title=dom-object-typeMustMatch&gt;typeMustMatch&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-object-name title=dom-object-name&gt;name&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-object-usemap title=dom-object-useMap&gt;useMap&lt;/a&gt;;
   readonly attribute &lt;a href=#htmlformelement&gt;HTMLFormElement&lt;/a&gt;? &lt;a href=#dom-fae-form title=dom-fae-form&gt;form&lt;/a&gt;;
@@ -24931,12 +24933,33 @@
   present, the attribute must be a &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty
   URL potentially surrounded by spaces&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p class=warning&gt;Authors who reference resources from other &lt;a href=#origin title=origin&gt;origins&lt;/a&gt; that they do not trust are urged to
+  use the &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;
+  attribute defined below. Without that attribute, it is possible in
+  certain cases for an attacker on the remote host to use the plugin
+  mechanism to run arbitrary scripts, even if the author has used
+  features such as the Flash &quot;allowScriptAccess&quot; parameter.&lt;/p&gt; &lt;!--
+  for example, if the user doesn't have flash installed but does have
+  java installed, and the remote site unexpectedly returns java
+  instead of flash, then java will run, and it will ignore the
+  allowScriptAccess thing --&gt;
+
   &lt;p&gt;The &lt;dfn id=attr-object-type title=attr-object-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
   attribute, if present, specifies the type of the resource. If
   present, the attribute must be a &lt;a href=#valid-mime-type&gt;valid MIME type&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;At least one of either the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute or the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute must be present.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=attr-object-typemustmatch title=attr-object-typemustmatch&gt;&lt;code&gt;typemustmatch&lt;/code&gt;&lt;/dfn&gt;
+  attribute is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt; whose precense
+  indicates that the resource specified by the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute is only to be used if
+  the value of the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt;
+  attribute and the &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; of the aforementioned
+  resource match.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;
+  attribute must not be specified unless both the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute are present.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=attr-object-name title=attr-object-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
   attribute, if present, must be a &lt;a href=#valid-browsing-context-name&gt;valid browsing context
   name&lt;/a&gt;. The given value is used to name the &lt;a href=#nested-browsing-context&gt;nested
@@ -25153,6 +25176,28 @@
 
        &lt;li&gt;
 
+        &lt;p&gt;If the &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element has a &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and a &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;
+        attribute, and the resource has &lt;a href=#content-type title=Content-Type&gt;associated Content-Type metadata&lt;/a&gt;,
+        and the type specified in &lt;a href=#content-type title=Content-Type&gt;the
+        resource's Content-Type metadata&lt;/a&gt; is an &lt;a href=#ascii-case-insensitive&gt;ASCII
+        case-insensitive&lt;/a&gt; match for the value of the element's
+        &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, then let
+        &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; be that type and jump to the
+        step below labeled &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
+
+        &lt;!-- do we need to &lt;span&gt;strip leading and trailing whitespace&lt;/span&gt; from anything here? collapse sequences of spaces? drop parameters? --&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;If the &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element has a &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;
+        attribute, jump to the step below labeled &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
         &lt;!-- by request: <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=8479">http://www.w3.org/Bugs/Public/show_bug.cgi?id=8479</A> --&gt;
 
         &lt;p&gt;If the user agent is configured to strictly obey
@@ -25163,6 +25208,15 @@
         metadata&lt;/a&gt;, and jump to the step below labeled
         &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
 
+        &lt;p class=warning&gt;This can introduce a vulnerability, wherein
+        a site is trying to embed a resource that uses a particular
+        plugin, but the remote site overrides that and instead
+        furnishes the user agent with a resource that triggers a
+        different plugin with different security characteristics. &lt;!--
+        e.g. the example given above, where the site is expecting
+        Flash with allowScriptAccess=never, and instead gets back Java
+        with its unrestricted DOM access --&gt;&lt;/p&gt;
+
        &lt;/li&gt;
 
        &lt;li&gt;
@@ -25300,9 +25354,10 @@
 
        &lt;/li&gt;
 
-      &lt;/ol&gt;&lt;p class=note&gt;It is possible for this step to finish with &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; still being unknown, or for one of
-      the substeps above to jump straight to the next step. In both
-      cases, the next step will trigger fallback.&lt;/p&gt;
+      &lt;/ol&gt;&lt;p class=note&gt;It is possible for this step to finish, or for
+      one of the substeps above to jump straight to the next step,
+      with &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; still being unknown. In
+      both cases, the next step will trigger fallback.&lt;/p&gt;
 
      &lt;/li&gt;
 
@@ -25534,6 +25589,10 @@
   &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content attributes of the same
   name.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=dom-object-typemustmatch title=dom-object-typeMustMatch&gt;&lt;code&gt;typeMustMatch&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt; content
+  attribute.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-object-contentdocument title=dom-object-contentDocument&gt;&lt;code&gt;contentDocument&lt;/code&gt;&lt;/dfn&gt;
   IDL attribute must return the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object of the
   &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's
@@ -26905,7 +26964,7 @@
  var videoSection = document.getElementById('video');
  var videoElement = document.createElement('video');
  var support = videoElement.canPlayType('video/x-new-fictional-format;codecs=&quot;kittens,bunnies&quot;');
- if (support != &quot;probably&quot; &amp;&amp; &quot;New Fictional Video Plug-in&quot; in navigator.plugins) {
+ if (support != &quot;probably&quot; &amp;&amp; &quot;New Fictional Video Plugin&quot; in navigator.plugins) {
    // not confident of browser support
    // but we have a plugin
    // so use plugin instead
@@ -97086,6 +97145,7 @@
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-object-name&gt;&lt;a href=#attr-object-name&gt;name&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-fae-form&gt;&lt;a href=#attr-fae-form&gt;form&lt;/a&gt;&lt;/code&gt;;
@@ -98503,6 +98563,10 @@
      &lt;td&gt; &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;menu&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Type of menu
      &lt;td&gt; &quot;&lt;code title=&quot;context menu state&quot;&gt;&lt;a href=#context-menu-state&gt;context&lt;/a&gt;&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;&lt;a href=#toolbar-state&gt;toolbar&lt;/a&gt;&lt;/code&gt;&quot;
+    &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;typemustmatch&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;object&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; Whether the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and the &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; value need to match for the resource to be used
+     &lt;td&gt; &lt;a href=#boolean-attribute&gt;Boolean attribute&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;usemap&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;img&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;object&lt;/a&gt;&lt;/code&gt;

Modified: index
===================================================================
--- index	2011-06-14 00:33:05 UTC (rev 6221)
+++ index	2011-06-14 02:08:00 UTC (rev 6222)
@@ -24842,12 +24842,12 @@
   &lt;div class=example&gt;
 
    &lt;p&gt;Here's a way to embed a resource that requires a proprietary
-   plug-in, like Flash:&lt;/p&gt;
+   plugin, like Flash:&lt;/p&gt;
 
    &lt;pre&gt;&lt;embed src=&quot;catgame.swf&quot;&gt;&lt;/pre&gt;
 
-   &lt;p&gt;If the user does not have the plug-in (for example if the
-   plug-in vendor doesn't support the user's platform), then the user
+   &lt;p&gt;If the user does not have the plugin (for example if the
+   plugin vendor doesn't support the user's platform), then the user
    will be unable to use the resource.&lt;/p&gt;
 
    &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;,
@@ -24883,6 +24883,7 @@
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-object-name&gt;&lt;a href=#attr-object-name&gt;name&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-fae-form&gt;&lt;a href=#attr-fae-form&gt;form&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
@@ -24893,6 +24894,7 @@
 &lt;pre class=idl&gt;interface &lt;dfn id=htmlobjectelement&gt;HTMLObjectElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
            attribute DOMString &lt;a href=#dom-object-data title=dom-object-data&gt;data&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-object-type title=dom-object-type&gt;type&lt;/a&gt;;
+           attribute boolean &lt;a href=#dom-object-typemustmatch title=dom-object-typeMustMatch&gt;typeMustMatch&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-object-name title=dom-object-name&gt;name&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-object-usemap title=dom-object-useMap&gt;useMap&lt;/a&gt;;
   readonly attribute &lt;a href=#htmlformelement&gt;HTMLFormElement&lt;/a&gt;? &lt;a href=#dom-fae-form title=dom-fae-form&gt;form&lt;/a&gt;;
@@ -24924,12 +24926,33 @@
   present, the attribute must be a &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty
   URL potentially surrounded by spaces&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p class=warning&gt;Authors who reference resources from other &lt;a href=#origin title=origin&gt;origins&lt;/a&gt; that they do not trust are urged to
+  use the &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;
+  attribute defined below. Without that attribute, it is possible in
+  certain cases for an attacker on the remote host to use the plugin
+  mechanism to run arbitrary scripts, even if the author has used
+  features such as the Flash &quot;allowScriptAccess&quot; parameter.&lt;/p&gt; &lt;!--
+  for example, if the user doesn't have flash installed but does have
+  java installed, and the remote site unexpectedly returns java
+  instead of flash, then java will run, and it will ignore the
+  allowScriptAccess thing --&gt;
+
   &lt;p&gt;The &lt;dfn id=attr-object-type title=attr-object-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
   attribute, if present, specifies the type of the resource. If
   present, the attribute must be a &lt;a href=#valid-mime-type&gt;valid MIME type&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;At least one of either the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute or the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute must be present.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=attr-object-typemustmatch title=attr-object-typemustmatch&gt;&lt;code&gt;typemustmatch&lt;/code&gt;&lt;/dfn&gt;
+  attribute is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt; whose precense
+  indicates that the resource specified by the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute is only to be used if
+  the value of the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt;
+  attribute and the &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; of the aforementioned
+  resource match.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;
+  attribute must not be specified unless both the &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute are present.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=attr-object-name title=attr-object-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
   attribute, if present, must be a &lt;a href=#valid-browsing-context-name&gt;valid browsing context
   name&lt;/a&gt;. The given value is used to name the &lt;a href=#nested-browsing-context&gt;nested
@@ -25146,6 +25169,28 @@
 
        &lt;li&gt;
 
+        &lt;p&gt;If the &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element has a &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and a &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;
+        attribute, and the resource has &lt;a href=#content-type title=Content-Type&gt;associated Content-Type metadata&lt;/a&gt;,
+        and the type specified in &lt;a href=#content-type title=Content-Type&gt;the
+        resource's Content-Type metadata&lt;/a&gt; is an &lt;a href=#ascii-case-insensitive&gt;ASCII
+        case-insensitive&lt;/a&gt; match for the value of the element's
+        &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, then let
+        &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; be that type and jump to the
+        step below labeled &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
+
+        &lt;!-- do we need to &lt;span&gt;strip leading and trailing whitespace&lt;/span&gt; from anything here? collapse sequences of spaces? drop parameters? --&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;If the &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element has a &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;
+        attribute, jump to the step below labeled &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
         &lt;!-- by request: <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=8479">http://www.w3.org/Bugs/Public/show_bug.cgi?id=8479</A> --&gt;
 
         &lt;p&gt;If the user agent is configured to strictly obey
@@ -25156,6 +25201,15 @@
         metadata&lt;/a&gt;, and jump to the step below labeled
         &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
 
+        &lt;p class=warning&gt;This can introduce a vulnerability, wherein
+        a site is trying to embed a resource that uses a particular
+        plugin, but the remote site overrides that and instead
+        furnishes the user agent with a resource that triggers a
+        different plugin with different security characteristics. &lt;!--
+        e.g. the example given above, where the site is expecting
+        Flash with allowScriptAccess=never, and instead gets back Java
+        with its unrestricted DOM access --&gt;&lt;/p&gt;
+
        &lt;/li&gt;
 
        &lt;li&gt;
@@ -25293,9 +25347,10 @@
 
        &lt;/li&gt;
 
-      &lt;/ol&gt;&lt;p class=note&gt;It is possible for this step to finish with &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; still being unknown, or for one of
-      the substeps above to jump straight to the next step. In both
-      cases, the next step will trigger fallback.&lt;/p&gt;
+      &lt;/ol&gt;&lt;p class=note&gt;It is possible for this step to finish, or for
+      one of the substeps above to jump straight to the next step,
+      with &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; still being unknown. In
+      both cases, the next step will trigger fallback.&lt;/p&gt;
 
      &lt;/li&gt;
 
@@ -25527,6 +25582,10 @@
   &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content attributes of the same
   name.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=dom-object-typemustmatch title=dom-object-typeMustMatch&gt;&lt;code&gt;typeMustMatch&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt; content
+  attribute.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-object-contentdocument title=dom-object-contentDocument&gt;&lt;code&gt;contentDocument&lt;/code&gt;&lt;/dfn&gt;
   IDL attribute must return the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object of the
   &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's
@@ -26898,7 +26957,7 @@
  var videoSection = document.getElementById('video');
  var videoElement = document.createElement('video');
  var support = videoElement.canPlayType('video/x-new-fictional-format;codecs=&quot;kittens,bunnies&quot;');
- if (support != &quot;probably&quot; &amp;&amp; &quot;New Fictional Video Plug-in&quot; in navigator.plugins) {
+ if (support != &quot;probably&quot; &amp;&amp; &quot;New Fictional Video Plugin&quot; in navigator.plugins) {
    // not confident of browser support
    // but we have a plugin
    // so use plugin instead
@@ -92803,6 +92862,7 @@
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-object-data&gt;&lt;a href=#attr-object-data&gt;data&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;typemustmatch&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-object-name&gt;&lt;a href=#attr-object-name&gt;name&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-fae-form&gt;&lt;a href=#attr-fae-form&gt;form&lt;/a&gt;&lt;/code&gt;;
@@ -94220,6 +94280,10 @@
      &lt;td&gt; &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;menu&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Type of menu
      &lt;td&gt; &quot;&lt;code title=&quot;context menu state&quot;&gt;&lt;a href=#context-menu-state&gt;context&lt;/a&gt;&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;&lt;a href=#toolbar-state&gt;toolbar&lt;/a&gt;&lt;/code&gt;&quot;
+    &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;typemustmatch&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;object&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; Whether the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and the &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; value need to match for the resource to be used
+     &lt;td&gt; &lt;a href=#boolean-attribute&gt;Boolean attribute&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;usemap&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;img&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;object&lt;/a&gt;&lt;/code&gt;

Modified: source
===================================================================
--- source	2011-06-14 00:33:05 UTC (rev 6221)
+++ source	2011-06-14 02:08:00 UTC (rev 6222)
@@ -26893,12 +26893,12 @@
   &lt;div class=&quot;example&quot;&gt;
 
    &lt;p&gt;Here's a way to embed a resource that requires a proprietary
-   plug-in, like Flash:&lt;/p&gt;
+   plugin, like Flash:&lt;/p&gt;
 
    &lt;pre&gt;&lt;embed src=&quot;catgame.swf&quot;&gt;&lt;/pre&gt;
 
-   &lt;p&gt;If the user does not have the plug-in (for example if the
-   plug-in vendor doesn't support the user's platform), then the user
+   &lt;p&gt;If the user does not have the plugin (for example if the
+   plugin vendor doesn't support the user's platform), then the user
    will be unable to use the resource.&lt;/p&gt;
 
    &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;,
@@ -26935,6 +26935,7 @@
    &lt;dd&gt;&lt;span&gt;Global attributes&lt;/span&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-object-typemustmatch&quot;&gt;typemustmatch&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-object-name&quot;&gt;name&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-hyperlink-usemap&quot;&gt;usemap&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-fae-form&quot;&gt;form&lt;/code&gt;&lt;/dd&gt;
@@ -26945,6 +26946,7 @@
 &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLObjectElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
            attribute DOMString &lt;span title=&quot;dom-object-data&quot;&gt;data&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-object-type&quot;&gt;type&lt;/span&gt;;
+           attribute boolean &lt;span title=&quot;dom-object-typeMustMatch&quot;&gt;typeMustMatch&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-object-name&quot;&gt;name&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-object-useMap&quot;&gt;useMap&lt;/span&gt;;
   readonly attribute &lt;span&gt;HTMLFormElement&lt;/span&gt;? &lt;span title=&quot;dom-fae-form&quot;&gt;form&lt;/span&gt;;
@@ -26978,6 +26980,18 @@
   present, the attribute must be a &lt;span&gt;valid non-empty
   URL potentially surrounded by spaces&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p class=&quot;warning&quot;&gt;Authors who reference resources from other &lt;span
+  title=&quot;origin&quot;&gt;origins&lt;/span&gt; that they do not trust are urged to
+  use the &lt;code title=&quot;attr-object-typemustmatch&quot;&gt;typemustmatch&lt;/code&gt;
+  attribute defined below. Without that attribute, it is possible in
+  certain cases for an attacker on the remote host to use the plugin
+  mechanism to run arbitrary scripts, even if the author has used
+  features such as the Flash &quot;allowScriptAccess&quot; parameter.&lt;/p&gt; &lt;!--
+  for example, if the user doesn't have flash installed but does have
+  java installed, and the remote site unexpectedly returns java
+  instead of flash, then java will run, and it will ignore the
+  allowScriptAccess thing --&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;attr-object-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
   attribute, if present, specifies the type of the resource. If
   present, the attribute must be a &lt;span&gt;valid MIME type&lt;/span&gt;.&lt;/p&gt;
@@ -26986,6 +27000,20 @@
   title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute or the &lt;code
   title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt; attribute must be present.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn
+  title=&quot;attr-object-typemustmatch&quot;&gt;&lt;code&gt;typemustmatch&lt;/code&gt;&lt;/dfn&gt;
+  attribute is a &lt;span&gt;boolean attribute&lt;/span&gt; whose precense
+  indicates that the resource specified by the &lt;code
+  title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute is only to be used if
+  the value of the &lt;code title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt;
+  attribute and the &lt;span&gt;Content-Type&lt;/span&gt; of the aforementioned
+  resource match.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=&quot;attr-object-typemustmatch&quot;&gt;typemustmatch&lt;/code&gt;
+  attribute must not be specified unless both the &lt;code
+  title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute and the &lt;code
+  title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt; attribute are present.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;attr-object-name&quot;&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
   attribute, if present, must be a &lt;span&gt;valid browsing context
   name&lt;/span&gt;. The given value is used to name the &lt;span&gt;nested
@@ -27218,6 +27246,32 @@
 
        &lt;li&gt;
 
+        &lt;p&gt;If the &lt;code&gt;object&lt;/code&gt; element has a &lt;code
+        title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt; attribute and a &lt;code
+        title=&quot;attr-object-typemustmatch&quot;&gt;typemustmatch&lt;/code&gt;
+        attribute, and the resource has &lt;span
+        title=&quot;Content-Type&quot;&gt;associated Content-Type metadata&lt;/span&gt;,
+        and the type specified in &lt;span title=&quot;Content-Type&quot;&gt;the
+        resource's Content-Type metadata&lt;/span&gt; is an &lt;span&gt;ASCII
+        case-insensitive&lt;/span&gt; match for the value of the element's
+        &lt;code title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt; attribute, then let
+        &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; be that type and jump to the
+        step below labeled &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
+
+        &lt;!-- do we need to &lt;span&gt;strip leading and trailing whitespace&lt;/span&gt; from anything here? collapse sequences of spaces? drop parameters? --&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;If the &lt;code&gt;object&lt;/code&gt; element has a &lt;code
+        title=&quot;attr-object-typemustmatch&quot;&gt;typemustmatch&lt;/code&gt;
+        attribute, jump to the step below labeled &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
         &lt;!-- by request: <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=8479">http://www.w3.org/Bugs/Public/show_bug.cgi?id=8479</A> --&gt;
 
         &lt;p&gt;If the user agent is configured to strictly obey
@@ -27229,6 +27283,15 @@
         metadata&lt;/span&gt;, and jump to the step below labeled
         &lt;i&gt;handler&lt;/i&gt;.&lt;/p&gt;
 
+        &lt;p class=&quot;warning&quot;&gt;This can introduce a vulnerability, wherein
+        a site is trying to embed a resource that uses a particular
+        plugin, but the remote site overrides that and instead
+        furnishes the user agent with a resource that triggers a
+        different plugin with different security characteristics. &lt;!--
+        e.g. the example given above, where the site is expecting
+        Flash with allowScriptAccess=never, and instead gets back Java
+        with its unrestricted DOM access --&gt;&lt;/p&gt;
+
        &lt;/li&gt;
 
        &lt;li&gt;
@@ -27392,10 +27455,10 @@
 
       &lt;/ol&gt;
 
-      &lt;p class=&quot;note&quot;&gt;It is possible for this step to finish with &lt;var
-      title=&quot;&quot;&gt;resource type&lt;/var&gt; still being unknown, or for one of
-      the substeps above to jump straight to the next step. In both
-      cases, the next step will trigger fallback.&lt;/p&gt;
+      &lt;p class=&quot;note&quot;&gt;It is possible for this step to finish, or for
+      one of the substeps above to jump straight to the next step,
+      with &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; still being unknown. In
+      both cases, the next step will trigger fallback.&lt;/p&gt;
 
      &lt;/li&gt;
 
@@ -27654,6 +27717,12 @@
   name.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
+  title=&quot;dom-object-typeMustMatch&quot;&gt;&lt;code&gt;typeMustMatch&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute must &lt;span&gt;reflect&lt;/span&gt; the &lt;code
+  title=&quot;attr-object-typemustmatch&quot;&gt;typemustmatch&lt;/code&gt; content
+  attribute.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
   title=&quot;dom-object-contentDocument&quot;&gt;&lt;code&gt;contentDocument&lt;/code&gt;&lt;/dfn&gt;
   IDL attribute must return the &lt;code&gt;Document&lt;/code&gt; object of the
   &lt;span&gt;active document&lt;/span&gt; of the &lt;code&gt;object&lt;/code&gt; element's
@@ -29195,7 +29264,7 @@
  var videoSection = document.getElementById('video');
  var videoElement = document.createElement('video');
  var support = videoElement.canPlayType('video/x-new-fictional-format;codecs=&quot;kittens,bunnies&quot;');
- if (support != &quot;probably&quot; &amp;&amp; &quot;New Fictional Video Plug-in&quot; in navigator.plugins) {
+ if (support != &quot;probably&quot; &amp;&amp; &quot;New Fictional Video Plugin&quot; in navigator.plugins) {
    // not confident of browser support
    // but we have a plugin
    // so use plugin instead
@@ -110513,6 +110582,7 @@
      &lt;td&gt;&lt;span title=&quot;global attributes&quot;&gt;globals&lt;/span&gt;;
          &lt;code title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt;;
          &lt;code title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt;;
+         &lt;code title=&quot;attr-object-typemustmatch&quot;&gt;typemustmatch&lt;/code&gt;;
          &lt;code title=&quot;attr-object-name&quot;&gt;name&lt;/code&gt;;
          &lt;code title=&quot;attr-hyperlink-usemap&quot;&gt;usemap&lt;/code&gt;;
          &lt;code title=&quot;attr-fae-form&quot;&gt;form&lt;/code&gt;;
@@ -112213,6 +112283,11 @@
      &lt;td&gt; Type of menu
      &lt;td&gt; &quot;&lt;code title=&quot;context menu state&quot;&gt;context&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;toolbar&lt;/code&gt;&quot;
     &lt;tr&gt;
+     &lt;th&gt; &lt;code title=&quot;&quot;&gt;typemustmatch&lt;/code&gt;
+     &lt;td&gt; &lt;code title=&quot;attr-object-typemustmatch&quot;&gt;object&lt;/code&gt;
+     &lt;td&gt; Whether the &lt;code title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt; attribute and the &lt;span&gt;Content-Type&lt;/span&gt; value need to match for the resource to be used
+     &lt;td&gt; &lt;span&gt;Boolean attribute&lt;/span&gt;
+    &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;usemap&lt;/code&gt;
      &lt;td&gt; &lt;code title=&quot;attr-hyperlink-usemap&quot;&gt;img&lt;/code&gt;;
           &lt;code title=&quot;attr-hyperlink-usemap&quot;&gt;object&lt;/code&gt;


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013088.html">[html5] r6221 - [cgiow] (0) Remove &lt;progress form&gt; and &lt;meter form&gt;	since they are basically use [...]
</A></li>
	<LI>Next message: <A HREF="013090.html">[html5] r6223 - [e] (0) Simplify the non-normative descriptions of	index getters to avoid confus [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13089">[ date ]</a>
              <a href="thread.html#13089">[ thread ]</a>
              <a href="subject.html#13089">[ subject ]</a>
              <a href="author.html#13089">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
