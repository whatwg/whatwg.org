<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r6531 - [giow] (1) Make video.currentTime return a stable	value rather than the current [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6531%20-%20%5Bgiow%5D%20%281%29%20Make%20video.currentTime%20return%20a%20stable%0A%09value%20rather%20than%20the%20current%20%5B...%5D&In-Reply-To=%3C20110829073234.2D9871C84004%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013397.html">
   <LINK REL="Next"  HREF="013399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r6531 - [giow] (1) Make video.currentTime return a stable	value rather than the current [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6531%20-%20%5Bgiow%5D%20%281%29%20Make%20video.currentTime%20return%20a%20stable%0A%09value%20rather%20than%20the%20current%20%5B...%5D&In-Reply-To=%3C20110829073234.2D9871C84004%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r6531 - [giow] (1) Make video.currentTime return a stable	value rather than the current [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Aug 29 00:32:34 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013397.html">[html5] r6530 - [giow] (0) Drop onundo and onredo. Editing and undo	specs will take care of this.
</A></li>
        <LI>Next message: <A HREF="013399.html">[html5] r6532 - [e] (0) Remove bits now specced in DOMPARSING spec.	Fixing http://www.w3.org/Bug [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13398">[ date ]</a>
              <a href="thread.html#13398">[ thread ]</a>
              <a href="subject.html#13398">[ subject ]</a>
              <a href="author.html#13398">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2011-08-29 00:32:31 -0700 (Mon, 29 Aug 2011)
New Revision: 6531

Modified:
   complete.html
   index
   source
Log:
[giow] (1) Make video.currentTime return a stable value rather than the current value. This lets us make setting this attribute always seem to work, so authors don't find the attribute hasn't changed after they set it.
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=12541">http://www.w3.org/Bugs/Public/show_bug.cgi?id=12541</A>

Modified: complete.html
===================================================================
--- complete.html	2011-08-26 20:10:46 UTC (rev 6530)
+++ complete.html	2011-08-29 07:32:31 UTC (rev 6531)
@@ -239,7 +239,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;Web Applications 1.0&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 26 August 2011&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 29 August 2011&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;Multiple-page version:&lt;/dt&gt;
     &lt;dd&gt;&lt;a href=<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete/">http://www.whatwg.org/specs/web-apps/current-work/complete/</A>&gt;<A HREF="http://www.whatwg.org/specs/web-apps/current-work/complete/&lt;/a">http://www.whatwg.org/specs/web-apps/current-work/complete/&lt;/a</A>&gt;&lt;/dd&gt;
     &lt;dt&gt;One-page version:&lt;/dt&gt;
@@ -27285,7 +27285,9 @@
 
       &lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to 0.&lt;/p&gt;
 
-      &lt;p&gt;If this changed the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;,
+      &lt;p&gt;Set the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; to 0.&lt;/p&gt;
+
+      &lt;p&gt;If this changed the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt;,
       then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
       event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the
       &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/p&gt;
@@ -27759,8 +27761,9 @@
 
        &lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to the
-       &lt;a href=#earliest-possible-position&gt;earliest possible position&lt;/a&gt;.&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; and the
+       &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; to the &lt;a href=#earliest-possible-position&gt;earliest
+       possible position&lt;/a&gt;.&lt;/li&gt;
 
        &lt;li&gt;
 
@@ -27801,9 +27804,7 @@
         &lt;p&gt;If either the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; or the address of
         the &lt;var title=&quot;&quot;&gt;current media resource&lt;/var&gt; indicate a
         particular start time, then set the &lt;a href=#initial-playback-position&gt;initial playback
-        position&lt;/a&gt; to that time, &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to that time, and let &lt;var title=&quot;&quot;&gt;jumped&lt;/var&gt; be true. Ignore any resulting exceptions
-        (if the position is out of range, it is effectively
-        ignored).&lt;/p&gt;
+        position&lt;/a&gt; to that time, &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to that time, and let &lt;var title=&quot;&quot;&gt;jumped&lt;/var&gt; be true.&lt;/p&gt;
 
         &lt;p class=example&gt;For example, with media formats that
         support the &lt;cite&gt;Media Fragments URI&lt;/cite&gt; fragment
@@ -27835,16 +27836,15 @@
        &lt;a href=#current-media-controller&gt;current media controller&lt;/a&gt;'s timeline; otherwise,
        &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; the &lt;a href=#media-element&gt;media
        element&lt;/a&gt; to the &lt;a href=#media-controller-position&gt;media controller position&lt;/a&gt;,
-       relative to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s timeline,
-       discarding any resulting exceptions.&lt;/li&gt; &lt;!-- i.e. &quot;bring
-       the media element up to speed with its new media controller&quot;
-       --&gt; &lt;!-- we do this because otherwise the fragment identifier
-       initial position is lost. Basically this means that if you are
-       attached to a media controller when you load your resource, and
-       you have a fragment identifier with a start time, you'll jump
-       the media controller to that time if it's not already past it.
-       (So if there are several, you'll jump the media controller to
-       the furthest one in the timeline.) --&gt;
+       relative to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s timeline.&lt;/li&gt;
+       &lt;!-- i.e. &quot;bring the media element up to speed with its new
+       media controller&quot; --&gt; &lt;!-- we do this because otherwise the
+       fragment identifier initial position is lost. Basically this
+       means that if you are attached to a media controller when you
+       load your resource, and you have a fragment identifier with a
+       start time, you'll jump the media controller to that time if
+       it's not already past it. (So if there are several, you'll jump
+       the media controller to the furthest one in the timeline.) --&gt;
 
        &lt;li&gt;
 
@@ -28180,7 +28180,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, in seconds.&lt;/p&gt;
+    &lt;p&gt;Returns the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt;, in seconds.&lt;/p&gt;
 
     &lt;p&gt;Can be set, to seek to the given time.&lt;p&gt;
 
@@ -28290,15 +28290,23 @@
   &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; is a time on the &lt;a href=#media-timeline&gt;media
   timeline&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p&gt;&lt;a href=#media-element title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; also have an
+  &lt;dfn id=official-playback-position&gt;official playback position&lt;/dfn&gt;, which must initially be set
+  to zero seconds. The &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; is an
+  approximation of the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;
+  that is kept stable while scripts are running.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-media-currenttime title=dom-media-currentTime&gt;&lt;code&gt;currentTime&lt;/code&gt;&lt;/dfn&gt;
-  attribute must, on getting, return the &lt;a href=#current-playback-position&gt;current playback
-  position&lt;/a&gt;, expressed in seconds. On setting,
-  if the &lt;a href=#media-element&gt;media element&lt;/a&gt; has a &lt;a href=#current-media-controller&gt;current media
-  controller&lt;/a&gt;, then it must throw an
-  &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception; otherwise,
-  the user agent
-  must &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to the new value
-  (which might raise an exception).&lt;/p&gt;
+  attribute must, on getting, return the &lt;a href=#official-playback-position&gt;official playback
+  position&lt;/a&gt;, expressed in seconds. On setting, if the
+  &lt;a href=#media-element&gt;media element&lt;/a&gt; has a &lt;a href=#current-media-controller&gt;current media
+  controller&lt;/a&gt;, then the user agent must throw an
+  &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception; otherwise, if the
+  &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then it must
+  raise an &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception; otherwise, the it
+  must set the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; to the new
+  value and then &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to the new
+  value.&lt;/p&gt;
 
   &lt;p&gt;&lt;a href=#media-element title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; have an
   &lt;dfn id=initial-playback-position&gt;initial playback position&lt;/dfn&gt;, which must initially (i.e. in
@@ -28871,7 +28879,8 @@
    true.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire
-   a simple event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the element.&lt;/li&gt;
+   a simple event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the
+   element.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire
    a simple event&lt;/a&gt; named &lt;code title=event-media-ended&gt;&lt;a href=#event-media-ended&gt;ended&lt;/a&gt;&lt;/code&gt;
@@ -28885,7 +28894,8 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Stop playback.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire
-   a simple event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the element.&lt;/li&gt;
+   a simple event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the
+   element.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-media-defaultplaybackrate title=dom-media-defaultPlaybackRate&gt;&lt;code&gt;defaultPlaybackRate&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the desired speed at which the &lt;a href=#media-resource&gt;media
@@ -28953,9 +28963,9 @@
 
     &lt;p class=note&gt;This &lt;a href=#seekUpdate&gt;will cause&lt;/a&gt; the user
     agent to &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
-    event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
-    element&lt;/a&gt;.&lt;/p&gt; &lt;!-- if we're already playing at this point,
-    it might also fire 'waiting' --&gt;
+    event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the
+    &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/p&gt; &lt;!-- if we're already playing at
+    this point, it might also fire 'waiting' --&gt;
 
    &lt;/li&gt;
 
@@ -29028,6 +29038,9 @@
      event&lt;/a&gt; named &lt;code title=event-media-pause&gt;&lt;a href=#event-media-pause&gt;pause&lt;/a&gt;&lt;/code&gt;
      at the element.&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;Set the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; to the
+     &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;.&lt;/li&gt;
+
     &lt;/ol&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt; has a &lt;a href=#current-media-controller&gt;current media
@@ -29073,6 +29086,11 @@
   playback rate) the client doesn't actually have to drop or
   interpolate any frames.&lt;/p&gt;
 
+  &lt;p&gt;Any time the user agent &lt;a href=#provide-a-stable-state title=&quot;provide a stable
+  state&quot;&gt;provides a stable state&lt;/a&gt;, the &lt;a href=#official-playback-position&gt;official playback
+  position&lt;/a&gt; must be set to the &lt;a href=#current-playback-position&gt;current playback
+  position&lt;/a&gt;.&lt;/p&gt;
+
   &lt;p&gt;When the &lt;a href=#direction-of-playback&gt;direction of playback&lt;/a&gt; is backwards, any
   corresponding audio must be muted. When the &lt;a href=#effective-playback-rate&gt;effective playback
   rate&lt;/a&gt; is so low or so high that the user agent cannot play
@@ -29350,10 +29368,8 @@
   loop&lt;/a&gt; algorithm). Steps in that section are marked with
   &#8987;.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then raise an
-   &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception (if the seek was in
-   response to a DOM method call or setting of an IDL attribute), and
-   abort these steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, abort these
+   steps.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the element's &lt;code title=dom-media-seeking&gt;&lt;a href=#dom-media-seeking&gt;seeking&lt;/a&gt;&lt;/code&gt; IDL attribute is true,
    then another instance of this algorithm is already running. Abort
@@ -29406,6 +29422,11 @@
     element.&lt;/p&gt; &lt;!-- also, timeupdate --&gt;
     &lt;!-- also, it will do the &quot;report the controller state&quot; thing --&gt;
 
+    &lt;p class=note&gt;The &lt;code title=dom-media-currentTime&gt;&lt;a href=#dom-media-currenttime&gt;currentTime&lt;/a&gt;&lt;/code&gt; attribute does
+    not get updated asynchronously, as it returns the &lt;a href=#official-playback-position&gt;official
+    playback position&lt;/a&gt;, not the &lt;a href=#current-playback-position&gt;current playback
+    position&lt;/a&gt;.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Wait until the user agent has established whether or not the
@@ -30410,7 +30431,7 @@
   speed with its new media controller&lt;/dfn&gt;, it must &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; that &lt;a href=#media-element&gt;media element&lt;/a&gt;
   to the &lt;code&gt;&lt;a href=#mediacontroller&gt;MediaController&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#media-controller-position&gt;media controller
   position&lt;/a&gt; relative to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s
-  timeline, discarding any resulting exceptions.&lt;/p&gt;
+  timeline.&lt;/p&gt;
 
   &lt;p&gt;When the user agent is to &lt;dfn id=seek-the-media-controller&gt;seek the media controller&lt;/dfn&gt; to
   a particular &lt;var title=&quot;&quot;&gt;new playback position&lt;/var&gt;, it must
@@ -30427,9 +30448,8 @@
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#dom-media-seek title=dom-media-seek&gt;Seek&lt;/a&gt; each &lt;a href=#slaved-media-elements title=&quot;slaved media elements&quot;&gt;slaved media element&lt;/a&gt; to the
    &lt;var title=&quot;&quot;&gt;new playback position&lt;/var&gt; relative to the
-   &lt;a href=#media-element&gt;media element&lt;/a&gt; timeline, discarding any resulting
-   exceptions.&lt;/li&gt; &lt;!-- i.e. &quot;bring the media element up to speed
-   with its new media controller&quot; --&gt;
+   &lt;a href=#media-element&gt;media element&lt;/a&gt; timeline.&lt;/li&gt; &lt;!-- i.e. &quot;bring the
+   media element up to speed with its new media controller&quot; --&gt;
 
   &lt;/ol&gt;&lt;p&gt;A &lt;code&gt;&lt;a href=#mediacontroller&gt;MediaController&lt;/a&gt;&lt;/code&gt; is a &lt;dfn id=blocked-media-controller&gt;blocked media
   controller&lt;/dfn&gt; if the &lt;code&gt;&lt;a href=#mediacontroller&gt;MediaController&lt;/a&gt;&lt;/code&gt; is a

Modified: index
===================================================================
--- index	2011-08-26 20:10:46 UTC (rev 6530)
+++ index	2011-08-29 07:32:31 UTC (rev 6531)
@@ -243,7 +243,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 26 August 2011&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 29 August 2011&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -27152,7 +27152,9 @@
 
       &lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to 0.&lt;/p&gt;
 
-      &lt;p&gt;If this changed the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;,
+      &lt;p&gt;Set the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; to 0.&lt;/p&gt;
+
+      &lt;p&gt;If this changed the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt;,
       then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
       event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the
       &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/p&gt;
@@ -27626,8 +27628,9 @@
 
        &lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to the
-       &lt;a href=#earliest-possible-position&gt;earliest possible position&lt;/a&gt;.&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; and the
+       &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; to the &lt;a href=#earliest-possible-position&gt;earliest
+       possible position&lt;/a&gt;.&lt;/li&gt;
 
        &lt;li&gt;
 
@@ -27668,9 +27671,7 @@
         &lt;p&gt;If either the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; or the address of
         the &lt;var title=&quot;&quot;&gt;current media resource&lt;/var&gt; indicate a
         particular start time, then set the &lt;a href=#initial-playback-position&gt;initial playback
-        position&lt;/a&gt; to that time, &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to that time, and let &lt;var title=&quot;&quot;&gt;jumped&lt;/var&gt; be true. Ignore any resulting exceptions
-        (if the position is out of range, it is effectively
-        ignored).&lt;/p&gt;
+        position&lt;/a&gt; to that time, &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to that time, and let &lt;var title=&quot;&quot;&gt;jumped&lt;/var&gt; be true.&lt;/p&gt;
 
         &lt;p class=example&gt;For example, with media formats that
         support the &lt;cite&gt;Media Fragments URI&lt;/cite&gt; fragment
@@ -27702,16 +27703,15 @@
        &lt;a href=#current-media-controller&gt;current media controller&lt;/a&gt;'s timeline; otherwise,
        &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; the &lt;a href=#media-element&gt;media
        element&lt;/a&gt; to the &lt;a href=#media-controller-position&gt;media controller position&lt;/a&gt;,
-       relative to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s timeline,
-       discarding any resulting exceptions.&lt;/li&gt; &lt;!-- i.e. &quot;bring
-       the media element up to speed with its new media controller&quot;
-       --&gt; &lt;!-- we do this because otherwise the fragment identifier
-       initial position is lost. Basically this means that if you are
-       attached to a media controller when you load your resource, and
-       you have a fragment identifier with a start time, you'll jump
-       the media controller to that time if it's not already past it.
-       (So if there are several, you'll jump the media controller to
-       the furthest one in the timeline.) --&gt;
+       relative to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s timeline.&lt;/li&gt;
+       &lt;!-- i.e. &quot;bring the media element up to speed with its new
+       media controller&quot; --&gt; &lt;!-- we do this because otherwise the
+       fragment identifier initial position is lost. Basically this
+       means that if you are attached to a media controller when you
+       load your resource, and you have a fragment identifier with a
+       start time, you'll jump the media controller to that time if
+       it's not already past it. (So if there are several, you'll jump
+       the media controller to the furthest one in the timeline.) --&gt;
 
        &lt;li&gt;
 
@@ -28047,7 +28047,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, in seconds.&lt;/p&gt;
+    &lt;p&gt;Returns the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt;, in seconds.&lt;/p&gt;
 
     &lt;p&gt;Can be set, to seek to the given time.&lt;p&gt;
 
@@ -28157,15 +28157,23 @@
   &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; is a time on the &lt;a href=#media-timeline&gt;media
   timeline&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p&gt;&lt;a href=#media-element title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; also have an
+  &lt;dfn id=official-playback-position&gt;official playback position&lt;/dfn&gt;, which must initially be set
+  to zero seconds. The &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; is an
+  approximation of the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;
+  that is kept stable while scripts are running.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-media-currenttime title=dom-media-currentTime&gt;&lt;code&gt;currentTime&lt;/code&gt;&lt;/dfn&gt;
-  attribute must, on getting, return the &lt;a href=#current-playback-position&gt;current playback
-  position&lt;/a&gt;, expressed in seconds. On setting,
-  if the &lt;a href=#media-element&gt;media element&lt;/a&gt; has a &lt;a href=#current-media-controller&gt;current media
-  controller&lt;/a&gt;, then it must throw an
-  &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception; otherwise,
-  the user agent
-  must &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to the new value
-  (which might raise an exception).&lt;/p&gt;
+  attribute must, on getting, return the &lt;a href=#official-playback-position&gt;official playback
+  position&lt;/a&gt;, expressed in seconds. On setting, if the
+  &lt;a href=#media-element&gt;media element&lt;/a&gt; has a &lt;a href=#current-media-controller&gt;current media
+  controller&lt;/a&gt;, then the user agent must throw an
+  &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception; otherwise, if the
+  &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then it must
+  raise an &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception; otherwise, the it
+  must set the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; to the new
+  value and then &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to the new
+  value.&lt;/p&gt;
 
   &lt;p&gt;&lt;a href=#media-element title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; have an
   &lt;dfn id=initial-playback-position&gt;initial playback position&lt;/dfn&gt;, which must initially (i.e. in
@@ -28738,7 +28746,8 @@
    true.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire
-   a simple event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the element.&lt;/li&gt;
+   a simple event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the
+   element.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire
    a simple event&lt;/a&gt; named &lt;code title=event-media-ended&gt;&lt;a href=#event-media-ended&gt;ended&lt;/a&gt;&lt;/code&gt;
@@ -28752,7 +28761,8 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Stop playback.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire
-   a simple event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the element.&lt;/li&gt;
+   a simple event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the
+   element.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-media-defaultplaybackrate title=dom-media-defaultPlaybackRate&gt;&lt;code&gt;defaultPlaybackRate&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the desired speed at which the &lt;a href=#media-resource&gt;media
@@ -28820,9 +28830,9 @@
 
     &lt;p class=note&gt;This &lt;a href=#seekUpdate&gt;will cause&lt;/a&gt; the user
     agent to &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
-    event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
-    element&lt;/a&gt;.&lt;/p&gt; &lt;!-- if we're already playing at this point,
-    it might also fire 'waiting' --&gt;
+    event&lt;/a&gt; named &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the
+    &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/p&gt; &lt;!-- if we're already playing at
+    this point, it might also fire 'waiting' --&gt;
 
    &lt;/li&gt;
 
@@ -28895,6 +28905,9 @@
      event&lt;/a&gt; named &lt;code title=event-media-pause&gt;&lt;a href=#event-media-pause&gt;pause&lt;/a&gt;&lt;/code&gt;
      at the element.&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;Set the &lt;a href=#official-playback-position&gt;official playback position&lt;/a&gt; to the
+     &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;.&lt;/li&gt;
+
     &lt;/ol&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt; has a &lt;a href=#current-media-controller&gt;current media
@@ -28940,6 +28953,11 @@
   playback rate) the client doesn't actually have to drop or
   interpolate any frames.&lt;/p&gt;
 
+  &lt;p&gt;Any time the user agent &lt;a href=#provide-a-stable-state title=&quot;provide a stable
+  state&quot;&gt;provides a stable state&lt;/a&gt;, the &lt;a href=#official-playback-position&gt;official playback
+  position&lt;/a&gt; must be set to the &lt;a href=#current-playback-position&gt;current playback
+  position&lt;/a&gt;.&lt;/p&gt;
+
   &lt;p&gt;When the &lt;a href=#direction-of-playback&gt;direction of playback&lt;/a&gt; is backwards, any
   corresponding audio must be muted. When the &lt;a href=#effective-playback-rate&gt;effective playback
   rate&lt;/a&gt; is so low or so high that the user agent cannot play
@@ -29217,10 +29235,8 @@
   loop&lt;/a&gt; algorithm). Steps in that section are marked with
   &#8987;.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then raise an
-   &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception (if the seek was in
-   response to a DOM method call or setting of an IDL attribute), and
-   abort these steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, abort these
+   steps.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the element's &lt;code title=dom-media-seeking&gt;&lt;a href=#dom-media-seeking&gt;seeking&lt;/a&gt;&lt;/code&gt; IDL attribute is true,
    then another instance of this algorithm is already running. Abort
@@ -29273,6 +29289,11 @@
     element.&lt;/p&gt; &lt;!-- also, timeupdate --&gt;
     &lt;!-- also, it will do the &quot;report the controller state&quot; thing --&gt;
 
+    &lt;p class=note&gt;The &lt;code title=dom-media-currentTime&gt;&lt;a href=#dom-media-currenttime&gt;currentTime&lt;/a&gt;&lt;/code&gt; attribute does
+    not get updated asynchronously, as it returns the &lt;a href=#official-playback-position&gt;official
+    playback position&lt;/a&gt;, not the &lt;a href=#current-playback-position&gt;current playback
+    position&lt;/a&gt;.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Wait until the user agent has established whether or not the
@@ -30277,7 +30298,7 @@
   speed with its new media controller&lt;/dfn&gt;, it must &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; that &lt;a href=#media-element&gt;media element&lt;/a&gt;
   to the &lt;code&gt;&lt;a href=#mediacontroller&gt;MediaController&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#media-controller-position&gt;media controller
   position&lt;/a&gt; relative to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s
-  timeline, discarding any resulting exceptions.&lt;/p&gt;
+  timeline.&lt;/p&gt;
 
   &lt;p&gt;When the user agent is to &lt;dfn id=seek-the-media-controller&gt;seek the media controller&lt;/dfn&gt; to
   a particular &lt;var title=&quot;&quot;&gt;new playback position&lt;/var&gt;, it must
@@ -30294,9 +30315,8 @@
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#dom-media-seek title=dom-media-seek&gt;Seek&lt;/a&gt; each &lt;a href=#slaved-media-elements title=&quot;slaved media elements&quot;&gt;slaved media element&lt;/a&gt; to the
    &lt;var title=&quot;&quot;&gt;new playback position&lt;/var&gt; relative to the
-   &lt;a href=#media-element&gt;media element&lt;/a&gt; timeline, discarding any resulting
-   exceptions.&lt;/li&gt; &lt;!-- i.e. &quot;bring the media element up to speed
-   with its new media controller&quot; --&gt;
+   &lt;a href=#media-element&gt;media element&lt;/a&gt; timeline.&lt;/li&gt; &lt;!-- i.e. &quot;bring the
+   media element up to speed with its new media controller&quot; --&gt;
 
   &lt;/ol&gt;&lt;p&gt;A &lt;code&gt;&lt;a href=#mediacontroller&gt;MediaController&lt;/a&gt;&lt;/code&gt; is a &lt;dfn id=blocked-media-controller&gt;blocked media
   controller&lt;/dfn&gt; if the &lt;code&gt;&lt;a href=#mediacontroller&gt;MediaController&lt;/a&gt;&lt;/code&gt; is a

Modified: source
===================================================================
--- source	2011-08-26 20:10:46 UTC (rev 6530)
+++ source	2011-08-29 07:32:31 UTC (rev 6531)
@@ -29430,7 +29430,9 @@
 
       &lt;p&gt;Set the &lt;span&gt;current playback position&lt;/span&gt; to 0.&lt;/p&gt;
 
-      &lt;p&gt;If this changed the &lt;span&gt;current playback position&lt;/span&gt;,
+      &lt;p&gt;Set the &lt;span&gt;official playback position&lt;/span&gt; to 0.&lt;/p&gt;
+
+      &lt;p&gt;If this changed the &lt;span&gt;official playback position&lt;/span&gt;,
       then &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
       event&lt;/span&gt; named &lt;code
       title=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the
@@ -30016,8 +30018,9 @@
 
        &lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current playback position&lt;/span&gt; to the
-       &lt;span&gt;earliest possible position&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current playback position&lt;/span&gt; and the
+       &lt;span&gt;official playback position&lt;/span&gt; to the &lt;span&gt;earliest
+       possible position&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
        &lt;li&gt;
 
@@ -30069,9 +30072,7 @@
         particular start time, then set the &lt;span&gt;initial playback
         position&lt;/span&gt; to that time, &lt;span
         title=&quot;dom-media-seek&quot;&gt;seek&lt;/span&gt; to that time, and let &lt;var
-        title=&quot;&quot;&gt;jumped&lt;/var&gt; be true. Ignore any resulting exceptions
-        (if the position is out of range, it is effectively
-        ignored).&lt;/p&gt;
+        title=&quot;&quot;&gt;jumped&lt;/var&gt; be true.&lt;/p&gt;
 
         &lt;p class=&quot;example&quot;&gt;For example, with media formats that
         support the &lt;cite&gt;Media Fragments URI&lt;/cite&gt; fragment
@@ -30106,16 +30107,15 @@
        &lt;span&gt;current media controller&lt;/span&gt;'s timeline; otherwise,
        &lt;span title=&quot;dom-media-seek&quot;&gt;seek&lt;/span&gt; the &lt;span&gt;media
        element&lt;/span&gt; to the &lt;span&gt;media controller position&lt;/span&gt;,
-       relative to the &lt;span&gt;media element&lt;/span&gt;'s timeline,
-       discarding any resulting exceptions.&lt;/p&gt;&lt;/li&gt; &lt;!-- i.e. &quot;bring
-       the media element up to speed with its new media controller&quot;
-       --&gt; &lt;!-- we do this because otherwise the fragment identifier
-       initial position is lost. Basically this means that if you are
-       attached to a media controller when you load your resource, and
-       you have a fragment identifier with a start time, you'll jump
-       the media controller to that time if it's not already past it.
-       (So if there are several, you'll jump the media controller to
-       the furthest one in the timeline.) --&gt;
+       relative to the &lt;span&gt;media element&lt;/span&gt;'s timeline.&lt;/p&gt;&lt;/li&gt;
+       &lt;!-- i.e. &quot;bring the media element up to speed with its new
+       media controller&quot; --&gt; &lt;!-- we do this because otherwise the
+       fragment identifier initial position is lost. Basically this
+       means that if you are attached to a media controller when you
+       load your resource, and you have a fragment identifier with a
+       start time, you'll jump the media controller to that time if
+       it's not already past it. (So if there are several, you'll jump
+       the media controller to the furthest one in the timeline.) --&gt;
 
        &lt;li&gt;
 
@@ -30528,7 +30528,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the &lt;span&gt;current playback position&lt;/span&gt;, in seconds.&lt;/p&gt;
+    &lt;p&gt;Returns the &lt;span&gt;official playback position&lt;/span&gt;, in seconds.&lt;/p&gt;
 
     &lt;p&gt;Can be set, to seek to the given time.&lt;p&gt;
 
@@ -30643,16 +30643,26 @@
   &lt;span&gt;current playback position&lt;/span&gt; is a time on the &lt;span&gt;media
   timeline&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;&lt;span title=&quot;media element&quot;&gt;Media elements&lt;/span&gt; also have an
+  &lt;dfn&gt;official playback position&lt;/dfn&gt;, which must initially be set
+  to zero seconds. The &lt;span&gt;official playback position&lt;/span&gt; is an
+  approximation of the &lt;span&gt;current playback position&lt;/span&gt;
+  that is kept stable while scripts are running.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-media-currentTime&quot;&gt;&lt;code&gt;currentTime&lt;/code&gt;&lt;/dfn&gt;
-  attribute must, on getting, return the &lt;span&gt;current playback
-  position&lt;/span&gt;, expressed in seconds. On setting,
-  if the &lt;span&gt;media element&lt;/span&gt; has a &lt;span&gt;current media
-  controller&lt;/span&gt;, then it must throw an
-  &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception; otherwise,
-  the user agent
-  must &lt;span title=&quot;dom-media-seek&quot;&gt;seek&lt;/span&gt; to the new value
-  (which might raise an exception).&lt;/p&gt;
+  attribute must, on getting, return the &lt;span&gt;official playback
+  position&lt;/span&gt;, expressed in seconds. On setting, if the
+  &lt;span&gt;media element&lt;/span&gt; has a &lt;span&gt;current media
+  controller&lt;/span&gt;, then the user agent must throw an
+  &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception; otherwise, if the
+  &lt;span&gt;media element&lt;/span&gt;'s &lt;code
+  title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; is &lt;code
+  title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, then it must
+  raise an &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception; otherwise, the it
+  must set the &lt;span&gt;official playback position&lt;/span&gt; to the new
+  value and then &lt;span title=&quot;dom-media-seek&quot;&gt;seek&lt;/span&gt; to the new
+  value.&lt;/p&gt;
 
   &lt;p&gt;&lt;span title=&quot;media element&quot;&gt;Media elements&lt;/span&gt; have an
   &lt;dfn&gt;initial playback position&lt;/dfn&gt;, which must initially (i.e. in
@@ -31333,7 +31343,8 @@
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire
    a simple event&lt;/span&gt; named &lt;code
-   title=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the element.&lt;/p&gt;&lt;/li&gt;
+   title=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the
+   element.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire
    a simple event&lt;/span&gt; named &lt;code title=&quot;event-media-ended&quot;&gt;ended&lt;/code&gt;
@@ -31352,7 +31363,8 @@
 
    &lt;li&gt;&lt;p&gt;The user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire
    a simple event&lt;/span&gt; named &lt;code
-   title=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the element.&lt;/p&gt;&lt;/li&gt;
+   title=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the
+   element.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -31441,9 +31453,9 @@
     &lt;p class=&quot;note&quot;&gt;This &lt;a href=&quot;#seekUpdate&quot;&gt;will cause&lt;/a&gt; the user
     agent to &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
     event&lt;/span&gt; named &lt;code
-    title=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the &lt;span&gt;media
-    element&lt;/span&gt;.&lt;/p&gt; &lt;!-- if we're already playing at this point,
-    it might also fire 'waiting' --&gt;
+    title=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the
+    &lt;span&gt;media element&lt;/span&gt;.&lt;/p&gt; &lt;!-- if we're already playing at
+    this point, it might also fire 'waiting' --&gt;
 
    &lt;/li&gt;
 
@@ -31541,6 +31553,9 @@
      event&lt;/span&gt; named &lt;code title=&quot;event-media-pause&quot;&gt;pause&lt;/code&gt;
      at the element.&lt;/p&gt;&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;official playback position&lt;/span&gt; to the
+     &lt;span&gt;current playback position&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
     &lt;/ol&gt;
 
    &lt;/li&gt;
@@ -31594,6 +31609,11 @@
   playback rate) the client doesn't actually have to drop or
   interpolate any frames.&lt;/p&gt;
 
+  &lt;p&gt;Any time the user agent &lt;span title=&quot;provide a stable
+  state&quot;&gt;provides a stable state&lt;/span&gt;, the &lt;span&gt;official playback
+  position&lt;/span&gt; must be set to the &lt;span&gt;current playback
+  position&lt;/span&gt;.&lt;/p&gt;
+
   &lt;p&gt;When the &lt;span&gt;direction of playback&lt;/span&gt; is backwards, any
   corresponding audio must be muted. When the &lt;span&gt;effective playback
   rate&lt;/span&gt; is so low or so high that the user agent cannot play
@@ -31931,10 +31951,8 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;span&gt;media element&lt;/span&gt;'s &lt;code
    title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; is &lt;code
-   title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, then raise an
-   &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception (if the seek was in
-   response to a DOM method call or setting of an IDL attribute), and
-   abort these steps.&lt;/p&gt;&lt;/li&gt;
+   title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the element's &lt;code
    title=&quot;dom-media-seeking&quot;&gt;seeking&lt;/code&gt; IDL attribute is true,
@@ -31994,6 +32012,12 @@
     element.&lt;/p&gt; &lt;!-- also, timeupdate --&gt;
     &lt;!-- also, it will do the &quot;report the controller state&quot; thing --&gt;
 
+    &lt;p class=&quot;note&quot;&gt;The &lt;code
+    title=&quot;dom-media-currentTime&quot;&gt;currentTime&lt;/code&gt; attribute does
+    not get updated asynchronously, as it returns the &lt;span&gt;official
+    playback position&lt;/span&gt;, not the &lt;span&gt;current playback
+    position&lt;/span&gt;.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Wait until the user agent has established whether or not the
@@ -33108,7 +33132,7 @@
   title=&quot;dom-media-seek&quot;&gt;seek&lt;/span&gt; that &lt;span&gt;media element&lt;/span&gt;
   to the &lt;code&gt;MediaController&lt;/code&gt;'s &lt;span&gt;media controller
   position&lt;/span&gt; relative to the &lt;span&gt;media element&lt;/span&gt;'s
-  timeline, discarding any resulting exceptions.&lt;/p&gt;
+  timeline.&lt;/p&gt;
 
   &lt;p&gt;When the user agent is to &lt;dfn&gt;seek the media controller&lt;/dfn&gt; to
   a particular &lt;var title=&quot;&quot;&gt;new playback position&lt;/var&gt;, it must
@@ -33129,9 +33153,8 @@
    &lt;li&gt;&lt;p&gt;&lt;span title=&quot;dom-media-seek&quot;&gt;Seek&lt;/span&gt; each &lt;span
    title=&quot;slaved media elements&quot;&gt;slaved media element&lt;/span&gt; to the
    &lt;var title=&quot;&quot;&gt;new playback position&lt;/var&gt; relative to the
-   &lt;span&gt;media element&lt;/span&gt; timeline, discarding any resulting
-   exceptions.&lt;/p&gt;&lt;/li&gt; &lt;!-- i.e. &quot;bring the media element up to speed
-   with its new media controller&quot; --&gt;
+   &lt;span&gt;media element&lt;/span&gt; timeline.&lt;/p&gt;&lt;/li&gt; &lt;!-- i.e. &quot;bring the
+   media element up to speed with its new media controller&quot; --&gt;
 
   &lt;/ol&gt;
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013397.html">[html5] r6530 - [giow] (0) Drop onundo and onredo. Editing and undo	specs will take care of this.
</A></li>
	<LI>Next message: <A HREF="013399.html">[html5] r6532 - [e] (0) Remove bits now specced in DOMPARSING spec.	Fixing http://www.w3.org/Bug [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13398">[ date ]</a>
              <a href="thread.html#13398">[ thread ]</a>
              <a href="subject.html#13398">[ subject ]</a>
              <a href="author.html#13398">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
