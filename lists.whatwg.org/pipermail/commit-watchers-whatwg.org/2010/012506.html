<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r5639 - [giow] (2) Revamp how &lt;img&gt; loading works. Fixing	http://www.w3.org/Bugs/Public/ [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5639%20-%20%5Bgiow%5D%20%282%29%20Revamp%20how%20%3Cimg%3E%20loading%20works.%20Fixing%0A%09http%3A//www.w3.org/Bugs/Public/%20%5B...%5D&In-Reply-To=%3C20101019000940.056BD805818F%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012505.html">
   <LINK REL="Next"  HREF="012507.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r5639 - [giow] (2) Revamp how &lt;img&gt; loading works. Fixing	http://www.w3.org/Bugs/Public/ [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5639%20-%20%5Bgiow%5D%20%282%29%20Revamp%20how%20%3Cimg%3E%20loading%20works.%20Fixing%0A%09http%3A//www.w3.org/Bugs/Public/%20%5B...%5D&In-Reply-To=%3C20101019000940.056BD805818F%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r5639 - [giow] (2) Revamp how &lt;img&gt; loading works. Fixing	http://www.w3.org/Bugs/Public/ [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Oct 18 17:09:39 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="012505.html">[html5] r5638 - [giow] (2) Add in some hard-coded limits for	dealing with unclosed formatting el [...]
</A></li>
        <LI>Next message: <A HREF="012507.html">[html5] r5640 - [giow] (2) compat requires animated GIFs to play	together (hamster dance strikes [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12506">[ date ]</a>
              <a href="thread.html#12506">[ thread ]</a>
              <a href="subject.html#12506">[ subject ]</a>
              <a href="author.html#12506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-10-18 17:09:38 -0700 (Mon, 18 Oct 2010)
New Revision: 5639

Modified:
   complete.html
   index
   source
Log:
[giow] (2) Revamp how &lt;img&gt; loading works.
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=9895">http://www.w3.org/Bugs/Public/show_bug.cgi?id=9895</A>

Modified: complete.html
===================================================================
--- complete.html	2010-10-15 22:56:11 UTC (rev 5638)
+++ complete.html	2010-10-19 00:09:38 UTC (rev 5639)
@@ -214,7 +214,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;Web Applications 1.0&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 15 October 2010&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 19 October 2010&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -20553,8 +20553,7 @@
 
   &lt;p&gt;The requirements on the &lt;code title=attr-img-alt&gt;&lt;a href=#attr-img-alt&gt;alt&lt;/a&gt;&lt;/code&gt;
   attribute's value are described &lt;a href=#alt&gt;in the next
-  section&lt;/a&gt;.
-  &lt;/p&gt;
+  section&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; must not be used as a layout tool. In
   particular, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; elements should not be used to display
@@ -20563,24 +20562,80 @@
 
   &lt;div class=impl&gt;
 
-  &lt;hr&gt;&lt;p&gt;Unless the user agent cannot support images, or its support for
-  images has been disabled, or the user agent only fetches elements on
-  demand, then, when an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; is created with a &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, and whenever the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is set subsequently, the
-  user agent must run the following steps:&lt;/p&gt; &lt;!-- Note how this does
-  NOT happen when the base URL changes. --&gt;
+  &lt;hr&gt;&lt;p&gt;An &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; is always in one of the following states:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the element's &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt;
-   attribute's value is the empty string, then &lt;a href=#queue-a-task&gt;queue a
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=img-none title=img-none&gt;Unavailable&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent hasn't obtained any image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=img-inc title=img-inc&gt;Partially available&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained some of the image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=img-all title=img-all&gt;Completely available&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained all of the image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=img-error title=img-error&gt;Broken&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained all of the image data that it can,
+   but it cannot decode the image (e.g. the image is corrupted, or the
+   format is not supported, or no data could be obtained).&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is either in the &lt;a href=#img-inc title=img-inc&gt;partially available&lt;/a&gt; state or in the &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt; state, it is said to be
+  &lt;dfn id=img-yes title=img-yes&gt;available&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is initially &lt;a href=#img-none title=img-none&gt;unavailable&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;User agents may obtain images immediately or on demand.&lt;/p&gt;
+
+  &lt;p&gt;A user agent that obtains images immediately must synchronously
+  &lt;a href=#update-the-image-data&gt;update the image data&lt;/a&gt; of an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element
+  whenever that element is either created with a &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, or has its &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set, changed, or
+  removed.&lt;/p&gt; &lt;!-- Note how this does NOT happen when the base URL
+  changes. --&gt;
+
+  &lt;p&gt;A user agent that obtains images on demand must &lt;a href=#update-the-image-data&gt;update the
+  image data&lt;/a&gt; of an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element whenever it needs
+  the image data (i.e. on demand), but only if the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+  element has a &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, and
+  if it has not &lt;a href=#update-the-image-data title=&quot;update the image data&quot;&gt;updated the image
+  data&lt;/a&gt; since the last time the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute was set. When an
+  &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt;
+  attribute is changed or removed, if the user agent only obtains
+  images on demand, the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element must return to the
+  &lt;a href=#img-none title=img-none&gt;unavailable&lt;/a&gt; state.&lt;/p&gt; &lt;!-- Note how
+  this does NOT happen when the base URL changes. --&gt;
+
+  &lt;p&gt;When the user agent is to &lt;dfn id=update-the-image-data&gt;update the image data&lt;/dfn&gt; of an
+  &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element, it must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Return the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element to the &lt;a href=#img-none title=img-none&gt;unavailable&lt;/a&gt; state.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If an instance of the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt;
+   algorithm is still running for this element, then abort that
+   algorithm, discarding any pending &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; generated by that
+   algorithm.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Forget the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's current image data, if
+   any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the user agent cannot support images, or its support for
+   images has been disabled, then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the element's &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt;
+   attribute's value is the empty string, then set the element to the
+   &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state, &lt;a href=#queue-a-task&gt;queue a
    task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element,
    and abort these steps.&lt;/li&gt;
 
    &lt;li&gt;
 
     &lt;p&gt;Otherwise, &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the value
-    of that attribute, relative to the element, and if that is
-    successful must then &lt;a href=#fetch&gt;fetch&lt;/a&gt; that resource.&lt;/p&gt; &lt;!--
-    http-origin privacy sensitive --&gt;
+    of the element's &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute,
+    relative to the element, and, if that is successful,
+    &lt;a href=#fetch&gt;fetch&lt;/a&gt; that resource.&lt;/p&gt; &lt;!-- http-origin privacy
+    sensitive --&gt;
 
+    &lt;p&gt;The resouce obtained in this fashion is the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+    element's image data.&lt;/p&gt;
+
     &lt;!-- same text in &lt;input type=image&gt; section and similar text
     elsewhere --&gt; &lt;p&gt;Fetching the image must &lt;a href=#delay-the-load-event&gt;delay the load
     event&lt;/a&gt; of the element's document until the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a
@@ -20592,26 +20647,49 @@
     conjunction with scripting, though scripting isn't actually
     necessary to carry out such an attack). User agents may implement
     &lt;a href=#origin title=origin&gt;cross-origin&lt;/a&gt; access control policies
-    that mitigate this attack.&lt;/p&gt;
+    that mitigate this attack, but unfortunately such policies are
+    typically not compatible with existing Web content.&lt;/p&gt;
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;If the image is in a supported image type and its dimensions are
-  known, then the image is said to be &lt;dfn id=img-available title=img-available&gt;&lt;i&gt;available&lt;/i&gt;&lt;/dfn&gt; (this affects exactly
-  what the element represents, as defined below). This can be true
-  even before the image is completely downloaded, if the user agent
-  supports incremental rendering of images; in such cases, each &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a
-  task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; while
-  the image is being &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must update
-  the presentation of the image appropriately. It can also stop being
-  true, e.g. if the user agent finds, after obtaining the image's
-  dimensions, that the image data is actually fatally corrupted.&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;Each &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task
+  source&lt;/a&gt; while the image is being &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must set the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's
+  state to &lt;a href=#img-inc title=img-inc&gt;partially available&lt;/a&gt; and update
+  the presentation of the image appropriately.&lt;/p&gt;
 
-  &lt;p&gt;If the image was not fetched (e.g. because the UA's image support
-  is disabled, or because the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt;
-  attribute's value is the empty string, or if the conditions in the
-  previous paragraph are not met), then the image is &lt;em&gt;not&lt;/em&gt; &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
+  &lt;p id=img-load&gt;The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is
+  &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking
+  task source&lt;/a&gt; once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must act as appropriate given the
+  following alternatives:&lt;/p&gt;
 
+  &lt;dl class=switch&gt;&lt;dt&gt;If the download was successful&lt;/dt&gt;
+
+   &lt;dd&gt;Set the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element to the &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt; state, update the
+   presentation of the image appropriately, and &lt;a href=#queue-a-task&gt;queue a
+   task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-load&gt;load&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/dd&gt;
+
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+   &lt;dd&gt;Set the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element to the &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state, and &lt;a href=#queue-a-task&gt;queue a
+   task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;If at any point the user agent discovers that the image data is
+  corrupted in some fatal way, or that the image is not in a supported
+  file format, then the user agent must set the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+  element to the &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state. If the
+  &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; algorithm is still running for
+  this element, then the user agent must also abort that algorithm,
+  discarding any pending &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt;
+  generated by that algorithm, and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+  &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+  element.&lt;/p&gt;
+
+  &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is in the &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt; state &lt;em&gt;and&lt;/em&gt; the
+  user agent can completely decode the media data without errors, then
+  the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is said to be &lt;dfn id=img-good title=img-good&gt;fully decodable&lt;/dfn&gt;.&lt;/p&gt;
+
   &lt;p&gt;Whether the image is fetched successfully or not (e.g. whether
   the response code was a 2xx code &lt;a href=#concept-http-equivalent-codes title=concept-http-equivalent-codes&gt;or equivalent&lt;/a&gt;) must be
   ignored when determining the image's type and whether it is a valid
@@ -20639,27 +20717,7 @@
   &lt;p&gt;This specification does not specify which image types are to be
   supported.&lt;/p&gt;
 
-  &lt;p id=img-load&gt;The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is
-  &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking
-  task source&lt;/a&gt; once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt;, must act as appropriate given the
-  following alternatives:&lt;/p&gt;
-
-  &lt;dl class=switch&gt;&lt;dt&gt;If the download was successful and the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt;
-   named &lt;code title=event-load&gt;load&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
-   element (this happens after &lt;code title=dom-img-complete&gt;&lt;a href=#dom-img-complete&gt;complete&lt;/a&gt;&lt;/code&gt; starts returning
-   true).&lt;/dd&gt;
-
-   &lt;dt&gt;Otherwise (the fetching process failed without a response from
-   the remote server, or completed but the image is not a supported
-   image)&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt;
-   named &lt;code title=event-error&gt;error&lt;/code&gt; on the
-   &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for these &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; is the &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation
+  &lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for these &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; is the &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation
   task source&lt;/a&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;What an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element represents depends on the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code title=attr-img-alt&gt;&lt;a href=#attr-img-alt&gt;alt&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
@@ -20674,9 +20732,9 @@
     the content, redundant with some other information in the
     document.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt; and the
+    &lt;p&gt;If the image is &lt;a href=#img-yes title=img-yes&gt;available&lt;/a&gt; and the
     user agent is configured to display that image, then the element
-    &lt;a href=#represents&gt;represents&lt;/a&gt; the image specified by the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;a href=#represents&gt;represents&lt;/a&gt; the element's image data.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, the element &lt;a href=#represents&gt;represents&lt;/a&gt; nothing, and may
     be omitted completely from the rendering. User agents may provide
@@ -20694,9 +20752,9 @@
     &lt;p&gt;The image is a key part of the content; the &lt;code title=attr-img-alt&gt;&lt;a href=#attr-img-alt&gt;alt&lt;/a&gt;&lt;/code&gt; attribute gives a textual
     equivalent or replacement for the image.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt; and the
+    &lt;p&gt;If the image is &lt;a href=#img-yes title=img-yes&gt;available&lt;/a&gt; and the
     user agent is configured to display that image, then the element
-    &lt;a href=#represents&gt;represents&lt;/a&gt; the image specified by the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;a href=#represents&gt;represents&lt;/a&gt; the element's image data.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, the element &lt;a href=#represents&gt;represents&lt;/a&gt; the text given
     by the &lt;code title=attr-img-alt&gt;&lt;a href=#attr-img-alt&gt;alt&lt;/a&gt;&lt;/code&gt; attribute. User
@@ -20717,16 +20775,15 @@
     is a key part of the content but that a textual replacement for
     the image was not available when the image was generated.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;, the
-    element &lt;a href=#represents&gt;represents&lt;/a&gt; the image specified by the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;p&gt;If the image is &lt;a href=#img-yes title=img-yes&gt;available&lt;/a&gt; and the
+    user agent is configured to display that image, then the element
+    &lt;a href=#represents&gt;represents&lt;/a&gt; the element's image data.&lt;/p&gt;
 
-    &lt;p&gt;If the image is not &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt; or
-    if the user agent is not configured to display the image, then the
-    user agent should display some sort of indicator that there is an
-    image that is not being rendered, and may, if requested by the
-    user, or if so configured, or when required to provide contextual
-    information in response to navigation, provide caption information
-    for the image, derived as follows:&lt;/p&gt;
+    &lt;p&gt;Otherwise, the user agent should display some sort of indicator
+    that there is an image that is not being rendered, and may, if
+    requested by the user, or if so configured, or when required to
+    provide contextual information in response to navigation, provide
+    caption information for the image, derived as follows:&lt;/p&gt;
 
     &lt;ol&gt;&lt;!-- when editing this list, search for the two other occurrences
      of 'critical-no-alt' --&gt;&lt;li&gt;&lt;p&gt;If the image has a &lt;code title=attr-title&gt;&lt;a href=#the-title-attribute&gt;title&lt;/a&gt;&lt;/code&gt;
@@ -20849,9 +20906,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns true if the image has been downloaded, decoded, and
-    found to be valid, or if no image is specified; otherwise, returns
-    false.&lt;/p&gt;
+    &lt;p&gt;Returns true if the image has been completely downloaded or if
+    no image is specified; otherwise, returns false.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -20870,9 +20926,9 @@
   rendered width and height of the image, in CSS pixels, if the image
   is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, and is being rendered to a visual
   medium; or else the intrinsic width and height of the image, in CSS
-  pixels, if the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt; but
+  pixels, if the image is &lt;i title=img-available&gt;available&lt;/i&gt; but
   not being rendered to a visual medium; or else 0, if the image is
-  not &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+  not &lt;i title=img-available&gt;available&lt;/i&gt;. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;On setting, they must act as if they &lt;a href=#reflect title=reflect&gt;reflected&lt;/a&gt; the respective content attributes
   of the same name.&lt;/p&gt;
@@ -20880,17 +20936,16 @@
   &lt;p&gt;The IDL attributes &lt;dfn id=dom-img-naturalwidth title=dom-img-naturalWidth&gt;&lt;code&gt;naturalWidth&lt;/code&gt;&lt;/dfn&gt; and
   &lt;dfn id=dom-img-naturalheight title=dom-img-naturalHeight&gt;&lt;code&gt;naturalHeight&lt;/code&gt;&lt;/dfn&gt;
   must return the intrinsic width and height of the image, in CSS
-  pixels, if the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;, or
+  pixels, if the image is &lt;i title=img-available&gt;available&lt;/i&gt;, or
   else 0. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The IDL attribute &lt;dfn id=dom-img-complete title=dom-img-complete&gt;&lt;code&gt;complete&lt;/code&gt;&lt;/dfn&gt; must return
-  true if either the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute
-  is omitted, or its value is the empty string, or if the user agent
-  has fetched the image specified in the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute and it is in a supported
-  image type (i.e. it was decoded without fatal errors), even if the
-  final &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; queued by the
-  &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; for the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; of the image resource has not yet been
-  processed. Otherwise, the attribute must return false.&lt;/p&gt;
+  true if any of the following conditions is true:&lt;/p&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;The &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is omitted.
+   &lt;li&gt;The &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute's value is the empty string.
+   &lt;li&gt;The final &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; has been &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt;, but has not yet been run, and the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not in the &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state.
+   &lt;li&gt;The &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt;.
+  &lt;/ul&gt;&lt;p&gt;Otherwise, the attribute must return false.&lt;/p&gt;
 
   &lt;p class=note&gt;The value of &lt;code title=dom-img-complete&gt;&lt;a href=#dom-img-complete&gt;complete&lt;/a&gt;&lt;/code&gt; can thus change while a
   &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is executing.&lt;/p&gt;
@@ -21298,7 +21353,7 @@
 at least that would look good on the cover of a blue book.&lt;/p&gt;&lt;/pre&gt;
 
    &lt;p&gt;This example shows how the alternative text should be written
-   such that if the image isn't &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;, and the text is used instead,
+   such that if the image isn't &lt;i title=img-available&gt;available&lt;/i&gt;, and the text is used instead,
    the text flows seamlessly into the surrounding text, as if the
    image had never been there in the first place.&lt;/p&gt;
 
@@ -31516,11 +31571,9 @@
   exception.&lt;/p&gt; &lt;!-- drawImage() has an equivalent paragraph --&gt;
 
   &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-img-complete&gt;&lt;a href=#dom-img-complete&gt;complete&lt;/a&gt;&lt;/code&gt; attribute is false or whose
-  &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is omitted or empty,
-  or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either
-  &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
+  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
   implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
   equivalent paragraph --&gt;
 
@@ -32999,11 +33052,9 @@
   exception.&lt;/p&gt; &lt;!-- createPattern() has an equivalent paragraph --&gt;
 
   &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-img-complete&gt;&lt;a href=#dom-img-complete&gt;complete&lt;/a&gt;&lt;/code&gt; attribute is false or whose
-  &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is omitted or empty,
-  or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either
-  &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
+  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
   implementation must return without drawing anything.&lt;/p&gt; &lt;!--
   createPattern() has an equivalent paragraph --&gt;
 
@@ -48297,10 +48348,9 @@
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; argument is present and not
-   null, but the given &lt;code&gt;img&lt;/code&gt; element's &lt;code
-   title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is false or its
-   &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is omitted or
-   empty, then let &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
+   null, but the given &lt;code&gt;img&lt;/code&gt; element is not in the &lt;span
+   title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state, then let &lt;var
+   title=&quot;&quot;&gt;icon&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; argument is present and not
    null, then copy the image data from that &lt;code&gt;img&lt;/code&gt; element,
@@ -48974,10 +49024,8 @@
       only two entries, or there are three, and the third entry is
       an &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -48990,10 +49038,8 @@
       entries, or there are four, and the fourth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -49006,10 +49052,8 @@
       entries, or there are five, and the fifth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -49021,10 +49065,8 @@
       entries, or there are four, and the fourth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -86438,7 +86480,7 @@
   does not &lt;a href=#represents title=represents&gt;represent&lt;/a&gt; an image, but the
   element already has intrinsic dimensions (e.g. from the
   &lt;a href=#dimension-attributes&gt;dimension attributes&lt;/a&gt; or CSS rules), and either the user
-  agent has reason to believe that the image will become &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;&lt;!--input-img-available also--&gt;
+  agent has reason to believe that the image will become &lt;i title=img-available&gt;available&lt;/i&gt;&lt;!--input-img-available also--&gt;
   and be rendered in due course or the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is in
   &lt;a href=#quirks-mode&gt;quirks mode&lt;/a&gt;, the element is expected to be treated as a
   replaced element whose content is the text that the element

Modified: index
===================================================================
--- index	2010-10-15 22:56:11 UTC (rev 5638)
+++ index	2010-10-19 00:09:38 UTC (rev 5639)
@@ -218,7 +218,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;HTML5 (including next generation additions still in development)&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 15 October 2010&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 19 October 2010&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -20530,8 +20530,7 @@
 
   &lt;p&gt;The requirements on the &lt;code title=attr-img-alt&gt;&lt;a href=#attr-img-alt&gt;alt&lt;/a&gt;&lt;/code&gt;
   attribute's value are described &lt;a href=#alt&gt;in the next
-  section&lt;/a&gt;.
-  &lt;/p&gt;
+  section&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; must not be used as a layout tool. In
   particular, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; elements should not be used to display
@@ -20540,24 +20539,80 @@
 
   &lt;div class=impl&gt;
 
-  &lt;hr&gt;&lt;p&gt;Unless the user agent cannot support images, or its support for
-  images has been disabled, or the user agent only fetches elements on
-  demand, then, when an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; is created with a &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, and whenever the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is set subsequently, the
-  user agent must run the following steps:&lt;/p&gt; &lt;!-- Note how this does
-  NOT happen when the base URL changes. --&gt;
+  &lt;hr&gt;&lt;p&gt;An &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; is always in one of the following states:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the element's &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt;
-   attribute's value is the empty string, then &lt;a href=#queue-a-task&gt;queue a
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=img-none title=img-none&gt;Unavailable&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent hasn't obtained any image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=img-inc title=img-inc&gt;Partially available&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained some of the image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=img-all title=img-all&gt;Completely available&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained all of the image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=img-error title=img-error&gt;Broken&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained all of the image data that it can,
+   but it cannot decode the image (e.g. the image is corrupted, or the
+   format is not supported, or no data could be obtained).&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is either in the &lt;a href=#img-inc title=img-inc&gt;partially available&lt;/a&gt; state or in the &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt; state, it is said to be
+  &lt;dfn id=img-yes title=img-yes&gt;available&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is initially &lt;a href=#img-none title=img-none&gt;unavailable&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;User agents may obtain images immediately or on demand.&lt;/p&gt;
+
+  &lt;p&gt;A user agent that obtains images immediately must synchronously
+  &lt;a href=#update-the-image-data&gt;update the image data&lt;/a&gt; of an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element
+  whenever that element is either created with a &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, or has its &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set, changed, or
+  removed.&lt;/p&gt; &lt;!-- Note how this does NOT happen when the base URL
+  changes. --&gt;
+
+  &lt;p&gt;A user agent that obtains images on demand must &lt;a href=#update-the-image-data&gt;update the
+  image data&lt;/a&gt; of an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element whenever it needs
+  the image data (i.e. on demand), but only if the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+  element has a &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, and
+  if it has not &lt;a href=#update-the-image-data title=&quot;update the image data&quot;&gt;updated the image
+  data&lt;/a&gt; since the last time the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute was set. When an
+  &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt;
+  attribute is changed or removed, if the user agent only obtains
+  images on demand, the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element must return to the
+  &lt;a href=#img-none title=img-none&gt;unavailable&lt;/a&gt; state.&lt;/p&gt; &lt;!-- Note how
+  this does NOT happen when the base URL changes. --&gt;
+
+  &lt;p&gt;When the user agent is to &lt;dfn id=update-the-image-data&gt;update the image data&lt;/dfn&gt; of an
+  &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element, it must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Return the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element to the &lt;a href=#img-none title=img-none&gt;unavailable&lt;/a&gt; state.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If an instance of the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt;
+   algorithm is still running for this element, then abort that
+   algorithm, discarding any pending &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; generated by that
+   algorithm.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Forget the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's current image data, if
+   any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the user agent cannot support images, or its support for
+   images has been disabled, then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the element's &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt;
+   attribute's value is the empty string, then set the element to the
+   &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state, &lt;a href=#queue-a-task&gt;queue a
    task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element,
    and abort these steps.&lt;/li&gt;
 
    &lt;li&gt;
 
     &lt;p&gt;Otherwise, &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the value
-    of that attribute, relative to the element, and if that is
-    successful must then &lt;a href=#fetch&gt;fetch&lt;/a&gt; that resource.&lt;/p&gt; &lt;!--
-    http-origin privacy sensitive --&gt;
+    of the element's &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute,
+    relative to the element, and, if that is successful,
+    &lt;a href=#fetch&gt;fetch&lt;/a&gt; that resource.&lt;/p&gt; &lt;!-- http-origin privacy
+    sensitive --&gt;
 
+    &lt;p&gt;The resouce obtained in this fashion is the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+    element's image data.&lt;/p&gt;
+
     &lt;!-- same text in &lt;input type=image&gt; section and similar text
     elsewhere --&gt; &lt;p&gt;Fetching the image must &lt;a href=#delay-the-load-event&gt;delay the load
     event&lt;/a&gt; of the element's document until the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a
@@ -20569,26 +20624,49 @@
     conjunction with scripting, though scripting isn't actually
     necessary to carry out such an attack). User agents may implement
     &lt;a href=#origin title=origin&gt;cross-origin&lt;/a&gt; access control policies
-    that mitigate this attack.&lt;/p&gt;
+    that mitigate this attack, but unfortunately such policies are
+    typically not compatible with existing Web content.&lt;/p&gt;
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;If the image is in a supported image type and its dimensions are
-  known, then the image is said to be &lt;dfn id=img-available title=img-available&gt;&lt;i&gt;available&lt;/i&gt;&lt;/dfn&gt; (this affects exactly
-  what the element represents, as defined below). This can be true
-  even before the image is completely downloaded, if the user agent
-  supports incremental rendering of images; in such cases, each &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a
-  task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; while
-  the image is being &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must update
-  the presentation of the image appropriately. It can also stop being
-  true, e.g. if the user agent finds, after obtaining the image's
-  dimensions, that the image data is actually fatally corrupted.&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;Each &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task
+  source&lt;/a&gt; while the image is being &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must set the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's
+  state to &lt;a href=#img-inc title=img-inc&gt;partially available&lt;/a&gt; and update
+  the presentation of the image appropriately.&lt;/p&gt;
 
-  &lt;p&gt;If the image was not fetched (e.g. because the UA's image support
-  is disabled, or because the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt;
-  attribute's value is the empty string, or if the conditions in the
-  previous paragraph are not met), then the image is &lt;em&gt;not&lt;/em&gt; &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
+  &lt;p id=img-load&gt;The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is
+  &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking
+  task source&lt;/a&gt; once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must act as appropriate given the
+  following alternatives:&lt;/p&gt;
 
+  &lt;dl class=switch&gt;&lt;dt&gt;If the download was successful&lt;/dt&gt;
+
+   &lt;dd&gt;Set the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element to the &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt; state, update the
+   presentation of the image appropriately, and &lt;a href=#queue-a-task&gt;queue a
+   task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-load&gt;load&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/dd&gt;
+
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+   &lt;dd&gt;Set the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element to the &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state, and &lt;a href=#queue-a-task&gt;queue a
+   task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;If at any point the user agent discovers that the image data is
+  corrupted in some fatal way, or that the image is not in a supported
+  file format, then the user agent must set the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+  element to the &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state. If the
+  &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; algorithm is still running for
+  this element, then the user agent must also abort that algorithm,
+  discarding any pending &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt;
+  generated by that algorithm, and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+  &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+  element.&lt;/p&gt;
+
+  &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is in the &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt; state &lt;em&gt;and&lt;/em&gt; the
+  user agent can completely decode the media data without errors, then
+  the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is said to be &lt;dfn id=img-good title=img-good&gt;fully decodable&lt;/dfn&gt;.&lt;/p&gt;
+
   &lt;p&gt;Whether the image is fetched successfully or not (e.g. whether
   the response code was a 2xx code &lt;a href=#concept-http-equivalent-codes title=concept-http-equivalent-codes&gt;or equivalent&lt;/a&gt;) must be
   ignored when determining the image's type and whether it is a valid
@@ -20616,27 +20694,7 @@
   &lt;p&gt;This specification does not specify which image types are to be
   supported.&lt;/p&gt;
 
-  &lt;p id=img-load&gt;The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is
-  &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking
-  task source&lt;/a&gt; once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt;, must act as appropriate given the
-  following alternatives:&lt;/p&gt;
-
-  &lt;dl class=switch&gt;&lt;dt&gt;If the download was successful and the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt;
-   named &lt;code title=event-load&gt;load&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
-   element (this happens after &lt;code title=dom-img-complete&gt;&lt;a href=#dom-img-complete&gt;complete&lt;/a&gt;&lt;/code&gt; starts returning
-   true).&lt;/dd&gt;
-
-   &lt;dt&gt;Otherwise (the fetching process failed without a response from
-   the remote server, or completed but the image is not a supported
-   image)&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt;
-   named &lt;code title=event-error&gt;error&lt;/code&gt; on the
-   &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for these &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; is the &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation
+  &lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for these &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; is the &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation
   task source&lt;/a&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;What an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element represents depends on the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code title=attr-img-alt&gt;&lt;a href=#attr-img-alt&gt;alt&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
@@ -20651,9 +20709,9 @@
     the content, redundant with some other information in the
     document.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt; and the
+    &lt;p&gt;If the image is &lt;a href=#img-yes title=img-yes&gt;available&lt;/a&gt; and the
     user agent is configured to display that image, then the element
-    &lt;a href=#represents&gt;represents&lt;/a&gt; the image specified by the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;a href=#represents&gt;represents&lt;/a&gt; the element's image data.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, the element &lt;a href=#represents&gt;represents&lt;/a&gt; nothing, and may
     be omitted completely from the rendering. User agents may provide
@@ -20671,9 +20729,9 @@
     &lt;p&gt;The image is a key part of the content; the &lt;code title=attr-img-alt&gt;&lt;a href=#attr-img-alt&gt;alt&lt;/a&gt;&lt;/code&gt; attribute gives a textual
     equivalent or replacement for the image.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt; and the
+    &lt;p&gt;If the image is &lt;a href=#img-yes title=img-yes&gt;available&lt;/a&gt; and the
     user agent is configured to display that image, then the element
-    &lt;a href=#represents&gt;represents&lt;/a&gt; the image specified by the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;a href=#represents&gt;represents&lt;/a&gt; the element's image data.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, the element &lt;a href=#represents&gt;represents&lt;/a&gt; the text given
     by the &lt;code title=attr-img-alt&gt;&lt;a href=#attr-img-alt&gt;alt&lt;/a&gt;&lt;/code&gt; attribute. User
@@ -20694,16 +20752,15 @@
     is a key part of the content but that a textual replacement for
     the image was not available when the image was generated.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;, the
-    element &lt;a href=#represents&gt;represents&lt;/a&gt; the image specified by the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;p&gt;If the image is &lt;a href=#img-yes title=img-yes&gt;available&lt;/a&gt; and the
+    user agent is configured to display that image, then the element
+    &lt;a href=#represents&gt;represents&lt;/a&gt; the element's image data.&lt;/p&gt;
 
-    &lt;p&gt;If the image is not &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt; or
-    if the user agent is not configured to display the image, then the
-    user agent should display some sort of indicator that there is an
-    image that is not being rendered, and may, if requested by the
-    user, or if so configured, or when required to provide contextual
-    information in response to navigation, provide caption information
-    for the image, derived as follows:&lt;/p&gt;
+    &lt;p&gt;Otherwise, the user agent should display some sort of indicator
+    that there is an image that is not being rendered, and may, if
+    requested by the user, or if so configured, or when required to
+    provide contextual information in response to navigation, provide
+    caption information for the image, derived as follows:&lt;/p&gt;
 
     &lt;ol&gt;&lt;!-- when editing this list, search for the two other occurrences
      of 'critical-no-alt' --&gt;&lt;li&gt;&lt;p&gt;If the image has a &lt;code title=attr-title&gt;&lt;a href=#the-title-attribute&gt;title&lt;/a&gt;&lt;/code&gt;
@@ -20826,9 +20883,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns true if the image has been downloaded, decoded, and
-    found to be valid, or if no image is specified; otherwise, returns
-    false.&lt;/p&gt;
+    &lt;p&gt;Returns true if the image has been completely downloaded or if
+    no image is specified; otherwise, returns false.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -20847,9 +20903,9 @@
   rendered width and height of the image, in CSS pixels, if the image
   is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, and is being rendered to a visual
   medium; or else the intrinsic width and height of the image, in CSS
-  pixels, if the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt; but
+  pixels, if the image is &lt;i title=img-available&gt;available&lt;/i&gt; but
   not being rendered to a visual medium; or else 0, if the image is
-  not &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+  not &lt;i title=img-available&gt;available&lt;/i&gt;. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;On setting, they must act as if they &lt;a href=#reflect title=reflect&gt;reflected&lt;/a&gt; the respective content attributes
   of the same name.&lt;/p&gt;
@@ -20857,17 +20913,16 @@
   &lt;p&gt;The IDL attributes &lt;dfn id=dom-img-naturalwidth title=dom-img-naturalWidth&gt;&lt;code&gt;naturalWidth&lt;/code&gt;&lt;/dfn&gt; and
   &lt;dfn id=dom-img-naturalheight title=dom-img-naturalHeight&gt;&lt;code&gt;naturalHeight&lt;/code&gt;&lt;/dfn&gt;
   must return the intrinsic width and height of the image, in CSS
-  pixels, if the image is &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;, or
+  pixels, if the image is &lt;i title=img-available&gt;available&lt;/i&gt;, or
   else 0. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The IDL attribute &lt;dfn id=dom-img-complete title=dom-img-complete&gt;&lt;code&gt;complete&lt;/code&gt;&lt;/dfn&gt; must return
-  true if either the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute
-  is omitted, or its value is the empty string, or if the user agent
-  has fetched the image specified in the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute and it is in a supported
-  image type (i.e. it was decoded without fatal errors), even if the
-  final &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; queued by the
-  &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; for the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; of the image resource has not yet been
-  processed. Otherwise, the attribute must return false.&lt;/p&gt;
+  true if any of the following conditions is true:&lt;/p&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;The &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is omitted.
+   &lt;li&gt;The &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute's value is the empty string.
+   &lt;li&gt;The final &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; has been &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt;, but has not yet been run, and the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not in the &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state.
+   &lt;li&gt;The &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt;.
+  &lt;/ul&gt;&lt;p&gt;Otherwise, the attribute must return false.&lt;/p&gt;
 
   &lt;p class=note&gt;The value of &lt;code title=dom-img-complete&gt;&lt;a href=#dom-img-complete&gt;complete&lt;/a&gt;&lt;/code&gt; can thus change while a
   &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is executing.&lt;/p&gt;
@@ -21275,7 +21330,7 @@
 at least that would look good on the cover of a blue book.&lt;/p&gt;&lt;/pre&gt;
 
    &lt;p&gt;This example shows how the alternative text should be written
-   such that if the image isn't &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;, and the text is used instead,
+   such that if the image isn't &lt;i title=img-available&gt;available&lt;/i&gt;, and the text is used instead,
    the text flows seamlessly into the surrounding text, as if the
    image had never been there in the first place.&lt;/p&gt;
 
@@ -31496,11 +31551,9 @@
   exception.&lt;/p&gt; &lt;!-- drawImage() has an equivalent paragraph --&gt;
 
   &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-img-complete&gt;&lt;a href=#dom-img-complete&gt;complete&lt;/a&gt;&lt;/code&gt; attribute is false or whose
-  &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is omitted or empty,
-  or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either
-  &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
+  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
   implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
   equivalent paragraph --&gt;
 
@@ -32979,11 +33032,9 @@
   exception.&lt;/p&gt; &lt;!-- createPattern() has an equivalent paragraph --&gt;
 
   &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-img-complete&gt;&lt;a href=#dom-img-complete&gt;complete&lt;/a&gt;&lt;/code&gt; attribute is false or whose
-  &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is omitted or empty,
-  or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either
-  &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
+  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
   implementation must return without drawing anything.&lt;/p&gt; &lt;!--
   createPattern() has an equivalent paragraph --&gt;
 
@@ -48277,10 +48328,9 @@
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; argument is present and not
-   null, but the given &lt;code&gt;img&lt;/code&gt; element's &lt;code
-   title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is false or its
-   &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is omitted or
-   empty, then let &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
+   null, but the given &lt;code&gt;img&lt;/code&gt; element is not in the &lt;span
+   title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state, then let &lt;var
+   title=&quot;&quot;&gt;icon&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; argument is present and not
    null, then copy the image data from that &lt;code&gt;img&lt;/code&gt; element,
@@ -48954,10 +49004,8 @@
       only two entries, or there are three, and the third entry is
       an &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -48970,10 +49018,8 @@
       entries, or there are four, and the fourth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -48986,10 +49032,8 @@
       entries, or there are five, and the fifth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -49001,10 +49045,8 @@
       entries, or there are four, and the fourth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -82352,7 +82394,7 @@
   does not &lt;a href=#represents title=represents&gt;represent&lt;/a&gt; an image, but the
   element already has intrinsic dimensions (e.g. from the
   &lt;a href=#dimension-attributes&gt;dimension attributes&lt;/a&gt; or CSS rules), and either the user
-  agent has reason to believe that the image will become &lt;i title=img-available&gt;&lt;a href=#img-available&gt;available&lt;/a&gt;&lt;/i&gt;&lt;!--input-img-available also--&gt;
+  agent has reason to believe that the image will become &lt;i title=img-available&gt;available&lt;/i&gt;&lt;!--input-img-available also--&gt;
   and be rendered in due course or the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is in
   &lt;a href=#quirks-mode&gt;quirks mode&lt;/a&gt;, the element is expected to be treated as a
   replaced element whose content is the text that the element

Modified: source
===================================================================
--- source	2010-10-15 22:56:11 UTC (rev 5638)
+++ source	2010-10-19 00:09:38 UTC (rev 5639)
@@ -21931,8 +21931,7 @@
 
   &lt;p&gt;The requirements on the &lt;code title=&quot;attr-img-alt&quot;&gt;alt&lt;/code&gt;
   attribute's value are described &lt;a href=&quot;#alt&quot;&gt;in the next
-  section&lt;/a&gt;.
-  &lt;/p&gt;
+  section&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;img&lt;/code&gt; must not be used as a layout tool. In
   particular, &lt;code&gt;img&lt;/code&gt; elements should not be used to display
@@ -21943,18 +21942,80 @@
 
   &lt;hr&gt;
 
-  &lt;p&gt;Unless the user agent cannot support images, or its support for
-  images has been disabled, or the user agent only fetches elements on
-  demand, then, when an &lt;code&gt;img&lt;/code&gt; is created with a &lt;code
-  title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute, and whenever the &lt;code
-  title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is set subsequently, the
-  user agent must run the following steps:&lt;/p&gt; &lt;!-- Note how this does
-  NOT happen when the base URL changes. --&gt;
+  &lt;p&gt;An &lt;code&gt;img&lt;/code&gt; is always in one of the following states:&lt;/p&gt;
 
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;img-none&quot;&gt;Unavailable&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent hasn't obtained any image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;img-inc&quot;&gt;Partially available&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained some of the image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;img-all&quot;&gt;Completely available&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained all of the image data.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;img-error&quot;&gt;Broken&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dd&gt;The user agent has obtained all of the image data that it can,
+   but it cannot decode the image (e.g. the image is corrupted, or the
+   format is not supported, or no data could be obtained).&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;When an &lt;code&gt;img&lt;/code&gt; element is either in the &lt;span
+  title=&quot;img-inc&quot;&gt;partially available&lt;/span&gt; state or in the &lt;span
+  title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state, it is said to be
+  &lt;dfn title=&quot;img-yes&quot;&gt;available&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;An &lt;code&gt;img&lt;/code&gt; element is initially &lt;span
+  title=&quot;img-none&quot;&gt;unavailable&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;User agents may obtain images immediately or on demand.&lt;/p&gt;
+
+  &lt;p&gt;A user agent that obtains images immediately must synchronously
+  &lt;span&gt;update the image data&lt;/span&gt; of an &lt;code&gt;img&lt;/code&gt; element
+  whenever that element is either created with a &lt;code
+  title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute, or has its &lt;code
+  title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute set, changed, or
+  removed.&lt;/p&gt; &lt;!-- Note how this does NOT happen when the base URL
+  changes. --&gt;
+
+  &lt;p&gt;A user agent that obtains images on demand must &lt;span&gt;update the
+  image data&lt;/span&gt; of an &lt;code&gt;img&lt;/code&gt; element whenever it needs
+  the image data (i.e. on demand), but only if the &lt;code&gt;img&lt;/code&gt;
+  element has a &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute, and
+  if it has not &lt;span title=&quot;update the image data&quot;&gt;updated the image
+  data&lt;/span&gt; since the last time the &lt;code
+  title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute was set. When an
+  &lt;code&gt;img&lt;/code&gt; element's &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt;
+  attribute is changed or removed, if the user agent only obtains
+  images on demand, the &lt;code&gt;img&lt;/code&gt; element must return to the
+  &lt;span title=&quot;img-none&quot;&gt;unavailable&lt;/span&gt; state.&lt;/p&gt; &lt;!-- Note how
+  this does NOT happen when the base URL changes. --&gt;
+
+  &lt;p&gt;When the user agent is to &lt;dfn&gt;update the image data&lt;/dfn&gt; of an
+  &lt;code&gt;img&lt;/code&gt; element, it must run the following steps:&lt;/p&gt;
+
   &lt;ol&gt;
 
+   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;img&lt;/code&gt; element to the &lt;span
+   title=&quot;img-none&quot;&gt;unavailable&lt;/span&gt; state.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If an instance of the &lt;span title=&quot;fetch&quot;&gt;fetching&lt;/span&gt;
+   algorithm is still running for this element, then abort that
+   algorithm, discarding any pending &lt;span
+   title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; generated by that
+   algorithm.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Forget the &lt;code&gt;img&lt;/code&gt; element's current image data, if
+   any.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the user agent cannot support images, or its support for
+   images has been disabled, then abort these steps.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;If the element's &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt;
-   attribute's value is the empty string, then &lt;span&gt;queue a
+   attribute's value is the empty string, then set the element to the
+   &lt;span title=&quot;img-error&quot;&gt;broken&lt;/span&gt; state, &lt;span&gt;queue a
    task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt; named &lt;code
    title=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;code&gt;img&lt;/code&gt; element,
    and abort these steps.&lt;/p&gt;&lt;/li&gt;
@@ -21962,10 +22023,14 @@
    &lt;li&gt;
 
     &lt;p&gt;Otherwise, &lt;span title=&quot;resolve a url&quot;&gt;resolve&lt;/span&gt; the value
-    of that attribute, relative to the element, and if that is
-    successful must then &lt;span&gt;fetch&lt;/span&gt; that resource.&lt;/p&gt; &lt;!--
-    http-origin privacy sensitive --&gt;
+    of the element's &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute,
+    relative to the element, and, if that is successful,
+    &lt;span&gt;fetch&lt;/span&gt; that resource.&lt;/p&gt; &lt;!-- http-origin privacy
+    sensitive --&gt;
 
+    &lt;p&gt;The resouce obtained in this fashion is the &lt;code&gt;img&lt;/code&gt;
+    element's image data.&lt;/p&gt;
+
     &lt;!-- same text in &lt;input type=image&gt; section and similar text
     elsewhere --&gt; &lt;p&gt;Fetching the image must &lt;span&gt;delay the load
     event&lt;/span&gt; of the element's document until the &lt;span
@@ -21979,31 +22044,65 @@
     conjunction with scripting, though scripting isn't actually
     necessary to carry out such an attack). User agents may implement
     &lt;span title=&quot;origin&quot;&gt;cross-origin&lt;/span&gt; access control policies
-    that mitigate this attack.&lt;/p&gt;
+    that mitigate this attack, but unfortunately such policies are
+    typically not compatible with existing Web content.&lt;/p&gt;
 
    &lt;/li&gt;
 
   &lt;/ol&gt;
 
-  &lt;p&gt;If the image is in a supported image type and its dimensions are
-  known, then the image is said to be &lt;dfn
-  title=&quot;img-available&quot;&gt;&lt;i&gt;available&lt;/i&gt;&lt;/dfn&gt; (this affects exactly
-  what the element represents, as defined below). This can be true
-  even before the image is completely downloaded, if the user agent
-  supports incremental rendering of images; in such cases, each &lt;span
-  title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a
-  task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt; while
-  the image is being &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; must update
-  the presentation of the image appropriately. It can also stop being
-  true, e.g. if the user agent finds, after obtaining the image's
-  dimensions, that the image data is actually fatally corrupted.&lt;/p&gt;
+  &lt;p&gt;Each &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span
+  title=&quot;queue a task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task
+  source&lt;/span&gt; while the image is being &lt;span
+  title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; must set the &lt;code&gt;img&lt;/code&gt; element's
+  state to &lt;span title=&quot;img-inc&quot;&gt;partially available&lt;/span&gt; and update
+  the presentation of the image appropriately.&lt;/p&gt;
 
-  &lt;p&gt;If the image was not fetched (e.g. because the UA's image support
-  is disabled, or because the &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt;
-  attribute's value is the empty string, or if the conditions in the
-  previous paragraph are not met), then the image is &lt;em&gt;not&lt;/em&gt; &lt;i
-  title=&quot;img-available&quot;&gt;available&lt;/i&gt;.&lt;/p&gt;
+  &lt;p id=&quot;img-load&quot;&gt;The &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is
+  &lt;span title=&quot;queue a task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking
+  task source&lt;/span&gt; once the resource has been &lt;span
+  title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; must act as appropriate given the
+  following alternatives:&lt;/p&gt;
 
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;If the download was successful&lt;/dt&gt;
+
+   &lt;dd&gt;Set the &lt;code&gt;img&lt;/code&gt; element to the &lt;span
+   title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state, update the
+   presentation of the image appropriately, and &lt;span&gt;queue a
+   task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt; named &lt;code
+   title=&quot;event-load&quot;&gt;load&lt;/code&gt; at the &lt;code&gt;img&lt;/code&gt;
+   element.&lt;/dd&gt;
+
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+   &lt;dd&gt;Set the &lt;code&gt;img&lt;/code&gt; element to the &lt;span
+   title=&quot;img-error&quot;&gt;broken&lt;/span&gt; state, and &lt;span&gt;queue a
+   task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt; named &lt;code
+   title=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;code&gt;img&lt;/code&gt;
+   element.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;If at any point the user agent discovers that the image data is
+  corrupted in some fatal way, or that the image is not in a supported
+  file format, then the user agent must set the &lt;code&gt;img&lt;/code&gt;
+  element to the &lt;span title=&quot;img-error&quot;&gt;broken&lt;/span&gt; state. If the
+  &lt;span title=&quot;fetch&quot;&gt;fetching&lt;/span&gt; algorithm is still running for
+  this element, then the user agent must also abort that algorithm,
+  discarding any pending &lt;span title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt;
+  generated by that algorithm, and then &lt;span&gt;queue a task&lt;/span&gt; to
+  &lt;span&gt;fire a simple event&lt;/span&gt; named &lt;code
+  title=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;code&gt;img&lt;/code&gt;
+  element.&lt;/p&gt;
+
+  &lt;p&gt;When an &lt;code&gt;img&lt;/code&gt; element is in the &lt;span
+  title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state &lt;em&gt;and&lt;/em&gt; the
+  user agent can completely decode the media data without errors, then
+  the &lt;code&gt;img&lt;/code&gt; element is said to be &lt;dfn
+  title=&quot;img-good&quot;&gt;fully decodable&lt;/dfn&gt;.&lt;/p&gt;
+
   &lt;p&gt;Whether the image is fetched successfully or not (e.g. whether
   the response code was a 2xx code &lt;span
   title=&quot;concept-http-equivalent-codes&quot;&gt;or equivalent&lt;/span&gt;) must be
@@ -22033,33 +22132,6 @@
   &lt;p&gt;This specification does not specify which image types are to be
   supported.&lt;/p&gt;
 
-  &lt;p id=&quot;img-load&quot;&gt;The &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is
-  &lt;span title=&quot;queue a task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking
-  task source&lt;/span&gt; once the resource has been &lt;span
-  title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;, must act as appropriate given the
-  following alternatives:&lt;/p&gt;
-
-  &lt;dl class=&quot;switch&quot;&gt;
-
-   &lt;dt&gt;If the download was successful and the image is &lt;i
-   title=&quot;img-available&quot;&gt;available&lt;/i&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;span&gt;Queue a task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt;
-   named &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; at the &lt;code&gt;img&lt;/code&gt;
-   element (this happens after &lt;code
-   title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; starts returning
-   true).&lt;/dd&gt;
-
-   &lt;dt&gt;Otherwise (the fetching process failed without a response from
-   the remote server, or completed but the image is not a supported
-   image)&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;span&gt;Queue a task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt;
-   named &lt;code title=&quot;event-error&quot;&gt;error&lt;/code&gt; on the
-   &lt;code&gt;img&lt;/code&gt; element.&lt;/dd&gt;
-
-  &lt;/dl&gt;
-
   &lt;p&gt;The &lt;span&gt;task source&lt;/span&gt; for these &lt;span
   title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; is the &lt;span&gt;DOM manipulation
   task source&lt;/span&gt;.&lt;/p&gt;
@@ -22082,10 +22154,9 @@
     the content, redundant with some other information in the
     document.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=&quot;img-available&quot;&gt;available&lt;/i&gt; and the
+    &lt;p&gt;If the image is &lt;span title=&quot;img-yes&quot;&gt;available&lt;/span&gt; and the
     user agent is configured to display that image, then the element
-    &lt;span&gt;represents&lt;/span&gt; the image specified by the &lt;code
-    title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;span&gt;represents&lt;/span&gt; the element's image data.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, the element &lt;span&gt;represents&lt;/span&gt; nothing, and may
     be omitted completely from the rendering. User agents may provide
@@ -22104,10 +22175,9 @@
     title=&quot;attr-img-alt&quot;&gt;alt&lt;/code&gt; attribute gives a textual
     equivalent or replacement for the image.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=&quot;img-available&quot;&gt;available&lt;/i&gt; and the
+    &lt;p&gt;If the image is &lt;span title=&quot;img-yes&quot;&gt;available&lt;/span&gt; and the
     user agent is configured to display that image, then the element
-    &lt;span&gt;represents&lt;/span&gt; the image specified by the &lt;code
-    title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;span&gt;represents&lt;/span&gt; the element's image data.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, the element &lt;span&gt;represents&lt;/span&gt; the text given
     by the &lt;code title=&quot;attr-img-alt&quot;&gt;alt&lt;/code&gt; attribute. User
@@ -22129,17 +22199,15 @@
     is a key part of the content but that a textual replacement for
     the image was not available when the image was generated.&lt;/p&gt;
 
-    &lt;p&gt;If the image is &lt;i title=&quot;img-available&quot;&gt;available&lt;/i&gt;, the
-    element &lt;span&gt;represents&lt;/span&gt; the image specified by the &lt;code
-    title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;p&gt;If the image is &lt;span title=&quot;img-yes&quot;&gt;available&lt;/span&gt; and the
+    user agent is configured to display that image, then the element
+    &lt;span&gt;represents&lt;/span&gt; the element's image data.&lt;/p&gt;
 
-    &lt;p&gt;If the image is not &lt;i title=&quot;img-available&quot;&gt;available&lt;/i&gt; or
-    if the user agent is not configured to display the image, then the
-    user agent should display some sort of indicator that there is an
-    image that is not being rendered, and may, if requested by the
-    user, or if so configured, or when required to provide contextual
-    information in response to navigation, provide caption information
-    for the image, derived as follows:&lt;/p&gt;
+    &lt;p&gt;Otherwise, the user agent should display some sort of indicator
+    that there is an image that is not being rendered, and may, if
+    requested by the user, or if so configured, or when required to
+    provide contextual information in response to navigation, provide
+    caption information for the image, derived as follows:&lt;/p&gt;
 
     &lt;ol&gt;
 
@@ -22281,9 +22349,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns true if the image has been downloaded, decoded, and
-    found to be valid, or if no image is specified; otherwise, returns
-    false.&lt;/p&gt;
+    &lt;p&gt;Returns true if the image has been completely downloaded or if
+    no image is specified; otherwise, returns false.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -22326,15 +22393,14 @@
 
   &lt;p&gt;The IDL attribute &lt;dfn
   title=&quot;dom-img-complete&quot;&gt;&lt;code&gt;complete&lt;/code&gt;&lt;/dfn&gt; must return
-  true if either the &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute
-  is omitted, or its value is the empty string, or if the user agent
-  has fetched the image specified in the &lt;code
-  title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute and it is in a supported
-  image type (i.e. it was decoded without fatal errors), even if the
-  final &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; queued by the
-  &lt;span&gt;networking task source&lt;/span&gt; for the &lt;span
-  title=&quot;fetch&quot;&gt;fetching&lt;/span&gt; of the image resource has not yet been
-  processed. Otherwise, the attribute must return false.&lt;/p&gt;
+  true if any of the following conditions is true:&lt;/p&gt;
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;The &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is omitted.
+   &lt;li&gt;The &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute's value is the empty string.
+   &lt;li&gt;The final &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt; once the resource has been &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; has been &lt;span title=&quot;queue a task&quot;&gt;queued&lt;/span&gt;, but has not yet been run, and the &lt;code&gt;img&lt;/code&gt; element is not in the &lt;span title=&quot;img-error&quot;&gt;broken&lt;/span&gt; state.
+   &lt;li&gt;The &lt;code&gt;img&lt;/code&gt; element is &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt;.
+  &lt;/ul&gt;
+  &lt;p&gt;Otherwise, the attribute must return false.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;The value of &lt;code
   title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; can thus change while a
@@ -34664,13 +34730,12 @@
   exception.&lt;/p&gt; &lt;!-- drawImage() has an equivalent paragraph --&gt;
 
   &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLImageElement&lt;/code&gt; object whose &lt;code
-  title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is false or whose
-  &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is omitted or empty,
-  or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLVideoElement&lt;/code&gt; object whose &lt;code
-  title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; attribute is either
-  &lt;code title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
+  &lt;code&gt;HTMLImageElement&lt;/code&gt; object that is not &lt;span
+  title=&quot;img-good&quot;&gt;fully decodable&lt;/span&gt;, or if the &lt;var
+  title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;HTMLVideoElement&lt;/code&gt;
+  object whose &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
+  attribute is either &lt;code
+  title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
   title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;, then the
   implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
   equivalent paragraph --&gt;
@@ -36420,13 +36485,12 @@
   exception.&lt;/p&gt; &lt;!-- createPattern() has an equivalent paragraph --&gt;
 
   &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLImageElement&lt;/code&gt; object whose &lt;code
-  title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is false or whose
-  &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is omitted or empty,
-  or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLVideoElement&lt;/code&gt; object whose &lt;code
-  title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; attribute is either
-  &lt;code title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
+  &lt;code&gt;HTMLImageElement&lt;/code&gt; object that is not &lt;span
+  title=&quot;img-good&quot;&gt;fully decodable&lt;/span&gt;, or if the &lt;var
+  title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;HTMLVideoElement&lt;/code&gt;
+  object whose &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
+  attribute is either &lt;code
+  title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
   title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;, then the
   implementation must return without drawing anything.&lt;/p&gt; &lt;!--
   createPattern() has an equivalent paragraph --&gt;
@@ -54246,10 +54310,9 @@
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; argument is present and not
-   null, but the given &lt;code&gt;img&lt;/code&gt; element's &lt;code
-   title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is false or its
-   &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is omitted or
-   empty, then let &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
+   null, but the given &lt;code&gt;img&lt;/code&gt; element is not in the &lt;span
+   title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state, then let &lt;var
+   title=&quot;&quot;&gt;icon&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;icon&lt;/var&gt; argument is present and not
    null, then copy the image data from that &lt;code&gt;img&lt;/code&gt; element,
@@ -54923,10 +54986,8 @@
       only two entries, or there are three, and the third entry is
       an &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -54939,10 +55000,8 @@
       entries, or there are four, and the fourth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -54955,10 +55014,8 @@
       entries, or there are five, and the fifth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -54970,10 +55027,8 @@
       entries, or there are four, and the fourth entry is an
       &lt;code&gt;img&lt;/code&gt; element.&lt;/p&gt;
 
-      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, its &lt;code
-      title=&quot;dom-img-complete&quot;&gt;complete&lt;/code&gt; attribute is true and
-      its &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is neither
-      omitted nor empty.&lt;/p&gt;
+      &lt;p&gt;If there is an &lt;code&gt;img&lt;/code&gt; element specified, it is in
+      the &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt; state.&lt;/p&gt;
 
      &lt;/dd&gt;
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012505.html">[html5] r5638 - [giow] (2) Add in some hard-coded limits for	dealing with unclosed formatting el [...]
</A></li>
	<LI>Next message: <A HREF="012507.html">[html5] r5640 - [giow] (2) compat requires animated GIFs to play	together (hamster dance strikes [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12506">[ date ]</a>
              <a href="thread.html#12506">[ thread ]</a>
              <a href="subject.html#12506">[ subject ]</a>
              <a href="author.html#12506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
