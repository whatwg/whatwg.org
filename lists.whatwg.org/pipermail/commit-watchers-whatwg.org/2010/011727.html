<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r4855 - [e] (0) Make some readability changes to the	WebSocket protocol descriptions to [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4855%20-%20%5Be%5D%20%280%29%20Make%20some%20readability%20changes%20to%20the%0A%09WebSocket%20protocol%20descriptions%20to%20%5B...%5D&In-Reply-To=%3C20100317231054.106D51CFDFED%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011726.html">
   <LINK REL="Next"  HREF="011728.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r4855 - [e] (0) Make some readability changes to the	WebSocket protocol descriptions to [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4855%20-%20%5Be%5D%20%280%29%20Make%20some%20readability%20changes%20to%20the%0A%09WebSocket%20protocol%20descriptions%20to%20%5B...%5D&In-Reply-To=%3C20100317231054.106D51CFDFED%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r4855 - [e] (0) Make some readability changes to the	WebSocket protocol descriptions to [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Mar 17 16:10:54 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="011726.html">[html5] r4854 - [e] (0) Add some IDs for bz.
</A></li>
        <LI>Next message: <A HREF="011728.html">[html5] r4856 - [giow] (2) Allow getElementsByClassName() etc to	cache results if desired. (this [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11727">[ date ]</a>
              <a href="thread.html#11727">[ thread ]</a>
              <a href="subject.html#11727">[ subject ]</a>
              <a href="author.html#11727">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-03-17 16:10:52 -0700 (Wed, 17 Mar 2010)
New Revision: 4855

Modified:
   complete.html
   source
Log:
[e] (0) Make some readability changes to the WebSocket protocol descriptions to address some off-list feedback.

Modified: complete.html
===================================================================
--- complete.html	2010-03-17 00:02:41 UTC (rev 4854)
+++ complete.html	2010-03-17 23:10:52 UTC (rev 4855)
@@ -67646,7 +67646,7 @@
   handshake appears to HTTP servers to be a regular GET request with
   an Upgrade offer:&lt;/p&gt;
 
-  &lt;pre&gt;GET /resource HTTP/1.1
+  &lt;pre&gt;GET / HTTP/1.1
 Upgrade: WebSocket
 Connection: Upgrade&lt;/pre&gt;
 
@@ -67759,7 +67759,7 @@
   name, and whether the connection is expected to be encrypted:&lt;/p&gt;
 
   &lt;pre&gt;Sec-WebSocket-Origin: <A HREF="http://example.com">http://example.com</A>
-Sec-WebSocket-Location: <A HREF="ws://example.com/demo&lt;/pre">ws://example.com/demo&lt;/pre</A>&gt;
+Sec-WebSocket-Location: <A HREF="ws://example.com/&lt;/pre">ws://example.com/&lt;/pre</A>&gt;
 
   &lt;p&gt;These fields are checked by the Web browser when it is acting as
   a &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; client for scripted pages. A server that
@@ -68931,8 +68931,21 @@
        (i.e. if &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; &lt;i title=&quot;&quot;&gt;and&lt;/i&gt;ed with 0x80
        returns 0x80), then return to the step above labeled &lt;a href=#ws-cd-length&gt;&lt;i&gt;length&lt;/i&gt;&lt;/a&gt;.&lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/li&gt;
+       &lt;li&gt;
 
+        &lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/p&gt;
+
+        &lt;p class=warning&gt;It is possible for a server to (innocently
+        or maliciously) send frames with lengths greater than
+        2&lt;sup&gt;31&lt;/sup&gt; or 2&lt;sup&gt;32&lt;/sup&gt; bytes, overflowing a signed
+        or unsigned 32bit integer. User agents may therefore impose
+        implementation-specific limits on the lengths of invalid
+        frames that they will skip; even supporting frames 2GB in
+        length is considered, at the time of writing, as going well
+        above and beyond the call of duty.&lt;/p&gt;
+
+       &lt;/li&gt;
+
        &lt;li&gt;&lt;p&gt;Discard the read bytes.&lt;/li&gt;
 
        &lt;li&gt;
@@ -68988,15 +69001,8 @@
 
       &lt;/ol&gt;&lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;p class=warning&gt;User agents may impose implementation-specific
-    limits on the lengths of invalid frames that they will skip. In
-    particular, it is possible for a server to (innocently or
-    maliciously) send frames with lengths greater than 2&lt;sup&gt;31&lt;/sup&gt;
-    or 2&lt;sup&gt;32&lt;/sup&gt; bytes, overflowing a signed or unsigned 32bit
-    integer.&lt;/p&gt;
+    &lt;/dl&gt;&lt;/li&gt;
 
-   &lt;/li&gt;
-
    &lt;li&gt;
 
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;error&lt;/var&gt; is true, then &lt;dfn id=a-websocket-error-has-been-detected&gt;a WebSocket
@@ -69615,26 +69621,30 @@
      (i.e. if &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; &lt;i title=&quot;&quot;&gt;and&lt;/i&gt;ed with 0x80
      returns 0x80), then return to the step above labeled &lt;a href=#ws-sd-length&gt;&lt;i&gt;length&lt;/i&gt;&lt;/a&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/li&gt;
+     &lt;li&gt;
 
+      &lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/p&gt;
+
+      &lt;p class=warning&gt;It is possible for a malicious client to send
+      frames with lengths greater than 2&lt;sup&gt;31&lt;/sup&gt; or
+      2&lt;sup&gt;32&lt;/sup&gt; bytes, overflowing a signed or unsigned 32bit
+      integer. Servers may therefore impose implementation-specific
+      limits on the lengths of invalid frames that they will skip, if
+      they support skipping such frames at all. If a server cannot
+      correctly skip past a long frame, then the server must abort
+      these steps (discarding all future data), and should either
+      immediately disconnect from the client or set the &lt;var title=&quot;&quot;&gt;client terminated&lt;/var&gt; flag.&lt;/p&gt;
+
+     &lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;Discard the read bytes.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; is 0xFF and &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; is 0, then set the &lt;var title=&quot;&quot;&gt;client
      terminated&lt;/var&gt; flag and abort these steps. All further data
      sent by the client should be discarded.&lt;/li&gt;
 
-    &lt;/ol&gt;&lt;p class=warning&gt;Servers may impose implementation-specific
-    limits on the lengths of invalid frames that they will skip. In
-    particular, it is possible for a malicious client to send frames
-    with lengths greater than 2&lt;sup&gt;31&lt;/sup&gt; or 2&lt;sup&gt;32&lt;/sup&gt; bytes,
-    overflowing a signed or unsigned 32bit integer. If a server cannot
-    correctly skip past a long frame, then the server must abort these
-    steps (discarding all future data), and should either immediately
-    disconnect from the client or set the &lt;var title=&quot;&quot;&gt;client
-    terminated&lt;/var&gt; flag.&lt;/p&gt;
+    &lt;/ol&gt;&lt;/li&gt;
 
-   &lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;a href=#ws-sd-frame&gt;&lt;i&gt;frame&lt;/i&gt;&lt;/a&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The server must run through the following steps to send strings

Modified: source
===================================================================
--- source	2010-03-17 00:02:41 UTC (rev 4854)
+++ source	2010-03-17 23:10:52 UTC (rev 4855)
@@ -76040,7 +76040,7 @@
   handshake appears to HTTP servers to be a regular GET request with
   an Upgrade offer:&lt;/p&gt;
 
-  &lt;pre&gt;GET /resource HTTP/1.1
+  &lt;pre&gt;GET / HTTP/1.1
 Upgrade: WebSocket
 Connection: Upgrade&lt;/pre&gt;
 
@@ -76162,7 +76162,7 @@
   name, and whether the connection is expected to be encrypted:&lt;/p&gt;
 
   &lt;pre&gt;Sec-WebSocket-Origin: <A HREF="http://example.com">http://example.com</A>
-Sec-WebSocket-Location: <A HREF="ws://example.com/demo&lt;/pre">ws://example.com/demo&lt;/pre</A>&gt;
+Sec-WebSocket-Location: <A HREF="ws://example.com/&lt;/pre">ws://example.com/&lt;/pre</A>&gt;
 
   &lt;p&gt;These fields are checked by the Web browser when it is acting as
   a &lt;code&gt;WebSocket&lt;/code&gt; client for scripted pages. A server that
@@ -77502,8 +77502,21 @@
        returns 0x80), then return to the step above labeled &lt;a
        href=&quot;#ws-cd-length&quot;&gt;&lt;i&gt;length&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/p&gt;&lt;/li&gt;
+       &lt;li&gt;
 
+        &lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/p&gt;
+
+        &lt;p class=&quot;warning&quot;&gt;It is possible for a server to (innocently
+        or maliciously) send frames with lengths greater than
+        2&lt;sup&gt;31&lt;/sup&gt; or 2&lt;sup&gt;32&lt;/sup&gt; bytes, overflowing a signed
+        or unsigned 32bit integer. User agents may therefore impose
+        implementation-specific limits on the lengths of invalid
+        frames that they will skip; even supporting frames 2GB in
+        length is considered, at the time of writing, as going well
+        above and beyond the call of duty.&lt;/p&gt;
+
+       &lt;/li&gt;
+
        &lt;li&gt;&lt;p&gt;Discard the read bytes.&lt;/p&gt;&lt;/li&gt;
 
        &lt;li&gt;
@@ -77577,13 +77590,6 @@
 
     &lt;/dl&gt;
 
-    &lt;p class=&quot;warning&quot;&gt;User agents may impose implementation-specific
-    limits on the lengths of invalid frames that they will skip. In
-    particular, it is possible for a server to (innocently or
-    maliciously) send frames with lengths greater than 2&lt;sup&gt;31&lt;/sup&gt;
-    or 2&lt;sup&gt;32&lt;/sup&gt; bytes, overflowing a signed or unsigned 32bit
-    integer.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -78279,8 +78285,23 @@
      returns 0x80), then return to the step above labeled &lt;a
      href=&quot;#ws-sd-length&quot;&gt;&lt;i&gt;length&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;
 
+      &lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/p&gt;
+
+      &lt;p class=&quot;warning&quot;&gt;It is possible for a malicious client to send
+      frames with lengths greater than 2&lt;sup&gt;31&lt;/sup&gt; or
+      2&lt;sup&gt;32&lt;/sup&gt; bytes, overflowing a signed or unsigned 32bit
+      integer. Servers may therefore impose implementation-specific
+      limits on the lengths of invalid frames that they will skip, if
+      they support skipping such frames at all. If a server cannot
+      correctly skip past a long frame, then the server must abort
+      these steps (discarding all future data), and should either
+      immediately disconnect from the client or set the &lt;var
+      title=&quot;&quot;&gt;client terminated&lt;/var&gt; flag.&lt;/p&gt;
+
+     &lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;Discard the read bytes.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; is 0xFF and &lt;var
@@ -78290,16 +78311,6 @@
 
     &lt;/ol&gt;
 
-    &lt;p class=&quot;warning&quot;&gt;Servers may impose implementation-specific
-    limits on the lengths of invalid frames that they will skip. In
-    particular, it is possible for a malicious client to send frames
-    with lengths greater than 2&lt;sup&gt;31&lt;/sup&gt; or 2&lt;sup&gt;32&lt;/sup&gt; bytes,
-    overflowing a signed or unsigned 32bit integer. If a server cannot
-    correctly skip past a long frame, then the server must abort these
-    steps (discarding all future data), and should either immediately
-    disconnect from the client or set the &lt;var title=&quot;&quot;&gt;client
-    terminated&lt;/var&gt; flag.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;a


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011726.html">[html5] r4854 - [e] (0) Add some IDs for bz.
</A></li>
	<LI>Next message: <A HREF="011728.html">[html5] r4856 - [giow] (2) Allow getElementsByClassName() etc to	cache results if desired. (this [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11727">[ date ]</a>
              <a href="thread.html#11727">[ thread ]</a>
              <a href="subject.html#11727">[ subject ]</a>
              <a href="author.html#11727">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
