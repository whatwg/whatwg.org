<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r5087 - [giow] (0) Captions - Stage 10: Some work on handle	in-band timed tracks and rel [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5087%20-%20%5Bgiow%5D%20%280%29%20Captions%20-%20Stage%2010%3A%20Some%20work%20on%20handle%0A%09in-band%20timed%20tracks%20and%20rel%20%5B...%5D&In-Reply-To=%3C20100508063800.93FA91C8C003%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011957.html">
   <LINK REL="Next"  HREF="011959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r5087 - [giow] (0) Captions - Stage 10: Some work on handle	in-band timed tracks and rel [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5087%20-%20%5Bgiow%5D%20%280%29%20Captions%20-%20Stage%2010%3A%20Some%20work%20on%20handle%0A%09in-band%20timed%20tracks%20and%20rel%20%5B...%5D&In-Reply-To=%3C20100508063800.93FA91C8C003%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r5087 - [giow] (0) Captions - Stage 10: Some work on handle	in-band timed tracks and rel [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri May  7 23:38:00 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="011957.html">[html5] r5086 - [e] (0) update bugs db links
</A></li>
        <LI>Next message: <A HREF="011959.html">[html5] r5088 - [e] (0) multipage complete thanks to anne
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11958">[ date ]</a>
              <a href="thread.html#11958">[ thread ]</a>
              <a href="subject.html#11958">[ subject ]</a>
              <a href="author.html#11958">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-05-07 23:37:59 -0700 (Fri, 07 May 2010)
New Revision: 5087

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Captions - Stage 10: Some work on handle in-band timed tracks and related changes.

Modified: complete.html
===================================================================
--- complete.html	2010-05-06 09:58:45 UTC (rev 5086)
+++ complete.html	2010-05-08 06:37:59 UTC (rev 5087)
@@ -186,7 +186,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;Web Applications 1.0&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 6 May 2010&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 8 May 2010&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -532,8 +532,10 @@
          &lt;li&gt;&lt;a href=#timed-track-model&gt;&lt;span class=secno&gt;4.8.10.10.1 &lt;/span&gt;Timed track model&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#sourcing-in-band-timed-tracks&gt;&lt;span class=secno&gt;4.8.10.10.2 &lt;/span&gt;Sourcing in-band timed tracks&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#sourcing-out-of-band-timed-tracks&gt;&lt;span class=secno&gt;4.8.10.10.3 &lt;/span&gt;Sourcing out-of-band timed tracks&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#timed-track-api&gt;&lt;span class=secno&gt;4.8.10.10.4 &lt;/span&gt;Timed track API&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#cue-events&gt;&lt;span class=secno&gt;4.8.10.10.5 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#guidelines-for-exposing-cues-in-various-formats-as-timed-track-cues&gt;&lt;span class=secno&gt;4.8.10.10.4 &lt;/span&gt;Guidelines for exposing cues in various formats as
+  timed track cues&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#timed-track-api&gt;&lt;span class=secno&gt;4.8.10.10.5 &lt;/span&gt;Timed track API&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#cue-events&gt;&lt;span class=secno&gt;4.8.10.10.6 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#websrt&gt;&lt;span class=secno&gt;4.8.10.11 &lt;/span&gt;WebSRT&lt;/a&gt;
         &lt;ol&gt;
          &lt;li&gt;&lt;a href=#syntax-0&gt;&lt;span class=secno&gt;4.8.10.11.1 &lt;/span&gt;Syntax&lt;/a&gt;&lt;/li&gt;
@@ -23572,27 +23574,27 @@
 
   &lt;p&gt;The &lt;dfn id=attr-track-kind title=attr-track-kind&gt;&lt;code&gt;kind&lt;/code&gt;&lt;/dfn&gt;
   attribute is an &lt;a href=#enumerated-attribute&gt;enumerated attribute&lt;/a&gt;. The following
-  table lists the keywords defined for this attribute. The states
-  given in the first cell of the rows with keywords give the states to
-  which those keywords map.&lt;/p&gt;
+  table lists the keywords defined for this attribute. The keyword
+  given in the first cell of each row maps to the state given in the
+  second cell.&lt;/p&gt;
 
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;State
-     &lt;th&gt;Keywords
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Keywords
+     &lt;th&gt;State
      &lt;th&gt;Brief description
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-subtitles title=attr-track-kind-subtitles&gt;Subtitles&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-subtitles title=attr-track-kind-keyword-subtitles&gt;&lt;code&gt;subtitles&lt;/code&gt;&lt;/dfn&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-subtitles title=attr-track-kind-keyword-subtitles&gt;&lt;code&gt;subtitles&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-subtitles title=attr-track-kind-subtitles&gt;Subtitles&lt;/dfn&gt;
      &lt;td&gt;Translation of the dialogue, suitable for when the sound is available but not understood (e.g. because the user does not understand the language of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s soundtrack).
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-captions title=attr-track-kind-captions&gt;Captions&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-captions title=attr-track-kind-keyword-captions&gt;&lt;code&gt;captions&lt;/code&gt;&lt;/dfn&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-captions title=attr-track-kind-keyword-captions&gt;&lt;code&gt;captions&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-captions title=attr-track-kind-captions&gt;Captions&lt;/dfn&gt;
      &lt;td&gt;Transcription of the dialogue, suitable for when the soundtrack is unavailable (e.g. because it is muted or because the user is deaf). 
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-descriptions title=attr-track-kind-descriptions&gt;Descriptions&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-descriptions title=attr-track-kind-keyword-descriptions&gt;&lt;code&gt;descriptions&lt;/code&gt;&lt;/dfn&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-descriptions title=attr-track-kind-keyword-descriptions&gt;&lt;code&gt;descriptions&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-descriptions title=attr-track-kind-descriptions&gt;Descriptions&lt;/dfn&gt;
      &lt;td&gt;Textual descriptions of the video component of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, intended for audio synthesis when the visual component is unavailable (e.g. because the user is interacting with the application without a screen while driving, or because the user is blind).
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-chapters title=attr-track-kind-chapters&gt;Chapters&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-chapters title=attr-track-kind-keyword-chapters&gt;&lt;code&gt;chapters&lt;/code&gt;&lt;/dfn&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-chapters title=attr-track-kind-keyword-chapters&gt;&lt;code&gt;chapters&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-chapters title=attr-track-kind-chapters&gt;Chapters&lt;/dfn&gt;
      &lt;td&gt;Chapter titles, intended to be used for navigating the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;.
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-metadata title=attr-track-kind-metadata&gt;Metadata&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-metadata title=attr-track-kind-keyword-metadata&gt;&lt;code&gt;metadata&lt;/code&gt;&lt;/dfn&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-metadata title=attr-track-kind-keyword-metadata&gt;&lt;code&gt;metadata&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-metadata title=attr-track-kind-metadata&gt;Metadata&lt;/dfn&gt;
      &lt;td&gt;Tracks intended for use from script.
   &lt;/table&gt;&lt;p&gt;The attribute may be omitted. The &lt;i&gt;missing value default&lt;/i&gt; is
   the &lt;a href=#attr-track-kind-captions title=attr-track-kind-captions&gt;captions&lt;/a&gt; state.&lt;/p&gt;
@@ -23602,6 +23604,18 @@
   &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL potentially surrounded by
   spaces&lt;/a&gt;. This attribute must be present.&lt;/p&gt;
 
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;If the element has a &lt;code title=attr-track-src&gt;&lt;a href=#attr-track-src&gt;src&lt;/a&gt;&lt;/code&gt;
+  attribute whose value is not the empty string and whose value, when
+  the attribute was set, could be successfully &lt;a href=#resolve-a-url title=&quot;resolve a
+  url&quot;&gt;resolved&lt;/a&gt; relative to the element, then the element's
+  &lt;dfn id=track-url&gt;track URL&lt;/dfn&gt; is the resulting &lt;a href=#absolute-url&gt;absolute
+  URL&lt;/a&gt;. Otherwise, the element has no &lt;a href=#track-url&gt;track
+  URL&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The &lt;dfn id=attr-track-srclang title=attr-track-srclang&gt;&lt;code&gt;srclang&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the language of the time track data. The value must
   be a valid BCP 47 language tag. This attribute must be present if
@@ -23609,16 +23623,81 @@
   in the &lt;a href=#attr-track-kind-subtitles title=attr-track-kind-subtitles&gt;subtitles&lt;/a&gt;
   state. &lt;a href=#refsBCP47&gt;[BCP47]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;If the element has a &lt;code title=attr-track-srclang&gt;&lt;a href=#attr-track-srclang&gt;srclang&lt;/a&gt;&lt;/code&gt; attribute whose value is
+  not the empty string, then the element's &lt;dfn id=track-language&gt;track language&lt;/dfn&gt;
+  is the value of the attribute. Otherwise, the element has no
+  &lt;a href=#track-language&gt;track language&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The &lt;dfn id=attr-track-label title=attr-track-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
   attribute gives a user-readable title for the track.&lt;/p&gt;
 
-  &lt;p&gt;There must not be two &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element children of the
-  same &lt;a href=#media-element&gt;media element&lt;/a&gt; whose &lt;code title=attr-track-kind&gt;&lt;a href=#attr-track-kind&gt;kind&lt;/a&gt;&lt;/code&gt; attributes are in the same
+  &lt;p&gt;The value of the &lt;code title=attr-track-label&gt;&lt;a href=#attr-track-label&gt;label&lt;/a&gt;&lt;/code&gt;
+  attribute, if the attribute is present, must not be the empty
+  string. Furthermore, there must not be two &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt;
+  element children of the same &lt;a href=#media-element&gt;media element&lt;/a&gt; whose &lt;code title=attr-track-kind&gt;&lt;a href=#attr-track-kind&gt;kind&lt;/a&gt;&lt;/code&gt; attributes are in the same
   state, whose &lt;code title=attr-track-srclang&gt;&lt;a href=#attr-track-srclang&gt;srclang&lt;/a&gt;&lt;/code&gt;
   attributes are both missing or have values that represent the same
   language, and whose &lt;code title=attr-track-label&gt;&lt;a href=#attr-track-label&gt;label&lt;/a&gt;&lt;/code&gt;
   attributes are again both missing or both have the same value.&lt;/p&gt;
 
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;If the element has a &lt;code title=attr-track-label&gt;&lt;a href=#attr-track-label&gt;label&lt;/a&gt;&lt;/code&gt;
+  attribute whose value is not the empty string, then the element's
+  &lt;dfn id=track-label&gt;track label&lt;/dfn&gt; is the value of the attribute. Otherwise, the
+  element's &lt;a href=#track-label&gt;track label&lt;/a&gt; is a user-agent defined string
+  (e.g. the string &quot;untitled&quot; in the user's locale, or a value
+  automatically generated from the other attributes).&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element is created, it must be
+  associated with a new &lt;a href=#timed-track&gt;timed track&lt;/a&gt; and its corresponding
+  new &lt;code&gt;&lt;a href=#timedtrack&gt;TimedTrack&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#timed-track-kind&gt;timed track kind&lt;/a&gt; is determined from the state of
+  the element's &lt;code title=attr-track-kind&gt;&lt;a href=#attr-track-kind&gt;kind&lt;/a&gt;&lt;/code&gt; attribute
+  according to the following table; for a state given in a cell of the
+  first column, the &lt;a href=#timed-track-kind title=&quot;timed track kind&quot;&gt;kind&lt;/a&gt; is the
+  string given in the second column:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;State
+     &lt;th&gt;String
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-subtitles title=attr-track-kind-subtitles&gt;Subtitles&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-subtitles&gt;subtitles&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-captions title=attr-track-kind-captions&gt;Captions&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-captions&gt;captions&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-descriptions title=attr-track-kind-descriptions&gt;Descriptions&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-descriptions&gt;descriptions&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-chapters title=attr-track-kind-chapters&gt;Chapters&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-chapters&gt;chapters&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-metadata title=attr-track-kind-metadata&gt;Metadata&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-metadata&gt;metadata&lt;/code&gt;
+  &lt;/table&gt;&lt;p&gt;The &lt;a href=#timed-track-label&gt;timed track label&lt;/a&gt; is the element's &lt;a href=#track-label&gt;track
+  label&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#timed-track-language&gt;timed track language&lt;/a&gt; is the element's
+  &lt;a href=#track-language&gt;track language&lt;/a&gt;, if any, or the empty string
+  otherwise.&lt;/p&gt;
+
+  &lt;p&gt;As the &lt;code title=attr-track-kind&gt;&lt;a href=#attr-track-kind&gt;kind&lt;/a&gt;&lt;/code&gt;, &lt;code title=attr-track-label&gt;&lt;a href=#attr-track-label&gt;label&lt;/a&gt;&lt;/code&gt;, and &lt;code title=attr-track-srclang&gt;&lt;a href=#attr-track-srclang&gt;srclang&lt;/a&gt;&lt;/code&gt; attributes are added,
+  removed, or changed, the &lt;a href=#timed-track&gt;timed track&lt;/a&gt; must update
+  accordingly, as per the definitions above.&lt;/p&gt;
+
+  &lt;p class=XXX&gt;Handle the &lt;a href=#track-url&gt;track URL&lt;/a&gt; and changes
+  thereto. (blocked on defining how the mode is updated and how it
+  affects track loading)&lt;/p&gt;
+
+  &lt;p class=XXX&gt;...cues! state! mode!&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;track&lt;/var&gt; . &lt;code title=dom-track-track&gt;&lt;a href=#dom-track-track&gt;track&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -23629,10 +23708,6 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element is created, it must be
-  associated with a new &lt;a href=#timed-track&gt;timed track&lt;/a&gt; and its corresponding
-  new &lt;code&gt;&lt;a href=#timedtrack&gt;TimedTrack&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
-
   &lt;p&gt;The &lt;dfn id=dom-track-track title=dom-track-track&gt;&lt;code&gt;track&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must, on getting, return the &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's
   &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s corresponding &lt;code&gt;&lt;a href=#timedtrack&gt;TimedTrack&lt;/a&gt;&lt;/code&gt;
@@ -24086,7 +24161,8 @@
      &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
      &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-     &lt;li class=XXX&gt;&lt;p&gt;remove all timed tracks&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;&lt;a href=&quot;#forget-the-media-element's-media-resource-specific-timed-tracks&quot;&gt;Forget the media element's media-resource-specific
+     timed tracks&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is
      not set to &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then set it
@@ -24200,15 +24276,26 @@
      algorithm returns without aborting &lt;em&gt;this&lt;/em&gt; one, then the
      load failed.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;i&gt;Failed&lt;/i&gt;: Reaching this step indicates that the media
-     resource failed to load or that the given &lt;a href=#url&gt;URL&lt;/a&gt; could
-     not be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt;. Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute to a new
-     &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to &lt;code title=dom-MediaError-MEDIA_ERR_SRC_NOT_SUPPORTED&gt;&lt;a href=#dom-mediaerror-media_err_src_not_supported&gt;MEDIA_ERR_SRC_NOT_SUPPORTED&lt;/a&gt;&lt;/code&gt;. &lt;span class=XXX&gt;remove all timed tracks&lt;/span&gt;&lt;/li&gt;
+     &lt;li&gt;
 
-     &lt;li&gt;&lt;p&gt;Set the element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
-     the &lt;a href=#dom-media-network_no_source title=dom-media-NETWORK_NO_SOURCE&gt;NETWORK_NO_SOURCE&lt;/a&gt;
-     value.&lt;/li&gt;
+      &lt;p&gt;&lt;i&gt;Failed&lt;/i&gt;: Reaching this step indicates that the media
+      resource failed to load or that the given &lt;a href=#url&gt;URL&lt;/a&gt; could
+      not be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt;. In one
+      atomic operation, run the following steps:&lt;/p&gt;
 
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt;
+       attribute to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to
+       &lt;code title=dom-MediaError-MEDIA_ERR_SRC_NOT_SUPPORTED&gt;&lt;a href=#dom-mediaerror-media_err_src_not_supported&gt;MEDIA_ERR_SRC_NOT_SUPPORTED&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;a href=&quot;#forget-the-media-element's-media-resource-specific-timed-tracks&quot;&gt;Forget the media element's media-resource-specific
+       timed tracks&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Set the element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
+       the &lt;a href=#dom-media-network_no_source title=dom-media-NETWORK_NO_SOURCE&gt;NETWORK_NO_SOURCE&lt;/a&gt;
+       value.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
      event&lt;/a&gt; named &lt;code title=event-media-error&gt;&lt;a href=#event-media-error&gt;error&lt;/a&gt;&lt;/code&gt;
      at the &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/li&gt;
@@ -24310,8 +24397,7 @@
      &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element, in the context of the &lt;a href=#fetch title=fetch&gt;fetching process&lt;/a&gt; that was used to try to
      obtain &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;'s corresponding &lt;a href=#media-resource&gt;media
      resource&lt;/a&gt; in the &lt;a href=#concept-media-load-resource title=concept-media-load-resource&gt;resource fetch
-     algorithm&lt;/a&gt;. &lt;span class=XXX&gt;remove all timed
-     tracks&lt;/span&gt;&lt;/li&gt;
+     algorithm&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Asynchronously &lt;a href=#await-a-stable-state&gt;await a stable state&lt;/a&gt;. The
      &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt; consists of all the remaining
@@ -24319,6 +24405,9 @@
      &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt; has ended. (Steps in &lt;a href=#synchronous-section title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/a&gt; are
      marked with &#8987;.)&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;&#8987; &lt;a href=&quot;#forget-the-media-element's-media-resource-specific-timed-tracks&quot;&gt;Forget the media element's
+     media-resource-specific timed tracks&lt;/a&gt;.&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;&#8987; &lt;i title=&quot;&quot;&gt;Find next candidate&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be null.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;&#8987; &lt;i title=&quot;&quot;&gt;Search loop&lt;/i&gt;: If the node after
@@ -24478,15 +24567,13 @@
      &lt;dt id=getting-media-metadata&gt;Once enough of the &lt;a href=#media-data&gt;media
      data&lt;/a&gt; has been fetched to determine the duration of the
      &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, its dimensions, and other
-     metadata&lt;/dt&gt;
+     metadata, and once &lt;a href=#the-timed-tracks-are-ready&gt;the timed tracks are ready&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
       &lt;p&gt;This indicates that the resource is usable. The user agent
       must follow these substeps:&lt;/p&gt;
 
-      &lt;p class=XXX&gt;this needs to wait until all active timed tracks have loaded also&lt;/p&gt;
-
       &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to the
        &lt;a href=#earliest-possible-position&gt;earliest possible position&lt;/a&gt;.&lt;/li&gt;
 
@@ -24704,11 +24791,12 @@
      &lt;/dd&gt;
 
 
-     &lt;dt class=XXX&gt;timed tracks are found&lt;/dt&gt;
+     &lt;dt id=found-a-media-resource-specific-timed-track&gt;If the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; is found to declare a &lt;a href=#media-resource-specific-timed-track&gt;media-resource-specific timed track&lt;/a&gt; that the user agent supports&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p class=XXX&gt;...
+      &lt;p&gt;Run the &lt;a href=#steps-to-expose-a-media-resource-specific-timed-track&gt;steps to expose a media-resource-specific timed
+      track&lt;/a&gt; with the relevant data.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -25789,9 +25877,10 @@
    the &lt;code title=dom-media-addTrack&gt;addTrack()&lt;/code&gt; method, in
    the order they were added, oldest first.&lt;/li&gt;
 
-   &lt;li&gt;Any &lt;a href=#timed-track title=&quot;timed track&quot;&gt;timed tracks&lt;/a&gt; corresponding
-   to data in the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, in the order defined by
-   the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s format specification.&lt;/li&gt;
+   &lt;li&gt;Any &lt;a href=#media-resource-specific-timed-track title=&quot;media-resource-specific timed
+   track&quot;&gt;media-resource-specific timed tracks&lt;/a&gt; (&lt;a href=#timed-track title=&quot;timed track&quot;&gt;timed tracks&lt;/a&gt; corresponding to data in
+   the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;), in the order defined by the
+   &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s format specification.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;A &lt;a href=#timed-track&gt;timed track&lt;/a&gt; consists of:&lt;/p&gt;
 
@@ -26081,35 +26170,97 @@
   cue&lt;/a&gt; is associated with a particular &lt;a href=#timed-track&gt;timed track&lt;/a&gt;,
   the association is permanent.&lt;/p&gt;
 
+  &lt;p class=XXX&gt;&lt;dfn id=the-timed-tracks-are-ready&gt;the timed tracks are ready&lt;/dfn&gt;&lt;/p&gt;
 
+
   &lt;h6 id=sourcing-in-band-timed-tracks&gt;&lt;span class=secno&gt;4.8.10.10.2 &lt;/span&gt;Sourcing in-band timed tracks&lt;/h6&gt;
 
-  &lt;p class=XXX&gt;...
+  &lt;p&gt;A &lt;dfn id=media-resource-specific-timed-track&gt;media-resource-specific timed track&lt;/dfn&gt; is a &lt;a href=#timed-track&gt;timed
+  track&lt;/a&gt; that corresponds to data found in the &lt;a href=#media-resource&gt;media
+  resource&lt;/a&gt;. Rules for processing and rendering such data are
+  defined by the relevant specifications, e.g. the specification of
+  the video format if the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; is a video.&lt;/p&gt;
 
+  &lt;p&gt;When a &lt;a href=#media-resource&gt;media resource&lt;/a&gt; contains data that the user
+  agent recognises and supports as being equivalent to a &lt;a href=#timed-track&gt;timed
+  track&lt;/a&gt;, the user agent &lt;a href=#found-a-media-resource-specific-timed-track&gt;runs&lt;/a&gt; the
+  &lt;dfn id=steps-to-expose-a-media-resource-specific-timed-track&gt;steps to expose a media-resource-specific timed track&lt;/dfn&gt;
+  with the relevant data, as follows:&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Associate the relevant data with a new &lt;a href=#timed-track&gt;timed
+   track&lt;/a&gt; and its corresponding new &lt;code&gt;&lt;a href=#timedtrack&gt;TimedTrack&lt;/a&gt;&lt;/code&gt;
+   object. The &lt;a href=#timed-track&gt;timed track&lt;/a&gt; is a
+   &lt;a href=#media-resource-specific-timed-track&gt;media-resource-specific timed track&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s &lt;a href=#timed-track-kind title=&quot;timed track
+   kind&quot;&gt;kind&lt;/a&gt;, &lt;a href=#timed-track-label title=&quot;timed track label&quot;&gt;label&lt;/a&gt;,
+   and &lt;a href=#timed-track-language title=&quot;timed track language&quot;&gt;language&lt;/a&gt; based on the
+   semantics of the relevant data, as defined by the relevant
+   specification.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Populate the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s &lt;a href=#timed-track-list-of-cues title=&quot;timed track list of cues&quot;&gt;list of cues&lt;/a&gt; with the cues
+   parsed so far, folllowing the &lt;a href=#guidelines-for-exposing-cues-in-various-formats-as-timed-track-cues&gt;guidelines for exposing
+   cues&lt;/a&gt;, and begin updating it dynamically as
+   necessary.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Set the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s &lt;a href=#timed-track-readiness-state title=&quot;timed track
+    readiness state&quot;&gt;readiness state&lt;/a&gt; to the value that most
+    correctly describes the current state, and begin updating it
+    dynamically as necessary.&lt;/p&gt;
+
+    &lt;p class=example&gt;For example, if the relevant data in the
+    &lt;a href=#media-resource&gt;media resource&lt;/a&gt; has been fully parsed and completely
+    describes the cues, then the &lt;a href=#timed-track&gt;timed track&lt;/a&gt; would be
+    &lt;a href=#timed-track-loaded title=&quot;timed track loaded&quot;&gt;loaded&lt;/a&gt;. On the other hand,
+    if the data for the cues is interleaved with the &lt;a href=#media-data&gt;media
+    data&lt;/a&gt;, and the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; as a whole is
+    still being downloaded, then the &lt;a href=#timed-track-loading title=&quot;timed track
+    loading&quot;&gt;loading&lt;/a&gt; state might be more accurate.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s &lt;a href=#timed-track-mode title=&quot;timed
+   track mode&quot;&gt;mode&lt;/a&gt; to the mode consistent with the user's
+   preferences and the requirements of the relevant specification for
+   the data.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt; to the &lt;a href=#media-element&gt;media
+   element&lt;/a&gt;'s &lt;a href=#list-of-timed-tracks&gt;list of timed tracks&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When a &lt;a href=#media-element&gt;media element&lt;/a&gt; is to &lt;dfn id=&quot;forget-the-media-element's-media-resource-specific-timed-tracks&quot;&gt;forget the media
+  element's media-resource-specific timed tracks&lt;/dfn&gt;, the user
+  agent must remove from the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#list-of-timed-tracks&gt;list
+  of timed tracks&lt;/a&gt; all the &lt;a href=#media-resource-specific-timed-track title=&quot;media-resource-specific
+  timed track&quot;&gt;media-resource-specific timed tracks&lt;/a&gt;.&lt;/p&gt;
+
+
+
   &lt;h6 id=sourcing-out-of-band-timed-tracks&gt;&lt;span class=secno&gt;4.8.10.10.3 &lt;/span&gt;Sourcing out-of-band timed tracks&lt;/h6&gt;
 
-  &lt;p class=XXX&gt;...
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's parent element changes and
+  the new parent is a &lt;a href=#media-element&gt;media element&lt;/a&gt;, then add the
+  &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's corresponding &lt;a href=#timed-track&gt;timed track&lt;/a&gt;
+  to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#list-of-timed-tracks&gt;list of timed
+  tracks&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;!--
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's parent element changes and
+  the old parent was a &lt;a href=#media-element&gt;media element&lt;/a&gt;, then remove the
+  &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's corresponding &lt;a href=#timed-track&gt;timed track&lt;/a&gt;
+  to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#list-of-timed-tracks&gt;list of timed
+  tracks&lt;/a&gt;.&lt;/p&gt;
 
-   - when &lt;track&gt; inserted into media element:
-      - add the timed track to the list of timed tracks
+  &lt;p class=XXX&gt;...&lt;/p&gt;
 
-   - when &lt;track&gt; removed from media element:
-      - remove the track from the list of timed tracks
 
-   - when &lt;track&gt; corresponding to a media element's timed track has a
-     content attribute changed:
-      - kind =&gt; timed track kind
-      - label =&gt; timed track label
-      - srclang =&gt; timed track language
-      - src =&gt; if it's changed, blow away all the cues, set readyState to NONE, then reprocess the mode
+  &lt;h6 id=guidelines-for-exposing-cues-in-various-formats-as-timed-track-cues&gt;&lt;span class=secno&gt;4.8.10.10.4 &lt;/span&gt;&lt;dfn&gt;Guidelines for exposing cues&lt;/dfn&gt; in various formats as
+  &lt;a href=#timed-track-cue title=&quot;timed track cue&quot;&gt;timed track cues&lt;/a&gt;&lt;/h6&gt;
 
-  --&gt;
+  &lt;p class=XXX&gt;...&lt;/p&gt;
 
 
-  &lt;h6 id=timed-track-api&gt;&lt;span class=secno&gt;4.8.10.10.4 &lt;/span&gt;Timed track API&lt;/h6&gt;
+  &lt;h6 id=timed-track-api&gt;&lt;span class=secno&gt;4.8.10.10.5 &lt;/span&gt;Timed track API&lt;/h6&gt;
 
 &lt;!--
   // timed tracks
@@ -26188,7 +26339,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=cue-events&gt;&lt;span class=secno&gt;4.8.10.10.5 &lt;/span&gt;Event definitions&lt;/h6&gt;
+  &lt;h6 id=cue-events&gt;&lt;span class=secno&gt;4.8.10.10.6 &lt;/span&gt;Event definitions&lt;/h6&gt;
 
   &lt;p class=XXX&gt;...
 

Modified: index
===================================================================
--- index	2010-05-06 09:58:45 UTC (rev 5086)
+++ index	2010-05-08 06:37:59 UTC (rev 5087)
@@ -190,7 +190,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;HTML5 (including next generation additions still in development)&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 6 May 2010&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 8 May 2010&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -541,8 +541,10 @@
          &lt;li&gt;&lt;a href=#timed-track-model&gt;&lt;span class=secno&gt;4.8.10.10.1 &lt;/span&gt;Timed track model&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#sourcing-in-band-timed-tracks&gt;&lt;span class=secno&gt;4.8.10.10.2 &lt;/span&gt;Sourcing in-band timed tracks&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#sourcing-out-of-band-timed-tracks&gt;&lt;span class=secno&gt;4.8.10.10.3 &lt;/span&gt;Sourcing out-of-band timed tracks&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#timed-track-api&gt;&lt;span class=secno&gt;4.8.10.10.4 &lt;/span&gt;Timed track API&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#cue-events&gt;&lt;span class=secno&gt;4.8.10.10.5 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#guidelines-for-exposing-cues-in-various-formats-as-timed-track-cues&gt;&lt;span class=secno&gt;4.8.10.10.4 &lt;/span&gt;Guidelines for exposing cues in various formats as
+  timed track cues&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#timed-track-api&gt;&lt;span class=secno&gt;4.8.10.10.5 &lt;/span&gt;Timed track API&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#cue-events&gt;&lt;span class=secno&gt;4.8.10.10.6 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#websrt&gt;&lt;span class=secno&gt;4.8.10.11 &lt;/span&gt;WebSRT&lt;/a&gt;
         &lt;ol&gt;
          &lt;li&gt;&lt;a href=#syntax-0&gt;&lt;span class=secno&gt;4.8.10.11.1 &lt;/span&gt;Syntax&lt;/a&gt;&lt;/li&gt;
@@ -23473,27 +23475,27 @@
 
   &lt;p&gt;The &lt;dfn id=attr-track-kind title=attr-track-kind&gt;&lt;code&gt;kind&lt;/code&gt;&lt;/dfn&gt;
   attribute is an &lt;a href=#enumerated-attribute&gt;enumerated attribute&lt;/a&gt;. The following
-  table lists the keywords defined for this attribute. The states
-  given in the first cell of the rows with keywords give the states to
-  which those keywords map.&lt;/p&gt;
+  table lists the keywords defined for this attribute. The keyword
+  given in the first cell of each row maps to the state given in the
+  second cell.&lt;/p&gt;
 
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;State
-     &lt;th&gt;Keywords
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Keywords
+     &lt;th&gt;State
      &lt;th&gt;Brief description
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-subtitles title=attr-track-kind-subtitles&gt;Subtitles&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-subtitles title=attr-track-kind-keyword-subtitles&gt;&lt;code&gt;subtitles&lt;/code&gt;&lt;/dfn&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-subtitles title=attr-track-kind-keyword-subtitles&gt;&lt;code&gt;subtitles&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-subtitles title=attr-track-kind-subtitles&gt;Subtitles&lt;/dfn&gt;
      &lt;td&gt;Translation of the dialogue, suitable for when the sound is available but not understood (e.g. because the user does not understand the language of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s soundtrack).
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-captions title=attr-track-kind-captions&gt;Captions&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-captions title=attr-track-kind-keyword-captions&gt;&lt;code&gt;captions&lt;/code&gt;&lt;/dfn&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-captions title=attr-track-kind-keyword-captions&gt;&lt;code&gt;captions&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-captions title=attr-track-kind-captions&gt;Captions&lt;/dfn&gt;
      &lt;td&gt;Transcription of the dialogue, suitable for when the soundtrack is unavailable (e.g. because it is muted or because the user is deaf). 
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-descriptions title=attr-track-kind-descriptions&gt;Descriptions&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-descriptions title=attr-track-kind-keyword-descriptions&gt;&lt;code&gt;descriptions&lt;/code&gt;&lt;/dfn&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-descriptions title=attr-track-kind-keyword-descriptions&gt;&lt;code&gt;descriptions&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-descriptions title=attr-track-kind-descriptions&gt;Descriptions&lt;/dfn&gt;
      &lt;td&gt;Textual descriptions of the video component of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, intended for audio synthesis when the visual component is unavailable (e.g. because the user is interacting with the application without a screen while driving, or because the user is blind).
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-chapters title=attr-track-kind-chapters&gt;Chapters&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-chapters title=attr-track-kind-keyword-chapters&gt;&lt;code&gt;chapters&lt;/code&gt;&lt;/dfn&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-chapters title=attr-track-kind-keyword-chapters&gt;&lt;code&gt;chapters&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-chapters title=attr-track-kind-chapters&gt;Chapters&lt;/dfn&gt;
      &lt;td&gt;Chapter titles, intended to be used for navigating the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;.
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-metadata title=attr-track-kind-metadata&gt;Metadata&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn id=attr-track-kind-keyword-metadata title=attr-track-kind-keyword-metadata&gt;&lt;code&gt;metadata&lt;/code&gt;&lt;/dfn&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-track-kind-keyword-metadata title=attr-track-kind-keyword-metadata&gt;&lt;code&gt;metadata&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;dfn id=attr-track-kind-metadata title=attr-track-kind-metadata&gt;Metadata&lt;/dfn&gt;
      &lt;td&gt;Tracks intended for use from script.
   &lt;/table&gt;&lt;p&gt;The attribute may be omitted. The &lt;i&gt;missing value default&lt;/i&gt; is
   the &lt;a href=#attr-track-kind-captions title=attr-track-kind-captions&gt;captions&lt;/a&gt; state.&lt;/p&gt;
@@ -23503,6 +23505,18 @@
   &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL potentially surrounded by
   spaces&lt;/a&gt;. This attribute must be present.&lt;/p&gt;
 
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;If the element has a &lt;code title=attr-track-src&gt;&lt;a href=#attr-track-src&gt;src&lt;/a&gt;&lt;/code&gt;
+  attribute whose value is not the empty string and whose value, when
+  the attribute was set, could be successfully &lt;a href=#resolve-a-url title=&quot;resolve a
+  url&quot;&gt;resolved&lt;/a&gt; relative to the element, then the element's
+  &lt;dfn id=track-url&gt;track URL&lt;/dfn&gt; is the resulting &lt;a href=#absolute-url&gt;absolute
+  URL&lt;/a&gt;. Otherwise, the element has no &lt;a href=#track-url&gt;track
+  URL&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The &lt;dfn id=attr-track-srclang title=attr-track-srclang&gt;&lt;code&gt;srclang&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the language of the time track data. The value must
   be a valid BCP 47 language tag. This attribute must be present if
@@ -23510,16 +23524,81 @@
   in the &lt;a href=#attr-track-kind-subtitles title=attr-track-kind-subtitles&gt;subtitles&lt;/a&gt;
   state. &lt;a href=#refsBCP47&gt;[BCP47]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;If the element has a &lt;code title=attr-track-srclang&gt;&lt;a href=#attr-track-srclang&gt;srclang&lt;/a&gt;&lt;/code&gt; attribute whose value is
+  not the empty string, then the element's &lt;dfn id=track-language&gt;track language&lt;/dfn&gt;
+  is the value of the attribute. Otherwise, the element has no
+  &lt;a href=#track-language&gt;track language&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The &lt;dfn id=attr-track-label title=attr-track-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
   attribute gives a user-readable title for the track.&lt;/p&gt;
 
-  &lt;p&gt;There must not be two &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element children of the
-  same &lt;a href=#media-element&gt;media element&lt;/a&gt; whose &lt;code title=attr-track-kind&gt;&lt;a href=#attr-track-kind&gt;kind&lt;/a&gt;&lt;/code&gt; attributes are in the same
+  &lt;p&gt;The value of the &lt;code title=attr-track-label&gt;&lt;a href=#attr-track-label&gt;label&lt;/a&gt;&lt;/code&gt;
+  attribute, if the attribute is present, must not be the empty
+  string. Furthermore, there must not be two &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt;
+  element children of the same &lt;a href=#media-element&gt;media element&lt;/a&gt; whose &lt;code title=attr-track-kind&gt;&lt;a href=#attr-track-kind&gt;kind&lt;/a&gt;&lt;/code&gt; attributes are in the same
   state, whose &lt;code title=attr-track-srclang&gt;&lt;a href=#attr-track-srclang&gt;srclang&lt;/a&gt;&lt;/code&gt;
   attributes are both missing or have values that represent the same
   language, and whose &lt;code title=attr-track-label&gt;&lt;a href=#attr-track-label&gt;label&lt;/a&gt;&lt;/code&gt;
   attributes are again both missing or both have the same value.&lt;/p&gt;
 
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;If the element has a &lt;code title=attr-track-label&gt;&lt;a href=#attr-track-label&gt;label&lt;/a&gt;&lt;/code&gt;
+  attribute whose value is not the empty string, then the element's
+  &lt;dfn id=track-label&gt;track label&lt;/dfn&gt; is the value of the attribute. Otherwise, the
+  element's &lt;a href=#track-label&gt;track label&lt;/a&gt; is a user-agent defined string
+  (e.g. the string &quot;untitled&quot; in the user's locale, or a value
+  automatically generated from the other attributes).&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element is created, it must be
+  associated with a new &lt;a href=#timed-track&gt;timed track&lt;/a&gt; and its corresponding
+  new &lt;code&gt;&lt;a href=#timedtrack&gt;TimedTrack&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#timed-track-kind&gt;timed track kind&lt;/a&gt; is determined from the state of
+  the element's &lt;code title=attr-track-kind&gt;&lt;a href=#attr-track-kind&gt;kind&lt;/a&gt;&lt;/code&gt; attribute
+  according to the following table; for a state given in a cell of the
+  first column, the &lt;a href=#timed-track-kind title=&quot;timed track kind&quot;&gt;kind&lt;/a&gt; is the
+  string given in the second column:&lt;/p&gt;
+
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;State
+     &lt;th&gt;String
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-subtitles title=attr-track-kind-subtitles&gt;Subtitles&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-subtitles&gt;subtitles&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-captions title=attr-track-kind-captions&gt;Captions&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-captions&gt;captions&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-descriptions title=attr-track-kind-descriptions&gt;Descriptions&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-descriptions&gt;descriptions&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-chapters title=attr-track-kind-chapters&gt;Chapters&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-chapters&gt;chapters&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;a href=#attr-track-kind-metadata title=attr-track-kind-metadata&gt;Metadata&lt;/a&gt;
+     &lt;td&gt;&lt;code title=dom-track-kind-metadata&gt;metadata&lt;/code&gt;
+  &lt;/table&gt;&lt;p&gt;The &lt;a href=#timed-track-label&gt;timed track label&lt;/a&gt; is the element's &lt;a href=#track-label&gt;track
+  label&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;a href=#timed-track-language&gt;timed track language&lt;/a&gt; is the element's
+  &lt;a href=#track-language&gt;track language&lt;/a&gt;, if any, or the empty string
+  otherwise.&lt;/p&gt;
+
+  &lt;p&gt;As the &lt;code title=attr-track-kind&gt;&lt;a href=#attr-track-kind&gt;kind&lt;/a&gt;&lt;/code&gt;, &lt;code title=attr-track-label&gt;&lt;a href=#attr-track-label&gt;label&lt;/a&gt;&lt;/code&gt;, and &lt;code title=attr-track-srclang&gt;&lt;a href=#attr-track-srclang&gt;srclang&lt;/a&gt;&lt;/code&gt; attributes are added,
+  removed, or changed, the &lt;a href=#timed-track&gt;timed track&lt;/a&gt; must update
+  accordingly, as per the definitions above.&lt;/p&gt;
+
+  &lt;p class=XXX&gt;Handle the &lt;a href=#track-url&gt;track URL&lt;/a&gt; and changes
+  thereto. (blocked on defining how the mode is updated and how it
+  affects track loading)&lt;/p&gt;
+
+  &lt;p class=XXX&gt;...cues! state! mode!&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;track&lt;/var&gt; . &lt;code title=dom-track-track&gt;&lt;a href=#dom-track-track&gt;track&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -23530,10 +23609,6 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element is created, it must be
-  associated with a new &lt;a href=#timed-track&gt;timed track&lt;/a&gt; and its corresponding
-  new &lt;code&gt;&lt;a href=#timedtrack&gt;TimedTrack&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
-
   &lt;p&gt;The &lt;dfn id=dom-track-track title=dom-track-track&gt;&lt;code&gt;track&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must, on getting, return the &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's
   &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s corresponding &lt;code&gt;&lt;a href=#timedtrack&gt;TimedTrack&lt;/a&gt;&lt;/code&gt;
@@ -23987,7 +24062,8 @@
      &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
      &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-     &lt;li class=XXX&gt;&lt;p&gt;remove all timed tracks&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;&lt;a href=&quot;#forget-the-media-element's-media-resource-specific-timed-tracks&quot;&gt;Forget the media element's media-resource-specific
+     timed tracks&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is
      not set to &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then set it
@@ -24101,15 +24177,26 @@
      algorithm returns without aborting &lt;em&gt;this&lt;/em&gt; one, then the
      load failed.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;i&gt;Failed&lt;/i&gt;: Reaching this step indicates that the media
-     resource failed to load or that the given &lt;a href=#url&gt;URL&lt;/a&gt; could
-     not be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt;. Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute to a new
-     &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to &lt;code title=dom-MediaError-MEDIA_ERR_SRC_NOT_SUPPORTED&gt;&lt;a href=#dom-mediaerror-media_err_src_not_supported&gt;MEDIA_ERR_SRC_NOT_SUPPORTED&lt;/a&gt;&lt;/code&gt;. &lt;span class=XXX&gt;remove all timed tracks&lt;/span&gt;&lt;/li&gt;
+     &lt;li&gt;
 
-     &lt;li&gt;&lt;p&gt;Set the element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
-     the &lt;a href=#dom-media-network_no_source title=dom-media-NETWORK_NO_SOURCE&gt;NETWORK_NO_SOURCE&lt;/a&gt;
-     value.&lt;/li&gt;
+      &lt;p&gt;&lt;i&gt;Failed&lt;/i&gt;: Reaching this step indicates that the media
+      resource failed to load or that the given &lt;a href=#url&gt;URL&lt;/a&gt; could
+      not be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt;. In one
+      atomic operation, run the following steps:&lt;/p&gt;
 
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt;
+       attribute to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to
+       &lt;code title=dom-MediaError-MEDIA_ERR_SRC_NOT_SUPPORTED&gt;&lt;a href=#dom-mediaerror-media_err_src_not_supported&gt;MEDIA_ERR_SRC_NOT_SUPPORTED&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;a href=&quot;#forget-the-media-element's-media-resource-specific-timed-tracks&quot;&gt;Forget the media element's media-resource-specific
+       timed tracks&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Set the element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
+       the &lt;a href=#dom-media-network_no_source title=dom-media-NETWORK_NO_SOURCE&gt;NETWORK_NO_SOURCE&lt;/a&gt;
+       value.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
      event&lt;/a&gt; named &lt;code title=event-media-error&gt;&lt;a href=#event-media-error&gt;error&lt;/a&gt;&lt;/code&gt;
      at the &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/li&gt;
@@ -24211,8 +24298,7 @@
      &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element, in the context of the &lt;a href=#fetch title=fetch&gt;fetching process&lt;/a&gt; that was used to try to
      obtain &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;'s corresponding &lt;a href=#media-resource&gt;media
      resource&lt;/a&gt; in the &lt;a href=#concept-media-load-resource title=concept-media-load-resource&gt;resource fetch
-     algorithm&lt;/a&gt;. &lt;span class=XXX&gt;remove all timed
-     tracks&lt;/span&gt;&lt;/li&gt;
+     algorithm&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Asynchronously &lt;a href=#await-a-stable-state&gt;await a stable state&lt;/a&gt;. The
      &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt; consists of all the remaining
@@ -24220,6 +24306,9 @@
      &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt; has ended. (Steps in &lt;a href=#synchronous-section title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/a&gt; are
      marked with &#8987;.)&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;&#8987; &lt;a href=&quot;#forget-the-media-element's-media-resource-specific-timed-tracks&quot;&gt;Forget the media element's
+     media-resource-specific timed tracks&lt;/a&gt;.&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;&#8987; &lt;i title=&quot;&quot;&gt;Find next candidate&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be null.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;&#8987; &lt;i title=&quot;&quot;&gt;Search loop&lt;/i&gt;: If the node after
@@ -24379,15 +24468,13 @@
      &lt;dt id=getting-media-metadata&gt;Once enough of the &lt;a href=#media-data&gt;media
      data&lt;/a&gt; has been fetched to determine the duration of the
      &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, its dimensions, and other
-     metadata&lt;/dt&gt;
+     metadata, and once &lt;a href=#the-timed-tracks-are-ready&gt;the timed tracks are ready&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
       &lt;p&gt;This indicates that the resource is usable. The user agent
       must follow these substeps:&lt;/p&gt;
 
-      &lt;p class=XXX&gt;this needs to wait until all active timed tracks have loaded also&lt;/p&gt;
-
       &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to the
        &lt;a href=#earliest-possible-position&gt;earliest possible position&lt;/a&gt;.&lt;/li&gt;
 
@@ -24605,11 +24692,12 @@
      &lt;/dd&gt;
 
 
-     &lt;dt class=XXX&gt;timed tracks are found&lt;/dt&gt;
+     &lt;dt id=found-a-media-resource-specific-timed-track&gt;If the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; is found to declare a &lt;a href=#media-resource-specific-timed-track&gt;media-resource-specific timed track&lt;/a&gt; that the user agent supports&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p class=XXX&gt;...
+      &lt;p&gt;Run the &lt;a href=#steps-to-expose-a-media-resource-specific-timed-track&gt;steps to expose a media-resource-specific timed
+      track&lt;/a&gt; with the relevant data.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -25690,9 +25778,10 @@
    the &lt;code title=dom-media-addTrack&gt;addTrack()&lt;/code&gt; method, in
    the order they were added, oldest first.&lt;/li&gt;
 
-   &lt;li&gt;Any &lt;a href=#timed-track title=&quot;timed track&quot;&gt;timed tracks&lt;/a&gt; corresponding
-   to data in the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, in the order defined by
-   the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s format specification.&lt;/li&gt;
+   &lt;li&gt;Any &lt;a href=#media-resource-specific-timed-track title=&quot;media-resource-specific timed
+   track&quot;&gt;media-resource-specific timed tracks&lt;/a&gt; (&lt;a href=#timed-track title=&quot;timed track&quot;&gt;timed tracks&lt;/a&gt; corresponding to data in
+   the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;), in the order defined by the
+   &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s format specification.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;A &lt;a href=#timed-track&gt;timed track&lt;/a&gt; consists of:&lt;/p&gt;
 
@@ -25982,35 +26071,97 @@
   cue&lt;/a&gt; is associated with a particular &lt;a href=#timed-track&gt;timed track&lt;/a&gt;,
   the association is permanent.&lt;/p&gt;
 
+  &lt;p class=XXX&gt;&lt;dfn id=the-timed-tracks-are-ready&gt;the timed tracks are ready&lt;/dfn&gt;&lt;/p&gt;
 
+
   &lt;h6 id=sourcing-in-band-timed-tracks&gt;&lt;span class=secno&gt;4.8.10.10.2 &lt;/span&gt;Sourcing in-band timed tracks&lt;/h6&gt;
 
-  &lt;p class=XXX&gt;...
+  &lt;p&gt;A &lt;dfn id=media-resource-specific-timed-track&gt;media-resource-specific timed track&lt;/dfn&gt; is a &lt;a href=#timed-track&gt;timed
+  track&lt;/a&gt; that corresponds to data found in the &lt;a href=#media-resource&gt;media
+  resource&lt;/a&gt;. Rules for processing and rendering such data are
+  defined by the relevant specifications, e.g. the specification of
+  the video format if the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; is a video.&lt;/p&gt;
 
+  &lt;p&gt;When a &lt;a href=#media-resource&gt;media resource&lt;/a&gt; contains data that the user
+  agent recognises and supports as being equivalent to a &lt;a href=#timed-track&gt;timed
+  track&lt;/a&gt;, the user agent &lt;a href=#found-a-media-resource-specific-timed-track&gt;runs&lt;/a&gt; the
+  &lt;dfn id=steps-to-expose-a-media-resource-specific-timed-track&gt;steps to expose a media-resource-specific timed track&lt;/dfn&gt;
+  with the relevant data, as follows:&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Associate the relevant data with a new &lt;a href=#timed-track&gt;timed
+   track&lt;/a&gt; and its corresponding new &lt;code&gt;&lt;a href=#timedtrack&gt;TimedTrack&lt;/a&gt;&lt;/code&gt;
+   object. The &lt;a href=#timed-track&gt;timed track&lt;/a&gt; is a
+   &lt;a href=#media-resource-specific-timed-track&gt;media-resource-specific timed track&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s &lt;a href=#timed-track-kind title=&quot;timed track
+   kind&quot;&gt;kind&lt;/a&gt;, &lt;a href=#timed-track-label title=&quot;timed track label&quot;&gt;label&lt;/a&gt;,
+   and &lt;a href=#timed-track-language title=&quot;timed track language&quot;&gt;language&lt;/a&gt; based on the
+   semantics of the relevant data, as defined by the relevant
+   specification.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Populate the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s &lt;a href=#timed-track-list-of-cues title=&quot;timed track list of cues&quot;&gt;list of cues&lt;/a&gt; with the cues
+   parsed so far, folllowing the &lt;a href=#guidelines-for-exposing-cues-in-various-formats-as-timed-track-cues&gt;guidelines for exposing
+   cues&lt;/a&gt;, and begin updating it dynamically as
+   necessary.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Set the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s &lt;a href=#timed-track-readiness-state title=&quot;timed track
+    readiness state&quot;&gt;readiness state&lt;/a&gt; to the value that most
+    correctly describes the current state, and begin updating it
+    dynamically as necessary.&lt;/p&gt;
+
+    &lt;p class=example&gt;For example, if the relevant data in the
+    &lt;a href=#media-resource&gt;media resource&lt;/a&gt; has been fully parsed and completely
+    describes the cues, then the &lt;a href=#timed-track&gt;timed track&lt;/a&gt; would be
+    &lt;a href=#timed-track-loaded title=&quot;timed track loaded&quot;&gt;loaded&lt;/a&gt;. On the other hand,
+    if the data for the cues is interleaved with the &lt;a href=#media-data&gt;media
+    data&lt;/a&gt;, and the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; as a whole is
+    still being downloaded, then the &lt;a href=#timed-track-loading title=&quot;timed track
+    loading&quot;&gt;loading&lt;/a&gt; state might be more accurate.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt;'s &lt;a href=#timed-track-mode title=&quot;timed
+   track mode&quot;&gt;mode&lt;/a&gt; to the mode consistent with the user's
+   preferences and the requirements of the relevant specification for
+   the data.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add the new &lt;a href=#timed-track&gt;timed track&lt;/a&gt; to the &lt;a href=#media-element&gt;media
+   element&lt;/a&gt;'s &lt;a href=#list-of-timed-tracks&gt;list of timed tracks&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When a &lt;a href=#media-element&gt;media element&lt;/a&gt; is to &lt;dfn id=&quot;forget-the-media-element's-media-resource-specific-timed-tracks&quot;&gt;forget the media
+  element's media-resource-specific timed tracks&lt;/dfn&gt;, the user
+  agent must remove from the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#list-of-timed-tracks&gt;list
+  of timed tracks&lt;/a&gt; all the &lt;a href=#media-resource-specific-timed-track title=&quot;media-resource-specific
+  timed track&quot;&gt;media-resource-specific timed tracks&lt;/a&gt;.&lt;/p&gt;
+
+
+
   &lt;h6 id=sourcing-out-of-band-timed-tracks&gt;&lt;span class=secno&gt;4.8.10.10.3 &lt;/span&gt;Sourcing out-of-band timed tracks&lt;/h6&gt;
 
-  &lt;p class=XXX&gt;...
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's parent element changes and
+  the new parent is a &lt;a href=#media-element&gt;media element&lt;/a&gt;, then add the
+  &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's corresponding &lt;a href=#timed-track&gt;timed track&lt;/a&gt;
+  to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#list-of-timed-tracks&gt;list of timed
+  tracks&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;!--
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's parent element changes and
+  the old parent was a &lt;a href=#media-element&gt;media element&lt;/a&gt;, then remove the
+  &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; element's corresponding &lt;a href=#timed-track&gt;timed track&lt;/a&gt;
+  to the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#list-of-timed-tracks&gt;list of timed
+  tracks&lt;/a&gt;.&lt;/p&gt;
 
-   - when &lt;track&gt; inserted into media element:
-      - add the timed track to the list of timed tracks
+  &lt;p class=XXX&gt;...&lt;/p&gt;
 
-   - when &lt;track&gt; removed from media element:
-      - remove the track from the list of timed tracks
 
-   - when &lt;track&gt; corresponding to a media element's timed track has a
-     content attribute changed:
-      - kind =&gt; timed track kind
-      - label =&gt; timed track label
-      - srclang =&gt; timed track language
-      - src =&gt; if it's changed, blow away all the cues, set readyState to NONE, then reprocess the mode
+  &lt;h6 id=guidelines-for-exposing-cues-in-various-formats-as-timed-track-cues&gt;&lt;span class=secno&gt;4.8.10.10.4 &lt;/span&gt;&lt;dfn&gt;Guidelines for exposing cues&lt;/dfn&gt; in various formats as
+  &lt;a href=#timed-track-cue title=&quot;timed track cue&quot;&gt;timed track cues&lt;/a&gt;&lt;/h6&gt;
 
-  --&gt;
+  &lt;p class=XXX&gt;...&lt;/p&gt;
 
 
-  &lt;h6 id=timed-track-api&gt;&lt;span class=secno&gt;4.8.10.10.4 &lt;/span&gt;Timed track API&lt;/h6&gt;
+  &lt;h6 id=timed-track-api&gt;&lt;span class=secno&gt;4.8.10.10.5 &lt;/span&gt;Timed track API&lt;/h6&gt;
 
 &lt;!--
   // timed tracks
@@ -26089,7 +26240,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=cue-events&gt;&lt;span class=secno&gt;4.8.10.10.5 &lt;/span&gt;Event definitions&lt;/h6&gt;
+  &lt;h6 id=cue-events&gt;&lt;span class=secno&gt;4.8.10.10.6 &lt;/span&gt;Event definitions&lt;/h6&gt;
 
   &lt;p class=XXX&gt;...
 

Modified: source
===================================================================
--- source	2010-05-06 09:58:45 UTC (rev 5086)
+++ source	2010-05-08 06:37:59 UTC (rev 5087)
@@ -25204,36 +25204,36 @@
 
   &lt;p&gt;The &lt;dfn title=&quot;attr-track-kind&quot;&gt;&lt;code&gt;kind&lt;/code&gt;&lt;/dfn&gt;
   attribute is an &lt;span&gt;enumerated attribute&lt;/span&gt;. The following
-  table lists the keywords defined for this attribute. The states
-  given in the first cell of the rows with keywords give the states to
-  which those keywords map.&lt;/p&gt;
+  table lists the keywords defined for this attribute. The keyword
+  given in the first cell of each row maps to the state given in the
+  second cell.&lt;/p&gt;
 
   &lt;table&gt;
    &lt;thead&gt;
     &lt;tr&gt;
+     &lt;th&gt;Keywords
      &lt;th&gt;State
-     &lt;th&gt;Keywords
      &lt;th&gt;Brief description
    &lt;tbody&gt;
     &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-subtitles&quot;&gt;&lt;code&gt;subtitles&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-subtitles&quot;&gt;Subtitles&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-subtitles&quot;&gt;&lt;code&gt;subtitles&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;Translation of the dialogue, suitable for when the sound is available but not understood (e.g. because the user does not understand the language of the &lt;span&gt;media resource&lt;/span&gt;'s soundtrack).
     &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-captions&quot;&gt;&lt;code&gt;captions&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-captions&quot;&gt;Captions&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-captions&quot;&gt;&lt;code&gt;captions&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;Transcription of the dialogue, suitable for when the soundtrack is unavailable (e.g. because it is muted or because the user is deaf). 
     &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-descriptions&quot;&gt;&lt;code&gt;descriptions&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-descriptions&quot;&gt;Descriptions&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-descriptions&quot;&gt;&lt;code&gt;descriptions&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;Textual descriptions of the video component of the &lt;span&gt;media resource&lt;/span&gt;, intended for audio synthesis when the visual component is unavailable (e.g. because the user is interacting with the application without a screen while driving, or because the user is blind).
     &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-chapters&quot;&gt;&lt;code&gt;chapters&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-chapters&quot;&gt;Chapters&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-chapters&quot;&gt;&lt;code&gt;chapters&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;Chapter titles, intended to be used for navigating the &lt;span&gt;media resource&lt;/span&gt;.
     &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-metadata&quot;&gt;&lt;code&gt;metadata&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-metadata&quot;&gt;Metadata&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;attr-track-kind-keyword-metadata&quot;&gt;&lt;code&gt;metadata&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;Tracks intended for use from script.
   &lt;/table&gt;
 
@@ -25245,6 +25245,18 @@
   &lt;span&gt;valid non-empty URL potentially surrounded by
   spaces&lt;/span&gt;. This attribute must be present.&lt;/p&gt;
 
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;If the element has a &lt;code title=&quot;attr-track-src&quot;&gt;src&lt;/code&gt;
+  attribute whose value is not the empty string and whose value, when
+  the attribute was set, could be successfully &lt;span title=&quot;resolve a
+  url&quot;&gt;resolved&lt;/span&gt; relative to the element, then the element's
+  &lt;dfn&gt;track URL&lt;/dfn&gt; is the resulting &lt;span&gt;absolute
+  URL&lt;/span&gt;. Otherwise, the element has no &lt;span&gt;track
+  URL&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;attr-track-srclang&quot;&gt;&lt;code&gt;srclang&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the language of the time track data. The value must
   be a valid BCP 47 language tag. This attribute must be present if
@@ -25252,17 +25264,96 @@
   in the &lt;span title=&quot;attr-track-kind-subtitles&quot;&gt;subtitles&lt;/span&gt;
   state. &lt;a href=&quot;#refsBCP47&quot;&gt;[BCP47]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;If the element has a &lt;code
+  title=&quot;attr-track-srclang&quot;&gt;srclang&lt;/code&gt; attribute whose value is
+  not the empty string, then the element's &lt;dfn&gt;track language&lt;/dfn&gt;
+  is the value of the attribute. Otherwise, the element has no
+  &lt;span&gt;track language&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;attr-track-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
   attribute gives a user-readable title for the track.&lt;/p&gt;
 
-  &lt;p&gt;There must not be two &lt;code&gt;track&lt;/code&gt; element children of the
-  same &lt;span&gt;media element&lt;/span&gt; whose &lt;code
+  &lt;p&gt;The value of the &lt;code title=&quot;attr-track-label&quot;&gt;label&lt;/code&gt;
+  attribute, if the attribute is present, must not be the empty
+  string. Furthermore, there must not be two &lt;code&gt;track&lt;/code&gt;
+  element children of the same &lt;span&gt;media element&lt;/span&gt; whose &lt;code
   title=&quot;attr-track-kind&quot;&gt;kind&lt;/code&gt; attributes are in the same
   state, whose &lt;code title=&quot;attr-track-srclang&quot;&gt;srclang&lt;/code&gt;
   attributes are both missing or have values that represent the same
   language, and whose &lt;code title=&quot;attr-track-label&quot;&gt;label&lt;/code&gt;
   attributes are again both missing or both have the same value.&lt;/p&gt;
 
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;If the element has a &lt;code title=&quot;attr-track-label&quot;&gt;label&lt;/code&gt;
+  attribute whose value is not the empty string, then the element's
+  &lt;dfn&gt;track label&lt;/dfn&gt; is the value of the attribute. Otherwise, the
+  element's &lt;span&gt;track label&lt;/span&gt; is a user-agent defined string
+  (e.g. the string &quot;untitled&quot; in the user's locale, or a value
+  automatically generated from the other attributes).&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;When a &lt;code&gt;track&lt;/code&gt; element is created, it must be
+  associated with a new &lt;span&gt;timed track&lt;/span&gt; and its corresponding
+  new &lt;code&gt;TimedTrack&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;span&gt;timed track kind&lt;/span&gt; is determined from the state of
+  the element's &lt;code title=&quot;attr-track-kind&quot;&gt;kind&lt;/code&gt; attribute
+  according to the following table; for a state given in a cell of the
+  first column, the &lt;span title=&quot;timed track kind&quot;&gt;kind&lt;/span&gt; is the
+  string given in the second column:&lt;/p&gt;
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt;
+     &lt;th&gt;State
+     &lt;th&gt;String
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;span title=&quot;attr-track-kind-subtitles&quot;&gt;Subtitles&lt;/span&gt;
+     &lt;td&gt;&lt;code title=&quot;dom-track-kind-subtitles&quot;&gt;subtitles&lt;/code&gt;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;span title=&quot;attr-track-kind-captions&quot;&gt;Captions&lt;/span&gt;
+     &lt;td&gt;&lt;code title=&quot;dom-track-kind-captions&quot;&gt;captions&lt;/code&gt;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;span title=&quot;attr-track-kind-descriptions&quot;&gt;Descriptions&lt;/span&gt;
+     &lt;td&gt;&lt;code title=&quot;dom-track-kind-descriptions&quot;&gt;descriptions&lt;/code&gt;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;span title=&quot;attr-track-kind-chapters&quot;&gt;Chapters&lt;/span&gt;
+     &lt;td&gt;&lt;code title=&quot;dom-track-kind-chapters&quot;&gt;chapters&lt;/code&gt;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;span title=&quot;attr-track-kind-metadata&quot;&gt;Metadata&lt;/span&gt;
+     &lt;td&gt;&lt;code title=&quot;dom-track-kind-metadata&quot;&gt;metadata&lt;/code&gt;
+  &lt;/table&gt;
+
+  &lt;p&gt;The &lt;span&gt;timed track label&lt;/span&gt; is the element's &lt;span&gt;track
+  label&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;span&gt;timed track language&lt;/span&gt; is the element's
+  &lt;span&gt;track language&lt;/span&gt;, if any, or the empty string
+  otherwise.&lt;/p&gt;
+
+  &lt;p&gt;As the &lt;code title=&quot;attr-track-kind&quot;&gt;kind&lt;/code&gt;, &lt;code
+  title=&quot;attr-track-label&quot;&gt;label&lt;/code&gt;, and &lt;code
+  title=&quot;attr-track-srclang&quot;&gt;srclang&lt;/code&gt; attributes are added,
+  removed, or changed, the &lt;span&gt;timed track&lt;/span&gt; must update
+  accordingly, as per the definitions above.&lt;/p&gt;
+
+  &lt;p class=&quot;XXX&quot;&gt;Handle the &lt;span&gt;track URL&lt;/span&gt; and changes
+  thereto. (blocked on defining how the mode is updated and how it
+  affects track loading)&lt;/p&gt;
+
+  &lt;p class=&quot;XXX&quot;&gt;...cues! state! mode!&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;dl class=&quot;domintro&quot;&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;track&lt;/var&gt; . &lt;code title=&quot;dom-track-track&quot;&gt;track&lt;/code&gt;&lt;/dt&gt;
@@ -25277,10 +25368,6 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;When a &lt;code&gt;track&lt;/code&gt; element is created, it must be
-  associated with a new &lt;span&gt;timed track&lt;/span&gt; and its corresponding
-  new &lt;code&gt;TimedTrack&lt;/code&gt; object.&lt;/p&gt;
-
   &lt;p&gt;The &lt;dfn title=&quot;dom-track-track&quot;&gt;&lt;code&gt;track&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must, on getting, return the &lt;code&gt;track&lt;/code&gt; element's
   &lt;span&gt;timed track&lt;/span&gt;'s corresponding &lt;code&gt;TimedTrack&lt;/code&gt;
@@ -25808,7 +25895,8 @@
      &lt;code
      title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li class=&quot;XXX&quot;&gt;&lt;p&gt;remove all timed tracks&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Forget the media element's media-resource-specific
+     timed tracks&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; is
      not set to &lt;code
@@ -25954,21 +26042,34 @@
      algorithm returns without aborting &lt;em&gt;this&lt;/em&gt; one, then the
      load failed.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;i&gt;Failed&lt;/i&gt;: Reaching this step indicates that the media
-     resource failed to load or that the given &lt;span&gt;URL&lt;/span&gt; could
-     not be &lt;span title=&quot;resolve a url&quot;&gt;resolved&lt;/span&gt;. Set the &lt;code
-     title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute to a new
-     &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
-     title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to &lt;code
-     title=&quot;dom-MediaError-MEDIA_ERR_SRC_NOT_SUPPORTED&quot;&gt;MEDIA_ERR_SRC_NOT_SUPPORTED&lt;/code&gt;. &lt;span
-     class=&quot;XXX&quot;&gt;remove all timed tracks&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;
 
-     &lt;li&gt;&lt;p&gt;Set the element's &lt;code
-     title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute to
-     the &lt;span
-     title=&quot;dom-media-NETWORK_NO_SOURCE&quot;&gt;NETWORK_NO_SOURCE&lt;/span&gt;
-     value.&lt;/p&gt;&lt;/li&gt;
+      &lt;p&gt;&lt;i&gt;Failed&lt;/i&gt;: Reaching this step indicates that the media
+      resource failed to load or that the given &lt;span&gt;URL&lt;/span&gt; could
+      not be &lt;span title=&quot;resolve a url&quot;&gt;resolved&lt;/span&gt;. In one
+      atomic operation, run the following steps:&lt;/p&gt;
 
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;Set the &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt;
+       attribute to a new &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
+       title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to
+       &lt;code
+       title=&quot;dom-MediaError-MEDIA_ERR_SRC_NOT_SUPPORTED&quot;&gt;MEDIA_ERR_SRC_NOT_SUPPORTED&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;span&gt;Forget the media element's media-resource-specific
+       timed tracks&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Set the element's &lt;code
+       title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute to
+       the &lt;span
+       title=&quot;dom-media-NETWORK_NO_SOURCE&quot;&gt;NETWORK_NO_SOURCE&lt;/span&gt;
+       value.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
      event&lt;/span&gt; named &lt;code title=&quot;event-media-error&quot;&gt;error&lt;/code&gt;
      at the &lt;span&gt;media element&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -26097,8 +26198,7 @@
      obtain &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;'s corresponding &lt;span&gt;media
      resource&lt;/span&gt; in the &lt;span
      title=&quot;concept-media-load-resource&quot;&gt;resource fetch
-     algorithm&lt;/span&gt;. &lt;span class=&quot;XXX&quot;&gt;remove all timed
-     tracks&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
+     algorithm&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Asynchronously &lt;span&gt;await a stable state&lt;/span&gt;. The
      &lt;span&gt;synchronous section&lt;/span&gt; consists of all the remaining
@@ -26107,6 +26207,9 @@
      title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/span&gt; are
      marked with &amp;#x231B;.)&lt;/p&gt;&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;&amp;#x231B; &lt;span&gt;Forget the media element's
+     media-resource-specific timed tracks&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;&amp;#x231B; &lt;i title=&quot;&quot;&gt;Find next candidate&lt;/i&gt;: Let &lt;var
      title=&quot;&quot;&gt;candidate&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
 
@@ -26297,15 +26400,13 @@
      &lt;dt id=&quot;getting-media-metadata&quot;&gt;Once enough of the &lt;span&gt;media
      data&lt;/span&gt; has been fetched to determine the duration of the
      &lt;span&gt;media resource&lt;/span&gt;, its dimensions, and other
-     metadata&lt;/dt&gt;
+     metadata, and once &lt;span&gt;the timed tracks are ready&lt;/span&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
       &lt;p&gt;This indicates that the resource is usable. The user agent
       must follow these substeps:&lt;/p&gt;
 
-      &lt;p class=&quot;XXX&quot;&gt;this needs to wait until all active timed tracks have loaded also&lt;/p&gt;
-
       &lt;ol&gt;
 
        &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current playback position&lt;/span&gt; to the
@@ -26571,11 +26672,12 @@
      &lt;/dd&gt;
 
 
-     &lt;dt class=&quot;XXX&quot;&gt;timed tracks are found&lt;/dt&gt;
+     &lt;dt id=&quot;found-a-media-resource-specific-timed-track&quot;&gt;If the &lt;span&gt;media resource&lt;/span&gt; is found to declare a &lt;span&gt;media-resource-specific timed track&lt;/span&gt; that the user agent supports&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p class=&quot;XXX&quot;&gt;...
+      &lt;p&gt;Run the &lt;span&gt;steps to expose a media-resource-specific timed
+      track&lt;/span&gt; with the relevant data.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -27869,9 +27971,11 @@
    the &lt;code title=&quot;dom-media-addTrack&quot;&gt;addTrack()&lt;/code&gt; method, in
    the order they were added, oldest first.&lt;/li&gt;
 
-   &lt;li&gt;Any &lt;span title=&quot;timed track&quot;&gt;timed tracks&lt;/span&gt; corresponding
-   to data in the &lt;span&gt;media resource&lt;/span&gt;, in the order defined by
-   the &lt;span&gt;media resource&lt;/span&gt;'s format specification.&lt;/li&gt;
+   &lt;li&gt;Any &lt;span title=&quot;media-resource-specific timed
+   track&quot;&gt;media-resource-specific timed tracks&lt;/span&gt; (&lt;span
+   title=&quot;timed track&quot;&gt;timed tracks&lt;/span&gt; corresponding to data in
+   the &lt;span&gt;media resource&lt;/span&gt;), in the order defined by the
+   &lt;span&gt;media resource&lt;/span&gt;'s format specification.&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -28191,32 +28295,100 @@
   cue&lt;/span&gt; is associated with a particular &lt;span&gt;timed track&lt;/span&gt;,
   the association is permanent.&lt;/p&gt;
 
+  &lt;p class=&quot;XXX&quot;&gt;&lt;dfn&gt;the timed tracks are ready&lt;/dfn&gt;&lt;/p&gt;
 
+
   &lt;h6&gt;Sourcing in-band timed tracks&lt;/h6&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;...
+  &lt;p&gt;A &lt;dfn&gt;media-resource-specific timed track&lt;/dfn&gt; is a &lt;span&gt;timed
+  track&lt;/span&gt; that corresponds to data found in the &lt;span&gt;media
+  resource&lt;/span&gt;. Rules for processing and rendering such data are
+  defined by the relevant specifications, e.g. the specification of
+  the video format if the &lt;span&gt;media resource&lt;/span&gt; is a video.&lt;/p&gt;
 
+  &lt;p&gt;When a &lt;span&gt;media resource&lt;/span&gt; contains data that the user
+  agent recognises and supports as being equivalent to a &lt;span&gt;timed
+  track&lt;/span&gt;, the user agent &lt;a
+  href=&quot;#found-a-media-resource-specific-timed-track&quot;&gt;runs&lt;/a&gt; the
+  &lt;dfn&gt;steps to expose a media-resource-specific timed track&lt;/dfn&gt;
+  with the relevant data, as follows:&lt;/p&gt;
 
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Associate the relevant data with a new &lt;span&gt;timed
+   track&lt;/span&gt; and its corresponding new &lt;code&gt;TimedTrack&lt;/code&gt;
+   object. The &lt;span&gt;timed track&lt;/span&gt; is a
+   &lt;span&gt;media-resource-specific timed track&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the new &lt;span&gt;timed track&lt;/span&gt;'s &lt;span title=&quot;timed track
+   kind&quot;&gt;kind&lt;/span&gt;, &lt;span title=&quot;timed track label&quot;&gt;label&lt;/span&gt;,
+   and &lt;span title=&quot;timed track language&quot;&gt;language&lt;/span&gt; based on the
+   semantics of the relevant data, as defined by the relevant
+   specification.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Populate the new &lt;span&gt;timed track&lt;/span&gt;'s &lt;span
+   title=&quot;timed track list of cues&quot;&gt;list of cues&lt;/span&gt; with the cues
+   parsed so far, folllowing the &lt;span&gt;guidelines for exposing
+   cues&lt;/span&gt;, and begin updating it dynamically as
+   necessary.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Set the new &lt;span&gt;timed track&lt;/span&gt;'s &lt;span title=&quot;timed track
+    readiness state&quot;&gt;readiness state&lt;/span&gt; to the value that most
+    correctly describes the current state, and begin updating it
+    dynamically as necessary.&lt;/p&gt;
+
+    &lt;p class=&quot;example&quot;&gt;For example, if the relevant data in the
+    &lt;span&gt;media resource&lt;/span&gt; has been fully parsed and completely
+    describes the cues, then the &lt;span&gt;timed track&lt;/span&gt; would be
+    &lt;span title=&quot;timed track loaded&quot;&gt;loaded&lt;/span&gt;. On the other hand,
+    if the data for the cues is interleaved with the &lt;span&gt;media
+    data&lt;/span&gt;, and the &lt;span&gt;media resource&lt;/span&gt; as a whole is
+    still being downloaded, then the &lt;span title=&quot;timed track
+    loading&quot;&gt;loading&lt;/span&gt; state might be more accurate.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the new &lt;span&gt;timed track&lt;/span&gt;'s &lt;span title=&quot;timed
+   track mode&quot;&gt;mode&lt;/span&gt; to the mode consistent with the user's
+   preferences and the requirements of the relevant specification for
+   the data.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add the new &lt;span&gt;timed track&lt;/span&gt; to the &lt;span&gt;media
+   element&lt;/span&gt;'s &lt;span&gt;list of timed tracks&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;When a &lt;span&gt;media element&lt;/span&gt; is to &lt;dfn&gt;forget the media
+  element's media-resource-specific timed tracks&lt;/dfn&gt;, the user
+  agent must remove from the &lt;span&gt;media element&lt;/span&gt;'s &lt;span&gt;list
+  of timed tracks&lt;/span&gt; all the &lt;span title=&quot;media-resource-specific
+  timed track&quot;&gt;media-resource-specific timed tracks&lt;/span&gt;.&lt;/p&gt;
+
+
+
   &lt;h6&gt;Sourcing out-of-band timed tracks&lt;/h6&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;...
+  &lt;p&gt;When a &lt;code&gt;track&lt;/code&gt; element's parent element changes and
+  the new parent is a &lt;span&gt;media element&lt;/span&gt;, then add the
+  &lt;code&gt;track&lt;/code&gt; element's corresponding &lt;span&gt;timed track&lt;/span&gt;
+  to the &lt;span&gt;media element&lt;/span&gt;'s &lt;span&gt;list of timed
+  tracks&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;!--
+  &lt;p&gt;When a &lt;code&gt;track&lt;/code&gt; element's parent element changes and
+  the old parent was a &lt;span&gt;media element&lt;/span&gt;, then remove the
+  &lt;code&gt;track&lt;/code&gt; element's corresponding &lt;span&gt;timed track&lt;/span&gt;
+  to the &lt;span&gt;media element&lt;/span&gt;'s &lt;span&gt;list of timed
+  tracks&lt;/span&gt;.&lt;/p&gt;
 
-   - when &lt;track&gt; inserted into media element:
-      - add the timed track to the list of timed tracks
+  &lt;p class=&quot;XXX&quot;&gt;...&lt;/p&gt;
 
-   - when &lt;track&gt; removed from media element:
-      - remove the track from the list of timed tracks
 
-   - when &lt;track&gt; corresponding to a media element's timed track has a
-     content attribute changed:
-      - kind =&gt; timed track kind
-      - label =&gt; timed track label
-      - srclang =&gt; timed track language
-      - src =&gt; if it's changed, blow away all the cues, set readyState to NONE, then reprocess the mode
+  &lt;h6&gt;&lt;dfn&gt;Guidelines for exposing cues&lt;/dfn&gt; in various formats as
+  &lt;span title=&quot;timed track cue&quot;&gt;timed track cues&lt;/span&gt;&lt;/h6&gt;
 
-  --&gt;
+  &lt;p class=&quot;XXX&quot;&gt;...&lt;/p&gt;
 
 
   &lt;h6&gt;Timed track API&lt;/h6&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011957.html">[html5] r5086 - [e] (0) update bugs db links
</A></li>
	<LI>Next message: <A HREF="011959.html">[html5] r5088 - [e] (0) multipage complete thanks to anne
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11958">[ date ]</a>
              <a href="thread.html#11958">[ thread ]</a>
              <a href="subject.html#11958">[ subject ]</a>
              <a href="author.html#11958">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
