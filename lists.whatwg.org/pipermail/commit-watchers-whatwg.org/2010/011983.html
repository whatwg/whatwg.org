<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r5113 - [c] (0) Captions - Stage 11.5: Parsing WebSRT cue	settings.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5113%20-%20%5Bc%5D%20%280%29%20Captions%20-%20Stage%2011.5%3A%20Parsing%20WebSRT%20cue%0A%09settings.&In-Reply-To=%3C20100626005542.104B28058094%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011982.html">
   <LINK REL="Next"  HREF="011984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r5113 - [c] (0) Captions - Stage 11.5: Parsing WebSRT cue	settings.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5113%20-%20%5Bc%5D%20%280%29%20Captions%20-%20Stage%2011.5%3A%20Parsing%20WebSRT%20cue%0A%09settings.&In-Reply-To=%3C20100626005542.104B28058094%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r5113 - [c] (0) Captions - Stage 11.5: Parsing WebSRT cue	settings.">whatwg at whatwg.org
       </A><BR>
    <I>Fri Jun 25 17:55:42 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="011982.html">[html5] r5112 - [c] (0) Captions - Stage 11.4: Finish defining the	settings and timings part of [...]
</A></li>
        <LI>Next message: <A HREF="011984.html">[html5] r5114 - [giow] (0) Captions - Stage 11.6: Parsing bad cues	in WebSRT.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11983">[ date ]</a>
              <a href="thread.html#11983">[ thread ]</a>
              <a href="subject.html#11983">[ subject ]</a>
              <a href="author.html#11983">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-06-25 17:55:41 -0700 (Fri, 25 Jun 2010)
New Revision: 5113

Modified:
   complete.html
   index
   source
Log:
[c] (0) Captions - Stage 11.5: Parsing WebSRT cue settings.

Modified: complete.html
===================================================================
--- complete.html	2010-06-25 21:40:00 UTC (rev 5112)
+++ complete.html	2010-06-26 00:55:41 UTC (rev 5113)
@@ -209,7 +209,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;Web Applications 1.0&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 25 June 2010&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 26 June 2010&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -26211,10 +26211,13 @@
 
    &lt;dt&gt;&lt;dfn id=timed-track-cue-line-position title=&quot;timed track cue line position&quot;&gt;A line position&lt;/dfn&gt;
    &lt;dd&gt;
-    &lt;p&gt;A number giving the position of the lines of the cue, to be
-    interpreted as defined by the &lt;a href=#timed-track-cue-writing-direction title=&quot;timed track cue writing
-    direction&quot;&gt;writing direction&lt;/a&gt; and &lt;a href=#timed-track-cue-snap-to-lines-flag title=&quot;timed track
-    cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/a&gt; of the cue.&lt;/p&gt;
+    &lt;p&gt;Either a number giving the position of the lines of the cue, to
+    be interpreted as defined by the &lt;a href=#timed-track-cue-writing-direction title=&quot;timed track cue
+    writing direction&quot;&gt;writing direction&lt;/a&gt; and &lt;a href=#timed-track-cue-snap-to-lines-flag title=&quot;timed
+    track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/a&gt; of the
+    cue, or the special value &lt;dfn id=timed-track-cue-automatic-line-position title=&quot;timed track cue automatic line
+    position&quot;&gt;auto&lt;/dfn&gt;, which means the position is to depend on
+    the other active tracks.&lt;/p&gt;
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn id=timed-track-cue-text-position title=&quot;timed track cue text position&quot;&gt;A text position&lt;/dfn&gt;
@@ -26769,14 +26772,20 @@
   component must not be included more than once per &lt;a href=#websrt-cue-settings&gt;WebSRT cue
   settings&lt;/a&gt; string.&lt;/p&gt;
 
-  &lt;ul class=brief&gt;&lt;li&gt;A &lt;a href=#websrt-line-position-cue-setting&gt;WebSRT line position cue setting&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;a href=#websrt-text-position-cue-setting&gt;WebSRT text position cue setting&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;a href=#websrt-alignment-cue-setting&gt;WebSRT alignment cue setting&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;a href=#websrt-size-cue-setting&gt;WebSRT size cue setting&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;a href=#websrt-vertical-text-cue-setting&gt;WebSRT vertical text cue setting&lt;/a&gt;.&lt;/li&gt;
-  &lt;/ul&gt;&lt;p&gt;A &lt;dfn id=websrt-line-position-cue-setting&gt;WebSRT line position cue setting&lt;/dfn&gt; consists of the
+  &lt;ul class=brief&gt;&lt;li&gt;A &lt;a href=#websrt-vertical-text-cue-setting&gt;WebSRT vertical text cue setting&lt;/a&gt;.&lt;/li&gt; &lt;!-- D:vertical --&gt;
+   &lt;li&gt;A &lt;a href=#websrt-line-position-cue-setting&gt;WebSRT line position cue setting&lt;/a&gt;.&lt;/li&gt; &lt;!-- L:100% L:1 L:-1 --&gt;
+   &lt;li&gt;A &lt;a href=#websrt-text-position-cue-setting&gt;WebSRT text position cue setting&lt;/a&gt;.&lt;/li&gt; &lt;!-- T:100% --&gt;
+   &lt;li&gt;A &lt;a href=#websrt-size-cue-setting&gt;WebSRT size cue setting&lt;/a&gt;.&lt;/li&gt;          &lt;!-- S:100% --&gt;
+   &lt;li&gt;A &lt;a href=#websrt-alignment-cue-setting&gt;WebSRT alignment cue setting&lt;/a&gt;.&lt;/li&gt;     &lt;!-- A:start/middle/end --&gt;
+  &lt;/ul&gt;&lt;p&gt;A &lt;dfn id=websrt-vertical-text-cue-setting&gt;WebSRT vertical text cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;A U+0044 LATIN CAPITAL LETTER D character.&lt;/li&gt;
+   &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
+   &lt;li&gt;The string &quot;&lt;code title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;.&lt;/li&gt;
+  &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-line-position-cue-setting&gt;WebSRT line position cue setting&lt;/dfn&gt; consists of the
+  following components, in the order given:&lt;/p&gt;
+
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;A U+004C LATIN CAPITAL LETTER L character.&lt;/li&gt;
    &lt;li&gt;&lt;p&gt;A U+003A COLON character (:).&lt;/li&gt;
    &lt;li&gt;Either:
@@ -26798,12 +26807,6 @@
    &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
    &lt;li&gt;One or more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
    &lt;li&gt;A U+0025 PERCENT SIGN character (%).&lt;/li&gt;
-  &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-alignment-cue-setting&gt;WebSRT alignment cue setting&lt;/dfn&gt; consists of the
-  following components, in the order given:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;A U+0041 LATIN CAPITAL LETTER A character.&lt;/li&gt;
-   &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
-   &lt;li&gt;One of the following strings: &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;&lt;/li&gt;
   &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-size-cue-setting&gt;WebSRT size cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
@@ -26811,12 +26814,12 @@
    &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
    &lt;li&gt;One or more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
    &lt;li&gt;A U+0025 PERCENT SIGN character (%).&lt;/li&gt;
-  &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-vertical-text-cue-setting&gt;WebSRT vertical text cue setting&lt;/dfn&gt; consists of the
+  &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-alignment-cue-setting&gt;WebSRT alignment cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;A U+0044 LATIN CAPITAL LETTER D character.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;A U+0041 LATIN CAPITAL LETTER A character.&lt;/li&gt;
    &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
-   &lt;li&gt;The string &quot;&lt;code title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;.&lt;/li&gt;
+   &lt;li&gt;One of the following strings: &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;&lt;/li&gt;
   &lt;/ol&gt;&lt;p class=XXX&gt;&lt;dfn id=websrt-voice-declaration&gt;WebSRT voice declaration&lt;/dfn&gt;; &lt;dfn id=websrt-cue-text-line&gt;WebSRT cue text line&lt;/dfn&gt;&lt;/p&gt;
 
 
@@ -26867,25 +26870,61 @@
    characters&lt;/a&gt; that are either U+000D CARRIAGE RETURN (CR) or
    U+000A LINE FEED (LF) characters.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the empty string.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be a new &lt;a href=#timed-track-cue&gt;timed track
+   cue&lt;/a&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-identifier&gt;timed track cue
+   identifier&lt;/a&gt; be the empty string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-pause-on-exit-flag&gt;timed track cue
+   pause-on-exit flag&lt;/a&gt; be false.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-writing-direction&gt;timed track cue
+   writing direction&lt;/a&gt; be &lt;a href=#timed-track-cue-horizontal-writing-direction title=&quot;timed track cue
+   horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-snap-to-lines-flag&gt;timed track cue
+   snap-to-lines flag&lt;/a&gt; be true.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-line-position&gt;timed track cue line
+   position&lt;/a&gt; be &lt;a href=#timed-track-cue-automatic-line-position title=&quot;timed track cue automatic line
+   position&quot;&gt;auto&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-text-position&gt;timed track cue
+   text position&lt;/a&gt; be 50.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-size&gt;timed track cue
+   size&lt;/a&gt; be 100.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-alignment&gt;timed track cue
+   alignment&lt;/a&gt; be &lt;a href=#timed-track-cue-middle-alignment title=&quot;timed track cue middle
+   alignment&quot;&gt;middle alignment&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-voice-identifier&gt;timed track cue
+   voice identifier&lt;/a&gt; be the empty string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-text&gt;timed track cue
+   text&lt;/a&gt; be the empty string.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
    &lt;em&gt;not&lt;/em&gt; U+000D CARRIAGE RETURN (CR) or U+000A LINE FEED (LF)
    characters. Let &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; be those characters, if
    any.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then jump
-   to the step labeled &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then
+   discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump to the step labeled
+   &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; contains the three-character
    substring &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D HYPHEN-MINUS, U+002D
    HYPHEN-MINUS, U+003E GREATER-THAN SIGN), then jump to the step
    labeled &lt;i&gt;timings&lt;/i&gt; below.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;.&lt;p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-identifier&gt;timed track cue
+   identifier&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;.&lt;p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then jump to the step labeled
-   &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump
+   to the step labeled &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
    is a U+000D CARRIAGE RETURN (CR) character, advance &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; to the next character in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/li&gt;
@@ -26898,8 +26937,9 @@
    characters. Let &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; be those characters, if
    any.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then jump
-   to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then
+   discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump to the step labeled &lt;i&gt;cue
+   loop&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; does not contain the
    three-character substring &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D
@@ -26907,28 +26947,32 @@
    jump to the step labeled &lt;i&gt;bad cue&lt;/i&gt; below.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Timings&lt;/i&gt;: &lt;a href=#collect-websrt-cue-timings-and-settings&gt;Collect WebSRT cue timings and
-   settings&lt;/a&gt; from &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;. If that fails, jump
-   to the step labeled &lt;i&gt;bad cue&lt;/i&gt;. Otherwise, let &lt;var title=&quot;&quot;&gt;start time&lt;/var&gt; be the first collected time, &lt;var title=&quot;&quot;&gt;end time&lt;/var&gt; be the second collected time, and
-   &lt;span class=XXX&gt;...settings...&lt;/span&gt;.&lt;/li&gt;
+   settings&lt;/a&gt; from &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;, using &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; for the results. If that fails, jump to the step
+   labeled &lt;i&gt;bad cue&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p class=XXX&gt;...voice...&lt;/li&gt;
 
    &lt;li&gt;&lt;p class=XXX&gt;...cues...&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be a newly created &lt;a href=#timed-track-cue&gt;timed
-   track cue&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; to the &lt;a href=#timed-track-list-of-cues&gt;timed track list of
+   cues&lt;/a&gt; &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=XXX&gt;...fill cue...&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Jump to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Bad cue&lt;/i&gt;: Discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p class=XXX&gt;read until the next blank line; if you hit the
+   end of the file jump to &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Jump to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;End&lt;/i&gt;: The file has ended. Abort these steps. The
    &lt;a href=#websrt-parser&gt;WebSRT parser&lt;/a&gt; has finished.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;When the algorithm above requires that the user agent
-  &lt;dfn id=collect-websrt-cue-timings-and-settings&gt;collect WebSRT cue timings and settings&lt;/dfn&gt; from a string,
-  the user agent must run the following algorithm. This algorithm
-  either fails, or returns two timestamps and &lt;span class=XXX&gt;...settings...&lt;/span&gt;.&lt;/p&gt;
+  &lt;dfn id=collect-websrt-cue-timings-and-settings&gt;collect WebSRT cue timings and settings&lt;/dfn&gt; from a string
+  &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; for a &lt;a href=#timed-track-cue&gt;timed track cue&lt;/a&gt; &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;, the user agent must run the following
+  algorithm.&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being
    parsed.&lt;/li&gt;
@@ -26939,23 +26983,249 @@
    &lt;li&gt;&lt;p&gt;&lt;a href=#skip-whitespace&gt;Skip whitespace&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-websrt-timestamp&gt;Collect a WebSRT timestamp&lt;/a&gt;. If that algorithm
-   fails, then abort these steps and return failure.&lt;/li&gt;
+   fails, then abort these steps and return failure. Otherwise, let
+   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-start-time&gt;timed track cue start time&lt;/a&gt;
+   be the collected time.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#skip-whitespace&gt;Skip whitespace&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=XXX&gt;check that we're at &quot;&lt;--&quot; and fail if we're not&lt;/li&gt;
+   &lt;!-- we can't be beyond the end of the string until we've seen the
+   arrow, since we know the arrow is in the string and nothing we've
+   done so far would move us past the first &quot;-&quot;. --&gt;
 
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+002D HYPHEN-MINUS character (-)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+002D HYPHEN-MINUS character (-)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+003E GREATER-THAN SIGN character (&gt;)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;a href=#skip-whitespace&gt;Skip whitespace&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-websrt-timestamp&gt;Collect a WebSRT timestamp&lt;/a&gt;. If that algorithm
-   fails, then abort these steps and return failure.&lt;/li&gt;
+   fails, then abort these steps and return failure. Otherwise, let
+   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-end-time&gt;timed track cue end time&lt;/a&gt;
+   be the collected time.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#skip-whitespace&gt;Skip whitespace&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=XXX&gt;...settings...&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Settings&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond
+   the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then abort these
+   steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return the two collected timestamps and &lt;span class=XXX&gt;...settings...&lt;/span&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; be the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;, and move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   forwards one character.&lt;/p&gt;
 
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a
+   U+003A COLON character (:), then set &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; to
+   the empty string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+   character.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Run the appropriate substeps that apply for the value of &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt;, as follows:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0044 LATIN CAPITAL
+     LETTER D character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       not &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt;. Let
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;a href=#timed-track-cue-writing-direction&gt;timed track cue writing direction&lt;/a&gt; be &lt;a href=#timed-track-cue-horizontal-writing-direction title=&quot;timed track cue horizontal writing
+       direction&quot;&gt;horizontal&lt;/a&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+004C LATIN CAPITAL
+     LETTER L character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       either U+002D HYPHEN-MINUS characters (-), U+0025 PERCENT SIGN
+       characters (%), or characters in the range U+0030 DIGIT ZERO
+       (0) to U+0039 DIGIT NINE (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be
+       those characters, if any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;a href=#space-character&gt;space character&lt;/a&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; does not contain at least
+       one character in the range U+0030 DIGIT ZERO (0) to U+0039
+       DIGIT NINE (9), then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If any character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; other than
+       the first character is a U+002D HYPHEN-MINUS character (-),
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If any character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; other than
+       the last character is a U+0025 PERCENT SIGN character (%), then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the first character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       U+002D HYPHEN-MINUS character (-) &lt;em&gt;and&lt;/em&gt; the last
+       character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a U+0025 PERCENT SIGN
+       character (%), then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the last character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       U+0025 PERCENT SIGN character (%), then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-snap-to-lines-flag&gt;timed track cue snap-to-lines
+       flag&lt;/a&gt; to true.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Ignoring the trailing percent sign, if any, interpret
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as a (potentially signed) integer,
+       and let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the modulus of &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in
+       the range 0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100, then jump back to the
+       step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-line-position&gt;timed track cue line
+       position&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0054 LATIN CAPITAL
+     LETTER T character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
+       (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if
+       any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not
+       a U+0025 PERCENT SIGN character (%), then then jump to the
+       &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+       character.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;a href=#space-character&gt;space character&lt;/a&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is the empty string, then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as an integer, and
+       let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in the range
+       0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100,
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-text-position&gt;timed track cue text
+       position&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0053 LATIN CAPITAL
+     LETTER S character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
+       (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if
+       any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not
+       a U+0025 PERCENT SIGN character (%), then then jump to the
+       &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+       character.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;a href=#space-character&gt;space character&lt;/a&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is the empty string, then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as an integer, and
+       let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in the range
+       0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100,
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-size&gt;timed track cue
+       size&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0041 LATIN CAPITAL
+     LETTER A character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       not &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt;. Let
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;a href=#timed-track-cue-alignment&gt;timed track cue alignment&lt;/a&gt; be &lt;a href=#timed-track-cue-start-alignment title=&quot;timed
+       track cue start alignment&quot;&gt;start alignment&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;a href=#timed-track-cue-alignment&gt;timed track cue alignment&lt;/a&gt; be &lt;a href=#timed-track-cue-middle-alignment title=&quot;timed
+       track cue middle alignment&quot;&gt;middle alignment&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;a href=#timed-track-cue-alignment&gt;timed track cue alignment&lt;/a&gt; be &lt;a href=#timed-track-cue-end-alignment title=&quot;timed
+       track cue end alignment&quot;&gt;end alignment&lt;/a&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+       &lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are not
+       &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt; and
+       discard them.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
   &lt;/ol&gt;&lt;p class=XXX&gt;&lt;dfn id=collect-a-websrt-timestamp&gt;Collect a WebSRT timestamp&lt;/dfn&gt;...&lt;/p&gt;
 
   &lt;/div&gt;

Modified: index
===================================================================
--- index	2010-06-25 21:40:00 UTC (rev 5112)
+++ index	2010-06-26 00:55:41 UTC (rev 5113)
@@ -213,7 +213,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;HTML5 (including next generation additions still in development)&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 25 June 2010&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 26 June 2010&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -26144,10 +26144,13 @@
 
    &lt;dt&gt;&lt;dfn id=timed-track-cue-line-position title=&quot;timed track cue line position&quot;&gt;A line position&lt;/dfn&gt;
    &lt;dd&gt;
-    &lt;p&gt;A number giving the position of the lines of the cue, to be
-    interpreted as defined by the &lt;a href=#timed-track-cue-writing-direction title=&quot;timed track cue writing
-    direction&quot;&gt;writing direction&lt;/a&gt; and &lt;a href=#timed-track-cue-snap-to-lines-flag title=&quot;timed track
-    cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/a&gt; of the cue.&lt;/p&gt;
+    &lt;p&gt;Either a number giving the position of the lines of the cue, to
+    be interpreted as defined by the &lt;a href=#timed-track-cue-writing-direction title=&quot;timed track cue
+    writing direction&quot;&gt;writing direction&lt;/a&gt; and &lt;a href=#timed-track-cue-snap-to-lines-flag title=&quot;timed
+    track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/a&gt; of the
+    cue, or the special value &lt;dfn id=timed-track-cue-automatic-line-position title=&quot;timed track cue automatic line
+    position&quot;&gt;auto&lt;/dfn&gt;, which means the position is to depend on
+    the other active tracks.&lt;/p&gt;
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn id=timed-track-cue-text-position title=&quot;timed track cue text position&quot;&gt;A text position&lt;/dfn&gt;
@@ -26702,14 +26705,20 @@
   component must not be included more than once per &lt;a href=#websrt-cue-settings&gt;WebSRT cue
   settings&lt;/a&gt; string.&lt;/p&gt;
 
-  &lt;ul class=brief&gt;&lt;li&gt;A &lt;a href=#websrt-line-position-cue-setting&gt;WebSRT line position cue setting&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;a href=#websrt-text-position-cue-setting&gt;WebSRT text position cue setting&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;a href=#websrt-alignment-cue-setting&gt;WebSRT alignment cue setting&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;a href=#websrt-size-cue-setting&gt;WebSRT size cue setting&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;a href=#websrt-vertical-text-cue-setting&gt;WebSRT vertical text cue setting&lt;/a&gt;.&lt;/li&gt;
-  &lt;/ul&gt;&lt;p&gt;A &lt;dfn id=websrt-line-position-cue-setting&gt;WebSRT line position cue setting&lt;/dfn&gt; consists of the
+  &lt;ul class=brief&gt;&lt;li&gt;A &lt;a href=#websrt-vertical-text-cue-setting&gt;WebSRT vertical text cue setting&lt;/a&gt;.&lt;/li&gt; &lt;!-- D:vertical --&gt;
+   &lt;li&gt;A &lt;a href=#websrt-line-position-cue-setting&gt;WebSRT line position cue setting&lt;/a&gt;.&lt;/li&gt; &lt;!-- L:100% L:1 L:-1 --&gt;
+   &lt;li&gt;A &lt;a href=#websrt-text-position-cue-setting&gt;WebSRT text position cue setting&lt;/a&gt;.&lt;/li&gt; &lt;!-- T:100% --&gt;
+   &lt;li&gt;A &lt;a href=#websrt-size-cue-setting&gt;WebSRT size cue setting&lt;/a&gt;.&lt;/li&gt;          &lt;!-- S:100% --&gt;
+   &lt;li&gt;A &lt;a href=#websrt-alignment-cue-setting&gt;WebSRT alignment cue setting&lt;/a&gt;.&lt;/li&gt;     &lt;!-- A:start/middle/end --&gt;
+  &lt;/ul&gt;&lt;p&gt;A &lt;dfn id=websrt-vertical-text-cue-setting&gt;WebSRT vertical text cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;A U+0044 LATIN CAPITAL LETTER D character.&lt;/li&gt;
+   &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
+   &lt;li&gt;The string &quot;&lt;code title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;.&lt;/li&gt;
+  &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-line-position-cue-setting&gt;WebSRT line position cue setting&lt;/dfn&gt; consists of the
+  following components, in the order given:&lt;/p&gt;
+
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;A U+004C LATIN CAPITAL LETTER L character.&lt;/li&gt;
    &lt;li&gt;&lt;p&gt;A U+003A COLON character (:).&lt;/li&gt;
    &lt;li&gt;Either:
@@ -26731,12 +26740,6 @@
    &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
    &lt;li&gt;One or more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
    &lt;li&gt;A U+0025 PERCENT SIGN character (%).&lt;/li&gt;
-  &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-alignment-cue-setting&gt;WebSRT alignment cue setting&lt;/dfn&gt; consists of the
-  following components, in the order given:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;A U+0041 LATIN CAPITAL LETTER A character.&lt;/li&gt;
-   &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
-   &lt;li&gt;One of the following strings: &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;&lt;/li&gt;
   &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-size-cue-setting&gt;WebSRT size cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
@@ -26744,12 +26747,12 @@
    &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
    &lt;li&gt;One or more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
    &lt;li&gt;A U+0025 PERCENT SIGN character (%).&lt;/li&gt;
-  &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-vertical-text-cue-setting&gt;WebSRT vertical text cue setting&lt;/dfn&gt; consists of the
+  &lt;/ol&gt;&lt;p&gt;A &lt;dfn id=websrt-alignment-cue-setting&gt;WebSRT alignment cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;A U+0044 LATIN CAPITAL LETTER D character.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;A U+0041 LATIN CAPITAL LETTER A character.&lt;/li&gt;
    &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
-   &lt;li&gt;The string &quot;&lt;code title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;.&lt;/li&gt;
+   &lt;li&gt;One of the following strings: &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;&lt;/li&gt;
   &lt;/ol&gt;&lt;p class=XXX&gt;&lt;dfn id=websrt-voice-declaration&gt;WebSRT voice declaration&lt;/dfn&gt;; &lt;dfn id=websrt-cue-text-line&gt;WebSRT cue text line&lt;/dfn&gt;&lt;/p&gt;
 
 
@@ -26800,25 +26803,61 @@
    characters&lt;/a&gt; that are either U+000D CARRIAGE RETURN (CR) or
    U+000A LINE FEED (LF) characters.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the empty string.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be a new &lt;a href=#timed-track-cue&gt;timed track
+   cue&lt;/a&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-identifier&gt;timed track cue
+   identifier&lt;/a&gt; be the empty string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-pause-on-exit-flag&gt;timed track cue
+   pause-on-exit flag&lt;/a&gt; be false.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-writing-direction&gt;timed track cue
+   writing direction&lt;/a&gt; be &lt;a href=#timed-track-cue-horizontal-writing-direction title=&quot;timed track cue
+   horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-snap-to-lines-flag&gt;timed track cue
+   snap-to-lines flag&lt;/a&gt; be true.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-line-position&gt;timed track cue line
+   position&lt;/a&gt; be &lt;a href=#timed-track-cue-automatic-line-position title=&quot;timed track cue automatic line
+   position&quot;&gt;auto&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-text-position&gt;timed track cue
+   text position&lt;/a&gt; be 50.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-size&gt;timed track cue
+   size&lt;/a&gt; be 100.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-alignment&gt;timed track cue
+   alignment&lt;/a&gt; be &lt;a href=#timed-track-cue-middle-alignment title=&quot;timed track cue middle
+   alignment&quot;&gt;middle alignment&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-voice-identifier&gt;timed track cue
+   voice identifier&lt;/a&gt; be the empty string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-text&gt;timed track cue
+   text&lt;/a&gt; be the empty string.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
    &lt;em&gt;not&lt;/em&gt; U+000D CARRIAGE RETURN (CR) or U+000A LINE FEED (LF)
    characters. Let &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; be those characters, if
    any.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then jump
-   to the step labeled &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then
+   discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump to the step labeled
+   &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; contains the three-character
    substring &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D HYPHEN-MINUS, U+002D
    HYPHEN-MINUS, U+003E GREATER-THAN SIGN), then jump to the step
    labeled &lt;i&gt;timings&lt;/i&gt; below.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;.&lt;p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-identifier&gt;timed track cue
+   identifier&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;.&lt;p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then jump to the step labeled
-   &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump
+   to the step labeled &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
    is a U+000D CARRIAGE RETURN (CR) character, advance &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; to the next character in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/li&gt;
@@ -26831,8 +26870,9 @@
    characters. Let &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; be those characters, if
    any.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then jump
-   to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then
+   discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump to the step labeled &lt;i&gt;cue
+   loop&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; does not contain the
    three-character substring &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D
@@ -26840,28 +26880,32 @@
    jump to the step labeled &lt;i&gt;bad cue&lt;/i&gt; below.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Timings&lt;/i&gt;: &lt;a href=#collect-websrt-cue-timings-and-settings&gt;Collect WebSRT cue timings and
-   settings&lt;/a&gt; from &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;. If that fails, jump
-   to the step labeled &lt;i&gt;bad cue&lt;/i&gt;. Otherwise, let &lt;var title=&quot;&quot;&gt;start time&lt;/var&gt; be the first collected time, &lt;var title=&quot;&quot;&gt;end time&lt;/var&gt; be the second collected time, and
-   &lt;span class=XXX&gt;...settings...&lt;/span&gt;.&lt;/li&gt;
+   settings&lt;/a&gt; from &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;, using &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; for the results. If that fails, jump to the step
+   labeled &lt;i&gt;bad cue&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p class=XXX&gt;...voice...&lt;/li&gt;
 
    &lt;li&gt;&lt;p class=XXX&gt;...cues...&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be a newly created &lt;a href=#timed-track-cue&gt;timed
-   track cue&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; to the &lt;a href=#timed-track-list-of-cues&gt;timed track list of
+   cues&lt;/a&gt; &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=XXX&gt;...fill cue...&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Jump to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Bad cue&lt;/i&gt;: Discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p class=XXX&gt;read until the next blank line; if you hit the
+   end of the file jump to &lt;i&gt;end&lt;/i&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Jump to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;End&lt;/i&gt;: The file has ended. Abort these steps. The
    &lt;a href=#websrt-parser&gt;WebSRT parser&lt;/a&gt; has finished.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;When the algorithm above requires that the user agent
-  &lt;dfn id=collect-websrt-cue-timings-and-settings&gt;collect WebSRT cue timings and settings&lt;/dfn&gt; from a string,
-  the user agent must run the following algorithm. This algorithm
-  either fails, or returns two timestamps and &lt;span class=XXX&gt;...settings...&lt;/span&gt;.&lt;/p&gt;
+  &lt;dfn id=collect-websrt-cue-timings-and-settings&gt;collect WebSRT cue timings and settings&lt;/dfn&gt; from a string
+  &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; for a &lt;a href=#timed-track-cue&gt;timed track cue&lt;/a&gt; &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;, the user agent must run the following
+  algorithm.&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being
    parsed.&lt;/li&gt;
@@ -26872,23 +26916,249 @@
    &lt;li&gt;&lt;p&gt;&lt;a href=#skip-whitespace&gt;Skip whitespace&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-websrt-timestamp&gt;Collect a WebSRT timestamp&lt;/a&gt;. If that algorithm
-   fails, then abort these steps and return failure.&lt;/li&gt;
+   fails, then abort these steps and return failure. Otherwise, let
+   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-start-time&gt;timed track cue start time&lt;/a&gt;
+   be the collected time.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#skip-whitespace&gt;Skip whitespace&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=XXX&gt;check that we're at &quot;&lt;--&quot; and fail if we're not&lt;/li&gt;
+   &lt;!-- we can't be beyond the end of the string until we've seen the
+   arrow, since we know the arrow is in the string and nothing we've
+   done so far would move us past the first &quot;-&quot;. --&gt;
 
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+002D HYPHEN-MINUS character (-)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+002D HYPHEN-MINUS character (-)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+003E GREATER-THAN SIGN character (&gt;)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;a href=#skip-whitespace&gt;Skip whitespace&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-websrt-timestamp&gt;Collect a WebSRT timestamp&lt;/a&gt;. If that algorithm
-   fails, then abort these steps and return failure.&lt;/li&gt;
+   fails, then abort these steps and return failure. Otherwise, let
+   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-end-time&gt;timed track cue end time&lt;/a&gt;
+   be the collected time.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#skip-whitespace&gt;Skip whitespace&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=XXX&gt;...settings...&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Settings&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond
+   the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then abort these
+   steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return the two collected timestamps and &lt;span class=XXX&gt;...settings...&lt;/span&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; be the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;, and move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   forwards one character.&lt;/p&gt;
 
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a
+   U+003A COLON character (:), then set &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; to
+   the empty string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+   character.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Run the appropriate substeps that apply for the value of &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt;, as follows:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0044 LATIN CAPITAL
+     LETTER D character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       not &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt;. Let
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;a href=#timed-track-cue-writing-direction&gt;timed track cue writing direction&lt;/a&gt; be &lt;a href=#timed-track-cue-horizontal-writing-direction title=&quot;timed track cue horizontal writing
+       direction&quot;&gt;horizontal&lt;/a&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+004C LATIN CAPITAL
+     LETTER L character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       either U+002D HYPHEN-MINUS characters (-), U+0025 PERCENT SIGN
+       characters (%), or characters in the range U+0030 DIGIT ZERO
+       (0) to U+0039 DIGIT NINE (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be
+       those characters, if any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;a href=#space-character&gt;space character&lt;/a&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; does not contain at least
+       one character in the range U+0030 DIGIT ZERO (0) to U+0039
+       DIGIT NINE (9), then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If any character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; other than
+       the first character is a U+002D HYPHEN-MINUS character (-),
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If any character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; other than
+       the last character is a U+0025 PERCENT SIGN character (%), then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the first character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       U+002D HYPHEN-MINUS character (-) &lt;em&gt;and&lt;/em&gt; the last
+       character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a U+0025 PERCENT SIGN
+       character (%), then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the last character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       U+0025 PERCENT SIGN character (%), then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-snap-to-lines-flag&gt;timed track cue snap-to-lines
+       flag&lt;/a&gt; to true.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Ignoring the trailing percent sign, if any, interpret
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as a (potentially signed) integer,
+       and let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the modulus of &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in
+       the range 0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100, then jump back to the
+       step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-line-position&gt;timed track cue line
+       position&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0054 LATIN CAPITAL
+     LETTER T character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
+       (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if
+       any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not
+       a U+0025 PERCENT SIGN character (%), then then jump to the
+       &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+       character.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;a href=#space-character&gt;space character&lt;/a&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is the empty string, then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as an integer, and
+       let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in the range
+       0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100,
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-text-position&gt;timed track cue text
+       position&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0053 LATIN CAPITAL
+     LETTER S character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
+       (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if
+       any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not
+       a U+0025 PERCENT SIGN character (%), then then jump to the
+       &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+       character.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;a href=#space-character&gt;space character&lt;/a&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is the empty string, then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as an integer, and
+       let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in the range
+       0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100,
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#timed-track-cue-size&gt;timed track cue
+       size&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0041 LATIN CAPITAL
+     LETTER A character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+       not &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt;. Let
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if any.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;a href=#timed-track-cue-alignment&gt;timed track cue alignment&lt;/a&gt; be &lt;a href=#timed-track-cue-start-alignment title=&quot;timed
+       track cue start alignment&quot;&gt;start alignment&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;a href=#timed-track-cue-alignment&gt;timed track cue alignment&lt;/a&gt; be &lt;a href=#timed-track-cue-middle-alignment title=&quot;timed
+       track cue middle alignment&quot;&gt;middle alignment&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;a href=#timed-track-cue-alignment&gt;timed track cue alignment&lt;/a&gt; be &lt;a href=#timed-track-cue-end-alignment title=&quot;timed
+       track cue end alignment&quot;&gt;end alignment&lt;/a&gt;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+       &lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are not
+       &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt; and
+       discard them.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/li&gt;
+
   &lt;/ol&gt;&lt;p class=XXX&gt;&lt;dfn id=collect-a-websrt-timestamp&gt;Collect a WebSRT timestamp&lt;/dfn&gt;...&lt;/p&gt;
 
   &lt;/div&gt;

Modified: source
===================================================================
--- source	2010-06-25 21:40:00 UTC (rev 5112)
+++ source	2010-06-26 00:55:41 UTC (rev 5113)
@@ -28358,10 +28358,13 @@
 
    &lt;dt&gt;&lt;dfn title=&quot;timed track cue line position&quot;&gt;A line position&lt;/dfn&gt;
    &lt;dd&gt;
-    &lt;p&gt;A number giving the position of the lines of the cue, to be
-    interpreted as defined by the &lt;span title=&quot;timed track cue writing
-    direction&quot;&gt;writing direction&lt;/span&gt; and &lt;span title=&quot;timed track
-    cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/span&gt; of the cue.&lt;/p&gt;
+    &lt;p&gt;Either a number giving the position of the lines of the cue, to
+    be interpreted as defined by the &lt;span title=&quot;timed track cue
+    writing direction&quot;&gt;writing direction&lt;/span&gt; and &lt;span title=&quot;timed
+    track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/span&gt; of the
+    cue, or the special value &lt;dfn title=&quot;timed track cue automatic line
+    position&quot;&gt;auto&lt;/dfn&gt;, which means the position is to depend on
+    the other active tracks.&lt;/p&gt;
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn title=&quot;timed track cue text position&quot;&gt;A text position&lt;/dfn&gt;
@@ -28999,13 +29002,22 @@
   settings&lt;/span&gt; string.&lt;/p&gt;
 
   &lt;ul class=&quot;brief&quot;&gt; 
-   &lt;li&gt;A &lt;span&gt;WebSRT line position cue setting&lt;/span&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;span&gt;WebSRT text position cue setting&lt;/span&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;span&gt;WebSRT alignment cue setting&lt;/span&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;span&gt;WebSRT size cue setting&lt;/span&gt;.&lt;/li&gt;
-   &lt;li&gt;A &lt;span&gt;WebSRT vertical text cue setting&lt;/span&gt;.&lt;/li&gt;
+   &lt;li&gt;A &lt;span&gt;WebSRT vertical text cue setting&lt;/span&gt;.&lt;/li&gt; &lt;!-- D:vertical --&gt;
+   &lt;li&gt;A &lt;span&gt;WebSRT line position cue setting&lt;/span&gt;.&lt;/li&gt; &lt;!-- L:100% L:1 L:-1 --&gt;
+   &lt;li&gt;A &lt;span&gt;WebSRT text position cue setting&lt;/span&gt;.&lt;/li&gt; &lt;!-- T:100% --&gt;
+   &lt;li&gt;A &lt;span&gt;WebSRT size cue setting&lt;/span&gt;.&lt;/li&gt;          &lt;!-- S:100% --&gt;
+   &lt;li&gt;A &lt;span&gt;WebSRT alignment cue setting&lt;/span&gt;.&lt;/li&gt;     &lt;!-- A:start/middle/end --&gt;
   &lt;/ul&gt;
 
+  &lt;p&gt;A &lt;dfn&gt;WebSRT vertical text cue setting&lt;/dfn&gt; consists of the
+  following components, in the order given:&lt;/p&gt;
+
+  &lt;ol&gt;
+   &lt;li&gt;A U+0044 LATIN CAPITAL LETTER D character.&lt;/li&gt;
+   &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
+   &lt;li&gt;The string &quot;&lt;code title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;.&lt;/li&gt;
+  &lt;/ol&gt;
+
   &lt;p&gt;A &lt;dfn&gt;WebSRT line position cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
@@ -29042,15 +29054,6 @@
    &lt;li&gt;A U+0025 PERCENT SIGN character (%).&lt;/li&gt;
   &lt;/ol&gt;
 
-  &lt;p&gt;A &lt;dfn&gt;WebSRT alignment cue setting&lt;/dfn&gt; consists of the
-  following components, in the order given:&lt;/p&gt;
-
-  &lt;ol&gt;
-   &lt;li&gt;A U+0041 LATIN CAPITAL LETTER A character.&lt;/li&gt;
-   &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
-   &lt;li&gt;One of the following strings: &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;&lt;/li&gt;
-  &lt;/ol&gt;
-
   &lt;p&gt;A &lt;dfn&gt;WebSRT size cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
@@ -29061,13 +29064,13 @@
    &lt;li&gt;A U+0025 PERCENT SIGN character (%).&lt;/li&gt;
   &lt;/ol&gt;
 
-  &lt;p&gt;A &lt;dfn&gt;WebSRT vertical text cue setting&lt;/dfn&gt; consists of the
+  &lt;p&gt;A &lt;dfn&gt;WebSRT alignment cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
 
   &lt;ol&gt;
-   &lt;li&gt;A U+0044 LATIN CAPITAL LETTER D character.&lt;/li&gt;
+   &lt;li&gt;A U+0041 LATIN CAPITAL LETTER A character.&lt;/li&gt;
    &lt;li&gt;A U+003A COLON character (:).&lt;/li&gt;
-   &lt;li&gt;The string &quot;&lt;code title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;.&lt;/li&gt;
+   &lt;li&gt;One of the following strings: &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;&lt;/li&gt;
   &lt;/ol&gt;
 
   &lt;p class=&quot;XXX&quot;&gt;&lt;dfn&gt;WebSRT voice declaration&lt;/dfn&gt;; &lt;dfn&gt;WebSRT cue text line&lt;/dfn&gt;&lt;/p&gt;
@@ -29131,27 +29134,62 @@
    characters&lt;/span&gt; that are either U+000D CARRIAGE RETURN (CR) or
    U+000A LINE FEED (LF) characters.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the empty string.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be a new &lt;span&gt;timed track
+   cue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   identifier&lt;/span&gt; be the empty string.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   pause-on-exit flag&lt;/span&gt; be false.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   writing direction&lt;/span&gt; be &lt;span title=&quot;timed track cue
+   horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   snap-to-lines flag&lt;/span&gt; be true.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue line
+   position&lt;/span&gt; be &lt;span title=&quot;timed track cue automatic line
+   position&quot;&gt;auto&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   text position&lt;/span&gt; be 50.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   size&lt;/span&gt; be 100.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   alignment&lt;/span&gt; be &lt;span title=&quot;timed track cue middle
+   alignment&quot;&gt;middle alignment&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   voice identifier&lt;/span&gt; be the empty string.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   text&lt;/span&gt; be the empty string.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are
    &lt;em&gt;not&lt;/em&gt; U+000D CARRIAGE RETURN (CR) or U+000A LINE FEED (LF)
    characters. Let &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; be those characters, if
    any.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then jump
-   to the step labeled &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then
+   discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump to the step labeled
+   &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; contains the three-character
    substring &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D HYPHEN-MINUS, U+002D
    HYPHEN-MINUS, U+003E GREATER-THAN SIGN), then jump to the step
    labeled &lt;i&gt;timings&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be &lt;var
-   title=&quot;&quot;&gt;line&lt;/var&gt;.&lt;p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+   identifier&lt;/span&gt; be &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;.&lt;p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var
-   title=&quot;&quot;&gt;input&lt;/var&gt;, then jump to the step labeled
-   &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+   title=&quot;&quot;&gt;input&lt;/var&gt;, then discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump
+   to the step labeled &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
    is a U+000D CARRIAGE RETURN (CR) character, advance &lt;var
@@ -29168,8 +29206,9 @@
    characters. Let &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; be those characters, if
    any.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then jump
-   to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; is the empty string, then
+   discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; and jump to the step labeled &lt;i&gt;cue
+   loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;line&lt;/var&gt; does not contain the
    three-character substring &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D
@@ -29177,21 +29216,24 @@
    jump to the step labeled &lt;i&gt;bad cue&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Timings&lt;/i&gt;: &lt;span&gt;Collect WebSRT cue timings and
-   settings&lt;/span&gt; from &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;. If that fails, jump
-   to the step labeled &lt;i&gt;bad cue&lt;/i&gt;. Otherwise, let &lt;var
-   title=&quot;&quot;&gt;start time&lt;/var&gt; be the first collected time, &lt;var
-   title=&quot;&quot;&gt;end time&lt;/var&gt; be the second collected time, and
-   &lt;span class=&quot;XXX&quot;&gt;...settings...&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   settings&lt;/span&gt; from &lt;var title=&quot;&quot;&gt;line&lt;/var&gt;, using &lt;var
+   title=&quot;&quot;&gt;cue&lt;/var&gt; for the results. If that fails, jump to the step
+   labeled &lt;i&gt;bad cue&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p class=&quot;XXX&quot;&gt;...voice...&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p class=&quot;XXX&quot;&gt;...cues...&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be a newly created &lt;span&gt;timed
-   track cue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; to the &lt;span&gt;timed track list of
+   cues&lt;/span&gt; &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=&quot;XXX&quot;&gt;...fill cue...&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Jump to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Bad cue&lt;/i&gt;: Discard &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p class=&quot;XXX&quot;&gt;read until the next blank line; if you hit the
+   end of the file jump to &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Jump to the step labeled &lt;i&gt;cue loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;End&lt;/i&gt;: The file has ended. Abort these steps. The
@@ -29200,9 +29242,10 @@
   &lt;/ol&gt;
 
   &lt;p&gt;When the algorithm above requires that the user agent
-  &lt;dfn&gt;collect WebSRT cue timings and settings&lt;/dfn&gt; from a string,
-  the user agent must run the following algorithm. This algorithm
-  either fails, or returns two timestamps and &lt;span class=&quot;XXX&quot;&gt;...settings...&lt;/span&gt;.&lt;/p&gt;
+  &lt;dfn&gt;collect WebSRT cue timings and settings&lt;/dfn&gt; from a string
+  &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; for a &lt;span&gt;timed track cue&lt;/span&gt; &lt;var
+  title=&quot;&quot;&gt;cue&lt;/var&gt;, the user agent must run the following
+  algorithm.&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -29216,23 +29259,290 @@
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Skip whitespace&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a WebSRT timestamp&lt;/span&gt;. If that algorithm
-   fails, then abort these steps and return failure.&lt;/p&gt;&lt;/li&gt;
+   fails, then abort these steps and return failure. Otherwise, let
+   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue start time&lt;/span&gt;
+   be the collected time.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Skip whitespace&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=&quot;XXX&quot;&gt;check that we're at &quot;&lt;--&quot; and fail if we're not&lt;/p&gt;&lt;/li&gt;
+   &lt;!-- we can't be beyond the end of the string until we've seen the
+   arrow, since we know the arrow is in the string and nothing we've
+   done so far would move us past the first &quot;-&quot;. --&gt;
 
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var
+   title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+002D HYPHEN-MINUS character (-)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var
+   title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+002D HYPHEN-MINUS character (-)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;!--&lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+   &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if--&gt; the character at &lt;var
+   title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+003E GREATER-THAN SIGN character (&gt;)
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Skip whitespace&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a WebSRT timestamp&lt;/span&gt;. If that algorithm
-   fails, then abort these steps and return failure.&lt;/p&gt;&lt;/li&gt;
+   fails, then abort these steps and return failure. Otherwise, let
+   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue end time&lt;/span&gt;
+   be the collected time.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Skip whitespace&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=&quot;XXX&quot;&gt;...settings...&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Settings&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond
+   the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return the two collected timestamps and &lt;span class=&quot;XXX&quot;&gt;...settings...&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; be the character at &lt;var
+   title=&quot;&quot;&gt;position&lt;/var&gt;, and move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   forwards one character.&lt;/p&gt;
 
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt; then abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a
+   U+003A COLON character (:), then set &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; to
+   the empty string.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+   character.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt; then abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Run the appropriate substeps that apply for the value of &lt;var
+    title=&quot;&quot;&gt;setting&lt;/var&gt;, as follows:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0044 LATIN CAPITAL
+     LETTER D character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are
+       not &lt;span title=&quot;space character&quot;&gt;space characters&lt;/span&gt;. Let
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if any.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;span&gt;case-sensitive&lt;/span&gt; match for the string &quot;&lt;code
+       title=&quot;&quot;&gt;vertical&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;span&gt;timed track cue writing direction&lt;/span&gt; be &lt;span
+       title=&quot;timed track cue horizontal writing
+       direction&quot;&gt;horizontal&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+004C LATIN CAPITAL
+     LETTER L character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are
+       either U+002D HYPHEN-MINUS characters (-), U+0025 PERCENT SIGN
+       characters (%), or characters in the range U+0030 DIGIT ZERO
+       (0) to U+0039 DIGIT NINE (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be
+       those characters, if any.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var
+       title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;span&gt;space character&lt;/span&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; does not contain at least
+       one character in the range U+0030 DIGIT ZERO (0) to U+0039
+       DIGIT NINE (9), then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If any character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; other than
+       the first character is a U+002D HYPHEN-MINUS character (-),
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If any character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; other than
+       the last character is a U+0025 PERCENT SIGN character (%), then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the first character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       U+002D HYPHEN-MINUS character (-) &lt;em&gt;and&lt;/em&gt; the last
+       character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a U+0025 PERCENT SIGN
+       character (%), then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the last character in &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       U+0025 PERCENT SIGN character (%), then let &lt;var
+       title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue snap-to-lines
+       flag&lt;/span&gt; to true.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Ignoring the trailing percent sign, if any, interpret
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as a (potentially signed) integer,
+       and let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the modulus of &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in
+       the range 0&nbsp;&le;&nbsp;&lt;var
+       title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100, then jump back to the
+       step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue line
+       position&lt;/span&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0054 LATIN CAPITAL
+     LETTER T character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are
+       in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
+       (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if
+       any.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not
+       a U+0025 PERCENT SIGN character (%), then then jump to the
+       &quot;otherwise&quot; case below.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+       character.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var
+       title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;span&gt;space character&lt;/span&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is the empty string, then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as an integer, and
+       let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in the range
+       0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100,
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue text
+       position&lt;/span&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0053 LATIN CAPITAL
+     LETTER S character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are
+       in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
+       (9). Let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if
+       any.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; then jump back to the step labeled
+       &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not
+       a U+0025 PERCENT SIGN character (%), then then jump to the
+       &quot;otherwise&quot; case below.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards one
+       character.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not beyond the end of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; but the character at &lt;var
+       title=&quot;&quot;&gt;position&lt;/var&gt; is not a &lt;span&gt;space character&lt;/span&gt;,
+       then jump to the &quot;otherwise&quot; case below.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is the empty string, then
+       jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as an integer, and
+       let &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; be that number.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;number&lt;/var&gt; is not in the range
+       0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;number&lt;/var&gt;&nbsp;&le;&nbsp;100,
+       then jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;timed track cue
+       size&lt;/span&gt; be &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;setting&lt;/var&gt; is a U+0041 LATIN CAPITAL
+     LETTER A character&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are
+       not &lt;span title=&quot;space character&quot;&gt;space characters&lt;/span&gt;. Let
+       &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be those characters, if any.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;span&gt;case-sensitive&lt;/span&gt; match for the string &quot;&lt;code
+       title=&quot;&quot;&gt;start&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;span&gt;timed track cue alignment&lt;/span&gt; be &lt;span title=&quot;timed
+       track cue start alignment&quot;&gt;start alignment&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;span&gt;case-sensitive&lt;/span&gt; match for the string &quot;&lt;code
+       title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;span&gt;timed track cue alignment&lt;/span&gt; be &lt;span title=&quot;timed
+       track cue middle alignment&quot;&gt;middle alignment&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is a
+       &lt;span&gt;case-sensitive&lt;/span&gt; match for the string &quot;&lt;code
+       title=&quot;&quot;&gt;end&lt;/code&gt;&quot;, then let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+       &lt;span&gt;timed track cue alignment&lt;/span&gt; be &lt;span title=&quot;timed
+       track cue end alignment&quot;&gt;end alignment&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+       &lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are not
+       &lt;span title=&quot;space character&quot;&gt;space characters&lt;/span&gt; and
+       discard them.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;settings&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
   &lt;/ol&gt;
 
   &lt;p class=&quot;XXX&quot;&gt;&lt;dfn&gt;Collect a WebSRT timestamp&lt;/dfn&gt;...&lt;/p&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011982.html">[html5] r5112 - [c] (0) Captions - Stage 11.4: Finish defining the	settings and timings part of [...]
</A></li>
	<LI>Next message: <A HREF="011984.html">[html5] r5114 - [giow] (0) Captions - Stage 11.6: Parsing bad cues	in WebSRT.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11983">[ date ]</a>
              <a href="thread.html#11983">[ thread ]</a>
              <a href="subject.html#11983">[ subject ]</a>
              <a href="author.html#11983">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
