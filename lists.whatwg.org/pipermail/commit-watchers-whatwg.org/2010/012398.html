<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r5530 - [giow] (2) Tighten up UTF-8 error handling	definitions Fixing http://www.w3.org/ [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5530%20-%20%5Bgiow%5D%20%282%29%20Tighten%20up%20UTF-8%20error%20handling%0A%09definitions%20Fixing%20http%3A//www.w3.org/%20%5B...%5D&In-Reply-To=%3C20100928191617.D448880581AB%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012397.html">
   <LINK REL="Next"  HREF="012399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r5530 - [giow] (2) Tighten up UTF-8 error handling	definitions Fixing http://www.w3.org/ [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5530%20-%20%5Bgiow%5D%20%282%29%20Tighten%20up%20UTF-8%20error%20handling%0A%09definitions%20Fixing%20http%3A//www.w3.org/%20%5B...%5D&In-Reply-To=%3C20100928191617.D448880581AB%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r5530 - [giow] (2) Tighten up UTF-8 error handling	definitions Fixing http://www.w3.org/ [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Sep 28 12:16:17 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="012397.html">[html5] r5529 - [e] (0) grammar Fixing	http://www.w3.org/Bugs/Public/show_bug.cgi?id=10616
</A></li>
        <LI>Next message: <A HREF="012399.html">[html5] r5531 - [e] (0) typo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12398">[ date ]</a>
              <a href="thread.html#12398">[ thread ]</a>
              <a href="subject.html#12398">[ subject ]</a>
              <a href="author.html#12398">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-09-28 12:16:16 -0700 (Tue, 28 Sep 2010)
New Revision: 5530

Modified:
   complete.html
   index
   source
Log:
[giow] (2) Tighten up UTF-8 error handling definitions
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=9663">http://www.w3.org/Bugs/Public/show_bug.cgi?id=9663</A>

Modified: complete.html
===================================================================
--- complete.html	2010-09-28 18:31:45 UTC (rev 5529)
+++ complete.html	2010-09-28 19:16:16 UTC (rev 5530)
@@ -313,61 +313,62 @@
      &lt;li&gt;&lt;a href=#dependencies&gt;&lt;span class=secno&gt;2.2.1 &lt;/span&gt;Dependencies&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#extensibility&gt;&lt;span class=secno&gt;2.2.2 &lt;/span&gt;Extensibility&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#case-sensitivity-and-string-comparison&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;Case-sensitivity and string comparison&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#common-microsyntaxes&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;Common microsyntaxes&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#utf-8&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;UTF-8&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#common-microsyntaxes&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common microsyntaxes&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#common-parser-idioms&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Common parser idioms&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#boolean-attributes&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Boolean attributes&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#keywords-and-enumerated-attributes&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Keywords and enumerated attributes&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#numbers&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Numbers&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#common-parser-idioms&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Common parser idioms&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#boolean-attributes&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Boolean attributes&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#keywords-and-enumerated-attributes&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Keywords and enumerated attributes&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#numbers&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;Numbers&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#non-negative-integers&gt;&lt;span class=secno&gt;2.4.4.1 &lt;/span&gt;Non-negative integers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#signed-integers&gt;&lt;span class=secno&gt;2.4.4.2 &lt;/span&gt;Signed integers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#real-numbers&gt;&lt;span class=secno&gt;2.4.4.3 &lt;/span&gt;Real numbers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#percentages-and-dimensions&gt;&lt;span class=secno&gt;2.4.4.4 &lt;/span&gt;Percentages and lengths&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#lists-of-integers&gt;&lt;span class=secno&gt;2.4.4.5 &lt;/span&gt;Lists of integers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#lists-of-dimensions&gt;&lt;span class=secno&gt;2.4.4.6 &lt;/span&gt;Lists of dimensions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dates-and-times&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Dates and times&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#non-negative-integers&gt;&lt;span class=secno&gt;2.5.4.1 &lt;/span&gt;Non-negative integers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#signed-integers&gt;&lt;span class=secno&gt;2.5.4.2 &lt;/span&gt;Signed integers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#real-numbers&gt;&lt;span class=secno&gt;2.5.4.3 &lt;/span&gt;Real numbers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#percentages-and-dimensions&gt;&lt;span class=secno&gt;2.5.4.4 &lt;/span&gt;Percentages and lengths&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#lists-of-integers&gt;&lt;span class=secno&gt;2.5.4.5 &lt;/span&gt;Lists of integers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#lists-of-dimensions&gt;&lt;span class=secno&gt;2.5.4.6 &lt;/span&gt;Lists of dimensions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dates-and-times&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;Dates and times&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#months&gt;&lt;span class=secno&gt;2.4.5.1 &lt;/span&gt;Months&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#dates&gt;&lt;span class=secno&gt;2.4.5.2 &lt;/span&gt;Dates&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#times&gt;&lt;span class=secno&gt;2.4.5.3 &lt;/span&gt;Times&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#local-dates-and-times&gt;&lt;span class=secno&gt;2.4.5.4 &lt;/span&gt;Local dates and times&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#global-dates-and-times&gt;&lt;span class=secno&gt;2.4.5.5 &lt;/span&gt;Global dates and times&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#weeks&gt;&lt;span class=secno&gt;2.4.5.6 &lt;/span&gt;Weeks&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.4.5.7 &lt;/span&gt;Vaguer moments in time&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#colors&gt;&lt;span class=secno&gt;2.4.6 &lt;/span&gt;Colors&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#space-separated-tokens&gt;&lt;span class=secno&gt;2.4.7 &lt;/span&gt;Space-separated tokens&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#comma-separated-tokens&gt;&lt;span class=secno&gt;2.4.8 &lt;/span&gt;Comma-separated tokens&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#syntax-references&gt;&lt;span class=secno&gt;2.4.9 &lt;/span&gt;References&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#mq&gt;&lt;span class=secno&gt;2.4.10 &lt;/span&gt;Media queries&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#urls&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;URLs&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#months&gt;&lt;span class=secno&gt;2.5.5.1 &lt;/span&gt;Months&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#dates&gt;&lt;span class=secno&gt;2.5.5.2 &lt;/span&gt;Dates&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#times&gt;&lt;span class=secno&gt;2.5.5.3 &lt;/span&gt;Times&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#local-dates-and-times&gt;&lt;span class=secno&gt;2.5.5.4 &lt;/span&gt;Local dates and times&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#global-dates-and-times&gt;&lt;span class=secno&gt;2.5.5.5 &lt;/span&gt;Global dates and times&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#weeks&gt;&lt;span class=secno&gt;2.5.5.6 &lt;/span&gt;Weeks&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.5.5.7 &lt;/span&gt;Vaguer moments in time&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#colors&gt;&lt;span class=secno&gt;2.5.6 &lt;/span&gt;Colors&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#space-separated-tokens&gt;&lt;span class=secno&gt;2.5.7 &lt;/span&gt;Space-separated tokens&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#comma-separated-tokens&gt;&lt;span class=secno&gt;2.5.8 &lt;/span&gt;Comma-separated tokens&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#syntax-references&gt;&lt;span class=secno&gt;2.5.9 &lt;/span&gt;References&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#mq&gt;&lt;span class=secno&gt;2.5.10 &lt;/span&gt;Media queries&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#urls&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;URLs&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#terminology-0&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Terminology&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#fetching-resources&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Fetching resources&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#terminology-0&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Terminology&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#fetching-resources&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Fetching resources&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#concept-http-equivalent&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Protocol concepts&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#encrypted-http-and-related-security-concerns&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Encrypted HTTP and related security concerns&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#content-type-sniffing&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;Determining the type of a resource&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#common-dom-interfaces&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Common DOM interfaces&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#concept-http-equivalent&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Protocol concepts&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#encrypted-http-and-related-security-concerns&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Encrypted HTTP and related security concerns&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#content-type-sniffing&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;Determining the type of a resource&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#common-dom-interfaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Common DOM interfaces&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#reflecting-content-attributes-in-idl-attributes&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Reflecting content attributes in IDL attributes&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#collections-0&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Collections&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#reflecting-content-attributes-in-idl-attributes&gt;&lt;span class=secno&gt;2.8.1 &lt;/span&gt;Reflecting content attributes in IDL attributes&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#collections-0&gt;&lt;span class=secno&gt;2.8.2 &lt;/span&gt;Collections&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#htmlcollection-0&gt;&lt;span class=secno&gt;2.7.2.1 &lt;/span&gt;HTMLCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmlallcollection-0&gt;&lt;span class=secno&gt;2.7.2.2 &lt;/span&gt;HTMLAllCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmlformcontrolscollection-0&gt;&lt;span class=secno&gt;2.7.2.3 &lt;/span&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmloptionscollection-0&gt;&lt;span class=secno&gt;2.7.2.4 &lt;/span&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmlpropertiescollection-0&gt;&lt;span class=secno&gt;2.7.2.5 &lt;/span&gt;HTMLPropertiesCollection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#domtokenlist-0&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;DOMTokenList&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#domsettabletokenlist-0&gt;&lt;span class=secno&gt;2.7.4 &lt;/span&gt;DOMSettableTokenList&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.7.5 &lt;/span&gt;Safe passing of structured data&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#domstringmap-0&gt;&lt;span class=secno&gt;2.7.6 &lt;/span&gt;DOMStringMap&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dom-feature-strings&gt;&lt;span class=secno&gt;2.7.7 &lt;/span&gt;DOM feature strings&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#exceptions&gt;&lt;span class=secno&gt;2.7.8 &lt;/span&gt;Exceptions&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#garbage-collection&gt;&lt;span class=secno&gt;2.7.9 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#namespaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Namespaces&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlcollection-0&gt;&lt;span class=secno&gt;2.8.2.1 &lt;/span&gt;HTMLCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlallcollection-0&gt;&lt;span class=secno&gt;2.8.2.2 &lt;/span&gt;HTMLAllCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlformcontrolscollection-0&gt;&lt;span class=secno&gt;2.8.2.3 &lt;/span&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmloptionscollection-0&gt;&lt;span class=secno&gt;2.8.2.4 &lt;/span&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlpropertiescollection-0&gt;&lt;span class=secno&gt;2.8.2.5 &lt;/span&gt;HTMLPropertiesCollection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#domtokenlist-0&gt;&lt;span class=secno&gt;2.8.3 &lt;/span&gt;DOMTokenList&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#domsettabletokenlist-0&gt;&lt;span class=secno&gt;2.8.4 &lt;/span&gt;DOMSettableTokenList&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.8.5 &lt;/span&gt;Safe passing of structured data&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#domstringmap-0&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;DOMStringMap&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dom-feature-strings&gt;&lt;span class=secno&gt;2.8.7 &lt;/span&gt;DOM feature strings&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#exceptions&gt;&lt;span class=secno&gt;2.8.8 &lt;/span&gt;Exceptions&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#garbage-collection&gt;&lt;span class=secno&gt;2.8.9 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#namespaces&gt;&lt;span class=secno&gt;2.9 &lt;/span&gt;Namespaces&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#dom&gt;&lt;span class=secno&gt;3 &lt;/span&gt;Semantics, structure, and APIs of HTML documents&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#documents&gt;&lt;span class=secno&gt;3.1 &lt;/span&gt;Documents&lt;/a&gt;
@@ -3502,8 +3503,58 @@
   two strings as matches of each other.&lt;/p&gt;
 
 
-  &lt;h3 id=common-microsyntaxes&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;Common microsyntaxes&lt;/h3&gt;
+  &lt;h3 id=utf-8&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;UTF-8&lt;/h3&gt;
 
+  &lt;p&gt;When a user agent is required to &lt;dfn id=decoded-as-utf-8,-with-error-handling title=&quot;decoded as UTF-8,
+  with error handling&quot;&gt;decode a byte string as UTF-8, with error
+  handling&lt;/dfn&gt;, it means that the byte stream must be converted to a
+  Unicode string by interpreting it as UTF-8, except that any errors
+  must be handled as described in the following list. Bytes in the
+  following list are represented in hexadecimal. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;One byte in the range FE to FF&lt;/dt&gt;
+
+   &lt;dt&gt;Overlong forms (e.g. F0 80 80 A0)&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range C0 to C1, followed by one byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F0 to F4, followed by three bytes in the range 80 to BF that represent a code point above U+10FFFF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F5 to F7, followed by three bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F8 to FB, followed by four bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range FC to FD, followed by five bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range E0 to FD, followed by a byte in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F0 to FD, followed by two bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F5 to FD, followed by three bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range FC to FD, followed by four bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+
+   &lt;dd&gt;The whole sequence must be replaced by a single U+FFFD
+   REPLACEMENT CHARACTER.&lt;/dd&gt;
+
+
+   &lt;dt&gt;One byte in the range 80 to BF not preceded by a byte in the range 80 to FD&lt;/dt&gt;
+
+   &lt;dt&gt;A sequence of bytes in the range 80 to BF that does not follow a byte in the range C0 to FD&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range C0 to FD not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+
+   &lt;dd&gt;Each byte must be replace with a U+FFFD REPLACEMENT CHARACTER.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p class=example&gt;For example, the byte string &quot;41 98 BA 42 E2 98
+  43 E2 98 BA E2 98&quot; would be converted to the string
+  &quot;A&#65533;&#65533;B&#65533;C&#9786;&#65533;&quot;.&lt;/p&gt;
+
+
+  &lt;h3 id=common-microsyntaxes&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common microsyntaxes&lt;/h3&gt;
+
   &lt;p&gt;There are various places in HTML that accept particular data
   types, such as dates or numbers. This section describes what the
   conformance criteria for content in those formats is, and how to
@@ -3525,7 +3576,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=common-parser-idioms&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Common parser idioms&lt;/h4&gt;
+  &lt;h4 id=common-parser-idioms&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Common parser idioms&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=space-character title=&quot;space character&quot;&gt;space characters&lt;/dfn&gt;, for the
   purposes of this specification, are U+0020 SPACE, U+0009 CHARACTER
@@ -3587,7 +3638,7 @@
 
 
 
-  &lt;h4 id=boolean-attributes&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Boolean attributes&lt;/h4&gt;
+  &lt;h4 id=boolean-attributes&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Boolean attributes&lt;/h4&gt;
 
   &lt;p&gt;A number of attributes are &lt;dfn id=boolean-attribute title=&quot;boolean attribute&quot;&gt;boolean
   attributes&lt;/dfn&gt;. The presence of a boolean attribute on an element
@@ -3623,7 +3674,7 @@
 
 
 
-  &lt;h4 id=keywords-and-enumerated-attributes&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Keywords and enumerated attributes&lt;/h4&gt;
+  &lt;h4 id=keywords-and-enumerated-attributes&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Keywords and enumerated attributes&lt;/h4&gt;
 
   &lt;p&gt;Some attributes are defined as taking one of a finite set of
   keywords. Such attributes are called &lt;dfn id=enumerated-attribute title=&quot;enumerated
@@ -3660,9 +3711,9 @@
   &lt;p class=note&gt;The empty string can be a valid keyword.&lt;/p&gt;
 
 
-  &lt;h4 id=numbers&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Numbers&lt;/h4&gt;
+  &lt;h4 id=numbers&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;Numbers&lt;/h4&gt;
 
-  &lt;h5 id=non-negative-integers&gt;&lt;span class=secno&gt;2.4.4.1 &lt;/span&gt;Non-negative integers&lt;/h5&gt;
+  &lt;h5 id=non-negative-integers&gt;&lt;span class=secno&gt;2.5.4.1 &lt;/span&gt;Non-negative integers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-non-negative-integer&gt;valid non-negative integer&lt;/dfn&gt; if it
   consists of one or more characters in the range U+0030 DIGIT ZERO
@@ -3712,7 +3763,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=signed-integers&gt;&lt;span class=secno&gt;2.4.4.2 &lt;/span&gt;Signed integers&lt;/h5&gt;
+  &lt;h5 id=signed-integers&gt;&lt;span class=secno&gt;2.5.4.2 &lt;/span&gt;Signed integers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-integer&gt;valid integer&lt;/dfn&gt; if it consists of one or
   more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT
@@ -3791,7 +3842,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;2.4.4.3 &lt;/span&gt;Real numbers&lt;/h5&gt;
+  &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;2.5.4.3 &lt;/span&gt;Real numbers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-floating-point-number&gt;valid floating point number&lt;/dfn&gt; if it
   consists of:&lt;/p&gt;
@@ -3996,7 +4047,7 @@
 
 
 &lt;div class=impl&gt;
-  &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;2.4.4.4 &lt;/span&gt;Percentages and lengths&lt;/h5&gt;
+  &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;2.5.4.4 &lt;/span&gt;Percentages and lengths&lt;/h5&gt;
 &lt;!--(percentages are not used in valid html anymore)
   &lt;p&gt;A string is a &lt;dfn&gt;valid dimension value&lt;/dfn&gt; if it consists of
   a character in the range U+0031 DIGIT ONE (1) to U+0039 DIGIT NINE
@@ -4099,7 +4150,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=lists-of-integers&gt;&lt;span class=secno&gt;2.4.4.5 &lt;/span&gt;Lists of integers&lt;/h5&gt;
+  &lt;h5 id=lists-of-integers&gt;&lt;span class=secno&gt;2.5.4.5 &lt;/span&gt;Lists of integers&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=valid-list-of-integers&gt;valid list of integers&lt;/dfn&gt; is a number of &lt;a href=#valid-integer title=&quot;valid integer&quot;&gt;valid integers&lt;/a&gt; separated by U+002C
   COMMA characters, with no other characters (e.g. no &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt;). In addition, there
@@ -4370,7 +4421,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=lists-of-dimensions&gt;&lt;span class=secno&gt;2.4.4.6 &lt;/span&gt;Lists of dimensions&lt;/h5&gt;
+  &lt;h5 id=lists-of-dimensions&gt;&lt;span class=secno&gt;2.5.4.6 &lt;/span&gt;Lists of dimensions&lt;/h5&gt;
 
   &lt;!-- no definition of a type since no conforming feature uses this
   syntax (it's only used in cols=&quot;&quot; and rows=&quot;&quot; on &lt;frameset&gt; --&gt;
@@ -4474,7 +4525,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=dates-and-times&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Dates and times&lt;/h4&gt;
+  &lt;h4 id=dates-and-times&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;Dates and times&lt;/h4&gt;
 
   &lt;p&gt;In the algorithms below, the &lt;dfn id=number-of-days-in-month-month-of-year-year&gt;number of days in month &lt;var title=&quot;&quot;&gt;month&lt;/var&gt; of year &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;&lt;/dfn&gt; is:
   &lt;em&gt;31&lt;/em&gt; if &lt;var title=&quot;&quot;&gt;month&lt;/var&gt; is 1, 3, 5, 7, 8, 10, or
@@ -4501,7 +4552,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=months&gt;&lt;span class=secno&gt;2.4.5.1 &lt;/span&gt;Months&lt;/h5&gt;
+  &lt;h5 id=months&gt;&lt;span class=secno&gt;2.5.5.1 &lt;/span&gt;Months&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-month title=concept-month&gt;month&lt;/dfn&gt; consists of a specific
   proleptic Gregorian date with no time-zone information and no date
@@ -4573,7 +4624,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=dates&gt;&lt;span class=secno&gt;2.4.5.2 &lt;/span&gt;Dates&lt;/h5&gt;
+  &lt;h5 id=dates&gt;&lt;span class=secno&gt;2.5.5.2 &lt;/span&gt;Dates&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-date title=concept-date&gt;date&lt;/dfn&gt; consists of a specific
   proleptic Gregorian date with no time-zone information, consisting
@@ -4645,7 +4696,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=times&gt;&lt;span class=secno&gt;2.4.5.3 &lt;/span&gt;Times&lt;/h5&gt;
+  &lt;h5 id=times&gt;&lt;span class=secno&gt;2.5.5.3 &lt;/span&gt;Times&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-time title=concept-time&gt;time&lt;/dfn&gt; consists of a specific
   time with no time-zone information, consisting of an hour, a minute,
@@ -4782,7 +4833,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=local-dates-and-times&gt;&lt;span class=secno&gt;2.4.5.4 &lt;/span&gt;Local dates and times&lt;/h5&gt;
+  &lt;h5 id=local-dates-and-times&gt;&lt;span class=secno&gt;2.5.5.4 &lt;/span&gt;Local dates and times&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/dfn&gt;
   consists of a specific proleptic Gregorian date, consisting of a
@@ -4834,7 +4885,7 @@
 
 
 
-  &lt;h5 id=global-dates-and-times&gt;&lt;span class=secno&gt;2.4.5.5 &lt;/span&gt;Global dates and times&lt;/h5&gt;
+  &lt;h5 id=global-dates-and-times&gt;&lt;span class=secno&gt;2.5.5.5 &lt;/span&gt;Global dates and times&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-datetime title=concept-datetime&gt;global date and time&lt;/dfn&gt;
   consists of a specific proleptic Gregorian date, consisting of a
@@ -5050,7 +5101,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=weeks&gt;&lt;span class=secno&gt;2.4.5.6 &lt;/span&gt;Weeks&lt;/h5&gt;
+  &lt;h5 id=weeks&gt;&lt;span class=secno&gt;2.5.5.6 &lt;/span&gt;Weeks&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-week title=concept-week&gt;week&lt;/dfn&gt; consists of a week-year
   number and a week number representing a seven-day period starting on
@@ -5145,7 +5196,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.4.5.7 &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
+  &lt;h5 id=vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.5.5.7 &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-date-or-time-string&gt;valid date or time string&lt;/dfn&gt; if it is also
   one of the following:&lt;/p&gt;
@@ -5255,7 +5306,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=colors&gt;&lt;span class=secno&gt;2.4.6 &lt;/span&gt;Colors&lt;/h4&gt;
+  &lt;h4 id=colors&gt;&lt;span class=secno&gt;2.5.6 &lt;/span&gt;Colors&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=simple-color&gt;simple color&lt;/dfn&gt; consists of three 8-bit numbers in the
   range 0..255, representing the red, green, and blue components of
@@ -5459,7 +5510,7 @@
   &lt;!--2DCANVAS--&gt;
 
 
-  &lt;h4 id=space-separated-tokens&gt;&lt;span class=secno&gt;2.4.7 &lt;/span&gt;Space-separated tokens&lt;/h4&gt;
+  &lt;h4 id=space-separated-tokens&gt;&lt;span class=secno&gt;2.5.7 &lt;/span&gt;Space-separated tokens&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=set-of-space-separated-tokens&gt;set of space-separated tokens&lt;/dfn&gt; is a string containing
   zero or more words separated by one or more &lt;a href=#space-character title=&quot;space
@@ -5579,7 +5630,7 @@
 
 
 
-  &lt;h4 id=comma-separated-tokens&gt;&lt;span class=secno&gt;2.4.8 &lt;/span&gt;Comma-separated tokens&lt;/h4&gt;
+  &lt;h4 id=comma-separated-tokens&gt;&lt;span class=secno&gt;2.5.8 &lt;/span&gt;Comma-separated tokens&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=set-of-comma-separated-tokens&gt;set of comma-separated tokens&lt;/dfn&gt; is a string containing
   zero or more tokens each separated from the next by a single U+002C
@@ -5636,7 +5687,7 @@
 
 
 
-  &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;2.4.9 &lt;/span&gt;References&lt;/h4&gt;
+  &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;2.5.9 &lt;/span&gt;References&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=valid-hash-name-reference&gt;valid hash-name reference&lt;/dfn&gt; to an element of type &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; is a string consisting of a U+0023 NUMBER SIGN
   character (#) followed by a string which exactly matches the value
@@ -5675,7 +5726,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=mq&gt;&lt;span class=secno&gt;2.4.10 &lt;/span&gt;Media queries&lt;/h4&gt;
+  &lt;h4 id=mq&gt;&lt;span class=secno&gt;2.5.10 &lt;/span&gt;Media queries&lt;/h4&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-media-query&gt;valid media query&lt;/dfn&gt; if it matches the
   &lt;code title=&quot;&quot;&gt;media_query_list&lt;/code&gt; production of the Media
@@ -5690,9 +5741,9 @@
 
 
 
-  &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;URLs&lt;/h3&gt;
+  &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;URLs&lt;/h3&gt;
 
-  &lt;h4 id=terminology-0&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Terminology&lt;/h4&gt;
+  &lt;h4 id=terminology-0&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Terminology&lt;/h4&gt;
 
   &lt;!-- see also: svn diff -r3244:3245 source --&gt;
 
@@ -5882,7 +5933,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/h4&gt;
+  &lt;h4 id=dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code title=attr-xml-base&gt;&lt;a href=#the-xml:base-attribute-(xml-only)&gt;xml:base&lt;/a&gt;&lt;/code&gt; attribute
   changes, the attribute's element, and all descendant elements, are
@@ -5955,7 +6006,7 @@
 
 
 
-  &lt;h4 id=interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/h4&gt;
+  &lt;h4 id=interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/h4&gt;
 
   &lt;p&gt;An interface that has a complement of &lt;dfn id=url-decomposition-idl-attributes&gt;URL decomposition IDL
   attributes&lt;/dfn&gt; will have seven attributes with the following
@@ -6156,7 +6207,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=fetching-resources&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Fetching resources&lt;/h3&gt;
+  &lt;h3 id=fetching-resources&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Fetching resources&lt;/h3&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=fetch&gt;fetch&lt;/dfn&gt; a resource or
   &lt;a href=#url&gt;URL&lt;/a&gt;, optionally from an origin &lt;i title=&quot;&quot;&gt;origin&lt;/i&gt;,
@@ -6369,7 +6420,7 @@
   applicable.&lt;/p&gt;
 
 
-  &lt;h4 id=concept-http-equivalent&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Protocol concepts&lt;/h4&gt;
+  &lt;h4 id=concept-http-equivalent&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Protocol concepts&lt;/h4&gt;
 
   &lt;p&gt;User agents can implement a variety of transfer protocols, but
   this specification mostly defines behavior in terms of HTTP. &lt;a href=#refsHTTP&gt;[HTTP]&lt;/a&gt;&lt;/p&gt;
@@ -6392,7 +6443,7 @@
   protocol.&lt;/p&gt;
 
 
-  &lt;h4 id=encrypted-http-and-related-security-concerns&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Encrypted HTTP and related security concerns&lt;/h4&gt;
+  &lt;h4 id=encrypted-http-and-related-security-concerns&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Encrypted HTTP and related security concerns&lt;/h4&gt;
 
   &lt;p&gt;Anything in this specification that refers to HTTP also applies
   to HTTP-over-TLS, as represented by &lt;a href=#url title=url&gt;URLs&lt;/a&gt;
@@ -6438,7 +6489,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=content-type-sniffing&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;Determining the type of a resource&lt;/h4&gt;
+  &lt;h4 id=content-type-sniffing&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;Determining the type of a resource&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=content-type title=Content-Type&gt;Content-Type metadata&lt;/dfn&gt; of a
   resource must be obtained and interpreted in a manner consistent
@@ -6513,9 +6564,9 @@
 
 
 
-  &lt;h3 id=common-dom-interfaces&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
+  &lt;h3 id=common-dom-interfaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
 
-  &lt;h4 id=reflecting-content-attributes-in-idl-attributes&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Reflecting content attributes in IDL attributes&lt;/h4&gt;
+  &lt;h4 id=reflecting-content-attributes-in-idl-attributes&gt;&lt;span class=secno&gt;2.8.1 &lt;/span&gt;Reflecting content attributes in IDL attributes&lt;/h4&gt;
 
   &lt;p&gt;Some IDL attributes are defined to &lt;dfn id=reflect&gt;reflect&lt;/dfn&gt; a
   particular content attribute. This means that on getting, the IDL
@@ -6717,7 +6768,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=collections-0&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Collections&lt;/h4&gt;
+  &lt;h4 id=collections-0&gt;&lt;span class=secno&gt;2.8.2 &lt;/span&gt;Collections&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlallcollection&gt;HTMLAllCollection&lt;/a&gt;&lt;/code&gt;,
   &lt;code&gt;&lt;a href=#htmlformcontrolscollection&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;,
@@ -6753,7 +6804,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=htmlcollection-0&gt;&lt;span class=secno&gt;2.7.2.1 &lt;/span&gt;HTMLCollection&lt;/h5&gt;
+  &lt;h5 id=htmlcollection-0&gt;&lt;span class=secno&gt;2.8.2.1 &lt;/span&gt;HTMLCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; interface represents a generic
   &lt;a href=#collections title=collections&gt;collection&lt;/a&gt; of elements.&lt;/p&gt;
@@ -6833,7 +6884,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=htmlallcollection-0&gt;&lt;span class=secno&gt;2.7.2.2 &lt;/span&gt;HTMLAllCollection&lt;/h5&gt;
+  &lt;h5 id=htmlallcollection-0&gt;&lt;span class=secno&gt;2.8.2.2 &lt;/span&gt;HTMLAllCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlallcollection&gt;HTMLAllCollection&lt;/a&gt;&lt;/code&gt; interface represents a generic
   &lt;a href=#collections title=collections&gt;collection&lt;/a&gt; of elements just like
@@ -6932,7 +6983,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=htmlformcontrolscollection-0&gt;&lt;span class=secno&gt;2.7.2.3 &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
+  &lt;h5 id=htmlformcontrolscollection-0&gt;&lt;span class=secno&gt;2.8.2.3 &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlformcontrolscollection&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt; interface represents
   a &lt;a href=#collections title=collections&gt;collection&lt;/a&gt; of &lt;a href=#category-listed title=category-listed&gt;listed elements&lt;/a&gt; in &lt;code&gt;&lt;a href=#the-form-element&gt;form&lt;/a&gt;&lt;/code&gt;
@@ -7049,7 +7100,7 @@
 --&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=htmloptionscollection-0&gt;&lt;span class=secno&gt;2.7.2.4 &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
+  &lt;h5 id=htmloptionscollection-0&gt;&lt;span class=secno&gt;2.8.2.4 &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmloptionscollection&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; interface represents a
   list of &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements. It is always rooted on a
@@ -7228,7 +7279,7 @@
 &lt;!--MD--&gt;
   &lt;div data-component=&quot;HTML Microdata (editor: Ian Hickson)&quot;&gt;
 
-  &lt;h5 id=htmlpropertiescollection-0&gt;&lt;span class=secno&gt;2.7.2.5 &lt;/span&gt;HTMLPropertiesCollection&lt;/h5&gt;
+  &lt;h5 id=htmlpropertiescollection-0&gt;&lt;span class=secno&gt;2.8.2.5 &lt;/span&gt;HTMLPropertiesCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlpropertiescollection&gt;HTMLPropertiesCollection&lt;/a&gt;&lt;/code&gt; interface represents a
   &lt;a href=#collections title=collections&gt;collection&lt;/a&gt; of elements that add
@@ -7319,7 +7370,7 @@
 &lt;!--MD--&gt;
 
 
-  &lt;h4 id=domtokenlist-0&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
+  &lt;h4 id=domtokenlist-0&gt;&lt;span class=secno&gt;2.8.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#domtokenlist&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface represents an interface
   to an underlying string that consists of a &lt;a href=#set-of-space-separated-tokens&gt;set of
@@ -7505,7 +7556,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=domsettabletokenlist-0&gt;&lt;span class=secno&gt;2.7.4 &lt;/span&gt;DOMSettableTokenList&lt;/h4&gt;
+  &lt;h4 id=domsettabletokenlist-0&gt;&lt;span class=secno&gt;2.8.4 &lt;/span&gt;DOMSettableTokenList&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#domsettabletokenlist&gt;DOMSettableTokenList&lt;/a&gt;&lt;/code&gt; interface is the same as the
   &lt;code&gt;&lt;a href=#domtokenlist&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface, except that it allows the
@@ -7537,7 +7588,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.7.5 &lt;/span&gt;Safe passing of structured data&lt;/h4&gt;
+  &lt;h4 id=safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.8.5 &lt;/span&gt;Safe passing of structured data&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is required to obtain a &lt;dfn id=structured-clone&gt;structured
   clone&lt;/dfn&gt; of an object, it must run the following algorithm, which
@@ -7662,7 +7713,7 @@
   &lt;/dl&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=domstringmap-0&gt;&lt;span class=secno&gt;2.7.6 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
+  &lt;h4 id=domstringmap-0&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#domstringmap&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; interface represents a set of
   name-value pairs. It exposes these using the scripting language's
@@ -7745,7 +7796,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=dom-feature-strings&gt;&lt;span class=secno&gt;2.7.7 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
+  &lt;h4 id=dom-feature-strings&gt;&lt;span class=secno&gt;2.8.7 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
 
   &lt;p&gt;DOM3 Core defines mechanisms for checking for interface support,
   and for obtaining implementations of interfaces, using &lt;a href=<A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures">http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures</A>&gt;feature
@@ -7767,7 +7818,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=exceptions&gt;&lt;span class=secno&gt;2.7.8 &lt;/span&gt;Exceptions&lt;/h4&gt;
+  &lt;h4 id=exceptions&gt;&lt;span class=secno&gt;2.8.8 &lt;/span&gt;Exceptions&lt;/h4&gt;
 
   &lt;p&gt;The following are &lt;code&gt;&lt;a href=#domexception&gt;DOMException&lt;/a&gt;&lt;/code&gt; codes. &lt;a href=#refsDOMCORE&gt;[DOMCORE]&lt;/a&gt;&lt;/p&gt;
 
@@ -7815,7 +7866,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=garbage-collection&gt;&lt;span class=secno&gt;2.7.9 &lt;/span&gt;Garbage collection&lt;/h4&gt;
+  &lt;h4 id=garbage-collection&gt;&lt;span class=secno&gt;2.8.9 &lt;/span&gt;Garbage collection&lt;/h4&gt;
 
   &lt;p&gt;There is an &lt;dfn id=implied-strong-reference&gt;implied strong reference&lt;/dfn&gt; from any IDL
   attribute that returns a pre-existing object to that object.&lt;/p&gt;
@@ -7834,7 +7885,7 @@
   &lt;/div&gt;
 
 
-  &lt;h3 id=namespaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Namespaces&lt;/h3&gt;
+  &lt;h3 id=namespaces&gt;&lt;span class=secno&gt;2.9 &lt;/span&gt;Namespaces&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=html-namespace-0&gt;HTML namespace&lt;/dfn&gt; is: &lt;code&gt;<A HREF="http://www.w3.org/1999/xhtml&lt;/code">http://www.w3.org/1999/xhtml&lt;/code</A>&gt;&lt;/p&gt;
 
@@ -8127,9 +8178,8 @@
   &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the user agent must
   first &lt;a href=#obtain-the-storage-mutex&gt;obtain the storage mutex&lt;/a&gt; and then return the
   cookie-string for &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; for a
-  &quot;non-HTTP&quot; API, decoded as UTF-8, with bytes or sequences of bytes
-  that are not valid UTF-8 sequences interpreted as U+FFFD REPLACEMENT
-  CHARACTERs. &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt; &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+  &quot;non-HTTP&quot; API, &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error handling&lt;/a&gt;.
+  &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;On setting, if the document is a &lt;a href=#cookie-free-document-object&gt;cookie-free
   &lt;code&gt;Document&lt;/code&gt; object&lt;/a&gt;, then the user agent must do
@@ -28668,10 +28718,10 @@
   &lt;ul class=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#text/srt&gt;text/srt&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
   &lt;/ul&gt;&lt;!--&lt;p class=&quot;note&quot;&gt;Not all of these MIME types are valid registered
   types.&lt;/p&gt;--&gt;&lt;p&gt;When converting the bytes into Unicode characters, if the
-  encoding used is UTF-8, bytes or sequences of bytes that are not
-  valid UTF-8 sequences must be interpreted as a U+FFFD REPLACEMENT
-  CHARACTER, and all U+0000 NULL characters must be replaced by U+FFFD
-  REPLACEMENT CHARACTERs.&lt;/p&gt;
+  encoding used is UTF-8, the bytes must be &lt;a href=#decoded-as-utf-8,-with-error-handling title=&quot;decoded as
+  UTF-8, with error handling&quot;&gt;decoded with the error handling&lt;/a&gt;
+  defined in this specification, and all U+0000 NULL characters must
+  be replaced by U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=websrt-parser-algorithm&gt;WebSRT parser algorithm&lt;/dfn&gt; is as follows:&lt;/p&gt;
 
@@ -62700,13 +62750,13 @@
   &lt;p&gt;When a user agent is to &lt;dfn id=parse-a-manifest&gt;parse a manifest&lt;/dfn&gt;, it means
   that the user agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;The user agent must decode the byte stream corresponding with
-   the manifest to be parsed, treating it as UTF-8. Bytes or sequences
-   of bytes that are not valid UTF-8 sequences must be interpreted as
-   a U+FFFD REPLACEMENT CHARACTER. &lt;!--All U+0000 NULL characters must
-   be replaced by U+FFFD REPLACEMENT CHARACTERs. (this isn't black-box
-   testable since neither U+0000 nor U+FFFD are valid anywhere in the
-   syntax and thus both will be treated the same anyway)--&gt; &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;The user agent must decode the byte stream corresponding
+   with the manifest to be parsed &lt;a href=#decoded-as-utf-8,-with-error-handling title=&quot;decoded as UTF-8, with
+   error handling&quot;&gt;as UTF-8, with error handling&lt;/a&gt;. &lt;!--All
+   U+0000 NULL characters must be replaced by U+FFFD REPLACEMENT
+   CHARACTERs. (this isn't black-box testable since neither U+0000 nor
+   U+FFFD are valid anywhere in the syntax and thus both will be
+   treated the same anyway)--&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;a href=#absolute-url&gt;absolute
    URL&lt;/a&gt; representing the manifest.&lt;/li&gt;
@@ -71724,8 +71774,10 @@
     &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;error&lt;/code&gt; at that object. Abort these
     steps.&lt;/p&gt;
 
-    &lt;p&gt;If the attempt succeeds, then convert the script resource to
-    Unicode by assuming it was encoded as UTF-8, to obtain its &lt;var title=&quot;&quot;&gt;source&lt;/var&gt;. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+    &lt;p&gt;If the attempt succeeds, then let &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; be
+    the script resource &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error
+    handling&lt;/a&gt;.
+    &lt;/p&gt;
 
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; be JavaScript.&lt;/p&gt;
 
@@ -72469,8 +72521,10 @@
       &lt;code&gt;&lt;a href=#network_err&gt;NETWORK_ERR&lt;/a&gt;&lt;/code&gt; exception and abort all these
       steps.&lt;/p&gt;
 
-      &lt;p&gt;If the attempt succeeds, then convert the script resource to
-      Unicode by assuming it was encoded as UTF-8, to obtain its &lt;var title=&quot;&quot;&gt;source&lt;/var&gt;. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;If the attempt succeeds, then let &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; be
+      the script resource &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error
+      handling&lt;/a&gt;.
+      &lt;/p&gt;
 
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; be JavaScript.&lt;/p&gt;
 
@@ -73060,9 +73114,9 @@
 
   &lt;h4 id=event-stream-interpretation&gt;&lt;span class=secno&gt;10.2.5 &lt;/span&gt;Interpreting an event stream&lt;/h4&gt;
 
-  &lt;p&gt;Streams must be decoded as UTF-8 text. Bytes or sequences of
-  bytes that are not valid UTF-8 sequences must be interpreted as the
-  U+FFFD REPLACEMENT CHARACTER. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Streams must be &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error
+  handling&lt;/a&gt;.
+  &lt;/p&gt;
 
   &lt;p&gt;One leading U+FEFF BYTE ORDER MARK character must be ignored if
   any are present.&lt;/p&gt;
@@ -77002,7 +77056,10 @@
 
   &lt;p&gt;Bytes or sequences of bytes in the original byte stream that
   could not be converted to Unicode code points must be converted to
-  U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
+  U+FFFD REPLACEMENT CHARACTERs. Specifically, if the encoding is
+  UTF-8, the bytes must be &lt;a href=#decoded-as-utf-8,-with-error-handling title=&quot;decoded as UTF-8, with error
+  handling&quot;&gt;decoded with the error handling&lt;/a&gt; defined in this
+  specification.&lt;/p&gt;
 
   &lt;p class=note&gt;Bytes or sequences of bytes in the original byte
   stream that did not conform to the encoding specification

Modified: index
===================================================================
--- index	2010-09-28 18:31:45 UTC (rev 5529)
+++ index	2010-09-28 19:16:16 UTC (rev 5530)
@@ -320,61 +320,62 @@
      &lt;li&gt;&lt;a href=#dependencies&gt;&lt;span class=secno&gt;2.2.1 &lt;/span&gt;Dependencies&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#extensibility&gt;&lt;span class=secno&gt;2.2.2 &lt;/span&gt;Extensibility&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#case-sensitivity-and-string-comparison&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;Case-sensitivity and string comparison&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#common-microsyntaxes&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;Common microsyntaxes&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#utf-8&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;UTF-8&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#common-microsyntaxes&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common microsyntaxes&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#common-parser-idioms&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Common parser idioms&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#boolean-attributes&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Boolean attributes&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#keywords-and-enumerated-attributes&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Keywords and enumerated attributes&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#numbers&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Numbers&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#common-parser-idioms&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Common parser idioms&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#boolean-attributes&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Boolean attributes&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#keywords-and-enumerated-attributes&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Keywords and enumerated attributes&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#numbers&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;Numbers&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#non-negative-integers&gt;&lt;span class=secno&gt;2.4.4.1 &lt;/span&gt;Non-negative integers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#signed-integers&gt;&lt;span class=secno&gt;2.4.4.2 &lt;/span&gt;Signed integers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#real-numbers&gt;&lt;span class=secno&gt;2.4.4.3 &lt;/span&gt;Real numbers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#percentages-and-dimensions&gt;&lt;span class=secno&gt;2.4.4.4 &lt;/span&gt;Percentages and lengths&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#lists-of-integers&gt;&lt;span class=secno&gt;2.4.4.5 &lt;/span&gt;Lists of integers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#lists-of-dimensions&gt;&lt;span class=secno&gt;2.4.4.6 &lt;/span&gt;Lists of dimensions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dates-and-times&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Dates and times&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#non-negative-integers&gt;&lt;span class=secno&gt;2.5.4.1 &lt;/span&gt;Non-negative integers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#signed-integers&gt;&lt;span class=secno&gt;2.5.4.2 &lt;/span&gt;Signed integers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#real-numbers&gt;&lt;span class=secno&gt;2.5.4.3 &lt;/span&gt;Real numbers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#percentages-and-dimensions&gt;&lt;span class=secno&gt;2.5.4.4 &lt;/span&gt;Percentages and lengths&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#lists-of-integers&gt;&lt;span class=secno&gt;2.5.4.5 &lt;/span&gt;Lists of integers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#lists-of-dimensions&gt;&lt;span class=secno&gt;2.5.4.6 &lt;/span&gt;Lists of dimensions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dates-and-times&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;Dates and times&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#months&gt;&lt;span class=secno&gt;2.4.5.1 &lt;/span&gt;Months&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#dates&gt;&lt;span class=secno&gt;2.4.5.2 &lt;/span&gt;Dates&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#times&gt;&lt;span class=secno&gt;2.4.5.3 &lt;/span&gt;Times&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#local-dates-and-times&gt;&lt;span class=secno&gt;2.4.5.4 &lt;/span&gt;Local dates and times&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#global-dates-and-times&gt;&lt;span class=secno&gt;2.4.5.5 &lt;/span&gt;Global dates and times&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#weeks&gt;&lt;span class=secno&gt;2.4.5.6 &lt;/span&gt;Weeks&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.4.5.7 &lt;/span&gt;Vaguer moments in time&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#colors&gt;&lt;span class=secno&gt;2.4.6 &lt;/span&gt;Colors&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#space-separated-tokens&gt;&lt;span class=secno&gt;2.4.7 &lt;/span&gt;Space-separated tokens&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#comma-separated-tokens&gt;&lt;span class=secno&gt;2.4.8 &lt;/span&gt;Comma-separated tokens&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#syntax-references&gt;&lt;span class=secno&gt;2.4.9 &lt;/span&gt;References&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#mq&gt;&lt;span class=secno&gt;2.4.10 &lt;/span&gt;Media queries&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#urls&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;URLs&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#months&gt;&lt;span class=secno&gt;2.5.5.1 &lt;/span&gt;Months&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#dates&gt;&lt;span class=secno&gt;2.5.5.2 &lt;/span&gt;Dates&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#times&gt;&lt;span class=secno&gt;2.5.5.3 &lt;/span&gt;Times&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#local-dates-and-times&gt;&lt;span class=secno&gt;2.5.5.4 &lt;/span&gt;Local dates and times&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#global-dates-and-times&gt;&lt;span class=secno&gt;2.5.5.5 &lt;/span&gt;Global dates and times&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#weeks&gt;&lt;span class=secno&gt;2.5.5.6 &lt;/span&gt;Weeks&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.5.5.7 &lt;/span&gt;Vaguer moments in time&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#colors&gt;&lt;span class=secno&gt;2.5.6 &lt;/span&gt;Colors&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#space-separated-tokens&gt;&lt;span class=secno&gt;2.5.7 &lt;/span&gt;Space-separated tokens&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#comma-separated-tokens&gt;&lt;span class=secno&gt;2.5.8 &lt;/span&gt;Comma-separated tokens&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#syntax-references&gt;&lt;span class=secno&gt;2.5.9 &lt;/span&gt;References&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#mq&gt;&lt;span class=secno&gt;2.5.10 &lt;/span&gt;Media queries&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#urls&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;URLs&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#terminology-0&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Terminology&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#fetching-resources&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Fetching resources&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#terminology-0&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Terminology&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#fetching-resources&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Fetching resources&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#concept-http-equivalent&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Protocol concepts&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#encrypted-http-and-related-security-concerns&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Encrypted HTTP and related security concerns&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#content-type-sniffing&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;Determining the type of a resource&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#common-dom-interfaces&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Common DOM interfaces&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#concept-http-equivalent&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Protocol concepts&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#encrypted-http-and-related-security-concerns&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Encrypted HTTP and related security concerns&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#content-type-sniffing&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;Determining the type of a resource&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#common-dom-interfaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Common DOM interfaces&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#reflecting-content-attributes-in-idl-attributes&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Reflecting content attributes in IDL attributes&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#collections-0&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Collections&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#reflecting-content-attributes-in-idl-attributes&gt;&lt;span class=secno&gt;2.8.1 &lt;/span&gt;Reflecting content attributes in IDL attributes&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#collections-0&gt;&lt;span class=secno&gt;2.8.2 &lt;/span&gt;Collections&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#htmlcollection-0&gt;&lt;span class=secno&gt;2.7.2.1 &lt;/span&gt;HTMLCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmlallcollection-0&gt;&lt;span class=secno&gt;2.7.2.2 &lt;/span&gt;HTMLAllCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmlformcontrolscollection-0&gt;&lt;span class=secno&gt;2.7.2.3 &lt;/span&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmloptionscollection-0&gt;&lt;span class=secno&gt;2.7.2.4 &lt;/span&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmlpropertiescollection-0&gt;&lt;span class=secno&gt;2.7.2.5 &lt;/span&gt;HTMLPropertiesCollection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#domtokenlist-0&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;DOMTokenList&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#domsettabletokenlist-0&gt;&lt;span class=secno&gt;2.7.4 &lt;/span&gt;DOMSettableTokenList&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.7.5 &lt;/span&gt;Safe passing of structured data&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#domstringmap-0&gt;&lt;span class=secno&gt;2.7.6 &lt;/span&gt;DOMStringMap&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dom-feature-strings&gt;&lt;span class=secno&gt;2.7.7 &lt;/span&gt;DOM feature strings&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#exceptions&gt;&lt;span class=secno&gt;2.7.8 &lt;/span&gt;Exceptions&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#garbage-collection&gt;&lt;span class=secno&gt;2.7.9 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#namespaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Namespaces&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlcollection-0&gt;&lt;span class=secno&gt;2.8.2.1 &lt;/span&gt;HTMLCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlallcollection-0&gt;&lt;span class=secno&gt;2.8.2.2 &lt;/span&gt;HTMLAllCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlformcontrolscollection-0&gt;&lt;span class=secno&gt;2.8.2.3 &lt;/span&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmloptionscollection-0&gt;&lt;span class=secno&gt;2.8.2.4 &lt;/span&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlpropertiescollection-0&gt;&lt;span class=secno&gt;2.8.2.5 &lt;/span&gt;HTMLPropertiesCollection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#domtokenlist-0&gt;&lt;span class=secno&gt;2.8.3 &lt;/span&gt;DOMTokenList&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#domsettabletokenlist-0&gt;&lt;span class=secno&gt;2.8.4 &lt;/span&gt;DOMSettableTokenList&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.8.5 &lt;/span&gt;Safe passing of structured data&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#domstringmap-0&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;DOMStringMap&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dom-feature-strings&gt;&lt;span class=secno&gt;2.8.7 &lt;/span&gt;DOM feature strings&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#exceptions&gt;&lt;span class=secno&gt;2.8.8 &lt;/span&gt;Exceptions&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#garbage-collection&gt;&lt;span class=secno&gt;2.8.9 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#namespaces&gt;&lt;span class=secno&gt;2.9 &lt;/span&gt;Namespaces&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#dom&gt;&lt;span class=secno&gt;3 &lt;/span&gt;Semantics, structure, and APIs of HTML documents&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#documents&gt;&lt;span class=secno&gt;3.1 &lt;/span&gt;Documents&lt;/a&gt;
@@ -3479,8 +3480,58 @@
   two strings as matches of each other.&lt;/p&gt;
 
 
-  &lt;h3 id=common-microsyntaxes&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;Common microsyntaxes&lt;/h3&gt;
+  &lt;h3 id=utf-8&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;UTF-8&lt;/h3&gt;
 
+  &lt;p&gt;When a user agent is required to &lt;dfn id=decoded-as-utf-8,-with-error-handling title=&quot;decoded as UTF-8,
+  with error handling&quot;&gt;decode a byte string as UTF-8, with error
+  handling&lt;/dfn&gt;, it means that the byte stream must be converted to a
+  Unicode string by interpreting it as UTF-8, except that any errors
+  must be handled as described in the following list. Bytes in the
+  following list are represented in hexadecimal. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;One byte in the range FE to FF&lt;/dt&gt;
+
+   &lt;dt&gt;Overlong forms (e.g. F0 80 80 A0)&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range C0 to C1, followed by one byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F0 to F4, followed by three bytes in the range 80 to BF that represent a code point above U+10FFFF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F5 to F7, followed by three bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F8 to FB, followed by four bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range FC to FD, followed by five bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range E0 to FD, followed by a byte in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F0 to FD, followed by two bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F5 to FD, followed by three bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range FC to FD, followed by four bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+
+   &lt;dd&gt;The whole sequence must be replaced by a single U+FFFD
+   REPLACEMENT CHARACTER.&lt;/dd&gt;
+
+
+   &lt;dt&gt;One byte in the range 80 to BF not preceded by a byte in the range 80 to FD&lt;/dt&gt;
+
+   &lt;dt&gt;A sequence of bytes in the range 80 to BF that does not follow a byte in the range C0 to FD&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range C0 to FD not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+
+   &lt;dd&gt;Each byte must be replace with a U+FFFD REPLACEMENT CHARACTER.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p class=example&gt;For example, the byte string &quot;41 98 BA 42 E2 98
+  43 E2 98 BA E2 98&quot; would be converted to the string
+  &quot;A&#65533;&#65533;B&#65533;C&#9786;&#65533;&quot;.&lt;/p&gt;
+
+
+  &lt;h3 id=common-microsyntaxes&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common microsyntaxes&lt;/h3&gt;
+
   &lt;p&gt;There are various places in HTML that accept particular data
   types, such as dates or numbers. This section describes what the
   conformance criteria for content in those formats is, and how to
@@ -3502,7 +3553,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=common-parser-idioms&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Common parser idioms&lt;/h4&gt;
+  &lt;h4 id=common-parser-idioms&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Common parser idioms&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=space-character title=&quot;space character&quot;&gt;space characters&lt;/dfn&gt;, for the
   purposes of this specification, are U+0020 SPACE, U+0009 CHARACTER
@@ -3564,7 +3615,7 @@
 
 
 
-  &lt;h4 id=boolean-attributes&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Boolean attributes&lt;/h4&gt;
+  &lt;h4 id=boolean-attributes&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Boolean attributes&lt;/h4&gt;
 
   &lt;p&gt;A number of attributes are &lt;dfn id=boolean-attribute title=&quot;boolean attribute&quot;&gt;boolean
   attributes&lt;/dfn&gt;. The presence of a boolean attribute on an element
@@ -3600,7 +3651,7 @@
 
 
 
-  &lt;h4 id=keywords-and-enumerated-attributes&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Keywords and enumerated attributes&lt;/h4&gt;
+  &lt;h4 id=keywords-and-enumerated-attributes&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Keywords and enumerated attributes&lt;/h4&gt;
 
   &lt;p&gt;Some attributes are defined as taking one of a finite set of
   keywords. Such attributes are called &lt;dfn id=enumerated-attribute title=&quot;enumerated
@@ -3637,9 +3688,9 @@
   &lt;p class=note&gt;The empty string can be a valid keyword.&lt;/p&gt;
 
 
-  &lt;h4 id=numbers&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Numbers&lt;/h4&gt;
+  &lt;h4 id=numbers&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;Numbers&lt;/h4&gt;
 
-  &lt;h5 id=non-negative-integers&gt;&lt;span class=secno&gt;2.4.4.1 &lt;/span&gt;Non-negative integers&lt;/h5&gt;
+  &lt;h5 id=non-negative-integers&gt;&lt;span class=secno&gt;2.5.4.1 &lt;/span&gt;Non-negative integers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-non-negative-integer&gt;valid non-negative integer&lt;/dfn&gt; if it
   consists of one or more characters in the range U+0030 DIGIT ZERO
@@ -3689,7 +3740,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=signed-integers&gt;&lt;span class=secno&gt;2.4.4.2 &lt;/span&gt;Signed integers&lt;/h5&gt;
+  &lt;h5 id=signed-integers&gt;&lt;span class=secno&gt;2.5.4.2 &lt;/span&gt;Signed integers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-integer&gt;valid integer&lt;/dfn&gt; if it consists of one or
   more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT
@@ -3768,7 +3819,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;2.4.4.3 &lt;/span&gt;Real numbers&lt;/h5&gt;
+  &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;2.5.4.3 &lt;/span&gt;Real numbers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-floating-point-number&gt;valid floating point number&lt;/dfn&gt; if it
   consists of:&lt;/p&gt;
@@ -3973,7 +4024,7 @@
 
 
 &lt;div class=impl&gt;
-  &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;2.4.4.4 &lt;/span&gt;Percentages and lengths&lt;/h5&gt;
+  &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;2.5.4.4 &lt;/span&gt;Percentages and lengths&lt;/h5&gt;
 &lt;!--(percentages are not used in valid html anymore)
   &lt;p&gt;A string is a &lt;dfn&gt;valid dimension value&lt;/dfn&gt; if it consists of
   a character in the range U+0031 DIGIT ONE (1) to U+0039 DIGIT NINE
@@ -4076,7 +4127,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=lists-of-integers&gt;&lt;span class=secno&gt;2.4.4.5 &lt;/span&gt;Lists of integers&lt;/h5&gt;
+  &lt;h5 id=lists-of-integers&gt;&lt;span class=secno&gt;2.5.4.5 &lt;/span&gt;Lists of integers&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=valid-list-of-integers&gt;valid list of integers&lt;/dfn&gt; is a number of &lt;a href=#valid-integer title=&quot;valid integer&quot;&gt;valid integers&lt;/a&gt; separated by U+002C
   COMMA characters, with no other characters (e.g. no &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt;). In addition, there
@@ -4347,7 +4398,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=lists-of-dimensions&gt;&lt;span class=secno&gt;2.4.4.6 &lt;/span&gt;Lists of dimensions&lt;/h5&gt;
+  &lt;h5 id=lists-of-dimensions&gt;&lt;span class=secno&gt;2.5.4.6 &lt;/span&gt;Lists of dimensions&lt;/h5&gt;
 
   &lt;!-- no definition of a type since no conforming feature uses this
   syntax (it's only used in cols=&quot;&quot; and rows=&quot;&quot; on &lt;frameset&gt; --&gt;
@@ -4451,7 +4502,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=dates-and-times&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Dates and times&lt;/h4&gt;
+  &lt;h4 id=dates-and-times&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;Dates and times&lt;/h4&gt;
 
   &lt;p&gt;In the algorithms below, the &lt;dfn id=number-of-days-in-month-month-of-year-year&gt;number of days in month &lt;var title=&quot;&quot;&gt;month&lt;/var&gt; of year &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;&lt;/dfn&gt; is:
   &lt;em&gt;31&lt;/em&gt; if &lt;var title=&quot;&quot;&gt;month&lt;/var&gt; is 1, 3, 5, 7, 8, 10, or
@@ -4478,7 +4529,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=months&gt;&lt;span class=secno&gt;2.4.5.1 &lt;/span&gt;Months&lt;/h5&gt;
+  &lt;h5 id=months&gt;&lt;span class=secno&gt;2.5.5.1 &lt;/span&gt;Months&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-month title=concept-month&gt;month&lt;/dfn&gt; consists of a specific
   proleptic Gregorian date with no time-zone information and no date
@@ -4550,7 +4601,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=dates&gt;&lt;span class=secno&gt;2.4.5.2 &lt;/span&gt;Dates&lt;/h5&gt;
+  &lt;h5 id=dates&gt;&lt;span class=secno&gt;2.5.5.2 &lt;/span&gt;Dates&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-date title=concept-date&gt;date&lt;/dfn&gt; consists of a specific
   proleptic Gregorian date with no time-zone information, consisting
@@ -4622,7 +4673,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=times&gt;&lt;span class=secno&gt;2.4.5.3 &lt;/span&gt;Times&lt;/h5&gt;
+  &lt;h5 id=times&gt;&lt;span class=secno&gt;2.5.5.3 &lt;/span&gt;Times&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-time title=concept-time&gt;time&lt;/dfn&gt; consists of a specific
   time with no time-zone information, consisting of an hour, a minute,
@@ -4759,7 +4810,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=local-dates-and-times&gt;&lt;span class=secno&gt;2.4.5.4 &lt;/span&gt;Local dates and times&lt;/h5&gt;
+  &lt;h5 id=local-dates-and-times&gt;&lt;span class=secno&gt;2.5.5.4 &lt;/span&gt;Local dates and times&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/dfn&gt;
   consists of a specific proleptic Gregorian date, consisting of a
@@ -4811,7 +4862,7 @@
 
 
 
-  &lt;h5 id=global-dates-and-times&gt;&lt;span class=secno&gt;2.4.5.5 &lt;/span&gt;Global dates and times&lt;/h5&gt;
+  &lt;h5 id=global-dates-and-times&gt;&lt;span class=secno&gt;2.5.5.5 &lt;/span&gt;Global dates and times&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-datetime title=concept-datetime&gt;global date and time&lt;/dfn&gt;
   consists of a specific proleptic Gregorian date, consisting of a
@@ -5027,7 +5078,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=weeks&gt;&lt;span class=secno&gt;2.4.5.6 &lt;/span&gt;Weeks&lt;/h5&gt;
+  &lt;h5 id=weeks&gt;&lt;span class=secno&gt;2.5.5.6 &lt;/span&gt;Weeks&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-week title=concept-week&gt;week&lt;/dfn&gt; consists of a week-year
   number and a week number representing a seven-day period starting on
@@ -5122,7 +5173,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.4.5.7 &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
+  &lt;h5 id=vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.5.5.7 &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-date-or-time-string&gt;valid date or time string&lt;/dfn&gt; if it is also
   one of the following:&lt;/p&gt;
@@ -5232,7 +5283,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=colors&gt;&lt;span class=secno&gt;2.4.6 &lt;/span&gt;Colors&lt;/h4&gt;
+  &lt;h4 id=colors&gt;&lt;span class=secno&gt;2.5.6 &lt;/span&gt;Colors&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=simple-color&gt;simple color&lt;/dfn&gt; consists of three 8-bit numbers in the
   range 0..255, representing the red, green, and blue components of
@@ -5436,7 +5487,7 @@
   &lt;!--2DCANVAS--&gt;
 
 
-  &lt;h4 id=space-separated-tokens&gt;&lt;span class=secno&gt;2.4.7 &lt;/span&gt;Space-separated tokens&lt;/h4&gt;
+  &lt;h4 id=space-separated-tokens&gt;&lt;span class=secno&gt;2.5.7 &lt;/span&gt;Space-separated tokens&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=set-of-space-separated-tokens&gt;set of space-separated tokens&lt;/dfn&gt; is a string containing
   zero or more words separated by one or more &lt;a href=#space-character title=&quot;space
@@ -5556,7 +5607,7 @@
 
 
 
-  &lt;h4 id=comma-separated-tokens&gt;&lt;span class=secno&gt;2.4.8 &lt;/span&gt;Comma-separated tokens&lt;/h4&gt;
+  &lt;h4 id=comma-separated-tokens&gt;&lt;span class=secno&gt;2.5.8 &lt;/span&gt;Comma-separated tokens&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=set-of-comma-separated-tokens&gt;set of comma-separated tokens&lt;/dfn&gt; is a string containing
   zero or more tokens each separated from the next by a single U+002C
@@ -5613,7 +5664,7 @@
 
 
 
-  &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;2.4.9 &lt;/span&gt;References&lt;/h4&gt;
+  &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;2.5.9 &lt;/span&gt;References&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=valid-hash-name-reference&gt;valid hash-name reference&lt;/dfn&gt; to an element of type &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; is a string consisting of a U+0023 NUMBER SIGN
   character (#) followed by a string which exactly matches the value
@@ -5652,7 +5703,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=mq&gt;&lt;span class=secno&gt;2.4.10 &lt;/span&gt;Media queries&lt;/h4&gt;
+  &lt;h4 id=mq&gt;&lt;span class=secno&gt;2.5.10 &lt;/span&gt;Media queries&lt;/h4&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid-media-query&gt;valid media query&lt;/dfn&gt; if it matches the
   &lt;code title=&quot;&quot;&gt;media_query_list&lt;/code&gt; production of the Media
@@ -5667,9 +5718,9 @@
 
 
 
-  &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;URLs&lt;/h3&gt;
+  &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;URLs&lt;/h3&gt;
 
-  &lt;h4 id=terminology-0&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Terminology&lt;/h4&gt;
+  &lt;h4 id=terminology-0&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Terminology&lt;/h4&gt;
 
   &lt;!-- see also: svn diff -r3244:3245 source --&gt;
 
@@ -5859,7 +5910,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/h4&gt;
+  &lt;h4 id=dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code title=attr-xml-base&gt;&lt;a href=#the-xml:base-attribute-(xml-only)&gt;xml:base&lt;/a&gt;&lt;/code&gt; attribute
   changes, the attribute's element, and all descendant elements, are
@@ -5932,7 +5983,7 @@
 
 
 
-  &lt;h4 id=interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/h4&gt;
+  &lt;h4 id=interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/h4&gt;
 
   &lt;p&gt;An interface that has a complement of &lt;dfn id=url-decomposition-idl-attributes&gt;URL decomposition IDL
   attributes&lt;/dfn&gt; will have seven attributes with the following
@@ -6133,7 +6184,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h3 id=fetching-resources&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Fetching resources&lt;/h3&gt;
+  &lt;h3 id=fetching-resources&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Fetching resources&lt;/h3&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=fetch&gt;fetch&lt;/dfn&gt; a resource or
   &lt;a href=#url&gt;URL&lt;/a&gt;, optionally from an origin &lt;i title=&quot;&quot;&gt;origin&lt;/i&gt;,
@@ -6346,7 +6397,7 @@
   applicable.&lt;/p&gt;
 
 
-  &lt;h4 id=concept-http-equivalent&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Protocol concepts&lt;/h4&gt;
+  &lt;h4 id=concept-http-equivalent&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Protocol concepts&lt;/h4&gt;
 
   &lt;p&gt;User agents can implement a variety of transfer protocols, but
   this specification mostly defines behavior in terms of HTTP. &lt;a href=#refsHTTP&gt;[HTTP]&lt;/a&gt;&lt;/p&gt;
@@ -6369,7 +6420,7 @@
   protocol.&lt;/p&gt;
 
 
-  &lt;h4 id=encrypted-http-and-related-security-concerns&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Encrypted HTTP and related security concerns&lt;/h4&gt;
+  &lt;h4 id=encrypted-http-and-related-security-concerns&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Encrypted HTTP and related security concerns&lt;/h4&gt;
 
   &lt;p&gt;Anything in this specification that refers to HTTP also applies
   to HTTP-over-TLS, as represented by &lt;a href=#url title=url&gt;URLs&lt;/a&gt;
@@ -6415,7 +6466,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=content-type-sniffing&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;Determining the type of a resource&lt;/h4&gt;
+  &lt;h4 id=content-type-sniffing&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;Determining the type of a resource&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=content-type title=Content-Type&gt;Content-Type metadata&lt;/dfn&gt; of a
   resource must be obtained and interpreted in a manner consistent
@@ -6490,9 +6541,9 @@
 
 
 
-  &lt;h3 id=common-dom-interfaces&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
+  &lt;h3 id=common-dom-interfaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
 
-  &lt;h4 id=reflecting-content-attributes-in-idl-attributes&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Reflecting content attributes in IDL attributes&lt;/h4&gt;
+  &lt;h4 id=reflecting-content-attributes-in-idl-attributes&gt;&lt;span class=secno&gt;2.8.1 &lt;/span&gt;Reflecting content attributes in IDL attributes&lt;/h4&gt;
 
   &lt;p&gt;Some IDL attributes are defined to &lt;dfn id=reflect&gt;reflect&lt;/dfn&gt; a
   particular content attribute. This means that on getting, the IDL
@@ -6694,7 +6745,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=collections-0&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Collections&lt;/h4&gt;
+  &lt;h4 id=collections-0&gt;&lt;span class=secno&gt;2.8.2 &lt;/span&gt;Collections&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlallcollection&gt;HTMLAllCollection&lt;/a&gt;&lt;/code&gt;,
   &lt;code&gt;&lt;a href=#htmlformcontrolscollection&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;,
@@ -6730,7 +6781,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=htmlcollection-0&gt;&lt;span class=secno&gt;2.7.2.1 &lt;/span&gt;HTMLCollection&lt;/h5&gt;
+  &lt;h5 id=htmlcollection-0&gt;&lt;span class=secno&gt;2.8.2.1 &lt;/span&gt;HTMLCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; interface represents a generic
   &lt;a href=#collections title=collections&gt;collection&lt;/a&gt; of elements.&lt;/p&gt;
@@ -6810,7 +6861,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=htmlallcollection-0&gt;&lt;span class=secno&gt;2.7.2.2 &lt;/span&gt;HTMLAllCollection&lt;/h5&gt;
+  &lt;h5 id=htmlallcollection-0&gt;&lt;span class=secno&gt;2.8.2.2 &lt;/span&gt;HTMLAllCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlallcollection&gt;HTMLAllCollection&lt;/a&gt;&lt;/code&gt; interface represents a generic
   &lt;a href=#collections title=collections&gt;collection&lt;/a&gt; of elements just like
@@ -6909,7 +6960,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=htmlformcontrolscollection-0&gt;&lt;span class=secno&gt;2.7.2.3 &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
+  &lt;h5 id=htmlformcontrolscollection-0&gt;&lt;span class=secno&gt;2.8.2.3 &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlformcontrolscollection&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt; interface represents
   a &lt;a href=#collections title=collections&gt;collection&lt;/a&gt; of &lt;a href=#category-listed title=category-listed&gt;listed elements&lt;/a&gt; in &lt;code&gt;&lt;a href=#the-form-element&gt;form&lt;/a&gt;&lt;/code&gt;
@@ -7026,7 +7077,7 @@
 --&gt;&lt;/div&gt;
 
 
-  &lt;h5 id=htmloptionscollection-0&gt;&lt;span class=secno&gt;2.7.2.4 &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
+  &lt;h5 id=htmloptionscollection-0&gt;&lt;span class=secno&gt;2.8.2.4 &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmloptionscollection&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; interface represents a
   list of &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements. It is always rooted on a
@@ -7205,7 +7256,7 @@
 &lt;!--MD--&gt;
   &lt;div data-component=&quot;HTML Microdata (editor: Ian Hickson)&quot;&gt;
 
-  &lt;h5 id=htmlpropertiescollection-0&gt;&lt;span class=secno&gt;2.7.2.5 &lt;/span&gt;HTMLPropertiesCollection&lt;/h5&gt;
+  &lt;h5 id=htmlpropertiescollection-0&gt;&lt;span class=secno&gt;2.8.2.5 &lt;/span&gt;HTMLPropertiesCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlpropertiescollection&gt;HTMLPropertiesCollection&lt;/a&gt;&lt;/code&gt; interface represents a
   &lt;a href=#collections title=collections&gt;collection&lt;/a&gt; of elements that add
@@ -7296,7 +7347,7 @@
 &lt;!--MD--&gt;
 
 
-  &lt;h4 id=domtokenlist-0&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
+  &lt;h4 id=domtokenlist-0&gt;&lt;span class=secno&gt;2.8.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#domtokenlist&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface represents an interface
   to an underlying string that consists of a &lt;a href=#set-of-space-separated-tokens&gt;set of
@@ -7482,7 +7533,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=domsettabletokenlist-0&gt;&lt;span class=secno&gt;2.7.4 &lt;/span&gt;DOMSettableTokenList&lt;/h4&gt;
+  &lt;h4 id=domsettabletokenlist-0&gt;&lt;span class=secno&gt;2.8.4 &lt;/span&gt;DOMSettableTokenList&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#domsettabletokenlist&gt;DOMSettableTokenList&lt;/a&gt;&lt;/code&gt; interface is the same as the
   &lt;code&gt;&lt;a href=#domtokenlist&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface, except that it allows the
@@ -7514,7 +7565,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.7.5 &lt;/span&gt;Safe passing of structured data&lt;/h4&gt;
+  &lt;h4 id=safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.8.5 &lt;/span&gt;Safe passing of structured data&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is required to obtain a &lt;dfn id=structured-clone&gt;structured
   clone&lt;/dfn&gt; of an object, it must run the following algorithm, which
@@ -7639,7 +7690,7 @@
   &lt;/dl&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=domstringmap-0&gt;&lt;span class=secno&gt;2.7.6 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
+  &lt;h4 id=domstringmap-0&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#domstringmap&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; interface represents a set of
   name-value pairs. It exposes these using the scripting language's
@@ -7722,7 +7773,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=dom-feature-strings&gt;&lt;span class=secno&gt;2.7.7 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
+  &lt;h4 id=dom-feature-strings&gt;&lt;span class=secno&gt;2.8.7 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
 
   &lt;p&gt;DOM3 Core defines mechanisms for checking for interface support,
   and for obtaining implementations of interfaces, using &lt;a href=<A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures">http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures</A>&gt;feature
@@ -7744,7 +7795,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=exceptions&gt;&lt;span class=secno&gt;2.7.8 &lt;/span&gt;Exceptions&lt;/h4&gt;
+  &lt;h4 id=exceptions&gt;&lt;span class=secno&gt;2.8.8 &lt;/span&gt;Exceptions&lt;/h4&gt;
 
   &lt;p&gt;The following are &lt;code&gt;&lt;a href=#domexception&gt;DOMException&lt;/a&gt;&lt;/code&gt; codes. &lt;a href=#refsDOMCORE&gt;[DOMCORE]&lt;/a&gt;&lt;/p&gt;
 
@@ -7792,7 +7843,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=garbage-collection&gt;&lt;span class=secno&gt;2.7.9 &lt;/span&gt;Garbage collection&lt;/h4&gt;
+  &lt;h4 id=garbage-collection&gt;&lt;span class=secno&gt;2.8.9 &lt;/span&gt;Garbage collection&lt;/h4&gt;
 
   &lt;p&gt;There is an &lt;dfn id=implied-strong-reference&gt;implied strong reference&lt;/dfn&gt; from any IDL
   attribute that returns a pre-existing object to that object.&lt;/p&gt;
@@ -7811,7 +7862,7 @@
   &lt;/div&gt;
 
 
-  &lt;h3 id=namespaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Namespaces&lt;/h3&gt;
+  &lt;h3 id=namespaces&gt;&lt;span class=secno&gt;2.9 &lt;/span&gt;Namespaces&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=html-namespace-0&gt;HTML namespace&lt;/dfn&gt; is: &lt;code&gt;<A HREF="http://www.w3.org/1999/xhtml&lt;/code">http://www.w3.org/1999/xhtml&lt;/code</A>&gt;&lt;/p&gt;
 
@@ -8104,9 +8155,8 @@
   &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the user agent must
   first &lt;a href=#obtain-the-storage-mutex&gt;obtain the storage mutex&lt;/a&gt; and then return the
   cookie-string for &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; for a
-  &quot;non-HTTP&quot; API, decoded as UTF-8, with bytes or sequences of bytes
-  that are not valid UTF-8 sequences interpreted as U+FFFD REPLACEMENT
-  CHARACTERs. &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt; &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+  &quot;non-HTTP&quot; API, &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error handling&lt;/a&gt;.
+  &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;On setting, if the document is a &lt;a href=#cookie-free-document-object&gt;cookie-free
   &lt;code&gt;Document&lt;/code&gt; object&lt;/a&gt;, then the user agent must do
@@ -28648,10 +28698,10 @@
   &lt;ul class=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#text/srt&gt;text/srt&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
   &lt;/ul&gt;&lt;!--&lt;p class=&quot;note&quot;&gt;Not all of these MIME types are valid registered
   types.&lt;/p&gt;--&gt;&lt;p&gt;When converting the bytes into Unicode characters, if the
-  encoding used is UTF-8, bytes or sequences of bytes that are not
-  valid UTF-8 sequences must be interpreted as a U+FFFD REPLACEMENT
-  CHARACTER, and all U+0000 NULL characters must be replaced by U+FFFD
-  REPLACEMENT CHARACTERs.&lt;/p&gt;
+  encoding used is UTF-8, the bytes must be &lt;a href=#decoded-as-utf-8,-with-error-handling title=&quot;decoded as
+  UTF-8, with error handling&quot;&gt;decoded with the error handling&lt;/a&gt;
+  defined in this specification, and all U+0000 NULL characters must
+  be replaced by U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=websrt-parser-algorithm&gt;WebSRT parser algorithm&lt;/dfn&gt; is as follows:&lt;/p&gt;
 
@@ -62689,13 +62739,13 @@
   &lt;p&gt;When a user agent is to &lt;dfn id=parse-a-manifest&gt;parse a manifest&lt;/dfn&gt;, it means
   that the user agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;The user agent must decode the byte stream corresponding with
-   the manifest to be parsed, treating it as UTF-8. Bytes or sequences
-   of bytes that are not valid UTF-8 sequences must be interpreted as
-   a U+FFFD REPLACEMENT CHARACTER. &lt;!--All U+0000 NULL characters must
-   be replaced by U+FFFD REPLACEMENT CHARACTERs. (this isn't black-box
-   testable since neither U+0000 nor U+FFFD are valid anywhere in the
-   syntax and thus both will be treated the same anyway)--&gt; &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;The user agent must decode the byte stream corresponding
+   with the manifest to be parsed &lt;a href=#decoded-as-utf-8,-with-error-handling title=&quot;decoded as UTF-8, with
+   error handling&quot;&gt;as UTF-8, with error handling&lt;/a&gt;. &lt;!--All
+   U+0000 NULL characters must be replaced by U+FFFD REPLACEMENT
+   CHARACTERs. (this isn't black-box testable since neither U+0000 nor
+   U+FFFD are valid anywhere in the syntax and thus both will be
+   treated the same anyway)--&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;a href=#absolute-url&gt;absolute
    URL&lt;/a&gt; representing the manifest.&lt;/li&gt;
@@ -72920,7 +72970,10 @@
 
   &lt;p&gt;Bytes or sequences of bytes in the original byte stream that
   could not be converted to Unicode code points must be converted to
-  U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
+  U+FFFD REPLACEMENT CHARACTERs. Specifically, if the encoding is
+  UTF-8, the bytes must be &lt;a href=#decoded-as-utf-8,-with-error-handling title=&quot;decoded as UTF-8, with error
+  handling&quot;&gt;decoded with the error handling&lt;/a&gt; defined in this
+  specification.&lt;/p&gt;
 
   &lt;p class=note&gt;Bytes or sequences of bytes in the original byte
   stream that did not conform to the encoding specification

Modified: source
===================================================================
--- source	2010-09-28 18:31:45 UTC (rev 5529)
+++ source	2010-09-28 19:16:16 UTC (rev 5530)
@@ -2496,6 +2496,61 @@
   two strings as matches of each other.&lt;/p&gt;
 
 
+  &lt;h3&gt;UTF-8&lt;/h3&gt;
+
+  &lt;p&gt;When a user agent is required to &lt;dfn title=&quot;decoded as UTF-8,
+  with error handling&quot;&gt;decode a byte string as UTF-8, with error
+  handling&lt;/dfn&gt;, it means that the byte stream must be converted to a
+  Unicode string by interpreting it as UTF-8, except that any errors
+  must be handled as described in the following list. Bytes in the
+  following list are represented in hexadecimal. &lt;a
+  href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;One byte in the range FE to FF&lt;/dt&gt;
+
+   &lt;dt&gt;Overlong forms (e.g. F0 80 80 A0)&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range C0 to C1, followed by one byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F0 to F4, followed by three bytes in the range 80 to BF that represent a code point above U+10FFFF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F5 to F7, followed by three bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F8 to FB, followed by four bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range FC to FD, followed by five bytes in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range E0 to FD, followed by a byte in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F0 to FD, followed by two bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range F5 to FD, followed by three bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range FC to FD, followed by four bytes in the range 80 to BF, not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+
+   &lt;dd&gt;The whole sequence must be replaced by a single U+FFFD
+   REPLACEMENT CHARACTER.&lt;/dd&gt;
+
+
+   &lt;dt&gt;One byte in the range 80 to BF not preceded by a byte in the range 80 to FD&lt;/dt&gt;
+
+   &lt;dt&gt;A sequence of bytes in the range 80 to BF that does not follow a byte in the range C0 to FD&lt;/dt&gt;
+
+   &lt;dt&gt;One byte in the range C0 to FD not followed by a byte in the range 80 to BF&lt;/dt&gt;
+
+
+   &lt;dd&gt;Each byte must be replace with a U+FFFD REPLACEMENT CHARACTER.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p class=&quot;example&quot;&gt;For example, the byte string &quot;41 98 BA 42 E2 98
+  43 E2 98 BA E2 98&quot; would be converted to the string
+  &quot;A&amp;#xFFFD;&amp;#xFFFD;B&amp;#xFFFD;C&amp;#x263A;&amp;#xFFFD;&quot;.&lt;/p&gt;
+
+
   &lt;h3&gt;Common microsyntaxes&lt;/h3&gt;
 
   &lt;p&gt;There are various places in HTML that accept particular data
@@ -8021,10 +8076,8 @@
   &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception. Otherwise, the user agent must
   first &lt;span&gt;obtain the storage mutex&lt;/span&gt; and then return the
   cookie-string for &lt;span&gt;the document's address&lt;/span&gt; for a
-  &quot;non-HTTP&quot; API, decoded as UTF-8, with bytes or sequences of bytes
-  that are not valid UTF-8 sequences interpreted as U+FFFD REPLACEMENT
-  CHARACTERs. &lt;a href=&quot;#refsCOOKIES&quot;&gt;[COOKIES]&lt;/a&gt; &lt;a
-  href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+  &quot;non-HTTP&quot; API, &lt;span&gt;decoded as UTF-8, with error handling&lt;/span&gt;.
+  &lt;a href=&quot;#refsCOOKIES&quot;&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;On setting, if the document is a &lt;span&gt;cookie-free
   &lt;code&gt;Document&lt;/code&gt; object&lt;/span&gt;, then the user agent must do
@@ -31255,10 +31308,10 @@
   types.&lt;/p&gt;--&gt;
 
   &lt;p&gt;When converting the bytes into Unicode characters, if the
-  encoding used is UTF-8, bytes or sequences of bytes that are not
-  valid UTF-8 sequences must be interpreted as a U+FFFD REPLACEMENT
-  CHARACTER, and all U+0000 NULL characters must be replaced by U+FFFD
-  REPLACEMENT CHARACTERs.&lt;/p&gt;
+  encoding used is UTF-8, the bytes must be &lt;span title=&quot;decoded as
+  UTF-8, with error handling&quot;&gt;decoded with the error handling&lt;/span&gt;
+  defined in this specification, and all U+0000 NULL characters must
+  be replaced by U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn&gt;WebSRT parser algorithm&lt;/dfn&gt; is as follows:&lt;/p&gt;
 
@@ -70902,13 +70955,13 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;The user agent must decode the byte stream corresponding with
-   the manifest to be parsed, treating it as UTF-8. Bytes or sequences
-   of bytes that are not valid UTF-8 sequences must be interpreted as
-   a U+FFFD REPLACEMENT CHARACTER. &lt;!--All U+0000 NULL characters must
-   be replaced by U+FFFD REPLACEMENT CHARACTERs. (this isn't black-box
-   testable since neither U+0000 nor U+FFFD are valid anywhere in the
-   syntax and thus both will be treated the same anyway)--&gt; &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;The user agent must decode the byte stream corresponding
+   with the manifest to be parsed &lt;span title=&quot;decoded as UTF-8, with
+   error handling&quot;&gt;as UTF-8, with error handling&lt;/span&gt;. &lt;!--All
+   U+0000 NULL characters must be replaced by U+FFFD REPLACEMENT
+   CHARACTERs. (this isn't black-box testable since neither U+0000 nor
+   U+FFFD are valid anywhere in the syntax and thus both will be
+   treated the same anyway)--&gt;&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;span&gt;absolute
    URL&lt;/span&gt; representing the manifest.&lt;/p&gt;&lt;/li&gt;
@@ -80690,9 +80743,13 @@
     title=&quot;event-error&quot;&gt;error&lt;/code&gt; at that object. Abort these
     steps.&lt;/p&gt;
 
-    &lt;p&gt;If the attempt succeeds, then convert the script resource to
-    Unicode by assuming it was encoded as UTF-8, to obtain its &lt;var
-    title=&quot;&quot;&gt;source&lt;/var&gt;. &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+    &lt;p&gt;If the attempt succeeds, then let &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; be
+    the script resource &lt;span&gt;decoded as UTF-8, with error
+    handling&lt;/span&gt;.
+    &lt;!--END complete--&gt;&lt;!--END epub--&gt;
+    &lt;a href=&quot;#refsHTML&quot;&gt;[HTML]&lt;/a&gt;
+    &lt;!--START complete--&gt;&lt;!--START epub--&gt;
+    &lt;/p&gt;
 
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; be JavaScript.&lt;/p&gt;
 
@@ -81563,9 +81620,13 @@
       &lt;code&gt;NETWORK_ERR&lt;/code&gt; exception and abort all these
       steps.&lt;/p&gt;
 
-      &lt;p&gt;If the attempt succeeds, then convert the script resource to
-      Unicode by assuming it was encoded as UTF-8, to obtain its &lt;var
-      title=&quot;&quot;&gt;source&lt;/var&gt;. &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;If the attempt succeeds, then let &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; be
+      the script resource &lt;span&gt;decoded as UTF-8, with error
+      handling&lt;/span&gt;.
+      &lt;!--END complete--&gt;&lt;!--END epub--&gt;
+      &lt;a href=&quot;#refsHTML&quot;&gt;[HTML]&lt;/a&gt;
+      &lt;!--START complete--&gt;&lt;!--START epub--&gt;
+      &lt;/p&gt;
 
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; be JavaScript.&lt;/p&gt;
 
@@ -82255,9 +82316,12 @@
 
   &lt;h4 id=&quot;event-stream-interpretation&quot;&gt;Interpreting an event stream&lt;/h4&gt;
 
-  &lt;p&gt;Streams must be decoded as UTF-8 text. Bytes or sequences of
-  bytes that are not valid UTF-8 sequences must be interpreted as the
-  U+FFFD REPLACEMENT CHARACTER. &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Streams must be &lt;span&gt;decoded as UTF-8, with error
+  handling&lt;/span&gt;.
+  &lt;!--END complete--&gt;&lt;!--END epub--&gt;
+  &lt;a href=&quot;#refsHTML&quot;&gt;[HTML]&lt;/a&gt;
+  &lt;!--START complete--&gt;&lt;!--START epub--&gt;
+  &lt;/p&gt;
 
   &lt;p&gt;One leading U+FEFF BYTE ORDER MARK character must be ignored if
   any are present.&lt;/p&gt;
@@ -87960,7 +88024,10 @@
 
   &lt;p&gt;Bytes or sequences of bytes in the original byte stream that
   could not be converted to Unicode code points must be converted to
-  U+FFFD REPLACEMENT CHARACTERs.&lt;/p&gt;
+  U+FFFD REPLACEMENT CHARACTERs. Specifically, if the encoding is
+  UTF-8, the bytes must be &lt;span title=&quot;decoded as UTF-8, with error
+  handling&quot;&gt;decoded with the error handling&lt;/span&gt; defined in this
+  specification.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Bytes or sequences of bytes in the original byte
   stream that did not conform to the encoding specification


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012397.html">[html5] r5529 - [e] (0) grammar Fixing	http://www.w3.org/Bugs/Public/show_bug.cgi?id=10616
</A></li>
	<LI>Next message: <A HREF="012399.html">[html5] r5531 - [e] (0) typo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12398">[ date ]</a>
              <a href="thread.html#12398">[ thread ]</a>
              <a href="subject.html#12398">[ subject ]</a>
              <a href="author.html#12398">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
