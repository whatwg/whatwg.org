<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r4475 - [e] (0) intro for channel messaging Fixing	http://www.w3.org/Bugs/Public/show_bu [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4475%20-%20%5Be%5D%20%280%29%20intro%20for%20channel%20messaging%20Fixing%0A%09http%3A//www.w3.org/Bugs/Public/show_bu%20%5B...%5D&In-Reply-To=%3C20100105072905.5FA721389D7%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011343.html">
   <LINK REL="Next"  HREF="011345.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r4475 - [e] (0) intro for channel messaging Fixing	http://www.w3.org/Bugs/Public/show_bu [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4475%20-%20%5Be%5D%20%280%29%20intro%20for%20channel%20messaging%20Fixing%0A%09http%3A//www.w3.org/Bugs/Public/show_bu%20%5B...%5D&In-Reply-To=%3C20100105072905.5FA721389D7%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r4475 - [e] (0) intro for channel messaging Fixing	http://www.w3.org/Bugs/Public/show_bu [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Jan  4 23:29:05 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="011343.html">[html5] r4474 - [e] (0) no need to mention sort order here,	it's sorted later. Fixing http://www [...]
</A></li>
        <LI>Next message: <A HREF="011345.html">[html5] r4476 - [e] (0) Make the spec require case-sensitive	matches where it doesn't really mat [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11344">[ date ]</a>
              <a href="thread.html#11344">[ thread ]</a>
              <a href="subject.html#11344">[ subject ]</a>
              <a href="author.html#11344">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-01-04 23:29:01 -0800 (Mon, 04 Jan 2010)
New Revision: 4475

Modified:
   complete.html
   index
   source
Log:
[e] (0) intro for channel messaging
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=8255">http://www.w3.org/Bugs/Public/show_bug.cgi?id=8255</A>

Modified: complete.html
===================================================================
--- complete.html	2010-01-05 06:44:19 UTC (rev 4474)
+++ complete.html	2010-01-05 07:29:01 UTC (rev 4475)
@@ -976,10 +976,11 @@
      &lt;li&gt;&lt;a href=#posting-messages-with-message-ports&gt;&lt;span class=secno&gt;10.4.4 &lt;/span&gt;Posting messages with message ports&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#channel-messaging&gt;&lt;span class=secno&gt;10.5 &lt;/span&gt;Channel messaging&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;10.5.1 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;10.5.2 &lt;/span&gt;Message ports&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#introduction-9&gt;&lt;span class=secno&gt;10.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;10.5.2 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;10.5.3 &lt;/span&gt;Message ports&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#ports-and-garbage-collection&gt;&lt;span class=secno&gt;10.5.2.1 &lt;/span&gt;Ports and garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#ports-and-garbage-collection&gt;&lt;span class=secno&gt;10.5.3.1 &lt;/span&gt;Ports and garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#syntax&gt;&lt;span class=secno&gt;11 &lt;/span&gt;The HTML syntax&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#writing&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Writing HTML documents&lt;/a&gt;
@@ -1135,10 +1136,10 @@
    &lt;li&gt;&lt;a href=#parsing-xhtml-fragments&gt;&lt;span class=secno&gt;12.4 &lt;/span&gt;Parsing XHTML fragments&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#rendering&gt;&lt;span class=secno&gt;13 &lt;/span&gt;Rendering&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#introduction-9&gt;&lt;span class=secno&gt;13.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#introduction-10&gt;&lt;span class=secno&gt;13.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;13.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-10&gt;&lt;span class=secno&gt;13.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-11&gt;&lt;span class=secno&gt;13.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#display-types&gt;&lt;span class=secno&gt;13.2.2 &lt;/span&gt;Display types&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#margins-and-padding&gt;&lt;span class=secno&gt;13.2.3 &lt;/span&gt;Margins and padding&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#alignment&gt;&lt;span class=secno&gt;13.2.4 &lt;/span&gt;Alignment&lt;/a&gt;&lt;/li&gt;
@@ -1156,7 +1157,7 @@
      &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;13.3.5 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#bindings&gt;&lt;span class=secno&gt;13.4 &lt;/span&gt;Bindings&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-11&gt;&lt;span class=secno&gt;13.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-12&gt;&lt;span class=secno&gt;13.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-button-element-0&gt;&lt;span class=secno&gt;13.4.2 &lt;/span&gt;The &lt;code&gt;button&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-details-element-0&gt;&lt;span class=secno&gt;13.4.3 &lt;/span&gt;The &lt;code&gt;details&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-input-element-as-a-text-entry-widget&gt;&lt;span class=secno&gt;13.4.4 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a text entry widget&lt;/a&gt;&lt;/li&gt;
@@ -67577,8 +67578,45 @@
 
   &lt;h3 id=channel-messaging&gt;&lt;span class=secno&gt;10.5 &lt;/span&gt;&lt;dfn&gt;Channel messaging&lt;/dfn&gt;&lt;/h3&gt;
 
-  &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;10.5.1 &lt;/span&gt;Message channels&lt;/h4&gt;
+  &lt;h4 id=introduction-9&gt;&lt;span class=secno&gt;10.5.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;To enable independent pieces of code (e.g. running in different
+  &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;) to
+  communicate directly, authors can use &lt;a href=#channel-messaging&gt;channel
+  messaging&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Communication channels in this mechanisms are implemented as
+  two-ways pipes, with a port at each end. Messages sent in one port
+  are delivered at the other port, and vice-versa. Messages are
+  asynchronous, and delivered as DOM events.&lt;/p&gt;
+
+  &lt;p&gt;To create a connection (two &quot;entangled&quot; ports), the &lt;code title=&quot;&quot;&gt;MessageChannel()&lt;/code&gt; constructor is called:&lt;/p&gt;
+
+  &lt;pre&gt;var channel = new MessageChannel();&lt;/pre&gt;
+
+  &lt;p&gt;One of the ports is kept as the local port, and the other port is
+  sent to the remote code, e.g. using &lt;code title=dom-window-postMessage-3&gt;&lt;a href=#dom-window-postmessage-3&gt;postMessage()&lt;/a&gt;&lt;/code&gt;:&lt;/p&gt;
+
+  &lt;pre&gt;otherWindow.postMessage('hello', [channel.port2], '<A HREF="http://example.com">http://example.com</A>');&lt;/pre&gt;
+
+  &lt;p&gt;To send messages, the &lt;code title=dom-MessagpePort-postMessage&gt;postMessage()&lt;/code&gt; method on
+  the port is used:&lt;/p&gt;
+
+  &lt;pre&gt;channel.port1.postMessage('hello');&lt;/pre&gt;
+
+  &lt;p&gt;To receive messages, one listens to &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events:&lt;/p&gt;
+
+  &lt;pre&gt;channel.port1.onmessage = handleMessage;
+function handleMessage(event) {
+  // message is in event.data
+  // ...
+}&lt;/pre&gt;
+
+
+  &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;10.5.2 &lt;/span&gt;Message channels&lt;/h4&gt;
+
   &lt;pre class=idl&gt;[&lt;a href=#dom-messagechannel title=dom-MessageChannel&gt;Constructor&lt;/a&gt;]
 interface &lt;dfn id=messagechannel&gt;MessageChannel&lt;/dfn&gt; {
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-channel-port1 title=dom-channel-port1&gt;port1&lt;/a&gt;;
@@ -67646,7 +67684,7 @@
 
 
 
-  &lt;h4 id=message-ports&gt;&lt;span class=secno&gt;10.5.2 &lt;/span&gt;Message ports&lt;/h4&gt;
+  &lt;h4 id=message-ports&gt;&lt;span class=secno&gt;10.5.3 &lt;/span&gt;Message ports&lt;/h4&gt;
 
   &lt;p&gt;Each channel has two message ports. Data sent through one port is
   received by the other port, and vice versa.&lt;/p&gt;
@@ -67933,7 +67971,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=ports-and-garbage-collection&gt;&lt;span class=secno&gt;10.5.2.1 &lt;/span&gt;Ports and garbage collection&lt;/h5&gt;
+  &lt;h5 id=ports-and-garbage-collection&gt;&lt;span class=secno&gt;10.5.3.1 &lt;/span&gt;Ports and garbage collection&lt;/h5&gt;
 
   &lt;div class=impl&gt;
 
@@ -79023,7 +79061,7 @@
   lead to this experience.&lt;/i&gt;&lt;/p&gt;
 
 
-  &lt;h3 id=introduction-9&gt;&lt;span class=secno&gt;13.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+  &lt;h3 id=introduction-10&gt;&lt;span class=secno&gt;13.1 &lt;/span&gt;Introduction&lt;/h3&gt;
 
   &lt;p&gt;In general, user agents are expected to support CSS, and many of
   the suggestions in this section are expressed in CSS terms. User
@@ -79061,7 +79099,7 @@
 
   &lt;h3 id=the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;13.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/h3&gt;
 
-  &lt;h4 id=introduction-10&gt;&lt;span class=secno&gt;13.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-11&gt;&lt;span class=secno&gt;13.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;The CSS rules given in these subsections are, except where
   otherwise specified, expected to be used as part of the user-agent
@@ -80272,7 +80310,7 @@
 
   &lt;h3 id=bindings&gt;&lt;span class=secno&gt;13.4 &lt;/span&gt;Bindings&lt;/h3&gt;
 
-  &lt;h4 id=introduction-11&gt;&lt;span class=secno&gt;13.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-12&gt;&lt;span class=secno&gt;13.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;A number of elements have their rendering defined in terms of the
   'binding' property. &lt;a href=#refsBECSS&gt;[BECSS]&lt;/a&gt;&lt;/p&gt;

Modified: index
===================================================================
--- index	2010-01-05 06:44:19 UTC (rev 4474)
+++ index	2010-01-05 07:29:01 UTC (rev 4475)
@@ -830,10 +830,11 @@
      &lt;li&gt;&lt;a href=#posting-messages-with-message-ports&gt;&lt;span class=secno&gt;8.2.4 &lt;/span&gt;Posting messages with message ports&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#channel-messaging&gt;&lt;span class=secno&gt;8.3 &lt;/span&gt;Channel messaging&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;8.3.1 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;8.3.2 &lt;/span&gt;Message ports&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#introduction-6&gt;&lt;span class=secno&gt;8.3.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;8.3.2 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;8.3.3 &lt;/span&gt;Message ports&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#ports-and-garbage-collection&gt;&lt;span class=secno&gt;8.3.2.1 &lt;/span&gt;Ports and garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#ports-and-garbage-collection&gt;&lt;span class=secno&gt;8.3.3.1 &lt;/span&gt;Ports and garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#syntax&gt;&lt;span class=secno&gt;9 &lt;/span&gt;The HTML syntax&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#writing&gt;&lt;span class=secno&gt;9.1 &lt;/span&gt;Writing HTML documents&lt;/a&gt;
@@ -989,10 +990,10 @@
    &lt;li&gt;&lt;a href=#parsing-xhtml-fragments&gt;&lt;span class=secno&gt;10.4 &lt;/span&gt;Parsing XHTML fragments&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#rendering&gt;&lt;span class=secno&gt;11 &lt;/span&gt;Rendering&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#introduction-6&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#introduction-7&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-7&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-8&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#display-types&gt;&lt;span class=secno&gt;11.2.2 &lt;/span&gt;Display types&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#margins-and-padding&gt;&lt;span class=secno&gt;11.2.3 &lt;/span&gt;Margins and padding&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#alignment&gt;&lt;span class=secno&gt;11.2.4 &lt;/span&gt;Alignment&lt;/a&gt;&lt;/li&gt;
@@ -1010,7 +1011,7 @@
      &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;11.3.5 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#bindings&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Bindings&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-8&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-9&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-button-element-0&gt;&lt;span class=secno&gt;11.4.2 &lt;/span&gt;The &lt;code&gt;button&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-details-element-0&gt;&lt;span class=secno&gt;11.4.3 &lt;/span&gt;The &lt;code&gt;details&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-input-element-as-a-text-entry-widget&gt;&lt;span class=secno&gt;11.4.4 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a text entry widget&lt;/a&gt;&lt;/li&gt;
@@ -59204,8 +59205,45 @@
 
   &lt;h3 id=channel-messaging&gt;&lt;span class=secno&gt;8.3 &lt;/span&gt;&lt;dfn&gt;Channel messaging&lt;/dfn&gt;&lt;/h3&gt;
 
-  &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;8.3.1 &lt;/span&gt;Message channels&lt;/h4&gt;
+  &lt;h4 id=introduction-6&gt;&lt;span class=secno&gt;8.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;To enable independent pieces of code (e.g. running in different
+  &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;) to
+  communicate directly, authors can use &lt;a href=#channel-messaging&gt;channel
+  messaging&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Communication channels in this mechanisms are implemented as
+  two-ways pipes, with a port at each end. Messages sent in one port
+  are delivered at the other port, and vice-versa. Messages are
+  asynchronous, and delivered as DOM events.&lt;/p&gt;
+
+  &lt;p&gt;To create a connection (two &quot;entangled&quot; ports), the &lt;code title=&quot;&quot;&gt;MessageChannel()&lt;/code&gt; constructor is called:&lt;/p&gt;
+
+  &lt;pre&gt;var channel = new MessageChannel();&lt;/pre&gt;
+
+  &lt;p&gt;One of the ports is kept as the local port, and the other port is
+  sent to the remote code, e.g. using &lt;code title=dom-window-postMessage-3&gt;&lt;a href=#dom-window-postmessage-3&gt;postMessage()&lt;/a&gt;&lt;/code&gt;:&lt;/p&gt;
+
+  &lt;pre&gt;otherWindow.postMessage('hello', [channel.port2], '<A HREF="http://example.com">http://example.com</A>');&lt;/pre&gt;
+
+  &lt;p&gt;To send messages, the &lt;code title=dom-MessagpePort-postMessage&gt;postMessage()&lt;/code&gt; method on
+  the port is used:&lt;/p&gt;
+
+  &lt;pre&gt;channel.port1.postMessage('hello');&lt;/pre&gt;
+
+  &lt;p&gt;To receive messages, one listens to &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events:&lt;/p&gt;
+
+  &lt;pre&gt;channel.port1.onmessage = handleMessage;
+function handleMessage(event) {
+  // message is in event.data
+  // ...
+}&lt;/pre&gt;
+
+
+  &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;8.3.2 &lt;/span&gt;Message channels&lt;/h4&gt;
+
   &lt;pre class=idl&gt;[&lt;a href=#dom-messagechannel title=dom-MessageChannel&gt;Constructor&lt;/a&gt;]
 interface &lt;dfn id=messagechannel&gt;MessageChannel&lt;/dfn&gt; {
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-channel-port1 title=dom-channel-port1&gt;port1&lt;/a&gt;;
@@ -59273,7 +59311,7 @@
 
 
 
-  &lt;h4 id=message-ports&gt;&lt;span class=secno&gt;8.3.2 &lt;/span&gt;Message ports&lt;/h4&gt;
+  &lt;h4 id=message-ports&gt;&lt;span class=secno&gt;8.3.3 &lt;/span&gt;Message ports&lt;/h4&gt;
 
   &lt;p&gt;Each channel has two message ports. Data sent through one port is
   received by the other port, and vice versa.&lt;/p&gt;
@@ -59560,7 +59598,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=ports-and-garbage-collection&gt;&lt;span class=secno&gt;8.3.2.1 &lt;/span&gt;Ports and garbage collection&lt;/h5&gt;
+  &lt;h5 id=ports-and-garbage-collection&gt;&lt;span class=secno&gt;8.3.3.1 &lt;/span&gt;Ports and garbage collection&lt;/h5&gt;
 
   &lt;div class=impl&gt;
 
@@ -70650,7 +70688,7 @@
   lead to this experience.&lt;/i&gt;&lt;/p&gt;
 
 
-  &lt;h3 id=introduction-6&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+  &lt;h3 id=introduction-7&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Introduction&lt;/h3&gt;
 
   &lt;p&gt;In general, user agents are expected to support CSS, and many of
   the suggestions in this section are expressed in CSS terms. User
@@ -70688,7 +70726,7 @@
 
   &lt;h3 id=the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/h3&gt;
 
-  &lt;h4 id=introduction-7&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-8&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;The CSS rules given in these subsections are, except where
   otherwise specified, expected to be used as part of the user-agent
@@ -71899,7 +71937,7 @@
 
   &lt;h3 id=bindings&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Bindings&lt;/h3&gt;
 
-  &lt;h4 id=introduction-8&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-9&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;A number of elements have their rendering defined in terms of the
   'binding' property. &lt;a href=#refsBECSS&gt;[BECSS]&lt;/a&gt;&lt;/p&gt;

Modified: source
===================================================================
--- source	2010-01-05 06:44:19 UTC (rev 4474)
+++ source	2010-01-05 07:29:01 UTC (rev 4475)
@@ -77079,6 +77079,47 @@
 
   &lt;h3&gt;&lt;dfn&gt;Channel messaging&lt;/dfn&gt;&lt;/h3&gt;
 
+  &lt;h4&gt;Introduction&lt;/h4&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;To enable independent pieces of code (e.g. running in different
+  &lt;span title=&quot;browsing context&quot;&gt;browsing contexts&lt;/span&gt;) to
+  communicate directly, authors can use &lt;span&gt;channel
+  messaging&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Communication channels in this mechanisms are implemented as
+  two-ways pipes, with a port at each end. Messages sent in one port
+  are delivered at the other port, and vice-versa. Messages are
+  asynchronous, and delivered as DOM events.&lt;/p&gt;
+
+  &lt;p&gt;To create a connection (two &quot;entangled&quot; ports), the &lt;code
+  title=&quot;&quot;&gt;MessageChannel()&lt;/code&gt; constructor is called:&lt;/p&gt;
+
+  &lt;pre&gt;var channel = new MessageChannel();&lt;/pre&gt;
+
+  &lt;p&gt;One of the ports is kept as the local port, and the other port is
+  sent to the remote code, e.g. using &lt;code
+  title=&quot;dom-window-postMessage-3&quot;&gt;postMessage()&lt;/code&gt;:&lt;/p&gt;
+
+  &lt;pre&gt;otherWindow.postMessage('hello', [channel.port2], '<A HREF="http://example.com">http://example.com</A>');&lt;/pre&gt;
+
+  &lt;p&gt;To send messages, the &lt;code
+  title=&quot;dom-MessagpePort-postMessage&quot;&gt;postMessage()&lt;/code&gt; method on
+  the port is used:&lt;/p&gt;
+
+  &lt;pre&gt;channel.port1.postMessage('hello');&lt;/pre&gt;
+
+  &lt;p&gt;To receive messages, one listens to &lt;code
+  title=&quot;event-message&quot;&gt;message&lt;/code&gt; events:&lt;/p&gt;
+
+  &lt;pre&gt;channel.port1.onmessage = handleMessage;
+function handleMessage(event) {
+  // message is in event.data
+  // ...
+}&lt;/pre&gt;
+
+
   &lt;h4&gt;Message channels&lt;/h4&gt;
 
   &lt;pre class=&quot;idl&quot;&gt;[&lt;span title=&quot;dom-MessageChannel&quot;&gt;Constructor&lt;/span&gt;]


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011343.html">[html5] r4474 - [e] (0) no need to mention sort order here,	it's sorted later. Fixing http://www [...]
</A></li>
	<LI>Next message: <A HREF="011345.html">[html5] r4476 - [e] (0) Make the spec require case-sensitive	matches where it doesn't really mat [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11344">[ date ]</a>
              <a href="thread.html#11344">[ thread ]</a>
              <a href="subject.html#11344">[ subject ]</a>
              <a href="author.html#11344">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
