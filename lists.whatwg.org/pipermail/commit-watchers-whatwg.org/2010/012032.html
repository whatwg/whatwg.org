<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r5162 - [giow] (2) Change the 'end tag' processing to not	imply its own end tag, since t [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5162%20-%20%5Bgiow%5D%20%282%29%20Change%20the%20%27end%20tag%27%20processing%20to%20not%0A%09imply%20its%20own%20end%20tag%2C%20since%20t%20%5B...%5D&In-Reply-To=%3C20100714191439.B92181C8C003%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012031.html">
   <LINK REL="Next"  HREF="012033.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r5162 - [giow] (2) Change the 'end tag' processing to not	imply its own end tag, since t [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5162%20-%20%5Bgiow%5D%20%282%29%20Change%20the%20%27end%20tag%27%20processing%20to%20not%0A%09imply%20its%20own%20end%20tag%2C%20since%20t%20%5B...%5D&In-Reply-To=%3C20100714191439.B92181C8C003%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r5162 - [giow] (2) Change the 'end tag' processing to not	imply its own end tag, since t [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Jul 14 12:14:39 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="012031.html">[html5] r5161 - [e] (0) Some parser clarifications. Fixing	http://www.w3.org/Bugs/Public/show_bu [...]
</A></li>
        <LI>Next message: <A HREF="012033.html">[html5] r5163 - [e] (0) Tweak the steps to reduce the likelihood of	bugs implementing the AAA. F [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12032">[ date ]</a>
              <a href="thread.html#12032">[ thread ]</a>
              <a href="subject.html#12032">[ subject ]</a>
              <a href="author.html#12032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-07-14 12:14:38 -0700 (Wed, 14 Jul 2010)
New Revision: 5162

Modified:
   complete.html
   index
   source
Log:
[giow] (2) Change the 'end tag' processing to not imply its own end tag, since that makes no sense. (Only affects parsing of rp and rt elements.) Also clean up the way categories are references to avoid too many negatives, and put option and optgroup in the 'special' category (should have no effect in practice). And make a loop use a label rather than jumping to a numbered step.
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=10080">http://www.w3.org/Bugs/Public/show_bug.cgi?id=10080</A>

Modified: complete.html
===================================================================
--- complete.html	2010-07-14 19:04:44 UTC (rev 5161)
+++ complete.html	2010-07-14 19:14:38 UTC (rev 5162)
@@ -78208,14 +78208,14 @@
    &lt;code&gt;&lt;a href=#the-marquee-element&gt;marquee&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#menus&gt;menu&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#meta&gt;meta&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-nav-element&gt;nav&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#noembed&gt;noembed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#noframes&gt;noframes&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-noscript-element&gt;noscript&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#plaintext&gt;plaintext&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-pre-element&gt;pre&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-section-element&gt;section&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-style-element&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-title-element-0&gt;title&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#xmp&gt;xmp&lt;/a&gt;&lt;/code&gt;, and SVG's
-   &lt;code&gt;foreignObject&lt;/code&gt;.&lt;/dd&gt;
+   &lt;code&gt;&lt;a href=#the-optgroup-element&gt;optgroup&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#plaintext&gt;plaintext&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-pre-element&gt;pre&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-section-element&gt;section&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-style-element&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-title-element-0&gt;title&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#xmp&gt;xmp&lt;/a&gt;&lt;/code&gt;, and SVG's &lt;code&gt;foreignObject&lt;/code&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn id=formatting&gt;Formatting&lt;/dfn&gt;&lt;/dt&gt;
    &lt;dd&gt;&lt;p&gt;The following HTML elements are those that end up in the
@@ -81761,12 +81761,10 @@
      &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element, then act as if an end tag with the tag
      name &quot;li&quot; had been seen, then jump to the last step.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not in the
-     &lt;a href=#formatting&gt;formatting&lt;/a&gt; category, and is not in the
-     &lt;a href=#ordinary&gt;ordinary&lt;/a&gt; category, and is not an
-     &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;
-     element, then jump to the last step.&lt;/li&gt; &lt;!-- an element
-     &lt;foo&gt; is in this list if the following markup:
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the &lt;a href=#special&gt;special&lt;/a&gt;
+     category, but is not an &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;,
+     or &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt; element, then jump to the last step.&lt;/li&gt;
+     &lt;!-- an element &lt;foo&gt; is in this list if the following markup:
 
          &lt;!DOCTYPE html&gt;&lt;body&gt;&lt;ol&gt;&lt;li&gt;&lt;foo&gt;&lt;li&gt;
 
@@ -81810,12 +81808,10 @@
      tag with the same tag name as &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; had been
      seen, then jump to the last step.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not in the
-     &lt;a href=#formatting&gt;formatting&lt;/a&gt; category, and is not in the
-     &lt;a href=#ordinary&gt;ordinary&lt;/a&gt; category, and is not an
-     &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;
-     element, then jump to the last step.&lt;/li&gt; &lt;!-- an element
-     &lt;foo&gt; is in this list if the following markup:
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the &lt;a href=#special&gt;special&lt;/a&gt;
+     category, but is not an &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;,
+     or &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt; element, then jump to the last step.&lt;/li&gt;
+     &lt;!-- an element &lt;foo&gt; is in this list if the following markup:
 
          &lt;!DOCTYPE html&gt;&lt;body&gt;&lt;dl&gt;&lt;dt&gt;&lt;foo&gt;&lt;dt&gt;
 
@@ -82152,12 +82148,11 @@
 
      &lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt; be the
-     topmost node in the &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt; that
-     is lower in the stack than the &lt;var title=&quot;&quot;&gt;formatting
-     element&lt;/var&gt;, and is not an element in the
-     &lt;a href=#ordinary&gt;ordinary&lt;/a&gt; or &lt;a href=#formatting&gt;formatting&lt;/a&gt;
-     categories. There might not be one.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt; be the topmost
+     node in the &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt; that is lower in
+     the stack than the &lt;var title=&quot;&quot;&gt;formatting element&lt;/var&gt;, and is
+     an element in the &lt;a href=#special&gt;special&lt;/a&gt; category. There might not
+     be one.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt;,
      then the UA must skip the subsequent steps and instead just
@@ -82694,10 +82689,11 @@
     &lt;ol&gt;&lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a href=#current-node&gt;current
      node&lt;/a&gt; (the bottommost node of the stack).&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has the same tag name as
-     the token, then:&lt;/p&gt;
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has the same tag
+     name as the token, then:&lt;/p&gt;
 
-      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#generate-implied-end-tags&gt;Generate implied end tags&lt;/a&gt;.&lt;/li&gt;
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#generate-implied-end-tags&gt;Generate implied end tags&lt;/a&gt;, except
+       for elements with the same tag name as the token.&lt;/li&gt;
 
        &lt;li&gt;&lt;p&gt;If the tag name of the end tag token does not match
        the tag name of the &lt;a href=#current-node&gt;current node&lt;/a&gt;, this is a
@@ -82708,15 +82704,14 @@
 
       &lt;/ol&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in neither the
-     &lt;a href=#formatting&gt;formatting&lt;/a&gt; category nor the &lt;a href=#ordinary&gt;ordinary&lt;/a&gt;
-     category, then this is a &lt;a href=#parse-error&gt;parse error&lt;/a&gt;; ignore the
-     token, and abort these steps.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the
+     &lt;a href=#special&gt;special&lt;/a&gt; category, then this is a &lt;a href=#parse-error&gt;parse
+     error&lt;/a&gt;; ignore the token, and abort these steps.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
      &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Return to step 2.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Return to the step labeld &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
 
     &lt;/ol&gt;&lt;/dd&gt;
 

Modified: index
===================================================================
--- index	2010-07-14 19:04:44 UTC (rev 5161)
+++ index	2010-07-14 19:14:38 UTC (rev 5162)
@@ -71449,14 +71449,14 @@
    &lt;code&gt;&lt;a href=#the-marquee-element&gt;marquee&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#menus&gt;menu&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#meta&gt;meta&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-nav-element&gt;nav&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#noembed&gt;noembed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#noframes&gt;noframes&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-noscript-element&gt;noscript&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#plaintext&gt;plaintext&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-pre-element&gt;pre&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-section-element&gt;section&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-style-element&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-title-element-0&gt;title&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#xmp&gt;xmp&lt;/a&gt;&lt;/code&gt;, and SVG's
-   &lt;code&gt;foreignObject&lt;/code&gt;.&lt;/dd&gt;
+   &lt;code&gt;&lt;a href=#the-optgroup-element&gt;optgroup&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#plaintext&gt;plaintext&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-pre-element&gt;pre&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-section-element&gt;section&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-style-element&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-title-element-0&gt;title&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#xmp&gt;xmp&lt;/a&gt;&lt;/code&gt;, and SVG's &lt;code&gt;foreignObject&lt;/code&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn id=formatting&gt;Formatting&lt;/dfn&gt;&lt;/dt&gt;
    &lt;dd&gt;&lt;p&gt;The following HTML elements are those that end up in the
@@ -75002,12 +75002,10 @@
      &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element, then act as if an end tag with the tag
      name &quot;li&quot; had been seen, then jump to the last step.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not in the
-     &lt;a href=#formatting&gt;formatting&lt;/a&gt; category, and is not in the
-     &lt;a href=#ordinary&gt;ordinary&lt;/a&gt; category, and is not an
-     &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;
-     element, then jump to the last step.&lt;/li&gt; &lt;!-- an element
-     &lt;foo&gt; is in this list if the following markup:
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the &lt;a href=#special&gt;special&lt;/a&gt;
+     category, but is not an &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;,
+     or &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt; element, then jump to the last step.&lt;/li&gt;
+     &lt;!-- an element &lt;foo&gt; is in this list if the following markup:
 
          &lt;!DOCTYPE html&gt;&lt;body&gt;&lt;ol&gt;&lt;li&gt;&lt;foo&gt;&lt;li&gt;
 
@@ -75051,12 +75049,10 @@
      tag with the same tag name as &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; had been
      seen, then jump to the last step.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not in the
-     &lt;a href=#formatting&gt;formatting&lt;/a&gt; category, and is not in the
-     &lt;a href=#ordinary&gt;ordinary&lt;/a&gt; category, and is not an
-     &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt;
-     element, then jump to the last step.&lt;/li&gt; &lt;!-- an element
-     &lt;foo&gt; is in this list if the following markup:
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the &lt;a href=#special&gt;special&lt;/a&gt;
+     category, but is not an &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;,
+     or &lt;code&gt;&lt;a href=#the-p-element&gt;p&lt;/a&gt;&lt;/code&gt; element, then jump to the last step.&lt;/li&gt;
+     &lt;!-- an element &lt;foo&gt; is in this list if the following markup:
 
          &lt;!DOCTYPE html&gt;&lt;body&gt;&lt;dl&gt;&lt;dt&gt;&lt;foo&gt;&lt;dt&gt;
 
@@ -75393,12 +75389,11 @@
 
      &lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt; be the
-     topmost node in the &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt; that
-     is lower in the stack than the &lt;var title=&quot;&quot;&gt;formatting
-     element&lt;/var&gt;, and is not an element in the
-     &lt;a href=#ordinary&gt;ordinary&lt;/a&gt; or &lt;a href=#formatting&gt;formatting&lt;/a&gt;
-     categories. There might not be one.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt; be the topmost
+     node in the &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt; that is lower in
+     the stack than the &lt;var title=&quot;&quot;&gt;formatting element&lt;/var&gt;, and is
+     an element in the &lt;a href=#special&gt;special&lt;/a&gt; category. There might not
+     be one.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt;,
      then the UA must skip the subsequent steps and instead just
@@ -75935,10 +75930,11 @@
     &lt;ol&gt;&lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a href=#current-node&gt;current
      node&lt;/a&gt; (the bottommost node of the stack).&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has the same tag name as
-     the token, then:&lt;/p&gt;
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has the same tag
+     name as the token, then:&lt;/p&gt;
 
-      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#generate-implied-end-tags&gt;Generate implied end tags&lt;/a&gt;.&lt;/li&gt;
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#generate-implied-end-tags&gt;Generate implied end tags&lt;/a&gt;, except
+       for elements with the same tag name as the token.&lt;/li&gt;
 
        &lt;li&gt;&lt;p&gt;If the tag name of the end tag token does not match
        the tag name of the &lt;a href=#current-node&gt;current node&lt;/a&gt;, this is a
@@ -75949,15 +75945,14 @@
 
       &lt;/ol&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in neither the
-     &lt;a href=#formatting&gt;formatting&lt;/a&gt; category nor the &lt;a href=#ordinary&gt;ordinary&lt;/a&gt;
-     category, then this is a &lt;a href=#parse-error&gt;parse error&lt;/a&gt;; ignore the
-     token, and abort these steps.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the
+     &lt;a href=#special&gt;special&lt;/a&gt; category, then this is a &lt;a href=#parse-error&gt;parse
+     error&lt;/a&gt;; ignore the token, and abort these steps.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
      &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Return to step 2.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Return to the step labeld &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
 
     &lt;/ol&gt;&lt;/dd&gt;
 

Modified: source
===================================================================
--- source	2010-07-14 19:04:44 UTC (rev 5161)
+++ source	2010-07-14 19:14:38 UTC (rev 5162)
@@ -89308,14 +89308,14 @@
    &lt;code&gt;marquee&lt;/code&gt;, &lt;code&gt;menu&lt;/code&gt;, &lt;code&gt;meta&lt;/code&gt;,
    &lt;code&gt;nav&lt;/code&gt;, &lt;code&gt;noembed&lt;/code&gt;, &lt;code&gt;noframes&lt;/code&gt;,
    &lt;code&gt;noscript&lt;/code&gt;, &lt;code&gt;object&lt;/code&gt;, &lt;code&gt;ol&lt;/code&gt;,
-   &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;param&lt;/code&gt;, &lt;code&gt;plaintext&lt;/code&gt;,
-   &lt;code&gt;pre&lt;/code&gt;, &lt;code&gt;script&lt;/code&gt;, &lt;code&gt;section&lt;/code&gt;,
-   &lt;code&gt;select&lt;/code&gt;, &lt;code&gt;style&lt;/code&gt;, &lt;code&gt;table&lt;/code&gt;,
-   &lt;code&gt;tbody&lt;/code&gt;, &lt;code&gt;td&lt;/code&gt;, &lt;code&gt;textarea&lt;/code&gt;,
-   &lt;code&gt;tfoot&lt;/code&gt;, &lt;code&gt;th&lt;/code&gt;, &lt;code&gt;thead&lt;/code&gt;,
-   &lt;code&gt;title&lt;/code&gt;, &lt;code&gt;tr&lt;/code&gt;, &lt;code&gt;ul&lt;/code&gt;,
-   &lt;code&gt;wbr&lt;/code&gt;, &lt;code&gt;xmp&lt;/code&gt;, and SVG's
-   &lt;code&gt;foreignObject&lt;/code&gt;.&lt;/p&gt;&lt;/dd&gt;
+   &lt;code&gt;optgroup&lt;/code&gt;, &lt;code&gt;option&lt;/code&gt;, &lt;code&gt;p&lt;/code&gt;,
+   &lt;code&gt;param&lt;/code&gt;, &lt;code&gt;plaintext&lt;/code&gt;, &lt;code&gt;pre&lt;/code&gt;,
+   &lt;code&gt;script&lt;/code&gt;, &lt;code&gt;section&lt;/code&gt;, &lt;code&gt;select&lt;/code&gt;,
+   &lt;code&gt;style&lt;/code&gt;, &lt;code&gt;table&lt;/code&gt;, &lt;code&gt;tbody&lt;/code&gt;,
+   &lt;code&gt;td&lt;/code&gt;, &lt;code&gt;textarea&lt;/code&gt;, &lt;code&gt;tfoot&lt;/code&gt;,
+   &lt;code&gt;th&lt;/code&gt;, &lt;code&gt;thead&lt;/code&gt;, &lt;code&gt;title&lt;/code&gt;,
+   &lt;code&gt;tr&lt;/code&gt;, &lt;code&gt;ul&lt;/code&gt;, &lt;code&gt;wbr&lt;/code&gt;,
+   &lt;code&gt;xmp&lt;/code&gt;, and SVG's &lt;code&gt;foreignObject&lt;/code&gt;.&lt;/p&gt;&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn&gt;Formatting&lt;/dfn&gt;&lt;/dt&gt;
    &lt;dd&gt;&lt;p&gt;The following HTML elements are those that end up in the
@@ -93363,12 +93363,10 @@
      &lt;code&gt;li&lt;/code&gt; element, then act as if an end tag with the tag
      name &quot;li&quot; had been seen, then jump to the last step.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not in the
-     &lt;span&gt;formatting&lt;/span&gt; category, and is not in the
-     &lt;span&gt;ordinary&lt;/span&gt; category, and is not an
-     &lt;code&gt;address&lt;/code&gt;, &lt;code&gt;div&lt;/code&gt;, or &lt;code&gt;p&lt;/code&gt;
-     element, then jump to the last step.&lt;/p&gt;&lt;/li&gt; &lt;!-- an element
-     &lt;foo&gt; is in this list if the following markup:
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the &lt;span&gt;special&lt;/span&gt;
+     category, but is not an &lt;code&gt;address&lt;/code&gt;, &lt;code&gt;div&lt;/code&gt;,
+     or &lt;code&gt;p&lt;/code&gt; element, then jump to the last step.&lt;/p&gt;&lt;/li&gt;
+     &lt;!-- an element &lt;foo&gt; is in this list if the following markup:
 
          &lt;!DOCTYPE html&gt;&lt;body&gt;&lt;ol&gt;&lt;li&gt;&lt;foo&gt;&lt;li&gt;
 
@@ -93416,12 +93414,10 @@
      tag with the same tag name as &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; had been
      seen, then jump to the last step.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is not in the
-     &lt;span&gt;formatting&lt;/span&gt; category, and is not in the
-     &lt;span&gt;ordinary&lt;/span&gt; category, and is not an
-     &lt;code&gt;address&lt;/code&gt;, &lt;code&gt;div&lt;/code&gt;, or &lt;code&gt;p&lt;/code&gt;
-     element, then jump to the last step.&lt;/p&gt;&lt;/li&gt; &lt;!-- an element
-     &lt;foo&gt; is in this list if the following markup:
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the &lt;span&gt;special&lt;/span&gt;
+     category, but is not an &lt;code&gt;address&lt;/code&gt;, &lt;code&gt;div&lt;/code&gt;,
+     or &lt;code&gt;p&lt;/code&gt; element, then jump to the last step.&lt;/p&gt;&lt;/li&gt;
+     &lt;!-- an element &lt;foo&gt; is in this list if the following markup:
 
          &lt;!DOCTYPE html&gt;&lt;body&gt;&lt;dl&gt;&lt;dt&gt;&lt;foo&gt;&lt;dt&gt;
 
@@ -93797,12 +93793,11 @@
 
      &lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt; be the
-     topmost node in the &lt;span&gt;stack of open elements&lt;/span&gt; that
-     is lower in the stack than the &lt;var title=&quot;&quot;&gt;formatting
-     element&lt;/var&gt;, and is not an element in the
-     &lt;span&gt;ordinary&lt;/span&gt; or &lt;span&gt;formatting&lt;/span&gt;
-     categories. There might not be one.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt; be the topmost
+     node in the &lt;span&gt;stack of open elements&lt;/span&gt; that is lower in
+     the stack than the &lt;var title=&quot;&quot;&gt;formatting element&lt;/var&gt;, and is
+     an element in the &lt;span&gt;special&lt;/span&gt; category. There might not
+     be one.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt;,
      then the UA must skip the subsequent steps and instead just
@@ -94369,12 +94364,13 @@
      &lt;li&gt;&lt;p&gt;Initialize &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;span&gt;current
      node&lt;/span&gt; (the bottommost node of the stack).&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has the same tag name as
-     the token, then:&lt;/p&gt;
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has the same tag
+     name as the token, then:&lt;/p&gt;
 
       &lt;ol&gt;
 
-       &lt;li&gt;&lt;p&gt;&lt;span&gt;Generate implied end tags&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;&lt;span&gt;Generate implied end tags&lt;/span&gt;, except
+       for elements with the same tag name as the token.&lt;/p&gt;&lt;/li&gt;
 
        &lt;li&gt;&lt;p&gt;If the tag name of the end tag token does not match
        the tag name of the &lt;span&gt;current node&lt;/span&gt;, this is a
@@ -94388,15 +94384,14 @@
 
      &lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in neither the
-     &lt;span&gt;formatting&lt;/span&gt; category nor the &lt;span&gt;ordinary&lt;/span&gt;
-     category, then this is a &lt;span&gt;parse error&lt;/span&gt;; ignore the
-     token, and abort these steps.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is in the
+     &lt;span&gt;special&lt;/span&gt; category, then this is a &lt;span&gt;parse
+     error&lt;/span&gt;; ignore the token, and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to the previous entry in the
      &lt;span&gt;stack of open elements&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Return to step 2.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Return to the step labeld &lt;i&gt;loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
     &lt;/ol&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012031.html">[html5] r5161 - [e] (0) Some parser clarifications. Fixing	http://www.w3.org/Bugs/Public/show_bu [...]
</A></li>
	<LI>Next message: <A HREF="012033.html">[html5] r5163 - [e] (0) Tweak the steps to reduce the likelihood of	bugs implementing the AAA. F [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12032">[ date ]</a>
              <a href="thread.html#12032">[ thread ]</a>
              <a href="subject.html#12032">[ subject ]</a>
              <a href="author.html#12032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
