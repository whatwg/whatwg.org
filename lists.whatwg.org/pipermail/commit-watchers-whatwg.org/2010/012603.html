<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r5736 - [e] (0) Purge references to Web SQL Database.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5736%20-%20%5Be%5D%20%280%29%20Purge%20references%20to%20Web%20SQL%20Database.&In-Reply-To=%3C20110101063354.0E3B21CBC004%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012602.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r5736 - [e] (0) Purge references to Web SQL Database.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r5736%20-%20%5Be%5D%20%280%29%20Purge%20references%20to%20Web%20SQL%20Database.&In-Reply-To=%3C20110101063354.0E3B21CBC004%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r5736 - [e] (0) Purge references to Web SQL Database.">whatwg at whatwg.org
       </A><BR>
    <I>Fri Dec 31 22:33:54 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="012602.html">[html5] r5735 - [e] (0) Remove UndoManager from W3C HTML5 spec	since it's not really fully baked [...]
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12603">[ date ]</a>
              <a href="thread.html#12603">[ thread ]</a>
              <a href="subject.html#12603">[ subject ]</a>
              <a href="author.html#12603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-12-31 22:33:52 -0800 (Fri, 31 Dec 2010)
New Revision: 5736

Modified:
   complete.html
   index
   source
Log:
[e] (0) Purge references to Web SQL Database.

Modified: complete.html
===================================================================
--- complete.html	2011-01-01 06:20:53 UTC (rev 5735)
+++ complete.html	2011-01-01 06:33:52 UTC (rev 5736)
@@ -1023,9 +1023,8 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#importing-scripts-and-libraries&gt;&lt;span class=secno&gt;9.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-workernavigator-object&gt;&lt;span class=secno&gt;9.3.2 &lt;/span&gt;The &lt;code&gt;WorkerNavigator&lt;/code&gt; object&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#apis-defined-in-other-specifications&gt;&lt;span class=secno&gt;9.3.3 &lt;/span&gt;APIs defined in other specifications&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#interface-objects-and-constructors&gt;&lt;span class=secno&gt;9.3.4 &lt;/span&gt;Interface objects and constructors&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#worker-locations&gt;&lt;span class=secno&gt;9.3.5 &lt;/span&gt;Worker locations&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#interface-objects-and-constructors&gt;&lt;span class=secno&gt;9.3.3 &lt;/span&gt;Interface objects and constructors&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#worker-locations&gt;&lt;span class=secno&gt;9.3.4 &lt;/span&gt;Worker locations&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#comms&gt;&lt;span class=secno&gt;10 &lt;/span&gt;Communication&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#event-definitions-0&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
@@ -22902,8 +22901,7 @@
 
     &lt;p&gt;This flag also &lt;a href=#sandboxCookies&gt;prevents script from
     reading from or writing to the &lt;code title=dom-document-cookie&gt;document.cookie&lt;/code&gt; IDL
-    attribute&lt;/a&gt;, and blocks access to &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-opendatabase&gt;openDatabase()&lt;/code&gt;.
-    &lt;a href=#refsWEBSQL&gt;[WEBSQL]&lt;/a&gt;
+    attribute&lt;/a&gt;, and blocks access to &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt;.
     &lt;/p&gt;
 
     &lt;div class=note&gt;
@@ -61015,15 +61013,7 @@
   &lt;/ol&gt;&lt;p&gt;This specification defines the following &lt;dfn id=unloading-document-cleanup-steps&gt;unloading document
   cleanup steps&lt;/dfn&gt;. Other specifications can define more.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If there are any outstanding transactions that have
-   callbacks that involve &lt;a href=#concept-script title=concept-script&gt;scripts&lt;/a&gt;
-   whose &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; is
-   the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, roll them
-   back (without invoking any of the callbacks) and set the
-   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;var title=concept-document-salvageable&gt;salvageable&lt;/var&gt; state to
-   false. &lt;a href=#refsWEBSQL&gt;[WEBSQL]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Close the WebSocket connection&lt;/span&gt; of any
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Close the WebSocket connection&lt;/span&gt; of any
    &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects that were created by the &lt;code title=dom-WebSocket&gt;&lt;a href=#dom-websocket&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor visible on the
    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. If this
    affected any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects, the set
@@ -71491,16 +71481,6 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If there are any outstanding transactions that have callbacks
-    that involve &lt;a href=#concept-script title=concept-script&gt;scripts&lt;/a&gt; whose
-    &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; is the
-    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;, roll them back (without
-    invoking any of the callbacks). &lt;a href=#refsWEBSQL&gt;[WEBSQL]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
     &lt;p&gt;Empty the &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s &lt;a href=#list-of-active-timeouts&gt;list
     of active timeouts&lt;/a&gt; and its &lt;a href=#list-of-active-intervals&gt;list of active
     intervals&lt;/a&gt;.&lt;/p&gt;
@@ -72162,16 +72142,9 @@
 
 
 
-  &lt;h4 id=apis-defined-in-other-specifications&gt;&lt;span class=secno&gt;9.3.3 &lt;/span&gt;APIs defined in other specifications&lt;/h4&gt;
 
-  &lt;p&gt;The &lt;code title=dom-opendatabase&gt;openDatabase()&lt;/code&gt; and
-  &lt;code title=dom-opendatabase-sync&gt;openDatabaseSync()&lt;/code&gt;
-  methods are defined in the Web SQL Database specification. &lt;a href=#refsWEBSQL&gt;[WEBSQL]&lt;/a&gt;&lt;/p&gt;
+  &lt;h4 id=interface-objects-and-constructors&gt;&lt;span class=secno&gt;9.3.3 &lt;/span&gt;Interface objects and constructors&lt;/h4&gt;
 
-
-
-  &lt;h4 id=interface-objects-and-constructors&gt;&lt;span class=secno&gt;9.3.4 &lt;/span&gt;Interface objects and constructors&lt;/h4&gt;
-
   &lt;p&gt;There must be no interface objects and constructors available in
   the global scope of scripts whose &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
   object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object except for
@@ -72205,7 +72178,7 @@
   visibility of interfaces annotated with the &lt;code title=&quot;&quot;&gt;[NoInterfaceObject]&lt;/code&gt; extended attribute.&lt;/p&gt;
 
 
-  &lt;h4 id=worker-locations&gt;&lt;span class=secno&gt;9.3.5 &lt;/span&gt;Worker locations&lt;/h4&gt;
+  &lt;h4 id=worker-locations&gt;&lt;span class=secno&gt;9.3.4 &lt;/span&gt;Worker locations&lt;/h4&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=workerlocation&gt;WorkerLocation&lt;/dfn&gt; {
   // &lt;a href=#url-decomposition-idl-attributes&gt;URL decomposition IDL attributes&lt;/a&gt;
@@ -74723,25 +74696,11 @@
   executing, other than in a way that is predictable by the script
   itself.&lt;/p&gt;
 
-  
 
-  &lt;/div&gt;&lt;!--data-component--&gt;  
-
-
-  &lt;div data-component=&quot;Web Storage (editor: Ian Hickson)&quot;&gt;
-
-  
-  
-
   &lt;h3 id=disk-space-0&gt;&lt;span class=secno&gt;11.3 &lt;/span&gt;Disk space&lt;/h3&gt;
 
   &lt;p&gt;User agents should limit the total amount of space allowed for
-  
-  storage areas.
-  
-  
-  
-  &lt;/p&gt;
+  storage areas.&lt;/p&gt;
 
   &lt;p&gt;User agents should guard against sites storing data under the
   origins other affiliated sites, e.g. storing up to the limit in
@@ -74756,11 +74715,9 @@
   &lt;p&gt;User agents should allow users to see how much space each domain
   is using.&lt;/p&gt;
 
-  
   &lt;!--&lt;p&gt;If the storage area space limit is reached during a &lt;code
   title=&quot;dom-Storage-setItem&quot;&gt;setItem()&lt;/code&gt; call, the method will
   raise an exception.&lt;/p&gt;--&gt;
-  
 
   &lt;p&gt;A mostly arbitrary limit of five megabytes per
   &lt;a href=#origin&gt;origin&lt;/a&gt; is recommended. Implementation feedback is
@@ -74774,18 +74731,13 @@
 
   &lt;p&gt;A third-party advertiser (or any entity capable of getting
   content distributed to multiple sites) could use a unique identifier
-  stored in its
-  
-  local storage area
-  
-  
-  to track a user across multiple sessions, building a profile of the
-  user's interests to allow for highly targeted advertising. In
-  conjunction with a site that is aware of the user's real identity
-  (for example an e-commerce site that requires authenticated
-  credentials), this could allow oppressive groups to target
-  individuals with greater accuracy than in a world with purely
-  anonymous Web usage.&lt;/p&gt;
+  stored in its local storage area to track a user across multiple
+  sessions, building a profile of the user's interests to allow for
+  highly targeted advertising. In conjunction with a site that is
+  aware of the user's real identity (for example an e-commerce site
+  that requires authenticated credentials), this could allow
+  oppressive groups to target individuals with greater accuracy than
+  in a world with purely anonymous Web usage.&lt;/p&gt;
 
   &lt;p&gt;There are a number of techniques that can be used to mitigate the
   risk of user tracking:&lt;/p&gt;
@@ -74793,14 +74745,10 @@
   &lt;dl&gt;&lt;dt&gt;Blocking third-party storage&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;User agents may restrict access to
-    
-    the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; objects
-    
-    
-    to scripts originating at the domain of the top-level document of
-    the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, for instance denying access to
-    the API for pages from other domains running in
+    &lt;p&gt;User agents may restrict access to the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; objects to scripts
+    originating at the domain of the top-level document of the
+    &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, for instance denying access to the
+    API for pages from other domains running in
     &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;s.&lt;/p&gt;
 
    &lt;/dd&gt;
@@ -74811,12 +74759,10 @@
     &lt;p&gt;User agents may, if so configured by the user, automatically
     delete stored data after a period of time.&lt;/p&gt;
 
-    
     &lt;p&gt;For example, a user agent could be configured to treat
     third-party local storage areas as session-only storage, deleting
     the data once the user had closed all the &lt;a href=#browsing-context title=&quot;browsing
     context&quot;&gt;browsing contexts&lt;/a&gt; that could access it.&lt;/p&gt;
-    
 
     &lt;p&gt;This can restrict the ability of a site to track a user, as the
     site would then only be able to track the user across multiple
@@ -74828,10 +74774,8 @@
     risk, if the user does not fully understand the implications of
     data expiration.&lt;/p&gt;
 
-    
     &lt;!--v2 consider adding an explicit way for sites to state when
     data should expire, as in  localStorage.expireData(365); --&gt;
-    
 
    &lt;/dd&gt;
 
@@ -74839,34 +74783,22 @@
    &lt;dd&gt;
 
     &lt;p&gt;If users attempt to protect their privacy by clearing cookies
-    without also clearing data stored in the
-    
-    local storage area,
-    
-    
-    
-    sites can defeat those attempts by using the two features as
-    redundant backup for each other. User agents should present the
-    interfaces for clearing these in a way that helps users to
-    understand this possibility and enables them to delete data in all
-    persistent storage features simultaneously. &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
+    without also clearing data stored in the local storage area, sites
+    can defeat those attempts by using the two features as redundant
+    backup for each other. User agents should present the interfaces
+    for clearing these in a way that helps users to understand this
+    possibility and enables them to delete data in all persistent
+    storage features simultaneously. &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;Site-specific white-listing of access to
-   
-   local storage areas
-   
-   
-   &lt;/dt&gt;
+   &lt;dt&gt;Site-specific white-listing of access to local storage
+   areas&lt;/dt&gt;
    &lt;dd&gt;
 
-    
     &lt;p&gt;User agents may allow sites to access session storage areas in
     an unrestricted manner, but require the user to authorize access
     to local storage areas.&lt;/p&gt;
-    
-    
 
    &lt;/dd&gt;
 
@@ -74936,27 +74868,17 @@
   from that domain. To mitigate this, pages can use TLS. Pages using
   TLS can be sure that only pages using TLS that have certificates
   identifying them as being from the same domain can access their
-  
-  storage areas.
-  
-  
-  
-  &lt;/p&gt;
+  storage areas.&lt;/p&gt;
 
 
   &lt;h4 id=cross-directory-attacks&gt;&lt;span class=secno&gt;11.5.2 &lt;/span&gt;Cross-directory attacks&lt;/h4&gt;
 
   &lt;p&gt;Different authors sharing one host name, for example users
-  hosting content on &lt;code&gt;geocities.com&lt;/code&gt;, all share one
-  
-  local storage object.
-  
-  
-  
-  There is no feature to restrict the access by pathname. Authors on
-  shared hosts are therefore recommended to avoid using these
-  features, as it would be trivial for other authors to read the data
-  and overwrite it.&lt;/p&gt;
+  hosting content on &lt;code&gt;geocities.com&lt;/code&gt;, all share one local
+  storage object. There is no feature to restrict the access by
+  pathname. Authors on shared hosts are therefore recommended to avoid
+  using these features, as it would be trivial for other authors to
+  read the data and overwrite it.&lt;/p&gt;
 
   &lt;p class=note&gt;Even if a path-restriction feature was made
   available, the usual DOM scripting security model would make it
@@ -74989,7 +74911,6 @@
   in this specification is important for user security.&lt;/p&gt;
 
 
-  
 
   &lt;/div&gt;&lt;!--data-component--&gt;
 
@@ -93306,10 +93227,6 @@
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/draft-nottingham-http-link-header">http://tools.ietf.org/html/draft-nottingham-http-link-header</A>&gt;Web
    Linking&lt;/a&gt;&lt;/cite&gt;, M. Nottingham. IETF.&lt;/dd&gt;
 
-   &lt;dt id=refsWEBSQL&gt;[WEBSQL]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/webdatabase/">http://dev.w3.org/html5/webdatabase/</A>&gt;Web SQL
-   Database&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-
    &lt;dt id=refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://wiki.whatwg.org/">http://wiki.whatwg.org/</A>&gt;The WHATWG Wiki&lt;/a&gt;&lt;/cite&gt;. WHATWG.&lt;/dd&gt;
 

Modified: index
===================================================================
--- index	2011-01-01 06:20:53 UTC (rev 5735)
+++ index	2011-01-01 06:33:52 UTC (rev 5736)
@@ -1336,7 +1336,6 @@
    &lt;li&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol">http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol</A>&quot;&gt;WebSocket protocol&lt;/a&gt;
 --&gt;
    &lt;li&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/eventsource/">http://dev.w3.org/html5/eventsource/</A>&gt;Server-sent Events&lt;/a&gt;
-   &lt;li&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/webdatabase/">http://dev.w3.org/html5/webdatabase/</A>&gt;Web SQL Database&lt;/a&gt;
    &lt;li&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/draft-abarth-mime-sniff">http://tools.ietf.org/html/draft-abarth-mime-sniff</A>&gt;Media Type Sniffing&lt;/a&gt;
    &lt;li&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/draft-abarth-origin">http://tools.ietf.org/html/draft-abarth-origin</A>&gt;The Web Origin Concept&lt;/a&gt;
    &lt;li&gt;&lt;a href=<A HREF="http://dev.w3.org/geo/api/spec-source.html">http://dev.w3.org/geo/api/spec-source.html</A>&gt;Geolocation API&lt;/a&gt;
@@ -22881,11 +22880,10 @@
 
     &lt;p&gt;This flag also &lt;a href=#sandboxCookies&gt;prevents script from
     reading from or writing to the &lt;code title=dom-document-cookie&gt;document.cookie&lt;/code&gt; IDL
-    attribute&lt;/a&gt;, and blocks access to &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt; and &lt;code title=dom-opendatabase&gt;openDatabase()&lt;/code&gt;.
+    attribute&lt;/a&gt;, and blocks access to &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt;.
     
     &lt;a href=#refsWEBSTORAGE&gt;[WEBSTORAGE]&lt;/a&gt;
     
-    &lt;a href=#refsWEBSQL&gt;[WEBSQL]&lt;/a&gt;
     &lt;/p&gt;
 
     &lt;div class=note&gt;
@@ -60997,15 +60995,7 @@
   &lt;/ol&gt;&lt;p&gt;This specification defines the following &lt;dfn id=unloading-document-cleanup-steps&gt;unloading document
   cleanup steps&lt;/dfn&gt;. Other specifications can define more.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If there are any outstanding transactions that have
-   callbacks that involve &lt;a href=#concept-script title=concept-script&gt;scripts&lt;/a&gt;
-   whose &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; is
-   the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, roll them
-   back (without invoking any of the callbacks) and set the
-   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;var title=concept-document-salvageable&gt;salvageable&lt;/var&gt; state to
-   false. &lt;a href=#refsWEBSQL&gt;[WEBSQL]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Close the WebSocket connection&lt;/span&gt; of any
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Close the WebSocket connection&lt;/span&gt; of any
    &lt;code&gt;WebSocket&lt;/code&gt; objects that were created by the &lt;code title=dom-WebSocket&gt;WebSocket()&lt;/code&gt; constructor visible on the
    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. If this
    affected any &lt;code&gt;WebSocket&lt;/code&gt; objects, the set
@@ -89368,10 +89358,6 @@
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/websockets/">http://dev.w3.org/html5/websockets/</A>&gt;The WebSocket
    API&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
 
-   &lt;dt id=refsWEBSQL&gt;[WEBSQL]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/webdatabase/">http://dev.w3.org/html5/webdatabase/</A>&gt;Web SQL
-   Database&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-
    &lt;dt id=refsWEBSTORAGE&gt;[WEBSTORAGE]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/html5/webstorage/">http://dev.w3.org/html5/webstorage/</A>&gt;Web
    Storage&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;

Modified: source
===================================================================
--- source	2011-01-01 06:20:53 UTC (rev 5735)
+++ source	2011-01-01 06:33:52 UTC (rev 5736)
@@ -110,7 +110,6 @@
    &lt;li&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol">http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol</A>&quot;&gt;WebSocket protocol&lt;/a&gt;
 --&gt;
    &lt;li&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/html5/eventsource/">http://dev.w3.org/html5/eventsource/</A>&quot;&gt;Server-sent Events&lt;/a&gt;
-   &lt;li&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/html5/webdatabase/">http://dev.w3.org/html5/webdatabase/</A>&quot;&gt;Web SQL Database&lt;/a&gt;
    &lt;li&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/draft-abarth-mime-sniff">http://tools.ietf.org/html/draft-abarth-mime-sniff</A>&quot;&gt;Media Type Sniffing&lt;/a&gt;
    &lt;li&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/draft-abarth-origin">http://tools.ietf.org/html/draft-abarth-origin</A>&quot;&gt;The Web Origin Concept&lt;/a&gt;
    &lt;li&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/geo/api/spec-source.html">http://dev.w3.org/geo/api/spec-source.html</A>&quot;&gt;Geolocation API&lt;/a&gt;
@@ -24538,12 +24537,10 @@
     reading from or writing to the &lt;code
     title=&quot;dom-document-cookie&quot;&gt;document.cookie&lt;/code&gt; IDL
     attribute&lt;/a&gt;, and blocks access to &lt;code
-    title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/code&gt; and &lt;code
-    title=&quot;dom-opendatabase&quot;&gt;openDatabase()&lt;/code&gt;.
+    title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/code&gt;.
     &lt;!--END complete--&gt;&lt;!--END epub--&gt;
     &lt;a href=&quot;#refsWEBSTORAGE&quot;&gt;[WEBSTORAGE]&lt;/a&gt;
     &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-    &lt;a href=&quot;#refsWEBSQL&quot;&gt;[WEBSQL]&lt;/a&gt;
     &lt;/p&gt;
 
     &lt;div class=&quot;note&quot;&gt;
@@ -69343,15 +69340,6 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;If there are any outstanding transactions that have
-   callbacks that involve &lt;span title=&quot;concept-script&quot;&gt;scripts&lt;/span&gt;
-   whose &lt;span title=&quot;script's global object&quot;&gt;global object&lt;/span&gt; is
-   the &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;Window&lt;/code&gt; object, roll them
-   back (without invoking any of the callbacks) and set the
-   &lt;code&gt;Document&lt;/code&gt;'s &lt;var
-   title=&quot;concept-document-salvageable&quot;&gt;salvageable&lt;/var&gt; state to
-   false. &lt;a href=&quot;#refsWEBSQL&quot;&gt;[WEBSQL]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Close the WebSocket connection&lt;/span&gt; of any
    &lt;code&gt;WebSocket&lt;/code&gt; objects that were created by the &lt;code
    title=&quot;dom-WebSocket&quot;&gt;WebSocket()&lt;/code&gt; constructor visible on the
@@ -80815,16 +80803,6 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If there are any outstanding transactions that have callbacks
-    that involve &lt;span title=&quot;concept-script&quot;&gt;scripts&lt;/span&gt; whose
-    &lt;span title=&quot;script's global object&quot;&gt;global object&lt;/span&gt; is the
-    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;, roll them back (without
-    invoking any of the callbacks). &lt;a href=&quot;#refsWEBSQL&quot;&gt;[WEBSQL]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
     &lt;p&gt;Empty the &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;'s &lt;span&gt;list
     of active timeouts&lt;/span&gt; and its &lt;span&gt;list of active
     intervals&lt;/span&gt;.&lt;/p&gt;
@@ -81619,15 +81597,7 @@
 
 
 
-  &lt;h4&gt;APIs defined in other specifications&lt;/h4&gt;
 
-  &lt;p&gt;The &lt;code title=&quot;dom-opendatabase&quot;&gt;openDatabase()&lt;/code&gt; and
-  &lt;code title=&quot;dom-opendatabase-sync&quot;&gt;openDatabaseSync()&lt;/code&gt;
-  methods are defined in the Web SQL Database specification. &lt;a
-  href=&quot;#refsWEBSQL&quot;&gt;[WEBSQL]&lt;/a&gt;&lt;/p&gt;
-
-
-
   &lt;h4&gt;Interface objects and constructors&lt;/h4&gt;
 
   &lt;p&gt;There must be no interface objects and constructors available in
@@ -84059,11 +84029,6 @@
 
 
 &lt;!--END html--&gt;
-&lt;!--END complete--&gt;&lt;!--END epub--&gt;
-
-  &lt;h2 id=&quot;storage-and-database&quot;&gt;Structured client-side storage APIs&lt;/h2&gt;
-
-&lt;!--START complete--&gt;&lt;!--START epub--&gt;
 &lt;!--FIXUP complete -1--&gt;
 
   &lt;div data-component=&quot;Web Storage (editor: Ian Hickson)&quot;&gt;
@@ -84587,1128 +84552,11 @@
   executing, other than in a way that is predictable by the script
   itself.&lt;/p&gt;
 
-  &lt;!--END storage--&gt;
 
-  &lt;/div&gt;&lt;!--data-component--&gt;  
-
-  &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-
-
-
-
-  &lt;h3&gt;Web SQL database&lt;/h3&gt;
-
-  &lt;div data-component=&quot;Web Database (editor: Ian Hickson)&quot;&gt;
-
-  &lt;!--START database--&gt;
-
-  &lt;!-- Feature requests for future versions (v2):
-        * deleting databases
-        * determining how much storage room is left
-        * handling the database getting corrupted
-  --&gt;
-
-  &lt;h4&gt;Introduction&lt;/h4&gt;
-
-  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
-
-  &lt;p&gt;This specification introduces a set of APIs to manipulate
-  client-side databases using SQL.&lt;/p&gt;
-
-  &lt;p&gt;The API is asynchronous, so authors are likely to find anonymous
-  functions (lambdas) very useful in using this API.&lt;/p&gt;
-
-  &lt;p&gt;Here is an example of a script using this API. First, a function
-  &lt;code title=&quot;&quot;&gt;prepareDatabase()&lt;/code&gt; is defined. This function
-  returns a handle to the database, first creating the database if
-  necessary. The example then calls the function to do the actual
-  work, in this case &lt;code title=&quot;&quot;&gt;showDocCount()&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;pre&gt;function prepareDatabase(ready, error) {
-  return openDatabase('documents', '1.0', 'Offline document storage', 5*1024*1024, function (db) {
-    db.changeVersion('', '1.0', function (t) {
-      t.executeSql('CREATE TABLE docids (id, name)');
-    }, error);
-  });
-}
-
-function showDocCount(db, span) {
-  db.readTransaction(function (t) {
-    t.executeSql('SELECT COUNT(*) AS c FROM docids', [], function (t, r) {
-      span.textContent = r.rows[0].c;
-    }, function (t, e) {
-      // couldn't read database
-      span.textContent = '(unknown: ' + e.message + ')';
-    });
-  });
-}
-
-prepareDatabase(function(db) {
-  // got database
-  var span = document.getElementById('doc-count');
-  showDocCount(db, span);
-}, function (e) {
-  // error getting database
-  alert(e.message);
-});&lt;/pre&gt;
-
-  &lt;hr&gt;
-
-  &lt;p&gt;The &lt;code
-  title=&quot;dom-sqltransaction-executeSql&quot;&gt;executeSql()&lt;/code&gt; method has
-  an argument intended to allow variables to be substituted into
-  statements without risking SQL injection vulnerabilities:&lt;/p&gt;
-
-  &lt;pre&gt;db.readTransaction(function (t) {
-  t.executeSql('SELECT title, author FROM docs WHERE id=?', [id], function (t, data) {
-    report(data.rows[0].title, data.rows[0].author);
-  });
-});&lt;/pre&gt;
-
-  &lt;hr&gt;
-
-  &lt;p&gt;Sometimes, there might be an arbitrary number of variables to
-  substitute in. Even in these case, the right solution is to
-  construct the query using only &quot;?&quot; characters, and then to pass the
-  variables in as the second argument:&lt;/p&gt;
-
-&lt;pre&gt;function findDocs(db, resultCallback) {
-  var q = &quot;&quot;;
-  for each (var i in labels)
-    q += (q == &quot;&quot; ? &quot;&quot; : &quot;, &quot;) + &quot;?&quot;;
-  db.readTransaction(function (t) {
-    t.executeSql('SELECT id FROM docs WHERE label IN (' + q + ')', labels, function (t, data) {
-      resultCallback(data);
-    });
-  });
-}&lt;/pre&gt;
-
-  &lt;!--BOILERPLATE middle-w3c-api-intro--&gt;
-  &lt;!--BOILERPLATE middle-w3c-js-disclaimer--&gt;
-
-  &lt;h4 id=&quot;sql&quot;&gt;The API&lt;/h4&gt;
-
-  &lt;h5&gt;Databases&lt;/h5&gt;
-
-  &lt;p&gt;Each &lt;i&gt;origin&lt;/i&gt; has an associated set of databases. Each
-  database has a name and a current version. There is no way to
-  enumerate or delete the databases available for an origin from this
-  API.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Each database has one version at a time; a database
-  can't exist in multiple versions at once. Versions are intended to
-  allow authors to manage schema changes incrementally and
-  non-destructively, and without running the risk of old code (e.g. in
-  another browser window) trying to write to a database with incorrect
-  assumptions.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;[Supplemental, NoInterfaceObject]
-interface &lt;span&gt;WindowDatabase&lt;/span&gt; {
-  &lt;span&gt;Database&lt;/span&gt; &lt;span title=&quot;dom-opendatabase&quot;&gt;openDatabase&lt;/span&gt;(in DOMString name, in DOMString version, in DOMString displayName, in unsigned long estimatedSize, in optional &lt;span&gt;DatabaseCallback&lt;/span&gt; creationCallback);
-};
-&lt;span&gt;Window&lt;/span&gt; implements &lt;span&gt;WindowDatabase&lt;/span&gt;;
-
-[Supplemental, NoInterfaceObject]
-interface &lt;span&gt;WorkerUtilsDatabase&lt;/span&gt; {
-  &lt;span&gt;Database&lt;/span&gt; &lt;span title=&quot;dom-opendatabase&quot;&gt;openDatabase&lt;/span&gt;(in DOMString name, in DOMString version, in DOMString displayName, in unsigned long estimatedSize, in optional &lt;span&gt;DatabaseCallback&lt;/span&gt; creationCallback);
-  &lt;span&gt;DatabaseSync&lt;/span&gt; &lt;span title=&quot;dom-opendatabase-sync&quot;&gt;openDatabaseSync&lt;/span&gt;(in DOMString name, in DOMString version, in DOMString displayName, in unsigned long estimatedSize, in optional &lt;span&gt;DatabaseCallback&lt;/span&gt; creationCallback);
-};
-&lt;span&gt;WorkerUtils&lt;/span&gt; implements &lt;span&gt;WorkerUtilsDatabase&lt;/span&gt;;
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn&gt;DatabaseCallback&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-databasecallback-handleEvent&quot;&gt;handleEvent&lt;/span&gt;(in &lt;span&gt;Database&lt;/span&gt; database);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-opendatabase&quot;&gt;&lt;code&gt;openDatabase()&lt;/code&gt;&lt;/dfn&gt; method on
-  the &lt;code&gt;Window&lt;/code&gt; and &lt;code&gt;WorkerUtils&lt;/code&gt; interfaces and
-  the &lt;dfn
-  title=&quot;dom-opendatabase-sync&quot;&gt;&lt;code&gt;openDatabaseSync()&lt;/code&gt;&lt;/dfn&gt;
-  method on the &lt;code&gt;WorkerUtils&lt;/code&gt; interface take the following
-  arguments: a database name, a database version, a display name, an
-  estimated size &mdash; in bytes &mdash; of the data that will be
-  stored in the database, and optionally a callback to be invoked if
-  the database has not yet been created. The callback, if provided, is
-  intended to be used to call &lt;code
-  title=&quot;dom-database-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;; the
-  callback is invoked with the database having the empty string as its
-  version regardless of the given database version. If the callback is
-  not provided, the database is created with the given database
-  version as its version.&lt;/p&gt;
-
-  &lt;p&gt;When invoked, these methods must run the following steps, with all
-  but the last two steps being run atomically:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;The user agent may raise a &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception
-    instead of returning a &lt;code&gt;Database&lt;/code&gt; object if the request
-    violates a policy decision (e.g. if the user agent is configured
-    to not allow the page to open databases).&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;For the method on the &lt;code&gt;Window&lt;/code&gt; object: let &lt;var
-    title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;span&gt;origin&lt;/span&gt; of the
-    &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt;
-    of the &lt;code&gt;Window&lt;/code&gt; object on which the method was
-    invoked.&lt;/p&gt;
-
-    &lt;p&gt;For the methods on the &lt;code&gt;WorkerUtils&lt;/code&gt; object: let
-    &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;span&gt;origin&lt;/span&gt; of the
-    scripts in the worker.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; is not a scheme/host/port
-   tuple, then throw a &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception and abort
-   these steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the database version provided is not the empty string,
-   and there is already a database with the given name from the origin
-   &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;, but the database has a different
-   version than the version provided, then throw an
-   &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception and abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If no database with the given name from the origin &lt;var
-    title=&quot;&quot;&gt;origin&lt;/var&gt; exists, then create the database and let
-    &lt;var title=&quot;&quot;&gt;created&lt;/var&gt; be true. If a callback was passed to
-    the method, then set the new database's version to the empty
-    string. Otherwise, set the new database's version to the given
-    database version.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, if a database with the given name already exists,
-    let &lt;var title=&quot;&quot;&gt;created&lt;/var&gt; be false.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;For the &lt;code title=&quot;dom-opendatabase&quot;&gt;openDatabase()&lt;/code&gt;
-    methods: let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be a newly constructed
-    &lt;code&gt;Database&lt;/code&gt; object representing the database with the
-    given database name from the origin &lt;var
-    title=&quot;&quot;&gt;origin&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;For the &lt;code
-    title=&quot;dom-opendatabase-sync&quot;&gt;openDatabaseSync()&lt;/code&gt; method:
-    let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be a newly constructed
-    &lt;code&gt;DatabaseSync&lt;/code&gt; object representing the database with
-    the given database name from the origin &lt;var
-    title=&quot;&quot;&gt;origin&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;created&lt;/var&gt; is false or if no callback was
-    passed to the method, skip this step. Otherwise:&lt;/p&gt;
-
-    &lt;p&gt;For the &lt;code title=&quot;dom-opendatabase&quot;&gt;openDatabase()&lt;/code&gt;
-    methods: &lt;span&gt;queue a task&lt;/span&gt; to to invoke the callback with
-    &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; as its only argument.&lt;/p&gt;
-
-    &lt;p&gt;For the &lt;code
-    title=&quot;dom-opendatabase-sync&quot;&gt;openDatabaseSync()&lt;/code&gt; method:
-    invoke the callback with &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; as its only
-    argument. If the callback throws an exception, rethrow that
-    exception and abort these steps.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;All strings including the empty string are valid database
-  names. Database names must be compared in a
-  &lt;span&gt;case-sensitive&lt;/span&gt; manner.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Implementations can support this even in
-  environments that only support a subset of all strings as database
-  names by mapping database names (e.g. using a hashing algorithm) to
-  the supported set of names.&lt;/p&gt;
-
-  &lt;p&gt;The version that the database was opened with is the &lt;dfn
-  title=&quot;concept-database-expected-version&quot;&gt;expected version&lt;/dfn&gt; of
-  this &lt;code&gt;Database&lt;/code&gt; or &lt;code&gt;DatabaseSync&lt;/code&gt; object. It
-  can be the empty string, in which case there is no expected version
-  &mdash; any version is fine.&lt;/p&gt;
-
-  &lt;p&gt;User agents are expected to use the display name and the
-  estimated database size to optimize the user experience. For
-  example, a user agent could use the estimated size to suggest an
-  initial quota to the user. This allows a site that is aware that it
-  will try to use hundreds of megabytes to declare this upfront,
-  instead of the user agent prompting the user for permission to
-  increase the quota every five megabytes.&lt;/p&gt;
-
-
-  &lt;h5&gt;Parsing and processing SQL statements&lt;/h5&gt;
-
-  &lt;p&gt;When the user agent is to &lt;dfn title=&quot;preprocess the SQL
-  statement&quot;&gt;preprocess a SQL statement&lt;/dfn&gt; &lt;var
-  title=&quot;&quot;&gt;sqlStatement&lt;/var&gt; with an array of arguments &lt;var
-  title=&quot;&quot;&gt;arguments&lt;/var&gt;, it must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;sqlStatement&lt;/var&gt; as a SQL statement,
-   with the exception that U+003F QUESTION MARK characters (?) can be
-   used in place of SQL literals in the statement. &lt;a
-   href=&quot;#refsSQL&quot;&gt;[SQL]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Bind each &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholder with the value of
-    the argument in the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; array with the
-    same position. (So the first &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholder
-    gets bound to the first value in the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;
-    array, and generally the &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;th &lt;code
-    title=&quot;&quot;&gt;?&lt;/code&gt; placeholder gets bound to the &lt;var
-    title=&quot;&quot;&gt;n&lt;/var&gt;th value in the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;
-    array.)&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;Binding the &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholders
-    is done at the literal level, not as string concatenations, so
-    this provides a way to dynamically insert parameters into a
-    statement without risk of a SQL injection attack.&lt;/p&gt;
-
-    &lt;p&gt;The result is &lt;var title=&quot;&quot;&gt;the statement&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;Database&lt;/code&gt; object that the
-   &lt;code&gt;SQLTransaction&lt;/code&gt; or &lt;code&gt;SQLTransactionSync&lt;/code&gt;
-   object was created from has an &lt;span
-   title=&quot;concept-database-expected-version&quot;&gt;expected version&lt;/span&gt;
-   that is neither the empty string nor the actual version of the
-   database, then mark &lt;var title=&quot;&quot;&gt;the statement&lt;/var&gt; as
-   bogus. (&lt;span title=&quot;dom-sqlerror-code-2&quot;&gt;Error code
-   2&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Otherwise, if the syntax of &lt;var title=&quot;&quot;&gt;sqlStatement&lt;/var&gt; is
-    not valid (except for the use of &lt;code title=&quot;&quot;&gt;?&lt;/code&gt;
-    characters in the place of literals), or the statement uses
-    features that are not supported (e.g. due to security reasons), or
-    the number of items in the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; array is
-    not equal to the number of &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholders in
-    the statement, or the statement cannot be parsed for some other
-    reason, then mark &lt;var title=&quot;&quot;&gt;the statement&lt;/var&gt; as
-    bogus. (&lt;span title=&quot;dom-sqlerror-code-5&quot;&gt;Error code
-    5&lt;/span&gt;.)&lt;/p&gt;
-
-    &lt;p&gt;User agents must consider statements that use the &lt;code
-    title=&quot;&quot;&gt;BEGIN&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;COMMIT&lt;/code&gt;, and &lt;code
-    title=&quot;&quot;&gt;ROLLBACK&lt;/code&gt; SQL features as being unsupported (and thus
-    will mark them as bogus), so as to not let these statements
-    interfere with the explicit transactions managed by the database API
-    itself.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li id=&quot;modifications-fail-if-read-only&quot;&gt;
-
-    &lt;p&gt;Otherwise, if the &lt;i&gt;mode&lt;/i&gt; that was used to create the
-    &lt;code&gt;SQLTransaction&lt;/code&gt; or &lt;code&gt;SQLTransactionSync&lt;/code&gt;
-    object is read-only but the statement's main verb can modify the
-    database, mark the statement as bogus. (&lt;span
-    title=&quot;dom-sqlerror-code-5&quot;&gt;Error code 5&lt;/span&gt;.)&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;Only the statement's main verb (e.g. &lt;code
-    title=&quot;&quot;&gt;UPDATE&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;SELECT&lt;/code&gt;, &lt;code
-    title=&quot;&quot;&gt;DROP&lt;/code&gt;) is considered here. Thus, a statement like
-    &quot;&lt;code title=&quot;&quot;&gt;UPDATE test SET id=0 WHERE 0=1&lt;/code&gt;&quot; would be
-    treated as potentially modifying the database for the purposes
-    of this step, even though it could never in fact have any
-    side-effects.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;the statement&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;The user agent must act as if the database was hosted in an
-  otherwise completely empty environment with no resources. For
-  example, attempts to read from or write to the file system will
-  fail.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;A future version of this specification will probably
-  define the exact SQL subset required in more detail.&lt;/p&gt;
-
-
-
-  &lt;h5&gt;Asynchronous database API&lt;/h5&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;Database&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-database-transaction&quot;&gt;transaction&lt;/span&gt;(in &lt;span&gt;SQLTransactionCallback&lt;/span&gt; callback, in optional &lt;span&gt;SQLTransactionErrorCallback&lt;/span&gt; errorCallback, in optional &lt;span&gt;SQLVoidCallback&lt;/span&gt; successCallback);
-  void &lt;span title=&quot;dom-database-readTransaction&quot;&gt;readTransaction&lt;/span&gt;(in &lt;span&gt;SQLTransactionCallback&lt;/span&gt; callback, in optional &lt;span&gt;SQLTransactionErrorCallback&lt;/span&gt; errorCallback, in optional &lt;span&gt;SQLVoidCallback&lt;/span&gt; successCallback);
-
-  readonly attribute DOMString &lt;span title=&quot;dom-database-version&quot;&gt;version&lt;/span&gt;;
-  void &lt;span title=&quot;dom-database-changeVersion&quot;&gt;changeVersion&lt;/span&gt;(in DOMString oldVersion, in DOMString newVersion, in optional &lt;span&gt;SQLTransactionCallback&lt;/span&gt; callback, in optional &lt;span&gt;SQLTransactionErrorCallback&lt;/span&gt; errorCallback, in optional &lt;span&gt;SQLVoidCallback&lt;/span&gt; successCallback);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn&gt;SQLVoidCallback&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-sqlvoidcallback-handleEvent&quot;&gt;handleEvent&lt;/span&gt;();
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn&gt;SQLTransactionCallback&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-sqltransactioncallback-handleEvent&quot;&gt;handleEvent&lt;/span&gt;(in &lt;span&gt;SQLTransaction&lt;/span&gt; transaction);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn&gt;SQLTransactionErrorCallback&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-sqltransactionerrorcallback-handleEvent&quot;&gt;handleEvent&lt;/span&gt;(in &lt;span&gt;SQLError&lt;/span&gt; error);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-database-transaction&quot;&gt;&lt;code&gt;transaction()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn
-  title=&quot;dom-database-readTransaction&quot;&gt;&lt;code&gt;readTransaction()&lt;/code&gt;&lt;/dfn&gt;
-  methods takes one to three arguments. When called, these methods must
-  immediately return and then asynchronously run the &lt;span&gt;transaction
-  steps&lt;/span&gt; with the &lt;i&gt;transaction callback&lt;/i&gt; being the first
-  argument, the &lt;i&gt;error callback&lt;/i&gt; being the second argument, if
-  any, the &lt;i&gt;success callback&lt;/i&gt; being the third argument, if any,
-  and with no &lt;i&gt;preflight operation&lt;/i&gt; or &lt;i&gt;postflight
-  operation&lt;/i&gt;.&lt;/p&gt;
-
-  &lt;p&gt;For the &lt;code
-  title=&quot;dom-database-transaction&quot;&gt;transaction()&lt;/code&gt; method, the
-  &lt;i&gt;mode&lt;/i&gt; must be read/write. For the &lt;code
-  title=&quot;dom-database-readTransaction&quot;&gt;readTransaction()&lt;/code&gt;
-  method, the &lt;i&gt;mode&lt;/i&gt; must be read-only.&lt;/p&gt;
-
-  &lt;p&gt;On getting, the &lt;dfn
-  title=&quot;dom-database-version&quot;&gt;&lt;code&gt;version&lt;/code&gt;&lt;/dfn&gt; attribute
-  must return the current version of the database (as opposed to the
-  &lt;span title=&quot;concept-database-expected-version&quot;&gt;expected
-  version&lt;/span&gt; of the &lt;code&gt;Database&lt;/code&gt; object).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-database-changeVersion&quot;&gt;&lt;code&gt;changeVersion()&lt;/code&gt;&lt;/dfn&gt;
-  method allows scripts to atomically verify the version number and
-  change it at the same time as doing a schema update. When the method
-  is invoked, it must immediately return, and then asynchronously run
-  the &lt;span&gt;transaction steps&lt;/span&gt; with the &lt;i&gt;transaction
-  callback&lt;/i&gt; being the third argument, the &lt;i&gt;error callback&lt;/i&gt;
-  being the fourth argument, the &lt;i&gt;success callback&lt;/i&gt; being the
-  fifth argument, the &lt;i&gt;preflight operation&lt;/i&gt; being the
-  following:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Check that the value of the first argument to the &lt;code
-   title=&quot;dom-database-changeVersion&quot;&gt;changeVersion()&lt;/code&gt; method
-   exactly matches the database's actual version. If it does not, then
-   the &lt;i&gt;preflight operation&lt;/i&gt; fails.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;...the &lt;i&gt;postflight operation&lt;/i&gt; being the following:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;Change the database's actual version to the value of the second
-   argument to the &lt;code
-   title=&quot;dom-database-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-   method.&lt;/li&gt;
-
-   &lt;li&gt;Change the &lt;code&gt;Database&lt;/code&gt; object's expected version to
-   the value of the second argument to the &lt;code
-   title=&quot;dom-database-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-   method.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;...and the &lt;i&gt;mode&lt;/i&gt; being read/write.&lt;/p&gt;
-
-  &lt;p&gt;If any of the optional arguments are omitted, then they must be
-  treated as if they were null.&lt;/p&gt;
-
-
-  &lt;h6&gt;Executing SQL statements&lt;/h6&gt;
-
-  &lt;p&gt;The &lt;code title=&quot;dom-database-transaction&quot;&gt;transaction()&lt;/code&gt;,
-  &lt;code title=&quot;dom-database-readTransaction&quot;&gt;readTransaction()&lt;/code&gt;,
-  and &lt;code title=&quot;dom-database-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-  methods invoke callbacks with &lt;code&gt;SQLTransaction&lt;/code&gt;
-  objects.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;typedef sequence&lt;any&gt; &lt;dfn&gt;ObjectArray&lt;/dfn&gt;;
-
-interface &lt;dfn&gt;SQLTransaction&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-sqltransaction-executeSql&quot;&gt;executeSql&lt;/span&gt;(in DOMString sqlStatement, in optional &lt;span&gt;ObjectArray&lt;/span&gt; arguments, in optional &lt;span&gt;SQLStatementCallback&lt;/span&gt; callback, in optional &lt;span&gt;SQLStatementErrorCallback&lt;/span&gt; errorCallback);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn&gt;SQLStatementCallback&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-sqlstatementcallback-handleEvent&quot;&gt;handleEvent&lt;/span&gt;(in &lt;span&gt;SQLTransaction&lt;/span&gt; transaction, in &lt;span&gt;SQLResultSet&lt;/span&gt; resultSet);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn&gt;SQLStatementErrorCallback&lt;/dfn&gt; {
-  boolean &lt;span title=&quot;dom-sqlstatementerrorcallback-handleEvent&quot;&gt;handleEvent&lt;/span&gt;(in &lt;span&gt;SQLTransaction&lt;/span&gt; transaction, in &lt;span&gt;SQLError&lt;/span&gt; error);
-};&lt;/pre&gt;
-
-  &lt;p&gt;When the &lt;dfn
-  title=&quot;dom-sqltransaction-executeSql&quot;&gt;&lt;code&gt;executeSql(&lt;var
-  title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;callback&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;errorCallback&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is invoked, the
-  user agent must run the following algorithm. (This algorithm is
-  relatively simple in that it doesn't actually execute any SQL
-  &mdash; the bulk of the work is actually done as part of the
-  &lt;span&gt;transaction steps&lt;/span&gt;.)&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If the method was not invoked during the execution of a
-   &lt;code&gt;SQLTransactionCallback&lt;/code&gt;,
-   &lt;code&gt;SQLStatementCallback&lt;/code&gt;, or
-   &lt;code&gt;SQLStatementErrorCallback&lt;/code&gt; then raise an
-   &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception. (Calls from inside a
-   &lt;code&gt;SQLTransactionErrorCallback&lt;/code&gt; thus raise an
-   exception. The &lt;code&gt;SQLTransactionErrorCallback&lt;/code&gt; handler is
-   only called once a transaction has failed, and no SQL statements
-   can be added to a failed transaction.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;&lt;span&gt;Preprocess the SQL statement&lt;/span&gt; given as the first
-    argument to the method (&lt;var title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;), using
-    the second argument to the method as the &lt;var
-    title=&quot;&quot;&gt;arguments&lt;/var&gt; array, to obtain &lt;var title=&quot;&quot;&gt;the
-    statement&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;If the second argument is omitted or null, then treat the &lt;var
-    title=&quot;&quot;&gt;arguments&lt;/var&gt; array as empty.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Queue up &lt;var title=&quot;&quot;&gt;the statement&lt;/var&gt; in the
-   transaction, along with the third argument (if any) as the
-   statement's result set callback and the fourth argument (if any) as
-   the error callback.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-
-
-  &lt;h6&gt;Processing model&lt;/h6&gt;
-
-  &lt;p&gt;The &lt;dfn&gt;transaction steps&lt;/dfn&gt; are as follows. These steps must
-  be run asynchronously. These steps are invoked with a &lt;i&gt;transaction
-  callback&lt;/i&gt;, optionally an &lt;i&gt;error callback&lt;/i&gt;, optionally a
-  &lt;i&gt;success callback&lt;/i&gt;, optionally a &lt;i&gt;preflight operation&lt;/i&gt;,
-  optionally a &lt;i&gt;postflight operation&lt;/i&gt;, and with a &lt;i&gt;mode&lt;/i&gt;
-  that is either read/write or read-only.&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Open a new SQL transaction to the database, and create a
-   &lt;code&gt;SQLTransaction&lt;/code&gt; object that represents that
-   transaction. If the &lt;i&gt;mode&lt;/i&gt; is read/write, the transaction must
-   have an exclusive write lock over the entire database. If the
-   &lt;i&gt;mode&lt;/i&gt; is read-only, the transaction must have a shared read
-   lock over the entire database. The user agent should wait for an
-   appropriate lock to be available.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If an error occurred in the opening of the transaction
-   (e.g. if the user agent failed to obtain an appropriate lock after
-   an appropriate delay), jump to the last step.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If a &lt;i&gt;preflight operation&lt;/i&gt; was defined for this
-   instance of the transaction steps, run that. If it fails, then jump
-   to the last step. (This is basically a hook for the &lt;code
-   title=&quot;dom-database-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-   method.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;i&gt;transaction callback&lt;/i&gt; is not null, &lt;span&gt;queue
-   a task&lt;/span&gt; to invoke the &lt;i&gt;transaction callback&lt;/i&gt; with the
-   aforementioned &lt;code&gt;SQLTransaction&lt;/code&gt; object as its only
-   argument, and wait for that task to be run.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the callback raised an exception, jump to the last
-   step.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;While there are any statements queued up in the transaction,
-   perform the following steps for each queued up statement in the
-   transaction, oldest first. Each statement has a statement,
-   optionally a result set callback, and optionally an error
-   callback.&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;&lt;p&gt;If the statement is marked as bogus, jump to the &quot;in case
-     of error&quot; steps below.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Execute the statement in the context of the transaction.
-     &lt;a href=&quot;#refsSQL&quot;&gt;[SQL]&lt;/a&gt;&lt;/p&gt;
-
-     &lt;li&gt;&lt;p&gt;If the statement failed, jump to the &quot;in case of error&quot;
-     steps below.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Create a &lt;code&gt;SQLResultSet&lt;/code&gt; object that represents
-     the result of the statement.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the statement has a result set callback that is not
-     null, &lt;span&gt;queue a task&lt;/span&gt; to invoke it with the
-     &lt;code&gt;SQLTransaction&lt;/code&gt; object as its first argument and the
-     new &lt;code&gt;SQLResultSet&lt;/code&gt; object as its second argument, and
-     wait for that task to be run.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the callback was invoked and raised an exception, jump
-     to the last step in the overall steps.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Move on to the next statement, if any, or onto the next
-     overall step otherwise.&lt;/p&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-    &lt;p&gt;In case of error (or more specifically, if the above substeps
-    say to jump to the &quot;in case of error&quot; steps), run the following
-    substeps:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;&lt;p&gt;If the statement had an associated error callback that is
-     not null, then &lt;span&gt;queue a task&lt;/span&gt; to invoke that error
-     callback with the &lt;code&gt;SQLTransaction&lt;/code&gt; object and a newly
-     constructed &lt;code&gt;SQLError&lt;/code&gt; object that represents the
-     error that caused these substeps to be run as the two arguments,
-     respectively, and wait for the task to be run.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the error callback returns false, then move on to the
-     next statement, if any, or onto the next overall step
-     otherwise.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Otherwise, the error callback did not return false, or
-     there was no error callback. Jump to the last step in the overall
-     steps.&lt;/p&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If a &lt;i&gt;postflight operation&lt;/i&gt; was defined for this instance
-    of the transaction steps, then: as one atomic operation, commit
-    the transaction and, if that succeeds, run the &lt;i&gt;postflight
-    operation&lt;/i&gt;. If the commit fails, then instead jump to the last
-    step. (This is basically a hook for the &lt;code
-    title=&quot;dom-database-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-    method.)&lt;/p&gt;
-
-    &lt;p&gt;Otherwise: commit the transaction. If an error occurred in the
-    committing of the transaction, jump to the last step.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke the &lt;i&gt;success
-   callback&lt;/i&gt;, if it is not null.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;End these steps. The next step is only used when something
-   goes wrong.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke the transaction's
-   &lt;i&gt;error callback&lt;/i&gt;, if it is not null, with a newly constructed
-   &lt;code&gt;SQLError&lt;/code&gt; object that represents the last error to have
-   occurred in this transaction. Rollback the transaction. Any
-   still-pending statements in the transaction are discarded.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;span&gt;task source&lt;/span&gt; for these &lt;span
-  title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; is the &lt;dfn&gt;database access task
-  source&lt;/dfn&gt;.&lt;/p&gt;
-
-
-
-  &lt;h5&gt;Synchronous database API&lt;/h5&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;DatabaseSync&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-database-sync-transaction&quot;&gt;transaction&lt;/span&gt;(in &lt;span&gt;SQLTransactionSyncCallback&lt;/span&gt; callback);
-  void &lt;span title=&quot;dom-database-sync-readTransaction&quot;&gt;readTransaction&lt;/span&gt;(in &lt;span&gt;SQLTransactionSyncCallback&lt;/span&gt; callback);
-
-  readonly attribute DOMString &lt;span title=&quot;dom-database-sync-version&quot;&gt;version&lt;/span&gt;;
-  void &lt;span title=&quot;dom-database-sync-changeVersion&quot;&gt;changeVersion&lt;/span&gt;(in DOMString oldVersion, in DOMString newVersion, in optional &lt;span&gt;SQLTransactionSyncCallback&lt;/span&gt; callback);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn&gt;SQLTransactionSyncCallback&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-sqltransactionsynccallback-handleEvent&quot;&gt;handleEvent&lt;/span&gt;(in &lt;span&gt;SQLTransactionSync&lt;/span&gt; transaction);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-database-sync-transaction&quot;&gt;&lt;code&gt;transaction()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn
-  title=&quot;dom-database-sync-readTransaction&quot;&gt;&lt;code&gt;readTransaction()&lt;/code&gt;&lt;/dfn&gt;
-  methods must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If the method was the &lt;code
-   title=&quot;dom-database-sync-transaction&quot;&gt;transaction()&lt;/code&gt; method,
-   &lt;span&gt;create a &lt;code&gt;SQLTransactionSync&lt;/code&gt; object&lt;/span&gt; for a
-   read/write transaction. Otherwise, &lt;span&gt;create a
-   &lt;code&gt;SQLTransactionSync&lt;/code&gt; object&lt;/span&gt; for a read-only
-   transaction. In either case, if this throws an exception, then
-   rethrow it and abort these steps. Otherwise, let &lt;var
-   title=&quot;&quot;&gt;transaction&lt;/var&gt; be the newly created
-   &lt;code&gt;SQLTransactionSync&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the first argument is null, rollback the transaction,
-   throw a &lt;code&gt;SQLException&lt;/code&gt; exception, and abort these
-   steps. (&lt;span title=&quot;dom-sqlerror-code-0&quot;&gt;Error code
-   0&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Invoke the callback given by the first argument, passing it
-   the &lt;var title=&quot;&quot;&gt;transaction&lt;/var&gt; object as its only
-   argument.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Mark the &lt;code&gt;SQLTransactionSync&lt;/code&gt; object as &lt;i
-   title=&quot;&quot;&gt;stale&lt;/i&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;If the callback was terminated by an exception, then
-   rollback the transaction, rethrow that exception, and abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Commit the transaction.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If an error occurred in the committing of the transaction,
-   rollback the transaction, throw a &lt;code&gt;SQLException&lt;/code&gt;
-   exception, and abort these steps.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;On getting, the &lt;dfn
-  title=&quot;dom-database-sync-version&quot;&gt;&lt;code&gt;version&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the current version of the database (as
-  opposed to the &lt;span
-  title=&quot;concept-database-expected-version&quot;&gt;expected version&lt;/span&gt; of
-  the &lt;code&gt;DatabaseSync&lt;/code&gt; object).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-database-sync-changeVersion&quot;&gt;&lt;code&gt;changeVersion()&lt;/code&gt;&lt;/dfn&gt;
-  method allows scripts to atomically verify the version number and
-  change it at the same time as doing a schema update. When the method
-  is invoked, it must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a &lt;code&gt;SQLTransactionSync&lt;/code&gt; object&lt;/span&gt;
-   for a read/write transaction. If this throws an exception, then
-   rethrow it and abort these steps. Otherwise, let &lt;var
-   title=&quot;&quot;&gt;transaction&lt;/var&gt; be the newly created
-   &lt;code&gt;SQLTransactionSync&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Check that the value of the first argument to the &lt;code
-   title=&quot;dom-database-sync-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-   method exactly matches the database's actual version. If it does
-   not, then throw a &lt;code&gt;SQLException&lt;/code&gt; exception and abort
-   these steps. (&lt;span title=&quot;dom-sqlerror-code-2&quot;&gt;Error code
-   2&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the third argument is not null, invoke the callback given
-   by the third argument, passing it the &lt;var
-   title=&quot;&quot;&gt;transaction&lt;/var&gt; object as its only argument.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Mark the &lt;code&gt;SQLTransactionSync&lt;/code&gt; object as &lt;i
-   title=&quot;&quot;&gt;stale&lt;/i&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;If the callback was terminated by an exception, then
-   rollback the transaction, rethrow the exception, and abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Commit the transaction.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If an error occurred in the committing of the transaction,
-   rollback the transaction, throw a &lt;code&gt;SQLException&lt;/code&gt;
-   exception, and abort these steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;Change the database's actual version to the value of the second
-   argument to the &lt;code
-   title=&quot;dom-database-sync-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-   method.&lt;/li&gt;
-
-   &lt;li&gt;Change the &lt;code&gt;Database&lt;/code&gt; object's expected version to
-   the value of the second argument to the &lt;code
-   title=&quot;dom-database-sync-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-   method.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;hr&gt;
-
-  &lt;p&gt;When the user agent is to &lt;dfn&gt;create a
-  &lt;code&gt;SQLTransactionSync&lt;/code&gt; object&lt;/dfn&gt; for a transaction that
-  is either read/write or read-only, it must run the following
-  steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Open a new SQL transaction to the database, and create a
-   &lt;code&gt;SQLTransactionSync&lt;/code&gt; object that represents that
-   transaction. If the &lt;i&gt;mode&lt;/i&gt; is read/write, the transaction must
-   have an exclusive write lock over the entire database. If the
-   &lt;i&gt;mode&lt;/i&gt; is read-only, the transaction must have a shared read
-   lock over the entire database. The user agent should wait for an
-   appropriate lock to be available.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If an error occurred in the opening of the transaction
-   (e.g. if the user agent failed to obtain an appropriate lock after
-   an appropriate delay), throw a &lt;code&gt;SQLException&lt;/code&gt; exception
-   and abort these steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return the newly created &lt;code&gt;SQLTransactionSync&lt;/code&gt;
-   object.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-
-
-  &lt;h6&gt;Executing SQL statements&lt;/h6&gt;
-
-  &lt;p&gt;The &lt;code
-  title=&quot;dom-database-sync-transaction&quot;&gt;transaction()&lt;/code&gt;, &lt;code
-  title=&quot;dom-database-sync-readTransaction&quot;&gt;readTransaction()&lt;/code&gt;,
-  and &lt;code
-  title=&quot;dom-database-sync-changeVersion&quot;&gt;changeVersion()&lt;/code&gt;
-  methods invoke callbacks that are passed
-  &lt;code&gt;SQLTransactionSync&lt;/code&gt; objects.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;// typedef sequence&lt;any&gt; &lt;span&gt;ObjectArray&lt;/span&gt;;
-
-interface &lt;dfn&gt;SQLTransactionSync&lt;/dfn&gt; {
-  &lt;span&gt;SQLResultSet&lt;/span&gt; &lt;span title=&quot;dom-sqltransaction-sync-executeSql&quot;&gt;executeSql&lt;/span&gt;(in DOMString sqlStatement, in optional &lt;span&gt;ObjectArray&lt;/span&gt; arguments);
-};&lt;/pre&gt;
-
-  &lt;p&gt;A &lt;code&gt;SQLTransactionSync&lt;/code&gt; object is initially &lt;i
-  title=&quot;&quot;&gt;fresh&lt;/i&gt;, but it will be marked as &lt;i title=&quot;&quot;&gt;stale&lt;/i&gt;
-  once it has been committed or rolled back.&lt;/p&gt;
-
-  &lt;p&gt;When the &lt;dfn
-  title=&quot;dom-sqltransaction-sync-executeSql&quot;&gt;&lt;code&gt;executeSql(&lt;var
-  title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;arguments&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is invoked, the user
-  agent must run the following algorithm:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;SQLTransactionSync&lt;/code&gt; object is &lt;i
-   title=&quot;&quot;&gt;stale&lt;/i&gt;, then throw an &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt;
-   exception.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;&lt;span&gt;Preprocess the SQL statement&lt;/span&gt; given as the first
-    argument to the method (&lt;var title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;), using
-    the second argument to the method as the &lt;var
-    title=&quot;&quot;&gt;arguments&lt;/var&gt; array, to obtain &lt;var title=&quot;&quot;&gt;the
-    statement&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;If the second argument is omitted or null, then treat the &lt;var
-    title=&quot;&quot;&gt;arguments&lt;/var&gt; array as empty.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the statement is marked as bogus, throw a
-   &lt;code&gt;SQLException&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Execute the statement in the context of the transaction.
-   &lt;a href=&quot;#refsSQL&quot;&gt;[SQL]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;If the statement failed, throw a &lt;code&gt;SQLException&lt;/code&gt;
-   exception.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Create a &lt;code&gt;SQLResultSet&lt;/code&gt; object that represents
-   the result of the statement.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return the newly created &lt;code&gt;SQLResultSet&lt;/code&gt;
-   object.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-
-
-  &lt;h5&gt;Database query results&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;code title=&quot;dom-sqltransaction-executeSql&quot;&gt;executeSql()&lt;/code&gt;
-  method invokes its callback with a &lt;code&gt;SQLResultSet&lt;/code&gt; object
-  as an argument.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;SQLResultSet&lt;/dfn&gt; {
-  readonly attribute long &lt;span title=&quot;dom-SQLResultSet-insertId&quot;&gt;insertId&lt;/span&gt;;
-  readonly attribute long &lt;span title=&quot;dom-SQLResultSet-rowsAffected&quot;&gt;rowsAffected&lt;/span&gt;;
-  readonly attribute &lt;span&gt;SQLResultSetRowList&lt;/span&gt; &lt;span title=&quot;dom-SQLResultSet-rows&quot;&gt;rows&lt;/span&gt;;
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-SQLResultSet-insertId&quot;&gt;&lt;code&gt;insertId&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the row ID of the row that the
-  &lt;code&gt;SQLResultSet&lt;/code&gt; object's SQL statement inserted into the
-  database, if the statement inserted a row. If the statement inserted
-  multiple rows, the ID of the last row must be the one returned. If
-  the statement did not insert a row, then the attribute must instead
-  raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-SQLResultSet-rowsAffected&quot;&gt;&lt;code&gt;rowsAffected&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the number of rows that were changed by the
-  SQL statement. If the statement did not affected any rows, then the
-  attribute must return zero. For &quot;SELECT&quot; statements, this returns
-  zero (querying the database doesn't affect any rows).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-SQLResultSet-rows&quot;&gt;&lt;code&gt;rows&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return a &lt;code&gt;SQLResultSetRowList&lt;/code&gt;
-  representing the rows returned, in the order returned by the
-  database. The same object must be returned each time. If no rows
-  were returned, then the object will be empty (its &lt;code
-  title=&quot;dom-SQLResultSetRowList-length&quot;&gt;length&lt;/code&gt; will be
-  zero).&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;SQLResultSetRowList&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;span title=&quot;dom-SQLResultSetRowList-length&quot;&gt;length&lt;/span&gt;;
-  getter &lt;span&gt;any&lt;/span&gt; &lt;span title=&quot;dom-SQLResultSetRowList-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
-};&lt;/pre&gt;
-
-  &lt;p class=&quot;note&quot;&gt;For the asynchronous API, implementors are
-  encouraged to prefetch all the data for
-  &lt;code&gt;SQLResultSetRowList&lt;/code&gt; objects when the object is
-  constructed (before the result set callback is invoked), rather than
-  on-demand, for better responsiveness. For the synchronous API, an
-  on-demand lazy evaluation implementation strategy is encouraged
-  instead, for better performance.&lt;/p&gt;
-
-  &lt;p&gt;&lt;code&gt;SQLResultSetRowList&lt;/code&gt; objects have a &lt;dfn
-  title=&quot;dom-SQLResultSetRowList-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-  attribute that must return the number of rows it represents (the
-  number of rows returned by the database). This is the &lt;var
-  title=&quot;dom-SQLResultSetRowList-length&quot;&gt;length&lt;/var&gt;.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Fetching the &lt;code
-  title=&quot;dom-SQLResultSetRowList-length&quot;&gt;length&lt;/code&gt; might be
-  expensive, and authors are thus encouraged to avoid using it (or
-  enumerating over the object, which implicitly uses it) where
-  possible.&lt;/p&gt;
-
-  &lt;p&gt;The object's &lt;span&gt;supported property indices&lt;/span&gt; are the
-  numbers in the range zero to &lt;span title=&quot;&quot;&gt;&lt;var
-  title=&quot;dom-SQLResultSetRowList-length&quot;&gt;length&lt;/var&gt;-1&lt;/span&gt;, unless
-  the &lt;var title=&quot;dom-SQLResultSetRowList-length&quot;&gt;length&lt;/var&gt; is
-  zero, in which case there are no &lt;span&gt;supported property
-  indices&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-SQLResultSetRowList-item&quot;&gt;&lt;code&gt;item(&lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; attribute must return the row
-  with the given index &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;. If there is no such
-  row, then the method must return null.&lt;/p&gt;
-
-  &lt;p&gt;Each row must be represented by a native ordered dictionary data
-  type. In the JavaScript binding, this must be &lt;code&gt;Object&lt;/code&gt;.
-  Each row object must have one property (or dictionary entry) per
-  column, with those properties enumerating in the order that these
-  columns were returned by the database. Each property must have the
-  name of the column and the value of the cell, as they were returned
-  by the database.&lt;/p&gt;
-
-
-  &lt;h5&gt;Errors and exceptions&lt;/h5&gt;
-
-  &lt;p&gt;Errors in the asynchronous database API are reported using
-  callbacks that have a &lt;code&gt;SQLError&lt;/code&gt; object as one of their
-  arguments.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;SQLError&lt;/dfn&gt; {
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-UNKNOWN&quot;&gt;UNKNOWN_ERR&lt;/span&gt; = 0;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-DATABASE&quot;&gt;DATABASE_ERR&lt;/span&gt; = 1;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-VERSION&quot;&gt;VERSION_ERR&lt;/span&gt; = 2;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-TOO_LARGE&quot;&gt;TOO_LARGE_ERR&lt;/span&gt; = 3;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-QUOTA&quot;&gt;QUOTA_ERR&lt;/span&gt; = 4;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-SYNTAX&quot;&gt;SYNTAX_ERR&lt;/span&gt; = 5;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-CONSTRAINT&quot;&gt;CONSTRAINT_ERR&lt;/span&gt; = 6;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-TIMEOUT&quot;&gt;TIMEOUT_ERR&lt;/span&gt; = 7;
-  readonly attribute unsigned short &lt;span title=&quot;dom-SQLError-code&quot;&gt;code&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-SQLError-message&quot;&gt;message&lt;/span&gt;;
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-SQLError-code&quot;&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute must return the most appropriate code from the table
-  below.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-SQLError-message&quot;&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute must return an error message describing the error
-  encountered. The message should be localized to the user's
-  language.&lt;/p&gt;
-
-  &lt;hr&gt;
-
-  &lt;p&gt;Errors in the synchronous database API are reported using
-  &lt;code&gt;SQLException&lt;/code&gt; exceptions:&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;exception &lt;dfn&gt;SQLException&lt;/dfn&gt; {
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-UNKNOWN&quot;&gt;UNKNOWN_ERR&lt;/span&gt; = 0;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-DATABASE&quot;&gt;DATABASE_ERR&lt;/span&gt; = 1;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-VERSION&quot;&gt;VERSION_ERR&lt;/span&gt; = 2;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-TOO_LARGE&quot;&gt;TOO_LARGE_ERR&lt;/span&gt; = 3;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-QUOTA&quot;&gt;QUOTA_ERR&lt;/span&gt; = 4;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-SYNTAX&quot;&gt;SYNTAX_ERR&lt;/span&gt; = 5;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-CONSTRAINT&quot;&gt;CONSTRAINT_ERR&lt;/span&gt; = 6;
-  const unsigned short &lt;span title=&quot;dom-SQLException-code-TIMEOUT&quot;&gt;TIMEOUT_ERR&lt;/span&gt; = 7;
-  unsigned short &lt;span title=&quot;dom-SQLException-code&quot;&gt;code&lt;/span&gt;;
-  DOMString &lt;span title=&quot;dom-SQLException-message&quot;&gt;message&lt;/span&gt;;
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-SQLException-code&quot;&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute must return the most appropriate code from the table
-  below.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-SQLException-message&quot;&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute must return an error message describing the error
-  encountered. The message should be localized to the user's
-  language.&lt;/p&gt;
-
-  &lt;hr&gt;
-
-  &lt;p&gt;The error codes are as follows:&lt;/p&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt;
-     &lt;th&gt;Constant
-     &lt;th&gt;Code
-     &lt;th&gt;Situation
-   &lt;tbody&gt;
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-SQLException-code-UNKNOWN&quot;&gt;&lt;code&gt;UNKNOWN_ERR&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-sqlerror-code-0&quot;&gt;0&lt;/dfn&gt;
-     &lt;td&gt;The transaction failed for reasons unrelated to the database
-     itself and not covered by any other error code.
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-SQLException-code-DATABASE&quot;&gt;&lt;code&gt;DATABASE_ERR&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-sqlerror-code-1&quot;&gt;1&lt;/dfn&gt;
-     &lt;td&gt;The statement failed for database reasons not covered by any
-     other error code.
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-SQLException-code-VERSION&quot;&gt;&lt;code&gt;VERSION_ERR&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-sqlerror-code-2&quot;&gt;2&lt;/dfn&gt;
-     &lt;td&gt;The operation failed because the actual database version was
-     not what it should be. For example, a statement found that the
-     actual database version no longer matched the &lt;span
-     title=&quot;concept-database-expected-version&quot;&gt;expected version&lt;/span&gt;
-     of the &lt;code&gt;Database&lt;/code&gt; or &lt;code&gt;DatabaseSync&lt;/code&gt; object,
-     or the &lt;code
-     title=&quot;dom-database-changeversion&quot;&gt;Database.changeVersion()&lt;/code&gt;
-     or &lt;code
-     title=&quot;dom-database-sync-changeversion&quot;&gt;DatabaseSync.changeVersion()&lt;/code&gt;
-     methods were passed a version that doesn't match the actual
-     database version.
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-SQLException-code-TOO_LARGE&quot;&gt;&lt;code&gt;TOO_LARGE_ERR&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-sqlerror-code-3&quot;&gt;3&lt;/dfn&gt;
-     &lt;td&gt;The statement failed because the data returned from the
-     database was too large. The SQL &quot;LIMIT&quot; modifier might be useful
-     to reduce the size of the result set.
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-SQLException-code-QUOTA&quot;&gt;&lt;code&gt;QUOTA_ERR&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-sqlerror-code-4&quot;&gt;4&lt;/dfn&gt;
-     &lt;td&gt;The statement failed because there was not enough remaining
-     storage space, or the storage quota was reached and the user
-     declined to give more space to the database.
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-SQLException-code-SYNTAX&quot;&gt;&lt;code&gt;SYNTAX_ERR&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-sqlerror-code-5&quot;&gt;5&lt;/dfn&gt;
-     &lt;td&gt;The statement failed because of a syntax error, or the number
-     of arguments did not match the number of &lt;code title=&quot;&quot;&gt;?&lt;/code&gt;
-     placeholders in the statement, or the statement tried to use a
-     statement that is not allowed, such as &lt;code
-     title=&quot;&quot;&gt;BEGIN&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;COMMIT&lt;/code&gt;, or &lt;code
-     title=&quot;&quot;&gt;ROLLBACK&lt;/code&gt;, or the statement tried to use a verb
-     that could modify the database but the transaction was read-only.
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-SQLException-code-CONSTRAINT&quot;&gt;&lt;code&gt;CONSTRAINT_ERR&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-sqlerror-code-6&quot;&gt;6&lt;/dfn&gt;
-     &lt;td&gt;An &lt;code title=&quot;&quot;&gt;INSERT&lt;/code&gt;, &lt;code
-     title=&quot;&quot;&gt;UPDATE&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;REPLACE&lt;/code&gt;
-     statement failed due to a constraint failure. For example,
-     because a row was being inserted and the value given for the
-     primary key column duplicated the value of an existing row.
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-SQLException-code-TIMEOUT&quot;&gt;&lt;code&gt;TIMEOUT_ERR&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-sqlerror-code-7&quot;&gt;7&lt;/dfn&gt;
-     &lt;td&gt;A lock for the transaction could not be obtained in a
-     reasonable time.
-
-  &lt;/table&gt;
-
-
-  &lt;h4&gt;Web SQL&lt;/h4&gt;
-
-  &lt;p&gt;User agents must implement the SQL dialect supported by Sqlite 3.6.19.&lt;/p&gt;
-
-  &lt;p&gt;When converting bound arguments to SQL data types, the JavaScript
-  ToPrimitive abstract operation must be applied to obtain the raw
-  value to be processed. &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;!--END database--&gt;
-
-  &lt;!-- the next &lt;h3&gt; section needs reworking if we re-add database to complete --&gt;
-
-  &lt;/div&gt;&lt;!--data-component--&gt;
-
-
-  &lt;h3&gt;Common concerns&lt;/h3&gt;
-
-  &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-
-  &lt;div data-component=&quot;Web Storage (editor: Ian Hickson)&quot;&gt;
-
-  &lt;!--START database--&gt;
-  &lt;!--START storage--&gt;
-
   &lt;h4&gt;Disk space&lt;/h4&gt;
 
   &lt;p&gt;User agents should limit the total amount of space allowed for
-  &lt;!--END database--&gt;
-  storage areas.
-  &lt;!--END storage--&gt;
-  &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-  &lt;!--START database--&gt;
-  databases.
-  &lt;!--END database--&gt;
-  these storage features.
-  &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-  &lt;!--START database--&gt;
-  &lt;!--START storage--&gt;
-  &lt;/p&gt;
+  storage areas.&lt;/p&gt;
 
   &lt;p&gt;User agents should guard against sites storing data under the
   origins other affiliated sites, e.g. storing up to the limit in
@@ -85723,11 +84571,9 @@
   &lt;p&gt;User agents should allow users to see how much space each domain
   is using.&lt;/p&gt;
 
-  &lt;!--END database--&gt;
   &lt;!--&lt;p&gt;If the storage area space limit is reached during a &lt;code
   title=&quot;dom-Storage-setItem&quot;&gt;setItem()&lt;/code&gt; call, the method will
   raise an exception.&lt;/p&gt;--&gt;
-  &lt;!--START database--&gt;
 
   &lt;p&gt;A mostly arbitrary limit of five megabytes per
   &lt;span&gt;origin&lt;/span&gt; is recommended. Implementation feedback is
@@ -85741,23 +84587,13 @@
 
   &lt;p&gt;A third-party advertiser (or any entity capable of getting
   content distributed to multiple sites) could use a unique identifier
-  stored in its
-  &lt;!--END database--&gt;
-  local storage area
-  &lt;!--END storage--&gt;
-  &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-  or its
-  &lt;!--START database--&gt;
-  client-side databases
-  &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-  &lt;!--START storage--&gt;
-  to track a user across multiple sessions, building a profile of the
-  user's interests to allow for highly targeted advertising. In
-  conjunction with a site that is aware of the user's real identity
-  (for example an e-commerce site that requires authenticated
-  credentials), this could allow oppressive groups to target
-  individuals with greater accuracy than in a world with purely
-  anonymous Web usage.&lt;/p&gt;
+  stored in its local storage area to track a user across multiple
+  sessions, building a profile of the user's interests to allow for
+  highly targeted advertising. In conjunction with a site that is
+  aware of the user's real identity (for example an e-commerce site
+  that requires authenticated credentials), this could allow
+  oppressive groups to target individuals with greater accuracy than
+  in a world with purely anonymous Web usage.&lt;/p&gt;
 
   &lt;p&gt;There are a number of techniques that can be used to mitigate the
   risk of user tracking:&lt;/p&gt;
@@ -85767,19 +84603,11 @@
    &lt;dt&gt;Blocking third-party storage&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;User agents may restrict access to
-    &lt;!--END database--&gt;
-    the &lt;code title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/code&gt; objects
-    &lt;!--END storage--&gt;
-    &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-    and
-    &lt;!--START database--&gt;
-    the database objects
-    &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-    &lt;!--START storage--&gt;
-    to scripts originating at the domain of the top-level document of
-    the &lt;span&gt;browsing context&lt;/span&gt;, for instance denying access to
-    the API for pages from other domains running in
+    &lt;p&gt;User agents may restrict access to the &lt;code
+    title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/code&gt; objects to scripts
+    originating at the domain of the top-level document of the
+    &lt;span&gt;browsing context&lt;/span&gt;, for instance denying access to the
+    API for pages from other domains running in
     &lt;code&gt;iframe&lt;/code&gt;s.&lt;/p&gt;
 
    &lt;/dd&gt;
@@ -85790,12 +84618,10 @@
     &lt;p&gt;User agents may, if so configured by the user, automatically
     delete stored data after a period of time.&lt;/p&gt;
 
-    &lt;!--END database--&gt;
     &lt;p&gt;For example, a user agent could be configured to treat
     third-party local storage areas as session-only storage, deleting
     the data once the user had closed all the &lt;span title=&quot;browsing
     context&quot;&gt;browsing contexts&lt;/span&gt; that could access it.&lt;/p&gt;
-    &lt;!--START database--&gt;
 
     &lt;p&gt;This can restrict the ability of a site to track a user, as the
     site would then only be able to track the user across multiple
@@ -85807,10 +84633,8 @@
     risk, if the user does not fully understand the implications of
     data expiration.&lt;/p&gt;
 
-    &lt;!--END database--&gt;
     &lt;!--v2 consider adding an explicit way for sites to state when
     data should expire, as in  localStorage.expireData(365); --&gt;
-    &lt;!--START database--&gt;
 
    &lt;/dd&gt;
 
@@ -85818,53 +84642,24 @@
    &lt;dd&gt;
 
     &lt;p&gt;If users attempt to protect their privacy by clearing cookies
-    without also clearing data stored in the
-    &lt;!--END database--&gt;
-    local storage area,
-    &lt;!--END storage--&gt;
-    &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-    &lt;!--START database--&gt;
-    relevant databases,
-    &lt;!--END database--&gt;
-    local storage area and relevant databases,
-    &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-    &lt;!--START database--&gt;
-    &lt;!--START storage--&gt;
-    sites can defeat those attempts by using the two features as
-    redundant backup for each other. User agents should present the
-    interfaces for clearing these in a way that helps users to
-    understand this possibility and enables them to delete data in all
-    persistent storage features simultaneously. &lt;a
+    without also clearing data stored in the local storage area, sites
+    can defeat those attempts by using the two features as redundant
+    backup for each other. User agents should present the interfaces
+    for clearing these in a way that helps users to understand this
+    possibility and enables them to delete data in all persistent
+    storage features simultaneously. &lt;a
     href=&quot;#refsCOOKIES&quot;&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;Site-specific white-listing of access to
-   &lt;!--END database--&gt;
-   local storage areas
-   &lt;!--END storage--&gt;
-   &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-   and
-   &lt;!--START database--&gt;
-   databases
-   &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-   &lt;!--START storage--&gt;
-   &lt;/dt&gt;
+   &lt;dt&gt;Site-specific white-listing of access to local storage
+   areas&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;!--END database--&gt;
     &lt;p&gt;User agents may allow sites to access session storage areas in
     an unrestricted manner, but require the user to authorize access
     to local storage areas.&lt;/p&gt;
-    &lt;!--END storage--&gt;
-    &lt;!--END complete--&gt;&lt;!--END epub--&gt;
 
-    &lt;!--START database--&gt;
-    &lt;p&gt;User agents may require the user to authorize access to
-    databases before a site can use the feature.&lt;/p&gt;
-    &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-    &lt;!--START storage--&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;Origin-tracking of stored data&lt;/dt&gt;
@@ -85935,39 +84730,17 @@
   from that domain. To mitigate this, pages can use TLS. Pages using
   TLS can be sure that only pages using TLS that have certificates
   identifying them as being from the same domain can access their
-  &lt;!--END database--&gt;
-  storage areas.
-  &lt;!--END storage--&gt;
-  &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-  &lt;!--START database--&gt;
-  databases.
-  &lt;!--END database--&gt;
-  storage areas and databases.
-  &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-  &lt;!--START database--&gt;
-  &lt;!--START storage--&gt;
-  &lt;/p&gt;
+  storage areas.&lt;/p&gt;
 
 
   &lt;h5&gt;Cross-directory attacks&lt;/h5&gt;
 
   &lt;p&gt;Different authors sharing one host name, for example users
-  hosting content on &lt;code&gt;geocities.com&lt;/code&gt;, all share one
-  &lt;!--END database--&gt;
-  local storage object.
-  &lt;!--END storage--&gt;
-  &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-  &lt;!--START database--&gt;
-  set of databases.
-  &lt;!--END database--&gt;
-  common set of storage objects and databases.
-  &lt;!--START complete--&gt;&lt;!--START epub--&gt;
-  &lt;!--START database--&gt;
-  &lt;!--START storage--&gt;
-  There is no feature to restrict the access by pathname. Authors on
-  shared hosts are therefore recommended to avoid using these
-  features, as it would be trivial for other authors to read the data
-  and overwrite it.&lt;/p&gt;
+  hosting content on &lt;code&gt;geocities.com&lt;/code&gt;, all share one local
+  storage object. There is no feature to restrict the access by
+  pathname. Authors on shared hosts are therefore recommended to avoid
+  using these features, as it would be trivial for other authors to
+  read the data and overwrite it.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Even if a path-restriction feature was made
   available, the usual DOM scripting security model would make it
@@ -85999,34 +84772,7 @@
   &lt;p&gt;Thus, strictly following the &lt;span&gt;origin&lt;/span&gt; model described
   in this specification is important for user security.&lt;/p&gt;
 
-
-  &lt;!--END storage--&gt;
-  &lt;!--END complete--&gt;&lt;!--END epub--&gt;
-
-  &lt;h5&gt;SQL and user agents&lt;/h5&gt;
-
-  &lt;p&gt;User agent implementors are strongly encouraged to audit all
-  their supported SQL statements for security implications. For
-  example, &lt;code title=&quot;&quot;&gt;LOAD DATA INFILE&lt;/code&gt; is likely to pose
-  security risks and there is little reason to support it.&lt;/p&gt;
-
-  &lt;p&gt;In general, it is recommended that user agents not support
-  features that control how databases are stored on disk. For example,
-  there is little reason to allow Web authors to control the character
-  encoding used in the disk representation of the data, as all data in
-  JavaScript is implicitly UTF-16.&lt;/p&gt;
-
-
-  &lt;h5&gt;SQL injection&lt;/h5&gt;
-
-  &lt;p&gt;Authors are strongly recommended to make use of the &lt;code
-  title=&quot;&quot;&gt;?&lt;/code&gt; placeholder feature of the &lt;code
-  title=&quot;dom-sqltransaction-executeSql&quot;&gt;executeSql()&lt;/code&gt; method,
-  and to never construct SQL statements on the fly.&lt;/p&gt;
-
-&lt;!--END database--&gt;
-
-&lt;!--START complete--&gt;&lt;!--START epub--&gt;
+&lt;!--END storage--&gt;
 &lt;!--FIXUP complete +1--&gt;
 
   &lt;/div&gt;&lt;!--data-component--&gt;
@@ -106762,7 +105508,7 @@
 
 &lt;!--START complete--&gt;&lt;!--START epub--&gt;&lt;!--START html--&gt;
 &lt;!--START html-device--&gt;&lt;!--START microdata--&gt;&lt;!--START 2dcontext--&gt;&lt;!--START postmsg--&gt;&lt;!--START w3c-html--&gt;
-&lt;!--START websocket-api--&gt;&lt;!--START storage--&gt;&lt;!--START database--&gt;&lt;!--START eventsource--&gt;&lt;!--START workers--&gt;
+&lt;!--START websocket-api--&gt;&lt;!--START storage--&gt;&lt;!--START eventsource--&gt;&lt;!--START workers--&gt;
 &lt;!--START whatwg-workers--&gt;&lt;!--START vocabs--&gt;&lt;!--START vCard--&gt;&lt;!--START vEvent--&gt;&lt;!--START work--&gt;
 &lt;!--START webvtt--&gt;
 
@@ -107042,9 +105788,9 @@
 
    &lt;dt id=&quot;refsHTML5&quot;&gt;[HTML5]&lt;/dt&gt;
    &lt;dd&gt;
-&lt;!--END vocabs--&gt;&lt;!--END vCard--&gt;&lt;!--END vEvent--&gt;&lt;!--END work--&gt;&lt;!--END websocket-api--&gt;&lt;!--END storage--&gt;&lt;!--END database--&gt;&lt;!--END eventsource--&gt;&lt;!--END whatwg-workers--&gt;&lt;!--END workers--&gt;&lt;!--END html-device--&gt;&lt;!--YYYEND microdata--&gt;&lt;!--END 2dcontext--&gt;&lt;!--END postmsg--&gt;&lt;!--END w3c-html--&gt;
+&lt;!--END vocabs--&gt;&lt;!--END vCard--&gt;&lt;!--END vEvent--&gt;&lt;!--END work--&gt;&lt;!--END websocket-api--&gt;&lt;!--END storage--&gt;&lt;!--END eventsource--&gt;&lt;!--END whatwg-workers--&gt;&lt;!--END workers--&gt;&lt;!--END html-device--&gt;&lt;!--YYYEND microdata--&gt;&lt;!--END 2dcontext--&gt;&lt;!--END postmsg--&gt;&lt;!--END w3c-html--&gt;
    (Non-normative)
-&lt;!--START html-device--&gt;&lt;!--YYYSTART microdata--&gt;&lt;!--START 2dcontext--&gt;&lt;!--START postmsg--&gt;&lt;!--START w3c-html--&gt;&lt;!--START websocket-api--&gt;&lt;!--START storage--&gt;&lt;!--START database--&gt;&lt;!--START eventsource--&gt;&lt;!--START whatwg-workers--&gt;&lt;!--START workers--&gt;&lt;!--START vocabs--&gt;&lt;!--START vCard--&gt;&lt;!--START vEvent--&gt;&lt;!--START work--&gt;
+&lt;!--START html-device--&gt;&lt;!--YYYSTART microdata--&gt;&lt;!--START 2dcontext--&gt;&lt;!--START postmsg--&gt;&lt;!--START w3c-html--&gt;&lt;!--START websocket-api--&gt;&lt;!--START storage--&gt;&lt;!--START eventsource--&gt;&lt;!--START whatwg-workers--&gt;&lt;!--START workers--&gt;&lt;!--START vocabs--&gt;&lt;!--START vCard--&gt;&lt;!--START vEvent--&gt;&lt;!--START work--&gt;
    &lt;cite&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/html5/spec/">http://dev.w3.org/html5/spec/</A>&quot;&gt;HTML5&lt;/a&gt;&lt;/cite&gt;,
    I. Hickson. W3C.&lt;/dd&gt;
 
@@ -107398,9 +106144,6 @@
    &lt;dd&gt;&lt;cite&gt;JIS X0208: 7-bit and 8-bit double byte coded KANJI sets
    for information interchange&lt;/cite&gt;. Japanese Industrial Standards Committee.&lt;/dd&gt;
 
-   &lt;dt id=&quot;refsSQL&quot;&gt;[SQL]&lt;/dt&gt;
-   &lt;dd&gt;The precise dialect has not yet been specified.&lt;/dd&gt;
-
    &lt;dt id=&quot;refsSRGB&quot;&gt;[SRGB]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite lang=&quot;en-GB&quot;&gt;&lt;a
    href=&quot;<A HREF="http://webstore.iec.ch/webstore/webstore.nsf/artnum/025408!OpenDocument&amp;amp;Click=">http://webstore.iec.ch/webstore/webstore.nsf/artnum/025408!OpenDocument&amp;Click=</A>&quot;&gt;IEC
@@ -107493,10 +106236,6 @@
    &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/html5/websockets/">http://dev.w3.org/html5/websockets/</A>&quot;&gt;The WebSocket
    API&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
 
-   &lt;dt id=&quot;refsWEBSQL&quot;&gt;[WEBSQL]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/html5/webdatabase/">http://dev.w3.org/html5/webdatabase/</A>&quot;&gt;Web SQL
-   Database&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
-
    &lt;dt id=&quot;refsWEBSTORAGE&quot;&gt;[WEBSTORAGE]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/html5/webstorage/">http://dev.w3.org/html5/webstorage/</A>&quot;&gt;Web
    Storage&lt;/a&gt;&lt;/cite&gt;, I. Hickson. W3C.&lt;/dd&gt;
@@ -107619,7 +106358,7 @@
 
 &lt;!--END webvtt--&gt;
 &lt;!--END whatwg-workers--&gt;&lt;!--END vocabs--&gt;&lt;!--END vCard--&gt;&lt;!--END vEvent--&gt;&lt;!--END work--&gt;
-&lt;!--END websocket-api--&gt;&lt;!--END storage--&gt;&lt;!--END database--&gt;&lt;!--END eventsource--&gt;&lt;!--END workers--&gt;
+&lt;!--END websocket-api--&gt;&lt;!--END storage--&gt;&lt;!--END eventsource--&gt;&lt;!--END workers--&gt;
 &lt;!--END html-device--&gt;&lt;!--END microdata--&gt;&lt;!--END 2dcontext--&gt;&lt;!--END postmsg--&gt;&lt;!--END w3c-html--&gt;
 
 &lt;!--START w3c-html--&gt;


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012602.html">[html5] r5735 - [e] (0) Remove UndoManager from W3C HTML5 spec	since it's not really fully baked [...]
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12603">[ date ]</a>
              <a href="thread.html#12603">[ thread ]</a>
              <a href="subject.html#12603">[ subject ]</a>
              <a href="author.html#12603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
