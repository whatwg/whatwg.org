<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r4465 - [giow] (2) drawFocusRing() support Fixing	http://www.w3.org/Bugs/Public/show_bug [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4465%20-%20%5Bgiow%5D%20%282%29%20drawFocusRing%28%29%20support%20Fixing%0A%09http%3A//www.w3.org/Bugs/Public/show_bug%20%5B...%5D&In-Reply-To=%3C20100105025433.02A241389D7%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011333.html">
   <LINK REL="Next"  HREF="011335.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r4465 - [giow] (2) drawFocusRing() support Fixing	http://www.w3.org/Bugs/Public/show_bug [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4465%20-%20%5Bgiow%5D%20%282%29%20drawFocusRing%28%29%20support%20Fixing%0A%09http%3A//www.w3.org/Bugs/Public/show_bug%20%5B...%5D&In-Reply-To=%3C20100105025433.02A241389D7%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r4465 - [giow] (2) drawFocusRing() support Fixing	http://www.w3.org/Bugs/Public/show_bug [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Jan  4 18:54:33 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="011333.html">[html5] r4464 - [e] (0) Make informative text catch up to the new	reality of how .load() works. [...]
</A></li>
        <LI>Next message: <A HREF="011335.html">[html5] r4466 - [e] (0) mention that the Atom conversion step can	result in non-conforming Atom [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11334">[ date ]</a>
              <a href="thread.html#11334">[ thread ]</a>
              <a href="subject.html#11334">[ subject ]</a>
              <a href="author.html#11334">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-01-04 18:54:29 -0800 (Mon, 04 Jan 2010)
New Revision: 4465

Modified:
   complete.html
   index
   source
Log:
[giow] (2) drawFocusRing() support
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=8210">http://www.w3.org/Bugs/Public/show_bug.cgi?id=8210</A>

Modified: complete.html
===================================================================
--- complete.html	2010-01-05 00:58:35 UTC (rev 4464)
+++ complete.html	2010-01-05 02:54:29 UTC (rev 4465)
@@ -462,11 +462,12 @@
          &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#simple-shapes-(rectangles)&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Simple shapes (rectangles)&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#complex-shapes-(paths)&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Complex shapes (paths)&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#text&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Text&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#focus-management-0&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Focus management&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#text&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Text&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -24521,7 +24522,7 @@
 
 
   &lt;h5 id=the-2d-context&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;The 2D context&lt;/h5&gt;
-  &lt;!-- v2: we're on v3. suggestions for next version are marked v4. --&gt;
+  &lt;!-- v2: we're on v4. suggestions for next version are marked v5. --&gt;
 
   &lt;p&gt;When the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt;
   method of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is invoked with &lt;dfn id=canvas-context-2d title=canvas-context-2d&gt;&lt;code&gt;2d&lt;/code&gt;&lt;/dfn&gt; as the argument, a
@@ -24549,7 +24550,7 @@
   void &lt;a href=#dom-context-2d-save title=dom-context-2d-save&gt;save&lt;/a&gt;(); // push state on state stack
   void &lt;a href=#dom-context-2d-restore title=dom-context-2d-restore&gt;restore&lt;/a&gt;(); // pop state stack and restore state
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
           attribute boolean &lt;span title=&quot;dom-context-2d-forceHighQuality&quot;&gt;forceHighQuality&lt;/span&gt; // (default false)
   // when enabled, it would prevent the UA from falling back on lower-quality but faster rendering routines
   // useful e.g. for when an image manipulation app uses &lt;canvas&gt; both for UI previews and the actual work
@@ -24561,7 +24562,7 @@
   void &lt;a href=#dom-context-2d-transform title=dom-context-2d-transform&gt;transform&lt;/a&gt;(in float m11, in float m12, in float m21, in float m22, in float dx, in float dy);
   void &lt;a href=#dom-context-2d-settransform title=dom-context-2d-setTransform&gt;setTransform&lt;/a&gt;(in float m11, in float m12, in float m21, in float m22, in float dx, in float dy);
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
   void skew(...);
   void reflect(...); // or mirror(...)
 --&gt;
@@ -24569,7 +24570,7 @@
            attribute float &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;globalAlpha&lt;/a&gt;; // (default 1.0)
            attribute DOMString &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;globalCompositeOperation&lt;/a&gt;; // (default source-over)
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
   - turning off antialiasing to avoid seams when patterns are painted next to each other
     - might be better to overdraw?
     - might be better to just draw at a higher res then downsample, like for 3d?
@@ -24618,12 +24619,15 @@
   void &lt;a href=#dom-context-2d-clip title=dom-context-2d-clip&gt;clip&lt;/a&gt;();
   boolean &lt;a href=#dom-context-2d-ispointinpath title=dom-context-2d-isPointInPath&gt;isPointInPath&lt;/a&gt;(in float x, in float y);
 
+  // focus management
+  boolean &lt;a href=#dom-context-2d-drawfocusring title=dom-context-2d-drawFocusRing&gt;drawFocusRing&lt;/a&gt;(in &lt;span&gt;Element&lt;/span&gt; element, in float xCaret, in float yCaret, in optional canDrawCustom);
+
   // text
            attribute DOMString &lt;a href=#dom-context-2d-font title=dom-context-2d-font&gt;font&lt;/a&gt;; // (default 10px sans-serif)
            attribute DOMString &lt;a href=#dom-context-2d-textalign title=dom-context-2d-textAlign&gt;textAlign&lt;/a&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
            attribute DOMString &lt;a href=#dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;textBaseline&lt;/a&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
   void &lt;a href=#dom-context-2d-filltext title=dom-context-2d-fillText&gt;fillText&lt;/a&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);
-  void &lt;a href=#dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;strokeText&lt;/a&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);&lt;!-- v4DVT
+  void &lt;a href=#dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;strokeText&lt;/a&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);&lt;!-- v5DVT
   void &lt;span title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxHeight);
   void &lt;span title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxHeight); --&gt;
   &lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt; &lt;a href=#dom-context-2d-measuretext title=dom-context-2d-measureText&gt;measureText&lt;/a&gt;(in DOMString text);
@@ -24754,7 +24758,7 @@
   drawing state it describes. If there is no saved state, the method
   must do nothing.&lt;/p&gt;
 
-  &lt;!-- v4
+  &lt;!-- v5
 idea from Mihai:
 &gt; 5. Drawing states should be saveable with IDs, and for easier restoring.
 &gt;
@@ -25068,7 +25072,7 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;!-- v4 feature requests:
+  &lt;!-- v5 feature requests:
 
    * Getting and setting colours by component to bypass the CSS value parsing.
 
@@ -25390,7 +25394,7 @@
   &lt;!-- drawImage() has an equivalent paragraph --&gt;
 
   &lt;!--
-   Requests for v4 features:
+   Requests for v5 features:
     * apply transforms to patterns, so you don't have to create
       transformed patterns manually by rendering them to an off-screen
       canvas then using that canvas as the pattern.
@@ -25550,7 +25554,7 @@
   initially have the value &lt;code&gt;10.0&lt;/code&gt;.&lt;/p&gt;
 
   &lt;!--
-v4: dashed lines have been requested. Philip Taylor provides these
+v5: dashed lines have been requested. Philip Taylor provides these
 notes on what would need to be defined for dashed lines:
 &gt; I don't think it's entirely trivial to add, to the detail that's
 &gt; necessary in a specification. The common graphics APIs (at least
@@ -26062,7 +26066,7 @@
   a new subpath with the point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the subpath.&lt;/p&gt;
 
 
-  &lt;!-- v4 feature request:
+  &lt;!-- v5 feature request:
         * points as a primitive shape
           <A HREF="http://home.comcast.net/~urbanjost/canvas/vogle4.html">http://home.comcast.net/~urbanjost/canvas/vogle4.html</A>
   --&gt;
@@ -26114,7 +26118,7 @@
   to the rectangle with the top left corner at (0,0) and the width and
   height of the coordinate space.&lt;/p&gt;
 
-  &lt;!-- v4
+  &lt;!-- v5
    Jordan OSETE suggests:
     * support ways of extending the clipping region (union instead of intersection)
        - also &quot;add&quot;, &quot;subtract&quot;, &quot;replace&quot;, &quot;intersect&quot; and &quot;xor&quot;
@@ -26134,8 +26138,152 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=text&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Text&lt;/h6&gt; &lt;!-- a v3 feature --&gt;
+  &lt;h6 id=focus-management-0&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Focus management&lt;/h6&gt; &lt;!-- a v4 feature --&gt;
 
+  &lt;p&gt;When a canvas is interactive, authors should include focusable
+  elements in the element's fallback content corresponding to each
+  focusable part of the canvas.&lt;/p&gt;
+
+  &lt;p&gt;To indicate which focusable part of the canvas is currently
+  focused, authors should use the &lt;code title=dom-context-2d-drawFocusRing&gt;&lt;a href=#dom-context-2d-drawfocusring&gt;drawFocusRing()&lt;/a&gt;&lt;/code&gt; method,
+  passing it the element for which a ring is being drawn. This method
+  only draws the focus ring if the element is focused, so that it can
+  simply be called whenever drawing the element, without checking
+  whether the element is focused or not first. The position of the
+  center of the control, or of the editing caret if the control has
+  one, should be given in the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; arguments.&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;shouldDraw&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-drawFocusRing&gt;&lt;a href=#dom-context-2d-drawfocusring&gt;drawFocusRing&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;element&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, [ &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the given element is focused, draws a focus ring around the
+    current path, following the platform conventions for focus
+    rings. The given coordinate is used if the user's attention needs
+    to be brought to a particular position (e.g. if a magnifier is
+    following the editing caret in a text field).&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is true, then
+    the focus ring is only drawn if the user has configured his system
+    to draw focus rings in a particular manner. (For example, high
+    contrast focus rings.)&lt;/p&gt;
+
+    &lt;p&gt;Returns true if the given element is focused, the &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is true, and the user has
+    not configured his system to draw focus rings in a particular
+    manner. Otherwise, returns false.&lt;/p&gt;
+
+    &lt;p&gt;When the method returns true, the author is expected to
+    manually draw a focus ring.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-drawfocusring title=dom-context-2d-drawFocusRing&gt;&lt;code&gt;drawFocusRing(&lt;var title=&quot;&quot;&gt;element&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, [&lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt;])&lt;/code&gt;&lt;/dfn&gt;
+  method, when invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;element&lt;/var&gt; is not focused or is not a
+   descendant of the element with whose context the method is
+   associated, then return false and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform the given point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) according to the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+   matrix&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, inform the user that the focus is at the given
+   (transformed) coordinate on the canvas. (For example, this could
+   involve moving the user's magnification tool.)&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the user has requested the user of particular focus rings
+    (e.g. high-contrast focus rings), or if the &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is absent or false, then
+    draw a focus ring of the appropriate style along the path,
+    following platform conventions, return false, and abort these
+    steps.&lt;/p&gt;
+
+    &lt;p&gt;The focus ring should not be subject to the &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, the &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, or the &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
+    operators&lt;/a&gt;, but &lt;em&gt;should&lt;/em&gt; be subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping region&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return true.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;This &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has a couple of checkboxes:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;canvas height=400 width=750&gt;
+ &lt;label&gt;&lt;input type=checkbox id=showA&gt; Show As&lt;/label&gt;
+ &lt;label&gt;&lt;input type=checkbox id=showB&gt; Show Bs&lt;/label&gt;
+ &lt;!-- ... --&gt;
+&lt;/canvas&gt;
+&lt;script&gt;
+ function drawCheckbox(context, element, x, y) {
+   context.save();
+   context.font = '10px sans-serif';
+   context.textAlign = 'left';
+   context.textBaseline = 'middle';
+   var metrics = context.measureText(element.labels[0].textContent);
+   context.beginPath();
+   context.strokeStyle = 'black';
+   context.rect(x-5, y-5, 10, 10);
+   context.stroke();
+   if (element.checked) {
+     context.fillStyle = 'black';
+     context.fill();
+   }
+   context.fillText(element.labels[0].textContent, x+5, y);
+   context.beginPath();
+   context.rect(x-7, y-7, 12 + metrics.width+2, 14);
+   if (context.drawFocusRing(element, x, y, true)) {
+     context.strokeStyle = 'silver';
+     context.stroke();
+   }
+   context.restore();
+ }
+ function drawBase() { /* ... */ }
+ function drawAs() { /* ... */ }
+ function drawBs() { /* ... */ }
+ function redraw() {
+   var canvas = document.getElementsByTagName('canvas')[0];
+   var context = canvas.getContext('2d');
+   context.clearRect(0, 0, canvas.width, canvas.height);
+   drawCheckbox(context, document.getElementById('showA'), 20, 40);
+   drawCheckbox(context, document.getElementById('showB'), 20, 60);
+   drawBase();
+   if (document.getElementById('showA').checked)
+     drawAs();
+   if (document.getElementById('showB').checked)
+     drawBs();
+ }
+ function processClick(event) {
+   var canvas = document.getElementsByTagName('canvas')[0];
+   var context = canvas.getContext('2d');
+   var x = event.clientX - canvas.offsetLeft;
+   var y = event.clientY - canvas.offsetTop;
+   drawCheckbox(context, document.getElementById('showA'), 20, 40);
+   if (context.isPointInPath(x, y))
+     document.getElementById('showA').checked = !(document.getElementById('showA').checked);
+   drawCheckbox(context, document.getElementById('showB'), 20, 60);
+   if (context.isPointInPath(x, y))
+     document.getElementById('showB').checked = !(document.getElementById('showB').checked);
+   redraw();
+ }
+ document.getElementsByTagName('canvas')[0].addEventListener('focus', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('blur', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('change', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('click', processClick, false);
+ redraw();
+&lt;/script&gt;&lt;/pre&gt;
+&lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/340">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/340</A> --&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h6 id=text&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Text&lt;/h6&gt; &lt;!-- a v3 feature --&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -26454,7 +26602,7 @@
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;!--v4DVT - this is commented out until CSS can get its act together
+  &lt;/ol&gt;&lt;!--v5DVT - this is commented out until CSS can get its act together
 enough to actual specify vertical text rendering (how long have we
 been waiting now?)
 
@@ -26600,7 +26748,7 @@
 
   &lt;/ol&gt;
 
-v4DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
+v5DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
   method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
   is invoked, the user agent must replace all the &lt;a href=#space-character title=&quot;space
   character&quot;&gt;space characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
@@ -26629,8 +26777,8 @@
   area of the canvas that the clipping region covers, not just the box
   given by the em square height and measured text width.&lt;/p&gt;
 
-  &lt;!-- v4: Drawing text along a given path --&gt;
-  &lt;!-- v4: Adding text to a path --&gt;
+  &lt;!-- v5: Drawing text along a given path --&gt;
+  &lt;!-- v5: Adding text to a path --&gt;
   &lt;!-- see also: <A HREF="http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules">http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules</A> --&gt;
   &lt;!-- see also: <A HREF="http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas">http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas</A> --&gt;
 
@@ -26643,7 +26791,7 @@
 
 
 
-  &lt;h6 id=images&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Images&lt;/h6&gt;
+  &lt;h6 id=images&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Images&lt;/h6&gt;
 
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
@@ -26767,7 +26915,7 @@
 
 
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
@@ -27135,7 +27283,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing model&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing model&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -27165,7 +27313,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 

Modified: index
===================================================================
--- index	2010-01-05 00:58:35 UTC (rev 4464)
+++ index	2010-01-05 02:54:29 UTC (rev 4465)
@@ -459,11 +459,12 @@
          &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#simple-shapes-(rectangles)&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Simple shapes (rectangles)&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#complex-shapes-(paths)&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Complex shapes (paths)&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#text&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Text&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#focus-management-0&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Focus management&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#text&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Text&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -24356,7 +24357,7 @@
 
 
   &lt;h5 id=the-2d-context&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;The 2D context&lt;/h5&gt;
-  &lt;!-- v2: we're on v3. suggestions for next version are marked v4. --&gt;
+  &lt;!-- v2: we're on v4. suggestions for next version are marked v5. --&gt;
 
   &lt;p&gt;When the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt;
   method of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is invoked with &lt;dfn id=canvas-context-2d title=canvas-context-2d&gt;&lt;code&gt;2d&lt;/code&gt;&lt;/dfn&gt; as the argument, a
@@ -24384,7 +24385,7 @@
   void &lt;a href=#dom-context-2d-save title=dom-context-2d-save&gt;save&lt;/a&gt;(); // push state on state stack
   void &lt;a href=#dom-context-2d-restore title=dom-context-2d-restore&gt;restore&lt;/a&gt;(); // pop state stack and restore state
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
           attribute boolean &lt;span title=&quot;dom-context-2d-forceHighQuality&quot;&gt;forceHighQuality&lt;/span&gt; // (default false)
   // when enabled, it would prevent the UA from falling back on lower-quality but faster rendering routines
   // useful e.g. for when an image manipulation app uses &lt;canvas&gt; both for UI previews and the actual work
@@ -24396,7 +24397,7 @@
   void &lt;a href=#dom-context-2d-transform title=dom-context-2d-transform&gt;transform&lt;/a&gt;(in float m11, in float m12, in float m21, in float m22, in float dx, in float dy);
   void &lt;a href=#dom-context-2d-settransform title=dom-context-2d-setTransform&gt;setTransform&lt;/a&gt;(in float m11, in float m12, in float m21, in float m22, in float dx, in float dy);
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
   void skew(...);
   void reflect(...); // or mirror(...)
 --&gt;
@@ -24404,7 +24405,7 @@
            attribute float &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;globalAlpha&lt;/a&gt;; // (default 1.0)
            attribute DOMString &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;globalCompositeOperation&lt;/a&gt;; // (default source-over)
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
   - turning off antialiasing to avoid seams when patterns are painted next to each other
     - might be better to overdraw?
     - might be better to just draw at a higher res then downsample, like for 3d?
@@ -24453,12 +24454,15 @@
   void &lt;a href=#dom-context-2d-clip title=dom-context-2d-clip&gt;clip&lt;/a&gt;();
   boolean &lt;a href=#dom-context-2d-ispointinpath title=dom-context-2d-isPointInPath&gt;isPointInPath&lt;/a&gt;(in float x, in float y);
 
+  // focus management
+  boolean &lt;a href=#dom-context-2d-drawfocusring title=dom-context-2d-drawFocusRing&gt;drawFocusRing&lt;/a&gt;(in &lt;span&gt;Element&lt;/span&gt; element, in float xCaret, in float yCaret, in optional canDrawCustom);
+
   // text
            attribute DOMString &lt;a href=#dom-context-2d-font title=dom-context-2d-font&gt;font&lt;/a&gt;; // (default 10px sans-serif)
            attribute DOMString &lt;a href=#dom-context-2d-textalign title=dom-context-2d-textAlign&gt;textAlign&lt;/a&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
            attribute DOMString &lt;a href=#dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;textBaseline&lt;/a&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
   void &lt;a href=#dom-context-2d-filltext title=dom-context-2d-fillText&gt;fillText&lt;/a&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);
-  void &lt;a href=#dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;strokeText&lt;/a&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);&lt;!-- v4DVT
+  void &lt;a href=#dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;strokeText&lt;/a&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);&lt;!-- v5DVT
   void &lt;span title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxHeight);
   void &lt;span title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxHeight); --&gt;
   &lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt; &lt;a href=#dom-context-2d-measuretext title=dom-context-2d-measureText&gt;measureText&lt;/a&gt;(in DOMString text);
@@ -24589,7 +24593,7 @@
   drawing state it describes. If there is no saved state, the method
   must do nothing.&lt;/p&gt;
 
-  &lt;!-- v4
+  &lt;!-- v5
 idea from Mihai:
 &gt; 5. Drawing states should be saveable with IDs, and for easier restoring.
 &gt;
@@ -24903,7 +24907,7 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;!-- v4 feature requests:
+  &lt;!-- v5 feature requests:
 
    * Getting and setting colours by component to bypass the CSS value parsing.
 
@@ -25225,7 +25229,7 @@
   &lt;!-- drawImage() has an equivalent paragraph --&gt;
 
   &lt;!--
-   Requests for v4 features:
+   Requests for v5 features:
     * apply transforms to patterns, so you don't have to create
       transformed patterns manually by rendering them to an off-screen
       canvas then using that canvas as the pattern.
@@ -25385,7 +25389,7 @@
   initially have the value &lt;code&gt;10.0&lt;/code&gt;.&lt;/p&gt;
 
   &lt;!--
-v4: dashed lines have been requested. Philip Taylor provides these
+v5: dashed lines have been requested. Philip Taylor provides these
 notes on what would need to be defined for dashed lines:
 &gt; I don't think it's entirely trivial to add, to the detail that's
 &gt; necessary in a specification. The common graphics APIs (at least
@@ -25897,7 +25901,7 @@
   a new subpath with the point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the subpath.&lt;/p&gt;
 
 
-  &lt;!-- v4 feature request:
+  &lt;!-- v5 feature request:
         * points as a primitive shape
           <A HREF="http://home.comcast.net/~urbanjost/canvas/vogle4.html">http://home.comcast.net/~urbanjost/canvas/vogle4.html</A>
   --&gt;
@@ -25949,7 +25953,7 @@
   to the rectangle with the top left corner at (0,0) and the width and
   height of the coordinate space.&lt;/p&gt;
 
-  &lt;!-- v4
+  &lt;!-- v5
    Jordan OSETE suggests:
     * support ways of extending the clipping region (union instead of intersection)
        - also &quot;add&quot;, &quot;subtract&quot;, &quot;replace&quot;, &quot;intersect&quot; and &quot;xor&quot;
@@ -25969,8 +25973,152 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=text&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Text&lt;/h6&gt; &lt;!-- a v3 feature --&gt;
+  &lt;h6 id=focus-management-0&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Focus management&lt;/h6&gt; &lt;!-- a v4 feature --&gt;
 
+  &lt;p&gt;When a canvas is interactive, authors should include focusable
+  elements in the element's fallback content corresponding to each
+  focusable part of the canvas.&lt;/p&gt;
+
+  &lt;p&gt;To indicate which focusable part of the canvas is currently
+  focused, authors should use the &lt;code title=dom-context-2d-drawFocusRing&gt;&lt;a href=#dom-context-2d-drawfocusring&gt;drawFocusRing()&lt;/a&gt;&lt;/code&gt; method,
+  passing it the element for which a ring is being drawn. This method
+  only draws the focus ring if the element is focused, so that it can
+  simply be called whenever drawing the element, without checking
+  whether the element is focused or not first. The position of the
+  center of the control, or of the editing caret if the control has
+  one, should be given in the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; arguments.&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;shouldDraw&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-drawFocusRing&gt;&lt;a href=#dom-context-2d-drawfocusring&gt;drawFocusRing&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;element&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, [ &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the given element is focused, draws a focus ring around the
+    current path, following the platform conventions for focus
+    rings. The given coordinate is used if the user's attention needs
+    to be brought to a particular position (e.g. if a magnifier is
+    following the editing caret in a text field).&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is true, then
+    the focus ring is only drawn if the user has configured his system
+    to draw focus rings in a particular manner. (For example, high
+    contrast focus rings.)&lt;/p&gt;
+
+    &lt;p&gt;Returns true if the given element is focused, the &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is true, and the user has
+    not configured his system to draw focus rings in a particular
+    manner. Otherwise, returns false.&lt;/p&gt;
+
+    &lt;p&gt;When the method returns true, the author is expected to
+    manually draw a focus ring.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-drawfocusring title=dom-context-2d-drawFocusRing&gt;&lt;code&gt;drawFocusRing(&lt;var title=&quot;&quot;&gt;element&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, [&lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt;])&lt;/code&gt;&lt;/dfn&gt;
+  method, when invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;element&lt;/var&gt; is not focused or is not a
+   descendant of the element with whose context the method is
+   associated, then return false and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform the given point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) according to the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+   matrix&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, inform the user that the focus is at the given
+   (transformed) coordinate on the canvas. (For example, this could
+   involve moving the user's magnification tool.)&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the user has requested the user of particular focus rings
+    (e.g. high-contrast focus rings), or if the &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is absent or false, then
+    draw a focus ring of the appropriate style along the path,
+    following platform conventions, return false, and abort these
+    steps.&lt;/p&gt;
+
+    &lt;p&gt;The focus ring should not be subject to the &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, the &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, or the &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
+    operators&lt;/a&gt;, but &lt;em&gt;should&lt;/em&gt; be subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping region&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return true.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;This &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has a couple of checkboxes:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;canvas height=400 width=750&gt;
+ &lt;label&gt;&lt;input type=checkbox id=showA&gt; Show As&lt;/label&gt;
+ &lt;label&gt;&lt;input type=checkbox id=showB&gt; Show Bs&lt;/label&gt;
+ &lt;!-- ... --&gt;
+&lt;/canvas&gt;
+&lt;script&gt;
+ function drawCheckbox(context, element, x, y) {
+   context.save();
+   context.font = '10px sans-serif';
+   context.textAlign = 'left';
+   context.textBaseline = 'middle';
+   var metrics = context.measureText(element.labels[0].textContent);
+   context.beginPath();
+   context.strokeStyle = 'black';
+   context.rect(x-5, y-5, 10, 10);
+   context.stroke();
+   if (element.checked) {
+     context.fillStyle = 'black';
+     context.fill();
+   }
+   context.fillText(element.labels[0].textContent, x+5, y);
+   context.beginPath();
+   context.rect(x-7, y-7, 12 + metrics.width+2, 14);
+   if (context.drawFocusRing(element, x, y, true)) {
+     context.strokeStyle = 'silver';
+     context.stroke();
+   }
+   context.restore();
+ }
+ function drawBase() { /* ... */ }
+ function drawAs() { /* ... */ }
+ function drawBs() { /* ... */ }
+ function redraw() {
+   var canvas = document.getElementsByTagName('canvas')[0];
+   var context = canvas.getContext('2d');
+   context.clearRect(0, 0, canvas.width, canvas.height);
+   drawCheckbox(context, document.getElementById('showA'), 20, 40);
+   drawCheckbox(context, document.getElementById('showB'), 20, 60);
+   drawBase();
+   if (document.getElementById('showA').checked)
+     drawAs();
+   if (document.getElementById('showB').checked)
+     drawBs();
+ }
+ function processClick(event) {
+   var canvas = document.getElementsByTagName('canvas')[0];
+   var context = canvas.getContext('2d');
+   var x = event.clientX - canvas.offsetLeft;
+   var y = event.clientY - canvas.offsetTop;
+   drawCheckbox(context, document.getElementById('showA'), 20, 40);
+   if (context.isPointInPath(x, y))
+     document.getElementById('showA').checked = !(document.getElementById('showA').checked);
+   drawCheckbox(context, document.getElementById('showB'), 20, 60);
+   if (context.isPointInPath(x, y))
+     document.getElementById('showB').checked = !(document.getElementById('showB').checked);
+   redraw();
+ }
+ document.getElementsByTagName('canvas')[0].addEventListener('focus', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('blur', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('change', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('click', processClick, false);
+ redraw();
+&lt;/script&gt;&lt;/pre&gt;
+&lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/340">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/340</A> --&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h6 id=text&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Text&lt;/h6&gt; &lt;!-- a v3 feature --&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -26289,7 +26437,7 @@
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;!--v4DVT - this is commented out until CSS can get its act together
+  &lt;/ol&gt;&lt;!--v5DVT - this is commented out until CSS can get its act together
 enough to actual specify vertical text rendering (how long have we
 been waiting now?)
 
@@ -26435,7 +26583,7 @@
 
   &lt;/ol&gt;
 
-v4DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
+v5DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
   method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
   is invoked, the user agent must replace all the &lt;a href=#space-character title=&quot;space
   character&quot;&gt;space characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
@@ -26464,8 +26612,8 @@
   area of the canvas that the clipping region covers, not just the box
   given by the em square height and measured text width.&lt;/p&gt;
 
-  &lt;!-- v4: Drawing text along a given path --&gt;
-  &lt;!-- v4: Adding text to a path --&gt;
+  &lt;!-- v5: Drawing text along a given path --&gt;
+  &lt;!-- v5: Adding text to a path --&gt;
   &lt;!-- see also: <A HREF="http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules">http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules</A> --&gt;
   &lt;!-- see also: <A HREF="http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas">http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas</A> --&gt;
 
@@ -26478,7 +26626,7 @@
 
 
 
-  &lt;h6 id=images&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Images&lt;/h6&gt;
+  &lt;h6 id=images&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Images&lt;/h6&gt;
 
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
@@ -26602,7 +26750,7 @@
 
 
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
@@ -26970,7 +27118,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing model&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing model&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -27000,7 +27148,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 

Modified: source
===================================================================
--- source	2010-01-05 00:58:35 UTC (rev 4464)
+++ source	2010-01-05 02:54:29 UTC (rev 4465)
@@ -26438,7 +26438,7 @@
 
 
   &lt;h5&gt;The 2D context&lt;/h5&gt;
-  &lt;!-- v2: we're on v3. suggestions for next version are marked v4. --&gt;
+  &lt;!-- v2: we're on v4. suggestions for next version are marked v5. --&gt;
 
   &lt;p&gt;When the &lt;code title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt;
   method of a &lt;code&gt;canvas&lt;/code&gt; element is invoked with &lt;dfn
@@ -26469,7 +26469,7 @@
   void &lt;span title=&quot;dom-context-2d-save&quot;&gt;save&lt;/span&gt;(); // push state on state stack
   void &lt;span title=&quot;dom-context-2d-restore&quot;&gt;restore&lt;/span&gt;(); // pop state stack and restore state
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
           attribute boolean &lt;span title=&quot;dom-context-2d-forceHighQuality&quot;&gt;forceHighQuality&lt;/span&gt; // (default false)
   // when enabled, it would prevent the UA from falling back on lower-quality but faster rendering routines
   // useful e.g. for when an image manipulation app uses &lt;canvas&gt; both for UI previews and the actual work
@@ -26481,7 +26481,7 @@
   void &lt;span title=&quot;dom-context-2d-transform&quot;&gt;transform&lt;/span&gt;(in float m11, in float m12, in float m21, in float m22, in float dx, in float dy);
   void &lt;span title=&quot;dom-context-2d-setTransform&quot;&gt;setTransform&lt;/span&gt;(in float m11, in float m12, in float m21, in float m22, in float dx, in float dy);
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
   void skew(...);
   void reflect(...); // or mirror(...)
 --&gt;
@@ -26489,7 +26489,7 @@
            attribute float &lt;span title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/span&gt;; // (default 1.0)
            attribute DOMString &lt;span title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/span&gt;; // (default source-over)
 &lt;!--
-  // v4 we've also received requests for:
+  // v5 we've also received requests for:
   - turning off antialiasing to avoid seams when patterns are painted next to each other
     - might be better to overdraw?
     - might be better to just draw at a higher res then downsample, like for 3d?
@@ -26538,12 +26538,15 @@
   void &lt;span title=&quot;dom-context-2d-clip&quot;&gt;clip&lt;/span&gt;();
   boolean &lt;span title=&quot;dom-context-2d-isPointInPath&quot;&gt;isPointInPath&lt;/span&gt;(in float x, in float y);
 
+  // focus management
+  boolean &lt;span title=&quot;dom-context-2d-drawFocusRing&quot;&gt;drawFocusRing&lt;/span&gt;(in &lt;span&gt;Element&lt;/span&gt; element, in float xCaret, in float yCaret, in optional canDrawCustom);
+
   // text
            attribute DOMString &lt;span title=&quot;dom-context-2d-font&quot;&gt;font&lt;/span&gt;; // (default 10px sans-serif)
            attribute DOMString &lt;span title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/span&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
            attribute DOMString &lt;span title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/span&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
   void &lt;span title=&quot;dom-context-2d-fillText&quot;&gt;fillText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);
-  void &lt;span title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);&lt;!-- v4DVT
+  void &lt;span title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxWidth);&lt;!-- v5DVT
   void &lt;span title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxHeight);
   void &lt;span title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText&lt;/span&gt;(in DOMString text, in float x, in float y, in optional float maxHeight); --&gt;
   &lt;span&gt;TextMetrics&lt;/span&gt; &lt;span title=&quot;dom-context-2d-measureText&quot;&gt;measureText&lt;/span&gt;(in DOMString text);
@@ -26704,7 +26707,7 @@
   drawing state it describes. If there is no saved state, the method
   must do nothing.&lt;/p&gt;
 
-  &lt;!-- v4
+  &lt;!-- v5
 idea from Mihai:
 &gt; 5. Drawing states should be saveable with IDs, and for easier restoring.
 &gt;
@@ -27069,7 +27072,7 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;!-- v4 feature requests:
+  &lt;!-- v5 feature requests:
 
    * Getting and setting colours by component to bypass the CSS value parsing.
 
@@ -27473,7 +27476,7 @@
   &lt;!-- drawImage() has an equivalent paragraph --&gt;
 
   &lt;!--
-   Requests for v4 features:
+   Requests for v5 features:
     * apply transforms to patterns, so you don't have to create
       transformed patterns manually by rendering them to an off-screen
       canvas then using that canvas as the pattern.
@@ -27652,7 +27655,7 @@
   initially have the value &lt;code&gt;10.0&lt;/code&gt;.&lt;/p&gt;
 
   &lt;!--
-v4: dashed lines have been requested. Philip Taylor provides these
+v5: dashed lines have been requested. Philip Taylor provides these
 notes on what would need to be defined for dashed lines:
 &gt; I don't think it's entirely trivial to add, to the detail that's
 &gt; necessary in a specification. The common graphics APIs (at least
@@ -28276,7 +28279,7 @@
   title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the subpath.&lt;/p&gt;
 
 
-  &lt;!-- v4 feature request:
+  &lt;!-- v5 feature request:
         * points as a primitive shape
           <A HREF="http://home.comcast.net/~urbanjost/canvas/vogle4.html">http://home.comcast.net/~urbanjost/canvas/vogle4.html</A>
   --&gt;
@@ -28336,7 +28339,7 @@
   to the rectangle with the top left corner at (0,0) and the width and
   height of the coordinate space.&lt;/p&gt;
 
-  &lt;!-- v4
+  &lt;!-- v5
    Jordan OSETE suggests:
     * support ways of extending the clipping region (union instead of intersection)
        - also &quot;add&quot;, &quot;subtract&quot;, &quot;replace&quot;, &quot;intersect&quot; and &quot;xor&quot;
@@ -28359,6 +28362,171 @@
   &lt;/div&gt;
 
 
+  &lt;h6&gt;Focus management&lt;/h6&gt; &lt;!-- a v4 feature --&gt;
+
+  &lt;p&gt;When a canvas is interactive, authors should include focusable
+  elements in the element's fallback content corresponding to each
+  focusable part of the canvas.&lt;/p&gt;
+
+  &lt;p&gt;To indicate which focusable part of the canvas is currently
+  focused, authors should use the &lt;code
+  title=&quot;dom-context-2d-drawFocusRing&quot;&gt;drawFocusRing()&lt;/code&gt; method,
+  passing it the element for which a ring is being drawn. This method
+  only draws the focus ring if the element is focused, so that it can
+  simply be called whenever drawing the element, without checking
+  whether the element is focused or not first. The position of the
+  center of the control, or of the editing caret if the control has
+  one, should be given in the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var
+  title=&quot;&quot;&gt;y&lt;/var&gt; arguments.&lt;/p&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;shouldDraw&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-drawFocusRing&quot;&gt;drawFocusRing&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;element&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, [ &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the given element is focused, draws a focus ring around the
+    current path, following the platform conventions for focus
+    rings. The given coordinate is used if the user's attention needs
+    to be brought to a particular position (e.g. if a magnifier is
+    following the editing caret in a text field).&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is true, then
+    the focus ring is only drawn if the user has configured his system
+    to draw focus rings in a particular manner. (For example, high
+    contrast focus rings.)&lt;/p&gt;
+
+    &lt;p&gt;Returns true if the given element is focused, the &lt;var
+    title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is true, and the user has
+    not configured his system to draw focus rings in a particular
+    manner. Otherwise, returns false.&lt;/p&gt;
+
+    &lt;p&gt;When the method returns true, the author is expected to
+    manually draw a focus ring.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-drawFocusRing&quot;&gt;&lt;code&gt;drawFocusRing(&lt;var
+  title=&quot;&quot;&gt;element&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;y&lt;/var&gt;, [&lt;var title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt;])&lt;/code&gt;&lt;/dfn&gt;
+  method, when invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;element&lt;/var&gt; is not focused or is not a
+   descendant of the element with whose context the method is
+   associated, then return false and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform the given point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt;) according to the &lt;span
+   title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+   matrix&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, inform the user that the focus is at the given
+   (transformed) coordinate on the canvas. (For example, this could
+   involve moving the user's magnification tool.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the user has requested the user of particular focus rings
+    (e.g. high-contrast focus rings), or if the &lt;var
+    title=&quot;&quot;&gt;canDrawCustom&lt;/var&gt; argument is absent or false, then
+    draw a focus ring of the appropriate style along the path,
+    following platform conventions, return false, and abort these
+    steps.&lt;/p&gt;
+
+    &lt;p&gt;The focus ring should not be subject to the &lt;span
+    title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, the &lt;span
+    title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, or the &lt;span
+    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
+    operators&lt;/span&gt;, but &lt;em&gt;should&lt;/em&gt; be subject to the &lt;span
+    title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return true.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;This &lt;code&gt;canvas&lt;/code&gt; element has a couple of checkboxes:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;canvas height=400 width=750&gt;
+ &lt;label&gt;&lt;input type=checkbox id=showA&gt; Show As&lt;/label&gt;
+ &lt;label&gt;&lt;input type=checkbox id=showB&gt; Show Bs&lt;/label&gt;
+ &lt;!-- ... --&gt;
+&lt;/canvas&gt;
+&lt;script&gt;
+ function drawCheckbox(context, element, x, y) {
+   context.save();
+   context.font = '10px sans-serif';
+   context.textAlign = 'left';
+   context.textBaseline = 'middle';
+   var metrics = context.measureText(element.labels[0].textContent);
+   context.beginPath();
+   context.strokeStyle = 'black';
+   context.rect(x-5, y-5, 10, 10);
+   context.stroke();
+   if (element.checked) {
+     context.fillStyle = 'black';
+     context.fill();
+   }
+   context.fillText(element.labels[0].textContent, x+5, y);
+   context.beginPath();
+   context.rect(x-7, y-7, 12 + metrics.width+2, 14);
+   if (context.drawFocusRing(element, x, y, true)) {
+     context.strokeStyle = 'silver';
+     context.stroke();
+   }
+   context.restore();
+ }
+ function drawBase() { /* ... */ }
+ function drawAs() { /* ... */ }
+ function drawBs() { /* ... */ }
+ function redraw() {
+   var canvas = document.getElementsByTagName('canvas')[0];
+   var context = canvas.getContext('2d');
+   context.clearRect(0, 0, canvas.width, canvas.height);
+   drawCheckbox(context, document.getElementById('showA'), 20, 40);
+   drawCheckbox(context, document.getElementById('showB'), 20, 60);
+   drawBase();
+   if (document.getElementById('showA').checked)
+     drawAs();
+   if (document.getElementById('showB').checked)
+     drawBs();
+ }
+ function processClick(event) {
+   var canvas = document.getElementsByTagName('canvas')[0];
+   var context = canvas.getContext('2d');
+   var x = event.clientX - canvas.offsetLeft;
+   var y = event.clientY - canvas.offsetTop;
+   drawCheckbox(context, document.getElementById('showA'), 20, 40);
+   if (context.isPointInPath(x, y))
+     document.getElementById('showA').checked = !(document.getElementById('showA').checked);
+   drawCheckbox(context, document.getElementById('showB'), 20, 60);
+   if (context.isPointInPath(x, y))
+     document.getElementById('showB').checked = !(document.getElementById('showB').checked);
+   redraw();
+ }
+ document.getElementsByTagName('canvas')[0].addEventListener('focus', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('blur', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('change', redraw, true);
+ document.getElementsByTagName('canvas')[0].addEventListener('click', processClick, false);
+ redraw();
+&lt;/script&gt;&lt;/pre&gt;
+&lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/340">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/340</A> --&gt;
+
+  &lt;/div&gt;
+
+
   &lt;h6&gt;Text&lt;/h6&gt; &lt;!-- a v3 feature --&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
@@ -28762,7 +28930,7 @@
 
   &lt;/ol&gt;
 
-&lt;!--v4DVT - this is commented out until CSS can get its act together
+&lt;!--v5DVT - this is commented out until CSS can get its act together
 enough to actual specify vertical text rendering (how long have we
 been waiting now?)
 
@@ -28908,7 +29076,7 @@
 
   &lt;/ol&gt;
 
-v4DVT (also check for '- -' bits in the part above) --&gt;
+v5DVT (also check for '- -' bits in the part above) --&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-measureText&quot;&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
@@ -28946,8 +29114,8 @@
   area of the canvas that the clipping region covers, not just the box
   given by the em square height and measured text width.&lt;/p&gt;
 
-  &lt;!-- v4: Drawing text along a given path --&gt;
-  &lt;!-- v4: Adding text to a path --&gt;
+  &lt;!-- v5: Drawing text along a given path --&gt;
+  &lt;!-- v5: Adding text to a path --&gt;
   &lt;!-- see also: <A HREF="http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules">http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules</A> --&gt;
   &lt;!-- see also: <A HREF="http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas">http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas</A> --&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011333.html">[html5] r4464 - [e] (0) Make informative text catch up to the new	reality of how .load() works. [...]
</A></li>
	<LI>Next message: <A HREF="011335.html">[html5] r4466 - [e] (0) mention that the Atom conversion step can	result in non-conforming Atom [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11334">[ date ]</a>
              <a href="thread.html#11334">[ thread ]</a>
              <a href="subject.html#11334">[ subject ]</a>
              <a href="author.html#11334">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
