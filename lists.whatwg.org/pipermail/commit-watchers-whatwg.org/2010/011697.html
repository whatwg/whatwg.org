<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r4829 - [giow] (0) very early draft idea of how to do the	API part of peer-to-peer commu [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4829%20-%20%5Bgiow%5D%20%280%29%20very%20early%20draft%20idea%20of%20how%20to%20do%20the%0A%09API%20part%20of%20peer-to-peer%20commu%20%5B...%5D&In-Reply-To=%3C20100305220053.BEBA780580F2%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011696.html">
   <LINK REL="Next"  HREF="011698.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r4829 - [giow] (0) very early draft idea of how to do the	API part of peer-to-peer commu [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4829%20-%20%5Bgiow%5D%20%280%29%20very%20early%20draft%20idea%20of%20how%20to%20do%20the%0A%09API%20part%20of%20peer-to-peer%20commu%20%5B...%5D&In-Reply-To=%3C20100305220053.BEBA780580F2%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r4829 - [giow] (0) very early draft idea of how to do the	API part of peer-to-peer commu [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Mar  5 14:00:53 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="011696.html">[html5] r4828 - [t] (0) Allow server to specify cookie-related	fields. (Editorial: Also, change  [...]
</A></li>
        <LI>Next message: <A HREF="011698.html">[html5] r4830 - [giowt] (0) Include a warning about long length	frames
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11697">[ date ]</a>
              <a href="thread.html#11697">[ thread ]</a>
              <a href="subject.html#11697">[ subject ]</a>
              <a href="author.html#11697">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2010-03-05 14:00:51 -0800 (Fri, 05 Mar 2010)
New Revision: 4829

Modified:
   complete.html
   index
   source
Log:
[giow] (0) very early draft idea of how to do the API part of peer-to-peer communication for video conferencing, server-less IMing, etc.

Modified: complete.html
===================================================================
--- complete.html	2010-03-05 01:56:01 UTC (rev 4828)
+++ complete.html	2010-03-05 22:00:51 UTC (rev 4829)
@@ -651,7 +651,8 @@
        &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.5.8 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#devices&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;The &lt;code&gt;device&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#stream-api&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Stream API&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#stream-api&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Stream API&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#peer-to-peer-connections&gt;&lt;span class=secno&gt;4.11.6.2 &lt;/span&gt;Peer-to-peer connections&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#links&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Links&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#hyperlink-elements&gt;&lt;span class=secno&gt;4.12.1 &lt;/span&gt;Hyperlink elements&lt;/a&gt;&lt;/li&gt;
@@ -45273,8 +45274,7 @@
   supported by the user agent for use in &lt;code&gt;&lt;a href=#audio&gt;audio&lt;/a&gt;&lt;/code&gt; and
   &lt;code&gt;&lt;a href=#video&gt;video&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
 
-  &lt;p class=XXX&gt;This will be pinned down to a specific codec, frame
-  dimension, and bitrate in due course.&lt;/p&gt;
+  &lt;p class=XXX&gt;This will be pinned down to a specific codec.&lt;/p&gt;
 
   &lt;p&gt;When the &lt;dfn id=dom-stream-record title=dom-stream-record&gt;&lt;code&gt;record()&lt;/code&gt;&lt;/dfn&gt; method is
   invoked, the user agent must return a new
@@ -45293,14 +45293,56 @@
   supported by the user agent for use in &lt;code&gt;&lt;a href=#audio&gt;audio&lt;/a&gt;&lt;/code&gt; and
   &lt;code&gt;&lt;a href=#video&gt;video&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
 
-  &lt;p class=XXX&gt;This again will be pinned down to a specific codec,
-  frame dimension, and bitrate in due course.&lt;/p&gt;
+  &lt;p class=XXX&gt;This again will be pinned down to a specific codec.&lt;/p&gt;
 
 
+  &lt;h5 id=peer-to-peer-connections&gt;&lt;span class=secno&gt;4.11.6.2 &lt;/span&gt;Peer-to-peer connections&lt;/h5&gt;
 
+  &lt;p class=XXX&gt;This section will be moved to a more appropriate
+  location in due course; it is here currently to keep it near the
+  &lt;code&gt;&lt;a href=#devices&gt;device&lt;/a&gt;&lt;/code&gt; element to allow reviewers to look at it.&lt;/p&gt;
 
+  &lt;pre class=idl&gt;[NoInterfaceObject]
+interface &lt;dfn id=abstractpeer&gt;AbstractPeer&lt;/dfn&gt; {
+  void sendText(in DOMString text);
+  attribute Function ontext; // receiving
 
+  void sendBitmap(in HTMLImageElement image);
+  attribute Function onbitmap; // receiving
 
+  void sendFile(in File file);
+  attribute Function onfile; // receiving
+
+  attribute Stream localStream; // video/audio to send
+  readonly attribute Stream remoteStream; // video/audio from remote peer
+  attribute Function onstreamchange; // when the remote peer changes whether the video is being sent or not
+
+  attribute Function onconnect; // called when the connection is established
+  attribute Function ondisconnect;
+};
+
+[Constructor]
+interface &lt;dfn id=peertopeerserver&gt;PeerToPeerServer&lt;/dfn&gt; : &lt;a href=#abstractpeer&gt;AbstractPeer&lt;/a&gt; {
+  DOMString &lt;span title=dom-PeerToPeerServer-getAddress&gt;getAddress&lt;/span&gt;(); // returns a string that encodes all the various ways to connect to this peer
+
+  attribute Function onincoming; // incoming call detected
+  void accept(); // accepts incoming call
+  void reject(in optional DOMString message); // explicitly rejects incoming call
+
+  void close(); // disconnects and stops listening
+};
+
+[Constructor(in DOMString address)] // pass it the result of getAddress() from the other peer
+interface &lt;dfn id=peertopeerclient&gt;PeerToPeerClient&lt;/dfn&gt; : &lt;a href=#abstractpeer&gt;AbstractPeer&lt;/a&gt; {
+};&lt;/pre&gt;
+
+  &lt;p class=XXX&gt;...&lt;/p&gt;
+
+
+
+
+
+
   &lt;h3 id=links&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Links&lt;/h3&gt;
 
 

Modified: index
===================================================================
--- index	2010-03-05 01:56:01 UTC (rev 4828)
+++ index	2010-03-05 22:00:51 UTC (rev 4829)
@@ -161,7 +161,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;HTML5 (including next generation additions still in development)&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 4 March 2010&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 5 March 2010&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -660,7 +660,8 @@
        &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.5.8 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#devices&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;The &lt;code&gt;device&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#stream-api&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Stream API&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#stream-api&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Stream API&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#peer-to-peer-connections&gt;&lt;span class=secno&gt;4.11.6.2 &lt;/span&gt;Peer-to-peer connections&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#links&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Links&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#hyperlink-elements&gt;&lt;span class=secno&gt;4.12.1 &lt;/span&gt;Hyperlink elements&lt;/a&gt;&lt;/li&gt;
@@ -45175,8 +45176,7 @@
   supported by the user agent for use in &lt;code&gt;&lt;a href=#audio&gt;audio&lt;/a&gt;&lt;/code&gt; and
   &lt;code&gt;&lt;a href=#video&gt;video&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
 
-  &lt;p class=XXX&gt;This will be pinned down to a specific codec, frame
-  dimension, and bitrate in due course.&lt;/p&gt;
+  &lt;p class=XXX&gt;This will be pinned down to a specific codec.&lt;/p&gt;
 
   &lt;p&gt;When the &lt;dfn id=dom-stream-record title=dom-stream-record&gt;&lt;code&gt;record()&lt;/code&gt;&lt;/dfn&gt; method is
   invoked, the user agent must return a new
@@ -45195,14 +45195,56 @@
   supported by the user agent for use in &lt;code&gt;&lt;a href=#audio&gt;audio&lt;/a&gt;&lt;/code&gt; and
   &lt;code&gt;&lt;a href=#video&gt;video&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
 
-  &lt;p class=XXX&gt;This again will be pinned down to a specific codec,
-  frame dimension, and bitrate in due course.&lt;/p&gt;
+  &lt;p class=XXX&gt;This again will be pinned down to a specific codec.&lt;/p&gt;
 
 
+  &lt;h5 id=peer-to-peer-connections&gt;&lt;span class=secno&gt;4.11.6.2 &lt;/span&gt;Peer-to-peer connections&lt;/h5&gt;
 
+  &lt;p class=XXX&gt;This section will be moved to a more appropriate
+  location in due course; it is here currently to keep it near the
+  &lt;code&gt;&lt;a href=#devices&gt;device&lt;/a&gt;&lt;/code&gt; element to allow reviewers to look at it.&lt;/p&gt;
 
+  &lt;pre class=idl&gt;[NoInterfaceObject]
+interface &lt;dfn id=abstractpeer&gt;AbstractPeer&lt;/dfn&gt; {
+  void sendText(in DOMString text);
+  attribute Function ontext; // receiving
 
+  void sendBitmap(in HTMLImageElement image);
+  attribute Function onbitmap; // receiving
 
+  void sendFile(in File file);
+  attribute Function onfile; // receiving
+
+  attribute Stream localStream; // video/audio to send
+  readonly attribute Stream remoteStream; // video/audio from remote peer
+  attribute Function onstreamchange; // when the remote peer changes whether the video is being sent or not
+
+  attribute Function onconnect; // called when the connection is established
+  attribute Function ondisconnect;
+};
+
+[Constructor]
+interface &lt;dfn id=peertopeerserver&gt;PeerToPeerServer&lt;/dfn&gt; : &lt;a href=#abstractpeer&gt;AbstractPeer&lt;/a&gt; {
+  DOMString &lt;span title=dom-PeerToPeerServer-getAddress&gt;getAddress&lt;/span&gt;(); // returns a string that encodes all the various ways to connect to this peer
+
+  attribute Function onincoming; // incoming call detected
+  void accept(); // accepts incoming call
+  void reject(in optional DOMString message); // explicitly rejects incoming call
+
+  void close(); // disconnects and stops listening
+};
+
+[Constructor(in DOMString address)] // pass it the result of getAddress() from the other peer
+interface &lt;dfn id=peertopeerclient&gt;PeerToPeerClient&lt;/dfn&gt; : &lt;a href=#abstractpeer&gt;AbstractPeer&lt;/a&gt; {
+};&lt;/pre&gt;
+
+  &lt;p class=XXX&gt;...&lt;/p&gt;
+
+
+
+
+
+
   &lt;h3 id=links&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Links&lt;/h3&gt;
 
 

Modified: source
===================================================================
--- source	2010-03-05 01:56:01 UTC (rev 4828)
+++ source	2010-03-05 22:00:51 UTC (rev 4829)
@@ -50355,8 +50355,7 @@
   supported by the user agent for use in &lt;code&gt;audio&lt;/code&gt; and
   &lt;code&gt;video&lt;/code&gt; elements.&lt;/p&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;This will be pinned down to a specific codec, frame
-  dimension, and bitrate in due course.&lt;/p&gt;
+  &lt;p class=&quot;XXX&quot;&gt;This will be pinned down to a specific codec.&lt;/p&gt;
 
   &lt;p&gt;When the &lt;dfn
   title=&quot;dom-stream-record&quot;&gt;&lt;code&gt;record()&lt;/code&gt;&lt;/dfn&gt; method is
@@ -50379,9 +50378,51 @@
   supported by the user agent for use in &lt;code&gt;audio&lt;/code&gt; and
   &lt;code&gt;video&lt;/code&gt; elements.&lt;/p&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;This again will be pinned down to a specific codec,
-  frame dimension, and bitrate in due course.&lt;/p&gt;
+  &lt;p class=&quot;XXX&quot;&gt;This again will be pinned down to a specific codec.&lt;/p&gt;
 
+
+  &lt;h5&gt;Peer-to-peer connections&lt;/h5&gt;
+
+  &lt;p class=&quot;XXX&quot;&gt;This section will be moved to a more appropriate
+  location in due course; it is here currently to keep it near the
+  &lt;code&gt;device&lt;/code&gt; element to allow reviewers to look at it.&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
+interface &lt;dfn&gt;AbstractPeer&lt;/dfn&gt; {
+  void sendText(in DOMString text);
+  attribute Function ontext; // receiving
+
+  void sendBitmap(in HTMLImageElement image);
+  attribute Function onbitmap; // receiving
+
+  void sendFile(in File file);
+  attribute Function onfile; // receiving
+
+  attribute Stream localStream; // video/audio to send
+  readonly attribute Stream remoteStream; // video/audio from remote peer
+  attribute Function onstreamchange; // when the remote peer changes whether the video is being sent or not
+
+  attribute Function onconnect; // called when the connection is established
+  attribute Function ondisconnect;
+};
+
+[Constructor]
+interface &lt;dfn&gt;PeerToPeerServer&lt;/dfn&gt; : &lt;span&gt;AbstractPeer&lt;/span&gt; {
+  DOMString &lt;span title=&quot;dom-PeerToPeerServer-getAddress&quot;&gt;getAddress&lt;/span&gt;(); // returns a string that encodes all the various ways to connect to this peer
+
+  attribute Function onincoming; // incoming call detected
+  void accept(); // accepts incoming call
+  void reject(in optional DOMString message); // explicitly rejects incoming call
+
+  void close(); // disconnects and stops listening
+};
+
+[Constructor(in DOMString address)] // pass it the result of getAddress() from the other peer
+interface &lt;dfn&gt;PeerToPeerClient&lt;/dfn&gt; : &lt;span&gt;AbstractPeer&lt;/span&gt; {
+};&lt;/pre&gt;
+
+  &lt;p class=&quot;XXX&quot;&gt;...&lt;/p&gt;
+
 &lt;!--END html-device--&gt;&lt;!--START w3c-html--&gt;
 
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011696.html">[html5] r4828 - [t] (0) Allow server to specify cookie-related	fields. (Editorial: Also, change  [...]
</A></li>
	<LI>Next message: <A HREF="011698.html">[html5] r4830 - [giowt] (0) Include a warning about long length	frames
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11697">[ date ]</a>
              <a href="thread.html#11697">[ thread ]</a>
              <a href="subject.html#11697">[ subject ]</a>
              <a href="author.html#11697">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
