<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8428 - [e] (0) Add some best practices notes regarding how	to use metadata cues. Fixing [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8428%20-%20%5Be%5D%20%280%29%20Add%20some%20best%20practices%20notes%20regarding%20how%0A%09to%20use%20metadata%20cues.%20Fixing%20%5B...%5D&In-Reply-To=%3C20140128201739.98C4AC3C5977%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8428 - [e] (0) Add some best practices notes regarding how	to use metadata cues. Fixing [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8428%20-%20%5Be%5D%20%280%29%20Add%20some%20best%20practices%20notes%20regarding%20how%0A%09to%20use%20metadata%20cues.%20Fixing%20%5B...%5D&In-Reply-To=%3C20140128201739.98C4AC3C5977%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8428 - [e] (0) Add some best practices notes regarding how	to use metadata cues. Fixing [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Jan 28 12:17:39 PST 2014</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23045">[ date ]</a>
              <a href="thread.html#23045">[ thread ]</a>
              <a href="subject.html#23045">[ subject ]</a>
              <a href="author.html#23045">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2014-01-28 12:17:38 -0800 (Tue, 28 Jan 2014)
New Revision: 8428

Modified:
   complete.html
   index
   source
Log:
[e] (0) Add some best practices notes regarding how to use metadata cues.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24382">https://www.w3.org/Bugs/Public/show_bug.cgi?id=24382</A>
Affected topics: HTML, Video Text Tracks

Modified: complete.html
===================================================================
--- complete.html	2014-01-28 18:49:55 UTC (rev 8427)
+++ complete.html	2014-01-28 20:17:38 UTC (rev 8428)
@@ -640,7 +640,8 @@
          &lt;li&gt;&lt;a href=#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues&gt;&lt;span class=secno&gt;4.7.10.12.4 &lt;/span&gt;Guidelines for exposing cues in various formats as text track cues&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#text-track-api&gt;&lt;span class=secno&gt;4.7.10.12.5 &lt;/span&gt;Text track API&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#text-tracks-describing-chapters&gt;&lt;span class=secno&gt;4.7.10.12.6 &lt;/span&gt;Text tracks describing chapters&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#cue-events&gt;&lt;span class=secno&gt;4.7.10.12.7 &lt;/span&gt;Event handlers for objects of the text track APIs&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#cue-events&gt;&lt;span class=secno&gt;4.7.10.12.7 &lt;/span&gt;Event handlers for objects of the text track APIs&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices-for-metadata-text-tracks&gt;&lt;span class=secno&gt;4.7.10.12.8 &lt;/span&gt;Best practices for metadata text tracks&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#user-interface&gt;&lt;span class=secno&gt;4.7.10.13 &lt;/span&gt;User interface&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#time-ranges&gt;&lt;span class=secno&gt;4.7.10.14 &lt;/span&gt;Time ranges&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#the-trackevent-interface&gt;&lt;span class=secno&gt;4.7.10.15 &lt;/span&gt;The &lt;code&gt;TrackEvent&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
@@ -30631,6 +30632,78 @@
   &lt;/table&gt;&lt;/div&gt;
 
 
+
+  &lt;h6 id=best-practices-for-metadata-text-tracks&gt;&lt;span class=secno&gt;4.7.10.12.8 &lt;/span&gt;Best practices for metadata text tracks&lt;/h6&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;Text tracks can be used for storing data relating to the media data, for interactive or
+  augmented views.&lt;/p&gt;
+
+  &lt;p&gt;For example, a page showing a sports broadcast could include information about the current
+  score. Suppose a robotics competition was being streamed live. The image could be overlayed with
+  the scores, as follows:&lt;/p&gt;
+
+  &lt;p&gt;&lt;iframe src='data:text/html;charset=utf-8,&lt;!DOCTYPE%20html&gt;%0A&lt;style&gt;%0A%20body%2C%20html%20%7B%20margin%3A%200%3B%20padding%3A%200%3B%20overflow%3A%20hidden%3B%20%7D%0A%20div%20%7B%20width%3A%20600px%3B%20height%3A%20400px%3B%20position%3A%20relative%3B%20%7D%0A%20p%20%7B%20position%3A%20absolute%3B%20top%3A%200%3B%20margin%3A%200.25em%3B%20font%3A%20small-caps%20900%202em%20sans-serif%3B%20text-shadow%3A%20white%200%200%204px%3B%20%7D%0A%20span%20%7B%20display%3A%20block%3B%20%7D%0A%20.left%20%7B%20color%3A%20red%3B%20left%3A%200%3B%20text-align%3A%20left%3B%20%7D%0A%20.right%20%7B%20color%3A%20blue%3B%20right%3A%200%3B%20text-align%3A%20right%3B%20%7D%0A%20.middle%20%7B%20color%3A%20white%3B%20top%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%20text-align%3A%20center%3B%20text-shadow%3A%20black%200%200%204px%3B%20%7D%0A%20.middle%20span%20%7B%20display%3A%20inline-block%3B%20margin%3A%200%201em%3B%20font-size%3A%200.75em%3B%20text-transform%3A%20
 uppercase%3B%20%7D%0A&lt;%2Fstyle&gt;%0A&lt;div&gt;%0A%20&lt;img%20src%3D&quot;http%3A%2F%2Fwww.whatwg.org%2Fspecs%2Fweb-apps%2Fcurrent-work%2Fimages%2Frobots.jpeg&quot;&gt;%0A%20&lt;p%20class%3D&quot;score%20left&quot;&gt;&lt;span&gt;Red%20Alliance&lt;%2Fspan&gt;%20&lt;span&gt;78&lt;%2Fspan&gt;&lt;%2Fp&gt;%0A%20&lt;p%20class%3D&quot;score%20right&quot;&gt;&lt;span&gt;Blue%20Alliance&lt;%2Fspan&gt;%20&lt;span&gt;66&lt;%2Fspan&gt;&lt;%2Fp&gt;%0A%20&lt;p%20class%3D&quot;score%20middle&quot;&gt;&lt;span&gt;Qual%20Match%2037&lt;%2Fspan&gt;%20&lt;span&gt;Friday%2014%3A21&lt;%2Fspan&gt;%0A&lt;%2Fdiv&gt;' width=600 height=400&gt;&lt;/iframe&gt;
+
+  &lt;p&gt;In order to make the score display render correctly whenever the user seeks to an arbitrary
+  point in the video, the metadata text track cues need to be as long as is appropriate for the
+  score. For example, in the frame above, there would be maybe one cue that lasts the length of the
+  match that gives the match number, one cue that lasts until the blue alliance's score changes, and
+  one cue that lasts until the red alliance's score changes. If the video is just a stream of the
+  live event, the time in the bottom right would presumably be automatically derived from the
+  current video time, rather than based on a cue. However, if the video was just the highlights,
+  then that might be given in cues also.&lt;/p&gt;
+
+  &lt;p&gt;The following shows what fragments of this could look like in a WebVTT file:&lt;/p&gt;
+
+  &lt;pre&gt;WEBVTT
+
+...
+
+05:10:00.000 --&gt; 05:12:15.000
+matchtype:qual
+matchnumber:37
+
+...
+
+05:11:02.251 --&gt; 05:11:17.198
+red:78
+
+05:11:03.672 --&gt; 05:11:54.198
+blue:66
+
+05:11:17.198 --&gt; 05:11:25.912
+red:80
+
+05:11:25.912 --&gt; 05:11:26.522
+red:83
+
+05:11:26.522 --&gt; 05:11:26.982
+red:86
+
+05:11:26.982 --&gt; 05:11:27.499
+red:89
+
+...&lt;/pre&gt;
+
+  &lt;p&gt;The key here is to notice that the information is given in cues that span the length of time to
+  which the relevant event applies. If, instead, the scores were given as zero-length (or very
+  brief, nearly zero-length) cues when the score changes, for example saying &quot;red+2&quot; at
+  05:11:17.198, &quot;red+3&quot; at 05:11:25.912, etc, problems arise: primarily, seeking is much harder to
+  implement, as the script has to walk the entire list of cues to make sure that no notifications
+  have been missed; but also, if the cues are short it's possible the script will never see that
+  they are active unless it listens to them specifically.&lt;/p&gt;
+
+  &lt;p&gt;When using cues in this manner, authors are encouraged to use the &lt;code title=event-media-cuechange&gt;&lt;a href=#event-media-cuechange&gt;cuechange&lt;/a&gt;&lt;/code&gt; event to update the current annotations. (In
+  particular, using the &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; event would be less
+  appropriate as it would require doing work even when the cues haven't changed, and, more
+  importantly, would introduce a higher latency between when the metatata cues become active and
+  when the display is updated, this &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; events
+  are rate-limited.)&lt;/p&gt;
+
+
+
   &lt;h5 id=user-interface&gt;&lt;span class=secno&gt;4.7.10.13 &lt;/span&gt;User interface&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=attr-media-controls title=attr-media-controls&gt;&lt;code&gt;controls&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;a href=#boolean-attribute&gt;boolean
@@ -103064,6 +103137,13 @@
    (&lt;a itemprop=license href=<A HREF="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</A>&gt;CC BY-SA 3.0&lt;/a&gt;)&lt;/p&gt;
   &lt;/div&gt;
 
+  &lt;div itemscope=&quot;&quot; itemtype=<A HREF="http://n.whatwg.org/work">http://n.whatwg.org/work</A>&gt;
+   &lt;p&gt;The photograph of robot 148 climbing the tower at the FIRST Robotics Competition 2013 Silicon Valley Regional is based on
+   &lt;a itemprop=work href=<A HREF="http://www.flickr.com/photos/lenore-m/8631391979/">http://www.flickr.com/photos/lenore-m/8631391979/</A>&gt;a work&lt;/a&gt; by
+   &lt;a itemprop=<A HREF="http://creativecommons.org/ns#attributionURL">http://creativecommons.org/ns#attributionURL</A> href=<A HREF="http://www.flickr.com/photos/lenore-m/">http://www.flickr.com/photos/lenore-m/</A>&gt;Lenore Edman&lt;/a&gt;.
+   (&lt;a itemprop=license href=<A HREF="http://creativecommons.org/licenses/by/2.0/">http://creativecommons.org/licenses/by/2.0/</A>&gt;CC BY 2.0&lt;/a&gt;)&lt;/p&gt;
+  &lt;/div&gt;
+
   &lt;p&gt;Thanks also to the Microsoft blogging community for some ideas, to the attendees of the W3C
   Workshop on Web Applications and Compound Documents for inspiration, to the #mrt crew, the #mrt.no
   crew, and the #whatwg crew, and to Pillar and Hedral for their ideas and support.&lt;/p&gt;

Modified: index
===================================================================
--- index	2014-01-28 18:49:55 UTC (rev 8427)
+++ index	2014-01-28 20:17:38 UTC (rev 8428)
@@ -640,7 +640,8 @@
          &lt;li&gt;&lt;a href=#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues&gt;&lt;span class=secno&gt;4.7.10.12.4 &lt;/span&gt;Guidelines for exposing cues in various formats as text track cues&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#text-track-api&gt;&lt;span class=secno&gt;4.7.10.12.5 &lt;/span&gt;Text track API&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#text-tracks-describing-chapters&gt;&lt;span class=secno&gt;4.7.10.12.6 &lt;/span&gt;Text tracks describing chapters&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#cue-events&gt;&lt;span class=secno&gt;4.7.10.12.7 &lt;/span&gt;Event handlers for objects of the text track APIs&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#cue-events&gt;&lt;span class=secno&gt;4.7.10.12.7 &lt;/span&gt;Event handlers for objects of the text track APIs&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices-for-metadata-text-tracks&gt;&lt;span class=secno&gt;4.7.10.12.8 &lt;/span&gt;Best practices for metadata text tracks&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#user-interface&gt;&lt;span class=secno&gt;4.7.10.13 &lt;/span&gt;User interface&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#time-ranges&gt;&lt;span class=secno&gt;4.7.10.14 &lt;/span&gt;Time ranges&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#the-trackevent-interface&gt;&lt;span class=secno&gt;4.7.10.15 &lt;/span&gt;The &lt;code&gt;TrackEvent&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
@@ -30631,6 +30632,78 @@
   &lt;/table&gt;&lt;/div&gt;
 
 
+
+  &lt;h6 id=best-practices-for-metadata-text-tracks&gt;&lt;span class=secno&gt;4.7.10.12.8 &lt;/span&gt;Best practices for metadata text tracks&lt;/h6&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;Text tracks can be used for storing data relating to the media data, for interactive or
+  augmented views.&lt;/p&gt;
+
+  &lt;p&gt;For example, a page showing a sports broadcast could include information about the current
+  score. Suppose a robotics competition was being streamed live. The image could be overlayed with
+  the scores, as follows:&lt;/p&gt;
+
+  &lt;p&gt;&lt;iframe src='data:text/html;charset=utf-8,&lt;!DOCTYPE%20html&gt;%0A&lt;style&gt;%0A%20body%2C%20html%20%7B%20margin%3A%200%3B%20padding%3A%200%3B%20overflow%3A%20hidden%3B%20%7D%0A%20div%20%7B%20width%3A%20600px%3B%20height%3A%20400px%3B%20position%3A%20relative%3B%20%7D%0A%20p%20%7B%20position%3A%20absolute%3B%20top%3A%200%3B%20margin%3A%200.25em%3B%20font%3A%20small-caps%20900%202em%20sans-serif%3B%20text-shadow%3A%20white%200%200%204px%3B%20%7D%0A%20span%20%7B%20display%3A%20block%3B%20%7D%0A%20.left%20%7B%20color%3A%20red%3B%20left%3A%200%3B%20text-align%3A%20left%3B%20%7D%0A%20.right%20%7B%20color%3A%20blue%3B%20right%3A%200%3B%20text-align%3A%20right%3B%20%7D%0A%20.middle%20%7B%20color%3A%20white%3B%20top%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%20text-align%3A%20center%3B%20text-shadow%3A%20black%200%200%204px%3B%20%7D%0A%20.middle%20span%20%7B%20display%3A%20inline-block%3B%20margin%3A%200%201em%3B%20font-size%3A%200.75em%3B%20text-transform%3A%20
 uppercase%3B%20%7D%0A&lt;%2Fstyle&gt;%0A&lt;div&gt;%0A%20&lt;img%20src%3D&quot;http%3A%2F%2Fwww.whatwg.org%2Fspecs%2Fweb-apps%2Fcurrent-work%2Fimages%2Frobots.jpeg&quot;&gt;%0A%20&lt;p%20class%3D&quot;score%20left&quot;&gt;&lt;span&gt;Red%20Alliance&lt;%2Fspan&gt;%20&lt;span&gt;78&lt;%2Fspan&gt;&lt;%2Fp&gt;%0A%20&lt;p%20class%3D&quot;score%20right&quot;&gt;&lt;span&gt;Blue%20Alliance&lt;%2Fspan&gt;%20&lt;span&gt;66&lt;%2Fspan&gt;&lt;%2Fp&gt;%0A%20&lt;p%20class%3D&quot;score%20middle&quot;&gt;&lt;span&gt;Qual%20Match%2037&lt;%2Fspan&gt;%20&lt;span&gt;Friday%2014%3A21&lt;%2Fspan&gt;%0A&lt;%2Fdiv&gt;' width=600 height=400&gt;&lt;/iframe&gt;
+
+  &lt;p&gt;In order to make the score display render correctly whenever the user seeks to an arbitrary
+  point in the video, the metadata text track cues need to be as long as is appropriate for the
+  score. For example, in the frame above, there would be maybe one cue that lasts the length of the
+  match that gives the match number, one cue that lasts until the blue alliance's score changes, and
+  one cue that lasts until the red alliance's score changes. If the video is just a stream of the
+  live event, the time in the bottom right would presumably be automatically derived from the
+  current video time, rather than based on a cue. However, if the video was just the highlights,
+  then that might be given in cues also.&lt;/p&gt;
+
+  &lt;p&gt;The following shows what fragments of this could look like in a WebVTT file:&lt;/p&gt;
+
+  &lt;pre&gt;WEBVTT
+
+...
+
+05:10:00.000 --&gt; 05:12:15.000
+matchtype:qual
+matchnumber:37
+
+...
+
+05:11:02.251 --&gt; 05:11:17.198
+red:78
+
+05:11:03.672 --&gt; 05:11:54.198
+blue:66
+
+05:11:17.198 --&gt; 05:11:25.912
+red:80
+
+05:11:25.912 --&gt; 05:11:26.522
+red:83
+
+05:11:26.522 --&gt; 05:11:26.982
+red:86
+
+05:11:26.982 --&gt; 05:11:27.499
+red:89
+
+...&lt;/pre&gt;
+
+  &lt;p&gt;The key here is to notice that the information is given in cues that span the length of time to
+  which the relevant event applies. If, instead, the scores were given as zero-length (or very
+  brief, nearly zero-length) cues when the score changes, for example saying &quot;red+2&quot; at
+  05:11:17.198, &quot;red+3&quot; at 05:11:25.912, etc, problems arise: primarily, seeking is much harder to
+  implement, as the script has to walk the entire list of cues to make sure that no notifications
+  have been missed; but also, if the cues are short it's possible the script will never see that
+  they are active unless it listens to them specifically.&lt;/p&gt;
+
+  &lt;p&gt;When using cues in this manner, authors are encouraged to use the &lt;code title=event-media-cuechange&gt;&lt;a href=#event-media-cuechange&gt;cuechange&lt;/a&gt;&lt;/code&gt; event to update the current annotations. (In
+  particular, using the &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; event would be less
+  appropriate as it would require doing work even when the cues haven't changed, and, more
+  importantly, would introduce a higher latency between when the metatata cues become active and
+  when the display is updated, this &lt;code title=event-media-timeupdate&gt;&lt;a href=#event-media-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; events
+  are rate-limited.)&lt;/p&gt;
+
+
+
   &lt;h5 id=user-interface&gt;&lt;span class=secno&gt;4.7.10.13 &lt;/span&gt;User interface&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=attr-media-controls title=attr-media-controls&gt;&lt;code&gt;controls&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;a href=#boolean-attribute&gt;boolean
@@ -103064,6 +103137,13 @@
    (&lt;a itemprop=license href=<A HREF="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</A>&gt;CC BY-SA 3.0&lt;/a&gt;)&lt;/p&gt;
   &lt;/div&gt;
 
+  &lt;div itemscope=&quot;&quot; itemtype=<A HREF="http://n.whatwg.org/work">http://n.whatwg.org/work</A>&gt;
+   &lt;p&gt;The photograph of robot 148 climbing the tower at the FIRST Robotics Competition 2013 Silicon Valley Regional is based on
+   &lt;a itemprop=work href=<A HREF="http://www.flickr.com/photos/lenore-m/8631391979/">http://www.flickr.com/photos/lenore-m/8631391979/</A>&gt;a work&lt;/a&gt; by
+   &lt;a itemprop=<A HREF="http://creativecommons.org/ns#attributionURL">http://creativecommons.org/ns#attributionURL</A> href=<A HREF="http://www.flickr.com/photos/lenore-m/">http://www.flickr.com/photos/lenore-m/</A>&gt;Lenore Edman&lt;/a&gt;.
+   (&lt;a itemprop=license href=<A HREF="http://creativecommons.org/licenses/by/2.0/">http://creativecommons.org/licenses/by/2.0/</A>&gt;CC BY 2.0&lt;/a&gt;)&lt;/p&gt;
+  &lt;/div&gt;
+
   &lt;p&gt;Thanks also to the Microsoft blogging community for some ideas, to the attendees of the W3C
   Workshop on Web Applications and Compound Documents for inspiration, to the #mrt crew, the #mrt.no
   crew, and the #whatwg crew, and to Pillar and Hedral for their ideas and support.&lt;/p&gt;

Modified: source
===================================================================
--- source	2014-01-28 18:49:55 UTC (rev 8427)
+++ source	2014-01-28 20:17:38 UTC (rev 8428)
@@ -33013,6 +33013,79 @@
   &lt;/div&gt;
 
 
+
+  &lt;h6&gt;Best practices for metadata text tracks&lt;/h6&gt;
+
+  &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
+
+  &lt;p&gt;Text tracks can be used for storing data relating to the media data, for interactive or
+  augmented views.&lt;/p&gt;
+
+  &lt;p&gt;For example, a page showing a sports broadcast could include information about the current
+  score. Suppose a robotics competition was being streamed live. The image could be overlayed with
+  the scores, as follows:&lt;/p&gt;
+
+  &lt;p&gt;&lt;iframe src='data:text/html;charset=utf-8,&lt;!DOCTYPE%20html&gt;%0A&lt;style&gt;%0A%20body%2C%20html%20%7B%20margin%3A%200%3B%20padding%3A%200%3B%20overflow%3A%20hidden%3B%20%7D%0A%20div%20%7B%20width%3A%20600px%3B%20height%3A%20400px%3B%20position%3A%20relative%3B%20%7D%0A%20p%20%7B%20position%3A%20absolute%3B%20top%3A%200%3B%20margin%3A%200.25em%3B%20font%3A%20small-caps%20900%202em%20sans-serif%3B%20text-shadow%3A%20white%200%200%204px%3B%20%7D%0A%20span%20%7B%20display%3A%20block%3B%20%7D%0A%20.left%20%7B%20color%3A%20red%3B%20left%3A%200%3B%20text-align%3A%20left%3B%20%7D%0A%20.right%20%7B%20color%3A%20blue%3B%20right%3A%200%3B%20text-align%3A%20right%3B%20%7D%0A%20.middle%20%7B%20color%3A%20white%3B%20top%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%20text-align%3A%20center%3B%20text-shadow%3A%20black%200%200%204px%3B%20%7D%0A%20.middle%20span%20%7B%20display%3A%20inline-block%3B%20margin%3A%200%201em%3B%20font-size%3A%200.75em%3B%20text-transform%3A%20
 uppercase%3B%20%7D%0A&lt;%2Fstyle&gt;%0A&lt;div&gt;%0A%20&lt;img%20src%3D&quot;http%3A%2F%2Fwww.whatwg.org%2Fspecs%2Fweb-apps%2Fcurrent-work%2Fimages%2Frobots.jpeg&quot;&gt;%0A%20&lt;p%20class%3D&quot;score%20left&quot;&gt;&lt;span&gt;Red%20Alliance&lt;%2Fspan&gt;%20&lt;span&gt;78&lt;%2Fspan&gt;&lt;%2Fp&gt;%0A%20&lt;p%20class%3D&quot;score%20right&quot;&gt;&lt;span&gt;Blue%20Alliance&lt;%2Fspan&gt;%20&lt;span&gt;66&lt;%2Fspan&gt;&lt;%2Fp&gt;%0A%20&lt;p%20class%3D&quot;score%20middle&quot;&gt;&lt;span&gt;Qual%20Match%2037&lt;%2Fspan&gt;%20&lt;span&gt;Friday%2014%3A21&lt;%2Fspan&gt;%0A&lt;%2Fdiv&gt;' width=&quot;600&quot; height=&quot;400&quot;&gt;&lt;/iframe&gt;
+
+  &lt;p&gt;In order to make the score display render correctly whenever the user seeks to an arbitrary
+  point in the video, the metadata text track cues need to be as long as is appropriate for the
+  score. For example, in the frame above, there would be maybe one cue that lasts the length of the
+  match that gives the match number, one cue that lasts until the blue alliance's score changes, and
+  one cue that lasts until the red alliance's score changes. If the video is just a stream of the
+  live event, the time in the bottom right would presumably be automatically derived from the
+  current video time, rather than based on a cue. However, if the video was just the highlights,
+  then that might be given in cues also.&lt;/p&gt;
+
+  &lt;p&gt;The following shows what fragments of this could look like in a WebVTT file:&lt;/p&gt;
+
+  &lt;pre&gt;WEBVTT
+
+...
+
+05:10:00.000 --&gt; 05:12:15.000
+matchtype:qual
+matchnumber:37
+
+...
+
+05:11:02.251 --&gt; 05:11:17.198
+red:78
+
+05:11:03.672 --&gt; 05:11:54.198
+blue:66
+
+05:11:17.198 --&gt; 05:11:25.912
+red:80
+
+05:11:25.912 --&gt; 05:11:26.522
+red:83
+
+05:11:26.522 --&gt; 05:11:26.982
+red:86
+
+05:11:26.982 --&gt; 05:11:27.499
+red:89
+
+...&lt;/pre&gt;
+
+  &lt;p&gt;The key here is to notice that the information is given in cues that span the length of time to
+  which the relevant event applies. If, instead, the scores were given as zero-length (or very
+  brief, nearly zero-length) cues when the score changes, for example saying &quot;red+2&quot; at
+  05:11:17.198, &quot;red+3&quot; at 05:11:25.912, etc, problems arise: primarily, seeking is much harder to
+  implement, as the script has to walk the entire list of cues to make sure that no notifications
+  have been missed; but also, if the cues are short it's possible the script will never see that
+  they are active unless it listens to them specifically.&lt;/p&gt;
+
+  &lt;p&gt;When using cues in this manner, authors are encouraged to use the &lt;code
+  data-x=&quot;event-media-cuechange&quot;&gt;cuechange&lt;/code&gt; event to update the current annotations. (In
+  particular, using the &lt;code data-x=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; event would be less
+  appropriate as it would require doing work even when the cues haven't changed, and, more
+  importantly, would introduce a higher latency between when the metatata cues become active and
+  when the display is updated, this &lt;code data-x=&quot;event-media-timeupdate&quot;&gt;timeupdate&lt;/code&gt; events
+  are rate-limited.)&lt;/p&gt;
+
+
+
   &lt;h5&gt;User interface&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn data-x=&quot;attr-media-controls&quot;&gt;&lt;code&gt;controls&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;span&gt;boolean
@@ -115060,6 +115133,13 @@
    (&lt;a itemprop=&quot;license&quot; href=&quot;<A HREF="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</A>&quot;&gt;CC BY-SA 3.0&lt;/a&gt;)&lt;/p&gt;
   &lt;/div&gt;
 
+  &lt;div itemscope itemtype=&quot;<A HREF="http://n.whatwg.org/work">http://n.whatwg.org/work</A>&quot;&gt;
+   &lt;p&gt;The photograph of robot 148 climbing the tower at the FIRST Robotics Competition 2013 Silicon Valley Regional is based on
+   &lt;a itemprop=&quot;work&quot; href=&quot;<A HREF="http://www.flickr.com/photos/lenore-m/8631391979/">http://www.flickr.com/photos/lenore-m/8631391979/</A>&quot;&gt;a work&lt;/a&gt; by
+   &lt;a itemprop=&quot;<A HREF="http://creativecommons.org/ns#attributionURL">http://creativecommons.org/ns#attributionURL</A>&quot; href=&quot;<A HREF="http://www.flickr.com/photos/lenore-m/">http://www.flickr.com/photos/lenore-m/</A>&quot;&gt;Lenore Edman&lt;/a&gt;.
+   (&lt;a itemprop=&quot;license&quot; href=&quot;<A HREF="http://creativecommons.org/licenses/by/2.0/">http://creativecommons.org/licenses/by/2.0/</A>&quot;&gt;CC BY 2.0&lt;/a&gt;)&lt;/p&gt;
+  &lt;/div&gt;
+
   &lt;p&gt;Thanks also to the Microsoft blogging community for some ideas, to the attendees of the W3C
   Workshop on Web Applications and Compound Documents for inspiration, to the #mrt crew, the #mrt.no
   crew, and the #whatwg crew, and to Pillar and Hedral for their ideas and support.&lt;/p&gt;


</PRE>
<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23045">[ date ]</a>
              <a href="thread.html#23045">[ thread ]</a>
              <a href="subject.html#23045">[ subject ]</a>
              <a href="author.html#23045">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
