<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8457 - [giow] (0) Make non-modal dialogs not center	automatically. Fixing https://www.w [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8457%20-%20%5Bgiow%5D%20%280%29%20Make%20non-modal%20dialogs%20not%20center%0A%09automatically.%20Fixing%20https%3A//www.w%20%5B...%5D&In-Reply-To=%3C20140204170441.6F776C3C5965%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8457 - [giow] (0) Make non-modal dialogs not center	automatically. Fixing https://www.w [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8457%20-%20%5Bgiow%5D%20%280%29%20Make%20non-modal%20dialogs%20not%20center%0A%09automatically.%20Fixing%20https%3A//www.w%20%5B...%5D&In-Reply-To=%3C20140204170441.6F776C3C5965%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8457 - [giow] (0) Make non-modal dialogs not center	automatically. Fixing https://www.w [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Feb  4 09:04:41 PST 2014</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23074">[ date ]</a>
              <a href="thread.html#23074">[ thread ]</a>
              <a href="subject.html#23074">[ subject ]</a>
              <a href="author.html#23074">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2014-02-04 09:04:40 -0800 (Tue, 04 Feb 2014)
New Revision: 8457

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Make non-modal dialogs not center automatically.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=20418">https://www.w3.org/Bugs/Public/show_bug.cgi?id=20418</A>
Affected topics: CSS, DOM APIs, HTML

Modified: complete.html
===================================================================
--- complete.html	2014-02-03 23:39:07 UTC (rev 8456)
+++ complete.html	2014-02-04 17:04:40 UTC (rev 8457)
@@ -298,7 +298,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> class=logo&gt;&lt;img width=101 src=/images/logo alt=WHATWG height=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 3 February 2014&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 4 February 2014&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -52092,18 +52092,17 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;code title=dom-dialog-show&gt;&lt;a href=#dom-dialog-show&gt;show()&lt;/a&gt;&lt;/code&gt; method was invoked with an argument,
    &lt;a href=#set-up-the-position&gt;set up the position&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element, using that argument as the
-   anchor. Otherwise, &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of the dialog
-   element.&lt;/li&gt;
+   anchor. Otherwise, set the &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; to the &lt;a href=#normal-alignment&gt;normal alignment&lt;/a&gt; mode.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;Each &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has a stack of &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements known as the
   &lt;dfn id=pending-dialog-stack&gt;pending dialog stack&lt;/dfn&gt;. When a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is created, this stack must be
   initialized to be empty.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When an element is added to the &lt;a href=#pending-dialog-stack&gt;pending dialog stack&lt;/a&gt;, it must also be added to the
-  &lt;a href=#top-layer&gt;top layer&lt;/a&gt; layer and its containing block must be the initial containing block. When
+  &lt;a href=#top-layer&gt;top layer&lt;/a&gt; layer. When
   an element is removed from the &lt;a href=#pending-dialog-stack&gt;pending dialog stack&lt;/a&gt;, it must be removed from the
-  &lt;a href=#top-layer&gt;top layer&lt;/a&gt;, and its containing block must revert to that given by the regular
-  containing block rules as defined by CSS. &lt;a href=#refsFULLSCREEN&gt;[FULLSCREEN]&lt;/a&gt; &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+  &lt;a href=#top-layer&gt;top layer&lt;/a&gt;. &lt;a href=#refsFULLSCREEN&gt;[FULLSCREEN]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;When the &lt;dfn id=dom-dialog-showmodal title=dom-dialog-showModal&gt;&lt;code&gt;showModal()&lt;/code&gt;&lt;/dfn&gt; method is invoked,
   the user agent must run the following steps:&lt;/p&gt;
@@ -52119,10 +52118,10 @@
 
    &lt;li&gt;&lt;p&gt;Add an &lt;code title=attr-dialog-open&gt;&lt;a href=#attr-dialog-open&gt;open&lt;/a&gt;&lt;/code&gt; attribute to &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, whose value is the empty string.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;If the &lt;code title=dom-dialog-showModal&gt;&lt;a href=#dom-dialog-showmodal&gt;showModal()&lt;/a&gt;&lt;/code&gt; method was invoked with an
    argument, &lt;a href=#set-up-the-position&gt;set up the position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, using that argument as
-   the anchor. Otherwise, &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of the dialog
-   element.&lt;/li&gt;
+   the anchor. Otherwise, set the &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; to the &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; mode.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; be &lt;a href=#blocked-by-a-modal-dialog title=&quot;blocked by a modal
    dialog&quot;&gt;blocked by the modal dialog&lt;/a&gt; &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;.&lt;/li&gt;
@@ -52210,30 +52209,31 @@
 
   &lt;p class=note&gt;An example of such a UI mechanism would be the user pressing the &quot;Escape&quot; key.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;All &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements are always in one of two modes: &lt;dfn id=mundanely-aligned&gt;mundanely aligned&lt;/dfn&gt;,
-  or &lt;dfn id=magically-aligned&gt;magically aligned&lt;/dfn&gt;. When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element is created, it must be placed
-  in the &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; mode and the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static
-  position&lt;/a&gt; for that element, without an anchor.&lt;/p&gt;
+  &lt;hr&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;All &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements are always in one of three modes: &lt;dfn id=normal-alignment&gt;normal alignment&lt;/dfn&gt;,
+  &lt;dfn id=centered-alignment&gt;centered alignment&lt;/dfn&gt;, and &lt;dfn id=magic-alignment&gt;magic alignment&lt;/dfn&gt;.
+  When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element is created, it must be placed
+  in the &lt;a href=#normal-alignment&gt;normal alignment&lt;/a&gt; mode. In this mode, normal CSS requirements apply to the element. The 
+  &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; mode is only used for &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements that are in the &lt;a href=#top-layer&gt;top layer&lt;/a&gt;.
+  &lt;a href=#refsFULLSCREEN&gt;[FULLSCREEN]&lt;/a&gt; &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;When a user agent is to &lt;dfn id=set-up-the-default-static-position&gt;set up the default static position&lt;/dfn&gt; of an element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, if that element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, it must
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When an element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; is placed in &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; mode, and when it is in that mode
+  and has new rendering boxes created, the user agent must
   set up the element such that its top static position, for the purposes of calculating the used
   value of the 'top' property, is the value that would place the element's top margin edge as far
   from the top of the viewport as the element's bottom margin edge from the bottom of the viewport,
   if the element's height is less than the height of the viewport, and otherwise is the value that
   would place the element's top margin edge at the top of the viewport.&lt;/p&gt;
 
-  &lt;p&gt;If there is a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element that is &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; and that is
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;If there is a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element with &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; and that is
   &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt; when its &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; changes viewport width (as
-  measured in CSS pixels), then the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt;
-  of all such elements in that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; again, still without anchors.&lt;/p&gt;
+  measured in CSS pixels), then the user agent must recreate the element's boxes, recalculating its top static position
+  as in the previous paragraph.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element that is &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; starts &lt;a href=#being-rendered&gt;being
-  rendered&lt;/a&gt;, the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of that
-  element, without an anchor.&lt;/p&gt;
-
-  &lt;p&gt;This top static position of a &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element must
-  remain the element's top static position until the &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt;
-  algorithm is once again invoked for that element. (The element's static position is only used in
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;This top static position of a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element with &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; must
+  remain the element's top static position until its boxes are recreated. (The element's static position is only used in
   calculating the used value of the 'top' property in certain situations; it's not used, for
   instance, to position the element if its 'position' property is set to 'static'.)&lt;/p&gt;
 
@@ -52245,9 +52245,9 @@
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt; is a &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; object, then run these
     substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;'s target element does not have a rendered box, or is in a
-     different document than &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be
-     &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt;, &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, and abort the &lt;a href=#set-up-the-position&gt;set up the position&lt;/a&gt;
+    &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;'s target element does not have a rendered box, or is in a
+     different document than &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be in the
+     &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; mode, and abort the &lt;a href=#set-up-the-position&gt;set up the position&lt;/a&gt;
      steps.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;anchor element&lt;/var&gt; be an anonymous element rendered as a box with
@@ -52259,19 +52259,21 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;a href=#magically-aligned&gt;magically aligned&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;anchor
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Put &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; in the &lt;a href=#magic-alignment&gt;magic alignment&lt;/a&gt; mode, aligned to &lt;var title=&quot;&quot;&gt;anchor
    element&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is &lt;a href=#magically-aligned&gt;magically aligned&lt;/a&gt; to an element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, the following requirements apply:&lt;/p&gt;
+  &lt;/ol&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; has &lt;a href=#magic-alignment&gt;magic alignment&lt;/a&gt;, aligned to an element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, the following requirements apply:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If at any time either &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease having rendered
     boxes, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease being in the same
     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; ceases being earlier than &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;
-    in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt;,
-    and &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an
-    anchor.&lt;/p&gt;
+    in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, then, if &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; is in the &lt;a href=#pending-dialog-stack&gt;pending dialog
+    stack&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;'s mode become &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt;,
+    otherwise, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;'s mode become &lt;a href=#normal-alignment&gt;normal alignment&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -52389,13 +52391,14 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;When an element's 'position' property computes to '&lt;dfn id=css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
     apply and must compute to 'none', the 'display' property must compute to a value as described by
     the table in &lt;a href=<A HREF="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo</A>&gt;the section of CSS
     2.1 describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;,
     and the element's box must be positioned using the rules for absolute positioning but with its
     static position set such that if the box is positioned in its static position, its anchor point
-    is exactly aligned over the anchor point of the element to which it is &lt;a href=#magically-aligned&gt;magically
+    is exactly aligned over the anchor point of the element to which it is &lt;a href=#magic-alignment title=&quot;magic alignment&quot;&gt;magically
     aligned&lt;/a&gt;. Elements aligned in this way are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes
     of determining the containing block of other elements, the '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;' keyword must be treated like
     the 'absolute' keyword.&lt;/p&gt;

Modified: index
===================================================================
--- index	2014-02-03 23:39:07 UTC (rev 8456)
+++ index	2014-02-04 17:04:40 UTC (rev 8457)
@@ -298,7 +298,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> class=logo&gt;&lt;img width=101 src=/images/logo alt=WHATWG height=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 3 February 2014&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 4 February 2014&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -52092,18 +52092,17 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;code title=dom-dialog-show&gt;&lt;a href=#dom-dialog-show&gt;show()&lt;/a&gt;&lt;/code&gt; method was invoked with an argument,
    &lt;a href=#set-up-the-position&gt;set up the position&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element, using that argument as the
-   anchor. Otherwise, &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of the dialog
-   element.&lt;/li&gt;
+   anchor. Otherwise, set the &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; to the &lt;a href=#normal-alignment&gt;normal alignment&lt;/a&gt; mode.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;Each &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has a stack of &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements known as the
   &lt;dfn id=pending-dialog-stack&gt;pending dialog stack&lt;/dfn&gt;. When a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is created, this stack must be
   initialized to be empty.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When an element is added to the &lt;a href=#pending-dialog-stack&gt;pending dialog stack&lt;/a&gt;, it must also be added to the
-  &lt;a href=#top-layer&gt;top layer&lt;/a&gt; layer and its containing block must be the initial containing block. When
+  &lt;a href=#top-layer&gt;top layer&lt;/a&gt; layer. When
   an element is removed from the &lt;a href=#pending-dialog-stack&gt;pending dialog stack&lt;/a&gt;, it must be removed from the
-  &lt;a href=#top-layer&gt;top layer&lt;/a&gt;, and its containing block must revert to that given by the regular
-  containing block rules as defined by CSS. &lt;a href=#refsFULLSCREEN&gt;[FULLSCREEN]&lt;/a&gt; &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+  &lt;a href=#top-layer&gt;top layer&lt;/a&gt;. &lt;a href=#refsFULLSCREEN&gt;[FULLSCREEN]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;When the &lt;dfn id=dom-dialog-showmodal title=dom-dialog-showModal&gt;&lt;code&gt;showModal()&lt;/code&gt;&lt;/dfn&gt; method is invoked,
   the user agent must run the following steps:&lt;/p&gt;
@@ -52119,10 +52118,10 @@
 
    &lt;li&gt;&lt;p&gt;Add an &lt;code title=attr-dialog-open&gt;&lt;a href=#attr-dialog-open&gt;open&lt;/a&gt;&lt;/code&gt; attribute to &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, whose value is the empty string.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;If the &lt;code title=dom-dialog-showModal&gt;&lt;a href=#dom-dialog-showmodal&gt;showModal()&lt;/a&gt;&lt;/code&gt; method was invoked with an
    argument, &lt;a href=#set-up-the-position&gt;set up the position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, using that argument as
-   the anchor. Otherwise, &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of the dialog
-   element.&lt;/li&gt;
+   the anchor. Otherwise, set the &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; to the &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; mode.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; be &lt;a href=#blocked-by-a-modal-dialog title=&quot;blocked by a modal
    dialog&quot;&gt;blocked by the modal dialog&lt;/a&gt; &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;.&lt;/li&gt;
@@ -52210,30 +52209,31 @@
 
   &lt;p class=note&gt;An example of such a UI mechanism would be the user pressing the &quot;Escape&quot; key.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;All &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements are always in one of two modes: &lt;dfn id=mundanely-aligned&gt;mundanely aligned&lt;/dfn&gt;,
-  or &lt;dfn id=magically-aligned&gt;magically aligned&lt;/dfn&gt;. When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element is created, it must be placed
-  in the &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; mode and the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static
-  position&lt;/a&gt; for that element, without an anchor.&lt;/p&gt;
+  &lt;hr&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;All &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements are always in one of three modes: &lt;dfn id=normal-alignment&gt;normal alignment&lt;/dfn&gt;,
+  &lt;dfn id=centered-alignment&gt;centered alignment&lt;/dfn&gt;, and &lt;dfn id=magic-alignment&gt;magic alignment&lt;/dfn&gt;.
+  When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element is created, it must be placed
+  in the &lt;a href=#normal-alignment&gt;normal alignment&lt;/a&gt; mode. In this mode, normal CSS requirements apply to the element. The 
+  &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; mode is only used for &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements that are in the &lt;a href=#top-layer&gt;top layer&lt;/a&gt;.
+  &lt;a href=#refsFULLSCREEN&gt;[FULLSCREEN]&lt;/a&gt; &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;When a user agent is to &lt;dfn id=set-up-the-default-static-position&gt;set up the default static position&lt;/dfn&gt; of an element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, if that element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, it must
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When an element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; is placed in &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; mode, and when it is in that mode
+  and has new rendering boxes created, the user agent must
   set up the element such that its top static position, for the purposes of calculating the used
   value of the 'top' property, is the value that would place the element's top margin edge as far
   from the top of the viewport as the element's bottom margin edge from the bottom of the viewport,
   if the element's height is less than the height of the viewport, and otherwise is the value that
   would place the element's top margin edge at the top of the viewport.&lt;/p&gt;
 
-  &lt;p&gt;If there is a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element that is &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; and that is
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;If there is a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element with &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; and that is
   &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt; when its &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; changes viewport width (as
-  measured in CSS pixels), then the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt;
-  of all such elements in that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; again, still without anchors.&lt;/p&gt;
+  measured in CSS pixels), then the user agent must recreate the element's boxes, recalculating its top static position
+  as in the previous paragraph.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element that is &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; starts &lt;a href=#being-rendered&gt;being
-  rendered&lt;/a&gt;, the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of that
-  element, without an anchor.&lt;/p&gt;
-
-  &lt;p&gt;This top static position of a &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element must
-  remain the element's top static position until the &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt;
-  algorithm is once again invoked for that element. (The element's static position is only used in
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;This top static position of a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element with &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; must
+  remain the element's top static position until its boxes are recreated. (The element's static position is only used in
   calculating the used value of the 'top' property in certain situations; it's not used, for
   instance, to position the element if its 'position' property is set to 'static'.)&lt;/p&gt;
 
@@ -52245,9 +52245,9 @@
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt; is a &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; object, then run these
     substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;'s target element does not have a rendered box, or is in a
-     different document than &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be
-     &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt;, &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, and abort the &lt;a href=#set-up-the-position&gt;set up the position&lt;/a&gt;
+    &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;'s target element does not have a rendered box, or is in a
+     different document than &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be in the
+     &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt; mode, and abort the &lt;a href=#set-up-the-position&gt;set up the position&lt;/a&gt;
      steps.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;anchor element&lt;/var&gt; be an anonymous element rendered as a box with
@@ -52259,19 +52259,21 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;a href=#magically-aligned&gt;magically aligned&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;anchor
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Put &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; in the &lt;a href=#magic-alignment&gt;magic alignment&lt;/a&gt; mode, aligned to &lt;var title=&quot;&quot;&gt;anchor
    element&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is &lt;a href=#magically-aligned&gt;magically aligned&lt;/a&gt; to an element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, the following requirements apply:&lt;/p&gt;
+  &lt;/ol&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; has &lt;a href=#magic-alignment&gt;magic alignment&lt;/a&gt;, aligned to an element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, the following requirements apply:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If at any time either &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease having rendered
     boxes, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease being in the same
     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; ceases being earlier than &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;
-    in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt;,
-    and &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an
-    anchor.&lt;/p&gt;
+    in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, then, if &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; is in the &lt;a href=#pending-dialog-stack&gt;pending dialog
+    stack&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;'s mode become &lt;a href=#centered-alignment&gt;centered alignment&lt;/a&gt;,
+    otherwise, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;'s mode become &lt;a href=#normal-alignment&gt;normal alignment&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -52389,13 +52391,14 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;When an element's 'position' property computes to '&lt;dfn id=css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
     apply and must compute to 'none', the 'display' property must compute to a value as described by
     the table in &lt;a href=<A HREF="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo</A>&gt;the section of CSS
     2.1 describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;,
     and the element's box must be positioned using the rules for absolute positioning but with its
     static position set such that if the box is positioned in its static position, its anchor point
-    is exactly aligned over the anchor point of the element to which it is &lt;a href=#magically-aligned&gt;magically
+    is exactly aligned over the anchor point of the element to which it is &lt;a href=#magic-alignment title=&quot;magic alignment&quot;&gt;magically
     aligned&lt;/a&gt;. Elements aligned in this way are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes
     of determining the containing block of other elements, the '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;' keyword must be treated like
     the 'absolute' keyword.&lt;/p&gt;

Modified: source
===================================================================
--- source	2014-02-03 23:39:07 UTC (rev 8456)
+++ source	2014-02-04 17:04:40 UTC (rev 8457)
@@ -57561,8 +57561,7 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;code data-x=&quot;dom-dialog-show&quot;&gt;show()&lt;/code&gt; method was invoked with an argument,
    &lt;span&gt;set up the position&lt;/span&gt; of the &lt;code&gt;dialog&lt;/code&gt; element, using that argument as the
-   anchor. Otherwise, &lt;span&gt;set up the default static position&lt;/span&gt; of the dialog
-   element.&lt;/p&gt;&lt;/li&gt;
+   anchor. Otherwise, set the &lt;code&gt;dialog&lt;/code&gt; to the &lt;span&gt;normal alignment&lt;/span&gt; mode.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -57572,12 +57571,11 @@
   &lt;dfn&gt;pending dialog stack&lt;/dfn&gt;. When a &lt;code&gt;Document&lt;/code&gt; is created, this stack must be
   initialized to be empty.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When an element is added to the &lt;span&gt;pending dialog stack&lt;/span&gt;, it must also be added to the
-  &lt;span&gt;top layer&lt;/span&gt; layer and its containing block must be the initial containing block. When
+  &lt;span&gt;top layer&lt;/span&gt; layer. When
   an element is removed from the &lt;span&gt;pending dialog stack&lt;/span&gt;, it must be removed from the
-  &lt;span&gt;top layer&lt;/span&gt;, and its containing block must revert to that given by the regular
-  containing block rules as defined by CSS. &lt;a href=&quot;#refsFULLSCREEN&quot;&gt;[FULLSCREEN]&lt;/a&gt; &lt;a
-  href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+  &lt;span&gt;top layer&lt;/span&gt;. &lt;a href=&quot;#refsFULLSCREEN&quot;&gt;[FULLSCREEN]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;When the &lt;dfn data-x=&quot;dom-dialog-showModal&quot;&gt;&lt;code&gt;showModal()&lt;/code&gt;&lt;/dfn&gt; method is invoked,
   the user agent must run the following steps:&lt;/p&gt;
@@ -57596,10 +57594,10 @@
    &lt;li&gt;&lt;p&gt;Add an &lt;code data-x=&quot;attr-dialog-open&quot;&gt;open&lt;/code&gt; attribute to &lt;var
    data-x=&quot;&quot;&gt;subject&lt;/var&gt;, whose value is the empty string.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;If the &lt;code data-x=&quot;dom-dialog-showModal&quot;&gt;showModal()&lt;/code&gt; method was invoked with an
    argument, &lt;span&gt;set up the position&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt;, using that argument as
-   the anchor. Otherwise, &lt;span&gt;set up the default static position&lt;/span&gt; of the dialog
-   element.&lt;/p&gt;&lt;/li&gt;
+   the anchor. Otherwise, set the &lt;code&gt;dialog&lt;/code&gt; to the &lt;span&gt;centered alignment&lt;/span&gt; mode.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt;'s &lt;code&gt;Document&lt;/code&gt; be &lt;span data-x=&quot;blocked by a modal
    dialog&quot;&gt;blocked by the modal dialog&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -57716,31 +57714,33 @@
 
   &lt;hr&gt;
 
-  &lt;p&gt;All &lt;code&gt;dialog&lt;/code&gt; elements are always in one of two modes: &lt;dfn&gt;mundanely aligned&lt;/dfn&gt;,
-  or &lt;dfn&gt;magically aligned&lt;/dfn&gt;. When a &lt;code&gt;dialog&lt;/code&gt; element is created, it must be placed
-  in the &lt;span&gt;mundanely aligned&lt;/span&gt; mode and the user agent must &lt;span&gt;set up the default static
-  position&lt;/span&gt; for that element, without an anchor.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;All &lt;code&gt;dialog&lt;/code&gt; elements are always in one of three modes: &lt;dfn&gt;normal alignment&lt;/dfn&gt;,
+  &lt;dfn&gt;centered alignment&lt;/dfn&gt;, and &lt;dfn&gt;magic alignment&lt;/dfn&gt;.
+  When a &lt;code&gt;dialog&lt;/code&gt; element is created, it must be placed
+  in the &lt;span&gt;normal alignment&lt;/span&gt; mode. In this mode, normal CSS requirements apply to the element. The 
+  &lt;span&gt;centered alignment&lt;/span&gt; mode is only used for &lt;code&gt;dialog&lt;/code&gt; elements that are in the &lt;span&gt;top layer&lt;/span&gt;.
+  &lt;a href=&quot;#refsFULLSCREEN&quot;&gt;[FULLSCREEN]&lt;/a&gt; &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;When a user agent is to &lt;dfn&gt;set up the default static position&lt;/dfn&gt; of an element &lt;var
-  data-x=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, if that element is &lt;span&gt;being rendered&lt;/span&gt;, it must
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When an element &lt;var
+  data-x=&quot;&quot;&gt;subject&lt;/var&gt; is placed in &lt;span&gt;centered alignment&lt;/span&gt; mode, and when it is in that mode
+  and has new rendering boxes created, the user agent must
   set up the element such that its top static position, for the purposes of calculating the used
   value of the 'top' property, is the value that would place the element's top margin edge as far
   from the top of the viewport as the element's bottom margin edge from the bottom of the viewport,
   if the element's height is less than the height of the viewport, and otherwise is the value that
   would place the element's top margin edge at the top of the viewport.&lt;/p&gt;
 
-  &lt;p&gt;If there is a &lt;code&gt;dialog&lt;/code&gt; element that is &lt;span&gt;mundanely aligned&lt;/span&gt; and that is
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;If there is a &lt;code&gt;dialog&lt;/code&gt; element with &lt;span&gt;centered alignment&lt;/span&gt; and that is
   &lt;span&gt;being rendered&lt;/span&gt; when its &lt;span&gt;browsing context&lt;/span&gt; changes viewport width (as
-  measured in CSS pixels), then the user agent must &lt;span&gt;set up the default static position&lt;/span&gt;
-  of all such elements in that &lt;span&gt;browsing context&lt;/span&gt; again, still without anchors.&lt;/p&gt;
+  measured in CSS pixels), then the user agent must recreate the element's boxes, recalculating its top static position
+  as in the previous paragraph.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;dialog&lt;/code&gt; element that is &lt;span&gt;mundanely aligned&lt;/span&gt; starts &lt;span&gt;being
-  rendered&lt;/span&gt;, the user agent must &lt;span&gt;set up the default static position&lt;/span&gt; of that
-  element, without an anchor.&lt;/p&gt;
-
-  &lt;p&gt;This top static position of a &lt;span&gt;mundanely aligned&lt;/span&gt; &lt;code&gt;dialog&lt;/code&gt; element must
-  remain the element's top static position until the &lt;span&gt;set up the default static position&lt;/span&gt;
-  algorithm is once again invoked for that element. (The element's static position is only used in
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;This top static position of a &lt;code&gt;dialog&lt;/code&gt; element with &lt;span&gt;centered alignment&lt;/span&gt; must
+  remain the element's top static position until its boxes are recreated. (The element's static position is only used in
   calculating the used value of the 'top' property in certain situations; it's not used, for
   instance, to position the element if its 'position' property is set to 'static'.)&lt;/p&gt;
 
@@ -57757,10 +57757,10 @@
 
     &lt;ol&gt;
 
+&lt;!--CLEANUP--&gt;
      &lt;li&gt;&lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;anchor&lt;/var&gt;'s target element does not have a rendered box, or is in a
-     different document than &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt; be
-     &lt;span&gt;mundanely aligned&lt;/span&gt;, &lt;span&gt;set up the default static position&lt;/span&gt; of &lt;var
-     data-x=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, and abort the &lt;span&gt;set up the position&lt;/span&gt;
+     different document than &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt; be in the
+     &lt;span&gt;centered alignment&lt;/span&gt; mode, and abort the &lt;span&gt;set up the position&lt;/span&gt;
      steps.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;anchor element&lt;/var&gt; be an anonymous element rendered as a box with
@@ -57774,24 +57774,27 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;span&gt;magically aligned&lt;/span&gt; to &lt;var data-x=&quot;&quot;&gt;anchor
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Put &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt; in the &lt;span&gt;magic alignment&lt;/span&gt; mode, aligned to &lt;var data-x=&quot;&quot;&gt;anchor
    element&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
-  &lt;p&gt;While an element &lt;var data-x=&quot;&quot;&gt;A&lt;/var&gt; is &lt;span&gt;magically aligned&lt;/span&gt; to an element &lt;var
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;While an element &lt;var data-x=&quot;&quot;&gt;A&lt;/var&gt; has &lt;span&gt;magic alignment&lt;/span&gt;, aligned to an element &lt;var
   data-x=&quot;&quot;&gt;B&lt;/var&gt;, the following requirements apply:&lt;/p&gt;
 
   &lt;ul&gt;
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If at any time either &lt;var data-x=&quot;&quot;&gt;A&lt;/var&gt; or &lt;var data-x=&quot;&quot;&gt;B&lt;/var&gt; cease having rendered
     boxes, &lt;var data-x=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var data-x=&quot;&quot;&gt;B&lt;/var&gt; cease being in the same
     &lt;code&gt;Document&lt;/code&gt;, or &lt;var data-x=&quot;&quot;&gt;B&lt;/var&gt; ceases being earlier than &lt;var data-x=&quot;&quot;&gt;A&lt;/var&gt;
-    in &lt;span&gt;tree order&lt;/span&gt;, let &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;span&gt;mundanely aligned&lt;/span&gt;,
-    and &lt;span&gt;set up the default static position&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt; without an
-    anchor.&lt;/p&gt;
+    in &lt;span&gt;tree order&lt;/span&gt;, then, if &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt; is in the &lt;span&gt;pending dialog
+    stack&lt;/span&gt;, let &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt;'s mode become &lt;span&gt;centered alignment&lt;/span&gt;,
+    otherwise, let &lt;var data-x=&quot;&quot;&gt;subject&lt;/var&gt;'s mode become &lt;span&gt;normal alignment&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -57925,6 +57928,7 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;When an element's 'position' property computes to '&lt;dfn
     data-x=&quot;css-position-absolute-anchored&quot;&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
     apply and must compute to 'none', the 'display' property must compute to a value as described by
@@ -57932,7 +57936,7 @@
     2.1 describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;,
     and the element's box must be positioned using the rules for absolute positioning but with its
     static position set such that if the box is positioned in its static position, its anchor point
-    is exactly aligned over the anchor point of the element to which it is &lt;span&gt;magically
+    is exactly aligned over the anchor point of the element to which it is &lt;span data-x=&quot;magic alignment&quot;&gt;magically
     aligned&lt;/span&gt;. Elements aligned in this way are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes
     of determining the containing block of other elements, the '&lt;span
     data-x=&quot;css-position-absolute-anchored&quot;&gt;absolute-anchored&lt;/span&gt;' keyword must be treated like


</PRE>
<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23074">[ date ]</a>
              <a href="thread.html#23074">[ thread ]</a>
              <a href="subject.html#23074">[ subject ]</a>
              <a href="author.html#23074">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
