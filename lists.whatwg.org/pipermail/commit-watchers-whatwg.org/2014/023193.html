<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8577 - [e] (0) Fix prose around the &lt;textarea&gt; value /	maxlength issues to be slightly [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8577%20-%20%5Be%5D%20%280%29%20Fix%20prose%20around%20the%20%3Ctextarea%3E%20value%20/%0A%09maxlength%20issues%20to%20be%20slightly%20%5B...%5D&In-Reply-To=%3C20140423153817.8EFA6C3C0314%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8577 - [e] (0) Fix prose around the &lt;textarea&gt; value /	maxlength issues to be slightly [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8577%20-%20%5Be%5D%20%280%29%20Fix%20prose%20around%20the%20%3Ctextarea%3E%20value%20/%0A%09maxlength%20issues%20to%20be%20slightly%20%5B...%5D&In-Reply-To=%3C20140423153817.8EFA6C3C0314%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8577 - [e] (0) Fix prose around the &lt;textarea&gt; value /	maxlength issues to be slightly [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Apr 23 08:38:17 PDT 2014</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23193">[ date ]</a>
              <a href="thread.html#23193">[ thread ]</a>
              <a href="subject.html#23193">[ subject ]</a>
              <a href="author.html#23193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2014-04-23 08:38:15 -0700 (Wed, 23 Apr 2014)
New Revision: 8577

Modified:
   complete.html
   index
   source
Log:
[e] (0) Fix prose around the &lt;textarea&gt; value / maxlength issues to be slightly less confusing and ambiguous. Clean up some text around MutationObservers.
Affected topics: DOM APIs, HTML

Modified: complete.html
===================================================================
--- complete.html	2014-04-14 23:21:54 UTC (rev 8576)
+++ complete.html	2014-04-23 15:38:15 UTC (rev 8577)
@@ -298,7 +298,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> class=logo&gt;&lt;img width=101 src=/images/logo alt=WHATWG height=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 14 April 2014&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 23 April 2014&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -3759,7 +3759,6 @@
      &lt;li&gt;The concept of a DOM &lt;dfn id=concept-range title=concept-range&gt;range&lt;/dfn&gt;, and the terms &lt;dfn id=concept-range-start title=concept-range-start&gt;start&lt;/dfn&gt;, &lt;dfn id=concept-range-end title=concept-range-end&gt;end&lt;/dfn&gt;, and &lt;dfn id=concept-range-bp title=concept-range-bp&gt;boundary point&lt;/dfn&gt; as applied to ranges.&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn id=mutationobserver&gt;&lt;code&gt;MutationObserver&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
-     &lt;li&gt;The &lt;dfn id=mutationobserver-scripting-environment&gt;&lt;code&gt;MutationObserver&lt;/code&gt; &lt;var title=&quot;&quot;&gt;scripting environment&lt;/var&gt;&lt;/dfn&gt; concept&lt;/li&gt;
      &lt;li&gt;The &lt;dfn id=concept-mo-invoke title=concept-mo-invoke&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/dfn&gt; algorithm&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn id=promise&gt;Promise&lt;/dfn&gt; interface&lt;/li&gt;
@@ -45792,7 +45791,7 @@
   the element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; IDL attribute.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#concept-form-reset-control title=concept-form-reset-control&gt;reset algorithm&lt;/a&gt; for &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt;
-  elements is to set the element's &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;value&lt;/a&gt; to the
+  elements is to set the element's &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; to the
   value of the element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; IDL attribute.&lt;/p&gt;
 
   &lt;!-- this next bit is also in the &lt;input&gt; Text/Search section --&gt;
@@ -45858,12 +45857,14 @@
 
   &lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For historical reasons, the element's value is normalised in three different ways for three
   different purposes. The &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; is the value as
   it was originally set. It is not normalized. The &lt;a href=#concept-textarea-api-value title=concept-textarea-api-value&gt;API
   value&lt;/a&gt; is the value used in the &lt;code title=dom-textarea-value&gt;&lt;a href=#dom-textarea-value&gt;value&lt;/a&gt;&lt;/code&gt; IDL attribute.
   It is normalized so that line breaks use U+000A LINE FEED (LF) characters. Finally, there is the
-  form submission &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt;. It is normalized so that line breaks
+  &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt;, as used in form submission and other processing models
+  in this specification. It is normalized so that line breaks
   use U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF) character pairs, and in addition, if necessary
   given the element's &lt;code title=attr-textarea-wrap&gt;&lt;a href=#attr-textarea-wrap&gt;wrap&lt;/a&gt;&lt;/code&gt; attribute, additional line breaks
   are inserted to wrap the text at the given width.&lt;/p&gt;
@@ -45878,7 +45879,9 @@
    &lt;li&gt;&lt;p&gt;Replace every remaining U+000D CARRIAGE RETURN character from the &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; with a single U+000A LINE FEED (LF)
    character.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The element's &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt; is defined to be the element's &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; with the following transformation applied:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;The element's &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt; is defined to be the element's &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; with the &lt;a href=#textarea-wrapping-transformation&gt;textarea wrapping
+  transformation&lt;/a&gt; applied. The &lt;dfn id=textarea-wrapping-transformation&gt;textarea wrapping transformation&lt;/dfn&gt; is the following
+  algorithm, as applied to a string:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Replace every occurrence of a U+000D CARRIAGE RETURN (CR) character not followed by a
    U+000A LINE FEED (LF) character, and every occurrence of a U+000A LINE FEED (LF) character not
@@ -45897,9 +45900,11 @@
   by the &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-textarea-dirty title=concept-textarea-dirty&gt;dirty value
   flag&lt;/a&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; element has a &lt;a href=#maximum-allowed-value-length&gt;maximum allowed value length&lt;/a&gt;, then the
   element's children must be such that the &lt;a href=#code-unit-length&gt;code-unit length&lt;/a&gt; of the value of the
-  element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; IDL attribute is equal to or less than the element's
+  element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; IDL attribute with the &lt;a href=#textarea-wrapping-transformation&gt;textarea wrapping
+  transformation&lt;/a&gt; applied is equal to or less than the element's
   &lt;a href=#maximum-allowed-value-length&gt;maximum allowed value length&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=attr-textarea-minlength title=attr-textarea-minlength&gt;&lt;code&gt;minlength&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;a href=#attr-fe-minlength title=attr-fe-minlength&gt;form control &lt;code title=&quot;&quot;&gt;minlength&lt;/code&gt; attribute&lt;/a&gt; controlled
@@ -47480,6 +47485,10 @@
   &lt;p&gt;User agents may prevent the user from causing the element's &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt; to be set to a value whose &lt;a href=#code-unit-length&gt;code-unit length&lt;/a&gt; is
   greater than the element's &lt;a href=#maximum-allowed-value-length&gt;maximum allowed value length&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p class=note&gt;In the case of &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; elements, this is the &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt;, not the &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw
+  value&lt;/a&gt;, so the &lt;a href=#textarea-wrapping-transformation&gt;textarea wrapping transformation&lt;/a&gt; is applied before the
+  &lt;a href=#maximum-allowed-value-length&gt;maximum allowed value length&lt;/a&gt; is checked.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -72239,10 +72248,7 @@
 
   &lt;p class=note&gt;The Web IDL specification also uses these algorithms. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;hr&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;For the purposes of &lt;code&gt;&lt;a href=#mutationobserver&gt;MutationObserver&lt;/a&gt;&lt;/code&gt;
-  objects, each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; is a distinct &lt;var title=&quot;MutationObserver scripting environment&quot;&gt;&lt;a href=#mutationobserver-scripting-environment&gt;scripting environment&lt;/a&gt;&lt;/var&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; has a &lt;dfn id=global-script-clean-up-jobs-list&gt;global script
+  &lt;hr&gt;&lt;p&gt;Each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; has a &lt;dfn id=global-script-clean-up-jobs-list&gt;global script
   clean-up jobs list&lt;/dfn&gt;, which must initially be empty. A global script clean-up job cannot run
   scripts, and cannot be sensitive to the order in which other clean-up jobs are executed. The File
   API uses this to release &lt;code title=&quot;&quot;&gt;blob:&lt;/code&gt; URLs. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
@@ -72676,17 +72682,6 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;
-
-    &lt;p&gt;&lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;Invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/a&gt; for the
-    &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; to which the &lt;a href=#responsible-browsing-context&gt;responsible
-    browsing context&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt; belongs.&lt;/p&gt;
-
-    &lt;p class=critical&gt;This will be removed once mutation observers have been updated to use the
-    &lt;a href=#microtask-queue&gt;microtask queue&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Microtask queue handling&lt;/i&gt;: If the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#microtask-queue&gt;microtask
    queue&lt;/a&gt; is empty, jump to the &lt;i&gt;done&lt;/i&gt; step below.&lt;/li&gt;
 

Modified: index
===================================================================
--- index	2014-04-14 23:21:54 UTC (rev 8576)
+++ index	2014-04-23 15:38:15 UTC (rev 8577)
@@ -298,7 +298,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> class=logo&gt;&lt;img width=101 src=/images/logo alt=WHATWG height=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 14 April 2014&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 23 April 2014&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -3759,7 +3759,6 @@
      &lt;li&gt;The concept of a DOM &lt;dfn id=concept-range title=concept-range&gt;range&lt;/dfn&gt;, and the terms &lt;dfn id=concept-range-start title=concept-range-start&gt;start&lt;/dfn&gt;, &lt;dfn id=concept-range-end title=concept-range-end&gt;end&lt;/dfn&gt;, and &lt;dfn id=concept-range-bp title=concept-range-bp&gt;boundary point&lt;/dfn&gt; as applied to ranges.&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn id=mutationobserver&gt;&lt;code&gt;MutationObserver&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
-     &lt;li&gt;The &lt;dfn id=mutationobserver-scripting-environment&gt;&lt;code&gt;MutationObserver&lt;/code&gt; &lt;var title=&quot;&quot;&gt;scripting environment&lt;/var&gt;&lt;/dfn&gt; concept&lt;/li&gt;
      &lt;li&gt;The &lt;dfn id=concept-mo-invoke title=concept-mo-invoke&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/dfn&gt; algorithm&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn id=promise&gt;Promise&lt;/dfn&gt; interface&lt;/li&gt;
@@ -45792,7 +45791,7 @@
   the element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; IDL attribute.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#concept-form-reset-control title=concept-form-reset-control&gt;reset algorithm&lt;/a&gt; for &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt;
-  elements is to set the element's &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;value&lt;/a&gt; to the
+  elements is to set the element's &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; to the
   value of the element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; IDL attribute.&lt;/p&gt;
 
   &lt;!-- this next bit is also in the &lt;input&gt; Text/Search section --&gt;
@@ -45858,12 +45857,14 @@
 
   &lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For historical reasons, the element's value is normalised in three different ways for three
   different purposes. The &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; is the value as
   it was originally set. It is not normalized. The &lt;a href=#concept-textarea-api-value title=concept-textarea-api-value&gt;API
   value&lt;/a&gt; is the value used in the &lt;code title=dom-textarea-value&gt;&lt;a href=#dom-textarea-value&gt;value&lt;/a&gt;&lt;/code&gt; IDL attribute.
   It is normalized so that line breaks use U+000A LINE FEED (LF) characters. Finally, there is the
-  form submission &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt;. It is normalized so that line breaks
+  &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt;, as used in form submission and other processing models
+  in this specification. It is normalized so that line breaks
   use U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF) character pairs, and in addition, if necessary
   given the element's &lt;code title=attr-textarea-wrap&gt;&lt;a href=#attr-textarea-wrap&gt;wrap&lt;/a&gt;&lt;/code&gt; attribute, additional line breaks
   are inserted to wrap the text at the given width.&lt;/p&gt;
@@ -45878,7 +45879,9 @@
    &lt;li&gt;&lt;p&gt;Replace every remaining U+000D CARRIAGE RETURN character from the &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; with a single U+000A LINE FEED (LF)
    character.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The element's &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt; is defined to be the element's &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; with the following transformation applied:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;The element's &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt; is defined to be the element's &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw value&lt;/a&gt; with the &lt;a href=#textarea-wrapping-transformation&gt;textarea wrapping
+  transformation&lt;/a&gt; applied. The &lt;dfn id=textarea-wrapping-transformation&gt;textarea wrapping transformation&lt;/dfn&gt; is the following
+  algorithm, as applied to a string:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Replace every occurrence of a U+000D CARRIAGE RETURN (CR) character not followed by a
    U+000A LINE FEED (LF) character, and every occurrence of a U+000A LINE FEED (LF) character not
@@ -45897,9 +45900,11 @@
   by the &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-textarea-dirty title=concept-textarea-dirty&gt;dirty value
   flag&lt;/a&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; element has a &lt;a href=#maximum-allowed-value-length&gt;maximum allowed value length&lt;/a&gt;, then the
   element's children must be such that the &lt;a href=#code-unit-length&gt;code-unit length&lt;/a&gt; of the value of the
-  element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; IDL attribute is equal to or less than the element's
+  element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; IDL attribute with the &lt;a href=#textarea-wrapping-transformation&gt;textarea wrapping
+  transformation&lt;/a&gt; applied is equal to or less than the element's
   &lt;a href=#maximum-allowed-value-length&gt;maximum allowed value length&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=attr-textarea-minlength title=attr-textarea-minlength&gt;&lt;code&gt;minlength&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;a href=#attr-fe-minlength title=attr-fe-minlength&gt;form control &lt;code title=&quot;&quot;&gt;minlength&lt;/code&gt; attribute&lt;/a&gt; controlled
@@ -47480,6 +47485,10 @@
   &lt;p&gt;User agents may prevent the user from causing the element's &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt; to be set to a value whose &lt;a href=#code-unit-length&gt;code-unit length&lt;/a&gt; is
   greater than the element's &lt;a href=#maximum-allowed-value-length&gt;maximum allowed value length&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p class=note&gt;In the case of &lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; elements, this is the &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt;, not the &lt;a href=#concept-textarea-raw-value title=concept-textarea-raw-value&gt;raw
+  value&lt;/a&gt;, so the &lt;a href=#textarea-wrapping-transformation&gt;textarea wrapping transformation&lt;/a&gt; is applied before the
+  &lt;a href=#maximum-allowed-value-length&gt;maximum allowed value length&lt;/a&gt; is checked.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -72239,10 +72248,7 @@
 
   &lt;p class=note&gt;The Web IDL specification also uses these algorithms. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;hr&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;For the purposes of &lt;code&gt;&lt;a href=#mutationobserver&gt;MutationObserver&lt;/a&gt;&lt;/code&gt;
-  objects, each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; is a distinct &lt;var title=&quot;MutationObserver scripting environment&quot;&gt;&lt;a href=#mutationobserver-scripting-environment&gt;scripting environment&lt;/a&gt;&lt;/var&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; has a &lt;dfn id=global-script-clean-up-jobs-list&gt;global script
+  &lt;hr&gt;&lt;p&gt;Each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; has a &lt;dfn id=global-script-clean-up-jobs-list&gt;global script
   clean-up jobs list&lt;/dfn&gt;, which must initially be empty. A global script clean-up job cannot run
   scripts, and cannot be sensitive to the order in which other clean-up jobs are executed. The File
   API uses this to release &lt;code title=&quot;&quot;&gt;blob:&lt;/code&gt; URLs. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
@@ -72676,17 +72682,6 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;
-
-    &lt;p&gt;&lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;Invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/a&gt; for the
-    &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; to which the &lt;a href=#responsible-browsing-context&gt;responsible
-    browsing context&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt; belongs.&lt;/p&gt;
-
-    &lt;p class=critical&gt;This will be removed once mutation observers have been updated to use the
-    &lt;a href=#microtask-queue&gt;microtask queue&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Microtask queue handling&lt;/i&gt;: If the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#microtask-queue&gt;microtask
    queue&lt;/a&gt; is empty, jump to the &lt;i&gt;done&lt;/i&gt; step below.&lt;/li&gt;
 

Modified: source
===================================================================
--- source	2014-04-14 23:21:54 UTC (rev 8576)
+++ source	2014-04-23 15:38:15 UTC (rev 8577)
@@ -2472,7 +2472,6 @@
      &lt;li&gt;The concept of a DOM &lt;dfn data-x=&quot;concept-range&quot;&gt;range&lt;/dfn&gt;, and the terms &lt;dfn data-x=&quot;concept-range-start&quot;&gt;start&lt;/dfn&gt;, &lt;dfn data-x=&quot;concept-range-end&quot;&gt;end&lt;/dfn&gt;, and &lt;dfn data-x=&quot;concept-range-bp&quot;&gt;boundary point&lt;/dfn&gt; as applied to ranges.&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn&gt;&lt;code&gt;MutationObserver&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
-     &lt;li&gt;The &lt;dfn&gt;&lt;code&gt;MutationObserver&lt;/code&gt; &lt;var data-x=&quot;&quot;&gt;scripting environment&lt;/var&gt;&lt;/dfn&gt; concept&lt;/li&gt;
      &lt;li&gt;The &lt;dfn data-x=&quot;concept-mo-invoke&quot;&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/dfn&gt; algorithm&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn&gt;Promise&lt;/dfn&gt; interface&lt;/li&gt;
@@ -50202,7 +50201,7 @@
   the element's &lt;code&gt;textContent&lt;/code&gt; IDL attribute.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span data-x=&quot;concept-form-reset-control&quot;&gt;reset algorithm&lt;/span&gt; for &lt;code&gt;textarea&lt;/code&gt;
-  elements is to set the element's &lt;span data-x=&quot;concept-textarea-raw-value&quot;&gt;value&lt;/span&gt; to the
+  elements is to set the element's &lt;span data-x=&quot;concept-textarea-raw-value&quot;&gt;raw value&lt;/span&gt; to the
   value of the element's &lt;code&gt;textContent&lt;/code&gt; IDL attribute.&lt;/p&gt;
 
   &lt;!-- this next bit is also in the &lt;input&gt; Text/Search section --&gt;
@@ -50283,12 +50282,14 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For historical reasons, the element's value is normalised in three different ways for three
   different purposes. The &lt;span data-x=&quot;concept-textarea-raw-value&quot;&gt;raw value&lt;/span&gt; is the value as
   it was originally set. It is not normalized. The &lt;span data-x=&quot;concept-textarea-api-value&quot;&gt;API
   value&lt;/span&gt; is the value used in the &lt;code data-x=&quot;dom-textarea-value&quot;&gt;value&lt;/code&gt; IDL attribute.
   It is normalized so that line breaks use U+000A LINE FEED (LF) characters. Finally, there is the
-  form submission &lt;span data-x=&quot;concept-fe-value&quot;&gt;value&lt;/span&gt;. It is normalized so that line breaks
+  &lt;span data-x=&quot;concept-fe-value&quot;&gt;value&lt;/span&gt;, as used in form submission and other processing models
+  in this specification. It is normalized so that line breaks
   use U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF) character pairs, and in addition, if necessary
   given the element's &lt;code data-x=&quot;attr-textarea-wrap&quot;&gt;wrap&lt;/code&gt; attribute, additional line breaks
   are inserted to wrap the text at the given width.&lt;/p&gt;
@@ -50310,7 +50311,9 @@
   &lt;/ol&gt;
 
   &lt;p&gt;The element's &lt;span data-x=&quot;concept-fe-value&quot;&gt;value&lt;/span&gt; is defined to be the element's &lt;span
-  data-x=&quot;concept-textarea-raw-value&quot;&gt;raw value&lt;/span&gt; with the following transformation applied:&lt;/p&gt;
+  data-x=&quot;concept-textarea-raw-value&quot;&gt;raw value&lt;/span&gt; with the &lt;span&gt;textarea wrapping
+  transformation&lt;/span&gt; applied. The &lt;dfn&gt;textarea wrapping transformation&lt;/dfn&gt; is the following
+  algorithm, as applied to a string:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -50335,9 +50338,11 @@
   by the &lt;code&gt;textarea&lt;/code&gt; element's &lt;span data-x=&quot;concept-textarea-dirty&quot;&gt;dirty value
   flag&lt;/span&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code&gt;textarea&lt;/code&gt; element has a &lt;span&gt;maximum allowed value length&lt;/span&gt;, then the
   element's children must be such that the &lt;span&gt;code-unit length&lt;/span&gt; of the value of the
-  element's &lt;code&gt;textContent&lt;/code&gt; IDL attribute is equal to or less than the element's
+  element's &lt;code&gt;textContent&lt;/code&gt; IDL attribute with the &lt;span&gt;textarea wrapping
+  transformation&lt;/span&gt; applied is equal to or less than the element's
   &lt;span&gt;maximum allowed value length&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn data-x=&quot;attr-textarea-minlength&quot;&gt;&lt;code&gt;minlength&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;span
@@ -52125,6 +52130,11 @@
   data-x=&quot;concept-fe-value&quot;&gt;value&lt;/span&gt; to be set to a value whose &lt;span&gt;code-unit length&lt;/span&gt; is
   greater than the element's &lt;span&gt;maximum allowed value length&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;In the case of &lt;code&gt;textarea&lt;/code&gt; elements, this is the &lt;span
+  data-x=&quot;concept-fe-value&quot;&gt;value&lt;/span&gt;, not the &lt;span data-x=&quot;concept-textarea-raw-value&quot;&gt;raw
+  value&lt;/span&gt;, so the &lt;span&gt;textarea wrapping transformation&lt;/span&gt; is applied before the
+  &lt;span&gt;maximum allowed value length&lt;/span&gt; is checked.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -80740,11 +80750,6 @@
 
   &lt;hr&gt;
 
-&lt;!--CLEANUP--&gt;
-  &lt;p&gt;For the purposes of &lt;code&gt;MutationObserver&lt;/code&gt;
-  objects, each &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt; is a distinct &lt;var
-  data-x=&quot;MutationObserver scripting environment&quot;&gt;scripting environment&lt;/var&gt;.&lt;/p&gt;
-
   &lt;p&gt;Each &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt; has a &lt;dfn&gt;global script
   clean-up jobs list&lt;/dfn&gt;, which must initially be empty. A global script clean-up job cannot run
   scripts, and cannot be sensitive to the order in which other clean-up jobs are executed. The File
@@ -81232,17 +81237,6 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;
-
-    &lt;p&gt;&lt;span data-x=&quot;concept-mo-invoke&quot;&gt;Invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/span&gt; for the
-    &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt; to which the &lt;span&gt;responsible
-    browsing context&lt;/span&gt; specified by the script's &lt;span&gt;settings object&lt;/span&gt; belongs.&lt;/p&gt;
-
-    &lt;p class=&quot;critical&quot;&gt;This will be removed once mutation observers have been updated to use the
-    &lt;span&gt;microtask queue&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Microtask queue handling&lt;/i&gt;: If the &lt;span&gt;event loop&lt;/span&gt;'s &lt;span&gt;microtask
    queue&lt;/span&gt; is empty, jump to the &lt;i&gt;done&lt;/i&gt; step below.&lt;/p&gt;&lt;/li&gt;
 


</PRE>
<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23193">[ date ]</a>
              <a href="thread.html#23193">[ thread ]</a>
              <a href="subject.html#23193">[ subject ]</a>
              <a href="author.html#23193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
