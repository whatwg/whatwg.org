<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8454 - [e] (0) First hack attempt at converting from	referring to the old TypedArray sp [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8454%20-%20%5Be%5D%20%280%29%20First%20hack%20attempt%20at%20converting%20from%0A%09referring%20to%20the%20old%20TypedArray%20sp%20%5B...%5D&In-Reply-To=%3C20140203231613.7F356C3C5D37%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8454 - [e] (0) First hack attempt at converting from	referring to the old TypedArray sp [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8454%20-%20%5Be%5D%20%280%29%20First%20hack%20attempt%20at%20converting%20from%0A%09referring%20to%20the%20old%20TypedArray%20sp%20%5B...%5D&In-Reply-To=%3C20140203231613.7F356C3C5D37%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8454 - [e] (0) First hack attempt at converting from	referring to the old TypedArray sp [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Feb  3 15:16:13 PST 2014</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23071">[ date ]</a>
              <a href="thread.html#23071">[ thread ]</a>
              <a href="subject.html#23071">[ subject ]</a>
              <a href="author.html#23071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2014-02-03 15:16:12 -0800 (Mon, 03 Feb 2014)
New Revision: 8454

Modified:
   complete.html
   index
   source
Log:
[e] (0) First hack attempt at converting from referring to the old TypedArray spec to referring to the JS spec's version. I couldn't work out how to actually do a good job of referring to all the JS algorithms, so please file bugs with proposed replacement text for anything that's poorly done.
Affected topics: Canvas, DOM APIs, HTML

Modified: complete.html
===================================================================
--- complete.html	2014-02-03 21:39:32 UTC (rev 8453)
+++ complete.html	2014-02-03 23:16:12 UTC (rev 8454)
@@ -3665,6 +3665,19 @@
     &lt;p&gt;The ECMAScript &lt;dfn id=js-syntaxerror title=js-SyntaxError&gt;&lt;code&gt;SyntaxError&lt;/code&gt;&lt;/dfn&gt; exception is also
     defined in the ECMAScript specification. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;The &lt;dfn id=arraybuffer&gt;ArrayBuffer&lt;/dfn&gt; and related object types and underlying concepts from the
+    ECMAScript Specification are used for several features in this specification. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p&gt;The following helper IDL is used for referring to &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt;-related types:&lt;/p&gt;
+
+    &lt;pre class=idl&gt;typedef (&lt;dfn id=int8array&gt;Int8Array&lt;/dfn&gt; or &lt;dfn id=uint8array&gt;Uint8Array&lt;/dfn&gt; or &lt;dfn id=uint8clampedarray&gt;Uint8ClampedArray&lt;/dfn&gt; or
+         &lt;dfn id=int16array&gt;Int16Array&lt;/dfn&gt; or &lt;dfn id=uint16array&gt;Uint16Array&lt;/dfn&gt; or
+         &lt;dfn id=int32array&gt;Int32Array&lt;/dfn&gt; or &lt;dfn id=uint32array&gt;Uint32Array&lt;/dfn&gt; or
+         &lt;dfn id=float32array&gt;Float32Array&lt;/dfn&gt; or &lt;dfn id=float64array&gt;Float64Array&lt;/dfn&gt;) &lt;dfn id=arraybufferview&gt;ArrayBufferView&lt;/dfn&gt;;&lt;/pre&gt;
+
+    &lt;p class=note&gt;In particular, the &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; type is used by some &lt;a href=#imagedata title=ImageData&gt;2D canvas APIs&lt;/a&gt;, and the &lt;a href=#network&gt;&lt;code&gt;WebSocket&lt;/code&gt;
+    API&lt;/a&gt; uses &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; objects for handling binary frames.&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -3826,18 +3839,7 @@
     &lt;/ul&gt;&lt;/dd&gt;
 
 
-   &lt;dt&gt;Typed Arrays&lt;/dt&gt;
 
-   &lt;dd&gt;
-
-    &lt;p&gt;The &lt;dfn id=arraybuffer&gt;ArrayBuffer&lt;/dfn&gt; and &lt;dfn id=arraybufferview&gt;ArrayBufferView&lt;/dfn&gt; interfaces and underlying concepts
-    from the Typed Array Specification are used for several features in this specification. The
-    &lt;dfn id=uint8clampedarray&gt;Uint8ClampedArray&lt;/dfn&gt; interface type is specifically used in the definition of the
-    &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's 2D API. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
    &lt;dt&gt;File API&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -8110,6 +8112,7 @@
 
   &lt;h4 id=transferable-objects&gt;&lt;span class=secno&gt;2.7.5 &lt;/span&gt;Transferable objects&lt;/h4&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Some objects support being copied and closed in one operation.
   This is called &lt;i&gt;transferring&lt;/i&gt; the object, and is used in
   particular to transfer ownership of unsharable or expensive
@@ -8117,19 +8120,16 @@
 
   &lt;p&gt;The following &lt;code&gt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&lt;/code&gt; types exist:&lt;/p&gt;
 
-  &lt;ul class=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; (defined in this specification)
    &lt;li&gt;&lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; (defined in this specification)
   &lt;/ul&gt;&lt;div class=impl&gt;
 
   &lt;p&gt;The following IDL block formalizes this:&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
-interface &lt;dfn id=transferable&gt;Transferable&lt;/dfn&gt; { };
-&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;
-&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;
-&lt;a href=#messageport&gt;MessagePort&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;&lt;/pre&gt;
+  &lt;pre class=idl&gt;typedef (&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt; or &lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; or &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;) &lt;dfn id=transferable&gt;Transferable&lt;/dfn&gt;;&lt;/pre&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;To &lt;dfn id=transfer-a-transferable-object&gt;transfer a &lt;code&gt;Transferable&lt;/code&gt; object&lt;/dfn&gt; to a
   new owner, the user agent must run the steps defined for the type of
   object in question. The steps will return a new object of the same
@@ -8142,7 +8142,8 @@
   &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; to a new owner &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;,
   a user agent must create a new &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object pointing at the same underlying
   data as &lt;var title=&quot;&quot;&gt;old&lt;/var&gt;, thus obtaining &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;, must &lt;a href=#concept-transferable-neutered title=concept-Transferable-neutered&gt;neuter&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; object, and must
-  finally return &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  finally return &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- I'm expecting this section to move to the JS spec eventually so I'm leaving it as is for now --&gt;
 
   &lt;p class=note&gt;Rules for how to &lt;a href=#transferCanvasProxy&gt;transfer a
   &lt;code&gt;CanvasProxy&lt;/code&gt; object&lt;/a&gt; and how to &lt;a href=#transferMessagePort&gt;transfer a
@@ -8255,17 +8256,20 @@
      exception and abort the overall &lt;a href=#structured-clone&gt;structured clone&lt;/a&gt; algorithm. Otherwise, let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object whose contents
      are a copy of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;'s contents, with the same length.&lt;/dd&gt;
 
-     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; object&lt;/dt&gt;
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an object with a [[DataView]] internal slot&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed object of the same class as &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, with each IDL attribute defined for that class being set to the value
-      obtained from invoking the &lt;a href=#internal-structured-cloning-algorithm&gt;internal structured cloning algorithm&lt;/a&gt; recursively with
-      the value of the attribute on &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;input&lt;/var&gt;&quot; argument and &lt;var title=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument.&lt;/p&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed object of the same class as &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, with its [[DataView]] internal property present, its
+      [[ViewedArrayBuffer]] internal property set to the value obtained from invoking the
+      &lt;a href=#internal-structured-cloning-algorithm&gt;internal structured cloning algorithm&lt;/a&gt; recursively with the value of the internal
+      property on &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;input&lt;/var&gt;&quot; argument and
+      &lt;var title=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument, and with the
+      [[ByteLength]] and [[ByteOffset]] internal properties set to the same value as their
+      counterparts on &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/p&gt;
 
-      &lt;p class=note&gt;Only IDL attributes defined on the class (including the
-      &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; attributes) are cloned. Properties added by a script, for
-      example, are not cloned.&lt;/p&gt;
+      &lt;!-- the above might not make much sense, but it'll become moot when JS takes over defining
+      how to clone ArrayBufferView objects --&gt;
 
      &lt;/dd&gt;
 
@@ -59057,14 +59061,14 @@
   &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt; for its storage, and must have a zero start offset and a length
   equal to the length of its storage, in bytes. The &lt;a href=#canvas-pixel-arraybuffer&gt;Canvas Pixel
   &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt; must contain the image data. At least one pixel's worth of image
-  data must be returned. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  data must be returned. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn id=canvas-pixel-arraybuffer&gt;Canvas Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/dfn&gt; is an &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; that whose
   data is represented in left-to-right order, row by row top to bottom, starting with the top left,
   with each pixel's red, green, blue, and alpha components being given in that order for each pixel.
   Each component of each pixel represented in this array must be in the range 0..255, representing
   the 8 bit value for that component. The components must be assigned consecutive indices starting
-  with 0 for the top left pixel's red component. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  with 0 for the top left pixel's red component. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt; method writes
   data from &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; structures back to the rendering context's &lt;a href=#scratch-bitmap&gt;scratch
@@ -80490,28 +80494,25 @@
 
    &lt;dd&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, and &lt;i title=&quot;the WebSocket closing
     handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;the WebSocket closing handshake has not yet started&lt;/a&gt;&lt;/i&gt;, then the user
     agent must &lt;i&gt;send a WebSocket Message&lt;/i&gt; comprised of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using a binary
     frame opcode; if the data cannot be sent, e.g. because it would need to be buffered but the
     buffer is full, the user agent must &lt;a href=#concept-websocket-close-fail title=concept-websocket-close-fail&gt;flag the
     WebSocket as full&lt;/a&gt; and then &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt;. The data to be sent is
-    the data stored in the buffer described by the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object. &lt;!-- that
-    sentence is meant to invoke &quot;The ArrayBuffer type describes a buffer used to store data for the
-    array buffer views.&quot; at the top of the Typed Array spec, and &quot;Optional byteOffset and length can
-    be used to limit the section of the buffer referenced&quot; in the definition of the TypedArray
-    constructor --&gt; Any invocation of this method with an &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; argument that
+    the data stored in the buffer described by the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object. Any invocation of this method with an &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; argument that
     does not throw an exception must increase the &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt; attribute by the length of the
-    &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; in bytes. &lt;!-- that sentence is meant to invoke the same as
-    ArrayBuffer.byteLength --&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; in bytes. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/dd&gt;
 
 
-   &lt;dt&gt;If the argument is an &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; object&lt;/dt&gt;
+   &lt;dt&gt;If the argument is an object that matches the &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; type definition&lt;/dt&gt;
 
    &lt;dd&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, and &lt;i title=&quot;the WebSocket closing
     handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;the WebSocket closing handshake has not yet started&lt;/a&gt;&lt;/i&gt;, then the user
     agent must &lt;i&gt;send a WebSocket Message&lt;/i&gt; comprised of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using a binary
@@ -80519,14 +80520,10 @@
     buffer is full, the user agent must &lt;a href=#concept-websocket-close-fail title=concept-websocket-close-fail&gt;flag the
     WebSocket as full&lt;/a&gt; and then &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt;. The data to be sent is
     the data stored in the section of the buffer described by the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object
-    that the &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; object references. &lt;!-- that sentence is meant to invoke
-    &quot;The ArrayBuffer type describes a buffer used to store data for the array buffer views.&quot; at the
-    top of the Typed Array spec, and &quot;Optional byteOffset and length can be used to limit the
-    section of the buffer referenced&quot; in the definition of the TypedArray constructor --&gt; Any
-    invocation of this method with an &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; argument that does not throw an
+    that &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; references. Any
+    invocation of this method with this kind of argument that does not throw an
     exception must increase the &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt;
-    attribute by the length of the &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; in bytes. &lt;!-- that sentence is
-    meant to invoke the same as ArrayBufferView.byteLength --&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    attribute by the length of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;'s buffer in bytes. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -80598,8 +80595,8 @@
     initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute
     to a new &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object that represents &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; as its raw data. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; indicates that the data is Binary, and &lt;code title=dom-WebSocket-binaryType&gt;&lt;a href=#dom-websocket-binarytype&gt;binaryType&lt;/a&gt;&lt;/code&gt; is set to &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, then initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute to a new read-only &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt;
-    object whose contents are &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; indicates that the data is Binary, and &lt;code title=dom-WebSocket-binaryType&gt;&lt;a href=#dom-websocket-binarytype&gt;binaryType&lt;/a&gt;&lt;/code&gt; is set to &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, then initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute to a new read-only &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; &lt;!-- XXXX --&gt;
+    object whose contents are &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -102390,7 +102387,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#texttracklist&gt;TextTrackList&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#timeranges&gt;TimeRanges&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#trackevent&gt;TrackEvent&lt;/a&gt;&lt;/code&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#validitystate&gt;ValidityState&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#videotrack&gt;VideoTrack&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#videotracklist&gt;VideoTrackList&lt;/a&gt;&lt;/code&gt;
@@ -102993,9 +102989,6 @@
    &lt;dt id=refsTOR&gt;[TOR]&lt;/dt&gt;
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=<A HREF="https://www.torproject.org/">https://www.torproject.org/</A>&gt;Tor&lt;/a&gt;&lt;/cite&gt;.&lt;/dd&gt;
 
-   &lt;dt id=refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://www.khronos.org/registry/typedarray/specs/latest/">http://www.khronos.org/registry/typedarray/specs/latest/</A>&gt;Typed Array Specification&lt;/a&gt;&lt;/cite&gt;, D. Herman, K. Russell. Khronos.&lt;/dd&gt;
-
    &lt;dt id=refsTZDATABASE&gt;[TZDATABASE]&lt;/dt&gt;
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=<A HREF="http://www.iana.org/time-zones">http://www.iana.org/time-zones</A>&gt;Time Zone Database&lt;/a&gt;&lt;/cite&gt;. IANA.&lt;/dd&gt;
 

Modified: index
===================================================================
--- index	2014-02-03 21:39:32 UTC (rev 8453)
+++ index	2014-02-03 23:16:12 UTC (rev 8454)
@@ -3665,6 +3665,19 @@
     &lt;p&gt;The ECMAScript &lt;dfn id=js-syntaxerror title=js-SyntaxError&gt;&lt;code&gt;SyntaxError&lt;/code&gt;&lt;/dfn&gt; exception is also
     defined in the ECMAScript specification. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;The &lt;dfn id=arraybuffer&gt;ArrayBuffer&lt;/dfn&gt; and related object types and underlying concepts from the
+    ECMAScript Specification are used for several features in this specification. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p&gt;The following helper IDL is used for referring to &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt;-related types:&lt;/p&gt;
+
+    &lt;pre class=idl&gt;typedef (&lt;dfn id=int8array&gt;Int8Array&lt;/dfn&gt; or &lt;dfn id=uint8array&gt;Uint8Array&lt;/dfn&gt; or &lt;dfn id=uint8clampedarray&gt;Uint8ClampedArray&lt;/dfn&gt; or
+         &lt;dfn id=int16array&gt;Int16Array&lt;/dfn&gt; or &lt;dfn id=uint16array&gt;Uint16Array&lt;/dfn&gt; or
+         &lt;dfn id=int32array&gt;Int32Array&lt;/dfn&gt; or &lt;dfn id=uint32array&gt;Uint32Array&lt;/dfn&gt; or
+         &lt;dfn id=float32array&gt;Float32Array&lt;/dfn&gt; or &lt;dfn id=float64array&gt;Float64Array&lt;/dfn&gt;) &lt;dfn id=arraybufferview&gt;ArrayBufferView&lt;/dfn&gt;;&lt;/pre&gt;
+
+    &lt;p class=note&gt;In particular, the &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; type is used by some &lt;a href=#imagedata title=ImageData&gt;2D canvas APIs&lt;/a&gt;, and the &lt;a href=#network&gt;&lt;code&gt;WebSocket&lt;/code&gt;
+    API&lt;/a&gt; uses &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; objects for handling binary frames.&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -3826,18 +3839,7 @@
     &lt;/ul&gt;&lt;/dd&gt;
 
 
-   &lt;dt&gt;Typed Arrays&lt;/dt&gt;
 
-   &lt;dd&gt;
-
-    &lt;p&gt;The &lt;dfn id=arraybuffer&gt;ArrayBuffer&lt;/dfn&gt; and &lt;dfn id=arraybufferview&gt;ArrayBufferView&lt;/dfn&gt; interfaces and underlying concepts
-    from the Typed Array Specification are used for several features in this specification. The
-    &lt;dfn id=uint8clampedarray&gt;Uint8ClampedArray&lt;/dfn&gt; interface type is specifically used in the definition of the
-    &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's 2D API. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
    &lt;dt&gt;File API&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -8110,6 +8112,7 @@
 
   &lt;h4 id=transferable-objects&gt;&lt;span class=secno&gt;2.7.5 &lt;/span&gt;Transferable objects&lt;/h4&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Some objects support being copied and closed in one operation.
   This is called &lt;i&gt;transferring&lt;/i&gt; the object, and is used in
   particular to transfer ownership of unsharable or expensive
@@ -8117,19 +8120,16 @@
 
   &lt;p&gt;The following &lt;code&gt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&lt;/code&gt; types exist:&lt;/p&gt;
 
-  &lt;ul class=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; (defined in this specification)
    &lt;li&gt;&lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; (defined in this specification)
   &lt;/ul&gt;&lt;div class=impl&gt;
 
   &lt;p&gt;The following IDL block formalizes this:&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
-interface &lt;dfn id=transferable&gt;Transferable&lt;/dfn&gt; { };
-&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;
-&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;
-&lt;a href=#messageport&gt;MessagePort&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;&lt;/pre&gt;
+  &lt;pre class=idl&gt;typedef (&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt; or &lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; or &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;) &lt;dfn id=transferable&gt;Transferable&lt;/dfn&gt;;&lt;/pre&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;To &lt;dfn id=transfer-a-transferable-object&gt;transfer a &lt;code&gt;Transferable&lt;/code&gt; object&lt;/dfn&gt; to a
   new owner, the user agent must run the steps defined for the type of
   object in question. The steps will return a new object of the same
@@ -8142,7 +8142,8 @@
   &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; to a new owner &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;,
   a user agent must create a new &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object pointing at the same underlying
   data as &lt;var title=&quot;&quot;&gt;old&lt;/var&gt;, thus obtaining &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;, must &lt;a href=#concept-transferable-neutered title=concept-Transferable-neutered&gt;neuter&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; object, and must
-  finally return &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  finally return &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- I'm expecting this section to move to the JS spec eventually so I'm leaving it as is for now --&gt;
 
   &lt;p class=note&gt;Rules for how to &lt;a href=#transferCanvasProxy&gt;transfer a
   &lt;code&gt;CanvasProxy&lt;/code&gt; object&lt;/a&gt; and how to &lt;a href=#transferMessagePort&gt;transfer a
@@ -8255,17 +8256,20 @@
      exception and abort the overall &lt;a href=#structured-clone&gt;structured clone&lt;/a&gt; algorithm. Otherwise, let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object whose contents
      are a copy of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;'s contents, with the same length.&lt;/dd&gt;
 
-     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; object&lt;/dt&gt;
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an object with a [[DataView]] internal slot&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed object of the same class as &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, with each IDL attribute defined for that class being set to the value
-      obtained from invoking the &lt;a href=#internal-structured-cloning-algorithm&gt;internal structured cloning algorithm&lt;/a&gt; recursively with
-      the value of the attribute on &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;input&lt;/var&gt;&quot; argument and &lt;var title=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument.&lt;/p&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed object of the same class as &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, with its [[DataView]] internal property present, its
+      [[ViewedArrayBuffer]] internal property set to the value obtained from invoking the
+      &lt;a href=#internal-structured-cloning-algorithm&gt;internal structured cloning algorithm&lt;/a&gt; recursively with the value of the internal
+      property on &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;input&lt;/var&gt;&quot; argument and
+      &lt;var title=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument, and with the
+      [[ByteLength]] and [[ByteOffset]] internal properties set to the same value as their
+      counterparts on &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/p&gt;
 
-      &lt;p class=note&gt;Only IDL attributes defined on the class (including the
-      &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; attributes) are cloned. Properties added by a script, for
-      example, are not cloned.&lt;/p&gt;
+      &lt;!-- the above might not make much sense, but it'll become moot when JS takes over defining
+      how to clone ArrayBufferView objects --&gt;
 
      &lt;/dd&gt;
 
@@ -59057,14 +59061,14 @@
   &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt; for its storage, and must have a zero start offset and a length
   equal to the length of its storage, in bytes. The &lt;a href=#canvas-pixel-arraybuffer&gt;Canvas Pixel
   &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt; must contain the image data. At least one pixel's worth of image
-  data must be returned. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  data must be returned. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn id=canvas-pixel-arraybuffer&gt;Canvas Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/dfn&gt; is an &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; that whose
   data is represented in left-to-right order, row by row top to bottom, starting with the top left,
   with each pixel's red, green, blue, and alpha components being given in that order for each pixel.
   Each component of each pixel represented in this array must be in the range 0..255, representing
   the 8 bit value for that component. The components must be assigned consecutive indices starting
-  with 0 for the top left pixel's red component. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  with 0 for the top left pixel's red component. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt; method writes
   data from &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; structures back to the rendering context's &lt;a href=#scratch-bitmap&gt;scratch
@@ -80490,28 +80494,25 @@
 
    &lt;dd&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, and &lt;i title=&quot;the WebSocket closing
     handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;the WebSocket closing handshake has not yet started&lt;/a&gt;&lt;/i&gt;, then the user
     agent must &lt;i&gt;send a WebSocket Message&lt;/i&gt; comprised of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using a binary
     frame opcode; if the data cannot be sent, e.g. because it would need to be buffered but the
     buffer is full, the user agent must &lt;a href=#concept-websocket-close-fail title=concept-websocket-close-fail&gt;flag the
     WebSocket as full&lt;/a&gt; and then &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt;. The data to be sent is
-    the data stored in the buffer described by the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object. &lt;!-- that
-    sentence is meant to invoke &quot;The ArrayBuffer type describes a buffer used to store data for the
-    array buffer views.&quot; at the top of the Typed Array spec, and &quot;Optional byteOffset and length can
-    be used to limit the section of the buffer referenced&quot; in the definition of the TypedArray
-    constructor --&gt; Any invocation of this method with an &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; argument that
+    the data stored in the buffer described by the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object. Any invocation of this method with an &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; argument that
     does not throw an exception must increase the &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt; attribute by the length of the
-    &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; in bytes. &lt;!-- that sentence is meant to invoke the same as
-    ArrayBuffer.byteLength --&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; in bytes. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/dd&gt;
 
 
-   &lt;dt&gt;If the argument is an &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; object&lt;/dt&gt;
+   &lt;dt&gt;If the argument is an object that matches the &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; type definition&lt;/dt&gt;
 
    &lt;dd&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, and &lt;i title=&quot;the WebSocket closing
     handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;the WebSocket closing handshake has not yet started&lt;/a&gt;&lt;/i&gt;, then the user
     agent must &lt;i&gt;send a WebSocket Message&lt;/i&gt; comprised of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using a binary
@@ -80519,14 +80520,10 @@
     buffer is full, the user agent must &lt;a href=#concept-websocket-close-fail title=concept-websocket-close-fail&gt;flag the
     WebSocket as full&lt;/a&gt; and then &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt;. The data to be sent is
     the data stored in the section of the buffer described by the &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; object
-    that the &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; object references. &lt;!-- that sentence is meant to invoke
-    &quot;The ArrayBuffer type describes a buffer used to store data for the array buffer views.&quot; at the
-    top of the Typed Array spec, and &quot;Optional byteOffset and length can be used to limit the
-    section of the buffer referenced&quot; in the definition of the TypedArray constructor --&gt; Any
-    invocation of this method with an &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; argument that does not throw an
+    that &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; references. Any
+    invocation of this method with this kind of argument that does not throw an
     exception must increase the &lt;code title=dom-WebSocket-bufferedAmount&gt;&lt;a href=#dom-websocket-bufferedamount&gt;bufferedAmount&lt;/a&gt;&lt;/code&gt;
-    attribute by the length of the &lt;code&gt;&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt;&lt;/code&gt; in bytes. &lt;!-- that sentence is
-    meant to invoke the same as ArrayBufferView.byteLength --&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    attribute by the length of &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;'s buffer in bytes. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -80598,8 +80595,8 @@
     initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute
     to a new &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object that represents &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; as its raw data. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; indicates that the data is Binary, and &lt;code title=dom-WebSocket-binaryType&gt;&lt;a href=#dom-websocket-binarytype&gt;binaryType&lt;/a&gt;&lt;/code&gt; is set to &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, then initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute to a new read-only &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt;
-    object whose contents are &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; indicates that the data is Binary, and &lt;code title=dom-WebSocket-binaryType&gt;&lt;a href=#dom-websocket-binarytype&gt;binaryType&lt;/a&gt;&lt;/code&gt; is set to &quot;&lt;code title=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, then initialize &lt;var title=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute to a new read-only &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; &lt;!-- XXXX --&gt;
+    object whose contents are &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -102390,7 +102387,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#texttracklist&gt;TextTrackList&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#timeranges&gt;TimeRanges&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#trackevent&gt;TrackEvent&lt;/a&gt;&lt;/code&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#validitystate&gt;ValidityState&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#videotrack&gt;VideoTrack&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#videotracklist&gt;VideoTrackList&lt;/a&gt;&lt;/code&gt;
@@ -102993,9 +102989,6 @@
    &lt;dt id=refsTOR&gt;[TOR]&lt;/dt&gt;
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=<A HREF="https://www.torproject.org/">https://www.torproject.org/</A>&gt;Tor&lt;/a&gt;&lt;/cite&gt;.&lt;/dd&gt;
 
-   &lt;dt id=refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://www.khronos.org/registry/typedarray/specs/latest/">http://www.khronos.org/registry/typedarray/specs/latest/</A>&gt;Typed Array Specification&lt;/a&gt;&lt;/cite&gt;, D. Herman, K. Russell. Khronos.&lt;/dd&gt;
-
    &lt;dt id=refsTZDATABASE&gt;[TZDATABASE]&lt;/dt&gt;
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=<A HREF="http://www.iana.org/time-zones">http://www.iana.org/time-zones</A>&gt;Time Zone Database&lt;/a&gt;&lt;/cite&gt;. IANA.&lt;/dd&gt;
 

Modified: source
===================================================================
--- source	2014-02-03 21:39:32 UTC (rev 8453)
+++ source	2014-02-03 23:16:12 UTC (rev 8454)
@@ -12,32 +12,8 @@
  !    - adding it to the section with ARIA mappings
  !
  !--&gt;
-&lt;!--DEFER snapshot complete--&gt;
-&lt;!--START validation--&gt;
+&lt;!--BOILERPLATE middle-internals--&gt;
 
-&lt;pre class=&quot;idl&quot;&gt;
- interface Screen { }; // CSSOM
- interface URL { }; // URL API
- interface Blob { }; // File API
- interface File : Blob { }; // File API
- interface FileList { }; // File API
- interface WebGLRenderingContext { }; // WebGL
- interface ArrayBuffer { }; // TypedArray
- interface ArrayBufferView { }; // TypedArray
- interface Uint8ClampedArray { }; // TypedArray
- interface XMLDocument { }; // DOM
- interface HTMLCollection { }; // DOM
- interface DOMTokenList { }; // DOM
- interface DOMSettableTokenList { attribute any value; }; // DOM
- interface SVGMatrix { }; // SVG
-&lt;/pre&gt;
-
-&lt;!--START complete--&gt;&lt;!--START dev-html--&gt;
-
-&lt;!--START storage--&gt;
-&lt;!--SET FINGERPRINT=&lt;span data-x=&quot;fingerprinting vector&quot; class=&quot;fingerprint&quot;&gt;&lt;img src=&quot;images/fingerprint.png&quot; alt=&quot;(This is a fingerprinting vector.)&quot; width=46 height=64&gt;&lt;/span&gt;--&gt;
-&lt;!--END storage--&gt;
-
   &lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
 
 &lt;!--END dev-html--&gt;
@@ -2401,6 +2377,21 @@
     &lt;p&gt;The ECMAScript &lt;dfn data-x=&quot;js-SyntaxError&quot;&gt;&lt;code&gt;SyntaxError&lt;/code&gt;&lt;/dfn&gt; exception is also
     defined in the ECMAScript specification. &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;The &lt;dfn&gt;ArrayBuffer&lt;/dfn&gt; and related object types and underlying concepts from the
+    ECMAScript Specification are used for several features in this specification. &lt;a
+    href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p&gt;The following helper IDL is used for referring to &lt;code&gt;ArrayBuffer&lt;/code&gt;-related types:&lt;/p&gt;
+
+    &lt;pre class=&quot;idl&quot;&gt;typedef (&lt;dfn&gt;Int8Array&lt;/dfn&gt; or &lt;dfn&gt;Uint8Array&lt;/dfn&gt; or &lt;dfn&gt;Uint8ClampedArray&lt;/dfn&gt; or
+         &lt;dfn&gt;Int16Array&lt;/dfn&gt; or &lt;dfn&gt;Uint16Array&lt;/dfn&gt; or
+         &lt;dfn&gt;Int32Array&lt;/dfn&gt; or &lt;dfn&gt;Uint32Array&lt;/dfn&gt; or
+         &lt;dfn&gt;Float32Array&lt;/dfn&gt; or &lt;dfn&gt;Float64Array&lt;/dfn&gt;) &lt;dfn&gt;ArrayBufferView&lt;/dfn&gt;;&lt;/pre&gt;
+
+    &lt;p class=&quot;note&quot;&gt;In particular, the &lt;code&gt;Uint8ClampedArray&lt;/code&gt; type is used by some &lt;span
+    data-x=&quot;ImageData&quot;&gt;2D canvas APIs&lt;/span&gt;, and the &lt;a href=&quot;#network&quot;&gt;&lt;code&gt;WebSocket&lt;/code&gt;
+    API&lt;/a&gt; uses &lt;code&gt;ArrayBuffer&lt;/code&gt; objects for handling binary frames.&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -2586,18 +2577,7 @@
    &lt;/dd&gt;
 
 
-   &lt;dt&gt;Typed Arrays&lt;/dt&gt;
 
-   &lt;dd&gt;
-
-    &lt;p&gt;The &lt;dfn&gt;ArrayBuffer&lt;/dfn&gt; and &lt;dfn&gt;ArrayBufferView&lt;/dfn&gt; interfaces and underlying concepts
-    from the Typed Array Specification are used for several features in this specification. The
-    &lt;dfn&gt;Uint8ClampedArray&lt;/dfn&gt; interface type is specifically used in the definition of the
-    &lt;code&gt;canvas&lt;/code&gt; element's 2D API. &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
    &lt;dt&gt;File API&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -7684,6 +7664,7 @@
 
   &lt;h4&gt;Transferable objects&lt;/h4&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Some objects support being copied and closed in one operation.
   This is called &lt;i&gt;transferring&lt;/i&gt; the object, and is used in
   particular to transfer ownership of unsharable or expensive
@@ -7692,7 +7673,7 @@
   &lt;p&gt;The following &lt;code&gt;Transferable&lt;/code&gt; types exist:&lt;/p&gt;
 
   &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;&lt;code&gt;ArrayBuffer&lt;/code&gt; &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;
+   &lt;li&gt;&lt;code&gt;ArrayBuffer&lt;/code&gt; &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;
    &lt;li&gt;&lt;code&gt;CanvasProxy&lt;/code&gt; (defined in this specification)
    &lt;li&gt;&lt;code&gt;MessagePort&lt;/code&gt; (defined in this specification)
   &lt;/ul&gt;
@@ -7701,12 +7682,9 @@
 
   &lt;p&gt;The following IDL block formalizes this:&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
-interface &lt;dfn&gt;Transferable&lt;/dfn&gt; { };
-&lt;span&gt;ArrayBuffer&lt;/span&gt; implements &lt;span&gt;Transferable&lt;/span&gt;;
-&lt;span&gt;CanvasProxy&lt;/span&gt; implements &lt;span&gt;Transferable&lt;/span&gt;;
-&lt;span&gt;MessagePort&lt;/span&gt; implements &lt;span&gt;Transferable&lt;/span&gt;;&lt;/pre&gt;
+  &lt;pre class=&quot;idl&quot;&gt;typedef (&lt;span&gt;ArrayBuffer&lt;/span&gt; or &lt;span&gt;CanvasProxy&lt;/span&gt; or &lt;span&gt;MessagePort&lt;/span&gt;) &lt;dfn&gt;Transferable&lt;/dfn&gt;;&lt;/pre&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;To &lt;dfn&gt;transfer a &lt;code&gt;Transferable&lt;/code&gt; object&lt;/dfn&gt; to a
   new owner, the user agent must run the steps defined for the type of
   object in question. The steps will return a new object of the same
@@ -7721,7 +7699,8 @@
   a user agent must create a new &lt;code&gt;ArrayBuffer&lt;/code&gt; object pointing at the same underlying
   data as &lt;var data-x=&quot;&quot;&gt;old&lt;/var&gt;, thus obtaining &lt;var data-x=&quot;&quot;&gt;new&lt;/var&gt;, must &lt;span
   data-x=&quot;concept-Transferable-neutered&quot;&gt;neuter&lt;/span&gt; the &lt;var data-x=&quot;&quot;&gt;old&lt;/var&gt; object, and must
-  finally return &lt;var data-x=&quot;&quot;&gt;new&lt;/var&gt;. &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  finally return &lt;var data-x=&quot;&quot;&gt;new&lt;/var&gt;. &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- I'm expecting this section to move to the JS spec eventually so I'm leaving it as is for now --&gt;
 
   &lt;p class=&quot;note&quot;&gt;Rules for how to &lt;a href=&quot;#transferCanvasProxy&quot;&gt;transfer a
   &lt;code&gt;CanvasProxy&lt;/code&gt; object&lt;/a&gt; and how to &lt;a href=&quot;#transferMessagePort&quot;&gt;transfer a
@@ -7854,20 +7833,21 @@
      data-x=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed &lt;code&gt;ArrayBuffer&lt;/code&gt; object whose contents
      are a copy of &lt;var data-x=&quot;&quot;&gt;input&lt;/var&gt;'s contents, with the same length.&lt;/p&gt;&lt;/dd&gt;
 
-     &lt;dt&gt;If &lt;var data-x=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;ArrayBufferView&lt;/code&gt; object&lt;/dt&gt;
+     &lt;dt&gt;If &lt;var data-x=&quot;&quot;&gt;input&lt;/var&gt; is an object with a [[DataView]] internal slot&lt;/dt&gt;
 
      &lt;dd&gt;
 
       &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed object of the same class as &lt;var
-      data-x=&quot;&quot;&gt;input&lt;/var&gt;, with each IDL attribute defined for that class being set to the value
-      obtained from invoking the &lt;span&gt;internal structured cloning algorithm&lt;/span&gt; recursively with
-      the value of the attribute on &lt;var data-x=&quot;&quot;&gt;input&lt;/var&gt; as the new &quot;&lt;var
-      data-x=&quot;&quot;&gt;input&lt;/var&gt;&quot; argument and &lt;var data-x=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var
-      data-x=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument.&lt;/p&gt;
+      data-x=&quot;&quot;&gt;input&lt;/var&gt;, with its [[DataView]] internal property present, its
+      [[ViewedArrayBuffer]] internal property set to the value obtained from invoking the
+      &lt;span&gt;internal structured cloning algorithm&lt;/span&gt; recursively with the value of the internal
+      property on &lt;var data-x=&quot;&quot;&gt;input&lt;/var&gt; as the new &quot;&lt;var data-x=&quot;&quot;&gt;input&lt;/var&gt;&quot; argument and
+      &lt;var data-x=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var data-x=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument, and with the
+      [[ByteLength]] and [[ByteOffset]] internal properties set to the same value as their
+      counterparts on &lt;var data-x=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/p&gt;
 
-      &lt;p class=&quot;note&quot;&gt;Only IDL attributes defined on the class (including the
-      &lt;code&gt;ArrayBufferView&lt;/code&gt; attributes) are cloned. Properties added by a script, for
-      example, are not cloned.&lt;/p&gt;
+      &lt;!-- the above might not make much sense, but it'll become moot when JS takes over defining
+      how to clone ArrayBufferView objects --&gt;
 
      &lt;/dd&gt;
 
@@ -65783,14 +65763,14 @@
   &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/span&gt; for its storage, and must have a zero start offset and a length
   equal to the length of its storage, in bytes. The &lt;span&gt;Canvas Pixel
   &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/span&gt; must contain the image data. At least one pixel's worth of image
-  data must be returned. &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  data must be returned. &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn&gt;Canvas Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/dfn&gt; is an &lt;code&gt;ArrayBuffer&lt;/code&gt; that whose
   data is represented in left-to-right order, row by row top to bottom, starting with the top left,
   with each pixel's red, green, blue, and alpha components being given in that order for each pixel.
   Each component of each pixel represented in this array must be in the range 0..255, representing
   the 8 bit value for that component. The components must be assigned consecutive indices starting
-  with 0 for the top left pixel's red component. &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  with 0 for the top left pixel's red component. &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn data-x=&quot;dom-context-2d-putImageData&quot;&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt; method writes
   data from &lt;code&gt;ImageData&lt;/code&gt; structures back to the rendering context's &lt;span&gt;scratch
@@ -90254,30 +90234,27 @@
 
    &lt;dd&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If &lt;i&gt;the WebSocket connection is established&lt;/i&gt;, and &lt;i data-x=&quot;the WebSocket closing
     handshake is started&quot;&gt;the WebSocket closing handshake has not yet started&lt;/i&gt;, then the user
     agent must &lt;i&gt;send a WebSocket Message&lt;/i&gt; comprised of &lt;var data-x=&quot;&quot;&gt;data&lt;/var&gt; using a binary
     frame opcode; if the data cannot be sent, e.g. because it would need to be buffered but the
     buffer is full, the user agent must &lt;span data-x=&quot;concept-websocket-close-fail&quot;&gt;flag the
     WebSocket as full&lt;/span&gt; and then &lt;i&gt;close the WebSocket connection&lt;/i&gt;. The data to be sent is
-    the data stored in the buffer described by the &lt;code&gt;ArrayBuffer&lt;/code&gt; object. &lt;!-- that
-    sentence is meant to invoke &quot;The ArrayBuffer type describes a buffer used to store data for the
-    array buffer views.&quot; at the top of the Typed Array spec, and &quot;Optional byteOffset and length can
-    be used to limit the section of the buffer referenced&quot; in the definition of the TypedArray
-    constructor --&gt; Any invocation of this method with an &lt;code&gt;ArrayBuffer&lt;/code&gt; argument that
+    the data stored in the buffer described by the &lt;code&gt;ArrayBuffer&lt;/code&gt; object. Any invocation of this method with an &lt;code&gt;ArrayBuffer&lt;/code&gt; argument that
     does not throw an exception must increase the &lt;code
     data-x=&quot;dom-WebSocket-bufferedAmount&quot;&gt;bufferedAmount&lt;/code&gt; attribute by the length of the
-    &lt;code&gt;ArrayBuffer&lt;/code&gt; in bytes. &lt;!-- that sentence is meant to invoke the same as
-    ArrayBuffer.byteLength --&gt; &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt; &lt;a
-    href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    &lt;code&gt;ArrayBuffer&lt;/code&gt; in bytes. &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt; &lt;a
+    href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/dd&gt;
 
 
-   &lt;dt&gt;If the argument is an &lt;code&gt;ArrayBufferView&lt;/code&gt; object&lt;/dt&gt;
+   &lt;dt&gt;If the argument is an object that matches the &lt;code&gt;ArrayBufferView&lt;/code&gt; type definition&lt;/dt&gt;
 
    &lt;dd&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If &lt;i&gt;the WebSocket connection is established&lt;/i&gt;, and &lt;i data-x=&quot;the WebSocket closing
     handshake is started&quot;&gt;the WebSocket closing handshake has not yet started&lt;/i&gt;, then the user
     agent must &lt;i&gt;send a WebSocket Message&lt;/i&gt; comprised of &lt;var data-x=&quot;&quot;&gt;data&lt;/var&gt; using a binary
@@ -90285,15 +90262,11 @@
     buffer is full, the user agent must &lt;span data-x=&quot;concept-websocket-close-fail&quot;&gt;flag the
     WebSocket as full&lt;/span&gt; and then &lt;i&gt;close the WebSocket connection&lt;/i&gt;. The data to be sent is
     the data stored in the section of the buffer described by the &lt;code&gt;ArrayBuffer&lt;/code&gt; object
-    that the &lt;code&gt;ArrayBufferView&lt;/code&gt; object references. &lt;!-- that sentence is meant to invoke
-    &quot;The ArrayBuffer type describes a buffer used to store data for the array buffer views.&quot; at the
-    top of the Typed Array spec, and &quot;Optional byteOffset and length can be used to limit the
-    section of the buffer referenced&quot; in the definition of the TypedArray constructor --&gt; Any
-    invocation of this method with an &lt;code&gt;ArrayBufferView&lt;/code&gt; argument that does not throw an
+    that &lt;var data-x=&quot;&quot;&gt;data&lt;/var&gt; references. Any
+    invocation of this method with this kind of argument that does not throw an
     exception must increase the &lt;code data-x=&quot;dom-WebSocket-bufferedAmount&quot;&gt;bufferedAmount&lt;/code&gt;
-    attribute by the length of the &lt;code&gt;ArrayBufferView&lt;/code&gt; in bytes. &lt;!-- that sentence is
-    meant to invoke the same as ArrayBufferView.byteLength --&gt; &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt; &lt;a
-    href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    attribute by the length of &lt;var data-x=&quot;&quot;&gt;data&lt;/var&gt;'s buffer in bytes. &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt; &lt;a
+    href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -90399,9 +90372,9 @@
     &lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;type&lt;/var&gt; indicates that the data is Binary, and &lt;code
     data-x=&quot;dom-WebSocket-binaryType&quot;&gt;binaryType&lt;/code&gt; is set to &quot;&lt;code
     data-x=&quot;&quot;&gt;arraybuffer&lt;/code&gt;&quot;, then initialize &lt;var data-x=&quot;&quot;&gt;event&lt;/var&gt;'s &lt;code
-    data-x=&quot;dom-MessageEvent-data&quot;&gt;data&lt;/code&gt; attribute to a new read-only &lt;code&gt;ArrayBuffer&lt;/code&gt;
+    data-x=&quot;dom-MessageEvent-data&quot;&gt;data&lt;/code&gt; attribute to a new read-only &lt;code&gt;ArrayBuffer&lt;/code&gt; &lt;!-- XXXX --&gt;
     object whose contents are &lt;var data-x=&quot;&quot;&gt;data&lt;/var&gt;. &lt;a
-    href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+    href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -115027,9 +115000,6 @@
    &lt;dt id=&quot;refsTURN&quot;&gt;[TURN]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/rfc5766">http://tools.ietf.org/html/rfc5766</A>&quot;&gt;Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)&lt;/a&gt;&lt;/cite&gt;, R. Mahy, P. Matthews, J. Rosenberg. IETF.&lt;/dd&gt;
 
-   &lt;dt id=&quot;refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://www.khronos.org/registry/typedarray/specs/latest/">http://www.khronos.org/registry/typedarray/specs/latest/</A>&quot;&gt;Typed Array Specification&lt;/a&gt;&lt;/cite&gt;, D. Herman, K. Russell. Khronos.&lt;/dd&gt;
-
    &lt;dt id=&quot;refsTZDATABASE&quot;&gt;[TZDATABASE]&lt;/dt&gt;
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=&quot;<A HREF="http://www.iana.org/time-zones">http://www.iana.org/time-zones</A>&quot;&gt;Time Zone Database&lt;/a&gt;&lt;/cite&gt;. IANA.&lt;/dd&gt;
 


</PRE>
<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23071">[ date ]</a>
              <a href="thread.html#23071">[ thread ]</a>
              <a href="subject.html#23071">[ subject ]</a>
              <a href="author.html#23071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
