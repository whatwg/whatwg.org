<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8853 - [giow] (3) Drop the 'responsible document' concept.	This also changes the referr [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8853%20-%20%5Bgiow%5D%20%283%29%20Drop%20the%20%27responsible%20document%27%20concept.%0A%09This%20also%20changes%20the%20referr%20%5B...%5D&In-Reply-To=%3C20141119233543.5528020237D879%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023450.html">
   <LINK REL="Next"  HREF="023452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8853 - [giow] (3) Drop the 'responsible document' concept.	This also changes the referr [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8853%20-%20%5Bgiow%5D%20%283%29%20Drop%20the%20%27responsible%20document%27%20concept.%0A%09This%20also%20changes%20the%20referr%20%5B...%5D&In-Reply-To=%3C20141119233543.5528020237D879%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8853 - [giow] (3) Drop the 'responsible document' concept.	This also changes the referr [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Nov 19 15:35:43 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="023450.html">[html5] r8852 - [e] (0) We now reference CSSANIMATIONS normatively	Affected topics: HTML
</A></li>
        <LI>Next message: <A HREF="023452.html">[html5] r8854 - [agiow] (0) Drop drawCustomFocusRing(),	since no browsers have indicated interes [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23451">[ date ]</a>
              <a href="thread.html#23451">[ thread ]</a>
              <a href="subject.html#23451">[ subject ]</a>
              <a href="author.html#23451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2014-11-19 15:35:39 -0800 (Wed, 19 Nov 2014)
New Revision: 8853

Modified:
   complete.html
   index
   source
Log:
[giow] (3) Drop the 'responsible document' concept. This also changes the referrer to use when launching a nested worker to be the URL of the outer worker instead of the URL of the outer Document, which made no sense really.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27145">https://www.w3.org/Bugs/Public/show_bug.cgi?id=27145</A>
Affected topics: DOM APIs, Workers

Modified: complete.html
===================================================================
--- complete.html	2014-11-19 22:48:09 UTC (rev 8852)
+++ complete.html	2014-11-19 23:35:39 UTC (rev 8853)
@@ -18417,7 +18417,7 @@
 
   &lt;p id=img-determine-type&gt;The user agent should apply the &lt;a href=<A HREF="https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically">https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically</A> id=the-img-element:content-type-sniffing:-image data-x-internal=content-type-sniffing:-image&gt;image sniffing rules&lt;/a&gt; to determine the type of the image, with the image's &lt;a href=#content-type id=the-img-element:content-type&gt;associated Content-Type headers&lt;/a&gt; giving the &lt;var&gt;official
   type&lt;/var&gt;. If these rules are not applied, then the type of the image must be the type given by
-  the image's &lt;a href=#content-type id=the-img-element:content-type-2&gt;associated Content-Type headers&lt;/a&gt;.&lt;div class=status&gt;&lt;input onclick=toggleStatus(this) value=&#8944; type=button&gt;&lt;p class=bugs&gt;&lt;strong&gt;Spec bugs:&lt;/strong&gt; &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889">https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889</A>&quot; title=&quot;&lt;img&gt; When to swap the image for the environment changes case&quot;&gt;25889&lt;/a&gt;, &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702">https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702</A>&quot; title=&quot;What &lt;img&gt; represents should support srcset/picture&quot;&gt;26702&lt;/a&gt;&lt;/div&gt;
+  the image's &lt;a href=#content-type id=the-img-element:content-type-2&gt;associated Content-Type headers&lt;/a&gt;.&lt;div class=status&gt;&lt;input onclick=toggleStatus(this) value=&#8944; type=button&gt;&lt;p class=bugs&gt;&lt;strong&gt;Spec bugs:&lt;/strong&gt; &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27373">https://www.w3.org/Bugs/Public/show_bug.cgi?id=27373</A>&quot; title=&quot;This should perhaps read &quot;repeat this substep&quot; otherwise 8.2 will reinitialize the descriptor to the empty string.&quot;&gt;27373&lt;/a&gt;, &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889">https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889</A>&quot; title=&quot;&lt;img&gt; When to swap the image for the environment changes case&quot;&gt;25889&lt;/a&gt;, &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702">https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702</A>&quot; title=&quot;What &lt;img&gt; represents should support srcset/picture&quot;&gt;26702&lt;/a&gt;&lt;/div&gt;
 
   &lt;p&gt;User agents must not support non-image resources with the &lt;code id=the-img-element:the-img-element-47&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element (e.g. XML
   files whose root element is an HTML element). User agents must not run executable code (e.g.
@@ -58175,7 +58175,7 @@
   &lt;p&gt;Each &lt;a href=#concept-script id=garbage-collection-and-browsing-contexts:concept-script&gt;script&lt;/a&gt; has a strong reference to its &lt;a href=#settings-object id=garbage-collection-and-browsing-contexts:settings-object&gt;settings
   object&lt;/a&gt;, and each &lt;a href=#environment-settings-object id=garbage-collection-and-browsing-contexts:environment-settings-object&gt;environment settings object&lt;/a&gt; has strong references to its
   &lt;a href=#global-object id=garbage-collection-and-browsing-contexts:global-object&gt;global object&lt;/a&gt;, &lt;a href=#responsible-browsing-context id=garbage-collection-and-browsing-contexts:responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;, and &lt;a href=#responsible-document id=garbage-collection-and-browsing-contexts:responsible-document&gt;responsible
-  document&lt;/a&gt;.&lt;/p&gt;
+  document&lt;/a&gt; (if any).&lt;/p&gt;
 
   
   &lt;p&gt;When a &lt;a href=#browsing-context id=garbage-collection-and-browsing-contexts:browsing-context-2&gt;browsing context&lt;/a&gt; is to &lt;dfn id=discard-a-document&gt;discard a &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, the user
@@ -62669,6 +62669,11 @@
     of the new &lt;a href=#browsing-context id=definitions-2:browsing-context-2&gt;browsing context&lt;/a&gt;'s &lt;code id=definitions-2:window-4&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object will be set to the
     &lt;a href=#responsible-browsing-context id=definitions-2:responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;'s &lt;code id=definitions-2:windowproxy-2&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
+   &lt;dt&gt;A &lt;dfn id=responsible-event-loop&gt;responsible event loop&lt;/dfn&gt;&lt;dd&gt;
+
+    &lt;p&gt;An &lt;a href=#event-loop id=definitions-2:event-loop&gt;event loop&lt;/a&gt; that is used when it would not be immediately clear what event
+    loop to use.&lt;/p&gt;
+
    &lt;dt&gt;A &lt;dfn id=responsible-document&gt;responsible document&lt;/dfn&gt;&lt;dd&gt;
 
     &lt;p&gt;A &lt;code id=definitions-2:document&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is assigned responsibility for actions taken by the scripts that
@@ -62677,24 +62682,22 @@
     &lt;p class=example&gt;For example, the &lt;a href=<A HREF="https://dom.spec.whatwg.org/#concept-document-url">https://dom.spec.whatwg.org/#concept-document-url</A> id=&quot;definitions-2:the-document's-address&quot; data-x-internal=&quot;the-document's-address&quot;&gt;address&lt;/a&gt; of the
     &lt;a href=#responsible-document id=definitions-2:responsible-document&gt;responsible document&lt;/a&gt; is used to set the &lt;a href=<A HREF="https://dom.spec.whatwg.org/#concept-document-url">https://dom.spec.whatwg.org/#concept-document-url</A> id=&quot;definitions-2:the-document's-address-2&quot; data-x-internal=&quot;the-document's-address&quot;&gt;address&lt;/a&gt; of the &lt;code id=definitions-2:document-2&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; after it has been reset using &lt;code id=definitions-2:dom-document-open&gt;&lt;a href=#dom-document-open&gt;document.open()&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;A &lt;dfn id=responsible-event-loop&gt;responsible event loop&lt;/dfn&gt;&lt;dd&gt;
+    &lt;p&gt;If the &lt;a href=#responsible-event-loop id=definitions-2:responsible-event-loop&gt;responsible event loop&lt;/a&gt; is not a &lt;a href=#browsing-context id=definitions-2:browsing-context-3&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop id=definitions-2:event-loop-2&gt;event loop&lt;/a&gt;,
+    then the &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-5&gt;environment settings object&lt;/a&gt; has no &lt;a href=#responsible-document id=definitions-2:responsible-document-2&gt;responsible document&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;An &lt;a href=#event-loop id=definitions-2:event-loop&gt;event loop&lt;/a&gt; that is used when it would not be immediately clear what event
-    loop to use.&lt;/p&gt;
-
    &lt;dt&gt;A &lt;dfn id=referrer-source&gt;referrer source&lt;/dfn&gt;&lt;dd&gt;
 
-    &lt;p&gt;Either a &lt;code id=definitions-2:document-3&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; (specifically, the &lt;a href=#responsible-document id=definitions-2:responsible-document-2&gt;responsible document&lt;/a&gt;), or a
+    &lt;p&gt;Either a &lt;code id=definitions-2:document-3&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; (specifically, the &lt;a href=#responsible-document id=definitions-2:responsible-document-3&gt;responsible document&lt;/a&gt;), or a
     &lt;a href=#url id=definitions-2:url&gt;URL&lt;/a&gt;, which is used by some APIs to determine what value to use for the &lt;code id=definitions-2:http-referer&gt;&lt;a href=#http-referer&gt;Referer&lt;/a&gt;&lt;/code&gt; (sic) header in calls to the &lt;a href=#fetch id=definitions-2:fetch&gt;fetching&lt;/a&gt; algorithm.&lt;/p&gt;
 
    &lt;dt&gt;An &lt;dfn id=api-url-character-encoding&gt;API URL character encoding&lt;/dfn&gt;&lt;dd&gt;
 
-    &lt;p&gt;A character encoding used to encode URLs by APIs called by scripts that use this &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-5&gt;environment
+    &lt;p&gt;A character encoding used to encode URLs by APIs called by scripts that use this &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-6&gt;environment
     settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;An &lt;dfn id=api-base-url&gt;API base URL&lt;/dfn&gt;&lt;dd&gt;
 
-    &lt;p&gt;An &lt;a href=#absolute-url id=definitions-2:absolute-url&gt;absolute URL&lt;/a&gt; used by APIs called by scripts that use this &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-6&gt;environment
+    &lt;p&gt;An &lt;a href=#absolute-url id=definitions-2:absolute-url&gt;absolute URL&lt;/a&gt; used by APIs called by scripts that use this &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-7&gt;environment
     settings object&lt;/a&gt; to resolve &lt;a href=#relative-url id=definitions-2:relative-url&gt;relative URLs&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;An &lt;a href=#origin-2 id=definitions-2:origin-2&gt;origin&lt;/a&gt; and an &lt;a href=#effective-script-origin id=definitions-2:effective-script-origin&gt;effective script origin&lt;/a&gt;&lt;dd&gt;
@@ -62704,7 +62707,7 @@
    &lt;/dl&gt;
 
   &lt;p&gt;The &lt;dfn id=relevant-settings-object-for-a-global-object&gt;relevant settings object for a global object&lt;/dfn&gt; &lt;var&gt;o&lt;/var&gt; is the
-  &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-7&gt;environment settings object&lt;/a&gt; whose &lt;a href=#global-object id=definitions-2:global-object-3&gt;global object&lt;/a&gt; is &lt;var&gt;o&lt;/var&gt;.
+  &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-8&gt;environment settings object&lt;/a&gt; whose &lt;a href=#global-object id=definitions-2:global-object-3&gt;global object&lt;/a&gt; is &lt;var&gt;o&lt;/var&gt;.
   (There is always a 1:1 mapping of global objects to environment settings objects.)&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=relevant-settings-object-for-a-script&gt;relevant settings object for a script&lt;/dfn&gt; &lt;var&gt;s&lt;/var&gt; is the
@@ -62735,17 +62738,17 @@
     &lt;p&gt;Return the &lt;a href=#browsing-context id=script-settings-for-browsing-contexts:browsing-context&gt;browsing context&lt;/a&gt; with which the &lt;code id=script-settings-for-browsing-contexts:window-3&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object is
     associated.&lt;/p&gt;
 
-   &lt;dt&gt;The &lt;a href=#responsible-document id=script-settings-for-browsing-contexts:responsible-document&gt;responsible document&lt;/a&gt;&lt;dd&gt;
-
-    &lt;p&gt;Return the &lt;code id=script-settings-for-browsing-contexts:document&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code id=script-settings-for-browsing-contexts:window-4&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
-    associated.&lt;/p&gt;
-
    &lt;dt&gt;The &lt;a href=#responsible-event-loop id=script-settings-for-browsing-contexts:responsible-event-loop&gt;responsible event loop&lt;/a&gt;&lt;dd&gt;
 
     &lt;p&gt;Return the &lt;a href=#event-loop id=script-settings-for-browsing-contexts:event-loop&gt;event loop&lt;/a&gt; that is associated with the &lt;a href=#unit-of-related-similar-origin-browsing-contexts id=script-settings-for-browsing-contexts:unit-of-related-similar-origin-browsing-contexts&gt;unit of related
-    similar-origin browsing contexts&lt;/a&gt; to which the &lt;code id=script-settings-for-browsing-contexts:window-5&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context id=script-settings-for-browsing-contexts:browsing-context-2&gt;browsing
+    similar-origin browsing contexts&lt;/a&gt; to which the &lt;code id=script-settings-for-browsing-contexts:window-4&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context id=script-settings-for-browsing-contexts:browsing-context-2&gt;browsing
     context&lt;/a&gt; belongs.&lt;/p&gt;
 
+   &lt;dt&gt;The &lt;a href=#responsible-document id=script-settings-for-browsing-contexts:responsible-document&gt;responsible document&lt;/a&gt;&lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code id=script-settings-for-browsing-contexts:document&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code id=script-settings-for-browsing-contexts:window-5&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
+
    &lt;dt&gt;The &lt;a href=#referrer-source id=script-settings-for-browsing-contexts:referrer-source&gt;referrer source&lt;/a&gt;&lt;dd&gt;
 
     &lt;p&gt;Return the &lt;code id=script-settings-for-browsing-contexts:document-2&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code id=script-settings-for-browsing-contexts:window-6&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
@@ -68701,26 +68704,28 @@
      &lt;a href=#origin-2 id=broadcasting-to-other-browsing-contexts:origin-2-4&gt;origin&lt;/a&gt; specified by &lt;var&gt;source settings&lt;/var&gt;. This event is not &lt;a href=#concept-events-trusted id=broadcasting-to-other-browsing-contexts:concept-events-trusted&gt;trusted&lt;/a&gt;.&lt;li&gt;&lt;p&gt;&lt;a href=#concept-event-dispatch id=broadcasting-to-other-browsing-contexts:concept-event-dispatch&gt;Dispatch&lt;/a&gt; the event at the
      &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-10&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object.&lt;/ol&gt;
 
-    &lt;p&gt;The &lt;a href=#concept-task id=broadcasting-to-other-browsing-contexts:concept-task&gt;tasks&lt;/a&gt; must be associated with the &lt;a href=#responsible-document id=broadcasting-to-other-browsing-contexts:responsible-document-2&gt;responsible
-    document&lt;/a&gt; specified by the target &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-11&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
-    &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-6&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt;, and must use the &lt;a href=#dom-manipulation-task-source id=broadcasting-to-other-browsing-contexts:dom-manipulation-task-source&gt;DOM
-    manipulation task source&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;The &lt;a href=#concept-task id=broadcasting-to-other-browsing-contexts:concept-task&gt;tasks&lt;/a&gt; must use the &lt;a href=#dom-manipulation-task-source id=broadcasting-to-other-browsing-contexts:dom-manipulation-task-source&gt;DOM
+    manipulation task source&lt;/a&gt;, and, for those where the &lt;a href=#event-loop id=broadcasting-to-other-browsing-contexts:event-loop&gt;event loop&lt;/a&gt; specified by the target &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-11&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
+    &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-6&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt; is a &lt;a href=#browsing-context id=broadcasting-to-other-browsing-contexts:browsing-context-2&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop id=broadcasting-to-other-browsing-contexts:event-loop-2&gt;event loop&lt;/a&gt;, must
+    be associated with the &lt;a href=#responsible-document id=broadcasting-to-other-browsing-contexts:responsible-document-2&gt;responsible
+    document&lt;/a&gt; specified by that target &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-12&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
+    &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-7&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/ol&gt;
 
-  &lt;p&gt;While a &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-12&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#concept-broadcastchannel-closed id=broadcasting-to-other-browsing-contexts:concept-broadcastchannel-closed-4&gt;closed flag&lt;/a&gt; is false has an event listener
+  &lt;p&gt;While a &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-13&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#concept-broadcastchannel-closed id=broadcasting-to-other-browsing-contexts:concept-broadcastchannel-closed-4&gt;closed flag&lt;/a&gt; is false has an event listener
   registered for &lt;code id=broadcasting-to-other-browsing-contexts:event-message-2&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events, there must be a strong
-  reference from &lt;a href=#global-object id=broadcasting-to-other-browsing-contexts:global-object-3&gt;global object&lt;/a&gt; specified by the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-13&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
-  &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-7&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt; to the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-14&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
+  reference from &lt;a href=#global-object id=broadcasting-to-other-browsing-contexts:global-object-3&gt;global object&lt;/a&gt; specified by the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-14&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
+  &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-8&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt; to the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-15&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
   object itself.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-broadcastchannel-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt; method must set the
   &lt;a href=#concept-broadcastchannel-closed id=broadcasting-to-other-browsing-contexts:concept-broadcastchannel-closed-5&gt;closed flag&lt;/a&gt; of the
-  &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-15&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object on which it was invoked to true.&lt;/p&gt;
+  &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-16&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object on which it was invoked to true.&lt;/p&gt;
 
-  &lt;p class=note&gt;Authors are strongly encouraged to explicitly close &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-16&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
+  &lt;p class=note&gt;Authors are strongly encouraged to explicitly close &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-17&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
   objects when they are no longer needed, so that they can be garbage collected. Creating many
-  &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-17&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; objects and discarding them while leaving them with an event
+  &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-18&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; objects and discarding them while leaving them with an event
   listener and without closing them can lead to an apparent memory leak, since the objects will
   continue to live for as long as they have an event listener (or until their page or worker is
   closed).&lt;/p&gt;
@@ -68728,7 +68733,7 @@
   &lt;hr&gt;
 
   &lt;p&gt;The following are the &lt;a href=#event-handlers id=broadcasting-to-other-browsing-contexts:event-handlers&gt;event handlers&lt;/a&gt; (and their corresponding &lt;a href=#event-handler-event-type id=broadcasting-to-other-browsing-contexts:event-handler-event-type&gt;event handler event types&lt;/a&gt;) that must be supported, as &lt;a href=#event-handler-idl-attributes id=broadcasting-to-other-browsing-contexts:event-handler-idl-attributes&gt;event
-  handler IDL attributes&lt;/a&gt;, by all objects implementing the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-18&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
+  handler IDL attributes&lt;/a&gt;, by all objects implementing the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-19&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
   interface:&lt;/p&gt;
 
   &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers id=broadcasting-to-other-browsing-contexts:event-handlers-2&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type id=broadcasting-to-other-browsing-contexts:event-handler-event-type-2&gt;Event handler event type&lt;/a&gt;
@@ -69784,7 +69789,7 @@
   &lt;h4 id=processing-model-11&gt;10.2.4 Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with &lt;a href=#url id=processing-model-11:url&gt;URL&lt;/a&gt;
-  &lt;var&gt;url&lt;/var&gt; and an &lt;a href=#environment-settings-object id=processing-model-11:environment-settings-object&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;, it must run
+  &lt;var&gt;url&lt;/var&gt;, an &lt;a href=#environment-settings-object id=processing-model-11:environment-settings-object&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;, and a &lt;a href=#referrer-source id=processing-model-11:referrer-source&gt;referrer source&lt;/a&gt; &lt;var&gt;parent referrer source&lt;/var&gt; it must run
   the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li id=worker-processing-model-top&gt;&lt;div class=status&gt;&lt;input onclick=toggleStatus(this) value=&#8944; type=button&gt;&lt;p class=bugs&gt;&lt;strong&gt;Spec bugs:&lt;/strong&gt; &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24519">https://www.w3.org/Bugs/Public/show_bug.cgi?id=24519</A>&quot; title=&quot;Why do workers use document as their referrer source when they do not seem to need document for anything else? Seems more logical if the worker's location was used as the referrer.&quot;&gt;24519&lt;/a&gt;&lt;/div&gt;
@@ -69804,9 +69809,8 @@
    match.&lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;a href=#fetch id=processing-model-11:fetch&gt;fetch&lt;/a&gt; the resource identified by &lt;var&gt;url&lt;/var&gt;, from the
-    &lt;a href=#origin-2 id=processing-model-11:origin-2&gt;origin&lt;/a&gt; specified by &lt;var&gt;settings object&lt;/var&gt;, using the &lt;a href=#responsible-document id=processing-model-11:responsible-document&gt;responsible
-    document&lt;/a&gt; specified by &lt;var&gt;settings object&lt;/var&gt; as the &lt;var&gt;referrer source&lt;/var&gt; (not using
-    the specified &lt;a href=#referrer-source id=processing-model-11:referrer-source&gt;referrer source&lt;/a&gt;!), and with the &lt;i&gt;blocking flag&lt;/i&gt; set and
+    &lt;a href=#origin-2 id=processing-model-11:origin-2&gt;origin&lt;/a&gt; specified by &lt;var&gt;settings object&lt;/var&gt;, using &lt;var&gt;parent referrer source&lt;/var&gt; as the &lt;i&gt;referrer source&lt;/i&gt; (not using
+    the &lt;a href=#referrer-source id=processing-model-11:referrer-source-2&gt;referrer source&lt;/a&gt; specified by &lt;var&gt;settings object&lt;/var&gt;!), and with the &lt;i&gt;blocking flag&lt;/i&gt; set and
     the &lt;i&gt;force same-origin flag&lt;/i&gt; set.&lt;/p&gt; 
 
     &lt;p&gt;If the attempt fails, then for each &lt;code id=processing-model-11:worker&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; or &lt;code id=processing-model-11:sharedworker&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object
@@ -69987,9 +69991,8 @@
   address&lt;/var&gt; it must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited responsible browsing context&lt;/var&gt; be the &lt;a href=#responsible-browsing-context id=script-settings-for-workers:responsible-browsing-context&gt;responsible
-   browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited responsible document&lt;/var&gt; be the &lt;a href=#responsible-document id=script-settings-for-workers:responsible-document&gt;responsible
-   document&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object-2&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited origin&lt;/var&gt; be the &lt;a href=#origin-2 id=script-settings-for-workers:origin-2&gt;origin&lt;/a&gt; specified by the
-   &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object-3&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;worker event loop&lt;/var&gt; be a newly created &lt;a href=#event-loop id=script-settings-for-workers:event-loop&gt;event
+   browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited origin&lt;/var&gt; be the &lt;a href=#origin-2 id=script-settings-for-workers:origin-2&gt;origin&lt;/a&gt; specified by the
+   &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object-2&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;worker event loop&lt;/var&gt; be a newly created &lt;a href=#event-loop id=script-settings-for-workers:event-loop&gt;event
    loop&lt;/a&gt;.&lt;li&gt;
 
     &lt;p&gt;Let &lt;var&gt;settings object&lt;/var&gt; be a new &lt;a href=#environment-settings-object id=script-settings-for-workers:environment-settings-object&gt;environment settings object&lt;/a&gt; whose algorithms
@@ -70015,14 +70018,15 @@
 
       &lt;p&gt;Return &lt;var&gt;inherited responsible browsing context&lt;/var&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;The &lt;a href=#responsible-document id=script-settings-for-workers:responsible-document-2&gt;responsible document&lt;/a&gt;&lt;dd&gt;
-
-      &lt;p&gt;Return &lt;var&gt;inherited responsible document&lt;/var&gt;.&lt;/p&gt;
-
      &lt;dt&gt;The &lt;a href=#responsible-event-loop id=script-settings-for-workers:responsible-event-loop&gt;responsible event loop&lt;/a&gt;&lt;dd&gt;
 
       &lt;p&gt;Return &lt;var&gt;worker event loop&lt;/var&gt;.&lt;/p&gt;
 
+     &lt;dt&gt;The &lt;a href=#responsible-document id=script-settings-for-workers:responsible-document&gt;responsible document&lt;/a&gt;&lt;dd&gt;
+
+      &lt;p&gt;Not applicable (the &lt;a href=#responsible-event-loop id=script-settings-for-workers:responsible-event-loop-2&gt;responsible event loop&lt;/a&gt; is not a &lt;a href=#browsing-context id=script-settings-for-workers:browsing-context&gt;browsing context&lt;/a&gt;
+      &lt;a href=#event-loop id=script-settings-for-workers:event-loop-2&gt;event loop&lt;/a&gt;).&lt;/p&gt;
+
      &lt;dt&gt;The &lt;a href=#referrer-source id=script-settings-for-workers:referrer-source&gt;referrer source&lt;/a&gt;&lt;dd&gt;
 
       &lt;p&gt;Return &lt;var&gt;script address&lt;/var&gt;.&lt;/p&gt;
@@ -70121,8 +70125,9 @@
    is a &lt;code id=dedicated-workers-and-the-worker-interface:workerglobalscope&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. we are creating a nested worker), add
    &lt;var&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot; id=&quot;dedicated-workers-and-the-worker-interface:the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
    &lt;code id=dedicated-workers-and-the-worker-interface:workerglobalscope-2&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=#global-object id=dedicated-workers-and-the-worker-interface:global-object-2&gt;global object&lt;/a&gt; specified by the
-   &lt;a href=#incumbent-settings-object id=dedicated-workers-and-the-worker-interface:incumbent-settings-object-5&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;&lt;a href=#run-a-worker id=dedicated-workers-and-the-worker-interface:run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url id=dedicated-workers-and-the-worker-interface:url&gt;URL&lt;/a&gt; &lt;var&gt;worker URL&lt;/var&gt; and
-   the &lt;a href=#environment-settings-object id=dedicated-workers-and-the-worker-interface:environment-settings-object&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;.&lt;/ol&gt;
+   &lt;a href=#incumbent-settings-object id=dedicated-workers-and-the-worker-interface:incumbent-settings-object-5&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;&lt;a href=#run-a-worker id=dedicated-workers-and-the-worker-interface:run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url id=dedicated-workers-and-the-worker-interface:url&gt;URL&lt;/a&gt; &lt;var&gt;worker URL&lt;/var&gt;,
+   the &lt;a href=#environment-settings-object id=dedicated-workers-and-the-worker-interface:environment-settings-object&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;, and with the
+   &lt;a href=#referrer-source id=dedicated-workers-and-the-worker-interface:referrer-source&gt;referrer source&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=dedicated-workers-and-the-worker-interface:incumbent-settings-object-6&gt;incumbent settings object&lt;/a&gt;.&lt;/ol&gt;
 
 
 
@@ -70256,8 +70261,9 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#run-a-worker id=shared-workers-and-the-sharedworker-interface:run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url id=shared-workers-and-the-sharedworker-interface:url&gt;URL&lt;/a&gt; &lt;var&gt;scriptURL&lt;/var&gt;
-    and the &lt;a href=#environment-settings-object id=shared-workers-and-the-sharedworker-interface:environment-settings-object-3&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;&lt;a href=#run-a-worker id=shared-workers-and-the-sharedworker-interface:run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url id=shared-workers-and-the-sharedworker-interface:url&gt;URL&lt;/a&gt; &lt;var&gt;scriptURL&lt;/var&gt;,
+    the &lt;a href=#environment-settings-object id=shared-workers-and-the-sharedworker-interface:environment-settings-object-3&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;, and with the
+    &lt;a href=#referrer-source id=shared-workers-and-the-sharedworker-interface:referrer-source&gt;referrer source&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=shared-workers-and-the-sharedworker-interface:incumbent-settings-object-9&gt;incumbent settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/ol&gt;
 

Modified: index
===================================================================
--- index	2014-11-19 22:48:09 UTC (rev 8852)
+++ index	2014-11-19 23:35:39 UTC (rev 8853)
@@ -18417,7 +18417,7 @@
 
   &lt;p id=img-determine-type&gt;The user agent should apply the &lt;a href=<A HREF="https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically">https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically</A> id=the-img-element:content-type-sniffing:-image data-x-internal=content-type-sniffing:-image&gt;image sniffing rules&lt;/a&gt; to determine the type of the image, with the image's &lt;a href=#content-type id=the-img-element:content-type&gt;associated Content-Type headers&lt;/a&gt; giving the &lt;var&gt;official
   type&lt;/var&gt;. If these rules are not applied, then the type of the image must be the type given by
-  the image's &lt;a href=#content-type id=the-img-element:content-type-2&gt;associated Content-Type headers&lt;/a&gt;.&lt;div class=status&gt;&lt;input onclick=toggleStatus(this) value=&#8944; type=button&gt;&lt;p class=bugs&gt;&lt;strong&gt;Spec bugs:&lt;/strong&gt; &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889">https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889</A>&quot; title=&quot;&lt;img&gt; When to swap the image for the environment changes case&quot;&gt;25889&lt;/a&gt;, &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702">https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702</A>&quot; title=&quot;What &lt;img&gt; represents should support srcset/picture&quot;&gt;26702&lt;/a&gt;&lt;/div&gt;
+  the image's &lt;a href=#content-type id=the-img-element:content-type-2&gt;associated Content-Type headers&lt;/a&gt;.&lt;div class=status&gt;&lt;input onclick=toggleStatus(this) value=&#8944; type=button&gt;&lt;p class=bugs&gt;&lt;strong&gt;Spec bugs:&lt;/strong&gt; &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27373">https://www.w3.org/Bugs/Public/show_bug.cgi?id=27373</A>&quot; title=&quot;This should perhaps read &quot;repeat this substep&quot; otherwise 8.2 will reinitialize the descriptor to the empty string.&quot;&gt;27373&lt;/a&gt;, &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889">https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889</A>&quot; title=&quot;&lt;img&gt; When to swap the image for the environment changes case&quot;&gt;25889&lt;/a&gt;, &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702">https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702</A>&quot; title=&quot;What &lt;img&gt; represents should support srcset/picture&quot;&gt;26702&lt;/a&gt;&lt;/div&gt;
 
   &lt;p&gt;User agents must not support non-image resources with the &lt;code id=the-img-element:the-img-element-47&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element (e.g. XML
   files whose root element is an HTML element). User agents must not run executable code (e.g.
@@ -58175,7 +58175,7 @@
   &lt;p&gt;Each &lt;a href=#concept-script id=garbage-collection-and-browsing-contexts:concept-script&gt;script&lt;/a&gt; has a strong reference to its &lt;a href=#settings-object id=garbage-collection-and-browsing-contexts:settings-object&gt;settings
   object&lt;/a&gt;, and each &lt;a href=#environment-settings-object id=garbage-collection-and-browsing-contexts:environment-settings-object&gt;environment settings object&lt;/a&gt; has strong references to its
   &lt;a href=#global-object id=garbage-collection-and-browsing-contexts:global-object&gt;global object&lt;/a&gt;, &lt;a href=#responsible-browsing-context id=garbage-collection-and-browsing-contexts:responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;, and &lt;a href=#responsible-document id=garbage-collection-and-browsing-contexts:responsible-document&gt;responsible
-  document&lt;/a&gt;.&lt;/p&gt;
+  document&lt;/a&gt; (if any).&lt;/p&gt;
 
   
   &lt;p&gt;When a &lt;a href=#browsing-context id=garbage-collection-and-browsing-contexts:browsing-context-2&gt;browsing context&lt;/a&gt; is to &lt;dfn id=discard-a-document&gt;discard a &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, the user
@@ -62669,6 +62669,11 @@
     of the new &lt;a href=#browsing-context id=definitions-2:browsing-context-2&gt;browsing context&lt;/a&gt;'s &lt;code id=definitions-2:window-4&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object will be set to the
     &lt;a href=#responsible-browsing-context id=definitions-2:responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;'s &lt;code id=definitions-2:windowproxy-2&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
+   &lt;dt&gt;A &lt;dfn id=responsible-event-loop&gt;responsible event loop&lt;/dfn&gt;&lt;dd&gt;
+
+    &lt;p&gt;An &lt;a href=#event-loop id=definitions-2:event-loop&gt;event loop&lt;/a&gt; that is used when it would not be immediately clear what event
+    loop to use.&lt;/p&gt;
+
    &lt;dt&gt;A &lt;dfn id=responsible-document&gt;responsible document&lt;/dfn&gt;&lt;dd&gt;
 
     &lt;p&gt;A &lt;code id=definitions-2:document&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is assigned responsibility for actions taken by the scripts that
@@ -62677,24 +62682,22 @@
     &lt;p class=example&gt;For example, the &lt;a href=<A HREF="https://dom.spec.whatwg.org/#concept-document-url">https://dom.spec.whatwg.org/#concept-document-url</A> id=&quot;definitions-2:the-document's-address&quot; data-x-internal=&quot;the-document's-address&quot;&gt;address&lt;/a&gt; of the
     &lt;a href=#responsible-document id=definitions-2:responsible-document&gt;responsible document&lt;/a&gt; is used to set the &lt;a href=<A HREF="https://dom.spec.whatwg.org/#concept-document-url">https://dom.spec.whatwg.org/#concept-document-url</A> id=&quot;definitions-2:the-document's-address-2&quot; data-x-internal=&quot;the-document's-address&quot;&gt;address&lt;/a&gt; of the &lt;code id=definitions-2:document-2&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; after it has been reset using &lt;code id=definitions-2:dom-document-open&gt;&lt;a href=#dom-document-open&gt;document.open()&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;A &lt;dfn id=responsible-event-loop&gt;responsible event loop&lt;/dfn&gt;&lt;dd&gt;
+    &lt;p&gt;If the &lt;a href=#responsible-event-loop id=definitions-2:responsible-event-loop&gt;responsible event loop&lt;/a&gt; is not a &lt;a href=#browsing-context id=definitions-2:browsing-context-3&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop id=definitions-2:event-loop-2&gt;event loop&lt;/a&gt;,
+    then the &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-5&gt;environment settings object&lt;/a&gt; has no &lt;a href=#responsible-document id=definitions-2:responsible-document-2&gt;responsible document&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;An &lt;a href=#event-loop id=definitions-2:event-loop&gt;event loop&lt;/a&gt; that is used when it would not be immediately clear what event
-    loop to use.&lt;/p&gt;
-
    &lt;dt&gt;A &lt;dfn id=referrer-source&gt;referrer source&lt;/dfn&gt;&lt;dd&gt;
 
-    &lt;p&gt;Either a &lt;code id=definitions-2:document-3&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; (specifically, the &lt;a href=#responsible-document id=definitions-2:responsible-document-2&gt;responsible document&lt;/a&gt;), or a
+    &lt;p&gt;Either a &lt;code id=definitions-2:document-3&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; (specifically, the &lt;a href=#responsible-document id=definitions-2:responsible-document-3&gt;responsible document&lt;/a&gt;), or a
     &lt;a href=#url id=definitions-2:url&gt;URL&lt;/a&gt;, which is used by some APIs to determine what value to use for the &lt;code id=definitions-2:http-referer&gt;&lt;a href=#http-referer&gt;Referer&lt;/a&gt;&lt;/code&gt; (sic) header in calls to the &lt;a href=#fetch id=definitions-2:fetch&gt;fetching&lt;/a&gt; algorithm.&lt;/p&gt;
 
    &lt;dt&gt;An &lt;dfn id=api-url-character-encoding&gt;API URL character encoding&lt;/dfn&gt;&lt;dd&gt;
 
-    &lt;p&gt;A character encoding used to encode URLs by APIs called by scripts that use this &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-5&gt;environment
+    &lt;p&gt;A character encoding used to encode URLs by APIs called by scripts that use this &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-6&gt;environment
     settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;An &lt;dfn id=api-base-url&gt;API base URL&lt;/dfn&gt;&lt;dd&gt;
 
-    &lt;p&gt;An &lt;a href=#absolute-url id=definitions-2:absolute-url&gt;absolute URL&lt;/a&gt; used by APIs called by scripts that use this &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-6&gt;environment
+    &lt;p&gt;An &lt;a href=#absolute-url id=definitions-2:absolute-url&gt;absolute URL&lt;/a&gt; used by APIs called by scripts that use this &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-7&gt;environment
     settings object&lt;/a&gt; to resolve &lt;a href=#relative-url id=definitions-2:relative-url&gt;relative URLs&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;An &lt;a href=#origin-2 id=definitions-2:origin-2&gt;origin&lt;/a&gt; and an &lt;a href=#effective-script-origin id=definitions-2:effective-script-origin&gt;effective script origin&lt;/a&gt;&lt;dd&gt;
@@ -62704,7 +62707,7 @@
    &lt;/dl&gt;
 
   &lt;p&gt;The &lt;dfn id=relevant-settings-object-for-a-global-object&gt;relevant settings object for a global object&lt;/dfn&gt; &lt;var&gt;o&lt;/var&gt; is the
-  &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-7&gt;environment settings object&lt;/a&gt; whose &lt;a href=#global-object id=definitions-2:global-object-3&gt;global object&lt;/a&gt; is &lt;var&gt;o&lt;/var&gt;.
+  &lt;a href=#environment-settings-object id=definitions-2:environment-settings-object-8&gt;environment settings object&lt;/a&gt; whose &lt;a href=#global-object id=definitions-2:global-object-3&gt;global object&lt;/a&gt; is &lt;var&gt;o&lt;/var&gt;.
   (There is always a 1:1 mapping of global objects to environment settings objects.)&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=relevant-settings-object-for-a-script&gt;relevant settings object for a script&lt;/dfn&gt; &lt;var&gt;s&lt;/var&gt; is the
@@ -62735,17 +62738,17 @@
     &lt;p&gt;Return the &lt;a href=#browsing-context id=script-settings-for-browsing-contexts:browsing-context&gt;browsing context&lt;/a&gt; with which the &lt;code id=script-settings-for-browsing-contexts:window-3&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object is
     associated.&lt;/p&gt;
 
-   &lt;dt&gt;The &lt;a href=#responsible-document id=script-settings-for-browsing-contexts:responsible-document&gt;responsible document&lt;/a&gt;&lt;dd&gt;
-
-    &lt;p&gt;Return the &lt;code id=script-settings-for-browsing-contexts:document&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code id=script-settings-for-browsing-contexts:window-4&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
-    associated.&lt;/p&gt;
-
    &lt;dt&gt;The &lt;a href=#responsible-event-loop id=script-settings-for-browsing-contexts:responsible-event-loop&gt;responsible event loop&lt;/a&gt;&lt;dd&gt;
 
     &lt;p&gt;Return the &lt;a href=#event-loop id=script-settings-for-browsing-contexts:event-loop&gt;event loop&lt;/a&gt; that is associated with the &lt;a href=#unit-of-related-similar-origin-browsing-contexts id=script-settings-for-browsing-contexts:unit-of-related-similar-origin-browsing-contexts&gt;unit of related
-    similar-origin browsing contexts&lt;/a&gt; to which the &lt;code id=script-settings-for-browsing-contexts:window-5&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context id=script-settings-for-browsing-contexts:browsing-context-2&gt;browsing
+    similar-origin browsing contexts&lt;/a&gt; to which the &lt;code id=script-settings-for-browsing-contexts:window-4&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context id=script-settings-for-browsing-contexts:browsing-context-2&gt;browsing
     context&lt;/a&gt; belongs.&lt;/p&gt;
 
+   &lt;dt&gt;The &lt;a href=#responsible-document id=script-settings-for-browsing-contexts:responsible-document&gt;responsible document&lt;/a&gt;&lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code id=script-settings-for-browsing-contexts:document&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code id=script-settings-for-browsing-contexts:window-5&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
+
    &lt;dt&gt;The &lt;a href=#referrer-source id=script-settings-for-browsing-contexts:referrer-source&gt;referrer source&lt;/a&gt;&lt;dd&gt;
 
     &lt;p&gt;Return the &lt;code id=script-settings-for-browsing-contexts:document-2&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code id=script-settings-for-browsing-contexts:window-6&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
@@ -68701,26 +68704,28 @@
      &lt;a href=#origin-2 id=broadcasting-to-other-browsing-contexts:origin-2-4&gt;origin&lt;/a&gt; specified by &lt;var&gt;source settings&lt;/var&gt;. This event is not &lt;a href=#concept-events-trusted id=broadcasting-to-other-browsing-contexts:concept-events-trusted&gt;trusted&lt;/a&gt;.&lt;li&gt;&lt;p&gt;&lt;a href=#concept-event-dispatch id=broadcasting-to-other-browsing-contexts:concept-event-dispatch&gt;Dispatch&lt;/a&gt; the event at the
      &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-10&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object.&lt;/ol&gt;
 
-    &lt;p&gt;The &lt;a href=#concept-task id=broadcasting-to-other-browsing-contexts:concept-task&gt;tasks&lt;/a&gt; must be associated with the &lt;a href=#responsible-document id=broadcasting-to-other-browsing-contexts:responsible-document-2&gt;responsible
-    document&lt;/a&gt; specified by the target &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-11&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
-    &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-6&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt;, and must use the &lt;a href=#dom-manipulation-task-source id=broadcasting-to-other-browsing-contexts:dom-manipulation-task-source&gt;DOM
-    manipulation task source&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;The &lt;a href=#concept-task id=broadcasting-to-other-browsing-contexts:concept-task&gt;tasks&lt;/a&gt; must use the &lt;a href=#dom-manipulation-task-source id=broadcasting-to-other-browsing-contexts:dom-manipulation-task-source&gt;DOM
+    manipulation task source&lt;/a&gt;, and, for those where the &lt;a href=#event-loop id=broadcasting-to-other-browsing-contexts:event-loop&gt;event loop&lt;/a&gt; specified by the target &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-11&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
+    &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-6&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt; is a &lt;a href=#browsing-context id=broadcasting-to-other-browsing-contexts:browsing-context-2&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop id=broadcasting-to-other-browsing-contexts:event-loop-2&gt;event loop&lt;/a&gt;, must
+    be associated with the &lt;a href=#responsible-document id=broadcasting-to-other-browsing-contexts:responsible-document-2&gt;responsible
+    document&lt;/a&gt; specified by that target &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-12&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
+    &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-7&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/ol&gt;
 
-  &lt;p&gt;While a &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-12&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#concept-broadcastchannel-closed id=broadcasting-to-other-browsing-contexts:concept-broadcastchannel-closed-4&gt;closed flag&lt;/a&gt; is false has an event listener
+  &lt;p&gt;While a &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-13&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#concept-broadcastchannel-closed id=broadcasting-to-other-browsing-contexts:concept-broadcastchannel-closed-4&gt;closed flag&lt;/a&gt; is false has an event listener
   registered for &lt;code id=broadcasting-to-other-browsing-contexts:event-message-2&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events, there must be a strong
-  reference from &lt;a href=#global-object id=broadcasting-to-other-browsing-contexts:global-object-3&gt;global object&lt;/a&gt; specified by the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-13&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
-  &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-7&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt; to the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-14&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
+  reference from &lt;a href=#global-object id=broadcasting-to-other-browsing-contexts:global-object-3&gt;global object&lt;/a&gt; specified by the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-14&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object's
+  &lt;a href=#broadcastchannel-settings-object id=broadcasting-to-other-browsing-contexts:broadcastchannel-settings-object-8&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/a&gt; to the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-15&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
   object itself.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-broadcastchannel-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt; method must set the
   &lt;a href=#concept-broadcastchannel-closed id=broadcasting-to-other-browsing-contexts:concept-broadcastchannel-closed-5&gt;closed flag&lt;/a&gt; of the
-  &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-15&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object on which it was invoked to true.&lt;/p&gt;
+  &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-16&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; object on which it was invoked to true.&lt;/p&gt;
 
-  &lt;p class=note&gt;Authors are strongly encouraged to explicitly close &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-16&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
+  &lt;p class=note&gt;Authors are strongly encouraged to explicitly close &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-17&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
   objects when they are no longer needed, so that they can be garbage collected. Creating many
-  &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-17&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; objects and discarding them while leaving them with an event
+  &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-18&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt; objects and discarding them while leaving them with an event
   listener and without closing them can lead to an apparent memory leak, since the objects will
   continue to live for as long as they have an event listener (or until their page or worker is
   closed).&lt;/p&gt;
@@ -68728,7 +68733,7 @@
   &lt;hr&gt;
 
   &lt;p&gt;The following are the &lt;a href=#event-handlers id=broadcasting-to-other-browsing-contexts:event-handlers&gt;event handlers&lt;/a&gt; (and their corresponding &lt;a href=#event-handler-event-type id=broadcasting-to-other-browsing-contexts:event-handler-event-type&gt;event handler event types&lt;/a&gt;) that must be supported, as &lt;a href=#event-handler-idl-attributes id=broadcasting-to-other-browsing-contexts:event-handler-idl-attributes&gt;event
-  handler IDL attributes&lt;/a&gt;, by all objects implementing the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-18&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
+  handler IDL attributes&lt;/a&gt;, by all objects implementing the &lt;code id=broadcasting-to-other-browsing-contexts:broadcastchannel-19&gt;&lt;a href=#broadcastchannel&gt;BroadcastChannel&lt;/a&gt;&lt;/code&gt;
   interface:&lt;/p&gt;
 
   &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers id=broadcasting-to-other-browsing-contexts:event-handlers-2&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type id=broadcasting-to-other-browsing-contexts:event-handler-event-type-2&gt;Event handler event type&lt;/a&gt;
@@ -69784,7 +69789,7 @@
   &lt;h4 id=processing-model-11&gt;10.2.4 Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with &lt;a href=#url id=processing-model-11:url&gt;URL&lt;/a&gt;
-  &lt;var&gt;url&lt;/var&gt; and an &lt;a href=#environment-settings-object id=processing-model-11:environment-settings-object&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;, it must run
+  &lt;var&gt;url&lt;/var&gt;, an &lt;a href=#environment-settings-object id=processing-model-11:environment-settings-object&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;, and a &lt;a href=#referrer-source id=processing-model-11:referrer-source&gt;referrer source&lt;/a&gt; &lt;var&gt;parent referrer source&lt;/var&gt; it must run
   the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li id=worker-processing-model-top&gt;&lt;div class=status&gt;&lt;input onclick=toggleStatus(this) value=&#8944; type=button&gt;&lt;p class=bugs&gt;&lt;strong&gt;Spec bugs:&lt;/strong&gt; &lt;a href=&quot;<A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24519">https://www.w3.org/Bugs/Public/show_bug.cgi?id=24519</A>&quot; title=&quot;Why do workers use document as their referrer source when they do not seem to need document for anything else? Seems more logical if the worker's location was used as the referrer.&quot;&gt;24519&lt;/a&gt;&lt;/div&gt;
@@ -69804,9 +69809,8 @@
    match.&lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;a href=#fetch id=processing-model-11:fetch&gt;fetch&lt;/a&gt; the resource identified by &lt;var&gt;url&lt;/var&gt;, from the
-    &lt;a href=#origin-2 id=processing-model-11:origin-2&gt;origin&lt;/a&gt; specified by &lt;var&gt;settings object&lt;/var&gt;, using the &lt;a href=#responsible-document id=processing-model-11:responsible-document&gt;responsible
-    document&lt;/a&gt; specified by &lt;var&gt;settings object&lt;/var&gt; as the &lt;var&gt;referrer source&lt;/var&gt; (not using
-    the specified &lt;a href=#referrer-source id=processing-model-11:referrer-source&gt;referrer source&lt;/a&gt;!), and with the &lt;i&gt;blocking flag&lt;/i&gt; set and
+    &lt;a href=#origin-2 id=processing-model-11:origin-2&gt;origin&lt;/a&gt; specified by &lt;var&gt;settings object&lt;/var&gt;, using &lt;var&gt;parent referrer source&lt;/var&gt; as the &lt;i&gt;referrer source&lt;/i&gt; (not using
+    the &lt;a href=#referrer-source id=processing-model-11:referrer-source-2&gt;referrer source&lt;/a&gt; specified by &lt;var&gt;settings object&lt;/var&gt;!), and with the &lt;i&gt;blocking flag&lt;/i&gt; set and
     the &lt;i&gt;force same-origin flag&lt;/i&gt; set.&lt;/p&gt; 
 
     &lt;p&gt;If the attempt fails, then for each &lt;code id=processing-model-11:worker&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; or &lt;code id=processing-model-11:sharedworker&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object
@@ -69987,9 +69991,8 @@
   address&lt;/var&gt; it must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited responsible browsing context&lt;/var&gt; be the &lt;a href=#responsible-browsing-context id=script-settings-for-workers:responsible-browsing-context&gt;responsible
-   browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited responsible document&lt;/var&gt; be the &lt;a href=#responsible-document id=script-settings-for-workers:responsible-document&gt;responsible
-   document&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object-2&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited origin&lt;/var&gt; be the &lt;a href=#origin-2 id=script-settings-for-workers:origin-2&gt;origin&lt;/a&gt; specified by the
-   &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object-3&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;worker event loop&lt;/var&gt; be a newly created &lt;a href=#event-loop id=script-settings-for-workers:event-loop&gt;event
+   browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited origin&lt;/var&gt; be the &lt;a href=#origin-2 id=script-settings-for-workers:origin-2&gt;origin&lt;/a&gt; specified by the
+   &lt;a href=#incumbent-settings-object id=script-settings-for-workers:incumbent-settings-object-2&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;Let &lt;var&gt;worker event loop&lt;/var&gt; be a newly created &lt;a href=#event-loop id=script-settings-for-workers:event-loop&gt;event
    loop&lt;/a&gt;.&lt;li&gt;
 
     &lt;p&gt;Let &lt;var&gt;settings object&lt;/var&gt; be a new &lt;a href=#environment-settings-object id=script-settings-for-workers:environment-settings-object&gt;environment settings object&lt;/a&gt; whose algorithms
@@ -70015,14 +70018,15 @@
 
       &lt;p&gt;Return &lt;var&gt;inherited responsible browsing context&lt;/var&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;The &lt;a href=#responsible-document id=script-settings-for-workers:responsible-document-2&gt;responsible document&lt;/a&gt;&lt;dd&gt;
-
-      &lt;p&gt;Return &lt;var&gt;inherited responsible document&lt;/var&gt;.&lt;/p&gt;
-
      &lt;dt&gt;The &lt;a href=#responsible-event-loop id=script-settings-for-workers:responsible-event-loop&gt;responsible event loop&lt;/a&gt;&lt;dd&gt;
 
       &lt;p&gt;Return &lt;var&gt;worker event loop&lt;/var&gt;.&lt;/p&gt;
 
+     &lt;dt&gt;The &lt;a href=#responsible-document id=script-settings-for-workers:responsible-document&gt;responsible document&lt;/a&gt;&lt;dd&gt;
+
+      &lt;p&gt;Not applicable (the &lt;a href=#responsible-event-loop id=script-settings-for-workers:responsible-event-loop-2&gt;responsible event loop&lt;/a&gt; is not a &lt;a href=#browsing-context id=script-settings-for-workers:browsing-context&gt;browsing context&lt;/a&gt;
+      &lt;a href=#event-loop id=script-settings-for-workers:event-loop-2&gt;event loop&lt;/a&gt;).&lt;/p&gt;
+
      &lt;dt&gt;The &lt;a href=#referrer-source id=script-settings-for-workers:referrer-source&gt;referrer source&lt;/a&gt;&lt;dd&gt;
 
       &lt;p&gt;Return &lt;var&gt;script address&lt;/var&gt;.&lt;/p&gt;
@@ -70121,8 +70125,9 @@
    is a &lt;code id=dedicated-workers-and-the-worker-interface:workerglobalscope&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. we are creating a nested worker), add
    &lt;var&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot; id=&quot;dedicated-workers-and-the-worker-interface:the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
    &lt;code id=dedicated-workers-and-the-worker-interface:workerglobalscope-2&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=#global-object id=dedicated-workers-and-the-worker-interface:global-object-2&gt;global object&lt;/a&gt; specified by the
-   &lt;a href=#incumbent-settings-object id=dedicated-workers-and-the-worker-interface:incumbent-settings-object-5&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;&lt;a href=#run-a-worker id=dedicated-workers-and-the-worker-interface:run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url id=dedicated-workers-and-the-worker-interface:url&gt;URL&lt;/a&gt; &lt;var&gt;worker URL&lt;/var&gt; and
-   the &lt;a href=#environment-settings-object id=dedicated-workers-and-the-worker-interface:environment-settings-object&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;.&lt;/ol&gt;
+   &lt;a href=#incumbent-settings-object id=dedicated-workers-and-the-worker-interface:incumbent-settings-object-5&gt;incumbent settings object&lt;/a&gt;.&lt;li&gt;&lt;p&gt;&lt;a href=#run-a-worker id=dedicated-workers-and-the-worker-interface:run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url id=dedicated-workers-and-the-worker-interface:url&gt;URL&lt;/a&gt; &lt;var&gt;worker URL&lt;/var&gt;,
+   the &lt;a href=#environment-settings-object id=dedicated-workers-and-the-worker-interface:environment-settings-object&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;, and with the
+   &lt;a href=#referrer-source id=dedicated-workers-and-the-worker-interface:referrer-source&gt;referrer source&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=dedicated-workers-and-the-worker-interface:incumbent-settings-object-6&gt;incumbent settings object&lt;/a&gt;.&lt;/ol&gt;
 
 
 
@@ -70256,8 +70261,9 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#run-a-worker id=shared-workers-and-the-sharedworker-interface:run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url id=shared-workers-and-the-sharedworker-interface:url&gt;URL&lt;/a&gt; &lt;var&gt;scriptURL&lt;/var&gt;
-    and the &lt;a href=#environment-settings-object id=shared-workers-and-the-sharedworker-interface:environment-settings-object-3&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;&lt;a href=#run-a-worker id=shared-workers-and-the-sharedworker-interface:run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url id=shared-workers-and-the-sharedworker-interface:url&gt;URL&lt;/a&gt; &lt;var&gt;scriptURL&lt;/var&gt;,
+    the &lt;a href=#environment-settings-object id=shared-workers-and-the-sharedworker-interface:environment-settings-object-3&gt;environment settings object&lt;/a&gt; &lt;var&gt;settings object&lt;/var&gt;, and with the
+    &lt;a href=#referrer-source id=shared-workers-and-the-sharedworker-interface:referrer-source&gt;referrer source&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object id=shared-workers-and-the-sharedworker-interface:incumbent-settings-object-9&gt;incumbent settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/ol&gt;
 

Modified: source
===================================================================
--- source	2014-11-19 22:48:09 UTC (rev 8852)
+++ source	2014-11-19 23:35:39 UTC (rev 8853)
@@ -78281,7 +78281,7 @@
   &lt;p&gt;Each &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; has a strong reference to its &lt;span&gt;settings
   object&lt;/span&gt;, and each &lt;span&gt;environment settings object&lt;/span&gt; has strong references to its
   &lt;span&gt;global object&lt;/span&gt;, &lt;span&gt;responsible browsing context&lt;/span&gt;, and &lt;span&gt;responsible
-  document&lt;/span&gt;.&lt;/p&gt;
+  document&lt;/span&gt; (if any).&lt;/p&gt;
 
   &lt;!-- discard a document --&gt;
   &lt;p&gt;When a &lt;span&gt;browsing context&lt;/span&gt; is to &lt;dfn&gt;discard a &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, the user
@@ -84631,6 +84631,15 @@
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;A &lt;dfn&gt;responsible event loop&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;An &lt;span&gt;event loop&lt;/span&gt; that is used when it would not be immediately clear what event
+    loop to use.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
    &lt;dt&gt;A &lt;dfn&gt;responsible document&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -84643,15 +84652,9 @@
     address&quot;&gt;address&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; after it has been reset using &lt;code
     data-x=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt;.&lt;/p&gt;
 
-   &lt;/dd&gt;
+    &lt;p&gt;If the &lt;span&gt;responsible event loop&lt;/span&gt; is not a &lt;span&gt;browsing context&lt;/span&gt; &lt;span&gt;event loop&lt;/span&gt;,
+    then the &lt;span&gt;environment settings object&lt;/span&gt; has no &lt;span&gt;responsible document&lt;/span&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;A &lt;dfn&gt;responsible event loop&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;An &lt;span&gt;event loop&lt;/span&gt; that is used when it would not be immediately clear what event
-    loop to use.&lt;/p&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;A &lt;dfn&gt;referrer source&lt;/dfn&gt;&lt;/dt&gt;
@@ -84736,20 +84739,20 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;The &lt;span&gt;responsible document&lt;/span&gt;&lt;/dt&gt;
+   &lt;dt&gt;The &lt;span&gt;responsible event loop&lt;/span&gt;&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; with which the &lt;code&gt;Window&lt;/code&gt; is currently
-    associated.&lt;/p&gt;
+    &lt;p&gt;Return the &lt;span&gt;event loop&lt;/span&gt; that is associated with the &lt;span&gt;unit of related
+    similar-origin browsing contexts&lt;/span&gt; to which the &lt;code&gt;Window&lt;/code&gt; object's &lt;span&gt;browsing
+    context&lt;/span&gt; belongs.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;The &lt;span&gt;responsible event loop&lt;/span&gt;&lt;/dt&gt;
+   &lt;dt&gt;The &lt;span&gt;responsible document&lt;/span&gt;&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;Return the &lt;span&gt;event loop&lt;/span&gt; that is associated with the &lt;span&gt;unit of related
-    similar-origin browsing contexts&lt;/span&gt; to which the &lt;code&gt;Window&lt;/code&gt; object's &lt;span&gt;browsing
-    context&lt;/span&gt; belongs.&lt;/p&gt;
+    &lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; with which the &lt;code&gt;Window&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -93248,10 +93251,12 @@
 
     &lt;/ol&gt;
 
-    &lt;p&gt;The &lt;span data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; must be associated with the &lt;span&gt;responsible
-    document&lt;/span&gt; specified by the target &lt;code&gt;BroadcastChannel&lt;/code&gt; object's
-    &lt;span&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/span&gt;, and must use the &lt;span&gt;DOM
-    manipulation task source&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;The &lt;span data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; must use the &lt;span&gt;DOM
+    manipulation task source&lt;/span&gt;, and, for those where the &lt;span&gt;event loop&lt;/span&gt; specified by the target &lt;code&gt;BroadcastChannel&lt;/code&gt; object's
+    &lt;span&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/span&gt; is a &lt;span&gt;browsing context&lt;/span&gt; &lt;span&gt;event loop&lt;/span&gt;, must
+    be associated with the &lt;span&gt;responsible
+    document&lt;/span&gt; specified by that target &lt;code&gt;BroadcastChannel&lt;/code&gt; object's
+    &lt;span&gt;&lt;code&gt;BroadcastChannel&lt;/code&gt; settings object&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -93983,7 +93988,7 @@
   &lt;h4&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn&gt;run a worker&lt;/dfn&gt; for a script with &lt;span&gt;URL&lt;/span&gt;
-  &lt;var&gt;url&lt;/var&gt; and an &lt;span&gt;environment settings object&lt;/span&gt; &lt;var&gt;settings object&lt;/var&gt;, it must run
+  &lt;var&gt;url&lt;/var&gt;, an &lt;span&gt;environment settings object&lt;/span&gt; &lt;var&gt;settings object&lt;/var&gt;, and a &lt;span&gt;referrer source&lt;/span&gt; &lt;var&gt;parent referrer source&lt;/var&gt; it must run
   the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
@@ -94013,9 +94018,8 @@
    &lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;span&gt;fetch&lt;/span&gt;&lt;!--FETCH--&gt; the resource identified by &lt;var&gt;url&lt;/var&gt;, from the
-    &lt;span&gt;origin&lt;/span&gt; specified by &lt;var&gt;settings object&lt;/var&gt;, using the &lt;span&gt;responsible
-    document&lt;/span&gt; specified by &lt;var&gt;settings object&lt;/var&gt; as the &lt;var&gt;referrer source&lt;/var&gt; (not using
-    the specified &lt;span&gt;referrer source&lt;/span&gt;!), and with the &lt;i&gt;blocking flag&lt;/i&gt; set and
+    &lt;span&gt;origin&lt;/span&gt; specified by &lt;var&gt;settings object&lt;/var&gt;, using &lt;var&gt;parent referrer source&lt;/var&gt; as the &lt;i&gt;referrer source&lt;/i&gt; (not using
+    the &lt;span&gt;referrer source&lt;/span&gt; specified by &lt;var&gt;settings object&lt;/var&gt;!), and with the &lt;i&gt;blocking flag&lt;/i&gt; set and
     the &lt;i&gt;force same-origin flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not http-origin privacy sensitive (looking
     forward to CORS) --&gt;
 
@@ -94259,9 +94263,6 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited responsible browsing context&lt;/var&gt; be the &lt;span&gt;responsible
    browsing context&lt;/span&gt; specified by the &lt;span&gt;incumbent settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited responsible document&lt;/var&gt; be the &lt;span&gt;responsible
-   document&lt;/span&gt; specified by the &lt;span&gt;incumbent settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Let &lt;var&gt;inherited origin&lt;/var&gt; be the &lt;span&gt;origin&lt;/span&gt; specified by the
    &lt;span&gt;incumbent settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
@@ -94304,17 +94305,18 @@
 
      &lt;/dd&gt;
 
-     &lt;dt&gt;The &lt;span&gt;responsible document&lt;/span&gt;&lt;/dt&gt;
+     &lt;dt&gt;The &lt;span&gt;responsible event loop&lt;/span&gt;&lt;/dt&gt;
      &lt;dd&gt;
 
-      &lt;p&gt;Return &lt;var&gt;inherited responsible document&lt;/var&gt;.&lt;/p&gt;
+      &lt;p&gt;Return &lt;var&gt;worker event loop&lt;/var&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
-     &lt;dt&gt;The &lt;span&gt;responsible event loop&lt;/span&gt;&lt;/dt&gt;
+     &lt;dt&gt;The &lt;span&gt;responsible document&lt;/span&gt;&lt;/dt&gt;
      &lt;dd&gt;
 
-      &lt;p&gt;Return &lt;var&gt;worker event loop&lt;/var&gt;.&lt;/p&gt;
+      &lt;p&gt;Not applicable (the &lt;span&gt;responsible event loop&lt;/span&gt; is not a &lt;span&gt;browsing context&lt;/span&gt;
+      &lt;span&gt;event loop&lt;/span&gt;).&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -94489,8 +94491,9 @@
    &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object that is the &lt;span&gt;global object&lt;/span&gt; specified by the
    &lt;span&gt;incumbent settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Run a worker&lt;/span&gt; for the script with &lt;span&gt;URL&lt;/span&gt; &lt;var&gt;worker URL&lt;/var&gt; and
-   the &lt;span&gt;environment settings object&lt;/span&gt; &lt;var&gt;settings object&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Run a worker&lt;/span&gt; for the script with &lt;span&gt;URL&lt;/span&gt; &lt;var&gt;worker URL&lt;/var&gt;,
+   the &lt;span&gt;environment settings object&lt;/span&gt; &lt;var&gt;settings object&lt;/var&gt;, and with the
+   &lt;span&gt;referrer source&lt;/span&gt; specified by the &lt;span&gt;incumbent settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -94719,8 +94722,9 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;span&gt;Run a worker&lt;/span&gt; for the script with &lt;span&gt;URL&lt;/span&gt; &lt;var&gt;scriptURL&lt;/var&gt;
-    and the &lt;span&gt;environment settings object&lt;/span&gt; &lt;var&gt;settings object&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;&lt;span&gt;Run a worker&lt;/span&gt; for the script with &lt;span&gt;URL&lt;/span&gt; &lt;var&gt;scriptURL&lt;/var&gt;,
+    the &lt;span&gt;environment settings object&lt;/span&gt; &lt;var&gt;settings object&lt;/var&gt;, and with the
+    &lt;span&gt;referrer source&lt;/span&gt; specified by the &lt;span&gt;incumbent settings object&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 

</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023450.html">[html5] r8852 - [e] (0) We now reference CSSANIMATIONS normatively	Affected topics: HTML
</A></li>
	<LI>Next message: <A HREF="023452.html">[html5] r8854 - [agiow] (0) Drop drawCustomFocusRing(),	since no browsers have indicated interes [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23451">[ date ]</a>
              <a href="thread.html#23451">[ thread ]</a>
              <a href="subject.html#23451">[ subject ]</a>
              <a href="author.html#23451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
