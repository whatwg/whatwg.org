<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8425 - [giow] (1) Update the spec to say what's exposed to	workers: take 1 Fixing https [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8425%20-%20%5Bgiow%5D%20%281%29%20Update%20the%20spec%20to%20say%20what%27s%20exposed%20to%0A%09workers%3A%20take%201%20Fixing%20https%20%5B...%5D&In-Reply-To=%3C20140127230850.6CD2EC3C5D37%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8425 - [giow] (1) Update the spec to say what's exposed to	workers: take 1 Fixing https [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8425%20-%20%5Bgiow%5D%20%281%29%20Update%20the%20spec%20to%20say%20what%27s%20exposed%20to%0A%09workers%3A%20take%201%20Fixing%20https%20%5B...%5D&In-Reply-To=%3C20140127230850.6CD2EC3C5D37%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8425 - [giow] (1) Update the spec to say what's exposed to	workers: take 1 Fixing https [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Jan 27 15:08:50 PST 2014</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23042">[ date ]</a>
              <a href="thread.html#23042">[ thread ]</a>
              <a href="subject.html#23042">[ subject ]</a>
              <a href="author.html#23042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2014-01-27 15:08:49 -0800 (Mon, 27 Jan 2014)
New Revision: 8425

Modified:
   complete.html
   index
   source
Log:
[giow] (1) Update the spec to say what's exposed to workers: take 1
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22646">https://www.w3.org/Bugs/Public/show_bug.cgi?id=22646</A>
Affected topics: Canvas, DOM APIs, HTML, HTML Syntax and Parsing, Offline Web Applications, Workers

Modified: complete.html
===================================================================
--- complete.html	2014-01-27 20:20:38 UTC (rev 8424)
+++ complete.html	2014-01-27 23:08:49 UTC (rev 8425)
@@ -8009,7 +8009,7 @@
   algorithms, one for getting the list of name-value pairs, one for setting names to certain values,
   and one for deleting names.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[OverrideBuiltins]
+  &lt;pre class=idl&gt;[OverrideBuiltins,Exposed=Window,Worker]
 interface &lt;dfn id=domstringmap&gt;DOMStringMap&lt;/dfn&gt; {
   &lt;a href=#dom-domstringmap-nameditem title=dom-DOMStringMap-namedItem&gt;getter&lt;/a&gt; DOMString (DOMString name);
   &lt;a href=#dom-domstringmap-setitem title=dom-DOMStringMap-setItem&gt;setter&lt;/a&gt; &lt;a href=#dom-domstringmap-additem title=dom-DOMStringMap-addItem&gt;creator&lt;/a&gt; void (DOMString name, DOMString value);
@@ -53946,7 +53946,8 @@
   &lt;p&gt;Since DOM nodes cannot be accessed across worker boundaries, a proxy object is needed to enable
   workers to render to &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements in &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=canvasproxy&gt;CanvasProxy&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[Exposed=Window,Worker]
+interface &lt;dfn id=canvasproxy&gt;CanvasProxy&lt;/dfn&gt; {
   void &lt;a href=#dom-canvasproxy-setcontext title=dom-CanvasProxy-setContext&gt;setContext&lt;/a&gt;(&lt;a href=#renderingcontext&gt;RenderingContext&lt;/a&gt; context);
 };
 // &lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;&lt;/pre&gt;
@@ -54070,7 +54071,7 @@
 
 enum &lt;dfn id=canvasfillrule&gt;CanvasFillRule&lt;/dfn&gt; { &quot;&lt;a href=#dom-context-2d-fillrule-nonzero title=dom-context-2d-fillRule-nonzero&gt;nonzero&lt;/a&gt;&quot;, &quot;&lt;a href=#dom-context-2d-fillrule-evenodd title=dom-context-2d-fillRule-evenodd&gt;evenodd&lt;/a&gt;&quot; };
 
-[&lt;a href=#dom-context-2d title=dom-context-2d&gt;Constructor&lt;/a&gt;(optional unsigned long width, unsigned long height)]
+[&lt;a href=#dom-context-2d title=dom-context-2d&gt;Constructor&lt;/a&gt;(optional unsigned long width, unsigned long height), Exposed=Window,Worker]
 interface &lt;dfn id=canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
 
   // back-reference to the canvas
@@ -64899,7 +64900,7 @@
 &lt;!--TOPIC:DOM APIs--&gt;
   &lt;h3 id=the-window-object&gt;&lt;span class=secno&gt;6.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h3&gt;
 
-  &lt;pre class=idl&gt;[Global]
+  &lt;pre class=idl&gt;[PrimaryGlobal]
 /*sealed*/ interface &lt;dfn id=window&gt;Window&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   // the current browsing context
   [Unforgeable] readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-window title=dom-window&gt;window&lt;/a&gt;;
@@ -68377,7 +68378,7 @@
 
   &lt;h5 id=the-popstateevent-interface&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#popstateevent&gt;PopStateEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#popstateeventinit&gt;PopStateEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#popstateeventinit&gt;PopStateEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=popstateevent&gt;PopStateEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute any &lt;a href=#dom-popstateevent-state title=dom-PopStateEvent-state&gt;state&lt;/a&gt;;
 };
@@ -68406,7 +68407,7 @@
 
   &lt;h5 id=the-hashchangeevent-interface&gt;&lt;span class=secno&gt;6.6.10.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#hashchangeevent&gt;HashChangeEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#hashchangeeventinit&gt;HashChangeEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#hashchangeeventinit&gt;HashChangeEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=hashchangeevent&gt;HashChangeEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-hashchangeevent-oldurl title=dom-HashChangeEvent-oldURL&gt;oldURL&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-hashchangeevent-newurl title=dom-HashChangeEvent-newURL&gt;newURL&lt;/a&gt;;
@@ -68453,7 +68454,7 @@
 
   &lt;h5 id=the-pagetransitionevent-interface&gt;&lt;span class=secno&gt;6.6.10.3 &lt;/span&gt;The &lt;code&gt;&lt;a href=#pagetransitionevent&gt;PageTransitionEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#pagetransitioneventinit&gt;PageTransitionEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#pagetransitioneventinit&gt;PageTransitionEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=pagetransitionevent&gt;PageTransitionEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute boolean &lt;a href=#dom-pagetransitionevent-persisted title=dom-PageTransitionEvent-persisted&gt;persisted&lt;/a&gt;;
 };
@@ -70455,7 +70456,8 @@
 
   &lt;h4 id=application-cache-api&gt;&lt;span class=secno&gt;6.7.9 &lt;/span&gt;Application cache API&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=applicationcache&gt;ApplicationCache&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  &lt;pre class=idl&gt;[Exposed=Window,SharedWorker]
+interface &lt;dfn id=applicationcache&gt;ApplicationCache&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
 
   // &lt;a href=#concept-appcache-status title=concept-appcache-status&gt;update status&lt;/a&gt;
   const unsigned short &lt;a href=#dom-appcache-uncached title=dom-appcache-UNCACHED&gt;UNCACHED&lt;/a&gt; = 0;
@@ -70670,7 +70672,7 @@
 
   &lt;h4 id=browser-state&gt;&lt;span class=secno&gt;6.7.10 &lt;/span&gt;Browser state&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=navigatoronline&gt;NavigatorOnLine&lt;/dfn&gt; {
   readonly attribute boolean &lt;a href=#dom-navigator-online title=dom-navigator-onLine&gt;onLine&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -71304,7 +71306,7 @@
 
   &lt;h6 id=the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.6.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#errorevent&gt;ErrorEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h6&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#erroreventinit&gt;ErrorEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#erroreventinit&gt;ErrorEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=errorevent&gt;ErrorEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-errorevent-message title=dom-ErrorEvent-message&gt;message&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-errorevent-filename title=dom-ErrorEvent-filename&gt;filename&lt;/a&gt;;
@@ -72343,7 +72345,7 @@
 
   &lt;!-- v2: actual binary support --&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=windowbase64&gt;WindowBase64&lt;/dfn&gt; {
   DOMString &lt;a href=#dom-windowbase64-btoa title=dom-windowbase64-btoa&gt;btoa&lt;/a&gt;(DOMString btoa);
   DOMString &lt;a href=#dom-windowbase64-atob title=dom-windowbase64-atob&gt;atob&lt;/a&gt;(DOMString atob);
@@ -72979,7 +72981,7 @@
   and &lt;code title=dom-windowtimers-setInterval&gt;&lt;a href=#dom-windowtimers-setinterval&gt;setInterval()&lt;/a&gt;&lt;/code&gt;
   methods allow authors to schedule timer-based callbacks.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=windowtimers&gt;WindowTimers&lt;/dfn&gt; {
   long &lt;a href=#dom-windowtimers-settimeout title=dom-windowtimers-setTimeout&gt;setTimeout&lt;/a&gt;(&lt;span&gt;Function&lt;/span&gt; handler, optional long timeout, any... arguments);
   long &lt;a href=#dom-windowtimers-settimeout title=dom-windowtimers-setTimeout&gt;setTimeout&lt;/a&gt;(DOMString handler, optional long timeout, any... arguments);
@@ -73645,7 +73647,8 @@
 
   &lt;/div&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject] interface &lt;dfn id=windowmodal&gt;WindowModal&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[NoInterfaceObject]
+interface &lt;dfn id=windowmodal&gt;WindowModal&lt;/dfn&gt; {
   readonly attribute any &lt;a href=#dom-windowmodal-dialogarguments title=dom-WindowModal-dialogArguments&gt;dialogArguments&lt;/a&gt;;
            attribute any &lt;a href=#dom-windowmodal-returnvalue title=dom-WindowModal-returnValue&gt;returnValue&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -73736,7 +73739,7 @@
 
   &lt;h5 id=client-identification&gt;&lt;span class=secno&gt;7.6.1.1 &lt;/span&gt;Client identification&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=navigatorid&gt;NavigatorID&lt;/dfn&gt; {
   readonly attribute DOMString &lt;a href=#dom-navigator-appcodename title=dom-navigator-appCodeName&gt;appCodeName&lt;/a&gt;; // constant &quot;Mozilla&quot;
   readonly attribute DOMString &lt;a href=#dom-navigator-appname title=dom-navigator-appName&gt;appName&lt;/a&gt;;
@@ -73847,7 +73850,7 @@
 
   &lt;h5 id=language-preferences&gt;&lt;span class=secno&gt;7.6.1.2 &lt;/span&gt;Language preferences&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=navigatorlanguage&gt;NavigatorLanguage&lt;/dfn&gt; {
   readonly attribute DOMString? &lt;a href=#dom-navigator-language title=dom-navigator-language&gt;language&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -74984,7 +74987,8 @@
 
   &lt;h3 id=images&gt;&lt;span class=secno&gt;7.7 &lt;/span&gt;Images&lt;/h3&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=imagebitmap&gt;ImageBitmap&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[Exposed=Window,Worker]
+interface &lt;dfn id=imagebitmap&gt;ImageBitmap&lt;/dfn&gt; {
   readonly attribute unsigned long &lt;a href=#dom-imagebitmap-width title=dom-ImageBitmap-width&gt;width&lt;/a&gt;;
   readonly attribute unsigned long &lt;a href=#dom-imagebitmap-height title=dom-ImageBitmap-height&gt;height&lt;/a&gt;;
 };
@@ -74997,7 +75001,7 @@
          &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; or
          &lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;) &lt;dfn id=imagebitmapsource&gt;ImageBitmapSource&lt;/dfn&gt;;
 
-[NoInterfaceObject]
+[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=imagebitmapfactories&gt;ImageBitmapFactories&lt;/dfn&gt; {
   &lt;a href=#promise&gt;Promise&lt;/a&gt; &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#imagebitmapsource&gt;ImageBitmapSource&lt;/a&gt; image, optional long sx, long sy, long sw, long sh);
 };
@@ -78681,13 +78685,14 @@
   &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; interface for their &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;
   events:&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#messageeventinit&gt;MessageEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#messageeventinit&gt;MessageEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=messageevent&gt;MessageEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute any &lt;a href=#dom-messageevent-data title=dom-MessageEvent-data&gt;data&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-messageevent-origin title=dom-MessageEvent-origin&gt;origin&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-messageevent-lasteventid title=dom-MessageEvent-lastEventId&gt;lastEventId&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-messageevent-channel title=dom-MessageEvent-channel&gt;channel&lt;/a&gt;;
-  readonly attribute (&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; or &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;)? &lt;a href=#dom-messageevent-source title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
+  [Exposed=Window] readonly attribute (&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; or &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;)? &lt;a href=#dom-messageevent-source title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
+  [Exposed=Worker] readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;? &lt;a href=#dom-messageevent-source title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;[]? &lt;a href=#dom-messageevent-ports title=dom-MessageEvent-ports&gt;ports&lt;/a&gt;;
 };
 
@@ -78859,7 +78864,7 @@
 
   &lt;h4 id=the-eventsource-interface&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-eventsource title=dom-EventSource&gt;Constructor&lt;/a&gt;(DOMString url, optional &lt;a href=#eventsourceinit&gt;EventSourceInit&lt;/a&gt; eventSourceInitDict)]
+  &lt;pre class=idl&gt;[&lt;a href=#dom-eventsource title=dom-EventSource&gt;Constructor&lt;/a&gt;(DOMString url, optional &lt;a href=#eventsourceinit&gt;EventSourceInit&lt;/a&gt; eventSourceInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=eventsource&gt;EventSource&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-eventsource-url title=dom-EventSource-url&gt;url&lt;/a&gt;;
   readonly attribute boolean &lt;a href=#dom-eventsource-withcredentials title=dom-EventSource-withCredentials&gt;withCredentials&lt;/a&gt;;
@@ -79634,7 +79639,7 @@
   &lt;h4 id=the-websocket-interface&gt;&lt;span class=secno&gt;9.3.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;pre class=idl&gt;enum &lt;dfn id=binarytype&gt;BinaryType&lt;/dfn&gt; { &quot;&lt;span title=dom-BinaryType-blob&gt;blob&lt;/span&gt;&quot;, &quot;&lt;span title=dom-BinaryType-arraybuffer&gt;arraybuffer&lt;/span&gt;&quot; };
-[&lt;a href=#dom-websocket title=dom-WebSocket&gt;Constructor&lt;/a&gt;(DOMString url, optional (DOMString or DOMString[]) protocols)]
+[&lt;a href=#dom-websocket title=dom-WebSocket&gt;Constructor&lt;/a&gt;(DOMString url, optional (DOMString or DOMString[]) protocols), Exposed=Window,Worker]
 interface &lt;dfn id=websocket&gt;WebSocket&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-websocket-url title=dom-WebSocket-url&gt;url&lt;/a&gt;;
 
@@ -80247,7 +80252,7 @@
 
   &lt;/ol&gt;&lt;h4 id=the-closeevent-interfaces&gt;&lt;span class=secno&gt;9.3.6 &lt;/span&gt;The &lt;code&gt;&lt;a href=#closeevent&gt;CloseEvent&lt;/a&gt;&lt;/code&gt; interfaces&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#closeeventinit&gt;CloseEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#closeeventinit&gt;CloseEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=closeevent&gt;CloseEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute boolean &lt;a href=#dom-closeevent-wasclean title=dom-CloseEvent-wasClean&gt;wasClean&lt;/a&gt;;
   readonly attribute unsigned short &lt;a href=#dom-closeevent-code title=dom-CloseEvent-code&gt;code&lt;/a&gt;;
@@ -80750,7 +80755,7 @@
 
   &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;9.5.2 &lt;/span&gt;Message channels&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-messagechannel title=dom-MessageChannel&gt;Constructor&lt;/a&gt;]
+  &lt;pre class=idl&gt;[&lt;a href=#dom-messagechannel title=dom-MessageChannel&gt;Constructor&lt;/a&gt;, Exposed=Window,Worker]
 interface &lt;dfn id=messagechannel&gt;MessageChannel&lt;/dfn&gt; {
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-channel-port1 title=dom-channel-port1&gt;port1&lt;/a&gt;;
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-channel-port2 title=dom-channel-port2&gt;port2&lt;/a&gt;;
@@ -80815,7 +80820,8 @@
   &lt;p&gt;Each channel has two message ports. Data sent through one port is received by the other port,
   and vice versa.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=messageport&gt;MessagePort&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  &lt;pre class=idl&gt;[Exposed=Window,Worker]
+interface &lt;dfn id=messageport&gt;MessagePort&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   void &lt;a href=#dom-messageport-postmessage title=dom-MessagePort-postMessage&gt;postMessage&lt;/a&gt;(any message, optional sequence&lt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&gt; transfer);&lt;!--
   &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-MessagePort-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
   void &lt;a href=#dom-messageport-start title=dom-MessagePort-start&gt;start&lt;/a&gt;();
@@ -80867,8 +80873,9 @@
   initially be false, and an &lt;dfn id=concept-port-owner title=concept-port-owner&gt;owner&lt;/dfn&gt;, which is a &lt;a href=#settings-object&gt;settings
   object&lt;/a&gt; set when the object is created, as described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a port's &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; is enabled, the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must use
-  it as one of its &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt;. All &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; on the &lt;a href=#port-message-queue&gt;port
+  it as one of its &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt;. When a port's &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; specifies a &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt; that is a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, all &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; on its &lt;a href=#port-message-queue&gt;port
   message queue&lt;/a&gt; must be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by
   the port's &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/p&gt;
 
@@ -80942,15 +80949,19 @@
 
    &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag to true.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;Move all the &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; that are to fire &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events in the &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;original port&lt;/var&gt; to the &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;new
    port&lt;/var&gt;, if any, leaving the &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt;
-   in its initial disabled state, and reassociating the moved &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/li&gt;
+   in its initial disabled state, and, if the &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   specifies a &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt; that is a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, associating the moved &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;original port&lt;/var&gt; is &lt;a href=#related-to-an-ill-fated-port&gt;related to an ill-fated port&lt;/a&gt;, then
    create a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that &lt;a href=#fire-a-simple-event title=&quot;fire a simple event&quot;&gt;fires a
    simple event&lt;/a&gt; named &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the &lt;var title=&quot;&quot;&gt;new
    port&lt;/var&gt;, and add the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; to the &lt;a href=#port-message-queue&gt;port message
-   queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;. The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must
+   queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;. If the &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   specifies a &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt; that is a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must
    be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;new
    port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/li&gt;
 
@@ -81191,9 +81202,11 @@
    &lt;li&gt;&lt;p&gt;Mark &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt; as being a &lt;dfn id=related-to-an-ill-fated-port&gt;related to an ill-fated
    port&lt;/dfn&gt;.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;Create a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that &lt;a href=#fire-a-simple-event title=&quot;fire a simple
    event&quot;&gt;fires a simple event&lt;/a&gt; named &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, and add the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; to the
-   &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;. The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;
+   &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;. If the &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   specifies a &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt; that is a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;
    specified by &lt;var title=&quot;&quot;&gt;source port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Disentangle the two ports.&lt;/li&gt;
@@ -81234,7 +81247,8 @@
   they stop being relevant, while still allowing scripts to iterate over the
   &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-portcollection title=dom-PortCollection&gt;Constructor&lt;/a&gt;] interface &lt;dfn id=portcollection&gt;PortCollection&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[&lt;a href=#dom-portcollection title=dom-PortCollection&gt;Constructor&lt;/a&gt;, Exposed=Window,Worker]
+interface &lt;dfn id=portcollection&gt;PortCollection&lt;/dfn&gt; {
   void &lt;a href=#dom-portcollection-add title=dom-PortCollection-add&gt;add&lt;/a&gt;(&lt;a href=#messageport&gt;MessagePort&lt;/a&gt; port);
   void &lt;a href=#dom-portcollection-remove title=dom-PortCollection-remove&gt;remove&lt;/a&gt;(&lt;a href=#messageport&gt;MessagePort&lt;/a&gt; port);
   void &lt;a href=#dom-portcollection-clear title=dom-PortCollection-clear&gt;clear&lt;/a&gt;();
@@ -81382,7 +81396,8 @@
   &lt;p&gt;For simple cases, though, where a shared worker would be an unreasonable overhead, authors can
   use the simple channel-based broadcast mechanism described in this section.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-broadcastchannel title=dom-BroadcastChannel&gt;Constructor&lt;/a&gt;(DOMString channel)] interface &lt;dfn id=broadcastchannel&gt;BroadcastChannel&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[&lt;a href=#dom-broadcastchannel title=dom-BroadcastChannel&gt;Constructor&lt;/a&gt;(DOMString channel)]
+interface &lt;dfn id=broadcastchannel&gt;BroadcastChannel&lt;/dfn&gt; {
   void &lt;a href=#dom-broadcastchannel-postmessage title=dom-BroadcastChannel-postMessage&gt;postMessage&lt;/a&gt;(DOMString message);
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-broadcastchannel-onmessage title=handler-BroadcastChannel-onmessage&gt;onmessage&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -82580,7 +82595,8 @@
 
   &lt;h5 id=the-workerglobalscope-common-interface&gt;&lt;span class=secno&gt;10.2.1.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; common interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=workerglobalscope&gt;WorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  &lt;pre class=idl&gt;[Exposed=Worker] &lt;!-- not sure we really need that, but... --&gt;
+interface &lt;dfn id=workerglobalscope&gt;WorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; &lt;a href=#dom-workerglobalscope-self title=dom-WorkerGlobalScope-self&gt;self&lt;/a&gt;;
   readonly attribute &lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt; &lt;a href=#dom-workerglobalscope-location title=dom-WorkerGlobalScope-location&gt;location&lt;/a&gt;;
 
@@ -82627,7 +82643,7 @@
 
   &lt;h5 id=dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;10.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Global]
+  &lt;pre class=idl&gt;[Global=Worker,DedicatedWorker]
 /*sealed*/ interface &lt;dfn id=dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; {
   void &lt;a href=#dom-dedicatedworkerglobalscope-postmessage title=dom-DedicatedWorkerGlobalScope-postMessage&gt;postMessage&lt;/a&gt;(any message, optional sequence&lt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&gt; transfer);&lt;!--
   &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-DedicatedWorkerGlobalScope-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
@@ -82673,7 +82689,7 @@
 
   &lt;h5 id=shared-workers-and-the-sharedworkerglobalscope-interface&gt;&lt;span class=secno&gt;10.2.1.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Global]
+  &lt;pre class=idl&gt;[Global=Worker,SharedWorker]
 /*sealed*/ interface &lt;dfn id=sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-sharedworkerglobalscope-name title=dom-SharedWorkerGlobalScope-name&gt;name&lt;/a&gt;;
   readonly attribute &lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt; &lt;a href=#dom-sharedworkerglobalscope-applicationcache title=dom-SharedWorkerGlobalScope-applicationCache&gt;applicationCache&lt;/a&gt;;
@@ -83007,7 +83023,7 @@
 
   &lt;h5 id=the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;10.2.6.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt;&lt;/code&gt; abstract interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=abstractworker&gt;AbstractWorker&lt;/dfn&gt; {
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-abstractworker-onerror title=handler-AbstractWorker-onerror&gt;onerror&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -83119,7 +83135,7 @@
 
   &lt;/ol&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL)]
+  &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL), Exposed=Window,Worker]
 interface &lt;dfn id=worker&gt;Worker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   void &lt;a href=#dom-worker-terminate title=dom-Worker-terminate&gt;terminate&lt;/a&gt;();
 
@@ -83245,7 +83261,7 @@
 
   &lt;/ol&gt;&lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.4 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name)]
+  &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name), Exposed=Window,Worker]
 interface &lt;dfn id=sharedworker&gt;SharedWorker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-sharedworker-port title=dom-SharedWorker-port&gt;port&lt;/a&gt;;
 };
@@ -83448,7 +83464,8 @@
 
   &lt;h3 id=apis-available-to-workers&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;APIs available to workers&lt;/h3&gt;
 
-  &lt;pre class=idl&gt;partial interface &lt;a href=#workerglobalscope id=WorkerGlobalScope-partial&gt;WorkerGlobalScope&lt;/a&gt; {&lt;!-- not obsolete --&gt;
+  &lt;pre class=idl&gt;[Exposed=Worker]
+partial interface &lt;a href=#workerglobalscope id=WorkerGlobalScope-partial&gt;WorkerGlobalScope&lt;/a&gt; {&lt;!-- not obsolete --&gt;
   void &lt;a href=#dom-workerglobalscope-importscripts title=dom-WorkerGlobalScope-importScripts&gt;importScripts&lt;/a&gt;(DOMString... urls);
   readonly attribute &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; &lt;a href=#dom-worker-navigator title=dom-worker-navigator&gt;navigator&lt;/a&gt;;
 };
@@ -83538,7 +83555,8 @@
   the &lt;code&gt;&lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt;&lt;/code&gt; interface, which represents the
   identity and state of the user agent (the client):&lt;/p&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=workernavigator&gt;WorkerNavigator&lt;/dfn&gt; {};
+  &lt;pre class=idl&gt;[Exposed=Worker]
+interface &lt;dfn id=workernavigator&gt;WorkerNavigator&lt;/dfn&gt; {};
 &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; implements &lt;a href=#navigatorid&gt;NavigatorID&lt;/a&gt;;
 &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; implements &lt;a href=#navigatorlanguage&gt;NavigatorLanguage&lt;/a&gt;;
 &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; implements &lt;a href=#navigatoronline&gt;NavigatorOnLine&lt;/a&gt;;&lt;/pre&gt;
@@ -83569,7 +83587,8 @@
 
   &lt;h4 id=worker-locations&gt;&lt;span class=secno&gt;10.3.4 &lt;/span&gt;Worker locations&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=workerlocation&gt;WorkerLocation&lt;/dfn&gt; { };
+  &lt;pre class=idl&gt;[Exposed=Worker]
+interface &lt;dfn id=workerlocation&gt;WorkerLocation&lt;/dfn&gt; { };
 &lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt; implements &lt;a href=#urlutilsreadonly&gt;URLUtilsReadOnly&lt;/a&gt;;&lt;/pre&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt;&lt;/code&gt; object represents an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; set at its

Modified: index
===================================================================
--- index	2014-01-27 20:20:38 UTC (rev 8424)
+++ index	2014-01-27 23:08:49 UTC (rev 8425)
@@ -8009,7 +8009,7 @@
   algorithms, one for getting the list of name-value pairs, one for setting names to certain values,
   and one for deleting names.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[OverrideBuiltins]
+  &lt;pre class=idl&gt;[OverrideBuiltins,Exposed=Window,Worker]
 interface &lt;dfn id=domstringmap&gt;DOMStringMap&lt;/dfn&gt; {
   &lt;a href=#dom-domstringmap-nameditem title=dom-DOMStringMap-namedItem&gt;getter&lt;/a&gt; DOMString (DOMString name);
   &lt;a href=#dom-domstringmap-setitem title=dom-DOMStringMap-setItem&gt;setter&lt;/a&gt; &lt;a href=#dom-domstringmap-additem title=dom-DOMStringMap-addItem&gt;creator&lt;/a&gt; void (DOMString name, DOMString value);
@@ -53946,7 +53946,8 @@
   &lt;p&gt;Since DOM nodes cannot be accessed across worker boundaries, a proxy object is needed to enable
   workers to render to &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements in &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=canvasproxy&gt;CanvasProxy&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[Exposed=Window,Worker]
+interface &lt;dfn id=canvasproxy&gt;CanvasProxy&lt;/dfn&gt; {
   void &lt;a href=#dom-canvasproxy-setcontext title=dom-CanvasProxy-setContext&gt;setContext&lt;/a&gt;(&lt;a href=#renderingcontext&gt;RenderingContext&lt;/a&gt; context);
 };
 // &lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;&lt;/pre&gt;
@@ -54070,7 +54071,7 @@
 
 enum &lt;dfn id=canvasfillrule&gt;CanvasFillRule&lt;/dfn&gt; { &quot;&lt;a href=#dom-context-2d-fillrule-nonzero title=dom-context-2d-fillRule-nonzero&gt;nonzero&lt;/a&gt;&quot;, &quot;&lt;a href=#dom-context-2d-fillrule-evenodd title=dom-context-2d-fillRule-evenodd&gt;evenodd&lt;/a&gt;&quot; };
 
-[&lt;a href=#dom-context-2d title=dom-context-2d&gt;Constructor&lt;/a&gt;(optional unsigned long width, unsigned long height)]
+[&lt;a href=#dom-context-2d title=dom-context-2d&gt;Constructor&lt;/a&gt;(optional unsigned long width, unsigned long height), Exposed=Window,Worker]
 interface &lt;dfn id=canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
 
   // back-reference to the canvas
@@ -64899,7 +64900,7 @@
 &lt;!--TOPIC:DOM APIs--&gt;
   &lt;h3 id=the-window-object&gt;&lt;span class=secno&gt;6.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h3&gt;
 
-  &lt;pre class=idl&gt;[Global]
+  &lt;pre class=idl&gt;[PrimaryGlobal]
 /*sealed*/ interface &lt;dfn id=window&gt;Window&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   // the current browsing context
   [Unforgeable] readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-window title=dom-window&gt;window&lt;/a&gt;;
@@ -68377,7 +68378,7 @@
 
   &lt;h5 id=the-popstateevent-interface&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#popstateevent&gt;PopStateEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#popstateeventinit&gt;PopStateEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#popstateeventinit&gt;PopStateEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=popstateevent&gt;PopStateEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute any &lt;a href=#dom-popstateevent-state title=dom-PopStateEvent-state&gt;state&lt;/a&gt;;
 };
@@ -68406,7 +68407,7 @@
 
   &lt;h5 id=the-hashchangeevent-interface&gt;&lt;span class=secno&gt;6.6.10.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#hashchangeevent&gt;HashChangeEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#hashchangeeventinit&gt;HashChangeEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#hashchangeeventinit&gt;HashChangeEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=hashchangeevent&gt;HashChangeEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-hashchangeevent-oldurl title=dom-HashChangeEvent-oldURL&gt;oldURL&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-hashchangeevent-newurl title=dom-HashChangeEvent-newURL&gt;newURL&lt;/a&gt;;
@@ -68453,7 +68454,7 @@
 
   &lt;h5 id=the-pagetransitionevent-interface&gt;&lt;span class=secno&gt;6.6.10.3 &lt;/span&gt;The &lt;code&gt;&lt;a href=#pagetransitionevent&gt;PageTransitionEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#pagetransitioneventinit&gt;PageTransitionEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#pagetransitioneventinit&gt;PageTransitionEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=pagetransitionevent&gt;PageTransitionEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute boolean &lt;a href=#dom-pagetransitionevent-persisted title=dom-PageTransitionEvent-persisted&gt;persisted&lt;/a&gt;;
 };
@@ -70455,7 +70456,8 @@
 
   &lt;h4 id=application-cache-api&gt;&lt;span class=secno&gt;6.7.9 &lt;/span&gt;Application cache API&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=applicationcache&gt;ApplicationCache&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  &lt;pre class=idl&gt;[Exposed=Window,SharedWorker]
+interface &lt;dfn id=applicationcache&gt;ApplicationCache&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
 
   // &lt;a href=#concept-appcache-status title=concept-appcache-status&gt;update status&lt;/a&gt;
   const unsigned short &lt;a href=#dom-appcache-uncached title=dom-appcache-UNCACHED&gt;UNCACHED&lt;/a&gt; = 0;
@@ -70670,7 +70672,7 @@
 
   &lt;h4 id=browser-state&gt;&lt;span class=secno&gt;6.7.10 &lt;/span&gt;Browser state&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=navigatoronline&gt;NavigatorOnLine&lt;/dfn&gt; {
   readonly attribute boolean &lt;a href=#dom-navigator-online title=dom-navigator-onLine&gt;onLine&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -71304,7 +71306,7 @@
 
   &lt;h6 id=the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.6.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#errorevent&gt;ErrorEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h6&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#erroreventinit&gt;ErrorEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#erroreventinit&gt;ErrorEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=errorevent&gt;ErrorEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-errorevent-message title=dom-ErrorEvent-message&gt;message&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-errorevent-filename title=dom-ErrorEvent-filename&gt;filename&lt;/a&gt;;
@@ -72343,7 +72345,7 @@
 
   &lt;!-- v2: actual binary support --&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=windowbase64&gt;WindowBase64&lt;/dfn&gt; {
   DOMString &lt;a href=#dom-windowbase64-btoa title=dom-windowbase64-btoa&gt;btoa&lt;/a&gt;(DOMString btoa);
   DOMString &lt;a href=#dom-windowbase64-atob title=dom-windowbase64-atob&gt;atob&lt;/a&gt;(DOMString atob);
@@ -72979,7 +72981,7 @@
   and &lt;code title=dom-windowtimers-setInterval&gt;&lt;a href=#dom-windowtimers-setinterval&gt;setInterval()&lt;/a&gt;&lt;/code&gt;
   methods allow authors to schedule timer-based callbacks.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=windowtimers&gt;WindowTimers&lt;/dfn&gt; {
   long &lt;a href=#dom-windowtimers-settimeout title=dom-windowtimers-setTimeout&gt;setTimeout&lt;/a&gt;(&lt;span&gt;Function&lt;/span&gt; handler, optional long timeout, any... arguments);
   long &lt;a href=#dom-windowtimers-settimeout title=dom-windowtimers-setTimeout&gt;setTimeout&lt;/a&gt;(DOMString handler, optional long timeout, any... arguments);
@@ -73645,7 +73647,8 @@
 
   &lt;/div&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject] interface &lt;dfn id=windowmodal&gt;WindowModal&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[NoInterfaceObject]
+interface &lt;dfn id=windowmodal&gt;WindowModal&lt;/dfn&gt; {
   readonly attribute any &lt;a href=#dom-windowmodal-dialogarguments title=dom-WindowModal-dialogArguments&gt;dialogArguments&lt;/a&gt;;
            attribute any &lt;a href=#dom-windowmodal-returnvalue title=dom-WindowModal-returnValue&gt;returnValue&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -73736,7 +73739,7 @@
 
   &lt;h5 id=client-identification&gt;&lt;span class=secno&gt;7.6.1.1 &lt;/span&gt;Client identification&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=navigatorid&gt;NavigatorID&lt;/dfn&gt; {
   readonly attribute DOMString &lt;a href=#dom-navigator-appcodename title=dom-navigator-appCodeName&gt;appCodeName&lt;/a&gt;; // constant &quot;Mozilla&quot;
   readonly attribute DOMString &lt;a href=#dom-navigator-appname title=dom-navigator-appName&gt;appName&lt;/a&gt;;
@@ -73847,7 +73850,7 @@
 
   &lt;h5 id=language-preferences&gt;&lt;span class=secno&gt;7.6.1.2 &lt;/span&gt;Language preferences&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=navigatorlanguage&gt;NavigatorLanguage&lt;/dfn&gt; {
   readonly attribute DOMString? &lt;a href=#dom-navigator-language title=dom-navigator-language&gt;language&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -74984,7 +74987,8 @@
 
   &lt;h3 id=images&gt;&lt;span class=secno&gt;7.7 &lt;/span&gt;Images&lt;/h3&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=imagebitmap&gt;ImageBitmap&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[Exposed=Window,Worker]
+interface &lt;dfn id=imagebitmap&gt;ImageBitmap&lt;/dfn&gt; {
   readonly attribute unsigned long &lt;a href=#dom-imagebitmap-width title=dom-ImageBitmap-width&gt;width&lt;/a&gt;;
   readonly attribute unsigned long &lt;a href=#dom-imagebitmap-height title=dom-ImageBitmap-height&gt;height&lt;/a&gt;;
 };
@@ -74997,7 +75001,7 @@
          &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; or
          &lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;) &lt;dfn id=imagebitmapsource&gt;ImageBitmapSource&lt;/dfn&gt;;
 
-[NoInterfaceObject]
+[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=imagebitmapfactories&gt;ImageBitmapFactories&lt;/dfn&gt; {
   &lt;a href=#promise&gt;Promise&lt;/a&gt; &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#imagebitmapsource&gt;ImageBitmapSource&lt;/a&gt; image, optional long sx, long sy, long sw, long sh);
 };
@@ -78681,13 +78685,14 @@
   &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; interface for their &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;
   events:&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#messageeventinit&gt;MessageEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#messageeventinit&gt;MessageEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=messageevent&gt;MessageEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute any &lt;a href=#dom-messageevent-data title=dom-MessageEvent-data&gt;data&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-messageevent-origin title=dom-MessageEvent-origin&gt;origin&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-messageevent-lasteventid title=dom-MessageEvent-lastEventId&gt;lastEventId&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-messageevent-channel title=dom-MessageEvent-channel&gt;channel&lt;/a&gt;;
-  readonly attribute (&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; or &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;)? &lt;a href=#dom-messageevent-source title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
+  [Exposed=Window] readonly attribute (&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; or &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;)? &lt;a href=#dom-messageevent-source title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
+  [Exposed=Worker] readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;? &lt;a href=#dom-messageevent-source title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt;[]? &lt;a href=#dom-messageevent-ports title=dom-MessageEvent-ports&gt;ports&lt;/a&gt;;
 };
 
@@ -78859,7 +78864,7 @@
 
   &lt;h4 id=the-eventsource-interface&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-eventsource title=dom-EventSource&gt;Constructor&lt;/a&gt;(DOMString url, optional &lt;a href=#eventsourceinit&gt;EventSourceInit&lt;/a&gt; eventSourceInitDict)]
+  &lt;pre class=idl&gt;[&lt;a href=#dom-eventsource title=dom-EventSource&gt;Constructor&lt;/a&gt;(DOMString url, optional &lt;a href=#eventsourceinit&gt;EventSourceInit&lt;/a&gt; eventSourceInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=eventsource&gt;EventSource&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-eventsource-url title=dom-EventSource-url&gt;url&lt;/a&gt;;
   readonly attribute boolean &lt;a href=#dom-eventsource-withcredentials title=dom-EventSource-withCredentials&gt;withCredentials&lt;/a&gt;;
@@ -79634,7 +79639,7 @@
   &lt;h4 id=the-websocket-interface&gt;&lt;span class=secno&gt;9.3.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;pre class=idl&gt;enum &lt;dfn id=binarytype&gt;BinaryType&lt;/dfn&gt; { &quot;&lt;span title=dom-BinaryType-blob&gt;blob&lt;/span&gt;&quot;, &quot;&lt;span title=dom-BinaryType-arraybuffer&gt;arraybuffer&lt;/span&gt;&quot; };
-[&lt;a href=#dom-websocket title=dom-WebSocket&gt;Constructor&lt;/a&gt;(DOMString url, optional (DOMString or DOMString[]) protocols)]
+[&lt;a href=#dom-websocket title=dom-WebSocket&gt;Constructor&lt;/a&gt;(DOMString url, optional (DOMString or DOMString[]) protocols), Exposed=Window,Worker]
 interface &lt;dfn id=websocket&gt;WebSocket&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-websocket-url title=dom-WebSocket-url&gt;url&lt;/a&gt;;
 
@@ -80247,7 +80252,7 @@
 
   &lt;/ol&gt;&lt;h4 id=the-closeevent-interfaces&gt;&lt;span class=secno&gt;9.3.6 &lt;/span&gt;The &lt;code&gt;&lt;a href=#closeevent&gt;CloseEvent&lt;/a&gt;&lt;/code&gt; interfaces&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#closeeventinit&gt;CloseEventInit&lt;/a&gt; eventInitDict)]
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#closeeventinit&gt;CloseEventInit&lt;/a&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn id=closeevent&gt;CloseEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
   readonly attribute boolean &lt;a href=#dom-closeevent-wasclean title=dom-CloseEvent-wasClean&gt;wasClean&lt;/a&gt;;
   readonly attribute unsigned short &lt;a href=#dom-closeevent-code title=dom-CloseEvent-code&gt;code&lt;/a&gt;;
@@ -80750,7 +80755,7 @@
 
   &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;9.5.2 &lt;/span&gt;Message channels&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-messagechannel title=dom-MessageChannel&gt;Constructor&lt;/a&gt;]
+  &lt;pre class=idl&gt;[&lt;a href=#dom-messagechannel title=dom-MessageChannel&gt;Constructor&lt;/a&gt;, Exposed=Window,Worker]
 interface &lt;dfn id=messagechannel&gt;MessageChannel&lt;/dfn&gt; {
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-channel-port1 title=dom-channel-port1&gt;port1&lt;/a&gt;;
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-channel-port2 title=dom-channel-port2&gt;port2&lt;/a&gt;;
@@ -80815,7 +80820,8 @@
   &lt;p&gt;Each channel has two message ports. Data sent through one port is received by the other port,
   and vice versa.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=messageport&gt;MessagePort&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  &lt;pre class=idl&gt;[Exposed=Window,Worker]
+interface &lt;dfn id=messageport&gt;MessagePort&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   void &lt;a href=#dom-messageport-postmessage title=dom-MessagePort-postMessage&gt;postMessage&lt;/a&gt;(any message, optional sequence&lt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&gt; transfer);&lt;!--
   &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-MessagePort-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
   void &lt;a href=#dom-messageport-start title=dom-MessagePort-start&gt;start&lt;/a&gt;();
@@ -80867,8 +80873,9 @@
   initially be false, and an &lt;dfn id=concept-port-owner title=concept-port-owner&gt;owner&lt;/dfn&gt;, which is a &lt;a href=#settings-object&gt;settings
   object&lt;/a&gt; set when the object is created, as described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a port's &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; is enabled, the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must use
-  it as one of its &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt;. All &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; on the &lt;a href=#port-message-queue&gt;port
+  it as one of its &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt;. When a port's &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; specifies a &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt; that is a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, all &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; on its &lt;a href=#port-message-queue&gt;port
   message queue&lt;/a&gt; must be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by
   the port's &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/p&gt;
 
@@ -80942,15 +80949,19 @@
 
    &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag to true.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;Move all the &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; that are to fire &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events in the &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;original port&lt;/var&gt; to the &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;new
    port&lt;/var&gt;, if any, leaving the &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt;
-   in its initial disabled state, and reassociating the moved &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/li&gt;
+   in its initial disabled state, and, if the &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   specifies a &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt; that is a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, associating the moved &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;original port&lt;/var&gt; is &lt;a href=#related-to-an-ill-fated-port&gt;related to an ill-fated port&lt;/a&gt;, then
    create a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that &lt;a href=#fire-a-simple-event title=&quot;fire a simple event&quot;&gt;fires a
    simple event&lt;/a&gt; named &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the &lt;var title=&quot;&quot;&gt;new
    port&lt;/var&gt;, and add the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; to the &lt;a href=#port-message-queue&gt;port message
-   queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;. The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must
+   queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;. If the &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   specifies a &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt; that is a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must
    be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;new
    port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/li&gt;
 
@@ -81191,9 +81202,11 @@
    &lt;li&gt;&lt;p&gt;Mark &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt; as being a &lt;dfn id=related-to-an-ill-fated-port&gt;related to an ill-fated
    port&lt;/dfn&gt;.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;Create a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that &lt;a href=#fire-a-simple-event title=&quot;fire a simple
    event&quot;&gt;fires a simple event&lt;/a&gt; named &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, and add the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; to the
-   &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;. The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;
+   &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;. If the &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   specifies a &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt; that is a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; must be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;
    specified by &lt;var title=&quot;&quot;&gt;source port&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Disentangle the two ports.&lt;/li&gt;
@@ -81234,7 +81247,8 @@
   they stop being relevant, while still allowing scripts to iterate over the
   &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-portcollection title=dom-PortCollection&gt;Constructor&lt;/a&gt;] interface &lt;dfn id=portcollection&gt;PortCollection&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[&lt;a href=#dom-portcollection title=dom-PortCollection&gt;Constructor&lt;/a&gt;, Exposed=Window,Worker]
+interface &lt;dfn id=portcollection&gt;PortCollection&lt;/dfn&gt; {
   void &lt;a href=#dom-portcollection-add title=dom-PortCollection-add&gt;add&lt;/a&gt;(&lt;a href=#messageport&gt;MessagePort&lt;/a&gt; port);
   void &lt;a href=#dom-portcollection-remove title=dom-PortCollection-remove&gt;remove&lt;/a&gt;(&lt;a href=#messageport&gt;MessagePort&lt;/a&gt; port);
   void &lt;a href=#dom-portcollection-clear title=dom-PortCollection-clear&gt;clear&lt;/a&gt;();
@@ -81382,7 +81396,8 @@
   &lt;p&gt;For simple cases, though, where a shared worker would be an unreasonable overhead, authors can
   use the simple channel-based broadcast mechanism described in this section.&lt;/p&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-broadcastchannel title=dom-BroadcastChannel&gt;Constructor&lt;/a&gt;(DOMString channel)] interface &lt;dfn id=broadcastchannel&gt;BroadcastChannel&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;[&lt;a href=#dom-broadcastchannel title=dom-BroadcastChannel&gt;Constructor&lt;/a&gt;(DOMString channel)]
+interface &lt;dfn id=broadcastchannel&gt;BroadcastChannel&lt;/dfn&gt; {
   void &lt;a href=#dom-broadcastchannel-postmessage title=dom-BroadcastChannel-postMessage&gt;postMessage&lt;/a&gt;(DOMString message);
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-broadcastchannel-onmessage title=handler-BroadcastChannel-onmessage&gt;onmessage&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -82580,7 +82595,8 @@
 
   &lt;h5 id=the-workerglobalscope-common-interface&gt;&lt;span class=secno&gt;10.2.1.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; common interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=workerglobalscope&gt;WorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
+  &lt;pre class=idl&gt;[Exposed=Worker] &lt;!-- not sure we really need that, but... --&gt;
+interface &lt;dfn id=workerglobalscope&gt;WorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; &lt;a href=#dom-workerglobalscope-self title=dom-WorkerGlobalScope-self&gt;self&lt;/a&gt;;
   readonly attribute &lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt; &lt;a href=#dom-workerglobalscope-location title=dom-WorkerGlobalScope-location&gt;location&lt;/a&gt;;
 
@@ -82627,7 +82643,7 @@
 
   &lt;h5 id=dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;10.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Global]
+  &lt;pre class=idl&gt;[Global=Worker,DedicatedWorker]
 /*sealed*/ interface &lt;dfn id=dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; {
   void &lt;a href=#dom-dedicatedworkerglobalscope-postmessage title=dom-DedicatedWorkerGlobalScope-postMessage&gt;postMessage&lt;/a&gt;(any message, optional sequence&lt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&gt; transfer);&lt;!--
   &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-DedicatedWorkerGlobalScope-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
@@ -82673,7 +82689,7 @@
 
   &lt;h5 id=shared-workers-and-the-sharedworkerglobalscope-interface&gt;&lt;span class=secno&gt;10.2.1.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[Global]
+  &lt;pre class=idl&gt;[Global=Worker,SharedWorker]
 /*sealed*/ interface &lt;dfn id=sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; {
   readonly attribute DOMString &lt;a href=#dom-sharedworkerglobalscope-name title=dom-SharedWorkerGlobalScope-name&gt;name&lt;/a&gt;;
   readonly attribute &lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt; &lt;a href=#dom-sharedworkerglobalscope-applicationcache title=dom-SharedWorkerGlobalScope-applicationCache&gt;applicationCache&lt;/a&gt;;
@@ -83007,7 +83023,7 @@
 
   &lt;h5 id=the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;10.2.6.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt;&lt;/code&gt; abstract interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[NoInterfaceObject]
+  &lt;pre class=idl&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn id=abstractworker&gt;AbstractWorker&lt;/dfn&gt; {
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-abstractworker-onerror title=handler-AbstractWorker-onerror&gt;onerror&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -83119,7 +83135,7 @@
 
   &lt;/ol&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL)]
+  &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL), Exposed=Window,Worker]
 interface &lt;dfn id=worker&gt;Worker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   void &lt;a href=#dom-worker-terminate title=dom-Worker-terminate&gt;terminate&lt;/a&gt;();
 
@@ -83245,7 +83261,7 @@
 
   &lt;/ol&gt;&lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.4 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name)]
+  &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name), Exposed=Window,Worker]
 interface &lt;dfn id=sharedworker&gt;SharedWorker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-sharedworker-port title=dom-SharedWorker-port&gt;port&lt;/a&gt;;
 };
@@ -83448,7 +83464,8 @@
 
   &lt;h3 id=apis-available-to-workers&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;APIs available to workers&lt;/h3&gt;
 
-  &lt;pre class=idl&gt;partial interface &lt;a href=#workerglobalscope id=WorkerGlobalScope-partial&gt;WorkerGlobalScope&lt;/a&gt; {&lt;!-- not obsolete --&gt;
+  &lt;pre class=idl&gt;[Exposed=Worker]
+partial interface &lt;a href=#workerglobalscope id=WorkerGlobalScope-partial&gt;WorkerGlobalScope&lt;/a&gt; {&lt;!-- not obsolete --&gt;
   void &lt;a href=#dom-workerglobalscope-importscripts title=dom-WorkerGlobalScope-importScripts&gt;importScripts&lt;/a&gt;(DOMString... urls);
   readonly attribute &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; &lt;a href=#dom-worker-navigator title=dom-worker-navigator&gt;navigator&lt;/a&gt;;
 };
@@ -83538,7 +83555,8 @@
   the &lt;code&gt;&lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt;&lt;/code&gt; interface, which represents the
   identity and state of the user agent (the client):&lt;/p&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=workernavigator&gt;WorkerNavigator&lt;/dfn&gt; {};
+  &lt;pre class=idl&gt;[Exposed=Worker]
+interface &lt;dfn id=workernavigator&gt;WorkerNavigator&lt;/dfn&gt; {};
 &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; implements &lt;a href=#navigatorid&gt;NavigatorID&lt;/a&gt;;
 &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; implements &lt;a href=#navigatorlanguage&gt;NavigatorLanguage&lt;/a&gt;;
 &lt;a href=#workernavigator&gt;WorkerNavigator&lt;/a&gt; implements &lt;a href=#navigatoronline&gt;NavigatorOnLine&lt;/a&gt;;&lt;/pre&gt;
@@ -83569,7 +83587,8 @@
 
   &lt;h4 id=worker-locations&gt;&lt;span class=secno&gt;10.3.4 &lt;/span&gt;Worker locations&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=workerlocation&gt;WorkerLocation&lt;/dfn&gt; { };
+  &lt;pre class=idl&gt;[Exposed=Worker]
+interface &lt;dfn id=workerlocation&gt;WorkerLocation&lt;/dfn&gt; { };
 &lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt; implements &lt;a href=#urlutilsreadonly&gt;URLUtilsReadOnly&lt;/a&gt;;&lt;/pre&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#workerlocation&gt;WorkerLocation&lt;/a&gt;&lt;/code&gt; object represents an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; set at its

Modified: source
===================================================================
--- source	2014-01-27 20:20:38 UTC (rev 8424)
+++ source	2014-01-27 23:08:49 UTC (rev 8425)
@@ -7573,7 +7573,7 @@
   algorithms, one for getting the list of name-value pairs, one for setting names to certain values,
   and one for deleting names.&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[OverrideBuiltins]
+  &lt;pre class=&quot;idl&quot;&gt;[OverrideBuiltins,Exposed=Window,Worker]
 interface &lt;dfn&gt;DOMStringMap&lt;/dfn&gt; {
   &lt;span data-x=&quot;dom-DOMStringMap-namedItem&quot;&gt;getter&lt;/span&gt; DOMString (DOMString name);
   &lt;span data-x=&quot;dom-DOMStringMap-setItem&quot;&gt;setter&lt;/span&gt; &lt;span data-x=&quot;dom-DOMStringMap-addItem&quot;&gt;creator&lt;/span&gt; void (DOMString name, DOMString value);
@@ -59736,7 +59736,8 @@
   &lt;p&gt;Since DOM nodes cannot be accessed across worker boundaries, a proxy object is needed to enable
   workers to render to &lt;code&gt;canvas&lt;/code&gt; elements in &lt;code&gt;Document&lt;/code&gt;s.&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;CanvasProxy&lt;/dfn&gt; {
+  &lt;pre class=&quot;idl&quot;&gt;[Exposed=Window,Worker]
+interface &lt;dfn&gt;CanvasProxy&lt;/dfn&gt; {
   void &lt;span data-x=&quot;dom-CanvasProxy-setContext&quot;&gt;setContext&lt;/span&gt;(&lt;span&gt;RenderingContext&lt;/span&gt; context);
 };
 // &lt;span&gt;CanvasProxy&lt;/span&gt; implements &lt;span&gt;Transferable&lt;/span&gt;;&lt;/pre&gt;
@@ -59886,7 +59887,7 @@
 
 enum &lt;dfn&gt;CanvasFillRule&lt;/dfn&gt; { &quot;&lt;span data-x=&quot;dom-context-2d-fillRule-nonzero&quot;&gt;nonzero&lt;/span&gt;&quot;, &quot;&lt;span data-x=&quot;dom-context-2d-fillRule-evenodd&quot;&gt;evenodd&lt;/span&gt;&quot; };
 
-[&lt;span data-x=&quot;dom-context-2d&quot;&gt;Constructor&lt;/span&gt;(optional unsigned long width, unsigned long height)]
+[&lt;span data-x=&quot;dom-context-2d&quot;&gt;Constructor&lt;/span&gt;(optional unsigned long width, unsigned long height), Exposed=Window,Worker]
 interface &lt;dfn&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
 
   // back-reference to the canvas
@@ -72266,7 +72267,7 @@
 &lt;!--TOPIC:DOM APIs--&gt;
   &lt;h3&gt;The &lt;code&gt;Window&lt;/code&gt; object&lt;/h3&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Global]
+  &lt;pre class=&quot;idl&quot;&gt;[PrimaryGlobal]
 /*sealed*/ interface &lt;dfn&gt;Window&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
   // the current browsing context
   [Unforgeable] readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span data-x=&quot;dom-window&quot;&gt;window&lt;/span&gt;;
@@ -73033,8 +73034,7 @@
 
 &lt;!--END complete--&gt;&lt;!--END dev-html--&gt;
 &lt;!-- this is for the purposes of the IDL validator --&gt;
-&lt;pre class=&quot;idl&quot;&gt;
-[NoInterfaceObject]
+&lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
 interface &lt;span&gt;WindowProxy&lt;/span&gt; : &lt;span&gt;Window&lt;/span&gt; {};
 &lt;/pre&gt;
 &lt;!--START complete--&gt;&lt;!--START dev-html--&gt;
@@ -76259,7 +76259,7 @@
 
   &lt;h5&gt;The &lt;code&gt;PopStateEvent&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;PopStateEventInit&lt;/span&gt; eventInitDict)]
+  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;PopStateEventInit&lt;/span&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn&gt;PopStateEvent&lt;/dfn&gt; : &lt;span&gt;Event&lt;/span&gt; {
   readonly attribute any &lt;span data-x=&quot;dom-PopStateEvent-state&quot;&gt;state&lt;/span&gt;;
 };
@@ -76294,7 +76294,7 @@
 
   &lt;h5&gt;The &lt;code&gt;HashChangeEvent&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;HashChangeEventInit&lt;/span&gt; eventInitDict)]
+  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;HashChangeEventInit&lt;/span&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn&gt;HashChangeEvent&lt;/dfn&gt; : &lt;span&gt;Event&lt;/span&gt; {
   readonly attribute DOMString &lt;span data-x=&quot;dom-HashChangeEvent-oldURL&quot;&gt;oldURL&lt;/span&gt;;
   readonly attribute DOMString &lt;span data-x=&quot;dom-HashChangeEvent-newURL&quot;&gt;newURL&lt;/span&gt;;
@@ -76345,7 +76345,7 @@
 
   &lt;h5&gt;The &lt;code&gt;PageTransitionEvent&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;PageTransitionEventInit&lt;/span&gt; eventInitDict)]
+  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;PageTransitionEventInit&lt;/span&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn&gt;PageTransitionEvent&lt;/dfn&gt; : &lt;span&gt;Event&lt;/span&gt; {
   readonly attribute boolean &lt;span data-x=&quot;dom-PageTransitionEvent-persisted&quot;&gt;persisted&lt;/span&gt;;
 };
@@ -78666,7 +78666,8 @@
 
   &lt;h4&gt;Application cache API&lt;/h4&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;ApplicationCache&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
+  &lt;pre class=&quot;idl&quot;&gt;[Exposed=Window,SharedWorker]
+interface &lt;dfn&gt;ApplicationCache&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
 
   // &lt;span data-x=&quot;concept-appcache-status&quot;&gt;update status&lt;/span&gt;
   const unsigned short &lt;span data-x=&quot;dom-appcache-UNCACHED&quot;&gt;UNCACHED&lt;/span&gt; = 0;
@@ -78916,7 +78917,7 @@
 
   &lt;h4&gt;Browser state&lt;/h4&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
+  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn&gt;NavigatorOnLine&lt;/dfn&gt; {
   readonly attribute boolean &lt;span data-x=&quot;dom-navigator-onLine&quot;&gt;onLine&lt;/span&gt;;
 };&lt;/pre&gt;
@@ -79641,7 +79642,7 @@
 
   &lt;h6&gt;The &lt;code&gt;ErrorEvent&lt;/code&gt; interface&lt;/h6&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;ErrorEventInit&lt;/span&gt; eventInitDict)]
+  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;ErrorEventInit&lt;/span&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn&gt;ErrorEvent&lt;/dfn&gt; : &lt;span&gt;Event&lt;/span&gt; {
   readonly attribute DOMString &lt;span data-x=&quot;dom-ErrorEvent-message&quot;&gt;message&lt;/span&gt;;
   readonly attribute DOMString &lt;span data-x=&quot;dom-ErrorEvent-filename&quot;&gt;filename&lt;/span&gt;;
@@ -80868,7 +80869,7 @@
 
   &lt;!-- v2: actual binary support --&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
+  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn&gt;WindowBase64&lt;/dfn&gt; {
   DOMString &lt;span data-x=&quot;dom-windowbase64-btoa&quot;&gt;btoa&lt;/span&gt;(DOMString btoa);
   DOMString &lt;span data-x=&quot;dom-windowbase64-atob&quot;&gt;atob&lt;/span&gt;(DOMString atob);
@@ -81576,7 +81577,7 @@
   and &lt;code data-x=&quot;dom-windowtimers-setInterval&quot;&gt;setInterval()&lt;/code&gt;
   methods allow authors to schedule timer-based callbacks.&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
+  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn&gt;WindowTimers&lt;/dfn&gt; {
   long &lt;span data-x=&quot;dom-windowtimers-setTimeout&quot;&gt;setTimeout&lt;/span&gt;(&lt;span&gt;Function&lt;/span&gt; handler, optional long timeout, any... arguments);
   long &lt;span data-x=&quot;dom-windowtimers-setTimeout&quot;&gt;setTimeout&lt;/span&gt;(DOMString handler, optional long timeout, any... arguments);
@@ -82334,7 +82335,8 @@
 
   &lt;/div&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject] interface &lt;dfn&gt;WindowModal&lt;/dfn&gt; {
+  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
+interface &lt;dfn&gt;WindowModal&lt;/dfn&gt; {
   readonly attribute any &lt;span data-x=&quot;dom-WindowModal-dialogArguments&quot;&gt;dialogArguments&lt;/span&gt;;
            attribute any &lt;span data-x=&quot;dom-WindowModal-returnValue&quot;&gt;returnValue&lt;/span&gt;;
 };&lt;/pre&gt;
@@ -82433,7 +82435,7 @@
 
   &lt;h5&gt;Client identification&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
+  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn&gt;NavigatorID&lt;/dfn&gt; {
   readonly attribute DOMString &lt;span data-x=&quot;dom-navigator-appCodeName&quot;&gt;appCodeName&lt;/span&gt;; // constant &quot;Mozilla&quot;
   readonly attribute DOMString &lt;span data-x=&quot;dom-navigator-appName&quot;&gt;appName&lt;/span&gt;;
@@ -82553,7 +82555,7 @@
 
   &lt;h5&gt;Language preferences&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
+  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn&gt;NavigatorLanguage&lt;/dfn&gt; {
   readonly attribute DOMString? &lt;span data-x=&quot;dom-navigator-language&quot;&gt;language&lt;/span&gt;;
 };&lt;/pre&gt;
@@ -83861,7 +83863,8 @@
 
   &lt;h3&gt;Images&lt;/h3&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;ImageBitmap&lt;/dfn&gt; {
+  &lt;pre class=&quot;idl&quot;&gt;[Exposed=Window,Worker]
+interface &lt;dfn&gt;ImageBitmap&lt;/dfn&gt; {
   readonly attribute unsigned long &lt;span data-x=&quot;dom-ImageBitmap-width&quot;&gt;width&lt;/span&gt;;
   readonly attribute unsigned long &lt;span data-x=&quot;dom-ImageBitmap-height&quot;&gt;height&lt;/span&gt;;
 };
@@ -83874,7 +83877,7 @@
          &lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; or
          &lt;span&gt;ImageBitmap&lt;/span&gt;) &lt;dfn&gt;ImageBitmapSource&lt;/dfn&gt;;
 
-[NoInterfaceObject]
+[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn&gt;ImageBitmapFactories&lt;/dfn&gt; {
   &lt;span&gt;Promise&lt;/span&gt; &lt;span data-x=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;ImageBitmapSource&lt;/span&gt; image, optional long sx, long sy, long sw, long sh);
 };
@@ -88169,13 +88172,14 @@
   &lt;code&gt;MessageEvent&lt;/code&gt; interface for their &lt;code data-x=&quot;event-message&quot;&gt;message&lt;/code&gt;
   events:&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;MessageEventInit&lt;/span&gt; eventInitDict)]
+  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;MessageEventInit&lt;/span&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn&gt;MessageEvent&lt;/dfn&gt; : &lt;span&gt;Event&lt;/span&gt; {
   readonly attribute any &lt;span data-x=&quot;dom-MessageEvent-data&quot;&gt;data&lt;/span&gt;;
   readonly attribute DOMString &lt;span data-x=&quot;dom-MessageEvent-origin&quot;&gt;origin&lt;/span&gt;;
   readonly attribute DOMString &lt;span data-x=&quot;dom-MessageEvent-lastEventId&quot;&gt;lastEventId&lt;/span&gt;;
   readonly attribute DOMString &lt;span data-x=&quot;dom-MessageEvent-channel&quot;&gt;channel&lt;/span&gt;;
-  readonly attribute (&lt;span&gt;WindowProxy&lt;/span&gt; or &lt;span&gt;MessagePort&lt;/span&gt;)? &lt;span data-x=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/span&gt;;
+  [Exposed=Window] readonly attribute (&lt;span&gt;WindowProxy&lt;/span&gt; or &lt;span&gt;MessagePort&lt;/span&gt;)? &lt;span data-x=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/span&gt;;
+  [Exposed=Worker] readonly attribute &lt;span&gt;MessagePort&lt;/span&gt;? &lt;span data-x=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/span&gt;;
   readonly attribute &lt;span&gt;MessagePort&lt;/span&gt;[]? &lt;span data-x=&quot;dom-MessageEvent-ports&quot;&gt;ports&lt;/span&gt;;
 };
 
@@ -88361,7 +88365,7 @@
 
   &lt;h4&gt;The &lt;code&gt;EventSource&lt;/code&gt; interface&lt;/h4&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-EventSource&quot;&gt;Constructor&lt;/span&gt;(DOMString url, optional &lt;span&gt;EventSourceInit&lt;/span&gt; eventSourceInitDict)]
+  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-EventSource&quot;&gt;Constructor&lt;/span&gt;(DOMString url, optional &lt;span&gt;EventSourceInit&lt;/span&gt; eventSourceInitDict), Exposed=Window,Worker]
 interface &lt;dfn&gt;EventSource&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
   readonly attribute DOMString &lt;span data-x=&quot;dom-EventSource-url&quot;&gt;url&lt;/span&gt;;
   readonly attribute boolean &lt;span data-x=&quot;dom-EventSource-withCredentials&quot;&gt;withCredentials&lt;/span&gt;;
@@ -89249,7 +89253,7 @@
   &lt;h4&gt;The &lt;code&gt;WebSocket&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;pre class=&quot;idl&quot;&gt;enum &lt;dfn&gt;BinaryType&lt;/dfn&gt; { &quot;&lt;span data-x=&quot;dom-BinaryType-blob&quot;&gt;blob&lt;/span&gt;&quot;, &quot;&lt;span data-x=&quot;dom-BinaryType-arraybuffer&quot;&gt;arraybuffer&lt;/span&gt;&quot; };
-[&lt;span data-x=&quot;dom-WebSocket&quot;&gt;Constructor&lt;/span&gt;(DOMString url, optional (DOMString or DOMString[]) protocols)]
+[&lt;span data-x=&quot;dom-WebSocket&quot;&gt;Constructor&lt;/span&gt;(DOMString url, optional (DOMString or DOMString[]) protocols), Exposed=Window,Worker]
 interface &lt;dfn&gt;WebSocket&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
   readonly attribute DOMString &lt;span data-x=&quot;dom-WebSocket-url&quot;&gt;url&lt;/span&gt;;
 
@@ -90003,7 +90007,7 @@
 
   &lt;h4&gt;The &lt;code&gt;CloseEvent&lt;/code&gt; interfaces&lt;/h4&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;CloseEventInit&lt;/span&gt; eventInitDict)]
+  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;CloseEventInit&lt;/span&gt; eventInitDict), Exposed=Window,Worker]
 interface &lt;dfn&gt;CloseEvent&lt;/dfn&gt; : &lt;span&gt;Event&lt;/span&gt; {
   readonly attribute boolean &lt;span data-x=&quot;dom-CloseEvent-wasClean&quot;&gt;wasClean&lt;/span&gt;;
   readonly attribute unsigned short &lt;span data-x=&quot;dom-CloseEvent-code&quot;&gt;code&lt;/span&gt;;
@@ -90569,7 +90573,7 @@
 
   &lt;h4&gt;Message channels&lt;/h4&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-MessageChannel&quot;&gt;Constructor&lt;/span&gt;]
+  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-MessageChannel&quot;&gt;Constructor&lt;/span&gt;, Exposed=Window,Worker]
 interface &lt;dfn&gt;MessageChannel&lt;/dfn&gt; {
   readonly attribute &lt;span&gt;MessagePort&lt;/span&gt; &lt;span data-x=&quot;dom-channel-port1&quot;&gt;port1&lt;/span&gt;;
   readonly attribute &lt;span&gt;MessagePort&lt;/span&gt; &lt;span data-x=&quot;dom-channel-port2&quot;&gt;port2&lt;/span&gt;;
@@ -90647,7 +90651,8 @@
   &lt;p&gt;Each channel has two message ports. Data sent through one port is received by the other port,
   and vice versa.&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;MessagePort&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
+  &lt;pre class=&quot;idl&quot;&gt;[Exposed=Window,Worker]
+interface &lt;dfn&gt;MessagePort&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
   void &lt;span data-x=&quot;dom-MessagePort-postMessage&quot;&gt;postMessage&lt;/span&gt;(any message, optional sequence&lt;&lt;span&gt;Transferable&lt;/span&gt;&gt; transfer);&lt;!--
   &lt;span&gt;MessagePort&lt;/span&gt; &lt;span data-x=&quot;dom-MessagePort-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
   void &lt;span data-x=&quot;dom-MessagePort-start&quot;&gt;start&lt;/span&gt;();
@@ -90703,9 +90708,10 @@
   initially be false, and an &lt;dfn data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/dfn&gt;, which is a &lt;span&gt;settings
   object&lt;/span&gt; set when the object is created, as described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a port's &lt;span&gt;port message queue&lt;/span&gt; is enabled, the &lt;span&gt;event loop&lt;/span&gt; must use
-  it as one of its &lt;span data-x=&quot;task source&quot;&gt;task sources&lt;/span&gt;. All &lt;span
-  data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; &lt;span data-x=&quot;queue a task&quot;&gt;queued&lt;/span&gt; on the &lt;span&gt;port
+  it as one of its &lt;span data-x=&quot;task source&quot;&gt;task sources&lt;/span&gt;. When a port's &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; specifies a &lt;span&gt;responsible event loop&lt;/span&gt; that is a &lt;span&gt;browsing context&lt;/span&gt; &lt;span&gt;event loop&lt;/span&gt;, all &lt;span
+  data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; &lt;span data-x=&quot;queue a task&quot;&gt;queued&lt;/span&gt; on its &lt;span&gt;port
   message queue&lt;/span&gt; must be associated with the &lt;span&gt;responsible document&lt;/span&gt; specified by
   the port's &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;.&lt;/p&gt;
 
@@ -90789,19 +90795,23 @@
 
    &lt;li&gt;&lt;p&gt;Set &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;span&gt;has been shipped&lt;/span&gt; flag to true.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;Move all the &lt;span data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; that are to fire &lt;code
    data-x=&quot;event-message&quot;&gt;message&lt;/code&gt; events in the &lt;span&gt;port message queue&lt;/span&gt; of &lt;var
    data-x=&quot;&quot;&gt;original port&lt;/var&gt; to the &lt;span&gt;port message queue&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;new
    port&lt;/var&gt;, if any, leaving the &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;span&gt;port message queue&lt;/span&gt;
-   in its initial disabled state, and reassociating the moved &lt;span
+   in its initial disabled state, and, if the &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+   specifies a &lt;span&gt;responsible event loop&lt;/span&gt; that is a &lt;span&gt;browsing context&lt;/span&gt; &lt;span&gt;event loop&lt;/span&gt;, associating the moved &lt;span
    data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; with the &lt;span&gt;responsible document&lt;/span&gt; specified by &lt;var
    data-x=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;original port&lt;/var&gt; is &lt;span&gt;related to an ill-fated port&lt;/span&gt;, then
    create a &lt;span data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; that &lt;span data-x=&quot;fire a simple event&quot;&gt;fires a
    simple event&lt;/span&gt; named &lt;code data-x=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;var data-x=&quot;&quot;&gt;new
    port&lt;/var&gt;, and add the &lt;span data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; to the &lt;span&gt;port message
-   queue&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt;. The &lt;span data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; must
+   queue&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt;. If the &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+   specifies a &lt;span&gt;responsible event loop&lt;/span&gt; that is a &lt;span&gt;browsing context&lt;/span&gt; &lt;span&gt;event loop&lt;/span&gt;, the &lt;span data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; must
    be associated with the &lt;span&gt;responsible document&lt;/span&gt; specified by &lt;var data-x=&quot;&quot;&gt;new
    port&lt;/var&gt;'s &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
@@ -91084,10 +91094,12 @@
    &lt;li&gt;&lt;p&gt;Mark &lt;var data-x=&quot;&quot;&gt;target port&lt;/var&gt; as being a &lt;dfn&gt;related to an ill-fated
    port&lt;/dfn&gt;.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;Create a &lt;span data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; that &lt;span data-x=&quot;fire a simple
    event&quot;&gt;fires a simple event&lt;/span&gt; named &lt;code data-x=&quot;event-error&quot;&gt;error&lt;/code&gt; at &lt;var
    data-x=&quot;&quot;&gt;target port&lt;/var&gt;, and add the &lt;span data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; to the
-   &lt;span&gt;port message queue&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;target port&lt;/var&gt;. The &lt;span
+   &lt;span&gt;port message queue&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;target port&lt;/var&gt;. If the &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+   specifies a &lt;span&gt;responsible event loop&lt;/span&gt; that is a &lt;span&gt;browsing context&lt;/span&gt; &lt;span&gt;event loop&lt;/span&gt;, the &lt;span
    data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; must be associated with the &lt;span&gt;responsible document&lt;/span&gt;
    specified by &lt;var data-x=&quot;&quot;&gt;source port&lt;/var&gt;'s &lt;span
    data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -91141,7 +91153,8 @@
   they stop being relevant, while still allowing scripts to iterate over the
   &lt;code&gt;MessagePort&lt;/code&gt; objects.&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-PortCollection&quot;&gt;Constructor&lt;/span&gt;] interface &lt;dfn&gt;PortCollection&lt;/dfn&gt; {
+  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-PortCollection&quot;&gt;Constructor&lt;/span&gt;, Exposed=Window,Worker]
+interface &lt;dfn&gt;PortCollection&lt;/dfn&gt; {
   void &lt;span data-x=&quot;dom-PortCollection-add&quot;&gt;add&lt;/span&gt;(&lt;span&gt;MessagePort&lt;/span&gt; port);
   void &lt;span data-x=&quot;dom-PortCollection-remove&quot;&gt;remove&lt;/span&gt;(&lt;span&gt;MessagePort&lt;/span&gt; port);
   void &lt;span data-x=&quot;dom-PortCollection-clear&quot;&gt;clear&lt;/span&gt;();
@@ -91300,7 +91313,8 @@
   &lt;p&gt;For simple cases, though, where a shared worker would be an unreasonable overhead, authors can
   use the simple channel-based broadcast mechanism described in this section.&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-BroadcastChannel&quot;&gt;Constructor&lt;/span&gt;(DOMString channel)] interface &lt;dfn&gt;BroadcastChannel&lt;/dfn&gt; {
+  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-BroadcastChannel&quot;&gt;Constructor&lt;/span&gt;(DOMString channel)]
+interface &lt;dfn&gt;BroadcastChannel&lt;/dfn&gt; {
   void &lt;span data-x=&quot;dom-BroadcastChannel-postMessage&quot;&gt;postMessage&lt;/span&gt;(DOMString message);
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span data-x=&quot;handler-BroadcastChannel-onmessage&quot;&gt;onmessage&lt;/span&gt;;
 };&lt;/pre&gt;
@@ -91914,7 +91928,8 @@
 
   &lt;h5&gt;The &lt;code&gt;WorkerGlobalScope&lt;/code&gt; common interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;WorkerGlobalScope&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
+  &lt;pre class=&quot;idl&quot;&gt;[Exposed=Worker] &lt;!-- not sure we really need that, but... --&gt;
+interface &lt;dfn&gt;WorkerGlobalScope&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
   readonly attribute &lt;span&gt;WorkerGlobalScope&lt;/span&gt; &lt;span data-x=&quot;dom-WorkerGlobalScope-self&quot;&gt;self&lt;/span&gt;;
   readonly attribute &lt;span&gt;WorkerLocation&lt;/span&gt; &lt;span data-x=&quot;dom-WorkerGlobalScope-location&quot;&gt;location&lt;/span&gt;;
 
@@ -91976,7 +91991,7 @@
 
   &lt;h5&gt;Dedicated workers and the &lt;code&gt;DedicatedWorkerGlobalScope&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Global]
+  &lt;pre class=&quot;idl&quot;&gt;[Global=Worker,DedicatedWorker]
 /*sealed*/ interface &lt;dfn&gt;DedicatedWorkerGlobalScope&lt;/dfn&gt; : &lt;span&gt;WorkerGlobalScope&lt;/span&gt; {
   void &lt;span data-x=&quot;dom-DedicatedWorkerGlobalScope-postMessage&quot;&gt;postMessage&lt;/span&gt;(any message, optional sequence&lt;&lt;span&gt;Transferable&lt;/span&gt;&gt; transfer);&lt;!--
   &lt;span&gt;MessagePort&lt;/span&gt; &lt;span data-x=&quot;dom-DedicatedWorkerGlobalScope-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
@@ -92027,7 +92042,7 @@
 
   &lt;h5&gt;Shared workers and the &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[Global]
+  &lt;pre class=&quot;idl&quot;&gt;[Global=Worker,SharedWorker]
 /*sealed*/ interface &lt;dfn&gt;SharedWorkerGlobalScope&lt;/dfn&gt; : &lt;span&gt;WorkerGlobalScope&lt;/span&gt; {
   readonly attribute DOMString &lt;span data-x=&quot;dom-SharedWorkerGlobalScope-name&quot;&gt;name&lt;/span&gt;;
   readonly attribute &lt;span&gt;ApplicationCache&lt;/span&gt; &lt;span data-x=&quot;dom-SharedWorkerGlobalScope-applicationCache&quot;&gt;applicationCache&lt;/span&gt;;
@@ -92416,7 +92431,7 @@
 
   &lt;h5&gt;The &lt;code&gt;AbstractWorker&lt;/code&gt; abstract interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject]
+  &lt;pre class=&quot;idl&quot;&gt;[NoInterfaceObject, Exposed=Window,Worker]
 interface &lt;dfn&gt;AbstractWorker&lt;/dfn&gt; {
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span data-x=&quot;handler-AbstractWorker-onerror&quot;&gt;onerror&lt;/span&gt;;
 };&lt;/pre&gt;
@@ -92543,7 +92558,7 @@
 
   &lt;h5&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-Worker&quot;&gt;Constructor&lt;/span&gt;(DOMString scriptURL)]
+  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-Worker&quot;&gt;Constructor&lt;/span&gt;(DOMString scriptURL), Exposed=Window,Worker]
 interface &lt;dfn&gt;Worker&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
   void &lt;span data-x=&quot;dom-Worker-terminate&quot;&gt;terminate&lt;/span&gt;();
 
@@ -92689,7 +92704,7 @@
 
   &lt;h5&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/h5&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-SharedWorker&quot;&gt;Constructor&lt;/span&gt;(DOMString scriptURL, optional DOMString name)]
+  &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-SharedWorker&quot;&gt;Constructor&lt;/span&gt;(DOMString scriptURL, optional DOMString name), Exposed=Window,Worker]
 interface &lt;dfn&gt;SharedWorker&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
   readonly attribute &lt;span&gt;MessagePort&lt;/span&gt; &lt;span data-x=&quot;dom-SharedWorker-port&quot;&gt;port&lt;/span&gt;;
 };
@@ -92930,7 +92945,8 @@
 
   &lt;h3&gt;APIs available to workers&lt;/h3&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;partial interface &lt;span id=&quot;WorkerGlobalScope-partial&quot;&gt;WorkerGlobalScope&lt;/span&gt; {&lt;!-- not obsolete --&gt;
+  &lt;pre class=&quot;idl&quot;&gt;[Exposed=Worker]
+partial interface &lt;span id=&quot;WorkerGlobalScope-partial&quot;&gt;WorkerGlobalScope&lt;/span&gt; {&lt;!-- not obsolete --&gt;
   void &lt;span data-x=&quot;dom-WorkerGlobalScope-importScripts&quot;&gt;importScripts&lt;/span&gt;(DOMString... urls);
   readonly attribute &lt;span&gt;WorkerNavigator&lt;/span&gt; &lt;span data-x=&quot;dom-worker-navigator&quot;&gt;navigator&lt;/span&gt;;
 };
@@ -93040,7 +93056,8 @@
   the &lt;code&gt;WorkerNavigator&lt;/code&gt; interface, which represents the
   identity and state of the user agent (the client):&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;WorkerNavigator&lt;/dfn&gt; {};
+  &lt;pre class=&quot;idl&quot;&gt;[Exposed=Worker]
+interface &lt;dfn&gt;WorkerNavigator&lt;/dfn&gt; {};
 &lt;span&gt;WorkerNavigator&lt;/span&gt; implements &lt;span&gt;NavigatorID&lt;/span&gt;;
 &lt;span&gt;WorkerNavigator&lt;/span&gt; implements &lt;span&gt;NavigatorLanguage&lt;/span&gt;;
 &lt;span&gt;WorkerNavigator&lt;/span&gt; implements &lt;span&gt;NavigatorOnLine&lt;/span&gt;;&lt;/pre&gt;
@@ -93076,7 +93093,8 @@
 
   &lt;h4&gt;Worker locations&lt;/h4&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;WorkerLocation&lt;/dfn&gt; { };
+  &lt;pre class=&quot;idl&quot;&gt;[Exposed=Worker]
+interface &lt;dfn&gt;WorkerLocation&lt;/dfn&gt; { };
 &lt;span&gt;WorkerLocation&lt;/span&gt; implements &lt;span&gt;URLUtilsReadOnly&lt;/span&gt;;&lt;/pre&gt;
 
   &lt;p&gt;A &lt;code&gt;WorkerLocation&lt;/code&gt; object represents an &lt;span&gt;absolute URL&lt;/span&gt; set at its


</PRE>
<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23042">[ date ]</a>
              <a href="thread.html#23042">[ thread ]</a>
              <a href="subject.html#23042">[ subject ]</a>
              <a href="author.html#23042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
