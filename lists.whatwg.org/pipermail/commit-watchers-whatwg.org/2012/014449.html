<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7589 - [giow] (0) Add a way to prepare sprites so you	don't have to keep extracting the [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7589%20-%20%5Bgiow%5D%20%280%29%20Add%20a%20way%20to%20prepare%20sprites%20so%20you%0A%09don%27t%20have%20to%20keep%20extracting%20the%20%5B...%5D&In-Reply-To=%3C20121217234422.3D524805C104%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014448.html">
   <LINK REL="Next"  HREF="014450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7589 - [giow] (0) Add a way to prepare sprites so you	don't have to keep extracting the [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7589%20-%20%5Bgiow%5D%20%280%29%20Add%20a%20way%20to%20prepare%20sprites%20so%20you%0A%09don%27t%20have%20to%20keep%20extracting%20the%20%5B...%5D&In-Reply-To=%3C20121217234422.3D524805C104%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7589 - [giow] (0) Add a way to prepare sprites so you	don't have to keep extracting the [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Dec 17 15:44:22 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014448.html">[html5] r7588 - [e] (0) Vaguely try to make this text more	correct... Affected topics: Canvas, HTML
</A></li>
        <LI>Next message: <A HREF="014450.html">[html5] r7590 - [giow] (0) Fix error in how in-band tracks are	handled. Affected topics: HTML, V [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14449">[ date ]</a>
              <a href="thread.html#14449">[ thread ]</a>
              <a href="subject.html#14449">[ subject ]</a>
              <a href="author.html#14449">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-12-17 15:44:21 -0800 (Mon, 17 Dec 2012)
New Revision: 7589

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Add a way to prepare sprites so you don't have to keep extracting the pixels from the original image, while still allowing the UA to do this cheaply on the backend.
Affected topics: Canvas

Modified: complete.html
===================================================================
--- complete.html	2012-12-17 22:01:22 UTC (rev 7588)
+++ complete.html	2012-12-17 23:44:21 UTC (rev 7589)
@@ -38845,8 +38845,7 @@
     &lt;p&gt;&lt;img alt=&quot;The sx and sy parameters give the x and y coordinates of the source rectangle; the sw and sh arguments give the width and height of the source rectangle; the dx and dy give the x and y coordinates of the destination rectangle; and the dw and dh arguments give the width and height of the destination rectangle.&quot; height=356 src=<A HREF="http://images.whatwg.org/drawImage.png">http://images.whatwg.org/drawImage.png</A> width=356&gt;&lt;/p&gt;
 
     &lt;p&gt;If the image has no image data, throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception. If the
-    one of the source rectangle dimensions is zero, throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.
-    If the image isn't yet fully decoded, then nothing is drawn.&lt;/p&gt;
+    image isn't yet fully decoded, then nothing is drawn.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -38887,8 +38886,8 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, throw an
-   &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, abort
+   these steps. Nothing is painted.&lt;/li&gt;
 
    &lt;li&gt;
 
@@ -75725,14 +75724,17 @@
 
 callback &lt;dfn id=imagebitmapcallback&gt;ImageBitmapCallback&lt;/dfn&gt; = void (&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt; image);
 
+typedef (&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or
+         &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt; or
+         &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or
+         &lt;a href=#blob&gt;Blob&lt;/a&gt; or
+         &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; or
+         &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; or
+         &lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;) &lt;dfn id=imagebitmapsource&gt;ImageBitmapSource&lt;/dfn&gt;;
+
 [NoInterfaceObject]
 interface &lt;dfn id=imagebitmapfactories&gt;ImageBitmapFactories&lt;/dfn&gt; {
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#blob&gt;Blob&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#imagebitmapsource&gt;ImageBitmapSource&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback, optional long sx, long sy, long sw, long sh);
 };
 &lt;a href=#window&gt;Window&lt;/a&gt; implements &lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;;
 &lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt; implements &lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;;&lt;/pre&gt;
@@ -75745,20 +75747,24 @@
   I/O, then the latency is probably undue; whereas if it only requires a blocking read from a GPU or
   system RAM, the latency is probably acceptable.&lt;/p&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=dom-createImageBitmap&gt;&lt;a href=#dom-createimagebitmap&gt;createImageBitmap&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;)&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=dom-createImageBitmap&gt;&lt;a href=#dom-createimagebitmap&gt;createImageBitmap&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; ] )&lt;/dt&gt;
 
    &lt;dd&gt;
 
     &lt;p&gt;Takes &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, which can be an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element,
     &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object, an
-    &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object, or a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object, and
-    asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; as its
-    argument when it has created one.&lt;/p&gt;
+    &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object, a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object, or another
+    &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object, and asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a
+    new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; as its argument when it has created one.&lt;/p&gt;
 
     &lt;p&gt;If no &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object can be constructed, for example because the provided
     &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; data is not actually an image, then the &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;
     is invoked with null as the value instead.&lt;/p&gt;
 
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are provided, the source image is cropped to the given pixels, with
+    any pixels missing in the original replaced by transparent black. These coordinates are in the
+    source image's pixel coordinate space, &lt;em&gt;not&lt;/em&gt; in CSS pixels.&lt;/p&gt;
+
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the source image is not in a valid
     state (e.g. an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element that hasn't finished loading, or a
     &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object whose bitmap data has zero length along one or both
@@ -75785,7 +75791,10 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#img-all title=img-all&gt;completely
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#img-all title=img-all&gt;completely
      available&lt;/a&gt;, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these
      steps.&lt;/li&gt;
 
@@ -75802,9 +75811,10 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
-     element's media data. If this is an animated image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's
-     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
-     the first frame of the animation.&lt;/li&gt;
+     element's media data, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source rectangle&lt;/a&gt;. If this is an animated
+     image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data must only be taken from the
+     animation's poster frame, or, if there is no poster frame, the first frame of the
+     animation.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75817,7 +75827,10 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;, then throw an
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;, then throw an
      &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
 &lt;!--ADD-TOPIC:Security--&gt;
@@ -75834,7 +75847,7 @@
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the frame at the
      &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, at the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt; (i.e. after any aspect-ratio
-     correction has been applied).&lt;/p&gt;
+     correction has been applied), &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source rectangle&lt;/a&gt;.&lt;/p&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75847,7 +75860,11 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data does not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw an
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data does not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw an
      &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
 
@@ -75858,7 +75875,8 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source
+     rectangle&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75872,7 +75890,10 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object has been neutered through the &lt;code title=dom-Blob-close&gt;close&lt;/code&gt; method, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object has been neutered through the &lt;code title=dom-Blob-close&gt;close&lt;/code&gt; method, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
      exception and abort these steps.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
@@ -75893,9 +75914,10 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be the image data read from the
-     &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object. If this is an animated image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's
-     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
-     the first frame of the animation.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source rectangle&lt;/a&gt;. If this is an animated
+     image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data must only be taken from the
+     animation's poster frame, or, if there is no poster frame, the first frame of the
+     animation.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
      &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
@@ -75907,10 +75929,13 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be the image data given by the
-     &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source rectangle&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75923,7 +75948,11 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; does
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; does
      not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw
      an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
@@ -75935,7 +75964,8 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the
-     &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to
+     the source rectangle&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75944,9 +75974,99 @@
 
     &lt;/ol&gt;&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;/div&gt;
 
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object
 
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument's bitmap data, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source
+     rectangle&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+
+  &lt;/dl&gt;&lt;p&gt;When the steps above require that the user agent &lt;dfn id=cropped-to-the-source-rectangle title=&quot;cropped to the source
+  rectangle&quot;&gt;crop bitmap data to the source rectangle&lt;/dfn&gt;, the user agent must run the following
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the image data being cropped.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, return &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Place &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; on an infinite transparent black grid plane, positioned so
+   that it's top left corner is at the origin of the plane, with the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate increasing to the right, and the &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;-coordinate
+   increasing down, and with each pixel in the &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; image data occupying a cell
+   on the plane's grid.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be the rectangle on the plane denoted by the rectangle whose
+    corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+
+    &lt;p class=note&gt;If either &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; are negative, then
+    the top-left corner of this rectangle will be to the right and/or above the (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;) point. If any of the pixels on this rectangle are
+    outside the area where the &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; bitmap was placed, then they will be
+    transparent black in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;'s pixel density be &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;'s pixel
+   density.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;Using this API, a sprite sheet can be precut and prepared:&lt;/p&gt;
+
+   &lt;pre&gt;var sprites = {};
+function loadMySprites(loadedCallback) {
+  var pending = 0;
+  function getSpriteAdder(name) {
+    pending += 1;
+    return function (image) {
+      sprites[name] = image;
+      pending -= 1;
+      if (!pending)
+        loadedCallback();
+    };
+  }
+  var image = new Image();
+  image.src = 'mysprites.png';
+  image.onload = function () {
+    createImageBitmap(image, getSpriteAdder('woman'),  0,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('man'),   40,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('tree'),  80,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('hut'),    0, 40, 40, 40);
+    createImageBitmap(image, getSpriteAdder('apple'), 40, 40, 40, 40);
+    createImageBitmap(image, getSpriteAdder('snake'), 80, 40, 40, 40);
+  };
+}
+
+function runDemo() {
+  var canvas = document.querySelector('canvas#demo');
+  var context = canvas.getContext('2d');
+  context.drawImage(sprites.tree, 30, 10);
+  context.drawImage(sprites.snake, 70, 10);
+}
+
+loadMySprites(runDemo);&lt;/pre&gt;
+
+  &lt;/div&gt;
+
+
 &lt;!--TOPIC:HTML--&gt;
 
   &lt;h2 id=editing&gt;&lt;span class=secno&gt;8 &lt;/span&gt;&lt;dfn&gt;User interaction&lt;/dfn&gt;&lt;/h2&gt;

Modified: index
===================================================================
--- index	2012-12-17 22:01:22 UTC (rev 7588)
+++ index	2012-12-17 23:44:21 UTC (rev 7589)
@@ -38845,8 +38845,7 @@
     &lt;p&gt;&lt;img alt=&quot;The sx and sy parameters give the x and y coordinates of the source rectangle; the sw and sh arguments give the width and height of the source rectangle; the dx and dy give the x and y coordinates of the destination rectangle; and the dw and dh arguments give the width and height of the destination rectangle.&quot; height=356 src=<A HREF="http://images.whatwg.org/drawImage.png">http://images.whatwg.org/drawImage.png</A> width=356&gt;&lt;/p&gt;
 
     &lt;p&gt;If the image has no image data, throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception. If the
-    one of the source rectangle dimensions is zero, throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.
-    If the image isn't yet fully decoded, then nothing is drawn.&lt;/p&gt;
+    image isn't yet fully decoded, then nothing is drawn.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -38887,8 +38886,8 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, throw an
-   &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, abort
+   these steps. Nothing is painted.&lt;/li&gt;
 
    &lt;li&gt;
 
@@ -75725,14 +75724,17 @@
 
 callback &lt;dfn id=imagebitmapcallback&gt;ImageBitmapCallback&lt;/dfn&gt; = void (&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt; image);
 
+typedef (&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or
+         &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt; or
+         &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or
+         &lt;a href=#blob&gt;Blob&lt;/a&gt; or
+         &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; or
+         &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; or
+         &lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;) &lt;dfn id=imagebitmapsource&gt;ImageBitmapSource&lt;/dfn&gt;;
+
 [NoInterfaceObject]
 interface &lt;dfn id=imagebitmapfactories&gt;ImageBitmapFactories&lt;/dfn&gt; {
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#blob&gt;Blob&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
-  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#imagebitmapsource&gt;ImageBitmapSource&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback, optional long sx, long sy, long sw, long sh);
 };
 &lt;a href=#window&gt;Window&lt;/a&gt; implements &lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;;
 &lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt; implements &lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;;&lt;/pre&gt;
@@ -75745,20 +75747,24 @@
   I/O, then the latency is probably undue; whereas if it only requires a blocking read from a GPU or
   system RAM, the latency is probably acceptable.&lt;/p&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=dom-createImageBitmap&gt;&lt;a href=#dom-createimagebitmap&gt;createImageBitmap&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;)&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=dom-createImageBitmap&gt;&lt;a href=#dom-createimagebitmap&gt;createImageBitmap&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; ] )&lt;/dt&gt;
 
    &lt;dd&gt;
 
     &lt;p&gt;Takes &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, which can be an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element,
     &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object, an
-    &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object, or a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object, and
-    asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; as its
-    argument when it has created one.&lt;/p&gt;
+    &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object, a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object, or another
+    &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object, and asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a
+    new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; as its argument when it has created one.&lt;/p&gt;
 
     &lt;p&gt;If no &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object can be constructed, for example because the provided
     &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; data is not actually an image, then the &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;
     is invoked with null as the value instead.&lt;/p&gt;
 
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are provided, the source image is cropped to the given pixels, with
+    any pixels missing in the original replaced by transparent black. These coordinates are in the
+    source image's pixel coordinate space, &lt;em&gt;not&lt;/em&gt; in CSS pixels.&lt;/p&gt;
+
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the source image is not in a valid
     state (e.g. an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element that hasn't finished loading, or a
     &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object whose bitmap data has zero length along one or both
@@ -75785,7 +75791,10 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#img-all title=img-all&gt;completely
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#img-all title=img-all&gt;completely
      available&lt;/a&gt;, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these
      steps.&lt;/li&gt;
 
@@ -75802,9 +75811,10 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
-     element's media data. If this is an animated image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's
-     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
-     the first frame of the animation.&lt;/li&gt;
+     element's media data, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source rectangle&lt;/a&gt;. If this is an animated
+     image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data must only be taken from the
+     animation's poster frame, or, if there is no poster frame, the first frame of the
+     animation.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75817,7 +75827,10 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;, then throw an
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;, then throw an
      &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
 &lt;!--ADD-TOPIC:Security--&gt;
@@ -75834,7 +75847,7 @@
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the frame at the
      &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, at the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt; (i.e. after any aspect-ratio
-     correction has been applied).&lt;/p&gt;
+     correction has been applied), &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source rectangle&lt;/a&gt;.&lt;/p&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75847,7 +75860,11 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data does not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw an
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data does not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw an
      &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
 
@@ -75858,7 +75875,8 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source
+     rectangle&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75872,7 +75890,10 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object has been neutered through the &lt;code title=dom-Blob-close&gt;close&lt;/code&gt; method, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object has been neutered through the &lt;code title=dom-Blob-close&gt;close&lt;/code&gt; method, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
      exception and abort these steps.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
@@ -75893,9 +75914,10 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be the image data read from the
-     &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object. If this is an animated image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's
-     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
-     the first frame of the animation.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source rectangle&lt;/a&gt;. If this is an animated
+     image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data must only be taken from the
+     animation's poster frame, or, if there is no poster frame, the first frame of the
+     animation.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
      &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
@@ -75907,10 +75929,13 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be the image data given by the
-     &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source rectangle&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75923,7 +75948,11 @@
 
    &lt;dd&gt;
 
-    &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; does
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; does
      not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw
      an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
@@ -75935,7 +75964,8 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the
-     &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to
+     the source rectangle&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
@@ -75944,9 +75974,99 @@
 
     &lt;/ol&gt;&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;/div&gt;
 
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object
 
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument's bitmap data, &lt;a href=#cropped-to-the-source-rectangle&gt;cropped to the source
+     rectangle&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+
+  &lt;/dl&gt;&lt;p&gt;When the steps above require that the user agent &lt;dfn id=cropped-to-the-source-rectangle title=&quot;cropped to the source
+  rectangle&quot;&gt;crop bitmap data to the source rectangle&lt;/dfn&gt;, the user agent must run the following
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the image data being cropped.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, return &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Place &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; on an infinite transparent black grid plane, positioned so
+   that it's top left corner is at the origin of the plane, with the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate increasing to the right, and the &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;-coordinate
+   increasing down, and with each pixel in the &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; image data occupying a cell
+   on the plane's grid.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be the rectangle on the plane denoted by the rectangle whose
+    corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+
+    &lt;p class=note&gt;If either &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; are negative, then
+    the top-left corner of this rectangle will be to the right and/or above the (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;) point. If any of the pixels on this rectangle are
+    outside the area where the &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; bitmap was placed, then they will be
+    transparent black in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;'s pixel density be &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;'s pixel
+   density.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;Using this API, a sprite sheet can be precut and prepared:&lt;/p&gt;
+
+   &lt;pre&gt;var sprites = {};
+function loadMySprites(loadedCallback) {
+  var pending = 0;
+  function getSpriteAdder(name) {
+    pending += 1;
+    return function (image) {
+      sprites[name] = image;
+      pending -= 1;
+      if (!pending)
+        loadedCallback();
+    };
+  }
+  var image = new Image();
+  image.src = 'mysprites.png';
+  image.onload = function () {
+    createImageBitmap(image, getSpriteAdder('woman'),  0,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('man'),   40,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('tree'),  80,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('hut'),    0, 40, 40, 40);
+    createImageBitmap(image, getSpriteAdder('apple'), 40, 40, 40, 40);
+    createImageBitmap(image, getSpriteAdder('snake'), 80, 40, 40, 40);
+  };
+}
+
+function runDemo() {
+  var canvas = document.querySelector('canvas#demo');
+  var context = canvas.getContext('2d');
+  context.drawImage(sprites.tree, 30, 10);
+  context.drawImage(sprites.snake, 70, 10);
+}
+
+loadMySprites(runDemo);&lt;/pre&gt;
+
+  &lt;/div&gt;
+
+
 &lt;!--TOPIC:HTML--&gt;
 
   &lt;h2 id=editing&gt;&lt;span class=secno&gt;8 &lt;/span&gt;&lt;dfn&gt;User interaction&lt;/dfn&gt;&lt;/h2&gt;

Modified: source
===================================================================
--- source	2012-12-17 22:01:22 UTC (rev 7588)
+++ source	2012-12-17 23:44:21 UTC (rev 7589)
@@ -45384,8 +45384,7 @@
     &lt;p&gt;&lt;img src=&quot;images/drawImage.png&quot; width=&quot;356&quot; height=&quot;356&quot; alt=&quot;The sx and sy parameters give the x and y coordinates of the source rectangle; the sw and sh arguments give the width and height of the source rectangle; the dx and dy give the x and y coordinates of the destination rectangle; and the dw and dh arguments give the width and height of the destination rectangle.&quot;&gt;&lt;/p&gt;
 
     &lt;p&gt;If the image has no image data, throws an &lt;code&gt;InvalidStateError&lt;/code&gt; exception. If the
-    one of the source rectangle dimensions is zero, throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.
-    If the image isn't yet fully decoded, then nothing is drawn.&lt;/p&gt;
+    image isn't yet fully decoded, then nothing is drawn.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -45440,8 +45439,8 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, throw an
-   &lt;code&gt;IndexSizeError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, abort
+   these steps. Nothing is painted.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
@@ -88489,14 +88488,17 @@
 
 callback &lt;dfn&gt;ImageBitmapCallback&lt;/dfn&gt; = void (&lt;span&gt;ImageBitmap&lt;/span&gt; image);
 
+typedef (&lt;span&gt;HTMLImageElement&lt;/span&gt; or
+         &lt;span&gt;HTMLVideoElement&lt;/span&gt; or
+         &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or
+         &lt;span&gt;Blob&lt;/span&gt; or
+         &lt;span&gt;ImageData&lt;/span&gt; or
+         &lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; or
+         &lt;span&gt;ImageBitmap&lt;/span&gt;) &lt;dfn&gt;ImageBitmapSource&lt;/dfn&gt;;
+
 [NoInterfaceObject]
 interface &lt;dfn&gt;ImageBitmapFactories&lt;/dfn&gt; {
-  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;HTMLImageElement&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback);
-  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;HTMLVideoElement&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback);
-  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;HTMLCanvasElement&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback); 
-  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;Blob&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback);
-  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback); 
-  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback); 
+  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;ImageBitmapSource&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback, optional long sx, long sy, long sw, long sh);
 };
 &lt;span&gt;Window&lt;/span&gt; implements &lt;span&gt;ImageBitmapFactories&lt;/span&gt;;
 &lt;span&gt;WorkerUtils&lt;/span&gt; implements &lt;span&gt;ImageBitmapFactories&lt;/span&gt;;&lt;/pre&gt;
@@ -88511,20 +88513,25 @@
 
   &lt;dl class=&quot;domintro&quot;&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; ] )&lt;/dt&gt;
 
    &lt;dd&gt;
 
     &lt;p&gt;Takes &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, which can be an &lt;code&gt;img&lt;/code&gt; element,
     &lt;code&gt;video&lt;/code&gt;, or &lt;code&gt;canvas&lt;/code&gt; element, a &lt;code&gt;Blob&lt;/code&gt; object, an
-    &lt;code&gt;ImageData&lt;/code&gt; object, or a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object, and
-    asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a new &lt;code&gt;ImageBitmap&lt;/code&gt; as its
-    argument when it has created one.&lt;/p&gt;
+    &lt;code&gt;ImageData&lt;/code&gt; object, a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object, or another
+    &lt;code&gt;ImageBitmap&lt;/code&gt; object, and asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a
+    new &lt;code&gt;ImageBitmap&lt;/code&gt; as its argument when it has created one.&lt;/p&gt;
 
     &lt;p&gt;If no &lt;code&gt;ImageBitmap&lt;/code&gt; object can be constructed, for example because the provided
     &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; data is not actually an image, then the &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;
     is invoked with null as the value instead.&lt;/p&gt;
 
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var
+    title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are provided, the source image is cropped to the given pixels, with
+    any pixels missing in the original replaced by transparent black. These coordinates are in the
+    source image's pixel coordinate space, &lt;em&gt;not&lt;/em&gt; in CSS pixels.&lt;/p&gt;
+
     &lt;p&gt;Throws an &lt;code&gt;InvalidStateError&lt;/code&gt; exception if the source image is not in a valid
     state (e.g. an &lt;code&gt;img&lt;/code&gt; element that hasn't finished loading, or a
     &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object whose bitmap data has zero length along one or both
@@ -88558,6 +88565,9 @@
 
     &lt;ol&gt;
 
+     &lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;If the &lt;code&gt;img&lt;/code&gt; element is not &lt;span title=&quot;img-all&quot;&gt;completely
      available&lt;/span&gt;, then throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these
      steps.&lt;/p&gt;&lt;/li&gt;
@@ -88575,9 +88585,10 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be a copy of the &lt;code&gt;img&lt;/code&gt;
-     element's media data. If this is an animated image, the &lt;code&gt;ImageBitmap&lt;/code&gt; object's
-     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
-     the first frame of the animation.&lt;/p&gt;&lt;/li&gt;
+     element's media data, &lt;span&gt;cropped to the source rectangle&lt;/span&gt;. If this is an animated
+     image, the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data must only be taken from the
+     animation's poster frame, or, if there is no poster frame, the first frame of the
+     animation.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
 
@@ -88594,6 +88605,9 @@
 
     &lt;ol&gt;
 
+     &lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;If the &lt;code&gt;video&lt;/code&gt; element's &lt;code
      title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute is &lt;code
      title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/code&gt;, then throw an
@@ -88616,7 +88630,7 @@
      &lt;span&gt;current playback position&lt;/span&gt;, at the &lt;span&gt;media resource&lt;/span&gt;'s &lt;span
      title=&quot;concept-video-intrinsic-width&quot;&gt;intrinsic width&lt;/span&gt; and &lt;span
      title=&quot;concept-video-intrinsic-height&quot;&gt;intrinsic height&lt;/span&gt; (i.e. after any aspect-ratio
-     correction has been applied).&lt;/p&gt;
+     correction has been applied), &lt;span&gt;cropped to the source rectangle&lt;/span&gt;.&lt;/p&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
 
@@ -88633,6 +88647,9 @@
 
     &lt;ol&gt;
 
+     &lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
+
 &lt;!--ADD-TOPIC:Security--&gt;
      &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's bitmap data does not have its &lt;span
      title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag set, then throw an
@@ -88646,7 +88663,8 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be a copy of the
-     &lt;code&gt;canvas&lt;/code&gt; element's bitmap data.&lt;/p&gt;&lt;/li&gt;
+     &lt;code&gt;canvas&lt;/code&gt; element's bitmap data, &lt;span&gt;cropped to the source
+     rectangle&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
 
@@ -88664,6 +88682,9 @@
 
     &lt;ol&gt;
 
+     &lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;If the &lt;code&gt;Blob&lt;/code&gt; object has been neutered through the &lt;code
      title=&quot;dom-Blob-close&quot;&gt;close&lt;/code&gt; method, then throw an &lt;code&gt;InvalidStateError&lt;/code&gt;
      exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
@@ -88687,9 +88708,10 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be the image data read from the
-     &lt;code&gt;Blob&lt;/code&gt; object. If this is an animated image, the &lt;code&gt;ImageBitmap&lt;/code&gt; object's
-     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
-     the first frame of the animation.&lt;/p&gt;&lt;/li&gt;
+     &lt;code&gt;Blob&lt;/code&gt; object, &lt;span&gt;cropped to the source rectangle&lt;/span&gt;. If this is an animated
+     image, the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data must only be taken from the
+     animation's poster frame, or, if there is no poster frame, the first frame of the
+     animation.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
      &lt;code&gt;ImageBitmap&lt;/code&gt; object as its argument.&lt;/p&gt;&lt;/li&gt;
@@ -88705,10 +88727,13 @@
 
     &lt;ol&gt;
 
+     &lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be the image data given by the
-     &lt;code&gt;ImageData&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+     &lt;code&gt;ImageData&lt;/code&gt; object, &lt;span&gt;cropped to the source rectangle&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
 
@@ -88725,6 +88750,9 @@
 
     &lt;ol&gt;
 
+     &lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
+
 &lt;!--ADD-TOPIC:Security--&gt;
      &lt;li&gt;&lt;p&gt;If the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt; does
      not have its &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag set, then throw
@@ -88738,7 +88766,8 @@
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be a copy of the
-     &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+     &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt;, &lt;span&gt;cropped to
+     the source rectangle&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
 
@@ -88749,11 +88778,117 @@
 
    &lt;/dd&gt;
 
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;ImageBitmap&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are specified
+     but zero, throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be a copy of the &lt;var
+     title=&quot;&quot;&gt;image&lt;/var&gt; argument's bitmap data, &lt;span&gt;cropped to the source
+     rectangle&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;ImageBitmap&lt;/code&gt; object as its argument.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+
   &lt;/dl&gt;
 
+  &lt;p&gt;When the steps above require that the user agent &lt;dfn title=&quot;cropped to the source
+  rectangle&quot;&gt;crop bitmap data to the source rectangle&lt;/dfn&gt;, the user agent must run the following
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the image data being cropped.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var
+   title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, return &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Place &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; on an infinite transparent black grid plane, positioned so
+   that it's top left corner is at the origin of the plane, with the &lt;var
+   title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate increasing to the right, and the &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;-coordinate
+   increasing down, and with each pixel in the &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; image data occupying a cell
+   on the plane's grid.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be the rectangle on the plane denoted by the rectangle whose
+    corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span
+    title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span
+    title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var
+    title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var
+    title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;If either &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; are negative, then
+    the top-left corner of this rectangle will be to the right and/or above the (&lt;var
+    title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;) point. If any of the pixels on this rectangle are
+    outside the area where the &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; bitmap was placed, then they will be
+    transparent black in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;'s pixel density be &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;'s pixel
+   density.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
   &lt;/div&gt;
 
+  &lt;div class=&quot;example&quot;&gt;
 
+   &lt;p&gt;Using this API, a sprite sheet can be precut and prepared:&lt;/p&gt;
+
+   &lt;pre&gt;var sprites = {};
+function loadMySprites(loadedCallback) {
+  var pending = 0;
+  function getSpriteAdder(name) {
+    pending += 1;
+    return function (image) {
+      sprites[name] = image;
+      pending -= 1;
+      if (!pending)
+        loadedCallback();
+    };
+  }
+  var image = new Image();
+  image.src = 'mysprites.png';
+  image.onload = function () {
+    createImageBitmap(image, getSpriteAdder('woman'),  0,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('man'),   40,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('tree'),  80,  0, 40, 40);
+    createImageBitmap(image, getSpriteAdder('hut'),    0, 40, 40, 40);
+    createImageBitmap(image, getSpriteAdder('apple'), 40, 40, 40, 40);
+    createImageBitmap(image, getSpriteAdder('snake'), 80, 40, 40, 40);
+  };
+}
+
+function runDemo() {
+  var canvas = document.querySelector('canvas#demo');
+  var context = canvas.getContext('2d');
+  context.drawImage(sprites.tree, 30, 10);
+  context.drawImage(sprites.snake, 70, 10);
+}
+
+loadMySprites(runDemo);&lt;/pre&gt;
+
+  &lt;/div&gt;
+
+
 &lt;!--TOPIC:HTML--&gt;
 
   &lt;h2 id=&quot;editing&quot;&gt;&lt;dfn&gt;User interaction&lt;/dfn&gt;&lt;/h2&gt;


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014448.html">[html5] r7588 - [e] (0) Vaguely try to make this text more	correct... Affected topics: Canvas, HTML
</A></li>
	<LI>Next message: <A HREF="014450.html">[html5] r7590 - [giow] (0) Fix error in how in-band tracks are	handled. Affected topics: HTML, V [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14449">[ date ]</a>
              <a href="thread.html#14449">[ thread ]</a>
              <a href="subject.html#14449">[ subject ]</a>
              <a href="author.html#14449">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
