<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7509 - [agiow] (0) First draft of a way to do canvas in	workers. Affected topics: Canva [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7509%20-%20%5Bagiow%5D%20%280%29%20First%20draft%20of%20a%20way%20to%20do%20canvas%20in%0A%09workers.%20Affected%20topics%3A%20Canva%20%5B...%5D&In-Reply-To=%3C20121116202608.CCB0E8058295%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014371.html">
   <LINK REL="Next"  HREF="014373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7509 - [agiow] (0) First draft of a way to do canvas in	workers. Affected topics: Canva [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7509%20-%20%5Bagiow%5D%20%280%29%20First%20draft%20of%20a%20way%20to%20do%20canvas%20in%0A%09workers.%20Affected%20topics%3A%20Canva%20%5B...%5D&In-Reply-To=%3C20121116202608.CCB0E8058295%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7509 - [agiow] (0) First draft of a way to do canvas in	workers. Affected topics: Canva [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Nov 16 12:26:08 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014371.html">[html5] r7508 - [e] (0) Try to avoid using the term 'array' when	it's a sequence. Fixing https:/ [...]
</A></li>
        <LI>Next message: <A HREF="014373.html">[html5] r7510 - [e] (0) More examples of WebVTT. Fixing	https://www.w3.org/Bugs/Public/show_bug. [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14372">[ date ]</a>
              <a href="thread.html#14372">[ thread ]</a>
              <a href="subject.html#14372">[ subject ]</a>
              <a href="author.html#14372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-11-16 12:26:07 -0800 (Fri, 16 Nov 2012)
New Revision: 7509

Modified:
   complete.html
   index
   source
Log:
[agiow] (0) First draft of a way to do canvas in workers.
Affected topics: Canvas, DOM APIs, HTML, Rendering, Security, Web Workers, Workers

Modified: complete.html
===================================================================
--- complete.html	2012-11-06 01:54:26 UTC (rev 7508)
+++ complete.html	2012-11-16 20:26:07 UTC (rev 7509)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 6 November 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 16 November 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -609,31 +609,35 @@
        &lt;li&gt;&lt;a href=#best-practices-for-implementors-of-media-elements&gt;&lt;span class=secno&gt;4.8.10.19 &lt;/span&gt;Best practices for implementors of media elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-canvas-element&gt;&lt;span class=secno&gt;4.8.11 &lt;/span&gt;The &lt;code&gt;canvas&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#2dcontext&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;The 2D context&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#proxying-canvases-to-workers&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;Proxying canvases to workers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#2dcontext&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;The 2D rendering context&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#resolution&gt;&lt;span class=secno&gt;4.8.11.1.1 &lt;/span&gt;Resolution&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.1.2 &lt;/span&gt;The canvas state&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawingstyle-objects&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;&lt;code&gt;DrawingStyle&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#text-styles&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Text styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#building-paths&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Building paths&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#path-objects&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;&lt;code&gt;Path&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#transformations&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Transformations&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing rectangles to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing text to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing paths to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#hit-regions&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Hit regions&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#image-smoothing&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Image smoothing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.19 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.20 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.21 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#implementation-notes&gt;&lt;span class=secno&gt;4.8.11.2.1 &lt;/span&gt;Implementation notes&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.2.2 &lt;/span&gt;The canvas state&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawingstyle-objects&gt;&lt;span class=secno&gt;4.8.11.2.3 &lt;/span&gt;&lt;code&gt;DrawingStyle&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.2.4 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#text-styles&gt;&lt;span class=secno&gt;4.8.11.2.5 &lt;/span&gt;Text styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#building-paths&gt;&lt;span class=secno&gt;4.8.11.2.6 &lt;/span&gt;Building paths&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#path-objects&gt;&lt;span class=secno&gt;4.8.11.2.7 &lt;/span&gt;&lt;code&gt;Path&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#transformations&gt;&lt;span class=secno&gt;4.8.11.2.8 &lt;/span&gt;Transformations&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#image-sources-for-2d-rendering-contexts&gt;&lt;span class=secno&gt;4.8.11.2.9 &lt;/span&gt;Image sources for 2D rendering contexts&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.2.10 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-rectangles-to-the-bitmap&gt;&lt;span class=secno&gt;4.8.11.2.11 &lt;/span&gt;Drawing rectangles to the bitmap&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-text-to-the-bitmap&gt;&lt;span class=secno&gt;4.8.11.2.12 &lt;/span&gt;Drawing text to the bitmap&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.2.13 &lt;/span&gt;Drawing paths to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-images&gt;&lt;span class=secno&gt;4.8.11.2.14 &lt;/span&gt;Drawing images&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#hit-regions&gt;&lt;span class=secno&gt;4.8.11.2.15 &lt;/span&gt;Hit regions&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.2.16 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.2.17 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#image-smoothing&gt;&lt;span class=secno&gt;4.8.11.2.18 &lt;/span&gt;Image smoothing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.2.19 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.2.20 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.2.21 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.2.22 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#pixel-density&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Pixel density&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.4 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#serializing-bitmaps-to-a-file&gt;&lt;span class=secno&gt;4.8.11.5 &lt;/span&gt;Serializing bitmaps to a file&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.6 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-area-element&gt;&lt;span class=secno&gt;4.8.13 &lt;/span&gt;The &lt;code&gt;area&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#image-maps&gt;&lt;span class=secno&gt;4.8.14 &lt;/span&gt;Image maps&lt;/a&gt;
@@ -976,11 +980,13 @@
      &lt;li&gt;&lt;a href=#the-navigator-object&gt;&lt;span class=secno&gt;7.5.1 &lt;/span&gt;The &lt;code&gt;Navigator&lt;/code&gt; object&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#client-identification&gt;&lt;span class=secno&gt;7.5.1.1 &lt;/span&gt;Client identification&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#custom-handlers&gt;&lt;span class=secno&gt;7.5.1.2 &lt;/span&gt;Custom scheme and content handlers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#security-and-privacy&gt;&lt;span class=secno&gt;7.5.1.3 &lt;/span&gt;Security and privacy&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sample-handler-impl&gt;&lt;span class=secno&gt;7.5.1.4 &lt;/span&gt;Sample user interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#manually-releasing-the-storage-mutex&gt;&lt;span class=secno&gt;7.5.1.5 &lt;/span&gt;Manually releasing the storage mutex&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-external-interface&gt;&lt;span class=secno&gt;7.5.2 &lt;/span&gt;The &lt;code&gt;External&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#custom-handlers&gt;&lt;span class=secno&gt;7.5.1.2 &lt;/span&gt;Custom scheme and content handlers&lt;/a&gt;
+        &lt;ol&gt;
+         &lt;li&gt;&lt;a href=#security-and-privacy&gt;&lt;span class=secno&gt;7.5.1.2.1 &lt;/span&gt;Security and privacy&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#sample-handler-impl&gt;&lt;span class=secno&gt;7.5.1.2.2 &lt;/span&gt;Sample user interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#manually-releasing-the-storage-mutex&gt;&lt;span class=secno&gt;7.5.1.3 &lt;/span&gt;Manually releasing the storage mutex&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-external-interface&gt;&lt;span class=secno&gt;7.5.2 &lt;/span&gt;The &lt;code&gt;External&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;7.6 &lt;/span&gt;Images&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#editing&gt;&lt;span class=secno&gt;8 &lt;/span&gt;User interaction&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#the-hidden-attribute&gt;&lt;span class=secno&gt;8.1 &lt;/span&gt;The &lt;code&gt;hidden&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
@@ -1305,7 +1311,7 @@
    &lt;li&gt;&lt;a href=#replaced-elements&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Replaced elements&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#embedded-content-2&gt;&lt;span class=secno&gt;14.4.1 &lt;/span&gt;Embedded content&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;14.4.3 &lt;/span&gt;Attributes for embedded content and images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;14.4.4 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;14.4.5 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
@@ -4229,13 +4235,15 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;This specification uses the following interfaces defined in the
+    &lt;p&gt;This specification uses the following features defined in the
     File API specification: &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
 
     &lt;ul class=brief&gt;&lt;li&gt;&lt;dfn id=blob&gt;&lt;code&gt;Blob&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;&lt;dfn id=file&gt;&lt;code&gt;File&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;&lt;dfn id=filelist&gt;&lt;code&gt;FileList&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
-
+     &lt;li&gt;&lt;dfn id=blob.close()&gt;&lt;code title=dom-Blob-close&gt;Blob.close()&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;dfn id=blob.type&gt;&lt;code title=dom-Blob-type&gt;Blob.type&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;The concept of &lt;dfn id=file-error-read title=file-error-read&gt;read errors&lt;/dfn&gt;&lt;/li&gt;
     &lt;/ul&gt;&lt;p&gt;It also uses the following interface defined in the File System
     API specification: &lt;a href=#refsFILESYSTEMAPI&gt;[FILESYSTEMAPI]&lt;/a&gt;&lt;/p&gt;
 
@@ -4325,6 +4333,10 @@
     &lt;p&gt;The term &lt;dfn id=css-styling-attribute&gt;CSS styling attribute&lt;/dfn&gt; is defined in the
     &lt;cite&gt;CSS Style Attributes&lt;/cite&gt; specification. &lt;a href=#refsCSSATTR&gt;[CSSATTR]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's use of fonts depends on the features
+    described in the CSS Fonts specification, including in particular
+    &lt;dfn id=fontloader&gt;&lt;code&gt;FontLoader&lt;/code&gt;&lt;/dfn&gt;. &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -4340,6 +4352,16 @@
     &lt;/ul&gt;&lt;!-- mention that the parser supports it? --&gt;&lt;/dd&gt;
 
 
+   &lt;dt&gt;WebGL&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The following interface is defined in the WebGL specification: &lt;a href=#refsWEBGL&gt;[WEBGL]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;&lt;dfn id=webglrenderingcontext&gt;&lt;code&gt;WebGLRenderingContext&lt;/code&gt;&lt;/dfn&gt;
+    &lt;/ul&gt;&lt;/dd&gt;
+
+
 &lt;!--TOPIC:HTML--&gt;
 
    &lt;!-- mention that the parser supports mathml? --&gt;
@@ -7199,11 +7221,9 @@
 
   &lt;/ol&gt;&lt;/div&gt;
 
-  &lt;hr&gt;&lt;!--2DCANVAS--&gt;&lt;p class=note&gt;The &lt;a href=#canvas-context-2d title=canvas-context-2d&gt;2D graphics
-  context&lt;/a&gt; has a separate color syntax that also handles
-  opacity.&lt;/p&gt;
+  &lt;hr&gt;&lt;p class=note&gt;The &lt;a href=#canvas-context-2d title=canvas-context-2d&gt;2D graphics context&lt;/a&gt; has a separate
+  color syntax that also handles opacity.&lt;/p&gt;
 
-  &lt;!--2DCANVAS--&gt;
 
 
   &lt;h4 id=space-separated-tokens&gt;&lt;span class=secno&gt;2.5.7 &lt;/span&gt;Space-separated tokens&lt;/h4&gt;
@@ -9787,6 +9807,7 @@
 
   &lt;ul class=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt;
   &lt;/ul&gt;&lt;div class=impl&gt;
 
   &lt;h4 id=safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;Safe passing of structured data&lt;/h4&gt;
@@ -9885,6 +9906,11 @@
      algorithm&lt;/a&gt; recursively with the value of the &lt;code title=dom-imagedata-data&gt;&lt;a href=#dom-imagedata-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute on &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;input&lt;/var&gt;&quot;
      argument and &lt;var title=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument.&lt;/dd&gt;
 
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object
+     whose bitmap data is a copy of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;'s bitmap data.&lt;/dd&gt;
+
 &lt;!--(when we add this, make sure to throw DataCloneError if these objects are already closed)
      &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;ArrayBuffer&lt;/code&gt; object&lt;/dt&gt;
 
@@ -24464,7 +24490,10 @@
   height is the image's intrinsic height, and whose appearance is the
   intrinsic appearance of the image.&lt;/p&gt;
 
-  &lt;p&gt;User agents may obtain images immediately or on demand.&lt;/p&gt;
+  &lt;p&gt;In a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; where &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is
+  disabled&lt;/a&gt;, user agents may obtain images immediately or on demand. In a &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt; where &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is enabled&lt;/a&gt;, user agents
+  must obtain images immediately.&lt;/p&gt;
 
   &lt;p&gt;A user agent that obtains images immediately must synchronously
   &lt;a href=#update-the-image-data&gt;update the image data&lt;/a&gt; of an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element
@@ -25273,8 +25302,8 @@
 
   &lt;p&gt;The IDL attribute &lt;dfn id=dom-img-complete title=dom-img-complete&gt;&lt;code&gt;complete&lt;/code&gt;&lt;/dfn&gt; must return
   true if any of the following conditions is true:&lt;/p&gt;
-  &lt;ul class=brief&gt;&lt;li&gt;The &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is omitted.
-   &lt;li&gt;The &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute's value is the empty string.
+  &lt;ul class=brief&gt;&lt;li&gt;Both the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code title=attr-img-srcset&gt;&lt;a href=#attr-img-srcset&gt;srcset&lt;/a&gt;&lt;/code&gt; attributes are omitted.
+   &lt;li&gt;The the &lt;code title=attr-img-srcset&gt;&lt;a href=#attr-img-srcset&gt;srcset&lt;/a&gt;&lt;/code&gt; attribute is omitted and the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute's value is the empty string. &lt;!-- we only have this hack for src=&quot;&quot;, not srcset=&quot;&quot;; present but empty or bogus srcset=&quot;&quot; still means complete=false if it's not in the img-error state --&gt;
    &lt;li&gt;The final &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; has been &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt;, but has not yet been run, and the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not in the &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state.
    &lt;li&gt;The &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt;.
   &lt;/ul&gt;&lt;p&gt;Otherwise, the attribute must return false.&lt;/p&gt;
@@ -36136,17 +36165,22 @@
    &lt;dd&gt;&lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--ADD-TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-    &lt;pre class=idl&gt;interface &lt;dfn id=htmlcanvaselement&gt;HTMLCanvasElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
+    &lt;pre class=idl&gt;typedef (&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; or &lt;a href=#webglrenderingcontext&gt;WebGLRenderingContext&lt;/a&gt;) &lt;dfn id=renderingcontext&gt;RenderingContext&lt;/dfn&gt;;
+
+interface &lt;dfn id=htmlcanvaselement&gt;HTMLCanvasElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
            attribute unsigned long &lt;a href=#dom-canvas-width title=dom-canvas-width&gt;width&lt;/a&gt;;
            attribute unsigned long &lt;a href=#dom-canvas-height title=dom-canvas-height&gt;height&lt;/a&gt;;
 
+  &lt;a href=#renderingcontext&gt;RenderingContext&lt;/a&gt;? &lt;a href=#dom-canvas-getcontext title=dom-canvas-getContext&gt;getContext&lt;/a&gt;(DOMString contextId, any... arguments);
+  boolean &lt;a href=#dom-canvas-supportscontext title=dom-canvas-supportsContext&gt;supportsContext&lt;/a&gt;(DOMString contextId, any... arguments);
+
+  void &lt;a href=#dom-canvas-setcontext title=dom-canvas-setContext&gt;setContext&lt;/a&gt;(&lt;a href=#renderingcontext&gt;RenderingContext&lt;/a&gt; context);
+  &lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; &lt;a href=#dom-canvas-transfercontroltoproxy title=dom-canvas-transferControlToProxy&gt;transferControlToProxy&lt;/a&gt;();
+
   DOMString &lt;a href=#dom-canvas-todataurl title=dom-canvas-toDataURL&gt;toDataURL&lt;/a&gt;(optional DOMString type, any... arguments);
   DOMString &lt;a href=#dom-canvas-todataurlhd title=dom-canvas-toDataURLHD&gt;toDataURLHD&lt;/a&gt;(optional DOMString type, any... arguments);
   void &lt;a href=#dom-canvas-toblob title=dom-canvas-toBlob&gt;toBlob&lt;/a&gt;(&lt;a href=#filecallback&gt;FileCallback&lt;/a&gt;? _callback, optional DOMString type, any... arguments);
   void &lt;a href=#dom-canvas-toblobhd title=dom-canvas-toBlobHD&gt;toBlobHD&lt;/a&gt;(&lt;a href=#filecallback&gt;FileCallback&lt;/a&gt;? _callback, optional DOMString type, any... arguments);
-
-  object? &lt;a href=#dom-canvas-getcontext title=dom-canvas-getContext&gt;getContext&lt;/a&gt;(DOMString contextId, any... arguments);
-  boolean &lt;a href=#dom-canvas-supportscontext title=dom-canvas-supportsContext&gt;supportsContext&lt;/a&gt;(DOMString contextId, any... arguments);
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--REMOVE-TOPIC:DOM APIs--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element provides scripts with a resolution-dependent bitmap canvas,
@@ -36159,21 +36193,22 @@
   CSS and supporting technologies such as XBL.&lt;/p&gt;
 
   &lt;p&gt;When authors use the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, they must also provide content that, when
-  presented to the user, conveys essentially the same function or purpose as the bitmap canvas. This
-  content may be placed as content of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. The contents of the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any, are the element's &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;.&lt;/p&gt;
+  presented to the user, conveys essentially the same function or purpose as the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;' bitmap. This content may be placed as content of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+  element. The contents of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any, are the element's &lt;a href=#fallback-content&gt;fallback
+  content&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;In interactive visual media, if &lt;a href=#concept-n-script title=concept-n-script&gt;scripting is enabled&lt;/a&gt; for
+  &lt;hr&gt;&lt;p&gt;In interactive visual media, if &lt;a href=#concept-n-script title=concept-n-script&gt;scripting is enabled&lt;/a&gt; for
   the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, and if support for &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements has been enabled,
   the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; consisting
-  of a dynamically created image.&lt;/p&gt;
+  of a dynamically created image, the element's bitmap.&lt;/p&gt;
 
   &lt;p&gt;In non-interactive, static, visual media, if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has been
-  previously painted on (e.g. if the page was viewed in an interactive visual medium and is now
-  being printed, or if some script that ran during the page layout process painted on the element),
-  then the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; with
-  the current image and size. Otherwise, the element represents its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;
-  instead.&lt;/p&gt;
+  previously associated with a rendering context (e.g. if the page was viewed in an interactive
+  visual medium and is now being printed, or if some script that ran during the page layout process
+  painted on the element), then the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt;
+  &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; with the element's current bitmap and size. Otherwise, the element
+  represents its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt; instead.&lt;/p&gt;
 
   &lt;p&gt;In non-visual media, and in visual media if &lt;a href=#concept-n-noscript title=concept-n-noscript&gt;scripting is
   disabled&lt;/a&gt; for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element or if support for &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements
@@ -36189,7 +36224,7 @@
   elements in the &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;. (Focus has no effect on mouse interaction events.)
   &lt;a href=#refsDOMEVENTS&gt;[DOMEVENTS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has two attributes to control the size of the coordinate space:
+  &lt;hr&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has two attributes to control the size of the coordinate space:
   &lt;dfn id=attr-canvas-width title=attr-canvas-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=attr-canvas-height title=attr-canvas-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt;. These attributes, when specified, must have
   values that are &lt;a href=#valid-non-negative-integer title=&quot;valid non-negative integer&quot;&gt;valid non-negative integers&lt;/a&gt;. &lt;span class=impl&gt;The &lt;a href=#rules-for-parsing-non-negative-integers&gt;rules for parsing non-negative integers&lt;/a&gt; must be used to obtain their
   numeric values. If an attribute is missing, or if parsing its value returns an error, then the
@@ -36197,63 +36232,73 @@
   attribute defaults to 300, and the &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; attribute
   defaults to 150.&lt;/p&gt;
 
-  &lt;p&gt;The intrinsic dimensions of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element equal the size of the coordinate
-  space, with the numbers interpreted in CSS pixels. However, the element can be sized arbitrarily
-  by a style sheet. During rendering, the image is scaled to fit this layout size.&lt;/p&gt;
+  &lt;p&gt;The intrinsic dimensions of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element when it &lt;a href=#represents&gt;represents&lt;/a&gt;
+  &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; are equal to the dimensions of the element's bitmap.&lt;/p&gt;
 
+  &lt;p class=note&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element can be sized arbitrarily by a style sheet, its
+  bitmap is then subject to the 'object-fit' CSS property. &lt;a href=#refsCSSIMAGES&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
-  &lt;p&gt;The size of the coordinate space does not necessarily represent the size of the actual bitmap
-  that the user agent will use internally or during rendering. On high-definition displays, for
-  instance, the user agent may internally use a bitmap with two device pixels per unit in the
-  coordinate space, so that the rendering remains at high quality throughout.&lt;/p&gt;
+  &lt;hr&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;p&gt;The bitmaps of &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements, as well as some of the bitmaps of rendering
+  contexts, such as those described in the section on the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
+  object below, have an &lt;dfn id=concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/dfn&gt; flag, which can
+  be set to true or false. Initially, when the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is created, its bitmap's
+  &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag must be set to true.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
 
-  &lt;p&gt;When the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is created, and subsequently whenever the &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt;
-  attributes are set (whether to a new value or to the previous value), the bitmap and any
-  associated contexts must be cleared back to their initial state and reinitialized with the newly
-  specified coordinate space dimensions.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; bitmap can also have a &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;, as described in the
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; section below.&lt;/p&gt;
 
-  &lt;p&gt;When the canvas is initialized, its bitmap must be cleared to transparent black.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element can have a rendering context bound to it. Initially, it does not
+  have a bound rendering context. To keep track of whether it has a rendering context or not, and
+  what kind of rendering context it is, a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; also has a &lt;dfn id=concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas context mode&lt;/dfn&gt;, which is initially &lt;dfn id=concept-canvas-none title=concept-canvas-none&gt;none&lt;/dfn&gt; but can be changed to either &lt;dfn id=concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/dfn&gt;, &lt;dfn id=concept-canvas-direct-webgl title=concept-canvas-direct-webgl&gt;direct-webgl&lt;/dfn&gt;, &lt;dfn id=concept-canvas-indirect title=concept-canvas-indirect&gt;indirect&lt;/dfn&gt;, or &lt;dfn id=concept-canvas-proxied title=concept-canvas-proxied&gt;proxied&lt;/dfn&gt; by algorithms defined in this specification.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element does not represent its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;, it
-  &lt;a href=#provides-a-paint-source&gt;provides a paint source&lt;/a&gt; whose width is the element's intrinsic width, whose height is
-  the element's intrinsic height, and whose appearance is the element's bitmap.&lt;/p&gt;
+  &lt;p&gt;When its &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas context mode&lt;/a&gt; is &lt;a href=#concept-canvas-none title=concept-canvas-none&gt;none&lt;/a&gt;, a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has no rendering context,
+  and its bitmap must be fully transparent black with an intrinsic width equal to the numeric value
+  of the element's &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; attribute and an intrinsic height
+  equal to the numeric value of the element's &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt;
+  attribute, those values being interpreted in CSS pixels, and being updated as the attributes are
+  set, changed, or removed.&lt;/p&gt;
 
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element represents &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt;, it &lt;a href=#provides-a-paint-source&gt;provides
+  a paint source&lt;/a&gt; whose width is the element's intrinsic width, whose height is the element's
+  intrinsic height, and whose appearance is the element's bitmap.&lt;/p&gt;
+
+  &lt;p&gt;Whenever the &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attributes are set, removed, changed, or
+  redundantly set to the value they already have, if the &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas context mode&lt;/a&gt; is &lt;a href=#concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/a&gt;&lt;!-- (and the rendering context's &lt;span
+  title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt;, therefore, is &lt;span
+  title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;)--&gt;, the user agent must &lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;set bitmap dimensions&lt;/a&gt; to the numeric values of
+  the &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attributes.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-canvas-width title=dom-canvas-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-canvas-height title=dom-canvas-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the
   respective content attributes of the same name, with the same defaults.&lt;/p&gt;
 
   &lt;/div&gt;
 
-  &lt;div class=example&gt;
-   &lt;p&gt;Only one square appears to be drawn in the following example:&lt;/p&gt;
-   &lt;pre&gt;  // canvas is a reference to a &lt;canvas&gt; element
-  var context = canvas.getContext('2d');
-  context.fillRect(0,0,50,50);
-  canvas.setAttribute('width', '300'); // clears the canvas
-  context.fillRect(0,100,50,50);
-  canvas.width = canvas.width; // clears the canvas
-  context.fillRect(100,0,50,50); // only this square remains&lt;/pre&gt;
-  &lt;/div&gt;
+  &lt;p class=note&gt;The bitmaps used with &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements can have arbitrary pixel
+  densities. Typically, the density will match that of the user's screen.&lt;/p&gt;
 
   &lt;hr&gt;&lt;!--ADD-TOPIC:DOM APIs--&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; [, ... ])&lt;/dt&gt;
 
    &lt;dd&gt;
 
     &lt;p&gt;Returns an object that exposes an API for drawing on the canvas. The first argument specifies
-    the desired API. Subsequent arguments are handled by that API.&lt;/p&gt;
+    the desired API, either &quot;&lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;&quot; or &quot;&lt;code title=canvas-context-webgl&gt;&lt;a href=#canvas-context-webgl&gt;webgl&lt;/a&gt;&lt;/code&gt;&quot;. Subsequent arguments are handled by that API.&lt;/p&gt;
 
     &lt;p&gt;This specification defines the &quot;&lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;&quot; context below.
-    There is also a specification that defines a &quot;&lt;code title=canvas-context-webgl&gt;webgl&lt;/code&gt;&quot;
+    There is also a specification that defines a &quot;&lt;code title=canvas-context-webgl&gt;&lt;a href=#canvas-context-webgl&gt;webgl&lt;/a&gt;&lt;/code&gt;&quot;
     context. &lt;a href=#refsWEBGL&gt;[WEBGL]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;The list of defined contexts is given on the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a href=#refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/a&gt;
+    &lt;p&gt;Returns null if the given context ID is not supported, if the canvas has already been
+    initialized with the other context type (e.g. trying to get a &quot;&lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;&quot; context after getting a &quot;&lt;code title=canvas-context-webgl&gt;&lt;a href=#canvas-context-webgl&gt;webgl&lt;/a&gt;&lt;/code&gt;&quot; context).&lt;/p&gt;
 
-    &lt;p&gt;Returns null if the given context ID is not supported or if the canvas has already been
-    initialized with some other (incompatible) context type (e.g. trying to get a &quot;&lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;&quot; context after getting a &quot;&lt;code title=canvas-context-webgl&gt;webgl&lt;/code&gt;&quot; context).&lt;/p&gt;
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; if the &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-canvas-transferControlToProxy&gt;&lt;a href=#dom-canvas-transfercontroltoproxy&gt;transferControlToProxy()&lt;/a&gt;&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-supportsContext&gt;&lt;a href=#dom-canvas-supportscontext&gt;supportsContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; [, ... ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;supported&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-supportsContext&gt;&lt;a href=#dom-canvas-supportscontext&gt;supportsContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; [, ... ])&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -36263,105 +36308,174 @@
     &lt;p&gt;This return value is not a guarantee that &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; will or will not return an object, as
     conditions (e.g. availability of system resources) can vary over time.&lt;/p&gt;
 
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; if the &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-canvas-transferControlToProxy&gt;&lt;a href=#dom-canvas-transfercontroltoproxy&gt;transferControlToProxy()&lt;/a&gt;&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
+
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Sets the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;' rendering context to the given object.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-canvas-transferControlToProxy&gt;&lt;a href=#dom-canvas-transfercontroltoproxy&gt;transferControlToProxy()&lt;/a&gt;&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element can have a &lt;dfn id=primary-context&gt;primary context&lt;/dfn&gt;, which is the first context
-  to have been obtained for that element. When created, a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element must not have
-  a &lt;a href=#primary-context&gt;primary context&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;There are two ways for a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element to acquire a rendering context: the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element can provide one via the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; method, and one can be assigned to it via the
+  &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; method. In addition, the whole issue of a
+  rendering context can be taken out of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's hands and passed to a
+  &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object, which itself can then be assigned a rendering context using its
+  &lt;code title=dom-CanvasProxy-setContext&gt;&lt;a href=#dom-canvasproxy-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; method.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-canvas-getcontext title=dom-canvas-getContext&gt;&lt;code&gt;getContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when invoked,
-  must run the following steps:&lt;/p&gt;
+  &lt;p&gt;These three methods are mutually exclusive; calling any of the three makes the other two start
+  throwing &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exceptions when called.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; be the first argument to the method.&lt;/li&gt;
+  &lt;p&gt;Each rendering context has a &lt;dfn id=concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+  mode&lt;/dfn&gt;, which is one of &lt;dfn id=concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/dfn&gt;, &lt;dfn id=concept-canvas-unbound title=concept-canvas-unbound&gt;unbound&lt;/dfn&gt;, or &lt;dfn id=concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/dfn&gt;.
+  Initially, rendering contexts must be in the &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;unbound&lt;/a&gt;
+  mode.&lt;/p&gt;
 
-   &lt;li&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-getcontext title=dom-canvas-getContext&gt;&lt;code&gt;getContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when invoked,
+  must run the steps in the cell of the following table whose column header describes the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas context mode&lt;/a&gt;
+  and whose row header describes the method's first argument.&lt;/p&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; is not the name of a context supported by the user agent,
-    return null and abort these steps.&lt;/p&gt;
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;td&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-none title=concept-canvas-none&gt;none&lt;/a&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/a&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-direct-webgl title=concept-canvas-direct-webgl&gt;direct-webgl&lt;/a&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-indirect title=concept-canvas-indirect&gt;indirect&lt;/a&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-proxied title=concept-canvas-proxied&gt;proxied&lt;/a&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;th&gt;&quot;&lt;dfn id=canvas-context-2d title=canvas-context-2d&gt;&lt;code&gt;2d&lt;/code&gt;&lt;/dfn&gt;&quot;
+     &lt;td&gt;
+      Set the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;context
+      mode&lt;/a&gt; to &lt;a href=#concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/a&gt;; follow the &lt;a href=#2d-context-creation-algorithm&gt;2D
+      context creation algorithm&lt;/a&gt; defined in the section below, passing it the
+      &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, to obtain a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object; set
+      that object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; to
+      &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, and return the
+      &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object
+     &lt;td&gt;
+      Return the same object as was return the last time the method was invoked with this same
+      argument.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
 
-    &lt;p class=note&gt;An example of this would be a user agent that theoretically supports the &quot;&lt;code title=canvas-context-webgl&gt;webgl&lt;/code&gt;&quot; 3D context, in the case where the platform does not
-    have hardware support for OpenGL and the user agent does not have a software OpenGL
-    implementation. Despite the user agent recognising the &quot;&lt;code title=canvas-context-webgl&gt;webgl&lt;/code&gt;&quot; name, it would return null at this step because that
-    context is not, in practice, supported at the time of the call.&lt;/p&gt;
+    &lt;tr&gt;&lt;th&gt;&quot;&lt;dfn id=canvas-context-webgl title=canvas-context-webgl&gt;&lt;code&gt;webgl&lt;/code&gt;&lt;/dfn&gt;&quot;, if the user agent supports the WebGL feature in its current configuration
+     &lt;td&gt;
+      Follow the instructions given in the WebGL specification's &lt;i&gt;Context Creation&lt;/i&gt; section to
+      obtain either a &lt;code&gt;&lt;a href=#webglrenderingcontext&gt;WebGLRenderingContext&lt;/a&gt;&lt;/code&gt; or null; if the returned value is null,
+      then return null and abort these steps, otherwise, set the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;context mode&lt;/a&gt; to &lt;a href=#concept-canvas-direct-webgl title=concept-canvas-direct-webgl&gt;direct-webgl&lt;/a&gt;, set the new
+      &lt;code&gt;&lt;a href=#webglrenderingcontext&gt;WebGLRenderingContext&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; to &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, and return the &lt;code&gt;&lt;a href=#webglrenderingcontext&gt;WebGLRenderingContext&lt;/a&gt;&lt;/code&gt;
+      object&Dagger; &lt;a href=#refsWEBGL&gt;[WEBGL]&lt;/a&gt;
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return the same object as was return the last time the method was invoked with this same
+      argument.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
 
-   &lt;/li&gt;
+    &lt;tr&gt;&lt;th&gt;A vendor-specific extension*
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
 
-   &lt;li&gt;&lt;p&gt;If the element has a &lt;a href=#primary-context&gt;primary context&lt;/a&gt; and that context's entry in the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt; does not
-   list &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; as a context with which it is compatible, return null and
-   abort these steps. &lt;a href=#refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/li&gt;
+    &lt;tr&gt;&lt;th&gt;An unsupported value&dagger;
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+    
+  &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;* Vendors may define experimental contexts using the syntax &lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorname&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;&lt;/code&gt;, for example,
+  &lt;code&gt;moz-3d&lt;/code&gt;.&lt;/small&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If the element does not have a &lt;a href=#primary-context&gt;primary context&lt;/a&gt;, let the element's
-   &lt;a href=#primary-context&gt;primary context&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;.&lt;/li&gt;
+  &lt;p class=tablenote&gt;&lt;small&gt;&dagger; For example, the &quot;&lt;code title=canvas-context-webgl&gt;&lt;a href=#canvas-context-webgl&gt;webgl&lt;/a&gt;&lt;/code&gt;&quot; value in the case of a user agent having exhausted the
+  graphics hardware's abilities and having no software fallback implementation.&lt;/small&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; method has already been
-   invoked on this element for the same &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, return the same object as was
-   returned that time, and abort these steps. The additional arguments are ignored.&lt;/li&gt;
+  &lt;p class=tablenote&gt;&lt;small&gt;&Dagger; The second (and subsequent) argument(s) to the method, if
+  any, are ignored in all cases except this one. See the WebGL specification for
+  details.&lt;/small&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;dfn id=getcontext-return title=getContext-return&gt;Return a new object for &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;&lt;/dfn&gt;, as defined by the specification given for &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;'s entry in the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a href=#refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-supportscontext title=dom-canvas-supportsContext&gt;&lt;code&gt;supportsContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;,
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-supportscontext title=dom-canvas-supportsContext&gt;&lt;code&gt;supportsContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when
   invoked, must return false if calling &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; on
   the same object and with the same arguments would definitely return null at this time, and true
   otherwise.&lt;/p&gt;
 
-  &lt;p&gt;New context types may be registered in the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a href=#refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-setcontext title=dom-canvas-setContext&gt;&lt;code&gt;setContext(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when invoked, must
+  run following the steps:&lt;/p&gt;
 
-  &lt;p&gt;Anyone is free to edit the WHATWG Wiki CanvasContexts page at any time to add a new context
-  type. These new context types must be specified with the following information:&lt;/p&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas
+   context mode&lt;/a&gt; is neither &lt;a href=#concept-canvas-none title=concept-canvas-none&gt;none&lt;/a&gt; nor &lt;a href=#concept-canvas-indirect title=concept-canvas-indirect&gt;indirect&lt;/a&gt;, throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and
+   abort these steps.&lt;/li&gt;
 
-  &lt;dl&gt;&lt;dt&gt;Keyword&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, then throw an
+   &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and abort these steps.&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;The value of &lt;var title=&quot;&quot;&gt;contextID&lt;/var&gt; that will return the object for the new
-   API.&lt;/dd&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/a&gt;, then run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-unbinding-steps title=concept-canvas-unbinding-steps&gt;unbinding steps&lt;/a&gt; and
+   set its &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; to &lt;a href=#concept-canvas-unbound title=concept-canvas-unbound&gt;unbound&lt;/a&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-binding-steps title=concept-canvas-binding-steps&gt;binding
+   steps&lt;/a&gt; to bind it to this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
 
-   &lt;dt&gt;Specification&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;context
+   mode&lt;/a&gt; to &lt;a href=#concept-canvas-indirect title=concept-canvas-indirect&gt;indirect&lt;/a&gt; and the &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+   mode&lt;/a&gt; to &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;A link to a formal specification of the context type's API. It could be another page on
-   the Wiki, or a link to an external page. If the type does not have a formal specification, an
-   informal description can be substituted until such time as a formal specification is
-   available.&lt;/dd&gt;
+  &lt;/ol&gt;&lt;hr&gt;&lt;/div&gt;
 
-
-   &lt;dt&gt;Compatible with&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;The list of context types that are compatible with this one (i.e. that operate on the same
-   underlying bitmap). This list must be transitive and symmetric; if one context type is defined as
-   compatible with another, then all types it is compatible with must be compatible with all types
-   the other is compatible with.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;Vendors may also define experimental contexts using the syntax &lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorname&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;&lt;/code&gt;, for example, &lt;code&gt;moz-3d&lt;/code&gt;.
-  Such contexts should be registered in the WHATWG Wiki CanvasContexts page.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;hr&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;url&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL&lt;/a&gt;&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;, ... ] )&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;url&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL&lt;/a&gt;&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;, ... ] )&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;url&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD&lt;/a&gt;&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;, ... ] )&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; for the image in the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; for the image in
+    the canvas.&lt;/p&gt;
 
-    &lt;p&gt;The first argument, if provided, controls the type of the image
-    to be returned (e.g. PNG or JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given
-    type isn't supported. The other arguments are specific to the
-    type, and control the way that the image is generated, as given in
-    the table below.&lt;/p&gt;
+    &lt;p&gt;The first argument, if provided, controls the type of the image to be returned (e.g. PNG or
+    JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given type
+    isn't supported. The other arguments are specific to the type, and control the way that the
+    image is generated, as given &lt;a href=#canvas-serialization-arguments&gt;in the table
+    below&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;When trying to use types other than &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;,
-    authors can check if the image was really returned in the
-    requested format by checking to see if the returned string starts
-    with one of the exact strings &quot;&lt;code title=&quot;&quot;&gt;data:image/png,&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;data:image/png;&lt;/code&gt;&quot;. If it does, the image is PNG,
-    and thus the requested type was not supported. (The one exception
-    to this is if the canvas has either no height or no width, in
+    &lt;p&gt;When trying to use types other than &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;, authors can check if the image
+    was really returned in the requested format by checking to see if the returned string starts
+    with one of the exact strings &quot;&lt;code title=&quot;&quot;&gt;data:image/png,&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;data:image/png;&lt;/code&gt;&quot;. If it does, the image is PNG, and thus the requested type was
+    not supported. (The one exception to this is if the canvas has either no height or no width, in
     which case the result might simply be &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot;.)&lt;/p&gt;
 
-    &lt;p&gt;The &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL()&lt;/a&gt;&lt;/code&gt;
-    method returns the data at a resolution of 96dpi. The &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt; method returns
-    it at the native canvas bitmap resolution.&lt;/p&gt;
+    &lt;p&gt;The &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL()&lt;/a&gt;&lt;/code&gt; method returns the data at a
+    resolution of 96dpi. The &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt; method
+    returns it at the native canvas bitmap resolution.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -36370,195 +36484,220 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Creates a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object representing a file
-    containing the image in the canvas, and invokes a callback with a
-    handle to that object.&lt;/p&gt;
+    &lt;p&gt;Creates a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object representing a file containing the image in the canvas,
+    and invokes a callback with a handle to that object.&lt;/p&gt;
 
-    &lt;p&gt;The second argument, if provided, controls the type of the
-    image to be returned (e.g. PNG or JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given
-    type isn't supported. The other arguments are specific to the
-    type, and control the way that the image is generated, as given in
-    the table below.&lt;/p&gt;
+    &lt;p&gt;The second argument, if provided, controls the type of the image to be returned (e.g. PNG or
+    JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given type
+    isn't supported. The other arguments are specific to the type, and control the way that the
+    image is generated, as given &lt;a href=#canvas-serialization-arguments&gt;in the table
+    below&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;The &lt;code title=dom-canvas-toBlob&gt;&lt;a href=#dom-canvas-toblob&gt;toBlob()&lt;/a&gt;&lt;/code&gt; method
-    provides the data at a resolution of 96dpi. The &lt;code title=dom-canvas-toBlobHD&gt;&lt;a href=#dom-canvas-toblobhd&gt;toBlobHD()&lt;/a&gt;&lt;/code&gt; method provides it
-    at the native canvas bitmap resolution.&lt;/p&gt;
+    &lt;p&gt;The &lt;code title=dom-canvas-toBlob&gt;&lt;a href=#dom-canvas-toblob&gt;toBlob()&lt;/a&gt;&lt;/code&gt; method provides the data at a resolution
+    of 96dpi. The &lt;code title=dom-canvas-toBlobHD&gt;&lt;a href=#dom-canvas-toblobhd&gt;toBlobHD()&lt;/a&gt;&lt;/code&gt; method provides it at the
+    native canvas bitmap resolution.&lt;/p&gt;
 
    &lt;/dd&gt;
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-canvas-todataurl title=dom-canvas-toDataURL&gt;&lt;code&gt;toDataURL()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-canvas-todataurlhd title=dom-canvas-toDataURLHD&gt;&lt;code&gt;toDataURLHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods must run the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-canvas-todataurl title=dom-canvas-toDataURL&gt;&lt;code&gt;toDataURL()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-canvas-todataurlhd title=dom-canvas-toDataURLHD&gt;&lt;code&gt;toDataURLHD()&lt;/code&gt;&lt;/dfn&gt; methods must run the following
+  steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt;
-   flag is set to false, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
-   and abort these steps.&lt;/p&gt;
+  &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap's &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag is set to false, throw a
+   &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
 
-   &lt;li&gt;&lt;p&gt;If the canvas has no pixels (i.e. either its horizontal
-   dimension or its vertical dimension is zero) then return the string
-   &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot; and abort these steps. (This is the
-   shortest &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt;
-   URL&lt;/a&gt;; it represents the empty string in a &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt; resource.)&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap has no pixels (i.e. either its horizontal
+   dimension or its vertical dimension is zero) then return the string &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot; and abort these steps. (This is the shortest &lt;a href=#data-protocol title=&quot;data
+   protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt;; it represents the empty string in a &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt; resource.)&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;file&lt;/var&gt; be &lt;a href=#a-serialization-of-the-image-as-a-file&gt;a serialization of the
-   image as a file&lt;/a&gt;, using the method's arguments (if any) as
-   the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt; method, and not
-   otherwise.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;file&lt;/var&gt; be &lt;a href=#a-serialization-of-the-bitmap-as-a-file title=&quot;a serialization of the bitmap as a file&quot;&gt;a
+   serialization of the &lt;code&gt;canvas&lt;/code&gt; element's bitmap as a file&lt;/a&gt;, using the method's
+   arguments (if any) as the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt;
+   flag set if the method is the &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt; method,
+   and not otherwise.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; representing &lt;var title=&quot;&quot;&gt;file&lt;/var&gt;. &lt;a href=#refsRFC2397&gt;[RFC2397]&lt;/a&gt;&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Return a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; representing
+   &lt;var title=&quot;&quot;&gt;file&lt;/var&gt;. &lt;a href=#refsRFC2397&gt;[RFC2397]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;!-- should we explicitly require the URL to be base64-encoded and
-   not have any parameters, to ensure the same exact URL is generated
-   in each browser? --&gt;
+   &lt;!-- should we explicitly require the URL to be base64-encoded and not have any parameters, to
+   ensure the same exact URL is generated in each browser? --&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-toblob title=dom-canvas-toBlob&gt;&lt;code&gt;toBlob()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn id=dom-canvas-toblobhd title=dom-canvas-toBlobHD&gt;&lt;code&gt;toBlobHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods must run the following steps:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-toblob title=dom-canvas-toBlob&gt;&lt;code&gt;toBlob()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-canvas-toblobhd title=dom-canvas-toBlobHD&gt;&lt;code&gt;toBlobHD()&lt;/code&gt;&lt;/dfn&gt; methods must run the following
+  steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt;
-   flag is set to false, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
-   and abort these steps.&lt;/p&gt;
+  &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap's &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag is set to false, throw a
+   &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; be the first
-   argument.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; be the first argument.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the second and
-   subsequent arguments to the method, if any.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the second and subsequent arguments to the method, if
+   any.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If the canvas has no pixels (i.e. either its horizontal
+    &lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap has no pixels (i.e. either its horizontal
     dimension or its vertical dimension is zero) then let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be null.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be a
-    &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object representing &lt;a href=#a-serialization-of-the-image-as-a-file&gt;a serialization of the
-    image as a file&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and
-    with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the
-    &lt;code title=dom-canvas-toBlobHD&gt;&lt;a href=#dom-canvas-toblobhd&gt;toBlobHD()&lt;/a&gt;&lt;/code&gt; method, and
-    not otherwise. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt; &lt;/p&gt;
+    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object representing &lt;a href=#a-serialization-of-the-bitmap-as-a-file title=&quot;a serialization of the bitmap as a file&quot;&gt;a serialization of the &lt;code&gt;canvas&lt;/code&gt;
+    element's bitmap as a file&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the &lt;code title=dom-canvas-toBlobHD&gt;&lt;a href=#dom-canvas-toblobhd&gt;toBlobHD()&lt;/a&gt;&lt;/code&gt; method, and not otherwise. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt; &lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return, but continue running these steps
-   asynchronously.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; is null, abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; is null, abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke the
-   &lt;code&gt;&lt;a href=#filecallback&gt;FileCallback&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; as its argument. The &lt;a href=#task-source&gt;task source&lt;/a&gt;
-   for this task is the &lt;dfn id=canvas-blob-serialization-task-source&gt;canvas blob serialization task
-   source&lt;/dfn&gt;. &lt;a href=#refsFILESYSTEMAPI&gt;[FILESYSTEMAPI]&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke the &lt;code&gt;&lt;a href=#filecallback&gt;FileCallback&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; as its argument. The &lt;a href=#task-source&gt;task
+   source&lt;/a&gt; for this task is the &lt;dfn id=canvas-blob-serialization-task-source&gt;canvas blob serialization task source&lt;/dfn&gt;. &lt;a href=#refsFILESYSTEMAPI&gt;[FILESYSTEMAPI]&lt;/a&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;When a user agent is to create &lt;dfn id=a-serialization-of-the-image-as-a-file&gt;a serialization of the image
-  as a file&lt;/dfn&gt;, optionally with some given &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and optionally with a &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set, it must create an image file in the
-  format given by the first value of &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;,
-  or, if there are no &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, in the PNG
-  format. &lt;a href=#refsPNG&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
+  &lt;/ol&gt;&lt;/div&gt;
+  &lt;!--REMOVE-TOPIC:DOM APIs--&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag is set, or if the canvas
-  bitmap has one pixel per coordinate space unit, then the image file
-  must have the same pixel data (before compression, if applicable) as
-  the canvas bitmap, and if the file format used supports encoding
-  resolution metadata, the resolution of the bitmap (device pixels per
-  coordinate space units being interpreted as image pixels per CSS
-  pixel) must be given as well.&lt;/p&gt;
 
-  &lt;p&gt;Otherwise, the image file's pixel data must be the canvas
-  bitmap's pixel data scaled to one image pixel per coordinate space
-  unit, and if the file format used supports encoding resolution
-  metadata, the resolution must be given as 96dpi (one image pixel per
-  CSS pixel).&lt;/p&gt;
+  &lt;!--ADD-TOPIC:Workers--&gt;
+  &lt;h5 id=proxying-canvases-to-workers&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;Proxying canvases to workers&lt;/h5&gt;
 
-  &lt;p&gt;If &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; is not empty, the first value
-  must be interpreted as a &lt;a href=#mime-type title=&quot;MIME type&quot;&gt;MIME type&lt;/a&gt;
-  giving the format to use. If the type has any parameters, it must be
-  treated as not supported.&lt;/p&gt;
+  &lt;p&gt;Since DOM nodes cannot be accessed across worker boundaries, a proxy object is needed to enable
+  workers to render to &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements in &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s.&lt;/p&gt;
 
-  &lt;p class=example&gt;For example, the value &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;
-  would mean to generate a PNG image, the value
-  &quot;&lt;code&gt;image/jpeg&lt;/code&gt;&quot; would mean to generate a JPEG image, and
-  the value &quot;&lt;code&gt;image/svg+xml&lt;/code&gt;&quot; would mean to generate an SVG
-  image (which would probably require that the implementation actually
-  keep enough information to reliably render an SVG image from the
-  canvas).&lt;/p&gt;
+  &lt;pre class=idl&gt;interface &lt;dfn id=canvasproxy&gt;CanvasProxy&lt;/dfn&gt; {
+  void &lt;a href=#dom-canvasproxy-setcontext title=dom-CanvasProxy-setContext&gt;setContext&lt;/a&gt;(&lt;a href=#renderingcontext&gt;RenderingContext&lt;/a&gt; context);
+};
+&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;&lt;/pre&gt;
 
-  &lt;p&gt;User agents must support PNG (&quot;&lt;code&gt;image/png&lt;/code&gt;&quot;). User
-  agents may support other types. If the user agent does not support
-  the requested type, it must create the file using the PNG format. &lt;a href=#refsPNG&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvasProxy&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-transferControlToProxy&gt;&lt;a href=#dom-canvas-transfercontroltoproxy&gt;transferControlToProxy&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
 
-  &lt;p&gt;User agents must &lt;a href=#converted-to-ascii-lowercase title=&quot;converted to ASCII
-  lowercase&quot;&gt;convert the provided type to ASCII lowercase&lt;/a&gt;
-  before establishing if they support that type.&lt;/p&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;For image types that do not support an alpha channel, the
-  serialized image must be the canvas image composited onto a solid
-  black background using the source-over operator.&lt;/p&gt;
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object that can be used to transfer control for this
+    canvas over to another document (e.g. an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; from another &lt;a href=#origin&gt;origin&lt;/a&gt;)
+    or to a worker.&lt;/p&gt;
 
-  &lt;p&gt;If the first argument in &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; gives a
-  type corresponding to one of the types given in the first column of
-  the following table, and the user agent supports that type, then the
-  subsequent arguments, if any, must be treated as described in the
-  second cell of that row.&lt;/p&gt;
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; methods have been used.&lt;/p&gt;
 
-  &lt;/div&gt;
+   &lt;/dd&gt;
 
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt; Type &lt;th&gt; Other arguments &lt;th&gt; Reference
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code&gt;image/jpeg&lt;/code&gt;
-     &lt;td&gt; The second argument&lt;span class=impl&gt;, if it&lt;/span&gt; is a
-     number in the range 0.0 to 1.0 inclusive&lt;span class=impl&gt;, must
-     be&lt;/span&gt; treated as the desired quality level. &lt;span class=impl&gt;If it is not a number or is outside that range, the
-     user agent must use its default value, as if the argument had
-     been omitted.&lt;/span&gt;
-     &lt;td&gt; &lt;a href=#refsJPEG&gt;[JPEG]&lt;/a&gt;
-  &lt;/table&gt;&lt;div class=impl&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvasProxy&lt;/var&gt; . &lt;code title=dom-CanvasProxy-setContext&gt;&lt;a href=#dom-canvasproxy-setcontext&gt;setContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/dt&gt;
 
-  &lt;p&gt;For the purposes of these rules, an argument is considered to be
-  a number if it is converted to an IDL double value by the rules for
-  handling arguments of type &lt;code title=&quot;&quot;&gt;any&lt;/code&gt; in the Web IDL
-  specification. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;Other arguments must be ignored and must not cause the user agent
-  to throw an exception. A future version of this specification will
-  probably define other parameters to be passed to these methods to
-  allow authors to more carefully control compression settings, image
-  metadata, etc.&lt;/p&gt;
+    &lt;p&gt;Sets the &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's rendering context to
+    the given object.&lt;/p&gt;
 
-  &lt;/div&gt;
-  &lt;!--REMOVE-TOPIC:DOM APIs--&gt;
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; has been
+    &lt;a href=#transfer-a-transferable-object title=&quot;transfer a Transferable object&quot;&gt;transfered&lt;/a&gt;.&lt;/p&gt;
 
+   &lt;/dd&gt;
 
-  &lt;div data-component=&quot;HTML Canvas 2D Context (editor: Ian Hickson)&quot;&gt;
+  &lt;/dl&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-transfercontroltoproxy title=dom-canvas-transferControlToProxy&gt;&lt;code&gt;transferControlToProxy()&lt;/code&gt;&lt;/dfn&gt;
+  method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when invoked, must run following the steps:&lt;/p&gt;
 
-  &lt;h5 id=2dcontext&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;The 2D context&lt;/h5&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas
+   context mode&lt;/a&gt; is not &lt;a href=#concept-canvas-none title=concept-canvas-none&gt;none&lt;/a&gt;, throw an
+   &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and abort these steps.&lt;/li&gt;
 
-  &lt;!-- v2: we're on v5. suggestions for subsequent versions are marked v6, v7, v8. --&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;context
+   mode&lt;/a&gt; to &lt;a href=#concept-canvas-proxied title=concept-canvas-proxied&gt;proxied&lt;/a&gt;.&lt;/li&gt;
 
-  &lt;p&gt;This specification defines the &lt;dfn id=canvas-context-2d title=canvas-context-2d&gt;&lt;code&gt;2d&lt;/code&gt;&lt;/dfn&gt; context type, whose
-  API is implemented using the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
-  interface.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Return a &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object bound to this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/li&gt;
 
-  &lt;div class=impl&gt;
+  &lt;/ol&gt;&lt;p&gt;A &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object can be &lt;a href=#concept-transferable-neutered title=concept-transferable-neutered&gt;neutered&lt;/a&gt; (like any &lt;code&gt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&lt;/code&gt; object),
+  meaning it can no longer be &lt;a href=#transfer-a-transferable-object title=&quot;transfer a Transferable object&quot;&gt;transferred&lt;/a&gt;, and
+  can be &lt;dfn id=concept-canvasproxy-disabled title=concept-CanvasProxy-disabled&gt;disabled&lt;/dfn&gt;, meaning it can no longer be bound
+  to rendering contexts. When first created, a &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object must be neither.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt;
-  method of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is to &lt;a href=#getcontext-return title=getContext-return&gt;return a new object for the &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;&lt;/a&gt; &lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;, the user agent must return a
-  new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object. Any additional
-  arguments are ignored.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; is created with a link to a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. A
+  &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object that has not been &lt;a href=#concept-canvasproxy-disabled title=concept-CanvasProxy-disabled&gt;disabled&lt;/a&gt; must have a strong reference to its canvas
+  element.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=dom-canvasproxy-setcontext title=dom-CanvasProxy-setContext&gt;&lt;code&gt;setContext(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; objects, when invoked,
+  must run following the steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object has been &lt;a href=#concept-canvasproxy-disabled title=concept-CanvasProxy-disabled&gt;disabled&lt;/a&gt;, throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and
+   abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object has not been &lt;a href=#concept-transferable-neutered title=concept-transferable-neutered&gt;neutered&lt;/a&gt;, then &lt;a href=#concept-transferable-neutered title=concept-transferable-neutered&gt;neuter&lt;/a&gt; it.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, then throw an
+   &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/a&gt;, then run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-unbinding-steps title=concept-canvas-unbinding-steps&gt;unbinding steps&lt;/a&gt; and
+   set its &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; to &lt;a href=#concept-canvas-unbound title=concept-canvas-unbound&gt;unbound&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-binding-steps title=concept-canvas-binding-steps&gt;binding
+   steps&lt;/a&gt; to bind it to this &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; to &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p id=transferCanvasProxy&gt;To &lt;a href=#transfer-a-transferable-object title=&quot;transfer a Transferable object&quot;&gt;transfer&lt;/a&gt; a
+  &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; to a new owner &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;,
+  a user agent must create a new &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object linked to the same
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element as &lt;var title=&quot;&quot;&gt;old&lt;/var&gt;, thus obtaining &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;,
+  must &lt;a href=#concept-transferable-neutered title=concept-Transferable-neutered&gt;neuter&lt;/a&gt; and &lt;a href=#concept-canvasproxy-disabled title=concept-CanvasProxy-disabled&gt;disable&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; object, and must
+  finally return &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;Here is a clock implemented on a worker. First, the main page:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;title&gt;Clock&lt;/title&gt;
+&lt;canvas&gt;&lt;/canvas&gt; &lt;!-- defaults to 300x150 --&gt;
+&lt;script&gt;
+  var canvas = document.getElementsByTagName('canvas')[0];
+  var proxy = canvas.transferControlToProxy());
+  var worker = new Worker('clock.js');
+  worker.postMessage(proxy, [proxy]);
+&lt;/script&gt;&lt;/pre&gt;
+
+   &lt;p&gt;Second, the worker:&lt;/p&gt;
+
+   &lt;pre&gt;onmessage = function (event) {
+  var context = new CanvasRenderingContext2d();
+  event.data.setContext(context); // event.data is the CanvasProxy object
+  setInterval(function () {
+    context.clearRect(0, 0, context.width, context.height);
+    context.fillText(0, 100, new Date());
+    context.commit();
+  }, 1000);
+};&lt;/pre&gt;
+
   &lt;/div&gt;
 
-  &lt;p&gt;The 2D context represents a flat Cartesian surface whose origin
-  (0,0) is at the top left corner, with the coordinate space having
-  &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; values increasing when going right, and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; values increasing when going down.&lt;/p&gt;
+  &lt;!--REMOVE-TOPIC:Workers--&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
 
+  &lt;h5 id=2dcontext&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;The 2D rendering context&lt;/h5&gt;
+
+  &lt;!-- v2: we're on v5. suggestions for subsequent versions are marked v6, v7, v8. --&gt;
+
+  &lt;pre class=idl&gt;typedef (&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or
+         &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt; or
+         &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or
+         &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; or
+         &lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;) &lt;dfn id=canvasimagesource&gt;CanvasImageSource&lt;/dfn&gt;;
+
+[&lt;a href=#dom-context-2d title=dom-context-2d&gt;Constructor&lt;/a&gt;(optional unsigned long width, unsigned long height)]
+interface &lt;dfn id=canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
+
   // back-reference to the canvas
   readonly attribute &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; &lt;a href=#dom-context-2d-canvas title=dom-context-2d-canvas&gt;canvas&lt;/a&gt;;
 
+  // canvas dimensions
+           attribute unsigned long &lt;a href=#dom-context-2d-width title=dom-context-2d-width&gt;width&lt;/a&gt;;
+           attribute unsigned long &lt;a href=#dom-context-2d-height title=dom-context-2d-height&gt;height&lt;/a&gt;;
+
+  // for contexts that aren't directly &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; to a specific canvas
+  void &lt;a href=#dom-context-2d-commit title=dom-context-2d-commit&gt;commit&lt;/a&gt;(); // push the image to the &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;
+
   // state
   void &lt;a href=#dom-context-2d-save title=dom-context-2d-save&gt;save&lt;/a&gt;(); // push state on state stack
   void &lt;a href=#dom-context-2d-restore title=dom-context-2d-restore&gt;restore&lt;/a&gt;(); // pop state stack and restore state
@@ -36604,7 +36743,7 @@
            attribute (DOMString or CanvasGradient or CanvasPattern) &lt;a href=#dom-context-2d-fillstyle title=dom-context-2d-fillStyle&gt;fillStyle&lt;/a&gt;; // (default black)
   &lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt; &lt;a href=#dom-context-2d-createlineargradient title=dom-context-2d-createLinearGradient&gt;createLinearGradient&lt;/a&gt;(double x0, double y0, double x1, double y1);
   &lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt; &lt;a href=#dom-context-2d-createradialgradient title=dom-context-2d-createRadialGradient&gt;createRadialGradient&lt;/a&gt;(double x0, double y0, double r0, double x1, double y1, double r1);
-  &lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt; &lt;a href=#dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;createPattern&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, DOMString repetition);
+  &lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt; &lt;a href=#dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;createPattern&lt;/a&gt;(&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt; image, DOMString repetition);
 &lt;!--
   // v8 we received one request from Ralf Richard G&oml;bel for a new kind of pattern: a hatch.
   // basically it would be a series of dash styles, angles, line widths, and offsets
@@ -36646,9 +36785,9 @@
   &lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt; &lt;a href=#dom-context-2d-measuretext title=dom-context-2d-measureText&gt;measureText&lt;/a&gt;(DOMString text);
 
   // drawing images
-  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, unrestricted double dx, unrestricted double dy);
-  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
-  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
+  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;(&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt; image, unrestricted double dx, unrestricted double dy);
+  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;(&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt; image, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
+  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;(&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt; image, unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
 
   // hit regions
   void &lt;a href=#dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;addHitRegion&lt;/a&gt;(&lt;a href=#hitregionoptions&gt;HitRegionOptions&lt;/a&gt; options);
@@ -36685,6 +36824,7 @@
            attribute DOMString &lt;a href=#dom-context-2d-font title=dom-context-2d-font&gt;font&lt;/a&gt;; // (default 10px sans-serif)
            attribute DOMString &lt;a href=#dom-context-2d-textalign title=dom-context-2d-textAlign&gt;textAlign&lt;/a&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
            attribute DOMString &lt;a href=#dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;textBaseline&lt;/a&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+           attribute DOMString &lt;a href=#dom-context-2d-direction title=dom-context-2d-direction&gt;direction&lt;/a&gt;; // &quot;ltr&quot;, &quot;rtl&quot;&lt;!--, &quot;auto&quot;--&gt;, &quot;inherit&quot; (default: &quot;inherit&quot;)
 };
 
 [NoInterfaceObject]
@@ -36771,24 +36911,323 @@
       methods, see <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=623437">https://bugzilla.mozilla.org/show_bug.cgi?id=623437</A>
       for an example, and its duplicates for more --&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext&lt;/a&gt;&lt;/code&gt;('2d')&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object that is permanently bound to a particular &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = new &lt;code title=dom-context-2d&gt;&lt;a href=#dom-context-2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns an unbound &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object with an implied bitmap with
+    the given dimensions in CSS pixels (300x150, if the arguments are omitted).&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if the rendering context was obtained using the
+    &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-width&gt;&lt;a href=#dom-context-2d-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-height&gt;&lt;a href=#dom-context-2d-height&gt;height&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the dimensions of the bitmap, in CSS pixels.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to update the bitmap's dimensions. If the rendering context is bound to a canvas,
+    this will also update the canvas' intrinsic dimensions.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-commit&gt;&lt;a href=#dom-context-2d-commit&gt;commit&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the rendering context is bound to a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;, display the current frame.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-canvas title=dom-context-2d-canvas&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element that the
-  context paints on.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object can be obtained in two ways: the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; method on a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element (which
+  invokes the &lt;a href=#2d-context-creation-algorithm&gt;2D context creation algorithm&lt;/a&gt;), and the &lt;code title=dom-context-2d&gt;&lt;a href=#dom-context-2d&gt;CanvasRenderingContext2D()&lt;/a&gt;&lt;/code&gt; constructor.&lt;/p&gt;
 
-  &lt;p&gt;Except where otherwise specified, for the 2D context interface,
-  &lt;strong&gt;any method call with a numeric argument whose value is
-  infinite or a NaN value must be ignored&lt;/strong&gt;.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object has a &lt;dfn id=scratch-bitmap&gt;scratch bitmap&lt;/dfn&gt; and can be bound
+  to an &lt;dfn id=output-bitmap&gt;output bitmap&lt;/dfn&gt;. These are initialized when the object is created, and can be
+  subsequently adjusted when the rendering context is &lt;a href=#concept-canvas-binding-steps title=concept-canvas-binding-steps&gt;bound&lt;/a&gt; or &lt;a href=#concept-canvas-unbinding-steps title=concept-canvas-unbinding-steps&gt;unbound&lt;/a&gt;. In some cases, these bitmaps are the same
+  underlying bitmap. In general, the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; is what scripts interact with, and
+  the &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; is what is being displayed. These bitmaps always have the same
+  dimensions.&lt;/p&gt;
 
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;p&gt;Each such bitmap has an &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag,
+  which can be set to true or false. Initially, when one of these bitmaps is created, its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag must be set to true.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+  &lt;p&gt;These bitmaps also have a &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;, which is described in a later section.
+  Initially, this list is empty. &lt;a href=#scratch-bitmap title=&quot;scratch bitmap&quot;&gt;Scratch bitmaps&lt;/a&gt; also have a
+  &lt;dfn id=list-of-pending-interface-actions&gt;list of pending interface actions&lt;/dfn&gt;, which can contain instructions to draw the user's
+  attention to a location on the bitmap, and instructions to scroll to a location on the bitmap.
+  Initially, this list is also empty.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=2d-context-creation-algorithm&gt;2D context creation algorithm&lt;/dfn&gt;, which is passed a &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; (a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element), consists of running the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Initialize its &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt; attribute to point to
+   &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; and
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; both be the same bitmap as &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap (so
+   that they are shared).&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;Set bitmap dimensions&lt;/a&gt; to the
+   numeric values of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; and
+   &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attributes.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d title=dom-context-2d&gt;&lt;code&gt;CanvasRenderingContext2D()&lt;/code&gt;&lt;/dfn&gt; constructor, when
+  invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Initialize its &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt; attribute to
+   null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; be
+   a new bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the constructor was called with arguments, let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; be the first and second arguments, respectively. Otherwise, let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; be 300 and 150, respectively.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;Set bitmap dimensions&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object have no &lt;a href=#output-bitmap&gt;output
+   bitmap&lt;/a&gt;.&lt;/li&gt;
+
+&lt;!--
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Start autocommitting the scratch bitmap&lt;/span&gt; for the new
+   &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is required to &lt;dfn id=commit-the-scratch-bitmap&gt;commit the scratch bitmap&lt;/dfn&gt; for a rendering
+  context, it must run the following steps:
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;bitmap copy&lt;/var&gt; be a copy of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt;.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin-clean flag copy&lt;/var&gt; be a copy of the rendering context's
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt;
+   flag.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;hit region list copy&lt;/var&gt; be a copy of the rendering context's
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list of pending interface actions copy&lt;/var&gt; be a copy of the rendering
+   context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Empty the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the rendering context has no &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt; be the rendering context's &lt;a href=#output-bitmap&gt;output
+   bitmap&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; from the &lt;a href=#canvas-updating-task-source&gt;canvas updating task source&lt;/a&gt; of the
+    &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;'s &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#event-loop&gt;event loop&lt;/a&gt; to perform
+    the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;bitmap
+     copy&lt;/var&gt;.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag with &lt;var title=&quot;&quot;&gt;origin-clean
+     flag copy&lt;/var&gt;.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; with &lt;var title=&quot;&quot;&gt;hit region list copy&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Follow the directions in the &lt;var title=&quot;&quot;&gt;list of pending interface actions
+     copy&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=canvas-updating-task-source&gt;canvas updating task source&lt;/dfn&gt; is just used for the algorithm above.&lt;/p&gt;
+
+&lt;!--(right now we're requiring commit())
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;start autocommitting the scratch bitmap&lt;/dfn&gt; for a rendering
+  context, it must asynchronously start running the following algorithm. This algorithm interacts
+  closely with the &lt;span&gt;event loop&lt;/span&gt; mechanism; in particular, it has a &lt;span&gt;synchronous
+  section&lt;/span&gt; (which is triggered as part of the &lt;span&gt;event loop&lt;/span&gt; algorithm). The steps in
+  that section are marked with &amp;#x231B;.&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Top&lt;/i&gt;: &lt;span&gt;Await a stable state&lt;/span&gt;. The &lt;span&gt;synchronous section&lt;/span&gt;
+   consists of the following steps. (The steps in the &lt;span&gt;synchronous section&lt;/span&gt; are marked
+   with &amp;#x231B;.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&amp;#x231B; &lt;span&gt;Commit the scratch bitmap&lt;/span&gt; for the rendering context.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;End the &lt;span&gt;synchronous section&lt;/span&gt;, continuing the remaining steps
+   asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;i&gt;top&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+--&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-commit title=dom-context-2d-commit&gt;&lt;code&gt;commit()&lt;/code&gt;&lt;/dfn&gt; method must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+   mode&lt;/a&gt; is &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;fixed&lt;/a&gt;, throw an
+   &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#commit-the-scratch-bitmap&gt;Commit the scratch bitmap&lt;/a&gt; for the rendering context.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;The &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; is only &lt;a href=#commit-the-scratch-bitmap title=&quot;commit the scratch
+  bitmap&quot;&gt;committed&lt;/a&gt; when the &lt;code title=dom-context-2d-commit&gt;&lt;a href=#dom-context-2d-commit&gt;commit()&lt;/a&gt;&lt;/code&gt; method is
+  called. (This doesn't matter for &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements in &lt;a href=#concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/a&gt; mode, since there the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt; is also the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap so every drawing operation is
+  immediately drawn.)&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;set bitmap
+  dimensions&lt;/dfn&gt; to &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;, it must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#reset-the-rendering-context-to-its-default-state&gt;Reset the rendering context to its default state&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; and its &lt;a href=#list-of-pending-interface-actions&gt;list of
+   pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Resize the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; to the new &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; and clear it to fully transparent black.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the rendering context has an &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;, and the &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt; is a different bitmap than the &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;, then resize the
+   &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; to the new &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;
+   and clear it to fully transparent black.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+    mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, then run these substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; be the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element to which the rendering
+     context's &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt; attribute was initialized.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+     bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; and the numeric value of
+     the &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; content attribute
+     differs from &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, then set &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; content attribute to the shortest possible string
+     representing &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; as a &lt;a href=#valid-non-negative-integer&gt;valid non-negative integer&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+     bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; and the numeric value of
+     the &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attribute
+     differs from &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;, then set &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attribute to the shortest possible string
+     representing &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; as a &lt;a href=#valid-non-negative-integer&gt;valid non-negative integer&lt;/a&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;div class=example&gt;
+   &lt;p&gt;Only one square appears to be drawn in the following example:&lt;/p&gt;
+   &lt;pre&gt;// canvas is a reference to a &lt;canvas&gt; element
+var context = canvas.getContext('2d');
+context.fillRect(0,0,50,50);
+canvas.setAttribute('width', '300'); // clears the canvas
+context.fillRect(0,100,50,50);
+canvas.width = canvas.width; // clears the canvas
+context.fillRect(100,0,50,50); // only this square remains&lt;/pre&gt;
+  &lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;When the user agent is to run the &lt;dfn id=concept-canvas-unbinding-steps title=concept-canvas-unbinding-steps&gt;unbinding
+  steps&lt;/dfn&gt; for a rendering context, it must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#reset-the-rendering-context-to-its-default-state&gt;Reset the rendering context to its default state&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; and its &lt;a href=#list-of-pending-interface-actions&gt;list of
+   pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; to a
+   transparent black.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag to true.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object have no &lt;a href=#output-bitmap&gt;output
+   bitmap&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When the user agent is to run the &lt;dfn id=concept-canvas-binding-steps title=concept-canvas-binding-steps&gt;binding steps&lt;/dfn&gt;
+  to bind the rendering context to the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, it
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#reset-the-rendering-context-to-its-default-state&gt;Reset the rendering context to its default state&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; and its &lt;a href=#list-of-pending-interface-actions&gt;list of
+   pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Resize the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; to
+   the dimensions of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap and clear it to fully transparent
+   black.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag to true.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; 2D rendering context represents a flat linear
+  Cartesian surface whose origin (0,0) is at the top left corner, with the coordinate space having
+  &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; values increasing when going right, and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; values
+  increasing when going down. The &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the left-most edge is equal to
+  the width of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; in CSS pixels; similarly, the
+  &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;-coordinate of the bottom-most edge is equal to the height of the rendering
+  context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; in CSS pixels.&lt;/p&gt;
+
+  &lt;p&gt;The size of the coordinate space does not necessarily represent the size of the actual bitmaps
+  that the user agent will use internally or during rendering. On high-definition displays, for
+  instance, the user agent may internally use bitmaps with two device pixels per unit in the
+  coordinate space, so that the rendering remains at high quality throughout. Anti-aliasing can
+  similarly be implemented using over-sampling with bitmaps of a higher resolution than the final
+  image on the display.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-canvas title=dom-context-2d-canvas&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to when the object was created.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-width title=dom-context-2d-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the width of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, in CSS pixels. On
+  setting, it must &lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;set bitmap dimensions&lt;/a&gt;
+  to the new value and the current height of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; in
+  CSS pixels, respectively.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-height title=dom-context-2d-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the height of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, in CSS pixels. On
+  setting, it must &lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;set bitmap dimensions&lt;/a&gt;
+  to the current width of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; in CSS pixels and the
+  new value, respectively.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;Except where otherwise specified, for the 2D context interface, &lt;strong&gt;any method call with a
+  numeric argument whose value is infinite or a NaN value must be ignored&lt;/strong&gt;.&lt;/p&gt;
+
   &lt;!--
    Philip Taylor wrote:
    &gt; My experience with some 3d canvas code is that infinities come up in
@@ -36801,94 +37240,84 @@
    &gt; exceptions when passing in non-finite arguments.
   --&gt;
 
-  &lt;p&gt;Whenever the CSS value &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; is used
-  as a color in this API, the &quot;computed value of the 'color' property&quot;
-  for the purposes of determining the computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is the computed value of the
-  'color' property on the element in question at the time that the
-  color is specified (e.g. when the appropriate attribute is set, or
-  when the method is called; not when the color is rendered or
-  otherwise used). If the computed value of the 'color' property is
-  undefined for a particular case (e.g. because the element is not
-  &lt;a href=#in-a-document&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the &quot;computed value
-  of the 'color' property&quot; for the purposes of determining the
-  computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is
-  fully opaque black. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Whenever the CSS value &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; is used as a color in the
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; API, the &quot;computed value of the 'color' property&quot; for the
+  purposes of determining the computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is
+  the value described by the appropriate entry in the following list:&lt;/p&gt;
 
-  &lt;p&gt;In the case of &lt;code title=dom-canvasgradient-addColorStop&gt;&lt;a href=#dom-canvasgradient-addcolorstop&gt;addColorStop()&lt;/a&gt;&lt;/code&gt; on
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;, the &quot;computed value of the 'color'
-  property&quot; for the purposes of determining the computed value of the
-  &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is always fully opaque
-  black (there is no associated element). &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;dl&gt;&lt;dt&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+   mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; and the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;&lt;/dt&gt;
 
-  &lt;p class=note&gt;This is because &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; objects
-  are &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;-neutral &mdash; a
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object created by one
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; can be used by another, and there is therefore
-  no way to know which is the &quot;element in question&quot; at the time that
-  the color is specified.&lt;/p&gt;
+   &lt;dd&gt;&lt;p&gt;The &quot;computed value of the 'color' property&quot; for the purposes of determining the computed
+   value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is the computed value of the 'color'
+   property on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the color is specified (e.g. when
+   the appropriate attribute is set, or when the method is called; not when the color is rendered or
+   otherwise used). &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/dd&gt;
 
-  &lt;p class=note&gt;Similar concerns exist with font-related properties;
-  the rules for those are described in detail in the relevant section
-  below.&lt;/p&gt;
+   &lt;dt&gt;In all other cases&lt;/dt&gt;
 
-  &lt;/div&gt;
+   &lt;dd&gt;&lt;p&gt;The &quot;computed value of the 'color' property&quot; for the purposes of determining the computed
+   value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is fully opaque black. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/dd&gt;
 
+  &lt;/dl&gt;&lt;p&gt;In the case of &lt;code title=dom-canvasgradient-addColorStop&gt;&lt;a href=#dom-canvasgradient-addcolorstop&gt;addColorStop()&lt;/a&gt;&lt;/code&gt; on
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;, the &quot;computed value of the 'color' property&quot; for the purposes of
+  determining the computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is always fully
+  opaque black (there is no associated element). &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;h6 id=resolution&gt;&lt;span class=secno&gt;4.8.11.1.1 &lt;/span&gt;Resolution&lt;/h6&gt;
+  &lt;p class=note&gt;This is because &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; objects are
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;-neutral &mdash; a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object created by one
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; can be used by another, and there is therefore no way to know which is the
+  &quot;element in question&quot; at the time that the color is specified.&lt;/p&gt;
 
-  &lt;p&gt;The user agent may use a bitmap of any square resolution as the
-  backing store for a canvas that uses the 2D context. Once a canvas
-  has a bitmap, that canvas must keep its resolution for its
-  lifetime.&lt;/p&gt;
+  &lt;p class=note&gt;Similar concerns exist with font-related properties; the rules for those are
+  described in detail in the relevant section below.&lt;/p&gt;
 
-  &lt;p class=note&gt;In general, user agents are encouraged to use a
-  resolution equal to the screen resolution. Ideally, the number of
-  device pixels per CSS pixel would be a multiple of two. Several
-  factors can affect the screen resolution: most prominently the
-  actual display resolution, but also important is the current zoom
-  level.&lt;/p&gt;
+  &lt;/div&gt;
 
-  &lt;p&gt;All the bitmaps created during a single &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; for canvases that use 2D contexts
-  must have the same resolution.
-  &lt;a class=fingerprint href=#fingerprint&gt;&lt;img alt=&quot;(This is a fingerprinting vector.)&quot; src=<A HREF="http://images.whatwg.org/fingerprint.png">http://images.whatwg.org/fingerprint.png</A>&gt;&lt;/a&gt;
-  &lt;/p&gt;
 
-  &lt;pre class=idl&gt;partial interface &lt;a href=#screen&gt;Screen&lt;/a&gt; {
-  readonly attribute double &lt;a href=#dom-screen-canvasresolution title=dom-screen-canvasResolution&gt;canvasResolution&lt;/a&gt;;
-};&lt;/pre&gt;
+  &lt;h6 id=implementation-notes&gt;&lt;span class=secno&gt;4.8.11.2.1 &lt;/span&gt;Implementation notes&lt;/h6&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;window&lt;/var&gt; . &lt;code title=dom-Window-screen&gt;screen&lt;/code&gt; . &lt;code title=dom-screen-canvasResolution&gt;&lt;a href=#dom-screen-canvasresolution&gt;canvasResolution&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Although the way the specification is written it might sound like an implementation needs to
+  track up to four bitmaps per canvas or rendering context &mdash; one &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;,
+  one &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; for the rendering context, one bitmap for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;,
+  and one bitmap for the actually currently rendered image &mdash; user agents can in fact generally
+  optimise this to only one or two.&lt;/p&gt;
 
-    &lt;p&gt;Returns the resolution that has been, or will be, used for bitmaps during this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, when it isn't the same bitmap as the &lt;a href=#output-bitmap&gt;output
+  bitmap&lt;/a&gt;, is only directly observable if it is read, and therefore implementations can,
+  instead of updating this bitmap, merely remember the sequence of drawing operations that have been
+  applied to it until such time as the bitmap's actual data is needed (for example because of a call
+  to &lt;code title=dom-context-2d-commit&gt;&lt;a href=#dom-context-2d-commit&gt;commit()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt;, or the &lt;code&gt;ImageBitmap()&lt;/code&gt;
+  constructor). In many cases, this will be more memory efficient.&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;p&gt;The bitmap of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is the one bitmap that's pretty much always going
+  to be needed in practice. The &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; of a rendering context, when it has one,
+  is always just an alias to a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap.&lt;/p&gt;
 
-  &lt;/dl&gt;&lt;div class=impl&gt;
+  &lt;p&gt;Additional bitmaps are sometimes needed, e.g. to enable fast drawing when the canvas is being
+  painted at a different size than its intrinsic size, or to enable double buffering so that the
+  rendering commands from the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; can be applied without the rendering being
+  updated midway.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-screen-canvasresolution title=dom-screen-canvasResolution&gt;&lt;code&gt;canvasResolution&lt;/code&gt;&lt;/dfn&gt;
-  attribute of the &lt;code&gt;&lt;a href=#screen&gt;Screen&lt;/a&gt;&lt;/code&gt; object must return the
-  resolution, in image pixels per coordinate space units, that any
-  canvas bitmaps created during this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; will use (or have used). &lt;a href=#refsCSSOMVIEW&gt;[CSSOMVIEW]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;/div&gt;
 
 
+  &lt;h6 id=the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.2.2 &lt;/span&gt;The canvas state&lt;/h6&gt;
 
-  &lt;h6 id=the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.1.2 &lt;/span&gt;The canvas state&lt;/h6&gt;
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; rendering context maintains a stack of drawing
+  states. &lt;dfn id=drawing-state title=&quot;drawing state&quot;&gt;Drawing states&lt;/dfn&gt; consist of:&lt;/p&gt;
 
-  &lt;p&gt;Each context maintains a stack of drawing states. &lt;dfn id=drawing-state title=&quot;drawing state&quot;&gt;Drawing states&lt;/dfn&gt; consist of:&lt;/p&gt;
-
   &lt;ul class=brief&gt;&lt;li&gt;The current &lt;a href=#transformations title=dom-context-2d-transformation&gt;transformation matrix&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;The current &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;The current values of the following attributes: &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineDashOffset&gt;&lt;a href=#dom-context-2d-linedashoffset&gt;lineDashOffset&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d
 -shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+   &lt;li&gt;The current values of the following attributes: &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineDashOffset&gt;&lt;a href=#dom-context-2d-linedashoffset&gt;lineDashOffset&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d
 -shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
    &lt;li&gt;The current &lt;a href=#dash-list&gt;dash list&lt;/a&gt;.&lt;/li&gt;
-  &lt;/ul&gt;&lt;p class=note&gt;The &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; and the
-  current bitmap are not part of the drawing state. The &lt;a href=#current-default-path&gt;current
-  default path&lt;/a&gt; is persistent, and can only be reset using the
-  &lt;code title=dom-context-2d-beginPath&gt;&lt;a href=#dom-context-2d-beginpath&gt;beginPath()&lt;/a&gt;&lt;/code&gt; method.
-  The current bitmap is a property of the canvas, not the context.&lt;/p&gt;
+  &lt;/ul&gt;&lt;p class=note&gt;The &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; and the rendering context's bitmaps are not
+  part of the drawing state. The &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; is persistent, and can only be
+  reset using the &lt;code title=dom-context-2d-beginPath&gt;&lt;a href=#dom-context-2d-beginpath&gt;beginPath()&lt;/a&gt;&lt;/code&gt; method. The bitmaps
+  depend on whether and how the rendering context is bound to a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-save&gt;&lt;a href=#dom-context-2d-save&gt;save&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
 
@@ -36908,15 +37337,17 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-save title=dom-context-2d-save&gt;&lt;code&gt;save()&lt;/code&gt;&lt;/dfn&gt;
-  method must push a copy of the current drawing state onto the
-  drawing state stack.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-save title=dom-context-2d-save&gt;&lt;code&gt;save()&lt;/code&gt;&lt;/dfn&gt; method must push a copy of the
+  current drawing state onto the drawing state stack.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-restore title=dom-context-2d-restore&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method
-  must pop the top entry in the drawing state stack, and reset the
-  drawing state it describes. If there is no saved state, the method
-  must do nothing.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-restore title=dom-context-2d-restore&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method must pop the top
+  entry in the drawing state stack, and reset the drawing state it describes. If there is no saved
+  state, the method must do nothing.&lt;/p&gt;
 
+  &lt;p&gt;When the user agent is to &lt;dfn id=reset-the-rendering-context-to-its-default-state&gt;reset the rendering context to its default state&lt;/dfn&gt;, it must
+  clear the drawing state stack and everything that &lt;a href=#drawing-state&gt;drawing state&lt;/a&gt; consists of to
+  initial values.&lt;/p&gt;
+
   &lt;!-- v7
 idea from Mihai:
 &gt; 5. Drawing states should be saveable with IDs, and for easier restoring.
@@ -36938,7 +37369,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=drawingstyle-objects&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;&lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
+  &lt;h6 id=drawingstyle-objects&gt;&lt;span class=secno&gt;4.8.11.2.3 &lt;/span&gt;&lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
 
   &lt;p&gt;All the line styles (line width, caps, joins, and dash patterns)
   and text styles (fonts) described in the next two sections apply to
@@ -36960,23 +37391,22 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;Each &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object has a &lt;dfn id=styles-scope-node&gt;styles scope
-  node&lt;/dfn&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object can have a &lt;dfn id=styles-scope-object&gt;styles scope object&lt;/dfn&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-drawingstyle title=dom-DrawingStyle&gt;&lt;code&gt;DrawingStyle()&lt;/code&gt;&lt;/dfn&gt;
-  constructor, when invoked, must return a newly created
-  &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object. If the constructor was passed an
-  argument, then the &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#styles-scope-node&gt;styles
-  scope node&lt;/a&gt; is that element. Otherwise, the object's
-  &lt;a href=#styles-scope-node&gt;styles scope node&lt;/a&gt; is the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object
-  of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
-  interface object of the invoked constructor is found.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-drawingstyle title=dom-DrawingStyle&gt;&lt;code&gt;DrawingStyle()&lt;/code&gt;&lt;/dfn&gt; constructor, when invoked,
+  must return a newly created &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object. If the constructor was passed an
+  argument, then the &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#styles-scope-object&gt;styles scope object&lt;/a&gt; is that
+  element. Otherwise, if the &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt; is a &lt;a href=#document-environment&gt;document
+  environment&lt;/a&gt;, the object's &lt;a href=#styles-scope-object&gt;styles scope object&lt;/a&gt; is the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
+  object of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of the
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the interface object of the invoked constructor is found.
+  Otherwise, the &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt; is a &lt;a href=#worker-environment&gt;worker environment&lt;/a&gt;,
+  and the &lt;a href=#styles-scope-object&gt;styles scope object&lt;/a&gt; is the worker.&lt;/p&gt;
 
   &lt;/div&gt;
 
 
-  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Line styles&lt;/h6&gt;
+  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.2.4 &lt;/span&gt;Line styles&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;styles&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
@@ -37458,7 +37888,7 @@
 hairline width with transform. ack Shaun Morris.  --&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=text-styles&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Text styles&lt;/h6&gt;
+  &lt;h6 id=text-styles&gt;&lt;span class=secno&gt;4.8.11.2.5 &lt;/span&gt;Text styles&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;styles&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
@@ -37483,9 +37913,8 @@
 
     &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the alignment. The possible values are
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the alignment. The possible values are and their meanings are given
+    below. Other values are ignored. The default is &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -37496,21 +37925,37 @@
 
     &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the baseline alignment. The possible
-    values and their meanings are given below. Other values are
-    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the baseline alignment. The possible values and their meanings are
+    given below. Other values are ignored. The default is &lt;code title=dom-concept-2d-textAlign-alphabetic&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;styles&lt;/var&gt; . &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current directionality.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the directionality. The possible values and their meanings are given
+    below. Other values are ignored. The default is &lt;code title=dom-concept-2d-textAlign-inherit&gt;inherit&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object. Such
-  objects also have a &lt;dfn id=font-style-source-node&gt;font style source node&lt;/dfn&gt;. For
-  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects, this is the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. For &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; objects,
-  it's the &lt;a href=#styles-scope-node&gt;styles scope node&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface have attributes (defined
+  in this section) that control how text is laid out (rasterized or outlined) by the object. Such
+  objects can also have a &lt;dfn id=font-style-source-object&gt;font style source object&lt;/dfn&gt;. For
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects whose &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, this is their &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element; for other
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects, if the &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt;
+  is a &lt;a href=#document-environment&gt;document environment&lt;/a&gt;, the object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; is the
+  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the interface object of the
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object is found; otherwise the &lt;a href=#javascript-global-environment&gt;JavaScript global
+  environment&lt;/a&gt; is a &lt;a href=#worker-environment&gt;worker environment&lt;/a&gt; and the &lt;a href=#font-style-source-object&gt;font style source
+  object&lt;/a&gt; is the worker. For &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; objects, it's the &lt;a href=#styles-scope-object&gt;styles scope
+  object&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
@@ -37524,15 +37969,13 @@
   'initial'), then it must be ignored, without assigning a new font
   value. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the &lt;a href=#font-style-source-node&gt;font
-  style source node&lt;/a&gt;'s stylesheets when the font is to be used;
-  any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; that are
-  visible to that element must therefore be available once they are
-  loaded. (If a reference font is used before it is fully loaded, or
-  if the &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt; does not have that font
-  in scope at the time the font is to be used, then it must be treated
-  as if it was an unknown font, falling back to another as described
-  by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Font names must be interpreted in the context of the &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; when
+  the font is to be used; any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; or loaded using
+  the &lt;code&gt;&lt;a href=#fontloader&gt;FontLoader&lt;/a&gt;&lt;/code&gt; that are visible to the &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; must
+  therefore be available once they are loaded. If a font is used before it is fully loaded, or if
+  the &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; does not have that font in scope at the time the font is
+  to be used, then it must be treated as if it was an unknown font, falling back to another as
+  described by the relevant CSS specifications. &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
@@ -37557,52 +38000,61 @@
 
   &lt;/div&gt;
 
-  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt;
-  interface is created, the font of the context must be set to 10px
-  sans-serif. When the 'font-size' component is set to lengths using
-  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
-  keywords, these must be interpreted relative to the computed value
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the
+  font of the context must be set to 10px sans-serif. When the 'font-size' component is set to
+  lengths using percentages, 'em' or 'ex' units, or the 'larger' or 'smaller' keywords, these must
+  be interpreted relative to the computed value of the 'font-size' property of the &lt;a href=#font-style-source-object&gt;font style
+  source object&lt;/a&gt; at the time that the attribute is set, if it is an element. When the
+  'font-weight' component is set to the relative values 'bolder' and 'lighter', these must be
+  interpreted relative to the computed value of the 'font-weight' property of the &lt;a href=#font-style-source-object&gt;font style
+  source object&lt;/a&gt; at the time that the attribute is set, if it is an element. If the computed
+  values are undefined for a particular case (e.g. because the &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt;
+  is not an element or is not &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;), then the relative keywords must be
+  interpreted relative to the normal-weight 10px sans-serif default.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code title=dom-concept-2d-textAlign-start&gt;&lt;a href=#dom-concept-2d-textalign-start&gt;start&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-concept-2d-textAlign-end&gt;&lt;a href=#dom-concept-2d-textalign-end&gt;end&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-concept-2d-textAlign-left&gt;&lt;a href=#dom-concept-2d-textalign-left&gt;left&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-concept-2d-textAlign-right&gt;&lt;a href=#dom-concept-2d-textalign-right&gt;right&lt;/a&gt;&lt;/code&gt;, or &lt;code title=dom-concept-2d-textAlign-center&gt;&lt;a href=#dom-concept-2d-textalign-center&gt;center&lt;/a&gt;&lt;/code&gt;, then the value must be changed to the new
+  value. Otherwise, the new value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must initially have the value &lt;code title=dom-concept-2d-textAlign-start&gt;&lt;a href=#dom-concept-2d-textalign-start&gt;start&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-  of the 'font-size' property of the &lt;a href=#font-style-source-node&gt;font style source
-  node&lt;/a&gt; at the time that the attribute is set, if that is an
-  element. When the 'font-weight' component is set to the relative
-  values 'bolder' and 'lighter', these must be interpreted relative to
-  the computed value of the 'font-weight' property of the &lt;a href=#font-style-source-node&gt;font
-  style source node&lt;/a&gt; at the time that the attribute is set, if
-  that is an element. If the computed values are undefined for a
-  particular case (e.g. because the &lt;a href=#font-style-source-node&gt;font style source
-  node&lt;/a&gt; is not an element or is not &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
-  interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;, or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;, then the value must be changed to the
+  new value. Otherwise, the new value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute must initially have the value
+  &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on getting, must return the current value. On setting, if
-  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
-  value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the object implementing the
-  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
-  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-direction title=dom-context-2d-direction&gt;&lt;code&gt;direction&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code title=dom-context-2d-direction-ltr&gt;ltr&lt;/code&gt;, &lt;code title=dom-context-2d-direction-rtl&gt;rtl&lt;/code&gt;, &lt;!--&lt;code
+  title=&quot;dom-context-2d-direction-auto&quot;&gt;auto&lt;/code&gt;,--&gt; or or &lt;code title=dom-context-2d-direction-inherit&gt;inherit&lt;/code&gt;, then the value must be changed to the new
+  value. Otherwise, the new value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; attribute must initially have the value &lt;code title=dom-context-2d-direction-inherit&gt;inherit&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute, on getting, must return the current value. On
-  setting, if the value is one of &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;,
-  or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;,
-  then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the object implementing the
-  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
-  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;p&gt;The &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
+  &lt;p&gt;The &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute's allowed keywords are
+  as follows:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-start title=dom-concept-2d-textAlign-start&gt;&lt;code&gt;start&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the start edge of the text (left side in left-to-right text, right side in
+   right-to-left text).&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-end title=dom-concept-2d-textAlign-end&gt;&lt;code&gt;end&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the end edge of the text (right side in left-to-right text, left side in
+   right-to-left text).&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-left title=dom-concept-2d-textAlign-left&gt;&lt;code&gt;left&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the left.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-right title=dom-concept-2d-textAlign-right&gt;&lt;code&gt;right&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the right.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-center title=dom-concept-2d-textAlign-center&gt;&lt;code&gt;center&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the center.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;The &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
   attribute's allowed keywords correspond to alignment points in the
   font:&lt;/p&gt;
 
-  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
-  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
   &lt;p&gt;&lt;img alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &#2310; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &Aacute;, &yuml;, f, and &Omega; are anchored, the ideographic baseline is where glyphs like &#31169; and &#36948; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot; height=300 src=<A HREF="http://images.whatwg.org/baselines.png">http://images.whatwg.org/baselines.png</A> width=738&gt;&lt;/p&gt;
 
   &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
@@ -37625,15 +38077,34 @@
    &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
    &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=text-preparation-algorithm&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes
-  as input a string &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, a
-  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;,
-  and an optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an
-  array of glyph shapes, each positioned on a common coordinate space,
-  and a &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
-  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i title=&quot;&quot;&gt;center&lt;/i&gt;. (Most callers of this
-  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;.)&lt;/p&gt;
+  &lt;/dl&gt;&lt;p&gt;The &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute's allowed keywords are
+  as follows:&lt;/p&gt;
 
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-concept-2d-direction-ltr title=dom-concept-2d-direction-ltr&gt;&lt;code&gt;ltr&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Treat input to the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt; as left-to-right text.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-direction-rtl title=dom-concept-2d-direction-rtl&gt;&lt;code&gt;rtl&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Treat input to the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt; as right-to-left text.&lt;/dd&gt;
+
+&lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-direction-auto&quot;&gt;&lt;code&gt;auto&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Determine the direction from the input to the &lt;span&gt;text preparation algorithm&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-direction-inherit title=dom-concept-2d-direction-inherit&gt;&lt;code&gt;inherit&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Default to the directionality of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element or &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
+   as appropriate.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=text-preparation-algorithm&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes as input a string &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, a &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and an
+  optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an array of glyph shapes, each positioned
+  on a common coordinate space, a &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
+  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i title=&quot;&quot;&gt;center&lt;/i&gt;, and an inline box. (Most callers of this
+  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; and the inline box.)&lt;/p&gt;
+
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided but is less
    than or equal to zero, return an empty array.&lt;/li&gt;
 
@@ -37648,25 +38119,37 @@
     &lt;p&gt;Apply the appropriate step from the following list to determine
     the value of &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;:&lt;/p&gt;
 
-    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
-     source node&lt;/a&gt; is an element&lt;/dt&gt;
+    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; attribute has the value &quot;&lt;code title=dom-context-2d-direction-ltr&gt;ltr&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;a href=#concept-ltr title=concept-ltr&gt;ltr&lt;/a&gt;'.&lt;/dd&gt;
 
-     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the
-     directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
-     &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt;.&lt;/dd&gt;
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; attribute has the value &quot;&lt;code title=dom-context-2d-direction-rtl&gt;rtl&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;a href=#concept-rtl title=concept-rtl&gt;rtl&lt;/a&gt;'.&lt;/dd&gt;
 
-     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
-     source node&lt;/a&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that
-     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has a root element child&lt;/dt&gt;
+&lt;!--
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code
+     title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt; attribute has the value &quot;&lt;code
+     title=&quot;dom-context-2d-direction-auto&quot;&gt;auto&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;
+      Find the first character in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; of bidirectional character type L, AL, or
+      R, if any. If such a character is found and it is of bidirectional character type AL or R,
+      then let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-rtl&quot;&gt;rtl&lt;/span&gt;'; otherwise,
+      let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-rtl&quot;&gt;rtl&lt;/span&gt;'. &lt;a
+      href=&quot;#refsBIDI&quot;&gt;[BIDI]&lt;/a&gt;
+     &lt;/dd&gt;
+--&gt;
 
-     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the
-     directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
-     &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt;'s root element child.&lt;/dd&gt;
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; 
+     is an element&lt;/dt&gt;
 
-     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
-     source node&lt;/a&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that
-     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has no root element child&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt;.&lt;/dd&gt;
 
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; 
+     is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has a root element child&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt;'s root element child.&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
      &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;a href=#concept-ltr title=concept-ltr&gt;ltr&lt;/a&gt;'.&lt;/dd&gt;
 
     &lt;/dl&gt;&lt;/li&gt;
@@ -37700,14 +38183,14 @@
     &lt;p&gt;Horizontal position:&lt;/p&gt;
 
     &lt;dl&gt;&lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=dom-concept-2d-textAlign-left&gt;&lt;a href=#dom-concept-2d-textalign-left&gt;left&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=dom-concept-2d-textAlign-start&gt;&lt;a href=#dom-concept-2d-textalign-start&gt;start&lt;/a&gt;&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'ltr'&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=dom-concept-2d-textAlign-end&gt;&lt;a href=#dom-concept-2d-textalign-end&gt;end&lt;/a&gt;&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'rtl'&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
@@ -37715,14 +38198,14 @@
 
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=dom-concept-2d-textAlign-right&gt;&lt;a href=#dom-concept-2d-textalign-right&gt;right&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=dom-concept-2d-textAlign-end&gt;&lt;a href=#dom-concept-2d-textalign-end&gt;end&lt;/a&gt;&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'ltr'&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=dom-concept-2d-textAlign-start&gt;&lt;a href=#dom-concept-2d-textalign-start&gt;start&lt;/a&gt;&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'rtl'&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
@@ -37730,7 +38213,7 @@
 
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=dom-concept-2d-textAlign-center&gt;&lt;a href=#dom-concept-2d-textalign-center&gt;center&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
      position be half way between the left and right edges of the
@@ -37793,11 +38276,10 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, and, for callers that
-   need it, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; as the alignment
-   value.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;, and the inline
+   box.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Building paths&lt;/h6&gt;
+  &lt;/ol&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.2.6 &lt;/span&gt;Building paths&lt;/h6&gt;
 
   &lt;p&gt;Each object implementing the &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
   interface has a &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;. A &lt;dfn id=concept-path title=concept-path&gt;path&lt;/dfn&gt; has a list of zero or more subpaths.
@@ -38372,7 +38854,7 @@
 
 
 
-  &lt;h6 id=path-objects&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
+  &lt;h6 id=path-objects&gt;&lt;span class=secno&gt;4.8.11.2.7 &lt;/span&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
 
   &lt;p&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects can be used to declare paths that are
   then later used on &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects. In
@@ -38671,9 +39153,8 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
+  &lt;h6 id=transformations&gt;&lt;span class=secno&gt;4.8.11.2.8 &lt;/span&gt;&lt;dfn title=dom-context-2d-transformation&gt;Transformations&lt;/dfn&gt;&lt;/h6&gt;
 
-  &lt;h6 id=transformations&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;&lt;dfn title=dom-context-2d-transformation&gt;Transformations&lt;/dfn&gt;&lt;/h6&gt;
-
   &lt;p&gt;Each &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object has a
   &lt;i&gt;current transformation matrix&lt;/i&gt;, as well as methods (described
   in this section) to manipulate it. When a
@@ -38829,9 +39310,82 @@
 
 
 
+  &lt;h6 id=image-sources-for-2d-rendering-contexts&gt;&lt;span class=secno&gt;4.8.11.2.9 &lt;/span&gt;Image sources for 2D rendering contexts&lt;/h6&gt;
 
-  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+  &lt;p&gt;Several methods in the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; API take the union type
+  &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; as an argument.&lt;/p&gt;
 
+  &lt;p&gt;This union type allows objects implementing any of the following interfaces to be used as image
+  sources:&lt;/p&gt;
+
+  &lt;ul&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; (&lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; (&lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; (&lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;BitmapImage&lt;/code&gt;&lt;/li&gt;
+
+  &lt;!-- v3: supporting ImageData object might make sense (when resizing as well as filtering) - ack Charles Pritchard --&gt;
+
+  &lt;/ul&gt;&lt;p&gt;When a user agent is required to &lt;dfn id=check-the-usability-of-the-image-argument&gt;check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+  argument&lt;/dfn&gt;, where &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object, the
+  user agent must run these steps, which return either &lt;i&gt;good&lt;/i&gt;, &lt;i&gt;bad&lt;/i&gt;, or
+  &lt;i&gt;aborted&lt;/i&gt;:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that
+   is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+   argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then return &lt;i&gt;bad&lt;/i&gt; and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with
+   either a horizontal dimension or a vertical dimension equal to zero, then the implementation
+   throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and return &lt;i&gt;aborted&lt;/i&gt;.&lt;/p&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, the
+  element's image must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;Specifically, when a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an animated image in an
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, the user agent must use the poster frame of the animation, or, if
+  there is no poster frame, the first frame of the animation, when rendering the image for
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; APIs.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then
+  the frame at the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; when the method with the argument is
+  invoked must be used as the source image when rendering the image for
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; APIs, and the source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt; of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;
+  (i.e. after any aspect-ratio correction has been applied).&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, the
+  element's bitmap must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;, the
+  object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an element that is &lt;a href=#being-rendered&gt;being
+  rendered&lt;/a&gt; and that element has been resized, the original image data of the source image
+  must be used, not the image as it is rendered (e.g. &lt;code title=attr-dim-width&gt;&lt;a href=#attr-dim-width&gt;width&lt;/a&gt;&lt;/code&gt; and
+  &lt;code title=attr-dim-height&gt;&lt;a href=#attr-dim-height&gt;height&lt;/a&gt;&lt;/code&gt; attributes on the source element have no effect on how
+  the object is interpreted when rendering the image for &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
+  APIs).&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents a &lt;code&gt;BitmapImage&lt;/code&gt;, the
+  object's bitmap image data must be used as the source image.&lt;/p&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;p&gt;&lt;dfn id=the-image-argument-is-not-origin-clean&gt;The &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/dfn&gt; if it is an
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#origin&gt;origin&lt;/a&gt; is not
+  the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;,
+  or if it is an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; whose bitmap's &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag is false, or if it is a
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag is false.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+
+
+  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.2.10 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -38895,15 +39449,18 @@
   attribute represents the color or style to use for the lines around
   the shapes.&lt;/p&gt;
 
-  &lt;p&gt;Both attributes can be either strings,
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On
-  setting, strings must be &lt;a href=#parsed-as-a-css-color-value title=&quot;parsed as a CSS &lt;color&gt;
-  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/a&gt; and the color
-  assigned, and &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and
-  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned themselves. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
-  cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt; value&lt;/a&gt;, then it
-  must be ignored, and the attribute must retain its previous
-  value.&lt;/p&gt;
+  &lt;p&gt;Both attributes can be either strings, &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or
+  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On setting, strings must be &lt;a href=#parsed-as-a-css-color-value title=&quot;parsed as a CSS
+  &lt;color&gt; value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/a&gt; and the color assigned, and
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned themselves. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS
+  &lt;color&gt; value&lt;/a&gt;, then it must be ignored, and the attribute must retain its previous
+  value.
+&lt;!--ADD-TOPIC:Security--&gt;
+  If the new value is a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that is marked as &lt;a href=#concept-canvas-pattern-not-origin-clean title=concept-canvas-pattern-not-origin-clean&gt;not origin-clean&lt;/a&gt;, then the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag must be set to
+  false.
+&lt;!--REMOVE-TOPIC:Security--&gt;
+  &lt;/p&gt;
 
   &lt;p&gt;When set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; or
   &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object, the assignment is
@@ -38939,9 +39496,8 @@
   &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; attributes
   must initially have the string value &lt;code title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the value is a color, it must not be affected by the
-  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
-  singular matrices don't affect solid color fillStyles --&gt;
+  &lt;p&gt;When the value is a color, it must not be affected by the transformation matrix when used to
+  draw on bitmaps.&lt;/p&gt; &lt;!-- so singular matrices don't affect solid color fillStyles --&gt;
 
   &lt;/div&gt;
 
@@ -39064,7 +39620,7 @@
    starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
    positive infinity and ending with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
    circumference of the circle with radius &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
-   canvas that have not yet been painted on by earlier circles in this
+   bitmap that have not yet been painted on by earlier circles in this
    step for this rendering of the gradient.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p class=note&gt;This effectively creates a cone, touched by the two
@@ -39114,51 +39670,45 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;To create objects of this type, the &lt;dfn id=dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method is used. The first argument gives the image to use as the
-  pattern (either an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;,
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object). Modifying this image after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
-  must not affect the pattern. The second argument must be a string
-  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
-  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
-  is given, then the user agent must throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
-  exception. User agents must recognize the four values described above
-  exactly (e.g. they must not do case folding). Except as specified
-  below, the method must return a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object
-  suitably initialized.&lt;/p&gt;
+  &lt;p&gt;To create objects of this type, the &lt;dfn id=dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is used. When the method is invoked, the user agent
+  must run the following steps:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
-  paragraph --&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; be the first argument and &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; be
+   the second argument.&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
-  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
-  equivalent paragraph --&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#check-the-usability-of-the-image-argument&gt;Check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument&lt;/a&gt;. If this
+   returns &lt;i&gt;aborted&lt;/i&gt;, then an exception has been thrown and the method doesn't return anything;
+   abort these steps. If it returns &lt;i&gt;bad&lt;/i&gt;, then return null and abort these steps. Otherwise it
+   returns &lt;i&gt;good&lt;/i&gt;; continue with these steps.&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; is the empty string, let it be &quot;&lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;.&lt;/p&gt;
 
-  &lt;p&gt;Patterns have a transformation matrix, which controls how the
-  pattern is used when it is painted. Initially, a pattern's
-  transformation matrix must be the identity transform.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; is not a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for one of
+   &quot;&lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;&quot;, or &quot;&lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;&quot;, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+   exception and abort these steps.&lt;/li&gt;
 
-  &lt;p&gt;When the &lt;dfn id=dom-canvaspattern-settransform title=dom-canvaspattern-setTransform&gt;&lt;code&gt;setTransform()&lt;/code&gt;&lt;/dfn&gt;
-  method is invoked on the pattern, the user agent must replace the
-  pattern's transformation matrix with the one described by the
-  &lt;code&gt;&lt;a href=#svgmatrix&gt;SVGMatrix&lt;/a&gt;&lt;/code&gt; object provided as an argument to the
-  method.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object with the image &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+   and the repetition behavior given by &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.&lt;/li&gt;
 
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#the-image-argument-is-not-origin-clean&gt;the &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/a&gt;, then mark the
+   &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object as &lt;dfn id=concept-canvas-pattern-not-origin-clean title=concept-canvas-pattern-not-origin-clean&gt;not
+   origin-clean&lt;/dfn&gt;.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;Modifying the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; used when creating a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object
+  after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method must
+  not affect the pattern(s) rendered by the &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;Patterns have a transformation matrix, which controls how the pattern is used when it is
+  painted. Initially, a pattern's transformation matrix must be the identity transform.&lt;/p&gt;
+
+  &lt;p&gt;When the &lt;dfn id=dom-canvaspattern-settransform title=dom-canvaspattern-setTransform&gt;&lt;code&gt;setTransform()&lt;/code&gt;&lt;/dfn&gt; method
+  is invoked on the pattern, the user agent must replace the pattern's transformation matrix with
+  the one described by the &lt;code&gt;&lt;a href=#svgmatrix&gt;SVGMatrix&lt;/a&gt;&lt;/code&gt; object provided as an argument to the method.&lt;/p&gt;
+
   &lt;p&gt;When a pattern is to be rendered within an area, the user agent
   must run the following steps to determine what is rendered:&lt;/p&gt;
 
@@ -39166,27 +39716,21 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Place a copy of the image on the bitmap, anchored such that its
-    top left corner is at the origin of the coordinate space, with one
-    coordinate space unit per CSS pixel of the image, then place
-    repeated copies of this image horizontally to the left and right,
-    if the &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically
-    up and down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or
-    in all four directions all over the bitmap, if the
-    &lt;code&gt;repeat&lt;/code&gt; string was specified.&lt;/p&gt;
+    &lt;p&gt;Place a copy of the image on the bitmap, anchored such that its top left corner is at the
+    origin of the coordinate space, with one coordinate space unit per CSS pixel of the image, then
+    place repeated copies of this image horizontally to the left and right, if the repetition
+    behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;&quot;, or vertically up and down, if the repetition
+    behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;&quot;, or in all four directions all over the bitmap, if
+    the repetition behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;.&lt;/p&gt;
 
-    &lt;p&gt;If the original image data is a bitmap image, the value painted
-    at a point in the area of the repetitions is computed by filtering
-    the original image data. If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-    attribute is set to true, then the user agent may use any
-    filtering algorithm (for example bilinear interpolation or
-    nearest-neighbor). If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-    attribute is set to false, the image must be rendered using
-    nearest-neighbor interpolation. When such a filtering algorithm
-    requires a pixel value from outside the original image data, it
-    must instead use the value from wrapping the pixel's coordinates
-    to the original image's dimensions. (That is, the filter uses
-    'repeat' behavior, regardless of the value of &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
+    &lt;p&gt;If the original image data is a bitmap image, the value painted at a point in the area of the
+    repetitions is computed by filtering the original image data. If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt; attribute is set to
+    true, then the user agent may use any filtering algorithm (for example bilinear interpolation or
+    nearest-neighbor). If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt; attribute is set to
+    false, the image must be rendered using nearest-neighbor interpolation. When such a filtering
+    algorithm requires a pixel value from outside the original image data, it must instead use the
+    value from wrapping the pixel's coordinates to the original image's dimensions. (That is, the
+    filter uses 'repeat' behavior, regardless of the value of the pattern's repetition behavior.)&lt;/p&gt;
     &lt;!-- drawImage() has similar paragraphs with different rules --&gt;
 
    &lt;/li&gt;
@@ -39204,27 +39748,7 @@
    &lt;li&gt;&lt;p&gt;The resulting bitmap is what is to be rendered, with the
    same origin and same scale.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;When the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then the frame at the &lt;a href=#current-playback-position&gt;current
-  playback position&lt;/a&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and
-  &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt;
-  of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;/div&gt;
-
-  &lt;div class=impl&gt;
-
-  &lt;hr&gt;&lt;p&gt;If a radial gradient or repeated pattern is used when the
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;If a radial gradient or repeated pattern is used when the
   transformation matrix is singular, the resulting style must be
   transparent black (otherwise the gradient or pattern would be
   collapsed to a point or line, leaving the other pixels undefined).
@@ -39236,7 +39760,7 @@
 
 
 
-  &lt;h6 id=drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing rectangles to the canvas&lt;/h6&gt;
+  &lt;h6 id=drawing-rectangles-to-the-bitmap&gt;&lt;span class=secno&gt;4.8.11.2.11 &lt;/span&gt;Drawing rectangles to the bitmap&lt;/h6&gt;
 
   &lt;p&gt;There are three methods that immediately draw rectangles to the
   bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
@@ -39264,7 +39788,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+    &lt;p&gt;Clears all pixels on the bitmap in the given rectangle to transparent black.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -39272,7 +39796,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+    &lt;p&gt;Paints the given rectangle onto the bitmap, using the current fill style.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -39280,7 +39804,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the bitmap, using the current stroke style.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -39288,14 +39812,14 @@
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in the
-   specified rectangle that also intersect the current &lt;a href=#clipping-region&gt;clipping
-   region&lt;/a&gt;.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in
+   the specified rectangle that also intersect the current
+   &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Clear the pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; to a fully
    transparent black, erasing any previous image.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; in the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p class=note&gt;If either height or width are zero, this method has
   no effect, since the set of pixels would be empty.&lt;/p&gt;
@@ -39325,7 +39849,7 @@
 
 
 
-  &lt;h6 id=drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing text to the canvas&lt;/h6&gt;
+  &lt;h6 id=drawing-text-to-the-bitmap&gt;&lt;span class=secno&gt;4.8.11.2.12 &lt;/span&gt;Drawing text to the bitmap&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
@@ -39367,8 +39891,8 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the
-  following methods for rendering text directly to the canvas.&lt;/p&gt;
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the following methods for
+  rendering text.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-filltext title=dom-context-2d-fillText&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
   &lt;dfn id=dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
@@ -39412,6 +39936,16 @@
 
    &lt;/li&gt;
 
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt; used a font that has an &lt;a href=#origin&gt;origin&lt;/a&gt;
+   that is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+   &lt;a href=#origin&gt;origin&lt;/a&gt; (even if &quot;using a font&quot; means just checking if that font has a particular
+   glyph in it before falling back to another font), then set the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s
+   &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag to false.&lt;/li&gt; &lt;!--
+   because fonts could consider sensitive material, I guess; and because that sensitivity could
+   extend to whether or not a particular glyph is in the font in the first place. --&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
   &lt;/ol&gt;&lt;!--v6DVT - this is commented out until CSS can get its act together
 enough to actual specify vertical text rendering (how long have we
 been waiting now?)
@@ -39419,7 +39953,7 @@
 WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
 
 ALSO NOTE THAT THIS PROBABLY NEEDS ENTIRELY REVISITING NOW THAT WE
-HAVE REJIGGED HOW TEXT WORKS IN v5
+HAVE REJIGGED HOW TEXT WORKS IN v5 (e.g. remember security)
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
@@ -39565,19 +40099,11 @@
 
   &lt;/ol&gt;
 
-v6DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
-  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
-  is invoked, the user agent must replace all the &lt;a href=#space-character title=&quot;space
-  character&quot;&gt;space characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
-  U+0020 SPACE characters, and then must form a hypothetical
-  infinitely-wide CSS line box containing a single inline box
-  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
-  properties at their initial values except the 'white-space' property
-  of the inline element set to 'pre' and the 'font' property of the
-  inline element set to the current font of the context as given by
-  the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute, and
-  must then create a new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its
-  attributes set as described in the following list.
+v6DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt; method takes one
+  argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method is invoked, the user agent must run the
+  &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt;, passing it &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; and the
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object, and then using the returned inline box must create a
+  new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its attributes set as described in the following list.
 &lt;!--ADD-TOPIC:Security--&gt;
   If doing these measurements requires using a font that has an
   &lt;a href=#origin&gt;origin&lt;/a&gt; that is not the &lt;a href=#same-origin title=&quot;same
@@ -39667,7 +40193,7 @@
 
 
 
-  &lt;h6 id=drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing paths to the canvas&lt;/h6&gt;
+  &lt;h6 id=drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.2.13 &lt;/span&gt;Drawing paths to the canvas&lt;/h6&gt;
 
   &lt;p&gt;The context always has a &lt;dfn id=current-default-path&gt;current default path&lt;/dfn&gt;. There
   is only one &lt;a href=#current-default-path&gt;current default path&lt;/a&gt;, it is not part of the
@@ -39867,13 +40393,22 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Optionally, &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the
-    focus is at the location given by the intended path. User agents
-    may wait until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches
-    its &quot;update the rendering&quot; step to optionally inform the user.&lt;/p&gt;
+    &lt;p&gt;Optionally, run the appropriate step from the following list:&lt;/p&gt;
 
-   &lt;/li&gt;
+    &lt;dl&gt;&lt;dt&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;&lt;/dt&gt;
 
+     &lt;dd&gt;&lt;p&gt;&lt;a href=#inform&gt;Inform the user&lt;/a&gt; that the focus is at the location given by the
+     intended path. User agents may wait until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches its
+     &quot;update the rendering&quot; step to optionally inform the user.&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Add instructions to the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface
+     actions&lt;/a&gt; that &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the focus is at the location of
+     the bitmap given by the intended path.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
   &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-drawcustomfocusring title=dom-context-2d-drawCustomFocusRing&gt;&lt;code&gt;drawCustomFocusRing(&lt;var title=&quot;&quot;&gt;element&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must run
   the following steps:&lt;/p&gt;
 
@@ -39900,17 +40435,28 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Optionally, &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the
-    focus is at the location given by the intended path. User agents
-    may wait until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches
-    its &quot;update the rendering&quot; step to optionally inform the user.&lt;/p&gt;
+    &lt;p&gt;Optionally, run the appropriate step from the following list:&lt;/p&gt;
 
-   &lt;/li&gt;
+    &lt;dl&gt;&lt;dt&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;&lt;/dt&gt;
 
+     &lt;dd&gt;&lt;p&gt;&lt;a href=#inform&gt;Inform the user&lt;/a&gt; that the focus is at the location given by the
+     intended path. The user agent may wait until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches
+     its &quot;update the rendering&quot; step to optionally inform the user.&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Add instructions to the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface
+     actions&lt;/a&gt; that &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the focus is at the location of
+     the bitmap given by the intended path.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-scrollpathintoview title=dom-context-2d-scrollPathIntoView&gt;&lt;code&gt;scrollPathIntoView()&lt;/code&gt;&lt;/dfn&gt;
-  method, when invoked, must run the following steps:&lt;/p&gt;
+  method, when invoked, if the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, must run the following steps; and otherwise, must add
+  instructions to the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface actions&lt;/a&gt;
+  that run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;the specified rectangle&lt;/var&gt; be the
    rectangle of the bounding box of the intended path.&lt;/li&gt;
@@ -39922,11 +40468,11 @@
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#scroll-an-element-into-view title=&quot;scroll an element into view&quot;&gt;Scroll &lt;var title=&quot;&quot;&gt;notional child&lt;/var&gt; into view&lt;/a&gt; with the &lt;var title=&quot;&quot;&gt;align to top flag&lt;/var&gt; set.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Optionally, &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the
-   caret and/or selection cover &lt;var title=&quot;&quot;&gt;the specified
-   rectangle&lt;/var&gt; of the canvas. User agents may wait until the next
-   time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches its &quot;update the rendering&quot;
-   step to optionally inform the user.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Optionally, &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the caret and/or selection cover
+   &lt;var title=&quot;&quot;&gt;the specified rectangle&lt;/var&gt; of the canvas. If the
+   &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; was &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; when the method was invoked, the user agent may wait
+   until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches its &quot;update the rendering&quot; step to
+   optionally inform the user.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p class=note id=inform&gt;&quot;Inform the user&quot;, as used in this
   section, could mean calling a system accessibility API, which would
@@ -40058,20 +40604,19 @@
 
 
 
-  &lt;h6 id=drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing images to the canvas&lt;/h6&gt;
+  &lt;h6 id=drawing-images&gt;&lt;span class=secno&gt;4.8.11.2.14 &lt;/span&gt;Drawing images&lt;/h6&gt;
 
-  &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
+  &lt;p&gt;To draw images, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
 
+  &lt;div class=impl&gt;
+
   &lt;p&gt;This method can be invoked with three different sets of arguments:&lt;/p&gt;
 
   &lt;ul class=brief&gt;&lt;li&gt;&lt;code title=&quot;&quot;&gt;drawImage(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;)&lt;/code&gt;
    &lt;li&gt;&lt;code title=&quot;&quot;&gt;drawImage(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;)&lt;/code&gt;
    &lt;li&gt;&lt;code title=&quot;&quot;&gt;drawImage(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;)&lt;/code&gt;
-  &lt;/ul&gt;&lt;!-- v3: drawImage() of an ImageData object might make sense (when resizing as well as filtering) - ack Charles Pritchard --&gt;&lt;p&gt;Each of those three can take either an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
-  an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; for the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument.&lt;/p&gt;
+  &lt;/ul&gt;&lt;/div&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;)&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;)&lt;/dt&gt;
@@ -40096,141 +40641,108 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;If not specified, the &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt; arguments must default to the values of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, interpreted such that
-  one CSS pixel in the image is treated as one unit in the canvas
-  coordinate space. If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, they must default to 0, 0,
-  the image's intrinsic width in image pixels, and the image's
-  intrinsic height in image pixels, respectively. If the image has no
-  intrinsic dimensions, the &lt;i&gt;concrete object size&lt;/i&gt; must be used
-  instead, as determined using the CSS &quot;&lt;a href=<A HREF="http://dev.w3.org/csswg/css3-images/#default-sizing">http://dev.w3.org/csswg/css3-images/#default-sizing</A>&gt;Concrete
-  Object Size Resolution&lt;/a&gt;&quot; algorithm, with the &lt;i&gt;specified
-  size&lt;/i&gt; having neither a definite width nor height, nor any
-  additional contraints, the object's intrinsic properties being those
-  of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument, and the &lt;i&gt;default object
-  size&lt;/i&gt; being the size of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. &lt;a href=#refsCSSIMAGES&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;When the &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method is invoked, the user
+  agent must run the following steps:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;!-- createPattern() has an
-  equivalent paragraph --&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#check-the-usability-of-the-image-argument&gt;Check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument&lt;/a&gt;. If this
+   returns &lt;i&gt;aborted&lt;/i&gt;, then an exception has been thrown and the method doesn't return anything;
+   abort these steps. If it returns &lt;i&gt;bad&lt;/i&gt;, then abort these steps without drawing anything.
+   Otherwise it returns &lt;i&gt;good&lt;/i&gt;; continue with these steps.&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
-  implementation must return without drawing anything.&lt;/p&gt; &lt;!--
-  createPattern() has an equivalent paragraph --&gt;
+   &lt;li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+    &lt;p&gt;Establish the source and destination rectangles as follows:&lt;/p&gt;
 
-  &lt;p&gt;The source rectangle is the rectangle whose corners are the four
-  points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+    &lt;p&gt;If not specified, the &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt; arguments must
+    default to the values of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, interpreted such
+    that one CSS pixel in the image is treated as one unit in the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s
+    coordinate space. If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
+    and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, they must default to 0, 0, the image's
+    intrinsic width in image pixels, and the image's intrinsic height in image pixels, respectively.
+    If the image has no intrinsic dimensions, the &lt;i&gt;concrete object size&lt;/i&gt; must be used instead,
+    as determined using the CSS &quot;&lt;a href=<A HREF="http://dev.w3.org/csswg/css3-images/#default-sizing">http://dev.w3.org/csswg/css3-images/#default-sizing</A>&gt;Concrete Object Size Resolution&lt;/a&gt;&quot;
+    algorithm, with the &lt;i&gt;specified size&lt;/i&gt; having neither a definite width nor height, nor any
+    additional contraints, the object's intrinsic properties being those of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument, and the &lt;i&gt;default object size&lt;/i&gt; being the size of the
+    &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;. &lt;a href=#refsCSSIMAGES&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
-  arguments is zero, the implementation must throw an
-  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+    &lt;p&gt;The source rectangle is the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;),
+    (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
 
-  &lt;p&gt;The destination rectangle is the rectangle whose corners are the
-  four points (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;),
-  (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+    &lt;p&gt;The destination rectangle is the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;),
+    (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
 
-  &lt;p&gt;When the source rectangle is outside the source image, it must be
-  clipped to the source image, and the destination rectangle must be
-  clipped in the same proportion.&lt;/p&gt;
+    &lt;p&gt;When the source rectangle is outside the source image, it must be clipped to the source
+    image, and the destination rectangle must be clipped in the same proportion.&lt;/p&gt;
 
-  &lt;p&gt;When &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; is
-  invoked, the region of the image specified by the source rectangle
-  must be painted on the region of the canvas specified by the
-  destination rectangle, after applying the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
-  matrix&lt;/a&gt; to the points of the destination rectangle.&lt;/p&gt;
+   &lt;/li&gt;
 
-  &lt;p&gt;The original image data of the source image must be used, not the
-  image as it is rendered (e.g. &lt;code title=attr-dim-width&gt;&lt;a href=#attr-dim-width&gt;width&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-dim-height&gt;&lt;a href=#attr-dim-height&gt;height&lt;/a&gt;&lt;/code&gt; attributes on the source
-  element have no effect). The image data must be processed in the
-  original direction, even if the dimensions given are negative. &lt;!--
-  remove that last sentence if it causes confusion. Someone once
-  suggested that 5,5,-2,-2 was different than 3,3,2,2; this is trying
-  to clarify that this is no the case. --&gt;&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, throw an
+   &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-  attribute is set to true, then the user agent should attempt to
-  apply a smoothing algorithm to the image data when it is scaled.
-  Otherwise, the image must be rendered using nearest-neighbor
-  interpolation.&lt;/p&gt;
+   &lt;li&gt;
 
-  &lt;p class=note&gt;This specification does not define the precise
-  algorithm to use when scaling an image when the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-  attribute is set to true.&lt;/p&gt;
+    &lt;p&gt;Paint the region of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument specified by the source rectangle
+    on the region of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; specified by the
+    destination rectangle, after applying the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+    transformation matrix&lt;/a&gt; to the points of the destination rectangle.&lt;/p&gt;
 
-  &lt;p class=note&gt;When a canvas is drawn onto itself, the &lt;a href=#drawing-model&gt;drawing
-  model&lt;/a&gt; requires the source to be copied before the image is drawn
-  back onto the canvas, so it is possible to copy parts of a canvas
-  onto overlapping parts of itself.&lt;/p&gt;
+    &lt;p&gt;The image data must be processed in the original direction, even if the dimensions given are
+    negative. &lt;!-- note: that last sentence has several times been needed to correct people who
+    suggested that 5,5,-2,-2 was different than 3,3,2,2 --&gt;&lt;/p&gt;
 
-  &lt;p&gt;If the original image data is a bitmap image, the value painted
-  at a point in the destination rectangle is computed by filtering the
-  original image data. The user agent may use any filtering algorithm
-  (for example bilinear interpolation or nearest-neighbor). When the
-  filtering algorithm requires a pixel value from outside the original
-  image data, it must instead use the value from the nearest edge
-  pixel. (That is, the filter uses 'clamp-to-edge' behavior.)&lt;/p&gt;
-  &lt;!-- see CORE-32111 and:
-       <A HREF="http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737">http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737</A>
-       <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11">http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11</A>
-  --&gt;
-  &lt;!-- createPattern() has a similar paragraph with different rules --&gt;
+    &lt;p&gt;If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
+    attribute is set to true, then the user agent should attempt to apply a smoothing algorithm to
+    the image data when it is scaled. Otherwise, the image must be rendered using nearest-neighbor
+    interpolation.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+    &lt;p class=note&gt;This specification does not define the precise algorithm to use when scaling an
+    image when the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
+    attribute is set to true.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then the frame at the &lt;a href=#current-playback-position&gt;current
-  playback position&lt;/a&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and
-  &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt;
-  of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+    &lt;p class=note&gt;When a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object is
+    drawn onto itself, the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt; requires the source to be copied before the
+    image is drawn, so it is possible to copy parts of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; or &lt;a href=#scratch-bitmap&gt;scratch
+    bitmap&lt;/a&gt; onto overlapping parts of itself.&lt;/p&gt;
 
-  &lt;p&gt;Images are painted without affecting the current path, and are
-  subject to &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, the
-  &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
-  operators&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;If the original image data is a bitmap image, the value painted at a point in the destination
+    rectangle is computed by filtering the original image data. The user agent may use any filtering
+    algorithm (for example bilinear interpolation or nearest-neighbor). When the filtering algorithm
+    requires a pixel value from outside the original image data, it must instead use the value from
+    the nearest edge pixel. (That is, the filter uses 'clamp-to-edge' behavior.)&lt;/p&gt;
+    &lt;!-- see CORE-32111 and:
+         <A HREF="http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737">http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737</A>
+         <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11">http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11</A>
+    --&gt;
+    &lt;!-- createPattern() has a similar paragraph with different rules --&gt;
 
-  &lt;/div&gt;
+    &lt;p&gt;Images are painted without affecting the current path, and are subject to &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global
+    alpha&lt;/a&gt;, the &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition operators&lt;/a&gt;.&lt;/p&gt;
 
+   &lt;/li&gt;
 
-  &lt;h6 id=hit-regions&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Hit regions&lt;/h6&gt;
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#the-image-argument-is-not-origin-clean&gt;the &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/a&gt;, set the
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag
+   to false.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
 
-  &lt;p&gt;Each &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element whose &lt;a href=#primary-context&gt;primary
-  context&lt;/a&gt; is a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object
-  must have a &lt;dfn id=hit-region-list&gt;hit region list&lt;/dfn&gt; associated with its
+  &lt;/ol&gt;&lt;/div&gt;
+
+
+  &lt;h6 id=hit-regions&gt;&lt;span class=secno&gt;4.8.11.2.15 &lt;/span&gt;Hit regions&lt;/h6&gt;
+
+  &lt;p&gt;A &lt;dfn id=hit-region-list&gt;hit region list&lt;/dfn&gt; is a list of &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit regions&lt;/a&gt; for a
   bitmap.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; is a list of &lt;a href=#hit-region title=&quot;hit
-  region&quot;&gt;hit regions&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;dfn id=hit-region&gt;hit region&lt;/dfn&gt; consists of the following information:&lt;/p&gt;
 
-  &lt;p&gt;Each &lt;dfn id=hit-region&gt;hit region&lt;/dfn&gt; consists of the following
-  information:&lt;/p&gt;
+  &lt;ul&gt;&lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/dfn&gt; on the bitmap for which this
+   region is responsible.&lt;/li&gt;
 
-  &lt;ul&gt;&lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of
-   pixels&lt;/dfn&gt; on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap for which
-   this region is responsible.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-bounding-circumference&quot; title=&quot;hit region's bounding circumference&quot;&gt;bounding circumference&lt;/dfn&gt; on the
+   bitmap that surrounds the &lt;a href=&quot;#hit-region's-set-of-pixels&quot;&gt;hit region's set of pixels&lt;/a&gt; as they stood when it was
+   created.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-bounding-circumference&quot; title=&quot;hit region's bounding circumference&quot;&gt;bounding
-   circumference&lt;/dfn&gt; on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap
-   that surrounds the &lt;a href=&quot;#hit-region's-set-of-pixels&quot;&gt;hit region's set of pixels&lt;/a&gt; as they
-   stood when it was created.&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Optionally, a non-empty string representing an &lt;dfn id=&quot;hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/dfn&gt; for distinguishing the region
    from others.&lt;/li&gt;
 
@@ -40254,11 +40766,11 @@
     control&quot;&gt;control&lt;/a&gt;, or an &lt;a href=&quot;#hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked
     region description&quot;&gt;unbacked region description&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;A &lt;dfn id=&quot;hit-region's-control&quot; title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a
-    reference to an &lt;code&gt;&lt;a href=#element&gt;Element&lt;/a&gt;&lt;/code&gt; node, to which, in certain
-    conditions, the user agent will route events, and from which the
-    user agent will determine the state of the hit region for the
-    purposes of accessibility tools.&lt;/p&gt;
+    &lt;p&gt;A &lt;dfn id=&quot;hit-region's-control&quot; title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a reference to an
+    &lt;code&gt;&lt;a href=#element&gt;Element&lt;/a&gt;&lt;/code&gt; node, to which, in certain conditions, the user agent will route events,
+    and from which the user agent will determine the state of the hit region for the purposes of
+    accessibility tools. (The control is ignored when it is not a descendant of the
+    &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.)&lt;/p&gt;
 
     &lt;p&gt;An &lt;dfn id=&quot;hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked region
     description&quot;&gt;unbacked region description&lt;/dfn&gt; consists of the
@@ -40278,8 +40790,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Adds a hit region to the canvas bitmap. The argument is an
-    object with the following members:&lt;/p&gt;
+    &lt;p&gt;Adds a hit region to the bitmap. The argument is an object with the following members:&lt;/p&gt;
 
     &lt;dl&gt;&lt;dt&gt;&lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; (default null)
 
@@ -40337,14 +40848,14 @@
      ID in the mouse events.&lt;/li&gt;
 
      &lt;li&gt;With a control, they can make routing events to DOM elements
-     automatic, allowing e.g. clicks on a canvas to automatically
+     automatic, allowing e.g. clicks on a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; to automatically
      submit a form via a &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
 
      &lt;li&gt;With a label, they can make it easier for users to explore a
-     canvas without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
 
      &lt;li&gt;With a cursor, they can make it easier for different regions
-     of the canvas to have different cursors, with the user agent
+     of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; to have different cursors, with the user agent
      automatically switching between them.&lt;/li&gt;
 
     &lt;/ul&gt;&lt;/dd&gt;
@@ -40373,16 +40884,14 @@
   &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for which &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
   &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;&lt;dfn id=the-region-identified-by-the-id&gt;The region identified by the ID&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; in a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
-  algorithm (which can return a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or
-  nothing):&lt;/p&gt;
+  &lt;p&gt;&lt;dfn id=the-region-identified-by-the-id&gt;The region identified by the ID&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; in a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
+  &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or nothing):&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; is null, return nothing and abort
    these steps.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
+   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/a&gt;
    is a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt;,
@@ -40391,17 +40900,12 @@
 
    &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-representing-the-control&gt;The region representing the control&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; for a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
-  algorithm (which can return a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or
-  nothing):&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-representing-the-control&gt;The region representing the control&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; for a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
+  &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or nothing):&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
-   steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
    control&quot;&gt;control&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then
    return that &lt;a href=#hit-region&gt;hit region&lt;/a&gt; and abort these
@@ -40436,17 +40940,13 @@
    region's parent&quot;&gt;parent&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be that &lt;a href=&quot;#hit-region's-parent&quot;&gt;hit region's parent&lt;/a&gt;,
    and return to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property
-   for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. &lt;a href=#refsCSSUI&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element, if any; if there isn't one, return 'auto'. &lt;a href=#refsCSSUI&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-for-a-pixel&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the
-  value returned by the following algorithm (which can return a
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-for-a-pixel&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
   &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or nothing):&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of
    pixels&quot;&gt;set of pixels&lt;/a&gt; contains &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt;,
@@ -40455,26 +40955,20 @@
 
    &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=clear-regions-that-cover-the-pixels&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user agent must run the following
-  steps:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=clear-regions-that-cover-the-pixels&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;, the user agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Remove all pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; from the
    &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/a&gt; of
    each &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#garbage-collect-the-regions&gt;Garbage-collect the regions&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#garbage-collect-the-regions&gt;Garbage-collect the regions&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=garbage-collect-the-regions&gt;garbage-collect the regions&lt;/dfn&gt; of a
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user
+  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=garbage-collect-the-regions&gt;garbage-collect the regions&lt;/dfn&gt; of a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;, the user
   agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; be the first
    &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; to have an
@@ -40491,10 +40985,10 @@
 
    &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p class=note&gt;Adding a new region and calling &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt; are the two ways
-  this clearing algorithm can be invoked. Resizing the canvas also
-  clears the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; (since it clears the canvas
-  back to its initial state).&lt;/p&gt;
+  &lt;/ol&gt;&lt;p class=note&gt;Adding a new region and calling &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt; are the two ways this clearing algorithm can
+  be invoked. The &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; itself is also reset when the rendering context is
+  reset, e.g. when a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object is bound to or unbound from a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;, or when the dimensions of the bitmap are changed.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;When the &lt;dfn id=dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;&lt;code&gt;addHitRegion()&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the user agent must run the following steps:&lt;/p&gt;
@@ -40529,7 +41023,7 @@
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is not null, then
    let &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the
    region identified by the ID&lt;/a&gt; given by the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member's value in this
-   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is null or no such
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, if any. If the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is null or no such
    region currently exists, let &lt;var title=&quot;&quot;&gt;previous region for this
    ID&lt;/var&gt; be null.&lt;/li&gt;
 
@@ -40539,7 +41033,7 @@
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is not
    null, then let &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the
    region identified by the ID&lt;/a&gt; given by the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member's value in
-   this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is null or
+   the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, if any. If the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is null or
    no such region currently exists, let &lt;var title=&quot;&quot;&gt;parent
    region&lt;/var&gt; be null.&lt;/li&gt;
 
@@ -40703,7 +41197,7 @@
    null, then let &lt;var title=&quot;&quot;&gt;previous region for the control&lt;/var&gt;
    be &lt;a href=#the-region-representing-the-control&gt;the region representing the control&lt;/a&gt; given by the
    &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member's
-   value for this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is null
+   value for this &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, if any. If the &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is null
    or no such region currently exists, let &lt;var title=&quot;&quot;&gt;previous
    region for the control&lt;/var&gt; be null.&lt;/li&gt;
 
@@ -40716,50 +41210,40 @@
    its descendants, as we know that our parent isn't part of that
    subtree. --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
-   control&lt;/var&gt;, remove it from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's
-   &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
-   region's parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit
-   region's child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage
-   collect the regions below --&gt;
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this control&lt;/var&gt;, remove it from the
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by
+   one.&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
-   ID&lt;/var&gt;, remove it, and all &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit
-   regions&lt;/a&gt; for which it is an &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;,
-   from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
-   parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's
-   child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage collect the
-   regions below --&gt;
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this ID&lt;/var&gt;, remove it, and all &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit regions&lt;/a&gt; for which it is an &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;, from the
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by
+   one.&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;, increment
    its &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by one.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of
-   pixels&quot;&gt;set of pixels&lt;/a&gt; on this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-   element.&lt;/li&gt; &lt;!-- this is what garbage collects the earlier
-   regions --&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/a&gt; on this &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt;.&lt;/li&gt; &lt;!-- this is what garbage collects the earlier regions --&gt;
 
-   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-   element's &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s element's &lt;a href=#hit-region-list&gt;hit
+   region list&lt;/a&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;When the &lt;dfn id=dom-context-2d-removehitregion title=dom-context-2d-removeHitRegion&gt;&lt;code&gt;removeHitRegion()&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the user agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the region
-   identified by the ID&lt;/a&gt; given by the method's argument in this
-   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If no such region currently
-   exists, abort these steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the region identified by the ID&lt;/a&gt; given by
+   the method's argument in the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;. If no such region
+   currently exists, abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, and all &lt;a href=#hit-region title=&quot;hit
-   region&quot;&gt;hit regions&lt;/a&gt; for which it is an &lt;a href=#ancestor-region&gt;ancestor
-   region&lt;/a&gt;, from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit
-   region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
-   parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's
-   child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage collect the
-   regions below --&gt;
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, and all &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit regions&lt;/a&gt; for
+   which it is an &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;, from the rendering context's &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+   parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by
+   one.&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#garbage-collect-the-regions&gt;Garbage-collect the regions&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#garbage-collect-the-regions&gt;Garbage-collect the regions&lt;/a&gt; of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;/div&gt;
 
@@ -40793,11 +41277,10 @@
   ID&lt;/a&gt; if the mouse was over a hit region when the event was
   fired.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; is to be fired at a
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element by the user agent in response to a
-  pointing device action, the user agent must instead follow these
-  steps. If these steps say to &lt;i&gt;act as normal&lt;/i&gt;, that means that
-  the event must be fired as it would have had these requirements not
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; is to be fired at a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element by the user
+  agent in response to a pointing device action, if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has a &lt;a href=#hit-region-list&gt;hit
+  region list&lt;/a&gt;, the user agent must instead follow these steps. If these steps say to &lt;i&gt;act
+  as normal&lt;/i&gt;, that means that the event must be fired as it would have had these requirements not
   been applied.&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the pointing device is not indicating a pixel on the
@@ -40809,7 +41292,7 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be the &lt;a href=#hit-region&gt;hit
    region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the
    region for the pixel&lt;/a&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on this
-   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any.&lt;/li&gt;
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap, if any.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, then act as
    normal and abort these steps.&lt;/li&gt;
@@ -40821,8 +41304,9 @@
    event object's &lt;code title=dom-MouseEvent-region&gt;&lt;a href=#dom-mouseevent-region&gt;region&lt;/a&gt;&lt;/code&gt;
    attribute to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
-   control&quot;&gt;control&lt;/a&gt;, if any.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;a href=#the-control-represented-by-a-region title=&quot;the control represented by a
+   region&quot;&gt;control represented by&lt;/a&gt; &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; for this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element, if any.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then target the
    event object at &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; instead of the
@@ -40831,12 +41315,10 @@
    &lt;li&gt;&lt;p&gt;Continue dispatching the event, but with the updated event
    object and target as given in the above steps.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user's pointing device cursor is positioned over a
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, user agents should render the pointing
-  device cursor according to the cursor specification described by
-  &lt;a href=#the-cursor-for-a-hit-region title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit
-  region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the
-  region for the pixel&lt;/a&gt; that the pointing device designates.&lt;/p&gt;
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user's pointing device cursor is positioned over a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, user
+  agents should render the pointing device cursor according to the cursor specification described by
+  &lt;a href=#the-cursor-for-a-hit-region title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the region for the pixel&lt;/a&gt; that the pointing device designates
+  on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;User agents are encouraged to make use of the information present
   in a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; to
@@ -40853,26 +41335,23 @@
   region's bounding circumference&lt;/a&gt; gives the region of the
   screen to use when representing the node (if appropriate).&lt;/p&gt;
 
-  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of
-  this virtual DOM tree are those of the &lt;a href=&quot;#hit-region's-control&quot;&gt;hit region's
-  control&lt;/a&gt;, if it has one, or else of a non-interactive element
-  whose ARIA role, if any, is that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's
-  ARIA role&lt;/a&gt;, and whose textual representation, if any, is given
-  by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of this virtual DOM tree are those
+  of the &lt;a href=#the-control-represented-by-a-region title=&quot;the control represented by a region&quot;&gt;the control represented by the
+  region&lt;/a&gt;, if it has one, or else of a non-interactive element whose ARIA role, if any, is
+  that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's ARIA role&lt;/a&gt;, and whose textual representation, if any,
+  is given by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element
-  and there is &lt;a href=#the-region-representing-the-control title=&quot;the region representing the control&quot;&gt;a
-  region representing the control&lt;/a&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, then the element's position relative to
-  the document should be presented as if it was that region in the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
+  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant
+  of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element and there is &lt;a href=#the-region-representing-the-control title=&quot;the region representing the control&quot;&gt;a
+  region representing the control&lt;/a&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+  element's bitmap, then the element's position relative to the document should be presented as if
+  it was that region in the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
 
-  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of
-  this virtual DOM tree are those of the &lt;a href=&quot;#hit-region's-control&quot;&gt;hit region's
-  control&lt;/a&gt;, if it has one, or else of a non-interactive element
-  whose ARIA role, if any, is that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's
-  ARIA role&lt;/a&gt;, and whose textual representation, if any, is given
-  by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of this virtual DOM tree are those
+  of the &lt;a href=#the-control-represented-by-a-region title=&quot;the control represented by a region&quot;&gt;the control represented by the
+  region&lt;/a&gt;, if it has one, or else of a non-interactive element whose ARIA role, if any, is
+  that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's ARIA role&lt;/a&gt;, and whose textual representation, if any,
+  is given by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p class=note&gt;Thus, for instance, a user agent on a touch-screen
   device could provide haptic feedback when the user croses over a
@@ -40890,7 +41369,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.2.16 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
@@ -40928,8 +41407,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object containing the image
-    data for the given rectangle of the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object containing the image data for the given rectangle of
+    the bitmap.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the either
     of the width or height arguments are zero.&lt;/p&gt;
@@ -40943,8 +41422,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object containing the image
-    data for the given rectangle of the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object containing the image data for the given rectangle of
+    the bitmap.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the either
     of the width or height arguments are zero.&lt;/p&gt;
@@ -40980,9 +41459,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the data from the given &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object
-    onto the canvas. If a dirty rectangle is provided, only the pixels
-    from that rectangle are painted.&lt;/p&gt;
+    &lt;p&gt;Paints the data from the given &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object onto the bitmap. If a dirty
+    rectangle is provided, only the pixels from that rectangle are painted.&lt;/p&gt;
 
     &lt;p&gt;The &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;
     and &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
@@ -40994,8 +41472,7 @@
     &lt;p&gt;Throws a &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception if any of the
     arguments are not finite.&lt;/p&gt;
 
-    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space
-    unit on the canvas.&lt;/p&gt;
+    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space unit on the bitmap.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -41003,10 +41480,9 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the data from the given &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object
-    onto the canvas, at the canvas bitmap's native resolution. If a
-    dirty rectangle is provided, only the pixels from that rectangle
-    are painted.&lt;/p&gt;
+    &lt;p&gt;Paints the data from the given &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object onto the bitmap, at the bitmap's
+    native pixel density. If a dirty rectangle is provided, only the pixels from that rectangle are
+    painted.&lt;/p&gt;
 
     &lt;p&gt;The &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;
     and &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
@@ -41039,49 +41515,42 @@
   with transparent black.&lt;/p&gt;
 
   &lt;p&gt;When the &lt;dfn id=dom-context-2d-createimagedatahd title=dom-context-2d-createImageDataHD&gt;&lt;code&gt;createImageDataHD()&lt;/code&gt;&lt;/dfn&gt;
-  method is invoked (with its two arguments &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;) it must return a new &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
-  object representing a rectangle with a width in equal to the
-  absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; and a height equal to the absolute magnitude of
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt;,
-  where &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; is the number of pixels in the
-  canvas bitmap per coordinate space units. The &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
-  object returned must be filled with transparent black.&lt;/p&gt;
+  method is invoked (with its two arguments &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;) it
+  must return a new &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing a rectangle with a width in equal to
+  the absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; and a
+  height equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt;, where &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; is the number of pixels in the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt; per coordinate space units. The &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object returned must be
+  filled with transparent black.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;&lt;code&gt;getImageData(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception; otherwise,
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;&lt;code&gt;getImageData(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if
+  either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero, throw an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception; otherwise,
   &lt;!--ADD-TOPIC:Security--&gt;
-  if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
-  to false, it must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception;
+  if the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt;
+  flag is set to false, it must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception;
   &lt;!--REMOVE-TOPIC:Security--&gt;
-  otherwise, it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with
-  width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
-  representing the canvas bitmap for the area of the canvas denoted by
-  the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in
-  canvas coordinate space units. If the canvas bitmap does not
-  represent each coordinate space unit square using exactly one pixel,
-  the value of each pixel in the returned abject must be derived from
-  the value(s) of the pixel(s) in the canvas bitmap that correspond to
-  the same coordinate. Pixels outside the canvas must be returned as
-  transparent black. Pixels must be returned as non-premultiplied
+  otherwise, it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and
+  height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; representing the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; for the area of that
+  bitmap denoted by the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in the bitmap's coordinate space
+  units. If the bitmap does not represent each coordinate space unit square using exactly one pixel,
+  the value of each pixel in the returned abject must be derived from the value(s) of the pixel(s)
+  in the bitmap that correspond to the same coordinate. Pixels outside the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt; must be returned as transparent black. Pixels must be returned as non-premultiplied
   alpha values.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedatahd title=dom-context-2d-getImageDataHD&gt;&lt;code&gt;getImageDataHD(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception; otherwise,
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedatahd title=dom-context-2d-getImageDataHD&gt;&lt;code&gt;getImageDataHD(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must,
+  if either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero, throw an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception; otherwise,
   &lt;!--ADD-TOPIC:Security--&gt;
-  if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
-  to false, it must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception;
+  if the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt;
+  flag is set to false, it must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception;
   &lt;!--REMOVE-TOPIC:Security--&gt;
-  otherwise, it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with
-  width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt;
-  and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; representing the canvas bitmap data for the
-  area of the canvas denoted by the rectangle whose corners are the
-  four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in
-  canvas coordinate space units. Pixels outside the canvas must be
-  returned as transparent black. Pixels must be returned as
-  non-premultiplied alpha values.&lt;/p&gt;
+  otherwise, it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;
+  multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; representing the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; for the area of that bitmap
+  denoted by the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in the bitmap's coordinate space
+  units. Pixels outside the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; must be returned as transparent black.
+  Pixels must be returned as non-premultiplied alpha values.&lt;/p&gt;
 
   &lt;p&gt;New &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; objects must be initialized so that
   their &lt;dfn id=dom-imagedata-width title=dom-imagedata-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;
@@ -41107,10 +41576,9 @@
   consecutive indices starting with 0 for the top left pixel's red
   component. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn id=dom-context-2d-putimagedatahd title=dom-context-2d-putImageDataHD&gt;&lt;code&gt;putImageDataHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods write data from &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; structures back to
-  the canvas. Their arguments are: &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-context-2d-putimagedatahd title=dom-context-2d-putImageDataHD&gt;&lt;code&gt;putImageDataHD()&lt;/code&gt;&lt;/dfn&gt; methods write data from
+  &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; structures back to the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.
+  Their arguments are: &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;.&lt;/p&gt;
 
   &lt;p&gt;When the last four arguments to these methods are omitted, they
   must be assumed to have the values 0, 0, the &lt;code title=dom-imagedata-width&gt;&lt;a href=#dom-imagedata-width&gt;width&lt;/a&gt;&lt;/code&gt; member of the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; structure, and the &lt;code title=dom-imagedata-height&gt;&lt;a href=#dom-imagedata-height&gt;height&lt;/a&gt;&lt;/code&gt; member of the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; structure, respectively.&lt;/p&gt;
@@ -41151,7 +41619,7 @@
 
     &lt;p&gt;If, after those changes, either &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;
     or &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt; is negative or zero, stop these
-    steps without affecting the canvas.&lt;/p&gt;
+    steps without affecting any bitmaps.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -41163,17 +41631,16 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Draw the region of the image data in the horizontal rectangle
-      whose top left corner is at (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at
-      (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;)
-      onto the canvas, aligned such that the top left of the rectangle
-      is at coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
+      &lt;p&gt;Draw the region of the image data in the horizontal rectangle whose top left corner is at
+      (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at
+      (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;) onto the rendering
+      context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, aligned such that the top left of the rectangle is at
+      coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
 
       &lt;p&gt;If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-      attribute is set to true, then the user agent should attempt to
-      apply a smoothing algorithm to the image data if the canvas does
-      not have exactly one device pixel per coordinate space unit in
-      the canvas bitmap.&lt;/p&gt;
+      attribute is set to true, then the user agent should attempt to apply a smoothing algorithm to
+      the image data if the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; does not have exactly one device pixel per
+      coordinate space unit.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -41183,21 +41650,20 @@
 
       &lt;ol&gt;&lt;li&gt;
 
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
-        of the device pixel in the canvas bitmap corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the canvas coordinate space.&lt;/p&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate of the device pixel in
+        the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in
+        the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s coordinate space.&lt;/p&gt;
 
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
-        of the device pixel in the canvas bitmap corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the canvas coordinate space.&lt;/p&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate of the device pixel in
+        the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in
+        the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s coordinate space.&lt;/p&gt;
 
        &lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;For all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;
-       and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;
-       and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the four channels of
-       the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) in the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data
-       structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;,
-       &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the canvas bitmap of the
-       canvas.&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;For all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the
+       four channels of the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) in
+       the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the
+       rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.&lt;/li&gt;
 
       &lt;/ol&gt;&lt;/dd&gt;
 
@@ -41337,7 +41803,7 @@
 
 
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Compositing&lt;/h6&gt;
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.2.17 &lt;/span&gt;Compositing&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
@@ -41370,24 +41836,21 @@
   &lt;!-- conformance criteria for painting are described in the &quot;drawing
   model&quot; section below --&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives an alpha value that is applied to shapes and images
-  before they are composited onto the canvas. The value must be in the
-  range from 0.0 (fully transparent) to 1.0 (no additional
-  transparency). If an attempt is made to set the attribute to a value
-  outside this range, including Infinity and Not-a-Number (NaN)
-  values, the attribute must retain its previous value. When the
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt; attribute gives an
+  alpha value that is applied to shapes and images before they are composited onto the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt;. The value must be in the range from 0.0 (fully transparent) to 1.0 (no additional
+  transparency). If an attempt is made to set the attribute to a value outside this range, including
+  Infinity and Not-a-Number (NaN) values, the attribute must retain its previous value. When the
   context is created, the &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value 1.0.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets how shapes and images are drawn onto the existing
-  bitmap, once they have had &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and the
-  current transformation matrix applied. It must be set to a value
-  from the following list. In the descriptions below, the source
-  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
-  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
-  state of the bitmap.&lt;/p&gt;
+  attribute sets how shapes and images are drawn onto the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, once they
+  have had &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and the current
+  transformation matrix applied. It must be set to a value from the following list. In the
+  descriptions below, the source image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
+  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current state of the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt;.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -41498,7 +41961,7 @@
 
 
 
-  &lt;h6 id=image-smoothing&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Image smoothing&lt;/h6&gt;
+  &lt;h6 id=image-smoothing&gt;&lt;span class=secno&gt;4.8.11.2.18 &lt;/span&gt;Image smoothing&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
@@ -41524,7 +41987,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.2.19 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;All drawing operations are affected by the four global shadow
   attributes.&lt;/p&gt;
@@ -41665,7 +42128,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.19 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.2.20 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -41683,21 +42146,22 @@
    &lt;li&gt;&lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, multiply the alpha
    component of every pixel in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; by &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, composite &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; within the &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; over the
-   current canvas bitmap using the current composition
-   operator.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, composite &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; within the
+   &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; over the current &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; using the current
+   composition operator.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Multiply the alpha component of every pixel in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; by &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Composite &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; within the &lt;a href=#clipping-region&gt;clipping
-   region&lt;/a&gt; over the current canvas bitmap using the current
-   composition operator.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Composite &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; within the &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; over the current
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; using the current composition operator.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.20 &lt;/span&gt;Best practices&lt;/h6&gt;
 
+
+  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.2.21 &lt;/span&gt;Best practices&lt;/h6&gt;
+
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;When a canvas is interactive, authors should include focusable
@@ -41758,7 +42222,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.21 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.2.22 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -41811,16 +42275,54 @@
 
   
 
-  &lt;/div&gt;&lt;!--data-component--&gt;
 
+  &lt;h5 id=pixel-density&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Pixel density&lt;/h5&gt;
 
+  &lt;p&gt;The user agent may use any square pixel density for the bitmaps of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; and
+  its rendering contexts. Once a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; has a bitmap, that canvas must keep its
+  resolution for its lifetime.&lt;/p&gt;
+
+  &lt;p class=note&gt;In general, user agents are encouraged to use a pixel density equal to the screen
+  pixel density. Ideally, the number of device pixels per CSS pixel would be a multiple of two.
+  Several factors can affect the screen pixel density: most prominently the actual display pixel
+  density, but also important is the current zoom level.&lt;/p&gt;
+
+  &lt;p&gt;All the bitmaps created during a single &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; for
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements and &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects must have the same
+  pixel density.
+  &lt;a class=fingerprint href=#fingerprint&gt;&lt;img alt=&quot;(This is a fingerprinting vector.)&quot; src=<A HREF="http://images.whatwg.org/fingerprint.png">http://images.whatwg.org/fingerprint.png</A>&gt;&lt;/a&gt;
+  &lt;/p&gt;
+
+  &lt;pre class=idl&gt;partial interface &lt;a href=#screen&gt;Screen&lt;/a&gt; {
+  readonly attribute double &lt;a href=#dom-screen-canvasresolution title=dom-screen-canvasResolution&gt;canvasResolution&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;window&lt;/var&gt; . &lt;code title=dom-Window-screen&gt;screen&lt;/code&gt; . &lt;code title=dom-screen-canvasResolution&gt;&lt;a href=#dom-screen-canvasresolution&gt;canvasResolution&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the pixel density that has been, or will be, used for bitmaps during this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-screen-canvasresolution title=dom-screen-canvasResolution&gt;&lt;code&gt;canvasResolution&lt;/code&gt;&lt;/dfn&gt; attribute of
+  the &lt;code&gt;&lt;a href=#screen&gt;Screen&lt;/a&gt;&lt;/code&gt; object must return the pixel density, in image pixels per coordinate space
+  units, that any &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; bitmaps created
+  during this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; will use (or have used). &lt;a href=#refsCSSOMVIEW&gt;[CSSOMVIEW]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
   &lt;div class=impl&gt;
 
-  &lt;h5 id=color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/h5&gt;
+  &lt;h5 id=color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.4 &lt;/span&gt;Color spaces and color correction&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; APIs must perform color correction at only two points: when rendering
-  images with their own gamma correction and color space information onto the canvas, to convert the
-  image to the color space used by the canvas (e.g. using the 2D Context's &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method with an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;
+  images with their own gamma correction and color space information onto a bitmap, to convert the
+  image to the color space used by the bitmaps (e.g. using the 2D Context's &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method with an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;
   object), and when rendering the actual canvas bitmap to the output device.&lt;/p&gt;
 
   &lt;p class=note&gt;Thus, in the 2D context, colors used to draw shapes onto the canvas will exactly
@@ -41848,76 +42350,94 @@
   &lt;/div&gt;
 
 
-&lt;!--ADD-TOPIC:Security--&gt;
+
+  &lt;h5 id=serializing-bitmaps-to-a-file&gt;&lt;span class=secno&gt;4.8.11.5 &lt;/span&gt;Serializing bitmaps to a file&lt;/h5&gt;
+
   &lt;div class=impl&gt;
 
-  &lt;h5 id=security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements&lt;/h5&gt;
+  &lt;p&gt;When a user agent is to create &lt;dfn id=a-serialization-of-the-bitmap-as-a-file&gt;a serialization of the bitmap as a file&lt;/dfn&gt;, optionally
+  with some given &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and optionally with a &lt;var title=&quot;&quot;&gt;native&lt;/var&gt;
+  flag set, it must create an image file in the format given by the first value of &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, or, if there are no &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, in the PNG format. &lt;a href=#refsPNG&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;&lt;strong&gt;Information leakage&lt;/strong&gt; can occur if scripts from
-  one &lt;a href=#origin&gt;origin&lt;/a&gt; can access information (e.g. read pixels)
-  from images from another origin (one that isn't the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt;).&lt;/p&gt;
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag is set, or if the bitmap has one pixel per coordinate
+  space unit, then the image file must have the same pixel data (before compression, if applicable)
+  as the bitmap, and if the file format used supports encoding resolution metadata, the resolution
+  of that bitmap (device pixels per coordinate space units being interpreted as image pixels per CSS
+  pixel) must be given as well.&lt;/p&gt;
 
-  &lt;p&gt;To mitigate this, &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements are defined to
-  have a flag indicating whether they are &lt;i&gt;origin-clean&lt;/i&gt;. All
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements must start with their
-  &lt;i&gt;origin-clean&lt;/i&gt; set to true. The flag must be set to false if
-  any of the following actions occur:&lt;/p&gt;
+  &lt;p&gt;Otherwise, the image file's pixel data must be the bitmap's pixel data scaled to one image
+  pixel per coordinate space unit, and if the file format used supports encoding resolution
+  metadata, the resolution must be given as 96dpi (one image pixel per CSS pixel).&lt;/p&gt;
 
-  &lt;ul&gt;&lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method is
-   called with an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or an
-   &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#origin&gt;origin&lt;/a&gt; is not the
-   &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as that of the
-   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-   element.&lt;/li&gt;
+  &lt;p&gt;If &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; is not empty, the first value must be interpreted as a &lt;a href=#mime-type title=&quot;MIME type&quot;&gt;MIME type&lt;/a&gt; giving the format to use. If the type has any parameters, it
+  must be treated as not supported.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method is
-   called with an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; whose
-   &lt;i&gt;origin-clean&lt;/i&gt; flag is false.&lt;/li&gt;
+  &lt;p class=example&gt;For example, the value &quot;&lt;code&gt;image/png&lt;/code&gt;&quot; would mean to generate a PNG
+  image, the value &quot;&lt;code&gt;image/jpeg&lt;/code&gt;&quot; would mean to generate a JPEG image, and the value
+  &quot;&lt;code&gt;image/svg+xml&lt;/code&gt;&quot; would mean to generate an SVG image (which would require that the
+  user agent track how the bitmap was generated, an unlikely, though potentially awesome,
+  feature).&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; attribute is set
-   to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that was created from an
-   &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-   whose &lt;a href=#origin&gt;origin&lt;/a&gt; was not the &lt;a href=#same-origin title=&quot;same
-   origin&quot;&gt;same&lt;/a&gt; as that of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object
-   that owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element when the pattern was
-   created.&lt;/li&gt;
+  &lt;p&gt;User agents must support PNG (&quot;&lt;code&gt;image/png&lt;/code&gt;&quot;). User agents may support other types.
+  If the user agent does not support the requested type, it must create the file using the PNG
+  format. &lt;a href=#refsPNG&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; attribute is set
-   to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that was created from an
-   &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; whose &lt;i&gt;origin-clean&lt;/i&gt; flag was
-   false when the pattern was created.&lt;/li&gt;
+  &lt;p&gt;User agents must &lt;a href=#converted-to-ascii-lowercase title=&quot;converted to ASCII lowercase&quot;&gt;convert the provided type to ASCII
+  lowercase&lt;/a&gt; before establishing if they support that type.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; attribute is
-   set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that was created from an
-   &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-   whose &lt;a href=#origin&gt;origin&lt;/a&gt; was not the &lt;a href=#same-origin title=&quot;same
-   origin&quot;&gt;same&lt;/a&gt; as that of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object
-   that owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element when the pattern was
-   created.&lt;/li&gt;
+  &lt;p&gt;For image types that do not support an alpha channel, the serialized image must be the bitmap
+  image composited onto a solid black background using the source-over operator.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; attribute is
-   set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that was created from an
-   &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; whose &lt;i&gt;origin-clean&lt;/i&gt; flag was
-   false when the pattern was created.&lt;/li&gt;
+  &lt;p&gt;If the first argument in &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; gives a type corresponding to one of the
+  types given in the first column of the following table, and the user agent supports that type,
+  then the subsequent arguments, if any, must be treated as described in the second cell of that
+  row.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; methods are
-   invoked and consider using a font that has an &lt;a href=#origin&gt;origin&lt;/a&gt;
-   that is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as that of
-   the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-   element. (The font doesn't even have to be used; all that matters
-   is whether the font was considered for any of the glyphs
-   drawn.)&lt;/li&gt; &lt;!-- because fonts could consider sensitive
-   material, I guess; and because that sensitivity could extend to
-   whether or not a particular glyph is in the font in the first
-   place. --&gt;
+  &lt;/div&gt;
 
-  &lt;/ul&gt;&lt;p&gt;The &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-canvas-toBlob&gt;&lt;a href=#dom-canvas-toblob&gt;toBlob()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-context-2d-getImageDataHD&gt;&lt;a href=#dom-context-2d-getimagedatahd&gt;getImageDataHD()&lt;/a&gt;&lt;/code&gt;
+  &lt;table id=canvas-serialization-arguments&gt;&lt;caption&gt;Arguments for serialization methods&lt;/caption&gt;
+   &lt;thead&gt;&lt;tr&gt;&lt;th&gt; Type &lt;th&gt; Other arguments &lt;th&gt; Reference
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code&gt;image/jpeg&lt;/code&gt;
+     &lt;td&gt; The second argument&lt;span class=impl&gt;, if it&lt;/span&gt; is a number in the range 0.0 to 1.0
+     inclusive&lt;span class=impl&gt;, must be&lt;/span&gt; treated as the desired quality level. &lt;span class=impl&gt;If it is not a number or is outside that range, the user agent must use its
+     default value, as if the argument had been omitted.&lt;/span&gt;
+     &lt;td&gt; &lt;a href=#refsJPEG&gt;[JPEG]&lt;/a&gt;
+  &lt;/table&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;For the purposes of these rules, an argument is considered to be a number if it is converted to
+  an IDL double value by the rules for handling arguments of type &lt;code title=&quot;&quot;&gt;any&lt;/code&gt; in the
+  Web IDL specification. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;Other arguments must be ignored and must not cause the user agent to throw an exception. A
+  future version of this specification will probably define other parameters to be passed to these
+  methods to allow authors to more carefully control compression settings, image metadata, etc.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;div class=impl&gt;
+
+  &lt;h5 id=security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.6 &lt;/span&gt;Security with &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Information leakage&lt;/strong&gt; can occur if scripts from
+  one &lt;a href=#origin&gt;origin&lt;/a&gt; can access information (e.g. read pixels)
+  from images from another origin (one that isn't the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt;).&lt;/p&gt;
+
+  &lt;p&gt;To mitigate this, bitmaps used with &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements are defined to have a flag
+  indicating whether they are &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt;. All
+  bitmaps start with their &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; set to
+  true. The flag is set to false when cross-origin images or fonts are used.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-canvas-toBlob&gt;&lt;a href=#dom-canvas-toblob&gt;toBlob()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-context-2d-getImageDataHD&gt;&lt;a href=#dom-context-2d-getimagedatahd&gt;getImageDataHD()&lt;/a&gt;&lt;/code&gt;
   methods check the flag and will throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt;
   exception rather than leak cross-origin data.&lt;/p&gt;
 
-  &lt;p class=note&gt;Even resetting the canvas state by changing its
-  &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; or &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; attributes doesn't reset
-  the &lt;i&gt;origin-clean&lt;/i&gt; flag.&lt;/p&gt;
+  &lt;p&gt;The flag can be reset in certain situations; for example, when a
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; is bound to a new &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;, the bitmap is cleared
+  and its flag reset.&lt;/p&gt;
 
   &lt;/div&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
@@ -67586,8 +68106,7 @@
      &lt;td&gt;none
      &lt;td&gt;none
 
-  &lt;/table&gt;&lt;p&gt;&lt;small&gt;&dagger; This case is only possible if the &lt;code title=attr-iframe-sandbox&gt;&lt;a href=#attr-iframe-sandbox&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute also allows
-  scripts.&lt;/small&gt;&lt;/p&gt;
+  &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;&dagger; This case is only possible if the &lt;code title=attr-iframe-sandbox&gt;&lt;a href=#attr-iframe-sandbox&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute also allows scripts.&lt;/small&gt;&lt;/p&gt;
 
   &lt;div class=impl&gt;
 
@@ -74877,18 +75396,16 @@
   &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must continually run through the
   following steps for as long as it exists:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the oldest &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; on one
-   of the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task
-   queues&lt;/a&gt;, ignoring tasks whose associated
-   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;. The user
-   agent may pick any &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the oldest &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; on one of the &lt;a href=#event-loop&gt;event
+   loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;, if any, ignoring tasks whose
+   associated &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;. The user agent may pick any
+   &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;!-- warning! if you renumber these steps, make sure to update the
-   &quot;spin the event loop&quot; algorithm below! --&gt;
+   &lt;!-- warning! if you renumber these steps, make sure to update the &quot;spin the event loop&quot;
+   algorithm below! --&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt; is now owned by the
-   &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, release it so that it is once again
-   free.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt; is now owned by the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, release it
+   so that it is once again free.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Remove that task from its &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
 
@@ -74927,17 +75444,16 @@
    &lt;li&gt;&lt;p&gt;Let the &lt;a href=#running-mutation-observers&gt;running mutation observers&lt;/a&gt; flag be
    false.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=provide-a-stable-state&gt;provide a stable state&lt;/dfn&gt;, if
-  any asynchronously-running algorithms are &lt;dfn id=await-a-stable-state title=&quot;await a stable
-  state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user agent must run
-  their &lt;dfn id=synchronous-section&gt;synchronous section&lt;/dfn&gt; and then resume running their
-  asynchronous algorithm (if appropriate).&lt;/p&gt;
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=provide-a-stable-state&gt;provide a stable state&lt;/dfn&gt;, if any asynchronously-running
+  algorithms are &lt;dfn id=await-a-stable-state title=&quot;await a stable state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user
+  agent must run their &lt;dfn id=synchronous-section&gt;synchronous section&lt;/dfn&gt; and then resume running their asynchronous
+  algorithm (if appropriate).&lt;/p&gt;
 
-  &lt;p class=note&gt;A &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt; never mutates
-  the DOM, runs any script, or has any other side-effects.&lt;/p&gt;
+  &lt;p class=note&gt;A &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt; never mutates the DOM, runs any script, or has
+  any side-effects detectable from another &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt;, and thus &lt;a href=#synchronous-section title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/a&gt; can be run in any order.&lt;/p&gt;
 
-  &lt;p class=note&gt;Steps in &lt;a href=#synchronous-section title=&quot;synchronous
-  section&quot;&gt;synchronous sections&lt;/a&gt; are marked with &#8987;.&lt;/p&gt;
+  &lt;p class=note&gt;Steps in &lt;a href=#synchronous-section title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/a&gt; are marked
+  with &#8987;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;When an algorithm says to &lt;dfn id=spin-the-event-loop&gt;spin the event loop&lt;/dfn&gt; until
   a condition &lt;var title=&quot;&quot;&gt;goal&lt;/var&gt; is met, the user agent must run
@@ -77432,7 +77948,7 @@
 &lt;!--ADD-TOPIC:Security--&gt;
   &lt;div class=impl&gt;
 
-  &lt;h5 id=security-and-privacy&gt;&lt;span class=secno&gt;7.5.1.3 &lt;/span&gt;Security and privacy&lt;/h5&gt;
+  &lt;h6 id=security-and-privacy&gt;&lt;span class=secno&gt;7.5.1.2.1 &lt;/span&gt;Security and privacy&lt;/h6&gt;
 
   &lt;p&gt;These mechanisms can introduce a number of concerns, in
   particular privacy concerns.&lt;/p&gt;
@@ -77517,7 +78033,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=sample-handler-impl&gt;&lt;span class=secno&gt;7.5.1.4 &lt;/span&gt;Sample user interface&lt;/h5&gt;
+  &lt;h6 id=sample-handler-impl&gt;&lt;span class=secno&gt;7.5.1.2.2 &lt;/span&gt;Sample user interface&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -77563,7 +78079,7 @@
 
 
 
-  &lt;h5 id=manually-releasing-the-storage-mutex&gt;&lt;span class=secno&gt;7.5.1.5 &lt;/span&gt;Manually releasing the storage mutex&lt;/h5&gt;
+  &lt;h5 id=manually-releasing-the-storage-mutex&gt;&lt;span class=secno&gt;7.5.1.3 &lt;/span&gt;Manually releasing the storage mutex&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[NoInterfaceObject]
 interface &lt;dfn id=navigatorstorageutils&gt;NavigatorStorageUtils&lt;/dfn&gt; {
@@ -77735,10 +78251,242 @@
     &lt;li&gt;&lt;p&gt;Return 1.&lt;/li&gt;
 
    &lt;/ol&gt;&lt;/div&gt;
-&lt;!--TOPIC:HTML--&gt;
 
 
+&lt;!--TOPIC:Canvas--&gt;
 
+  &lt;h3 id=images&gt;&lt;span class=secno&gt;7.6 &lt;/span&gt;Images&lt;/h3&gt;
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=imagebitmap&gt;ImageBitmap&lt;/dfn&gt; {
+  // opaque object
+};
+
+callback &lt;dfn id=imagebitmapcallback&gt;ImageBitmapCallback&lt;/dfn&gt; = void (&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt; image);
+
+[NoInterfaceObject]
+interface &lt;dfn id=imagebitmapfactories&gt;ImageBitmapFactories&lt;/dfn&gt; {
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#blob&gt;Blob&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
+};
+&lt;a href=#window&gt;Window&lt;/a&gt; implements &lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;;
+&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt; implements &lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;;&lt;/pre&gt;
+
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object represents a bitmap image that can be painted to a canvas
+  without undue latency.&lt;/p&gt;
+
+  &lt;p class=note&gt;The exact judgement of what is undue latency of this is left up to the
+  implementer, but in general if making use of the bitmap requires network I/O, or even local disk
+  I/O, then the latency is probably undue; whereas if it only requires a blocking read from a GPU or
+  system RAM, the latency is probably acceptable.&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=dom-createImageBitmap&gt;&lt;a href=#dom-createimagebitmap&gt;createImageBitmap&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Takes &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, which can be an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element,
+    &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object, an
+    &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object, or a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object, and
+    asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; as its
+    argument when it has created one.&lt;/p&gt;
+
+    &lt;p&gt;If no &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object can be constructed, for example because the provided
+    &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; data is not actually an image, then the &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;
+    is invoked with null as the value instead.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the source image is not in a valid
+    state (e.g. an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element that hasn't finished loading, or a
+    &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object whose bitmap data has zero length along one or both
+    dimensions). Throws a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception if the script is not allowed to
+    access the image data of the source image (e.g. a &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; that is
+    &lt;a href=#cors-cross-origin&gt;CORS-cross-origin&lt;/a&gt;, or a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; being drawn on by a script in a worker
+    from another &lt;a href=#origin&gt;origin&lt;/a&gt;).&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object always has associated bitmap data, with a width and a
+  height. However, it is possible for this data to be corrupted. If an &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt;
+  object's media data can be decoded without errors, it is said to be &lt;dfn id=concept-imagebitmap-good title=concept-ImageBitmap-good&gt;fully decodable&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object can be obtained from a variety of different objects, using
+  the &lt;dfn id=dom-createimagebitmap title=dom-createImageBitmap&gt;&lt;code&gt;createImageBitmap()&lt;/code&gt;&lt;/dfn&gt; method. This method
+  takes two arguments, &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;. When invoked, the
+  method must act as follows:&lt;/p&gt;
+  &lt;!-- the canvas createPattern() and drawImage() methods have similar requirements --&gt;
+
+  &lt;dl&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#img-all title=img-all&gt;completely
+     available&lt;/a&gt;, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these
+     steps.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's image is not the &lt;a href=#same-origin&gt;same
+     origin&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;, then throw a
+     &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's media data is not a bitmap (e.g. it's a vector
+     graphic), then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these
+     steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+     element's media data. If this is an animated image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's
+     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
+     the first frame of the animation.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;, then throw an
+     &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element is not the &lt;a href=#same-origin&gt;same
+     origin&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;, then throw a
+     &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+     attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then throw an
+     &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the frame at the
+     &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, at the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt; (i.e. after any aspect-ratio
+     correction has been applied).&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data does not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw an
+     &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap has either a horizontal dimension or a
+     vertical dimension equal to zero, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and
+     abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the
+     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object has been neutered through the &lt;code title=dom-Blob-close&gt;close&lt;/code&gt; method, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
+     exception and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Read the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object's data. If an &lt;a href=#file-error-read title=file-error-read&gt;error
+     occurs during reading of the object&lt;/a&gt;, then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with null as the argument, and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Apply the &lt;a href=#content-type-sniffing:-image title=&quot;Content-Type sniffing: image&quot;&gt;image sniffing rules&lt;/a&gt; to
+     determine the file format of the image data, with MIME type of the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; (as given
+     by the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object's &lt;code title=dom-Blob-type&gt;type&lt;/code&gt; attribute) giving the
+     official type.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the image data is not in a supported file format (e.g. it's not actually an image at
+     all), or if the image data is corrupted in some fatal way such that the image dimensions cannot
+     be obtained, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with null as the
+     argument, and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be the image data read from the
+     &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object. If this is an animated image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's
+     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
+     the first frame of the animation.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be the image data given by the
+     &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; does
+     not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw
+     an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; has
+     either a horizontal dimension or a vertical dimension equal to zero, then throw an
+     &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the
+     &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;/div&gt;
+
+
+&lt;!--TOPIC:HTML--&gt;
+
   &lt;h2 id=editing&gt;&lt;span class=secno&gt;8 &lt;/span&gt;&lt;dfn&gt;User interaction&lt;/dfn&gt;&lt;/h2&gt;
 
 
@@ -83583,9 +84331,9 @@
 &lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt; implements &lt;a href=#windowbase64&gt;WindowBase64&lt;/a&gt;;&lt;/pre&gt;
 
 
-  &lt;p&gt;The DOM APIs (&lt;code&gt;&lt;a href=#node&gt;Node&lt;/a&gt;&lt;/code&gt; objects, &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
-  objects, etc) are not available to workers in this version of this
-  specification.&lt;/p&gt;
+  &lt;p&gt;The DOM APIs &mdash; specifically, all the interfaces defind in the DOM Core specification
+  other than exceptions &mdash; must not be &lt;a href=#expose title=expose&gt;exposed&lt;/a&gt; if the
+  &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt; is a &lt;a href=#worker-environment&gt;worker environment&lt;/a&gt;. &lt;a href=#hrefDOMCORE&gt;[DOMCORE]&lt;/a&gt;&lt;/p&gt;
 
 
   &lt;h4 id=importing-scripts-and-libraries&gt;&lt;span class=secno&gt;9.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/h4&gt;
@@ -97538,8 +98286,8 @@
       &lt;tr&gt;&lt;td&gt;7
        &lt;td&gt;x&lt;!----&gt;xx-large
        &lt;td&gt;&lt;i&gt;see below&lt;/i&gt;
-    &lt;/table&gt;&lt;p&gt;The 'x&lt;!----&gt;xx-large' value is a non-CSS value used here to
-    indicate a font size 50% larger than 'xx-large'.&lt;/p&gt;
+    &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;The 'x&lt;!----&gt;xx-large' value is a non-CSS value used here to
+    indicate a font size 50% larger than 'xx-large'.&lt;/small&gt;&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -98364,10 +99112,11 @@
   &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; elements are expected to be treated as replaced
   elements.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#represents&gt;represents&lt;/a&gt;
-  &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; is expected to be treated as a
-  replaced element. Other &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements are expected to
-  be treated as ordinary elements in the rendering model.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#represents&gt;represents&lt;/a&gt; &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; is
+  expected to be treated as a replaced element; the contents of such elements are the element's
+  bitmap, if any, or else a transparent black bitmap with the same intrinsic dimensions as the
+  element. Other &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements are expected to be treated as ordinary elements in the
+  rendering model.&lt;/p&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#represents&gt;represents&lt;/a&gt; an
   image, plugin, or &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt; is expected
@@ -98436,7 +99185,7 @@
 &lt;!--TOPIC:Rendering--&gt;
   &lt;div class=impl&gt;
 
-  &lt;h4 id=images&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
+  &lt;h4 id=images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element
   when its &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in
@@ -103187,7 +103936,8 @@
      &lt;td&gt;empty&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
-    &lt;/table&gt;&lt;p&gt;An asterisk (*) in a cell indicates that the actual rules are more complicated than indicated in the table above.&lt;/p&gt;
+    &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
+  complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
 
   &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that
   list the given categories in their content model, not to elements
@@ -104342,7 +105092,8 @@
      &lt;td&gt; How the value of the form control is to be wrapped for &lt;a href=#form-submission&gt;form submission&lt;/a&gt;
      &lt;td&gt; &quot;&lt;code title=attr-textarea-wrap-soft&gt;&lt;a href=#attr-textarea-wrap-soft&gt;soft&lt;/a&gt;&lt;/code&gt;&quot;;
           &quot;&lt;code title=attr-textarea-wrap-hard&gt;&lt;a href=#attr-textarea-wrap-hard&gt;hard&lt;/a&gt;&lt;/code&gt;&quot;
-  &lt;/table&gt;&lt;p&gt;An asterisk (*) in a cell indicates that the actual rules are more complicated than indicated in the table above.&lt;/p&gt;
+  &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
+  complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
 
   &lt;hr&gt;&lt;table id=ix-event-handlers&gt;&lt;caption&gt;List of event handler content attributes&lt;/caption&gt;
    &lt;thead&gt;&lt;tr&gt;&lt;th&gt; Attribute
@@ -105093,6 +105844,7 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#closeevent&gt;CloseEvent&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#domelementmap&gt;DOMElementMap&lt;/a&gt;&lt;/code&gt;
@@ -105188,6 +105940,8 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#hashchangeevent&gt;HashChangeEvent&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#history-0&gt;History&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#mediacontroller&gt;MediaController&lt;/a&gt;&lt;/code&gt;
@@ -105327,7 +106081,7 @@
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/csswg/css3-color/">http://dev.w3.org/csswg/css3-color/</A>&gt;CSS Color Module Level 3&lt;/a&gt;&lt;/cite&gt;, T. &Ccedil;elik, C. Lilley, L. Baron. W3C.&lt;/dd&gt;
 
    &lt;dt id=refsCSSFONTS&gt;[CSSFONTS]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://www.w3.org/TR/css3-fonts/">http://www.w3.org/TR/css3-fonts/</A>&gt;CSS Fonts Module Level 3&lt;/a&gt;&lt;/cite&gt;, J. Daggett. W3C.&lt;/dd&gt;
+   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/csswg/css3-fonts/">http://dev.w3.org/csswg/css3-fonts/</A>&gt;CSS Fonts Module Level 3&lt;/a&gt;&lt;/cite&gt;, J. Daggett. W3C.&lt;/dd&gt;
 
    &lt;dt id=refsCSSIMAGES&gt;[CSSIMAGES]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/csswg/css4-images/">http://dev.w3.org/csswg/css4-images/</A>&gt;CSS Image Values and Replaced Content Module&lt;/a&gt;&lt;/cite&gt;, E. Etemad, T. Atkins. W3C.&lt;/dd&gt;

Modified: index
===================================================================
--- index	2012-11-06 01:54:26 UTC (rev 7508)
+++ index	2012-11-16 20:26:07 UTC (rev 7509)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 6 November 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 16 November 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -609,31 +609,35 @@
        &lt;li&gt;&lt;a href=#best-practices-for-implementors-of-media-elements&gt;&lt;span class=secno&gt;4.8.10.19 &lt;/span&gt;Best practices for implementors of media elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-canvas-element&gt;&lt;span class=secno&gt;4.8.11 &lt;/span&gt;The &lt;code&gt;canvas&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#2dcontext&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;The 2D context&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#proxying-canvases-to-workers&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;Proxying canvases to workers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#2dcontext&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;The 2D rendering context&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#resolution&gt;&lt;span class=secno&gt;4.8.11.1.1 &lt;/span&gt;Resolution&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.1.2 &lt;/span&gt;The canvas state&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawingstyle-objects&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;&lt;code&gt;DrawingStyle&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#text-styles&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Text styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#building-paths&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Building paths&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#path-objects&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;&lt;code&gt;Path&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#transformations&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Transformations&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing rectangles to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing text to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing paths to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#hit-regions&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Hit regions&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#image-smoothing&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Image smoothing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.19 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.20 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.21 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#implementation-notes&gt;&lt;span class=secno&gt;4.8.11.2.1 &lt;/span&gt;Implementation notes&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.2.2 &lt;/span&gt;The canvas state&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawingstyle-objects&gt;&lt;span class=secno&gt;4.8.11.2.3 &lt;/span&gt;&lt;code&gt;DrawingStyle&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.2.4 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#text-styles&gt;&lt;span class=secno&gt;4.8.11.2.5 &lt;/span&gt;Text styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#building-paths&gt;&lt;span class=secno&gt;4.8.11.2.6 &lt;/span&gt;Building paths&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#path-objects&gt;&lt;span class=secno&gt;4.8.11.2.7 &lt;/span&gt;&lt;code&gt;Path&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#transformations&gt;&lt;span class=secno&gt;4.8.11.2.8 &lt;/span&gt;Transformations&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#image-sources-for-2d-rendering-contexts&gt;&lt;span class=secno&gt;4.8.11.2.9 &lt;/span&gt;Image sources for 2D rendering contexts&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.2.10 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-rectangles-to-the-bitmap&gt;&lt;span class=secno&gt;4.8.11.2.11 &lt;/span&gt;Drawing rectangles to the bitmap&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-text-to-the-bitmap&gt;&lt;span class=secno&gt;4.8.11.2.12 &lt;/span&gt;Drawing text to the bitmap&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.2.13 &lt;/span&gt;Drawing paths to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-images&gt;&lt;span class=secno&gt;4.8.11.2.14 &lt;/span&gt;Drawing images&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#hit-regions&gt;&lt;span class=secno&gt;4.8.11.2.15 &lt;/span&gt;Hit regions&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.2.16 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.2.17 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#image-smoothing&gt;&lt;span class=secno&gt;4.8.11.2.18 &lt;/span&gt;Image smoothing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.2.19 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.2.20 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.2.21 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.2.22 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#pixel-density&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Pixel density&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.4 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#serializing-bitmaps-to-a-file&gt;&lt;span class=secno&gt;4.8.11.5 &lt;/span&gt;Serializing bitmaps to a file&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.6 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-area-element&gt;&lt;span class=secno&gt;4.8.13 &lt;/span&gt;The &lt;code&gt;area&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#image-maps&gt;&lt;span class=secno&gt;4.8.14 &lt;/span&gt;Image maps&lt;/a&gt;
@@ -976,11 +980,13 @@
      &lt;li&gt;&lt;a href=#the-navigator-object&gt;&lt;span class=secno&gt;7.5.1 &lt;/span&gt;The &lt;code&gt;Navigator&lt;/code&gt; object&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#client-identification&gt;&lt;span class=secno&gt;7.5.1.1 &lt;/span&gt;Client identification&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#custom-handlers&gt;&lt;span class=secno&gt;7.5.1.2 &lt;/span&gt;Custom scheme and content handlers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#security-and-privacy&gt;&lt;span class=secno&gt;7.5.1.3 &lt;/span&gt;Security and privacy&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sample-handler-impl&gt;&lt;span class=secno&gt;7.5.1.4 &lt;/span&gt;Sample user interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#manually-releasing-the-storage-mutex&gt;&lt;span class=secno&gt;7.5.1.5 &lt;/span&gt;Manually releasing the storage mutex&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-external-interface&gt;&lt;span class=secno&gt;7.5.2 &lt;/span&gt;The &lt;code&gt;External&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#custom-handlers&gt;&lt;span class=secno&gt;7.5.1.2 &lt;/span&gt;Custom scheme and content handlers&lt;/a&gt;
+        &lt;ol&gt;
+         &lt;li&gt;&lt;a href=#security-and-privacy&gt;&lt;span class=secno&gt;7.5.1.2.1 &lt;/span&gt;Security and privacy&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#sample-handler-impl&gt;&lt;span class=secno&gt;7.5.1.2.2 &lt;/span&gt;Sample user interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#manually-releasing-the-storage-mutex&gt;&lt;span class=secno&gt;7.5.1.3 &lt;/span&gt;Manually releasing the storage mutex&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-external-interface&gt;&lt;span class=secno&gt;7.5.2 &lt;/span&gt;The &lt;code&gt;External&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;7.6 &lt;/span&gt;Images&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#editing&gt;&lt;span class=secno&gt;8 &lt;/span&gt;User interaction&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#the-hidden-attribute&gt;&lt;span class=secno&gt;8.1 &lt;/span&gt;The &lt;code&gt;hidden&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
@@ -1305,7 +1311,7 @@
    &lt;li&gt;&lt;a href=#replaced-elements&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Replaced elements&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#embedded-content-2&gt;&lt;span class=secno&gt;14.4.1 &lt;/span&gt;Embedded content&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;14.4.3 &lt;/span&gt;Attributes for embedded content and images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;14.4.4 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;14.4.5 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
@@ -4229,13 +4235,15 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;This specification uses the following interfaces defined in the
+    &lt;p&gt;This specification uses the following features defined in the
     File API specification: &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
 
     &lt;ul class=brief&gt;&lt;li&gt;&lt;dfn id=blob&gt;&lt;code&gt;Blob&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;&lt;dfn id=file&gt;&lt;code&gt;File&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;&lt;dfn id=filelist&gt;&lt;code&gt;FileList&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
-
+     &lt;li&gt;&lt;dfn id=blob.close()&gt;&lt;code title=dom-Blob-close&gt;Blob.close()&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;dfn id=blob.type&gt;&lt;code title=dom-Blob-type&gt;Blob.type&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;The concept of &lt;dfn id=file-error-read title=file-error-read&gt;read errors&lt;/dfn&gt;&lt;/li&gt;
     &lt;/ul&gt;&lt;p&gt;It also uses the following interface defined in the File System
     API specification: &lt;a href=#refsFILESYSTEMAPI&gt;[FILESYSTEMAPI]&lt;/a&gt;&lt;/p&gt;
 
@@ -4325,6 +4333,10 @@
     &lt;p&gt;The term &lt;dfn id=css-styling-attribute&gt;CSS styling attribute&lt;/dfn&gt; is defined in the
     &lt;cite&gt;CSS Style Attributes&lt;/cite&gt; specification. &lt;a href=#refsCSSATTR&gt;[CSSATTR]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's use of fonts depends on the features
+    described in the CSS Fonts specification, including in particular
+    &lt;dfn id=fontloader&gt;&lt;code&gt;FontLoader&lt;/code&gt;&lt;/dfn&gt;. &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -4340,6 +4352,16 @@
     &lt;/ul&gt;&lt;!-- mention that the parser supports it? --&gt;&lt;/dd&gt;
 
 
+   &lt;dt&gt;WebGL&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The following interface is defined in the WebGL specification: &lt;a href=#refsWEBGL&gt;[WEBGL]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;&lt;dfn id=webglrenderingcontext&gt;&lt;code&gt;WebGLRenderingContext&lt;/code&gt;&lt;/dfn&gt;
+    &lt;/ul&gt;&lt;/dd&gt;
+
+
 &lt;!--TOPIC:HTML--&gt;
 
    &lt;!-- mention that the parser supports mathml? --&gt;
@@ -7199,11 +7221,9 @@
 
   &lt;/ol&gt;&lt;/div&gt;
 
-  &lt;hr&gt;&lt;!--2DCANVAS--&gt;&lt;p class=note&gt;The &lt;a href=#canvas-context-2d title=canvas-context-2d&gt;2D graphics
-  context&lt;/a&gt; has a separate color syntax that also handles
-  opacity.&lt;/p&gt;
+  &lt;hr&gt;&lt;p class=note&gt;The &lt;a href=#canvas-context-2d title=canvas-context-2d&gt;2D graphics context&lt;/a&gt; has a separate
+  color syntax that also handles opacity.&lt;/p&gt;
 
-  &lt;!--2DCANVAS--&gt;
 
 
   &lt;h4 id=space-separated-tokens&gt;&lt;span class=secno&gt;2.5.7 &lt;/span&gt;Space-separated tokens&lt;/h4&gt;
@@ -9787,6 +9807,7 @@
 
   &lt;ul class=brief&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt;
   &lt;/ul&gt;&lt;div class=impl&gt;
 
   &lt;h4 id=safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;Safe passing of structured data&lt;/h4&gt;
@@ -9885,6 +9906,11 @@
      algorithm&lt;/a&gt; recursively with the value of the &lt;code title=dom-imagedata-data&gt;&lt;a href=#dom-imagedata-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute on &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;input&lt;/var&gt;&quot;
      argument and &lt;var title=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var title=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument.&lt;/dd&gt;
 
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object
+     whose bitmap data is a copy of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;'s bitmap data.&lt;/dd&gt;
+
 &lt;!--(when we add this, make sure to throw DataCloneError if these objects are already closed)
      &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;ArrayBuffer&lt;/code&gt; object&lt;/dt&gt;
 
@@ -24464,7 +24490,10 @@
   height is the image's intrinsic height, and whose appearance is the
   intrinsic appearance of the image.&lt;/p&gt;
 
-  &lt;p&gt;User agents may obtain images immediately or on demand.&lt;/p&gt;
+  &lt;p&gt;In a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; where &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is
+  disabled&lt;/a&gt;, user agents may obtain images immediately or on demand. In a &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt; where &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is enabled&lt;/a&gt;, user agents
+  must obtain images immediately.&lt;/p&gt;
 
   &lt;p&gt;A user agent that obtains images immediately must synchronously
   &lt;a href=#update-the-image-data&gt;update the image data&lt;/a&gt; of an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element
@@ -25273,8 +25302,8 @@
 
   &lt;p&gt;The IDL attribute &lt;dfn id=dom-img-complete title=dom-img-complete&gt;&lt;code&gt;complete&lt;/code&gt;&lt;/dfn&gt; must return
   true if any of the following conditions is true:&lt;/p&gt;
-  &lt;ul class=brief&gt;&lt;li&gt;The &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is omitted.
-   &lt;li&gt;The &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute's value is the empty string.
+  &lt;ul class=brief&gt;&lt;li&gt;Both the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code title=attr-img-srcset&gt;&lt;a href=#attr-img-srcset&gt;srcset&lt;/a&gt;&lt;/code&gt; attributes are omitted.
+   &lt;li&gt;The the &lt;code title=attr-img-srcset&gt;&lt;a href=#attr-img-srcset&gt;srcset&lt;/a&gt;&lt;/code&gt; attribute is omitted and the &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute's value is the empty string. &lt;!-- we only have this hack for src=&quot;&quot;, not srcset=&quot;&quot;; present but empty or bogus srcset=&quot;&quot; still means complete=false if it's not in the img-error state --&gt;
    &lt;li&gt;The final &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; has been &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt;, but has not yet been run, and the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not in the &lt;a href=#img-error title=img-error&gt;broken&lt;/a&gt; state.
    &lt;li&gt;The &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is &lt;a href=#img-all title=img-all&gt;completely available&lt;/a&gt;.
   &lt;/ul&gt;&lt;p&gt;Otherwise, the attribute must return false.&lt;/p&gt;
@@ -36136,17 +36165,22 @@
    &lt;dd&gt;&lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--ADD-TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-    &lt;pre class=idl&gt;interface &lt;dfn id=htmlcanvaselement&gt;HTMLCanvasElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
+    &lt;pre class=idl&gt;typedef (&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; or &lt;a href=#webglrenderingcontext&gt;WebGLRenderingContext&lt;/a&gt;) &lt;dfn id=renderingcontext&gt;RenderingContext&lt;/dfn&gt;;
+
+interface &lt;dfn id=htmlcanvaselement&gt;HTMLCanvasElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
            attribute unsigned long &lt;a href=#dom-canvas-width title=dom-canvas-width&gt;width&lt;/a&gt;;
            attribute unsigned long &lt;a href=#dom-canvas-height title=dom-canvas-height&gt;height&lt;/a&gt;;
 
+  &lt;a href=#renderingcontext&gt;RenderingContext&lt;/a&gt;? &lt;a href=#dom-canvas-getcontext title=dom-canvas-getContext&gt;getContext&lt;/a&gt;(DOMString contextId, any... arguments);
+  boolean &lt;a href=#dom-canvas-supportscontext title=dom-canvas-supportsContext&gt;supportsContext&lt;/a&gt;(DOMString contextId, any... arguments);
+
+  void &lt;a href=#dom-canvas-setcontext title=dom-canvas-setContext&gt;setContext&lt;/a&gt;(&lt;a href=#renderingcontext&gt;RenderingContext&lt;/a&gt; context);
+  &lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; &lt;a href=#dom-canvas-transfercontroltoproxy title=dom-canvas-transferControlToProxy&gt;transferControlToProxy&lt;/a&gt;();
+
   DOMString &lt;a href=#dom-canvas-todataurl title=dom-canvas-toDataURL&gt;toDataURL&lt;/a&gt;(optional DOMString type, any... arguments);
   DOMString &lt;a href=#dom-canvas-todataurlhd title=dom-canvas-toDataURLHD&gt;toDataURLHD&lt;/a&gt;(optional DOMString type, any... arguments);
   void &lt;a href=#dom-canvas-toblob title=dom-canvas-toBlob&gt;toBlob&lt;/a&gt;(&lt;a href=#filecallback&gt;FileCallback&lt;/a&gt;? _callback, optional DOMString type, any... arguments);
   void &lt;a href=#dom-canvas-toblobhd title=dom-canvas-toBlobHD&gt;toBlobHD&lt;/a&gt;(&lt;a href=#filecallback&gt;FileCallback&lt;/a&gt;? _callback, optional DOMString type, any... arguments);
-
-  object? &lt;a href=#dom-canvas-getcontext title=dom-canvas-getContext&gt;getContext&lt;/a&gt;(DOMString contextId, any... arguments);
-  boolean &lt;a href=#dom-canvas-supportscontext title=dom-canvas-supportsContext&gt;supportsContext&lt;/a&gt;(DOMString contextId, any... arguments);
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--REMOVE-TOPIC:DOM APIs--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element provides scripts with a resolution-dependent bitmap canvas,
@@ -36159,21 +36193,22 @@
   CSS and supporting technologies such as XBL.&lt;/p&gt;
 
   &lt;p&gt;When authors use the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, they must also provide content that, when
-  presented to the user, conveys essentially the same function or purpose as the bitmap canvas. This
-  content may be placed as content of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. The contents of the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any, are the element's &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;.&lt;/p&gt;
+  presented to the user, conveys essentially the same function or purpose as the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;' bitmap. This content may be placed as content of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+  element. The contents of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any, are the element's &lt;a href=#fallback-content&gt;fallback
+  content&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;In interactive visual media, if &lt;a href=#concept-n-script title=concept-n-script&gt;scripting is enabled&lt;/a&gt; for
+  &lt;hr&gt;&lt;p&gt;In interactive visual media, if &lt;a href=#concept-n-script title=concept-n-script&gt;scripting is enabled&lt;/a&gt; for
   the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, and if support for &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements has been enabled,
   the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; consisting
-  of a dynamically created image.&lt;/p&gt;
+  of a dynamically created image, the element's bitmap.&lt;/p&gt;
 
   &lt;p&gt;In non-interactive, static, visual media, if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has been
-  previously painted on (e.g. if the page was viewed in an interactive visual medium and is now
-  being printed, or if some script that ran during the page layout process painted on the element),
-  then the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; with
-  the current image and size. Otherwise, the element represents its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;
-  instead.&lt;/p&gt;
+  previously associated with a rendering context (e.g. if the page was viewed in an interactive
+  visual medium and is now being printed, or if some script that ran during the page layout process
+  painted on the element), then the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt;
+  &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; with the element's current bitmap and size. Otherwise, the element
+  represents its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt; instead.&lt;/p&gt;
 
   &lt;p&gt;In non-visual media, and in visual media if &lt;a href=#concept-n-noscript title=concept-n-noscript&gt;scripting is
   disabled&lt;/a&gt; for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element or if support for &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements
@@ -36189,7 +36224,7 @@
   elements in the &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;. (Focus has no effect on mouse interaction events.)
   &lt;a href=#refsDOMEVENTS&gt;[DOMEVENTS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has two attributes to control the size of the coordinate space:
+  &lt;hr&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has two attributes to control the size of the coordinate space:
   &lt;dfn id=attr-canvas-width title=attr-canvas-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=attr-canvas-height title=attr-canvas-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt;. These attributes, when specified, must have
   values that are &lt;a href=#valid-non-negative-integer title=&quot;valid non-negative integer&quot;&gt;valid non-negative integers&lt;/a&gt;. &lt;span class=impl&gt;The &lt;a href=#rules-for-parsing-non-negative-integers&gt;rules for parsing non-negative integers&lt;/a&gt; must be used to obtain their
   numeric values. If an attribute is missing, or if parsing its value returns an error, then the
@@ -36197,63 +36232,73 @@
   attribute defaults to 300, and the &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; attribute
   defaults to 150.&lt;/p&gt;
 
-  &lt;p&gt;The intrinsic dimensions of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element equal the size of the coordinate
-  space, with the numbers interpreted in CSS pixels. However, the element can be sized arbitrarily
-  by a style sheet. During rendering, the image is scaled to fit this layout size.&lt;/p&gt;
+  &lt;p&gt;The intrinsic dimensions of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element when it &lt;a href=#represents&gt;represents&lt;/a&gt;
+  &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; are equal to the dimensions of the element's bitmap.&lt;/p&gt;
 
+  &lt;p class=note&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element can be sized arbitrarily by a style sheet, its
+  bitmap is then subject to the 'object-fit' CSS property. &lt;a href=#refsCSSIMAGES&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
-  &lt;p&gt;The size of the coordinate space does not necessarily represent the size of the actual bitmap
-  that the user agent will use internally or during rendering. On high-definition displays, for
-  instance, the user agent may internally use a bitmap with two device pixels per unit in the
-  coordinate space, so that the rendering remains at high quality throughout.&lt;/p&gt;
+  &lt;hr&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;p&gt;The bitmaps of &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements, as well as some of the bitmaps of rendering
+  contexts, such as those described in the section on the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
+  object below, have an &lt;dfn id=concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/dfn&gt; flag, which can
+  be set to true or false. Initially, when the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is created, its bitmap's
+  &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag must be set to true.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
 
-  &lt;p&gt;When the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is created, and subsequently whenever the &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt;
-  attributes are set (whether to a new value or to the previous value), the bitmap and any
-  associated contexts must be cleared back to their initial state and reinitialized with the newly
-  specified coordinate space dimensions.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; bitmap can also have a &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;, as described in the
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; section below.&lt;/p&gt;
 
-  &lt;p&gt;When the canvas is initialized, its bitmap must be cleared to transparent black.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element can have a rendering context bound to it. Initially, it does not
+  have a bound rendering context. To keep track of whether it has a rendering context or not, and
+  what kind of rendering context it is, a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; also has a &lt;dfn id=concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas context mode&lt;/dfn&gt;, which is initially &lt;dfn id=concept-canvas-none title=concept-canvas-none&gt;none&lt;/dfn&gt; but can be changed to either &lt;dfn id=concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/dfn&gt;, &lt;dfn id=concept-canvas-direct-webgl title=concept-canvas-direct-webgl&gt;direct-webgl&lt;/dfn&gt;, &lt;dfn id=concept-canvas-indirect title=concept-canvas-indirect&gt;indirect&lt;/dfn&gt;, or &lt;dfn id=concept-canvas-proxied title=concept-canvas-proxied&gt;proxied&lt;/dfn&gt; by algorithms defined in this specification.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element does not represent its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;, it
-  &lt;a href=#provides-a-paint-source&gt;provides a paint source&lt;/a&gt; whose width is the element's intrinsic width, whose height is
-  the element's intrinsic height, and whose appearance is the element's bitmap.&lt;/p&gt;
+  &lt;p&gt;When its &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas context mode&lt;/a&gt; is &lt;a href=#concept-canvas-none title=concept-canvas-none&gt;none&lt;/a&gt;, a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has no rendering context,
+  and its bitmap must be fully transparent black with an intrinsic width equal to the numeric value
+  of the element's &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; attribute and an intrinsic height
+  equal to the numeric value of the element's &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt;
+  attribute, those values being interpreted in CSS pixels, and being updated as the attributes are
+  set, changed, or removed.&lt;/p&gt;
 
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element represents &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt;, it &lt;a href=#provides-a-paint-source&gt;provides
+  a paint source&lt;/a&gt; whose width is the element's intrinsic width, whose height is the element's
+  intrinsic height, and whose appearance is the element's bitmap.&lt;/p&gt;
+
+  &lt;p&gt;Whenever the &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attributes are set, removed, changed, or
+  redundantly set to the value they already have, if the &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas context mode&lt;/a&gt; is &lt;a href=#concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/a&gt;&lt;!-- (and the rendering context's &lt;span
+  title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt;, therefore, is &lt;span
+  title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;)--&gt;, the user agent must &lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;set bitmap dimensions&lt;/a&gt; to the numeric values of
+  the &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attributes.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-canvas-width title=dom-canvas-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-canvas-height title=dom-canvas-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the
   respective content attributes of the same name, with the same defaults.&lt;/p&gt;
 
   &lt;/div&gt;
 
-  &lt;div class=example&gt;
-   &lt;p&gt;Only one square appears to be drawn in the following example:&lt;/p&gt;
-   &lt;pre&gt;  // canvas is a reference to a &lt;canvas&gt; element
-  var context = canvas.getContext('2d');
-  context.fillRect(0,0,50,50);
-  canvas.setAttribute('width', '300'); // clears the canvas
-  context.fillRect(0,100,50,50);
-  canvas.width = canvas.width; // clears the canvas
-  context.fillRect(100,0,50,50); // only this square remains&lt;/pre&gt;
-  &lt;/div&gt;
+  &lt;p class=note&gt;The bitmaps used with &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements can have arbitrary pixel
+  densities. Typically, the density will match that of the user's screen.&lt;/p&gt;
 
   &lt;hr&gt;&lt;!--ADD-TOPIC:DOM APIs--&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; [, ... ])&lt;/dt&gt;
 
    &lt;dd&gt;
 
     &lt;p&gt;Returns an object that exposes an API for drawing on the canvas. The first argument specifies
-    the desired API. Subsequent arguments are handled by that API.&lt;/p&gt;
+    the desired API, either &quot;&lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;&quot; or &quot;&lt;code title=canvas-context-webgl&gt;&lt;a href=#canvas-context-webgl&gt;webgl&lt;/a&gt;&lt;/code&gt;&quot;. Subsequent arguments are handled by that API.&lt;/p&gt;
 
     &lt;p&gt;This specification defines the &quot;&lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;&quot; context below.
-    There is also a specification that defines a &quot;&lt;code title=canvas-context-webgl&gt;webgl&lt;/code&gt;&quot;
+    There is also a specification that defines a &quot;&lt;code title=canvas-context-webgl&gt;&lt;a href=#canvas-context-webgl&gt;webgl&lt;/a&gt;&lt;/code&gt;&quot;
     context. &lt;a href=#refsWEBGL&gt;[WEBGL]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;The list of defined contexts is given on the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a href=#refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/a&gt;
+    &lt;p&gt;Returns null if the given context ID is not supported, if the canvas has already been
+    initialized with the other context type (e.g. trying to get a &quot;&lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;&quot; context after getting a &quot;&lt;code title=canvas-context-webgl&gt;&lt;a href=#canvas-context-webgl&gt;webgl&lt;/a&gt;&lt;/code&gt;&quot; context).&lt;/p&gt;
 
-    &lt;p&gt;Returns null if the given context ID is not supported or if the canvas has already been
-    initialized with some other (incompatible) context type (e.g. trying to get a &quot;&lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;&quot; context after getting a &quot;&lt;code title=canvas-context-webgl&gt;webgl&lt;/code&gt;&quot; context).&lt;/p&gt;
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; if the &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-canvas-transferControlToProxy&gt;&lt;a href=#dom-canvas-transfercontroltoproxy&gt;transferControlToProxy()&lt;/a&gt;&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-supportsContext&gt;&lt;a href=#dom-canvas-supportscontext&gt;supportsContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; [, ... ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;supported&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-supportsContext&gt;&lt;a href=#dom-canvas-supportscontext&gt;supportsContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; [, ... ])&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -36263,105 +36308,174 @@
     &lt;p&gt;This return value is not a guarantee that &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; will or will not return an object, as
     conditions (e.g. availability of system resources) can vary over time.&lt;/p&gt;
 
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; if the &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-canvas-transferControlToProxy&gt;&lt;a href=#dom-canvas-transfercontroltoproxy&gt;transferControlToProxy()&lt;/a&gt;&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
+
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Sets the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;' rendering context to the given object.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-canvas-transferControlToProxy&gt;&lt;a href=#dom-canvas-transfercontroltoproxy&gt;transferControlToProxy()&lt;/a&gt;&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element can have a &lt;dfn id=primary-context&gt;primary context&lt;/dfn&gt;, which is the first context
-  to have been obtained for that element. When created, a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element must not have
-  a &lt;a href=#primary-context&gt;primary context&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;There are two ways for a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element to acquire a rendering context: the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element can provide one via the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; method, and one can be assigned to it via the
+  &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; method. In addition, the whole issue of a
+  rendering context can be taken out of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's hands and passed to a
+  &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object, which itself can then be assigned a rendering context using its
+  &lt;code title=dom-CanvasProxy-setContext&gt;&lt;a href=#dom-canvasproxy-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; method.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-canvas-getcontext title=dom-canvas-getContext&gt;&lt;code&gt;getContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when invoked,
-  must run the following steps:&lt;/p&gt;
+  &lt;p&gt;These three methods are mutually exclusive; calling any of the three makes the other two start
+  throwing &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exceptions when called.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; be the first argument to the method.&lt;/li&gt;
+  &lt;p&gt;Each rendering context has a &lt;dfn id=concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+  mode&lt;/dfn&gt;, which is one of &lt;dfn id=concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/dfn&gt;, &lt;dfn id=concept-canvas-unbound title=concept-canvas-unbound&gt;unbound&lt;/dfn&gt;, or &lt;dfn id=concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/dfn&gt;.
+  Initially, rendering contexts must be in the &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;unbound&lt;/a&gt;
+  mode.&lt;/p&gt;
 
-   &lt;li&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-getcontext title=dom-canvas-getContext&gt;&lt;code&gt;getContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when invoked,
+  must run the steps in the cell of the following table whose column header describes the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas context mode&lt;/a&gt;
+  and whose row header describes the method's first argument.&lt;/p&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; is not the name of a context supported by the user agent,
-    return null and abort these steps.&lt;/p&gt;
+  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;td&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-none title=concept-canvas-none&gt;none&lt;/a&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/a&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-direct-webgl title=concept-canvas-direct-webgl&gt;direct-webgl&lt;/a&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-indirect title=concept-canvas-indirect&gt;indirect&lt;/a&gt;
+     &lt;th&gt;&lt;a href=#concept-canvas-proxied title=concept-canvas-proxied&gt;proxied&lt;/a&gt;
+   &lt;tbody&gt;&lt;tr&gt;&lt;th&gt;&quot;&lt;dfn id=canvas-context-2d title=canvas-context-2d&gt;&lt;code&gt;2d&lt;/code&gt;&lt;/dfn&gt;&quot;
+     &lt;td&gt;
+      Set the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;context
+      mode&lt;/a&gt; to &lt;a href=#concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/a&gt;; follow the &lt;a href=#2d-context-creation-algorithm&gt;2D
+      context creation algorithm&lt;/a&gt; defined in the section below, passing it the
+      &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, to obtain a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object; set
+      that object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; to
+      &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, and return the
+      &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object
+     &lt;td&gt;
+      Return the same object as was return the last time the method was invoked with this same
+      argument.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
 
-    &lt;p class=note&gt;An example of this would be a user agent that theoretically supports the &quot;&lt;code title=canvas-context-webgl&gt;webgl&lt;/code&gt;&quot; 3D context, in the case where the platform does not
-    have hardware support for OpenGL and the user agent does not have a software OpenGL
-    implementation. Despite the user agent recognising the &quot;&lt;code title=canvas-context-webgl&gt;webgl&lt;/code&gt;&quot; name, it would return null at this step because that
-    context is not, in practice, supported at the time of the call.&lt;/p&gt;
+    &lt;tr&gt;&lt;th&gt;&quot;&lt;dfn id=canvas-context-webgl title=canvas-context-webgl&gt;&lt;code&gt;webgl&lt;/code&gt;&lt;/dfn&gt;&quot;, if the user agent supports the WebGL feature in its current configuration
+     &lt;td&gt;
+      Follow the instructions given in the WebGL specification's &lt;i&gt;Context Creation&lt;/i&gt; section to
+      obtain either a &lt;code&gt;&lt;a href=#webglrenderingcontext&gt;WebGLRenderingContext&lt;/a&gt;&lt;/code&gt; or null; if the returned value is null,
+      then return null and abort these steps, otherwise, set the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;context mode&lt;/a&gt; to &lt;a href=#concept-canvas-direct-webgl title=concept-canvas-direct-webgl&gt;direct-webgl&lt;/a&gt;, set the new
+      &lt;code&gt;&lt;a href=#webglrenderingcontext&gt;WebGLRenderingContext&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; to &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, and return the &lt;code&gt;&lt;a href=#webglrenderingcontext&gt;WebGLRenderingContext&lt;/a&gt;&lt;/code&gt;
+      object&Dagger; &lt;a href=#refsWEBGL&gt;[WEBGL]&lt;/a&gt;
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return the same object as was return the last time the method was invoked with this same
+      argument.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
 
-   &lt;/li&gt;
+    &lt;tr&gt;&lt;th&gt;A vendor-specific extension*
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
 
-   &lt;li&gt;&lt;p&gt;If the element has a &lt;a href=#primary-context&gt;primary context&lt;/a&gt; and that context's entry in the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt; does not
-   list &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; as a context with which it is compatible, return null and
-   abort these steps. &lt;a href=#refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/li&gt;
+    &lt;tr&gt;&lt;th&gt;An unsupported value&dagger;
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception.
+    
+  &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;* Vendors may define experimental contexts using the syntax &lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorname&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;&lt;/code&gt;, for example,
+  &lt;code&gt;moz-3d&lt;/code&gt;.&lt;/small&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If the element does not have a &lt;a href=#primary-context&gt;primary context&lt;/a&gt;, let the element's
-   &lt;a href=#primary-context&gt;primary context&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;.&lt;/li&gt;
+  &lt;p class=tablenote&gt;&lt;small&gt;&dagger; For example, the &quot;&lt;code title=canvas-context-webgl&gt;&lt;a href=#canvas-context-webgl&gt;webgl&lt;/a&gt;&lt;/code&gt;&quot; value in the case of a user agent having exhausted the
+  graphics hardware's abilities and having no software fallback implementation.&lt;/small&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; method has already been
-   invoked on this element for the same &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, return the same object as was
-   returned that time, and abort these steps. The additional arguments are ignored.&lt;/li&gt;
+  &lt;p class=tablenote&gt;&lt;small&gt;&Dagger; The second (and subsequent) argument(s) to the method, if
+  any, are ignored in all cases except this one. See the WebGL specification for
+  details.&lt;/small&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;dfn id=getcontext-return title=getContext-return&gt;Return a new object for &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;&lt;/dfn&gt;, as defined by the specification given for &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;'s entry in the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a href=#refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-supportscontext title=dom-canvas-supportsContext&gt;&lt;code&gt;supportsContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;,
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-supportscontext title=dom-canvas-supportsContext&gt;&lt;code&gt;supportsContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when
   invoked, must return false if calling &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; on
   the same object and with the same arguments would definitely return null at this time, and true
   otherwise.&lt;/p&gt;
 
-  &lt;p&gt;New context types may be registered in the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a href=#refsWHATWGWIKI&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-setcontext title=dom-canvas-setContext&gt;&lt;code&gt;setContext(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when invoked, must
+  run following the steps:&lt;/p&gt;
 
-  &lt;p&gt;Anyone is free to edit the WHATWG Wiki CanvasContexts page at any time to add a new context
-  type. These new context types must be specified with the following information:&lt;/p&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas
+   context mode&lt;/a&gt; is neither &lt;a href=#concept-canvas-none title=concept-canvas-none&gt;none&lt;/a&gt; nor &lt;a href=#concept-canvas-indirect title=concept-canvas-indirect&gt;indirect&lt;/a&gt;, throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and
+   abort these steps.&lt;/li&gt;
 
-  &lt;dl&gt;&lt;dt&gt;Keyword&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, then throw an
+   &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and abort these steps.&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;The value of &lt;var title=&quot;&quot;&gt;contextID&lt;/var&gt; that will return the object for the new
-   API.&lt;/dd&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/a&gt;, then run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-unbinding-steps title=concept-canvas-unbinding-steps&gt;unbinding steps&lt;/a&gt; and
+   set its &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; to &lt;a href=#concept-canvas-unbound title=concept-canvas-unbound&gt;unbound&lt;/a&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-binding-steps title=concept-canvas-binding-steps&gt;binding
+   steps&lt;/a&gt; to bind it to this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
 
-   &lt;dt&gt;Specification&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;context
+   mode&lt;/a&gt; to &lt;a href=#concept-canvas-indirect title=concept-canvas-indirect&gt;indirect&lt;/a&gt; and the &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+   mode&lt;/a&gt; to &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;A link to a formal specification of the context type's API. It could be another page on
-   the Wiki, or a link to an external page. If the type does not have a formal specification, an
-   informal description can be substituted until such time as a formal specification is
-   available.&lt;/dd&gt;
+  &lt;/ol&gt;&lt;hr&gt;&lt;/div&gt;
 
-
-   &lt;dt&gt;Compatible with&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;The list of context types that are compatible with this one (i.e. that operate on the same
-   underlying bitmap). This list must be transitive and symmetric; if one context type is defined as
-   compatible with another, then all types it is compatible with must be compatible with all types
-   the other is compatible with.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;Vendors may also define experimental contexts using the syntax &lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorname&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;&lt;/code&gt;, for example, &lt;code&gt;moz-3d&lt;/code&gt;.
-  Such contexts should be registered in the WHATWG Wiki CanvasContexts page.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;hr&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;url&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL&lt;/a&gt;&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;, ... ] )&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;url&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL&lt;/a&gt;&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;, ... ] )&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;url&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD&lt;/a&gt;&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;, ... ] )&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; for the image in the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; for the image in
+    the canvas.&lt;/p&gt;
 
-    &lt;p&gt;The first argument, if provided, controls the type of the image
-    to be returned (e.g. PNG or JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given
-    type isn't supported. The other arguments are specific to the
-    type, and control the way that the image is generated, as given in
-    the table below.&lt;/p&gt;
+    &lt;p&gt;The first argument, if provided, controls the type of the image to be returned (e.g. PNG or
+    JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given type
+    isn't supported. The other arguments are specific to the type, and control the way that the
+    image is generated, as given &lt;a href=#canvas-serialization-arguments&gt;in the table
+    below&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;When trying to use types other than &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;,
-    authors can check if the image was really returned in the
-    requested format by checking to see if the returned string starts
-    with one of the exact strings &quot;&lt;code title=&quot;&quot;&gt;data:image/png,&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;data:image/png;&lt;/code&gt;&quot;. If it does, the image is PNG,
-    and thus the requested type was not supported. (The one exception
-    to this is if the canvas has either no height or no width, in
+    &lt;p&gt;When trying to use types other than &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;, authors can check if the image
+    was really returned in the requested format by checking to see if the returned string starts
+    with one of the exact strings &quot;&lt;code title=&quot;&quot;&gt;data:image/png,&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;data:image/png;&lt;/code&gt;&quot;. If it does, the image is PNG, and thus the requested type was
+    not supported. (The one exception to this is if the canvas has either no height or no width, in
     which case the result might simply be &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot;.)&lt;/p&gt;
 
-    &lt;p&gt;The &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL()&lt;/a&gt;&lt;/code&gt;
-    method returns the data at a resolution of 96dpi. The &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt; method returns
-    it at the native canvas bitmap resolution.&lt;/p&gt;
+    &lt;p&gt;The &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL()&lt;/a&gt;&lt;/code&gt; method returns the data at a
+    resolution of 96dpi. The &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt; method
+    returns it at the native canvas bitmap resolution.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -36370,195 +36484,220 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Creates a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object representing a file
-    containing the image in the canvas, and invokes a callback with a
-    handle to that object.&lt;/p&gt;
+    &lt;p&gt;Creates a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object representing a file containing the image in the canvas,
+    and invokes a callback with a handle to that object.&lt;/p&gt;
 
-    &lt;p&gt;The second argument, if provided, controls the type of the
-    image to be returned (e.g. PNG or JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given
-    type isn't supported. The other arguments are specific to the
-    type, and control the way that the image is generated, as given in
-    the table below.&lt;/p&gt;
+    &lt;p&gt;The second argument, if provided, controls the type of the image to be returned (e.g. PNG or
+    JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given type
+    isn't supported. The other arguments are specific to the type, and control the way that the
+    image is generated, as given &lt;a href=#canvas-serialization-arguments&gt;in the table
+    below&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;The &lt;code title=dom-canvas-toBlob&gt;&lt;a href=#dom-canvas-toblob&gt;toBlob()&lt;/a&gt;&lt;/code&gt; method
-    provides the data at a resolution of 96dpi. The &lt;code title=dom-canvas-toBlobHD&gt;&lt;a href=#dom-canvas-toblobhd&gt;toBlobHD()&lt;/a&gt;&lt;/code&gt; method provides it
-    at the native canvas bitmap resolution.&lt;/p&gt;
+    &lt;p&gt;The &lt;code title=dom-canvas-toBlob&gt;&lt;a href=#dom-canvas-toblob&gt;toBlob()&lt;/a&gt;&lt;/code&gt; method provides the data at a resolution
+    of 96dpi. The &lt;code title=dom-canvas-toBlobHD&gt;&lt;a href=#dom-canvas-toblobhd&gt;toBlobHD()&lt;/a&gt;&lt;/code&gt; method provides it at the
+    native canvas bitmap resolution.&lt;/p&gt;
 
    &lt;/dd&gt;
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-canvas-todataurl title=dom-canvas-toDataURL&gt;&lt;code&gt;toDataURL()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-canvas-todataurlhd title=dom-canvas-toDataURLHD&gt;&lt;code&gt;toDataURLHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods must run the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-canvas-todataurl title=dom-canvas-toDataURL&gt;&lt;code&gt;toDataURL()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-canvas-todataurlhd title=dom-canvas-toDataURLHD&gt;&lt;code&gt;toDataURLHD()&lt;/code&gt;&lt;/dfn&gt; methods must run the following
+  steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt;
-   flag is set to false, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
-   and abort these steps.&lt;/p&gt;
+  &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap's &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag is set to false, throw a
+   &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
 
-   &lt;li&gt;&lt;p&gt;If the canvas has no pixels (i.e. either its horizontal
-   dimension or its vertical dimension is zero) then return the string
-   &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot; and abort these steps. (This is the
-   shortest &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt;
-   URL&lt;/a&gt;; it represents the empty string in a &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt; resource.)&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap has no pixels (i.e. either its horizontal
+   dimension or its vertical dimension is zero) then return the string &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot; and abort these steps. (This is the shortest &lt;a href=#data-protocol title=&quot;data
+   protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt;; it represents the empty string in a &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt; resource.)&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;file&lt;/var&gt; be &lt;a href=#a-serialization-of-the-image-as-a-file&gt;a serialization of the
-   image as a file&lt;/a&gt;, using the method's arguments (if any) as
-   the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt; method, and not
-   otherwise.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;file&lt;/var&gt; be &lt;a href=#a-serialization-of-the-bitmap-as-a-file title=&quot;a serialization of the bitmap as a file&quot;&gt;a
+   serialization of the &lt;code&gt;canvas&lt;/code&gt; element's bitmap as a file&lt;/a&gt;, using the method's
+   arguments (if any) as the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt;
+   flag set if the method is the &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt; method,
+   and not otherwise.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; representing &lt;var title=&quot;&quot;&gt;file&lt;/var&gt;. &lt;a href=#refsRFC2397&gt;[RFC2397]&lt;/a&gt;&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Return a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; representing
+   &lt;var title=&quot;&quot;&gt;file&lt;/var&gt;. &lt;a href=#refsRFC2397&gt;[RFC2397]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;!-- should we explicitly require the URL to be base64-encoded and
-   not have any parameters, to ensure the same exact URL is generated
-   in each browser? --&gt;
+   &lt;!-- should we explicitly require the URL to be base64-encoded and not have any parameters, to
+   ensure the same exact URL is generated in each browser? --&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-toblob title=dom-canvas-toBlob&gt;&lt;code&gt;toBlob()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn id=dom-canvas-toblobhd title=dom-canvas-toBlobHD&gt;&lt;code&gt;toBlobHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods must run the following steps:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-toblob title=dom-canvas-toBlob&gt;&lt;code&gt;toBlob()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-canvas-toblobhd title=dom-canvas-toBlobHD&gt;&lt;code&gt;toBlobHD()&lt;/code&gt;&lt;/dfn&gt; methods must run the following
+  steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt;
-   flag is set to false, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
-   and abort these steps.&lt;/p&gt;
+  &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap's &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag is set to false, throw a
+   &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; be the first
-   argument.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; be the first argument.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the second and
-   subsequent arguments to the method, if any.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the second and subsequent arguments to the method, if
+   any.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If the canvas has no pixels (i.e. either its horizontal
+    &lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap has no pixels (i.e. either its horizontal
     dimension or its vertical dimension is zero) then let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be null.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be a
-    &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object representing &lt;a href=#a-serialization-of-the-image-as-a-file&gt;a serialization of the
-    image as a file&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and
-    with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the
-    &lt;code title=dom-canvas-toBlobHD&gt;&lt;a href=#dom-canvas-toblobhd&gt;toBlobHD()&lt;/a&gt;&lt;/code&gt; method, and
-    not otherwise. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt; &lt;/p&gt;
+    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object representing &lt;a href=#a-serialization-of-the-bitmap-as-a-file title=&quot;a serialization of the bitmap as a file&quot;&gt;a serialization of the &lt;code&gt;canvas&lt;/code&gt;
+    element's bitmap as a file&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the &lt;code title=dom-canvas-toBlobHD&gt;&lt;a href=#dom-canvas-toblobhd&gt;toBlobHD()&lt;/a&gt;&lt;/code&gt; method, and not otherwise. &lt;a href=#refsFILEAPI&gt;[FILEAPI]&lt;/a&gt; &lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return, but continue running these steps
-   asynchronously.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; is null, abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; is null, abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke the
-   &lt;code&gt;&lt;a href=#filecallback&gt;FileCallback&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; as its argument. The &lt;a href=#task-source&gt;task source&lt;/a&gt;
-   for this task is the &lt;dfn id=canvas-blob-serialization-task-source&gt;canvas blob serialization task
-   source&lt;/dfn&gt;. &lt;a href=#refsFILESYSTEMAPI&gt;[FILESYSTEMAPI]&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke the &lt;code&gt;&lt;a href=#filecallback&gt;FileCallback&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; as its argument. The &lt;a href=#task-source&gt;task
+   source&lt;/a&gt; for this task is the &lt;dfn id=canvas-blob-serialization-task-source&gt;canvas blob serialization task source&lt;/dfn&gt;. &lt;a href=#refsFILESYSTEMAPI&gt;[FILESYSTEMAPI]&lt;/a&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;When a user agent is to create &lt;dfn id=a-serialization-of-the-image-as-a-file&gt;a serialization of the image
-  as a file&lt;/dfn&gt;, optionally with some given &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and optionally with a &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set, it must create an image file in the
-  format given by the first value of &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;,
-  or, if there are no &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, in the PNG
-  format. &lt;a href=#refsPNG&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
+  &lt;/ol&gt;&lt;/div&gt;
+  &lt;!--REMOVE-TOPIC:DOM APIs--&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag is set, or if the canvas
-  bitmap has one pixel per coordinate space unit, then the image file
-  must have the same pixel data (before compression, if applicable) as
-  the canvas bitmap, and if the file format used supports encoding
-  resolution metadata, the resolution of the bitmap (device pixels per
-  coordinate space units being interpreted as image pixels per CSS
-  pixel) must be given as well.&lt;/p&gt;
 
-  &lt;p&gt;Otherwise, the image file's pixel data must be the canvas
-  bitmap's pixel data scaled to one image pixel per coordinate space
-  unit, and if the file format used supports encoding resolution
-  metadata, the resolution must be given as 96dpi (one image pixel per
-  CSS pixel).&lt;/p&gt;
+  &lt;!--ADD-TOPIC:Workers--&gt;
+  &lt;h5 id=proxying-canvases-to-workers&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;Proxying canvases to workers&lt;/h5&gt;
 
-  &lt;p&gt;If &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; is not empty, the first value
-  must be interpreted as a &lt;a href=#mime-type title=&quot;MIME type&quot;&gt;MIME type&lt;/a&gt;
-  giving the format to use. If the type has any parameters, it must be
-  treated as not supported.&lt;/p&gt;
+  &lt;p&gt;Since DOM nodes cannot be accessed across worker boundaries, a proxy object is needed to enable
+  workers to render to &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements in &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s.&lt;/p&gt;
 
-  &lt;p class=example&gt;For example, the value &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;
-  would mean to generate a PNG image, the value
-  &quot;&lt;code&gt;image/jpeg&lt;/code&gt;&quot; would mean to generate a JPEG image, and
-  the value &quot;&lt;code&gt;image/svg+xml&lt;/code&gt;&quot; would mean to generate an SVG
-  image (which would probably require that the implementation actually
-  keep enough information to reliably render an SVG image from the
-  canvas).&lt;/p&gt;
+  &lt;pre class=idl&gt;interface &lt;dfn id=canvasproxy&gt;CanvasProxy&lt;/dfn&gt; {
+  void &lt;a href=#dom-canvasproxy-setcontext title=dom-CanvasProxy-setContext&gt;setContext&lt;/a&gt;(&lt;a href=#renderingcontext&gt;RenderingContext&lt;/a&gt; context);
+};
+&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt; implements &lt;a href=#transferable&gt;Transferable&lt;/a&gt;;&lt;/pre&gt;
 
-  &lt;p&gt;User agents must support PNG (&quot;&lt;code&gt;image/png&lt;/code&gt;&quot;). User
-  agents may support other types. If the user agent does not support
-  the requested type, it must create the file using the PNG format. &lt;a href=#refsPNG&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvasProxy&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-transferControlToProxy&gt;&lt;a href=#dom-canvas-transfercontroltoproxy&gt;transferControlToProxy&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
 
-  &lt;p&gt;User agents must &lt;a href=#converted-to-ascii-lowercase title=&quot;converted to ASCII
-  lowercase&quot;&gt;convert the provided type to ASCII lowercase&lt;/a&gt;
-  before establishing if they support that type.&lt;/p&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;For image types that do not support an alpha channel, the
-  serialized image must be the canvas image composited onto a solid
-  black background using the source-over operator.&lt;/p&gt;
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object that can be used to transfer control for this
+    canvas over to another document (e.g. an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; from another &lt;a href=#origin&gt;origin&lt;/a&gt;)
+    or to a worker.&lt;/p&gt;
 
-  &lt;p&gt;If the first argument in &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; gives a
-  type corresponding to one of the types given in the first column of
-  the following table, and the user agent supports that type, then the
-  subsequent arguments, if any, must be treated as described in the
-  second cell of that row.&lt;/p&gt;
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-canvas-setContext&gt;&lt;a href=#dom-canvas-setcontext&gt;setContext()&lt;/a&gt;&lt;/code&gt; methods have been used.&lt;/p&gt;
 
-  &lt;/div&gt;
+   &lt;/dd&gt;
 
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt; Type &lt;th&gt; Other arguments &lt;th&gt; Reference
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code&gt;image/jpeg&lt;/code&gt;
-     &lt;td&gt; The second argument&lt;span class=impl&gt;, if it&lt;/span&gt; is a
-     number in the range 0.0 to 1.0 inclusive&lt;span class=impl&gt;, must
-     be&lt;/span&gt; treated as the desired quality level. &lt;span class=impl&gt;If it is not a number or is outside that range, the
-     user agent must use its default value, as if the argument had
-     been omitted.&lt;/span&gt;
-     &lt;td&gt; &lt;a href=#refsJPEG&gt;[JPEG]&lt;/a&gt;
-  &lt;/table&gt;&lt;div class=impl&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvasProxy&lt;/var&gt; . &lt;code title=dom-CanvasProxy-setContext&gt;&lt;a href=#dom-canvasproxy-setcontext&gt;setContext&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/dt&gt;
 
-  &lt;p&gt;For the purposes of these rules, an argument is considered to be
-  a number if it is converted to an IDL double value by the rules for
-  handling arguments of type &lt;code title=&quot;&quot;&gt;any&lt;/code&gt; in the Web IDL
-  specification. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;Other arguments must be ignored and must not cause the user agent
-  to throw an exception. A future version of this specification will
-  probably define other parameters to be passed to these methods to
-  allow authors to more carefully control compression settings, image
-  metadata, etc.&lt;/p&gt;
+    &lt;p&gt;Sets the &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's rendering context to
+    the given object.&lt;/p&gt;
 
-  &lt;/div&gt;
-  &lt;!--REMOVE-TOPIC:DOM APIs--&gt;
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; has been
+    &lt;a href=#transfer-a-transferable-object title=&quot;transfer a Transferable object&quot;&gt;transfered&lt;/a&gt;.&lt;/p&gt;
 
+   &lt;/dd&gt;
 
-  &lt;div data-component=&quot;HTML Canvas 2D Context (editor: Ian Hickson)&quot;&gt;
+  &lt;/dl&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-canvas-transfercontroltoproxy title=dom-canvas-transferControlToProxy&gt;&lt;code&gt;transferControlToProxy()&lt;/code&gt;&lt;/dfn&gt;
+  method of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, when invoked, must run following the steps:&lt;/p&gt;
 
-  &lt;h5 id=2dcontext&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;The 2D context&lt;/h5&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;canvas
+   context mode&lt;/a&gt; is not &lt;a href=#concept-canvas-none title=concept-canvas-none&gt;none&lt;/a&gt;, throw an
+   &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and abort these steps.&lt;/li&gt;
 
-  &lt;!-- v2: we're on v5. suggestions for subsequent versions are marked v6, v7, v8. --&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-canvas-context-mode title=concept-canvas-context-mode&gt;context
+   mode&lt;/a&gt; to &lt;a href=#concept-canvas-proxied title=concept-canvas-proxied&gt;proxied&lt;/a&gt;.&lt;/li&gt;
 
-  &lt;p&gt;This specification defines the &lt;dfn id=canvas-context-2d title=canvas-context-2d&gt;&lt;code&gt;2d&lt;/code&gt;&lt;/dfn&gt; context type, whose
-  API is implemented using the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
-  interface.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Return a &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object bound to this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/li&gt;
 
-  &lt;div class=impl&gt;
+  &lt;/ol&gt;&lt;p&gt;A &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object can be &lt;a href=#concept-transferable-neutered title=concept-transferable-neutered&gt;neutered&lt;/a&gt; (like any &lt;code&gt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&lt;/code&gt; object),
+  meaning it can no longer be &lt;a href=#transfer-a-transferable-object title=&quot;transfer a Transferable object&quot;&gt;transferred&lt;/a&gt;, and
+  can be &lt;dfn id=concept-canvasproxy-disabled title=concept-CanvasProxy-disabled&gt;disabled&lt;/dfn&gt;, meaning it can no longer be bound
+  to rendering contexts. When first created, a &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object must be neither.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt;
-  method of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is to &lt;a href=#getcontext-return title=getContext-return&gt;return a new object for the &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;&lt;/a&gt; &lt;code title=canvas-context-2d&gt;&lt;a href=#canvas-context-2d&gt;2d&lt;/a&gt;&lt;/code&gt;, the user agent must return a
-  new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object. Any additional
-  arguments are ignored.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; is created with a link to a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. A
+  &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object that has not been &lt;a href=#concept-canvasproxy-disabled title=concept-CanvasProxy-disabled&gt;disabled&lt;/a&gt; must have a strong reference to its canvas
+  element.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=dom-canvasproxy-setcontext title=dom-CanvasProxy-setContext&gt;&lt;code&gt;setContext(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; objects, when invoked,
+  must run following the steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object has been &lt;a href=#concept-canvasproxy-disabled title=concept-CanvasProxy-disabled&gt;disabled&lt;/a&gt;, throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and
+   abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object has not been &lt;a href=#concept-transferable-neutered title=concept-transferable-neutered&gt;neutered&lt;/a&gt;, then &lt;a href=#concept-transferable-neutered title=concept-transferable-neutered&gt;neuter&lt;/a&gt; it.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, then throw an
+   &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/a&gt;, then run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-unbinding-steps title=concept-canvas-unbinding-steps&gt;unbinding steps&lt;/a&gt; and
+   set its &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+   bitmap mode&lt;/a&gt; to &lt;a href=#concept-canvas-unbound title=concept-canvas-unbound&gt;unbound&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-binding-steps title=concept-canvas-binding-steps&gt;binding
+   steps&lt;/a&gt; to bind it to this &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; to &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;bound&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p id=transferCanvasProxy&gt;To &lt;a href=#transfer-a-transferable-object title=&quot;transfer a Transferable object&quot;&gt;transfer&lt;/a&gt; a
+  &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; to a new owner &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;,
+  a user agent must create a new &lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt; object linked to the same
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element as &lt;var title=&quot;&quot;&gt;old&lt;/var&gt;, thus obtaining &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;,
+  must &lt;a href=#concept-transferable-neutered title=concept-Transferable-neutered&gt;neuter&lt;/a&gt; and &lt;a href=#concept-canvasproxy-disabled title=concept-CanvasProxy-disabled&gt;disable&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; object, and must
+  finally return &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;Here is a clock implemented on a worker. First, the main page:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;title&gt;Clock&lt;/title&gt;
+&lt;canvas&gt;&lt;/canvas&gt; &lt;!-- defaults to 300x150 --&gt;
+&lt;script&gt;
+  var canvas = document.getElementsByTagName('canvas')[0];
+  var proxy = canvas.transferControlToProxy());
+  var worker = new Worker('clock.js');
+  worker.postMessage(proxy, [proxy]);
+&lt;/script&gt;&lt;/pre&gt;
+
+   &lt;p&gt;Second, the worker:&lt;/p&gt;
+
+   &lt;pre&gt;onmessage = function (event) {
+  var context = new CanvasRenderingContext2d();
+  event.data.setContext(context); // event.data is the CanvasProxy object
+  setInterval(function () {
+    context.clearRect(0, 0, context.width, context.height);
+    context.fillText(0, 100, new Date());
+    context.commit();
+  }, 1000);
+};&lt;/pre&gt;
+
   &lt;/div&gt;
 
-  &lt;p&gt;The 2D context represents a flat Cartesian surface whose origin
-  (0,0) is at the top left corner, with the coordinate space having
-  &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; values increasing when going right, and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; values increasing when going down.&lt;/p&gt;
+  &lt;!--REMOVE-TOPIC:Workers--&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
 
+  &lt;h5 id=2dcontext&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;The 2D rendering context&lt;/h5&gt;
+
+  &lt;!-- v2: we're on v5. suggestions for subsequent versions are marked v6, v7, v8. --&gt;
+
+  &lt;pre class=idl&gt;typedef (&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or
+         &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt; or
+         &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or
+         &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; or
+         &lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;) &lt;dfn id=canvasimagesource&gt;CanvasImageSource&lt;/dfn&gt;;
+
+[&lt;a href=#dom-context-2d title=dom-context-2d&gt;Constructor&lt;/a&gt;(optional unsigned long width, unsigned long height)]
+interface &lt;dfn id=canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
+
   // back-reference to the canvas
   readonly attribute &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; &lt;a href=#dom-context-2d-canvas title=dom-context-2d-canvas&gt;canvas&lt;/a&gt;;
 
+  // canvas dimensions
+           attribute unsigned long &lt;a href=#dom-context-2d-width title=dom-context-2d-width&gt;width&lt;/a&gt;;
+           attribute unsigned long &lt;a href=#dom-context-2d-height title=dom-context-2d-height&gt;height&lt;/a&gt;;
+
+  // for contexts that aren't directly &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; to a specific canvas
+  void &lt;a href=#dom-context-2d-commit title=dom-context-2d-commit&gt;commit&lt;/a&gt;(); // push the image to the &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;
+
   // state
   void &lt;a href=#dom-context-2d-save title=dom-context-2d-save&gt;save&lt;/a&gt;(); // push state on state stack
   void &lt;a href=#dom-context-2d-restore title=dom-context-2d-restore&gt;restore&lt;/a&gt;(); // pop state stack and restore state
@@ -36604,7 +36743,7 @@
            attribute (DOMString or CanvasGradient or CanvasPattern) &lt;a href=#dom-context-2d-fillstyle title=dom-context-2d-fillStyle&gt;fillStyle&lt;/a&gt;; // (default black)
   &lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt; &lt;a href=#dom-context-2d-createlineargradient title=dom-context-2d-createLinearGradient&gt;createLinearGradient&lt;/a&gt;(double x0, double y0, double x1, double y1);
   &lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt; &lt;a href=#dom-context-2d-createradialgradient title=dom-context-2d-createRadialGradient&gt;createRadialGradient&lt;/a&gt;(double x0, double y0, double r0, double x1, double y1, double r1);
-  &lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt; &lt;a href=#dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;createPattern&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, DOMString repetition);
+  &lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt; &lt;a href=#dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;createPattern&lt;/a&gt;(&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt; image, DOMString repetition);
 &lt;!--
   // v8 we received one request from Ralf Richard G&oml;bel for a new kind of pattern: a hatch.
   // basically it would be a series of dash styles, angles, line widths, and offsets
@@ -36646,9 +36785,9 @@
   &lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt; &lt;a href=#dom-context-2d-measuretext title=dom-context-2d-measureText&gt;measureText&lt;/a&gt;(DOMString text);
 
   // drawing images
-  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, unrestricted double dx, unrestricted double dy);
-  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
-  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
+  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;(&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt; image, unrestricted double dx, unrestricted double dy);
+  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;(&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt; image, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
+  void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;(&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt; image, unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
 
   // hit regions
   void &lt;a href=#dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;addHitRegion&lt;/a&gt;(&lt;a href=#hitregionoptions&gt;HitRegionOptions&lt;/a&gt; options);
@@ -36685,6 +36824,7 @@
            attribute DOMString &lt;a href=#dom-context-2d-font title=dom-context-2d-font&gt;font&lt;/a&gt;; // (default 10px sans-serif)
            attribute DOMString &lt;a href=#dom-context-2d-textalign title=dom-context-2d-textAlign&gt;textAlign&lt;/a&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
            attribute DOMString &lt;a href=#dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;textBaseline&lt;/a&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+           attribute DOMString &lt;a href=#dom-context-2d-direction title=dom-context-2d-direction&gt;direction&lt;/a&gt;; // &quot;ltr&quot;, &quot;rtl&quot;&lt;!--, &quot;auto&quot;--&gt;, &quot;inherit&quot; (default: &quot;inherit&quot;)
 };
 
 [NoInterfaceObject]
@@ -36771,24 +36911,323 @@
       methods, see <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=623437">https://bugzilla.mozilla.org/show_bug.cgi?id=623437</A>
       for an example, and its duplicates for more --&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext&lt;/a&gt;&lt;/code&gt;('2d')&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object that is permanently bound to a particular &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = new &lt;code title=dom-context-2d&gt;&lt;a href=#dom-context-2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns an unbound &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object with an implied bitmap with
+    the given dimensions in CSS pixels (300x150, if the arguments are omitted).&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if the rendering context was obtained using the
+    &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-width&gt;&lt;a href=#dom-context-2d-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-height&gt;&lt;a href=#dom-context-2d-height&gt;height&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the dimensions of the bitmap, in CSS pixels.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to update the bitmap's dimensions. If the rendering context is bound to a canvas,
+    this will also update the canvas' intrinsic dimensions.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-commit&gt;&lt;a href=#dom-context-2d-commit&gt;commit&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the rendering context is bound to a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;, display the current frame.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-canvas title=dom-context-2d-canvas&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element that the
-  context paints on.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object can be obtained in two ways: the &lt;code title=dom-canvas-getContext&gt;&lt;a href=#dom-canvas-getcontext&gt;getContext()&lt;/a&gt;&lt;/code&gt; method on a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element (which
+  invokes the &lt;a href=#2d-context-creation-algorithm&gt;2D context creation algorithm&lt;/a&gt;), and the &lt;code title=dom-context-2d&gt;&lt;a href=#dom-context-2d&gt;CanvasRenderingContext2D()&lt;/a&gt;&lt;/code&gt; constructor.&lt;/p&gt;
 
-  &lt;p&gt;Except where otherwise specified, for the 2D context interface,
-  &lt;strong&gt;any method call with a numeric argument whose value is
-  infinite or a NaN value must be ignored&lt;/strong&gt;.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object has a &lt;dfn id=scratch-bitmap&gt;scratch bitmap&lt;/dfn&gt; and can be bound
+  to an &lt;dfn id=output-bitmap&gt;output bitmap&lt;/dfn&gt;. These are initialized when the object is created, and can be
+  subsequently adjusted when the rendering context is &lt;a href=#concept-canvas-binding-steps title=concept-canvas-binding-steps&gt;bound&lt;/a&gt; or &lt;a href=#concept-canvas-unbinding-steps title=concept-canvas-unbinding-steps&gt;unbound&lt;/a&gt;. In some cases, these bitmaps are the same
+  underlying bitmap. In general, the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; is what scripts interact with, and
+  the &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; is what is being displayed. These bitmaps always have the same
+  dimensions.&lt;/p&gt;
 
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;p&gt;Each such bitmap has an &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag,
+  which can be set to true or false. Initially, when one of these bitmaps is created, its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag must be set to true.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+  &lt;p&gt;These bitmaps also have a &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;, which is described in a later section.
+  Initially, this list is empty. &lt;a href=#scratch-bitmap title=&quot;scratch bitmap&quot;&gt;Scratch bitmaps&lt;/a&gt; also have a
+  &lt;dfn id=list-of-pending-interface-actions&gt;list of pending interface actions&lt;/dfn&gt;, which can contain instructions to draw the user's
+  attention to a location on the bitmap, and instructions to scroll to a location on the bitmap.
+  Initially, this list is also empty.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=2d-context-creation-algorithm&gt;2D context creation algorithm&lt;/dfn&gt;, which is passed a &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; (a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element), consists of running the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Initialize its &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt; attribute to point to
+   &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; and
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; both be the same bitmap as &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap (so
+   that they are shared).&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;Set bitmap dimensions&lt;/a&gt; to the
+   numeric values of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; and
+   &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attributes.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d title=dom-context-2d&gt;&lt;code&gt;CanvasRenderingContext2D()&lt;/code&gt;&lt;/dfn&gt; constructor, when
+  invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Initialize its &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt; attribute to
+   null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; be
+   a new bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the constructor was called with arguments, let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; be the first and second arguments, respectively. Otherwise, let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; be 300 and 150, respectively.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;Set bitmap dimensions&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object have no &lt;a href=#output-bitmap&gt;output
+   bitmap&lt;/a&gt;.&lt;/li&gt;
+
+&lt;!--
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Start autocommitting the scratch bitmap&lt;/span&gt; for the new
+   &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the new &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is required to &lt;dfn id=commit-the-scratch-bitmap&gt;commit the scratch bitmap&lt;/dfn&gt; for a rendering
+  context, it must run the following steps:
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;bitmap copy&lt;/var&gt; be a copy of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt;.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin-clean flag copy&lt;/var&gt; be a copy of the rendering context's
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt;
+   flag.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;hit region list copy&lt;/var&gt; be a copy of the rendering context's
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list of pending interface actions copy&lt;/var&gt; be a copy of the rendering
+   context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Empty the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the rendering context has no &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt; be the rendering context's &lt;a href=#output-bitmap&gt;output
+   bitmap&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; from the &lt;a href=#canvas-updating-task-source&gt;canvas updating task source&lt;/a&gt; of the
+    &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;'s &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#event-loop&gt;event loop&lt;/a&gt; to perform
+    the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;bitmap
+     copy&lt;/var&gt;.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag with &lt;var title=&quot;&quot;&gt;origin-clean
+     flag copy&lt;/var&gt;.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; with &lt;var title=&quot;&quot;&gt;hit region list copy&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Follow the directions in the &lt;var title=&quot;&quot;&gt;list of pending interface actions
+     copy&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=canvas-updating-task-source&gt;canvas updating task source&lt;/dfn&gt; is just used for the algorithm above.&lt;/p&gt;
+
+&lt;!--(right now we're requiring commit())
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;start autocommitting the scratch bitmap&lt;/dfn&gt; for a rendering
+  context, it must asynchronously start running the following algorithm. This algorithm interacts
+  closely with the &lt;span&gt;event loop&lt;/span&gt; mechanism; in particular, it has a &lt;span&gt;synchronous
+  section&lt;/span&gt; (which is triggered as part of the &lt;span&gt;event loop&lt;/span&gt; algorithm). The steps in
+  that section are marked with &amp;#x231B;.&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Top&lt;/i&gt;: &lt;span&gt;Await a stable state&lt;/span&gt;. The &lt;span&gt;synchronous section&lt;/span&gt;
+   consists of the following steps. (The steps in the &lt;span&gt;synchronous section&lt;/span&gt; are marked
+   with &amp;#x231B;.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&amp;#x231B; &lt;span&gt;Commit the scratch bitmap&lt;/span&gt; for the rendering context.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;End the &lt;span&gt;synchronous section&lt;/span&gt;, continuing the remaining steps
+   asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;i&gt;top&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+--&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-commit title=dom-context-2d-commit&gt;&lt;code&gt;commit()&lt;/code&gt;&lt;/dfn&gt; method must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+   mode&lt;/a&gt; is &lt;a href=#concept-canvas-bound title=concept-canvas-bound&gt;fixed&lt;/a&gt;, throw an
+   &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#commit-the-scratch-bitmap&gt;Commit the scratch bitmap&lt;/a&gt; for the rendering context.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;The &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; is only &lt;a href=#commit-the-scratch-bitmap title=&quot;commit the scratch
+  bitmap&quot;&gt;committed&lt;/a&gt; when the &lt;code title=dom-context-2d-commit&gt;&lt;a href=#dom-context-2d-commit&gt;commit()&lt;/a&gt;&lt;/code&gt; method is
+  called. (This doesn't matter for &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements in &lt;a href=#concept-canvas-direct-2d title=concept-canvas-direct-2d&gt;direct-2d&lt;/a&gt; mode, since there the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt; is also the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap so every drawing operation is
+  immediately drawn.)&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;set bitmap
+  dimensions&lt;/dfn&gt; to &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;, it must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#reset-the-rendering-context-to-its-default-state&gt;Reset the rendering context to its default state&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; and its &lt;a href=#list-of-pending-interface-actions&gt;list of
+   pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Resize the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; to the new &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; and clear it to fully transparent black.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the rendering context has an &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;, and the &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt; is a different bitmap than the &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt;, then resize the
+   &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; to the new &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;
+   and clear it to fully transparent black.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+    mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, then run these substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; be the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element to which the rendering
+     context's &lt;code title=dom-context-2d-canvas&gt;&lt;a href=#dom-context-2d-canvas&gt;canvas&lt;/a&gt;&lt;/code&gt; attribute was initialized.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+     bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; and the numeric value of
+     the &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; content attribute
+     differs from &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, then set &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; content attribute to the shortest possible string
+     representing &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; as a &lt;a href=#valid-non-negative-integer&gt;valid non-negative integer&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context
+     bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; and the numeric value of
+     the &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attribute
+     differs from &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;, then set &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; content attribute to the shortest possible string
+     representing &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; as a &lt;a href=#valid-non-negative-integer&gt;valid non-negative integer&lt;/a&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;div class=example&gt;
+   &lt;p&gt;Only one square appears to be drawn in the following example:&lt;/p&gt;
+   &lt;pre&gt;// canvas is a reference to a &lt;canvas&gt; element
+var context = canvas.getContext('2d');
+context.fillRect(0,0,50,50);
+canvas.setAttribute('width', '300'); // clears the canvas
+context.fillRect(0,100,50,50);
+canvas.width = canvas.width; // clears the canvas
+context.fillRect(100,0,50,50); // only this square remains&lt;/pre&gt;
+  &lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;When the user agent is to run the &lt;dfn id=concept-canvas-unbinding-steps title=concept-canvas-unbinding-steps&gt;unbinding
+  steps&lt;/dfn&gt; for a rendering context, it must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#reset-the-rendering-context-to-its-default-state&gt;Reset the rendering context to its default state&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; and its &lt;a href=#list-of-pending-interface-actions&gt;list of
+   pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; to a
+   transparent black.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag to true.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object have no &lt;a href=#output-bitmap&gt;output
+   bitmap&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When the user agent is to run the &lt;dfn id=concept-canvas-binding-steps title=concept-canvas-binding-steps&gt;binding steps&lt;/dfn&gt;
+  to bind the rendering context to the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, it
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#reset-the-rendering-context-to-its-default-state&gt;Reset the rendering context to its default state&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; and its &lt;a href=#list-of-pending-interface-actions&gt;list of
+   pending interface actions&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Resize the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; to
+   the dimensions of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap and clear it to fully transparent
+   black.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag to true.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; 2D rendering context represents a flat linear
+  Cartesian surface whose origin (0,0) is at the top left corner, with the coordinate space having
+  &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; values increasing when going right, and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; values
+  increasing when going down. The &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the left-most edge is equal to
+  the width of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; in CSS pixels; similarly, the
+  &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;-coordinate of the bottom-most edge is equal to the height of the rendering
+  context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; in CSS pixels.&lt;/p&gt;
+
+  &lt;p&gt;The size of the coordinate space does not necessarily represent the size of the actual bitmaps
+  that the user agent will use internally or during rendering. On high-definition displays, for
+  instance, the user agent may internally use bitmaps with two device pixels per unit in the
+  coordinate space, so that the rendering remains at high quality throughout. Anti-aliasing can
+  similarly be implemented using over-sampling with bitmaps of a higher resolution than the final
+  image on the display.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-canvas title=dom-context-2d-canvas&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to when the object was created.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-width title=dom-context-2d-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the width of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, in CSS pixels. On
+  setting, it must &lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;set bitmap dimensions&lt;/a&gt;
+  to the new value and the current height of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; in
+  CSS pixels, respectively.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-height title=dom-context-2d-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the height of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, in CSS pixels. On
+  setting, it must &lt;a href=#concept-canvas-set-bitmap-dimensions title=concept-canvas-set-bitmap-dimensions&gt;set bitmap dimensions&lt;/a&gt;
+  to the current width of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; in CSS pixels and the
+  new value, respectively.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;Except where otherwise specified, for the 2D context interface, &lt;strong&gt;any method call with a
+  numeric argument whose value is infinite or a NaN value must be ignored&lt;/strong&gt;.&lt;/p&gt;
+
   &lt;!--
    Philip Taylor wrote:
    &gt; My experience with some 3d canvas code is that infinities come up in
@@ -36801,94 +37240,84 @@
    &gt; exceptions when passing in non-finite arguments.
   --&gt;
 
-  &lt;p&gt;Whenever the CSS value &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; is used
-  as a color in this API, the &quot;computed value of the 'color' property&quot;
-  for the purposes of determining the computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is the computed value of the
-  'color' property on the element in question at the time that the
-  color is specified (e.g. when the appropriate attribute is set, or
-  when the method is called; not when the color is rendered or
-  otherwise used). If the computed value of the 'color' property is
-  undefined for a particular case (e.g. because the element is not
-  &lt;a href=#in-a-document&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the &quot;computed value
-  of the 'color' property&quot; for the purposes of determining the
-  computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is
-  fully opaque black. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Whenever the CSS value &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; is used as a color in the
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; API, the &quot;computed value of the 'color' property&quot; for the
+  purposes of determining the computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is
+  the value described by the appropriate entry in the following list:&lt;/p&gt;
 
-  &lt;p&gt;In the case of &lt;code title=dom-canvasgradient-addColorStop&gt;&lt;a href=#dom-canvasgradient-addcolorstop&gt;addColorStop()&lt;/a&gt;&lt;/code&gt; on
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;, the &quot;computed value of the 'color'
-  property&quot; for the purposes of determining the computed value of the
-  &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is always fully opaque
-  black (there is no associated element). &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;dl&gt;&lt;dt&gt;If the rendering context's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap
+   mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; and the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;&lt;/dt&gt;
 
-  &lt;p class=note&gt;This is because &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; objects
-  are &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;-neutral &mdash; a
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object created by one
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; can be used by another, and there is therefore
-  no way to know which is the &quot;element in question&quot; at the time that
-  the color is specified.&lt;/p&gt;
+   &lt;dd&gt;&lt;p&gt;The &quot;computed value of the 'color' property&quot; for the purposes of determining the computed
+   value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is the computed value of the 'color'
+   property on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the color is specified (e.g. when
+   the appropriate attribute is set, or when the method is called; not when the color is rendered or
+   otherwise used). &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/dd&gt;
 
-  &lt;p class=note&gt;Similar concerns exist with font-related properties;
-  the rules for those are described in detail in the relevant section
-  below.&lt;/p&gt;
+   &lt;dt&gt;In all other cases&lt;/dt&gt;
 
-  &lt;/div&gt;
+   &lt;dd&gt;&lt;p&gt;The &quot;computed value of the 'color' property&quot; for the purposes of determining the computed
+   value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is fully opaque black. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/dd&gt;
 
+  &lt;/dl&gt;&lt;p&gt;In the case of &lt;code title=dom-canvasgradient-addColorStop&gt;&lt;a href=#dom-canvasgradient-addcolorstop&gt;addColorStop()&lt;/a&gt;&lt;/code&gt; on
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;, the &quot;computed value of the 'color' property&quot; for the purposes of
+  determining the computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is always fully
+  opaque black (there is no associated element). &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;h6 id=resolution&gt;&lt;span class=secno&gt;4.8.11.1.1 &lt;/span&gt;Resolution&lt;/h6&gt;
+  &lt;p class=note&gt;This is because &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; objects are
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;-neutral &mdash; a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object created by one
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; can be used by another, and there is therefore no way to know which is the
+  &quot;element in question&quot; at the time that the color is specified.&lt;/p&gt;
 
-  &lt;p&gt;The user agent may use a bitmap of any square resolution as the
-  backing store for a canvas that uses the 2D context. Once a canvas
-  has a bitmap, that canvas must keep its resolution for its
-  lifetime.&lt;/p&gt;
+  &lt;p class=note&gt;Similar concerns exist with font-related properties; the rules for those are
+  described in detail in the relevant section below.&lt;/p&gt;
 
-  &lt;p class=note&gt;In general, user agents are encouraged to use a
-  resolution equal to the screen resolution. Ideally, the number of
-  device pixels per CSS pixel would be a multiple of two. Several
-  factors can affect the screen resolution: most prominently the
-  actual display resolution, but also important is the current zoom
-  level.&lt;/p&gt;
+  &lt;/div&gt;
 
-  &lt;p&gt;All the bitmaps created during a single &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; for canvases that use 2D contexts
-  must have the same resolution.
-  &lt;a class=fingerprint href=#fingerprint&gt;&lt;img alt=&quot;(This is a fingerprinting vector.)&quot; src=<A HREF="http://images.whatwg.org/fingerprint.png">http://images.whatwg.org/fingerprint.png</A>&gt;&lt;/a&gt;
-  &lt;/p&gt;
 
-  &lt;pre class=idl&gt;partial interface &lt;a href=#screen&gt;Screen&lt;/a&gt; {
-  readonly attribute double &lt;a href=#dom-screen-canvasresolution title=dom-screen-canvasResolution&gt;canvasResolution&lt;/a&gt;;
-};&lt;/pre&gt;
+  &lt;h6 id=implementation-notes&gt;&lt;span class=secno&gt;4.8.11.2.1 &lt;/span&gt;Implementation notes&lt;/h6&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;window&lt;/var&gt; . &lt;code title=dom-Window-screen&gt;screen&lt;/code&gt; . &lt;code title=dom-screen-canvasResolution&gt;&lt;a href=#dom-screen-canvasresolution&gt;canvasResolution&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Although the way the specification is written it might sound like an implementation needs to
+  track up to four bitmaps per canvas or rendering context &mdash; one &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;,
+  one &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; for the rendering context, one bitmap for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;,
+  and one bitmap for the actually currently rendered image &mdash; user agents can in fact generally
+  optimise this to only one or two.&lt;/p&gt;
 
-    &lt;p&gt;Returns the resolution that has been, or will be, used for bitmaps during this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, when it isn't the same bitmap as the &lt;a href=#output-bitmap&gt;output
+  bitmap&lt;/a&gt;, is only directly observable if it is read, and therefore implementations can,
+  instead of updating this bitmap, merely remember the sequence of drawing operations that have been
+  applied to it until such time as the bitmap's actual data is needed (for example because of a call
+  to &lt;code title=dom-context-2d-commit&gt;&lt;a href=#dom-context-2d-commit&gt;commit()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt;, or the &lt;code&gt;ImageBitmap()&lt;/code&gt;
+  constructor). In many cases, this will be more memory efficient.&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;p&gt;The bitmap of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is the one bitmap that's pretty much always going
+  to be needed in practice. The &lt;a href=#output-bitmap&gt;output bitmap&lt;/a&gt; of a rendering context, when it has one,
+  is always just an alias to a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap.&lt;/p&gt;
 
-  &lt;/dl&gt;&lt;div class=impl&gt;
+  &lt;p&gt;Additional bitmaps are sometimes needed, e.g. to enable fast drawing when the canvas is being
+  painted at a different size than its intrinsic size, or to enable double buffering so that the
+  rendering commands from the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; can be applied without the rendering being
+  updated midway.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-screen-canvasresolution title=dom-screen-canvasResolution&gt;&lt;code&gt;canvasResolution&lt;/code&gt;&lt;/dfn&gt;
-  attribute of the &lt;code&gt;&lt;a href=#screen&gt;Screen&lt;/a&gt;&lt;/code&gt; object must return the
-  resolution, in image pixels per coordinate space units, that any
-  canvas bitmaps created during this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; will use (or have used). &lt;a href=#refsCSSOMVIEW&gt;[CSSOMVIEW]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;/div&gt;
 
 
+  &lt;h6 id=the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.2.2 &lt;/span&gt;The canvas state&lt;/h6&gt;
 
-  &lt;h6 id=the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.1.2 &lt;/span&gt;The canvas state&lt;/h6&gt;
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; rendering context maintains a stack of drawing
+  states. &lt;dfn id=drawing-state title=&quot;drawing state&quot;&gt;Drawing states&lt;/dfn&gt; consist of:&lt;/p&gt;
 
-  &lt;p&gt;Each context maintains a stack of drawing states. &lt;dfn id=drawing-state title=&quot;drawing state&quot;&gt;Drawing states&lt;/dfn&gt; consist of:&lt;/p&gt;
-
   &lt;ul class=brief&gt;&lt;li&gt;The current &lt;a href=#transformations title=dom-context-2d-transformation&gt;transformation matrix&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;The current &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;The current values of the following attributes: &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineDashOffset&gt;&lt;a href=#dom-context-2d-linedashoffset&gt;lineDashOffset&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d
 -shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+   &lt;li&gt;The current values of the following attributes: &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineDashOffset&gt;&lt;a href=#dom-context-2d-linedashoffset&gt;lineDashOffset&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d
 -shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
    &lt;li&gt;The current &lt;a href=#dash-list&gt;dash list&lt;/a&gt;.&lt;/li&gt;
-  &lt;/ul&gt;&lt;p class=note&gt;The &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; and the
-  current bitmap are not part of the drawing state. The &lt;a href=#current-default-path&gt;current
-  default path&lt;/a&gt; is persistent, and can only be reset using the
-  &lt;code title=dom-context-2d-beginPath&gt;&lt;a href=#dom-context-2d-beginpath&gt;beginPath()&lt;/a&gt;&lt;/code&gt; method.
-  The current bitmap is a property of the canvas, not the context.&lt;/p&gt;
+  &lt;/ul&gt;&lt;p class=note&gt;The &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; and the rendering context's bitmaps are not
+  part of the drawing state. The &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; is persistent, and can only be
+  reset using the &lt;code title=dom-context-2d-beginPath&gt;&lt;a href=#dom-context-2d-beginpath&gt;beginPath()&lt;/a&gt;&lt;/code&gt; method. The bitmaps
+  depend on whether and how the rendering context is bound to a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-save&gt;&lt;a href=#dom-context-2d-save&gt;save&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
 
@@ -36908,15 +37337,17 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-save title=dom-context-2d-save&gt;&lt;code&gt;save()&lt;/code&gt;&lt;/dfn&gt;
-  method must push a copy of the current drawing state onto the
-  drawing state stack.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-save title=dom-context-2d-save&gt;&lt;code&gt;save()&lt;/code&gt;&lt;/dfn&gt; method must push a copy of the
+  current drawing state onto the drawing state stack.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-restore title=dom-context-2d-restore&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method
-  must pop the top entry in the drawing state stack, and reset the
-  drawing state it describes. If there is no saved state, the method
-  must do nothing.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-restore title=dom-context-2d-restore&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method must pop the top
+  entry in the drawing state stack, and reset the drawing state it describes. If there is no saved
+  state, the method must do nothing.&lt;/p&gt;
 
+  &lt;p&gt;When the user agent is to &lt;dfn id=reset-the-rendering-context-to-its-default-state&gt;reset the rendering context to its default state&lt;/dfn&gt;, it must
+  clear the drawing state stack and everything that &lt;a href=#drawing-state&gt;drawing state&lt;/a&gt; consists of to
+  initial values.&lt;/p&gt;
+
   &lt;!-- v7
 idea from Mihai:
 &gt; 5. Drawing states should be saveable with IDs, and for easier restoring.
@@ -36938,7 +37369,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=drawingstyle-objects&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;&lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
+  &lt;h6 id=drawingstyle-objects&gt;&lt;span class=secno&gt;4.8.11.2.3 &lt;/span&gt;&lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
 
   &lt;p&gt;All the line styles (line width, caps, joins, and dash patterns)
   and text styles (fonts) described in the next two sections apply to
@@ -36960,23 +37391,22 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;Each &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object has a &lt;dfn id=styles-scope-node&gt;styles scope
-  node&lt;/dfn&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object can have a &lt;dfn id=styles-scope-object&gt;styles scope object&lt;/dfn&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-drawingstyle title=dom-DrawingStyle&gt;&lt;code&gt;DrawingStyle()&lt;/code&gt;&lt;/dfn&gt;
-  constructor, when invoked, must return a newly created
-  &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object. If the constructor was passed an
-  argument, then the &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#styles-scope-node&gt;styles
-  scope node&lt;/a&gt; is that element. Otherwise, the object's
-  &lt;a href=#styles-scope-node&gt;styles scope node&lt;/a&gt; is the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object
-  of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
-  interface object of the invoked constructor is found.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-drawingstyle title=dom-DrawingStyle&gt;&lt;code&gt;DrawingStyle()&lt;/code&gt;&lt;/dfn&gt; constructor, when invoked,
+  must return a newly created &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object. If the constructor was passed an
+  argument, then the &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#styles-scope-object&gt;styles scope object&lt;/a&gt; is that
+  element. Otherwise, if the &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt; is a &lt;a href=#document-environment&gt;document
+  environment&lt;/a&gt;, the object's &lt;a href=#styles-scope-object&gt;styles scope object&lt;/a&gt; is the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
+  object of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of the
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the interface object of the invoked constructor is found.
+  Otherwise, the &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt; is a &lt;a href=#worker-environment&gt;worker environment&lt;/a&gt;,
+  and the &lt;a href=#styles-scope-object&gt;styles scope object&lt;/a&gt; is the worker.&lt;/p&gt;
 
   &lt;/div&gt;
 
 
-  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Line styles&lt;/h6&gt;
+  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.2.4 &lt;/span&gt;Line styles&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;styles&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
@@ -37458,7 +37888,7 @@
 hairline width with transform. ack Shaun Morris.  --&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=text-styles&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Text styles&lt;/h6&gt;
+  &lt;h6 id=text-styles&gt;&lt;span class=secno&gt;4.8.11.2.5 &lt;/span&gt;Text styles&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;styles&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
@@ -37483,9 +37913,8 @@
 
     &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the alignment. The possible values are
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the alignment. The possible values are and their meanings are given
+    below. Other values are ignored. The default is &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -37496,21 +37925,37 @@
 
     &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the baseline alignment. The possible
-    values and their meanings are given below. Other values are
-    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the baseline alignment. The possible values and their meanings are
+    given below. Other values are ignored. The default is &lt;code title=dom-concept-2d-textAlign-alphabetic&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;styles&lt;/var&gt; . &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current directionality.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the directionality. The possible values and their meanings are given
+    below. Other values are ignored. The default is &lt;code title=dom-concept-2d-textAlign-inherit&gt;inherit&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object. Such
-  objects also have a &lt;dfn id=font-style-source-node&gt;font style source node&lt;/dfn&gt;. For
-  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects, this is the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. For &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; objects,
-  it's the &lt;a href=#styles-scope-node&gt;styles scope node&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface have attributes (defined
+  in this section) that control how text is laid out (rasterized or outlined) by the object. Such
+  objects can also have a &lt;dfn id=font-style-source-object&gt;font style source object&lt;/dfn&gt;. For
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects whose &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, this is their &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element; for other
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects, if the &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt;
+  is a &lt;a href=#document-environment&gt;document environment&lt;/a&gt;, the object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; is the
+  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the interface object of the
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object is found; otherwise the &lt;a href=#javascript-global-environment&gt;JavaScript global
+  environment&lt;/a&gt; is a &lt;a href=#worker-environment&gt;worker environment&lt;/a&gt; and the &lt;a href=#font-style-source-object&gt;font style source
+  object&lt;/a&gt; is the worker. For &lt;code&gt;&lt;a href=#drawingstyle&gt;DrawingStyle&lt;/a&gt;&lt;/code&gt; objects, it's the &lt;a href=#styles-scope-object&gt;styles scope
+  object&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
@@ -37524,15 +37969,13 @@
   'initial'), then it must be ignored, without assigning a new font
   value. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the &lt;a href=#font-style-source-node&gt;font
-  style source node&lt;/a&gt;'s stylesheets when the font is to be used;
-  any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; that are
-  visible to that element must therefore be available once they are
-  loaded. (If a reference font is used before it is fully loaded, or
-  if the &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt; does not have that font
-  in scope at the time the font is to be used, then it must be treated
-  as if it was an unknown font, falling back to another as described
-  by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Font names must be interpreted in the context of the &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; when
+  the font is to be used; any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; or loaded using
+  the &lt;code&gt;&lt;a href=#fontloader&gt;FontLoader&lt;/a&gt;&lt;/code&gt; that are visible to the &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; must
+  therefore be available once they are loaded. If a font is used before it is fully loaded, or if
+  the &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; does not have that font in scope at the time the font is
+  to be used, then it must be treated as if it was an unknown font, falling back to another as
+  described by the relevant CSS specifications. &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
@@ -37557,52 +38000,61 @@
 
   &lt;/div&gt;
 
-  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt;
-  interface is created, the font of the context must be set to 10px
-  sans-serif. When the 'font-size' component is set to lengths using
-  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
-  keywords, these must be interpreted relative to the computed value
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the
+  font of the context must be set to 10px sans-serif. When the 'font-size' component is set to
+  lengths using percentages, 'em' or 'ex' units, or the 'larger' or 'smaller' keywords, these must
+  be interpreted relative to the computed value of the 'font-size' property of the &lt;a href=#font-style-source-object&gt;font style
+  source object&lt;/a&gt; at the time that the attribute is set, if it is an element. When the
+  'font-weight' component is set to the relative values 'bolder' and 'lighter', these must be
+  interpreted relative to the computed value of the 'font-weight' property of the &lt;a href=#font-style-source-object&gt;font style
+  source object&lt;/a&gt; at the time that the attribute is set, if it is an element. If the computed
+  values are undefined for a particular case (e.g. because the &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt;
+  is not an element or is not &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;), then the relative keywords must be
+  interpreted relative to the normal-weight 10px sans-serif default.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code title=dom-concept-2d-textAlign-start&gt;&lt;a href=#dom-concept-2d-textalign-start&gt;start&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-concept-2d-textAlign-end&gt;&lt;a href=#dom-concept-2d-textalign-end&gt;end&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-concept-2d-textAlign-left&gt;&lt;a href=#dom-concept-2d-textalign-left&gt;left&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-concept-2d-textAlign-right&gt;&lt;a href=#dom-concept-2d-textalign-right&gt;right&lt;/a&gt;&lt;/code&gt;, or &lt;code title=dom-concept-2d-textAlign-center&gt;&lt;a href=#dom-concept-2d-textalign-center&gt;center&lt;/a&gt;&lt;/code&gt;, then the value must be changed to the new
+  value. Otherwise, the new value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must initially have the value &lt;code title=dom-concept-2d-textAlign-start&gt;&lt;a href=#dom-concept-2d-textalign-start&gt;start&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-  of the 'font-size' property of the &lt;a href=#font-style-source-node&gt;font style source
-  node&lt;/a&gt; at the time that the attribute is set, if that is an
-  element. When the 'font-weight' component is set to the relative
-  values 'bolder' and 'lighter', these must be interpreted relative to
-  the computed value of the 'font-weight' property of the &lt;a href=#font-style-source-node&gt;font
-  style source node&lt;/a&gt; at the time that the attribute is set, if
-  that is an element. If the computed values are undefined for a
-  particular case (e.g. because the &lt;a href=#font-style-source-node&gt;font style source
-  node&lt;/a&gt; is not an element or is not &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
-  interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;, or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;, then the value must be changed to the
+  new value. Otherwise, the new value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute must initially have the value
+  &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on getting, must return the current value. On setting, if
-  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
-  value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the object implementing the
-  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
-  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-direction title=dom-context-2d-direction&gt;&lt;code&gt;direction&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code title=dom-context-2d-direction-ltr&gt;ltr&lt;/code&gt;, &lt;code title=dom-context-2d-direction-rtl&gt;rtl&lt;/code&gt;, &lt;!--&lt;code
+  title=&quot;dom-context-2d-direction-auto&quot;&gt;auto&lt;/code&gt;,--&gt; or or &lt;code title=dom-context-2d-direction-inherit&gt;inherit&lt;/code&gt;, then the value must be changed to the new
+  value. Otherwise, the new value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; attribute must initially have the value &lt;code title=dom-context-2d-direction-inherit&gt;inherit&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute, on getting, must return the current value. On
-  setting, if the value is one of &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;,
-  or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;,
-  then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the object implementing the
-  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
-  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;p&gt;The &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
+  &lt;p&gt;The &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute's allowed keywords are
+  as follows:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-start title=dom-concept-2d-textAlign-start&gt;&lt;code&gt;start&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the start edge of the text (left side in left-to-right text, right side in
+   right-to-left text).&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-end title=dom-concept-2d-textAlign-end&gt;&lt;code&gt;end&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the end edge of the text (right side in left-to-right text, left side in
+   right-to-left text).&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-left title=dom-concept-2d-textAlign-left&gt;&lt;code&gt;left&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the left.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-right title=dom-concept-2d-textAlign-right&gt;&lt;code&gt;right&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the right.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-textalign-center title=dom-concept-2d-textAlign-center&gt;&lt;code&gt;center&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the center.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;The &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
   attribute's allowed keywords correspond to alignment points in the
   font:&lt;/p&gt;
 
-  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
-  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
   &lt;p&gt;&lt;img alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &#2310; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &Aacute;, &yuml;, f, and &Omega; are anchored, the ideographic baseline is where glyphs like &#31169; and &#36948; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot; height=300 src=<A HREF="http://images.whatwg.org/baselines.png">http://images.whatwg.org/baselines.png</A> width=738&gt;&lt;/p&gt;
 
   &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
@@ -37625,15 +38077,34 @@
    &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
    &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=text-preparation-algorithm&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes
-  as input a string &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, a
-  &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;,
-  and an optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an
-  array of glyph shapes, each positioned on a common coordinate space,
-  and a &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
-  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i title=&quot;&quot;&gt;center&lt;/i&gt;. (Most callers of this
-  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;.)&lt;/p&gt;
+  &lt;/dl&gt;&lt;p&gt;The &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute's allowed keywords are
+  as follows:&lt;/p&gt;
 
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-concept-2d-direction-ltr title=dom-concept-2d-direction-ltr&gt;&lt;code&gt;ltr&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Treat input to the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt; as left-to-right text.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-direction-rtl title=dom-concept-2d-direction-rtl&gt;&lt;code&gt;rtl&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Treat input to the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt; as right-to-left text.&lt;/dd&gt;
+
+&lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-direction-auto&quot;&gt;&lt;code&gt;auto&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Determine the direction from the input to the &lt;span&gt;text preparation algorithm&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-concept-2d-direction-inherit title=dom-concept-2d-direction-inherit&gt;&lt;code&gt;inherit&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Default to the directionality of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element or &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
+   as appropriate.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=text-preparation-algorithm&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes as input a string &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, a &lt;code&gt;&lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and an
+  optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an array of glyph shapes, each positioned
+  on a common coordinate space, a &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
+  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i title=&quot;&quot;&gt;center&lt;/i&gt;, and an inline box. (Most callers of this
+  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; and the inline box.)&lt;/p&gt;
+
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided but is less
    than or equal to zero, return an empty array.&lt;/li&gt;
 
@@ -37648,25 +38119,37 @@
     &lt;p&gt;Apply the appropriate step from the following list to determine
     the value of &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;:&lt;/p&gt;
 
-    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
-     source node&lt;/a&gt; is an element&lt;/dt&gt;
+    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; attribute has the value &quot;&lt;code title=dom-context-2d-direction-ltr&gt;ltr&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;a href=#concept-ltr title=concept-ltr&gt;ltr&lt;/a&gt;'.&lt;/dd&gt;
 
-     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the
-     directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
-     &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt;.&lt;/dd&gt;
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code title=dom-context-2d-direction&gt;&lt;a href=#dom-context-2d-direction&gt;direction&lt;/a&gt;&lt;/code&gt; attribute has the value &quot;&lt;code title=dom-context-2d-direction-rtl&gt;rtl&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;a href=#concept-rtl title=concept-rtl&gt;rtl&lt;/a&gt;'.&lt;/dd&gt;
 
-     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
-     source node&lt;/a&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that
-     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has a root element child&lt;/dt&gt;
+&lt;!--
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code
+     title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt; attribute has the value &quot;&lt;code
+     title=&quot;dom-context-2d-direction-auto&quot;&gt;auto&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;
+      Find the first character in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; of bidirectional character type L, AL, or
+      R, if any. If such a character is found and it is of bidirectional character type AL or R,
+      then let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-rtl&quot;&gt;rtl&lt;/span&gt;'; otherwise,
+      let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-rtl&quot;&gt;rtl&lt;/span&gt;'. &lt;a
+      href=&quot;#refsBIDI&quot;&gt;[BIDI]&lt;/a&gt;
+     &lt;/dd&gt;
+--&gt;
 
-     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the
-     directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
-     &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt;'s root element child.&lt;/dd&gt;
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; 
+     is an element&lt;/dt&gt;
 
-     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
-     source node&lt;/a&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that
-     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has no root element child&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt;.&lt;/dd&gt;
 
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt; 
+     is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has a root element child&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-object&gt;font style source object&lt;/a&gt;'s root element child.&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
      &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;a href=#concept-ltr title=concept-ltr&gt;ltr&lt;/a&gt;'.&lt;/dd&gt;
 
     &lt;/dl&gt;&lt;/li&gt;
@@ -37700,14 +38183,14 @@
     &lt;p&gt;Horizontal position:&lt;/p&gt;
 
     &lt;dl&gt;&lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=dom-concept-2d-textAlign-left&gt;&lt;a href=#dom-concept-2d-textalign-left&gt;left&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=dom-concept-2d-textAlign-start&gt;&lt;a href=#dom-concept-2d-textalign-start&gt;start&lt;/a&gt;&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'ltr'&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=dom-concept-2d-textAlign-end&gt;&lt;a href=#dom-concept-2d-textalign-end&gt;end&lt;/a&gt;&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'rtl'&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
@@ -37715,14 +38198,14 @@
 
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=dom-concept-2d-textAlign-right&gt;&lt;a href=#dom-concept-2d-textalign-right&gt;right&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=dom-concept-2d-textAlign-end&gt;&lt;a href=#dom-concept-2d-textalign-end&gt;end&lt;/a&gt;&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'ltr'&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=dom-concept-2d-textAlign-start&gt;&lt;a href=#dom-concept-2d-textalign-start&gt;start&lt;/a&gt;&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'rtl'&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
@@ -37730,7 +38213,7 @@
 
 
      &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=dom-concept-2d-textAlign-center&gt;&lt;a href=#dom-concept-2d-textalign-center&gt;center&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
      position be half way between the left and right edges of the
@@ -37793,11 +38276,10 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, and, for callers that
-   need it, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; as the alignment
-   value.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;, and the inline
+   box.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Building paths&lt;/h6&gt;
+  &lt;/ol&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.2.6 &lt;/span&gt;Building paths&lt;/h6&gt;
 
   &lt;p&gt;Each object implementing the &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
   interface has a &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;. A &lt;dfn id=concept-path title=concept-path&gt;path&lt;/dfn&gt; has a list of zero or more subpaths.
@@ -38372,7 +38854,7 @@
 
 
 
-  &lt;h6 id=path-objects&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
+  &lt;h6 id=path-objects&gt;&lt;span class=secno&gt;4.8.11.2.7 &lt;/span&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
 
   &lt;p&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects can be used to declare paths that are
   then later used on &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects. In
@@ -38671,9 +39153,8 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
+  &lt;h6 id=transformations&gt;&lt;span class=secno&gt;4.8.11.2.8 &lt;/span&gt;&lt;dfn title=dom-context-2d-transformation&gt;Transformations&lt;/dfn&gt;&lt;/h6&gt;
 
-  &lt;h6 id=transformations&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;&lt;dfn title=dom-context-2d-transformation&gt;Transformations&lt;/dfn&gt;&lt;/h6&gt;
-
   &lt;p&gt;Each &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object has a
   &lt;i&gt;current transformation matrix&lt;/i&gt;, as well as methods (described
   in this section) to manipulate it. When a
@@ -38829,9 +39310,82 @@
 
 
 
+  &lt;h6 id=image-sources-for-2d-rendering-contexts&gt;&lt;span class=secno&gt;4.8.11.2.9 &lt;/span&gt;Image sources for 2D rendering contexts&lt;/h6&gt;
 
-  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+  &lt;p&gt;Several methods in the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; API take the union type
+  &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; as an argument.&lt;/p&gt;
 
+  &lt;p&gt;This union type allows objects implementing any of the following interfaces to be used as image
+  sources:&lt;/p&gt;
+
+  &lt;ul&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; (&lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; (&lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; (&lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;BitmapImage&lt;/code&gt;&lt;/li&gt;
+
+  &lt;!-- v3: supporting ImageData object might make sense (when resizing as well as filtering) - ack Charles Pritchard --&gt;
+
+  &lt;/ul&gt;&lt;p&gt;When a user agent is required to &lt;dfn id=check-the-usability-of-the-image-argument&gt;check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+  argument&lt;/dfn&gt;, where &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object, the
+  user agent must run these steps, which return either &lt;i&gt;good&lt;/i&gt;, &lt;i&gt;bad&lt;/i&gt;, or
+  &lt;i&gt;aborted&lt;/i&gt;:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that
+   is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+   argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then return &lt;i&gt;bad&lt;/i&gt; and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with
+   either a horizontal dimension or a vertical dimension equal to zero, then the implementation
+   throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and return &lt;i&gt;aborted&lt;/i&gt;.&lt;/p&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, the
+  element's image must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;Specifically, when a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an animated image in an
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, the user agent must use the poster frame of the animation, or, if
+  there is no poster frame, the first frame of the animation, when rendering the image for
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; APIs.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then
+  the frame at the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; when the method with the argument is
+  invoked must be used as the source image when rendering the image for
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; APIs, and the source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt; of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;
+  (i.e. after any aspect-ratio correction has been applied).&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, the
+  element's bitmap must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;, the
+  object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents an element that is &lt;a href=#being-rendered&gt;being
+  rendered&lt;/a&gt; and that element has been resized, the original image data of the source image
+  must be used, not the image as it is rendered (e.g. &lt;code title=attr-dim-width&gt;&lt;a href=#attr-dim-width&gt;width&lt;/a&gt;&lt;/code&gt; and
+  &lt;code title=attr-dim-height&gt;&lt;a href=#attr-dim-height&gt;height&lt;/a&gt;&lt;/code&gt; attributes on the source element have no effect on how
+  the object is interpreted when rendering the image for &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
+  APIs).&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#canvasimagesource&gt;CanvasImageSource&lt;/a&gt;&lt;/code&gt; object represents a &lt;code&gt;BitmapImage&lt;/code&gt;, the
+  object's bitmap image data must be used as the source image.&lt;/p&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;p&gt;&lt;dfn id=the-image-argument-is-not-origin-clean&gt;The &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/dfn&gt; if it is an
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#origin&gt;origin&lt;/a&gt; is not
+  the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;,
+  or if it is an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; whose bitmap's &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag is false, or if it is a
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag is false.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+
+
+  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.2.10 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -38895,15 +39449,18 @@
   attribute represents the color or style to use for the lines around
   the shapes.&lt;/p&gt;
 
-  &lt;p&gt;Both attributes can be either strings,
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On
-  setting, strings must be &lt;a href=#parsed-as-a-css-color-value title=&quot;parsed as a CSS &lt;color&gt;
-  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/a&gt; and the color
-  assigned, and &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and
-  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned themselves. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
-  cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt; value&lt;/a&gt;, then it
-  must be ignored, and the attribute must retain its previous
-  value.&lt;/p&gt;
+  &lt;p&gt;Both attributes can be either strings, &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or
+  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On setting, strings must be &lt;a href=#parsed-as-a-css-color-value title=&quot;parsed as a CSS
+  &lt;color&gt; value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/a&gt; and the color assigned, and
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned themselves. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS
+  &lt;color&gt; value&lt;/a&gt;, then it must be ignored, and the attribute must retain its previous
+  value.
+&lt;!--ADD-TOPIC:Security--&gt;
+  If the new value is a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that is marked as &lt;a href=#concept-canvas-pattern-not-origin-clean title=concept-canvas-pattern-not-origin-clean&gt;not origin-clean&lt;/a&gt;, then the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag must be set to
+  false.
+&lt;!--REMOVE-TOPIC:Security--&gt;
+  &lt;/p&gt;
 
   &lt;p&gt;When set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; or
   &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object, the assignment is
@@ -38939,9 +39496,8 @@
   &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; attributes
   must initially have the string value &lt;code title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the value is a color, it must not be affected by the
-  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
-  singular matrices don't affect solid color fillStyles --&gt;
+  &lt;p&gt;When the value is a color, it must not be affected by the transformation matrix when used to
+  draw on bitmaps.&lt;/p&gt; &lt;!-- so singular matrices don't affect solid color fillStyles --&gt;
 
   &lt;/div&gt;
 
@@ -39064,7 +39620,7 @@
    starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
    positive infinity and ending with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
    circumference of the circle with radius &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
-   canvas that have not yet been painted on by earlier circles in this
+   bitmap that have not yet been painted on by earlier circles in this
    step for this rendering of the gradient.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p class=note&gt;This effectively creates a cone, touched by the two
@@ -39114,51 +39670,45 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;To create objects of this type, the &lt;dfn id=dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method is used. The first argument gives the image to use as the
-  pattern (either an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;,
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object). Modifying this image after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
-  must not affect the pattern. The second argument must be a string
-  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
-  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
-  is given, then the user agent must throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
-  exception. User agents must recognize the four values described above
-  exactly (e.g. they must not do case folding). Except as specified
-  below, the method must return a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object
-  suitably initialized.&lt;/p&gt;
+  &lt;p&gt;To create objects of this type, the &lt;dfn id=dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is used. When the method is invoked, the user agent
+  must run the following steps:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
-  paragraph --&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; be the first argument and &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; be
+   the second argument.&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
-  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
-  equivalent paragraph --&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#check-the-usability-of-the-image-argument&gt;Check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument&lt;/a&gt;. If this
+   returns &lt;i&gt;aborted&lt;/i&gt;, then an exception has been thrown and the method doesn't return anything;
+   abort these steps. If it returns &lt;i&gt;bad&lt;/i&gt;, then return null and abort these steps. Otherwise it
+   returns &lt;i&gt;good&lt;/i&gt;; continue with these steps.&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; is the empty string, let it be &quot;&lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;.&lt;/p&gt;
 
-  &lt;p&gt;Patterns have a transformation matrix, which controls how the
-  pattern is used when it is painted. Initially, a pattern's
-  transformation matrix must be the identity transform.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; is not a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for one of
+   &quot;&lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;&quot;, or &quot;&lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;&quot;, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+   exception and abort these steps.&lt;/li&gt;
 
-  &lt;p&gt;When the &lt;dfn id=dom-canvaspattern-settransform title=dom-canvaspattern-setTransform&gt;&lt;code&gt;setTransform()&lt;/code&gt;&lt;/dfn&gt;
-  method is invoked on the pattern, the user agent must replace the
-  pattern's transformation matrix with the one described by the
-  &lt;code&gt;&lt;a href=#svgmatrix&gt;SVGMatrix&lt;/a&gt;&lt;/code&gt; object provided as an argument to the
-  method.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object with the image &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+   and the repetition behavior given by &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.&lt;/li&gt;
 
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#the-image-argument-is-not-origin-clean&gt;the &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/a&gt;, then mark the
+   &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object as &lt;dfn id=concept-canvas-pattern-not-origin-clean title=concept-canvas-pattern-not-origin-clean&gt;not
+   origin-clean&lt;/dfn&gt;.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;Modifying the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; used when creating a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object
+  after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method must
+  not affect the pattern(s) rendered by the &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;Patterns have a transformation matrix, which controls how the pattern is used when it is
+  painted. Initially, a pattern's transformation matrix must be the identity transform.&lt;/p&gt;
+
+  &lt;p&gt;When the &lt;dfn id=dom-canvaspattern-settransform title=dom-canvaspattern-setTransform&gt;&lt;code&gt;setTransform()&lt;/code&gt;&lt;/dfn&gt; method
+  is invoked on the pattern, the user agent must replace the pattern's transformation matrix with
+  the one described by the &lt;code&gt;&lt;a href=#svgmatrix&gt;SVGMatrix&lt;/a&gt;&lt;/code&gt; object provided as an argument to the method.&lt;/p&gt;
+
   &lt;p&gt;When a pattern is to be rendered within an area, the user agent
   must run the following steps to determine what is rendered:&lt;/p&gt;
 
@@ -39166,27 +39716,21 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Place a copy of the image on the bitmap, anchored such that its
-    top left corner is at the origin of the coordinate space, with one
-    coordinate space unit per CSS pixel of the image, then place
-    repeated copies of this image horizontally to the left and right,
-    if the &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically
-    up and down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or
-    in all four directions all over the bitmap, if the
-    &lt;code&gt;repeat&lt;/code&gt; string was specified.&lt;/p&gt;
+    &lt;p&gt;Place a copy of the image on the bitmap, anchored such that its top left corner is at the
+    origin of the coordinate space, with one coordinate space unit per CSS pixel of the image, then
+    place repeated copies of this image horizontally to the left and right, if the repetition
+    behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;&quot;, or vertically up and down, if the repetition
+    behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;&quot;, or in all four directions all over the bitmap, if
+    the repetition behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;.&lt;/p&gt;
 
-    &lt;p&gt;If the original image data is a bitmap image, the value painted
-    at a point in the area of the repetitions is computed by filtering
-    the original image data. If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-    attribute is set to true, then the user agent may use any
-    filtering algorithm (for example bilinear interpolation or
-    nearest-neighbor). If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-    attribute is set to false, the image must be rendered using
-    nearest-neighbor interpolation. When such a filtering algorithm
-    requires a pixel value from outside the original image data, it
-    must instead use the value from wrapping the pixel's coordinates
-    to the original image's dimensions. (That is, the filter uses
-    'repeat' behavior, regardless of the value of &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
+    &lt;p&gt;If the original image data is a bitmap image, the value painted at a point in the area of the
+    repetitions is computed by filtering the original image data. If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt; attribute is set to
+    true, then the user agent may use any filtering algorithm (for example bilinear interpolation or
+    nearest-neighbor). If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt; attribute is set to
+    false, the image must be rendered using nearest-neighbor interpolation. When such a filtering
+    algorithm requires a pixel value from outside the original image data, it must instead use the
+    value from wrapping the pixel's coordinates to the original image's dimensions. (That is, the
+    filter uses 'repeat' behavior, regardless of the value of the pattern's repetition behavior.)&lt;/p&gt;
     &lt;!-- drawImage() has similar paragraphs with different rules --&gt;
 
    &lt;/li&gt;
@@ -39204,27 +39748,7 @@
    &lt;li&gt;&lt;p&gt;The resulting bitmap is what is to be rendered, with the
    same origin and same scale.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;When the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then the frame at the &lt;a href=#current-playback-position&gt;current
-  playback position&lt;/a&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and
-  &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt;
-  of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;/div&gt;
-
-  &lt;div class=impl&gt;
-
-  &lt;hr&gt;&lt;p&gt;If a radial gradient or repeated pattern is used when the
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;If a radial gradient or repeated pattern is used when the
   transformation matrix is singular, the resulting style must be
   transparent black (otherwise the gradient or pattern would be
   collapsed to a point or line, leaving the other pixels undefined).
@@ -39236,7 +39760,7 @@
 
 
 
-  &lt;h6 id=drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing rectangles to the canvas&lt;/h6&gt;
+  &lt;h6 id=drawing-rectangles-to-the-bitmap&gt;&lt;span class=secno&gt;4.8.11.2.11 &lt;/span&gt;Drawing rectangles to the bitmap&lt;/h6&gt;
 
   &lt;p&gt;There are three methods that immediately draw rectangles to the
   bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
@@ -39264,7 +39788,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+    &lt;p&gt;Clears all pixels on the bitmap in the given rectangle to transparent black.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -39272,7 +39796,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+    &lt;p&gt;Paints the given rectangle onto the bitmap, using the current fill style.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -39280,7 +39804,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the bitmap, using the current stroke style.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -39288,14 +39812,14 @@
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in the
-   specified rectangle that also intersect the current &lt;a href=#clipping-region&gt;clipping
-   region&lt;/a&gt;.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in
+   the specified rectangle that also intersect the current
+   &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Clear the pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; to a fully
    transparent black, erasing any previous image.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; in the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p class=note&gt;If either height or width are zero, this method has
   no effect, since the set of pixels would be empty.&lt;/p&gt;
@@ -39325,7 +39849,7 @@
 
 
 
-  &lt;h6 id=drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing text to the canvas&lt;/h6&gt;
+  &lt;h6 id=drawing-text-to-the-bitmap&gt;&lt;span class=secno&gt;4.8.11.2.12 &lt;/span&gt;Drawing text to the bitmap&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
@@ -39367,8 +39891,8 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the
-  following methods for rendering text directly to the canvas.&lt;/p&gt;
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the following methods for
+  rendering text.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-filltext title=dom-context-2d-fillText&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
   &lt;dfn id=dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
@@ -39412,6 +39936,16 @@
 
    &lt;/li&gt;
 
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt; used a font that has an &lt;a href=#origin&gt;origin&lt;/a&gt;
+   that is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+   &lt;a href=#origin&gt;origin&lt;/a&gt; (even if &quot;using a font&quot; means just checking if that font has a particular
+   glyph in it before falling back to another font), then set the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s
+   &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag to false.&lt;/li&gt; &lt;!--
+   because fonts could consider sensitive material, I guess; and because that sensitivity could
+   extend to whether or not a particular glyph is in the font in the first place. --&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
   &lt;/ol&gt;&lt;!--v6DVT - this is commented out until CSS can get its act together
 enough to actual specify vertical text rendering (how long have we
 been waiting now?)
@@ -39419,7 +39953,7 @@
 WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
 
 ALSO NOTE THAT THIS PROBABLY NEEDS ENTIRELY REVISITING NOW THAT WE
-HAVE REJIGGED HOW TEXT WORKS IN v5
+HAVE REJIGGED HOW TEXT WORKS IN v5 (e.g. remember security)
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
@@ -39565,19 +40099,11 @@
 
   &lt;/ol&gt;
 
-v6DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
-  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
-  is invoked, the user agent must replace all the &lt;a href=#space-character title=&quot;space
-  character&quot;&gt;space characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
-  U+0020 SPACE characters, and then must form a hypothetical
-  infinitely-wide CSS line box containing a single inline box
-  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
-  properties at their initial values except the 'white-space' property
-  of the inline element set to 'pre' and the 'font' property of the
-  inline element set to the current font of the context as given by
-  the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute, and
-  must then create a new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its
-  attributes set as described in the following list.
+v6DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt; method takes one
+  argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method is invoked, the user agent must run the
+  &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt;, passing it &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; and the
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object, and then using the returned inline box must create a
+  new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its attributes set as described in the following list.
 &lt;!--ADD-TOPIC:Security--&gt;
   If doing these measurements requires using a font that has an
   &lt;a href=#origin&gt;origin&lt;/a&gt; that is not the &lt;a href=#same-origin title=&quot;same
@@ -39667,7 +40193,7 @@
 
 
 
-  &lt;h6 id=drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing paths to the canvas&lt;/h6&gt;
+  &lt;h6 id=drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.2.13 &lt;/span&gt;Drawing paths to the canvas&lt;/h6&gt;
 
   &lt;p&gt;The context always has a &lt;dfn id=current-default-path&gt;current default path&lt;/dfn&gt;. There
   is only one &lt;a href=#current-default-path&gt;current default path&lt;/a&gt;, it is not part of the
@@ -39867,13 +40393,22 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Optionally, &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the
-    focus is at the location given by the intended path. User agents
-    may wait until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches
-    its &quot;update the rendering&quot; step to optionally inform the user.&lt;/p&gt;
+    &lt;p&gt;Optionally, run the appropriate step from the following list:&lt;/p&gt;
 
-   &lt;/li&gt;
+    &lt;dl&gt;&lt;dt&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;&lt;/dt&gt;
 
+     &lt;dd&gt;&lt;p&gt;&lt;a href=#inform&gt;Inform the user&lt;/a&gt; that the focus is at the location given by the
+     intended path. User agents may wait until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches its
+     &quot;update the rendering&quot; step to optionally inform the user.&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Add instructions to the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface
+     actions&lt;/a&gt; that &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the focus is at the location of
+     the bitmap given by the intended path.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
   &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-drawcustomfocusring title=dom-context-2d-drawCustomFocusRing&gt;&lt;code&gt;drawCustomFocusRing(&lt;var title=&quot;&quot;&gt;element&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must run
   the following steps:&lt;/p&gt;
 
@@ -39900,17 +40435,28 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Optionally, &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the
-    focus is at the location given by the intended path. User agents
-    may wait until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches
-    its &quot;update the rendering&quot; step to optionally inform the user.&lt;/p&gt;
+    &lt;p&gt;Optionally, run the appropriate step from the following list:&lt;/p&gt;
 
-   &lt;/li&gt;
+    &lt;dl&gt;&lt;dt&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;&lt;/dt&gt;
 
+     &lt;dd&gt;&lt;p&gt;&lt;a href=#inform&gt;Inform the user&lt;/a&gt; that the focus is at the location given by the
+     intended path. The user agent may wait until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches
+     its &quot;update the rendering&quot; step to optionally inform the user.&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Add instructions to the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface
+     actions&lt;/a&gt; that &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the focus is at the location of
+     the bitmap given by the intended path.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-scrollpathintoview title=dom-context-2d-scrollPathIntoView&gt;&lt;code&gt;scrollPathIntoView()&lt;/code&gt;&lt;/dfn&gt;
-  method, when invoked, must run the following steps:&lt;/p&gt;
+  method, when invoked, if the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; is &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt;, must run the following steps; and otherwise, must add
+  instructions to the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#list-of-pending-interface-actions&gt;list of pending interface actions&lt;/a&gt;
+  that run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;the specified rectangle&lt;/var&gt; be the
    rectangle of the bounding box of the intended path.&lt;/li&gt;
@@ -39922,11 +40468,11 @@
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#scroll-an-element-into-view title=&quot;scroll an element into view&quot;&gt;Scroll &lt;var title=&quot;&quot;&gt;notional child&lt;/var&gt; into view&lt;/a&gt; with the &lt;var title=&quot;&quot;&gt;align to top flag&lt;/var&gt; set.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Optionally, &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the
-   caret and/or selection cover &lt;var title=&quot;&quot;&gt;the specified
-   rectangle&lt;/var&gt; of the canvas. User agents may wait until the next
-   time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches its &quot;update the rendering&quot;
-   step to optionally inform the user.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Optionally, &lt;a href=#inform&gt;inform the user&lt;/a&gt; that the caret and/or selection cover
+   &lt;var title=&quot;&quot;&gt;the specified rectangle&lt;/var&gt; of the canvas. If the
+   &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#concept-canvas-context-bitmap-mode title=concept-canvas-context-bitmap-mode&gt;context bitmap mode&lt;/a&gt; was &lt;a href=#concept-canvas-fixed title=concept-canvas-fixed&gt;fixed&lt;/a&gt; when the method was invoked, the user agent may wait
+   until the next time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reaches its &quot;update the rendering&quot; step to
+   optionally inform the user.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p class=note id=inform&gt;&quot;Inform the user&quot;, as used in this
   section, could mean calling a system accessibility API, which would
@@ -40058,20 +40604,19 @@
 
 
 
-  &lt;h6 id=drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing images to the canvas&lt;/h6&gt;
+  &lt;h6 id=drawing-images&gt;&lt;span class=secno&gt;4.8.11.2.14 &lt;/span&gt;Drawing images&lt;/h6&gt;
 
-  &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
+  &lt;p&gt;To draw images, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
 
+  &lt;div class=impl&gt;
+
   &lt;p&gt;This method can be invoked with three different sets of arguments:&lt;/p&gt;
 
   &lt;ul class=brief&gt;&lt;li&gt;&lt;code title=&quot;&quot;&gt;drawImage(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;)&lt;/code&gt;
    &lt;li&gt;&lt;code title=&quot;&quot;&gt;drawImage(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;)&lt;/code&gt;
    &lt;li&gt;&lt;code title=&quot;&quot;&gt;drawImage(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;)&lt;/code&gt;
-  &lt;/ul&gt;&lt;!-- v3: drawImage() of an ImageData object might make sense (when resizing as well as filtering) - ack Charles Pritchard --&gt;&lt;p&gt;Each of those three can take either an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
-  an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; for the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument.&lt;/p&gt;
+  &lt;/ul&gt;&lt;/div&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;)&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;)&lt;/dt&gt;
@@ -40096,141 +40641,108 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;If not specified, the &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt; arguments must default to the values of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, interpreted such that
-  one CSS pixel in the image is treated as one unit in the canvas
-  coordinate space. If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, they must default to 0, 0,
-  the image's intrinsic width in image pixels, and the image's
-  intrinsic height in image pixels, respectively. If the image has no
-  intrinsic dimensions, the &lt;i&gt;concrete object size&lt;/i&gt; must be used
-  instead, as determined using the CSS &quot;&lt;a href=<A HREF="http://dev.w3.org/csswg/css3-images/#default-sizing">http://dev.w3.org/csswg/css3-images/#default-sizing</A>&gt;Concrete
-  Object Size Resolution&lt;/a&gt;&quot; algorithm, with the &lt;i&gt;specified
-  size&lt;/i&gt; having neither a definite width nor height, nor any
-  additional contraints, the object's intrinsic properties being those
-  of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument, and the &lt;i&gt;default object
-  size&lt;/i&gt; being the size of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. &lt;a href=#refsCSSIMAGES&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;When the &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method is invoked, the user
+  agent must run the following steps:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;!-- createPattern() has an
-  equivalent paragraph --&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#check-the-usability-of-the-image-argument&gt;Check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument&lt;/a&gt;. If this
+   returns &lt;i&gt;aborted&lt;/i&gt;, then an exception has been thrown and the method doesn't return anything;
+   abort these steps. If it returns &lt;i&gt;bad&lt;/i&gt;, then abort these steps without drawing anything.
+   Otherwise it returns &lt;i&gt;good&lt;/i&gt;; continue with these steps.&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
-  implementation must return without drawing anything.&lt;/p&gt; &lt;!--
-  createPattern() has an equivalent paragraph --&gt;
+   &lt;li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+    &lt;p&gt;Establish the source and destination rectangles as follows:&lt;/p&gt;
 
-  &lt;p&gt;The source rectangle is the rectangle whose corners are the four
-  points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+    &lt;p&gt;If not specified, the &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt; arguments must
+    default to the values of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, interpreted such
+    that one CSS pixel in the image is treated as one unit in the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s
+    coordinate space. If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
+    and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, they must default to 0, 0, the image's
+    intrinsic width in image pixels, and the image's intrinsic height in image pixels, respectively.
+    If the image has no intrinsic dimensions, the &lt;i&gt;concrete object size&lt;/i&gt; must be used instead,
+    as determined using the CSS &quot;&lt;a href=<A HREF="http://dev.w3.org/csswg/css3-images/#default-sizing">http://dev.w3.org/csswg/css3-images/#default-sizing</A>&gt;Concrete Object Size Resolution&lt;/a&gt;&quot;
+    algorithm, with the &lt;i&gt;specified size&lt;/i&gt; having neither a definite width nor height, nor any
+    additional contraints, the object's intrinsic properties being those of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument, and the &lt;i&gt;default object size&lt;/i&gt; being the size of the
+    &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;. &lt;a href=#refsCSSIMAGES&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
-  arguments is zero, the implementation must throw an
-  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+    &lt;p&gt;The source rectangle is the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;),
+    (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
 
-  &lt;p&gt;The destination rectangle is the rectangle whose corners are the
-  four points (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;),
-  (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+    &lt;p&gt;The destination rectangle is the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;),
+    (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
 
-  &lt;p&gt;When the source rectangle is outside the source image, it must be
-  clipped to the source image, and the destination rectangle must be
-  clipped in the same proportion.&lt;/p&gt;
+    &lt;p&gt;When the source rectangle is outside the source image, it must be clipped to the source
+    image, and the destination rectangle must be clipped in the same proportion.&lt;/p&gt;
 
-  &lt;p&gt;When &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; is
-  invoked, the region of the image specified by the source rectangle
-  must be painted on the region of the canvas specified by the
-  destination rectangle, after applying the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
-  matrix&lt;/a&gt; to the points of the destination rectangle.&lt;/p&gt;
+   &lt;/li&gt;
 
-  &lt;p&gt;The original image data of the source image must be used, not the
-  image as it is rendered (e.g. &lt;code title=attr-dim-width&gt;&lt;a href=#attr-dim-width&gt;width&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-dim-height&gt;&lt;a href=#attr-dim-height&gt;height&lt;/a&gt;&lt;/code&gt; attributes on the source
-  element have no effect). The image data must be processed in the
-  original direction, even if the dimensions given are negative. &lt;!--
-  remove that last sentence if it causes confusion. Someone once
-  suggested that 5,5,-2,-2 was different than 3,3,2,2; this is trying
-  to clarify that this is no the case. --&gt;&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, throw an
+   &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-  attribute is set to true, then the user agent should attempt to
-  apply a smoothing algorithm to the image data when it is scaled.
-  Otherwise, the image must be rendered using nearest-neighbor
-  interpolation.&lt;/p&gt;
+   &lt;li&gt;
 
-  &lt;p class=note&gt;This specification does not define the precise
-  algorithm to use when scaling an image when the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-  attribute is set to true.&lt;/p&gt;
+    &lt;p&gt;Paint the region of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument specified by the source rectangle
+    on the region of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; specified by the
+    destination rectangle, after applying the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+    transformation matrix&lt;/a&gt; to the points of the destination rectangle.&lt;/p&gt;
 
-  &lt;p class=note&gt;When a canvas is drawn onto itself, the &lt;a href=#drawing-model&gt;drawing
-  model&lt;/a&gt; requires the source to be copied before the image is drawn
-  back onto the canvas, so it is possible to copy parts of a canvas
-  onto overlapping parts of itself.&lt;/p&gt;
+    &lt;p&gt;The image data must be processed in the original direction, even if the dimensions given are
+    negative. &lt;!-- note: that last sentence has several times been needed to correct people who
+    suggested that 5,5,-2,-2 was different than 3,3,2,2 --&gt;&lt;/p&gt;
 
-  &lt;p&gt;If the original image data is a bitmap image, the value painted
-  at a point in the destination rectangle is computed by filtering the
-  original image data. The user agent may use any filtering algorithm
-  (for example bilinear interpolation or nearest-neighbor). When the
-  filtering algorithm requires a pixel value from outside the original
-  image data, it must instead use the value from the nearest edge
-  pixel. (That is, the filter uses 'clamp-to-edge' behavior.)&lt;/p&gt;
-  &lt;!-- see CORE-32111 and:
-       <A HREF="http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737">http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737</A>
-       <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11">http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11</A>
-  --&gt;
-  &lt;!-- createPattern() has a similar paragraph with different rules --&gt;
+    &lt;p&gt;If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
+    attribute is set to true, then the user agent should attempt to apply a smoothing algorithm to
+    the image data when it is scaled. Otherwise, the image must be rendered using nearest-neighbor
+    interpolation.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+    &lt;p class=note&gt;This specification does not define the precise algorithm to use when scaling an
+    image when the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
+    attribute is set to true.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then the frame at the &lt;a href=#current-playback-position&gt;current
-  playback position&lt;/a&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and
-  &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt;
-  of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+    &lt;p class=note&gt;When a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object is
+    drawn onto itself, the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt; requires the source to be copied before the
+    image is drawn, so it is possible to copy parts of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; or &lt;a href=#scratch-bitmap&gt;scratch
+    bitmap&lt;/a&gt; onto overlapping parts of itself.&lt;/p&gt;
 
-  &lt;p&gt;Images are painted without affecting the current path, and are
-  subject to &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, the
-  &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
-  operators&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;If the original image data is a bitmap image, the value painted at a point in the destination
+    rectangle is computed by filtering the original image data. The user agent may use any filtering
+    algorithm (for example bilinear interpolation or nearest-neighbor). When the filtering algorithm
+    requires a pixel value from outside the original image data, it must instead use the value from
+    the nearest edge pixel. (That is, the filter uses 'clamp-to-edge' behavior.)&lt;/p&gt;
+    &lt;!-- see CORE-32111 and:
+         <A HREF="http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737">http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737</A>
+         <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11">http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11</A>
+    --&gt;
+    &lt;!-- createPattern() has a similar paragraph with different rules --&gt;
 
-  &lt;/div&gt;
+    &lt;p&gt;Images are painted without affecting the current path, and are subject to &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global
+    alpha&lt;/a&gt;, the &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition operators&lt;/a&gt;.&lt;/p&gt;
 
+   &lt;/li&gt;
 
-  &lt;h6 id=hit-regions&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Hit regions&lt;/h6&gt;
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#the-image-argument-is-not-origin-clean&gt;the &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/a&gt;, set the
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag
+   to false.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
 
-  &lt;p&gt;Each &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element whose &lt;a href=#primary-context&gt;primary
-  context&lt;/a&gt; is a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object
-  must have a &lt;dfn id=hit-region-list&gt;hit region list&lt;/dfn&gt; associated with its
+  &lt;/ol&gt;&lt;/div&gt;
+
+
+  &lt;h6 id=hit-regions&gt;&lt;span class=secno&gt;4.8.11.2.15 &lt;/span&gt;Hit regions&lt;/h6&gt;
+
+  &lt;p&gt;A &lt;dfn id=hit-region-list&gt;hit region list&lt;/dfn&gt; is a list of &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit regions&lt;/a&gt; for a
   bitmap.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; is a list of &lt;a href=#hit-region title=&quot;hit
-  region&quot;&gt;hit regions&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;dfn id=hit-region&gt;hit region&lt;/dfn&gt; consists of the following information:&lt;/p&gt;
 
-  &lt;p&gt;Each &lt;dfn id=hit-region&gt;hit region&lt;/dfn&gt; consists of the following
-  information:&lt;/p&gt;
+  &lt;ul&gt;&lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/dfn&gt; on the bitmap for which this
+   region is responsible.&lt;/li&gt;
 
-  &lt;ul&gt;&lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of
-   pixels&lt;/dfn&gt; on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap for which
-   this region is responsible.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-bounding-circumference&quot; title=&quot;hit region's bounding circumference&quot;&gt;bounding circumference&lt;/dfn&gt; on the
+   bitmap that surrounds the &lt;a href=&quot;#hit-region's-set-of-pixels&quot;&gt;hit region's set of pixels&lt;/a&gt; as they stood when it was
+   created.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-bounding-circumference&quot; title=&quot;hit region's bounding circumference&quot;&gt;bounding
-   circumference&lt;/dfn&gt; on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap
-   that surrounds the &lt;a href=&quot;#hit-region's-set-of-pixels&quot;&gt;hit region's set of pixels&lt;/a&gt; as they
-   stood when it was created.&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Optionally, a non-empty string representing an &lt;dfn id=&quot;hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/dfn&gt; for distinguishing the region
    from others.&lt;/li&gt;
 
@@ -40254,11 +40766,11 @@
     control&quot;&gt;control&lt;/a&gt;, or an &lt;a href=&quot;#hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked
     region description&quot;&gt;unbacked region description&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;A &lt;dfn id=&quot;hit-region's-control&quot; title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a
-    reference to an &lt;code&gt;&lt;a href=#element&gt;Element&lt;/a&gt;&lt;/code&gt; node, to which, in certain
-    conditions, the user agent will route events, and from which the
-    user agent will determine the state of the hit region for the
-    purposes of accessibility tools.&lt;/p&gt;
+    &lt;p&gt;A &lt;dfn id=&quot;hit-region's-control&quot; title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a reference to an
+    &lt;code&gt;&lt;a href=#element&gt;Element&lt;/a&gt;&lt;/code&gt; node, to which, in certain conditions, the user agent will route events,
+    and from which the user agent will determine the state of the hit region for the purposes of
+    accessibility tools. (The control is ignored when it is not a descendant of the
+    &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.)&lt;/p&gt;
 
     &lt;p&gt;An &lt;dfn id=&quot;hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked region
     description&quot;&gt;unbacked region description&lt;/dfn&gt; consists of the
@@ -40278,8 +40790,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Adds a hit region to the canvas bitmap. The argument is an
-    object with the following members:&lt;/p&gt;
+    &lt;p&gt;Adds a hit region to the bitmap. The argument is an object with the following members:&lt;/p&gt;
 
     &lt;dl&gt;&lt;dt&gt;&lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; (default null)
 
@@ -40337,14 +40848,14 @@
      ID in the mouse events.&lt;/li&gt;
 
      &lt;li&gt;With a control, they can make routing events to DOM elements
-     automatic, allowing e.g. clicks on a canvas to automatically
+     automatic, allowing e.g. clicks on a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; to automatically
      submit a form via a &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
 
      &lt;li&gt;With a label, they can make it easier for users to explore a
-     canvas without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
+     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
 
      &lt;li&gt;With a cursor, they can make it easier for different regions
-     of the canvas to have different cursors, with the user agent
+     of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; to have different cursors, with the user agent
      automatically switching between them.&lt;/li&gt;
 
     &lt;/ul&gt;&lt;/dd&gt;
@@ -40373,16 +40884,14 @@
   &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for which &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
   &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;&lt;dfn id=the-region-identified-by-the-id&gt;The region identified by the ID&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; in a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
-  algorithm (which can return a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or
-  nothing):&lt;/p&gt;
+  &lt;p&gt;&lt;dfn id=the-region-identified-by-the-id&gt;The region identified by the ID&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; in a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
+  &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or nothing):&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; is null, return nothing and abort
    these steps.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
+   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/a&gt;
    is a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt;,
@@ -40391,17 +40900,12 @@
 
    &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-representing-the-control&gt;The region representing the control&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; for a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
-  algorithm (which can return a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or
-  nothing):&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-representing-the-control&gt;The region representing the control&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; for a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
+  &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or nothing):&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
-   steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
    control&quot;&gt;control&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then
    return that &lt;a href=#hit-region&gt;hit region&lt;/a&gt; and abort these
@@ -40436,17 +40940,13 @@
    region's parent&quot;&gt;parent&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be that &lt;a href=&quot;#hit-region's-parent&quot;&gt;hit region's parent&lt;/a&gt;,
    and return to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property
-   for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. &lt;a href=#refsCSSUI&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element, if any; if there isn't one, return 'auto'. &lt;a href=#refsCSSUI&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-for-a-pixel&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the
-  value returned by the following algorithm (which can return a
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-for-a-pixel&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
   &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or nothing):&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of
    pixels&quot;&gt;set of pixels&lt;/a&gt; contains &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt;,
@@ -40455,26 +40955,20 @@
 
    &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=clear-regions-that-cover-the-pixels&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user agent must run the following
-  steps:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=clear-regions-that-cover-the-pixels&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;, the user agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Remove all pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; from the
    &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/a&gt; of
    each &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#garbage-collect-the-regions&gt;Garbage-collect the regions&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#garbage-collect-the-regions&gt;Garbage-collect the regions&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=garbage-collect-the-regions&gt;garbage-collect the regions&lt;/dfn&gt; of a
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user
+  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=garbage-collect-the-regions&gt;garbage-collect the regions&lt;/dfn&gt; of a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;, the user
   agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; be the first
    &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; to have an
@@ -40491,10 +40985,10 @@
 
    &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p class=note&gt;Adding a new region and calling &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt; are the two ways
-  this clearing algorithm can be invoked. Resizing the canvas also
-  clears the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; (since it clears the canvas
-  back to its initial state).&lt;/p&gt;
+  &lt;/ol&gt;&lt;p class=note&gt;Adding a new region and calling &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt; are the two ways this clearing algorithm can
+  be invoked. The &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; itself is also reset when the rendering context is
+  reset, e.g. when a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object is bound to or unbound from a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;, or when the dimensions of the bitmap are changed.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;When the &lt;dfn id=dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;&lt;code&gt;addHitRegion()&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the user agent must run the following steps:&lt;/p&gt;
@@ -40529,7 +41023,7 @@
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is not null, then
    let &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the
    region identified by the ID&lt;/a&gt; given by the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member's value in this
-   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is null or no such
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, if any. If the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is null or no such
    region currently exists, let &lt;var title=&quot;&quot;&gt;previous region for this
    ID&lt;/var&gt; be null.&lt;/li&gt;
 
@@ -40539,7 +41033,7 @@
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is not
    null, then let &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the
    region identified by the ID&lt;/a&gt; given by the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member's value in
-   this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is null or
+   the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, if any. If the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is null or
    no such region currently exists, let &lt;var title=&quot;&quot;&gt;parent
    region&lt;/var&gt; be null.&lt;/li&gt;
 
@@ -40703,7 +41197,7 @@
    null, then let &lt;var title=&quot;&quot;&gt;previous region for the control&lt;/var&gt;
    be &lt;a href=#the-region-representing-the-control&gt;the region representing the control&lt;/a&gt; given by the
    &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member's
-   value for this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is null
+   value for this &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, if any. If the &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is null
    or no such region currently exists, let &lt;var title=&quot;&quot;&gt;previous
    region for the control&lt;/var&gt; be null.&lt;/li&gt;
 
@@ -40716,50 +41210,40 @@
    its descendants, as we know that our parent isn't part of that
    subtree. --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
-   control&lt;/var&gt;, remove it from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's
-   &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
-   region's parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit
-   region's child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage
-   collect the regions below --&gt;
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this control&lt;/var&gt;, remove it from the
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by
+   one.&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
-   ID&lt;/var&gt;, remove it, and all &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit
-   regions&lt;/a&gt; for which it is an &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;,
-   from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit region
-   list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
-   parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's
-   child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage collect the
-   regions below --&gt;
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this ID&lt;/var&gt;, remove it, and all &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit regions&lt;/a&gt; for which it is an &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;, from the
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by
+   one.&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;, increment
    its &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by one.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of
-   pixels&quot;&gt;set of pixels&lt;/a&gt; on this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-   element.&lt;/li&gt; &lt;!-- this is what garbage collects the earlier
-   regions --&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/a&gt; on this &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt;.&lt;/li&gt; &lt;!-- this is what garbage collects the earlier regions --&gt;
 
-   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-   element's &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s element's &lt;a href=#hit-region-list&gt;hit
+   region list&lt;/a&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;When the &lt;dfn id=dom-context-2d-removehitregion title=dom-context-2d-removeHitRegion&gt;&lt;code&gt;removeHitRegion()&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the user agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the region
-   identified by the ID&lt;/a&gt; given by the method's argument in this
-   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If no such region currently
-   exists, abort these steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the region identified by the ID&lt;/a&gt; given by
+   the method's argument in the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;. If no such region
+   currently exists, abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, and all &lt;a href=#hit-region title=&quot;hit
-   region&quot;&gt;hit regions&lt;/a&gt; for which it is an &lt;a href=#ancestor-region&gt;ancestor
-   region&lt;/a&gt;, from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit
-   region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
-   parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's
-   child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage collect the
-   regions below --&gt;
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, and all &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit regions&lt;/a&gt; for
+   which it is an &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;, from the rendering context's &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt;'s &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+   parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by
+   one.&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#garbage-collect-the-regions&gt;Garbage-collect the regions&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#garbage-collect-the-regions&gt;Garbage-collect the regions&lt;/a&gt; of the rendering context's &lt;a href=#scratch-bitmap&gt;scratch
+   bitmap&lt;/a&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;/div&gt;
 
@@ -40793,11 +41277,10 @@
   ID&lt;/a&gt; if the mouse was over a hit region when the event was
   fired.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; is to be fired at a
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element by the user agent in response to a
-  pointing device action, the user agent must instead follow these
-  steps. If these steps say to &lt;i&gt;act as normal&lt;/i&gt;, that means that
-  the event must be fired as it would have had these requirements not
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; is to be fired at a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element by the user
+  agent in response to a pointing device action, if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element has a &lt;a href=#hit-region-list&gt;hit
+  region list&lt;/a&gt;, the user agent must instead follow these steps. If these steps say to &lt;i&gt;act
+  as normal&lt;/i&gt;, that means that the event must be fired as it would have had these requirements not
   been applied.&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the pointing device is not indicating a pixel on the
@@ -40809,7 +41292,7 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be the &lt;a href=#hit-region&gt;hit
    region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the
    region for the pixel&lt;/a&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on this
-   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any.&lt;/li&gt;
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap, if any.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, then act as
    normal and abort these steps.&lt;/li&gt;
@@ -40821,8 +41304,9 @@
    event object's &lt;code title=dom-MouseEvent-region&gt;&lt;a href=#dom-mouseevent-region&gt;region&lt;/a&gt;&lt;/code&gt;
    attribute to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
-   control&quot;&gt;control&lt;/a&gt;, if any.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;a href=#the-control-represented-by-a-region title=&quot;the control represented by a
+   region&quot;&gt;control represented by&lt;/a&gt; &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; for this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element, if any.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then target the
    event object at &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; instead of the
@@ -40831,12 +41315,10 @@
    &lt;li&gt;&lt;p&gt;Continue dispatching the event, but with the updated event
    object and target as given in the above steps.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user's pointing device cursor is positioned over a
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, user agents should render the pointing
-  device cursor according to the cursor specification described by
-  &lt;a href=#the-cursor-for-a-hit-region title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit
-  region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the
-  region for the pixel&lt;/a&gt; that the pointing device designates.&lt;/p&gt;
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user's pointing device cursor is positioned over a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, user
+  agents should render the pointing device cursor according to the cursor specification described by
+  &lt;a href=#the-cursor-for-a-hit-region title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the region for the pixel&lt;/a&gt; that the pointing device designates
+  on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;User agents are encouraged to make use of the information present
   in a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; to
@@ -40853,26 +41335,23 @@
   region's bounding circumference&lt;/a&gt; gives the region of the
   screen to use when representing the node (if appropriate).&lt;/p&gt;
 
-  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of
-  this virtual DOM tree are those of the &lt;a href=&quot;#hit-region's-control&quot;&gt;hit region's
-  control&lt;/a&gt;, if it has one, or else of a non-interactive element
-  whose ARIA role, if any, is that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's
-  ARIA role&lt;/a&gt;, and whose textual representation, if any, is given
-  by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of this virtual DOM tree are those
+  of the &lt;a href=#the-control-represented-by-a-region title=&quot;the control represented by a region&quot;&gt;the control represented by the
+  region&lt;/a&gt;, if it has one, or else of a non-interactive element whose ARIA role, if any, is
+  that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's ARIA role&lt;/a&gt;, and whose textual representation, if any,
+  is given by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element
-  and there is &lt;a href=#the-region-representing-the-control title=&quot;the region representing the control&quot;&gt;a
-  region representing the control&lt;/a&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, then the element's position relative to
-  the document should be presented as if it was that region in the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
+  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant
+  of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element and there is &lt;a href=#the-region-representing-the-control title=&quot;the region representing the control&quot;&gt;a
+  region representing the control&lt;/a&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+  element's bitmap, then the element's position relative to the document should be presented as if
+  it was that region in the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
 
-  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of
-  this virtual DOM tree are those of the &lt;a href=&quot;#hit-region's-control&quot;&gt;hit region's
-  control&lt;/a&gt;, if it has one, or else of a non-interactive element
-  whose ARIA role, if any, is that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's
-  ARIA role&lt;/a&gt;, and whose textual representation, if any, is given
-  by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of this virtual DOM tree are those
+  of the &lt;a href=#the-control-represented-by-a-region title=&quot;the control represented by a region&quot;&gt;the control represented by the
+  region&lt;/a&gt;, if it has one, or else of a non-interactive element whose ARIA role, if any, is
+  that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's ARIA role&lt;/a&gt;, and whose textual representation, if any,
+  is given by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p class=note&gt;Thus, for instance, a user agent on a touch-screen
   device could provide haptic feedback when the user croses over a
@@ -40890,7 +41369,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.2.16 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
@@ -40928,8 +41407,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object containing the image
-    data for the given rectangle of the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object containing the image data for the given rectangle of
+    the bitmap.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the either
     of the width or height arguments are zero.&lt;/p&gt;
@@ -40943,8 +41422,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object containing the image
-    data for the given rectangle of the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object containing the image data for the given rectangle of
+    the bitmap.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the either
     of the width or height arguments are zero.&lt;/p&gt;
@@ -40980,9 +41459,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the data from the given &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object
-    onto the canvas. If a dirty rectangle is provided, only the pixels
-    from that rectangle are painted.&lt;/p&gt;
+    &lt;p&gt;Paints the data from the given &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object onto the bitmap. If a dirty
+    rectangle is provided, only the pixels from that rectangle are painted.&lt;/p&gt;
 
     &lt;p&gt;The &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;
     and &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
@@ -40994,8 +41472,7 @@
     &lt;p&gt;Throws a &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception if any of the
     arguments are not finite.&lt;/p&gt;
 
-    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space
-    unit on the canvas.&lt;/p&gt;
+    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space unit on the bitmap.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -41003,10 +41480,9 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the data from the given &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object
-    onto the canvas, at the canvas bitmap's native resolution. If a
-    dirty rectangle is provided, only the pixels from that rectangle
-    are painted.&lt;/p&gt;
+    &lt;p&gt;Paints the data from the given &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object onto the bitmap, at the bitmap's
+    native pixel density. If a dirty rectangle is provided, only the pixels from that rectangle are
+    painted.&lt;/p&gt;
 
     &lt;p&gt;The &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;
     and &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
@@ -41039,49 +41515,42 @@
   with transparent black.&lt;/p&gt;
 
   &lt;p&gt;When the &lt;dfn id=dom-context-2d-createimagedatahd title=dom-context-2d-createImageDataHD&gt;&lt;code&gt;createImageDataHD()&lt;/code&gt;&lt;/dfn&gt;
-  method is invoked (with its two arguments &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;) it must return a new &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
-  object representing a rectangle with a width in equal to the
-  absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; and a height equal to the absolute magnitude of
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt;,
-  where &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; is the number of pixels in the
-  canvas bitmap per coordinate space units. The &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
-  object returned must be filled with transparent black.&lt;/p&gt;
+  method is invoked (with its two arguments &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;) it
+  must return a new &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing a rectangle with a width in equal to
+  the absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; and a
+  height equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt;, where &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; is the number of pixels in the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt; per coordinate space units. The &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object returned must be
+  filled with transparent black.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;&lt;code&gt;getImageData(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception; otherwise,
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;&lt;code&gt;getImageData(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if
+  either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero, throw an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception; otherwise,
   &lt;!--ADD-TOPIC:Security--&gt;
-  if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
-  to false, it must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception;
+  if the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt;
+  flag is set to false, it must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception;
   &lt;!--REMOVE-TOPIC:Security--&gt;
-  otherwise, it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with
-  width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
-  representing the canvas bitmap for the area of the canvas denoted by
-  the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in
-  canvas coordinate space units. If the canvas bitmap does not
-  represent each coordinate space unit square using exactly one pixel,
-  the value of each pixel in the returned abject must be derived from
-  the value(s) of the pixel(s) in the canvas bitmap that correspond to
-  the same coordinate. Pixels outside the canvas must be returned as
-  transparent black. Pixels must be returned as non-premultiplied
+  otherwise, it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and
+  height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; representing the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; for the area of that
+  bitmap denoted by the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in the bitmap's coordinate space
+  units. If the bitmap does not represent each coordinate space unit square using exactly one pixel,
+  the value of each pixel in the returned abject must be derived from the value(s) of the pixel(s)
+  in the bitmap that correspond to the same coordinate. Pixels outside the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt; must be returned as transparent black. Pixels must be returned as non-premultiplied
   alpha values.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedatahd title=dom-context-2d-getImageDataHD&gt;&lt;code&gt;getImageDataHD(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception; otherwise,
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedatahd title=dom-context-2d-getImageDataHD&gt;&lt;code&gt;getImageDataHD(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must,
+  if either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero, throw an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception; otherwise,
   &lt;!--ADD-TOPIC:Security--&gt;
-  if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
-  to false, it must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception;
+  if the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt;
+  flag is set to false, it must throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception;
   &lt;!--REMOVE-TOPIC:Security--&gt;
-  otherwise, it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with
-  width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt;
-  and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; representing the canvas bitmap data for the
-  area of the canvas denoted by the rectangle whose corners are the
-  four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in
-  canvas coordinate space units. Pixels outside the canvas must be
-  returned as transparent black. Pixels must be returned as
-  non-premultiplied alpha values.&lt;/p&gt;
+  otherwise, it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;
+  multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; representing the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; for the area of that bitmap
+  denoted by the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in the bitmap's coordinate space
+  units. Pixels outside the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; must be returned as transparent black.
+  Pixels must be returned as non-premultiplied alpha values.&lt;/p&gt;
 
   &lt;p&gt;New &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; objects must be initialized so that
   their &lt;dfn id=dom-imagedata-width title=dom-imagedata-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;
@@ -41107,10 +41576,9 @@
   consecutive indices starting with 0 for the top left pixel's red
   component. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn id=dom-context-2d-putimagedatahd title=dom-context-2d-putImageDataHD&gt;&lt;code&gt;putImageDataHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods write data from &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; structures back to
-  the canvas. Their arguments are: &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-context-2d-putimagedatahd title=dom-context-2d-putImageDataHD&gt;&lt;code&gt;putImageDataHD()&lt;/code&gt;&lt;/dfn&gt; methods write data from
+  &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; structures back to the rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.
+  Their arguments are: &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;.&lt;/p&gt;
 
   &lt;p&gt;When the last four arguments to these methods are omitted, they
   must be assumed to have the values 0, 0, the &lt;code title=dom-imagedata-width&gt;&lt;a href=#dom-imagedata-width&gt;width&lt;/a&gt;&lt;/code&gt; member of the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; structure, and the &lt;code title=dom-imagedata-height&gt;&lt;a href=#dom-imagedata-height&gt;height&lt;/a&gt;&lt;/code&gt; member of the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; structure, respectively.&lt;/p&gt;
@@ -41151,7 +41619,7 @@
 
     &lt;p&gt;If, after those changes, either &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;
     or &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt; is negative or zero, stop these
-    steps without affecting the canvas.&lt;/p&gt;
+    steps without affecting any bitmaps.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -41163,17 +41631,16 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Draw the region of the image data in the horizontal rectangle
-      whose top left corner is at (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at
-      (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;)
-      onto the canvas, aligned such that the top left of the rectangle
-      is at coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
+      &lt;p&gt;Draw the region of the image data in the horizontal rectangle whose top left corner is at
+      (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at
+      (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;) onto the rendering
+      context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, aligned such that the top left of the rectangle is at
+      coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
 
       &lt;p&gt;If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
-      attribute is set to true, then the user agent should attempt to
-      apply a smoothing algorithm to the image data if the canvas does
-      not have exactly one device pixel per coordinate space unit in
-      the canvas bitmap.&lt;/p&gt;
+      attribute is set to true, then the user agent should attempt to apply a smoothing algorithm to
+      the image data if the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; does not have exactly one device pixel per
+      coordinate space unit.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -41183,21 +41650,20 @@
 
       &lt;ol&gt;&lt;li&gt;
 
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
-        of the device pixel in the canvas bitmap corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the canvas coordinate space.&lt;/p&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate of the device pixel in
+        the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in
+        the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s coordinate space.&lt;/p&gt;
 
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
-        of the device pixel in the canvas bitmap corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the canvas coordinate space.&lt;/p&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate of the device pixel in
+        the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in
+        the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;'s coordinate space.&lt;/p&gt;
 
        &lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;For all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;
-       and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;
-       and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the four channels of
-       the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) in the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data
-       structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;,
-       &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the canvas bitmap of the
-       canvas.&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;For all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the
+       four channels of the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) in
+       the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the
+       rendering context's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.&lt;/li&gt;
 
       &lt;/ol&gt;&lt;/dd&gt;
 
@@ -41337,7 +41803,7 @@
 
 
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Compositing&lt;/h6&gt;
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.2.17 &lt;/span&gt;Compositing&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
@@ -41370,24 +41836,21 @@
   &lt;!-- conformance criteria for painting are described in the &quot;drawing
   model&quot; section below --&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives an alpha value that is applied to shapes and images
-  before they are composited onto the canvas. The value must be in the
-  range from 0.0 (fully transparent) to 1.0 (no additional
-  transparency). If an attempt is made to set the attribute to a value
-  outside this range, including Infinity and Not-a-Number (NaN)
-  values, the attribute must retain its previous value. When the
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt; attribute gives an
+  alpha value that is applied to shapes and images before they are composited onto the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt;. The value must be in the range from 0.0 (fully transparent) to 1.0 (no additional
+  transparency). If an attempt is made to set the attribute to a value outside this range, including
+  Infinity and Not-a-Number (NaN) values, the attribute must retain its previous value. When the
   context is created, the &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value 1.0.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets how shapes and images are drawn onto the existing
-  bitmap, once they have had &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and the
-  current transformation matrix applied. It must be set to a value
-  from the following list. In the descriptions below, the source
-  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
-  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
-  state of the bitmap.&lt;/p&gt;
+  attribute sets how shapes and images are drawn onto the &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;, once they
+  have had &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and the current
+  transformation matrix applied. It must be set to a value from the following list. In the
+  descriptions below, the source image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
+  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current state of the &lt;a href=#scratch-bitmap&gt;scratch
+  bitmap&lt;/a&gt;.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -41498,7 +41961,7 @@
 
 
 
-  &lt;h6 id=image-smoothing&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Image smoothing&lt;/h6&gt;
+  &lt;h6 id=image-smoothing&gt;&lt;span class=secno&gt;4.8.11.2.18 &lt;/span&gt;Image smoothing&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
@@ -41524,7 +41987,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.2.19 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;All drawing operations are affected by the four global shadow
   attributes.&lt;/p&gt;
@@ -41665,7 +42128,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.19 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.2.20 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -41683,21 +42146,22 @@
    &lt;li&gt;&lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, multiply the alpha
    component of every pixel in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; by &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, composite &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; within the &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; over the
-   current canvas bitmap using the current composition
-   operator.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, composite &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; within the
+   &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; over the current &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; using the current
+   composition operator.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Multiply the alpha component of every pixel in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; by &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Composite &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; within the &lt;a href=#clipping-region&gt;clipping
-   region&lt;/a&gt; over the current canvas bitmap using the current
-   composition operator.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Composite &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; within the &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; over the current
+   &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; using the current composition operator.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.20 &lt;/span&gt;Best practices&lt;/h6&gt;
 
+
+  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.2.21 &lt;/span&gt;Best practices&lt;/h6&gt;
+
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;When a canvas is interactive, authors should include focusable
@@ -41758,7 +42222,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.21 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.2.22 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -41811,16 +42275,54 @@
 
   
 
-  &lt;/div&gt;&lt;!--data-component--&gt;
 
+  &lt;h5 id=pixel-density&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Pixel density&lt;/h5&gt;
 
+  &lt;p&gt;The user agent may use any square pixel density for the bitmaps of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; and
+  its rendering contexts. Once a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; has a bitmap, that canvas must keep its
+  resolution for its lifetime.&lt;/p&gt;
+
+  &lt;p class=note&gt;In general, user agents are encouraged to use a pixel density equal to the screen
+  pixel density. Ideally, the number of device pixels per CSS pixel would be a multiple of two.
+  Several factors can affect the screen pixel density: most prominently the actual display pixel
+  density, but also important is the current zoom level.&lt;/p&gt;
+
+  &lt;p&gt;All the bitmaps created during a single &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; for
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements and &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects must have the same
+  pixel density.
+  &lt;a class=fingerprint href=#fingerprint&gt;&lt;img alt=&quot;(This is a fingerprinting vector.)&quot; src=<A HREF="http://images.whatwg.org/fingerprint.png">http://images.whatwg.org/fingerprint.png</A>&gt;&lt;/a&gt;
+  &lt;/p&gt;
+
+  &lt;pre class=idl&gt;partial interface &lt;a href=#screen&gt;Screen&lt;/a&gt; {
+  readonly attribute double &lt;a href=#dom-screen-canvasresolution title=dom-screen-canvasResolution&gt;canvasResolution&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;window&lt;/var&gt; . &lt;code title=dom-Window-screen&gt;screen&lt;/code&gt; . &lt;code title=dom-screen-canvasResolution&gt;&lt;a href=#dom-screen-canvasresolution&gt;canvasResolution&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the pixel density that has been, or will be, used for bitmaps during this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-screen-canvasresolution title=dom-screen-canvasResolution&gt;&lt;code&gt;canvasResolution&lt;/code&gt;&lt;/dfn&gt; attribute of
+  the &lt;code&gt;&lt;a href=#screen&gt;Screen&lt;/a&gt;&lt;/code&gt; object must return the pixel density, in image pixels per coordinate space
+  units, that any &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; bitmaps created
+  during this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; will use (or have used). &lt;a href=#refsCSSOMVIEW&gt;[CSSOMVIEW]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
   &lt;div class=impl&gt;
 
-  &lt;h5 id=color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/h5&gt;
+  &lt;h5 id=color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.4 &lt;/span&gt;Color spaces and color correction&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; APIs must perform color correction at only two points: when rendering
-  images with their own gamma correction and color space information onto the canvas, to convert the
-  image to the color space used by the canvas (e.g. using the 2D Context's &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method with an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;
+  images with their own gamma correction and color space information onto a bitmap, to convert the
+  image to the color space used by the bitmaps (e.g. using the 2D Context's &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method with an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;
   object), and when rendering the actual canvas bitmap to the output device.&lt;/p&gt;
 
   &lt;p class=note&gt;Thus, in the 2D context, colors used to draw shapes onto the canvas will exactly
@@ -41848,76 +42350,94 @@
   &lt;/div&gt;
 
 
-&lt;!--ADD-TOPIC:Security--&gt;
+
+  &lt;h5 id=serializing-bitmaps-to-a-file&gt;&lt;span class=secno&gt;4.8.11.5 &lt;/span&gt;Serializing bitmaps to a file&lt;/h5&gt;
+
   &lt;div class=impl&gt;
 
-  &lt;h5 id=security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements&lt;/h5&gt;
+  &lt;p&gt;When a user agent is to create &lt;dfn id=a-serialization-of-the-bitmap-as-a-file&gt;a serialization of the bitmap as a file&lt;/dfn&gt;, optionally
+  with some given &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and optionally with a &lt;var title=&quot;&quot;&gt;native&lt;/var&gt;
+  flag set, it must create an image file in the format given by the first value of &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, or, if there are no &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, in the PNG format. &lt;a href=#refsPNG&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;&lt;strong&gt;Information leakage&lt;/strong&gt; can occur if scripts from
-  one &lt;a href=#origin&gt;origin&lt;/a&gt; can access information (e.g. read pixels)
-  from images from another origin (one that isn't the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt;).&lt;/p&gt;
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag is set, or if the bitmap has one pixel per coordinate
+  space unit, then the image file must have the same pixel data (before compression, if applicable)
+  as the bitmap, and if the file format used supports encoding resolution metadata, the resolution
+  of that bitmap (device pixels per coordinate space units being interpreted as image pixels per CSS
+  pixel) must be given as well.&lt;/p&gt;
 
-  &lt;p&gt;To mitigate this, &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements are defined to
-  have a flag indicating whether they are &lt;i&gt;origin-clean&lt;/i&gt;. All
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements must start with their
-  &lt;i&gt;origin-clean&lt;/i&gt; set to true. The flag must be set to false if
-  any of the following actions occur:&lt;/p&gt;
+  &lt;p&gt;Otherwise, the image file's pixel data must be the bitmap's pixel data scaled to one image
+  pixel per coordinate space unit, and if the file format used supports encoding resolution
+  metadata, the resolution must be given as 96dpi (one image pixel per CSS pixel).&lt;/p&gt;
 
-  &lt;ul&gt;&lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method is
-   called with an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or an
-   &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#origin&gt;origin&lt;/a&gt; is not the
-   &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as that of the
-   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-   element.&lt;/li&gt;
+  &lt;p&gt;If &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; is not empty, the first value must be interpreted as a &lt;a href=#mime-type title=&quot;MIME type&quot;&gt;MIME type&lt;/a&gt; giving the format to use. If the type has any parameters, it
+  must be treated as not supported.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-drawImage&gt;&lt;a href=#dom-context-2d-drawimage&gt;drawImage()&lt;/a&gt;&lt;/code&gt; method is
-   called with an &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; whose
-   &lt;i&gt;origin-clean&lt;/i&gt; flag is false.&lt;/li&gt;
+  &lt;p class=example&gt;For example, the value &quot;&lt;code&gt;image/png&lt;/code&gt;&quot; would mean to generate a PNG
+  image, the value &quot;&lt;code&gt;image/jpeg&lt;/code&gt;&quot; would mean to generate a JPEG image, and the value
+  &quot;&lt;code&gt;image/svg+xml&lt;/code&gt;&quot; would mean to generate an SVG image (which would require that the
+  user agent track how the bitmap was generated, an unlikely, though potentially awesome,
+  feature).&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; attribute is set
-   to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that was created from an
-   &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-   whose &lt;a href=#origin&gt;origin&lt;/a&gt; was not the &lt;a href=#same-origin title=&quot;same
-   origin&quot;&gt;same&lt;/a&gt; as that of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object
-   that owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element when the pattern was
-   created.&lt;/li&gt;
+  &lt;p&gt;User agents must support PNG (&quot;&lt;code&gt;image/png&lt;/code&gt;&quot;). User agents may support other types.
+  If the user agent does not support the requested type, it must create the file using the PNG
+  format. &lt;a href=#refsPNG&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; attribute is set
-   to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that was created from an
-   &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; whose &lt;i&gt;origin-clean&lt;/i&gt; flag was
-   false when the pattern was created.&lt;/li&gt;
+  &lt;p&gt;User agents must &lt;a href=#converted-to-ascii-lowercase title=&quot;converted to ASCII lowercase&quot;&gt;convert the provided type to ASCII
+  lowercase&lt;/a&gt; before establishing if they support that type.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; attribute is
-   set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that was created from an
-   &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-   whose &lt;a href=#origin&gt;origin&lt;/a&gt; was not the &lt;a href=#same-origin title=&quot;same
-   origin&quot;&gt;same&lt;/a&gt; as that of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object
-   that owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element when the pattern was
-   created.&lt;/li&gt;
+  &lt;p&gt;For image types that do not support an alpha channel, the serialized image must be the bitmap
+  image composited onto a solid black background using the source-over operator.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; attribute is
-   set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that was created from an
-   &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; whose &lt;i&gt;origin-clean&lt;/i&gt; flag was
-   false when the pattern was created.&lt;/li&gt;
+  &lt;p&gt;If the first argument in &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; gives a type corresponding to one of the
+  types given in the first column of the following table, and the user agent supports that type,
+  then the subsequent arguments, if any, must be treated as described in the second cell of that
+  row.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; methods are
-   invoked and consider using a font that has an &lt;a href=#origin&gt;origin&lt;/a&gt;
-   that is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as that of
-   the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-   element. (The font doesn't even have to be used; all that matters
-   is whether the font was considered for any of the glyphs
-   drawn.)&lt;/li&gt; &lt;!-- because fonts could consider sensitive
-   material, I guess; and because that sensitivity could extend to
-   whether or not a particular glyph is in the font in the first
-   place. --&gt;
+  &lt;/div&gt;
 
-  &lt;/ul&gt;&lt;p&gt;The &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-canvas-toBlob&gt;&lt;a href=#dom-canvas-toblob&gt;toBlob()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-context-2d-getImageDataHD&gt;&lt;a href=#dom-context-2d-getimagedatahd&gt;getImageDataHD()&lt;/a&gt;&lt;/code&gt;
+  &lt;table id=canvas-serialization-arguments&gt;&lt;caption&gt;Arguments for serialization methods&lt;/caption&gt;
+   &lt;thead&gt;&lt;tr&gt;&lt;th&gt; Type &lt;th&gt; Other arguments &lt;th&gt; Reference
+   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;code&gt;image/jpeg&lt;/code&gt;
+     &lt;td&gt; The second argument&lt;span class=impl&gt;, if it&lt;/span&gt; is a number in the range 0.0 to 1.0
+     inclusive&lt;span class=impl&gt;, must be&lt;/span&gt; treated as the desired quality level. &lt;span class=impl&gt;If it is not a number or is outside that range, the user agent must use its
+     default value, as if the argument had been omitted.&lt;/span&gt;
+     &lt;td&gt; &lt;a href=#refsJPEG&gt;[JPEG]&lt;/a&gt;
+  &lt;/table&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;For the purposes of these rules, an argument is considered to be a number if it is converted to
+  an IDL double value by the rules for handling arguments of type &lt;code title=&quot;&quot;&gt;any&lt;/code&gt; in the
+  Web IDL specification. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;Other arguments must be ignored and must not cause the user agent to throw an exception. A
+  future version of this specification will probably define other parameters to be passed to these
+  methods to allow authors to more carefully control compression settings, image metadata, etc.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;div class=impl&gt;
+
+  &lt;h5 id=security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.6 &lt;/span&gt;Security with &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements&lt;/h5&gt;
+
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Information leakage&lt;/strong&gt; can occur if scripts from
+  one &lt;a href=#origin&gt;origin&lt;/a&gt; can access information (e.g. read pixels)
+  from images from another origin (one that isn't the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt;).&lt;/p&gt;
+
+  &lt;p&gt;To mitigate this, bitmaps used with &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements are defined to have a flag
+  indicating whether they are &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt;. All
+  bitmaps start with their &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; set to
+  true. The flag is set to false when cross-origin images or fonts are used.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=dom-canvas-toDataURL&gt;&lt;a href=#dom-canvas-todataurl&gt;toDataURL()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-canvas-toDataURLHD&gt;&lt;a href=#dom-canvas-todataurlhd&gt;toDataURLHD()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-canvas-toBlob&gt;&lt;a href=#dom-canvas-toblob&gt;toBlob()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-context-2d-getImageDataHD&gt;&lt;a href=#dom-context-2d-getimagedatahd&gt;getImageDataHD()&lt;/a&gt;&lt;/code&gt;
   methods check the flag and will throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt;
   exception rather than leak cross-origin data.&lt;/p&gt;
 
-  &lt;p class=note&gt;Even resetting the canvas state by changing its
-  &lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt; or &lt;code title=attr-canvas-height&gt;&lt;a href=#attr-canvas-height&gt;height&lt;/a&gt;&lt;/code&gt; attributes doesn't reset
-  the &lt;i&gt;origin-clean&lt;/i&gt; flag.&lt;/p&gt;
+  &lt;p&gt;The flag can be reset in certain situations; for example, when a
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; is bound to a new &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;, the bitmap is cleared
+  and its flag reset.&lt;/p&gt;
 
   &lt;/div&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
@@ -67586,8 +68106,7 @@
      &lt;td&gt;none
      &lt;td&gt;none
 
-  &lt;/table&gt;&lt;p&gt;&lt;small&gt;&dagger; This case is only possible if the &lt;code title=attr-iframe-sandbox&gt;&lt;a href=#attr-iframe-sandbox&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute also allows
-  scripts.&lt;/small&gt;&lt;/p&gt;
+  &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;&dagger; This case is only possible if the &lt;code title=attr-iframe-sandbox&gt;&lt;a href=#attr-iframe-sandbox&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute also allows scripts.&lt;/small&gt;&lt;/p&gt;
 
   &lt;div class=impl&gt;
 
@@ -74877,18 +75396,16 @@
   &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must continually run through the
   following steps for as long as it exists:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the oldest &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; on one
-   of the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task
-   queues&lt;/a&gt;, ignoring tasks whose associated
-   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;. The user
-   agent may pick any &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the oldest &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; on one of the &lt;a href=#event-loop&gt;event
+   loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;, if any, ignoring tasks whose
+   associated &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;. The user agent may pick any
+   &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;!-- warning! if you renumber these steps, make sure to update the
-   &quot;spin the event loop&quot; algorithm below! --&gt;
+   &lt;!-- warning! if you renumber these steps, make sure to update the &quot;spin the event loop&quot;
+   algorithm below! --&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt; is now owned by the
-   &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, release it so that it is once again
-   free.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt; is now owned by the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, release it
+   so that it is once again free.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Remove that task from its &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
 
@@ -74927,17 +75444,16 @@
    &lt;li&gt;&lt;p&gt;Let the &lt;a href=#running-mutation-observers&gt;running mutation observers&lt;/a&gt; flag be
    false.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=provide-a-stable-state&gt;provide a stable state&lt;/dfn&gt;, if
-  any asynchronously-running algorithms are &lt;dfn id=await-a-stable-state title=&quot;await a stable
-  state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user agent must run
-  their &lt;dfn id=synchronous-section&gt;synchronous section&lt;/dfn&gt; and then resume running their
-  asynchronous algorithm (if appropriate).&lt;/p&gt;
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=provide-a-stable-state&gt;provide a stable state&lt;/dfn&gt;, if any asynchronously-running
+  algorithms are &lt;dfn id=await-a-stable-state title=&quot;await a stable state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user
+  agent must run their &lt;dfn id=synchronous-section&gt;synchronous section&lt;/dfn&gt; and then resume running their asynchronous
+  algorithm (if appropriate).&lt;/p&gt;
 
-  &lt;p class=note&gt;A &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt; never mutates
-  the DOM, runs any script, or has any other side-effects.&lt;/p&gt;
+  &lt;p class=note&gt;A &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt; never mutates the DOM, runs any script, or has
+  any side-effects detectable from another &lt;a href=#synchronous-section&gt;synchronous section&lt;/a&gt;, and thus &lt;a href=#synchronous-section title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/a&gt; can be run in any order.&lt;/p&gt;
 
-  &lt;p class=note&gt;Steps in &lt;a href=#synchronous-section title=&quot;synchronous
-  section&quot;&gt;synchronous sections&lt;/a&gt; are marked with &#8987;.&lt;/p&gt;
+  &lt;p class=note&gt;Steps in &lt;a href=#synchronous-section title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/a&gt; are marked
+  with &#8987;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;When an algorithm says to &lt;dfn id=spin-the-event-loop&gt;spin the event loop&lt;/dfn&gt; until
   a condition &lt;var title=&quot;&quot;&gt;goal&lt;/var&gt; is met, the user agent must run
@@ -77432,7 +77948,7 @@
 &lt;!--ADD-TOPIC:Security--&gt;
   &lt;div class=impl&gt;
 
-  &lt;h5 id=security-and-privacy&gt;&lt;span class=secno&gt;7.5.1.3 &lt;/span&gt;Security and privacy&lt;/h5&gt;
+  &lt;h6 id=security-and-privacy&gt;&lt;span class=secno&gt;7.5.1.2.1 &lt;/span&gt;Security and privacy&lt;/h6&gt;
 
   &lt;p&gt;These mechanisms can introduce a number of concerns, in
   particular privacy concerns.&lt;/p&gt;
@@ -77517,7 +78033,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=sample-handler-impl&gt;&lt;span class=secno&gt;7.5.1.4 &lt;/span&gt;Sample user interface&lt;/h5&gt;
+  &lt;h6 id=sample-handler-impl&gt;&lt;span class=secno&gt;7.5.1.2.2 &lt;/span&gt;Sample user interface&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -77563,7 +78079,7 @@
 
 
 
-  &lt;h5 id=manually-releasing-the-storage-mutex&gt;&lt;span class=secno&gt;7.5.1.5 &lt;/span&gt;Manually releasing the storage mutex&lt;/h5&gt;
+  &lt;h5 id=manually-releasing-the-storage-mutex&gt;&lt;span class=secno&gt;7.5.1.3 &lt;/span&gt;Manually releasing the storage mutex&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[NoInterfaceObject]
 interface &lt;dfn id=navigatorstorageutils&gt;NavigatorStorageUtils&lt;/dfn&gt; {
@@ -77735,10 +78251,242 @@
     &lt;li&gt;&lt;p&gt;Return 1.&lt;/li&gt;
 
    &lt;/ol&gt;&lt;/div&gt;
-&lt;!--TOPIC:HTML--&gt;
 
 
+&lt;!--TOPIC:Canvas--&gt;
 
+  &lt;h3 id=images&gt;&lt;span class=secno&gt;7.6 &lt;/span&gt;Images&lt;/h3&gt;
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=imagebitmap&gt;ImageBitmap&lt;/dfn&gt; {
+  // opaque object
+};
+
+callback &lt;dfn id=imagebitmapcallback&gt;ImageBitmapCallback&lt;/dfn&gt; = void (&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt; image);
+
+[NoInterfaceObject]
+interface &lt;dfn id=imagebitmapfactories&gt;ImageBitmapFactories&lt;/dfn&gt; {
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#blob&gt;Blob&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback);
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
+  void &lt;a href=#dom-createimagebitmap title=dom-createImageBitmap&gt;createImageBitmap&lt;/a&gt;(&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; image, &lt;a href=#imagebitmapcallback&gt;ImageBitmapCallback&lt;/a&gt; _callback); 
+};
+&lt;a href=#window&gt;Window&lt;/a&gt; implements &lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;;
+&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt; implements &lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;;&lt;/pre&gt;
+
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object represents a bitmap image that can be painted to a canvas
+  without undue latency.&lt;/p&gt;
+
+  &lt;p class=note&gt;The exact judgement of what is undue latency of this is left up to the
+  implementer, but in general if making use of the bitmap requires network I/O, or even local disk
+  I/O, then the latency is probably undue; whereas if it only requires a blocking read from a GPU or
+  system RAM, the latency is probably acceptable.&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=dom-createImageBitmap&gt;&lt;a href=#dom-createimagebitmap&gt;createImageBitmap&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Takes &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, which can be an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element,
+    &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object, an
+    &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object, or a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object, and
+    asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; as its
+    argument when it has created one.&lt;/p&gt;
+
+    &lt;p&gt;If no &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object can be constructed, for example because the provided
+    &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; data is not actually an image, then the &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;
+    is invoked with null as the value instead.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception if the source image is not in a valid
+    state (e.g. an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element that hasn't finished loading, or a
+    &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object whose bitmap data has zero length along one or both
+    dimensions). Throws a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception if the script is not allowed to
+    access the image data of the source image (e.g. a &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; that is
+    &lt;a href=#cors-cross-origin&gt;CORS-cross-origin&lt;/a&gt;, or a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; being drawn on by a script in a worker
+    from another &lt;a href=#origin&gt;origin&lt;/a&gt;).&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object always has associated bitmap data, with a width and a
+  height. However, it is possible for this data to be corrupted. If an &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt;
+  object's media data can be decoded without errors, it is said to be &lt;dfn id=concept-imagebitmap-good title=concept-ImageBitmap-good&gt;fully decodable&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object can be obtained from a variety of different objects, using
+  the &lt;dfn id=dom-createimagebitmap title=dom-createImageBitmap&gt;&lt;code&gt;createImageBitmap()&lt;/code&gt;&lt;/dfn&gt; method. This method
+  takes two arguments, &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;. When invoked, the
+  method must act as follows:&lt;/p&gt;
+  &lt;!-- the canvas createPattern() and drawImage() methods have similar requirements --&gt;
+
+  &lt;dl&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#img-all title=img-all&gt;completely
+     available&lt;/a&gt;, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these
+     steps.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's image is not the &lt;a href=#same-origin&gt;same
+     origin&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;, then throw a
+     &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element's media data is not a bitmap (e.g. it's a vector
+     graphic), then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these
+     steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;
+     element's media data. If this is an animated image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's
+     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
+     the first frame of the animation.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;, then throw an
+     &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element is not the &lt;a href=#same-origin&gt;same
+     origin&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;, then throw a
+     &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+     attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then throw an
+     &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the frame at the
+     &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, at the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;'s &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt; (i.e. after any aspect-ratio
+     correction has been applied).&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data does not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw an
+     &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap has either a horizontal dimension or a
+     vertical dimension equal to zero, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and
+     abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the
+     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap data.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object has been neutered through the &lt;code title=dom-Blob-close&gt;close&lt;/code&gt; method, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
+     exception and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Read the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object's data. If an &lt;a href=#file-error-read title=file-error-read&gt;error
+     occurs during reading of the object&lt;/a&gt;, then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with null as the argument, and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Apply the &lt;a href=#content-type-sniffing:-image title=&quot;Content-Type sniffing: image&quot;&gt;image sniffing rules&lt;/a&gt; to
+     determine the file format of the image data, with MIME type of the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; (as given
+     by the &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object's &lt;code title=dom-Blob-type&gt;type&lt;/code&gt; attribute) giving the
+     official type.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the image data is not in a supported file format (e.g. it's not actually an image at
+     all), or if the image data is corrupted in some fatal way such that the image dimensions cannot
+     be obtained, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with null as the
+     argument, and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be the image data read from the
+     &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt; object. If this is an animated image, the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's
+     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
+     the first frame of the animation.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be the image data given by the
+     &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;&lt;!--ADD-TOPIC:Security--&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; does
+     not have its &lt;a href=#concept-canvas-origin-clean title=concept-canvas-origin-clean&gt;origin-clean&lt;/a&gt; flag set, then throw
+     an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt; has
+     either a horizontal dimension or a vertical dimension equal to zero, then throw an
+     &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object's bitmap data be a copy of the
+     &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#scratch-bitmap&gt;scratch bitmap&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt; object as its argument.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;/div&gt;
+
+
+&lt;!--TOPIC:HTML--&gt;
+
   &lt;h2 id=editing&gt;&lt;span class=secno&gt;8 &lt;/span&gt;&lt;dfn&gt;User interaction&lt;/dfn&gt;&lt;/h2&gt;
 
 
@@ -83583,9 +84331,9 @@
 &lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt; implements &lt;a href=#windowbase64&gt;WindowBase64&lt;/a&gt;;&lt;/pre&gt;
 
 
-  &lt;p&gt;The DOM APIs (&lt;code&gt;&lt;a href=#node&gt;Node&lt;/a&gt;&lt;/code&gt; objects, &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
-  objects, etc) are not available to workers in this version of this
-  specification.&lt;/p&gt;
+  &lt;p&gt;The DOM APIs &mdash; specifically, all the interfaces defind in the DOM Core specification
+  other than exceptions &mdash; must not be &lt;a href=#expose title=expose&gt;exposed&lt;/a&gt; if the
+  &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt; is a &lt;a href=#worker-environment&gt;worker environment&lt;/a&gt;. &lt;a href=#hrefDOMCORE&gt;[DOMCORE]&lt;/a&gt;&lt;/p&gt;
 
 
   &lt;h4 id=importing-scripts-and-libraries&gt;&lt;span class=secno&gt;9.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/h4&gt;
@@ -97538,8 +98286,8 @@
       &lt;tr&gt;&lt;td&gt;7
        &lt;td&gt;x&lt;!----&gt;xx-large
        &lt;td&gt;&lt;i&gt;see below&lt;/i&gt;
-    &lt;/table&gt;&lt;p&gt;The 'x&lt;!----&gt;xx-large' value is a non-CSS value used here to
-    indicate a font size 50% larger than 'xx-large'.&lt;/p&gt;
+    &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;The 'x&lt;!----&gt;xx-large' value is a non-CSS value used here to
+    indicate a font size 50% larger than 'xx-large'.&lt;/small&gt;&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -98364,10 +99112,11 @@
   &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; elements are expected to be treated as replaced
   elements.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#represents&gt;represents&lt;/a&gt;
-  &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; is expected to be treated as a
-  replaced element. Other &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements are expected to
-  be treated as ordinary elements in the rendering model.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#represents&gt;represents&lt;/a&gt; &lt;a href=#embedded-content&gt;embedded content&lt;/a&gt; is
+  expected to be treated as a replaced element; the contents of such elements are the element's
+  bitmap, if any, or else a transparent black bitmap with the same intrinsic dimensions as the
+  element. Other &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements are expected to be treated as ordinary elements in the
+  rendering model.&lt;/p&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#represents&gt;represents&lt;/a&gt; an
   image, plugin, or &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt; is expected
@@ -98436,7 +99185,7 @@
 &lt;!--TOPIC:Rendering--&gt;
   &lt;div class=impl&gt;
 
-  &lt;h4 id=images&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
+  &lt;h4 id=images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element
   when its &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in
@@ -103187,7 +103936,8 @@
      &lt;td&gt;empty&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
-    &lt;/table&gt;&lt;p&gt;An asterisk (*) in a cell indicates that the actual rules are more complicated than indicated in the table above.&lt;/p&gt;
+    &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
+  complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
 
   &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that
   list the given categories in their content model, not to elements
@@ -104342,7 +105092,8 @@
      &lt;td&gt; How the value of the form control is to be wrapped for &lt;a href=#form-submission&gt;form submission&lt;/a&gt;
      &lt;td&gt; &quot;&lt;code title=attr-textarea-wrap-soft&gt;&lt;a href=#attr-textarea-wrap-soft&gt;soft&lt;/a&gt;&lt;/code&gt;&quot;;
           &quot;&lt;code title=attr-textarea-wrap-hard&gt;&lt;a href=#attr-textarea-wrap-hard&gt;hard&lt;/a&gt;&lt;/code&gt;&quot;
-  &lt;/table&gt;&lt;p&gt;An asterisk (*) in a cell indicates that the actual rules are more complicated than indicated in the table above.&lt;/p&gt;
+  &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
+  complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
 
   &lt;hr&gt;&lt;table id=ix-event-handlers&gt;&lt;caption&gt;List of event handler content attributes&lt;/caption&gt;
    &lt;thead&gt;&lt;tr&gt;&lt;th&gt; Attribute
@@ -105093,6 +105844,7 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#canvasproxy&gt;CanvasProxy&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#closeevent&gt;CloseEvent&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#domelementmap&gt;DOMElementMap&lt;/a&gt;&lt;/code&gt;
@@ -105188,6 +105940,8 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#hashchangeevent&gt;HashChangeEvent&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#history-0&gt;History&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#imagebitmap&gt;ImageBitmap&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#imagebitmapfactories&gt;ImageBitmapFactories&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#mediacontroller&gt;MediaController&lt;/a&gt;&lt;/code&gt;
@@ -105327,7 +106081,7 @@
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/csswg/css3-color/">http://dev.w3.org/csswg/css3-color/</A>&gt;CSS Color Module Level 3&lt;/a&gt;&lt;/cite&gt;, T. &Ccedil;elik, C. Lilley, L. Baron. W3C.&lt;/dd&gt;
 
    &lt;dt id=refsCSSFONTS&gt;[CSSFONTS]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://www.w3.org/TR/css3-fonts/">http://www.w3.org/TR/css3-fonts/</A>&gt;CSS Fonts Module Level 3&lt;/a&gt;&lt;/cite&gt;, J. Daggett. W3C.&lt;/dd&gt;
+   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/csswg/css3-fonts/">http://dev.w3.org/csswg/css3-fonts/</A>&gt;CSS Fonts Module Level 3&lt;/a&gt;&lt;/cite&gt;, J. Daggett. W3C.&lt;/dd&gt;
 
    &lt;dt id=refsCSSIMAGES&gt;[CSSIMAGES]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://dev.w3.org/csswg/css4-images/">http://dev.w3.org/csswg/css4-images/</A>&gt;CSS Image Values and Replaced Content Module&lt;/a&gt;&lt;/cite&gt;, E. Etemad, T. Atkins. W3C.&lt;/dd&gt;

Modified: source
===================================================================
--- source	2012-11-06 01:54:26 UTC (rev 7508)
+++ source	2012-11-16 20:26:07 UTC (rev 7509)
@@ -20,9 +20,10 @@
  interface File : Blob { }; // File API
  interface FileCallback { }; // File API
  interface FileList { }; // File API
- interface ArrayBuffer { }; // WebGL
- interface ArrayBufferView { }; // WebGL
- interface Uint8ClampedArray { }; // WebGL
+ interface WebGLRenderingContext { }; // WebGL
+ interface ArrayBuffer { }; // TypedArray
+ interface ArrayBufferView { }; // TypedArray
+ interface Uint8ClampedArray { }; // TypedArray
  interface XMLDocument { }; // DOM Core
  interface HTMLCollection { }; // DOM Core
  interface DOMTokenList { }; // DOM Core
@@ -3174,7 +3175,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;This specification uses the following interfaces defined in the
+    &lt;p&gt;This specification uses the following features defined in the
     File API specification: &lt;a href=&quot;#refsFILEAPI&quot;&gt;[FILEAPI]&lt;/a&gt;&lt;/p&gt;
 
     &lt;ul class=&quot;brief&quot;&gt;
@@ -3182,7 +3183,9 @@
      &lt;li&gt;&lt;dfn&gt;&lt;code&gt;Blob&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;&lt;dfn&gt;&lt;code&gt;File&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;&lt;dfn&gt;&lt;code&gt;FileList&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
-
+     &lt;li&gt;&lt;dfn&gt;&lt;code title=&quot;dom-Blob-close&quot;&gt;Blob.close()&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;dfn&gt;&lt;code title=&quot;dom-Blob-type&quot;&gt;Blob.type&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;The concept of &lt;dfn title=&quot;file-error-read&quot;&gt;read errors&lt;/dfn&gt;&lt;/li&gt;
     &lt;/ul&gt;
 
     &lt;p&gt;It also uses the following interface defined in the File System
@@ -3291,6 +3294,10 @@
     &lt;cite&gt;CSS Style Attributes&lt;/cite&gt; specification. &lt;a
     href=&quot;#refsCSSATTR&quot;&gt;[CSSATTR]&lt;/a&gt;&lt;/p&gt;
 
+    &lt;p&gt;The &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's use of fonts depends on the features
+    described in the CSS Fonts specification, including in particular
+    &lt;dfn&gt;&lt;code&gt;FontLoader&lt;/code&gt;&lt;/dfn&gt;. &lt;a href=&quot;#refsCSSFONTS&quot;&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+
    &lt;/dd&gt;
 
 
@@ -3312,6 +3319,20 @@
    &lt;/dd&gt;
 
 
+   &lt;dt&gt;WebGL&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The following interface is defined in the WebGL specification: &lt;a
+    href=&quot;#refsWEBGL&quot;&gt;[WEBGL]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+     &lt;li&gt;&lt;dfn&gt;&lt;code&gt;WebGLRenderingContext&lt;/code&gt;&lt;/dfn&gt;
+    &lt;/ul&gt;
+
+   &lt;/dd&gt;
+
+
 &lt;!--TOPIC:HTML--&gt;
 
    &lt;!-- mention that the parser supports mathml? --&gt;
@@ -6887,15 +6908,11 @@
 
   &lt;hr&gt;
 
-  &lt;!--END w3c-html--&gt;&lt;!--2DCANVAS--&gt;
+  &lt;p class=&quot;note&quot;&gt;The &lt;span title=&quot;canvas-context-2d&quot;&gt;2D graphics context&lt;/span&gt; has a separate
+  color syntax that also handles opacity.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;The &lt;span title=&quot;canvas-context-2d&quot;&gt;2D graphics
-  context&lt;/span&gt; has a separate color syntax that also handles
-  opacity.&lt;/p&gt;
 
-  &lt;!--START w3c-html--&gt;&lt;!--2DCANVAS--&gt;
 
-
   &lt;h4&gt;Space-separated tokens&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn&gt;set of space-separated tokens&lt;/dfn&gt; is a string containing
@@ -9921,6 +9938,7 @@
   &lt;ul class=&quot;brief&quot;&gt;
    &lt;li&gt;&lt;code&gt;MessagePort&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;ArrayBuffer&lt;/code&gt; &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;
+   &lt;li&gt;&lt;code&gt;CanvasProxy&lt;/code&gt;
   &lt;/ul&gt;
 
 
@@ -10040,6 +10058,11 @@
      argument and &lt;var title=&quot;&quot;&gt;memory&lt;/var&gt; as the new &quot;&lt;var
      title=&quot;&quot;&gt;memory&lt;/var&gt;&quot; argument.&lt;/p&gt;&lt;/dd&gt;
 
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;ImageBitmap&lt;/code&gt; object&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be a newly constructed &lt;code&gt;ImageBitmap&lt;/code&gt; object
+     whose bitmap data is a copy of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;'s bitmap data.&lt;/p&gt;&lt;/dd&gt;
+
 &lt;!--(when we add this, make sure to throw DataCloneError if these objects are already closed)
      &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; is an &lt;code&gt;ArrayBuffer&lt;/code&gt; object&lt;/dt&gt;
 
@@ -26278,7 +26301,10 @@
   height is the image's intrinsic height, and whose appearance is the
   intrinsic appearance of the image.&lt;/p&gt;
 
-  &lt;p&gt;User agents may obtain images immediately or on demand.&lt;/p&gt;
+  &lt;p&gt;In a &lt;span&gt;browsing context&lt;/span&gt; where &lt;span title=&quot;concept-bc-noscript&quot;&gt;scripting is
+  disabled&lt;/span&gt;, user agents may obtain images immediately or on demand. In a &lt;span&gt;browsing
+  context&lt;/span&gt; where &lt;span title=&quot;concept-bc-noscript&quot;&gt;scripting is enabled&lt;/span&gt;, user agents
+  must obtain images immediately.&lt;/p&gt;
 
   &lt;p&gt;A user agent that obtains images immediately must synchronously
   &lt;span&gt;update the image data&lt;/span&gt; of an &lt;code&gt;img&lt;/code&gt; element
@@ -27234,8 +27260,8 @@
   title=&quot;dom-img-complete&quot;&gt;&lt;code&gt;complete&lt;/code&gt;&lt;/dfn&gt; must return
   true if any of the following conditions is true:&lt;/p&gt;
   &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;The &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute is omitted.
-   &lt;li&gt;The &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute's value is the empty string.
+   &lt;li&gt;Both the &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute and the &lt;code title=&quot;attr-img-srcset&quot;&gt;srcset&lt;/code&gt; attributes are omitted.
+   &lt;li&gt;The the &lt;code title=&quot;attr-img-srcset&quot;&gt;srcset&lt;/code&gt; attribute is omitted and the &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute's value is the empty string. &lt;!-- we only have this hack for src=&quot;&quot;, not srcset=&quot;&quot;; present but empty or bogus srcset=&quot;&quot; still means complete=false if it's not in the img-error state --&gt;
    &lt;li&gt;The final &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt; once the resource has been &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; has been &lt;span title=&quot;queue a task&quot;&gt;queued&lt;/span&gt;, but has not yet been run, and the &lt;code&gt;img&lt;/code&gt; element is not in the &lt;span title=&quot;img-error&quot;&gt;broken&lt;/span&gt; state.
    &lt;li&gt;The &lt;code&gt;img&lt;/code&gt; element is &lt;span title=&quot;img-all&quot;&gt;completely available&lt;/span&gt;.
   &lt;/ul&gt;
@@ -42276,17 +42302,22 @@
    &lt;dd&gt;&lt;code title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-dom&quot;&gt;DOM interface&lt;/span&gt;:&lt;/dt&gt;&lt;!--ADD-TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-    &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLCanvasElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
+    &lt;pre class=&quot;idl&quot;&gt;typedef (&lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; or &lt;span&gt;WebGLRenderingContext&lt;/span&gt;) &lt;dfn&gt;RenderingContext&lt;/dfn&gt;;
+
+interface &lt;dfn&gt;HTMLCanvasElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
            attribute unsigned long &lt;span title=&quot;dom-canvas-width&quot;&gt;width&lt;/span&gt;;
            attribute unsigned long &lt;span title=&quot;dom-canvas-height&quot;&gt;height&lt;/span&gt;;
 
+  &lt;span&gt;RenderingContext&lt;/span&gt;? &lt;span title=&quot;dom-canvas-getContext&quot;&gt;getContext&lt;/span&gt;(DOMString contextId, any... arguments);
+  boolean &lt;span title=&quot;dom-canvas-supportsContext&quot;&gt;supportsContext&lt;/span&gt;(DOMString contextId, any... arguments);
+
+  void &lt;span title=&quot;dom-canvas-setContext&quot;&gt;setContext&lt;/span&gt;(&lt;span&gt;RenderingContext&lt;/span&gt; context);
+  &lt;span&gt;CanvasProxy&lt;/span&gt; &lt;span title=&quot;dom-canvas-transferControlToProxy&quot;&gt;transferControlToProxy&lt;/span&gt;();
+
   DOMString &lt;span title=&quot;dom-canvas-toDataURL&quot;&gt;toDataURL&lt;/span&gt;(optional DOMString type, any... arguments);
   DOMString &lt;span title=&quot;dom-canvas-toDataURLHD&quot;&gt;toDataURLHD&lt;/span&gt;(optional DOMString type, any... arguments);
   void &lt;span title=&quot;dom-canvas-toBlob&quot;&gt;toBlob&lt;/span&gt;(&lt;span&gt;FileCallback&lt;/span&gt;? _callback, optional DOMString type, any... arguments);
   void &lt;span title=&quot;dom-canvas-toBlobHD&quot;&gt;toBlobHD&lt;/span&gt;(&lt;span&gt;FileCallback&lt;/span&gt;? _callback, optional DOMString type, any... arguments);
-
-  object? &lt;span title=&quot;dom-canvas-getContext&quot;&gt;getContext&lt;/span&gt;(DOMString contextId, any... arguments);
-  boolean &lt;span title=&quot;dom-canvas-supportsContext&quot;&gt;supportsContext&lt;/span&gt;(DOMString contextId, any... arguments);
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--REMOVE-TOPIC:DOM APIs--&gt;
@@ -42301,21 +42332,24 @@
   CSS and supporting technologies such as XBL.&lt;/p&gt;
 
   &lt;p&gt;When authors use the &lt;code&gt;canvas&lt;/code&gt; element, they must also provide content that, when
-  presented to the user, conveys essentially the same function or purpose as the bitmap canvas. This
-  content may be placed as content of the &lt;code&gt;canvas&lt;/code&gt; element. The contents of the
-  &lt;code&gt;canvas&lt;/code&gt; element, if any, are the element's &lt;span&gt;fallback content&lt;/span&gt;.&lt;/p&gt;
+  presented to the user, conveys essentially the same function or purpose as the
+  &lt;code&gt;canvas&lt;/code&gt;' bitmap. This content may be placed as content of the &lt;code&gt;canvas&lt;/code&gt;
+  element. The contents of the &lt;code&gt;canvas&lt;/code&gt; element, if any, are the element's &lt;span&gt;fallback
+  content&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;In interactive visual media, if &lt;span title=&quot;concept-n-script&quot;&gt;scripting is enabled&lt;/span&gt; for
   the &lt;code&gt;canvas&lt;/code&gt; element, and if support for &lt;code&gt;canvas&lt;/code&gt; elements has been enabled,
   the &lt;code&gt;canvas&lt;/code&gt; element &lt;span&gt;represents&lt;/span&gt; &lt;span&gt;embedded content&lt;/span&gt; consisting
-  of a dynamically created image.&lt;/p&gt;
+  of a dynamically created image, the element's bitmap.&lt;/p&gt;
 
   &lt;p&gt;In non-interactive, static, visual media, if the &lt;code&gt;canvas&lt;/code&gt; element has been
-  previously painted on (e.g. if the page was viewed in an interactive visual medium and is now
-  being printed, or if some script that ran during the page layout process painted on the element),
-  then the &lt;code&gt;canvas&lt;/code&gt; element &lt;span&gt;represents&lt;/span&gt; &lt;span&gt;embedded content&lt;/span&gt; with
-  the current image and size. Otherwise, the element represents its &lt;span&gt;fallback content&lt;/span&gt;
-  instead.&lt;/p&gt;
+  previously associated with a rendering context (e.g. if the page was viewed in an interactive
+  visual medium and is now being printed, or if some script that ran during the page layout process
+  painted on the element), then the &lt;code&gt;canvas&lt;/code&gt; element &lt;span&gt;represents&lt;/span&gt;
+  &lt;span&gt;embedded content&lt;/span&gt; with the element's current bitmap and size. Otherwise, the element
+  represents its &lt;span&gt;fallback content&lt;/span&gt; instead.&lt;/p&gt;
 
   &lt;p&gt;In non-visual media, and in visual media if &lt;span title=&quot;concept-n-noscript&quot;&gt;scripting is
   disabled&lt;/span&gt; for the &lt;code&gt;canvas&lt;/code&gt; element or if support for &lt;code&gt;canvas&lt;/code&gt; elements
@@ -42331,6 +42365,8 @@
   elements in the &lt;span&gt;fallback content&lt;/span&gt;. (Focus has no effect on mouse interaction events.)
   &lt;a href=&quot;#refsDOMEVENTS&quot;&gt;[DOMEVENTS]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;The &lt;code&gt;canvas&lt;/code&gt; element has two attributes to control the size of the coordinate space:
   &lt;dfn title=&quot;attr-canvas-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
   title=&quot;attr-canvas-height&quot;&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt;. These attributes, when specified, must have
@@ -42341,45 +42377,69 @@
   attribute defaults to 300, and the &lt;code title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt; attribute
   defaults to 150.&lt;/p&gt;
 
-  &lt;p&gt;The intrinsic dimensions of the &lt;code&gt;canvas&lt;/code&gt; element equal the size of the coordinate
-  space, with the numbers interpreted in CSS pixels. However, the element can be sized arbitrarily
-  by a style sheet. During rendering, the image is scaled to fit this layout size.&lt;/p&gt;
+  &lt;p&gt;The intrinsic dimensions of the &lt;code&gt;canvas&lt;/code&gt; element when it &lt;span&gt;represents&lt;/span&gt;
+  &lt;span&gt;embedded content&lt;/span&gt; are equal to the dimensions of the element's bitmap.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;A &lt;code&gt;canvas&lt;/code&gt; element can be sized arbitrarily by a style sheet, its
+  bitmap is then subject to the 'object-fit' CSS property. &lt;a
+  href=&quot;#refsCSSIMAGES&quot;&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The size of the coordinate space does not necessarily represent the size of the actual bitmap
-  that the user agent will use internally or during rendering. On high-definition displays, for
-  instance, the user agent may internally use a bitmap with two device pixels per unit in the
-  coordinate space, so that the rendering remains at high quality throughout.&lt;/p&gt;
+  &lt;hr&gt;
 
-  &lt;p&gt;When the &lt;code&gt;canvas&lt;/code&gt; element is created, and subsequently whenever the &lt;code
-  title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt; and &lt;code title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt;
-  attributes are set (whether to a new value or to the previous value), the bitmap and any
-  associated contexts must be cleared back to their initial state and reinitialized with the newly
-  specified coordinate space dimensions.&lt;/p&gt;
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;p&gt;The bitmaps of &lt;code&gt;canvas&lt;/code&gt; elements, as well as some of the bitmaps of rendering
+  contexts, such as those described in the section on the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt;
+  object below, have an &lt;dfn title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/dfn&gt; flag, which can
+  be set to true or false. Initially, when the &lt;code&gt;canvas&lt;/code&gt; element is created, its bitmap's
+  &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag must be set to true.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
 
-  &lt;p&gt;When the canvas is initialized, its bitmap must be cleared to transparent black.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;canvas&lt;/code&gt; bitmap can also have a &lt;span&gt;hit region list&lt;/span&gt;, as described in the
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; section below.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;canvas&lt;/code&gt; element does not represent its &lt;span&gt;fallback content&lt;/span&gt;, it
-  &lt;span&gt;provides a paint source&lt;/span&gt; whose width is the element's intrinsic width, whose height is
-  the element's intrinsic height, and whose appearance is the element's bitmap.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;canvas&lt;/code&gt; element can have a rendering context bound to it. Initially, it does not
+  have a bound rendering context. To keep track of whether it has a rendering context or not, and
+  what kind of rendering context it is, a &lt;code&gt;canvas&lt;/code&gt; also has a &lt;dfn
+  title=&quot;concept-canvas-context-mode&quot;&gt;canvas context mode&lt;/dfn&gt;, which is initially &lt;dfn
+  title=&quot;concept-canvas-none&quot;&gt;none&lt;/dfn&gt; but can be changed to either &lt;dfn
+  title=&quot;concept-canvas-direct-2d&quot;&gt;direct-2d&lt;/dfn&gt;, &lt;dfn
+  title=&quot;concept-canvas-direct-webgl&quot;&gt;direct-webgl&lt;/dfn&gt;, &lt;dfn
+  title=&quot;concept-canvas-indirect&quot;&gt;indirect&lt;/dfn&gt;, or &lt;dfn
+  title=&quot;concept-canvas-proxied&quot;&gt;proxied&lt;/dfn&gt; by algorithms defined in this specification.&lt;/p&gt;
 
+  &lt;p&gt;When its &lt;span title=&quot;concept-canvas-context-mode&quot;&gt;canvas context mode&lt;/span&gt; is &lt;span
+  title=&quot;concept-canvas-none&quot;&gt;none&lt;/span&gt;, a &lt;code&gt;canvas&lt;/code&gt; element has no rendering context,
+  and its bitmap must be fully transparent black with an intrinsic width equal to the numeric value
+  of the element's &lt;code title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt; attribute and an intrinsic height
+  equal to the numeric value of the element's &lt;code title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt;
+  attribute, those values being interpreted in CSS pixels, and being updated as the attributes are
+  set, changed, or removed.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;canvas&lt;/code&gt; element represents &lt;span&gt;embedded content&lt;/span&gt;, it &lt;span&gt;provides
+  a paint source&lt;/span&gt; whose width is the element's intrinsic width, whose height is the element's
+  intrinsic height, and whose appearance is the element's bitmap.&lt;/p&gt;
+
+  &lt;p&gt;Whenever the &lt;code title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt; and &lt;code
+  title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt; content attributes are set, removed, changed, or
+  redundantly set to the value they already have, if the &lt;span
+  title=&quot;concept-canvas-context-mode&quot;&gt;canvas context mode&lt;/span&gt; is &lt;span
+  title=&quot;concept-canvas-direct-2d&quot;&gt;direct-2d&lt;/span&gt;&lt;!-- (and the rendering context's &lt;span
+  title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt;, therefore, is &lt;span
+  title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;)--&gt;, the user agent must &lt;span
+  title=&quot;concept-canvas-set-bitmap-dimensions&quot;&gt;set bitmap dimensions&lt;/span&gt; to the numeric values of
+  the &lt;code title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt; and &lt;code
+  title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt; content attributes.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
   title=&quot;dom-canvas-height&quot;&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;span&gt;reflect&lt;/span&gt; the
   respective content attributes of the same name, with the same defaults.&lt;/p&gt;
 
   &lt;/div&gt;
 
-  &lt;div class=&quot;example&quot;&gt;
-   &lt;p&gt;Only one square appears to be drawn in the following example:&lt;/p&gt;
-   &lt;pre&gt;  // canvas is a reference to a &lt;canvas&gt; element
-  var context = canvas.getContext('2d');
-  context.fillRect(0,0,50,50);
-  canvas.setAttribute('width', '300'); // clears the canvas
-  context.fillRect(0,100,50,50);
-  canvas.width = canvas.width; // clears the canvas
-  context.fillRect(100,0,50,50); // only this square remains&lt;/pre&gt;
-  &lt;/div&gt;
+  &lt;p class=&quot;note&quot;&gt;The bitmaps used with &lt;code&gt;canvas&lt;/code&gt; elements can have arbitrary pixel
+  densities. Typically, the density will match that of the user's screen.&lt;/p&gt;
 
   &lt;hr&gt;
 
@@ -42391,24 +42451,26 @@
    &lt;dd&gt;
 
     &lt;p&gt;Returns an object that exposes an API for drawing on the canvas. The first argument specifies
-    the desired API. Subsequent arguments are handled by that API.&lt;/p&gt;
+    the desired API, either &quot;&lt;code title=&quot;canvas-context-2d&quot;&gt;2d&lt;/code&gt;&quot; or &quot;&lt;code
+    title=&quot;canvas-context-webgl&quot;&gt;webgl&lt;/code&gt;&quot;. Subsequent arguments are handled by that API.&lt;/p&gt;
 
     &lt;p&gt;This specification defines the &quot;&lt;code title=&quot;canvas-context-2d&quot;&gt;2d&lt;/code&gt;&quot; context below.
     There is also a specification that defines a &quot;&lt;code title=&quot;canvas-context-webgl&quot;&gt;webgl&lt;/code&gt;&quot;
     context. &lt;a href=&quot;#refsWEBGL&quot;&gt;[WEBGL]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;The list of defined contexts is given on the &lt;a
-    href=&quot;<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&quot;&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a
-    href=&quot;#refsWHATWGWIKI&quot;&gt;[WHATWGWIKI]&lt;/a&gt;
-
-    &lt;p&gt;Returns null if the given context ID is not supported or if the canvas has already been
-    initialized with some other (incompatible) context type (e.g. trying to get a &quot;&lt;code
+    &lt;p&gt;Returns null if the given context ID is not supported, if the canvas has already been
+    initialized with the other context type (e.g. trying to get a &quot;&lt;code
     title=&quot;canvas-context-2d&quot;&gt;2d&lt;/code&gt;&quot; context after getting a &quot;&lt;code
     title=&quot;canvas-context-webgl&quot;&gt;webgl&lt;/code&gt;&quot; context).&lt;/p&gt;
 
+    &lt;p&gt;Throws an &lt;code&gt;InvalidStateError&lt;/code&gt; if the &lt;code
+    title=&quot;dom-canvas-setContext&quot;&gt;setContext()&lt;/code&gt; or &lt;code
+    title=&quot;dom-canvas-transferControlToProxy&quot;&gt;transferControlToProxy()&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
+
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=&quot;dom-canvas-supportsContext&quot;&gt;supportsContext&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; [, ... ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;supported&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=&quot;dom-canvas-supportsContext&quot;&gt;supportsContext&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; [, ... ])&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -42419,57 +42481,148 @@
     title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt; will or will not return an object, as
     conditions (e.g. availability of system resources) can vary over time.&lt;/p&gt;
 
+    &lt;p&gt;Throws an &lt;code&gt;InvalidStateError&lt;/code&gt; if the &lt;code
+    title=&quot;dom-canvas-setContext&quot;&gt;setContext()&lt;/code&gt; or &lt;code
+    title=&quot;dom-canvas-transferControlToProxy&quot;&gt;transferControlToProxy()&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
+
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=&quot;dom-canvas-setContext&quot;&gt;setContext&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Sets the &lt;code&gt;canvas&lt;/code&gt;' rendering context to the given object.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;InvalidStateError&lt;/code&gt; exception if the &lt;code
+    title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt; or &lt;code
+    title=&quot;dom-canvas-transferControlToProxy&quot;&gt;transferControlToProxy()&lt;/code&gt; methods have been
+    used.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;A &lt;code&gt;canvas&lt;/code&gt; element can have a &lt;dfn&gt;primary context&lt;/dfn&gt;, which is the first context
-  to have been obtained for that element. When created, a &lt;code&gt;canvas&lt;/code&gt; element must not have
-  a &lt;span&gt;primary context&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;There are two ways for a &lt;code&gt;canvas&lt;/code&gt; element to acquire a rendering context: the
+  &lt;code&gt;canvas&lt;/code&gt; element can provide one via the &lt;code
+  title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt; method, and one can be assigned to it via the
+  &lt;code title=&quot;dom-canvas-setContext&quot;&gt;setContext()&lt;/code&gt; method. In addition, the whole issue of a
+  rendering context can be taken out of the &lt;code&gt;canvas&lt;/code&gt; element's hands and passed to a
+  &lt;code&gt;CanvasProxy&lt;/code&gt; object, which itself can then be assigned a rendering context using its
+  &lt;code title=&quot;dom-CanvasProxy-setContext&quot;&gt;setContext()&lt;/code&gt; method.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-getContext&quot;&gt;&lt;code&gt;getContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;canvas&lt;/code&gt; element, when invoked,
-  must run the following steps:&lt;/p&gt;
+  &lt;p&gt;These three methods are mutually exclusive; calling any of the three makes the other two start
+  throwing &lt;code&gt;InvalidStateError&lt;/code&gt; exceptions when called.&lt;/p&gt;
 
-  &lt;ol&gt;
+  &lt;p&gt;Each rendering context has a &lt;dfn title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap
+  mode&lt;/dfn&gt;, which is one of &lt;dfn title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/dfn&gt;, &lt;dfn
+  title=&quot;concept-canvas-unbound&quot;&gt;unbound&lt;/dfn&gt;, or &lt;dfn title=&quot;concept-canvas-bound&quot;&gt;bound&lt;/dfn&gt;.
+  Initially, rendering contexts must be in the &lt;span title=&quot;concept-canvas-bound&quot;&gt;unbound&lt;/span&gt;
+  mode.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; be the first argument to the method.&lt;/p&gt;&lt;/li&gt;
+  &lt;hr&gt;
 
-   &lt;li&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-getContext&quot;&gt;&lt;code&gt;getContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;canvas&lt;/code&gt; element, when invoked,
+  must run the steps in the cell of the following table whose column header describes the
+  &lt;code&gt;canvas&lt;/code&gt; element's &lt;span title=&quot;concept-canvas-context-mode&quot;&gt;canvas context mode&lt;/span&gt;
+  and whose row header describes the method's first argument.&lt;/p&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; is not the name of a context supported by the user agent,
-    return null and abort these steps.&lt;/p&gt;
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt;
+     &lt;td&gt;
+     &lt;th&gt;&lt;span title=&quot;concept-canvas-none&quot;&gt;none&lt;/span&gt;
+     &lt;th&gt;&lt;span title=&quot;concept-canvas-direct-2d&quot;&gt;direct-2d&lt;/span&gt;
+     &lt;th&gt;&lt;span title=&quot;concept-canvas-direct-webgl&quot;&gt;direct-webgl&lt;/span&gt;
+     &lt;th&gt;&lt;span title=&quot;concept-canvas-indirect&quot;&gt;indirect&lt;/span&gt;
+     &lt;th&gt;&lt;span title=&quot;concept-canvas-proxied&quot;&gt;proxied&lt;/span&gt;
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;th&gt;&quot;&lt;dfn title=&quot;canvas-context-2d&quot;&gt;&lt;code&gt;2d&lt;/code&gt;&lt;/dfn&gt;&quot;
+     &lt;td&gt;
+      Set the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span title=&quot;concept-canvas-context-mode&quot;&gt;context
+      mode&lt;/span&gt; to &lt;span title=&quot;concept-canvas-direct-2d&quot;&gt;direct-2d&lt;/span&gt;; follow the &lt;span&gt;2D
+      context creation algorithm&lt;/span&gt; defined in the section below, passing it the
+      &lt;code&gt;canvas&lt;/code&gt; element, to obtain a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object; set
+      that object's &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt; to
+      &lt;span title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;, and return the
+      &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object
+     &lt;td&gt;
+      Return the same object as was return the last time the method was invoked with this same
+      argument.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception.
 
-    &lt;p class=&quot;note&quot;&gt;An example of this would be a user agent that theoretically supports the &quot;&lt;code
-    title=&quot;canvas-context-webgl&quot;&gt;webgl&lt;/code&gt;&quot; 3D context, in the case where the platform does not
-    have hardware support for OpenGL and the user agent does not have a software OpenGL
-    implementation. Despite the user agent recognising the &quot;&lt;code
-    title=&quot;canvas-context-webgl&quot;&gt;webgl&lt;/code&gt;&quot; name, it would return null at this step because that
-    context is not, in practice, supported at the time of the call.&lt;/p&gt;
+    &lt;tr&gt;
+     &lt;th&gt;&quot;&lt;dfn title=&quot;canvas-context-webgl&quot;&gt;&lt;code&gt;webgl&lt;/code&gt;&lt;/dfn&gt;&quot;, if the user agent supports the WebGL feature in its current configuration
+     &lt;td&gt;
+      Follow the instructions given in the WebGL specification's &lt;i&gt;Context Creation&lt;/i&gt; section to
+      obtain either a &lt;code&gt;WebGLRenderingContext&lt;/code&gt; or null; if the returned value is null,
+      then return null and abort these steps, otherwise, set the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span
+      title=&quot;concept-canvas-context-mode&quot;&gt;context mode&lt;/span&gt; to &lt;span
+      title=&quot;concept-canvas-direct-webgl&quot;&gt;direct-webgl&lt;/span&gt;, set the new
+      &lt;code&gt;WebGLRenderingContext&lt;/code&gt; object's &lt;span
+      title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt; to &lt;span
+      title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;, and return the &lt;code&gt;WebGLRenderingContext&lt;/code&gt;
+      object&amp;#x2021; &lt;a href=&quot;#refsWEBGL&quot;&gt;[WEBGL]&lt;/a&gt;
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return the same object as was return the last time the method was invoked with this same
+      argument.
+     &lt;td&gt;
+      Throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception.
 
-   &lt;/li&gt;
+    &lt;tr&gt;
+     &lt;th&gt;A vendor-specific extension*
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Behave as defined for the extension.
+     &lt;td&gt;
+      Throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception.
 
-   &lt;li&gt;&lt;p&gt;If the element has a &lt;span&gt;primary context&lt;/span&gt; and that context's entry in the &lt;a
-   href=&quot;<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&quot;&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt; does not
-   list &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; as a context with which it is compatible, return null and
-   abort these steps. &lt;a href=&quot;#refsWHATWGWIKI&quot;&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+    &lt;tr&gt;
+     &lt;th&gt;An unsupported value&amp;#x2020;
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Return null.
+     &lt;td&gt;
+      Throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception.
+     &lt;td&gt;
+      Throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception.
+    
+  &lt;/table&gt;
 
-   &lt;li&gt;&lt;p&gt;If the element does not have a &lt;span&gt;primary context&lt;/span&gt;, let the element's
-   &lt;span&gt;primary context&lt;/span&gt; be &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+  &lt;p class=&quot;tablenote&quot;&gt;&lt;small&gt;* Vendors may define experimental contexts using the syntax &lt;code&gt;&lt;var
+  title=&quot;&quot;&gt;vendorname&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;&lt;/code&gt;, for example,
+  &lt;code&gt;moz-3d&lt;/code&gt;.&lt;/small&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;code title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt; method has already been
-   invoked on this element for the same &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;, return the same object as was
-   returned that time, and abort these steps. The additional arguments are ignored.&lt;/p&gt;&lt;/li&gt;
+  &lt;p class=&quot;tablenote&quot;&gt;&lt;small&gt;&amp;#x2020; For example, the &quot;&lt;code
+  title=&quot;canvas-context-webgl&quot;&gt;webgl&lt;/code&gt;&quot; value in the case of a user agent having exhausted the
+  graphics hardware's abilities and having no software fallback implementation.&lt;/small&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;dfn title=&quot;getContext-return&quot;&gt;Return a new object for &lt;var
-   title=&quot;&quot;&gt;contextId&lt;/var&gt;&lt;/dfn&gt;, as defined by the specification given for &lt;var
-   title=&quot;&quot;&gt;contextId&lt;/var&gt;'s entry in the &lt;a
-   href=&quot;<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&quot;&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a
-   href=&quot;#refsWHATWGWIKI&quot;&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+  &lt;p class=&quot;tablenote&quot;&gt;&lt;small&gt;&amp;#x2021; The second (and subsequent) argument(s) to the method, if
+  any, are ignored in all cases except this one. See the WebGL specification for
+  details.&lt;/small&gt;&lt;/p&gt;
 
-  &lt;/ol&gt;
+  &lt;hr&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-supportsContext&quot;&gt;&lt;code&gt;supportsContext(&lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;canvas&lt;/code&gt; element, when
@@ -42477,46 +42630,43 @@
   the same object and with the same arguments would definitely return null at this time, and true
   otherwise.&lt;/p&gt;
 
-  &lt;p&gt;New context types may be registered in the &lt;a
-  href=&quot;<A HREF="http://wiki.whatwg.org/wiki/CanvasContexts">http://wiki.whatwg.org/wiki/CanvasContexts</A>&quot;&gt;WHATWG Wiki CanvasContexts page&lt;/a&gt;. &lt;a
-  href=&quot;#refsWHATWGWIKI&quot;&gt;[WHATWGWIKI]&lt;/a&gt;&lt;/p&gt;
+  &lt;hr&gt;
 
-  &lt;p&gt;Anyone is free to edit the WHATWG Wiki CanvasContexts page at any time to add a new context
-  type. These new context types must be specified with the following information:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-setContext&quot;&gt;&lt;code&gt;setContext(&lt;var
+  title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the &lt;code&gt;canvas&lt;/code&gt; element, when invoked, must
+  run following the steps:&lt;/p&gt;
 
-  &lt;dl&gt;
+  &lt;ol&gt;
 
-   &lt;dt&gt;Keyword&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span title=&quot;concept-canvas-context-mode&quot;&gt;canvas
+   context mode&lt;/span&gt; is neither &lt;span title=&quot;concept-canvas-none&quot;&gt;none&lt;/span&gt; nor &lt;span
+   title=&quot;concept-canvas-indirect&quot;&gt;indirect&lt;/span&gt;, throw an &lt;code&gt;InvalidStateError&lt;/code&gt; and
+   abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;The value of &lt;var title=&quot;&quot;&gt;contextID&lt;/var&gt; that will return the object for the new
-   API.&lt;/p&gt;&lt;/dd&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context
+   bitmap mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;, then throw an
+   &lt;code&gt;InvalidStateError&lt;/code&gt; and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context
+   bitmap mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-bound&quot;&gt;bound&lt;/span&gt;, then run &lt;var
+   title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-unbinding-steps&quot;&gt;unbinding steps&lt;/span&gt; and
+   set its &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context
+   bitmap mode&lt;/span&gt; to &lt;span title=&quot;concept-canvas-unbound&quot;&gt;unbound&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;dt&gt;Specification&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-binding-steps&quot;&gt;binding
+   steps&lt;/span&gt; to bind it to this &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;A link to a formal specification of the context type's API. It could be another page on
-   the Wiki, or a link to an external page. If the type does not have a formal specification, an
-   informal description can be substituted until such time as a formal specification is
-   available.&lt;/p&gt;&lt;/dd&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span title=&quot;concept-canvas-context-mode&quot;&gt;context
+   mode&lt;/span&gt; to &lt;span title=&quot;concept-canvas-indirect&quot;&gt;indirect&lt;/span&gt; and the &lt;var
+   title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap
+   mode&lt;/span&gt; to &lt;span title=&quot;concept-canvas-bound&quot;&gt;bound&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
+  &lt;/ol&gt;
 
-   &lt;dt&gt;Compatible with&lt;/dt&gt;
+  &lt;hr&gt;
 
-   &lt;dd&gt;&lt;p&gt;The list of context types that are compatible with this one (i.e. that operate on the same
-   underlying bitmap). This list must be transitive and symmetric; if one context type is defined as
-   compatible with another, then all types it is compatible with must be compatible with all types
-   the other is compatible with.&lt;/p&gt;&lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;p&gt;Vendors may also define experimental contexts using the syntax &lt;code&gt;&lt;var
-  title=&quot;&quot;&gt;vendorname&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;&lt;/code&gt;, for example, &lt;code&gt;moz-3d&lt;/code&gt;.
-  Such contexts should be registered in the WHATWG Wiki CanvasContexts page.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;hr&gt;
-
   &lt;dl class=&quot;domintro&quot;&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;url&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=&quot;dom-canvas-toDataURL&quot;&gt;toDataURL&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;, ... ] )&lt;/dt&gt;
@@ -42524,31 +42674,25 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns a &lt;span title=&quot;data protocol&quot;&gt;&lt;code
-    title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt; for the image in the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns a &lt;span title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt; for the image in
+    the canvas.&lt;/p&gt;
 
-    &lt;p&gt;The first argument, if provided, controls the type of the image
-    to be returned (e.g. PNG or JPEG). The default is &lt;code
-    title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given
-    type isn't supported. The other arguments are specific to the
-    type, and control the way that the image is generated, as given in
-    the table below.&lt;/p&gt;
+    &lt;p&gt;The first argument, if provided, controls the type of the image to be returned (e.g. PNG or
+    JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given type
+    isn't supported. The other arguments are specific to the type, and control the way that the
+    image is generated, as given &lt;a href=&quot;#canvas-serialization-arguments&quot;&gt;in the table
+    below&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;When trying to use types other than &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;,
-    authors can check if the image was really returned in the
-    requested format by checking to see if the returned string starts
-    with one of the exact strings &quot;&lt;code
-    title=&quot;&quot;&gt;data:image/png,&lt;/code&gt;&quot; or &quot;&lt;code
-    title=&quot;&quot;&gt;data:image/png;&lt;/code&gt;&quot;. If it does, the image is PNG,
-    and thus the requested type was not supported. (The one exception
-    to this is if the canvas has either no height or no width, in
-    which case the result might simply be &quot;&lt;code
-    title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot;.)&lt;/p&gt;
+    &lt;p&gt;When trying to use types other than &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;, authors can check if the image
+    was really returned in the requested format by checking to see if the returned string starts
+    with one of the exact strings &quot;&lt;code title=&quot;&quot;&gt;data:image/png,&lt;/code&gt;&quot; or &quot;&lt;code
+    title=&quot;&quot;&gt;data:image/png;&lt;/code&gt;&quot;. If it does, the image is PNG, and thus the requested type was
+    not supported. (The one exception to this is if the canvas has either no height or no width, in
+    which case the result might simply be &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot;.)&lt;/p&gt;
 
-    &lt;p&gt;The &lt;code title=&quot;dom-canvas-toDataURL&quot;&gt;toDataURL()&lt;/code&gt;
-    method returns the data at a resolution of 96dpi. The &lt;code
-    title=&quot;dom-canvas-toDataURLHD&quot;&gt;toDataURLHD()&lt;/code&gt; method returns
-    it at the native canvas bitmap resolution.&lt;/p&gt;
+    &lt;p&gt;The &lt;code title=&quot;dom-canvas-toDataURL&quot;&gt;toDataURL()&lt;/code&gt; method returns the data at a
+    resolution of 96dpi. The &lt;code title=&quot;dom-canvas-toDataURLHD&quot;&gt;toDataURLHD()&lt;/code&gt; method
+    returns it at the native canvas bitmap resolution.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -42557,21 +42701,18 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Creates a &lt;code&gt;Blob&lt;/code&gt; object representing a file
-    containing the image in the canvas, and invokes a callback with a
-    handle to that object.&lt;/p&gt;
+    &lt;p&gt;Creates a &lt;code&gt;Blob&lt;/code&gt; object representing a file containing the image in the canvas,
+    and invokes a callback with a handle to that object.&lt;/p&gt;
 
-    &lt;p&gt;The second argument, if provided, controls the type of the
-    image to be returned (e.g. PNG or JPEG). The default is &lt;code
-    title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given
-    type isn't supported. The other arguments are specific to the
-    type, and control the way that the image is generated, as given in
-    the table below.&lt;/p&gt;
+    &lt;p&gt;The second argument, if provided, controls the type of the image to be returned (e.g. PNG or
+    JPEG). The default is &lt;code title=&quot;&quot;&gt;image/png&lt;/code&gt;; that type is also used if the given type
+    isn't supported. The other arguments are specific to the type, and control the way that the
+    image is generated, as given &lt;a href=&quot;#canvas-serialization-arguments&quot;&gt;in the table
+    below&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;The &lt;code title=&quot;dom-canvas-toBlob&quot;&gt;toBlob()&lt;/code&gt; method
-    provides the data at a resolution of 96dpi. The &lt;code
-    title=&quot;dom-canvas-toBlobHD&quot;&gt;toBlobHD()&lt;/code&gt; method provides it
-    at the native canvas bitmap resolution.&lt;/p&gt;
+    &lt;p&gt;The &lt;code title=&quot;dom-canvas-toBlob&quot;&gt;toBlob()&lt;/code&gt; method provides the data at a resolution
+    of 96dpi. The &lt;code title=&quot;dom-canvas-toBlobHD&quot;&gt;toBlobHD()&lt;/code&gt; method provides it at the
+    native canvas bitmap resolution.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -42579,212 +42720,251 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-canvas-toDataURL&quot;&gt;&lt;code&gt;toDataURL()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
-  title=&quot;dom-canvas-toDataURLHD&quot;&gt;&lt;code&gt;toDataURLHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods must run the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-toDataURL&quot;&gt;&lt;code&gt;toDataURL()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
+  title=&quot;dom-canvas-toDataURLHD&quot;&gt;&lt;code&gt;toDataURLHD()&lt;/code&gt;&lt;/dfn&gt; methods must run the following
+  steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
 &lt;!--ADD-TOPIC:Security--&gt;
-   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt;
-   flag is set to false, throw a &lt;code&gt;SecurityError&lt;/code&gt; exception
-   and abort these steps.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's bitmap's &lt;span
+   title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag is set to false, throw a
+   &lt;code&gt;SecurityError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
 
-   &lt;li&gt;&lt;p&gt;If the canvas has no pixels (i.e. either its horizontal
-   dimension or its vertical dimension is zero) then return the string
-   &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot; and abort these steps. (This is the
-   shortest &lt;span title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt;
-   URL&lt;/span&gt;; it represents the empty string in a &lt;code
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's bitmap has no pixels (i.e. either its horizontal
+   dimension or its vertical dimension is zero) then return the string &quot;&lt;code
+   title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot; and abort these steps. (This is the shortest &lt;span title=&quot;data
+   protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt;; it represents the empty string in a &lt;code
    title=&quot;&quot;&gt;text/plain&lt;/code&gt; resource.)&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;file&lt;/var&gt; be &lt;span&gt;a serialization of the
-   image as a file&lt;/span&gt;, using the method's arguments (if any) as
-   the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var
-   title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the &lt;code
-   title=&quot;dom-canvas-toDataURLHD&quot;&gt;toDataURLHD()&lt;/code&gt; method, and not
-   otherwise.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;file&lt;/var&gt; be &lt;span title=&quot;a serialization of the bitmap as a file&quot;&gt;a
+   serialization of the &lt;code&gt;canvas&lt;/code&gt; element's bitmap as a file&lt;/span&gt;, using the method's
+   arguments (if any) as the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt;
+   flag set if the method is the &lt;code title=&quot;dom-canvas-toDataURLHD&quot;&gt;toDataURLHD()&lt;/code&gt; method,
+   and not otherwise.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return a &lt;span title=&quot;data protocol&quot;&gt;&lt;code
-   title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt; representing &lt;var
-   title=&quot;&quot;&gt;file&lt;/var&gt;. &lt;a href=&quot;#refsRFC2397&quot;&gt;[RFC2397]&lt;/a&gt;&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Return a &lt;span title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt; representing
+   &lt;var title=&quot;&quot;&gt;file&lt;/var&gt;. &lt;a href=&quot;#refsRFC2397&quot;&gt;[RFC2397]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;!-- should we explicitly require the URL to be base64-encoded and
-   not have any parameters, to ensure the same exact URL is generated
-   in each browser? --&gt;
+   &lt;!-- should we explicitly require the URL to be base64-encoded and not have any parameters, to
+   ensure the same exact URL is generated in each browser? --&gt;
 
   &lt;/ol&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-toBlob&quot;&gt;&lt;code&gt;toBlob()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn title=&quot;dom-canvas-toBlobHD&quot;&gt;&lt;code&gt;toBlobHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods must run the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-toBlob&quot;&gt;&lt;code&gt;toBlob()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
+  title=&quot;dom-canvas-toBlobHD&quot;&gt;&lt;code&gt;toBlobHD()&lt;/code&gt;&lt;/dfn&gt; methods must run the following
+  steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
 &lt;!--ADD-TOPIC:Security--&gt;
-   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt;
-   flag is set to false, throw a &lt;code&gt;SecurityError&lt;/code&gt; exception
-   and abort these steps.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's bitmap's &lt;span
+   title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag is set to false, throw a
+   &lt;code&gt;SecurityError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; be the first
-   argument.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; be the first argument.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the second and
-   subsequent arguments to the method, if any.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the second and subsequent arguments to the method, if
+   any.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If the canvas has no pixels (i.e. either its horizontal
-    dimension or its vertical dimension is zero) then let &lt;var
-    title=&quot;&quot;&gt;result&lt;/var&gt; be null.&lt;/p&gt;
+    &lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's bitmap has no pixels (i.e. either its horizontal
+    dimension or its vertical dimension is zero) then let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be null.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be a
-    &lt;code&gt;Blob&lt;/code&gt; object representing &lt;span&gt;a serialization of the
-    image as a file&lt;/span&gt;, using &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and
-    with the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the
-    &lt;code title=&quot;dom-canvas-toBlobHD&quot;&gt;toBlobHD()&lt;/code&gt; method, and
-    not otherwise. &lt;a href=&quot;#refsFILEAPI&quot;&gt;[FILEAPI]&lt;/a&gt; &lt;/p&gt;
+    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be a &lt;code&gt;Blob&lt;/code&gt; object representing &lt;span
+    title=&quot;a serialization of the bitmap as a file&quot;&gt;a serialization of the &lt;code&gt;canvas&lt;/code&gt;
+    element's bitmap as a file&lt;/span&gt;, using &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and with the &lt;var
+    title=&quot;&quot;&gt;native&lt;/var&gt; flag set if the method is the &lt;code
+    title=&quot;dom-canvas-toBlobHD&quot;&gt;toBlobHD()&lt;/code&gt; method, and not otherwise. &lt;a
+    href=&quot;#refsFILEAPI&quot;&gt;[FILEAPI]&lt;/a&gt; &lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return, but continue running these steps
-   asynchronously.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; is null, abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; is null, abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke the
-   &lt;code&gt;FileCallback&lt;/code&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with &lt;var
-   title=&quot;&quot;&gt;result&lt;/var&gt; as its argument. The &lt;span&gt;task source&lt;/span&gt;
-   for this task is the &lt;dfn&gt;canvas blob serialization task
-   source&lt;/dfn&gt;. &lt;a
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke the &lt;code&gt;FileCallback&lt;/code&gt; &lt;var
+   title=&quot;&quot;&gt;callback&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; as its argument. The &lt;span&gt;task
+   source&lt;/span&gt; for this task is the &lt;dfn&gt;canvas blob serialization task source&lt;/dfn&gt;. &lt;a
    href=&quot;#refsFILESYSTEMAPI&quot;&gt;[FILESYSTEMAPI]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
-  &lt;p&gt;When a user agent is to create &lt;dfn&gt;a serialization of the image
-  as a file&lt;/dfn&gt;, optionally with some given &lt;var
-  title=&quot;&quot;&gt;arguments&lt;/var&gt;, and optionally with a &lt;var
-  title=&quot;&quot;&gt;native&lt;/var&gt; flag set, it must create an image file in the
-  format given by the first value of &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;,
-  or, if there are no &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, in the PNG
-  format. &lt;a href=&quot;#refsPNG&quot;&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
+  &lt;/div&gt;
+  &lt;!--REMOVE-TOPIC:DOM APIs--&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag is set, or if the canvas
-  bitmap has one pixel per coordinate space unit, then the image file
-  must have the same pixel data (before compression, if applicable) as
-  the canvas bitmap, and if the file format used supports encoding
-  resolution metadata, the resolution of the bitmap (device pixels per
-  coordinate space units being interpreted as image pixels per CSS
-  pixel) must be given as well.&lt;/p&gt;
 
-  &lt;p&gt;Otherwise, the image file's pixel data must be the canvas
-  bitmap's pixel data scaled to one image pixel per coordinate space
-  unit, and if the file format used supports encoding resolution
-  metadata, the resolution must be given as 96dpi (one image pixel per
-  CSS pixel).&lt;/p&gt;
+  &lt;!--ADD-TOPIC:Workers--&gt;
+  &lt;h5&gt;Proxying canvases to workers&lt;/h5&gt;
 
-  &lt;p&gt;If &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; is not empty, the first value
-  must be interpreted as a &lt;span title=&quot;MIME type&quot;&gt;MIME type&lt;/span&gt;
-  giving the format to use. If the type has any parameters, it must be
-  treated as not supported.&lt;/p&gt;
+  &lt;p&gt;Since DOM nodes cannot be accessed across worker boundaries, a proxy object is needed to enable
+  workers to render to &lt;code&gt;canvas&lt;/code&gt; elements in &lt;code&gt;Document&lt;/code&gt;s.&lt;/p&gt;
 
-  &lt;p class=&quot;example&quot;&gt;For example, the value &quot;&lt;code&gt;image/png&lt;/code&gt;&quot;
-  would mean to generate a PNG image, the value
-  &quot;&lt;code&gt;image/jpeg&lt;/code&gt;&quot; would mean to generate a JPEG image, and
-  the value &quot;&lt;code&gt;image/svg+xml&lt;/code&gt;&quot; would mean to generate an SVG
-  image (which would probably require that the implementation actually
-  keep enough information to reliably render an SVG image from the
-  canvas).&lt;/p&gt;
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;CanvasProxy&lt;/dfn&gt; {
+  void &lt;span title=&quot;dom-CanvasProxy-setContext&quot;&gt;setContext&lt;/span&gt;(&lt;span&gt;RenderingContext&lt;/span&gt; context);
+};
+&lt;span&gt;CanvasProxy&lt;/span&gt; implements &lt;span&gt;Transferable&lt;/span&gt;;&lt;/pre&gt;
 
-  &lt;p&gt;User agents must support PNG (&quot;&lt;code&gt;image/png&lt;/code&gt;&quot;). User
-  agents may support other types. If the user agent does not support
-  the requested type, it must create the file using the PNG format. &lt;a
-  href=&quot;#refsPNG&quot;&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
+  &lt;dl class=&quot;domintro&quot;&gt;
 
-  &lt;p&gt;User agents must &lt;span title=&quot;converted to ASCII
-  lowercase&quot;&gt;convert the provided type to ASCII lowercase&lt;/span&gt;
-  before establishing if they support that type.&lt;/p&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvasProxy&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=&quot;dom-canvas-transferControlToProxy&quot;&gt;transferControlToProxy&lt;/code&gt;()&lt;/dt&gt;
 
-  &lt;p&gt;For image types that do not support an alpha channel, the
-  serialized image must be the canvas image composited onto a solid
-  black background using the source-over operator.&lt;/p&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;If the first argument in &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; gives a
-  type corresponding to one of the types given in the first column of
-  the following table, and the user agent supports that type, then the
-  subsequent arguments, if any, must be treated as described in the
-  second cell of that row.&lt;/p&gt;
+    &lt;p&gt;Returns a &lt;code&gt;CanvasProxy&lt;/code&gt; object that can be used to transfer control for this
+    canvas over to another document (e.g. an &lt;code&gt;iframe&lt;/code&gt; from another &lt;span&gt;origin&lt;/span&gt;)
+    or to a worker.&lt;/p&gt;
 
-  &lt;/div&gt;
+    &lt;p&gt;Throws an &lt;code&gt;InvalidStateError&lt;/code&gt; exception if the &lt;code
+    title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt; or &lt;code
+    title=&quot;dom-canvas-setContext&quot;&gt;setContext()&lt;/code&gt; methods have been used.&lt;/p&gt;
 
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt; &lt;th&gt; Type &lt;th&gt; Other arguments &lt;th&gt; Reference
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt; &lt;code&gt;image/jpeg&lt;/code&gt;
-     &lt;td&gt; The second argument&lt;span class=&quot;impl&quot;&gt;, if it&lt;/span&gt; is a
-     number in the range 0.0 to 1.0 inclusive&lt;span class=&quot;impl&quot;&gt;, must
-     be&lt;/span&gt; treated as the desired quality level. &lt;span
-     class=&quot;impl&quot;&gt;If it is not a number or is outside that range, the
-     user agent must use its default value, as if the argument had
-     been omitted.&lt;/span&gt;
-     &lt;td&gt; &lt;a href=&quot;#refsJPEG&quot;&gt;[JPEG]&lt;/a&gt;
-  &lt;/table&gt;
+   &lt;/dd&gt;
 
-  &lt;div class=&quot;impl&quot;&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;canvasProxy&lt;/var&gt; . &lt;code title=&quot;dom-CanvasProxy-setContext&quot;&gt;setContext&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/dt&gt;
 
-  &lt;p&gt;For the purposes of these rules, an argument is considered to be
-  a number if it is converted to an IDL double value by the rules for
-  handling arguments of type &lt;code title=&quot;&quot;&gt;any&lt;/code&gt; in the Web IDL
-  specification. &lt;a href=&quot;#refsWEBIDL&quot;&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;Other arguments must be ignored and must not cause the user agent
-  to throw an exception. A future version of this specification will
-  probably define other parameters to be passed to these methods to
-  allow authors to more carefully control compression settings, image
-  metadata, etc.&lt;/p&gt;
+    &lt;p&gt;Sets the &lt;code&gt;CanvasProxy&lt;/code&gt; object's &lt;code&gt;canvas&lt;/code&gt; element's rendering context to
+    the given object.&lt;/p&gt;
 
-  &lt;/div&gt;
-  &lt;!--REMOVE-TOPIC:DOM APIs--&gt;
+    &lt;p&gt;Throws an &lt;code&gt;InvalidStateError&lt;/code&gt; exception if the &lt;code&gt;CanvasProxy&lt;/code&gt; has been
+    &lt;span title=&quot;transfer a Transferable object&quot;&gt;transfered&lt;/span&gt;.&lt;/p&gt;
 
+   &lt;/dd&gt;
 
-  &lt;div data-component=&quot;HTML Canvas 2D Context (editor: Ian Hickson)&quot;&gt;
+  &lt;/dl&gt;
 
-  &lt;h5 id=&quot;2dcontext&quot;&gt;The 2D context&lt;/h5&gt;
+  &lt;hr&gt;
 
-  &lt;!-- v2: we're on v5. suggestions for subsequent versions are marked v6, v7, v8. --&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-transferControlToProxy&quot;&gt;&lt;code&gt;transferControlToProxy()&lt;/code&gt;&lt;/dfn&gt;
+  method of the &lt;code&gt;canvas&lt;/code&gt; element, when invoked, must run following the steps:&lt;/p&gt;
 
-  &lt;p&gt;This specification defines the &lt;dfn
-  title=&quot;canvas-context-2d&quot;&gt;&lt;code&gt;2d&lt;/code&gt;&lt;/dfn&gt; context type, whose
-  API is implemented using the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt;
-  interface.&lt;/p&gt;
+  &lt;ol&gt;
 
-  &lt;div class=&quot;impl&quot;&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span title=&quot;concept-canvas-context-mode&quot;&gt;canvas
+   context mode&lt;/span&gt; is not &lt;span title=&quot;concept-canvas-none&quot;&gt;none&lt;/span&gt;, throw an
+   &lt;code&gt;InvalidStateError&lt;/code&gt; and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;p&gt;When the &lt;code title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt;
-  method of a &lt;code&gt;canvas&lt;/code&gt; element is to &lt;span
-  title=&quot;getContext-return&quot;&gt;return a new object for the &lt;var
-  title=&quot;&quot;&gt;contextId&lt;/var&gt;&lt;/span&gt; &lt;code
-  title=&quot;canvas-context-2d&quot;&gt;2d&lt;/code&gt;, the user agent must return a
-  new &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object. Any additional
-  arguments are ignored.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span title=&quot;concept-canvas-context-mode&quot;&gt;context
+   mode&lt;/span&gt; to &lt;span title=&quot;concept-canvas-proxied&quot;&gt;proxied&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Return a &lt;code&gt;CanvasProxy&lt;/code&gt; object bound to this &lt;code&gt;canvas&lt;/code&gt;
+   element.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;A &lt;code&gt;CanvasProxy&lt;/code&gt; object can be &lt;span
+  title=&quot;concept-transferable-neutered&quot;&gt;neutered&lt;/span&gt; (like any &lt;code&gt;Transferable&lt;/code&gt; object),
+  meaning it can no longer be &lt;span title=&quot;transfer a Transferable object&quot;&gt;transferred&lt;/span&gt;, and
+  can be &lt;dfn title=&quot;concept-CanvasProxy-disabled&quot;&gt;disabled&lt;/dfn&gt;, meaning it can no longer be bound
+  to rendering contexts. When first created, a &lt;code&gt;CanvasProxy&lt;/code&gt; object must be neither.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;CanvasProxy&lt;/code&gt; is created with a link to a &lt;code&gt;canvas&lt;/code&gt; element. A
+  &lt;code&gt;CanvasProxy&lt;/code&gt; object that has not been &lt;span
+  title=&quot;concept-CanvasProxy-disabled&quot;&gt;disabled&lt;/span&gt; must have a strong reference to its canvas
+  element.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-CanvasProxy-setContext&quot;&gt;&lt;code&gt;setContext(&lt;var
+  title=&quot;&quot;&gt;context&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of &lt;code&gt;CanvasProxy&lt;/code&gt; objects, when invoked,
+  must run following the steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;CanvasProxy&lt;/code&gt; object has been &lt;span
+   title=&quot;concept-CanvasProxy-disabled&quot;&gt;disabled&lt;/span&gt;, throw an &lt;code&gt;InvalidStateError&lt;/code&gt; and
+   abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;CanvasProxy&lt;/code&gt; object has not been &lt;span
+   title=&quot;concept-transferable-neutered&quot;&gt;neutered&lt;/span&gt;, then &lt;span
+   title=&quot;concept-transferable-neutered&quot;&gt;neuter&lt;/span&gt; it.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context
+   bitmap mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;, then throw an
+   &lt;code&gt;InvalidStateError&lt;/code&gt; and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context
+   bitmap mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-bound&quot;&gt;bound&lt;/span&gt;, then run &lt;var
+   title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-unbinding-steps&quot;&gt;unbinding steps&lt;/span&gt; and
+   set its &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context
+   bitmap mode&lt;/span&gt; to &lt;span title=&quot;concept-canvas-unbound&quot;&gt;unbound&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Run &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span title=&quot;concept-canvas-binding-steps&quot;&gt;binding
+   steps&lt;/span&gt; to bind it to this &lt;code&gt;CanvasProxy&lt;/code&gt; object's &lt;code&gt;canvas&lt;/code&gt;
+   element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;'s &lt;span
+   title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt; to &lt;span
+   title=&quot;concept-canvas-bound&quot;&gt;bound&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p id=&quot;transferCanvasProxy&quot;&gt;To &lt;span title=&quot;transfer a Transferable object&quot;&gt;transfer&lt;/span&gt; a
+  &lt;code&gt;CanvasProxy&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; to a new owner &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;,
+  a user agent must create a new &lt;code&gt;CanvasProxy&lt;/code&gt; object linked to the same
+  &lt;code&gt;canvas&lt;/code&gt; element as &lt;var title=&quot;&quot;&gt;old&lt;/var&gt;, thus obtaining &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;,
+  must &lt;span title=&quot;concept-Transferable-neutered&quot;&gt;neuter&lt;/span&gt; and &lt;span
+  title=&quot;concept-CanvasProxy-disabled&quot;&gt;disable&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;old&lt;/var&gt; object, and must
+  finally return &lt;var title=&quot;&quot;&gt;new&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;Here is a clock implemented on a worker. First, the main page:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;!DOCTYPE HTML&gt;
+&lt;title&gt;Clock&lt;/title&gt;
+&lt;canvas&gt;&lt;/canvas&gt; &lt;!-- defaults to 300x150 --&gt;
+&lt;script&gt;
+  var canvas = document.getElementsByTagName('canvas')[0];
+  var proxy = canvas.transferControlToProxy());
+  var worker = new Worker('clock.js');
+  worker.postMessage(proxy, [proxy]);
+&lt;/script&gt;&lt;/pre&gt;
+
+   &lt;p&gt;Second, the worker:&lt;/p&gt;
+
+   &lt;pre&gt;onmessage = function (event) {
+  var context = new CanvasRenderingContext2d();
+  event.data.setContext(context); // event.data is the CanvasProxy object
+  setInterval(function () {
+    context.clearRect(0, 0, context.width, context.height);
+    context.fillText(0, 100, new Date());
+    context.commit();
+  }, 1000);
+};&lt;/pre&gt;
+
   &lt;/div&gt;
 
-  &lt;p&gt;The 2D context represents a flat Cartesian surface whose origin
-  (0,0) is at the top left corner, with the coordinate space having
-  &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; values increasing when going right, and &lt;var
-  title=&quot;&quot;&gt;y&lt;/var&gt; values increasing when going down.&lt;/p&gt;
+  &lt;!--REMOVE-TOPIC:Workers--&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
 
+  &lt;h5 id=&quot;2dcontext&quot;&gt;The 2D rendering context&lt;/h5&gt;
+
+  &lt;!-- v2: we're on v5. suggestions for subsequent versions are marked v6, v7, v8. --&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;typedef (&lt;span&gt;HTMLImageElement&lt;/span&gt; or
+         &lt;span&gt;HTMLVideoElement&lt;/span&gt; or
+         &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or
+         &lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; or
+         &lt;span&gt;ImageBitmap&lt;/span&gt;) &lt;dfn&gt;CanvasImageSource&lt;/dfn&gt;;
+
+[&lt;span title=&quot;dom-context-2d&quot;&gt;Constructor&lt;/span&gt;(optional unsigned long width, unsigned long height)]
+interface &lt;dfn&gt;CanvasRenderingContext2D&lt;/dfn&gt; {
+
   // back-reference to the canvas
   readonly attribute &lt;span&gt;HTMLCanvasElement&lt;/span&gt; &lt;span title=&quot;dom-context-2d-canvas&quot;&gt;canvas&lt;/span&gt;;
 
+  // canvas dimensions
+           attribute unsigned long &lt;span title=&quot;dom-context-2d-width&quot;&gt;width&lt;/span&gt;;
+           attribute unsigned long &lt;span title=&quot;dom-context-2d-height&quot;&gt;height&lt;/span&gt;;
+
+  // for contexts that aren't directly &lt;span title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt; to a specific canvas
+  void &lt;span title=&quot;dom-context-2d-commit&quot;&gt;commit&lt;/span&gt;(); // push the image to the &lt;span&gt;output bitmap&lt;/span&gt;
+
   // state
   void &lt;span title=&quot;dom-context-2d-save&quot;&gt;save&lt;/span&gt;(); // push state on state stack
   void &lt;span title=&quot;dom-context-2d-restore&quot;&gt;restore&lt;/span&gt;(); // pop state stack and restore state
@@ -42830,7 +43010,7 @@
            attribute (DOMString or CanvasGradient or CanvasPattern) &lt;span title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/span&gt;; // (default black)
   &lt;span&gt;CanvasGradient&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createLinearGradient&quot;&gt;createLinearGradient&lt;/span&gt;(double x0, double y0, double x1, double y1);
   &lt;span&gt;CanvasGradient&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createRadialGradient&quot;&gt;createRadialGradient&lt;/span&gt;(double x0, double y0, double r0, double x1, double y1, double r1);
-  &lt;span&gt;CanvasPattern&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern&lt;/span&gt;((&lt;span&gt;HTMLImageElement&lt;/span&gt; or &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or &lt;span&gt;HTMLVideoElement&lt;/span&gt;) image, DOMString repetition);
+  &lt;span&gt;CanvasPattern&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern&lt;/span&gt;(&lt;span&gt;CanvasImageSource&lt;/span&gt; image, DOMString repetition);
 &lt;!--
   // v8 we received one request from Ralf Richard G&oml;bel for a new kind of pattern: a hatch.
   // basically it would be a series of dash styles, angles, line widths, and offsets
@@ -42872,9 +43052,9 @@
   &lt;span&gt;TextMetrics&lt;/span&gt; &lt;span title=&quot;dom-context-2d-measureText&quot;&gt;measureText&lt;/span&gt;(DOMString text);
 
   // drawing images
-  void &lt;span title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/span&gt;((&lt;span&gt;HTMLImageElement&lt;/span&gt; or &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or &lt;span&gt;HTMLVideoElement&lt;/span&gt;) image, unrestricted double dx, unrestricted double dy);
-  void &lt;span title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/span&gt;((&lt;span&gt;HTMLImageElement&lt;/span&gt; or &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or &lt;span&gt;HTMLVideoElement&lt;/span&gt;) image, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
-  void &lt;span title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/span&gt;((&lt;span&gt;HTMLImageElement&lt;/span&gt; or &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or &lt;span&gt;HTMLVideoElement&lt;/span&gt;) image, unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
+  void &lt;span title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/span&gt;(&lt;span&gt;CanvasImageSource&lt;/span&gt; image, unrestricted double dx, unrestricted double dy);
+  void &lt;span title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/span&gt;(&lt;span&gt;CanvasImageSource&lt;/span&gt; image, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
+  void &lt;span title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/span&gt;(&lt;span&gt;CanvasImageSource&lt;/span&gt; image, unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
 
   // hit regions
   void &lt;span title=&quot;dom-context-2d-addHitRegion&quot;&gt;addHitRegion&lt;/span&gt;(&lt;span&gt;HitRegionOptions&lt;/span&gt; options);
@@ -42911,6 +43091,7 @@
            attribute DOMString &lt;span title=&quot;dom-context-2d-font&quot;&gt;font&lt;/span&gt;; // (default 10px sans-serif)
            attribute DOMString &lt;span title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/span&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
            attribute DOMString &lt;span title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/span&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+           attribute DOMString &lt;span title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/span&gt;; // &quot;ltr&quot;, &quot;rtl&quot;&lt;!--, &quot;auto&quot;--&gt;, &quot;inherit&quot; (default: &quot;inherit&quot;)
 };
 
 [NoInterfaceObject]
@@ -42999,26 +43180,394 @@
 
   &lt;dl class=&quot;domintro&quot;&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; . &lt;code title=&quot;dom-canvas-getContext&quot;&gt;getContext&lt;/code&gt;('2d')&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object that is permanently bound to a particular &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; = new &lt;code title=&quot;dom-context-2d&quot;&gt;CanvasRenderingContext2D&lt;/code&gt;( [ &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns an unbound &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object with an implied bitmap with
+    the given dimensions in CSS pixels (300x150, if the arguments are omitted).&lt;/p&gt;
+
+   &lt;/dd&gt;
+
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-canvas&quot;&gt;canvas&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;
+    &lt;p&gt;Returns the &lt;code&gt;canvas&lt;/code&gt; element, if the rendering context was obtained using the
+    &lt;code title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt; method.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-width&quot;&gt;width&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-height&quot;&gt;height&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the dimensions of the bitmap, in CSS pixels.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to update the bitmap's dimensions. If the rendering context is bound to a canvas,
+    this will also update the canvas' intrinsic dimensions.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-commit&quot;&gt;commit&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the rendering context is bound to a &lt;code&gt;canvas&lt;/code&gt;, display the current frame.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-canvas&quot;&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the &lt;code&gt;canvas&lt;/code&gt; element that the
-  context paints on.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object can be obtained in two ways: the &lt;code
+  title=&quot;dom-canvas-getContext&quot;&gt;getContext()&lt;/code&gt; method on a &lt;code&gt;canvas&lt;/code&gt; element (which
+  invokes the &lt;span&gt;2D context creation algorithm&lt;/span&gt;), and the &lt;code
+  title=&quot;dom-context-2d&quot;&gt;CanvasRenderingContext2D()&lt;/code&gt; constructor.&lt;/p&gt;
 
-  &lt;p&gt;Except where otherwise specified, for the 2D context interface,
-  &lt;strong&gt;any method call with a numeric argument whose value is
-  infinite or a NaN value must be ignored&lt;/strong&gt;.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object has a &lt;dfn&gt;scratch bitmap&lt;/dfn&gt; and can be bound
+  to an &lt;dfn&gt;output bitmap&lt;/dfn&gt;. These are initialized when the object is created, and can be
+  subsequently adjusted when the rendering context is &lt;span
+  title=&quot;concept-canvas-binding-steps&quot;&gt;bound&lt;/span&gt; or &lt;span
+  title=&quot;concept-canvas-unbinding-steps&quot;&gt;unbound&lt;/span&gt;. In some cases, these bitmaps are the same
+  underlying bitmap. In general, the &lt;span&gt;scratch bitmap&lt;/span&gt; is what scripts interact with, and
+  the &lt;span&gt;output bitmap&lt;/span&gt; is what is being displayed. These bitmaps always have the same
+  dimensions.&lt;/p&gt;
 
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;p&gt;Each such bitmap has an &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag,
+  which can be set to true or false. Initially, when one of these bitmaps is created, its &lt;span
+  title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag must be set to true.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+  &lt;p&gt;These bitmaps also have a &lt;span&gt;hit region list&lt;/span&gt;, which is described in a later section.
+  Initially, this list is empty. &lt;span title=&quot;scratch bitmap&quot;&gt;Scratch bitmaps&lt;/span&gt; also have a
+  &lt;dfn&gt;list of pending interface actions&lt;/dfn&gt;, which can contain instructions to draw the user's
+  attention to a location on the bitmap, and instructions to scroll to a location on the bitmap.
+  Initially, this list is also empty.&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;2D context creation algorithm&lt;/dfn&gt;, which is passed a &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; (a
+  &lt;code&gt;canvas&lt;/code&gt; element), consists of running the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Initialize its &lt;code title=&quot;dom-context-2d-canvas&quot;&gt;canvas&lt;/code&gt; attribute to point to
+   &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;output bitmap&lt;/span&gt; and
+   &lt;span&gt;scratch bitmap&lt;/span&gt; both be the same bitmap as &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap (so
+   that they are shared).&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span title=&quot;concept-canvas-set-bitmap-dimensions&quot;&gt;Set bitmap dimensions&lt;/span&gt; to the
+   numeric values of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s &lt;code title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt; and
+   &lt;code title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt; content attributes.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the new &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d&quot;&gt;&lt;code&gt;CanvasRenderingContext2D()&lt;/code&gt;&lt;/dfn&gt; constructor, when
+  invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Initialize its &lt;code title=&quot;dom-context-2d-canvas&quot;&gt;canvas&lt;/code&gt; attribute to
+   null.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt; be
+   a new bitmap.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the constructor was called with arguments, let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var
+   title=&quot;&quot;&gt;height&lt;/var&gt; be the first and second arguments, respectively. Otherwise, let &lt;var
+   title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; be 300 and 150, respectively.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span title=&quot;concept-canvas-set-bitmap-dimensions&quot;&gt;Set bitmap dimensions&lt;/span&gt; to &lt;var
+   title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the new &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object have no &lt;span&gt;output
+   bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+&lt;!--
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Start autocommitting the scratch bitmap&lt;/span&gt; for the new
+   &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the new &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;When the user agent is required to &lt;dfn&gt;commit the scratch bitmap&lt;/dfn&gt; for a rendering
+  context, it must run the following steps:
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;bitmap copy&lt;/var&gt; be a copy of the rendering context's &lt;span&gt;scratch
+   bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin-clean flag copy&lt;/var&gt; be a copy of the rendering context's
+   &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt;
+   flag.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;hit region list copy&lt;/var&gt; be a copy of the rendering context's
+   &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;hit region list&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list of pending interface actions copy&lt;/var&gt; be a copy of the rendering
+   context's &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;list of pending interface actions&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Empty the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;list of pending interface actions&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the rendering context has no &lt;span&gt;output bitmap&lt;/span&gt;, abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt; be the rendering context's &lt;span&gt;output
+   bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; from the &lt;span&gt;canvas updating task source&lt;/span&gt; of the
+    &lt;span&gt;output bitmap&lt;/span&gt;'s &lt;code&gt;canvas&lt;/code&gt; element's &lt;span&gt;event loop&lt;/span&gt; to perform
+    the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;bitmap
+     copy&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt;'s &lt;span
+     title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag with &lt;var title=&quot;&quot;&gt;origin-clean
+     flag copy&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;Overwrite &lt;var title=&quot;&quot;&gt;output bitmap&lt;/var&gt;'s &lt;span&gt;hit region list&lt;/span&gt; with &lt;var
+     title=&quot;&quot;&gt;hit region list copy&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Follow the directions in the &lt;var title=&quot;&quot;&gt;list of pending interface actions
+     copy&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;canvas updating task source&lt;/dfn&gt; is just used for the algorithm above.&lt;/p&gt;
+
+&lt;!--(right now we're requiring commit())
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;start autocommitting the scratch bitmap&lt;/dfn&gt; for a rendering
+  context, it must asynchronously start running the following algorithm. This algorithm interacts
+  closely with the &lt;span&gt;event loop&lt;/span&gt; mechanism; in particular, it has a &lt;span&gt;synchronous
+  section&lt;/span&gt; (which is triggered as part of the &lt;span&gt;event loop&lt;/span&gt; algorithm). The steps in
+  that section are marked with &amp;#x231B;.&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Top&lt;/i&gt;: &lt;span&gt;Await a stable state&lt;/span&gt;. The &lt;span&gt;synchronous section&lt;/span&gt;
+   consists of the following steps. (The steps in the &lt;span&gt;synchronous section&lt;/span&gt; are marked
+   with &amp;#x231B;.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&amp;#x231B; &lt;span&gt;Commit the scratch bitmap&lt;/span&gt; for the rendering context.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;End the &lt;span&gt;synchronous section&lt;/span&gt;, continuing the remaining steps
+   asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;i&gt;top&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+--&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-commit&quot;&gt;&lt;code&gt;commit()&lt;/code&gt;&lt;/dfn&gt; method must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the rendering context's &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap
+   mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-bound&quot;&gt;fixed&lt;/span&gt;, throw an
+   &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Commit the scratch bitmap&lt;/span&gt; for the rendering context.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The &lt;span&gt;scratch bitmap&lt;/span&gt; is only &lt;span title=&quot;commit the scratch
+  bitmap&quot;&gt;committed&lt;/span&gt; when the &lt;code title=&quot;dom-context-2d-commit&quot;&gt;commit()&lt;/code&gt; method is
+  called. (This doesn't matter for &lt;code&gt;canvas&lt;/code&gt; elements in &lt;span
+  title=&quot;concept-canvas-direct-2d&quot;&gt;direct-2d&lt;/span&gt; mode, since there the &lt;span&gt;scratch
+  bitmap&lt;/span&gt; is also the &lt;code&gt;canvas&lt;/code&gt; element's bitmap so every drawing operation is
+  immediately drawn.)&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;When the user agent is to &lt;dfn title=&quot;concept-canvas-set-bitmap-dimensions&quot;&gt;set bitmap
+  dimensions&lt;/dfn&gt; to &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;, it must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Reset the rendering context to its default state&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;hit region list&lt;/span&gt; and its &lt;span&gt;list of
+   pending interface actions&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Resize the &lt;span&gt;scratch bitmap&lt;/span&gt; to the new &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var
+   title=&quot;&quot;&gt;height&lt;/var&gt; and clear it to fully transparent black.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the rendering context has an &lt;span&gt;output bitmap&lt;/span&gt;, and the &lt;span&gt;scratch
+   bitmap&lt;/span&gt; is a different bitmap than the &lt;span&gt;output bitmap&lt;/span&gt;, then resize the
+   &lt;span&gt;output bitmap&lt;/span&gt; to the new &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;
+   and clear it to fully transparent black.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the rendering context's &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap
+    mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;, then run these substeps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt; be the &lt;code&gt;canvas&lt;/code&gt; element to which the rendering
+     context's &lt;code title=&quot;dom-context-2d-canvas&quot;&gt;canvas&lt;/code&gt; attribute was initialized.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the rendering context's &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context
+     bitmap mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt; and the numeric value of
+     the &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt; content attribute
+     differs from &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, then set &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code
+     title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt; content attribute to the shortest possible string
+     representing &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; as a &lt;span&gt;valid non-negative integer&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the rendering context's &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context
+     bitmap mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt; and the numeric value of
+     the &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt; content attribute
+     differs from &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;, then set &lt;var title=&quot;&quot;&gt;canvas&lt;/var&gt;' &lt;code
+     title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt; content attribute to the shortest possible string
+     representing &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; as a &lt;span&gt;valid non-negative integer&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+   &lt;p&gt;Only one square appears to be drawn in the following example:&lt;/p&gt;
+   &lt;pre&gt;// canvas is a reference to a &lt;canvas&gt; element
+var context = canvas.getContext('2d');
+context.fillRect(0,0,50,50);
+canvas.setAttribute('width', '300'); // clears the canvas
+context.fillRect(0,100,50,50);
+canvas.width = canvas.width; // clears the canvas
+context.fillRect(100,0,50,50); // only this square remains&lt;/pre&gt;
+  &lt;/div&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;When the user agent is to run the &lt;dfn title=&quot;concept-canvas-unbinding-steps&quot;&gt;unbinding
+  steps&lt;/dfn&gt; for a rendering context, it must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Reset the rendering context to its default state&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;hit region list&lt;/span&gt; and its &lt;span&gt;list of
+   pending interface actions&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt; to a
+   transparent black.&lt;/p&gt;&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span
+   title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag to true.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object have no &lt;span&gt;output
+   bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;When the user agent is to run the &lt;dfn title=&quot;concept-canvas-binding-steps&quot;&gt;binding steps&lt;/dfn&gt;
+  to bind the rendering context to the &lt;code&gt;canvas&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, it
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Reset the rendering context to its default state&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;hit region list&lt;/span&gt; and its &lt;span&gt;list of
+   pending interface actions&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Resize the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt; to
+   the dimensions of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap and clear it to fully transparent
+   black.&lt;/p&gt;&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span
+   title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag to true.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;output bitmap&lt;/span&gt; be &lt;var
+   title=&quot;&quot;&gt;target&lt;/var&gt;'s bitmap.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; 2D rendering context represents a flat linear
+  Cartesian surface whose origin (0,0) is at the top left corner, with the coordinate space having
+  &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; values increasing when going right, and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; values
+  increasing when going down. The &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the left-most edge is equal to
+  the width of the rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt; in CSS pixels; similarly, the
+  &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;-coordinate of the bottom-most edge is equal to the height of the rendering
+  context's &lt;span&gt;scratch bitmap&lt;/span&gt; in CSS pixels.&lt;/p&gt;
+
+  &lt;p&gt;The size of the coordinate space does not necessarily represent the size of the actual bitmaps
+  that the user agent will use internally or during rendering. On high-definition displays, for
+  instance, the user agent may internally use bitmaps with two device pixels per unit in the
+  coordinate space, so that the rendering remains at high quality throughout. Anti-aliasing can
+  similarly be implemented using over-sampling with bitmaps of a higher resolution than the final
+  image on the display.&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-canvas&quot;&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to when the object was created.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the width of the rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt;, in CSS pixels. On
+  setting, it must &lt;span title=&quot;concept-canvas-set-bitmap-dimensions&quot;&gt;set bitmap dimensions&lt;/span&gt;
+  to the new value and the current height of the rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt; in
+  CSS pixels, respectively.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-height&quot;&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the height of the rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt;, in CSS pixels. On
+  setting, it must &lt;span title=&quot;concept-canvas-set-bitmap-dimensions&quot;&gt;set bitmap dimensions&lt;/span&gt;
+  to the current width of the rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt; in CSS pixels and the
+  new value, respectively.&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;Except where otherwise specified, for the 2D context interface, &lt;strong&gt;any method call with a
+  numeric argument whose value is infinite or a NaN value must be ignored&lt;/strong&gt;.&lt;/p&gt;
+
   &lt;!--
    Philip Taylor wrote:
    &gt; My experience with some 3d canvas code is that infinities come up in
@@ -43031,96 +43580,81 @@
    &gt; exceptions when passing in non-finite arguments.
   --&gt;
 
-  &lt;p&gt;Whenever the CSS value &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; is used
-  as a color in this API, the &quot;computed value of the 'color' property&quot;
-  for the purposes of determining the computed value of the &lt;code
-  title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is the computed value of the
-  'color' property on the element in question at the time that the
-  color is specified (e.g. when the appropriate attribute is set, or
-  when the method is called; not when the color is rendered or
-  otherwise used). If the computed value of the 'color' property is
-  undefined for a particular case (e.g. because the element is not
-  &lt;span&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;), then the &quot;computed value
-  of the 'color' property&quot; for the purposes of determining the
-  computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is
-  fully opaque black. &lt;a href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Whenever the CSS value &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; is used as a color in the
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; API, the &quot;computed value of the 'color' property&quot; for the
+  purposes of determining the computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is
+  the value described by the appropriate entry in the following list:&lt;/p&gt;
 
-  &lt;p&gt;In the case of &lt;code
-  title=&quot;dom-canvasgradient-addColorStop&quot;&gt;addColorStop()&lt;/code&gt; on
-  &lt;code&gt;CanvasGradient&lt;/code&gt;, the &quot;computed value of the 'color'
-  property&quot; for the purposes of determining the computed value of the
-  &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is always fully opaque
-  black (there is no associated element). &lt;a
-  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;dl&gt;
 
-  &lt;p class=&quot;note&quot;&gt;This is because &lt;code&gt;CanvasGradient&lt;/code&gt; objects
-  are &lt;code&gt;canvas&lt;/code&gt;-neutral &mdash; a
-  &lt;code&gt;CanvasGradient&lt;/code&gt; object created by one
-  &lt;code&gt;canvas&lt;/code&gt; can be used by another, and there is therefore
-  no way to know which is the &quot;element in question&quot; at the time that
-  the color is specified.&lt;/p&gt;
+   &lt;dt&gt;If the rendering context's &lt;span title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap
+   mode&lt;/span&gt; is &lt;span title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt; and the &lt;code&gt;canvas&lt;/code&gt;
+   element is &lt;span&gt;being rendered&lt;/span&gt;&lt;/dt&gt;
 
-  &lt;p class=&quot;note&quot;&gt;Similar concerns exist with font-related properties;
-  the rules for those are described in detail in the relevant section
-  below.&lt;/p&gt;
+   &lt;dd&gt;&lt;p&gt;The &quot;computed value of the 'color' property&quot; for the purposes of determining the computed
+   value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is the computed value of the 'color'
+   property on the &lt;code&gt;canvas&lt;/code&gt; element at the time that the color is specified (e.g. when
+   the appropriate attribute is set, or when the method is called; not when the color is rendered or
+   otherwise used). &lt;a href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;&lt;/dd&gt;
 
-  &lt;/div&gt;
+   &lt;dt&gt;In all other cases&lt;/dt&gt;
 
+   &lt;dd&gt;&lt;p&gt;The &quot;computed value of the 'color' property&quot; for the purposes of determining the computed
+   value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is fully opaque black. &lt;a
+   href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;&lt;/dd&gt;
 
-  &lt;h6&gt;Resolution&lt;/h6&gt;
+  &lt;/dl&gt;
 
-  &lt;p&gt;The user agent may use a bitmap of any square resolution as the
-  backing store for a canvas that uses the 2D context. Once a canvas
-  has a bitmap, that canvas must keep its resolution for its
-  lifetime.&lt;/p&gt;
+  &lt;p&gt;In the case of &lt;code title=&quot;dom-canvasgradient-addColorStop&quot;&gt;addColorStop()&lt;/code&gt; on
+  &lt;code&gt;CanvasGradient&lt;/code&gt;, the &quot;computed value of the 'color' property&quot; for the purposes of
+  determining the computed value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is always fully
+  opaque black (there is no associated element). &lt;a href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;In general, user agents are encouraged to use a
-  resolution equal to the screen resolution. Ideally, the number of
-  device pixels per CSS pixel would be a multiple of two. Several
-  factors can affect the screen resolution: most prominently the
-  actual display resolution, but also important is the current zoom
-  level.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;This is because &lt;code&gt;CanvasGradient&lt;/code&gt; objects are
+  &lt;code&gt;canvas&lt;/code&gt;-neutral &mdash; a &lt;code&gt;CanvasGradient&lt;/code&gt; object created by one
+  &lt;code&gt;canvas&lt;/code&gt; can be used by another, and there is therefore no way to know which is the
+  &quot;element in question&quot; at the time that the color is specified.&lt;/p&gt;
 
-  &lt;p&gt;All the bitmaps created during a single &lt;span
-  title=&quot;concept-task&quot;&gt;task&lt;/span&gt; for canvases that use 2D contexts
-  must have the same resolution.
-  &lt;!--INSERT FINGERPRINT--&gt;
-  &lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;Similar concerns exist with font-related properties; the rules for those are
+  described in detail in the relevant section below.&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;partial interface &lt;span&gt;Screen&lt;/span&gt; {
-  readonly attribute double &lt;span title=&quot;dom-screen-canvasResolution&quot;&gt;canvasResolution&lt;/span&gt;;
-};&lt;/pre&gt;
+  &lt;/div&gt;
 
-  &lt;dl class=&quot;domintro&quot;&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;window&lt;/var&gt; . &lt;code title=&quot;dom-Window-screen&quot;&gt;screen&lt;/code&gt; . &lt;code title=&quot;dom-screen-canvasResolution&quot;&gt;canvasResolution&lt;/code&gt;&lt;/dt&gt;
+  &lt;h6&gt;Implementation notes&lt;/h6&gt;
 
-   &lt;dd&gt;
+  &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
 
-    &lt;p&gt;Returns the resolution that has been, or will be, used for bitmaps during this &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Although the way the specification is written it might sound like an implementation needs to
+  track up to four bitmaps per canvas or rendering context &mdash; one &lt;span&gt;scratch bitmap&lt;/span&gt;,
+  one &lt;span&gt;output bitmap&lt;/span&gt; for the rendering context, one bitmap for the &lt;code&gt;canvas&lt;/code&gt;,
+  and one bitmap for the actually currently rendered image &mdash; user agents can in fact generally
+  optimise this to only one or two.&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;p&gt;The &lt;span&gt;scratch bitmap&lt;/span&gt;, when it isn't the same bitmap as the &lt;span&gt;output
+  bitmap&lt;/span&gt;, is only directly observable if it is read, and therefore implementations can,
+  instead of updating this bitmap, merely remember the sequence of drawing operations that have been
+  applied to it until such time as the bitmap's actual data is needed (for example because of a call
+  to &lt;code title=&quot;dom-context-2d-commit&quot;&gt;commit()&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage()&lt;/code&gt;, or the &lt;code&gt;ImageBitmap()&lt;/code&gt;
+  constructor). In many cases, this will be more memory efficient.&lt;/p&gt;
 
-  &lt;/dl&gt;
+  &lt;p&gt;The bitmap of a &lt;code&gt;canvas&lt;/code&gt; element is the one bitmap that's pretty much always going
+  to be needed in practice. The &lt;span&gt;output bitmap&lt;/span&gt; of a rendering context, when it has one,
+  is always just an alias to a &lt;code&gt;canvas&lt;/code&gt; element's bitmap.&lt;/p&gt;
 
-  &lt;div class=&quot;impl&quot;&gt;
+  &lt;p&gt;Additional bitmaps are sometimes needed, e.g. to enable fast drawing when the canvas is being
+  painted at a different size than its intrinsic size, or to enable double buffering so that the
+  rendering commands from the &lt;span&gt;scratch bitmap&lt;/span&gt; can be applied without the rendering being
+  updated midway.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-screen-canvasResolution&quot;&gt;&lt;code&gt;canvasResolution&lt;/code&gt;&lt;/dfn&gt;
-  attribute of the &lt;code&gt;Screen&lt;/code&gt; object must return the
-  resolution, in image pixels per coordinate space units, that any
-  canvas bitmaps created during this &lt;span
-  title=&quot;concept-task&quot;&gt;task&lt;/span&gt; will use (or have used). &lt;a
-  href=&quot;#refsCSSOMVIEW&quot;&gt;[CSSOMVIEW]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;/div&gt;
 
 
-
   &lt;h6&gt;The canvas state&lt;/h6&gt;
 
-  &lt;p&gt;Each context maintains a stack of drawing states. &lt;dfn
-  title=&quot;drawing state&quot;&gt;Drawing states&lt;/dfn&gt; consist of:&lt;/p&gt;
+  &lt;p&gt;Each &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; rendering context maintains a stack of drawing
+  states. &lt;dfn title=&quot;drawing state&quot;&gt;Drawing states&lt;/dfn&gt; consist of:&lt;/p&gt;
 
   &lt;ul class=&quot;brief&quot;&gt;
    &lt;li&gt;The current &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;transformation matrix&lt;/span&gt;.&lt;/li&gt;
@@ -43142,15 +43676,15 @@
    title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt;, &lt;code
    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, &lt;code
    title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt;, &lt;code
+   title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt;, &lt;code
    title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;.&lt;/li&gt;
    &lt;li&gt;The current &lt;span&gt;dash list&lt;/span&gt;.&lt;/li&gt;
   &lt;/ul&gt;
 
-  &lt;p class=&quot;note&quot;&gt;The &lt;span&gt;current default path&lt;/span&gt; and the
-  current bitmap are not part of the drawing state. The &lt;span&gt;current
-  default path&lt;/span&gt; is persistent, and can only be reset using the
-  &lt;code title=&quot;dom-context-2d-beginPath&quot;&gt;beginPath()&lt;/code&gt; method.
-  The current bitmap is a property of the canvas, not the context.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;The &lt;span&gt;current default path&lt;/span&gt; and the rendering context's bitmaps are not
+  part of the drawing state. The &lt;span&gt;current default path&lt;/span&gt; is persistent, and can only be
+  reset using the &lt;code title=&quot;dom-context-2d-beginPath&quot;&gt;beginPath()&lt;/code&gt; method. The bitmaps
+  depend on whether and how the rendering context is bound to a &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
 
@@ -43174,16 +43708,17 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-save&quot;&gt;&lt;code&gt;save()&lt;/code&gt;&lt;/dfn&gt;
-  method must push a copy of the current drawing state onto the
-  drawing state stack.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-save&quot;&gt;&lt;code&gt;save()&lt;/code&gt;&lt;/dfn&gt; method must push a copy of the
+  current drawing state onto the drawing state stack.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-restore&quot;&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method
-  must pop the top entry in the drawing state stack, and reset the
-  drawing state it describes. If there is no saved state, the method
-  must do nothing.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-restore&quot;&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method must pop the top
+  entry in the drawing state stack, and reset the drawing state it describes. If there is no saved
+  state, the method must do nothing.&lt;/p&gt;
 
+  &lt;p&gt;When the user agent is to &lt;dfn&gt;reset the rendering context to its default state&lt;/dfn&gt;, it must
+  clear the drawing state stack and everything that &lt;span&gt;drawing state&lt;/span&gt; consists of to
+  initial values.&lt;/p&gt;
+
   &lt;!-- v7
 idea from Mihai:
 &gt; 5. Drawing states should be saveable with IDs, and for easier restoring.
@@ -43231,19 +43766,17 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;Each &lt;code&gt;DrawingStyle&lt;/code&gt; object has a &lt;dfn&gt;styles scope
-  node&lt;/dfn&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;code&gt;DrawingStyle&lt;/code&gt; object can have a &lt;dfn&gt;styles scope object&lt;/dfn&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-DrawingStyle&quot;&gt;&lt;code&gt;DrawingStyle()&lt;/code&gt;&lt;/dfn&gt;
-  constructor, when invoked, must return a newly created
-  &lt;code&gt;DrawingStyle&lt;/code&gt; object. If the constructor was passed an
-  argument, then the &lt;code&gt;DrawingStyle&lt;/code&gt; object's &lt;span&gt;styles
-  scope node&lt;/span&gt; is that element. Otherwise, the object's
-  &lt;span&gt;styles scope node&lt;/span&gt; is the &lt;code&gt;Document&lt;/code&gt; object
-  of the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing
-  context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the
-  interface object of the invoked constructor is found.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-DrawingStyle&quot;&gt;&lt;code&gt;DrawingStyle()&lt;/code&gt;&lt;/dfn&gt; constructor, when invoked,
+  must return a newly created &lt;code&gt;DrawingStyle&lt;/code&gt; object. If the constructor was passed an
+  argument, then the &lt;code&gt;DrawingStyle&lt;/code&gt; object's &lt;span&gt;styles scope object&lt;/span&gt; is that
+  element. Otherwise, if the &lt;span&gt;JavaScript global environment&lt;/span&gt; is a &lt;span&gt;document
+  environment&lt;/span&gt;, the object's &lt;span&gt;styles scope object&lt;/span&gt; is the &lt;code&gt;Document&lt;/code&gt;
+  object of the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; of the
+  &lt;code&gt;Window&lt;/code&gt; object on which the interface object of the invoked constructor is found.
+  Otherwise, the &lt;span&gt;JavaScript global environment&lt;/span&gt; is a &lt;span&gt;worker environment&lt;/span&gt;,
+  and the &lt;span&gt;styles scope object&lt;/span&gt; is the worker.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -43829,11 +44362,8 @@
 
     &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the alignment. The possible values are
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code
-    title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code
-    title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the alignment. The possible values are and their meanings are given
+    below. Other values are ignored. The default is &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -43844,23 +44374,43 @@
 
     &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the baseline alignment. The possible
-    values and their meanings are given below. Other values are
-    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the baseline alignment. The possible values and their meanings are
+    given below. Other values are ignored. The default is &lt;code
+    title=&quot;dom-concept-2d-textAlign-alphabetic&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;styles&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current directionality.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the directionality. The possible values and their meanings are given
+    below. Other values are ignored. The default is &lt;code
+    title=&quot;dom-concept-2d-textAlign-inherit&quot;&gt;inherit&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;CanvasDrawingStyles&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object. Such
-  objects also have a &lt;dfn&gt;font style source node&lt;/dfn&gt;. For
-  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; objects, this is the
-  &lt;code&gt;canvas&lt;/code&gt; element. For &lt;code&gt;DrawingStyle&lt;/code&gt; objects,
-  it's the &lt;span&gt;styles scope node&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;CanvasDrawingStyles&lt;/code&gt; interface have attributes (defined
+  in this section) that control how text is laid out (rasterized or outlined) by the object. Such
+  objects can also have a &lt;dfn&gt;font style source object&lt;/dfn&gt;. For
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; objects whose &lt;span
+  title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt; is &lt;span
+  title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;, this is their &lt;code&gt;canvas&lt;/code&gt; element; for other
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; objects, if the &lt;span&gt;JavaScript global environment&lt;/span&gt;
+  is a &lt;span&gt;document environment&lt;/span&gt;, the object's &lt;span&gt;font style source object&lt;/span&gt; is the
+  &lt;code&gt;Document&lt;/code&gt; object of the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing
+  context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the interface object of the
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object is found; otherwise the &lt;span&gt;JavaScript global
+  environment&lt;/span&gt; is a &lt;span&gt;worker environment&lt;/span&gt; and the &lt;span&gt;font style source
+  object&lt;/span&gt; is the worker. For &lt;code&gt;DrawingStyle&lt;/code&gt; objects, it's the &lt;span&gt;styles scope
+  object&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-font&quot;&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
@@ -43874,16 +44424,13 @@
   'initial'), then it must be ignored, without assigning a new font
   value. &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the &lt;span&gt;font
-  style source node&lt;/span&gt;'s stylesheets when the font is to be used;
-  any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; that are
-  visible to that element must therefore be available once they are
-  loaded. (If a reference font is used before it is fully loaded, or
-  if the &lt;span&gt;font style source node&lt;/span&gt; does not have that font
-  in scope at the time the font is to be used, then it must be treated
-  as if it was an unknown font, falling back to another as described
-  by the relevant CSS specifications.) &lt;a
-  href=&quot;#refsCSSFONTS&quot;&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Font names must be interpreted in the context of the &lt;span&gt;font style source object&lt;/span&gt; when
+  the font is to be used; any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; or loaded using
+  the &lt;code&gt;FontLoader&lt;/code&gt; that are visible to the &lt;span&gt;font style source object&lt;/span&gt; must
+  therefore be available once they are loaded. If a font is used before it is fully loaded, or if
+  the &lt;span&gt;font style source object&lt;/span&gt; does not have that font in scope at the time the font is
+  to be used, then it must be treated as if it was an unknown font, falling back to another as
+  described by the relevant CSS specifications. &lt;a href=&quot;#refsCSSFONTS&quot;&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
@@ -43910,63 +44457,84 @@
 
   &lt;/div&gt;
 
-  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasDrawingStyles&lt;/code&gt;
-  interface is created, the font of the context must be set to 10px
-  sans-serif. When the 'font-size' component is set to lengths using
-  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
-  keywords, these must be interpreted relative to the computed value
+  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasDrawingStyles&lt;/code&gt; interface is created, the
+  font of the context must be set to 10px sans-serif. When the 'font-size' component is set to
+  lengths using percentages, 'em' or 'ex' units, or the 'larger' or 'smaller' keywords, these must
+  be interpreted relative to the computed value of the 'font-size' property of the &lt;span&gt;font style
+  source object&lt;/span&gt; at the time that the attribute is set, if it is an element. When the
+  'font-weight' component is set to the relative values 'bolder' and 'lighter', these must be
+  interpreted relative to the computed value of the 'font-weight' property of the &lt;span&gt;font style
+  source object&lt;/span&gt; at the time that the attribute is set, if it is an element. If the computed
+  values are undefined for a particular case (e.g. because the &lt;span&gt;font style source object&lt;/span&gt;
+  is not an element or is not &lt;span&gt;being rendered&lt;/span&gt;), then the relative keywords must be
+  interpreted relative to the normal-weight 10px sans-serif default.&lt;/p&gt;
 
-
-  of the 'font-size' property of the &lt;span&gt;font style source
-  node&lt;/span&gt; at the time that the attribute is set, if that is an
-  element. When the 'font-weight' component is set to the relative
-  values 'bolder' and 'lighter', these must be interpreted relative to
-  the computed value of the 'font-weight' property of the &lt;span&gt;font
-  style source node&lt;/span&gt; at the time that the attribute is set, if
-  that is an element. If the computed values are undefined for a
-  particular case (e.g. because the &lt;span&gt;font style source
-  node&lt;/span&gt; is not an element or is not &lt;span&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;), then the relative keywords must be
-  interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-textAlign&quot;&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on getting, must return the current value. On setting, if
-  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code
-  title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code
-  title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
-  value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the object implementing the
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-textAlign&quot;&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code
+  title=&quot;dom-concept-2d-textAlign-start&quot;&gt;start&lt;/code&gt;, &lt;code
+  title=&quot;dom-concept-2d-textAlign-end&quot;&gt;end&lt;/code&gt;, &lt;code
+  title=&quot;dom-concept-2d-textAlign-left&quot;&gt;left&lt;/code&gt;, &lt;code
+  title=&quot;dom-concept-2d-textAlign-right&quot;&gt;right&lt;/code&gt;, or &lt;code
+  title=&quot;dom-concept-2d-textAlign-center&quot;&gt;center&lt;/code&gt;, then the value must be changed to the new
+  value. Otherwise, the new value must be ignored. When the object implementing the
   &lt;code&gt;CanvasDrawingStyles&lt;/code&gt; interface is created, the &lt;code
-  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; attribute must
-  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
+  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; attribute must initially have the value &lt;code
+  title=&quot;dom-concept-2d-textAlign-start&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-textBaseline&quot;&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute, on getting, must return the current value. On
-  setting, if the value is one of &lt;code
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-textBaseline&quot;&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code
   title=&quot;dom-context-2d-textBaseline-top&quot;&gt;top&lt;/code&gt;, &lt;code
   title=&quot;dom-context-2d-textBaseline-hanging&quot;&gt;hanging&lt;/code&gt;, &lt;code
   title=&quot;dom-context-2d-textBaseline-middle&quot;&gt;middle&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;alphabetic&lt;/code&gt;,
-  &lt;code
-  title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;ideographic&lt;/code&gt;,
-  or &lt;code title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;bottom&lt;/code&gt;,
-  then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the object implementing the
+  title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;alphabetic&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;ideographic&lt;/code&gt;, or &lt;code
+  title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;bottom&lt;/code&gt;, then the value must be changed to the
+  new value. Otherwise, the new value must be ignored. When the object implementing the
   &lt;code&gt;CanvasDrawingStyles&lt;/code&gt; interface is created, the &lt;code
-  title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute
-  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
+  title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute must initially have the value
+  &lt;code title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-direction&quot;&gt;&lt;code&gt;direction&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on
+  getting, must return the current value. On setting, if the value is one of &lt;code
+  title=&quot;dom-context-2d-direction-ltr&quot;&gt;ltr&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-direction-rtl&quot;&gt;rtl&lt;/code&gt;, &lt;!--&lt;code
+  title=&quot;dom-context-2d-direction-auto&quot;&gt;auto&lt;/code&gt;,--&gt; or or &lt;code
+  title=&quot;dom-context-2d-direction-inherit&quot;&gt;inherit&lt;/code&gt;, then the value must be changed to the new
+  value. Otherwise, the new value must be ignored. When the object implementing the
+  &lt;code&gt;CanvasDrawingStyles&lt;/code&gt; interface is created, the &lt;code
+  title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt; attribute must initially have the value &lt;code
+  title=&quot;dom-context-2d-direction-inherit&quot;&gt;inherit&lt;/code&gt;.&lt;/p&gt;
+
   &lt;/div&gt;
 
+  &lt;p&gt;The &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textBaseline&lt;/code&gt; attribute's allowed keywords are
+  as follows:&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-textAlign-start&quot;&gt;&lt;code&gt;start&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the start edge of the text (left side in left-to-right text, right side in
+   right-to-left text).&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-textAlign-end&quot;&gt;&lt;code&gt;end&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the end edge of the text (right side in left-to-right text, left side in
+   right-to-left text).&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-textAlign-left&quot;&gt;&lt;code&gt;left&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the left.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-textAlign-right&quot;&gt;&lt;code&gt;right&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the right.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-textAlign-center&quot;&gt;&lt;code&gt;center&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;&lt;p&gt;Align to the center.&lt;/p&gt;&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
   &lt;p&gt;The &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt;
   attribute's allowed keywords correspond to alignment points in the
   font:&lt;/p&gt;
 
-  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
-  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
   &lt;p&gt;&lt;img src=&quot;images/baselines.png&quot; width=&quot;738&quot; height=&quot;300&quot; alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &amp;#x0906; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &amp;#x00C1;, &amp;#x00FF;, &amp;#x0066;, and &amp;#x03A9; are anchored, the ideographic baseline is where glyphs like &amp;#x79C1; and &amp;#x9054; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot;&gt;&lt;/p&gt;
 
   &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
@@ -43993,15 +44561,39 @@
 
   &lt;/dl&gt;
 
-  &lt;p&gt;The &lt;dfn&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes
-  as input a string &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, a
-  &lt;code&gt;CanvasDrawingStyles&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;,
-  and an optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an
-  array of glyph shapes, each positioned on a common coordinate space,
-  and a &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
-  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i title=&quot;&quot;&gt;center&lt;/i&gt;. (Most callers of this
-  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;.)&lt;/p&gt;
+  &lt;p&gt;The &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textBaseline&lt;/code&gt; attribute's allowed keywords are
+  as follows:&lt;/p&gt;
 
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-direction-ltr&quot;&gt;&lt;code&gt;ltr&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Treat input to the &lt;span&gt;text preparation algorithm&lt;/span&gt; as left-to-right text.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-direction-rtl&quot;&gt;&lt;code&gt;rtl&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Treat input to the &lt;span&gt;text preparation algorithm&lt;/span&gt; as right-to-left text.&lt;/p&gt;&lt;/dd&gt;
+
+&lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-direction-auto&quot;&gt;&lt;code&gt;auto&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Determine the direction from the input to the &lt;span&gt;text preparation algorithm&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-concept-2d-direction-inherit&quot;&gt;&lt;code&gt;inherit&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;&lt;p&gt;Default to the directionality of the &lt;code&gt;canvas&lt;/code&gt; element or &lt;code&gt;Document&lt;/code&gt;
+   as appropriate.&lt;/p&gt;&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes as input a string &lt;var
+  title=&quot;&quot;&gt;text&lt;/var&gt;, a &lt;code&gt;CanvasDrawingStyles&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and an
+  optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an array of glyph shapes, each positioned
+  on a common coordinate space, a &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
+  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i title=&quot;&quot;&gt;center&lt;/i&gt;, and an inline box. (Most callers of this
+  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; and the inline box.)&lt;/p&gt;
+
   &lt;ol&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided but is less
@@ -44022,28 +44614,45 @@
 
     &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style
-     source node&lt;/span&gt; is an element&lt;/dt&gt;
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code
+     title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt; attribute has the value &quot;&lt;code
+     title=&quot;dom-context-2d-direction-ltr&quot;&gt;ltr&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-ltr&quot;&gt;ltr&lt;/span&gt;'.&lt;/dd&gt;
 
-     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;span&gt;the
-     directionality&lt;/span&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
-     &lt;span&gt;font style source node&lt;/span&gt;.&lt;/dd&gt;
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code
+     title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt; attribute has the value &quot;&lt;code
+     title=&quot;dom-context-2d-direction-rtl&quot;&gt;rtl&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-rtl&quot;&gt;rtl&lt;/span&gt;'.&lt;/dd&gt;
 
-     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style
-     source node&lt;/span&gt; is a &lt;code&gt;Document&lt;/code&gt; and that
-     &lt;code&gt;Document&lt;/code&gt; has a root element child&lt;/dt&gt;
+&lt;!--
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;code
+     title=&quot;dom-context-2d-direction&quot;&gt;direction&lt;/code&gt; attribute has the value &quot;&lt;code
+     title=&quot;dom-context-2d-direction-auto&quot;&gt;auto&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dd&gt;
+      Find the first character in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; of bidirectional character type L, AL, or
+      R, if any. If such a character is found and it is of bidirectional character type AL or R,
+      then let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-rtl&quot;&gt;rtl&lt;/span&gt;'; otherwise,
+      let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-rtl&quot;&gt;rtl&lt;/span&gt;'. &lt;a
+      href=&quot;#refsBIDI&quot;&gt;[BIDI]&lt;/a&gt;
+     &lt;/dd&gt;
+--&gt;
 
-     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;span&gt;the
-     directionality&lt;/span&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
-     &lt;span&gt;font style source node&lt;/span&gt;'s root element child.&lt;/dd&gt;
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style source object&lt;/span&gt; 
+     is an element&lt;/dt&gt;
 
-     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style
-     source node&lt;/span&gt; is a &lt;code&gt;Document&lt;/code&gt; and that
-     &lt;code&gt;Document&lt;/code&gt; has no root element child&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;span&gt;the directionality&lt;/span&gt; of the &lt;var
+     title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style source object&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span
-     title=&quot;concept-ltr&quot;&gt;ltr&lt;/span&gt;'.&lt;/dd&gt;
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style source object&lt;/span&gt; 
+     is a &lt;code&gt;Document&lt;/code&gt; and that &lt;code&gt;Document&lt;/code&gt; has a root element child&lt;/dt&gt;
 
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;span&gt;the directionality&lt;/span&gt; of the &lt;var
+     title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style source object&lt;/span&gt;'s root element child.&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span title=&quot;concept-ltr&quot;&gt;ltr&lt;/span&gt;'.&lt;/dd&gt;
+
     &lt;/dl&gt;
 
    &lt;/li&gt;
@@ -44082,14 +44691,14 @@
     &lt;dl&gt;
 
      &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=&quot;dom-concept-2d-textAlign-left&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=&quot;dom-concept-2d-textAlign-start&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'ltr'&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=&quot;dom-concept-2d-textAlign-end&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'rtl'&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
@@ -44098,14 +44707,14 @@
 
 
      &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=&quot;dom-concept-2d-textAlign-right&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=&quot;dom-concept-2d-textAlign-end&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'ltr'&lt;/dt&gt;
 
      &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;code title=&quot;dom-concept-2d-textAlign-start&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
      'rtl'&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
@@ -44114,7 +44723,7 @@
 
 
      &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
-     &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+     &lt;code title=&quot;dom-concept-2d-textAlign-center&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
 
      &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
      position be half way between the left and right edges of the
@@ -44195,9 +44804,8 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, and, for callers that
-   need it, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; as the alignment
-   value.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;, and the inline
+   box.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -45255,7 +45863,6 @@
   &lt;/div&gt;
 
 
-
   &lt;h6&gt;&lt;dfn title=&quot;dom-context-2d-transformation&quot;&gt;Transformations&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;Each &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object has a
@@ -45452,7 +46059,95 @@
 
 
 
+  &lt;h6&gt;Image sources for 2D rendering contexts&lt;/h6&gt;
 
+  &lt;p&gt;Several methods in the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; API take the union type
+  &lt;code&gt;CanvasImageSource&lt;/code&gt; as an argument.&lt;/p&gt;
+
+  &lt;p&gt;This union type allows objects implementing any of the following interfaces to be used as image
+  sources:&lt;/p&gt;
+
+  &lt;ul&gt;
+
+   &lt;li&gt;&lt;code&gt;HTMLImageElement&lt;/code&gt; (&lt;code&gt;img&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;HTMLVideoElement&lt;/code&gt; (&lt;code&gt;video&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;HTMLCanvasElement&lt;/code&gt; (&lt;code&gt;canvas&lt;/code&gt; elements)&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;CanvasRenderingContext2D&lt;/code&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;code&gt;BitmapImage&lt;/code&gt;&lt;/li&gt;
+
+  &lt;!-- v3: supporting ImageData object might make sense (when resizing as well as filtering) - ack Charles Pritchard --&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p&gt;When a user agent is required to &lt;dfn&gt;check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+  argument&lt;/dfn&gt;, where &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;CanvasImageSource&lt;/code&gt; object, the
+  user agent must run these steps, which return either &lt;i&gt;good&lt;/i&gt;, &lt;i&gt;bad&lt;/i&gt;, or
+  &lt;i&gt;aborted&lt;/i&gt;:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;HTMLImageElement&lt;/code&gt; object that
+   is not &lt;span title=&quot;img-good&quot;&gt;fully decodable&lt;/span&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+   argument is an &lt;code&gt;HTMLVideoElement&lt;/code&gt; object whose &lt;code
+   title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; attribute is either &lt;code
+   title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
+   title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;, then return &lt;i&gt;bad&lt;/i&gt; and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;HTMLCanvasElement&lt;/code&gt; object with
+   either a horizontal dimension or a vertical dimension equal to zero, then the implementation
+   throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception and return &lt;i&gt;aborted&lt;/i&gt;.&lt;/p&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;When a &lt;code&gt;CanvasImageSource&lt;/code&gt; object represents an &lt;code&gt;HTMLImageElement&lt;/code&gt;, the
+  element's image must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;Specifically, when a &lt;code&gt;CanvasImageSource&lt;/code&gt; object represents an animated image in an
+  &lt;code&gt;HTMLImageElement&lt;/code&gt;, the user agent must use the poster frame of the animation, or, if
+  there is no poster frame, the first frame of the animation, when rendering the image for
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; APIs.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;CanvasImageSource&lt;/code&gt; object represents an &lt;code&gt;HTMLVideoElement&lt;/code&gt;, then
+  the frame at the &lt;span&gt;current playback position&lt;/span&gt; when the method with the argument is
+  invoked must be used as the source image when rendering the image for
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; APIs, and the source image's dimensions must be the &lt;span
+  title=&quot;concept-video-intrinsic-width&quot;&gt;intrinsic width&lt;/span&gt; and &lt;span
+  title=&quot;concept-video-intrinsic-height&quot;&gt;intrinsic height&lt;/span&gt; of the &lt;span&gt;media resource&lt;/span&gt;
+  (i.e. after any aspect-ratio correction has been applied).&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;CanvasImageSource&lt;/code&gt; object represents an &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, the
+  element's bitmap must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;CanvasImageSource&lt;/code&gt; object represents a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt;, the
+  object's &lt;span&gt;scratch bitmap&lt;/span&gt; must be used as the source image.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;CanvasImageSource&lt;/code&gt; object represents an element that is &lt;span&gt;being
+  rendered&lt;/span&gt; and that element has been resized, the original image data of the source image
+  must be used, not the image as it is rendered (e.g. &lt;code title=&quot;attr-dim-width&quot;&gt;width&lt;/code&gt; and
+  &lt;code title=&quot;attr-dim-height&quot;&gt;height&lt;/code&gt; attributes on the source element have no effect on how
+  the object is interpreted when rendering the image for &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt;
+  APIs).&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;CanvasImageSource&lt;/code&gt; object represents a &lt;code&gt;BitmapImage&lt;/code&gt;, the
+  object's bitmap image data must be used as the source image.&lt;/p&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;p&gt;&lt;dfn&gt;The &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/dfn&gt; if it is an
+  &lt;code&gt;HTMLImageElement&lt;/code&gt; or &lt;code&gt;HTMLVideoElement&lt;/code&gt; whose &lt;span&gt;origin&lt;/span&gt; is not
+  the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;origin&lt;/span&gt;,
+  or if it is an &lt;code&gt;HTMLCanvasElement&lt;/code&gt; whose bitmap's &lt;span
+  title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag is false, or if it is a
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object whose &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span
+  title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag is false.&lt;/p&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+
+
   &lt;h6&gt;Fill and stroke styles&lt;/h6&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
@@ -45524,16 +46219,20 @@
   attribute represents the color or style to use for the lines around
   the shapes.&lt;/p&gt;
 
-  &lt;p&gt;Both attributes can be either strings,
-  &lt;code&gt;CanvasGradient&lt;/code&gt;s, or &lt;code&gt;CanvasPattern&lt;/code&gt;s. On
-  setting, strings must be &lt;span title=&quot;parsed as a CSS &lt;color&gt;
-  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/span&gt; and the color
-  assigned, and &lt;code&gt;CanvasGradient&lt;/code&gt; and
-  &lt;code&gt;CanvasPattern&lt;/code&gt; objects must be assigned themselves. &lt;a
-  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
-  cannot be &lt;span&gt;parsed as a CSS &lt;color&gt; value&lt;/span&gt;, then it
-  must be ignored, and the attribute must retain its previous
-  value.&lt;/p&gt;
+  &lt;p&gt;Both attributes can be either strings, &lt;code&gt;CanvasGradient&lt;/code&gt;s, or
+  &lt;code&gt;CanvasPattern&lt;/code&gt;s. On setting, strings must be &lt;span title=&quot;parsed as a CSS
+  &lt;color&gt; value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/span&gt; and the color assigned, and
+  &lt;code&gt;CanvasGradient&lt;/code&gt; and &lt;code&gt;CanvasPattern&lt;/code&gt; objects must be assigned themselves. &lt;a
+  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but cannot be &lt;span&gt;parsed as a CSS
+  &lt;color&gt; value&lt;/span&gt;, then it must be ignored, and the attribute must retain its previous
+  value.
+&lt;!--ADD-TOPIC:Security--&gt;
+  If the new value is a &lt;code&gt;CanvasPattern&lt;/code&gt; object that is marked as &lt;span
+  title=&quot;concept-canvas-pattern-not-origin-clean&quot;&gt;not origin-clean&lt;/span&gt;, then the &lt;span&gt;scratch
+  bitmap&lt;/span&gt;'s &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag must be set to
+  false.
+&lt;!--REMOVE-TOPIC:Security--&gt;
+  &lt;/p&gt;
 
   &lt;p&gt;When set to a &lt;code&gt;CanvasPattern&lt;/code&gt; or
   &lt;code&gt;CanvasGradient&lt;/code&gt; object, the assignment is
@@ -45573,9 +46272,8 @@
   must initially have the string value &lt;code
   title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the value is a color, it must not be affected by the
-  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
-  singular matrices don't affect solid color fillStyles --&gt;
+  &lt;p&gt;When the value is a color, it must not be affected by the transformation matrix when used to
+  draw on bitmaps.&lt;/p&gt; &lt;!-- so singular matrices don't affect solid color fillStyles --&gt;
 
   &lt;/div&gt;
 
@@ -45749,7 +46447,7 @@
    title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var
    title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var
    title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
-   canvas that have not yet been painted on by earlier circles in this
+   bitmap that have not yet been painted on by earlier circles in this
    step for this rendering of the gradient.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
@@ -45815,58 +46513,52 @@
   &lt;div class=&quot;impl&quot;&gt;
 
   &lt;p&gt;To create objects of this type, the &lt;dfn
-  title=&quot;dom-context-2d-createPattern&quot;&gt;&lt;code&gt;createPattern(&lt;var
-  title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method is used. The first argument gives the image to use as the
-  pattern (either an &lt;code&gt;HTMLImageElement&lt;/code&gt;,
-  &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, or &lt;code&gt;HTMLVideoElement&lt;/code&gt;
-  object). Modifying this image after calling the &lt;code
-  title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern()&lt;/code&gt; method
-  must not affect the pattern. The second argument must be a string
-  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
-  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
-  is given, then the user agent must throw a &lt;code&gt;SyntaxError&lt;/code&gt;
-  exception. User agents must recognize the four values described above
-  exactly (e.g. they must not do case folding). Except as specified
-  below, the method must return a &lt;code&gt;CanvasPattern&lt;/code&gt; object
-  suitably initialized.&lt;/p&gt;
+  title=&quot;dom-context-2d-createPattern&quot;&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is used. When the method is invoked, the user agent
+  must run the following steps:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;HTMLImageElement&lt;/code&gt;, &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, or
-  &lt;code&gt;HTMLVideoElement&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
-  paragraph --&gt;
+  &lt;ol&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLImageElement&lt;/code&gt; object that is not &lt;span
-  title=&quot;img-good&quot;&gt;fully decodable&lt;/span&gt;, or if the &lt;var
-  title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;HTMLVideoElement&lt;/code&gt;
-  object whose &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
-  attribute is either &lt;code
-  title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
-  title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;, then the
-  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
-  equivalent paragraph --&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; be the first argument and &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; be
+   the second argument.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLCanvasElement&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;InvalidStateError&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument&lt;/span&gt;. If this
+   returns &lt;i&gt;aborted&lt;/i&gt;, then an exception has been thrown and the method doesn't return anything;
+   abort these steps. If it returns &lt;i&gt;bad&lt;/i&gt;, then return null and abort these steps. Otherwise it
+   returns &lt;i&gt;good&lt;/i&gt;; continue with these steps.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;p&gt;Patterns have a transformation matrix, which controls how the
-  pattern is used when it is painted. Initially, a pattern's
-  transformation matrix must be the identity transform.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; is the empty string, let it be &quot;&lt;code
+   title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;dfn
-  title=&quot;dom-canvaspattern-setTransform&quot;&gt;&lt;code&gt;setTransform()&lt;/code&gt;&lt;/dfn&gt;
-  method is invoked on the pattern, the user agent must replace the
-  pattern's transformation matrix with the one described by the
-  &lt;code&gt;SVGMatrix&lt;/code&gt; object provided as an argument to the
-  method.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; is not a &lt;span&gt;case-sensitive&lt;/span&gt; match for one of
+   &quot;&lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;&quot;, &quot;&lt;code
+   title=&quot;&quot;&gt;repeat-y&lt;/code&gt;&quot;, or &quot;&lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;&quot;, throw a &lt;code&gt;SyntaxError&lt;/code&gt;
+   exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;CanvasPattern&lt;/code&gt; object with the image &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+   and the repetition behavior given by &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;span&gt;the &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/span&gt;, then mark the
+   &lt;code&gt;CanvasPattern&lt;/code&gt; object as &lt;dfn title=&quot;concept-canvas-pattern-not-origin-clean&quot;&gt;not
+   origin-clean&lt;/dfn&gt;.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;CanvasPattern&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;Modifying the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; used when creating a &lt;code&gt;CanvasPattern&lt;/code&gt; object
+  after calling the &lt;code title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern()&lt;/code&gt; method must
+  not affect the pattern(s) rendered by the &lt;code&gt;CanvasPattern&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;Patterns have a transformation matrix, which controls how the pattern is used when it is
+  painted. Initially, a pattern's transformation matrix must be the identity transform.&lt;/p&gt;
+
+  &lt;p&gt;When the &lt;dfn title=&quot;dom-canvaspattern-setTransform&quot;&gt;&lt;code&gt;setTransform()&lt;/code&gt;&lt;/dfn&gt; method
+  is invoked on the pattern, the user agent must replace the pattern's transformation matrix with
+  the one described by the &lt;code&gt;SVGMatrix&lt;/code&gt; object provided as an argument to the method.&lt;/p&gt;
+
   &lt;p&gt;When a pattern is to be rendered within an area, the user agent
   must run the following steps to determine what is rendered:&lt;/p&gt;
 
@@ -45876,30 +46568,23 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Place a copy of the image on the bitmap, anchored such that its
-    top left corner is at the origin of the coordinate space, with one
-    coordinate space unit per CSS pixel of the image, then place
-    repeated copies of this image horizontally to the left and right,
-    if the &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically
-    up and down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or
-    in all four directions all over the bitmap, if the
-    &lt;code&gt;repeat&lt;/code&gt; string was specified.&lt;/p&gt;
+    &lt;p&gt;Place a copy of the image on the bitmap, anchored such that its top left corner is at the
+    origin of the coordinate space, with one coordinate space unit per CSS pixel of the image, then
+    place repeated copies of this image horizontally to the left and right, if the repetition
+    behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;&quot;, or vertically up and down, if the repetition
+    behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;&quot;, or in all four directions all over the bitmap, if
+    the repetition behavior is &quot;&lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;&quot;.&lt;/p&gt;
 
-    &lt;p&gt;If the original image data is a bitmap image, the value painted
-    at a point in the area of the repetitions is computed by filtering
-    the original image data. If the &lt;code
-    title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
-    attribute is set to true, then the user agent may use any
-    filtering algorithm (for example bilinear interpolation or
+    &lt;p&gt;If the original image data is a bitmap image, the value painted at a point in the area of the
+    repetitions is computed by filtering the original image data. If the &lt;code
+    title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt; attribute is set to
+    true, then the user agent may use any filtering algorithm (for example bilinear interpolation or
     nearest-neighbor). If the &lt;code
-    title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
-    attribute is set to false, the image must be rendered using
-    nearest-neighbor interpolation. When such a filtering algorithm
-    requires a pixel value from outside the original image data, it
-    must instead use the value from wrapping the pixel's coordinates
-    to the original image's dimensions. (That is, the filter uses
-    'repeat' behavior, regardless of the value of &lt;var
-    title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
+    title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt; attribute is set to
+    false, the image must be rendered using nearest-neighbor interpolation. When such a filtering
+    algorithm requires a pixel value from outside the original image data, it must instead use the
+    value from wrapping the pixel's coordinates to the original image's dimensions. (That is, the
+    filter uses 'repeat' behavior, regardless of the value of the pattern's repetition behavior.)&lt;/p&gt;
     &lt;!-- drawImage() has similar paragraphs with different rules --&gt;
 
    &lt;/li&gt;
@@ -45919,28 +46604,6 @@
 
   &lt;/ol&gt;
 
-  &lt;p&gt;When the &lt;code
-  title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern()&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLVideoElement&lt;/code&gt;, then the frame at the &lt;span&gt;current
-  playback position&lt;/span&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;span
-  title=&quot;concept-video-intrinsic-width&quot;&gt;intrinsic width&lt;/span&gt; and
-  &lt;span title=&quot;concept-video-intrinsic-height&quot;&gt;intrinsic height&lt;/span&gt;
-  of the &lt;span&gt;media resource&lt;/span&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;/div&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
   &lt;hr&gt;
 
   &lt;p&gt;If a radial gradient or repeated pattern is used when the
@@ -45955,7 +46618,7 @@
 
 
 
-  &lt;h6&gt;Drawing rectangles to the canvas&lt;/h6&gt;
+  &lt;h6&gt;Drawing rectangles to the bitmap&lt;/h6&gt;
 
   &lt;p&gt;There are three methods that immediately draw rectangles to the
   bitmap. They each take four arguments; the first two give the &lt;var
@@ -45994,7 +46657,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+    &lt;p&gt;Clears all pixels on the bitmap in the given rectangle to transparent black.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -46002,7 +46665,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+    &lt;p&gt;Paints the given rectangle onto the bitmap, using the current fill style.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -46010,7 +46673,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the bitmap, using the current stroke style.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -46024,15 +46687,15 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in the
-   specified rectangle that also intersect the current &lt;span&gt;clipping
-   region&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in
+   the specified rectangle that also intersect the current
+   &lt;span&gt;clipping region&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Clear the pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; to a fully
    transparent black, erasing any previous image.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Clear regions that cover the pixels&lt;/span&gt; in &lt;var
-   title=&quot;&quot;&gt;pixels&lt;/var&gt; in the &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;&lt;/li&gt;
+   title=&quot;&quot;&gt;pixels&lt;/var&gt; on the &lt;span&gt;scratch bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -46084,7 +46747,7 @@
 
 
 
-  &lt;h6&gt;Drawing text to the canvas&lt;/h6&gt;
+  &lt;h6&gt;Drawing text to the bitmap&lt;/h6&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
 
@@ -46130,8 +46793,8 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; interface provides the
-  following methods for rendering text directly to the canvas.&lt;/p&gt;
+  &lt;p&gt;The &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; interface provides the following methods for
+  rendering text.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-fillText&quot;&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
@@ -46191,6 +46854,16 @@
 
    &lt;/li&gt;
 
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text preparation algorithm&lt;/span&gt; used a font that has an &lt;span&gt;origin&lt;/span&gt;
+   that is not the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the &lt;span&gt;entry script&lt;/span&gt;'s
+   &lt;span&gt;origin&lt;/span&gt; (even if &quot;using a font&quot; means just checking if that font has a particular
+   glyph in it before falling back to another font), then set the &lt;span&gt;scratch bitmap&lt;/span&gt;'s
+   &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag to false.&lt;/p&gt;&lt;/li&gt; &lt;!--
+   because fonts could consider sensitive material, I guess; and because that sensitivity could
+   extend to whether or not a particular glyph is in the font in the first place. --&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
   &lt;/ol&gt;
 
 &lt;!--v6DVT - this is commented out until CSS can get its act together
@@ -46200,7 +46873,7 @@
 WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
 
 ALSO NOTE THAT THIS PROBABLY NEEDS ENTIRELY REVISITING NOW THAT WE
-HAVE REJIGGED HOW TEXT WORKS IN v5
+HAVE REJIGGED HOW TEXT WORKS IN v5 (e.g. remember security)
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
@@ -46348,20 +47021,11 @@
 
 v6DVT (also check for '- -' bits in the part above) --&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-measureText&quot;&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
-  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
-  is invoked, the user agent must replace all the &lt;span title=&quot;space
-  character&quot;&gt;space characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
-  U+0020 SPACE characters, and then must form a hypothetical
-  infinitely-wide CSS line box containing a single inline box
-  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
-  properties at their initial values except the 'white-space' property
-  of the inline element set to 'pre' and the 'font' property of the
-  inline element set to the current font of the context as given by
-  the &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute, and
-  must then create a new &lt;code&gt;TextMetrics&lt;/code&gt; object with its
-  attributes set as described in the following list.
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-measureText&quot;&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt; method takes one
+  argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method is invoked, the user agent must run the
+  &lt;span&gt;text preparation algorithm&lt;/span&gt;, passing it &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; and the
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object, and then using the returned inline box must create a
+  new &lt;code&gt;TextMetrics&lt;/code&gt; object with its attributes set as described in the following list.
 &lt;!--ADD-TOPIC:Security--&gt;
   If doing these measurements requires using a font that has an
   &lt;span&gt;origin&lt;/span&gt; that is not the &lt;span title=&quot;same
@@ -46677,11 +47341,26 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Optionally, &lt;a href=&quot;#inform&quot;&gt;inform the user&lt;/a&gt; that the
-    focus is at the location given by the intended path. User agents
-    may wait until the next time the &lt;span&gt;event loop&lt;/span&gt; reaches
-    its &quot;update the rendering&quot; step to optionally inform the user.&lt;/p&gt;
+    &lt;p&gt;Optionally, run the appropriate step from the following list:&lt;/p&gt;
 
+    &lt;dl&gt;
+
+     &lt;dt&gt;If the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span
+     title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt; is &lt;span
+     title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;&lt;a href=&quot;#inform&quot;&gt;Inform the user&lt;/a&gt; that the focus is at the location given by the
+     intended path. User agents may wait until the next time the &lt;span&gt;event loop&lt;/span&gt; reaches its
+     &quot;update the rendering&quot; step to optionally inform the user.&lt;/p&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Add instructions to the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;list of pending interface
+     actions&lt;/span&gt; that &lt;a href=&quot;#inform&quot;&gt;inform the user&lt;/a&gt; that the focus is at the location of
+     the bitmap given by the intended path.&lt;/p&gt;&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
    &lt;/li&gt;
 
   &lt;/ol&gt;
@@ -46719,20 +47398,38 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Optionally, &lt;a href=&quot;#inform&quot;&gt;inform the user&lt;/a&gt; that the
-    focus is at the location given by the intended path. User agents
-    may wait until the next time the &lt;span&gt;event loop&lt;/span&gt; reaches
-    its &quot;update the rendering&quot; step to optionally inform the user.&lt;/p&gt;
+    &lt;p&gt;Optionally, run the appropriate step from the following list:&lt;/p&gt;
 
+    &lt;dl&gt;
+
+     &lt;dt&gt;If the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span
+     title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt; is &lt;span
+     title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;&lt;a href=&quot;#inform&quot;&gt;Inform the user&lt;/a&gt; that the focus is at the location given by the
+     intended path. The user agent may wait until the next time the &lt;span&gt;event loop&lt;/span&gt; reaches
+     its &quot;update the rendering&quot; step to optionally inform the user.&lt;/p&gt;&lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Add instructions to the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;list of pending interface
+     actions&lt;/span&gt; that &lt;a href=&quot;#inform&quot;&gt;inform the user&lt;/a&gt; that the focus is at the location of
+     the bitmap given by the intended path.&lt;/p&gt;&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-scrollPathIntoView&quot;&gt;&lt;code&gt;scrollPathIntoView()&lt;/code&gt;&lt;/dfn&gt;
-  method, when invoked, must run the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-scrollPathIntoView&quot;&gt;&lt;code&gt;scrollPathIntoView()&lt;/code&gt;&lt;/dfn&gt;
+  method, when invoked, if the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span
+  title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt; is &lt;span
+  title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt;, must run the following steps; and otherwise, must add
+  instructions to the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;list of pending interface actions&lt;/span&gt;
+  that run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -46748,11 +47445,13 @@
    title=&quot;&quot;&gt;notional child&lt;/var&gt; into view&lt;/span&gt; with the &lt;var
    title=&quot;&quot;&gt;align to top flag&lt;/var&gt; set.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Optionally, &lt;a href=&quot;#inform&quot;&gt;inform the user&lt;/a&gt; that the
-   caret and/or selection cover &lt;var title=&quot;&quot;&gt;the specified
-   rectangle&lt;/var&gt; of the canvas. User agents may wait until the next
-   time the &lt;span&gt;event loop&lt;/span&gt; reaches its &quot;update the rendering&quot;
-   step to optionally inform the user.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Optionally, &lt;a href=&quot;#inform&quot;&gt;inform the user&lt;/a&gt; that the caret and/or selection cover
+   &lt;var title=&quot;&quot;&gt;the specified rectangle&lt;/var&gt; of the canvas. If the
+   &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span
+   title=&quot;concept-canvas-context-bitmap-mode&quot;&gt;context bitmap mode&lt;/span&gt; was &lt;span
+   title=&quot;concept-canvas-fixed&quot;&gt;fixed&lt;/span&gt; when the method was invoked, the user agent may wait
+   until the next time the &lt;span&gt;event loop&lt;/span&gt; reaches its &quot;update the rendering&quot; step to
+   optionally inform the user.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -46896,12 +47595,13 @@
 
 
 
-  &lt;h6&gt;Drawing images to the canvas&lt;/h6&gt;
+  &lt;h6&gt;Drawing images&lt;/h6&gt;
 
-  &lt;p&gt;To draw images onto the canvas, the &lt;dfn
-  title=&quot;dom-context-2d-drawImage&quot;&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
+  &lt;p&gt;To draw images, the &lt;dfn title=&quot;dom-context-2d-drawImage&quot;&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
 
+  &lt;div class=&quot;impl&quot;&gt;
+
   &lt;p&gt;This method can be invoked with three different sets of arguments:&lt;/p&gt;
 
   &lt;ul class=&quot;brief&quot;&gt;
@@ -46910,13 +47610,8 @@
    &lt;li&gt;&lt;code title=&quot;&quot;&gt;drawImage(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;)&lt;/code&gt;
   &lt;/ul&gt;
 
-  &lt;!-- v3: drawImage() of an ImageData object might make sense (when resizing as well as filtering) - ack Charles Pritchard --&gt;
+  &lt;/div&gt;
 
-  &lt;p&gt;Each of those three can take either an
-  &lt;code&gt;HTMLImageElement&lt;/code&gt;, an &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, or
-  an &lt;code&gt;HTMLVideoElement&lt;/code&gt; for the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument.&lt;/p&gt;
-
   &lt;dl class=&quot;domintro&quot;&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;)&lt;/dt&gt;
@@ -46944,170 +47639,125 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;If not specified, the &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt; and &lt;var
-  title=&quot;&quot;&gt;dh&lt;/var&gt; arguments must default to the values of &lt;var
-  title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, interpreted such that
-  one CSS pixel in the image is treated as one unit in the canvas
-  coordinate space. If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, and &lt;var
-  title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, they must default to 0, 0,
-  the image's intrinsic width in image pixels, and the image's
-  intrinsic height in image pixels, respectively. If the image has no
-  intrinsic dimensions, the &lt;i&gt;concrete object size&lt;/i&gt; must be used
-  instead, as determined using the CSS &quot;&lt;a
-  href=&quot;<A HREF="http://dev.w3.org/csswg/css3-images/#default-sizing">http://dev.w3.org/csswg/css3-images/#default-sizing</A>&quot;&gt;Concrete
-  Object Size Resolution&lt;/a&gt;&quot; algorithm, with the &lt;i&gt;specified
-  size&lt;/i&gt; having neither a definite width nor height, nor any
-  additional contraints, the object's intrinsic properties being those
-  of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument, and the &lt;i&gt;default object
-  size&lt;/i&gt; being the size of the &lt;code&gt;canvas&lt;/code&gt; element. &lt;a
-  href=&quot;#refsCSSIMAGES&quot;&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;When the &lt;code title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage()&lt;/code&gt; method is invoked, the user
+  agent must run the following steps:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;HTMLImageElement&lt;/code&gt;, &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, or
-  &lt;code&gt;HTMLVideoElement&lt;/code&gt;.&lt;/p&gt; &lt;!-- createPattern() has an
-  equivalent paragraph --&gt;
+  &lt;ol&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLImageElement&lt;/code&gt; object that is not &lt;span
-  title=&quot;img-good&quot;&gt;fully decodable&lt;/span&gt;, or if the &lt;var
-  title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;HTMLVideoElement&lt;/code&gt;
-  object whose &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
-  attribute is either &lt;code
-  title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
-  title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;, then the
-  implementation must return without drawing anything.&lt;/p&gt; &lt;!--
-  createPattern() has an equivalent paragraph --&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Check the usability of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument&lt;/span&gt;. If this
+   returns &lt;i&gt;aborted&lt;/i&gt;, then an exception has been thrown and the method doesn't return anything;
+   abort these steps. If it returns &lt;i&gt;bad&lt;/i&gt;, then abort these steps without drawing anything.
+   Otherwise it returns &lt;i&gt;good&lt;/i&gt;; continue with these steps.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLCanvasElement&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;InvalidStateError&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+   &lt;li&gt;
 
-  &lt;p&gt;The source rectangle is the rectangle whose corners are the four
-  points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var
-  title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var
-  title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var
-  title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+    &lt;p&gt;Establish the source and destination rectangles as follows:&lt;/p&gt;
 
-  &lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
-  arguments is zero, the implementation must throw an
-  &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;
+    &lt;p&gt;If not specified, the &lt;var title=&quot;&quot;&gt;dw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;dh&lt;/var&gt; arguments must
+    default to the values of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, interpreted such
+    that one CSS pixel in the image is treated as one unit in the &lt;span&gt;scratch bitmap&lt;/span&gt;'s
+    coordinate space. If the &lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
+    and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are omitted, they must default to 0, 0, the image's
+    intrinsic width in image pixels, and the image's intrinsic height in image pixels, respectively.
+    If the image has no intrinsic dimensions, the &lt;i&gt;concrete object size&lt;/i&gt; must be used instead,
+    as determined using the CSS &quot;&lt;a
+    href=&quot;<A HREF="http://dev.w3.org/csswg/css3-images/#default-sizing">http://dev.w3.org/csswg/css3-images/#default-sizing</A>&quot;&gt;Concrete Object Size Resolution&lt;/a&gt;&quot;
+    algorithm, with the &lt;i&gt;specified size&lt;/i&gt; having neither a definite width nor height, nor any
+    additional contraints, the object's intrinsic properties being those of the &lt;var
+    title=&quot;&quot;&gt;image&lt;/var&gt; argument, and the &lt;i&gt;default object size&lt;/i&gt; being the size of the
+    &lt;span&gt;scratch bitmap&lt;/span&gt;. &lt;a href=&quot;#refsCSSIMAGES&quot;&gt;[CSSIMAGES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The destination rectangle is the rectangle whose corners are the
-  four points (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;),
-  (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;var
-  title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var
-  title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
+    &lt;p&gt;The source rectangle is the rectangle whose corners are the four points (&lt;var
+    title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var
+    title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var
+    title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;),
+    (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var
+    title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
 
-  &lt;p&gt;When the source rectangle is outside the source image, it must be
-  clipped to the source image, and the destination rectangle must be
-  clipped in the same proportion.&lt;/p&gt;
+    &lt;p&gt;The destination rectangle is the rectangle whose corners are the four points (&lt;var
+    title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var
+    title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;+&lt;var
+    title=&quot;&quot;&gt;dw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;),
+    (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;+&lt;var
+    title=&quot;&quot;&gt;dh&lt;/var&gt;&lt;/span&gt;).&lt;/p&gt;
 
-  &lt;p&gt;When &lt;code title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage()&lt;/code&gt; is
-  invoked, the region of the image specified by the source rectangle
-  must be painted on the region of the canvas specified by the
-  destination rectangle, after applying the &lt;span
-  title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-  matrix&lt;/span&gt; to the points of the destination rectangle.&lt;/p&gt;
+    &lt;p&gt;When the source rectangle is outside the source image, it must be clipped to the source
+    image, and the destination rectangle must be clipped in the same proportion.&lt;/p&gt;
 
-  &lt;p&gt;The original image data of the source image must be used, not the
-  image as it is rendered (e.g. &lt;code
-  title=&quot;attr-dim-width&quot;&gt;width&lt;/code&gt; and &lt;code
-  title=&quot;attr-dim-height&quot;&gt;height&lt;/code&gt; attributes on the source
-  element have no effect). The image data must be processed in the
-  original direction, even if the dimensions given are negative. &lt;!--
-  remove that last sentence if it causes confusion. Someone once
-  suggested that 5,5,-2,-2 was different than 3,3,2,2; this is trying
-  to clarify that this is no the case. --&gt;&lt;/p&gt;
+   &lt;/li&gt;
 
-  &lt;p&gt;If the &lt;code
-  title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
-  attribute is set to true, then the user agent should attempt to
-  apply a smoothing algorithm to the image data when it is scaled.
-  Otherwise, the image must be rendered using nearest-neighbor
-  interpolation.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;If one of the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments is zero, throw an
+   &lt;code&gt;IndexSizeError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;p class=&quot;note&quot;&gt;This specification does not define the precise
-  algorithm to use when scaling an image when the &lt;code
-  title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
-  attribute is set to true.&lt;/p&gt;
+   &lt;li&gt;
 
-  &lt;p class=&quot;note&quot;&gt;When a canvas is drawn onto itself, the &lt;span&gt;drawing
-  model&lt;/span&gt; requires the source to be copied before the image is drawn
-  back onto the canvas, so it is possible to copy parts of a canvas
-  onto overlapping parts of itself.&lt;/p&gt;
+    &lt;p&gt;Paint the region of the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument specified by the source rectangle
+    on the region of the rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt; specified by the
+    destination rectangle, after applying the &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
+    transformation matrix&lt;/span&gt; to the points of the destination rectangle.&lt;/p&gt;
 
-  &lt;p&gt;If the original image data is a bitmap image, the value painted
-  at a point in the destination rectangle is computed by filtering the
-  original image data. The user agent may use any filtering algorithm
-  (for example bilinear interpolation or nearest-neighbor). When the
-  filtering algorithm requires a pixel value from outside the original
-  image data, it must instead use the value from the nearest edge
-  pixel. (That is, the filter uses 'clamp-to-edge' behavior.)&lt;/p&gt;
-  &lt;!-- see CORE-32111 and:
-       <A HREF="http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737">http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737</A>
-       <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11">http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11</A>
-  --&gt;
-  &lt;!-- createPattern() has a similar paragraph with different rules --&gt;
+    &lt;p&gt;The image data must be processed in the original direction, even if the dimensions given are
+    negative. &lt;!-- note: that last sentence has several times been needed to correct people who
+    suggested that 5,5,-2,-2 was different than 3,3,2,2 --&gt;&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code
-  title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage()&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+    &lt;p&gt;If the &lt;code title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
+    attribute is set to true, then the user agent should attempt to apply a smoothing algorithm to
+    the image data when it is scaled. Otherwise, the image must be rendered using nearest-neighbor
+    interpolation.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLVideoElement&lt;/code&gt;, then the frame at the &lt;span&gt;current
-  playback position&lt;/span&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;span
-  title=&quot;concept-video-intrinsic-width&quot;&gt;intrinsic width&lt;/span&gt; and
-  &lt;span title=&quot;concept-video-intrinsic-height&quot;&gt;intrinsic height&lt;/span&gt;
-  of the &lt;span&gt;media resource&lt;/span&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- createPattern() has an equivalent paragraph --&gt;
+    &lt;p class=&quot;note&quot;&gt;This specification does not define the precise algorithm to use when scaling an
+    image when the &lt;code title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
+    attribute is set to true.&lt;/p&gt;
 
-  &lt;p&gt;Images are painted without affecting the current path, and are
-  subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the
-  &lt;span&gt;clipping region&lt;/span&gt;, and &lt;span
-  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
-  operators&lt;/span&gt;.&lt;/p&gt;
+    &lt;p class=&quot;note&quot;&gt;When a &lt;code&gt;canvas&lt;/code&gt; or &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object is
+    drawn onto itself, the &lt;span&gt;drawing model&lt;/span&gt; requires the source to be copied before the
+    image is drawn, so it is possible to copy parts of a &lt;code&gt;canvas&lt;/code&gt; or &lt;span&gt;scratch
+    bitmap&lt;/span&gt; onto overlapping parts of itself.&lt;/p&gt;
 
+    &lt;p&gt;If the original image data is a bitmap image, the value painted at a point in the destination
+    rectangle is computed by filtering the original image data. The user agent may use any filtering
+    algorithm (for example bilinear interpolation or nearest-neighbor). When the filtering algorithm
+    requires a pixel value from outside the original image data, it must instead use the value from
+    the nearest edge pixel. (That is, the filter uses 'clamp-to-edge' behavior.)&lt;/p&gt;
+    &lt;!-- see CORE-32111 and:
+         <A HREF="http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737">http://krijnhoetmer.nl/irc-logs/whatwg/20100818#l-737</A>
+         <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11">http://www.w3.org/Bugs/Public/show_bug.cgi?id=10799#c11</A>
+    --&gt;
+    &lt;!-- createPattern() has a similar paragraph with different rules --&gt;
+
+    &lt;p&gt;Images are painted without affecting the current path, and are subject to &lt;span
+    title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span title=&quot;dom-context-2d-globalAlpha&quot;&gt;global
+    alpha&lt;/span&gt;, the &lt;span&gt;clipping region&lt;/span&gt;, and &lt;span
+    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition operators&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;span&gt;the &lt;var title=&quot;&quot;&gt;image argument&lt;/var&gt; is not origin-clean&lt;/span&gt;, set the
+   &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag
+   to false.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+  &lt;/ol&gt;
+
   &lt;/div&gt;
 
 
   &lt;h6&gt;Hit regions&lt;/h6&gt;
 
-  &lt;p&gt;Each &lt;code&gt;canvas&lt;/code&gt; element whose &lt;span&gt;primary
-  context&lt;/span&gt; is a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object
-  must have a &lt;dfn&gt;hit region list&lt;/dfn&gt; associated with its
+  &lt;p&gt;A &lt;dfn&gt;hit region list&lt;/dfn&gt; is a list of &lt;span title=&quot;hit region&quot;&gt;hit regions&lt;/span&gt; for a
   bitmap.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;span&gt;hit region list&lt;/span&gt; is a list of &lt;span title=&quot;hit
-  region&quot;&gt;hit regions&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;dfn&gt;hit region&lt;/dfn&gt; consists of the following information:&lt;/p&gt;
 
-  &lt;p&gt;Each &lt;dfn&gt;hit region&lt;/dfn&gt; consists of the following
-  information:&lt;/p&gt;
-
   &lt;ul&gt;
 
-   &lt;li&gt;&lt;p&gt;A &lt;dfn title=&quot;hit region's set of pixels&quot;&gt;set of
-   pixels&lt;/dfn&gt; on the &lt;code&gt;canvas&lt;/code&gt; element's bitmap for which
-   this region is responsible.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;A &lt;dfn title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/dfn&gt; on the bitmap for which this
+   region is responsible.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;A &lt;dfn title=&quot;hit region's bounding circumference&quot;&gt;bounding
-   circumference&lt;/dfn&gt; on the &lt;code&gt;canvas&lt;/code&gt; element's bitmap
-   that surrounds the &lt;span&gt;hit region's set of pixels&lt;/span&gt; as they
-   stood when it was created.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;A &lt;dfn title=&quot;hit region's bounding circumference&quot;&gt;bounding circumference&lt;/dfn&gt; on the
+   bitmap that surrounds the &lt;span&gt;hit region's set of pixels&lt;/span&gt; as they stood when it was
+   created.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Optionally, a non-empty string representing an &lt;dfn
    title=&quot;hit region's ID&quot;&gt;ID&lt;/dfn&gt; for distinguishing the region
@@ -47134,11 +47784,11 @@
     control&quot;&gt;control&lt;/span&gt;, or an &lt;span title=&quot;hit region's unbacked
     region description&quot;&gt;unbacked region description&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;A &lt;dfn title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a
-    reference to an &lt;code&gt;Element&lt;/code&gt; node, to which, in certain
-    conditions, the user agent will route events, and from which the
-    user agent will determine the state of the hit region for the
-    purposes of accessibility tools.&lt;/p&gt;
+    &lt;p&gt;A &lt;dfn title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a reference to an
+    &lt;code&gt;Element&lt;/code&gt; node, to which, in certain conditions, the user agent will route events,
+    and from which the user agent will determine the state of the hit region for the purposes of
+    accessibility tools. (The control is ignored when it is not a descendant of the
+    &lt;code&gt;canvas&lt;/code&gt; element.)&lt;/p&gt;
 
     &lt;p&gt;An &lt;dfn title=&quot;hit region's unbacked region
     description&quot;&gt;unbacked region description&lt;/dfn&gt; consists of the
@@ -47166,8 +47816,7 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Adds a hit region to the canvas bitmap. The argument is an
-    object with the following members:&lt;/p&gt;
+    &lt;p&gt;Adds a hit region to the bitmap. The argument is an object with the following members:&lt;/p&gt;
 
     &lt;dl&gt;
 
@@ -47234,14 +47883,14 @@
      ID in the mouse events.&lt;/li&gt;
 
      &lt;li&gt;With a control, they can make routing events to DOM elements
-     automatic, allowing e.g. clicks on a canvas to automatically
+     automatic, allowing e.g. clicks on a &lt;code&gt;canvas&lt;/code&gt; to automatically
      submit a form via a &lt;code&gt;button&lt;/code&gt; element.&lt;/li&gt;
 
      &lt;li&gt;With a label, they can make it easier for users to explore a
-     canvas without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
+     &lt;code&gt;canvas&lt;/code&gt; without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
 
      &lt;li&gt;With a cursor, they can make it easier for different regions
-     of the canvas to have different cursors, with the user agent
+     of the &lt;code&gt;canvas&lt;/code&gt; to have different cursors, with the user agent
      automatically switching between them.&lt;/li&gt;
 
     &lt;/ul&gt;
@@ -47276,11 +47925,9 @@
   &lt;span&gt;hit region&lt;/span&gt; for which &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
   &lt;span&gt;ancestor region&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;&lt;dfn&gt;The region identified by the ID&lt;/dfn&gt; &lt;var
-  title=&quot;&quot;&gt;ID&lt;/var&gt; in a &lt;code&gt;canvas&lt;/code&gt; element &lt;var
-  title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
-  algorithm (which can return a &lt;span&gt;hit region&lt;/span&gt; or
-  nothing):&lt;/p&gt;
+  &lt;p&gt;&lt;dfn&gt;The region identified by the ID&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; in a bitmap &lt;var
+  title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
+  &lt;span&gt;hit region&lt;/span&gt; or nothing):&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -47288,8 +47935,7 @@
    these steps.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
-   list&lt;/span&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/p&gt;&lt;/li&gt;
+   list&lt;/span&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;span&gt;hit region&lt;/span&gt; in &lt;var
    title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;span title=&quot;hit region's ID&quot;&gt;ID&lt;/span&gt;
@@ -47301,21 +47947,14 @@
 
   &lt;/ol&gt;
 
-  &lt;p&gt;&lt;dfn&gt;The region representing the control&lt;/dfn&gt; &lt;var
-  title=&quot;&quot;&gt;control&lt;/var&gt; for a &lt;code&gt;canvas&lt;/code&gt; element &lt;var
-  title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
-  algorithm (which can return a &lt;span&gt;hit region&lt;/span&gt; or
-  nothing):&lt;/p&gt;
+  &lt;p&gt;&lt;dfn&gt;The region representing the control&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; for a bitmap &lt;var
+  title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
+  &lt;span&gt;hit region&lt;/span&gt; or nothing):&lt;/p&gt;
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var
-   title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
-   list&lt;/span&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/p&gt;&lt;/li&gt;
+   list&lt;/span&gt; associated with &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;span&gt;hit region&lt;/span&gt; in &lt;var
    title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;span title=&quot;hit region's
@@ -47368,22 +48007,19 @@
    title=&quot;&quot;&gt;region&lt;/var&gt; be that &lt;span&gt;hit region's parent&lt;/span&gt;,
    and return to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property
-   for the &lt;code&gt;canvas&lt;/code&gt; element. &lt;a
-   href=&quot;#refsCSSUI&quot;&gt;[CSSUI]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property for the &lt;code&gt;canvas&lt;/code&gt;
+   element, if any; if there isn't one, return 'auto'. &lt;a href=&quot;#refsCSSUI&quot;&gt;[CSSUI]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
-  &lt;p&gt;&lt;dfn&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a
-  &lt;code&gt;canvas&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the
-  value returned by the following algorithm (which can return a
+  &lt;p&gt;&lt;dfn&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a bitmap &lt;var
+  title=&quot;&quot;&gt;bitmap&lt;/var&gt; is the value returned by the following algorithm (which can return a
   &lt;span&gt;hit region&lt;/span&gt; or nothing):&lt;/p&gt;
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
-   list&lt;/span&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region list&lt;/span&gt; associated with &lt;var
+   title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;span&gt;hit region&lt;/span&gt; in &lt;var
    title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;span title=&quot;hit region's set of
@@ -47395,35 +48031,30 @@
 
   &lt;/ol&gt;
 
-  &lt;p&gt;To &lt;dfn&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var
-  title=&quot;&quot;&gt;pixels&lt;/var&gt; on a &lt;code&gt;canvas&lt;/code&gt; element &lt;var
-  title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user agent must run the following
-  steps:&lt;/p&gt;
+  &lt;p&gt;To &lt;dfn&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on a bitmap &lt;var
+  title=&quot;&quot;&gt;bitmap&lt;/var&gt;, the user agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
-   list&lt;/span&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region list&lt;/span&gt; associated with &lt;var
+   title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Remove all pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; from the
    &lt;span title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/span&gt; of
    each &lt;span&gt;hit region&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Garbage-collect the regions&lt;/span&gt; of &lt;var
-   title=&quot;&quot;&gt;ancestor&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+   title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
-  &lt;p&gt;To &lt;dfn&gt;garbage-collect the regions&lt;/dfn&gt; of a
-  &lt;code&gt;canvas&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user
+  &lt;p&gt;To &lt;dfn&gt;garbage-collect the regions&lt;/dfn&gt; of a bitmap &lt;var title=&quot;&quot;&gt;bitmap&lt;/var&gt;, the user
   agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
-   list&lt;/span&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
-   bitmap.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region list&lt;/span&gt; associated with &lt;var
+   title=&quot;&quot;&gt;bitmap&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; be the first
    &lt;span&gt;hit region&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; to have an
@@ -47444,10 +48075,10 @@
   &lt;/ol&gt;
 
   &lt;p class=&quot;note&quot;&gt;Adding a new region and calling &lt;code
-  title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect()&lt;/code&gt; are the two ways
-  this clearing algorithm can be invoked. Resizing the canvas also
-  clears the &lt;span&gt;hit region list&lt;/span&gt; (since it clears the canvas
-  back to its initial state).&lt;/p&gt;
+  title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect()&lt;/code&gt; are the two ways this clearing algorithm can
+  be invoked. The &lt;span&gt;hit region list&lt;/span&gt; itself is also reset when the rendering context is
+  reset, e.g. when a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object is bound to or unbound from a
+  &lt;code&gt;canvas&lt;/code&gt;, or when the dimensions of the bitmap are changed.&lt;/p&gt;
 
   &lt;hr&gt;
 
@@ -47494,7 +48125,7 @@
    let &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; be &lt;span&gt;the
    region identified by the ID&lt;/span&gt; given by the &lt;code
    title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt; member's value in this
-   &lt;code&gt;canvas&lt;/code&gt; element, if any. If the &lt;code
+   &lt;span&gt;scratch bitmap&lt;/span&gt;, if any. If the &lt;code
    title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt; member is null or no such
    region currently exists, let &lt;var title=&quot;&quot;&gt;previous region for this
    ID&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
@@ -47508,7 +48139,7 @@
    null, then let &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; be &lt;span&gt;the
    region identified by the ID&lt;/span&gt; given by the &lt;code
    title=&quot;dom-HitRegionOptions-parent&quot;&gt;parent&lt;/code&gt; member's value in
-   this &lt;code&gt;canvas&lt;/code&gt; element, if any. If the &lt;code
+   the &lt;span&gt;scratch bitmap&lt;/span&gt;, if any. If the &lt;code
    title=&quot;dom-HitRegionOptions-parent&quot;&gt;parent&lt;/code&gt; member is null or
    no such region currently exists, let &lt;var title=&quot;&quot;&gt;parent
    region&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
@@ -47714,7 +48345,7 @@
    null, then let &lt;var title=&quot;&quot;&gt;previous region for the control&lt;/var&gt;
    be &lt;span&gt;the region representing the control&lt;/span&gt; given by the
    &lt;code title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; member's
-   value for this &lt;code&gt;canvas&lt;/code&gt; element, if any. If the &lt;code
+   value for this &lt;span&gt;scratch bitmap&lt;/span&gt;, if any. If the &lt;code
    title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; member is null
    or no such region currently exists, let &lt;var title=&quot;&quot;&gt;previous
    region for the control&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
@@ -47728,33 +48359,26 @@
    its descendants, as we know that our parent isn't part of that
    subtree. --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
-   control&lt;/var&gt;, remove it from the &lt;code&gt;canvas&lt;/code&gt; element's
-   &lt;span&gt;hit region list&lt;/span&gt;; then, if it had a &lt;span title=&quot;hit
-   region's parent&quot;&gt;parent&lt;/span&gt; region, decrement that &lt;span&gt;hit
-   region's child count&lt;/span&gt; by one.&lt;/p&gt;&lt;/li&gt; &lt;!-- we garbage
-   collect the regions below --&gt;
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this control&lt;/var&gt;, remove it from the
+   &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;hit region list&lt;/span&gt;; then, if it had a &lt;span title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/span&gt; region, decrement that &lt;span&gt;hit region's child count&lt;/span&gt; by
+   one.&lt;/p&gt;&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
-   ID&lt;/var&gt;, remove it, and all &lt;span title=&quot;hit region&quot;&gt;hit
-   regions&lt;/span&gt; for which it is an &lt;span&gt;ancestor region&lt;/span&gt;,
-   from the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span&gt;hit region
-   list&lt;/span&gt;; then, if it had a &lt;span title=&quot;hit region's
-   parent&quot;&gt;parent&lt;/span&gt; region, decrement that &lt;span&gt;hit region's
-   child count&lt;/span&gt; by one.&lt;/p&gt;&lt;/li&gt; &lt;!-- we garbage collect the
-   regions below --&gt;
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this ID&lt;/var&gt;, remove it, and all &lt;span
+   title=&quot;hit region&quot;&gt;hit regions&lt;/span&gt; for which it is an &lt;span&gt;ancestor region&lt;/span&gt;, from the
+   &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span&gt;hit region list&lt;/span&gt;; then, if it had a &lt;span title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/span&gt; region, decrement that &lt;span&gt;hit region's child count&lt;/span&gt; by
+   one.&lt;/p&gt;&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;, increment
    its &lt;span&gt;hit region's child count&lt;/span&gt; by one.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Clear regions that cover the pixels&lt;/span&gt; in &lt;var
-   title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;span title=&quot;hit region's set of
-   pixels&quot;&gt;set of pixels&lt;/span&gt; on this &lt;code&gt;canvas&lt;/code&gt;
-   element.&lt;/p&gt;&lt;/li&gt; &lt;!-- this is what garbage collects the earlier
-   regions --&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Clear regions that cover the pixels&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;span
+   title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/span&gt; on this &lt;span&gt;scratch
+   bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt; &lt;!-- this is what garbage collects the earlier regions --&gt;
 
-   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;code&gt;canvas&lt;/code&gt;
-   element's &lt;span&gt;hit region list&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;span&gt;scratch bitmap&lt;/span&gt;'s element's &lt;span&gt;hit
+   region list&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -47764,21 +48388,18 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be &lt;span&gt;the region
-   identified by the ID&lt;/span&gt; given by the method's argument in this
-   &lt;code&gt;canvas&lt;/code&gt; element, if any. If no such region currently
-   exists, abort these steps.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be &lt;span&gt;the region identified by the ID&lt;/span&gt; given by
+   the method's argument in the rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt;. If no such region
+   currently exists, abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, and all &lt;span title=&quot;hit
-   region&quot;&gt;hit regions&lt;/span&gt; for which it is an &lt;span&gt;ancestor
-   region&lt;/span&gt;, from the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span&gt;hit
-   region list&lt;/span&gt;; then, if it had a &lt;span title=&quot;hit region's
-   parent&quot;&gt;parent&lt;/span&gt; region, decrement that &lt;span&gt;hit region's
-   child count&lt;/span&gt; by one.&lt;/p&gt;&lt;/li&gt; &lt;!-- we garbage collect the
-   regions below --&gt;
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, and all &lt;span title=&quot;hit region&quot;&gt;hit regions&lt;/span&gt; for
+   which it is an &lt;span&gt;ancestor region&lt;/span&gt;, from the rendering context's &lt;span&gt;scratch
+   bitmap&lt;/span&gt;'s &lt;span&gt;hit region list&lt;/span&gt;; then, if it had a &lt;span title=&quot;hit region's
+   parent&quot;&gt;parent&lt;/span&gt; region, decrement that &lt;span&gt;hit region's child count&lt;/span&gt; by
+   one.&lt;/p&gt;&lt;/li&gt; &lt;!-- we garbage collect the regions below --&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Garbage-collect the regions&lt;/span&gt; of &lt;var
-   title=&quot;&quot;&gt;ancestor&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Garbage-collect the regions&lt;/span&gt; of the rendering context's &lt;span&gt;scratch
+   bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -47820,11 +48441,10 @@
   ID&lt;/span&gt; if the mouse was over a hit region when the event was
   fired.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;MouseEvent&lt;/code&gt; is to be fired at a
-  &lt;code&gt;canvas&lt;/code&gt; element by the user agent in response to a
-  pointing device action, the user agent must instead follow these
-  steps. If these steps say to &lt;i&gt;act as normal&lt;/i&gt;, that means that
-  the event must be fired as it would have had these requirements not
+  &lt;p&gt;When a &lt;code&gt;MouseEvent&lt;/code&gt; is to be fired at a &lt;code&gt;canvas&lt;/code&gt; element by the user
+  agent in response to a pointing device action, if the &lt;code&gt;canvas&lt;/code&gt; element has a &lt;span&gt;hit
+  region list&lt;/span&gt;, the user agent must instead follow these steps. If these steps say to &lt;i&gt;act
+  as normal&lt;/i&gt;, that means that the event must be fired as it would have had these requirements not
   been applied.&lt;/p&gt;
 
   &lt;ol&gt;
@@ -47838,7 +48458,7 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be the &lt;span&gt;hit
    region&lt;/span&gt; that is &lt;span title=&quot;the region for a pixel&quot;&gt;the
    region for the pixel&lt;/span&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on this
-   &lt;code&gt;canvas&lt;/code&gt; element, if any.&lt;/p&gt;&lt;/li&gt;
+   &lt;code&gt;canvas&lt;/code&gt; element's bitmap, if any.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, then act as
    normal and abort these steps.&lt;/p&gt;&lt;/li&gt;
@@ -47851,9 +48471,9 @@
    event object's &lt;code title=&quot;dom-MouseEvent-region&quot;&gt;region&lt;/code&gt;
    attribute to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;var
-   title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;span title=&quot;hit region's
-   control&quot;&gt;control&lt;/span&gt;, if any.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;span title=&quot;the control represented by a
+   region&quot;&gt;control represented by&lt;/span&gt; &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; for this &lt;code&gt;canvas&lt;/code&gt;
+   element, if any.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then target the
    event object at &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; instead of the
@@ -47866,12 +48486,11 @@
 
   &lt;hr&gt;
 
-  &lt;p&gt;When a user's pointing device cursor is positioned over a
-  &lt;code&gt;canvas&lt;/code&gt; element, user agents should render the pointing
-  device cursor according to the cursor specification described by
-  &lt;span title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit
-  region&lt;/span&gt; that is &lt;span title=&quot;the region for a pixel&quot;&gt;the
-  region for the pixel&lt;/span&gt; that the pointing device designates.&lt;/p&gt;
+  &lt;p&gt;When a user's pointing device cursor is positioned over a &lt;code&gt;canvas&lt;/code&gt; element, user
+  agents should render the pointing device cursor according to the cursor specification described by
+  &lt;span title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit region&lt;/span&gt; that is &lt;span
+  title=&quot;the region for a pixel&quot;&gt;the region for the pixel&lt;/span&gt; that the pointing device designates
+  on the &lt;code&gt;canvas&lt;/code&gt; element's bitmap.&lt;/p&gt;
 
   &lt;hr&gt;
 
@@ -47891,27 +48510,23 @@
   region's bounding circumference&lt;/span&gt; gives the region of the
   screen to use when representing the node (if appropriate).&lt;/p&gt;
 
-  &lt;p&gt;The semantics of a &lt;span&gt;hit region&lt;/span&gt; for the purposes of
-  this virtual DOM tree are those of the &lt;span&gt;hit region's
-  control&lt;/span&gt;, if it has one, or else of a non-interactive element
-  whose ARIA role, if any, is that given by the &lt;span&gt;hit region's
-  ARIA role&lt;/span&gt;, and whose textual representation, if any, is given
-  by the &lt;span&gt;hit region's label&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;The semantics of a &lt;span&gt;hit region&lt;/span&gt; for the purposes of this virtual DOM tree are those
+  of the &lt;span title=&quot;the control represented by a region&quot;&gt;the control represented by the
+  region&lt;/span&gt;, if it has one, or else of a non-interactive element whose ARIA role, if any, is
+  that given by the &lt;span&gt;hit region's ARIA role&lt;/span&gt;, and whose textual representation, if any,
+  is given by the &lt;span&gt;hit region's label&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var
-  title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant of a &lt;code&gt;canvas&lt;/code&gt; element
-  and there is &lt;span title=&quot;the region representing the control&quot;&gt;a
-  region representing the control&lt;/span&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that
-  &lt;code&gt;canvas&lt;/code&gt; element, then the element's position relative to
-  the document should be presented as if it was that region in the
-  &lt;code&gt;canvas&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
+  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant
+  of a &lt;code&gt;canvas&lt;/code&gt; element and there is &lt;span title=&quot;the region representing the control&quot;&gt;a
+  region representing the control&lt;/span&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that &lt;code&gt;canvas&lt;/code&gt;
+  element's bitmap, then the element's position relative to the document should be presented as if
+  it was that region in the &lt;code&gt;canvas&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
 
-  &lt;p&gt;The semantics of a &lt;span&gt;hit region&lt;/span&gt; for the purposes of
-  this virtual DOM tree are those of the &lt;span&gt;hit region's
-  control&lt;/span&gt;, if it has one, or else of a non-interactive element
-  whose ARIA role, if any, is that given by the &lt;span&gt;hit region's
-  ARIA role&lt;/span&gt;, and whose textual representation, if any, is given
-  by the &lt;span&gt;hit region's label&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;The semantics of a &lt;span&gt;hit region&lt;/span&gt; for the purposes of this virtual DOM tree are those
+  of the &lt;span title=&quot;the control represented by a region&quot;&gt;the control represented by the
+  region&lt;/span&gt;, if it has one, or else of a non-interactive element whose ARIA role, if any, is
+  that given by the &lt;span&gt;hit region's ARIA role&lt;/span&gt;, and whose textual representation, if any,
+  is given by the &lt;span&gt;hit region's label&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Thus, for instance, a user agent on a touch-screen
   device could provide haptic feedback when the user croses over a
@@ -47969,8 +48584,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns an &lt;code&gt;ImageData&lt;/code&gt; object containing the image
-    data for the given rectangle of the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns an &lt;code&gt;ImageData&lt;/code&gt; object containing the image data for the given rectangle of
+    the bitmap.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception if the either
     of the width or height arguments are zero.&lt;/p&gt;
@@ -47984,8 +48599,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns an &lt;code&gt;ImageData&lt;/code&gt; object containing the image
-    data for the given rectangle of the canvas.&lt;/p&gt;
+    &lt;p&gt;Returns an &lt;code&gt;ImageData&lt;/code&gt; object containing the image data for the given rectangle of
+    the bitmap.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception if the either
     of the width or height arguments are zero.&lt;/p&gt;
@@ -48021,9 +48636,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the data from the given &lt;code&gt;ImageData&lt;/code&gt; object
-    onto the canvas. If a dirty rectangle is provided, only the pixels
-    from that rectangle are painted.&lt;/p&gt;
+    &lt;p&gt;Paints the data from the given &lt;code&gt;ImageData&lt;/code&gt; object onto the bitmap. If a dirty
+    rectangle is provided, only the pixels from that rectangle are painted.&lt;/p&gt;
 
     &lt;p&gt;The &lt;code title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt;
     and &lt;code
@@ -48036,8 +48650,7 @@
     &lt;p&gt;Throws a &lt;code&gt;NotSupportedError&lt;/code&gt; exception if any of the
     arguments are not finite.&lt;/p&gt;
 
-    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space
-    unit on the canvas.&lt;/p&gt;
+    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space unit on the bitmap.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -48045,10 +48658,9 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Paints the data from the given &lt;code&gt;ImageData&lt;/code&gt; object
-    onto the canvas, at the canvas bitmap's native resolution. If a
-    dirty rectangle is provided, only the pixels from that rectangle
-    are painted.&lt;/p&gt;
+    &lt;p&gt;Paints the data from the given &lt;code&gt;ImageData&lt;/code&gt; object onto the bitmap, at the bitmap's
+    native pixel density. If a dirty rectangle is provided, only the pixels from that rectangle are
+    painted.&lt;/p&gt;
 
     &lt;p&gt;The &lt;code title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt;
     and &lt;code
@@ -48087,70 +48699,54 @@
   argument. The &lt;code&gt;ImageData&lt;/code&gt; object returned must be filled
   with transparent black.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;dfn
-  title=&quot;dom-context-2d-createImageDataHD&quot;&gt;&lt;code&gt;createImageDataHD()&lt;/code&gt;&lt;/dfn&gt;
-  method is invoked (with its two arguments &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;) it must return a new &lt;code&gt;ImageData&lt;/code&gt;
-  object representing a rectangle with a width in equal to the
-  absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var
-  title=&quot;&quot;&gt;scale&lt;/var&gt; and a height equal to the absolute magnitude of
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt;,
-  where &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; is the number of pixels in the
-  canvas bitmap per coordinate space units. The &lt;code&gt;ImageData&lt;/code&gt;
-  object returned must be filled with transparent black.&lt;/p&gt;
+  &lt;p&gt;When the &lt;dfn title=&quot;dom-context-2d-createImageDataHD&quot;&gt;&lt;code&gt;createImageDataHD()&lt;/code&gt;&lt;/dfn&gt;
+  method is invoked (with its two arguments &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;) it
+  must return a new &lt;code&gt;ImageData&lt;/code&gt; object representing a rectangle with a width in equal to
+  the absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; and a
+  height equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var
+  title=&quot;&quot;&gt;scale&lt;/var&gt;, where &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; is the number of pixels in the &lt;span&gt;scratch
+  bitmap&lt;/span&gt; per coordinate space units. The &lt;code&gt;ImageData&lt;/code&gt; object returned must be
+  filled with transparent black.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-getImageData&quot;&gt;&lt;code&gt;getImageData(&lt;var
-  title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if either the &lt;var
-  title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception; otherwise,
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-getImageData&quot;&gt;&lt;code&gt;getImageData(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if
+  either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero, throw an
+  &lt;code&gt;IndexSizeError&lt;/code&gt; exception; otherwise,
   &lt;!--ADD-TOPIC:Security--&gt;
-  if the &lt;code&gt;canvas&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
-  to false, it must throw a &lt;code&gt;SecurityError&lt;/code&gt; exception;
+  if the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt;
+  flag is set to false, it must throw a &lt;code&gt;SecurityError&lt;/code&gt; exception;
   &lt;!--REMOVE-TOPIC:Security--&gt;
-  otherwise, it must return an &lt;code&gt;ImageData&lt;/code&gt; object with
-  width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
-  representing the canvas bitmap for the area of the canvas denoted by
-  the rectangle whose corners are the four points (&lt;var
-  title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var
-  title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var
-  title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span
-  title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in
-  canvas coordinate space units. If the canvas bitmap does not
-  represent each coordinate space unit square using exactly one pixel,
-  the value of each pixel in the returned abject must be derived from
-  the value(s) of the pixel(s) in the canvas bitmap that correspond to
-  the same coordinate. Pixels outside the canvas must be returned as
-  transparent black. Pixels must be returned as non-premultiplied
+  otherwise, it must return an &lt;code&gt;ImageData&lt;/code&gt; object with width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and
+  height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; representing the &lt;span&gt;scratch bitmap&lt;/span&gt; for the area of that
+  bitmap denoted by the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var
+  title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span
+  title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span
+  title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in the bitmap's coordinate space
+  units. If the bitmap does not represent each coordinate space unit square using exactly one pixel,
+  the value of each pixel in the returned abject must be derived from the value(s) of the pixel(s)
+  in the bitmap that correspond to the same coordinate. Pixels outside the &lt;span&gt;scratch
+  bitmap&lt;/span&gt; must be returned as transparent black. Pixels must be returned as non-premultiplied
   alpha values.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-getImageDataHD&quot;&gt;&lt;code&gt;getImageDataHD(&lt;var
-  title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, if either the &lt;var
-  title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  throw an &lt;code&gt;IndexSizeError&lt;/code&gt; exception; otherwise,
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-getImageDataHD&quot;&gt;&lt;code&gt;getImageDataHD(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must,
+  if either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero, throw an
+  &lt;code&gt;IndexSizeError&lt;/code&gt; exception; otherwise,
   &lt;!--ADD-TOPIC:Security--&gt;
-  if the &lt;code&gt;canvas&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
-  to false, it must throw a &lt;code&gt;SecurityError&lt;/code&gt; exception;
+  if the &lt;span&gt;scratch bitmap&lt;/span&gt;'s &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt;
+  flag is set to false, it must throw a &lt;code&gt;SecurityError&lt;/code&gt; exception;
   &lt;!--REMOVE-TOPIC:Security--&gt;
-  otherwise, it must return an &lt;code&gt;ImageData&lt;/code&gt; object with
-  width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt;
-  and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var
-  title=&quot;&quot;&gt;scale&lt;/var&gt; representing the canvas bitmap data for the
-  area of the canvas denoted by the rectangle whose corners are the
-  four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span
-  title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var
-  title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span
-  title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in
-  canvas coordinate space units. Pixels outside the canvas must be
-  returned as transparent black. Pixels must be returned as
-  non-premultiplied alpha values.&lt;/p&gt;
+  otherwise, it must return an &lt;code&gt;ImageData&lt;/code&gt; object with width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;
+  multiplied by &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; multiplied by &lt;var
+  title=&quot;&quot;&gt;scale&lt;/var&gt; representing the &lt;span&gt;scratch bitmap&lt;/span&gt; for the area of that bitmap
+  denoted by the rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var
+  title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span
+  title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;span
+  title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;), in the bitmap's coordinate space
+  units. Pixels outside the &lt;span&gt;scratch bitmap&lt;/span&gt; must be returned as transparent black.
+  Pixels must be returned as non-premultiplied alpha values.&lt;/p&gt;
 
   &lt;p&gt;New &lt;code&gt;ImageData&lt;/code&gt; objects must be initialized so that
   their &lt;dfn title=&quot;dom-imagedata-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;
@@ -48177,14 +48773,11 @@
   consecutive indices starting with 0 for the top left pixel's red
   component. &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-putImageData&quot;&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn
-  title=&quot;dom-context-2d-putImageDataHD&quot;&gt;&lt;code&gt;putImageDataHD()&lt;/code&gt;&lt;/dfn&gt;
-  methods write data from &lt;code&gt;ImageData&lt;/code&gt; structures back to
-  the canvas. Their arguments are: &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;dirtyX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;, &lt;var
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-putImageData&quot;&gt;&lt;code&gt;putImageData()&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
+  title=&quot;dom-context-2d-putImageDataHD&quot;&gt;&lt;code&gt;putImageDataHD()&lt;/code&gt;&lt;/dfn&gt; methods write data from
+  &lt;code&gt;ImageData&lt;/code&gt; structures back to the rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt;.
+  Their arguments are: &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;, &lt;var
   title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;.&lt;/p&gt;
 
   &lt;p&gt;When the last four arguments to these methods are omitted, they
@@ -48252,7 +48845,7 @@
 
     &lt;p&gt;If, after those changes, either &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;
     or &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt; is negative or zero, stop these
-    steps without affecting the canvas.&lt;/p&gt;
+    steps without affecting any bitmaps.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -48266,22 +48859,17 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Draw the region of the image data in the horizontal rectangle
-      whose top left corner is at (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var
-      title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at
-      (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var
-      title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span title=&quot;&quot;&gt;&lt;var
-      title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;)
-      onto the canvas, aligned such that the top left of the rectangle
-      is at coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var
-      title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
+      &lt;p&gt;Draw the region of the image data in the horizontal rectangle whose top left corner is at
+      (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at
+      (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span
+      title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;) onto the rendering
+      context's &lt;span&gt;scratch bitmap&lt;/span&gt;, aligned such that the top left of the rectangle is at
+      coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
 
-      &lt;p&gt;If the &lt;code
-      title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
-      attribute is set to true, then the user agent should attempt to
-      apply a smoothing algorithm to the image data if the canvas does
-      not have exactly one device pixel per coordinate space unit in
-      the canvas bitmap.&lt;/p&gt;
+      &lt;p&gt;If the &lt;code title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
+      attribute is set to true, then the user agent should attempt to apply a smoothing algorithm to
+      the image data if the &lt;span&gt;scratch bitmap&lt;/span&gt; does not have exactly one device pixel per
+      coordinate space unit.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -48293,32 +48881,26 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
-        of the device pixel in the canvas bitmap corresponding to the &lt;var
-        title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the canvas coordinate space.&lt;/p&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate of the device pixel in
+        the &lt;span&gt;scratch bitmap&lt;/span&gt; corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in
+        the &lt;span&gt;scratch bitmap&lt;/span&gt;'s coordinate space.&lt;/p&gt;
 
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
-        of the device pixel in the canvas bitmap corresponding to the &lt;var
-        title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the canvas coordinate space.&lt;/p&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate of the device pixel in
+        the &lt;span&gt;scratch bitmap&lt;/span&gt; corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in
+        the &lt;span&gt;scratch bitmap&lt;/span&gt;'s coordinate space.&lt;/p&gt;
 
        &lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;For all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;
-       and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var
-       title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-       title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var
-       title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;
-       and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-       title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var
-       title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var
-       title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the four channels of
-       the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
-       title=&quot;&quot;&gt;y&lt;/var&gt;) in the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data
-       structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var
-       title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;,
-       &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var
-       title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the canvas bitmap of the
-       canvas.&lt;/p&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;For all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span
+       title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span
+       title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt; and &lt;span
+       title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span
+       title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the
+       four channels of the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) in
+       the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data structure to the pixel with coordinate (&lt;span
+       title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;, &lt;span
+       title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the
+       rendering context's &lt;span&gt;scratch bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
       &lt;/ol&gt;
 
@@ -48511,28 +49093,22 @@
   &lt;!-- conformance criteria for painting are described in the &quot;drawing
   model&quot; section below --&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives an alpha value that is applied to shapes and images
-  before they are composited onto the canvas. The value must be in the
-  range from 0.0 (fully transparent) to 1.0 (no additional
-  transparency). If an attempt is made to set the attribute to a value
-  outside this range, including Infinity and Not-a-Number (NaN)
-  values, the attribute must retain its previous value. When the
-  context is created, the &lt;code
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; attribute must
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-globalAlpha&quot;&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt; attribute gives an
+  alpha value that is applied to shapes and images before they are composited onto the &lt;span&gt;scratch
+  bitmap&lt;/span&gt;. The value must be in the range from 0.0 (fully transparent) to 1.0 (no additional
+  transparency). If an attempt is made to set the attribute to a value outside this range, including
+  Infinity and Not-a-Number (NaN) values, the attribute must retain its previous value. When the
+  context is created, the &lt;code title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; attribute must
   initially have the value 1.0.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets how shapes and images are drawn onto the existing
-  bitmap, once they have had &lt;code
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; and the
-  current transformation matrix applied. It must be set to a value
-  from the following list. In the descriptions below, the source
-  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
-  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
-  state of the bitmap.&lt;/p&gt;
+  attribute sets how shapes and images are drawn onto the &lt;span&gt;scratch bitmap&lt;/span&gt;, once they
+  have had &lt;code title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; and the current
+  transformation matrix applied. It must be set to a value from the following list. In the
+  descriptions below, the source image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
+  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current state of the &lt;span&gt;scratch
+  bitmap&lt;/span&gt;.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -48879,24 +49455,24 @@
    component of every pixel in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; by &lt;code
    title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;When shadows are drawn&lt;/span&gt;, composite &lt;var
-   title=&quot;&quot;&gt;B&lt;/var&gt; within the &lt;span&gt;clipping region&lt;/span&gt; over the
-   current canvas bitmap using the current composition
-   operator.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;When shadows are drawn&lt;/span&gt;, composite &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; within the
+   &lt;span&gt;clipping region&lt;/span&gt; over the current &lt;span&gt;scratch bitmap&lt;/span&gt; using the current
+   composition operator.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Multiply the alpha component of every pixel in &lt;var
    title=&quot;&quot;&gt;A&lt;/var&gt; by &lt;code
    title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Composite &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; within the &lt;span&gt;clipping
-   region&lt;/span&gt; over the current canvas bitmap using the current
-   composition operator.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Composite &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; within the &lt;span&gt;clipping region&lt;/span&gt; over the current
+   &lt;span&gt;scratch bitmap&lt;/span&gt; using the current composition operator.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
   &lt;/div&gt;
 
 
+
+
   &lt;h6&gt;Best practices&lt;/h6&gt;
 
   &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
@@ -49018,16 +49594,59 @@
 
   &lt;!--END 2dcontext--&gt;
 
-  &lt;/div&gt;&lt;!--data-component--&gt;
 
+  &lt;h5&gt;Pixel density&lt;/h5&gt;
 
+  &lt;p&gt;The user agent may use any square pixel density for the bitmaps of a &lt;code&gt;canvas&lt;/code&gt; and
+  its rendering contexts. Once a &lt;code&gt;canvas&lt;/code&gt; has a bitmap, that canvas must keep its
+  resolution for its lifetime.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;In general, user agents are encouraged to use a pixel density equal to the screen
+  pixel density. Ideally, the number of device pixels per CSS pixel would be a multiple of two.
+  Several factors can affect the screen pixel density: most prominently the actual display pixel
+  density, but also important is the current zoom level.&lt;/p&gt;
+
+  &lt;p&gt;All the bitmaps created during a single &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; for
+  &lt;code&gt;canvas&lt;/code&gt; elements and &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; objects must have the same
+  pixel density.
+  &lt;!--INSERT FINGERPRINT--&gt;
+  &lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;partial interface &lt;span&gt;Screen&lt;/span&gt; {
+  readonly attribute double &lt;span title=&quot;dom-screen-canvasResolution&quot;&gt;canvasResolution&lt;/span&gt;;
+};&lt;/pre&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;window&lt;/var&gt; . &lt;code title=&quot;dom-Window-screen&quot;&gt;screen&lt;/code&gt; . &lt;code title=&quot;dom-screen-canvasResolution&quot;&gt;canvasResolution&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the pixel density that has been, or will be, used for bitmaps during this &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;dom-screen-canvasResolution&quot;&gt;&lt;code&gt;canvasResolution&lt;/code&gt;&lt;/dfn&gt; attribute of
+  the &lt;code&gt;Screen&lt;/code&gt; object must return the pixel density, in image pixels per coordinate space
+  units, that any &lt;code&gt;canvas&lt;/code&gt; and &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; bitmaps created
+  during this &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; will use (or have used). &lt;a
+  href=&quot;#refsCSSOMVIEW&quot;&gt;[CSSOMVIEW]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+  &lt;div class=&quot;impl&quot;&gt;
+
   &lt;h5&gt;Color spaces and color correction&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;canvas&lt;/code&gt; APIs must perform color correction at only two points: when rendering
-  images with their own gamma correction and color space information onto the canvas, to convert the
-  image to the color space used by the canvas (e.g. using the 2D Context's &lt;code
+  images with their own gamma correction and color space information onto a bitmap, to convert the
+  image to the color space used by the bitmaps (e.g. using the 2D Context's &lt;code
   title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage()&lt;/code&gt; method with an &lt;code&gt;HTMLImageElement&lt;/code&gt;
   object), and when rendering the actual canvas bitmap to the output device.&lt;/p&gt;
 
@@ -49062,82 +49681,98 @@
   &lt;/div&gt;
 
 
-&lt;!--ADD-TOPIC:Security--&gt;
+
+  &lt;h5&gt;Serializing bitmaps to a file&lt;/h5&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;h5&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/h5&gt;
+  &lt;p&gt;When a user agent is to create &lt;dfn&gt;a serialization of the bitmap as a file&lt;/dfn&gt;, optionally
+  with some given &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, and optionally with a &lt;var title=&quot;&quot;&gt;native&lt;/var&gt;
+  flag set, it must create an image file in the format given by the first value of &lt;var
+  title=&quot;&quot;&gt;arguments&lt;/var&gt;, or, if there are no &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, in the PNG format. &lt;a
+  href=&quot;#refsPNG&quot;&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;&lt;strong&gt;Information leakage&lt;/strong&gt; can occur if scripts from
-  one &lt;span&gt;origin&lt;/span&gt; can access information (e.g. read pixels)
-  from images from another origin (one that isn't the &lt;span
-  title=&quot;same origin&quot;&gt;same&lt;/span&gt;).&lt;/p&gt;
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;native&lt;/var&gt; flag is set, or if the bitmap has one pixel per coordinate
+  space unit, then the image file must have the same pixel data (before compression, if applicable)
+  as the bitmap, and if the file format used supports encoding resolution metadata, the resolution
+  of that bitmap (device pixels per coordinate space units being interpreted as image pixels per CSS
+  pixel) must be given as well.&lt;/p&gt;
 
-  &lt;p&gt;To mitigate this, &lt;code&gt;canvas&lt;/code&gt; elements are defined to
-  have a flag indicating whether they are &lt;i&gt;origin-clean&lt;/i&gt;. All
-  &lt;code&gt;canvas&lt;/code&gt; elements must start with their
-  &lt;i&gt;origin-clean&lt;/i&gt; set to true. The flag must be set to false if
-  any of the following actions occur:&lt;/p&gt;
+  &lt;p&gt;Otherwise, the image file's pixel data must be the bitmap's pixel data scaled to one image
+  pixel per coordinate space unit, and if the file format used supports encoding resolution
+  metadata, the resolution must be given as 96dpi (one image pixel per CSS pixel).&lt;/p&gt;
 
-  &lt;ul&gt;
+  &lt;p&gt;If &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; is not empty, the first value must be interpreted as a &lt;span
+  title=&quot;MIME type&quot;&gt;MIME type&lt;/span&gt; giving the format to use. If the type has any parameters, it
+  must be treated as not supported.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code
-   title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage()&lt;/code&gt; method is
-   called with an &lt;code&gt;HTMLImageElement&lt;/code&gt; or an
-   &lt;code&gt;HTMLVideoElement&lt;/code&gt; whose &lt;span&gt;origin&lt;/span&gt; is not the
-   &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as that of the
-   &lt;code&gt;Document&lt;/code&gt; object that owns the &lt;code&gt;canvas&lt;/code&gt;
-   element.&lt;/p&gt;&lt;/li&gt;
+  &lt;p class=&quot;example&quot;&gt;For example, the value &quot;&lt;code&gt;image/png&lt;/code&gt;&quot; would mean to generate a PNG
+  image, the value &quot;&lt;code&gt;image/jpeg&lt;/code&gt;&quot; would mean to generate a JPEG image, and the value
+  &quot;&lt;code&gt;image/svg+xml&lt;/code&gt;&quot; would mean to generate an SVG image (which would require that the
+  user agent track how the bitmap was generated, an unlikely, though potentially awesome,
+  feature).&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code
-   title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage()&lt;/code&gt; method is
-   called with an &lt;code&gt;HTMLCanvasElement&lt;/code&gt; whose
-   &lt;i&gt;origin-clean&lt;/i&gt; flag is false.&lt;/p&gt;&lt;/li&gt;
+  &lt;p&gt;User agents must support PNG (&quot;&lt;code&gt;image/png&lt;/code&gt;&quot;). User agents may support other types.
+  If the user agent does not support the requested type, it must create the file using the PNG
+  format. &lt;a href=&quot;#refsPNG&quot;&gt;[PNG]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code
-   title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; attribute is set
-   to a &lt;code&gt;CanvasPattern&lt;/code&gt; object that was created from an
-   &lt;code&gt;HTMLImageElement&lt;/code&gt; or an &lt;code&gt;HTMLVideoElement&lt;/code&gt;
-   whose &lt;span&gt;origin&lt;/span&gt; was not the &lt;span title=&quot;same
-   origin&quot;&gt;same&lt;/span&gt; as that of the &lt;code&gt;Document&lt;/code&gt; object
-   that owns the &lt;code&gt;canvas&lt;/code&gt; element when the pattern was
-   created.&lt;/p&gt;&lt;/li&gt;
+  &lt;p&gt;User agents must &lt;span title=&quot;converted to ASCII lowercase&quot;&gt;convert the provided type to ASCII
+  lowercase&lt;/span&gt; before establishing if they support that type.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code
-   title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; attribute is set
-   to a &lt;code&gt;CanvasPattern&lt;/code&gt; object that was created from an
-   &lt;code&gt;HTMLCanvasElement&lt;/code&gt; whose &lt;i&gt;origin-clean&lt;/i&gt; flag was
-   false when the pattern was created.&lt;/p&gt;&lt;/li&gt;
+  &lt;p&gt;For image types that do not support an alpha channel, the serialized image must be the bitmap
+  image composited onto a solid black background using the source-over operator.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code
-   title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; attribute is
-   set to a &lt;code&gt;CanvasPattern&lt;/code&gt; object that was created from an
-   &lt;code&gt;HTMLImageElement&lt;/code&gt; or an &lt;code&gt;HTMLVideoElement&lt;/code&gt;
-   whose &lt;span&gt;origin&lt;/span&gt; was not the &lt;span title=&quot;same
-   origin&quot;&gt;same&lt;/span&gt; as that of the &lt;code&gt;Document&lt;/code&gt; object
-   that owns the &lt;code&gt;canvas&lt;/code&gt; element when the pattern was
-   created.&lt;/p&gt;&lt;/li&gt;
+  &lt;p&gt;If the first argument in &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; gives a type corresponding to one of the
+  types given in the first column of the following table, and the user agent supports that type,
+  then the subsequent arguments, if any, must be treated as described in the second cell of that
+  row.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code
-   title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; attribute is
-   set to a &lt;code&gt;CanvasPattern&lt;/code&gt; object that was created from an
-   &lt;code&gt;HTMLCanvasElement&lt;/code&gt; whose &lt;i&gt;origin-clean&lt;/i&gt; flag was
-   false when the pattern was created.&lt;/p&gt;&lt;/li&gt;
+  &lt;/div&gt;
 
-   &lt;li&gt;&lt;p&gt;The element's 2D context's &lt;code
-   title=&quot;dom-context-2d-fillText&quot;&gt;fillText()&lt;/code&gt; or &lt;code
-   title=&quot;dom-context-2d-fillText&quot;&gt;strokeText()&lt;/code&gt; methods are
-   invoked and consider using a font that has an &lt;span&gt;origin&lt;/span&gt;
-   that is not the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as that of
-   the &lt;code&gt;Document&lt;/code&gt; object that owns the &lt;code&gt;canvas&lt;/code&gt;
-   element. (The font doesn't even have to be used; all that matters
-   is whether the font was considered for any of the glyphs
-   drawn.)&lt;/p&gt;&lt;/li&gt; &lt;!-- because fonts could consider sensitive
-   material, I guess; and because that sensitivity could extend to
-   whether or not a particular glyph is in the font in the first
-   place. --&gt;
+  &lt;table id=&quot;canvas-serialization-arguments&quot;&gt;
+   &lt;caption&gt;Arguments for serialization methods&lt;/caption&gt;
+   &lt;thead&gt;
+    &lt;tr&gt; &lt;th&gt; Type &lt;th&gt; Other arguments &lt;th&gt; Reference
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;td&gt; &lt;code&gt;image/jpeg&lt;/code&gt;
+     &lt;td&gt; The second argument&lt;span class=&quot;impl&quot;&gt;, if it&lt;/span&gt; is a number in the range 0.0 to 1.0
+     inclusive&lt;span class=&quot;impl&quot;&gt;, must be&lt;/span&gt; treated as the desired quality level. &lt;span
+     class=&quot;impl&quot;&gt;If it is not a number or is outside that range, the user agent must use its
+     default value, as if the argument had been omitted.&lt;/span&gt;
+     &lt;td&gt; &lt;a href=&quot;#refsJPEG&quot;&gt;[JPEG]&lt;/a&gt;
+  &lt;/table&gt;
 
-  &lt;/ul&gt;
+  &lt;div class=&quot;impl&quot;&gt;
 
+  &lt;p&gt;For the purposes of these rules, an argument is considered to be a number if it is converted to
+  an IDL double value by the rules for handling arguments of type &lt;code title=&quot;&quot;&gt;any&lt;/code&gt; in the
+  Web IDL specification. &lt;a href=&quot;#refsWEBIDL&quot;&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;Other arguments must be ignored and must not cause the user agent to throw an exception. A
+  future version of this specification will probably define other parameters to be passed to these
+  methods to allow authors to more carefully control compression settings, image metadata, etc.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+&lt;!--ADD-TOPIC:Security--&gt;
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;h5&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/h5&gt;
+
+  &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
+
+  &lt;p&gt;&lt;strong&gt;Information leakage&lt;/strong&gt; can occur if scripts from
+  one &lt;span&gt;origin&lt;/span&gt; can access information (e.g. read pixels)
+  from images from another origin (one that isn't the &lt;span
+  title=&quot;same origin&quot;&gt;same&lt;/span&gt;).&lt;/p&gt;
+
+  &lt;p&gt;To mitigate this, bitmaps used with &lt;code&gt;canvas&lt;/code&gt; elements are defined to have a flag
+  indicating whether they are &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt;. All
+  bitmaps start with their &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; set to
+  true. The flag is set to false when cross-origin images or fonts are used.&lt;/p&gt;
+
   &lt;p&gt;The &lt;code title=&quot;dom-canvas-toDataURL&quot;&gt;toDataURL()&lt;/code&gt;, &lt;code
   title=&quot;dom-canvas-toDataURLHD&quot;&gt;toDataURLHD()&lt;/code&gt;, &lt;code
   title=&quot;dom-canvas-toBlob&quot;&gt;toBlob()&lt;/code&gt;, &lt;code
@@ -49146,10 +49781,9 @@
   methods check the flag and will throw a &lt;code&gt;SecurityError&lt;/code&gt;
   exception rather than leak cross-origin data.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;Even resetting the canvas state by changing its
-  &lt;code title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt; or &lt;code
-  title=&quot;attr-canvas-height&quot;&gt;height&lt;/code&gt; attributes doesn't reset
-  the &lt;i&gt;origin-clean&lt;/i&gt; flag.&lt;/p&gt;
+  &lt;p&gt;The flag can be reset in certain situations; for example, when a
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; is bound to a new &lt;code&gt;canvas&lt;/code&gt;, the bitmap is cleared
+  and its flag reset.&lt;/p&gt;
 
   &lt;/div&gt;
 &lt;!--REMOVE-TOPIC:Security--&gt;
@@ -79292,9 +79926,8 @@
 
   &lt;/table&gt;
 
-  &lt;p&gt;&lt;small&gt;&dagger; This case is only possible if the &lt;code
-  title=&quot;attr-iframe-sandbox&quot;&gt;sandbox&lt;/code&gt; attribute also allows
-  scripts.&lt;/small&gt;&lt;/p&gt;
+  &lt;p class=&quot;tablenote&quot;&gt;&lt;small&gt;&dagger; This case is only possible if the &lt;code
+  title=&quot;attr-iframe-sandbox&quot;&gt;sandbox&lt;/code&gt; attribute also allows scripts.&lt;/small&gt;&lt;/p&gt;
 
   &lt;div class=&quot;impl&quot;&gt;
 
@@ -87738,18 +88371,16 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;Run the oldest &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; on one
-   of the &lt;span&gt;event loop&lt;/span&gt;'s &lt;span title=&quot;task queue&quot;&gt;task
-   queues&lt;/span&gt;, ignoring tasks whose associated
-   &lt;code&gt;Document&lt;/code&gt;s are not &lt;span&gt;fully active&lt;/span&gt;. The user
-   agent may pick any &lt;span&gt;task queue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Run the oldest &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; on one of the &lt;span&gt;event
+   loop&lt;/span&gt;'s &lt;span title=&quot;task queue&quot;&gt;task queues&lt;/span&gt;, if any, ignoring tasks whose
+   associated &lt;code&gt;Document&lt;/code&gt;s are not &lt;span&gt;fully active&lt;/span&gt;. The user agent may pick any
+   &lt;span&gt;task queue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;!-- warning! if you renumber these steps, make sure to update the
-   &quot;spin the event loop&quot; algorithm below! --&gt;
+   &lt;!-- warning! if you renumber these steps, make sure to update the &quot;spin the event loop&quot;
+   algorithm below! --&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;storage mutex&lt;/span&gt; is now owned by the
-   &lt;span&gt;event loop&lt;/span&gt;, release it so that it is once again
-   free.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;storage mutex&lt;/span&gt; is now owned by the &lt;span&gt;event loop&lt;/span&gt;, release it
+   so that it is once again free.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Remove that task from its &lt;span&gt;task queue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
@@ -87798,17 +88429,17 @@
 
   &lt;hr&gt;
 
-  &lt;p&gt;When the user agent is to &lt;dfn&gt;provide a stable state&lt;/dfn&gt;, if
-  any asynchronously-running algorithms are &lt;dfn title=&quot;await a stable
-  state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user agent must run
-  their &lt;dfn&gt;synchronous section&lt;/dfn&gt; and then resume running their
-  asynchronous algorithm (if appropriate).&lt;/p&gt;
+  &lt;p&gt;When the user agent is to &lt;dfn&gt;provide a stable state&lt;/dfn&gt;, if any asynchronously-running
+  algorithms are &lt;dfn title=&quot;await a stable state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user
+  agent must run their &lt;dfn&gt;synchronous section&lt;/dfn&gt; and then resume running their asynchronous
+  algorithm (if appropriate).&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;A &lt;span&gt;synchronous section&lt;/span&gt; never mutates
-  the DOM, runs any script, or has any other side-effects.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;A &lt;span&gt;synchronous section&lt;/span&gt; never mutates the DOM, runs any script, or has
+  any side-effects detectable from another &lt;span&gt;synchronous section&lt;/span&gt;, and thus &lt;span
+  title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/span&gt; can be run in any order.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;Steps in &lt;span title=&quot;synchronous
-  section&quot;&gt;synchronous sections&lt;/span&gt; are marked with &amp;#x231B;.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;Steps in &lt;span title=&quot;synchronous section&quot;&gt;synchronous sections&lt;/span&gt; are marked
+  with &amp;#x231B;.&lt;/p&gt;
 
   &lt;hr&gt;
 
@@ -90716,7 +91347,7 @@
 &lt;!--ADD-TOPIC:Security--&gt;
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;h5&gt;Security and privacy&lt;/h5&gt;
+  &lt;h6&gt;Security and privacy&lt;/h6&gt;
 
   &lt;p&gt;These mechanisms can introduce a number of concerns, in
   particular privacy concerns.&lt;/p&gt;
@@ -90806,7 +91437,7 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;h5 id=&quot;sample-handler-impl&quot;&gt;Sample user interface&lt;/h5&gt;
+  &lt;h6 id=&quot;sample-handler-impl&quot;&gt;Sample user interface&lt;/h6&gt;
 
   &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
 
@@ -91066,10 +91697,285 @@
    &lt;/ol&gt;
 
   &lt;/div&gt;
-&lt;!--TOPIC:HTML--&gt;
 
 
+&lt;!--TOPIC:Canvas--&gt;
 
+  &lt;h3&gt;Images&lt;/h3&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;ImageBitmap&lt;/dfn&gt; {
+  // opaque object
+};
+
+callback &lt;dfn&gt;ImageBitmapCallback&lt;/dfn&gt; = void (&lt;span&gt;ImageBitmap&lt;/span&gt; image);
+
+[NoInterfaceObject]
+interface &lt;dfn&gt;ImageBitmapFactories&lt;/dfn&gt; {
+  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;HTMLImageElement&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback);
+  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;HTMLVideoElement&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback);
+  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;HTMLCanvasElement&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback); 
+  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;Blob&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback);
+  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback); 
+  void &lt;span title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/span&gt;(&lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; image, &lt;span&gt;ImageBitmapCallback&lt;/span&gt; _callback); 
+};
+&lt;span&gt;Window&lt;/span&gt; implements &lt;span&gt;ImageBitmapFactories&lt;/span&gt;;
+&lt;span&gt;WorkerUtils&lt;/span&gt; implements &lt;span&gt;ImageBitmapFactories&lt;/span&gt;;&lt;/pre&gt;
+
+  &lt;p&gt;An &lt;code&gt;ImageBitmap&lt;/code&gt; object represents a bitmap image that can be painted to a canvas
+  without undue latency.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The exact judgement of what is undue latency of this is left up to the
+  implementer, but in general if making use of the bitmap requires network I/O, or even local disk
+  I/O, then the latency is probably undue; whereas if it only requires a blocking read from a GPU or
+  system RAM, the latency is probably acceptable.&lt;/p&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;Window&lt;/var&gt; . &lt;code title=&quot;dom-createImageBitmap&quot;&gt;createImageBitmap&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Takes &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, which can be an &lt;code&gt;img&lt;/code&gt; element,
+    &lt;code&gt;video&lt;/code&gt;, or &lt;code&gt;canvas&lt;/code&gt; element, a &lt;code&gt;Blob&lt;/code&gt; object, an
+    &lt;code&gt;ImageData&lt;/code&gt; object, or a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object, and
+    asynchronously calls &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with a new &lt;code&gt;ImageBitmap&lt;/code&gt; as its
+    argument when it has created one.&lt;/p&gt;
+
+    &lt;p&gt;If no &lt;code&gt;ImageBitmap&lt;/code&gt; object can be constructed, for example because the provided
+    &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; data is not actually an image, then the &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;
+    is invoked with null as the value instead.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;InvalidStateError&lt;/code&gt; exception if the source image is not in a valid
+    state (e.g. an &lt;code&gt;img&lt;/code&gt; element that hasn't finished loading, or a
+    &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object whose bitmap data has zero length along one or both
+    dimensions). Throws a &lt;code&gt;SecurityError&lt;/code&gt; exception if the script is not allowed to
+    access the image data of the source image (e.g. a &lt;code&gt;video&lt;/code&gt; that is
+    &lt;span&gt;CORS-cross-origin&lt;/span&gt;, or a &lt;code&gt;canvas&lt;/code&gt; being drawn on by a script in a worker
+    from another &lt;span&gt;origin&lt;/span&gt;).&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;An &lt;code&gt;ImageBitmap&lt;/code&gt; object always has associated bitmap data, with a width and a
+  height. However, it is possible for this data to be corrupted. If an &lt;code&gt;ImageBitmap&lt;/code&gt;
+  object's media data can be decoded without errors, it is said to be &lt;dfn
+  title=&quot;concept-ImageBitmap-good&quot;&gt;fully decodable&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;An &lt;code&gt;ImageBitmap&lt;/code&gt; object can be obtained from a variety of different objects, using
+  the &lt;dfn title=&quot;dom-createImageBitmap&quot;&gt;&lt;code&gt;createImageBitmap()&lt;/code&gt;&lt;/dfn&gt; method. This method
+  takes two arguments, &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;. When invoked, the
+  method must act as follows:&lt;/p&gt;
+  &lt;!-- the canvas createPattern() and drawImage() methods have similar requirements --&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;img&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;img&lt;/code&gt; element is not &lt;span title=&quot;img-all&quot;&gt;completely
+     available&lt;/span&gt;, then throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these
+     steps.&lt;/p&gt;&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;origin&lt;/span&gt; of the &lt;code&gt;img&lt;/code&gt; element's image is not the &lt;span&gt;same
+     origin&lt;/span&gt; as the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;origin&lt;/span&gt;, then throw a
+     &lt;code&gt;SecurityError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;img&lt;/code&gt; element's media data is not a bitmap (e.g. it's a vector
+     graphic), then throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these
+     steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be a copy of the &lt;code&gt;img&lt;/code&gt;
+     element's media data. If this is an animated image, the &lt;code&gt;ImageBitmap&lt;/code&gt; object's
+     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
+     the first frame of the animation.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;ImageBitmap&lt;/code&gt; object as its argument.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;video&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;video&lt;/code&gt; element's &lt;code
+     title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute is &lt;code
+     title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/code&gt;, then throw an
+     &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;origin&lt;/span&gt; of the &lt;code&gt;video&lt;/code&gt; element is not the &lt;span&gt;same
+     origin&lt;/span&gt; as the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;origin&lt;/span&gt;, then throw a
+     &lt;code&gt;SecurityError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;video&lt;/code&gt; element's &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
+     attribute is either &lt;code title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
+     title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;, then throw an
+     &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be a copy of the frame at the
+     &lt;span&gt;current playback position&lt;/span&gt;, at the &lt;span&gt;media resource&lt;/span&gt;'s &lt;span
+     title=&quot;concept-video-intrinsic-width&quot;&gt;intrinsic width&lt;/span&gt; and &lt;span
+     title=&quot;concept-video-intrinsic-height&quot;&gt;intrinsic height&lt;/span&gt; (i.e. after any aspect-ratio
+     correction has been applied).&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;ImageBitmap&lt;/code&gt; object as its argument.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;canvas&lt;/code&gt; element
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's bitmap data does not have its &lt;span
+     title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag set, then throw an
+     &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;canvas&lt;/code&gt; element's bitmap has either a horizontal dimension or a
+     vertical dimension equal to zero, then throw an &lt;code&gt;InvalidStateError&lt;/code&gt; exception and
+     abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be a copy of the
+     &lt;code&gt;canvas&lt;/code&gt; element's bitmap data.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;ImageBitmap&lt;/code&gt; object as its argument.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;Blob&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;Blob&lt;/code&gt; object has been neutered through the &lt;code
+     title=&quot;dom-Blob-close&quot;&gt;close&lt;/code&gt; method, then throw an &lt;code&gt;InvalidStateError&lt;/code&gt;
+     exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Read the &lt;code&gt;Blob&lt;/code&gt; object's data. If an &lt;span title=&quot;file-error-read&quot;&gt;error
+     occurs during reading of the object&lt;/span&gt;, then &lt;span&gt;queue a task&lt;/span&gt; to invoke &lt;var
+     title=&quot;&quot;&gt;callback&lt;/var&gt; with null as the argument, and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Apply the &lt;span title=&quot;Content-Type sniffing: image&quot;&gt;image sniffing rules&lt;/span&gt; to
+     determine the file format of the image data, with MIME type of the &lt;code&gt;Blob&lt;/code&gt; (as given
+     by the &lt;code&gt;Blob&lt;/code&gt; object's &lt;code title=&quot;dom-Blob-type&quot;&gt;type&lt;/code&gt; attribute) giving the
+     official type.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the image data is not in a supported file format (e.g. it's not actually an image at
+     all), or if the image data is corrupted in some fatal way such that the image dimensions cannot
+     be obtained, &lt;span&gt;queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with null as the
+     argument, and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be the image data read from the
+     &lt;code&gt;Blob&lt;/code&gt; object. If this is an animated image, the &lt;code&gt;ImageBitmap&lt;/code&gt; object's
+     bitmap data must only consist of the animation's poster frame, or, if there is no poster frame,
+     the first frame of the animation.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;ImageBitmap&lt;/code&gt; object as its argument.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is an &lt;code&gt;ImageData&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be the image data given by the
+     &lt;code&gt;ImageData&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;ImageBitmap&lt;/code&gt; object as its argument.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; is a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object
+
+   &lt;dd&gt;
+
+    &lt;ol&gt;
+
+&lt;!--ADD-TOPIC:Security--&gt;
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt; does
+     not have its &lt;span title=&quot;concept-canvas-origin-clean&quot;&gt;origin-clean&lt;/span&gt; flag set, then throw
+     an &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt; has
+     either a horizontal dimension or a vertical dimension equal to zero, then throw an
+     &lt;code&gt;InvalidStateError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;ImageBitmap&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;code&gt;ImageBitmap&lt;/code&gt; object's bitmap data be a copy of the
+     &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span&gt;scratch bitmap&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return, but continue running these steps asynchronously.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with the new
+     &lt;code&gt;ImageBitmap&lt;/code&gt; object as its argument.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;/div&gt;
+
+
+&lt;!--TOPIC:HTML--&gt;
+
   &lt;h2 id=&quot;editing&quot;&gt;&lt;dfn&gt;User interaction&lt;/dfn&gt;&lt;/h2&gt;
 
 
@@ -97173,9 +98079,10 @@
   href=&quot;#refsHTML&quot;&gt;[HTML]&lt;/a&gt;&lt;/p&gt;
   &lt;!--START complete--&gt;
 
-  &lt;p&gt;The DOM APIs (&lt;code&gt;Node&lt;/code&gt; objects, &lt;code&gt;Document&lt;/code&gt;
-  objects, etc) are not available to workers in this version of this
-  specification.&lt;/p&gt;
+  &lt;p&gt;The DOM APIs &mdash; specifically, all the interfaces defind in the DOM Core specification
+  other than exceptions &mdash; must not be &lt;span title=&quot;expose&quot;&gt;exposed&lt;/span&gt; if the
+  &lt;span&gt;JavaScript global environment&lt;/span&gt; is a &lt;span&gt;worker environment&lt;/span&gt;. &lt;a
+  href=&quot;#hrefDOMCORE&quot;&gt;[DOMCORE]&lt;/a&gt;&lt;/p&gt;
 
 
   &lt;h4&gt;Importing scripts and libraries&lt;/h4&gt;
@@ -113199,8 +114106,8 @@
        &lt;td&gt;&lt;i&gt;see below&lt;/i&gt;
     &lt;/table&gt;
 
-    &lt;p&gt;The 'x&lt;!----&gt;xx-large' value is a non-CSS value used here to
-    indicate a font size 50% larger than 'xx-large'.&lt;/p&gt;
+    &lt;p class=&quot;tablenote&quot;&gt;&lt;small&gt;The 'x&lt;!----&gt;xx-large' value is a non-CSS value used here to
+    indicate a font size 50% larger than 'xx-large'.&lt;/small&gt;&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -113944,10 +114851,11 @@
   &lt;code&gt;video&lt;/code&gt; elements are expected to be treated as replaced
   elements.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;code&gt;canvas&lt;/code&gt; element that &lt;span&gt;represents&lt;/span&gt;
-  &lt;span&gt;embedded content&lt;/span&gt; is expected to be treated as a
-  replaced element. Other &lt;code&gt;canvas&lt;/code&gt; elements are expected to
-  be treated as ordinary elements in the rendering model.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;canvas&lt;/code&gt; element that &lt;span&gt;represents&lt;/span&gt; &lt;span&gt;embedded content&lt;/span&gt; is
+  expected to be treated as a replaced element; the contents of such elements are the element's
+  bitmap, if any, or else a transparent black bitmap with the same intrinsic dimensions as the
+  element. Other &lt;code&gt;canvas&lt;/code&gt; elements are expected to be treated as ordinary elements in the
+  rendering model.&lt;/p&gt;
 
   &lt;p&gt;An &lt;code&gt;object&lt;/code&gt; element that &lt;span&gt;represents&lt;/span&gt; an
   image, plugin, or &lt;span&gt;nested browsing context&lt;/span&gt; is expected
@@ -120962,8 +121870,10 @@
     &lt;/tr&gt;
 
   &lt;/table&gt;
-  &lt;p&gt;An asterisk (*) in a cell indicates that the actual rules are more complicated than indicated in the table above.&lt;/p&gt;
 
+  &lt;p class=&quot;tablenote&quot;&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
+  complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
+
   &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that
   list the given categories in their content model, not to elements
   that themselves are in those categories. For example, the
@@ -122292,8 +123202,10 @@
      &lt;td&gt; &quot;&lt;code title=&quot;attr-textarea-wrap-soft&quot;&gt;soft&lt;/code&gt;&quot;;
           &quot;&lt;code title=&quot;attr-textarea-wrap-hard&quot;&gt;hard&lt;/code&gt;&quot;
   &lt;/table&gt;
-  &lt;p&gt;An asterisk (*) in a cell indicates that the actual rules are more complicated than indicated in the table above.&lt;/p&gt;
 
+  &lt;p class=&quot;tablenote&quot;&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
+  complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
+
   &lt;hr&gt;
 
   &lt;table id=&quot;ix-event-handlers&quot;&gt;
@@ -123492,7 +124404,7 @@
    &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/csswg/css3-color/">http://dev.w3.org/csswg/css3-color/</A>&quot;&gt;CSS Color Module Level 3&lt;/a&gt;&lt;/cite&gt;, T. &Ccedil;elik, C. Lilley, L. Baron. W3C.&lt;/dd&gt;
 
    &lt;dt id=&quot;refsCSSFONTS&quot;&gt;[CSSFONTS]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://www.w3.org/TR/css3-fonts/">http://www.w3.org/TR/css3-fonts/</A>&quot;&gt;CSS Fonts Module Level 3&lt;/a&gt;&lt;/cite&gt;, J. Daggett. W3C.&lt;/dd&gt;
+   &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/csswg/css3-fonts/">http://dev.w3.org/csswg/css3-fonts/</A>&quot;&gt;CSS Fonts Module Level 3&lt;/a&gt;&lt;/cite&gt;, J. Daggett. W3C.&lt;/dd&gt;
 
    &lt;dt id=&quot;refsCSSIMAGES&quot;&gt;[CSSIMAGES]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://dev.w3.org/csswg/css4-images/">http://dev.w3.org/csswg/css4-images/</A>&quot;&gt;CSS Image Values and Replaced Content Module&lt;/a&gt;&lt;/cite&gt;, E. Etemad, T. Atkins. W3C.&lt;/dd&gt;


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014371.html">[html5] r7508 - [e] (0) Try to avoid using the term 'array' when	it's a sequence. Fixing https:/ [...]
</A></li>
	<LI>Next message: <A HREF="014373.html">[html5] r7510 - [e] (0) More examples of WebVTT. Fixing	https://www.w3.org/Bugs/Public/show_bug. [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14372">[ date ]</a>
              <a href="thread.html#14372">[ thread ]</a>
              <a href="subject.html#14372">[ subject ]</a>
              <a href="author.html#14372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
