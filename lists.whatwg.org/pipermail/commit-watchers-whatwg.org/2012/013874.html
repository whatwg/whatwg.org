<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7009 - [giow] (0) Add support for MutationObservers. (Also,	add a minor internal note i [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7009%20-%20%5Bgiow%5D%20%280%29%20Add%20support%20for%20MutationObservers.%20%28Also%2C%0A%09add%20a%20minor%20internal%20note%20i%20%5B...%5D&In-Reply-To=%3C20120229212444.932201C8405F%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013873.html">
   <LINK REL="Next"  HREF="013875.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7009 - [giow] (0) Add support for MutationObservers. (Also,	add a minor internal note i [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7009%20-%20%5Bgiow%5D%20%280%29%20Add%20support%20for%20MutationObservers.%20%28Also%2C%0A%09add%20a%20minor%20internal%20note%20i%20%5B...%5D&In-Reply-To=%3C20120229212444.932201C8405F%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7009 - [giow] (0) Add support for MutationObservers. (Also,	add a minor internal note i [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Feb 29 13:24:44 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="013873.html">[html5] r7008 - [e] (0) rename TextTrackCue.direction to .vertical	(and change the values accord [...]
</A></li>
        <LI>Next message: <A HREF="013875.html">[html5] r7010 - [e] (0) Provide a hook for the Page Visibility	spec. Affected topics: HTML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13874">[ date ]</a>
              <a href="thread.html#13874">[ thread ]</a>
              <a href="subject.html#13874">[ subject ]</a>
              <a href="author.html#13874">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-02-29 13:24:40 -0800 (Wed, 29 Feb 2012)
New Revision: 7009

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Add support for MutationObservers. (Also, add a minor internal note in the canvas section unrelated to this.) (Also, automated update of the CLDR which resulted in removing separate support for el-POLYTON.)
Affected topics: Canvas, DOM APIs, HTML

Modified: complete.html
===================================================================
--- complete.html	2012-02-22 20:11:43 UTC (rev 7008)
+++ complete.html	2012-02-29 21:24:40 UTC (rev 7009)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 22 February 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 29 February 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -3858,11 +3858,15 @@
      &lt;li&gt;The distinction between &lt;dfn id=xml-documents&gt;XML documents&lt;/dfn&gt; and &lt;dfn id=html-documents&gt;HTML documents&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;The terms &lt;dfn id=quirks-mode&gt;quirks mode&lt;/dfn&gt;, &lt;dfn id=limited-quirks-mode&gt;limited-quirks mode&lt;/dfn&gt;, and &lt;dfn id=no-quirks-mode&gt;no-quirks mode&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;The algorithm to &lt;dfn id=concept-node-clone title=concept-node-clone&gt;clone&lt;/dfn&gt; a &lt;code&gt;&lt;a href=#node&gt;Node&lt;/a&gt;&lt;/code&gt;, and the concept of &lt;dfn id=concept-node-clone-ext title=concept-node-clone-ext&gt;cloning steps&lt;/dfn&gt; used by that algorithm&lt;/li&gt;
-     &lt;li&gt;The concept of &lt;dfn id=base-url-change-steps&gt;base URL change steps&lt;/dfn&gt; and the definition of what happens when an element is &lt;dfn id=affected-by-a-base-url-change&gt;affected by a base URL change&lt;/dfn&gt;.&lt;/li&gt;
-     &lt;li&gt;The concept of an element's &lt;dfn id=concept-id title=concept-id&gt;unique identifier (ID)&lt;/dfn&gt;.&lt;/li&gt;
+     &lt;li&gt;The concept of &lt;dfn id=base-url-change-steps&gt;base URL change steps&lt;/dfn&gt; and the definition of what happens when an element is &lt;dfn id=affected-by-a-base-url-change&gt;affected by a base URL change&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;The concept of an element's &lt;dfn id=concept-id title=concept-id&gt;unique identifier (ID)&lt;/dfn&gt;&lt;/li&gt;
 
      &lt;li&gt;The concept of a DOM &lt;dfn id=concept-range title=concept-range&gt;range&lt;/dfn&gt;.&lt;/li&gt;
 
+     &lt;li&gt;&lt;dfn id=mutationobserver&gt;&lt;code&gt;MutationObserver&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn id=mutationobserver-scripting-environment&gt;&lt;code&gt;MutationObserver&lt;/code&gt; &lt;var title=&quot;&quot;&gt;scripting environment&lt;/var&gt;&lt;/dfn&gt; concept&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn id=concept-mo-invoke title=concept-mo-invoke&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/dfn&gt; algorith,&lt;/li&gt;
+
     &lt;/ul&gt;&lt;p&gt;The term &lt;dfn id=throw&gt;throw&lt;/dfn&gt; in this specification is used as
     defined in the DOM Core specification. The following
     &lt;code&gt;&lt;a href=#domexception&gt;DOMException&lt;/a&gt;&lt;/code&gt; types are defined in the DOM Core
@@ -36608,6 +36612,7 @@
    Jordan OSETE suggests:
     * support ways of extending the clipping region (union instead of intersection)
        - also &quot;add&quot;, &quot;subtract&quot;, &quot;replace&quot;, &quot;intersect&quot; and &quot;xor&quot;
+       - maybe just support creating unions, intersections, and other -ions of paths
     * support ways of resetting the clipping region without save/restore
   --&gt;
 
@@ -61413,9 +61418,21 @@
   is no &lt;a href=#entry-script&gt;entry script&lt;/a&gt;. It is changed by the &lt;a href=#jump-to-a-code-entry-point&gt;jump to
   a code entry-point&lt;/a&gt; algorithm.&lt;/p&gt;
 
-  &lt;p class=note&gt;There is at most one &lt;a href=#event-loop&gt;event loop&lt;/a&gt; per
-  &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing
+  contexts&lt;/a&gt; also has a &lt;dfn id=running-mutation-observers&gt;running mutation observers&lt;/dfn&gt;
+  flag, which must initially be false. It is used to prevent reentrant
+  invocation of the algorithm to &lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt;
+  objects&lt;/a&gt;. For the purposes of &lt;code&gt;&lt;a href=#mutationobserver&gt;MutationObserver&lt;/a&gt;&lt;/code&gt;
+  objects, each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing
+  contexts&lt;/a&gt; is a distinct &lt;var title=&quot;MutationObserver scripting
+  environment&quot;&gt;&lt;a href=#mutationobserver-scripting-environment&gt;scripting environment&lt;/a&gt;&lt;/var&gt;.&lt;/p&gt;
 
+  &lt;p class=note&gt;There is also at most one &lt;a href=#event-loop&gt;event loop&lt;/a&gt;
+  per &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt;
+  (though several &lt;a href=#unit-of-related-similar-origin-browsing-contexts title=&quot;unit of related similar-origin browsing
+  contexts&quot;&gt;units of related similar-origin browsing contexts&lt;/a&gt;
+  can have a shared &lt;a href=#event-loop&gt;event loop&lt;/a&gt;).&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -67798,6 +67815,8 @@
    &lt;li&gt;&lt;p&gt;Set the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; back to whatever it was
    when this algorithm started.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;a href=#perform-a-microtask-checkpoint&gt;Perform a microtask checkpoint&lt;/a&gt;.&lt;/li&gt;
+
   &lt;/ol&gt;&lt;p&gt;This algorithm is not invoked by one script calling another.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -68156,6 +68175,8 @@
 
    &lt;li&gt;&lt;p&gt;Remove that task from its &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;a href=#perform-a-microtask-checkpoint&gt;Perform a microtask checkpoint&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;a href=#provide-a-stable-state&gt;Provide a stable state&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If necessary, update the rendering or user interface of any
@@ -68165,6 +68186,32 @@
    &lt;li&gt;&lt;p&gt;Return to the first step of the &lt;a href=#event-loop&gt;event
    loop&lt;/a&gt;.&lt;/li&gt;
 
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user agent is to &lt;dfn id=perform-a-microtask-checkpoint&gt;perform a microtask
+  checkpoint&lt;/dfn&gt;, if the &lt;var title=&quot;&quot;&gt;running mutation
+  observers&lt;/var&gt; flag is false, then the user agent must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;running mutation observers&lt;/var&gt; be
+   true.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;Invoke
+    &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/a&gt; for the &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit
+    of related similar-origin browsing contexts&lt;/a&gt; to which the
+    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; belongs.&lt;/p&gt;
+
+    &lt;p class=note&gt;This will typically fire scripted callbacks, which
+    calls the &lt;a href=#jump-to-a-code-entry-point&gt;jump to a code entry-point&lt;/a&gt; algorithm, which
+    calls this &lt;a href=#perform-a-microtask-checkpoint&gt;perform a microtask checkpoint&lt;/a&gt; algorithm
+    again, which is why we use the &lt;var&gt;&lt;a href=#running-mutation-observers&gt;running mutation
+    observers&lt;/a&gt;&lt;/var&gt; flag to avoid reentrancy.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;running mutation observers&lt;/var&gt; be
+   false.&lt;/li&gt;
+
   &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=provide-a-stable-state&gt;provide a stable state&lt;/dfn&gt;, if
   any asynchronously-running algorithms are &lt;dfn id=await-a-stable-state title=&quot;await a stable
   state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user agent must run
@@ -90393,7 +90440,6 @@
 :root:lang(ebu),      :not(:lang(ebu)) &gt; :lang(ebu)           { quotes: '\201c' '\201d' '\2018' '\2019' } /* &ldquo; &rdquo; &lsquo; &rsquo; */
 :root:lang(ee),       :not(:lang(ee)) &gt; :lang(ee)             { quotes: '\201c' '\201d' '\2018' '\2019' } /* &ldquo; &rdquo; &lsquo; &rsquo; */
 :root:lang(el),       :not(:lang(el)) &gt; :lang(el)             { quotes: '\00ab' '\00bb' '\201c' '\201d' } /* &laquo; &raquo; &ldquo; &rdquo; */
-:root:lang(el-POLYTON), :not(:lang(el-POLYTON)) &gt; :lang(el-POLYTON) { quotes: '\00ab' '\00bb' '\201b' '\201d' } /* &laquo; &raquo; &#8219; &rdquo; */
 :root:lang(en),       :not(:lang(en)) &gt; :lang(en)             { quotes: '\201c' '\201d' '\2018' '\2019' } /* &ldquo; &rdquo; &lsquo; &rsquo; */
 :root:lang(en-GB),    :not(:lang(en-GB)) &gt; :lang(en-GB)       { quotes: '\2018' '\2019' '\201c' '\201d' } /* &lsquo; &rsquo; &ldquo; &rdquo; */
 :root:lang(es),       :not(:lang(es)) &gt; :lang(es)             { quotes: '\201c' '\201d' '\00ab' '\00bb' } /* &ldquo; &rdquo; &laquo; &raquo; */

Modified: index
===================================================================
--- index	2012-02-22 20:11:43 UTC (rev 7008)
+++ index	2012-02-29 21:24:40 UTC (rev 7009)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 22 February 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 29 February 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -3858,11 +3858,15 @@
      &lt;li&gt;The distinction between &lt;dfn id=xml-documents&gt;XML documents&lt;/dfn&gt; and &lt;dfn id=html-documents&gt;HTML documents&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;The terms &lt;dfn id=quirks-mode&gt;quirks mode&lt;/dfn&gt;, &lt;dfn id=limited-quirks-mode&gt;limited-quirks mode&lt;/dfn&gt;, and &lt;dfn id=no-quirks-mode&gt;no-quirks mode&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;The algorithm to &lt;dfn id=concept-node-clone title=concept-node-clone&gt;clone&lt;/dfn&gt; a &lt;code&gt;&lt;a href=#node&gt;Node&lt;/a&gt;&lt;/code&gt;, and the concept of &lt;dfn id=concept-node-clone-ext title=concept-node-clone-ext&gt;cloning steps&lt;/dfn&gt; used by that algorithm&lt;/li&gt;
-     &lt;li&gt;The concept of &lt;dfn id=base-url-change-steps&gt;base URL change steps&lt;/dfn&gt; and the definition of what happens when an element is &lt;dfn id=affected-by-a-base-url-change&gt;affected by a base URL change&lt;/dfn&gt;.&lt;/li&gt;
-     &lt;li&gt;The concept of an element's &lt;dfn id=concept-id title=concept-id&gt;unique identifier (ID)&lt;/dfn&gt;.&lt;/li&gt;
+     &lt;li&gt;The concept of &lt;dfn id=base-url-change-steps&gt;base URL change steps&lt;/dfn&gt; and the definition of what happens when an element is &lt;dfn id=affected-by-a-base-url-change&gt;affected by a base URL change&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;The concept of an element's &lt;dfn id=concept-id title=concept-id&gt;unique identifier (ID)&lt;/dfn&gt;&lt;/li&gt;
 
      &lt;li&gt;The concept of a DOM &lt;dfn id=concept-range title=concept-range&gt;range&lt;/dfn&gt;.&lt;/li&gt;
 
+     &lt;li&gt;&lt;dfn id=mutationobserver&gt;&lt;code&gt;MutationObserver&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn id=mutationobserver-scripting-environment&gt;&lt;code&gt;MutationObserver&lt;/code&gt; &lt;var title=&quot;&quot;&gt;scripting environment&lt;/var&gt;&lt;/dfn&gt; concept&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn id=concept-mo-invoke title=concept-mo-invoke&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/dfn&gt; algorith,&lt;/li&gt;
+
     &lt;/ul&gt;&lt;p&gt;The term &lt;dfn id=throw&gt;throw&lt;/dfn&gt; in this specification is used as
     defined in the DOM Core specification. The following
     &lt;code&gt;&lt;a href=#domexception&gt;DOMException&lt;/a&gt;&lt;/code&gt; types are defined in the DOM Core
@@ -36608,6 +36612,7 @@
    Jordan OSETE suggests:
     * support ways of extending the clipping region (union instead of intersection)
        - also &quot;add&quot;, &quot;subtract&quot;, &quot;replace&quot;, &quot;intersect&quot; and &quot;xor&quot;
+       - maybe just support creating unions, intersections, and other -ions of paths
     * support ways of resetting the clipping region without save/restore
   --&gt;
 
@@ -61413,9 +61418,21 @@
   is no &lt;a href=#entry-script&gt;entry script&lt;/a&gt;. It is changed by the &lt;a href=#jump-to-a-code-entry-point&gt;jump to
   a code entry-point&lt;/a&gt; algorithm.&lt;/p&gt;
 
-  &lt;p class=note&gt;There is at most one &lt;a href=#event-loop&gt;event loop&lt;/a&gt; per
-  &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing
+  contexts&lt;/a&gt; also has a &lt;dfn id=running-mutation-observers&gt;running mutation observers&lt;/dfn&gt;
+  flag, which must initially be false. It is used to prevent reentrant
+  invocation of the algorithm to &lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt;
+  objects&lt;/a&gt;. For the purposes of &lt;code&gt;&lt;a href=#mutationobserver&gt;MutationObserver&lt;/a&gt;&lt;/code&gt;
+  objects, each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing
+  contexts&lt;/a&gt; is a distinct &lt;var title=&quot;MutationObserver scripting
+  environment&quot;&gt;&lt;a href=#mutationobserver-scripting-environment&gt;scripting environment&lt;/a&gt;&lt;/var&gt;.&lt;/p&gt;
 
+  &lt;p class=note&gt;There is also at most one &lt;a href=#event-loop&gt;event loop&lt;/a&gt;
+  per &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt;
+  (though several &lt;a href=#unit-of-related-similar-origin-browsing-contexts title=&quot;unit of related similar-origin browsing
+  contexts&quot;&gt;units of related similar-origin browsing contexts&lt;/a&gt;
+  can have a shared &lt;a href=#event-loop&gt;event loop&lt;/a&gt;).&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -67798,6 +67815,8 @@
    &lt;li&gt;&lt;p&gt;Set the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; back to whatever it was
    when this algorithm started.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;a href=#perform-a-microtask-checkpoint&gt;Perform a microtask checkpoint&lt;/a&gt;.&lt;/li&gt;
+
   &lt;/ol&gt;&lt;p&gt;This algorithm is not invoked by one script calling another.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -68156,6 +68175,8 @@
 
    &lt;li&gt;&lt;p&gt;Remove that task from its &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;a href=#perform-a-microtask-checkpoint&gt;Perform a microtask checkpoint&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;a href=#provide-a-stable-state&gt;Provide a stable state&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If necessary, update the rendering or user interface of any
@@ -68165,6 +68186,32 @@
    &lt;li&gt;&lt;p&gt;Return to the first step of the &lt;a href=#event-loop&gt;event
    loop&lt;/a&gt;.&lt;/li&gt;
 
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user agent is to &lt;dfn id=perform-a-microtask-checkpoint&gt;perform a microtask
+  checkpoint&lt;/dfn&gt;, if the &lt;var title=&quot;&quot;&gt;running mutation
+  observers&lt;/var&gt; flag is false, then the user agent must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;running mutation observers&lt;/var&gt; be
+   true.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;Invoke
+    &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/a&gt; for the &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit
+    of related similar-origin browsing contexts&lt;/a&gt; to which the
+    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; belongs.&lt;/p&gt;
+
+    &lt;p class=note&gt;This will typically fire scripted callbacks, which
+    calls the &lt;a href=#jump-to-a-code-entry-point&gt;jump to a code entry-point&lt;/a&gt; algorithm, which
+    calls this &lt;a href=#perform-a-microtask-checkpoint&gt;perform a microtask checkpoint&lt;/a&gt; algorithm
+    again, which is why we use the &lt;var&gt;&lt;a href=#running-mutation-observers&gt;running mutation
+    observers&lt;/a&gt;&lt;/var&gt; flag to avoid reentrancy.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;running mutation observers&lt;/var&gt; be
+   false.&lt;/li&gt;
+
   &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=provide-a-stable-state&gt;provide a stable state&lt;/dfn&gt;, if
   any asynchronously-running algorithms are &lt;dfn id=await-a-stable-state title=&quot;await a stable
   state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user agent must run
@@ -90393,7 +90440,6 @@
 :root:lang(ebu),      :not(:lang(ebu)) &gt; :lang(ebu)           { quotes: '\201c' '\201d' '\2018' '\2019' } /* &ldquo; &rdquo; &lsquo; &rsquo; */
 :root:lang(ee),       :not(:lang(ee)) &gt; :lang(ee)             { quotes: '\201c' '\201d' '\2018' '\2019' } /* &ldquo; &rdquo; &lsquo; &rsquo; */
 :root:lang(el),       :not(:lang(el)) &gt; :lang(el)             { quotes: '\00ab' '\00bb' '\201c' '\201d' } /* &laquo; &raquo; &ldquo; &rdquo; */
-:root:lang(el-POLYTON), :not(:lang(el-POLYTON)) &gt; :lang(el-POLYTON) { quotes: '\00ab' '\00bb' '\201b' '\201d' } /* &laquo; &raquo; &#8219; &rdquo; */
 :root:lang(en),       :not(:lang(en)) &gt; :lang(en)             { quotes: '\201c' '\201d' '\2018' '\2019' } /* &ldquo; &rdquo; &lsquo; &rsquo; */
 :root:lang(en-GB),    :not(:lang(en-GB)) &gt; :lang(en-GB)       { quotes: '\2018' '\2019' '\201c' '\201d' } /* &lsquo; &rsquo; &ldquo; &rdquo; */
 :root:lang(es),       :not(:lang(es)) &gt; :lang(es)             { quotes: '\201c' '\201d' '\00ab' '\00bb' } /* &ldquo; &rdquo; &laquo; &raquo; */

Modified: source
===================================================================
--- source	2012-02-22 20:11:43 UTC (rev 7008)
+++ source	2012-02-29 21:24:40 UTC (rev 7009)
@@ -2804,11 +2804,15 @@
      &lt;li&gt;The distinction between &lt;dfn&gt;XML documents&lt;/dfn&gt; and &lt;dfn&gt;HTML documents&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;The terms &lt;dfn&gt;quirks mode&lt;/dfn&gt;, &lt;dfn&gt;limited-quirks mode&lt;/dfn&gt;, and &lt;dfn&gt;no-quirks mode&lt;/dfn&gt;&lt;/li&gt;
      &lt;li&gt;The algorithm to &lt;dfn title=&quot;concept-node-clone&quot;&gt;clone&lt;/dfn&gt; a &lt;code&gt;Node&lt;/code&gt;, and the concept of &lt;dfn title=&quot;concept-node-clone-ext&quot;&gt;cloning steps&lt;/dfn&gt; used by that algorithm&lt;/li&gt;
-     &lt;li&gt;The concept of &lt;dfn&gt;base URL change steps&lt;/dfn&gt; and the definition of what happens when an element is &lt;dfn&gt;affected by a base URL change&lt;/dfn&gt;.&lt;/li&gt;
-     &lt;li&gt;The concept of an element's &lt;dfn title=&quot;concept-id&quot;&gt;unique identifier (ID)&lt;/dfn&gt;.&lt;/li&gt;
+     &lt;li&gt;The concept of &lt;dfn&gt;base URL change steps&lt;/dfn&gt; and the definition of what happens when an element is &lt;dfn&gt;affected by a base URL change&lt;/dfn&gt;&lt;/li&gt;
+     &lt;li&gt;The concept of an element's &lt;dfn title=&quot;concept-id&quot;&gt;unique identifier (ID)&lt;/dfn&gt;&lt;/li&gt;
 
      &lt;li&gt;The concept of a DOM &lt;dfn title=&quot;concept-range&quot;&gt;range&lt;/dfn&gt;.&lt;/li&gt;
 
+     &lt;li&gt;&lt;dfn&gt;&lt;code&gt;MutationObserver&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn&gt;&lt;code&gt;MutationObserver&lt;/code&gt; &lt;var title=&quot;&quot;&gt;scripting environment&lt;/var&gt;&lt;/dfn&gt; concept&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn title=&quot;concept-mo-invoke&quot;&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/dfn&gt; algorith,&lt;/li&gt;
+
     &lt;/ul&gt;
 
     &lt;p&gt;The term &lt;dfn&gt;throw&lt;/dfn&gt; in this specification is used as
@@ -42642,6 +42646,7 @@
    Jordan OSETE suggests:
     * support ways of extending the clipping region (union instead of intersection)
        - also &quot;add&quot;, &quot;subtract&quot;, &quot;replace&quot;, &quot;intersect&quot; and &quot;xor&quot;
+       - maybe just support creating unions, intersections, and other -ions of paths
     * support ways of resetting the clipping region without save/restore
   --&gt;
 
@@ -71885,9 +71890,22 @@
   is no &lt;span&gt;entry script&lt;/span&gt;. It is changed by the &lt;span&gt;jump to
   a code entry-point&lt;/span&gt; algorithm.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;There is at most one &lt;span&gt;event loop&lt;/span&gt; per
-  &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;span&gt;unit of related similar-origin browsing
+  contexts&lt;/span&gt; also has a &lt;dfn&gt;running mutation observers&lt;/dfn&gt;
+  flag, which must initially be false. It is used to prevent reentrant
+  invocation of the algorithm to &lt;span
+  title=&quot;concept-mo-invoke&quot;&gt;invoke &lt;code&gt;MutationObserver&lt;/code&gt;
+  objects&lt;/span&gt;. For the purposes of &lt;code&gt;MutationObserver&lt;/code&gt;
+  objects, each &lt;span&gt;unit of related similar-origin browsing
+  contexts&lt;/span&gt; is a distinct &lt;var title=&quot;MutationObserver scripting
+  environment&quot;&gt;scripting environment&lt;/var&gt;.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;There is also at most one &lt;span&gt;event loop&lt;/span&gt;
+  per &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt;
+  (though several &lt;span title=&quot;unit of related similar-origin browsing
+  contexts&quot;&gt;units of related similar-origin browsing contexts&lt;/span&gt;
+  can have a shared &lt;span&gt;event loop&lt;/span&gt;).&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -79247,6 +79265,8 @@
    &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;entry script&lt;/span&gt; back to whatever it was
    when this algorithm started.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Perform a microtask checkpoint&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
   &lt;/ol&gt;
 
   &lt;p&gt;This algorithm is not invoked by one script calling another.&lt;/p&gt;
@@ -79668,6 +79688,8 @@
 
    &lt;li&gt;&lt;p&gt;Remove that task from its &lt;span&gt;task queue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Perform a microtask checkpoint&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Provide a stable state&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If necessary, update the rendering or user interface of any
@@ -79681,6 +79703,38 @@
 
   &lt;hr&gt;
 
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;perform a microtask
+  checkpoint&lt;/dfn&gt;, if the &lt;var title=&quot;&quot;&gt;running mutation
+  observers&lt;/var&gt; flag is false, then the user agent must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;running mutation observers&lt;/var&gt; be
+   true.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;span title=&quot;concept-mo-invoke&quot;&gt;Invoke
+    &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/span&gt; for the &lt;span&gt;unit
+    of related similar-origin browsing contexts&lt;/span&gt; to which the
+    &lt;span&gt;script's browsing context&lt;/span&gt; belongs.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This will typically fire scripted callbacks, which
+    calls the &lt;span&gt;jump to a code entry-point&lt;/span&gt; algorithm, which
+    calls this &lt;span&gt;perform a microtask checkpoint&lt;/span&gt; algorithm
+    again, which is why we use the &lt;var&gt;running mutation
+    observers&lt;/var&gt; flag to avoid reentrancy.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;running mutation observers&lt;/var&gt; be
+   false.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;hr&gt;
+
   &lt;p&gt;When the user agent is to &lt;dfn&gt;provide a stable state&lt;/dfn&gt;, if
   any asynchronously-running algorithms are &lt;dfn title=&quot;await a stable
   state&quot;&gt;awaiting a stable state&lt;/dfn&gt;, then the user agent must run


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013873.html">[html5] r7008 - [e] (0) rename TextTrackCue.direction to .vertical	(and change the values accord [...]
</A></li>
	<LI>Next message: <A HREF="013875.html">[html5] r7010 - [e] (0) Provide a hook for the Page Visibility	spec. Affected topics: HTML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13874">[ date ]</a>
              <a href="thread.html#13874">[ thread ]</a>
              <a href="subject.html#13874">[ subject ]</a>
              <a href="author.html#13874">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
