<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7177 - [giow] (2) Admit defeat: putImageData() assumes	96dpi. We'll add HD versions of [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7177%20-%20%5Bgiow%5D%20%282%29%20Admit%20defeat%3A%20putImageData%28%29%20assumes%0A%0996dpi.%20We%27ll%20add%20HD%20versions%20of%20%5B...%5D&In-Reply-To=%3C20120716191627.84F611C8C08D%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014041.html">
   <LINK REL="Next"  HREF="014043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7177 - [giow] (2) Admit defeat: putImageData() assumes	96dpi. We'll add HD versions of [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7177%20-%20%5Bgiow%5D%20%282%29%20Admit%20defeat%3A%20putImageData%28%29%20assumes%0A%0996dpi.%20We%27ll%20add%20HD%20versions%20of%20%5B...%5D&In-Reply-To=%3C20120716191627.84F611C8C08D%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7177 - [giow] (2) Admit defeat: putImageData() assumes	96dpi. We'll add HD versions of [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Jul 16 12:16:27 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014041.html">[html5] r7176 - [e] (0) fix contributor's name Fixing	https://www.w3.org/Bugs/Public/show_bug.cg [...]
</A></li>
        <LI>Next message: <A HREF="014043.html">[html5] r7178 - [giow] (0) Try to introduce 'HD' versions of the	ImageData API. PLEASE DO NOT IM [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14042">[ date ]</a>
              <a href="thread.html#14042">[ thread ]</a>
              <a href="subject.html#14042">[ subject ]</a>
              <a href="author.html#14042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-07-16 12:16:26 -0700 (Mon, 16 Jul 2012)
New Revision: 7177

Modified:
   complete.html
   index
   source
Log:
[giow] (2) Admit defeat: putImageData() assumes 96dpi. We'll add HD versions of these methods shortly.
Affected topics: Canvas

Modified: complete.html
===================================================================
--- complete.html	2012-07-12 19:25:06 UTC (rev 7176)
+++ complete.html	2012-07-16 19:16:26 UTC (rev 7177)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 12 July 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 16 July 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -35812,11 +35812,11 @@
   void &lt;a href=#dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;addHitRegion&lt;/a&gt;(&lt;a href=#hitregionoptions&gt;HitRegionOptions&lt;/a&gt; options);
 
   // pixel manipulation
-  &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(unrestricted double sw, unrestricted double sh);
+  &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(double sw, double sh);
   &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata);
-  &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;getImageData&lt;/a&gt;(unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh);
-  void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, unrestricted double dx, unrestricted double dy);
-  void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, unrestricted double dx, unrestricted double dy, unrestricted double dirtyX, unrestricted double dirtyY, unrestricted double dirtyWidth, unrestricted double dirtyHeight);
+  &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;getImageData&lt;/a&gt;(double sx, double sy, double sw, double sh);
+  void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, double dx, double dy);
+  void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, double dx, double dy, double dirtyX, double dirtyY, double dirtyWidth, double dirtyHeight);
 };
 &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;;
 &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;;
@@ -39956,9 +39956,8 @@
    &lt;dd&gt;
 
     &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with the given
-    dimensions in CSS pixels (which might map to a different number of
-    actual device pixels exposed by the object itself). All the pixels
-    in the returned object are transparent black.&lt;/p&gt;
+    dimensions. All the pixels in the returned object are transparent
+    black.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -39984,6 +39983,9 @@
     exception if the either of the width or height arguments are
     zero.&lt;/p&gt;
 
+    &lt;p&gt;The data will be returned with one pixel of image data for each
+    coordinate space unit on the canvas (ignoring transforms).&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; . &lt;code title=dom-imagedata-width&gt;&lt;a href=#dom-imagedata-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
@@ -40021,6 +40023,9 @@
     &lt;p&gt;Throws a &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception if any of the
     arguments are not finite.&lt;/p&gt;
 
+    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space
+    unit on the canvas.&lt;/p&gt;
+
    &lt;/dd&gt;
 
   &lt;/dl&gt;&lt;div class=impl&gt;
@@ -40029,12 +40034,13 @@
   method is used to instantiate new blank &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
   objects. When the method is invoked with two arguments &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, it must return an
   &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing a rectangle with a width
-  in CSS pixels equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and a height in CSS pixels equal to the absolute
-  magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;. When invoked with a single &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; argument, it must return an
-  &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing a rectangle with the same
-  dimensions as the &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object passed as the
-  argument. The &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object returned must be filled
-  with transparent black.&lt;/p&gt;
+  in equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and a
+  height equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;.
+  When invoked with a single &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; argument,
+  it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing a
+  rectangle with the same dimensions as the &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
+  object passed as the argument. The &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object
+  returned must be filled with transparent black.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;&lt;code&gt;getImageData(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must,
@@ -40042,7 +40048,7 @@
   if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
   to false, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception; otherwise, it
 &lt;!--REMOVE-TOPIC:Security--&gt;
-  must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing the
+  must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; representing the
   underlying pixel data for the area of the canvas denoted by the
   rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;),
@@ -40050,23 +40056,18 @@
   outside the canvas must be returned as transparent black. Pixels
   must be returned as non-premultiplied alpha values.&lt;/p&gt;
 
-  &lt;p&gt;If any of the arguments to &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData()&lt;/a&gt;&lt;/code&gt; or
-  &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt;
-  are infinite or NaN, the method must instead throw a
-  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  the method must instead throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
+  &lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
+  arguments are zero, the method must instead throw an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; objects must be initialized so that their
   &lt;dfn id=dom-imagedata-width title=dom-imagedata-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute
-  is set to &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, the number of physical device
-  pixels per row in the image data, their &lt;dfn id=dom-imagedata-height title=dom-imagedata-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; attribute is
-  set to &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;, the number of rows in the image data,
-  and their &lt;dfn id=dom-imagedata-data title=dom-imagedata-data&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt;
-  attribute is initialized to a &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; object.
-  The &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; object must use a &lt;a href=#canvas-pixel-arraybuffer&gt;Canvas
-  Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt; for its storage, and must have
-  a zero start offset and a length equal to the length of its storage,
+  is set to the number of pixels per row in the image data, their &lt;dfn id=dom-imagedata-height title=dom-imagedata-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; attribute is
+  set to the number of rows in the image data, and their &lt;dfn id=dom-imagedata-data title=dom-imagedata-data&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt; attribute is
+  initialized to a &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; object. The
+  &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; object must use a &lt;a href=#canvas-pixel-arraybuffer&gt;Canvas Pixel
+  &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt; for its storage, and must have a
+  zero start offset and a length equal to the length of its storage,
   in bytes. The &lt;a href=#canvas-pixel-arraybuffer&gt;Canvas Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt;
   must contain the image data. At least one pixel's worth of image
   data must be returned. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
@@ -40075,18 +40076,15 @@
   &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; that whose data is represented in
   left-to-right order, row by row top to bottom, starting with the top
   left, with each pixel's red, green, blue, and alpha components being
-  given in that order for each pixel. Each component of each device
-  pixel represented in this array must be in the range 0..255,
-  representing the 8 bit value for that component. The components must
-  be assigned consecutive indices starting with 0 for the top left
-  pixel's red component. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  given in that order for each pixel. Each component of each pixel
+  represented in this array must be in the range 0..255, representing
+  the 8 bit value for that component. The components must be assigned
+  consecutive indices starting with 0 for the top left pixel's red
+  component. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;&lt;code&gt;putImageData(&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method writes data from
   &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; structures back to the canvas.&lt;/p&gt;
 
-  &lt;p&gt;If any of the arguments to the method are infinite or NaN, the
-  method must throw a &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
   &lt;p&gt;When the last four arguments are omitted, they must be assumed to
   have the values 0, 0, the &lt;code title=dom-imagedata-width&gt;&lt;a href=#dom-imagedata-width&gt;width&lt;/a&gt;&lt;/code&gt; member of the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; structure, and the &lt;code title=dom-imagedata-height&gt;&lt;a href=#dom-imagedata-height&gt;height&lt;/a&gt;&lt;/code&gt; member of the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; structure, respectively.&lt;/p&gt;
 
@@ -40096,20 +40094,6 @@
 
   &lt;ol&gt;&lt;li&gt;
 
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
-    of the device pixel in the underlying pixel data of the canvas
-    corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the
-    canvas coordinate space.&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
-    of the device pixel in the underlying pixel data of the canvas
-    corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the
-    canvas coordinate space.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt; is negative, let &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt; be &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;, and let &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt; be equal to the absolute magnitude of
     &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;.&lt;/p&gt;
 
@@ -40146,15 +40130,63 @@
 
    &lt;/li&gt;
 
+   &lt;li&gt;
+
+    &lt;p&gt;Draw the region of the image data in the horizontal rectangle
+    whose top left corner is at (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;) onto
+    the canvas, aligned such that the top left of the rectangle is at
+    coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
+    attribute is set to true, then the user agent should attempt to
+    apply a smoothing algorithm to the image data if the canvas does
+    not have exactly one device pixel per coordinate space unit in its
+    underlying pixel data.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;!-- XXXXX
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; be the number of device pixels in
+    the underlying pixel data of the canvas per coordinate space
+    unit.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
+    of the device pixel in the underlying pixel data of the canvas
+    corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the
+    canvas coordinate space.&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
+    of the device pixel in the underlying pixel data of the canvas
+    corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the
+    canvas coordinate space.&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Otherwise, for all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;
-   and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;
-   and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the four channels of
-   the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) in the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data
-   structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;,
-   &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the underlying pixel data of the
-   canvas.&lt;/li&gt;
+   and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+   title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;
+   and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var
+   title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the four channels of
+   the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt;) in the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data
+   structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;,
+   &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the underlying pixel data of the
+   canvas.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The handling of pixel rounding when the specified coordinates do
+  &lt;p&gt;The handling of pixel rounding when the specified coordinates do
   not exactly map to the device coordinate space is not defined by
   this specification, except that the following must result in no
   visible changes to the rendering:&lt;/p&gt;
@@ -40162,33 +40194,41 @@
   &lt;pre&gt;context.putImageData(context.getImageData(x, y, w, h), p, q);&lt;/pre&gt;
 
   &lt;p&gt;...for any value of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; and where &lt;var title=&quot;&quot;&gt;p&lt;/var&gt; is the smaller of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and the sum
-  of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;q&lt;/var&gt; is the smaller of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; and the sum
+  &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; and where &lt;var
+  title=&quot;&quot;&gt;p&lt;/var&gt; is the smaller of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and the sum
+  of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, and &lt;var
+  title=&quot;&quot;&gt;q&lt;/var&gt; is the smaller of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; and the sum
   of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;; and except that
   the following two calls:&lt;/p&gt;
 
   &lt;pre&gt;context.createImageData(w, h);
 context.getImageData(0, 0, w, h);&lt;/pre&gt;
 
-  &lt;p&gt;...must return &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; objects with the same
-  dimensions, for any value of &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;. In other words, while user agents may round the
+  &lt;p&gt;...must return &lt;code&gt;ImageData&lt;/code&gt; objects with the same
+  dimensions, for any value of &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and &lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;. In other words, while user agents may round the
   arguments of these methods so that they map to device pixel
   boundaries, any rounding performed must be performed consistently
-  for all of the &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;createImageData()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-putImageData&gt;&lt;a href=#dom-context-2d-putimagedata&gt;putImageData()&lt;/a&gt;&lt;/code&gt;
+  for all of the &lt;code
+  title=&quot;dom-context-2d-getImageData&quot;&gt;createImageData()&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData()&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData()&lt;/code&gt;
   operations.&lt;/p&gt;
 
-  &lt;p class=note&gt;This implies that the data returned by &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt; is at the
+  &lt;p class=&quot;note&quot;&gt;This implies that the data returned by &lt;code
+  title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData()&lt;/code&gt; is at the
   resolution of the canvas backing store. This is likely to not be one
   device pixel to each CSS pixel if the display used is a high
   resolution display.&lt;/p&gt;
 
-  &lt;p class=note&gt;Due to the lossy nature of converting to and from
+  &lt;p class=&quot;note&quot;&gt;Due to the lossy nature of converting to and from
   premultiplied alpha color values, pixels that have just been set
-  using &lt;code title=dom-context-2d-putImageData&gt;&lt;a href=#dom-context-2d-putimagedata&gt;putImageData()&lt;/a&gt;&lt;/code&gt; might be
-  returned to an equivalent &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt; as
+  using &lt;code
+  title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData()&lt;/code&gt; might be
+  returned to an equivalent &lt;code
+  title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData()&lt;/code&gt; as
   different values.&lt;/p&gt;
-
-  &lt;p&gt;The current path, &lt;a href=#transformations title=dom-context-2d-transformation&gt;transformation matrix&lt;/a&gt;,
+--&gt;&lt;p&gt;The current path, &lt;a href=#transformations title=dom-context-2d-transformation&gt;transformation matrix&lt;/a&gt;,
   &lt;a href=#shadows title=shadows&gt;shadow attributes&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, the
   &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
   operator&lt;/a&gt; must not affect the &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-putImageData&gt;&lt;a href=#dom-context-2d-putimagedata&gt;putImageData()&lt;/a&gt;&lt;/code&gt;

Modified: index
===================================================================
--- index	2012-07-12 19:25:06 UTC (rev 7176)
+++ index	2012-07-16 19:16:26 UTC (rev 7177)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 12 July 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 16 July 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -35812,11 +35812,11 @@
   void &lt;a href=#dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;addHitRegion&lt;/a&gt;(&lt;a href=#hitregionoptions&gt;HitRegionOptions&lt;/a&gt; options);
 
   // pixel manipulation
-  &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(unrestricted double sw, unrestricted double sh);
+  &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(double sw, double sh);
   &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata);
-  &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;getImageData&lt;/a&gt;(unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh);
-  void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, unrestricted double dx, unrestricted double dy);
-  void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, unrestricted double dx, unrestricted double dy, unrestricted double dirtyX, unrestricted double dirtyY, unrestricted double dirtyWidth, unrestricted double dirtyHeight);
+  &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;getImageData&lt;/a&gt;(double sx, double sy, double sw, double sh);
+  void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, double dx, double dy);
+  void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, double dx, double dy, double dirtyX, double dirtyY, double dirtyWidth, double dirtyHeight);
 };
 &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvasdrawingstyles&gt;CanvasDrawingStyles&lt;/a&gt;;
 &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;;
@@ -39956,9 +39956,8 @@
    &lt;dd&gt;
 
     &lt;p&gt;Returns an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with the given
-    dimensions in CSS pixels (which might map to a different number of
-    actual device pixels exposed by the object itself). All the pixels
-    in the returned object are transparent black.&lt;/p&gt;
+    dimensions. All the pixels in the returned object are transparent
+    black.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -39984,6 +39983,9 @@
     exception if the either of the width or height arguments are
     zero.&lt;/p&gt;
 
+    &lt;p&gt;The data will be returned with one pixel of image data for each
+    coordinate space unit on the canvas (ignoring transforms).&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; . &lt;code title=dom-imagedata-width&gt;&lt;a href=#dom-imagedata-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
@@ -40021,6 +40023,9 @@
     &lt;p&gt;Throws a &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception if any of the
     arguments are not finite.&lt;/p&gt;
 
+    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space
+    unit on the canvas.&lt;/p&gt;
+
    &lt;/dd&gt;
 
   &lt;/dl&gt;&lt;div class=impl&gt;
@@ -40029,12 +40034,13 @@
   method is used to instantiate new blank &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
   objects. When the method is invoked with two arguments &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, it must return an
   &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing a rectangle with a width
-  in CSS pixels equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and a height in CSS pixels equal to the absolute
-  magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;. When invoked with a single &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; argument, it must return an
-  &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing a rectangle with the same
-  dimensions as the &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object passed as the
-  argument. The &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object returned must be filled
-  with transparent black.&lt;/p&gt;
+  in equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and a
+  height equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;.
+  When invoked with a single &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; argument,
+  it must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing a
+  rectangle with the same dimensions as the &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt;
+  object passed as the argument. The &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object
+  returned must be filled with transparent black.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-getimagedata title=dom-context-2d-getImageData&gt;&lt;code&gt;getImageData(&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must,
@@ -40042,7 +40048,7 @@
   if the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
   to false, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception; otherwise, it
 &lt;!--REMOVE-TOPIC:Security--&gt;
-  must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object representing the
+  must return an &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; object with width &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; representing the
   underlying pixel data for the area of the canvas denoted by the
   rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;&lt;/span&gt;),
@@ -40050,23 +40056,18 @@
   outside the canvas must be returned as transparent black. Pixels
   must be returned as non-premultiplied alpha values.&lt;/p&gt;
 
-  &lt;p&gt;If any of the arguments to &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData()&lt;/a&gt;&lt;/code&gt; or
-  &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt;
-  are infinite or NaN, the method must instead throw a
-  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  the method must instead throw an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
+  &lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
+  arguments are zero, the method must instead throw an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; objects must be initialized so that their
   &lt;dfn id=dom-imagedata-width title=dom-imagedata-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute
-  is set to &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, the number of physical device
-  pixels per row in the image data, their &lt;dfn id=dom-imagedata-height title=dom-imagedata-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; attribute is
-  set to &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;, the number of rows in the image data,
-  and their &lt;dfn id=dom-imagedata-data title=dom-imagedata-data&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt;
-  attribute is initialized to a &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; object.
-  The &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; object must use a &lt;a href=#canvas-pixel-arraybuffer&gt;Canvas
-  Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt; for its storage, and must have
-  a zero start offset and a length equal to the length of its storage,
+  is set to the number of pixels per row in the image data, their &lt;dfn id=dom-imagedata-height title=dom-imagedata-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; attribute is
+  set to the number of rows in the image data, and their &lt;dfn id=dom-imagedata-data title=dom-imagedata-data&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt; attribute is
+  initialized to a &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; object. The
+  &lt;code&gt;&lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt;&lt;/code&gt; object must use a &lt;a href=#canvas-pixel-arraybuffer&gt;Canvas Pixel
+  &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt; for its storage, and must have a
+  zero start offset and a length equal to the length of its storage,
   in bytes. The &lt;a href=#canvas-pixel-arraybuffer&gt;Canvas Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/a&gt;
   must contain the image data. At least one pixel's worth of image
   data must be returned. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
@@ -40075,18 +40076,15 @@
   &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; that whose data is represented in
   left-to-right order, row by row top to bottom, starting with the top
   left, with each pixel's red, green, blue, and alpha components being
-  given in that order for each pixel. Each component of each device
-  pixel represented in this array must be in the range 0..255,
-  representing the 8 bit value for that component. The components must
-  be assigned consecutive indices starting with 0 for the top left
-  pixel's red component. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  given in that order for each pixel. Each component of each pixel
+  represented in this array must be in the range 0..255, representing
+  the 8 bit value for that component. The components must be assigned
+  consecutive indices starting with 0 for the top left pixel's red
+  component. &lt;a href=#refsTYPEDARRAY&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;&lt;code&gt;putImageData(&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method writes data from
   &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; structures back to the canvas.&lt;/p&gt;
 
-  &lt;p&gt;If any of the arguments to the method are infinite or NaN, the
-  method must throw a &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
   &lt;p&gt;When the last four arguments are omitted, they must be assumed to
   have the values 0, 0, the &lt;code title=dom-imagedata-width&gt;&lt;a href=#dom-imagedata-width&gt;width&lt;/a&gt;&lt;/code&gt; member of the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; structure, and the &lt;code title=dom-imagedata-height&gt;&lt;a href=#dom-imagedata-height&gt;height&lt;/a&gt;&lt;/code&gt; member of the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; structure, respectively.&lt;/p&gt;
 
@@ -40096,20 +40094,6 @@
 
   &lt;ol&gt;&lt;li&gt;
 
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
-    of the device pixel in the underlying pixel data of the canvas
-    corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the
-    canvas coordinate space.&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
-    of the device pixel in the underlying pixel data of the canvas
-    corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the
-    canvas coordinate space.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt; is negative, let &lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt; be &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;, and let &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt; be equal to the absolute magnitude of
     &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;.&lt;/p&gt;
 
@@ -40146,15 +40130,63 @@
 
    &lt;/li&gt;
 
+   &lt;li&gt;
+
+    &lt;p&gt;Draw the region of the image data in the horizontal rectangle
+    whose top left corner is at (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;) onto
+    the canvas, aligned such that the top left of the rectangle is at
+    coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;code title=dom-context-2d-imageSmoothingEnabled&gt;&lt;a href=#dom-context-2d-imagesmoothingenabled&gt;imageSmoothingEnabled&lt;/a&gt;&lt;/code&gt;
+    attribute is set to true, then the user agent should attempt to
+    apply a smoothing algorithm to the image data if the canvas does
+    not have exactly one device pixel per coordinate space unit in its
+    underlying pixel data.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;!-- XXXXX
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; be the number of device pixels in
+    the underlying pixel data of the canvas per coordinate space
+    unit.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
+    of the device pixel in the underlying pixel data of the canvas
+    corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the
+    canvas coordinate space.&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
+    of the device pixel in the underlying pixel data of the canvas
+    corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the
+    canvas coordinate space.&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Otherwise, for all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;
-   and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;
-   and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the four channels of
-   the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) in the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data
-   structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;,
-   &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the underlying pixel data of the
-   canvas.&lt;/li&gt;
+   and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+   title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;
+   and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyY&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var
+   title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;&lt;/span&gt;, copy the four channels of
+   the pixel with coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt;) in the &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; data
+   structure to the pixel with coordinate (&lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;,
+   &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt;+&lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the underlying pixel data of the
+   canvas.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The handling of pixel rounding when the specified coordinates do
+  &lt;p&gt;The handling of pixel rounding when the specified coordinates do
   not exactly map to the device coordinate space is not defined by
   this specification, except that the following must result in no
   visible changes to the rendering:&lt;/p&gt;
@@ -40162,33 +40194,41 @@
   &lt;pre&gt;context.putImageData(context.getImageData(x, y, w, h), p, q);&lt;/pre&gt;
 
   &lt;p&gt;...for any value of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; and where &lt;var title=&quot;&quot;&gt;p&lt;/var&gt; is the smaller of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and the sum
-  of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;q&lt;/var&gt; is the smaller of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; and the sum
+  &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; and where &lt;var
+  title=&quot;&quot;&gt;p&lt;/var&gt; is the smaller of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and the sum
+  of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, and &lt;var
+  title=&quot;&quot;&gt;q&lt;/var&gt; is the smaller of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; and the sum
   of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;; and except that
   the following two calls:&lt;/p&gt;
 
   &lt;pre&gt;context.createImageData(w, h);
 context.getImageData(0, 0, w, h);&lt;/pre&gt;
 
-  &lt;p&gt;...must return &lt;code&gt;&lt;a href=#imagedata&gt;ImageData&lt;/a&gt;&lt;/code&gt; objects with the same
-  dimensions, for any value of &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;. In other words, while user agents may round the
+  &lt;p&gt;...must return &lt;code&gt;ImageData&lt;/code&gt; objects with the same
+  dimensions, for any value of &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and &lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;. In other words, while user agents may round the
   arguments of these methods so that they map to device pixel
   boundaries, any rounding performed must be performed consistently
-  for all of the &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;createImageData()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-putImageData&gt;&lt;a href=#dom-context-2d-putimagedata&gt;putImageData()&lt;/a&gt;&lt;/code&gt;
+  for all of the &lt;code
+  title=&quot;dom-context-2d-getImageData&quot;&gt;createImageData()&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData()&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData()&lt;/code&gt;
   operations.&lt;/p&gt;
 
-  &lt;p class=note&gt;This implies that the data returned by &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt; is at the
+  &lt;p class=&quot;note&quot;&gt;This implies that the data returned by &lt;code
+  title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData()&lt;/code&gt; is at the
   resolution of the canvas backing store. This is likely to not be one
   device pixel to each CSS pixel if the display used is a high
   resolution display.&lt;/p&gt;
 
-  &lt;p class=note&gt;Due to the lossy nature of converting to and from
+  &lt;p class=&quot;note&quot;&gt;Due to the lossy nature of converting to and from
   premultiplied alpha color values, pixels that have just been set
-  using &lt;code title=dom-context-2d-putImageData&gt;&lt;a href=#dom-context-2d-putimagedata&gt;putImageData()&lt;/a&gt;&lt;/code&gt; might be
-  returned to an equivalent &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt; as
+  using &lt;code
+  title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData()&lt;/code&gt; might be
+  returned to an equivalent &lt;code
+  title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData()&lt;/code&gt; as
   different values.&lt;/p&gt;
-
-  &lt;p&gt;The current path, &lt;a href=#transformations title=dom-context-2d-transformation&gt;transformation matrix&lt;/a&gt;,
+--&gt;&lt;p&gt;The current path, &lt;a href=#transformations title=dom-context-2d-transformation&gt;transformation matrix&lt;/a&gt;,
   &lt;a href=#shadows title=shadows&gt;shadow attributes&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, the
   &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
   operator&lt;/a&gt; must not affect the &lt;code title=dom-context-2d-getImageData&gt;&lt;a href=#dom-context-2d-getimagedata&gt;getImageData()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-putImageData&gt;&lt;a href=#dom-context-2d-putimagedata&gt;putImageData()&lt;/a&gt;&lt;/code&gt;

Modified: source
===================================================================
--- source	2012-07-12 19:25:06 UTC (rev 7176)
+++ source	2012-07-16 19:16:26 UTC (rev 7177)
@@ -41730,11 +41730,11 @@
   void &lt;span title=&quot;dom-context-2d-addHitRegion&quot;&gt;addHitRegion&lt;/span&gt;(&lt;span&gt;HitRegionOptions&lt;/span&gt; options);
 
   // pixel manipulation
-  &lt;span&gt;ImageData&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createImageData&quot;&gt;createImageData&lt;/span&gt;(unrestricted double sw, unrestricted double sh);
+  &lt;span&gt;ImageData&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createImageData&quot;&gt;createImageData&lt;/span&gt;(double sw, double sh);
   &lt;span&gt;ImageData&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createImageData&quot;&gt;createImageData&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; imagedata);
-  &lt;span&gt;ImageData&lt;/span&gt; &lt;span title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData&lt;/span&gt;(unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh);
-  void &lt;span title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; imagedata, unrestricted double dx, unrestricted double dy);
-  void &lt;span title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; imagedata, unrestricted double dx, unrestricted double dy, unrestricted double dirtyX, unrestricted double dirtyY, unrestricted double dirtyWidth, unrestricted double dirtyHeight);
+  &lt;span&gt;ImageData&lt;/span&gt; &lt;span title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData&lt;/span&gt;(double sx, double sy, double sw, double sh);
+  void &lt;span title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; imagedata, double dx, double dy);
+  void &lt;span title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; imagedata, double dx, double dy, double dirtyX, double dirtyY, double dirtyWidth, double dirtyHeight);
 };
 &lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; implements &lt;span&gt;CanvasDrawingStyles&lt;/span&gt;;
 &lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; implements &lt;span&gt;CanvasPathMethods&lt;/span&gt;;
@@ -46671,9 +46671,8 @@
    &lt;dd&gt;
 
     &lt;p&gt;Returns an &lt;code&gt;ImageData&lt;/code&gt; object with the given
-    dimensions in CSS pixels (which might map to a different number of
-    actual device pixels exposed by the object itself). All the pixels
-    in the returned object are transparent black.&lt;/p&gt;
+    dimensions. All the pixels in the returned object are transparent
+    black.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -46699,6 +46698,9 @@
     exception if the either of the width or height arguments are
     zero.&lt;/p&gt;
 
+    &lt;p&gt;The data will be returned with one pixel of image data for each
+    coordinate space unit on the canvas (ignoring transforms).&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; . &lt;code title=&quot;dom-imagedata-width&quot;&gt;width&lt;/code&gt;&lt;/dt&gt;
@@ -46737,6 +46739,9 @@
     &lt;p&gt;Throws a &lt;code&gt;NotSupportedError&lt;/code&gt; exception if any of the
     arguments are not finite.&lt;/p&gt;
 
+    &lt;p&gt;Each pixel in the image data is mapped to one coordinate space
+    unit on the canvas.&lt;/p&gt;
+
    &lt;/dd&gt;
 
   &lt;/dl&gt;
@@ -46749,14 +46754,13 @@
   objects. When the method is invoked with two arguments &lt;var
   title=&quot;&quot;&gt;sw&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;, it must return an
   &lt;code&gt;ImageData&lt;/code&gt; object representing a rectangle with a width
-  in CSS pixels equal to the absolute magnitude of &lt;var
-  title=&quot;&quot;&gt;sw&lt;/var&gt; and a height in CSS pixels equal to the absolute
-  magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;. When invoked with a single &lt;var
-  title=&quot;&quot;&gt;imagedata&lt;/var&gt; argument, it must return an
-  &lt;code&gt;ImageData&lt;/code&gt; object representing a rectangle with the same
-  dimensions as the &lt;code&gt;ImageData&lt;/code&gt; object passed as the
-  argument. The &lt;code&gt;ImageData&lt;/code&gt; object returned must be filled
-  with transparent black.&lt;/p&gt;
+  in equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; and a
+  height equal to the absolute magnitude of &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;.
+  When invoked with a single &lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; argument,
+  it must return an &lt;code&gt;ImageData&lt;/code&gt; object representing a
+  rectangle with the same dimensions as the &lt;code&gt;ImageData&lt;/code&gt;
+  object passed as the argument. The &lt;code&gt;ImageData&lt;/code&gt; object
+  returned must be filled with transparent black.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-getImageData&quot;&gt;&lt;code&gt;getImageData(&lt;var
@@ -46766,7 +46770,8 @@
   if the &lt;code&gt;canvas&lt;/code&gt; element's &lt;i&gt;origin-clean&lt;/i&gt; flag is set
   to false, throw a &lt;code&gt;SecurityError&lt;/code&gt; exception; otherwise, it
 &lt;!--REMOVE-TOPIC:Security--&gt;
-  must return an &lt;code&gt;ImageData&lt;/code&gt; object representing the
+  must return an &lt;code&gt;ImageData&lt;/code&gt; object with width &lt;var
+  title=&quot;&quot;&gt;sw&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; representing the
   underlying pixel data for the area of the canvas denoted by the
   rectangle whose corners are the four points (&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;sy&lt;/var&gt;), (&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;sx&lt;/var&gt;+&lt;var
@@ -46778,39 +46783,34 @@
   outside the canvas must be returned as transparent black. Pixels
   must be returned as non-premultiplied alpha values.&lt;/p&gt;
 
-  &lt;p&gt;If any of the arguments to &lt;code
-  title=&quot;dom-context-2d-createImageData&quot;&gt;createImageData()&lt;/code&gt; or
-  &lt;code title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData()&lt;/code&gt;
-  are infinite or NaN, the method must instead throw a
-  &lt;code&gt;NotSupportedError&lt;/code&gt; exception. If either the &lt;var
-  title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt; arguments are zero,
-  the method must instead throw an &lt;code&gt;IndexSizeError&lt;/code&gt;
-  exception.&lt;/p&gt;
+  &lt;p&gt;If either the &lt;var title=&quot;&quot;&gt;sw&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;
+  arguments are zero, the method must instead throw an
+  &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;ImageData&lt;/code&gt; objects must be initialized so that their
   &lt;dfn title=&quot;dom-imagedata-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute
-  is set to &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, the number of physical device
-  pixels per row in the image data, their &lt;dfn
+  is set to the number of pixels per row in the image data, their &lt;dfn
   title=&quot;dom-imagedata-height&quot;&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt; attribute is
-  set to &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;, the number of rows in the image data,
-  and their &lt;dfn title=&quot;dom-imagedata-data&quot;&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt;
-  attribute is initialized to a &lt;code&gt;Uint8ClampedArray&lt;/code&gt; object.
-  The &lt;code&gt;Uint8ClampedArray&lt;/code&gt; object must use a &lt;span&gt;Canvas
-  Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/span&gt; for its storage, and must have
-  a zero start offset and a length equal to the length of its storage,
+  set to the number of rows in the image data, and their &lt;dfn
+  title=&quot;dom-imagedata-data&quot;&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt; attribute is
+  initialized to a &lt;code&gt;Uint8ClampedArray&lt;/code&gt; object. The
+  &lt;code&gt;Uint8ClampedArray&lt;/code&gt; object must use a &lt;span&gt;Canvas Pixel
+  &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/span&gt; for its storage, and must have a
+  zero start offset and a length equal to the length of its storage,
   in bytes. The &lt;span&gt;Canvas Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/span&gt;
   must contain the image data. At least one pixel's worth of image
-  data must be returned. &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  data must be returned. &lt;a
+  href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn&gt;Canvas Pixel &lt;code&gt;ArrayBuffer&lt;/code&gt;&lt;/dfn&gt; is an
   &lt;code&gt;ArrayBuffer&lt;/code&gt; that whose data is represented in
   left-to-right order, row by row top to bottom, starting with the top
   left, with each pixel's red, green, blue, and alpha components being
-  given in that order for each pixel. Each component of each device
-  pixel represented in this array must be in the range 0..255,
-  representing the 8 bit value for that component. The components must
-  be assigned consecutive indices starting with 0 for the top left
-  pixel's red component. &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
+  given in that order for each pixel. Each component of each pixel
+  represented in this array must be in the range 0..255, representing
+  the 8 bit value for that component. The components must be assigned
+  consecutive indices starting with 0 for the top left pixel's red
+  component. &lt;a href=&quot;#refsTYPEDARRAY&quot;&gt;[TYPEDARRAY]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-putImageData&quot;&gt;&lt;code&gt;putImageData(&lt;var
@@ -46820,9 +46820,6 @@
   title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method writes data from
   &lt;code&gt;ImageData&lt;/code&gt; structures back to the canvas.&lt;/p&gt;
 
-  &lt;p&gt;If any of the arguments to the method are infinite or NaN, the
-  method must throw a &lt;code&gt;NotSupportedError&lt;/code&gt; exception.&lt;/p&gt;
-
   &lt;p&gt;When the last four arguments are omitted, they must be assumed to
   have the values 0, 0, the &lt;code
   title=&quot;dom-imagedata-width&quot;&gt;width&lt;/code&gt; member of the &lt;var
@@ -46839,20 +46836,6 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
-    of the device pixel in the underlying pixel data of the canvas
-    corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the
-    canvas coordinate space.&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
-    of the device pixel in the underlying pixel data of the canvas
-    corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the
-    canvas coordinate space.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt; is negative, let &lt;var
     title=&quot;&quot;&gt;dirtyX&lt;/var&gt; be &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var
     title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;, and let &lt;var
@@ -46909,6 +46892,52 @@
 
    &lt;/li&gt;
 
+   &lt;li&gt;
+
+    &lt;p&gt;Draw the region of the image data in the horizontal rectangle
+    whose top left corner is at (&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;,&lt;var
+    title=&quot;&quot;&gt;dirtyY&lt;/var&gt;) and whose bottom right corner is at (&lt;span
+    title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;dirtyX&lt;/var&gt;+&lt;var
+    title=&quot;&quot;&gt;dirtyWidth&lt;/var&gt;&lt;/span&gt;,&lt;span title=&quot;&quot;&gt;&lt;var
+    title=&quot;&quot;&gt;dirtyY&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;dirtyHeight&lt;/var&gt;&lt;/span&gt;) onto
+    the canvas, aligned such that the top left of the rectangle is at
+    coordinate (&lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;,&lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;).&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;code
+    title=&quot;dom-context-2d-imageSmoothingEnabled&quot;&gt;imageSmoothingEnabled&lt;/code&gt;
+    attribute is set to true, then the user agent should attempt to
+    apply a smoothing algorithm to the image data if the canvas does
+    not have exactly one device pixel per coordinate space unit in its
+    underlying pixel data.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+&lt;!-- XXXXX
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;scale&lt;/var&gt; be the number of device pixels in
+    the underlying pixel data of the canvas per coordinate space
+    unit.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the x-coordinate
+    of the device pixel in the underlying pixel data of the canvas
+    corresponding to the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate in the
+    canvas coordinate space.&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dy&lt;sub&gt;device&lt;/sub&gt;&lt;/var&gt; be the y-coordinate
+    of the device pixel in the underlying pixel data of the canvas
+    corresponding to the &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt; coordinate in the
+    canvas coordinate space.&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Otherwise, for all integer values of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;
    and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;&lt;var
    title=&quot;&quot;&gt;dirtyX&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
@@ -46926,8 +46955,6 @@
    title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;) in the underlying pixel data of the
    canvas.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;
-
   &lt;p&gt;The handling of pixel rounding when the specified coordinates do
   not exactly map to the device coordinate space is not defined by
   this specification, except that the following must result in no
@@ -46970,6 +46997,7 @@
   returned to an equivalent &lt;code
   title=&quot;dom-context-2d-getImageData&quot;&gt;getImageData()&lt;/code&gt; as
   different values.&lt;/p&gt;
+--&gt;
 
   &lt;p&gt;The current path, &lt;span
   title=&quot;dom-context-2d-transformation&quot;&gt;transformation matrix&lt;/span&gt;,


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014041.html">[html5] r7176 - [e] (0) fix contributor's name Fixing	https://www.w3.org/Bugs/Public/show_bug.cg [...]
</A></li>
	<LI>Next message: <A HREF="014043.html">[html5] r7178 - [giow] (0) Try to introduce 'HD' versions of the	ImageData API. PLEASE DO NOT IM [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14042">[ date ]</a>
              <a href="thread.html#14042">[ thread ]</a>
              <a href="subject.html#14042">[ subject ]</a>
              <a href="author.html#14042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
