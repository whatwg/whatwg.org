<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7016 - [e] (0) Factor our line style and text styles.	Affected topics: Canvas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7016%20-%20%5Be%5D%20%280%29%20Factor%20our%20line%20style%20and%20text%20styles.%0A%09Affected%20topics%3A%20Canvas&In-Reply-To=%3C20120306232351.116F21C9C010%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013880.html">
   <LINK REL="Next"  HREF="013882.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7016 - [e] (0) Factor our line style and text styles.	Affected topics: Canvas</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7016%20-%20%5Be%5D%20%280%29%20Factor%20our%20line%20style%20and%20text%20styles.%0A%09Affected%20topics%3A%20Canvas&In-Reply-To=%3C20120306232351.116F21C9C010%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7016 - [e] (0) Factor our line style and text styles.	Affected topics: Canvas">whatwg at whatwg.org
       </A><BR>
    <I>Tue Mar  6 15:23:51 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="013880.html">[html5] r7015 - [e] (0) Extract the transformation matrix API from	canvas so we can reuse it wit [...]
</A></li>
        <LI>Next message: <A HREF="013882.html">[html5] r7017 - [e] (0) Factor our the path methods Affected	topics: Canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13881">[ date ]</a>
              <a href="thread.html#13881">[ thread ]</a>
              <a href="subject.html#13881">[ subject ]</a>
              <a href="author.html#13881">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-03-06 15:23:49 -0800 (Tue, 06 Mar 2012)
New Revision: 7016

Modified:
   complete.html
   index
   source
Log:
[e] (0) Factor our line style and text styles.
Affected topics: Canvas

Modified: complete.html
===================================================================
--- complete.html	2012-03-05 23:04:33 UTC (rev 7015)
+++ complete.html	2012-03-06 23:23:49 UTC (rev 7016)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 5 March 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 6 March 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -34871,8 +34871,8 @@
           attribute boolean &lt;span title=&quot;dom-context-2d-forceHighQuality&quot;&gt;forceHighQuality&lt;/span&gt; // (default false)
   // when enabled, it would prevent the UA from falling back on lower-quality but faster rendering routines
   // useful e.g. for when an image manipulation app uses &lt;canvas&gt; both for UI previews and the actual work
+
 --&gt;
-
   // compositing
            attribute double &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;globalAlpha&lt;/a&gt;; // (default 1.0)
            attribute DOMString &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;globalCompositeOperation&lt;/a&gt;; // (default source-over)
@@ -34884,20 +34884,15 @@
   - nested layers
     - the ability to composite an entire set of drawing operations with one shadow all at once
       <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2008-August/015567.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2008-August/015567.html</A>
+
 --&gt;
-  // colors and styles
+  // colors and styles (see also the &lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt; interface)
            attribute any &lt;a href=#dom-context-2d-strokestyle title=dom-context-2d-strokeStyle&gt;strokeStyle&lt;/a&gt;; // (default black)
            attribute any &lt;a href=#dom-context-2d-fillstyle title=dom-context-2d-fillStyle&gt;fillStyle&lt;/a&gt;; // (default black)
   &lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt; &lt;a href=#dom-context-2d-createlineargradient title=dom-context-2d-createLinearGradient&gt;createLinearGradient&lt;/a&gt;(double x0, double y0, double x1, double y1);
   &lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt; &lt;a href=#dom-context-2d-createradialgradient title=dom-context-2d-createRadialGradient&gt;createRadialGradient&lt;/a&gt;(double x0, double y0, double r0, double x1, double y1, double r1);
   &lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt; &lt;a href=#dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;createPattern&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, DOMString repetition);
 
-  // line caps/joins
-           attribute double &lt;a href=#dom-context-2d-linewidth title=dom-context-2d-lineWidth&gt;lineWidth&lt;/a&gt;; // (default 1)
-           attribute DOMString &lt;a href=#dom-context-2d-linecap title=dom-context-2d-lineCap&gt;lineCap&lt;/a&gt;; // &quot;butt&quot;, &quot;round&quot;, &quot;square&quot; (default &quot;butt&quot;)
-           attribute DOMString &lt;a href=#dom-context-2d-linejoin title=dom-context-2d-lineJoin&gt;lineJoin&lt;/a&gt;; // &quot;round&quot;, &quot;bevel&quot;, &quot;miter&quot; (default &quot;miter&quot;)
-           attribute double &lt;a href=#dom-context-2d-miterlimit title=dom-context-2d-miterLimit&gt;miterLimit&lt;/a&gt;; // (default 10)
-
   // shadows
            attribute double &lt;a href=#dom-context-2d-shadowoffsetx title=dom-context-2d-shadowOffsetX&gt;shadowOffsetX&lt;/a&gt;; // (default 0)
            attribute double &lt;a href=#dom-context-2d-shadowoffsety title=dom-context-2d-shadowOffsetY&gt;shadowOffsetY&lt;/a&gt;; // (default 0)
@@ -34927,10 +34922,7 @@
   void &lt;a href=#dom-context-2d-clip title=dom-context-2d-clip&gt;clip&lt;/a&gt;();
   boolean &lt;a href=#dom-context-2d-ispointinpath title=dom-context-2d-isPointInPath&gt;isPointInPath&lt;/a&gt;(double x, double y);
 
-  // text
-           attribute DOMString &lt;a href=#dom-context-2d-font title=dom-context-2d-font&gt;font&lt;/a&gt;; // (default 10px sans-serif)
-           attribute DOMString &lt;a href=#dom-context-2d-textalign title=dom-context-2d-textAlign&gt;textAlign&lt;/a&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
-           attribute DOMString &lt;a href=#dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;textBaseline&lt;/a&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+  // text (see also the &lt;a href=#canvastext&gt;CanvasText&lt;/a&gt; interface)
   void &lt;a href=#dom-context-2d-filltext title=dom-context-2d-fillText&gt;fillText&lt;/a&gt;(DOMString text, double x, double y, optional double maxWidth);
   void &lt;a href=#dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;strokeText&lt;/a&gt;(DOMString text, double x, double y, optional double maxWidth);&lt;!-- v6DVT
   void &lt;span title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText&lt;/span&gt;(DOMString text, double x, double y, optional double maxHeight);
@@ -34950,6 +34942,8 @@
   void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, double dx, double dy, double dirtyX, double dirtyY, double dirtyWidth, double dirtyHeight);
 };
 &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvastransformation&gt;CanvasTransformation&lt;/a&gt;;
+&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;;
+&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;;
 
 [NoInterfaceObject]
 interface &lt;dfn id=canvastransformation&gt;CanvasTransformation&lt;/dfn&gt; {
@@ -34963,9 +34957,25 @@
   // v7 we've also received requests (though not many so far) for:
   void skew(...);                             // is this common enough that one can't just use setTransform()?
   void reflect(...);  and  void mirror(...);  // aren't negative values in scale() sufficient for these?
---&gt;
+--&gt;};
+
+[NoInterfaceObject]
+interface &lt;dfn id=canvaslinestyles&gt;CanvasLineStyles&lt;/dfn&gt; {
+  // line caps/joins
+           attribute double &lt;a href=#dom-context-2d-linewidth title=dom-context-2d-lineWidth&gt;lineWidth&lt;/a&gt;; // (default 1)
+           attribute DOMString &lt;a href=#dom-context-2d-linecap title=dom-context-2d-lineCap&gt;lineCap&lt;/a&gt;; // &quot;butt&quot;, &quot;round&quot;, &quot;square&quot; (default &quot;butt&quot;)
+           attribute DOMString &lt;a href=#dom-context-2d-linejoin title=dom-context-2d-lineJoin&gt;lineJoin&lt;/a&gt;; // &quot;round&quot;, &quot;bevel&quot;, &quot;miter&quot; (default &quot;miter&quot;)
+           attribute double &lt;a href=#dom-context-2d-miterlimit title=dom-context-2d-miterLimit&gt;miterLimit&lt;/a&gt;; // (default 10)
 };
 
+[NoInterfaceObject]
+interface &lt;dfn id=canvastext&gt;CanvasText&lt;/dfn&gt; {
+  // text
+           attribute DOMString &lt;a href=#dom-context-2d-font title=dom-context-2d-font&gt;font&lt;/a&gt;; // (default 10px sans-serif)
+           attribute DOMString &lt;a href=#dom-context-2d-textalign title=dom-context-2d-textAlign&gt;textAlign&lt;/a&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
+           attribute DOMString &lt;a href=#dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;textBaseline&lt;/a&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+};
+
 interface &lt;dfn id=canvasgradient&gt;CanvasGradient&lt;/dfn&gt; {
   // opaque object
   void &lt;a href=#dom-canvasgradient-addcolorstop title=dom-canvasgradient-addColorStop&gt;addColorStop&lt;/a&gt;(double offset, DOMString color);
@@ -35831,6 +35841,10 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  lines are treated by the object.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-context-2d-linewidth title=dom-context-2d-lineWidth&gt;&lt;code&gt;lineWidth&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the width of lines, in coordinate space units. On
   getting, it must return the current value. On setting, zero,
@@ -35838,7 +35852,8 @@
   value unchanged; other values must change the current value to the
   new value.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; attribute must
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface is created, the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;1.0&lt;/code&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-linecap title=dom-context-2d-lineCap&gt;&lt;code&gt;lineCap&lt;/code&gt;&lt;/dfn&gt; attribute
@@ -35860,7 +35875,8 @@
   must be changed to the new value; other values must ignored, leaving
   the value unchanged.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt; attribute must
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface is created, the &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;butt&lt;/code&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-linejoin title=dom-context-2d-lineJoin&gt;&lt;code&gt;lineJoin&lt;/code&gt;&lt;/dfn&gt;
@@ -35874,7 +35890,8 @@
   must be changed to the new value; other values must be ignored,
   leaving the value unchanged.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute must
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface is created, the &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;miter&lt;/code&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;A join exists at any point in a subpath shared by two consecutive
@@ -35890,7 +35907,7 @@
 
   &lt;p&gt;A filled triangle connecting these two opposite corners with a
   straight line, with the third point of the triangle being the join
-  point, must be rendered at all joins. The &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute controls
+  point, must be added at all joins. The &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute controls
   whether anything else is rendered. The three aforementioned values
   have the following meanings:&lt;/p&gt;
 
@@ -35901,10 +35918,10 @@
   the two aforementioned corners of the join, abutting (and not
   overlapping) the aforementioned triangle, with the diameter equal to
   the line width and the origin at the point of the join, must be
-  rendered at joins.&lt;/p&gt;
+  added at joins.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;miter&lt;/code&gt; value means that a second filled triangle
-  must (if it can given the miter length) be rendered at the join,
+  must (if it can given the miter length) be added at the join,
   with one line being the line between the two aforementioned corners,
   abutting the first triangle, and the other two being continuations of
   the outside edges of the two joining lines, as long as required to
@@ -35915,7 +35932,7 @@
   join. The miter limit ratio is the maximum allowed ratio of the
   miter length to half the line width. If the miter length would cause
   the miter limit ratio to be exceeded, this second triangle must not
-  be rendered.&lt;/p&gt;
+  be added.&lt;/p&gt;
 
   &lt;p&gt;The miter limit ratio can be explicitly set using the &lt;dfn id=dom-context-2d-miterlimit title=dom-context-2d-miterLimit&gt;&lt;code&gt;miterLimit&lt;/code&gt;&lt;/dfn&gt;
   attribute. On getting, it must return the current value. On setting,
@@ -35923,7 +35940,8 @@
   the value unchanged; other values must change the current value to
   the new value.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attribute must
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface is created, the &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;10.0&lt;/code&gt;.&lt;/p&gt;
 
   &lt;!--
@@ -36767,37 +36785,12 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+  &lt;/dl&gt;&lt;div class=impl&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
 
-    &lt;p&gt;Fills or strokes (respectively) the given text at the given
-    position. If a maximum width is provided, the text will be scaled
-    to fit that width if necessary.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-    method.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
   &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
   property of CSS (but without supporting property-independent style
@@ -36817,6 +36810,8 @@
   then it must be treated as if it was an unknown font, falling back
   to another as described by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;!-- XXX Path objects don't have a canvas --&gt;
+
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
   make the font look very ugly.&lt;/p&gt;
@@ -36840,27 +36835,29 @@
 
   &lt;/div&gt;
 
-  &lt;p&gt;When the context is created, the font of the context must be set
-  to 10px sans-serif. When the 'font-size' component is set to lengths
-  using percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
+  interface is created, the font of the context must be set to 10px
+  sans-serif. When the 'font-size' component is set to lengths using
+  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
   keywords, these must be interpreted relative to the computed value
   of the 'font-size' property of the corresponding &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
   element at the time that the attribute is set. When the
   'font-weight' component is set to the relative values 'bolder' and
   'lighter', these must be interpreted relative to the computed value
   of the 'font-weight' property of the corresponding
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is
-  set. If the computed values are undefined for a particular case
-  (e.g. because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is set.
+  If the computed values are undefined for a particular case (e.g.
+  because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
   &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
   interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt;
+  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on getting, must return the current value. On setting, if
   the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
   value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the context is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
+  must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
@@ -36869,7 +36866,8 @@
   &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;,
   or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;,
   then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the context is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
+  value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
   must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -36902,8 +36900,40 @@
    &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
    &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
+  &lt;/dl&gt;&lt;hr&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Fills or strokes (respectively) the given text at the given
+    position. If a maximum width is provided, the text will be scaled
+    to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the advance width of the text that was passed to the
+    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
+    method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;&lt;div class=impl&gt;
 
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the
+  following methods for rendering text directly to the canvas.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-context-2d-filltext title=dom-context-2d-fillText&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
   &lt;dfn id=dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
   methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;, and render the given &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; at the given (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that the text isn't wider

Modified: index
===================================================================
--- index	2012-03-05 23:04:33 UTC (rev 7015)
+++ index	2012-03-06 23:23:49 UTC (rev 7016)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 5 March 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 6 March 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -34871,8 +34871,8 @@
           attribute boolean &lt;span title=&quot;dom-context-2d-forceHighQuality&quot;&gt;forceHighQuality&lt;/span&gt; // (default false)
   // when enabled, it would prevent the UA from falling back on lower-quality but faster rendering routines
   // useful e.g. for when an image manipulation app uses &lt;canvas&gt; both for UI previews and the actual work
+
 --&gt;
-
   // compositing
            attribute double &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;globalAlpha&lt;/a&gt;; // (default 1.0)
            attribute DOMString &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;globalCompositeOperation&lt;/a&gt;; // (default source-over)
@@ -34884,20 +34884,15 @@
   - nested layers
     - the ability to composite an entire set of drawing operations with one shadow all at once
       <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2008-August/015567.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2008-August/015567.html</A>
+
 --&gt;
-  // colors and styles
+  // colors and styles (see also the &lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt; interface)
            attribute any &lt;a href=#dom-context-2d-strokestyle title=dom-context-2d-strokeStyle&gt;strokeStyle&lt;/a&gt;; // (default black)
            attribute any &lt;a href=#dom-context-2d-fillstyle title=dom-context-2d-fillStyle&gt;fillStyle&lt;/a&gt;; // (default black)
   &lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt; &lt;a href=#dom-context-2d-createlineargradient title=dom-context-2d-createLinearGradient&gt;createLinearGradient&lt;/a&gt;(double x0, double y0, double x1, double y1);
   &lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt; &lt;a href=#dom-context-2d-createradialgradient title=dom-context-2d-createRadialGradient&gt;createRadialGradient&lt;/a&gt;(double x0, double y0, double r0, double x1, double y1, double r1);
   &lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt; &lt;a href=#dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;createPattern&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, DOMString repetition);
 
-  // line caps/joins
-           attribute double &lt;a href=#dom-context-2d-linewidth title=dom-context-2d-lineWidth&gt;lineWidth&lt;/a&gt;; // (default 1)
-           attribute DOMString &lt;a href=#dom-context-2d-linecap title=dom-context-2d-lineCap&gt;lineCap&lt;/a&gt;; // &quot;butt&quot;, &quot;round&quot;, &quot;square&quot; (default &quot;butt&quot;)
-           attribute DOMString &lt;a href=#dom-context-2d-linejoin title=dom-context-2d-lineJoin&gt;lineJoin&lt;/a&gt;; // &quot;round&quot;, &quot;bevel&quot;, &quot;miter&quot; (default &quot;miter&quot;)
-           attribute double &lt;a href=#dom-context-2d-miterlimit title=dom-context-2d-miterLimit&gt;miterLimit&lt;/a&gt;; // (default 10)
-
   // shadows
            attribute double &lt;a href=#dom-context-2d-shadowoffsetx title=dom-context-2d-shadowOffsetX&gt;shadowOffsetX&lt;/a&gt;; // (default 0)
            attribute double &lt;a href=#dom-context-2d-shadowoffsety title=dom-context-2d-shadowOffsetY&gt;shadowOffsetY&lt;/a&gt;; // (default 0)
@@ -34927,10 +34922,7 @@
   void &lt;a href=#dom-context-2d-clip title=dom-context-2d-clip&gt;clip&lt;/a&gt;();
   boolean &lt;a href=#dom-context-2d-ispointinpath title=dom-context-2d-isPointInPath&gt;isPointInPath&lt;/a&gt;(double x, double y);
 
-  // text
-           attribute DOMString &lt;a href=#dom-context-2d-font title=dom-context-2d-font&gt;font&lt;/a&gt;; // (default 10px sans-serif)
-           attribute DOMString &lt;a href=#dom-context-2d-textalign title=dom-context-2d-textAlign&gt;textAlign&lt;/a&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
-           attribute DOMString &lt;a href=#dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;textBaseline&lt;/a&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+  // text (see also the &lt;a href=#canvastext&gt;CanvasText&lt;/a&gt; interface)
   void &lt;a href=#dom-context-2d-filltext title=dom-context-2d-fillText&gt;fillText&lt;/a&gt;(DOMString text, double x, double y, optional double maxWidth);
   void &lt;a href=#dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;strokeText&lt;/a&gt;(DOMString text, double x, double y, optional double maxWidth);&lt;!-- v6DVT
   void &lt;span title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText&lt;/span&gt;(DOMString text, double x, double y, optional double maxHeight);
@@ -34950,6 +34942,8 @@
   void &lt;a href=#dom-context-2d-putimagedata title=dom-context-2d-putImageData&gt;putImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata, double dx, double dy, double dirtyX, double dirtyY, double dirtyWidth, double dirtyHeight);
 };
 &lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvastransformation&gt;CanvasTransformation&lt;/a&gt;;
+&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;;
+&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt; implements &lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;;
 
 [NoInterfaceObject]
 interface &lt;dfn id=canvastransformation&gt;CanvasTransformation&lt;/dfn&gt; {
@@ -34963,9 +34957,25 @@
   // v7 we've also received requests (though not many so far) for:
   void skew(...);                             // is this common enough that one can't just use setTransform()?
   void reflect(...);  and  void mirror(...);  // aren't negative values in scale() sufficient for these?
---&gt;
+--&gt;};
+
+[NoInterfaceObject]
+interface &lt;dfn id=canvaslinestyles&gt;CanvasLineStyles&lt;/dfn&gt; {
+  // line caps/joins
+           attribute double &lt;a href=#dom-context-2d-linewidth title=dom-context-2d-lineWidth&gt;lineWidth&lt;/a&gt;; // (default 1)
+           attribute DOMString &lt;a href=#dom-context-2d-linecap title=dom-context-2d-lineCap&gt;lineCap&lt;/a&gt;; // &quot;butt&quot;, &quot;round&quot;, &quot;square&quot; (default &quot;butt&quot;)
+           attribute DOMString &lt;a href=#dom-context-2d-linejoin title=dom-context-2d-lineJoin&gt;lineJoin&lt;/a&gt;; // &quot;round&quot;, &quot;bevel&quot;, &quot;miter&quot; (default &quot;miter&quot;)
+           attribute double &lt;a href=#dom-context-2d-miterlimit title=dom-context-2d-miterLimit&gt;miterLimit&lt;/a&gt;; // (default 10)
 };
 
+[NoInterfaceObject]
+interface &lt;dfn id=canvastext&gt;CanvasText&lt;/dfn&gt; {
+  // text
+           attribute DOMString &lt;a href=#dom-context-2d-font title=dom-context-2d-font&gt;font&lt;/a&gt;; // (default 10px sans-serif)
+           attribute DOMString &lt;a href=#dom-context-2d-textalign title=dom-context-2d-textAlign&gt;textAlign&lt;/a&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
+           attribute DOMString &lt;a href=#dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;textBaseline&lt;/a&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+};
+
 interface &lt;dfn id=canvasgradient&gt;CanvasGradient&lt;/dfn&gt; {
   // opaque object
   void &lt;a href=#dom-canvasgradient-addcolorstop title=dom-canvasgradient-addColorStop&gt;addColorStop&lt;/a&gt;(double offset, DOMString color);
@@ -35831,6 +35841,10 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  lines are treated by the object.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-context-2d-linewidth title=dom-context-2d-lineWidth&gt;&lt;code&gt;lineWidth&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the width of lines, in coordinate space units. On
   getting, it must return the current value. On setting, zero,
@@ -35838,7 +35852,8 @@
   value unchanged; other values must change the current value to the
   new value.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; attribute must
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface is created, the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;1.0&lt;/code&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-linecap title=dom-context-2d-lineCap&gt;&lt;code&gt;lineCap&lt;/code&gt;&lt;/dfn&gt; attribute
@@ -35860,7 +35875,8 @@
   must be changed to the new value; other values must ignored, leaving
   the value unchanged.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt; attribute must
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface is created, the &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;butt&lt;/code&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-linejoin title=dom-context-2d-lineJoin&gt;&lt;code&gt;lineJoin&lt;/code&gt;&lt;/dfn&gt;
@@ -35874,7 +35890,8 @@
   must be changed to the new value; other values must be ignored,
   leaving the value unchanged.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute must
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface is created, the &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;miter&lt;/code&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;A join exists at any point in a subpath shared by two consecutive
@@ -35890,7 +35907,7 @@
 
   &lt;p&gt;A filled triangle connecting these two opposite corners with a
   straight line, with the third point of the triangle being the join
-  point, must be rendered at all joins. The &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute controls
+  point, must be added at all joins. The &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute controls
   whether anything else is rendered. The three aforementioned values
   have the following meanings:&lt;/p&gt;
 
@@ -35901,10 +35918,10 @@
   the two aforementioned corners of the join, abutting (and not
   overlapping) the aforementioned triangle, with the diameter equal to
   the line width and the origin at the point of the join, must be
-  rendered at joins.&lt;/p&gt;
+  added at joins.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;miter&lt;/code&gt; value means that a second filled triangle
-  must (if it can given the miter length) be rendered at the join,
+  must (if it can given the miter length) be added at the join,
   with one line being the line between the two aforementioned corners,
   abutting the first triangle, and the other two being continuations of
   the outside edges of the two joining lines, as long as required to
@@ -35915,7 +35932,7 @@
   join. The miter limit ratio is the maximum allowed ratio of the
   miter length to half the line width. If the miter length would cause
   the miter limit ratio to be exceeded, this second triangle must not
-  be rendered.&lt;/p&gt;
+  be added.&lt;/p&gt;
 
   &lt;p&gt;The miter limit ratio can be explicitly set using the &lt;dfn id=dom-context-2d-miterlimit title=dom-context-2d-miterLimit&gt;&lt;code&gt;miterLimit&lt;/code&gt;&lt;/dfn&gt;
   attribute. On getting, it must return the current value. On setting,
@@ -35923,7 +35940,8 @@
   the value unchanged; other values must change the current value to
   the new value.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attribute must
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;&lt;/code&gt;
+  interface is created, the &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;10.0&lt;/code&gt;.&lt;/p&gt;
 
   &lt;!--
@@ -36767,37 +36785,12 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+  &lt;/dl&gt;&lt;div class=impl&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
 
-    &lt;p&gt;Fills or strokes (respectively) the given text at the given
-    position. If a maximum width is provided, the text will be scaled
-    to fit that width if necessary.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-    method.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
   &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
   property of CSS (but without supporting property-independent style
@@ -36817,6 +36810,8 @@
   then it must be treated as if it was an unknown font, falling back
   to another as described by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;!-- XXX Path objects don't have a canvas --&gt;
+
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
   make the font look very ugly.&lt;/p&gt;
@@ -36840,27 +36835,29 @@
 
   &lt;/div&gt;
 
-  &lt;p&gt;When the context is created, the font of the context must be set
-  to 10px sans-serif. When the 'font-size' component is set to lengths
-  using percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
+  interface is created, the font of the context must be set to 10px
+  sans-serif. When the 'font-size' component is set to lengths using
+  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
   keywords, these must be interpreted relative to the computed value
   of the 'font-size' property of the corresponding &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
   element at the time that the attribute is set. When the
   'font-weight' component is set to the relative values 'bolder' and
   'lighter', these must be interpreted relative to the computed value
   of the 'font-weight' property of the corresponding
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is
-  set. If the computed values are undefined for a particular case
-  (e.g. because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is set.
+  If the computed values are undefined for a particular case (e.g.
+  because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
   &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
   interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt;
+  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on getting, must return the current value. On setting, if
   the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
   value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the context is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
+  must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
   initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
@@ -36869,7 +36866,8 @@
   &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;,
   or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;,
   then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the context is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
+  value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
   must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -36902,8 +36900,40 @@
    &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
    &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
+  &lt;/dl&gt;&lt;hr&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Fills or strokes (respectively) the given text at the given
+    position. If a maximum width is provided, the text will be scaled
+    to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the advance width of the text that was passed to the
+    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
+    method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;&lt;div class=impl&gt;
 
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the
+  following methods for rendering text directly to the canvas.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-context-2d-filltext title=dom-context-2d-fillText&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
   &lt;dfn id=dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
   methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;, and render the given &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; at the given (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that the text isn't wider

Modified: source
===================================================================
--- source	2012-03-05 23:04:33 UTC (rev 7015)
+++ source	2012-03-06 23:23:49 UTC (rev 7016)
@@ -40553,8 +40553,8 @@
           attribute boolean &lt;span title=&quot;dom-context-2d-forceHighQuality&quot;&gt;forceHighQuality&lt;/span&gt; // (default false)
   // when enabled, it would prevent the UA from falling back on lower-quality but faster rendering routines
   // useful e.g. for when an image manipulation app uses &lt;canvas&gt; both for UI previews and the actual work
+
 --&gt;
-
   // compositing
            attribute double &lt;span title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/span&gt;; // (default 1.0)
            attribute DOMString &lt;span title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/span&gt;; // (default source-over)
@@ -40566,20 +40566,15 @@
   - nested layers
     - the ability to composite an entire set of drawing operations with one shadow all at once
       <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2008-August/015567.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2008-August/015567.html</A>
+
 --&gt;
-  // colors and styles
+  // colors and styles (see also the &lt;span&gt;CanvasLineStyles&lt;/span&gt; interface)
            attribute any &lt;span title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/span&gt;; // (default black)
            attribute any &lt;span title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/span&gt;; // (default black)
   &lt;span&gt;CanvasGradient&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createLinearGradient&quot;&gt;createLinearGradient&lt;/span&gt;(double x0, double y0, double x1, double y1);
   &lt;span&gt;CanvasGradient&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createRadialGradient&quot;&gt;createRadialGradient&lt;/span&gt;(double x0, double y0, double r0, double x1, double y1, double r1);
   &lt;span&gt;CanvasPattern&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern&lt;/span&gt;((&lt;span&gt;HTMLImageElement&lt;/span&gt; or &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or &lt;span&gt;HTMLVideoElement&lt;/span&gt;) image, DOMString repetition);
 
-  // line caps/joins
-           attribute double &lt;span title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/span&gt;; // (default 1)
-           attribute DOMString &lt;span title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/span&gt;; // &quot;butt&quot;, &quot;round&quot;, &quot;square&quot; (default &quot;butt&quot;)
-           attribute DOMString &lt;span title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/span&gt;; // &quot;round&quot;, &quot;bevel&quot;, &quot;miter&quot; (default &quot;miter&quot;)
-           attribute double &lt;span title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/span&gt;; // (default 10)
-
   // shadows
            attribute double &lt;span title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;shadowOffsetX&lt;/span&gt;; // (default 0)
            attribute double &lt;span title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;shadowOffsetY&lt;/span&gt;; // (default 0)
@@ -40609,10 +40604,7 @@
   void &lt;span title=&quot;dom-context-2d-clip&quot;&gt;clip&lt;/span&gt;();
   boolean &lt;span title=&quot;dom-context-2d-isPointInPath&quot;&gt;isPointInPath&lt;/span&gt;(double x, double y);
 
-  // text
-           attribute DOMString &lt;span title=&quot;dom-context-2d-font&quot;&gt;font&lt;/span&gt;; // (default 10px sans-serif)
-           attribute DOMString &lt;span title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/span&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
-           attribute DOMString &lt;span title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/span&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+  // text (see also the &lt;span&gt;CanvasText&lt;/span&gt; interface)
   void &lt;span title=&quot;dom-context-2d-fillText&quot;&gt;fillText&lt;/span&gt;(DOMString text, double x, double y, optional double maxWidth);
   void &lt;span title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText&lt;/span&gt;(DOMString text, double x, double y, optional double maxWidth);&lt;!-- v6DVT
   void &lt;span title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText&lt;/span&gt;(DOMString text, double x, double y, optional double maxHeight);
@@ -40632,6 +40624,8 @@
   void &lt;span title=&quot;dom-context-2d-putImageData&quot;&gt;putImageData&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; imagedata, double dx, double dy, double dirtyX, double dirtyY, double dirtyWidth, double dirtyHeight);
 };
 &lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; implements &lt;span&gt;CanvasTransformation&lt;/span&gt;;
+&lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; implements &lt;span&gt;CanvasLineStyles&lt;/span&gt;;
+&lt;span&gt;CanvasRenderingContext2D&lt;/span&gt; implements &lt;span&gt;CanvasText&lt;/span&gt;;
 
 [NoInterfaceObject]
 interface &lt;dfn&gt;CanvasTransformation&lt;/dfn&gt; {
@@ -40645,9 +40639,25 @@
   // v7 we've also received requests (though not many so far) for:
   void skew(...);                             // is this common enough that one can't just use setTransform()?
   void reflect(...);  and  void mirror(...);  // aren't negative values in scale() sufficient for these?
---&gt;
+--&gt;};
+
+[NoInterfaceObject]
+interface &lt;dfn&gt;CanvasLineStyles&lt;/dfn&gt; {
+  // line caps/joins
+           attribute double &lt;span title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/span&gt;; // (default 1)
+           attribute DOMString &lt;span title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/span&gt;; // &quot;butt&quot;, &quot;round&quot;, &quot;square&quot; (default &quot;butt&quot;)
+           attribute DOMString &lt;span title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/span&gt;; // &quot;round&quot;, &quot;bevel&quot;, &quot;miter&quot; (default &quot;miter&quot;)
+           attribute double &lt;span title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/span&gt;; // (default 10)
 };
 
+[NoInterfaceObject]
+interface &lt;dfn&gt;CanvasText&lt;/dfn&gt; {
+  // text
+           attribute DOMString &lt;span title=&quot;dom-context-2d-font&quot;&gt;font&lt;/span&gt;; // (default 10px sans-serif)
+           attribute DOMString &lt;span title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/span&gt;; // &quot;start&quot;, &quot;end&quot;, &quot;left&quot;, &quot;right&quot;, &quot;center&quot; (default: &quot;start&quot;)
+           attribute DOMString &lt;span title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/span&gt;; // &quot;top&quot;, &quot;hanging&quot;, &quot;middle&quot;, &quot;alphabetic&quot;, &quot;ideographic&quot;, &quot;bottom&quot; (default: &quot;alphabetic&quot;)
+};
+
 interface &lt;dfn&gt;CanvasGradient&lt;/dfn&gt; {
   // opaque object
   void &lt;span title=&quot;dom-canvasgradient-addColorStop&quot;&gt;addColorStop&lt;/span&gt;(double offset, DOMString color);
@@ -41694,6 +41704,10 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
+  &lt;p&gt;Objects that implement the &lt;code&gt;CanvasLineStyles&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  lines are treated by the object.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-lineWidth&quot;&gt;&lt;code&gt;lineWidth&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the width of lines, in coordinate space units. On
@@ -41702,7 +41716,8 @@
   value unchanged; other values must change the current value to the
   new value.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code
+  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasLineStyles&lt;/code&gt;
+  interface is created, the &lt;code
   title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;1.0&lt;/code&gt;.&lt;/p&gt;
 
@@ -41728,7 +41743,8 @@
   must be changed to the new value; other values must ignored, leaving
   the value unchanged.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code
+  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasLineStyles&lt;/code&gt;
+  interface is created, the &lt;code
   title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;butt&lt;/code&gt;.&lt;/p&gt;
 
@@ -41746,7 +41762,8 @@
   must be changed to the new value; other values must be ignored,
   leaving the value unchanged.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code
+  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasLineStyles&lt;/code&gt;
+  interface is created, the &lt;code
   title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;miter&lt;/code&gt;.&lt;/p&gt;
 
@@ -41765,7 +41782,7 @@
 
   &lt;p&gt;A filled triangle connecting these two opposite corners with a
   straight line, with the third point of the triangle being the join
-  point, must be rendered at all joins. The &lt;code
+  point, must be added at all joins. The &lt;code
   title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt; attribute controls
   whether anything else is rendered. The three aforementioned values
   have the following meanings:&lt;/p&gt;
@@ -41777,10 +41794,10 @@
   the two aforementioned corners of the join, abutting (and not
   overlapping) the aforementioned triangle, with the diameter equal to
   the line width and the origin at the point of the join, must be
-  rendered at joins.&lt;/p&gt;
+  added at joins.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;miter&lt;/code&gt; value means that a second filled triangle
-  must (if it can given the miter length) be rendered at the join,
+  must (if it can given the miter length) be added at the join,
   with one line being the line between the two aforementioned corners,
   abutting the first triangle, and the other two being continuations of
   the outside edges of the two joining lines, as long as required to
@@ -41791,7 +41808,7 @@
   join. The miter limit ratio is the maximum allowed ratio of the
   miter length to half the line width. If the miter length would cause
   the miter limit ratio to be exceeded, this second triangle must not
-  be rendered.&lt;/p&gt;
+  be added.&lt;/p&gt;
 
   &lt;p&gt;The miter limit ratio can be explicitly set using the &lt;dfn
   title=&quot;dom-context-2d-miterLimit&quot;&gt;&lt;code&gt;miterLimit&lt;/code&gt;&lt;/dfn&gt;
@@ -41800,7 +41817,8 @@
   the value unchanged; other values must change the current value to
   the new value.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code
+  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasLineStyles&lt;/code&gt;
+  interface is created, the &lt;code
   title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;10.0&lt;/code&gt;.&lt;/p&gt;
 
@@ -42808,39 +42826,14 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillText&quot;&gt;fillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Fills or strokes (respectively) the given text at the given
-    position. If a maximum width is provided, the text will be scaled
-    to fit that width if necessary.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;TextMetrics&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;
-    method.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
   &lt;/dl&gt;
 
   &lt;div class=&quot;impl&quot;&gt;
 
+  &lt;p&gt;Objects that implement the &lt;code&gt;CanvasText&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-font&quot;&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
   property of CSS (but without supporting property-independent style
@@ -42861,6 +42854,8 @@
   to another as described by the relevant CSS specifications.) &lt;a
   href=&quot;#refsCSSFONTS&quot;&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;!-- XXX Path objects don't have a canvas --&gt;
+
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
   make the font look very ugly.&lt;/p&gt;
@@ -42886,21 +42881,22 @@
 
   &lt;/div&gt;
 
-  &lt;p&gt;When the context is created, the font of the context must be set
-  to 10px sans-serif. When the 'font-size' component is set to lengths
-  using percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
+  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasText&lt;/code&gt;
+  interface is created, the font of the context must be set to 10px
+  sans-serif. When the 'font-size' component is set to lengths using
+  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
   keywords, these must be interpreted relative to the computed value
   of the 'font-size' property of the corresponding &lt;code&gt;canvas&lt;/code&gt;
   element at the time that the attribute is set. When the
   'font-weight' component is set to the relative values 'bolder' and
   'lighter', these must be interpreted relative to the computed value
   of the 'font-weight' property of the corresponding
-  &lt;code&gt;canvas&lt;/code&gt; element at the time that the attribute is
-  set. If the computed values are undefined for a particular case
-  (e.g. because the &lt;code&gt;canvas&lt;/code&gt; element is not &lt;span&gt;in a
+  &lt;code&gt;canvas&lt;/code&gt; element at the time that the attribute is set.
+  If the computed values are undefined for a particular case (e.g.
+  because the &lt;code&gt;canvas&lt;/code&gt; element is not &lt;span&gt;in a
   &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;), then the relative keywords must be
   interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt;
+  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-textAlign&quot;&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
@@ -42909,7 +42905,8 @@
   title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code
   title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
   value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the context is created, the &lt;code
+  must be ignored. When the object implementing the
+  &lt;code&gt;CanvasText&lt;/code&gt; interface is created, the &lt;code
   title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; attribute must
   initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
@@ -42925,7 +42922,8 @@
   title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;ideographic&lt;/code&gt;,
   or &lt;code title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;bottom&lt;/code&gt;,
   then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the context is created, the &lt;code
+  value must be ignored. When the object implementing the
+  &lt;code&gt;CanvasText&lt;/code&gt; interface is created, the &lt;code
   title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute
   must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
@@ -42963,8 +42961,46 @@
 
   &lt;/dl&gt;
 
+  &lt;hr&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillText&quot;&gt;fillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Fills or strokes (respectively) the given text at the given
+    position. If a maximum width is provided, the text will be scaled
+    to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;TextMetrics&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the advance width of the text that was passed to the
+    &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;
+    method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
+  &lt;p&gt;The &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; interface provides the
+  following methods for rendering text directly to the canvas.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-fillText&quot;&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
   &lt;dfn


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013880.html">[html5] r7015 - [e] (0) Extract the transformation matrix API from	canvas so we can reuse it wit [...]
</A></li>
	<LI>Next message: <A HREF="013882.html">[html5] r7017 - [e] (0) Factor our the path methods Affected	topics: Canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13881">[ date ]</a>
              <a href="thread.html#13881">[ thread ]</a>
              <a href="subject.html#13881">[ subject ]</a>
              <a href="author.html#13881">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
