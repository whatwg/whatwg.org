<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7029 - [giow] (0) Make it easier to do hit testing on	canvas Affected topics: Canvas, HTML
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7029%20-%20%5Bgiow%5D%20%280%29%20Make%20it%20easier%20to%20do%20hit%20testing%20on%0A%09canvas%20Affected%20topics%3A%20Canvas%2C%20HTML&In-Reply-To=%3C20120326051102.9B5081C8C006%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013893.html">
   <LINK REL="Next"  HREF="013895.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7029 - [giow] (0) Make it easier to do hit testing on	canvas Affected topics: Canvas, HTML</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7029%20-%20%5Bgiow%5D%20%280%29%20Make%20it%20easier%20to%20do%20hit%20testing%20on%0A%09canvas%20Affected%20topics%3A%20Canvas%2C%20HTML&In-Reply-To=%3C20120326051102.9B5081C8C006%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7029 - [giow] (0) Make it easier to do hit testing on	canvas Affected topics: Canvas, HTML">whatwg at whatwg.org
       </A><BR>
    <I>Sun Mar 25 22:11:02 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="013893.html">[html5] r7028 - [giow] (0) add dashed lines and change how Path	objects work to instead use exte [...]
</A></li>
        <LI>Next message: <A HREF="013895.html">[html5] r7030 - [giow] (0) Pattern transforms,	first draft Affected topics: Canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13894">[ date ]</a>
              <a href="thread.html#13894">[ thread ]</a>
              <a href="subject.html#13894">[ subject ]</a>
              <a href="author.html#13894">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-03-25 22:11:00 -0700 (Sun, 25 Mar 2012)
New Revision: 7029

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Make it easier to do hit testing on canvas
Affected topics: Canvas, HTML

Modified: complete.html
===================================================================
--- complete.html	2012-03-19 22:29:20 UTC (rev 7028)
+++ complete.html	2012-03-26 05:11:00 UTC (rev 7029)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 19 March 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 26 March 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -610,12 +610,13 @@
          &lt;li&gt;&lt;a href=#drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing text to the canvas&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing paths to the canvas&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#hit-regions&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Hit regions&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.19 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -34445,7 +34446,7 @@
 --&gt;&lt;!--FORK--&gt;&lt;!--
 --&gt;, but with no &lt;a href=#interactive-content&gt;interactive content&lt;/a&gt; descendants except for &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; elements, &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; elements, &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute are in the &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; or &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio Button&lt;/a&gt; states, and &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; elements that are &lt;a href=#concept-button title=concept-button&gt;buttons&lt;/a&gt;&lt;!--
 --&gt;&lt;!--FORK--&gt;&lt;!--
---&gt;.&lt;/dd&gt; &lt;!-- and maybe &lt;select&gt;, I guess? I've left it in for now, since I guess authors might make accessible selects if they're simple enough, and it's not obvious how to distinguish the simple ones from the complex ones... --&gt;
+--&gt;.&lt;/dd&gt; &lt;!-- and maybe &lt;select&gt;, I guess? I've left it our for now, since I guess authors might make accessible selects if they're simple enough, and it's not obvious how to distinguish the simple ones from the complex ones... --&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
@@ -34961,6 +34962,9 @@
   void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, double dx, double dy, double dw, double dh);
   void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, double sx, double sy, double sw, double sh, double dx, double dy, double dw, double dh);
 
+  // hit regions
+  void &lt;a href=#dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;addHitRegion&lt;/a&gt;(&lt;a href=#hitregionoptions&gt;HitRegionOptions&lt;/a&gt; options);
+
   // pixel manipulation
   &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(double sw, double sh);
   &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata);
@@ -35018,6 +35022,19 @@
   readonly attribute double &lt;a href=#dom-textmetrics-width title=dom-textmetrics-width&gt;width&lt;/a&gt;;
 };
 
+dictionary &lt;dfn id=hitregionoptions&gt;HitRegionOptions&lt;/dfn&gt; {
+  &lt;a href=#path&gt;Path&lt;/a&gt;? &lt;span title=dom-HitRegionOptions-path&gt;path&lt;/span&gt; = null;
+  &lt;a href=#svgmatrix&gt;SVGMatrix&lt;/a&gt;? &lt;span title=dom-HitRegionOptions-transform&gt;transform&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt; &lt;span title=dom-HitRegionOptions-id&gt;id&lt;/span&gt; = '';
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=dom-HitRegionOptions-parentID&gt;parentID&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt; &lt;span title=dom-HitRegionOptions-cursor&gt;cursor&lt;/span&gt; = 'inherit';
+  // for control-backed regions:
+  &lt;a href=#element&gt;Element&lt;/a&gt;? &lt;span title=dom-HitRegionOptions-control&gt;control&lt;/span&gt; = null;
+  // for unbacked regions:
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=dom-HitRegionOptions-label&gt;label&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=dom-HitRegionOptions-role&gt;role&lt;/span&gt; = null;
+};
+
 interface &lt;dfn id=imagedata&gt;ImageData&lt;/dfn&gt; {
   readonly attribute unsigned long &lt;a href=#dom-imagedata-width title=dom-imagedata-width&gt;width&lt;/a&gt;;
   readonly attribute unsigned long &lt;a href=#dom-imagedata-height title=dom-imagedata-height&gt;height&lt;/a&gt;;
@@ -37181,9 +37198,10 @@
   generating the repeated pattern. When rendered, however, patterns
   must actually be painted only where the stroking or filling effect
   requires that they be drawn, and the repeated pattern must be
-  affected by the current transformation matrix. Pixels not covered by
-  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
-  specified) must be transparent black.&lt;/p&gt;
+  affected by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+  transformation matrix&lt;/a&gt;. Pixels not covered by the repeating
+  pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not specified) must
+  be transparent black.&lt;/p&gt;
 
   &lt;p&gt;If the original image data is a bitmap image, the value painted
   at a point in the area of the repetitions is computed by filtering
@@ -37285,11 +37303,20 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following steps:&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in
+   the specified rectangle that also intersect the current clipping
+   region.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; to a fully
+   transparent black, erasing any previous image.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; in the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;If either height or width are zero, this method has
+  no effect, since the set of pixels would be empty.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
   rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
   or width are zero, this method has no effect.&lt;/p&gt;
@@ -37704,8 +37731,8 @@
   provided, or the &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; otherwise.&lt;/p&gt;
 
   &lt;p&gt;When the intended path is a &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object, the
-  coordinates of its subpaths must be transformed according to the
-  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+  coordinates and lines of its subpaths must be transformed according
+  to the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
   matrix&lt;/a&gt; when used by these methods (without affecting the
   &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object itself). When the intended path is the
   &lt;a href=#current-default-path&gt;current default path&lt;/a&gt;, it is not affected by the
@@ -38118,9 +38145,637 @@
   &lt;/div&gt;
 
 
+  &lt;h6 id=hit-regions&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Hit regions&lt;/h6&gt;
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element whose &lt;a href=#primary-context&gt;primary
+  context&lt;/a&gt; is a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object
+  must have a &lt;dfn id=hit-region-list&gt;hit region list&lt;/dfn&gt; associated with its
+  bitmap.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; is a list of &lt;a href=#hit-region title=&quot;hit
+  region&quot;&gt;hit regions&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;dfn id=hit-region&gt;hit region&lt;/dfn&gt; consists of the following
+  information:&lt;/p&gt;
+
+  &lt;ul&gt;&lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of
+   pixels&lt;/dfn&gt; on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap for which
+   this region is responsible.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-bounding-circumference&quot; title=&quot;hit region's bounding circumference&quot;&gt;bounding
+   circumference&lt;/dfn&gt; on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap
+   that surrounds the &lt;a href=&quot;#hit-region's-set-of-pixels&quot;&gt;hit region's set of pixels&lt;/a&gt; as they
+   stood when it was created.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, a non-empty string representing an &lt;dfn id=&quot;hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/dfn&gt; for distinguishing the region
+   from others.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, a reference to another region that acts as the
+   &lt;dfn id=&quot;hit-region's-parent&quot; title=&quot;hit region's parent&quot;&gt;parent&lt;/dfn&gt; for this
+   one.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A count of regions that have this one as their &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's parent&quot;&gt;parent&lt;/a&gt;, known as the &lt;dfn id=&quot;hit-region's-child-count&quot;&gt;hit
+   region's child count&lt;/dfn&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-cursor-specification&quot; title=&quot;hit region's cursor specification&quot;&gt;cursor
+   specification&lt;/dfn&gt;, in the form of either a CSS cursor value, or
+   the string &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; meaning that the cursor
+   of the &lt;a href=&quot;#hit-region's-parent&quot;&gt;hit region's parent&lt;/a&gt;, if any, or of the
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if not, is to be used
+   instead.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Optionally, either a &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
+    control&quot;&gt;control&lt;/a&gt;, or an &lt;a href=&quot;#hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked
+    region description&quot;&gt;unbacked region description&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;A &lt;dfn id=&quot;hit-region's-control&quot; title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a
+    reference to an &lt;code&gt;&lt;a href=#element&gt;Element&lt;/a&gt;&lt;/code&gt; node, to which, in certain
+    conditions, the user agent will route events, and from which the
+    user agent will determine the state of the hit region for the
+    purposes of accessibility tools.&lt;/p&gt;
+
+    &lt;p&gt;An &lt;dfn id=&quot;hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked region
+    description&quot;&gt;unbacked region description&lt;/dfn&gt; consists of the
+    following:&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;&lt;p&gt;Optionally, a &lt;dfn id=&quot;hit-region's-label&quot; title=&quot;hit region's
+     label&quot;&gt;label&lt;/dfn&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;An &lt;dfn id=&quot;hit-region's-aria-role&quot; title=&quot;hit region's ARIA role&quot;&gt;ARIA role&lt;/dfn&gt;,
+     which, if the &lt;a href=&quot;#hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked region
+     description&quot;&gt;unbacked region description&lt;/a&gt; also has a label,
+     could be the empty string.&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-addHitRegion&gt;&lt;a href=#dom-context-2d-addhitregion&gt;addHitRegion&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;options&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds a hit region to the canvas bitmap. The argument is an
+    object with the following members:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;&lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; (default null)
+
+     &lt;dd&gt;A &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object that describes the pixels that
+     form part of the region. If this member is not provided or is set
+     to null, the &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; is used
+     instead.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-transform&gt;transform&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An &lt;code&gt;&lt;a href=#svgmatrix&gt;SVGMatrix&lt;/a&gt;&lt;/code&gt; object that describes a
+     transformation to apply to the path described by the &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; (default empty string)
+
+     &lt;dd&gt;The ID to use for this region. This is used in
+     &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; events on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; (&lt;code title=dom-MouseEvent-region&gt;&lt;a href=#dom-mouseevent-region&gt;event.region&lt;/a&gt;&lt;/code&gt;) and as a way
+     to reference this region in later calls to &lt;code title=dom-context-2d-addHitRegion&gt;&lt;a href=#dom-context-2d-addhitregion&gt;addHitRegion()&lt;/a&gt;&lt;/code&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-parentID&gt;parentID&lt;/code&gt; (default null)
+
+     &lt;dd&gt;The ID of the parent region, for purposes of navigation by
+     accessibility tools and for cursor fallback.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-cursor&gt;cursor&lt;/code&gt; (default &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;)
+
+     &lt;dd&gt;The cursor to use when the mouse is over this region. The
+     value &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; means to use the cursor for
+     the parent region (as specified by the &lt;code title=dom-HitRegionOptions-parentID&gt;parentID&lt;/code&gt; member), if
+     any, or to use the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's cursor if the
+     region has no parent.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An element (that is a descendant of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;)
+     to which events are to be routed, and which accessibility tools
+     are to use as a surrogate for describing and interacting with
+     this region.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; (default null)
+
+     &lt;dd&gt;A text label for accessibility tools to use as a description
+     of this region, if there is no control.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An ARIA role for accessibility tools to use to determine how
+     to represent this region, if there is no control.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;p&gt;Hit regions can be used for a variety of purposes:&lt;/p&gt;
+
+    &lt;ul&gt;&lt;li&gt;With an ID, they can make hit detection easier by having the
+     user agent check which region the mouse is over and include the
+     ID in the mouse events.&lt;/li&gt;
+
+     &lt;li&gt;With a control, they can make routing events to DOM elements
+     automatic, allowing e.g. clicks on a canvas to automatically
+     submit a form via a &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+
+     &lt;li&gt;With a label, they can make it easier for users to explore a
+     canvas without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
+
+     &lt;li&gt;With a cursor, they can make it easier for different regions
+     of the canvas to have different cursors, with the user agent
+     automatically switching between them.&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;A &lt;a href=#hit-region&gt;hit region&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
+  &lt;dfn id=ancestor-region&gt;ancestor region&lt;/dfn&gt; of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; if &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; has a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+  region's parent&quot;&gt;parent&lt;/a&gt; and its &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+  parent&quot;&gt;parent&lt;/a&gt; is either &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; or another
+  &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for which &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
+  &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn id=the-region-identified-by-the-id&gt;The region identified by the ID&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; in a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or
+  nothing):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; is null, return nothing and abort
+   these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/a&gt;
+   is a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt;,
+   then return that &lt;a href=#hit-region&gt;hit region&lt;/a&gt; and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-representing-the-control&gt;The region representing the control&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; for a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or
+  nothing):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
+   control&quot;&gt;control&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then
+   return that &lt;a href=#hit-region&gt;hit region&lt;/a&gt; and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-control-represented-by-a-region&gt;The control represented by a region&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; for a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return an element or nothing):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit
+   region's control&quot;&gt;control&lt;/a&gt;, return nothing and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
+   control&quot;&gt;control&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-cursor-for-a-hit-region&gt;The cursor for a hit region&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has a &lt;a href=&quot;#hit-region's-cursor-specification&quot; title=&quot;hit region's cursor specification&quot;&gt;cursor
+   specification&lt;/a&gt; other than &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;,
+   then return that &lt;a href=&quot;#hit-region's-cursor-specification&quot;&gt;hit region's cursor specification&lt;/a&gt;
+   and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be that &lt;a href=&quot;#hit-region's-parent&quot;&gt;hit region's parent&lt;/a&gt;,
+   and return to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property
+   for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. &lt;a href=#refsCSSUI&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-for-a-pixel&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the
+  value returned by the following algorithm (which can return a
+  &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or nothing):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of
+   pixels&quot;&gt;set of pixels&lt;/a&gt; contains &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt;,
+   then return that &lt;a href=#hit-region&gt;hit region&lt;/a&gt; and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=clear-regions-that-cover-the-pixels&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user agent must run the following
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove all pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; from the
+   &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/a&gt; of
+   each &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; be the first
+   &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; to have an
+   empty &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of
+   pixels&lt;/a&gt; and a zero &lt;a href=&quot;#hit-region's-child-count&quot; title=&quot;hit region's child
+   count&quot;&gt;child count&lt;/a&gt;, if any. If there is no such &lt;a href=#hit-region&gt;hit
+   region&lt;/a&gt;, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; has a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt;, then decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit
+   region's child count&lt;/a&gt; by one.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; from &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;Adding a new region and calling &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt; are the three
+  ways this clearing algorithm can be invoked. Resizing the canvas
+  also clears the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; (since it clears the
+  canvas back to its initial state).&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When the &lt;dfn id=dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;&lt;code&gt;addHitRegion()&lt;/code&gt;&lt;/dfn&gt;
+  method is invoked, the user agent must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the dictionary object
+   provided as the method's argument.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member is not null,
+   let &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt; be the &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member's value.
+   Otherwise, let it be the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
+   object's &lt;a href=#current-default-path&gt;current default path&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member is null, but
+   the &lt;code title=dom-HitRegionOptions-transform&gt;transform&lt;/code&gt;
+   member is not, then throw a &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt;
+   exception and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates and lines in &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt; by the transform matrix given by the
+   &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-transform&gt;transform&lt;/code&gt; member, if
+   it is not null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is not null, then
+   let &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the
+   region identified by the ID&lt;/a&gt; given by the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member's value in this
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is null or no such
+   region currently exists, let &lt;var title=&quot;&quot;&gt;previous region for this
+   ID&lt;/var&gt; be null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is not
+   null, then let &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the
+   region identified by the ID&lt;/a&gt; given by the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member's value in
+   this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is null or
+   no such region currently exists, let &lt;var title=&quot;&quot;&gt;parent
+   region&lt;/var&gt; be null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If any of the following conditions are met, throw a
+    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception and abort these
+    steps.&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member is null, but
+     its &lt;code title=dom-HitRegionOptions-transform&gt;transform&lt;/code&gt;
+     member is not.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; and &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; members are both
+     non-null.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; and &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; members are both
+     non-null.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; member's value is
+     the empty string, and the &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member's value is
+     either null or the empty string.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;a href=#path&gt;path&lt;/a&gt; &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;
+     describes a shape with no pixels.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is not
+     null but is neither an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element that
+     &lt;a href=#represents&gt;represents&lt;/a&gt; a &lt;a href=#hyperlink&gt;hyperlink&lt;/a&gt;, a
+     &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element, an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element whose
+     &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in one of
+     the &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; or
+     &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio Button&lt;/a&gt; states,
+     nor an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element that is a &lt;a href=#concept-button title=concept-button&gt;button&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null but has a
+     &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's control&quot;&gt;control&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; is the
+     same &lt;a href=#hit-region&gt;hit region&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;parent
+     region&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; is an
+     &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;parent
+     region&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is not
+   null but &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is null, then throw a
+   &lt;code&gt;&lt;a href=#notfounderror&gt;NotFoundError&lt;/a&gt;&lt;/code&gt; exception and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If any of the following conditions are met, throw a
+    &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
+    steps.&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-cursor&gt;cursor&lt;/code&gt; member is not
+     null but is neither an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match
+     for the string &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;, nor a valid CSS
+     'cursor' property value. &lt;a href=#refsCSSUI&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; member is not null
+     but its value is not an &lt;a href=#ordered-set-of-unique-space-separated-tokens&gt;ordered set of unique
+     space-separated tokens&lt;/a&gt; whose tokens are all
+     &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; matches for names of non-abstract
+     WAI-ARIA roles. &lt;a href=#refsARIA&gt;[ARIA]&lt;/a&gt;&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be a newly created &lt;a href=#hit-region&gt;hit
+    region&lt;/a&gt;, with its information configured as follows:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;&lt;a href=&quot;#hit-region's-set-of-pixels&quot;&gt;Hit region's set of pixels&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;The pixels contained in &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-bounding-circumference&quot;&gt;Hit region's bounding circumference&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;A user-agent-defined shape that wraps the pixels contained
+     in &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;. (In the simplest case, this
+     can just be the bounding rectangle; this specification allows it
+     to be any shape in order to allow other interfaces.)
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-id&quot;&gt;Hit region's ID&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is not null: the
+     value of the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt;
+     member. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-id&quot; title=&quot;hit region's id&quot;&gt;id&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-parent&quot;&gt;Hit region's parent&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null: &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+     parent&quot;&gt;parent&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-child-count&quot;&gt;Hit region's child count&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;Initially zero.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-cursor-specification&quot;&gt;Hit region's cursor specification&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null: &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+     parent&quot;&gt;parent&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-control&quot;&gt;Hit region's control&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is not
+     null: the value of the &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member.
+     Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit
+     region's control&quot;&gt;control&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-label&quot;&gt;Hit region's label&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member is not
+     null: the value of the &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member.
+     Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-label&quot; title=&quot;hit
+     region's label&quot;&gt;label&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-aria-role&quot;&gt;Hit region's ARIA role&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; member is not null:
+     the value of the &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; member (which might
+     be the empty string). Otherwise, if the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member is not
+     null: the empty string. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has
+     no &lt;a href=&quot;#hit-region's-aria-role&quot; title=&quot;hit region's ARIA role&quot;&gt;ARIA role&lt;/a&gt;.
+
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-cursor&gt;cursor&lt;/code&gt; member is not
+    null, then act as if a CSS rule for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+    element setting its 'cursor' property had been seen, whose value
+    was the &lt;a href=&quot;#hit-region's-cursor-specification&quot;&gt;hit region's cursor specification&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p class=note&gt;For example, if the user agent prefetches cursor
+    values, this would cause that to happen in response to an
+    appropriately-formed &lt;code title=dom-context-2d-addHitRegion&gt;&lt;a href=#dom-context-2d-addhitregion&gt;addHitRegion()&lt;/a&gt;&lt;/code&gt;
+    call.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is not
+   null, then let &lt;var title=&quot;&quot;&gt;previous region for the control&lt;/var&gt;
+   be &lt;a href=#the-region-representing-the-control&gt;the region representing the control&lt;/a&gt; given by the
+   &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member's
+   value for this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is null
+   or no such region currently exists, let &lt;var title=&quot;&quot;&gt;previous
+   region for the control&lt;/var&gt; be null.&lt;/li&gt;
+
+   &lt;!-- the parent region can't have a control, because no region with
+   a control can be a parent - we check for that above. Thus, it is
+   safe to remove the previous region for the control without worrying
+   that our parent is going to be affected.
+
+   It's also safe to remove the previous region with this ID and all
+   its descendants, as we know that our parent isn't part of that
+   subtree. --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
+   control&lt;/var&gt;, remove it from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's
+   &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit
+   region's child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage
+   collect the regions below --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
+   ID&lt;/var&gt;, remove it, and all &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit
+   regions&lt;/a&gt; for which it is an &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;,
+   from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+   parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's
+   child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage collect the
+   regions below --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;, increment
+   its &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by one.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of
+   pixels&quot;&gt;set of pixels&lt;/a&gt; on this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/li&gt; &lt;!-- this is what garbage collects the earlier
+   regions --&gt;
+
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element's &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; interface is extended to support hit
+  regions:&lt;/p&gt;
+
+  &lt;pre class=idl&gt;partial interface &lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt; {
+  readonly attribute DOMString? &lt;a href=#dom-mouseevent-region title=dom-MouseEvent-region&gt;region&lt;/a&gt;;
+};
+
+partial dictionary &lt;a href=#mouseeventinit&gt;MouseEventInit&lt;/a&gt; {
+  DOMString? region;
+};&lt;/pre&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;event&lt;/var&gt; . &lt;code title=dom-MouseEvent-region&gt;&lt;a href=#dom-mouseevent-region&gt;region&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the mouse was over a &lt;a href=#hit-region&gt;hit region&lt;/a&gt;, then this returns the &lt;a href=&quot;#hit-region's-id&quot;&gt;hit region's ID&lt;/a&gt;, if it has one.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise, returns null.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-mouseevent-region title=dom-MouseEvent-region&gt;&lt;code&gt;region&lt;/code&gt;&lt;/dfn&gt;
+  attribute on &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; objects must return the value
+  it was initialized to. When the object is created, this attribute
+  must be initialized to null. It represents the &lt;a href=&quot;#hit-region's-id&quot;&gt;hit region's
+  ID&lt;/a&gt; if the mouse was over a hit region when the event was
+  fired.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; is to be fired at a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element by the user agent in response to a
+  pointing device action, the user agent must instead follow these
+  steps. If these steps say to &lt;i&gt;act as normal&lt;/i&gt;, that means that
+  the event must be fired as it would have had these requirements not
+  been applied.&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the pointing device is not indicating a pixel on the
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;, act as normal and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; be the pixel indicated by the
+   pointing device.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be the &lt;a href=#hit-region&gt;hit
+   region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the
+   region for the pixel&lt;/a&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on this
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, then act as
+   normal and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/a&gt;, if
+   any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is an &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, then initialize the
+   event object's &lt;code title=dom-MouseEvent-region&gt;&lt;a href=#dom-mouseevent-region&gt;region&lt;/a&gt;&lt;/code&gt;
+   attribute to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
+   control&quot;&gt;control&lt;/a&gt;, if any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then target the
+   event object at &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; instead of the
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Continue dispatching the event, but with the updated event
+   object and target as given in the above steps.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user's pointing device cursor is positioned over a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, user agents should render the pointing
+  device cursor according to the cursor specification described by
+  &lt;a href=#the-cursor-for-a-hit-region title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit
+  region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the
+  region for the pixel&lt;/a&gt; that the pointing device designates.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;User agents are encouraged to make use of the information present
+  in a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; to
+  improve the accessibility of &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;a href=#hit-region&gt;hit region&lt;/a&gt; should be handled in a fashion
+  equivalent to a node in a virtual DOM tree rooted at the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. The hierarchy of this virtual DOM tree
+  must match the hierarchy of the &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit
+  regions&lt;/a&gt;, as described by the &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+  parent&quot;&gt;parent&lt;/a&gt; of each region. Regions without a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's parent&quot;&gt;parent&lt;/a&gt; must be treated as
+  children of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element for the purpose of this
+  virtual DOM tree. For each node in such a DOM tree, the &lt;a href=&quot;#hit-region's-bounding-circumference&quot;&gt;hit
+  region's bounding circumference&lt;/a&gt; gives the region of the
+  screen to use when representing the node (if appropriate).&lt;/p&gt;
+
+  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of
+  this virtual DOM tree are those of the &lt;a href=&quot;#hit-region's-control&quot;&gt;hit region's
+  control&lt;/a&gt;, if it has one, or else of a non-interactive element
+  whose ARIA role, if any, is that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's
+  ARIA role&lt;/a&gt;, and whose textual representation, if any, is given
+  by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element
+  and there is &lt;a href=#the-region-representing-the-control title=&quot;the region representing the control&quot;&gt;a
+  region representing the control&lt;/a&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, then the element's position relative to
+  the document should be presented as if it was that region in the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
+
+  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of
+  this virtual DOM tree are those of the &lt;a href=&quot;#hit-region's-control&quot;&gt;hit region's
+  control&lt;/a&gt;, if it has one, or else of a non-interactive element
+  whose ARIA role, if any, is that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's
+  ARIA role&lt;/a&gt;, and whose textual representation, if any, is given
+  by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p class=note&gt;Thus, for instance, a user agent on a touch-screen
+  device could provide haptic feedback when the user croses over a
+  &lt;a href=&quot;#hit-region's-bounding-circumference&quot;&gt;hit region's bounding circumference&lt;/a&gt;, and then read the
+  &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt; to the user. Similarly, a desktop
+  user agent with a virtual accessibility focus separate from the
+  keyboard input focus could allow the user to navigate through the
+  hit regions, using the virtual DOM tree described above to enable
+  hierarchical navigation. When an interactive control inside the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is focused, if the control has a
+  corresponding region, then that &lt;a href=&quot;#hit-region's-bounding-circumference&quot;&gt;hit region's bounding
+  circumference&lt;/a&gt; could be used to determine what area of the
+  display to magnify.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -38455,7 +39110,7 @@
 
 
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Compositing&lt;/h6&gt;
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Compositing&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
@@ -38617,7 +39272,7 @@
 
 
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;All drawing operations are affected by the four global shadow
   attributes.&lt;/p&gt;
@@ -38758,7 +39413,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -38789,7 +39444,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Best practices&lt;/h6&gt;
+  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Best practices&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -38851,7 +39506,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.19 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 

Modified: index
===================================================================
--- index	2012-03-19 22:29:20 UTC (rev 7028)
+++ index	2012-03-26 05:11:00 UTC (rev 7029)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 19 March 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 26 March 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -610,12 +610,13 @@
          &lt;li&gt;&lt;a href=#drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing text to the canvas&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing paths to the canvas&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#hit-regions&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Hit regions&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.19 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -34445,7 +34446,7 @@
 --&gt;&lt;!--FORK--&gt;&lt;!--
 --&gt;, but with no &lt;a href=#interactive-content&gt;interactive content&lt;/a&gt; descendants except for &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; elements, &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; elements, &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute are in the &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; or &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio Button&lt;/a&gt; states, and &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; elements that are &lt;a href=#concept-button title=concept-button&gt;buttons&lt;/a&gt;&lt;!--
 --&gt;&lt;!--FORK--&gt;&lt;!--
---&gt;.&lt;/dd&gt; &lt;!-- and maybe &lt;select&gt;, I guess? I've left it in for now, since I guess authors might make accessible selects if they're simple enough, and it's not obvious how to distinguish the simple ones from the complex ones... --&gt;
+--&gt;.&lt;/dd&gt; &lt;!-- and maybe &lt;select&gt;, I guess? I've left it our for now, since I guess authors might make accessible selects if they're simple enough, and it's not obvious how to distinguish the simple ones from the complex ones... --&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-canvas-width&gt;&lt;a href=#attr-canvas-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
@@ -34961,6 +34962,9 @@
   void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, double dx, double dy, double dw, double dh);
   void &lt;a href=#dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;drawImage&lt;/a&gt;((&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt; or &lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt; or &lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;) image, double sx, double sy, double sw, double sh, double dx, double dy, double dw, double dh);
 
+  // hit regions
+  void &lt;a href=#dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;addHitRegion&lt;/a&gt;(&lt;a href=#hitregionoptions&gt;HitRegionOptions&lt;/a&gt; options);
+
   // pixel manipulation
   &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(double sw, double sh);
   &lt;a href=#imagedata&gt;ImageData&lt;/a&gt; &lt;a href=#dom-context-2d-createimagedata title=dom-context-2d-createImageData&gt;createImageData&lt;/a&gt;(&lt;a href=#imagedata&gt;ImageData&lt;/a&gt; imagedata);
@@ -35018,6 +35022,19 @@
   readonly attribute double &lt;a href=#dom-textmetrics-width title=dom-textmetrics-width&gt;width&lt;/a&gt;;
 };
 
+dictionary &lt;dfn id=hitregionoptions&gt;HitRegionOptions&lt;/dfn&gt; {
+  &lt;a href=#path&gt;Path&lt;/a&gt;? &lt;span title=dom-HitRegionOptions-path&gt;path&lt;/span&gt; = null;
+  &lt;a href=#svgmatrix&gt;SVGMatrix&lt;/a&gt;? &lt;span title=dom-HitRegionOptions-transform&gt;transform&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt; &lt;span title=dom-HitRegionOptions-id&gt;id&lt;/span&gt; = '';
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=dom-HitRegionOptions-parentID&gt;parentID&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt; &lt;span title=dom-HitRegionOptions-cursor&gt;cursor&lt;/span&gt; = 'inherit';
+  // for control-backed regions:
+  &lt;a href=#element&gt;Element&lt;/a&gt;? &lt;span title=dom-HitRegionOptions-control&gt;control&lt;/span&gt; = null;
+  // for unbacked regions:
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=dom-HitRegionOptions-label&gt;label&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=dom-HitRegionOptions-role&gt;role&lt;/span&gt; = null;
+};
+
 interface &lt;dfn id=imagedata&gt;ImageData&lt;/dfn&gt; {
   readonly attribute unsigned long &lt;a href=#dom-imagedata-width title=dom-imagedata-width&gt;width&lt;/a&gt;;
   readonly attribute unsigned long &lt;a href=#dom-imagedata-height title=dom-imagedata-height&gt;height&lt;/a&gt;;
@@ -37181,9 +37198,10 @@
   generating the repeated pattern. When rendered, however, patterns
   must actually be painted only where the stroking or filling effect
   requires that they be drawn, and the repeated pattern must be
-  affected by the current transformation matrix. Pixels not covered by
-  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
-  specified) must be transparent black.&lt;/p&gt;
+  affected by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+  transformation matrix&lt;/a&gt;. Pixels not covered by the repeating
+  pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not specified) must
+  be transparent black.&lt;/p&gt;
 
   &lt;p&gt;If the original image data is a bitmap image, the value painted
   at a point in the area of the repetitions is computed by filtering
@@ -37285,11 +37303,20 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following steps:&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in
+   the specified rectangle that also intersect the current clipping
+   region.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; to a fully
+   transparent black, erasing any previous image.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; in the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;If either height or width are zero, this method has
+  no effect, since the set of pixels would be empty.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
   rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
   or width are zero, this method has no effect.&lt;/p&gt;
@@ -37704,8 +37731,8 @@
   provided, or the &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; otherwise.&lt;/p&gt;
 
   &lt;p&gt;When the intended path is a &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object, the
-  coordinates of its subpaths must be transformed according to the
-  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+  coordinates and lines of its subpaths must be transformed according
+  to the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
   matrix&lt;/a&gt; when used by these methods (without affecting the
   &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object itself). When the intended path is the
   &lt;a href=#current-default-path&gt;current default path&lt;/a&gt;, it is not affected by the
@@ -38118,9 +38145,637 @@
   &lt;/div&gt;
 
 
+  &lt;h6 id=hit-regions&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Hit regions&lt;/h6&gt;
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element whose &lt;a href=#primary-context&gt;primary
+  context&lt;/a&gt; is a &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; object
+  must have a &lt;dfn id=hit-region-list&gt;hit region list&lt;/dfn&gt; associated with its
+  bitmap.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; is a list of &lt;a href=#hit-region title=&quot;hit
+  region&quot;&gt;hit regions&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;dfn id=hit-region&gt;hit region&lt;/dfn&gt; consists of the following
+  information:&lt;/p&gt;
+
+  &lt;ul&gt;&lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of
+   pixels&lt;/dfn&gt; on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap for which
+   this region is responsible.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-bounding-circumference&quot; title=&quot;hit region's bounding circumference&quot;&gt;bounding
+   circumference&lt;/dfn&gt; on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's bitmap
+   that surrounds the &lt;a href=&quot;#hit-region's-set-of-pixels&quot;&gt;hit region's set of pixels&lt;/a&gt; as they
+   stood when it was created.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, a non-empty string representing an &lt;dfn id=&quot;hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/dfn&gt; for distinguishing the region
+   from others.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, a reference to another region that acts as the
+   &lt;dfn id=&quot;hit-region's-parent&quot; title=&quot;hit region's parent&quot;&gt;parent&lt;/dfn&gt; for this
+   one.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A count of regions that have this one as their &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's parent&quot;&gt;parent&lt;/a&gt;, known as the &lt;dfn id=&quot;hit-region's-child-count&quot;&gt;hit
+   region's child count&lt;/dfn&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A &lt;dfn id=&quot;hit-region's-cursor-specification&quot; title=&quot;hit region's cursor specification&quot;&gt;cursor
+   specification&lt;/dfn&gt;, in the form of either a CSS cursor value, or
+   the string &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; meaning that the cursor
+   of the &lt;a href=&quot;#hit-region's-parent&quot;&gt;hit region's parent&lt;/a&gt;, if any, or of the
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if not, is to be used
+   instead.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Optionally, either a &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
+    control&quot;&gt;control&lt;/a&gt;, or an &lt;a href=&quot;#hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked
+    region description&quot;&gt;unbacked region description&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;A &lt;dfn id=&quot;hit-region's-control&quot; title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a
+    reference to an &lt;code&gt;&lt;a href=#element&gt;Element&lt;/a&gt;&lt;/code&gt; node, to which, in certain
+    conditions, the user agent will route events, and from which the
+    user agent will determine the state of the hit region for the
+    purposes of accessibility tools.&lt;/p&gt;
+
+    &lt;p&gt;An &lt;dfn id=&quot;hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked region
+    description&quot;&gt;unbacked region description&lt;/dfn&gt; consists of the
+    following:&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;&lt;p&gt;Optionally, a &lt;dfn id=&quot;hit-region's-label&quot; title=&quot;hit region's
+     label&quot;&gt;label&lt;/dfn&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;An &lt;dfn id=&quot;hit-region's-aria-role&quot; title=&quot;hit region's ARIA role&quot;&gt;ARIA role&lt;/dfn&gt;,
+     which, if the &lt;a href=&quot;#hit-region's-unbacked-region-description&quot; title=&quot;hit region's unbacked region
+     description&quot;&gt;unbacked region description&lt;/a&gt; also has a label,
+     could be the empty string.&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-addHitRegion&gt;&lt;a href=#dom-context-2d-addhitregion&gt;addHitRegion&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;options&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds a hit region to the canvas bitmap. The argument is an
+    object with the following members:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;&lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; (default null)
+
+     &lt;dd&gt;A &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object that describes the pixels that
+     form part of the region. If this member is not provided or is set
+     to null, the &lt;a href=#current-default-path&gt;current default path&lt;/a&gt; is used
+     instead.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-transform&gt;transform&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An &lt;code&gt;&lt;a href=#svgmatrix&gt;SVGMatrix&lt;/a&gt;&lt;/code&gt; object that describes a
+     transformation to apply to the path described by the &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; (default empty string)
+
+     &lt;dd&gt;The ID to use for this region. This is used in
+     &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; events on the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; (&lt;code title=dom-MouseEvent-region&gt;&lt;a href=#dom-mouseevent-region&gt;event.region&lt;/a&gt;&lt;/code&gt;) and as a way
+     to reference this region in later calls to &lt;code title=dom-context-2d-addHitRegion&gt;&lt;a href=#dom-context-2d-addhitregion&gt;addHitRegion()&lt;/a&gt;&lt;/code&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-parentID&gt;parentID&lt;/code&gt; (default null)
+
+     &lt;dd&gt;The ID of the parent region, for purposes of navigation by
+     accessibility tools and for cursor fallback.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-cursor&gt;cursor&lt;/code&gt; (default &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;)
+
+     &lt;dd&gt;The cursor to use when the mouse is over this region. The
+     value &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; means to use the cursor for
+     the parent region (as specified by the &lt;code title=dom-HitRegionOptions-parentID&gt;parentID&lt;/code&gt; member), if
+     any, or to use the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's cursor if the
+     region has no parent.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An element (that is a descendant of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;)
+     to which events are to be routed, and which accessibility tools
+     are to use as a surrogate for describing and interacting with
+     this region.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; (default null)
+
+     &lt;dd&gt;A text label for accessibility tools to use as a description
+     of this region, if there is no control.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An ARIA role for accessibility tools to use to determine how
+     to represent this region, if there is no control.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;p&gt;Hit regions can be used for a variety of purposes:&lt;/p&gt;
+
+    &lt;ul&gt;&lt;li&gt;With an ID, they can make hit detection easier by having the
+     user agent check which region the mouse is over and include the
+     ID in the mouse events.&lt;/li&gt;
+
+     &lt;li&gt;With a control, they can make routing events to DOM elements
+     automatic, allowing e.g. clicks on a canvas to automatically
+     submit a form via a &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+
+     &lt;li&gt;With a label, they can make it easier for users to explore a
+     canvas without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
+
+     &lt;li&gt;With a cursor, they can make it easier for different regions
+     of the canvas to have different cursors, with the user agent
+     automatically switching between them.&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;A &lt;a href=#hit-region&gt;hit region&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
+  &lt;dfn id=ancestor-region&gt;ancestor region&lt;/dfn&gt; of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; if &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; has a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+  region's parent&quot;&gt;parent&lt;/a&gt; and its &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+  parent&quot;&gt;parent&lt;/a&gt; is either &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; or another
+  &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for which &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
+  &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn id=the-region-identified-by-the-id&gt;The region identified by the ID&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; in a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or
+  nothing):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; is null, return nothing and abort
+   these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/a&gt;
+   is a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt;,
+   then return that &lt;a href=#hit-region&gt;hit region&lt;/a&gt; and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-representing-the-control&gt;The region representing the control&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; for a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or
+  nothing):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
+   control&quot;&gt;control&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then
+   return that &lt;a href=#hit-region&gt;hit region&lt;/a&gt; and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-control-represented-by-a-region&gt;The control represented by a region&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; for a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return an element or nothing):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit
+   region's control&quot;&gt;control&lt;/a&gt;, return nothing and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
+   control&quot;&gt;control&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-cursor-for-a-hit-region&gt;The cursor for a hit region&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has a &lt;a href=&quot;#hit-region's-cursor-specification&quot; title=&quot;hit region's cursor specification&quot;&gt;cursor
+   specification&lt;/a&gt; other than &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;,
+   then return that &lt;a href=&quot;#hit-region's-cursor-specification&quot;&gt;hit region's cursor specification&lt;/a&gt;
+   and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be that &lt;a href=&quot;#hit-region's-parent&quot;&gt;hit region's parent&lt;/a&gt;,
+   and return to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property
+   for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. &lt;a href=#refsCSSUI&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;&lt;dfn id=the-region-for-a-pixel&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the
+  value returned by the following algorithm (which can return a
+  &lt;a href=#hit-region&gt;hit region&lt;/a&gt; or nothing):&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of
+   pixels&quot;&gt;set of pixels&lt;/a&gt; contains &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt;,
+   then return that &lt;a href=#hit-region&gt;hit region&lt;/a&gt; and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=clear-regions-that-cover-the-pixels&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; on a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user agent must run the following
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove all pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; from the
+   &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/a&gt; of
+   each &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; be the first
+   &lt;a href=#hit-region&gt;hit region&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; to have an
+   empty &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of pixels&quot;&gt;set of
+   pixels&lt;/a&gt; and a zero &lt;a href=&quot;#hit-region's-child-count&quot; title=&quot;hit region's child
+   count&quot;&gt;child count&lt;/a&gt;, if any. If there is no such &lt;a href=#hit-region&gt;hit
+   region&lt;/a&gt;, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; has a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt;, then decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit
+   region's child count&lt;/a&gt; by one.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; from &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;Adding a new region and calling &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt; are the three
+  ways this clearing algorithm can be invoked. Resizing the canvas
+  also clears the &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; (since it clears the
+  canvas back to its initial state).&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When the &lt;dfn id=dom-context-2d-addhitregion title=dom-context-2d-addHitRegion&gt;&lt;code&gt;addHitRegion()&lt;/code&gt;&lt;/dfn&gt;
+  method is invoked, the user agent must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the dictionary object
+   provided as the method's argument.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member is not null,
+   let &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt; be the &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member's value.
+   Otherwise, let it be the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
+   object's &lt;a href=#current-default-path&gt;current default path&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member is null, but
+   the &lt;code title=dom-HitRegionOptions-transform&gt;transform&lt;/code&gt;
+   member is not, then throw a &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt;
+   exception and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates and lines in &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt; by the transform matrix given by the
+   &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-transform&gt;transform&lt;/code&gt; member, if
+   it is not null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is not null, then
+   let &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the
+   region identified by the ID&lt;/a&gt; given by the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member's value in this
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is null or no such
+   region currently exists, let &lt;var title=&quot;&quot;&gt;previous region for this
+   ID&lt;/var&gt; be null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is not
+   null, then let &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; be &lt;a href=#the-region-identified-by-the-id&gt;the
+   region identified by the ID&lt;/a&gt; given by the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member's value in
+   this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is null or
+   no such region currently exists, let &lt;var title=&quot;&quot;&gt;parent
+   region&lt;/var&gt; be null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If any of the following conditions are met, throw a
+    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception and abort these
+    steps.&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-path&gt;path&lt;/code&gt; member is null, but
+     its &lt;code title=dom-HitRegionOptions-transform&gt;transform&lt;/code&gt;
+     member is not.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; and &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; members are both
+     non-null.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; and &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; members are both
+     non-null.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; member's value is
+     the empty string, and the &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member's value is
+     either null or the empty string.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;a href=#path&gt;path&lt;/a&gt; &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;
+     describes a shape with no pixels.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is not
+     null but is neither an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element that
+     &lt;a href=#represents&gt;represents&lt;/a&gt; a &lt;a href=#hyperlink&gt;hyperlink&lt;/a&gt;, a
+     &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element, an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element whose
+     &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in one of
+     the &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; or
+     &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio Button&lt;/a&gt; states,
+     nor an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element that is a &lt;a href=#concept-button title=concept-button&gt;button&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null but has a
+     &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's control&quot;&gt;control&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; is the
+     same &lt;a href=#hit-region&gt;hit region&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;parent
+     region&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; is an
+     &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;parent
+     region&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code title=dom-HitRegionOptions-parent&gt;parent&lt;/code&gt; member is not
+   null but &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is null, then throw a
+   &lt;code&gt;&lt;a href=#notfounderror&gt;NotFoundError&lt;/a&gt;&lt;/code&gt; exception and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If any of the following conditions are met, throw a
+    &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
+    steps.&lt;/p&gt;
+
+    &lt;ul class=brief&gt;&lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-cursor&gt;cursor&lt;/code&gt; member is not
+     null but is neither an &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match
+     for the string &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;, nor a valid CSS
+     'cursor' property value. &lt;a href=#refsCSSUI&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; member is not null
+     but its value is not an &lt;a href=#ordered-set-of-unique-space-separated-tokens&gt;ordered set of unique
+     space-separated tokens&lt;/a&gt; whose tokens are all
+     &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; matches for names of non-abstract
+     WAI-ARIA roles. &lt;a href=#refsARIA&gt;[ARIA]&lt;/a&gt;&lt;/li&gt;
+
+    &lt;/ul&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be a newly created &lt;a href=#hit-region&gt;hit
+    region&lt;/a&gt;, with its information configured as follows:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;&lt;a href=&quot;#hit-region's-set-of-pixels&quot;&gt;Hit region's set of pixels&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;The pixels contained in &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-bounding-circumference&quot;&gt;Hit region's bounding circumference&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;A user-agent-defined shape that wraps the pixels contained
+     in &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;. (In the simplest case, this
+     can just be the bounding rectangle; this specification allows it
+     to be any shape in order to allow other interfaces.)
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-id&quot;&gt;Hit region's ID&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt; member is not null: the
+     value of the &lt;code title=dom-HitRegionOptions-id&gt;id&lt;/code&gt;
+     member. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-id&quot; title=&quot;hit region's id&quot;&gt;id&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-parent&quot;&gt;Hit region's parent&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null: &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+     parent&quot;&gt;parent&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-child-count&quot;&gt;Hit region's child count&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;Initially zero.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-cursor-specification&quot;&gt;Hit region's cursor specification&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null: &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+     parent&quot;&gt;parent&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-control&quot;&gt;Hit region's control&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is not
+     null: the value of the &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member.
+     Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit
+     region's control&quot;&gt;control&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-label&quot;&gt;Hit region's label&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member is not
+     null: the value of the &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member.
+     Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;a href=&quot;#hit-region's-label&quot; title=&quot;hit
+     region's label&quot;&gt;label&lt;/a&gt;.
+
+
+     &lt;dt&gt;&lt;a href=&quot;#hit-region's-aria-role&quot;&gt;Hit region's ARIA role&lt;/a&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; member is not null:
+     the value of the &lt;code title=dom-HitRegionOptions-role&gt;role&lt;/code&gt; member (which might
+     be the empty string). Otherwise, if the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-label&gt;label&lt;/code&gt; member is not
+     null: the empty string. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has
+     no &lt;a href=&quot;#hit-region's-aria-role&quot; title=&quot;hit region's ARIA role&quot;&gt;ARIA role&lt;/a&gt;.
+
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-cursor&gt;cursor&lt;/code&gt; member is not
+    null, then act as if a CSS rule for the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+    element setting its 'cursor' property had been seen, whose value
+    was the &lt;a href=&quot;#hit-region's-cursor-specification&quot;&gt;hit region's cursor specification&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p class=note&gt;For example, if the user agent prefetches cursor
+    values, this would cause that to happen in response to an
+    appropriately-formed &lt;code title=dom-context-2d-addHitRegion&gt;&lt;a href=#dom-context-2d-addhitregion&gt;addHitRegion()&lt;/a&gt;&lt;/code&gt;
+    call.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is not
+   null, then let &lt;var title=&quot;&quot;&gt;previous region for the control&lt;/var&gt;
+   be &lt;a href=#the-region-representing-the-control&gt;the region representing the control&lt;/a&gt; given by the
+   &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member's
+   value for this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any. If the &lt;code title=dom-HitRegionOptions-control&gt;control&lt;/code&gt; member is null
+   or no such region currently exists, let &lt;var title=&quot;&quot;&gt;previous
+   region for the control&lt;/var&gt; be null.&lt;/li&gt;
+
+   &lt;!-- the parent region can't have a control, because no region with
+   a control can be a parent - we check for that above. Thus, it is
+   safe to remove the previous region for the control without worrying
+   that our parent is going to be affected.
+
+   It's also safe to remove the previous region with this ID and all
+   its descendants, as we know that our parent isn't part of that
+   subtree. --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
+   control&lt;/var&gt;, remove it from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's
+   &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit
+   region's child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage
+   collect the regions below --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
+   ID&lt;/var&gt;, remove it, and all &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit
+   regions&lt;/a&gt; for which it is an &lt;a href=#ancestor-region&gt;ancestor region&lt;/a&gt;,
+   from the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit region
+   list&lt;/a&gt;; then, if it had a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+   parent&quot;&gt;parent&lt;/a&gt; region, decrement that &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's
+   child count&lt;/a&gt; by one.&lt;/li&gt; &lt;!-- we garbage collect the
+   regions below --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;, increment
+   its &lt;a href=&quot;#hit-region's-child-count&quot;&gt;hit region's child count&lt;/a&gt; by one.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#clear-regions-that-cover-the-pixels&gt;Clear regions that cover the pixels&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-set-of-pixels&quot; title=&quot;hit region's set of
+   pixels&quot;&gt;set of pixels&lt;/a&gt; on this &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element.&lt;/li&gt; &lt;!-- this is what garbage collects the earlier
+   regions --&gt;
+
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+   element's &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; interface is extended to support hit
+  regions:&lt;/p&gt;
+
+  &lt;pre class=idl&gt;partial interface &lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt; {
+  readonly attribute DOMString? &lt;a href=#dom-mouseevent-region title=dom-MouseEvent-region&gt;region&lt;/a&gt;;
+};
+
+partial dictionary &lt;a href=#mouseeventinit&gt;MouseEventInit&lt;/a&gt; {
+  DOMString? region;
+};&lt;/pre&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;event&lt;/var&gt; . &lt;code title=dom-MouseEvent-region&gt;&lt;a href=#dom-mouseevent-region&gt;region&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the mouse was over a &lt;a href=#hit-region&gt;hit region&lt;/a&gt;, then this returns the &lt;a href=&quot;#hit-region's-id&quot;&gt;hit region's ID&lt;/a&gt;, if it has one.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise, returns null.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-mouseevent-region title=dom-MouseEvent-region&gt;&lt;code&gt;region&lt;/code&gt;&lt;/dfn&gt;
+  attribute on &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; objects must return the value
+  it was initialized to. When the object is created, this attribute
+  must be initialized to null. It represents the &lt;a href=&quot;#hit-region's-id&quot;&gt;hit region's
+  ID&lt;/a&gt; if the mouse was over a hit region when the event was
+  fired.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#mouseevent&gt;MouseEvent&lt;/a&gt;&lt;/code&gt; is to be fired at a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element by the user agent in response to a
+  pointing device action, the user agent must instead follow these
+  steps. If these steps say to &lt;i&gt;act as normal&lt;/i&gt;, that means that
+  the event must be fired as it would have had these requirements not
+  been applied.&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the pointing device is not indicating a pixel on the
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;, act as normal and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; be the pixel indicated by the
+   pointing device.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be the &lt;a href=#hit-region&gt;hit
+   region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the
+   region for the pixel&lt;/a&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on this
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, then act as
+   normal and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-id&quot; title=&quot;hit region's ID&quot;&gt;ID&lt;/a&gt;, if
+   any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is an &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, then initialize the
+   event object's &lt;code title=dom-MouseEvent-region&gt;&lt;a href=#dom-mouseevent-region&gt;region&lt;/a&gt;&lt;/code&gt;
+   attribute to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;a href=&quot;#hit-region's-control&quot; title=&quot;hit region's
+   control&quot;&gt;control&lt;/a&gt;, if any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then target the
+   event object at &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; instead of the
+   &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Continue dispatching the event, but with the updated event
+   object and target as given in the above steps.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When a user's pointing device cursor is positioned over a
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, user agents should render the pointing
+  device cursor according to the cursor specification described by
+  &lt;a href=#the-cursor-for-a-hit-region title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit
+  region&lt;/a&gt; that is &lt;a href=#the-region-for-a-pixel title=&quot;the region for a pixel&quot;&gt;the
+  region for the pixel&lt;/a&gt; that the pointing device designates.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;User agents are encouraged to make use of the information present
+  in a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#hit-region-list&gt;hit region list&lt;/a&gt; to
+  improve the accessibility of &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;a href=#hit-region&gt;hit region&lt;/a&gt; should be handled in a fashion
+  equivalent to a node in a virtual DOM tree rooted at the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. The hierarchy of this virtual DOM tree
+  must match the hierarchy of the &lt;a href=#hit-region title=&quot;hit region&quot;&gt;hit
+  regions&lt;/a&gt;, as described by the &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's
+  parent&quot;&gt;parent&lt;/a&gt; of each region. Regions without a &lt;a href=&quot;#hit-region's-parent&quot; title=&quot;hit region's parent&quot;&gt;parent&lt;/a&gt; must be treated as
+  children of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element for the purpose of this
+  virtual DOM tree. For each node in such a DOM tree, the &lt;a href=&quot;#hit-region's-bounding-circumference&quot;&gt;hit
+  region's bounding circumference&lt;/a&gt; gives the region of the
+  screen to use when representing the node (if appropriate).&lt;/p&gt;
+
+  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of
+  this virtual DOM tree are those of the &lt;a href=&quot;#hit-region's-control&quot;&gt;hit region's
+  control&lt;/a&gt;, if it has one, or else of a non-interactive element
+  whose ARIA role, if any, is that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's
+  ARIA role&lt;/a&gt;, and whose textual representation, if any, is given
+  by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant of a &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element
+  and there is &lt;a href=#the-region-representing-the-control title=&quot;the region representing the control&quot;&gt;a
+  region representing the control&lt;/a&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, then the element's position relative to
+  the document should be presented as if it was that region in the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
+
+  &lt;p&gt;The semantics of a &lt;a href=#hit-region&gt;hit region&lt;/a&gt; for the purposes of
+  this virtual DOM tree are those of the &lt;a href=&quot;#hit-region's-control&quot;&gt;hit region's
+  control&lt;/a&gt;, if it has one, or else of a non-interactive element
+  whose ARIA role, if any, is that given by the &lt;a href=&quot;#hit-region's-aria-role&quot;&gt;hit region's
+  ARIA role&lt;/a&gt;, and whose textual representation, if any, is given
+  by the &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p class=note&gt;Thus, for instance, a user agent on a touch-screen
+  device could provide haptic feedback when the user croses over a
+  &lt;a href=&quot;#hit-region's-bounding-circumference&quot;&gt;hit region's bounding circumference&lt;/a&gt;, and then read the
+  &lt;a href=&quot;#hit-region's-label&quot;&gt;hit region's label&lt;/a&gt; to the user. Similarly, a desktop
+  user agent with a virtual accessibility focus separate from the
+  keyboard input focus could allow the user to navigate through the
+  hit regions, using the virtual DOM tree described above to enable
+  hierarchical navigation. When an interactive control inside the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is focused, if the control has a
+  corresponding region, then that &lt;a href=&quot;#hit-region's-bounding-circumference&quot;&gt;hit region's bounding
+  circumference&lt;/a&gt; could be used to determine what area of the
+  display to magnify.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -38455,7 +39110,7 @@
 
 
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Compositing&lt;/h6&gt;
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Compositing&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
@@ -38617,7 +39272,7 @@
 
 
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;All drawing operations are affected by the four global shadow
   attributes.&lt;/p&gt;
@@ -38758,7 +39413,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -38789,7 +39444,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Best practices&lt;/h6&gt;
+  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Best practices&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -38851,7 +39506,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.18 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.19 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 

Modified: source
===================================================================
--- source	2012-03-19 22:29:20 UTC (rev 7028)
+++ source	2012-03-26 05:11:00 UTC (rev 7029)
@@ -3518,7 +3518,7 @@
   two strings as matches of each other.&lt;/p&gt;
 
 
-  &lt;Div class=&quot;impl&quot;&gt;
+  &lt;div class=&quot;impl&quot;&gt;
 
   &lt;h3&gt;UTF-8&lt;/h3&gt;
 
@@ -40037,7 +40037,7 @@
 --&gt;&lt;!--END w3c-html--&gt;&lt;!--FORK--&gt;&lt;!--
 --&gt;, but with no &lt;span&gt;interactive content&lt;/span&gt; descendants except for &lt;code&gt;a&lt;/code&gt; elements, &lt;code&gt;button&lt;/code&gt; elements, &lt;code&gt;input&lt;/code&gt; elements whose &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute are in the &lt;span title=&quot;attr-input-type-checkbox&quot;&gt;Checkbox&lt;/span&gt; or &lt;span title=&quot;attr-input-type-radio&quot;&gt;Radio Button&lt;/span&gt; states, and &lt;code&gt;input&lt;/code&gt; elements that are &lt;span title=&quot;concept-button&quot;&gt;buttons&lt;/span&gt;&lt;!--
 --&gt;&lt;!--START w3c-html--&gt;&lt;!--FORK--&gt;&lt;!--
---&gt;.&lt;/dd&gt; &lt;!-- and maybe &lt;select&gt;, I guess? I've left it in for now, since I guess authors might make accessible selects if they're simple enough, and it's not obvious how to distinguish the simple ones from the complex ones... --&gt;
+--&gt;.&lt;/dd&gt; &lt;!-- and maybe &lt;select&gt;, I guess? I've left it our for now, since I guess authors might make accessible selects if they're simple enough, and it's not obvious how to distinguish the simple ones from the complex ones... --&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-attributes&quot;&gt;Content attributes&lt;/span&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Global attributes&lt;/span&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-canvas-width&quot;&gt;width&lt;/code&gt;&lt;/dd&gt;
@@ -40644,6 +40644,9 @@
   void &lt;span title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/span&gt;((&lt;span&gt;HTMLImageElement&lt;/span&gt; or &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or &lt;span&gt;HTMLVideoElement&lt;/span&gt;) image, double dx, double dy, double dw, double dh);
   void &lt;span title=&quot;dom-context-2d-drawImage&quot;&gt;drawImage&lt;/span&gt;((&lt;span&gt;HTMLImageElement&lt;/span&gt; or &lt;span&gt;HTMLCanvasElement&lt;/span&gt; or &lt;span&gt;HTMLVideoElement&lt;/span&gt;) image, double sx, double sy, double sw, double sh, double dx, double dy, double dw, double dh);
 
+  // hit regions
+  void &lt;span title=&quot;dom-context-2d-addHitRegion&quot;&gt;addHitRegion&lt;/span&gt;(&lt;span&gt;HitRegionOptions&lt;/span&gt; options);
+
   // pixel manipulation
   &lt;span&gt;ImageData&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createImageData&quot;&gt;createImageData&lt;/span&gt;(double sw, double sh);
   &lt;span&gt;ImageData&lt;/span&gt; &lt;span title=&quot;dom-context-2d-createImageData&quot;&gt;createImageData&lt;/span&gt;(&lt;span&gt;ImageData&lt;/span&gt; imagedata);
@@ -40701,6 +40704,19 @@
   readonly attribute double &lt;span title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/span&gt;;
 };
 
+dictionary &lt;dfn&gt;HitRegionOptions&lt;/dfn&gt; {
+  &lt;span&gt;Path&lt;/span&gt;? &lt;span title=&quot;dom-HitRegionOptions-path&quot;&gt;path&lt;/span&gt; = null;
+  &lt;span&gt;SVGMatrix&lt;/span&gt;? &lt;span title=&quot;dom-HitRegionOptions-transform&quot;&gt;transform&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt; &lt;span title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/span&gt; = '';
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=&quot;dom-HitRegionOptions-parentID&quot;&gt;parentID&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt; &lt;span title=&quot;dom-HitRegionOptions-cursor&quot;&gt;cursor&lt;/span&gt; = 'inherit';
+  // for control-backed regions:
+  &lt;span&gt;Element&lt;/span&gt;? &lt;span title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/span&gt; = null;
+  // for unbacked regions:
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=&quot;dom-HitRegionOptions-label&quot;&gt;label&lt;/span&gt; = null;
+  &lt;span&gt;DOMString&lt;/span&gt;? &lt;span title=&quot;dom-HitRegionOptions-role&quot;&gt;role&lt;/span&gt; = null;
+};
+
 interface &lt;dfn&gt;ImageData&lt;/dfn&gt; {
   readonly attribute unsigned long &lt;span title=&quot;dom-imagedata-width&quot;&gt;width&lt;/span&gt;;
   readonly attribute unsigned long &lt;span title=&quot;dom-imagedata-height&quot;&gt;height&lt;/span&gt;;
@@ -43326,9 +43342,10 @@
   generating the repeated pattern. When rendered, however, patterns
   must actually be painted only where the stroking or filling effect
   requires that they be drawn, and the repeated pattern must be
-  affected by the current transformation matrix. Pixels not covered by
-  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
-  specified) must be transparent black.&lt;/p&gt;
+  affected by the &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
+  transformation matrix&lt;/span&gt;. Pixels not covered by the repeating
+  pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not specified) must
+  be transparent black.&lt;/p&gt;
 
   &lt;p&gt;If the original image data is a bitmap image, the value painted
   at a point in the area of the repetitions is computed by filtering
@@ -43449,11 +43466,25 @@
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-clearRect&quot;&gt;&lt;code&gt;clearRect(&lt;var
   title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
+  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following steps:&lt;/p&gt;
 
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; be the set of pixels in
+   the specified rectangle that also intersect the current clipping
+   region.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Clear the pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; to a fully
+   transparent black, erasing any previous image.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Clear regions that cover the pixels&lt;/span&gt; in &lt;var
+   title=&quot;&quot;&gt;pixels&lt;/var&gt; in the &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;note&quot;&gt;If either height or width are zero, this method has
+  no effect, since the set of pixels would be empty.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-fillRect&quot;&gt;&lt;code&gt;fillRect(&lt;var
   title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
   title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
@@ -43923,8 +43954,8 @@
   provided, or the &lt;span&gt;current default path&lt;/span&gt; otherwise.&lt;/p&gt;
 
   &lt;p&gt;When the intended path is a &lt;code&gt;Path&lt;/code&gt; object, the
-  coordinates of its subpaths must be transformed according to the
-  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span
+  coordinates and lines of its subpaths must be transformed according
+  to the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object's &lt;span
   title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
   matrix&lt;/span&gt; when used by these methods (without affecting the
   &lt;code&gt;Path&lt;/code&gt; object itself). When the intended path is the
@@ -44413,7 +44444,789 @@
   &lt;/div&gt;
 
 
+  &lt;h6&gt;Hit regions&lt;/h6&gt;
 
+  &lt;p&gt;Each &lt;code&gt;canvas&lt;/code&gt; element whose &lt;span&gt;primary
+  context&lt;/span&gt; is a &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; object
+  must have a &lt;dfn&gt;hit region list&lt;/dfn&gt; associated with its
+  bitmap.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;span&gt;hit region list&lt;/span&gt; is a list of &lt;span title=&quot;hit
+  region&quot;&gt;hit regions&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;dfn&gt;hit region&lt;/dfn&gt; consists of the following
+  information:&lt;/p&gt;
+
+  &lt;ul&gt;
+
+   &lt;li&gt;&lt;p&gt;A &lt;dfn title=&quot;hit region's set of pixels&quot;&gt;set of
+   pixels&lt;/dfn&gt; on the &lt;code&gt;canvas&lt;/code&gt; element's bitmap for which
+   this region is responsible.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A &lt;dfn title=&quot;hit region's bounding circumference&quot;&gt;bounding
+   circumference&lt;/dfn&gt; on the &lt;code&gt;canvas&lt;/code&gt; element's bitmap
+   that surrounds the &lt;span&gt;hit region's set of pixels&lt;/span&gt; as they
+   stood when it was created.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, a non-empty string representing an &lt;dfn
+   title=&quot;hit region's ID&quot;&gt;ID&lt;/dfn&gt; for distinguishing the region
+   from others.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Optionally, a reference to another region that acts as the
+   &lt;dfn title=&quot;hit region's parent&quot;&gt;parent&lt;/dfn&gt; for this
+   one.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A count of regions that have this one as their &lt;span
+   title=&quot;hit region's parent&quot;&gt;parent&lt;/span&gt;, known as the &lt;dfn&gt;hit
+   region's child count&lt;/dfn&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;A &lt;dfn title=&quot;hit region's cursor specification&quot;&gt;cursor
+   specification&lt;/dfn&gt;, in the form of either a CSS cursor value, or
+   the string &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; meaning that the cursor
+   of the &lt;span&gt;hit region's parent&lt;/span&gt;, if any, or of the
+   &lt;code&gt;canvas&lt;/code&gt; element, if not, is to be used
+   instead.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Optionally, either a &lt;span title=&quot;hit region's
+    control&quot;&gt;control&lt;/span&gt;, or an &lt;span title=&quot;hit region's unbacked
+    region description&quot;&gt;unbacked region description&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;A &lt;dfn title=&quot;hit region's control&quot;&gt;control&lt;/dfn&gt; is just a
+    reference to an &lt;code&gt;Element&lt;/code&gt; node, to which, in certain
+    conditions, the user agent will route events, and from which the
+    user agent will determine the state of the hit region for the
+    purposes of accessibility tools.&lt;/p&gt;
+
+    &lt;p&gt;An &lt;dfn title=&quot;hit region's unbacked region
+    description&quot;&gt;unbacked region description&lt;/dfn&gt; consists of the
+    following:&lt;/p&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+
+     &lt;li&gt;&lt;p&gt;Optionally, a &lt;dfn title=&quot;hit region's
+     label&quot;&gt;label&lt;/dfn&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;An &lt;dfn title=&quot;hit region's ARIA role&quot;&gt;ARIA role&lt;/dfn&gt;,
+     which, if the &lt;span title=&quot;hit region's unbacked region
+     description&quot;&gt;unbacked region description&lt;/span&gt; also has a label,
+     could be the empty string.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ul&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-addHitRegion&quot;&gt;addHitRegion&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;options&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds a hit region to the canvas bitmap. The argument is an
+    object with the following members:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;&lt;code title=&quot;dom-HitRegionOptions-path&quot;&gt;path&lt;/code&gt; (default null)
+
+     &lt;dd&gt;A &lt;code&gt;Path&lt;/code&gt; object that describes the pixels that
+     form part of the region. If this member is not provided or is set
+     to null, the &lt;span&gt;current default path&lt;/span&gt; is used
+     instead.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=&quot;dom-HitRegionOptions-transform&quot;&gt;transform&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An &lt;code&gt;SVGMatrix&lt;/code&gt; object that describes a
+     transformation to apply to the path described by the &lt;code
+     title=&quot;dom-HitRegionOptions-path&quot;&gt;path&lt;/code&gt; member.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt; (default empty string)
+
+     &lt;dd&gt;The ID to use for this region. This is used in
+     &lt;code&gt;MouseEvent&lt;/code&gt; events on the &lt;code&gt;canvas&lt;/code&gt; (&lt;code
+     title=&quot;dom-MouseEvent-region&quot;&gt;event.region&lt;/code&gt;) and as a way
+     to reference this region in later calls to &lt;code
+     title=&quot;dom-context-2d-addHitRegion&quot;&gt;addHitRegion()&lt;/code&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=&quot;dom-HitRegionOptions-parentID&quot;&gt;parentID&lt;/code&gt; (default null)
+
+     &lt;dd&gt;The ID of the parent region, for purposes of navigation by
+     accessibility tools and for cursor fallback.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=&quot;dom-HitRegionOptions-cursor&quot;&gt;cursor&lt;/code&gt; (default &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;)
+
+     &lt;dd&gt;The cursor to use when the mouse is over this region. The
+     value &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; means to use the cursor for
+     the parent region (as specified by the &lt;code
+     title=&quot;dom-HitRegionOptions-parentID&quot;&gt;parentID&lt;/code&gt; member), if
+     any, or to use the &lt;code&gt;canvas&lt;/code&gt; element's cursor if the
+     region has no parent.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An element (that is a descendant of the &lt;code&gt;canvas&lt;/code&gt;)
+     to which events are to be routed, and which accessibility tools
+     are to use as a surrogate for describing and interacting with
+     this region.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=&quot;dom-HitRegionOptions-label&quot;&gt;label&lt;/code&gt; (default null)
+
+     &lt;dd&gt;A text label for accessibility tools to use as a description
+     of this region, if there is no control.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;code title=&quot;dom-HitRegionOptions-role&quot;&gt;role&lt;/code&gt; (default null)
+
+     &lt;dd&gt;An ARIA role for accessibility tools to use to determine how
+     to represent this region, if there is no control.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+    &lt;p&gt;Hit regions can be used for a variety of purposes:&lt;/p&gt;
+
+    &lt;ul&gt;
+
+     &lt;li&gt;With an ID, they can make hit detection easier by having the
+     user agent check which region the mouse is over and include the
+     ID in the mouse events.&lt;/li&gt;
+
+     &lt;li&gt;With a control, they can make routing events to DOM elements
+     automatic, allowing e.g. clicks on a canvas to automatically
+     submit a form via a &lt;code&gt;button&lt;/code&gt; element.&lt;/li&gt;
+
+     &lt;li&gt;With a label, they can make it easier for users to explore a
+     canvas without seeing it, e.g. by touch on a mobile device.&lt;/li&gt;
+
+     &lt;li&gt;With a cursor, they can make it easier for different regions
+     of the canvas to have different cursors, with the user agent
+     automatically switching between them.&lt;/li&gt;
+
+    &lt;/ul&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;A &lt;span&gt;hit region&lt;/span&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
+  &lt;dfn&gt;ancestor region&lt;/dfn&gt; of a &lt;span&gt;hit region&lt;/span&gt; &lt;var
+  title=&quot;&quot;&gt;B&lt;/var&gt; if &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; has a &lt;span title=&quot;hit
+  region's parent&quot;&gt;parent&lt;/span&gt; and its &lt;span title=&quot;hit region's
+  parent&quot;&gt;parent&lt;/span&gt; is either &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; or another
+  &lt;span&gt;hit region&lt;/span&gt; for which &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
+  &lt;span&gt;ancestor region&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn&gt;The region identified by the ID&lt;/dfn&gt; &lt;var
+  title=&quot;&quot;&gt;ID&lt;/var&gt; in a &lt;code&gt;canvas&lt;/code&gt; element &lt;var
+  title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return a &lt;span&gt;hit region&lt;/span&gt; or
+  nothing):&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt; is null, return nothing and abort
+   these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
+   list&lt;/span&gt; associated with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;span&gt;hit region&lt;/span&gt; in &lt;var
+   title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;span title=&quot;hit region's ID&quot;&gt;ID&lt;/span&gt;
+   is a &lt;span&gt;case-sensitive&lt;/span&gt; match for &lt;var title=&quot;&quot;&gt;ID&lt;/var&gt;,
+   then return that &lt;span&gt;hit region&lt;/span&gt; and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;&lt;dfn&gt;The region representing the control&lt;/dfn&gt; &lt;var
+  title=&quot;&quot;&gt;control&lt;/var&gt; for a &lt;code&gt;canvas&lt;/code&gt; element &lt;var
+  title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return a &lt;span&gt;hit region&lt;/span&gt; or
+  nothing):&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var
+   title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
+   list&lt;/span&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;span&gt;hit region&lt;/span&gt; in &lt;var
+   title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;span title=&quot;hit region's
+   control&quot;&gt;control&lt;/span&gt; is &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then
+   return that &lt;span&gt;hit region&lt;/span&gt; and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;&lt;dfn&gt;The control represented by a region&lt;/dfn&gt; &lt;var
+  title=&quot;&quot;&gt;region&lt;/var&gt; for a &lt;code&gt;canvas&lt;/code&gt; element &lt;var
+  title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm (which can return an element or nothing):&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;span title=&quot;hit
+   region's control&quot;&gt;control&lt;/span&gt;, return nothing and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be &lt;var
+   title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;span title=&quot;hit region's
+   control&quot;&gt;control&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; is not a descendant of &lt;var
+   title=&quot;&quot;&gt;ancestor&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;&lt;dfn&gt;The cursor for a hit region&lt;/dfn&gt; &lt;var
+  title=&quot;&quot;&gt;region&lt;/var&gt; of a &lt;code&gt;canvas&lt;/code&gt; element &lt;var
+  title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the value returned by the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has a &lt;span
+   title=&quot;hit region's cursor specification&quot;&gt;cursor
+   specification&lt;/span&gt; other than &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;,
+   then return that &lt;span&gt;hit region's cursor specification&lt;/span&gt;
+   and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has a &lt;span title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/span&gt;, then let &lt;var
+   title=&quot;&quot;&gt;region&lt;/var&gt; be that &lt;span&gt;hit region's parent&lt;/span&gt;,
+   and return to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return the used value of the 'cursor' property
+   for the &lt;code&gt;canvas&lt;/code&gt; element. &lt;a
+   href=&quot;#refsCSSUI&quot;&gt;[CSSUI]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;&lt;dfn&gt;The region for a pixel&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on a
+  &lt;code&gt;canvas&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt; is the
+  value returned by the following algorithm (which can return a
+  &lt;span&gt;hit region&lt;/span&gt; or nothing):&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
+   list&lt;/span&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;span&gt;hit region&lt;/span&gt; in &lt;var
+   title=&quot;&quot;&gt;list&lt;/var&gt; whose &lt;span title=&quot;hit region's set of
+   pixels&quot;&gt;set of pixels&lt;/span&gt; contains &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt;,
+   then return that &lt;span&gt;hit region&lt;/span&gt; and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, return nothing.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;To &lt;dfn&gt;clear regions that cover the pixels&lt;/dfn&gt; &lt;var
+  title=&quot;&quot;&gt;pixels&lt;/var&gt; on a &lt;code&gt;canvas&lt;/code&gt; element &lt;var
+  title=&quot;&quot;&gt;ancestor&lt;/var&gt;, the user agent must run the following
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; be the &lt;span&gt;hit region
+   list&lt;/span&gt; associatd with &lt;var title=&quot;&quot;&gt;ancestor&lt;/var&gt;'s
+   bitmap.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove all pixels in &lt;var title=&quot;&quot;&gt;pixels&lt;/var&gt; from the
+   &lt;span title=&quot;hit region's set of pixels&quot;&gt;set of pixels&lt;/span&gt; of
+   each &lt;span&gt;hit region&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; be the first
+   &lt;span&gt;hit region&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;list&lt;/var&gt; to have an
+   empty &lt;span title=&quot;hit region's set of pixels&quot;&gt;set of
+   pixels&lt;/span&gt; and a zero &lt;span title=&quot;hit region's child
+   count&quot;&gt;child count&lt;/span&gt;, if any. If there is no such &lt;span&gt;hit
+   region&lt;/span&gt;, abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; has a &lt;span title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/span&gt;, then decrement that &lt;span&gt;hit
+   region's child count&lt;/span&gt; by one.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;victim&lt;/var&gt; from &lt;var
+   title=&quot;&quot;&gt;list&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Adding a new region and calling &lt;code
+  title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect()&lt;/code&gt; are the three
+  ways this clearing algorithm can be invoked. Resizing the canvas
+  also clears the &lt;span&gt;hit region list&lt;/span&gt; (since it clears the
+  canvas back to its initial state).&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;When the &lt;dfn
+  title=&quot;dom-context-2d-addHitRegion&quot;&gt;&lt;code&gt;addHitRegion()&lt;/code&gt;&lt;/dfn&gt;
+  method is invoked, the user agent must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; be the dictionary object
+   provided as the method's argument.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-path&quot;&gt;path&lt;/code&gt; member is not null,
+   let &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt; be the &lt;code
+   title=&quot;dom-HitRegionOptions-path&quot;&gt;path&lt;/code&gt; member's value.
+   Otherwise, let it be the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt;
+   object's &lt;span&gt;current default path&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-path&quot;&gt;path&lt;/code&gt; member is null, but
+   the &lt;code title=&quot;dom-HitRegionOptions-transform&quot;&gt;transform&lt;/code&gt;
+   member is not, then throw a &lt;code&gt;NotSupportedError&lt;/code&gt;
+   exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates and lines in &lt;var
+   title=&quot;&quot;&gt;source path&lt;/var&gt; by the transform matrix given by the
+   &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-transform&quot;&gt;transform&lt;/code&gt; member, if
+   it is not null.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt; member is not null, then
+   let &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; be &lt;span&gt;the
+   region identified by the ID&lt;/span&gt; given by the &lt;code
+   title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt; member's value in this
+   &lt;code&gt;canvas&lt;/code&gt; element, if any. If the &lt;code
+   title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt; member is null or no such
+   region currently exists, let &lt;var title=&quot;&quot;&gt;previous region for this
+   ID&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-parent&quot;&gt;parent&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-parent&quot;&gt;parent&lt;/code&gt; member is not
+   null, then let &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; be &lt;span&gt;the
+   region identified by the ID&lt;/span&gt; given by the &lt;code
+   title=&quot;dom-HitRegionOptions-parent&quot;&gt;parent&lt;/code&gt; member's value in
+   this &lt;code&gt;canvas&lt;/code&gt; element, if any. If the &lt;code
+   title=&quot;dom-HitRegionOptions-parent&quot;&gt;parent&lt;/code&gt; member is null or
+   no such region currently exists, let &lt;var title=&quot;&quot;&gt;parent
+   region&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-label&quot;&gt;label&lt;/code&gt; member is the
+   empty string, let it be null instead.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If any of the following conditions are met, throw a
+    &lt;code&gt;NotSupportedError&lt;/code&gt; exception and abort these
+    steps.&lt;/p&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-path&quot;&gt;path&lt;/code&gt; member is null, but
+     its &lt;code title=&quot;dom-HitRegionOptions-transform&quot;&gt;transform&lt;/code&gt;
+     member is not.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; and &lt;code
+     title=&quot;dom-HitRegionOptions-label&quot;&gt;label&lt;/code&gt; members are both
+     non-null.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; and &lt;code
+     title=&quot;dom-HitRegionOptions-role&quot;&gt;role&lt;/code&gt; members are both
+     non-null.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-role&quot;&gt;role&lt;/code&gt; member's value is
+     the empty string, and the &lt;code
+     title=&quot;dom-HitRegionOptions-label&quot;&gt;label&lt;/code&gt; member's value is
+     either null or the empty string.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;span&gt;path&lt;/span&gt; &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;
+     describes a shape with no pixels.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; member is not
+     null but is neither an &lt;code&gt;a&lt;/code&gt; element that
+     &lt;span&gt;represents&lt;/span&gt; a &lt;span&gt;hyperlink&lt;/span&gt;, a
+     &lt;code&gt;button&lt;/code&gt; element, an &lt;code&gt;input&lt;/code&gt; element whose
+     &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute is in one of
+     the &lt;span title=&quot;attr-input-type-checkbox&quot;&gt;Checkbox&lt;/span&gt; or
+     &lt;span title=&quot;attr-input-type-radio&quot;&gt;Radio Button&lt;/span&gt; states,
+     nor an &lt;code&gt;input&lt;/code&gt; element that is a &lt;span
+     title=&quot;concept-button&quot;&gt;button&lt;/span&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null but has a
+     &lt;span title=&quot;hit region's control&quot;&gt;control&lt;/span&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; is the
+     same &lt;span&gt;hit region&lt;/span&gt; as the &lt;var title=&quot;&quot;&gt;parent
+     region&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;previous region for this ID&lt;/var&gt; is an
+     &lt;span&gt;ancestor region&lt;/span&gt; of the &lt;var title=&quot;&quot;&gt;parent
+     region&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ul&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code
+   title=&quot;dom-HitRegionOptions-parent&quot;&gt;parent&lt;/code&gt; member is not
+   null but &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is null, then throw a
+   &lt;code&gt;NotFoundError&lt;/code&gt; exception and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If any of the following conditions are met, throw a
+    &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these
+    steps.&lt;/p&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-cursor&quot;&gt;cursor&lt;/code&gt; member is not
+     null but is neither an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match
+     for the string &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;, nor a valid CSS
+     'cursor' property value. &lt;a href=&quot;#refsCSSUI&quot;&gt;[CSSUI]&lt;/a&gt;&lt;/li&gt;
+
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-role&quot;&gt;role&lt;/code&gt; member is not null
+     but its value is not an &lt;span&gt;ordered set of unique
+     space-separated tokens&lt;/span&gt; whose tokens are all
+     &lt;span&gt;case-sensitive&lt;/span&gt; matches for names of non-abstract
+     WAI-ARIA roles. &lt;a href=&quot;#refsARIA&quot;&gt;[ARIA]&lt;/a&gt;&lt;/li&gt;
+
+    &lt;/ul&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be a newly created &lt;span&gt;hit
+    region&lt;/span&gt;, with its information configured as follows:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;&lt;span&gt;Hit region's set of pixels&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;The pixels contained in &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;.
+
+
+     &lt;dt&gt;&lt;span&gt;Hit region's bounding circumference&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;A user-agent-defined shape that wraps the pixels contained
+     in &lt;var title=&quot;&quot;&gt;source path&lt;/var&gt;. (In the simplest case, this
+     can just be the bounding rectangle; this specification allows it
+     to be any shape in order to allow other interfaces.)
+
+
+     &lt;dt&gt;&lt;span&gt;Hit region's ID&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt; member is not null: the
+     value of the &lt;code title=&quot;dom-HitRegionOptions-id&quot;&gt;id&lt;/code&gt;
+     member. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;span
+     title=&quot;hit region's id&quot;&gt;id&lt;/span&gt;.
+
+
+     &lt;dt&gt;&lt;span&gt;Hit region's parent&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null: &lt;var
+     title=&quot;&quot;&gt;parent region&lt;/var&gt;. Otherwise, &lt;var
+     title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;span title=&quot;hit region's
+     parent&quot;&gt;parent&lt;/span&gt;.
+
+
+     &lt;dt&gt;&lt;span&gt;Hit region's child count&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;Initially zero.
+
+
+     &lt;dt&gt;&lt;span&gt;Hit region's cursor specification&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt; is not null: &lt;var
+     title=&quot;&quot;&gt;parent region&lt;/var&gt;. Otherwise, &lt;var
+     title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;span title=&quot;hit region's
+     parent&quot;&gt;parent&lt;/span&gt;.
+
+
+     &lt;dt&gt;&lt;span&gt;Hit region's control&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; member is not
+     null: the value of the &lt;code
+     title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; member.
+     Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;span title=&quot;hit
+     region's control&quot;&gt;control&lt;/span&gt;.
+
+
+     &lt;dt&gt;&lt;span&gt;Hit region's label&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-label&quot;&gt;label&lt;/code&gt; member is not
+     null: the value of the &lt;code
+     title=&quot;dom-HitRegionOptions-label&quot;&gt;label&lt;/code&gt; member.
+     Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has no &lt;span title=&quot;hit
+     region's label&quot;&gt;label&lt;/span&gt;.
+
+
+     &lt;dt&gt;&lt;span&gt;Hit region's ARIA role&lt;/span&gt;
+
+     &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-role&quot;&gt;role&lt;/code&gt; member is not null:
+     the value of the &lt;code
+     title=&quot;dom-HitRegionOptions-role&quot;&gt;role&lt;/code&gt; member (which might
+     be the empty string). Otherwise, if the &lt;var
+     title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+     title=&quot;dom-HitRegionOptions-label&quot;&gt;label&lt;/code&gt; member is not
+     null: the empty string. Otherwise, &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; has
+     no &lt;span title=&quot;hit region's ARIA role&quot;&gt;ARIA role&lt;/span&gt;.
+
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+    title=&quot;dom-HitRegionOptions-cursor&quot;&gt;cursor&lt;/code&gt; member is not
+    null, then act as if a CSS rule for the &lt;code&gt;canvas&lt;/code&gt;
+    element setting its 'cursor' property had been seen, whose value
+    was the &lt;span&gt;hit region's cursor specification&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;For example, if the user agent prefetches cursor
+    values, this would cause that to happen in response to an
+    appropriately-formed &lt;code
+    title=&quot;dom-context-2d-addHitRegion&quot;&gt;addHitRegion()&lt;/code&gt;
+    call.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; object's &lt;code
+   title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; member is not
+   null, then let &lt;var title=&quot;&quot;&gt;previous region for the control&lt;/var&gt;
+   be &lt;span&gt;the region representing the control&lt;/span&gt; given by the
+   &lt;code title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; member's
+   value for this &lt;code&gt;canvas&lt;/code&gt; element, if any. If the &lt;code
+   title=&quot;dom-HitRegionOptions-control&quot;&gt;control&lt;/code&gt; member is null
+   or no such region currently exists, let &lt;var title=&quot;&quot;&gt;previous
+   region for the control&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;!-- the parent region can't have a control, because no region with
+   a control can be a parent - we check for that above. Thus, it is
+   safe to remove the previous region for the control without worrying
+   that our parent is going to be affected.
+
+   It's also safe to remove the previous region with this ID and all
+   its descendants, as we know that our parent isn't part of that
+   subtree. --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
+   control&lt;/var&gt;, remove it from the &lt;code&gt;canvas&lt;/code&gt; element's
+   &lt;span&gt;hit region list&lt;/span&gt;; then, if it had a &lt;span title=&quot;hit
+   region's parent&quot;&gt;parent&lt;/span&gt; region, decrement that &lt;span&gt;hit
+   region's child count&lt;/span&gt; by one.&lt;/p&gt;&lt;/li&gt; &lt;!-- we garbage
+   collect the regions below --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;previous region with this
+   ID&lt;/var&gt;, remove it, and all &lt;span title=&quot;hit region&quot;&gt;hit
+   regions&lt;/span&gt; for which it is an &lt;span&gt;ancestor region&lt;/span&gt;,
+   from the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span&gt;hit region
+   list&lt;/span&gt;; then, if it had a &lt;span title=&quot;hit region's
+   parent&quot;&gt;parent&lt;/span&gt; region, decrement that &lt;span&gt;hit region's
+   child count&lt;/span&gt; by one.&lt;/p&gt;&lt;/li&gt; &lt;!-- we garbage collect the
+   regions below --&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;parent region&lt;/var&gt;, increment
+   its &lt;span&gt;hit region's child count&lt;/span&gt; by one.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Clear regions that cover the pixels&lt;/span&gt; in &lt;var
+   title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;span title=&quot;hit region's set of
+   pixels&quot;&gt;set of pixels&lt;/span&gt; on this &lt;code&gt;canvas&lt;/code&gt;
+   element.&lt;/p&gt;&lt;/li&gt; &lt;!-- this is what garbage collects the earlier
+   regions --&gt;
+
+   &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; to the &lt;code&gt;canvas&lt;/code&gt;
+   element's &lt;span&gt;hit region list&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;/div&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;code&gt;MouseEvent&lt;/code&gt; interface is extended to support hit
+  regions:&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;partial interface &lt;span&gt;MouseEvent&lt;/span&gt; {
+  readonly attribute DOMString? &lt;span title=&quot;dom-MouseEvent-region&quot;&gt;region&lt;/span&gt;;
+};
+
+partial dictionary &lt;span&gt;MouseEventInit&lt;/span&gt; {
+  DOMString? region;
+};&lt;/pre&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;event&lt;/var&gt; . &lt;code title=&quot;dom-MouseEvent-region&quot;&gt;region&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the mouse was over a &lt;span&gt;hit region&lt;/span&gt;, then this returns the &lt;span&gt;hit region's ID&lt;/span&gt;, if it has one.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise, returns null.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-MouseEvent-region&quot;&gt;&lt;code&gt;region&lt;/code&gt;&lt;/dfn&gt;
+  attribute on &lt;code&gt;MouseEvent&lt;/code&gt; objects must return the value
+  it was initialized to. When the object is created, this attribute
+  must be initialized to null. It represents the &lt;span&gt;hit region's
+  ID&lt;/span&gt; if the mouse was over a hit region when the event was
+  fired.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;code&gt;MouseEvent&lt;/code&gt; is to be fired at a
+  &lt;code&gt;canvas&lt;/code&gt; element by the user agent in response to a
+  pointing device action, the user agent must instead follow these
+  steps. If these steps say to &lt;i&gt;act as normal&lt;/i&gt;, that means that
+  the event must be fired as it would have had these requirements not
+  been applied.&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the pointing device is not indicating a pixel on the
+   &lt;code&gt;canvas&lt;/code&gt;, act as normal and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; be the pixel indicated by the
+   pointing device.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;region&lt;/var&gt; be the &lt;span&gt;hit
+   region&lt;/span&gt; that is &lt;span title=&quot;the region for a pixel&quot;&gt;the
+   region for the pixel&lt;/span&gt; &lt;var title=&quot;&quot;&gt;pixel&lt;/var&gt; on this
+   &lt;code&gt;canvas&lt;/code&gt; element, if any.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;region&lt;/var&gt;, then act as
+   normal and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the &lt;var
+   title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;span title=&quot;hit region's ID&quot;&gt;ID&lt;/span&gt;, if
+   any.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is an &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, then initialize the
+   event object's &lt;code title=&quot;dom-MouseEvent-region&quot;&gt;region&lt;/code&gt;
+   attribute to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; be the &lt;var
+   title=&quot;&quot;&gt;region&lt;/var&gt;'s &lt;span title=&quot;hit region's
+   control&quot;&gt;control&lt;/span&gt;, if any.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is a &lt;var title=&quot;&quot;&gt;control&lt;/var&gt;, then target the
+   event object at &lt;var title=&quot;&quot;&gt;control&lt;/var&gt; instead of the
+   &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Continue dispatching the event, but with the updated event
+   object and target as given in the above steps.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;When a user's pointing device cursor is positioned over a
+  &lt;code&gt;canvas&lt;/code&gt; element, user agents should render the pointing
+  device cursor according to the cursor specification described by
+  &lt;span title=&quot;the cursor for a hit region&quot;&gt;the cursor for the hit
+  region&lt;/span&gt; that is &lt;span title=&quot;the region for a pixel&quot;&gt;the
+  region for the pixel&lt;/span&gt; that the pointing device designates.&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;User agents are encouraged to make use of the information present
+  in a &lt;code&gt;canvas&lt;/code&gt; element's &lt;span&gt;hit region list&lt;/span&gt; to
+  improve the accessibility of &lt;code&gt;canvas&lt;/code&gt; elements.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;span&gt;hit region&lt;/span&gt; should be handled in a fashion
+  equivalent to a node in a virtual DOM tree rooted at the
+  &lt;code&gt;canvas&lt;/code&gt; element. The hierarchy of this virtual DOM tree
+  must match the hierarchy of the &lt;span title=&quot;hit region&quot;&gt;hit
+  regions&lt;/span&gt;, as described by the &lt;span title=&quot;hit region's
+  parent&quot;&gt;parent&lt;/span&gt; of each region. Regions without a &lt;span
+  title=&quot;hit region's parent&quot;&gt;parent&lt;/span&gt; must be treated as
+  children of the &lt;code&gt;canvas&lt;/code&gt; element for the purpose of this
+  virtual DOM tree. For each node in such a DOM tree, the &lt;span&gt;hit
+  region's bounding circumference&lt;/span&gt; gives the region of the
+  screen to use when representing the node (if appropriate).&lt;/p&gt;
+
+  &lt;p&gt;The semantics of a &lt;span&gt;hit region&lt;/span&gt; for the purposes of
+  this virtual DOM tree are those of the &lt;span&gt;hit region's
+  control&lt;/span&gt;, if it has one, or else of a non-interactive element
+  whose ARIA role, if any, is that given by the &lt;span&gt;hit region's
+  ARIA role&lt;/span&gt;, and whose textual representation, if any, is given
+  by the &lt;span&gt;hit region's label&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;For the purposes of accessibility tools, when an element &lt;var
+  title=&quot;&quot;&gt;C&lt;/var&gt; is a descendant of a &lt;code&gt;canvas&lt;/code&gt; element
+  and there is &lt;span title=&quot;the region representing the control&quot;&gt;a
+  region representing the control&lt;/span&gt; &lt;var title=&quot;&quot;&gt;C&lt;/var&gt; for that
+  &lt;code&gt;canvas&lt;/code&gt; element, then the element's position relative to
+  the document should be presented as if it was that region in the
+  &lt;code&gt;canvas&lt;/code&gt; element's virtual DOM tree.&lt;/p&gt;
+
+  &lt;p&gt;The semantics of a &lt;span&gt;hit region&lt;/span&gt; for the purposes of
+  this virtual DOM tree are those of the &lt;span&gt;hit region's
+  control&lt;/span&gt;, if it has one, or else of a non-interactive element
+  whose ARIA role, if any, is that given by the &lt;span&gt;hit region's
+  ARIA role&lt;/span&gt;, and whose textual representation, if any, is given
+  by the &lt;span&gt;hit region's label&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Thus, for instance, a user agent on a touch-screen
+  device could provide haptic feedback when the user croses over a
+  &lt;span&gt;hit region's bounding circumference&lt;/span&gt;, and then read the
+  &lt;span&gt;hit region's label&lt;/span&gt; to the user. Similarly, a desktop
+  user agent with a virtual accessibility focus separate from the
+  keyboard input focus could allow the user to navigate through the
+  hit regions, using the virtual DOM tree described above to enable
+  hierarchical navigation. When an interactive control inside the
+  &lt;code&gt;canvas&lt;/code&gt; element is focused, if the control has a
+  corresponding region, then that &lt;span&gt;hit region's bounding
+  circumference&lt;/span&gt; could be used to determine what area of the
+  display to magnify.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
   &lt;h6&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013893.html">[html5] r7028 - [giow] (0) add dashed lines and change how Path	objects work to instead use exte [...]
</A></li>
	<LI>Next message: <A HREF="013895.html">[html5] r7030 - [giow] (0) Pattern transforms,	first draft Affected topics: Canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13894">[ date ]</a>
              <a href="thread.html#13894">[ thread ]</a>
              <a href="subject.html#13894">[ subject ]</a>
              <a href="author.html#13894">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
