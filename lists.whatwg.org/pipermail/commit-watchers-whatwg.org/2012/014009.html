<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7144 - / images
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7144%20-%20/%20images&In-Reply-To=%3C20120623203229.7F5EE1C8C006%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014008.html">
   <LINK REL="Next"  HREF="014010.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7144 - / images</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7144%20-%20/%20images&In-Reply-To=%3C20120623203229.7F5EE1C8C006%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7144 - / images">whatwg at whatwg.org
       </A><BR>
    <I>Sat Jun 23 13:32:29 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014008.html">[html5] r7143 - [e] (0) Correct a reference. Affected topics: HTML
</A></li>
        <LI>Next message: <A HREF="014010.html">[html5] r7145 - [e] (0) sync with dom core Affected topics: DOM APIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14009">[ date ]</a>
              <a href="thread.html#14009">[ thread ]</a>
              <a href="subject.html#14009">[ subject ]</a>
              <a href="author.html#14009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-06-23 13:32:27 -0700 (Sat, 23 Jun 2012)
New Revision: 7144

Modified:
   complete.html
   images/arc1.png
   index
   source
Log:
[giow] (0) fix the definition of ellipse() and arcTo(), and fix the dialgram for arc().
Affected topics: Canvas

Modified: complete.html
===================================================================
--- complete.html	2012-06-23 00:58:45 UTC (rev 7143)
+++ complete.html	2012-06-23 20:32:27 UTC (rev 7144)
@@ -36768,7 +36768,7 @@
     arc's ellipse, and the second controls the height. If only one is
     provided, or if they are the same, the arc is from a circle. In
     the case of an ellipse, the rotation argument controls the
-    anti-clockwise inclination of the ellipse relative to the x-axis.&lt;/p&gt;
+    clockwise inclination of the ellipse relative to the x-axis.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the given
     radius is negative.&lt;/p&gt;
@@ -36910,7 +36910,7 @@
   c.restore();
 }
 
---&gt;&lt;figure class=diagrams&gt;&lt;!-- if anyone wants to try writing alternative text for this, be my guest. I can't work out how to describe it. --&gt;&lt;img alt=&quot;&quot; src=<A HREF="http://images.whatwg.org/arc1.png">http://images.whatwg.org/arc1.png</A>&gt;&lt;/figure&gt;&lt;/dd&gt;
+--&gt;&lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-arc&gt;&lt;a href=#dom-context-2d-arc&gt;arc&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-arc&gt;&lt;a href=#dom-context-2d-arc&gt;arc&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
@@ -36926,7 +36926,8 @@
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the given
     radius is negative.&lt;/p&gt;
 
-&lt;!--
+    &lt;figure class=diagrams&gt;&lt;!-- if anyone wants to try writing alternative text for this, be my guest. I can't work out how to describe it. --&gt;&lt;img alt=&quot;&quot; src=<A HREF="http://images.whatwg.org/arc1.png">http://images.whatwg.org/arc1.png</A>&gt;&lt;/figure&gt;&lt;!--
+
 c.clearRect(0, 0, 640, 480);
 c.save();
 try {
@@ -36935,12 +36936,12 @@
   var x = 255;
   var y = 150;
   var radius = 100;
-  var startAngle = 2.4
-  var endAngle = 0.7;
+  var startAngle = 2.0;
+  var endAngle = 5.7;
   var direction = false;
 
-  var bottom = 280;
-  var center = 50;
+  var bottom = 110;
+  var center = 380;
 
   var fontSize = 16;
   var margin = 50;
@@ -36971,11 +36972,10 @@
     c.translate(x, y);
     c.rotate(eA);
     c.beginPath();
-    c.moveTo(r-arrowHead, arrowHead);
+    c.moveTo(r-arrowHead, d?arrowHead:-arrowHead);
     c.lineTo(r, 0);
-    c.lineTo(r+arrowHead, arrowHead);
+    c.lineTo(r+arrowHead, d?arrowHead:-arrowHead);
     c.stroke();
-
     c.strokeStyle = 'silver';
     c.beginPath();
     c.moveTo(0, 0);
@@ -36983,10 +36983,26 @@
     c.stroke();
     c.restore();
 
-    c.textAlign = 'right';
-    c.textBaseline = 'middle';
     c.fillStyle = 'black';
-    c.fillText(s + ' ',x-r,y);
+    if (eA&lt;Math.PI) {
+      c.save();
+      c.translate(x, y);
+      c.rotate(sA+(eA-sA)/2-Math.PI/2);
+      c.translate(0, r);
+      c.rotate(-(sA+(eA-sA)/2-Math.PI/2));
+      c.beginPath();
+      c.textAlign = 'center';
+      c.textBaseline = 'bottom';
+      c.fillText(s + '  ',0,0);
+      c.restore();
+    } else {
+      c.save();
+      c.beginPath();
+      c.textAlign = 'left';
+      c.textBaseline = 'middle';
+      c.fillText(' ' + s,x-r,y);
+      c.restore();
+    }
   }
 
   function radial(x, y, length, rotation, s) {
@@ -37000,7 +37016,7 @@
     c.lineTo(length, 0);
     c.stroke();
     c.textAlign = 'center';
-    c.textBaseline = 'top';
+    c.textBaseline = 'bottom';
     c.fillStyle = 'black';
     c.fillText(s,length/2,0);
     c.restore();
@@ -37016,8 +37032,8 @@
   c.arc(x, y, radius, 0, 2*Math.PI);
   c.stroke();
   // angles
-  arc(x, y, 2*radius/3, 0, startAngle, true, radius, '\u03B1');
-  arc(x, y, radius/3, 0, endAngle, true, radius, '\u03B2');
+  arc(x, y, radius/10+2*radius/3, 0, startAngle, false, radius, '\u03B1');
+  arc(x, y, radius/10+radius/3, 0, endAngle, false, radius, '\u03B2');
   // radii
   radial(x, y, radius, 0, 'radius');
 
@@ -37047,17 +37063,19 @@
   print('context.stroke()');
 
   c.fillStyle = 'green';
-  c.fillText(&quot;\u25be initial line&quot;, x0, y0-fontSize);
-  c.textAlign = 'center';
-  c.fillText(&quot;\u25be arc&quot;, x, y-radius-fontSize);
 
+  c.textBaseline = 'top';
+  c.fillText(&quot;initial line \u25b4&quot;, x0+20, y0+fontSize*2);
+
+  c.textAlign = 'right';
+  c.textBaseline = 'middle';
+  c.fillText(&quot;arc \u25b8&quot;, x-radius-15, y);
+
 } finally {
   c.restore();
 }
---&gt;
+--&gt;&lt;/dd&gt;
 
-   &lt;/dd&gt;
-
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-ellipse&gt;&lt;a href=#dom-context-2d-ellipse&gt;ellipse&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radiusY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt;)&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-ellipse&gt;&lt;a href=#dom-context-2d-ellipse&gt;ellipse&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radiusY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt;)&lt;/dt&gt;
 
@@ -37176,11 +37194,11 @@
 
   &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;The Arc&lt;/var&gt; be the shortest arc
   given by circumference of the ellipse that has radius &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt; on the major axis and radius &lt;var title=&quot;&quot;&gt;radiusY&lt;/var&gt; on the minor axis, and whose semi-major axis
-  is rotated &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt; radians anti-clockwise from
-  the positive x-axis, and that has one point tangent to the
-  half-infinite line that crosses the point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;), and that has a different
-  point tangent to the half-infinite line that ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and crosses the point
+  is rotated &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt; radians clockwise from the
+  positive x-axis, and that has one point tangent to the half-infinite
+  line that crosses the point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;), and that has a different point tangent to
+  the half-infinite line that ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and crosses the point
   (&lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;). The points at
   which this ellipse touches these two lines are called the start and
   end tangent points respectively. The method must connect the point
@@ -37213,8 +37231,8 @@
 
   &lt;p&gt;Consider an ellipse that has its origin at (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;), that has a major-axis
   radius &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt; and a minor-axis radius &lt;var title=&quot;&quot;&gt;radiusY&lt;/var&gt;, and that is rotated about its origin such
-  that its semi-major axis is inclined &lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;
-  radians anti-clockwise from the x-axis. The points at &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; along
+  that its semi-major axis is inclined &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt;
+  radians clockwise from the x-axis. The points at &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; along
   this circle's circumference, measured in radians clockwise from the
   ellipse's semi-major axis, are the start and end points
   respectively.&lt;/p&gt;

Modified: images/arc1.png
===================================================================
(Binary files differ)

Modified: index
===================================================================
--- index	2012-06-23 00:58:45 UTC (rev 7143)
+++ index	2012-06-23 20:32:27 UTC (rev 7144)
@@ -36768,7 +36768,7 @@
     arc's ellipse, and the second controls the height. If only one is
     provided, or if they are the same, the arc is from a circle. In
     the case of an ellipse, the rotation argument controls the
-    anti-clockwise inclination of the ellipse relative to the x-axis.&lt;/p&gt;
+    clockwise inclination of the ellipse relative to the x-axis.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the given
     radius is negative.&lt;/p&gt;
@@ -36910,7 +36910,7 @@
   c.restore();
 }
 
---&gt;&lt;figure class=diagrams&gt;&lt;!-- if anyone wants to try writing alternative text for this, be my guest. I can't work out how to describe it. --&gt;&lt;img alt=&quot;&quot; src=<A HREF="http://images.whatwg.org/arc1.png">http://images.whatwg.org/arc1.png</A>&gt;&lt;/figure&gt;&lt;/dd&gt;
+--&gt;&lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-arc&gt;&lt;a href=#dom-context-2d-arc&gt;arc&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-arc&gt;&lt;a href=#dom-context-2d-arc&gt;arc&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
@@ -36926,7 +36926,8 @@
     &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the given
     radius is negative.&lt;/p&gt;
 
-&lt;!--
+    &lt;figure class=diagrams&gt;&lt;!-- if anyone wants to try writing alternative text for this, be my guest. I can't work out how to describe it. --&gt;&lt;img alt=&quot;&quot; src=<A HREF="http://images.whatwg.org/arc1.png">http://images.whatwg.org/arc1.png</A>&gt;&lt;/figure&gt;&lt;!--
+
 c.clearRect(0, 0, 640, 480);
 c.save();
 try {
@@ -36935,12 +36936,12 @@
   var x = 255;
   var y = 150;
   var radius = 100;
-  var startAngle = 2.4
-  var endAngle = 0.7;
+  var startAngle = 2.0;
+  var endAngle = 5.7;
   var direction = false;
 
-  var bottom = 280;
-  var center = 50;
+  var bottom = 110;
+  var center = 380;
 
   var fontSize = 16;
   var margin = 50;
@@ -36971,11 +36972,10 @@
     c.translate(x, y);
     c.rotate(eA);
     c.beginPath();
-    c.moveTo(r-arrowHead, arrowHead);
+    c.moveTo(r-arrowHead, d?arrowHead:-arrowHead);
     c.lineTo(r, 0);
-    c.lineTo(r+arrowHead, arrowHead);
+    c.lineTo(r+arrowHead, d?arrowHead:-arrowHead);
     c.stroke();
-
     c.strokeStyle = 'silver';
     c.beginPath();
     c.moveTo(0, 0);
@@ -36983,10 +36983,26 @@
     c.stroke();
     c.restore();
 
-    c.textAlign = 'right';
-    c.textBaseline = 'middle';
     c.fillStyle = 'black';
-    c.fillText(s + ' ',x-r,y);
+    if (eA&lt;Math.PI) {
+      c.save();
+      c.translate(x, y);
+      c.rotate(sA+(eA-sA)/2-Math.PI/2);
+      c.translate(0, r);
+      c.rotate(-(sA+(eA-sA)/2-Math.PI/2));
+      c.beginPath();
+      c.textAlign = 'center';
+      c.textBaseline = 'bottom';
+      c.fillText(s + '  ',0,0);
+      c.restore();
+    } else {
+      c.save();
+      c.beginPath();
+      c.textAlign = 'left';
+      c.textBaseline = 'middle';
+      c.fillText(' ' + s,x-r,y);
+      c.restore();
+    }
   }
 
   function radial(x, y, length, rotation, s) {
@@ -37000,7 +37016,7 @@
     c.lineTo(length, 0);
     c.stroke();
     c.textAlign = 'center';
-    c.textBaseline = 'top';
+    c.textBaseline = 'bottom';
     c.fillStyle = 'black';
     c.fillText(s,length/2,0);
     c.restore();
@@ -37016,8 +37032,8 @@
   c.arc(x, y, radius, 0, 2*Math.PI);
   c.stroke();
   // angles
-  arc(x, y, 2*radius/3, 0, startAngle, true, radius, '\u03B1');
-  arc(x, y, radius/3, 0, endAngle, true, radius, '\u03B2');
+  arc(x, y, radius/10+2*radius/3, 0, startAngle, false, radius, '\u03B1');
+  arc(x, y, radius/10+radius/3, 0, endAngle, false, radius, '\u03B2');
   // radii
   radial(x, y, radius, 0, 'radius');
 
@@ -37047,17 +37063,19 @@
   print('context.stroke()');
 
   c.fillStyle = 'green';
-  c.fillText(&quot;\u25be initial line&quot;, x0, y0-fontSize);
-  c.textAlign = 'center';
-  c.fillText(&quot;\u25be arc&quot;, x, y-radius-fontSize);
 
+  c.textBaseline = 'top';
+  c.fillText(&quot;initial line \u25b4&quot;, x0+20, y0+fontSize*2);
+
+  c.textAlign = 'right';
+  c.textBaseline = 'middle';
+  c.fillText(&quot;arc \u25b8&quot;, x-radius-15, y);
+
 } finally {
   c.restore();
 }
---&gt;
+--&gt;&lt;/dd&gt;
 
-   &lt;/dd&gt;
-
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-ellipse&gt;&lt;a href=#dom-context-2d-ellipse&gt;ellipse&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radiusY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt;)&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-ellipse&gt;&lt;a href=#dom-context-2d-ellipse&gt;ellipse&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radiusY&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt;)&lt;/dt&gt;
 
@@ -37176,11 +37194,11 @@
 
   &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;The Arc&lt;/var&gt; be the shortest arc
   given by circumference of the ellipse that has radius &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt; on the major axis and radius &lt;var title=&quot;&quot;&gt;radiusY&lt;/var&gt; on the minor axis, and whose semi-major axis
-  is rotated &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt; radians anti-clockwise from
-  the positive x-axis, and that has one point tangent to the
-  half-infinite line that crosses the point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;), and that has a different
-  point tangent to the half-infinite line that ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and crosses the point
+  is rotated &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt; radians clockwise from the
+  positive x-axis, and that has one point tangent to the half-infinite
+  line that crosses the point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;), and that has a different point tangent to
+  the half-infinite line that ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and crosses the point
   (&lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;). The points at
   which this ellipse touches these two lines are called the start and
   end tangent points respectively. The method must connect the point
@@ -37213,8 +37231,8 @@
 
   &lt;p&gt;Consider an ellipse that has its origin at (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;), that has a major-axis
   radius &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt; and a minor-axis radius &lt;var title=&quot;&quot;&gt;radiusY&lt;/var&gt;, and that is rotated about its origin such
-  that its semi-major axis is inclined &lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;
-  radians anti-clockwise from the x-axis. The points at &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; along
+  that its semi-major axis is inclined &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt;
+  radians clockwise from the x-axis. The points at &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; along
   this circle's circumference, measured in radians clockwise from the
   ellipse's semi-major axis, are the start and end points
   respectively.&lt;/p&gt;

Modified: source
===================================================================
--- source	2012-06-23 00:58:45 UTC (rev 7143)
+++ source	2012-06-23 20:32:27 UTC (rev 7144)
@@ -42829,7 +42829,7 @@
     arc's ellipse, and the second controls the height. If only one is
     provided, or if they are the same, the arc is from a circle. In
     the case of an ellipse, the rotation argument controls the
-    anti-clockwise inclination of the ellipse relative to the x-axis.&lt;/p&gt;
+    clockwise inclination of the ellipse relative to the x-axis.&lt;/p&gt;
 
     &lt;p&gt;Throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception if the given
     radius is negative.&lt;/p&gt;
@@ -42980,11 +42980,6 @@
 
 --&gt;
 
-    &lt;figure class=&quot;diagrams&quot;&gt;
-     &lt;!-- if anyone wants to try writing alternative text for this, be my guest. I can't work out how to describe it. --&gt;
-     &lt;img src=&quot;images/arc1.png&quot; alt=&quot;&quot;&gt;
-    &lt;/figure&gt;
-
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-arc&quot;&gt;arc&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
@@ -43001,7 +42996,13 @@
     &lt;p&gt;Throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception if the given
     radius is negative.&lt;/p&gt;
 
+    &lt;figure class=&quot;diagrams&quot;&gt;
+     &lt;!-- if anyone wants to try writing alternative text for this, be my guest. I can't work out how to describe it. --&gt;
+     &lt;img src=&quot;images/arc1.png&quot; alt=&quot;&quot;&gt;
+    &lt;/figure&gt;
+
 &lt;!--
+
 c.clearRect(0, 0, 640, 480);
 c.save();
 try {
@@ -43010,12 +43011,12 @@
   var x = 255;
   var y = 150;
   var radius = 100;
-  var startAngle = 2.4
-  var endAngle = 0.7;
+  var startAngle = 2.0;
+  var endAngle = 5.7;
   var direction = false;
 
-  var bottom = 280;
-  var center = 50;
+  var bottom = 110;
+  var center = 380;
 
   var fontSize = 16;
   var margin = 50;
@@ -43046,11 +43047,10 @@
     c.translate(x, y);
     c.rotate(eA);
     c.beginPath();
-    c.moveTo(r-arrowHead, arrowHead);
+    c.moveTo(r-arrowHead, d?arrowHead:-arrowHead);
     c.lineTo(r, 0);
-    c.lineTo(r+arrowHead, arrowHead);
+    c.lineTo(r+arrowHead, d?arrowHead:-arrowHead);
     c.stroke();
-
     c.strokeStyle = 'silver';
     c.beginPath();
     c.moveTo(0, 0);
@@ -43058,10 +43058,26 @@
     c.stroke();
     c.restore();
 
-    c.textAlign = 'right';
-    c.textBaseline = 'middle';
     c.fillStyle = 'black';
-    c.fillText(s + ' ',x-r,y);
+    if (eA&lt;Math.PI) {
+      c.save();
+      c.translate(x, y);
+      c.rotate(sA+(eA-sA)/2-Math.PI/2);
+      c.translate(0, r);
+      c.rotate(-(sA+(eA-sA)/2-Math.PI/2));
+      c.beginPath();
+      c.textAlign = 'center';
+      c.textBaseline = 'bottom';
+      c.fillText(s + '  ',0,0);
+      c.restore();
+    } else {
+      c.save();
+      c.beginPath();
+      c.textAlign = 'left';
+      c.textBaseline = 'middle';
+      c.fillText(' ' + s,x-r,y);
+      c.restore();
+    }
   }
 
   function radial(x, y, length, rotation, s) {
@@ -43075,7 +43091,7 @@
     c.lineTo(length, 0);
     c.stroke();
     c.textAlign = 'center';
-    c.textBaseline = 'top';
+    c.textBaseline = 'bottom';
     c.fillStyle = 'black';
     c.fillText(s,length/2,0);
     c.restore();
@@ -43091,8 +43107,8 @@
   c.arc(x, y, radius, 0, 2*Math.PI);
   c.stroke();
   // angles
-  arc(x, y, 2*radius/3, 0, startAngle, true, radius, '\u03B1');
-  arc(x, y, radius/3, 0, endAngle, true, radius, '\u03B2');
+  arc(x, y, radius/10+2*radius/3, 0, startAngle, false, radius, '\u03B1');
+  arc(x, y, radius/10+radius/3, 0, endAngle, false, radius, '\u03B2');
   // radii
   radial(x, y, radius, 0, 'radius');
 
@@ -43122,10 +43138,14 @@
   print('context.stroke()');
 
   c.fillStyle = 'green';
-  c.fillText(&quot;\u25be initial line&quot;, x0, y0-fontSize);
-  c.textAlign = 'center';
-  c.fillText(&quot;\u25be arc&quot;, x, y-radius-fontSize);
 
+  c.textBaseline = 'top';
+  c.fillText(&quot;initial line \u25b4&quot;, x0+20, y0+fontSize*2);
+
+  c.textAlign = 'right';
+  c.textBaseline = 'middle';
+  c.fillText(&quot;arc \u25b8&quot;, x-radius-15, y);
+
 } finally {
   c.restore();
 }
@@ -43291,12 +43311,12 @@
   given by circumference of the ellipse that has radius &lt;var
   title=&quot;&quot;&gt;radiusX&lt;/var&gt; on the major axis and radius &lt;var
   title=&quot;&quot;&gt;radiusY&lt;/var&gt; on the minor axis, and whose semi-major axis
-  is rotated &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt; radians anti-clockwise from
-  the positive x-axis, and that has one point tangent to the
-  half-infinite line that crosses the point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and ends at the point (&lt;var
-  title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;), and that has a different
-  point tangent to the half-infinite line that ends at the point (&lt;var
+  is rotated &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt; radians clockwise from the
+  positive x-axis, and that has one point tangent to the half-infinite
+  line that crosses the point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;y0&lt;/var&gt;) and ends at the point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;), and that has a different point tangent to
+  the half-infinite line that ends at the point (&lt;var
   title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and crosses the point
   (&lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;). The points at
   which this ellipse touches these two lines are called the start and
@@ -43344,8 +43364,8 @@
   title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;), that has a major-axis
   radius &lt;var title=&quot;&quot;&gt;radiusX&lt;/var&gt; and a minor-axis radius &lt;var
   title=&quot;&quot;&gt;radiusY&lt;/var&gt;, and that is rotated about its origin such
-  that its semi-major axis is inclined &lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;
-  radians anti-clockwise from the x-axis. The points at &lt;var
+  that its semi-major axis is inclined &lt;var title=&quot;&quot;&gt;rotation&lt;/var&gt;
+  radians clockwise from the x-axis. The points at &lt;var
   title=&quot;&quot;&gt;startAngle&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; along
   this circle's circumference, measured in radians clockwise from the
   ellipse's semi-major axis, are the start and end points


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014008.html">[html5] r7143 - [e] (0) Correct a reference. Affected topics: HTML
</A></li>
	<LI>Next message: <A HREF="014010.html">[html5] r7145 - [e] (0) sync with dom core Affected topics: DOM APIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14009">[ date ]</a>
              <a href="thread.html#14009">[ thread ]</a>
              <a href="subject.html#14009">[ subject ]</a>
              <a href="author.html#14009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
