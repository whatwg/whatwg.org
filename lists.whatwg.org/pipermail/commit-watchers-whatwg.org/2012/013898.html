<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7033 - [giow] (0) More font metrics. Affected topics:	Canvas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7033%20-%20%5Bgiow%5D%20%280%29%20More%20font%20metrics.%20Affected%20topics%3A%0A%09Canvas&In-Reply-To=%3C20120327231005.59A32805827F%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013897.html">
   <LINK REL="Next"  HREF="013899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7033 - [giow] (0) More font metrics. Affected topics:	Canvas</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7033%20-%20%5Bgiow%5D%20%280%29%20More%20font%20metrics.%20Affected%20topics%3A%0A%09Canvas&In-Reply-To=%3C20120327231005.59A32805827F%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7033 - [giow] (0) More font metrics. Affected topics:	Canvas">whatwg at whatwg.org
       </A><BR>
    <I>Tue Mar 27 16:10:05 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="013897.html">[html5] r7032 - [giow] (0) Add a way to reset the clipping region	without affecting the stack Af [...]
</A></li>
        <LI>Next message: <A HREF="013899.html">[html5] r7034 - [giow] (0) Path copy constructor Affected topics:	Canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13898">[ date ]</a>
              <a href="thread.html#13898">[ thread ]</a>
              <a href="subject.html#13898">[ subject ]</a>
              <a href="author.html#13898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-03-27 16:10:04 -0700 (Tue, 27 Mar 2012)
New Revision: 7033

Modified:
   complete.html
   index
   source
Log:
[giow] (0) More font metrics.
Affected topics: Canvas

Modified: complete.html
===================================================================
--- complete.html	2012-03-27 22:24:26 UTC (rev 7032)
+++ complete.html	2012-03-27 23:10:04 UTC (rev 7033)
@@ -35022,7 +35022,20 @@
 };
 
 interface &lt;dfn id=textmetrics&gt;TextMetrics&lt;/dfn&gt; {
-  readonly attribute double &lt;a href=#dom-textmetrics-width title=dom-textmetrics-width&gt;width&lt;/a&gt;;
+  // x-direction
+  readonly attribute double &lt;a href=#dom-textmetrics-width title=dom-textmetrics-width&gt;width&lt;/a&gt;; // advance width
+  readonly attribute double &lt;a href=#dom-textmetrics-actualboundingboxwidth title=dom-textmetrics-actualBoundingBoxWidth&gt;actualBoundingBoxWidth&lt;/a&gt;;
+
+  // y-direction
+  readonly attribute double &lt;a href=#dom-textmetrics-fontboundingboxascent title=dom-textmetrics-fontBoundingBoxAscent&gt;fontBoundingBoxAscent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-fontboundingboxdescent title=dom-textmetrics-fontBoundingBoxDescent&gt;fontBoundingBoxDescent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-actualboundingboxascent title=dom-textmetrics-actualBoundingBoxAscent&gt;actualBoundingBoxAscent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-actualboundingboxdescent title=dom-textmetrics-actualBoundingBoxDescent&gt;actualBoundingBoxDescent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-emheightascent title=dom-textmetrics-emHeightAscent&gt;emHeightAscent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-emheightdescent title=dom-textmetrics-emHeightDescent&gt;emHeightDescent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-hangingbaseline title=dom-textmetrics-hangingBaseline&gt;hangingBaseline&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-alphabeticbaseline title=dom-textmetrics-alphabeticBaseline&gt;alphabeticBaseline&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-ideographicbaseline title=dom-textmetrics-ideographicBaseline&gt;ideographicBaseline&lt;/a&gt;;
 };
 
 dictionary &lt;dfn id=hitregionoptions&gt;HitRegionOptions&lt;/dfn&gt; {
@@ -37393,12 +37406,20 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-actualBoundingBoxWidth&gt;&lt;a href=#dom-textmetrics-actualboundingboxwidth&gt;actualBoundingBoxWidth&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-fontBoundingBoxAscent&gt;&lt;a href=#dom-textmetrics-fontboundingboxascent&gt;fontBoundingBoxAscent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-fontBoundingBoxDescent&gt;&lt;a href=#dom-textmetrics-fontboundingboxdescent&gt;fontBoundingBoxDescent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-actualBoundingBoxAscent&gt;&lt;a href=#dom-textmetrics-actualboundingboxascent&gt;actualBoundingBoxAscent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-actualBoundingBoxDescent&gt;&lt;a href=#dom-textmetrics-actualboundingboxdescent&gt;actualBoundingBoxDescent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-emHeightAscent&gt;&lt;a href=#dom-textmetrics-emheightascent&gt;emHeightAscent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-emHeightDescent&gt;&lt;a href=#dom-textmetrics-emheightdescent&gt;emHeightDescent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-hangingBaseline&gt;&lt;a href=#dom-textmetrics-hangingbaseline&gt;hangingBaseline&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-alphabeticBaseline&gt;&lt;a href=#dom-textmetrics-alphabeticbaseline&gt;alphabeticBaseline&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-ideographicBaseline&gt;&lt;a href=#dom-textmetrics-ideographicbaseline&gt;ideographicBaseline&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-    method.&lt;/p&gt;
+    &lt;p&gt;Returns the measurement described below.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -37614,8 +37635,7 @@
   inline element set to the current font of the context as given by
   the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute, and
   must then create a new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its
-  &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt; attribute set to
-  the width of that inline box, in CSS pixels.
+  attributes set as described in the following list.
 &lt;!--ADD-TOPIC:Security--&gt;
   If doing these measurements requires using a font that has an
   &lt;a href=#origin&gt;origin&lt;/a&gt; that is not the &lt;a href=#same-origin title=&quot;same
@@ -37628,24 +37648,61 @@
   Otherwise, it must return the new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object.
   &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; interface is used for the objects
-  returned from &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;. It has one
-  attribute, &lt;dfn id=dom-textmetrics-width title=dom-textmetrics-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
-  by the &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-  method.&lt;/p&gt;
+  &lt;/div&gt;
 
-  &lt;p class=note&gt;Glyphs rendered using &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; can spill out
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-textmetrics-width title=dom-textmetrics-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The width of that inline box, in CSS pixels.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-actualboundingboxwidth title=dom-textmetrics-actualBoundingBoxWidth&gt;&lt;code&gt;actualBoundingBoxWidth&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The width of the bounding rectangle of the given text, in CSS pixels. This can be wider than the width of the inline box, in particular with slanted fonts where characters overhang their advance width.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-fontboundingboxascent title=dom-textmetrics-fontBoundingBoxAscent&gt;&lt;code&gt;fontBoundingBoxAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the top of the highest bounding rectangle of all the fonts used to render the text, in CSS pixels; positive numbers indicating a distance going up from the given baseline.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-fontboundingboxdescent title=dom-textmetrics-fontBoundingBoxDescent&gt;&lt;code&gt;fontBoundingBoxDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the bottom of the lowest bounding rectangle of all the fonts used to render the text, in CSS pixels; positive numbers indicating a distance going down from the given baseline.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-actualboundingboxascent title=dom-textmetrics-actualBoundingBoxAscent&gt;&lt;code&gt;actualBoundingBoxAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the top of the bounding rectangle of the given text, in CSS pixels; positive numbers indicating a distance going up from the given baseline.
+    &lt;p class=note&gt;This number can vary greatly based on the input text, even if the first font specified covers all the characters in the input. For example, the &lt;code title=dom-textmetrics-actualBoundingBoxAscent&gt;&lt;a href=#dom-textmetrics-actualboundingboxascent&gt;actualBoundingBoxAscent&lt;/a&gt;&lt;/code&gt; of a lowercase &quot;o&quot; from an alphabetic baseline would be less than that of an uppercase &quot;F&quot;. The value can easily be negative; for example, the distance from the top of the em box (&lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; value &quot;&lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;&quot;) to the top of the bounding rectangle when the given text is just a single comma &quot;&lt;code title=&quot;&quot;&gt;,&lt;/code&gt;&quot; would likely (unless the font is quite unusual) be negative.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-actualboundingboxdescent title=dom-textmetrics-actualBoundingBoxDescent&gt;&lt;code&gt;actualBoundingBoxDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the bottom of the bounding rectangle of the given text, in CSS pixels; positive numbers indicating a distance going down from the given baseline.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-emheightascent title=dom-textmetrics-emHeightAscent&gt;&lt;code&gt;emHeightAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the top of the em square in the line box, in CSS pixels; positive numbers indicating that the given baseline is below the top of the em square (so this value will usually be positive). Zero if the given baseline is the top of the em square; half the font size if the given baseline is the middle of the em square.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-emheightdescent title=dom-textmetrics-emHeightDescent&gt;&lt;code&gt;emHeightDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the bottom of the em square in the line box, in CSS pixels; positive numbers indicating that the given baseline is below the bottom of the em square (so this value will usually be negative). (Zero if the given baseline is the top of the em square.)&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-hangingbaseline title=dom-textmetrics-hangingBaseline&gt;&lt;code&gt;hangingBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the hanging baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the hanging baseline. (Zero if the given baseline is the hanging baseline.)&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-alphabeticbaseline title=dom-textmetrics-alphabeticBaseline&gt;&lt;code&gt;alphabeticBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the alphabetic baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the alphabetic baseline. (Zero if the given baseline is the alphabetic baseline.)&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-ideographicbaseline title=dom-textmetrics-ideographicBaseline&gt;&lt;code&gt;ideographicBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the ideographic baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the ideographic baseline. (Zero if the given baseline is the ideographic baseline.)&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p class=note&gt;Glyphs rendered using &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; can spill out
   of the box given by the font size (the em square size) and the width
   returned by &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt; (the text
-  width). This version of the specification does not provide a way to
-  obtain the bounding box dimensions of the text. If the text is to be
-  rendered and removed, care needs to be taken to replace the entire
-  area of the canvas that the &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; covers, not
-  just the box given by the em square height and measured text
-  width.&lt;/p&gt;
+  width). Authors are encouraged to use the bounding box values
+  described above if this is an issue.&lt;/p&gt;
 
-  &lt;/div&gt;
-
   &lt;p class=note&gt;A future version of the 2D context API may provide a
   way to render fragments of documents, rendered using CSS, straight
   to the canvas. This would be provided in preference to a dedicated

Modified: index
===================================================================
--- index	2012-03-27 22:24:26 UTC (rev 7032)
+++ index	2012-03-27 23:10:04 UTC (rev 7033)
@@ -35022,7 +35022,20 @@
 };
 
 interface &lt;dfn id=textmetrics&gt;TextMetrics&lt;/dfn&gt; {
-  readonly attribute double &lt;a href=#dom-textmetrics-width title=dom-textmetrics-width&gt;width&lt;/a&gt;;
+  // x-direction
+  readonly attribute double &lt;a href=#dom-textmetrics-width title=dom-textmetrics-width&gt;width&lt;/a&gt;; // advance width
+  readonly attribute double &lt;a href=#dom-textmetrics-actualboundingboxwidth title=dom-textmetrics-actualBoundingBoxWidth&gt;actualBoundingBoxWidth&lt;/a&gt;;
+
+  // y-direction
+  readonly attribute double &lt;a href=#dom-textmetrics-fontboundingboxascent title=dom-textmetrics-fontBoundingBoxAscent&gt;fontBoundingBoxAscent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-fontboundingboxdescent title=dom-textmetrics-fontBoundingBoxDescent&gt;fontBoundingBoxDescent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-actualboundingboxascent title=dom-textmetrics-actualBoundingBoxAscent&gt;actualBoundingBoxAscent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-actualboundingboxdescent title=dom-textmetrics-actualBoundingBoxDescent&gt;actualBoundingBoxDescent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-emheightascent title=dom-textmetrics-emHeightAscent&gt;emHeightAscent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-emheightdescent title=dom-textmetrics-emHeightDescent&gt;emHeightDescent&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-hangingbaseline title=dom-textmetrics-hangingBaseline&gt;hangingBaseline&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-alphabeticbaseline title=dom-textmetrics-alphabeticBaseline&gt;alphabeticBaseline&lt;/a&gt;;
+  readonly attribute double &lt;a href=#dom-textmetrics-ideographicbaseline title=dom-textmetrics-ideographicBaseline&gt;ideographicBaseline&lt;/a&gt;;
 };
 
 dictionary &lt;dfn id=hitregionoptions&gt;HitRegionOptions&lt;/dfn&gt; {
@@ -37393,12 +37406,20 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-actualBoundingBoxWidth&gt;&lt;a href=#dom-textmetrics-actualboundingboxwidth&gt;actualBoundingBoxWidth&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-fontBoundingBoxAscent&gt;&lt;a href=#dom-textmetrics-fontboundingboxascent&gt;fontBoundingBoxAscent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-fontBoundingBoxDescent&gt;&lt;a href=#dom-textmetrics-fontboundingboxdescent&gt;fontBoundingBoxDescent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-actualBoundingBoxAscent&gt;&lt;a href=#dom-textmetrics-actualboundingboxascent&gt;actualBoundingBoxAscent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-actualBoundingBoxDescent&gt;&lt;a href=#dom-textmetrics-actualboundingboxdescent&gt;actualBoundingBoxDescent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-emHeightAscent&gt;&lt;a href=#dom-textmetrics-emheightascent&gt;emHeightAscent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-emHeightDescent&gt;&lt;a href=#dom-textmetrics-emheightdescent&gt;emHeightDescent&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-hangingBaseline&gt;&lt;a href=#dom-textmetrics-hangingbaseline&gt;hangingBaseline&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-alphabeticBaseline&gt;&lt;a href=#dom-textmetrics-alphabeticbaseline&gt;alphabeticBaseline&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-ideographicBaseline&gt;&lt;a href=#dom-textmetrics-ideographicbaseline&gt;ideographicBaseline&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-    method.&lt;/p&gt;
+    &lt;p&gt;Returns the measurement described below.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -37614,8 +37635,7 @@
   inline element set to the current font of the context as given by
   the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute, and
   must then create a new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its
-  &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt; attribute set to
-  the width of that inline box, in CSS pixels.
+  attributes set as described in the following list.
 &lt;!--ADD-TOPIC:Security--&gt;
   If doing these measurements requires using a font that has an
   &lt;a href=#origin&gt;origin&lt;/a&gt; that is not the &lt;a href=#same-origin title=&quot;same
@@ -37628,24 +37648,61 @@
   Otherwise, it must return the new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object.
   &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; interface is used for the objects
-  returned from &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;. It has one
-  attribute, &lt;dfn id=dom-textmetrics-width title=dom-textmetrics-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
-  by the &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-  method.&lt;/p&gt;
+  &lt;/div&gt;
 
-  &lt;p class=note&gt;Glyphs rendered using &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; can spill out
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-textmetrics-width title=dom-textmetrics-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The width of that inline box, in CSS pixels.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-actualboundingboxwidth title=dom-textmetrics-actualBoundingBoxWidth&gt;&lt;code&gt;actualBoundingBoxWidth&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The width of the bounding rectangle of the given text, in CSS pixels. This can be wider than the width of the inline box, in particular with slanted fonts where characters overhang their advance width.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-fontboundingboxascent title=dom-textmetrics-fontBoundingBoxAscent&gt;&lt;code&gt;fontBoundingBoxAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the top of the highest bounding rectangle of all the fonts used to render the text, in CSS pixels; positive numbers indicating a distance going up from the given baseline.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-fontboundingboxdescent title=dom-textmetrics-fontBoundingBoxDescent&gt;&lt;code&gt;fontBoundingBoxDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the bottom of the lowest bounding rectangle of all the fonts used to render the text, in CSS pixels; positive numbers indicating a distance going down from the given baseline.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-actualboundingboxascent title=dom-textmetrics-actualBoundingBoxAscent&gt;&lt;code&gt;actualBoundingBoxAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the top of the bounding rectangle of the given text, in CSS pixels; positive numbers indicating a distance going up from the given baseline.
+    &lt;p class=note&gt;This number can vary greatly based on the input text, even if the first font specified covers all the characters in the input. For example, the &lt;code title=dom-textmetrics-actualBoundingBoxAscent&gt;&lt;a href=#dom-textmetrics-actualboundingboxascent&gt;actualBoundingBoxAscent&lt;/a&gt;&lt;/code&gt; of a lowercase &quot;o&quot; from an alphabetic baseline would be less than that of an uppercase &quot;F&quot;. The value can easily be negative; for example, the distance from the top of the em box (&lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; value &quot;&lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;&quot;) to the top of the bounding rectangle when the given text is just a single comma &quot;&lt;code title=&quot;&quot;&gt;,&lt;/code&gt;&quot; would likely (unless the font is quite unusual) be negative.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-actualboundingboxdescent title=dom-textmetrics-actualBoundingBoxDescent&gt;&lt;code&gt;actualBoundingBoxDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the bottom of the bounding rectangle of the given text, in CSS pixels; positive numbers indicating a distance going down from the given baseline.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-emheightascent title=dom-textmetrics-emHeightAscent&gt;&lt;code&gt;emHeightAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the top of the em square in the line box, in CSS pixels; positive numbers indicating that the given baseline is below the top of the em square (so this value will usually be positive). Zero if the given baseline is the top of the em square; half the font size if the given baseline is the middle of the em square.&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-emheightdescent title=dom-textmetrics-emHeightDescent&gt;&lt;code&gt;emHeightDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the bottom of the em square in the line box, in CSS pixels; positive numbers indicating that the given baseline is below the bottom of the em square (so this value will usually be negative). (Zero if the given baseline is the top of the em square.)&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-hangingbaseline title=dom-textmetrics-hangingBaseline&gt;&lt;code&gt;hangingBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the hanging baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the hanging baseline. (Zero if the given baseline is the hanging baseline.)&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-alphabeticbaseline title=dom-textmetrics-alphabeticBaseline&gt;&lt;code&gt;alphabeticBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the alphabetic baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the alphabetic baseline. (Zero if the given baseline is the alphabetic baseline.)&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=dom-textmetrics-ideographicbaseline title=dom-textmetrics-ideographicBaseline&gt;&lt;code&gt;ideographicBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute to the ideographic baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the ideographic baseline. (Zero if the given baseline is the ideographic baseline.)&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p class=note&gt;Glyphs rendered using &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; can spill out
   of the box given by the font size (the em square size) and the width
   returned by &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt; (the text
-  width). This version of the specification does not provide a way to
-  obtain the bounding box dimensions of the text. If the text is to be
-  rendered and removed, care needs to be taken to replace the entire
-  area of the canvas that the &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; covers, not
-  just the box given by the em square height and measured text
-  width.&lt;/p&gt;
+  width). Authors are encouraged to use the bounding box values
+  described above if this is an issue.&lt;/p&gt;
 
-  &lt;/div&gt;
-
   &lt;p class=note&gt;A future version of the 2D context API may provide a
   way to render fragments of documents, rendered using CSS, straight
   to the canvas. This would be provided in preference to a dedicated

Modified: source
===================================================================
--- source	2012-03-27 22:24:26 UTC (rev 7032)
+++ source	2012-03-27 23:10:04 UTC (rev 7033)
@@ -40704,7 +40704,20 @@
 };
 
 interface &lt;dfn&gt;TextMetrics&lt;/dfn&gt; {
-  readonly attribute double &lt;span title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/span&gt;;
+  // x-direction
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/span&gt;; // advance width
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-actualBoundingBoxWidth&quot;&gt;actualBoundingBoxWidth&lt;/span&gt;;
+
+  // y-direction
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-fontBoundingBoxAscent&quot;&gt;fontBoundingBoxAscent&lt;/span&gt;;
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-fontBoundingBoxDescent&quot;&gt;fontBoundingBoxDescent&lt;/span&gt;;
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-actualBoundingBoxAscent&quot;&gt;actualBoundingBoxAscent&lt;/span&gt;;
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-actualBoundingBoxDescent&quot;&gt;actualBoundingBoxDescent&lt;/span&gt;;
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-emHeightAscent&quot;&gt;emHeightAscent&lt;/span&gt;;
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-emHeightDescent&quot;&gt;emHeightDescent&lt;/span&gt;;
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-hangingBaseline&quot;&gt;hangingBaseline&lt;/span&gt;;
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-alphabeticBaseline&quot;&gt;alphabeticBaseline&lt;/span&gt;;
+  readonly attribute double &lt;span title=&quot;dom-textmetrics-ideographicBaseline&quot;&gt;ideographicBaseline&lt;/span&gt;;
 };
 
 dictionary &lt;dfn&gt;HitRegionOptions&lt;/dfn&gt; {
@@ -43588,12 +43601,20 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-actualBoundingBoxWidth&quot;&gt;actualBoundingBoxWidth&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-fontBoundingBoxAscent&quot;&gt;fontBoundingBoxAscent&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-fontBoundingBoxDescent&quot;&gt;fontBoundingBoxDescent&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-actualBoundingBoxAscent&quot;&gt;actualBoundingBoxAscent&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-actualBoundingBoxDescent&quot;&gt;actualBoundingBoxDescent&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-emHeightAscent&quot;&gt;emHeightAscent&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-emHeightDescent&quot;&gt;emHeightDescent&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-hangingBaseline&quot;&gt;hangingBaseline&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-alphabeticBaseline&quot;&gt;alphabeticBaseline&lt;/code&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-ideographicBaseline&quot;&gt;ideographicBaseline&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;
-    method.&lt;/p&gt;
+    &lt;p&gt;Returns the measurement described below.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -43832,8 +43853,7 @@
   inline element set to the current font of the context as given by
   the &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute, and
   must then create a new &lt;code&gt;TextMetrics&lt;/code&gt; object with its
-  &lt;code title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/code&gt; attribute set to
-  the width of that inline box, in CSS pixels.
+  attributes set as described in the following list.
 &lt;!--ADD-TOPIC:Security--&gt;
   If doing these measurements requires using a font that has an
   &lt;span&gt;origin&lt;/span&gt; that is not the &lt;span title=&quot;same
@@ -43846,29 +43866,68 @@
   Otherwise, it must return the new &lt;code&gt;TextMetrics&lt;/code&gt; object.
   &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The &lt;code&gt;TextMetrics&lt;/code&gt; interface is used for the objects
-  returned from &lt;code
-  title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;. It has one
-  attribute, &lt;dfn
-  title=&quot;dom-textmetrics-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
-  by the &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;
-  method.&lt;/p&gt;
+  &lt;/div&gt;
 
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The width of that inline box, in CSS pixels.&lt;/p&gt;&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-actualBoundingBoxWidth&quot;&gt;&lt;code&gt;actualBoundingBoxWidth&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The width of the bounding rectangle of the given text, in CSS pixels. This can be wider than the width of the inline box, in particular with slanted fonts where characters overhang their advance width.&lt;/p&gt;&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-fontBoundingBoxAscent&quot;&gt;&lt;code&gt;fontBoundingBoxAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the top of the highest bounding rectangle of all the fonts used to render the text, in CSS pixels; positive numbers indicating a distance going up from the given baseline.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-fontBoundingBoxDescent&quot;&gt;&lt;code&gt;fontBoundingBoxDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the bottom of the lowest bounding rectangle of all the fonts used to render the text, in CSS pixels; positive numbers indicating a distance going down from the given baseline.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-actualBoundingBoxAscent&quot;&gt;&lt;code&gt;actualBoundingBoxAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the top of the bounding rectangle of the given text, in CSS pixels; positive numbers indicating a distance going up from the given baseline.
+    &lt;p class=&quot;note&quot;&gt;This number can vary greatly based on the input text, even if the first font specified covers all the characters in the input. For example, the &lt;code title=&quot;dom-textmetrics-actualBoundingBoxAscent&quot;&gt;actualBoundingBoxAscent&lt;/code&gt; of a lowercase &quot;o&quot; from an alphabetic baseline would be less than that of an uppercase &quot;F&quot;. The value can easily be negative; for example, the distance from the top of the em box (&lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; value &quot;&lt;code title=&quot;dom-context-2d-textBaseline-top&quot;&gt;top&lt;/code&gt;&quot;) to the top of the bounding rectangle when the given text is just a single comma &quot;&lt;code title=&quot;&quot;&gt;,&lt;/code&gt;&quot; would likely (unless the font is quite unusual) be negative.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-actualBoundingBoxDescent&quot;&gt;&lt;code&gt;actualBoundingBoxDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the bottom of the bounding rectangle of the given text, in CSS pixels; positive numbers indicating a distance going down from the given baseline.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-emHeightAscent&quot;&gt;&lt;code&gt;emHeightAscent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the top of the em square in the line box, in CSS pixels; positive numbers indicating that the given baseline is below the top of the em square (so this value will usually be positive). Zero if the given baseline is the top of the em square; half the font size if the given baseline is the middle of the em square.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-emHeightDescent&quot;&gt;&lt;code&gt;emHeightDescent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the bottom of the em square in the line box, in CSS pixels; positive numbers indicating that the given baseline is below the bottom of the em square (so this value will usually be negative). (Zero if the given baseline is the top of the em square.)&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-hangingBaseline&quot;&gt;&lt;code&gt;hangingBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the hanging baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the hanging baseline. (Zero if the given baseline is the hanging baseline.)&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-alphabeticBaseline&quot;&gt;&lt;code&gt;alphabeticBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the alphabetic baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the alphabetic baseline. (Zero if the given baseline is the alphabetic baseline.)&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;dom-textmetrics-ideographicBaseline&quot;&gt;&lt;code&gt;ideographicBaseline&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;The distance from the horizontal line indicated by the &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute to the ideographic baseline of the line box, in CSS pixels; positive numbers indicating that the given baseline is below the ideographic baseline. (Zero if the given baseline is the ideographic baseline.)&lt;/p&gt;&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
   &lt;p class=&quot;note&quot;&gt;Glyphs rendered using &lt;code
   title=&quot;dom-context-2d-fillText&quot;&gt;fillText()&lt;/code&gt; and &lt;code
   title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText()&lt;/code&gt; can spill out
   of the box given by the font size (the em square size) and the width
   returned by &lt;code
   title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt; (the text
-  width). This version of the specification does not provide a way to
-  obtain the bounding box dimensions of the text. If the text is to be
-  rendered and removed, care needs to be taken to replace the entire
-  area of the canvas that the &lt;span&gt;clipping region&lt;/span&gt; covers, not
-  just the box given by the em square height and measured text
-  width.&lt;/p&gt;
+  width). Authors are encouraged to use the bounding box values
+  described above if this is an issue.&lt;/p&gt;
 
-  &lt;/div&gt;
-
   &lt;p class=&quot;note&quot;&gt;A future version of the 2D context API may provide a
   way to render fragments of documents, rendered using CSS, straight
   to the canvas. This would be provided in preference to a dedicated


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013897.html">[html5] r7032 - [giow] (0) Add a way to reset the clipping region	without affecting the stack Af [...]
</A></li>
	<LI>Next message: <A HREF="013899.html">[html5] r7034 - [giow] (0) Path copy constructor Affected topics:	Canvas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13898">[ date ]</a>
              <a href="thread.html#13898">[ thread ]</a>
              <a href="subject.html#13898">[ subject ]</a>
              <a href="author.html#13898">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
