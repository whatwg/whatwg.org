<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r6903 - [e] (0) Add more explanatory text about	postMessage()'s first argument. Affected [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6903%20-%20%5Be%5D%20%280%29%20Add%20more%20explanatory%20text%20about%0A%09postMessage%28%29%27s%20first%20argument.%20Affected%20%5B...%5D&In-Reply-To=%3C20120118225650.848711C84012%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013767.html">
   <LINK REL="Next"  HREF="013769.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r6903 - [e] (0) Add more explanatory text about	postMessage()'s first argument. Affected [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r6903%20-%20%5Be%5D%20%280%29%20Add%20more%20explanatory%20text%20about%0A%09postMessage%28%29%27s%20first%20argument.%20Affected%20%5B...%5D&In-Reply-To=%3C20120118225650.848711C84012%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r6903 - [e] (0) Add more explanatory text about	postMessage()'s first argument. Affected [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Jan 18 14:56:50 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="013767.html">[html5] r6902 - [e] (0) Make all the element definitions	hyperlinked. Fixing http://www.w3.org/B [...]
</A></li>
        <LI>Next message: <A HREF="013769.html">[html5] r6904 - [e] (0) Introduce some documentation about wire	formats vs presented formats for [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13768">[ date ]</a>
              <a href="thread.html#13768">[ thread ]</a>
              <a href="subject.html#13768">[ subject ]</a>
              <a href="author.html#13768">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-01-18 14:56:49 -0800 (Wed, 18 Jan 2012)
New Revision: 6903

Modified:
   complete.html
   index
   source
Log:
[e] (0) Add more explanatory text about postMessage()'s first argument.
Affected topics: DOM APIs, HTML, Web Workers

Modified: complete.html
===================================================================
--- complete.html	2012-01-18 00:02:50 UTC (rev 6902)
+++ complete.html	2012-01-18 22:56:49 UTC (rev 6903)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 17 January 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 18 January 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -75840,6 +75840,15 @@
   immediately invoked the method of the same name on the port, with
   the same arguments, and returned the same return value.&lt;/p&gt;
 
+  &lt;div class=example&gt;
+
+   &lt;p&gt;The &lt;code title=dom-Worker-postMessage&gt;&lt;a href=#dom-worker-postmessage&gt;postMessage()&lt;/a&gt;&lt;/code&gt;
+   method's first argument can be structured data:&lt;/p&gt;
+
+   &lt;pre&gt;worker.postMessage({opcode: 'activate', device: 1938, parameters: [23, 102]});&lt;/pre&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
   corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
   event types&lt;/a&gt;) that must be supported, as IDL attributes, by
@@ -78328,9 +78337,17 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Posts a message to the given window. Objects listed in &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt; are transferred, not just cloned, meaning
-    that they are no longer usable on the sending side.&lt;/p&gt;
+    &lt;p&gt;Posts a message to the given window. Messages can be structured
+    objects, e.g. nested objects and arrays, can contain JavaScript
+    values (strings, numbers, &lt;code&gt;Date&lt;/code&gt;s, etc), and can
+    contain certain data objects such as &lt;code&gt;&lt;a href=#file&gt;File&lt;/a&gt;&lt;/code&gt;
+    &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#filelist&gt;FileList&lt;/a&gt;&lt;/code&gt;, and
+    &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; objects.&lt;/p&gt;
 
+    &lt;p&gt;Objects listed in &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt; are transferred,
+    not just cloned, meaning that they are no longer usable on the
+    sending side.&lt;/p&gt;
+
     &lt;p&gt;If the origin of the target window doesn't match the given
     origin, the message is discarded, to avoid information leakage. To
     send the message to the target regardless of origin, set the
@@ -78547,7 +78564,12 @@
   // ...
 }&lt;/pre&gt;
 
+  &lt;p&gt;Data sent on a port can be structured data; for example here an
+  array of strings is passed:&lt;/p&gt;
 
+  &lt;pre&gt;port1.postMessage(['hello', 'world'], '<A HREF="http://example.com">http://example.com</A>');&lt;/pre&gt;
+
+
   &lt;h5 id=ports-as-the-basis-of-an-object-capability-model-on-the-web&gt;&lt;span class=secno&gt;10.5.1.1 &lt;/span&gt;Ports as the basis of an object-capability model on the Web&lt;/h5&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
@@ -98077,6 +98099,7 @@
   Eira Monstad,
   Eitan Adler,
   Eliot Graff,
+  Elisabeth Robson,
   Elizabeth Castro,
   Elliott Sprehn,
   Elliotte Harold,

Modified: index
===================================================================
--- index	2012-01-18 00:02:50 UTC (rev 6902)
+++ index	2012-01-18 22:56:49 UTC (rev 6903)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 17 January 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 18 January 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -75840,6 +75840,15 @@
   immediately invoked the method of the same name on the port, with
   the same arguments, and returned the same return value.&lt;/p&gt;
 
+  &lt;div class=example&gt;
+
+   &lt;p&gt;The &lt;code title=dom-Worker-postMessage&gt;&lt;a href=#dom-worker-postmessage&gt;postMessage()&lt;/a&gt;&lt;/code&gt;
+   method's first argument can be structured data:&lt;/p&gt;
+
+   &lt;pre&gt;worker.postMessage({opcode: 'activate', device: 1938, parameters: [23, 102]});&lt;/pre&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
   corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
   event types&lt;/a&gt;) that must be supported, as IDL attributes, by
@@ -78328,9 +78337,17 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Posts a message to the given window. Objects listed in &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt; are transferred, not just cloned, meaning
-    that they are no longer usable on the sending side.&lt;/p&gt;
+    &lt;p&gt;Posts a message to the given window. Messages can be structured
+    objects, e.g. nested objects and arrays, can contain JavaScript
+    values (strings, numbers, &lt;code&gt;Date&lt;/code&gt;s, etc), and can
+    contain certain data objects such as &lt;code&gt;&lt;a href=#file&gt;File&lt;/a&gt;&lt;/code&gt;
+    &lt;code&gt;&lt;a href=#blob&gt;Blob&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#filelist&gt;FileList&lt;/a&gt;&lt;/code&gt;, and
+    &lt;code&gt;&lt;a href=#arraybuffer&gt;ArrayBuffer&lt;/a&gt;&lt;/code&gt; objects.&lt;/p&gt;
 
+    &lt;p&gt;Objects listed in &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt; are transferred,
+    not just cloned, meaning that they are no longer usable on the
+    sending side.&lt;/p&gt;
+
     &lt;p&gt;If the origin of the target window doesn't match the given
     origin, the message is discarded, to avoid information leakage. To
     send the message to the target regardless of origin, set the
@@ -78547,7 +78564,12 @@
   // ...
 }&lt;/pre&gt;
 
+  &lt;p&gt;Data sent on a port can be structured data; for example here an
+  array of strings is passed:&lt;/p&gt;
 
+  &lt;pre&gt;port1.postMessage(['hello', 'world'], '<A HREF="http://example.com">http://example.com</A>');&lt;/pre&gt;
+
+
   &lt;h5 id=ports-as-the-basis-of-an-object-capability-model-on-the-web&gt;&lt;span class=secno&gt;10.5.1.1 &lt;/span&gt;Ports as the basis of an object-capability model on the Web&lt;/h5&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
@@ -98077,6 +98099,7 @@
   Eira Monstad,
   Eitan Adler,
   Eliot Graff,
+  Elisabeth Robson,
   Elizabeth Castro,
   Elliott Sprehn,
   Elliotte Harold,

Modified: source
===================================================================
--- source	2012-01-18 00:02:50 UTC (rev 6902)
+++ source	2012-01-18 22:56:49 UTC (rev 6903)
@@ -87931,6 +87931,15 @@
   immediately invoked the method of the same name on the port, with
   the same arguments, and returned the same return value.&lt;/p&gt;
 
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;The &lt;code title=&quot;dom-Worker-postMessage&quot;&gt;postMessage()&lt;/code&gt;
+   method's first argument can be structured data:&lt;/p&gt;
+
+   &lt;pre&gt;worker.postMessage({opcode: 'activate', device: 1938, parameters: [23, 102]});&lt;/pre&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The following are the &lt;span&gt;event handlers&lt;/span&gt; (and their
   corresponding &lt;span title=&quot;event handler event type&quot;&gt;event handler
   event types&lt;/span&gt;) that must be supported, as IDL attributes, by
@@ -90914,10 +90923,17 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Posts a message to the given window. Objects listed in &lt;var
-    title=&quot;&quot;&gt;transfer&lt;/var&gt; are transferred, not just cloned, meaning
-    that they are no longer usable on the sending side.&lt;/p&gt;
+    &lt;p&gt;Posts a message to the given window. Messages can be structured
+    objects, e.g. nested objects and arrays, can contain JavaScript
+    values (strings, numbers, &lt;code&gt;Date&lt;/code&gt;s, etc), and can
+    contain certain data objects such as &lt;code&gt;File&lt;/code&gt;
+    &lt;code&gt;Blob&lt;/code&gt;, &lt;code&gt;FileList&lt;/code&gt;, and
+    &lt;code&gt;ArrayBuffer&lt;/code&gt; objects.&lt;/p&gt;
 
+    &lt;p&gt;Objects listed in &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt; are transferred,
+    not just cloned, meaning that they are no longer usable on the
+    sending side.&lt;/p&gt;
+
     &lt;p&gt;If the origin of the target window doesn't match the given
     origin, the message is discarded, to avoid information leakage. To
     send the message to the target regardless of origin, set the
@@ -91177,7 +91193,12 @@
   // ...
 }&lt;/pre&gt;
 
+  &lt;p&gt;Data sent on a port can be structured data; for example here an
+  array of strings is passed:&lt;/p&gt;
 
+  &lt;pre&gt;port1.postMessage(['hello', 'world'], '<A HREF="http://example.com">http://example.com</A>');&lt;/pre&gt;
+
+
   &lt;h5&gt;Ports as the basis of an object-capability model on the Web&lt;/h5&gt;
 
   &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
@@ -114916,6 +114937,7 @@
   Eira Monstad,
   Eitan Adler,
   Eliot Graff,
+  Elisabeth Robson,
   Elizabeth Castro,
   Elliott Sprehn,
   Elliotte Harold,


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013767.html">[html5] r6902 - [e] (0) Make all the element definitions	hyperlinked. Fixing http://www.w3.org/B [...]
</A></li>
	<LI>Next message: <A HREF="013769.html">[html5] r6904 - [e] (0) Introduce some documentation about wire	formats vs presented formats for [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13768">[ date ]</a>
              <a href="thread.html#13768">[ thread ]</a>
              <a href="subject.html#13768">[ subject ]</a>
              <a href="author.html#13768">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
