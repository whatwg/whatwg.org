<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7169 - [giow] (2) Make 'abort the parser' fire some	readystatechange events for more co [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7169%20-%20%5Bgiow%5D%20%282%29%20Make%20%27abort%20the%20parser%27%20fire%20some%0A%09readystatechange%20events%20for%20more%20co%20%5B...%5D&In-Reply-To=%3C20120710191529.6D7F19C7C084%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014033.html">
   <LINK REL="Next"  HREF="014035.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7169 - [giow] (2) Make 'abort the parser' fire some	readystatechange events for more co [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7169%20-%20%5Bgiow%5D%20%282%29%20Make%20%27abort%20the%20parser%27%20fire%20some%0A%09readystatechange%20events%20for%20more%20co%20%5B...%5D&In-Reply-To=%3C20120710191529.6D7F19C7C084%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7169 - [giow] (2) Make 'abort the parser' fire some	readystatechange events for more co [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Jul 10 12:15:29 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014033.html">[html5] r7168 - [giow] (1) Fix &lt;iframe seamless&gt; so that it doesn't	make it impossible to even l [...]
</A></li>
        <LI>Next message: <A HREF="014035.html">[html5] r7170 - [e] (0) fix obsolete non-normative text Fixing	https://www.w3.org/Bugs/Public/sh [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14034">[ date ]</a>
              <a href="thread.html#14034">[ thread ]</a>
              <a href="subject.html#14034">[ subject ]</a>
              <a href="author.html#14034">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-07-10 12:15:28 -0700 (Tue, 10 Jul 2012)
New Revision: 7169

Modified:
   complete.html
   index
   source
Log:
[giow] (2) Make 'abort the parser' fire some readystatechange events for more consistency. Slightly expand on how little XSLT/HTML interactions are defined. Rename 'cookie-free' to 'cookie-averse' for clarity.
Affected topics: DOM APIs, HTML, HTML Syntax and Parsing

Modified: complete.html
===================================================================
--- complete.html	2012-07-09 23:27:03 UTC (rev 7168)
+++ complete.html	2012-07-10 19:15:28 UTC (rev 7169)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 9 July 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 10 July 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -10069,7 +10069,7 @@
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was created.&lt;/p&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that falls into one of the
-  following conditions is a &lt;dfn id=cookie-free-document-object&gt;cookie-free &lt;code&gt;Document&lt;/code&gt;
+  following conditions is a &lt;dfn id=cookie-averse-document-object&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt;
   object&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that has no &lt;a href=#browsing-context&gt;browsing
@@ -10080,10 +10080,10 @@
    authority.&lt;/li&gt;
 
   &lt;/ul&gt;&lt;!--Other specifications can also define &lt;code&gt;Document&lt;/code&gt;
-  objects as being &lt;span title=&quot;cookie-free Document
-  object&quot;&gt;cookie-free &lt;code&gt;Document&lt;/code&gt; objects&lt;/span&gt;.--&gt;&lt;p id=sandboxCookies&gt;On getting, if the document is a
-  &lt;a href=#cookie-free-document-object&gt;cookie-free &lt;code&gt;Document&lt;/code&gt; object&lt;/a&gt;, then the user
-  agent must return the empty string. Otherwise, if the
+  objects as being &lt;span title=&quot;cookie-averse Document
+  object&quot;&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt; objects&lt;/span&gt;.--&gt;&lt;p id=sandboxCookies&gt;On getting, if the document is a
+  &lt;a href=#cookie-averse-document-object&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt; object&lt;/a&gt;, then the
+  user agent must return the empty string. Otherwise, if the
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt; is not a
   scheme/host/port tuple, the user agent must throw a
   &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the user agent must
@@ -10092,7 +10092,7 @@
   &quot;non-HTTP&quot; API, &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error handling&lt;/a&gt;.
   &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On setting, if the document is a &lt;a href=#cookie-free-document-object&gt;cookie-free
+  &lt;p&gt;On setting, if the document is a &lt;a href=#cookie-averse-document-object&gt;cookie-averse
   &lt;code&gt;Document&lt;/code&gt; object&lt;/a&gt;, then the user agent must do
   nothing. Otherwise, if the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
   &lt;a href=#origin&gt;origin&lt;/a&gt; is not a scheme/host/port tuple, the user agent
@@ -10175,12 +10175,12 @@
 
   &lt;p&gt;Each document has a &lt;dfn id=current-document-readiness&gt;current document readiness&lt;/dfn&gt;. When a
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object is created, it must have its
-  &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; set to the string &quot;&lt;code title=&quot;&quot;&gt;loading&lt;/code&gt;&quot;
-  if the document is associated with an &lt;a href=#html-parser&gt;HTML parser&lt;/a&gt; or an
-  &lt;a href=#xml-parser&gt;XML parser&lt;/a&gt;, or to the string &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot; otherwise.
-  Various algorithms during page loading affect this value. When the
-  value is set, the user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt;
-  named &lt;dfn id=event-readystatechange title=event-readystatechange&gt;&lt;code&gt;readystatechange&lt;/code&gt;&lt;/dfn&gt;
+  &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; set to the string &quot;&lt;code title=&quot;&quot;&gt;loading&lt;/code&gt;&quot; if the document is associated with an
+  &lt;a href=#html-parser&gt;HTML parser&lt;/a&gt;, an &lt;a href=#xml-parser&gt;XML parser&lt;/a&gt;, or an XSLT
+  processor, and to the string &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;
+  otherwise. Various algorithms during page loading affect this value.
+  When the value is set, the user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple
+  event&lt;/a&gt; named &lt;dfn id=event-readystatechange title=event-readystatechange&gt;&lt;code&gt;readystatechange&lt;/code&gt;&lt;/dfn&gt;
   at the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is said to have an &lt;dfn id=active-parser&gt;active
@@ -13659,10 +13659,26 @@
   unaffected.) &lt;a href=#refsXSLT10&gt;[XSLT10]&lt;/a&gt;&lt;/p&gt; &lt;!-- note:
   version matters for this ref --&gt;
 
-  &lt;p class=note&gt;There are also additional comments regarding the
-  interaction of XSLT and HTML &lt;a href=#scriptTagXSLT&gt;in the
-  &lt;code&gt;script&lt;/code&gt; element section&lt;/a&gt;.&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;This specification does not specify precisely how XSLT processing
+  interacts with the &lt;a href=#html-parser&gt;HTML parser&lt;/a&gt; infrastructure (for
+  example, whether an XSLT processor acts as if it puts any elements
+  into a &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;). However, XSLT
+  processors must &lt;a href=#stop-parsing&gt;stop parsing&lt;/a&gt; if they successfully
+  complete, and must set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt;
+  first to &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot;&lt;!-- this synchronously
+  fires an event --&gt; and then to &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;&lt;!--
+  this also synchronously fires an event --&gt; if they are aborted.&lt;/p&gt;
 
+  &lt;hr&gt;&lt;p&gt;This specification does not specify how XSLT interacts with the
+  &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; algorithm, how it fits in
+  with the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, nor how error pages are to be
+  handled (e.g. whether XSLT errors are to replace an incremental XSLT
+  output, or are rendered inline, etc).&lt;/p&gt;
+
+  &lt;p class=note&gt;There are also additional non-normative comments
+  regarding the interaction of XSLT and HTML &lt;a href=#scriptTagXSLT&gt;in the &lt;code&gt;script&lt;/code&gt; element
+  section&lt;/a&gt;.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -17274,12 +17290,9 @@
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;This specification does not define how XSLT interacts with the
-  &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element (or, indeed, how XSLT processing
-  triggers the &lt;a href=#stop-parsing&gt;stop parsing&lt;/a&gt; steps, how it interacts with
-  the &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; algorithm, or how it
-  fits in with the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;). However, in the absence
-  of another specification actually defining this, here are some
-  guidelines for implementors, based on existing implementations:&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element. However, in the absence of another
+  specification actually defining this, here are some guidelines for
+  implementors, based on existing implementations:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;&lt;p&gt;When an XSLT transformation program is triggered by an &lt;code title=&quot;&quot;&gt;&lt;?xml-stylesheet?&gt;&lt;/code&gt; processing instruction and
    the browser implements a direct-to-DOM transformation,
@@ -65992,9 +66005,10 @@
   on &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects should, if there is an existing
   attempt to &lt;a href=#navigate&gt;navigate&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
   and that attempt is not currently running the &lt;a href=#unload-a-document&gt;unload a
-  document&lt;/a&gt; algorithm, cancel that &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; and any associated instances of
-  the &lt;a href=#fetch title=fetch&gt;fetch algorithm&lt;/a&gt;. Otherwise, it must
-  do nothing.&lt;/p&gt;
+  document&lt;/a&gt; algorithm, cancel that &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt;; then, it must &lt;a href=#abort-a-document title=&quot;abort
+  a document&quot;&gt;abort&lt;/a&gt; the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on
+  which it was invoked.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -93129,9 +93143,9 @@
   &lt;p&gt;Once the user agent &lt;dfn id=stop-parsing title=&quot;stop parsing&quot;&gt;stops parsing&lt;/dfn&gt;
   the document, the user agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;!-- this happens as part of one of the tasks that runs the parser --&gt;&lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; to
-   &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot; &lt;!-- this also synchronously fires an event --&gt; and
-   the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; to undefined.&lt;/li&gt;
+  &lt;ol&gt;&lt;!-- this happens as part of one of the tasks that runs the parser --&gt;&lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; to &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot; &lt;!-- this also synchronously fires an
+   event --&gt; and the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; to
+   undefined.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Pop &lt;em&gt;all&lt;/em&gt; the nodes off the &lt;a href=#stack-of-open-elements&gt;stack of open
    elements&lt;/a&gt;.&lt;/li&gt;
@@ -93227,6 +93241,12 @@
    &lt;li&gt;&lt;p&gt;Pop &lt;em&gt;all&lt;/em&gt; the nodes off the &lt;a href=#stack-of-open-elements&gt;stack of open
    elements&lt;/a&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; to &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot;&lt;!-- this synchronously fires an event
+   --&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; to &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;&lt;!-- this also synchronously fires an
+   event --&gt;.&lt;/li&gt;
+
    &lt;!-- anything else? this is things that happen when you call
    document.open() on a document that's still being parsed, or when
    you navigate a document that's still parsing, or navigate the

Modified: index
===================================================================
--- index	2012-07-09 23:27:03 UTC (rev 7168)
+++ index	2012-07-10 19:15:28 UTC (rev 7169)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 9 July 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 10 July 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -10069,7 +10069,7 @@
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was created.&lt;/p&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that falls into one of the
-  following conditions is a &lt;dfn id=cookie-free-document-object&gt;cookie-free &lt;code&gt;Document&lt;/code&gt;
+  following conditions is a &lt;dfn id=cookie-averse-document-object&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt;
   object&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that has no &lt;a href=#browsing-context&gt;browsing
@@ -10080,10 +10080,10 @@
    authority.&lt;/li&gt;
 
   &lt;/ul&gt;&lt;!--Other specifications can also define &lt;code&gt;Document&lt;/code&gt;
-  objects as being &lt;span title=&quot;cookie-free Document
-  object&quot;&gt;cookie-free &lt;code&gt;Document&lt;/code&gt; objects&lt;/span&gt;.--&gt;&lt;p id=sandboxCookies&gt;On getting, if the document is a
-  &lt;a href=#cookie-free-document-object&gt;cookie-free &lt;code&gt;Document&lt;/code&gt; object&lt;/a&gt;, then the user
-  agent must return the empty string. Otherwise, if the
+  objects as being &lt;span title=&quot;cookie-averse Document
+  object&quot;&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt; objects&lt;/span&gt;.--&gt;&lt;p id=sandboxCookies&gt;On getting, if the document is a
+  &lt;a href=#cookie-averse-document-object&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt; object&lt;/a&gt;, then the
+  user agent must return the empty string. Otherwise, if the
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt; is not a
   scheme/host/port tuple, the user agent must throw a
   &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the user agent must
@@ -10092,7 +10092,7 @@
   &quot;non-HTTP&quot; API, &lt;a href=#decoded-as-utf-8,-with-error-handling&gt;decoded as UTF-8, with error handling&lt;/a&gt;.
   &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On setting, if the document is a &lt;a href=#cookie-free-document-object&gt;cookie-free
+  &lt;p&gt;On setting, if the document is a &lt;a href=#cookie-averse-document-object&gt;cookie-averse
   &lt;code&gt;Document&lt;/code&gt; object&lt;/a&gt;, then the user agent must do
   nothing. Otherwise, if the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
   &lt;a href=#origin&gt;origin&lt;/a&gt; is not a scheme/host/port tuple, the user agent
@@ -10175,12 +10175,12 @@
 
   &lt;p&gt;Each document has a &lt;dfn id=current-document-readiness&gt;current document readiness&lt;/dfn&gt;. When a
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object is created, it must have its
-  &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; set to the string &quot;&lt;code title=&quot;&quot;&gt;loading&lt;/code&gt;&quot;
-  if the document is associated with an &lt;a href=#html-parser&gt;HTML parser&lt;/a&gt; or an
-  &lt;a href=#xml-parser&gt;XML parser&lt;/a&gt;, or to the string &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot; otherwise.
-  Various algorithms during page loading affect this value. When the
-  value is set, the user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt;
-  named &lt;dfn id=event-readystatechange title=event-readystatechange&gt;&lt;code&gt;readystatechange&lt;/code&gt;&lt;/dfn&gt;
+  &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; set to the string &quot;&lt;code title=&quot;&quot;&gt;loading&lt;/code&gt;&quot; if the document is associated with an
+  &lt;a href=#html-parser&gt;HTML parser&lt;/a&gt;, an &lt;a href=#xml-parser&gt;XML parser&lt;/a&gt;, or an XSLT
+  processor, and to the string &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;
+  otherwise. Various algorithms during page loading affect this value.
+  When the value is set, the user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple
+  event&lt;/a&gt; named &lt;dfn id=event-readystatechange title=event-readystatechange&gt;&lt;code&gt;readystatechange&lt;/code&gt;&lt;/dfn&gt;
   at the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is said to have an &lt;dfn id=active-parser&gt;active
@@ -13659,10 +13659,26 @@
   unaffected.) &lt;a href=#refsXSLT10&gt;[XSLT10]&lt;/a&gt;&lt;/p&gt; &lt;!-- note:
   version matters for this ref --&gt;
 
-  &lt;p class=note&gt;There are also additional comments regarding the
-  interaction of XSLT and HTML &lt;a href=#scriptTagXSLT&gt;in the
-  &lt;code&gt;script&lt;/code&gt; element section&lt;/a&gt;.&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;This specification does not specify precisely how XSLT processing
+  interacts with the &lt;a href=#html-parser&gt;HTML parser&lt;/a&gt; infrastructure (for
+  example, whether an XSLT processor acts as if it puts any elements
+  into a &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt;). However, XSLT
+  processors must &lt;a href=#stop-parsing&gt;stop parsing&lt;/a&gt; if they successfully
+  complete, and must set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt;
+  first to &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot;&lt;!-- this synchronously
+  fires an event --&gt; and then to &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;&lt;!--
+  this also synchronously fires an event --&gt; if they are aborted.&lt;/p&gt;
 
+  &lt;hr&gt;&lt;p&gt;This specification does not specify how XSLT interacts with the
+  &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; algorithm, how it fits in
+  with the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, nor how error pages are to be
+  handled (e.g. whether XSLT errors are to replace an incremental XSLT
+  output, or are rendered inline, etc).&lt;/p&gt;
+
+  &lt;p class=note&gt;There are also additional non-normative comments
+  regarding the interaction of XSLT and HTML &lt;a href=#scriptTagXSLT&gt;in the &lt;code&gt;script&lt;/code&gt; element
+  section&lt;/a&gt;.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -17274,12 +17290,9 @@
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;This specification does not define how XSLT interacts with the
-  &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element (or, indeed, how XSLT processing
-  triggers the &lt;a href=#stop-parsing&gt;stop parsing&lt;/a&gt; steps, how it interacts with
-  the &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; algorithm, or how it
-  fits in with the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;). However, in the absence
-  of another specification actually defining this, here are some
-  guidelines for implementors, based on existing implementations:&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element. However, in the absence of another
+  specification actually defining this, here are some guidelines for
+  implementors, based on existing implementations:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;&lt;p&gt;When an XSLT transformation program is triggered by an &lt;code title=&quot;&quot;&gt;&lt;?xml-stylesheet?&gt;&lt;/code&gt; processing instruction and
    the browser implements a direct-to-DOM transformation,
@@ -65992,9 +66005,10 @@
   on &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects should, if there is an existing
   attempt to &lt;a href=#navigate&gt;navigate&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
   and that attempt is not currently running the &lt;a href=#unload-a-document&gt;unload a
-  document&lt;/a&gt; algorithm, cancel that &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; and any associated instances of
-  the &lt;a href=#fetch title=fetch&gt;fetch algorithm&lt;/a&gt;. Otherwise, it must
-  do nothing.&lt;/p&gt;
+  document&lt;/a&gt; algorithm, cancel that &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt;; then, it must &lt;a href=#abort-a-document title=&quot;abort
+  a document&quot;&gt;abort&lt;/a&gt; the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on
+  which it was invoked.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -93129,9 +93143,9 @@
   &lt;p&gt;Once the user agent &lt;dfn id=stop-parsing title=&quot;stop parsing&quot;&gt;stops parsing&lt;/dfn&gt;
   the document, the user agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;!-- this happens as part of one of the tasks that runs the parser --&gt;&lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; to
-   &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot; &lt;!-- this also synchronously fires an event --&gt; and
-   the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; to undefined.&lt;/li&gt;
+  &lt;ol&gt;&lt;!-- this happens as part of one of the tasks that runs the parser --&gt;&lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; to &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot; &lt;!-- this also synchronously fires an
+   event --&gt; and the &lt;a href=#insertion-point&gt;insertion point&lt;/a&gt; to
+   undefined.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Pop &lt;em&gt;all&lt;/em&gt; the nodes off the &lt;a href=#stack-of-open-elements&gt;stack of open
    elements&lt;/a&gt;.&lt;/li&gt;
@@ -93227,6 +93241,12 @@
    &lt;li&gt;&lt;p&gt;Pop &lt;em&gt;all&lt;/em&gt; the nodes off the &lt;a href=#stack-of-open-elements&gt;stack of open
    elements&lt;/a&gt;.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; to &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot;&lt;!-- this synchronously fires an event
+   --&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; to &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;&lt;!-- this also synchronously fires an
+   event --&gt;.&lt;/li&gt;
+
    &lt;!-- anything else? this is things that happen when you call
    document.open() on a document that's still being parsed, or when
    you navigate a document that's still parsing, or navigate the

Modified: source
===================================================================
--- source	2012-07-09 23:27:03 UTC (rev 7168)
+++ source	2012-07-10 19:15:28 UTC (rev 7169)
@@ -10287,7 +10287,7 @@
   &lt;code&gt;Document&lt;/code&gt; was created.&lt;/p&gt;
 
   &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; object that falls into one of the
-  following conditions is a &lt;dfn&gt;cookie-free &lt;code&gt;Document&lt;/code&gt;
+  following conditions is a &lt;dfn&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt;
   object&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ul&gt;
@@ -10302,12 +10302,12 @@
   &lt;/ul&gt;
 
   &lt;!--Other specifications can also define &lt;code&gt;Document&lt;/code&gt;
-  objects as being &lt;span title=&quot;cookie-free Document
-  object&quot;&gt;cookie-free &lt;code&gt;Document&lt;/code&gt; objects&lt;/span&gt;.--&gt;
+  objects as being &lt;span title=&quot;cookie-averse Document
+  object&quot;&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt; objects&lt;/span&gt;.--&gt;
 
   &lt;p id=&quot;sandboxCookies&quot;&gt;On getting, if the document is a
-  &lt;span&gt;cookie-free &lt;code&gt;Document&lt;/code&gt; object&lt;/span&gt;, then the user
-  agent must return the empty string. Otherwise, if the
+  &lt;span&gt;cookie-averse &lt;code&gt;Document&lt;/code&gt; object&lt;/span&gt;, then the
+  user agent must return the empty string. Otherwise, if the
   &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;origin&lt;/span&gt; is not a
   scheme/host/port tuple, the user agent must throw a
   &lt;code&gt;SecurityError&lt;/code&gt; exception. Otherwise, the user agent must
@@ -10316,7 +10316,7 @@
   &quot;non-HTTP&quot; API, &lt;span&gt;decoded as UTF-8, with error handling&lt;/span&gt;.
   &lt;a href=&quot;#refsCOOKIES&quot;&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On setting, if the document is a &lt;span&gt;cookie-free
+  &lt;p&gt;On setting, if the document is a &lt;span&gt;cookie-averse
   &lt;code&gt;Document&lt;/code&gt; object&lt;/span&gt;, then the user agent must do
   nothing. Otherwise, if the &lt;code&gt;Document&lt;/code&gt;'s
   &lt;span&gt;origin&lt;/span&gt; is not a scheme/host/port tuple, the user agent
@@ -10326,7 +10326,8 @@
   set-cookie-string&quot;&gt;receiving a set-cookie-string&lt;/span&gt; for
   &lt;span&gt;the document's address&lt;/span&gt; via a &quot;non-HTTP&quot; API, consisting
   of the new value encoded as UTF-8. &lt;a
-  href=&quot;#refsCOOKIES&quot;&gt;[COOKIES]&lt;/a&gt; &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
+  href=&quot;#refsCOOKIES&quot;&gt;[COOKIES]&lt;/a&gt; &lt;a
+  href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Since the &lt;code
   title=&quot;dom-document-cookie&quot;&gt;cookie&lt;/code&gt; attribute is accessible
@@ -10420,12 +10421,13 @@
 
   &lt;p&gt;Each document has a &lt;dfn&gt;current document readiness&lt;/dfn&gt;. When a
   &lt;code&gt;Document&lt;/code&gt; object is created, it must have its
-  &lt;span&gt;current document readiness&lt;/span&gt; set to the string &quot;&lt;code title=&quot;&quot;&gt;loading&lt;/code&gt;&quot;
-  if the document is associated with an &lt;span&gt;HTML parser&lt;/span&gt; or an
-  &lt;span&gt;XML parser&lt;/span&gt;, or to the string &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot; otherwise.
-  Various algorithms during page loading affect this value. When the
-  value is set, the user agent must &lt;span&gt;fire a simple event&lt;/span&gt;
-  named &lt;dfn
+  &lt;span&gt;current document readiness&lt;/span&gt; set to the string &quot;&lt;code
+  title=&quot;&quot;&gt;loading&lt;/code&gt;&quot; if the document is associated with an
+  &lt;span&gt;HTML parser&lt;/span&gt;, an &lt;span&gt;XML parser&lt;/span&gt;, or an XSLT
+  processor, and to the string &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;
+  otherwise. Various algorithms during page loading affect this value.
+  When the value is set, the user agent must &lt;span&gt;fire a simple
+  event&lt;/span&gt; named &lt;dfn
   title=&quot;event-readystatechange&quot;&gt;&lt;code&gt;readystatechange&lt;/code&gt;&lt;/dfn&gt;
   at the &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
 
@@ -14406,10 +14408,31 @@
   unaffected.) &lt;a href=&quot;#refsXSLT10&quot;&gt;[XSLT10]&lt;/a&gt;&lt;/p&gt; &lt;!-- note:
   version matters for this ref --&gt;
 
-  &lt;p class=&quot;note&quot;&gt;There are also additional comments regarding the
-  interaction of XSLT and HTML &lt;a href=&quot;#scriptTagXSLT&quot;&gt;in the
-  &lt;code&gt;script&lt;/code&gt; element section&lt;/a&gt;.&lt;/p&gt;
+  &lt;hr&gt;
 
+  &lt;p&gt;This specification does not specify precisely how XSLT processing
+  interacts with the &lt;span&gt;HTML parser&lt;/span&gt; infrastructure (for
+  example, whether an XSLT processor acts as if it puts any elements
+  into a &lt;span&gt;stack of open elements&lt;/span&gt;). However, XSLT
+  processors must &lt;span&gt;stop parsing&lt;/span&gt; if they successfully
+  complete, and must set the &lt;span&gt;current document readiness&lt;/span&gt;
+  first to &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot;&lt;!-- this synchronously
+  fires an event --&gt; and then to &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;&lt;!--
+  this also synchronously fires an event --&gt; if they are aborted.&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;This specification does not specify how XSLT interacts with the
+  &lt;span title=&quot;navigate&quot;&gt;navigation&lt;/span&gt; algorithm, how it fits in
+  with the &lt;span&gt;event loop&lt;/span&gt;, nor how error pages are to be
+  handled (e.g. whether XSLT errors are to replace an incremental XSLT
+  output, or are rendered inline, etc).&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;There are also additional non-normative comments
+  regarding the interaction of XSLT and HTML &lt;a
+  href=&quot;#scriptTagXSLT&quot;&gt;in the &lt;code&gt;script&lt;/code&gt; element
+  section&lt;/a&gt;.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -18531,12 +18554,9 @@
   &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
 
   &lt;p&gt;This specification does not define how XSLT interacts with the
-  &lt;code&gt;script&lt;/code&gt; element (or, indeed, how XSLT processing
-  triggers the &lt;span&gt;stop parsing&lt;/span&gt; steps, how it interacts with
-  the &lt;span title=&quot;navigate&quot;&gt;navigation&lt;/span&gt; algorithm, or how it
-  fits in with the &lt;span&gt;event loop&lt;/span&gt;). However, in the absence
-  of another specification actually defining this, here are some
-  guidelines for implementors, based on existing implementations:&lt;/p&gt;
+  &lt;code&gt;script&lt;/code&gt; element. However, in the absence of another
+  specification actually defining this, here are some guidelines for
+  implementors, based on existing implementations:&lt;/p&gt;
 
   &lt;ul&gt;
 
@@ -77338,9 +77358,10 @@
   attempt to &lt;span&gt;navigate&lt;/span&gt; the &lt;span&gt;browsing context&lt;/span&gt;
   and that attempt is not currently running the &lt;span&gt;unload a
   document&lt;/span&gt; algorithm, cancel that &lt;span
-  title=&quot;navigate&quot;&gt;navigation&lt;/span&gt; and any associated instances of
-  the &lt;span title=&quot;fetch&quot;&gt;fetch algorithm&lt;/span&gt;. Otherwise, it must
-  do nothing.&lt;/p&gt;
+  title=&quot;navigate&quot;&gt;navigation&lt;/span&gt;; then, it must &lt;span title=&quot;abort
+  a document&quot;&gt;abort&lt;/span&gt; the &lt;span&gt;active document&lt;/span&gt; of the
+  &lt;span&gt;browsing context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object on
+  which it was invoked.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -108002,9 +108023,10 @@
 
    &lt;!-- this happens as part of one of the tasks that runs the parser --&gt;
 
-   &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current document readiness&lt;/span&gt; to
-   &quot;&lt;code title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot; &lt;!-- this also synchronously fires an event --&gt; and
-   the &lt;span&gt;insertion point&lt;/span&gt; to undefined.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current document readiness&lt;/span&gt; to &quot;&lt;code
+   title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot; &lt;!-- this also synchronously fires an
+   event --&gt; and the &lt;span&gt;insertion point&lt;/span&gt; to
+   undefined.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Pop &lt;em&gt;all&lt;/em&gt; the nodes off the &lt;span&gt;stack of open
    elements&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -108117,6 +108139,14 @@
    &lt;li&gt;&lt;p&gt;Pop &lt;em&gt;all&lt;/em&gt; the nodes off the &lt;span&gt;stack of open
    elements&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current document readiness&lt;/span&gt; to &quot;&lt;code
+   title=&quot;&quot;&gt;interactive&lt;/code&gt;&quot;&lt;!-- this synchronously fires an event
+   --&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current document readiness&lt;/span&gt; to &quot;&lt;code
+   title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;&lt;!-- this also synchronously fires an
+   event --&gt;.&lt;/p&gt;&lt;/li&gt;
+
    &lt;!-- anything else? this is things that happen when you call
    document.open() on a document that's still being parsed, or when
    you navigate a document that's still parsing, or navigate the


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014033.html">[html5] r7168 - [giow] (1) Fix &lt;iframe seamless&gt; so that it doesn't	make it impossible to even l [...]
</A></li>
	<LI>Next message: <A HREF="014035.html">[html5] r7170 - [e] (0) fix obsolete non-normative text Fixing	https://www.w3.org/Bugs/Public/sh [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14034">[ date ]</a>
              <a href="thread.html#14034">[ thread ]</a>
              <a href="subject.html#14034">[ subject ]</a>
              <a href="author.html#14034">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
