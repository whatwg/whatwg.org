<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7236 - [giow] (0) Recast how the origin handling is done	for data: URLs in workers, and [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7236%20-%20%5Bgiow%5D%20%280%29%20Recast%20how%20the%20origin%20handling%20is%20done%0A%09for%20data%3A%20URLs%20in%20workers%2C%20and%20%5B...%5D&In-Reply-To=%3C20120809182954.20A221C8C08D%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014100.html">
   <LINK REL="Next"  HREF="014102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7236 - [giow] (0) Recast how the origin handling is done	for data: URLs in workers, and [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7236%20-%20%5Bgiow%5D%20%280%29%20Recast%20how%20the%20origin%20handling%20is%20done%0A%09for%20data%3A%20URLs%20in%20workers%2C%20and%20%5B...%5D&In-Reply-To=%3C20120809182954.20A221C8C08D%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7236 - [giow] (0) Recast how the origin handling is done	for data: URLs in workers, and [...]">whatwg at whatwg.org
       </A><BR>
    <I>Thu Aug  9 11:29:54 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014100.html">[html5] r7235 - [giow] (0) Improve compatibiliy for legacy	features. Fixing https://www.w3.org/B [...]
</A></li>
        <LI>Next message: <A HREF="014102.html">[html5] r7237 - [e] (0) Be more precise in the wording around	changes to xml:base attributes. Al [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14101">[ date ]</a>
              <a href="thread.html#14101">[ thread ]</a>
              <a href="subject.html#14101">[ subject ]</a>
              <a href="author.html#14101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-08-09 11:29:52 -0700 (Thu, 09 Aug 2012)
New Revision: 7236

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Recast how the origin handling is done for data: URLs in workers, and fix the shared worker origin handling for data: URLs so that you can actually reconnect to a data: shared worker.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15095">https://www.w3.org/Bugs/Public/show_bug.cgi?id=15095</A>
Affected topics: Security, Web Workers

Modified: complete.html
===================================================================
--- complete.html	2012-08-09 18:02:50 UTC (rev 7235)
+++ complete.html	2012-08-09 18:29:52 UTC (rev 7236)
@@ -1037,16 +1037,15 @@
        &lt;li&gt;&lt;a href=#the-workerglobalscope-common-interface&gt;&lt;span class=secno&gt;9.2.1.1 &lt;/span&gt;The &lt;code&gt;WorkerGlobalScope&lt;/code&gt; common interface&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;DedicatedWorkerGlobalScope&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#origins-of-workers&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;Origins of workers&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-event-loop&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The event loop&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=&quot;#the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;The worker's lifetime&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;9.2.7 &lt;/span&gt;Creating workers&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#the-event-loop&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The event loop&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=&quot;#the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The worker's lifetime&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Creating workers&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;9.2.7.1 &lt;/span&gt;The &lt;code&gt;AbstractWorker&lt;/code&gt; abstract interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;9.2.7.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;9.2.7.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;9.2.6.1 &lt;/span&gt;The &lt;code&gt;AbstractWorker&lt;/code&gt; abstract interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;9.2.6.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;9.2.6.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#apis-available-to-workers&gt;&lt;span class=secno&gt;9.3 &lt;/span&gt;APIs available to workers&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#importing-scripts-and-libraries&gt;&lt;span class=secno&gt;9.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/a&gt;&lt;/li&gt;
@@ -67903,31 +67902,13 @@
 
    &lt;dd&gt;
 
-    &lt;dl class=switch&gt;&lt;dt&gt;If the URL is a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; used in a &lt;code title=dom-Worker&gt;&lt;a href=#dom-worker&gt;Worker()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-SharedWorker&gt;&lt;a href=#dom-sharedworker&gt;SharedWorker()&lt;/a&gt;&lt;/code&gt; constructor&lt;/dt&gt;
+    &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
+    origin&lt;/a&gt; of the &lt;a href=#url&gt;URL&lt;/a&gt; are the origin defined in
+    &lt;cite&gt;The Web Origin Concept&lt;/cite&gt;. &lt;a href=#refsORIGIN&gt;[ORIGIN]&lt;/a&gt;&lt;/p&gt;
 
-     &lt;dd&gt;
+   &lt;/dd&gt;
 
-      &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
-      origin&lt;/a&gt; of the &lt;a href=#url&gt;URL&lt;/a&gt; are the
-      &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; of
-      the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; at the time that the constructor
-      is invoked. (They are not &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;aliases&lt;/a&gt;.)&lt;/p&gt;
 
-     &lt;/dd&gt;
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
-      origin&lt;/a&gt; of the &lt;a href=#url&gt;URL&lt;/a&gt; are the origin defined in
-      &lt;cite&gt;The Web Origin Concept&lt;/cite&gt;. &lt;a href=#refsORIGIN&gt;[ORIGIN]&lt;/a&gt;&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/dd&gt;
-
-
    &lt;dt&gt;For &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -81778,7 +81759,7 @@
    &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag to
    true. (This prevents any further tasks from being queued.)&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
   corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
   event types&lt;/a&gt;) that must be supported, as IDL attributes, by
   objects implementing the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
@@ -81788,8 +81769,19 @@
    &lt;tbody&gt;&lt;!-- v2-onclose    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-WorkerGlobalScope-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; --&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-onerror title=handler-WorkerGlobalScope-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-onoffline title=handler-WorkerGlobalScope-onoffline&gt;&lt;code&gt;onoffline&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-offline&gt;&lt;a href=#event-offline&gt;offline&lt;/a&gt;&lt;/code&gt; &lt;!-- new --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-ononline title=handler-WorkerGlobalScope-ononline&gt;&lt;code&gt;ononline&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-online&gt;&lt;a href=#event-online&gt;online&lt;/a&gt;&lt;/code&gt; &lt;!-- new --&gt;
-  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;/table&gt;&lt;hr&gt;&lt;p&gt;Each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object has a &lt;dfn id=worker-origin&gt;worker
+  origin&lt;/dfn&gt; that is set when the object is created.&lt;/p&gt;
 
+  &lt;p class=note&gt;For &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;, this is the &lt;a href=#origin&gt;origin&lt;/a&gt;
+  of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; that called the constructor. For
+  other &lt;a href=#url title=URL&gt;URLs&lt;/a&gt;, this is the &lt;a href=#origin&gt;origin&lt;/a&gt;
+  of the value of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; given in the worker's
+  &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+
+
+  &lt;h5 id=dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+
   &lt;pre class=idl&gt;interface &lt;dfn id=dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; {
   void &lt;a href=#dom-dedicatedworkerglobalscope-postmessage title=dom-DedicatedWorkerGlobalScope-postMessage&gt;postMessage&lt;/a&gt;(any message, optional sequence&lt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&gt; transfer);&lt;!--
   &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-DedicatedWorkerGlobalScope-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
@@ -81874,26 +81866,9 @@
   --&gt;
 
 
-  &lt;h4 id=origins-of-workers&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;Origins of workers&lt;/h4&gt;
 
-  &lt;p&gt;Both the &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
-  origin&lt;/a&gt; of scripts running in a worker are the
-  &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that was
-  obtained after &lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;resolving&lt;/a&gt; the
-  argument to the &lt;code title=dom-Worker&gt;&lt;a href=#dom-worker&gt;Worker()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-SharedWorker&gt;&lt;a href=#dom-sharedworker&gt;SharedWorker()&lt;/a&gt;&lt;/code&gt; constructor that
-  initially created the worker, in the algorithm for that
-  constructor.&lt;/p&gt;
+  &lt;h4 id=the-event-loop&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The event loop&lt;/h4&gt;
 
-  &lt;p class=note&gt;For &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;, this is the &lt;a href=#origin&gt;origin&lt;/a&gt;
-  of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; that called the constructor. For
-  other &lt;a href=#url title=URL&gt;URLs&lt;/a&gt;, this is the
-  &lt;a href=#origin&gt;origin&lt;/a&gt; of the value of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;
-  given in the worker's &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
-
-
-
-  &lt;h4 id=the-event-loop&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The event loop&lt;/h4&gt;
-
   &lt;p&gt;Each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object has an &lt;a href=#event-loop&gt;event
   loop&lt;/a&gt; distinct from those defined for &lt;a href=#unit-of-related-similar-origin-browsing-contexts title=&quot;unit of
   related similar-origin browsing contexts&quot;&gt;units of related
@@ -81918,7 +81893,7 @@
 
 
 
-  &lt;h4 id=&quot;the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;The worker's lifetime&lt;/h4&gt;
+  &lt;h4 id=&quot;the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The worker's lifetime&lt;/h4&gt;
 
   &lt;p&gt;Workers communicate with other workers and with &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt; through &lt;a href=#channel-messaging title=&quot;channel messaging&quot;&gt;message channels&lt;/a&gt; and their
   &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects.&lt;/p&gt;
@@ -81990,7 +81965,7 @@
   &lt;a href=#permissible-worker&gt;permissible worker&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=processing-model-4&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-4&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with
   &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#browsing-context&gt;browsing
@@ -82276,7 +82251,7 @@
   &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task source&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Runtime script errors&lt;/h4&gt;
+  &lt;h4 id=runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Runtime script errors&lt;/h4&gt;
 
   &lt;p&gt;Whenever an uncaught runtime script error occurs in one of the
   worker's scripts, if the error did not occur while handling a
@@ -82351,9 +82326,9 @@
 
 
 
-  &lt;h4 id=creating-workers&gt;&lt;span class=secno&gt;9.2.7 &lt;/span&gt;Creating workers&lt;/h4&gt;
+  &lt;h4 id=creating-workers&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Creating workers&lt;/h4&gt;
 
-  &lt;h5 id=the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;9.2.7.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt;&lt;/code&gt; abstract interface&lt;/h5&gt;
+  &lt;h5 id=the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;9.2.6.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt;&lt;/code&gt; abstract interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[NoInterfaceObject]
 interface &lt;dfn id=abstractworker&gt;AbstractWorker&lt;/dfn&gt; {
@@ -82369,7 +82344,7 @@
   &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-abstractworker-onerror title=handler-AbstractWorker-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
 &lt;!-- v2-onclose    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-AbstractWorker-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; --&gt;
-  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;9.2.7.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;9.2.6.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL)]
 interface &lt;dfn id=worker&gt;Worker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
@@ -82431,24 +82406,25 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the resulting &lt;a href=#absolute-url&gt;absolute
-    URL&lt;/a&gt; is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
-    origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, then throw a
-    &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+    &lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component of
+    the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is not &quot;&lt;code title=data-protocol&gt;data&lt;/code&gt;&quot;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of
+    the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the origin of the &lt;a href=#entry-script&gt;entry
+    script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
+    and abort these steps.&lt;/p&gt;
 
     &lt;p class=note&gt;Thus, scripts must either be external files with
-    the same scheme, host, and port as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt; (the
-    latter are special-cases in the definition of
-    &lt;a href=#origin&gt;origin&lt;/a&gt;). For example, you can't load a script from a
-    &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt;
-    page couldn't start workers using scripts with &lt;code&gt;http:&lt;/code&gt;
-    URLs.&lt;/p&gt;
+    the same scheme, host, and port as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;. For
+    example, you can't load a script from a &lt;a href=#javascript-protocol title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an
+    &lt;code&gt;https:&lt;/code&gt; page couldn't start workers using scripts with
+    &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
-   object. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this new
-   object.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
+   whose &lt;a href=#worker-origin&gt;worker origin&lt;/a&gt; is the origin of the &lt;a href=#entry-script&gt;entry
+   script&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this
+   new object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object, associated with
    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; be this new object.&lt;/li&gt;
@@ -82527,7 +82503,7 @@
   implementing the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
 
 
-  &lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;9.2.7.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;9.2.6.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name)]
 interface &lt;dfn id=sharedworker&gt;SharedWorker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
@@ -82558,18 +82534,19 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is
-    not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the origin of the
-    &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt;
-    exception.&lt;/p&gt;
+    &lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component of
+    &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is not &quot;&lt;code title=data-protocol&gt;data&lt;/code&gt;&quot;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of
+    &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is not the &lt;a href=#same-origin title=&quot;same
+    origin&quot;&gt;same&lt;/a&gt; as the origin of the &lt;a href=#entry-script&gt;entry
+    script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
+    and abort these steps.&lt;/p&gt;
 
     &lt;p class=note&gt;Thus, scripts must either be external files with
-    the same scheme, host, and port as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt; (the
-    latter are special-cases in the definition of
-    &lt;a href=#origin&gt;origin&lt;/a&gt;). For example, you can't load a script from a
-    &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt;
-    page couldn't start workers using scripts with &lt;code&gt;http:&lt;/code&gt;
-    URLs.&lt;/p&gt;
+    the same scheme, host, and port as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;. For
+    example, you can't load a script from a &lt;a href=#javascript-protocol title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an
+    &lt;code&gt;https:&lt;/code&gt; page couldn't start workers using scripts with
+    &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -82604,10 +82581,11 @@
       &lt;p&gt;If &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; is not the empty string and there
       exists a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag is
       false, whose &lt;code title=dom-WorkerGlobalScope-name&gt;name&lt;/code&gt; attribute is
-      exactly equal to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;, and whose &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;location&lt;/a&gt;&lt;/code&gt; attribute
-      represents an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; with the &lt;a href=#same-origin&gt;same
-      origin&lt;/a&gt; as &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be that
-      &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+      exactly equal to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;, and whose
+      &lt;a href=#worker-origin&gt;worker origin&lt;/a&gt; is the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as
+      &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;worker
+      global scope&lt;/var&gt; be that &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+      object.&lt;/p&gt;
 
       &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; is the empty string
       and there exists a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
@@ -82696,9 +82674,10 @@
 
       &lt;/ol&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
-     object. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this new
-     object.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
+     whose &lt;a href=#worker-origin&gt;worker origin&lt;/a&gt; is the origin of the &lt;a href=#entry-script&gt;entry
+     script&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be
+     this new object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/li&gt;
 
@@ -82801,14 +82780,6 @@
    &lt;li&gt;&lt;p&gt;If any fail, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
    exception.&lt;/li&gt;
 
-&lt;!--
-   &lt;li&gt;&lt;p&gt;If any of the resulting &lt;span title=&quot;absolute URL&quot;&gt;absolute
-   URLs&lt;/span&gt; have an &lt;span&gt;origin&lt;/span&gt; that is not the &lt;span
-   title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the origin of the script that
-   invoked the method, then throw a &lt;code&gt;SecurityError&lt;/code&gt;
-   exception.&lt;/p&gt;&lt;/li&gt;
---&gt;
-
    &lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;a href=#fetch&gt;fetch&lt;/a&gt; each resource identified by the

Modified: index
===================================================================
--- index	2012-08-09 18:02:50 UTC (rev 7235)
+++ index	2012-08-09 18:29:52 UTC (rev 7236)
@@ -1037,16 +1037,15 @@
        &lt;li&gt;&lt;a href=#the-workerglobalscope-common-interface&gt;&lt;span class=secno&gt;9.2.1.1 &lt;/span&gt;The &lt;code&gt;WorkerGlobalScope&lt;/code&gt; common interface&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;DedicatedWorkerGlobalScope&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#origins-of-workers&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;Origins of workers&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-event-loop&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The event loop&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=&quot;#the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;The worker's lifetime&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;9.2.7 &lt;/span&gt;Creating workers&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#the-event-loop&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The event loop&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=&quot;#the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The worker's lifetime&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Creating workers&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;9.2.7.1 &lt;/span&gt;The &lt;code&gt;AbstractWorker&lt;/code&gt; abstract interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;9.2.7.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;9.2.7.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;9.2.6.1 &lt;/span&gt;The &lt;code&gt;AbstractWorker&lt;/code&gt; abstract interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;9.2.6.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;9.2.6.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#apis-available-to-workers&gt;&lt;span class=secno&gt;9.3 &lt;/span&gt;APIs available to workers&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#importing-scripts-and-libraries&gt;&lt;span class=secno&gt;9.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/a&gt;&lt;/li&gt;
@@ -67903,31 +67902,13 @@
 
    &lt;dd&gt;
 
-    &lt;dl class=switch&gt;&lt;dt&gt;If the URL is a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt; used in a &lt;code title=dom-Worker&gt;&lt;a href=#dom-worker&gt;Worker()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-SharedWorker&gt;&lt;a href=#dom-sharedworker&gt;SharedWorker()&lt;/a&gt;&lt;/code&gt; constructor&lt;/dt&gt;
+    &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
+    origin&lt;/a&gt; of the &lt;a href=#url&gt;URL&lt;/a&gt; are the origin defined in
+    &lt;cite&gt;The Web Origin Concept&lt;/cite&gt;. &lt;a href=#refsORIGIN&gt;[ORIGIN]&lt;/a&gt;&lt;/p&gt;
 
-     &lt;dd&gt;
+   &lt;/dd&gt;
 
-      &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
-      origin&lt;/a&gt; of the &lt;a href=#url&gt;URL&lt;/a&gt; are the
-      &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; of
-      the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; at the time that the constructor
-      is invoked. (They are not &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;aliases&lt;/a&gt;.)&lt;/p&gt;
 
-     &lt;/dd&gt;
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
-      origin&lt;/a&gt; of the &lt;a href=#url&gt;URL&lt;/a&gt; are the origin defined in
-      &lt;cite&gt;The Web Origin Concept&lt;/cite&gt;. &lt;a href=#refsORIGIN&gt;[ORIGIN]&lt;/a&gt;&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/dd&gt;
-
-
    &lt;dt&gt;For &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -81778,7 +81759,7 @@
    &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag to
    true. (This prevents any further tasks from being queued.)&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their
   corresponding &lt;a href=#event-handler-event-type title=&quot;event handler event type&quot;&gt;event handler
   event types&lt;/a&gt;) that must be supported, as IDL attributes, by
   objects implementing the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
@@ -81788,8 +81769,19 @@
    &lt;tbody&gt;&lt;!-- v2-onclose    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-WorkerGlobalScope-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; --&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-onerror title=handler-WorkerGlobalScope-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-onoffline title=handler-WorkerGlobalScope-onoffline&gt;&lt;code&gt;onoffline&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-offline&gt;&lt;a href=#event-offline&gt;offline&lt;/a&gt;&lt;/code&gt; &lt;!-- new --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-workerglobalscope-ononline title=handler-WorkerGlobalScope-ononline&gt;&lt;code&gt;ononline&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-online&gt;&lt;a href=#event-online&gt;online&lt;/a&gt;&lt;/code&gt; &lt;!-- new --&gt;
-  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;/table&gt;&lt;hr&gt;&lt;p&gt;Each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object has a &lt;dfn id=worker-origin&gt;worker
+  origin&lt;/dfn&gt; that is set when the object is created.&lt;/p&gt;
 
+  &lt;p class=note&gt;For &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;, this is the &lt;a href=#origin&gt;origin&lt;/a&gt;
+  of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; that called the constructor. For
+  other &lt;a href=#url title=URL&gt;URLs&lt;/a&gt;, this is the &lt;a href=#origin&gt;origin&lt;/a&gt;
+  of the value of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; given in the worker's
+  &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+
+
+  &lt;h5 id=dedicated-workers-and-the-dedicatedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+
   &lt;pre class=idl&gt;interface &lt;dfn id=dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/dfn&gt; : &lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt; {
   void &lt;a href=#dom-dedicatedworkerglobalscope-postmessage title=dom-DedicatedWorkerGlobalScope-postMessage&gt;postMessage&lt;/a&gt;(any message, optional sequence&lt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&gt; transfer);&lt;!--
   &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-DedicatedWorkerGlobalScope-startConversation&quot;&gt;startConversation&lt;/span&gt;(any message);--&gt;
@@ -81874,26 +81866,9 @@
   --&gt;
 
 
-  &lt;h4 id=origins-of-workers&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;Origins of workers&lt;/h4&gt;
 
-  &lt;p&gt;Both the &lt;a href=#origin&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
-  origin&lt;/a&gt; of scripts running in a worker are the
-  &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that was
-  obtained after &lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;resolving&lt;/a&gt; the
-  argument to the &lt;code title=dom-Worker&gt;&lt;a href=#dom-worker&gt;Worker()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-SharedWorker&gt;&lt;a href=#dom-sharedworker&gt;SharedWorker()&lt;/a&gt;&lt;/code&gt; constructor that
-  initially created the worker, in the algorithm for that
-  constructor.&lt;/p&gt;
+  &lt;h4 id=the-event-loop&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The event loop&lt;/h4&gt;
 
-  &lt;p class=note&gt;For &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;, this is the &lt;a href=#origin&gt;origin&lt;/a&gt;
-  of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; that called the constructor. For
-  other &lt;a href=#url title=URL&gt;URLs&lt;/a&gt;, this is the
-  &lt;a href=#origin&gt;origin&lt;/a&gt; of the value of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;
-  given in the worker's &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
-
-
-
-  &lt;h4 id=the-event-loop&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The event loop&lt;/h4&gt;
-
   &lt;p&gt;Each &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object has an &lt;a href=#event-loop&gt;event
   loop&lt;/a&gt; distinct from those defined for &lt;a href=#unit-of-related-similar-origin-browsing-contexts title=&quot;unit of
   related similar-origin browsing contexts&quot;&gt;units of related
@@ -81918,7 +81893,7 @@
 
 
 
-  &lt;h4 id=&quot;the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;The worker's lifetime&lt;/h4&gt;
+  &lt;h4 id=&quot;the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The worker's lifetime&lt;/h4&gt;
 
   &lt;p&gt;Workers communicate with other workers and with &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt; through &lt;a href=#channel-messaging title=&quot;channel messaging&quot;&gt;message channels&lt;/a&gt; and their
   &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects.&lt;/p&gt;
@@ -81990,7 +81965,7 @@
   &lt;a href=#permissible-worker&gt;permissible worker&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=processing-model-4&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-4&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with
   &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#browsing-context&gt;browsing
@@ -82276,7 +82251,7 @@
   &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task source&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Runtime script errors&lt;/h4&gt;
+  &lt;h4 id=runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Runtime script errors&lt;/h4&gt;
 
   &lt;p&gt;Whenever an uncaught runtime script error occurs in one of the
   worker's scripts, if the error did not occur while handling a
@@ -82351,9 +82326,9 @@
 
 
 
-  &lt;h4 id=creating-workers&gt;&lt;span class=secno&gt;9.2.7 &lt;/span&gt;Creating workers&lt;/h4&gt;
+  &lt;h4 id=creating-workers&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Creating workers&lt;/h4&gt;
 
-  &lt;h5 id=the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;9.2.7.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt;&lt;/code&gt; abstract interface&lt;/h5&gt;
+  &lt;h5 id=the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;9.2.6.1 &lt;/span&gt;The &lt;code&gt;&lt;a href=#abstractworker&gt;AbstractWorker&lt;/a&gt;&lt;/code&gt; abstract interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[NoInterfaceObject]
 interface &lt;dfn id=abstractworker&gt;AbstractWorker&lt;/dfn&gt; {
@@ -82369,7 +82344,7 @@
   &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-abstractworker-onerror title=handler-AbstractWorker-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
 &lt;!-- v2-onclose    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-AbstractWorker-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; --&gt;
-  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;9.2.7.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;9.2.6.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL)]
 interface &lt;dfn id=worker&gt;Worker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
@@ -82431,24 +82406,25 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the resulting &lt;a href=#absolute-url&gt;absolute
-    URL&lt;/a&gt; is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
-    origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, then throw a
-    &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+    &lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component of
+    the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is not &quot;&lt;code title=data-protocol&gt;data&lt;/code&gt;&quot;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of
+    the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the origin of the &lt;a href=#entry-script&gt;entry
+    script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
+    and abort these steps.&lt;/p&gt;
 
     &lt;p class=note&gt;Thus, scripts must either be external files with
-    the same scheme, host, and port as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt; (the
-    latter are special-cases in the definition of
-    &lt;a href=#origin&gt;origin&lt;/a&gt;). For example, you can't load a script from a
-    &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt;
-    page couldn't start workers using scripts with &lt;code&gt;http:&lt;/code&gt;
-    URLs.&lt;/p&gt;
+    the same scheme, host, and port as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;. For
+    example, you can't load a script from a &lt;a href=#javascript-protocol title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an
+    &lt;code&gt;https:&lt;/code&gt; page couldn't start workers using scripts with
+    &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
-   object. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this new
-   object.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
+   whose &lt;a href=#worker-origin&gt;worker origin&lt;/a&gt; is the origin of the &lt;a href=#entry-script&gt;entry
+   script&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this
+   new object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object, associated with
    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; be this new object.&lt;/li&gt;
@@ -82527,7 +82503,7 @@
   implementing the &lt;code&gt;&lt;a href=#workerutils&gt;WorkerUtils&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
 
 
-  &lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;9.2.7.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;9.2.6.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name)]
 interface &lt;dfn id=sharedworker&gt;SharedWorker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
@@ -82558,18 +82534,19 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is
-    not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the origin of the
-    &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt;
-    exception.&lt;/p&gt;
+    &lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component of
+    &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is not &quot;&lt;code title=data-protocol&gt;data&lt;/code&gt;&quot;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of
+    &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is not the &lt;a href=#same-origin title=&quot;same
+    origin&quot;&gt;same&lt;/a&gt; as the origin of the &lt;a href=#entry-script&gt;entry
+    script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
+    and abort these steps.&lt;/p&gt;
 
     &lt;p class=note&gt;Thus, scripts must either be external files with
-    the same scheme, host, and port as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt; (the
-    latter are special-cases in the definition of
-    &lt;a href=#origin&gt;origin&lt;/a&gt;). For example, you can't load a script from a
-    &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt;
-    page couldn't start workers using scripts with &lt;code&gt;http:&lt;/code&gt;
-    URLs.&lt;/p&gt;
+    the same scheme, host, and port as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;. For
+    example, you can't load a script from a &lt;a href=#javascript-protocol title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an
+    &lt;code&gt;https:&lt;/code&gt; page couldn't start workers using scripts with
+    &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -82604,10 +82581,11 @@
       &lt;p&gt;If &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; is not the empty string and there
       exists a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag is
       false, whose &lt;code title=dom-WorkerGlobalScope-name&gt;name&lt;/code&gt; attribute is
-      exactly equal to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;, and whose &lt;code title=dom-WorkerGlobalScope-location&gt;&lt;a href=#dom-workerglobalscope-location&gt;location&lt;/a&gt;&lt;/code&gt; attribute
-      represents an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; with the &lt;a href=#same-origin&gt;same
-      origin&lt;/a&gt; as &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be that
-      &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+      exactly equal to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;, and whose
+      &lt;a href=#worker-origin&gt;worker origin&lt;/a&gt; is the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as
+      &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;worker
+      global scope&lt;/var&gt; be that &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+      object.&lt;/p&gt;
 
       &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; is the empty string
       and there exists a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
@@ -82696,9 +82674,10 @@
 
       &lt;/ol&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
-     object. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this new
-     object.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
+     whose &lt;a href=#worker-origin&gt;worker origin&lt;/a&gt; is the origin of the &lt;a href=#entry-script&gt;entry
+     script&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be
+     this new object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/li&gt;
 
@@ -82801,14 +82780,6 @@
    &lt;li&gt;&lt;p&gt;If any fail, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
    exception.&lt;/li&gt;
 
-&lt;!--
-   &lt;li&gt;&lt;p&gt;If any of the resulting &lt;span title=&quot;absolute URL&quot;&gt;absolute
-   URLs&lt;/span&gt; have an &lt;span&gt;origin&lt;/span&gt; that is not the &lt;span
-   title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the origin of the script that
-   invoked the method, then throw a &lt;code&gt;SecurityError&lt;/code&gt;
-   exception.&lt;/p&gt;&lt;/li&gt;
---&gt;
-
    &lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;a href=#fetch&gt;fetch&lt;/a&gt; each resource identified by the

Modified: source
===================================================================
--- source	2012-08-09 18:02:50 UTC (rev 7235)
+++ source	2012-08-09 18:29:52 UTC (rev 7236)
@@ -79575,37 +79575,11 @@
 
    &lt;dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+    &lt;p&gt;The &lt;span&gt;origin&lt;/span&gt; and &lt;span&gt;effective script
+    origin&lt;/span&gt; of the &lt;span&gt;URL&lt;/span&gt; are the origin defined in
+    &lt;cite&gt;The Web Origin Concept&lt;/cite&gt;. &lt;a
+    href=&quot;#refsORIGIN&quot;&gt;[ORIGIN]&lt;/a&gt;&lt;/p&gt;
 
-     &lt;dt&gt;If the URL is a &lt;span title=&quot;data protocol&quot;&gt;&lt;code
-     title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt; used in a &lt;code
-     title=&quot;dom-Worker&quot;&gt;Worker()&lt;/code&gt; or &lt;code
-     title=&quot;dom-SharedWorker&quot;&gt;SharedWorker()&lt;/code&gt; constructor&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The &lt;span&gt;origin&lt;/span&gt; and &lt;span&gt;effective script
-      origin&lt;/span&gt; of the &lt;span&gt;URL&lt;/span&gt; are the
-      &lt;span&gt;origin&lt;/span&gt; and &lt;span&gt;effective script origin&lt;/span&gt; of
-      the &lt;span&gt;entry script&lt;/span&gt; at the time that the constructor
-      is invoked. (They are not &lt;span
-      title=&quot;concept-origin-alias&quot;&gt;aliases&lt;/span&gt;.)&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The &lt;span&gt;origin&lt;/span&gt; and &lt;span&gt;effective script
-      origin&lt;/span&gt; of the &lt;span&gt;URL&lt;/span&gt; are the origin defined in
-      &lt;cite&gt;The Web Origin Concept&lt;/cite&gt;. &lt;a
-      href=&quot;#refsORIGIN&quot;&gt;[ORIGIN]&lt;/a&gt;&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-    &lt;/dl&gt;
-
    &lt;/dd&gt;
 
 
@@ -95024,6 +94998,8 @@
 
   &lt;/ol&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;The following are the &lt;span&gt;event handlers&lt;/span&gt; (and their
   corresponding &lt;span title=&quot;event handler event type&quot;&gt;event handler
   event types&lt;/span&gt;) that must be supported, as IDL attributes, by
@@ -95040,9 +95016,20 @@
     &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-WorkerGlobalScope-ononline&quot;&gt;&lt;code&gt;ononline&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-online&quot;&gt;online&lt;/code&gt; &lt;!-- new --&gt;
   &lt;/table&gt;
 
+  &lt;hr&gt;
 
+  &lt;p&gt;Each &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object has a &lt;dfn&gt;worker
+  origin&lt;/dfn&gt; that is set when the object is created.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;For &lt;span title=&quot;data protocol&quot;&gt;&lt;code
+  title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt;, this is the &lt;span&gt;origin&lt;/span&gt;
+  of the &lt;span&gt;entry script&lt;/span&gt; that called the constructor. For
+  other &lt;span title=&quot;URL&quot;&gt;URLs&lt;/span&gt;, this is the &lt;span&gt;origin&lt;/span&gt;
+  of the value of the &lt;span&gt;absolute URL&lt;/span&gt; given in the worker's
+  &lt;code title=&quot;dom-WorkerGlobalScope-location&quot;&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
+
+
   &lt;h5&gt;Dedicated workers and the &lt;code&gt;DedicatedWorkerGlobalScope&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;DedicatedWorkerGlobalScope&lt;/dfn&gt; : &lt;span&gt;WorkerGlobalScope&lt;/span&gt; {
@@ -95143,27 +95130,7 @@
   --&gt;
 
 
-  &lt;h4&gt;Origins of workers&lt;/h4&gt;
 
-  &lt;p&gt;Both the &lt;span&gt;origin&lt;/span&gt; and &lt;span&gt;effective script
-  origin&lt;/span&gt; of scripts running in a worker are the
-  &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;absolute URL&lt;/span&gt; that was
-  obtained after &lt;span title=&quot;resolve a URL&quot;&gt;resolving&lt;/span&gt; the
-  argument to the &lt;code title=&quot;dom-Worker&quot;&gt;Worker()&lt;/code&gt; or &lt;code
-  title=&quot;dom-SharedWorker&quot;&gt;SharedWorker()&lt;/code&gt; constructor that
-  initially created the worker, in the algorithm for that
-  constructor.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;For &lt;span title=&quot;data protocol&quot;&gt;&lt;code
-  title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt;, this is the &lt;span&gt;origin&lt;/span&gt;
-  of the &lt;span&gt;entry script&lt;/span&gt; that called the constructor. For
-  other &lt;span title=&quot;URL&quot;&gt;URLs&lt;/span&gt;, this is the
-  &lt;span&gt;origin&lt;/span&gt; of the value of the &lt;span&gt;absolute URL&lt;/span&gt;
-  given in the worker's &lt;code
-  title=&quot;dom-WorkerGlobalScope-location&quot;&gt;&lt;/code&gt; attribute.&lt;/p&gt;
-
-
-
   &lt;h4&gt;The event loop&lt;/h4&gt;
 
   &lt;p&gt;Each &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object has an &lt;span&gt;event
@@ -95802,26 +95769,28 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;span&gt;origin&lt;/span&gt; of the resulting &lt;span&gt;absolute
-    URL&lt;/span&gt; is not the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the
-    origin of the &lt;span&gt;entry script&lt;/span&gt;, then throw a
-    &lt;code&gt;SecurityError&lt;/code&gt; exception.&lt;/p&gt;
+    &lt;p&gt;If the &lt;span title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component of
+    the resulting &lt;span&gt;absolute URL&lt;/span&gt; is not &quot;&lt;code
+    title=&quot;data-protocol&quot;&gt;data&lt;/code&gt;&quot;, and the &lt;span&gt;origin&lt;/span&gt; of
+    the resulting &lt;span&gt;absolute URL&lt;/span&gt; is not the &lt;span
+    title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the origin of the &lt;span&gt;entry
+    script&lt;/span&gt;, then throw a &lt;code&gt;SecurityError&lt;/code&gt; exception
+    and abort these steps.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;Thus, scripts must either be external files with
     the same scheme, host, and port as the original page, or &lt;span
-    title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt; (the
-    latter are special-cases in the definition of
-    &lt;span&gt;origin&lt;/span&gt;). For example, you can't load a script from a
-    &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
-    title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;, and an &lt;code&gt;https:&lt;/code&gt;
-    page couldn't start workers using scripts with &lt;code&gt;http:&lt;/code&gt;
-    URLs.&lt;/p&gt;
+    title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt;. For
+    example, you can't load a script from a &lt;span title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;, and an
+    &lt;code&gt;https:&lt;/code&gt; page couldn't start workers using scripts with
+    &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;DedicatedWorkerGlobalScope&lt;/code&gt;
-   object. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this new
-   object.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;DedicatedWorkerGlobalScope&lt;/code&gt; object
+   whose &lt;span&gt;worker origin&lt;/span&gt; is the origin of the &lt;span&gt;entry
+   script&lt;/span&gt;. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this
+   new object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;Worker&lt;/code&gt; object, associated with
    &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let &lt;var
@@ -95945,20 +95914,21 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;span&gt;origin&lt;/span&gt; of &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is
-    not the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the origin of the
-    &lt;span&gt;entry script&lt;/span&gt;, then throw a &lt;code&gt;SecurityError&lt;/code&gt;
-    exception.&lt;/p&gt;
+    &lt;p&gt;If the &lt;span title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component of
+    &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is not &quot;&lt;code
+    title=&quot;data-protocol&quot;&gt;data&lt;/code&gt;&quot;, and the &lt;span&gt;origin&lt;/span&gt; of
+    &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; is not the &lt;span title=&quot;same
+    origin&quot;&gt;same&lt;/span&gt; as the origin of the &lt;span&gt;entry
+    script&lt;/span&gt;, then throw a &lt;code&gt;SecurityError&lt;/code&gt; exception
+    and abort these steps.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;Thus, scripts must either be external files with
     the same scheme, host, and port as the original page, or &lt;span
-    title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt; (the
-    latter are special-cases in the definition of
-    &lt;span&gt;origin&lt;/span&gt;). For example, you can't load a script from a
-    &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
-    title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;, and an &lt;code&gt;https:&lt;/code&gt;
-    page couldn't start workers using scripts with &lt;code&gt;http:&lt;/code&gt;
-    URLs.&lt;/p&gt;
+    title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt;. For
+    example, you can't load a script from a &lt;span title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;, and an
+    &lt;code&gt;https:&lt;/code&gt; page couldn't start workers using scripts with
+    &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -96002,12 +95972,11 @@
       title=&quot;dom-WorkerGlobalScope-closing&quot;&gt;closing&lt;/span&gt; flag is
       false, whose &lt;code
       title=&quot;dom-WorkerGlobalScope-name&quot;&gt;name&lt;/code&gt; attribute is
-      exactly equal to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;, and whose &lt;code
-      title=&quot;dom-WorkerGlobalScope-location&quot;&gt;location&lt;/code&gt; attribute
-      represents an &lt;span&gt;absolute URL&lt;/span&gt; with the &lt;span&gt;same
-      origin&lt;/span&gt; as &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then let &lt;var
-      title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be that
-      &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object.&lt;/p&gt;
+      exactly equal to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;, and whose
+      &lt;span&gt;worker origin&lt;/span&gt; is the &lt;span&gt;same origin&lt;/span&gt; as
+      &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;worker
+      global scope&lt;/var&gt; be that &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt;
+      object.&lt;/p&gt;
 
       &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; is the empty string
       and there exists a &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object
@@ -96112,9 +96081,10 @@
 
      &lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt;
-     object. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be this new
-     object.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object
+     whose &lt;span&gt;worker origin&lt;/span&gt; is the origin of the &lt;span&gt;entry
+     script&lt;/span&gt;. Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be
+     this new object.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var
      title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -96238,14 +96208,6 @@
    &lt;li&gt;&lt;p&gt;If any fail, throw a &lt;code&gt;SyntaxError&lt;/code&gt;
    exception.&lt;/p&gt;&lt;/li&gt;
 
-&lt;!--
-   &lt;li&gt;&lt;p&gt;If any of the resulting &lt;span title=&quot;absolute URL&quot;&gt;absolute
-   URLs&lt;/span&gt; have an &lt;span&gt;origin&lt;/span&gt; that is not the &lt;span
-   title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the origin of the script that
-   invoked the method, then throw a &lt;code&gt;SecurityError&lt;/code&gt;
-   exception.&lt;/p&gt;&lt;/li&gt;
---&gt;
-
    &lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;span&gt;fetch&lt;/span&gt; each resource identified by the


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014100.html">[html5] r7235 - [giow] (0) Improve compatibiliy for legacy	features. Fixing https://www.w3.org/B [...]
</A></li>
	<LI>Next message: <A HREF="014102.html">[html5] r7237 - [e] (0) Be more precise in the wording around	changes to xml:base attributes. Al [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14101">[ date ]</a>
              <a href="thread.html#14101">[ thread ]</a>
              <a href="subject.html#14101">[ subject ]</a>
              <a href="author.html#14101">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
