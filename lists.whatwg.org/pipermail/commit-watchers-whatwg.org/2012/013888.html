<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7023 - [giow] (0) Path objects and drawing text to a path	or along a path. Note that th [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7023%20-%20%5Bgiow%5D%20%280%29%20Path%20objects%20and%20drawing%20text%20to%20a%20path%0A%09or%20along%20a%20path.%20Note%20that%20th%20%5B...%5D&In-Reply-To=%3C20120309235849.ADC05247C149%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013887.html">
   <LINK REL="Next"  HREF="013889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7023 - [giow] (0) Path objects and drawing text to a path	or along a path. Note that th [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7023%20-%20%5Bgiow%5D%20%280%29%20Path%20objects%20and%20drawing%20text%20to%20a%20path%0A%09or%20along%20a%20path.%20Note%20that%20th%20%5B...%5D&In-Reply-To=%3C20120309235849.ADC05247C149%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7023 - [giow] (0) Path objects and drawing text to a path	or along a path. Note that th [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Mar  9 15:58:49 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="013887.html">[html5] r7022 - [e] (0) Rearrange and retitle sections in	preparation for Path primitives Affect [...]
</A></li>
        <LI>Next message: <A HREF="013889.html">[html5] r7024 - [giow] (0) Make it possible to draw Path primitives	to the canvas. Affected topi [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13888">[ date ]</a>
              <a href="thread.html#13888">[ thread ]</a>
              <a href="subject.html#13888">[ subject ]</a>
              <a href="author.html#13888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-03-09 15:58:48 -0800 (Fri, 09 Mar 2012)
New Revision: 7023

Modified:
   complete.html
   index
   source
Log:
[giow] (0) Path objects and drawing text to a path or along a path. Note that there's not yet any way to _use_ the Path objects. That's next...
Affected topics: Canvas, Security

Modified: complete.html
===================================================================
--- complete.html	2012-03-07 22:53:20 UTC (rev 7022)
+++ complete.html	2012-03-09 23:58:48 UTC (rev 7023)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 7 March 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 9 March 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -603,17 +603,18 @@
          &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#text-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Text styles&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;The current default path&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#path-objects&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;&lt;code&gt;Path&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing paths to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -35001,8 +35002,22 @@
   readonly attribute unsigned long &lt;a href=#dom-imagedata-width title=dom-imagedata-width&gt;width&lt;/a&gt;;
   readonly attribute unsigned long &lt;a href=#dom-imagedata-height title=dom-imagedata-height&gt;height&lt;/a&gt;;
   readonly attribute &lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt; &lt;a href=#dom-imagedata-data title=dom-imagedata-data&gt;data&lt;/a&gt;;
-};&lt;/pre&gt;
+};
 
+[&lt;a href=#dom-path title=dom-Path&gt;Constructor&lt;/a&gt;(optional &lt;a href=#element&gt;Element&lt;/a&gt; scope)]
+interface &lt;dfn id=path&gt;Path&lt;/dfn&gt; {
+  void &lt;a href=#dom-path-addfill title=dom-path-addFill&gt;addFill&lt;/a&gt;(&lt;a href=#path&gt;Path&lt;/a&gt; path);
+  void &lt;a href=#dom-path-addstroke title=dom-path-addStroke&gt;addStroke&lt;/a&gt;(&lt;a href=#path&gt;Path&lt;/a&gt; path);
+  void &lt;span title=dom-path-addFillText&gt;addFillText&lt;/span&gt;(DOMString text, double x, double y, optional double maxWidth);
+  void &lt;span title=dom-path-addStrokeText&gt;addStrokeText&lt;/span&gt;(DOMString text, double x, double y, optional double maxWidth);
+  void &lt;span title=dom-path-addFillText&gt;addFillText&lt;/span&gt;(DOMString text, &lt;a href=#path&gt;Path&lt;/a&gt; path, optional double maxWidth);
+  void &lt;span title=dom-path-addStrokeText&gt;addStrokeText&lt;/span&gt;(DOMString text, &lt;a href=#path&gt;Path&lt;/a&gt; path, optional double maxWidth);
+};
+&lt;a href=#path&gt;Path&lt;/a&gt; implements &lt;a href=#canvastransformation&gt;CanvasTransformation&lt;/a&gt;;
+&lt;a href=#path&gt;Path&lt;/a&gt; implements &lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;;
+&lt;a href=#path&gt;Path&lt;/a&gt; implements &lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;;
+&lt;a href=#path&gt;Path&lt;/a&gt; implements &lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;;&lt;/pre&gt;
+
  &lt;!-- ARC-ORDER note (see above):
       some demos rely on the precise order of the arc() and arcTo()
       methods, see <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=623437">https://bugzilla.mozilla.org/show_bug.cgi?id=623437</A>
@@ -35064,6 +35079,10 @@
   no way to know which is the &quot;element in question&quot; at the time that
   the color is specified.&lt;/p&gt;
 
+  &lt;p class=note&gt;Similar concerns exist with font-related properties;
+  the rules for those are described in detail in the relevant section
+  below.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -35154,6 +35173,7 @@
   &lt;/div&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-scale&gt;&lt;a href=#dom-context-2d-scale&gt;scale&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-scale&gt;&lt;a href=#dom-context-2d-scale&gt;scale&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35162,6 +35182,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-rotate&gt;&lt;a href=#dom-context-2d-rotate&gt;rotate&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-rotate&gt;&lt;a href=#dom-context-2d-rotate&gt;rotate&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35170,6 +35191,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-translate&gt;&lt;a href=#dom-context-2d-translate&gt;translate&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-translate&gt;&lt;a href=#dom-context-2d-translate&gt;translate&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35178,6 +35200,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-transform&gt;&lt;a href=#dom-context-2d-transform&gt;transform&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-transform&gt;&lt;a href=#dom-context-2d-transform&gt;transform&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35186,6 +35209,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-setTransform&gt;&lt;a href=#dom-context-2d-settransform&gt;setTransform&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-setTransform&gt;&lt;a href=#dom-context-2d-settransform&gt;setTransform&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35248,6 +35272,7 @@
   &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Line styles&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35259,6 +35284,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35273,6 +35299,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35287,6 +35314,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35431,6 +35459,7 @@
   &lt;h6 id=text-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Text styles&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35446,6 +35475,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35458,6 +35488,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35471,9 +35502,13 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface have
+  attributes (defined in this section) that control how text is laid
+  out (rasterized or outlined) by the object. Such objects also have a
+  &lt;dfn id=font-style-source-node&gt;font style source node&lt;/dfn&gt;. For
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects, this is the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. For &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects, it's the
+  &lt;a href=#path-scope-node&gt;path scope node&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
@@ -35487,15 +35522,16 @@
   'initial'), then it must be ignored, without assigning a new font
   value. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's stylesheets; any fonts embedded using
-  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
-  they are loaded. (If a font is referenced before it is fully loaded,
-  then it must be treated as if it was an unknown font, falling back
-  to another as described by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Font names must be interpreted in the context of the &lt;a href=#font-style-source-node&gt;font
+  style source node&lt;/a&gt;'s stylesheets when the font is to be used;
+  any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; that are
+  visible to that element must therefore be available once they are
+  loaded. (If a reference font is used before it is fully loaded, or
+  if the &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt; does not have that font
+  in scope at the time the font is to be used, then it must be treated
+  as if it was an unknown font, falling back to another as described
+  by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;!-- XXX Path objects don't have a canvas --&gt;
-
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
   make the font look very ugly.&lt;/p&gt;
@@ -35524,17 +35560,20 @@
   sans-serif. When the 'font-size' component is set to lengths using
   percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
   keywords, these must be interpreted relative to the computed value
-  of the 'font-size' property of the corresponding &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-  element at the time that the attribute is set. When the
-  'font-weight' component is set to the relative values 'bolder' and
-  'lighter', these must be interpreted relative to the computed value
-  of the 'font-weight' property of the corresponding
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is set.
-  If the computed values are undefined for a particular case (e.g.
-  because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
+
+
+  of the 'font-size' property of the &lt;a href=#font-style-source-node&gt;font style source
+  node&lt;/a&gt; at the time that the attribute is set, if that is an
+  element. When the 'font-weight' component is set to the relative
+  values 'bolder' and 'lighter', these must be interpreted relative to
+  the computed value of the 'font-weight' property of the &lt;a href=#font-style-source-node&gt;font
+  style source node&lt;/a&gt; at the time that the attribute is set, if
+  that is an element. If the computed values are undefined for a
+  particular case (e.g. because the &lt;a href=#font-style-source-node&gt;font style source
+  node&lt;/a&gt; is not an element or is not &lt;a href=#in-a-document&gt;in a
   &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
   interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
+  default.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on getting, must return the current value. On setting, if
@@ -35584,22 +35623,195 @@
    &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
    &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/h6&gt;
+  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=text-preparation-algorithm&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes
+  as input a string &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, a
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and an
+  optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an array of
+  glyph shapes, each positioned on a common coordinate space, and a
+  &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
+  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/i&gt;. (Most callers of this
+  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;.)&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided but is less
+   than or equal to zero, return an empty array.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Replace all the &lt;a href=#space-character title=&quot;space character&quot;&gt;space
+   characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
+   characters.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, as given by that object's &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Apply the appropriate step from the following list to determine
+    the value of &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
+     source node&lt;/a&gt; is an element&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the
+     directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
+     &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
+     source node&lt;/a&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that
+     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has a root element child&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the
+     directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
+     &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt;'s root element child.&lt;/dd&gt;
+
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
+     source node&lt;/a&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that
+     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has no root element child&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;a href=#concept-ltr title=concept-ltr&gt;ltr&lt;/a&gt;'.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Form a hypothetical infinitely-wide CSS line box containing
+   a single inline box containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;,
+   with all the properties at their initial values except the 'font'
+   property of the inline box set to &lt;var title=&quot;&quot;&gt;font&lt;/var&gt;, the
+   'direction' property of the inline box set to &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;, and the 'white-space' property set to
+   'pre'. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;!-- if you insert a step here, make sure to adjust the next step's
+   final words --&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided and the
+   hypothetical width of the inline box in the hypothetical line box
+   is greater than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; CSS pixels, then
+   change &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if
+   one is available or if a reasonably readable one can be synthesized
+   by applying a horizontal scale factor to the font) or a smaller
+   font, and return to the previous step.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is a point on the inline
+    box, and the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is one of the
+    values &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/i&gt;. These
+    variables are determined by the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; values as
+    follows:&lt;/p&gt;
+
+    &lt;p&gt;Horizontal position:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'ltr'&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be the left edge of the inline box, and let &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be &lt;i&gt;left&lt;/i&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'ltr'&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be the right edge of the inline box, and let &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be &lt;i&gt;right&lt;/i&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be half way between the left and right edges of the
+     inline box, and let &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be
+     &lt;i&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/i&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;p&gt;Vertical position:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the top of the em box of the first available font of the
+     inline box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the hanging baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be half way between the bottom and the top of the em box of the
+     first available font of the inline box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the alphabetic baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the ideographic baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the bottom of the em box of the first available font of the
+     inline box.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be an array constructed by
+    iterating over each glyph in the inline box from left to right (if
+    any), adding to the array, for each glyph, the shape of the glyph
+    as it is in the inline box, positioned on a coordinate space using
+    CSS pixels with its origin is at the &lt;var title=&quot;&quot;&gt;anchor
+    point&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, and, for callers that
+   need it, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; as the alignment
+   value.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/h6&gt;
+
   &lt;p&gt;Each object implementing the &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
-  interface has a &lt;a href=#path&gt;path&lt;/a&gt;. A &lt;dfn id=path&gt;path&lt;/dfn&gt; has a list of
-  zero or more subpaths. Each subpath consists of a list of one or
-  more points, connected by straight or curved lines, and a flag
-  indicating whether the subpath is closed or not. A closed subpath is
-  one where the last point of the subpath is connected to the first
-  point of the subpath by a straight line. Subpaths with fewer than
-  two points are ignored when painting the path.&lt;/p&gt;
+  interface has a &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;. A &lt;dfn id=concept-path title=concept-path&gt;path&lt;/dfn&gt; has a list of zero or more subpaths.
+  Each subpath consists of a list of one or more points, connected by
+  straight or curved lines, and a flag indicating whether the subpath
+  is closed or not. A closed subpath is one where the last point of
+  the subpath is connected to the first point of the subpath by a
+  straight line. Subpaths with fewer than two points are ignored when
+  painting the path.&lt;/p&gt;
 
   &lt;p&gt;When an object implementing the &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
-  interface is created, its &lt;a href=#path&gt;path&lt;/a&gt; must be initialized to
-  zero subpaths.&lt;/p&gt;
+  interface is created, its &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;
+  must be initialized to zero subpaths.&lt;/p&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-moveTo&gt;&lt;a href=#dom-context-2d-moveto&gt;moveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-moveTo&gt;&lt;a href=#dom-context-2d-moveto&gt;moveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35608,6 +35820,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-closePath&gt;&lt;a href=#dom-context-2d-closepath&gt;closePath&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-closePath&gt;&lt;a href=#dom-context-2d-closepath&gt;closePath&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35616,6 +35829,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineTo&gt;&lt;a href=#dom-context-2d-lineto&gt;lineTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-lineTo&gt;&lt;a href=#dom-context-2d-lineto&gt;lineTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35624,6 +35838,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-quadraticCurveTo&gt;&lt;a href=#dom-context-2d-quadraticcurveto&gt;quadraticCurveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cpx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cpy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-quadraticCurveTo&gt;&lt;a href=#dom-context-2d-quadraticcurveto&gt;quadraticCurveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cpx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cpy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35632,6 +35847,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-bezierCurveTo&gt;&lt;a href=#dom-context-2d-beziercurveto&gt;bezierCurveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cp1x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp1y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-bezierCurveTo&gt;&lt;a href=#dom-context-2d-beziercurveto&gt;bezierCurveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cp1x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp1y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35640,6 +35856,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-arcTo&gt;&lt;a href=#dom-context-2d-arcto&gt;arcTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-arcTo&gt;&lt;a href=#dom-context-2d-arcto&gt;arcTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35653,6 +35870,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-arc&gt;&lt;a href=#dom-context-2d-arc&gt;arc&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-arc&gt;&lt;a href=#dom-context-2d-arc&gt;arc&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35668,6 +35886,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-rect&gt;&lt;a href=#dom-context-2d-rect&gt;rect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-rect&gt;&lt;a href=#dom-context-2d-rect&gt;rect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35677,11 +35896,11 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The following methods allow authors to manipulate the &lt;a href=#path title=path&gt;paths&lt;/a&gt; of objects implementing the
+  &lt;p&gt;The following methods allow authors to manipulate the &lt;a href=#concept-path title=concept-path&gt;paths&lt;/a&gt; of objects implementing the
   &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
 
-  &lt;p&gt;The points and lines added to an object's &lt;a href=#path&gt;path&lt;/a&gt; by
-  these methods must be transformed according to the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+  &lt;p&gt;The points and lines added to an object's &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt; by these methods must be
+  transformed according to the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
   matrix&lt;/a&gt; of the object implementing the
   &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt; interface before they are added to
   the path.&lt;/p&gt;
@@ -35698,11 +35917,12 @@
 
   &lt;p&gt;When the user agent is to &lt;dfn id=ensure-there-is-a-subpath&gt;ensure there is a subpath&lt;/dfn&gt;
   for a coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) on a
-  &lt;a href=#path&gt;path&lt;/a&gt;, the user agent must check to see if the
-  &lt;a href=#path&gt;path&lt;/a&gt; has any subpaths, and if it does not, then the
-  user agent must create a new subpath with the point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as its first (and only)
-  point, as if the &lt;code title=dom-context-2d-moveTo&gt;&lt;a href=#dom-context-2d-moveto&gt;moveTo()&lt;/a&gt;&lt;/code&gt;
-  method had been called.&lt;/p&gt;
+  &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;, the user agent must check to
+  see if the &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt; has any subpaths,
+  and if it does not, then the user agent must create a new subpath
+  with the point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as its
+  first (and only) point, as if the &lt;code title=dom-context-2d-moveTo&gt;&lt;a href=#dom-context-2d-moveto&gt;moveTo()&lt;/a&gt;&lt;/code&gt; method had been
+  called.&lt;/p&gt;
 
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-closepath title=dom-context-2d-closePath&gt;&lt;code&gt;closePath()&lt;/code&gt;&lt;/dfn&gt;
@@ -35834,9 +36054,314 @@
 
 
 
+  &lt;h6 id=path-objects&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
 
-  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+  &lt;p&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects can be used to declare paths that are
+  then later used on &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects. In
+  addition to many of the APIs described in earlier sections,
+  &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects have methods to combine paths, and to add
+  text to paths.&lt;/p&gt;
 
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; = new &lt;code title=dom-path&gt;&lt;a href=#dom-path&gt;Path&lt;/a&gt;&lt;/code&gt;([ &lt;var title=&quot;&quot;&gt;element&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Creates a new &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object, optionally using a specific element for resolving relative keywords and sizes in font specifications.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addFill&gt;&lt;a href=#dom-path-addfill&gt;addFill&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;path&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addStroke&gt;&lt;a href=#dom-path-addstroke&gt;addStroke&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;path&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds to the path the path given by the argument.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addFillText&gt;addFillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addFillText&gt;addFillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addStrokeText&gt;addStrokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addStrokeText&gt;addStrokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds to the path a series of subpaths corresponding to the given text. If the arguments give a coordinate, the text is drawn horizontally at the given coordinates. If the arguments give a path, the text is drawn along the path. If a maximum width is provided, the text will be scaled to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object has a &lt;dfn id=path-scope-node&gt;path scope node&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-path title=dom-path&gt;&lt;code&gt;Path()&lt;/code&gt;&lt;/dfn&gt; constructor,
+  when invoked, must return a newly created &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object.
+  If the constructor was passed an argument, then the
+  &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#path-scope-node&gt;path scope node&lt;/a&gt; is that
+  element. Otherwise, the object's &lt;a href=#path-scope-node&gt;path scope node&lt;/a&gt; is
+  the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#active-document&gt;active
+  document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of the
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the interface object of the
+  invoked constructor is found.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-path-addfill title=dom-path-addFill&gt;&lt;code&gt;addFill(&lt;var title=&quot;&quot;&gt;b&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked on a
+  &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; has
+   no subpaths, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a copy of all the subpaths in &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.
+   Let this copy be known as &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; by
+   the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+   transformation matrix&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+   last point in the last subpath of &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; with (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the
+   subpath.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-path-addstroke title=dom-path-addStroke&gt;&lt;code&gt;addStroke(&lt;var title=&quot;&quot;&gt;b&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked on a
+  &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; has
+   no subpaths, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a copy of all the subpaths in &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.
+   Let this copy be known as &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; by
+   the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+   transformation matrix&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new list of subpaths &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;,
+   consisting of the subpaths necessary to describe the result of
+   tracing the subpaths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, in the same order,
+   while applying the line styles of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; (the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+   appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes).
+   Subpaths in &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; must wind clockwise, regardless
+   of the direction of paths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;!--
+
+    Because both of these examples result in two lines (assuming
+    non-zero winding rules, things are different under even/odd),
+    there's no &quot;hole&quot; where the lines overlap:
+
+           c.beginPath();
+           c.lineWidth=30;
+           c.moveTo(200,200); // subpath 1
+           c.lineTo(400,200);
+           c.moveTo(400,210); // subpath 2
+           c.lineTo(200,190);
+           c.stroke();
+
+           c.beginPath();
+           c.lineWidth=30;
+           c.moveTo(200,200); // subpath 1
+           c.lineTo(400,200);
+           c.lineTo(300,300);
+           c.closePath();
+           c.moveTo(400,210); // subpath 2
+           c.lineTo(200,190);
+           c.lineTo(300,300);
+           c.closePath();
+           c.stroke();
+
+    ...and we want the same result when you create the two subpaths
+    in each example above as two Paths, stroke them onto a third
+    Path, and then fill that Path on the context.
+
+   --&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+   last point in the last subpath of &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; with (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the
+   subpath.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-addfilltext title=dom-context-2d-addFillText&gt;&lt;code&gt;addFillText()&lt;/code&gt;&lt;/dfn&gt; and
+  &lt;dfn id=dom-context-2d-addstroketext title=dom-context-2d-addStrokeText&gt;&lt;code&gt;addStrokeText()&lt;/code&gt;&lt;/dfn&gt;
+  methods each come in two variants: one rendering text at a given
+  coordinate, and one rendering text along a given path. In both
+  cases, a maximum width can optionally be provided.&lt;/p&gt;
+
+  &lt;p&gt;When one of the &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addFillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addStrokeText()&lt;/a&gt;&lt;/code&gt; variants
+  that take as argument an (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinate is invoked, the method must run the
+  following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object, and, if the
+   &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was provided, that argument.
+   Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the result.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; CSS pixels and down by &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; CSS pixels.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; be a list of subpaths
+   describing the shapes given in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt;, with
+   each CSS pixel in the coordinate space of &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; mapped to one coordinate space unit in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. Subpaths in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; must wind clockwise, regardless of how the user
+   agent's font subsystem renders fonts and regardless of how the
+   fonts themselves are defined.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If the method is &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addStrokeText()&lt;/a&gt;&lt;/code&gt;,
+   replace &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; by a new list of
+   subpaths consisting of the subpaths necessary to describe the
+   result of tracing the subpaths added to &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; in the preview step, in the same order, while
+   applying the line styles of the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object (the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+   appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes).
+   These subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; must also all
+   wind clockwise.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+   matrix&lt;/a&gt; of the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) be the last point in the
+   last subpath of &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; to the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object with
+   (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) as the only point in the
+   subpath.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When one of the &lt;code title=dom-context-2d-addFillText&gt;&lt;a href=#dom-context-2d-addfilltext&gt;addFillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addStrokeText()&lt;/a&gt;&lt;/code&gt; variants
+  that take as argument a &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object is invoked, the
+  method must run the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; be the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt;
+   object on which the method was invoked.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; be the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object
+   that was provided in the method's arguments.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Run the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and, if the
+   &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was provided, that argument.
+   Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the resulting array, and &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be the resulting alignment
+   value.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; be the aggregate length of all
+   the subpaths in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;, including the distances
+   from the last point of each closed subpath to the first point of
+   that subpath.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Define &lt;var title=&quot;&quot;&gt;L&lt;/var&gt; to be a linear coordinate line
+   for of all the subpaths in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;, with
+   additional lines drawn between the last point and the first point
+   of each closed subpath, such that the first point of the first
+   subpath is defined as point 0, and the last point of the last
+   subpath, if the last subpath is not closed, or the second
+   occurrence first point of that subpath, if it is closed, is defined
+   as point &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be determined according to the
+    appropriate step below:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;left&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be zero.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;right&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be half of &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; CSS pixels.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each glyph &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt; in the &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; array, run these substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the horizontal center of the
+     bounding box of the shape described by &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt;, in CSS pixels.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; is negative or greater than &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, skip the remainder of these substeps for
+     this glyph.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Recast &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; to coordinate spaces units
+     in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;. (This just changes the
+     dimensionality of &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, not its numeric
+     value.)&lt;/p&gt; &lt;!-- hide this step if people get confused by the
+     pedancy --&gt;
+
+     &lt;li&gt;&lt;p&gt;Find the point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt; on &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; (or implied closing lines in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;) that corresponds to the position &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; on the coordinate line &lt;var title=&quot;&quot;&gt;L&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&theta;&lt;/var&gt; be the clockwise angle
+     from the positive x-axis to the side of the line that is
+     tangential to &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; at the point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt; that is going in the same direction as the line
+     at point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Rotate the shape described by &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt;
+     clockwise by &lt;var title=&quot;&quot;&gt;&theta;&lt;/var&gt; about the point that is
+     at the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate horizontally and the
+     zero coordinate vertically.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+     coordinate of the point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Move the shape described by &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt; to
+     the right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and down by &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; be a list of
+     subpaths describing the shape given in &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt;,
+     with each CSS pixel in the coordinate space of &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt; mapped to one coordinate space unit in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. Subpaths in &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; must wind clockwise, regardless of how the user
+     agent's font subsystem renders fonts and regardless of how the
+     fonts themselves are defined.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;If the method is &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addStrokeText()&lt;/a&gt;&lt;/code&gt;,
+     replace &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; by a new list of
+     subpaths consisting of the subpaths necessary to describe the
+     result of tracing the subpaths added to &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; in the preview step, in the same order, while
+     applying the line styles of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object
+     (the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;,
+     &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+     appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes).
+     These subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; must also
+     all wind clockwise.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+     matrix&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) be the last point in
+     the last subpath of &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. (This
+     coordinate is only used if this is the last glyph
+     processed.)&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;
+     to &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object with
+   (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) as the only point in the
+   subpath.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+
+  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -36227,12 +36752,364 @@
 
 
 
-  &lt;h6 id=the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;The current default path&lt;/h6&gt;
 
+  &lt;h6 id=drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/h6&gt;
+
+  &lt;p&gt;There are three methods that immediately draw rectangles to the
+  bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
+  left of the rectangle, and the second two give the width &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
+  respectively.&lt;/p&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+  transformation matrix&lt;/a&gt; must be applied to the following four
+  coordinates, which form the path that must then be closed to get the
+  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Shapes are painted without affecting the current default path,
+  and are subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping
+  region&lt;/a&gt;, and, with the exception of &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt;, also &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
+  operators&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillRect&gt;&lt;a href=#dom-context-2d-fillrect&gt;fillRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeRect&gt;&lt;a href=#dom-context-2d-strokerect&gt;strokeRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
+  specified rectangle that also intersect the current clipping region
+  to a fully transparent black, erasing any previous image. If either
+  height or width are zero, this method has no effect.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
+  rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
+  or width are zero, this method has no effect.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokerect title=dom-context-2d-strokeRect&gt;&lt;code&gt;strokeRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
+  rectangle's path using the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+  appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes. If
+  both height and width are zero, this method has no effect, since
+  there is no path to stroke (it's a point). If only one of the two is
+  zero, then the method will draw a line instead (the path for the
+  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+  &lt;h6 id=drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/h6&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Fills or strokes (respectively) the given text at the given
+    position. If a maximum width is provided, the text will be scaled
+    to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the advance width of the text that was passed to the
+    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
+    method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the
+  following methods for rendering text directly to the canvas.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-filltext title=dom-context-2d-fillText&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
+  &lt;dfn id=dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
+  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;, and render the given &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; at the given (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that the text isn't wider
+  than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; if specified, using the current
+  &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
+  values. Specifically, when the methods are called, the user agent
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
+   object, and, if the &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was
+   provided, that argument. Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the
+   result.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; CSS pixels and down by &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; CSS pixels.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Paint the shapes given in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt;, as
+    transformed by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+    matrix&lt;/a&gt;, with each CSS pixel in the coordinate space of &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; mapped to one coordinate space unit.&lt;/p&gt;
+
+    &lt;p&gt;For &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt;,
+    &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; must be
+    applied to the shapes and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; must be
+    ignored. For &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt;, the reverse
+    holds and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; must be
+    applied to the shape outlines, along with the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+    appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes,
+    and &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; must
+    be ignored.&lt;/p&gt;
+
+    &lt;p&gt;These shapes are painted without affecting the current path,
+    and are subject to &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;,
+    &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, the
+    &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
+    operators&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;!--v6DVT - this is commented out until CSS can get its act together
+enough to actual specify vertical text rendering (how long have we
+been waiting now?)
+
+WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
+
+ALSO NOTE THAT THIS PROBABLY NEEDS ENTIRELY REVISITING NOW THAT WE
+HAVE REJIGGED HOW TEXT WORKS IN v5
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
+  and &lt;dfn
+  title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;&lt;code&gt;strokeVerticalText()&lt;/code&gt;&lt;/dfn&gt;
+  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var
+  title=&quot;&quot;&gt;maxHeight&lt;/var&gt;, and render the given &lt;var
+  title=&quot;&quot;&gt;text&lt;/var&gt; as vertical text at the given (&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that
+  the text isn't taller than &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; if
+  specified, using the current &lt;code
+  title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;
+  values. Specifically, when the methods are called, the user agent
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; is present but less than or
+   equal to zero, return without doing anything; abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
+   context, as given by the &lt;code
+   title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Replace all the &lt;span title=&quot;space character&quot;&gt;space
+   characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
+   characters.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Form a &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;whatever CSS ends up calling
+   vertical line boxes and inline boxes&lt;/em&gt; containing the text &lt;var
+   title=&quot;&quot;&gt;text&lt;/var&gt;, with all the properties at their initial
+   values except the 'font' property of the inline box set to &lt;var
+   title=&quot;&quot;&gt;font&lt;/var&gt; and the 'direction' property of the inline
+   box set to &lt;span&gt;the directionality&lt;/span&gt; of the &lt;code&gt;canvas&lt;/code&gt;
+   element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;!- - if you insert a step here, make sure to adjust the next step's
+   final words - -&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; argument was specified
+   and the hypothetical height of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;box&lt;/em&gt;
+   in the hypothetical line box is greater than &lt;var
+   title=&quot;&quot;&gt;maxHeight&lt;/var&gt; CSS pixels, then change &lt;var
+   title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if one is
+   available or if a reasonably readable one can be synthesized by
+   applying an appropriate scale factor to the font) or a smaller
+   font, and return to the previous step.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the &lt;em
+    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/var&gt;, determined by the &lt;code
+    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, as follows:&lt;/p&gt;
+
+    &lt;p&gt;Vertical position:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;start&lt;/code&gt;&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
+     position be the top edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
+     box&lt;/em&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;end&lt;/code&gt;&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
+     position be the bottom edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
+     box&lt;/em&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be half way between the top and bottom edges of the &lt;em
+     class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+    &lt;p&gt;Let the horizontal position be half way between the left and
+    right edges of the em box of the first available font of the &lt;em
+    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
+    text's glyphs, as transformed by the &lt;span
+    title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+    matrix&lt;/span&gt;, and anchored and sized so that before applying the
+    &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+    matrix&lt;/span&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
+    mapped to one coordinate space unit.&lt;/p&gt;
+
+    &lt;p&gt;For &lt;code
+    title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText()&lt;/code&gt;
+    &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
+    applied and &lt;code
+    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
+    ignored. For &lt;code
+    title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText()&lt;/code&gt;
+    the reverse holds and &lt;code
+    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
+    applied and &lt;code
+    title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
+    ignored.&lt;/p&gt;
+
+    &lt;p&gt;Text is painted without affecting the current path, and is
+    subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
+    title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the &lt;span
+    title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;, and &lt;span
+    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
+    operators&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+v6DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
+  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
+  is invoked, the user agent must replace all the &lt;a href=#space-character title=&quot;space
+  character&quot;&gt;space characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
+  U+0020 SPACE characters, and then must form a hypothetical
+  infinitely-wide CSS line box containing a single inline box
+  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
+  properties at their initial values except the 'white-space' property
+  of the inline element set to 'pre' and the 'font' property of the
+  inline element set to the current font of the context as given by
+  the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute, and
+  must then create a new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its
+  &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt; attribute set to
+  the width of that inline box, in CSS pixels.
+&lt;!--ADD-TOPIC:Security--&gt;
+  If doing these measurements requires using a font that has an
+  &lt;a href=#origin&gt;origin&lt;/a&gt; that is not the &lt;a href=#same-origin title=&quot;same
+  origin&quot;&gt;same&lt;/a&gt; as that of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that
+  owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element (even if &quot;using a font&quot; means
+  just checking if that font has a particular glyph in it before
+  falling back to another font), then the method must throw a
+  &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.
+&lt;!--REMOVE-TOPIC:Security--&gt;
+  Otherwise, it must return the new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object.
+  &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; interface is used for the objects
+  returned from &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;. It has one
+  attribute, &lt;dfn id=dom-textmetrics-width title=dom-textmetrics-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
+  by the &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
+  method.&lt;/p&gt;
+
+  &lt;p class=note&gt;Glyphs rendered using &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; can spill out
+  of the box given by the font size (the em square size) and the width
+  returned by &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt; (the text
+  width). This version of the specification does not provide a way to
+  obtain the bounding box dimensions of the text. If the text is to be
+  rendered and removed, care needs to be taken to replace the entire
+  area of the canvas that the clipping region covers, not just the box
+  given by the em square height and measured text width.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;p class=note&gt;A future version of the 2D context API may provide a
+  way to render fragments of documents, rendered using CSS, straight
+  to the canvas. This would be provided in preference to a dedicated
+  way of doing multiline layout.&lt;/p&gt;
+
+
+
+  &lt;h6 id=drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing paths to the canvas&lt;/h6&gt;
+
   &lt;p&gt;The context always has a current default path. There is only one
   current default path, it is not part of the &lt;a href=#drawing-state&gt;drawing
-  state&lt;/a&gt;. The current default path is a &lt;a href=#path&gt;path&lt;/a&gt;, as
-  described in the previous section.&lt;/p&gt;
+  state&lt;/a&gt;. The current default path is a &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;, as described in the previous
+  section.&lt;/p&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-beginPath&gt;&lt;a href=#dom-context-2d-beginpath&gt;beginPath&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
 
@@ -36566,462 +37443,8 @@
 
 
 
+  &lt;h6 id=drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing images to the canvas&lt;/h6&gt;
 
-
-  &lt;h6 id=drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/h6&gt;
-
-  &lt;p&gt;There are three methods that immediately draw rectangles to the
-  bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
-  left of the rectangle, and the second two give the width &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
-  respectively.&lt;/p&gt;
-
-  &lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
-  transformation matrix&lt;/a&gt; must be applied to the following four
-  coordinates, which form the path that must then be closed to get the
-  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Shapes are painted without affecting the current default path,
-  and are subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping
-  region&lt;/a&gt;, and, with the exception of &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt;, also &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
-  operators&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillRect&gt;&lt;a href=#dom-context-2d-fillrect&gt;fillRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeRect&gt;&lt;a href=#dom-context-2d-strokerect&gt;strokeRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
-  rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
-  or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokerect title=dom-context-2d-strokeRect&gt;&lt;code&gt;strokeRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
-  rectangle's path using the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
-  appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes. If
-  both height and width are zero, this method has no effect, since
-  there is no path to stroke (it's a point). If only one of the two is
-  zero, then the method will draw a line instead (the path for the
-  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h6 id=drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/h6&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Fills or strokes (respectively) the given text at the given
-    position. If a maximum width is provided, the text will be scaled
-    to fit that width if necessary.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-    method.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the
-  following methods for rendering text directly to the canvas.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-filltext title=dom-context-2d-fillText&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
-  &lt;dfn id=dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
-  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;, and render the given &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; at the given (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that the text isn't wider
-  than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; if specified, using the current
-  &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
-  values. Specifically, when the methods are called, the user agent
-  must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; is present but less than or
-   equal to zero, return without doing anything; abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
-   context, as given by the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Replace all the &lt;a href=#space-character title=&quot;space character&quot;&gt;space
-   characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
-   characters.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Form a hypothetical infinitely wide CSS line box containing
-   a single inline box containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;,
-   with all the properties at their initial values except the 'font'
-   property of the inline box set to &lt;var title=&quot;&quot;&gt;font&lt;/var&gt;, the
-   'direction' property of the inline box set to &lt;a href=#the-directionality&gt;the
-   directionality&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, and the
-   'white-space' property set to 'pre'. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;!-- if you insert a step here, make sure to adjust the next step's
-   final words --&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was specified
-   and the hypothetical width of the inline box in the hypothetical
-   line box is greater than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; CSS pixels,
-   then change &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font
-   (if one is available or if a reasonably readable one can be
-   synthesized by applying a horizontal scale factor to the font) or a
-   smaller font, and return to the previous step.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the
-    inline box, determined by the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; values, as
-    follows:&lt;/p&gt;
-
-    &lt;p&gt;Horizontal position:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be the left edge of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and  &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be the right edge of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be half way between the left and right edges of the
-     inline box.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;p&gt;Vertical position:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the top of the em box of the first available font of the
-     inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the hanging baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be half way between the bottom and the top of the em box of the
-     first available font of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the alphabetic baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the ideographic baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the bottom of the em box of the first available font of the
-     inline box.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
-    text's glyphs, as transformed by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
-    matrix&lt;/a&gt;, and anchored and sized so that before applying the
-    &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
-    matrix&lt;/a&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
-    mapped to one coordinate space unit.&lt;/p&gt;
-
-    &lt;p&gt;For &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt;
-    &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; must be
-    applied to the glyphs and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; must be
-    ignored. For &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; the reverse
-    holds and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; must be
-    applied to the glyph outlines and &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; must be
-    ignored.&lt;/p&gt;
-
-    &lt;p&gt;Text is painted without affecting the current path, and is
-    subject to &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
-    operators&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;&lt;!--v6DVT - this is commented out until CSS can get its act together
-enough to actual specify vertical text rendering (how long have we
-been waiting now?)
-
-WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn
-  title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;&lt;code&gt;strokeVerticalText()&lt;/code&gt;&lt;/dfn&gt;
-  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var
-  title=&quot;&quot;&gt;maxHeight&lt;/var&gt;, and render the given &lt;var
-  title=&quot;&quot;&gt;text&lt;/var&gt; as vertical text at the given (&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that
-  the text isn't taller than &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; if
-  specified, using the current &lt;code
-  title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; and &lt;code
-  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;
-  values. Specifically, when the methods are called, the user agent
-  must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; is present but less than or
-   equal to zero, return without doing anything; abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
-   context, as given by the &lt;code
-   title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Replace all the &lt;span title=&quot;space character&quot;&gt;space
-   characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
-   characters.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Form a &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;whatever CSS ends up calling
-   vertical line boxes and inline boxes&lt;/em&gt; containing the text &lt;var
-   title=&quot;&quot;&gt;text&lt;/var&gt;, with all the properties at their initial
-   values except the 'font' property of the inline box set to &lt;var
-   title=&quot;&quot;&gt;font&lt;/var&gt; and the 'direction' property of the inline
-   box set to &lt;span&gt;the directionality&lt;/span&gt; of the &lt;code&gt;canvas&lt;/code&gt;
-   element.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;!- - if you insert a step here, make sure to adjust the next step's
-   final words - -&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; argument was specified
-   and the hypothetical height of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;box&lt;/em&gt;
-   in the hypothetical line box is greater than &lt;var
-   title=&quot;&quot;&gt;maxHeight&lt;/var&gt; CSS pixels, then change &lt;var
-   title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if one is
-   available or if a reasonably readable one can be synthesized by
-   applying an appropriate scale factor to the font) or a smaller
-   font, and return to the previous step.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the &lt;em
-    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/var&gt;, determined by the &lt;code
-    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, as follows:&lt;/p&gt;
-
-    &lt;p&gt;Vertical position:&lt;/p&gt;
-
-    &lt;dl&gt;
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;start&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
-     position be the top edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
-     box&lt;/em&gt;.&lt;/dd&gt;
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;end&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
-     position be the bottom edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
-     box&lt;/em&gt;.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be half way between the top and bottom edges of the &lt;em
-     class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-    &lt;p&gt;Let the horizontal position be half way between the left and
-    right edges of the em box of the first available font of the &lt;em
-    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
-    text's glyphs, as transformed by the &lt;span
-    title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-    matrix&lt;/span&gt;, and anchored and sized so that before applying the
-    &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-    matrix&lt;/span&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var
-    title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
-    mapped to one coordinate space unit.&lt;/p&gt;
-
-    &lt;p&gt;For &lt;code
-    title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText()&lt;/code&gt;
-    &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
-    applied and &lt;code
-    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
-    ignored. For &lt;code
-    title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText()&lt;/code&gt;
-    the reverse holds and &lt;code
-    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
-    applied and &lt;code
-    title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
-    ignored.&lt;/p&gt;
-
-    &lt;p&gt;Text is painted without affecting the current path, and is
-    subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
-    title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the &lt;span
-    title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;, and &lt;span
-    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
-    operators&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-v6DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
-  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
-  is invoked, the user agent must replace all the &lt;a href=#space-character title=&quot;space
-  character&quot;&gt;space characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
-  U+0020 SPACE characters, and then must form a hypothetical
-  infinitely wide CSS line box containing a single inline box
-  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
-  properties at their initial values except the 'white-space' property
-  of the inline element set to 'pre' and the 'font' property of the
-  inline element set to the current font of the context as given by
-  the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute, and
-  must then create a new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its
-  &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt; attribute set to
-  the width of that inline box, in CSS pixels.
-&lt;!--ADD-TOPIC:Security--&gt;
-  If doing these measurements requires using a font that has an
-  &lt;a href=#origin&gt;origin&lt;/a&gt; that is not the &lt;a href=#same-origin title=&quot;same
-  origin&quot;&gt;same&lt;/a&gt; as that of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that
-  owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element (even if &quot;using a font&quot; means
-  just checking if that font has a particular glyph in it before
-  falling back to another font), then the method must throw a
-  &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.
-&lt;!--REMOVE-TOPIC:Security--&gt;
-  Otherwise, it must return the new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object.
-  &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; interface is used for the objects
-  returned from &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;. It has one
-  attribute, &lt;dfn id=dom-textmetrics-width title=dom-textmetrics-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
-  by the &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-  method.&lt;/p&gt;
-
-  &lt;p class=note&gt;Glyphs rendered using &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; can spill out
-  of the box given by the font size (the em square size) and the width
-  returned by &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt; (the text
-  width). This version of the specification does not provide a way to
-  obtain the bounding box dimensions of the text. If the text is to be
-  rendered and removed, care needs to be taken to replace the entire
-  area of the canvas that the clipping region covers, not just the box
-  given by the em square height and measured text width.&lt;/p&gt;
-
-  &lt;!-- v5: Drawing text along a given path --&gt;
-  &lt;!-- v5: Adding text to a path --&gt;
-  &lt;!-- see also: <A HREF="http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules">http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules</A> --&gt;
-  &lt;!-- see also: <A HREF="http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas">http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas</A> --&gt;
-
-  &lt;/div&gt;
-
-  &lt;p class=note&gt;A future version of the 2D context API may provide a
-  way to render fragments of documents, rendered using CSS, straight
-  to the canvas. This would be provided in preference to a dedicated
-  way of doing multiline layout.&lt;/p&gt;
-
-
-
-  &lt;h6 id=drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing images to the canvas&lt;/h6&gt;
-
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
 
@@ -37164,7 +37587,7 @@
 
 
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
@@ -37500,7 +37923,7 @@
 
 
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Compositing&lt;/h6&gt;
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Compositing&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
@@ -37662,7 +38085,7 @@
 
 
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;All drawing operations are affected by the four global shadow
   attributes.&lt;/p&gt;
@@ -37803,7 +38226,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -37834,7 +38257,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Best practices&lt;/h6&gt;
+  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Best practices&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -37896,7 +38319,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 

Modified: index
===================================================================
--- index	2012-03-07 22:53:20 UTC (rev 7022)
+++ index	2012-03-09 23:58:48 UTC (rev 7023)
@@ -240,7 +240,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 7 March 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 9 March 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -603,17 +603,18 @@
          &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#text-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Text styles&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;The current default path&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#path-objects&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;&lt;code&gt;Path&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing paths to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -35001,8 +35002,22 @@
   readonly attribute unsigned long &lt;a href=#dom-imagedata-width title=dom-imagedata-width&gt;width&lt;/a&gt;;
   readonly attribute unsigned long &lt;a href=#dom-imagedata-height title=dom-imagedata-height&gt;height&lt;/a&gt;;
   readonly attribute &lt;a href=#uint8clampedarray&gt;Uint8ClampedArray&lt;/a&gt; &lt;a href=#dom-imagedata-data title=dom-imagedata-data&gt;data&lt;/a&gt;;
-};&lt;/pre&gt;
+};
 
+[&lt;a href=#dom-path title=dom-Path&gt;Constructor&lt;/a&gt;(optional &lt;a href=#element&gt;Element&lt;/a&gt; scope)]
+interface &lt;dfn id=path&gt;Path&lt;/dfn&gt; {
+  void &lt;a href=#dom-path-addfill title=dom-path-addFill&gt;addFill&lt;/a&gt;(&lt;a href=#path&gt;Path&lt;/a&gt; path);
+  void &lt;a href=#dom-path-addstroke title=dom-path-addStroke&gt;addStroke&lt;/a&gt;(&lt;a href=#path&gt;Path&lt;/a&gt; path);
+  void &lt;span title=dom-path-addFillText&gt;addFillText&lt;/span&gt;(DOMString text, double x, double y, optional double maxWidth);
+  void &lt;span title=dom-path-addStrokeText&gt;addStrokeText&lt;/span&gt;(DOMString text, double x, double y, optional double maxWidth);
+  void &lt;span title=dom-path-addFillText&gt;addFillText&lt;/span&gt;(DOMString text, &lt;a href=#path&gt;Path&lt;/a&gt; path, optional double maxWidth);
+  void &lt;span title=dom-path-addStrokeText&gt;addStrokeText&lt;/span&gt;(DOMString text, &lt;a href=#path&gt;Path&lt;/a&gt; path, optional double maxWidth);
+};
+&lt;a href=#path&gt;Path&lt;/a&gt; implements &lt;a href=#canvastransformation&gt;CanvasTransformation&lt;/a&gt;;
+&lt;a href=#path&gt;Path&lt;/a&gt; implements &lt;a href=#canvaslinestyles&gt;CanvasLineStyles&lt;/a&gt;;
+&lt;a href=#path&gt;Path&lt;/a&gt; implements &lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;;
+&lt;a href=#path&gt;Path&lt;/a&gt; implements &lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;;&lt;/pre&gt;
+
  &lt;!-- ARC-ORDER note (see above):
       some demos rely on the precise order of the arc() and arcTo()
       methods, see <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=623437">https://bugzilla.mozilla.org/show_bug.cgi?id=623437</A>
@@ -35064,6 +35079,10 @@
   no way to know which is the &quot;element in question&quot; at the time that
   the color is specified.&lt;/p&gt;
 
+  &lt;p class=note&gt;Similar concerns exist with font-related properties;
+  the rules for those are described in detail in the relevant section
+  below.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -35154,6 +35173,7 @@
   &lt;/div&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-scale&gt;&lt;a href=#dom-context-2d-scale&gt;scale&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-scale&gt;&lt;a href=#dom-context-2d-scale&gt;scale&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35162,6 +35182,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-rotate&gt;&lt;a href=#dom-context-2d-rotate&gt;rotate&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-rotate&gt;&lt;a href=#dom-context-2d-rotate&gt;rotate&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35170,6 +35191,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-translate&gt;&lt;a href=#dom-context-2d-translate&gt;translate&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-translate&gt;&lt;a href=#dom-context-2d-translate&gt;translate&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35178,6 +35200,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-transform&gt;&lt;a href=#dom-context-2d-transform&gt;transform&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-transform&gt;&lt;a href=#dom-context-2d-transform&gt;transform&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35186,6 +35209,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-setTransform&gt;&lt;a href=#dom-context-2d-settransform&gt;setTransform&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-setTransform&gt;&lt;a href=#dom-context-2d-settransform&gt;setTransform&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35248,6 +35272,7 @@
   &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Line styles&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35259,6 +35284,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35273,6 +35299,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35287,6 +35314,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35431,6 +35459,7 @@
   &lt;h6 id=text-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Text styles&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35446,6 +35475,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35458,6 +35488,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35471,9 +35502,13 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface have
+  attributes (defined in this section) that control how text is laid
+  out (rasterized or outlined) by the object. Such objects also have a
+  &lt;dfn id=font-style-source-node&gt;font style source node&lt;/dfn&gt;. For
+  &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects, this is the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element. For &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects, it's the
+  &lt;a href=#path-scope-node&gt;path scope node&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
@@ -35487,15 +35522,16 @@
   'initial'), then it must be ignored, without assigning a new font
   value. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's stylesheets; any fonts embedded using
-  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
-  they are loaded. (If a font is referenced before it is fully loaded,
-  then it must be treated as if it was an unknown font, falling back
-  to another as described by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;Font names must be interpreted in the context of the &lt;a href=#font-style-source-node&gt;font
+  style source node&lt;/a&gt;'s stylesheets when the font is to be used;
+  any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; that are
+  visible to that element must therefore be available once they are
+  loaded. (If a reference font is used before it is fully loaded, or
+  if the &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt; does not have that font
+  in scope at the time the font is to be used, then it must be treated
+  as if it was an unknown font, falling back to another as described
+  by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;!-- XXX Path objects don't have a canvas --&gt;
-
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
   make the font look very ugly.&lt;/p&gt;
@@ -35524,17 +35560,20 @@
   sans-serif. When the 'font-size' component is set to lengths using
   percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
   keywords, these must be interpreted relative to the computed value
-  of the 'font-size' property of the corresponding &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-  element at the time that the attribute is set. When the
-  'font-weight' component is set to the relative values 'bolder' and
-  'lighter', these must be interpreted relative to the computed value
-  of the 'font-weight' property of the corresponding
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is set.
-  If the computed values are undefined for a particular case (e.g.
-  because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
+
+
+  of the 'font-size' property of the &lt;a href=#font-style-source-node&gt;font style source
+  node&lt;/a&gt; at the time that the attribute is set, if that is an
+  element. When the 'font-weight' component is set to the relative
+  values 'bolder' and 'lighter', these must be interpreted relative to
+  the computed value of the 'font-weight' property of the &lt;a href=#font-style-source-node&gt;font
+  style source node&lt;/a&gt; at the time that the attribute is set, if
+  that is an element. If the computed values are undefined for a
+  particular case (e.g. because the &lt;a href=#font-style-source-node&gt;font style source
+  node&lt;/a&gt; is not an element or is not &lt;a href=#in-a-document&gt;in a
   &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
   interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
+  default.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on getting, must return the current value. On setting, if
@@ -35584,22 +35623,195 @@
    &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
    &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/h6&gt;
+  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=text-preparation-algorithm&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes
+  as input a string &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, a
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and an
+  optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an array of
+  glyph shapes, each positioned on a common coordinate space, and a
+  &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
+  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/i&gt;. (Most callers of this
+  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;.)&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided but is less
+   than or equal to zero, return an empty array.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Replace all the &lt;a href=#space-character title=&quot;space character&quot;&gt;space
+   characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
+   characters.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, as given by that object's &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Apply the appropriate step from the following list to determine
+    the value of &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
+     source node&lt;/a&gt; is an element&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the
+     directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
+     &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
+     source node&lt;/a&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that
+     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has a root element child&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;a href=#the-directionality&gt;the
+     directionality&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
+     &lt;a href=#font-style-source-node&gt;font style source node&lt;/a&gt;'s root element child.&lt;/dd&gt;
+
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;a href=#font-style-source-node&gt;font style
+     source node&lt;/a&gt; is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; and that
+     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has no root element child&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;a href=#concept-ltr title=concept-ltr&gt;ltr&lt;/a&gt;'.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Form a hypothetical infinitely-wide CSS line box containing
+   a single inline box containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;,
+   with all the properties at their initial values except the 'font'
+   property of the inline box set to &lt;var title=&quot;&quot;&gt;font&lt;/var&gt;, the
+   'direction' property of the inline box set to &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;, and the 'white-space' property set to
+   'pre'. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;!-- if you insert a step here, make sure to adjust the next step's
+   final words --&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided and the
+   hypothetical width of the inline box in the hypothetical line box
+   is greater than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; CSS pixels, then
+   change &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if
+   one is available or if a reasonably readable one can be synthesized
+   by applying a horizontal scale factor to the font) or a smaller
+   font, and return to the previous step.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is a point on the inline
+    box, and the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is one of the
+    values &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/i&gt;. These
+    variables are determined by the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; values as
+    follows:&lt;/p&gt;
+
+    &lt;p&gt;Horizontal position:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'ltr'&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be the left edge of the inline box, and let &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be &lt;i&gt;left&lt;/i&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'ltr'&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be the right edge of the inline box, and let &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be &lt;i&gt;right&lt;/i&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be half way between the left and right edges of the
+     inline box, and let &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be
+     &lt;i&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/i&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;p&gt;Vertical position:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the top of the em box of the first available font of the
+     inline box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the hanging baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be half way between the bottom and the top of the em box of the
+     first available font of the inline box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the alphabetic baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the ideographic baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the bottom of the em box of the first available font of the
+     inline box.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be an array constructed by
+    iterating over each glyph in the inline box from left to right (if
+    any), adding to the array, for each glyph, the shape of the glyph
+    as it is in the inline box, positioned on a coordinate space using
+    CSS pixels with its origin is at the &lt;var title=&quot;&quot;&gt;anchor
+    point&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, and, for callers that
+   need it, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; as the alignment
+   value.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/h6&gt;
+
   &lt;p&gt;Each object implementing the &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
-  interface has a &lt;a href=#path&gt;path&lt;/a&gt;. A &lt;dfn id=path&gt;path&lt;/dfn&gt; has a list of
-  zero or more subpaths. Each subpath consists of a list of one or
-  more points, connected by straight or curved lines, and a flag
-  indicating whether the subpath is closed or not. A closed subpath is
-  one where the last point of the subpath is connected to the first
-  point of the subpath by a straight line. Subpaths with fewer than
-  two points are ignored when painting the path.&lt;/p&gt;
+  interface has a &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;. A &lt;dfn id=concept-path title=concept-path&gt;path&lt;/dfn&gt; has a list of zero or more subpaths.
+  Each subpath consists of a list of one or more points, connected by
+  straight or curved lines, and a flag indicating whether the subpath
+  is closed or not. A closed subpath is one where the last point of
+  the subpath is connected to the first point of the subpath by a
+  straight line. Subpaths with fewer than two points are ignored when
+  painting the path.&lt;/p&gt;
 
   &lt;p&gt;When an object implementing the &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
-  interface is created, its &lt;a href=#path&gt;path&lt;/a&gt; must be initialized to
-  zero subpaths.&lt;/p&gt;
+  interface is created, its &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;
+  must be initialized to zero subpaths.&lt;/p&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-moveTo&gt;&lt;a href=#dom-context-2d-moveto&gt;moveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-moveTo&gt;&lt;a href=#dom-context-2d-moveto&gt;moveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35608,6 +35820,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-closePath&gt;&lt;a href=#dom-context-2d-closepath&gt;closePath&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-closePath&gt;&lt;a href=#dom-context-2d-closepath&gt;closePath&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35616,6 +35829,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineTo&gt;&lt;a href=#dom-context-2d-lineto&gt;lineTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-lineTo&gt;&lt;a href=#dom-context-2d-lineto&gt;lineTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35624,6 +35838,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-quadraticCurveTo&gt;&lt;a href=#dom-context-2d-quadraticcurveto&gt;quadraticCurveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cpx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cpy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-quadraticCurveTo&gt;&lt;a href=#dom-context-2d-quadraticcurveto&gt;quadraticCurveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cpx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cpy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35632,6 +35847,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-bezierCurveTo&gt;&lt;a href=#dom-context-2d-beziercurveto&gt;bezierCurveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cp1x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp1y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-bezierCurveTo&gt;&lt;a href=#dom-context-2d-beziercurveto&gt;bezierCurveTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cp1x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp1y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35640,6 +35856,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-arcTo&gt;&lt;a href=#dom-context-2d-arcto&gt;arcTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-arcTo&gt;&lt;a href=#dom-context-2d-arcto&gt;arcTo&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35653,6 +35870,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-arc&gt;&lt;a href=#dom-context-2d-arc&gt;arc&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-arc&gt;&lt;a href=#dom-context-2d-arc&gt;arc&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35668,6 +35886,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-rect&gt;&lt;a href=#dom-context-2d-rect&gt;rect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-context-2d-rect&gt;&lt;a href=#dom-context-2d-rect&gt;rect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -35677,11 +35896,11 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The following methods allow authors to manipulate the &lt;a href=#path title=path&gt;paths&lt;/a&gt; of objects implementing the
+  &lt;p&gt;The following methods allow authors to manipulate the &lt;a href=#concept-path title=concept-path&gt;paths&lt;/a&gt; of objects implementing the
   &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
 
-  &lt;p&gt;The points and lines added to an object's &lt;a href=#path&gt;path&lt;/a&gt; by
-  these methods must be transformed according to the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+  &lt;p&gt;The points and lines added to an object's &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt; by these methods must be
+  transformed according to the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
   matrix&lt;/a&gt; of the object implementing the
   &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt; interface before they are added to
   the path.&lt;/p&gt;
@@ -35698,11 +35917,12 @@
 
   &lt;p&gt;When the user agent is to &lt;dfn id=ensure-there-is-a-subpath&gt;ensure there is a subpath&lt;/dfn&gt;
   for a coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) on a
-  &lt;a href=#path&gt;path&lt;/a&gt;, the user agent must check to see if the
-  &lt;a href=#path&gt;path&lt;/a&gt; has any subpaths, and if it does not, then the
-  user agent must create a new subpath with the point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as its first (and only)
-  point, as if the &lt;code title=dom-context-2d-moveTo&gt;&lt;a href=#dom-context-2d-moveto&gt;moveTo()&lt;/a&gt;&lt;/code&gt;
-  method had been called.&lt;/p&gt;
+  &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;, the user agent must check to
+  see if the &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt; has any subpaths,
+  and if it does not, then the user agent must create a new subpath
+  with the point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as its
+  first (and only) point, as if the &lt;code title=dom-context-2d-moveTo&gt;&lt;a href=#dom-context-2d-moveto&gt;moveTo()&lt;/a&gt;&lt;/code&gt; method had been
+  called.&lt;/p&gt;
 
 
   &lt;p&gt;The &lt;dfn id=dom-context-2d-closepath title=dom-context-2d-closePath&gt;&lt;code&gt;closePath()&lt;/code&gt;&lt;/dfn&gt;
@@ -35834,9 +36054,314 @@
 
 
 
+  &lt;h6 id=path-objects&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects&lt;/h6&gt;
 
-  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+  &lt;p&gt;&lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects can be used to declare paths that are
+  then later used on &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; objects. In
+  addition to many of the APIs described in earlier sections,
+  &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; objects have methods to combine paths, and to add
+  text to paths.&lt;/p&gt;
 
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; = new &lt;code title=dom-path&gt;&lt;a href=#dom-path&gt;Path&lt;/a&gt;&lt;/code&gt;([ &lt;var title=&quot;&quot;&gt;element&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Creates a new &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object, optionally using a specific element for resolving relative keywords and sizes in font specifications.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addFill&gt;&lt;a href=#dom-path-addfill&gt;addFill&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;path&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addStroke&gt;&lt;a href=#dom-path-addstroke&gt;addStroke&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;path&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds to the path the path given by the argument.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addFillText&gt;addFillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addFillText&gt;addFillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addStrokeText&gt;addStrokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=dom-path-addStrokeText&gt;addStrokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds to the path a series of subpaths corresponding to the given text. If the arguments give a coordinate, the text is drawn horizontally at the given coordinates. If the arguments give a path, the text is drawn along the path. If a maximum width is provided, the text will be scaled to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object has a &lt;dfn id=path-scope-node&gt;path scope node&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-path title=dom-path&gt;&lt;code&gt;Path()&lt;/code&gt;&lt;/dfn&gt; constructor,
+  when invoked, must return a newly created &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object.
+  If the constructor was passed an argument, then the
+  &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#path-scope-node&gt;path scope node&lt;/a&gt; is that
+  element. Otherwise, the object's &lt;a href=#path-scope-node&gt;path scope node&lt;/a&gt; is
+  the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#active-document&gt;active
+  document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of the
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the interface object of the
+  invoked constructor is found.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-path-addfill title=dom-path-addFill&gt;&lt;code&gt;addFill(&lt;var title=&quot;&quot;&gt;b&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked on a
+  &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; has
+   no subpaths, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a copy of all the subpaths in &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.
+   Let this copy be known as &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; by
+   the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+   transformation matrix&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+   last point in the last subpath of &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; with (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the
+   subpath.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-path-addstroke title=dom-path-addStroke&gt;&lt;code&gt;addStroke(&lt;var title=&quot;&quot;&gt;b&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked on a
+  &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; has
+   no subpaths, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a copy of all the subpaths in &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.
+   Let this copy be known as &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; by
+   the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+   transformation matrix&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new list of subpaths &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;,
+   consisting of the subpaths necessary to describe the result of
+   tracing the subpaths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, in the same order,
+   while applying the line styles of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; (the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+   appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes).
+   Subpaths in &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; must wind clockwise, regardless
+   of the direction of paths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;!--
+
+    Because both of these examples result in two lines (assuming
+    non-zero winding rules, things are different under even/odd),
+    there's no &quot;hole&quot; where the lines overlap:
+
+           c.beginPath();
+           c.lineWidth=30;
+           c.moveTo(200,200); // subpath 1
+           c.lineTo(400,200);
+           c.moveTo(400,210); // subpath 2
+           c.lineTo(200,190);
+           c.stroke();
+
+           c.beginPath();
+           c.lineWidth=30;
+           c.moveTo(200,200); // subpath 1
+           c.lineTo(400,200);
+           c.lineTo(300,300);
+           c.closePath();
+           c.moveTo(400,210); // subpath 2
+           c.lineTo(200,190);
+           c.lineTo(300,300);
+           c.closePath();
+           c.stroke();
+
+    ...and we want the same result when you create the two subpaths
+    in each example above as two Paths, stroke them onto a third
+    Path, and then fill that Path on the context.
+
+   --&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+   last point in the last subpath of &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; with (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the
+   subpath.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-addfilltext title=dom-context-2d-addFillText&gt;&lt;code&gt;addFillText()&lt;/code&gt;&lt;/dfn&gt; and
+  &lt;dfn id=dom-context-2d-addstroketext title=dom-context-2d-addStrokeText&gt;&lt;code&gt;addStrokeText()&lt;/code&gt;&lt;/dfn&gt;
+  methods each come in two variants: one rendering text at a given
+  coordinate, and one rendering text along a given path. In both
+  cases, a maximum width can optionally be provided.&lt;/p&gt;
+
+  &lt;p&gt;When one of the &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addFillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addStrokeText()&lt;/a&gt;&lt;/code&gt; variants
+  that take as argument an (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinate is invoked, the method must run the
+  following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object, and, if the
+   &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was provided, that argument.
+   Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the result.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; CSS pixels and down by &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; CSS pixels.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; be a list of subpaths
+   describing the shapes given in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt;, with
+   each CSS pixel in the coordinate space of &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; mapped to one coordinate space unit in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. Subpaths in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; must wind clockwise, regardless of how the user
+   agent's font subsystem renders fonts and regardless of how the
+   fonts themselves are defined.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If the method is &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addStrokeText()&lt;/a&gt;&lt;/code&gt;,
+   replace &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; by a new list of
+   subpaths consisting of the subpaths necessary to describe the
+   result of tracing the subpaths added to &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; in the preview step, in the same order, while
+   applying the line styles of the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object (the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+   appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes).
+   These subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; must also all
+   wind clockwise.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+   matrix&lt;/a&gt; of the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) be the last point in the
+   last subpath of &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; to the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object with
+   (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) as the only point in the
+   subpath.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When one of the &lt;code title=dom-context-2d-addFillText&gt;&lt;a href=#dom-context-2d-addfilltext&gt;addFillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addStrokeText()&lt;/a&gt;&lt;/code&gt; variants
+  that take as argument a &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object is invoked, the
+  method must run the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; be the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt;
+   object on which the method was invoked.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; be the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object
+   that was provided in the method's arguments.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Run the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and, if the
+   &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was provided, that argument.
+   Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the resulting array, and &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be the resulting alignment
+   value.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; be the aggregate length of all
+   the subpaths in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;, including the distances
+   from the last point of each closed subpath to the first point of
+   that subpath.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Define &lt;var title=&quot;&quot;&gt;L&lt;/var&gt; to be a linear coordinate line
+   for of all the subpaths in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;, with
+   additional lines drawn between the last point and the first point
+   of each closed subpath, such that the first point of the first
+   subpath is defined as point 0, and the last point of the last
+   subpath, if the last subpath is not closed, or the second
+   occurrence first point of that subpath, if it is closed, is defined
+   as point &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be determined according to the
+    appropriate step below:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;left&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be zero.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;right&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be half of &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; CSS pixels.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each glyph &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt; in the &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; array, run these substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the horizontal center of the
+     bounding box of the shape described by &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt;, in CSS pixels.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; is negative or greater than &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, skip the remainder of these substeps for
+     this glyph.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Recast &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; to coordinate spaces units
+     in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;. (This just changes the
+     dimensionality of &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, not its numeric
+     value.)&lt;/p&gt; &lt;!-- hide this step if people get confused by the
+     pedancy --&gt;
+
+     &lt;li&gt;&lt;p&gt;Find the point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt; on &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; (or implied closing lines in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;) that corresponds to the position &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; on the coordinate line &lt;var title=&quot;&quot;&gt;L&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&theta;&lt;/var&gt; be the clockwise angle
+     from the positive x-axis to the side of the line that is
+     tangential to &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; at the point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt; that is going in the same direction as the line
+     at point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Rotate the shape described by &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt;
+     clockwise by &lt;var title=&quot;&quot;&gt;&theta;&lt;/var&gt; about the point that is
+     at the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate horizontally and the
+     zero coordinate vertically.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+     coordinate of the point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Move the shape described by &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt; to
+     the right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and down by &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; be a list of
+     subpaths describing the shape given in &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt;,
+     with each CSS pixel in the coordinate space of &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt; mapped to one coordinate space unit in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. Subpaths in &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; must wind clockwise, regardless of how the user
+     agent's font subsystem renders fonts and regardless of how the
+     fonts themselves are defined.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;If the method is &lt;code title=dom-context-2d-addStrokeText&gt;&lt;a href=#dom-context-2d-addstroketext&gt;addStrokeText()&lt;/a&gt;&lt;/code&gt;,
+     replace &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; by a new list of
+     subpaths consisting of the subpaths necessary to describe the
+     result of tracing the subpaths added to &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; in the preview step, in the same order, while
+     applying the line styles of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object
+     (the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;,
+     &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+     appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes).
+     These subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; must also
+     all wind clockwise.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+     matrix&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) be the last point in
+     the last subpath of &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. (This
+     coordinate is only used if this is the last glyph
+     processed.)&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;
+     to &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in the &lt;code&gt;&lt;a href=#path&gt;Path&lt;/a&gt;&lt;/code&gt; object with
+   (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) as the only point in the
+   subpath.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+
+  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -36227,12 +36752,364 @@
 
 
 
-  &lt;h6 id=the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;The current default path&lt;/h6&gt;
 
+  &lt;h6 id=drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/h6&gt;
+
+  &lt;p&gt;There are three methods that immediately draw rectangles to the
+  bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
+  left of the rectangle, and the second two give the width &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
+  respectively.&lt;/p&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+  transformation matrix&lt;/a&gt; must be applied to the following four
+  coordinates, which form the path that must then be closed to get the
+  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Shapes are painted without affecting the current default path,
+  and are subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping
+  region&lt;/a&gt;, and, with the exception of &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt;, also &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
+  operators&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillRect&gt;&lt;a href=#dom-context-2d-fillrect&gt;fillRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeRect&gt;&lt;a href=#dom-context-2d-strokerect&gt;strokeRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
+  specified rectangle that also intersect the current clipping region
+  to a fully transparent black, erasing any previous image. If either
+  height or width are zero, this method has no effect.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
+  rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
+  or width are zero, this method has no effect.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokerect title=dom-context-2d-strokeRect&gt;&lt;code&gt;strokeRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
+  rectangle's path using the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+  appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes. If
+  both height and width are zero, this method has no effect, since
+  there is no path to stroke (it's a point). If only one of the two is
+  zero, then the method will draw a line instead (the path for the
+  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+  &lt;h6 id=drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/h6&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Fills or strokes (respectively) the given text at the given
+    position. If a maximum width is provided, the text will be scaled
+    to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the advance width of the text that was passed to the
+    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
+    method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the
+  following methods for rendering text directly to the canvas.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-filltext title=dom-context-2d-fillText&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
+  &lt;dfn id=dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
+  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;, and render the given &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; at the given (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that the text isn't wider
+  than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; if specified, using the current
+  &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
+  values. Specifically, when the methods are called, the user agent
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the &lt;a href=#text-preparation-algorithm&gt;text preparation algorithm&lt;/a&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, the &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt;
+   object, and, if the &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was
+   provided, that argument. Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the
+   result.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; CSS pixels and down by &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; CSS pixels.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Paint the shapes given in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt;, as
+    transformed by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+    matrix&lt;/a&gt;, with each CSS pixel in the coordinate space of &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; mapped to one coordinate space unit.&lt;/p&gt;
+
+    &lt;p&gt;For &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt;,
+    &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; must be
+    applied to the shapes and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; must be
+    ignored. For &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt;, the reverse
+    holds and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; must be
+    applied to the shape outlines, along with the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=#dom-context-2d-linecap&gt;lineCap&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+    appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes,
+    and &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; must
+    be ignored.&lt;/p&gt;
+
+    &lt;p&gt;These shapes are painted without affecting the current path,
+    and are subject to &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;,
+    &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, the
+    &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
+    operators&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;!--v6DVT - this is commented out until CSS can get its act together
+enough to actual specify vertical text rendering (how long have we
+been waiting now?)
+
+WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
+
+ALSO NOTE THAT THIS PROBABLY NEEDS ENTIRELY REVISITING NOW THAT WE
+HAVE REJIGGED HOW TEXT WORKS IN v5
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
+  and &lt;dfn
+  title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;&lt;code&gt;strokeVerticalText()&lt;/code&gt;&lt;/dfn&gt;
+  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var
+  title=&quot;&quot;&gt;maxHeight&lt;/var&gt;, and render the given &lt;var
+  title=&quot;&quot;&gt;text&lt;/var&gt; as vertical text at the given (&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that
+  the text isn't taller than &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; if
+  specified, using the current &lt;code
+  title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;
+  values. Specifically, when the methods are called, the user agent
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; is present but less than or
+   equal to zero, return without doing anything; abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
+   context, as given by the &lt;code
+   title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Replace all the &lt;span title=&quot;space character&quot;&gt;space
+   characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
+   characters.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Form a &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;whatever CSS ends up calling
+   vertical line boxes and inline boxes&lt;/em&gt; containing the text &lt;var
+   title=&quot;&quot;&gt;text&lt;/var&gt;, with all the properties at their initial
+   values except the 'font' property of the inline box set to &lt;var
+   title=&quot;&quot;&gt;font&lt;/var&gt; and the 'direction' property of the inline
+   box set to &lt;span&gt;the directionality&lt;/span&gt; of the &lt;code&gt;canvas&lt;/code&gt;
+   element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;!- - if you insert a step here, make sure to adjust the next step's
+   final words - -&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; argument was specified
+   and the hypothetical height of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;box&lt;/em&gt;
+   in the hypothetical line box is greater than &lt;var
+   title=&quot;&quot;&gt;maxHeight&lt;/var&gt; CSS pixels, then change &lt;var
+   title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if one is
+   available or if a reasonably readable one can be synthesized by
+   applying an appropriate scale factor to the font) or a smaller
+   font, and return to the previous step.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the &lt;em
+    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/var&gt;, determined by the &lt;code
+    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, as follows:&lt;/p&gt;
+
+    &lt;p&gt;Vertical position:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;start&lt;/code&gt;&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
+     position be the top edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
+     box&lt;/em&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;end&lt;/code&gt;&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
+     position be the bottom edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
+     box&lt;/em&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be half way between the top and bottom edges of the &lt;em
+     class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+    &lt;p&gt;Let the horizontal position be half way between the left and
+    right edges of the em box of the first available font of the &lt;em
+    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
+    text's glyphs, as transformed by the &lt;span
+    title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+    matrix&lt;/span&gt;, and anchored and sized so that before applying the
+    &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+    matrix&lt;/span&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
+    mapped to one coordinate space unit.&lt;/p&gt;
+
+    &lt;p&gt;For &lt;code
+    title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText()&lt;/code&gt;
+    &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
+    applied and &lt;code
+    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
+    ignored. For &lt;code
+    title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText()&lt;/code&gt;
+    the reverse holds and &lt;code
+    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
+    applied and &lt;code
+    title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
+    ignored.&lt;/p&gt;
+
+    &lt;p&gt;Text is painted without affecting the current path, and is
+    subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
+    title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the &lt;span
+    title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;, and &lt;span
+    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
+    operators&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+v6DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
+  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
+  is invoked, the user agent must replace all the &lt;a href=#space-character title=&quot;space
+  character&quot;&gt;space characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
+  U+0020 SPACE characters, and then must form a hypothetical
+  infinitely-wide CSS line box containing a single inline box
+  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
+  properties at their initial values except the 'white-space' property
+  of the inline element set to 'pre' and the 'font' property of the
+  inline element set to the current font of the context as given by
+  the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute, and
+  must then create a new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its
+  &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt; attribute set to
+  the width of that inline box, in CSS pixels.
+&lt;!--ADD-TOPIC:Security--&gt;
+  If doing these measurements requires using a font that has an
+  &lt;a href=#origin&gt;origin&lt;/a&gt; that is not the &lt;a href=#same-origin title=&quot;same
+  origin&quot;&gt;same&lt;/a&gt; as that of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that
+  owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element (even if &quot;using a font&quot; means
+  just checking if that font has a particular glyph in it before
+  falling back to another font), then the method must throw a
+  &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.
+&lt;!--REMOVE-TOPIC:Security--&gt;
+  Otherwise, it must return the new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object.
+  &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; interface is used for the objects
+  returned from &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;. It has one
+  attribute, &lt;dfn id=dom-textmetrics-width title=dom-textmetrics-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
+  by the &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
+  method.&lt;/p&gt;
+
+  &lt;p class=note&gt;Glyphs rendered using &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; can spill out
+  of the box given by the font size (the em square size) and the width
+  returned by &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt; (the text
+  width). This version of the specification does not provide a way to
+  obtain the bounding box dimensions of the text. If the text is to be
+  rendered and removed, care needs to be taken to replace the entire
+  area of the canvas that the clipping region covers, not just the box
+  given by the em square height and measured text width.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;p class=note&gt;A future version of the 2D context API may provide a
+  way to render fragments of documents, rendered using CSS, straight
+  to the canvas. This would be provided in preference to a dedicated
+  way of doing multiline layout.&lt;/p&gt;
+
+
+
+  &lt;h6 id=drawing-paths-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing paths to the canvas&lt;/h6&gt;
+
   &lt;p&gt;The context always has a current default path. There is only one
   current default path, it is not part of the &lt;a href=#drawing-state&gt;drawing
-  state&lt;/a&gt;. The current default path is a &lt;a href=#path&gt;path&lt;/a&gt;, as
-  described in the previous section.&lt;/p&gt;
+  state&lt;/a&gt;. The current default path is a &lt;a href=#concept-path title=concept-path&gt;path&lt;/a&gt;, as described in the previous
+  section.&lt;/p&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-beginPath&gt;&lt;a href=#dom-context-2d-beginpath&gt;beginPath&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
 
@@ -36566,462 +37443,8 @@
 
 
 
+  &lt;h6 id=drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Drawing images to the canvas&lt;/h6&gt;
 
-
-  &lt;h6 id=drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/h6&gt;
-
-  &lt;p&gt;There are three methods that immediately draw rectangles to the
-  bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
-  left of the rectangle, and the second two give the width &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
-  respectively.&lt;/p&gt;
-
-  &lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
-  transformation matrix&lt;/a&gt; must be applied to the following four
-  coordinates, which form the path that must then be closed to get the
-  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Shapes are painted without affecting the current default path,
-  and are subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping
-  region&lt;/a&gt;, and, with the exception of &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt;, also &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
-  operators&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillRect&gt;&lt;a href=#dom-context-2d-fillrect&gt;fillRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeRect&gt;&lt;a href=#dom-context-2d-strokerect&gt;strokeRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
-  rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
-  or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokerect title=dom-context-2d-strokeRect&gt;&lt;code&gt;strokeRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
-  rectangle's path using the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
-  appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes. If
-  both height and width are zero, this method has no effect, since
-  there is no path to stroke (it's a point). If only one of the two is
-  zero, then the method will draw a line instead (the path for the
-  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h6 id=drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/h6&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Fills or strokes (respectively) the given text at the given
-    position. If a maximum width is provided, the text will be scaled
-    to fit that width if necessary.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-    method.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#canvasrenderingcontext2d&gt;CanvasRenderingContext2D&lt;/a&gt;&lt;/code&gt; interface provides the
-  following methods for rendering text directly to the canvas.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-filltext title=dom-context-2d-fillText&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
-  &lt;dfn id=dom-context-2d-stroketext title=dom-context-2d-strokeText&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
-  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;, and render the given &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; at the given (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that the text isn't wider
-  than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; if specified, using the current
-  &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
-  values. Specifically, when the methods are called, the user agent
-  must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; is present but less than or
-   equal to zero, return without doing anything; abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
-   context, as given by the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Replace all the &lt;a href=#space-character title=&quot;space character&quot;&gt;space
-   characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
-   characters.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Form a hypothetical infinitely wide CSS line box containing
-   a single inline box containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;,
-   with all the properties at their initial values except the 'font'
-   property of the inline box set to &lt;var title=&quot;&quot;&gt;font&lt;/var&gt;, the
-   'direction' property of the inline box set to &lt;a href=#the-directionality&gt;the
-   directionality&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element, and the
-   'white-space' property set to 'pre'. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;!-- if you insert a step here, make sure to adjust the next step's
-   final words --&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was specified
-   and the hypothetical width of the inline box in the hypothetical
-   line box is greater than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; CSS pixels,
-   then change &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font
-   (if one is available or if a reasonably readable one can be
-   synthesized by applying a horizontal scale factor to the font) or a
-   smaller font, and return to the previous step.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the
-    inline box, determined by the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; values, as
-    follows:&lt;/p&gt;
-
-    &lt;p&gt;Horizontal position:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be the left edge of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and  &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;a href=#the-directionality&gt;the directionality&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be the right edge of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; is &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be half way between the left and right edges of the
-     inline box.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;p&gt;Vertical position:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the top of the em box of the first available font of the
-     inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the hanging baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be half way between the bottom and the top of the em box of the
-     first available font of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the alphabetic baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the ideographic baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; is &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the bottom of the em box of the first available font of the
-     inline box.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
-    text's glyphs, as transformed by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
-    matrix&lt;/a&gt;, and anchored and sized so that before applying the
-    &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
-    matrix&lt;/a&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
-    mapped to one coordinate space unit.&lt;/p&gt;
-
-    &lt;p&gt;For &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt;
-    &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; must be
-    applied to the glyphs and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; must be
-    ignored. For &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; the reverse
-    holds and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; must be
-    applied to the glyph outlines and &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; must be
-    ignored.&lt;/p&gt;
-
-    &lt;p&gt;Text is painted without affecting the current path, and is
-    subject to &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping region&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
-    operators&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;&lt;!--v6DVT - this is commented out until CSS can get its act together
-enough to actual specify vertical text rendering (how long have we
-been waiting now?)
-
-WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn
-  title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;&lt;code&gt;strokeVerticalText()&lt;/code&gt;&lt;/dfn&gt;
-  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var
-  title=&quot;&quot;&gt;maxHeight&lt;/var&gt;, and render the given &lt;var
-  title=&quot;&quot;&gt;text&lt;/var&gt; as vertical text at the given (&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that
-  the text isn't taller than &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; if
-  specified, using the current &lt;code
-  title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; and &lt;code
-  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;
-  values. Specifically, when the methods are called, the user agent
-  must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; is present but less than or
-   equal to zero, return without doing anything; abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
-   context, as given by the &lt;code
-   title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Replace all the &lt;span title=&quot;space character&quot;&gt;space
-   characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
-   characters.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Form a &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;whatever CSS ends up calling
-   vertical line boxes and inline boxes&lt;/em&gt; containing the text &lt;var
-   title=&quot;&quot;&gt;text&lt;/var&gt;, with all the properties at their initial
-   values except the 'font' property of the inline box set to &lt;var
-   title=&quot;&quot;&gt;font&lt;/var&gt; and the 'direction' property of the inline
-   box set to &lt;span&gt;the directionality&lt;/span&gt; of the &lt;code&gt;canvas&lt;/code&gt;
-   element.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;!- - if you insert a step here, make sure to adjust the next step's
-   final words - -&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; argument was specified
-   and the hypothetical height of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;box&lt;/em&gt;
-   in the hypothetical line box is greater than &lt;var
-   title=&quot;&quot;&gt;maxHeight&lt;/var&gt; CSS pixels, then change &lt;var
-   title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if one is
-   available or if a reasonably readable one can be synthesized by
-   applying an appropriate scale factor to the font) or a smaller
-   font, and return to the previous step.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the &lt;em
-    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/var&gt;, determined by the &lt;code
-    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, as follows:&lt;/p&gt;
-
-    &lt;p&gt;Vertical position:&lt;/p&gt;
-
-    &lt;dl&gt;
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;start&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
-     position be the top edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
-     box&lt;/em&gt;.&lt;/dd&gt;
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;end&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
-     position be the bottom edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
-     box&lt;/em&gt;.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be half way between the top and bottom edges of the &lt;em
-     class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-    &lt;p&gt;Let the horizontal position be half way between the left and
-    right edges of the em box of the first available font of the &lt;em
-    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
-    text's glyphs, as transformed by the &lt;span
-    title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-    matrix&lt;/span&gt;, and anchored and sized so that before applying the
-    &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-    matrix&lt;/span&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var
-    title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
-    mapped to one coordinate space unit.&lt;/p&gt;
-
-    &lt;p&gt;For &lt;code
-    title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText()&lt;/code&gt;
-    &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
-    applied and &lt;code
-    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
-    ignored. For &lt;code
-    title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText()&lt;/code&gt;
-    the reverse holds and &lt;code
-    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
-    applied and &lt;code
-    title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
-    ignored.&lt;/p&gt;
-
-    &lt;p&gt;Text is painted without affecting the current path, and is
-    subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
-    title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the &lt;span
-    title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;, and &lt;span
-    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
-    operators&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-v6DVT (also check for '- -' bits in the part above) --&gt;&lt;p&gt;The &lt;dfn id=dom-context-2d-measuretext title=dom-context-2d-measureText&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
-  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
-  is invoked, the user agent must replace all the &lt;a href=#space-character title=&quot;space
-  character&quot;&gt;space characters&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
-  U+0020 SPACE characters, and then must form a hypothetical
-  infinitely wide CSS line box containing a single inline box
-  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
-  properties at their initial values except the 'white-space' property
-  of the inline element set to 'pre' and the 'font' property of the
-  inline element set to the current font of the context as given by
-  the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; attribute, and
-  must then create a new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object with its
-  &lt;code title=dom-textmetrics-width&gt;&lt;a href=#dom-textmetrics-width&gt;width&lt;/a&gt;&lt;/code&gt; attribute set to
-  the width of that inline box, in CSS pixels.
-&lt;!--ADD-TOPIC:Security--&gt;
-  If doing these measurements requires using a font that has an
-  &lt;a href=#origin&gt;origin&lt;/a&gt; that is not the &lt;a href=#same-origin title=&quot;same
-  origin&quot;&gt;same&lt;/a&gt; as that of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object that
-  owns the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element (even if &quot;using a font&quot; means
-  just checking if that font has a particular glyph in it before
-  falling back to another font), then the method must throw a
-  &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.
-&lt;!--REMOVE-TOPIC:Security--&gt;
-  Otherwise, it must return the new &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; object.
-  &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#textmetrics&gt;TextMetrics&lt;/a&gt;&lt;/code&gt; interface is used for the objects
-  returned from &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;. It has one
-  attribute, &lt;dfn id=dom-textmetrics-width title=dom-textmetrics-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
-  by the &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt;
-  method.&lt;/p&gt;
-
-  &lt;p class=note&gt;Glyphs rendered using &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText()&lt;/a&gt;&lt;/code&gt; can spill out
-  of the box given by the font size (the em square size) and the width
-  returned by &lt;code title=dom-context-2d-measureText&gt;&lt;a href=#dom-context-2d-measuretext&gt;measureText()&lt;/a&gt;&lt;/code&gt; (the text
-  width). This version of the specification does not provide a way to
-  obtain the bounding box dimensions of the text. If the text is to be
-  rendered and removed, care needs to be taken to replace the entire
-  area of the canvas that the clipping region covers, not just the box
-  given by the em square height and measured text width.&lt;/p&gt;
-
-  &lt;!-- v5: Drawing text along a given path --&gt;
-  &lt;!-- v5: Adding text to a path --&gt;
-  &lt;!-- see also: <A HREF="http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules">http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules</A> --&gt;
-  &lt;!-- see also: <A HREF="http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas">http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas</A> --&gt;
-
-  &lt;/div&gt;
-
-  &lt;p class=note&gt;A future version of the 2D context API may provide a
-  way to render fragments of documents, rendered using CSS, straight
-  to the canvas. This would be provided in preference to a dedicated
-  way of doing multiline layout.&lt;/p&gt;
-
-
-
-  &lt;h6 id=drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing images to the canvas&lt;/h6&gt;
-
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
 
@@ -37164,7 +37587,7 @@
 
 
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
@@ -37500,7 +37923,7 @@
 
 
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Compositing&lt;/h6&gt;
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Compositing&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
@@ -37662,7 +38085,7 @@
 
 
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;All drawing operations are affected by the four global shadow
   attributes.&lt;/p&gt;
@@ -37803,7 +38226,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -37834,7 +38257,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Best practices&lt;/h6&gt;
+  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Best practices&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -37896,7 +38319,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.17 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 

Modified: source
===================================================================
--- source	2012-03-07 22:53:20 UTC (rev 7022)
+++ source	2012-03-09 23:58:48 UTC (rev 7023)
@@ -40681,8 +40681,22 @@
   readonly attribute unsigned long &lt;span title=&quot;dom-imagedata-width&quot;&gt;width&lt;/span&gt;;
   readonly attribute unsigned long &lt;span title=&quot;dom-imagedata-height&quot;&gt;height&lt;/span&gt;;
   readonly attribute &lt;span&gt;Uint8ClampedArray&lt;/span&gt; &lt;span title=&quot;dom-imagedata-data&quot;&gt;data&lt;/span&gt;;
-};&lt;/pre&gt;
+};
 
+[&lt;span title=&quot;dom-Path&quot;&gt;Constructor&lt;/span&gt;(optional &lt;span&gt;Element&lt;/span&gt; scope)]
+interface &lt;dfn&gt;Path&lt;/dfn&gt; {
+  void &lt;span title=&quot;dom-path-addFill&quot;&gt;addFill&lt;/span&gt;(&lt;span&gt;Path&lt;/span&gt; path);
+  void &lt;span title=&quot;dom-path-addStroke&quot;&gt;addStroke&lt;/span&gt;(&lt;span&gt;Path&lt;/span&gt; path);
+  void &lt;span title=&quot;dom-path-addFillText&quot;&gt;addFillText&lt;/span&gt;(DOMString text, double x, double y, optional double maxWidth);
+  void &lt;span title=&quot;dom-path-addStrokeText&quot;&gt;addStrokeText&lt;/span&gt;(DOMString text, double x, double y, optional double maxWidth);
+  void &lt;span title=&quot;dom-path-addFillText&quot;&gt;addFillText&lt;/span&gt;(DOMString text, &lt;span&gt;Path&lt;/span&gt; path, optional double maxWidth);
+  void &lt;span title=&quot;dom-path-addStrokeText&quot;&gt;addStrokeText&lt;/span&gt;(DOMString text, &lt;span&gt;Path&lt;/span&gt; path, optional double maxWidth);
+};
+&lt;span&gt;Path&lt;/span&gt; implements &lt;span&gt;CanvasTransformation&lt;/span&gt;;
+&lt;span&gt;Path&lt;/span&gt; implements &lt;span&gt;CanvasLineStyles&lt;/span&gt;;
+&lt;span&gt;Path&lt;/span&gt; implements &lt;span&gt;CanvasPathMethods&lt;/span&gt;;
+&lt;span&gt;Path&lt;/span&gt; implements &lt;span&gt;CanvasText&lt;/span&gt;;&lt;/pre&gt;
+
  &lt;!-- ARC-ORDER note (see above):
       some demos rely on the precise order of the arc() and arcTo()
       methods, see <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=623437">https://bugzilla.mozilla.org/show_bug.cgi?id=623437</A>
@@ -40751,6 +40765,10 @@
   no way to know which is the &quot;element in question&quot; at the time that
   the color is specified.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;Similar concerns exist with font-related properties;
+  the rules for those are described in detail in the relevant section
+  below.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -40868,6 +40886,7 @@
   &lt;dl class=&quot;domintro&quot;&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-scale&quot;&gt;scale&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-scale&quot;&gt;scale&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -40876,6 +40895,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-rotate&quot;&gt;rotate&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-rotate&quot;&gt;rotate&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;angle&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -40884,6 +40904,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-translate&quot;&gt;translate&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-translate&quot;&gt;translate&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -40892,6 +40913,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-transform&quot;&gt;transform&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-transform&quot;&gt;transform&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -40900,6 +40922,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-setTransform&quot;&gt;setTransform&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-setTransform&quot;&gt;setTransform&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;f&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -40998,6 +41021,7 @@
   &lt;dl class=&quot;domintro&quot;&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41009,6 +41033,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41023,6 +41048,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41037,6 +41063,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41200,6 +41227,7 @@
   &lt;dl class=&quot;domintro&quot;&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41215,6 +41243,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41229,6 +41258,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41244,9 +41274,13 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;CanvasText&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;CanvasText&lt;/code&gt; interface have
+  attributes (defined in this section) that control how text is laid
+  out (rasterized or outlined) by the object. Such objects also have a
+  &lt;dfn&gt;font style source node&lt;/dfn&gt;. For
+  &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; objects, this is the
+  &lt;code&gt;canvas&lt;/code&gt; element. For &lt;code&gt;Path&lt;/code&gt; objects, it's the
+  &lt;span&gt;path scope node&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-font&quot;&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute, on setting, must be parsed the same way as the 'font'
@@ -41260,16 +41294,17 @@
   'initial'), then it must be ignored, without assigning a new font
   value. &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the
-  &lt;code&gt;canvas&lt;/code&gt; element's stylesheets; any fonts embedded using
-  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
-  they are loaded. (If a font is referenced before it is fully loaded,
-  then it must be treated as if it was an unknown font, falling back
-  to another as described by the relevant CSS specifications.) &lt;a
+  &lt;p&gt;Font names must be interpreted in the context of the &lt;span&gt;font
+  style source node&lt;/span&gt;'s stylesheets when the font is to be used;
+  any fonts embedded using &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; that are
+  visible to that element must therefore be available once they are
+  loaded. (If a reference font is used before it is fully loaded, or
+  if the &lt;span&gt;font style source node&lt;/span&gt; does not have that font
+  in scope at the time the font is to be used, then it must be treated
+  as if it was an unknown font, falling back to another as described
+  by the relevant CSS specifications.) &lt;a
   href=&quot;#refsCSSFONTS&quot;&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;!-- XXX Path objects don't have a canvas --&gt;
-
   &lt;p&gt;Only vector fonts should be used by the user agent; if a user
   agent were to use bitmap fonts then transformations would likely
   make the font look very ugly.&lt;/p&gt;
@@ -41300,17 +41335,20 @@
   sans-serif. When the 'font-size' component is set to lengths using
   percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
   keywords, these must be interpreted relative to the computed value
-  of the 'font-size' property of the corresponding &lt;code&gt;canvas&lt;/code&gt;
-  element at the time that the attribute is set. When the
-  'font-weight' component is set to the relative values 'bolder' and
-  'lighter', these must be interpreted relative to the computed value
-  of the 'font-weight' property of the corresponding
-  &lt;code&gt;canvas&lt;/code&gt; element at the time that the attribute is set.
-  If the computed values are undefined for a particular case (e.g.
-  because the &lt;code&gt;canvas&lt;/code&gt; element is not &lt;span&gt;in a
+
+
+  of the 'font-size' property of the &lt;span&gt;font style source
+  node&lt;/span&gt; at the time that the attribute is set, if that is an
+  element. When the 'font-weight' component is set to the relative
+  values 'bolder' and 'lighter', these must be interpreted relative to
+  the computed value of the 'font-weight' property of the &lt;span&gt;font
+  style source node&lt;/span&gt; at the time that the attribute is set, if
+  that is an element. If the computed values are undefined for a
+  particular case (e.g. because the &lt;span&gt;font style source
+  node&lt;/span&gt; is not an element or is not &lt;span&gt;in a
   &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;), then the relative keywords must be
   interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
+  default.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-textAlign&quot;&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
@@ -41375,26 +41413,235 @@
 
   &lt;/dl&gt;
 
+  &lt;p&gt;The &lt;dfn&gt;text preparation algorithm&lt;/dfn&gt; is as follows. It takes
+  as input a string &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, a
+  &lt;code&gt;CanvasText&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and an
+  optional length &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt;. It returns an array of
+  glyph shapes, each positioned on a common coordinate space, and a
+  &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; whose value is one of
+  &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i&gt;center&lt;/i&gt;. (Most callers of this
+  algorithm ignore the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt;.)&lt;/p&gt;
 
+  &lt;ol&gt;
 
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided but is less
+   than or equal to zero, return an empty array.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Replace all the &lt;span title=&quot;space character&quot;&gt;space
+   characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
+   characters.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of &lt;var
+   title=&quot;&quot;&gt;target&lt;/var&gt;, as given by that object's &lt;code
+   title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Apply the appropriate step from the following list to determine
+    the value of &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;:&lt;/p&gt;
+
+    &lt;dl class=&quot;switch&quot;&gt;
+
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style
+     source node&lt;/span&gt; is an element&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;span&gt;the
+     directionality&lt;/span&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
+     &lt;span&gt;font style source node&lt;/span&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style
+     source node&lt;/span&gt; is a &lt;code&gt;Document&lt;/code&gt; and that
+     &lt;code&gt;Document&lt;/code&gt; has a root element child&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;span&gt;the
+     directionality&lt;/span&gt; of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's
+     &lt;span&gt;font style source node&lt;/span&gt;'s root element child.&lt;/dd&gt;
+
+     &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object's &lt;span&gt;font style
+     source node&lt;/span&gt; is a &lt;code&gt;Document&lt;/code&gt; and that
+     &lt;code&gt;Document&lt;/code&gt; has no root element child&lt;/dt&gt;
+
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be '&lt;span
+     title=&quot;concept-ltr&quot;&gt;ltr&lt;/span&gt;'.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Form a hypothetical infinitely-wide CSS line box containing
+   a single inline box containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;,
+   with all the properties at their initial values except the 'font'
+   property of the inline box set to &lt;var title=&quot;&quot;&gt;font&lt;/var&gt;, the
+   'direction' property of the inline box set to &lt;var
+   title=&quot;&quot;&gt;direction&lt;/var&gt;, and the 'white-space' property set to
+   'pre'. &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+
+   &lt;!-- if you insert a step here, make sure to adjust the next step's
+   final words --&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; was provided and the
+   hypothetical width of the inline box in the hypothetical line box
+   is greater than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; CSS pixels, then
+   change &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if
+   one is available or if a reasonably readable one can be synthesized
+   by applying a horizontal scale factor to the font) or a smaller
+   font, and return to the previous step.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is a point on the inline
+    box, and the &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is one of the
+    values &lt;i&gt;left&lt;/i&gt;, &lt;i&gt;right&lt;/i&gt;, and &lt;i&gt;center&lt;/i&gt;. These
+    variables are determined by the &lt;code
+    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; and &lt;code
+    title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; values as
+    follows:&lt;/p&gt;
+
+    &lt;p&gt;Horizontal position:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'ltr'&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be the left edge of the inline box, and let &lt;var
+     title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be &lt;i&gt;left&lt;/i&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'ltr'&lt;/dt&gt;
+
+     &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be the right edge of the inline box, and let &lt;var
+     title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be &lt;i&gt;right&lt;/i&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is
+     &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
+     position be half way between the left and right edges of the
+     inline box, and let &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be
+     &lt;i&gt;center&lt;/i&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+    &lt;p&gt;Vertical position:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
+     title=&quot;dom-context-2d-textBaseline-top&quot;&gt;top&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the top of the em box of the first available font of the
+     inline box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
+     title=&quot;dom-context-2d-textBaseline-hanging&quot;&gt;hanging&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the hanging baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
+     title=&quot;dom-context-2d-textBaseline-middle&quot;&gt;middle&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be half way between the bottom and the top of the em box of the
+     first available font of the inline box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
+     title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;alphabetic&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the alphabetic baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
+     title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;ideographic&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the ideographic baseline of the first available font of the inline
+     box.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
+     title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;bottom&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be the bottom of the em box of the first available font of the
+     inline box.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be an array constructed by
+    iterating over each glyph in the inline box from left to right (if
+    any), adding to the array, for each glyph, the shape of the glyph
+    as it is in the inline box, positioned on a coordinate space using
+    CSS pixels with its origin is at the &lt;var title=&quot;&quot;&gt;anchor
+    point&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;, and, for callers that
+   need it, &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; as the alignment
+   value.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+
   &lt;h6&gt;Building paths&lt;/h6&gt;
 
   &lt;p&gt;Each object implementing the &lt;code&gt;CanvasPathMethods&lt;/code&gt;
-  interface has a &lt;span&gt;path&lt;/span&gt;. A &lt;dfn&gt;path&lt;/dfn&gt; has a list of
-  zero or more subpaths. Each subpath consists of a list of one or
-  more points, connected by straight or curved lines, and a flag
-  indicating whether the subpath is closed or not. A closed subpath is
-  one where the last point of the subpath is connected to the first
-  point of the subpath by a straight line. Subpaths with fewer than
-  two points are ignored when painting the path.&lt;/p&gt;
+  interface has a &lt;span title=&quot;concept-path&quot;&gt;path&lt;/span&gt;. A &lt;dfn
+  title=&quot;concept-path&quot;&gt;path&lt;/dfn&gt; has a list of zero or more subpaths.
+  Each subpath consists of a list of one or more points, connected by
+  straight or curved lines, and a flag indicating whether the subpath
+  is closed or not. A closed subpath is one where the last point of
+  the subpath is connected to the first point of the subpath by a
+  straight line. Subpaths with fewer than two points are ignored when
+  painting the path.&lt;/p&gt;
 
   &lt;p&gt;When an object implementing the &lt;code&gt;CanvasPathMethods&lt;/code&gt;
-  interface is created, its &lt;span&gt;path&lt;/span&gt; must be initialized to
-  zero subpaths.&lt;/p&gt;
+  interface is created, its &lt;span title=&quot;concept-path&quot;&gt;path&lt;/span&gt;
+  must be initialized to zero subpaths.&lt;/p&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-moveTo&quot;&gt;moveTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-moveTo&quot;&gt;moveTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41403,6 +41650,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-closePath&quot;&gt;closePath&lt;/code&gt;()&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-closePath&quot;&gt;closePath&lt;/code&gt;()&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41411,6 +41659,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-lineTo&quot;&gt;lineTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-lineTo&quot;&gt;lineTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41419,6 +41668,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-quadraticCurveTo&quot;&gt;quadraticCurveTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cpx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cpy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-quadraticCurveTo&quot;&gt;quadraticCurveTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cpx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cpy&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41427,6 +41677,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-bezierCurveTo&quot;&gt;bezierCurveTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cp1x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp1y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-bezierCurveTo&quot;&gt;bezierCurveTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;cp1x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp1y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cp2y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41435,6 +41686,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-arcTo&quot;&gt;arcTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-arcTo&quot;&gt;arcTo&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y2&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41448,6 +41700,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-arc&quot;&gt;arc&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-arc&quot;&gt;arc&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;radius&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;startAngle&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endAngle&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;anticlockwise&lt;/var&gt; ] )&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41463,6 +41716,7 @@
    &lt;/dd&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-rect&quot;&gt;rect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-rect&quot;&gt;rect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -41475,11 +41729,12 @@
   &lt;div class=&quot;impl&quot;&gt;
 
   &lt;p&gt;The following methods allow authors to manipulate the &lt;span
-  title=&quot;path&quot;&gt;paths&lt;/span&gt; of objects implementing the
+  title=&quot;concept-path&quot;&gt;paths&lt;/span&gt; of objects implementing the
   &lt;code&gt;CanvasPathMethods&lt;/code&gt; interface.&lt;/p&gt;
 
-  &lt;p&gt;The points and lines added to an object's &lt;span&gt;path&lt;/span&gt; by
-  these methods must be transformed according to the &lt;span
+  &lt;p&gt;The points and lines added to an object's &lt;span
+  title=&quot;concept-path&quot;&gt;path&lt;/span&gt; by these methods must be
+  transformed according to the &lt;span
   title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
   matrix&lt;/span&gt; of the object implementing the
   &lt;code&gt;CanvasPathMethods&lt;/code&gt; interface before they are added to
@@ -41499,12 +41754,13 @@
 
   &lt;p&gt;When the user agent is to &lt;dfn&gt;ensure there is a subpath&lt;/dfn&gt;
   for a coordinate (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) on a
-  &lt;span&gt;path&lt;/span&gt;, the user agent must check to see if the
-  &lt;span&gt;path&lt;/span&gt; has any subpaths, and if it does not, then the
-  user agent must create a new subpath with the point (&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as its first (and only)
-  point, as if the &lt;code title=&quot;dom-context-2d-moveTo&quot;&gt;moveTo()&lt;/code&gt;
-  method had been called.&lt;/p&gt;
+  &lt;span title=&quot;concept-path&quot;&gt;path&lt;/span&gt;, the user agent must check to
+  see if the &lt;span title=&quot;concept-path&quot;&gt;path&lt;/span&gt; has any subpaths,
+  and if it does not, then the user agent must create a new subpath
+  with the point (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as its
+  first (and only) point, as if the &lt;code
+  title=&quot;dom-context-2d-moveTo&quot;&gt;moveTo()&lt;/code&gt; method had been
+  called.&lt;/p&gt;
 
 
   &lt;p&gt;The &lt;dfn
@@ -41685,7 +41941,387 @@
 
 
 
+  &lt;h6&gt;&lt;code&gt;Path&lt;/code&gt; objects&lt;/h6&gt;
 
+  &lt;p&gt;&lt;code&gt;Path&lt;/code&gt; objects can be used to declare paths that are
+  then later used on &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; objects. In
+  addition to many of the APIs described in earlier sections,
+  &lt;code&gt;Path&lt;/code&gt; objects have methods to combine paths, and to add
+  text to paths.&lt;/p&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; = new &lt;code title=&quot;dom-path&quot;&gt;Path&lt;/code&gt;([ &lt;var title=&quot;&quot;&gt;element&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Creates a new &lt;code&gt;Path&lt;/code&gt; object, optionally using a specific element for resolving relative keywords and sizes in font specifications.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-path-addFill&quot;&gt;addFill&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;path&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-path-addStroke&quot;&gt;addStroke&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;path&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds to the path the path given by the argument.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-path-addFillText&quot;&gt;addFillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-path-addFillText&quot;&gt;addFillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-path-addStrokeText&quot;&gt;addStrokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;path&lt;/var&gt; . &lt;code title=&quot;dom-path-addStrokeText&quot;&gt;addStrokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ])&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds to the path a series of subpaths corresponding to the given text. If the arguments give a coordinate, the text is drawn horizontally at the given coordinates. If the arguments give a path, the text is drawn along the path. If a maximum width is provided, the text will be scaled to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;Each &lt;code&gt;Path&lt;/code&gt; object has a &lt;dfn&gt;path scope node&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-path&quot;&gt;&lt;code&gt;Path()&lt;/code&gt;&lt;/dfn&gt; constructor,
+  when invoked, must return a newly created &lt;code&gt;Path&lt;/code&gt; object.
+  If the constructor was passed an argument, then the
+  &lt;code&gt;Path&lt;/code&gt; object's &lt;span&gt;path scope node&lt;/span&gt; is that
+  element. Otherwise, the object's &lt;span&gt;path scope node&lt;/span&gt; is
+  the &lt;code&gt;Document&lt;/code&gt; object of the &lt;span&gt;active
+  document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; of the
+  &lt;code&gt;Window&lt;/code&gt; object on which the interface object of the
+  invoked constructor is found.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-path-addFill&quot;&gt;&lt;code&gt;addFill(&lt;var
+  title=&quot;&quot;&gt;b&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked on a
+  &lt;code&gt;Path&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;Path&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; has
+   no subpaths, abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a copy of all the subpaths in &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.
+   Let this copy be known as &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; by
+   the &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
+   transformation matrix&lt;/span&gt; of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+   last point in the last subpath of &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; to &lt;var
+   title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; with (&lt;var
+   title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the
+   subpath.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-path-addStroke&quot;&gt;&lt;code&gt;addStroke(&lt;var
+  title=&quot;&quot;&gt;b&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked on a
+  &lt;code&gt;Path&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;, must run the
+  following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;Path&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; has
+   no subpaths, abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a copy of all the subpaths in &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.
+   Let this copy be known as &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; by
+   the &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
+   transformation matrix&lt;/span&gt; of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new list of subpaths &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;,
+   consisting of the subpaths necessary to describe the result of
+   tracing the subpaths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;, in the same order,
+   while applying the line styles of &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; (the &lt;code
+   title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;, &lt;code
+   title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt;, &lt;code
+   title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
+   appropriate) &lt;code
+   title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes).
+   Subpaths in &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; must wind clockwise, regardless
+   of the direction of paths in &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;!--
+
+    Because both of these examples result in two lines (assuming
+    non-zero winding rules, things are different under even/odd),
+    there's no &quot;hole&quot; where the lines overlap:
+
+           c.beginPath();
+           c.lineWidth=30;
+           c.moveTo(200,200); // subpath 1
+           c.lineTo(400,200);
+           c.moveTo(400,210); // subpath 2
+           c.lineTo(200,190);
+           c.stroke();
+
+           c.beginPath();
+           c.lineWidth=30;
+           c.moveTo(200,200); // subpath 1
+           c.lineTo(400,200);
+           c.lineTo(300,300);
+           c.closePath();
+           c.moveTo(400,210); // subpath 2
+           c.lineTo(200,190);
+           c.lineTo(300,300);
+           c.closePath();
+           c.stroke();
+
+    ...and we want the same result when you create the two subpaths
+    in each example above as two Paths, stroke them onto a third
+    Path, and then fill that Path on the context.
+
+   --&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+   last point in the last subpath of &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; to &lt;var
+   title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; with (&lt;var
+   title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) as the only point in the
+   subpath.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-addFillText&quot;&gt;&lt;code&gt;addFillText()&lt;/code&gt;&lt;/dfn&gt; and
+  &lt;dfn
+  title=&quot;dom-context-2d-addStrokeText&quot;&gt;&lt;code&gt;addStrokeText()&lt;/code&gt;&lt;/dfn&gt;
+  methods each come in two variants: one rendering text at a given
+  coordinate, and one rendering text along a given path. In both
+  cases, a maximum width can optionally be provided.&lt;/p&gt;
+
+  &lt;p&gt;When one of the &lt;code
+  title=&quot;dom-context-2d-addStrokeText&quot;&gt;addFillText()&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-addStrokeText&quot;&gt;addStrokeText()&lt;/code&gt; variants
+  that take as argument an (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;y&lt;/var&gt;) coordinate is invoked, the method must run the
+  following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Run the &lt;span&gt;text preparation algorithm&lt;/span&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, the &lt;code&gt;Path&lt;/code&gt; object, and, if the
+   &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was provided, that argument.
+   Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the result.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; CSS pixels and down by &lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt; CSS pixels.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; be a list of subpaths
+   describing the shapes given in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt;, with
+   each CSS pixel in the coordinate space of &lt;var
+   title=&quot;&quot;&gt;glyphs&lt;/var&gt; mapped to one coordinate space unit in &lt;var
+   title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. Subpaths in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; must wind clockwise, regardless of how the user
+   agent's font subsystem renders fonts and regardless of how the
+   fonts themselves are defined.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If the method is &lt;code
+   title=&quot;dom-context-2d-addStrokeText&quot;&gt;addStrokeText()&lt;/code&gt;,
+   replace &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; by a new list of
+   subpaths consisting of the subpaths necessary to describe the
+   result of tracing the subpaths added to &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; in the preview step, in the same order, while
+   applying the line styles of the &lt;code&gt;Path&lt;/code&gt; object (the &lt;code
+   title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;, &lt;code
+   title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt;, &lt;code
+   title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
+   appropriate) &lt;code
+   title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes).
+   These subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; must also all
+   wind clockwise.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; by the &lt;span
+   title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+   matrix&lt;/span&gt; of the &lt;code&gt;Path&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) be the last point in the
+   last subpath of &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;glyph
+   subpaths&lt;/var&gt; to the &lt;code&gt;Path&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in the &lt;code&gt;Path&lt;/code&gt; object with
+   (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) as the only point in the
+   subpath.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;When one of the &lt;code
+  title=&quot;dom-context-2d-addFillText&quot;&gt;addFillText()&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-addStrokeText&quot;&gt;addStrokeText()&lt;/code&gt; variants
+  that take as argument a &lt;code&gt;Path&lt;/code&gt; object is invoked, the
+  method must run the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; be the &lt;code&gt;Path&lt;/code&gt;
+   object on which the method was invoked.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; be the &lt;code&gt;Path&lt;/code&gt; object
+   that was provided in the method's arguments.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Run the &lt;span&gt;text preparation algorithm&lt;/span&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, and, if the
+   &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was provided, that argument.
+   Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the resulting array, and &lt;var
+   title=&quot;&quot;&gt;physical alignment&lt;/var&gt; be the resulting alignment
+   value.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; be the aggregate length of all
+   the subpaths in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;, including the distances
+   from the last point of each closed subpath to the first point of
+   that subpath.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Define &lt;var title=&quot;&quot;&gt;L&lt;/var&gt; to be a linear coordinate line
+   for of all the subpaths in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;, with
+   additional lines drawn between the last point and the first point
+   of each closed subpath, such that the first point of the first
+   subpath is defined as point 0, and the last point of the last
+   subpath, if the last subpath is not closed, or the second
+   occurrence first point of that subpath, if it is closed, is defined
+   as point &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be determined according to the
+    appropriate step below:&lt;/p&gt;
+
+    &lt;dl class=&quot;switch&quot;&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;left&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be zero.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;right&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;physical alignment&lt;/var&gt; is &lt;i&gt;center&lt;/i&gt;&lt;/dt&gt;
+     &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; be half of &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; CSS pixels.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each glyph &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt; in the &lt;var
+    title=&quot;&quot;&gt;glyphs&lt;/var&gt; array, run these substeps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; be the &lt;var
+     title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the horizontal center of the
+     bounding box of the shape described by &lt;var
+     title=&quot;&quot;&gt;glyph&lt;/var&gt;, in CSS pixels.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; is negative or greater than &lt;var
+     title=&quot;&quot;&gt;width&lt;/var&gt;, skip the remainder of these substeps for
+     this glyph.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Recast &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; to coordinate spaces units
+     in &lt;var title=&quot;&quot;&gt;path&lt;/var&gt;. (This just changes the
+     dimensionality of &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt;, not its numeric
+     value.)&lt;/p&gt; &lt;!-- hide this step if people get confused by the
+     pedancy --&gt;
+
+     &lt;li&gt;&lt;p&gt;Find the point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt; on &lt;var
+     title=&quot;&quot;&gt;path&lt;/var&gt; (or implied closing lines in &lt;var
+     title=&quot;&quot;&gt;path&lt;/var&gt;) that corresponds to the position &lt;var
+     title=&quot;&quot;&gt;dx&lt;/var&gt; on the coordinate line &lt;var
+     title=&quot;&quot;&gt;L&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&theta;&lt;/var&gt; be the clockwise angle
+     from the positive x-axis to the side of the line that is
+     tangential to &lt;var title=&quot;&quot;&gt;path&lt;/var&gt; at the point &lt;var
+     title=&quot;&quot;&gt;p&lt;/var&gt; that is going in the same direction as the line
+     at point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Rotate the shape described by &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt;
+     clockwise by &lt;var title=&quot;&quot;&gt;&theta;&lt;/var&gt; about the point that is
+     at the &lt;var title=&quot;&quot;&gt;dx&lt;/var&gt; coordinate horizontally and the
+     zero coordinate vertically.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) be the
+     coordinate of the point &lt;var title=&quot;&quot;&gt;p&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Move the shape described by &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt; to
+     the right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and down by &lt;var
+     title=&quot;&quot;&gt;y&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; be a list of
+     subpaths describing the shape given in &lt;var title=&quot;&quot;&gt;glyph&lt;/var&gt;,
+     with each CSS pixel in the coordinate space of &lt;var
+     title=&quot;&quot;&gt;glyph&lt;/var&gt; mapped to one coordinate space unit in &lt;var
+     title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. Subpaths in &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; must wind clockwise, regardless of how the user
+     agent's font subsystem renders fonts and regardless of how the
+     fonts themselves are defined.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;If the method is &lt;code
+     title=&quot;dom-context-2d-addStrokeText&quot;&gt;addStrokeText()&lt;/code&gt;,
+     replace &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; by a new list of
+     subpaths consisting of the subpaths necessary to describe the
+     result of tracing the subpaths added to &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; in the preview step, in the same order, while
+     applying the line styles of the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; object
+     (the &lt;code title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;,
+     &lt;code title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt;, &lt;code
+     title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
+     appropriate) &lt;code
+     title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes).
+     These subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt; must also
+     all wind clockwise.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Transform all the coordinates in &lt;var title=&quot;&quot;&gt;glyph
+     subpaths&lt;/var&gt; by the &lt;span
+     title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+     matrix&lt;/span&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var
+     title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) be the last point in
+     the last subpath of &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;. (This
+     coordinate is only used if this is the last glyph
+     processed.)&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Add all the subpaths in &lt;var title=&quot;&quot;&gt;glyph subpaths&lt;/var&gt;
+     to &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new subpath in the &lt;code&gt;Path&lt;/code&gt; object with
+   (&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;final&lt;/sub&gt;&lt;/var&gt;) as the only point in the
+   subpath.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;/div&gt;
+
+
   &lt;h6&gt;Fill and stroke styles&lt;/h6&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
@@ -42168,12 +42804,424 @@
 
 
 
-  &lt;h6&gt;The current default path&lt;/h6&gt;
 
+  &lt;h6&gt;Drawing rectangles to the canvas&lt;/h6&gt;
+
+  &lt;p&gt;There are three methods that immediately draw rectangles to the
+  bitmap. They each take four arguments; the first two give the &lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
+  left of the rectangle, and the second two give the width &lt;var
+  title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
+  respectively.&lt;/p&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
+  transformation matrix&lt;/span&gt; must be applied to the following four
+  coordinates, which form the path that must then be closed to get the
+  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var
+  title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Shapes are painted without affecting the current default path,
+  and are subject to the &lt;span title=&quot;clipping region&quot;&gt;clipping
+  region&lt;/span&gt;, and, with the exception of &lt;code
+  title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect()&lt;/code&gt;, also &lt;span
+  title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
+  title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, and &lt;span
+  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
+  operators&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillRect&quot;&gt;fillRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeRect&quot;&gt;strokeRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-clearRect&quot;&gt;&lt;code&gt;clearRect(&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
+  specified rectangle that also intersect the current clipping region
+  to a fully transparent black, erasing any previous image. If either
+  height or width are zero, this method has no effect.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-fillRect&quot;&gt;&lt;code&gt;fillRect(&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
+  rectangular area using the &lt;code
+  title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt;. If either height
+  or width are zero, this method has no effect.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-strokeRect&quot;&gt;&lt;code&gt;strokeRect(&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
+  rectangle's path using the &lt;code
+  title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
+  appropriate) &lt;code
+  title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes. If
+  both height and width are zero, this method has no effect, since
+  there is no path to stroke (it's a point). If only one of the two is
+  zero, then the method will draw a line instead (the path for the
+  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+  &lt;h6&gt;Drawing text to the canvas&lt;/h6&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillText&quot;&gt;fillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Fills or strokes (respectively) the given text at the given
+    position. If a maximum width is provided, the text will be scaled
+    to fit that width if necessary.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;TextMetrics&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the advance width of the text that was passed to the
+    &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;
+    method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; interface provides the
+  following methods for rendering text directly to the canvas.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-fillText&quot;&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
+  &lt;dfn
+  title=&quot;dom-context-2d-strokeText&quot;&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
+  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var
+  title=&quot;&quot;&gt;maxWidth&lt;/var&gt;, and render the given &lt;var
+  title=&quot;&quot;&gt;text&lt;/var&gt; at the given (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that the text isn't wider
+  than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; if specified, using the current
+  &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, and &lt;code
+  title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt;
+  values. Specifically, when the methods are called, the user agent
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Run the &lt;span&gt;text preparation algorithm&lt;/span&gt;, passing it
+   &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, the &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt;
+   object, and, if the &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was
+   provided, that argument. Let &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; be the
+   result.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Move all the shapes in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt; to the
+   right by &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; CSS pixels and down by &lt;var
+   title=&quot;&quot;&gt;y&lt;/var&gt; CSS pixels.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Paint the shapes given in &lt;var title=&quot;&quot;&gt;glyphs&lt;/var&gt;, as
+    transformed by the &lt;span
+    title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+    matrix&lt;/span&gt;, with each CSS pixel in the coordinate space of &lt;var
+    title=&quot;&quot;&gt;glyphs&lt;/var&gt; mapped to one coordinate space unit.&lt;/p&gt;
+
+    &lt;p&gt;For &lt;code title=&quot;dom-context-2d-fillText&quot;&gt;fillText()&lt;/code&gt;,
+    &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
+    applied to the shapes and &lt;code
+    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
+    ignored. For &lt;code
+    title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText()&lt;/code&gt;, the reverse
+    holds and &lt;code
+    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
+    applied to the shape outlines, along with the &lt;code
+    title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;, &lt;code
+    title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt;, &lt;code
+    title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
+    appropriate) &lt;code
+    title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes,
+    and &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must
+    be ignored.&lt;/p&gt;
+
+    &lt;p&gt;These shapes are painted without affecting the current path,
+    and are subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;,
+    &lt;span title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the
+    &lt;span title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;, and &lt;span
+    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
+    operators&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+&lt;!--v6DVT - this is commented out until CSS can get its act together
+enough to actual specify vertical text rendering (how long have we
+been waiting now?)
+
+WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
+
+ALSO NOTE THAT THIS PROBABLY NEEDS ENTIRELY REVISITING NOW THAT WE
+HAVE REJIGGED HOW TEXT WORKS IN v5
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
+  and &lt;dfn
+  title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;&lt;code&gt;strokeVerticalText()&lt;/code&gt;&lt;/dfn&gt;
+  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var
+  title=&quot;&quot;&gt;maxHeight&lt;/var&gt;, and render the given &lt;var
+  title=&quot;&quot;&gt;text&lt;/var&gt; as vertical text at the given (&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that
+  the text isn't taller than &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; if
+  specified, using the current &lt;code
+  title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;
+  values. Specifically, when the methods are called, the user agent
+  must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; is present but less than or
+   equal to zero, return without doing anything; abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
+   context, as given by the &lt;code
+   title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Replace all the &lt;span title=&quot;space character&quot;&gt;space
+   characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
+   characters.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Form a &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;whatever CSS ends up calling
+   vertical line boxes and inline boxes&lt;/em&gt; containing the text &lt;var
+   title=&quot;&quot;&gt;text&lt;/var&gt;, with all the properties at their initial
+   values except the 'font' property of the inline box set to &lt;var
+   title=&quot;&quot;&gt;font&lt;/var&gt; and the 'direction' property of the inline
+   box set to &lt;span&gt;the directionality&lt;/span&gt; of the &lt;code&gt;canvas&lt;/code&gt;
+   element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;!- - if you insert a step here, make sure to adjust the next step's
+   final words - -&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; argument was specified
+   and the hypothetical height of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;box&lt;/em&gt;
+   in the hypothetical line box is greater than &lt;var
+   title=&quot;&quot;&gt;maxHeight&lt;/var&gt; CSS pixels, then change &lt;var
+   title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if one is
+   available or if a reasonably readable one can be synthesized by
+   applying an appropriate scale factor to the font) or a smaller
+   font, and return to the previous step.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the &lt;em
+    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/var&gt;, determined by the &lt;code
+    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, as follows:&lt;/p&gt;
+
+    &lt;p&gt;Vertical position:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;start&lt;/code&gt;&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
+     position be the top edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
+     box&lt;/em&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;end&lt;/code&gt;&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
+     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
+     position be the bottom edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
+     box&lt;/em&gt;.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;code
+     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
+     title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
+     be half way between the top and bottom edges of the &lt;em
+     class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+    &lt;p&gt;Let the horizontal position be half way between the left and
+    right edges of the em box of the first available font of the &lt;em
+    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
+    text's glyphs, as transformed by the &lt;span
+    title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+    matrix&lt;/span&gt;, and anchored and sized so that before applying the
+    &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+    matrix&lt;/span&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
+    mapped to one coordinate space unit.&lt;/p&gt;
+
+    &lt;p&gt;For &lt;code
+    title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText()&lt;/code&gt;
+    &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
+    applied and &lt;code
+    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
+    ignored. For &lt;code
+    title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText()&lt;/code&gt;
+    the reverse holds and &lt;code
+    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
+    applied and &lt;code
+    title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
+    ignored.&lt;/p&gt;
+
+    &lt;p&gt;Text is painted without affecting the current path, and is
+    subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
+    title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the &lt;span
+    title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;, and &lt;span
+    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
+    operators&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+v6DVT (also check for '- -' bits in the part above) --&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-measureText&quot;&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
+  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
+  is invoked, the user agent must replace all the &lt;span title=&quot;space
+  character&quot;&gt;space characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
+  U+0020 SPACE characters, and then must form a hypothetical
+  infinitely-wide CSS line box containing a single inline box
+  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
+  properties at their initial values except the 'white-space' property
+  of the inline element set to 'pre' and the 'font' property of the
+  inline element set to the current font of the context as given by
+  the &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute, and
+  must then create a new &lt;code&gt;TextMetrics&lt;/code&gt; object with its
+  &lt;code title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/code&gt; attribute set to
+  the width of that inline box, in CSS pixels.
+&lt;!--ADD-TOPIC:Security--&gt;
+  If doing these measurements requires using a font that has an
+  &lt;span&gt;origin&lt;/span&gt; that is not the &lt;span title=&quot;same
+  origin&quot;&gt;same&lt;/span&gt; as that of the &lt;code&gt;Document&lt;/code&gt; object that
+  owns the &lt;code&gt;canvas&lt;/code&gt; element (even if &quot;using a font&quot; means
+  just checking if that font has a particular glyph in it before
+  falling back to another font), then the method must throw a
+  &lt;code&gt;SecurityError&lt;/code&gt; exception.
+&lt;!--REMOVE-TOPIC:Security--&gt;
+  Otherwise, it must return the new &lt;code&gt;TextMetrics&lt;/code&gt; object.
+  &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code&gt;TextMetrics&lt;/code&gt; interface is used for the objects
+  returned from &lt;code
+  title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;. It has one
+  attribute, &lt;dfn
+  title=&quot;dom-textmetrics-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
+  by the &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;
+  method.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Glyphs rendered using &lt;code
+  title=&quot;dom-context-2d-fillText&quot;&gt;fillText()&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText()&lt;/code&gt; can spill out
+  of the box given by the font size (the em square size) and the width
+  returned by &lt;code
+  title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt; (the text
+  width). This version of the specification does not provide a way to
+  obtain the bounding box dimensions of the text. If the text is to be
+  rendered and removed, care needs to be taken to replace the entire
+  area of the canvas that the clipping region covers, not just the box
+  given by the em square height and measured text width.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;p class=&quot;note&quot;&gt;A future version of the 2D context API may provide a
+  way to render fragments of documents, rendered using CSS, straight
+  to the canvas. This would be provided in preference to a dedicated
+  way of doing multiline layout.&lt;/p&gt;
+
+
+
+  &lt;h6&gt;Drawing paths to the canvas&lt;/h6&gt;
+
   &lt;p&gt;The context always has a current default path. There is only one
   current default path, it is not part of the &lt;span&gt;drawing
-  state&lt;/span&gt;. The current default path is a &lt;span&gt;path&lt;/span&gt;, as
-  described in the previous section.&lt;/p&gt;
+  state&lt;/span&gt;. The current default path is a &lt;span
+  title=&quot;concept-path&quot;&gt;path&lt;/span&gt;, as described in the previous
+  section.&lt;/p&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
 
@@ -42560,555 +43608,6 @@
 
 
 
-
-
-  &lt;h6&gt;Drawing rectangles to the canvas&lt;/h6&gt;
-
-  &lt;p&gt;There are three methods that immediately draw rectangles to the
-  bitmap. They each take four arguments; the first two give the &lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
-  left of the rectangle, and the second two give the width &lt;var
-  title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
-  respectively.&lt;/p&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;p&gt;The &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
-  transformation matrix&lt;/span&gt; must be applied to the following four
-  coordinates, which form the path that must then be closed to get the
-  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Shapes are painted without affecting the current default path,
-  and are subject to the &lt;span title=&quot;clipping region&quot;&gt;clipping
-  region&lt;/span&gt;, and, with the exception of &lt;code
-  title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect()&lt;/code&gt;, also &lt;span
-  title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, and &lt;span
-  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
-  operators&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;dl class=&quot;domintro&quot;&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillRect&quot;&gt;fillRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeRect&quot;&gt;strokeRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-clearRect&quot;&gt;&lt;code&gt;clearRect(&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-fillRect&quot;&gt;&lt;code&gt;fillRect(&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
-  rectangular area using the &lt;code
-  title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt;. If either height
-  or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-strokeRect&quot;&gt;&lt;code&gt;strokeRect(&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
-  rectangle's path using the &lt;code
-  title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
-  appropriate) &lt;code
-  title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes. If
-  both height and width are zero, this method has no effect, since
-  there is no path to stroke (it's a point). If only one of the two is
-  zero, then the method will draw a line instead (the path for the
-  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h6&gt;Drawing text to the canvas&lt;/h6&gt;
-
-  &lt;dl class=&quot;domintro&quot;&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillText&quot;&gt;fillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Fills or strokes (respectively) the given text at the given
-    position. If a maximum width is provided, the text will be scaled
-    to fit that width if necessary.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;TextMetrics&lt;/code&gt; object with the metrics of the given text in the current font.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;metrics&lt;/var&gt; . &lt;code title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the advance width of the text that was passed to the
-    &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;
-    method.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;p&gt;The &lt;code&gt;CanvasRenderingContext2D&lt;/code&gt; interface provides the
-  following methods for rendering text directly to the canvas.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-fillText&quot;&gt;&lt;code&gt;fillText()&lt;/code&gt;&lt;/dfn&gt; and
-  &lt;dfn
-  title=&quot;dom-context-2d-strokeText&quot;&gt;&lt;code&gt;strokeText()&lt;/code&gt;&lt;/dfn&gt;
-  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var
-  title=&quot;&quot;&gt;maxWidth&lt;/var&gt;, and render the given &lt;var
-  title=&quot;&quot;&gt;text&lt;/var&gt; at the given (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that the text isn't wider
-  than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; if specified, using the current
-  &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, and &lt;code
-  title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt;
-  values. Specifically, when the methods are called, the user agent
-  must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; is present but less than or
-   equal to zero, return without doing anything; abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
-   context, as given by the &lt;code
-   title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Replace all the &lt;span title=&quot;space character&quot;&gt;space
-   characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
-   characters.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Form a hypothetical infinitely wide CSS line box containing
-   a single inline box containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;,
-   with all the properties at their initial values except the 'font'
-   property of the inline box set to &lt;var title=&quot;&quot;&gt;font&lt;/var&gt;, the
-   'direction' property of the inline box set to &lt;span&gt;the
-   directionality&lt;/span&gt; of the &lt;code&gt;canvas&lt;/code&gt; element, and the
-   'white-space' property set to 'pre'. &lt;a
-   href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-   &lt;!-- if you insert a step here, make sure to adjust the next step's
-   final words --&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; argument was specified
-   and the hypothetical width of the inline box in the hypothetical
-   line box is greater than &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; CSS pixels,
-   then change &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font
-   (if one is available or if a reasonably readable one can be
-   synthesized by applying a horizontal scale factor to the font) or a
-   smaller font, and return to the previous step.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the
-    inline box, determined by the &lt;code
-    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; and &lt;code
-    title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; values, as
-    follows:&lt;/p&gt;
-
-    &lt;p&gt;Horizontal position:&lt;/p&gt;
-
-    &lt;dl&gt;
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;left&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;end&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be the left edge of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;right&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;end&lt;/code&gt; and  &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;start&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be the right edge of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s horizontal
-     position be half way between the left and right edges of the
-     inline box.&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-    &lt;p&gt;Vertical position:&lt;/p&gt;
-
-    &lt;dl&gt;
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
-     title=&quot;dom-context-2d-textBaseline-top&quot;&gt;top&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the top of the em box of the first available font of the
-     inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
-     title=&quot;dom-context-2d-textBaseline-hanging&quot;&gt;hanging&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the hanging baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
-     title=&quot;dom-context-2d-textBaseline-middle&quot;&gt;middle&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be half way between the bottom and the top of the em box of the
-     first available font of the inline box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
-     title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;alphabetic&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the alphabetic baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
-     title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;ideographic&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the ideographic baseline of the first available font of the inline
-     box.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; is &lt;code
-     title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;bottom&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be the bottom of the em box of the first available font of the
-     inline box.&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
-    text's glyphs, as transformed by the &lt;span
-    title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-    matrix&lt;/span&gt;, and anchored and sized so that before applying the
-    &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-    matrix&lt;/span&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var
-    title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
-    mapped to one coordinate space unit.&lt;/p&gt;
-
-    &lt;p&gt;For &lt;code title=&quot;dom-context-2d-fillText&quot;&gt;fillText()&lt;/code&gt;
-    &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
-    applied to the glyphs and &lt;code
-    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
-    ignored. For &lt;code
-    title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText()&lt;/code&gt; the reverse
-    holds and &lt;code
-    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
-    applied to the glyph outlines and &lt;code
-    title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
-    ignored.&lt;/p&gt;
-
-    &lt;p&gt;Text is painted without affecting the current path, and is
-    subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
-    title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the &lt;span
-    title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;, and &lt;span
-    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
-    operators&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-&lt;!--v6DVT - this is commented out until CSS can get its act together
-enough to actual specify vertical text rendering (how long have we
-been waiting now?)
-
-WHEN EDITING THIS, FIX THE PARTS MARKED &quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot; BELOW
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-fillVerticalText&quot;&gt;&lt;code&gt;fillVerticalText()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn
-  title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;&lt;code&gt;strokeVerticalText()&lt;/code&gt;&lt;/dfn&gt;
-  methods take three or four arguments, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, and optionally &lt;var
-  title=&quot;&quot;&gt;maxHeight&lt;/var&gt;, and render the given &lt;var
-  title=&quot;&quot;&gt;text&lt;/var&gt; as vertical text at the given (&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) coordinates ensuring that
-  the text isn't taller than &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; if
-  specified, using the current &lt;code
-  title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; and &lt;code
-  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;
-  values. Specifically, when the methods are called, the user agent
-  must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; is present but less than or
-   equal to zero, return without doing anything; abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;font&lt;/var&gt; be the current font of the
-   context, as given by the &lt;code
-   title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Replace all the &lt;span title=&quot;space character&quot;&gt;space
-   characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with U+0020 SPACE
-   characters.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Form a &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;whatever CSS ends up calling
-   vertical line boxes and inline boxes&lt;/em&gt; containing the text &lt;var
-   title=&quot;&quot;&gt;text&lt;/var&gt;, with all the properties at their initial
-   values except the 'font' property of the inline box set to &lt;var
-   title=&quot;&quot;&gt;font&lt;/var&gt; and the 'direction' property of the inline
-   box set to &lt;span&gt;the directionality&lt;/span&gt; of the &lt;code&gt;canvas&lt;/code&gt;
-   element.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;!- - if you insert a step here, make sure to adjust the next step's
-   final words - -&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;maxHeight&lt;/var&gt; argument was specified
-   and the hypothetical height of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;box&lt;/em&gt;
-   in the hypothetical line box is greater than &lt;var
-   title=&quot;&quot;&gt;maxHeight&lt;/var&gt; CSS pixels, then change &lt;var
-   title=&quot;&quot;&gt;font&lt;/var&gt; to have a more condensed font (if one is
-   available or if a reasonably readable one can be synthesized by
-   applying an appropriate scale factor to the font) or a smaller
-   font, and return to the previous step.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; be a point on the &lt;em
-    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/var&gt;, determined by the &lt;code
-    title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt;, as follows:&lt;/p&gt;
-
-    &lt;p&gt;Vertical position:&lt;/p&gt;
-
-    &lt;dl&gt;
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;start&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
-     position be the top edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
-     box&lt;/em&gt;.&lt;/dd&gt;
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;end&lt;/code&gt;&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;right&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'ltr'&lt;/dt&gt;
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;left&lt;/code&gt; and &lt;span&gt;the directionality&lt;/span&gt; of the
-     &lt;code&gt;canvas&lt;/code&gt; element is 'rtl'&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical
-     position be the bottom edge of the &lt;em class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline
-     box&lt;/em&gt;.&lt;/dd&gt;
-
-
-     &lt;dt&gt; If &lt;code
-     title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; is &lt;code
-     title=&quot;&quot;&gt;center&lt;/code&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;Let the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt;'s vertical position
-     be half way between the top and bottom edges of the &lt;em
-     class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-    &lt;p&gt;Let the horizontal position be half way between the left and
-    right edges of the em box of the first available font of the &lt;em
-    class=&quot;&amp;#x0058;&amp;#x0058;&amp;#x0058;&quot;&gt;inline box&lt;/em&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Paint the hypothetical inline box as the shape given by the
-    text's glyphs, as transformed by the &lt;span
-    title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-    matrix&lt;/span&gt;, and anchored and sized so that before applying the
-    &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-    matrix&lt;/span&gt;, the &lt;var title=&quot;&quot;&gt;anchor point&lt;/var&gt; is at (&lt;var
-    title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) and each CSS pixel is
-    mapped to one coordinate space unit.&lt;/p&gt;
-
-    &lt;p&gt;For &lt;code
-    title=&quot;dom-context-2d-fillVerticalText&quot;&gt;fillVerticalText()&lt;/code&gt;
-    &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
-    applied and &lt;code
-    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
-    ignored. For &lt;code
-    title=&quot;dom-context-2d-strokeVerticalText&quot;&gt;strokeVerticalText()&lt;/code&gt;
-    the reverse holds and &lt;code
-    title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; must be
-    applied and &lt;code
-    title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; must be
-    ignored.&lt;/p&gt;
-
-    &lt;p&gt;Text is painted without affecting the current path, and is
-    subject to &lt;span title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
-    title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, the &lt;span
-    title=&quot;clipping region&quot;&gt;clipping region&lt;/span&gt;, and &lt;span
-    title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
-    operators&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-v6DVT (also check for '- -' bits in the part above) --&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-measureText&quot;&gt;&lt;code&gt;measureText()&lt;/code&gt;&lt;/dfn&gt;
-  method takes one argument, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;. When the method
-  is invoked, the user agent must replace all the &lt;span title=&quot;space
-  character&quot;&gt;space characters&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; with
-  U+0020 SPACE characters, and then must form a hypothetical
-  infinitely wide CSS line box containing a single inline box
-  containing the text &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, with all the
-  properties at their initial values except the 'white-space' property
-  of the inline element set to 'pre' and the 'font' property of the
-  inline element set to the current font of the context as given by
-  the &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; attribute, and
-  must then create a new &lt;code&gt;TextMetrics&lt;/code&gt; object with its
-  &lt;code title=&quot;dom-textmetrics-width&quot;&gt;width&lt;/code&gt; attribute set to
-  the width of that inline box, in CSS pixels.
-&lt;!--ADD-TOPIC:Security--&gt;
-  If doing these measurements requires using a font that has an
-  &lt;span&gt;origin&lt;/span&gt; that is not the &lt;span title=&quot;same
-  origin&quot;&gt;same&lt;/span&gt; as that of the &lt;code&gt;Document&lt;/code&gt; object that
-  owns the &lt;code&gt;canvas&lt;/code&gt; element (even if &quot;using a font&quot; means
-  just checking if that font has a particular glyph in it before
-  falling back to another font), then the method must throw a
-  &lt;code&gt;SecurityError&lt;/code&gt; exception.
-&lt;!--REMOVE-TOPIC:Security--&gt;
-  Otherwise, it must return the new &lt;code&gt;TextMetrics&lt;/code&gt; object.
-  &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code&gt;TextMetrics&lt;/code&gt; interface is used for the objects
-  returned from &lt;code
-  title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;. It has one
-  attribute, &lt;dfn
-  title=&quot;dom-textmetrics-width&quot;&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt;, which is set
-  by the &lt;code title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt;
-  method.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Glyphs rendered using &lt;code
-  title=&quot;dom-context-2d-fillText&quot;&gt;fillText()&lt;/code&gt; and &lt;code
-  title=&quot;dom-context-2d-strokeText&quot;&gt;strokeText()&lt;/code&gt; can spill out
-  of the box given by the font size (the em square size) and the width
-  returned by &lt;code
-  title=&quot;dom-context-2d-measureText&quot;&gt;measureText()&lt;/code&gt; (the text
-  width). This version of the specification does not provide a way to
-  obtain the bounding box dimensions of the text. If the text is to be
-  rendered and removed, care needs to be taken to replace the entire
-  area of the canvas that the clipping region covers, not just the box
-  given by the em square height and measured text width.&lt;/p&gt;
-
-  &lt;!-- v5: Drawing text along a given path --&gt;
-  &lt;!-- v5: Adding text to a path --&gt;
-  &lt;!-- see also: <A HREF="http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules">http://www.w3.org/TR/SVG11/text.html#TextpathLayoutRules</A> --&gt;
-  &lt;!-- see also: <A HREF="http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas">http://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas</A> --&gt;
-
-  &lt;/div&gt;
-
-  &lt;p class=&quot;note&quot;&gt;A future version of the 2D context API may provide a
-  way to render fragments of documents, rendered using CSS, straight
-  to the canvas. This would be provided in preference to a dedicated
-  way of doing multiline layout.&lt;/p&gt;
-
-
-
   &lt;h6&gt;Drawing images to the canvas&lt;/h6&gt;
 
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013887.html">[html5] r7022 - [e] (0) Rearrange and retitle sections in	preparation for Path primitives Affect [...]
</A></li>
	<LI>Next message: <A HREF="013889.html">[html5] r7024 - [giow] (0) Make it possible to draw Path primitives	to the canvas. Affected topi [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13888">[ date ]</a>
              <a href="thread.html#13888">[ thread ]</a>
              <a href="subject.html#13888">[ subject ]</a>
              <a href="author.html#13888">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
