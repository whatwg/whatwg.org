<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7602 - / images
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7602%20-%20/%20images&In-Reply-To=%3C20121229012321.CDC09805C0EE%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014461.html">
   <LINK REL="Next"  HREF="014463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7602 - / images</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7602%20-%20/%20images&In-Reply-To=%3C20121229012321.CDC09805C0EE%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7602 - / images">whatwg at whatwg.org
       </A><BR>
    <I>Fri Dec 28 17:23:21 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014461.html">[html5] r7601 - [e] (0) ack for sorting model Affected topics: HTML
</A></li>
        <LI>Next message: <A HREF="014463.html">[html5] r7603 - [giow] (3) More things you can access on Window.	Affected topics: DOM APIs, Security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14462">[ date ]</a>
              <a href="thread.html#14462">[ thread ]</a>
              <a href="subject.html#14462">[ subject ]</a>
              <a href="author.html#14462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-12-28 17:23:20 -0800 (Fri, 28 Dec 2012)
New Revision: 7602

Modified:
   complete.html
   images/content-venn.svg
   index
   source
Log:
[acgiow] (1) Grand &lt;menu&gt; revamp. Note: This patch includes parser changes.
Affected topics: DOM APIs, HTML, HTML Syntax and Parsing, Rendering

Modified: complete.html
===================================================================
--- complete.html	2012-12-28 02:06:14 UTC (rev 7601)
+++ complete.html	2012-12-29 01:23:20 UTC (rev 7602)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 28 December 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 29 December 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -771,28 +771,28 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#the-details-element&gt;&lt;span class=secno&gt;4.11.1 &lt;/span&gt;The &lt;code&gt;details&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-summary-element&gt;&lt;span class=secno&gt;4.11.2 &lt;/span&gt;The &lt;code&gt;summary&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-command-element&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;code&gt;command&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-menu-element&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#the-menu-element&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-menuitem-element&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;code&gt;menuitem&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#context-menus&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Context menus&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#menus-intro&gt;&lt;span class=secno&gt;4.11.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#building-menus-and-toolbars&gt;&lt;span class=secno&gt;4.11.4.2 &lt;/span&gt;Building menus and toolbars&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#context-menus&gt;&lt;span class=secno&gt;4.11.4.3 &lt;/span&gt;Context menus&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#toolbars&gt;&lt;span class=secno&gt;4.11.4.4 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#commands&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Commands&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#declaring-a-context-menu&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;Declaring a context menu&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#commands&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;Commands&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#using-the-a-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-button-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-input-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.3 &lt;/span&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-option-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.4 &lt;/span&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-command-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.5 &lt;/span&gt;Using the &lt;code&gt;command&lt;/code&gt; element to define
+       &lt;li&gt;&lt;a href=#facets-0&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Facets&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-a-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.2 &lt;/span&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-button-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.3 &lt;/span&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-input-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.4 &lt;/span&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-option-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.5 &lt;/span&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-menuitem-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.6 &lt;/span&gt;Using the &lt;code&gt;menuitem&lt;/code&gt; element to define
   a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-command-attribute-on-command-elements-to-define-a-command-indirectly&gt;&lt;span class=secno&gt;4.11.5.6 &lt;/span&gt;Using the &lt;code title=attr-command-command&gt;command&lt;/code&gt; attribute on &lt;code&gt;command&lt;/code&gt; elements to define a command indirectly&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-on-a-label-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.7 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;label&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-on-a-legend-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.8 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;legend&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.5.9 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-dialog-element&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;The &lt;code&gt;dialog&lt;/code&gt; element&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly&gt;&lt;span class=secno&gt;4.11.6.7 &lt;/span&gt;Using the &lt;code title=attr-menuitem-command&gt;command&lt;/code&gt; attribute on &lt;code&gt;menuitem&lt;/code&gt; elements to define a command indirectly&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-on-a-label-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.8 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;label&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-on-a-legend-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.9 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;legend&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.6.10 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-dialog-element&gt;&lt;span class=secno&gt;4.11.7 &lt;/span&gt;The &lt;code&gt;dialog&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#anchor-points&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Anchor points&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#anchor-points&gt;&lt;span class=secno&gt;4.11.7.1 &lt;/span&gt;Anchor points&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#links&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Links&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-3&gt;&lt;span class=secno&gt;4.12.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -946,7 +946,7 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-6&gt;&lt;span class=secno&gt;7.1.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#enabling-and-disabling-scripting&gt;&lt;span class=secno&gt;7.1.2 &lt;/span&gt;Enabling and disabling scripting&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#processing-model-3&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#definitions-0&gt;&lt;span class=secno&gt;7.1.3.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#calling-scripts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Calling scripts&lt;/a&gt;&lt;/li&gt;
@@ -958,7 +958,7 @@
      &lt;li&gt;&lt;a href=#event-loops&gt;&lt;span class=secno&gt;7.1.4 &lt;/span&gt;Event loops&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#definitions-1&gt;&lt;span class=secno&gt;7.1.4.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#processing-model-3&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#generic-task-sources&gt;&lt;span class=secno&gt;7.1.4.3 &lt;/span&gt;Generic task sources&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#javascript-protocol&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL scheme&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#events&gt;&lt;span class=secno&gt;7.1.6 &lt;/span&gt;Events&lt;/a&gt;
@@ -1003,7 +1003,7 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-7&gt;&lt;span class=secno&gt;8.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-accesskey-attribute&gt;&lt;span class=secno&gt;8.5.2 &lt;/span&gt;The &lt;code&gt;accesskey&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;8.5.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-5&gt;&lt;span class=secno&gt;8.5.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#editing-0&gt;&lt;span class=secno&gt;8.6 &lt;/span&gt;Editing&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#contenteditable&gt;&lt;span class=secno&gt;8.6.1 &lt;/span&gt;Making document regions editable: The &lt;code title=attr-contenteditable&gt;contenteditable&lt;/code&gt; content
@@ -1052,7 +1052,7 @@
        &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-event-loop&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The event loop&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The worker's lifetime&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-5&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-6&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Creating workers&lt;/a&gt;
       &lt;ol&gt;
@@ -1072,7 +1072,7 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#server-sent-events-intro&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-eventsource-interface&gt;&lt;span class=secno&gt;10.2.2 &lt;/span&gt;The &lt;code&gt;EventSource&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-6&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-7&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#parsing-an-event-stream&gt;&lt;span class=secno&gt;10.2.4 &lt;/span&gt;Parsing an event stream&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#event-stream-interpretation&gt;&lt;span class=secno&gt;10.2.5 &lt;/span&gt;Interpreting an event stream&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#notes&gt;&lt;span class=secno&gt;10.2.6 &lt;/span&gt;Notes&lt;/a&gt;&lt;/li&gt;
@@ -1312,8 +1312,7 @@
      &lt;li&gt;&lt;a href=#embedded-content-2&gt;&lt;span class=secno&gt;14.4.1 &lt;/span&gt;Embedded content&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;14.4.3 &lt;/span&gt;Attributes for embedded content and images&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;14.4.4 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;14.4.5 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;14.4.4 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#bindings&gt;&lt;span class=secno&gt;14.5 &lt;/span&gt;Bindings&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-14&gt;&lt;span class=secno&gt;14.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -11855,7 +11854,6 @@
 
   &lt;!-- when updating this also update the category index --&gt;
   &lt;ul class=&quot;brief category-list&quot;&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-noscript-element&gt;noscript&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -11917,7 +11915,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-cite-element&gt;cite&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-code-element&gt;code&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-datalist-element&gt;datalist&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -12039,7 +12036,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-cite-element&gt;cite&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-code-element&gt;code&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-datalist-element&gt;datalist&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -12181,7 +12177,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;a href=&quot;#hidden-state-(type=hidden)&quot; title=attr-input-type-hidden&gt;Hidden&lt;/a&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt; attribute is present)&lt;!-- see also comment in &lt;object&gt; section --&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -12376,7 +12371,7 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-map-element&gt;map&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-mark-element&gt;mark&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#math&gt;math&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state or the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state)&lt;/li&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-meter-element&gt;meter&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-nav-element&gt;nav&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -12949,15 +12944,9 @@
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; element that creates a &lt;a href=#hyperlink&gt;hyperlink&lt;/a&gt;
      &lt;td&gt;&lt;code title=attr-aria-role-link&gt;link&lt;/code&gt; role
 
-    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#context-menu-state title=&quot;context menu state&quot;&gt;context menu&lt;/a&gt; state
+    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
 
-    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-menu&gt;menu&lt;/code&gt; role
-
-    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-toolbar&gt;toolbar&lt;/code&gt; role
-
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
 
@@ -13012,15 +13001,6 @@
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-title-element&gt;title&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
 
-    &lt;tr&gt;&lt;td&gt;An element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, whose &lt;a href=#command-facet-type title=command-facet-type&gt;Type&lt;/a&gt; facet is &quot;checkbox&quot;, and that is a descendant of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt; role, with the &lt;code title=attr-aria-checked&gt;aria-checked&lt;/code&gt; state set to &quot;true&quot; if the command's &lt;a href=#command-facet-checkedstate title=command-facet-checkedstate&gt;Checked State&lt;/a&gt; facet is true, and &quot;false&quot; otherwise
-
-    &lt;tr&gt;&lt;td&gt;An element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, whose &lt;a href=#command-facet-type title=command-facet-type&gt;Type&lt;/a&gt; facet is &quot;command&quot;, and that is a descendant of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt; role
-
-    &lt;tr&gt;&lt;td&gt;An element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, whose &lt;a href=#command-facet-type title=command-facet-type&gt;Type&lt;/a&gt; facet is &quot;radio&quot;, and that is a descendant of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt; role, with the &lt;code title=attr-aria-checked&gt;aria-checked&lt;/code&gt; state set to &quot;true&quot; if the command's &lt;a href=#command-facet-checkedstate title=command-facet-checkedstate&gt;Checked State&lt;/a&gt; facet is true, and &quot;false&quot; otherwise
-
     &lt;tr&gt;&lt;td&gt;Element that is &lt;a href=#concept-fe-disabled title=concept-fe-disabled&gt;disabled&lt;/a&gt;
      &lt;td&gt;The &lt;code title=attr-aria-disabled&gt;aria-disabled&lt;/code&gt; state set to &quot;true&quot;
 
@@ -13051,7 +13031,7 @@
 
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element that creates a &lt;a href=#hyperlink&gt;hyperlink&lt;/a&gt;
      &lt;td&gt;&lt;code title=attr-aria-role-link&gt;link&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;, &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-checkbox&gt;checkbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-tab&gt;tab&lt;/code&gt;, or &lt;code title=attr-aria-role-treeitem&gt;treeitem&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-tab&gt;tab&lt;/code&gt;, or &lt;code title=attr-aria-role-treeitem&gt;treeitem&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
@@ -13071,7 +13051,7 @@
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;code title=attr-aria-role-button&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-radio&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-details-element&gt;details&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;code title=attr-aria-role-group&gt;group&lt;/code&gt; role
@@ -13143,7 +13123,7 @@
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=&quot;#button-state-(type=button)&quot; title=attr-input-type-button&gt;Button&lt;/a&gt; state
      &lt;td&gt;&lt;code title=attr-aria-role-button&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-radio&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; state
      &lt;td&gt;&lt;code title=attr-aria-role-checkbox&gt;checkbox&lt;/code&gt; role
@@ -13151,7 +13131,7 @@
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=&quot;#image-button-state-(type=image)&quot; title=attr-input-type-image&gt;Image Button&lt;/a&gt; state
      &lt;td&gt;&lt;code title=attr-aria-role-button&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-radio&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio Button&lt;/a&gt; state
      &lt;td&gt;&lt;code title=attr-aria-role-radio&gt;radio&lt;/code&gt; role
@@ -13161,13 +13141,17 @@
      &lt;td&gt;&lt;code title=attr-aria-role-listitem&gt;listitem&lt;/code&gt; role
      &lt;td&gt;Role must be either &lt;code title=attr-aria-role-listitem&gt;listitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;, &lt;code title=attr-aria-role-option&gt;option&lt;/code&gt;, &lt;code title=attr-aria-role-tab&gt;tab&lt;/code&gt;, or &lt;code title=attr-aria-role-treeitem&gt;treeitem&lt;/code&gt;
 
+    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state
+     &lt;td&gt;&lt;code title=attr-aria-role-toolbar&gt;toolbar&lt;/code&gt; role
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-directory&gt;directory&lt;/code&gt;, &lt;code title=attr-aria-role-list&gt;list&lt;/code&gt;, &lt;code title=attr-aria-role-listbox&gt;listbox&lt;/code&gt;, &lt;code title=attr-aria-role-menu&gt;menu&lt;/code&gt;, &lt;code title=attr-aria-role-menubar&gt;menubar&lt;/code&gt;, &lt;code title=attr-aria-role-tablist&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, or &lt;code title=attr-aria-role-tree&gt;tree&lt;/code&gt;
+
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
      &lt;td&gt;If specified, role must be either &lt;code title=attr-aria-role-application&gt;application&lt;/code&gt;, &lt;code title=attr-aria-role-document&gt;document&lt;/code&gt;, or &lt;code title=attr-aria-role-img&gt;img&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;code title=attr-aria-role-list&gt;list&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-directory&gt;directory&lt;/code&gt;, &lt;code title=attr-aria-role-list&gt;list&lt;/code&gt;, &lt;code title=attr-aria-role-listbox&gt;listbox&lt;/code&gt;, &lt;code title=attr-aria-role-menu&gt;menu&lt;/code&gt;, &lt;code title=attr-aria-role-menubar&gt;menubar&lt;/code&gt;, &lt;code title=attr-aria-role-tablist&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, &lt;code title=attr-aria-role-tree&gt;tree&lt;/code&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-directory&gt;directory&lt;/code&gt;, &lt;code title=attr-aria-role-list&gt;list&lt;/code&gt;, &lt;code title=attr-aria-role-listbox&gt;listbox&lt;/code&gt;, &lt;code title=attr-aria-role-menu&gt;menu&lt;/code&gt;, &lt;code title=attr-aria-role-menubar&gt;menubar&lt;/code&gt;, &lt;code title=attr-aria-role-tablist&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, or &lt;code title=attr-aria-role-tree&gt;tree&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-output-element&gt;output&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;code title=attr-aria-role-status&gt;status&lt;/code&gt; role
@@ -19772,7 +19756,7 @@
    &lt;dt&gt;&lt;a href=#element-dfn-contexts title=element-dfn-contexts&gt;Contexts in which this element can be used&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;Inside &lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
    &lt;dd&gt;Inside &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
-   &lt;dd&gt;Inside &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
+   &lt;dd&gt;Inside &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-content-model title=element-dfn-content-model&gt;Content model&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
@@ -19858,12 +19842,6 @@
 &lt;/figure&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;p class=note&gt;If the &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element is the child of a
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element and itself has a child that defines a
-  &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt;, then the
-  &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element will match the &lt;code title=selector-enabled&gt;&lt;a href=#selector-enabled&gt;:enabled&lt;/a&gt;&lt;/code&gt; and &lt;code title=selector-disabled&gt;&lt;a href=#selector-disabled&gt;:disabled&lt;/a&gt;&lt;/code&gt; pseudo-classes in the
-  same way as the first such child element does.&lt;/p&gt;
-
   &lt;p class=note&gt;While it is conforming to include heading elements
   (e.g. &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;) inside &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements, it likely
   does not convey the semantics that the author intended. A heading
@@ -51998,6 +51976,7 @@
    &lt;dd&gt;&lt;code title=attr-fe-name&gt;&lt;a href=#attr-fe-name&gt;name&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-button-value&gt;&lt;a href=#attr-button-value&gt;value&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-button-menu&gt;&lt;a href=#attr-button-menu&gt;menu&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
 &lt;pre class=idl&gt;interface &lt;dfn id=htmlbuttonelement&gt;HTMLButtonElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
@@ -52012,6 +51991,7 @@
            attribute DOMString &lt;a href=#dom-fe-name title=dom-fe-name&gt;name&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-button-type title=dom-button-type&gt;type&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-button-value title=dom-button-value&gt;value&lt;/a&gt;;
+           attribute &lt;a href=#htmlmenuelement&gt;HTMLMenuElement&lt;/a&gt;? &lt;a href=#dom-button-menu title=dom-button-menu&gt;menu&lt;/a&gt;;
 
   readonly attribute boolean &lt;a href=#dom-cva-willvalidate title=dom-cva-willValidate&gt;willValidate&lt;/a&gt;;
   readonly attribute &lt;a href=#validitystate&gt;ValidityState&lt;/a&gt; &lt;a href=#dom-cva-validity title=dom-cva-validity&gt;validity&lt;/a&gt;;
@@ -52045,6 +52025,9 @@
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-button-type-button title=attr-button-type-button&gt;&lt;code&gt;button&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;&lt;a href=#attr-button-type-button-state title=attr-button-type-button-state&gt;Button&lt;/a&gt;
      &lt;td&gt;Does nothing.
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-button-type-menu title=attr-button-type-menu&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt;
+     &lt;td&gt;Shows a menu.
   &lt;/table&gt;&lt;p&gt;The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;a href=#attr-button-type-submit-state title=attr-button-type-submit-state&gt;Submit Button&lt;/a&gt;
   state.&lt;/p&gt;
 
@@ -52054,8 +52037,9 @@
 
   &lt;div class=impl&gt;
 
-  &lt;p&gt;&lt;strong&gt;Constraint validation&lt;/strong&gt;: If the &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-button-type-reset-state title=attr-button-type-reset-state&gt;Reset Button&lt;/a&gt; state or
+  &lt;p&gt;&lt;strong&gt;Constraint validation&lt;/strong&gt;: If the &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-button-type-reset-state title=attr-button-type-reset-state&gt;Reset Button&lt;/a&gt; state,
   the &lt;a href=#attr-button-type-button-state title=attr-button-type-button-state&gt;Button&lt;/a&gt; state,
+  or the &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt; state,
   the element is &lt;a href=#barred-from-constraint-validation&gt;barred from constraint validation&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#concept-fe-disabled title=concept-fe-disabled&gt;disabled&lt;/a&gt;, its &lt;a href=#activation-behavior&gt;activation
@@ -52078,6 +52062,23 @@
 
    &lt;dd&gt;&lt;p&gt;Do nothing.&lt;/dd&gt;
 
+   &lt;dt&gt; &lt;dfn id=attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/dfn&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The element must follow these steps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the element's &lt;a href=#designated-pop-up-menu&gt;designated pop-up menu&lt;/a&gt;, if
+     any. If there isn't one, then abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; that is
+     cancelable at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;. &lt;!-- v2: include modifier key information --&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and
+     show&lt;/a&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
   &lt;/dl&gt;&lt;/div&gt;
 
   &lt;p&gt;The &lt;code title=attr-fae-form&gt;&lt;a href=#attr-fae-form&gt;form&lt;/a&gt;&lt;/code&gt; attribute is used to
@@ -52108,12 +52109,24 @@
   form submission if the button itself was used to initiate the form
   submission.&lt;/p&gt;
 
+  &lt;hr&gt;&lt;p&gt;If the element's &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt; state, the &lt;dfn id=attr-button-menu title=attr-button-menu&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; attribute must be specified to give the element's
+  menu. The value must be the &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element in
+  the same &lt;a href=#home-subtree&gt;home subtree&lt;/a&gt; whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in
+  the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state. The attribute must not be specified if
+  the element's &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is not in the &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt; state.&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-button-value title=dom-button-value&gt;&lt;code&gt;value&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
-  same name.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element's &lt;dfn id=designated-pop-up-menu&gt;designated pop-up menu&lt;/dfn&gt; is the first element in the
+  &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#home-subtree&gt;home subtree&lt;/a&gt; whose ID is that given by the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt;
+  element's &lt;code title=attr-button-menu&gt;&lt;a href=#attr-button-menu&gt;menu&lt;/a&gt;&lt;/code&gt; attribute, if there is such an element and
+  its &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu
+  state&quot;&gt;popup menu&lt;/a&gt; state; otherwise, the element has no &lt;a href=#designated-pop-up-menu&gt;designated pop-up
+  menu&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-button-value title=dom-button-value&gt;&lt;code&gt;value&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-button-menu title=dom-button-menu&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the
+  content attributes of the same name.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-button-type title=dom-button-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
   same name, &lt;a href=#limited-to-only-known-values&gt;limited to only known values&lt;/a&gt;.&lt;/p&gt;
@@ -57965,527 +57978,481 @@
 
 
 
+  &lt;h4 id=the-menu-element&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;dfn id=menus&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
-  &lt;h4 id=the-command-element&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;dfn id=the-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
-
   &lt;dl class=element&gt;&lt;dt&gt;&lt;a href=#element-dfn-categories title=element-dfn-categories&gt;Categories&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;&lt;a href=#metadata-content&gt;Metadata content&lt;/a&gt;.&lt;/dd&gt;
    &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
-   &lt;dd&gt;&lt;a href=#phrasing-content&gt;Phrasing content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state: &lt;a href=#palpable-content&gt;Palpable content&lt;/a&gt;.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-contexts title=element-dfn-contexts&gt;Contexts in which this element can be used&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Where &lt;a href=#metadata-content&gt;metadata content&lt;/a&gt; is expected.&lt;/dd&gt;
-   &lt;dd&gt;Where &lt;a href=#phrasing-content&gt;phrasing content&lt;/a&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;Where &lt;a href=#flow-content&gt;flow content&lt;/a&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state: as the child of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-content-model title=element-dfn-content-model&gt;Content model&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Empty.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state: either zero or more &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements, or &lt;a href=#flow-content&gt;flow content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state: in any order, zero or more &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements, zero or more &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt; elements, and zero or more &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attributes are in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;!--&lt;dd&gt;&lt;code title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt;&lt;/dd&gt;--&gt;
-   &lt;dd&gt;&lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;Also, the &lt;code title=attr-command-title&gt;&lt;a href=#attr-command-title&gt;title&lt;/a&gt;&lt;/code&gt; attribute has special semantics on this element.&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-&lt;pre class=idl&gt;interface &lt;dfn id=htmlcommandelement&gt;HTMLCommandElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
-           attribute DOMString &lt;a href=#dom-command-type title=dom-command-type&gt;type&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-command-label title=dom-command-label&gt;label&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-command-icon title=dom-command-icon&gt;icon&lt;/a&gt;;
-           attribute boolean &lt;a href=#dom-command-disabled title=dom-command-disabled&gt;disabled&lt;/a&gt;;
-           attribute boolean &lt;a href=#dom-command-checked title=dom-command-checked&gt;checked&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-command-radiogroup title=dom-command-radiogroup&gt;radiogroup&lt;/a&gt;;&lt;!--
-           attribute boolean &lt;span title=&quot;dom-command-default&quot;&gt;default&lt;/span&gt;;--&gt;
-  readonly attribute &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;? &lt;a href=#dom-command-command title=dom-command-command&gt;command&lt;/a&gt;;
+&lt;pre class=idl&gt;interface &lt;dfn id=htmlmenuelement&gt;HTMLMenuElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
+           attribute DOMString &lt;a href=#dom-menu-type title=dom-menu-type&gt;type&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-menu-label title=dom-menu-label&gt;label&lt;/a&gt;;
 };&lt;/pre&gt;
-   &lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element represents a command that the user
-  can invoke.&lt;/p&gt;
+  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element represents a list of commands.&lt;/p&gt;
 
-  &lt;p&gt;A command can be explicitly part of a context menu or toolbar,
-  using the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element. It can also be put anywhere
-  else on a page, either just to define a keyboard shortcut, or to
-  define a command that is then referenced from other
-  &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+  &lt;!-- v2 idea: &lt;menu&gt; should get an icon, like &lt;command&gt; --&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element that uses the
-  &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;,
-  &lt;!--&lt;code title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt;,--&gt; and
-  &lt;code title=attr-title&gt;&lt;a href=#attr-title&gt;title&lt;/a&gt;&lt;/code&gt; attributes defines a new
-  command. A &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element that uses the &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; &lt;em&gt;attribute&lt;/em&gt;
-  defines a command by reference to another one. This allows authors
-  to define a command once, and set its state (e.g. whether it is
-  active or disabled) in one place, and have all references to that
-  command in the user interface change at the same time.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menu-type title=attr-menu-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute is an &lt;a href=#enumerated-attribute&gt;enumerated
+  attribute&lt;/a&gt; indicating the kind of menu being declared. The attribute has two states. The
+  &lt;code title=attr-menu-type-popup&gt;popup&lt;/code&gt; keyword maps to the &lt;dfn id=popup-menu-state title=&quot;popup menu
+  state&quot;&gt;popup menu&lt;/dfn&gt; state, in which the element is declaring a context menu or the menu for a
+  &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;menu button&lt;/a&gt;. The &lt;code title=attr-menu-type-toolbar&gt;toolbar&lt;/code&gt; keyword maps to the &lt;dfn id=toolbar-state title=&quot;toolbar
+  state&quot;&gt;toolbar&lt;/dfn&gt; state, in which the element is declaring a toolbar. The attribute may also be
+  omitted. The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt;
+  state if the parent element is a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/a&gt; state; otherwise, it is the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=attr-command-type title=attr-command-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
-  attribute indicates the kind of command: either a normal command
-  with an associated action, or a state or option that can be toggled,
-  or a selection of one item from a list of items.&lt;/p&gt;
+  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the
+  &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state, then the element &lt;a href=#represents&gt;represents&lt;/a&gt;
+  the commands of a popup menu, and the user can only examine and interact with the commands if that
+  popup menu is activated through some other element, either via the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute or the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-button-menu&gt;&lt;a href=#attr-button-menu&gt;menu&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
-  &lt;p&gt;The attribute is an &lt;a href=#enumerated-attribute&gt;enumerated attribute&lt;/a&gt; with three
-  keywords and states. The &quot;&lt;dfn id=attr-command-type-keyword-command title=attr-command-type-keyword-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;a href=#attr-command-type-state-command title=attr-command-type-state-command&gt;Command&lt;/a&gt; state, the
-  &quot;&lt;dfn id=attr-command-type-keyword-checkbox title=attr-command-type-keyword-checkbox&gt;&lt;code&gt;checkbox&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;a href=#attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/a&gt; state, and
-  the &quot;&lt;dfn id=attr-command-type-keyword-radio title=attr-command-type-keyword-radio&gt;&lt;code&gt;radio&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt; state. The
-  &lt;i&gt;missing value default&lt;/i&gt; is the &lt;a href=#attr-command-type-state-command title=attr-command-type-state-command&gt;Command&lt;/a&gt; state.&lt;/p&gt;
+  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the
+  &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, then the element &lt;a href=#represents&gt;represents&lt;/a&gt; a
+  toolbar consisting of its contents, in the form of either an unordered list of items (represented
+  by &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements), each of which represents a command that the user can perform or
+  activate, or, if the element has no &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element children, &lt;a href=#flow-content&gt;flow content&lt;/a&gt;
+  describing available commands.&lt;/p&gt;
 
-  &lt;dl&gt;&lt;dt&gt;The &lt;dfn id=attr-command-type-state-command title=attr-command-type-state-command&gt;Command&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menu-label title=attr-menu-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; attribute gives the label of the
+  menu. It is used by user agents to display nested menus in the UI: a context menu containing
+  another menu would use the nested menu's &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute for
+  the submenu's menu label. The &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute must only be
+  specified on &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements whose parent element is a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose
+  &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/a&gt; state.&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a normal command with an associated action.&lt;/dd&gt;
+  &lt;div class=impl&gt;
 
-   &lt;dt&gt;The &lt;dfn id=attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;hr&gt;&lt;p&gt;A &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; is a &lt;dfn id=currently-relevant-menu-element&gt;currently relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/dfn&gt; if it is the
+  child of a &lt;a href=#currently-relevant-menu-element&gt;currently relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;, or if it is the
+  &lt;a href=#designated-pop-up-menu&gt;designated pop-up menu&lt;/a&gt; of a &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element that is not
+  &lt;a href=#inert&gt;inert&lt;/a&gt;, does not have a &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; attribute, and is not
+  the descendant of an element with a &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a state or option that can be toggled.&lt;/dd&gt;
+  &lt;hr&gt;&lt;p&gt;A pop-up menu consists of a list of zero or more menu items, which can be any of:&lt;/p&gt;
 
-   &lt;dt&gt;The &lt;dfn id=attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;&lt;a href=#concept-command title=concept-command&gt;Commands&lt;/a&gt;, which can be marked as default commands (&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
+   &lt;li&gt;Separators (&lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
+   &lt;li&gt;Other menus, which allows the list to be nested (&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
+  &lt;/ul&gt;&lt;p&gt;To &lt;dfn id=construct-and-show-a-menu&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, the user
+  agent must run the following steps:&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a selection of one item from a list of items.&lt;/dd&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the menu be an empty list of the type described above.&lt;/li&gt;
 
-  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=attr-command-label title=attr-command-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the name of the command, as shown to the user. The
-  &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute must be
-  specified and must have a value that is not the empty string.&lt;/p&gt;
+   &lt;li&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-title title=attr-command-title&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives a hint describing the command, which might be shown
-  to the user to help him.&lt;/p&gt;
+    &lt;p&gt;Run the &lt;a href=#menu-builder&gt;menu builder&lt;/a&gt; steps for the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element using the menu
+    prepared in the previous list as the output.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-icon title=attr-command-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives a picture that represents the command. If the
-  attribute is specified, the attribute's value must contain a
-  &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL potentially surrounded by
-  spaces&lt;/a&gt;. &lt;span class=impl&gt;To obtain the &lt;a href=#absolute-url&gt;absolute
-  URL&lt;/a&gt; of the icon when the attribute's value is not the empty
-  string, the attribute's value must be &lt;a href=#resolve-a-url title=&quot;resolve a
-  url&quot;&gt;resolved&lt;/a&gt; relative to the element. When the attribute is
-  absent, or its value is the empty string, or &lt;a href=#resolve-a-url title=&quot;resolve a
-  url&quot;&gt;resolving&lt;/a&gt; its value fails, there is no icon.&lt;/span&gt;&lt;/p&gt;
-  &lt;!-- this is affected by the base URL being changed, so users of
-  this should cache the image once they've fetched it once, at least
-  until the relative url changes again --&gt;
+    &lt;p&gt;The &lt;dfn id=menu-builder&gt;menu builder&lt;/dfn&gt; steps for a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element using a specific menu as
+    output are as follows: For each child node of the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;,
+    run the appropriate steps from the following list:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-disabled title=attr-command-disabled&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt; attribute
-  is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt; that, if present, indicates that
-  the command is not available in the current state.&lt;/p&gt;
+    &lt;dl class=switch&gt;&lt;dt&gt;If the child is a &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;&lt;/dt&gt;
 
-  &lt;p class=note&gt;The distinction between &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; is subtle. A command would be
-  disabled if, in the same context, it could be enabled if only
-  certain aspects of the situation were changed. A command would be
-  marked as hidden if, in that situation, the command will never be
-  enabled. For example, in the context menu for a water faucet, the
-  command &quot;open&quot; might be disabled if the faucet is already open, but
-  the command &quot;eat&quot; would be marked hidden since the faucet could
-  never be eaten.&lt;/p&gt;
+     &lt;dd&gt;Append the command to the menu, respecting its &lt;a href=#concept-facet title=concept-facet&gt;facets&lt;/a&gt;&lt;!--
+     we might need to be explicit about what this means for each facet, if testing shows this isn't
+     well-implemented. e.g.: If there's an Icon facet for the command, it should be &lt;span
+     title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;&lt;!- -FETCH- -&gt; (this would be http-origin privacy-sensitive), and
+     then that image should be associated with the command, such that each command only has its image
+     fetched once, to prevent changes to the base URL from having effects after the image has been
+     fetched once. (no need to resolve the Icon facet, it's an absolute URL) --&gt;. If the
+     &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element has a &lt;code title=attr-menuitem-default&gt;&lt;a href=#attr-menuitem-default&gt;default&lt;/a&gt;&lt;/code&gt; attribute,
+     mark the command as being a default command.&lt;/dd&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-checked title=attr-command-checked&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;
-  attribute is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt; that, if present,
-  indicates that the command is selected. The attribute must be
-  omitted unless the &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;
-  attribute is in either the &lt;a href=#attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/a&gt; state or
-  the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt;
-  state.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-radiogroup title=attr-command-radiogroup&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the name of the group of commands that will be
-  toggled when the command itself is toggled, for commands whose &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute has the value &quot;&lt;code title=&quot;&quot;&gt;radio&lt;/code&gt;&quot;. The scope of the name is the child list of
-  the parent element. The attribute must be omitted unless the &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt; state.&lt;/p&gt;
+     &lt;dt&gt;If the child is an &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
 
-&lt;!--
-  &lt;p&gt;If the &lt;code&gt;command&lt;/code&gt; element is used when &lt;span
-  title=&quot;menu generation&quot;&gt;generating&lt;/span&gt; a &lt;span&gt;context
-  menu&lt;/span&gt;, then the &lt;dfn
-  title=&quot;attr-command-default&quot;&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt; attribute
-  indicates, if present, that the command is the one that would have
-  been invoked if the user had directly activated the menu's subject
-  instead of using its context menu. The &lt;code
-  title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute is a
-  &lt;span&gt;boolean attribute&lt;/span&gt;. The attribute must be omitted unless
-  the &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is in the
-  &lt;span title=&quot;attr-command-type-state-command&quot;&gt;Command&lt;/span&gt;
-  state.&lt;/p&gt;
+     &lt;dd&gt;Append a separator to the menu.&lt;/dd&gt;
 
-  &lt;div class=&quot;example&quot;&gt;
 
-   ...an example that shows an element that, if double-clicked,
-   invokes an action, but that also has a context menu, showing the
-   various &lt;code&gt;command&lt;/code&gt; attributes off, and that has a default
-   command...
+     &lt;dt&gt;If the child is a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with no &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
 
-  &lt;/div&gt;
---&gt;
+     &lt;dd&gt;Append a separator to the menu, then run the &lt;a href=#menu-builder&gt;menu builder&lt;/a&gt; steps using this
+     child &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element for the same menu, then append another separator to the
+     menu.&lt;/dd&gt;
 
-  &lt;hr&gt;&lt;p&gt;If a &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; has a
-  &lt;dfn id=attr-command-command title=attr-command-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
-  attribute, and &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;, and there is an element in that
-  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; has a
-  value equal to the value of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt;'s &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute, and the first
-  such element in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, hereafter &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;, itself &lt;a href=#concept-command title=concept-command&gt;defines
-  a command&lt;/a&gt; and either is not a &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element or
-  does not itself have a &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute, then the
-  &lt;dfn id=master-command&gt;master command&lt;/dfn&gt; of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;.&lt;/p&gt;
 
-  &lt;p&gt;An element with a
-  &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt;
-  attribute must have a &lt;a href=#master-command&gt;master command&lt;/a&gt; and must not have any
-  &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;, or
-  &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;
-  attributes.&lt;/p&gt;
+     &lt;dt&gt;If the child is a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
 
-  &lt;hr&gt;&lt;div class=impl&gt;
+     &lt;dd&gt;Create a new submenu as an empty list of the type described above, and construct it by
+     running the &lt;a href=#menu-builder&gt;menu builder&lt;/a&gt; steps for the child &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element using the
+     new submenu as the output. Then, append the submenu to the menu, using the value of the child
+     &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute as the label
+     of the submenu.&lt;/dd&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-command-type title=dom-command-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
-  same name, &lt;a href=#limited-to-only-known-values&gt;limited to only known values&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-command-label title=dom-command-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-command-icon title=dom-command-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-command-disabled title=dom-command-disabled&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-command-checked title=dom-command-checked&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-command-radiogroup title=dom-command-radiogroup&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;&lt;!--,
-  and &lt;dfn title=&quot;dom-command-default&quot;&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt;--&gt;
-  IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content
-  attributes of the same name.&lt;/p&gt;
+     &lt;dt&gt;Any other node&lt;/dt&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-command-command title=dom-command-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute must return the &lt;a href=#master-command&gt;master command&lt;/a&gt;, if any,
-  or null otherwise.&lt;/p&gt;
+     &lt;dd&gt;&lt;a href=#ignore&gt;Ignore&lt;/a&gt; the node.&lt;/dd&gt;
 
-  &lt;hr&gt;&lt;p&gt;If the element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; is false
-  (enabled) then the element's &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt;
-  depends on the element's &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;
-  and &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attributes, as
-  follows:&lt;/p&gt;
+    &lt;/dl&gt;&lt;/li&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;If the element has a &lt;a href=#master-command&gt;master command&lt;/a&gt; set by its
-   &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Remove any submenu with no label, or whose label is the empty string, in the menu or any submenus.&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent must &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation
-   steps&lt;/a&gt; on the element's &lt;a href=#master-command&gt;master command&lt;/a&gt;.&lt;/dd&gt;
-   &lt;!-- we know it has a defined &lt;span&gt;activation behavior&lt;/span&gt; if
-   we get here --&gt;
+   &lt;li&gt;&lt;p&gt;Remove any menu item with no label, or whose label is the empty string, in the menu or any submenus.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Collapse all sequences of two or more adjacent separators in the menu or any submenus to a single separator.&lt;/li&gt;
 
-   &lt;dt&gt;If the &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
-   in the &lt;a href=#attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/a&gt; state&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Remove all separators at the start or end of the menu and any submenus.&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;If the element has a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, the UA must
-   remove that attribute. Otherwise, the UA must add a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, with the
-   literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/dd&gt;
+   &lt;li&gt;
 
+    &lt;p&gt;Display the menu to the user, and let the algorithm that invoked this one continue.&lt;/p&gt;
 
-   &lt;dt&gt;If the &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
-   in the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt; state&lt;/dt&gt;
+    &lt;p&gt;If the user selects a menu item that corresponds to an element that still represents a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt; when the user selects it, then the UA must invoke that
+    command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;If the element has a parent, then the UA must walk the list
-   of child nodes of that parent element, and for each node that is a
-   &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element, if that element has a &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt; attribute whose
-   value exactly matches the current element's (treating missing &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt; attributes as if
-   they were the empty string), and has a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, must remove
-   that attribute.&lt;/p&gt;
+    &lt;p&gt;Pop-up menus must not, while being shown, reflect changes in the DOM. The menu is constructed
+    from the DOM before being shown, and is then immutable.&lt;/p&gt;
 
-   &lt;p&gt;Then, the element's &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute attribute
-   must be set to the literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/dd&gt;
+   &lt;/li&gt;
 
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-menu-type title=dom-menu-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-menu-label title=dom-menu-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the
+  respective content attributes of the same name.&lt;/p&gt;
 
-   &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;The element's &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; is to do
-   nothing.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p class=note&gt;Firing a synthetic &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event at the element does not cause
-  any of the actions described above to happen.&lt;/p&gt;
-
-  &lt;!-- v2COMMAND: Expose the Triggers facet again. --&gt;
-
-  &lt;p&gt;If the element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; is true
-  (disabled) then the element has no &lt;a href=#activation-behavior&gt;activation
-  behavior&lt;/a&gt;.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;p class=note&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements are not rendered
-  unless they &lt;a href=#the-menu-element title=menu&gt;form part of a menu&lt;/a&gt;.&lt;/p&gt;
-
   &lt;div class=example&gt;
 
-   &lt;p&gt;Here is an example of a toolbar with three buttons that let the
-   user toggle between left, center, and right alignment. One could
-   imagine such a toolbar as part of a text editor. The toolbar also
-   has a separator followed by another button labeled &quot;Publish&quot;,
-   though that button is disabled.&lt;/p&gt;
+   &lt;p&gt;In this example, the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element is used to describe a toolbar with three menu
+   buttons on it, each of which has a dropdown menu with a series of options:&lt;/p&gt;
 
-   &lt;pre&gt;&lt;menu type=&quot;toolbar&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot; checked=&quot;checked&quot;
-          label=&quot;Left&quot; icon=&quot;icons/alL.png&quot; onclick=&quot;setAlign('left')&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
-          label=&quot;Center&quot; icon=&quot;icons/alC.png&quot; onclick=&quot;setAlign('center')&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
-          label=&quot;Right&quot; icon=&quot;icons/alR.png&quot; onclick=&quot;setAlign('right')&quot;&gt;
- &lt;hr&gt;
- &lt;command type=&quot;command&quot; disabled
-          label=&quot;Publish&quot; icon=&quot;icons/pub.png&quot; onclick=&quot;publish()&quot;&gt;
+  &lt;pre&gt;&lt;menu&gt; &lt;!-- type=&quot;toolbar&quot; implied --&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;File&quot; menu=&quot;filemenu&quot;&gt;
+  &lt;menu id=&quot;filemenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;fnew()&quot; label=&quot;New...&quot;&gt;
+   &lt;menuitem onclick=&quot;fopen()&quot; label=&quot;Open...&quot;&gt;
+   &lt;menuitem onclick=&quot;fsave()&quot; label=&quot;Save&quot;&gt;
+   &lt;menuitem onclick=&quot;fsaveas()&quot; label=&quot;Save as...&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;Edit&quot; menu=&quot;editmenu&quot;&gt;
+  &lt;menu id=&quot;editmenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;ecopy()&quot; label=&quot;Copy&quot;&gt;
+   &lt;menuitem onclick=&quot;ecut()&quot; label=&quot;Cut&quot;&gt;
+   &lt;menuitem onclick=&quot;epaste()&quot; label=&quot;Paste&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;Help&quot; menu=&quot;helpmenu&quot;&gt;
+  &lt;menu id=&quot;helpmenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;location='help.html'&quot; label=&quot;Help&quot;&gt;
+   &lt;menuitem onclick=&quot;location='about.html'&quot; label=&quot;About&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
 &lt;/menu&gt;&lt;/pre&gt;
 
+   &lt;p&gt;In a supporting user agent, this might look like this (assuming the user has just activated the
+   second button):&lt;/p&gt;
+
+   &lt;p&gt;&lt;img alt=&quot;A toolbar with three buttons, labeled 'File', 'Edit', and 'Help'; where if you select the 'Edit' button you get a drop-down menu with three more options, 'Copy', 'Cut', and 'Paste'.&quot; height=101 src=<A HREF="http://images.whatwg.org/sample-toolbar-1.png">http://images.whatwg.org/sample-toolbar-1.png</A> width=303&gt;&lt;/p&gt;
+
   &lt;/div&gt;
 
 
 
-  &lt;h4 id=the-menu-element&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;dfn id=menus&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-menuitem-element&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;menuitem&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;&lt;dt&gt;&lt;a href=#element-dfn-categories title=element-dfn-categories&gt;Categories&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
-   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state: &lt;a href=#interactive-content&gt;Interactive content&lt;/a&gt;.&lt;/dd&gt;
-   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state or the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state: &lt;a href=#palpable-content&gt;Palpable content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;None.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-contexts title=element-dfn-contexts&gt;Contexts in which this element can be used&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Where &lt;a href=#flow-content&gt;flow content&lt;/a&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;As a child of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-content-model title=element-dfn-content-model&gt;Content model&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Either: Zero or more &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
-   &lt;dd&gt;Or: &lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Empty.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-default&gt;&lt;a href=#attr-menuitem-default&gt;default&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;Also, the &lt;code title=attr-menuitem-title&gt;&lt;a href=#attr-menuitem-title&gt;title&lt;/a&gt;&lt;/code&gt; attribute has special semantics on this element.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-&lt;pre class=idl&gt;interface &lt;dfn id=htmlmenuelement&gt;HTMLMenuElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
-           attribute DOMString &lt;a href=#dom-menu-type title=dom-menu-type&gt;type&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-menu-label title=dom-menu-label&gt;label&lt;/a&gt;;
+&lt;pre class=idl&gt;interface &lt;dfn id=htmlmenuitemelement&gt;HTMLMenuItemElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
+           attribute DOMString &lt;a href=#dom-menuitem-type title=dom-menuitem-type&gt;type&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-menuitem-label title=dom-menuitem-label&gt;label&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-menuitem-icon title=dom-menuitem-icon&gt;icon&lt;/a&gt;;
+           attribute boolean &lt;a href=#dom-menuitem-disabled title=dom-menuitem-disabled&gt;disabled&lt;/a&gt;;
+           attribute boolean &lt;a href=#dom-menuitem-checked title=dom-menuitem-checked&gt;checked&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-menuitem-radiogroup title=dom-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;;
+           attribute boolean &lt;a href=#dom-menuitem-default title=dom-menuitem-default&gt;default&lt;/a&gt;;
+  readonly attribute &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;? &lt;a href=#dom-menuitem-command title=dom-menuitem-command&gt;command&lt;/a&gt;;
 };&lt;/pre&gt;
-  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element represents a list of commands.&lt;/p&gt;
+   &lt;/dd&gt;
+  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element represents a command that the user can invoke from a popup
+  menu (either a &lt;a href=#attr-contextmenu title=attr-contextmenu&gt;context menu&lt;/a&gt; or the menu of a &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;menu button&lt;/a&gt;).&lt;/p&gt;
 
-  &lt;!-- v2 idea: &lt;menu&gt; should get an icon, like &lt;command&gt; --&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element that uses one or more of the
+   &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;, and
+   &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;
+  attributes defines a new command.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-menu-type title=attr-menu-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute
-  is an &lt;a href=#enumerated-attribute&gt;enumerated attribute&lt;/a&gt; indicating the kind of menu
-  being declared. The attribute has three states. The &lt;code title=attr-menu-type-context&gt;context&lt;/code&gt; keyword maps to the
-  &lt;dfn id=context-menu-state title=&quot;context menu state&quot;&gt;context menu&lt;/dfn&gt; state, in which
-  the element is declaring a context menu. The &lt;code title=attr-menu-type-toolbar&gt;toolbar&lt;/code&gt; keyword maps to the
-  &lt;dfn id=toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/dfn&gt; state, in which the
-  element is declaring a toolbar. The attribute may also be
-  omitted. The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;dfn id=list-state title=&quot;list
-  state&quot;&gt;list&lt;/dfn&gt; state, which indicates that the element is merely
-  a list of commands that is neither declaring a context menu nor
-  defining a toolbar.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element that uses the &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute defines a command by reference to another
+  one. This allows authors to define a command once, and set its state (e.g. whether it is active or
+  disabled) in one place, and have all references to that command in the user interface change at
+  the same time.&lt;/p&gt;
 
-  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#context-menu-state title=&quot;context menu state&quot;&gt;context menu&lt;/a&gt; state, then the
-  element &lt;a href=#represents&gt;represents&lt;/a&gt; the commands of a context menu, and
-  the user can only interact with the commands if that context menu is
-  activated.&lt;/p&gt;
+  &lt;p&gt;If the &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute is specified, the element
+  is in the &lt;dfn id=indirect-command&gt;indirect command&lt;/dfn&gt; mode. If it is not specified, it is in the &lt;dfn id=explicit-command&gt;explicit
+  command&lt;/dfn&gt; mode. When the element is in the &lt;a href=#indirect-command&gt;indirect command&lt;/a&gt; mode, the element
+  must not have any of the following attributes specified:
+   &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;.
+  &lt;/p&gt;
 
-  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, then the element
-  &lt;a href=#represents&gt;represents&lt;/a&gt; a list of active commands that the user can
-  immediately interact with.&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=attr-menuitem-type title=attr-menuitem-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute indicates the kind of
+  command: either a normal command with an associated action, or a state or option that can be
+  toggled, or a selection of one item from a list of items.&lt;/p&gt;
 
-  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state, then the element either
-  &lt;a href=#represents&gt;represents&lt;/a&gt; an unordered list of items (each represented
-  by an &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element), each of which represents a command
-  that the user can perform or activate, or, if the element has no
-  &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element children, &lt;a href=#flow-content&gt;flow content&lt;/a&gt;
-  describing available commands.&lt;/p&gt;
+  &lt;p&gt;The attribute is an &lt;a href=#enumerated-attribute&gt;enumerated attribute&lt;/a&gt; with three keywords and states. The &quot;&lt;dfn id=attr-menuitem-type-keyword-command title=attr-menuitem-type-keyword-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;a href=#attr-menuitem-type-state-command title=attr-menuitem-type-state-command&gt;Command&lt;/a&gt; state, the &quot;&lt;dfn id=attr-menuitem-type-keyword-checkbox title=attr-menuitem-type-keyword-checkbox&gt;&lt;code&gt;checkbox&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;a href=#attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/a&gt; state, and the &quot;&lt;dfn id=attr-menuitem-type-keyword-radio title=attr-menuitem-type-keyword-radio&gt;&lt;code&gt;radio&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state. The &lt;i&gt;missing value default&lt;/i&gt; is the
+  &lt;a href=#attr-menuitem-type-state-command title=attr-menuitem-type-state-command&gt;Command&lt;/a&gt; state.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-menu-label title=attr-menu-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the label of the menu. It is used by user agents to
-  display nested menus in the UI. For example, a context menu
-  containing another menu would use the nested menu's &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute for the submenu's
-  menu label.&lt;/p&gt;
+  &lt;dl&gt;&lt;dt&gt;The &lt;dfn id=attr-menuitem-type-state-command title=attr-menuitem-type-state-command&gt;Command&lt;/dfn&gt; state&lt;/dt&gt;
 
-  &lt;div class=impl&gt;
+   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a normal command with an associated action.&lt;/dd&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-menu-type title=dom-menu-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-menu-label title=dom-menu-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; IDL attributes must
-  &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content attributes of the same
-  name.&lt;/p&gt;
+   &lt;dt&gt;The &lt;dfn id=attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/dfn&gt; state&lt;/dt&gt;
 
-  &lt;/div&gt;
+   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a state or option that can be toggled.&lt;/dd&gt;
 
+   &lt;dt&gt;The &lt;dfn id=attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/dfn&gt; state&lt;/dt&gt;
 
+   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a selection of one item from a list of items.&lt;/dd&gt;
 
-  &lt;h5 id=menus-intro&gt;&lt;span class=secno&gt;4.11.4.1 &lt;/span&gt;Introduction&lt;/h5&gt;
+  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=attr-menuitem-label title=attr-menuitem-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; attribute gives the name of the
+  command, as shown to the user. The &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute must
+  be specified if the element is in the &lt;a href=#explicit-command&gt;explicit command&lt;/a&gt; mode. If the attribute is
+  specified, it must have a value that is not the empty string.&lt;/p&gt;
 
-  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-icon title=attr-menuitem-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt; attribute gives a picture that
+  represents the command. If the attribute is specified, the attribute's value must contain a
+  &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL potentially surrounded by spaces&lt;/a&gt;. &lt;span class=impl&gt;To obtain
+  the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the icon when the attribute's value is not the empty string, the
+  attribute's value must be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt; relative to the element.
+  When the attribute is absent, or its value is the empty string, or &lt;a href=#resolve-a-url title=&quot;resolve a
+  url&quot;&gt;resolving&lt;/a&gt; its value fails, there is no icon.&lt;/span&gt;&lt;/p&gt; &lt;!-- this is affected by the
+  base URL being changed, so users of this should cache the image once they've fetched it once, at
+  least until the relative url changes again --&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element is used to define context menus and
-  toolbars.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-disabled title=attr-menuitem-disabled&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt; attribute is a
+  &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt; that, if present, indicates that the command is not available in
+  the current state.&lt;/p&gt;
 
-  &lt;p&gt;For example, the following represents a toolbar with three menu
-  buttons on it, each of which has a dropdown menu with a series of
-  options:&lt;/p&gt;
+  &lt;p class=note&gt;The distinction between &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; and
+  &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; is subtle. A command would be disabled if, in the same
+  context, it could be enabled if only certain aspects of the situation were changed. A command
+  would be marked as hidden if, in that situation, the command will never be enabled. For example,
+  in the context menu for a water faucet, the command &quot;open&quot; might be disabled if the faucet is
+  already open, but the command &quot;eat&quot; would be marked hidden since the faucet could never be
+  eaten.&lt;/p&gt;
 
-  &lt;pre&gt;&lt;menu type=&quot;toolbar&quot;&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;File&quot;&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fnew()&quot;&gt;New...&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fopen()&quot;&gt;Open...&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fsave()&quot;&gt;Save&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fsaveas()&quot;&gt;Save as...&lt;/button&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;Edit&quot;&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;ecopy()&quot;&gt;Copy&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;ecut()&quot;&gt;Cut&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;epaste()&quot;&gt;Paste&lt;/button&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;Help&quot;&gt;
-   &lt;li&gt;&lt;a href=&quot;help.html&quot;&gt;Help&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=&quot;about.html&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
-&lt;/menu&gt;&lt;/pre&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-checked title=attr-menuitem-checked&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;a href=#boolean-attribute&gt;boolean
+  attribute&lt;/a&gt; that, if present, indicates that the command is selected. The attribute must be
+  omitted unless the &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in either the &lt;a href=#attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/a&gt; state or the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state.&lt;/p&gt;
 
-  &lt;p&gt;In a supporting user agent, this might look like this:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-radiogroup title=attr-menuitem-radiogroup&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt; attribute gives the
+  name of the group of commands that will be toggled when the command itself is toggled, for
+  commands whose &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute has the value &quot;&lt;code title=&quot;&quot;&gt;radio&lt;/code&gt;&quot;. The scope of the name is the child list of the parent element. The
+  attribute must be omitted unless the &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in
+  the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state.&lt;/p&gt;
 
-  &lt;p&gt;&lt;img alt=&quot;A toolbar with three buttons, labeled 'File', 'Edit', and 'Help'; where if you select the 'Edit' button you get a drop-down menu with three more options, 'Copy', 'Cut', and 'Paste'.&quot; height=101 src=<A HREF="http://images.whatwg.org/sample-toolbar-1.png">http://images.whatwg.org/sample-toolbar-1.png</A> width=303&gt;&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; has a &lt;dfn id=attr-menuitem-command title=attr-menuitem-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; attribute, and &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt;
+  is &lt;a href=#in-a-document&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;, and there is an element in that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
+  whose &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; has a value equal to the value of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt;'s &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute, and the first
+  such element in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, hereafter &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;, itself &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt; and either is not a &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element
+  or does not itself have a &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute, then the
+  &lt;dfn id=master-command&gt;master command&lt;/dfn&gt; of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;.&lt;/p&gt;
 
-  &lt;p&gt;In a legacy user agent, the above would look like a bulleted list
-  with three items, the first of which has four buttons, the second of
-  which has three, and the third of which has two nested bullet points
-  with two items consisting of links.&lt;/p&gt;
+  &lt;p&gt;An element with a &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute must have a
+  &lt;a href=#master-command&gt;master command&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;The following implements a similar toolbar, with a single button
-  whose values, when selected, redirect the user to Web sites.&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=attr-menuitem-title title=attr-menuitem-title&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute gives a hint describing
+  the command, which might be shown to the user to help him.&lt;/p&gt;
 
-  &lt;pre&gt;&lt;form action=&quot;redirect.cgi&quot;&gt;
- &lt;menu type=&quot;toolbar&quot;&gt;
-  &lt;label for=&quot;goto&quot;&gt;Go to...&lt;/label&gt;
-  &lt;menu label=&quot;Go&quot;&gt;
-   &lt;select id=&quot;goto&quot;&lt;!--
-           onchange=&quot;if (this.options[this.selectedIndex].value)
-                     window.location = this.options[this.selectedIndex].value&quot;--&gt;&gt;
-    &lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt; Select site: &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.apple.com/">http://www.apple.com/</A>&quot;&gt; Apple &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.mozilla.org/">http://www.mozilla.org/</A>&quot;&gt; Mozilla &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.opera.com/">http://www.opera.com/</A>&quot;&gt; Opera &lt;/option&gt;
-   &lt;/select&gt;
-   &lt;span&gt;&lt;input type=&quot;submit&quot; value=&quot;Go&quot;&gt;&lt;/span&gt;
-  &lt;/menu&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-default title=attr-menuitem-default&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt; attribute indicates, if
+  present, that the command is the one that would have been invoked if the user had directly
+  activated the menu's subject instead of using the menu. The &lt;code title=attr-menuitem-default&gt;&lt;a href=#attr-menuitem-default&gt;default&lt;/a&gt;&lt;/code&gt; attribute is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;In this trivial example, a submit button is given a context menu that has two options, one to
+   reset the form, and one to submit the form. The submit command is marked as being the default.&lt;/p&gt;
+
+   &lt;pre&gt;&lt;form action=&quot;dosearch.pl&quot;&gt;
+ &lt;p&gt;&lt;label&gt;Enter search terms: &lt;input type=&quot;text&quot; name=&quot;terms&quot;&gt;&lt;/label&gt;&lt;/p&gt;
+ &lt;p&gt;&lt;input type=submit contextmenu=formmenu id=&quot;submitbutton&quot;&gt;&lt;/p&gt;
+ &lt;p hidden&gt;&lt;input type=reset id=&quot;resetbutton&quot;&gt;&lt;/p&gt;
+ &lt;menu type=popup id=formmenu&gt;
+  &lt;menuitem command=&quot;submitbutton&quot; default&gt;
+  &lt;menuitem command=&quot;resetbutton&quot;&gt;
  &lt;/menu&gt;
 &lt;/form&gt;&lt;/pre&gt;
 
-  &lt;p&gt;The behavior in supporting user agents is similar to the example
-  above, but here the legacy behavior consists of a single
-  &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element with a submit button. The submit button
-  doesn't appear in the toolbar, because it is not a child of the
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element or of its &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; children.&lt;/p&gt;
+  &lt;/div&gt;
 
+  &lt;div class=impl&gt;
 
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-menuitem-type title=dom-menuitem-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
+  same name, &lt;a href=#limited-to-only-known-values&gt;limited to only known values&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;div class=impl&gt;
+  &lt;p&gt;The &lt;dfn id=dom-menuitem-label title=dom-menuitem-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-menuitem-icon title=dom-menuitem-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-menuitem-disabled title=dom-menuitem-disabled&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-menuitem-checked title=dom-menuitem-checked&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-menuitem-radiogroup title=dom-menuitem-radiogroup&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;,
+  and &lt;dfn id=dom-menuitem-default title=dom-menuitem-default&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt;
+  IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content
+  attributes of the same name.&lt;/p&gt;
 
-  &lt;h5 id=building-menus-and-toolbars&gt;&lt;span class=secno&gt;4.11.4.2 &lt;/span&gt;&lt;dfn&gt;Building menus and toolbars&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;p&gt;The &lt;dfn id=dom-menuitem-command title=dom-menuitem-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
+  IDL attribute must return the &lt;a href=#master-command&gt;master command&lt;/a&gt;, if any,
+  or null otherwise.&lt;/p&gt;
 
-  &lt;p&gt;A menu (or toolbar) consists of a list of zero or more of the
-  following components:&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;If the element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; is false
+  (enabled) then the element's &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt;
+  depends on the element's &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;
+  and &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attributes, as
+  follows:&lt;/p&gt;
 
-  &lt;ul class=brief&gt;&lt;li&gt;&lt;a href=#concept-command title=concept-command&gt;Commands&lt;/a&gt;, which can be marked as default commands&lt;/li&gt;
-   &lt;li&gt;Separators&lt;/li&gt;
-   &lt;li&gt;Other menus (which allows the list to be nested)&lt;/li&gt;
-  &lt;/ul&gt;&lt;p&gt;The list corresponding to a particular &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element
-  is built by iterating over its child nodes. For each child node in
-  &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, the required behavior depends on what the
-  node is, as follows:&lt;/p&gt;
+  &lt;dl class=switch&gt;&lt;dt&gt;If the element has a &lt;a href=#master-command&gt;master command&lt;/a&gt; set by its
+   &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;An element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;The user agent must &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation
+   steps&lt;/a&gt; on the element's &lt;a href=#master-command&gt;master command&lt;/a&gt;.&lt;/dd&gt;
+   &lt;!-- we know it has a defined &lt;span&gt;activation behavior&lt;/span&gt; if
+   we get here --&gt;
 
-   &lt;dd&gt;Append the command to the menu, respecting its &lt;a href=#concept-facet title=concept-facet&gt;facets&lt;/a&gt;&lt;!-- we might need to be
-   explicit about what this means for each facet, if testing shows
-   this isn't well-implemented. e.g.: If there's an Icon facet for the
-   command, it should be &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;&lt;!- -FETCH-
-   -&gt; (this would be http-origin privacy-sensitive), and then that
-   image should be associated with the command, such that each command
-   only has its image fetched once, to prevent changes to the base URL
-   from having effects after the image has been fetched once. (no need
-   to resolve the Icon facet, it's an absolute URL) --&gt;. &lt;!--If the
-   element is a &lt;code&gt;command&lt;/code&gt; element with a &lt;code
-   title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute, mark the
-   command as being a default command.--&gt;&lt;/dd&gt;
 
+   &lt;dt&gt;If the &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
+   in the &lt;a href=#attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/a&gt; state&lt;/dt&gt;
 
-   &lt;dt&gt;An &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
-   &lt;dt&gt;An &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element that has a &lt;code title=attr-option-value&gt;&lt;a href=#attr-option-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute set to the empty
-   string, and has a &lt;code title=attr-option-disabled&gt;&lt;a href=#attr-option-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute, and whose
-   &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; consists of a string of one or more
-   hyphens (U+002D HYPHEN-MINUS)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;If the element has a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, the UA must
+   remove that attribute. Otherwise, the UA must add a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, with the
+   literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;Append a separator to the menu.&lt;/dd&gt;
 
+   &lt;dt&gt;If the &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
+   in the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state&lt;/dt&gt;
 
-   &lt;dt&gt;An &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
-   &lt;dt&gt;A &lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;If the element has a parent, then the UA must walk the list
+   of child nodes of that parent element, and for each node that is a
+   &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element, if that element has a &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt; attribute whose
+   value exactly matches the current element's (treating missing &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt; attributes as if
+   they were the empty string), and has a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, must remove
+   that attribute.&lt;/p&gt;
 
-   &lt;dd&gt;Iterate over the children of the element.&lt;/dd&gt;
+   &lt;p&gt;Then, the element's &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute attribute
+   must be set to the literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/dd&gt;
 
 
-   &lt;dt&gt;A &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with no &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
-   &lt;dt&gt;A &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
 
-   &lt;dd&gt;Append a separator to the menu, then iterate over the children
-   of the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element, then
-   append another separator.&lt;/dd&gt;
+   &lt;dd&gt;&lt;p&gt;The element's &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; is to do
+   nothing.&lt;/dd&gt;
 
-   &lt;!-- v2: we might want to support &lt;select&gt; in &lt;label&gt; as giving a named submenu --&gt;
+  &lt;/dl&gt;&lt;p class=note&gt;Firing a synthetic &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event at the element does not cause
+  any of the actions described above to happen.&lt;/p&gt;
 
+  &lt;!-- v2COMMAND: Expose the Triggers facet again. --&gt;
 
-   &lt;dt&gt;A &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
-   &lt;dt&gt;An &lt;code&gt;&lt;a href=#the-optgroup-element&gt;optgroup&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
+  &lt;p&gt;If the element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; is true
+  (disabled) then the element has no &lt;a href=#activation-behavior&gt;activation
+  behavior&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dd&gt;Append a submenu to the menu, using the value of the element's
-   &lt;code title=&quot;&quot;&gt;label&lt;/code&gt; attribute as the label of the menu. The
-   submenu must be constructed by taking the element and creating a
-   new menu for it using the complete process described in this
-   section.&lt;/dd&gt;
+  &lt;/div&gt;
 
+  &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element is not rendered except as &lt;a href=#the-menu-element title=menu&gt;part of a popup menu&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;Any other node&lt;/dt&gt;
+  &lt;div class=example&gt;
 
-   &lt;dd&gt;&lt;a href=#ignore&gt;Ignore&lt;/a&gt; the node.&lt;/dd&gt;
+   &lt;p&gt;Here is an example of a pop-up menu button with three options that let the user toggle between
+   left, center, and right alignment. One could imagine such a toolbar as part of a text editor. The
+   menu also has a separator followed by another menu item labeled &quot;Publish&quot;, though that menu item
+   is disabled.&lt;/p&gt;
 
-  &lt;/dl&gt;&lt;p&gt;Once all the nodes have been processed as described above, the
-  user agent must the post-process the menu as follows:&lt;/p&gt;
+   &lt;pre&gt;&lt;button type=menu menu=editmenu&gt;Commands...&lt;/button&gt;
+&lt;menu type=&quot;popup&quot; id=&quot;editmenu&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot; checked=&quot;checked&quot;
+          label=&quot;Left&quot; icon=&quot;icons/alL.png&quot; onclick=&quot;setAlign('left')&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
+          label=&quot;Center&quot; icon=&quot;icons/alC.png&quot; onclick=&quot;setAlign('center')&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
+          label=&quot;Right&quot; icon=&quot;icons/alR.png&quot; onclick=&quot;setAlign('right')&quot;&gt;
+ &lt;hr&gt;
+ &lt;menuitem type=&quot;command&quot; disabled
+          label=&quot;Publish&quot; icon=&quot;icons/pub.png&quot; onclick=&quot;publish()&quot;&gt;
+&lt;/menu&gt;&lt;/pre&gt;
 
-  &lt;ol&gt;&lt;li&gt;Except for separators, any menu item with no label, or whose
-   label is the empty string, must be removed.&lt;/li&gt;
+  &lt;/div&gt;
 
-   &lt;li&gt;Any sequence of two or more separators in a row must be
-   collapsed to a single separator.&lt;/li&gt;
 
-   &lt;li&gt;Any separator at the start or end of the menu must be
-   removed.&lt;/li&gt;
+  &lt;h4 id=context-menus&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Context menus&lt;/h4&gt;
 
-  &lt;/ol&gt;&lt;/div&gt;
+  &lt;h5 id=declaring-a-context-menu&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;Declaring a context menu&lt;/h5&gt;
 
+  &lt;p&gt;The &lt;dfn id=attr-contextmenu title=attr-contextmenu&gt;&lt;code&gt;contextmenu&lt;/code&gt;&lt;/dfn&gt; attribute gives the element's
+  context menu. The value must be the &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;
+  element in the same &lt;a href=#home-subtree&gt;home subtree&lt;/a&gt; whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt;
+  attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state.&lt;/p&gt;
 
+  &lt;p class=note&gt;When a user right-clicks on an element with a &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute, the user agent will first fire a &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event at the element, and then, if that event is not
+  canceled, a &lt;code title=event-show&gt;show&lt;/code&gt; event at the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
+  &lt;div class=example&gt;
 
-  &lt;h5 id=context-menus&gt;&lt;span class=secno&gt;4.11.4.3 &lt;/span&gt;&lt;dfn&gt;Context menus&lt;/dfn&gt;&lt;/h5&gt;
+   &lt;p&gt;Here is an example of a context menu for an input control:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-contextmenu title=attr-contextmenu&gt;&lt;code&gt;contextmenu&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the element's &lt;a href=#context-menus title=&quot;context menus&quot;&gt;context
-  menu&lt;/a&gt;. The value must be the &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element in the
-  DOM. &lt;span class=impl&gt;If the node that would be obtained by
-  invoking the &lt;code title=dom-Document-getElementById&gt;&lt;a href=#dom-document-getelementbyid&gt;getElementById()&lt;/a&gt;&lt;/code&gt; method
-  using the attribute's value as the only argument is null or not a
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, then the element has no assigned context
-  menu. Otherwise, the element's assigned context menu is the element
-  so identified.&lt;/span&gt;&lt;/p&gt;
+   &lt;pre&gt;&lt;form name=&quot;npc&quot;&gt;
+ &lt;label&gt;Character name: &lt;input name=char type=text contextmenu=namemenu required&gt;&lt;/label&gt;
+ &lt;menu type=popup id=namemenu&gt;
+  &lt;menuitem label=&quot;Pick random name&quot; onclick=&quot;document.forms.npc.elements.char.value = getRandomName()&quot;&gt;
+  &lt;menuitem label=&quot;Prefill other fields based on name&quot; onclick=&quot;prefillFields(document.forms.npc.elements.char.value)&quot;&gt;
+ &lt;/menu&gt;
+&lt;/form&gt;&lt;/pre&gt;
 
+   &lt;p&gt;This adds two items to the control's context menu, one called &quot;Pick random name&quot;, and one
+   called &quot;Prefill other fields based on name&quot;. They invoke scripts that are not shown in the
+   example above.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
   &lt;div class=impl&gt;
 
-  &lt;p&gt;When an element's context menu is requested (e.g. by the user
-  right-clicking the element, or pressing a context menu key), the
-  user agent must apply the appropriate rules from the following
+  &lt;h5 id=processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/h5&gt;
+
+  &lt;p&gt;If the there is no element with the ID given by an element's &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute's value in the element's &lt;a href=#home-subtree&gt;home
+  subtree&lt;/a&gt;, or if the first such element is not a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/a&gt; state, then the element has no assigned context menu. Otherwise, the element's
+  assigned context menu is the first such element.&lt;/p&gt;
+
+  &lt;p&gt;When an element's context menu is requested (e.g. by the user right-clicking the element, or
+  pressing a context menu key), the user agent must apply the appropriate rules from the following
   list:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;If the user requested a context menu using a pointing device&lt;/dt&gt;
@@ -58498,99 +58465,49 @@
 
    &lt;dt&gt;Otherwise&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent must &lt;a href=#fire-a-synthetic-mouse-event title=&quot;fire a synthetic mouse
-   event&quot;&gt;fire a synthetic mouse event named &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;&lt;/a&gt; that bubbles
-   and is cancelable at the element for which the menu was
-   requested.&lt;/dd&gt;
+   &lt;dd&gt;&lt;p&gt;The user agent must &lt;a href=#fire-a-synthetic-mouse-event title=&quot;fire a synthetic mouse event&quot;&gt;fire a synthetic mouse
+   event named &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;&lt;/a&gt; that bubbles and is
+   cancelable at the element for which the menu was requested.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p class=note&gt;Typically, therefore, the firing of the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event will be the
-  default action of a &lt;code title=mouseup&gt;mouseup&lt;/code&gt; or &lt;code title=event-keyup&gt;keyup&lt;/code&gt; event. The exact sequence of events
-  is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
+  &lt;/dl&gt;&lt;p class=note&gt;Typically, therefore, the firing of the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event will be the default action of a &lt;code title=mouseup&gt;mouseup&lt;/code&gt; or &lt;code title=event-keyup&gt;keyup&lt;/code&gt; event. The exact sequence
+  of events is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
 
   &lt;p&gt;The default action of the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event depends on
-  whether the element or one of its ancestors has a context menu
-  assigned (using the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute) or not. If
-  there is no context menu assigned, the default action must be for
-  the user agent to show its default context menu, if it has one.&lt;/p&gt;
+  whether or not the element or one of its ancestors has a context menu assigned (using the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute) when the event dispatch has completed. If
+  there is no context menu assigned, the default action must be for the user agent to show its
+  default context menu, if it has one.&lt;/p&gt;
 
-  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a
-  context menu assigned, then the user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple
-  event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; at the
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element of the context menu of the nearest
-  ancestor (including the element itself) with one assigned.&lt;/p&gt;
-  &lt;!-- v2: include modifier key information --&gt;
+  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a context menu assigned, then the
+  user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; that
+  is cancelable at the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element of the context menu of the nearest ancestor
+  (including the element itself) with one assigned.&lt;/p&gt; &lt;!-- v2: include modifier key information
+  --&gt;
 
-  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent
-  must show a context menu &lt;a href=#building-menus-and-toolbars title=&quot;building menus and
-  toolbars&quot;&gt;built&lt;/a&gt; from the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent must &lt;a href=#construct-and-show-a-menu title=&quot;construct
+  and show a menu&quot;&gt;construct and show&lt;/a&gt; the menu for the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
-  &lt;p&gt;The user agent may also provide access to its default context
-  menu, if any, with the context menu shown. For example, it could
-  merge the menu items from the two menus together, or provide the
+  &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
+  menu shown. For example, it could merge the menu items from the two menus together, or provide the
   page's context menu as a submenu of the default menu.&lt;/p&gt;
 
-  &lt;p&gt;If the user dismisses the menu without making a selection,
-  nothing in particular happens.&lt;/p&gt;
+  &lt;p&gt;User agents may provide means for bypassing the context menu processing model, ensuring that
+  the user can always access the UA's default context menus. For example, the user agent could
+  handle right-clicks that have the Shift key depressed in such a way that it does not fire the
+  &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event and instead always shows the default
+  context menu.&lt;/p&gt;
 
-  &lt;p&gt;If the user selects a menu item that represents a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt;, then the UA must invoke
-  that command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-contextmenu title=dom-contextMenu&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt; IDL attribute must
+  &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
 
-  &lt;p&gt;Context menus must not, while being shown, reflect changes in the
-  DOM; they are constructed as the default action of the &lt;code title=event-show&gt;show&lt;/code&gt; event and must remain as constructed
-  until dismissed.&lt;/p&gt;
-
-  &lt;p&gt;User agents may provide means for bypassing the context menu
-  processing model, ensuring that the user can always access the UA's
-  default context menus. For example, the user agent could handle
-  right-clicks that have the Shift key depressed in such a way that it
-  does not fire the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;
-  event and instead always shows the default context menu.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-contextmenu title=dom-contextMenu&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;div class=example&gt;
 
-   &lt;p&gt;Here is an example of a context menu for an input control:&lt;/p&gt;
 
-   &lt;pre&gt;&lt;form name=&quot;npc&quot;&gt;
- &lt;label&gt;Character name: &lt;input name=char type=text contextmenu=namemenu required&gt;&lt;/label&gt;
- &lt;menu type=context id=namemenu&gt;
-  &lt;command label=&quot;Pick random name&quot; onclick=&quot;document.forms.npc.elements.char.value = getRandomName()&quot;&gt;
-  &lt;command label=&quot;Prefill other fields based on name&quot; onclick=&quot;prefillFields(document.forms.npc.elements.char.value)&quot;&gt;
- &lt;/menu&gt;
-&lt;/form&gt;&lt;/pre&gt;
 
-   &lt;p&gt;This adds two items to the control's context menu, one called
-   &quot;Pick random name&quot;, and one called &quot;Prefill other fields based on
-   name&quot;. They invoke scripts that are not shown in the example
-   above.&lt;/p&gt;
+  &lt;h4 id=commands&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;Commands&lt;/h4&gt;
 
-  &lt;/div&gt;
+  &lt;h5 id=facets-0&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Facets&lt;/h5&gt;
 
-
-
-  &lt;div class=impl&gt;
-
-  &lt;h5 id=toolbars&gt;&lt;span class=secno&gt;4.11.4.4 &lt;/span&gt;&lt;dfn&gt;Toolbars&lt;/dfn&gt;&lt;/h5&gt;
-
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element has a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, then the user agent
-  must &lt;a href=#building-menus-and-toolbars title=&quot;building menus and toolbars&quot;&gt;build&lt;/a&gt; the
-  menu for that &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, and use the result in the
-  rendering.&lt;/p&gt;
-
-  &lt;p&gt;The user agent must reflect changes made to the
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;'s DOM, by immediately &lt;a href=#building-menus-and-toolbars title=&quot;building menus
-  and toolbars&quot;&gt;rebuilding&lt;/a&gt; the menu.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h4 id=commands&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Commands&lt;/h4&gt;
-
   &lt;p&gt;A &lt;dfn id=concept-command title=concept-command&gt;command&lt;/dfn&gt; is the abstraction
   behind menu items, buttons, and links. Once a command is defined,
   other parts of the interface can refer to the same command, allowing
@@ -58828,17 +58745,28 @@
   &lt;/div&gt;
 &lt;!--TOPIC:HTML--&gt;
 
-  &lt;hr&gt;&lt;p&gt;User agents may expose the &lt;a href=#concept-command title=concept-command&gt;commands&lt;/a&gt; whose &lt;a href=#command-facet-hiddenstate title=command-facet-HiddenState&gt;Hidden State&lt;/a&gt; facet is false
-  (visible) and whose elements are &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;. For example, such commands could be
-  listed in the user agent's menu bar. User agents are encouraged to
-  do this especially for commands that have &lt;a href=#command-facet-accesskey title=command-facet-AccessKey&gt;Access Keys&lt;/a&gt;, as a way to
-  advertise those keys to the user.&lt;/p&gt;
+  &lt;hr&gt;&lt;p id=expose-commands-in-ui&gt;User agents may expose the &lt;a href=#concept-command title=concept-command&gt;commands&lt;/a&gt; that match the following criteria:&lt;/p&gt;
 
+  &lt;ul class=brief&gt;&lt;li&gt;The &lt;a href=#command-facet-hiddenstate title=command-facet-HiddenState&gt;Hidden State&lt;/a&gt; facet is false (visible)&lt;/li&gt;
 
+   &lt;li&gt;The element is &lt;a href=#in-a-document&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; that has an associated &lt;a href=#browsing-context&gt;browsing
+   context&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;Neither the element nor any of its ancestors has a &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt;
+   attribute specified.&lt;/li&gt;
+
+   &lt;li&gt;The element is not a &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element, or it is a child of a &lt;a href=#currently-relevant-menu-element&gt;currently
+   relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;, or it has an &lt;a href=#command-facet-accesskey title=command-facet-accesskey&gt;Access Key&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p&gt;User agents are encouraged to do this especially for commands that have &lt;a href=#command-facet-accesskey title=command-facet-AccessKey&gt;Access Keys&lt;/a&gt;, as a way to advertise those keys to the
+  user.&lt;/p&gt;
+
+  &lt;p class=example&gt;For example, such commands could be listed in the user agent's menu bar.&lt;/p&gt;
+
+
   &lt;div class=impl&gt;
 
-  &lt;h5 id=using-the-a-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;&lt;dfn title=a-command&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-a-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.2 &lt;/span&gt;&lt;dfn title=a-command&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element with an &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
@@ -58889,7 +58817,7 @@
   element.&lt;/p&gt;
 
 
-  &lt;h5 id=using-the-button-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;&lt;dfn title=button-command&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-button-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.3 &lt;/span&gt;&lt;dfn title=button-command&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element always &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
@@ -58903,14 +58831,14 @@
   otherwise.&lt;/p&gt;
 
 
-  &lt;h5 id=using-the-input-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.3 &lt;/span&gt;&lt;dfn title=input-command&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-input-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.4 &lt;/span&gt;&lt;dfn title=input-command&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in one of the &lt;a href=&quot;#submit-button-state-(type=submit)&quot; title=attr-input-type-submit&gt;Submit Button&lt;/a&gt;, &lt;a href=&quot;#reset-button-state-(type=reset)&quot; title=attr-input-type-reset&gt;Reset Button&lt;/a&gt;, &lt;a href=&quot;#image-button-state-(type=image)&quot; title=attr-input-type-image&gt;Image Button&lt;/a&gt;, &lt;a href=&quot;#button-state-(type=button)&quot; title=attr-input-type-button&gt;Button&lt;/a&gt;, &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio Button&lt;/a&gt;, or &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; states &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-type title=command-facet-Type&gt;Type&lt;/a&gt; of the command
   is &quot;radio&quot; if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt;
-  attribute is in the &lt;code title=attr-input-type-radio&gt;&lt;a href=&quot;#radio-button-state-(type=radio)&quot;&gt;Radio
-  Button&lt;/a&gt;&lt;/code&gt; state, &quot;checkbox&quot; if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;code title=attr-input-type-checkbox&gt;&lt;a href=&quot;#checkbox-state-(type=checkbox)&quot;&gt;Checkbox&lt;/a&gt;&lt;/code&gt; state, and
+  attribute is in the &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio
+  Button&lt;/a&gt; state, &quot;checkbox&quot; if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; state, and
   &quot;command&quot; otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-id title=command-facet-ID&gt;ID&lt;/a&gt; of the command is
@@ -58975,7 +58903,7 @@
   element.&lt;/p&gt;
 
 
-  &lt;h5 id=using-the-option-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.4 &lt;/span&gt;&lt;dfn title=option-command&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-option-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.5 &lt;/span&gt;&lt;dfn title=option-command&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element with an ancestor
   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element and either no &lt;code title=attr-option-value&gt;&lt;a href=#attr-option-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code title=attr-option-value&gt;&lt;a href=#attr-option-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute that is not the
@@ -59031,13 +58959,13 @@
 
 
 
-  &lt;h5 id=using-the-command-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.5 &lt;/span&gt;Using the &lt;dfn title=command-element&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; element to define
+  &lt;h5 id=using-the-menuitem-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.6 &lt;/span&gt;Using the &lt;dfn title=command-element&gt;&lt;code&gt;menuitem&lt;/code&gt;&lt;/dfn&gt; element to define
   a command&lt;/h5&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element that does not have a &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element that does not have a &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-type title=command-facet-Type&gt;Type&lt;/a&gt; of the command
-  is &quot;radio&quot; if the &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;'s &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
+  is &quot;radio&quot; if the &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;'s &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
   &quot;&lt;code&gt;radio&lt;/code&gt;&quot;, &quot;checkbox&quot; if the attribute's value is
   &quot;&lt;code&gt;checkbox&lt;/code&gt;&quot;, and &quot;command&quot; otherwise.&lt;/p&gt;
 
@@ -59047,16 +58975,16 @@
   command is an &lt;a href=#anonymous-command&gt;anonymous command&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-label title=command-facet-Label&gt;Label&lt;/a&gt; of the command
-  is the value of the element's &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute, if there is one,
+  is the value of the element's &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute, if there is one,
   or the empty string if it doesn't.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-hint title=command-facet-Hint&gt;Hint&lt;/a&gt; of the command
-  is the string given by the element's &lt;code title=attr-command-title&gt;&lt;a href=#attr-command-title&gt;title&lt;/a&gt;&lt;/code&gt; attribute, if any, and the
+  is the string given by the element's &lt;code title=attr-menuitem-title&gt;&lt;a href=#attr-menuitem-title&gt;title&lt;/a&gt;&lt;/code&gt; attribute, if any, and the
   empty string if the attribute is absent.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-icon title=command-facet-Icon&gt;Icon&lt;/a&gt; for the command
   is the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; obtained from &lt;a href=#resolve-a-url title=&quot;resolve
-  a url&quot;&gt;resolving&lt;/a&gt; the value of the element's &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt; attribute, relative to the
+  a url&quot;&gt;resolving&lt;/a&gt; the value of the element's &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt; attribute, relative to the
   element, if it has such an attribute and resolving it is
   successful. Otherwise, there is no &lt;a href=#command-facet-icon title=command-facet-Icon&gt;Icon&lt;/a&gt; for the command.&lt;/p&gt;
 
@@ -59070,11 +58998,11 @@
 
   &lt;p&gt;The &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled
   State&lt;/a&gt; of the command is true if the element or one of its
-  ancestors is &lt;a href=#inert&gt;inert&lt;/a&gt;, or if the element has a &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute, and false
+  ancestors is &lt;a href=#inert&gt;inert&lt;/a&gt;, or if the element has a &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute, and false
   otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-checkedstate title=command-facet-CheckedState&gt;Checked State&lt;/a&gt;
-  of the command is true (checked) if the element has a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, and false
+  of the command is true (checked) if the element has a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, and false
   otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; of the
@@ -59086,9 +59014,9 @@
 
 
 
-  &lt;h5 id=using-the-command-attribute-on-command-elements-to-define-a-command-indirectly&gt;&lt;span class=secno&gt;4.11.5.6 &lt;/span&gt;&lt;dfn title=command-command-command&gt;Using the &lt;code title=attr-command-command&gt;command&lt;/code&gt; attribute on &lt;code&gt;command&lt;/code&gt; elements to define a command indirectly&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly&gt;&lt;span class=secno&gt;4.11.6.7 &lt;/span&gt;&lt;dfn title=command-menuitem-command&gt;Using the &lt;code title=attr-menuitem-command&gt;command&lt;/code&gt; attribute on &lt;code&gt;menuitem&lt;/code&gt; elements to define a command indirectly&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element with a &lt;a href=#master-command&gt;master command&lt;/a&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element with a &lt;a href=#master-command&gt;master command&lt;/a&gt;
   &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-type title=command-facet-Type&gt;Type&lt;/a&gt; of the command
@@ -59135,7 +59063,7 @@
 
 
 
-  &lt;h5 id=using-the-accesskey-attribute-on-a-label-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.7 &lt;/span&gt;&lt;dfn title=label-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;label&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-accesskey-attribute-on-a-label-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.8 &lt;/span&gt;&lt;dfn title=label-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;label&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt; element that has an &lt;a href=#assigned-access-key&gt;assigned access
   key&lt;/a&gt; and a &lt;a href=#labeled-control&gt;labeled control&lt;/a&gt; and whose
@@ -59176,7 +59104,7 @@
 
 
 
-  &lt;h5 id=using-the-accesskey-attribute-on-a-legend-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.8 &lt;/span&gt;&lt;dfn title=legend-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;legend&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-accesskey-attribute-on-a-legend-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.9 &lt;/span&gt;&lt;dfn title=legend-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;legend&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#the-legend-element&gt;legend&lt;/a&gt;&lt;/code&gt; element that has an &lt;a href=#assigned-access-key&gt;assigned access
   key&lt;/a&gt; and is a child of a &lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt; element that
@@ -59220,7 +59148,7 @@
 
 
 
-  &lt;h5 id=using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.5.9 &lt;/span&gt;&lt;dfn title=accesskey-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.6.10 &lt;/span&gt;&lt;dfn title=accesskey-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An element that has an &lt;a href=#assigned-access-key&gt;assigned access key&lt;/a&gt; &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
@@ -59283,7 +59211,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=the-dialog-element&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;dialog&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-dialog-element&gt;&lt;span class=secno&gt;4.11.7 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;dialog&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;&lt;dt&gt;&lt;a href=#element-dfn-categories title=element-dfn-categories&gt;Categories&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
@@ -59737,7 +59665,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=anchor-points&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Anchor points&lt;/h5&gt;
+  &lt;h5 id=anchor-points&gt;&lt;span class=secno&gt;4.11.7.1 &lt;/span&gt;Anchor points&lt;/h5&gt;
 
   &lt;p class=critical&gt;This section will eventually be moved to a CSS
   specification; it is specified here only on an interim basis until
@@ -61927,14 +61855,8 @@
 
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements that are &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements that have a &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements that have a &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements that are children of
-   &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements, and that have a child element that
-   defines a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt;, if the
-   first such element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; facet
-   is true (disabled)&lt;/li&gt;
-
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt; elements that have a &lt;code title=attr-fieldset-disabled&gt;&lt;a href=#attr-fieldset-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
   &lt;/ul&gt;&lt;p class=note&gt;This definition is used to determine what elements can be &lt;a href=#specially-focusable title=&quot;tabindex
@@ -62030,7 +61952,7 @@
 
        &lt;li&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=&quot;#submit-button-state-(type=submit)&quot; title=attr-input-type-submit&gt;Submit Button&lt;/a&gt;, &lt;a href=&quot;#image-button-state-(type=image)&quot; title=attr-input-type-image&gt;Image Button&lt;/a&gt;, &lt;a href=&quot;#reset-button-state-(type=reset)&quot; title=attr-input-type-reset&gt;Reset Button&lt;/a&gt;, or &lt;a href=&quot;#button-state-(type=button)&quot; title=attr-input-type-button&gt;Button&lt;/a&gt; state&lt;/li&gt;
 
-       &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
+       &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
        &lt;li&gt;elements that have their &lt;a href=#specially-focusable&gt;tabindex focus flag&lt;/a&gt; set&lt;/li&gt;
 
@@ -62148,14 +62070,8 @@
 
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements that are not &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements that are children of
-     &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements, and that have a child element that
-     defines a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt;, if the
-     first such element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; facet
-     is false (not disabled)&lt;/li&gt;
-
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-fieldset-disabled&gt;&lt;a href=#attr-fieldset-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
     &lt;/ul&gt;&lt;/dd&gt;
@@ -62190,12 +62106,12 @@
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements whose &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; is
      true&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/a&gt; state
-     and that have a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/a&gt; state
+     and that have a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;
      attribute&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt; state and that
-     have a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state and that
+     have a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;
      attribute&lt;/li&gt;
 
     &lt;/ul&gt;&lt;/dd&gt;
@@ -62240,8 +62156,8 @@
 
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements that have a &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 &lt;!--
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements that have a &lt;code
-     title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements that have a &lt;code
+     title=&quot;attr-menuitem-default&quot;&gt;default&lt;/code&gt; attribute&lt;/li&gt;
 --&gt;
     &lt;/ul&gt;&lt;/dd&gt;
 
@@ -73029,7 +72945,7 @@
   &lt;div class=impl&gt;
 
   &lt;!-- SCRIPT EXEC (marks areas related to creation of scripts) --&gt;
-  &lt;h4 id=processing-model-2&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-3&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;h5 id=definitions-0&gt;&lt;span class=secno&gt;7.1.3.1 &lt;/span&gt;Definitions&lt;/h5&gt;
 
@@ -73582,7 +73498,7 @@
   release the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=processing-model-3&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/h5&gt;
+  &lt;h5 id=processing-model-4&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/h5&gt;
 
   &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must continually run through the
   following steps for as long as it exists:&lt;/p&gt;
@@ -77064,7 +76980,7 @@
 
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; elements&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements&lt;/li&gt;
 
      &lt;li&gt;Elements with a &lt;code title=attr-draggable&gt;&lt;a href=#the-draggable-attribute&gt;draggable&lt;/a&gt;&lt;/code&gt;
      attribute set, if that would enable the user agent to allow the
@@ -77578,7 +77494,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=processing-model-4&gt;&lt;span class=secno&gt;8.5.3 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-5&gt;&lt;span class=secno&gt;8.5.3 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;An element's &lt;dfn id=assigned-access-key&gt;assigned access key&lt;/dfn&gt; is a key combination
   derived from the element's &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; content attribute.
@@ -77629,19 +77545,17 @@
   &lt;a href=#assigned-access-key&gt;assigned access key&lt;/a&gt; unless the &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; content attribute is changed
   or the element is moved to another &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the user presses the key combination corresponding to the
-  &lt;a href=#assigned-access-key&gt;assigned access key&lt;/a&gt; for an element, if the element
-  &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, the
-  command's &lt;a href=#command-facet-hiddenstate title=command-facet-HiddenState&gt;Hidden
-  State&lt;/a&gt; facet is false (visible), the command's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; facet is
-  also false (enabled), and the element is &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;, then the user agent must trigger the
-  &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; of the command.&lt;/p&gt;
+  &lt;p&gt;When the user presses the key combination corresponding to the &lt;a href=#assigned-access-key&gt;assigned access key&lt;/a&gt;
+  for an element, if the element &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, the
+  command's &lt;a href=#command-facet-hiddenstate title=command-facet-HiddenState&gt;Hidden State&lt;/a&gt; facet is false (visible),
+  the command's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; facet is also false
+  (enabled), the element is &lt;a href=#in-a-document&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; that has an associated
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, and neither the element nor any of its ancestors has a &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; attribute specified, then the user agent must trigger the &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; of the command.&lt;/p&gt;
 
-  &lt;p class=note&gt;User agents might expose elements that have an &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; attribute in other ways as
-  well, e.g. in a menu displayed in response to a specific key
-  combination.&lt;/p&gt; &lt;!-- the actual conformance criteria for this is in
-  the section that defines commands --&gt;
+  &lt;p class=note&gt;User agents &lt;a href=#expose-commands-in-ui&gt;might expose&lt;/a&gt; elements that have
+  an &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; attribute in other ways as well, e.g. in a menu
+  displayed in response to a specific key combination.&lt;/p&gt; &lt;!-- the actual conformance criteria for
+  this is in the section that defines commands --&gt;
 
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-accesskey title=dom-accessKey&gt;&lt;code&gt;accessKey&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
@@ -81809,7 +81723,7 @@
   &lt;a href=#permissible-worker&gt;permissible worker&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=processing-model-5&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-6&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with
   &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#browsing-context&gt;browsing
@@ -83138,7 +83052,7 @@
   &lt;/ul&gt;&lt;p&gt;These values are not currently exposed on the interface.&lt;/p&gt;
 
 
-  &lt;h4 id=processing-model-6&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-7&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;The resource indicated in the argument to the &lt;code title=dom-EventSource&gt;&lt;a href=#dom-eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; constructor is &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; when the constructor is run.&lt;/p&gt;
 
@@ -86606,12 +86520,10 @@
 
   &lt;dl&gt;&lt;dt&gt;&lt;dfn id=void-elements&gt;Void elements&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;!-- see also other places that say VOIDLIST --&gt;
 
    &lt;dt&gt;&lt;dfn id=raw-text-elements&gt;Raw text elements&lt;/dfn&gt;&lt;/dt&gt;
@@ -88485,7 +88397,7 @@
    &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#basefont&gt;basefont&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#bgsound&gt;bgsound&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-blockquote-element&gt;blockquote&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-caption-element&gt;caption&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-colgroup-element&gt;colgroup&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-colgroup-element&gt;colgroup&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-dd-element&gt;dd&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-details-element&gt;details&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#dir&gt;dir&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-dl-element&gt;dl&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-dt-element&gt;dt&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-figcaption-element&gt;figcaption&lt;/a&gt;&lt;/code&gt;,
@@ -95324,15 +95236,13 @@
 
         &lt;p&gt;Append a U+003E GREATER-THAN SIGN character (&gt;).&lt;/p&gt;
 
-        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;current node&lt;/var&gt; is an
-        &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#basefont&gt;basefont&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#bgsound&gt;bgsound&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#frame&gt;frame&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; or
-        &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt; element, then continue on to the next child
-        node at this point.&lt;/p&gt; &lt;!-- VOIDLIST superset --&gt;
+        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;current node&lt;/var&gt; is an &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;,
+        &lt;code&gt;&lt;a href=#basefont&gt;basefont&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#bgsound&gt;bgsound&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;,
+        &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#frame&gt;frame&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;,
+        &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;,
+        &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; or
+        &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt; element, then continue on to the next child node at this point.&lt;/p&gt;
+        &lt;!-- VOIDLIST superset --&gt;
         &lt;!-- also, i guess: image and isindex, but we don't list those
         because we don't consider those &quot;elements&quot;, more &quot;macros&quot;, and
         thus we should never serialize them --&gt;
@@ -96108,7 +96018,7 @@
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
 [hidden], area, base, basefont, command, datalist, head,
-input[type=hidden i], link, menu[type=context i], meta, noembed, noframes,
+input[type=hidden i], link, menu[type=popup i], meta, noembed, noframes,
 param, rp, script, source, style, track, title {
   display: none;
 }
@@ -97626,22 +97536,6 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=toolbars-0&gt;&lt;span class=secno&gt;14.4.5 &lt;/span&gt;Toolbars&lt;/h4&gt;
-
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, the element is
-  expected to be treated as a replaced element with a height about two
-  lines high and a width derived from the contents of the element.&lt;/p&gt;
-
-  &lt;p&gt;The element is expected to have, by default, the appearance of a
-  toolbar on the user agent's platform. It is expected to contain the
-  menu that is &lt;a href=#building-menus-and-toolbars title=&quot;building menus and toolbars&quot;&gt;built&lt;/a&gt;
-  from the element.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;div class=impl&gt;
-
   &lt;h3 id=bindings&gt;&lt;span class=secno&gt;14.5 &lt;/span&gt;Bindings&lt;/h3&gt;
 
   &lt;h4 id=introduction-14&gt;&lt;span class=secno&gt;14.5.1 &lt;/span&gt;Introduction&lt;/h4&gt;
@@ -97678,6 +97572,11 @@
   'inline-block' box rendered as a button whose contents are the
   contents of the element.&lt;/p&gt;
 
+  &lt;p&gt;When the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
+  in the &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt; state, the user agent is expected to
+  indicate that activating the element will display a menu, e.g. by displaying a down-pointing
+  triangle after the button's label.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -101235,7 +101134,7 @@
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-colgroup-span&gt;&lt;a href=#attr-colgroup-span&gt;span&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#htmltablecolelement&gt;HTMLTableColElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
-    &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
+    &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;Menu command&lt;/td&gt;
      &lt;td&gt;&lt;a href=#metadata-content title=&quot;Metadata content&quot;&gt;metadata&lt;/a&gt;;
          &lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;;
@@ -101244,14 +101143,14 @@
          &lt;a href=#phrasing-content title=&quot;Phrasing content&quot;&gt;phrasing&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;empty&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
-         &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
-     &lt;td&gt;&lt;code&gt;&lt;a href=#htmlcommandelement&gt;HTMLCommandElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
+         &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;code&gt;&lt;a href=#htmlmenuitemelement&gt;HTMLMenuItemElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
     &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;Machine-readable equivalent&lt;/td&gt;
      &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;;
@@ -101609,7 +101508,7 @@
     &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;List item&lt;/td&gt;
      &lt;td&gt;none&lt;/td&gt;
-     &lt;td&gt;&lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt;; &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt;; &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt;; &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt;; &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-li-value&gt;&lt;a href=#attr-li-value&gt;value&lt;/a&gt;&lt;/code&gt;*&lt;/td&gt;
@@ -101652,11 +101551,14 @@
      &lt;td&gt;&lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
     &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;Menu of commands&lt;/td&gt;
-     &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;;
-         &lt;a href=#interactive-content title=&quot;Interactive content&quot;&gt;interactive&lt;/a&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;;
+         &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt;*;
-         &lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;&lt;/td&gt;
+         &lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;*;
+         &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;*;
+         &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;*;
+         &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
@@ -102153,15 +102055,12 @@
     &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
   complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
 
-  &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that
-  list the given categories in their content model, not to elements
-  that themselves are in those categories. For example, the
-  &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element's &quot;Parents&quot; column says &quot;phrasing&quot;, so any
-  element whose content model contains the &quot;phrasing&quot; category could
-  be a parent of an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element. Since the &quot;flow&quot; category
-  includes all the &quot;phrasing&quot; elements, that means the
-  &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt; element could be a parent to an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;
-  element.&lt;/p&gt;
+  &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that list the given categories in
+  their content model, not to elements that themselves are in those categories. For example, the
+  &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element's &quot;Parents&quot; column says &quot;phrasing&quot;, so any element whose content model
+  contains the &quot;phrasing&quot; category could be a parent of an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element. Since the &quot;flow&quot;
+  category includes all the &quot;phrasing&quot; elements, that means the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element could be a
+  parent to an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
 
 
@@ -102178,7 +102077,6 @@
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;a href=#metadata-content&gt;Metadata content&lt;/a&gt;
      &lt;td&gt;
       &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;;
-      &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-noscript-element&gt;noscript&lt;/a&gt;&lt;/code&gt;;
@@ -102205,7 +102103,6 @@
       &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-cite-element&gt;cite&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-code-element&gt;code&lt;/a&gt;&lt;/code&gt;;
-      &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-datalist-element&gt;datalist&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt;;
@@ -102312,7 +102209,6 @@
       &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-cite-element&gt;cite&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-code-element&gt;code&lt;/a&gt;&lt;/code&gt;;
-      &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-datalist-element&gt;datalist&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt;;
@@ -102388,7 +102284,6 @@
       &lt;code&gt;&lt;a href=#the-audio-element&gt;audio&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-media-controls&gt;&lt;a href=#attr-media-controls&gt;controls&lt;/a&gt;&lt;/code&gt; attribute is present);
       &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt; attribute is present);
       &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;a href=&quot;#hidden-state-(type=hidden)&quot; title=attr-input-type-hidden&gt;Hidden&lt;/a&gt; state);
-      &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state);
       &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt; attribute is present)&lt;!-- see also comment in &lt;object&gt; section --&gt;;
       &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-media-controls&gt;&lt;a href=#attr-media-controls&gt;controls&lt;/a&gt;&lt;/code&gt; attribute is present)
 
@@ -102537,7 +102432,7 @@
       &lt;code&gt;&lt;a href=#the-audio-element&gt;audio&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-media-controls&gt;&lt;a href=#attr-media-controls&gt;controls&lt;/a&gt;&lt;/code&gt; attribute is present);
       &lt;code&gt;&lt;a href=#the-dl-element&gt;dl&lt;/a&gt;&lt;/code&gt; (if the element's children include at least one name-value group);
       &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;a href=&quot;#hidden-state-(type=hidden)&quot; title=attr-input-type-hidden&gt;Hidden&lt;/a&gt; state);
-      &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state or the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state);
+      &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state);
       &lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt; (if the element's children include at least one &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element);
       &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt; (if the element's children include at least one &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element);
       &lt;a href=#text-content title=&quot;text content&quot;&gt;Text&lt;/a&gt; that is not &lt;a href=#inter-element-whitespace&gt;inter-element whitespace&lt;/a&gt;
@@ -102621,7 +102516,7 @@
      &lt;td&gt; Character encoding of the external script resource
      &lt;td&gt; &lt;a href=#preferred-mime-name&gt;Preferred MIME name&lt;/a&gt; of a character encoding*
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;command&lt;/a&gt;&lt;/code&gt;;
+     &lt;td&gt; &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;menuitem&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-input-checked&gt;&lt;a href=#attr-input-checked&gt;input&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Whether the command or control is checked
      &lt;td&gt; &lt;a href=#boolean-attribute&gt;Boolean attribute&lt;/a&gt;
@@ -102646,7 +102541,7 @@
      &lt;td&gt; Number of columns that the cell is to span
      &lt;td&gt; &lt;a href=#valid-non-negative-integer&gt;Valid non-negative integer&lt;/a&gt; greater than zero
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;command&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Command definition
      &lt;td&gt; &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt;*
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;content&lt;/code&gt;
@@ -102719,7 +102614,7 @@
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;*
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;disabled&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-fe-disabled&gt;&lt;a href=#attr-fe-disabled&gt;button&lt;/a&gt;&lt;/code&gt;;
-          &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;command&lt;/a&gt;&lt;/code&gt;;
+          &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;menuitem&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-fieldset-disabled&gt;&lt;a href=#attr-fieldset-disabled&gt;fieldset&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-fe-disabled&gt;&lt;a href=#attr-fe-disabled&gt;input&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-fe-disabled&gt;&lt;a href=#attr-fe-disabled&gt;keygen&lt;/a&gt;&lt;/code&gt;;
@@ -102838,7 +102733,7 @@
      &lt;td&gt; Pragma directive
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;*
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;icon&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Icon for the command
      &lt;td&gt; &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;Valid non-empty URL potentially surrounded by spaces&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;id&lt;/code&gt;
@@ -102902,7 +102797,7 @@
           &quot;&lt;code title=attr-track-kind-chapters&gt;&lt;a href=#attr-track-kind-chapters&gt;chapters&lt;/a&gt;&lt;/code&gt;&quot;;
           &quot;&lt;code title=attr-track-kind-metadata&gt;&lt;a href=#attr-track-kind-metadata&gt;metadata&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;label&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;command&lt;/a&gt;&lt;/code&gt;;
+     &lt;td&gt; &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;menuitem&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;menu&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-optgroup-label&gt;&lt;a href=#attr-optgroup-label&gt;optgroup&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-option-label&gt;&lt;a href=#attr-option-label&gt;option&lt;/a&gt;&lt;/code&gt;;
@@ -103054,7 +102949,7 @@
           &quot;&lt;code title=attr-media-preload-metadata&gt;&lt;a href=#attr-media-preload-metadata&gt;metadata&lt;/a&gt;&lt;/code&gt;&quot;;
           &quot;&lt;code title=attr-media-preload-auto&gt;&lt;a href=#attr-media-preload-auto&gt;auto&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;radiogroup&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Name of group of commands to treat as a radio button group
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;readonly&lt;/code&gt;
@@ -103204,7 +103099,7 @@
      &lt;td&gt; Full term or expansion of abbreviation
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;title&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-title&gt;&lt;a href=#attr-command-title&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-title&gt;&lt;a href=#attr-menuitem-title&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Hint describing the command
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;title&lt;/code&gt;
@@ -103231,13 +103126,14 @@
      &lt;td&gt; Type of button
      &lt;td&gt; &quot;&lt;code title=attr-button-type-submit&gt;&lt;a href=#attr-button-type-submit&gt;submit&lt;/a&gt;&lt;/code&gt;&quot;;
           &quot;&lt;code title=attr-button-type-reset&gt;&lt;a href=#attr-button-type-reset&gt;reset&lt;/a&gt;&lt;/code&gt;&quot;;
-          &quot;&lt;code title=attr-button-type-button&gt;&lt;a href=#attr-button-type-button&gt;button&lt;/a&gt;&lt;/code&gt;&quot;
+          &quot;&lt;code title=attr-button-type-button&gt;&lt;a href=#attr-button-type-button&gt;button&lt;/a&gt;&lt;/code&gt;&quot;;
+          &quot;&lt;code title=attr-button-type-menu&gt;&lt;a href=#attr-button-type-menu&gt;menu&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Type of command
-     &lt;td&gt; &quot;&lt;code title=attr-command-type-keyword-command&gt;&lt;a href=#attr-command-type-keyword-command&gt;command&lt;/a&gt;&lt;/code&gt;&quot;;
-          &quot;&lt;code title=attr-command-type-keyword-checkbox&gt;&lt;a href=#attr-command-type-keyword-checkbox&gt;checkbox&lt;/a&gt;&lt;/code&gt;&quot;;
-          &quot;&lt;code title=attr-command-type-keyword-radio&gt;&lt;a href=#attr-command-type-keyword-radio&gt;radio&lt;/a&gt;&lt;/code&gt;&quot;
+     &lt;td&gt; &quot;&lt;code title=attr-menuitem-type-keyword-command&gt;&lt;a href=#attr-menuitem-type-keyword-command&gt;command&lt;/a&gt;&lt;/code&gt;&quot;;
+          &quot;&lt;code title=attr-menuitem-type-keyword-checkbox&gt;&lt;a href=#attr-menuitem-type-keyword-checkbox&gt;checkbox&lt;/a&gt;&lt;/code&gt;&quot;;
+          &quot;&lt;code title=attr-menuitem-type-keyword-radio&gt;&lt;a href=#attr-menuitem-type-keyword-radio&gt;radio&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;embed&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;object&lt;/a&gt;&lt;/code&gt;;
@@ -103253,7 +103149,7 @@
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;menu&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Type of menu
-     &lt;td&gt; &quot;&lt;code title=&quot;context menu state&quot;&gt;&lt;a href=#context-menu-state&gt;context&lt;/a&gt;&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;&lt;a href=#toolbar-state&gt;toolbar&lt;/a&gt;&lt;/code&gt;&quot;
+     &lt;td&gt; &quot;&lt;code title=&quot;popup menu state&quot;&gt;&lt;a href=#popup-menu-state&gt;popup&lt;/a&gt;&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;&lt;a href=#toolbar-state&gt;toolbar&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;typemustmatch&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;object&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Whether the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and the &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; value need to match for the resource to be used
@@ -103789,8 +103685,8 @@
     &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-colgroup-element&gt;colgroup&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; &lt;code&gt;&lt;a href=#htmltablecolelement&gt;HTMLTableColElement&lt;/a&gt;&lt;/code&gt; : &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
 
-    &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#htmlcommandelement&gt;HTMLCommandElement&lt;/a&gt;&lt;/code&gt; : &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code&gt;&lt;a href=#htmlmenuitemelement&gt;HTMLMenuItemElement&lt;/a&gt;&lt;/code&gt; : &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; &lt;code&gt;&lt;a href=#htmldataelement&gt;HTMLDataElement&lt;/a&gt;&lt;/code&gt; : &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
@@ -104098,7 +103994,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlbodyelement&gt;HTMLBodyElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlbuttonelement&gt;HTMLButtonElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#htmlcommandelement&gt;HTMLCommandElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmldlistelement&gt;HTMLDListElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmldataelement&gt;HTMLDataElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmldatalistelement&gt;HTMLDataListElement&lt;/a&gt;&lt;/code&gt;
@@ -104130,6 +104025,7 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmarqueeelement&gt;HTMLMarqueeElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmediaelement&gt;HTMLMediaElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmenuelement&gt;HTMLMenuElement&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmenuitemelement&gt;HTMLMenuItemElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmetaelement&gt;HTMLMetaElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmeterelement&gt;HTMLMeterElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmodelement&gt;HTMLModElement&lt;/a&gt;&lt;/code&gt;

Modified: images/content-venn.svg
===================================================================
--- images/content-venn.svg	2012-12-28 02:06:14 UTC (rev 7601)
+++ images/content-venn.svg	2012-12-29 01:23:20 UTC (rev 7602)
@@ -37,7 +37,6 @@
      &lt;li&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;cite&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;code&lt;/code&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;data&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;date&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;datalist&lt;/code&gt;&lt;/li&gt;
@@ -154,7 +153,6 @@
     &lt;h1&gt;Metadata content&lt;/h1&gt;
     &lt;ul&gt;
      &lt;li&gt;&lt;code&gt;base&lt;/code&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;link&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;meta&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;noscript&lt;/code&gt;&lt;/li&gt;
@@ -182,7 +180,6 @@
      &lt;li&gt;&lt;code&gt;input&lt;/code&gt;*&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;keygen&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;label&lt;/code&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;code&gt;menu&lt;/code&gt;*&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;object&lt;/code&gt;*&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;select&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;textarea&lt;/code&gt;&lt;/li&gt;
@@ -211,7 +208,6 @@
      &lt;li&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;cite&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;code&lt;/code&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;data&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;date&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;datalist&lt;/code&gt;&lt;/li&gt;

Modified: index
===================================================================
--- index	2012-12-28 02:06:14 UTC (rev 7601)
+++ index	2012-12-29 01:23:20 UTC (rev 7602)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 28 December 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 29 December 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -771,28 +771,28 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#the-details-element&gt;&lt;span class=secno&gt;4.11.1 &lt;/span&gt;The &lt;code&gt;details&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-summary-element&gt;&lt;span class=secno&gt;4.11.2 &lt;/span&gt;The &lt;code&gt;summary&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-command-element&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;code&gt;command&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-menu-element&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#the-menu-element&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-menuitem-element&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;code&gt;menuitem&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#context-menus&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Context menus&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#menus-intro&gt;&lt;span class=secno&gt;4.11.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#building-menus-and-toolbars&gt;&lt;span class=secno&gt;4.11.4.2 &lt;/span&gt;Building menus and toolbars&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#context-menus&gt;&lt;span class=secno&gt;4.11.4.3 &lt;/span&gt;Context menus&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#toolbars&gt;&lt;span class=secno&gt;4.11.4.4 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#commands&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Commands&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#declaring-a-context-menu&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;Declaring a context menu&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#commands&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;Commands&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#using-the-a-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-button-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-input-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.3 &lt;/span&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-option-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.4 &lt;/span&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-command-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.5 &lt;/span&gt;Using the &lt;code&gt;command&lt;/code&gt; element to define
+       &lt;li&gt;&lt;a href=#facets-0&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Facets&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-a-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.2 &lt;/span&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-button-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.3 &lt;/span&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-input-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.4 &lt;/span&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-option-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.5 &lt;/span&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-menuitem-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.6 &lt;/span&gt;Using the &lt;code&gt;menuitem&lt;/code&gt; element to define
   a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-command-attribute-on-command-elements-to-define-a-command-indirectly&gt;&lt;span class=secno&gt;4.11.5.6 &lt;/span&gt;Using the &lt;code title=attr-command-command&gt;command&lt;/code&gt; attribute on &lt;code&gt;command&lt;/code&gt; elements to define a command indirectly&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-on-a-label-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.7 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;label&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-on-a-legend-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.8 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;legend&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.5.9 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-dialog-element&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;The &lt;code&gt;dialog&lt;/code&gt; element&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly&gt;&lt;span class=secno&gt;4.11.6.7 &lt;/span&gt;Using the &lt;code title=attr-menuitem-command&gt;command&lt;/code&gt; attribute on &lt;code&gt;menuitem&lt;/code&gt; elements to define a command indirectly&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-on-a-label-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.8 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;label&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-on-a-legend-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.9 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;legend&lt;/code&gt; element to define a command&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.6.10 &lt;/span&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-dialog-element&gt;&lt;span class=secno&gt;4.11.7 &lt;/span&gt;The &lt;code&gt;dialog&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#anchor-points&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Anchor points&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#anchor-points&gt;&lt;span class=secno&gt;4.11.7.1 &lt;/span&gt;Anchor points&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#links&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Links&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-3&gt;&lt;span class=secno&gt;4.12.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -946,7 +946,7 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-6&gt;&lt;span class=secno&gt;7.1.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#enabling-and-disabling-scripting&gt;&lt;span class=secno&gt;7.1.2 &lt;/span&gt;Enabling and disabling scripting&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#processing-model-3&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#definitions-0&gt;&lt;span class=secno&gt;7.1.3.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#calling-scripts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Calling scripts&lt;/a&gt;&lt;/li&gt;
@@ -958,7 +958,7 @@
      &lt;li&gt;&lt;a href=#event-loops&gt;&lt;span class=secno&gt;7.1.4 &lt;/span&gt;Event loops&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#definitions-1&gt;&lt;span class=secno&gt;7.1.4.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#processing-model-3&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#generic-task-sources&gt;&lt;span class=secno&gt;7.1.4.3 &lt;/span&gt;Generic task sources&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#javascript-protocol&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL scheme&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#events&gt;&lt;span class=secno&gt;7.1.6 &lt;/span&gt;Events&lt;/a&gt;
@@ -1003,7 +1003,7 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-7&gt;&lt;span class=secno&gt;8.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-accesskey-attribute&gt;&lt;span class=secno&gt;8.5.2 &lt;/span&gt;The &lt;code&gt;accesskey&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;8.5.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-5&gt;&lt;span class=secno&gt;8.5.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#editing-0&gt;&lt;span class=secno&gt;8.6 &lt;/span&gt;Editing&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#contenteditable&gt;&lt;span class=secno&gt;8.6.1 &lt;/span&gt;Making document regions editable: The &lt;code title=attr-contenteditable&gt;contenteditable&lt;/code&gt; content
@@ -1052,7 +1052,7 @@
        &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworkerglobalscope-interface&gt;&lt;span class=secno&gt;9.2.1.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-event-loop&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The event loop&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-worker's-lifetime&quot;&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;The worker's lifetime&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-5&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-6&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#runtime-script-errors-0&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;Creating workers&lt;/a&gt;
       &lt;ol&gt;
@@ -1072,7 +1072,7 @@
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#server-sent-events-intro&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-eventsource-interface&gt;&lt;span class=secno&gt;10.2.2 &lt;/span&gt;The &lt;code&gt;EventSource&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-6&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-7&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#parsing-an-event-stream&gt;&lt;span class=secno&gt;10.2.4 &lt;/span&gt;Parsing an event stream&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#event-stream-interpretation&gt;&lt;span class=secno&gt;10.2.5 &lt;/span&gt;Interpreting an event stream&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#notes&gt;&lt;span class=secno&gt;10.2.6 &lt;/span&gt;Notes&lt;/a&gt;&lt;/li&gt;
@@ -1312,8 +1312,7 @@
      &lt;li&gt;&lt;a href=#embedded-content-2&gt;&lt;span class=secno&gt;14.4.1 &lt;/span&gt;Embedded content&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;14.4.3 &lt;/span&gt;Attributes for embedded content and images&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;14.4.4 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;14.4.5 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;14.4.4 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#bindings&gt;&lt;span class=secno&gt;14.5 &lt;/span&gt;Bindings&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-14&gt;&lt;span class=secno&gt;14.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -11855,7 +11854,6 @@
 
   &lt;!-- when updating this also update the category index --&gt;
   &lt;ul class=&quot;brief category-list&quot;&gt;&lt;li&gt;&lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-noscript-element&gt;noscript&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -11917,7 +11915,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-cite-element&gt;cite&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-code-element&gt;code&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-datalist-element&gt;datalist&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -12039,7 +12036,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-cite-element&gt;cite&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-code-element&gt;code&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-datalist-element&gt;datalist&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -12181,7 +12177,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;a href=&quot;#hidden-state-(type=hidden)&quot; title=attr-input-type-hidden&gt;Hidden&lt;/a&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt; attribute is present)&lt;!-- see also comment in &lt;object&gt; section --&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -12376,7 +12371,7 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-map-element&gt;map&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-mark-element&gt;mark&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#math&gt;math&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state or the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state)&lt;/li&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-meter-element&gt;meter&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-nav-element&gt;nav&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -12949,15 +12944,9 @@
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; element that creates a &lt;a href=#hyperlink&gt;hyperlink&lt;/a&gt;
      &lt;td&gt;&lt;code title=attr-aria-role-link&gt;link&lt;/code&gt; role
 
-    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#context-menu-state title=&quot;context menu state&quot;&gt;context menu&lt;/a&gt; state
+    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
 
-    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-menu&gt;menu&lt;/code&gt; role
-
-    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-toolbar&gt;toolbar&lt;/code&gt; role
-
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
 
@@ -13012,15 +13001,6 @@
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-title-element&gt;title&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
 
-    &lt;tr&gt;&lt;td&gt;An element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, whose &lt;a href=#command-facet-type title=command-facet-type&gt;Type&lt;/a&gt; facet is &quot;checkbox&quot;, and that is a descendant of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt; role, with the &lt;code title=attr-aria-checked&gt;aria-checked&lt;/code&gt; state set to &quot;true&quot; if the command's &lt;a href=#command-facet-checkedstate title=command-facet-checkedstate&gt;Checked State&lt;/a&gt; facet is true, and &quot;false&quot; otherwise
-
-    &lt;tr&gt;&lt;td&gt;An element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, whose &lt;a href=#command-facet-type title=command-facet-type&gt;Type&lt;/a&gt; facet is &quot;command&quot;, and that is a descendant of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt; role
-
-    &lt;tr&gt;&lt;td&gt;An element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, whose &lt;a href=#command-facet-type title=command-facet-type&gt;Type&lt;/a&gt; facet is &quot;radio&quot;, and that is a descendant of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state
-     &lt;td&gt;&lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt; role, with the &lt;code title=attr-aria-checked&gt;aria-checked&lt;/code&gt; state set to &quot;true&quot; if the command's &lt;a href=#command-facet-checkedstate title=command-facet-checkedstate&gt;Checked State&lt;/a&gt; facet is true, and &quot;false&quot; otherwise
-
     &lt;tr&gt;&lt;td&gt;Element that is &lt;a href=#concept-fe-disabled title=concept-fe-disabled&gt;disabled&lt;/a&gt;
      &lt;td&gt;The &lt;code title=attr-aria-disabled&gt;aria-disabled&lt;/code&gt; state set to &quot;true&quot;
 
@@ -13051,7 +13031,7 @@
 
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element that creates a &lt;a href=#hyperlink&gt;hyperlink&lt;/a&gt;
      &lt;td&gt;&lt;code title=attr-aria-role-link&gt;link&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;, &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-checkbox&gt;checkbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-tab&gt;tab&lt;/code&gt;, or &lt;code title=attr-aria-role-treeitem&gt;treeitem&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-tab&gt;tab&lt;/code&gt;, or &lt;code title=attr-aria-role-treeitem&gt;treeitem&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
@@ -13071,7 +13051,7 @@
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;code title=attr-aria-role-button&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-radio&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-details-element&gt;details&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;code title=attr-aria-role-group&gt;group&lt;/code&gt; role
@@ -13143,7 +13123,7 @@
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=&quot;#button-state-(type=button)&quot; title=attr-input-type-button&gt;Button&lt;/a&gt; state
      &lt;td&gt;&lt;code title=attr-aria-role-button&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-radio&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; state
      &lt;td&gt;&lt;code title=attr-aria-role-checkbox&gt;checkbox&lt;/code&gt; role
@@ -13151,7 +13131,7 @@
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=&quot;#image-button-state-(type=image)&quot; title=attr-input-type-image&gt;Image Button&lt;/a&gt; state
      &lt;td&gt;&lt;code title=attr-aria-role-button&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-link&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=attr-aria-role-radio&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-button&gt;button&lt;/code&gt;, &lt;code title=attr-aria-role-menuitem&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio Button&lt;/a&gt; state
      &lt;td&gt;&lt;code title=attr-aria-role-radio&gt;radio&lt;/code&gt; role
@@ -13161,13 +13141,17 @@
      &lt;td&gt;&lt;code title=attr-aria-role-listitem&gt;listitem&lt;/code&gt; role
      &lt;td&gt;Role must be either &lt;code title=attr-aria-role-listitem&gt;listitem&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemcheckbox&gt;menuitemcheckbox&lt;/code&gt;, &lt;code title=attr-aria-role-menuitemradio&gt;menuitemradio&lt;/code&gt;, &lt;code title=attr-aria-role-option&gt;option&lt;/code&gt;, &lt;code title=attr-aria-role-tab&gt;tab&lt;/code&gt;, or &lt;code title=attr-aria-role-treeitem&gt;treeitem&lt;/code&gt;
 
+    &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state
+     &lt;td&gt;&lt;code title=attr-aria-role-toolbar&gt;toolbar&lt;/code&gt; role
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-directory&gt;directory&lt;/code&gt;, &lt;code title=attr-aria-role-list&gt;list&lt;/code&gt;, &lt;code title=attr-aria-role-listbox&gt;listbox&lt;/code&gt;, &lt;code title=attr-aria-role-menu&gt;menu&lt;/code&gt;, &lt;code title=attr-aria-role-menubar&gt;menubar&lt;/code&gt;, &lt;code title=attr-aria-role-tablist&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, or &lt;code title=attr-aria-role-tree&gt;tree&lt;/code&gt;
+
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;a href=#concept-role-none title=concept-role-none&gt;No role&lt;/a&gt;
      &lt;td&gt;If specified, role must be either &lt;code title=attr-aria-role-application&gt;application&lt;/code&gt;, &lt;code title=attr-aria-role-document&gt;document&lt;/code&gt;, or &lt;code title=attr-aria-role-img&gt;img&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;code title=attr-aria-role-list&gt;list&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-directory&gt;directory&lt;/code&gt;, &lt;code title=attr-aria-role-list&gt;list&lt;/code&gt;, &lt;code title=attr-aria-role-listbox&gt;listbox&lt;/code&gt;, &lt;code title=attr-aria-role-menu&gt;menu&lt;/code&gt;, &lt;code title=attr-aria-role-menubar&gt;menubar&lt;/code&gt;, &lt;code title=attr-aria-role-tablist&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, &lt;code title=attr-aria-role-tree&gt;tree&lt;/code&gt;
+     &lt;td&gt;Role must be either &lt;code title=attr-aria-role-directory&gt;directory&lt;/code&gt;, &lt;code title=attr-aria-role-list&gt;list&lt;/code&gt;, &lt;code title=attr-aria-role-listbox&gt;listbox&lt;/code&gt;, &lt;code title=attr-aria-role-menu&gt;menu&lt;/code&gt;, &lt;code title=attr-aria-role-menubar&gt;menubar&lt;/code&gt;, &lt;code title=attr-aria-role-tablist&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, or &lt;code title=attr-aria-role-tree&gt;tree&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;a href=#the-output-element&gt;output&lt;/a&gt;&lt;/code&gt; element
      &lt;td&gt;&lt;code title=attr-aria-role-status&gt;status&lt;/code&gt; role
@@ -19772,7 +19756,7 @@
    &lt;dt&gt;&lt;a href=#element-dfn-contexts title=element-dfn-contexts&gt;Contexts in which this element can be used&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;Inside &lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
    &lt;dd&gt;Inside &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
-   &lt;dd&gt;Inside &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
+   &lt;dd&gt;Inside &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-content-model title=element-dfn-content-model&gt;Content model&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
@@ -19858,12 +19842,6 @@
 &lt;/figure&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;p class=note&gt;If the &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element is the child of a
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element and itself has a child that defines a
-  &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt;, then the
-  &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element will match the &lt;code title=selector-enabled&gt;&lt;a href=#selector-enabled&gt;:enabled&lt;/a&gt;&lt;/code&gt; and &lt;code title=selector-disabled&gt;&lt;a href=#selector-disabled&gt;:disabled&lt;/a&gt;&lt;/code&gt; pseudo-classes in the
-  same way as the first such child element does.&lt;/p&gt;
-
   &lt;p class=note&gt;While it is conforming to include heading elements
   (e.g. &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;) inside &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements, it likely
   does not convey the semantics that the author intended. A heading
@@ -51998,6 +51976,7 @@
    &lt;dd&gt;&lt;code title=attr-fe-name&gt;&lt;a href=#attr-fe-name&gt;name&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-button-value&gt;&lt;a href=#attr-button-value&gt;value&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-button-menu&gt;&lt;a href=#attr-button-menu&gt;menu&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
 &lt;pre class=idl&gt;interface &lt;dfn id=htmlbuttonelement&gt;HTMLButtonElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
@@ -52012,6 +51991,7 @@
            attribute DOMString &lt;a href=#dom-fe-name title=dom-fe-name&gt;name&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-button-type title=dom-button-type&gt;type&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-button-value title=dom-button-value&gt;value&lt;/a&gt;;
+           attribute &lt;a href=#htmlmenuelement&gt;HTMLMenuElement&lt;/a&gt;? &lt;a href=#dom-button-menu title=dom-button-menu&gt;menu&lt;/a&gt;;
 
   readonly attribute boolean &lt;a href=#dom-cva-willvalidate title=dom-cva-willValidate&gt;willValidate&lt;/a&gt;;
   readonly attribute &lt;a href=#validitystate&gt;ValidityState&lt;/a&gt; &lt;a href=#dom-cva-validity title=dom-cva-validity&gt;validity&lt;/a&gt;;
@@ -52045,6 +52025,9 @@
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-button-type-button title=attr-button-type-button&gt;&lt;code&gt;button&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;&lt;a href=#attr-button-type-button-state title=attr-button-type-button-state&gt;Button&lt;/a&gt;
      &lt;td&gt;Does nothing.
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=attr-button-type-menu title=attr-button-type-menu&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt;
+     &lt;td&gt;Shows a menu.
   &lt;/table&gt;&lt;p&gt;The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;a href=#attr-button-type-submit-state title=attr-button-type-submit-state&gt;Submit Button&lt;/a&gt;
   state.&lt;/p&gt;
 
@@ -52054,8 +52037,9 @@
 
   &lt;div class=impl&gt;
 
-  &lt;p&gt;&lt;strong&gt;Constraint validation&lt;/strong&gt;: If the &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-button-type-reset-state title=attr-button-type-reset-state&gt;Reset Button&lt;/a&gt; state or
+  &lt;p&gt;&lt;strong&gt;Constraint validation&lt;/strong&gt;: If the &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-button-type-reset-state title=attr-button-type-reset-state&gt;Reset Button&lt;/a&gt; state,
   the &lt;a href=#attr-button-type-button-state title=attr-button-type-button-state&gt;Button&lt;/a&gt; state,
+  or the &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt; state,
   the element is &lt;a href=#barred-from-constraint-validation&gt;barred from constraint validation&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#concept-fe-disabled title=concept-fe-disabled&gt;disabled&lt;/a&gt;, its &lt;a href=#activation-behavior&gt;activation
@@ -52078,6 +52062,23 @@
 
    &lt;dd&gt;&lt;p&gt;Do nothing.&lt;/dd&gt;
 
+   &lt;dt&gt; &lt;dfn id=attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/dfn&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The element must follow these steps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the element's &lt;a href=#designated-pop-up-menu&gt;designated pop-up menu&lt;/a&gt;, if
+     any. If there isn't one, then abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; that is
+     cancelable at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;. &lt;!-- v2: include modifier key information --&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and
+     show&lt;/a&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/dd&gt;
+
   &lt;/dl&gt;&lt;/div&gt;
 
   &lt;p&gt;The &lt;code title=attr-fae-form&gt;&lt;a href=#attr-fae-form&gt;form&lt;/a&gt;&lt;/code&gt; attribute is used to
@@ -52108,12 +52109,24 @@
   form submission if the button itself was used to initiate the form
   submission.&lt;/p&gt;
 
+  &lt;hr&gt;&lt;p&gt;If the element's &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt; state, the &lt;dfn id=attr-button-menu title=attr-button-menu&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; attribute must be specified to give the element's
+  menu. The value must be the &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element in
+  the same &lt;a href=#home-subtree&gt;home subtree&lt;/a&gt; whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in
+  the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state. The attribute must not be specified if
+  the element's &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is not in the &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt; state.&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-button-value title=dom-button-value&gt;&lt;code&gt;value&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
-  same name.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element's &lt;dfn id=designated-pop-up-menu&gt;designated pop-up menu&lt;/dfn&gt; is the first element in the
+  &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#home-subtree&gt;home subtree&lt;/a&gt; whose ID is that given by the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt;
+  element's &lt;code title=attr-button-menu&gt;&lt;a href=#attr-button-menu&gt;menu&lt;/a&gt;&lt;/code&gt; attribute, if there is such an element and
+  its &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu
+  state&quot;&gt;popup menu&lt;/a&gt; state; otherwise, the element has no &lt;a href=#designated-pop-up-menu&gt;designated pop-up
+  menu&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-button-value title=dom-button-value&gt;&lt;code&gt;value&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-button-menu title=dom-button-menu&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the
+  content attributes of the same name.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-button-type title=dom-button-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
   same name, &lt;a href=#limited-to-only-known-values&gt;limited to only known values&lt;/a&gt;.&lt;/p&gt;
@@ -57965,527 +57978,481 @@
 
 
 
+  &lt;h4 id=the-menu-element&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;dfn id=menus&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
-  &lt;h4 id=the-command-element&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;dfn id=the-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
-
   &lt;dl class=element&gt;&lt;dt&gt;&lt;a href=#element-dfn-categories title=element-dfn-categories&gt;Categories&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;&lt;a href=#metadata-content&gt;Metadata content&lt;/a&gt;.&lt;/dd&gt;
    &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
-   &lt;dd&gt;&lt;a href=#phrasing-content&gt;Phrasing content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state: &lt;a href=#palpable-content&gt;Palpable content&lt;/a&gt;.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-contexts title=element-dfn-contexts&gt;Contexts in which this element can be used&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Where &lt;a href=#metadata-content&gt;metadata content&lt;/a&gt; is expected.&lt;/dd&gt;
-   &lt;dd&gt;Where &lt;a href=#phrasing-content&gt;phrasing content&lt;/a&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;Where &lt;a href=#flow-content&gt;flow content&lt;/a&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state: as the child of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-content-model title=element-dfn-content-model&gt;Content model&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Empty.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state: either zero or more &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements, or &lt;a href=#flow-content&gt;flow content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state: in any order, zero or more &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements, zero or more &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt; elements, and zero or more &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attributes are in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;!--&lt;dd&gt;&lt;code title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt;&lt;/dd&gt;--&gt;
-   &lt;dd&gt;&lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;Also, the &lt;code title=attr-command-title&gt;&lt;a href=#attr-command-title&gt;title&lt;/a&gt;&lt;/code&gt; attribute has special semantics on this element.&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-&lt;pre class=idl&gt;interface &lt;dfn id=htmlcommandelement&gt;HTMLCommandElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
-           attribute DOMString &lt;a href=#dom-command-type title=dom-command-type&gt;type&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-command-label title=dom-command-label&gt;label&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-command-icon title=dom-command-icon&gt;icon&lt;/a&gt;;
-           attribute boolean &lt;a href=#dom-command-disabled title=dom-command-disabled&gt;disabled&lt;/a&gt;;
-           attribute boolean &lt;a href=#dom-command-checked title=dom-command-checked&gt;checked&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-command-radiogroup title=dom-command-radiogroup&gt;radiogroup&lt;/a&gt;;&lt;!--
-           attribute boolean &lt;span title=&quot;dom-command-default&quot;&gt;default&lt;/span&gt;;--&gt;
-  readonly attribute &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;? &lt;a href=#dom-command-command title=dom-command-command&gt;command&lt;/a&gt;;
+&lt;pre class=idl&gt;interface &lt;dfn id=htmlmenuelement&gt;HTMLMenuElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
+           attribute DOMString &lt;a href=#dom-menu-type title=dom-menu-type&gt;type&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-menu-label title=dom-menu-label&gt;label&lt;/a&gt;;
 };&lt;/pre&gt;
-   &lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element represents a command that the user
-  can invoke.&lt;/p&gt;
+  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element represents a list of commands.&lt;/p&gt;
 
-  &lt;p&gt;A command can be explicitly part of a context menu or toolbar,
-  using the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element. It can also be put anywhere
-  else on a page, either just to define a keyboard shortcut, or to
-  define a command that is then referenced from other
-  &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+  &lt;!-- v2 idea: &lt;menu&gt; should get an icon, like &lt;command&gt; --&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element that uses the
-  &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;,
-  &lt;!--&lt;code title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt;,--&gt; and
-  &lt;code title=attr-title&gt;&lt;a href=#attr-title&gt;title&lt;/a&gt;&lt;/code&gt; attributes defines a new
-  command. A &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element that uses the &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; &lt;em&gt;attribute&lt;/em&gt;
-  defines a command by reference to another one. This allows authors
-  to define a command once, and set its state (e.g. whether it is
-  active or disabled) in one place, and have all references to that
-  command in the user interface change at the same time.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menu-type title=attr-menu-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute is an &lt;a href=#enumerated-attribute&gt;enumerated
+  attribute&lt;/a&gt; indicating the kind of menu being declared. The attribute has two states. The
+  &lt;code title=attr-menu-type-popup&gt;popup&lt;/code&gt; keyword maps to the &lt;dfn id=popup-menu-state title=&quot;popup menu
+  state&quot;&gt;popup menu&lt;/dfn&gt; state, in which the element is declaring a context menu or the menu for a
+  &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;menu button&lt;/a&gt;. The &lt;code title=attr-menu-type-toolbar&gt;toolbar&lt;/code&gt; keyword maps to the &lt;dfn id=toolbar-state title=&quot;toolbar
+  state&quot;&gt;toolbar&lt;/dfn&gt; state, in which the element is declaring a toolbar. The attribute may also be
+  omitted. The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt;
+  state if the parent element is a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/a&gt; state; otherwise, it is the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=attr-command-type title=attr-command-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
-  attribute indicates the kind of command: either a normal command
-  with an associated action, or a state or option that can be toggled,
-  or a selection of one item from a list of items.&lt;/p&gt;
+  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the
+  &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state, then the element &lt;a href=#represents&gt;represents&lt;/a&gt;
+  the commands of a popup menu, and the user can only examine and interact with the commands if that
+  popup menu is activated through some other element, either via the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute or the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-button-menu&gt;&lt;a href=#attr-button-menu&gt;menu&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
-  &lt;p&gt;The attribute is an &lt;a href=#enumerated-attribute&gt;enumerated attribute&lt;/a&gt; with three
-  keywords and states. The &quot;&lt;dfn id=attr-command-type-keyword-command title=attr-command-type-keyword-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;a href=#attr-command-type-state-command title=attr-command-type-state-command&gt;Command&lt;/a&gt; state, the
-  &quot;&lt;dfn id=attr-command-type-keyword-checkbox title=attr-command-type-keyword-checkbox&gt;&lt;code&gt;checkbox&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;a href=#attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/a&gt; state, and
-  the &quot;&lt;dfn id=attr-command-type-keyword-radio title=attr-command-type-keyword-radio&gt;&lt;code&gt;radio&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt; state. The
-  &lt;i&gt;missing value default&lt;/i&gt; is the &lt;a href=#attr-command-type-state-command title=attr-command-type-state-command&gt;Command&lt;/a&gt; state.&lt;/p&gt;
+  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the
+  &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, then the element &lt;a href=#represents&gt;represents&lt;/a&gt; a
+  toolbar consisting of its contents, in the form of either an unordered list of items (represented
+  by &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements), each of which represents a command that the user can perform or
+  activate, or, if the element has no &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element children, &lt;a href=#flow-content&gt;flow content&lt;/a&gt;
+  describing available commands.&lt;/p&gt;
 
-  &lt;dl&gt;&lt;dt&gt;The &lt;dfn id=attr-command-type-state-command title=attr-command-type-state-command&gt;Command&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menu-label title=attr-menu-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; attribute gives the label of the
+  menu. It is used by user agents to display nested menus in the UI: a context menu containing
+  another menu would use the nested menu's &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute for
+  the submenu's menu label. The &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute must only be
+  specified on &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements whose parent element is a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose
+  &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/a&gt; state.&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a normal command with an associated action.&lt;/dd&gt;
+  &lt;div class=impl&gt;
 
-   &lt;dt&gt;The &lt;dfn id=attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;hr&gt;&lt;p&gt;A &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; is a &lt;dfn id=currently-relevant-menu-element&gt;currently relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/dfn&gt; if it is the
+  child of a &lt;a href=#currently-relevant-menu-element&gt;currently relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;, or if it is the
+  &lt;a href=#designated-pop-up-menu&gt;designated pop-up menu&lt;/a&gt; of a &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element that is not
+  &lt;a href=#inert&gt;inert&lt;/a&gt;, does not have a &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; attribute, and is not
+  the descendant of an element with a &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a state or option that can be toggled.&lt;/dd&gt;
+  &lt;hr&gt;&lt;p&gt;A pop-up menu consists of a list of zero or more menu items, which can be any of:&lt;/p&gt;
 
-   &lt;dt&gt;The &lt;dfn id=attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;&lt;a href=#concept-command title=concept-command&gt;Commands&lt;/a&gt;, which can be marked as default commands (&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
+   &lt;li&gt;Separators (&lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
+   &lt;li&gt;Other menus, which allows the list to be nested (&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
+  &lt;/ul&gt;&lt;p&gt;To &lt;dfn id=construct-and-show-a-menu&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, the user
+  agent must run the following steps:&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a selection of one item from a list of items.&lt;/dd&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the menu be an empty list of the type described above.&lt;/li&gt;
 
-  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=attr-command-label title=attr-command-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the name of the command, as shown to the user. The
-  &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute must be
-  specified and must have a value that is not the empty string.&lt;/p&gt;
+   &lt;li&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-title title=attr-command-title&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives a hint describing the command, which might be shown
-  to the user to help him.&lt;/p&gt;
+    &lt;p&gt;Run the &lt;a href=#menu-builder&gt;menu builder&lt;/a&gt; steps for the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element using the menu
+    prepared in the previous list as the output.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-icon title=attr-command-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives a picture that represents the command. If the
-  attribute is specified, the attribute's value must contain a
-  &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL potentially surrounded by
-  spaces&lt;/a&gt;. &lt;span class=impl&gt;To obtain the &lt;a href=#absolute-url&gt;absolute
-  URL&lt;/a&gt; of the icon when the attribute's value is not the empty
-  string, the attribute's value must be &lt;a href=#resolve-a-url title=&quot;resolve a
-  url&quot;&gt;resolved&lt;/a&gt; relative to the element. When the attribute is
-  absent, or its value is the empty string, or &lt;a href=#resolve-a-url title=&quot;resolve a
-  url&quot;&gt;resolving&lt;/a&gt; its value fails, there is no icon.&lt;/span&gt;&lt;/p&gt;
-  &lt;!-- this is affected by the base URL being changed, so users of
-  this should cache the image once they've fetched it once, at least
-  until the relative url changes again --&gt;
+    &lt;p&gt;The &lt;dfn id=menu-builder&gt;menu builder&lt;/dfn&gt; steps for a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element using a specific menu as
+    output are as follows: For each child node of the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;,
+    run the appropriate steps from the following list:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-disabled title=attr-command-disabled&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt; attribute
-  is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt; that, if present, indicates that
-  the command is not available in the current state.&lt;/p&gt;
+    &lt;dl class=switch&gt;&lt;dt&gt;If the child is a &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;&lt;/dt&gt;
 
-  &lt;p class=note&gt;The distinction between &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; and &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; is subtle. A command would be
-  disabled if, in the same context, it could be enabled if only
-  certain aspects of the situation were changed. A command would be
-  marked as hidden if, in that situation, the command will never be
-  enabled. For example, in the context menu for a water faucet, the
-  command &quot;open&quot; might be disabled if the faucet is already open, but
-  the command &quot;eat&quot; would be marked hidden since the faucet could
-  never be eaten.&lt;/p&gt;
+     &lt;dd&gt;Append the command to the menu, respecting its &lt;a href=#concept-facet title=concept-facet&gt;facets&lt;/a&gt;&lt;!--
+     we might need to be explicit about what this means for each facet, if testing shows this isn't
+     well-implemented. e.g.: If there's an Icon facet for the command, it should be &lt;span
+     title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;&lt;!- -FETCH- -&gt; (this would be http-origin privacy-sensitive), and
+     then that image should be associated with the command, such that each command only has its image
+     fetched once, to prevent changes to the base URL from having effects after the image has been
+     fetched once. (no need to resolve the Icon facet, it's an absolute URL) --&gt;. If the
+     &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element has a &lt;code title=attr-menuitem-default&gt;&lt;a href=#attr-menuitem-default&gt;default&lt;/a&gt;&lt;/code&gt; attribute,
+     mark the command as being a default command.&lt;/dd&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-checked title=attr-command-checked&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;
-  attribute is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt; that, if present,
-  indicates that the command is selected. The attribute must be
-  omitted unless the &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;
-  attribute is in either the &lt;a href=#attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/a&gt; state or
-  the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt;
-  state.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-command-radiogroup title=attr-command-radiogroup&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the name of the group of commands that will be
-  toggled when the command itself is toggled, for commands whose &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute has the value &quot;&lt;code title=&quot;&quot;&gt;radio&lt;/code&gt;&quot;. The scope of the name is the child list of
-  the parent element. The attribute must be omitted unless the &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt; state.&lt;/p&gt;
+     &lt;dt&gt;If the child is an &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
 
-&lt;!--
-  &lt;p&gt;If the &lt;code&gt;command&lt;/code&gt; element is used when &lt;span
-  title=&quot;menu generation&quot;&gt;generating&lt;/span&gt; a &lt;span&gt;context
-  menu&lt;/span&gt;, then the &lt;dfn
-  title=&quot;attr-command-default&quot;&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt; attribute
-  indicates, if present, that the command is the one that would have
-  been invoked if the user had directly activated the menu's subject
-  instead of using its context menu. The &lt;code
-  title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute is a
-  &lt;span&gt;boolean attribute&lt;/span&gt;. The attribute must be omitted unless
-  the &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is in the
-  &lt;span title=&quot;attr-command-type-state-command&quot;&gt;Command&lt;/span&gt;
-  state.&lt;/p&gt;
+     &lt;dd&gt;Append a separator to the menu.&lt;/dd&gt;
 
-  &lt;div class=&quot;example&quot;&gt;
 
-   ...an example that shows an element that, if double-clicked,
-   invokes an action, but that also has a context menu, showing the
-   various &lt;code&gt;command&lt;/code&gt; attributes off, and that has a default
-   command...
+     &lt;dt&gt;If the child is a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with no &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
 
-  &lt;/div&gt;
---&gt;
+     &lt;dd&gt;Append a separator to the menu, then run the &lt;a href=#menu-builder&gt;menu builder&lt;/a&gt; steps using this
+     child &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element for the same menu, then append another separator to the
+     menu.&lt;/dd&gt;
 
-  &lt;hr&gt;&lt;p&gt;If a &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; has a
-  &lt;dfn id=attr-command-command title=attr-command-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
-  attribute, and &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;, and there is an element in that
-  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; has a
-  value equal to the value of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt;'s &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute, and the first
-  such element in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, hereafter &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;, itself &lt;a href=#concept-command title=concept-command&gt;defines
-  a command&lt;/a&gt; and either is not a &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element or
-  does not itself have a &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute, then the
-  &lt;dfn id=master-command&gt;master command&lt;/dfn&gt; of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;.&lt;/p&gt;
 
-  &lt;p&gt;An element with a
-  &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt;
-  attribute must have a &lt;a href=#master-command&gt;master command&lt;/a&gt; and must not have any
-  &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;, or
-  &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;
-  attributes.&lt;/p&gt;
+     &lt;dt&gt;If the child is a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
 
-  &lt;hr&gt;&lt;div class=impl&gt;
+     &lt;dd&gt;Create a new submenu as an empty list of the type described above, and construct it by
+     running the &lt;a href=#menu-builder&gt;menu builder&lt;/a&gt; steps for the child &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element using the
+     new submenu as the output. Then, append the submenu to the menu, using the value of the child
+     &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute as the label
+     of the submenu.&lt;/dd&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-command-type title=dom-command-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
-  same name, &lt;a href=#limited-to-only-known-values&gt;limited to only known values&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-command-label title=dom-command-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-command-icon title=dom-command-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-command-disabled title=dom-command-disabled&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-command-checked title=dom-command-checked&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-command-radiogroup title=dom-command-radiogroup&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;&lt;!--,
-  and &lt;dfn title=&quot;dom-command-default&quot;&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt;--&gt;
-  IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content
-  attributes of the same name.&lt;/p&gt;
+     &lt;dt&gt;Any other node&lt;/dt&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-command-command title=dom-command-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute must return the &lt;a href=#master-command&gt;master command&lt;/a&gt;, if any,
-  or null otherwise.&lt;/p&gt;
+     &lt;dd&gt;&lt;a href=#ignore&gt;Ignore&lt;/a&gt; the node.&lt;/dd&gt;
 
-  &lt;hr&gt;&lt;p&gt;If the element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; is false
-  (enabled) then the element's &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt;
-  depends on the element's &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;
-  and &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attributes, as
-  follows:&lt;/p&gt;
+    &lt;/dl&gt;&lt;/li&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;If the element has a &lt;a href=#master-command&gt;master command&lt;/a&gt; set by its
-   &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Remove any submenu with no label, or whose label is the empty string, in the menu or any submenus.&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent must &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation
-   steps&lt;/a&gt; on the element's &lt;a href=#master-command&gt;master command&lt;/a&gt;.&lt;/dd&gt;
-   &lt;!-- we know it has a defined &lt;span&gt;activation behavior&lt;/span&gt; if
-   we get here --&gt;
+   &lt;li&gt;&lt;p&gt;Remove any menu item with no label, or whose label is the empty string, in the menu or any submenus.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Collapse all sequences of two or more adjacent separators in the menu or any submenus to a single separator.&lt;/li&gt;
 
-   &lt;dt&gt;If the &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
-   in the &lt;a href=#attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/a&gt; state&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Remove all separators at the start or end of the menu and any submenus.&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;If the element has a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, the UA must
-   remove that attribute. Otherwise, the UA must add a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, with the
-   literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/dd&gt;
+   &lt;li&gt;
 
+    &lt;p&gt;Display the menu to the user, and let the algorithm that invoked this one continue.&lt;/p&gt;
 
-   &lt;dt&gt;If the &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
-   in the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt; state&lt;/dt&gt;
+    &lt;p&gt;If the user selects a menu item that corresponds to an element that still represents a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt; when the user selects it, then the UA must invoke that
+    command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;If the element has a parent, then the UA must walk the list
-   of child nodes of that parent element, and for each node that is a
-   &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element, if that element has a &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt; attribute whose
-   value exactly matches the current element's (treating missing &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt; attributes as if
-   they were the empty string), and has a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, must remove
-   that attribute.&lt;/p&gt;
+    &lt;p&gt;Pop-up menus must not, while being shown, reflect changes in the DOM. The menu is constructed
+    from the DOM before being shown, and is then immutable.&lt;/p&gt;
 
-   &lt;p&gt;Then, the element's &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute attribute
-   must be set to the literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/dd&gt;
+   &lt;/li&gt;
 
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-menu-type title=dom-menu-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-menu-label title=dom-menu-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the
+  respective content attributes of the same name.&lt;/p&gt;
 
-   &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;The element's &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; is to do
-   nothing.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p class=note&gt;Firing a synthetic &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event at the element does not cause
-  any of the actions described above to happen.&lt;/p&gt;
-
-  &lt;!-- v2COMMAND: Expose the Triggers facet again. --&gt;
-
-  &lt;p&gt;If the element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; is true
-  (disabled) then the element has no &lt;a href=#activation-behavior&gt;activation
-  behavior&lt;/a&gt;.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;p class=note&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements are not rendered
-  unless they &lt;a href=#the-menu-element title=menu&gt;form part of a menu&lt;/a&gt;.&lt;/p&gt;
-
   &lt;div class=example&gt;
 
-   &lt;p&gt;Here is an example of a toolbar with three buttons that let the
-   user toggle between left, center, and right alignment. One could
-   imagine such a toolbar as part of a text editor. The toolbar also
-   has a separator followed by another button labeled &quot;Publish&quot;,
-   though that button is disabled.&lt;/p&gt;
+   &lt;p&gt;In this example, the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element is used to describe a toolbar with three menu
+   buttons on it, each of which has a dropdown menu with a series of options:&lt;/p&gt;
 
-   &lt;pre&gt;&lt;menu type=&quot;toolbar&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot; checked=&quot;checked&quot;
-          label=&quot;Left&quot; icon=&quot;icons/alL.png&quot; onclick=&quot;setAlign('left')&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
-          label=&quot;Center&quot; icon=&quot;icons/alC.png&quot; onclick=&quot;setAlign('center')&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
-          label=&quot;Right&quot; icon=&quot;icons/alR.png&quot; onclick=&quot;setAlign('right')&quot;&gt;
- &lt;hr&gt;
- &lt;command type=&quot;command&quot; disabled
-          label=&quot;Publish&quot; icon=&quot;icons/pub.png&quot; onclick=&quot;publish()&quot;&gt;
+  &lt;pre&gt;&lt;menu&gt; &lt;!-- type=&quot;toolbar&quot; implied --&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;File&quot; menu=&quot;filemenu&quot;&gt;
+  &lt;menu id=&quot;filemenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;fnew()&quot; label=&quot;New...&quot;&gt;
+   &lt;menuitem onclick=&quot;fopen()&quot; label=&quot;Open...&quot;&gt;
+   &lt;menuitem onclick=&quot;fsave()&quot; label=&quot;Save&quot;&gt;
+   &lt;menuitem onclick=&quot;fsaveas()&quot; label=&quot;Save as...&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;Edit&quot; menu=&quot;editmenu&quot;&gt;
+  &lt;menu id=&quot;editmenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;ecopy()&quot; label=&quot;Copy&quot;&gt;
+   &lt;menuitem onclick=&quot;ecut()&quot; label=&quot;Cut&quot;&gt;
+   &lt;menuitem onclick=&quot;epaste()&quot; label=&quot;Paste&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;Help&quot; menu=&quot;helpmenu&quot;&gt;
+  &lt;menu id=&quot;helpmenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;location='help.html'&quot; label=&quot;Help&quot;&gt;
+   &lt;menuitem onclick=&quot;location='about.html'&quot; label=&quot;About&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
 &lt;/menu&gt;&lt;/pre&gt;
 
+   &lt;p&gt;In a supporting user agent, this might look like this (assuming the user has just activated the
+   second button):&lt;/p&gt;
+
+   &lt;p&gt;&lt;img alt=&quot;A toolbar with three buttons, labeled 'File', 'Edit', and 'Help'; where if you select the 'Edit' button you get a drop-down menu with three more options, 'Copy', 'Cut', and 'Paste'.&quot; height=101 src=<A HREF="http://images.whatwg.org/sample-toolbar-1.png">http://images.whatwg.org/sample-toolbar-1.png</A> width=303&gt;&lt;/p&gt;
+
   &lt;/div&gt;
 
 
 
-  &lt;h4 id=the-menu-element&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;dfn id=menus&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-menuitem-element&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;menuitem&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;&lt;dt&gt;&lt;a href=#element-dfn-categories title=element-dfn-categories&gt;Categories&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
-   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state: &lt;a href=#interactive-content&gt;Interactive content&lt;/a&gt;.&lt;/dd&gt;
-   &lt;dd&gt;If the element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state or the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state: &lt;a href=#palpable-content&gt;Palpable content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;None.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-contexts title=element-dfn-contexts&gt;Contexts in which this element can be used&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Where &lt;a href=#flow-content&gt;flow content&lt;/a&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;As a child of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-content-model title=element-dfn-content-model&gt;Content model&lt;/a&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Either: Zero or more &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements.&lt;/dd&gt;
-   &lt;dd&gt;Or: &lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Empty.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-default&gt;&lt;a href=#attr-menuitem-default&gt;default&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;Also, the &lt;code title=attr-menuitem-title&gt;&lt;a href=#attr-menuitem-title&gt;title&lt;/a&gt;&lt;/code&gt; attribute has special semantics on this element.&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-&lt;pre class=idl&gt;interface &lt;dfn id=htmlmenuelement&gt;HTMLMenuElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
-           attribute DOMString &lt;a href=#dom-menu-type title=dom-menu-type&gt;type&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-menu-label title=dom-menu-label&gt;label&lt;/a&gt;;
+&lt;pre class=idl&gt;interface &lt;dfn id=htmlmenuitemelement&gt;HTMLMenuItemElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
+           attribute DOMString &lt;a href=#dom-menuitem-type title=dom-menuitem-type&gt;type&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-menuitem-label title=dom-menuitem-label&gt;label&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-menuitem-icon title=dom-menuitem-icon&gt;icon&lt;/a&gt;;
+           attribute boolean &lt;a href=#dom-menuitem-disabled title=dom-menuitem-disabled&gt;disabled&lt;/a&gt;;
+           attribute boolean &lt;a href=#dom-menuitem-checked title=dom-menuitem-checked&gt;checked&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-menuitem-radiogroup title=dom-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;;
+           attribute boolean &lt;a href=#dom-menuitem-default title=dom-menuitem-default&gt;default&lt;/a&gt;;
+  readonly attribute &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;? &lt;a href=#dom-menuitem-command title=dom-menuitem-command&gt;command&lt;/a&gt;;
 };&lt;/pre&gt;
-  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element represents a list of commands.&lt;/p&gt;
+   &lt;/dd&gt;
+  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element represents a command that the user can invoke from a popup
+  menu (either a &lt;a href=#attr-contextmenu title=attr-contextmenu&gt;context menu&lt;/a&gt; or the menu of a &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;menu button&lt;/a&gt;).&lt;/p&gt;
 
-  &lt;!-- v2 idea: &lt;menu&gt; should get an icon, like &lt;command&gt; --&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element that uses one or more of the
+   &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;, and
+   &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;
+  attributes defines a new command.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-menu-type title=attr-menu-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute
-  is an &lt;a href=#enumerated-attribute&gt;enumerated attribute&lt;/a&gt; indicating the kind of menu
-  being declared. The attribute has three states. The &lt;code title=attr-menu-type-context&gt;context&lt;/code&gt; keyword maps to the
-  &lt;dfn id=context-menu-state title=&quot;context menu state&quot;&gt;context menu&lt;/dfn&gt; state, in which
-  the element is declaring a context menu. The &lt;code title=attr-menu-type-toolbar&gt;toolbar&lt;/code&gt; keyword maps to the
-  &lt;dfn id=toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/dfn&gt; state, in which the
-  element is declaring a toolbar. The attribute may also be
-  omitted. The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;dfn id=list-state title=&quot;list
-  state&quot;&gt;list&lt;/dfn&gt; state, which indicates that the element is merely
-  a list of commands that is neither declaring a context menu nor
-  defining a toolbar.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element that uses the &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute defines a command by reference to another
+  one. This allows authors to define a command once, and set its state (e.g. whether it is active or
+  disabled) in one place, and have all references to that command in the user interface change at
+  the same time.&lt;/p&gt;
 
-  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#context-menu-state title=&quot;context menu state&quot;&gt;context menu&lt;/a&gt; state, then the
-  element &lt;a href=#represents&gt;represents&lt;/a&gt; the commands of a context menu, and
-  the user can only interact with the commands if that context menu is
-  activated.&lt;/p&gt;
+  &lt;p&gt;If the &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute is specified, the element
+  is in the &lt;dfn id=indirect-command&gt;indirect command&lt;/dfn&gt; mode. If it is not specified, it is in the &lt;dfn id=explicit-command&gt;explicit
+  command&lt;/dfn&gt; mode. When the element is in the &lt;a href=#indirect-command&gt;indirect command&lt;/a&gt; mode, the element
+  must not have any of the following attributes specified:
+   &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;.
+  &lt;/p&gt;
 
-  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, then the element
-  &lt;a href=#represents&gt;represents&lt;/a&gt; a list of active commands that the user can
-  immediately interact with.&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=attr-menuitem-type title=attr-menuitem-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute indicates the kind of
+  command: either a normal command with an associated action, or a state or option that can be
+  toggled, or a selection of one item from a list of items.&lt;/p&gt;
 
-  &lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state, then the element either
-  &lt;a href=#represents&gt;represents&lt;/a&gt; an unordered list of items (each represented
-  by an &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element), each of which represents a command
-  that the user can perform or activate, or, if the element has no
-  &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element children, &lt;a href=#flow-content&gt;flow content&lt;/a&gt;
-  describing available commands.&lt;/p&gt;
+  &lt;p&gt;The attribute is an &lt;a href=#enumerated-attribute&gt;enumerated attribute&lt;/a&gt; with three keywords and states. The &quot;&lt;dfn id=attr-menuitem-type-keyword-command title=attr-menuitem-type-keyword-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;a href=#attr-menuitem-type-state-command title=attr-menuitem-type-state-command&gt;Command&lt;/a&gt; state, the &quot;&lt;dfn id=attr-menuitem-type-keyword-checkbox title=attr-menuitem-type-keyword-checkbox&gt;&lt;code&gt;checkbox&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;a href=#attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/a&gt; state, and the &quot;&lt;dfn id=attr-menuitem-type-keyword-radio title=attr-menuitem-type-keyword-radio&gt;&lt;code&gt;radio&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state. The &lt;i&gt;missing value default&lt;/i&gt; is the
+  &lt;a href=#attr-menuitem-type-state-command title=attr-menuitem-type-state-command&gt;Command&lt;/a&gt; state.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-menu-label title=attr-menu-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the label of the menu. It is used by user agents to
-  display nested menus in the UI. For example, a context menu
-  containing another menu would use the nested menu's &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute for the submenu's
-  menu label.&lt;/p&gt;
+  &lt;dl&gt;&lt;dt&gt;The &lt;dfn id=attr-menuitem-type-state-command title=attr-menuitem-type-state-command&gt;Command&lt;/dfn&gt; state&lt;/dt&gt;
 
-  &lt;div class=impl&gt;
+   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a normal command with an associated action.&lt;/dd&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-menu-type title=dom-menu-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-menu-label title=dom-menu-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; IDL attributes must
-  &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content attributes of the same
-  name.&lt;/p&gt;
+   &lt;dt&gt;The &lt;dfn id=attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/dfn&gt; state&lt;/dt&gt;
 
-  &lt;/div&gt;
+   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a state or option that can be toggled.&lt;/dd&gt;
 
+   &lt;dt&gt;The &lt;dfn id=attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/dfn&gt; state&lt;/dt&gt;
 
+   &lt;dd&gt;&lt;p&gt;The element &lt;a href=#represents&gt;represents&lt;/a&gt; a selection of one item from a list of items.&lt;/dd&gt;
 
-  &lt;h5 id=menus-intro&gt;&lt;span class=secno&gt;4.11.4.1 &lt;/span&gt;Introduction&lt;/h5&gt;
+  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=attr-menuitem-label title=attr-menuitem-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; attribute gives the name of the
+  command, as shown to the user. The &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute must
+  be specified if the element is in the &lt;a href=#explicit-command&gt;explicit command&lt;/a&gt; mode. If the attribute is
+  specified, it must have a value that is not the empty string.&lt;/p&gt;
 
-  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-icon title=attr-menuitem-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt; attribute gives a picture that
+  represents the command. If the attribute is specified, the attribute's value must contain a
+  &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL potentially surrounded by spaces&lt;/a&gt;. &lt;span class=impl&gt;To obtain
+  the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the icon when the attribute's value is not the empty string, the
+  attribute's value must be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt; relative to the element.
+  When the attribute is absent, or its value is the empty string, or &lt;a href=#resolve-a-url title=&quot;resolve a
+  url&quot;&gt;resolving&lt;/a&gt; its value fails, there is no icon.&lt;/span&gt;&lt;/p&gt; &lt;!-- this is affected by the
+  base URL being changed, so users of this should cache the image once they've fetched it once, at
+  least until the relative url changes again --&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element is used to define context menus and
-  toolbars.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-disabled title=attr-menuitem-disabled&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt; attribute is a
+  &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt; that, if present, indicates that the command is not available in
+  the current state.&lt;/p&gt;
 
-  &lt;p&gt;For example, the following represents a toolbar with three menu
-  buttons on it, each of which has a dropdown menu with a series of
-  options:&lt;/p&gt;
+  &lt;p class=note&gt;The distinction between &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; and
+  &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; is subtle. A command would be disabled if, in the same
+  context, it could be enabled if only certain aspects of the situation were changed. A command
+  would be marked as hidden if, in that situation, the command will never be enabled. For example,
+  in the context menu for a water faucet, the command &quot;open&quot; might be disabled if the faucet is
+  already open, but the command &quot;eat&quot; would be marked hidden since the faucet could never be
+  eaten.&lt;/p&gt;
 
-  &lt;pre&gt;&lt;menu type=&quot;toolbar&quot;&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;File&quot;&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fnew()&quot;&gt;New...&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fopen()&quot;&gt;Open...&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fsave()&quot;&gt;Save&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fsaveas()&quot;&gt;Save as...&lt;/button&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;Edit&quot;&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;ecopy()&quot;&gt;Copy&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;ecut()&quot;&gt;Cut&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;epaste()&quot;&gt;Paste&lt;/button&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;Help&quot;&gt;
-   &lt;li&gt;&lt;a href=&quot;help.html&quot;&gt;Help&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=&quot;about.html&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
-&lt;/menu&gt;&lt;/pre&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-checked title=attr-menuitem-checked&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;a href=#boolean-attribute&gt;boolean
+  attribute&lt;/a&gt; that, if present, indicates that the command is selected. The attribute must be
+  omitted unless the &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in either the &lt;a href=#attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/a&gt; state or the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state.&lt;/p&gt;
 
-  &lt;p&gt;In a supporting user agent, this might look like this:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-radiogroup title=attr-menuitem-radiogroup&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt; attribute gives the
+  name of the group of commands that will be toggled when the command itself is toggled, for
+  commands whose &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute has the value &quot;&lt;code title=&quot;&quot;&gt;radio&lt;/code&gt;&quot;. The scope of the name is the child list of the parent element. The
+  attribute must be omitted unless the &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in
+  the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state.&lt;/p&gt;
 
-  &lt;p&gt;&lt;img alt=&quot;A toolbar with three buttons, labeled 'File', 'Edit', and 'Help'; where if you select the 'Edit' button you get a drop-down menu with three more options, 'Copy', 'Cut', and 'Paste'.&quot; height=101 src=<A HREF="http://images.whatwg.org/sample-toolbar-1.png">http://images.whatwg.org/sample-toolbar-1.png</A> width=303&gt;&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;If a &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; has a &lt;dfn id=attr-menuitem-command title=attr-menuitem-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; attribute, and &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt;
+  is &lt;a href=#in-a-document&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;, and there is an element in that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
+  whose &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; has a value equal to the value of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt;'s &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute, and the first
+  such element in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, hereafter &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;, itself &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt; and either is not a &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element
+  or does not itself have a &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute, then the
+  &lt;dfn id=master-command&gt;master command&lt;/dfn&gt; of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;.&lt;/p&gt;
 
-  &lt;p&gt;In a legacy user agent, the above would look like a bulleted list
-  with three items, the first of which has four buttons, the second of
-  which has three, and the third of which has two nested bullet points
-  with two items consisting of links.&lt;/p&gt;
+  &lt;p&gt;An element with a &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute must have a
+  &lt;a href=#master-command&gt;master command&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;The following implements a similar toolbar, with a single button
-  whose values, when selected, redirect the user to Web sites.&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=attr-menuitem-title title=attr-menuitem-title&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute gives a hint describing
+  the command, which might be shown to the user to help him.&lt;/p&gt;
 
-  &lt;pre&gt;&lt;form action=&quot;redirect.cgi&quot;&gt;
- &lt;menu type=&quot;toolbar&quot;&gt;
-  &lt;label for=&quot;goto&quot;&gt;Go to...&lt;/label&gt;
-  &lt;menu label=&quot;Go&quot;&gt;
-   &lt;select id=&quot;goto&quot;&lt;!--
-           onchange=&quot;if (this.options[this.selectedIndex].value)
-                     window.location = this.options[this.selectedIndex].value&quot;--&gt;&gt;
-    &lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt; Select site: &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.apple.com/">http://www.apple.com/</A>&quot;&gt; Apple &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.mozilla.org/">http://www.mozilla.org/</A>&quot;&gt; Mozilla &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.opera.com/">http://www.opera.com/</A>&quot;&gt; Opera &lt;/option&gt;
-   &lt;/select&gt;
-   &lt;span&gt;&lt;input type=&quot;submit&quot; value=&quot;Go&quot;&gt;&lt;/span&gt;
-  &lt;/menu&gt;
+  &lt;p&gt;The &lt;dfn id=attr-menuitem-default title=attr-menuitem-default&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt; attribute indicates, if
+  present, that the command is the one that would have been invoked if the user had directly
+  activated the menu's subject instead of using the menu. The &lt;code title=attr-menuitem-default&gt;&lt;a href=#attr-menuitem-default&gt;default&lt;/a&gt;&lt;/code&gt; attribute is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;In this trivial example, a submit button is given a context menu that has two options, one to
+   reset the form, and one to submit the form. The submit command is marked as being the default.&lt;/p&gt;
+
+   &lt;pre&gt;&lt;form action=&quot;dosearch.pl&quot;&gt;
+ &lt;p&gt;&lt;label&gt;Enter search terms: &lt;input type=&quot;text&quot; name=&quot;terms&quot;&gt;&lt;/label&gt;&lt;/p&gt;
+ &lt;p&gt;&lt;input type=submit contextmenu=formmenu id=&quot;submitbutton&quot;&gt;&lt;/p&gt;
+ &lt;p hidden&gt;&lt;input type=reset id=&quot;resetbutton&quot;&gt;&lt;/p&gt;
+ &lt;menu type=popup id=formmenu&gt;
+  &lt;menuitem command=&quot;submitbutton&quot; default&gt;
+  &lt;menuitem command=&quot;resetbutton&quot;&gt;
  &lt;/menu&gt;
 &lt;/form&gt;&lt;/pre&gt;
 
-  &lt;p&gt;The behavior in supporting user agents is similar to the example
-  above, but here the legacy behavior consists of a single
-  &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element with a submit button. The submit button
-  doesn't appear in the toolbar, because it is not a child of the
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element or of its &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; children.&lt;/p&gt;
+  &lt;/div&gt;
 
+  &lt;div class=impl&gt;
 
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-menuitem-type title=dom-menuitem-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
+  same name, &lt;a href=#limited-to-only-known-values&gt;limited to only known values&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;div class=impl&gt;
+  &lt;p&gt;The &lt;dfn id=dom-menuitem-label title=dom-menuitem-label&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-menuitem-icon title=dom-menuitem-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-menuitem-disabled title=dom-menuitem-disabled&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-menuitem-checked title=dom-menuitem-checked&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-menuitem-radiogroup title=dom-menuitem-radiogroup&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;,
+  and &lt;dfn id=dom-menuitem-default title=dom-menuitem-default&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt;
+  IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content
+  attributes of the same name.&lt;/p&gt;
 
-  &lt;h5 id=building-menus-and-toolbars&gt;&lt;span class=secno&gt;4.11.4.2 &lt;/span&gt;&lt;dfn&gt;Building menus and toolbars&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;p&gt;The &lt;dfn id=dom-menuitem-command title=dom-menuitem-command&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
+  IDL attribute must return the &lt;a href=#master-command&gt;master command&lt;/a&gt;, if any,
+  or null otherwise.&lt;/p&gt;
 
-  &lt;p&gt;A menu (or toolbar) consists of a list of zero or more of the
-  following components:&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;If the element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; is false
+  (enabled) then the element's &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt;
+  depends on the element's &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;
+  and &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attributes, as
+  follows:&lt;/p&gt;
 
-  &lt;ul class=brief&gt;&lt;li&gt;&lt;a href=#concept-command title=concept-command&gt;Commands&lt;/a&gt;, which can be marked as default commands&lt;/li&gt;
-   &lt;li&gt;Separators&lt;/li&gt;
-   &lt;li&gt;Other menus (which allows the list to be nested)&lt;/li&gt;
-  &lt;/ul&gt;&lt;p&gt;The list corresponding to a particular &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element
-  is built by iterating over its child nodes. For each child node in
-  &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, the required behavior depends on what the
-  node is, as follows:&lt;/p&gt;
+  &lt;dl class=switch&gt;&lt;dt&gt;If the element has a &lt;a href=#master-command&gt;master command&lt;/a&gt; set by its
+   &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;An element that &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;The user agent must &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation
+   steps&lt;/a&gt; on the element's &lt;a href=#master-command&gt;master command&lt;/a&gt;.&lt;/dd&gt;
+   &lt;!-- we know it has a defined &lt;span&gt;activation behavior&lt;/span&gt; if
+   we get here --&gt;
 
-   &lt;dd&gt;Append the command to the menu, respecting its &lt;a href=#concept-facet title=concept-facet&gt;facets&lt;/a&gt;&lt;!-- we might need to be
-   explicit about what this means for each facet, if testing shows
-   this isn't well-implemented. e.g.: If there's an Icon facet for the
-   command, it should be &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;&lt;!- -FETCH-
-   -&gt; (this would be http-origin privacy-sensitive), and then that
-   image should be associated with the command, such that each command
-   only has its image fetched once, to prevent changes to the base URL
-   from having effects after the image has been fetched once. (no need
-   to resolve the Icon facet, it's an absolute URL) --&gt;. &lt;!--If the
-   element is a &lt;code&gt;command&lt;/code&gt; element with a &lt;code
-   title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute, mark the
-   command as being a default command.--&gt;&lt;/dd&gt;
 
+   &lt;dt&gt;If the &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
+   in the &lt;a href=#attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/a&gt; state&lt;/dt&gt;
 
-   &lt;dt&gt;An &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
-   &lt;dt&gt;An &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element that has a &lt;code title=attr-option-value&gt;&lt;a href=#attr-option-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute set to the empty
-   string, and has a &lt;code title=attr-option-disabled&gt;&lt;a href=#attr-option-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute, and whose
-   &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; consists of a string of one or more
-   hyphens (U+002D HYPHEN-MINUS)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;If the element has a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, the UA must
+   remove that attribute. Otherwise, the UA must add a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, with the
+   literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;Append a separator to the menu.&lt;/dd&gt;
 
+   &lt;dt&gt;If the &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
+   in the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state&lt;/dt&gt;
 
-   &lt;dt&gt;An &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
-   &lt;dt&gt;A &lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;If the element has a parent, then the UA must walk the list
+   of child nodes of that parent element, and for each node that is a
+   &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element, if that element has a &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt; attribute whose
+   value exactly matches the current element's (treating missing &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt; attributes as if
+   they were the empty string), and has a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, must remove
+   that attribute.&lt;/p&gt;
 
-   &lt;dd&gt;Iterate over the children of the element.&lt;/dd&gt;
+   &lt;p&gt;Then, the element's &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute attribute
+   must be set to the literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/dd&gt;
 
 
-   &lt;dt&gt;A &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with no &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
-   &lt;dt&gt;A &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
 
-   &lt;dd&gt;Append a separator to the menu, then iterate over the children
-   of the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element, then
-   append another separator.&lt;/dd&gt;
+   &lt;dd&gt;&lt;p&gt;The element's &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; is to do
+   nothing.&lt;/dd&gt;
 
-   &lt;!-- v2: we might want to support &lt;select&gt; in &lt;label&gt; as giving a named submenu --&gt;
+  &lt;/dl&gt;&lt;p class=note&gt;Firing a synthetic &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event at the element does not cause
+  any of the actions described above to happen.&lt;/p&gt;
 
+  &lt;!-- v2COMMAND: Expose the Triggers facet again. --&gt;
 
-   &lt;dt&gt;A &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
-   &lt;dt&gt;An &lt;code&gt;&lt;a href=#the-optgroup-element&gt;optgroup&lt;/a&gt;&lt;/code&gt; element with a &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
+  &lt;p&gt;If the element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; is true
+  (disabled) then the element has no &lt;a href=#activation-behavior&gt;activation
+  behavior&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dd&gt;Append a submenu to the menu, using the value of the element's
-   &lt;code title=&quot;&quot;&gt;label&lt;/code&gt; attribute as the label of the menu. The
-   submenu must be constructed by taking the element and creating a
-   new menu for it using the complete process described in this
-   section.&lt;/dd&gt;
+  &lt;/div&gt;
 
+  &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element is not rendered except as &lt;a href=#the-menu-element title=menu&gt;part of a popup menu&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;Any other node&lt;/dt&gt;
+  &lt;div class=example&gt;
 
-   &lt;dd&gt;&lt;a href=#ignore&gt;Ignore&lt;/a&gt; the node.&lt;/dd&gt;
+   &lt;p&gt;Here is an example of a pop-up menu button with three options that let the user toggle between
+   left, center, and right alignment. One could imagine such a toolbar as part of a text editor. The
+   menu also has a separator followed by another menu item labeled &quot;Publish&quot;, though that menu item
+   is disabled.&lt;/p&gt;
 
-  &lt;/dl&gt;&lt;p&gt;Once all the nodes have been processed as described above, the
-  user agent must the post-process the menu as follows:&lt;/p&gt;
+   &lt;pre&gt;&lt;button type=menu menu=editmenu&gt;Commands...&lt;/button&gt;
+&lt;menu type=&quot;popup&quot; id=&quot;editmenu&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot; checked=&quot;checked&quot;
+          label=&quot;Left&quot; icon=&quot;icons/alL.png&quot; onclick=&quot;setAlign('left')&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
+          label=&quot;Center&quot; icon=&quot;icons/alC.png&quot; onclick=&quot;setAlign('center')&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
+          label=&quot;Right&quot; icon=&quot;icons/alR.png&quot; onclick=&quot;setAlign('right')&quot;&gt;
+ &lt;hr&gt;
+ &lt;menuitem type=&quot;command&quot; disabled
+          label=&quot;Publish&quot; icon=&quot;icons/pub.png&quot; onclick=&quot;publish()&quot;&gt;
+&lt;/menu&gt;&lt;/pre&gt;
 
-  &lt;ol&gt;&lt;li&gt;Except for separators, any menu item with no label, or whose
-   label is the empty string, must be removed.&lt;/li&gt;
+  &lt;/div&gt;
 
-   &lt;li&gt;Any sequence of two or more separators in a row must be
-   collapsed to a single separator.&lt;/li&gt;
 
-   &lt;li&gt;Any separator at the start or end of the menu must be
-   removed.&lt;/li&gt;
+  &lt;h4 id=context-menus&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Context menus&lt;/h4&gt;
 
-  &lt;/ol&gt;&lt;/div&gt;
+  &lt;h5 id=declaring-a-context-menu&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;Declaring a context menu&lt;/h5&gt;
 
+  &lt;p&gt;The &lt;dfn id=attr-contextmenu title=attr-contextmenu&gt;&lt;code&gt;contextmenu&lt;/code&gt;&lt;/dfn&gt; attribute gives the element's
+  context menu. The value must be the &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;
+  element in the same &lt;a href=#home-subtree&gt;home subtree&lt;/a&gt; whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt;
+  attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state.&lt;/p&gt;
 
+  &lt;p class=note&gt;When a user right-clicks on an element with a &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute, the user agent will first fire a &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event at the element, and then, if that event is not
+  canceled, a &lt;code title=event-show&gt;show&lt;/code&gt; event at the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
+  &lt;div class=example&gt;
 
-  &lt;h5 id=context-menus&gt;&lt;span class=secno&gt;4.11.4.3 &lt;/span&gt;&lt;dfn&gt;Context menus&lt;/dfn&gt;&lt;/h5&gt;
+   &lt;p&gt;Here is an example of a context menu for an input control:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-contextmenu title=attr-contextmenu&gt;&lt;code&gt;contextmenu&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the element's &lt;a href=#context-menus title=&quot;context menus&quot;&gt;context
-  menu&lt;/a&gt;. The value must be the &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt; of a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element in the
-  DOM. &lt;span class=impl&gt;If the node that would be obtained by
-  invoking the &lt;code title=dom-Document-getElementById&gt;&lt;a href=#dom-document-getelementbyid&gt;getElementById()&lt;/a&gt;&lt;/code&gt; method
-  using the attribute's value as the only argument is null or not a
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, then the element has no assigned context
-  menu. Otherwise, the element's assigned context menu is the element
-  so identified.&lt;/span&gt;&lt;/p&gt;
+   &lt;pre&gt;&lt;form name=&quot;npc&quot;&gt;
+ &lt;label&gt;Character name: &lt;input name=char type=text contextmenu=namemenu required&gt;&lt;/label&gt;
+ &lt;menu type=popup id=namemenu&gt;
+  &lt;menuitem label=&quot;Pick random name&quot; onclick=&quot;document.forms.npc.elements.char.value = getRandomName()&quot;&gt;
+  &lt;menuitem label=&quot;Prefill other fields based on name&quot; onclick=&quot;prefillFields(document.forms.npc.elements.char.value)&quot;&gt;
+ &lt;/menu&gt;
+&lt;/form&gt;&lt;/pre&gt;
 
+   &lt;p&gt;This adds two items to the control's context menu, one called &quot;Pick random name&quot;, and one
+   called &quot;Prefill other fields based on name&quot;. They invoke scripts that are not shown in the
+   example above.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
   &lt;div class=impl&gt;
 
-  &lt;p&gt;When an element's context menu is requested (e.g. by the user
-  right-clicking the element, or pressing a context menu key), the
-  user agent must apply the appropriate rules from the following
+  &lt;h5 id=processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/h5&gt;
+
+  &lt;p&gt;If the there is no element with the ID given by an element's &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute's value in the element's &lt;a href=#home-subtree&gt;home
+  subtree&lt;/a&gt;, or if the first such element is not a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/a&gt; state, then the element has no assigned context menu. Otherwise, the element's
+  assigned context menu is the first such element.&lt;/p&gt;
+
+  &lt;p&gt;When an element's context menu is requested (e.g. by the user right-clicking the element, or
+  pressing a context menu key), the user agent must apply the appropriate rules from the following
   list:&lt;/p&gt;
 
   &lt;dl class=switch&gt;&lt;dt&gt;If the user requested a context menu using a pointing device&lt;/dt&gt;
@@ -58498,99 +58465,49 @@
 
    &lt;dt&gt;Otherwise&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent must &lt;a href=#fire-a-synthetic-mouse-event title=&quot;fire a synthetic mouse
-   event&quot;&gt;fire a synthetic mouse event named &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;&lt;/a&gt; that bubbles
-   and is cancelable at the element for which the menu was
-   requested.&lt;/dd&gt;
+   &lt;dd&gt;&lt;p&gt;The user agent must &lt;a href=#fire-a-synthetic-mouse-event title=&quot;fire a synthetic mouse event&quot;&gt;fire a synthetic mouse
+   event named &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;&lt;/a&gt; that bubbles and is
+   cancelable at the element for which the menu was requested.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p class=note&gt;Typically, therefore, the firing of the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event will be the
-  default action of a &lt;code title=mouseup&gt;mouseup&lt;/code&gt; or &lt;code title=event-keyup&gt;keyup&lt;/code&gt; event. The exact sequence of events
-  is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
+  &lt;/dl&gt;&lt;p class=note&gt;Typically, therefore, the firing of the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event will be the default action of a &lt;code title=mouseup&gt;mouseup&lt;/code&gt; or &lt;code title=event-keyup&gt;keyup&lt;/code&gt; event. The exact sequence
+  of events is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
 
   &lt;p&gt;The default action of the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event depends on
-  whether the element or one of its ancestors has a context menu
-  assigned (using the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute) or not. If
-  there is no context menu assigned, the default action must be for
-  the user agent to show its default context menu, if it has one.&lt;/p&gt;
+  whether or not the element or one of its ancestors has a context menu assigned (using the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute) when the event dispatch has completed. If
+  there is no context menu assigned, the default action must be for the user agent to show its
+  default context menu, if it has one.&lt;/p&gt;
 
-  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a
-  context menu assigned, then the user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple
-  event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; at the
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element of the context menu of the nearest
-  ancestor (including the element itself) with one assigned.&lt;/p&gt;
-  &lt;!-- v2: include modifier key information --&gt;
+  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a context menu assigned, then the
+  user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; that
+  is cancelable at the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element of the context menu of the nearest ancestor
+  (including the element itself) with one assigned.&lt;/p&gt; &lt;!-- v2: include modifier key information
+  --&gt;
 
-  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent
-  must show a context menu &lt;a href=#building-menus-and-toolbars title=&quot;building menus and
-  toolbars&quot;&gt;built&lt;/a&gt; from the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent must &lt;a href=#construct-and-show-a-menu title=&quot;construct
+  and show a menu&quot;&gt;construct and show&lt;/a&gt; the menu for the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
-  &lt;p&gt;The user agent may also provide access to its default context
-  menu, if any, with the context menu shown. For example, it could
-  merge the menu items from the two menus together, or provide the
+  &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
+  menu shown. For example, it could merge the menu items from the two menus together, or provide the
   page's context menu as a submenu of the default menu.&lt;/p&gt;
 
-  &lt;p&gt;If the user dismisses the menu without making a selection,
-  nothing in particular happens.&lt;/p&gt;
+  &lt;p&gt;User agents may provide means for bypassing the context menu processing model, ensuring that
+  the user can always access the UA's default context menus. For example, the user agent could
+  handle right-clicks that have the Shift key depressed in such a way that it does not fire the
+  &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event and instead always shows the default
+  context menu.&lt;/p&gt;
 
-  &lt;p&gt;If the user selects a menu item that represents a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt;, then the UA must invoke
-  that command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-contextmenu title=dom-contextMenu&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt; IDL attribute must
+  &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
 
-  &lt;p&gt;Context menus must not, while being shown, reflect changes in the
-  DOM; they are constructed as the default action of the &lt;code title=event-show&gt;show&lt;/code&gt; event and must remain as constructed
-  until dismissed.&lt;/p&gt;
-
-  &lt;p&gt;User agents may provide means for bypassing the context menu
-  processing model, ensuring that the user can always access the UA's
-  default context menus. For example, the user agent could handle
-  right-clicks that have the Shift key depressed in such a way that it
-  does not fire the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;
-  event and instead always shows the default context menu.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-contextmenu title=dom-contextMenu&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;div class=example&gt;
 
-   &lt;p&gt;Here is an example of a context menu for an input control:&lt;/p&gt;
 
-   &lt;pre&gt;&lt;form name=&quot;npc&quot;&gt;
- &lt;label&gt;Character name: &lt;input name=char type=text contextmenu=namemenu required&gt;&lt;/label&gt;
- &lt;menu type=context id=namemenu&gt;
-  &lt;command label=&quot;Pick random name&quot; onclick=&quot;document.forms.npc.elements.char.value = getRandomName()&quot;&gt;
-  &lt;command label=&quot;Prefill other fields based on name&quot; onclick=&quot;prefillFields(document.forms.npc.elements.char.value)&quot;&gt;
- &lt;/menu&gt;
-&lt;/form&gt;&lt;/pre&gt;
 
-   &lt;p&gt;This adds two items to the control's context menu, one called
-   &quot;Pick random name&quot;, and one called &quot;Prefill other fields based on
-   name&quot;. They invoke scripts that are not shown in the example
-   above.&lt;/p&gt;
+  &lt;h4 id=commands&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;Commands&lt;/h4&gt;
 
-  &lt;/div&gt;
+  &lt;h5 id=facets-0&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Facets&lt;/h5&gt;
 
-
-
-  &lt;div class=impl&gt;
-
-  &lt;h5 id=toolbars&gt;&lt;span class=secno&gt;4.11.4.4 &lt;/span&gt;&lt;dfn&gt;Toolbars&lt;/dfn&gt;&lt;/h5&gt;
-
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element has a &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, then the user agent
-  must &lt;a href=#building-menus-and-toolbars title=&quot;building menus and toolbars&quot;&gt;build&lt;/a&gt; the
-  menu for that &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, and use the result in the
-  rendering.&lt;/p&gt;
-
-  &lt;p&gt;The user agent must reflect changes made to the
-  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;'s DOM, by immediately &lt;a href=#building-menus-and-toolbars title=&quot;building menus
-  and toolbars&quot;&gt;rebuilding&lt;/a&gt; the menu.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h4 id=commands&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Commands&lt;/h4&gt;
-
   &lt;p&gt;A &lt;dfn id=concept-command title=concept-command&gt;command&lt;/dfn&gt; is the abstraction
   behind menu items, buttons, and links. Once a command is defined,
   other parts of the interface can refer to the same command, allowing
@@ -58828,17 +58745,28 @@
   &lt;/div&gt;
 &lt;!--TOPIC:HTML--&gt;
 
-  &lt;hr&gt;&lt;p&gt;User agents may expose the &lt;a href=#concept-command title=concept-command&gt;commands&lt;/a&gt; whose &lt;a href=#command-facet-hiddenstate title=command-facet-HiddenState&gt;Hidden State&lt;/a&gt; facet is false
-  (visible) and whose elements are &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;. For example, such commands could be
-  listed in the user agent's menu bar. User agents are encouraged to
-  do this especially for commands that have &lt;a href=#command-facet-accesskey title=command-facet-AccessKey&gt;Access Keys&lt;/a&gt;, as a way to
-  advertise those keys to the user.&lt;/p&gt;
+  &lt;hr&gt;&lt;p id=expose-commands-in-ui&gt;User agents may expose the &lt;a href=#concept-command title=concept-command&gt;commands&lt;/a&gt; that match the following criteria:&lt;/p&gt;
 
+  &lt;ul class=brief&gt;&lt;li&gt;The &lt;a href=#command-facet-hiddenstate title=command-facet-HiddenState&gt;Hidden State&lt;/a&gt; facet is false (visible)&lt;/li&gt;
 
+   &lt;li&gt;The element is &lt;a href=#in-a-document&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; that has an associated &lt;a href=#browsing-context&gt;browsing
+   context&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;Neither the element nor any of its ancestors has a &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt;
+   attribute specified.&lt;/li&gt;
+
+   &lt;li&gt;The element is not a &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element, or it is a child of a &lt;a href=#currently-relevant-menu-element&gt;currently
+   relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;, or it has an &lt;a href=#command-facet-accesskey title=command-facet-accesskey&gt;Access Key&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p&gt;User agents are encouraged to do this especially for commands that have &lt;a href=#command-facet-accesskey title=command-facet-AccessKey&gt;Access Keys&lt;/a&gt;, as a way to advertise those keys to the
+  user.&lt;/p&gt;
+
+  &lt;p class=example&gt;For example, such commands could be listed in the user agent's menu bar.&lt;/p&gt;
+
+
   &lt;div class=impl&gt;
 
-  &lt;h5 id=using-the-a-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;&lt;dfn title=a-command&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-a-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.2 &lt;/span&gt;&lt;dfn title=a-command&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element with an &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
@@ -58889,7 +58817,7 @@
   element.&lt;/p&gt;
 
 
-  &lt;h5 id=using-the-button-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;&lt;dfn title=button-command&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-button-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.3 &lt;/span&gt;&lt;dfn title=button-command&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element always &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
@@ -58903,14 +58831,14 @@
   otherwise.&lt;/p&gt;
 
 
-  &lt;h5 id=using-the-input-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.3 &lt;/span&gt;&lt;dfn title=input-command&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-input-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.4 &lt;/span&gt;&lt;dfn title=input-command&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in one of the &lt;a href=&quot;#submit-button-state-(type=submit)&quot; title=attr-input-type-submit&gt;Submit Button&lt;/a&gt;, &lt;a href=&quot;#reset-button-state-(type=reset)&quot; title=attr-input-type-reset&gt;Reset Button&lt;/a&gt;, &lt;a href=&quot;#image-button-state-(type=image)&quot; title=attr-input-type-image&gt;Image Button&lt;/a&gt;, &lt;a href=&quot;#button-state-(type=button)&quot; title=attr-input-type-button&gt;Button&lt;/a&gt;, &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio Button&lt;/a&gt;, or &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; states &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-type title=command-facet-Type&gt;Type&lt;/a&gt; of the command
   is &quot;radio&quot; if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt;
-  attribute is in the &lt;code title=attr-input-type-radio&gt;&lt;a href=&quot;#radio-button-state-(type=radio)&quot;&gt;Radio
-  Button&lt;/a&gt;&lt;/code&gt; state, &quot;checkbox&quot; if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;code title=attr-input-type-checkbox&gt;&lt;a href=&quot;#checkbox-state-(type=checkbox)&quot;&gt;Checkbox&lt;/a&gt;&lt;/code&gt; state, and
+  attribute is in the &lt;a href=&quot;#radio-button-state-(type=radio)&quot; title=attr-input-type-radio&gt;Radio
+  Button&lt;/a&gt; state, &quot;checkbox&quot; if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=&quot;#checkbox-state-(type=checkbox)&quot; title=attr-input-type-checkbox&gt;Checkbox&lt;/a&gt; state, and
   &quot;command&quot; otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-id title=command-facet-ID&gt;ID&lt;/a&gt; of the command is
@@ -58975,7 +58903,7 @@
   element.&lt;/p&gt;
 
 
-  &lt;h5 id=using-the-option-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.4 &lt;/span&gt;&lt;dfn title=option-command&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-option-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.5 &lt;/span&gt;&lt;dfn title=option-command&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element with an ancestor
   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element and either no &lt;code title=attr-option-value&gt;&lt;a href=#attr-option-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code title=attr-option-value&gt;&lt;a href=#attr-option-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute that is not the
@@ -59031,13 +58959,13 @@
 
 
 
-  &lt;h5 id=using-the-command-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.5 &lt;/span&gt;Using the &lt;dfn title=command-element&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; element to define
+  &lt;h5 id=using-the-menuitem-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.6 &lt;/span&gt;Using the &lt;dfn title=command-element&gt;&lt;code&gt;menuitem&lt;/code&gt;&lt;/dfn&gt; element to define
   a command&lt;/h5&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element that does not have a &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element that does not have a &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt; attribute &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-type title=command-facet-Type&gt;Type&lt;/a&gt; of the command
-  is &quot;radio&quot; if the &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;'s &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
+  is &quot;radio&quot; if the &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;'s &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
   &quot;&lt;code&gt;radio&lt;/code&gt;&quot;, &quot;checkbox&quot; if the attribute's value is
   &quot;&lt;code&gt;checkbox&lt;/code&gt;&quot;, and &quot;command&quot; otherwise.&lt;/p&gt;
 
@@ -59047,16 +58975,16 @@
   command is an &lt;a href=#anonymous-command&gt;anonymous command&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-label title=command-facet-Label&gt;Label&lt;/a&gt; of the command
-  is the value of the element's &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute, if there is one,
+  is the value of the element's &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt; attribute, if there is one,
   or the empty string if it doesn't.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-hint title=command-facet-Hint&gt;Hint&lt;/a&gt; of the command
-  is the string given by the element's &lt;code title=attr-command-title&gt;&lt;a href=#attr-command-title&gt;title&lt;/a&gt;&lt;/code&gt; attribute, if any, and the
+  is the string given by the element's &lt;code title=attr-menuitem-title&gt;&lt;a href=#attr-menuitem-title&gt;title&lt;/a&gt;&lt;/code&gt; attribute, if any, and the
   empty string if the attribute is absent.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-icon title=command-facet-Icon&gt;Icon&lt;/a&gt; for the command
   is the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; obtained from &lt;a href=#resolve-a-url title=&quot;resolve
-  a url&quot;&gt;resolving&lt;/a&gt; the value of the element's &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt; attribute, relative to the
+  a url&quot;&gt;resolving&lt;/a&gt; the value of the element's &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt; attribute, relative to the
   element, if it has such an attribute and resolving it is
   successful. Otherwise, there is no &lt;a href=#command-facet-icon title=command-facet-Icon&gt;Icon&lt;/a&gt; for the command.&lt;/p&gt;
 
@@ -59070,11 +58998,11 @@
 
   &lt;p&gt;The &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled
   State&lt;/a&gt; of the command is true if the element or one of its
-  ancestors is &lt;a href=#inert&gt;inert&lt;/a&gt;, or if the element has a &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute, and false
+  ancestors is &lt;a href=#inert&gt;inert&lt;/a&gt;, or if the element has a &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute, and false
   otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-checkedstate title=command-facet-CheckedState&gt;Checked State&lt;/a&gt;
-  of the command is true (checked) if the element has a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, and false
+  of the command is true (checked) if the element has a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt; attribute, and false
   otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; of the
@@ -59086,9 +59014,9 @@
 
 
 
-  &lt;h5 id=using-the-command-attribute-on-command-elements-to-define-a-command-indirectly&gt;&lt;span class=secno&gt;4.11.5.6 &lt;/span&gt;&lt;dfn title=command-command-command&gt;Using the &lt;code title=attr-command-command&gt;command&lt;/code&gt; attribute on &lt;code&gt;command&lt;/code&gt; elements to define a command indirectly&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly&gt;&lt;span class=secno&gt;4.11.6.7 &lt;/span&gt;&lt;dfn title=command-menuitem-command&gt;Using the &lt;code title=attr-menuitem-command&gt;command&lt;/code&gt; attribute on &lt;code&gt;menuitem&lt;/code&gt; elements to define a command indirectly&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; element with a &lt;a href=#master-command&gt;master command&lt;/a&gt;
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; element with a &lt;a href=#master-command&gt;master command&lt;/a&gt;
   &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#command-facet-type title=command-facet-Type&gt;Type&lt;/a&gt; of the command
@@ -59135,7 +59063,7 @@
 
 
 
-  &lt;h5 id=using-the-accesskey-attribute-on-a-label-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.7 &lt;/span&gt;&lt;dfn title=label-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;label&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-accesskey-attribute-on-a-label-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.8 &lt;/span&gt;&lt;dfn title=label-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;label&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt; element that has an &lt;a href=#assigned-access-key&gt;assigned access
   key&lt;/a&gt; and a &lt;a href=#labeled-control&gt;labeled control&lt;/a&gt; and whose
@@ -59176,7 +59104,7 @@
 
 
 
-  &lt;h5 id=using-the-accesskey-attribute-on-a-legend-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.5.8 &lt;/span&gt;&lt;dfn title=legend-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;legend&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-accesskey-attribute-on-a-legend-element-to-define-a-command&gt;&lt;span class=secno&gt;4.11.6.9 &lt;/span&gt;&lt;dfn title=legend-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute on a &lt;code&gt;legend&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=#the-legend-element&gt;legend&lt;/a&gt;&lt;/code&gt; element that has an &lt;a href=#assigned-access-key&gt;assigned access
   key&lt;/a&gt; and is a child of a &lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt; element that
@@ -59220,7 +59148,7 @@
 
 
 
-  &lt;h5 id=using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.5.9 &lt;/span&gt;&lt;dfn title=accesskey-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=using-the-accesskey-attribute-to-define-a-command-on-other-elements&gt;&lt;span class=secno&gt;4.11.6.10 &lt;/span&gt;&lt;dfn title=accesskey-command&gt;Using the &lt;code title=attr-accesskey&gt;accesskey&lt;/code&gt; attribute to define a command on other elements&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An element that has an &lt;a href=#assigned-access-key&gt;assigned access key&lt;/a&gt; &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;.&lt;/p&gt;
 
@@ -59283,7 +59211,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h4 id=the-dialog-element&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;dialog&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
+  &lt;h4 id=the-dialog-element&gt;&lt;span class=secno&gt;4.11.7 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;dialog&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;&lt;dt&gt;&lt;a href=#element-dfn-categories title=element-dfn-categories&gt;Categories&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#flow-content&gt;Flow content&lt;/a&gt;.&lt;/dd&gt;
@@ -59737,7 +59665,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=anchor-points&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Anchor points&lt;/h5&gt;
+  &lt;h5 id=anchor-points&gt;&lt;span class=secno&gt;4.11.7.1 &lt;/span&gt;Anchor points&lt;/h5&gt;
 
   &lt;p class=critical&gt;This section will eventually be moved to a CSS
   specification; it is specified here only on an interim basis until
@@ -61927,14 +61855,8 @@
 
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements that are &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements that have a &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements that have a &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
-   &lt;li&gt;&lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements that are children of
-   &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements, and that have a child element that
-   defines a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt;, if the
-   first such element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; facet
-   is true (disabled)&lt;/li&gt;
-
    &lt;li&gt;&lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt; elements that have a &lt;code title=attr-fieldset-disabled&gt;&lt;a href=#attr-fieldset-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
   &lt;/ul&gt;&lt;p class=note&gt;This definition is used to determine what elements can be &lt;a href=#specially-focusable title=&quot;tabindex
@@ -62030,7 +61952,7 @@
 
        &lt;li&gt;&lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=&quot;#submit-button-state-(type=submit)&quot; title=attr-input-type-submit&gt;Submit Button&lt;/a&gt;, &lt;a href=&quot;#image-button-state-(type=image)&quot; title=attr-input-type-image&gt;Image Button&lt;/a&gt;, &lt;a href=&quot;#reset-button-state-(type=reset)&quot; title=attr-input-type-reset&gt;Reset Button&lt;/a&gt;, or &lt;a href=&quot;#button-state-(type=button)&quot; title=attr-input-type-button&gt;Button&lt;/a&gt; state&lt;/li&gt;
 
-       &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
+       &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
        &lt;li&gt;elements that have their &lt;a href=#specially-focusable&gt;tabindex focus flag&lt;/a&gt; set&lt;/li&gt;
 
@@ -62148,14 +62070,8 @@
 
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements that are not &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; elements that are children of
-     &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; elements, and that have a child element that
-     defines a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt;, if the
-     first such element's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; facet
-     is false (not disabled)&lt;/li&gt;
-
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt; elements that do not have a &lt;code title=attr-fieldset-disabled&gt;&lt;a href=#attr-fieldset-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
     &lt;/ul&gt;&lt;/dd&gt;
@@ -62190,12 +62106,12 @@
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements whose &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; is
      true&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-command-type-state-checkbox title=attr-command-type-state-checkbox&gt;Checkbox&lt;/a&gt; state
-     and that have a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-menuitem-type-state-checkbox title=attr-menuitem-type-state-checkbox&gt;Checkbox&lt;/a&gt; state
+     and that have a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;
      attribute&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-command-type-state-radio title=attr-command-type-state-radio&gt;Radio&lt;/a&gt; state and that
-     have a &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#attr-menuitem-type-state-radio title=attr-menuitem-type-state-radio&gt;Radio&lt;/a&gt; state and that
+     have a &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;
      attribute&lt;/li&gt;
 
     &lt;/ul&gt;&lt;/dd&gt;
@@ -62240,8 +62156,8 @@
 
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements that have a &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 &lt;!--
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements that have a &lt;code
-     title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements that have a &lt;code
+     title=&quot;attr-menuitem-default&quot;&gt;default&lt;/code&gt; attribute&lt;/li&gt;
 --&gt;
     &lt;/ul&gt;&lt;/dd&gt;
 
@@ -73029,7 +72945,7 @@
   &lt;div class=impl&gt;
 
   &lt;!-- SCRIPT EXEC (marks areas related to creation of scripts) --&gt;
-  &lt;h4 id=processing-model-2&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-3&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;h5 id=definitions-0&gt;&lt;span class=secno&gt;7.1.3.1 &lt;/span&gt;Definitions&lt;/h5&gt;
 
@@ -73582,7 +73498,7 @@
   release the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=processing-model-3&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/h5&gt;
+  &lt;h5 id=processing-model-4&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/h5&gt;
 
   &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must continually run through the
   following steps for as long as it exists:&lt;/p&gt;
@@ -77064,7 +76980,7 @@
 
      &lt;li&gt;&lt;code&gt;&lt;a href=#the-textarea-element&gt;textarea&lt;/a&gt;&lt;/code&gt; elements&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt; elements&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt; elements&lt;/li&gt;
 
      &lt;li&gt;Elements with a &lt;code title=attr-draggable&gt;&lt;a href=#the-draggable-attribute&gt;draggable&lt;/a&gt;&lt;/code&gt;
      attribute set, if that would enable the user agent to allow the
@@ -77578,7 +77494,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=processing-model-4&gt;&lt;span class=secno&gt;8.5.3 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-5&gt;&lt;span class=secno&gt;8.5.3 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;An element's &lt;dfn id=assigned-access-key&gt;assigned access key&lt;/dfn&gt; is a key combination
   derived from the element's &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; content attribute.
@@ -77629,19 +77545,17 @@
   &lt;a href=#assigned-access-key&gt;assigned access key&lt;/a&gt; unless the &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; content attribute is changed
   or the element is moved to another &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the user presses the key combination corresponding to the
-  &lt;a href=#assigned-access-key&gt;assigned access key&lt;/a&gt; for an element, if the element
-  &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, the
-  command's &lt;a href=#command-facet-hiddenstate title=command-facet-HiddenState&gt;Hidden
-  State&lt;/a&gt; facet is false (visible), the command's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; facet is
-  also false (enabled), and the element is &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;, then the user agent must trigger the
-  &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; of the command.&lt;/p&gt;
+  &lt;p&gt;When the user presses the key combination corresponding to the &lt;a href=#assigned-access-key&gt;assigned access key&lt;/a&gt;
+  for an element, if the element &lt;a href=#concept-command title=concept-command&gt;defines a command&lt;/a&gt;, the
+  command's &lt;a href=#command-facet-hiddenstate title=command-facet-HiddenState&gt;Hidden State&lt;/a&gt; facet is false (visible),
+  the command's &lt;a href=#command-facet-disabledstate title=command-facet-DisabledState&gt;Disabled State&lt;/a&gt; facet is also false
+  (enabled), the element is &lt;a href=#in-a-document&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; that has an associated
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, and neither the element nor any of its ancestors has a &lt;code title=attr-hidden&gt;&lt;a href=#the-hidden-attribute&gt;hidden&lt;/a&gt;&lt;/code&gt; attribute specified, then the user agent must trigger the &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; of the command.&lt;/p&gt;
 
-  &lt;p class=note&gt;User agents might expose elements that have an &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; attribute in other ways as
-  well, e.g. in a menu displayed in response to a specific key
-  combination.&lt;/p&gt; &lt;!-- the actual conformance criteria for this is in
-  the section that defines commands --&gt;
+  &lt;p class=note&gt;User agents &lt;a href=#expose-commands-in-ui&gt;might expose&lt;/a&gt; elements that have
+  an &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; attribute in other ways as well, e.g. in a menu
+  displayed in response to a specific key combination.&lt;/p&gt; &lt;!-- the actual conformance criteria for
+  this is in the section that defines commands --&gt;
 
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-accesskey title=dom-accessKey&gt;&lt;code&gt;accessKey&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-accesskey&gt;&lt;a href=#the-accesskey-attribute&gt;accesskey&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
@@ -81809,7 +81723,7 @@
   &lt;a href=#permissible-worker&gt;permissible worker&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=processing-model-5&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-6&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with
   &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#browsing-context&gt;browsing
@@ -83138,7 +83052,7 @@
   &lt;/ul&gt;&lt;p&gt;These values are not currently exposed on the interface.&lt;/p&gt;
 
 
-  &lt;h4 id=processing-model-6&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-7&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;The resource indicated in the argument to the &lt;code title=dom-EventSource&gt;&lt;a href=#dom-eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; constructor is &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; when the constructor is run.&lt;/p&gt;
 
@@ -86606,12 +86520,10 @@
 
   &lt;dl&gt;&lt;dt&gt;&lt;dfn id=void-elements&gt;Void elements&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;!-- see also other places that say VOIDLIST --&gt;
 
    &lt;dt&gt;&lt;dfn id=raw-text-elements&gt;Raw text elements&lt;/dfn&gt;&lt;/dt&gt;
@@ -88485,7 +88397,7 @@
    &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#basefont&gt;basefont&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#bgsound&gt;bgsound&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-blockquote-element&gt;blockquote&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-caption-element&gt;caption&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#center&gt;center&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-colgroup-element&gt;colgroup&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-colgroup-element&gt;colgroup&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-dd-element&gt;dd&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-details-element&gt;details&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#dir&gt;dir&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-dl-element&gt;dl&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-dt-element&gt;dt&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-fieldset-element&gt;fieldset&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-figcaption-element&gt;figcaption&lt;/a&gt;&lt;/code&gt;,
@@ -95324,15 +95236,13 @@
 
         &lt;p&gt;Append a U+003E GREATER-THAN SIGN character (&gt;).&lt;/p&gt;
 
-        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;current node&lt;/var&gt; is an
-        &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#basefont&gt;basefont&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#bgsound&gt;bgsound&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#frame&gt;frame&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;,
-        &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; or
-        &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt; element, then continue on to the next child
-        node at this point.&lt;/p&gt; &lt;!-- VOIDLIST superset --&gt;
+        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;current node&lt;/var&gt; is an &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;,
+        &lt;code&gt;&lt;a href=#basefont&gt;basefont&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#bgsound&gt;bgsound&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-br-element&gt;br&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;,
+        &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#frame&gt;frame&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt;,
+        &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-keygen-element&gt;keygen&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;,
+        &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-param-element&gt;param&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-track-element&gt;track&lt;/a&gt;&lt;/code&gt; or
+        &lt;code&gt;&lt;a href=#the-wbr-element&gt;wbr&lt;/a&gt;&lt;/code&gt; element, then continue on to the next child node at this point.&lt;/p&gt;
+        &lt;!-- VOIDLIST superset --&gt;
         &lt;!-- also, i guess: image and isindex, but we don't list those
         because we don't consider those &quot;elements&quot;, more &quot;macros&quot;, and
         thus we should never serialize them --&gt;
@@ -96108,7 +96018,7 @@
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
 [hidden], area, base, basefont, command, datalist, head,
-input[type=hidden i], link, menu[type=context i], meta, noembed, noframes,
+input[type=hidden i], link, menu[type=popup i], meta, noembed, noframes,
 param, rp, script, source, style, track, title {
   display: none;
 }
@@ -97626,22 +97536,6 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=toolbars-0&gt;&lt;span class=secno&gt;14.4.5 &lt;/span&gt;Toolbars&lt;/h4&gt;
-
-  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state, the element is
-  expected to be treated as a replaced element with a height about two
-  lines high and a width derived from the contents of the element.&lt;/p&gt;
-
-  &lt;p&gt;The element is expected to have, by default, the appearance of a
-  toolbar on the user agent's platform. It is expected to contain the
-  menu that is &lt;a href=#building-menus-and-toolbars title=&quot;building menus and toolbars&quot;&gt;built&lt;/a&gt;
-  from the element.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;div class=impl&gt;
-
   &lt;h3 id=bindings&gt;&lt;span class=secno&gt;14.5 &lt;/span&gt;Bindings&lt;/h3&gt;
 
   &lt;h4 id=introduction-14&gt;&lt;span class=secno&gt;14.5.1 &lt;/span&gt;Introduction&lt;/h4&gt;
@@ -97678,6 +97572,11 @@
   'inline-block' box rendered as a button whose contents are the
   contents of the element.&lt;/p&gt;
 
+  &lt;p&gt;When the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-button-type&gt;&lt;a href=#attr-button-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is
+  in the &lt;a href=#attr-button-type-menu-state title=attr-button-type-menu-state&gt;Menu&lt;/a&gt; state, the user agent is expected to
+  indicate that activating the element will display a menu, e.g. by displaying a down-pointing
+  triangle after the button's label.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -101235,7 +101134,7 @@
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-colgroup-span&gt;&lt;a href=#attr-colgroup-span&gt;span&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#htmltablecolelement&gt;HTMLTableColElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
-    &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
+    &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;Menu command&lt;/td&gt;
      &lt;td&gt;&lt;a href=#metadata-content title=&quot;Metadata content&quot;&gt;metadata&lt;/a&gt;;
          &lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;;
@@ -101244,14 +101143,14 @@
          &lt;a href=#phrasing-content title=&quot;Phrasing content&quot;&gt;phrasing&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;empty&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
-         &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;type&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;label&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;icon&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;checked&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;;
-         &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
-     &lt;td&gt;&lt;code&gt;&lt;a href=#htmlcommandelement&gt;HTMLCommandElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
+         &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;type&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;label&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;icon&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;disabled&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;checked&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;radiogroup&lt;/a&gt;&lt;/code&gt;;
+         &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;command&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;code&gt;&lt;a href=#htmlmenuitemelement&gt;HTMLMenuItemElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
     &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;Machine-readable equivalent&lt;/td&gt;
      &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;;
@@ -101609,7 +101508,7 @@
     &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;List item&lt;/td&gt;
      &lt;td&gt;none&lt;/td&gt;
-     &lt;td&gt;&lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt;; &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt;; &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt;; &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt;; &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-li-value&gt;&lt;a href=#attr-li-value&gt;value&lt;/a&gt;&lt;/code&gt;*&lt;/td&gt;
@@ -101652,11 +101551,14 @@
      &lt;td&gt;&lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
     &lt;tr&gt;&lt;th&gt;&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;Menu of commands&lt;/td&gt;
-     &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;;
-         &lt;a href=#interactive-content title=&quot;Interactive content&quot;&gt;interactive&lt;/a&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;;
+         &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt;*;
-         &lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;&lt;/td&gt;
+         &lt;a href=#flow-content title=&quot;Flow content&quot;&gt;flow&lt;/a&gt;*;
+         &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;*;
+         &lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;*;
+         &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;a href=#global-attributes title=&quot;global attributes&quot;&gt;globals&lt;/a&gt;;
          &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt;;
          &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;label&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
@@ -102153,15 +102055,12 @@
     &lt;/table&gt;&lt;p class=tablenote&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
   complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
 
-  &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that
-  list the given categories in their content model, not to elements
-  that themselves are in those categories. For example, the
-  &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element's &quot;Parents&quot; column says &quot;phrasing&quot;, so any
-  element whose content model contains the &quot;phrasing&quot; category could
-  be a parent of an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element. Since the &quot;flow&quot; category
-  includes all the &quot;phrasing&quot; elements, that means the
-  &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt; element could be a parent to an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;
-  element.&lt;/p&gt;
+  &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that list the given categories in
+  their content model, not to elements that themselves are in those categories. For example, the
+  &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element's &quot;Parents&quot; column says &quot;phrasing&quot;, so any element whose content model
+  contains the &quot;phrasing&quot; category could be a parent of an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element. Since the &quot;flow&quot;
+  category includes all the &quot;phrasing&quot; elements, that means the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element could be a
+  parent to an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
 
 
@@ -102178,7 +102077,6 @@
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;a href=#metadata-content&gt;Metadata content&lt;/a&gt;
      &lt;td&gt;
       &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt;;
-      &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-meta-element&gt;meta&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-noscript-element&gt;noscript&lt;/a&gt;&lt;/code&gt;;
@@ -102205,7 +102103,6 @@
       &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-cite-element&gt;cite&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-code-element&gt;code&lt;/a&gt;&lt;/code&gt;;
-      &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-datalist-element&gt;datalist&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt;;
@@ -102312,7 +102209,6 @@
       &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-cite-element&gt;cite&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-code-element&gt;code&lt;/a&gt;&lt;/code&gt;;
-      &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-datalist-element&gt;datalist&lt;/a&gt;&lt;/code&gt;;
       &lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt;;
@@ -102388,7 +102284,6 @@
       &lt;code&gt;&lt;a href=#the-audio-element&gt;audio&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-media-controls&gt;&lt;a href=#attr-media-controls&gt;controls&lt;/a&gt;&lt;/code&gt; attribute is present);
       &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt; attribute is present);
       &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;a href=&quot;#hidden-state-(type=hidden)&quot; title=attr-input-type-hidden&gt;Hidden&lt;/a&gt; state);
-      &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state);
       &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt; attribute is present)&lt;!-- see also comment in &lt;object&gt; section --&gt;;
       &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-media-controls&gt;&lt;a href=#attr-media-controls&gt;controls&lt;/a&gt;&lt;/code&gt; attribute is present)
 
@@ -102537,7 +102432,7 @@
       &lt;code&gt;&lt;a href=#the-audio-element&gt;audio&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-media-controls&gt;&lt;a href=#attr-media-controls&gt;controls&lt;/a&gt;&lt;/code&gt; attribute is present);
       &lt;code&gt;&lt;a href=#the-dl-element&gt;dl&lt;/a&gt;&lt;/code&gt; (if the element's children include at least one name-value group);
       &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;a href=&quot;#hidden-state-(type=hidden)&quot; title=attr-input-type-hidden&gt;Hidden&lt;/a&gt; state);
-      &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state or the &lt;a href=#list-state title=&quot;list state&quot;&gt;list&lt;/a&gt; state);
+      &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; (if the &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#toolbar-state title=&quot;toolbar state&quot;&gt;toolbar&lt;/a&gt; state);
       &lt;code&gt;&lt;a href=#the-ol-element&gt;ol&lt;/a&gt;&lt;/code&gt; (if the element's children include at least one &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element);
       &lt;code&gt;&lt;a href=#the-ul-element&gt;ul&lt;/a&gt;&lt;/code&gt; (if the element's children include at least one &lt;code&gt;&lt;a href=#the-li-element&gt;li&lt;/a&gt;&lt;/code&gt; element);
       &lt;a href=#text-content title=&quot;text content&quot;&gt;Text&lt;/a&gt; that is not &lt;a href=#inter-element-whitespace&gt;inter-element whitespace&lt;/a&gt;
@@ -102621,7 +102516,7 @@
      &lt;td&gt; Character encoding of the external script resource
      &lt;td&gt; &lt;a href=#preferred-mime-name&gt;Preferred MIME name&lt;/a&gt; of a character encoding*
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-checked&gt;&lt;a href=#attr-command-checked&gt;command&lt;/a&gt;&lt;/code&gt;;
+     &lt;td&gt; &lt;code title=attr-menuitem-checked&gt;&lt;a href=#attr-menuitem-checked&gt;menuitem&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-input-checked&gt;&lt;a href=#attr-input-checked&gt;input&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Whether the command or control is checked
      &lt;td&gt; &lt;a href=#boolean-attribute&gt;Boolean attribute&lt;/a&gt;
@@ -102646,7 +102541,7 @@
      &lt;td&gt; Number of columns that the cell is to span
      &lt;td&gt; &lt;a href=#valid-non-negative-integer&gt;Valid non-negative integer&lt;/a&gt; greater than zero
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;command&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-command&gt;&lt;a href=#attr-command-command&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-command&gt;&lt;a href=#attr-menuitem-command&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Command definition
      &lt;td&gt; &lt;a href=#concept-id title=concept-id&gt;ID&lt;/a&gt;*
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;content&lt;/code&gt;
@@ -102719,7 +102614,7 @@
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;*
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;disabled&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-fe-disabled&gt;&lt;a href=#attr-fe-disabled&gt;button&lt;/a&gt;&lt;/code&gt;;
-          &lt;code title=attr-command-disabled&gt;&lt;a href=#attr-command-disabled&gt;command&lt;/a&gt;&lt;/code&gt;;
+          &lt;code title=attr-menuitem-disabled&gt;&lt;a href=#attr-menuitem-disabled&gt;menuitem&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-fieldset-disabled&gt;&lt;a href=#attr-fieldset-disabled&gt;fieldset&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-fe-disabled&gt;&lt;a href=#attr-fe-disabled&gt;input&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-fe-disabled&gt;&lt;a href=#attr-fe-disabled&gt;keygen&lt;/a&gt;&lt;/code&gt;;
@@ -102838,7 +102733,7 @@
      &lt;td&gt; Pragma directive
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;*
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;icon&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-icon&gt;&lt;a href=#attr-command-icon&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-icon&gt;&lt;a href=#attr-menuitem-icon&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Icon for the command
      &lt;td&gt; &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;Valid non-empty URL potentially surrounded by spaces&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;id&lt;/code&gt;
@@ -102902,7 +102797,7 @@
           &quot;&lt;code title=attr-track-kind-chapters&gt;&lt;a href=#attr-track-kind-chapters&gt;chapters&lt;/a&gt;&lt;/code&gt;&quot;;
           &quot;&lt;code title=attr-track-kind-metadata&gt;&lt;a href=#attr-track-kind-metadata&gt;metadata&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;label&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-label&gt;&lt;a href=#attr-command-label&gt;command&lt;/a&gt;&lt;/code&gt;;
+     &lt;td&gt; &lt;code title=attr-menuitem-label&gt;&lt;a href=#attr-menuitem-label&gt;menuitem&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-menu-label&gt;&lt;a href=#attr-menu-label&gt;menu&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-optgroup-label&gt;&lt;a href=#attr-optgroup-label&gt;optgroup&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-option-label&gt;&lt;a href=#attr-option-label&gt;option&lt;/a&gt;&lt;/code&gt;;
@@ -103054,7 +102949,7 @@
           &quot;&lt;code title=attr-media-preload-metadata&gt;&lt;a href=#attr-media-preload-metadata&gt;metadata&lt;/a&gt;&lt;/code&gt;&quot;;
           &quot;&lt;code title=attr-media-preload-auto&gt;&lt;a href=#attr-media-preload-auto&gt;auto&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;radiogroup&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-radiogroup&gt;&lt;a href=#attr-command-radiogroup&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-radiogroup&gt;&lt;a href=#attr-menuitem-radiogroup&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Name of group of commands to treat as a radio button group
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;readonly&lt;/code&gt;
@@ -103204,7 +103099,7 @@
      &lt;td&gt; Full term or expansion of abbreviation
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;title&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-title&gt;&lt;a href=#attr-command-title&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-title&gt;&lt;a href=#attr-menuitem-title&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Hint describing the command
      &lt;td&gt; &lt;a href=#attribute-text&gt;Text&lt;/a&gt;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;title&lt;/code&gt;
@@ -103231,13 +103126,14 @@
      &lt;td&gt; Type of button
      &lt;td&gt; &quot;&lt;code title=attr-button-type-submit&gt;&lt;a href=#attr-button-type-submit&gt;submit&lt;/a&gt;&lt;/code&gt;&quot;;
           &quot;&lt;code title=attr-button-type-reset&gt;&lt;a href=#attr-button-type-reset&gt;reset&lt;/a&gt;&lt;/code&gt;&quot;;
-          &quot;&lt;code title=attr-button-type-button&gt;&lt;a href=#attr-button-type-button&gt;button&lt;/a&gt;&lt;/code&gt;&quot;
+          &quot;&lt;code title=attr-button-type-button&gt;&lt;a href=#attr-button-type-button&gt;button&lt;/a&gt;&lt;/code&gt;&quot;;
+          &quot;&lt;code title=attr-button-type-menu&gt;&lt;a href=#attr-button-type-menu&gt;menu&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
-     &lt;td&gt; &lt;code title=attr-command-type&gt;&lt;a href=#attr-command-type&gt;command&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code title=attr-menuitem-type&gt;&lt;a href=#attr-menuitem-type&gt;menuitem&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Type of command
-     &lt;td&gt; &quot;&lt;code title=attr-command-type-keyword-command&gt;&lt;a href=#attr-command-type-keyword-command&gt;command&lt;/a&gt;&lt;/code&gt;&quot;;
-          &quot;&lt;code title=attr-command-type-keyword-checkbox&gt;&lt;a href=#attr-command-type-keyword-checkbox&gt;checkbox&lt;/a&gt;&lt;/code&gt;&quot;;
-          &quot;&lt;code title=attr-command-type-keyword-radio&gt;&lt;a href=#attr-command-type-keyword-radio&gt;radio&lt;/a&gt;&lt;/code&gt;&quot;
+     &lt;td&gt; &quot;&lt;code title=attr-menuitem-type-keyword-command&gt;&lt;a href=#attr-menuitem-type-keyword-command&gt;command&lt;/a&gt;&lt;/code&gt;&quot;;
+          &quot;&lt;code title=attr-menuitem-type-keyword-checkbox&gt;&lt;a href=#attr-menuitem-type-keyword-checkbox&gt;checkbox&lt;/a&gt;&lt;/code&gt;&quot;;
+          &quot;&lt;code title=attr-menuitem-type-keyword-radio&gt;&lt;a href=#attr-menuitem-type-keyword-radio&gt;radio&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;embed&lt;/a&gt;&lt;/code&gt;;
           &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;object&lt;/a&gt;&lt;/code&gt;;
@@ -103253,7 +103149,7 @@
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;menu&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Type of menu
-     &lt;td&gt; &quot;&lt;code title=&quot;context menu state&quot;&gt;&lt;a href=#context-menu-state&gt;context&lt;/a&gt;&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;&lt;a href=#toolbar-state&gt;toolbar&lt;/a&gt;&lt;/code&gt;&quot;
+     &lt;td&gt; &quot;&lt;code title=&quot;popup menu state&quot;&gt;&lt;a href=#popup-menu-state&gt;popup&lt;/a&gt;&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;&lt;a href=#toolbar-state&gt;toolbar&lt;/a&gt;&lt;/code&gt;&quot;
     &lt;tr&gt;&lt;th&gt; &lt;code title=&quot;&quot;&gt;typemustmatch&lt;/code&gt;
      &lt;td&gt; &lt;code title=attr-object-typemustmatch&gt;&lt;a href=#attr-object-typemustmatch&gt;object&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; Whether the &lt;code title=attr-object-type&gt;&lt;a href=#attr-object-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and the &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; value need to match for the resource to be used
@@ -103789,8 +103685,8 @@
     &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-colgroup-element&gt;colgroup&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; &lt;code&gt;&lt;a href=#htmltablecolelement&gt;HTMLTableColElement&lt;/a&gt;&lt;/code&gt; : &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
 
-    &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-command-element&gt;command&lt;/a&gt;&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;&lt;a href=#htmlcommandelement&gt;HTMLCommandElement&lt;/a&gt;&lt;/code&gt; : &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;
+     &lt;td&gt; &lt;code&gt;&lt;a href=#htmlmenuitemelement&gt;HTMLMenuItemElement&lt;/a&gt;&lt;/code&gt; : &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
 
     &lt;tr&gt;&lt;td&gt; &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt;
      &lt;td&gt; &lt;code&gt;&lt;a href=#htmldataelement&gt;HTMLDataElement&lt;/a&gt;&lt;/code&gt; : &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
@@ -104098,7 +103994,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlbodyelement&gt;HTMLBodyElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlbuttonelement&gt;HTMLButtonElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#htmlcommandelement&gt;HTMLCommandElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmldlistelement&gt;HTMLDListElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmldataelement&gt;HTMLDataElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmldatalistelement&gt;HTMLDataListElement&lt;/a&gt;&lt;/code&gt;
@@ -104130,6 +104025,7 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmarqueeelement&gt;HTMLMarqueeElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmediaelement&gt;HTMLMediaElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmenuelement&gt;HTMLMenuElement&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmenuitemelement&gt;HTMLMenuItemElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmetaelement&gt;HTMLMetaElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmeterelement&gt;HTMLMeterElement&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#htmlmodelement&gt;HTMLModElement&lt;/a&gt;&lt;/code&gt;

Modified: source
===================================================================
--- source	2012-12-28 02:06:14 UTC (rev 7601)
+++ source	2012-12-29 01:23:20 UTC (rev 7602)
@@ -12123,7 +12123,6 @@
   &lt;!-- when updating this also update the category index --&gt;
   &lt;ul class=&quot;brief category-list&quot;&gt;
    &lt;li&gt;&lt;code&gt;base&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;command&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;link&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;meta&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;noscript&lt;/code&gt;&lt;/li&gt;
@@ -12188,7 +12187,6 @@
    &lt;li&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;cite&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;code&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;command&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;data&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;datalist&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;del&lt;/code&gt;&lt;/li&gt;
@@ -12324,7 +12322,6 @@
    &lt;li&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;cite&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;code&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;command&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;data&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;datalist&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;del&lt;/code&gt;&lt;/li&gt;
@@ -12472,7 +12469,6 @@
    &lt;li&gt;&lt;code&gt;input&lt;/code&gt; (if the &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;span title=&quot;attr-input-type-hidden&quot;&gt;Hidden&lt;/span&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;keygen&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;label&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;menu&lt;/code&gt; (if the &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;object&lt;/code&gt; (if the &lt;code title=&quot;attr-hyperlink-usemap&quot;&gt;usemap&lt;/code&gt; attribute is present)&lt;!-- see also comment in &lt;object&gt; section --&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;select&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;textarea&lt;/code&gt;&lt;/li&gt;
@@ -12688,7 +12684,7 @@
    &lt;li&gt;&lt;code&gt;map&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;mark&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;math&lt;/code&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;code&gt;menu&lt;/code&gt; (if the &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state or the &lt;span title=&quot;list state&quot;&gt;list&lt;/span&gt; state)&lt;/li&gt;
+   &lt;li&gt;&lt;code&gt;menu&lt;/code&gt; (if the &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state)&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;meter&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;nav&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;object&lt;/code&gt;&lt;/li&gt;
@@ -13334,18 +13330,10 @@
      &lt;td&gt;&lt;code title=&quot;attr-aria-role-link&quot;&gt;link&lt;/code&gt; role
 
     &lt;tr&gt;
-     &lt;td&gt;&lt;code&gt;menu&lt;/code&gt; element with a &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;context menu state&quot;&gt;context menu&lt;/span&gt; state
+     &lt;td&gt;&lt;code&gt;menu&lt;/code&gt; element with a &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state
      &lt;td&gt;&lt;span title=&quot;concept-role-none&quot;&gt;No role&lt;/span&gt;
 
     &lt;tr&gt;
-     &lt;td&gt;&lt;code&gt;menu&lt;/code&gt; element with a &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;list state&quot;&gt;list&lt;/span&gt; state
-     &lt;td&gt;&lt;code title=&quot;attr-aria-role-menu&quot;&gt;menu&lt;/code&gt; role
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;code&gt;menu&lt;/code&gt; element with a &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state
-     &lt;td&gt;&lt;code title=&quot;attr-aria-role-toolbar&quot;&gt;toolbar&lt;/code&gt; role
-
-    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;meta&lt;/code&gt; element
      &lt;td&gt;&lt;span title=&quot;concept-role-none&quot;&gt;No role&lt;/span&gt;
 
@@ -13418,18 +13406,6 @@
      &lt;td&gt;&lt;span title=&quot;concept-role-none&quot;&gt;No role&lt;/span&gt;
 
     &lt;tr&gt;
-     &lt;td&gt;An element that &lt;span title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;, whose &lt;span title=&quot;command-facet-type&quot;&gt;Type&lt;/span&gt; facet is &quot;checkbox&quot;, and that is a descendant of a &lt;code&gt;menu&lt;/code&gt; element whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;list state&quot;&gt;list&lt;/span&gt; state
-     &lt;td&gt;&lt;code title=&quot;attr-aria-role-menuitemcheckbox&quot;&gt;menuitemcheckbox&lt;/code&gt; role, with the &lt;code title=&quot;attr-aria-checked&quot;&gt;aria-checked&lt;/code&gt; state set to &quot;true&quot; if the command's &lt;span title=&quot;command-facet-checkedstate&quot;&gt;Checked State&lt;/span&gt; facet is true, and &quot;false&quot; otherwise
-
-    &lt;tr&gt;
-     &lt;td&gt;An element that &lt;span title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;, whose &lt;span title=&quot;command-facet-type&quot;&gt;Type&lt;/span&gt; facet is &quot;command&quot;, and that is a descendant of a &lt;code&gt;menu&lt;/code&gt; element whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;list state&quot;&gt;list&lt;/span&gt; state
-     &lt;td&gt;&lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt; role
-
-    &lt;tr&gt;
-     &lt;td&gt;An element that &lt;span title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;, whose &lt;span title=&quot;command-facet-type&quot;&gt;Type&lt;/span&gt; facet is &quot;radio&quot;, and that is a descendant of a &lt;code&gt;menu&lt;/code&gt; element whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;list state&quot;&gt;list&lt;/span&gt; state
-     &lt;td&gt;&lt;code title=&quot;attr-aria-role-menuitemradio&quot;&gt;menuitemradio&lt;/code&gt; role, with the &lt;code title=&quot;attr-aria-checked&quot;&gt;aria-checked&lt;/code&gt; state set to &quot;true&quot; if the command's &lt;span title=&quot;command-facet-checkedstate&quot;&gt;Checked State&lt;/span&gt; facet is true, and &quot;false&quot; otherwise
-
-    &lt;tr&gt;
      &lt;td&gt;Element that is &lt;span title=&quot;concept-fe-disabled&quot;&gt;disabled&lt;/span&gt;
      &lt;td&gt;The &lt;code title=&quot;attr-aria-disabled&quot;&gt;aria-disabled&lt;/code&gt; state set to &quot;true&quot;
 
@@ -13472,7 +13448,7 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;a&lt;/code&gt; element that creates a &lt;span&gt;hyperlink&lt;/span&gt;
      &lt;td&gt;&lt;code title=&quot;attr-aria-role-link&quot;&gt;link&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-link&quot;&gt;link&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-checkbox&quot;&gt;checkbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitemcheckbox&quot;&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-menuitemradio&quot;&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-tab&quot;&gt;tab&lt;/code&gt;, or &lt;code title=&quot;attr-aria-role-treeitem&quot;&gt;treeitem&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-link&quot;&gt;link&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-tab&quot;&gt;tab&lt;/code&gt;, or &lt;code title=&quot;attr-aria-role-treeitem&quot;&gt;treeitem&lt;/code&gt;
 
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;address&lt;/code&gt; element
@@ -13497,7 +13473,7 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;button&lt;/code&gt; element
      &lt;td&gt;&lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-link&quot;&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitemcheckbox&quot;&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-menuitemradio&quot;&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-radio&quot;&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;details&lt;/code&gt; element
@@ -13584,7 +13560,7 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;input&lt;/code&gt; element with a &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;attr-input-type-button&quot;&gt;Button&lt;/span&gt; state
      &lt;td&gt;&lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-link&quot;&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitemcheckbox&quot;&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-menuitemradio&quot;&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-radio&quot;&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;input&lt;/code&gt; element with a &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;attr-input-type-checkbox&quot;&gt;Checkbox&lt;/span&gt; state
@@ -13594,7 +13570,7 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;input&lt;/code&gt; element with a &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;attr-input-type-image&quot;&gt;Image Button&lt;/span&gt; state
      &lt;td&gt;&lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-link&quot;&gt;link&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitemcheckbox&quot;&gt;menuitemcheckbox&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-menuitemradio&quot;&gt;menuitemradio&lt;/code&gt;&lt;!--!--&gt;, &lt;code title=&quot;attr-aria-role-radio&quot;&gt;radio&lt;/code&gt;&lt;!--!--&gt;
+     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-button&quot;&gt;button&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitem&quot;&gt;menuitem&lt;/code&gt;
 
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;input&lt;/code&gt; element with a &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;attr-input-type-radio&quot;&gt;Radio Button&lt;/span&gt; state
@@ -13607,6 +13583,11 @@
      &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-listitem&quot;&gt;listitem&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitemcheckbox&quot;&gt;menuitemcheckbox&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menuitemradio&quot;&gt;menuitemradio&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-option&quot;&gt;option&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-tab&quot;&gt;tab&lt;/code&gt;, or &lt;code title=&quot;attr-aria-role-treeitem&quot;&gt;treeitem&lt;/code&gt;
 
     &lt;tr&gt;
+     &lt;td&gt;&lt;code&gt;menu&lt;/code&gt; element with a &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state
+     &lt;td&gt;&lt;code title=&quot;attr-aria-role-toolbar&quot;&gt;toolbar&lt;/code&gt; role
+     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-directory&quot;&gt;directory&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-list&quot;&gt;list&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-listbox&quot;&gt;listbox&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menu&quot;&gt;menu&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menubar&quot;&gt;menubar&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-tablist&quot;&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, or &lt;code title=&quot;attr-aria-role-tree&quot;&gt;tree&lt;/code&gt;
+
+    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;object&lt;/code&gt; element
      &lt;td&gt;&lt;span title=&quot;concept-role-none&quot;&gt;No role&lt;/span&gt;
      &lt;td&gt;If specified, role must be either &lt;code title=&quot;attr-aria-role-application&quot;&gt;application&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-document&quot;&gt;document&lt;/code&gt;, or &lt;code title=&quot;attr-aria-role-img&quot;&gt;img&lt;/code&gt;
@@ -13614,7 +13595,7 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;ol&lt;/code&gt; element
      &lt;td&gt;&lt;code title=&quot;attr-aria-role-list&quot;&gt;list&lt;/code&gt; role
-     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-directory&quot;&gt;directory&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-list&quot;&gt;list&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-listbox&quot;&gt;listbox&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menu&quot;&gt;menu&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menubar&quot;&gt;menubar&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-tablist&quot;&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-tree&quot;&gt;tree&lt;/code&gt;
+     &lt;td&gt;Role must be either &lt;code title=&quot;attr-aria-role-directory&quot;&gt;directory&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-list&quot;&gt;list&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-listbox&quot;&gt;listbox&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menu&quot;&gt;menu&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-menubar&quot;&gt;menubar&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-tablist&quot;&gt;tablist&lt;/code&gt;, &lt;code title=&quot;attr-aria-role-toolbar &quot;&gt;toolbar&lt;/code&gt;, or &lt;code title=&quot;attr-aria-role-tree&quot;&gt;tree&lt;/code&gt;
 
     &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;output&lt;/code&gt; element
@@ -20928,7 +20909,7 @@
    &lt;dt&gt;&lt;span title=&quot;element-dfn-contexts&quot;&gt;Contexts in which this element can be used&lt;/span&gt;:&lt;/dt&gt;
    &lt;dd&gt;Inside &lt;code&gt;ol&lt;/code&gt; elements.&lt;/dd&gt;
    &lt;dd&gt;Inside &lt;code&gt;ul&lt;/code&gt; elements.&lt;/dd&gt;
-   &lt;dd&gt;Inside &lt;code&gt;menu&lt;/code&gt; elements.&lt;/dd&gt;
+   &lt;dd&gt;Inside &lt;code&gt;menu&lt;/code&gt; elements whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-content-model&quot;&gt;Content model&lt;/span&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Flow content&lt;/span&gt;.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-attributes&quot;&gt;Content attributes&lt;/span&gt;:&lt;/dt&gt;
@@ -21018,14 +20999,6 @@
 &lt;/figure&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;p class=&quot;note&quot;&gt;If the &lt;code&gt;li&lt;/code&gt; element is the child of a
-  &lt;code&gt;menu&lt;/code&gt; element and itself has a child that defines a
-  &lt;span title=&quot;concept-command&quot;&gt;command&lt;/span&gt;, then the
-  &lt;code&gt;li&lt;/code&gt; element will match the &lt;code
-  title=&quot;selector-enabled&quot;&gt;:enabled&lt;/code&gt; and &lt;code
-  title=&quot;selector-disabled&quot;&gt;:disabled&lt;/code&gt; pseudo-classes in the
-  same way as the first such child element does.&lt;/p&gt;
-
   &lt;p class=&quot;note&quot;&gt;While it is conforming to include heading elements
   (e.g. &lt;code&gt;h1&lt;/code&gt;) inside &lt;code&gt;li&lt;/code&gt; elements, it likely
   does not convey the semantics that the author intended. A heading
@@ -60643,6 +60616,7 @@
    &lt;dd&gt;&lt;code title=&quot;attr-fe-name&quot;&gt;name&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-button-type&quot;&gt;type&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-button-value&quot;&gt;value&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-button-menu&quot;&gt;menu&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-dom&quot;&gt;DOM interface&lt;/span&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
 &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLButtonElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
@@ -60657,6 +60631,7 @@
            attribute DOMString &lt;span title=&quot;dom-fe-name&quot;&gt;name&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-button-type&quot;&gt;type&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-button-value&quot;&gt;value&lt;/span&gt;;
+           attribute &lt;span&gt;HTMLMenuElement&lt;/span&gt;? &lt;span title=&quot;dom-button-menu&quot;&gt;menu&lt;/span&gt;;
 
   readonly attribute boolean &lt;span title=&quot;dom-cva-willValidate&quot;&gt;willValidate&lt;/span&gt;;
   readonly attribute &lt;span&gt;ValidityState&lt;/span&gt; &lt;span title=&quot;dom-cva-validity&quot;&gt;validity&lt;/span&gt;;
@@ -60699,6 +60674,10 @@
      &lt;td&gt;&lt;dfn title=&quot;attr-button-type-button&quot;&gt;&lt;code&gt;button&lt;/code&gt;&lt;/dfn&gt;
      &lt;td&gt;&lt;span title=&quot;attr-button-type-button-state&quot;&gt;Button&lt;/span&gt;
      &lt;td&gt;Does nothing.
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;attr-button-type-menu&quot;&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;span title=&quot;attr-button-type-menu-state&quot;&gt;Menu&lt;/span&gt;
+     &lt;td&gt;Shows a menu.
   &lt;/table&gt;
 
   &lt;p&gt;The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;span
@@ -60714,8 +60693,9 @@
 
   &lt;p&gt;&lt;strong&gt;Constraint validation&lt;/strong&gt;: If the &lt;code
   title=&quot;attr-button-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-  title=&quot;attr-button-type-reset-state&quot;&gt;Reset Button&lt;/span&gt; state or
+  title=&quot;attr-button-type-reset-state&quot;&gt;Reset Button&lt;/span&gt; state,
   the &lt;span title=&quot;attr-button-type-button-state&quot;&gt;Button&lt;/span&gt; state,
+  or the &lt;span title=&quot;attr-button-type-menu-state&quot;&gt;Menu&lt;/span&gt; state,
   the element is &lt;span&gt;barred from constraint validation&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;When a &lt;code&gt;button&lt;/code&gt; element is not &lt;span
@@ -60742,6 +60722,27 @@
 
    &lt;dd&gt;&lt;p&gt;Do nothing.&lt;/p&gt;&lt;/dd&gt;
 
+   &lt;dt&gt; &lt;dfn title=&quot;attr-button-type-menu-state&quot;&gt;Menu&lt;/dfn&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The element must follow these steps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the element's &lt;span&gt;designated pop-up menu&lt;/span&gt;, if
+     any. If there isn't one, then abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Fire a simple event&lt;/span&gt; named &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt; that is
+     cancelable at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;. &lt;!-- v2: include modifier key information --&gt;&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;span title=&quot;construct and show a menu&quot;&gt;construct and
+     show&lt;/span&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;
 
   &lt;/div&gt;
@@ -60787,12 +60788,32 @@
   form submission if the button itself was used to initiate the form
   submission.&lt;/p&gt;
 
+  &lt;hr&gt;
+
+  &lt;p&gt;If the element's &lt;code title=&quot;attr-button-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
+  title=&quot;attr-button-type-menu-state&quot;&gt;Menu&lt;/span&gt; state, the &lt;dfn
+  title=&quot;attr-button-menu&quot;&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; attribute must be specified to give the element's
+  menu. The value must be the &lt;span title=&quot;concept-id&quot;&gt;ID&lt;/span&gt; of a &lt;code&gt;menu&lt;/code&gt; element in
+  the same &lt;span&gt;home subtree&lt;/span&gt; whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in
+  the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state. The attribute must not be specified if
+  the element's &lt;code title=&quot;attr-button-type&quot;&gt;type&lt;/code&gt; attribute is not in the &lt;span
+  title=&quot;attr-button-type-menu-state&quot;&gt;Menu&lt;/span&gt; state.&lt;/p&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-button-value&quot;&gt;&lt;code&gt;value&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute must &lt;span&gt;reflect&lt;/span&gt; the content attribute of the
-  same name.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;button&lt;/code&gt; element's &lt;dfn&gt;designated pop-up menu&lt;/dfn&gt; is the first element in the
+  &lt;code&gt;button&lt;/code&gt;'s &lt;span&gt;home subtree&lt;/span&gt; whose ID is that given by the &lt;code&gt;button&lt;/code&gt;
+  element's &lt;code title=&quot;attr-button-menu&quot;&gt;menu&lt;/code&gt; attribute, if there is such an element and
+  its &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu
+  state&quot;&gt;popup menu&lt;/span&gt; state; otherwise, the element has no &lt;span&gt;designated pop-up
+  menu&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-button-value&quot;&gt;&lt;code&gt;value&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
+  title=&quot;dom-button-menu&quot;&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;span&gt;reflect&lt;/span&gt; the
+  content attributes of the same name.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-button-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must &lt;span&gt;reflect&lt;/span&gt; the content attribute of the
   same name, &lt;span&gt;limited to only known values&lt;/span&gt;.&lt;/p&gt;
@@ -67797,614 +67818,564 @@
 
 
 
+  &lt;h4 id=&quot;the-menu-element&quot;&gt;The &lt;dfn id=&quot;menus&quot;&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
-  &lt;h4 id=&quot;the-command-element&quot;&gt;The &lt;dfn id=&quot;the-command&quot;&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
-
   &lt;dl class=&quot;element&quot;&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-categories&quot;&gt;Categories&lt;/span&gt;:&lt;/dt&gt;
-   &lt;dd&gt;&lt;span&gt;Metadata content&lt;/span&gt;.&lt;/dd&gt;
    &lt;dd&gt;&lt;span&gt;Flow content&lt;/span&gt;.&lt;/dd&gt;
-   &lt;dd&gt;&lt;span&gt;Phrasing content&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state: &lt;span&gt;Palpable content&lt;/span&gt;.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-contexts&quot;&gt;Contexts in which this element can be used&lt;/span&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Where &lt;span&gt;metadata content&lt;/span&gt; is expected.&lt;/dd&gt;
-   &lt;dd&gt;Where &lt;span&gt;phrasing content&lt;/span&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;Where &lt;span&gt;flow content&lt;/span&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state: as the child of a &lt;code&gt;menu&lt;/code&gt; element whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-content-model&quot;&gt;Content model&lt;/span&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Empty.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state: either zero or more &lt;code&gt;li&lt;/code&gt; elements, or &lt;span&gt;flow content&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;If the element's &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state: in any order, zero or more &lt;code&gt;menuitem&lt;/code&gt; elements, zero or more &lt;code&gt;hr&lt;/code&gt; elements, and zero or more &lt;code&gt;menu&lt;/code&gt; elements whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attributes are in the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-attributes&quot;&gt;Content attributes&lt;/span&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Global attributes&lt;/span&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-command-label&quot;&gt;label&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-command-icon&quot;&gt;icon&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-command-radiogroup&quot;&gt;radiogroup&lt;/code&gt;&lt;/dd&gt;
-   &lt;!--&lt;dd&gt;&lt;code title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt;&lt;/dd&gt;--&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;Also, the &lt;code title=&quot;attr-command-title&quot;&gt;title&lt;/code&gt; attribute has special semantics on this element.&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-dom&quot;&gt;DOM interface&lt;/span&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-&lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLCommandElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
-           attribute DOMString &lt;span title=&quot;dom-command-type&quot;&gt;type&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-command-label&quot;&gt;label&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-command-icon&quot;&gt;icon&lt;/span&gt;;
-           attribute boolean &lt;span title=&quot;dom-command-disabled&quot;&gt;disabled&lt;/span&gt;;
-           attribute boolean &lt;span title=&quot;dom-command-checked&quot;&gt;checked&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-command-radiogroup&quot;&gt;radiogroup&lt;/span&gt;;&lt;!--
-           attribute boolean &lt;span title=&quot;dom-command-default&quot;&gt;default&lt;/span&gt;;--&gt;
-  readonly attribute &lt;span&gt;HTMLElement&lt;/span&gt;? &lt;span title=&quot;dom-command-command&quot;&gt;command&lt;/span&gt;;
+&lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLMenuElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
+           attribute DOMString &lt;span title=&quot;dom-menu-type&quot;&gt;type&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-menu-label&quot;&gt;label&lt;/span&gt;;
 };&lt;/pre&gt;
-   &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;
 
-  &lt;p&gt;The &lt;code&gt;command&lt;/code&gt; element represents a command that the user
-  can invoke.&lt;/p&gt;
+  &lt;p&gt;The &lt;code&gt;menu&lt;/code&gt; element represents a list of commands.&lt;/p&gt;
 
-  &lt;p&gt;A command can be explicitly part of a context menu or toolbar,
-  using the &lt;code&gt;menu&lt;/code&gt; element. It can also be put anywhere
-  else on a page, either just to define a keyboard shortcut, or to
-  define a command that is then referenced from other
-  &lt;code&gt;command&lt;/code&gt; elements.&lt;/p&gt;
+  &lt;!-- v2 idea: &lt;menu&gt; should get an icon, like &lt;command&gt; --&gt;
 
-  &lt;p&gt;A &lt;code&gt;command&lt;/code&gt; element that uses the
-  &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-label&quot;&gt;label&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-icon&quot;&gt;icon&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-radiogroup&quot;&gt;radiogroup&lt;/code&gt;,
-  &lt;!--&lt;code title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt;,--&gt; and
-  &lt;code title=&quot;attr-title&quot;&gt;title&lt;/code&gt; attributes defines a new
-  command. A &lt;code&gt;command&lt;/code&gt; element that uses the &lt;code
-  title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt; &lt;em&gt;attribute&lt;/em&gt;
-  defines a command by reference to another one. This allows authors
-  to define a command once, and set its state (e.g. whether it is
-  active or disabled) in one place, and have all references to that
-  command in the user interface change at the same time.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menu-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute is an &lt;span&gt;enumerated
+  attribute&lt;/span&gt; indicating the kind of menu being declared. The attribute has two states. The
+  &lt;code title=&quot;attr-menu-type-popup&quot;&gt;popup&lt;/code&gt; keyword maps to the &lt;dfn title=&quot;popup menu
+  state&quot;&gt;popup menu&lt;/dfn&gt; state, in which the element is declaring a context menu or the menu for a
+  &lt;span title=&quot;attr-button-type-menu-state&quot;&gt;menu button&lt;/span&gt;. The &lt;code
+  title=&quot;attr-menu-type-toolbar&quot;&gt;toolbar&lt;/code&gt; keyword maps to the &lt;dfn title=&quot;toolbar
+  state&quot;&gt;toolbar&lt;/dfn&gt; state, in which the element is declaring a toolbar. The attribute may also be
+  omitted. The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt;
+  state if the parent element is a &lt;code&gt;menu&lt;/code&gt; element whose &lt;code
+  title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/span&gt; state; otherwise, it is the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state.&lt;/p&gt;
 
-  &lt;hr&gt;
+  &lt;p&gt;If a &lt;code&gt;menu&lt;/code&gt; element's &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the
+  &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state, then the element &lt;span&gt;represents&lt;/span&gt;
+  the commands of a popup menu, and the user can only examine and interact with the commands if that
+  popup menu is activated through some other element, either via the &lt;code
+  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute or the &lt;code&gt;button&lt;/code&gt; element's &lt;code
+  title=&quot;attr-button-menu&quot;&gt;menu&lt;/code&gt; attribute.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-command-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
-  attribute indicates the kind of command: either a normal command
-  with an associated action, or a state or option that can be toggled,
-  or a selection of one item from a list of items.&lt;/p&gt;
+  &lt;p&gt;If a &lt;code&gt;menu&lt;/code&gt; element's &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the
+  &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state, then the element &lt;span&gt;represents&lt;/span&gt; a
+  toolbar consisting of its contents, in the form of either an unordered list of items (represented
+  by &lt;code&gt;li&lt;/code&gt; elements), each of which represents a command that the user can perform or
+  activate, or, if the element has no &lt;code&gt;li&lt;/code&gt; element children, &lt;span&gt;flow content&lt;/span&gt;
+  describing available commands.&lt;/p&gt;
 
-  &lt;p&gt;The attribute is an &lt;span&gt;enumerated attribute&lt;/span&gt; with three
-  keywords and states. The &quot;&lt;dfn
-  title=&quot;attr-command-type-keyword-command&quot;&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;span
-  title=&quot;attr-command-type-state-command&quot;&gt;Command&lt;/span&gt; state, the
-  &quot;&lt;dfn
-  title=&quot;attr-command-type-keyword-checkbox&quot;&gt;&lt;code&gt;checkbox&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;span
-  title=&quot;attr-command-type-state-checkbox&quot;&gt;Checkbox&lt;/span&gt; state, and
-  the &quot;&lt;dfn
-  title=&quot;attr-command-type-keyword-radio&quot;&gt;&lt;code&gt;radio&lt;/code&gt;&lt;/dfn&gt;&quot;
-  keyword maps to the &lt;span
-  title=&quot;attr-command-type-state-radio&quot;&gt;Radio&lt;/span&gt; state. The
-  &lt;i&gt;missing value default&lt;/i&gt; is the &lt;span
-  title=&quot;attr-command-type-state-command&quot;&gt;Command&lt;/span&gt; state.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menu-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; attribute gives the label of the
+  menu. It is used by user agents to display nested menus in the UI: a context menu containing
+  another menu would use the nested menu's &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute for
+  the submenu's menu label. The &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute must only be
+  specified on &lt;code&gt;menu&lt;/code&gt; elements whose parent element is a &lt;code&gt;menu&lt;/code&gt; element whose
+  &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/span&gt; state.&lt;/p&gt;
 
-  &lt;dl&gt;
+  &lt;div class=&quot;impl&quot;&gt;
 
-   &lt;dt&gt;The &lt;dfn title=&quot;attr-command-type-state-command&quot;&gt;Command&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;hr&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;span&gt;represents&lt;/span&gt; a normal command with an associated action.&lt;/p&gt;&lt;/dd&gt;
+  &lt;p&gt;A &lt;code&gt;menu&lt;/code&gt; is a &lt;dfn&gt;currently relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/dfn&gt; if it is the
+  child of a &lt;span&gt;currently relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/span&gt;, or if it is the
+  &lt;span&gt;designated pop-up menu&lt;/span&gt; of a &lt;code&gt;button&lt;/code&gt; element that is not
+  &lt;span&gt;inert&lt;/span&gt;, does not have a &lt;code title=&quot;attr-hidden&quot;&gt;hidden&lt;/code&gt; attribute, and is not
+  the descendant of an element with a &lt;code title=&quot;attr-hidden&quot;&gt;hidden&lt;/code&gt; attribute.&lt;/p&gt;
 
-   &lt;dt&gt;The &lt;dfn title=&quot;attr-command-type-state-checkbox&quot;&gt;Checkbox&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;hr&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;span&gt;represents&lt;/span&gt; a state or option that can be toggled.&lt;/p&gt;&lt;/dd&gt;
+  &lt;p&gt;A pop-up menu consists of a list of zero or more menu items, which can be any of:&lt;/p&gt;
 
-   &lt;dt&gt;The &lt;dfn title=&quot;attr-command-type-state-radio&quot;&gt;Radio&lt;/dfn&gt; state&lt;/dt&gt;
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;&lt;span title=&quot;concept-command&quot;&gt;Commands&lt;/span&gt;, which can be marked as default commands (&lt;code&gt;menuitem&lt;/code&gt;)&lt;/li&gt;
+   &lt;li&gt;Separators (&lt;code&gt;hr&lt;/code&gt;)&lt;/li&gt;
+   &lt;li&gt;Other menus, which allows the list to be nested (&lt;code&gt;menu&lt;/code&gt;)&lt;/li&gt;
+  &lt;/ul&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element &lt;span&gt;represents&lt;/span&gt; a selection of one item from a list of items.&lt;/p&gt;&lt;/dd&gt;
+  &lt;p&gt;To &lt;dfn&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;menu&lt;/code&gt; element, the user
+  agent must run the following steps:&lt;/p&gt;
 
-  &lt;/dl&gt;
+  &lt;ol&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-command-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the name of the command, as shown to the user. The
-  &lt;code title=&quot;attr-command-label&quot;&gt;label&lt;/code&gt; attribute must be
-  specified and must have a value that is not the empty string.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Let the menu be an empty list of the type described above.&lt;/p&gt;&lt;/li&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-command-title&quot;&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives a hint describing the command, which might be shown
-  to the user to help him.&lt;/p&gt;
+   &lt;li&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-command-icon&quot;&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives a picture that represents the command. If the
-  attribute is specified, the attribute's value must contain a
-  &lt;span&gt;valid non-empty URL potentially surrounded by
-  spaces&lt;/span&gt;. &lt;span class=&quot;impl&quot;&gt;To obtain the &lt;span&gt;absolute
-  URL&lt;/span&gt; of the icon when the attribute's value is not the empty
-  string, the attribute's value must be &lt;span title=&quot;resolve a
-  url&quot;&gt;resolved&lt;/span&gt; relative to the element. When the attribute is
-  absent, or its value is the empty string, or &lt;span title=&quot;resolve a
-  url&quot;&gt;resolving&lt;/span&gt; its value fails, there is no icon.&lt;/span&gt;&lt;/p&gt;
-  &lt;!-- this is affected by the base URL being changed, so users of
-  this should cache the image once they've fetched it once, at least
-  until the relative url changes again --&gt;
+    &lt;p&gt;Run the &lt;span&gt;menu builder&lt;/span&gt; steps for the &lt;code&gt;menu&lt;/code&gt; element using the menu
+    prepared in the previous list as the output.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;attr-command-disabled&quot;&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt; attribute
-  is a &lt;span&gt;boolean attribute&lt;/span&gt; that, if present, indicates that
-  the command is not available in the current state.&lt;/p&gt;
+    &lt;p&gt;The &lt;dfn&gt;menu builder&lt;/dfn&gt; steps for a &lt;code&gt;menu&lt;/code&gt; element using a specific menu as
+    output are as follows: For each child node of the &lt;code&gt;menu&lt;/code&gt; in &lt;span&gt;tree order&lt;/span&gt;,
+    run the appropriate steps from the following list:&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;The distinction between &lt;code
-  title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt; and &lt;code
-  title=&quot;attr-hidden&quot;&gt;hidden&lt;/code&gt; is subtle. A command would be
-  disabled if, in the same context, it could be enabled if only
-  certain aspects of the situation were changed. A command would be
-  marked as hidden if, in that situation, the command will never be
-  enabled. For example, in the context menu for a water faucet, the
-  command &quot;open&quot; might be disabled if the faucet is already open, but
-  the command &quot;eat&quot; would be marked hidden since the faucet could
-  never be eaten.&lt;/p&gt;
+    &lt;dl class=&quot;switch&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-command-checked&quot;&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;
-  attribute is a &lt;span&gt;boolean attribute&lt;/span&gt; that, if present,
-  indicates that the command is selected. The attribute must be
-  omitted unless the &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt;
-  attribute is in either the &lt;span
-  title=&quot;attr-command-type-state-checkbox&quot;&gt;Checkbox&lt;/span&gt; state or
-  the &lt;span title=&quot;attr-command-type-state-radio&quot;&gt;Radio&lt;/span&gt;
-  state.&lt;/p&gt;
+     &lt;dt&gt;If the child is a &lt;code&gt;menuitem&lt;/code&gt; element that &lt;span title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;&lt;/dt&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;attr-command-radiogroup&quot;&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the name of the group of commands that will be
-  toggled when the command itself is toggled, for commands whose &lt;code
-  title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute has the value &quot;&lt;code
-  title=&quot;&quot;&gt;radio&lt;/code&gt;&quot;. The scope of the name is the child list of
-  the parent element. The attribute must be omitted unless the &lt;code
-  title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-  title=&quot;attr-command-type-state-radio&quot;&gt;Radio&lt;/span&gt; state.&lt;/p&gt;
+     &lt;dd&gt;Append the command to the menu, respecting its &lt;span title=&quot;concept-facet&quot;&gt;facets&lt;/span&gt;&lt;!--
+     we might need to be explicit about what this means for each facet, if testing shows this isn't
+     well-implemented. e.g.: If there's an Icon facet for the command, it should be &lt;span
+     title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;&lt;!- -FETCH- -&gt; (this would be http-origin privacy-sensitive), and
+     then that image should be associated with the command, such that each command only has its image
+     fetched once, to prevent changes to the base URL from having effects after the image has been
+     fetched once. (no need to resolve the Icon facet, it's an absolute URL) --&gt;. If the
+     &lt;code&gt;menuitem&lt;/code&gt; element has a &lt;code title=&quot;attr-menuitem-default&quot;&gt;default&lt;/code&gt; attribute,
+     mark the command as being a default command.&lt;/dd&gt;
 
-&lt;!--
-  &lt;p&gt;If the &lt;code&gt;command&lt;/code&gt; element is used when &lt;span
-  title=&quot;menu generation&quot;&gt;generating&lt;/span&gt; a &lt;span&gt;context
-  menu&lt;/span&gt;, then the &lt;dfn
-  title=&quot;attr-command-default&quot;&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt; attribute
-  indicates, if present, that the command is the one that would have
-  been invoked if the user had directly activated the menu's subject
-  instead of using its context menu. The &lt;code
-  title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute is a
-  &lt;span&gt;boolean attribute&lt;/span&gt;. The attribute must be omitted unless
-  the &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is in the
-  &lt;span title=&quot;attr-command-type-state-command&quot;&gt;Command&lt;/span&gt;
-  state.&lt;/p&gt;
 
-  &lt;div class=&quot;example&quot;&gt;
+     &lt;dt&gt;If the child is an &lt;code&gt;hr&lt;/code&gt; element&lt;/dt&gt;
 
-   ...an example that shows an element that, if double-clicked,
-   invokes an action, but that also has a context menu, showing the
-   various &lt;code&gt;command&lt;/code&gt; attributes off, and that has a default
-   command...
+     &lt;dd&gt;Append a separator to the menu.&lt;/dd&gt;
 
-  &lt;/div&gt;
---&gt;
 
-  &lt;hr&gt;
+     &lt;dt&gt;If the child is a &lt;code&gt;menu&lt;/code&gt; element with no &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute&lt;/dt&gt;
 
-  &lt;p&gt;If a &lt;code&gt;command&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; has a
-  &lt;dfn title=&quot;attr-command-command&quot;&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
-  attribute, and &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;span&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;, and there is an element in that
-  &lt;code&gt;Document&lt;/code&gt; whose &lt;span title=&quot;concept-id&quot;&gt;ID&lt;/span&gt; has a
-  value equal to the value of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt;'s &lt;code
-  title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt; attribute, and the first
-  such element in &lt;span&gt;tree order&lt;/span&gt;, hereafter &lt;var
-  title=&quot;&quot;&gt;master&lt;/var&gt;, itself &lt;span title=&quot;concept-command&quot;&gt;defines
-  a command&lt;/span&gt; and either is not a &lt;code&gt;command&lt;/code&gt; element or
-  does not itself have a &lt;code
-  title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt; attribute, then the
-  &lt;dfn&gt;master command&lt;/dfn&gt; of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;var
-  title=&quot;&quot;&gt;master&lt;/var&gt;.&lt;/p&gt;
+     &lt;dd&gt;Append a separator to the menu, then run the &lt;span&gt;menu builder&lt;/span&gt; steps using this
+     child &lt;code&gt;menu&lt;/code&gt; element for the same menu, then append another separator to the
+     menu.&lt;/dd&gt;
 
-  &lt;p&gt;An element with a
-  &lt;code title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt;
-  attribute must have a &lt;span&gt;master command&lt;/span&gt; and must not have any
-  &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-label&quot;&gt;label&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-icon&quot;&gt;icon&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt;,
-  &lt;code title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt;, or
-  &lt;code title=&quot;attr-command-radiogroup&quot;&gt;radiogroup&lt;/code&gt;
-  attributes.&lt;/p&gt;
 
-  &lt;hr&gt;
+     &lt;dt&gt;If the child is a &lt;code&gt;menu&lt;/code&gt; element with a &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute&lt;/dt&gt;
 
-  &lt;div class=&quot;impl&quot;&gt;
+     &lt;dd&gt;Create a new submenu as an empty list of the type described above, and construct it by
+     running the &lt;span&gt;menu builder&lt;/span&gt; steps for the child &lt;code&gt;menu&lt;/code&gt; element using the
+     new submenu as the output. Then, append the submenu to the menu, using the value of the child
+     &lt;code&gt;menu&lt;/code&gt; element's &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute as the label
+     of the submenu.&lt;/dd&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-command-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute must &lt;span&gt;reflect&lt;/span&gt; the content attribute of the
-  same name, &lt;span&gt;limited to only known values&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-command-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
-  title=&quot;dom-command-icon&quot;&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
-  title=&quot;dom-command-disabled&quot;&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
-  title=&quot;dom-command-checked&quot;&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn
-  title=&quot;dom-command-radiogroup&quot;&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;&lt;!--,
-  and &lt;dfn title=&quot;dom-command-default&quot;&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt;--&gt;
-  IDL attributes must &lt;span&gt;reflect&lt;/span&gt; the respective content
-  attributes of the same name.&lt;/p&gt;
+     &lt;dt&gt;Any other node&lt;/dt&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-command-command&quot;&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute must return the &lt;span&gt;master command&lt;/span&gt;, if any,
-  or null otherwise.&lt;/p&gt;
+     &lt;dd&gt;&lt;span&gt;Ignore&lt;/span&gt; the node.&lt;/dd&gt;
 
-  &lt;hr&gt;
-  
-  &lt;p&gt;If the element's &lt;span
-  title=&quot;command-facet-DisabledState&quot;&gt;Disabled State&lt;/span&gt; is false
-  (enabled) then the element's &lt;span&gt;activation behavior&lt;/span&gt;
-  depends on the element's &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt;
-  and &lt;code title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt; attributes, as
-  follows:&lt;/p&gt;
+    &lt;/dl&gt;
 
-  &lt;dl class=&quot;switch&quot;&gt;
+   &lt;/li&gt;
 
-   &lt;dt&gt;If the element has a &lt;span&gt;master command&lt;/span&gt; set by its
-   &lt;code title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt; attribute&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Remove any submenu with no label, or whose label is the empty string, in the menu or any submenus.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent must &lt;span&gt;run synthetic click activation
-   steps&lt;/span&gt; on the element's &lt;span&gt;master command&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
-   &lt;!-- we know it has a defined &lt;span&gt;activation behavior&lt;/span&gt; if
-   we get here --&gt;
+   &lt;li&gt;&lt;p&gt;Remove any menu item with no label, or whose label is the empty string, in the menu or any submenus.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Collapse all sequences of two or more adjacent separators in the menu or any submenus to a single separator.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;dt&gt;If the &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is
-   in the &lt;span
-   title=&quot;attr-command-type-state-checkbox&quot;&gt;Checkbox&lt;/span&gt; state&lt;/dt&gt;
+   &lt;li&gt;&lt;p&gt;Remove all separators at the start or end of the menu and any submenus.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;dd&gt;&lt;p&gt;If the element has a &lt;code
-   title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt; attribute, the UA must
-   remove that attribute. Otherwise, the UA must add a &lt;code
-   title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt; attribute, with the
-   literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/p&gt;&lt;/dd&gt;
+   &lt;li&gt;
 
+    &lt;p&gt;Display the menu to the user, and let the algorithm that invoked this one continue.&lt;/p&gt;
 
-   &lt;dt&gt;If the &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is
-   in the &lt;span
-   title=&quot;attr-command-type-state-radio&quot;&gt;Radio&lt;/span&gt; state&lt;/dt&gt;
+    &lt;p&gt;If the user selects a menu item that corresponds to an element that still represents a &lt;span
+    title=&quot;concept-command&quot;&gt;command&lt;/span&gt; when the user selects it, then the UA must invoke that
+    command's &lt;span title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt;.&lt;/p&gt;
 
-   &lt;dd&gt;&lt;p&gt;If the element has a parent, then the UA must walk the list
-   of child nodes of that parent element, and for each node that is a
-   &lt;code&gt;command&lt;/code&gt; element, if that element has a &lt;code
-   title=&quot;attr-command-radiogroup&quot;&gt;radiogroup&lt;/code&gt; attribute whose
-   value exactly matches the current element's (treating missing &lt;code
-   title=&quot;attr-command-radiogroup&quot;&gt;radiogroup&lt;/code&gt; attributes as if
-   they were the empty string), and has a &lt;code
-   title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt; attribute, must remove
-   that attribute.&lt;/p&gt;
+    &lt;p&gt;Pop-up menus must not, while being shown, reflect changes in the DOM. The menu is constructed
+    from the DOM before being shown, and is then immutable.&lt;/p&gt;
 
-   &lt;p&gt;Then, the element's &lt;code
-   title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt; attribute attribute
-   must be set to the literal value &lt;code
-   title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/p&gt;&lt;/dd&gt;
+   &lt;/li&gt;
 
+  &lt;/ol&gt;
 
-   &lt;dt&gt;Otherwise&lt;/dt&gt;
+  &lt;hr&gt;
 
-   &lt;dd&gt;&lt;p&gt;The element's &lt;span&gt;activation behavior&lt;/span&gt; is to do
-   nothing.&lt;/p&gt;&lt;/dd&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-menu-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
+  title=&quot;dom-menu-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;span&gt;reflect&lt;/span&gt; the
+  respective content attributes of the same name.&lt;/p&gt;
 
-  &lt;/dl&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Firing a synthetic &lt;code
-  title=&quot;event-click&quot;&gt;click&lt;/code&gt; event at the element does not cause
-  any of the actions described above to happen.&lt;/p&gt;
-
-  &lt;!-- v2COMMAND: Expose the Triggers facet again. --&gt;
-
-  &lt;p&gt;If the element's &lt;span
-  title=&quot;command-facet-DisabledState&quot;&gt;Disabled State&lt;/span&gt; is true
-  (disabled) then the element has no &lt;span&gt;activation
-  behavior&lt;/span&gt;.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;p class=&quot;note&quot;&gt;&lt;code&gt;command&lt;/code&gt; elements are not rendered
-  unless they &lt;span title=&quot;menu&quot;&gt;form part of a menu&lt;/span&gt;.&lt;/p&gt;
-
   &lt;div class=&quot;example&quot;&gt;
 
-   &lt;p&gt;Here is an example of a toolbar with three buttons that let the
-   user toggle between left, center, and right alignment. One could
-   imagine such a toolbar as part of a text editor. The toolbar also
-   has a separator followed by another button labeled &quot;Publish&quot;,
-   though that button is disabled.&lt;/p&gt;
+   &lt;p&gt;In this example, the &lt;code&gt;menu&lt;/code&gt; element is used to describe a toolbar with three menu
+   buttons on it, each of which has a dropdown menu with a series of options:&lt;/p&gt;
 
-   &lt;pre&gt;&lt;menu type=&quot;toolbar&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot; checked=&quot;checked&quot;
-          label=&quot;Left&quot; icon=&quot;icons/alL.png&quot; onclick=&quot;setAlign('left')&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
-          label=&quot;Center&quot; icon=&quot;icons/alC.png&quot; onclick=&quot;setAlign('center')&quot;&gt;
- &lt;command type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
-          label=&quot;Right&quot; icon=&quot;icons/alR.png&quot; onclick=&quot;setAlign('right')&quot;&gt;
- &lt;hr&gt;
- &lt;command type=&quot;command&quot; disabled
-          label=&quot;Publish&quot; icon=&quot;icons/pub.png&quot; onclick=&quot;publish()&quot;&gt;
+  &lt;pre&gt;&lt;menu&gt; &lt;!-- type=&quot;toolbar&quot; implied --&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;File&quot; menu=&quot;filemenu&quot;&gt;
+  &lt;menu id=&quot;filemenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;fnew()&quot; label=&quot;New...&quot;&gt;
+   &lt;menuitem onclick=&quot;fopen()&quot; label=&quot;Open...&quot;&gt;
+   &lt;menuitem onclick=&quot;fsave()&quot; label=&quot;Save&quot;&gt;
+   &lt;menuitem onclick=&quot;fsaveas()&quot; label=&quot;Save as...&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;Edit&quot; menu=&quot;editmenu&quot;&gt;
+  &lt;menu id=&quot;editmenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;ecopy()&quot; label=&quot;Copy&quot;&gt;
+   &lt;menuitem onclick=&quot;ecut()&quot; label=&quot;Cut&quot;&gt;
+   &lt;menuitem onclick=&quot;epaste()&quot; label=&quot;Paste&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
+ &lt;li&gt;
+  &lt;button type=menu value=&quot;Help&quot; menu=&quot;helpmenu&quot;&gt;
+  &lt;menu id=&quot;helpmenu&quot; type=&quot;popup&quot;&gt;
+   &lt;menuitem onclick=&quot;location='help.html'&quot; label=&quot;Help&quot;&gt;
+   &lt;menuitem onclick=&quot;location='about.html'&quot; label=&quot;About&quot;&gt;
+  &lt;/menu&gt;
+ &lt;/li&gt;
 &lt;/menu&gt;&lt;/pre&gt;
 
+   &lt;p&gt;In a supporting user agent, this might look like this (assuming the user has just activated the
+   second button):&lt;/p&gt;
+
+   &lt;p&gt;&lt;img src=&quot;images/sample-toolbar-1.png&quot; width=&quot;303&quot; height=&quot;101&quot; alt=&quot;A toolbar with three buttons, labeled 'File', 'Edit', and 'Help'; where if you select the 'Edit' button you get a drop-down menu with three more options, 'Copy', 'Cut', and 'Paste'.&quot;&gt;&lt;/p&gt;
+
   &lt;/div&gt;
 
 
 
-  &lt;h4 id=&quot;the-menu-element&quot;&gt;The &lt;dfn id=&quot;menus&quot;&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
+  &lt;h4 id=&quot;the-menuitem-element&quot;&gt;The &lt;dfn&gt;&lt;code&gt;menuitem&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=&quot;element&quot;&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-categories&quot;&gt;Categories&lt;/span&gt;:&lt;/dt&gt;
-   &lt;dd&gt;&lt;span&gt;Flow content&lt;/span&gt;.&lt;/dd&gt;
-   &lt;dd&gt;If the element's &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state: &lt;span&gt;Interactive content&lt;/span&gt;.&lt;/dd&gt;
-   &lt;dd&gt;If the element's &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state or the &lt;span title=&quot;list state&quot;&gt;list&lt;/span&gt; state: &lt;span&gt;Palpable content&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;None.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-contexts&quot;&gt;Contexts in which this element can be used&lt;/span&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Where &lt;span&gt;flow content&lt;/span&gt; is expected.&lt;/dd&gt;
+   &lt;dd&gt;As a child of a &lt;code&gt;menu&lt;/code&gt; element whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-content-model&quot;&gt;Content model&lt;/span&gt;:&lt;/dt&gt;
-   &lt;dd&gt;Either: Zero or more &lt;code&gt;li&lt;/code&gt; elements.&lt;/dd&gt;
-   &lt;dd&gt;Or: &lt;span&gt;Flow content&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Empty.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-attributes&quot;&gt;Content attributes&lt;/span&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Global attributes&lt;/span&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt;&lt;/dd&gt;
-   &lt;dd&gt;&lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menuitem-label&quot;&gt;label&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menuitem-icon&quot;&gt;icon&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menuitem-radiogroup&quot;&gt;radiogroup&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menuitem-default&quot;&gt;default&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;Also, the &lt;code title=&quot;attr-menuitem-title&quot;&gt;title&lt;/code&gt; attribute has special semantics on this element.&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-dom&quot;&gt;DOM interface&lt;/span&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
-&lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLMenuElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
-           attribute DOMString &lt;span title=&quot;dom-menu-type&quot;&gt;type&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-menu-label&quot;&gt;label&lt;/span&gt;;
+&lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLMenuItemElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
+           attribute DOMString &lt;span title=&quot;dom-menuitem-type&quot;&gt;type&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-menuitem-label&quot;&gt;label&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-menuitem-icon&quot;&gt;icon&lt;/span&gt;;
+           attribute boolean &lt;span title=&quot;dom-menuitem-disabled&quot;&gt;disabled&lt;/span&gt;;
+           attribute boolean &lt;span title=&quot;dom-menuitem-checked&quot;&gt;checked&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-menuitem-radiogroup&quot;&gt;radiogroup&lt;/span&gt;;
+           attribute boolean &lt;span title=&quot;dom-menuitem-default&quot;&gt;default&lt;/span&gt;;
+  readonly attribute &lt;span&gt;HTMLElement&lt;/span&gt;? &lt;span title=&quot;dom-menuitem-command&quot;&gt;command&lt;/span&gt;;
 };&lt;/pre&gt;
+   &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;
 
-  &lt;p&gt;The &lt;code&gt;menu&lt;/code&gt; element represents a list of commands.&lt;/p&gt;
+  &lt;p&gt;The &lt;code&gt;menuitem&lt;/code&gt; element represents a command that the user can invoke from a popup
+  menu (either a &lt;span title=&quot;attr-contextmenu&quot;&gt;context menu&lt;/span&gt; or the menu of a &lt;span
+  title=&quot;attr-button-type-menu-state&quot;&gt;menu button&lt;/span&gt;).&lt;/p&gt;
 
-  &lt;!-- v2 idea: &lt;menu&gt; should get an icon, like &lt;command&gt; --&gt;
+  &lt;p&gt;A &lt;code&gt;menuitem&lt;/code&gt; element that uses one or more of the
+   &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-label&quot;&gt;label&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-icon&quot;&gt;icon&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt;, and
+   &lt;code title=&quot;attr-menuitem-radiogroup&quot;&gt;radiogroup&lt;/code&gt;
+  attributes defines a new command.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-menu-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute
-  is an &lt;span&gt;enumerated attribute&lt;/span&gt; indicating the kind of menu
-  being declared. The attribute has three states. The &lt;code
-  title=&quot;attr-menu-type-context&quot;&gt;context&lt;/code&gt; keyword maps to the
-  &lt;dfn title=&quot;context menu state&quot;&gt;context menu&lt;/dfn&gt; state, in which
-  the element is declaring a context menu. The &lt;code
-  title=&quot;attr-menu-type-toolbar&quot;&gt;toolbar&lt;/code&gt; keyword maps to the
-  &lt;dfn title=&quot;toolbar state&quot;&gt;toolbar&lt;/dfn&gt; state, in which the
-  element is declaring a toolbar. The attribute may also be
-  omitted. The &lt;i&gt;missing value default&lt;/i&gt; is the &lt;dfn title=&quot;list
-  state&quot;&gt;list&lt;/dfn&gt; state, which indicates that the element is merely
-  a list of commands that is neither declaring a context menu nor
-  defining a toolbar.&lt;/p&gt;
+  &lt;p&gt;A &lt;code&gt;menuitem&lt;/code&gt; element that uses the &lt;code
+  title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attribute defines a command by reference to another
+  one. This allows authors to define a command once, and set its state (e.g. whether it is active or
+  disabled) in one place, and have all references to that command in the user interface change at
+  the same time.&lt;/p&gt;
 
-  &lt;p&gt;If a &lt;code&gt;menu&lt;/code&gt; element's &lt;code
-  title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-  title=&quot;context menu state&quot;&gt;context menu&lt;/span&gt; state, then the
-  element &lt;span&gt;represents&lt;/span&gt; the commands of a context menu, and
-  the user can only interact with the commands if that context menu is
-  activated.&lt;/p&gt;
+  &lt;p&gt;If the &lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attribute is specified, the element
+  is in the &lt;dfn&gt;indirect command&lt;/dfn&gt; mode. If it is not specified, it is in the &lt;dfn&gt;explicit
+  command&lt;/dfn&gt; mode. When the element is in the &lt;span&gt;indirect command&lt;/span&gt; mode, the element
+  must not have any of the following attributes specified:
+   &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-label&quot;&gt;label&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-icon&quot;&gt;icon&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt;,
+   &lt;code title=&quot;attr-menuitem-radiogroup&quot;&gt;radiogroup&lt;/code&gt;.
+  &lt;/p&gt;
 
-  &lt;p&gt;If a &lt;code&gt;menu&lt;/code&gt; element's &lt;code
-  title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-  title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state, then the element
-  &lt;span&gt;represents&lt;/span&gt; a list of active commands that the user can
-  immediately interact with.&lt;/p&gt;
+  &lt;hr&gt;
 
-  &lt;p&gt;If a &lt;code&gt;menu&lt;/code&gt; element's &lt;code
-  title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-  title=&quot;list state&quot;&gt;list&lt;/span&gt; state, then the element either
-  &lt;span&gt;represents&lt;/span&gt; an unordered list of items (each represented
-  by an &lt;code&gt;li&lt;/code&gt; element), each of which represents a command
-  that the user can perform or activate, or, if the element has no
-  &lt;code&gt;li&lt;/code&gt; element children, &lt;span&gt;flow content&lt;/span&gt;
-  describing available commands.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menuitem-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute indicates the kind of
+  command: either a normal command with an associated action, or a state or option that can be
+  toggled, or a selection of one item from a list of items.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-menu-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the label of the menu. It is used by user agents to
-  display nested menus in the UI. For example, a context menu
-  containing another menu would use the nested menu's &lt;code
-  title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute for the submenu's
-  menu label.&lt;/p&gt;
+  &lt;p&gt;The attribute is an &lt;span&gt;enumerated attribute&lt;/span&gt; with three keywords and states. The &quot;&lt;dfn
+  title=&quot;attr-menuitem-type-keyword-command&quot;&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;span
+  title=&quot;attr-menuitem-type-state-command&quot;&gt;Command&lt;/span&gt; state, the &quot;&lt;dfn
+  title=&quot;attr-menuitem-type-keyword-checkbox&quot;&gt;&lt;code&gt;checkbox&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;span
+  title=&quot;attr-menuitem-type-state-checkbox&quot;&gt;Checkbox&lt;/span&gt; state, and the &quot;&lt;dfn
+  title=&quot;attr-menuitem-type-keyword-radio&quot;&gt;&lt;code&gt;radio&lt;/code&gt;&lt;/dfn&gt;&quot; keyword maps to the &lt;span
+  title=&quot;attr-menuitem-type-state-radio&quot;&gt;Radio&lt;/span&gt; state. The &lt;i&gt;missing value default&lt;/i&gt; is the
+  &lt;span title=&quot;attr-menuitem-type-state-command&quot;&gt;Command&lt;/span&gt; state.&lt;/p&gt;
 
-  &lt;div class=&quot;impl&quot;&gt;
+  &lt;dl&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-menu-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
-  title=&quot;dom-menu-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; IDL attributes must
-  &lt;span&gt;reflect&lt;/span&gt; the respective content attributes of the same
-  name.&lt;/p&gt;
+   &lt;dt&gt;The &lt;dfn title=&quot;attr-menuitem-type-state-command&quot;&gt;Command&lt;/dfn&gt; state&lt;/dt&gt;
 
-  &lt;/div&gt;
+   &lt;dd&gt;&lt;p&gt;The element &lt;span&gt;represents&lt;/span&gt; a normal command with an associated action.&lt;/p&gt;&lt;/dd&gt;
 
+   &lt;dt&gt;The &lt;dfn title=&quot;attr-menuitem-type-state-checkbox&quot;&gt;Checkbox&lt;/dfn&gt; state&lt;/dt&gt;
 
+   &lt;dd&gt;&lt;p&gt;The element &lt;span&gt;represents&lt;/span&gt; a state or option that can be toggled.&lt;/p&gt;&lt;/dd&gt;
 
-  &lt;h5 id=&quot;menus-intro&quot;&gt;Introduction&lt;/h5&gt;
+   &lt;dt&gt;The &lt;dfn title=&quot;attr-menuitem-type-state-radio&quot;&gt;Radio&lt;/dfn&gt; state&lt;/dt&gt;
 
-  &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
+   &lt;dd&gt;&lt;p&gt;The element &lt;span&gt;represents&lt;/span&gt; a selection of one item from a list of items.&lt;/p&gt;&lt;/dd&gt;
 
-  &lt;p&gt;The &lt;code&gt;menu&lt;/code&gt; element is used to define context menus and
-  toolbars.&lt;/p&gt;
+  &lt;/dl&gt;
 
-  &lt;p&gt;For example, the following represents a toolbar with three menu
-  buttons on it, each of which has a dropdown menu with a series of
-  options:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menuitem-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt; attribute gives the name of the
+  command, as shown to the user. The &lt;code title=&quot;attr-menuitem-label&quot;&gt;label&lt;/code&gt; attribute must
+  be specified if the element is in the &lt;span&gt;explicit command&lt;/span&gt; mode. If the attribute is
+  specified, it must have a value that is not the empty string.&lt;/p&gt;
 
-  &lt;pre&gt;&lt;menu type=&quot;toolbar&quot;&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;File&quot;&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fnew()&quot;&gt;New...&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fopen()&quot;&gt;Open...&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fsave()&quot;&gt;Save&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;fsaveas()&quot;&gt;Save as...&lt;/button&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;Edit&quot;&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;ecopy()&quot;&gt;Copy&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;ecut()&quot;&gt;Cut&lt;/button&gt;
-   &lt;button type=&quot;button&quot; onclick=&quot;epaste()&quot;&gt;Paste&lt;/button&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
- &lt;li&gt;
-  &lt;menu label=&quot;Help&quot;&gt;
-   &lt;li&gt;&lt;a href=&quot;help.html&quot;&gt;Help&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=&quot;about.html&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
-  &lt;/menu&gt;
- &lt;/li&gt;
-&lt;/menu&gt;&lt;/pre&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menuitem-icon&quot;&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt; attribute gives a picture that
+  represents the command. If the attribute is specified, the attribute's value must contain a
+  &lt;span&gt;valid non-empty URL potentially surrounded by spaces&lt;/span&gt;. &lt;span class=&quot;impl&quot;&gt;To obtain
+  the &lt;span&gt;absolute URL&lt;/span&gt; of the icon when the attribute's value is not the empty string, the
+  attribute's value must be &lt;span title=&quot;resolve a url&quot;&gt;resolved&lt;/span&gt; relative to the element.
+  When the attribute is absent, or its value is the empty string, or &lt;span title=&quot;resolve a
+  url&quot;&gt;resolving&lt;/span&gt; its value fails, there is no icon.&lt;/span&gt;&lt;/p&gt; &lt;!-- this is affected by the
+  base URL being changed, so users of this should cache the image once they've fetched it once, at
+  least until the relative url changes again --&gt;
 
-  &lt;p&gt;In a supporting user agent, this might look like this:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menuitem-disabled&quot;&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt; attribute is a
+  &lt;span&gt;boolean attribute&lt;/span&gt; that, if present, indicates that the command is not available in
+  the current state.&lt;/p&gt;
 
-  &lt;p&gt;&lt;img src=&quot;images/sample-toolbar-1.png&quot; width=&quot;303&quot; height=&quot;101&quot; alt=&quot;A toolbar with three buttons, labeled 'File', 'Edit', and 'Help'; where if you select the 'Edit' button you get a drop-down menu with three more options, 'Copy', 'Cut', and 'Paste'.&quot;&gt;&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;The distinction between &lt;code title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt; and
+  &lt;code title=&quot;attr-hidden&quot;&gt;hidden&lt;/code&gt; is subtle. A command would be disabled if, in the same
+  context, it could be enabled if only certain aspects of the situation were changed. A command
+  would be marked as hidden if, in that situation, the command will never be enabled. For example,
+  in the context menu for a water faucet, the command &quot;open&quot; might be disabled if the faucet is
+  already open, but the command &quot;eat&quot; would be marked hidden since the faucet could never be
+  eaten.&lt;/p&gt;
 
-  &lt;p&gt;In a legacy user agent, the above would look like a bulleted list
-  with three items, the first of which has four buttons, the second of
-  which has three, and the third of which has two nested bullet points
-  with two items consisting of links.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menuitem-checked&quot;&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;span&gt;boolean
+  attribute&lt;/span&gt; that, if present, indicates that the command is selected. The attribute must be
+  omitted unless the &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt; attribute is in either the &lt;span
+  title=&quot;attr-menuitem-type-state-checkbox&quot;&gt;Checkbox&lt;/span&gt; state or the &lt;span
+  title=&quot;attr-menuitem-type-state-radio&quot;&gt;Radio&lt;/span&gt; state.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menuitem-radiogroup&quot;&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt; attribute gives the
+  name of the group of commands that will be toggled when the command itself is toggled, for
+  commands whose &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt; attribute has the value &quot;&lt;code
+  title=&quot;&quot;&gt;radio&lt;/code&gt;&quot;. The scope of the name is the child list of the parent element. The
+  attribute must be omitted unless the &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt; attribute is in
+  the &lt;span title=&quot;attr-menuitem-type-state-radio&quot;&gt;Radio&lt;/span&gt; state.&lt;/p&gt;
+
   &lt;hr&gt;
 
-  &lt;p&gt;The following implements a similar toolbar, with a single button
-  whose values, when selected, redirect the user to Web sites.&lt;/p&gt;
+  &lt;p&gt;If a &lt;code&gt;menuitem&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; has a &lt;dfn
+  title=&quot;attr-menuitem-command&quot;&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; attribute, and &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt;
+  is &lt;span&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;, and there is an element in that &lt;code&gt;Document&lt;/code&gt;
+  whose &lt;span title=&quot;concept-id&quot;&gt;ID&lt;/span&gt; has a value equal to the value of &lt;var
+  title=&quot;&quot;&gt;slave&lt;/var&gt;'s &lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attribute, and the first
+  such element in &lt;span&gt;tree order&lt;/span&gt;, hereafter &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;, itself &lt;span
+  title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt; and either is not a &lt;code&gt;menuitem&lt;/code&gt; element
+  or does not itself have a &lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attribute, then the
+  &lt;dfn&gt;master command&lt;/dfn&gt; of &lt;var title=&quot;&quot;&gt;slave&lt;/var&gt; is &lt;var title=&quot;&quot;&gt;master&lt;/var&gt;.&lt;/p&gt;
 
-  &lt;pre&gt;&lt;form action=&quot;redirect.cgi&quot;&gt;
- &lt;menu type=&quot;toolbar&quot;&gt;
-  &lt;label for=&quot;goto&quot;&gt;Go to...&lt;/label&gt;
-  &lt;menu label=&quot;Go&quot;&gt;
-   &lt;select id=&quot;goto&quot;&lt;!--
-           onchange=&quot;if (this.options[this.selectedIndex].value)
-                     window.location = this.options[this.selectedIndex].value&quot;--&gt;&gt;
-    &lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt; Select site: &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.apple.com/">http://www.apple.com/</A>&quot;&gt; Apple &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.mozilla.org/">http://www.mozilla.org/</A>&quot;&gt; Mozilla &lt;/option&gt;
-    &lt;option value=&quot;<A HREF="http://www.opera.com/">http://www.opera.com/</A>&quot;&gt; Opera &lt;/option&gt;
-   &lt;/select&gt;
-   &lt;span&gt;&lt;input type=&quot;submit&quot; value=&quot;Go&quot;&gt;&lt;/span&gt;
-  &lt;/menu&gt;
- &lt;/menu&gt;
-&lt;/form&gt;&lt;/pre&gt;
+  &lt;p&gt;An element with a &lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attribute must have a
+  &lt;span&gt;master command&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The behavior in supporting user agents is similar to the example
-  above, but here the legacy behavior consists of a single
-  &lt;code&gt;select&lt;/code&gt; element with a submit button. The submit button
-  doesn't appear in the toolbar, because it is not a child of the
-  &lt;code&gt;menu&lt;/code&gt; element or of its &lt;code&gt;li&lt;/code&gt; children.&lt;/p&gt;
+  &lt;hr&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menuitem-title&quot;&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute gives a hint describing
+  the command, which might be shown to the user to help him.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;attr-menuitem-default&quot;&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt; attribute indicates, if
+  present, that the command is the one that would have been invoked if the user had directly
+  activated the menu's subject instead of using the menu. The &lt;code
+  title=&quot;attr-menuitem-default&quot;&gt;default&lt;/code&gt; attribute is a &lt;span&gt;boolean attribute&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;In this trivial example, a submit button is given a context menu that has two options, one to
+   reset the form, and one to submit the form. The submit command is marked as being the default.&lt;/p&gt;
+
+   &lt;pre&gt;&lt;form action=&quot;dosearch.pl&quot;&gt;
+ &lt;p&gt;&lt;label&gt;Enter search terms: &lt;input type=&quot;text&quot; name=&quot;terms&quot;&gt;&lt;/label&gt;&lt;/p&gt;
+ &lt;p&gt;&lt;input type=submit contextmenu=formmenu id=&quot;submitbutton&quot;&gt;&lt;/p&gt;
+ &lt;p hidden&gt;&lt;input type=reset id=&quot;resetbutton&quot;&gt;&lt;/p&gt;
+ &lt;menu type=popup id=formmenu&gt;
+  &lt;menuitem command=&quot;submitbutton&quot; default&gt;
+  &lt;menuitem command=&quot;resetbutton&quot;&gt;
+ &lt;/menu&gt;
+&lt;/form&gt;&lt;/pre&gt;
+
+  &lt;/div&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;h5&gt;&lt;dfn&gt;Building menus and toolbars&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;hr&gt;
 
-  &lt;p&gt;A menu (or toolbar) consists of a list of zero or more of the
-  following components:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-menuitem-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute must &lt;span&gt;reflect&lt;/span&gt; the content attribute of the
+  same name, &lt;span&gt;limited to only known values&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;&lt;span title=&quot;concept-command&quot;&gt;Commands&lt;/span&gt;, which can be marked as default commands&lt;/li&gt;
-   &lt;li&gt;Separators&lt;/li&gt;
-   &lt;li&gt;Other menus (which allows the list to be nested)&lt;/li&gt;
-  &lt;/ul&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-menuitem-label&quot;&gt;&lt;code&gt;label&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
+  title=&quot;dom-menuitem-icon&quot;&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
+  title=&quot;dom-menuitem-disabled&quot;&gt;&lt;code&gt;disabled&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
+  title=&quot;dom-menuitem-checked&quot;&gt;&lt;code&gt;checked&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn
+  title=&quot;dom-menuitem-radiogroup&quot;&gt;&lt;code&gt;radiogroup&lt;/code&gt;&lt;/dfn&gt;,
+  and &lt;dfn title=&quot;dom-menuitem-default&quot;&gt;&lt;code&gt;default&lt;/code&gt;&lt;/dfn&gt;
+  IDL attributes must &lt;span&gt;reflect&lt;/span&gt; the respective content
+  attributes of the same name.&lt;/p&gt;
 
-  &lt;p&gt;The list corresponding to a particular &lt;code&gt;menu&lt;/code&gt; element
-  is built by iterating over its child nodes. For each child node in
-  &lt;span&gt;tree order&lt;/span&gt;, the required behavior depends on what the
-  node is, as follows:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-menuitem-command&quot;&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt;
+  IDL attribute must return the &lt;span&gt;master command&lt;/span&gt;, if any,
+  or null otherwise.&lt;/p&gt;
 
+  &lt;hr&gt;
+  
+  &lt;p&gt;If the element's &lt;span
+  title=&quot;command-facet-DisabledState&quot;&gt;Disabled State&lt;/span&gt; is false
+  (enabled) then the element's &lt;span&gt;activation behavior&lt;/span&gt;
+  depends on the element's &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt;
+  and &lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attributes, as
+  follows:&lt;/p&gt;
+
   &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;dt&gt;An element that &lt;span title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;&lt;/dt&gt;
+   &lt;dt&gt;If the element has a &lt;span&gt;master command&lt;/span&gt; set by its
+   &lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attribute&lt;/dt&gt;
 
-   &lt;dd&gt;Append the command to the menu, respecting its &lt;span
-   title=&quot;concept-facet&quot;&gt;facets&lt;/span&gt;&lt;!-- we might need to be
-   explicit about what this means for each facet, if testing shows
-   this isn't well-implemented. e.g.: If there's an Icon facet for the
-   command, it should be &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;&lt;!- -FETCH-
-   -&gt; (this would be http-origin privacy-sensitive), and then that
-   image should be associated with the command, such that each command
-   only has its image fetched once, to prevent changes to the base URL
-   from having effects after the image has been fetched once. (no need
-   to resolve the Icon facet, it's an absolute URL) --&gt;. &lt;!--If the
-   element is a &lt;code&gt;command&lt;/code&gt; element with a &lt;code
-   title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute, mark the
-   command as being a default command.--&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;p&gt;The user agent must &lt;span&gt;run synthetic click activation
+   steps&lt;/span&gt; on the element's &lt;span&gt;master command&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+   &lt;!-- we know it has a defined &lt;span&gt;activation behavior&lt;/span&gt; if
+   we get here --&gt;
 
 
-   &lt;dt&gt;An &lt;code&gt;hr&lt;/code&gt; element&lt;/dt&gt;
-   &lt;dt&gt;An &lt;code&gt;option&lt;/code&gt; element that has a &lt;code
-   title=&quot;attr-option-value&quot;&gt;value&lt;/code&gt; attribute set to the empty
-   string, and has a &lt;code
-   title=&quot;attr-option-disabled&quot;&gt;disabled&lt;/code&gt; attribute, and whose
-   &lt;code&gt;textContent&lt;/code&gt; consists of a string of one or more
-   hyphens (U+002D HYPHEN-MINUS)&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt; attribute is
+   in the &lt;span
+   title=&quot;attr-menuitem-type-state-checkbox&quot;&gt;Checkbox&lt;/span&gt; state&lt;/dt&gt;
 
-   &lt;dd&gt;Append a separator to the menu.&lt;/dd&gt;
+   &lt;dd&gt;&lt;p&gt;If the element has a &lt;code
+   title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt; attribute, the UA must
+   remove that attribute. Otherwise, the UA must add a &lt;code
+   title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt; attribute, with the
+   literal value &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/p&gt;&lt;/dd&gt;
 
 
-   &lt;dt&gt;An &lt;code&gt;li&lt;/code&gt; element&lt;/dt&gt;
-   &lt;dt&gt;A &lt;code&gt;label&lt;/code&gt; element&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt; attribute is
+   in the &lt;span
+   title=&quot;attr-menuitem-type-state-radio&quot;&gt;Radio&lt;/span&gt; state&lt;/dt&gt;
 
-   &lt;dd&gt;Iterate over the children of the element.&lt;/dd&gt;
+   &lt;dd&gt;&lt;p&gt;If the element has a parent, then the UA must walk the list
+   of child nodes of that parent element, and for each node that is a
+   &lt;code&gt;menuitem&lt;/code&gt; element, if that element has a &lt;code
+   title=&quot;attr-menuitem-radiogroup&quot;&gt;radiogroup&lt;/code&gt; attribute whose
+   value exactly matches the current element's (treating missing &lt;code
+   title=&quot;attr-menuitem-radiogroup&quot;&gt;radiogroup&lt;/code&gt; attributes as if
+   they were the empty string), and has a &lt;code
+   title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt; attribute, must remove
+   that attribute.&lt;/p&gt;
 
+   &lt;p&gt;Then, the element's &lt;code
+   title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt; attribute attribute
+   must be set to the literal value &lt;code
+   title=&quot;&quot;&gt;checked&lt;/code&gt;.&lt;/p&gt;&lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;code&gt;menu&lt;/code&gt; element with no &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute&lt;/dt&gt;
-   &lt;dt&gt;A &lt;code&gt;select&lt;/code&gt; element&lt;/dt&gt;
 
-   &lt;dd&gt;Append a separator to the menu, then iterate over the children
-   of the &lt;code&gt;menu&lt;/code&gt; or &lt;code&gt;select&lt;/code&gt; element, then
-   append another separator.&lt;/dd&gt;
+   &lt;dt&gt;Otherwise&lt;/dt&gt;
 
-   &lt;!-- v2: we might want to support &lt;select&gt; in &lt;label&gt; as giving a named submenu --&gt;
+   &lt;dd&gt;&lt;p&gt;The element's &lt;span&gt;activation behavior&lt;/span&gt; is to do
+   nothing.&lt;/p&gt;&lt;/dd&gt;
 
+  &lt;/dl&gt;
 
-   &lt;dt&gt;A &lt;code&gt;menu&lt;/code&gt; element with a &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute&lt;/dt&gt;
-   &lt;dt&gt;An &lt;code&gt;optgroup&lt;/code&gt; element with a &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt; attribute&lt;/dt&gt;
+  &lt;p class=&quot;note&quot;&gt;Firing a synthetic &lt;code
+  title=&quot;event-click&quot;&gt;click&lt;/code&gt; event at the element does not cause
+  any of the actions described above to happen.&lt;/p&gt;
 
-   &lt;dd&gt;Append a submenu to the menu, using the value of the element's
-   &lt;code title=&quot;&quot;&gt;label&lt;/code&gt; attribute as the label of the menu. The
-   submenu must be constructed by taking the element and creating a
-   new menu for it using the complete process described in this
-   section.&lt;/dd&gt;
+  &lt;!-- v2COMMAND: Expose the Triggers facet again. --&gt;
 
+  &lt;p&gt;If the element's &lt;span
+  title=&quot;command-facet-DisabledState&quot;&gt;Disabled State&lt;/span&gt; is true
+  (disabled) then the element has no &lt;span&gt;activation
+  behavior&lt;/span&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;Any other node&lt;/dt&gt;
+  &lt;/div&gt;
 
-   &lt;dd&gt;&lt;span&gt;Ignore&lt;/span&gt; the node.&lt;/dd&gt;
+  &lt;p class=&quot;note&quot;&gt;The &lt;code&gt;menuitem&lt;/code&gt; element is not rendered except as &lt;span
+  title=&quot;menu&quot;&gt;part of a popup menu&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;/dl&gt;
+  &lt;div class=&quot;example&quot;&gt;
 
-  &lt;p&gt;Once all the nodes have been processed as described above, the
-  user agent must the post-process the menu as follows:&lt;/p&gt;
+   &lt;p&gt;Here is an example of a pop-up menu button with three options that let the user toggle between
+   left, center, and right alignment. One could imagine such a toolbar as part of a text editor. The
+   menu also has a separator followed by another menu item labeled &quot;Publish&quot;, though that menu item
+   is disabled.&lt;/p&gt;
 
-  &lt;ol&gt;
+   &lt;pre&gt;&lt;button type=menu menu=editmenu&gt;Commands...&lt;/button&gt;
+&lt;menu type=&quot;popup&quot; id=&quot;editmenu&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot; checked=&quot;checked&quot;
+          label=&quot;Left&quot; icon=&quot;icons/alL.png&quot; onclick=&quot;setAlign('left')&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
+          label=&quot;Center&quot; icon=&quot;icons/alC.png&quot; onclick=&quot;setAlign('center')&quot;&gt;
+ &lt;menuitem type=&quot;radio&quot; radiogroup=&quot;alignment&quot;
+          label=&quot;Right&quot; icon=&quot;icons/alR.png&quot; onclick=&quot;setAlign('right')&quot;&gt;
+ &lt;hr&gt;
+ &lt;menuitem type=&quot;command&quot; disabled
+          label=&quot;Publish&quot; icon=&quot;icons/pub.png&quot; onclick=&quot;publish()&quot;&gt;
+&lt;/menu&gt;&lt;/pre&gt;
 
-   &lt;li&gt;Except for separators, any menu item with no label, or whose
-   label is the empty string, must be removed.&lt;/li&gt;
+  &lt;/div&gt;
 
-   &lt;li&gt;Any sequence of two or more separators in a row must be
-   collapsed to a single separator.&lt;/li&gt;
 
-   &lt;li&gt;Any separator at the start or end of the menu must be
-   removed.&lt;/li&gt;
+  &lt;h4&gt;Context menus&lt;/h4&gt;
 
-  &lt;/ol&gt;
+  &lt;h5&gt;Declaring a context menu&lt;/h5&gt;
 
-  &lt;/div&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-contextmenu&quot;&gt;&lt;code&gt;contextmenu&lt;/code&gt;&lt;/dfn&gt; attribute gives the element's
+  context menu. The value must be the &lt;span title=&quot;concept-id&quot;&gt;ID&lt;/span&gt; of a &lt;code&gt;menu&lt;/code&gt;
+  element in the same &lt;span&gt;home subtree&lt;/span&gt; whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt;
+  attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;When a user right-clicks on an element with a &lt;code
+  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute, the user agent will first fire a &lt;code
+  title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event at the element, and then, if that event is not
+  canceled, a &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt; event at the &lt;code&gt;menu&lt;/code&gt; element.&lt;/p&gt;
 
+  &lt;div class=&quot;example&quot;&gt;
 
+   &lt;p&gt;Here is an example of a context menu for an input control:&lt;/p&gt;
 
-  &lt;h5&gt;&lt;dfn&gt;Context menus&lt;/dfn&gt;&lt;/h5&gt;
+   &lt;pre&gt;&lt;form name=&quot;npc&quot;&gt;
+ &lt;label&gt;Character name: &lt;input name=char type=text contextmenu=namemenu required&gt;&lt;/label&gt;
+ &lt;menu type=popup id=namemenu&gt;
+  &lt;menuitem label=&quot;Pick random name&quot; onclick=&quot;document.forms.npc.elements.char.value = getRandomName()&quot;&gt;
+  &lt;menuitem label=&quot;Prefill other fields based on name&quot; onclick=&quot;prefillFields(document.forms.npc.elements.char.value)&quot;&gt;
+ &lt;/menu&gt;
+&lt;/form&gt;&lt;/pre&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-contextmenu&quot;&gt;&lt;code&gt;contextmenu&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the element's &lt;span title=&quot;context menus&quot;&gt;context
-  menu&lt;/span&gt;. The value must be the &lt;span
-  title=&quot;concept-id&quot;&gt;ID&lt;/span&gt; of a &lt;code&gt;menu&lt;/code&gt; element in the
-  DOM. &lt;span class=&quot;impl&quot;&gt;If the node that would be obtained by
-  invoking the &lt;code
-  title=&quot;dom-Document-getElementById&quot;&gt;getElementById()&lt;/code&gt; method
-  using the attribute's value as the only argument is null or not a
-  &lt;code&gt;menu&lt;/code&gt; element, then the element has no assigned context
-  menu. Otherwise, the element's assigned context menu is the element
-  so identified.&lt;/span&gt;&lt;/p&gt;
+   &lt;p&gt;This adds two items to the control's context menu, one called &quot;Pick random name&quot;, and one
+   called &quot;Prefill other fields based on name&quot;. They invoke scripts that are not shown in the
+   example above.&lt;/p&gt;
 
+  &lt;/div&gt;
+
+
+
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;When an element's context menu is requested (e.g. by the user
-  right-clicking the element, or pressing a context menu key), the
-  user agent must apply the appropriate rules from the following
+  &lt;h5&gt;Processing model&lt;/h5&gt;
+
+  &lt;p&gt;If the there is no element with the ID given by an element's &lt;code
+  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute's value in the element's &lt;span&gt;home
+  subtree&lt;/span&gt;, or if the first such element is not a &lt;code&gt;menu&lt;/code&gt; element whose &lt;code
+  title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup
+  menu&lt;/span&gt; state, then the element has no assigned context menu. Otherwise, the element's
+  assigned context menu is the first such element.&lt;/p&gt;
+
+  &lt;p&gt;When an element's context menu is requested (e.g. by the user right-clicking the element, or
+  pressing a context menu key), the user agent must apply the appropriate rules from the following
   list:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
@@ -68421,111 +68392,54 @@
 
    &lt;dt&gt;Otherwise&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent must &lt;span title=&quot;fire a synthetic mouse
-   event&quot;&gt;fire a synthetic mouse event named &lt;code
-   title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt;&lt;/span&gt; that bubbles
-   and is cancelable at the element for which the menu was
-   requested.&lt;/p&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;p&gt;The user agent must &lt;span title=&quot;fire a synthetic mouse event&quot;&gt;fire a synthetic mouse
+   event named &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt;&lt;/span&gt; that bubbles and is
+   cancelable at the element for which the menu was requested.&lt;/p&gt;&lt;/dd&gt;
 
   &lt;/dl&gt;
 
   &lt;p class=&quot;note&quot;&gt;Typically, therefore, the firing of the &lt;code
-  title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event will be the
-  default action of a &lt;code title=&quot;mouseup&quot;&gt;mouseup&lt;/code&gt; or &lt;code
-  title=&quot;event-keyup&quot;&gt;keyup&lt;/code&gt; event. The exact sequence of events
-  is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
+  title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event will be the default action of a &lt;code
+  title=&quot;mouseup&quot;&gt;mouseup&lt;/code&gt; or &lt;code title=&quot;event-keyup&quot;&gt;keyup&lt;/code&gt; event. The exact sequence
+  of events is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
 
-  &lt;p&gt;The default action of the &lt;code
-  title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event depends on
-  whether the element or one of its ancestors has a context menu
-  assigned (using the &lt;code
-  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute) or not. If
-  there is no context menu assigned, the default action must be for
-  the user agent to show its default context menu, if it has one.&lt;/p&gt;
+  &lt;p&gt;The default action of the &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event depends on
+  whether or not the element or one of its ancestors has a context menu assigned (using the &lt;code
+  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute) when the event dispatch has completed. If
+  there is no context menu assigned, the default action must be for the user agent to show its
+  default context menu, if it has one.&lt;/p&gt;
 
-  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a
-  context menu assigned, then the user agent must &lt;span&gt;fire a simple
-  event&lt;/span&gt; named &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt; at the
-  &lt;code&gt;menu&lt;/code&gt; element of the context menu of the nearest
-  ancestor (including the element itself) with one assigned.&lt;/p&gt;
-  &lt;!-- v2: include modifier key information --&gt;
+  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a context menu assigned, then the
+  user agent must &lt;span&gt;fire a simple event&lt;/span&gt; named &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt; that
+  is cancelable at the &lt;code&gt;menu&lt;/code&gt; element of the context menu of the nearest ancestor
+  (including the element itself) with one assigned.&lt;/p&gt; &lt;!-- v2: include modifier key information
+  --&gt;
 
-  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent
-  must show a context menu &lt;span title=&quot;building menus and
-  toolbars&quot;&gt;built&lt;/span&gt; from the &lt;code&gt;menu&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent must &lt;span title=&quot;construct
+  and show a menu&quot;&gt;construct and show&lt;/span&gt; the menu for the &lt;code&gt;menu&lt;/code&gt; element.&lt;/p&gt;
 
-  &lt;p&gt;The user agent may also provide access to its default context
-  menu, if any, with the context menu shown. For example, it could
-  merge the menu items from the two menus together, or provide the
+  &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
+  menu shown. For example, it could merge the menu items from the two menus together, or provide the
   page's context menu as a submenu of the default menu.&lt;/p&gt;
 
-  &lt;p&gt;If the user dismisses the menu without making a selection,
-  nothing in particular happens.&lt;/p&gt;
+  &lt;p&gt;User agents may provide means for bypassing the context menu processing model, ensuring that
+  the user can always access the UA's default context menus. For example, the user agent could
+  handle right-clicks that have the Shift key depressed in such a way that it does not fire the
+  &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event and instead always shows the default
+  context menu.&lt;/p&gt;
 
-  &lt;p&gt;If the user selects a menu item that represents a &lt;span
-  title=&quot;concept-command&quot;&gt;command&lt;/span&gt;, then the UA must invoke
-  that command's &lt;span title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-contextMenu&quot;&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt; IDL attribute must
+  &lt;span&gt;reflect&lt;/span&gt; the &lt;code title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; content attribute.&lt;/p&gt;
 
-  &lt;p&gt;Context menus must not, while being shown, reflect changes in the
-  DOM; they are constructed as the default action of the &lt;code
-  title=&quot;event-show&quot;&gt;show&lt;/code&gt; event and must remain as constructed
-  until dismissed.&lt;/p&gt;
-
-  &lt;p&gt;User agents may provide means for bypassing the context menu
-  processing model, ensuring that the user can always access the UA's
-  default context menus. For example, the user agent could handle
-  right-clicks that have the Shift key depressed in such a way that it
-  does not fire the &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt;
-  event and instead always shows the default context menu.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-contextMenu&quot;&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute must &lt;span&gt;reflect&lt;/span&gt; the &lt;code
-  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; content attribute.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;div class=&quot;example&quot;&gt;
 
-   &lt;p&gt;Here is an example of a context menu for an input control:&lt;/p&gt;
 
-   &lt;pre&gt;&lt;form name=&quot;npc&quot;&gt;
- &lt;label&gt;Character name: &lt;input name=char type=text contextmenu=namemenu required&gt;&lt;/label&gt;
- &lt;menu type=context id=namemenu&gt;
-  &lt;command label=&quot;Pick random name&quot; onclick=&quot;document.forms.npc.elements.char.value = getRandomName()&quot;&gt;
-  &lt;command label=&quot;Prefill other fields based on name&quot; onclick=&quot;prefillFields(document.forms.npc.elements.char.value)&quot;&gt;
- &lt;/menu&gt;
-&lt;/form&gt;&lt;/pre&gt;
 
-   &lt;p&gt;This adds two items to the control's context menu, one called
-   &quot;Pick random name&quot;, and one called &quot;Prefill other fields based on
-   name&quot;. They invoke scripts that are not shown in the example
-   above.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;h5&gt;&lt;dfn&gt;Toolbars&lt;/dfn&gt;&lt;/h5&gt;
-
-  &lt;p&gt;When a &lt;code&gt;menu&lt;/code&gt; element has a &lt;code
-  title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute in the &lt;span
-  title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state, then the user agent
-  must &lt;span title=&quot;building menus and toolbars&quot;&gt;build&lt;/span&gt; the
-  menu for that &lt;code&gt;menu&lt;/code&gt; element, and use the result in the
-  rendering.&lt;/p&gt;
-
-  &lt;p&gt;The user agent must reflect changes made to the
-  &lt;code&gt;menu&lt;/code&gt;'s DOM, by immediately &lt;span title=&quot;building menus
-  and toolbars&quot;&gt;rebuilding&lt;/span&gt; the menu.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
   &lt;h4 id=&quot;commands&quot;&gt;Commands&lt;/h4&gt;
 
+  &lt;h5&gt;Facets&lt;/h5&gt;
+
   &lt;p&gt;A &lt;dfn title=&quot;concept-command&quot;&gt;command&lt;/dfn&gt; is the abstraction
   behind menu items, buttons, and links. Once a command is defined,
   other parts of the interface can refer to the same command, allowing
@@ -68798,17 +68712,32 @@
 
   &lt;hr&gt;
 
-  &lt;p&gt;User agents may expose the &lt;span
-  title=&quot;concept-command&quot;&gt;commands&lt;/span&gt; whose &lt;span
-  title=&quot;command-facet-HiddenState&quot;&gt;Hidden State&lt;/span&gt; facet is false
-  (visible) and whose elements are &lt;span&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;. For example, such commands could be
-  listed in the user agent's menu bar. User agents are encouraged to
-  do this especially for commands that have &lt;span
-  title=&quot;command-facet-AccessKey&quot;&gt;Access Keys&lt;/span&gt;, as a way to
-  advertise those keys to the user.&lt;/p&gt;
+  &lt;p id=&quot;expose-commands-in-ui&quot;&gt;User agents may expose the &lt;span
+  title=&quot;concept-command&quot;&gt;commands&lt;/span&gt; that match the following criteria:&lt;/p&gt;
 
+  &lt;ul class=&quot;brief&quot;&gt;
 
+   &lt;li&gt;The &lt;span title=&quot;command-facet-HiddenState&quot;&gt;Hidden State&lt;/span&gt; facet is false (visible)&lt;/li&gt;
+
+   &lt;li&gt;The element is &lt;span&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; that has an associated &lt;span&gt;browsing
+   context&lt;/span&gt;.&lt;/li&gt;
+
+   &lt;li&gt;Neither the element nor any of its ancestors has a &lt;code title=&quot;attr-hidden&quot;&gt;hidden&lt;/code&gt;
+   attribute specified.&lt;/li&gt;
+
+   &lt;li&gt;The element is not a &lt;code&gt;menuitem&lt;/code&gt; element, or it is a child of a &lt;span&gt;currently
+   relevant &lt;code&gt;menu&lt;/code&gt; element&lt;/span&gt;, or it has an &lt;span
+   title=&quot;command-facet-accesskey&quot;&gt;Access Key&lt;/span&gt;.&lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p&gt;User agents are encouraged to do this especially for commands that have &lt;span
+  title=&quot;command-facet-AccessKey&quot;&gt;Access Keys&lt;/span&gt;, as a way to advertise those keys to the
+  user.&lt;/p&gt;
+
+  &lt;p class=&quot;example&quot;&gt;For example, such commands could be listed in the user agent's menu bar.&lt;/p&gt;
+
+
   &lt;div class=&quot;impl&quot;&gt;
 
   &lt;h5&gt;&lt;dfn title=&quot;a-command&quot;&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
@@ -68905,10 +68834,10 @@
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-Type&quot;&gt;Type&lt;/span&gt; of the command
   is &quot;radio&quot; if the &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt;
-  attribute is in the &lt;code title=&quot;attr-input-type-radio&quot;&gt;Radio
-  Button&lt;/code&gt; state, &quot;checkbox&quot; if the &lt;code
-  title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;code
-  title=&quot;attr-input-type-checkbox&quot;&gt;Checkbox&lt;/code&gt; state, and
+  attribute is in the &lt;span title=&quot;attr-input-type-radio&quot;&gt;Radio
+  Button&lt;/span&gt; state, &quot;checkbox&quot; if the &lt;code
+  title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
+  title=&quot;attr-input-type-checkbox&quot;&gt;Checkbox&lt;/span&gt; state, and
   &quot;command&quot; otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-ID&quot;&gt;ID&lt;/span&gt; of the command is
@@ -69055,16 +68984,16 @@
 
 
   &lt;h5&gt;Using the &lt;dfn
-  title=&quot;command-element&quot;&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; element to define
+  title=&quot;command-element&quot;&gt;&lt;code&gt;menuitem&lt;/code&gt;&lt;/dfn&gt; element to define
   a command&lt;/h5&gt;
 
-  &lt;p&gt;A &lt;code&gt;command&lt;/code&gt; element that does not have a &lt;code
-  title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt; attribute &lt;span
+  &lt;p&gt;A &lt;code&gt;menuitem&lt;/code&gt; element that does not have a &lt;code
+  title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attribute &lt;span
   title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-Type&quot;&gt;Type&lt;/span&gt; of the command
-  is &quot;radio&quot; if the &lt;code&gt;command&lt;/code&gt;'s &lt;code
-  title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is
+  is &quot;radio&quot; if the &lt;code&gt;menuitem&lt;/code&gt;'s &lt;code
+  title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt; attribute is
   &quot;&lt;code&gt;radio&lt;/code&gt;&quot;, &quot;checkbox&quot; if the attribute's value is
   &quot;&lt;code&gt;checkbox&lt;/code&gt;&quot;, and &quot;command&quot; otherwise.&lt;/p&gt;
 
@@ -69075,18 +69004,18 @@
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-Label&quot;&gt;Label&lt;/span&gt; of the command
   is the value of the element's &lt;code
-  title=&quot;attr-command-label&quot;&gt;label&lt;/code&gt; attribute, if there is one,
+  title=&quot;attr-menuitem-label&quot;&gt;label&lt;/code&gt; attribute, if there is one,
   or the empty string if it doesn't.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-Hint&quot;&gt;Hint&lt;/span&gt; of the command
   is the string given by the element's &lt;code
-  title=&quot;attr-command-title&quot;&gt;title&lt;/code&gt; attribute, if any, and the
+  title=&quot;attr-menuitem-title&quot;&gt;title&lt;/code&gt; attribute, if any, and the
   empty string if the attribute is absent.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-Icon&quot;&gt;Icon&lt;/span&gt; for the command
   is the &lt;span&gt;absolute URL&lt;/span&gt; obtained from &lt;span title=&quot;resolve
   a url&quot;&gt;resolving&lt;/span&gt; the value of the element's &lt;code
-  title=&quot;attr-command-icon&quot;&gt;icon&lt;/code&gt; attribute, relative to the
+  title=&quot;attr-menuitem-icon&quot;&gt;icon&lt;/code&gt; attribute, relative to the
   element, if it has such an attribute and resolving it is
   successful. Otherwise, there is no &lt;span
   title=&quot;command-facet-Icon&quot;&gt;Icon&lt;/span&gt; for the command.&lt;/p&gt;
@@ -69103,12 +69032,12 @@
   &lt;p&gt;The &lt;span title=&quot;command-facet-DisabledState&quot;&gt;Disabled
   State&lt;/span&gt; of the command is true if the element or one of its
   ancestors is &lt;span&gt;inert&lt;/span&gt;, or if the element has a &lt;code
-  title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt; attribute, and false
+  title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt; attribute, and false
   otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-CheckedState&quot;&gt;Checked State&lt;/span&gt;
   of the command is true (checked) if the element has a &lt;code
-  title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt; attribute, and false
+  title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt; attribute, and false
   otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt; of the
@@ -69120,9 +69049,9 @@
 
 
 
-  &lt;h5&gt;&lt;dfn title=&quot;command-command-command&quot;&gt;Using the &lt;code title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt; attribute on &lt;code&gt;command&lt;/code&gt; elements to define a command indirectly&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5&gt;&lt;dfn title=&quot;command-menuitem-command&quot;&gt;Using the &lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt; attribute on &lt;code&gt;menuitem&lt;/code&gt; elements to define a command indirectly&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;A &lt;code&gt;command&lt;/code&gt; element with a &lt;span&gt;master command&lt;/span&gt;
+  &lt;p&gt;A &lt;code&gt;menuitem&lt;/code&gt; element with a &lt;span&gt;master command&lt;/span&gt;
   &lt;span title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-Type&quot;&gt;Type&lt;/span&gt; of the command
@@ -72344,16 +72273,9 @@
    &lt;li&gt;&lt;code&gt;option&lt;/code&gt; elements that are &lt;span
    title=&quot;concept-option-disabled&quot;&gt;disabled&lt;/span&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements that have a &lt;code
-   title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt; attribute&lt;/li&gt;
+   &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements that have a &lt;code
+   title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt; attribute&lt;/li&gt;
 
-   &lt;li&gt;&lt;code&gt;li&lt;/code&gt; elements that are children of
-   &lt;code&gt;menu&lt;/code&gt; elements, and that have a child element that
-   defines a &lt;span title=&quot;concept-command&quot;&gt;command&lt;/span&gt;, if the
-   first such element's &lt;span
-   title=&quot;command-facet-DisabledState&quot;&gt;Disabled State&lt;/span&gt; facet
-   is true (disabled)&lt;/li&gt;
-
    &lt;li&gt;&lt;code&gt;fieldset&lt;/code&gt; elements that have a &lt;code
    title=&quot;attr-fieldset-disabled&quot;&gt;disabled&lt;/code&gt; attribute&lt;/li&gt;
 
@@ -72476,8 +72398,8 @@
        title=&quot;attr-input-type-reset&quot;&gt;Reset Button&lt;/span&gt;, or &lt;span
        title=&quot;attr-input-type-button&quot;&gt;Button&lt;/span&gt; state&lt;/li&gt;
 
-       &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements that do not have a &lt;code
-       title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt; attribute&lt;/li&gt;
+       &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements that do not have a &lt;code
+       title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt; attribute&lt;/li&gt;
 
        &lt;li&gt;elements that have their &lt;span&gt;tabindex focus flag&lt;/span&gt; set&lt;/li&gt;
 
@@ -72625,16 +72547,9 @@
      &lt;li&gt;&lt;code&gt;option&lt;/code&gt; elements that are not &lt;span
      title=&quot;concept-option-disabled&quot;&gt;disabled&lt;/span&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements that do not have a &lt;code
-     title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt; attribute&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements that do not have a &lt;code
+     title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt; attribute&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;li&lt;/code&gt; elements that are children of
-     &lt;code&gt;menu&lt;/code&gt; elements, and that have a child element that
-     defines a &lt;span title=&quot;concept-command&quot;&gt;command&lt;/span&gt;, if the
-     first such element's &lt;span
-     title=&quot;command-facet-DisabledState&quot;&gt;Disabled State&lt;/span&gt; facet
-     is false (not disabled)&lt;/li&gt;
-
      &lt;li&gt;&lt;code&gt;fieldset&lt;/code&gt; elements that do not have a &lt;code
      title=&quot;attr-fieldset-disabled&quot;&gt;disabled&lt;/code&gt; attribute&lt;/li&gt;
 
@@ -72679,16 +72594,16 @@
      title=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; is
      true&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements whose &lt;code
-     title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-     title=&quot;attr-command-type-state-checkbox&quot;&gt;Checkbox&lt;/span&gt; state
-     and that have a &lt;code title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt;
+     &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements whose &lt;code
+     title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
+     title=&quot;attr-menuitem-type-state-checkbox&quot;&gt;Checkbox&lt;/span&gt; state
+     and that have a &lt;code title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt;
      attribute&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements whose &lt;code
-     title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-     title=&quot;attr-command-type-state-radio&quot;&gt;Radio&lt;/span&gt; state and that
-     have a &lt;code title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt;
+     &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements whose &lt;code
+     title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
+     title=&quot;attr-menuitem-type-state-radio&quot;&gt;Radio&lt;/span&gt; state and that
+     have a &lt;code title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt;
      attribute&lt;/li&gt;
 
     &lt;/ul&gt;
@@ -72749,8 +72664,8 @@
      &lt;li&gt;&lt;code&gt;option&lt;/code&gt; elements that have a &lt;code
      title=&quot;attr-option-selected&quot;&gt;selected&lt;/code&gt; attribute&lt;/li&gt;
 &lt;!--
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements that have a &lt;code
-     title=&quot;attr-command-default&quot;&gt;default&lt;/code&gt; attribute&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements that have a &lt;code
+     title=&quot;attr-menuitem-default&quot;&gt;default&lt;/code&gt; attribute&lt;/li&gt;
 --&gt;
     &lt;/ul&gt;
 
@@ -90048,7 +89963,7 @@
 
      &lt;li&gt;&lt;code&gt;textarea&lt;/code&gt; elements&lt;/li&gt;
 
-     &lt;li&gt;&lt;code&gt;command&lt;/code&gt; elements&lt;/li&gt;
+     &lt;li&gt;&lt;code&gt;menuitem&lt;/code&gt; elements&lt;/li&gt;
 
      &lt;li&gt;Elements with a &lt;code title=&quot;attr-draggable&quot;&gt;draggable&lt;/code&gt;
      attribute set, if that would enable the user agent to allow the
@@ -90690,21 +90605,19 @@
   title=&quot;attr-accesskey&quot;&gt;accesskey&lt;/code&gt; content attribute is changed
   or the element is moved to another &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the user presses the key combination corresponding to the
-  &lt;span&gt;assigned access key&lt;/span&gt; for an element, if the element
-  &lt;span title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;, the
-  command's &lt;span title=&quot;command-facet-HiddenState&quot;&gt;Hidden
-  State&lt;/span&gt; facet is false (visible), the command's &lt;span
-  title=&quot;command-facet-DisabledState&quot;&gt;Disabled State&lt;/span&gt; facet is
-  also false (enabled), and the element is &lt;span&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;, then the user agent must trigger the
-  &lt;span title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt; of the command.&lt;/p&gt;
+  &lt;p&gt;When the user presses the key combination corresponding to the &lt;span&gt;assigned access key&lt;/span&gt;
+  for an element, if the element &lt;span title=&quot;concept-command&quot;&gt;defines a command&lt;/span&gt;, the
+  command's &lt;span title=&quot;command-facet-HiddenState&quot;&gt;Hidden State&lt;/span&gt; facet is false (visible),
+  the command's &lt;span title=&quot;command-facet-DisabledState&quot;&gt;Disabled State&lt;/span&gt; facet is also false
+  (enabled), the element is &lt;span&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; that has an associated
+  &lt;span&gt;browsing context&lt;/span&gt;, and neither the element nor any of its ancestors has a &lt;code
+  title=&quot;attr-hidden&quot;&gt;hidden&lt;/code&gt; attribute specified, then the user agent must trigger the &lt;span
+  title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt; of the command.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;User agents might expose elements that have an &lt;code
-  title=&quot;attr-accesskey&quot;&gt;accesskey&lt;/code&gt; attribute in other ways as
-  well, e.g. in a menu displayed in response to a specific key
-  combination.&lt;/p&gt; &lt;!-- the actual conformance criteria for this is in
-  the section that defines commands --&gt;
+  &lt;p class=&quot;note&quot;&gt;User agents &lt;a href=&quot;#expose-commands-in-ui&quot;&gt;might expose&lt;/a&gt; elements that have
+  an &lt;code title=&quot;attr-accesskey&quot;&gt;accesskey&lt;/code&gt; attribute in other ways as well, e.g. in a menu
+  displayed in response to a specific key combination.&lt;/p&gt; &lt;!-- the actual conformance criteria for
+  this is in the section that defines commands --&gt;
 
   &lt;hr&gt;
 
@@ -100516,12 +100429,10 @@
 
    &lt;dt&gt;&lt;dfn&gt;Void elements&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;code&gt;area&lt;/code&gt;, &lt;code&gt;base&lt;/code&gt;, &lt;code&gt;br&lt;/code&gt;,
-   &lt;code&gt;col&lt;/code&gt;, &lt;code&gt;command&lt;/code&gt;, &lt;code&gt;embed&lt;/code&gt;,
-   &lt;code&gt;hr&lt;/code&gt;, &lt;code&gt;img&lt;/code&gt;, &lt;code&gt;input&lt;/code&gt;,
-   &lt;code&gt;keygen&lt;/code&gt;, &lt;code&gt;link&lt;/code&gt;, &lt;code&gt;meta&lt;/code&gt;,
-   &lt;code&gt;param&lt;/code&gt;, &lt;code&gt;source&lt;/code&gt;, &lt;code&gt;track&lt;/code&gt;,
-   &lt;code&gt;wbr&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code&gt;area&lt;/code&gt;, &lt;code&gt;base&lt;/code&gt;, &lt;code&gt;br&lt;/code&gt;, &lt;code&gt;col&lt;/code&gt;, &lt;code&gt;embed&lt;/code&gt;,
+   &lt;code&gt;hr&lt;/code&gt;, &lt;code&gt;img&lt;/code&gt;, &lt;code&gt;input&lt;/code&gt;, &lt;code&gt;keygen&lt;/code&gt;, &lt;code&gt;link&lt;/code&gt;,
+   &lt;code&gt;menuitem&lt;/code&gt;, &lt;code&gt;meta&lt;/code&gt;, &lt;code&gt;param&lt;/code&gt;, &lt;code&gt;source&lt;/code&gt;,
+   &lt;code&gt;track&lt;/code&gt;, &lt;code&gt;wbr&lt;/code&gt;&lt;/dd&gt;
    &lt;!-- see also other places that say VOIDLIST --&gt;
 
    &lt;dt&gt;&lt;dfn&gt;Raw text elements&lt;/dfn&gt;&lt;/dt&gt;
@@ -102686,7 +102597,7 @@
    &lt;code&gt;base&lt;/code&gt;, &lt;code&gt;basefont&lt;/code&gt;, &lt;code&gt;bgsound&lt;/code&gt;,
    &lt;code&gt;blockquote&lt;/code&gt;, &lt;code&gt;body&lt;/code&gt;, &lt;code&gt;br&lt;/code&gt;,
    &lt;code&gt;button&lt;/code&gt;, &lt;code&gt;caption&lt;/code&gt;, &lt;code&gt;center&lt;/code&gt;,
-   &lt;code&gt;col&lt;/code&gt;, &lt;code&gt;colgroup&lt;/code&gt;, &lt;code&gt;command&lt;/code&gt;,
+   &lt;code&gt;col&lt;/code&gt;, &lt;code&gt;colgroup&lt;/code&gt;, &lt;code&gt;menuitem&lt;/code&gt;,
    &lt;code&gt;dd&lt;/code&gt;, &lt;code&gt;details&lt;/code&gt;, &lt;code&gt;dir&lt;/code&gt;,
    &lt;code&gt;div&lt;/code&gt;, &lt;code&gt;dl&lt;/code&gt;, &lt;code&gt;dt&lt;/code&gt;,
    &lt;code&gt;embed&lt;/code&gt;, &lt;code&gt;fieldset&lt;/code&gt;, &lt;code&gt;figcaption&lt;/code&gt;,
@@ -110397,15 +110308,13 @@
 
         &lt;p&gt;Append a U+003E GREATER-THAN SIGN character (&gt;).&lt;/p&gt;
 
-        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;current node&lt;/var&gt; is an
-        &lt;code&gt;area&lt;/code&gt;, &lt;code&gt;base&lt;/code&gt;, &lt;code&gt;basefont&lt;/code&gt;,
-        &lt;code&gt;bgsound&lt;/code&gt;, &lt;code&gt;br&lt;/code&gt;, &lt;code&gt;col&lt;/code&gt;,
-        &lt;code&gt;command&lt;/code&gt;, &lt;code&gt;embed&lt;/code&gt;, &lt;code&gt;frame&lt;/code&gt;,
-        &lt;code&gt;hr&lt;/code&gt;, &lt;code&gt;img&lt;/code&gt;, &lt;code&gt;input&lt;/code&gt;,
-        &lt;code&gt;keygen&lt;/code&gt;, &lt;code&gt;link&lt;/code&gt;, &lt;code&gt;meta&lt;/code&gt;,
-        &lt;code&gt;param&lt;/code&gt;, &lt;code&gt;source&lt;/code&gt;, &lt;code&gt;track&lt;/code&gt; or
-        &lt;code&gt;wbr&lt;/code&gt; element, then continue on to the next child
-        node at this point.&lt;/p&gt; &lt;!-- VOIDLIST superset --&gt;
+        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;current node&lt;/var&gt; is an &lt;code&gt;area&lt;/code&gt;, &lt;code&gt;base&lt;/code&gt;,
+        &lt;code&gt;basefont&lt;/code&gt;, &lt;code&gt;bgsound&lt;/code&gt;, &lt;code&gt;br&lt;/code&gt;, &lt;code&gt;col&lt;/code&gt;,
+        &lt;code&gt;embed&lt;/code&gt;, &lt;code&gt;frame&lt;/code&gt;, &lt;code&gt;hr&lt;/code&gt;, &lt;code&gt;img&lt;/code&gt;,
+        &lt;code&gt;input&lt;/code&gt;, &lt;code&gt;keygen&lt;/code&gt;, &lt;code&gt;link&lt;/code&gt;, &lt;code&gt;menuitem&lt;/code&gt;,
+        &lt;code&gt;meta&lt;/code&gt;, &lt;code&gt;param&lt;/code&gt;, &lt;code&gt;source&lt;/code&gt;, &lt;code&gt;track&lt;/code&gt; or
+        &lt;code&gt;wbr&lt;/code&gt; element, then continue on to the next child node at this point.&lt;/p&gt;
+        &lt;!-- VOIDLIST superset --&gt;
         &lt;!-- also, i guess: image and isindex, but we don't list those
         because we don't consider those &quot;elements&quot;, more &quot;macros&quot;, and
         thus we should never serialize them --&gt;
@@ -111303,7 +111212,7 @@
   &lt;pre class=&quot;css&quot;&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
 
 [hidden], area, base, basefont, command, datalist, head,
-input[type=hidden i], link, menu[type=context i], meta, noembed, noframes,
+input[type=hidden i], link, menu[type=popup i], meta, noembed, noframes,
 param, rp, script, source, style, track, title {
   display: none;
 }
@@ -114068,24 +113977,6 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;h4&gt;Toolbars&lt;/h4&gt;
-
-  &lt;p&gt;When a &lt;code&gt;menu&lt;/code&gt; element's &lt;code
-  title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-  title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state, the element is
-  expected to be treated as a replaced element with a height about two
-  lines high and a width derived from the contents of the element.&lt;/p&gt;
-
-  &lt;p&gt;The element is expected to have, by default, the appearance of a
-  toolbar on the user agent's platform. It is expected to contain the
-  menu that is &lt;span title=&quot;building menus and toolbars&quot;&gt;built&lt;/span&gt;
-  from the element.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;div class=&quot;impl&quot;&gt;
-
   &lt;h3&gt;Bindings&lt;/h3&gt;
 
   &lt;h4&gt;Introduction&lt;/h4&gt;
@@ -114123,6 +114014,11 @@
   'inline-block' box rendered as a button whose contents are the
   contents of the element.&lt;/p&gt;
 
+  &lt;p&gt;When the &lt;code&gt;button&lt;/code&gt; element's &lt;code title=&quot;attr-button-type&quot;&gt;type&lt;/code&gt; attribute is
+  in the &lt;span title=&quot;attr-button-type-menu-state&quot;&gt;Menu&lt;/span&gt; state, the user agent is expected to
+  indicate that activating the element will display a menu, e.g. by displaying a down-pointing
+  triangle after the button's label.&lt;/p&gt;
+
   &lt;/div&gt;
 
 
@@ -118363,7 +118259,7 @@
     &lt;/tr&gt;
 
     &lt;tr&gt;
-     &lt;th&gt;&lt;code&gt;command&lt;/code&gt;&lt;/th&gt;
+     &lt;th&gt;&lt;code&gt;menuitem&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;Menu command&lt;/td&gt;
      &lt;td&gt;&lt;span title=&quot;Metadata content&quot;&gt;metadata&lt;/span&gt;;
          &lt;span title=&quot;Flow content&quot;&gt;flow&lt;/span&gt;;
@@ -118372,14 +118268,14 @@
          &lt;span title=&quot;Phrasing content&quot;&gt;phrasing&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;empty&lt;/td&gt;
      &lt;td&gt;&lt;span title=&quot;global attributes&quot;&gt;globals&lt;/span&gt;;
-         &lt;code title=&quot;attr-command-type&quot;&gt;type&lt;/code&gt;;
-         &lt;code title=&quot;attr-command-label&quot;&gt;label&lt;/code&gt;;
-         &lt;code title=&quot;attr-command-icon&quot;&gt;icon&lt;/code&gt;;
-         &lt;code title=&quot;attr-command-disabled&quot;&gt;disabled&lt;/code&gt;;
-         &lt;code title=&quot;attr-command-checked&quot;&gt;checked&lt;/code&gt;;
-         &lt;code title=&quot;attr-command-radiogroup&quot;&gt;radiogroup&lt;/code&gt;;
-         &lt;code title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt;&lt;/td&gt;
-     &lt;td&gt;&lt;code&gt;HTMLCommandElement&lt;/code&gt;&lt;/td&gt;
+         &lt;code title=&quot;attr-menuitem-type&quot;&gt;type&lt;/code&gt;;
+         &lt;code title=&quot;attr-menuitem-label&quot;&gt;label&lt;/code&gt;;
+         &lt;code title=&quot;attr-menuitem-icon&quot;&gt;icon&lt;/code&gt;;
+         &lt;code title=&quot;attr-menuitem-disabled&quot;&gt;disabled&lt;/code&gt;;
+         &lt;code title=&quot;attr-menuitem-checked&quot;&gt;checked&lt;/code&gt;;
+         &lt;code title=&quot;attr-menuitem-radiogroup&quot;&gt;radiogroup&lt;/code&gt;;
+         &lt;code title=&quot;attr-menuitem-command&quot;&gt;command&lt;/code&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;code&gt;HTMLMenuItemElement&lt;/code&gt;&lt;/td&gt;
     &lt;/tr&gt;
 
     &lt;tr&gt;
@@ -118836,7 +118732,7 @@
      &lt;th&gt;&lt;code&gt;li&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;List item&lt;/td&gt;
      &lt;td&gt;none&lt;/td&gt;
-     &lt;td&gt;&lt;code&gt;ol&lt;/code&gt;; &lt;code&gt;ul&lt;/code&gt;; &lt;code&gt;menu&lt;/code&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;code&gt;ol&lt;/code&gt;; &lt;code&gt;ul&lt;/code&gt;; &lt;code&gt;menu&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;span title=&quot;Flow content&quot;&gt;flow&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;span title=&quot;global attributes&quot;&gt;globals&lt;/span&gt;;
          &lt;code title=&quot;attr-li-value&quot;&gt;value&lt;/code&gt;*&lt;/td&gt;
@@ -118891,11 +118787,14 @@
     &lt;tr&gt;
      &lt;th&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/th&gt;
      &lt;td&gt;Menu of commands&lt;/td&gt;
-     &lt;td&gt;&lt;span title=&quot;Flow content&quot;&gt;flow&lt;/span&gt;;
-         &lt;span title=&quot;Interactive content&quot;&gt;interactive&lt;/span&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;span title=&quot;Flow content&quot;&gt;flow&lt;/span&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;span title=&quot;Flow content&quot;&gt;flow&lt;/span&gt;;
+         &lt;code&gt;menu&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;li&lt;/code&gt;*;
-         &lt;span title=&quot;Flow content&quot;&gt;flow&lt;/span&gt;&lt;/td&gt;
+         &lt;span title=&quot;Flow content&quot;&gt;flow&lt;/span&gt;*;
+         &lt;code&gt;menuitem&lt;/code&gt;*;
+         &lt;code&gt;hr&lt;/code&gt;*;
+         &lt;code&gt;menu&lt;/code&gt;*&lt;/td&gt;
      &lt;td&gt;&lt;span title=&quot;global attributes&quot;&gt;globals&lt;/span&gt;;
          &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt;;
          &lt;code title=&quot;attr-menu-label&quot;&gt;label&lt;/code&gt;&lt;/td&gt;
@@ -119534,15 +119433,12 @@
   &lt;p class=&quot;tablenote&quot;&gt;&lt;small&gt;An asterisk (*) in a cell indicates that the actual rules are more
   complicated than indicated in the table above.&lt;/small&gt;&lt;/p&gt;
 
-  &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that
-  list the given categories in their content model, not to elements
-  that themselves are in those categories. For example, the
-  &lt;code&gt;a&lt;/code&gt; element's &quot;Parents&quot; column says &quot;phrasing&quot;, so any
-  element whose content model contains the &quot;phrasing&quot; category could
-  be a parent of an &lt;code&gt;a&lt;/code&gt; element. Since the &quot;flow&quot; category
-  includes all the &quot;phrasing&quot; elements, that means the
-  &lt;code&gt;address&lt;/code&gt; element could be a parent to an &lt;code&gt;a&lt;/code&gt;
-  element.&lt;/p&gt;
+  &lt;p&gt;&dagger; Categories in the &quot;Parents&quot; column refer to parents that list the given categories in
+  their content model, not to elements that themselves are in those categories. For example, the
+  &lt;code&gt;a&lt;/code&gt; element's &quot;Parents&quot; column says &quot;phrasing&quot;, so any element whose content model
+  contains the &quot;phrasing&quot; category could be a parent of an &lt;code&gt;a&lt;/code&gt; element. Since the &quot;flow&quot;
+  category includes all the &quot;phrasing&quot; elements, that means the &lt;code&gt;th&lt;/code&gt; element could be a
+  parent to an &lt;code&gt;a&lt;/code&gt; element.&lt;/p&gt;
 
 
 
@@ -119564,7 +119460,6 @@
      &lt;td&gt; &lt;span&gt;Metadata content&lt;/span&gt;
      &lt;td&gt;
       &lt;code&gt;base&lt;/code&gt;;
-      &lt;code&gt;command&lt;/code&gt;;
       &lt;code&gt;link&lt;/code&gt;;
       &lt;code&gt;meta&lt;/code&gt;;
       &lt;code&gt;noscript&lt;/code&gt;;
@@ -119592,7 +119487,6 @@
       &lt;code&gt;canvas&lt;/code&gt;;
       &lt;code&gt;cite&lt;/code&gt;;
       &lt;code&gt;code&lt;/code&gt;;
-      &lt;code&gt;command&lt;/code&gt;;
       &lt;code&gt;data&lt;/code&gt;;
       &lt;code&gt;datalist&lt;/code&gt;;
       &lt;code&gt;del&lt;/code&gt;;
@@ -119702,7 +119596,6 @@
       &lt;code&gt;canvas&lt;/code&gt;;
       &lt;code&gt;cite&lt;/code&gt;;
       &lt;code&gt;code&lt;/code&gt;;
-      &lt;code&gt;command&lt;/code&gt;;
       &lt;code&gt;data&lt;/code&gt;;
       &lt;code&gt;datalist&lt;/code&gt;;
       &lt;code&gt;del&lt;/code&gt;;
@@ -119780,7 +119673,6 @@
       &lt;code&gt;audio&lt;/code&gt; (if the &lt;code title=&quot;attr-media-controls&quot;&gt;controls&lt;/code&gt; attribute is present);
       &lt;code&gt;img&lt;/code&gt; (if the &lt;code title=&quot;attr-hyperlink-usemap&quot;&gt;usemap&lt;/code&gt; attribute is present);
       &lt;code&gt;input&lt;/code&gt; (if the &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;span title=&quot;attr-input-type-hidden&quot;&gt;Hidden&lt;/span&gt; state);
-      &lt;code&gt;menu&lt;/code&gt; (if the &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state);
       &lt;code&gt;object&lt;/code&gt; (if the &lt;code title=&quot;attr-hyperlink-usemap&quot;&gt;usemap&lt;/code&gt; attribute is present)&lt;!-- see also comment in &lt;object&gt; section --&gt;;
       &lt;code&gt;video&lt;/code&gt; (if the &lt;code title=&quot;attr-media-controls&quot;&gt;controls&lt;/code&gt; attribute is present)
 
@@ -119936,7 +119828,7 @@
       &lt;code&gt;audio&lt;/code&gt; (if the &lt;code title=&quot;attr-media-controls&quot;&gt;controls&lt;/code&gt; attribute is present);
       &lt;code&gt;dl&lt;/code&gt; (if the element's children include at least one name-value group);
       &lt;code&gt;input&lt;/code&gt; (if the &lt;code title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute is &lt;em&gt;not&lt;/em&gt; in the &lt;span title=&quot;attr-input-type-hidden&quot;&gt;Hidden&lt;/span&gt; state);
-      &lt;code&gt;menu&lt;/code&gt; (if the &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state or the &lt;span title=&quot;list state&quot;&gt;list&lt;/span&gt; state);
+      &lt;code&gt;menu&lt;/code&gt; (if the &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;toolbar state&quot;&gt;toolbar&lt;/span&gt; state);
       &lt;code&gt;ol&lt;/code&gt; (if the element's children include at least one &lt;code&gt;li&lt;/code&gt; element);
       &lt;code&gt;ul&lt;/code&gt; (if the element's children include at least one &lt;code&gt;li&lt;/code&gt; element);
       &lt;span title=&quot;text content&quot;&gt;Text&lt;/span&gt; that is not &lt;span&gt;inter-element whitespace&lt;/span&gt;
@@ -120044,7 +119936,7 @@
      &lt;td&gt; &lt;span&gt;Preferred MIME name&lt;/span&gt; of a character encoding*
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;checked&lt;/code&gt;
-     &lt;td&gt; &lt;code title=&quot;attr-command-checked&quot;&gt;command&lt;/code&gt;;
+     &lt;td&gt; &lt;code title=&quot;attr-menuitem-checked&quot;&gt;menuitem&lt;/code&gt;;
           &lt;code title=&quot;attr-input-checked&quot;&gt;input&lt;/code&gt;
      &lt;td&gt; Whether the command or control is checked
      &lt;td&gt; &lt;span&gt;Boolean attribute&lt;/span&gt;
@@ -120074,7 +119966,7 @@
      &lt;td&gt; &lt;span&gt;Valid non-negative integer&lt;/span&gt; greater than zero
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;command&lt;/code&gt;
-     &lt;td&gt; &lt;code title=&quot;attr-command-command&quot;&gt;command&lt;/code&gt;
+     &lt;td&gt; &lt;code title=&quot;attr-menuitem-command&quot;&gt;menuitem&lt;/code&gt;
      &lt;td&gt; Command definition
      &lt;td&gt; &lt;span title=&quot;concept-id&quot;&gt;ID&lt;/span&gt;*
     &lt;tr&gt;
@@ -120161,7 +120053,7 @@
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;disabled&lt;/code&gt;
      &lt;td&gt; &lt;code title=&quot;attr-fe-disabled&quot;&gt;button&lt;/code&gt;;
-          &lt;code title=&quot;attr-command-disabled&quot;&gt;command&lt;/code&gt;;
+          &lt;code title=&quot;attr-menuitem-disabled&quot;&gt;menuitem&lt;/code&gt;;
           &lt;code title=&quot;attr-fieldset-disabled&quot;&gt;fieldset&lt;/code&gt;;
           &lt;code title=&quot;attr-fe-disabled&quot;&gt;input&lt;/code&gt;;
           &lt;code title=&quot;attr-fe-disabled&quot;&gt;keygen&lt;/code&gt;;
@@ -120302,7 +120194,7 @@
      &lt;td&gt; &lt;a href=&quot;#attribute-text&quot;&gt;Text&lt;/a&gt;*
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;icon&lt;/code&gt;
-     &lt;td&gt; &lt;code title=&quot;attr-command-icon&quot;&gt;command&lt;/code&gt;
+     &lt;td&gt; &lt;code title=&quot;attr-menuitem-icon&quot;&gt;menuitem&lt;/code&gt;
      &lt;td&gt; Icon for the command
      &lt;td&gt; &lt;span&gt;Valid non-empty URL potentially surrounded by spaces&lt;/span&gt;
     &lt;tr&gt;
@@ -120378,7 +120270,7 @@
           &quot;&lt;code title=&quot;attr-track-kind-metadata&quot;&gt;metadata&lt;/code&gt;&quot;
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;label&lt;/code&gt;
-     &lt;td&gt; &lt;code title=&quot;attr-command-label&quot;&gt;command&lt;/code&gt;;
+     &lt;td&gt; &lt;code title=&quot;attr-menuitem-label&quot;&gt;menuitem&lt;/code&gt;;
           &lt;code title=&quot;attr-menu-label&quot;&gt;menu&lt;/code&gt;;
           &lt;code title=&quot;attr-optgroup-label&quot;&gt;optgroup&lt;/code&gt;;
           &lt;code title=&quot;attr-option-label&quot;&gt;option&lt;/code&gt;;
@@ -120561,7 +120453,7 @@
           &quot;&lt;code title=&quot;attr-media-preload-auto&quot;&gt;auto&lt;/code&gt;&quot;
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;radiogroup&lt;/code&gt;
-     &lt;td&gt; &lt;code title=&quot;attr-command-radiogroup&quot;&gt;command&lt;/code&gt;
+     &lt;td&gt; &lt;code title=&quot;attr-menuitem-radiogroup&quot;&gt;menuitem&lt;/code&gt;
      &lt;td&gt; Name of group of commands to treat as a radio button group
      &lt;td&gt; &lt;a href=&quot;#attribute-text&quot;&gt;Text&lt;/a&gt;
     &lt;tr&gt;
@@ -120741,7 +120633,7 @@
      &lt;td&gt; &lt;a href=&quot;#attribute-text&quot;&gt;Text&lt;/a&gt;
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;title&lt;/code&gt;
-     &lt;td&gt; &lt;code title=&quot;attr-command-title&quot;&gt;command&lt;/code&gt;
+     &lt;td&gt; &lt;code title=&quot;attr-menuitem-title&quot;&gt;menuitem&lt;/code&gt;
      &lt;td&gt; Hint describing the command
      &lt;td&gt; &lt;a href=&quot;#attribute-text&quot;&gt;Text&lt;/a&gt;
     &lt;tr&gt;
@@ -120773,14 +120665,15 @@
      &lt;td&gt; Type of button
      &lt;td&gt; &quot;&lt;code title=&quot;attr-button-type-submit&quot;&gt;submit&lt;/code&gt;&quot;;
           &quot;&lt;code title=&quot;attr-button-type-reset&quot;&gt;reset&lt;/code&gt;&quot;;
-          &quot;&lt;code title=&quot;attr-button-type-button&quot;&gt;button&lt;/code&gt;&quot;
+          &quot;&lt;code title=&quot;attr-button-type-button&quot;&gt;button&lt;/code&gt;&quot;;
+          &quot;&lt;code title=&quot;attr-button-type-menu&quot;&gt;menu&lt;/code&gt;&quot;
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
-     &lt;td&gt; &lt;code title=&quot;attr-command-type&quot;&gt;command&lt;/code&gt;
+     &lt;td&gt; &lt;code title=&quot;attr-menuitem-type&quot;&gt;menuitem&lt;/code&gt;
      &lt;td&gt; Type of command
-     &lt;td&gt; &quot;&lt;code title=&quot;attr-command-type-keyword-command&quot;&gt;command&lt;/code&gt;&quot;;
-          &quot;&lt;code title=&quot;attr-command-type-keyword-checkbox&quot;&gt;checkbox&lt;/code&gt;&quot;;
-          &quot;&lt;code title=&quot;attr-command-type-keyword-radio&quot;&gt;radio&lt;/code&gt;&quot;
+     &lt;td&gt; &quot;&lt;code title=&quot;attr-menuitem-type-keyword-command&quot;&gt;command&lt;/code&gt;&quot;;
+          &quot;&lt;code title=&quot;attr-menuitem-type-keyword-checkbox&quot;&gt;checkbox&lt;/code&gt;&quot;;
+          &quot;&lt;code title=&quot;attr-menuitem-type-keyword-radio&quot;&gt;radio&lt;/code&gt;&quot;
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
      &lt;td&gt; &lt;code title=&quot;attr-embed-type&quot;&gt;embed&lt;/code&gt;;
@@ -120799,7 +120692,7 @@
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;type&lt;/code&gt;
      &lt;td&gt; &lt;code title=&quot;attr-menu-type&quot;&gt;menu&lt;/code&gt;
      &lt;td&gt; Type of menu
-     &lt;td&gt; &quot;&lt;code title=&quot;context menu state&quot;&gt;context&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;toolbar&lt;/code&gt;&quot;
+     &lt;td&gt; &quot;&lt;code title=&quot;popup menu state&quot;&gt;popup&lt;/code&gt;&quot;; &quot;&lt;code title=&quot;toolbar state&quot;&gt;toolbar&lt;/code&gt;&quot;
     &lt;tr&gt;
      &lt;th&gt; &lt;code title=&quot;&quot;&gt;typemustmatch&lt;/code&gt;
      &lt;td&gt; &lt;code title=&quot;attr-object-typemustmatch&quot;&gt;object&lt;/code&gt;
@@ -121462,8 +121355,8 @@
      &lt;td&gt; &lt;code&gt;HTMLTableColElement&lt;/code&gt; : &lt;code&gt;HTMLElement&lt;/code&gt;
 
     &lt;tr&gt;
-     &lt;td&gt; &lt;code&gt;command&lt;/code&gt;
-     &lt;td&gt; &lt;code&gt;HTMLCommandElement&lt;/code&gt; : &lt;code&gt;HTMLElement&lt;/code&gt;
+     &lt;td&gt; &lt;code&gt;menuitem&lt;/code&gt;
+     &lt;td&gt; &lt;code&gt;HTMLMenuItemElement&lt;/code&gt; : &lt;code&gt;HTMLElement&lt;/code&gt;
 
     &lt;tr&gt;
      &lt;td&gt; &lt;code&gt;data&lt;/code&gt;


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014461.html">[html5] r7601 - [e] (0) ack for sorting model Affected topics: HTML
</A></li>
	<LI>Next message: <A HREF="014463.html">[html5] r7603 - [giow] (3) More things you can access on Window.	Affected topics: DOM APIs, Security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14462">[ date ]</a>
              <a href="thread.html#14462">[ thread ]</a>
              <a href="subject.html#14462">[ subject ]</a>
              <a href="author.html#14462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
