<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7372 - [e] (0) Fix the use of 'must' in this algorithm,	which was inconsistent. This ch [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7372%20-%20%5Be%5D%20%280%29%20Fix%20the%20use%20of%20%27must%27%20in%20this%20algorithm%2C%0A%09which%20was%20inconsistent.%20This%20ch%20%5B...%5D&In-Reply-To=%3C20120918220956.6FC81805C0DF%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014234.html">
   <LINK REL="Next"  HREF="014236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7372 - [e] (0) Fix the use of 'must' in this algorithm,	which was inconsistent. This ch [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7372%20-%20%5Be%5D%20%280%29%20Fix%20the%20use%20of%20%27must%27%20in%20this%20algorithm%2C%0A%09which%20was%20inconsistent.%20This%20ch%20%5B...%5D&In-Reply-To=%3C20120918220956.6FC81805C0DF%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7372 - [e] (0) Fix the use of 'must' in this algorithm,	which was inconsistent. This ch [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Sep 18 15:09:56 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014234.html">[html5] r7371 - [e] (0) Introduce a /page showing/ flag to be used	in future checkins. Affected [...]
</A></li>
        <LI>Next message: <A HREF="014236.html">[html5] r7373 - [giow] (2) Add some guards to make	pageshow/pagehide events always fire consiste [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14235">[ date ]</a>
              <a href="thread.html#14235">[ thread ]</a>
              <a href="subject.html#14235">[ subject ]</a>
              <a href="author.html#14235">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-09-18 15:09:55 -0700 (Tue, 18 Sep 2012)
New Revision: 7372

Modified:
   complete.html
   index
   source
Log:
[e] (0) Fix the use of 'must' in this algorithm, which was inconsistent. This change should have no normative side-effects.
Affected topics: HTML

Modified: complete.html
===================================================================
--- complete.html	2012-09-18 22:02:32 UTC (rev 7371)
+++ complete.html	2012-09-18 22:09:55 UTC (rev 7372)
@@ -71475,17 +71475,16 @@
   the new page&lt;/a&gt;.&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If there is no longer a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object for the
-   entry in question, the user agent must
-   &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV history traversal after eviction--&gt;
-   the browsing context to the location for that entry to perform an
-   &lt;a href=#entry-update&gt;entry update&lt;/a&gt; of that entry, and abort these steps. The
-   &quot;&lt;a href=#navigate&gt;navigate&lt;/a&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
-   algorithm to complete the traversal, at which point there
-   &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object and so this step gets
-   skipped. The navigation must be done using the same &lt;a href=#source-browsing-context&gt;source
-   browsing context&lt;/a&gt; as was used the first time this entry was
-   created. (This can never happen with &lt;a href=#replacement-enabled&gt;replacement
-   enabled&lt;/a&gt;.)&lt;/li&gt;
+   entry in question, &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV history traversal
+   after eviction--&gt; the browsing context to the location for that
+   entry to perform an &lt;a href=#entry-update&gt;entry update&lt;/a&gt; of that entry, and
+   abort these steps. The &quot;&lt;a href=#navigate&gt;navigate&lt;/a&gt;&quot; algorithm reinvokes
+   this &quot;traverse&quot; algorithm to complete the traversal, at which point
+   there &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object and so this step
+   gets skipped. The navigation must be done using the same
+   &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt; as was used the first time
+   this entry was created. (This can never happen with
+   &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;.)&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;'s title was not set by the
    &lt;code title=dom-history-pushState&gt;&lt;a href=#dom-history-pushstate&gt;pushState()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-history-replaceState&gt;&lt;a href=#dom-history-replacestate&gt;replaceState()&lt;/a&gt;&lt;/code&gt; methods,
@@ -71500,45 +71499,51 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a different
    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object than the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;
-   then the user agent must run the following substeps:&lt;/p&gt;
+   then the following substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;If the browsing context is a &lt;a href=#top-level-browsing-context&gt;top-level browsing
-     context&lt;/a&gt;, but not an &lt;a href=#auxiliary-browsing-context&gt;auxiliary browsing
-     context&lt;/a&gt;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;
-     is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
-     &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the
-     &lt;a href=#current-entry&gt;current entry&lt;/a&gt;, then the following sub-sub-steps must
-     be run:
+    &lt;ol&gt;&lt;li&gt;
 
-      &lt;ol&gt;&lt;li&gt;The current &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt; must be
+      &lt;p&gt;If the browsing context is a &lt;a href=#top-level-browsing-context&gt;top-level browsing
+      context&lt;/a&gt;, but not an &lt;a href=#auxiliary-browsing-context&gt;auxiliary browsing
+      context&lt;/a&gt;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
+      &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;
+      is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
+      &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the
+      &lt;a href=#current-entry&gt;current entry&lt;/a&gt;, then run the following
+      sub-sub-steps:&lt;/p&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;The current &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt; must be
        stored with all the entries in the history that are associated
        with &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects with the &lt;a href=#same-origin&gt;same
        origin&lt;/a&gt; as the &lt;a href=#active-document&gt;active document&lt;/a&gt; &lt;em&gt;and&lt;/em&gt;
        that are contiguous with the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;.&lt;/li&gt;
 
-       &lt;li id=resetBCName&gt;The browsing context's &lt;a href=#browsing-context-name&gt;browsing
+       &lt;li id=resetBCName&gt;&lt;p&gt;The browsing context's &lt;a href=#browsing-context-name&gt;browsing
        context name&lt;/a&gt; must be unset.&lt;/li&gt;
 
       &lt;/ol&gt;&lt;/li&gt;
 
-     &lt;li id=appcache-history-2&gt;The user agent must make the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object the
-     &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
-     context&lt;/a&gt;.&lt;/li&gt;
+     &lt;li id=appcache-history-2&gt;&lt;p&gt;Make the &lt;var title=&quot;&quot;&gt;specified
+     entry&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object the &lt;a href=#active-document&gt;active
+     document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;.&lt;/li&gt;
 
-     &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a &lt;a href=#browsing-context-name&gt;browsing
-     context name&lt;/a&gt; stored with it, then the following
-     sub-sub-steps must be run:
+     &lt;li&gt;
 
-      &lt;ol&gt;&lt;li&gt;The browsing context's &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt;
-       must be set to the name stored with the specified entry.&lt;/li&gt;
+      &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a
+      &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt; stored with it, then run the
+      following sub-sub-steps:&lt;/p&gt;
 
-       &lt;li&gt;Any &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt; stored with the
-       entries in the history that are associated with
-       &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects with the &lt;a href=#same-origin&gt;same origin&lt;/a&gt;
-       as the new &lt;a href=#active-document&gt;active document&lt;/a&gt;, and that are
-       contiguous with the specified entry, must be cleared.&lt;/li&gt;
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the browsing context's &lt;a href=#browsing-context-name&gt;browsing context
+       name&lt;/a&gt; to the name stored with the specified
+       entry.&lt;/li&gt;
 
+       &lt;li&gt;&lt;p&gt;Clear any &lt;a href=#browsing-context-name title=&quot;browsing context name&quot;&gt;browsing
+       context names&lt;/a&gt; stored with all entries in the history
+       that are associated with &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects with the
+       &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the new &lt;a href=#active-document&gt;active
+       document&lt;/a&gt; and that are contiguous with the specified
+       entry.&lt;/li&gt;
+
       &lt;/ol&gt;&lt;/li&gt;
 
      &lt;li id=history-autocomplete&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;specified
@@ -71546,22 +71551,26 @@
      &lt;a href=#autofill-field-name&gt;autofill field name&lt;/a&gt; is &quot;&lt;code title=attr-fe-autocomplete-off&gt;&lt;a href=#attr-fe-autocomplete-off&gt;off&lt;/a&gt;&lt;/code&gt;&quot;, invoke the &lt;a href=#concept-form-reset-control title=concept-form-reset-control&gt;reset algorithm&lt;/a&gt; of each
      of those elements.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is
-     &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to fire a &lt;code title=event-pageshow&gt;&lt;a href=#event-pageshow&gt;pageshow&lt;/a&gt;&lt;/code&gt; event at the
-     &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, but
-     with its &lt;code title=dom-event-target&gt;&lt;a href=#dom-event-target&gt;target&lt;/a&gt;&lt;/code&gt; set to the
-     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object (and the &lt;code title=dom-event-currentTarget&gt;currentTarget&lt;/code&gt; set to the
-     &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object), using the
-     &lt;code&gt;&lt;a href=#pagetransitionevent&gt;PageTransitionEvent&lt;/a&gt;&lt;/code&gt; interface, with the &lt;code title=dom-PageTransitionEvent-persisted&gt;&lt;a href=#dom-pagetransitionevent-persisted&gt;persisted&lt;/a&gt;&lt;/code&gt;
-     attribute initialized to true. This event must not bubble, must
-     not be cancelable, and has no default action.&lt;/li&gt;
+     &lt;li&gt;
 
-     &lt;!-- an interesting thing to test would be to traverse back
-     during onload, before the first pageshow has fired, and then to
-     traverse forward again, and see if we get _two_ pageshows. If so,
-     it indicates that the history traversal task source has a higher
-     priority than the DOM manipulation task source. --&gt;
+      &lt;p&gt;If the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to run the
+      following sub-sub-steps:&lt;/p&gt;
 
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Fire a &lt;code title=event-pageshow&gt;&lt;a href=#event-pageshow&gt;pageshow&lt;/a&gt;&lt;/code&gt;
+       event at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of that
+       &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, but with its &lt;code title=dom-event-target&gt;&lt;a href=#dom-event-target&gt;target&lt;/a&gt;&lt;/code&gt; set to the
+       &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object (and the &lt;code title=dom-event-currentTarget&gt;currentTarget&lt;/code&gt; set to the
+       &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object), using the
+       &lt;code&gt;&lt;a href=#pagetransitionevent&gt;PageTransitionEvent&lt;/a&gt;&lt;/code&gt; interface, with the &lt;code title=dom-PageTransitionEvent-persisted&gt;&lt;a href=#dom-pagetransitionevent-persisted&gt;persisted&lt;/a&gt;&lt;/code&gt;
+       attribute initialized to true. This event must not bubble, must
+       not be cancelable, and has no default action.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;!-- an interesting thing to test would be to traverse back
+      during onload, before the first pageshow has fired, and then to
+      traverse forward again, and see if we get _two_ pageshows. If
+      so, it indicates that the history traversal task source has a
+      higher priority than the DOM manipulation task source. --&gt;&lt;/li&gt;
+
     &lt;/ol&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; to the URL of the
@@ -71631,8 +71640,7 @@
    initialized to &lt;var title=&quot;&quot;&gt;new URL&lt;/var&gt;. This event must bubble
    but not be cancelable and has no default action.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;a href=#current-entry&gt;current entry&lt;/a&gt; is now the &lt;var title=&quot;&quot;&gt;specified
-   entry&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;The &lt;a href=#current-entry&gt;current entry&lt;/a&gt; is now the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for the tasks mentioned above is the
   &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task source&lt;/a&gt;.&lt;/p&gt;

Modified: index
===================================================================
--- index	2012-09-18 22:02:32 UTC (rev 7371)
+++ index	2012-09-18 22:09:55 UTC (rev 7372)
@@ -71475,17 +71475,16 @@
   the new page&lt;/a&gt;.&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If there is no longer a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object for the
-   entry in question, the user agent must
-   &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV history traversal after eviction--&gt;
-   the browsing context to the location for that entry to perform an
-   &lt;a href=#entry-update&gt;entry update&lt;/a&gt; of that entry, and abort these steps. The
-   &quot;&lt;a href=#navigate&gt;navigate&lt;/a&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
-   algorithm to complete the traversal, at which point there
-   &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object and so this step gets
-   skipped. The navigation must be done using the same &lt;a href=#source-browsing-context&gt;source
-   browsing context&lt;/a&gt; as was used the first time this entry was
-   created. (This can never happen with &lt;a href=#replacement-enabled&gt;replacement
-   enabled&lt;/a&gt;.)&lt;/li&gt;
+   entry in question, &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV history traversal
+   after eviction--&gt; the browsing context to the location for that
+   entry to perform an &lt;a href=#entry-update&gt;entry update&lt;/a&gt; of that entry, and
+   abort these steps. The &quot;&lt;a href=#navigate&gt;navigate&lt;/a&gt;&quot; algorithm reinvokes
+   this &quot;traverse&quot; algorithm to complete the traversal, at which point
+   there &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object and so this step
+   gets skipped. The navigation must be done using the same
+   &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt; as was used the first time
+   this entry was created. (This can never happen with
+   &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;.)&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;'s title was not set by the
    &lt;code title=dom-history-pushState&gt;&lt;a href=#dom-history-pushstate&gt;pushState()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-history-replaceState&gt;&lt;a href=#dom-history-replacestate&gt;replaceState()&lt;/a&gt;&lt;/code&gt; methods,
@@ -71500,45 +71499,51 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a different
    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object than the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;
-   then the user agent must run the following substeps:&lt;/p&gt;
+   then the following substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;If the browsing context is a &lt;a href=#top-level-browsing-context&gt;top-level browsing
-     context&lt;/a&gt;, but not an &lt;a href=#auxiliary-browsing-context&gt;auxiliary browsing
-     context&lt;/a&gt;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
-     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;
-     is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
-     &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the
-     &lt;a href=#current-entry&gt;current entry&lt;/a&gt;, then the following sub-sub-steps must
-     be run:
+    &lt;ol&gt;&lt;li&gt;
 
-      &lt;ol&gt;&lt;li&gt;The current &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt; must be
+      &lt;p&gt;If the browsing context is a &lt;a href=#top-level-browsing-context&gt;top-level browsing
+      context&lt;/a&gt;, but not an &lt;a href=#auxiliary-browsing-context&gt;auxiliary browsing
+      context&lt;/a&gt;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
+      &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;
+      is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
+      &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the
+      &lt;a href=#current-entry&gt;current entry&lt;/a&gt;, then run the following
+      sub-sub-steps:&lt;/p&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;The current &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt; must be
        stored with all the entries in the history that are associated
        with &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects with the &lt;a href=#same-origin&gt;same
        origin&lt;/a&gt; as the &lt;a href=#active-document&gt;active document&lt;/a&gt; &lt;em&gt;and&lt;/em&gt;
        that are contiguous with the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;.&lt;/li&gt;
 
-       &lt;li id=resetBCName&gt;The browsing context's &lt;a href=#browsing-context-name&gt;browsing
+       &lt;li id=resetBCName&gt;&lt;p&gt;The browsing context's &lt;a href=#browsing-context-name&gt;browsing
        context name&lt;/a&gt; must be unset.&lt;/li&gt;
 
       &lt;/ol&gt;&lt;/li&gt;
 
-     &lt;li id=appcache-history-2&gt;The user agent must make the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object the
-     &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
-     context&lt;/a&gt;.&lt;/li&gt;
+     &lt;li id=appcache-history-2&gt;&lt;p&gt;Make the &lt;var title=&quot;&quot;&gt;specified
+     entry&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object the &lt;a href=#active-document&gt;active
+     document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;.&lt;/li&gt;
 
-     &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a &lt;a href=#browsing-context-name&gt;browsing
-     context name&lt;/a&gt; stored with it, then the following
-     sub-sub-steps must be run:
+     &lt;li&gt;
 
-      &lt;ol&gt;&lt;li&gt;The browsing context's &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt;
-       must be set to the name stored with the specified entry.&lt;/li&gt;
+      &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a
+      &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt; stored with it, then run the
+      following sub-sub-steps:&lt;/p&gt;
 
-       &lt;li&gt;Any &lt;a href=#browsing-context-name&gt;browsing context name&lt;/a&gt; stored with the
-       entries in the history that are associated with
-       &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects with the &lt;a href=#same-origin&gt;same origin&lt;/a&gt;
-       as the new &lt;a href=#active-document&gt;active document&lt;/a&gt;, and that are
-       contiguous with the specified entry, must be cleared.&lt;/li&gt;
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the browsing context's &lt;a href=#browsing-context-name&gt;browsing context
+       name&lt;/a&gt; to the name stored with the specified
+       entry.&lt;/li&gt;
 
+       &lt;li&gt;&lt;p&gt;Clear any &lt;a href=#browsing-context-name title=&quot;browsing context name&quot;&gt;browsing
+       context names&lt;/a&gt; stored with all entries in the history
+       that are associated with &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects with the
+       &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the new &lt;a href=#active-document&gt;active
+       document&lt;/a&gt; and that are contiguous with the specified
+       entry.&lt;/li&gt;
+
       &lt;/ol&gt;&lt;/li&gt;
 
      &lt;li id=history-autocomplete&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;specified
@@ -71546,22 +71551,26 @@
      &lt;a href=#autofill-field-name&gt;autofill field name&lt;/a&gt; is &quot;&lt;code title=attr-fe-autocomplete-off&gt;&lt;a href=#attr-fe-autocomplete-off&gt;off&lt;/a&gt;&lt;/code&gt;&quot;, invoke the &lt;a href=#concept-form-reset-control title=concept-form-reset-control&gt;reset algorithm&lt;/a&gt; of each
      of those elements.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is
-     &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to fire a &lt;code title=event-pageshow&gt;&lt;a href=#event-pageshow&gt;pageshow&lt;/a&gt;&lt;/code&gt; event at the
-     &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, but
-     with its &lt;code title=dom-event-target&gt;&lt;a href=#dom-event-target&gt;target&lt;/a&gt;&lt;/code&gt; set to the
-     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object (and the &lt;code title=dom-event-currentTarget&gt;currentTarget&lt;/code&gt; set to the
-     &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object), using the
-     &lt;code&gt;&lt;a href=#pagetransitionevent&gt;PageTransitionEvent&lt;/a&gt;&lt;/code&gt; interface, with the &lt;code title=dom-PageTransitionEvent-persisted&gt;&lt;a href=#dom-pagetransitionevent-persisted&gt;persisted&lt;/a&gt;&lt;/code&gt;
-     attribute initialized to true. This event must not bubble, must
-     not be cancelable, and has no default action.&lt;/li&gt;
+     &lt;li&gt;
 
-     &lt;!-- an interesting thing to test would be to traverse back
-     during onload, before the first pageshow has fired, and then to
-     traverse forward again, and see if we get _two_ pageshows. If so,
-     it indicates that the history traversal task source has a higher
-     priority than the DOM manipulation task source. --&gt;
+      &lt;p&gt;If the &lt;a href=#current-document-readiness&gt;current document readiness&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to run the
+      following sub-sub-steps:&lt;/p&gt;
 
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Fire a &lt;code title=event-pageshow&gt;&lt;a href=#event-pageshow&gt;pageshow&lt;/a&gt;&lt;/code&gt;
+       event at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of that
+       &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, but with its &lt;code title=dom-event-target&gt;&lt;a href=#dom-event-target&gt;target&lt;/a&gt;&lt;/code&gt; set to the
+       &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object (and the &lt;code title=dom-event-currentTarget&gt;currentTarget&lt;/code&gt; set to the
+       &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object), using the
+       &lt;code&gt;&lt;a href=#pagetransitionevent&gt;PageTransitionEvent&lt;/a&gt;&lt;/code&gt; interface, with the &lt;code title=dom-PageTransitionEvent-persisted&gt;&lt;a href=#dom-pagetransitionevent-persisted&gt;persisted&lt;/a&gt;&lt;/code&gt;
+       attribute initialized to true. This event must not bubble, must
+       not be cancelable, and has no default action.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;!-- an interesting thing to test would be to traverse back
+      during onload, before the first pageshow has fired, and then to
+      traverse forward again, and see if we get _two_ pageshows. If
+      so, it indicates that the history traversal task source has a
+      higher priority than the DOM manipulation task source. --&gt;&lt;/li&gt;
+
     &lt;/ol&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; to the URL of the
@@ -71631,8 +71640,7 @@
    initialized to &lt;var title=&quot;&quot;&gt;new URL&lt;/var&gt;. This event must bubble
    but not be cancelable and has no default action.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;a href=#current-entry&gt;current entry&lt;/a&gt; is now the &lt;var title=&quot;&quot;&gt;specified
-   entry&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;The &lt;a href=#current-entry&gt;current entry&lt;/a&gt; is now the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for the tasks mentioned above is the
   &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task source&lt;/a&gt;.&lt;/p&gt;

Modified: source
===================================================================
--- source	2012-09-18 22:02:32 UTC (rev 7371)
+++ source	2012-09-18 22:09:55 UTC (rev 7372)
@@ -83534,17 +83534,16 @@
   &lt;ol&gt;
 
    &lt;li&gt;&lt;p&gt;If there is no longer a &lt;code&gt;Document&lt;/code&gt; object for the
-   entry in question, the user agent must
-   &lt;span&gt;navigate&lt;/span&gt;&lt;!--DONAV history traversal after eviction--&gt;
-   the browsing context to the location for that entry to perform an
-   &lt;span&gt;entry update&lt;/span&gt; of that entry, and abort these steps. The
-   &quot;&lt;span&gt;navigate&lt;/span&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
-   algorithm to complete the traversal, at which point there
-   &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;Document&lt;/code&gt; object and so this step gets
-   skipped. The navigation must be done using the same &lt;span&gt;source
-   browsing context&lt;/span&gt; as was used the first time this entry was
-   created. (This can never happen with &lt;span&gt;replacement
-   enabled&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
+   entry in question, &lt;span&gt;navigate&lt;/span&gt;&lt;!--DONAV history traversal
+   after eviction--&gt; the browsing context to the location for that
+   entry to perform an &lt;span&gt;entry update&lt;/span&gt; of that entry, and
+   abort these steps. The &quot;&lt;span&gt;navigate&lt;/span&gt;&quot; algorithm reinvokes
+   this &quot;traverse&quot; algorithm to complete the traversal, at which point
+   there &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;Document&lt;/code&gt; object and so this step
+   gets skipped. The navigation must be done using the same
+   &lt;span&gt;source browsing context&lt;/span&gt; as was used the first time
+   this entry was created. (This can never happen with
+   &lt;span&gt;replacement enabled&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;span&gt;current entry&lt;/span&gt;'s title was not set by the
    &lt;code title=&quot;dom-history-pushState&quot;&gt;pushState()&lt;/code&gt; or &lt;code
@@ -83561,53 +83560,58 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a different
    &lt;code&gt;Document&lt;/code&gt; object than the &lt;span&gt;current entry&lt;/span&gt;
-   then the user agent must run the following substeps:&lt;/p&gt;
+   then the following substeps:&lt;/p&gt;
 
     &lt;ol&gt;
 
-     &lt;li&gt;If the browsing context is a &lt;span&gt;top-level browsing
-     context&lt;/span&gt;, but not an &lt;span&gt;auxiliary browsing
-     context&lt;/span&gt;, and the &lt;span&gt;origin&lt;/span&gt; of the
-     &lt;code&gt;Document&lt;/code&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;
-     is not the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the
-     &lt;span&gt;origin&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; of the
-     &lt;span&gt;current entry&lt;/span&gt;, then the following sub-sub-steps must
-     be run:
+     &lt;li&gt;
 
+      &lt;p&gt;If the browsing context is a &lt;span&gt;top-level browsing
+      context&lt;/span&gt;, but not an &lt;span&gt;auxiliary browsing
+      context&lt;/span&gt;, and the &lt;span&gt;origin&lt;/span&gt; of the
+      &lt;code&gt;Document&lt;/code&gt; of the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt;
+      is not the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the
+      &lt;span&gt;origin&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; of the
+      &lt;span&gt;current entry&lt;/span&gt;, then run the following
+      sub-sub-steps:&lt;/p&gt;
+
       &lt;ol&gt;
 
-       &lt;li&gt;The current &lt;span&gt;browsing context name&lt;/span&gt; must be
+       &lt;li&gt;&lt;p&gt;The current &lt;span&gt;browsing context name&lt;/span&gt; must be
        stored with all the entries in the history that are associated
        with &lt;code&gt;Document&lt;/code&gt; objects with the &lt;span&gt;same
        origin&lt;/span&gt; as the &lt;span&gt;active document&lt;/span&gt; &lt;em&gt;and&lt;/em&gt;
-       that are contiguous with the &lt;span&gt;current entry&lt;/span&gt;.&lt;/li&gt;
+       that are contiguous with the &lt;span&gt;current entry&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-       &lt;li id=&quot;resetBCName&quot;&gt;The browsing context's &lt;span&gt;browsing
-       context name&lt;/span&gt; must be unset.&lt;/li&gt;
+       &lt;li id=&quot;resetBCName&quot;&gt;&lt;p&gt;The browsing context's &lt;span&gt;browsing
+       context name&lt;/span&gt; must be unset.&lt;/p&gt;&lt;/li&gt;
 
       &lt;/ol&gt;
 
      &lt;/li&gt;
 
-     &lt;li id=&quot;appcache-history-2&quot;&gt;The user agent must make the &lt;var
-     title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;Document&lt;/code&gt; object the
-     &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing
-     context&lt;/span&gt;.&lt;/li&gt;
+     &lt;li id=&quot;appcache-history-2&quot;&gt;&lt;p&gt;Make the &lt;var title=&quot;&quot;&gt;specified
+     entry&lt;/var&gt;'s &lt;code&gt;Document&lt;/code&gt; object the &lt;span&gt;active
+     document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a &lt;span&gt;browsing
-     context name&lt;/span&gt; stored with it, then the following
-     sub-sub-steps must be run:
+     &lt;li&gt;
 
+      &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;specified entry&lt;/var&gt; has a
+      &lt;span&gt;browsing context name&lt;/span&gt; stored with it, then run the
+      following sub-sub-steps:&lt;/p&gt;
+
       &lt;ol&gt;
 
-       &lt;li&gt;The browsing context's &lt;span&gt;browsing context name&lt;/span&gt;
-       must be set to the name stored with the specified entry.&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;Set the browsing context's &lt;span&gt;browsing context
+       name&lt;/span&gt; to the name stored with the specified
+       entry.&lt;/p&gt;&lt;/li&gt;
 
-       &lt;li&gt;Any &lt;span&gt;browsing context name&lt;/span&gt; stored with the
-       entries in the history that are associated with
-       &lt;code&gt;Document&lt;/code&gt; objects with the &lt;span&gt;same origin&lt;/span&gt;
-       as the new &lt;span&gt;active document&lt;/span&gt;, and that are
-       contiguous with the specified entry, must be cleared.&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;Clear any &lt;span title=&quot;browsing context name&quot;&gt;browsing
+       context names&lt;/span&gt; stored with all entries in the history
+       that are associated with &lt;code&gt;Document&lt;/code&gt; objects with the
+       &lt;span&gt;same origin&lt;/span&gt; as the new &lt;span&gt;active
+       document&lt;/span&gt; and that are contiguous with the specified
+       entry.&lt;/p&gt;&lt;/li&gt;
 
       &lt;/ol&gt;
 
@@ -83620,26 +83624,37 @@
      title=&quot;concept-form-reset-control&quot;&gt;reset algorithm&lt;/span&gt; of each
      of those elements.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;current document readiness&lt;/span&gt; of the &lt;var
-     title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;Document&lt;/code&gt; is
-     &quot;&lt;code title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;, &lt;span&gt;queue a task&lt;/span&gt; to fire a &lt;code
-     title=&quot;event-pageshow&quot;&gt;pageshow&lt;/code&gt; event at the
-     &lt;code&gt;Window&lt;/code&gt; object of that &lt;code&gt;Document&lt;/code&gt;, but
-     with its &lt;code title=&quot;dom-event-target&quot;&gt;target&lt;/code&gt; set to the
-     &lt;code&gt;Document&lt;/code&gt; object (and the &lt;code
-     title=&quot;dom-event-currentTarget&quot;&gt;currentTarget&lt;/code&gt; set to the
-     &lt;code&gt;Window&lt;/code&gt; object), using the
-     &lt;code&gt;PageTransitionEvent&lt;/code&gt; interface, with the &lt;code
-     title=&quot;dom-PageTransitionEvent-persisted&quot;&gt;persisted&lt;/code&gt;
-     attribute initialized to true. This event must not bubble, must
-     not be cancelable, and has no default action.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;
 
-     &lt;!-- an interesting thing to test would be to traverse back
-     during onload, before the first pageshow has fired, and then to
-     traverse forward again, and see if we get _two_ pageshows. If so,
-     it indicates that the history traversal task source has a higher
-     priority than the DOM manipulation task source. --&gt;
+      &lt;p&gt;If the &lt;span&gt;current document readiness&lt;/span&gt; of the &lt;var
+      title=&quot;&quot;&gt;specified entry&lt;/var&gt;'s &lt;code&gt;Document&lt;/code&gt; is &quot;&lt;code
+      title=&quot;&quot;&gt;complete&lt;/code&gt;&quot;, &lt;span&gt;queue a task&lt;/span&gt; to run the
+      following sub-sub-steps:&lt;/p&gt;
 
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;Fire a &lt;code title=&quot;event-pageshow&quot;&gt;pageshow&lt;/code&gt;
+       event at the &lt;code&gt;Window&lt;/code&gt; object of that
+       &lt;code&gt;Document&lt;/code&gt;, but with its &lt;code
+       title=&quot;dom-event-target&quot;&gt;target&lt;/code&gt; set to the
+       &lt;code&gt;Document&lt;/code&gt; object (and the &lt;code
+       title=&quot;dom-event-currentTarget&quot;&gt;currentTarget&lt;/code&gt; set to the
+       &lt;code&gt;Window&lt;/code&gt; object), using the
+       &lt;code&gt;PageTransitionEvent&lt;/code&gt; interface, with the &lt;code
+       title=&quot;dom-PageTransitionEvent-persisted&quot;&gt;persisted&lt;/code&gt;
+       attribute initialized to true. This event must not bubble, must
+       not be cancelable, and has no default action.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+      &lt;!-- an interesting thing to test would be to traverse back
+      during onload, before the first pageshow has fired, and then to
+      traverse forward again, and see if we get _two_ pageshows. If
+      so, it indicates that the history traversal task source has a
+      higher priority than the DOM manipulation task source. --&gt;
+
+     &lt;/li&gt;
+
     &lt;/ol&gt;
 
    &lt;/li&gt;
@@ -83723,8 +83738,8 @@
    initialized to &lt;var title=&quot;&quot;&gt;new URL&lt;/var&gt;. This event must bubble
    but not be cancelable and has no default action.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;span&gt;current entry&lt;/span&gt; is now the &lt;var title=&quot;&quot;&gt;specified
-   entry&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;The &lt;span&gt;current entry&lt;/span&gt; is now the &lt;var
+   title=&quot;&quot;&gt;specified entry&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014234.html">[html5] r7371 - [e] (0) Introduce a /page showing/ flag to be used	in future checkins. Affected [...]
</A></li>
	<LI>Next message: <A HREF="014236.html">[html5] r7373 - [giow] (2) Add some guards to make	pageshow/pagehide events always fire consiste [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14235">[ date ]</a>
              <a href="thread.html#14235">[ thread ]</a>
              <a href="subject.html#14235">[ subject ]</a>
              <a href="author.html#14235">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
