<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7022 - [e] (0) Rearrange and retitle sections in	preparation for Path primitives Affect [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7022%20-%20%5Be%5D%20%280%29%20Rearrange%20and%20retitle%20sections%20in%0A%09preparation%20for%20Path%20primitives%20Affect%20%5B...%5D&In-Reply-To=%3C20120307225322.908301C9C015%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013886.html">
   <LINK REL="Next"  HREF="013888.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7022 - [e] (0) Rearrange and retitle sections in	preparation for Path primitives Affect [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7022%20-%20%5Be%5D%20%280%29%20Rearrange%20and%20retitle%20sections%20in%0A%09preparation%20for%20Path%20primitives%20Affect%20%5B...%5D&In-Reply-To=%3C20120307225322.908301C9C015%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7022 - [e] (0) Rearrange and retitle sections in	preparation for Path primitives Affect [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Mar  7 14:53:22 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="013886.html">[html5] r7021 - [e] (0) Mention iframe sandbox in the context of	http+aes. Affected topics: HTML [...]
</A></li>
        <LI>Next message: <A HREF="013888.html">[html5] r7023 - [giow] (0) Path objects and drawing text to a path	or along a path. Note that th [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13887">[ date ]</a>
              <a href="thread.html#13887">[ thread ]</a>
              <a href="subject.html#13887">[ subject ]</a>
              <a href="author.html#13887">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-03-07 14:53:20 -0800 (Wed, 07 Mar 2012)
New Revision: 7022

Modified:
   complete.html
   index
   source
Log:
[e] (0) Rearrange and retitle sections in preparation for Path primitives
Affected topics: Canvas

Modified: complete.html
===================================================================
--- complete.html	2012-03-07 00:40:51 UTC (rev 7021)
+++ complete.html	2012-03-07 22:53:20 UTC (rev 7022)
@@ -600,19 +600,20 @@
         &lt;ol&gt;
          &lt;li&gt;&lt;a href=#the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.1.1 &lt;/span&gt;The canvas state&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#transformations&gt;&lt;span class=secno&gt;4.8.11.1.2 &lt;/span&gt;Transformations&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#colors-and-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Colors and styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#simple-shapes-(rectangles)&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Simple shapes (rectangles)&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#complex-shapes-(paths)&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Complex shapes (paths)&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;The current default path&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#text-0&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Text&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#text-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Text styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;The current default path&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -1108,7 +1109,7 @@
        &lt;li&gt;&lt;a href=#optional-tags&gt;&lt;span class=secno&gt;12.1.2.4 &lt;/span&gt;Optional tags&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#element-restrictions&gt;&lt;span class=secno&gt;12.1.2.5 &lt;/span&gt;Restrictions on content models&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#cdata-rcdata-restrictions&gt;&lt;span class=secno&gt;12.1.2.6 &lt;/span&gt;Restrictions on the contents of raw text and RCDATA elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#text-1&gt;&lt;span class=secno&gt;12.1.3 &lt;/span&gt;Text&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#text-0&gt;&lt;span class=secno&gt;12.1.3 &lt;/span&gt;Text&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#newlines&gt;&lt;span class=secno&gt;12.1.3.1 &lt;/span&gt;Newlines&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#character-references&gt;&lt;span class=secno&gt;12.1.4 &lt;/span&gt;Character references&lt;/a&gt;&lt;/li&gt;
@@ -1271,7 +1272,7 @@
    &lt;li&gt;&lt;a href=#replaced-elements&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Replaced elements&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#embedded-content-2&gt;&lt;span class=secno&gt;14.4.1 &lt;/span&gt;Embedded content&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;14.4.3 &lt;/span&gt;Attributes for embedded content and images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;14.4.4 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;14.4.5 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
@@ -35242,560 +35243,10 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Compositing&lt;/h6&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
-   &lt;dd&gt;
+  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Line styles&lt;/h6&gt;
 
-    &lt;p&gt;Returns the current alpha value applied to rendering operations.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the alpha value. Values outside of the
-    range 0.0 .. 1.0 are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current composition operation, from the list below.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the composition operation. Unknown values
-    are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;All drawing operations are affected by the global compositing
-  attributes, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;!-- conformance criteria for painting are described in the &quot;drawing
-  model&quot; section below --&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives an alpha value that is applied to shapes and images
-  before they are composited onto the canvas. The value must be in the
-  range from 0.0 (fully transparent) to 1.0 (no additional
-  transparency). If an attempt is made to set the attribute to a value
-  outside this range, including Infinity and Not-a-Number (NaN)
-  values, the attribute must retain its previous value. When the
-  context is created, the &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; attribute must
-  initially have the value 1.0.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets how shapes and images are drawn onto the existing
-  bitmap, once they have had &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and the
-  current transformation matrix applied. It must be set to a value
-  from the following list. In the descriptions below, the source
-  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
-  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
-  state of the bitmap.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=gcop-source-atop title=gcop-source-atop&gt;&lt;code&gt;source-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   source image wherever both images are opaque. Display the
-   destination image wherever the destination image is opaque but the
-   source image is transparent. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-source-in title=gcop-source-in&gt;&lt;code&gt;source-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   source image wherever both the source image and destination image
-   are opaque. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-source-out title=gcop-source-out&gt;&lt;code&gt;source-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   source image wherever the source image is opaque and the
-   destination image is transparent. Display transparency
-   elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-source-over title=gcop-source-over&gt;&lt;code&gt;source-over&lt;/code&gt;&lt;/dfn&gt; (default)&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   source image wherever the source image is opaque. Display the
-   destination image elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn id=gcop-destination-atop title=gcop-destination-atop&gt;&lt;code&gt;destination-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-atop&gt;&lt;a href=#gcop-source-atop&gt;source-atop&lt;/a&gt;&lt;/code&gt; but using the
-   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-destination-in title=gcop-destination-in&gt;&lt;code&gt;destination-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-in&gt;&lt;a href=#gcop-source-in&gt;source-in&lt;/a&gt;&lt;/code&gt; but using the destination
-   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-destination-out title=gcop-destination-out&gt;&lt;code&gt;destination-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-out&gt;&lt;a href=#gcop-source-out&gt;source-out&lt;/a&gt;&lt;/code&gt; but using the destination
-   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-destination-over title=gcop-destination-over&gt;&lt;code&gt;destination-over&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-over&gt;&lt;a href=#gcop-source-over&gt;source-over&lt;/a&gt;&lt;/code&gt; but using the
-   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-
-&lt;!-- no clear definition of this operator (doesn't correspond to a PorterDuff operator)
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-darker&quot;&gt;&lt;code&gt;darker&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;span class=&quot;note&quot;&gt;Display the sum of the source image and destination image,
-   with color values approaching 0 as a limit.&lt;/span&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-lighter title=gcop-lighter&gt;&lt;code&gt;lighter&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; plus &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   sum of the source image and destination image, with color values
-   approaching 255 (100%) as a limit.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn id=gcop-copy title=gcop-copy&gt;&lt;code&gt;copy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; (&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; is
-   ignored). &lt;span class=note&gt;Display the source image instead of the destination
-   image.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn id=gcop-xor title=gcop-xor&gt;&lt;code&gt;xor&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; xor &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Exclusive OR
-   of the source image and destination image.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt class=impl&gt;&lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorName&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;operationName&lt;/var&gt;&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd class=impl&gt;Vendor-specific extensions to the list of
-   composition operators should use this syntax.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The operators in the above list must be treated as described by
-  the Porter-Duff operator given at the start of their description
-  (e.g. &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;). They are to
-  be applied as part of the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt;, at which point the
-  &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; is also applied. (Without a clipping
-  region, these operators act on the whole bitmap with every
-  operation.) &lt;a href=#refsPORTERDUFF&gt;[PORTERDUFF]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;These values are all case-sensitive &mdash; they must be used
-  exactly as shown. User agents must not recognize values that are not
-  a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for one of the values given
-  above.&lt;/p&gt;
-
-  &lt;p&gt;On setting, if the user agent does not recognize the specified
-  value, it must be ignored, leaving the value of &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
-  unaffected.&lt;/p&gt;
-
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
-  attribute must initially have the value
-  &lt;code&gt;source-over&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;h6 id=colors-and-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Colors and styles&lt;/h6&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current style used for stroking shapes.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the stroke style.&lt;/p&gt;
-
-    &lt;p&gt;The style can be either a string containing a CSS color, or a
-    &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
-    object. Invalid values are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current style used for filling shapes.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the fill style.&lt;/p&gt;
-
-    &lt;p&gt;The style can be either a string containing a CSS color, or a
-    &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
-    object. Invalid values are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;!-- v6 feature requests:
-
-   * Getting and setting colours by component to bypass the CSS value parsing.
-
-     Either:
-        context.fillStyle.red += 1;
-
-     Or:
-        var array = context.fillStyle;
-        array[1] += 1;
-        context.fillStyle = array;
-
-   * A more performant way of setting colours in general, e.g.:
-
-       context.setFillColor(r,g,b,a) // already supported by webkit
-
-     Or:
-
-       context.fillStyle = 0xRRGGBBAA; // set a 32bit int directly
-
-   * fill rule for deciding between winding and even-odd algorithms.
-     SVG has fill-rule: nonzero | evenodd
-       <A HREF="http://www.w3.org/TR/SVG/painting.html#FillProperties">http://www.w3.org/TR/SVG/painting.html#FillProperties</A>
-     see also mozFillRule: <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html</A>
-
-  --&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokestyle title=dom-context-2d-strokeStyle&gt;&lt;code&gt;strokeStyle&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the color or style to use for the lines around
-  shapes, and the &lt;dfn id=dom-context-2d-fillstyle title=dom-context-2d-fillStyle&gt;&lt;code&gt;fillStyle&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the color or style to use inside the
-  shapes.&lt;/p&gt;
-
-  &lt;p&gt;Both attributes can be either strings,
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On
-  setting, strings must be &lt;a href=#parsed-as-a-css-color-value title=&quot;parsed as a CSS &lt;color&gt;
-  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/a&gt; and the color
-  assigned, and &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and
-  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned themselves. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
-  cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt; value&lt;/a&gt;, or is
-  neither a string, a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;, nor a
-  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then it must be ignored, and the
-  attribute must retain its previous value.&lt;/p&gt;
-
-  &lt;p&gt;When set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; or
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object, the assignment is
-  &lt;a href=#live&gt;live&lt;/a&gt;, meaning that changes made to the object after the
-  assignment do affect subsequent stroking or filling of shapes.&lt;/p&gt;
-
-  &lt;p&gt;On getting, if the value is a color, then the &lt;a href=#serialization-of-a-color title=&quot;serialization of a color&quot;&gt;serialization of the color&lt;/a&gt;
-  must be returned. Otherwise, if it is not a color but a
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then the
-  respective object must be returned. (Such objects are opaque and
-  therefore only useful for assigning to other attributes or for
-  comparison to other gradients or patterns.)&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=serialization-of-a-color&gt;serialization of a color&lt;/dfn&gt; for a color value is a
-  string, computed as follows: if it has alpha equal to 1.0, then the
-  string is a lowercase six-digit hex value, prefixed with a &quot;#&quot;
-  character (U+0023 NUMBER SIGN), with the first two digits
-  representing the red component, the next two digits representing the
-  green component, and the last two digits representing the blue
-  component, the digits being in the range 0-9 a-f (U+0030 to U+0039
-  and U+0061 to U+0066). Otherwise, the color value has alpha less
-  than 1.0, and the string is the color value in the CSS &lt;code title=&quot;&quot;&gt;rgba()&lt;/code&gt; functional-notation format: the literal
-  string &lt;code title=&quot;&quot;&gt;rgba&lt;/code&gt; (U+0072 U+0067 U+0062 U+0061)
-  followed by a U+0028 LEFT PARENTHESIS, a base-ten integer in the
-  range 0-255 representing the red component (using digits 0-9, U+0030
-  to U+0039, in the shortest form possible), a literal U+002C COMMA
-  and U+0020 SPACE, an integer for the green component, a comma and a
-  space, an integer for the blue component, another comma and space, a
-  U+0030 DIGIT ZERO, if the alpha value is greater than zero then a
-  U+002E FULL STOP (representing the decimal point), if the alpha
-  value is greater than zero then one or more digits in the range 0-9
-  (U+0030 to U+0039) representing the fractional part of the alpha&lt;!--
-  value with no trailing zeros (implied by next sentence)--&gt;, and
-  finally a U+0029 RIGHT PARENTHESIS. User agents must express the
-  fractional part of the alpha value, if any, with the level of
-  precision necessary for the alpha value, when reparsed, to be
-  interpreted as the same alpha value.&lt;/p&gt; &lt;!-- if people complain
-  this is unreadable, expand it into a &lt;dl&gt; with two nested &lt;ol&gt;s --&gt;
-
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; attributes must
-  initially have the string value &lt;code title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;p&gt;When the value is a color, it must not be affected by the
-  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
-  singular matrices don't affect solid color fillStyles --&gt;
-
-  &lt;/div&gt;
-
-  &lt;hr&gt;&lt;p&gt;There are two types of gradients, linear gradients and radial
-  gradients, both represented by objects implementing the opaque
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
-
-  &lt;p id=interpolation&gt;Once a gradient has been created (see below),
-  stops are placed along it to define how the colors are distributed
-  along the gradient. &lt;span class=impl&gt;The color of the gradient at
-  each stop is the color specified for that stop. Between each such
-  stop, the colors and the alpha component must be linearly
-  interpolated over the RGBA space without premultiplying the alpha
-  value to find the color to use at that offset. Before the first
-  stop, the color must be the color of the first stop. After the last
-  stop, the color must be the color of the last stop. When there are
-  no stops, the gradient is transparent black.&lt;/span&gt;&lt;/p&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; . &lt;code title=dom-canvasgradient-addColorStop&gt;&lt;a href=#dom-canvasgradient-addcolorstop&gt;addColorStop&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Adds a color stop with the given color to the gradient at the
-    given offset. 0.0 is the offset at one end of the gradient, 1.0 is
-    the offset at the other end.&lt;/p&gt;
-
-    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the offset
-    is out of range. Throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception if the
-    color cannot be parsed.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a href=#dom-context-2d-createlineargradient&gt;createLinearGradient&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object that represents a
-    linear gradient that paints along the line given by the
-    coordinates represented by the arguments.&lt;/p&gt;
-
-    &lt;p&gt;If any of the arguments are not finite numbers, throws a
-    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createRadialGradient&gt;&lt;a href=#dom-context-2d-createradialgradient&gt;createRadialGradient&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object that represents a
-    radial gradient that paints along the cone given by the circles
-    represented by the arguments.&lt;/p&gt;
-
-    &lt;p&gt;If any of the arguments are not finite numbers, throws a
-    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. If either of the radii
-    are negative, throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-canvasgradient-addcolorstop title=dom-canvasgradient-addColorStop&gt;&lt;code&gt;addColorStop(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method on the &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; interface adds a new stop
-  to a gradient. If the &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; is less than 0,
-  greater than 1, infinite, or NaN, then an
-  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. If the &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt;
-  value&lt;/a&gt;, then a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception must be
-  thrown. Otherwise, the gradient must have a new stop placed, at
-  offset &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; relative to the whole gradient,
-  and with the color obtained by parsing &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; as
-  a CSS &lt;color&gt; value. If multiple stops are added at the same
-  offset on a gradient, they must be placed in the order added, with
-  the first one closest to the start of the gradient, and each
-  subsequent one infinitesimally further along towards the end point
-  (in effect causing all but the first and last stop added at each
-  point to be ignored).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-createlineargradient title=dom-context-2d-createLinearGradient&gt;&lt;code&gt;createLinearGradient(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes four arguments
-  that represent the start point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and end point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) of the gradient. If any of the arguments to &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a href=#dom-context-2d-createlineargradient&gt;createLinearGradient()&lt;/a&gt;&lt;/code&gt;
-  are infinite or NaN, the method must throw a
-  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the method must
-  return a linear &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; initialized with the
-  specified line.&lt;/p&gt;
-
-  &lt;p&gt;Linear gradients must be rendered such that all points on a line
-  perpendicular to the line that crosses the start and end points have
-  the color at the point where those two lines cross (with the colors
-  coming from the &lt;a href=#interpolation&gt;interpolation and
-  extrapolation&lt;/a&gt; described above). The points in the linear
-  gradient must be transformed as described by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
-  matrix&lt;/a&gt; when rendering.&lt;/p&gt;
-
-  &lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;&lt;/span&gt;, then
-  the linear gradient must paint nothing.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-createradialgradient title=dom-context-2d-createRadialGradient&gt;&lt;code&gt;createRadialGradient(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes six arguments, the
-  first three representing the start circle with origin (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and radius &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, and the last three representing the end circle
-  with origin (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and
-  radius &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;. The values are in coordinate space
-  units. If any of the arguments are infinite or NaN, a
-  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception must be thrown. If either
-  of &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt; are negative, an
-  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. Otherwise,
-  the method must return a radial &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;
-  initialized with the two specified circles.&lt;/p&gt;
-
-  &lt;p&gt;Radial gradients must be rendered by following these steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the radial gradient must
-   paint nothing. Abort these steps.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; be the color at
-    that position on the gradient (with the colors coming from the &lt;a href=#interpolation&gt;interpolation and extrapolation&lt;/a&gt;
-    described above).&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;&gt;&nbsp;0&lt;/span&gt;,
-   starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
-   positive infinity and ending with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
-   circumference of the circle with radius &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
-   canvas that have not yet been painted on by earlier circles in this
-   step for this rendering of the gradient.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p class=note&gt;This effectively creates a cone, touched by the two
-  circles defined in the creation of the gradient, with the part of
-  the cone before the start circle (0.0) using the color of the first
-  offset, the part of the cone after the end circle (1.0) using the
-  color of the last offset, and areas outside the cone untouched by
-  the gradient (transparent black).&lt;/p&gt;
-
-  &lt;p&gt;The resulting radial gradient must then be transformed as
-  described by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
-  transformation matrix&lt;/a&gt; when rendering.&lt;/p&gt;
-
-  &lt;p&gt;Gradients must be painted only where the relevant stroking or
-  filling effects requires that they be drawn.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;hr&gt;&lt;p&gt;Patterns are represented by objects implementing the opaque
-  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;pattern&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that uses the given image
-    and repeats in the direction(s) given by the &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; argument.&lt;/p&gt;
-
-    &lt;p&gt;The allowed values for &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; are &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; (both directions), &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt; (horizontal only), &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt; (vertical only), and &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt; (neither). If the &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; argument is empty, the value &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; is used.&lt;/p&gt;
-
-    &lt;p&gt;If the image has no image data, throws an
-    &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception. If the second argument
-    isn't one of the allowed values, throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
-    exception. If the image isn't yet fully decoded, then the method
-    returns null.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;To create objects of this type, the &lt;dfn id=dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method is used. The first argument gives the image to use as the
-  pattern (either an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;,
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object). Modifying this image after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
-  must not affect the pattern. The second argument must be a string
-  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
-  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
-  is given, then the user agent must throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
-  exception. User agents must recognize the four values described above
-  exactly (e.g. they must not do case folding). Except as specified
-  below, the method must return a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object
-  suitably initialized.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
-  paragraph --&gt;
-
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
-  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
-  equivalent paragraph --&gt;
-
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;Patterns must be painted so that the top left of the first image
-  is anchored at the origin of the coordinate space, and images are
-  then repeated horizontally to the left and right, if the
-  &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically up and
-  down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or in all
-  four directions all over the canvas, if the &lt;code&gt;repeat&lt;/code&gt;
-  string was specified, to create the repeated pattern that is used
-  for rendering. The images are not scaled by this process; one CSS
-  pixel of the image must be painted on one coordinate space unit in
-  generating the repeated pattern. When rendered, however, patterns
-  must actually be painted only where the stroking or filling effect
-  requires that they be drawn, and the repeated pattern must be
-  affected by the current transformation matrix. Pixels not covered by
-  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
-  specified) must be transparent black.&lt;/p&gt;
-
-  &lt;p&gt;If the original image data is a bitmap image, the value painted
-  at a point in the area of the repetitions is computed by filtering
-  the original image data. The user agent may use any filtering
-  algorithm (for example bilinear interpolation or nearest-neighbor).
-  When the filtering algorithm requires a pixel value from outside the
-  original image data, it must instead use the value from wrapping the
-  pixel's coordinates to the original image's dimensions. (That is,
-  the filter uses 'repeat' behavior, regardless of the value of
-  &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
-  &lt;!-- drawImage() has a similar paragraph with different rules --&gt;
-
-  &lt;p&gt;When the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then the frame at the &lt;a href=#current-playback-position&gt;current
-  playback position&lt;/a&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and
-  &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt;
-  of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;!--
-   Requests for v5 features:
-    * apply transforms to patterns, so you don't have to create
-      transformed patterns manually by rendering them to an off-screen
-      canvas then using that canvas as the pattern.
-  --&gt;
-
-  &lt;/div&gt;
-
-  &lt;div class=impl&gt;
-
-  &lt;hr&gt;&lt;p&gt;If a radial gradient or repeated pattern is used when the
-  transformation matrix is singular, the resulting style must be
-  transparent black (otherwise the gradient or pattern would be
-  collapsed to a point or line, leaving the other pixels undefined).
-  Linear gradients and solid colors always define all points even with
-  singular tranformation matrices.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Line styles&lt;/h6&gt;
-
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -35977,216 +35428,164 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=text-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Text styles&lt;/h6&gt;
 
-  &lt;p&gt;All drawing operations are affected by the four global shadow
-  attributes.&lt;/p&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current shadow color.&lt;/p&gt;
+    &lt;p&gt;Returns the current font settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the shadow color. Values that cannot be parsed as CSS colors are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the font. The syntax is the same as for
+    the CSS 'font' property; values that cannot be parsed as CSS font
+    values are ignored.&lt;/p&gt;
 
+    &lt;p&gt;Relative keywords and lengths are computed relative to the font
+    of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current shadow offset.&lt;/p&gt;
+    &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the shadow offset. Values that are not finite numbers are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the alignment. The possible values are
+    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
+    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current level of blur applied to shadows.&lt;/p&gt;
+    &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the blur level. Values that are not finite numbers greater than or equal to zero are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the baseline alignment. The possible
+    values and their meanings are given below. Other values are
+    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowcolor title=dom-context-2d-shadowColor&gt;&lt;code&gt;shadowColor&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets the color of the shadow.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; attribute
-  initially must be fully-transparent black.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute, on setting, must be parsed the same way as the 'font'
+  property of CSS (but without supporting property-independent style
+  sheet syntax like 'inherit'), and the resulting font must be
+  assigned to the context, with the 'line-height' component forced to
+  'normal', with the 'font-size' component converted to CSS pixels,
+  and with system fonts being computed to explicit values. If the new
+  value is syntactically incorrect (including using
+  property-independent style sheet syntax like 'inherit' or
+  'initial'), then it must be ignored, without assigning a new font
+  value. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On getting, the &lt;a href=#serialization-of-a-color title=&quot;serialization of a
-  color&quot;&gt;serialization of the color&lt;/a&gt; must be returned.&lt;/p&gt;
+  &lt;p&gt;Font names must be interpreted in the context of the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's stylesheets; any fonts embedded using
+  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
+  they are loaded. (If a font is referenced before it is fully loaded,
+  then it must be treated as if it was an unknown font, falling back
+  to another as described by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On setting, the new value must be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS
-  &lt;color&gt; value&lt;/a&gt; and the color assigned. If the value
-  cannot be parsed as a CSS &lt;color&gt; value then it must be
-  ignored, and the attribute must retain its previous value. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- XXX Path objects don't have a canvas --&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowoffsetx title=dom-context-2d-shadowOffsetX&gt;&lt;code&gt;shadowOffsetX&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn id=dom-context-2d-shadowoffsety title=dom-context-2d-shadowOffsetY&gt;&lt;code&gt;shadowOffsetY&lt;/code&gt;&lt;/dfn&gt;
-  attributes specify the distance that the shadow will be offset in
-  the positive horizontal and positive vertical distance
-  respectively. Their values are in coordinate space units. They are
-  not affected by the current transformation matrix.&lt;/p&gt;
+  &lt;p&gt;Only vector fonts should be used by the user agent; if a user
+  agent were to use bitmap fonts then transformations would likely
+  make the font look very ugly.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the shadow offset attributes must
-  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+  &lt;p&gt;On getting, the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;
+  attribute must return the &lt;a href=#serializing-a-css-value title=&quot;serializing a CSS
+  value&quot;&gt;serialized form&lt;/a&gt; of the current font of the context
+  (with no 'line-height' component). &lt;a href=#refsCSSOM&gt;[CSSOM]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On getting, they must return their current value. On setting, the
-  attribute being set must be set to the new value, except if the
-  value is infinite or NaN, in which case the new value must be
-  ignored.&lt;/p&gt;
+  &lt;div class=example&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowblur title=dom-context-2d-shadowBlur&gt;&lt;code&gt;shadowBlur&lt;/code&gt;&lt;/dfn&gt;
-  attribute specifies the level of the blurring effect. (The units do
-  not map to coordinate space units, and are not affected by the
-  current transformation matrix.)&lt;/p&gt;
+   &lt;p&gt;For example, after the following statement:&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; attribute must
-  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+   &lt;pre&gt;context.font = 'italic 400 12px/2 Unknown Font, sans-serif';&lt;/pre&gt;
 
-  &lt;p&gt;On getting, the attribute must return its current value. On
-  setting the attribute must be set to the new value, except if the
-  value is negative, infinite or NaN, in which case the new value must
-  be ignored.&lt;/p&gt;
+   &lt;p&gt;...the expression &lt;code title=&quot;&quot;&gt;context.font&lt;/code&gt; would
+   evaluate to the string &quot;&lt;code title=&quot;&quot;&gt;italic&nbsp;12px&nbsp;&quot;Unknown&nbsp;Font&quot;,&nbsp;sans-serif&lt;/code&gt;&quot;. The
+   &quot;400&quot; font-weight doesn't appear because that is the default
+   value. The line-height doesn't appear because it is forced to
+   &quot;normal&quot;, the default value.&lt;/p&gt;
 
-  &lt;p&gt;&lt;dfn id=when-shadows-are-drawn title=&quot;when shadows are drawn&quot;&gt;Shadows are only drawn
-  if&lt;/dfn&gt; the opacity component of the alpha component of the color
-  of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; is
-  non-zero and either the &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; is non-zero, or
-  the &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt;
-  is non-zero, or the &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; is
-  non-zero.&lt;/p&gt;
+  &lt;/div&gt;
 
-  &lt;p class=critical&gt;It is likely that this will change: browser
-  vendors have indicated an interest in changing the processing model
-  for shadows such that they only draw when the composition operator
-  is &quot;source-over&quot; (the default). &lt;a href=<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457</A>&gt;Read
-  more...&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
+  interface is created, the font of the context must be set to 10px
+  sans-serif. When the 'font-size' component is set to lengths using
+  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
+  keywords, these must be interpreted relative to the computed value
+  of the 'font-size' property of the corresponding &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+  element at the time that the attribute is set. When the
+  'font-weight' component is set to the relative values 'bolder' and
+  'lighter', these must be interpreted relative to the computed value
+  of the 'font-weight' property of the corresponding
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is set.
+  If the computed values are undefined for a particular case (e.g.
+  because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
+  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
+  interpreted relative to the normal-weight 10px sans-serif
+  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
-  &lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, they must be rendered as follows:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute, on getting, must return the current value. On setting, if
+  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
+  value must be changed to the new value. Otherwise, the new value
+  must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
+  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; be an infinite transparent black
-   bitmap on which the source image for which a shadow is being
-   created has been rendered.&lt;/p&gt; &lt;/li&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
+  IDL attribute, on getting, must return the current value. On
+  setting, if the value is one of &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;,
+  &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;,
+  or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;,
+  then the value must be changed to the new value. Otherwise, the new
+  value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
+  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
-   &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; be an infinite transparent black
-   bitmap, with a coordinate space and an origin identical to &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Copy the alpha channel of &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, offset by &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt; in the
-   positive &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; direction, and &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; in the
-   positive &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; direction.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;If &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; is greater than
-   0:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; be half the value of
-     &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
-
-     &lt;li&gt; &lt;p&gt;Perform a 2D Gaussian Blur on &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;,
-     using &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; as the standard deviation.&lt;/p&gt;
-     &lt;!-- wish i could find a reference for this --&gt; &lt;/li&gt;
-
-    &lt;/ol&gt;&lt;p&gt;User agents may limit values of &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; to
-    an implementation-specific maximum value to avoid exceeding
-    hardware limitations during the Gaussian blur operation.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Set the red, green, and blue components of every pixel in
-   &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; to the red, green, and blue components
-   (respectively) of the color of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Multiply the alpha component of every pixel in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; by the alpha component of the color of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;The shadow is in the bitmap &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, and is
-   rendered as part of the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt; described below.&lt;/p&gt; &lt;/li&gt;
-
-  &lt;/ol&gt;&lt;/div&gt;
-
-  &lt;p&gt;If the current composition operation is &lt;code title=gcop-copy&gt;&lt;a href=#gcop-copy&gt;copy&lt;/a&gt;&lt;/code&gt;, shadows effectively won't render
-  (since the shape will overwrite the shadow).&lt;/p&gt;
-
-
-  &lt;h6 id=simple-shapes-(rectangles)&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Simple shapes (rectangles)&lt;/h6&gt;
-
-  &lt;p&gt;There are three methods that immediately draw rectangles to the
-  bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
-  left of the rectangle, and the second two give the width &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
-  respectively.&lt;/p&gt;
-
-  &lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
-  transformation matrix&lt;/a&gt; must be applied to the following four
-  coordinates, which form the path that must then be closed to get the
-  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Shapes are painted without affecting the current default path,
-  and are subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping
-  region&lt;/a&gt;, and, with the exception of &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt;, also &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
-  operators&lt;/a&gt;.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+  &lt;p&gt;The &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
+  attribute's allowed keywords correspond to alignment points in the
+  font:&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
+  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
+  &lt;p&gt;&lt;img alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &#2310; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &Aacute;, &yuml;, f, and &Omega; are anchored, the ideographic baseline is where glyphs like &#31169; and &#36948; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot; height=300 src=<A HREF="http://images.whatwg.org/baselines.png">http://images.whatwg.org/baselines.png</A> width=738&gt;&lt;/p&gt;
 
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+  &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-top title=dom-context-2d-textBaseline-top&gt;&lt;code&gt;top&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The top of the em square&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillRect&gt;&lt;a href=#dom-context-2d-fillrect&gt;fillRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-hanging title=dom-context-2d-textBaseline-hanging&gt;&lt;code&gt;hanging&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The hanging baseline&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-middle title=dom-context-2d-textBaseline-middle&gt;&lt;code&gt;middle&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The middle of the em square&lt;/dd&gt;
 
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-alphabetic title=dom-context-2d-textBaseline-alphabetic&gt;&lt;code&gt;alphabetic&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The alphabetic baseline&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-ideographic title=dom-context-2d-textBaseline-ideographic&gt;&lt;code&gt;ideographic&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The ideographic baseline&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeRect&gt;&lt;a href=#dom-context-2d-strokerect&gt;strokeRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
-   &lt;dd&gt;
+  &lt;/dl&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/h6&gt;
 
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
-  rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
-  or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokerect title=dom-context-2d-strokeRect&gt;&lt;code&gt;strokeRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
-  rectangle's path using the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
-  appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes. If
-  both height and width are zero, this method has no effect, since
-  there is no path to stroke (it's a point). If only one of the two is
-  zero, then the method will draw a line instead (the path for the
-  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;h6 id=complex-shapes-(paths)&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Complex shapes (paths)&lt;/h6&gt;
-
   &lt;p&gt;Each object implementing the &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
   interface has a &lt;a href=#path&gt;path&lt;/a&gt;. A &lt;dfn id=path&gt;path&lt;/dfn&gt; has a list of
   zero or more subpaths. Each subpath consists of a list of one or
@@ -36435,8 +35834,401 @@
 
 
 
-  &lt;h6 id=the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;The current default path&lt;/h6&gt;
 
+  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current style used for filling shapes.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the fill style.&lt;/p&gt;
+
+    &lt;p&gt;The style can be either a string containing a CSS color, or a
+    &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
+    object. Invalid values are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current style used for stroking shapes.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the stroke style.&lt;/p&gt;
+
+    &lt;p&gt;The style can be either a string containing a CSS color, or a
+    &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
+    object. Invalid values are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;!-- v6 feature requests:
+
+   * Getting and setting colours by component to bypass the CSS value parsing.
+
+     Either:
+        context.fillStyle.red += 1;
+
+     Or:
+        var array = context.fillStyle;
+        array[1] += 1;
+        context.fillStyle = array;
+
+   * A more performant way of setting colours in general, e.g.:
+
+       context.setFillColor(r,g,b,a) // already supported by webkit
+
+     Or:
+
+       context.fillStyle = 0xRRGGBBAA; // set a 32bit int directly
+
+   * fill rule for deciding between winding and even-odd algorithms.
+     SVG has fill-rule: nonzero | evenodd
+       <A HREF="http://www.w3.org/TR/SVG/painting.html#FillProperties">http://www.w3.org/TR/SVG/painting.html#FillProperties</A>
+     see also mozFillRule: <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html</A>
+
+  --&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillstyle title=dom-context-2d-fillStyle&gt;&lt;code&gt;fillStyle&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the color or style to use inside shapes, and
+  the &lt;dfn id=dom-context-2d-strokestyle title=dom-context-2d-strokeStyle&gt;&lt;code&gt;strokeStyle&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the color or style to use for the lines around
+  the shapes.&lt;/p&gt;
+
+  &lt;p&gt;Both attributes can be either strings,
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On
+  setting, strings must be &lt;a href=#parsed-as-a-css-color-value title=&quot;parsed as a CSS &lt;color&gt;
+  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/a&gt; and the color
+  assigned, and &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and
+  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned themselves. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
+  cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt; value&lt;/a&gt;, or is
+  neither a string, a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;, nor a
+  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then it must be ignored, and the
+  attribute must retain its previous value.&lt;/p&gt;
+
+  &lt;p&gt;When set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; or
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object, the assignment is
+  &lt;a href=#live&gt;live&lt;/a&gt;, meaning that changes made to the object after the
+  assignment do affect subsequent stroking or filling of shapes.&lt;/p&gt;
+
+  &lt;p&gt;On getting, if the value is a color, then the &lt;a href=#serialization-of-a-color title=&quot;serialization of a color&quot;&gt;serialization of the color&lt;/a&gt;
+  must be returned. Otherwise, if it is not a color but a
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then the
+  respective object must be returned. (Such objects are opaque and
+  therefore only useful for assigning to other attributes or for
+  comparison to other gradients or patterns.)&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=serialization-of-a-color&gt;serialization of a color&lt;/dfn&gt; for a color value is a
+  string, computed as follows: if it has alpha equal to 1.0, then the
+  string is a lowercase six-digit hex value, prefixed with a &quot;#&quot;
+  character (U+0023 NUMBER SIGN), with the first two digits
+  representing the red component, the next two digits representing the
+  green component, and the last two digits representing the blue
+  component, the digits being in the range 0-9 a-f (U+0030 to U+0039
+  and U+0061 to U+0066). Otherwise, the color value has alpha less
+  than 1.0, and the string is the color value in the CSS &lt;code title=&quot;&quot;&gt;rgba()&lt;/code&gt; functional-notation format: the literal
+  string &lt;code title=&quot;&quot;&gt;rgba&lt;/code&gt; (U+0072 U+0067 U+0062 U+0061)
+  followed by a U+0028 LEFT PARENTHESIS, a base-ten integer in the
+  range 0-255 representing the red component (using digits 0-9, U+0030
+  to U+0039, in the shortest form possible), a literal U+002C COMMA
+  and U+0020 SPACE, an integer for the green component, a comma and a
+  space, an integer for the blue component, another comma and space, a
+  U+0030 DIGIT ZERO, if the alpha value is greater than zero then a
+  U+002E FULL STOP (representing the decimal point), if the alpha
+  value is greater than zero then one or more digits in the range 0-9
+  (U+0030 to U+0039) representing the fractional part of the alpha&lt;!--
+  value with no trailing zeros (implied by next sentence)--&gt;, and
+  finally a U+0029 RIGHT PARENTHESIS. User agents must express the
+  fractional part of the alpha value, if any, with the level of
+  precision necessary for the alpha value, when reparsed, to be
+  interpreted as the same alpha value.&lt;/p&gt; &lt;!-- if people complain
+  this is unreadable, expand it into a &lt;dl&gt; with two nested &lt;ol&gt;s --&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; attributes
+  must initially have the string value &lt;code title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the value is a color, it must not be affected by the
+  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
+  singular matrices don't affect solid color fillStyles --&gt;
+
+  &lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;There are two types of gradients, linear gradients and radial
+  gradients, both represented by objects implementing the opaque
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;p id=interpolation&gt;Once a gradient has been created (see below),
+  stops are placed along it to define how the colors are distributed
+  along the gradient. &lt;span class=impl&gt;The color of the gradient at
+  each stop is the color specified for that stop. Between each such
+  stop, the colors and the alpha component must be linearly
+  interpolated over the RGBA space without premultiplying the alpha
+  value to find the color to use at that offset. Before the first
+  stop, the color must be the color of the first stop. After the last
+  stop, the color must be the color of the last stop. When there are
+  no stops, the gradient is transparent black.&lt;/span&gt;&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; . &lt;code title=dom-canvasgradient-addColorStop&gt;&lt;a href=#dom-canvasgradient-addcolorstop&gt;addColorStop&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds a color stop with the given color to the gradient at the
+    given offset. 0.0 is the offset at one end of the gradient, 1.0 is
+    the offset at the other end.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the offset
+    is out of range. Throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception if the
+    color cannot be parsed.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a href=#dom-context-2d-createlineargradient&gt;createLinearGradient&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object that represents a
+    linear gradient that paints along the line given by the
+    coordinates represented by the arguments.&lt;/p&gt;
+
+    &lt;p&gt;If any of the arguments are not finite numbers, throws a
+    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createRadialGradient&gt;&lt;a href=#dom-context-2d-createradialgradient&gt;createRadialGradient&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object that represents a
+    radial gradient that paints along the cone given by the circles
+    represented by the arguments.&lt;/p&gt;
+
+    &lt;p&gt;If any of the arguments are not finite numbers, throws a
+    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. If either of the radii
+    are negative, throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-canvasgradient-addcolorstop title=dom-canvasgradient-addColorStop&gt;&lt;code&gt;addColorStop(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method on the &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; interface adds a new stop
+  to a gradient. If the &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; is less than 0,
+  greater than 1, infinite, or NaN, then an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. If the &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt;
+  value&lt;/a&gt;, then a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception must be
+  thrown. Otherwise, the gradient must have a new stop placed, at
+  offset &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; relative to the whole gradient,
+  and with the color obtained by parsing &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; as
+  a CSS &lt;color&gt; value. If multiple stops are added at the same
+  offset on a gradient, they must be placed in the order added, with
+  the first one closest to the start of the gradient, and each
+  subsequent one infinitesimally further along towards the end point
+  (in effect causing all but the first and last stop added at each
+  point to be ignored).&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-createlineargradient title=dom-context-2d-createLinearGradient&gt;&lt;code&gt;createLinearGradient(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes four arguments
+  that represent the start point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and end point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) of the gradient. If any of the arguments to &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a href=#dom-context-2d-createlineargradient&gt;createLinearGradient()&lt;/a&gt;&lt;/code&gt;
+  are infinite or NaN, the method must throw a
+  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the method must
+  return a linear &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; initialized with the
+  specified line.&lt;/p&gt;
+
+  &lt;p&gt;Linear gradients must be rendered such that all points on a line
+  perpendicular to the line that crosses the start and end points have
+  the color at the point where those two lines cross (with the colors
+  coming from the &lt;a href=#interpolation&gt;interpolation and
+  extrapolation&lt;/a&gt; described above). The points in the linear
+  gradient must be transformed as described by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+  matrix&lt;/a&gt; when rendering.&lt;/p&gt;
+
+  &lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;&lt;/span&gt;, then
+  the linear gradient must paint nothing.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-createradialgradient title=dom-context-2d-createRadialGradient&gt;&lt;code&gt;createRadialGradient(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes six arguments, the
+  first three representing the start circle with origin (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and radius &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, and the last three representing the end circle
+  with origin (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and
+  radius &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;. The values are in coordinate space
+  units. If any of the arguments are infinite or NaN, a
+  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception must be thrown. If either
+  of &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt; are negative, an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. Otherwise,
+  the method must return a radial &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;
+  initialized with the two specified circles.&lt;/p&gt;
+
+  &lt;p&gt;Radial gradients must be rendered by following these steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the radial gradient must
+   paint nothing. Abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; be the color at
+    that position on the gradient (with the colors coming from the &lt;a href=#interpolation&gt;interpolation and extrapolation&lt;/a&gt;
+    described above).&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;&gt;&nbsp;0&lt;/span&gt;,
+   starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
+   positive infinity and ending with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
+   circumference of the circle with radius &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
+   canvas that have not yet been painted on by earlier circles in this
+   step for this rendering of the gradient.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;This effectively creates a cone, touched by the two
+  circles defined in the creation of the gradient, with the part of
+  the cone before the start circle (0.0) using the color of the first
+  offset, the part of the cone after the end circle (1.0) using the
+  color of the last offset, and areas outside the cone untouched by
+  the gradient (transparent black).&lt;/p&gt;
+
+  &lt;p&gt;The resulting radial gradient must then be transformed as
+  described by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+  transformation matrix&lt;/a&gt; when rendering.&lt;/p&gt;
+
+  &lt;p&gt;Gradients must be painted only where the relevant stroking or
+  filling effects requires that they be drawn.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;Patterns are represented by objects implementing the opaque
+  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;pattern&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that uses the given image
+    and repeats in the direction(s) given by the &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; argument.&lt;/p&gt;
+
+    &lt;p&gt;The allowed values for &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; are &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; (both directions), &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt; (horizontal only), &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt; (vertical only), and &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt; (neither). If the &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; argument is empty, the value &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; is used.&lt;/p&gt;
+
+    &lt;p&gt;If the image has no image data, throws an
+    &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception. If the second argument
+    isn't one of the allowed values, throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+    exception. If the image isn't yet fully decoded, then the method
+    returns null.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;To create objects of this type, the &lt;dfn id=dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method is used. The first argument gives the image to use as the
+  pattern (either an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;,
+  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
+  object). Modifying this image after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
+  must not affect the pattern. The second argument must be a string
+  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
+  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
+  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
+  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
+  is given, then the user agent must throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+  exception. User agents must recognize the four values described above
+  exactly (e.g. they must not do case folding). Except as specified
+  below, the method must return a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object
+  suitably initialized.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
+  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
+  paragraph --&gt;
+
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
+  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
+  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
+  equivalent paragraph --&gt;
+
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with either a horizontal
+  dimension or a vertical dimension equal to zero, then the
+  implementation must throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
+  exception.&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;p&gt;Patterns must be painted so that the top left of the first image
+  is anchored at the origin of the coordinate space, and images are
+  then repeated horizontally to the left and right, if the
+  &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically up and
+  down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or in all
+  four directions all over the canvas, if the &lt;code&gt;repeat&lt;/code&gt;
+  string was specified, to create the repeated pattern that is used
+  for rendering. The images are not scaled by this process; one CSS
+  pixel of the image must be painted on one coordinate space unit in
+  generating the repeated pattern. When rendered, however, patterns
+  must actually be painted only where the stroking or filling effect
+  requires that they be drawn, and the repeated pattern must be
+  affected by the current transformation matrix. Pixels not covered by
+  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
+  specified) must be transparent black.&lt;/p&gt;
+
+  &lt;p&gt;If the original image data is a bitmap image, the value painted
+  at a point in the area of the repetitions is computed by filtering
+  the original image data. The user agent may use any filtering
+  algorithm (for example bilinear interpolation or nearest-neighbor).
+  When the filtering algorithm requires a pixel value from outside the
+  original image data, it must instead use the value from wrapping the
+  pixel's coordinates to the original image's dimensions. (That is,
+  the filter uses 'repeat' behavior, regardless of the value of
+  &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
+  &lt;!-- drawImage() has a similar paragraph with different rules --&gt;
+
+  &lt;p&gt;When the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
+  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+  argument, the user agent must use the poster frame of the animation,
+  or, if there is no poster frame, the first frame of the
+  animation.&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then the frame at the &lt;a href=#current-playback-position&gt;current
+  playback position&lt;/a&gt; must be used as the source image, and the
+  source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and
+  &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt;
+  of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; (i.e. after any aspect-ratio
+  correction has been applied).&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;!--
+   Requests for v5 features:
+    * apply transforms to patterns, so you don't have to create
+      transformed patterns manually by rendering them to an off-screen
+      canvas then using that canvas as the pattern.
+  --&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;hr&gt;&lt;p&gt;If a radial gradient or repeated pattern is used when the
+  transformation matrix is singular, the resulting style must be
+  transparent black (otherwise the gradient or pattern would be
+  collapsed to a point or line, leaving the other pixels undefined).
+  Linear gradients and solid colors always define all points even with
+  singular tranformation matrices.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+  &lt;h6 id=the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;The current default path&lt;/h6&gt;
+
   &lt;p&gt;The context always has a current default path. There is only one
   current default path, it is not part of the &lt;a href=#drawing-state&gt;drawing
   state&lt;/a&gt;. The current default path is a &lt;a href=#path&gt;path&lt;/a&gt;, as
@@ -36775,163 +36567,81 @@
 
 
 
-  &lt;h6 id=text-0&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Text&lt;/h6&gt; &lt;!-- a v3 feature --&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+  &lt;h6 id=drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/h6&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;There are three methods that immediately draw rectangles to the
+  bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
+  left of the rectangle, and the second two give the width &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
+  respectively.&lt;/p&gt;
 
-    &lt;p&gt;Returns the current font settings.&lt;/p&gt;
+  &lt;div class=impl&gt;
 
-    &lt;p&gt;Can be set, to change the font. The syntax is the same as for
-    the CSS 'font' property; values that cannot be parsed as CSS font
-    values are ignored.&lt;/p&gt;
+  &lt;p&gt;The &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+  transformation matrix&lt;/a&gt; must be applied to the following four
+  coordinates, which form the path that must then be closed to get the
+  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Relative keywords and lengths are computed relative to the font
-    of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;Shapes are painted without affecting the current default path,
+  and are subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping
+  region&lt;/a&gt;, and, with the exception of &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt;, also &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
+  operators&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;/div&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
+    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the alignment. The possible values are
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillRect&gt;&lt;a href=#dom-context-2d-fillrect&gt;fillRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
+    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the baseline alignment. The possible
-    values and their meanings are given below. Other values are
-    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;div class=impl&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeRect&gt;&lt;a href=#dom-context-2d-strokerect&gt;strokeRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on setting, must be parsed the same way as the 'font'
-  property of CSS (but without supporting property-independent style
-  sheet syntax like 'inherit'), and the resulting font must be
-  assigned to the context, with the 'line-height' component forced to
-  'normal', with the 'font-size' component converted to CSS pixels,
-  and with system fonts being computed to explicit values. If the new
-  value is syntactically incorrect (including using
-  property-independent style sheet syntax like 'inherit' or
-  'initial'), then it must be ignored, without assigning a new font
-  value. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's stylesheets; any fonts embedded using
-  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
-  they are loaded. (If a font is referenced before it is fully loaded,
-  then it must be treated as if it was an unknown font, falling back
-  to another as described by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+   &lt;/dd&gt;
 
-  &lt;!-- XXX Path objects don't have a canvas --&gt;
+  &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;Only vector fonts should be used by the user agent; if a user
-  agent were to use bitmap fonts then transformations would likely
-  make the font look very ugly.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
+  specified rectangle that also intersect the current clipping region
+  to a fully transparent black, erasing any previous image. If either
+  height or width are zero, this method has no effect.&lt;/p&gt;
 
-  &lt;p&gt;On getting, the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;
-  attribute must return the &lt;a href=#serializing-a-css-value title=&quot;serializing a CSS
-  value&quot;&gt;serialized form&lt;/a&gt; of the current font of the context
-  (with no 'line-height' component). &lt;a href=#refsCSSOM&gt;[CSSOM]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
+  rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
+  or width are zero, this method has no effect.&lt;/p&gt;
 
-  &lt;div class=example&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokerect title=dom-context-2d-strokeRect&gt;&lt;code&gt;strokeRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
+  rectangle's path using the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+  appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes. If
+  both height and width are zero, this method has no effect, since
+  there is no path to stroke (it's a point). If only one of the two is
+  zero, then the method will draw a line instead (the path for the
+  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
 
-   &lt;p&gt;For example, after the following statement:&lt;/p&gt;
-
-   &lt;pre&gt;context.font = 'italic 400 12px/2 Unknown Font, sans-serif';&lt;/pre&gt;
-
-   &lt;p&gt;...the expression &lt;code title=&quot;&quot;&gt;context.font&lt;/code&gt; would
-   evaluate to the string &quot;&lt;code title=&quot;&quot;&gt;italic&nbsp;12px&nbsp;&quot;Unknown&nbsp;Font&quot;,&nbsp;sans-serif&lt;/code&gt;&quot;. The
-   &quot;400&quot; font-weight doesn't appear because that is the default
-   value. The line-height doesn't appear because it is forced to
-   &quot;normal&quot;, the default value.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
-  interface is created, the font of the context must be set to 10px
-  sans-serif. When the 'font-size' component is set to lengths using
-  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
-  keywords, these must be interpreted relative to the computed value
-  of the 'font-size' property of the corresponding &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-  element at the time that the attribute is set. When the
-  'font-weight' component is set to the relative values 'bolder' and
-  'lighter', these must be interpreted relative to the computed value
-  of the 'font-weight' property of the corresponding
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is set.
-  If the computed values are undefined for a particular case (e.g.
-  because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
-  interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on getting, must return the current value. On setting, if
-  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
-  value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the object implementing the
-  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
-  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute, on getting, must return the current value. On
-  setting, if the value is one of &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;,
-  or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;,
-  then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the object implementing the
-  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
-  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
+  &lt;h6 id=drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/h6&gt;
 
-  &lt;/div&gt;
-
-  &lt;p&gt;The &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
-  attribute's allowed keywords correspond to alignment points in the
-  font:&lt;/p&gt;
-
-  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
-  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
-  &lt;p&gt;&lt;img alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &#2310; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &Aacute;, &yuml;, f, and &Omega; are anchored, the ideographic baseline is where glyphs like &#31169; and &#36948; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot; height=300 src=<A HREF="http://images.whatwg.org/baselines.png">http://images.whatwg.org/baselines.png</A> width=738&gt;&lt;/p&gt;
-
-  &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
-
-  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-top title=dom-context-2d-textBaseline-top&gt;&lt;code&gt;top&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The top of the em square&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-hanging title=dom-context-2d-textBaseline-hanging&gt;&lt;code&gt;hanging&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The hanging baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-middle title=dom-context-2d-textBaseline-middle&gt;&lt;code&gt;middle&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The middle of the em square&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-alphabetic title=dom-context-2d-textBaseline-alphabetic&gt;&lt;code&gt;alphabetic&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The alphabetic baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-ideographic title=dom-context-2d-textBaseline-ideographic&gt;&lt;code&gt;ideographic&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The ideographic baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;hr&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -37310,7 +37020,7 @@
 
 
 
-  &lt;h6 id=images&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Images&lt;/h6&gt;
+  &lt;h6 id=drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing images to the canvas&lt;/h6&gt;
 
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
@@ -37454,7 +37164,7 @@
 
 
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
@@ -37788,9 +37498,312 @@
   &lt;/div&gt;
 
 
+
+
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Compositing&lt;/h6&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current alpha value applied to rendering operations.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the alpha value. Values outside of the
+    range 0.0 .. 1.0 are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current composition operation, from the list below.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the composition operation. Unknown values
+    are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;All drawing operations are affected by the global compositing
+  attributes, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;!-- conformance criteria for painting are described in the &quot;drawing
+  model&quot; section below --&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
+  attribute gives an alpha value that is applied to shapes and images
+  before they are composited onto the canvas. The value must be in the
+  range from 0.0 (fully transparent) to 1.0 (no additional
+  transparency). If an attempt is made to set the attribute to a value
+  outside this range, including Infinity and Not-a-Number (NaN)
+  values, the attribute must retain its previous value. When the
+  context is created, the &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; attribute must
+  initially have the value 1.0.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
+  attribute sets how shapes and images are drawn onto the existing
+  bitmap, once they have had &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and the
+  current transformation matrix applied. It must be set to a value
+  from the following list. In the descriptions below, the source
+  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
+  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
+  state of the bitmap.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=gcop-source-atop title=gcop-source-atop&gt;&lt;code&gt;source-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   source image wherever both images are opaque. Display the
+   destination image wherever the destination image is opaque but the
+   source image is transparent. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-source-in title=gcop-source-in&gt;&lt;code&gt;source-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   source image wherever both the source image and destination image
+   are opaque. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-source-out title=gcop-source-out&gt;&lt;code&gt;source-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   source image wherever the source image is opaque and the
+   destination image is transparent. Display transparency
+   elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-source-over title=gcop-source-over&gt;&lt;code&gt;source-over&lt;/code&gt;&lt;/dfn&gt; (default)&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   source image wherever the source image is opaque. Display the
+   destination image elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn id=gcop-destination-atop title=gcop-destination-atop&gt;&lt;code&gt;destination-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-atop&gt;&lt;a href=#gcop-source-atop&gt;source-atop&lt;/a&gt;&lt;/code&gt; but using the
+   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-destination-in title=gcop-destination-in&gt;&lt;code&gt;destination-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-in&gt;&lt;a href=#gcop-source-in&gt;source-in&lt;/a&gt;&lt;/code&gt; but using the destination
+   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-destination-out title=gcop-destination-out&gt;&lt;code&gt;destination-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-out&gt;&lt;a href=#gcop-source-out&gt;source-out&lt;/a&gt;&lt;/code&gt; but using the destination
+   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-destination-over title=gcop-destination-over&gt;&lt;code&gt;destination-over&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-over&gt;&lt;a href=#gcop-source-over&gt;source-over&lt;/a&gt;&lt;/code&gt; but using the
+   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+
+&lt;!-- no clear definition of this operator (doesn't correspond to a PorterDuff operator)
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-darker&quot;&gt;&lt;code&gt;darker&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;span class=&quot;note&quot;&gt;Display the sum of the source image and destination image,
+   with color values approaching 0 as a limit.&lt;/span&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-lighter title=gcop-lighter&gt;&lt;code&gt;lighter&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; plus &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   sum of the source image and destination image, with color values
+   approaching 255 (100%) as a limit.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn id=gcop-copy title=gcop-copy&gt;&lt;code&gt;copy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; (&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; is
+   ignored). &lt;span class=note&gt;Display the source image instead of the destination
+   image.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn id=gcop-xor title=gcop-xor&gt;&lt;code&gt;xor&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; xor &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Exclusive OR
+   of the source image and destination image.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt class=impl&gt;&lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorName&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;operationName&lt;/var&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd class=impl&gt;Vendor-specific extensions to the list of
+   composition operators should use this syntax.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The operators in the above list must be treated as described by
+  the Porter-Duff operator given at the start of their description
+  (e.g. &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;). They are to
+  be applied as part of the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt;, at which point the
+  &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; is also applied. (Without a clipping
+  region, these operators act on the whole bitmap with every
+  operation.) &lt;a href=#refsPORTERDUFF&gt;[PORTERDUFF]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;These values are all case-sensitive &mdash; they must be used
+  exactly as shown. User agents must not recognize values that are not
+  a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for one of the values given
+  above.&lt;/p&gt;
+
+  &lt;p&gt;On setting, if the user agent does not recognize the specified
+  value, it must be ignored, leaving the value of &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
+  unaffected.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
+  attribute must initially have the value
+  &lt;code&gt;source-over&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+
+  &lt;p&gt;All drawing operations are affected by the four global shadow
+  attributes.&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current shadow color.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the shadow color. Values that cannot be parsed as CSS colors are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current shadow offset.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the shadow offset. Values that are not finite numbers are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current level of blur applied to shadows.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the blur level. Values that are not finite numbers greater than or equal to zero are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowcolor title=dom-context-2d-shadowColor&gt;&lt;code&gt;shadowColor&lt;/code&gt;&lt;/dfn&gt;
+  attribute sets the color of the shadow.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; attribute
+  initially must be fully-transparent black.&lt;/p&gt;
+
+  &lt;p&gt;On getting, the &lt;a href=#serialization-of-a-color title=&quot;serialization of a
+  color&quot;&gt;serialization of the color&lt;/a&gt; must be returned.&lt;/p&gt;
+
+  &lt;p&gt;On setting, the new value must be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS
+  &lt;color&gt; value&lt;/a&gt; and the color assigned. If the value
+  cannot be parsed as a CSS &lt;color&gt; value then it must be
+  ignored, and the attribute must retain its previous value. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowoffsetx title=dom-context-2d-shadowOffsetX&gt;&lt;code&gt;shadowOffsetX&lt;/code&gt;&lt;/dfn&gt;
+  and &lt;dfn id=dom-context-2d-shadowoffsety title=dom-context-2d-shadowOffsetY&gt;&lt;code&gt;shadowOffsetY&lt;/code&gt;&lt;/dfn&gt;
+  attributes specify the distance that the shadow will be offset in
+  the positive horizontal and positive vertical distance
+  respectively. Their values are in coordinate space units. They are
+  not affected by the current transformation matrix.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the shadow offset attributes must
+  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;On getting, they must return their current value. On setting, the
+  attribute being set must be set to the new value, except if the
+  value is infinite or NaN, in which case the new value must be
+  ignored.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowblur title=dom-context-2d-shadowBlur&gt;&lt;code&gt;shadowBlur&lt;/code&gt;&lt;/dfn&gt;
+  attribute specifies the level of the blurring effect. (The units do
+  not map to coordinate space units, and are not affected by the
+  current transformation matrix.)&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; attribute must
+  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;On getting, the attribute must return its current value. On
+  setting the attribute must be set to the new value, except if the
+  value is negative, infinite or NaN, in which case the new value must
+  be ignored.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn id=when-shadows-are-drawn title=&quot;when shadows are drawn&quot;&gt;Shadows are only drawn
+  if&lt;/dfn&gt; the opacity component of the alpha component of the color
+  of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; is
+  non-zero and either the &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; is non-zero, or
+  the &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt;
+  is non-zero, or the &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; is
+  non-zero.&lt;/p&gt;
+
+  &lt;p class=critical&gt;It is likely that this will change: browser
+  vendors have indicated an interest in changing the processing model
+  for shadows such that they only draw when the composition operator
+  is &quot;source-over&quot; (the default). &lt;a href=<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457</A>&gt;Read
+  more...&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, they must be rendered as follows:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; be an infinite transparent black
+   bitmap on which the source image for which a shadow is being
+   created has been rendered.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; be an infinite transparent black
+   bitmap, with a coordinate space and an origin identical to &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Copy the alpha channel of &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, offset by &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt; in the
+   positive &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; direction, and &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; in the
+   positive &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; direction.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;If &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; is greater than
+   0:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; be half the value of
+     &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+
+     &lt;li&gt; &lt;p&gt;Perform a 2D Gaussian Blur on &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;,
+     using &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; as the standard deviation.&lt;/p&gt;
+     &lt;!-- wish i could find a reference for this --&gt; &lt;/li&gt;
+
+    &lt;/ol&gt;&lt;p&gt;User agents may limit values of &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; to
+    an implementation-specific maximum value to avoid exceeding
+    hardware limitations during the Gaussian blur operation.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Set the red, green, and blue components of every pixel in
+   &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; to the red, green, and blue components
+   (respectively) of the color of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Multiply the alpha component of every pixel in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; by the alpha component of the color of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;The shadow is in the bitmap &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, and is
+   rendered as part of the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt; described below.&lt;/p&gt; &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;p&gt;If the current composition operation is &lt;code title=gcop-copy&gt;&lt;a href=#gcop-copy&gt;copy&lt;/a&gt;&lt;/code&gt;, shadows effectively won't render
+  (since the shape will overwrite the shadow).&lt;/p&gt;
+
+
+
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -37821,7 +37834,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Best practices&lt;/h6&gt;
+  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Best practices&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -37883,7 +37896,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -81188,7 +81201,7 @@
   U+002F SOLIDUS (/).&lt;/p&gt;
 
 
-  &lt;h4 id=text-1&gt;&lt;span class=secno&gt;12.1.3 &lt;/span&gt;Text&lt;/h4&gt;
+  &lt;h4 id=text-0&gt;&lt;span class=secno&gt;12.1.3 &lt;/span&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-text title=syntax-text&gt;Text&lt;/dfn&gt; is allowed inside elements,
   attribute values, and comments. Extra constraints are placed on what
@@ -91312,7 +91325,7 @@
 &lt;!--TOPIC:Rendering--&gt;
   &lt;div class=impl&gt;
 
-  &lt;h4 id=images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
+  &lt;h4 id=images&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element
   when its &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in

Modified: index
===================================================================
--- index	2012-03-07 00:40:51 UTC (rev 7021)
+++ index	2012-03-07 22:53:20 UTC (rev 7022)
@@ -600,19 +600,20 @@
         &lt;ol&gt;
          &lt;li&gt;&lt;a href=#the-canvas-state&gt;&lt;span class=secno&gt;4.8.11.1.1 &lt;/span&gt;The canvas state&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=#transformations&gt;&lt;span class=secno&gt;4.8.11.1.2 &lt;/span&gt;Transformations&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#colors-and-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Colors and styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#simple-shapes-(rectangles)&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Simple shapes (rectangles)&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#complex-shapes-(paths)&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Complex shapes (paths)&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;The current default path&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#text-0&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Text&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#line-styles&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Line styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#text-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Text styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Fill and stroke styles&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;The current default path&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing images to the canvas&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Pixel manipulation&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#compositing&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Compositing&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#shadows&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;Shadows&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Drawing model&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#best-practices&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Best practices&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#color-spaces-and-color-correction&gt;&lt;span class=secno&gt;4.8.11.2 &lt;/span&gt;Color spaces and color correction&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#security-with-canvas-elements&gt;&lt;span class=secno&gt;4.8.11.3 &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-map-element&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;The &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -1108,7 +1109,7 @@
        &lt;li&gt;&lt;a href=#optional-tags&gt;&lt;span class=secno&gt;12.1.2.4 &lt;/span&gt;Optional tags&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#element-restrictions&gt;&lt;span class=secno&gt;12.1.2.5 &lt;/span&gt;Restrictions on content models&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#cdata-rcdata-restrictions&gt;&lt;span class=secno&gt;12.1.2.6 &lt;/span&gt;Restrictions on the contents of raw text and RCDATA elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#text-1&gt;&lt;span class=secno&gt;12.1.3 &lt;/span&gt;Text&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#text-0&gt;&lt;span class=secno&gt;12.1.3 &lt;/span&gt;Text&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#newlines&gt;&lt;span class=secno&gt;12.1.3.1 &lt;/span&gt;Newlines&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#character-references&gt;&lt;span class=secno&gt;12.1.4 &lt;/span&gt;Character references&lt;/a&gt;&lt;/li&gt;
@@ -1271,7 +1272,7 @@
    &lt;li&gt;&lt;a href=#replaced-elements&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Replaced elements&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#embedded-content-2&gt;&lt;span class=secno&gt;14.4.1 &lt;/span&gt;Embedded content&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#images&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#attributes-for-embedded-content-and-images&gt;&lt;span class=secno&gt;14.4.3 &lt;/span&gt;Attributes for embedded content and images&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#image-maps-0&gt;&lt;span class=secno&gt;14.4.4 &lt;/span&gt;Image maps&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#toolbars-0&gt;&lt;span class=secno&gt;14.4.5 &lt;/span&gt;Toolbars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
@@ -35242,560 +35243,10 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Compositing&lt;/h6&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
-   &lt;dd&gt;
+  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.1.3 &lt;/span&gt;Line styles&lt;/h6&gt;
 
-    &lt;p&gt;Returns the current alpha value applied to rendering operations.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the alpha value. Values outside of the
-    range 0.0 .. 1.0 are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current composition operation, from the list below.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the composition operation. Unknown values
-    are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;All drawing operations are affected by the global compositing
-  attributes, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;!-- conformance criteria for painting are described in the &quot;drawing
-  model&quot; section below --&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives an alpha value that is applied to shapes and images
-  before they are composited onto the canvas. The value must be in the
-  range from 0.0 (fully transparent) to 1.0 (no additional
-  transparency). If an attempt is made to set the attribute to a value
-  outside this range, including Infinity and Not-a-Number (NaN)
-  values, the attribute must retain its previous value. When the
-  context is created, the &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; attribute must
-  initially have the value 1.0.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets how shapes and images are drawn onto the existing
-  bitmap, once they have had &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and the
-  current transformation matrix applied. It must be set to a value
-  from the following list. In the descriptions below, the source
-  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
-  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
-  state of the bitmap.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=gcop-source-atop title=gcop-source-atop&gt;&lt;code&gt;source-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   source image wherever both images are opaque. Display the
-   destination image wherever the destination image is opaque but the
-   source image is transparent. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-source-in title=gcop-source-in&gt;&lt;code&gt;source-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   source image wherever both the source image and destination image
-   are opaque. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-source-out title=gcop-source-out&gt;&lt;code&gt;source-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   source image wherever the source image is opaque and the
-   destination image is transparent. Display transparency
-   elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-source-over title=gcop-source-over&gt;&lt;code&gt;source-over&lt;/code&gt;&lt;/dfn&gt; (default)&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   source image wherever the source image is opaque. Display the
-   destination image elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn id=gcop-destination-atop title=gcop-destination-atop&gt;&lt;code&gt;destination-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-atop&gt;&lt;a href=#gcop-source-atop&gt;source-atop&lt;/a&gt;&lt;/code&gt; but using the
-   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-destination-in title=gcop-destination-in&gt;&lt;code&gt;destination-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-in&gt;&lt;a href=#gcop-source-in&gt;source-in&lt;/a&gt;&lt;/code&gt; but using the destination
-   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-destination-out title=gcop-destination-out&gt;&lt;code&gt;destination-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-out&gt;&lt;a href=#gcop-source-out&gt;source-out&lt;/a&gt;&lt;/code&gt; but using the destination
-   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-destination-over title=gcop-destination-over&gt;&lt;code&gt;destination-over&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-over&gt;&lt;a href=#gcop-source-over&gt;source-over&lt;/a&gt;&lt;/code&gt; but using the
-   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-
-&lt;!-- no clear definition of this operator (doesn't correspond to a PorterDuff operator)
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-darker&quot;&gt;&lt;code&gt;darker&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;span class=&quot;note&quot;&gt;Display the sum of the source image and destination image,
-   with color values approaching 0 as a limit.&lt;/span&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn id=gcop-lighter title=gcop-lighter&gt;&lt;code&gt;lighter&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; plus &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
-   sum of the source image and destination image, with color values
-   approaching 255 (100%) as a limit.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn id=gcop-copy title=gcop-copy&gt;&lt;code&gt;copy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; (&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; is
-   ignored). &lt;span class=note&gt;Display the source image instead of the destination
-   image.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn id=gcop-xor title=gcop-xor&gt;&lt;code&gt;xor&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; xor &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Exclusive OR
-   of the source image and destination image.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt class=impl&gt;&lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorName&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;operationName&lt;/var&gt;&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd class=impl&gt;Vendor-specific extensions to the list of
-   composition operators should use this syntax.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The operators in the above list must be treated as described by
-  the Porter-Duff operator given at the start of their description
-  (e.g. &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;). They are to
-  be applied as part of the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt;, at which point the
-  &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; is also applied. (Without a clipping
-  region, these operators act on the whole bitmap with every
-  operation.) &lt;a href=#refsPORTERDUFF&gt;[PORTERDUFF]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;These values are all case-sensitive &mdash; they must be used
-  exactly as shown. User agents must not recognize values that are not
-  a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for one of the values given
-  above.&lt;/p&gt;
-
-  &lt;p&gt;On setting, if the user agent does not recognize the specified
-  value, it must be ignored, leaving the value of &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
-  unaffected.&lt;/p&gt;
-
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
-  attribute must initially have the value
-  &lt;code&gt;source-over&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;h6 id=colors-and-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Colors and styles&lt;/h6&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current style used for stroking shapes.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the stroke style.&lt;/p&gt;
-
-    &lt;p&gt;The style can be either a string containing a CSS color, or a
-    &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
-    object. Invalid values are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current style used for filling shapes.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the fill style.&lt;/p&gt;
-
-    &lt;p&gt;The style can be either a string containing a CSS color, or a
-    &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
-    object. Invalid values are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;!-- v6 feature requests:
-
-   * Getting and setting colours by component to bypass the CSS value parsing.
-
-     Either:
-        context.fillStyle.red += 1;
-
-     Or:
-        var array = context.fillStyle;
-        array[1] += 1;
-        context.fillStyle = array;
-
-   * A more performant way of setting colours in general, e.g.:
-
-       context.setFillColor(r,g,b,a) // already supported by webkit
-
-     Or:
-
-       context.fillStyle = 0xRRGGBBAA; // set a 32bit int directly
-
-   * fill rule for deciding between winding and even-odd algorithms.
-     SVG has fill-rule: nonzero | evenodd
-       <A HREF="http://www.w3.org/TR/SVG/painting.html#FillProperties">http://www.w3.org/TR/SVG/painting.html#FillProperties</A>
-     see also mozFillRule: <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html</A>
-
-  --&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokestyle title=dom-context-2d-strokeStyle&gt;&lt;code&gt;strokeStyle&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the color or style to use for the lines around
-  shapes, and the &lt;dfn id=dom-context-2d-fillstyle title=dom-context-2d-fillStyle&gt;&lt;code&gt;fillStyle&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the color or style to use inside the
-  shapes.&lt;/p&gt;
-
-  &lt;p&gt;Both attributes can be either strings,
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On
-  setting, strings must be &lt;a href=#parsed-as-a-css-color-value title=&quot;parsed as a CSS &lt;color&gt;
-  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/a&gt; and the color
-  assigned, and &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and
-  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned themselves. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
-  cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt; value&lt;/a&gt;, or is
-  neither a string, a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;, nor a
-  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then it must be ignored, and the
-  attribute must retain its previous value.&lt;/p&gt;
-
-  &lt;p&gt;When set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; or
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object, the assignment is
-  &lt;a href=#live&gt;live&lt;/a&gt;, meaning that changes made to the object after the
-  assignment do affect subsequent stroking or filling of shapes.&lt;/p&gt;
-
-  &lt;p&gt;On getting, if the value is a color, then the &lt;a href=#serialization-of-a-color title=&quot;serialization of a color&quot;&gt;serialization of the color&lt;/a&gt;
-  must be returned. Otherwise, if it is not a color but a
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then the
-  respective object must be returned. (Such objects are opaque and
-  therefore only useful for assigning to other attributes or for
-  comparison to other gradients or patterns.)&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=serialization-of-a-color&gt;serialization of a color&lt;/dfn&gt; for a color value is a
-  string, computed as follows: if it has alpha equal to 1.0, then the
-  string is a lowercase six-digit hex value, prefixed with a &quot;#&quot;
-  character (U+0023 NUMBER SIGN), with the first two digits
-  representing the red component, the next two digits representing the
-  green component, and the last two digits representing the blue
-  component, the digits being in the range 0-9 a-f (U+0030 to U+0039
-  and U+0061 to U+0066). Otherwise, the color value has alpha less
-  than 1.0, and the string is the color value in the CSS &lt;code title=&quot;&quot;&gt;rgba()&lt;/code&gt; functional-notation format: the literal
-  string &lt;code title=&quot;&quot;&gt;rgba&lt;/code&gt; (U+0072 U+0067 U+0062 U+0061)
-  followed by a U+0028 LEFT PARENTHESIS, a base-ten integer in the
-  range 0-255 representing the red component (using digits 0-9, U+0030
-  to U+0039, in the shortest form possible), a literal U+002C COMMA
-  and U+0020 SPACE, an integer for the green component, a comma and a
-  space, an integer for the blue component, another comma and space, a
-  U+0030 DIGIT ZERO, if the alpha value is greater than zero then a
-  U+002E FULL STOP (representing the decimal point), if the alpha
-  value is greater than zero then one or more digits in the range 0-9
-  (U+0030 to U+0039) representing the fractional part of the alpha&lt;!--
-  value with no trailing zeros (implied by next sentence)--&gt;, and
-  finally a U+0029 RIGHT PARENTHESIS. User agents must express the
-  fractional part of the alpha value, if any, with the level of
-  precision necessary for the alpha value, when reparsed, to be
-  interpreted as the same alpha value.&lt;/p&gt; &lt;!-- if people complain
-  this is unreadable, expand it into a &lt;dl&gt; with two nested &lt;ol&gt;s --&gt;
-
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; attributes must
-  initially have the string value &lt;code title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;p&gt;When the value is a color, it must not be affected by the
-  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
-  singular matrices don't affect solid color fillStyles --&gt;
-
-  &lt;/div&gt;
-
-  &lt;hr&gt;&lt;p&gt;There are two types of gradients, linear gradients and radial
-  gradients, both represented by objects implementing the opaque
-  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
-
-  &lt;p id=interpolation&gt;Once a gradient has been created (see below),
-  stops are placed along it to define how the colors are distributed
-  along the gradient. &lt;span class=impl&gt;The color of the gradient at
-  each stop is the color specified for that stop. Between each such
-  stop, the colors and the alpha component must be linearly
-  interpolated over the RGBA space without premultiplying the alpha
-  value to find the color to use at that offset. Before the first
-  stop, the color must be the color of the first stop. After the last
-  stop, the color must be the color of the last stop. When there are
-  no stops, the gradient is transparent black.&lt;/span&gt;&lt;/p&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; . &lt;code title=dom-canvasgradient-addColorStop&gt;&lt;a href=#dom-canvasgradient-addcolorstop&gt;addColorStop&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Adds a color stop with the given color to the gradient at the
-    given offset. 0.0 is the offset at one end of the gradient, 1.0 is
-    the offset at the other end.&lt;/p&gt;
-
-    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the offset
-    is out of range. Throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception if the
-    color cannot be parsed.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a href=#dom-context-2d-createlineargradient&gt;createLinearGradient&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object that represents a
-    linear gradient that paints along the line given by the
-    coordinates represented by the arguments.&lt;/p&gt;
-
-    &lt;p&gt;If any of the arguments are not finite numbers, throws a
-    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createRadialGradient&gt;&lt;a href=#dom-context-2d-createradialgradient&gt;createRadialGradient&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object that represents a
-    radial gradient that paints along the cone given by the circles
-    represented by the arguments.&lt;/p&gt;
-
-    &lt;p&gt;If any of the arguments are not finite numbers, throws a
-    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. If either of the radii
-    are negative, throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-canvasgradient-addcolorstop title=dom-canvasgradient-addColorStop&gt;&lt;code&gt;addColorStop(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method on the &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; interface adds a new stop
-  to a gradient. If the &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; is less than 0,
-  greater than 1, infinite, or NaN, then an
-  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. If the &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt;
-  value&lt;/a&gt;, then a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception must be
-  thrown. Otherwise, the gradient must have a new stop placed, at
-  offset &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; relative to the whole gradient,
-  and with the color obtained by parsing &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; as
-  a CSS &lt;color&gt; value. If multiple stops are added at the same
-  offset on a gradient, they must be placed in the order added, with
-  the first one closest to the start of the gradient, and each
-  subsequent one infinitesimally further along towards the end point
-  (in effect causing all but the first and last stop added at each
-  point to be ignored).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-createlineargradient title=dom-context-2d-createLinearGradient&gt;&lt;code&gt;createLinearGradient(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes four arguments
-  that represent the start point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and end point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) of the gradient. If any of the arguments to &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a href=#dom-context-2d-createlineargradient&gt;createLinearGradient()&lt;/a&gt;&lt;/code&gt;
-  are infinite or NaN, the method must throw a
-  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the method must
-  return a linear &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; initialized with the
-  specified line.&lt;/p&gt;
-
-  &lt;p&gt;Linear gradients must be rendered such that all points on a line
-  perpendicular to the line that crosses the start and end points have
-  the color at the point where those two lines cross (with the colors
-  coming from the &lt;a href=#interpolation&gt;interpolation and
-  extrapolation&lt;/a&gt; described above). The points in the linear
-  gradient must be transformed as described by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
-  matrix&lt;/a&gt; when rendering.&lt;/p&gt;
-
-  &lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;&lt;/span&gt;, then
-  the linear gradient must paint nothing.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-createradialgradient title=dom-context-2d-createRadialGradient&gt;&lt;code&gt;createRadialGradient(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes six arguments, the
-  first three representing the start circle with origin (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and radius &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, and the last three representing the end circle
-  with origin (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and
-  radius &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;. The values are in coordinate space
-  units. If any of the arguments are infinite or NaN, a
-  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception must be thrown. If either
-  of &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt; are negative, an
-  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. Otherwise,
-  the method must return a radial &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;
-  initialized with the two specified circles.&lt;/p&gt;
-
-  &lt;p&gt;Radial gradients must be rendered by following these steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the radial gradient must
-   paint nothing. Abort these steps.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; be the color at
-    that position on the gradient (with the colors coming from the &lt;a href=#interpolation&gt;interpolation and extrapolation&lt;/a&gt;
-    described above).&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;&gt;&nbsp;0&lt;/span&gt;,
-   starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
-   positive infinity and ending with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
-   circumference of the circle with radius &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
-   canvas that have not yet been painted on by earlier circles in this
-   step for this rendering of the gradient.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p class=note&gt;This effectively creates a cone, touched by the two
-  circles defined in the creation of the gradient, with the part of
-  the cone before the start circle (0.0) using the color of the first
-  offset, the part of the cone after the end circle (1.0) using the
-  color of the last offset, and areas outside the cone untouched by
-  the gradient (transparent black).&lt;/p&gt;
-
-  &lt;p&gt;The resulting radial gradient must then be transformed as
-  described by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
-  transformation matrix&lt;/a&gt; when rendering.&lt;/p&gt;
-
-  &lt;p&gt;Gradients must be painted only where the relevant stroking or
-  filling effects requires that they be drawn.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;hr&gt;&lt;p&gt;Patterns are represented by objects implementing the opaque
-  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
-
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;pattern&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that uses the given image
-    and repeats in the direction(s) given by the &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; argument.&lt;/p&gt;
-
-    &lt;p&gt;The allowed values for &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; are &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; (both directions), &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt; (horizontal only), &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt; (vertical only), and &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt; (neither). If the &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; argument is empty, the value &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; is used.&lt;/p&gt;
-
-    &lt;p&gt;If the image has no image data, throws an
-    &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception. If the second argument
-    isn't one of the allowed values, throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
-    exception. If the image isn't yet fully decoded, then the method
-    returns null.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;To create objects of this type, the &lt;dfn id=dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method is used. The first argument gives the image to use as the
-  pattern (either an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;,
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object). Modifying this image after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
-  must not affect the pattern. The second argument must be a string
-  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
-  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
-  is given, then the user agent must throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
-  exception. User agents must recognize the four values described above
-  exactly (e.g. they must not do case folding). Except as specified
-  below, the method must return a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object
-  suitably initialized.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
-  paragraph --&gt;
-
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
-  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
-  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
-  equivalent paragraph --&gt;
-
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;Patterns must be painted so that the top left of the first image
-  is anchored at the origin of the coordinate space, and images are
-  then repeated horizontally to the left and right, if the
-  &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically up and
-  down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or in all
-  four directions all over the canvas, if the &lt;code&gt;repeat&lt;/code&gt;
-  string was specified, to create the repeated pattern that is used
-  for rendering. The images are not scaled by this process; one CSS
-  pixel of the image must be painted on one coordinate space unit in
-  generating the repeated pattern. When rendered, however, patterns
-  must actually be painted only where the stroking or filling effect
-  requires that they be drawn, and the repeated pattern must be
-  affected by the current transformation matrix. Pixels not covered by
-  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
-  specified) must be transparent black.&lt;/p&gt;
-
-  &lt;p&gt;If the original image data is a bitmap image, the value painted
-  at a point in the area of the repetitions is computed by filtering
-  the original image data. The user agent may use any filtering
-  algorithm (for example bilinear interpolation or nearest-neighbor).
-  When the filtering algorithm requires a pixel value from outside the
-  original image data, it must instead use the value from wrapping the
-  pixel's coordinates to the original image's dimensions. (That is,
-  the filter uses 'repeat' behavior, regardless of the value of
-  &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
-  &lt;!-- drawImage() has a similar paragraph with different rules --&gt;
-
-  &lt;p&gt;When the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then the frame at the &lt;a href=#current-playback-position&gt;current
-  playback position&lt;/a&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and
-  &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt;
-  of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;!--
-   Requests for v5 features:
-    * apply transforms to patterns, so you don't have to create
-      transformed patterns manually by rendering them to an off-screen
-      canvas then using that canvas as the pattern.
-  --&gt;
-
-  &lt;/div&gt;
-
-  &lt;div class=impl&gt;
-
-  &lt;hr&gt;&lt;p&gt;If a radial gradient or repeated pattern is used when the
-  transformation matrix is singular, the resulting style must be
-  transparent black (otherwise the gradient or pattern would be
-  collapsed to a point or line, leaving the other pixels undefined).
-  Linear gradients and solid colors always define all points even with
-  singular tranformation matrices.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Line styles&lt;/h6&gt;
-
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -35977,216 +35428,164 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=text-styles&gt;&lt;span class=secno&gt;4.8.11.1.4 &lt;/span&gt;Text styles&lt;/h6&gt;
 
-  &lt;p&gt;All drawing operations are affected by the four global shadow
-  attributes.&lt;/p&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current shadow color.&lt;/p&gt;
+    &lt;p&gt;Returns the current font settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the shadow color. Values that cannot be parsed as CSS colors are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the font. The syntax is the same as for
+    the CSS 'font' property; values that cannot be parsed as CSS font
+    values are ignored.&lt;/p&gt;
 
+    &lt;p&gt;Relative keywords and lengths are computed relative to the font
+    of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current shadow offset.&lt;/p&gt;
+    &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the shadow offset. Values that are not finite numbers are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the alignment. The possible values are
+    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
+    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current level of blur applied to shadows.&lt;/p&gt;
+    &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the blur level. Values that are not finite numbers greater than or equal to zero are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the baseline alignment. The possible
+    values and their meanings are given below. Other values are
+    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowcolor title=dom-context-2d-shadowColor&gt;&lt;code&gt;shadowColor&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets the color of the shadow.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; attribute
-  initially must be fully-transparent black.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute, on setting, must be parsed the same way as the 'font'
+  property of CSS (but without supporting property-independent style
+  sheet syntax like 'inherit'), and the resulting font must be
+  assigned to the context, with the 'line-height' component forced to
+  'normal', with the 'font-size' component converted to CSS pixels,
+  and with system fonts being computed to explicit values. If the new
+  value is syntactically incorrect (including using
+  property-independent style sheet syntax like 'inherit' or
+  'initial'), then it must be ignored, without assigning a new font
+  value. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On getting, the &lt;a href=#serialization-of-a-color title=&quot;serialization of a
-  color&quot;&gt;serialization of the color&lt;/a&gt; must be returned.&lt;/p&gt;
+  &lt;p&gt;Font names must be interpreted in the context of the
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's stylesheets; any fonts embedded using
+  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
+  they are loaded. (If a font is referenced before it is fully loaded,
+  then it must be treated as if it was an unknown font, falling back
+  to another as described by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On setting, the new value must be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS
-  &lt;color&gt; value&lt;/a&gt; and the color assigned. If the value
-  cannot be parsed as a CSS &lt;color&gt; value then it must be
-  ignored, and the attribute must retain its previous value. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- XXX Path objects don't have a canvas --&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowoffsetx title=dom-context-2d-shadowOffsetX&gt;&lt;code&gt;shadowOffsetX&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn id=dom-context-2d-shadowoffsety title=dom-context-2d-shadowOffsetY&gt;&lt;code&gt;shadowOffsetY&lt;/code&gt;&lt;/dfn&gt;
-  attributes specify the distance that the shadow will be offset in
-  the positive horizontal and positive vertical distance
-  respectively. Their values are in coordinate space units. They are
-  not affected by the current transformation matrix.&lt;/p&gt;
+  &lt;p&gt;Only vector fonts should be used by the user agent; if a user
+  agent were to use bitmap fonts then transformations would likely
+  make the font look very ugly.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the shadow offset attributes must
-  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+  &lt;p&gt;On getting, the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;
+  attribute must return the &lt;a href=#serializing-a-css-value title=&quot;serializing a CSS
+  value&quot;&gt;serialized form&lt;/a&gt; of the current font of the context
+  (with no 'line-height' component). &lt;a href=#refsCSSOM&gt;[CSSOM]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On getting, they must return their current value. On setting, the
-  attribute being set must be set to the new value, except if the
-  value is infinite or NaN, in which case the new value must be
-  ignored.&lt;/p&gt;
+  &lt;div class=example&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowblur title=dom-context-2d-shadowBlur&gt;&lt;code&gt;shadowBlur&lt;/code&gt;&lt;/dfn&gt;
-  attribute specifies the level of the blurring effect. (The units do
-  not map to coordinate space units, and are not affected by the
-  current transformation matrix.)&lt;/p&gt;
+   &lt;p&gt;For example, after the following statement:&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; attribute must
-  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+   &lt;pre&gt;context.font = 'italic 400 12px/2 Unknown Font, sans-serif';&lt;/pre&gt;
 
-  &lt;p&gt;On getting, the attribute must return its current value. On
-  setting the attribute must be set to the new value, except if the
-  value is negative, infinite or NaN, in which case the new value must
-  be ignored.&lt;/p&gt;
+   &lt;p&gt;...the expression &lt;code title=&quot;&quot;&gt;context.font&lt;/code&gt; would
+   evaluate to the string &quot;&lt;code title=&quot;&quot;&gt;italic&nbsp;12px&nbsp;&quot;Unknown&nbsp;Font&quot;,&nbsp;sans-serif&lt;/code&gt;&quot;. The
+   &quot;400&quot; font-weight doesn't appear because that is the default
+   value. The line-height doesn't appear because it is forced to
+   &quot;normal&quot;, the default value.&lt;/p&gt;
 
-  &lt;p&gt;&lt;dfn id=when-shadows-are-drawn title=&quot;when shadows are drawn&quot;&gt;Shadows are only drawn
-  if&lt;/dfn&gt; the opacity component of the alpha component of the color
-  of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; is
-  non-zero and either the &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; is non-zero, or
-  the &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt;
-  is non-zero, or the &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; is
-  non-zero.&lt;/p&gt;
+  &lt;/div&gt;
 
-  &lt;p class=critical&gt;It is likely that this will change: browser
-  vendors have indicated an interest in changing the processing model
-  for shadows such that they only draw when the composition operator
-  is &quot;source-over&quot; (the default). &lt;a href=<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457</A>&gt;Read
-  more...&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
+  interface is created, the font of the context must be set to 10px
+  sans-serif. When the 'font-size' component is set to lengths using
+  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
+  keywords, these must be interpreted relative to the computed value
+  of the 'font-size' property of the corresponding &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
+  element at the time that the attribute is set. When the
+  'font-weight' component is set to the relative values 'bolder' and
+  'lighter', these must be interpreted relative to the computed value
+  of the 'font-weight' property of the corresponding
+  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is set.
+  If the computed values are undefined for a particular case (e.g.
+  because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
+  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
+  interpreted relative to the normal-weight 10px sans-serif
+  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
-  &lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, they must be rendered as follows:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute, on getting, must return the current value. On setting, if
+  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
+  value must be changed to the new value. Otherwise, the new value
+  must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
+  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; be an infinite transparent black
-   bitmap on which the source image for which a shadow is being
-   created has been rendered.&lt;/p&gt; &lt;/li&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
+  IDL attribute, on getting, must return the current value. On
+  setting, if the value is one of &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;,
+  &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;,
+  or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;,
+  then the value must be changed to the new value. Otherwise, the new
+  value must be ignored. When the object implementing the
+  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
+  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
-   &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; be an infinite transparent black
-   bitmap, with a coordinate space and an origin identical to &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Copy the alpha channel of &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, offset by &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt; in the
-   positive &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; direction, and &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; in the
-   positive &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; direction.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;If &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; is greater than
-   0:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; be half the value of
-     &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
-
-     &lt;li&gt; &lt;p&gt;Perform a 2D Gaussian Blur on &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;,
-     using &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; as the standard deviation.&lt;/p&gt;
-     &lt;!-- wish i could find a reference for this --&gt; &lt;/li&gt;
-
-    &lt;/ol&gt;&lt;p&gt;User agents may limit values of &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; to
-    an implementation-specific maximum value to avoid exceeding
-    hardware limitations during the Gaussian blur operation.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Set the red, green, and blue components of every pixel in
-   &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; to the red, green, and blue components
-   (respectively) of the color of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Multiply the alpha component of every pixel in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; by the alpha component of the color of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;The shadow is in the bitmap &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, and is
-   rendered as part of the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt; described below.&lt;/p&gt; &lt;/li&gt;
-
-  &lt;/ol&gt;&lt;/div&gt;
-
-  &lt;p&gt;If the current composition operation is &lt;code title=gcop-copy&gt;&lt;a href=#gcop-copy&gt;copy&lt;/a&gt;&lt;/code&gt;, shadows effectively won't render
-  (since the shape will overwrite the shadow).&lt;/p&gt;
-
-
-  &lt;h6 id=simple-shapes-(rectangles)&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;Simple shapes (rectangles)&lt;/h6&gt;
-
-  &lt;p&gt;There are three methods that immediately draw rectangles to the
-  bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
-  left of the rectangle, and the second two give the width &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
-  respectively.&lt;/p&gt;
-
-  &lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
-  transformation matrix&lt;/a&gt; must be applied to the following four
-  coordinates, which form the path that must then be closed to get the
-  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Shapes are painted without affecting the current default path,
-  and are subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping
-  region&lt;/a&gt;, and, with the exception of &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt;, also &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
-  operators&lt;/a&gt;.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+  &lt;p&gt;The &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
+  attribute's allowed keywords correspond to alignment points in the
+  font:&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
+  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
+  &lt;p&gt;&lt;img alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &#2310; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &Aacute;, &yuml;, f, and &Omega; are anchored, the ideographic baseline is where glyphs like &#31169; and &#36948; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot; height=300 src=<A HREF="http://images.whatwg.org/baselines.png">http://images.whatwg.org/baselines.png</A> width=738&gt;&lt;/p&gt;
 
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+  &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-top title=dom-context-2d-textBaseline-top&gt;&lt;code&gt;top&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The top of the em square&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillRect&gt;&lt;a href=#dom-context-2d-fillrect&gt;fillRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-hanging title=dom-context-2d-textBaseline-hanging&gt;&lt;code&gt;hanging&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The hanging baseline&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-middle title=dom-context-2d-textBaseline-middle&gt;&lt;code&gt;middle&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The middle of the em square&lt;/dd&gt;
 
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-alphabetic title=dom-context-2d-textBaseline-alphabetic&gt;&lt;code&gt;alphabetic&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The alphabetic baseline&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-ideographic title=dom-context-2d-textBaseline-ideographic&gt;&lt;code&gt;ideographic&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The ideographic baseline&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeRect&gt;&lt;a href=#dom-context-2d-strokerect&gt;strokeRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
-   &lt;dd&gt;
+  &lt;/dl&gt;&lt;h6 id=building-paths&gt;&lt;span class=secno&gt;4.8.11.1.5 &lt;/span&gt;Building paths&lt;/h6&gt;
 
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;div class=impl&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
-  rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
-  or width are zero, this method has no effect.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokerect title=dom-context-2d-strokeRect&gt;&lt;code&gt;strokeRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
-  rectangle's path using the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
-  appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes. If
-  both height and width are zero, this method has no effect, since
-  there is no path to stroke (it's a point). If only one of the two is
-  zero, then the method will draw a line instead (the path for the
-  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;h6 id=complex-shapes-(paths)&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Complex shapes (paths)&lt;/h6&gt;
-
   &lt;p&gt;Each object implementing the &lt;code&gt;&lt;a href=#canvaspathmethods&gt;CanvasPathMethods&lt;/a&gt;&lt;/code&gt;
   interface has a &lt;a href=#path&gt;path&lt;/a&gt;. A &lt;dfn id=path&gt;path&lt;/dfn&gt; has a list of
   zero or more subpaths. Each subpath consists of a list of one or
@@ -36435,8 +35834,401 @@
 
 
 
-  &lt;h6 id=the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;The current default path&lt;/h6&gt;
 
+  &lt;h6 id=fill-and-stroke-styles&gt;&lt;span class=secno&gt;4.8.11.1.6 &lt;/span&gt;Fill and stroke styles&lt;/h6&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current style used for filling shapes.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the fill style.&lt;/p&gt;
+
+    &lt;p&gt;The style can be either a string containing a CSS color, or a
+    &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
+    object. Invalid values are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current style used for stroking shapes.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the stroke style.&lt;/p&gt;
+
+    &lt;p&gt;The style can be either a string containing a CSS color, or a
+    &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;
+    object. Invalid values are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;!-- v6 feature requests:
+
+   * Getting and setting colours by component to bypass the CSS value parsing.
+
+     Either:
+        context.fillStyle.red += 1;
+
+     Or:
+        var array = context.fillStyle;
+        array[1] += 1;
+        context.fillStyle = array;
+
+   * A more performant way of setting colours in general, e.g.:
+
+       context.setFillColor(r,g,b,a) // already supported by webkit
+
+     Or:
+
+       context.fillStyle = 0xRRGGBBAA; // set a 32bit int directly
+
+   * fill rule for deciding between winding and even-odd algorithms.
+     SVG has fill-rule: nonzero | evenodd
+       <A HREF="http://www.w3.org/TR/SVG/painting.html#FillProperties">http://www.w3.org/TR/SVG/painting.html#FillProperties</A>
+     see also mozFillRule: <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html</A>
+
+  --&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillstyle title=dom-context-2d-fillStyle&gt;&lt;code&gt;fillStyle&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the color or style to use inside shapes, and
+  the &lt;dfn id=dom-context-2d-strokestyle title=dom-context-2d-strokeStyle&gt;&lt;code&gt;strokeStyle&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the color or style to use for the lines around
+  the shapes.&lt;/p&gt;
+
+  &lt;p&gt;Both attributes can be either strings,
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On
+  setting, strings must be &lt;a href=#parsed-as-a-css-color-value title=&quot;parsed as a CSS &lt;color&gt;
+  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/a&gt; and the color
+  assigned, and &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and
+  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned themselves. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
+  cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt; value&lt;/a&gt;, or is
+  neither a string, a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;, nor a
+  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then it must be ignored, and the
+  attribute must retain its previous value.&lt;/p&gt;
+
+  &lt;p&gt;When set to a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; or
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object, the assignment is
+  &lt;a href=#live&gt;live&lt;/a&gt;, meaning that changes made to the object after the
+  assignment do affect subsequent stroking or filling of shapes.&lt;/p&gt;
+
+  &lt;p&gt;On getting, if the value is a color, then the &lt;a href=#serialization-of-a-color title=&quot;serialization of a color&quot;&gt;serialization of the color&lt;/a&gt;
+  must be returned. Otherwise, if it is not a color but a
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then the
+  respective object must be returned. (Such objects are opaque and
+  therefore only useful for assigning to other attributes or for
+  comparison to other gradients or patterns.)&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=serialization-of-a-color&gt;serialization of a color&lt;/dfn&gt; for a color value is a
+  string, computed as follows: if it has alpha equal to 1.0, then the
+  string is a lowercase six-digit hex value, prefixed with a &quot;#&quot;
+  character (U+0023 NUMBER SIGN), with the first two digits
+  representing the red component, the next two digits representing the
+  green component, and the last two digits representing the blue
+  component, the digits being in the range 0-9 a-f (U+0030 to U+0039
+  and U+0061 to U+0066). Otherwise, the color value has alpha less
+  than 1.0, and the string is the color value in the CSS &lt;code title=&quot;&quot;&gt;rgba()&lt;/code&gt; functional-notation format: the literal
+  string &lt;code title=&quot;&quot;&gt;rgba&lt;/code&gt; (U+0072 U+0067 U+0062 U+0061)
+  followed by a U+0028 LEFT PARENTHESIS, a base-ten integer in the
+  range 0-255 representing the red component (using digits 0-9, U+0030
+  to U+0039, in the shortest form possible), a literal U+002C COMMA
+  and U+0020 SPACE, an integer for the green component, a comma and a
+  space, an integer for the blue component, another comma and space, a
+  U+0030 DIGIT ZERO, if the alpha value is greater than zero then a
+  U+002E FULL STOP (representing the decimal point), if the alpha
+  value is greater than zero then one or more digits in the range 0-9
+  (U+0030 to U+0039) representing the fractional part of the alpha&lt;!--
+  value with no trailing zeros (implied by next sentence)--&gt;, and
+  finally a U+0029 RIGHT PARENTHESIS. User agents must express the
+  fractional part of the alpha value, if any, with the level of
+  precision necessary for the alpha value, when reparsed, to be
+  interpreted as the same alpha value.&lt;/p&gt; &lt;!-- if people complain
+  this is unreadable, expand it into a &lt;dl&gt; with two nested &lt;ol&gt;s --&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt; attributes
+  must initially have the string value &lt;code title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the value is a color, it must not be affected by the
+  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
+  singular matrices don't affect solid color fillStyles --&gt;
+
+  &lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;There are two types of gradients, linear gradients and radial
+  gradients, both represented by objects implementing the opaque
+  &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;p id=interpolation&gt;Once a gradient has been created (see below),
+  stops are placed along it to define how the colors are distributed
+  along the gradient. &lt;span class=impl&gt;The color of the gradient at
+  each stop is the color specified for that stop. Between each such
+  stop, the colors and the alpha component must be linearly
+  interpolated over the RGBA space without premultiplying the alpha
+  value to find the color to use at that offset. Before the first
+  stop, the color must be the color of the first stop. After the last
+  stop, the color must be the color of the last stop. When there are
+  no stops, the gradient is transparent black.&lt;/span&gt;&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; . &lt;code title=dom-canvasgradient-addColorStop&gt;&lt;a href=#dom-canvasgradient-addcolorstop&gt;addColorStop&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds a color stop with the given color to the gradient at the
+    given offset. 0.0 is the offset at one end of the gradient, 1.0 is
+    the offset at the other end.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception if the offset
+    is out of range. Throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception if the
+    color cannot be parsed.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a href=#dom-context-2d-createlineargradient&gt;createLinearGradient&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object that represents a
+    linear gradient that paints along the line given by the
+    coordinates represented by the arguments.&lt;/p&gt;
+
+    &lt;p&gt;If any of the arguments are not finite numbers, throws a
+    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createRadialGradient&gt;&lt;a href=#dom-context-2d-createradialgradient&gt;createRadialGradient&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; object that represents a
+    radial gradient that paints along the cone given by the circles
+    represented by the arguments.&lt;/p&gt;
+
+    &lt;p&gt;If any of the arguments are not finite numbers, throws a
+    &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. If either of the radii
+    are negative, throws an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-canvasgradient-addcolorstop title=dom-canvasgradient-addColorStop&gt;&lt;code&gt;addColorStop(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method on the &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; interface adds a new stop
+  to a gradient. If the &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; is less than 0,
+  greater than 1, infinite, or NaN, then an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. If the &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; cannot be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS &lt;color&gt;
+  value&lt;/a&gt;, then a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception must be
+  thrown. Otherwise, the gradient must have a new stop placed, at
+  offset &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; relative to the whole gradient,
+  and with the color obtained by parsing &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; as
+  a CSS &lt;color&gt; value. If multiple stops are added at the same
+  offset on a gradient, they must be placed in the order added, with
+  the first one closest to the start of the gradient, and each
+  subsequent one infinitesimally further along towards the end point
+  (in effect causing all but the first and last stop added at each
+  point to be ignored).&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-createlineargradient title=dom-context-2d-createLinearGradient&gt;&lt;code&gt;createLinearGradient(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes four arguments
+  that represent the start point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and end point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) of the gradient. If any of the arguments to &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a href=#dom-context-2d-createlineargradient&gt;createLinearGradient()&lt;/a&gt;&lt;/code&gt;
+  are infinite or NaN, the method must throw a
+  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception. Otherwise, the method must
+  return a linear &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; initialized with the
+  specified line.&lt;/p&gt;
+
+  &lt;p&gt;Linear gradients must be rendered such that all points on a line
+  perpendicular to the line that crosses the start and end points have
+  the color at the point where those two lines cross (with the colors
+  coming from the &lt;a href=#interpolation&gt;interpolation and
+  extrapolation&lt;/a&gt; described above). The points in the linear
+  gradient must be transformed as described by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current transformation
+  matrix&lt;/a&gt; when rendering.&lt;/p&gt;
+
+  &lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;&lt;/span&gt;, then
+  the linear gradient must paint nothing.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-createradialgradient title=dom-context-2d-createRadialGradient&gt;&lt;code&gt;createRadialGradient(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes six arguments, the
+  first three representing the start circle with origin (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and radius &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, and the last three representing the end circle
+  with origin (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and
+  radius &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;. The values are in coordinate space
+  units. If any of the arguments are infinite or NaN, a
+  &lt;code&gt;&lt;a href=#notsupportederror&gt;NotSupportedError&lt;/a&gt;&lt;/code&gt; exception must be thrown. If either
+  of &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt; are negative, an
+  &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. Otherwise,
+  the method must return a radial &lt;code&gt;&lt;a href=#canvasgradient&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;
+  initialized with the two specified circles.&lt;/p&gt;
+
+  &lt;p&gt;Radial gradients must be rendered by following these steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the radial gradient must
+   paint nothing. Abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; be the color at
+    that position on the gradient (with the colors coming from the &lt;a href=#interpolation&gt;interpolation and extrapolation&lt;/a&gt;
+    described above).&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; where &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;&gt;&nbsp;0&lt;/span&gt;,
+   starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
+   positive infinity and ending with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
+   circumference of the circle with radius &lt;span title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span title=&quot;&quot;&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
+   canvas that have not yet been painted on by earlier circles in this
+   step for this rendering of the gradient.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;This effectively creates a cone, touched by the two
+  circles defined in the creation of the gradient, with the part of
+  the cone before the start circle (0.0) using the color of the first
+  offset, the part of the cone after the end circle (1.0) using the
+  color of the last offset, and areas outside the cone untouched by
+  the gradient (transparent black).&lt;/p&gt;
+
+  &lt;p&gt;The resulting radial gradient must then be transformed as
+  described by the &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+  transformation matrix&lt;/a&gt; when rendering.&lt;/p&gt;
+
+  &lt;p&gt;Gradients must be painted only where the relevant stroking or
+  filling effects requires that they be drawn.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;hr&gt;&lt;p&gt;Patterns are represented by objects implementing the opaque
+  &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;pattern&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object that uses the given image
+    and repeats in the direction(s) given by the &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; argument.&lt;/p&gt;
+
+    &lt;p&gt;The allowed values for &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; are &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; (both directions), &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt; (horizontal only), &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt; (vertical only), and &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt; (neither). If the &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; argument is empty, the value &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; is used.&lt;/p&gt;
+
+    &lt;p&gt;If the image has no image data, throws an
+    &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt; exception. If the second argument
+    isn't one of the allowed values, throws a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+    exception. If the image isn't yet fully decoded, then the method
+    returns null.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;To create objects of this type, the &lt;dfn id=dom-context-2d-createpattern title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method is used. The first argument gives the image to use as the
+  pattern (either an &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;,
+  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
+  object). Modifying this image after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
+  must not affect the pattern. The second argument must be a string
+  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
+  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
+  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
+  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
+  is given, then the user agent must throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt;
+  exception. User agents must recognize the four values described above
+  exactly (e.g. they must not do case folding). Except as specified
+  below, the method must return a &lt;code&gt;&lt;a href=#canvaspattern&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; object
+  suitably initialized.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;, or
+  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
+  paragraph --&gt;
+
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;&lt;a href=#htmlimageelement&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; object that is not &lt;a href=#img-good title=img-good&gt;fully decodable&lt;/a&gt;, or if the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;
+  object whose &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+  attribute is either &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;, then the
+  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
+  equivalent paragraph --&gt;
+
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;&lt;a href=#htmlcanvaselement&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt; object with either a horizontal
+  dimension or a vertical dimension equal to zero, then the
+  implementation must throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
+  exception.&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;p&gt;Patterns must be painted so that the top left of the first image
+  is anchored at the origin of the coordinate space, and images are
+  then repeated horizontally to the left and right, if the
+  &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically up and
+  down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or in all
+  four directions all over the canvas, if the &lt;code&gt;repeat&lt;/code&gt;
+  string was specified, to create the repeated pattern that is used
+  for rendering. The images are not scaled by this process; one CSS
+  pixel of the image must be painted on one coordinate space unit in
+  generating the repeated pattern. When rendered, however, patterns
+  must actually be painted only where the stroking or filling effect
+  requires that they be drawn, and the repeated pattern must be
+  affected by the current transformation matrix. Pixels not covered by
+  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
+  specified) must be transparent black.&lt;/p&gt;
+
+  &lt;p&gt;If the original image data is a bitmap image, the value painted
+  at a point in the area of the repetitions is computed by filtering
+  the original image data. The user agent may use any filtering
+  algorithm (for example bilinear interpolation or nearest-neighbor).
+  When the filtering algorithm requires a pixel value from outside the
+  original image data, it must instead use the value from wrapping the
+  pixel's coordinates to the original image's dimensions. (That is,
+  the filter uses 'repeat' behavior, regardless of the value of
+  &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
+  &lt;!-- drawImage() has a similar paragraph with different rules --&gt;
+
+  &lt;p&gt;When the &lt;code title=dom-context-2d-createPattern&gt;&lt;a href=#dom-context-2d-createpattern&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method
+  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+  argument, the user agent must use the poster frame of the animation,
+  or, if there is no poster frame, the first frame of the
+  animation.&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;&lt;a href=#htmlvideoelement&gt;HTMLVideoElement&lt;/a&gt;&lt;/code&gt;, then the frame at the &lt;a href=#current-playback-position&gt;current
+  playback position&lt;/a&gt; must be used as the source image, and the
+  source image's dimensions must be the &lt;a href=#concept-video-intrinsic-width title=concept-video-intrinsic-width&gt;intrinsic width&lt;/a&gt; and
+  &lt;a href=#concept-video-intrinsic-height title=concept-video-intrinsic-height&gt;intrinsic height&lt;/a&gt;
+  of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; (i.e. after any aspect-ratio
+  correction has been applied).&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;!--
+   Requests for v5 features:
+    * apply transforms to patterns, so you don't have to create
+      transformed patterns manually by rendering them to an off-screen
+      canvas then using that canvas as the pattern.
+  --&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;hr&gt;&lt;p&gt;If a radial gradient or repeated pattern is used when the
+  transformation matrix is singular, the resulting style must be
+  transparent black (otherwise the gradient or pattern would be
+  collapsed to a point or line, leaving the other pixels undefined).
+  Linear gradients and solid colors always define all points even with
+  singular tranformation matrices.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+  &lt;h6 id=the-current-default-path&gt;&lt;span class=secno&gt;4.8.11.1.7 &lt;/span&gt;The current default path&lt;/h6&gt;
+
   &lt;p&gt;The context always has a current default path. There is only one
   current default path, it is not part of the &lt;a href=#drawing-state&gt;drawing
   state&lt;/a&gt;. The current default path is a &lt;a href=#path&gt;path&lt;/a&gt;, as
@@ -36775,163 +36567,81 @@
 
 
 
-  &lt;h6 id=text-0&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Text&lt;/h6&gt; &lt;!-- a v3 feature --&gt;
 
-  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+  &lt;h6 id=drawing-rectangles-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.8 &lt;/span&gt;Drawing rectangles to the canvas&lt;/h6&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;There are three methods that immediately draw rectangles to the
+  bitmap. They each take four arguments; the first two give the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
+  left of the rectangle, and the second two give the width &lt;var title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
+  respectively.&lt;/p&gt;
 
-    &lt;p&gt;Returns the current font settings.&lt;/p&gt;
+  &lt;div class=impl&gt;
 
-    &lt;p&gt;Can be set, to change the font. The syntax is the same as for
-    the CSS 'font' property; values that cannot be parsed as CSS font
-    values are ignored.&lt;/p&gt;
+  &lt;p&gt;The &lt;a href=#transformations title=dom-context-2d-transformation&gt;current
+  transformation matrix&lt;/a&gt; must be applied to the following four
+  coordinates, which form the path that must then be closed to get the
+  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Relative keywords and lengths are computed relative to the font
-    of the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;Shapes are painted without affecting the current default path,
+  and are subject to the &lt;a href=#clipping-region title=&quot;clipping region&quot;&gt;clipping
+  region&lt;/a&gt;, and, with the exception of &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect()&lt;/a&gt;&lt;/code&gt;, also &lt;a href=#shadows title=shadows&gt;shadow effects&lt;/a&gt;, &lt;a href=#dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;global alpha&lt;/a&gt;, and &lt;a href=#dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;global composition
+  operators&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;/div&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-clearRect&gt;&lt;a href=#dom-context-2d-clearrect&gt;clearRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
+    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the alignment. The possible values are
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillRect&gt;&lt;a href=#dom-context-2d-fillrect&gt;fillRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
+    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the baseline alignment. The possible
-    values and their meanings are given below. Other values are
-    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;div class=impl&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeRect&gt;&lt;a href=#dom-context-2d-strokerect&gt;strokeRect&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on setting, must be parsed the same way as the 'font'
-  property of CSS (but without supporting property-independent style
-  sheet syntax like 'inherit'), and the resulting font must be
-  assigned to the context, with the 'line-height' component forced to
-  'normal', with the 'font-size' component converted to CSS pixels,
-  and with system fonts being computed to explicit values. If the new
-  value is syntactically incorrect (including using
-  property-independent style sheet syntax like 'inherit' or
-  'initial'), then it must be ignored, without assigning a new font
-  value. &lt;a href=#refsCSS&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element's stylesheets; any fonts embedded using
-  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
-  they are loaded. (If a font is referenced before it is fully loaded,
-  then it must be treated as if it was an unknown font, falling back
-  to another as described by the relevant CSS specifications.) &lt;a href=#refsCSSFONTS&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+   &lt;/dd&gt;
 
-  &lt;!-- XXX Path objects don't have a canvas --&gt;
+  &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;Only vector fonts should be used by the user agent; if a user
-  agent were to use bitmap fonts then transformations would likely
-  make the font look very ugly.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-clearrect title=dom-context-2d-clearRect&gt;&lt;code&gt;clearRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
+  specified rectangle that also intersect the current clipping region
+  to a fully transparent black, erasing any previous image. If either
+  height or width are zero, this method has no effect.&lt;/p&gt;
 
-  &lt;p&gt;On getting, the &lt;code title=dom-context-2d-font&gt;&lt;a href=#dom-context-2d-font&gt;font&lt;/a&gt;&lt;/code&gt;
-  attribute must return the &lt;a href=#serializing-a-css-value title=&quot;serializing a CSS
-  value&quot;&gt;serialized form&lt;/a&gt; of the current font of the context
-  (with no 'line-height' component). &lt;a href=#refsCSSOM&gt;[CSSOM]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-fillrect title=dom-context-2d-fillRect&gt;&lt;code&gt;fillRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
+  rectangular area using the &lt;code title=dom-context-2d-fillStyle&gt;&lt;a href=#dom-context-2d-fillstyle&gt;fillStyle&lt;/a&gt;&lt;/code&gt;. If either height
+  or width are zero, this method has no effect.&lt;/p&gt;
 
-  &lt;div class=example&gt;
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-strokerect title=dom-context-2d-strokeRect&gt;&lt;code&gt;strokeRect(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
+  rectangle's path using the &lt;code title=dom-context-2d-strokeStyle&gt;&lt;a href=#dom-context-2d-strokestyle&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineWidth&gt;&lt;a href=#dom-context-2d-linewidth&gt;lineWidth&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-lineJoin&gt;&lt;a href=#dom-context-2d-linejoin&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if
+  appropriate) &lt;code title=dom-context-2d-miterLimit&gt;&lt;a href=#dom-context-2d-miterlimit&gt;miterLimit&lt;/a&gt;&lt;/code&gt; attributes. If
+  both height and width are zero, this method has no effect, since
+  there is no path to stroke (it's a point). If only one of the two is
+  zero, then the method will draw a line instead (the path for the
+  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
 
-   &lt;p&gt;For example, after the following statement:&lt;/p&gt;
-
-   &lt;pre&gt;context.font = 'italic 400 12px/2 Unknown Font, sans-serif';&lt;/pre&gt;
-
-   &lt;p&gt;...the expression &lt;code title=&quot;&quot;&gt;context.font&lt;/code&gt; would
-   evaluate to the string &quot;&lt;code title=&quot;&quot;&gt;italic&nbsp;12px&nbsp;&quot;Unknown&nbsp;Font&quot;,&nbsp;sans-serif&lt;/code&gt;&quot;. The
-   &quot;400&quot; font-weight doesn't appear because that is the default
-   value. The line-height doesn't appear because it is forced to
-   &quot;normal&quot;, the default value.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;p&gt;When the object implementing the &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt;
-  interface is created, the font of the context must be set to 10px
-  sans-serif. When the 'font-size' component is set to lengths using
-  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
-  keywords, these must be interpreted relative to the computed value
-  of the 'font-size' property of the corresponding &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt;
-  element at the time that the attribute is set. When the
-  'font-weight' component is set to the relative values 'bolder' and
-  'lighter', these must be interpreted relative to the computed value
-  of the 'font-weight' property of the corresponding
-  &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element at the time that the attribute is set.
-  If the computed values are undefined for a particular case (e.g.
-  because the &lt;code&gt;&lt;a href=#the-canvas-element&gt;canvas&lt;/a&gt;&lt;/code&gt; element is not &lt;a href=#in-a-document&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;), then the relative keywords must be
-  interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-textalign title=dom-context-2d-textAlign&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on getting, must return the current value. On setting, if
-  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
-  value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the object implementing the
-  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textAlign&gt;&lt;a href=#dom-context-2d-textalign&gt;textAlign&lt;/a&gt;&lt;/code&gt; attribute must
-  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-context-2d-textbaseline title=dom-context-2d-textBaseline&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute, on getting, must return the current value. On
-  setting, if the value is one of &lt;code title=dom-context-2d-textBaseline-top&gt;&lt;a href=#dom-context-2d-textbaseline-top&gt;top&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-hanging&gt;&lt;a href=#dom-context-2d-textbaseline-hanging&gt;hanging&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-middle&gt;&lt;a href=#dom-context-2d-textbaseline-middle&gt;middle&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-context-2d-textBaseline-alphabetic&gt;&lt;a href=#dom-context-2d-textbaseline-alphabetic&gt;alphabetic&lt;/a&gt;&lt;/code&gt;,
-  &lt;code title=dom-context-2d-textBaseline-ideographic&gt;&lt;a href=#dom-context-2d-textbaseline-ideographic&gt;ideographic&lt;/a&gt;&lt;/code&gt;,
-  or &lt;code title=dom-context-2d-textBaseline-bottom&gt;&lt;a href=#dom-context-2d-textbaseline-bottom&gt;bottom&lt;/a&gt;&lt;/code&gt;,
-  then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the object implementing the
-  &lt;code&gt;&lt;a href=#canvastext&gt;CanvasText&lt;/a&gt;&lt;/code&gt; interface is created, the &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt; attribute
-  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
+  &lt;h6 id=drawing-text-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.9 &lt;/span&gt;Drawing text to the canvas&lt;/h6&gt;
 
-  &lt;/div&gt;
-
-  &lt;p&gt;The &lt;code title=dom-context-2d-textBaseline&gt;&lt;a href=#dom-context-2d-textbaseline&gt;textBaseline&lt;/a&gt;&lt;/code&gt;
-  attribute's allowed keywords correspond to alignment points in the
-  font:&lt;/p&gt;
-
-  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
-  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
-  &lt;p&gt;&lt;img alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &#2310; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &Aacute;, &yuml;, f, and &Omega; are anchored, the ideographic baseline is where glyphs like &#31169; and &#36948; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot; height=300 src=<A HREF="http://images.whatwg.org/baselines.png">http://images.whatwg.org/baselines.png</A> width=738&gt;&lt;/p&gt;
-
-  &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
-
-  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-top title=dom-context-2d-textBaseline-top&gt;&lt;code&gt;top&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The top of the em square&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-hanging title=dom-context-2d-textBaseline-hanging&gt;&lt;code&gt;hanging&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The hanging baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-middle title=dom-context-2d-textBaseline-middle&gt;&lt;code&gt;middle&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The middle of the em square&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-alphabetic title=dom-context-2d-textBaseline-alphabetic&gt;&lt;code&gt;alphabetic&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The alphabetic baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-ideographic title=dom-context-2d-textBaseline-ideographic&gt;&lt;code&gt;ideographic&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The ideographic baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-context-2d-textbaseline-bottom title=dom-context-2d-textBaseline-bottom&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;hr&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-fillText&gt;&lt;a href=#dom-context-2d-filltext&gt;fillText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-strokeText&gt;&lt;a href=#dom-context-2d-stroketext&gt;strokeText&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -37310,7 +37020,7 @@
 
 
 
-  &lt;h6 id=images&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;Images&lt;/h6&gt;
+  &lt;h6 id=drawing-images-to-the-canvas&gt;&lt;span class=secno&gt;4.8.11.1.10 &lt;/span&gt;Drawing images to the canvas&lt;/h6&gt;
 
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=dom-context-2d-drawimage title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
   can be used.&lt;/p&gt;
@@ -37454,7 +37164,7 @@
 
 
 
-  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=pixel-manipulation&gt;&lt;span class=secno&gt;4.8.11.1.11 &lt;/span&gt;&lt;dfn&gt;Pixel manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;imagedata&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-createImageData&gt;&lt;a href=#dom-context-2d-createimagedata&gt;createImageData&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;sw&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;sh&lt;/var&gt;)&lt;/dt&gt;
 
@@ -37788,9 +37498,312 @@
   &lt;/div&gt;
 
 
+
+
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.8.11.1.12 &lt;/span&gt;Compositing&lt;/h6&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current alpha value applied to rendering operations.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the alpha value. Values outside of the
+    range 0.0 .. 1.0 are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current composition operation, from the list below.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the composition operation. Unknown values
+    are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;All drawing operations are affected by the global compositing
+  attributes, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;!-- conformance criteria for painting are described in the &quot;drawing
+  model&quot; section below --&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalalpha title=dom-context-2d-globalAlpha&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
+  attribute gives an alpha value that is applied to shapes and images
+  before they are composited onto the canvas. The value must be in the
+  range from 0.0 (fully transparent) to 1.0 (no additional
+  transparency). If an attempt is made to set the attribute to a value
+  outside this range, including Infinity and Not-a-Number (NaN)
+  values, the attribute must retain its previous value. When the
+  context is created, the &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; attribute must
+  initially have the value 1.0.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-globalcompositeoperation title=dom-context-2d-globalCompositeOperation&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
+  attribute sets how shapes and images are drawn onto the existing
+  bitmap, once they have had &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a href=#dom-context-2d-globalalpha&gt;globalAlpha&lt;/a&gt;&lt;/code&gt; and the
+  current transformation matrix applied. It must be set to a value
+  from the following list. In the descriptions below, the source
+  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
+  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
+  state of the bitmap.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=gcop-source-atop title=gcop-source-atop&gt;&lt;code&gt;source-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   source image wherever both images are opaque. Display the
+   destination image wherever the destination image is opaque but the
+   source image is transparent. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-source-in title=gcop-source-in&gt;&lt;code&gt;source-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   source image wherever both the source image and destination image
+   are opaque. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-source-out title=gcop-source-out&gt;&lt;code&gt;source-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   source image wherever the source image is opaque and the
+   destination image is transparent. Display transparency
+   elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-source-over title=gcop-source-over&gt;&lt;code&gt;source-over&lt;/code&gt;&lt;/dfn&gt; (default)&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   source image wherever the source image is opaque. Display the
+   destination image elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn id=gcop-destination-atop title=gcop-destination-atop&gt;&lt;code&gt;destination-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-atop&gt;&lt;a href=#gcop-source-atop&gt;source-atop&lt;/a&gt;&lt;/code&gt; but using the
+   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-destination-in title=gcop-destination-in&gt;&lt;code&gt;destination-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-in&gt;&lt;a href=#gcop-source-in&gt;source-in&lt;/a&gt;&lt;/code&gt; but using the destination
+   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-destination-out title=gcop-destination-out&gt;&lt;code&gt;destination-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-out&gt;&lt;a href=#gcop-source-out&gt;source-out&lt;/a&gt;&lt;/code&gt; but using the destination
+   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-destination-over title=gcop-destination-over&gt;&lt;code&gt;destination-over&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=note&gt;Same as &lt;code title=gcop-source-over&gt;&lt;a href=#gcop-source-over&gt;source-over&lt;/a&gt;&lt;/code&gt; but using the
+   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+
+&lt;!-- no clear definition of this operator (doesn't correspond to a PorterDuff operator)
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-darker&quot;&gt;&lt;code&gt;darker&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;span class=&quot;note&quot;&gt;Display the sum of the source image and destination image,
+   with color values approaching 0 as a limit.&lt;/span&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn id=gcop-lighter title=gcop-lighter&gt;&lt;code&gt;lighter&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; plus &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Display the
+   sum of the source image and destination image, with color values
+   approaching 255 (100%) as a limit.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn id=gcop-copy title=gcop-copy&gt;&lt;code&gt;copy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; (&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; is
+   ignored). &lt;span class=note&gt;Display the source image instead of the destination
+   image.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn id=gcop-xor title=gcop-xor&gt;&lt;code&gt;xor&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; xor &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=note&gt;Exclusive OR
+   of the source image and destination image.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt class=impl&gt;&lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorName&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;operationName&lt;/var&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd class=impl&gt;Vendor-specific extensions to the list of
+   composition operators should use this syntax.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The operators in the above list must be treated as described by
+  the Porter-Duff operator given at the start of their description
+  (e.g. &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;). They are to
+  be applied as part of the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt;, at which point the
+  &lt;a href=#clipping-region&gt;clipping region&lt;/a&gt; is also applied. (Without a clipping
+  region, these operators act on the whole bitmap with every
+  operation.) &lt;a href=#refsPORTERDUFF&gt;[PORTERDUFF]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;These values are all case-sensitive &mdash; they must be used
+  exactly as shown. User agents must not recognize values that are not
+  a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match for one of the values given
+  above.&lt;/p&gt;
+
+  &lt;p&gt;On setting, if the user agent does not recognize the specified
+  value, it must be ignored, leaving the value of &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
+  unaffected.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-globalCompositeOperation&gt;&lt;a href=#dom-context-2d-globalcompositeoperation&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
+  attribute must initially have the value
+  &lt;code&gt;source-over&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+
+  &lt;p&gt;All drawing operations are affected by the four global shadow
+  attributes.&lt;/p&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current shadow color.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the shadow color. Values that cannot be parsed as CSS colors are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current shadow offset.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the shadow offset. Values that are not finite numbers are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current level of blur applied to shadows.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the blur level. Values that are not finite numbers greater than or equal to zero are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowcolor title=dom-context-2d-shadowColor&gt;&lt;code&gt;shadowColor&lt;/code&gt;&lt;/dfn&gt;
+  attribute sets the color of the shadow.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; attribute
+  initially must be fully-transparent black.&lt;/p&gt;
+
+  &lt;p&gt;On getting, the &lt;a href=#serialization-of-a-color title=&quot;serialization of a
+  color&quot;&gt;serialization of the color&lt;/a&gt; must be returned.&lt;/p&gt;
+
+  &lt;p&gt;On setting, the new value must be &lt;a href=#parsed-as-a-css-color-value&gt;parsed as a CSS
+  &lt;color&gt; value&lt;/a&gt; and the color assigned. If the value
+  cannot be parsed as a CSS &lt;color&gt; value then it must be
+  ignored, and the attribute must retain its previous value. &lt;a href=#refsCSSCOLOR&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowoffsetx title=dom-context-2d-shadowOffsetX&gt;&lt;code&gt;shadowOffsetX&lt;/code&gt;&lt;/dfn&gt;
+  and &lt;dfn id=dom-context-2d-shadowoffsety title=dom-context-2d-shadowOffsetY&gt;&lt;code&gt;shadowOffsetY&lt;/code&gt;&lt;/dfn&gt;
+  attributes specify the distance that the shadow will be offset in
+  the positive horizontal and positive vertical distance
+  respectively. Their values are in coordinate space units. They are
+  not affected by the current transformation matrix.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the shadow offset attributes must
+  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;On getting, they must return their current value. On setting, the
+  attribute being set must be set to the new value, except if the
+  value is infinite or NaN, in which case the new value must be
+  ignored.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-context-2d-shadowblur title=dom-context-2d-shadowBlur&gt;&lt;code&gt;shadowBlur&lt;/code&gt;&lt;/dfn&gt;
+  attribute specifies the level of the blurring effect. (The units do
+  not map to coordinate space units, and are not affected by the
+  current transformation matrix.)&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; attribute must
+  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;On getting, the attribute must return its current value. On
+  setting the attribute must be set to the new value, except if the
+  value is negative, infinite or NaN, in which case the new value must
+  be ignored.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn id=when-shadows-are-drawn title=&quot;when shadows are drawn&quot;&gt;Shadows are only drawn
+  if&lt;/dfn&gt; the opacity component of the alpha component of the color
+  of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt; is
+  non-zero and either the &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; is non-zero, or
+  the &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt;
+  is non-zero, or the &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; is
+  non-zero.&lt;/p&gt;
+
+  &lt;p class=critical&gt;It is likely that this will change: browser
+  vendors have indicated an interest in changing the processing model
+  for shadows such that they only draw when the composition operator
+  is &quot;source-over&quot; (the default). &lt;a href=<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457</A>&gt;Read
+  more...&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;&lt;a href=#when-shadows-are-drawn&gt;When shadows are drawn&lt;/a&gt;, they must be rendered as follows:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; be an infinite transparent black
+   bitmap on which the source image for which a shadow is being
+   created has been rendered.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; be an infinite transparent black
+   bitmap, with a coordinate space and an origin identical to &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Copy the alpha channel of &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, offset by &lt;code title=dom-context-2d-shadowOffsetX&gt;&lt;a href=#dom-context-2d-shadowoffsetx&gt;shadowOffsetX&lt;/a&gt;&lt;/code&gt; in the
+   positive &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; direction, and &lt;code title=dom-context-2d-shadowOffsetY&gt;&lt;a href=#dom-context-2d-shadowoffsety&gt;shadowOffsetY&lt;/a&gt;&lt;/code&gt; in the
+   positive &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; direction.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;If &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt; is greater than
+   0:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; be half the value of
+     &lt;code title=dom-context-2d-shadowBlur&gt;&lt;a href=#dom-context-2d-shadowblur&gt;shadowBlur&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+
+     &lt;li&gt; &lt;p&gt;Perform a 2D Gaussian Blur on &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;,
+     using &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; as the standard deviation.&lt;/p&gt;
+     &lt;!-- wish i could find a reference for this --&gt; &lt;/li&gt;
+
+    &lt;/ol&gt;&lt;p&gt;User agents may limit values of &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; to
+    an implementation-specific maximum value to avoid exceeding
+    hardware limitations during the Gaussian blur operation.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Set the red, green, and blue components of every pixel in
+   &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; to the red, green, and blue components
+   (respectively) of the color of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Multiply the alpha component of every pixel in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; by the alpha component of the color of &lt;code title=dom-context-2d-shadowColor&gt;&lt;a href=#dom-context-2d-shadowcolor&gt;shadowColor&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;The shadow is in the bitmap &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, and is
+   rendered as part of the &lt;a href=#drawing-model&gt;drawing model&lt;/a&gt; described below.&lt;/p&gt; &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;p&gt;If the current composition operation is &lt;code title=gcop-copy&gt;&lt;a href=#gcop-copy&gt;copy&lt;/a&gt;&lt;/code&gt;, shadows effectively won't render
+  (since the shape will overwrite the shadow).&lt;/p&gt;
+
+
+
   &lt;div class=impl&gt;
 
-  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.13 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6 id=drawing-model&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these
   steps, in the order given (or act as if they do):&lt;/p&gt;
@@ -37821,7 +37834,7 @@
   &lt;/ol&gt;&lt;/div&gt;
 
 
-  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.14 &lt;/span&gt;Best practices&lt;/h6&gt;
+  &lt;h6 id=best-practices&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Best practices&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -37883,7 +37896,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.15 &lt;/span&gt;Examples&lt;/h6&gt;
+  &lt;h6 id=examples&gt;&lt;span class=secno&gt;4.8.11.1.16 &lt;/span&gt;Examples&lt;/h6&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -81188,7 +81201,7 @@
   U+002F SOLIDUS (/).&lt;/p&gt;
 
 
-  &lt;h4 id=text-1&gt;&lt;span class=secno&gt;12.1.3 &lt;/span&gt;Text&lt;/h4&gt;
+  &lt;h4 id=text-0&gt;&lt;span class=secno&gt;12.1.3 &lt;/span&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-text title=syntax-text&gt;Text&lt;/dfn&gt; is allowed inside elements,
   attribute values, and comments. Extra constraints are placed on what
@@ -91312,7 +91325,7 @@
 &lt;!--TOPIC:Rendering--&gt;
   &lt;div class=impl&gt;
 
-  &lt;h4 id=images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
+  &lt;h4 id=images&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element
   when its &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in

Modified: source
===================================================================
--- source	2012-03-07 00:40:51 UTC (rev 7021)
+++ source	2012-03-07 22:53:20 UTC (rev 7022)
@@ -40991,667 +40991,8 @@
   &lt;/div&gt;
 
 
-  &lt;h6&gt;Compositing&lt;/h6&gt;
 
-  &lt;dl class=&quot;domintro&quot;&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current alpha value applied to rendering operations.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the alpha value. Values outside of the
-    range 0.0 .. 1.0 are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current composition operation, from the list below.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the composition operation. Unknown values
-    are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;p&gt;All drawing operations are affected by the global compositing
-  attributes, &lt;code
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; and &lt;code
-  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;!-- conformance criteria for painting are described in the &quot;drawing
-  model&quot; section below --&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives an alpha value that is applied to shapes and images
-  before they are composited onto the canvas. The value must be in the
-  range from 0.0 (fully transparent) to 1.0 (no additional
-  transparency). If an attempt is made to set the attribute to a value
-  outside this range, including Infinity and Not-a-Number (NaN)
-  values, the attribute must retain its previous value. When the
-  context is created, the &lt;code
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; attribute must
-  initially have the value 1.0.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets how shapes and images are drawn onto the existing
-  bitmap, once they have had &lt;code
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; and the
-  current transformation matrix applied. It must be set to a value
-  from the following list. In the descriptions below, the source
-  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
-  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
-  state of the bitmap.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;dl&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-source-atop&quot;&gt;&lt;code&gt;source-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
-   source image wherever both images are opaque. Display the
-   destination image wherever the destination image is opaque but the
-   source image is transparent. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-source-in&quot;&gt;&lt;code&gt;source-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
-   source image wherever both the source image and destination image
-   are opaque. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-source-out&quot;&gt;&lt;code&gt;source-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
-   source image wherever the source image is opaque and the
-   destination image is transparent. Display transparency
-   elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-source-over&quot;&gt;&lt;code&gt;source-over&lt;/code&gt;&lt;/dfn&gt; (default)&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
-   source image wherever the source image is opaque. Display the
-   destination image elsewhere.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-destination-atop&quot;&gt;&lt;code&gt;destination-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Same as &lt;code
-   title=&quot;gcop-source-atop&quot;&gt;source-atop&lt;/code&gt; but using the
-   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-destination-in&quot;&gt;&lt;code&gt;destination-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Same as &lt;code
-   title=&quot;gcop-source-in&quot;&gt;source-in&lt;/code&gt; but using the destination
-   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-destination-out&quot;&gt;&lt;code&gt;destination-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Same as &lt;code
-   title=&quot;gcop-source-out&quot;&gt;source-out&lt;/code&gt; but using the destination
-   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-destination-over&quot;&gt;&lt;code&gt;destination-over&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Same as &lt;code
-   title=&quot;gcop-source-over&quot;&gt;source-over&lt;/code&gt; but using the
-   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
-
-
-&lt;!-- no clear definition of this operator (doesn't correspond to a PorterDuff operator)
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-darker&quot;&gt;&lt;code&gt;darker&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;span class=&quot;note&quot;&gt;Display the sum of the source image and destination image,
-   with color values approaching 0 as a limit.&lt;/span&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-lighter&quot;&gt;&lt;code&gt;lighter&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; plus &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
-   sum of the source image and destination image, with color values
-   approaching 255 (100%) as a limit.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-copy&quot;&gt;&lt;code&gt;copy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; (&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; is
-   ignored). &lt;span class=&quot;note&quot;&gt;Display the source image instead of the destination
-   image.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;dfn title=&quot;gcop-xor&quot;&gt;&lt;code&gt;xor&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; xor &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Exclusive OR
-   of the source image and destination image.&lt;/span&gt;&lt;/dd&gt;
-
-
-   &lt;dt class=&quot;impl&quot;&gt;&lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorName&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;operationName&lt;/var&gt;&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd class=&quot;impl&quot;&gt;Vendor-specific extensions to the list of
-   composition operators should use this syntax.&lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;p&gt;The operators in the above list must be treated as described by
-  the Porter-Duff operator given at the start of their description
-  (e.g. &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;). They are to
-  be applied as part of the &lt;span&gt;drawing model&lt;/span&gt;, at which point the
-  &lt;span&gt;clipping region&lt;/span&gt; is also applied. (Without a clipping
-  region, these operators act on the whole bitmap with every
-  operation.) &lt;a href=&quot;#refsPORTERDUFF&quot;&gt;[PORTERDUFF]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;These values are all case-sensitive &mdash; they must be used
-  exactly as shown. User agents must not recognize values that are not
-  a &lt;span&gt;case-sensitive&lt;/span&gt; match for one of the values given
-  above.&lt;/p&gt;
-
-  &lt;p&gt;On setting, if the user agent does not recognize the specified
-  value, it must be ignored, leaving the value of &lt;code
-  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/code&gt;
-  unaffected.&lt;/p&gt;
-
-  &lt;p&gt;When the context is created, the &lt;code
-  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/code&gt;
-  attribute must initially have the value
-  &lt;code&gt;source-over&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;h6&gt;Colors and styles&lt;/h6&gt;
-
-  &lt;dl class=&quot;domintro&quot;&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current style used for stroking shapes.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the stroke style.&lt;/p&gt;
-
-    &lt;p&gt;The style can be either a string containing a CSS color, or a
-    &lt;code&gt;CanvasGradient&lt;/code&gt; or &lt;code&gt;CanvasPattern&lt;/code&gt;
-    object. Invalid values are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns the current style used for filling shapes.&lt;/p&gt;
-
-    &lt;p&gt;Can be set, to change the fill style.&lt;/p&gt;
-
-    &lt;p&gt;The style can be either a string containing a CSS color, or a
-    &lt;code&gt;CanvasGradient&lt;/code&gt; or &lt;code&gt;CanvasPattern&lt;/code&gt;
-    object. Invalid values are ignored.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;!-- v6 feature requests:
-
-   * Getting and setting colours by component to bypass the CSS value parsing.
-
-     Either:
-        context.fillStyle.red += 1;
-
-     Or:
-        var array = context.fillStyle;
-        array[1] += 1;
-        context.fillStyle = array;
-
-   * A more performant way of setting colours in general, e.g.:
-
-       context.setFillColor(r,g,b,a) // already supported by webkit
-
-     Or:
-
-       context.fillStyle = 0xRRGGBBAA; // set a 32bit int directly
-
-   * fill rule for deciding between winding and even-odd algorithms.
-     SVG has fill-rule: nonzero | evenodd
-       <A HREF="http://www.w3.org/TR/SVG/painting.html#FillProperties">http://www.w3.org/TR/SVG/painting.html#FillProperties</A>
-     see also mozFillRule: <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html</A>
-
-  --&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-strokeStyle&quot;&gt;&lt;code&gt;strokeStyle&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the color or style to use for the lines around
-  shapes, and the &lt;dfn
-  title=&quot;dom-context-2d-fillStyle&quot;&gt;&lt;code&gt;fillStyle&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the color or style to use inside the
-  shapes.&lt;/p&gt;
-
-  &lt;p&gt;Both attributes can be either strings,
-  &lt;code&gt;CanvasGradient&lt;/code&gt;s, or &lt;code&gt;CanvasPattern&lt;/code&gt;s. On
-  setting, strings must be &lt;span title=&quot;parsed as a CSS &lt;color&gt;
-  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/span&gt; and the color
-  assigned, and &lt;code&gt;CanvasGradient&lt;/code&gt; and
-  &lt;code&gt;CanvasPattern&lt;/code&gt; objects must be assigned themselves. &lt;a
-  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
-  cannot be &lt;span&gt;parsed as a CSS &lt;color&gt; value&lt;/span&gt;, or is
-  neither a string, a &lt;code&gt;CanvasGradient&lt;/code&gt;, nor a
-  &lt;code&gt;CanvasPattern&lt;/code&gt;, then it must be ignored, and the
-  attribute must retain its previous value.&lt;/p&gt;
-
-  &lt;p&gt;When set to a &lt;code&gt;CanvasPattern&lt;/code&gt; or
-  &lt;code&gt;CanvasGradient&lt;/code&gt; object, the assignment is
-  &lt;span&gt;live&lt;/span&gt;, meaning that changes made to the object after the
-  assignment do affect subsequent stroking or filling of shapes.&lt;/p&gt;
-
-  &lt;p&gt;On getting, if the value is a color, then the &lt;span
-  title=&quot;serialization of a color&quot;&gt;serialization of the color&lt;/span&gt;
-  must be returned. Otherwise, if it is not a color but a
-  &lt;code&gt;CanvasGradient&lt;/code&gt; or &lt;code&gt;CanvasPattern&lt;/code&gt;, then the
-  respective object must be returned. (Such objects are opaque and
-  therefore only useful for assigning to other attributes or for
-  comparison to other gradients or patterns.)&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn&gt;serialization of a color&lt;/dfn&gt; for a color value is a
-  string, computed as follows: if it has alpha equal to 1.0, then the
-  string is a lowercase six-digit hex value, prefixed with a &quot;#&quot;
-  character (U+0023 NUMBER SIGN), with the first two digits
-  representing the red component, the next two digits representing the
-  green component, and the last two digits representing the blue
-  component, the digits being in the range 0-9 a-f (U+0030 to U+0039
-  and U+0061 to U+0066). Otherwise, the color value has alpha less
-  than 1.0, and the string is the color value in the CSS &lt;code
-  title=&quot;&quot;&gt;rgba()&lt;/code&gt; functional-notation format: the literal
-  string &lt;code title=&quot;&quot;&gt;rgba&lt;/code&gt; (U+0072 U+0067 U+0062 U+0061)
-  followed by a U+0028 LEFT PARENTHESIS, a base-ten integer in the
-  range 0-255 representing the red component (using digits 0-9, U+0030
-  to U+0039, in the shortest form possible), a literal U+002C COMMA
-  and U+0020 SPACE, an integer for the green component, a comma and a
-  space, an integer for the blue component, another comma and space, a
-  U+0030 DIGIT ZERO, if the alpha value is greater than zero then a
-  U+002E FULL STOP (representing the decimal point), if the alpha
-  value is greater than zero then one or more digits in the range 0-9
-  (U+0030 to U+0039) representing the fractional part of the alpha&lt;!--
-  value with no trailing zeros (implied by next sentence)--&gt;, and
-  finally a U+0029 RIGHT PARENTHESIS. User agents must express the
-  fractional part of the alpha value, if any, with the level of
-  precision necessary for the alpha value, when reparsed, to be
-  interpreted as the same alpha value.&lt;/p&gt; &lt;!-- if people complain
-  this is unreadable, expand it into a &lt;dl&gt; with two nested &lt;ol&gt;s --&gt;
-
-  &lt;p&gt;When the context is created, the &lt;code
-  title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; and &lt;code
-  title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; attributes must
-  initially have the string value &lt;code title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;p&gt;When the value is a color, it must not be affected by the
-  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
-  singular matrices don't affect solid color fillStyles --&gt;
-
-  &lt;/div&gt;
-
-  &lt;hr&gt;
-
-  &lt;p&gt;There are two types of gradients, linear gradients and radial
-  gradients, both represented by objects implementing the opaque
-  &lt;code&gt;CanvasGradient&lt;/code&gt; interface.&lt;/p&gt;
-
-  &lt;p id=&quot;interpolation&quot;&gt;Once a gradient has been created (see below),
-  stops are placed along it to define how the colors are distributed
-  along the gradient. &lt;span class=&quot;impl&quot;&gt;The color of the gradient at
-  each stop is the color specified for that stop. Between each such
-  stop, the colors and the alpha component must be linearly
-  interpolated over the RGBA space without premultiplying the alpha
-  value to find the color to use at that offset. Before the first
-  stop, the color must be the color of the first stop. After the last
-  stop, the color must be the color of the last stop. When there are
-  no stops, the gradient is transparent black.&lt;/span&gt;&lt;/p&gt;
-
-  &lt;dl class=&quot;domintro&quot;&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; . &lt;code title=&quot;dom-canvasgradient-addColorStop&quot;&gt;addColorStop&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Adds a color stop with the given color to the gradient at the
-    given offset. 0.0 is the offset at one end of the gradient, 1.0 is
-    the offset at the other end.&lt;/p&gt;
-
-    &lt;p&gt;Throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception if the offset
-    is out of range. Throws a &lt;code&gt;SyntaxError&lt;/code&gt; exception if the
-    color cannot be parsed.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-createLinearGradient&quot;&gt;createLinearGradient&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;CanvasGradient&lt;/code&gt; object that represents a
-    linear gradient that paints along the line given by the
-    coordinates represented by the arguments.&lt;/p&gt;
-
-    &lt;p&gt;If any of the arguments are not finite numbers, throws a
-    &lt;code&gt;NotSupportedError&lt;/code&gt; exception.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-createRadialGradient&quot;&gt;createRadialGradient&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;CanvasGradient&lt;/code&gt; object that represents a
-    radial gradient that paints along the cone given by the circles
-    represented by the arguments.&lt;/p&gt;
-
-    &lt;p&gt;If any of the arguments are not finite numbers, throws a
-    &lt;code&gt;NotSupportedError&lt;/code&gt; exception. If either of the radii
-    are negative, throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-canvasgradient-addColorStop&quot;&gt;&lt;code&gt;addColorStop(&lt;var
-  title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method on the &lt;code&gt;CanvasGradient&lt;/code&gt; interface adds a new stop
-  to a gradient. If the &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; is less than 0,
-  greater than 1, infinite, or NaN, then an
-  &lt;code&gt;IndexSizeError&lt;/code&gt; exception must be thrown. If the &lt;var
-  title=&quot;&quot;&gt;color&lt;/var&gt; cannot be &lt;span&gt;parsed as a CSS &lt;color&gt;
-  value&lt;/span&gt;, then a &lt;code&gt;SyntaxError&lt;/code&gt; exception must be
-  thrown. Otherwise, the gradient must have a new stop placed, at
-  offset &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; relative to the whole gradient,
-  and with the color obtained by parsing &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; as
-  a CSS &lt;color&gt; value. If multiple stops are added at the same
-  offset on a gradient, they must be placed in the order added, with
-  the first one closest to the start of the gradient, and each
-  subsequent one infinitesimally further along towards the end point
-  (in effect causing all but the first and last stop added at each
-  point to be ignored).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-createLinearGradient&quot;&gt;&lt;code&gt;createLinearGradient(&lt;var
-  title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes four arguments
-  that represent the start point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;y0&lt;/var&gt;) and end point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;y1&lt;/var&gt;) of the gradient. If any of the arguments to &lt;code
-  title=&quot;dom-context-2d-createLinearGradient&quot;&gt;createLinearGradient()&lt;/code&gt;
-  are infinite or NaN, the method must throw a
-  &lt;code&gt;NotSupportedError&lt;/code&gt; exception. Otherwise, the method must
-  return a linear &lt;code&gt;CanvasGradient&lt;/code&gt; initialized with the
-  specified line.&lt;/p&gt;
-
-  &lt;p&gt;Linear gradients must be rendered such that all points on a line
-  perpendicular to the line that crosses the start and end points have
-  the color at the point where those two lines cross (with the colors
-  coming from the &lt;a href=&quot;#interpolation&quot;&gt;interpolation and
-  extrapolation&lt;/a&gt; described above). The points in the linear
-  gradient must be transformed as described by the &lt;span
-  title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
-  matrix&lt;/span&gt; when rendering.&lt;/p&gt;
-
-  &lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-  title=&quot;&quot;&gt;x1&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var
-  title=&quot;&quot;&gt;y0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;&lt;/span&gt;, then
-  the linear gradient must paint nothing.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-createRadialGradient&quot;&gt;&lt;code&gt;createRadialGradient(&lt;var
-  title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes six arguments, the
-  first three representing the start circle with origin (&lt;var
-  title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and radius &lt;var
-  title=&quot;&quot;&gt;r0&lt;/var&gt;, and the last three representing the end circle
-  with origin (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and
-  radius &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;. The values are in coordinate space
-  units. If any of the arguments are infinite or NaN, a
-  &lt;code&gt;NotSupportedError&lt;/code&gt; exception must be thrown. If either
-  of &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt; are negative, an
-  &lt;code&gt;IndexSizeError&lt;/code&gt; exception must be thrown. Otherwise,
-  the method must return a radial &lt;code&gt;CanvasGradient&lt;/code&gt;
-  initialized with the two specified circles.&lt;/p&gt;
-
-  &lt;p&gt;Radial gradients must be rendered by following these steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var
-   title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-   title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var
-   title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-   title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var
-   title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-   title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the radial gradient must
-   paint nothing. Abort these steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;x(&lt;var
-    title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
-    title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
-    title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
-    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
-    title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;y(&lt;var
-    title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
-    title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
-    title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
-    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
-    title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;r(&lt;var
-    title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
-    title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
-    title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
-    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
-    title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
-
-    &lt;p&gt;Let the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; be the color at
-    that position on the gradient (with the colors coming from the &lt;a
-    href=&quot;#interpolation&quot;&gt;interpolation and extrapolation&lt;/a&gt;
-    described above).&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; where &lt;span
-   title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;&gt;&nbsp;0&lt;/span&gt;,
-   starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
-   positive infinity and ending with the value of &lt;var
-   title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
-   circumference of the circle with radius &lt;span title=&quot;&quot;&gt;r(&lt;var
-   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span title=&quot;&quot;&gt;x(&lt;var
-   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var
-   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var
-   title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
-   canvas that have not yet been painted on by earlier circles in this
-   step for this rendering of the gradient.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;note&quot;&gt;This effectively creates a cone, touched by the two
-  circles defined in the creation of the gradient, with the part of
-  the cone before the start circle (0.0) using the color of the first
-  offset, the part of the cone after the end circle (1.0) using the
-  color of the last offset, and areas outside the cone untouched by
-  the gradient (transparent black).&lt;/p&gt;
-
-  &lt;p&gt;The resulting radial gradient must then be transformed as
-  described by the &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
-  transformation matrix&lt;/span&gt; when rendering.&lt;/p&gt;
-
-  &lt;p&gt;Gradients must be painted only where the relevant stroking or
-  filling effects requires that they be drawn.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;hr&gt;
-
-  &lt;p&gt;Patterns are represented by objects implementing the opaque
-  &lt;code&gt;CanvasPattern&lt;/code&gt; interface.&lt;/p&gt;
-
-  &lt;dl class=&quot;domintro&quot;&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;pattern&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Returns a &lt;code&gt;CanvasPattern&lt;/code&gt; object that uses the given image
-    and repeats in the direction(s) given by the &lt;var
-    title=&quot;&quot;&gt;repetition&lt;/var&gt; argument.&lt;/p&gt;
-
-    &lt;p&gt;The allowed values for &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; are &lt;code
-    title=&quot;&quot;&gt;repeat&lt;/code&gt; (both directions), &lt;code
-    title=&quot;&quot;&gt;repeat-x&lt;/code&gt; (horizontal only), &lt;code
-    title=&quot;&quot;&gt;repeat-y&lt;/code&gt; (vertical only), and &lt;code
-    title=&quot;&quot;&gt;no-repeat&lt;/code&gt; (neither). If the &lt;var
-    title=&quot;&quot;&gt;repetition&lt;/var&gt; argument is empty, the value &lt;code
-    title=&quot;&quot;&gt;repeat&lt;/code&gt; is used.&lt;/p&gt;
-
-    &lt;p&gt;If the image has no image data, throws an
-    &lt;code&gt;InvalidStateError&lt;/code&gt; exception. If the second argument
-    isn't one of the allowed values, throws a &lt;code&gt;SyntaxError&lt;/code&gt;
-    exception. If the image isn't yet fully decoded, then the method
-    returns null.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;p&gt;To create objects of this type, the &lt;dfn
-  title=&quot;dom-context-2d-createPattern&quot;&gt;&lt;code&gt;createPattern(&lt;var
-  title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method is used. The first argument gives the image to use as the
-  pattern (either an &lt;code&gt;HTMLImageElement&lt;/code&gt;,
-  &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, or &lt;code&gt;HTMLVideoElement&lt;/code&gt;
-  object). Modifying this image after calling the &lt;code
-  title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern()&lt;/code&gt; method
-  must not affect the pattern. The second argument must be a string
-  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
-  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
-  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
-  is given, then the user agent must throw a &lt;code&gt;SyntaxError&lt;/code&gt;
-  exception. User agents must recognize the four values described above
-  exactly (e.g. they must not do case folding). Except as specified
-  below, the method must return a &lt;code&gt;CanvasPattern&lt;/code&gt; object
-  suitably initialized.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
-  &lt;code&gt;HTMLImageElement&lt;/code&gt;, &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, or
-  &lt;code&gt;HTMLVideoElement&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
-  paragraph --&gt;
-
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLImageElement&lt;/code&gt; object that is not &lt;span
-  title=&quot;img-good&quot;&gt;fully decodable&lt;/span&gt;, or if the &lt;var
-  title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;HTMLVideoElement&lt;/code&gt;
-  object whose &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
-  attribute is either &lt;code
-  title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
-  title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;, then the
-  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
-  equivalent paragraph --&gt;
-
-  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLCanvasElement&lt;/code&gt; object with either a horizontal
-  dimension or a vertical dimension equal to zero, then the
-  implementation must throw an &lt;code&gt;InvalidStateError&lt;/code&gt;
-  exception.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;Patterns must be painted so that the top left of the first image
-  is anchored at the origin of the coordinate space, and images are
-  then repeated horizontally to the left and right, if the
-  &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically up and
-  down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or in all
-  four directions all over the canvas, if the &lt;code&gt;repeat&lt;/code&gt;
-  string was specified, to create the repeated pattern that is used
-  for rendering. The images are not scaled by this process; one CSS
-  pixel of the image must be painted on one coordinate space unit in
-  generating the repeated pattern. When rendered, however, patterns
-  must actually be painted only where the stroking or filling effect
-  requires that they be drawn, and the repeated pattern must be
-  affected by the current transformation matrix. Pixels not covered by
-  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
-  specified) must be transparent black.&lt;/p&gt;
-
-  &lt;p&gt;If the original image data is a bitmap image, the value painted
-  at a point in the area of the repetitions is computed by filtering
-  the original image data. The user agent may use any filtering
-  algorithm (for example bilinear interpolation or nearest-neighbor).
-  When the filtering algorithm requires a pixel value from outside the
-  original image data, it must instead use the value from wrapping the
-  pixel's coordinates to the original image's dimensions. (That is,
-  the filter uses 'repeat' behavior, regardless of the value of
-  &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
-  &lt;!-- drawImage() has a similar paragraph with different rules --&gt;
-
-  &lt;p&gt;When the &lt;code
-  title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern()&lt;/code&gt; method
-  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
-  argument, the user agent must use the poster frame of the animation,
-  or, if there is no poster frame, the first frame of the
-  animation.&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
-  &lt;code&gt;HTMLVideoElement&lt;/code&gt;, then the frame at the &lt;span&gt;current
-  playback position&lt;/span&gt; must be used as the source image, and the
-  source image's dimensions must be the &lt;span
-  title=&quot;concept-video-intrinsic-width&quot;&gt;intrinsic width&lt;/span&gt; and
-  &lt;span title=&quot;concept-video-intrinsic-height&quot;&gt;intrinsic height&lt;/span&gt;
-  of the &lt;span&gt;media resource&lt;/span&gt; (i.e. after any aspect-ratio
-  correction has been applied).&lt;/p&gt;
-  &lt;!-- drawImage() has an equivalent paragraph --&gt;
-
-  &lt;!--
-   Requests for v5 features:
-    * apply transforms to patterns, so you don't have to create
-      transformed patterns manually by rendering them to an off-screen
-      canvas then using that canvas as the pattern.
-  --&gt;
-
-  &lt;/div&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;hr&gt;
-
-  &lt;p&gt;If a radial gradient or repeated pattern is used when the
-  transformation matrix is singular, the resulting style must be
-  transparent black (otherwise the gradient or pattern would be
-  collapsed to a point or line, leaving the other pixels undefined).
-  Linear gradients and solid colors always define all points even with
-  singular tranformation matrices.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
   &lt;h6&gt;Line styles&lt;/h6&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
@@ -41854,41 +41195,48 @@
   &lt;/div&gt;
 
 
-  &lt;h6&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+  &lt;h6&gt;Text styles&lt;/h6&gt;
 
-  &lt;p&gt;All drawing operations are affected by the four global shadow
-  attributes.&lt;/p&gt;
-
   &lt;dl class=&quot;domintro&quot;&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current shadow color.&lt;/p&gt;
+    &lt;p&gt;Returns the current font settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the shadow color. Values that cannot be parsed as CSS colors are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the font. The syntax is the same as for
+    the CSS 'font' property; values that cannot be parsed as CSS font
+    values are ignored.&lt;/p&gt;
 
+    &lt;p&gt;Relative keywords and lengths are computed relative to the font
+    of the &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;
+
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;shadowOffsetX&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;shadowOffsetY&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current shadow offset.&lt;/p&gt;
+    &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the shadow offset. Values that are not finite numbers are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the alignment. The possible values are
+    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code
+    title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code
+    title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
+    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current level of blur applied to shadows.&lt;/p&gt;
+    &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the blur level. Values that are not finite numbers greater than or equal to zero are ignored.&lt;/p&gt;
+    &lt;p&gt;Can be set, to change the baseline alignment. The possible
+    values and their meanings are given below. Other values are
+    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -41896,230 +41244,141 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-shadowColor&quot;&gt;&lt;code&gt;shadowColor&lt;/code&gt;&lt;/dfn&gt;
-  attribute sets the color of the shadow.&lt;/p&gt;
+  &lt;p&gt;Objects that implement the &lt;code&gt;CanvasText&lt;/code&gt;
+  interface have attributes (defined in this section) that control how
+  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code
-  title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt; attribute
-  initially must be fully-transparent black.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-font&quot;&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute, on setting, must be parsed the same way as the 'font'
+  property of CSS (but without supporting property-independent style
+  sheet syntax like 'inherit'), and the resulting font must be
+  assigned to the context, with the 'line-height' component forced to
+  'normal', with the 'font-size' component converted to CSS pixels,
+  and with system fonts being computed to explicit values. If the new
+  value is syntactically incorrect (including using
+  property-independent style sheet syntax like 'inherit' or
+  'initial'), then it must be ignored, without assigning a new font
+  value. &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On getting, the &lt;span title=&quot;serialization of a
-  color&quot;&gt;serialization of the color&lt;/span&gt; must be returned.&lt;/p&gt;
+  &lt;p&gt;Font names must be interpreted in the context of the
+  &lt;code&gt;canvas&lt;/code&gt; element's stylesheets; any fonts embedded using
+  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
+  they are loaded. (If a font is referenced before it is fully loaded,
+  then it must be treated as if it was an unknown font, falling back
+  to another as described by the relevant CSS specifications.) &lt;a
+  href=&quot;#refsCSSFONTS&quot;&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On setting, the new value must be &lt;span&gt;parsed as a CSS
-  &lt;color&gt; value&lt;/span&gt; and the color assigned. If the value
-  cannot be parsed as a CSS &lt;color&gt; value then it must be
-  ignored, and the attribute must retain its previous value. &lt;a
-  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- XXX Path objects don't have a canvas --&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;&lt;code&gt;shadowOffsetX&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn
-  title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;&lt;code&gt;shadowOffsetY&lt;/code&gt;&lt;/dfn&gt;
-  attributes specify the distance that the shadow will be offset in
-  the positive horizontal and positive vertical distance
-  respectively. Their values are in coordinate space units. They are
-  not affected by the current transformation matrix.&lt;/p&gt;
+  &lt;p&gt;Only vector fonts should be used by the user agent; if a user
+  agent were to use bitmap fonts then transformations would likely
+  make the font look very ugly.&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the shadow offset attributes must
-  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+  &lt;p&gt;On getting, the &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt;
+  attribute must return the &lt;span title=&quot;serializing a CSS
+  value&quot;&gt;serialized form&lt;/span&gt; of the current font of the context
+  (with no 'line-height' component). &lt;a
+  href=&quot;#refsCSSOM&quot;&gt;[CSSOM]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;On getting, they must return their current value. On setting, the
-  attribute being set must be set to the new value, except if the
-  value is infinite or NaN, in which case the new value must be
-  ignored.&lt;/p&gt;
+  &lt;div class=&quot;example&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-shadowBlur&quot;&gt;&lt;code&gt;shadowBlur&lt;/code&gt;&lt;/dfn&gt;
-  attribute specifies the level of the blurring effect. (The units do
-  not map to coordinate space units, and are not affected by the
-  current transformation matrix.)&lt;/p&gt;
+   &lt;p&gt;For example, after the following statement:&lt;/p&gt;
 
-  &lt;p&gt;When the context is created, the &lt;code
-  title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt; attribute must
-  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+   &lt;pre&gt;context.font = 'italic 400 12px/2 Unknown Font, sans-serif';&lt;/pre&gt;
 
-  &lt;p&gt;On getting, the attribute must return its current value. On
-  setting the attribute must be set to the new value, except if the
-  value is negative, infinite or NaN, in which case the new value must
-  be ignored.&lt;/p&gt;
+   &lt;p&gt;...the expression &lt;code title=&quot;&quot;&gt;context.font&lt;/code&gt; would
+   evaluate to the string &quot;&lt;code
+   title=&quot;&quot;&gt;italic&nbsp;12px&nbsp;&quot;Unknown&nbsp;Font&quot;,&nbsp;sans-serif&lt;/code&gt;&quot;. The
+   &quot;400&quot; font-weight doesn't appear because that is the default
+   value. The line-height doesn't appear because it is forced to
+   &quot;normal&quot;, the default value.&lt;/p&gt;
 
-  &lt;p&gt;&lt;dfn title=&quot;when shadows are drawn&quot;&gt;Shadows are only drawn
-  if&lt;/dfn&gt; the opacity component of the alpha component of the color
-  of &lt;code title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt; is
-  non-zero and either the &lt;code
-  title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt; is non-zero, or
-  the &lt;code title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;shadowOffsetX&lt;/code&gt;
-  is non-zero, or the &lt;code
-  title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;shadowOffsetY&lt;/code&gt; is
-  non-zero.&lt;/p&gt;
-
-  &lt;p class=&quot;critical&quot;&gt;It is likely that this will change: browser
-  vendors have indicated an interest in changing the processing model
-  for shadows such that they only draw when the composition operator
-  is &quot;source-over&quot; (the default). &lt;a
-  href=&quot;<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457</A>&quot;&gt;Read
-  more...&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;&lt;span&gt;When shadows are drawn&lt;/span&gt;, they must be rendered as follows:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; be an infinite transparent black
-   bitmap on which the source image for which a shadow is being
-   created has been rendered.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; be an infinite transparent black
-   bitmap, with a coordinate space and an origin identical to &lt;var
-   title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Copy the alpha channel of &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; to &lt;var
-   title=&quot;&quot;&gt;B&lt;/var&gt;, offset by &lt;code
-   title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;shadowOffsetX&lt;/code&gt; in the
-   positive &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; direction, and &lt;code
-   title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;shadowOffsetY&lt;/code&gt; in the
-   positive &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; direction.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;If &lt;code
-   title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt; is greater than
-   0:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; be half the value of
-     &lt;code
-     title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt; &lt;p&gt;Perform a 2D Gaussian Blur on &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;,
-     using &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; as the standard deviation.&lt;/p&gt;
-     &lt;!-- wish i could find a reference for this --&gt; &lt;/li&gt;
-
-    &lt;/ol&gt;
-
-    &lt;p&gt;User agents may limit values of &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; to
-    an implementation-specific maximum value to avoid exceeding
-    hardware limitations during the Gaussian blur operation.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Set the red, green, and blue components of every pixel in
-   &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; to the red, green, and blue components
-   (respectively) of the color of &lt;code
-   title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;Multiply the alpha component of every pixel in &lt;var
-   title=&quot;&quot;&gt;B&lt;/var&gt; by the alpha component of the color of &lt;code
-   title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
-
-   &lt;li&gt; &lt;p&gt;The shadow is in the bitmap &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, and is
-   rendered as part of the &lt;span&gt;drawing model&lt;/span&gt; described below.&lt;/p&gt; &lt;/li&gt;
-
-  &lt;/ol&gt;
-
   &lt;/div&gt;
 
-  &lt;p&gt;If the current composition operation is &lt;code
-  title=&quot;gcop-copy&quot;&gt;copy&lt;/code&gt;, shadows effectively won't render
-  (since the shape will overwrite the shadow).&lt;/p&gt;
+  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasText&lt;/code&gt;
+  interface is created, the font of the context must be set to 10px
+  sans-serif. When the 'font-size' component is set to lengths using
+  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
+  keywords, these must be interpreted relative to the computed value
+  of the 'font-size' property of the corresponding &lt;code&gt;canvas&lt;/code&gt;
+  element at the time that the attribute is set. When the
+  'font-weight' component is set to the relative values 'bolder' and
+  'lighter', these must be interpreted relative to the computed value
+  of the 'font-weight' property of the corresponding
+  &lt;code&gt;canvas&lt;/code&gt; element at the time that the attribute is set.
+  If the computed values are undefined for a particular case (e.g.
+  because the &lt;code&gt;canvas&lt;/code&gt; element is not &lt;span&gt;in a
+  &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;), then the relative keywords must be
+  interpreted relative to the normal-weight 10px sans-serif
+  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-textAlign&quot;&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
+  attribute, on getting, must return the current value. On setting, if
+  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code
+  title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code
+  title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
+  value must be changed to the new value. Otherwise, the new value
+  must be ignored. When the object implementing the
+  &lt;code&gt;CanvasText&lt;/code&gt; interface is created, the &lt;code
+  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; attribute must
+  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;h6&gt;Simple shapes (rectangles)&lt;/h6&gt;
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-textBaseline&quot;&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
+  IDL attribute, on getting, must return the current value. On
+  setting, if the value is one of &lt;code
+  title=&quot;dom-context-2d-textBaseline-top&quot;&gt;top&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-textBaseline-hanging&quot;&gt;hanging&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-textBaseline-middle&quot;&gt;middle&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;alphabetic&lt;/code&gt;,
+  &lt;code
+  title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;ideographic&lt;/code&gt;,
+  or &lt;code title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;bottom&lt;/code&gt;,
+  then the value must be changed to the new value. Otherwise, the new
+  value must be ignored. When the object implementing the
+  &lt;code&gt;CanvasText&lt;/code&gt; interface is created, the &lt;code
+  title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute
+  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;There are three methods that immediately draw rectangles to the
-  bitmap. They each take four arguments; the first two give the &lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
-  left of the rectangle, and the second two give the width &lt;var
-  title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
-  respectively.&lt;/p&gt;
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;p&gt;The &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
-  transformation matrix&lt;/span&gt; must be applied to the following four
-  coordinates, which form the path that must then be closed to get the
-  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
-  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Shapes are painted without affecting the current default path,
-  and are subject to the &lt;span title=&quot;clipping region&quot;&gt;clipping
-  region&lt;/span&gt;, and, with the exception of &lt;code
-  title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect()&lt;/code&gt;, also &lt;span
-  title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
-  title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, and &lt;span
-  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
-  operators&lt;/span&gt;.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;dl class=&quot;domintro&quot;&gt;
+  &lt;p&gt;The &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt;
+  attribute's allowed keywords correspond to alignment points in the
+  font:&lt;/p&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
+  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
+  &lt;p&gt;&lt;img src=&quot;images/baselines.png&quot; width=&quot;738&quot; height=&quot;300&quot; alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &amp;#x0906; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &amp;#x00C1;, &amp;#x00FF;, &amp;#x0066;, and &amp;#x03A9; are anchored, the ideographic baseline is where glyphs like &amp;#x79C1; and &amp;#x9054; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot;&gt;&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
 
-    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
+  &lt;dl&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-top&quot;&gt;&lt;code&gt;top&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The top of the em square&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillRect&quot;&gt;fillRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-hanging&quot;&gt;&lt;code&gt;hanging&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The hanging baseline&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-middle&quot;&gt;&lt;code&gt;middle&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The middle of the em square&lt;/dd&gt;
 
-    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
+   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;&lt;code&gt;alphabetic&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The alphabetic baseline&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;&lt;code&gt;ideographic&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The ideographic baseline&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeRect&quot;&gt;strokeRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
+   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
 
-   &lt;dd&gt;
-
-    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
   &lt;/dl&gt;
 
-  &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-clearRect&quot;&gt;&lt;code&gt;clearRect(&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
-  specified rectangle that also intersect the current clipping region
-  to a fully transparent black, erasing any previous image. If either
-  height or width are zero, this method has no effect.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-fillRect&quot;&gt;&lt;code&gt;fillRect(&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
-  rectangular area using the &lt;code
-  title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt;. If either height
-  or width are zero, this method has no effect.&lt;/p&gt;
+  &lt;h6&gt;Building paths&lt;/h6&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-strokeRect&quot;&gt;&lt;code&gt;strokeRect(&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
-  rectangle's path using the &lt;code
-  title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
-  appropriate) &lt;code
-  title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes. If
-  both height and width are zero, this method has no effect, since
-  there is no path to stroke (it's a point). If only one of the two is
-  zero, then the method will draw a line instead (the path for the
-  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;h6&gt;Complex shapes (paths)&lt;/h6&gt;
-
   &lt;p&gt;Each object implementing the &lt;code&gt;CanvasPathMethods&lt;/code&gt;
   interface has a &lt;span&gt;path&lt;/span&gt;. A &lt;dfn&gt;path&lt;/dfn&gt; has a list of
   zero or more subpaths. Each subpath consists of a list of one or
@@ -42426,6 +41685,489 @@
 
 
 
+
+  &lt;h6&gt;Fill and stroke styles&lt;/h6&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current style used for filling shapes.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the fill style.&lt;/p&gt;
+
+    &lt;p&gt;The style can be either a string containing a CSS color, or a
+    &lt;code&gt;CanvasGradient&lt;/code&gt; or &lt;code&gt;CanvasPattern&lt;/code&gt;
+    object. Invalid values are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current style used for stroking shapes.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the stroke style.&lt;/p&gt;
+
+    &lt;p&gt;The style can be either a string containing a CSS color, or a
+    &lt;code&gt;CanvasGradient&lt;/code&gt; or &lt;code&gt;CanvasPattern&lt;/code&gt;
+    object. Invalid values are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;!-- v6 feature requests:
+
+   * Getting and setting colours by component to bypass the CSS value parsing.
+
+     Either:
+        context.fillStyle.red += 1;
+
+     Or:
+        var array = context.fillStyle;
+        array[1] += 1;
+        context.fillStyle = array;
+
+   * A more performant way of setting colours in general, e.g.:
+
+       context.setFillColor(r,g,b,a) // already supported by webkit
+
+     Or:
+
+       context.fillStyle = 0xRRGGBBAA; // set a 32bit int directly
+
+   * fill rule for deciding between winding and even-odd algorithms.
+     SVG has fill-rule: nonzero | evenodd
+       <A HREF="http://www.w3.org/TR/SVG/painting.html#FillProperties">http://www.w3.org/TR/SVG/painting.html#FillProperties</A>
+     see also mozFillRule: <A HREF="http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html">http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032002.html</A>
+
+  --&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-fillStyle&quot;&gt;&lt;code&gt;fillStyle&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the color or style to use inside shapes, and
+  the &lt;dfn
+  title=&quot;dom-context-2d-strokeStyle&quot;&gt;&lt;code&gt;strokeStyle&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the color or style to use for the lines around
+  the shapes.&lt;/p&gt;
+
+  &lt;p&gt;Both attributes can be either strings,
+  &lt;code&gt;CanvasGradient&lt;/code&gt;s, or &lt;code&gt;CanvasPattern&lt;/code&gt;s. On
+  setting, strings must be &lt;span title=&quot;parsed as a CSS &lt;color&gt;
+  value&quot;&gt;parsed as CSS &lt;color&gt; values&lt;/span&gt; and the color
+  assigned, and &lt;code&gt;CanvasGradient&lt;/code&gt; and
+  &lt;code&gt;CanvasPattern&lt;/code&gt; objects must be assigned themselves. &lt;a
+  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt; If the value is a string but
+  cannot be &lt;span&gt;parsed as a CSS &lt;color&gt; value&lt;/span&gt;, or is
+  neither a string, a &lt;code&gt;CanvasGradient&lt;/code&gt;, nor a
+  &lt;code&gt;CanvasPattern&lt;/code&gt;, then it must be ignored, and the
+  attribute must retain its previous value.&lt;/p&gt;
+
+  &lt;p&gt;When set to a &lt;code&gt;CanvasPattern&lt;/code&gt; or
+  &lt;code&gt;CanvasGradient&lt;/code&gt; object, the assignment is
+  &lt;span&gt;live&lt;/span&gt;, meaning that changes made to the object after the
+  assignment do affect subsequent stroking or filling of shapes.&lt;/p&gt;
+
+  &lt;p&gt;On getting, if the value is a color, then the &lt;span
+  title=&quot;serialization of a color&quot;&gt;serialization of the color&lt;/span&gt;
+  must be returned. Otherwise, if it is not a color but a
+  &lt;code&gt;CanvasGradient&lt;/code&gt; or &lt;code&gt;CanvasPattern&lt;/code&gt;, then the
+  respective object must be returned. (Such objects are opaque and
+  therefore only useful for assigning to other attributes or for
+  comparison to other gradients or patterns.)&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;serialization of a color&lt;/dfn&gt; for a color value is a
+  string, computed as follows: if it has alpha equal to 1.0, then the
+  string is a lowercase six-digit hex value, prefixed with a &quot;#&quot;
+  character (U+0023 NUMBER SIGN), with the first two digits
+  representing the red component, the next two digits representing the
+  green component, and the last two digits representing the blue
+  component, the digits being in the range 0-9 a-f (U+0030 to U+0039
+  and U+0061 to U+0066). Otherwise, the color value has alpha less
+  than 1.0, and the string is the color value in the CSS &lt;code
+  title=&quot;&quot;&gt;rgba()&lt;/code&gt; functional-notation format: the literal
+  string &lt;code title=&quot;&quot;&gt;rgba&lt;/code&gt; (U+0072 U+0067 U+0062 U+0061)
+  followed by a U+0028 LEFT PARENTHESIS, a base-ten integer in the
+  range 0-255 representing the red component (using digits 0-9, U+0030
+  to U+0039, in the shortest form possible), a literal U+002C COMMA
+  and U+0020 SPACE, an integer for the green component, a comma and a
+  space, an integer for the blue component, another comma and space, a
+  U+0030 DIGIT ZERO, if the alpha value is greater than zero then a
+  U+002E FULL STOP (representing the decimal point), if the alpha
+  value is greater than zero then one or more digits in the range 0-9
+  (U+0030 to U+0039) representing the fractional part of the alpha&lt;!--
+  value with no trailing zeros (implied by next sentence)--&gt;, and
+  finally a U+0029 RIGHT PARENTHESIS. User agents must express the
+  fractional part of the alpha value, if any, with the level of
+  precision necessary for the alpha value, when reparsed, to be
+  interpreted as the same alpha value.&lt;/p&gt; &lt;!-- if people complain
+  this is unreadable, expand it into a &lt;dl&gt; with two nested &lt;ol&gt;s --&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code
+  title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; attributes
+  must initially have the string value &lt;code
+  title=&quot;&quot;&gt;#000000&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the value is a color, it must not be affected by the
+  transformation matrix when used to draw on the canvas.&lt;/p&gt; &lt;!-- so
+  singular matrices don't affect solid color fillStyles --&gt;
+
+  &lt;/div&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;There are two types of gradients, linear gradients and radial
+  gradients, both represented by objects implementing the opaque
+  &lt;code&gt;CanvasGradient&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;p id=&quot;interpolation&quot;&gt;Once a gradient has been created (see below),
+  stops are placed along it to define how the colors are distributed
+  along the gradient. &lt;span class=&quot;impl&quot;&gt;The color of the gradient at
+  each stop is the color specified for that stop. Between each such
+  stop, the colors and the alpha component must be linearly
+  interpolated over the RGBA space without premultiplying the alpha
+  value to find the color to use at that offset. Before the first
+  stop, the color must be the color of the first stop. After the last
+  stop, the color must be the color of the last stop. When there are
+  no stops, the gradient is transparent black.&lt;/span&gt;&lt;/p&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; . &lt;code title=&quot;dom-canvasgradient-addColorStop&quot;&gt;addColorStop&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Adds a color stop with the given color to the gradient at the
+    given offset. 0.0 is the offset at one end of the gradient, 1.0 is
+    the offset at the other end.&lt;/p&gt;
+
+    &lt;p&gt;Throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception if the offset
+    is out of range. Throws a &lt;code&gt;SyntaxError&lt;/code&gt; exception if the
+    color cannot be parsed.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-createLinearGradient&quot;&gt;createLinearGradient&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;CanvasGradient&lt;/code&gt; object that represents a
+    linear gradient that paints along the line given by the
+    coordinates represented by the arguments.&lt;/p&gt;
+
+    &lt;p&gt;If any of the arguments are not finite numbers, throws a
+    &lt;code&gt;NotSupportedError&lt;/code&gt; exception.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;gradient&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-createRadialGradient&quot;&gt;createRadialGradient&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;CanvasGradient&lt;/code&gt; object that represents a
+    radial gradient that paints along the cone given by the circles
+    represented by the arguments.&lt;/p&gt;
+
+    &lt;p&gt;If any of the arguments are not finite numbers, throws a
+    &lt;code&gt;NotSupportedError&lt;/code&gt; exception. If either of the radii
+    are negative, throws an &lt;code&gt;IndexSizeError&lt;/code&gt; exception.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-canvasgradient-addColorStop&quot;&gt;&lt;code&gt;addColorStop(&lt;var
+  title=&quot;&quot;&gt;offset&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;color&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method on the &lt;code&gt;CanvasGradient&lt;/code&gt; interface adds a new stop
+  to a gradient. If the &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; is less than 0,
+  greater than 1, infinite, or NaN, then an
+  &lt;code&gt;IndexSizeError&lt;/code&gt; exception must be thrown. If the &lt;var
+  title=&quot;&quot;&gt;color&lt;/var&gt; cannot be &lt;span&gt;parsed as a CSS &lt;color&gt;
+  value&lt;/span&gt;, then a &lt;code&gt;SyntaxError&lt;/code&gt; exception must be
+  thrown. Otherwise, the gradient must have a new stop placed, at
+  offset &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; relative to the whole gradient,
+  and with the color obtained by parsing &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; as
+  a CSS &lt;color&gt; value. If multiple stops are added at the same
+  offset on a gradient, they must be placed in the order added, with
+  the first one closest to the start of the gradient, and each
+  subsequent one infinitesimally further along towards the end point
+  (in effect causing all but the first and last stop added at each
+  point to be ignored).&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-createLinearGradient&quot;&gt;&lt;code&gt;createLinearGradient(&lt;var
+  title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes four arguments
+  that represent the start point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;y0&lt;/var&gt;) and end point (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;y1&lt;/var&gt;) of the gradient. If any of the arguments to &lt;code
+  title=&quot;dom-context-2d-createLinearGradient&quot;&gt;createLinearGradient()&lt;/code&gt;
+  are infinite or NaN, the method must throw a
+  &lt;code&gt;NotSupportedError&lt;/code&gt; exception. Otherwise, the method must
+  return a linear &lt;code&gt;CanvasGradient&lt;/code&gt; initialized with the
+  specified line.&lt;/p&gt;
+
+  &lt;p&gt;Linear gradients must be rendered such that all points on a line
+  perpendicular to the line that crosses the start and end points have
+  the color at the point where those two lines cross (with the colors
+  coming from the &lt;a href=&quot;#interpolation&quot;&gt;interpolation and
+  extrapolation&lt;/a&gt; described above). The points in the linear
+  gradient must be transformed as described by the &lt;span
+  title=&quot;dom-context-2d-transformation&quot;&gt;current transformation
+  matrix&lt;/span&gt; when rendering.&lt;/p&gt;
+
+  &lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+  title=&quot;&quot;&gt;x1&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var
+  title=&quot;&quot;&gt;y0&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;&lt;/span&gt;, then
+  the linear gradient must paint nothing.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-createRadialGradient&quot;&gt;&lt;code&gt;createRadialGradient(&lt;var
+  title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes six arguments, the
+  first three representing the start circle with origin (&lt;var
+  title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and radius &lt;var
+  title=&quot;&quot;&gt;r0&lt;/var&gt;, and the last three representing the end circle
+  with origin (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and
+  radius &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;. The values are in coordinate space
+  units. If any of the arguments are infinite or NaN, a
+  &lt;code&gt;NotSupportedError&lt;/code&gt; exception must be thrown. If either
+  of &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt; are negative, an
+  &lt;code&gt;IndexSizeError&lt;/code&gt; exception must be thrown. Otherwise,
+  the method must return a radial &lt;code&gt;CanvasGradient&lt;/code&gt;
+  initialized with the two specified circles.&lt;/p&gt;
+
+  &lt;p&gt;Radial gradients must be rendered by following these steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+   title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+   title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span title=&quot;&quot;&gt;&lt;var
+   title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+   title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the radial gradient must
+   paint nothing. Abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;x(&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+    title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
+    title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+    title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;y(&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+    title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
+    title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+    title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span title=&quot;&quot;&gt;r(&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+    title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
+    title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+    title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; be the color at
+    that position on the gradient (with the colors coming from the &lt;a
+    href=&quot;#interpolation&quot;&gt;interpolation and extrapolation&lt;/a&gt;
+    described above).&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; where &lt;span
+   title=&quot;&quot;&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;&gt;&nbsp;0&lt;/span&gt;,
+   starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
+   positive infinity and ending with the value of &lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
+   circumference of the circle with radius &lt;span title=&quot;&quot;&gt;r(&lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span title=&quot;&quot;&gt;x(&lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;y(&lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
+   canvas that have not yet been painted on by earlier circles in this
+   step for this rendering of the gradient.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;note&quot;&gt;This effectively creates a cone, touched by the two
+  circles defined in the creation of the gradient, with the part of
+  the cone before the start circle (0.0) using the color of the first
+  offset, the part of the cone after the end circle (1.0) using the
+  color of the last offset, and areas outside the cone untouched by
+  the gradient (transparent black).&lt;/p&gt;
+
+  &lt;p&gt;The resulting radial gradient must then be transformed as
+  described by the &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
+  transformation matrix&lt;/span&gt; when rendering.&lt;/p&gt;
+
+  &lt;p&gt;Gradients must be painted only where the relevant stroking or
+  filling effects requires that they be drawn.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;Patterns are represented by objects implementing the opaque
+  &lt;code&gt;CanvasPattern&lt;/code&gt; interface.&lt;/p&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;pattern&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns a &lt;code&gt;CanvasPattern&lt;/code&gt; object that uses the given image
+    and repeats in the direction(s) given by the &lt;var
+    title=&quot;&quot;&gt;repetition&lt;/var&gt; argument.&lt;/p&gt;
+
+    &lt;p&gt;The allowed values for &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt; are &lt;code
+    title=&quot;&quot;&gt;repeat&lt;/code&gt; (both directions), &lt;code
+    title=&quot;&quot;&gt;repeat-x&lt;/code&gt; (horizontal only), &lt;code
+    title=&quot;&quot;&gt;repeat-y&lt;/code&gt; (vertical only), and &lt;code
+    title=&quot;&quot;&gt;no-repeat&lt;/code&gt; (neither). If the &lt;var
+    title=&quot;&quot;&gt;repetition&lt;/var&gt; argument is empty, the value &lt;code
+    title=&quot;&quot;&gt;repeat&lt;/code&gt; is used.&lt;/p&gt;
+
+    &lt;p&gt;If the image has no image data, throws an
+    &lt;code&gt;InvalidStateError&lt;/code&gt; exception. If the second argument
+    isn't one of the allowed values, throws a &lt;code&gt;SyntaxError&lt;/code&gt;
+    exception. If the image isn't yet fully decoded, then the method
+    returns null.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;To create objects of this type, the &lt;dfn
+  title=&quot;dom-context-2d-createPattern&quot;&gt;&lt;code&gt;createPattern(&lt;var
+  title=&quot;&quot;&gt;image&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method is used. The first argument gives the image to use as the
+  pattern (either an &lt;code&gt;HTMLImageElement&lt;/code&gt;,
+  &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, or &lt;code&gt;HTMLVideoElement&lt;/code&gt;
+  object). Modifying this image after calling the &lt;code
+  title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern()&lt;/code&gt; method
+  must not affect the pattern. The second argument must be a string
+  with one of the following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;,
+  &lt;code title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;,
+  &lt;code title=&quot;&quot;&gt;no-repeat&lt;/code&gt;. If the empty string is specified,
+  &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt; must be assumed. If an unrecognized value
+  is given, then the user agent must throw a &lt;code&gt;SyntaxError&lt;/code&gt;
+  exception. User agents must recognize the four values described above
+  exactly (e.g. they must not do case folding). Except as specified
+  below, the method must return a &lt;code&gt;CanvasPattern&lt;/code&gt; object
+  suitably initialized.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an instance of either
+  &lt;code&gt;HTMLImageElement&lt;/code&gt;, &lt;code&gt;HTMLCanvasElement&lt;/code&gt;, or
+  &lt;code&gt;HTMLVideoElement&lt;/code&gt;.&lt;/p&gt; &lt;!-- drawImage() has an equivalent
+  paragraph --&gt;
+
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;HTMLImageElement&lt;/code&gt; object that is not &lt;span
+  title=&quot;img-good&quot;&gt;fully decodable&lt;/span&gt;, or if the &lt;var
+  title=&quot;&quot;&gt;image&lt;/var&gt; argument is an &lt;code&gt;HTMLVideoElement&lt;/code&gt;
+  object whose &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
+  attribute is either &lt;code
+  title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt; or &lt;code
+  title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;, then the
+  implementation must return null.&lt;/p&gt; &lt;!-- drawImage() has an
+  equivalent paragraph --&gt;
+
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;HTMLCanvasElement&lt;/code&gt; object with either a horizontal
+  dimension or a vertical dimension equal to zero, then the
+  implementation must throw an &lt;code&gt;InvalidStateError&lt;/code&gt;
+  exception.&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;p&gt;Patterns must be painted so that the top left of the first image
+  is anchored at the origin of the coordinate space, and images are
+  then repeated horizontally to the left and right, if the
+  &lt;code&gt;repeat-x&lt;/code&gt; string was specified, or vertically up and
+  down, if the &lt;code&gt;repeat-y&lt;/code&gt; string was specified, or in all
+  four directions all over the canvas, if the &lt;code&gt;repeat&lt;/code&gt;
+  string was specified, to create the repeated pattern that is used
+  for rendering. The images are not scaled by this process; one CSS
+  pixel of the image must be painted on one coordinate space unit in
+  generating the repeated pattern. When rendered, however, patterns
+  must actually be painted only where the stroking or filling effect
+  requires that they be drawn, and the repeated pattern must be
+  affected by the current transformation matrix. Pixels not covered by
+  the repeating pattern (if the &lt;code&gt;repeat&lt;/code&gt; string was not
+  specified) must be transparent black.&lt;/p&gt;
+
+  &lt;p&gt;If the original image data is a bitmap image, the value painted
+  at a point in the area of the repetitions is computed by filtering
+  the original image data. The user agent may use any filtering
+  algorithm (for example bilinear interpolation or nearest-neighbor).
+  When the filtering algorithm requires a pixel value from outside the
+  original image data, it must instead use the value from wrapping the
+  pixel's coordinates to the original image's dimensions. (That is,
+  the filter uses 'repeat' behavior, regardless of the value of
+  &lt;var title=&quot;&quot;&gt;repetition&lt;/var&gt;.)
+  &lt;!-- drawImage() has a similar paragraph with different rules --&gt;
+
+  &lt;p&gt;When the &lt;code
+  title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern()&lt;/code&gt; method
+  is passed an animated image as its &lt;var title=&quot;&quot;&gt;image&lt;/var&gt;
+  argument, the user agent must use the poster frame of the animation,
+  or, if there is no poster frame, the first frame of the
+  animation.&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;p&gt;When the &lt;var title=&quot;&quot;&gt;image&lt;/var&gt; argument is an
+  &lt;code&gt;HTMLVideoElement&lt;/code&gt;, then the frame at the &lt;span&gt;current
+  playback position&lt;/span&gt; must be used as the source image, and the
+  source image's dimensions must be the &lt;span
+  title=&quot;concept-video-intrinsic-width&quot;&gt;intrinsic width&lt;/span&gt; and
+  &lt;span title=&quot;concept-video-intrinsic-height&quot;&gt;intrinsic height&lt;/span&gt;
+  of the &lt;span&gt;media resource&lt;/span&gt; (i.e. after any aspect-ratio
+  correction has been applied).&lt;/p&gt;
+  &lt;!-- drawImage() has an equivalent paragraph --&gt;
+
+  &lt;!--
+   Requests for v5 features:
+    * apply transforms to patterns, so you don't have to create
+      transformed patterns manually by rendering them to an off-screen
+      canvas then using that canvas as the pattern.
+  --&gt;
+
+  &lt;/div&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;If a radial gradient or repeated pattern is used when the
+  transformation matrix is singular, the resulting style must be
+  transparent black (otherwise the gradient or pattern would be
+  collapsed to a point or line, leaving the other pixels undefined).
+  Linear gradients and solid colors always define all points even with
+  singular tranformation matrices.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
   &lt;h6&gt;The current default path&lt;/h6&gt;
 
   &lt;p&gt;The context always has a current default path. There is only one
@@ -42819,188 +42561,104 @@
 
 
 
-  &lt;h6&gt;Text&lt;/h6&gt; &lt;!-- a v3 feature --&gt;
 
-  &lt;dl class=&quot;domintro&quot;&gt;
+  &lt;h6&gt;Drawing rectangles to the canvas&lt;/h6&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+  &lt;p&gt;There are three methods that immediately draw rectangles to the
+  bitmap. They each take four arguments; the first two give the &lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; coordinates of the top
+  left of the rectangle, and the second two give the width &lt;var
+  title=&quot;&quot;&gt;w&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;h&lt;/var&gt; of the rectangle,
+  respectively.&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;div class=&quot;impl&quot;&gt;
 
-    &lt;p&gt;Returns the current font settings.&lt;/p&gt;
+  &lt;p&gt;The &lt;span title=&quot;dom-context-2d-transformation&quot;&gt;current
+  transformation matrix&lt;/span&gt; must be applied to the following four
+  coordinates, which form the path that must then be closed to get the
+  specified rectangle: &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var
+  title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;w&lt;/var&gt;&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;,
+  &lt;span title=&quot;&quot;&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;+&lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;&lt;/span&gt;)&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the font. The syntax is the same as for
-    the CSS 'font' property; values that cannot be parsed as CSS font
-    values are ignored.&lt;/p&gt;
+  &lt;p&gt;Shapes are painted without affecting the current default path,
+  and are subject to the &lt;span title=&quot;clipping region&quot;&gt;clipping
+  region&lt;/span&gt;, and, with the exception of &lt;code
+  title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect()&lt;/code&gt;, also &lt;span
+  title=&quot;shadows&quot;&gt;shadow effects&lt;/span&gt;, &lt;span
+  title=&quot;dom-context-2d-globalAlpha&quot;&gt;global alpha&lt;/span&gt;, and &lt;span
+  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global composition
+  operators&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Relative keywords and lengths are computed relative to the font
-    of the &lt;code&gt;canvas&lt;/code&gt; element.&lt;/p&gt;
+  &lt;/div&gt;
 
-   &lt;/dd&gt;
+  &lt;dl class=&quot;domintro&quot;&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current text alignment settings.&lt;/p&gt;
+    &lt;p&gt;Clears all pixels on the canvas in the given rectangle to transparent black.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the alignment. The possible values are
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code
-    title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;right&lt;/code&gt;, and &lt;code
-    title=&quot;&quot;&gt;center&lt;/code&gt;. Other values are ignored. The default is
-    &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillRect&quot;&gt;fillRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the current baseline alignment settings.&lt;/p&gt;
+    &lt;p&gt;Paints the given rectangle onto the canvas, using the current fill style.&lt;/p&gt;
 
-    &lt;p&gt;Can be set, to change the baseline alignment. The possible
-    values and their meanings are given below. Other values are
-    ignored. The default is &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
-  &lt;/dl&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-strokeRect&quot;&gt;strokeRect&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/dt&gt;
 
-  &lt;div class=&quot;impl&quot;&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;Objects that implement the &lt;code&gt;CanvasText&lt;/code&gt;
-  interface have attributes (defined in this section) that control how
-  text is laid out (rasterized or outlined) by the object.&lt;/p&gt;
+    &lt;p&gt;Paints the box that outlines the given rectangle onto the canvas, using the current stroke style.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-font&quot;&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on setting, must be parsed the same way as the 'font'
-  property of CSS (but without supporting property-independent style
-  sheet syntax like 'inherit'), and the resulting font must be
-  assigned to the context, with the 'line-height' component forced to
-  'normal', with the 'font-size' component converted to CSS pixels,
-  and with system fonts being computed to explicit values. If the new
-  value is syntactically incorrect (including using
-  property-independent style sheet syntax like 'inherit' or
-  'initial'), then it must be ignored, without assigning a new font
-  value. &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+   &lt;/dd&gt;
 
-  &lt;p&gt;Font names must be interpreted in the context of the
-  &lt;code&gt;canvas&lt;/code&gt; element's stylesheets; any fonts embedded using
-  &lt;code title=&quot;&quot;&gt;@font-face&lt;/code&gt; must therefore be available once
-  they are loaded. (If a font is referenced before it is fully loaded,
-  then it must be treated as if it was an unknown font, falling back
-  to another as described by the relevant CSS specifications.) &lt;a
-  href=&quot;#refsCSSFONTS&quot;&gt;[CSSFONTS]&lt;/a&gt;&lt;/p&gt;
+  &lt;/dl&gt;
 
-  &lt;!-- XXX Path objects don't have a canvas --&gt;
+  &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;Only vector fonts should be used by the user agent; if a user
-  agent were to use bitmap fonts then transformations would likely
-  make the font look very ugly.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-clearRect&quot;&gt;&lt;code&gt;clearRect(&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must clear the pixels in the
+  specified rectangle that also intersect the current clipping region
+  to a fully transparent black, erasing any previous image. If either
+  height or width are zero, this method has no effect.&lt;/p&gt;
 
-  &lt;p&gt;On getting, the &lt;code title=&quot;dom-context-2d-font&quot;&gt;font&lt;/code&gt;
-  attribute must return the &lt;span title=&quot;serializing a CSS
-  value&quot;&gt;serialized form&lt;/span&gt; of the current font of the context
-  (with no 'line-height' component). &lt;a
-  href=&quot;#refsCSSOM&quot;&gt;[CSSOM]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-fillRect&quot;&gt;&lt;code&gt;fillRect(&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must paint the specified
+  rectangular area using the &lt;code
+  title=&quot;dom-context-2d-fillStyle&quot;&gt;fillStyle&lt;/code&gt;. If either height
+  or width are zero, this method has no effect.&lt;/p&gt;
 
-  &lt;div class=&quot;example&quot;&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-strokeRect&quot;&gt;&lt;code&gt;strokeRect(&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;w&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;h&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must stroke the specified
+  rectangle's path using the &lt;code
+  title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
+  appropriate) &lt;code
+  title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes. If
+  both height and width are zero, this method has no effect, since
+  there is no path to stroke (it's a point). If only one of the two is
+  zero, then the method will draw a line instead (the path for the
+  outline is just a straight line along the non-zero dimension).&lt;/p&gt;
 
-   &lt;p&gt;For example, after the following statement:&lt;/p&gt;
-
-   &lt;pre&gt;context.font = 'italic 400 12px/2 Unknown Font, sans-serif';&lt;/pre&gt;
-
-   &lt;p&gt;...the expression &lt;code title=&quot;&quot;&gt;context.font&lt;/code&gt; would
-   evaluate to the string &quot;&lt;code
-   title=&quot;&quot;&gt;italic&nbsp;12px&nbsp;&quot;Unknown&nbsp;Font&quot;,&nbsp;sans-serif&lt;/code&gt;&quot;. The
-   &quot;400&quot; font-weight doesn't appear because that is the default
-   value. The line-height doesn't appear because it is forced to
-   &quot;normal&quot;, the default value.&lt;/p&gt;
-
   &lt;/div&gt;
 
-  &lt;p&gt;When the object implementing the &lt;code&gt;CanvasText&lt;/code&gt;
-  interface is created, the font of the context must be set to 10px
-  sans-serif. When the 'font-size' component is set to lengths using
-  percentages, 'em' or 'ex' units, or the 'larger' or 'smaller'
-  keywords, these must be interpreted relative to the computed value
-  of the 'font-size' property of the corresponding &lt;code&gt;canvas&lt;/code&gt;
-  element at the time that the attribute is set. When the
-  'font-weight' component is set to the relative values 'bolder' and
-  'lighter', these must be interpreted relative to the computed value
-  of the 'font-weight' property of the corresponding
-  &lt;code&gt;canvas&lt;/code&gt; element at the time that the attribute is set.
-  If the computed values are undefined for a particular case (e.g.
-  because the &lt;code&gt;canvas&lt;/code&gt; element is not &lt;span&gt;in a
-  &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;), then the relative keywords must be
-  interpreted relative to the normal-weight 10px sans-serif
-  default.&lt;/p&gt; &lt;!-- XXX Path canvas issue again, twice --&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-textAlign&quot;&gt;&lt;code&gt;textAlign&lt;/code&gt;&lt;/dfn&gt; IDL
-  attribute, on getting, must return the current value. On setting, if
-  the value is one of &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;, &lt;code
-  title=&quot;&quot;&gt;end&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;left&lt;/code&gt;, &lt;code
-  title=&quot;&quot;&gt;right&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;center&lt;/code&gt;, then the
-  value must be changed to the new value. Otherwise, the new value
-  must be ignored. When the object implementing the
-  &lt;code&gt;CanvasText&lt;/code&gt; interface is created, the &lt;code
-  title=&quot;dom-context-2d-textAlign&quot;&gt;textAlign&lt;/code&gt; attribute must
-  initially have the value &lt;code title=&quot;&quot;&gt;start&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-context-2d-textBaseline&quot;&gt;&lt;code&gt;textBaseline&lt;/code&gt;&lt;/dfn&gt;
-  IDL attribute, on getting, must return the current value. On
-  setting, if the value is one of &lt;code
-  title=&quot;dom-context-2d-textBaseline-top&quot;&gt;top&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-textBaseline-hanging&quot;&gt;hanging&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-textBaseline-middle&quot;&gt;middle&lt;/code&gt;, &lt;code
-  title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;alphabetic&lt;/code&gt;,
-  &lt;code
-  title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;ideographic&lt;/code&gt;,
-  or &lt;code title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;bottom&lt;/code&gt;,
-  then the value must be changed to the new value. Otherwise, the new
-  value must be ignored. When the object implementing the
-  &lt;code&gt;CanvasText&lt;/code&gt; interface is created, the &lt;code
-  title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt; attribute
-  must initially have the value &lt;code title=&quot;&quot;&gt;alphabetic&lt;/code&gt;.&lt;/p&gt;
+  &lt;h6&gt;Drawing text to the canvas&lt;/h6&gt;
 
-  &lt;/div&gt;
-
-  &lt;p&gt;The &lt;code title=&quot;dom-context-2d-textBaseline&quot;&gt;textBaseline&lt;/code&gt;
-  attribute's allowed keywords correspond to alignment points in the
-  font:&lt;/p&gt;
-
-  &lt;!-- this is filler to make sure the TCP packet boundary doesn't fall in the middle of one of the NCRs below --&gt;
-  &lt;!-- (because otherwise the parser in anolis screws it up) --&gt;
-  &lt;p&gt;&lt;img src=&quot;images/baselines.png&quot; width=&quot;738&quot; height=&quot;300&quot; alt=&quot;The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like &amp;#x0906; are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like &amp;#x00C1;, &amp;#x00FF;, &amp;#x0066;, and &amp;#x03A9; are anchored, the ideographic baseline is where glyphs like &amp;#x79C1; and &amp;#x9054; are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square.&quot;&gt;&lt;/p&gt;
-
-  &lt;p&gt;The keywords map to these alignment points as follows:&lt;/p&gt;
-
-  &lt;dl&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-top&quot;&gt;&lt;code&gt;top&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The top of the em square&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-hanging&quot;&gt;&lt;code&gt;hanging&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The hanging baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-middle&quot;&gt;&lt;code&gt;middle&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The middle of the em square&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-alphabetic&quot;&gt;&lt;code&gt;alphabetic&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The alphabetic baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-ideographic&quot;&gt;&lt;code&gt;ideographic&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The ideographic baseline&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;dom-context-2d-textBaseline-bottom&quot;&gt;&lt;code&gt;bottom&lt;/code&gt;&lt;/dfn&gt;
-   &lt;dd&gt;The bottom of the em square&lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;hr&gt;
-
   &lt;dl class=&quot;domintro&quot;&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-fillText&quot;&gt;fillText&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;text&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; [, &lt;var title=&quot;&quot;&gt;maxWidth&lt;/var&gt; ] )&lt;/dt&gt;
@@ -43451,7 +43109,7 @@
 
 
 
-  &lt;h6&gt;Images&lt;/h6&gt;
+  &lt;h6&gt;Drawing images to the canvas&lt;/h6&gt;
 
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn
   title=&quot;dom-context-2d-drawImage&quot;&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method
@@ -44044,8 +43702,363 @@
   &lt;/div&gt;
 
 
+
+
+  &lt;h6&gt;Compositing&lt;/h6&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current alpha value applied to rendering operations.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the alpha value. Values outside of the
+    range 0.0 .. 1.0 are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current composition operation, from the list below.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the composition operation. Unknown values
+    are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
+  &lt;p&gt;All drawing operations are affected by the global compositing
+  attributes, &lt;code
+  title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; and &lt;code
+  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;!-- conformance criteria for painting are described in the &quot;drawing
+  model&quot; section below --&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-globalAlpha&quot;&gt;&lt;code&gt;globalAlpha&lt;/code&gt;&lt;/dfn&gt;
+  attribute gives an alpha value that is applied to shapes and images
+  before they are composited onto the canvas. The value must be in the
+  range from 0.0 (fully transparent) to 1.0 (no additional
+  transparency). If an attempt is made to set the attribute to a value
+  outside this range, including Infinity and Not-a-Number (NaN)
+  values, the attribute must retain its previous value. When the
+  context is created, the &lt;code
+  title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; attribute must
+  initially have the value 1.0.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;&lt;code&gt;globalCompositeOperation&lt;/code&gt;&lt;/dfn&gt;
+  attribute sets how shapes and images are drawn onto the existing
+  bitmap, once they have had &lt;code
+  title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/code&gt; and the
+  current transformation matrix applied. It must be set to a value
+  from the following list. In the descriptions below, the source
+  image, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;, is the shape or image being rendered,
+  and the destination image, &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, is the current
+  state of the bitmap.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-source-atop&quot;&gt;&lt;code&gt;source-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
+   source image wherever both images are opaque. Display the
+   destination image wherever the destination image is opaque but the
+   source image is transparent. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-source-in&quot;&gt;&lt;code&gt;source-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
+   source image wherever both the source image and destination image
+   are opaque. Display transparency elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-source-out&quot;&gt;&lt;code&gt;source-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
+   source image wherever the source image is opaque and the
+   destination image is transparent. Display transparency
+   elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-source-over&quot;&gt;&lt;code&gt;source-over&lt;/code&gt;&lt;/dfn&gt; (default)&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
+   source image wherever the source image is opaque. Display the
+   destination image elsewhere.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-destination-atop&quot;&gt;&lt;code&gt;destination-atop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; atop &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Same as &lt;code
+   title=&quot;gcop-source-atop&quot;&gt;source-atop&lt;/code&gt; but using the
+   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-destination-in&quot;&gt;&lt;code&gt;destination-in&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Same as &lt;code
+   title=&quot;gcop-source-in&quot;&gt;source-in&lt;/code&gt; but using the destination
+   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-destination-out&quot;&gt;&lt;code&gt;destination-out&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; out &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Same as &lt;code
+   title=&quot;gcop-source-out&quot;&gt;source-out&lt;/code&gt; but using the destination
+   image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-destination-over&quot;&gt;&lt;code&gt;destination-over&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Same as &lt;code
+   title=&quot;gcop-source-over&quot;&gt;source-over&lt;/code&gt; but using the
+   destination image instead of the source image and vice versa.&lt;/span&gt;&lt;/dd&gt;
+
+
+&lt;!-- no clear definition of this operator (doesn't correspond to a PorterDuff operator)
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-darker&quot;&gt;&lt;code&gt;darker&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;span class=&quot;note&quot;&gt;Display the sum of the source image and destination image,
+   with color values approaching 0 as a limit.&lt;/span&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-lighter&quot;&gt;&lt;code&gt;lighter&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; plus &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Display the
+   sum of the source image and destination image, with color values
+   approaching 255 (100%) as a limit.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-copy&quot;&gt;&lt;code&gt;copy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; (&lt;var title=&quot;&quot;&gt;B&lt;/var&gt; is
+   ignored). &lt;span class=&quot;note&quot;&gt;Display the source image instead of the destination
+   image.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;dfn title=&quot;gcop-xor&quot;&gt;&lt;code&gt;xor&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt; xor &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;. &lt;span class=&quot;note&quot;&gt;Exclusive OR
+   of the source image and destination image.&lt;/span&gt;&lt;/dd&gt;
+
+
+   &lt;dt class=&quot;impl&quot;&gt;&lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorName&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;operationName&lt;/var&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd class=&quot;impl&quot;&gt;Vendor-specific extensions to the list of
+   composition operators should use this syntax.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The operators in the above list must be treated as described by
+  the Porter-Duff operator given at the start of their description
+  (e.g. &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; over &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;). They are to
+  be applied as part of the &lt;span&gt;drawing model&lt;/span&gt;, at which point the
+  &lt;span&gt;clipping region&lt;/span&gt; is also applied. (Without a clipping
+  region, these operators act on the whole bitmap with every
+  operation.) &lt;a href=&quot;#refsPORTERDUFF&quot;&gt;[PORTERDUFF]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;These values are all case-sensitive &mdash; they must be used
+  exactly as shown. User agents must not recognize values that are not
+  a &lt;span&gt;case-sensitive&lt;/span&gt; match for one of the values given
+  above.&lt;/p&gt;
+
+  &lt;p&gt;On setting, if the user agent does not recognize the specified
+  value, it must be ignored, leaving the value of &lt;code
+  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/code&gt;
+  unaffected.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code
+  title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/code&gt;
+  attribute must initially have the value
+  &lt;code&gt;source-over&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+
+  &lt;h6&gt;&lt;dfn&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
+
+  &lt;p&gt;All drawing operations are affected by the four global shadow
+  attributes.&lt;/p&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current shadow color.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the shadow color. Values that cannot be parsed as CSS colors are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;shadowOffsetX&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;shadowOffsetY&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current shadow offset.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the shadow offset. Values that are not finite numbers are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;context&lt;/var&gt; . &lt;code title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the current level of blur applied to shadows.&lt;/p&gt;
+
+    &lt;p&gt;Can be set, to change the blur level. Values that are not finite numbers greater than or equal to zero are ignored.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-shadowColor&quot;&gt;&lt;code&gt;shadowColor&lt;/code&gt;&lt;/dfn&gt;
+  attribute sets the color of the shadow.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code
+  title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt; attribute
+  initially must be fully-transparent black.&lt;/p&gt;
+
+  &lt;p&gt;On getting, the &lt;span title=&quot;serialization of a
+  color&quot;&gt;serialization of the color&lt;/span&gt; must be returned.&lt;/p&gt;
+
+  &lt;p&gt;On setting, the new value must be &lt;span&gt;parsed as a CSS
+  &lt;color&gt; value&lt;/span&gt; and the color assigned. If the value
+  cannot be parsed as a CSS &lt;color&gt; value then it must be
+  ignored, and the attribute must retain its previous value. &lt;a
+  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;&lt;code&gt;shadowOffsetX&lt;/code&gt;&lt;/dfn&gt;
+  and &lt;dfn
+  title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;&lt;code&gt;shadowOffsetY&lt;/code&gt;&lt;/dfn&gt;
+  attributes specify the distance that the shadow will be offset in
+  the positive horizontal and positive vertical distance
+  respectively. Their values are in coordinate space units. They are
+  not affected by the current transformation matrix.&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the shadow offset attributes must
+  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;On getting, they must return their current value. On setting, the
+  attribute being set must be set to the new value, except if the
+  value is infinite or NaN, in which case the new value must be
+  ignored.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-shadowBlur&quot;&gt;&lt;code&gt;shadowBlur&lt;/code&gt;&lt;/dfn&gt;
+  attribute specifies the level of the blurring effect. (The units do
+  not map to coordinate space units, and are not affected by the
+  current transformation matrix.)&lt;/p&gt;
+
+  &lt;p&gt;When the context is created, the &lt;code
+  title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt; attribute must
+  initially have the value &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;On getting, the attribute must return its current value. On
+  setting the attribute must be set to the new value, except if the
+  value is negative, infinite or NaN, in which case the new value must
+  be ignored.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;when shadows are drawn&quot;&gt;Shadows are only drawn
+  if&lt;/dfn&gt; the opacity component of the alpha component of the color
+  of &lt;code title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt; is
+  non-zero and either the &lt;code
+  title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt; is non-zero, or
+  the &lt;code title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;shadowOffsetX&lt;/code&gt;
+  is non-zero, or the &lt;code
+  title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;shadowOffsetY&lt;/code&gt; is
+  non-zero.&lt;/p&gt;
+
+  &lt;p class=&quot;critical&quot;&gt;It is likely that this will change: browser
+  vendors have indicated an interest in changing the processing model
+  for shadows such that they only draw when the composition operator
+  is &quot;source-over&quot; (the default). &lt;a
+  href=&quot;<A HREF="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/thread.html#31457</A>&quot;&gt;Read
+  more...&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;&lt;span&gt;When shadows are drawn&lt;/span&gt;, they must be rendered as follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; be an infinite transparent black
+   bitmap on which the source image for which a shadow is being
+   created has been rendered.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; be an infinite transparent black
+   bitmap, with a coordinate space and an origin identical to &lt;var
+   title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Copy the alpha channel of &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; to &lt;var
+   title=&quot;&quot;&gt;B&lt;/var&gt;, offset by &lt;code
+   title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;shadowOffsetX&lt;/code&gt; in the
+   positive &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; direction, and &lt;code
+   title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;shadowOffsetY&lt;/code&gt; in the
+   positive &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; direction.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;If &lt;code
+   title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt; is greater than
+   0:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt; &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; be half the value of
+     &lt;code
+     title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt; &lt;p&gt;Perform a 2D Gaussian Blur on &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;,
+     using &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; as the standard deviation.&lt;/p&gt;
+     &lt;!-- wish i could find a reference for this --&gt; &lt;/li&gt;
+
+    &lt;/ol&gt;
+
+    &lt;p&gt;User agents may limit values of &lt;var title=&quot;&quot;&gt;&sigma;&lt;/var&gt; to
+    an implementation-specific maximum value to avoid exceeding
+    hardware limitations during the Gaussian blur operation.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Set the red, green, and blue components of every pixel in
+   &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; to the red, green, and blue components
+   (respectively) of the color of &lt;code
+   title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;Multiply the alpha component of every pixel in &lt;var
+   title=&quot;&quot;&gt;B&lt;/var&gt; by the alpha component of the color of &lt;code
+   title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt;
+
+   &lt;li&gt; &lt;p&gt;The shadow is in the bitmap &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, and is
+   rendered as part of the &lt;span&gt;drawing model&lt;/span&gt; described below.&lt;/p&gt; &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;/div&gt;
+
+  &lt;p&gt;If the current composition operation is &lt;code
+  title=&quot;gcop-copy&quot;&gt;copy&lt;/code&gt;, shadows effectively won't render
+  (since the shape will overwrite the shadow).&lt;/p&gt;
+
+
+
+  &lt;div class=&quot;impl&quot;&gt;
+
   &lt;h6&gt;&lt;dfn&gt;Drawing model&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013886.html">[html5] r7021 - [e] (0) Mention iframe sandbox in the context of	http+aes. Affected topics: HTML [...]
</A></li>
	<LI>Next message: <A HREF="013888.html">[html5] r7023 - [giow] (0) Path objects and drawing text to a path	or along a path. Note that th [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13887">[ date ]</a>
              <a href="thread.html#13887">[ thread ]</a>
              <a href="subject.html#13887">[ subject ]</a>
              <a href="author.html#13887">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
