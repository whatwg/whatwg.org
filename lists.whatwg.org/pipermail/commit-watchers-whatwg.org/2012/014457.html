<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7597 - [acgiow] (0) New feature: sorting tables. The	actual sort algorithm isn't done y [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7597%20-%20%5Bacgiow%5D%20%280%29%20New%20feature%3A%20sorting%20tables.%20The%0A%09actual%20sort%20algorithm%20isn%27t%20done%20y%20%5B...%5D&In-Reply-To=%3C20121226235825.5E73B9C7C23A%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014456.html">
   <LINK REL="Next"  HREF="014458.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7597 - [acgiow] (0) New feature: sorting tables. The	actual sort algorithm isn't done y [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7597%20-%20%5Bacgiow%5D%20%280%29%20New%20feature%3A%20sorting%20tables.%20The%0A%09actual%20sort%20algorithm%20isn%27t%20done%20y%20%5B...%5D&In-Reply-To=%3C20121226235825.5E73B9C7C23A%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7597 - [acgiow] (0) New feature: sorting tables. The	actual sort algorithm isn't done y [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Dec 26 15:58:25 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="014456.html">[html5] r7596 - [giow] (3) Make click() have no effect on links in	non-bc'ed docs. Affected topi [...]
</A></li>
        <LI>Next message: <A HREF="014458.html">[html5] r7598 - [] (0) Clean up some issues Anne found with sorting	model. Affected topics: HTML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14457">[ date ]</a>
              <a href="thread.html#14457">[ thread ]</a>
              <a href="subject.html#14457">[ subject ]</a>
              <a href="author.html#14457">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2012-12-26 15:58:23 -0800 (Wed, 26 Dec 2012)
New Revision: 7597

Modified:
   complete.html
   index
   source
Log:
[acgiow] (0) New feature: sorting tables. The actual sort algorithm isn't done yet, but this should be a good start for first draft reviewers.
Affected topics: DOM APIs, HTML, Rendering

Modified: complete.html
===================================================================
--- complete.html	2012-12-19 20:11:40 UTC (rev 7596)
+++ complete.html	2012-12-26 23:58:23 UTC (rev 7597)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 19 December 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 26 December 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -665,7 +665,8 @@
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#forming-a-table&gt;&lt;span class=secno&gt;4.9.12.1 &lt;/span&gt;Forming a table&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#header-and-data-cell-semantics&gt;&lt;span class=secno&gt;4.9.12.2 &lt;/span&gt;Forming relationships between data cells and header cells&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#examples-0&gt;&lt;span class=secno&gt;4.9.13 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#table-sorting-model&gt;&lt;span class=secno&gt;4.9.13 &lt;/span&gt;Table sorting model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#examples-0&gt;&lt;span class=secno&gt;4.9.14 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#forms&gt;&lt;span class=secno&gt;4.10 &lt;/span&gt;Forms&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-1&gt;&lt;span class=secno&gt;4.10.1 &lt;/span&gt;Introduction&lt;/a&gt;
@@ -4049,7 +4050,7 @@
      &lt;li&gt;&lt;dfn id=dom-element-id title=dom-Element-id&gt;&lt;code&gt;id&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/li&gt;
      &lt;li&gt;&lt;dfn id=textcontent&gt;&lt;code&gt;textContent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/li&gt;
 
-     &lt;li&gt;The &lt;dfn id=concept-node-insert title=concept-node-insert&gt;insert&lt;/dfn&gt;, &lt;dfn id=concept-node-append title=concept-node-append&gt;append&lt;/dfn&gt;, and &lt;dfn id=concept-node-replace title=concept-node-replace&gt;replace&lt;/dfn&gt; algorithms for nodes&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn id=concept-node-insert title=concept-node-insert&gt;insert&lt;/dfn&gt;, &lt;dfn id=concept-node-append title=concept-node-append&gt;append&lt;/dfn&gt;, &lt;dfn id=concept-node-remove title=concept-node-remove&gt;remove&lt;/dfn&gt;, and &lt;dfn id=concept-node-replace title=concept-node-replace&gt;replace&lt;/dfn&gt; algorithms for nodes&lt;/li&gt;
      &lt;li&gt;The &lt;dfn id=nodes-are-inserted&gt;nodes are inserted&lt;/dfn&gt; and &lt;dfn id=nodes-are-removed&gt;nodes are removed&lt;/dfn&gt; concepts&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn id=event&gt;&lt;code&gt;Event&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
@@ -6353,6 +6354,9 @@
 
   &lt;h5 id=durations&gt;&lt;span class=secno&gt;2.5.5.9 &lt;/span&gt;Durations&lt;/h5&gt;
 
+  &lt;!-- if you add support for year and month durations, then search for MONTHS throughout the spec
+  (not just this section) for things that have to change --&gt;
+
   &lt;p&gt;A &lt;dfn id=concept-duration title=concept-duration&gt;duration&lt;/dfn&gt; consists of &lt;!--MONTHS: either a number of
   months or--&gt; a number of seconds.&lt;/p&gt;
 
@@ -9662,6 +9666,7 @@
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onseeking title=handler-onseeking&gt;onseeking&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onselect title=handler-onselect&gt;onselect&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onshow title=handler-onshow&gt;onshow&lt;/a&gt;;
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsort title=handler-onsort&gt;onsort&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onstalled title=handler-onstalled&gt;onstalled&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsubmit title=handler-onsubmit&gt;onsubmit&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsuspend title=handler-onsuspend&gt;onsuspend&lt;/a&gt;;
@@ -10671,6 +10676,7 @@
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onseeking title=handler-onseeking&gt;onseeking&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onselect title=handler-onselect&gt;onselect&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onshow title=handler-onshow&gt;onshow&lt;/a&gt;;
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsort title=handler-onsort&gt;onsort&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onstalled title=handler-onstalled&gt;onstalled&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsubmit title=handler-onsubmit&gt;onsubmit&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsuspend title=handler-onsuspend&gt;onsuspend&lt;/a&gt;;
@@ -10803,6 +10809,7 @@
    &lt;li&gt;&lt;code title=handler-onseeking&gt;&lt;a href=#handler-onseeking&gt;onseeking&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onselect&gt;&lt;a href=#handler-onselect&gt;onselect&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onshow&gt;&lt;a href=#handler-onshow&gt;onshow&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;code title=handler-onsort&gt;&lt;a href=#handler-onsort&gt;onsort&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onstalled&gt;&lt;a href=#handler-onstalled&gt;onstalled&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onsubmit&gt;&lt;a href=#handler-onsubmit&gt;onsubmit&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onsuspend&gt;&lt;a href=#handler-onsuspend&gt;onsuspend&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -21252,12 +21259,11 @@
 
   &lt;div class=example&gt;
 
-   &lt;p&gt;Here, a short table has its numeric values encoded using
-   &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt; so that a script can provide a sorting mechanism
-   on each column, despite the numbers being presented in textual
-   form in one column and in a decomposed form in another.&lt;/p&gt;
+   &lt;p&gt;Here, a short table has its numeric values encoded using &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt; so that the
+   &lt;a href=#table-sorting-model&gt;table sorting model&lt;/a&gt; can provide a sorting mechanism on each column, despite the
+   numbers being presented in textual form in one column and in a decomposed form in another.&lt;/p&gt;
 
-   &lt;pre&gt;&lt;table class=&quot;sortable&quot;&gt; &lt;!-- class used by script to find tables to which to add sorting controls --&gt;
+   &lt;pre&gt;&lt;table sortable&gt;
  &lt;thead&gt; &lt;tr&gt; &lt;th&gt; Game &lt;th&gt; Corporations &lt;th&gt; Map Size
  &lt;tbody&gt;
   &lt;tr&gt; &lt;td&gt; 1830 &lt;td&gt; &lt;data value=&quot;8&quot;&gt;Eight&lt;/data&gt; &lt;td&gt; &lt;data value=&quot;93&quot;&gt;19+74 hexes (93 total)&lt;/data&gt;
@@ -21455,9 +21461,8 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The machine-readable equivalent of the element's contents must be
-  obtained from the element's &lt;a href=#datetime-value&gt;datetime value&lt;/a&gt; by using the
-  following algorithm:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=&quot;machine-readable-equivalent-of-the-element's-contents&quot;&gt;machine-readable equivalent of the element's contents&lt;/dfn&gt; must be obtained from the
+  element's &lt;a href=#datetime-value&gt;datetime value&lt;/a&gt; by using the following algorithm:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;a href=#parse-a-month-string title=&quot;parse a month string&quot;&gt;parsing a month
    string&lt;/a&gt; from the element's &lt;a href=#datetime-value&gt;datetime value&lt;/a&gt;
@@ -41443,6 +41448,7 @@
    total).&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
 &lt;pre class=idl&gt;interface &lt;dfn id=htmltableelement&gt;HTMLTableElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
@@ -41460,6 +41466,8 @@
   readonly attribute &lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt; &lt;a href=#dom-table-rows title=dom-table-rows&gt;rows&lt;/a&gt;;
   &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; &lt;a href=#dom-table-insertrow title=dom-table-insertRow&gt;insertRow&lt;/a&gt;(optional long index);
   void &lt;a href=#dom-table-deleterow title=dom-table-deleteRow&gt;deleteRow&lt;/a&gt;(long index);
+           attribute boolean &lt;a href=#dom-table-sortable title=dom-table-sortable&gt;sortable&lt;/a&gt;;
+  void &lt;a href=#dom-table-stopsorting title=dom-table-stopSorting&gt;stopSorting&lt;/a&gt;();
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; data with
@@ -41547,6 +41555,9 @@
 
   &lt;/div&gt;
 
+  &lt;hr&gt;&lt;p&gt;The &lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt; attribute is used in the &lt;a href=#table-sorting-model&gt;table
+  sorting model&lt;/a&gt;.&lt;/p&gt;
+
   &lt;hr&gt;&lt;!--TOPIC:DOM APIs--&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;table&lt;/var&gt; . &lt;code title=dom-table-caption&gt;&lt;a href=#dom-table-caption&gt;caption&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dd&gt;
     &lt;p&gt;Returns the table's &lt;code&gt;&lt;a href=#the-caption-element&gt;caption&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
@@ -41795,7 +41806,13 @@
 
    &lt;li&gt;&lt;p&gt;Otherwise, the method must remove the &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;th element in the &lt;code title=dom-table-rows&gt;&lt;a href=#dom-table-rows&gt;rows&lt;/a&gt;&lt;/code&gt; collection from its parent.&lt;/p&gt;
 
-  &lt;/ol&gt;&lt;/div&gt;
+  &lt;/ol&gt;&lt;p&gt;The &lt;code title=dom-table-stopSorting&gt;&lt;a href=#dom-table-stopsorting&gt;stopSorting()&lt;/a&gt;&lt;/code&gt; method is used in the &lt;a href=#table-sorting-model&gt;table
+  sorting model&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The IDL attribute &lt;dfn id=dom-table-sortable title=dom-table-sortable&gt;&lt;code&gt;sortable&lt;/code&gt;&lt;/dfn&gt; must
+  &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
+
+  &lt;/div&gt;
 &lt;!--TOPIC:HTML--&gt;
 
   &lt;div class=example&gt;
@@ -42638,11 +42655,14 @@
    &lt;dd&gt;&lt;code title=attr-tdth-headers&gt;&lt;a href=#attr-tdth-headers&gt;headers&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-th-scope&gt;&lt;a href=#attr-th-scope&gt;scope&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-th-abbr&gt;&lt;a href=#attr-th-abbr&gt;abbr&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
     &lt;pre class=idl&gt;interface &lt;dfn id=htmltableheadercellelement&gt;HTMLTableHeaderCellElement&lt;/dfn&gt; : &lt;a href=#htmltablecellelement&gt;HTMLTableCellElement&lt;/a&gt; {
            attribute DOMString &lt;a href=#dom-th-scope title=dom-th-scope&gt;scope&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-th-abbr title=dom-th-abbr&gt;abbr&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-th-sorted title=dom-th-sorted&gt;sorted&lt;/a&gt;;
+  void &lt;a href=#dom-th-sort title=dom-th-sort&gt;sort&lt;/a&gt;();
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; a header &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; in a table.&lt;/p&gt;
@@ -42696,17 +42716,23 @@
   to a data cell). It is typically an abbreviated form of the full header cell, but can also be an
   expansion, or merely a different phrasing.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute is used in the &lt;a href=#table-sorting-model&gt;table
+  sorting model&lt;/a&gt;.&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element and its &lt;code title=attr-tdth-colspan&gt;&lt;a href=#attr-tdth-colspan&gt;colspan&lt;/a&gt;&lt;/code&gt;, &lt;code title=attr-tdth-rowspan&gt;&lt;a href=#attr-tdth-rowspan&gt;rowspan&lt;/a&gt;&lt;/code&gt;, &lt;code title=attr-tdth-headers&gt;&lt;a href=#attr-tdth-headers&gt;headers&lt;/a&gt;&lt;/code&gt;, and &lt;code title=attr-th-scope&gt;&lt;a href=#attr-th-scope&gt;scope&lt;/a&gt;&lt;/code&gt; attributes take part in the
   &lt;a href=#table-model&gt;table model&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code title=dom-th-sort&gt;&lt;a href=#dom-th-sort&gt;sort()&lt;/a&gt;&lt;/code&gt; method is used in the &lt;a href=#table-sorting-model&gt;table sorting
+  model&lt;/a&gt;.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-th-scope title=dom-th-scope&gt;&lt;code&gt;scope&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
   same name, &lt;a href=#limited-to-only-known-values&gt;limited to only known values&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-th-abbr title=dom-th-abbr&gt;&lt;code&gt;abbr&lt;/code&gt;&lt;/dfn&gt; IDL attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt;
-  the content attribute of the same name.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-th-abbr title=dom-th-abbr&gt;&lt;code&gt;abbr&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-th-sorted title=dom-th-sorted&gt;&lt;code&gt;sorted&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the
+  content attributes of the same name.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -42885,8 +42911,10 @@
   &lt;p&gt;It is possible, in certain error cases, for two cells to occupy
   the same slot.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;dfn id=concept-row title=concept-row&gt;row&lt;/dfn&gt; is a complete set of slots
-  from &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=0&lt;/span&gt; to &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;, for a particular value of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;. Rows correspond to &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+  &lt;p&gt;A &lt;dfn id=concept-row title=concept-row&gt;row&lt;/dfn&gt; is a complete set of slots from &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=0&lt;/span&gt; to &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;, for a particular value of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;. Rows usually
+  correspond to &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements, though a &lt;a href=#concept-row-group title=concept-row-group&gt;row group&lt;/a&gt;
+  can have some implied &lt;a href=#concept-row title=concept-row&gt;rows&lt;/a&gt; at the end in some cases involving
+  &lt;a href=#concept-cell title=concept-cell&gt;cells&lt;/a&gt; spanning multiple rows.&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-column title=concept-column&gt;column&lt;/dfn&gt; is a complete set of
   slots from &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;=0&lt;/span&gt; to &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;=&lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;, for a particular value of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Columns can correspond to &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;
@@ -43858,8 +43886,656 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=examples-0&gt;&lt;span class=secno&gt;4.9.13 &lt;/span&gt;Examples&lt;/h4&gt;
+  &lt;h4 id=table-sorting-model&gt;&lt;span class=secno&gt;4.9.13 &lt;/span&gt;&lt;dfn&gt;Table sorting model&lt;/dfn&gt;&lt;/h4&gt;
 
+  &lt;p&gt;The &lt;dfn id=attr-table-sortable title=attr-table-sortable&gt;&lt;code&gt;sortable&lt;/code&gt;&lt;/dfn&gt; attribute on
+  &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; elements is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt;. When present, it indicates that
+  the user agent is to &lt;a href=#sortable-ui&gt;allow the user to sort&lt;/a&gt; the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;To make a column sortable in a &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; with a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, the column needs
+  to have &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element that does not &lt;a href=#attr-tdth-colspan title=attr-tdth-colspan&gt;span multiple
+  columns&lt;/a&gt; in a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt; above any rows that it is to sort.&lt;/p&gt;
+
+  &lt;p&gt;To make a column sortable in a &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; without a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, the column
+  needs to have &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element that does not &lt;a href=#attr-tdth-colspan title=attr-tdth-colspan&gt;span multiple
+  columns&lt;/a&gt; in the first &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element of the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;, where that
+  &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element is not in a &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the user selects a column by which to sort, the user agent sets the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt;
+  element's &lt;dfn id=attr-th-sorted title=attr-th-sorted&gt;&lt;code&gt;sorted&lt;/code&gt;&lt;/dfn&gt; attribute. This attribute can also
+  be set manually, to indicate that the table should be automatically sorted, even when scripts
+  modify the page on when the page is loaded.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute, if specified, must have a value that
+  is a &lt;a href=#set-of-space-separated-tokens&gt;set of space-separated tokens&lt;/a&gt; consisting of optionally a token whose value is an
+  &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;dfn id=attr-th-sorted-reversed title=attr-th-sorted-reversed&gt;&lt;code&gt;reversed&lt;/code&gt;&lt;/dfn&gt;&quot;, and optionally a token whose value
+  is a &lt;a href=#valid-non-negative-integer&gt;valid non-negative integer&lt;/a&gt; greater than zero, in either order.&lt;/p&gt;
+
+  &lt;p class=note&gt;In other words, ignoring spaces and case, the &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute's value can be empty, &quot;&lt;code title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;1&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;reversed 1&lt;/code&gt;&quot;, or
+  &quot;&lt;code title=&quot;&quot;&gt;1 reversed&lt;/code&gt;&quot;, where &quot;1&quot; is any number equal to or greater than 1.&lt;/p&gt;
+
+  &lt;p&gt;While one or more &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; elements in the table have a &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute, the user agent will keep the table's data rows
+  sorted. The value of the attribute controls how the column is used in determining the sort order.
+  The &lt;code title=attr-th-sorted-reversed&gt;&lt;a href=#attr-th-sorted-reversed&gt;reversed&lt;/a&gt;&lt;/code&gt; keyword means that the &lt;dfn id=column-sort-direction&gt;column sort
+  direction&lt;/dfn&gt; is &lt;i&gt;reversed&lt;/i&gt;, rather than &lt;i&gt;normal&lt;/i&gt;, which is the default if the keyword
+  is omitted. The number, if present, indicates the &lt;dfn id=column-key-ordinality&gt;column key ordinality&lt;/dfn&gt;; if the number
+  is omitted, the column is the primary key, as if the value 1 had been specified.&lt;/p&gt;
+
+  &lt;p class=note&gt;Thus, &lt;code title=&quot;&quot;&gt;sorted=&quot;1&quot;&lt;/code&gt; indicates the table's primary key, &lt;code title=&quot;&quot;&gt;sorted=&quot;2&quot;&lt;/code&gt; its secondary key, and so forth.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;A &lt;dfn id=sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; is a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element that matches
+  all the following conditions simultaneously:&lt;/p&gt;
+
+  &lt;ul&gt;&lt;li&gt;&lt;p&gt;It corresponds to a &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; whose &lt;i&gt;width&lt;/i&gt; is 1.
+   (Specifically, a &lt;i&gt;header cell&lt;/i&gt;, since this is a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element.)&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;There is no &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; that corresponds to another
+   &lt;a href=#sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; that covers slots in the same &lt;a href=#concept-column title=concept-column&gt;column&lt;/a&gt; but on a higher (earlier) &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt;.&lt;/li&gt; &lt;!-- only matters if there's a &lt;thead&gt; --&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; has
+    a &lt;a href=#concept-row-group title=concept-row-group&gt;row group&lt;/a&gt; corresponding to a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;
+    element, the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; is in a &lt;a href=#concept-row-group title=concept-row-group&gt;row
+    group&lt;/a&gt; that corresponds to the &lt;em&gt;first&lt;/em&gt; &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt; element of the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise: the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; is not in a &lt;a href=#concept-row-group title=concept-row-group&gt;row group&lt;/a&gt; corresponding to a &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt; element, and
+    the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; is in the first &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt;
+    of the &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p class=note&gt;In other words, each &lt;a href=#concept-column title=concept-column&gt;column&lt;/a&gt; can have one
+  &lt;a href=#sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt;; this will be the highest &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; in
+  a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt; that spans no other columns, or, if there is no &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, the
+  &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; in the first row (that is not in a &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt;), assuming it spans no
+  columns.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=sorting-capable-th-elements-of-the-table-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; are the &lt;a href=#sorting-capable-th-element title=&quot;sorting-capable th element&quot;&gt;sorting-capable
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/a&gt; whose &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is a &lt;dfn id=sorting-capable-table-element&gt;sorting-capable
+  &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; if there are one or more &lt;a href=#sorting-capable-th-elements-of-the-table-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+  elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element is a &lt;dfn id=sorting-enabled-th-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; if it is a
+  &lt;a href=#sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; and it has a &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=sorting-enabled-th-elements-of-the-table-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; are the &lt;a href=#sorting-enabled-th-element title=&quot;sorting-enabled th element&quot;&gt;sorting-enabled
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/a&gt; whose &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is a &lt;dfn id=sorting-enabled-table-element&gt;sorting-enabled
+  &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; if there are one or more &lt;a href=#sorting-capable-th-elements-of-the-table-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+  elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;, and at least one of
+  them is a &lt;a href=#sorting-enabled-th-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; (i.e. at least one has a &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute).&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element is a &lt;dfn id=table-element-with-a-user-agent-exposed-sorting-interface&gt;&lt;code&gt;table&lt;/code&gt; element with a user-agent exposed
+  sorting interface&lt;/dfn&gt; if it is a &lt;a href=#sorting-capable-table-element&gt;sorting-capable &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; and has
+  a &lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element has a &lt;dfn id=currently-sorting-flag&gt;currently-sorting flag&lt;/dfn&gt;, which must initially
+  be false.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute must not be specified on
+  &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; elements that are not &lt;a href=#sorting-capable-th-element title=&quot;sorting-capable th element&quot;&gt;sorting-capable
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/a&gt;. The &lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt; attribute
+  must not be specified on &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; elements that are not &lt;a href=#sorting-capable-table-element title=&quot;sorting-capable
+  table element&quot;&gt;sorting-capable &lt;code&gt;table&lt;/code&gt; elements&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;To determine a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute's
+  &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; and &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt;, user agents must use
+  the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;i&gt;normal&lt;/i&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;have explicit direction&lt;/var&gt; be false.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt; be 1.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;have explicit ordinality&lt;/var&gt; be false.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tokens&lt;/var&gt; be the result of &lt;a href=#split-a-string-on-spaces title=&quot;split a string on
+   spaces&quot;&gt;splitting the attribute's value on spaces&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each token &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;tokens&lt;/var&gt;, run the appropriate
+    steps from the following list:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;have explicit direction&lt;/var&gt; is false and &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is an
+     &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=attr-th-sorted-reversed&gt;&lt;a href=#attr-th-sorted-reversed&gt;reversed&lt;/a&gt;&lt;/code&gt;&quot;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;i&gt;reversed&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;have explicit
+      direction&lt;/var&gt; be true.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;have explicit ordinality&lt;/var&gt; is false&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;a href=#rules-for-parsing-integers title=&quot;rules for parsing integers&quot;&gt;Parse &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; as an
+      integer&lt;/a&gt;. If this resulted in an error or the value zero, then ignore the token.
+      Otherwise, set &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt; to the parsed value, and set &lt;var title=&quot;&quot;&gt;have
+      explicit ordinality&lt;/var&gt; to true.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Ignore the token.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;The &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; is the value of &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;, and
+   the &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt; is the value of &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; must not have two &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute have the same &lt;a href=#column-key-ordinality&gt;column key
+  ordinality&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=table-sorting-algorithm&gt;table sorting algorithm&lt;/dfn&gt;, which is applied to a &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;, is as
+  follows:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; be the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element being sorted.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;a href=#currently-sorting-flag&gt;currently-sorting flag&lt;/a&gt; is true, then abort
+   these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;a href=#currently-sorting-flag&gt;currently-sorting flag&lt;/a&gt; to true.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; named &lt;code title=event-sort&gt;sort&lt;/code&gt; that is
+   cancelable at &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the event fired in the previous step was canceled, then jump to the step labeled
+   &lt;i&gt;end&lt;/i&gt; below.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is not now a &lt;a href=#sorting-enabled-table-element&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt;
+    element&lt;/a&gt;, then jump to the step labeled &lt;i&gt;end&lt;/i&gt; below.&lt;/p&gt;
+
+    &lt;p class=note&gt;Even if &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; was a &lt;a href=#sorting-enabled-table-element&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt;
+    element&lt;/a&gt; when the algorithm was invoked, the DOM might have been entirely changed by the
+    event handlers for the &lt;code title=event-sort&gt;sort&lt;/code&gt; event, so this has to be verified at
+    this stage, not earlier.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt; be the &lt;a href=#sorting-enabled-th-elements-of-the-table-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt;
+   elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Sort &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt; in ascending order of the &lt;a href=#column-key-ordinality&gt;column key
+   ordinality&lt;/a&gt; of their &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attributes, with those
+   having the same &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt; being sorted in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; be a pointer to an element, initially pointing
+    at the first child of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is after &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s first
+    &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, if any, and that is either a &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; or a &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;
+    element, assuming there is one. If there is no such child, then jump to the step labeled
+    &lt;i&gt;end&lt;/i&gt; below.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; has no &lt;a href=#concept-row-group title=concept-row-group&gt;row group&lt;/a&gt;
+   corresponding to a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt; element, then set &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; to
+   true. Otherwise, set it to false.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Row loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt; be an empty list of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;
+   elements.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Run the appropriate steps from the following list:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; points to a &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;Collect&lt;/i&gt;: Append the element pointed to by &lt;var title=&quot;&quot;&gt;row collection
+       cursor&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If there are no &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; children of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that are later siblings of the element pointed to by &lt;var title=&quot;&quot;&gt;row
+       collection cursor&lt;/var&gt;, or if the next such child is a &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; element, then jump
+       to the step labeled &lt;i&gt;group&lt;/i&gt; below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; point to the next &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; child
+       of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is a later sibling of the element pointed to by &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Returned to the step labeled &lt;i&gt;collect&lt;/i&gt; above.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; points to a &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; element
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Place all the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element children of the element pointed to by &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; into &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;, in &lt;a href=#tree-order&gt;tree
+       order&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt; is empty, jump to the step labeled &lt;i&gt;increment loop&lt;/i&gt;
+       below.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Group&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; be an empty list of groups of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;
+   elements.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group&lt;/var&gt; be an empty group of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; be a pointer to an element, initially pointing at the
+   first &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element in &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Start group&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; be 1.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Group loop&lt;/i&gt;: Append the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element pointed to by &lt;var title=&quot;&quot;&gt;group
+   cursor&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-cell title=concept-cell&gt;cells&lt;/a&gt; whose highest &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt;'s element is the one pointed to by &lt;var title=&quot;&quot;&gt;group
+   cursor&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;tallest height&lt;/var&gt; be the number of rows covered by the
+   tallest such &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;tallest height&lt;/var&gt; is greater than &lt;var title=&quot;&quot;&gt;pending rows in
+   group&lt;/var&gt; then set &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;tallest
+   height&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Decrement &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; by one.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; point to the next &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element in &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;, if any; otherwise, let it be null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; is not null and &lt;var title=&quot;&quot;&gt;pending rows in
+   group&lt;/var&gt; is not zero, return to the step labeled &lt;i&gt;group loop&lt;/i&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Append a new group to &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; consisting of the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;
+   elements in &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Empty &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; is not null, then return to the step labeled &lt;i&gt;start
+   group&lt;/i&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; is true, then drop the first roup in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; and set &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; to false.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Drop leading header groups&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; is now empty, jump to the
+   step labeled &lt;i&gt;increment loop&lt;/i&gt; below.&lt;/li&gt;
+
+   &lt;!-- if you insert steps here, update the next step --&gt;
+
+   &lt;li&gt;&lt;p&gt;If the first group of &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; consists of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements
+   whose element children are all &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; elements, then drop the first group in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; and return to the previous step (labeled &lt;i&gt;drop leading header
+   groups&lt;/i&gt;).&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; be a placeholder in a DOM tree, which can be used
+   to reinsert nodes at a specific point in the DOM. Insert &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; into
+   the parent of the first &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element of the first group in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;,
+   immediately before that &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Sort the groups in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, using the following algorithm to decide the
+    relative order of any two groups &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; (the algorithm
+    either returns that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, or that &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;):&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt; be an index into &lt;var title=&quot;&quot;&gt;key heading
+     cells&lt;/var&gt;, initially denoting the first element in the list.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be a sort direction, initially &lt;i&gt;ascending&lt;/i&gt;. Its
+     other possible value is &lt;i&gt;descending&lt;/i&gt;. When &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;i&gt;toggled&lt;/i&gt;, that means that if its value is &lt;i&gt;ascending&lt;/i&gt;, it must be changed to
+     &lt;i&gt;descending&lt;/i&gt;, and when its value is &lt;i&gt;descending&lt;/i&gt;, it must be changed to
+     &lt;i&gt;ascending&lt;/i&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Column loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;th&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt;th
+     &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; in &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute's
+     &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; is &lt;i&gt;reversed&lt;/i&gt;, then toggle &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be the result of &lt;a href=#comparing-two-row-groups-using-the-th-element&gt;comparing two row groups
+     using the &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;, with &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and
+     &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; as the rows.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; is not &quot;equal&quot;, then jump to the step labeled
+     &lt;i&gt;return&lt;/i&gt; below.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt; still denotes a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element in &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt;, then jump back to the step above labeled &lt;i&gt;column
+     loop&lt;/i&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;'s &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements precede &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;'s in
+     &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be &quot;a before b&quot;.
+     Otherwise, let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be &quot;b before a&quot;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Return&lt;/i&gt;: Return the relative order given by the matching option from the following
+     list:&lt;/p&gt;
+
+      &lt;dl class=switch&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;ascending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;a before b&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;ascending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;b before a&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;descending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;a before b&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;descending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;b before a&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.&lt;/dd&gt;
+
+      &lt;/dl&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;p&gt;When the user agent is required to &lt;dfn id=comparing-two-row-groups-using-the-th-element title=&quot;comparing two row groups using the th
+    element&quot;&gt;compare two row groups using the &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;,
+    with &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; being the two row groups respectively, the
+    user agent must run the following steps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the slots that
+     &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; covers in its &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; be the element corresponding to the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; in the first &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt; of group
+      &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; that covers the slot in that &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt; whose
+      &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate is &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; be the element corresponding to the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; in the first &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt; of group
+      &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; that covers the slot in that &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt; whose
+      &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate is &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;!-- there can't be two cells that cover the slot, unusually, because the only way that can
+      happen is if there's a cell that's extended into this row from above, and the groups, by
+      virtue of the way they are created above, never have cells that extend into them from above.
+      --&gt;
+
+      &lt;p&gt;In either case, if there's no &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; that actually covers
+      the slot, then use the value &lt;i&gt;null&lt;/i&gt; instead.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; be
+      the &lt;a href=#type-and-value-of-the-cell&gt;type and value of the cell&lt;/a&gt; &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt;, as defined
+      below.&lt;/p&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; be
+      the &lt;a href=#type-and-value-of-the-cell&gt;type and value of the cell&lt;/a&gt; &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, as defined
+      below.&lt;/p&gt;
+
+      &lt;p&gt;The &lt;dfn id=type-and-value-of-the-cell&gt;type and value of the cell&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; are computed as follows.&lt;/p&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; is &lt;i&gt;null&lt;/i&gt;, then the type is &quot;string&quot; and the value is
+       the empty string; abort these steps.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If, ignoring &lt;a href=#inter-element-whitespace&gt;inter-element whitespace&lt;/a&gt; and &lt;a href=#comment-0&gt;Comment&lt;/a&gt; nodes,
+       &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; has only one child and that child is a &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt; element,
+       then the value is the value of that &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-data-value&gt;&lt;a href=#attr-data-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute, if there is one, or the empty string
+       otherwise; the type is &quot;string&quot;.&lt;/p&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;If, ignoring &lt;a href=#inter-element-whitespace&gt;inter-element whitespace&lt;/a&gt; and &lt;a href=#comment-0&gt;Comment&lt;/a&gt; nodes, &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; has only one child and that child is a &lt;code&gt;&lt;a href=#the-time-element&gt;time&lt;/a&gt;&lt;/code&gt; element, then
+        the value is the &lt;a href=&quot;#machine-readable-equivalent-of-the-element's-contents&quot;&gt;machine-readable equivalent of the element's contents&lt;/a&gt;, if any,
+        and the type is the kind of value that is thus obtained
+       (a &lt;a href=#concept-month title=concept-month&gt;month&lt;/a&gt;,
+        a &lt;a href=#concept-date title=concept-date&gt;date&lt;/a&gt;,
+        a &lt;a href=#concept-yearless-date title=concept-yearless-date&gt;yearless date&lt;/a&gt;,
+        a &lt;a href=#concept-time title=concept-time&gt;time&lt;/a&gt;,
+        a &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt;,
+        a &lt;a href=#concept-timezone title=concept-timezone&gt;time-zone offset&lt;/a&gt;,
+        a &lt;a href=#concept-datetime title=concept-datetime&gt;global date and time&lt;/a&gt;,
+        a &lt;a href=#concept-week title=concept-week&gt;week&lt;/a&gt;,
+        a year, or
+        a &lt;a href=#concept-duration title=concept-duration&gt;duration&lt;/a&gt;);
+        abort these steps after completing this one.&lt;/p&gt;
+
+        &lt;p&gt;If there is no machine-readable equivalent, then the type is &quot;string&quot; and the value is
+        the empty string.&lt;/p&gt;
+
+        &lt;p&gt;If the type is
+        a &lt;a href=#concept-month title=concept-month&gt;month&lt;/a&gt;,
+        a &lt;a href=#concept-date title=concept-date&gt;date&lt;/a&gt;,
+        a &lt;a href=#concept-week title=concept-week&gt;week&lt;/a&gt;, or
+        a year,
+        then change the value to be the instant in time (with no time zone) that describes the
+        earliest moment that the value represents, and change the type to be
+        a &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt;.&lt;/p&gt;
+
+        &lt;p class=example&gt;For example, if the cell was
+        &lt;code&gt;&lt;td&gt;&lt;time&gt;2011-11&lt;/time&gt;&lt;/code&gt; then for sorting purposes the value is
+        interpreted as &quot;2011-11-01T00:00:00.000&quot; and the type is treated as a &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt; rather than a &lt;a href=#concept-month title=concept-month&gt;month&lt;/a&gt;.&lt;/p&gt;
+
+        &lt;p class=example&gt;Similarly, if the cell was &lt;code&gt;&lt;td&gt;&lt;time
+        datetime=&quot;2011&quot;&gt;MMXIV&lt;/time&gt;&lt;/code&gt; then for sorting purposes the value is interpreted as
+        &quot;2014-01-01T00:00:00.000&quot; and the type is treated as a &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt; rather than a year.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;The value is the element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt;. The type is &quot;string&quot;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are not
+      equal, then: return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier in the
+      following list than &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, otherwise, return &quot;b before a&quot;;
+      then, abort these steps.&lt;/p&gt;
+
+      &lt;ol class=brief&gt;&lt;li&gt;&lt;a href=#concept-time title=concept-time&gt;time&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-yearless-date title=concept-yearless-date&gt;yearless date&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-datetime title=concept-datetime&gt;global date and time&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-timezone title=concept-timezone&gt;time-zone offset&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-duration title=concept-duration&gt;duration&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&quot;string&quot;&lt;/li&gt;
+      &lt;/ol&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are
+     equal, then return &quot;equal&quot; and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are not
+      &quot;string&quot;, then: return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier
+      than &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, and return &quot;b before a&quot; otherwise.&lt;/p&gt;
+
+      &lt;p&gt;Values sort in their natural order, with the following additional constraints:&lt;/p&gt;
+
+      &lt;p&gt;For &lt;a href=#concept-time title=concept-time&gt;time&lt;/a&gt; values, 00:00:00.000 is the earliest value and
+      23:59:59.999 is the latest value.&lt;/p&gt;
+
+      &lt;p&gt;For &lt;a href=#concept-yearless-date title=concept-yearless-date&gt;yearless date&lt;/a&gt; values, 01-01 is the earliest
+      value and 12-31 is the latest value; 02-28 is earlier than 02-29 which is earlier than
+      03-01.&lt;/p&gt;
+
+      &lt;p&gt;Values that are &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt; compare as
+      if they were in the same time zone.&lt;/p&gt;
+
+      &lt;!-- no ambiguity for &lt;span title=&quot;concept-datetime&quot;&gt;global date and time&lt;/span&gt; --&gt;
+
+      &lt;p&gt;For &lt;a href=#concept-timezone title=concept-timezone&gt;time-zone offset&lt;/a&gt; values, -23:59 is the earliest
+      value and +23:59 is the latest value.&lt;/p&gt;
+
+      &lt;!-- MONTHS: &lt;span title=&quot;concept-duration&quot;&gt;duration&lt;/span&gt; is unambiguous until we add months --&gt;
+
+     &lt;/li&gt;
+
+     &lt;!-- At this point we know that they are both strings and they're not equal. --&gt;
+
+     &lt;li&gt;
+
+      &lt;p class=XXX&gt;Return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier than
+      &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, and return &quot;b before a&quot; otherwise; for these purposes,
+      the strings must be compared using collation order of the &lt;a href=#language&gt;language&lt;/a&gt; of the
+      &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element to which &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; corresponds.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt; be a list of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements consisting of the
+   &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements of all the groups in the newly ordered &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, with
+   the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements being in the same order as the groups to which they belong are in
+   &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, and the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements within each such group themselves
+   being ordered in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#concept-node-remove title=concept-node-remove&gt;Remove&lt;/a&gt; all the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements in &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt; from their parents.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#concept-node-insert title=concept-node-insert&gt;Insert&lt;/a&gt; all the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements in &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt; into the DOM at the location of &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt;, in
+   the order these elements are found in &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;!-- done with this set of rows --&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; from the DOM.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Increment loop&lt;/i&gt;: If there are no &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; children of
+   &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that are later siblings of the element pointed to by &lt;var title=&quot;&quot;&gt;row
+   collection cursor&lt;/var&gt;, then jump to the step labeled &lt;i&gt;end&lt;/i&gt; below.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; point to the next &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; or
+   &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; child of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is a later sibling of the element
+   pointed to by &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;i&gt;row loop&lt;/i&gt; above.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;End&lt;/i&gt;: Set &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;a href=#currently-sorting-flag&gt;currently-sorting flag&lt;/a&gt; to
+   false.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When any of the descendants of a &lt;a href=#sorting-enabled-table-element&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; change
+  in any way (including attributes changing), and when a &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element becomes a
+  &lt;a href=#sorting-enabled-table-element&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt;, the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element is said to
+  become &lt;dfn id=a-table-with-a-pending-sort&gt;a table with a pending sort&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the user agent is to &lt;dfn id=sort-the-tables-with-pending-sorts&gt;sort the tables with pending sorts&lt;/dfn&gt;, which happens during
+  the &lt;a href=#perform-a-microtask-checkpoint&gt;perform a microtask checkpoint&lt;/a&gt; algorithm, the user agent must run the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tables&lt;/var&gt; be a list of each &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; in the &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of
+   related similar-origin browsing contexts&lt;/a&gt; that is &lt;a href=#a-table-with-a-pending-sort&gt;a table with a pending sort&lt;/a&gt;,
+   in the order that they became such, with those that become such at the same time being listed in
+   &lt;a href=#tree-order&gt;tree order&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let all the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; elements in &lt;var title=&quot;&quot;&gt;tables&lt;/var&gt; no longer be &lt;a href=#a-table-with-a-pending-sort title=&quot;a table with a pending sort&quot;&gt;tables with a pending sort&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Apply the &lt;a href=#table-sorting-algorithm&gt;table sorting algorithm&lt;/a&gt; to each &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; in &lt;var title=&quot;&quot;&gt;tables&lt;/var&gt;, in order.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=set-the-sort-key&gt;set the sort key&lt;/dfn&gt; to a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, it must run the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; be the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; of the &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; of which &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; is a header cell.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; is a &lt;a href=#sorting-enabled-th-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; whose
+   &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt; is 1, then: if its &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; is
+   &lt;i&gt;normal&lt;/i&gt;, set that element's &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute to the
+   string &quot;&lt;code title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, otherwise, set it to the empty string; then, abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current headers&lt;/var&gt; be the &lt;a href=#sorting-enabled-th-elements-of-the-table-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt;
+   elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;, excluding &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Sort &lt;var title=&quot;&quot;&gt;current headers&lt;/var&gt; by their &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attributes' &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt;, in ascending
+   order, with elements that have the same &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt; being sorted in
+   &lt;a href=#tree-order&gt;tree order&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;level&lt;/var&gt; be 2.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;th&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;current
+    headers&lt;/var&gt;, in order, run the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute's
+     &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; is &lt;i&gt;normal&lt;/i&gt;, then set &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute to a &lt;a href=#valid-integer&gt;valid integer&lt;/a&gt; whose value is
+     &lt;var title=&quot;&quot;&gt;level&lt;/var&gt;. Otherwise, set it to the concatenation of the string &quot;&lt;code title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, a U+0020 SPACE character, and a &lt;a href=#valid-integer&gt;valid integer&lt;/a&gt; whose
+     value is &lt;var title=&quot;&quot;&gt;level&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;level&lt;/var&gt; by 1.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute to
+   the empty string.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; of the &lt;a href=#sorting-capable-th-elements-of-the-table-element title=&quot;sorting-capable th elements of the
+  table element&quot;&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of&lt;/a&gt; all &lt;a href=#table-element-with-a-user-agent-exposed-sorting-interface title=&quot;table element
+  with a user-agent exposed sorting interface&quot;&gt;&lt;code&gt;table&lt;/code&gt; elements with a user-agent exposed
+  sorting interface&lt;/a&gt; is to &lt;a href=#set-the-sort-key&gt;set the sort key&lt;/a&gt; to the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+
+  &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; will be sorted the next time the user agent &lt;a href=#perform-a-microtask-checkpoint title=&quot;perform a microtask checkpoint&quot;&gt;performs a microtask checkpoint&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;th&lt;/var&gt; . &lt;code title=dom-th-sort&gt;&lt;a href=#dom-th-sort&gt;sort&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Act as if the user had indicated that this was to be the new primary sort column.&lt;/p&gt;
+
+    &lt;p&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; won't actually be sorted until the script terminates.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;table&lt;/var&gt; . &lt;code title=dom-table-stopSorting&gt;&lt;a href=#dom-table-stopsorting&gt;stopSorting&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Removes all the &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attributes that are causing the
+    table to automatically sort its contents, if any.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element's &lt;dfn id=dom-th-sort title=dom-th-sort&gt;&lt;code&gt;sort()&lt;/code&gt;&lt;/dfn&gt; method, when
+  invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element is not a &lt;a href=#sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+   element&lt;/a&gt;, then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#set-the-sort-key&gt;Set the sort key&lt;/a&gt; to the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+
+    &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; will be sorted the next time the user agent &lt;a href=#perform-a-microtask-checkpoint title=&quot;perform a microtask checkpoint&quot;&gt;performs a microtask checkpoint&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element's &lt;dfn id=dom-table-stopsorting title=dom-table-stopSorting&gt;&lt;code&gt;stopSorting()&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must remove
+  the &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute of all the &lt;a href=#sorting-enabled-th-elements-of-the-table-element&gt;sorting-enabled
+  &lt;code&gt;th&lt;/code&gt; elements of the table element&lt;/a&gt; on which the method was invoked.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h4 id=examples-0&gt;&lt;span class=secno&gt;4.9.14 &lt;/span&gt;Examples&lt;/h4&gt;
+
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;The following shows how might one mark up the bottom part of
@@ -66243,6 +66919,7 @@
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onseeking title=handler-onseeking&gt;onseeking&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onselect title=handler-onselect&gt;onselect&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onshow title=handler-onshow&gt;onshow&lt;/a&gt;;
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsort title=handler-onsort&gt;onsort&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onstalled title=handler-onstalled&gt;onstalled&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-window-onstorage title=handler-window-onstorage&gt;onstorage&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsubmit title=handler-onsubmit&gt;onsubmit&lt;/a&gt;;
@@ -72904,7 +73581,8 @@
   &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must continually run through the
   following steps for as long as it exists:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the oldest &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; on one of the &lt;a href=#event-loop&gt;event
+  &lt;ol&gt;&lt;!-- if you add a step here, make sure to go through the spec updating references to the &quot;first
+   step&quot; of the event loop --&gt;&lt;li&gt;&lt;p&gt;Run the oldest &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; on one of the &lt;a href=#event-loop&gt;event
    loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;, if any, ignoring tasks whose
    associated &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;. The user agent may pick any
    &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
@@ -72915,7 +73593,8 @@
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt; is now owned by the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, release it
    so that it is once again free.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Remove that task from its &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If a task was run in the first step above, remove that task from its &lt;a href=#task-queue&gt;task
+   queue&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#perform-a-microtask-checkpoint&gt;Perform a microtask checkpoint&lt;/a&gt;.&lt;/li&gt;
 
@@ -72935,6 +73614,8 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the &lt;a href=#running-mutation-observers&gt;running mutation observers&lt;/a&gt; flag be
    true.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;a href=#sort-the-tables-with-pending-sorts&gt;Sort the tables with pending sorts&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;
 
     &lt;p&gt;&lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;Invoke
@@ -73602,6 +74283,7 @@
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onseeking title=handler-onseeking&gt;&lt;code&gt;onseeking&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-media-seeking&gt;&lt;a href=#event-media-seeking&gt;seeking&lt;/a&gt;&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onselect title=handler-onselect&gt;&lt;code&gt;onselect&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-select&gt;select&lt;/code&gt; &lt;!-- widely used --&gt; &lt;!-- [CSSOM] --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onshow title=handler-onshow&gt;&lt;code&gt;onshow&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-show&gt;show&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onsort title=handler-onsort&gt;&lt;code&gt;onsort&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-sort&gt;sort&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onstalled title=handler-onstalled&gt;&lt;code&gt;onstalled&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-media-stalled&gt;&lt;a href=#event-media-stalled&gt;stalled&lt;/a&gt;&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onsubmit title=handler-onsubmit&gt;&lt;code&gt;onsubmit&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-submit&gt;submit&lt;/code&gt; &lt;!-- widely used --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onsuspend title=handler-onsuspend&gt;&lt;code&gt;onsuspend&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-media-suspend&gt;&lt;a href=#event-media-suspend&gt;suspend&lt;/a&gt;&lt;/code&gt;
@@ -96520,7 +97202,13 @@
   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1793">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1793</A> --&gt;
   &lt;!-- note that the &quot;rules for parsing dimension values&quot; can't return 0, if the value is &quot;0&quot; they treat it as an error --&gt;
 
+  &lt;hr&gt;&lt;p id=sortable-ui&gt;User agents are expected to render &lt;a href=#sorting-capable-th-elements-of-the-table-element title=&quot;sorting-capable th elements of
+  the table element&quot;&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of&lt;/a&gt; all &lt;a href=#table-element-with-a-user-agent-exposed-sorting-interface title=&quot;table
+  element with a user-agent exposed sorting interface&quot;&gt;&lt;code&gt;table&lt;/code&gt; elements with a user-agent
+  exposed sorting interface&lt;/a&gt; in such a manner as to indicate that activating the elements will
+  cause the table to be sorted.&lt;/p&gt;
 
+
   &lt;h4 id=form-controls&gt;&lt;span class=secno&gt;14.3.10 &lt;/span&gt;Form controls&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
@@ -102952,6 +103640,11 @@
      &lt;td&gt; &lt;code title=event-show&gt;show&lt;/code&gt; event handler
      &lt;td&gt; &lt;a href=#event-handler-content-attributes title=&quot;event handler content attributes&quot;&gt;Event handler content attribute&lt;/a&gt;
 
+    &lt;tr&gt;&lt;th id=ix-handler-onsort&gt; &lt;code title=&quot;&quot;&gt;onsort&lt;/code&gt;
+     &lt;td&gt; &lt;a href=#handler-onsort title=handler-onsort&gt;HTML elements&lt;/a&gt;
+     &lt;td&gt; &lt;code title=event-sort&gt;sort&lt;/code&gt; event handler
+     &lt;td&gt; &lt;a href=#event-handler-content-attributes title=&quot;event handler content attributes&quot;&gt;Event handler content attribute&lt;/a&gt;
+
     &lt;tr&gt;&lt;th id=ix-handler-onstalled&gt; &lt;code title=&quot;&quot;&gt;onstalled&lt;/code&gt;
      &lt;td&gt; &lt;a href=#handler-onstalled title=handler-onstalled&gt;HTML elements&lt;/a&gt;
      &lt;td&gt; &lt;code title=event-media-stalled&gt;&lt;a href=#event-media-stalled&gt;stalled&lt;/a&gt;&lt;/code&gt; event handler

Modified: index
===================================================================
--- index	2012-12-19 20:11:40 UTC (rev 7596)
+++ index	2012-12-26 23:58:23 UTC (rev 7597)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 19 December 2012&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 26 December 2012&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -665,7 +665,8 @@
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#forming-a-table&gt;&lt;span class=secno&gt;4.9.12.1 &lt;/span&gt;Forming a table&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#header-and-data-cell-semantics&gt;&lt;span class=secno&gt;4.9.12.2 &lt;/span&gt;Forming relationships between data cells and header cells&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#examples-0&gt;&lt;span class=secno&gt;4.9.13 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#table-sorting-model&gt;&lt;span class=secno&gt;4.9.13 &lt;/span&gt;Table sorting model&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#examples-0&gt;&lt;span class=secno&gt;4.9.14 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#forms&gt;&lt;span class=secno&gt;4.10 &lt;/span&gt;Forms&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#introduction-1&gt;&lt;span class=secno&gt;4.10.1 &lt;/span&gt;Introduction&lt;/a&gt;
@@ -4049,7 +4050,7 @@
      &lt;li&gt;&lt;dfn id=dom-element-id title=dom-Element-id&gt;&lt;code&gt;id&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/li&gt;
      &lt;li&gt;&lt;dfn id=textcontent&gt;&lt;code&gt;textContent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/li&gt;
 
-     &lt;li&gt;The &lt;dfn id=concept-node-insert title=concept-node-insert&gt;insert&lt;/dfn&gt;, &lt;dfn id=concept-node-append title=concept-node-append&gt;append&lt;/dfn&gt;, and &lt;dfn id=concept-node-replace title=concept-node-replace&gt;replace&lt;/dfn&gt; algorithms for nodes&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn id=concept-node-insert title=concept-node-insert&gt;insert&lt;/dfn&gt;, &lt;dfn id=concept-node-append title=concept-node-append&gt;append&lt;/dfn&gt;, &lt;dfn id=concept-node-remove title=concept-node-remove&gt;remove&lt;/dfn&gt;, and &lt;dfn id=concept-node-replace title=concept-node-replace&gt;replace&lt;/dfn&gt; algorithms for nodes&lt;/li&gt;
      &lt;li&gt;The &lt;dfn id=nodes-are-inserted&gt;nodes are inserted&lt;/dfn&gt; and &lt;dfn id=nodes-are-removed&gt;nodes are removed&lt;/dfn&gt; concepts&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn id=event&gt;&lt;code&gt;Event&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
@@ -6353,6 +6354,9 @@
 
   &lt;h5 id=durations&gt;&lt;span class=secno&gt;2.5.5.9 &lt;/span&gt;Durations&lt;/h5&gt;
 
+  &lt;!-- if you add support for year and month durations, then search for MONTHS throughout the spec
+  (not just this section) for things that have to change --&gt;
+
   &lt;p&gt;A &lt;dfn id=concept-duration title=concept-duration&gt;duration&lt;/dfn&gt; consists of &lt;!--MONTHS: either a number of
   months or--&gt; a number of seconds.&lt;/p&gt;
 
@@ -9662,6 +9666,7 @@
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onseeking title=handler-onseeking&gt;onseeking&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onselect title=handler-onselect&gt;onselect&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onshow title=handler-onshow&gt;onshow&lt;/a&gt;;
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsort title=handler-onsort&gt;onsort&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onstalled title=handler-onstalled&gt;onstalled&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsubmit title=handler-onsubmit&gt;onsubmit&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsuspend title=handler-onsuspend&gt;onsuspend&lt;/a&gt;;
@@ -10671,6 +10676,7 @@
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onseeking title=handler-onseeking&gt;onseeking&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onselect title=handler-onselect&gt;onselect&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onshow title=handler-onshow&gt;onshow&lt;/a&gt;;
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsort title=handler-onsort&gt;onsort&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onstalled title=handler-onstalled&gt;onstalled&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsubmit title=handler-onsubmit&gt;onsubmit&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsuspend title=handler-onsuspend&gt;onsuspend&lt;/a&gt;;
@@ -10803,6 +10809,7 @@
    &lt;li&gt;&lt;code title=handler-onseeking&gt;&lt;a href=#handler-onseeking&gt;onseeking&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onselect&gt;&lt;a href=#handler-onselect&gt;onselect&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onshow&gt;&lt;a href=#handler-onshow&gt;onshow&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;code title=handler-onsort&gt;&lt;a href=#handler-onsort&gt;onsort&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onstalled&gt;&lt;a href=#handler-onstalled&gt;onstalled&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onsubmit&gt;&lt;a href=#handler-onsubmit&gt;onsubmit&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=handler-onsuspend&gt;&lt;a href=#handler-onsuspend&gt;onsuspend&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
@@ -21252,12 +21259,11 @@
 
   &lt;div class=example&gt;
 
-   &lt;p&gt;Here, a short table has its numeric values encoded using
-   &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt; so that a script can provide a sorting mechanism
-   on each column, despite the numbers being presented in textual
-   form in one column and in a decomposed form in another.&lt;/p&gt;
+   &lt;p&gt;Here, a short table has its numeric values encoded using &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt; so that the
+   &lt;a href=#table-sorting-model&gt;table sorting model&lt;/a&gt; can provide a sorting mechanism on each column, despite the
+   numbers being presented in textual form in one column and in a decomposed form in another.&lt;/p&gt;
 
-   &lt;pre&gt;&lt;table class=&quot;sortable&quot;&gt; &lt;!-- class used by script to find tables to which to add sorting controls --&gt;
+   &lt;pre&gt;&lt;table sortable&gt;
  &lt;thead&gt; &lt;tr&gt; &lt;th&gt; Game &lt;th&gt; Corporations &lt;th&gt; Map Size
  &lt;tbody&gt;
   &lt;tr&gt; &lt;td&gt; 1830 &lt;td&gt; &lt;data value=&quot;8&quot;&gt;Eight&lt;/data&gt; &lt;td&gt; &lt;data value=&quot;93&quot;&gt;19+74 hexes (93 total)&lt;/data&gt;
@@ -21455,9 +21461,8 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The machine-readable equivalent of the element's contents must be
-  obtained from the element's &lt;a href=#datetime-value&gt;datetime value&lt;/a&gt; by using the
-  following algorithm:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=&quot;machine-readable-equivalent-of-the-element's-contents&quot;&gt;machine-readable equivalent of the element's contents&lt;/dfn&gt; must be obtained from the
+  element's &lt;a href=#datetime-value&gt;datetime value&lt;/a&gt; by using the following algorithm:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;a href=#parse-a-month-string title=&quot;parse a month string&quot;&gt;parsing a month
    string&lt;/a&gt; from the element's &lt;a href=#datetime-value&gt;datetime value&lt;/a&gt;
@@ -41443,6 +41448,7 @@
    total).&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-attributes title=element-dfn-attributes&gt;Content attributes&lt;/a&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
 &lt;pre class=idl&gt;interface &lt;dfn id=htmltableelement&gt;HTMLTableElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
@@ -41460,6 +41466,8 @@
   readonly attribute &lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt; &lt;a href=#dom-table-rows title=dom-table-rows&gt;rows&lt;/a&gt;;
   &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; &lt;a href=#dom-table-insertrow title=dom-table-insertRow&gt;insertRow&lt;/a&gt;(optional long index);
   void &lt;a href=#dom-table-deleterow title=dom-table-deleteRow&gt;deleteRow&lt;/a&gt;(long index);
+           attribute boolean &lt;a href=#dom-table-sortable title=dom-table-sortable&gt;sortable&lt;/a&gt;;
+  void &lt;a href=#dom-table-stopsorting title=dom-table-stopSorting&gt;stopSorting&lt;/a&gt;();
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; data with
@@ -41547,6 +41555,9 @@
 
   &lt;/div&gt;
 
+  &lt;hr&gt;&lt;p&gt;The &lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt; attribute is used in the &lt;a href=#table-sorting-model&gt;table
+  sorting model&lt;/a&gt;.&lt;/p&gt;
+
   &lt;hr&gt;&lt;!--TOPIC:DOM APIs--&gt;&lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;table&lt;/var&gt; . &lt;code title=dom-table-caption&gt;&lt;a href=#dom-table-caption&gt;caption&lt;/a&gt;&lt;/code&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dd&gt;
     &lt;p&gt;Returns the table's &lt;code&gt;&lt;a href=#the-caption-element&gt;caption&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
@@ -41795,7 +41806,13 @@
 
    &lt;li&gt;&lt;p&gt;Otherwise, the method must remove the &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;th element in the &lt;code title=dom-table-rows&gt;&lt;a href=#dom-table-rows&gt;rows&lt;/a&gt;&lt;/code&gt; collection from its parent.&lt;/p&gt;
 
-  &lt;/ol&gt;&lt;/div&gt;
+  &lt;/ol&gt;&lt;p&gt;The &lt;code title=dom-table-stopSorting&gt;&lt;a href=#dom-table-stopsorting&gt;stopSorting()&lt;/a&gt;&lt;/code&gt; method is used in the &lt;a href=#table-sorting-model&gt;table
+  sorting model&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The IDL attribute &lt;dfn id=dom-table-sortable title=dom-table-sortable&gt;&lt;code&gt;sortable&lt;/code&gt;&lt;/dfn&gt; must
+  &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
+
+  &lt;/div&gt;
 &lt;!--TOPIC:HTML--&gt;
 
   &lt;div class=example&gt;
@@ -42638,11 +42655,14 @@
    &lt;dd&gt;&lt;code title=attr-tdth-headers&gt;&lt;a href=#attr-tdth-headers&gt;headers&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-th-scope&gt;&lt;a href=#attr-th-scope&gt;scope&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-th-abbr&gt;&lt;a href=#attr-th-abbr&gt;abbr&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
     &lt;pre class=idl&gt;interface &lt;dfn id=htmltableheadercellelement&gt;HTMLTableHeaderCellElement&lt;/dfn&gt; : &lt;a href=#htmltablecellelement&gt;HTMLTableCellElement&lt;/a&gt; {
            attribute DOMString &lt;a href=#dom-th-scope title=dom-th-scope&gt;scope&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-th-abbr title=dom-th-abbr&gt;abbr&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-th-sorted title=dom-th-sorted&gt;sorted&lt;/a&gt;;
+  void &lt;a href=#dom-th-sort title=dom-th-sort&gt;sort&lt;/a&gt;();
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; a header &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; in a table.&lt;/p&gt;
@@ -42696,17 +42716,23 @@
   to a data cell). It is typically an abbreviated form of the full header cell, but can also be an
   expansion, or merely a different phrasing.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute is used in the &lt;a href=#table-sorting-model&gt;table
+  sorting model&lt;/a&gt;.&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element and its &lt;code title=attr-tdth-colspan&gt;&lt;a href=#attr-tdth-colspan&gt;colspan&lt;/a&gt;&lt;/code&gt;, &lt;code title=attr-tdth-rowspan&gt;&lt;a href=#attr-tdth-rowspan&gt;rowspan&lt;/a&gt;&lt;/code&gt;, &lt;code title=attr-tdth-headers&gt;&lt;a href=#attr-tdth-headers&gt;headers&lt;/a&gt;&lt;/code&gt;, and &lt;code title=attr-th-scope&gt;&lt;a href=#attr-th-scope&gt;scope&lt;/a&gt;&lt;/code&gt; attributes take part in the
   &lt;a href=#table-model&gt;table model&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code title=dom-th-sort&gt;&lt;a href=#dom-th-sort&gt;sort()&lt;/a&gt;&lt;/code&gt; method is used in the &lt;a href=#table-sorting-model&gt;table sorting
+  model&lt;/a&gt;.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-th-scope title=dom-th-scope&gt;&lt;code&gt;scope&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the content attribute of the
   same name, &lt;a href=#limited-to-only-known-values&gt;limited to only known values&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-th-abbr title=dom-th-abbr&gt;&lt;code&gt;abbr&lt;/code&gt;&lt;/dfn&gt; IDL attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt;
-  the content attribute of the same name.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-th-abbr title=dom-th-abbr&gt;&lt;code&gt;abbr&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=dom-th-sorted title=dom-th-sorted&gt;&lt;code&gt;sorted&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the
+  content attributes of the same name.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -42885,8 +42911,10 @@
   &lt;p&gt;It is possible, in certain error cases, for two cells to occupy
   the same slot.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;dfn id=concept-row title=concept-row&gt;row&lt;/dfn&gt; is a complete set of slots
-  from &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=0&lt;/span&gt; to &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;, for a particular value of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;. Rows correspond to &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+  &lt;p&gt;A &lt;dfn id=concept-row title=concept-row&gt;row&lt;/dfn&gt; is a complete set of slots from &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=0&lt;/span&gt; to &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;, for a particular value of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;. Rows usually
+  correspond to &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements, though a &lt;a href=#concept-row-group title=concept-row-group&gt;row group&lt;/a&gt;
+  can have some implied &lt;a href=#concept-row title=concept-row&gt;rows&lt;/a&gt; at the end in some cases involving
+  &lt;a href=#concept-cell title=concept-cell&gt;cells&lt;/a&gt; spanning multiple rows.&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-column title=concept-column&gt;column&lt;/dfn&gt; is a complete set of
   slots from &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;=0&lt;/span&gt; to &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;=&lt;var title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;, for a particular value of &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Columns can correspond to &lt;code&gt;&lt;a href=#the-col-element&gt;col&lt;/a&gt;&lt;/code&gt;
@@ -43858,8 +43886,656 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=examples-0&gt;&lt;span class=secno&gt;4.9.13 &lt;/span&gt;Examples&lt;/h4&gt;
+  &lt;h4 id=table-sorting-model&gt;&lt;span class=secno&gt;4.9.13 &lt;/span&gt;&lt;dfn&gt;Table sorting model&lt;/dfn&gt;&lt;/h4&gt;
 
+  &lt;p&gt;The &lt;dfn id=attr-table-sortable title=attr-table-sortable&gt;&lt;code&gt;sortable&lt;/code&gt;&lt;/dfn&gt; attribute on
+  &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; elements is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt;. When present, it indicates that
+  the user agent is to &lt;a href=#sortable-ui&gt;allow the user to sort&lt;/a&gt; the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;To make a column sortable in a &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; with a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, the column needs
+  to have &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element that does not &lt;a href=#attr-tdth-colspan title=attr-tdth-colspan&gt;span multiple
+  columns&lt;/a&gt; in a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt; above any rows that it is to sort.&lt;/p&gt;
+
+  &lt;p&gt;To make a column sortable in a &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; without a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, the column
+  needs to have &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element that does not &lt;a href=#attr-tdth-colspan title=attr-tdth-colspan&gt;span multiple
+  columns&lt;/a&gt; in the first &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element of the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;, where that
+  &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element is not in a &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the user selects a column by which to sort, the user agent sets the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt;
+  element's &lt;dfn id=attr-th-sorted title=attr-th-sorted&gt;&lt;code&gt;sorted&lt;/code&gt;&lt;/dfn&gt; attribute. This attribute can also
+  be set manually, to indicate that the table should be automatically sorted, even when scripts
+  modify the page on when the page is loaded.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute, if specified, must have a value that
+  is a &lt;a href=#set-of-space-separated-tokens&gt;set of space-separated tokens&lt;/a&gt; consisting of optionally a token whose value is an
+  &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;dfn id=attr-th-sorted-reversed title=attr-th-sorted-reversed&gt;&lt;code&gt;reversed&lt;/code&gt;&lt;/dfn&gt;&quot;, and optionally a token whose value
+  is a &lt;a href=#valid-non-negative-integer&gt;valid non-negative integer&lt;/a&gt; greater than zero, in either order.&lt;/p&gt;
+
+  &lt;p class=note&gt;In other words, ignoring spaces and case, the &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute's value can be empty, &quot;&lt;code title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;1&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;reversed 1&lt;/code&gt;&quot;, or
+  &quot;&lt;code title=&quot;&quot;&gt;1 reversed&lt;/code&gt;&quot;, where &quot;1&quot; is any number equal to or greater than 1.&lt;/p&gt;
+
+  &lt;p&gt;While one or more &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; elements in the table have a &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute, the user agent will keep the table's data rows
+  sorted. The value of the attribute controls how the column is used in determining the sort order.
+  The &lt;code title=attr-th-sorted-reversed&gt;&lt;a href=#attr-th-sorted-reversed&gt;reversed&lt;/a&gt;&lt;/code&gt; keyword means that the &lt;dfn id=column-sort-direction&gt;column sort
+  direction&lt;/dfn&gt; is &lt;i&gt;reversed&lt;/i&gt;, rather than &lt;i&gt;normal&lt;/i&gt;, which is the default if the keyword
+  is omitted. The number, if present, indicates the &lt;dfn id=column-key-ordinality&gt;column key ordinality&lt;/dfn&gt;; if the number
+  is omitted, the column is the primary key, as if the value 1 had been specified.&lt;/p&gt;
+
+  &lt;p class=note&gt;Thus, &lt;code title=&quot;&quot;&gt;sorted=&quot;1&quot;&lt;/code&gt; indicates the table's primary key, &lt;code title=&quot;&quot;&gt;sorted=&quot;2&quot;&lt;/code&gt; its secondary key, and so forth.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;A &lt;dfn id=sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; is a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element that matches
+  all the following conditions simultaneously:&lt;/p&gt;
+
+  &lt;ul&gt;&lt;li&gt;&lt;p&gt;It corresponds to a &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; whose &lt;i&gt;width&lt;/i&gt; is 1.
+   (Specifically, a &lt;i&gt;header cell&lt;/i&gt;, since this is a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element.)&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;There is no &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; that corresponds to another
+   &lt;a href=#sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; that covers slots in the same &lt;a href=#concept-column title=concept-column&gt;column&lt;/a&gt; but on a higher (earlier) &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt;.&lt;/li&gt; &lt;!-- only matters if there's a &lt;thead&gt; --&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; has
+    a &lt;a href=#concept-row-group title=concept-row-group&gt;row group&lt;/a&gt; corresponding to a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;
+    element, the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; is in a &lt;a href=#concept-row-group title=concept-row-group&gt;row
+    group&lt;/a&gt; that corresponds to the &lt;em&gt;first&lt;/em&gt; &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt; element of the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise: the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; is not in a &lt;a href=#concept-row-group title=concept-row-group&gt;row group&lt;/a&gt; corresponding to a &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt; element, and
+    the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; is in the first &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt;
+    of the &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p class=note&gt;In other words, each &lt;a href=#concept-column title=concept-column&gt;column&lt;/a&gt; can have one
+  &lt;a href=#sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt;; this will be the highest &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; in
+  a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt; that spans no other columns, or, if there is no &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, the
+  &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; in the first row (that is not in a &lt;code&gt;&lt;a href=#the-tfoot-element&gt;tfoot&lt;/a&gt;&lt;/code&gt;), assuming it spans no
+  columns.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=sorting-capable-th-elements-of-the-table-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; are the &lt;a href=#sorting-capable-th-element title=&quot;sorting-capable th element&quot;&gt;sorting-capable
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/a&gt; whose &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is a &lt;dfn id=sorting-capable-table-element&gt;sorting-capable
+  &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; if there are one or more &lt;a href=#sorting-capable-th-elements-of-the-table-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+  elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element is a &lt;dfn id=sorting-enabled-th-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; if it is a
+  &lt;a href=#sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; and it has a &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=sorting-enabled-th-elements-of-the-table-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; are the &lt;a href=#sorting-enabled-th-element title=&quot;sorting-enabled th element&quot;&gt;sorting-enabled
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/a&gt; whose &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is a &lt;dfn id=sorting-enabled-table-element&gt;sorting-enabled
+  &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; if there are one or more &lt;a href=#sorting-capable-th-elements-of-the-table-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+  elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;, and at least one of
+  them is a &lt;a href=#sorting-enabled-th-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; (i.e. at least one has a &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute).&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element is a &lt;dfn id=table-element-with-a-user-agent-exposed-sorting-interface&gt;&lt;code&gt;table&lt;/code&gt; element with a user-agent exposed
+  sorting interface&lt;/dfn&gt; if it is a &lt;a href=#sorting-capable-table-element&gt;sorting-capable &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; and has
+  a &lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element has a &lt;dfn id=currently-sorting-flag&gt;currently-sorting flag&lt;/dfn&gt;, which must initially
+  be false.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute must not be specified on
+  &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; elements that are not &lt;a href=#sorting-capable-th-element title=&quot;sorting-capable th element&quot;&gt;sorting-capable
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/a&gt;. The &lt;code title=attr-table-sortable&gt;&lt;a href=#attr-table-sortable&gt;sortable&lt;/a&gt;&lt;/code&gt; attribute
+  must not be specified on &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; elements that are not &lt;a href=#sorting-capable-table-element title=&quot;sorting-capable
+  table element&quot;&gt;sorting-capable &lt;code&gt;table&lt;/code&gt; elements&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;p&gt;To determine a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute's
+  &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; and &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt;, user agents must use
+  the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;i&gt;normal&lt;/i&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;have explicit direction&lt;/var&gt; be false.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt; be 1.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;have explicit ordinality&lt;/var&gt; be false.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tokens&lt;/var&gt; be the result of &lt;a href=#split-a-string-on-spaces title=&quot;split a string on
+   spaces&quot;&gt;splitting the attribute's value on spaces&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each token &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;tokens&lt;/var&gt;, run the appropriate
+    steps from the following list:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;have explicit direction&lt;/var&gt; is false and &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is an
+     &lt;a href=#ascii-case-insensitive&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=attr-th-sorted-reversed&gt;&lt;a href=#attr-th-sorted-reversed&gt;reversed&lt;/a&gt;&lt;/code&gt;&quot;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;i&gt;reversed&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;have explicit
+      direction&lt;/var&gt; be true.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;have explicit ordinality&lt;/var&gt; is false&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;a href=#rules-for-parsing-integers title=&quot;rules for parsing integers&quot;&gt;Parse &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; as an
+      integer&lt;/a&gt;. If this resulted in an error or the value zero, then ignore the token.
+      Otherwise, set &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt; to the parsed value, and set &lt;var title=&quot;&quot;&gt;have
+      explicit ordinality&lt;/var&gt; to true.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Ignore the token.&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;The &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; is the value of &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;, and
+   the &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt; is the value of &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;/div&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; must not have two &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; elements whose &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute have the same &lt;a href=#column-key-ordinality&gt;column key
+  ordinality&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;div class=impl&gt;
+
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=table-sorting-algorithm&gt;table sorting algorithm&lt;/dfn&gt;, which is applied to a &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;, is as
+  follows:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; be the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element being sorted.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;a href=#currently-sorting-flag&gt;currently-sorting flag&lt;/a&gt; is true, then abort
+   these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;a href=#currently-sorting-flag&gt;currently-sorting flag&lt;/a&gt; to true.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; named &lt;code title=event-sort&gt;sort&lt;/code&gt; that is
+   cancelable at &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the event fired in the previous step was canceled, then jump to the step labeled
+   &lt;i&gt;end&lt;/i&gt; below.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is not now a &lt;a href=#sorting-enabled-table-element&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt;
+    element&lt;/a&gt;, then jump to the step labeled &lt;i&gt;end&lt;/i&gt; below.&lt;/p&gt;
+
+    &lt;p class=note&gt;Even if &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; was a &lt;a href=#sorting-enabled-table-element&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt;
+    element&lt;/a&gt; when the algorithm was invoked, the DOM might have been entirely changed by the
+    event handlers for the &lt;code title=event-sort&gt;sort&lt;/code&gt; event, so this has to be verified at
+    this stage, not earlier.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt; be the &lt;a href=#sorting-enabled-th-elements-of-the-table-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt;
+   elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Sort &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt; in ascending order of the &lt;a href=#column-key-ordinality&gt;column key
+   ordinality&lt;/a&gt; of their &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attributes, with those
+   having the same &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt; being sorted in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; be a pointer to an element, initially pointing
+    at the first child of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is after &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s first
+    &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt;, if any, and that is either a &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; or a &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;
+    element, assuming there is one. If there is no such child, then jump to the step labeled
+    &lt;i&gt;end&lt;/i&gt; below.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; has no &lt;a href=#concept-row-group title=concept-row-group&gt;row group&lt;/a&gt;
+   corresponding to a &lt;code&gt;&lt;a href=#the-thead-element&gt;thead&lt;/a&gt;&lt;/code&gt; element, then set &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; to
+   true. Otherwise, set it to false.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Row loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt; be an empty list of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;
+   elements.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Run the appropriate steps from the following list:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; points to a &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;Collect&lt;/i&gt;: Append the element pointed to by &lt;var title=&quot;&quot;&gt;row collection
+       cursor&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If there are no &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; children of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that are later siblings of the element pointed to by &lt;var title=&quot;&quot;&gt;row
+       collection cursor&lt;/var&gt;, or if the next such child is a &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; element, then jump
+       to the step labeled &lt;i&gt;group&lt;/i&gt; below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; point to the next &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; child
+       of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is a later sibling of the element pointed to by &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Returned to the step labeled &lt;i&gt;collect&lt;/i&gt; above.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; points to a &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; element
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Place all the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element children of the element pointed to by &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; into &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;, in &lt;a href=#tree-order&gt;tree
+       order&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt; is empty, jump to the step labeled &lt;i&gt;increment loop&lt;/i&gt;
+       below.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Group&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; be an empty list of groups of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;
+   elements.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group&lt;/var&gt; be an empty group of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; be a pointer to an element, initially pointing at the
+   first &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element in &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Start group&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; be 1.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Group loop&lt;/i&gt;: Append the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element pointed to by &lt;var title=&quot;&quot;&gt;group
+   cursor&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-cell title=concept-cell&gt;cells&lt;/a&gt; whose highest &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt;'s element is the one pointed to by &lt;var title=&quot;&quot;&gt;group
+   cursor&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;tallest height&lt;/var&gt; be the number of rows covered by the
+   tallest such &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;tallest height&lt;/var&gt; is greater than &lt;var title=&quot;&quot;&gt;pending rows in
+   group&lt;/var&gt; then set &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;tallest
+   height&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Decrement &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; by one.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; point to the next &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element in &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;, if any; otherwise, let it be null.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; is not null and &lt;var title=&quot;&quot;&gt;pending rows in
+   group&lt;/var&gt; is not zero, return to the step labeled &lt;i&gt;group loop&lt;/i&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Append a new group to &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; consisting of the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;
+   elements in &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Empty &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; is not null, then return to the step labeled &lt;i&gt;start
+   group&lt;/i&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; is true, then drop the first roup in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; and set &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; to false.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Drop leading header groups&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; is now empty, jump to the
+   step labeled &lt;i&gt;increment loop&lt;/i&gt; below.&lt;/li&gt;
+
+   &lt;!-- if you insert steps here, update the next step --&gt;
+
+   &lt;li&gt;&lt;p&gt;If the first group of &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; consists of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements
+   whose element children are all &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; elements, then drop the first group in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; and return to the previous step (labeled &lt;i&gt;drop leading header
+   groups&lt;/i&gt;).&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; be a placeholder in a DOM tree, which can be used
+   to reinsert nodes at a specific point in the DOM. Insert &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; into
+   the parent of the first &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element of the first group in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;,
+   immediately before that &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; element.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Sort the groups in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, using the following algorithm to decide the
+    relative order of any two groups &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; (the algorithm
+    either returns that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, or that &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;):&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt; be an index into &lt;var title=&quot;&quot;&gt;key heading
+     cells&lt;/var&gt;, initially denoting the first element in the list.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be a sort direction, initially &lt;i&gt;ascending&lt;/i&gt;. Its
+     other possible value is &lt;i&gt;descending&lt;/i&gt;. When &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;i&gt;toggled&lt;/i&gt;, that means that if its value is &lt;i&gt;ascending&lt;/i&gt;, it must be changed to
+     &lt;i&gt;descending&lt;/i&gt;, and when its value is &lt;i&gt;descending&lt;/i&gt;, it must be changed to
+     &lt;i&gt;ascending&lt;/i&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Column loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;th&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt;th
+     &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; in &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute's
+     &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; is &lt;i&gt;reversed&lt;/i&gt;, then toggle &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be the result of &lt;a href=#comparing-two-row-groups-using-the-th-element&gt;comparing two row groups
+     using the &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;, with &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and
+     &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; as the rows.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; is not &quot;equal&quot;, then jump to the step labeled
+     &lt;i&gt;return&lt;/i&gt; below.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt; still denotes a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element in &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt;, then jump back to the step above labeled &lt;i&gt;column
+     loop&lt;/i&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;'s &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements precede &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;'s in
+     &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be &quot;a before b&quot;.
+     Otherwise, let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be &quot;b before a&quot;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Return&lt;/i&gt;: Return the relative order given by the matching option from the following
+     list:&lt;/p&gt;
+
+      &lt;dl class=switch&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;ascending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;a before b&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;ascending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;b before a&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;descending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;a before b&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;descending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;b before a&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.&lt;/dd&gt;
+
+      &lt;/dl&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;p&gt;When the user agent is required to &lt;dfn id=comparing-two-row-groups-using-the-th-element title=&quot;comparing two row groups using the th
+    element&quot;&gt;compare two row groups using the &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;,
+    with &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; being the two row groups respectively, the
+    user agent must run the following steps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the slots that
+     &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; covers in its &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; be the element corresponding to the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; in the first &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt; of group
+      &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; that covers the slot in that &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt; whose
+      &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate is &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; be the element corresponding to the &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; in the first &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt; of group
+      &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; that covers the slot in that &lt;a href=#concept-row title=concept-row&gt;row&lt;/a&gt; whose
+      &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate is &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;!-- there can't be two cells that cover the slot, unusually, because the only way that can
+      happen is if there's a cell that's extended into this row from above, and the groups, by
+      virtue of the way they are created above, never have cells that extend into them from above.
+      --&gt;
+
+      &lt;p&gt;In either case, if there's no &lt;a href=#concept-cell title=concept-cell&gt;cell&lt;/a&gt; that actually covers
+      the slot, then use the value &lt;i&gt;null&lt;/i&gt; instead.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; be
+      the &lt;a href=#type-and-value-of-the-cell&gt;type and value of the cell&lt;/a&gt; &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt;, as defined
+      below.&lt;/p&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; be
+      the &lt;a href=#type-and-value-of-the-cell&gt;type and value of the cell&lt;/a&gt; &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, as defined
+      below.&lt;/p&gt;
+
+      &lt;p&gt;The &lt;dfn id=type-and-value-of-the-cell&gt;type and value of the cell&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; are computed as follows.&lt;/p&gt;
+
+      &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; is &lt;i&gt;null&lt;/i&gt;, then the type is &quot;string&quot; and the value is
+       the empty string; abort these steps.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If, ignoring &lt;a href=#inter-element-whitespace&gt;inter-element whitespace&lt;/a&gt; and &lt;a href=#comment-0&gt;Comment&lt;/a&gt; nodes,
+       &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; has only one child and that child is a &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt; element,
+       then the value is the value of that &lt;code&gt;&lt;a href=#the-data-element&gt;data&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-data-value&gt;&lt;a href=#attr-data-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute, if there is one, or the empty string
+       otherwise; the type is &quot;string&quot;.&lt;/p&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;If, ignoring &lt;a href=#inter-element-whitespace&gt;inter-element whitespace&lt;/a&gt; and &lt;a href=#comment-0&gt;Comment&lt;/a&gt; nodes, &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; has only one child and that child is a &lt;code&gt;&lt;a href=#the-time-element&gt;time&lt;/a&gt;&lt;/code&gt; element, then
+        the value is the &lt;a href=&quot;#machine-readable-equivalent-of-the-element's-contents&quot;&gt;machine-readable equivalent of the element's contents&lt;/a&gt;, if any,
+        and the type is the kind of value that is thus obtained
+       (a &lt;a href=#concept-month title=concept-month&gt;month&lt;/a&gt;,
+        a &lt;a href=#concept-date title=concept-date&gt;date&lt;/a&gt;,
+        a &lt;a href=#concept-yearless-date title=concept-yearless-date&gt;yearless date&lt;/a&gt;,
+        a &lt;a href=#concept-time title=concept-time&gt;time&lt;/a&gt;,
+        a &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt;,
+        a &lt;a href=#concept-timezone title=concept-timezone&gt;time-zone offset&lt;/a&gt;,
+        a &lt;a href=#concept-datetime title=concept-datetime&gt;global date and time&lt;/a&gt;,
+        a &lt;a href=#concept-week title=concept-week&gt;week&lt;/a&gt;,
+        a year, or
+        a &lt;a href=#concept-duration title=concept-duration&gt;duration&lt;/a&gt;);
+        abort these steps after completing this one.&lt;/p&gt;
+
+        &lt;p&gt;If there is no machine-readable equivalent, then the type is &quot;string&quot; and the value is
+        the empty string.&lt;/p&gt;
+
+        &lt;p&gt;If the type is
+        a &lt;a href=#concept-month title=concept-month&gt;month&lt;/a&gt;,
+        a &lt;a href=#concept-date title=concept-date&gt;date&lt;/a&gt;,
+        a &lt;a href=#concept-week title=concept-week&gt;week&lt;/a&gt;, or
+        a year,
+        then change the value to be the instant in time (with no time zone) that describes the
+        earliest moment that the value represents, and change the type to be
+        a &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt;.&lt;/p&gt;
+
+        &lt;p class=example&gt;For example, if the cell was
+        &lt;code&gt;&lt;td&gt;&lt;time&gt;2011-11&lt;/time&gt;&lt;/code&gt; then for sorting purposes the value is
+        interpreted as &quot;2011-11-01T00:00:00.000&quot; and the type is treated as a &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt; rather than a &lt;a href=#concept-month title=concept-month&gt;month&lt;/a&gt;.&lt;/p&gt;
+
+        &lt;p class=example&gt;Similarly, if the cell was &lt;code&gt;&lt;td&gt;&lt;time
+        datetime=&quot;2011&quot;&gt;MMXIV&lt;/time&gt;&lt;/code&gt; then for sorting purposes the value is interpreted as
+        &quot;2014-01-01T00:00:00.000&quot; and the type is treated as a &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt; rather than a year.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;The value is the element's &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt;. The type is &quot;string&quot;.&lt;/li&gt;
+
+      &lt;/ol&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are not
+      equal, then: return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier in the
+      following list than &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, otherwise, return &quot;b before a&quot;;
+      then, abort these steps.&lt;/p&gt;
+
+      &lt;ol class=brief&gt;&lt;li&gt;&lt;a href=#concept-time title=concept-time&gt;time&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-yearless-date title=concept-yearless-date&gt;yearless date&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-datetime title=concept-datetime&gt;global date and time&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-timezone title=concept-timezone&gt;time-zone offset&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#concept-duration title=concept-duration&gt;duration&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&quot;string&quot;&lt;/li&gt;
+      &lt;/ol&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are
+     equal, then return &quot;equal&quot; and abort these steps.&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are not
+      &quot;string&quot;, then: return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier
+      than &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, and return &quot;b before a&quot; otherwise.&lt;/p&gt;
+
+      &lt;p&gt;Values sort in their natural order, with the following additional constraints:&lt;/p&gt;
+
+      &lt;p&gt;For &lt;a href=#concept-time title=concept-time&gt;time&lt;/a&gt; values, 00:00:00.000 is the earliest value and
+      23:59:59.999 is the latest value.&lt;/p&gt;
+
+      &lt;p&gt;For &lt;a href=#concept-yearless-date title=concept-yearless-date&gt;yearless date&lt;/a&gt; values, 01-01 is the earliest
+      value and 12-31 is the latest value; 02-28 is earlier than 02-29 which is earlier than
+      03-01.&lt;/p&gt;
+
+      &lt;p&gt;Values that are &lt;a href=#concept-datetime-local title=concept-datetime-local&gt;local date and time&lt;/a&gt; compare as
+      if they were in the same time zone.&lt;/p&gt;
+
+      &lt;!-- no ambiguity for &lt;span title=&quot;concept-datetime&quot;&gt;global date and time&lt;/span&gt; --&gt;
+
+      &lt;p&gt;For &lt;a href=#concept-timezone title=concept-timezone&gt;time-zone offset&lt;/a&gt; values, -23:59 is the earliest
+      value and +23:59 is the latest value.&lt;/p&gt;
+
+      &lt;!-- MONTHS: &lt;span title=&quot;concept-duration&quot;&gt;duration&lt;/span&gt; is unambiguous until we add months --&gt;
+
+     &lt;/li&gt;
+
+     &lt;!-- At this point we know that they are both strings and they're not equal. --&gt;
+
+     &lt;li&gt;
+
+      &lt;p class=XXX&gt;Return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier than
+      &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, and return &quot;b before a&quot; otherwise; for these purposes,
+      the strings must be compared using collation order of the &lt;a href=#language&gt;language&lt;/a&gt; of the
+      &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element to which &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; corresponds.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt; be a list of &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements consisting of the
+   &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements of all the groups in the newly ordered &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, with
+   the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements being in the same order as the groups to which they belong are in
+   &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, and the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements within each such group themselves
+   being ordered in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#concept-node-remove title=concept-node-remove&gt;Remove&lt;/a&gt; all the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements in &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt; from their parents.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#concept-node-insert title=concept-node-insert&gt;Insert&lt;/a&gt; all the &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; elements in &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt; into the DOM at the location of &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt;, in
+   the order these elements are found in &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;!-- done with this set of rows --&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; from the DOM.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Increment loop&lt;/i&gt;: If there are no &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; children of
+   &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that are later siblings of the element pointed to by &lt;var title=&quot;&quot;&gt;row
+   collection cursor&lt;/var&gt;, then jump to the step labeled &lt;i&gt;end&lt;/i&gt; below.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; point to the next &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; or
+   &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; child of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is a later sibling of the element
+   pointed to by &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;i&gt;row loop&lt;/i&gt; above.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;End&lt;/i&gt;: Set &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;a href=#currently-sorting-flag&gt;currently-sorting flag&lt;/a&gt; to
+   false.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When any of the descendants of a &lt;a href=#sorting-enabled-table-element&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; change
+  in any way (including attributes changing), and when a &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element becomes a
+  &lt;a href=#sorting-enabled-table-element&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt;, the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element is said to
+  become &lt;dfn id=a-table-with-a-pending-sort&gt;a table with a pending sort&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the user agent is to &lt;dfn id=sort-the-tables-with-pending-sorts&gt;sort the tables with pending sorts&lt;/dfn&gt;, which happens during
+  the &lt;a href=#perform-a-microtask-checkpoint&gt;perform a microtask checkpoint&lt;/a&gt; algorithm, the user agent must run the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tables&lt;/var&gt; be a list of each &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; in the &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of
+   related similar-origin browsing contexts&lt;/a&gt; that is &lt;a href=#a-table-with-a-pending-sort&gt;a table with a pending sort&lt;/a&gt;,
+   in the order that they became such, with those that become such at the same time being listed in
+   &lt;a href=#tree-order&gt;tree order&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let all the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; elements in &lt;var title=&quot;&quot;&gt;tables&lt;/var&gt; no longer be &lt;a href=#a-table-with-a-pending-sort title=&quot;a table with a pending sort&quot;&gt;tables with a pending sort&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Apply the &lt;a href=#table-sorting-algorithm&gt;table sorting algorithm&lt;/a&gt; to each &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; in &lt;var title=&quot;&quot;&gt;tables&lt;/var&gt;, in order.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the user agent is to &lt;dfn id=set-the-sort-key&gt;set the sort key&lt;/dfn&gt; to a &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, it must run the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; be the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; of the &lt;a href=#concept-table title=concept-table&gt;table&lt;/a&gt; of which &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; is a header cell.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; is a &lt;a href=#sorting-enabled-th-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt; whose
+   &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt; is 1, then: if its &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; is
+   &lt;i&gt;normal&lt;/i&gt;, set that element's &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute to the
+   string &quot;&lt;code title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, otherwise, set it to the empty string; then, abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current headers&lt;/var&gt; be the &lt;a href=#sorting-enabled-th-elements-of-the-table-element&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt;
+   elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;, excluding &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Sort &lt;var title=&quot;&quot;&gt;current headers&lt;/var&gt; by their &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attributes' &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt;, in ascending
+   order, with elements that have the same &lt;a href=#column-key-ordinality&gt;column key ordinality&lt;/a&gt; being sorted in
+   &lt;a href=#tree-order&gt;tree order&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;level&lt;/var&gt; be 2.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;th&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;current
+    headers&lt;/var&gt;, in order, run the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute's
+     &lt;a href=#column-sort-direction&gt;column sort direction&lt;/a&gt; is &lt;i&gt;normal&lt;/i&gt;, then set &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute to a &lt;a href=#valid-integer&gt;valid integer&lt;/a&gt; whose value is
+     &lt;var title=&quot;&quot;&gt;level&lt;/var&gt;. Otherwise, set it to the concatenation of the string &quot;&lt;code title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, a U+0020 SPACE character, and a &lt;a href=#valid-integer&gt;valid integer&lt;/a&gt; whose
+     value is &lt;var title=&quot;&quot;&gt;level&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;level&lt;/var&gt; by 1.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute to
+   the empty string.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; of the &lt;a href=#sorting-capable-th-elements-of-the-table-element title=&quot;sorting-capable th elements of the
+  table element&quot;&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of&lt;/a&gt; all &lt;a href=#table-element-with-a-user-agent-exposed-sorting-interface title=&quot;table element
+  with a user-agent exposed sorting interface&quot;&gt;&lt;code&gt;table&lt;/code&gt; elements with a user-agent exposed
+  sorting interface&lt;/a&gt; is to &lt;a href=#set-the-sort-key&gt;set the sort key&lt;/a&gt; to the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+
+  &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; will be sorted the next time the user agent &lt;a href=#perform-a-microtask-checkpoint title=&quot;perform a microtask checkpoint&quot;&gt;performs a microtask checkpoint&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;th&lt;/var&gt; . &lt;code title=dom-th-sort&gt;&lt;a href=#dom-th-sort&gt;sort&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Act as if the user had indicated that this was to be the new primary sort column.&lt;/p&gt;
+
+    &lt;p&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; won't actually be sorted until the script terminates.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;table&lt;/var&gt; . &lt;code title=dom-table-stopSorting&gt;&lt;a href=#dom-table-stopsorting&gt;stopSorting&lt;/a&gt;&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Removes all the &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attributes that are causing the
+    table to automatically sort its contents, if any.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element's &lt;dfn id=dom-th-sort title=dom-th-sort&gt;&lt;code&gt;sort()&lt;/code&gt;&lt;/dfn&gt; method, when
+  invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element is not a &lt;a href=#sorting-capable-th-element&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+   element&lt;/a&gt;, then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;a href=#set-the-sort-key&gt;Set the sort key&lt;/a&gt; to the &lt;code&gt;&lt;a href=#the-th-element&gt;th&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+
+    &lt;p class=note&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; will be sorted the next time the user agent &lt;a href=#perform-a-microtask-checkpoint title=&quot;perform a microtask checkpoint&quot;&gt;performs a microtask checkpoint&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element's &lt;dfn id=dom-table-stopsorting title=dom-table-stopSorting&gt;&lt;code&gt;stopSorting()&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must remove
+  the &lt;code title=attr-th-sorted&gt;&lt;a href=#attr-th-sorted&gt;sorted&lt;/a&gt;&lt;/code&gt; attribute of all the &lt;a href=#sorting-enabled-th-elements-of-the-table-element&gt;sorting-enabled
+  &lt;code&gt;th&lt;/code&gt; elements of the table element&lt;/a&gt; on which the method was invoked.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h4 id=examples-0&gt;&lt;span class=secno&gt;4.9.14 &lt;/span&gt;Examples&lt;/h4&gt;
+
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;The following shows how might one mark up the bottom part of
@@ -66243,6 +66919,7 @@
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onseeking title=handler-onseeking&gt;onseeking&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onselect title=handler-onselect&gt;onselect&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onshow title=handler-onshow&gt;onshow&lt;/a&gt;;
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsort title=handler-onsort&gt;onsort&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onstalled title=handler-onstalled&gt;onstalled&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-window-onstorage title=handler-window-onstorage&gt;onstorage&lt;/a&gt;;
            attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-onsubmit title=handler-onsubmit&gt;onsubmit&lt;/a&gt;;
@@ -72904,7 +73581,8 @@
   &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must continually run through the
   following steps for as long as it exists:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Run the oldest &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; on one of the &lt;a href=#event-loop&gt;event
+  &lt;ol&gt;&lt;!-- if you add a step here, make sure to go through the spec updating references to the &quot;first
+   step&quot; of the event loop --&gt;&lt;li&gt;&lt;p&gt;Run the oldest &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; on one of the &lt;a href=#event-loop&gt;event
    loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;, if any, ignoring tasks whose
    associated &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;. The user agent may pick any
    &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
@@ -72915,7 +73593,8 @@
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#storage-mutex&gt;storage mutex&lt;/a&gt; is now owned by the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;, release it
    so that it is once again free.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Remove that task from its &lt;a href=#task-queue&gt;task queue&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If a task was run in the first step above, remove that task from its &lt;a href=#task-queue&gt;task
+   queue&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#perform-a-microtask-checkpoint&gt;Perform a microtask checkpoint&lt;/a&gt;.&lt;/li&gt;
 
@@ -72935,6 +73614,8 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the &lt;a href=#running-mutation-observers&gt;running mutation observers&lt;/a&gt; flag be
    true.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;a href=#sort-the-tables-with-pending-sorts&gt;Sort the tables with pending sorts&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;
 
     &lt;p&gt;&lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;Invoke
@@ -73602,6 +74283,7 @@
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onseeking title=handler-onseeking&gt;&lt;code&gt;onseeking&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-media-seeking&gt;&lt;a href=#event-media-seeking&gt;seeking&lt;/a&gt;&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onselect title=handler-onselect&gt;&lt;code&gt;onselect&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-select&gt;select&lt;/code&gt; &lt;!-- widely used --&gt; &lt;!-- [CSSOM] --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onshow title=handler-onshow&gt;&lt;code&gt;onshow&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-show&gt;show&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onsort title=handler-onsort&gt;&lt;code&gt;onsort&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-sort&gt;sort&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onstalled title=handler-onstalled&gt;&lt;code&gt;onstalled&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-media-stalled&gt;&lt;a href=#event-media-stalled&gt;stalled&lt;/a&gt;&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onsubmit title=handler-onsubmit&gt;&lt;code&gt;onsubmit&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-submit&gt;submit&lt;/code&gt; &lt;!-- widely used --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onsuspend title=handler-onsuspend&gt;&lt;code&gt;onsuspend&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-media-suspend&gt;&lt;a href=#event-media-suspend&gt;suspend&lt;/a&gt;&lt;/code&gt;
@@ -96520,7 +97202,13 @@
   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1793">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1793</A> --&gt;
   &lt;!-- note that the &quot;rules for parsing dimension values&quot; can't return 0, if the value is &quot;0&quot; they treat it as an error --&gt;
 
+  &lt;hr&gt;&lt;p id=sortable-ui&gt;User agents are expected to render &lt;a href=#sorting-capable-th-elements-of-the-table-element title=&quot;sorting-capable th elements of
+  the table element&quot;&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of&lt;/a&gt; all &lt;a href=#table-element-with-a-user-agent-exposed-sorting-interface title=&quot;table
+  element with a user-agent exposed sorting interface&quot;&gt;&lt;code&gt;table&lt;/code&gt; elements with a user-agent
+  exposed sorting interface&lt;/a&gt; in such a manner as to indicate that activating the elements will
+  cause the table to be sorted.&lt;/p&gt;
 
+
   &lt;h4 id=form-controls&gt;&lt;span class=secno&gt;14.3.10 &lt;/span&gt;Form controls&lt;/h4&gt;
 
   &lt;pre class=css&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
@@ -102952,6 +103640,11 @@
      &lt;td&gt; &lt;code title=event-show&gt;show&lt;/code&gt; event handler
      &lt;td&gt; &lt;a href=#event-handler-content-attributes title=&quot;event handler content attributes&quot;&gt;Event handler content attribute&lt;/a&gt;
 
+    &lt;tr&gt;&lt;th id=ix-handler-onsort&gt; &lt;code title=&quot;&quot;&gt;onsort&lt;/code&gt;
+     &lt;td&gt; &lt;a href=#handler-onsort title=handler-onsort&gt;HTML elements&lt;/a&gt;
+     &lt;td&gt; &lt;code title=event-sort&gt;sort&lt;/code&gt; event handler
+     &lt;td&gt; &lt;a href=#event-handler-content-attributes title=&quot;event handler content attributes&quot;&gt;Event handler content attribute&lt;/a&gt;
+
     &lt;tr&gt;&lt;th id=ix-handler-onstalled&gt; &lt;code title=&quot;&quot;&gt;onstalled&lt;/code&gt;
      &lt;td&gt; &lt;a href=#handler-onstalled title=handler-onstalled&gt;HTML elements&lt;/a&gt;
      &lt;td&gt; &lt;code title=event-media-stalled&gt;&lt;a href=#event-media-stalled&gt;stalled&lt;/a&gt;&lt;/code&gt; event handler

Modified: source
===================================================================
--- source	2012-12-19 20:11:40 UTC (rev 7596)
+++ source	2012-12-26 23:58:23 UTC (rev 7597)
@@ -2936,7 +2936,7 @@
      &lt;li&gt;&lt;dfn title=&quot;dom-Element-id&quot;&gt;&lt;code&gt;id&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/li&gt;
      &lt;li&gt;&lt;dfn&gt;&lt;code&gt;textContent&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/li&gt;
 
-     &lt;li&gt;The &lt;dfn title=&quot;concept-node-insert&quot;&gt;insert&lt;/dfn&gt;, &lt;dfn title=&quot;concept-node-append&quot;&gt;append&lt;/dfn&gt;, and &lt;dfn title=&quot;concept-node-replace&quot;&gt;replace&lt;/dfn&gt; algorithms for nodes&lt;/li&gt;
+     &lt;li&gt;The &lt;dfn title=&quot;concept-node-insert&quot;&gt;insert&lt;/dfn&gt;, &lt;dfn title=&quot;concept-node-append&quot;&gt;append&lt;/dfn&gt;, &lt;dfn title=&quot;concept-node-remove&quot;&gt;remove&lt;/dfn&gt;, and &lt;dfn title=&quot;concept-node-replace&quot;&gt;replace&lt;/dfn&gt; algorithms for nodes&lt;/li&gt;
      &lt;li&gt;The &lt;dfn&gt;nodes are inserted&lt;/dfn&gt; and &lt;dfn&gt;nodes are removed&lt;/dfn&gt; concepts&lt;/li&gt;
 
      &lt;li&gt;&lt;dfn&gt;&lt;code&gt;Event&lt;/code&gt;&lt;/dfn&gt; interface&lt;/li&gt;
@@ -5740,6 +5740,9 @@
 
   &lt;h5&gt;Durations&lt;/h5&gt;
 
+  &lt;!-- if you add support for year and month durations, then search for MONTHS throughout the spec
+  (not just this section) for things that have to change --&gt;
+
   &lt;p&gt;A &lt;dfn title=&quot;concept-duration&quot;&gt;duration&lt;/dfn&gt; consists of &lt;!--MONTHS: either a number of
   months or--&gt; a number of seconds.&lt;/p&gt;
 
@@ -9593,6 +9596,7 @@
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onseeking&quot;&gt;onseeking&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onselect&quot;&gt;onselect&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onshow&quot;&gt;onshow&lt;/span&gt;;
+           attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onsort&quot;&gt;onsort&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onstalled&quot;&gt;onstalled&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onsubmit&quot;&gt;onsubmit&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onsuspend&quot;&gt;onsuspend&lt;/span&gt;;
@@ -10773,6 +10777,7 @@
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onseeking&quot;&gt;onseeking&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onselect&quot;&gt;onselect&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onshow&quot;&gt;onshow&lt;/span&gt;;
+           attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onsort&quot;&gt;onsort&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onstalled&quot;&gt;onstalled&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onsubmit&quot;&gt;onsubmit&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onsuspend&quot;&gt;onsuspend&lt;/span&gt;;
@@ -10915,6 +10920,7 @@
    &lt;li&gt;&lt;code title=&quot;handler-onseeking&quot;&gt;onseeking&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=&quot;handler-onselect&quot;&gt;onselect&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=&quot;handler-onshow&quot;&gt;onshow&lt;/code&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;code title=&quot;handler-onsort&quot;&gt;onsort&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=&quot;handler-onstalled&quot;&gt;onstalled&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=&quot;handler-onsubmit&quot;&gt;onsubmit&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;code title=&quot;handler-onsuspend&quot;&gt;onsuspend&lt;/code&gt;&lt;/li&gt;
@@ -22517,12 +22523,11 @@
 
   &lt;div class=&quot;example&quot;&gt;
 
-   &lt;p&gt;Here, a short table has its numeric values encoded using
-   &lt;code&gt;data&lt;/code&gt; so that a script can provide a sorting mechanism
-   on each column, despite the numbers being presented in textual
-   form in one column and in a decomposed form in another.&lt;/p&gt;
+   &lt;p&gt;Here, a short table has its numeric values encoded using &lt;code&gt;data&lt;/code&gt; so that the
+   &lt;span&gt;table sorting model&lt;/span&gt; can provide a sorting mechanism on each column, despite the
+   numbers being presented in textual form in one column and in a decomposed form in another.&lt;/p&gt;
 
-   &lt;pre&gt;&lt;table class=&quot;sortable&quot;&gt; &lt;!-- class used by script to find tables to which to add sorting controls --&gt;
+   &lt;pre&gt;&lt;table sortable&gt;
  &lt;thead&gt; &lt;tr&gt; &lt;th&gt; Game &lt;th&gt; Corporations &lt;th&gt; Map Size
  &lt;tbody&gt;
   &lt;tr&gt; &lt;td&gt; 1830 &lt;td&gt; &lt;data value=&quot;8&quot;&gt;Eight&lt;/data&gt; &lt;td&gt; &lt;data value=&quot;93&quot;&gt;19+74 hexes (93 total)&lt;/data&gt;
@@ -22729,9 +22734,8 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The machine-readable equivalent of the element's contents must be
-  obtained from the element's &lt;span&gt;datetime value&lt;/span&gt; by using the
-  following algorithm:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn&gt;machine-readable equivalent of the element's contents&lt;/dfn&gt; must be obtained from the
+  element's &lt;span&gt;datetime value&lt;/span&gt; by using the following algorithm:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -48469,6 +48473,7 @@
    total).&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-attributes&quot;&gt;Content attributes&lt;/span&gt;:&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Global attributes&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-table-sortable&quot;&gt;sortable&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-dom&quot;&gt;DOM interface&lt;/span&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
 &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLTableElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
@@ -48486,6 +48491,8 @@
   readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-table-rows&quot;&gt;rows&lt;/span&gt;;
   &lt;span&gt;HTMLElement&lt;/span&gt; &lt;span title=&quot;dom-table-insertRow&quot;&gt;insertRow&lt;/span&gt;(optional long index);
   void &lt;span title=&quot;dom-table-deleteRow&quot;&gt;deleteRow&lt;/span&gt;(long index);
+           attribute boolean &lt;span title=&quot;dom-table-sortable&quot;&gt;sortable&lt;/span&gt;;
+  void &lt;span title=&quot;dom-table-stopSorting&quot;&gt;stopSorting&lt;/span&gt;();
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;
@@ -48599,6 +48606,11 @@
 
   &lt;hr&gt;
 
+  &lt;p&gt;The &lt;code title=&quot;attr-table-sortable&quot;&gt;sortable&lt;/code&gt; attribute is used in the &lt;span&gt;table
+  sorting model&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;hr&gt;
+
 &lt;!--TOPIC:DOM APIs--&gt;
   &lt;dl class=&quot;domintro&quot;&gt;
 
@@ -48875,6 +48887,12 @@
 
   &lt;/ol&gt;
 
+  &lt;p&gt;The &lt;code title=&quot;dom-table-stopSorting&quot;&gt;stopSorting()&lt;/code&gt; method is used in the &lt;span&gt;table
+  sorting model&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The IDL attribute &lt;dfn title=&quot;dom-table-sortable&quot;&gt;&lt;code&gt;sortable&lt;/code&gt;&lt;/dfn&gt; must
+  &lt;span&gt;reflect&lt;/span&gt; the &lt;code title=&quot;attr-table-sortable&quot;&gt;sortable&lt;/code&gt; content attribute.&lt;/p&gt;
+
   &lt;/div&gt;
 &lt;!--TOPIC:HTML--&gt;
 
@@ -49811,11 +49829,14 @@
    &lt;dd&gt;&lt;code title=&quot;attr-tdth-headers&quot;&gt;headers&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-th-scope&quot;&gt;scope&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-th-abbr&quot;&gt;abbr&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;span title=&quot;element-dfn-dom&quot;&gt;DOM interface&lt;/span&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;
     &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLTableHeaderCellElement&lt;/dfn&gt; : &lt;span&gt;HTMLTableCellElement&lt;/span&gt; {
            attribute DOMString &lt;span title=&quot;dom-th-scope&quot;&gt;scope&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-th-abbr&quot;&gt;abbr&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-th-sorted&quot;&gt;sorted&lt;/span&gt;;
+  void &lt;span title=&quot;dom-th-sort&quot;&gt;sort&lt;/span&gt;();
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;
@@ -49881,6 +49902,9 @@
   to a data cell). It is typically an abbreviated form of the full header cell, but can also be an
   expansion, or merely a different phrasing.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute is used in the &lt;span&gt;table
+  sorting model&lt;/span&gt;.&lt;/p&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
   &lt;p&gt;The &lt;code&gt;th&lt;/code&gt; element and its &lt;code
@@ -49890,12 +49914,16 @@
   title=&quot;attr-th-scope&quot;&gt;scope&lt;/code&gt; attributes take part in the
   &lt;span&gt;table model&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code title=&quot;dom-th-sort&quot;&gt;sort()&lt;/code&gt; method is used in the &lt;span&gt;table sorting
+  model&lt;/span&gt;.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-th-scope&quot;&gt;&lt;code&gt;scope&lt;/code&gt;&lt;/dfn&gt; IDL
   attribute must &lt;span&gt;reflect&lt;/span&gt; the content attribute of the
   same name, &lt;span&gt;limited to only known values&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-th-abbr&quot;&gt;&lt;code&gt;abbr&lt;/code&gt;&lt;/dfn&gt; IDL attribute must &lt;span&gt;reflect&lt;/span&gt;
-  the content attribute of the same name.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-th-abbr&quot;&gt;&lt;code&gt;abbr&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn
+  title=&quot;dom-th-sorted&quot;&gt;&lt;code&gt;sorted&lt;/code&gt;&lt;/dfn&gt; IDL attributes must &lt;span&gt;reflect&lt;/span&gt; the
+  content attributes of the same name.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -50119,11 +50147,12 @@
   &lt;p&gt;It is possible, in certain error cases, for two cells to occupy
   the same slot.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;dfn title=&quot;concept-row&quot;&gt;row&lt;/dfn&gt; is a complete set of slots
-  from &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=0&lt;/span&gt; to &lt;span title=&quot;&quot;&gt;&lt;var
-  title=&quot;&quot;&gt;x&lt;/var&gt;=&lt;var title=&quot;&quot;&gt;x&lt;sub
-  title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;, for a particular value of &lt;var
-  title=&quot;&quot;&gt;y&lt;/var&gt;. Rows correspond to &lt;code&gt;tr&lt;/code&gt; elements.&lt;/p&gt;
+  &lt;p&gt;A &lt;dfn title=&quot;concept-row&quot;&gt;row&lt;/dfn&gt; is a complete set of slots from &lt;span title=&quot;&quot;&gt;&lt;var
+  title=&quot;&quot;&gt;x&lt;/var&gt;=0&lt;/span&gt; to &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;=&lt;var title=&quot;&quot;&gt;x&lt;sub
+  title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;, for a particular value of &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;. Rows usually
+  correspond to &lt;code&gt;tr&lt;/code&gt; elements, though a &lt;span title=&quot;concept-row-group&quot;&gt;row group&lt;/span&gt;
+  can have some implied &lt;span title=&quot;concept-row&quot;&gt;rows&lt;/span&gt; at the end in some cases involving
+  &lt;span title=&quot;concept-cell&quot;&gt;cells&lt;/span&gt; spanning multiple rows.&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn title=&quot;concept-column&quot;&gt;column&lt;/dfn&gt; is a complete set of
   slots from &lt;span title=&quot;&quot;&gt;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;=0&lt;/span&gt; to &lt;span
@@ -51337,6 +51366,780 @@
   &lt;/div&gt;
 
 
+  &lt;h4&gt;&lt;dfn&gt;Table sorting model&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;attr-table-sortable&quot;&gt;&lt;code&gt;sortable&lt;/code&gt;&lt;/dfn&gt; attribute on
+  &lt;code&gt;table&lt;/code&gt; elements is a &lt;span&gt;boolean attribute&lt;/span&gt;. When present, it indicates that
+  the user agent is to &lt;a href=&quot;#sortable-ui&quot;&gt;allow the user to sort&lt;/a&gt; the &lt;code&gt;table&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;To make a column sortable in a &lt;code&gt;table&lt;/code&gt; with a &lt;code&gt;thead&lt;/code&gt;, the column needs
+  to have &lt;code&gt;th&lt;/code&gt; element that does not &lt;span title=&quot;attr-tdth-colspan&quot;&gt;span multiple
+  columns&lt;/span&gt; in a &lt;code&gt;thead&lt;/code&gt; above any rows that it is to sort.&lt;/p&gt;
+
+  &lt;p&gt;To make a column sortable in a &lt;code&gt;table&lt;/code&gt; without a &lt;code&gt;thead&lt;/code&gt;, the column
+  needs to have &lt;code&gt;th&lt;/code&gt; element that does not &lt;span title=&quot;attr-tdth-colspan&quot;&gt;span multiple
+  columns&lt;/span&gt; in the first &lt;code&gt;tr&lt;/code&gt; element of the &lt;code&gt;table&lt;/code&gt;, where that
+  &lt;code&gt;tr&lt;/code&gt; element is not in a &lt;code&gt;tfoot&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the user selects a column by which to sort, the user agent sets the &lt;code&gt;th&lt;/code&gt;
+  element's &lt;dfn title=&quot;attr-th-sorted&quot;&gt;&lt;code&gt;sorted&lt;/code&gt;&lt;/dfn&gt; attribute. This attribute can also
+  be set manually, to indicate that the table should be automatically sorted, even when scripts
+  modify the page on when the page is loaded.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute, if specified, must have a value that
+  is a &lt;span&gt;set of space-separated tokens&lt;/span&gt; consisting of optionally a token whose value is an
+  &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string &quot;&lt;dfn
+  title=&quot;attr-th-sorted-reversed&quot;&gt;&lt;code&gt;reversed&lt;/code&gt;&lt;/dfn&gt;&quot;, and optionally a token whose value
+  is a &lt;span&gt;valid non-negative integer&lt;/span&gt; greater than zero, in either order.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;In other words, ignoring spaces and case, the &lt;code
+  title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute's value can be empty, &quot;&lt;code
+  title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;1&lt;/code&gt;&quot;, &quot;&lt;code title=&quot;&quot;&gt;reversed 1&lt;/code&gt;&quot;, or
+  &quot;&lt;code title=&quot;&quot;&gt;1 reversed&lt;/code&gt;&quot;, where &quot;1&quot; is any number equal to or greater than 1.&lt;/p&gt;
+
+  &lt;p&gt;While one or more &lt;code&gt;th&lt;/code&gt; elements in the table have a &lt;code
+  title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute, the user agent will keep the table's data rows
+  sorted. The value of the attribute controls how the column is used in determining the sort order.
+  The &lt;code title=&quot;attr-th-sorted-reversed&quot;&gt;reversed&lt;/code&gt; keyword means that the &lt;dfn&gt;column sort
+  direction&lt;/dfn&gt; is &lt;i&gt;reversed&lt;/i&gt;, rather than &lt;i&gt;normal&lt;/i&gt;, which is the default if the keyword
+  is omitted. The number, if present, indicates the &lt;dfn&gt;column key ordinality&lt;/dfn&gt;; if the number
+  is omitted, the column is the primary key, as if the value 1 had been specified.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Thus, &lt;code title=&quot;&quot;&gt;sorted=&quot;1&quot;&lt;/code&gt; indicates the table's primary key, &lt;code
+  title=&quot;&quot;&gt;sorted=&quot;2&quot;&lt;/code&gt; its secondary key, and so forth.&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;A &lt;dfn&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; is a &lt;code&gt;th&lt;/code&gt; element that matches
+  all the following conditions simultaneously:&lt;/p&gt;
+
+  &lt;ul&gt;
+
+   &lt;li&gt;&lt;p&gt;It corresponds to a &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt; whose &lt;i&gt;width&lt;/i&gt; is 1.
+   (Specifically, a &lt;i&gt;header cell&lt;/i&gt;, since this is a &lt;code&gt;th&lt;/code&gt; element.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;There is no &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt; that corresponds to another
+   &lt;span&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/span&gt; that covers slots in the same &lt;span
+   title=&quot;concept-column&quot;&gt;column&lt;/span&gt; but on a higher (earlier) &lt;span
+   title=&quot;concept-row&quot;&gt;row&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt; &lt;!-- only matters if there's a &lt;thead&gt; --&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt;'s &lt;span title=&quot;concept-table&quot;&gt;table&lt;/span&gt; has
+    a &lt;span title=&quot;concept-row-group&quot;&gt;row group&lt;/span&gt; corresponding to a &lt;code&gt;thead&lt;/code&gt;
+    element, the &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt; is in a &lt;span title=&quot;concept-row-group&quot;&gt;row
+    group&lt;/span&gt; that corresponds to the &lt;em&gt;first&lt;/em&gt; &lt;code&gt;thead&lt;/code&gt; element of the &lt;span
+    title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt;'s &lt;span title=&quot;concept-table&quot;&gt;table&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise: the &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt; is not in a &lt;span
+    title=&quot;concept-row-group&quot;&gt;row group&lt;/span&gt; corresponding to a &lt;code&gt;tfoot&lt;/code&gt; element, and
+    the &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt; is in the first &lt;span title=&quot;concept-row&quot;&gt;row&lt;/span&gt;
+    of the &lt;span title=&quot;concept-table&quot;&gt;table&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p class=&quot;note&quot;&gt;In other words, each &lt;span title=&quot;concept-column&quot;&gt;column&lt;/span&gt; can have one
+  &lt;span&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/span&gt;; this will be the highest &lt;code&gt;th&lt;/code&gt; in
+  a &lt;code&gt;thead&lt;/code&gt; that spans no other columns, or, if there is no &lt;code&gt;thead&lt;/code&gt;, the
+  &lt;code&gt;th&lt;/code&gt; in the first row (that is not in a &lt;code&gt;tfoot&lt;/code&gt;), assuming it spans no
+  columns.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; &lt;var
+  title=&quot;&quot;&gt;table&lt;/var&gt; are the &lt;span title=&quot;sorting-capable th element&quot;&gt;sorting-capable
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/span&gt; whose &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt;'s &lt;span
+  title=&quot;concept-table&quot;&gt;table&lt;/span&gt; is &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;table&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is a &lt;dfn&gt;sorting-capable
+  &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; if there are one or more &lt;span&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+  elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/span&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;th&lt;/code&gt; element is a &lt;dfn&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; if it is a
+  &lt;span&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; element&lt;/span&gt; and it has a &lt;code
+  title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; &lt;var
+  title=&quot;&quot;&gt;table&lt;/var&gt; are the &lt;span title=&quot;sorting-enabled th element&quot;&gt;sorting-enabled
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/span&gt; whose &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt;'s &lt;span
+  title=&quot;concept-table&quot;&gt;table&lt;/span&gt; is &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;table&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is a &lt;dfn&gt;sorting-enabled
+  &lt;code&gt;table&lt;/code&gt; element&lt;/dfn&gt; if there are one or more &lt;span&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+  elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/span&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;, and at least one of
+  them is a &lt;span&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/span&gt; (i.e. at least one has a &lt;code
+  title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute).&lt;/p&gt;
+
+  &lt;p&gt;A &lt;code&gt;table&lt;/code&gt; element is a &lt;dfn&gt;&lt;code&gt;table&lt;/code&gt; element with a user-agent exposed
+  sorting interface&lt;/dfn&gt; if it is a &lt;span&gt;sorting-capable &lt;code&gt;table&lt;/code&gt; element&lt;/span&gt; and has
+  a &lt;code title=&quot;attr-table-sortable&quot;&gt;sortable&lt;/code&gt; attribute specified.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;code&gt;table&lt;/code&gt; element has a &lt;dfn&gt;currently-sorting flag&lt;/dfn&gt;, which must initially
+  be false.&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute must not be specified on
+  &lt;code&gt;th&lt;/code&gt; elements that are not &lt;span title=&quot;sorting-capable th element&quot;&gt;sorting-capable
+  &lt;code&gt;th&lt;/code&gt; elements&lt;/span&gt;. The &lt;code title=&quot;attr-table-sortable&quot;&gt;sortable&lt;/code&gt; attribute
+  must not be specified on &lt;code&gt;table&lt;/code&gt; elements that are not &lt;span title=&quot;sorting-capable
+  table element&quot;&gt;sorting-capable &lt;code&gt;table&lt;/code&gt; elements&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;To determine a &lt;code&gt;th&lt;/code&gt; element's &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute's
+  &lt;span&gt;column sort direction&lt;/span&gt; and &lt;span&gt;column key ordinality&lt;/span&gt;, user agents must use
+  the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;i&gt;normal&lt;/i&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;have explicit direction&lt;/var&gt; be false.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt; be 1.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;have explicit ordinality&lt;/var&gt; be false.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tokens&lt;/var&gt; be the result of &lt;span title=&quot;split a string on
+   spaces&quot;&gt;splitting the attribute's value on spaces&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each token &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;tokens&lt;/var&gt;, run the appropriate
+    steps from the following list:&lt;/p&gt;
+
+    &lt;dl class=&quot;switch&quot;&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;have explicit direction&lt;/var&gt; is false and &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is an
+     &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string &quot;&lt;code
+     title=&quot;attr-th-sorted-reversed&quot;&gt;reversed&lt;/code&gt;&quot;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be &lt;i&gt;reversed&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;have explicit
+      direction&lt;/var&gt; be true.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;have explicit ordinality&lt;/var&gt; is false&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;span title=&quot;rules for parsing integers&quot;&gt;Parse &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; as an
+      integer&lt;/span&gt;. If this resulted in an error or the value zero, then ignore the token.
+      Otherwise, set &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt; to the parsed value, and set &lt;var title=&quot;&quot;&gt;have
+      explicit ordinality&lt;/var&gt; to true.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Ignore the token.&lt;/p&gt;&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;The &lt;span&gt;column sort direction&lt;/span&gt; is the value of &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;, and
+   the &lt;span&gt;column key ordinality&lt;/span&gt; is the value of &lt;var title=&quot;&quot;&gt;ordinality&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;/div&gt;
+
+  &lt;p&gt;A &lt;code&gt;table&lt;/code&gt; must not have two &lt;code&gt;th&lt;/code&gt; elements whose &lt;code
+  title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute have the same &lt;span&gt;column key
+  ordinality&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;table sorting algorithm&lt;/dfn&gt;, which is applied to a &lt;code&gt;table&lt;/code&gt;, is as
+  follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; be the &lt;code&gt;table&lt;/code&gt; element being sorted.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;span&gt;currently-sorting flag&lt;/span&gt; is true, then abort
+   these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;span&gt;currently-sorting flag&lt;/span&gt; to true.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Fire a simple event&lt;/span&gt; named &lt;code title=&quot;event-sort&quot;&gt;sort&lt;/code&gt; that is
+   cancelable at &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the event fired in the previous step was canceled, then jump to the step labeled
+   &lt;i&gt;end&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; is not now a &lt;span&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt;
+    element&lt;/span&gt;, then jump to the step labeled &lt;i&gt;end&lt;/i&gt; below.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;Even if &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; was a &lt;span&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt;
+    element&lt;/span&gt; when the algorithm was invoked, the DOM might have been entirely changed by the
+    event handlers for the &lt;code title=&quot;event-sort&quot;&gt;sort&lt;/code&gt; event, so this has to be verified at
+    this stage, not earlier.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt; be the &lt;span&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt;
+   elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/span&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Sort &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt; in ascending order of the &lt;span&gt;column key
+   ordinality&lt;/span&gt; of their &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attributes, with those
+   having the same &lt;span&gt;column key ordinality&lt;/span&gt; being sorted in &lt;span&gt;tree order&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; be a pointer to an element, initially pointing
+    at the first child of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is after &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s first
+    &lt;code&gt;thead&lt;/code&gt;, if any, and that is either a &lt;code&gt;tbody&lt;/code&gt; or a &lt;code&gt;tr&lt;/code&gt;
+    element, assuming there is one. If there is no such child, then jump to the step labeled
+    &lt;i&gt;end&lt;/i&gt; below.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; has no &lt;span title=&quot;concept-row-group&quot;&gt;row group&lt;/span&gt;
+   corresponding to a &lt;code&gt;thead&lt;/code&gt; element, then set &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; to
+   true. Otherwise, set it to false.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Row loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt; be an empty list of &lt;code&gt;tr&lt;/code&gt;
+   elements.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Run the appropriate steps from the following list:&lt;/p&gt;
+
+    &lt;dl class=&quot;switch&quot;&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; points to a &lt;code&gt;tr&lt;/code&gt; element
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;i&gt;Collect&lt;/i&gt;: Append the element pointed to by &lt;var title=&quot;&quot;&gt;row collection
+       cursor&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If there are no &lt;code&gt;tr&lt;/code&gt; or &lt;code&gt;tbody&lt;/code&gt; children of &lt;var
+       title=&quot;&quot;&gt;table&lt;/var&gt; that are later siblings of the element pointed to by &lt;var title=&quot;&quot;&gt;row
+       collection cursor&lt;/var&gt;, or if the next such child is a &lt;code&gt;tbody&lt;/code&gt; element, then jump
+       to the step labeled &lt;i&gt;group&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; point to the next &lt;code&gt;tr&lt;/code&gt; child
+       of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is a later sibling of the element pointed to by &lt;var
+       title=&quot;&quot;&gt;row collection cursor&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Returned to the step labeled &lt;i&gt;collect&lt;/i&gt; above.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; points to a &lt;code&gt;tbody&lt;/code&gt; element
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;Place all the &lt;code&gt;tr&lt;/code&gt; element children of the element pointed to by &lt;var
+       title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; into &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;, in &lt;span&gt;tree
+       order&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt; is empty, jump to the step labeled &lt;i&gt;increment loop&lt;/i&gt;
+       below.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Group&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; be an empty list of groups of &lt;code&gt;tr&lt;/code&gt;
+   elements.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group&lt;/var&gt; be an empty group of &lt;code&gt;tr&lt;/code&gt; elements.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; be a pointer to an element, initially pointing at the
+   first &lt;code&gt;tr&lt;/code&gt; element in &lt;var title=&quot;&quot;&gt;rows&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Start group&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; be 1.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Group loop&lt;/i&gt;: Append the &lt;code&gt;tr&lt;/code&gt; element pointed to by &lt;var title=&quot;&quot;&gt;group
+   cursor&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there are any &lt;span title=&quot;concept-cell&quot;&gt;cells&lt;/span&gt; whose highest &lt;span
+   title=&quot;concept-row&quot;&gt;row&lt;/span&gt;'s element is the one pointed to by &lt;var title=&quot;&quot;&gt;group
+   cursor&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;tallest height&lt;/var&gt; be the number of rows covered by the
+   tallest such &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;tallest height&lt;/var&gt; is greater than &lt;var title=&quot;&quot;&gt;pending rows in
+   group&lt;/var&gt; then set &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;tallest
+   height&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Decrement &lt;var title=&quot;&quot;&gt;pending rows in group&lt;/var&gt; by one.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; point to the next &lt;code&gt;tr&lt;/code&gt; element in &lt;var
+   title=&quot;&quot;&gt;rows&lt;/var&gt;, if any; otherwise, let it be null.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; is not null and &lt;var title=&quot;&quot;&gt;pending rows in
+   group&lt;/var&gt; is not zero, return to the step labeled &lt;i&gt;group loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Append a new group to &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; consisting of the &lt;code&gt;tr&lt;/code&gt;
+   elements in &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Empty &lt;var title=&quot;&quot;&gt;group&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;group cursor&lt;/var&gt; is not null, then return to the step labeled &lt;i&gt;start
+   group&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; is true, then drop the first roup in &lt;var
+   title=&quot;&quot;&gt;groups&lt;/var&gt; and set &lt;var title=&quot;&quot;&gt;ignore first group&lt;/var&gt; to false.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Drop leading header groups&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; is now empty, jump to the
+   step labeled &lt;i&gt;increment loop&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;!-- if you insert steps here, update the next step --&gt;
+
+   &lt;li&gt;&lt;p&gt;If the first group of &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt; consists of &lt;code&gt;tr&lt;/code&gt; elements
+   whose element children are all &lt;code&gt;th&lt;/code&gt; elements, then drop the first group in &lt;var
+   title=&quot;&quot;&gt;groups&lt;/var&gt; and return to the previous step (labeled &lt;i&gt;drop leading header
+   groups&lt;/i&gt;).&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; be a placeholder in a DOM tree, which can be used
+   to reinsert nodes at a specific point in the DOM. Insert &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; into
+   the parent of the first &lt;code&gt;tr&lt;/code&gt; element of the first group in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;,
+   immediately before that &lt;code&gt;tr&lt;/code&gt; element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Sort the groups in &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, using the following algorithm to decide the
+    relative order of any two groups &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; (the algorithm
+    either returns that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, or that &lt;var
+    title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;):&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt; be an index into &lt;var title=&quot;&quot;&gt;key heading
+     cells&lt;/var&gt;, initially denoting the first element in the list.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be a sort direction, initially &lt;i&gt;ascending&lt;/i&gt;. Its
+     other possible value is &lt;i&gt;descending&lt;/i&gt;. When &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is
+     &lt;i&gt;toggled&lt;/i&gt;, that means that if its value is &lt;i&gt;ascending&lt;/i&gt;, it must be changed to
+     &lt;i&gt;descending&lt;/i&gt;, and when its value is &lt;i&gt;descending&lt;/i&gt;, it must be changed to
+     &lt;i&gt;ascending&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Column loop&lt;/i&gt;: Let &lt;var title=&quot;&quot;&gt;th&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt;th
+     &lt;code&gt;th&lt;/code&gt; in &lt;var title=&quot;&quot;&gt;key heading cells&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute's
+     &lt;span&gt;column sort direction&lt;/span&gt; is &lt;i&gt;reversed&lt;/i&gt;, then toggle &lt;var
+     title=&quot;&quot;&gt;direction&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be the result of &lt;span&gt;comparing two row groups
+     using the &lt;code&gt;th&lt;/code&gt; element&lt;/span&gt; &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;, with &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and
+     &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; as the rows.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; is not &quot;equal&quot;, then jump to the step labeled
+     &lt;i&gt;return&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;key index&lt;/var&gt; still denotes a &lt;code&gt;th&lt;/code&gt; element in &lt;var
+     title=&quot;&quot;&gt;key heading cells&lt;/var&gt;, then jump back to the step above labeled &lt;i&gt;column
+     loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;'s &lt;code&gt;tr&lt;/code&gt; elements precede &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;'s in
+     &lt;span&gt;tree order&lt;/span&gt;, then let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be &quot;a before b&quot;.
+     Otherwise, let &lt;var title=&quot;&quot;&gt;tentative order&lt;/var&gt; be &quot;b before a&quot;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Return&lt;/i&gt;: Return the relative order given by the matching option from the following
+     list:&lt;/p&gt;
+
+      &lt;dl class=&quot;switch&quot;&gt;
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;ascending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;a before b&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;ascending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;b before a&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;descending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;a before b&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;a&lt;/var&gt;.&lt;/dd&gt;
+
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is &lt;i&gt;descending&lt;/i&gt; and &lt;var title=&quot;&quot;&gt;tentative
+       order&lt;/var&gt; is &quot;b before a&quot;&lt;/dt&gt;
+
+       &lt;dd&gt;Return that &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; comes before &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;.&lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+     &lt;/li&gt;
+
+    &lt;/ol&gt;
+
+    &lt;p&gt;When the user agent is required to &lt;dfn title=&quot;comparing two row groups using the th
+    element&quot;&gt;compare two row groups using the &lt;code&gt;th&lt;/code&gt; element&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;,
+    with &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; being the two row groups respectively, the
+    user agent must run the following steps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be the &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate of the slots that
+     &lt;code&gt;th&lt;/code&gt; covers in its &lt;span title=&quot;concept-table&quot;&gt;table&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; be the element corresponding to the &lt;span
+      title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt; in the first &lt;span title=&quot;concept-row&quot;&gt;row&lt;/span&gt; of group
+      &lt;var title=&quot;&quot;&gt;a&lt;/var&gt; that covers the slot in that &lt;span title=&quot;concept-row&quot;&gt;row&lt;/span&gt; whose
+      &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate is &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; be the element corresponding to the &lt;span
+      title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt; in the first &lt;span title=&quot;concept-row&quot;&gt;row&lt;/span&gt; of group
+      &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; that covers the slot in that &lt;span title=&quot;concept-row&quot;&gt;row&lt;/span&gt; whose
+      &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;-coordinate is &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;!-- there can't be two cells that cover the slot, unusually, because the only way that can
+      happen is if there's a cell that's extended into this row from above, and the groups, by
+      virtue of the way they are created above, never have cells that extend into them from above.
+      --&gt;
+
+      &lt;p&gt;In either case, if there's no &lt;span title=&quot;concept-cell&quot;&gt;cell&lt;/span&gt; that actually covers
+      the slot, then use the value &lt;i&gt;null&lt;/i&gt; instead.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; be
+      the &lt;span&gt;type and value of the cell&lt;/span&gt; &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt;, as defined
+      below.&lt;/p&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; be
+      the &lt;span&gt;type and value of the cell&lt;/span&gt; &lt;var title=&quot;&quot;&gt;cell&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, as defined
+      below.&lt;/p&gt;
+
+      &lt;p&gt;The &lt;dfn&gt;type and value of the cell&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; are computed as follows.&lt;/p&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; is &lt;i&gt;null&lt;/i&gt;, then the type is &quot;string&quot; and the value is
+       the empty string; abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If, ignoring &lt;span&gt;inter-element whitespace&lt;/span&gt; and &lt;span&gt;Comment&lt;/span&gt; nodes,
+       &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; has only one child and that child is a &lt;code&gt;data&lt;/code&gt; element,
+       then the value is the value of that &lt;code&gt;data&lt;/code&gt; element's &lt;code
+       title=&quot;attr-data-value&quot;&gt;value&lt;/code&gt; attribute, if there is one, or the empty string
+       otherwise; the type is &quot;string&quot;.&lt;/p&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;If, ignoring &lt;span&gt;inter-element whitespace&lt;/span&gt; and &lt;span&gt;Comment&lt;/span&gt; nodes, &lt;var
+        title=&quot;&quot;&gt;cell&lt;/var&gt; has only one child and that child is a &lt;code&gt;time&lt;/code&gt; element, then
+        the value is the &lt;span&gt;machine-readable equivalent of the element's contents&lt;/span&gt;, if any,
+        and the type is the kind of value that is thus obtained
+       (a &lt;span title=&quot;concept-month&quot;&gt;month&lt;/span&gt;,
+        a &lt;span title=&quot;concept-date&quot;&gt;date&lt;/span&gt;,
+        a &lt;span title=&quot;concept-yearless-date&quot;&gt;yearless date&lt;/span&gt;,
+        a &lt;span title=&quot;concept-time&quot;&gt;time&lt;/span&gt;,
+        a &lt;span title=&quot;concept-datetime-local&quot;&gt;local date and time&lt;/span&gt;,
+        a &lt;span title=&quot;concept-timezone&quot;&gt;time-zone offset&lt;/span&gt;,
+        a &lt;span title=&quot;concept-datetime&quot;&gt;global date and time&lt;/span&gt;,
+        a &lt;span title=&quot;concept-week&quot;&gt;week&lt;/span&gt;,
+        a year, or
+        a &lt;span title=&quot;concept-duration&quot;&gt;duration&lt;/span&gt;);
+        abort these steps after completing this one.&lt;/p&gt;
+
+        &lt;p&gt;If there is no machine-readable equivalent, then the type is &quot;string&quot; and the value is
+        the empty string.&lt;/p&gt;
+
+        &lt;p&gt;If the type is
+        a &lt;span title=&quot;concept-month&quot;&gt;month&lt;/span&gt;,
+        a &lt;span title=&quot;concept-date&quot;&gt;date&lt;/span&gt;,
+        a &lt;span title=&quot;concept-week&quot;&gt;week&lt;/span&gt;, or
+        a year,
+        then change the value to be the instant in time (with no time zone) that describes the
+        earliest moment that the value represents, and change the type to be
+        a &lt;span title=&quot;concept-datetime-local&quot;&gt;local date and time&lt;/span&gt;.&lt;/p&gt;
+
+        &lt;p class=&quot;example&quot;&gt;For example, if the cell was
+        &lt;code&gt;&lt;td&gt;&lt;time&gt;2011-11&lt;/time&gt;&lt;/code&gt; then for sorting purposes the value is
+        interpreted as &quot;2011-11-01T00:00:00.000&quot; and the type is treated as a &lt;span
+        title=&quot;concept-datetime-local&quot;&gt;local date and time&lt;/span&gt; rather than a &lt;span
+        title=&quot;concept-month&quot;&gt;month&lt;/span&gt;.&lt;/p&gt;
+
+        &lt;p class=&quot;example&quot;&gt;Similarly, if the cell was &lt;code&gt;&lt;td&gt;&lt;time
+        datetime=&quot;2011&quot;&gt;MMXIV&lt;/time&gt;&lt;/code&gt; then for sorting purposes the value is interpreted as
+        &quot;2014-01-01T00:00:00.000&quot; and the type is treated as a &lt;span
+        title=&quot;concept-datetime-local&quot;&gt;local date and time&lt;/span&gt; rather than a year.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;The value is the element's &lt;code&gt;textContent&lt;/code&gt;. The type is &quot;string&quot;.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are not
+      equal, then: return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier in the
+      following list than &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, otherwise, return &quot;b before a&quot;;
+      then, abort these steps.&lt;/p&gt;
+
+      &lt;ol class=&quot;brief&quot;&gt;
+       &lt;li&gt;&lt;span title=&quot;concept-time&quot;&gt;time&lt;/span&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;span title=&quot;concept-yearless-date&quot;&gt;yearless date&lt;/span&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;span title=&quot;concept-datetime-local&quot;&gt;local date and time&lt;/span&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;span title=&quot;concept-datetime&quot;&gt;global date and time&lt;/span&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;span title=&quot;concept-timezone&quot;&gt;time-zone offset&lt;/span&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;span title=&quot;concept-duration&quot;&gt;duration&lt;/span&gt;&lt;/li&gt;
+       &lt;li&gt;&quot;string&quot;&lt;/li&gt;
+      &lt;/ol&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are
+     equal, then return &quot;equal&quot; and abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;type&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt; are not
+      &quot;string&quot;, then: return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier
+      than &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, and return &quot;b before a&quot; otherwise.&lt;/p&gt;
+
+      &lt;p&gt;Values sort in their natural order, with the following additional constraints:&lt;/p&gt;
+
+      &lt;p&gt;For &lt;span title=&quot;concept-time&quot;&gt;time&lt;/span&gt; values, 00:00:00.000 is the earliest value and
+      23:59:59.999 is the latest value.&lt;/p&gt;
+
+      &lt;p&gt;For &lt;span title=&quot;concept-yearless-date&quot;&gt;yearless date&lt;/span&gt; values, 01-01 is the earliest
+      value and 12-31 is the latest value; 02-28 is earlier than 02-29 which is earlier than
+      03-01.&lt;/p&gt;
+
+      &lt;p&gt;Values that are &lt;span title=&quot;concept-datetime-local&quot;&gt;local date and time&lt;/span&gt; compare as
+      if they were in the same time zone.&lt;/p&gt;
+
+      &lt;!-- no ambiguity for &lt;span title=&quot;concept-datetime&quot;&gt;global date and time&lt;/span&gt; --&gt;
+
+      &lt;p&gt;For &lt;span title=&quot;concept-timezone&quot;&gt;time-zone offset&lt;/span&gt; values, -23:59 is the earliest
+      value and +23:59 is the latest value.&lt;/p&gt;
+
+      &lt;!-- MONTHS: &lt;span title=&quot;concept-duration&quot;&gt;duration&lt;/span&gt; is unambiguous until we add months --&gt;
+
+     &lt;/li&gt;
+
+     &lt;!-- At this point we know that they are both strings and they're not equal. --&gt;
+
+     &lt;li&gt;
+
+      &lt;p class=&quot;XXX&quot;&gt;Return &quot;a before b&quot; if &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;a&lt;/sub&gt;&lt;/var&gt; is earlier than
+      &lt;var title=&quot;&quot;&gt;value&lt;sub&gt;b&lt;/sub&gt;&lt;/var&gt;, and return &quot;b before a&quot; otherwise; for these purposes,
+      the strings must be compared using collation order of the &lt;span&gt;language&lt;/span&gt; of the
+      &lt;code&gt;table&lt;/code&gt; element to which &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;span
+      title=&quot;concept-table&quot;&gt;table&lt;/span&gt; corresponds.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt; be a list of &lt;code&gt;tr&lt;/code&gt; elements consisting of the
+   &lt;code&gt;tr&lt;/code&gt; elements of all the groups in the newly ordered &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, with
+   the &lt;code&gt;tr&lt;/code&gt; elements being in the same order as the groups to which they belong are in
+   &lt;var title=&quot;&quot;&gt;groups&lt;/var&gt;, and the &lt;code&gt;tr&lt;/code&gt; elements within each such group themselves
+   being ordered in &lt;span&gt;tree order&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span title=&quot;concept-node-remove&quot;&gt;Remove&lt;/span&gt; all the &lt;code&gt;tr&lt;/code&gt; elements in &lt;var
+   title=&quot;&quot;&gt;new order&lt;/var&gt; from their parents.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span title=&quot;concept-node-insert&quot;&gt;Insert&lt;/span&gt; all the &lt;code&gt;tr&lt;/code&gt; elements in &lt;var
+   title=&quot;&quot;&gt;new order&lt;/var&gt; into the DOM at the location of &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt;, in
+   the order these elements are found in &lt;var title=&quot;&quot;&gt;new order&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;!-- done with this set of rows --&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;insertion point&lt;/var&gt; from the DOM.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Increment loop&lt;/i&gt;: If there are no &lt;code&gt;tr&lt;/code&gt; or &lt;code&gt;tbody&lt;/code&gt; children of
+   &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that are later siblings of the element pointed to by &lt;var title=&quot;&quot;&gt;row
+   collection cursor&lt;/var&gt;, then jump to the step labeled &lt;i&gt;end&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt; point to the next &lt;code&gt;tr&lt;/code&gt; or
+   &lt;code&gt;tbody&lt;/code&gt; child of &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; that is a later sibling of the element
+   pointed to by &lt;var title=&quot;&quot;&gt;row collection cursor&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;i&gt;row loop&lt;/i&gt; above.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;End&lt;/i&gt;: Set &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;'s &lt;span&gt;currently-sorting flag&lt;/span&gt; to
+   false.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;When any of the descendants of a &lt;span&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt; element&lt;/span&gt; change
+  in any way (including attributes changing), and when a &lt;code&gt;table&lt;/code&gt; element becomes a
+  &lt;span&gt;sorting-enabled &lt;code&gt;table&lt;/code&gt; element&lt;/span&gt;, the &lt;code&gt;table&lt;/code&gt; element is said to
+  become &lt;dfn&gt;a table with a pending sort&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When the user agent is to &lt;dfn&gt;sort the tables with pending sorts&lt;/dfn&gt;, which happens during
+  the &lt;span&gt;perform a microtask checkpoint&lt;/span&gt; algorithm, the user agent must run the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tables&lt;/var&gt; be a list of each &lt;code&gt;table&lt;/code&gt; in the &lt;span&gt;unit of
+   related similar-origin browsing contexts&lt;/span&gt; that is &lt;span&gt;a table with a pending sort&lt;/span&gt;,
+   in the order that they became such, with those that become such at the same time being listed in
+   &lt;span&gt;tree order&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let all the &lt;code&gt;table&lt;/code&gt; elements in &lt;var title=&quot;&quot;&gt;tables&lt;/var&gt; no longer be &lt;span
+   title=&quot;a table with a pending sort&quot;&gt;tables with a pending sort&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Apply the &lt;span&gt;table sorting algorithm&lt;/span&gt; to each &lt;code&gt;table&lt;/code&gt; in &lt;var
+   title=&quot;&quot;&gt;tables&lt;/var&gt;, in order.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;When the user agent is to &lt;dfn&gt;set the sort key&lt;/dfn&gt; to a &lt;code&gt;th&lt;/code&gt; element &lt;var
+  title=&quot;&quot;&gt;target&lt;/var&gt;, it must run the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;table&lt;/var&gt; be the &lt;code&gt;table&lt;/code&gt; of the &lt;span
+   title=&quot;concept-table&quot;&gt;table&lt;/span&gt; of which &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; is a header cell.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;code&gt;th&lt;/code&gt; is a &lt;span&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt; element&lt;/span&gt; whose
+   &lt;span&gt;column key ordinality&lt;/span&gt; is 1, then: if its &lt;span&gt;column sort direction&lt;/span&gt; is
+   &lt;i&gt;normal&lt;/i&gt;, set that element's &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute to the
+   string &quot;&lt;code title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, otherwise, set it to the empty string; then, abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current headers&lt;/var&gt; be the &lt;span&gt;sorting-enabled &lt;code&gt;th&lt;/code&gt;
+   elements of the &lt;code&gt;table&lt;/code&gt; element&lt;/span&gt; &lt;var title=&quot;&quot;&gt;table&lt;/var&gt;, excluding &lt;var
+   title=&quot;&quot;&gt;target&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Sort &lt;var title=&quot;&quot;&gt;current headers&lt;/var&gt; by their &lt;code
+   title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attributes' &lt;span&gt;column key ordinality&lt;/span&gt;, in ascending
+   order, with elements that have the same &lt;span&gt;column key ordinality&lt;/span&gt; being sorted in
+   &lt;span&gt;tree order&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;level&lt;/var&gt; be 2.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each &lt;code&gt;th&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;th&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;current
+    headers&lt;/var&gt;, in order, run the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute's
+     &lt;span&gt;column sort direction&lt;/span&gt; is &lt;i&gt;normal&lt;/i&gt;, then set &lt;var title=&quot;&quot;&gt;th&lt;/var&gt;'s &lt;code
+     title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute to a &lt;span&gt;valid integer&lt;/span&gt; whose value is
+     &lt;var title=&quot;&quot;&gt;level&lt;/var&gt;. Otherwise, set it to the concatenation of the string &quot;&lt;code
+     title=&quot;&quot;&gt;reversed&lt;/code&gt;&quot;, a U+0020 SPACE character, and a &lt;span&gt;valid integer&lt;/span&gt; whose
+     value is &lt;var title=&quot;&quot;&gt;level&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;level&lt;/var&gt; by 1.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;'s &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute to
+   the empty string.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;span&gt;activation behavior&lt;/span&gt; of the &lt;span title=&quot;sorting-capable th elements of the
+  table element&quot;&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of&lt;/span&gt; all &lt;span title=&quot;table element
+  with a user-agent exposed sorting interface&quot;&gt;&lt;code&gt;table&lt;/code&gt; elements with a user-agent exposed
+  sorting interface&lt;/span&gt; is to &lt;span&gt;set the sort key&lt;/span&gt; to the &lt;code&gt;th&lt;/code&gt; element.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The &lt;code&gt;table&lt;/code&gt; will be sorted the next time the user agent &lt;span
+  title=&quot;perform a microtask checkpoint&quot;&gt;performs a microtask checkpoint&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;th&lt;/var&gt; . &lt;code title=&quot;dom-th-sort&quot;&gt;sort&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Act as if the user had indicated that this was to be the new primary sort column.&lt;/p&gt;
+
+    &lt;p&gt;The &lt;code&gt;table&lt;/code&gt; won't actually be sorted until the script terminates.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;table&lt;/var&gt; . &lt;code title=&quot;dom-table-stopSorting&quot;&gt;stopSorting&lt;/code&gt;()&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Removes all the &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attributes that are causing the
+    table to automatically sort its contents, if any.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;code&gt;th&lt;/code&gt; element's &lt;dfn title=&quot;dom-th-sort&quot;&gt;&lt;code&gt;sort()&lt;/code&gt;&lt;/dfn&gt; method, when
+  invoked, must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;th&lt;/code&gt; element is not a &lt;span&gt;sorting-capable &lt;code&gt;th&lt;/code&gt;
+   element&lt;/span&gt;, then abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;span&gt;Set the sort key&lt;/span&gt; to the &lt;code&gt;th&lt;/code&gt; element.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;The &lt;code&gt;table&lt;/code&gt; will be sorted the next time the user agent &lt;span
+    title=&quot;perform a microtask checkpoint&quot;&gt;performs a microtask checkpoint&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+
+  &lt;p&gt;The &lt;code&gt;table&lt;/code&gt; element's &lt;dfn
+  title=&quot;dom-table-stopSorting&quot;&gt;&lt;code&gt;stopSorting()&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must remove
+  the &lt;code title=&quot;attr-th-sorted&quot;&gt;sorted&lt;/code&gt; attribute of all the &lt;span&gt;sorting-enabled
+  &lt;code&gt;th&lt;/code&gt; elements of the table element&lt;/span&gt; on which the method was invoked.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
   &lt;h4&gt;Examples&lt;/h4&gt;
 
   &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
@@ -77516,6 +78319,7 @@
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onseeking&quot;&gt;onseeking&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onselect&quot;&gt;onselect&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onshow&quot;&gt;onshow&lt;/span&gt;;
+           attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onsort&quot;&gt;onsort&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onstalled&quot;&gt;onstalled&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-window-onstorage&quot;&gt;onstorage&lt;/span&gt;;
            attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-onsubmit&quot;&gt;onsubmit&lt;/span&gt;;
@@ -85224,6 +86028,9 @@
 
   &lt;ol&gt;
 
+   &lt;!-- if you add a step here, make sure to go through the spec updating references to the &quot;first
+   step&quot; of the event loop --&gt;
+
    &lt;li&gt;&lt;p&gt;Run the oldest &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; on one of the &lt;span&gt;event
    loop&lt;/span&gt;'s &lt;span title=&quot;task queue&quot;&gt;task queues&lt;/span&gt;, if any, ignoring tasks whose
    associated &lt;code&gt;Document&lt;/code&gt;s are not &lt;span&gt;fully active&lt;/span&gt;. The user agent may pick any
@@ -85235,7 +86042,8 @@
    &lt;li&gt;&lt;p&gt;If the &lt;span&gt;storage mutex&lt;/span&gt; is now owned by the &lt;span&gt;event loop&lt;/span&gt;, release it
    so that it is once again free.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Remove that task from its &lt;span&gt;task queue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If a task was run in the first step above, remove that task from its &lt;span&gt;task
+   queue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Perform a microtask checkpoint&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
@@ -85261,6 +86069,8 @@
    &lt;li&gt;&lt;p&gt;Let the &lt;span&gt;running mutation observers&lt;/span&gt; flag be
    true.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Sort the tables with pending sorts&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;
 
     &lt;p&gt;&lt;span title=&quot;concept-mo-invoke&quot;&gt;Invoke
@@ -86033,6 +86843,7 @@
     &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-onseeking&quot;&gt;&lt;code&gt;onseeking&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-media-seeking&quot;&gt;seeking&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-onselect&quot;&gt;&lt;code&gt;onselect&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-select&quot;&gt;select&lt;/code&gt; &lt;!-- widely used --&gt; &lt;!-- [CSSOM] --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-onshow&quot;&gt;&lt;code&gt;onshow&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-onsort&quot;&gt;&lt;code&gt;onsort&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-sort&quot;&gt;sort&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-onstalled&quot;&gt;&lt;code&gt;onstalled&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-media-stalled&quot;&gt;stalled&lt;/code&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-onsubmit&quot;&gt;&lt;code&gt;onsubmit&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-submit&quot;&gt;submit&lt;/code&gt; &lt;!-- widely used --&gt;
     &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-onsuspend&quot;&gt;&lt;code&gt;onsuspend&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-media-suspend&quot;&gt;suspend&lt;/code&gt;
@@ -111578,7 +112389,15 @@
   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1793">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1793</A> --&gt;
   &lt;!-- note that the &quot;rules for parsing dimension values&quot; can't return 0, if the value is &quot;0&quot; they treat it as an error --&gt;
 
+  &lt;hr&gt;
 
+  &lt;p id=&quot;sortable-ui&quot;&gt;User agents are expected to render &lt;span title=&quot;sorting-capable th elements of
+  the table element&quot;&gt;sorting-capable &lt;code&gt;th&lt;/code&gt; elements of&lt;/span&gt; all &lt;span title=&quot;table
+  element with a user-agent exposed sorting interface&quot;&gt;&lt;code&gt;table&lt;/code&gt; elements with a user-agent
+  exposed sorting interface&lt;/span&gt; in such a manner as to indicate that activating the elements will
+  cause the table to be sorted.&lt;/p&gt;
+
+
   &lt;h4&gt;Form controls&lt;/h4&gt;
 
   &lt;pre class=&quot;css&quot;&gt;@namespace url(<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>);
@@ -120453,6 +121272,12 @@
      &lt;td&gt; &lt;span title=&quot;event handler content attributes&quot;&gt;Event handler content attribute&lt;/span&gt;
 
     &lt;tr&gt;
+     &lt;th id=&quot;ix-handler-onsort&quot;&gt; &lt;code title=&quot;&quot;&gt;onsort&lt;/code&gt;
+     &lt;td&gt; &lt;span title=&quot;handler-onsort&quot;&gt;HTML elements&lt;/span&gt;
+     &lt;td&gt; &lt;code title=&quot;event-sort&quot;&gt;sort&lt;/code&gt; event handler
+     &lt;td&gt; &lt;span title=&quot;event handler content attributes&quot;&gt;Event handler content attribute&lt;/span&gt;
+
+    &lt;tr&gt;
      &lt;th id=&quot;ix-handler-onstalled&quot;&gt; &lt;code title=&quot;&quot;&gt;onstalled&lt;/code&gt;
      &lt;td&gt; &lt;span title=&quot;handler-onstalled&quot;&gt;HTML elements&lt;/span&gt;
      &lt;td&gt; &lt;code title=&quot;event-media-stalled&quot;&gt;stalled&lt;/code&gt; event handler


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014456.html">[html5] r7596 - [giow] (3) Make click() have no effect on links in	non-bc'ed docs. Affected topi [...]
</A></li>
	<LI>Next message: <A HREF="014458.html">[html5] r7598 - [] (0) Clean up some issues Anne found with sorting	model. Affected topics: HTML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14457">[ date ]</a>
              <a href="thread.html#14457">[ thread ]</a>
              <a href="subject.html#14457">[ subject ]</a>
              <a href="author.html#14457">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
