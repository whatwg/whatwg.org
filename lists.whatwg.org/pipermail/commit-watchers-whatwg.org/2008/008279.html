<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1377 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1377%20-%20/&In-Reply-To=%3C20080322001235.67B3A38EF01%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008278.html">
   <LINK REL="Next"  HREF="008280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1377 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1377%20-%20/&In-Reply-To=%3C20080322001235.67B3A38EF01%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1377 - /">whatwg at whatwg.org
       </A><BR>
    <I>Fri Mar 21 17:12:35 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008278.html">[html5] r1376 - /
</A></li>
        <LI>Next message: <A HREF="008280.html">[html5] r1378 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8279">[ date ]</a>
              <a href="thread.html#8279">[ thread ]</a>
              <a href="subject.html#8279">[ subject ]</a>
              <a href="author.html#8279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-03-21 17:12:34 -0700 (Fri, 21 Mar 2008)
New Revision: 1377

Modified:
   index
   source
Log:
[act] (0) Smarter table header cell / data cell association algorithm.

Modified: index
===================================================================
--- index	2008-03-20 23:38:10 UTC (rev 1376)
+++ index	2008-03-22 00:12:34 UTC (rev 1377)
@@ -24,7 +24,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 20 March 2008&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 21 March 2008&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
     href=&quot;<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&quot;&gt;Join the working group's
@@ -20151,7 +20151,7 @@
    title=&quot;&quot;&gt;height&lt;/var&gt; such that the row group covers all the slots with
    coordinates (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;) where
    &lt;span&gt;0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-   title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt; and &lt;span&gt;&lt;var
+   title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
    title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
    title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;group&lt;sub
    title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;height&lt;/var&gt;&lt;/span&gt;. Row groups
@@ -20169,7 +20169,7 @@
    title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;group&lt;sub
    title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;width&lt;/var&gt;&lt;/span&gt; and
    &lt;span&gt;0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-   title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;. Column groups
+   title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;. Column groups
    correspond to &lt;code&gt;&lt;a href=&quot;#colgroup&quot;&gt;colgroup&lt;/a&gt;&lt;/code&gt; elements. Not
    every column is necessarily in a column group.
 
@@ -20697,136 +20697,212 @@
        slot to which the header cell is anchored.&lt;/p&gt;
 
      &lt;li&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt; be the width
+       of the header cell.&lt;/p&gt;
+
+     &lt;li&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt; be the
+       height of the header cell.&lt;/p&gt;
+
+     &lt;li&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;data cells&lt;/var&gt; be a list of data cells,
+       initially empty.&lt;/p&gt;
+
+     &lt;li&gt;
       &lt;p&gt;Examine the &lt;code title=attr-th-scope&gt;&lt;a
        href=&quot;#scope0&quot;&gt;scope&lt;/a&gt;&lt;/code&gt; attribute of the &lt;code&gt;&lt;a
        href=&quot;#th&quot;&gt;th&lt;/a&gt;&lt;/code&gt; element corresponding to the header cell,
        and, based on its state, apply the appropriate substep:&lt;/p&gt;
-      &lt;!-- XXX this entire switch statement should be changed around
-      so that it just defines the area to assign headers in, and the
-      direction to do the assigning in, and then defers to a set of
-      steps below it that then does the assigning. Then, we can
-      support colspaning/rowspaning headers and can stop when we hit
-      other headers, if we want to do that. --&gt;
-      
+
       &lt;dl class=switch&gt;
        &lt;dt&gt;If it is in the &lt;em title=attr-th-scope-row&gt;&lt;a
         href=&quot;#row&quot;&gt;row&lt;/a&gt;&lt;/em&gt; state
 
        &lt;dd&gt;
-        &lt;p&gt;Assign the header cell to any data cells anchored at slots with
-         coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-         title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for any
-         data cells corresponding to &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt;
-         elements that have a &lt;code title=attr-td-headers&gt;&lt;a
-         href=&quot;#headers&quot;&gt;headers&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
+        &lt;p&gt;Add all the data cells that cover slots with coordinates (&lt;var
+         title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
+         title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, to the &lt;var title=&quot;&quot;&gt;data
+         cells&lt;/var&gt; list.&lt;/p&gt;
 
        &lt;dt&gt;If it is in the &lt;em title=attr-th-scope-col&gt;&lt;a
         href=&quot;#col0&quot;&gt;column&lt;/a&gt;&lt;/em&gt; state
 
        &lt;dd&gt;
-        &lt;p&gt;Assign the header cell to any data cells anchored at slots with
-         coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-         title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for any
-         data cells corresponding to &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt;
-         elements that have a &lt;code title=attr-td-headers&gt;&lt;a
-         href=&quot;#headers&quot;&gt;headers&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
+        &lt;p&gt;Add all the data cells that cover slots with coordinates (&lt;var
+         title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub
+         title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, to the &lt;var title=&quot;&quot;&gt;data
+         cells&lt;/var&gt; list.&lt;/p&gt;
 
        &lt;dt&gt;If it is in the &lt;em title=attr-th-scope-rowgroup&gt;&lt;a
         href=&quot;#rowgroup&quot;&gt;row group&lt;/a&gt;&lt;/em&gt; state
 
        &lt;dd&gt;
         &lt;p&gt;If the header cell is not in a &lt;a href=&quot;#row-group&quot;
-         title=concept-row-group&gt;row group&lt;/a&gt;, then don't assign the header
-         cell to any data cells.&lt;/p&gt;
+         title=concept-row-group&gt;row group&lt;/a&gt;, then do nothing.&lt;/p&gt;
 
-        &lt;p&gt;Otherwise, let (1, &lt;var title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;)
+        &lt;p&gt;Otherwise, let (0, &lt;var title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;)
          be the slot at which the row group is anchored, let &lt;var
          title=&quot;&quot;&gt;height&lt;/var&gt; be the number of rows in the row group, and
-         assign the header cell to any data cells anchored at slots with
-         coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-         title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-         title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var
-         title=&quot;&quot;&gt;height&lt;/var&gt;&lt;/span&gt;, except for any data cells
-         corresponding to &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; elements that
-         have a &lt;code title=attr-td-headers&gt;&lt;a
-         href=&quot;#headers&quot;&gt;headers&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
+         add all the data cells that cover slots with coordinates (&lt;var
+         title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
+         title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;group&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;height&lt;/var&gt;&lt;/span&gt;, to the
+         &lt;var title=&quot;&quot;&gt;data cells&lt;/var&gt; list.&lt;/p&gt;
 
        &lt;dt&gt;If it is in the &lt;em title=attr-th-scope-colgroup&gt;&lt;a
         href=&quot;#colgroup0&quot;&gt;column group&lt;/a&gt;&lt;/em&gt; state
 
        &lt;dd&gt;
         &lt;p&gt;If the header cell is not in a &lt;a href=&quot;#column0&quot;
-         title=concept-column-group&gt;column group&lt;/a&gt;, then don't assign the
-         header cell to any data cells.&lt;/p&gt;
+         title=concept-column-group&gt;column group&lt;/a&gt;, then do nothing.&lt;/p&gt;
 
-        &lt;p&gt;Otherwise, let (&lt;var title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, 1)
+        &lt;p&gt;Otherwise, let (&lt;var title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, 0)
          be the slot at which the column group is anchored, let &lt;var
          title=&quot;&quot;&gt;width&lt;/var&gt; be the number of columns in the column group,
-         and assign the header cell to any data cells anchored at slots with
-         coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-         title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var
-         title=&quot;&quot;&gt;width&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
-         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;data&lt;sub
-         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub
-         title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for any data cells
-         corresponding to &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; elements that
-         have a &lt;code title=attr-td-headers&gt;&lt;a
-         href=&quot;#headers&quot;&gt;headers&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
+         and add all the data cells that cover slots with coordinates (&lt;var
+         title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;group&lt;sub
+         title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;width&lt;/var&gt;&lt;/span&gt; and
+         &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub
+         title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, to the &lt;var title=&quot;&quot;&gt;data
+         cells&lt;/var&gt; list.&lt;/p&gt;
 
        &lt;dt&gt;Otherwise, it is in the &lt;em title=&quot;&quot;&gt;auto&lt;/em&gt; state
 
        &lt;dd&gt;
-        &lt;p&gt;If the header cell is not in the first row of the table, or not in
-         the first cell of a row, then don't assign the header cell to any
-         data cells.&lt;/p&gt;
+        &lt;p&gt;Run these steps:&lt;/p&gt;
 
-        &lt;p class=big-issue&gt;This is shortly to be made better and more
-         magical.&lt;/p&gt;
+        &lt;ol&gt;
+         &lt;li&gt;
+          &lt;p&gt;If the header cell is &lt;a href=&quot;#equivalent&quot;&gt;equivalent to a wide
+           cell&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;
+           equal &lt;span&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-&lt;var
+           title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;. &lt;a
+           href=&quot;#refsUNICODE&quot;&gt;[UNICODE]&lt;/a&gt;&lt;/p&gt;
 
-        &lt;p&gt;Otherwise, if the header cell is in the first row of the table,
-         assign the header cell to any data cells anchored at slots with
-         coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-         title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for any
-         data cells corresponding to &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt;
-         elements that have a &lt;code title=attr-td-headers&gt;&lt;a
-         href=&quot;#headers&quot;&gt;headers&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
+         &lt;li&gt;
+          &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; equal &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;.&lt;/p&gt;
 
-        &lt;p&gt;Otherwise, the header cell is in the first column of the table;
-         assign the header cell to any data cells anchored at slots with
-         coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-         title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-         title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for any
-         data cells corresponding to &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt;
-         elements that have a &lt;code title=attr-td-headers&gt;&lt;a
-         href=&quot;#headers&quot;&gt;headers&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
+         &lt;li&gt;
+          &lt;p&gt;&lt;i&gt;Horizontal&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; is equal to &lt;var
+           title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;, then jump down to the
+           step below labelled &lt;i&gt;vertical&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;If there is a header cell anchored at (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;,
+           &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) with height &lt;var
+           title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;, then jump down to
+           the step below labelled &lt;i&gt;vertical&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;Add all the data cells that cover slots with coordinates (&lt;var
+           title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+           title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+           title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt;
+           and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+           title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, to the &lt;var title=&quot;&quot;&gt;data
+           cells&lt;/var&gt; list.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;Increase &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; by 1.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;Jump up to the step above labelled &lt;i&gt;horizontal&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; equal &lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;&lt;i&gt;Vertical&lt;/i&gt;: let &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; equal &lt;span&gt;&lt;var
+           title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var
+           title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;If &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; is equal to &lt;var title=&quot;&quot;&gt;y&lt;sub
+           title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;, then jump to the step below labelled
+           &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;If there is a header cell &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; anchored at
+           (&lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
+           title=&quot;&quot;&gt;y&lt;/var&gt;), then follow these substeps:&lt;/p&gt;
+
+          &lt;ol&gt;
+           &lt;li&gt;
+            &lt;p&gt;If the header cell &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; is &lt;a
+             href=&quot;#equivalent&quot;&gt;equivalent to a wide cell&lt;/a&gt;, then let &lt;var
+             title=&quot;&quot;&gt;width&lt;/var&gt; be &lt;span&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub
+             title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;header&lt;sub
+             title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;. Otherwise, let &lt;var
+             title=&quot;&quot;&gt;width&lt;/var&gt; be the width of the header cell &lt;var
+             title=&quot;&quot;&gt;cell&lt;/var&gt;.&lt;/p&gt;
+
+           &lt;li&gt;
+            &lt;p&gt;If &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; is equal to &lt;var
+             title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;, then jump to the
+             step below labelled &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;
+          &lt;/ol&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;Add all the data cells that cover slots with coordinates (&lt;var
+           title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+           title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+           title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+           title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+           title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;,
+           to the &lt;var title=&quot;&quot;&gt;data cells&lt;/var&gt; list.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;Increase &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; by 1.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;Jump up to the step above labelled &lt;i&gt;vertical&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;li&gt;
+          &lt;p&gt;&lt;i&gt;End&lt;/i&gt;: Coalesce all the duplicate entries in the &lt;var
+           title=&quot;&quot;&gt;data cells&lt;/var&gt; list, so that each data cell is only
+           present once, in tree order.&lt;/p&gt;
+        &lt;/ol&gt;
       &lt;/dl&gt;
+
+     &lt;li&gt;
+      &lt;p&gt;Assign the header cell to all the data cells &lt;var title=&quot;&quot;&gt;data
+       cells&lt;/var&gt; that correspond to &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt;
+       elements that do not have a &lt;code title=attr-td-headers&gt;&lt;a
+       href=&quot;#headers&quot;&gt;headers&lt;/a&gt;&lt;/code&gt; attribute specified.&lt;/p&gt;
     &lt;/ol&gt;
 
    &lt;li&gt;
@@ -20866,6 +20942,32 @@
     &lt;/ol&gt;
   &lt;/ol&gt;
 
+  &lt;p&gt;A header cell anchored at (&lt;var title=&quot;&quot;&gt;header&lt;sub
+   title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;)
+   with width &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt; and height
+   &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt; is said to be &lt;dfn
+   id=equivalent&gt;equivalent to a wide cell&lt;/dfn&gt; if all the slots with
+   coordinates (&lt;var title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var
+   title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+   title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+   title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
+   title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+   title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+   title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
+   title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+   title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, are all either empty or covered by &lt;a
+   href=&quot;#empty0&quot; title=&quot;empty data cell&quot;&gt;empty data cells&lt;/a&gt;.
+
+  &lt;p&gt;A data cell is said to be an &lt;dfn id=empty0&gt;empty data cell&lt;/dfn&gt; if it
+   contains no elements and its text content, if any, consists only of
+   characters in the Unicode character class Zs. &lt;a
+   href=&quot;#refsUNICODE&quot;&gt;[UNICODE]&lt;/a&gt;
+
+  &lt;p&gt;User agents may remove &lt;a href=&quot;#empty0&quot; title=&quot;empty data cell&quot;&gt;empty
+   data cells&lt;/a&gt; when analysing data in a &lt;span title=&quot;concept
+   table&quot;&gt;table&lt;/span&gt;.
+
   &lt;h3 id=forms&gt;&lt;span class=secno&gt;3.14 &lt;/span&gt;Forms&lt;/h3&gt;
   &lt;!-- XXX everything in WF2 --&gt;
 

Modified: source
===================================================================
--- source	2008-03-20 23:38:10 UTC (rev 1376)
+++ source	2008-03-22 00:12:34 UTC (rev 1377)
@@ -17645,7 +17645,7 @@
   with coordinates (&lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;)
   where &lt;span&gt;0&nbsp;&le;&nbsp;&lt;var
   title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
-  title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt; and &lt;span&gt;&lt;var
+  title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
   title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
   title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;group&lt;sub
   title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;height&lt;/var&gt;&lt;/span&gt;. Row groups
@@ -17663,7 +17663,7 @@
   title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;group&lt;sub
   title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;width&lt;/var&gt;&lt;/span&gt; and
   &lt;span&gt;0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-  title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;-1&lt;/span&gt;. Column groups
+  title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;. Column groups
   correspond to &lt;code&gt;colgroup&lt;/code&gt; elements. Not every column is
   necessarily in a column group.&lt;/p&gt;
 
@@ -18379,36 +18379,52 @@
 
      &lt;li&gt;
 
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt; be
+      the width of the header cell.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt; be
+      the height of the header cell.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;data cells&lt;/var&gt; be a list of data cells,
+      initially empty.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
       &lt;p&gt;Examine the &lt;code title=&quot;attr-th-scope&quot;&gt;scope&lt;/code&gt;
       attribute of the &lt;code&gt;th&lt;/code&gt; element corresponding to the
       header cell, and, based on its state, apply the appropriate
       substep:&lt;/p&gt;
 
-      &lt;!-- XXX this entire switch statement should be changed around
-      so that it just defines the area to assign headers in, and the
-      direction to do the assigning in, and then defers to a set of
-      steps below it that then does the assigning. Then, we can
-      support colspaning/rowspaning headers and can stop when we hit
-      other headers, if we want to do that. --&gt;
-
       &lt;dl class=&quot;switch&quot;&gt;
 
        &lt;dt&gt;If it is in the &lt;em title=&quot;attr-th-scope-row&quot;&gt;row&lt;/em&gt; state&lt;/dt&gt;
 
        &lt;dd&gt;
 
-        &lt;p&gt;Assign the header cell to any data cells anchored at slots
-        with coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
-        title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-        title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for
-        any data cells corresponding to &lt;code&gt;td&lt;/code&gt; elements that
-        have a &lt;code title=&quot;attr-td-headers&quot;&gt;headers&lt;/code&gt; attribute
-        specified.&lt;/p&gt;
+        &lt;p&gt;Add all the data cells that cover slots with coordinates
+        (&lt;var title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
+        title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var
+        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var
+        title=&quot;&quot;&gt;header&lt;sub
+        title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+        title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
+        title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and
+        &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
+        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+        title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, to the &lt;var title=&quot;&quot;&gt;data
+        cells&lt;/var&gt; list.&lt;/p&gt;
 
        &lt;/dd&gt;
 
@@ -18416,18 +18432,19 @@
 
        &lt;dd&gt;
 
-        &lt;p&gt;Assign the header cell to any data cells anchored at slots
-        with coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-        title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-        title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for any
-        data cells corresponding to &lt;code&gt;td&lt;/code&gt; elements that have
-        a &lt;code title=&quot;attr-td-headers&quot;&gt;headers&lt;/code&gt; attribute
-        specified.&lt;/p&gt;
+        &lt;p&gt;Add all the data cells that cover slots with coordinates
+        (&lt;var title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
+        title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var
+        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+        title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
+        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var
+        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and
+        &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var
+        title=&quot;&quot;&gt;header&lt;sub
+        title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+        title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
+        title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, to the &lt;var
+        title=&quot;&quot;&gt;data cells&lt;/var&gt; list.&lt;/p&gt;
 
        &lt;/dd&gt;
 
@@ -18436,26 +18453,24 @@
        &lt;dd&gt;
 
         &lt;p&gt;If the header cell is not in a &lt;span
-        title=&quot;concept-row-group&quot;&gt;row group&lt;/span&gt;, then don't assign
-        the header cell to any data cells.&lt;/p&gt;
+        title=&quot;concept-row-group&quot;&gt;row group&lt;/span&gt;, then do
+        nothing.&lt;/p&gt;
 
-        &lt;p&gt;Otherwise, let (1, &lt;var title=&quot;&quot;&gt;group&lt;sub
+        &lt;p&gt;Otherwise, let (0, &lt;var title=&quot;&quot;&gt;group&lt;sub
         title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) be the slot at which the row group is
         anchored, let &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; be the number of rows
-        in the row group, and assign the header cell to any data cells
-        anchored at slots with coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
+        in the row group, and add all the data cells that cover slots
+        with coordinates (&lt;var title=&quot;&quot;&gt;slot&lt;sub
+        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
         title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
         title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-        title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
+        title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
         title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var
-        title=&quot;&quot;&gt;height&lt;/var&gt;&lt;/span&gt;, except for any data cells
-        corresponding to &lt;code&gt;td&lt;/code&gt; elements that have a &lt;code
-        title=&quot;attr-td-headers&quot;&gt;headers&lt;/code&gt; attribute
-        specified.&lt;/p&gt;
+        title=&quot;&quot;&gt;height&lt;/var&gt;&lt;/span&gt;, to the &lt;var title=&quot;&quot;&gt;data
+        cells&lt;/var&gt; list.&lt;/p&gt;
 
        &lt;/dd&gt;
 
@@ -18464,26 +18479,24 @@
        &lt;dd&gt;
 
         &lt;p&gt;If the header cell is not in a &lt;span
-        title=&quot;concept-column-group&quot;&gt;column group&lt;/span&gt;, then don't
-        assign the header cell to any data cells.&lt;/p&gt;
+        title=&quot;concept-column-group&quot;&gt;column group&lt;/span&gt;, then do
+        nothing.&lt;/p&gt;
 
         &lt;p&gt;Otherwise, let (&lt;var title=&quot;&quot;&gt;group&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, 1) be the slot at which the column
+        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, 0) be the slot at which the column
         group is anchored, let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; be the number
-        of columns in the column group, and assign the header cell to
-        any data cells anchored at slots with coordinates (&lt;var
-        title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
-        title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var
-        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-        title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-        title=&quot;&quot;&gt;group&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var
-        title=&quot;&quot;&gt;width&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
-        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub
-        title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for any data cells
-        corresponding to &lt;code&gt;td&lt;/code&gt; elements that have a &lt;code
-        title=&quot;attr-td-headers&quot;&gt;headers&lt;/code&gt; attribute
-        specified.&lt;/p&gt;
+        of columns in the column group, and add all the data cells
+        that cover slots with coordinates (&lt;var title=&quot;&quot;&gt;slot&lt;sub
+        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;group&lt;sub
+        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;width&lt;/var&gt;&lt;/span&gt; and
+        &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;y&lt;sub
+        title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, to the &lt;var title=&quot;&quot;&gt;data
+        cells&lt;/var&gt; list.&lt;/p&gt;
 
        &lt;/dd&gt;
 
@@ -18491,47 +18504,184 @@
 
        &lt;dd&gt;
 
-        &lt;p&gt;If the header cell is not in the first row of the table, or
-        not in the first cell of a row, then don't assign the header
-        cell to any data cells.&lt;/p&gt;
+        &lt;p&gt;Run these steps:&lt;/p&gt;
 
-        &lt;p class=&quot;big-issue&quot;&gt;This is shortly to be made better and
-        more magical.&lt;/p&gt;
+        &lt;ol&gt;
 
-        &lt;p&gt;Otherwise, if the header cell is in the first row of the
-        table, assign the header cell to any data cells anchored at
-        slots with coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
-        title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
-        title=&quot;&quot;&gt;y&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for any
-        data cells corresponding to &lt;code&gt;td&lt;/code&gt; elements that have
-        a &lt;code title=&quot;attr-td-headers&quot;&gt;headers&lt;/code&gt; attribute
-        specified.&lt;/p&gt;
+         &lt;li&gt;
 
-        &lt;p&gt;Otherwise, the header cell is in the first column of the
-        table; assign the header cell to any data cells anchored at
-        slots with coordinates (&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;data&lt;sub
-        title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
-        title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
-        title=&quot;&quot;&gt;data&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
-        title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, except for
-        any data cells corresponding to &lt;code&gt;td&lt;/code&gt; elements that
-        have a &lt;code title=&quot;attr-td-headers&quot;&gt;headers&lt;/code&gt; attribute
-        specified.&lt;/p&gt;
+          &lt;p&gt;If the header cell is &lt;span&gt;equivalent to a wide
+          cell&lt;/span&gt;, let &lt;var title=&quot;&quot;&gt;header&lt;sub
+          title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt; equal &lt;span&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub
+          title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;header&lt;sub
+          title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;. &lt;a
+          href=&quot;#refsUNICODE&quot;&gt;[UNICODE]&lt;/a&gt;&lt;/p&gt;
 
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; equal &lt;span&gt;&lt;var
+          title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var
+          title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;i&gt;Horizontal&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; is equal to
+          &lt;var title=&quot;&quot;&gt;x&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;, then jump
+          down to the step below labelled &lt;i&gt;vertical&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;If there is a header cell anchored at (&lt;var
+          title=&quot;&quot;&gt;x&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;header&lt;sub
+          title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) with height &lt;var title=&quot;&quot;&gt;header&lt;sub
+          title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;, then jump down to the step
+          below labelled &lt;i&gt;vertical&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Add all the data cells that cover slots with coordinates
+          (&lt;var title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
+          title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var
+          title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+          title=&quot;&quot;&gt;x&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+          title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+          title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
+          title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var
+          title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, to
+          the &lt;var title=&quot;&quot;&gt;data cells&lt;/var&gt; list.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Increase &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; by 1.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Jump up to the step above labelled &lt;i&gt;horizontal&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; equal &lt;var title=&quot;&quot;&gt;header&lt;sub
+          title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;i&gt;Vertical&lt;/i&gt;: let &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; equal
+          &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var
+          title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;If &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; is equal to &lt;var title=&quot;&quot;&gt;y&lt;sub
+          title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;, then jump to the step below
+          labelled &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;If there is a header cell &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt;
+          anchored at (&lt;var title=&quot;&quot;&gt;header&lt;sub
+          title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;), then follow
+          these substeps:&lt;/p&gt;
+
+          &lt;ol&gt;
+
+           &lt;li&gt;
+
+            &lt;p&gt;If the header cell &lt;var title=&quot;&quot;&gt;cell&lt;/var&gt; is
+            &lt;span&gt;equivalent to a wide cell&lt;/span&gt;, then let &lt;var
+            title=&quot;&quot;&gt;width&lt;/var&gt; be &lt;span&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub
+            title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;header&lt;sub
+            title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;. Otherwise, let &lt;var
+            title=&quot;&quot;&gt;width&lt;/var&gt; be the width of the header cell &lt;var
+            title=&quot;&quot;&gt;cell&lt;/var&gt;.&lt;/p&gt;
+
+           &lt;/li&gt;
+
+           &lt;li&gt;
+
+            &lt;p&gt;If &lt;var title=&quot;&quot;&gt;width&lt;/var&gt; is equal to &lt;var
+            title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;, then jump
+            to the step below labelled &lt;i&gt;end&lt;/i&gt;.&lt;/p&gt;
+
+           &lt;/li&gt;
+
+          &lt;/ol&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Add all the data cells that cover slots with coordinates
+          (&lt;var title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var
+          title=&quot;&quot;&gt;slot&lt;sub title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var
+          title=&quot;&quot;&gt;header&lt;sub
+          title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+          title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var
+          title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var
+          title=&quot;&quot;&gt;header&lt;sub title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and
+          &lt;span&gt;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+          title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+          title=&quot;&quot;&gt;y&lt;/var&gt;&lt;/span&gt;, to the &lt;var title=&quot;&quot;&gt;data
+          cells&lt;/var&gt; list.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Increase &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; by 1.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Jump up to the step above labelled &lt;i&gt;vertical&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;i&gt;End&lt;/i&gt;: Coalesce all the duplicate entries in the
+          &lt;var title=&quot;&quot;&gt;data cells&lt;/var&gt; list, so that each data cell
+          is only present once, in tree order.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+        &lt;/ol&gt;
+
        &lt;/dd&gt;
 
       &lt;/dl&gt;
 
      &lt;/li&gt;
 
+     &lt;li&gt;
+
+      &lt;p&gt;Assign the header cell to all the data cells &lt;var
+      title=&quot;&quot;&gt;data cells&lt;/var&gt; that correspond to &lt;code&gt;td&lt;/code&gt;
+      elements that do not have a &lt;code
+      title=&quot;attr-td-headers&quot;&gt;headers&lt;/code&gt; attribute specified.&lt;/p&gt;
+
+     &lt;/li&gt;
+
     &lt;/ol&gt;
 
    &lt;/li&gt;
@@ -18591,7 +18741,34 @@
 
   &lt;/ol&gt;
 
+  &lt;p&gt;A header cell anchored at (&lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;) with width &lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt; and height &lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt; is said to be &lt;dfn&gt;equivalent to a wide
+  cell&lt;/dfn&gt; if all the slots with coordinates (&lt;var title=&quot;&quot;&gt;slot&lt;sub
+  title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;slot&lt;sub
+  title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;), where &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+  title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;x&lt;sub
+  title=&quot;&quot;&gt;width&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;slot&lt;sub
+  title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;y&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;header&lt;sub
+  title=&quot;&quot;&gt;height&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, are all either empty or covered
+  by &lt;span title=&quot;empty data cell&quot;&gt;empty data cells&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;A data cell is said to be an &lt;dfn&gt;empty data cell&lt;/dfn&gt; if it
+  contains no elements and its text content, if any, consists only of
+  characters in the Unicode character class Zs. &lt;a
+  href=&quot;#refsUNICODE&quot;&gt;[UNICODE]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;User agents may remove &lt;span title=&quot;empty data cell&quot;&gt;empty data
+  cells&lt;/span&gt; when analysing data in a &lt;span title=&quot;concept
+  table&quot;&gt;table&lt;/span&gt;.&lt;/p&gt;
+
+
   &lt;h3 id=&quot;forms&quot;&gt;Forms&lt;/h3&gt;
   &lt;!-- XXX everything in WF2 --&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008278.html">[html5] r1376 - /
</A></li>
	<LI>Next message: <A HREF="008280.html">[html5] r1378 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8279">[ date ]</a>
              <a href="thread.html#8279">[ thread ]</a>
              <a href="subject.html#8279">[ subject ]</a>
              <a href="author.html#8279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
