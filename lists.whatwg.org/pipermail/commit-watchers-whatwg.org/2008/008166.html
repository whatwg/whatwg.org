<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1258 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1258%20-%20/&In-Reply-To=%3C20080227025310.7FFBD139DDD%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008165.html">
   <LINK REL="Next"  HREF="008167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1258 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1258%20-%20/&In-Reply-To=%3C20080227025310.7FFBD139DDD%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1258 - /">whatwg at whatwg.org
       </A><BR>
    <I>Tue Feb 26 18:53:10 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008165.html">[html5] r1257 - /
</A></li>
        <LI>Next message: <A HREF="008167.html">[html5] r1259 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8166">[ date ]</a>
              <a href="thread.html#8166">[ thread ]</a>
              <a href="subject.html#8166">[ subject ]</a>
              <a href="author.html#8166">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-02-26 18:53:09 -0800 (Tue, 26 Feb 2008)
New Revision: 1258

Modified:
   index
   source
Log:
[at] (0) Make the 'Determining which heading and section applies to a particular node' subsection redundant; fix up some cross-reference issues that were caused by the recent outline algorithm rewrite.

Modified: index
===================================================================
--- index	2008-02-27 02:38:37 UTC (rev 1257)
+++ index	2008-02-27 02:53:09 UTC (rev 1258)
@@ -462,12 +462,8 @@
          &lt;li&gt;&lt;a href=&quot;#outlines&quot;&gt;&lt;span class=secno&gt;3.8.10.1. &lt;/span&gt;Creating
           an outline&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#associatedSection&quot;&gt;&lt;span class=secno&gt;3.8.10.2.
-          &lt;/span&gt;Determining which heading and section applies to a
-          particular node&lt;/a&gt;
-
-         &lt;li&gt;&lt;a href=&quot;#distinguishing&quot;&gt;&lt;span class=secno&gt;3.8.10.3.
-          &lt;/span&gt;Distinguishing site-wide headers from page headers&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#distinguishing&quot;&gt;&lt;span class=secno&gt;3.8.10.2.
+          &lt;/span&gt;Distinguishing site-wide headings from page headings&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
@@ -2032,8 +2028,8 @@
      conformance should act in accordance to the semantics of the documents
      that they process.&lt;/p&gt;
 
-    &lt;p class=example&gt;A tool that generates &lt;span title=&quot;sections and
-     headings&quot;&gt;document outlines&lt;/span&gt; but increases the nesting level for
+    &lt;p class=example&gt;A tool that generates &lt;a href=&quot;#outline&quot;
+     title=outline&gt;document outlines&lt;/a&gt; but increases the nesting level for
      each paragraph and does not increase the nesting level for each section
      would not be conforming.&lt;/p&gt;
 
@@ -8871,16 +8867,19 @@
 
   &lt;h5 id=outlines&gt;&lt;span class=secno&gt;3.8.10.1. &lt;/span&gt;Creating an outline&lt;/h5&gt;
 
-  &lt;p&gt;This section defines an algorithm for creating an outline for a
-   &lt;span&gt;sectioning content element or a &lt;a href=&quot;#sectioning1&quot;&gt;sectioning
-   root&lt;/a&gt; element. It is defined in terms of a walk over the nodes of a DOM
-   tree, in tree order, with each node being visited when it is
-   &lt;i&gt;entered&lt;/i&gt; and when it is &lt;i&gt;exited&lt;/i&gt; during the walk.&lt;/span&gt;
+  &lt;p&gt;This section defines an algorithm for creating an &lt;dfn
+   id=outline&gt;outline&lt;/dfn&gt; for a &lt;span&gt;sectioning content element or a &lt;a
+   href=&quot;#sectioning1&quot;&gt;sectioning root&lt;/a&gt; element. It is defined in terms of
+   a walk over the nodes of a DOM tree, in tree order, with each node being
+   visited when it is &lt;i&gt;entered&lt;/i&gt; and when it is &lt;i&gt;exited&lt;/i&gt; during the
+   walk.&lt;/span&gt;
 
   &lt;p&gt;The outline for a &lt;span&gt;sectioning content element or a &lt;a
    href=&quot;#sectioning1&quot;&gt;sectioning root&lt;/a&gt; element consists of a list of one
    or more potentially nested sections. Each section can have zero or one
-   heading associated with it.&lt;/span&gt;
+   heading associated with it. The algorithm for the outline also associates
+   each node in the DOM tree with a particular section and potentially a
+   heading.&lt;/span&gt;
 
   &lt;p&gt;The algorithm that must be followed during a walk of a DOM subtree
    rooted at a &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt; element or a &lt;a
@@ -9019,9 +9018,10 @@
       &lt;p&gt;Do nothing.
     &lt;/dl&gt;
 
-    &lt;p&gt;In addition, whenever you exit a node, after doing the steps above, if
-     &lt;var title=&quot;&quot;&gt;current section&lt;/var&gt; is not null, associate the node with
-     the section &lt;var title=&quot;&quot;&gt;current section&lt;/var&gt;.&lt;/p&gt;
+    &lt;p id=associatedSection&gt;In addition, whenever you exit a node, after
+     doing the steps above, if &lt;var title=&quot;&quot;&gt;current section&lt;/var&gt; is not
+     null, associate the node with the section &lt;var title=&quot;&quot;&gt;current
+     section&lt;/var&gt;.&lt;/p&gt;
 
    &lt;li&gt;
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;current outlinee&lt;/var&gt; is null, then there was no
@@ -9034,6 +9034,10 @@
      above with &lt;var title=&quot;&quot;&gt;current outlinee&lt;/var&gt; as their section.
 
    &lt;li&gt;
+    &lt;p&gt;Associate all nodes with the heading of the section which which they
+     are associated, if any.
+
+   &lt;li&gt;
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;current outlinee&lt;/var&gt; is &lt;a href=&quot;#the-body0&quot;&gt;the
      &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;, then the outline created for that element
      is the outline of the entire document.
@@ -9086,269 +9090,41 @@
 }&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h5 id=associatedSection&gt;&lt;span class=secno&gt;3.8.10.2. &lt;/span&gt;Determining
-   which heading and section applies to a particular node&lt;/h5&gt;
+  &lt;h5 id=distinguishing&gt;&lt;span class=secno&gt;3.8.10.2. &lt;/span&gt;Distinguishing
+   site-wide headings from page headings&lt;/h5&gt;
 
-  &lt;p class=big-issue&gt;This section will be rewritten at some point. The
-   algorithm likely won't change, but its description will be dramatically
-   simplified.
+  &lt;p&gt;Given the &lt;a href=&quot;#outline&quot;&gt;outline&lt;/a&gt; of a document, but ignoring any
+   sections created for &lt;code&gt;&lt;a href=&quot;#nav&quot;&gt;nav&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
+   href=&quot;#aside&quot;&gt;aside&lt;/a&gt;&lt;/code&gt; elements, and any of their descendants, if
+   the only root of the tree is &lt;a href=&quot;#the-body0&quot;&gt;the &lt;code&gt;body&lt;/code&gt;
+   element&lt;/a&gt;'s section, and it has only a single subsection which is
+   created by an &lt;code&gt;&lt;a href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; element, then
+   the heading of &lt;a href=&quot;#the-body0&quot;&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;
+   should be assumed to be a site-wide heading, and the heading of the
+   &lt;code&gt;&lt;a href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; element should be assumed to
+   be the page's heading.
 
-  &lt;p&gt;Given a particular node, user agents must use the following algorithm,
-   &lt;em&gt;in the given order&lt;/em&gt;, to determine which heading and section the
-   node is most closely associated with. The processing of this algorithm
-   must stop as soon as the associated section and heading are established
-   (even if they are established to be nothing).
-
-  &lt;ol&gt;
-   &lt;li&gt;If the node has an ancestor that is a &lt;code&gt;&lt;a
-    href=&quot;#header&quot;&gt;header&lt;/a&gt;&lt;/code&gt; element, then the associated heading is
-    the most distant such ancestor. The associated section is that &lt;code&gt;&lt;a
-    href=&quot;#header&quot;&gt;header&lt;/a&gt;&lt;/code&gt;'s associated section (i.e. repeat this
-    algorithm for that &lt;code&gt;&lt;a href=&quot;#header&quot;&gt;header&lt;/a&gt;&lt;/code&gt;).
-
-   &lt;li&gt;If the node has an ancestor that is an &lt;code&gt;&lt;a
-    href=&quot;#h1&quot;&gt;h1&lt;/a&gt;&lt;/code&gt;-&lt;code&gt;&lt;a href=&quot;#h6&quot;&gt;h6&lt;/a&gt;&lt;/code&gt; element, then
-    the associated heading is the most distant such ancestor. The associated
-    section is that heading's section (i.e. repeat this algorithm for that
-    heading element).
-
-   &lt;li&gt;If the node is an &lt;code&gt;&lt;a href=&quot;#h1&quot;&gt;h1&lt;/a&gt;&lt;/code&gt;-&lt;code&gt;&lt;a
-    href=&quot;#h6&quot;&gt;h6&lt;/a&gt;&lt;/code&gt; element or a &lt;code&gt;&lt;a
-    href=&quot;#header&quot;&gt;header&lt;/a&gt;&lt;/code&gt; element, then the associated heading is
-    the element itself. The UA must then generate the &lt;a
-    href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt; described in the previous
-    section, rooted at the nearest section ancestor (or the &lt;a
-    href=&quot;#root-element&quot;&gt;root element&lt;/a&gt; if there is no such ancestor). If
-    the parent of the heading in that hypothetical tree is an element in the
-    real document tree, then that element is the associated section.
-    Otherwise, there is no associated section element.
-
-   &lt;li&gt;If the node is an element of &lt;a href=&quot;#sectioning0&quot;&gt;sectioning
-    content&lt;/a&gt;, then the associated section is itself. The UA must then
-    generate the &lt;a href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt; described
-    in the previous section, rooted at the section itself. If the section
-    element, in that hypothetical tree, has a child element that is an
-    &lt;code&gt;&lt;a href=&quot;#h1&quot;&gt;h1&lt;/a&gt;&lt;/code&gt;-&lt;code&gt;&lt;a href=&quot;#h6&quot;&gt;h6&lt;/a&gt;&lt;/code&gt;
-    element or a &lt;code&gt;&lt;a href=&quot;#header&quot;&gt;header&lt;/a&gt;&lt;/code&gt; element, then that
-    element is the associated heading. Otherwise, there is no associated
-    heading element.
-
-   &lt;li&gt;If the node is a &lt;code&gt;&lt;a href=&quot;#footer&quot;&gt;footer&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
-    href=&quot;#address&quot;&gt;address&lt;/a&gt;&lt;/code&gt; element, then the associated section
-    is the nearest ancestor element of &lt;a href=&quot;#sectioning0&quot;&gt;sectioning
-    content&lt;/a&gt;, if there is one. The node's associated heading is the same
-    as that element of &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;'s
-    associated heading (i.e. repeat this algorithm for that element of &lt;a
-    href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;). If there is no ancestor
-    element of &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;, the element has
-    no associated section nor an associated heading.
-
-   &lt;li&gt;Otherwise, the node is just a normal node, and the document has to be
-    examined more closely to determine its section and heading. Create a view
-    rooted at the nearest ancestor element of &lt;a
-    href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt; (or the &lt;a
-    href=&quot;#root-element&quot;&gt;root element&lt;/a&gt; if there is none) that has just
-    &lt;code&gt;&lt;a href=&quot;#h1&quot;&gt;h1&lt;/a&gt;&lt;/code&gt;-&lt;code&gt;&lt;a href=&quot;#h6&quot;&gt;h6&lt;/a&gt;&lt;/code&gt;
-    elements, &lt;code&gt;&lt;a href=&quot;#header&quot;&gt;header&lt;/a&gt;&lt;/code&gt; elements, the node
-    itself, and elements of &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;
-    other than &lt;code&gt;&lt;a href=&quot;#blockquote&quot;&gt;blockquote&lt;/a&gt;&lt;/code&gt; elements.
-    (Descendants of any of the nodes in this view can be ignored, as can any
-    node later in the tree than the node in question, as the algorithm below
-    merely walks backwards up this view.)
-
-   &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be an iterator for this view, initialised at
-    the node in question.
-
-   &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; be the current best candidate heading,
-    initially null, and initially not used. It is used when top-level heading
-    candidates are to be searched for (see below).
-
-   &lt;li&gt;Repeat these steps (which effectively goes backwards through the
-    node's previous siblings) until an answer is found:
-    &lt;ol&gt;
-     &lt;li&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; points to a node with no previous sibling,
-      and &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is null, then return the node's parent node
-      as the answer. If the node has no parent node, return null as the
-      answer.
-
-     &lt;li&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; points to a node with no
-      previous sibling, return &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; as the answer.
-
-     &lt;li&gt;Adjust &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; so that it points to the previous
-      sibling of the current position.
-
-     &lt;li&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is pointing at an &lt;code&gt;&lt;a
-      href=&quot;#h1&quot;&gt;h1&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=&quot;#header&quot;&gt;header&lt;/a&gt;&lt;/code&gt;
-      element, then return that element as the answer.
-
-     &lt;li&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is pointing at an &lt;code&gt;&lt;a
-      href=&quot;#h2&quot;&gt;h2&lt;/a&gt;&lt;/code&gt;-&lt;code&gt;&lt;a href=&quot;#h6&quot;&gt;h6&lt;/a&gt;&lt;/code&gt; element, and
-      heading candidates are not being searched for, then return that element
-      as the answer.
-
-     &lt;li&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is pointing at an &lt;code&gt;&lt;a
-      href=&quot;#h2&quot;&gt;h2&lt;/a&gt;&lt;/code&gt;-&lt;code&gt;&lt;a href=&quot;#h6&quot;&gt;h6&lt;/a&gt;&lt;/code&gt; element, and
-      either &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is still null, or &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is
-      a heading of lower &lt;a href=&quot;#rank&quot;&gt;rank&lt;/a&gt; than this one, then set
-      &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; to be this element, and continue going backwards
-      through the previous siblings.
-
-     &lt;li&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is pointing at an element of &lt;a
-      href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;, then from this point on
-      top-level heading candidates are being searched for. (Specifically, we
-      are looking for the nearest top-level header for the current section.)
-      Continue going backwards through the previous siblings.
-    &lt;/ol&gt;
-
-   &lt;li&gt;If the answer from the previous step (the loop) is null, which can
-    only happen if the node has no preceeding headings and is not contained
-    in an element of &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;, then
-    there is no associated heading and no associated section.
-
-   &lt;li&gt;Otherwise, if the answer from the earlier loop step is an element of
-    &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;, then the associated
-    section is that element and the associated heading is that element of &lt;a
-    href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;'s associated heading (i.e.
-    repeat this algorithm for that section).
-
-   &lt;li&gt;Otherwise, if the answer from that same earlier step is an &lt;code&gt;&lt;a
-    href=&quot;#h1&quot;&gt;h1&lt;/a&gt;&lt;/code&gt;-&lt;code&gt;&lt;a href=&quot;#h6&quot;&gt;h6&lt;/a&gt;&lt;/code&gt; element or a
-    &lt;code&gt;&lt;a href=&quot;#header&quot;&gt;header&lt;/a&gt;&lt;/code&gt; element, then the associated
-    heading is that element and the associated section is that heading
-    element's associated section (i.e. repeat this algorithm for that
-    heading).
-  &lt;/ol&gt;
-
-  &lt;p class=note&gt;Not all nodes have an associated header or section. For
-   example, if a section is implied, as when multiple headers are found in
-   one element of &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt;, then a node
-   in that section has an anonymous associated section (its section is not
-   represented by a real element), and the algorithm above does not associate
-   that node with any particular element of &lt;a href=&quot;#sectioning0&quot;&gt;sectioning
-   content&lt;/a&gt;.
-
-  &lt;div class=example&gt;
-   &lt;p&gt;For the following fragment:&lt;/p&gt;
-
-   &lt;pre&gt;&lt;body&gt;
- &lt;h1&gt;X&lt;/h1&gt;
- &lt;h2&gt;X&lt;/h2&gt;
- &lt;blockquote&gt;
-  &lt;h3&gt;X&lt;/h3&gt;
- &lt;/blockquote&gt;
- &lt;p id=&quot;a&quot;&gt;X&lt;/p&gt;
- &lt;h4&gt;Text Node A&lt;/h4&gt;
- &lt;section&gt;
-  &lt;h5&gt;X&lt;/h5&gt;
- &lt;/section&gt;
- &lt;p&gt;Text Node B&lt;/p&gt;
-&lt;/body&gt;&lt;/pre&gt;
-
-   &lt;p&gt;The associations are as follows (not all associations are shown):&lt;/p&gt;
-
-   &lt;table&gt;
-    &lt;thead&gt;
-     &lt;tr&gt;
-      &lt;th&gt;Node
-
-      &lt;th&gt;Associated heading
-
-      &lt;th&gt;Associated section
-
-    &lt;tbody&gt;
-     &lt;tr&gt;
-      &lt;td&gt;&lt;code&gt;&lt;body&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;h1&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;body&gt;&lt;/code&gt;
-
-     &lt;tr&gt;
-      &lt;td&gt;&lt;code&gt;&lt;h1&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;h1&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;body&gt;&lt;/code&gt;
-
-     &lt;tr&gt;
-      &lt;td&gt;&lt;code&gt;&lt;h2&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;h2&gt;&lt;/code&gt;
-
-      &lt;td&gt;None.
-
-     &lt;tr&gt;
-      &lt;td&gt;&lt;code&gt;&lt;blockquote&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;h2&gt;&lt;/code&gt;
-
-      &lt;td&gt;None.
-
-     &lt;tr&gt;
-      &lt;td&gt;&lt;code&gt;&lt;h3&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;h3&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;blockquote&gt;&lt;/code&gt;
-
-     &lt;tr&gt;
-      &lt;td&gt;&lt;code&gt;&lt;p id=&quot;a&quot;&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;h2&gt;&lt;/code&gt;
-
-      &lt;td&gt;None.
-
-     &lt;tr&gt;
-      &lt;td&gt;&lt;code&gt;Text Node A&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;h4&gt;&lt;/code&gt;
-
-      &lt;td&gt;None.
-
-     &lt;tr&gt;
-      &lt;td&gt;&lt;code&gt;Text Node B&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;h1&gt;&lt;/code&gt;
-
-      &lt;td&gt;&lt;code&gt;&lt;body&gt;&lt;/code&gt;
-   &lt;/table&gt;
-  &lt;/div&gt;
-
-  &lt;h5 id=distinguishing&gt;&lt;span class=secno&gt;3.8.10.3. &lt;/span&gt;Distinguishing
-   site-wide headers from page headers&lt;/h5&gt;
-
-  &lt;p&gt;Given the &lt;a href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt;, but
-   ignoring any sections created for &lt;code&gt;&lt;a href=&quot;#nav&quot;&gt;nav&lt;/a&gt;&lt;/code&gt; and
-   &lt;code&gt;&lt;a href=&quot;#aside&quot;&gt;aside&lt;/a&gt;&lt;/code&gt; elements, and any of their
-   descendants, if the root of the tree is &lt;a href=&quot;#the-body0&quot;&gt;the
-   &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;'s section, and it has only a single
-   subsection which is created by an &lt;code&gt;&lt;a
-   href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; element, then the header of &lt;a
-   href=&quot;#the-body0&quot;&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt; should be assumed to
-   be a site-wide header, and the header of the &lt;code&gt;&lt;a
-   href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; element should be assumed to be the
-   page's header.
-
   &lt;p&gt;If a page starts with a heading that is common to the whole site, the
    document must be authored such that, in the document's &lt;a
-   href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt;, ignoring any sections
-   created for &lt;code&gt;&lt;a href=&quot;#nav&quot;&gt;nav&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
-   href=&quot;#aside&quot;&gt;aside&lt;/a&gt;&lt;/code&gt; elements and any of their descendants, the
-   root of the tree is &lt;a href=&quot;#the-body0&quot;&gt;the &lt;code&gt;body&lt;/code&gt;
-   element&lt;/a&gt;'s section, its heading is the site-wide heading, &lt;a
-   href=&quot;#the-body0&quot;&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt; has just one
-   subsection, that subsection is created by an &lt;code&gt;&lt;a
-   href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; element, and that &lt;code&gt;&lt;a
-   href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt;'s header is the page heading.
+   href=&quot;#outline&quot;&gt;outline&lt;/a&gt;, ignoring any sections created for &lt;code&gt;&lt;a
+   href=&quot;#nav&quot;&gt;nav&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#aside&quot;&gt;aside&lt;/a&gt;&lt;/code&gt;
+   elements and any of their descendants, the tree has only one root section,
+   &lt;a href=&quot;#the-body0&quot;&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;'s section, its
+   heading is the site-wide heading, &lt;a href=&quot;#the-body0&quot;&gt;the
+   &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt; has just one subsection, that subsection is
+   created by an &lt;code&gt;&lt;a href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; element, and
+   that &lt;code&gt;&lt;a href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt;'s heading is the page
+   heading.
 
   &lt;p&gt;If a page does not contain a site-wide heading, then the page must be
-   authored such that, in the document's &lt;a href=&quot;#outlines&quot;&gt;hypothetical
-   section tree&lt;/a&gt;, ignoring any sections created for &lt;code&gt;&lt;a
-   href=&quot;#nav&quot;&gt;nav&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#aside&quot;&gt;aside&lt;/a&gt;&lt;/code&gt;
-   elements and any of their descendants, either &lt;a href=&quot;#the-body0&quot;&gt;the
-   &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt; has no subsections, or it has more than one
-   subsection, or it has a single subsection but that subsection is not
-   created by an &lt;code&gt;&lt;a href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; element.
+   authored such that, in the document's &lt;a href=&quot;#outline&quot;&gt;outline&lt;/a&gt;,
+   ignoring any sections created for &lt;code&gt;&lt;a href=&quot;#nav&quot;&gt;nav&lt;/a&gt;&lt;/code&gt; and
+   &lt;code&gt;&lt;a href=&quot;#aside&quot;&gt;aside&lt;/a&gt;&lt;/code&gt; elements and any of their
+   descendants, either &lt;a href=&quot;#the-body0&quot;&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;
+   has no subsections, or it has more than one subsection, or it has a single
+   subsection but that subsection is not created by an &lt;code&gt;&lt;a
+   href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; element, or there is more than one
+   section at the root of the outline.
 
   &lt;p class=note&gt;Conceptually, a site is thus a document with many articles
    &mdash; when those articles are split into many pages, the heading of the

Modified: source
===================================================================
--- source	2008-02-27 02:38:37 UTC (rev 1257)
+++ source	2008-02-27 02:53:09 UTC (rev 1258)
@@ -381,10 +381,10 @@
     them for conformance should act in accordance to the semantics of
     the documents that they process.&lt;/p&gt;
 
-    &lt;p class=&quot;example&quot;&gt;A tool that generates &lt;span title=&quot;sections and
-    headings&quot;&gt;document outlines&lt;/span&gt; but increases the nesting level
-    for each paragraph and does not increase the nesting level for
-    each section would not be conforming.&lt;/p&gt;
+    &lt;p class=&quot;example&quot;&gt;A tool that generates &lt;span
+    title=&quot;outline&quot;&gt;document outlines&lt;/span&gt; but increases the nesting
+    level for each paragraph and does not increase the nesting level
+    for each section would not be conforming.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -7195,16 +7195,19 @@
 
   &lt;h5 id=&quot;outlines&quot;&gt;Creating an outline&lt;/h5&gt;
 
-  &lt;p&gt;This section defines an algorithm for creating an outline for a
-  &lt;span&gt;sectioning content&lt;/code&gt; element or a &lt;span&gt;sectioning
-  root&lt;/span&gt; element. It is defined in terms of a walk over the nodes
-  of a DOM tree, in tree order, with each node being visited when it
-  is &lt;i&gt;entered&lt;/i&gt; and when it is &lt;i&gt;exited&lt;/i&gt; during the walk.&lt;/p&gt;
+  &lt;p&gt;This section defines an algorithm for creating an
+  &lt;dfn&gt;outline&lt;/dfn&gt; for a &lt;span&gt;sectioning content&lt;/code&gt; element or
+  a &lt;span&gt;sectioning root&lt;/span&gt; element. It is defined in terms of a
+  walk over the nodes of a DOM tree, in tree order, with each node
+  being visited when it is &lt;i&gt;entered&lt;/i&gt; and when it is &lt;i&gt;exited&lt;/i&gt;
+  during the walk.&lt;/p&gt;
 
   &lt;p&gt;The outline for a &lt;span&gt;sectioning content&lt;/code&gt; element or a
   &lt;span&gt;sectioning root&lt;/span&gt; element consists of a list of one or
   more potentially nested sections. Each section can have zero or one
-  heading associated with it.&lt;/p&gt;
+  heading associated with it. The algorithm for the outline also
+  associates each node in the DOM tree with a particular section and
+  potentially a heading.&lt;/p&gt;
 
   &lt;p&gt;The algorithm that must be followed during a walk of a DOM
   subtree rooted at a &lt;span&gt;sectioning content&lt;/span&gt; element or a
@@ -7364,10 +7367,10 @@
 
     &lt;/dl&gt;
 
-    &lt;p&gt;In addition, whenever you exit a node, after doing the steps
-    above, if &lt;var title=&quot;&quot;&gt;current section&lt;/var&gt; is not null,
-    associate the node with the section &lt;var title=&quot;&quot;&gt;current
-    section&lt;/var&gt;.&lt;/p&gt;
+    &lt;p id=&quot;associatedSection&quot;&gt;In addition, whenever you exit a node,
+    after doing the steps above, if &lt;var title=&quot;&quot;&gt;current
+    section&lt;/var&gt; is not null, associate the node with the section
+    &lt;var title=&quot;&quot;&gt;current section&lt;/var&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -7380,6 +7383,9 @@
    the steps above with &lt;var title=&quot;&quot;&gt;current outlinee&lt;/var&gt; as their
    section.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Associate all nodes with the heading of the section which
+   which they are associated, if any.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;current outlinee&lt;/var&gt; is &lt;span&gt;the
    &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;, then the outline created for that
    element is the outline of the entire document.&lt;/p&gt;&lt;/li&gt;
@@ -7436,222 +7442,37 @@
   &lt;/div&gt;
 
 
+  &lt;h5&gt;Distinguishing site-wide headings from page headings&lt;/h5&gt;
 
-  &lt;h5 id=&quot;associatedSection&quot;&gt;Determining which heading and section
-  applies to a particular node&lt;/h5&gt;
+  &lt;p&gt;Given the &lt;span&gt;outline&lt;/span&gt; of a document, but ignoring any
+  sections created for &lt;code&gt;nav&lt;/code&gt; and &lt;code&gt;aside&lt;/code&gt;
+  elements, and any of their descendants, if the only root of the tree
+  is &lt;span&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;'s section, and it has
+  only a single subsection which is created by an &lt;code&gt;article&lt;/code&gt;
+  element, then the heading of &lt;span&gt;the &lt;code&gt;body&lt;/code&gt;
+  element&lt;/span&gt; should be assumed to be a site-wide heading, and the
+  heading of the &lt;code&gt;article&lt;/code&gt; element should be assumed to be
+  the page's heading.&lt;/p&gt;
 
-  &lt;p class=&quot;big-issue&quot;&gt;This section will be rewritten at some
-  point. The algorithm likely won't change, but its description will
-  be dramatically simplified.&lt;/p&gt;
-
-  &lt;p&gt;Given a particular node, user agents must use the following
-  algorithm, &lt;em&gt;in the given order&lt;/em&gt;, to determine which heading
-  and section the node is most closely associated with. The processing
-  of this algorithm must stop as soon as the associated section and
-  heading are established (even if they are established to be
-  nothing).&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If the node has an ancestor that is a &lt;code&gt;header&lt;/code&gt;
-   element, then the associated heading is the most distant such
-   ancestor. The associated section is that &lt;code&gt;header&lt;/code&gt;'s
-   associated section (i.e. repeat this algorithm for that
-   &lt;code&gt;header&lt;/code&gt;).&lt;/li&gt;
-
-   &lt;li&gt;If the node has an ancestor that is an
-   &lt;code&gt;h1&lt;/code&gt;-&lt;code&gt;h6&lt;/code&gt; element, then the associated
-   heading is the most distant such ancestor. The associated section
-   is that heading's section (i.e. repeat this algorithm for that
-   heading element).&lt;/li&gt;
-
-   &lt;li&gt;If the node is an &lt;code&gt;h1&lt;/code&gt;-&lt;code&gt;h6&lt;/code&gt; element or a
-   &lt;code&gt;header&lt;/code&gt; element, then the associated heading is the
-   element itself. The UA must then generate the &lt;a
-   href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt; described in the
-   previous section, rooted at the nearest section ancestor (or the
-   &lt;span&gt;root element&lt;/span&gt; if there is no such ancestor). If the
-   parent of the heading in that hypothetical tree is an element in
-   the real document tree, then that element is the associated
-   section. Otherwise, there is no associated section element.&lt;/li&gt;
-
-   &lt;li&gt;If the node is an element of &lt;span&gt;sectioning content&lt;/span&gt;,
-   then the associated section is itself. The UA must then generate
-   the &lt;a href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt; described in
-   the previous section, rooted at the section itself. If the section
-   element, in that hypothetical tree, has a child element that is an
-   &lt;code&gt;h1&lt;/code&gt;-&lt;code&gt;h6&lt;/code&gt; element or a &lt;code&gt;header&lt;/code&gt;
-   element, then that element is the associated heading. Otherwise,
-   there is no associated heading element.&lt;/li&gt;
-
-   &lt;li&gt;If the node is a &lt;code&gt;footer&lt;/code&gt; or &lt;code&gt;address&lt;/code&gt;
-   element, then the associated section is the nearest ancestor
-   element of &lt;span&gt;sectioning content&lt;/span&gt;, if there is one. The
-   node's associated heading is the same as that element of
-   &lt;span&gt;sectioning content&lt;/span&gt;'s associated heading (i.e.  repeat
-   this algorithm for that element of &lt;span&gt;sectioning
-   content&lt;/span&gt;). If there is no ancestor element of
-   &lt;span&gt;sectioning content&lt;/span&gt;, the element has no associated
-   section nor an associated heading.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, the node is just a normal node, and the document has
-   to be examined more closely to determine its section and heading.
-   Create a view rooted at the nearest ancestor element of
-   &lt;span&gt;sectioning content&lt;/span&gt; (or the &lt;span&gt;root element&lt;/span&gt;
-   if there is none) that has just &lt;code&gt;h1&lt;/code&gt;-&lt;code&gt;h6&lt;/code&gt;
-   elements, &lt;code&gt;header&lt;/code&gt; elements, the node itself, and
-   elements of &lt;span&gt;sectioning content&lt;/span&gt; other than
-   &lt;code&gt;blockquote&lt;/code&gt; elements. (Descendants of any of the nodes
-   in this view can be ignored, as can any node later in the tree than
-   the node in question, as the algorithm below merely walks backwards
-   up this view.)&lt;/li&gt;
-
-   &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be an iterator for this view,
-   initialised at the node in question.&lt;/li&gt;
-
-   &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; be the current best candidate
-   heading, initially null, and initially not used. It is used when
-   top-level heading candidates are to be searched for (see
-   below).&lt;/li&gt;
-
-   &lt;li&gt;Repeat these steps (which effectively goes backwards through
-   the node's previous siblings) until an answer is found:
-
-    &lt;ol&gt;
-
-     &lt;li&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; points to a node with no previous
-     sibling, and &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is null, then return the
-     node's parent node as the answer. If the node has no parent node,
-     return null as the answer.&lt;/li&gt;
-
-     &lt;li&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; points to a node with no
-     previous sibling, return &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; as the
-     answer.&lt;/li&gt;
-
-     &lt;li&gt;Adjust &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; so that it points to the
-     previous sibling of the current position.&lt;/li&gt;
-
-     &lt;li&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is pointing at an &lt;code&gt;h1&lt;/code&gt; or
-     &lt;code&gt;header&lt;/code&gt; element, then return that element as the
-     answer.&lt;/li&gt;
-
-     &lt;li&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is pointing at an
-     &lt;code&gt;h2&lt;/code&gt;-&lt;code&gt;h6&lt;/code&gt; element, and heading candidates
-     are not being searched for, then return that element as the
-     answer.&lt;/li&gt;
-
-     &lt;li&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is pointing at an
-     &lt;code&gt;h2&lt;/code&gt;-&lt;code&gt;h6&lt;/code&gt; element, and either &lt;var
-     title=&quot;&quot;&gt;c&lt;/var&gt; is still null, or &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is a
-     heading of lower &lt;span&gt;rank&lt;/span&gt; than this one, then set &lt;var
-     title=&quot;&quot;&gt;c&lt;/var&gt; to be this element, and continue going backwards
-     through the previous siblings.&lt;/li&gt;
-
-     &lt;li&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is pointing at an element of
-     &lt;span&gt;sectioning content&lt;/span&gt;, then from this point on
-     top-level heading candidates are being searched
-     for. (Specifically, we are looking for the nearest top-level
-     header for the current section.) Continue going backwards through
-     the previous siblings.&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;If the answer from the previous step (the loop) is null, which
-   can only happen if the node has no preceeding headings and is not
-   contained in an element of &lt;span&gt;sectioning content&lt;/span&gt;, then
-   there is no associated heading and no associated section.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, if the answer from the earlier loop step is an
-   element of &lt;span&gt;sectioning content&lt;/span&gt;, then the associated
-   section is that element and the associated heading is that element
-   of &lt;span&gt;sectioning content&lt;/span&gt;'s associated heading
-   (i.e. repeat this algorithm for that section).&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, if the answer from that same earlier step is an
-   &lt;code&gt;h1&lt;/code&gt;-&lt;code&gt;h6&lt;/code&gt; element or a &lt;code&gt;header&lt;/code&gt;
-   element, then the associated heading is that element and the
-   associated section is that heading element's associated section
-   (i.e. repeat this algorithm for that heading).&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Not all nodes have an associated header or section.
-  For example, if a section is implied, as when multiple headers are
-  found in one element of &lt;span&gt;sectioning content&lt;/span&gt;, then a node
-  in that section has an anonymous associated section (its section is
-  not represented by a real element), and the algorithm above does not
-  associate that node with any particular element of &lt;span&gt;sectioning
-  content&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;div class=&quot;example&quot;&gt;
-   &lt;p&gt;For the following fragment:&lt;/p&gt;
-   &lt;pre&gt;&lt;body&gt;
- &lt;h1&gt;X&lt;/h1&gt;
- &lt;h2&gt;X&lt;/h2&gt;
- &lt;blockquote&gt;
-  &lt;h3&gt;X&lt;/h3&gt;
- &lt;/blockquote&gt;
- &lt;p id=&quot;a&quot;&gt;X&lt;/p&gt;
- &lt;h4&gt;Text Node A&lt;/h4&gt;
- &lt;section&gt;
-  &lt;h5&gt;X&lt;/h5&gt;
- &lt;/section&gt;
- &lt;p&gt;Text Node B&lt;/p&gt;
-&lt;/body&gt;&lt;/pre&gt;
-   &lt;p&gt;The associations are as follows (not all associations are shown):&lt;/p&gt;
-   &lt;table&gt;
-    &lt;thead&gt;
-     &lt;tr&gt;
-      &lt;th&gt;Node&lt;/th&gt; &lt;th&gt;Associated heading&lt;/th&gt; &lt;th&gt;Associated section&lt;/th&gt;
-     &lt;/tr&gt;
-    &lt;/thead&gt;
-    &lt;tbody&gt;
-     &lt;tr&gt; &lt;td&gt;&lt;code&gt;&lt;body&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;h1&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;body&gt;&lt;/code&gt;&lt;/td&gt; &lt;/tr&gt;
-     &lt;tr&gt; &lt;td&gt;&lt;code&gt;&lt;h1&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;h1&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;body&gt;&lt;/code&gt;&lt;/td&gt; &lt;/tr&gt;
-     &lt;tr&gt; &lt;td&gt;&lt;code&gt;&lt;h2&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;h2&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;None.&lt;/td&gt; &lt;/tr&gt;
-     &lt;tr&gt; &lt;td&gt;&lt;code&gt;&lt;blockquote&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;h2&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;None.&lt;/td&gt; &lt;/tr&gt;
-     &lt;tr&gt; &lt;td&gt;&lt;code&gt;&lt;h3&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;h3&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;blockquote&gt;&lt;/code&gt;&lt;/td&gt; &lt;/tr&gt;
-     &lt;tr&gt; &lt;td&gt;&lt;code&gt;&lt;p id=&quot;a&quot;&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;h2&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;None.&lt;/td&gt; &lt;/tr&gt;
-     &lt;tr&gt; &lt;td&gt;&lt;code&gt;Text Node A&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;h4&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;None.&lt;/td&gt; &lt;/tr&gt;
-     &lt;tr&gt; &lt;td&gt;&lt;code&gt;Text Node B&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;h1&gt;&lt;/code&gt;&lt;/td&gt; &lt;td&gt;&lt;code&gt;&lt;body&gt;&lt;/code&gt;&lt;/td&gt; &lt;/tr&gt;
-    &lt;/tbody&gt;
-   &lt;/table&gt;
-  &lt;/div&gt;
-
-
-  &lt;h5&gt;Distinguishing site-wide headers from page headers&lt;/h5&gt;
-
-  &lt;p&gt;Given the &lt;a href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt;, but
-  ignoring any sections created for &lt;code&gt;nav&lt;/code&gt; and
-  &lt;code&gt;aside&lt;/code&gt; elements, and any of their descendants, if the
-  root of the tree is &lt;span&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;'s
-  section, and it has only a single subsection which is created by an
-  &lt;code&gt;article&lt;/code&gt; element, then the header of &lt;span&gt;the
-  &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt; should be assumed to be a site-wide
-  header, and the header of the &lt;code&gt;article&lt;/code&gt; element should be
-  assumed to be the page's header.&lt;/p&gt;
-
   &lt;p&gt;If a page starts with a heading that is common to the whole site,
-  the document must be authored such that, in the document's &lt;a
-  href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt;, ignoring any
-  sections created for &lt;code&gt;nav&lt;/code&gt; and &lt;code&gt;aside&lt;/code&gt;
-  elements and any of their descendants, the root of the tree is
-  &lt;span&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;'s section, its heading is
-  the site-wide heading, &lt;span&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;
-  has just one subsection, that subsection is created by an
-  &lt;code&gt;article&lt;/code&gt; element, and that &lt;code&gt;article&lt;/code&gt;'s header
-  is the page heading.&lt;/p&gt;
+  the document must be authored such that, in the document's
+  &lt;span&gt;outline&lt;/span&gt;, ignoring any sections created for
+  &lt;code&gt;nav&lt;/code&gt; and &lt;code&gt;aside&lt;/code&gt; elements and any of their
+  descendants, the tree has only one root section, &lt;span&gt;the
+  &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;'s section, its heading is the
+  site-wide heading, &lt;span&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt; has
+  just one subsection, that subsection is created by an
+  &lt;code&gt;article&lt;/code&gt; element, and that &lt;code&gt;article&lt;/code&gt;'s
+  heading is the page heading.&lt;/p&gt;
 
   &lt;p&gt;If a page does not contain a site-wide heading, then the page
-  must be authored such that, in the document's &lt;a
-  href=&quot;#outlines&quot;&gt;hypothetical section tree&lt;/a&gt;, ignoring any
-  sections created for &lt;code&gt;nav&lt;/code&gt; and &lt;code&gt;aside&lt;/code&gt;
-  elements and any of their descendants, either &lt;span&gt;the
-  &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt; has no subsections, or it has more
-  than one subsection, or it has a single subsection but that
-  subsection is not created by an &lt;code&gt;article&lt;/code&gt; element.&lt;/p&gt;
+  must be authored such that, in the document's &lt;span&gt;outline&lt;/span&gt;,
+  ignoring any sections created for &lt;code&gt;nav&lt;/code&gt; and
+  &lt;code&gt;aside&lt;/code&gt; elements and any of their descendants, either
+  &lt;span&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt; has no subsections, or it
+  has more than one subsection, or it has a single subsection but that
+  subsection is not created by an &lt;code&gt;article&lt;/code&gt; element, or
+  there is more than one section at the root of the outline.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Conceptually, a site is thus a document with many
   articles &mdash; when those articles are split into many pages, the


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008165.html">[html5] r1257 - /
</A></li>
	<LI>Next message: <A HREF="008167.html">[html5] r1259 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8166">[ date ]</a>
              <a href="thread.html#8166">[ thread ]</a>
              <a href="subject.html#8166">[ subject ]</a>
              <a href="author.html#8166">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
