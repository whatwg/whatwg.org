<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1804 - [] (0) More URLification (&lt;canvas&gt;, &lt;script&gt;,	&lt;event-source&gt;).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1804%20-%20%5B%5D%20%280%29%20More%20URLification%20%28%3Ccanvas%3E%2C%20%3Cscript%3E%2C%0A%09%3Cevent-source%3E%29.&In-Reply-To=%3C20080625220808.CEDE938E259%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008701.html">
   <LINK REL="Next"  HREF="008703.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1804 - [] (0) More URLification (&lt;canvas&gt;, &lt;script&gt;,	&lt;event-source&gt;).</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1804%20-%20%5B%5D%20%280%29%20More%20URLification%20%28%3Ccanvas%3E%2C%20%3Cscript%3E%2C%0A%09%3Cevent-source%3E%29.&In-Reply-To=%3C20080625220808.CEDE938E259%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1804 - [] (0) More URLification (&lt;canvas&gt;, &lt;script&gt;,	&lt;event-source&gt;).">whatwg at whatwg.org
       </A><BR>
    <I>Wed Jun 25 15:08:08 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008701.html">[html5] r1803 - [e] (0) fix blasphemous typo
</A></li>
        <LI>Next message: <A HREF="008703.html">[html5] r1805 - [] (0) URLification: mention that the term 'URL'	isn't the same as 3986 would ha [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8702">[ date ]</a>
              <a href="thread.html#8702">[ thread ]</a>
              <a href="subject.html#8702">[ subject ]</a>
              <a href="author.html#8702">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-06-25 15:08:08 -0700 (Wed, 25 Jun 2008)
New Revision: 1804

Modified:
   index
   source
Log:
[] (0) More URLification (&lt;canvas&gt;, &lt;script&gt;, &lt;event-source&gt;).

Modified: index
===================================================================
--- index	2008-06-25 20:41:58 UTC (rev 1803)
+++ index	2008-06-25 22:08:08 UTC (rev 1804)
@@ -19615,28 +19615,24 @@
    occur if a method was called with the wrong number of arguments).
 
   &lt;p class=note&gt;A future version of this specification will probably define a
-   &lt;code&gt;3d&lt;/code&gt; context (probably based on the OpenGL ES API).&lt;/p&gt;
-  &lt;!-- XXXURL XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \(URI\|IRI\|URL\) --&gt;
-  &lt;!-- XXXURL data: URIs? --&gt;
+   &lt;code&gt;3d&lt;/code&gt; context (probably based on the OpenGL ES API).
 
   &lt;p&gt;The &lt;dfn id=todataurl
    title=dom-canvas-toDataURL&gt;&lt;code&gt;toDataURL()&lt;/code&gt;&lt;/dfn&gt; method must,
-   when called with no arguments, return a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI
+   when called with no arguments, return a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL
    containing a representation of the image as a PNG file. &lt;a
-   href=&quot;#refsPNG&quot;&gt;[PNG]&lt;/a&gt;.&lt;/p&gt;
-  &lt;!-- XXXURL data: URIs? --&gt;
+   href=&quot;#refsPNG&quot;&gt;[PNG]&lt;/a&gt;.
 
   &lt;p&gt;If the canvas has no pixels (i.e. either its horizontal dimension or its
    vertical dimension is zero) then the method must return the string &quot;&lt;code
    title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot;. (This is the shortest &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt;
-   URI; it represents the empty string in a &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
-   resource.)&lt;/p&gt;
-  &lt;!-- XXXURL data: URIs? --&gt;
+   URL; it represents the empty string in a &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
+   resource.)
 
   &lt;p&gt;The &lt;dfn id=todataurl0
    title=dom-canvas-toDataURL-type&gt;&lt;code&gt;toDataURL(&lt;var
    title=&quot;&quot;&gt;type&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method (when called with one &lt;em&gt;or
-   more&lt;/em&gt; arguments) must return a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI
+   more&lt;/em&gt; arguments) must return a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL
    containing a representation of the image in the format given by &lt;var
    title=&quot;&quot;&gt;type&lt;/var&gt;. The possible values are MIME types with no
    parameters, for example &lt;code&gt;image/png&lt;/code&gt;, &lt;code&gt;image/jpeg&lt;/code&gt;,
@@ -19645,12 +19641,11 @@
 
   &lt;p&gt;Only support for &lt;code&gt;image/png&lt;/code&gt; is required. User agents may
    support other types. If the user agent does not support the requested
-   type, it must return the image using the PNG format.&lt;/p&gt;
-  &lt;!-- XXXURL data: URIs? --&gt;
+   type, it must return the image using the PNG format.
 
   &lt;p&gt;User agents must convert the provided type to lower case before
    establishing if they support that type and before creating the &lt;code
-   title=&quot;&quot;&gt;data:&lt;/code&gt; URI.&lt;/p&gt;
+   title=&quot;&quot;&gt;data:&lt;/code&gt; URL.&lt;/p&gt;
   &lt;!-- XXX define &quot;convert to lower
   case&quot; --&gt;
 
@@ -24780,11 +24775,11 @@
 
   &lt;p&gt;The &lt;dfn id=src9 title=attr-script-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; attribute,
    if specified, gives the address of the external script resource to use.
-   The value of the attribute must be a &lt;a href=&quot;#valid&quot;&gt;valid URL&lt;/a&gt; to a
-   script resource of the type given by the &lt;code title=attr-script-type&gt;&lt;a
-   href=&quot;#type11&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute, if the attribute is present, or
-   of the type &quot;&lt;code title=&quot;&quot;&gt;text/javascript&lt;/code&gt;&quot;, if the attribute is
-   absent.
+   The value of the attribute must be a &lt;a href=&quot;#valid&quot;&gt;valid URL&lt;/a&gt;
+   identifying a script resource of the type given by the &lt;code
+   title=attr-script-type&gt;&lt;a href=&quot;#type11&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute, if the
+   attribute is present, or of the type &quot;&lt;code
+   title=&quot;&quot;&gt;text/javascript&lt;/code&gt;&quot;, if the attribute is absent.
 
   &lt;p&gt;The &lt;dfn id=charset2
    title=attr-script-charset&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt; attribute gives the
@@ -25418,47 +25413,79 @@
 
   &lt;p&gt;The &lt;dfn id=src11 title=attr-event-source-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt;
    attribute, if specified, must give a &lt;a href=&quot;#valid&quot;&gt;valid URL&lt;/a&gt;
-   pointing to a resource that uses the &lt;code&gt;text/event-stream&lt;/code&gt;
-   format.&lt;/p&gt;
-  &lt;!-- XXXURL refer to new algorithms --&gt;
+   identifying a resource that uses the &lt;code&gt;text/event-stream&lt;/code&gt;
+   format.
 
-  &lt;p&gt;When the element is inserted into the document, if it has the &lt;code
+  &lt;p&gt;When an &lt;code&gt;&lt;a href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element
+   with a &lt;code title=attr-event-source-src&gt;&lt;a href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
+   attribute specified is inserted into the document&lt;!-- XXX xref --&gt;, and
+   when an &lt;code&gt;&lt;a href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element that
+   is already in the document&lt;!--XXX xref--&gt; has a &lt;code
    title=attr-event-source-src&gt;&lt;a href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute
-   specified, the user agent must act as if the &lt;code
-   title=dom-remoteEventTarget-addEventSource&gt;&lt;a
-   href=&quot;#addeventsource&quot;&gt;addEventSource()&lt;/a&gt;&lt;/code&gt; method on the &lt;code&gt;&lt;a
-   href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element had been invoked with
-   the URI resulting from resolving the &lt;code title=attr-event-source-src&gt;&lt;a
-   href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute's value to an absolute URI.&lt;/p&gt;
-  &lt;!-- XXXURL refer to new algorithms --&gt;
+   added, the user agent must run the &lt;a href=&quot;#add-declared&quot;&gt;add declared
+   event source&lt;/a&gt; algorithm.
 
-  &lt;p&gt;While the element is in a document, if its &lt;code
+  &lt;p&gt;While an &lt;code&gt;&lt;a href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element
+   is in a document&lt;!--
+  XXX xref --&gt;, if its &lt;code
    title=attr-event-source-src&gt;&lt;a href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute is
-   mutated, the user agent must act as if first the &lt;code
-   title=dom-remoteEventTarget-removeEventSource&gt;&lt;a
-   href=&quot;#removeeventsource&quot;&gt;removeEventSource()&lt;/a&gt;&lt;/code&gt; method on the
-   &lt;code&gt;&lt;a href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element had been
-   invoked with the URI resulting from resolving the old value of the
-   attribute to an absolute URI, and then as if the &lt;code
-   title=dom-remoteEventTarget-addEventSource&gt;&lt;a
-   href=&quot;#addeventsource&quot;&gt;addEventSource()&lt;/a&gt;&lt;/code&gt; method on the element
-   had been invoked with the URI resulting from resolving the &lt;em&gt;new&lt;/em&gt;
-   value of the &lt;code title=attr-event-source-src&gt;&lt;a
-   href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute to an absolute URI.&lt;/p&gt;
-  &lt;!-- XXXURL refer to new algorithms --&gt;
+   mutated, the user agent must must run the &lt;a href=&quot;#remove1&quot;&gt;remove
+   declared event source&lt;/a&gt; algorithm followed by the &lt;a
+   href=&quot;#add-declared&quot;&gt;add declared event source&lt;/a&gt; algorithm.
 
-  &lt;p&gt;When the element is removed from the document, if it has the &lt;code
+  &lt;p&gt;When an &lt;code&gt;&lt;a href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element
+   with a &lt;code title=attr-event-source-src&gt;&lt;a href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
+   attribute specified is removed from a document&lt;!-- XXX xref --&gt;, and when
+   an &lt;code&gt;&lt;a href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element that is
+   in a document&lt;!--XXX
+  xref--&gt; with a &lt;code title=attr-event-source-src&gt;&lt;a
+   href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute specified has its &lt;code
    title=attr-event-source-src&gt;&lt;a href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute
-   specified, or, when the &lt;code title=attr-event-source-src&gt;&lt;a
-   href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute is about to be removed, the user
-   agent must act as if the &lt;code
-   title=dom-remoteEventTarget-removeEventSource&gt;&lt;a
-   href=&quot;#removeeventsource&quot;&gt;removeEventSource()&lt;/a&gt;&lt;/code&gt; method on the
-   &lt;code&gt;&lt;a href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element had been
-   invoked with the URI resulting from resolving the &lt;code
-   title=attr-event-source-src&gt;&lt;a href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute's
-   value to an absolute URI.
+   removed, the user agent must run the &lt;a href=&quot;#remove1&quot;&gt;remove declared
+   event source&lt;/a&gt; algorithm.
 
+  &lt;p&gt;When it is created, an &lt;code&gt;&lt;a
+   href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element must have its
+   &lt;i&gt;current declared event source&lt;/i&gt; set to &quot;undefined&quot;.
+
+  &lt;p&gt;The &lt;dfn id=add-declared&gt;add declared event source&lt;/dfn&gt; algorithm is as
+   follows:
+
+  &lt;ol&gt;
+   &lt;li&gt;&lt;a href=&quot;#resolve&quot; title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;a
+    href=&quot;#url&quot;&gt;URL&lt;/a&gt; specified by the &lt;code&gt;&lt;a
+    href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element's &lt;code
+    title=attr-event-source-src&gt;&lt;a href=&quot;#src11&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute.
+
+   &lt;li&gt;If that fails, then set the element's &lt;i&gt;current declared event
+    source&lt;/i&gt; to &quot;undefined&quot; and abort these steps.
+
+   &lt;li&gt;Otherwise, act as if the &lt;code
+    title=dom-remoteEventTarget-addEventSource&gt;&lt;a
+    href=&quot;#addeventsource&quot;&gt;addEventSource()&lt;/a&gt;&lt;/code&gt; method on the &lt;code&gt;&lt;a
+    href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element had been invoked
+    with the resulting &lt;a href=&quot;#absolute&quot;&gt;absolute URL&lt;/a&gt;.
+
+   &lt;li&gt;Let the element's &lt;i&gt;current declared event source&lt;/i&gt; be that &lt;a
+    href=&quot;#absolute&quot;&gt;absolute URL&lt;/a&gt;.
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn id=remove1&gt;remove declared event source&lt;/dfn&gt; algorithm is as
+   follows:
+
+  &lt;ol&gt;
+   &lt;li&gt;If the element's &lt;i&gt;current declared event source&lt;/i&gt; is &quot;undefined&quot;,
+    abort these steps.
+
+   &lt;li&gt;Otherwise, act as if the &lt;code
+    title=dom-remoteEventTarget-removeEventSource&gt;&lt;a
+    href=&quot;#removeeventsource&quot;&gt;removeEventSource()&lt;/a&gt;&lt;/code&gt; method on the
+    &lt;code&gt;&lt;a href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element had been
+    invoked with the element's &lt;i&gt;current declared event source&lt;/i&gt;.
+
+   &lt;li&gt;Let the element's &lt;i&gt;current declared event source&lt;/i&gt; be &quot;undefined&quot;.
+  &lt;/ol&gt;
+
   &lt;p&gt;There can be more than one &lt;code&gt;&lt;a
    href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element per document, but
    authors should take care to avoid opening multiple connections to the same
@@ -25469,7 +25496,8 @@
 
   &lt;p&gt;The &lt;dfn id=src12 title=dom-event-source-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; DOM
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the
-   same name.
+   same name.&lt;/p&gt;
+  &lt;!-- XXXURL XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \(URI\|IRI\|URL\) --&gt;
 
   &lt;h3 id=interactive-elements&gt;&lt;span class=secno&gt;4.11 &lt;/span&gt;Interactive
    elements&lt;/h3&gt;
@@ -33399,7 +33427,7 @@
   readonly attribute unsigned long &lt;a href=&quot;#length8&quot; title=dom-appcache-length&gt;length&lt;/a&gt;;
   DOMString &lt;a href=&quot;#itemindex4&quot; title=dom-appcache-item&gt;item&lt;/a&gt;(in unsigned long index);
   void &lt;a href=&quot;#adduri&quot; title=dom-appcache-add&gt;add&lt;/a&gt;(in DOMString uri);
-  void &lt;a href=&quot;#remove1&quot; title=dom-appcache-remove&gt;remove&lt;/a&gt;(in DOMString uri);
+  void &lt;a href=&quot;#remove2&quot; title=dom-appcache-remove&gt;remove&lt;/a&gt;(in DOMString uri);
 
   // events
            attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onchecking&quot; title=handler-appcache-onchecking&gt;onchecking&lt;/a&gt;;
@@ -33603,7 +33631,7 @@
    implement.&lt;/p&gt;
   &lt;!-- XXXURL algorithms --&gt;
 
-  &lt;p&gt;The &lt;dfn id=remove1 title=dom-appcache-remove&gt;&lt;code&gt;remove(&lt;var
+  &lt;p&gt;The &lt;dfn id=remove2 title=dom-appcache-remove&gt;&lt;code&gt;remove(&lt;var
    title=&quot;&quot;&gt;uri&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must remove the &lt;a
    href=&quot;#dynamic3&quot; title=concept-appcache-dynamic&gt;dynamic entry&lt;/a&gt;
    categorization of any entry with the address &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; in
@@ -39852,7 +39880,7 @@
 
   &lt;pre class=idl&gt;interface &lt;dfn id=undomanager&gt;UndoManager&lt;/dfn&gt; {
   unsigned long &lt;a href=&quot;#adddata&quot; title=dom-UndoManager-add&gt;add&lt;/a&gt;(in DOMObject data, in DOMString title);
-  [XXX] void &lt;a href=&quot;#remove2&quot; title=dom-UndoManager-remove&gt;remove&lt;/a&gt;(in unsigned long index); &lt;!-- XXX [[Delete]] DOMB --&gt;
+  [XXX] void &lt;a href=&quot;#remove3&quot; title=dom-UndoManager-remove&gt;remove&lt;/a&gt;(in unsigned long index); &lt;!-- XXX [[Delete]] DOMB --&gt;
   void &lt;a href=&quot;#clearundo&quot; title=dom-UndoManager-clearUndo&gt;clearUndo&lt;/a&gt;();
   void &lt;a href=&quot;#clearredo&quot; title=dom-UndoManager-clearRedo&gt;clearRedo&lt;/a&gt;();
   [IndexGetter] DOMObject &lt;a href=&quot;#itemn&quot; title=dom-UndoManager-item&gt;item&lt;/a&gt;(in unsigned long index);
@@ -39940,7 +39968,7 @@
    expire server-held state when the server limitations come into play.&lt;/p&gt;
   &lt;!-- XXX note on expiring undo in case server can only do one level undo --&gt;
 
-  &lt;p&gt;The &lt;dfn id=remove2 title=dom-UndoManager-remove&gt;&lt;code&gt;remove(&lt;var
+  &lt;p&gt;The &lt;dfn id=remove3 title=dom-UndoManager-remove&gt;&lt;code&gt;remove(&lt;var
    title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must remove the &lt;a
    href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entry with the specified &lt;var
    title=&quot;&quot;&gt;index&lt;/var&gt;. If the index is less than zero or greater than or

Modified: source
===================================================================
--- source	2008-06-25 20:41:58 UTC (rev 1803)
+++ source	2008-06-25 22:08:08 UTC (rev 1804)
@@ -17105,41 +17105,36 @@
   define a &lt;code&gt;3d&lt;/code&gt; context (probably based on the OpenGL ES
   API).&lt;/p&gt;
 
-  &lt;!-- XXXURL XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \(URI\|IRI\|URL\) --&gt;
-
-  &lt;!-- XXXURL data: URIs? --&gt;
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-canvas-toDataURL&quot;&gt;&lt;code&gt;toDataURL()&lt;/code&gt;&lt;/dfn&gt; method
   must, when called with no arguments, return a &lt;code
-  title=&quot;&quot;&gt;data:&lt;/code&gt; URI containing a representation of the image
+  title=&quot;&quot;&gt;data:&lt;/code&gt; URL containing a representation of the image
   as a PNG file. &lt;a href=&quot;#refsPNG&quot;&gt;[PNG]&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;!-- XXXURL data: URIs? --&gt;
   &lt;p&gt;If the canvas has no pixels (i.e. either its horizontal dimension
   or its vertical dimension is zero) then the method must return the
   string &quot;&lt;code title=&quot;&quot;&gt;data:,&lt;/code&gt;&quot;. (This is the shortest &lt;code
-  title=&quot;&quot;&gt;data:&lt;/code&gt; URI; it represents the empty string in a &lt;code
+  title=&quot;&quot;&gt;data:&lt;/code&gt; URL; it represents the empty string in a &lt;code
   title=&quot;&quot;&gt;text/plain&lt;/code&gt; resource.)&lt;/p&gt;
 
-  &lt;!-- XXXURL data: URIs? --&gt;
   &lt;p&gt;The &lt;dfn title=&quot;dom-canvas-toDataURL-type&quot;&gt;&lt;code&gt;toDataURL(&lt;var
   title=&quot;&quot;&gt;type&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method (when called with one
-  &lt;em&gt;or more&lt;/em&gt; arguments) must return a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI
-  containing a representation of the image in the format given by &lt;var
-  title=&quot;&quot;&gt;type&lt;/var&gt;. The possible values are MIME types with no
-  parameters, for example &lt;code&gt;image/png&lt;/code&gt;,
-  &lt;code&gt;image/jpeg&lt;/code&gt;, or even maybe &lt;code&gt;image/svg+xml&lt;/code&gt; if
-  the implementation actually keeps enough information to reliably
-  render an SVG image from the canvas.&lt;/p&gt;
+  &lt;em&gt;or more&lt;/em&gt; arguments) must return a &lt;code
+  title=&quot;&quot;&gt;data:&lt;/code&gt; URL containing a representation of the image
+  in the format given by &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;. The possible values
+  are MIME types with no parameters, for example
+  &lt;code&gt;image/png&lt;/code&gt;, &lt;code&gt;image/jpeg&lt;/code&gt;, or even maybe
+  &lt;code&gt;image/svg+xml&lt;/code&gt; if the implementation actually keeps
+  enough information to reliably render an SVG image from the
+  canvas.&lt;/p&gt;
 
   &lt;p&gt;Only support for &lt;code&gt;image/png&lt;/code&gt; is required. User agents
   may support other types. If the user agent does not support the
   requested type, it must return the image using the PNG format.&lt;/p&gt;
 
-  &lt;!-- XXXURL data: URIs? --&gt;
   &lt;p&gt;User agents must convert the provided type to lower case before
   establishing if they support that type and before creating the &lt;code
-  title=&quot;&quot;&gt;data:&lt;/code&gt; URI.&lt;/p&gt; &lt;!-- XXX define &quot;convert to lower
+  title=&quot;&quot;&gt;data:&lt;/code&gt; URL.&lt;/p&gt; &lt;!-- XXX define &quot;convert to lower
   case&quot; --&gt;
 
   &lt;p class=&quot;note&quot;&gt;When trying to use types other than
@@ -22419,10 +22414,11 @@
 
   &lt;p&gt;The &lt;dfn title=&quot;attr-script-src&quot;&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt;
   attribute, if specified, gives the address of the external script
-  resource to use. The value of the attribute must be a &lt;span&gt;valid URL&lt;/span&gt; to a script resource of the type given by the &lt;code
-  title=&quot;attr-script-type&quot;&gt;type&lt;/code&gt; attribute, if the attribute is
-  present, or of the type &quot;&lt;code title=&quot;&quot;&gt;text/javascript&lt;/code&gt;&quot;, if
-  the attribute is absent.&lt;/p&gt;
+  resource to use. The value of the attribute must be a &lt;span&gt;valid
+  URL&lt;/span&gt; identifying a script resource of the type given by the
+  &lt;code title=&quot;attr-script-type&quot;&gt;type&lt;/code&gt; attribute, if the
+  attribute is present, or of the type &quot;&lt;code
+  title=&quot;&quot;&gt;text/javascript&lt;/code&gt;&quot;, if the attribute is absent.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;attr-script-charset&quot;&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt;
   attribute gives the character encoding of the external script
@@ -23107,45 +23103,79 @@
   events generated by a remote server.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;attr-event-source-src&quot;&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt;
-  attribute, if specified, must give a &lt;span&gt;valid URL&lt;/span&gt; pointing to
-  a resource that uses the &lt;code&gt;text/event-stream&lt;/code&gt; format.&lt;/p&gt;
+  attribute, if specified, must give a &lt;span&gt;valid URL&lt;/span&gt;
+  identifying a resource that uses the &lt;code&gt;text/event-stream&lt;/code&gt;
+  format.&lt;/p&gt;
 
-  &lt;!-- XXXURL refer to new algorithms --&gt;
-  &lt;p&gt;When the element is inserted into the document, if it has the
-  &lt;code title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute specified,
-  the user agent must act as if the &lt;code
-  title=&quot;dom-remoteEventTarget-addEventSource&quot;&gt;addEventSource()&lt;/code&gt;
-  method on the &lt;code&gt;event-source&lt;/code&gt; element had been invoked
-  with the URI resulting from resolving the &lt;code
-  title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute's value to an
-  absolute URI.&lt;/p&gt;
+  &lt;p&gt;When an &lt;code&gt;event-source&lt;/code&gt; element with a &lt;code
+  title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute specified is
+  inserted into the document&lt;!-- XXX xref --&gt;, and when an
+  &lt;code&gt;event-source&lt;/code&gt; element that is already in the
+  document&lt;!--XXX xref--&gt; has a &lt;code
+  title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute added, the user
+  agent must run the &lt;span&gt;add declared event source&lt;/span&gt;
+  algorithm.&lt;/p&gt;
 
-  &lt;!-- XXXURL refer to new algorithms --&gt;
-  &lt;p&gt;While the element is in a document, if its &lt;code
-  title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute is mutated, the
-  user agent must act as if first the &lt;code
-  title=&quot;dom-remoteEventTarget-removeEventSource&quot;&gt;removeEventSource()&lt;/code&gt;
-  method on the &lt;code&gt;event-source&lt;/code&gt; element had been invoked
-  with the URI resulting from resolving the old value of the attribute
-  to an absolute URI, and then as if the &lt;code
-  title=&quot;dom-remoteEventTarget-addEventSource&quot;&gt;addEventSource()&lt;/code&gt;
-  method on the element had been invoked with the URI resulting from
-  resolving the &lt;em&gt;new&lt;/em&gt; value of the &lt;code
-  title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute to an absolute
-  URI.&lt;/p&gt;
+  &lt;p&gt;While an &lt;code&gt;event-source&lt;/code&gt; element is in a document&lt;!--
+  XXX xref --&gt;, if its &lt;code title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt;
+  attribute is mutated, the user agent must must run the &lt;span&gt;remove
+  declared event source&lt;/span&gt; algorithm followed by the &lt;span&gt;add
+  declared event source&lt;/span&gt; algorithm.&lt;/p&gt;
 
-  &lt;!-- XXXURL refer to new algorithms --&gt;
-  &lt;p&gt;When the element is removed from the document, if it has the
-  &lt;code title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute specified,
-  or, when the &lt;code title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt;
-  attribute is about to be removed, the user agent must act as if the
-  &lt;code
-  title=&quot;dom-remoteEventTarget-removeEventSource&quot;&gt;removeEventSource()&lt;/code&gt;
-  method on the &lt;code&gt;event-source&lt;/code&gt; element had been invoked
-  with the URI resulting from resolving the &lt;code
-  title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute's value to an
-  absolute URI.&lt;/p&gt;
+  &lt;p&gt;When an &lt;code&gt;event-source&lt;/code&gt; element with a &lt;code
+  title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute specified is
+  removed from a document&lt;!-- XXX xref --&gt;, and when an
+  &lt;code&gt;event-source&lt;/code&gt; element that is in a document&lt;!--XXX
+  xref--&gt; with a &lt;code title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt;
+  attribute specified has its &lt;code
+  title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute removed, the user
+  agent must run the &lt;span&gt;remove declared event source&lt;/span&gt;
+  algorithm.&lt;/p&gt;
 
+  &lt;p&gt;When it is created, an &lt;code&gt;event-source&lt;/code&gt; element must
+  have its &lt;i&gt;current declared event source&lt;/i&gt; set to
+  &quot;undefined&quot;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;add declared event source&lt;/dfn&gt; algorithm is as
+  follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;span title=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the &lt;span&gt;URL&lt;/span&gt;
+   specified by the &lt;code&gt;event-source&lt;/code&gt; element's &lt;code
+   title=&quot;attr-event-source-src&quot;&gt;src&lt;/code&gt; attribute.&lt;/li&gt;
+
+   &lt;li&gt;If that fails, then set the element's &lt;i&gt;current declared event
+   source&lt;/i&gt; to &quot;undefined&quot; and abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, act as if the &lt;code
+   title=&quot;dom-remoteEventTarget-addEventSource&quot;&gt;addEventSource()&lt;/code&gt;
+   method on the &lt;code&gt;event-source&lt;/code&gt; element had been invoked
+   with the resulting &lt;span&gt;absolute URL&lt;/span&gt;.&lt;/li&gt;
+
+   &lt;li&gt;Let the element's &lt;i&gt;current declared event source&lt;/i&gt; be that
+   &lt;span&gt;absolute URL&lt;/span&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;remove declared event source&lt;/dfn&gt; algorithm is as
+  follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;If the element's &lt;i&gt;current declared event source&lt;/i&gt; is
+   &quot;undefined&quot;, abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, act as if the &lt;code
+   title=&quot;dom-remoteEventTarget-removeEventSource&quot;&gt;removeEventSource()&lt;/code&gt;
+   method on the &lt;code&gt;event-source&lt;/code&gt; element had been invoked
+   with the element's &lt;i&gt;current declared event source&lt;/i&gt;.&lt;/li&gt;
+
+   &lt;li&gt;Let the element's &lt;i&gt;current declared event source&lt;/i&gt; be
+   &quot;undefined&quot;.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
   &lt;p&gt;There can be more than one &lt;code&gt;event-source&lt;/code&gt; element per
   document, but authors should take care to avoid opening multiple
   connections to the same server as HTTP recommends a limit to the
@@ -23156,10 +23186,13 @@
   element? --&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-event-source-src&quot;&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute must &lt;span&gt;reflect&lt;/span&gt; the content attribute of the same name.&lt;/p&gt;
+  attribute must &lt;span&gt;reflect&lt;/span&gt; the content attribute of the
+  same name.&lt;/p&gt;
 
 
+  &lt;!-- XXXURL XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \(URI\|IRI\|URL\) --&gt;
 
+
   &lt;h3 id=&quot;interactive-elements&quot;&gt;Interactive elements&lt;/h3&gt;
 
   &lt;h4&gt;The &lt;dfn&gt;&lt;code&gt;details&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008701.html">[html5] r1803 - [e] (0) fix blasphemous typo
</A></li>
	<LI>Next message: <A HREF="008703.html">[html5] r1805 - [] (0) URLification: mention that the term 'URL'	isn't the same as 3986 would ha [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8702">[ date ]</a>
              <a href="thread.html#8702">[ thread ]</a>
              <a href="subject.html#8702">[ subject ]</a>
              <a href="author.html#8702">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
