<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2272 - [] (0) WF2: Revamp of activation behavior	definitions and related details.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2272%20-%20%5B%5D%20%280%29%20WF2%3A%20Revamp%20of%20activation%20behavior%0A%09definitions%20and%20related%20details.&In-Reply-To=%3C20081003010836.B196A1427E5%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009156.html">
   <LINK REL="Next"  HREF="009158.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2272 - [] (0) WF2: Revamp of activation behavior	definitions and related details.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2272%20-%20%5B%5D%20%280%29%20WF2%3A%20Revamp%20of%20activation%20behavior%0A%09definitions%20and%20related%20details.&In-Reply-To=%3C20081003010836.B196A1427E5%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2272 - [] (0) WF2: Revamp of activation behavior	definitions and related details.">whatwg at whatwg.org
       </A><BR>
    <I>Thu Oct  2 18:08:36 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009156.html">[html5] r2271 - [] (0) WF2: &lt;input type=button&gt;
</A></li>
        <LI>Next message: <A HREF="009158.html">[html5] r2273 - [] (0) WF2: required constraint.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9157">[ date ]</a>
              <a href="thread.html#9157">[ thread ]</a>
              <a href="subject.html#9157">[ subject ]</a>
              <a href="author.html#9157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-10-02 18:08:35 -0700 (Thu, 02 Oct 2008)
New Revision: 2272

Modified:
   index
   source
Log:
[] (0) WF2: Revamp of activation behavior definitions and related details.

Modified: index
===================================================================
--- index	2008-10-02 22:37:26 UTC (rev 2271)
+++ index	2008-10-03 01:08:35 UTC (rev 2272)
@@ -16,7 +16,7 @@
   &lt;div class=head&gt;
    &lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;h1&gt;HTML 5&lt;/h1&gt;
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-recommendation-&mdash;-date:-01-jan-1901&gt;Draft Recommendation &mdash; 2 October 2008&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-recommendation-&mdash;-date:-01-jan-1901&gt;Draft Recommendation &mdash; 3 October 2008&lt;/h2&gt;
    &lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;dl&gt;&lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -1863,11 +1863,6 @@
   &lt;p&gt;The interface &lt;dfn id=domtimestamp&gt;&lt;code&gt;DOMTimeStamp&lt;/code&gt;&lt;/dfn&gt; is defined in
   DOM3 Core. &lt;a href=#refsDOM3CORE&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The term &lt;dfn id=activation-behavior&gt;activation behavior&lt;/dfn&gt; is used as defined in the
-  DOM3 Events specification. &lt;a href=#refsDOM3EVENTS&gt;[DOM3EVENTS]&lt;/a&gt; &lt;span class=XXX&gt;At
-  the time of writing, DOM3 Events hadn't yet been updated to define
-  that phrase.&lt;/span&gt;&lt;/p&gt;
-
   &lt;p id=alternate-style-sheets&gt;The rules for handling alternative
   style sheets are defined in the CSS object model specification. &lt;a href=#refsCSSOM&gt;[CSSOM]&lt;/a&gt;&lt;/p&gt;
 
@@ -6666,13 +6661,6 @@
 
   &lt;h5 id=interactive-content&gt;&lt;span class=secno&gt;3.4.1.7 &lt;/span&gt;Interactive content&lt;/h5&gt;
 
-  &lt;!-- Don't change the above &lt;dfn&gt; or the text below without checking
-  all cross-references. Some of them refer specifically to the
-  activation behavior stuff. --&gt;
-
-  &lt;p class=XXX&gt;Parts of this section should eventually be
-  moved to DOM3 Events.&lt;/p&gt; &lt;!-- but see comment above --&gt;
-
 &lt;!--
 TESTS:
 <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A</A>
@@ -6684,40 +6672,93 @@
   &lt;p&gt;&lt;dfn id=interactive-content-0&gt;Interactive content&lt;/dfn&gt; is content that is specifically
   intended for user interaction.&lt;/p&gt;
 
-  &lt;p&gt;Certain elements in HTML can be activated, for instance
-  &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; elements, &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; elements, or
-  &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; elements when their &lt;code title=attr-input-type&gt;&lt;a href=#attr-input-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#radio-button-state title=attr-input-type-radio&gt;Radio Button&lt;/a&gt; state. Activation
-  of those elements can happen in various (UA-defined) ways, for
-  instance via the mouse or keyboard.&lt;/p&gt;
+  &lt;p&gt;Certain elements in HTML have an &lt;a href=#activation-behavior&gt;activation
+  behavior&lt;/a&gt;, which means the user agent should allow the user to
+  manually trigger them in some way, for instance using keyboard or
+  voice input (though not mouse clicks, which are handled above). When
+  the user triggers an element with a defined &lt;a href=#activation-behavior&gt;activation
+  behavior&lt;/a&gt;, the default action of the interaction event&lt;!-- XXX
+  --&gt; must be to &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation steps&lt;/a&gt; on
+  the element.&lt;/p&gt;
 
-  &lt;p&gt;When activation is performed via some method other than clicking
-  the pointing device, the default action of the event that triggers
-  the activation must, instead of being activating the element
-  directly, be to &lt;a href=#fire-a-click-event&gt;fire a &lt;code title=&quot;&quot;&gt;click&lt;/code&gt;
-  event&lt;/a&gt; on the same element.&lt;/p&gt;
+  &lt;p&gt;When a user agent is to &lt;dfn id=run-synthetic-click-activation-steps&gt;run synthetic click activation
+  steps&lt;/dfn&gt; on an element, the user agent must &lt;a href=#run-pre-click-activation-steps&gt;run pre-click
+  activation steps&lt;/a&gt; on the element, then &lt;a href=#fire-a-click-event&gt;fire a &lt;code title=event-click&gt;click&lt;/code&gt; event&lt;/a&gt; at the element. The
+  default action of this &lt;span title=event-click&gt;click&lt;/span&gt; event
+  must be to &lt;a href=#run-post-click-activation-steps&gt;run post-click activation steps&lt;/a&gt; on the
+  element. If the event is canceled, the user agent must &lt;a href=#run-canceled-activation-steps&gt;run
+  canceled activation steps&lt;/a&gt; on the element instead.&lt;/p&gt;
 
-  &lt;p&gt;The default action of this &lt;code title=event-click&gt;click&lt;/code&gt;
-  event, or of the real &lt;code title=event-click&gt;click&lt;/code&gt; event
-  if the element was activated by clicking a pointing device, must be
-  to &lt;span title=&quot;fire a DOMActivate event&quot;&gt;fire a further &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; event&lt;/span&gt; at the
-  same element, whose own default action is to go through all the
-  elements the &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt;
-  event bubbled through (starting at the target node and going towards
-  the &lt;code&gt;Document&lt;/code&gt; node), looking for an element with an
-  &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt;; the first element, in reverse tree
-  order, to have one, must have its activation behavior executed.&lt;/p&gt;
+  &lt;p&gt;Given an element &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, the &lt;dfn id=nearest-activatable-element&gt;nearest
+  activatable element&lt;/dfn&gt; is the element returned by the following
+  algorithm:&lt;/p&gt;
 
-  &lt;p class=note&gt;The above doesn't happen for arbitrary synthetic
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; has a defined &lt;a href=#activation-behavior&gt;activation
+   behavior&lt;/a&gt;, then return &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; and abort
+   these steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; has a parent element, then set
+   &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; to that parent element and return to the
+   first step.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, there is no &lt;a href=#nearest-activatable-element&gt;nearest activatable
+   element&lt;/a&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;When a pointing device is clicked, the user agent must run these
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;e&lt;/var&gt; be the &lt;span title=&quot;&quot;&gt;nearest
+   activatable element&lt;/span&gt; of the element designated by the user,
+   if any.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is an element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;a href=#run-pre-click-activation-steps&gt;run
+   pre-click activation steps&lt;/a&gt; on it.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Dispatching the required &lt;code title=event-click&gt;click&lt;/code&gt;
+    event.&lt;/p&gt;
+
+    &lt;p class=XXX&gt;Another specification presumably requires the
+    firing of the &lt;span title=event-click&gt;click&lt;/span&gt; event?&lt;/p&gt;
+
+    &lt;p&gt;If there is an element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, then the default
+    action of the &lt;span title=event-click&gt;click&lt;/span&gt; event must be
+    to &lt;a href=#run-post-click-activation-steps&gt;run post-click activation steps&lt;/a&gt; on element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p&gt;If there is an element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt; but the event is
+    canceled, the user agent must &lt;a href=#run-canceled-activation-steps&gt;run canceled activation
+    steps&lt;/a&gt; on element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p class=note&gt;The above doesn't happen for arbitrary synthetic
   events dispatched by author script. However, the &lt;code title=dom-click&gt;&lt;a href=#dom-click&gt;click()&lt;/a&gt;&lt;/code&gt; method can be used to make it
   happen programmatically.&lt;/p&gt;
 
-  &lt;p&gt;For certain form controls, this process is complicated further by
-  &lt;a href=<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#the-click">http://www.whatwg.org/specs/web-forms/current-work/#the-click</A>&gt;changes
-  that must happen around the click event&lt;/a&gt;. &lt;a href=#refsWF2&gt;[WF2]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXX WF2: when this is merged into
-  this spec, update xrefs --&gt;
+  &lt;p&gt;When a user agent is to &lt;dfn id=run-post-click-activation-steps&gt;run post-click activation
+  steps&lt;/dfn&gt; on an element, the user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple
+  event&lt;/a&gt; called &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; at that element. The
+  default action of this event must be to &lt;a href=#run-final-activation-steps&gt;run final activation
+  steps&lt;/a&gt; on that element. If the event is canceled, the user
+  agent must &lt;a href=#run-canceled-activation-steps&gt;run canceled activation steps&lt;/a&gt; on the element
+  instead.&lt;/p&gt;
 
+  &lt;p&gt;When a user agent is to &lt;dfn id=run-pre-click-activation-steps&gt;run pre-click activation steps&lt;/dfn&gt;
+  on an element, it must run the &lt;dfn id=pre-click-activation-steps&gt;pre-click activation steps&lt;/dfn&gt;
+  defined for that element, if any.&lt;/p&gt;
 
+  &lt;p&gt;When a user agent is to &lt;dfn id=run-canceled-activation-steps&gt;run canceled activation steps&lt;/dfn&gt;
+  on an element, it must run the &lt;dfn id=canceled-activation-steps&gt;canceled activation steps&lt;/dfn&gt;
+  defined for that element, if any.&lt;/p&gt;
 
+  &lt;p&gt;When a user agent is to &lt;dfn id=run-final-activation-steps&gt;run final activation steps&lt;/dfn&gt; on
+  an element, it must run the &lt;dfn id=activation-behavior&gt;activation behavior&lt;/dfn&gt; defined
+  for that element. Activation behaviors can refer to the &lt;code title=event-click&gt;click&lt;/code&gt; and &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; events that were fired
+  by the steps above leading up to this point.&lt;/p&gt;
+
+
+
   &lt;h4 id=transparent-content-models&gt;&lt;span class=secno&gt;3.4.2 &lt;/span&gt;Transparent content models&lt;/h4&gt;
 
   &lt;p&gt;Some elements are described as &lt;dfn id=transparent&gt;transparent&lt;/dfn&gt;; they have
@@ -11368,8 +11409,8 @@
    &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception and abort these
    steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the target of the &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; event is an
-   &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element with an &lt;code title=attr-img-ismap&gt;&lt;a href=#attr-img-ismap&gt;ismap&lt;/a&gt;&lt;/code&gt; attribute specified, then
+   &lt;li&gt;&lt;p&gt;If the target of the &lt;code title=event-click&gt;click&lt;/code&gt;
+   event is an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element with an &lt;code title=attr-img-ismap&gt;&lt;a href=#attr-img-ismap&gt;ismap&lt;/a&gt;&lt;/code&gt; attribute specified, then
    server-side image map processing must be performed, as follows:&lt;/p&gt;
 
     &lt;ol&gt;&lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A...%3Ca%20href%3D%22%23%22%3E%3Cimg%20ismap%20usemap%3D%22%23a%22%20src%3D/resources/images/smallcats%3E%3C/a%3E%0A%3Cmap%20name%3Da%3E%3Carea%20shape%3Drect%20coords%3D0%2C0%2C50%2C50%20href%3Db%3E%3C/map%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A...%3Ca%20href%3D%22%23%22%3E%3Cimg%20ismap%20usemap%3D%22%23a%22%20src%3D/resources/images/smallcats%3E%3C/a%3E%0A%3Cmap%20name%3Da%3E%3Carea%20shape%3Drect%20coords%3D0%2C0%2C50%2C50%20href%3Db%3E%3C/map%3E</A> --&gt;&lt;li&gt;If the &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt;
@@ -11394,12 +11435,7 @@
    suffix&lt;/a&gt;&lt;/var&gt;, then take that into account when following the
    hyperlink.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p class=note&gt;One way that a user agent can enable users to follow
-  hyperlinks is by allowing &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; elements to be clicked, or
-  focussed and activated by the keyboard. This &lt;a href=#interactive-content-0 title=&quot;interactive content&quot;&gt;will cause&lt;/a&gt; the aforementioned
-  &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; to be invoked.&lt;/p&gt;
-
-  &lt;p&gt;The DOM attributes &lt;dfn id=dom-a-href title=dom-a-href&gt;&lt;code&gt;href&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-ping title=dom-a-ping&gt;&lt;code&gt;ping&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-target title=dom-a-target&gt;&lt;code&gt;target&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-rel title=dom-a-rel&gt;&lt;code&gt;rel&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-media title=dom-a-media&gt;&lt;code&gt;media&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-hreflang title=dom-a-hreflang&gt;&lt;code&gt;hreflang&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-a-type title=dom-a-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;, must each
+  &lt;/ol&gt;&lt;p&gt;The DOM attributes &lt;dfn id=dom-a-href title=dom-a-href&gt;&lt;code&gt;href&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-ping title=dom-a-ping&gt;&lt;code&gt;ping&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-target title=dom-a-target&gt;&lt;code&gt;target&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-rel title=dom-a-rel&gt;&lt;code&gt;rel&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-media title=dom-a-media&gt;&lt;code&gt;media&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-a-hreflang title=dom-a-hreflang&gt;&lt;code&gt;hreflang&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-a-type title=dom-a-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;, must each
   &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content attributes of the same
   name.&lt;/p&gt;
 
@@ -20578,12 +20614,7 @@
    hyperlinks&quot;&gt;follow the hyperlink&lt;/a&gt; defined by the
    &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; element, if any.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p class=note&gt;One way that a user agent can enable users to follow
-  hyperlinks is by allowing &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements to be clicked,
-  or focussed and activated by the keyboard. This &lt;a href=#interactive-content-0 title=&quot;interactive content&quot;&gt;will cause&lt;/a&gt; the aforementioned
-  &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt; to be invoked.&lt;/p&gt;
-
-  &lt;p&gt;The DOM attributes &lt;dfn id=dom-area-alt title=dom-area-alt&gt;&lt;code&gt;alt&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-coords title=dom-area-coords&gt;&lt;code&gt;coords&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-href title=dom-area-href&gt;&lt;code&gt;href&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-target title=dom-area-target&gt;&lt;code&gt;target&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-ping title=dom-area-ping&gt;&lt;code&gt;ping&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-rel title=dom-area-rel&gt;&lt;code&gt;rel&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-media title=dom-area-media&gt;&lt;code&gt;media&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-hreflang title=dom-area-hreflang&gt;&lt;code&gt;hreflang&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-area-type title=dom-area-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;, each must
+  &lt;/ol&gt;&lt;p&gt;The DOM attributes &lt;dfn id=dom-area-alt title=dom-area-alt&gt;&lt;code&gt;alt&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-coords title=dom-area-coords&gt;&lt;code&gt;coords&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-href title=dom-area-href&gt;&lt;code&gt;href&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-target title=dom-area-target&gt;&lt;code&gt;target&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-ping title=dom-area-ping&gt;&lt;code&gt;ping&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-rel title=dom-area-rel&gt;&lt;code&gt;rel&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-media title=dom-area-media&gt;&lt;code&gt;media&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-hreflang title=dom-area-hreflang&gt;&lt;code&gt;hreflang&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-area-type title=dom-area-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;, each must
   &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content attributes of the same
   name.&lt;/p&gt;
 
@@ -22832,6 +22863,26 @@
   descendant in &lt;a href=#tree-order&gt;tree order&lt;/a&gt; is the &lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt;
   element's &lt;a href=#labeled-control&gt;labeled control&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt; element's exact default presentation and
+  behavior, in particular what its &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt;
+  might be, if anything, should match the platform's label
+  behavior.&lt;/p&gt;
+
+  &lt;div class=example&gt;
+
+   &lt;p&gt;For example, on platforms where clicking a checkbox label checks
+   the checkbox, clicking the &lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt; in the following
+   snippet could trigger the user agent to &lt;span&gt;run synthetic click
+   activation steps on the &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element, as if
+   the element itself had been triggered by the user:&lt;/span&gt;&lt;/p&gt;
+
+   &lt;pre&gt;&lt;label&gt;&lt;input type=checkbox name=lost&gt; Lost&lt;/label&gt;&lt;/pre&gt;
+
+   &lt;p&gt;On other platforms, the behavior might be just to focus the
+   control, or do nothing.&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The &lt;code title=attr-fae-form&gt;&lt;a href=#attr-fae-form&gt;form&lt;/a&gt;&lt;/code&gt; attribute is used to
   explicitly associate the &lt;code&gt;&lt;a href=#the-label-element&gt;label&lt;/a&gt;&lt;/code&gt; element with its
   &lt;a href=#form-owner&gt;form owner&lt;/a&gt;.&lt;/p&gt;
@@ -22852,15 +22903,7 @@
   form-associated elements&lt;/span&gt;, on getting, must return that
   &lt;code&gt;NodeList&lt;/code&gt; object.&lt;/p&gt;
 
-  &lt;!-- The label element's exact default presentation and behaviour
-  should match the platform's label behaviour. For example, on
-  platforms where clicking a checkbox label checks the checkbox,
-  clicking a label element should cause a click event to be
-  synthesised and fired at the checkbox. XXX should define activation
-  behaviour here; clicking on nested link? nested label? label when it
-  has a checkbox? etc --&gt;
 
-
   &lt;h4 id=the-input-element&gt;&lt;span class=secno&gt;4.10.4 &lt;/span&gt;The &lt;dfn&gt;&lt;code&gt;input&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;&lt;dt&gt;Categories&lt;/dt&gt;
@@ -37915,16 +37958,11 @@
 
   &lt;h3 id=activation&gt;&lt;span class=secno&gt;6.3 &lt;/span&gt;Activation&lt;/h3&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-click title=dom-click&gt;click()&lt;/dfn&gt; method must &lt;a href=#fire-a-click-event&gt;fire a
-  &lt;code&gt;click&lt;/code&gt; event&lt;/a&gt; at the element, whose default action
-  is the &lt;span title=&quot;fire a DOMActivate event&quot;&gt;firing of a further
-  &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; event&lt;/span&gt; at
-  the same element, whose own default action is to go through all the
-  elements the &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt;
-  event bubbled through (starting at the target node and going towards
-  the &lt;code&gt;Document&lt;/code&gt; node), looking for an element with an
-  &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt;; the first element, in reverse tree
-  order, to have one, must have its activation behavior executed.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-click title=dom-click&gt;click()&lt;/dfn&gt; method must, if the
+  element has a defined &lt;a href=#activation-behavior&gt;activation behavior&lt;/a&gt;, &lt;a href=#run-synthetic-click-activation-steps&gt;run
+  synthetic click activation steps&lt;/a&gt; on the element. Otherwise,
+  the user agent must &lt;a href=#fire-a-click-event&gt;fire a &lt;code&gt;click&lt;/code&gt; event&lt;/a&gt; at
+  the element.&lt;/p&gt;
 
 
 

Modified: source
===================================================================
--- source	2008-10-02 22:37:26 UTC (rev 2271)
+++ source	2008-10-03 01:08:35 UTC (rev 2272)
@@ -936,12 +936,6 @@
   &lt;p&gt;The interface &lt;dfn&gt;&lt;code&gt;DOMTimeStamp&lt;/code&gt;&lt;/dfn&gt; is defined in
   DOM3 Core. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;The term &lt;dfn&gt;activation behavior&lt;/dfn&gt; is used as defined in the
-  DOM3 Events specification. &lt;a
-  href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt; &lt;span class=&quot;XXX&quot;&gt;At
-  the time of writing, DOM3 Events hadn't yet been updated to define
-  that phrase.&lt;/span&gt;&lt;/p&gt;
-
   &lt;p id=&quot;alternate-style-sheets&quot;&gt;The rules for handling alternative
   style sheets are defined in the CSS object model specification. &lt;a
   href=&quot;#refsCSSOM&quot;&gt;[CSSOM]&lt;/a&gt;&lt;/p&gt;
@@ -6620,13 +6614,6 @@
 
   &lt;h5&gt;Interactive content&lt;/h5&gt;
 
-  &lt;!-- Don't change the above &lt;dfn&gt; or the text below without checking
-  all cross-references. Some of them refer specifically to the
-  activation behavior stuff. --&gt;
-
-  &lt;p class=&quot;XXX&quot;&gt;Parts of this section should eventually be
-  moved to DOM3 Events.&lt;/p&gt; &lt;!-- but see comment above --&gt;
-
 &lt;!--
 TESTS:
 <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A</A>
@@ -6638,46 +6625,107 @@
   &lt;p&gt;&lt;dfn&gt;Interactive content&lt;/dfn&gt; is content that is specifically
   intended for user interaction.&lt;/p&gt;
 
-  &lt;p&gt;Certain elements in HTML can be activated, for instance
-  &lt;code&gt;a&lt;/code&gt; elements, &lt;code&gt;button&lt;/code&gt; elements, or
-  &lt;code&gt;input&lt;/code&gt; elements when their &lt;code
-  title=&quot;attr-input-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
-  title=&quot;attr-input-type-radio&quot;&gt;Radio Button&lt;/span&gt; state. Activation
-  of those elements can happen in various (UA-defined) ways, for
-  instance via the mouse or keyboard.&lt;/p&gt;
+  &lt;p&gt;Certain elements in HTML have an &lt;span&gt;activation
+  behavior&lt;/span&gt;, which means the user agent should allow the user to
+  manually trigger them in some way, for instance using keyboard or
+  voice input (though not mouse clicks, which are handled above). When
+  the user triggers an element with a defined &lt;span&gt;activation
+  behavior&lt;/span&gt;, the default action of the interaction event&lt;!-- XXX
+  --&gt; must be to &lt;span&gt;run synthetic click activation steps&lt;/span&gt; on
+  the element.&lt;/p&gt;
 
-  &lt;p&gt;When activation is performed via some method other than clicking
-  the pointing device, the default action of the event that triggers
-  the activation must, instead of being activating the element
-  directly, be to &lt;span&gt;fire a &lt;code title=&quot;&quot;&gt;click&lt;/code&gt;
-  event&lt;/span&gt; on the same element.&lt;/p&gt;
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;run synthetic click activation
+  steps&lt;/dfn&gt; on an element, the user agent must &lt;span&gt;run pre-click
+  activation steps&lt;/span&gt; on the element, then &lt;span&gt;fire a &lt;code
+  title=&quot;event-click&quot;&gt;click&lt;/code&gt; event&lt;/span&gt; at the element. The
+  default action of this &lt;span title=&quot;event-click&quot;&gt;click&lt;/span&gt; event
+  must be to &lt;span&gt;run post-click activation steps&lt;/span&gt; on the
+  element. If the event is canceled, the user agent must &lt;span&gt;run
+  canceled activation steps&lt;/span&gt; on the element instead.&lt;/p&gt;
 
-  &lt;p&gt;The default action of this &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt;
-  event, or of the real &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt; event
-  if the element was activated by clicking a pointing device, must be
-  to &lt;span title=&quot;fire a DOMActivate event&quot;&gt;fire a further &lt;code
-  title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt; event&lt;/span&gt; at the
-  same element, whose own default action is to go through all the
-  elements the &lt;code title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt;
-  event bubbled through (starting at the target node and going towards
-  the &lt;code&gt;Document&lt;/code&gt; node), looking for an element with an
-  &lt;span&gt;activation behavior&lt;/span&gt;; the first element, in reverse tree
-  order, to have one, must have its activation behavior executed.&lt;/p&gt;
+  &lt;p&gt;Given an element &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, the &lt;dfn&gt;nearest
+  activatable element&lt;/dfn&gt; is the element returned by the following
+  algorithm:&lt;/p&gt;
 
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; has a defined &lt;span&gt;activation
+   behavior&lt;/span&gt;, then return &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; and abort
+   these steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; has a parent element, then set
+   &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; to that parent element and return to the
+   first step.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, there is no &lt;span&gt;nearest activatable
+   element&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;When a pointing device is clicked, the user agent must run these
+  steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;e&lt;/var&gt; be the &lt;span title=&quot;&quot;&gt;nearest
+   activatable element&lt;/span&gt; of the element designated by the user,
+   if any.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is an element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, &lt;span&gt;run
+   pre-click activation steps&lt;/span&gt; on it.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Dispatching the required &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt;
+    event.&lt;/p&gt;
+
+    &lt;p class=&quot;XXX&quot;&gt;Another specification presumably requires the
+    firing of the &lt;span title=&quot;event-click&quot;&gt;click&lt;/span&gt; event?&lt;/p&gt;
+
+    &lt;p&gt;If there is an element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;, then the default
+    action of the &lt;span title=&quot;event-click&quot;&gt;click&lt;/span&gt; event must be
+    to &lt;span&gt;run post-click activation steps&lt;/span&gt; on element &lt;var
+    title=&quot;&quot;&gt;e&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p&gt;If there is an element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt; but the event is
+    canceled, the user agent must &lt;span&gt;run canceled activation
+    steps&lt;/span&gt; on element &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;  
+
   &lt;p class=&quot;note&quot;&gt;The above doesn't happen for arbitrary synthetic
   events dispatched by author script. However, the &lt;code
   title=&quot;dom-click&quot;&gt;click()&lt;/code&gt; method can be used to make it
   happen programmatically.&lt;/p&gt;
 
-  &lt;p&gt;For certain form controls, this process is complicated further by
-  &lt;a
-  href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#the-click">http://www.whatwg.org/specs/web-forms/current-work/#the-click</A>&quot;&gt;changes
-  that must happen around the click event&lt;/a&gt;. &lt;a
-  href=&quot;#refsWF2&quot;&gt;[WF2]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXX WF2: when this is merged into
-  this spec, update xrefs --&gt;
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;run post-click activation
+  steps&lt;/dfn&gt; on an element, the user agent must &lt;span&gt;fire a simple
+  event&lt;/span&gt; called &lt;code
+  title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt; at that element. The
+  default action of this event must be to &lt;span&gt;run final activation
+  steps&lt;/span&gt; on that element. If the event is canceled, the user
+  agent must &lt;span&gt;run canceled activation steps&lt;/span&gt; on the element
+  instead.&lt;/p&gt;
 
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;run pre-click activation steps&lt;/dfn&gt;
+  on an element, it must run the &lt;dfn&gt;pre-click activation steps&lt;/dfn&gt;
+  defined for that element, if any.&lt;/p&gt;
 
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;run canceled activation steps&lt;/dfn&gt;
+  on an element, it must run the &lt;dfn&gt;canceled activation steps&lt;/dfn&gt;
+  defined for that element, if any.&lt;/p&gt;
 
+  &lt;p&gt;When a user agent is to &lt;dfn&gt;run final activation steps&lt;/dfn&gt; on
+  an element, it must run the &lt;dfn&gt;activation behavior&lt;/dfn&gt; defined
+  for that element. Activation behaviors can refer to the &lt;code
+  title=&quot;event-click&quot;&gt;click&lt;/code&gt; and &lt;code
+  title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt; events that were fired
+  by the steps above leading up to this point.&lt;/p&gt;
+
+
+
   &lt;h4&gt;Transparent content models&lt;/h4&gt;
 
   &lt;p&gt;Some elements are described as &lt;dfn&gt;transparent&lt;/dfn&gt;; they have
@@ -11949,9 +11997,8 @@
    &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception and abort these
    steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the target of the &lt;code
-   title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt; event is an
-   &lt;code&gt;img&lt;/code&gt; element with an &lt;code
+   &lt;li&gt;&lt;p&gt;If the target of the &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt;
+   event is an &lt;code&gt;img&lt;/code&gt; element with an &lt;code
    title=&quot;attr-img-ismap&quot;&gt;ismap&lt;/code&gt; attribute specified, then
    server-side image map processing must be performed, as follows:&lt;/p&gt;
 
@@ -11988,12 +12035,6 @@
 
   &lt;/ol&gt;
 
-  &lt;p class=&quot;note&quot;&gt;One way that a user agent can enable users to follow
-  hyperlinks is by allowing &lt;code&gt;a&lt;/code&gt; elements to be clicked, or
-  focussed and activated by the keyboard. This &lt;span
-  title=&quot;interactive content&quot;&gt;will cause&lt;/span&gt; the aforementioned
-  &lt;span&gt;activation behavior&lt;/span&gt; to be invoked.&lt;/p&gt;
-
   &lt;p&gt;The DOM attributes &lt;dfn
   title=&quot;dom-a-href&quot;&gt;&lt;code&gt;href&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
   title=&quot;dom-a-ping&quot;&gt;&lt;code&gt;ping&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
@@ -22556,12 +22597,6 @@
 
   &lt;/ol&gt;
 
-  &lt;p class=&quot;note&quot;&gt;One way that a user agent can enable users to follow
-  hyperlinks is by allowing &lt;code&gt;area&lt;/code&gt; elements to be clicked,
-  or focussed and activated by the keyboard. This &lt;span
-  title=&quot;interactive content&quot;&gt;will cause&lt;/span&gt; the aforementioned
-  &lt;span&gt;activation behavior&lt;/span&gt; to be invoked.&lt;/p&gt;
-
   &lt;p&gt;The DOM attributes &lt;dfn
   title=&quot;dom-area-alt&quot;&gt;&lt;code&gt;alt&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
   title=&quot;dom-area-coords&quot;&gt;&lt;code&gt;coords&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
@@ -25331,6 +25366,26 @@
   descendant in &lt;span&gt;tree order&lt;/span&gt; is the &lt;code&gt;label&lt;/code&gt;
   element's &lt;span&gt;labeled control&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code&gt;label&lt;/code&gt; element's exact default presentation and
+  behavior, in particular what its &lt;span&gt;activation behavior&lt;/span&gt;
+  might be, if anything, should match the platform's label
+  behavior.&lt;/p&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;For example, on platforms where clicking a checkbox label checks
+   the checkbox, clicking the &lt;code&gt;label&lt;/code&gt; in the following
+   snippet could trigger the user agent to &lt;span&gt;run synthetic click
+   activation steps&lt;/psna&gt; on the &lt;code&gt;input&lt;/code&gt; element, as if
+   the element itself had been triggered by the user:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;label&gt;&lt;input type=checkbox name=lost&gt; Lost&lt;/label&gt;&lt;/pre&gt;
+
+   &lt;p&gt;On other platforms, the behavior might be just to focus the
+   control, or do nothing.&lt;/p&gt;
+
+  &lt;/div&gt;
+
   &lt;p&gt;The &lt;code title=&quot;attr-fae-form&quot;&gt;form&lt;/code&gt; attribute is used to
   explicitly associate the &lt;code&gt;label&lt;/code&gt; element with its
   &lt;span&gt;form owner&lt;/span&gt;.&lt;/p&gt;
@@ -25355,15 +25410,7 @@
   form-associated elements&lt;/span&gt;, on getting, must return that
   &lt;code&gt;NodeList&lt;/code&gt; object.&lt;/p&gt;
 
-  &lt;!-- The label element's exact default presentation and behaviour
-  should match the platform's label behaviour. For example, on
-  platforms where clicking a checkbox label checks the checkbox,
-  clicking a label element should cause a click event to be
-  synthesised and fired at the checkbox. XXX should define activation
-  behaviour here; clicking on nested link? nested label? label when it
-  has a checkbox? etc --&gt;
 
-
   &lt;h4&gt;The &lt;dfn&gt;&lt;code&gt;input&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=&quot;element&quot;&gt;
@@ -42946,16 +42993,11 @@
 
   &lt;h3&gt;Activation&lt;/h3&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-click&quot;&gt;click()&lt;/dfn&gt; method must &lt;span&gt;fire a
-  &lt;code&gt;click&lt;/code&gt; event&lt;/span&gt; at the element, whose default action
-  is the &lt;span title=&quot;fire a DOMActivate event&quot;&gt;firing of a further
-  &lt;code title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt; event&lt;/span&gt; at
-  the same element, whose own default action is to go through all the
-  elements the &lt;code title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt;
-  event bubbled through (starting at the target node and going towards
-  the &lt;code&gt;Document&lt;/code&gt; node), looking for an element with an
-  &lt;span&gt;activation behavior&lt;/span&gt;; the first element, in reverse tree
-  order, to have one, must have its activation behavior executed.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-click&quot;&gt;click()&lt;/dfn&gt; method must, if the
+  element has a defined &lt;span&gt;activation behavior&lt;/span&gt;, &lt;span&gt;run
+  synthetic click activation steps&lt;/span&gt; on the element. Otherwise,
+  the user agent must &lt;span&gt;fire a &lt;code&gt;click&lt;/code&gt; event&lt;/span&gt; at
+  the element.&lt;/p&gt;
 
 
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009156.html">[html5] r2271 - [] (0) WF2: &lt;input type=button&gt;
</A></li>
	<LI>Next message: <A HREF="009158.html">[html5] r2273 - [] (0) WF2: required constraint.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9157">[ date ]</a>
              <a href="thread.html#9157">[ thread ]</a>
              <a href="subject.html#9157">[ subject ]</a>
              <a href="author.html#9157">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
