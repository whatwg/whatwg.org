<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2384 - [] (0) Define 'week' syntax. Details coming later.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2384%20-%20%5B%5D%20%280%29%20Define%20%27week%27%20syntax.%20Details%20coming%20later.&In-Reply-To=%3C20081030015635.304DC141AE4%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009267.html">
   <LINK REL="Next"  HREF="009269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2384 - [] (0) Define 'week' syntax. Details coming later.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2384%20-%20%5B%5D%20%280%29%20Define%20%27week%27%20syntax.%20Details%20coming%20later.&In-Reply-To=%3C20081030015635.304DC141AE4%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2384 - [] (0) Define 'week' syntax. Details coming later.">whatwg at whatwg.org
       </A><BR>
    <I>Wed Oct 29 18:56:35 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009267.html">[html5] r2383 - [aco] (2) Define 'month' syntax,	and tighten up the rest of the datetime definitions.
</A></li>
        <LI>Next message: <A HREF="009269.html">[html5] r2385 - [] (0) WF2: Define weeks.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9268">[ date ]</a>
              <a href="thread.html#9268">[ thread ]</a>
              <a href="subject.html#9268">[ subject ]</a>
              <a href="author.html#9268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-10-29 18:56:34 -0700 (Wed, 29 Oct 2008)
New Revision: 2384

Modified:
   index
   source
Log:
[] (0) Define 'week' syntax. Details coming later.

Modified: index
===================================================================
--- index	2008-10-30 01:39:25 UTC (rev 2383)
+++ index	2008-10-30 01:56:34 UTC (rev 2384)
@@ -2748,7 +2748,7 @@
    interpret the resulting sequence as a base-ten integer. Let that
    number be the &lt;var title=&quot;&quot;&gt;month&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;month&lt;/var&gt; is not a number in the range
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;month&lt;/var&gt; is not a number in the range
    1&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;month&lt;/var&gt;&nbsp;&le;&nbsp;12, then
    fail.&lt;/li&gt;
 
@@ -2945,7 +2945,7 @@
    (possibly with a fractional part). Let &lt;var title=&quot;&quot;&gt;second&lt;/var&gt;
    be that number instead of the string version.&lt;/li&gt;
 
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;second&lt;/var&gt; is not a number in the range
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;second&lt;/var&gt; is not a number in the range
    0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;second&lt;/var&gt;&nbsp;&lt;&nbsp;60, then
    fail.&lt;/li&gt;
 
@@ -3196,14 +3196,69 @@
 
   &lt;!-- XXX ISO week information --&gt;
 
-  &lt;p class=XXX&gt;... &lt;dfn id=valid-week-string&gt;valid week string&lt;/dfn&gt;&lt;/p&gt;
+  &lt;p class=XXX&gt;The &lt;dfn id=week-number&gt;week number&lt;/dfn&gt; of a day is ...&lt;/p&gt;
 
-  &lt;p class=XXX&gt;... rules to &lt;dfn id=parse-a-week-string&gt;parse a week string&lt;/dfn&gt;&lt;/p&gt;
+  &lt;p class=XXX&gt;The &lt;dfn id=week-number-of-the-last-day&gt;week number of the last day&lt;/dfn&gt; of a year ...&lt;/p&gt;
 
+  &lt;p&gt;A string is a &lt;dfn id=valid-week-string&gt;valid week string&lt;/dfn&gt; representing a year
+  &lt;var title=&quot;&quot;&gt;year&lt;/var&gt; and week &lt;var title=&quot;&quot;&gt;week&lt;/var&gt; if it
+  consists of the following components in the given order:&lt;/p&gt;
 
+  &lt;ol&gt;&lt;li&gt;Four or more &lt;a href=#concept-datetime-digit title=concept-datetime-digit&gt;digits&lt;/a&gt;, representing &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;&lt;/li&gt;
 
-  &lt;h5 id=vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.4.4.7 &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
+   &lt;li&gt;A U+002D HYPHEN-MINUS character (-)&lt;/li&gt;
 
+   &lt;li&gt;A U+0057 LATIN CAPITAL LETTER W character&lt;/li&gt;
+
+   &lt;li&gt;Two &lt;a href=#concept-datetime-digit title=concept-datetime-digit&gt;digits&lt;/a&gt;,
+   representing the week &lt;var title=&quot;&quot;&gt;week&lt;/var&gt;, in the range
+   1&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;week&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;maxweek&lt;/var&gt;, where &lt;var title=&quot;&quot;&gt;maxweek&lt;/var&gt; is the
+   &lt;a href=#week-number-of-the-last-day&gt;week number of the last day&lt;/a&gt; of year &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The rules to &lt;dfn id=parse-a-week-string&gt;parse a week string&lt;/dfn&gt; are as follows. This
+  will either return a year and week, or nothing. If at any point the
+  algorithm says that it &quot;fails&quot;, this means that it is aborted at
+  that point and returns nothing.&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being
+   parsed.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be a pointer into &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, initially pointing at the start of the
+   string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9). If the collected
+   sequence is not at least four characters long, then
+   fail. Otherwise, interpret the resulting sequence as a base-ten
+   integer. Let that number be the &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+002D HYPHEN-MINUS character,
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; or if the character at &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is not a 0057 LATIN CAPITAL LETTER W
+   character, then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   forwards one character.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9). If the collected
+   sequence is not exactly two characters long, then fail. Otherwise,
+   interpret the resulting sequence as a base-ten integer. Let that
+   number be the &lt;var title=&quot;&quot;&gt;week&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maxweek&lt;/var&gt; be the &lt;a href=#week-number-of-the-last-day&gt;week number of
+   the last day&lt;/a&gt; of year &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;week&lt;/var&gt; is not a number in the range
+   1&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;week&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;maxweek&lt;/var&gt;, then fail.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is &lt;em&gt;not&lt;/em&gt; beyond the
+   end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then fail.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;year&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;week&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;h5 id=vaguer-moments-in-time&gt;&lt;span class=secno&gt;2.4.4.7 &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
+
   &lt;p&gt;This section defines &lt;dfn id=date-or-time-string title=&quot;date or time string&quot;&gt;date or
   time strings&lt;/dfn&gt;. There are two kinds, &lt;dfn id=date-or-time-string-in-content title=&quot;date or time
   string in content&quot;&gt;date or time strings in content&lt;/dfn&gt;, and &lt;dfn id=date-or-time-string-in-attributes title=&quot;date or time string in attributes&quot;&gt;date or time strings in

Modified: source
===================================================================
--- source	2008-10-30 01:39:25 UTC (rev 2383)
+++ source	2008-10-30 01:56:34 UTC (rev 2384)
@@ -2036,9 +2036,9 @@
    interpret the resulting sequence as a base-ten integer. Let that
    number be the &lt;var title=&quot;&quot;&gt;month&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;month&lt;/var&gt; is not a number in the range
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;month&lt;/var&gt; is not a number in the range
    1&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;month&lt;/var&gt;&nbsp;&le;&nbsp;12, then
-   fail.&lt;/li&gt;
+   fail.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;year&lt;/var&gt; and &lt;var
    title=&quot;&quot;&gt;month&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -2301,9 +2301,9 @@
    (possibly with a fractional part). Let &lt;var title=&quot;&quot;&gt;second&lt;/var&gt;
    be that number instead of the string version.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;second&lt;/var&gt; is not a number in the range
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;second&lt;/var&gt; is not a number in the range
    0&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;second&lt;/var&gt;&nbsp;&lt;&nbsp;60, then
-   fail.&lt;/li&gt;
+   fail.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;hour&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;minute&lt;/var&gt;,
    and &lt;var title=&quot;&quot;&gt;second&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -2640,12 +2640,87 @@
 
   &lt;!-- XXX ISO week information --&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;... &lt;dfn&gt;valid week string&lt;/dfn&gt;&lt;/p&gt;
+  &lt;p class=&quot;XXX&quot;&gt;The &lt;dfn&gt;week number&lt;/dfn&gt; of a day is ...&lt;/p&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;... rules to &lt;dfn&gt;parse a week string&lt;/dfn&gt;&lt;/p&gt;
+  &lt;p class=&quot;XXX&quot;&gt;The &lt;dfn&gt;week number of the last day&lt;/dfn&gt; of a year ...&lt;/p&gt;
 
+  &lt;p&gt;A string is a &lt;dfn&gt;valid week string&lt;/dfn&gt; representing a year
+  &lt;var title=&quot;&quot;&gt;year&lt;/var&gt; and week &lt;var title=&quot;&quot;&gt;week&lt;/var&gt; if it
+  consists of the following components in the given order:&lt;/p&gt;
 
+  &lt;ol&gt;
 
+   &lt;li&gt;Four or more &lt;span
+   title=&quot;concept-datetime-digit&quot;&gt;digits&lt;/span&gt;, representing &lt;var
+   title=&quot;&quot;&gt;year&lt;/var&gt;&lt;/li&gt;
+
+   &lt;li&gt;A U+002D HYPHEN-MINUS character (-)&lt;/li&gt;
+
+   &lt;li&gt;A U+0057 LATIN CAPITAL LETTER W character&lt;/li&gt;
+
+   &lt;li&gt;Two &lt;span title=&quot;concept-datetime-digit&quot;&gt;digits&lt;/span&gt;,
+   representing the week &lt;var title=&quot;&quot;&gt;week&lt;/var&gt;, in the range
+   1&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;week&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+   title=&quot;&quot;&gt;maxweek&lt;/var&gt;, where &lt;var title=&quot;&quot;&gt;maxweek&lt;/var&gt; is the
+   &lt;span&gt;week number of the last day&lt;/span&gt; of year &lt;var
+   title=&quot;&quot;&gt;year&lt;/var&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The rules to &lt;dfn&gt;parse a week string&lt;/dfn&gt; are as follows. This
+  will either return a year and week, or nothing. If at any point the
+  algorithm says that it &quot;fails&quot;, this means that it is aborted at
+  that point and returns nothing.&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being
+   parsed.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be a pointer into &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt;, initially pointing at the start of the
+   string.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9). If the collected
+   sequence is not at least four characters long, then
+   fail. Otherwise, interpret the resulting sequence as a base-ten
+   integer. Let that number be the &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt; or if the character at &lt;var
+   title=&quot;&quot;&gt;position&lt;/var&gt; is not a U+002D HYPHEN-MINUS character,
+   then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; forwards
+   one character.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is beyond the end of &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt; or if the character at &lt;var
+   title=&quot;&quot;&gt;position&lt;/var&gt; is not a 0057 LATIN CAPITAL LETTER W
+   character, then fail. Otherwise, move &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   forwards one character.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9). If the collected
+   sequence is not exactly two characters long, then fail. Otherwise,
+   interpret the resulting sequence as a base-ten integer. Let that
+   number be the &lt;var title=&quot;&quot;&gt;week&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maxweek&lt;/var&gt; be the &lt;span&gt;week number of
+   the last day&lt;/span&gt; of year &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;week&lt;/var&gt; is not a number in the range
+   1&nbsp;&le;&nbsp;&lt;var title=&quot;&quot;&gt;week&lt;/var&gt;&nbsp;&le;&nbsp;&lt;var
+   title=&quot;&quot;&gt;maxweek&lt;/var&gt;, then fail.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is &lt;em&gt;not&lt;/em&gt; beyond the
+   end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then fail.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;year&lt;/var&gt; and &lt;var
+   title=&quot;&quot;&gt;week&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+
   &lt;h5&gt;Vaguer moments in time&lt;/h5&gt;
 
   &lt;p&gt;This section defines &lt;dfn title=&quot;date or time string&quot;&gt;date or


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009267.html">[html5] r2383 - [aco] (2) Define 'month' syntax,	and tighten up the rest of the datetime definitions.
</A></li>
	<LI>Next message: <A HREF="009269.html">[html5] r2385 - [] (0) WF2: Define weeks.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9268">[ date ]</a>
              <a href="thread.html#9268">[ thread ]</a>
              <a href="subject.html#9268">[ subject ]</a>
              <a href="author.html#9268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
