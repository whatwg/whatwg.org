<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1795 - [] (0) Define how to resolve a relative URL. Work	in progress; not yet integrate [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1795%20-%20%5B%5D%20%280%29%20Define%20how%20to%20resolve%20a%20relative%20URL.%20Work%0A%09in%20progress%3B%20not%20yet%20integrate%20%5B...%5D&In-Reply-To=%3C20080624212147.2B53438E133%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008692.html">
   <LINK REL="Next"  HREF="008694.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1795 - [] (0) Define how to resolve a relative URL. Work	in progress; not yet integrate [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1795%20-%20%5B%5D%20%280%29%20Define%20how%20to%20resolve%20a%20relative%20URL.%20Work%0A%09in%20progress%3B%20not%20yet%20integrate%20%5B...%5D&In-Reply-To=%3C20080624212147.2B53438E133%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1795 - [] (0) Define how to resolve a relative URL. Work	in progress; not yet integrate [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Jun 24 14:21:47 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008692.html">[html5] r1794 - [e] (0) Remove the paragraph that says 'URI' means	'IRI' since we'll just use 'U [...]
</A></li>
        <LI>Next message: <A HREF="008694.html">[html5] r1796 - [] (0) Factor out the URL parsing rules and use	them to define the URL decomposi [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8693">[ date ]</a>
              <a href="thread.html#8693">[ thread ]</a>
              <a href="subject.html#8693">[ subject ]</a>
              <a href="author.html#8693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-06-24 14:21:46 -0700 (Tue, 24 Jun 2008)
New Revision: 1795

Modified:
   index
   source
Log:
[] (0) Define how to resolve a relative URL. Work in progress; not yet integrated with the rest of the spec.

Modified: index
===================================================================
--- index	2008-06-24 01:11:35 UTC (rev 1794)
+++ index	2008-06-24 21:21:46 UTC (rev 1795)
@@ -216,16 +216,13 @@
        &lt;li&gt;&lt;a href=&quot;#terminology0&quot;&gt;&lt;span class=secno&gt;2.3.1
         &lt;/span&gt;Terminology&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#parsing0&quot;&gt;&lt;span class=secno&gt;2.3.2 &lt;/span&gt;Parsing
+       &lt;li&gt;&lt;a href=&quot;#resolving&quot;&gt;&lt;span class=secno&gt;2.3.2 &lt;/span&gt;Resolving
         URLs&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#resolving&quot;&gt;&lt;span class=secno&gt;2.3.3 &lt;/span&gt;Resolving
-        URLs&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#open-issues&quot;&gt;&lt;span class=secno&gt;2.3.4 &lt;/span&gt;Open
+       &lt;li&gt;&lt;a href=&quot;#open-issues&quot;&gt;&lt;span class=secno&gt;2.3.3 &lt;/span&gt;Open
         issues&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#interfaces&quot;&gt;&lt;span class=secno&gt;2.3.5 &lt;/span&gt;Interfaces
+       &lt;li&gt;&lt;a href=&quot;#interfaces&quot;&gt;&lt;span class=secno&gt;2.3.4 &lt;/span&gt;Interfaces
         for URI manipulation&lt;/a&gt;
       &lt;/ul&gt;
 
@@ -1176,7 +1173,7 @@
          &lt;li&gt;&lt;a href=&quot;#writing&quot;&gt;&lt;span class=secno&gt;5.7.3.1. &lt;/span&gt;Writing
           cache manifests&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing1&quot;&gt;&lt;span class=secno&gt;5.7.3.2. &lt;/span&gt;Parsing
+         &lt;li&gt;&lt;a href=&quot;#parsing0&quot;&gt;&lt;span class=secno&gt;5.7.3.2. &lt;/span&gt;Parsing
           cache manifests&lt;/a&gt;
         &lt;/ul&gt;
 
@@ -1555,7 +1552,7 @@
        &lt;li&gt;&lt;a href=&quot;#connecting&quot;&gt;&lt;span class=secno&gt;7.2.2 &lt;/span&gt;Connecting to
         an event stream&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#parsing2&quot;&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Parsing an
+       &lt;li&gt;&lt;a href=&quot;#parsing1&quot;&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Parsing an
         event stream&lt;/a&gt;
 
        &lt;li&gt;&lt;a href=&quot;#event-stream-interpretation&quot;&gt;&lt;span class=secno&gt;7.2.4
@@ -1814,7 +1811,7 @@
      &lt;li&gt;&lt;a href=&quot;#serializing&quot;&gt;&lt;span class=secno&gt;9.4 &lt;/span&gt;Serializing HTML
       fragments&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#parsing3&quot;&gt;&lt;span class=secno&gt;9.5 &lt;/span&gt;Parsing HTML
+     &lt;li&gt;&lt;a href=&quot;#parsing2&quot;&gt;&lt;span class=secno&gt;9.5 &lt;/span&gt;Parsing HTML
       fragments&lt;/a&gt;
 
      &lt;li&gt;&lt;a href=&quot;#named&quot;&gt;&lt;span class=secno&gt;9.6 &lt;/span&gt;Named character
@@ -2407,21 +2404,6 @@
      uses an XML serialization with namespaces. &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;
      &lt;a href=&quot;#refsXMLNAMES&quot;&gt;[XMLNAMES]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;dt&gt;XML Base
-
-   &lt;dd&gt; &lt;!-- XXXURL remove entire entry, define it all in URLs section --&gt;
-    &lt;p id=xmlBase&gt;User agents must follow the rules given by XML Base to
-     resolve relative URIs in HTML and XHTML fragments. That is the mechanism
-     used in this specification for resolving relative URIs in DOM trees. &lt;a
-     href=&quot;#refsXMLBASE&quot;&gt;[XMLBASE]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p class=note&gt;It is possible for &lt;code title=attr-xml-base&gt;&lt;a
-     href=&quot;#xmlbase&quot;&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes to be present even in
-     HTML fragments, as such attributes can be added dynamically using
-     script. (Such scripts would not be conforming, however, as &lt;code
-     title=attr-xml-base&gt;&lt;a href=&quot;#xmlbase&quot;&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes as
-     not allowed in &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;.)&lt;/p&gt;
-
    &lt;dt&gt;DOM
 
    &lt;dd&gt;
@@ -2686,6 +2668,12 @@
   &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;URLs&lt;/h3&gt;
   &lt;!-- XXXURL --&gt;
 
+  &lt;p&gt;This specification defines the term &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt;, and defines
+   various algorithms for dealing with URLs, because for historical reasons
+   the rules defined by the URI and IRI specifications are not a complete
+   description of what HTML user agents need to implement to be compatible
+   with Web content.
+
   &lt;p class=big-issue&gt;The text in this section is not yet integrated with the
    rest of the specification.
 
@@ -2723,40 +2711,243 @@
      href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;
   &lt;/ul&gt;
 
-  &lt;p&gt;A &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt; is a &lt;dfn id=valid0&gt;valid absolute URL&lt;/dfn&gt; if
-   it is a &lt;a href=&quot;#valid&quot;&gt;valid URL&lt;/a&gt; and has an absolute form. &lt;a
-   href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;
+  &lt;h4 id=resolving&gt;&lt;span class=secno&gt;2.3.2 &lt;/span&gt;Resolving URLs&lt;/h4&gt;
 
-  &lt;h4 id=parsing0&gt;&lt;span class=secno&gt;2.3.2 &lt;/span&gt;Parsing URLs&lt;/h4&gt;
+  &lt;p&gt;Relative URLs are resolved relative to a base URL. The &lt;dfn
+   id=base-&gt;base URL&lt;/dfn&gt; of a &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt; is the &lt;a
+   href=&quot;#absolute&quot;&gt;absolute URL&lt;/a&gt; obtained as follows:
 
-  &lt;p class=big-issue&gt;...
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;If the URL to be resolved was passed to an API
 
-  &lt;h4 id=resolving&gt;&lt;span class=secno&gt;2.3.3 &lt;/span&gt;Resolving URLs&lt;/h4&gt;
+   &lt;dd&gt;
+    &lt;p&gt;The base URL is the &lt;a href=&quot;#document0&quot;&gt;document base URL&lt;/a&gt; of the
+     script's &lt;a href=&quot;#script4&quot;&gt;script document context&lt;/a&gt;.
 
-  &lt;div class=big-issue&gt;
-   &lt;p&gt;First parse it (we need to define that. For some schemes it's not per
-    spec -- e.g. apparently for ftp: we should split from hosts on ';'). Then
-    handle each bit as follows:&lt;/p&gt;
+   &lt;dt&gt;If the URL to be resolved is from the value of a content attribute
 
-   &lt;p&gt;scheme: no further processing (treat %-escaped characters literally,
-    treat unicode characters as unicode characters).&lt;/p&gt;
+   &lt;dd&gt;
+    &lt;p&gt;The base URL is the &lt;i&gt;base URI of the element&lt;/i&gt; that the attribute
+     is on, as defined by the XML Base specification, with &lt;i&gt;the base URI of
+     the document entity&lt;/i&gt; being defined as the &lt;a
+     href=&quot;#document0&quot;&gt;document base URL&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt;
+     that owns the element.&lt;/p&gt;
 
-   &lt;p&gt;host: expand %-encoded bytes to Unicode as UTF-8, treat unicode
-    characters as per IDN.&lt;/p&gt;
+    &lt;p&gt;For the purposes of the XML Base specification, user agents must act
+     as if all &lt;code&gt;Document&lt;/code&gt; objects represented XML documents.&lt;/p&gt;
 
-   &lt;p&gt;path: don't expand %-encoded bytes. Re-encode unicode to UTF-8 and
-    percent-encode.&lt;/p&gt;
+    &lt;p class=note&gt;It is possible for &lt;code title=attr-xml-base&gt;&lt;a
+     href=&quot;#xmlbase&quot;&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes to be present even in
+     HTML fragments, as such attributes can be added dynamically using
+     script. (Such scripts would not be conforming, however, as &lt;code
+     title=attr-xml-base&gt;&lt;a href=&quot;#xmlbase&quot;&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes
+     are not allowed in &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;.)&lt;/p&gt;
+  &lt;/dl&gt;
 
-   &lt;p&gt;query: don't expand %-encoded bytes. Re-encode unicode to the page's
-    encoding. Do not percent-encode.&lt;/p&gt;
-  &lt;/div&gt;
+  &lt;p&gt;The &lt;dfn id=document0&gt;document base URL&lt;/dfn&gt; of a &lt;code&gt;Document&lt;/code&gt;
+   is the &lt;a href=&quot;#absolute&quot;&gt;absolute URL&lt;/a&gt; obtained by running these
+   steps:
 
-  &lt;p class=big-issue&gt;define what it means to resolve a relative URL when the
-   base URL doesn't have a path hierarchy (e.g. data:, javascript:,
-   about:blank URLs)
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;If there is no &lt;code&gt;&lt;a href=&quot;#base&quot;&gt;base&lt;/a&gt;&lt;/code&gt; element that is
+     both a child of &lt;a href=&quot;#the-head0&quot;&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/a&gt;
+     and has an &lt;code title=att-base-href&gt;href&lt;/code&gt; attribute, then the &lt;a
+     href=&quot;#document0&quot;&gt;document base URL&lt;/a&gt; is &lt;span&gt;the document's
+     address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;.
 
-  &lt;h4 id=open-issues&gt;&lt;span class=secno&gt;2.3.4 &lt;/span&gt;Open issues&lt;/h4&gt;
+   &lt;li&gt;
+    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the value of the &lt;code
+     title=att-base-href&gt;href&lt;/code&gt; attribute of the first such element.
 
+   &lt;li&gt;
+    &lt;p&gt;&lt;a href=&quot;#resolve&quot; title=&quot;resolve a URL&quot;&gt;Resolve&lt;/a&gt; the &lt;var
+     title=&quot;&quot;&gt;url&lt;/var&gt; URL, using &lt;span&gt;the document's
+     address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; as the &lt;a href=&quot;#document0&quot;&gt;document
+     base URL&lt;/a&gt;.
+
+   &lt;li&gt;
+    &lt;p&gt;The &lt;a href=&quot;#document0&quot;&gt;document base URL&lt;/a&gt; is the result of the
+     previous step if it was successful; otherwise it is &lt;span&gt;the document's
+     address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;.
+  &lt;/ol&gt;
+
+  &lt;p&gt;To &lt;dfn id=resolve&gt;resolve a URL&lt;/dfn&gt; to an &lt;a
+   href=&quot;#absolute&quot;&gt;absolute URL&lt;/a&gt; the user agent must use the following
+   steps. Resolving a URL can result in an error, in which case the URL is
+   not resolvable.
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt; being
+     resolved.
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; be the &lt;code&gt;Document&lt;/code&gt;
+     associated with &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; be the &lt;a href=&quot;#character1&quot;
+     title=&quot;document's character encoding&quot;&gt;character encoding&lt;/a&gt; of &lt;var
+     title=&quot;&quot;&gt;document&lt;/var&gt;.
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; be the &lt;a href=&quot;#base-&quot;&gt;base URL&lt;/a&gt; for
+     &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;. (This is an &lt;a href=&quot;#absolute&quot;&gt;absolute
+     URL&lt;/a&gt;.)
+
+   &lt;li&gt;
+    &lt;p&gt;Strip leading and trailing &lt;a href=&quot;#space&quot; title=&quot;space
+     character&quot;&gt;space characters&lt;/a&gt; from &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.
+
+   &lt;li&gt;
+    &lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; in the manner defined by RFC 3986, with
+     the following exceptions:&lt;/p&gt;
+
+    &lt;ul&gt;
+     &lt;li&gt;Add all characters with codepoints less than or equal to U+0020 or
+      greater than or equal to U+007F to the &lt;unreserved&gt; production.
+
+     &lt;li&gt;Add the characters U+0022, U+003C, U+003E, U+005B .. U+005E, U+0060,
+      and U+007B .. U+007D to the &lt;unreserved&gt; production. &lt;!--
+       0022 QUOTATION MARK
+       003C LESS-THAN SIGN
+       003E GREATER-THAN SIGN
+       005B LEFT SQUARE BRACKET
+       005C REVERSE SOLIDUS
+       005D RIGHT SQUARE BRACKET
+       005E CIRCUMFLEX ACCENT
+       0060 GRAVE ACCENT
+       007B LEFT CURLY BRACKET
+       007C VERTICAL LINE
+       007D RIGHT CURLY BRACKET
+      --&gt;
+      
+
+     &lt;li&gt;Add a single U+0025 PERCENT SIGN character as a second alternative
+      way of matching the &lt;pct-encoded&gt; production, except when the
+      &lt;pct-encoded&gt; is used in the &lt;reg-name&gt; production.
+
+     &lt;li&gt;Add the U+0023 NUMBER SIGN character to the characters allowed in
+      the &lt;fragment&gt; production.&lt;/li&gt;
+     &lt;!-- some browsers also have other differences, e.g. Mozilla
+     seems to treat &quot;;&quot; as if it was not in sub-delims, if the scheem
+     is &quot;ftp&quot;. --&gt;
+    &lt;/ul&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; doesn't match the &lt;URI-reference&gt;
+     production, even after the above changes are made to the ABNF
+     definitions, then return an error and abort these steps.&lt;/p&gt;
+
+    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; was successful, then make a note of
+     which substrings of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; matched each of the
+     following productions that was matched:&lt;/p&gt;
+
+    &lt;ul class=brief&gt;
+     &lt;li&gt;&lt;host&gt;
+
+     &lt;li&gt;&lt;path-abempty&gt;
+
+     &lt;li&gt;&lt;path-absolute&gt;
+
+     &lt;li&gt;&lt;path-noscheme&gt;
+
+     &lt;li&gt;&lt;path-rootless&gt;
+
+     &lt;li&gt;&lt;path-empty&gt;
+
+     &lt;li&gt;&lt;query&gt;
+    &lt;/ul&gt;
+
+    &lt;p&gt;When subsequent steps refer to the &lt;path&gt; production, they are
+     referring to whichever of those productions whose names start with
+     &quot;path-&quot; was matched. (Only one at a time can be matched.)&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in the &lt;host&gt;
+     production being matched, then replace the matching subtring of &lt;var
+     title=&quot;&quot;&gt;url&lt;/var&gt; with the string that results from expanding any
+     sequences of percent-encoded octets in that component that are valid
+     UTF-8 sequences into Unicode characters as defined by UTF-8.&lt;/p&gt;
+
+    &lt;p&gt;If any percent-encoded octets in that component are not valid UTF-8
+     sequences, then return an error and abort these steps.&lt;/p&gt;
+
+    &lt;p&gt;Apply the IDNA ToASCII algorithm to the matching substring, with both
+     the AllowUnassigned and UseSTD3ASCIIRules flags set. Replace the
+     matching substring with the result of the ToASCII algorithm.&lt;/p&gt;
+
+    &lt;p&gt;If ToASCII fails to convert one of the components of the string, e.g.
+     because it is too long or because it contains invalid characters, then
+     return an error and abort these steps. &lt;a
+     href=&quot;#refsRFC3490&quot;&gt;[RFC3490]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in the &lt;path&gt;
+     production being matched, then replace the matching substring of &lt;var
+     title=&quot;&quot;&gt;url&lt;/var&gt; with the string that results from applying the
+     following steps to each character that doesn't match the original
+     &lt;path&gt; production defined in RFC 3986:&lt;/p&gt;
+
+    &lt;ol&gt;
+     &lt;li&gt;Encode the character into a sequence of octets as defined by UTF-8.
+
+     &lt;li&gt;Replace the character with the percent-encoded form of those octets.
+    &lt;/ol&gt;
+
+    &lt;div class=example&gt;
+     &lt;p&gt;For instance if &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; was &quot;&lt;code
+      title=&quot;&quot;&gt;//example.com/a^b&amp;#x263a;c%FFd/?e&lt;/code&gt;&quot;, then there would
+      the substring matching the &lt;path&gt; production would be &quot;&lt;code
+      title=&quot;&quot;&gt;/a^b&amp;#x263a;c%FFd/&lt;/code&gt;&quot; and the two characters that would
+      have to be escaped would be &quot;&lt;code title=&quot;&quot;&gt;^&lt;/code&gt;&quot; and &quot;&lt;code
+      title=&quot;&quot;&gt;&amp;#x263a;&lt;/code&gt;&quot;. The result after this step was applied would
+      therefore be that &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; now had the value &quot;&lt;code
+      title=&quot;&quot;&gt;//example.com/a%5Eb%E2%98%BAc%FFd/?e&lt;/code&gt;&quot;.&lt;/p&gt;
+    &lt;/div&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in the &lt;query&gt;
+     production being matched, then replace the matching substring of &lt;var
+     title=&quot;&quot;&gt;url&lt;/var&gt; with the string that results from applying the
+     following steps to each character that doesn't match the original
+     &lt;query&gt; production defined in RFC 3986:&lt;/p&gt;
+
+    &lt;ol&gt;
+     &lt;li&gt;Encode the character into a sequence of octets as defined by the
+      encoding &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt;.
+
+     &lt;li&gt;Replace the character with the percent-encoded form of those octets.
+    &lt;/ol&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Apply the algorithm described in RFC 3986 section 5.2 Relative
+     Resolution, using &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; as the potentially relative
+     URI reference (&lt;var title=&quot;&quot;&gt;R&lt;/var&gt;), and &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; as
+     the base URI (&lt;var title=&quot;&quot;&gt;Base&lt;/var&gt;).
+
+   &lt;li&gt;
+    &lt;p&gt;Apply any relevant conformance criteria of RFC 3986 and RFC 3987,
+     returning an error and aborting these steps if appropriate.&lt;/p&gt;
+
+    &lt;p class=example&gt;For instance, if an absolute URI that would be returned
+     by the above algorithm violates the restrictions specific to its scheme,
+     e.g. a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI using the &quot;&lt;code
+     title=&quot;&quot;&gt;//&lt;/code&gt;&quot; naming authority syntax, then user agents are to
+     treat this as an error instead.&lt;!-- RFC 3986, 3.1
+    Scheme --&gt;&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Return the target URI (&lt;var title=&quot;&quot;&gt;T&lt;/var&gt;) returned by the Relative
+     Resolution algorithm.
+  &lt;/ol&gt;
+
+  &lt;p&gt;A &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt; is an &lt;dfn id=absolute&gt;absolute URL&lt;/dfn&gt; if &lt;a
+   href=&quot;#resolve&quot; title=&quot;resolve a URL&quot;&gt;resolving&lt;/a&gt; it results in the same
+   URL without an error.
+
+  &lt;h4 id=open-issues&gt;&lt;span class=secno&gt;2.3.3 &lt;/span&gt;Open issues&lt;/h4&gt;
+
   &lt;div class=big-issue&gt;
    &lt;p&gt;This section will do the following:&lt;/p&gt;
 
@@ -2766,16 +2957,6 @@
     &lt;li&gt;get rid of references to &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
      href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section
 
-    &lt;li&gt;define how to resolve relative URLs in markup attributes (using
-     XMLBase as defined elsewhere right now)
-
-    &lt;li&gt;define how to resolve relative URLs in APIs, using the &lt;dfn
-     id=scripts&gt;script's base URI&lt;/dfn&gt; maybe
-
-    &lt;li&gt;define &quot;an &lt;dfn id=elements3&gt;element's base URI&lt;/dfn&gt;&quot; and make the
-     various places that talk about a base URI in the context of an element
-     use that definition
-
     &lt;li&gt;make the language used to refer to resolving a base URI consistent
      throughout, maybe make it hyperlink to a definition each time
 
@@ -2826,7 +3007,7 @@
   &lt;/div&gt;
   &lt;!-- XXXURL change to URL --&gt;
 
-  &lt;h4 id=interfaces&gt;&lt;span class=secno&gt;2.3.5 &lt;/span&gt;Interfaces for URI
+  &lt;h4 id=interfaces&gt;&lt;span class=secno&gt;2.3.4 &lt;/span&gt;Interfaces for URI
    manipulation&lt;/h4&gt;
   &lt;!-- XXXURL change to URL --&gt;
 
@@ -3119,7 +3300,7 @@
 
   &lt;h5 id=unsigned&gt;&lt;span class=secno&gt;2.4.3.1. &lt;/span&gt;Unsigned integers&lt;/h5&gt;
 
-  &lt;p&gt;A string is a &lt;dfn id=valid1&gt;valid non-negative integer&lt;/dfn&gt; if it
+  &lt;p&gt;A string is a &lt;dfn id=valid0&gt;valid non-negative integer&lt;/dfn&gt; if it
    consists of one of more characters in the range U+0030 DIGIT ZERO (0) to
    U+0039 DIGIT NINE (9).
 
@@ -3180,7 +3361,7 @@
 
   &lt;h5 id=signed&gt;&lt;span class=secno&gt;2.4.3.2. &lt;/span&gt;Signed integers&lt;/h5&gt;
 
-  &lt;p&gt;A string is a &lt;dfn id=valid2&gt;valid integer&lt;/dfn&gt; if it consists of one
+  &lt;p&gt;A string is a &lt;dfn id=valid1&gt;valid integer&lt;/dfn&gt; if it consists of one
    of more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
    (9), optionally prefixed with a U+002D HYPHEN-MINUS (&quot;-&quot;) character.
 
@@ -3258,7 +3439,7 @@
 
   &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;2.4.3.3. &lt;/span&gt;Real numbers&lt;/h5&gt;
 
-  &lt;p&gt;A string is a &lt;dfn id=valid3&gt;valid floating point number&lt;/dfn&gt; if it
+  &lt;p&gt;A string is a &lt;dfn id=valid2&gt;valid floating point number&lt;/dfn&gt; if it
    consists of one of more characters in the range U+0030 DIGIT ZERO (0) to
    U+0039 DIGIT NINE (9), optionally with a single U+002E FULL STOP (&quot;.&quot;)
    character somewhere (either before these numbers, in between two numbers,
@@ -3384,7 +3565,7 @@
    &lt;code&gt;&lt;a href=&quot;#progress&quot;&gt;progress&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#meter&quot;&gt;meter&lt;/a&gt;&lt;/code&gt; elements.
 
-  &lt;p&gt;A &lt;dfn id=valid4&gt;valid denominator punctuation character&lt;/dfn&gt; is one of
+  &lt;p&gt;A &lt;dfn id=valid3&gt;valid denominator punctuation character&lt;/dfn&gt; is one of
    the characters from the table below. There is &lt;dfn id=a-value
    title=&quot;values associated with denominator punctuation characters&quot;&gt;a value
    associated with each denominator punctuation character&lt;/dfn&gt;, as shown in
@@ -3462,7 +3643,7 @@
     href=&quot;#refsUNICODE&quot;&gt;[UNICODE]&lt;/a&gt;
 
    &lt;li&gt;If there are still further characters in the string, and the next
-    character in the string is a &lt;a href=&quot;#valid4&quot;&gt;valid denominator
+    character in the string is a &lt;a href=&quot;#valid3&quot;&gt;valid denominator
     punctuation character&lt;/a&gt;, set &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; to that
     character.
 
@@ -3485,7 +3666,7 @@
     sub-algorithm in step 9.
 
    &lt;li&gt;If there are still further characters in the string, and the next
-    character in the string is a &lt;a href=&quot;#valid4&quot;&gt;valid denominator
+    character in the string is a &lt;a href=&quot;#valid3&quot;&gt;valid denominator
     punctuation character&lt;/a&gt;, return nothing and abort these steps.
 
    &lt;li&gt;If the string contains any other characters in the range U+0030 DIGIT
@@ -3520,7 +3701,7 @@
    &lt;li&gt;Parse &lt;var title=&quot;&quot;&gt;string&lt;/var&gt; according to the &lt;a
     href=&quot;#rules1&quot;&gt;rules for parsing floating point number values&lt;/a&gt;, to
     obtain &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;. This step cannot fail (&lt;var
-    title=&quot;&quot;&gt;string&lt;/var&gt; is guaranteed to be a &lt;a href=&quot;#valid3&quot;&gt;valid
+    title=&quot;&quot;&gt;string&lt;/var&gt; is guaranteed to be a &lt;a href=&quot;#valid2&quot;&gt;valid
     floating point number&lt;/a&gt;).
 
    &lt;li&gt;Return &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.
@@ -3529,15 +3710,15 @@
   &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;2.4.3.5.
    &lt;/span&gt;Percentages and dimensions&lt;/h5&gt;
 
-  &lt;p class=big-issue&gt;&lt;dfn id=valid5&gt;valid positive non-zero integers&lt;/dfn&gt;
+  &lt;p class=big-issue&gt;&lt;dfn id=valid4&gt;valid positive non-zero integers&lt;/dfn&gt;
    &lt;dfn id=rules2&gt;rules for parsing dimension values&lt;/dfn&gt; (only used by
    height/width on img, embed, object &mdash; lengths in css pixels or
    percentages)
 
   &lt;h5 id=lists&gt;&lt;span class=secno&gt;2.4.3.6. &lt;/span&gt;Lists of integers&lt;/h5&gt;
 
-  &lt;p&gt;A &lt;dfn id=valid6&gt;valid list of integers&lt;/dfn&gt; is a number of &lt;a
-   href=&quot;#valid2&quot; title=&quot;valid integer&quot;&gt;valid integers&lt;/a&gt; separated by
+  &lt;p&gt;A &lt;dfn id=valid5&gt;valid list of integers&lt;/dfn&gt; is a number of &lt;a
+   href=&quot;#valid1&quot; title=&quot;valid integer&quot;&gt;valid integers&lt;/a&gt; separated by
    U+002C COMMA characters, with no other characters (e.g. no &lt;a
    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;). In addition,
    there might be restrictions on the number of integers that can be given,
@@ -3828,7 +4009,7 @@
 
   &lt;h5 id=specific&gt;&lt;span class=secno&gt;2.4.4.1. &lt;/span&gt;Specific moments in time&lt;/h5&gt;
 
-  &lt;p&gt;A string is a &lt;dfn id=valid7&gt;valid datetime&lt;/dfn&gt; if it has four digits
+  &lt;p&gt;A string is a &lt;dfn id=valid6&gt;valid datetime&lt;/dfn&gt; if it has four digits
    (representing the year), a literal hyphen, two digits (representing the
    month), a literal hyphen, two digits (representing the day), optionally
    some spaces, either a literal T or a space, optionally some more spaces,
@@ -3861,7 +4042,7 @@
    U+002B PLUS SIGN, and the minus U+002D (same as the hyphen).
 
   &lt;div class=example&gt;
-   &lt;p&gt;The following are some examples of dates written as &lt;a href=&quot;#valid7&quot;
+   &lt;p&gt;The following are some examples of dates written as &lt;a href=&quot;#valid6&quot;
     title=&quot;valid datetime&quot;&gt;valid datetimes&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dl&gt;
@@ -3914,7 +4095,7 @@
    user agent must apply the following algorithm to the string. This will
    either return a time in UTC, with associated timezone information for
    round tripping or display purposes, or nothing, indicating the value is
-   not a &lt;a href=&quot;#valid7&quot;&gt;valid datetime&lt;/a&gt;. If at any point the algorithm
+   not a &lt;a href=&quot;#valid6&quot;&gt;valid datetime&lt;/a&gt;. If at any point the algorithm
    says that it &quot;fails&quot;, this means that it returns nothing.
 
   &lt;ol&gt;
@@ -4526,7 +4707,7 @@
 
   &lt;h4 id=time-offsets&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Time offsets&lt;/h4&gt;
 
-  &lt;p class=big-issue&gt;&lt;dfn id=valid8&gt;valid time offset&lt;/dfn&gt;, &lt;dfn
+  &lt;p class=big-issue&gt;&lt;dfn id=valid7&gt;valid time offset&lt;/dfn&gt;, &lt;dfn
    id=rules4&gt;rules for parsing time offsets&lt;/dfn&gt;, &lt;dfn id=time-offset&gt;time
    offset serialization rules&lt;/dfn&gt;; in the format &quot;5d4h3m2s1ms&quot; or &quot;3m 9.2s&quot;
    or &quot;00:00:00.00&quot; or similar.
@@ -4723,7 +4904,7 @@
 
   &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;2.4.8 &lt;/span&gt;References&lt;/h4&gt;
 
-  &lt;p&gt;A &lt;dfn id=valid9&gt;valid hash-name reference&lt;/dfn&gt; to an element of type
+  &lt;p&gt;A &lt;dfn id=valid8&gt;valid hash-name reference&lt;/dfn&gt; to an element of type
    &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; is a string consisting of a U+0023 NUMBER SIGN
    (&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;) character followed by a string which exactly
    matches the value of the &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute of an
@@ -4819,7 +5000,7 @@
    the attribute is absent, then the default value must be returned instead,
    or 0 if there is no default value. On setting, the given value must be
    converted to the shortest possible string representing the number as a &lt;a
-   href=&quot;#valid2&quot;&gt;valid integer&lt;/a&gt; in base ten and then that string must be
+   href=&quot;#valid1&quot;&gt;valid integer&lt;/a&gt; in base ten and then that string must be
    used as the new content attribute value.
 
   &lt;p&gt;If a reflecting DOM attribute is an &lt;em&gt;unsigned&lt;/em&gt; integer type
@@ -4830,7 +5011,7 @@
    hand, it fails, or if the attribute is absent, the default value must be
    returned instead, or 0 if there is no default value. On setting, the given
    value must be converted to the shortest possible string representing the
-   number as a &lt;a href=&quot;#valid1&quot;&gt;valid non-negative integer&lt;/a&gt; in base ten
+   number as a &lt;a href=&quot;#valid0&quot;&gt;valid non-negative integer&lt;/a&gt; in base ten
    and then that string must be used as the new content attribute value.
 
   &lt;p&gt;If a reflecting DOM attribute is an unsigned integer type
@@ -4845,7 +5026,7 @@
    value. On setting, if the value is zero, the user agent must fire an
    &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception. Otherwise, the given value must be
    converted to the shortest possible string representing the number as a &lt;a
-   href=&quot;#valid1&quot;&gt;valid non-negative integer&lt;/a&gt; in base ten and then that
+   href=&quot;#valid0&quot;&gt;valid non-negative integer&lt;/a&gt; in base ten and then that
    string must be used as the new content attribute value.
 
   &lt;p&gt;If a reflecting DOM attribute is a floating point number type
@@ -4870,7 +5051,7 @@
    other hand, it fails, or if the attribute is absent, the default value
    must be returned instead, or 0.0 if there is no default value. On setting,
    the given value must be converted to the shortest possible string
-   representing the number as a &lt;a href=&quot;#valid3&quot;&gt;valid floating point
+   representing the number as a &lt;a href=&quot;#valid2&quot;&gt;valid floating point
    number&lt;/a&gt; in base ten and then that string must be used as the new
    content attribute value.
 
@@ -6222,7 +6403,7 @@
   readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#links0&quot; title=dom-document-links&gt;links&lt;/a&gt;;
   readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#forms0&quot; title=dom-document-forms&gt;forms&lt;/a&gt;;
   readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#anchors&quot; title=dom-document-anchors&gt;anchors&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#scripts0&quot; title=dom-document-scripts&gt;scripts&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#scripts&quot; title=dom-document-scripts&gt;scripts&lt;/a&gt;;
   NodeList &lt;a href=&quot;#getelementsbyname&quot; title=dom-document-getElementsByName&gt;getElementsByName&lt;/a&gt;(in DOMString elementName);
   NodeList &lt;a href=&quot;#getelementsbyclassname&quot; title=dom-document-getElementsByClassName&gt;getElementsByClassName&lt;/a&gt;(in DOMString classNames);
 
@@ -6600,7 +6781,7 @@
   &lt;!-- XXX note that such elements are
   non-conforming --&gt;
 
-  &lt;p&gt;The &lt;dfn id=scripts0
+  &lt;p&gt;The &lt;dfn id=scripts
    title=dom-document-scripts&gt;&lt;code&gt;scripts&lt;/code&gt;&lt;/dfn&gt; attribute must
    return an &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;
    rooted at the &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
@@ -8545,27 +8726,6 @@
    (except the &lt;code&gt;&lt;a href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element and its &lt;code
    title=attr-html-manifest&gt;&lt;a href=&quot;#manifest&quot;&gt;manifest&lt;/a&gt;&lt;/code&gt;
    attribute).&lt;/p&gt;
-  &lt;!-- XXXURL move to URLs section --&gt;
-
-  &lt;p&gt;User agents must use the value of the &lt;code
-   title=att-base-href&gt;href&lt;/code&gt; attribute of the first &lt;code&gt;&lt;a
-   href=&quot;#base&quot;&gt;base&lt;/a&gt;&lt;/code&gt; element that is both a child of &lt;a
-   href=&quot;#the-head0&quot;&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/a&gt; and has an &lt;code
-   title=att-base-href&gt;href&lt;/code&gt; attribute, if there is such an element, as
-   the document entity's base URI for the purposes of section 5.1.1 of RFC
-   3986 (&quot;Establishing a Base URI&quot;: &quot;Base URI Embedded in Content&quot;). This
-   base URI from RFC 3986 is referred to by the algorithm given in XML Base,
-   which &lt;a href=&quot;#xmlBase&quot;&gt;is a normative part of this specification&lt;/a&gt;. &lt;a
-   href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
-  &lt;!-- XXXURL move to URLs section --&gt;
-
-  &lt;p&gt;If the base URI given by this attribute is a relative URI, it must be
-   resolved relative to the higher-level base URIs (i.e. the base URI from
-   the encapsulating entity or the URI used to retrieve the entity) to obtain
-   an absolute base URI. All &lt;code title=attr-xml-base&gt;&lt;a
-   href=&quot;#xmlbase&quot;&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes must be ignored when
-   resolving relative URIs in this &lt;code title=attr-base-href&gt;&lt;a
-   href=&quot;#href&quot;&gt;href&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
   &lt;!-- XXXURL leave this here, but make it clearer --&gt;
 
   &lt;p class=note&gt;If there are multiple &lt;code&gt;&lt;a href=&quot;#base&quot;&gt;base&lt;/a&gt;&lt;/code&gt;
@@ -8573,7 +8733,7 @@
    the first are ignored.
 
   &lt;p&gt;The &lt;dfn id=target title=attr-base-target&gt;&lt;code&gt;target&lt;/code&gt;&lt;/dfn&gt;
-   attribute, if specified, must contain a &lt;a href=&quot;#valid11&quot;&gt;valid browsing
+   attribute, if specified, must contain a &lt;a href=&quot;#valid10&quot;&gt;valid browsing
    context name or keyword&lt;/a&gt;. User agents use this name when &lt;a
    href=&quot;#following0&quot;&gt;following hyperlinks&lt;/a&gt;.
 
@@ -9409,8 +9569,8 @@
 
      &lt;li&gt;
       &lt;p&gt;Resolve the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; value to an absolute URI using
-       &lt;a href=&quot;#elements3&quot; title=&quot;element's base URI&quot;&gt;the base URI&lt;/a&gt; of
-       the &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element.
+       &lt;span title=&quot;element's base URI&quot;&gt;the base URI&lt;/span&gt; of the &lt;code&gt;&lt;a
+       href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element.
 
      &lt;li&gt;
       &lt;p&gt;Perform one or more of the following steps:&lt;/p&gt;
@@ -9446,9 +9606,9 @@
      attribute must have a value consisting either of:
 
     &lt;ul&gt;
-     &lt;li&gt; just a &lt;a href=&quot;#valid1&quot;&gt;valid non-negative integer&lt;/a&gt;, or
+     &lt;li&gt; just a &lt;a href=&quot;#valid0&quot;&gt;valid non-negative integer&lt;/a&gt;, or
 
-     &lt;li&gt; a &lt;a href=&quot;#valid1&quot;&gt;valid non-negative integer&lt;/a&gt;, followed by a
+     &lt;li&gt; a &lt;a href=&quot;#valid0&quot;&gt;valid non-negative integer&lt;/a&gt;, followed by a
       U+003B SEMICOLON (&lt;code title=&quot;&quot;&gt;;&lt;/code&gt;), followed by one or more &lt;a
       href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, followed by
       either a U+0055 LATIN CAPITAL LETTER U or a U+0075 LATIN SMALL LETTER
@@ -11306,7 +11466,7 @@
    attribute is omitted, the list is an ascending list (1, 2, 3, ...).
 
   &lt;p&gt;The &lt;dfn id=start0 title=attr-ol-start&gt;&lt;code&gt;start&lt;/code&gt;&lt;/dfn&gt;
-   attribute, if present, must be a &lt;a href=&quot;#valid2&quot;&gt;valid integer&lt;/a&gt;
+   attribute, if present, must be a &lt;a href=&quot;#valid1&quot;&gt;valid integer&lt;/a&gt;
    giving the ordinal value of the first list item.
 
   &lt;p&gt;If the &lt;code title=attr-ol-start&gt;&lt;a href=&quot;#start0&quot;&gt;start&lt;/a&gt;&lt;/code&gt;
@@ -11491,7 +11651,7 @@
    element.
 
   &lt;p&gt;The &lt;dfn id=value title=attr-li-value&gt;&lt;code&gt;value&lt;/code&gt;&lt;/dfn&gt;
-   attribute, if present, must be a &lt;a href=&quot;#valid2&quot;&gt;valid integer&lt;/a&gt;
+   attribute, if present, must be a &lt;a href=&quot;#valid1&quot;&gt;valid integer&lt;/a&gt;
    giving the ordinal value of the list item.
 
   &lt;p&gt;If the &lt;code title=attr-li-value&gt;&lt;a href=&quot;#value&quot;&gt;value&lt;/a&gt;&lt;/code&gt;
@@ -12948,7 +13108,7 @@
   &lt;p&gt;&lt;strong&gt;Author requirements&lt;/strong&gt;: The &lt;code
    title=attr-progress-max&gt;&lt;a href=&quot;#max&quot;&gt;max&lt;/a&gt;&lt;/code&gt; and &lt;code
    title=attr-progress-value&gt;&lt;a href=&quot;#value1&quot;&gt;value&lt;/a&gt;&lt;/code&gt; attributes,
-   when present, must have values that are &lt;a href=&quot;#valid3&quot; title=&quot;valid
+   when present, must have values that are &lt;a href=&quot;#valid2&quot; title=&quot;valid
    floating point number&quot;&gt;valid floating point numbers&lt;/a&gt;. The &lt;code
    title=attr-progress-max&gt;&lt;a href=&quot;#max&quot;&gt;max&lt;/a&gt;&lt;/code&gt; attribute, if
    present, must have a value greater than zero. The &lt;code
@@ -13163,7 +13323,7 @@
    title=attr-meter-max&gt;&lt;a href=&quot;#max1&quot;&gt;max&lt;/a&gt;&lt;/code&gt;, and &lt;code
    title=attr-meter-optimum&gt;&lt;a href=&quot;#optimum&quot;&gt;optimum&lt;/a&gt;&lt;/code&gt; attributes
    are all optional. When present, they must have values that are &lt;a
-   href=&quot;#valid3&quot; title=&quot;valid floating point number&quot;&gt;valid floating point
+   href=&quot;#valid2&quot; title=&quot;valid floating point number&quot;&gt;valid floating point
    numbers&lt;/a&gt;, and their values must satisfy the following inequalities:
 
   &lt;ul class=brief&gt;
@@ -14426,14 +14586,14 @@
 
   &lt;p&gt;If present, the &lt;code title=attr-mod-datetime&gt;&lt;a
    href=&quot;#datetime1&quot;&gt;datetime&lt;/a&gt;&lt;/code&gt; attribute must be a &lt;a
-   href=&quot;#valid7&quot;&gt;valid datetime&lt;/a&gt; value.
+   href=&quot;#valid6&quot;&gt;valid datetime&lt;/a&gt; value.
 
   &lt;p&gt;User agents must parse the &lt;code title=attr-mod-datetime&gt;&lt;a
    href=&quot;#datetime1&quot;&gt;datetime&lt;/a&gt;&lt;/code&gt; attribute according to the &lt;a
    href=&quot;#datetime-parser&quot;&gt;parse a string as a datetime value&lt;/a&gt; algorithm.
    If that doesn't return a time, then the modification has no associated
    timestamp (the value is non-conforming; it is not a &lt;a
-   href=&quot;#valid7&quot;&gt;valid datetime&lt;/a&gt;). Otherwise, the modification is marked
+   href=&quot;#valid6&quot;&gt;valid datetime&lt;/a&gt;). Otherwise, the modification is marked
    as having been made at the given datetime. User agents should use the
    associated timezone information to determine which timezone to present the
    given datetime in.
@@ -15446,7 +15606,7 @@
    will remain at the initial &lt;code&gt;about:blank&lt;/code&gt;&lt;!-- XXX xref --&gt; page.
 
   &lt;p&gt;The &lt;dfn id=name1 title=attr-iframe-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
-   attribute, if present, must be a &lt;a href=&quot;#valid10&quot;&gt;valid browsing context
+   attribute, if present, must be a &lt;a href=&quot;#valid9&quot;&gt;valid browsing context
    name&lt;/a&gt;. When the browsing context is created, if the attribute is
    present, the &lt;a href=&quot;#browsing2&quot;&gt;browsing context name&lt;/a&gt; must be set to
    the value of this attribute; otherwise, the &lt;a href=&quot;#browsing2&quot;&gt;browsing
@@ -16005,7 +16165,7 @@
    href=&quot;#type6&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attributes must be present.
 
   &lt;p&gt;The &lt;dfn id=name3 title=attr-object-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
-   attribute, if present, must be a &lt;a href=&quot;#valid10&quot;&gt;valid browsing context
+   attribute, if present, must be a &lt;a href=&quot;#valid9&quot;&gt;valid browsing context
    name&lt;/a&gt;.
 
   &lt;p&gt;When the element is created, and subsequently whenever the &lt;code
@@ -16950,7 +17110,7 @@
    allows the author to specify the pixel ratio of anamorphic &lt;a
    href=&quot;#media10&quot; title=&quot;media resource&quot;&gt;media resources&lt;/a&gt; that do not
    self-describe their pixel ratio. The attribute value, if specified, must
-   be a &lt;a href=&quot;#valid3&quot;&gt;valid floating point number&lt;/a&gt; giving the ratio of
+   be a &lt;a href=&quot;#valid2&quot;&gt;valid floating point number&lt;/a&gt; giving the ratio of
    the correct rendered width of each pixel to the actual width of each pixel
    in the image (i.e., the multiple by which the video's intrinsic width is
    to be multiplied to obtain the rendered width that gives the correct
@@ -19336,7 +19496,7 @@
    to control the size of the coordinate space: &lt;dfn id=width0
    title=attr-canvas-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=height0
    title=attr-canvas-height&gt;&lt;code&gt;height&lt;/code&gt;&lt;/dfn&gt;. These attributes, when
-   specified, must have values that are &lt;a href=&quot;#valid1&quot; title=&quot;valid
+   specified, must have values that are &lt;a href=&quot;#valid0&quot; title=&quot;valid
    non-negative integer&quot;&gt;valid non-negative integers&lt;/a&gt;. The &lt;a
    href=&quot;#rules&quot;&gt;rules for parsing non-negative integers&lt;/a&gt; must be used to
    obtain their numeric values. If an attribute is missing, or if parsing its
@@ -22100,7 +22260,7 @@
    href=&quot;#rectangle&quot; title=attr-area-shape-rect&gt;rectangle&lt;/a&gt; state.
 
   &lt;p&gt;The &lt;dfn id=coords title=attr-area-coords&gt;&lt;code&gt;coords&lt;/code&gt;&lt;/dfn&gt;
-   attribute must, if specified, contain a &lt;a href=&quot;#valid6&quot;&gt;valid list of
+   attribute must, if specified, contain a &lt;a href=&quot;#valid5&quot;&gt;valid list of
    integers&lt;/a&gt;. This attribute gives the coordinates for the shape described
    by the &lt;code title=attr-area-shape&gt;&lt;a href=&quot;#shape&quot;&gt;shape&lt;/a&gt;&lt;/code&gt;
    attribute. The processing for this attribute is described as part of the
@@ -22230,7 +22390,7 @@
    &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
    href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element. The &lt;code
    title=attr-area-usemap&gt;usemap&lt;/code&gt; attribute, if specified, must be a &lt;a
-   href=&quot;#valid9&quot;&gt;valid hash-name reference&lt;/a&gt; to a &lt;code&gt;&lt;a
+   href=&quot;#valid8&quot;&gt;valid hash-name reference&lt;/a&gt; to a &lt;code&gt;&lt;a
    href=&quot;#map&quot;&gt;map&lt;/a&gt;&lt;/code&gt; element.
 
   &lt;p&gt;If an &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a
@@ -22552,7 +22712,7 @@
    give the dimensions of the visual content of the element (the width and
    height respectively, relative to the nominal direction of the output
    medium), in CSS pixels. The attributes, if specified, must have values
-   that are &lt;a href=&quot;#valid5&quot;&gt;valid positive non-zero integers&lt;/a&gt;.
+   that are &lt;a href=&quot;#valid4&quot;&gt;valid positive non-zero integers&lt;/a&gt;.
 
   &lt;p&gt;The specified dimensions given may differ from the dimensions specified
    in the resource itself, since the resource may have a resolution that
@@ -22965,7 +23125,7 @@
   &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#colgroup&quot;&gt;colgroup&lt;/a&gt;&lt;/code&gt; element contains no
    &lt;code&gt;&lt;a href=&quot;#col&quot;&gt;col&lt;/a&gt;&lt;/code&gt; elements, then the element may have a
    &lt;dfn id=span0 title=attr-colgroup-span&gt;&lt;code&gt;span&lt;/code&gt;&lt;/dfn&gt; content
-   attribute specified, whose value must be a &lt;a href=&quot;#valid1&quot;&gt;valid
+   attribute specified, whose value must be a &lt;a href=&quot;#valid0&quot;&gt;valid
    non-negative integer&lt;/a&gt; greater than zero.
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#colgroup&quot;&gt;colgroup&lt;/a&gt;&lt;/code&gt; element and its &lt;code
@@ -23019,7 +23179,7 @@
 
   &lt;p&gt;The element may have a &lt;dfn id=span2
    title=attr-col-span&gt;&lt;code&gt;span&lt;/code&gt;&lt;/dfn&gt; content attribute specified,
-   whose value must be a &lt;a href=&quot;#valid1&quot;&gt;valid non-negative integer&lt;/a&gt;
+   whose value must be a &lt;a href=&quot;#valid0&quot;&gt;valid non-negative integer&lt;/a&gt;
    greater than zero.
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#col&quot;&gt;col&lt;/a&gt;&lt;/code&gt; element and its &lt;code
@@ -23492,13 +23652,13 @@
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#th&quot;&gt;th&lt;/a&gt;&lt;/code&gt; elements may have a &lt;dfn id=colspan
    title=attr-tdth-colspan&gt;&lt;code&gt;colspan&lt;/code&gt;&lt;/dfn&gt; content attribute
-   specified, whose value must be a &lt;a href=&quot;#valid1&quot;&gt;valid non-negative
+   specified, whose value must be a &lt;a href=&quot;#valid0&quot;&gt;valid non-negative
    integer&lt;/a&gt; greater than zero.
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#th&quot;&gt;th&lt;/a&gt;&lt;/code&gt; elements may also have a &lt;dfn id=rowspan
    title=attr-tdth-rowspan&gt;&lt;code&gt;rowspan&lt;/code&gt;&lt;/dfn&gt; content attribute
-   specified, whose value must be a &lt;a href=&quot;#valid1&quot;&gt;valid non-negative
+   specified, whose value must be a &lt;a href=&quot;#valid0&quot;&gt;valid non-negative
    integer&lt;/a&gt;.
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
@@ -26918,9 +27078,9 @@
     href=&quot;#rowspecification&quot;&gt;RowSpecification&lt;/a&gt;&lt;/code&gt; object representing
     the row in question. The return value is a string representing a valid
     URI (or IRI) to an image. Relative URIs must be interpreted relative to
-    the &lt;code&gt;&lt;a href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt;'s &lt;a href=&quot;#elements3&quot;
-    title=&quot;element's base URI&quot;&gt;base URI&lt;/a&gt;. If the method returns the empty
-    string, null, or if the method is not defined, then the row has no
+    the &lt;code&gt;&lt;a href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt;'s &lt;span
+    title=&quot;element's base URI&quot;&gt;base URI&lt;/span&gt;. If the method returns the
+    empty string, null, or if the method is not defined, then the row has no
     associated image.
 
    &lt;dt&gt;To obtain a context menu appropriate for a particular row
@@ -28257,8 +28417,8 @@
    from the element's &lt;code&gt;src&lt;/code&gt; attribute. &lt;!--If it is
   an &lt;code&gt;object&lt;/code&gt; element then the URI is taken from the
   &lt;code&gt;data&lt;/code&gt; attribute. --&gt;
-   Relative URIs must be resolved relative to the &lt;a href=&quot;#elements3&quot;
-   title=&quot;element's base URI&quot;&gt;base URI&lt;/a&gt; of the image element.
+   Relative URIs must be resolved relative to the &lt;span title=&quot;element's base
+   URI&quot;&gt;base URI&lt;/span&gt; of the image element.
    &lt;!-- If it is an &lt;code&gt;svg&lt;/code&gt; element then
   the URI is formed by taking the URI of the document and appending a
   &quot;#&quot; (U+0023 NUMBER SIGN) and the ID of the element.--&gt;
@@ -28467,10 +28627,10 @@
   &lt;p&gt;The &lt;a href=&quot;#icon1&quot; title=command-facet-Icon&gt;Icon&lt;/a&gt; for the command
    is the absolute URI resulting from resolving the value of the element's
    &lt;code title=attr-command-icon&gt;&lt;a href=&quot;#icon&quot;&gt;icon&lt;/a&gt;&lt;/code&gt; attribute as
-   a URI relative to the &lt;a href=&quot;#elements3&quot;&gt;element's base URI&lt;/a&gt;. If the
-   element has no &lt;code title=attr-command-icon&gt;&lt;a
-   href=&quot;#icon&quot;&gt;icon&lt;/a&gt;&lt;/code&gt; attribute then the command has no &lt;a
-   href=&quot;#icon1&quot; title=command-facet-Icon&gt;Icon&lt;/a&gt;.
+   a URI relative to the &lt;span&gt;element's base URI&lt;/span&gt;. If the element has
+   no &lt;code title=attr-command-icon&gt;&lt;a href=&quot;#icon&quot;&gt;icon&lt;/a&gt;&lt;/code&gt; attribute
+   then the command has no &lt;a href=&quot;#icon1&quot;
+   title=command-facet-Icon&gt;Icon&lt;/a&gt;.
 
   &lt;p&gt;The &lt;a href=&quot;#hidden1&quot; title=command-facet-HiddenState&gt;Hidden State&lt;/a&gt;
    of the command is true (hidden) if the element has a &lt;code
@@ -29731,13 +29891,12 @@
    name&lt;/dfn&gt;. By default, a browsing context has no name (its name is not
    set).
 
-  &lt;p&gt;A &lt;dfn id=valid10&gt;valid browsing context name&lt;/dfn&gt; is any string with
-   at least one character that does not start with a U+005F LOW LINE
-   character. (Names starting with an underscore are reserved for special
-   keywords.)
+  &lt;p&gt;A &lt;dfn id=valid9&gt;valid browsing context name&lt;/dfn&gt; is any string with at
+   least one character that does not start with a U+005F LOW LINE character.
+   (Names starting with an underscore are reserved for special keywords.)
 
-  &lt;p&gt;A &lt;dfn id=valid11&gt;valid browsing context name or keyword&lt;/dfn&gt; is any
-   string that is either a &lt;a href=&quot;#valid10&quot;&gt;valid browsing context name&lt;/a&gt;
+  &lt;p&gt;A &lt;dfn id=valid10&gt;valid browsing context name or keyword&lt;/dfn&gt; is any
+   string that is either a &lt;a href=&quot;#valid9&quot;&gt;valid browsing context name&lt;/a&gt;
    or that case-insensitively &lt;!-- ASCII --&gt; matches one of: &lt;code
    title=&quot;&quot;&gt;_blank&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;_self&lt;/code&gt;, &lt;code
    title=&quot;&quot;&gt;_parent&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;_top&lt;/code&gt;.
@@ -30037,7 +30196,7 @@
 
   &lt;p&gt;The second argument, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, specifies the &lt;a
    href=&quot;#browsing2&quot; title=&quot;browsing context name&quot;&gt;name&lt;/a&gt; of the browsing
-   context that is to be navigated. It must be a &lt;a href=&quot;#valid11&quot;&gt;valid
+   context that is to be navigated. It must be a &lt;a href=&quot;#valid10&quot;&gt;valid
    browsing context name or keyword&lt;/a&gt;. If fewer than two arguments are
    provided, then the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; argument defaults to the value
    &quot;&lt;code&gt;_blank&lt;/code&gt;&quot;.
@@ -32314,7 +32473,7 @@
 
   &lt;p&gt;URIs in manifests must not have fragment identifiers.
 
-  &lt;h5 id=parsing1&gt;&lt;span class=secno&gt;5.7.3.2. &lt;/span&gt;Parsing cache manifests&lt;/h5&gt;
+  &lt;h5 id=parsing0&gt;&lt;span class=secno&gt;5.7.3.2. &lt;/span&gt;Parsing cache manifests&lt;/h5&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=parse0&gt;parse a manifest&lt;/dfn&gt;, it means
    that the user agent must run the following steps:
@@ -33968,8 +34127,8 @@
   &lt;p&gt;Relative &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; arguments for &lt;code
    title=dom-location-assign&gt;&lt;a href=&quot;#assign&quot;&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code
    title=dom-location-replace&gt;&lt;a href=&quot;#replace&quot;&gt;replace()&lt;/a&gt;&lt;/code&gt; must be
-   resolved relative to the &lt;a href=&quot;#scripts&quot; title=&quot;script's base URI&quot;&gt;base
-   URI of the script&lt;/a&gt; that made the method call.&lt;/p&gt;
+   resolved relative to the &lt;span title=&quot;script's base URI&quot;&gt;base URI of the
+   script&lt;/span&gt; that made the method call.&lt;/p&gt;
   &lt;!-- XXX what about if
   the base URI is data: or javascript: or about: or something else
   without a way to resolve base URIs? --&gt;
@@ -34443,9 +34602,9 @@
    inserted into the DOM, the user agent must run the &lt;a href=&quot;#application2&quot;
    title=concept-appcache-init-with-attribute&gt;application cache selection
    algorithm&lt;/a&gt; with the value of that attribute, resolved relative to the
-   &lt;a href=&quot;#elements3&quot;&gt;element's base URI&lt;/a&gt;, as the manifest URI.
-   Otherwise, as soon as the root element is inserted into the DOM, the user
-   agent must run the &lt;a href=&quot;#application3&quot;
+   &lt;span&gt;element's base URI&lt;/span&gt;, as the manifest URI. Otherwise, as soon
+   as the root element is inserted into the DOM, the user agent must run the
+   &lt;a href=&quot;#application3&quot;
    title=concept-appcache-init-no-attribute&gt;application cache selection
    algorithm&lt;/a&gt; with no manifest.&lt;/p&gt;
   &lt;!-- XXXURL change to URL --&gt;
@@ -36043,7 +36202,7 @@
 
   &lt;p&gt;The &lt;dfn id=target3
    title=attr-hyperlink-target&gt;&lt;code&gt;target&lt;/code&gt;&lt;/dfn&gt; attribute, if
-   present, must be a &lt;a href=&quot;#valid11&quot;&gt;valid browsing context name or
+   present, must be a &lt;a href=&quot;#valid10&quot;&gt;valid browsing context name or
    keyword&lt;/a&gt;. User agents use this name when &lt;a
    href=&quot;#following0&quot;&gt;following hyperlinks&lt;/a&gt;.&lt;/p&gt;
   &lt;!-- XXXURL change to URL --&gt;
@@ -36165,11 +36324,11 @@
    title=attr-hyperlink-ping&gt;&lt;a href=&quot;#ping&quot;&gt;ping&lt;/a&gt;&lt;/code&gt; attribute's
    value, &lt;span title=&quot;split the string on spaces&quot;&gt;split that string on
    spaces&lt;/span&gt;, treat each resulting token as a URI (resolving relative
-   URIs according to &lt;a href=&quot;#elements3&quot;&gt;element's base URI&lt;/a&gt;&lt;!--
-  XXXURL --&gt;)
-   and then should send a request (as described below) to each of the
-   resulting URIs. This may be done in parallel with the primary request, and
-   is independent of the result of that request.&lt;/p&gt;
+   URIs according to &lt;span&gt;element's base URI&lt;/span&gt;&lt;!--
+  XXXURL --&gt;) and
+   then should send a request (as described below) to each of the resulting
+   URIs. This may be done in parallel with the primary request, and is
+   independent of the result of that request.&lt;/p&gt;
   &lt;!-- XXXURL change to URL --&gt;
 
   &lt;p&gt;User agents should allow the user to adjust this behavior, for example
@@ -36900,7 +37059,7 @@
    href=&quot;#unordered&quot;&gt;unordered set of unique space-separated tokens&lt;/a&gt;. The
    values must all be either &lt;code title=attr-link-sizes-any&gt;&lt;a
    href=&quot;#any&quot;&gt;any&lt;/a&gt;&lt;/code&gt; or a value that consists of two &lt;a
-   href=&quot;#valid1&quot; title=&quot;valid non-negative integer&quot;&gt;valid non-negative
+   href=&quot;#valid0&quot; title=&quot;valid non-negative integer&quot;&gt;valid non-negative
    integers&lt;/a&gt; that do not have a leading U+0030 DIGIT ZERO (0) character
    and that are separated by a single U+0078 LATIN SMALL LETTER X character.
 
@@ -37675,7 +37834,7 @@
 
   &lt;p&gt;The &lt;code title=attr-tabindex&gt;&lt;a href=&quot;#tabindex&quot;&gt;tabindex&lt;/a&gt;&lt;/code&gt;
    attribute, if specified, must have a value that is a &lt;a
-   href=&quot;#valid2&quot;&gt;valid integer&lt;/a&gt;.
+   href=&quot;#valid1&quot;&gt;valid integer&lt;/a&gt;.
 
   &lt;p&gt;If the attribute is specified, it must be parsed using the &lt;a
    href=&quot;#rules0&quot;&gt;rules for parsing integers&lt;/a&gt;. The attribute's values have
@@ -40659,7 +40818,7 @@
 
   &lt;p&gt;For non-HTTP protocols, UAs should act in equivalent ways.
 
-  &lt;h4 id=parsing2&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Parsing an event stream&lt;/h4&gt;
+  &lt;h4 id=parsing1&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Parsing an event stream&lt;/h4&gt;
 
   &lt;p&gt;This event stream format's MIME type is &lt;code&gt;text/event-stream&lt;/code&gt;.
 
@@ -41963,7 +42122,7 @@
     and &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;.
 
    &lt;li&gt;The root element, in the form of an &lt;code&gt;&lt;a
-    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; &lt;a href=&quot;#elements4&quot;
+    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; &lt;a href=&quot;#elements3&quot;
     title=syntax-elements&gt;element&lt;/a&gt;.
 
    &lt;li&gt;Any number of &lt;a href=&quot;#comments0&quot; title=syntax-comments&gt;comments&lt;/a&gt;
@@ -42060,7 +42219,7 @@
 
   &lt;h4 id=elements1&gt;&lt;span class=secno&gt;9.1.2 &lt;/span&gt;Elements&lt;/h4&gt;
 
-  &lt;p&gt;There are five different kinds of &lt;dfn id=elements4
+  &lt;p&gt;There are five different kinds of &lt;dfn id=elements3
    title=syntax-elements&gt;elements&lt;/dfn&gt;: void elements, CDATA elements,
    RCDATA elements, foreign elements, and normal elements.
 
@@ -42145,7 +42304,7 @@
    is &lt;em&gt;not&lt;/em&gt; marked as self-closing can have &lt;a href=&quot;#text2&quot;
    title=syntax-text&gt;text&lt;/a&gt;, &lt;a href=&quot;#character3&quot;
    title=syntax-charref&gt;character references&lt;/a&gt;, &lt;a href=&quot;#cdata0&quot;
-   title=syntax-cdata&gt;CDATA blocks&lt;/a&gt;, other &lt;a href=&quot;#elements4&quot;
+   title=syntax-cdata&gt;CDATA blocks&lt;/a&gt;, other &lt;a href=&quot;#elements3&quot;
    title=syntax-elements&gt;elements&lt;/a&gt;, and &lt;a href=&quot;#comments0&quot;
    title=syntax-comments&gt;comments&lt;/a&gt;, but the text must not contain the
    character U+003C LESS-THAN SIGN (&lt;code&gt;&lt;&lt;/code&gt;) or an &lt;a
@@ -42154,7 +42313,7 @@
 
   &lt;p&gt;Normal elements can have &lt;a href=&quot;#text2&quot; title=syntax-text&gt;text&lt;/a&gt;, &lt;a
    href=&quot;#character3&quot; title=syntax-charref&gt;character references&lt;/a&gt;, other &lt;a
-   href=&quot;#elements4&quot; title=syntax-elements&gt;elements&lt;/a&gt;, and &lt;a
+   href=&quot;#elements3&quot; title=syntax-elements&gt;elements&lt;/a&gt;, and &lt;a
    href=&quot;#comments0&quot; title=syntax-comments&gt;comments&lt;/a&gt;, but the text must
    not contain the character U+003C LESS-THAN SIGN (&lt;code&gt;&lt;&lt;/code&gt;) or an
    &lt;a href=&quot;#ambiguous&quot; title=syntax-ambiguous-ampersand&gt;ambiguous
@@ -49811,7 +49970,7 @@
    element's &lt;span title=syntax-start-tag&gt;start tag&lt;/span&gt; would imply the
    end tag for the &lt;code&gt;&lt;a href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt;).
 
-  &lt;h3 id=parsing3&gt;&lt;span class=secno&gt;9.5 &lt;/span&gt;Parsing HTML fragments&lt;/h3&gt;
+  &lt;h3 id=parsing2&gt;&lt;span class=secno&gt;9.5 &lt;/span&gt;Parsing HTML fragments&lt;/h3&gt;
 
   &lt;p&gt;The following steps form the &lt;dfn id=html-fragment0&gt;HTML fragment
    parsing algorithm&lt;/dfn&gt;. The algorithm takes as input a DOM

Modified: source
===================================================================
--- source	2008-06-24 01:11:35 UTC (rev 1794)
+++ source	2008-06-24 21:21:46 UTC (rev 1795)
@@ -631,25 +631,6 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;XML Base&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;!-- XXXURL remove entire entry, define it all in URLs section --&gt;
-    &lt;p id=&quot;xmlBase&quot;&gt;User agents must follow the rules given by XML
-    Base to resolve relative URIs in HTML and XHTML fragments. That
-    is the mechanism used in this specification for resolving relative
-    URIs in DOM trees. &lt;a href=&quot;#refsXMLBASE&quot;&gt;[XMLBASE]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;It is possible for &lt;code
-    title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes to be present
-    even in HTML fragments, as such attributes can be added
-    dynamically using script. (Such scripts would not be conforming,
-    however, as &lt;code title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes
-    as not allowed in &lt;span&gt;HTML documents&lt;/span&gt;.)&lt;/p&gt;
-
-   &lt;/dd&gt;
-
    &lt;dt&gt;DOM&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -937,6 +918,12 @@
 
   &lt;h3&gt;URLs&lt;/h3&gt;&lt;!-- XXXURL --&gt;
 
+  &lt;p&gt;This specification defines the term &lt;span&gt;URL&lt;/span&gt;, and defines
+  various algorithms for dealing with URLs, because for historical
+  reasons the rules defined by the URI and IRI specifications are not
+  a complete description of what HTML user agents need to implement to
+  be compatible with Web content.&lt;/p&gt;
+
   &lt;p class=&quot;big-issue&quot;&gt;The text in this section is not yet integrated
   with the rest of the specification.&lt;/p&gt;
 
@@ -972,33 +959,273 @@
 
   &lt;/ul&gt;
 
-  &lt;p&gt;A &lt;span&gt;URL&lt;/span&gt; is a &lt;dfn&gt;valid absolute URL&lt;/dfn&gt; if it is a
-  &lt;span&gt;valid URL&lt;/span&gt; and has an absolute form. &lt;a
-  href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-  href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;h4&gt;Resolving URLs&lt;/h4&gt;
 
-  &lt;h4&gt;Parsing URLs&lt;/h4&gt;
+  &lt;p&gt;Relative URLs are resolved relative to a base URL. The &lt;dfn&gt;base
+  URL&lt;/dfn&gt; of a &lt;span&gt;URL&lt;/span&gt; is the &lt;span&gt;absolute URL&lt;/span&gt;
+  obtained as follows:&lt;/p&gt;
 
-  &lt;p class=&quot;big-issue&quot;&gt;...&lt;/p&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-  &lt;h4&gt;Resolving URLs&lt;/h4&gt;
+   &lt;dt&gt;If the URL to be resolved was passed to an API&lt;/dt&gt;
 
-  &lt;div class=&quot;big-issue&quot;&gt;
-   &lt;p&gt;First parse it (we need to define that. For some schemes it's
-   not per spec -- e.g. apparently for ftp: we should split from
-   hosts on ';'). Then handle each bit as follows:&lt;/p&gt;
-   &lt;p&gt;scheme: no further processing (treat %-escaped characters literally, treat unicode characters as unicode characters).&lt;/p&gt;
-   &lt;p&gt;host: expand %-encoded bytes to Unicode as UTF-8, treat unicode characters as per IDN.&lt;/p&gt;
-   &lt;p&gt;path: don't expand %-encoded bytes. Re-encode unicode to UTF-8 and percent-encode.&lt;/p&gt;
-   &lt;p&gt;query: don't expand %-encoded bytes. Re-encode unicode to the page's encoding. Do not percent-encode.&lt;/p&gt;
-  &lt;/div&gt;
+   &lt;dd&gt;&lt;p&gt;The base URL is the &lt;span&gt;document base URL&lt;/span&gt; of the
+   script's &lt;span&gt;script document context&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
 
-  &lt;p class=&quot;big-issue&quot;&gt;define what it means to resolve a relative URL
-  when the base URL doesn't have a path hierarchy (e.g. data:,
-  javascript:, about:blank URLs)&lt;/p&gt;
+   &lt;dt&gt;If the URL to be resolved is from the value of a content
+   attribute&lt;/dt&gt;
 
+   &lt;dd&gt;
 
+    &lt;p&gt;The base URL is the &lt;i&gt;base URI of the element&lt;/i&gt; that the
+    attribute is on, as defined by the XML Base specification, with
+    &lt;i&gt;the base URI of the document entity&lt;/i&gt; being defined as the
+    &lt;span&gt;document base URL&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; that
+    owns the element.&lt;/p&gt;
+
+    &lt;p&gt;For the purposes of the XML Base specification, user agents
+    must act as if all &lt;code&gt;Document&lt;/code&gt; objects represented XML
+    documents.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;It is possible for &lt;code
+    title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes to be present
+    even in HTML fragments, as such attributes can be added
+    dynamically using script. (Such scripts would not be conforming,
+    however, as &lt;code title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes
+    are not allowed in &lt;span&gt;HTML documents&lt;/span&gt;.)&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;document base URL&lt;/dfn&gt; of a &lt;code&gt;Document&lt;/code&gt; is
+  the &lt;span&gt;absolute URL&lt;/span&gt; obtained by running these steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is no &lt;code&gt;base&lt;/code&gt; element that is both a
+   child of &lt;span&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/span&gt; and has an
+   &lt;code title=&quot;att-base-href&quot;&gt;href&lt;/code&gt; attribute, then the
+   &lt;span&gt;document base URL&lt;/span&gt; is &lt;span&gt;the document's
+   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the value of the
+   &lt;code title=&quot;att-base-href&quot;&gt;href&lt;/code&gt; attribute of the first such
+   element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span title=&quot;resolve a URL&quot;&gt;Resolve&lt;/span&gt; the &lt;var
+   title=&quot;&quot;&gt;url&lt;/var&gt; URL, using &lt;span&gt;the document's
+   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; as the &lt;span&gt;document base
+   URL&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;The &lt;span&gt;document base URL&lt;/span&gt; is the result of the
+   previous step if it was successful; otherwise it is &lt;span&gt;the
+   document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;To &lt;dfn&gt;resolve a URL&lt;/dfn&gt; to an &lt;span&gt;absolute URL&lt;/span&gt; the
+  user agent must use the following steps. Resolving a URL can result
+  in an error, in which case the URL is not resolvable.&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the &lt;span&gt;URL&lt;/span&gt; being
+   resolved.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; be the
+   &lt;code&gt;Document&lt;/code&gt; associated with &lt;var
+   title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; be the &lt;span
+   title=&quot;document's character encoding&quot;&gt;character encoding&lt;/span&gt; of
+   &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; be the &lt;span&gt;base URL&lt;/span&gt;
+   for &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;. (This is an &lt;span&gt;absolute
+   URL&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Strip leading and trailing &lt;span title=&quot;space
+   character&quot;&gt;space characters&lt;/span&gt; from &lt;var
+   title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; in the manner defined by RFC
+    3986, with the following exceptions:&lt;/p&gt;
+
+    &lt;ul&gt;
+
+     &lt;li&gt;Add all characters with codepoints less than or equal to
+     U+0020 or greater than or equal to U+007F to the
+     &lt;unreserved&gt; production.&lt;/li&gt;
+
+     &lt;li&gt;Add the characters U+0022, U+003C, U+003E, U+005B .. U+005E,
+     U+0060, and U+007B .. U+007D to the &lt;unreserved&gt;
+     production.
+      &lt;!--
+       0022 QUOTATION MARK
+       003C LESS-THAN SIGN
+       003E GREATER-THAN SIGN
+       005B LEFT SQUARE BRACKET
+       005C REVERSE SOLIDUS
+       005D RIGHT SQUARE BRACKET
+       005E CIRCUMFLEX ACCENT
+       0060 GRAVE ACCENT
+       007B LEFT CURLY BRACKET
+       007C VERTICAL LINE
+       007D RIGHT CURLY BRACKET
+      --&gt;
+     &lt;/li&gt;
+
+     &lt;li&gt;Add a single U+0025 PERCENT SIGN character as a second
+     alternative way of matching the &lt;pct-encoded&gt; production,
+     except when the &lt;pct-encoded&gt; is used in the
+     &lt;reg-name&gt; production.&lt;/li&gt;
+
+     &lt;li&gt;Add the U+0023 NUMBER SIGN character to the characters
+     allowed in the &lt;fragment&gt; production.&lt;/li&gt;
+
+     &lt;!-- some browsers also have other differences, e.g. Mozilla
+     seems to treat &quot;;&quot; as if it was not in sub-delims, if the scheem
+     is &quot;ftp&quot;. --&gt;
+
+    &lt;/ul&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; doesn't match the
+    &lt;URI-reference&gt; production, even after the above changes are
+    made to the ABNF definitions, then return an error and abort these
+    steps.&lt;/p&gt;
+
+    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; was successful, then make a
+    note of which substrings of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; matched each
+    of the following productions that was matched:&lt;/p&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+     &lt;li&gt;&lt;host&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;path-abempty&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;path-absolute&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;path-noscheme&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;path-rootless&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;path-empty&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;query&gt;&lt;/li&gt;
+    &lt;/ul&gt;
+
+    &lt;p&gt;When subsequent steps refer to the &lt;path&gt; production,
+    they are referring to whichever of those productions whose names
+    start with &quot;path-&quot; was matched. (Only one at a time can be
+    matched.)&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in the &lt;host&gt;
+    production being matched, then replace the matching subtring of
+    &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that results from
+    expanding any sequences of percent-encoded octets in that
+    component that are valid UTF-8 sequences into Unicode characters
+    as defined by UTF-8.&lt;/p&gt;
+
+    &lt;p&gt;If any percent-encoded octets in that component are not valid
+    UTF-8 sequences, then return an error and abort these steps.&lt;/p&gt;
+
+    &lt;p&gt;Apply the IDNA ToASCII algorithm to the matching substring,
+    with both the AllowUnassigned and UseSTD3ASCIIRules flags
+    set. Replace the matching substring with the result of the ToASCII
+    algorithm.&lt;/p&gt;
+
+    &lt;p&gt;If ToASCII fails to convert one of the components of the
+    string, e.g. because it is too long or because it contains invalid
+    characters, then return an error and abort these steps. &lt;a
+    href=&quot;#refsRFC3490&quot;&gt;[RFC3490]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in the &lt;path&gt;
+    production being matched, then replace the matching substring of
+    &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that results from applying
+    the following steps to each character that doesn't match the
+    original &lt;path&gt; production defined in RFC 3986:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;Encode the character into a sequence of octets as defined by
+     UTF-8.&lt;/li&gt;
+
+     &lt;li&gt;Replace the character with the percent-encoded form of those
+     octets.&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+    &lt;div class=&quot;example&quot;&gt;
+
+     &lt;p&gt;For instance if &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; was &quot;&lt;code
+    title=&quot;&quot;&gt;//example.com/a^b&amp;#x263a;c%FFd/?e&lt;/code&gt;&quot;, then there
+    would the substring matching the &lt;path&gt; production would be
+    &quot;&lt;code title=&quot;&quot;&gt;/a^b&amp;#x263a;c%FFd/&lt;/code&gt;&quot; and the two characters
+    that would have to be escaped would be &quot;&lt;code title=&quot;&quot;&gt;^&lt;/code&gt;&quot;
+    and &quot;&lt;code title=&quot;&quot;&gt;&amp;#x263a;&lt;/code&gt;&quot;. The result after this step
+    was applied would therefore be that &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; now
+    had the value &quot;&lt;code
+    title=&quot;&quot;&gt;//example.com/a%5Eb%E2%98%BAc%FFd/?e&lt;/code&gt;&quot;.&lt;/p&gt;
+
+    &lt;/div&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in the &lt;query&gt;
+    production being matched, then replace the matching substring of
+    &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that results from applying
+    the following steps to each character that doesn't match the
+    original &lt;query&gt; production defined in RFC 3986:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;Encode the character into a sequence of octets as defined by
+     the encoding &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;Replace the character with the percent-encoded form of those
+     octets.&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Apply the algorithm described in RFC 3986 section 5.2
+   Relative Resolution, using &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; as the
+   potentially relative URI reference (&lt;var title=&quot;&quot;&gt;R&lt;/var&gt;), and
+   &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; as the base URI (&lt;var
+   title=&quot;&quot;&gt;Base&lt;/var&gt;).&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Apply any relevant conformance criteria of RFC 3986 and RFC
+    3987, returning an error and aborting these steps if
+    appropriate.&lt;/p&gt;
+
+    &lt;p class=&quot;example&quot;&gt;For instance, if an absolute URI that would be
+    returned by the above algorithm violates the restrictions specific
+    to its scheme, e.g. a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI using the
+    &quot;&lt;code title=&quot;&quot;&gt;//&lt;/code&gt;&quot; naming authority syntax, then user
+    agents are to treat this as an error instead.&lt;!-- RFC 3986, 3.1
+    Scheme --&gt;&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the target URI (&lt;var title=&quot;&quot;&gt;T&lt;/var&gt;) returned by
+   the Relative Resolution algorithm.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;A &lt;span&gt;URL&lt;/span&gt; is an &lt;dfn&gt;absolute URL&lt;/dfn&gt; if &lt;span
+  title=&quot;resolve a URL&quot;&gt;resolving&lt;/span&gt; it results in the same
+  URL without an error.&lt;/p&gt;
+
+
   &lt;h4&gt;Open issues&lt;/h4&gt;
 
   &lt;div class=&quot;big-issue&quot;&gt;
@@ -1013,16 +1240,6 @@
     &lt;li&gt;get rid of references to &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;
     &lt;a href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section&lt;/li&gt;
 
-    &lt;li&gt;define how to resolve relative URLs in markup attributes
-    (using XMLBase as defined elsewhere right now)&lt;/li&gt;
-
-    &lt;li&gt;define how to resolve relative URLs in APIs, using the
-    &lt;dfn&gt;script's base URI&lt;/dfn&gt; maybe&lt;/li&gt;
-
-    &lt;li&gt;define &quot;an &lt;dfn&gt;element's base URI&lt;/dfn&gt;&quot; and make the various
-    places that talk about a base URI in the context of an element use
-    that definition&lt;/li&gt;
-
     &lt;li&gt;make the language used to refer to resolving a base URI
     consistent throughout, maybe make it hyperlink to a definition
     each time&lt;/li&gt;
@@ -6780,28 +6997,6 @@
   the &lt;code&gt;html&lt;/code&gt; element and its &lt;code
   title=&quot;attr-html-manifest&quot;&gt;manifest&lt;/code&gt; attribute).&lt;/p&gt;
 
-  &lt;!-- XXXURL move to URLs section --&gt;
-  &lt;p&gt;User agents must use the value of the &lt;code
-  title=&quot;att-base-href&quot;&gt;href&lt;/code&gt; attribute of the first
-  &lt;code&gt;base&lt;/code&gt; element that is both a child of &lt;span&gt;the
-  &lt;code&gt;head&lt;/code&gt; element&lt;/span&gt; and has an &lt;code
-  title=&quot;att-base-href&quot;&gt;href&lt;/code&gt; attribute, if there is such an
-  element, as the document entity's base URI for the purposes of
-  section 5.1.1 of RFC 3986 (&quot;Establishing a Base URI&quot;: &quot;Base URI
-  Embedded in Content&quot;). This base URI from RFC 3986 is referred to by
-  the algorithm given in XML Base, which &lt;a href=&quot;#xmlBase&quot;&gt;is a
-  normative part of this specification&lt;/a&gt;. &lt;a
-  href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;!-- XXXURL move to URLs section --&gt;
-  &lt;p&gt;If the base URI given by this attribute is a relative URI, it
-  must be resolved relative to the higher-level base URIs (i.e. the
-  base URI from the encapsulating entity or the URI used to retrieve
-  the entity) to obtain an absolute base URI. All &lt;code
-  title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes must be ignored
-  when resolving relative URIs in this &lt;code
-  title=&quot;attr-base-href&quot;&gt;href&lt;/code&gt; attribute.&lt;/p&gt;
-
   &lt;!-- XXXURL leave this here, but make it clearer --&gt;
   &lt;p class=&quot;note&quot;&gt;If there are multiple &lt;code&gt;base&lt;/code&gt; elements
   with &lt;code title=&quot;att-base-href&quot;&gt;href&lt;/code&gt; attributes, all but the


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008692.html">[html5] r1794 - [e] (0) Remove the paragraph that says 'URI' means	'IRI' since we'll just use 'U [...]
</A></li>
	<LI>Next message: <A HREF="008694.html">[html5] r1796 - [] (0) Factor out the URL parsing rules and use	them to define the URL decomposi [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8693">[ date ]</a>
              <a href="thread.html#8693">[ thread ]</a>
              <a href="subject.html#8693">[ subject ]</a>
              <a href="author.html#8693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
