<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1490 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1490%20-%20/&In-Reply-To=%3C20080427085628.A56B8139FCE%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008389.html">
   <LINK REL="Next"  HREF="008391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1490 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1490%20-%20/&In-Reply-To=%3C20080427085628.A56B8139FCE%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1490 - /">whatwg at whatwg.org
       </A><BR>
    <I>Sun Apr 27 01:56:28 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008389.html">[html5] r1489 - /
</A></li>
        <LI>Next message: <A HREF="008391.html">[html5] r1491 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8390">[ date ]</a>
              <a href="thread.html#8390">[ thread ]</a>
              <a href="subject.html#8390">[ subject ]</a>
              <a href="author.html#8390">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-04-27 01:56:27 -0700 (Sun, 27 Apr 2008)
New Revision: 1490

Modified:
   index
   source
Log:
[giow] (2) showModalDialog(): first draft. Also, some 'the the' editorial corrections.

Modified: index
===================================================================
--- index	2008-04-25 20:58:06 UTC (rev 1489)
+++ index	2008-04-27 08:56:27 UTC (rev 1490)
@@ -25,7 +25,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 25 April 2008&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 27 April 2008&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
     href=&quot;<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&quot;&gt;Join the working group's
@@ -1073,7 +1073,14 @@
 
      &lt;li&gt;&lt;a href=&quot;#user-prompts&quot;&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;User
       prompts&lt;/a&gt;
+      &lt;ul class=toc&gt;
+       &lt;li&gt;&lt;a href=&quot;#simple0&quot;&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Simple
+        dialogs&lt;/a&gt;
 
+       &lt;li&gt;&lt;a href=&quot;#dialogs&quot;&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;Dialogs
+        implemented using separate documents&lt;/a&gt;
+      &lt;/ul&gt;
+
      &lt;li&gt;&lt;a href=&quot;#browser&quot;&gt;&lt;span class=secno&gt;4.5 &lt;/span&gt;Browser state&lt;/a&gt;
       &lt;ul class=toc&gt;
        &lt;li&gt;&lt;a href=&quot;#custom-handlers&quot;&gt;&lt;span class=secno&gt;4.5.1 &lt;/span&gt;Custom
@@ -4240,7 +4247,7 @@
      &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the children of the document,
      preserving their order. Otherwise, the attribute is being set on an
      &lt;code&gt;Element&lt;/code&gt; node; let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the
-     children of the the document's root element, preserving their order.&lt;/p&gt;
+     children of the document's root element, preserving their order.&lt;/p&gt;
 
    &lt;li&gt;
     &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node, let
@@ -7891,7 +7898,7 @@
    title=attr-meta-http-equiv&gt;&lt;code&gt;http-equiv&lt;/code&gt;&lt;/dfn&gt; attribute is an
    &lt;a href=&quot;#enumerated&quot;&gt;enumerated attribute&lt;/a&gt;. The following table lists
    the keywords defined for this attribute. The states given in the first
-   cell of the the rows with keywords give the states to which those keywords
+   cell of the rows with keywords give the states to which those keywords
    map.&lt;!-- Some of the keywords are non-conforming, as
   noted in the last column.--&gt;
 
@@ -13253,7 +13260,7 @@
 
     &lt;p&gt;The text must be given in the &lt;code title=attr-img-alt&gt;&lt;a
      href=&quot;#alt&quot;&gt;alt&lt;/a&gt;&lt;/code&gt; attribute, and must convey the same message
-     as the the image specified in the &lt;code title=attr-img-src&gt;&lt;a
+     as the image specified in the &lt;code title=attr-img-src&gt;&lt;a
      href=&quot;#src&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
     &lt;div class=example&gt;
@@ -19211,9 +19218,9 @@
   &lt;p&gt;The &lt;dfn id=shape title=attr-area-shape&gt;&lt;code&gt;shape&lt;/code&gt;&lt;/dfn&gt;
    attribute is an &lt;a href=&quot;#enumerated&quot;&gt;enumerated attribute&lt;/a&gt;. The
    following table lists the keywords defined for this attribute. The states
-   given in the first cell of the the rows with keywords give the states to
-   which those keywords map. Some of the keywords are non-conforming, as
-   noted in the last column.
+   given in the first cell of the rows with keywords give the states to which
+   those keywords map. Some of the keywords are non-conforming, as noted in
+   the last column.
 
   &lt;table&gt;
    &lt;thead&gt;
@@ -26801,6 +26808,9 @@
   DOMString &lt;a href=&quot;#prompt&quot; title=dom-prompt&gt;prompt&lt;/a&gt;(in DOMString message);
   DOMString &lt;a href=&quot;#prompt&quot; title=dom-prompt&gt;prompt&lt;/a&gt;(in DOMString message, in DOMString default);
   void &lt;a href=&quot;#print&quot; title=dom-print&gt;print&lt;/a&gt;();
+  any &lt;a href=&quot;#showmodaldialog&quot; title=dom-showModalDialog&gt;showModalDialog&lt;/a&gt;(in DOMString url);
+  any &lt;a href=&quot;#showmodaldialog&quot; title=dom-showModalDialog&gt;showModalDialog&lt;/a&gt;(in DOMString url, in any arguments);
+  any &lt;a href=&quot;#showmodaldialog&quot; title=dom-showModalDialog&gt;showModalDialog&lt;/a&gt;(in DOMString url, in any arguments, in DOMString features);
 
   // other browsing contexts
   readonly attribute &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#frames&quot; title=dom-frames&gt;frames&lt;/a&gt;;
@@ -27909,6 +27919,8 @@
 
   &lt;h3 id=user-prompts&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;User prompts&lt;/h3&gt;
 
+  &lt;h4 id=simple0&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Simple dialogs&lt;/h4&gt;
+
   &lt;p&gt;The &lt;dfn id=alert title=dom-alert&gt;&lt;code&gt;alert(&lt;var
    title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show the
    given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user. The user agent may make the
@@ -27920,15 +27932,15 @@
    title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show the
    given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user to respond
    with a positive or negative response. The user agent must then &lt;a
-   href=&quot;#pause&quot;&gt;pause&lt;/a&gt; as the the method waits for the user's response.
-   If the user responds positively, the method must return true, and if the
-   user responds negatively, the method must return false.
+   href=&quot;#pause&quot;&gt;pause&lt;/a&gt; as the method waits for the user's response. If
+   the user responds positively, the method must return true, and if the user
+   responds negatively, the method must return false.
 
   &lt;p&gt;The &lt;dfn id=prompt title=dom-prompt&gt;&lt;code&gt;prompt(&lt;var
    title=&quot;&quot;&gt;message&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method,
    when invoked, must show the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user,
    and ask the user to either respond with a string value or abort. The user
-   agent must then &lt;a href=&quot;#pause&quot;&gt;pause&lt;/a&gt; as the the method waits for the
+   agent must then &lt;a href=&quot;#pause&quot;&gt;pause&lt;/a&gt; as the method waits for the
    user's response. The second argument is optional. If the second argument
    (&lt;var title=&quot;&quot;&gt;default&lt;/var&gt;) is present, then the response must be
    defaulted to the value given by &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;. If the user
@@ -27944,6 +27956,137 @@
    &lt;em&gt;always&lt;/em&gt; offering the user with the opportunity to convert the
    document to whatever media the user might want.)
 
+  &lt;h4 id=dialogs&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;Dialogs implemented using
+   separate documents&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=showmodaldialog
+   title=dom-showModalDialog&gt;&lt;code&gt;showModalDialog(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;,
+   &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;features&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+   method, when invoked, must cause the user agent to run the following
+   steps:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;If the user agent is configured such that this invocation of &lt;code
+     title=dom-showModalDialog&gt;&lt;a
+     href=&quot;#showmodaldialog&quot;&gt;showModalDialog()&lt;/a&gt;&lt;/code&gt; is somehow
+     disabled, then the method returns the empty string; abort these steps.&lt;/p&gt;
+
+    &lt;p class=note&gt;User agents are expected to disable this method in certain
+     cases to avoid user annoyance. For instance, a user agent could require
+     that a site be white-listed before enabling this method, or the user
+     agent could be configured to only allow one modal dialog at a time.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;the list of background browsing contexts&lt;/var&gt; be a
+     list of all the browsing contexts that:&lt;/p&gt;
+
+    &lt;ul&gt;
+     &lt;li&gt;are part of the same &lt;a href=&quot;#unit-of&quot;&gt;unit of related browsing
+      contexts&lt;/a&gt; as the browsing context of the &lt;code&gt;&lt;a
+      href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the &lt;code
+      title=dom-showModalDialog&gt;&lt;a
+      href=&quot;#showmodaldialog&quot;&gt;showModalDialog()&lt;/a&gt;&lt;/code&gt; method was called,
+      and that
+
+     &lt;li&gt;have an &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt; whose origin is the
+      same as the origin of the script that called the &lt;code
+      title=dom-showModalDialog&gt;&lt;a
+      href=&quot;#showmodaldialog&quot;&gt;showModalDialog()&lt;/a&gt;&lt;/code&gt; method at the time
+      the method was called,&lt;/li&gt;
+     &lt;!-- XXX document.domain
+     breaks this. when fixing it, er on the side of including more
+     browsing contexts rather than less. --&gt;
+    &lt;/ul&gt;
+
+    &lt;p&gt;...as well as any browsing contexts that are nested inside any of the
+     browsing contexts matching those conditions.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Disable the user interface for all the browsing contexts in &lt;var
+     title=&quot;&quot;&gt;the list of background browsing contexts&lt;/var&gt;. This should
+     prevent the user from navigating those browsing contexts, causing events
+     to to be sent to those browsing context, or editing any content in those
+     browsing contexts. However, it does not prevent those browsing contexts
+     from receiving events from sources other than the user, from running
+     scripts, from running animations, and so forth.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Create a new &lt;a href=&quot;#auxiliary0&quot;&gt;auxiliary browsing context&lt;/a&gt;,
+     with the &lt;a href=&quot;#opener&quot;&gt;opener browsing context&lt;/a&gt; being the
+     browsing context of the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object
+     on which the &lt;code title=dom-showModalDialog&gt;&lt;a
+     href=&quot;#showmodaldialog&quot;&gt;showModalDialog()&lt;/a&gt;&lt;/code&gt; method was called.
+     The new auxiliary browsing context has no name.&lt;/p&gt;
+
+    &lt;p class=note&gt;This browsing context implements the &lt;code&gt;&lt;a
+     href=&quot;#modalwindow&quot;&gt;ModalWindow&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Let the &lt;a href=&quot;#dialog0&quot;&gt;dialog arguments&lt;/a&gt; of the new browsing
+     context be set to the value of &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Let the &lt;a href=&quot;#dialog1&quot;&gt;dialog arguments' origin&lt;/a&gt; be the origin
+     of the script that called the &lt;code title=dom-showModalDialog&gt;&lt;a
+     href=&quot;#showmodaldialog&quot;&gt;showModalDialog()&lt;/a&gt;&lt;/code&gt; method.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;&lt;a href=&quot;#navigate&quot;&gt;Navigate&lt;/a&gt; the new browsing context to &lt;var
+     title=&quot;&quot;&gt;url&lt;/var&gt;, with &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Wait for the browsing context to be closed. (The user agent must allow
+     the user to indicate that the browsing context is to be closed.)&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Reenable the user interface for all the browsing contexts in &lt;var
+     title=&quot;&quot;&gt;the list of background browsing contexts&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Return the &lt;a href=&quot;#auxiliary0&quot;&gt;auxiliary browsing context&lt;/a&gt;'s &lt;a
+     href=&quot;#return&quot;&gt;return value&lt;/a&gt;.&lt;/p&gt;
+  &lt;/ol&gt;
+
+  &lt;p&gt;Browsing contexts created by the above algorithm must implement the
+   &lt;code&gt;&lt;a href=&quot;#modalwindow&quot;&gt;ModalWindow&lt;/a&gt;&lt;/code&gt; interface:
+
+  &lt;pre class=idl&gt;[XXX] interface &lt;dfn id=modalwindow&gt;ModalWindow&lt;/dfn&gt; {
+  readonly attribute any &lt;a href=&quot;#dialogarguments&quot; title=dom-modalWindow-dialogArguments&gt;dialogArguments&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#returnvalue&quot; title=dom-modalWindow-returnValue&gt;returnValue&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;Such browsing contexts have associated &lt;dfn id=dialog0&gt;dialog
+   arguments&lt;/dfn&gt;, which are stored along with the &lt;dfn id=dialog1&gt;dialog
+   arguments' origin&lt;/dfn&gt;. These values are set by the &lt;code
+   title=dom-showModalDialog&gt;&lt;a
+   href=&quot;#showmodaldialog&quot;&gt;showModalDialog()&lt;/a&gt;&lt;/code&gt; method in the
+   algorithm above, when the browsing context is created, based on the
+   arguments provided to the method.
+
+  &lt;p&gt;The &lt;dfn id=dialogarguments
+   title=dom-modalWindow-dialogArguments&gt;&lt;code&gt;dialogArguments&lt;/code&gt;&lt;/dfn&gt;
+   DOM attribute, on getting, must check whether its browsing context's &lt;a
+   href=&quot;#active&quot;&gt;active document&lt;/a&gt;'s &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is the
+   same as the &lt;a href=&quot;#dialog1&quot;&gt;dialog arguments' origin&lt;/a&gt;. If it is,
+   then the browsing context's &lt;a href=&quot;#dialog0&quot;&gt;dialog arguments&lt;/a&gt; must
+   be returned unchanged. Otherwise, if the &lt;a href=&quot;#dialog0&quot;&gt;dialog
+   arguments&lt;/a&gt; are an object, then the empty string must be returned, and
+   if the &lt;a href=&quot;#dialog0&quot;&gt;dialog arguments&lt;/a&gt; are not an object, then the
+   stringification of the &lt;a href=&quot;#dialog0&quot;&gt;dialog arguments&lt;/a&gt; must be
+   returned.
+
+  &lt;p&gt;These browsing contexts also have an associated &lt;dfn id=return&gt;return
+   value&lt;/dfn&gt;. The &lt;a href=&quot;#return&quot;&gt;return value&lt;/a&gt; of a browsing context
+   must be initialised to the empty string when the browsing context is
+   created.
+
+  &lt;p&gt;The &lt;dfn id=returnvalue
+   title=dom-modalWindow-returnValue&gt;&lt;code&gt;returnValue&lt;/code&gt;&lt;/dfn&gt; DOM
+   attribute, on getting, must return the &lt;a href=&quot;#return&quot;&gt;return value&lt;/a&gt;
+   of its browsing context, and on setting, must set the &lt;a
+   href=&quot;#return&quot;&gt;return value&lt;/a&gt; to the given new value.
+
   &lt;h3 id=browser&gt;&lt;span class=secno&gt;4.5 &lt;/span&gt;Browser state&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=navigator title=dom-navigator&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt;
@@ -30800,8 +30943,8 @@
    ifragment? XXX --&gt;
 
    &lt;li&gt;
-    &lt;p&gt;If &lt;i&gt;fragid&lt;/i&gt; is the empty string, then the the indicated part of
-     the document is the top of the document.
+    &lt;p&gt;If &lt;i&gt;fragid&lt;/i&gt; is the empty string, then the indicated part of the
+     document is the top of the document.
 
    &lt;li&gt;
     &lt;p&gt;If there is an element in the DOM that has an ID exactly equal to
@@ -30914,7 +31057,7 @@
 
    &lt;li&gt;
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; ends in &quot;+xml&quot;, or if it is
-     either &quot;text/xml&quot; or &quot;application/xml&quot;, then the the sniffed type of the
+     either &quot;text/xml&quot; or &quot;application/xml&quot;, then the sniffed type of the
      resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;; return that and abort
      these steps.
    &lt;/li&gt;
@@ -32849,7 +32992,7 @@
    href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;
    to the URI of the hyperlink.
 
-  &lt;p&gt;The URI of the hyperlink is URI given by resolving the the &lt;code
+  &lt;p&gt;The URI of the hyperlink is URI given by resolving the &lt;code
    title=attr-hyperlink-href&gt;&lt;a href=&quot;#href6&quot;&gt;href&lt;/a&gt;&lt;/code&gt; attribute of
    that hyperlink relative to the hyperlink's element. In the case of
    server-side image maps, the URI of the hyperlink must further have its
@@ -37221,8 +37364,8 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#processField&quot;&gt;Process the field&lt;/a&gt; using the steps
-     described below, using the the whole line as the field name, and the
-     empty string as the field value.&lt;/p&gt;
+     described below, using the whole line as the field name, and the empty
+     string as the field value.&lt;/p&gt;
   &lt;/dl&gt;
 
   &lt;p&gt;Once the end of the file is reached, the user agent must &lt;a

Modified: source
===================================================================
--- source	2008-04-25 20:58:06 UTC (rev 1489)
+++ source	2008-04-27 08:56:27 UTC (rev 1490)
@@ -2639,7 +2639,7 @@
     let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the children of the
     document, preserving their order. Otherwise, the attribute is
     being set on an &lt;code&gt;Element&lt;/code&gt; node; let &lt;var title=&quot;&quot;&gt;new
-    children&lt;/var&gt; be the children of the the document's root element,
+    children&lt;/var&gt; be the children of the document's root element,
     preserving their order.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -6303,7 +6303,7 @@
   title=&quot;attr-meta-http-equiv&quot;&gt;&lt;code&gt;http-equiv&lt;/code&gt;&lt;/dfn&gt; attribute
   is an &lt;span&gt;enumerated attribute&lt;/span&gt;. The following table lists
   the keywords defined for this attribute. The states given in the
-  first cell of the the rows with keywords give the states to which
+  first cell of the rows with keywords give the states to which
   those keywords map.&lt;!-- Some of the keywords are non-conforming, as
   noted in the last column.--&gt;&lt;/p&gt;
 
@@ -11232,7 +11232,7 @@
 
     &lt;p&gt;The text must be given in the &lt;code
     title=&quot;attr-img-alt&quot;&gt;alt&lt;/code&gt; attribute, and must convey the
-    same message as the the image specified in the &lt;code
+    same message as the image specified in the &lt;code
     title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute.&lt;/p&gt;
 
     &lt;div class=&quot;example&quot;&gt;
@@ -16925,7 +16925,7 @@
   &lt;p&gt;The &lt;dfn title=&quot;attr-area-shape&quot;&gt;&lt;code&gt;shape&lt;/code&gt;&lt;/dfn&gt;
   attribute is an &lt;span&gt;enumerated attribute&lt;/span&gt;. The following
   table lists the keywords defined for this attribute. The states
-  given in the first cell of the the rows with keywords give the
+  given in the first cell of the rows with keywords give the
   states to which those keywords map. Some of the keywords are
   non-conforming, as noted in the last column.&lt;/p&gt;
 
@@ -24508,6 +24508,9 @@
   DOMString &lt;span title=&quot;dom-prompt&quot;&gt;prompt&lt;/span&gt;(in DOMString message);
   DOMString &lt;span title=&quot;dom-prompt&quot;&gt;prompt&lt;/span&gt;(in DOMString message, in DOMString default);
   void &lt;span title=&quot;dom-print&quot;&gt;print&lt;/span&gt;();
+  any &lt;span title=&quot;dom-showModalDialog&quot;&gt;showModalDialog&lt;/span&gt;(in DOMString url);
+  any &lt;span title=&quot;dom-showModalDialog&quot;&gt;showModalDialog&lt;/span&gt;(in DOMString url, in any arguments);
+  any &lt;span title=&quot;dom-showModalDialog&quot;&gt;showModalDialog&lt;/span&gt;(in DOMString url, in any arguments, in DOMString features);
 
   // other browsing contexts
   readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-frames&quot;&gt;frames&lt;/span&gt;;
@@ -25609,6 +25612,8 @@
 
   &lt;h3&gt;User prompts&lt;/h3&gt;
 
+  &lt;h4&gt;Simple dialogs&lt;/h4&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-alert&quot;&gt;&lt;code&gt;alert(&lt;var
   title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show
   the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user. The user agent
@@ -25620,7 +25625,7 @@
   title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show
   the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user
   to respond with a positive or negative response. The user agent must
-  then &lt;span&gt;pause&lt;/span&gt; as the the method waits for the user's
+  then &lt;span&gt;pause&lt;/span&gt; as the method waits for the user's
   response. If the user responds positively, the method must return
   true, and if the user responds negatively, the method must return
   false.&lt;/p&gt;
@@ -25630,7 +25635,7 @@
   method, when invoked, must show the given &lt;var
   title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user to either
   respond with a string value or abort. The user agent must then
-  &lt;span&gt;pause&lt;/span&gt; as the the method waits for the user's
+  &lt;span&gt;pause&lt;/span&gt; as the method waits for the user's
   response. The second argument is optional. If the second argument
   (&lt;var title=&quot;&quot;&gt;default&lt;/var&gt;) is present, then the response must be
   defaulted to the value given by &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;. If the
@@ -25648,6 +25653,169 @@
 
 
 
+  &lt;h4&gt;Dialogs implemented using separate documents&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-showModalDialog&quot;&gt;&lt;code&gt;showModalDialog(&lt;var
+  title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;features&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must
+  cause the user agent to run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the user agent is configured such that this invocation of
+    &lt;code title=&quot;dom-showModalDialog&quot;&gt;showModalDialog()&lt;/code&gt; is
+    somehow disabled, then the method returns the empty string; abort
+    these steps.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;User agents are expected to disable this method in
+    certain cases to avoid user annoyance. For instance, a user agent
+    could require that a site be white-listed before enabling this
+    method, or the user agent could be configured to only allow one
+    modal dialog at a time.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;the list of background browsing
+    contexts&lt;/var&gt; be a list of all the browsing contexts that:&lt;/p&gt;
+
+    &lt;ul&gt;
+
+     &lt;li&gt;are part of the same &lt;span&gt;unit of related browsing
+     contexts&lt;/span&gt; as the browsing context of the
+     &lt;code&gt;Window&lt;/code&gt; object on which the &lt;code
+     title=&quot;dom-showModalDialog&quot;&gt;showModalDialog()&lt;/code&gt; method was
+     called, and that&lt;/p&gt;
+
+     &lt;li&gt;have an &lt;span&gt;active document&lt;/span&gt; whose origin is the same
+     as the origin of the script that called the &lt;code
+     title=&quot;dom-showModalDialog&quot;&gt;showModalDialog()&lt;/code&gt; method at
+     the time the method was called,&lt;/li&gt; &lt;!-- XXX document.domain
+     breaks this. when fixing it, er on the side of including more
+     browsing contexts rather than less. --&gt;
+
+    &lt;/ul&gt;
+
+    &lt;p&gt;...as well as any browsing contexts that are nested inside any
+    of the browsing contexts matching those conditions.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Disable the user interface for all the browsing contexts in
+    &lt;var title=&quot;&quot;&gt;the list of background browsing contexts&lt;/var&gt;. This
+    should prevent the user from navigating those browsing contexts,
+    causing events to to be sent to those browsing context, or editing
+    any content in those browsing contexts. However, it does not
+    prevent those browsing contexts from receiving events from sources
+    other than the user, from running scripts, from running
+    animations, and so forth.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Create a new &lt;span&gt;auxiliary browsing context&lt;/span&gt;, with the
+    &lt;span&gt;opener browsing context&lt;/span&gt; being the browsing context of
+    the &lt;code&gt;Window&lt;/code&gt; object on which the &lt;code
+    title=&quot;dom-showModalDialog&quot;&gt;showModalDialog()&lt;/code&gt; method was
+    called. The new auxiliary browsing context has no name.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This browsing context implements the
+    &lt;code&gt;ModalWindow&lt;/code&gt; interface.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let the &lt;span&gt;dialog arguments&lt;/span&gt; of the new browsing
+    context be set to the value of &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let the &lt;span&gt;dialog arguments' origin&lt;/span&gt; be the origin of
+    the script that called the &lt;code
+    title=&quot;dom-showModalDialog&quot;&gt;showModalDialog()&lt;/code&gt; method.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;span&gt;Navigate&lt;/span&gt; the new browsing context to &lt;var
+    title=&quot;&quot;&gt;url&lt;/var&gt;, with &lt;span&gt;replacement enabled&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Wait for the browsing context to be closed. (The user agent
+    must allow the user to indicate that the browsing context is to be
+    closed.)&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Reenable the user interface for all the browsing contexts in
+    &lt;var title=&quot;&quot;&gt;the list of background browsing contexts&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Return the &lt;span&gt;auxiliary browsing context&lt;/span&gt;'s
+    &lt;span&gt;return value&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;Browsing contexts created by the above algorithm must implement
+  the &lt;code&gt;ModalWindow&lt;/code&gt; interface:&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;[XXX] interface &lt;dfn&gt;ModalWindow&lt;/dfn&gt; {
+  readonly attribute any &lt;span title=&quot;dom-modalWindow-dialogArguments&quot;&gt;dialogArguments&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-modalWindow-returnValue&quot;&gt;returnValue&lt;/span&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;Such browsing contexts have associated &lt;dfn&gt;dialog
+  arguments&lt;/dfn&gt;, which are stored along with the &lt;dfn&gt;dialog
+  arguments' origin&lt;/dfn&gt;. These values are set by the &lt;code
+  title=&quot;dom-showModalDialog&quot;&gt;showModalDialog()&lt;/code&gt; method in the
+  algorithm above, when the browsing context is created, based on the
+  arguments provided to the method.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-modalWindow-dialogArguments&quot;&gt;&lt;code&gt;dialogArguments&lt;/code&gt;&lt;/dfn&gt;
+  DOM attribute, on getting, must check whether its browsing context's
+  &lt;span&gt;active document&lt;/span&gt;'s &lt;span&gt;origin&lt;/span&gt; is the same as
+  the &lt;span&gt;dialog arguments' origin&lt;/span&gt;. If it is, then the
+  browsing context's &lt;span&gt;dialog arguments&lt;/span&gt; must be returned
+  unchanged. Otherwise, if the &lt;span&gt;dialog arguments&lt;/span&gt; are an
+  object, then the empty string must be returned, and if the
+  &lt;span&gt;dialog arguments&lt;/span&gt; are not an object, then the
+  stringification of the &lt;span&gt;dialog arguments&lt;/span&gt; must be
+  returned.
+
+  &lt;p&gt;These browsing contexts also have an associated &lt;dfn&gt;return
+  value&lt;/dfn&gt;. The &lt;span&gt;return value&lt;/span&gt; of a browsing context
+  must be initialised to the empty string when the browsing context is
+  created.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-modalWindow-returnValue&quot;&gt;&lt;code&gt;returnValue&lt;/code&gt;&lt;/dfn&gt;
+  DOM attribute, on getting, must return the &lt;span&gt;return value&lt;/span&gt;
+  of its browsing context, and on setting, must set the &lt;span&gt;return
+  value&lt;/span&gt; to the given new value.&lt;/p&gt;
+
+
+
   &lt;h3&gt;Browser state&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-navigator&quot;&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt;
@@ -28572,7 +28740,7 @@
    URI. &lt;a href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt; &lt;!-- IRI,
    ifragment? XXX --&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;i&gt;fragid&lt;/i&gt; is the empty string, then the the indicated
+   &lt;li&gt;&lt;p&gt;If &lt;i&gt;fragid&lt;/i&gt; is the empty string, then the indicated
    part of the document is the top of the document.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there is an element in the DOM that has an ID exactly
@@ -28671,7 +28839,7 @@
    labelled &quot;text/html&quot;. --&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; ends in &quot;+xml&quot;, or if
-   it is either &quot;text/xml&quot; or &quot;application/xml&quot;, then the the sniffed
+   it is either &quot;text/xml&quot; or &quot;application/xml&quot;, then the sniffed
    type of the resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;; return
    that and abort these steps.&lt;/p&gt;&lt;/li&gt; &lt;!-- we don't want
    image/svg+xml going through the next step --&gt;
@@ -30588,7 +30756,7 @@
   &lt;span&gt;navigate&lt;/span&gt; a &lt;span&gt;browsing context&lt;/span&gt; to the URI of
   the hyperlink.
 
-  &lt;p&gt;The URI of the hyperlink is URI given by resolving the the &lt;code
+  &lt;p&gt;The URI of the hyperlink is URI given by resolving the &lt;code
   title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt; attribute of that hyperlink
   relative to the hyperlink's element. In the case of server-side
   image maps, the URI of the hyperlink must further have its
@@ -34692,7 +34860,7 @@
    &lt;dd&gt;
 
     &lt;p&gt;&lt;a href=&quot;#processField&quot;&gt;Process the field&lt;/a&gt; using the steps
-    described below, using the the whole line as the field name, and
+    described below, using the whole line as the field name, and
     the empty string as the field value.&lt;/p&gt;
 
    &lt;/dd&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008389.html">[html5] r1489 - /
</A></li>
	<LI>Next message: <A HREF="008391.html">[html5] r1491 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8390">[ date ]</a>
              <a href="thread.html#8390">[ thread ]</a>
              <a href="subject.html#8390">[ subject ]</a>
              <a href="author.html#8390">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
