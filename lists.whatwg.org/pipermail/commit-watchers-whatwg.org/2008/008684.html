<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1786 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1786%20-%20/&In-Reply-To=%3C20080618045856.ED7C538E053%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008683.html">
   <LINK REL="Next"  HREF="008685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1786 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1786%20-%20/&In-Reply-To=%3C20080618045856.ED7C538E053%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1786 - /">whatwg at whatwg.org
       </A><BR>
    <I>Tue Jun 17 21:58:56 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008683.html">[html5] r1785 - /
</A></li>
        <LI>Next message: <A HREF="008685.html">[html5] r1787 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8684">[ date ]</a>
              <a href="thread.html#8684">[ thread ]</a>
              <a href="subject.html#8684">[ subject ]</a>
              <a href="author.html#8684">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-06-17 21:58:56 -0700 (Tue, 17 Jun 2008)
New Revision: 1786

Modified:
   index
   source
Log:
[e] (0) more notes on URLs

Modified: index
===================================================================
--- index	2008-06-18 04:30:16 UTC (rev 1785)
+++ index	2008-06-18 04:58:56 UTC (rev 1786)
@@ -27412,7 +27412,6 @@
    interface.&lt;/p&gt;
   &lt;!-- XXX update to
   point to dom-click when we remove dom-command-click --&gt;
-  &lt;!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX --&gt;
 
   &lt;h3 id=datatemplate&gt;&lt;span class=secno&gt;3.16 &lt;/span&gt;Data Templates&lt;/h3&gt;
 
@@ -27607,12 +27606,13 @@
    processing model is to be applied to that element.
 
   &lt;p&gt;The &lt;code title=attr-template&gt;&lt;a href=&quot;#template&quot;&gt;template&lt;/a&gt;&lt;/code&gt;
-   attribute, when specified, must be a URI to an XML or HTML document, or a
-   fragment identifier pointing at another part of the document. If there is
-   a fragment identifier present, then the element with that ID in the target
-   document must be a &lt;code&gt;&lt;a href=&quot;#datatemplate0&quot;&gt;datatemplate&lt;/a&gt;&lt;/code&gt;
-   element, otherwise, the root element must be a &lt;code&gt;&lt;a
-   href=&quot;#datatemplate0&quot;&gt;datatemplate&lt;/a&gt;&lt;/code&gt; element.
+   attribute, when specified, must be a valid URI (or IRI) to an XML or HTML
+   document, or a fragment identifier pointing at another part of the
+   document. If there is a fragment identifier present, then the element with
+   that ID in the target document must be a &lt;code&gt;&lt;a
+   href=&quot;#datatemplate0&quot;&gt;datatemplate&lt;/a&gt;&lt;/code&gt; element, otherwise, the root
+   element must be a &lt;code&gt;&lt;a href=&quot;#datatemplate0&quot;&gt;datatemplate&lt;/a&gt;&lt;/code&gt;
+   element.
 
   &lt;p&gt;The &lt;dfn id=template0 title=dom-template&gt;&lt;code&gt;template&lt;/code&gt;&lt;/dfn&gt; DOM
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code
@@ -27622,8 +27622,8 @@
   &lt;p&gt;The &lt;dfn id=ref title=attr-ref&gt;&lt;code&gt;ref&lt;/code&gt;&lt;/dfn&gt; attribute may be
    specified on any element on which the &lt;code title=attr-template&gt;&lt;a
    href=&quot;#template&quot;&gt;template&lt;/a&gt;&lt;/code&gt; attribute is specified. If it is
-   specified, it must be a URI to an XML or HTML document, or a fragment
-   identifier pointing at another part of the document.
+   specified, it must be a valid URI (or IRI) to an XML or HTML document, or
+   a fragment identifier pointing at another part of the document.
 
   &lt;p&gt;When an element has a &lt;code title=attr-template&gt;&lt;a
    href=&quot;#template&quot;&gt;template&lt;/a&gt;&lt;/code&gt; attribute but no &lt;code
@@ -27677,6 +27677,7 @@
 
   &lt;h5 id=the-template&gt;&lt;span class=secno&gt;3.16.6.2. &lt;/span&gt;The &lt;code
    title=attr-template&gt;&lt;a href=&quot;#template&quot;&gt;template&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
+  &lt;!-- XXXURL apply algorithms --&gt;
 
   &lt;p&gt;&lt;dfn id=setting title=datatemplate-template-set&gt;Setting&lt;/dfn&gt;: When an
    &lt;a href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML element&lt;/a&gt; without a
@@ -27686,10 +27687,11 @@
    fetch the specified file&lt;!-- XXX or queue it up to be fetched,
   or something --&gt;
    and parse it (without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;) to
-   obtain a DOM. If the URI is the same as the URI of the current
-   document&lt;!-- XXX xref --&gt;, then the current document's DOM must be assumed
-   to be that parsed DOM. While this loading and parsing is in progress, the
-   element is said to be &lt;em&gt;busy loading the template rules or data&lt;/em&gt;.
+   obtain a DOM. If the URI is the same as &lt;span&gt;the document's
+   address&lt;/span&gt;&lt;!-- XXXDOCURL xref --&gt;, then the current document's DOM
+   must be assumed to be that parsed DOM. While this loading and parsing is
+   in progress, the element is said to be &lt;em&gt;busy loading the template rules
+   or data&lt;/em&gt;.
 
   &lt;p&gt;If the resource specified by the &lt;code title=attr-template&gt;&lt;a
    href=&quot;#template&quot;&gt;template&lt;/a&gt;&lt;/code&gt; attribute is not the current
@@ -27802,6 +27804,7 @@
 
   &lt;h5 id=the-ref&gt;&lt;span class=secno&gt;3.16.6.3. &lt;/span&gt;The &lt;code
    title=attr-ref&gt;&lt;a href=&quot;#ref&quot;&gt;ref&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
+  &lt;!-- XXXURL apply algorithms --&gt;
 
   &lt;p&gt;&lt;dfn id=setting0 title=datatemplate-ref-set&gt;Setting&lt;/dfn&gt;: When an &lt;a
    href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML element&lt;/a&gt; without a
@@ -27810,10 +27813,11 @@
    must fetch the specified file&lt;!-- XXX or queue it up to be fetched, or
   something --&gt;
    and parse it (without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;) to
-   obtain a DOM. If the URI is the same as the URI of the current
-   document&lt;!-- XXX xref --&gt;, then the current document's DOM is assumed to
-   be that parsed DOM. While this loading and parsing is in progress, the
-   element is said to be &lt;em&gt;busy loading the template rules or data&lt;/em&gt;.
+   obtain a DOM. If the URI is the same as &lt;span&gt;the document's
+   address&lt;/span&gt;&lt;!-- XXXDOCURL xref --&gt;, then the current document's DOM is
+   assumed to be that parsed DOM. While this loading and parsing is in
+   progress, the element is said to be &lt;em&gt;busy loading the template rules or
+   data&lt;/em&gt;.
 
   &lt;p&gt;If the resource specified by the &lt;code title=attr-ref&gt;&lt;a
    href=&quot;#ref&quot;&gt;ref&lt;/a&gt;&lt;/code&gt; attribute is not the current
@@ -28939,7 +28943,7 @@
    href=&quot;#auxiliary0&quot;&gt;auxiliary browsing context&lt;/a&gt;.
 
   &lt;p&gt;The method has four arguments, though they are all optional.&lt;/p&gt;
-  &lt;!-- XXXURL rfc2119 this paragraph --&gt;
+  &lt;!-- XXXURL rfc2119 this paragraph, apply algorithms --&gt;
 
   &lt;p&gt;The first argument, &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, gives a valid URI (or IRI)
    for a page to load in the browsing context. If no arguments are provided,
@@ -28981,7 +28985,8 @@
    title=dom-open&gt;&lt;a href=&quot;#open2&quot;&gt;window.open()&lt;/a&gt;&lt;/code&gt; API to open a
    page in an iframe, but, while doing so, holds the control key down, the
    user agent could override the selection of the target browsing context to
-   instead target a new tab.
+   instead target a new tab.&lt;/p&gt;
+  &lt;!-- XXXURL apply algorithms --&gt;
 
   &lt;p&gt;Then, the user agent must &lt;a href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; the selected
    &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to the URI given in &lt;var
@@ -29042,7 +29047,8 @@
 
   &lt;p&gt;These characteristics are defined as follows:
 
-  &lt;dl&gt;
+  &lt;dl&gt;&lt;!-- XXXURL change to URL --&gt;
+
    &lt;dt&gt;For URIs
 
    &lt;dd&gt;
@@ -29050,19 +29056,26 @@
      script origin&lt;/a&gt; of the URI is whatever is returned by the following
      algorithm:&lt;/p&gt;
 
-    &lt;ol&gt;
+    &lt;ol&gt;&lt;!-- XXXURL change to URL --&gt;
+
      &lt;li&gt;
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; be the URI for which the &lt;a
        href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is being determined.
+     &lt;/li&gt;
+     &lt;!-- XXXURL apply algorithms --&gt;
 
      &lt;li&gt;
       &lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; according to the rules described in
        RFC 3986 and RFC 3987. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
        href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;
+     &lt;/li&gt;
+     &lt;!-- XXXURL change to URL --&gt;
 
      &lt;li&gt;
       &lt;p&gt;If &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; does not use a server-based naming
        authority, then return a new globally unique identifier.
+     &lt;/li&gt;
+     &lt;!-- XXXURL use algorithms --&gt;
 
      &lt;li&gt;
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; be the &lt;scheme&gt; component of
@@ -29072,10 +29085,14 @@
      &lt;li&gt;
       &lt;p&gt;If the scheme is &quot;&lt;code title=&quot;&quot;&gt;file&lt;/code&gt;&quot;, then the user agent
        may return a UA-specific value.
+     &lt;/li&gt;
+     &lt;!-- XXXURL use algorithms --&gt;
 
      &lt;li&gt;
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the &lt;host&gt;/&lt;ihost&gt;
        component of the URI.
+     &lt;/li&gt;
+     &lt;!-- XXXURL use algorithms --&gt;
 
      &lt;li&gt;
       &lt;p&gt;Apply the IDNA ToASCII algorithm to &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, with
@@ -29090,6 +29107,8 @@
      &lt;li&gt;
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the result of converting &lt;var
        title=&quot;&quot;&gt;host&lt;/var&gt; to lowercase.
+     &lt;/li&gt;
+     &lt;!-- XXXURL use algorithms --&gt;
 
      &lt;li&gt;
       &lt;p&gt;If no port is explicitly listed, then let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;
@@ -29119,26 +29138,32 @@
      &lt;dt&gt;If a script is a function or other code reference created by another
       script
 
-     &lt;dd&gt;The owner is the script that created it.
+     &lt;dd&gt;The owner is the script that created it.&lt;/dd&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
       protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; that was returned
-      as the location of an HTTP redirect (or equivalent in other protocols)
+      as the location of an HTTP redirect (or equivalent in other protocols)&lt;/dt&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dd&gt;The owner is the URI that redirected to the &lt;a
       href=&quot;#the-javascript&quot; title=&quot;javascript protocol&quot;&gt;&lt;code
-      title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt;.
+      title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt;.&lt;/dd&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
       protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; in an attribute
 
      &lt;dd&gt;The owner is the &lt;code&gt;Document&lt;/code&gt; of the element on which the
-      attribute is found.
+      attribute is found.&lt;/dd&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
-      protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; in a style sheet
+      protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; in a style sheet&lt;/dt&gt;
+     &lt;!-- XXXURL use url --&gt;
 
-     &lt;dd&gt;The owner is the URI of the style sheet.
+     &lt;dd&gt;The owner is the URI of the style sheet.&lt;/dd&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
       protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
@@ -29148,21 +29173,25 @@
 
      &lt;dd&gt;The owner is the &lt;code&gt;Document&lt;/code&gt; of the &lt;a
       href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#active&quot;&gt;active
-      document&lt;/a&gt;.
+      document&lt;/a&gt;.&lt;/dd&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
       protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
       href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
-      title=navigate&gt;navigated&lt;/a&gt;, the URI having been declared in markup
+      title=navigate&gt;navigated&lt;/a&gt;, the URI having been declared in markup&lt;/dt&gt;
+     &lt;!-- XXXURL use url --&gt;
 
      &lt;dd&gt;The owner is the &lt;code&gt;Document&lt;/code&gt; of the element (e.g. an
       &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
-      href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt; element) that declared the URI.
+      href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt; element) that declared the URI.&lt;/dd&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
       protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
       href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
-      title=navigate&gt;navigated&lt;/a&gt;, the URI having been provided by script
+      title=navigate&gt;navigated&lt;/a&gt;, the URI having been provided by script&lt;/dt&gt;
+     &lt;!-- XXXURL use url --&gt;
 
      &lt;dd&gt;The owner is the script that provided the URI.
     &lt;/dl&gt;
@@ -29196,48 +29225,59 @@
       track the &lt;code&gt;Document&lt;/code&gt; to which the
       &lt;code&gt;XMLHttpRequest&lt;/code&gt; object's &lt;a
       href=&quot;<A HREF="http://dev.w3.org/2006/webapi/XMLHttpRequest-2/Overview.html#document-pointer">http://dev.w3.org/2006/webapi/XMLHttpRequest-2/Overview.html#document-pointer</A>&quot;&gt;&lt;code&gt;Document&lt;/code&gt;
-      pointer&lt;/a&gt; pointed when it was created.) &lt;a href=&quot;#refsXHR&quot;&gt;[XHR]&lt;/a&gt;
+      pointer&lt;/a&gt; pointed when it was created.) &lt;a href=&quot;#refsXHR&quot;&gt;[XHR]&lt;/a&gt;&lt;/dd&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was generated from a &lt;a
       href=&quot;#the-javascript&quot; title=&quot;javascript
-      protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URI&lt;/a&gt;
+      protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URI&lt;/a&gt;&lt;/dt&gt;
+     &lt;!-- XXXURL JSURL issue --&gt;
 
      &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is equal to the &lt;a
       href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the script of that &lt;a
       href=&quot;#the-javascript&quot; title=&quot;javascript
-      protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URI&lt;/a&gt;.
+      protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URI&lt;/a&gt;.&lt;/dd&gt;
+     &lt;!-- XXXURL use url --&gt;
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was served over the network and
       has an address that uses a URI scheme with a server-based naming
-      authority
+      authority&lt;/dt&gt;
+     &lt;!-- XXXURL use url --&gt;
 
      &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is the &lt;a
       href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;span title=&quot;the document's
       address&quot;&gt;full URI&lt;/span&gt;&lt;!--
      XXXDOCURL --&gt; of the
-      &lt;code&gt;Document&lt;/code&gt; or image.
+      &lt;code&gt;Document&lt;/code&gt; or image.&lt;/dd&gt;
+     &lt;!-- XXXURL use url --&gt;
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was generated from a &lt;code
       title=&quot;&quot;&gt;data:&lt;/code&gt; URI that was returned as the location of an HTTP
-      redirect (or equivalent in other protocols)
+      redirect (or equivalent in other protocols)&lt;/dt&gt;
+     &lt;!-- XXXURL use url --&gt;
 
      &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is the &lt;a
       href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the URI that redirected to the &lt;code
-      title=&quot;&quot;&gt;data:&lt;/code&gt; URI.
+      title=&quot;&quot;&gt;data:&lt;/code&gt; URI.&lt;/dd&gt;
+     &lt;!-- XXXURL use url --&gt;
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was generated from a &lt;code
       title=&quot;&quot;&gt;data:&lt;/code&gt; URI found in another &lt;code&gt;Document&lt;/code&gt; or in
-      a script
+      a script&lt;/dt&gt;
+     &lt;!-- XXXURL use url --&gt;
 
      &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is the &lt;a
       href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt; or script in
-      which the &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI was found.
+      which the &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI was found.&lt;/dd&gt;
+     &lt;!-- XXXURL use url --&gt;
+     &lt;!-- XXXDOCURL use the document's address? --&gt;
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; has the URI &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot;
 
      &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt; is &lt;a
       href=&quot;#about-blank-origin&quot;&gt;the &lt;span&gt;origin&lt;/span&gt; it was assigned when
-      its browsing context was created&lt;/a&gt;.
+      its browsing context was created&lt;/a&gt;.&lt;/dd&gt;
+     &lt;!-- XXXURL data: URL issue --&gt;
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was obtained in some other
       manner (e.g. a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI typed in by the user, a
@@ -29411,7 +29451,8 @@
    limited to:
 
   &lt;ul&gt;
-   &lt;li&gt;Processing of &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
+   &lt;li&gt;Processing of &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.&lt;/li&gt;
+   &lt;!-- XXXURL JSURL issue --&gt;
 
    &lt;li&gt;Processing of inline &lt;code title=&quot;javascript protocol&quot;&gt;&lt;a
     href=&quot;#the-javascript&quot;&gt;javascript:&lt;/a&gt;&lt;/code&gt; URIs (e.g. the &lt;code
@@ -29496,16 +29537,20 @@
   &lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;4.4.3 &lt;/span&gt;&lt;dfn
    id=the-javascript title=&quot;javascript protocol&quot;&gt;The &lt;code
    title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;!-- XXXURL merge into URLs section? (we could define 'fetch'/'download' while we're at it?) --&gt;
+  &lt;!-- XXXURL JSURL issue --&gt;
 
   &lt;p&gt;A URI using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol must, if and
    when dereferenced, be evaluated by executing the script obtained using the
    content retrieval operation defined for &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt;
    URIs. &lt;a href=&quot;#refsJSURI&quot;&gt;[JSURI]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- XXXURL JSURL issue --&gt;
   &lt;!--
 JSURI: <A HREF="http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt">http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt</A> and
        <A HREF="http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt">http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt</A> should be as stable as it gets,
        <A HREF="http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/">http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/</A> for the latest version
 --&gt;
+  &lt;!-- XXXURL JSURL issue --&gt;
 
   &lt;p&gt;When a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is &lt;a href=&quot;#navigate&quot;
    title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI, and the &lt;a
@@ -29513,7 +29558,8 @@
    href=&quot;#same-origin&quot;&gt;same origin&lt;/a&gt; as the script given by that URI, the
    &lt;a href=&quot;#script2&quot;&gt;script execution context&lt;/a&gt; must be the &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a
-   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; being navigated.
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; being navigated.&lt;/p&gt;
+  &lt;!-- XXXURL JSURL issue --&gt;
 
   &lt;p&gt;When a browsing context is &lt;a href=&quot;#navigate&quot;
    title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI, and the &lt;a
@@ -29524,18 +29570,21 @@
    and the &lt;a href=&quot;#script2&quot;&gt;script execution context&lt;/a&gt;'s associated &lt;a
    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; must be the &lt;a
    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; being &lt;a href=&quot;#navigate&quot;
-   title=navigate&gt;navigated&lt;/a&gt;.
+   title=navigate&gt;navigated&lt;/a&gt;.&lt;/p&gt;
+  &lt;!-- XXXURL JSURL issue --&gt;
 
   &lt;p&gt;Otherwise, the &lt;a href=&quot;#script2&quot;&gt;script execution context&lt;/a&gt; must be
    an empty object, and the &lt;a href=&quot;#script2&quot;&gt;script execution context&lt;/a&gt;'s
    associated &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; must be the &lt;a
    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt; object
    of the element, attribute, or style sheet from which the
-   &lt;code&gt;javascript:&lt;/code&gt; URI was reached.
+   &lt;code&gt;javascript:&lt;/code&gt; URI was reached.&lt;/p&gt;
+  &lt;!-- XXXURL JSURL issue --&gt;
 
   &lt;p&gt;If the result of executing the script is void (there is no return
    value), then the URI must be treated in a manner equivalent to an HTTP
-   resource with an HTTP 204 No Content response.
+   resource with an HTTP 204 No Content response.&lt;/p&gt;
+  &lt;!-- XXXURL JSURL issue --&gt;
 
   &lt;p&gt;Otherwise, the URI must be treated in a manner equivalent to an HTTP
    resource with a 200 OK response whose &lt;a href=&quot;#content-type8&quot;
@@ -29547,13 +29596,13 @@
    href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, ignore the &lt;a href=&quot;#content-type8&quot;
    title=Content-Type&gt;Content-Type metadata&lt;/a&gt;.
 
-  &lt;div class=example&gt;
+  &lt;div class=example&gt; &lt;!-- XXXURL JSURL issue --&gt;
    &lt;p&gt;So for example a &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI for a &lt;code
     title=attr-img-src&gt;&lt;a href=&quot;#src&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a
     href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; element would be evaluated in the context of
     an empty object as soon as the attribute is set; it would then be sniffed
     to determine the image type and decoded as an image.&lt;/p&gt;
-
+   &lt;!-- XXXURL JSURL issue --&gt;
    &lt;p&gt;A &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI in an &lt;code
     title=attr-a-href&gt;href&lt;/code&gt; attribute of an &lt;code&gt;&lt;a
     href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; element would only be evaluated when the link was
@@ -29964,6 +30013,7 @@
    &lt;code&gt;preventDefault()&lt;/code&gt; method must be called when the function
    returns true instead.&lt;/p&gt;
   &lt;!-- IE actually uncancels the event if the function returns true --&gt;
+  &lt;!-- XXX update the following to match DOM3 Events --&gt;
 
   &lt;p&gt;All event handler attributes on an element, whether set to null or to a
    function, must be registered as event listeners on the element, as if the
@@ -30112,7 +30162,7 @@
     &lt;p&gt;The function referenced by the &lt;code title=handler-onerror&gt;&lt;a
      href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; attribute must be invoked with three
      arguments, before notifying the user of the error.&lt;/p&gt;
-
+    &lt;!-- XXXURL use url, or address --&gt;
     &lt;p&gt;The three arguments passed to the function are all
      &lt;code&gt;DOMString&lt;/code&gt;s; the first must give the message that the UA is
      considering reporting, the second must give the URI to the resource in
@@ -30614,7 +30664,7 @@
     href=&quot;#registerprotocolhandler&quot;&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
     only)
 
-   &lt;dd&gt;
+   &lt;dd&gt; &lt;!-- XXXURL use url --&gt;
     &lt;p&gt;A scheme, such as &lt;code&gt;ftp&lt;/code&gt; or &lt;code&gt;fax&lt;/code&gt;. The scheme
      must be treated case-insensitively by user agents for the purposes of
      comparing with the scheme part of URIs that they consider against the
@@ -30640,16 +30690,18 @@
      parameters. Thus, if &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values passed to this
      method include characters such as commas or whitespace, or include MIME
      parameters, then the handler being registered will never be used.&lt;/p&gt;
+   &lt;/dd&gt;
+   &lt;!-- XXXURL use url --&gt;
 
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;uri&lt;/var&gt;
 
-   &lt;dd&gt;
+   &lt;dd&gt; &lt;!-- XXXURL use url, algorithms --&gt;
     &lt;p&gt;The URI of the page that will handle the requests. When the user agent
      uses this URI, it must replace the first occurrence of the exact literal
      string &quot;&lt;code&gt;%s&lt;/code&gt;&quot; with an escaped version of the URI of the
      content in question (as defined below), and then fetch the resulting URI
      using the GET method (or equivalent for non-HTTP URIs).&lt;/p&gt;
-
+    &lt;!-- XXXURL use url, algorithms --&gt;
     &lt;p&gt;To get the escaped version of the URI, first, the domain part of the
      URI (if any) must be converted to its punycode representation, and then,
      every character in the URI that is not in the ranges given in the next
@@ -30661,7 +30713,7 @@
     &lt;p&gt;The ranges of characters that must not be escaped are: U+002D (-),
      U+002E (.), U+0030 (0) to U+0039 (9), U+0041 (A) to U+005A (Z), U+005F
      (_), U+0061 (a) to U+007A (z), and U+007E (~).&lt;/p&gt;
-    &lt;!-- XXX move that to a common algorithms section if any other
+    &lt;!-- XXXURL move that to a common algorithms section if any other
     part of the spec needs it --&gt;
     
     &lt;div class=example&gt;
@@ -30672,7 +30724,7 @@
      &lt;p&gt;...and then clicked on a link such as:&lt;/p&gt;
 
      &lt;pre&gt;&lt;a href=&quot;<A HREF="http://www.example.net/chickenk&amp;#xEF;wi.soup">http://www.example.net/chickenk&amp;#xEF;wi.soup</A>&quot;&gt;Download our Chicken Kiwi soup!&lt;/a&gt;&lt;/pre&gt;
-
+     &lt;!-- XXXURL use url --&gt;
      &lt;p&gt;...then, assuming this &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt; file was
       served with the MIME type &lt;code&gt;application/x-soup&lt;/code&gt;, the UA might
       navigate to the following URI:&lt;/p&gt;
@@ -30690,6 +30742,7 @@
     &lt;p&gt;A descriptive title of the handler, which the UA might use to remind
      the user what the site in question is.&lt;/p&gt;
   &lt;/dl&gt;
+  &lt;!-- XXXURL use url --&gt;
 
   &lt;p&gt;User agents should raise &lt;a href=&quot;#security9&quot; title=&quot;security
    exception&quot;&gt;security exceptions&lt;/a&gt; if the methods are called with &lt;var
@@ -30756,7 +30809,8 @@
    against typical attacks against strings embedded in their interface, for
    example ensuring that markup or escape characters in such strings are not
    executed, that null bytes are properly handled, that over-long strings do
-   not cause crashes or buffer overruns, and so forth.
+   not cause crashes or buffer overruns, and so forth.&lt;/p&gt;
+  &lt;!-- XXXURL use url --&gt;
 
   &lt;p&gt;&lt;strong&gt;Leaking Intranet URIs.&lt;/strong&gt; The mechanism described in this
    section can result in secret Intranet URIs being leaked, in the following
@@ -30772,6 +30826,7 @@
    &lt;li&gt;The user agent contacts the third party and hands the third party the
     URI to the Intranet content.
   &lt;/ol&gt;
+  &lt;!-- XXXURL use url --&gt;
 
   &lt;p&gt;No actual confidential file data is leaked in this manner, but the URIs
    themselves could contain confidential information. For example, the URI
@@ -30780,12 +30835,14 @@
    which might tell the third party that Example Corporation is intending to
    merge with Samples LLC. Implementors might wish to consider allowing
    administrators to disable this feature for certain subdomains, content
-   types, or protocols.
+   types, or protocols.&lt;/p&gt;
+  &lt;!-- XXXURL use url --&gt;
 
   &lt;p&gt;&lt;strong&gt;Leaking secure URIs.&lt;/strong&gt; User agents should not send HTTPS
    URIs to third-party sites registered as content handlers, in the same way
    that user agents do not send &lt;code&gt;Referer&lt;/code&gt; headers from secure
-   sites to third-party sites.
+   sites to third-party sites.&lt;/p&gt;
+  &lt;!-- XXXURL use url --&gt;
 
   &lt;p&gt;&lt;strong&gt;Leaking credentials.&lt;/strong&gt; User agents must never send
    username or password information in the URIs that are escaped and included
@@ -30827,6 +30884,7 @@
 |                                                            |
 |              ( Trust kittens.example.org )  (( Cancel ))   |
 |____________________________________________________________|&lt;/pre&gt;
+  &lt;!-- XXXURL use url --&gt;
 
   &lt;p&gt;...where &quot;Kittens at work&quot; is the title of the page that invoked the
    method, &quot;<A HREF="http://kittens.example.org/">http://kittens.example.org/</A>&quot; is the URI of that page, &quot;x-meow&quot; is
@@ -30839,10 +30897,12 @@
    argument (&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;).
 
   &lt;p&gt;If the user clicks the Cancel button, then nothing further happens. If
-   the user clicks the &quot;Trust&quot; button, then the handler is remembered.
+   the user clicks the &quot;Trust&quot; button, then the handler is remembered.&lt;/p&gt;
+  &lt;!-- XXXURL use url --&gt;
 
   &lt;p&gt;When the user then attempts to fetch a URI that uses the &quot;x-meow:&quot;
-   scheme, then it might display a dialog as follows:
+   scheme, then it might display a dialog as follows:&lt;/p&gt;
+  &lt;!-- XXXURL use url? --&gt;
 
   &lt;pre&gt;||[ Unknown Protocol ]||||||||||||||||||||||||||||||||||||||||
 |                                                            |
@@ -30878,7 +30938,8 @@
   &lt;p&gt;The &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a
    href=&quot;#registercontenthandler&quot;&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; method
    would work equivalently, but for unknown MIME types instead of unknown
-   protocols.
+   protocols.&lt;/p&gt;
+  &lt;!-- XXXURL XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX --&gt;
 
   &lt;h3 id=offline&gt;&lt;span class=secno&gt;4.7 &lt;/span&gt;Offline Web applications&lt;/h3&gt;
 

Modified: source
===================================================================
--- source	2008-06-18 04:30:16 UTC (rev 1785)
+++ source	2008-06-18 04:58:56 UTC (rev 1786)
@@ -25060,7 +25060,6 @@
   point to dom-click when we remove dom-command-click --&gt;
 
 
-&lt;!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX --&gt;
 
 
   &lt;h3 id=&quot;datatemplate&quot;&gt;Data Templates&lt;/h3&gt;
@@ -25217,12 +25216,12 @@
   processing model is to be applied to that element.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code title=&quot;attr-template&quot;&gt;template&lt;/code&gt; attribute, when
-  specified, must be a URI to an XML or HTML document, or a fragment
-  identifier pointing at another part of the document. If there is a
-  fragment identifier present, then the element with that ID in the
-  target document must be a &lt;code&gt;datatemplate&lt;/code&gt; element,
-  otherwise, the root element must be a &lt;code&gt;datatemplate&lt;/code&gt;
-  element.&lt;/p&gt;
+  specified, must be a valid URI (or IRI) to an XML or HTML document,
+  or a fragment identifier pointing at another part of the
+  document. If there is a fragment identifier present, then the
+  element with that ID in the target document must be a
+  &lt;code&gt;datatemplate&lt;/code&gt; element, otherwise, the root element must
+  be a &lt;code&gt;datatemplate&lt;/code&gt; element.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-template&quot;&gt;&lt;code&gt;template&lt;/code&gt;&lt;/dfn&gt; DOM
   attribute must &lt;span&gt;reflect&lt;/span&gt; the &lt;code
@@ -25232,8 +25231,9 @@
   &lt;p&gt;The &lt;dfn title=&quot;attr-ref&quot;&gt;&lt;code&gt;ref&lt;/code&gt;&lt;/dfn&gt; attribute may be
   specified on any element on which the &lt;code
   title=&quot;attr-template&quot;&gt;template&lt;/code&gt; attribute is specified. If it
-  is specified, it must be a URI to an XML or HTML document, or a
-  fragment identifier pointing at another part of the document.&lt;/p&gt;
+  is specified, it must be a valid URI (or IRI) to an XML or HTML
+  document, or a fragment identifier pointing at another part of the
+  document.&lt;/p&gt;
 
   &lt;p&gt;When an element has a &lt;code title=&quot;attr-template&quot;&gt;template&lt;/code&gt;
   attribute but no &lt;code title=&quot;attr-ref&quot;&gt;ref&lt;/code&gt; attribute, the
@@ -25291,14 +25291,15 @@
 
   &lt;h5&gt;The &lt;code title=&quot;attr-template&quot;&gt;template&lt;/code&gt; attribute&lt;/h5&gt;
 
+  &lt;!-- XXXURL apply algorithms --&gt;
   &lt;p&gt;&lt;dfn title=&quot;datatemplate-template-set&quot;&gt;Setting&lt;/dfn&gt;: When an
   &lt;span title=&quot;HTML elements&quot;&gt;HTML element&lt;/span&gt; without a &lt;code
   title=&quot;attr-template&quot;&gt;template&lt;/code&gt; attribute has its &lt;code
   title=&quot;attr-template&quot;&gt;template&lt;/code&gt; attribute set, the user agent
   must fetch the specified file&lt;!-- XXX or queue it up to be fetched,
   or something --&gt; and parse it (without a &lt;span&gt;browsing
-  context&lt;/span&gt;) to obtain a DOM. If the URI is the same as the URI
-  of the current document&lt;!-- XXX xref --&gt;, then the current
+  context&lt;/span&gt;) to obtain a DOM. If the URI is the same as &lt;span&gt;the
+  document's address&lt;/span&gt;&lt;!-- XXXDOCURL xref --&gt;, then the current
   document's DOM must be assumed to be that parsed DOM. While this
   loading and parsing is in progress, the element is said to be
   &lt;em&gt;busy loading the template rules or data&lt;/em&gt;.&lt;/p&gt;
@@ -25419,17 +25420,18 @@
 
   &lt;h5&gt;The &lt;code title=&quot;attr-ref&quot;&gt;ref&lt;/code&gt; attribute&lt;/h5&gt;
 
+  &lt;!-- XXXURL apply algorithms --&gt;
   &lt;p&gt;&lt;dfn title=&quot;datatemplate-ref-set&quot;&gt;Setting&lt;/dfn&gt;: When an &lt;span
   title=&quot;HTML elements&quot;&gt;HTML element&lt;/span&gt; without a &lt;code
   title=&quot;attr-ref&quot;&gt;ref&lt;/code&gt; attribute has its &lt;code
   title=&quot;attr-ref&quot;&gt;ref&lt;/code&gt; attribute set, the user agent must fetch
   the specified file&lt;!-- XXX or queue it up to be fetched, or
   something --&gt; and parse it (without a &lt;span&gt;browsing context&lt;/span&gt;)
-  to obtain a DOM. If the URI is the same as the URI of the current
-  document&lt;!-- XXX xref --&gt;, then the current document's DOM is
-  assumed to be that parsed DOM. While this loading and parsing is in
-  progress, the element is said to be &lt;em&gt;busy loading the template
-  rules or data&lt;/em&gt;.&lt;/p&gt;
+  to obtain a DOM. If the URI is the same as &lt;span&gt;the document's
+  address&lt;/span&gt;&lt;!-- XXXDOCURL xref --&gt;, then the current document's
+  DOM is assumed to be that parsed DOM. While this loading and parsing
+  is in progress, the element is said to be &lt;em&gt;busy loading the
+  template rules or data&lt;/em&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the resource specified by the &lt;code
   title=&quot;attr-ref&quot;&gt;ref&lt;/code&gt; attribute is not the current
@@ -26575,7 +26577,7 @@
 
   &lt;p&gt;The method has four arguments, though they are all optional.&lt;/p&gt;
 
-  &lt;!-- XXXURL rfc2119 this paragraph --&gt;
+  &lt;!-- XXXURL rfc2119 this paragraph, apply algorithms --&gt;
   &lt;p&gt;The first argument, &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, gives a valid URI
   (or IRI) for a page to load in the browsing context. If no arguments
   are provided, then the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument defaults to
@@ -26620,6 +26622,7 @@
   agent could override the selection of the target browsing context to
   instead target a new tab.&lt;/p&gt;
 
+  &lt;!-- XXXURL apply algorithms --&gt;
   &lt;p&gt;Then, the user agent must &lt;span&gt;navigate&lt;/span&gt; the selected
   &lt;span&gt;browsing context&lt;/span&gt; to the URI given in &lt;var
   title=&quot;&quot;&gt;url&lt;/var&gt;. If the &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is true, then
@@ -26680,6 +26683,7 @@
 
   &lt;dl&gt;
 
+   &lt;!-- XXXURL change to URL --&gt;
    &lt;dt&gt;For URIs&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -26690,18 +26694,22 @@
 
     &lt;ol&gt;
 
+     &lt;!-- XXXURL change to URL --&gt;
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; be the URI for which the
      &lt;span&gt;origin&lt;/span&gt; is being determined.&lt;/p&gt;&lt;/li&gt;
 
+     &lt;!-- XXXURL apply algorithms --&gt;
      &lt;li&gt;&lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; according to the rules
      described in RFC 3986 and RFC 3987. &lt;a
      href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
      href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
 
+     &lt;!-- XXXURL change to URL --&gt;
      &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; does not use a server-based
      naming authority, then return a new globally unique
      identifier.&lt;/p&gt;&lt;/li&gt;
 
+     &lt;!-- XXXURL use algorithms --&gt;
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; be the &lt;scheme&gt;
      component of the URI, converted to lowercase. If the UA doesn't
      support the given protocol, then return a new globally unique
@@ -26710,9 +26718,11 @@
      &lt;li&gt;&lt;p&gt;If the scheme is &quot;&lt;code title=&quot;&quot;&gt;file&lt;/code&gt;&quot;, then the
      user agent may return a UA-specific value.&lt;/p&gt;&lt;/li&gt;
 
+     &lt;!-- XXXURL use algorithms --&gt;
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the
      &lt;host&gt;/&lt;ihost&gt; component of the URI.&lt;/p&gt;&lt;/li&gt;
 
+     &lt;!-- XXXURL use algorithms --&gt;
      &lt;li&gt;
 
       &lt;p&gt;Apply the IDNA ToASCII algorithm to &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;,
@@ -26730,6 +26740,7 @@
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the result of converting
      &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; to lowercase.&lt;/p&gt;&lt;/li&gt;
 
+     &lt;!-- XXXURL use algorithms --&gt;
      &lt;li&gt;&lt;p&gt;If no port is explicitly listed, then let &lt;var
      title=&quot;&quot;&gt;port&lt;/var&gt; be the default port for the protocol given by
      &lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt;. Otherwise, let &lt;var
@@ -26765,16 +26776,19 @@
      &lt;dd&gt;The owner is the script that created it.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
      title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; that was returned as the
      location of an HTTP redirect (or equivalent in other
      protocols)&lt;/dt&gt;
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dd&gt;The owner is the URI that redirected to the &lt;span
      title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt;
      URI&lt;/span&gt;.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
      title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; in an attribute&lt;/dt&gt;
 
@@ -26782,12 +26796,15 @@
      which the attribute is found.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
      title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; in a style sheet&lt;/dt&gt;
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dd&gt;The owner is the URI of the style sheet.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
      title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
      context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
@@ -26798,21 +26815,25 @@
      context&lt;/span&gt;'s &lt;span&gt;active document&lt;/span&gt;.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
      title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
      context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
      the URI having been declared in markup&lt;/dt&gt;
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dd&gt;The owner is the &lt;code&gt;Document&lt;/code&gt; of the element
      (e.g. an &lt;code&gt;a&lt;/code&gt; or &lt;code&gt;area&lt;/code&gt; element) that
      declared the URI.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
      title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
      context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
      the URI having been provided by script&lt;/dt&gt;
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dd&gt;The owner is the script that provided the URI.&lt;/dd&gt;
 
     &lt;/dl&gt;
@@ -26854,41 +26875,51 @@
      href=&quot;#refsXHR&quot;&gt;[XHR]&lt;/a&gt;&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was generated from a
      &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt;
      URI&lt;/span&gt;&lt;/dt&gt;
 
+     &lt;!-- XXXURL JSURL issue --&gt;
      &lt;dd&gt;The &lt;span&gt;origin&lt;/span&gt; is equal to the &lt;span&gt;origin&lt;/span&gt;
      of the script of that &lt;span title=&quot;javascript
      protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URI&lt;/span&gt;.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was served over the
      network and has an address that uses a URI scheme with a
      server-based naming authority&lt;/dt&gt;
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dd&gt;The &lt;span&gt;origin&lt;/span&gt; is the &lt;span&gt;origin&lt;/span&gt; of the
      &lt;span title=&quot;the document's address&quot;&gt;full URI&lt;/span&gt;&lt;!--
      XXXDOCURL --&gt; of the &lt;code&gt;Document&lt;/code&gt; or image.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was generated from a
      &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI that was returned as the location
      of an HTTP redirect (or equivalent in other protocols)&lt;/dt&gt;
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dd&gt;The &lt;span&gt;origin&lt;/span&gt; is the &lt;span&gt;origin&lt;/span&gt; of the URI
      that redirected to the &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was generated from a
      &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI found in another
      &lt;code&gt;Document&lt;/code&gt; or in a script&lt;/dt&gt;
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;dd&gt;The &lt;span&gt;origin&lt;/span&gt; is the &lt;span&gt;origin&lt;/span&gt; of the
      &lt;code&gt;Document&lt;/code&gt; or script in which the &lt;code
      title=&quot;&quot;&gt;data:&lt;/code&gt; URI was found.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL use url --&gt;
+     &lt;!-- XXXDOCURL use the document's address? --&gt;
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; has the URI
      &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot;&lt;/dt&gt;
 
@@ -26897,6 +26928,7 @@
      assigned when its browsing context was created&lt;/a&gt;.&lt;/dd&gt;
 
 
+     &lt;!-- XXXURL data: URL issue --&gt;
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was obtained in some
      other manner (e.g. a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI typed in by
      the user, a &lt;code&gt;Document&lt;/code&gt; created using the &lt;code
@@ -27113,6 +27145,7 @@
 
    &lt;li&gt;Processing of &lt;code&gt;script&lt;/code&gt; elements.&lt;/li&gt;
 
+   &lt;!-- XXXURL JSURL issue --&gt;
    &lt;li&gt;Processing of inline &lt;code title=&quot;javascript
    protocol&quot;&gt;javascript:&lt;/code&gt; URIs (e.g. the &lt;code
    title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute of &lt;code&gt;img&lt;/code&gt;
@@ -27200,18 +27233,22 @@
 
   &lt;h4 id=&quot;javascript-protocol&quot;&gt;&lt;dfn title=&quot;javascript protocol&quot;&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
 
+  &lt;!-- XXXURL merge into URLs section? (we could define 'fetch'/'download' while we're at it?) --&gt;
+  &lt;!-- XXXURL JSURL issue --&gt;
   &lt;p&gt;A URI using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol must,
   if and when dereferenced, be evaluated by executing the script
   obtained using the content retrieval operation defined for &lt;code
   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URIs. &lt;a
   href=&quot;#refsJSURI&quot;&gt;[JSURI]&lt;/a&gt;&lt;/p&gt;
 
+&lt;!-- XXXURL JSURL issue --&gt;
 &lt;!--
 JSURI: <A HREF="http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt">http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt</A> and
        <A HREF="http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt">http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt</A> should be as stable as it gets,
        <A HREF="http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/">http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/</A> for the latest version
 --&gt;
 
+  &lt;!-- XXXURL JSURL issue --&gt;
   &lt;p&gt;When a &lt;span&gt;browsing context&lt;/span&gt; is &lt;span
   title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI,
   and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has
@@ -27220,6 +27257,7 @@
   &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;browsing context&lt;/span&gt;
   being navigated.&lt;/p&gt;
 
+  &lt;!-- XXXURL JSURL issue --&gt;
   &lt;p&gt;When a browsing context is &lt;span
   title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI,
   and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has an
@@ -27230,6 +27268,7 @@
   &lt;span&gt;browsing context&lt;/span&gt; must be the &lt;span&gt;browsing
   context&lt;/span&gt; being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;!-- XXXURL JSURL issue --&gt;
   &lt;p&gt;Otherwise, the &lt;span&gt;script execution context&lt;/span&gt; must be an
   empty object, and the &lt;span&gt;script execution context&lt;/span&gt;'s
   associated &lt;span&gt;browsing context&lt;/span&gt; must be the &lt;span&gt;browsing
@@ -27237,10 +27276,12 @@
   attribute, or style sheet from which the &lt;code&gt;javascript:&lt;/code&gt;
   URI was reached.&lt;/p&gt;
 
+  &lt;!-- XXXURL JSURL issue --&gt;
   &lt;p&gt;If the result of executing the script is void (there is no return
   value), then the URI must be treated in a manner equivalent to an
   HTTP resource with an HTTP 204 No Content response.&lt;/p&gt;
 
+  &lt;!-- XXXURL JSURL issue --&gt;
   &lt;p&gt;Otherwise, the URI must be treated in a manner equivalent to an
   HTTP resource with a 200 OK response whose &lt;span
   title=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; is &lt;code
@@ -27253,12 +27294,14 @@
 
   &lt;div class=&quot;example&quot;&gt;
 
+   &lt;!-- XXXURL JSURL issue --&gt;
    &lt;p&gt;So for example a &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI for a
    &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute of an
    &lt;code&gt;img&lt;/code&gt; element would be evaluated in the context of an
    empty object as soon as the attribute is set; it would then be
    sniffed to determine the image type and decoded as an image.&lt;/p&gt;
 
+   &lt;!-- XXXURL JSURL issue --&gt;
    &lt;p&gt;A &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI in an &lt;code
    title=&quot;attr-a-href&quot;&gt;href&lt;/code&gt; attribute of an &lt;code&gt;a&lt;/code&gt;
    element would only be evaluated when the link was &lt;span
@@ -27600,6 +27643,7 @@
 
   &lt;!-- IE actually uncancels the event if the function returns true --&gt;
 
+  &lt;!-- XXX update the following to match DOM3 Events --&gt;
   &lt;p&gt;All event handler attributes on an element, whether set to null
   or to a function, must be registered as event listeners on the
   element, as if the &lt;code
@@ -27765,6 +27809,7 @@
     title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt; attribute must be invoked
     with three arguments, before notifying the user of the error.&lt;/p&gt;
 
+    &lt;!-- XXXURL use url, or address --&gt;
     &lt;p&gt;The three arguments passed to the function are all
     &lt;code&gt;DOMString&lt;/code&gt;s; the first must give the message that the
     UA is considering reporting, the second must give the URI to the
@@ -28342,14 +28387,15 @@
 
    &lt;dd&gt;
 
+    &lt;!-- XXXURL use url --&gt;
     &lt;p&gt;A scheme, such as &lt;code&gt;ftp&lt;/code&gt; or &lt;code&gt;fax&lt;/code&gt;. The
     scheme must be treated case-insensitively by user agents for the
     purposes of comparing with the scheme part of URIs that they
     consider against the list of registered handlers.&lt;/p&gt;
 
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; value, if it contains a colon (as in
-    &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since schemes
-    don't contain colons.&lt;/p&gt;
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; value, if it contains a colon
+    (as in &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since
+    schemes don't contain colons.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -28372,10 +28418,12 @@
 
    &lt;/dd&gt;
 
+   &lt;!-- XXXURL use url --&gt;
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;uri&lt;/var&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
+    &lt;!-- XXXURL use url, algorithms --&gt;
     &lt;p&gt;The URI of the page that will handle the requests. When the
     user agent uses this URI, it must replace the first occurrence of
     the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot; with an escaped version
@@ -28383,6 +28431,7 @@
     fetch the resulting URI using the GET method (or equivalent for
     non-HTTP URIs).&lt;/p&gt;
 
+    &lt;!-- XXXURL use url, algorithms --&gt;
     &lt;p&gt;To get the escaped version of the URI, first, the domain part
     of the URI (if any) must be converted to its punycode
     representation, and then, every character in the URI that is not
@@ -28396,7 +28445,7 @@
     (-), U+002E (.), U+0030 (0) to U+0039 (9), U+0041 (A) to U+005A
     (Z), U+005F (_), U+0061 (a) to U+007A (z), and U+007E (~).&lt;/p&gt;
 
-    &lt;!-- XXX move that to a common algorithms section if any other
+    &lt;!-- XXXURL move that to a common algorithms section if any other
     part of the spec needs it --&gt;
 
     &lt;div class=&quot;example&quot;&gt;
@@ -28409,6 +28458,7 @@
 
      &lt;pre&gt;&lt;a href=&quot;<A HREF="http://www.example.net/chickenk&amp;#xEF;wi.soup">http://www.example.net/chickenk&amp;#xEF;wi.soup</A>&quot;&gt;Download our Chicken Kiwi soup!&lt;/a&gt;&lt;/pre&gt;
 
+     &lt;!-- XXXURL use url --&gt;
      &lt;p&gt;...then, assuming this &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt; file
      was served with the MIME type &lt;code&gt;application/x-soup&lt;/code&gt;,
      the UA might navigate to the following URI:&lt;/p&gt;
@@ -28434,6 +28484,7 @@
 
   &lt;/dl&gt;
 
+  &lt;!-- XXXURL use url --&gt;
   &lt;p&gt;User agents should raise &lt;span title=&quot;security
   exception&quot;&gt;security exceptions&lt;/span&gt; if the methods are called with
   &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values
@@ -28507,6 +28558,7 @@
   that over-long strings do not cause crashes or buffer overruns, and
   so forth.&lt;/p&gt;
 
+  &lt;!-- XXXURL use url --&gt;
   &lt;p&gt;&lt;strong&gt;Leaking Intranet URIs.&lt;/strong&gt; The mechanism described
   in this section can result in secret Intranet URIs being leaked, in
   the following manner:&lt;/p&gt;
@@ -28524,6 +28576,7 @@
 
   &lt;/ol&gt;
 
+  &lt;!-- XXXURL use url --&gt;
   &lt;p&gt;No actual confidential file data is leaked in this manner, but
   the URIs themselves could contain confidential information. For
   example, the URI could be
@@ -28533,11 +28586,13 @@
   consider allowing administrators to disable this feature for certain
   subdomains, content types, or protocols.&lt;/p&gt;
 
+  &lt;!-- XXXURL use url --&gt;
   &lt;p&gt;&lt;strong&gt;Leaking secure URIs.&lt;/strong&gt; User agents should not send
   HTTPS URIs to third-party sites registered as content handlers, in
   the same way that user agents do not send &lt;code&gt;Referer&lt;/code&gt;
   headers from secure sites to third-party sites.&lt;/p&gt;
 
+  &lt;!-- XXXURL use url --&gt;
   &lt;p&gt;&lt;strong&gt;Leaking credentials.&lt;/strong&gt; User agents must never send
   username or password information in the URIs that are escaped and
   included sent to the handler sites. User agents may even avoid
@@ -28579,6 +28634,7 @@
 |              ( Trust kittens.example.org )  (( Cancel ))   |
 |____________________________________________________________|&lt;/pre&gt;
 
+  &lt;!-- XXXURL use url --&gt;
   &lt;p&gt;...where &quot;Kittens at work&quot; is the title of the page that invoked
   the method, &quot;<A HREF="http://kittens.example.org/">http://kittens.example.org/</A>&quot; is the URI of that page,
   &quot;x-meow&quot; is the string that was passed to the &lt;code
@@ -28592,9 +28648,11 @@
   happens. If the user clicks the &quot;Trust&quot; button, then the handler is
   remembered.&lt;/p&gt;
 
+  &lt;!-- XXXURL use url --&gt;
   &lt;p&gt;When the user then attempts to fetch a URI that uses the
   &quot;x-meow:&quot; scheme, then it might display a dialog as follows:&lt;/p&gt;
 
+  &lt;!-- XXXURL use url? --&gt;
   &lt;pre&gt;||[ Unknown Protocol ]||||||||||||||||||||||||||||||||||||||||
 |                                                            |
 | You have attempted to access:                              |
@@ -28632,6 +28690,7 @@
   of unknown protocols.&lt;/p&gt;
 
 
+&lt;!-- XXXURL XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX --&gt;
 
 
   &lt;h3 id=&quot;offline&quot;&gt;Offline Web applications&lt;/h3&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008683.html">[html5] r1785 - /
</A></li>
	<LI>Next message: <A HREF="008685.html">[html5] r1787 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8684">[ date ]</a>
              <a href="thread.html#8684">[ thread ]</a>
              <a href="subject.html#8684">[ subject ]</a>
              <a href="author.html#8684">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
