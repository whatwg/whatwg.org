<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1643 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1643%20-%20/&In-Reply-To=%3C20080521003042.3064A1431E9%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008541.html">
   <LINK REL="Next"  HREF="008543.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1643 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1643%20-%20/&In-Reply-To=%3C20080521003042.3064A1431E9%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1643 - /">whatwg at whatwg.org
       </A><BR>
    <I>Tue May 20 17:30:42 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008541.html">[html5] r1642 - /
</A></li>
        <LI>Next message: <A HREF="008543.html">[html5] r1644 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8542">[ date ]</a>
              <a href="thread.html#8542">[ thread ]</a>
              <a href="subject.html#8542">[ subject ]</a>
              <a href="author.html#8542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-05-20 17:30:41 -0700 (Tue, 20 May 2008)
New Revision: 1643

Modified:
   index
   source
Log:
[acgiow] (2) * Add &lt;iframe sandbox&gt;, which supports:
   - isolating frames in their own unique origin,
   - disabling plugins
   - disabling forms
   - disabling scripts
   - disabling navigating of other browsing contexts
   - disabling popups and modal dialogs
* Make the spec well-defined in the face of browsers that disable scripting on a per-browsing-context basis, and use this for the concept of sandboxing scripts.
* Abstract out the concept of scripting being disabled, so that we don't have to refer to designMode all over the place.
* Add a note that &lt;noscript&gt; fails pretty badly with designMode. Add and update some XXX notes in various places.
* Require that Henri do the impossible by checking that scripts never cause non-conforming states to occur.
* Require that sets of space-separated tokens with lists of allowed values not use values outside of the allowed values.

Modified: index
===================================================================
--- index	2008-05-20 00:48:51 UTC (rev 1642)
+++ index	2008-05-21 00:30:41 UTC (rev 1643)
@@ -25,7 +25,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft&gt;Draft Recommendation &mdash; 20 May
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft&gt;Draft Recommendation &mdash; 21 May
     2008&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
@@ -1677,6 +1677,9 @@
 
          &lt;li&gt;&lt;a href=&quot;#the-element&quot;&gt;&lt;span class=secno&gt;8.2.3.4. &lt;/span&gt;The
           element pointers&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#the-scripting&quot;&gt;&lt;span class=secno&gt;8.2.3.5. &lt;/span&gt;The
+          scripting state&lt;/a&gt;
         &lt;/ul&gt;
 
        &lt;li&gt;&lt;a href=&quot;#tokenisation&quot;&gt;&lt;span class=secno&gt;8.2.4
@@ -2069,12 +2072,11 @@
 
    &lt;dd&gt;
     &lt;p&gt;Implementations that do not support scripting (or which have their
-     scripting features &lt;a href=&quot;#scripting1&quot; title=&quot;scripting is
-     disabled&quot;&gt;disabled&lt;/a&gt;) are exempt from supporting the events and DOM
-     interfaces mentioned in this specification. For the parts of this
-     specification that are defined in terms of an events model or in terms
-     of the DOM, such user agents must still act as if events and the DOM
-     were supported.&lt;/p&gt;
+     scripting features disabled entirely) are exempt from supporting the
+     events and DOM interfaces mentioned in this specification. For the parts
+     of this specification that are defined in terms of an events model or in
+     terms of the DOM, such user agents must still act as if events and the
+     DOM were supported.&lt;/p&gt;
 
     &lt;p class=note&gt;Scripting can form an integral part of an application. Web
      browsers that do not support scripting, or that have scripting disabled,
@@ -2094,19 +2096,21 @@
      material).&lt;/p&gt;
 
     &lt;p&gt;Conformance checkers must check that the input document conforms when
-     &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, and should also check
-     that the input document conforms when &lt;a href=&quot;#scripting2&quot;&gt;scripting is
-     enabled&lt;/a&gt;. (This is only a &quot;SHOULD&quot; and not a &quot;MUST&quot; requirement
-     because it has been proven to be impossible. &lt;a
-     href=&quot;#refsHALTINGPROBLEM&quot;&gt;[HALTINGPROBLEM]&lt;/a&gt;)&lt;/p&gt;
+     parsed without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; (meaning that
+     no scripts are run, and that the parser's &lt;a
+     href=&quot;#scripting2&quot;&gt;scripting flag&lt;/a&gt; is disabled), and should also
+     check that the input document conforms when parsed with a &lt;a
+     href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; in which scripts execute, and
+     that the scripts never cause non-conforming states to occur. (This is
+     only a &quot;SHOULD&quot; and not a &quot;MUST&quot; requirement because it has been proven
+     to be impossible. &lt;a href=&quot;#refsHALTINGPROBLEM&quot;&gt;[HALTINGPROBLEM]&lt;/a&gt;)&lt;/p&gt;
     &lt;!-- XXX
     [Computable] On computable numbers, with an application to the
     Entscheidungsproblem. Alan M. Turing. In Proceedings of the London
     Mathematical Society, series 2, volume 42, pages 230-265. London
     Mathematical Society,
     1937. <A HREF="http://www.turingarchive.org/browse.php/B/12">http://www.turingarchive.org/browse.php/B/12</A> (referenced:
-    2007-03-03)
-    --&gt;
+    2007-03-03) --&gt;
     
     &lt;p&gt;The term &quot;HTML5 validator&quot; can be used to refer to a conformance
      checker that itself conforms to the applicable requirements of this
@@ -5909,6 +5913,12 @@
    a &lt;a href=&quot;#set-of&quot;&gt;set of space-separated tokens&lt;/a&gt; where none of the
    words are duplicated but where the order of the tokens is meaningful.
 
+  &lt;p&gt;&lt;a href=&quot;#set-of&quot; title=&quot;set of space-separated tokens&quot;&gt;Sets of
+   space-separated tokens&lt;/a&gt; sometimes have a defined set of allowed values.
+   When a set of allowed values is defined, the tokens must all be from that
+   list of allowed values; other values are non-conforming. If no such set of
+   allowed values is provided, then all values are conforming.
+
   &lt;p&gt;When a user agent has to &lt;dfn id=split&gt;split a string on spaces&lt;/dfn&gt;,
    it must use the following algorithm:
 
@@ -14135,6 +14145,8 @@
 
    &lt;dd&gt;&lt;code title=attr-iframe-name&gt;&lt;a href=&quot;#name1&quot;&gt;name&lt;/a&gt;&lt;/code&gt;
 
+   &lt;dd&gt;&lt;code title=attr-iframe-sandbox&gt;&lt;a href=&quot;#sandbox&quot;&gt;sandbox&lt;/a&gt;&lt;/code&gt;
+
    &lt;dd&gt;&lt;code title=attr-iframe-seamless&gt;&lt;a
     href=&quot;#seamless&quot;&gt;seamless&lt;/a&gt;&lt;/code&gt;
 
@@ -14145,6 +14157,7 @@
      class=idl&gt;interface &lt;dfn id=htmliframeelement&gt;HTMLIFrameElement&lt;/dfn&gt; : &lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt; {
            attribute DOMString &lt;a href=&quot;#src2&quot; title=dom-iframe-src&gt;src&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#name2&quot; title=dom-iframe-name&gt;name&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#sandbox0&quot; title=dom-iframe-sandbox&gt;sandbox&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#seamless1&quot; title=dom-iframe-seamless&gt;seamless&lt;/a&gt;;&lt;!--
   readonly attribute Document &lt;span title=&quot;dom-iframe-contentDocument&quot;&gt;contentDocument&lt;/span&gt;;
   readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-iframe-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;--&gt;
@@ -14224,6 +14237,110 @@
    href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt;, that will further &lt;a
    href=&quot;#delays&quot;&gt;delay the &lt;code title=event-load&gt;load&lt;/code&gt; event&lt;/a&gt;.
 
+  &lt;p&gt;The &lt;dfn id=sandbox title=attr-iframe-sandbox&gt;&lt;code&gt;sandbox&lt;/code&gt;&lt;/dfn&gt;
+   attribute, when specified, enables a set of extra restrictions on any
+   content hosted by the &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;. Its value
+   must be an &lt;a href=&quot;#unordered&quot;&gt;unordered set of unique space-separated
+   tokens&lt;/a&gt;. The allowed values are &lt;code
+   title=attr-iframe-sandbox-xxx_origin_please_suggest_a_better_name&gt;&lt;a
+   href=&quot;#xxxoriginpleasesuggestabettername&quot;&gt;xxx_origin_please_suggest_a_better_name&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=attr-iframe-sandbox-unrestricted-forms&gt;&lt;a
+   href=&quot;#unrestricted-forms&quot;&gt;unrestricted-forms&lt;/a&gt;&lt;/code&gt;, and &lt;code
+   title=attr-iframe-sandbox-unrestricted-scripts&gt;&lt;a
+   href=&quot;#unrestricted-scripts&quot;&gt;unrestricted-scripts&lt;/a&gt;&lt;/code&gt;.
+
+  &lt;p&gt;While the &lt;code title=attr-iframe-sandbox&gt;&lt;a
+   href=&quot;#sandbox&quot;&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute is specified, the &lt;code&gt;&lt;a
+   href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; element's &lt;a href=&quot;#nested0&quot;&gt;nested
+   browsing context&lt;/a&gt;, and all the browsing contexts &lt;a href=&quot;#nested0&quot;
+   title=&quot;nested browsing context&quot;&gt;nested&lt;/a&gt; within it (either directly or
+   indirectly through other nested browsing contexts) must have the following
+   flags set:
+
+  &lt;dl&gt;
+   &lt;dt&gt;The &lt;dfn id=sandboxed&gt;sandboxed navigation browsing context&lt;/dfn&gt; flag
+
+   &lt;dd&gt;
+    &lt;p&gt;This flag &lt;a href=&quot;#sandboxLinks&quot;&gt;prevents content from navigating
+     browsing contexts other than the sandboxed browsing context itself&lt;/a&gt;
+     (or browsing contexts further nested inside it).&lt;/p&gt;
+
+    &lt;p&gt;This flag also &lt;a href=&quot;#sandboxWindowOpen&quot;&gt;prevents content from
+     creating new auxiliary browsing contexts&lt;/a&gt;, e.g. using the &lt;code
+     title=attr-hyperlink-target&gt;&lt;a href=&quot;#target3&quot;&gt;target&lt;/a&gt;&lt;/code&gt;
+     attribute or the &lt;code title=dom-window-open&gt;window.open()&lt;/code&gt;
+     method.&lt;/p&gt;
+
+   &lt;dt&gt;The &lt;dfn id=sandboxed0&gt;sandboxed plugins browsing context&lt;/dfn&gt; flag
+
+   &lt;dd&gt;
+    &lt;p&gt;This flag prevents content from instantiating third-party handlers
+     (i.e. plugins), whether using &lt;a href=&quot;#sandboxPluginEmbed&quot;&gt;the
+     &lt;code&gt;embed&lt;/code&gt; element&lt;/a&gt;, &lt;a href=&quot;#sandboxPluginObject&quot;&gt;the
+     &lt;code&gt;object&lt;/code&gt; element&lt;/a&gt;, &lt;a href=&quot;#sandboxPluginApplet&quot;&gt;the
+     &lt;code&gt;applet&lt;/code&gt; element&lt;/a&gt;, or &lt;a
+     href=&quot;#sandboxPluginNavigate&quot;&gt;through navigation&lt;/a&gt; of a &lt;a
+     href=&quot;#nested0&quot;&gt;nested browsing context&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;dt&gt;The &lt;dfn id=sandboxed1&gt;sandboxed origin browsing context&lt;/dfn&gt; flag,
+    unless the &lt;code title=attr-iframe-sandbox&gt;&lt;a
+    href=&quot;#sandbox&quot;&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute's value, when &lt;a
+    href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split on spaces&lt;/a&gt;, is
+    found to have the &lt;dfn id=xxxoriginpleasesuggestabettername
+    title=attr-iframe-sandbox-xxx_origin_please_suggest_a_better_name&gt;&lt;code&gt;xxx_origin_please_suggest_a_better_name&lt;/code&gt;&lt;/dfn&gt;
+    keyword set
+
+   &lt;dd&gt;
+    &lt;p&gt;This flag &lt;a href=&quot;#sandboxOrigin&quot;&gt;forces content into a unique
+     origin&lt;/a&gt; for the purposes of the &lt;a href=&quot;#origin0&quot;
+     title=origin&gt;same-origin policy&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;div class=note&gt;
+     &lt;p&gt;The &lt;code
+      title=attr-iframe-sandbox-xxx_origin_please_suggest_a_better_name&gt;&lt;a
+      href=&quot;#xxxoriginpleasesuggestabettername&quot;&gt;xxx_origin_please_suggest_a_better_name&lt;/a&gt;&lt;/code&gt;
+      attribute is intended for two cases.&lt;/p&gt;
+
+     &lt;p&gt;First, it can be used to allow content from the same site to be
+      sandboxed to disable scripting, while still allowing access to the DOM
+      of the sandboxed content.&lt;/p&gt;
+
+     &lt;p&gt;Second, it can be used to embed content from a third-party site,
+      sandboxed to prevent that site from opening popup windows, etc, without
+      preventing the embedded page from communicating back to its originating
+      site, using the database APIs to store data, etc.&lt;/p&gt;
+    &lt;/div&gt;
+
+    &lt;p class=big-issue&gt;Please don't implement this keyword using the name
+     &quot;xxx_origin_please_suggest_a_better_name&quot; -- please suggest a better
+     name first!&lt;/p&gt;
+
+   &lt;dt&gt;The &lt;dfn id=sandboxed2&gt;sandboxed forms browsing context&lt;/dfn&gt; flag,
+    unless the &lt;code title=attr-iframe-sandbox&gt;&lt;a
+    href=&quot;#sandbox&quot;&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute's value, when &lt;a
+    href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split on spaces&lt;/a&gt;, is
+    found to have the &lt;dfn id=unrestricted-forms
+    title=attr-iframe-sandbox-unrestricted-forms&gt;&lt;code&gt;unrestricted-forms&lt;/code&gt;&lt;/dfn&gt;
+    keyword set
+
+   &lt;dd&gt;
+    &lt;p&gt;This flag &lt;a href=&quot;#sandboxSubmitBlocked&quot;&gt;blocks form submission&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;dt&gt;The &lt;dfn id=sandboxed3&gt;sandboxed scripts browsing context&lt;/dfn&gt; flag,
+    unless the &lt;code title=attr-iframe-sandbox&gt;&lt;a
+    href=&quot;#sandbox&quot;&gt;sandbox&lt;/a&gt;&lt;/code&gt; attribute's value, when &lt;a
+    href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split on spaces&lt;/a&gt;, is
+    found to have the &lt;dfn id=unrestricted-scripts
+    title=attr-iframe-sandbox-unrestricted-scripts&gt;&lt;code&gt;unrestricted-scripts&lt;/code&gt;&lt;/dfn&gt;
+    keyword set
+
+   &lt;dd&gt;
+    &lt;p&gt;This flag &lt;a href=&quot;#sandboxScriptBlocked&quot;&gt;blocks script execution&lt;/a&gt;.&lt;/p&gt;
+  &lt;/dl&gt;
+
+  &lt;p&gt;These flags must not be set unless the conditions listed above define
+   them as being set.
+
   &lt;p&gt;The &lt;dfn id=seamless
    title=attr-iframe-seamless&gt;&lt;code&gt;seamless&lt;/code&gt;&lt;/dfn&gt; attribute is a
    boolean attribute. When specified, it indicates that the &lt;code&gt;&lt;a
@@ -14352,7 +14469,8 @@
 
   &lt;p&gt;The DOM attributes &lt;dfn id=src2
    title=dom-iframe-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=name2
-   title=dom-iframe-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=seamless1
+   title=dom-iframe-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=sandbox0
+   title=dom-iframe-sandbox&gt;&lt;code&gt;sandbox&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=seamless1
    title=dom-iframe-seamless&gt;&lt;code&gt;seamless&lt;/code&gt;&lt;/dfn&gt; must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attributes of the same name.
 
@@ -14410,8 +14528,29 @@
 
   &lt;p&gt;If the &lt;code title=attr-embed-src&gt;&lt;a href=&quot;#src3&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
    attribute is missing, then the &lt;code&gt;&lt;a href=&quot;#embed&quot;&gt;embed&lt;/a&gt;&lt;/code&gt;
-   element must be ignored.
+   element must be ignored (it represents nothing).
 
+  &lt;p id=sandboxPluginEmbed&gt;If the &lt;a href=&quot;#sandboxed0&quot;&gt;sandboxed plugins
+   browsing context&lt;/a&gt; flag is set on the &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   context&lt;/a&gt; for which the &lt;code&gt;&lt;a href=&quot;#embed&quot;&gt;embed&lt;/a&gt;&lt;/code&gt;
+   element's document is the &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt;, then the
+   user agent must render the &lt;code&gt;&lt;a href=&quot;#embed&quot;&gt;embed&lt;/a&gt;&lt;/code&gt; element
+   in a manner that conveys that the plugin was disabled. The user agent may
+   offer the user the option to override the sandbox and instantiate the
+   handler anyway; if the user invokes such an option, the user agent must
+   act as if the &lt;a href=&quot;#sandboxed0&quot;&gt;sandboxed plugins browsing context&lt;/a&gt;
+   flag was not set for the purposes of this element.
+
+  &lt;p class=warning&gt;Plugins are disabled in sandboxed browsing contexts
+   because they might not honour the restrictions imposed by the sandbox
+   (e.g. they might allow scripting even when scripting in the sandbox is
+   disabled). User agents should convey the danger of overriding the sandbox
+   to the user if an option to do so is provided.
+
+  &lt;p&gt;Otherwise, the &lt;code title=attr-embed-src&gt;&lt;a href=&quot;#src3&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
+   attribute is present, and the element is not in a sandboxed browsing
+   context:
+
   &lt;p&gt;When the &lt;code title=attr-embed-src&gt;&lt;a href=&quot;#src3&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
    attribute is set, user agents are expected to find an appropriate handler
    for the specified resource, based on the &lt;a href=&quot;#type-of&quot;
@@ -14463,8 +14602,8 @@
     handler for it.
   &lt;/ol&gt;
 
-  &lt;p class=big-issue&gt;Should we instead say that the content-sniffing that
-   we're going to define for top-level browsing contexts should apply here?
+  &lt;p class=big-issue&gt;Should we instead say that the content-sniffing used for
+   top-level browsing contexts should apply here?
 
   &lt;p class=big-issue&gt;Should we require the type attribute to match the server
    information?
@@ -14582,12 +14721,13 @@
     &lt;p&gt;If the &lt;code title=attr-object-classid&gt;classid&lt;/code&gt; attribute is
      present, and has a value that isn't the empty string, then: if the user
      agent can find a handler suitable according to the value of the &lt;code
-     title=attr-object-classid&gt;classid&lt;/code&gt; attribute, then that handler &lt;a
-     href=&quot;#object-plugin&quot;&gt;should be used&lt;/a&gt;, and the value of the &lt;code
-     title=attr-object-data&gt;&lt;a href=&quot;#data&quot;&gt;data&lt;/a&gt;&lt;/code&gt; attribute, if
-     any, should be passed to the handler. If no suitable handler can be
-     found, or if the handler reports an error, jump to the last step in the
-     overall set of steps (fallback).&lt;/p&gt;
+     title=attr-object-classid&gt;classid&lt;/code&gt; attribute, and &lt;a
+     href=&quot;#sandboxPluginObject&quot;&gt;handlers aren't being sandboxed&lt;/a&gt;, then
+     that handler &lt;a href=&quot;#object-plugin&quot;&gt;should be used&lt;/a&gt;, and the value
+     of the &lt;code title=attr-object-data&gt;&lt;a href=&quot;#data&quot;&gt;data&lt;/a&gt;&lt;/code&gt;
+     attribute, if any, should be passed to the handler. If no suitable
+     handler can be found, or if the handler reports an error, jump to the
+     last step in the overall set of steps (fallback).&lt;/p&gt;
     &lt;!--
      case insensitive:
       is &quot;clsid:d27cdb6e-ae6d-11cf-96b8-444553540000&quot; -&gt; application/x-shockwave-flash
@@ -14672,7 +14812,8 @@
 
       &lt;dl class=switch&gt;
        &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; can be handled by a
-        special handler (e.g. a plugin)
+        special handler (e.g. a plugin), and &lt;a
+        href=&quot;#sandboxPluginObject&quot;&gt;handlers aren't being sandboxed&lt;/a&gt;
 
        &lt;dd&gt;
         &lt;p&gt;The user agent &lt;a href=&quot;#object-plugin&quot;&gt;should use that
@@ -14750,12 +14891,13 @@
    &lt;li&gt;
     &lt;p&gt;If the &lt;code title=attr-object-data&gt;&lt;a href=&quot;#data&quot;&gt;data&lt;/a&gt;&lt;/code&gt;
      attribute is absent but the &lt;code title=attr-object-type&gt;&lt;a
-     href=&quot;#type6&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute is present, and if the user
-     agent can find a handler suitable according to the value of the &lt;code
-     title=attr-object-type&gt;&lt;a href=&quot;#type6&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute, then
-     that handler &lt;a href=&quot;#object-plugin&quot;&gt;should be used&lt;/a&gt;. If no suitable
-     handler can be found, or if the handler reports an error, jump to the
-     next step (fallback).
+     href=&quot;#type6&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute is present, &lt;a
+     href=&quot;#sandboxPluginObject&quot;&gt;handlers aren't being sandboxed&lt;/a&gt;, and the
+     user agent can find a handler suitable according to the value of the
+     &lt;code title=attr-object-type&gt;&lt;a href=&quot;#type6&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute,
+     then that handler &lt;a href=&quot;#object-plugin&quot;&gt;should be used&lt;/a&gt;. If no
+     suitable handler can be found, or if the handler reports an error, jump
+     to the next step (fallback).
 
    &lt;li&gt;
     &lt;p&gt;(Fallback.) The &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element
@@ -14772,7 +14914,14 @@
    handler supports a scriptable interface, the &lt;code&gt;&lt;a
    href=&quot;#htmlobjectelement&quot;&gt;HTMLObjectElement&lt;/a&gt;&lt;/code&gt; object representing
    the element should expose that interface. The handler is not a nested &lt;a
-   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;.
+
+  &lt;p id=sandboxPluginObject&gt;If the &lt;a href=&quot;#sandboxed0&quot;&gt;sandboxed plugins
+   browsing context&lt;/a&gt; flag is set on the &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   context&lt;/a&gt; for which the &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt;
+   element's document is the &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt;, then the
+   steps above must always act as if they had failed to find a handler, even
+   if one would otherwise have been used.&lt;/p&gt;
   &lt;!-- duplicates what's in &lt;embed&gt; section above --&gt;
 
   &lt;p class=note&gt;The &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element can, in
@@ -17205,13 +17354,14 @@
   &lt;p&gt;The &lt;dfn id=controls
    title=attr-media-controls&gt;&lt;code&gt;controls&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;a
    href=&quot;#boolean0&quot;&gt;boolean attribute&lt;/a&gt;. If the attribute is present, or if
-   &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, then the user agent
-   should &lt;dfn id=expose&gt;expose a user interface to the user&lt;/dfn&gt;. This user
-   interface should include features to begin playback, pause playback, seek
-   to an arbitrary position in the content (if the content supports arbitrary
-   seeking), change the volume, and show the media content in manners more
-   suitable to the user (e.g. full-screen video or in an independent
-   resizable window). Other controls may also be made available.
+   the &lt;a href=&quot;#media7&quot;&gt;media element&lt;/a&gt; is &lt;a href=&quot;#without&quot;&gt;without
+   script&lt;/a&gt;, then the user agent should &lt;dfn id=expose&gt;expose a user
+   interface to the user&lt;/dfn&gt;. This user interface should include features
+   to begin playback, pause playback, seek to an arbitrary position in the
+   content (if the content supports arbitrary seeking), change the volume,
+   and show the media content in manners more suitable to the user (e.g.
+   full-screen video or in an independent resizable window). Other controls
+   may also be made available.
 
   &lt;p&gt;If the attribute is absent, then the user agent should avoid making a
    user interface available that could conflict with an author-provided user
@@ -17778,22 +17928,25 @@
    href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element, if any, are the element's &lt;a
    href=&quot;#fallback&quot;&gt;fallback content&lt;/a&gt;.
 
-  &lt;p&gt;In interactive visual media with &lt;span&gt;scripting enabled&lt;/span&gt;, the
-   canvas element is an embedded element with a dynamically created image.
+  &lt;p&gt;In interactive visual media, if the &lt;code&gt;&lt;a
+   href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element is &lt;a href=&quot;#with-script&quot;&gt;with
+   script&lt;/a&gt;, the &lt;code&gt;&lt;a href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element
+   represents an embedded element with a dynamically created image.
 
   &lt;p&gt;In non-interactive, static, visual media, if the &lt;code&gt;&lt;a
    href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element has been previously painted on
    (e.g. if the page was viewed in an interactive visual medium and is now
    being printed, or if some script that ran during the page layout process
    painted on the element), then the &lt;code&gt;&lt;a
-   href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element must be treated as &lt;a
+   href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element represents &lt;a
    href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt; with the current image and size.
-   Otherwise, the element's &lt;a href=&quot;#fallback&quot;&gt;fallback content&lt;/a&gt; must be
-   used instead.
+   Otherwise, the element represents its &lt;a href=&quot;#fallback&quot;&gt;fallback
+   content&lt;/a&gt; instead.
 
-  &lt;p&gt;In non-visual media, and in visual media with &lt;span&gt;scripting
-   disabled&lt;/span&gt;, the &lt;code&gt;&lt;a href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element's
-   &lt;a href=&quot;#fallback&quot;&gt;fallback content&lt;/a&gt; must be used instead.
+  &lt;p&gt;In non-visual media, and in visual media if the &lt;code&gt;&lt;a
+   href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element is &lt;a href=&quot;#without&quot;&gt;without
+   script&lt;/a&gt;, the &lt;code&gt;&lt;a href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element
+   represents its &lt;a href=&quot;#fallback&quot;&gt;fallback content&lt;/a&gt; instead.
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; element has two attributes
    to control the size of the coordinate space: &lt;dfn id=width0
@@ -22851,6 +23004,10 @@
    href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#form-submission">http://www.whatwg.org/specs/web-forms/current-work/#form-submission</A>&quot;&gt;WF2&lt;/a&gt;
    for now
 
+  &lt;p class=big-issue id=sandboxSubmitBlocked&gt;If a form is in a browsing
+   context whose &lt;a href=&quot;#sandboxed2&quot;&gt;sandboxed forms browsing context&lt;/a&gt;
+   is set, it must not be submitted.
+
   &lt;h3 id=scripting0&gt;&lt;span class=secno&gt;3.15 &lt;/span&gt;Scripting&lt;/h3&gt;
 
   &lt;p&gt;Scripts allow authors to add interactivity to their documents.
@@ -23075,15 +23232,14 @@
      encoding&quot;&gt;the encoding of the document itself&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt;
-    &lt;p&gt;If &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, or if the
-     &lt;code&gt;Document&lt;/code&gt; has &lt;code title=dom-document-designMode&gt;&lt;a
-     href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled, or if the &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element is &lt;a
+     href=&quot;#without&quot;&gt;without script&lt;/a&gt;, or if the &lt;code&gt;&lt;a
      href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element was created by an &lt;span&gt;XML
      parser&lt;/span&gt; that itself was created as part of the processing of the
      &lt;code title=dom-innerHTML-XML&gt;&lt;a href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
-     attribute's
-     setter&lt;!-- no need to worry about the innerHTML-HTML case, as the
-    HTML parser handles that for us--&gt;,
+     attribute's setter&lt;!--
+    no need to worry about the innerHTML-HTML case, as the HTML parser
+    handles that for us--&gt;,
      or if the user agent does not &lt;a href=&quot;#support&quot;&gt;support the scripting
      language&lt;/a&gt; given by &lt;var&gt;&lt;a href=&quot;#the-scripts&quot;&gt;the script's
      type&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
@@ -23279,10 +23435,7 @@
    &lt;dd&gt;
     &lt;ol&gt;
      &lt;li&gt;
-      &lt;p&gt;If &lt;a href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;, and the
-       &lt;code&gt;Document&lt;/code&gt; does not have &lt;code
-       title=dom-document-designMode&gt;&lt;a
-       href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled, and the
+      &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element's
        &lt;code&gt;Document&lt;/code&gt; is the &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt; in
        its &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the user agent must
        execute the script:&lt;/p&gt;
@@ -23323,7 +23476,7 @@
 
       &lt;p&gt;Scripts must be executed in the scope of the &lt;a
        href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the element's
-       &lt;code&gt;Document&lt;/code&gt;. That &lt;a href=&quot;#script2&quot;&gt;script execution
+       &lt;code&gt;Document&lt;/code&gt;. The &lt;a href=&quot;#script2&quot;&gt;script execution
        browsing context&lt;/a&gt; is that browsing context.&lt;/p&gt;
 
       &lt;p class=note&gt;The element's attributes' values might have changed
@@ -23413,19 +23566,19 @@
 
    &lt;dt&gt;Content model:
 
-   &lt;dd&gt;When &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, in a &lt;code&gt;&lt;a
+   &lt;dd&gt;&lt;a href=&quot;#without&quot;&gt;Without script&lt;/a&gt;, in a &lt;code&gt;&lt;a
     href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element: in any order, zero or more &lt;code&gt;&lt;a
     href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt; elements, zero or more &lt;code&gt;&lt;a
     href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt; elements, and zero or more &lt;code&gt;&lt;a
     href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; elements.
 
-   &lt;dd&gt;When &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, not in a
-    &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element: &lt;a
+   &lt;dd&gt;&lt;a href=&quot;#without&quot;&gt;Without script&lt;/a&gt;, not in a &lt;code&gt;&lt;a
+    href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element: &lt;a
     href=&quot;#transparent0&quot;&gt;transparent&lt;/a&gt;, but there must be no &lt;code&gt;&lt;a
     href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element descendants.
 
-   &lt;dd&gt;When &lt;a href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;: text that
-    conforms to the requirements given in the prose.
+   &lt;dd&gt;&lt;a href=&quot;#with-script&quot;&gt;With script&lt;/a&gt;: text that conforms to the
+    requirements given in the prose.
 
    &lt;dt&gt;Element-specific attributes:
 
@@ -23451,16 +23604,16 @@
    title=&quot;&quot;&gt;XML serialisation&lt;/span&gt;&lt;!-- XXX xref --&gt;.&lt;/strong&gt;
 
   &lt;p&gt;When used in &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;, the allowed content
-   model depends on whether scripting is enabled or not, and whether the
-   element is in a &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element or not.
+   model is as follows:
 
-  &lt;p&gt;In a &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element, if &lt;a
-   href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, then the content model of a
-   &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element must contain only
-   &lt;code&gt;&lt;a href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
-   href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a
-   href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; elements. If &lt;a href=&quot;#scripting2&quot;&gt;scripting
-   is enabled&lt;/a&gt;, then the content model of a &lt;code&gt;&lt;a
+  &lt;p&gt;In a &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element, if the &lt;code&gt;&lt;a
+   href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is &lt;a href=&quot;#without&quot;&gt;without
+   script&lt;/a&gt;, then the content model of a &lt;code&gt;&lt;a
+   href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element must contain only &lt;code&gt;&lt;a
+   href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;,
+   and &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; elements. If the &lt;code&gt;&lt;a
+   href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is &lt;a
+   href=&quot;#with-script&quot;&gt;with script&lt;/a&gt;, then the content model of a &lt;code&gt;&lt;a
    href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is text, except that invoking
    the &lt;a href=&quot;#html-fragment0&quot;&gt;HTML fragment parsing algorithm&lt;/a&gt; with the
    &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element as the &lt;var
@@ -23470,22 +23623,24 @@
    href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a
    href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; elements.
 
-  &lt;p&gt;Outside of &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; elements, if &lt;a
-   href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, then the content model of a
+  &lt;p&gt;Outside of &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; elements, if the
    &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is &lt;a
+   href=&quot;#without&quot;&gt;without script&lt;/a&gt;, then the content model of a &lt;code&gt;&lt;a
+   href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is &lt;a
    href=&quot;#transparent0&quot;&gt;transparent&lt;/a&gt;, with the additional restriction that
    a &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element must not have a
    &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element as an ancestor (that
    is, &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; can't be nested).
 
-  &lt;p&gt;Outside of &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; elements, if &lt;a
-   href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;, then the content model of a
-   &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is text, except that
-   the text must be such that running the following algorithm results in a
-   conforming document with no &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt;
-   elements and no &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements, and
-   such that no step in the algorithm causes an &lt;a href=&quot;#html-0&quot;&gt;HTML
-   parser&lt;/a&gt; to flag a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;:
+  &lt;p&gt;Outside of &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; elements, if the
+   &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is &lt;a
+   href=&quot;#with-script&quot;&gt;with script&lt;/a&gt;, then the content model of a &lt;code&gt;&lt;a
+   href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is text, except that the text
+   must be such that running the following algorithm results in a conforming
+   document with no &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; elements
+   and no &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements, and such that
+   no step in the algorithm causes an &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; to
+   flag a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;:
 
   &lt;ol&gt;
    &lt;li&gt;Remove every &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element from
@@ -23532,15 +23687,24 @@
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element has no other
    requirements. In particular, children of the &lt;code&gt;&lt;a
    href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element are not exempt from form
-   submission, scripting, and so forth, even when scripting is enabled.
+   submission, scripting, and so forth, even when the element is &lt;a
+   href=&quot;#with-script&quot;&gt;with script&lt;/a&gt;.
 
   &lt;p class=note&gt;All these contortions are required because, for historical
-   reasons, the &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element causes
-   the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; to act differently based on whether
-   scripting is enabled or not. The element is not allowed in XML, because in
-   XML the parser is not affected by such state, and thus the element would
-   not have the desired effect.
+   reasons, the &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is
+   handled differently by the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; based on
+   whether &lt;a href=&quot;#scripting2&quot; title=&quot;scripting flag&quot;&gt;scripting was enabled
+   or not&lt;/a&gt; when the parser was invoked. The element is not allowed in XML,
+   because in XML the parser is not affected by such state, and thus the
+   element would not have the desired effect.
 
+  &lt;p class=note&gt;The &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element
+   interacts poorly with the &lt;code title=dom-document-designMode&gt;&lt;a
+   href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; feature. Authors are encouraged
+   to not use &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; elements on pages
+   that will have &lt;code title=dom-document-designMode&gt;&lt;a
+   href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled.
+
   &lt;h4 id=the-event-source&gt;&lt;span class=secno&gt;3.15.3 &lt;/span&gt;The &lt;dfn
    id=event-source&gt;&lt;code&gt;event-source&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
@@ -27116,10 +27280,8 @@
    href=&quot;#template&quot;&gt;template&lt;/a&gt;&lt;/code&gt; attribute set, the user agent must
    fetch the specified file&lt;!-- XXX or queue it up to be fetched,
   or something --&gt;
-   and parse it (without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, and
-   with &lt;span&gt;scripting disabled&lt;/span&gt;&lt;!-- XXX
-  xref --&gt;) to obtain a DOM.
-   If the URI is the same as the URI of the current
+   and parse it (without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;) to
+   obtain a DOM. If the URI is the same as the URI of the current
    document&lt;!-- XXX xref --&gt;, then the current document's DOM must be assumed
    to be that parsed DOM. While this loading and parsing is in progress, the
    element is said to be &lt;em&gt;busy loading the template rules or data&lt;/em&gt;.
@@ -27242,13 +27404,11 @@
    title=attr-ref&gt;&lt;a href=&quot;#ref&quot;&gt;ref&lt;/a&gt;&lt;/code&gt; attribute set, the user agent
    must fetch the specified file&lt;!-- XXX or queue it up to be fetched, or
   something --&gt;
-   and parse it (without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, and
-   with &lt;span&gt;scripting disabled&lt;/span&gt;&lt;!-- XXX xref --&gt;) to obtain a DOM. If
-   the URI is the same as the URI of the current document&lt;!--
-  XXX xref --&gt;,
-   then the current document's DOM is assumed to be that parsed DOM. While
-   this loading and parsing is in progress, the element is said to be
-   &lt;em&gt;busy loading the template rules or data&lt;/em&gt;.
+   and parse it (without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;) to
+   obtain a DOM. If the URI is the same as the URI of the current
+   document&lt;!-- XXX xref --&gt;, then the current document's DOM is assumed to
+   be that parsed DOM. While this loading and parsing is in progress, the
+   element is said to be &lt;em&gt;busy loading the template rules or data&lt;/em&gt;.
 
   &lt;p&gt;If the resource specified by the &lt;code title=attr-ref&gt;&lt;a
    href=&quot;#ref&quot;&gt;ref&lt;/a&gt;&lt;/code&gt; attribute is not the current
@@ -28128,6 +28288,18 @@
      depends on the user agent's configuration and/or abilities:&lt;/p&gt;
 
     &lt;dl&gt;
+     &lt;dt id=sandboxWindowOpen&gt;If the current browsing context has the &lt;a
+      href=&quot;#sandboxed&quot;&gt;sandboxed navigation browsing context&lt;/a&gt; flag set.
+
+     &lt;dd&gt;The user agent may offer to create a new &lt;a
+      href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt; or reuse an existing
+      &lt;a href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt;. If the user picks
+      one of those options, then the designated browsing context must be the
+      chosen one (the browsing context's name isn't set to the given browsing
+      context name). Otherwise (if the user agent doesn't offer the option to
+      the user, or if the user declines to allow a browsing context to be
+      used) there must not be a chosen browsing context.
+
      &lt;dt&gt;If the user agent has been configured such that in this instance it
       will create a new browsing context
 
@@ -28587,6 +28759,13 @@
 
    &lt;dd&gt;
     &lt;dl class=switch&gt;
+     &lt;dt id=sandboxOrigin&gt;If a &lt;code&gt;Document&lt;/code&gt; is in a &lt;a
+      href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; whose &lt;a
+      href=&quot;#sandboxed1&quot;&gt;sandboxed origin browsing context&lt;/a&gt; is set
+
+     &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is a globally unique identifier
+      assigned when the &lt;code&gt;Document&lt;/code&gt; is created.
+
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was returned by the
       &lt;code&gt;XMLHttpRequest&lt;/code&gt; API
 
@@ -28829,24 +29008,66 @@
     scripting features.
   &lt;/ul&gt;
 
-  &lt;p&gt;User agents may provide a mechanism to enable or disable the execution
-   of author-provided code. When the user agent is configured such that
-   author-provided code does not execute, or if the user agent is implemented
-   so as to never execute author-provided code, it is said that &lt;dfn
-   id=scripting1&gt;scripting is disabled&lt;/dfn&gt;. When author-provided code
-   &lt;em&gt;does&lt;/em&gt; execute, &lt;dfn id=scripting2&gt;scripting is enabled&lt;/dfn&gt;. A
-   user agent with scripting disabled is a &lt;a href=&quot;#non-scripted&quot;
-   title=&quot;User agents with no scripting support&quot;&gt;user agent with no scripting
-   support&lt;/a&gt; for the purposes of conformance.
-
   &lt;h4 id=script0&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Script execution contexts&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=script2&gt;script execution browsing context&lt;/dfn&gt; of a script
    is defined when that script is created. It is typically the &lt;a
    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object that is being used as the script's
-   dereference context..
+   dereference context.
 
+  &lt;p&gt;All &lt;a href=&quot;#browsing1&quot; title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;
+   are, by definition, potential &lt;a href=&quot;#script2&quot; title=&quot;script execution
+   browsing context&quot;&gt;script execution browsing contexts&lt;/a&gt;.
+
+  &lt;p&gt;It is said that &lt;dfn id=scripting1&gt;scripting is disabled&lt;/dfn&gt; in a &lt;a
+   href=&quot;#script2&quot;&gt;script execution browsing context&lt;/a&gt; when any of the
+   following conditions are true:
+
+  &lt;ul&gt;
+   &lt;li&gt;The user agent does not support scripting.
+
+   &lt;li&gt;The user has disabled scripting for this &lt;a href=&quot;#script2&quot;&gt;script
+    execution browsing context&lt;/a&gt;. (User agents may provide users with the
+    option to disable scripting globally, on a per-origin basis, or in other
+    ways down to the granularity of individual &lt;a href=&quot;#script2&quot;
+    title=&quot;script execution browsing context&quot;&gt;script execution browsing
+    contexts&lt;/a&gt;.)
+
+   &lt;li id=designModeScriptBlocked&gt;The &lt;a href=&quot;#script2&quot;&gt;script execution
+    browsing context&lt;/a&gt; is a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; whose
+    &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt; has &lt;code
+    title=dom-document-designMode&gt;&lt;a href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt;
+    enabled.
+
+   &lt;li id=sandboxScriptBlocked&gt;The &lt;a href=&quot;#script2&quot;&gt;script execution
+    browsing context&lt;/a&gt; is a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; whose
+    &lt;a href=&quot;#sandboxed3&quot;&gt;sandboxed scripts browsing context&lt;/a&gt; flag is set.
+  &lt;/ul&gt;
+
+  &lt;p&gt;A node is said to be &lt;dfn id=without&gt;without script&lt;/dfn&gt; if either the
+   &lt;code&gt;Document&lt;/code&gt; object of the node (the node itself, it is itself a
+   &lt;code&gt;Document&lt;/code&gt; object) does not have an associated &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, or &lt;a href=&quot;#scripting1&quot;&gt;scripting
+   is disabled&lt;/a&gt; in that &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;.
+
+  &lt;p&gt;A node is said to be &lt;dfn id=with-script&gt;with script&lt;/dfn&gt; if it is not
+   &lt;a href=&quot;#without&quot;&gt;without script&lt;/a&gt;.
+
+  &lt;p class=big-issue&gt;If you can find a better pair of terms than &quot;with
+   script&quot; and &quot;without script&quot; let me know. The only things I can find that
+   are less confusing are also way, way longer.
+
+  &lt;p&gt;When a script is to be executed in a &lt;a href=&quot;#script2&quot;&gt;script execution
+   browsing context&lt;/a&gt; in which &lt;a href=&quot;#scripting1&quot;&gt;scripting is
+   disabled&lt;/a&gt;, the script must do nothing and return nothing (a void return
+   value).
+
+  &lt;p class=note&gt;Thus, for instance, enabling &lt;code
+   title=dom-document-designMode&gt;&lt;a href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt;
+   will disable any event handler attributes, event listeners, timeouts, etc,
+   that were set by scripts in the document.
+
   &lt;h4 id=security4&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;Security exceptions&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;Define &lt;dfn id=security9&gt;security exception&lt;/dfn&gt;.
@@ -28886,11 +29107,7 @@
    no &lt;a href=&quot;#script2&quot;&gt;script execution browsing context&lt;/a&gt;.
 
   &lt;p&gt;URIs using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol should be
-   evaluated when the resource for that URI is needed, unless &lt;a
-   href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt; or the &lt;code&gt;Document&lt;/code&gt;
-   corresponding to the dereference context (as defined above), if any, has
-   &lt;code title=dom-document-designMode&gt;&lt;a
-   href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled.
+   evaluated when the resource for that URI is needed.
 
   &lt;p&gt;If the dereference by-product is void (there is no return value), then
    the URI must be treated in a manner equivalent to an HTTP resource with an
@@ -29318,27 +29535,22 @@
    returns true instead.&lt;/p&gt;
   &lt;!-- IE actually uncancels the event if the function returns true --&gt;
 
-  &lt;p&gt;When &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, event handler
-   attributes must do nothing.&lt;/p&gt;
-  &lt;!-- XXX arguments should use &lt;var&gt;, not &lt;code&gt;: --&gt;
-
-  &lt;p&gt;When &lt;a href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;, all event handler
-   attributes on an element, whether set to null or to a function, must be
-   registered as event listeners on the element, as if the &lt;code
-   title=dom-EventTarget-addEventListenerNS&gt;addEventListenerNS()&lt;/code&gt;
+  &lt;p&gt;All event handler attributes on an element, whether set to null or to a
+   function, must be registered as event listeners on the element, as if the
+   &lt;code title=dom-EventTarget-addEventListenerNS&gt;addEventListenerNS()&lt;/code&gt;
    method on the &lt;code&gt;Element&lt;/code&gt; object's &lt;code&gt;EventTarget&lt;/code&gt;
    interface had been invoked when the element was created, with the event
-   type (&lt;code title=dom-event-type&gt;type&lt;/code&gt; argument) equal to the type
+   type (&lt;var title=dom-event-type&gt;type&lt;/var&gt; argument) equal to the type
    described for the event handler attribute in the list above, the namespace
-   (&lt;code title=dom-event-namespaceURI&gt;namespaceURI&lt;/code&gt; argument) set to
-   null, the listener set to be a target and bubbling phase listener (&lt;code
-   title=dom-event-useCapture&gt;useCapture&lt;/code&gt; argument set to false), the
-   event group set to the default group (&lt;code
-   title=dom-event-evtGroup&gt;evtGroup&lt;/code&gt; argument set to null), and the
-   event listener itself (&lt;code title=dom-event-listener&gt;listener&lt;/code&gt;
+   (&lt;var title=dom-event-namespaceURI&gt;namespaceURI&lt;/var&gt; argument) set to
+   null, the listener set to be a target and bubbling phase listener (&lt;var
+   title=dom-event-useCapture&gt;useCapture&lt;/var&gt; argument set to false), the
+   event group set to the default group (&lt;var
+   title=dom-event-evtGroup&gt;evtGroup&lt;/var&gt; argument set to null), and the
+   event listener itself (&lt;var title=dom-event-listener&gt;listener&lt;/var&gt;
    argument) set to do nothing while the event handler attribute is null, and
    set to invoke the function associated with the event handler attribute
-   otherwise. (The &lt;code title=dom-event-listener&gt;listener&lt;/code&gt; argument is
+   otherwise. (The &lt;var title=dom-event-listener&gt;listener&lt;/var&gt; argument is
    emphatically &lt;em&gt;not&lt;/em&gt; the event handler attribute itself.)
 
   &lt;h5 id=event&gt;&lt;span class=secno&gt;4.4.4.2. &lt;/span&gt;Event firing&lt;/h5&gt;
@@ -31956,6 +32168,23 @@
    following steps:
 
   &lt;ol&gt;
+   &lt;li id=sandboxLinks&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt; is not the same
+     as the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; being navigated, and
+     the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt; is not one of the &lt;a
+     href=&quot;#ancestor&quot; title=&quot;ancestor browsing context&quot;&gt;ancestor browsing
+     contexts&lt;/a&gt; of the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; being
+     navigated, and the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt; has
+     its &lt;a href=&quot;#sandboxed&quot;&gt;sandboxed navigation browsing context&lt;/a&gt; flag
+     set, then abort these steps. The user agent may offer to open the
+     specified resource in a new &lt;a href=&quot;#top-level&quot;&gt;top-level browsing
+     context&lt;/a&gt; or in the &lt;a href=&quot;#top-level&quot;&gt;top-level browsing
+     context&lt;/a&gt; of the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;, at
+     the user's option, in which case the user agent must &lt;a
+     href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; that designated &lt;a
+     href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt; to the specified
+     resource as if the user had requested it independently.
+
    &lt;li id=seamlessLinks&gt;
     &lt;p&gt;If the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt; is the same as
      the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; being navigated, and this
@@ -32439,6 +32668,12 @@
    XBL binding, or to give the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;.
 
+  &lt;p class=note id=sandboxPluginNavigate&gt;If the &lt;a
+   href=&quot;#sandboxed0&quot;&gt;sandboxed plugins browsing context&lt;/a&gt; flag is set on
+   the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the synthesized &lt;code&gt;&lt;a
+   href=&quot;#embed&quot;&gt;embed&lt;/a&gt;&lt;/code&gt; element will &lt;a
+   href=&quot;#sandboxPluginEmbed&quot;&gt;fail to render the content&lt;/a&gt;.
+
   &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;4.9.7 &lt;/span&gt;&lt;dfn id=page-load4
    title=navigate-ua-inline&gt;Page load processing model for inline content
    that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
@@ -36358,7 +36593,6 @@
    on the UA.&lt;/p&gt;
   &lt;!-- XXX rendering requirement: The current caret should affect the
   line-height (i.e. it acts at least like an empty inline element) --&gt;
-  &lt;!-- XXX document.designMode attribute --&gt;
   &lt;!-- XXX would be useful to have a way to mark an element as
   unremovable. --&gt;
 
@@ -36581,17 +36815,10 @@
    disabled.
 
   &lt;p&gt;Enabling &lt;code title=dom-document-designMode&gt;&lt;a
-   href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; causes scripts in general to be
-   disabled and the document to become editable.
+   href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; &lt;a
+   href=&quot;#designModeScriptBlocked&quot;&gt;causes scripts in general to be
+   disabled&lt;/a&gt; and the document to become editable.
 
-  &lt;p&gt;When the &lt;code&gt;Document&lt;/code&gt; has &lt;code
-   title=dom-document-designMode&gt;&lt;a href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt;
-   enabled, the &lt;a href=&quot;#event2&quot;&gt;event handler attributes&lt;/a&gt; of the
-   document and any elements owned by the document must do nothing, and event
-   listeners registered on the document and any elements owned by the
-   document that are associated with script from the document must similarly
-   do nothing.
-
   &lt;h3 id=dnd&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;&lt;dfn id=drag-and&gt;Drag and
    drop&lt;/dfn&gt;&lt;/h3&gt;
   &lt;!--XXX
@@ -41969,7 +42196,8 @@
    that to break out of the &lt;noscript&gt; but it doesn't. This is an edge
    case that doesn't affect the spec, since the algorithm for fragment
    parsing is only used for innerHTML, where we know scripting is
-   enabled. --&gt;
+   enabled. (XXX except maybe if innerHTML is set from another
+   browsing context on a document with designMode set?) --&gt;
 
    &lt;li&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is a &lt;code&gt;&lt;a
     href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element, then switch the &lt;span&gt;insertion
@@ -42293,6 +42521,13 @@
    associate with forms in the face of dramatically bad markup, for
    historical reasons.
 
+  &lt;h5 id=the-scripting&gt;&lt;span class=secno&gt;8.2.3.5. &lt;/span&gt;The scripting state&lt;/h5&gt;
+
+  &lt;p&gt;The &lt;dfn id=scripting2&gt;scripting flag&lt;/dfn&gt; is set to &quot;enabled&quot; if the
+   &lt;code&gt;Document&lt;/code&gt; with which the parser is associated was &lt;a
+   href=&quot;#with-script&quot;&gt;with script&lt;/a&gt; when the parser was created, and
+   &quot;disabled&quot; otherwise.
+
   &lt;h4 id=tokenisation&gt;&lt;span class=secno&gt;8.2.4 &lt;/span&gt;&lt;dfn
    id=tokenisation0&gt;Tokenisation&lt;/dfn&gt;&lt;/h4&gt;
 
@@ -45026,16 +45261,16 @@
    &lt;dd&gt;
     &lt;p&gt;Follow the &lt;a href=&quot;#generic0&quot;&gt;generic RCDATA parsing algorithm&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if &lt;a
-    href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;:
+   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if the &lt;a
+    href=&quot;#scripting2&quot;&gt;scripting flag&lt;/a&gt; is enabled:
 
    &lt;dt&gt;A start tag whose tag name is &quot;style&quot;
 
    &lt;dd&gt;
     &lt;p&gt;Follow the &lt;a href=&quot;#generic&quot;&gt;generic CDATA parsing algorithm&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if &lt;a
-    href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;:
+   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if the &lt;a
+    href=&quot;#scripting2&quot;&gt;scripting flag&lt;/a&gt; is disabled:
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.&lt;/p&gt;
@@ -46236,8 +46471,8 @@
 
    &lt;dt&gt;A start tag whose tag name is one of: &quot;iframe&quot;, &quot;noembed&quot;, &quot;noframes&quot;
 
-   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if &lt;a
-    href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;:
+   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if the &lt;a
+    href=&quot;#scripting2&quot;&gt;scripting flag&lt;/a&gt; is enabled:
 
    &lt;dd&gt;
     &lt;p&gt;Follow the &lt;a href=&quot;#generic&quot;&gt;generic CDATA parsing algorithm&lt;/a&gt;.&lt;/p&gt;
@@ -46336,8 +46571,8 @@
    &lt;!-- add keygen if we add the start
    tag --&gt;
 
-   &lt;dt&gt;An end tag whose tag name is &quot;noscript&quot;, if &lt;a
-    href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;:
+   &lt;dt&gt;An end tag whose tag name is &quot;noscript&quot;, if the &lt;a
+    href=&quot;#scripting2&quot;&gt;scripting flag&lt;/a&gt; is enabled:
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#parse1&quot;&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
@@ -47911,7 +48146,9 @@
          &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; DOM attribute literally.&lt;/p&gt;
         &lt;!-- note about noscript: we're
         assuming here that scripting is disabled. If this algorithm is
-        used with scripting disabled, this won't work right. --&gt;
+        used with scripting disabled, this won't work right. XXX This
+        might affect calling innerHTML on nodes in a document that is
+        being designMode'd --&gt;
         
         &lt;p&gt;Otherwise, append the value of &lt;var title=&quot;&quot;&gt;current node&lt;/var&gt;'s
          &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; DOM attribute, &lt;a href=&quot;#escapingString&quot;
@@ -48048,9 +48285,10 @@
 
      &lt;dt&gt;If it is a &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element
 
-     &lt;dd&gt;If &lt;a href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;, set the &lt;a
-      href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;CDATA&lt;/em&gt;. Otherwise,
-      set the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;PCDATA&lt;/em&gt;.
+     &lt;dd&gt;If the &lt;a href=&quot;#scripting2&quot;&gt;scripting flag&lt;/a&gt; is enabled, set the
+      &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;CDATA&lt;/em&gt;.
+      Otherwise, set the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to
+      &lt;em&gt;PCDATA&lt;/em&gt;.
 
      &lt;dt&gt;If it is a &lt;code&gt;plaintext&lt;/code&gt; element
 
@@ -50498,8 +50736,15 @@
    all extension frameworks (Java, .NET, Flash, etc) are handled in a
    consistent manner.
 
-  &lt;p class=big-issue&gt;define how the element works, if supported
+  &lt;p id=sandboxPluginApplet&gt;If the &lt;a href=&quot;#sandboxed0&quot;&gt;sandboxed plugins
+   browsing context&lt;/a&gt; flag is set on the &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   context&lt;/a&gt; for which the &lt;code&gt;&lt;a href=&quot;#applet&quot;&gt;applet&lt;/a&gt;&lt;/code&gt;
+   element's document is the &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt;, then the
+   element must be ignored (it represents nothing).
 
+  &lt;p&gt;Otherwise, &lt;span class=big-issue&gt;define how the element works, if
+   supported&lt;/span&gt;.
+
   &lt;pre class=idl&gt;[XXX] interface &lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt; {
   readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#applets&quot; title=dom-document-applets&gt;applets&lt;/a&gt;;
 };&lt;/pre&gt;

Modified: source
===================================================================
--- source	2008-05-20 00:48:51 UTC (rev 1642)
+++ source	2008-05-21 00:30:41 UTC (rev 1643)
@@ -296,12 +296,12 @@
    &lt;dd&gt;
 
     &lt;p&gt;Implementations that do not support scripting (or which have
-    their scripting features &lt;span title=&quot;scripting is
-    disabled&quot;&gt;disabled&lt;/span&gt;) are exempt from supporting the events
-    and DOM interfaces mentioned in this specification. For the parts
-    of this specification that are defined in terms of an events model
-    or in terms of the DOM, such user agents must still act as if
-    events and the DOM were supported.&lt;/p&gt;
+    their scripting features disabled entirely) are exempt from
+    supporting the events and DOM interfaces mentioned in this
+    specification. For the parts of this specification that are
+    defined in terms of an events model or in terms of the DOM, such
+    user agents must still act as if events and the DOM were
+    supported.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;Scripting can form an integral part of an
     application. Web browsers that do not support scripting, or that
@@ -324,18 +324,21 @@
     elements only contain quoted material).&lt;/p&gt;
 
     &lt;p&gt;Conformance checkers must check that the input document
-    conforms when &lt;span&gt;scripting is disabled&lt;/span&gt;, and should also
-    check that the input document conforms when &lt;span&gt;scripting is
-    enabled&lt;/span&gt;. (This is only a &quot;SHOULD&quot; and not a &quot;MUST&quot;
-    requirement because it has been proven to be impossible. &lt;a
+    conforms when parsed without a &lt;span&gt;browsing context&lt;/span&gt;
+    (meaning that no scripts are run, and that the parser's
+    &lt;span&gt;scripting flag&lt;/span&gt; is disabled), and should also check
+    that the input document conforms when parsed with a &lt;span&gt;browsing
+    context&lt;/span&gt; in which scripts execute, and that the scripts
+    never cause non-conforming states to occur. (This is only a
+    &quot;SHOULD&quot; and not a &quot;MUST&quot; requirement because it has been proven
+    to be impossible. &lt;a
     href=&quot;#refsHALTINGPROBLEM&quot;&gt;[HALTINGPROBLEM]&lt;/a&gt;)&lt;/p&gt; &lt;!-- XXX
     [Computable] On computable numbers, with an application to the
     Entscheidungsproblem. Alan M. Turing. In Proceedings of the London
     Mathematical Society, series 2, volume 42, pages 230-265. London
     Mathematical Society,
     1937. <A HREF="http://www.turingarchive.org/browse.php/B/12">http://www.turingarchive.org/browse.php/B/12</A> (referenced:
-    2007-03-03)
-    --&gt;
+    2007-03-03) --&gt;
 
     &lt;p&gt;The term &quot;HTML5 validator&quot; can be used to refer to a
     conformance checker that itself conforms to the applicable
@@ -4382,6 +4385,13 @@
   &lt;span&gt;set of space-separated tokens&lt;/span&gt; where none of the words
   are duplicated but where the order of the tokens is meaningful.&lt;/p&gt;
 
+  &lt;p&gt;&lt;span title=&quot;set of space-separated tokens&quot;&gt;Sets of
+  space-separated tokens&lt;/span&gt; sometimes have a defined set of
+  allowed values. When a set of allowed values is defined, the tokens
+  must all be from that list of allowed values; other values are
+  non-conforming. If no such set of allowed values is provided, then
+  all values are conforming.&lt;/p&gt;
+
   &lt;p&gt;When a user agent has to &lt;dfn&gt;split a string on spaces&lt;/dfn&gt;, it
   must use the following algorithm:&lt;/p&gt;
 
@@ -12160,12 +12170,14 @@
    &lt;dt&gt;Element-specific attributes:&lt;/dt&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-iframe-name&quot;&gt;name&lt;/code&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-iframe-sandbox&quot;&gt;sandbox&lt;/code&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-iframe-seamless&quot;&gt;seamless&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;DOM interface:&lt;/dt&gt;
    &lt;dd&gt;
 &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLIFrameElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
            attribute DOMString &lt;span title=&quot;dom-iframe-src&quot;&gt;src&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-iframe-name&quot;&gt;name&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-iframe-sandbox&quot;&gt;sandbox&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-iframe-seamless&quot;&gt;seamless&lt;/span&gt;;&lt;!--
   readonly attribute Document &lt;span title=&quot;dom-iframe-contentDocument&quot;&gt;contentDocument&lt;/span&gt;;
   readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-iframe-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;--&gt;
@@ -12239,6 +12251,131 @@
   &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; event&lt;/span&gt;.&lt;/p&gt;
 
 
+  &lt;p&gt;The &lt;dfn title=&quot;attr-iframe-sandbox&quot;&gt;&lt;code&gt;sandbox&lt;/code&gt;&lt;/dfn&gt;
+  attribute, when specified, enables a set of extra restrictions on
+  any content hosted by the &lt;code&gt;iframe&lt;/code&gt;. Its value must be an
+  &lt;span&gt;unordered set of unique space-separated tokens&lt;/span&gt;. The
+  allowed values are &lt;code
+  title=&quot;attr-iframe-sandbox-xxx_origin_please_suggest_a_better_name&quot;&gt;xxx_origin_please_suggest_a_better_name&lt;/code&gt;,
+  &lt;code
+  title=&quot;attr-iframe-sandbox-unrestricted-forms&quot;&gt;unrestricted-forms&lt;/code&gt;,
+  and &lt;code
+  title=&quot;attr-iframe-sandbox-unrestricted-scripts&quot;&gt;unrestricted-scripts&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;While the &lt;code title=&quot;attr-iframe-sandbox&quot;&gt;sandbox&lt;/code&gt;
+  attribute is specified, the &lt;code&gt;iframe&lt;/code&gt; element's
+  &lt;span&gt;nested browsing context&lt;/span&gt;, and all the browsing contexts
+  &lt;span title=&quot;nested browsing context&quot;&gt;nested&lt;/span&gt; within it
+  (either directly or indirectly through other nested browsing
+  contexts) must have the following flags set:&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;The &lt;dfn&gt;sandboxed navigation browsing context&lt;/dfn&gt; flag&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;This flag &lt;a href=&quot;#sandboxLinks&quot;&gt;prevents content from
+    navigating browsing contexts other than the sandboxed browsing
+    context itself&lt;/a&gt; (or browsing contexts further nested inside
+    it).&lt;/p&gt;
+
+    &lt;p&gt;This flag also &lt;a href=&quot;#sandboxWindowOpen&quot;&gt;prevents content
+    from creating new auxiliary browsing contexts&lt;/a&gt;, e.g. using the
+    &lt;code title=&quot;attr-hyperlink-target&quot;&gt;target&lt;/code&gt; attribute or the
+    &lt;code title=&quot;dom-window-open&quot;&gt;window.open()&lt;/code&gt; method.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;The &lt;dfn&gt;sandboxed plugins browsing context&lt;/dfn&gt; flag&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;This flag prevents content from instantiating third-party
+    handlers (i.e. plugins), whether using &lt;a
+    href=&quot;#sandboxPluginEmbed&quot;&gt;the &lt;code&gt;embed&lt;/code&gt; element&lt;/a&gt;, &lt;a
+    href=&quot;#sandboxPluginObject&quot;&gt;the &lt;code&gt;object&lt;/code&gt; element&lt;/a&gt;,
+    &lt;a href=&quot;#sandboxPluginApplet&quot;&gt;the &lt;code&gt;applet&lt;/code&gt;
+    element&lt;/a&gt;, or &lt;a href=&quot;#sandboxPluginNavigate&quot;&gt;through
+    navigation&lt;/a&gt; of a &lt;span&gt;nested browsing context&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;The &lt;dfn&gt;sandboxed origin browsing context&lt;/dfn&gt; flag, unless
+   the &lt;code title=&quot;attr-iframe-sandbox&quot;&gt;sandbox&lt;/code&gt; attribute's
+   value, when &lt;span title=&quot;split a string on spaces&quot;&gt;split on
+   spaces&lt;/span&gt;, is found to have the &lt;dfn
+   title=&quot;attr-iframe-sandbox-xxx_origin_please_suggest_a_better_name&quot;&gt;&lt;code&gt;xxx_origin_please_suggest_a_better_name&lt;/code&gt;&lt;/dfn&gt;
+   keyword set&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;This flag &lt;a href=&quot;#sandboxOrigin&quot;&gt;forces content into a unique
+    origin&lt;/a&gt; for the purposes of the &lt;span
+    title=&quot;origin&quot;&gt;same-origin policy&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;div class=&quot;note&quot;&gt;
+
+     &lt;p&gt;The &lt;code
+     title=&quot;attr-iframe-sandbox-xxx_origin_please_suggest_a_better_name&quot;&gt;xxx_origin_please_suggest_a_better_name&lt;/code&gt;
+     attribute is intended for two cases.&lt;/p&gt;
+
+     &lt;p&gt;First, it can be used to allow content from the same site to
+     be sandboxed to disable scripting, while still allowing access to
+     the DOM of the sandboxed content.&lt;/p&gt;
+
+     &lt;p&gt;Second, it can be used to embed content from a third-party
+     site, sandboxed to prevent that site from opening popup windows,
+     etc, without preventing the embedded page from communicating back
+     to its originating site, using the database APIs to store data,
+     etc.&lt;/p&gt;
+
+    &lt;/div&gt;
+
+    &lt;p class=&quot;big-issue&quot;&gt;Please don't implement this keyword using the
+    name &quot;xxx_origin_please_suggest_a_better_name&quot; -- please suggest a
+    better name first!&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;The &lt;dfn&gt;sandboxed forms browsing context&lt;/dfn&gt; flag, unless
+   the &lt;code title=&quot;attr-iframe-sandbox&quot;&gt;sandbox&lt;/code&gt; attribute's
+   value, when &lt;span title=&quot;split a string on spaces&quot;&gt;split on
+   spaces&lt;/span&gt;, is found to have the &lt;dfn
+   title=&quot;attr-iframe-sandbox-unrestricted-forms&quot;&gt;&lt;code&gt;unrestricted-forms&lt;/code&gt;&lt;/dfn&gt;
+   keyword set&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;This flag &lt;a href=&quot;#sandboxSubmitBlocked&quot;&gt;blocks form
+    submission&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;The &lt;dfn&gt;sandboxed scripts browsing context&lt;/dfn&gt; flag, unless
+   the &lt;code title=&quot;attr-iframe-sandbox&quot;&gt;sandbox&lt;/code&gt; attribute's
+   value, when &lt;span title=&quot;split a string on spaces&quot;&gt;split on
+   spaces&lt;/span&gt;, is found to have the &lt;dfn
+   title=&quot;attr-iframe-sandbox-unrestricted-scripts&quot;&gt;&lt;code&gt;unrestricted-scripts&lt;/code&gt;&lt;/dfn&gt;
+   keyword set&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;This flag &lt;a href=&quot;#sandboxScriptBlocked&quot;&gt;blocks script
+    execution&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;These flags must not be set unless the conditions listed above
+  define them as being set.&lt;/p&gt;
+
+
   &lt;p&gt;The &lt;dfn title=&quot;attr-iframe-seamless&quot;&gt;&lt;code&gt;seamless&lt;/code&gt;&lt;/dfn&gt;
   attribute is a boolean attribute. When specified, it indicates that
   the &lt;code&gt;iframe&lt;/code&gt; element's &lt;span&gt;browsing context&lt;/span&gt; is
@@ -12364,7 +12501,8 @@
 
   &lt;p&gt;The DOM attributes &lt;dfn
   title=&quot;dom-iframe-src&quot;&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
-  title=&quot;dom-iframe-name&quot;&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn
+  title=&quot;dom-iframe-name&quot;&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
+  title=&quot;dom-iframe-sandbox&quot;&gt;&lt;code&gt;sandbox&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn
   title=&quot;dom-iframe-seamless&quot;&gt;&lt;code&gt;seamless&lt;/code&gt;&lt;/dfn&gt; must
   &lt;span&gt;reflect&lt;/span&gt; the content attributes of the same name.&lt;/p&gt;
 
@@ -12407,8 +12545,31 @@
   be present and contain a URI (or IRI).&lt;/p&gt;
 
   &lt;p&gt;If the &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute is
-  missing, then the &lt;code&gt;embed&lt;/code&gt; element must be ignored.&lt;/p&gt;
+  missing, then the &lt;code&gt;embed&lt;/code&gt; element must be ignored (it
+  represents nothing).&lt;/p&gt;
 
+  &lt;p id=&quot;sandboxPluginEmbed&quot;&gt;If the &lt;span&gt;sandboxed plugins browsing
+  context&lt;/span&gt; flag is set on the &lt;span&gt;browsing context&lt;/span&gt; for
+  which the &lt;code&gt;embed&lt;/code&gt; element's document is the &lt;span&gt;active
+  document&lt;/span&gt;, then the user agent must render the
+  &lt;code&gt;embed&lt;/code&gt; element in a manner that conveys that the plugin
+  was disabled. The user agent may offer the user the option to
+  override the sandbox and instantiate the handler anyway; if the user
+  invokes such an option, the user agent must act as if the
+  &lt;span&gt;sandboxed plugins browsing context&lt;/span&gt; flag was not set for
+  the purposes of this element.&lt;/p&gt;
+
+  &lt;p class=&quot;warning&quot;&gt;Plugins are disabled in sandboxed browsing
+  contexts because they might not honour the restrictions imposed by
+  the sandbox (e.g. they might allow scripting even when scripting in
+  the sandbox is disabled). User agents should convey the danger of
+  overriding the sandbox to the user if an option to do so is
+  provided.&lt;/p&gt;
+
+  &lt;p&gt;Otherwise, the &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute
+  is present, and the element is not in a sandboxed browsing
+  context:&lt;/p&gt;
+
   &lt;p&gt;When the &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute is
   set, user agents are expected to find an appropriate handler for the
   specified resource, based on the &lt;span
@@ -12464,8 +12625,7 @@
   &lt;/ol&gt;
 
   &lt;p class=&quot;big-issue&quot;&gt;Should we instead say that the content-sniffing
-  that we're going to define for top-level browsing contexts should
-  apply here?&lt;/p&gt;
+  used for top-level browsing contexts should apply here?&lt;/p&gt;
 
   &lt;p class=&quot;big-issue&quot;&gt;Should we require the type attribute to match
   the server information?&lt;/p&gt;
@@ -12570,12 +12730,13 @@
     attribute is present, and has a value that isn't the empty string,
     then: if the user agent can find a handler suitable according to
     the value of the &lt;code title=&quot;attr-object-classid&quot;&gt;classid&lt;/code&gt;
-    attribute, then that handler &lt;a href=&quot;#object-plugin&quot;&gt;should be
-    used&lt;/a&gt;, and the value of the &lt;code
-    title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute, if any, should be
-    passed to the handler. If no suitable handler can be found, or if
-    the handler reports an error, jump to the last step in the overall
-    set of steps (fallback).&lt;/p&gt;
+    attribute, and &lt;a href=&quot;#sandboxPluginObject&quot;&gt;handlers aren't
+    being sandboxed&lt;/a&gt;, then that handler &lt;a
+    href=&quot;#object-plugin&quot;&gt;should be used&lt;/a&gt;, and the value of the
+    &lt;code title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute, if any,
+    should be passed to the handler. If no suitable handler can be
+    found, or if the handler reports an error, jump to the last step
+    in the overall set of steps (fallback).&lt;/p&gt;
 
     &lt;!--
      case insensitive:
@@ -12677,7 +12838,9 @@
       &lt;dl class=&quot;switch&quot;&gt;
 
        &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; can be handled by
-       a special handler (e.g. a plugin)&lt;/dt&gt;
+       a special handler (e.g. a plugin), and &lt;a
+       href=&quot;#sandboxPluginObject&quot;&gt;handlers aren't being
+       sandboxed&lt;/a&gt;&lt;/dt&gt;
 
        &lt;dd&gt;
 
@@ -12772,7 +12935,8 @@
 
    &lt;li&gt;&lt;p&gt;If the &lt;code title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute
    is absent but the &lt;code title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt;
-   attribute is present, and if the user agent can find a handler
+   attribute is present, &lt;a href=&quot;#sandboxPluginObject&quot;&gt;handlers
+   aren't being sandboxed&lt;/a&gt;, and the user agent can find a handler
    suitable according to the value of the &lt;code
    title=&quot;attr-object-type&quot;&gt;type&lt;/code&gt; attribute, then that handler
    &lt;a href=&quot;#object-plugin&quot;&gt;should be used&lt;/a&gt;. If no suitable handler
@@ -12795,6 +12959,13 @@
   object representing the element should expose that interface. The
   handler is not a nested &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p id=&quot;sandboxPluginObject&quot;&gt;If the &lt;span&gt;sandboxed plugins browsing
+  context&lt;/span&gt; flag is set on the &lt;span&gt;browsing context&lt;/span&gt; for
+  which the &lt;code&gt;object&lt;/code&gt; element's document is the &lt;span&gt;active
+  document&lt;/span&gt;, then the steps above must always act as if they had
+  failed to find a handler, even if one would otherwise have been
+  used.&lt;/p&gt;
+
   &lt;!-- duplicates what's in &lt;embed&gt; section above --&gt;
   &lt;p class=&quot;note&quot;&gt;The &lt;code&gt;object&lt;/code&gt; element can, in certain
   cases as described above, instantiate third-party handlers. This
@@ -15082,14 +15253,14 @@
 
   &lt;p&gt;The &lt;dfn title=&quot;attr-media-controls&quot;&gt;&lt;code&gt;controls&lt;/code&gt;&lt;/dfn&gt;
   attribute is a &lt;span&gt;boolean attribute&lt;/span&gt;. If the attribute is
-  present, or if &lt;span&gt;scripting is disabled&lt;/span&gt;, then the user
-  agent should &lt;dfn&gt;expose a user interface to the user&lt;/dfn&gt;. This
-  user interface should include features to begin playback, pause
-  playback, seek to an arbitrary position in the content (if the
-  content supports arbitrary seeking), change the volume, and show the
-  media content in manners more suitable to the user (e.g. full-screen
-  video or in an independent resizable window). Other controls may
-  also be made available.&lt;/p&gt;
+  present, or if the &lt;span&gt;media element&lt;/span&gt; is &lt;span&gt;without
+  script&lt;/span&gt;, then the user agent should &lt;dfn&gt;expose a user
+  interface to the user&lt;/dfn&gt;. This user interface should include
+  features to begin playback, pause playback, seek to an arbitrary
+  position in the content (if the content supports arbitrary seeking),
+  change the volume, and show the media content in manners more
+  suitable to the user (e.g. full-screen video or in an independent
+  resizable window). Other controls may also be made available.&lt;/p&gt;
 
   &lt;p&gt;If the attribute is absent, then the user agent should avoid
   making a user interface available that could conflict with an
@@ -15445,22 +15616,23 @@
   element. The contents of the &lt;code&gt;canvas&lt;/code&gt; element, if any,
   are the element's &lt;span&gt;fallback content&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;In interactive visual media with &lt;span&gt;scripting enabled&lt;/span&gt;,
-  the canvas element is an embedded element with a dynamically created
-  image.&lt;/p&gt;
+  &lt;p&gt;In interactive visual media, if the &lt;code&gt;canvas&lt;/code&gt; element
+  is &lt;span&gt;with script&lt;/span&gt;, the &lt;code&gt;canvas&lt;/code&gt; element
+  represents an embedded element with a dynamically created image.&lt;/p&gt;
 
   &lt;p&gt;In non-interactive, static, visual media, if the
   &lt;code&gt;canvas&lt;/code&gt; element has been previously painted on (e.g. if
   the page was viewed in an interactive visual medium and is now being
   printed, or if some script that ran during the page layout process
-  painted on the element), then the &lt;code&gt;canvas&lt;/code&gt; element must
-  be treated as &lt;span&gt;embedded content&lt;/span&gt; with the current image
-  and size. Otherwise, the element's &lt;span&gt;fallback content&lt;/span&gt;
-  must be used instead.&lt;/p&gt;
+  painted on the element), then the &lt;code&gt;canvas&lt;/code&gt; element
+  represents &lt;span&gt;embedded content&lt;/span&gt; with the current image and
+  size. Otherwise, the element represents its &lt;span&gt;fallback
+  content&lt;/span&gt; instead.&lt;/p&gt;
 
-  &lt;p&gt;In non-visual media, and in visual media with &lt;span&gt;scripting
-  disabled&lt;/span&gt;, the &lt;code&gt;canvas&lt;/code&gt; element's &lt;span&gt;fallback
-  content&lt;/span&gt; must be used instead.&lt;/p&gt;
+  &lt;p&gt;In non-visual media, and in visual media if the
+  &lt;code&gt;canvas&lt;/code&gt; element is &lt;span&gt;without script&lt;/span&gt;, the
+  &lt;code&gt;canvas&lt;/code&gt; element represents its &lt;span&gt;fallback
+  content&lt;/span&gt; instead.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;canvas&lt;/code&gt; element has two attributes to control the
   size of the coordinate space: &lt;dfn
@@ -20688,8 +20860,12 @@
 
   &lt;p class=&quot;big-issue&quot;&gt;See &lt;a href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#form-submission">http://www.whatwg.org/specs/web-forms/current-work/#form-submission</A>&quot;&gt;WF2&lt;/a&gt; for now&lt;/p&gt;
 
+  &lt;p class=&quot;big-issue&quot; id=&quot;sandboxSubmitBlocked&quot;&gt;If a form is in a
+  browsing context whose &lt;span&gt;sandboxed forms browsing context&lt;/span&gt;
+  is set, it must not be submitted.&lt;/p&gt;
 
 
+
   &lt;h3&gt;Scripting&lt;/h3&gt;
 
   &lt;p&gt;Scripts allow authors to add interactivity to their documents.&lt;/p&gt;
@@ -20898,14 +21074,13 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If &lt;span&gt;scripting is disabled&lt;/span&gt;, or if the
-    &lt;code&gt;Document&lt;/code&gt; has &lt;code
-    title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; enabled, or if
-    the &lt;code&gt;script&lt;/code&gt; element was created by an &lt;span&gt;XML
-    parser&lt;/span&gt; that itself was created as part of the processing of
-    the &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; attribute's
-    setter&lt;!-- no need to worry about the innerHTML-HTML case, as the
-    HTML parser handles that for us--&gt;, or if the user agent does not
+    &lt;p&gt;If the &lt;code&gt;script&lt;/code&gt; element is &lt;span&gt;without
+    script&lt;/span&gt;, or if the &lt;code&gt;script&lt;/code&gt; element was created
+    by an &lt;span&gt;XML parser&lt;/span&gt; that itself was created as part of
+    the processing of the &lt;code
+    title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; attribute's setter&lt;!--
+    no need to worry about the innerHTML-HTML case, as the HTML parser
+    handles that for us--&gt;, or if the user agent does not
     &lt;span&gt;support the scripting language&lt;/span&gt; given by &lt;var&gt;the
     script's type&lt;/var&gt; for this &lt;code&gt;script&lt;/code&gt; element, or if
     the &lt;code&gt;script&lt;/code&gt; element has its &lt;span&gt;&quot;already
@@ -21181,12 +21356,9 @@
 
      &lt;li&gt;
 
-      &lt;p&gt;If &lt;span&gt;scripting is enabled&lt;/span&gt;, and the
-      &lt;code&gt;Document&lt;/code&gt; does not have &lt;code
-      title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; enabled, and the
-      &lt;code&gt;Document&lt;/code&gt; is the &lt;span&gt;active document&lt;/span&gt; in its
-      &lt;span&gt;browsing context&lt;/span&gt;, the user agent must execute the
-      script:&lt;/p&gt;
+      &lt;p&gt;If the &lt;code&gt;script&lt;/code&gt; element's &lt;code&gt;Document&lt;/code&gt; is
+      the &lt;span&gt;active document&lt;/span&gt; in its &lt;span&gt;browsing
+      context&lt;/span&gt;, the user agent must execute the script:&lt;/p&gt;
 
       &lt;dl class=&quot;switch&quot;&gt;
 
@@ -21231,7 +21403,7 @@
       languages&lt;/a&gt; section below).&lt;/p&gt;
 
       &lt;p&gt;Scripts must be executed in the scope of the &lt;span&gt;browsing
-      context&lt;/span&gt; of the element's &lt;code&gt;Document&lt;/code&gt;. That
+      context&lt;/span&gt; of the element's &lt;code&gt;Document&lt;/code&gt;. The
       &lt;span&gt;script execution browsing context&lt;/span&gt; is that browsing
       context.&lt;/p&gt;
 
@@ -21319,9 +21491,9 @@
    &lt;dd&gt;In a &lt;code&gt;head&lt;/code&gt; element of an &lt;span title=&quot;&gt;HTML documents&quot;&gt;HTML document&lt;/span&gt;, if there are no ancestor &lt;code&gt;noscript&lt;/code&gt; elements.&lt;/dd&gt;
    &lt;dd&gt;Where &lt;span&gt;phrasing content&lt;/span&gt; is expected in &lt;span&gt;HTML documents&lt;/span&gt;, if there are no ancestor &lt;code&gt;noscript&lt;/code&gt; elements.&lt;/dd&gt;
    &lt;dt&gt;Content model:&lt;/dt&gt;
-   &lt;dd&gt;When &lt;span&gt;scripting is disabled&lt;/span&gt;, in a &lt;code&gt;head&lt;/code&gt; element: in any order, zero or more &lt;code&gt;link&lt;/code&gt; elements, zero or more &lt;code&gt;style&lt;/code&gt; elements, and zero or more &lt;code&gt;meta&lt;/code&gt; elements.&lt;/dd&gt;
-   &lt;dd&gt;When &lt;span&gt;scripting is disabled&lt;/span&gt;, not in a &lt;code&gt;head&lt;/code&gt; element: &lt;span&gt;transparent&lt;/span&gt;, but there must be no &lt;code&gt;noscript&lt;/code&gt; element descendants.&lt;/dd&gt;
-   &lt;dd&gt;When &lt;span&gt;scripting is enabled&lt;/span&gt;: text that conforms to the requirements given in the prose.&lt;/dd&gt;
+   &lt;dd&gt;&lt;span&gt;Without script&lt;/span&gt;, in a &lt;code&gt;head&lt;/code&gt; element: in any order, zero or more &lt;code&gt;link&lt;/code&gt; elements, zero or more &lt;code&gt;style&lt;/code&gt; elements, and zero or more &lt;code&gt;meta&lt;/code&gt; elements.&lt;/dd&gt;
+   &lt;dd&gt;&lt;span&gt;Without script&lt;/span&gt;, not in a &lt;code&gt;head&lt;/code&gt; element: &lt;span&gt;transparent&lt;/span&gt;, but there must be no &lt;code&gt;noscript&lt;/code&gt; element descendants.&lt;/dd&gt;
+   &lt;dd&gt;&lt;span&gt;With script&lt;/span&gt;: text that conforms to the requirements given in the prose.&lt;/dd&gt;
    &lt;dt&gt;Element-specific attributes:&lt;/dt&gt;
    &lt;dd&gt;None.&lt;/dd&gt;
    &lt;dt&gt;DOM interface:&lt;/dt&gt;
@@ -21342,35 +21514,36 @@
   serialisation&lt;/span&gt;&lt;!-- XXX xref --&gt;.&lt;/strong&gt;&lt;/p&gt;
 
   &lt;p&gt;When used in &lt;span&gt;HTML documents&lt;/span&gt;, the allowed content
-  model depends on whether scripting is enabled or not, and whether
-  the element is in a &lt;code&gt;head&lt;/code&gt; element or not.&lt;/p&gt;
+  model is as follows:&lt;/p&gt;
 
-  &lt;p&gt;In a &lt;code&gt;head&lt;/code&gt; element, if &lt;span&gt;scripting is
-  disabled&lt;/span&gt;, then the content model of a &lt;code&gt;noscript&lt;/code&gt;
-  element must contain only &lt;code&gt;link&lt;/code&gt;, &lt;code&gt;style&lt;/code&gt;, and
-  &lt;code&gt;meta&lt;/code&gt; elements. If &lt;span&gt;scripting is enabled&lt;/span&gt;,
-  then the content model of a &lt;code&gt;noscript&lt;/code&gt; element is text,
-  except that invoking the &lt;span&gt;HTML fragment parsing
-  algorithm&lt;/span&gt; with the &lt;code&gt;noscript&lt;/code&gt; element as the &lt;var
-  title=&quot;&quot;&gt;context&lt;/var&gt; element and the text contents as the &lt;var
-  title=&quot;&quot;&gt;input&lt;/var&gt; must result in a list of nodes that consists
-  only of &lt;code&gt;link&lt;/code&gt;, &lt;code&gt;style&lt;/code&gt;, and &lt;code&gt;meta&lt;/code&gt;
-  elements.&lt;/p&gt;
+  &lt;p&gt;In a &lt;code&gt;head&lt;/code&gt; element, if the &lt;code&gt;noscript&lt;/code&gt;
+  element is &lt;span&gt;without script&lt;/span&gt;, then the content model of a
+  &lt;code&gt;noscript&lt;/code&gt; element must contain only &lt;code&gt;link&lt;/code&gt;,
+  &lt;code&gt;style&lt;/code&gt;, and &lt;code&gt;meta&lt;/code&gt; elements. If the
+  &lt;code&gt;noscript&lt;/code&gt; element is &lt;span&gt;with script&lt;/span&gt;, then the
+  content model of a &lt;code&gt;noscript&lt;/code&gt; element is text, except
+  that invoking the &lt;span&gt;HTML fragment parsing algorithm&lt;/span&gt; with
+  the &lt;code&gt;noscript&lt;/code&gt; element as the &lt;var title=&quot;&quot;&gt;context&lt;/var&gt;
+  element and the text contents as the &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; must
+  result in a list of nodes that consists only of &lt;code&gt;link&lt;/code&gt;,
+  &lt;code&gt;style&lt;/code&gt;, and &lt;code&gt;meta&lt;/code&gt; elements.&lt;/p&gt;
 
-  &lt;p&gt;Outside of &lt;code&gt;head&lt;/code&gt; elements, if &lt;span&gt;scripting is
-  disabled&lt;/span&gt;, then the content model of a &lt;code&gt;noscript&lt;/code&gt;
-  element is &lt;span&gt;transparent&lt;/span&gt;, with the additional restriction
-  that a &lt;code&gt;noscript&lt;/code&gt; element must not have a
-  &lt;code&gt;noscript&lt;/code&gt; element as an ancestor (that is,
-  &lt;code&gt;noscript&lt;/code&gt; can't be nested).&lt;/p&gt;
+  &lt;p&gt;Outside of &lt;code&gt;head&lt;/code&gt; elements, if the
+  &lt;code&gt;noscript&lt;/code&gt; element is &lt;span&gt;without script&lt;/span&gt;, then
+  the content model of a &lt;code&gt;noscript&lt;/code&gt; element is
+  &lt;span&gt;transparent&lt;/span&gt;, with the additional restriction that a
+  &lt;code&gt;noscript&lt;/code&gt; element must not have a &lt;code&gt;noscript&lt;/code&gt;
+  element as an ancestor (that is, &lt;code&gt;noscript&lt;/code&gt; can't be
+  nested).&lt;/p&gt;
 
-  &lt;p&gt;Outside of &lt;code&gt;head&lt;/code&gt; elements, if &lt;span&gt;scripting is
-  enabled&lt;/span&gt;, then the content model of a &lt;code&gt;noscript&lt;/code&gt;
-  element is text, except that the text must be such that running the
-  following algorithm results in a conforming document with no
-  &lt;code&gt;noscript&lt;/code&gt; elements and no &lt;code&gt;script&lt;/code&gt; elements,
-  and such that no step in the algorithm causes an &lt;span&gt;HTML
-  parser&lt;/span&gt; to flag a &lt;span&gt;parse error&lt;/span&gt;:&lt;/p&gt;
+  &lt;p&gt;Outside of &lt;code&gt;head&lt;/code&gt; elements, if the
+  &lt;code&gt;noscript&lt;/code&gt; element is &lt;span&gt;with script&lt;/span&gt;, then the
+  content model of a &lt;code&gt;noscript&lt;/code&gt; element is text, except
+  that the text must be such that running the following algorithm
+  results in a conforming document with no &lt;code&gt;noscript&lt;/code&gt;
+  elements and no &lt;code&gt;script&lt;/code&gt; elements, and such that no step
+  in the algorithm causes an &lt;span&gt;HTML parser&lt;/span&gt; to flag a
+  &lt;span&gt;parse error&lt;/span&gt;:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -21420,17 +21593,24 @@
 
   &lt;p&gt;The &lt;code&gt;noscript&lt;/code&gt; element has no other requirements. In
   particular, children of the &lt;code&gt;noscript&lt;/code&gt; element are not
-  exempt from form submission, scripting, and so forth, even when
-  scripting is enabled.&lt;/p&gt;
+  exempt from form submission, scripting, and so forth, even when the
+  element is &lt;span&gt;with script&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;All these contortions are required because, for
-  historical reasons, the &lt;code&gt;noscript&lt;/code&gt; element causes the
-  &lt;span&gt;HTML parser&lt;/span&gt; to act differently based on whether
-  scripting is enabled or not. The element is not allowed in XML,
-  because in XML the parser is not affected by such state, and thus
-  the element would not have the desired effect.&lt;/p&gt;
+  historical reasons, the &lt;code&gt;noscript&lt;/code&gt; element is handled
+  differently by the &lt;span&gt;HTML parser&lt;/span&gt; based on whether &lt;span
+  title=&quot;scripting flag&quot;&gt;scripting was enabled or not&lt;/span&gt; when the
+  parser was invoked. The element is not allowed in XML, because in
+  XML the parser is not affected by such state, and thus the element
+  would not have the desired effect.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;The &lt;code&gt;noscript&lt;/code&gt; element interacts poorly
+  with the &lt;code title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt;
+  feature. Authors are encouraged to not use &lt;code&gt;noscript&lt;/code&gt;
+  elements on pages that will have &lt;code
+  title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; enabled.&lt;/p&gt;
 
+
   &lt;h4&gt;The &lt;dfn&gt;&lt;code&gt;event-source&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=&quot;element&quot;&gt;
@@ -24809,12 +24989,11 @@
   title=&quot;attr-template&quot;&gt;template&lt;/code&gt; attribute set, the user agent
   must fetch the specified file&lt;!-- XXX or queue it up to be fetched,
   or something --&gt; and parse it (without a &lt;span&gt;browsing
-  context&lt;/span&gt;, and with &lt;span&gt;scripting disabled&lt;/span&gt;&lt;!-- XXX
-  xref --&gt;) to obtain a DOM. If the URI is the same as the URI of the
-  current document&lt;!-- XXX xref --&gt;, then the current document's DOM
-  must be assumed to be that parsed DOM. While this loading and
-  parsing is in progress, the element is said to be &lt;em&gt;busy loading
-  the template rules or data&lt;/em&gt;.&lt;/p&gt;
+  context&lt;/span&gt;) to obtain a DOM. If the URI is the same as the URI
+  of the current document&lt;!-- XXX xref --&gt;, then the current
+  document's DOM must be assumed to be that parsed DOM. While this
+  loading and parsing is in progress, the element is said to be
+  &lt;em&gt;busy loading the template rules or data&lt;/em&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the resource specified by the &lt;code
   title=&quot;attr-template&quot;&gt;template&lt;/code&gt; attribute is not the current
@@ -24937,13 +25116,12 @@
   title=&quot;attr-ref&quot;&gt;ref&lt;/code&gt; attribute has its &lt;code
   title=&quot;attr-ref&quot;&gt;ref&lt;/code&gt; attribute set, the user agent must fetch
   the specified file&lt;!-- XXX or queue it up to be fetched, or
-  something --&gt; and parse it (without a &lt;span&gt;browsing context&lt;/span&gt;,
-  and with &lt;span&gt;scripting disabled&lt;/span&gt;&lt;!-- XXX xref --&gt;) to obtain
-  a DOM. If the URI is the same as the URI of the current document&lt;!--
-  XXX xref --&gt;, then the current document's DOM is assumed to be that
-  parsed DOM. While this loading and parsing is in progress, the
-  element is said to be &lt;em&gt;busy loading the template rules or
-  data&lt;/em&gt;.&lt;/p&gt;
+  something --&gt; and parse it (without a &lt;span&gt;browsing context&lt;/span&gt;)
+  to obtain a DOM. If the URI is the same as the URI of the current
+  document&lt;!-- XXX xref --&gt;, then the current document's DOM is
+  assumed to be that parsed DOM. While this loading and parsing is in
+  progress, the element is said to be &lt;em&gt;busy loading the template
+  rules or data&lt;/em&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the resource specified by the &lt;code
   title=&quot;attr-ref&quot;&gt;ref&lt;/code&gt; attribute is not the current
@@ -25839,6 +26017,19 @@
 
     &lt;dl&gt;
 
+     &lt;dt id=&quot;sandboxWindowOpen&quot;&gt;If the current browsing context has
+     the &lt;span&gt;sandboxed navigation browsing context&lt;/span&gt; flag
+     set.&lt;/dt&gt;
+
+     &lt;dd&gt;The user agent may offer to create a new &lt;span&gt;top-level
+     browsing context&lt;/span&gt; or reuse an existing &lt;span&gt;top-level
+     browsing context&lt;/span&gt;. If the user picks one of those options,
+     then the designated browsing context must be the chosen one (the
+     browsing context's name isn't set to the given browsing context
+     name). Otherwise (if the user agent doesn't offer the option to
+     the user, or if the user declines to allow a browsing context to
+     be used) there must not be a chosen browsing context.&lt;/dd&gt;
+
      &lt;dt&gt;If the user agent has been configured such that in this
      instance it will create a new browsing context&lt;/dt&gt;
 
@@ -26320,6 +26511,14 @@
 
     &lt;dl class=&quot;switch&quot;&gt;
 
+     &lt;dt id=&quot;sandboxOrigin&quot;&gt;If a &lt;code&gt;Document&lt;/code&gt; is in a
+     &lt;span&gt;browsing context&lt;/span&gt; whose &lt;span&gt;sandboxed origin
+     browsing context&lt;/span&gt; is set&lt;/dt&gt;
+
+     &lt;dd&gt;The &lt;span&gt;origin&lt;/span&gt; is a globally unique identifier
+     assigned when the &lt;code&gt;Document&lt;/code&gt; is created.&lt;/dd&gt;
+
+
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was returned by the
      &lt;code&gt;XMLHttpRequest&lt;/code&gt; API&lt;/dt&gt;
 
@@ -26609,27 +26808,70 @@
 
   &lt;/ul&gt;
 
-  &lt;p&gt;User agents may provide a mechanism to enable or disable the
-  execution of author-provided code. When the user agent is configured
-  such that author-provided code does not execute, or if the user
-  agent is implemented so as to never execute author-provided code, it
-  is said that &lt;dfn&gt;scripting is disabled&lt;/dfn&gt;. When author-provided
-  code &lt;em&gt;does&lt;/em&gt; execute, &lt;dfn&gt;scripting is enabled&lt;/dfn&gt;. A user
-  agent with scripting disabled is a &lt;span title=&quot;User agents with no
-  scripting support&quot;&gt;user agent with no scripting support&lt;/span&gt; for
-  the purposes of conformance.&lt;/p&gt;
 
-  
 
   &lt;h4&gt;Script execution contexts&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn&gt;script execution browsing context&lt;/dfn&gt; of a script is
   defined when that script is created. It is typically the
   &lt;span&gt;browsing context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object that
-  is being used as the script's dereference context..&lt;/p&gt;
+  is being used as the script's dereference context.&lt;/p&gt;
 
+  &lt;p&gt;All &lt;span title=&quot;browsing context&quot;&gt;browsing contexts&lt;/span&gt; are,
+  by definition, potential &lt;span title=&quot;script execution browsing
+  context&quot;&gt;script execution browsing contexts&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;It is said that &lt;dfn&gt;scripting is disabled&lt;/dfn&gt; in a
+  &lt;span&gt;script execution browsing context&lt;/span&gt; when any of the
+  following conditions are true:&lt;/p&gt;
 
+  &lt;ul&gt;
+
+   &lt;li&gt;The user agent does not support scripting.&lt;/li&gt;
+
+   &lt;li&gt;The user has disabled scripting for this &lt;span&gt;script execution
+   browsing context&lt;/span&gt;. (User agents may provide users with the
+   option to disable scripting globally, on a per-origin basis, or in
+   other ways down to the granularity of individual &lt;span
+   title=&quot;script execution browsing context&quot;&gt;script execution browsing
+   contexts&lt;/span&gt;.)&lt;/li&gt;
+
+   &lt;li id=&quot;designModeScriptBlocked&quot;&gt;The &lt;span&gt;script execution
+   browsing context&lt;/span&gt; is a &lt;span&gt;browsing context&lt;/span&gt; whose
+   &lt;span&gt;active document&lt;/span&gt; has &lt;code
+   title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; enabled.&lt;/li&gt;
+
+   &lt;li id=&quot;sandboxScriptBlocked&quot;&gt;The &lt;span&gt;script execution browsing
+   context&lt;/span&gt; is a &lt;span&gt;browsing context&lt;/span&gt; whose
+   &lt;span&gt;sandboxed scripts browsing context&lt;/span&gt; flag is set.&lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p&gt;A node is said to be &lt;dfn&gt;without script&lt;/dfn&gt; if either the
+  &lt;code&gt;Document&lt;/code&gt; object of the node (the node itself, it is
+  itself a &lt;code&gt;Document&lt;/code&gt; object) does not have an associated
+  &lt;span&gt;browsing context&lt;/span&gt;, or &lt;span&gt;scripting is disabled&lt;/span&gt;
+  in that &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A node is said to be &lt;dfn&gt;with script&lt;/dfn&gt; if it is not
+  &lt;span&gt;without script&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;If you can find a better pair of terms than
+  &quot;with script&quot; and &quot;without script&quot; let me know. The only things I
+  can find that are less confusing are also way, way longer.&lt;/p&gt;
+
+  &lt;p&gt;When a script is to be executed in a &lt;span&gt;script execution
+  browsing context&lt;/span&gt; in which &lt;span&gt;scripting is disabled&lt;/span&gt;,
+  the script must do nothing and return nothing (a void return
+  value).&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Thus, for instance, enabling &lt;code
+  title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; will disable any
+  event handler attributes, event listeners, timeouts, etc, that were
+  set by scripts in the document.&lt;/p&gt;
+
+
+
   &lt;h4&gt;Security exceptions&lt;/h4&gt;
 
   &lt;p class=&quot;big-issue&quot;&gt;Define &lt;dfn&gt;security exception&lt;/dfn&gt;.&lt;/p&gt;
@@ -26669,11 +26911,7 @@
   there is no &lt;span&gt;script execution browsing context&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;URIs using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol should
-  be evaluated when the resource for that URI is needed, unless
-  &lt;span&gt;scripting is disabled&lt;/span&gt; or the &lt;code&gt;Document&lt;/code&gt;
-  corresponding to the dereference context (as defined above), if any,
-  has &lt;code title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt;
-  enabled.&lt;/p&gt;
+  be evaluated when the resource for that URI is needed.&lt;/p&gt;
 
   &lt;p&gt;If the dereference by-product is void (there is no return value),
   then the URI must be treated in a manner equivalent to an HTTP
@@ -27034,30 +27272,25 @@
 
   &lt;!-- IE actually uncancels the event if the function returns true --&gt;
 
-
-  &lt;p&gt;When &lt;span&gt;scripting is disabled&lt;/span&gt;, event handler attributes
-  must do nothing.&lt;/p&gt;
-
-  &lt;!-- XXX arguments should use &lt;var&gt;, not &lt;code&gt;: --&gt; &lt;p&gt;When
-  &lt;span&gt;scripting is enabled&lt;/span&gt;, all event handler attributes on
-  an element, whether set to null or to a function, must be registered
-  as event listeners on the element, as if the &lt;code
+  &lt;p&gt;All event handler attributes on an element, whether set to null
+  or to a function, must be registered as event listeners on the
+  element, as if the &lt;code
   title=&quot;dom-EventTarget-addEventListenerNS&quot;&gt;addEventListenerNS()&lt;/code&gt;
   method on the &lt;code&gt;Element&lt;/code&gt; object's &lt;code&gt;EventTarget&lt;/code&gt;
   interface had been invoked when the element was created, with the
-  event type (&lt;code title=&quot;dom-event-type&quot;&gt;type&lt;/code&gt; argument) equal
+  event type (&lt;var title=&quot;dom-event-type&quot;&gt;type&lt;/var&gt; argument) equal
   to the type described for the event handler attribute in the list
-  above, the namespace (&lt;code
-  title=&quot;dom-event-namespaceURI&quot;&gt;namespaceURI&lt;/code&gt; argument) set to
+  above, the namespace (&lt;var
+  title=&quot;dom-event-namespaceURI&quot;&gt;namespaceURI&lt;/var&gt; argument) set to
   null, the listener set to be a target and bubbling phase listener
-  (&lt;code title=&quot;dom-event-useCapture&quot;&gt;useCapture&lt;/code&gt; argument set
-  to false), the event group set to the default group (&lt;code
-  title=&quot;dom-event-evtGroup&quot;&gt;evtGroup&lt;/code&gt; argument set to null),
-  and the event listener itself (&lt;code
-  title=&quot;dom-event-listener&quot;&gt;listener&lt;/code&gt; argument) set to do
+  (&lt;var title=&quot;dom-event-useCapture&quot;&gt;useCapture&lt;/var&gt; argument set to
+  false), the event group set to the default group (&lt;var
+  title=&quot;dom-event-evtGroup&quot;&gt;evtGroup&lt;/var&gt; argument set to null), and
+  the event listener itself (&lt;var
+  title=&quot;dom-event-listener&quot;&gt;listener&lt;/var&gt; argument) set to do
   nothing while the event handler attribute is null, and set to invoke
   the function associated with the event handler attribute
-  otherwise. (The &lt;code title=&quot;dom-event-listener&quot;&gt;listener&lt;/code&gt;
+  otherwise. (The &lt;var title=&quot;dom-event-listener&quot;&gt;listener&lt;/var&gt;
   argument is emphatically &lt;em&gt;not&lt;/em&gt; the event handler attribute
   itself.)&lt;/p&gt;
 
@@ -29793,6 +30026,21 @@
 
   &lt;ol&gt;
 
+   &lt;li id=&quot;sandboxLinks&quot;&gt;&lt;p&gt;If the &lt;span&gt;source browsing
+   context&lt;/span&gt; is not the same as the &lt;span&gt;browsing context&lt;/span&gt;
+   being navigated, and the &lt;span&gt;source browsing context&lt;/span&gt; is
+   not one of the &lt;span title=&quot;ancestor browsing context&quot;&gt;ancestor
+   browsing contexts&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; being
+   navigated, and the &lt;span&gt;source browsing context&lt;/span&gt; has its
+   &lt;span&gt;sandboxed navigation browsing context&lt;/span&gt; flag set, then
+   abort these steps. The user agent may offer to open the specified
+   resource in a new &lt;span&gt;top-level browsing context&lt;/span&gt; or in the
+   &lt;span&gt;top-level browsing context&lt;/span&gt; of the &lt;span&gt;source
+   browsing context&lt;/span&gt;, at the user's option, in which case the
+   user agent must &lt;span&gt;navigate&lt;/span&gt; that designated
+   &lt;span&gt;top-level browsing context&lt;/span&gt; to the specified resource
+   as if the user had requested it independently.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li id=&quot;seamlessLinks&quot;&gt;&lt;p&gt;If the &lt;span&gt;source browsing
    context&lt;/span&gt; is the same as the &lt;span&gt;browsing context&lt;/span&gt;
    being navigated, and this browsing context has its &lt;span&gt;seamless
@@ -30292,7 +30540,12 @@
   element, e.g. to link to stylesheet or an XBL binding, or to give
   the document a &lt;code&gt;title&lt;/code&gt;.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot; id=&quot;sandboxPluginNavigate&quot;&gt;If the &lt;span&gt;sandboxed
+  plugins browsing context&lt;/span&gt; flag is set on the &lt;span&gt;browsing
+  context&lt;/span&gt;, the synthesized &lt;code&gt;embed&lt;/code&gt; element will &lt;a
+  href=&quot;#sandboxPluginEmbed&quot;&gt;fail to render the content&lt;/a&gt;.&lt;/p&gt;
 
+
   &lt;h4 id=&quot;read-ua-inline&quot;&gt;&lt;dfn title=&quot;navigate-ua-inline&quot;&gt;Page load processing model for inline content that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When the user agent is to display a user agent page inline in a
@@ -34035,8 +34288,6 @@
   &lt;!-- XXX rendering requirement: The current caret should affect the
   line-height (i.e. it acts at least like an empty inline element) --&gt;
 
-  &lt;!-- XXX document.designMode attribute --&gt;
-
   &lt;!-- XXX would be useful to have a way to mark an element as
   unremovable. --&gt;
 
@@ -34264,19 +34515,11 @@
   title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; disabled.&lt;/p&gt;
 
   &lt;p&gt;Enabling &lt;code title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt;
-  causes scripts in general to be disabled and the document to become
-  editable.&lt;/p&gt;
+  &lt;a href=&quot;#designModeScriptBlocked&quot;&gt;causes scripts in general to be
+  disabled&lt;/a&gt; and the document to become editable.&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code&gt;Document&lt;/code&gt; has &lt;code
-  title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; enabled, the
-  &lt;span&gt;event handler attributes&lt;/span&gt; of the document and any
-  elements owned by the document must do nothing, and event listeners
-  registered on the document and any elements owned by the document
-  that are associated with script from the document must similarly do
-  nothing.&lt;/p&gt;
 
 
-
   &lt;h3 id=&quot;dnd&quot;&gt;&lt;dfn&gt;Drag and drop&lt;/dfn&gt;&lt;/h3&gt;
 
 &lt;!--XXX
@@ -39620,7 +39863,8 @@
    that to break out of the &lt;noscript&gt; but it doesn't. This is an edge
    case that doesn't affect the spec, since the algorithm for fragment
    parsing is only used for innerHTML, where we know scripting is
-   enabled. --&gt;
+   enabled. (XXX except maybe if innerHTML is set from another
+   browsing context on a document with designMode set?) --&gt;
 
    &lt;li&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is a &lt;code&gt;body&lt;/code&gt; element,
    then switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;span
@@ -39919,7 +40163,14 @@
   markup, for historical reasons.&lt;/p&gt;
 
 
+  &lt;h5&gt;The scripting state&lt;/h5&gt;
 
+  &lt;p&gt;The &lt;dfn&gt;scripting flag&lt;/dfn&gt; is set to &quot;enabled&quot; if the
+  &lt;code&gt;Document&lt;/code&gt; with which the parser is associated was
+  &lt;span&gt;with script&lt;/span&gt; when the parser was created, and &quot;disabled&quot;
+  otherwise.&lt;/p&gt;
+
+
   &lt;h4&gt;&lt;dfn&gt;Tokenisation&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;Implementations must act as if they used the following state
@@ -42186,13 +42437,13 @@
     &lt;p&gt;Follow the &lt;span&gt;generic RCDATA parsing algorithm&lt;/span&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if &lt;span&gt;scripting is enabled&lt;/span&gt;:&lt;/dt&gt;
+   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if the &lt;span&gt;scripting flag&lt;/span&gt; is enabled:&lt;/dt&gt;
    &lt;dt&gt;A start tag whose tag name is &quot;style&quot;&lt;/dt&gt;
    &lt;dd&gt;
     &lt;p&gt;Follow the &lt;span&gt;generic CDATA parsing algorithm&lt;/span&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if &lt;span&gt;scripting is disabled&lt;/span&gt;:&lt;/dt&gt;
+   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if the &lt;span&gt;scripting flag&lt;/span&gt; is disabled:&lt;/dt&gt;
    &lt;dd&gt;
 
     &lt;p&gt;&lt;span&gt;Insert an HTML element&lt;/span&gt; for the token.&lt;/p&gt;
@@ -43484,10 +43735,8 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A start tag whose tag name is one of: &quot;iframe&quot;,
-   &quot;noembed&quot;, &quot;noframes&quot;&lt;/dt&gt;
-   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if
-   &lt;span&gt;scripting is enabled&lt;/span&gt;:&lt;/dt&gt;
+   &lt;dt&gt;A start tag whose tag name is one of: &quot;iframe&quot;, &quot;noembed&quot;, &quot;noframes&quot;&lt;/dt&gt;
+   &lt;dt&gt;A start tag whose tag name is &quot;noscript&quot;, if the &lt;span&gt;scripting flag&lt;/span&gt; is enabled:&lt;/dt&gt;
    &lt;dd&gt;
     &lt;p&gt;Follow the &lt;span&gt;generic CDATA parsing algorithm&lt;/span&gt;.&lt;/p&gt;
    &lt;/dd&gt;
@@ -43586,8 +43835,7 @@
    &quot;isindex&quot;, &quot;noembed&quot;, &quot;noframes&quot;, &quot;param&quot;, &quot;select&quot;, &quot;spacer&quot;,
    &quot;table&quot;, &quot;textarea&quot;, &quot;wbr&quot;&lt;/dt&gt; &lt;!-- add keygen if we add the start
    tag --&gt;
-   &lt;dt&gt;An end tag whose tag name is &quot;noscript&quot;, if &lt;span&gt;scripting
-   is enabled&lt;/span&gt;:&lt;/dt&gt;
+   &lt;dt&gt;An end tag whose tag name is &quot;noscript&quot;, if the &lt;span&gt;scripting flag&lt;/span&gt; is enabled:&lt;/dt&gt;
    &lt;dd&gt;
     &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
@@ -45239,7 +45487,9 @@
         title=&quot;&quot;&gt;current node&lt;/var&gt;'s &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; DOM
         attribute literally.&lt;/p&gt; &lt;!-- note about noscript: we're
         assuming here that scripting is disabled. If this algorithm is
-        used with scripting disabled, this won't work right. --&gt;
+        used with scripting disabled, this won't work right. XXX This
+        might affect calling innerHTML on nodes in a document that is
+        being designMode'd --&gt;
 
         &lt;p&gt;Otherwise, append the value of &lt;var title=&quot;&quot;&gt;current
         node&lt;/var&gt;'s &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; DOM attribute, &lt;span
@@ -45411,11 +45661,12 @@
 
 
      &lt;dt&gt;If it is a &lt;code&gt;noscript&lt;/code&gt; element&lt;/dt&gt;
-     &lt;dd&gt;If &lt;span&gt;scripting is enabled&lt;/span&gt;, set the &lt;span&gt;content
-     model flag&lt;/span&gt; to &lt;em&gt;CDATA&lt;/em&gt;. Otherwise, set the
-     &lt;span&gt;content model flag&lt;/span&gt; to &lt;em&gt;PCDATA&lt;/em&gt;.&lt;/dd&gt;
 
+     &lt;dd&gt;If the &lt;span&gt;scripting flag&lt;/span&gt; is enabled, set the
+     &lt;span&gt;content model flag&lt;/span&gt; to &lt;em&gt;CDATA&lt;/em&gt;. Otherwise, set
+     the &lt;span&gt;content model flag&lt;/span&gt; to &lt;em&gt;PCDATA&lt;/em&gt;.&lt;/dd&gt;
 
+
      &lt;dt&gt;If it is a &lt;code&gt;plaintext&lt;/code&gt; element&lt;/dt&gt;
 
      &lt;dd&gt;Set the &lt;span&gt;content model flag&lt;/span&gt; to
@@ -45754,8 +46005,15 @@
   is obsoleted so that all extension frameworks (Java, .NET, Flash,
   etc) are handled in a consistent manner.&lt;/p&gt;
 
-  &lt;p class=&quot;big-issue&quot;&gt;define how the element works, if supported&lt;/p&gt;
+  &lt;p id=&quot;sandboxPluginApplet&quot;&gt;If the &lt;span&gt;sandboxed plugins browsing
+  context&lt;/span&gt; flag is set on the &lt;span&gt;browsing context&lt;/span&gt; for
+  which the &lt;code&gt;applet&lt;/code&gt; element's document is the &lt;span&gt;active
+  document&lt;/span&gt;, then the element must be ignored (it represents
+  nothing).&lt;/p&gt;
 
+  &lt;p&gt;Otherwise, &lt;span class=&quot;big-issue&quot;&gt;define how the element works,
+  if supported&lt;/span&gt;.&lt;/p&gt;
+
   &lt;pre class=&quot;idl&quot;&gt;[XXX] interface &lt;span&gt;HTMLDocument&lt;/span&gt; {
   readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-applets&quot;&gt;applets&lt;/span&gt;;
 };&lt;/pre&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008541.html">[html5] r1642 - /
</A></li>
	<LI>Next message: <A HREF="008543.html">[html5] r1644 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8542">[ date ]</a>
              <a href="thread.html#8542">[ thread ]</a>
              <a href="subject.html#8542">[ subject ]</a>
              <a href="author.html#8542">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
